var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.define=function(a,b){var c=b;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=b[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var g in d.requires[e])if(!goog.isProvided_(g))if(g in d.nameToPath)a(d.nameToPath[g]);else throw Error("Undefined nameToPath for "+g);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){var g=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,g)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,
e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);var X=X||{};X.DEV=!0;X.TIMER=function(a){eval("X.DEV === undefined")||window.console.time(a)};X.TIMERSTOP=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};X.counter=function(){this._counter=0;this.uniqueId=function(){return this._counter++}};window["X.counter"]=new X.counter;function inject(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}return a}var $=window.$;
function bind_shim(){Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e?this:a||window,c.concat(b.call(arguments)))};e.prototype=this.prototype;f.prototype=new e;return f})}
function requestAnimationFrame_shim(){(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var f=Date.now(),g=Math.max(0,16-(f-a)),h=window.setTimeout(function(){b(f+g)},g);a=f+g;return h});window.cancelAnimationFrame||
(window.cancelAnimationFrame=function(a){clearTimeout(a)})})()}
function arrayBufferSlice_shim(){"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d})}bind_shim();requestAnimationFrame_shim();
arrayBufferSlice_shim();goog.exportSymbol("$",$);goog.exportSymbol("Function.prototype.bind",Function.prototype.bind);goog.exportSymbol("window.requestAnimationFrame",window.requestAnimationFrame);goog.exportSymbol("window.cancelAnimationFrame",window.cancelAnimationFrame);goog.dom={};goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.debug={};goog.debug.Error=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.DETECT_DOUBLE_ESCAPING=!1;goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(a,b){return 0==a.lastIndexOf(b,0)};goog.string.endsWith=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c};goog.string.caseInsensitiveStartsWith=function(a,b){return 0==goog.string.caseInsensitiveCompare(b,a.substr(0,b.length))};goog.string.caseInsensitiveEndsWith=function(a,b){return 0==goog.string.caseInsensitiveCompare(b,a.substr(a.length-b.length,b.length))};
goog.string.caseInsensitiveEquals=function(a,b){return a.toLowerCase()==b.toLowerCase()};goog.string.subs=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.isEmptySafe=function(a){return goog.string.isEmpty(goog.string.makeSafe(a))};
goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return" "==a};goog.string.isUnicodeChar=function(a){return 1==a.length&&" "<=a&&"~">=a||"\u0080"<=a&&"\ufffd">=a};goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};
goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(goog.string.numerateCompareRegExp_),d=b.toLowerCase().match(goog.string.numerateCompareRegExp_),e=Math.min(c.length,d.length),f=0;f<e;f++){var g=c[f],h=d[f];if(g!=h)return c=parseInt(g,10),!isNaN(c)&&(d=parseInt(h,10),!isNaN(d)&&c-d)?c-d:g<h?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1};goog.string.urlEncode=function(a){return encodeURIComponent(String(a))};
goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")};
goog.string.htmlEscape=function(a,b){if(b)a=a.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(a=a.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(goog.string.AMP_RE_,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(goog.string.LT_RE_,
"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(goog.string.GT_RE_,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(goog.string.QUOT_RE_,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(goog.string.NULL_RE_,"&#0;"));goog.string.DETECT_DOUBLE_ESCAPING&&-1!=a.indexOf("e")&&(a=a.replace(goog.string.E_RE_,"&#101;"))}return a};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;
goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;goog.string.unescapeEntities=function(a){return goog.string.contains(a,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(a):goog.string.unescapePureXmlEntities_(a):a};goog.string.unescapeEntitiesWithDocument=function(a,b){return goog.string.contains(a,"&")?goog.string.unescapeEntitiesUsingDom_(a,b):a};
goog.string.unescapeEntitiesUsingDom_=function(a,b){var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d;d=b?b.createElement("div"):goog.global.document.createElement("div");return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(a,b){var g=c[a];if(g)return g;if("#"==b.charAt(0)){var h=Number("0"+b.substr(1));isNaN(h)||(g=String.fromCharCode(h))}g||(d.innerHTML=a+" ",g=d.firstChild.nodeValue.slice(0,-1));return c[a]=g})};
goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(a,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if("#"==c.charAt(0)){var d=Number("0"+c.substr(1));if(!isNaN(d))return String.fromCharCode(d)}return a}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,b){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),b)};
goog.string.preserveSpaces=function(a){return a.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a};goog.string.truncate=function(a,b,c){c&&(a=goog.string.unescapeEntities(a));a.length>b&&(a=a.substring(0,b-3)+"...");c&&(a=goog.string.htmlEscape(a));return a};
goog.string.truncateMiddle=function(a,b,c,d){c&&(a=goog.string.unescapeEntities(a));if(d&&a.length>b){d>b&&(d=b);var e=a.length-d;a=a.substring(0,b-d)+"..."+a.substring(e)}else a.length>b&&(d=Math.floor(b/2),e=a.length-d,a=a.substring(0,d+b%2)+"..."+a.substring(e));c&&(a=goog.string.htmlEscape(a));return a};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);b[c+1]=goog.string.specialEscapeChars_[d]||(31<e&&127>e?d:goog.string.escapeChar(d))}b.push('"');return b.join("")};goog.string.escapeString=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=goog.string.escapeChar(a.charAt(c));return b.join("")};
goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[a];if(a in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a];var b=a,c=a.charCodeAt(0);if(31<c&&127>c)b=a;else{if(256>c){if(b="\\x",16>c||256<c)b+="0"}else b="\\u",4096>c&&(b+="0");b+=c.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=b};goog.string.toMap=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=!0;return b};
goog.string.contains=function(a,b){return-1!=a.indexOf(b)};goog.string.caseInsensitiveContains=function(a,b){return goog.string.contains(a.toLowerCase(),b.toLowerCase())};goog.string.countOf=function(a,b){return a&&b?a.split(b).length-1:0};goog.string.removeAt=function(a,b,c){var d=a;0<=b&&b<a.length&&0<c&&(d=a.substr(0,b)+a.substr(b+c,a.length-b-c));return d};goog.string.remove=function(a,b){var c=new RegExp(goog.string.regExpEscape(b),"");return a.replace(c,"")};
goog.string.removeAll=function(a,b){var c=new RegExp(goog.string.regExpEscape(b),"g");return a.replace(c,"")};goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(a,b){return Array(b+1).join(a)};goog.string.padNumber=function(a,b,c){a=goog.isDef(c)?a.toFixed(c):String(a);c=a.indexOf(".");-1==c&&(c=a.length);return goog.string.repeat("0",Math.max(0,b-c))+a};
goog.string.makeSafe=function(a){return null==a?"":String(a)};goog.string.buildString=function(a){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};
goog.string.compareVersions=function(a,b){for(var c=0,d=goog.string.trim(String(a)).split("."),e=goog.string.trim(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&g<f;g++){var h=d[g]||"",k=e[g]||"",l=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var n=l.exec(h)||["","",""],p=m.exec(k)||["","",""];if(0==n[0].length&&0==p[0].length)break;var c=0==n[1].length?0:parseInt(n[1],10),q=0==p[1].length?0:parseInt(p[1],10),c=goog.string.compareElements_(c,q)||goog.string.compareElements_(0==n[2].length,0==p[2].length)||
goog.string.compareElements_(n[2],p[2])}while(0==c)}return c};goog.string.compareElements_=function(a,b){return a<b?-1:a>b?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(a){for(var b=0,c=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=goog.string.HASHCODE_MAX_;return b};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(a){var b=Number(a);return 0==b&&goog.string.isEmpty(a)?NaN:b};goog.string.isLowerCamelCase=function(a){return/^[a-z]+([A-Z][a-z]*)*$/.test(a)};goog.string.isUpperCamelCase=function(a){return/^([A-Z][a-z]*)+$/.test(a)};goog.string.toCamelCase=function(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};goog.string.toSelectorCase=function(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()};
goog.string.toTitleCase=function(a,b){var c=goog.isString(b)?goog.string.regExpEscape(b):"\\s";return a.replace(new RegExp("(^"+(c?"|["+c+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()})};goog.string.parseInt=function(a){isFinite(a)&&(a=String(a));return goog.isString(a)?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN};goog.string.splitLimit=function(a,b,c){a=a.split(b);for(var d=[];0<c&&a.length;)d.push(a.shift()),c--;a.length&&d.push(a.join(b));return d};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(a,b){b.unshift(a);goog.debug.Error.call(this,goog.string.subs.apply(null,b));b.shift();this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(a){throw a;};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;
goog.asserts.doAssertFailure_=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),f=d;else a&&(e+=": "+a,f=b);a=new goog.asserts.AssertionError(""+e,f||[]);goog.asserts.errorHandler_(a)};goog.asserts.setErrorHandler=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=a)};goog.asserts.assert=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!a&&goog.asserts.doAssertFailure_("",null,b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.fail=function(a,b){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(a)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertString=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isString(a)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertFunction=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(a)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertObject=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertArray=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(a)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertBoolean=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(a)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertElement=function(a,b,c){!goog.asserts.ENABLE_ASSERTS||goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertInstanceof=function(a,b,c,d){!goog.asserts.ENABLE_ASSERTS||a instanceof b||goog.asserts.doAssertFailure_("instanceof check failed.",null,c,Array.prototype.slice.call(arguments,3));return a};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var a in Object.prototype)goog.asserts.fail(a+" should not be enumerable in Object.prototype.")};goog.events={};goog.events.EventId=function(a){this.id=a};goog.events.EventId.prototype.toString=function(){return this.id};goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1E6*Math.random()|0);goog.events.Listenable.addImplementation=function(a){a.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0};goog.events.Listenable.isImplementedBy=function(a){return!(!a||!a[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.Listener=function(a,b,c,d,e,f){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack);this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.handler=f;this.key=goog.events.ListenableKey.reserveKey();this.removed=this.callOnce=!1};goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0;this.handler=this.src=this.proxy=this.listener=null};goog.object={};goog.object.forEach=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)};goog.object.filter=function(a,b,c){var d={},e;for(e in a)b.call(c,a[e],e,a)&&(d[e]=a[e]);return d};goog.object.map=function(a,b,c){var d={},e;for(e in a)d[e]=b.call(c,a[e],e,a);return d};goog.object.some=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return!0;return!1};goog.object.every=function(a,b,c){for(var d in a)if(!b.call(c,a[d],d,a))return!1;return!0};
goog.object.getCount=function(a){var b=0,c;for(c in a)b++;return b};goog.object.getAnyKey=function(a){for(var b in a)return b};goog.object.getAnyValue=function(a){for(var b in a)return a[b]};goog.object.contains=function(a,b){return goog.object.containsValue(a,b)};goog.object.getValues=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};goog.object.getKeys=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};
goog.object.getValueByKeys=function(a,b){for(var c=goog.isArrayLike(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],goog.isDef(a));c++);return a};goog.object.containsKey=function(a,b){return b in a};goog.object.containsValue=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1};goog.object.findKey=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d};goog.object.findValue=function(a,b,c){return(b=goog.object.findKey(a,b,c))&&a[b]};
goog.object.isEmpty=function(a){for(var b in a)return!1;return!0};goog.object.clear=function(a){for(var b in a)delete a[b]};goog.object.remove=function(a,b){var c;(c=b in a)&&delete a[b];return c};goog.object.add=function(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');goog.object.set(a,b,c)};goog.object.get=function(a,b,c){return b in a?a[b]:c};goog.object.set=function(a,b,c){a[b]=c};goog.object.setIfUndefined=function(a,b,c){return b in a?a[b]:a[b]=c};
goog.object.clone=function(a){var b={},c;for(c in a)b[c]=a[c];return b};goog.object.unsafeClone=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.object.unsafeClone(a[c]);return b}return a};goog.object.transpose=function(a){var b={},c;for(c in a)b[a[c]]=c;return b};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.object.extend=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<goog.object.PROTOTYPE_FIELDS_.length;f++)c=goog.object.PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};
goog.object.create=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};goog.object.createSet=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};
goog.object.createImmutableView=function(a){var b=a;Object.isFrozen&&!Object.isFrozen(a)&&(b=Object.create(a),Object.freeze(b));return b};goog.object.isImmutableView=function(a){return!!Object.isFrozen&&Object.isFrozen(a)};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.ASSUME_NATIVE_FUNCTIONS=!1;goog.array.peek=function(a){return a[a.length-1]};goog.array.last=goog.array.peek;goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(goog.isString(a))return goog.isString(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(goog.isString(a))return goog.isString(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(a,b,c){goog.asserts.assert(null!=a.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};goog.array.forEachRight=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,d=d-1;0<=d;--d)d in e&&b.call(c,e[d],d,a)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=goog.isString(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var k=g[h];b.call(c,k,h,a)&&(e[f++]=k)}return e};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=goog.isString(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};
goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(a,b,c,d){goog.asserts.assert(null!=a.length);d&&(b=goog.bind(b,d));return goog.array.ARRAY_PROTOTYPE_.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;goog.array.forEach(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(a,b,c,d){goog.asserts.assert(null!=a.length);d&&(b=goog.bind(b,d));return goog.array.ARRAY_PROTOTYPE_.reduceRight.call(a,b,c)}:function(a,b,c,d){var e=c;goog.array.forEachRight(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};goog.array.count=function(a,b,c){var d=0;goog.array.forEach(a,function(a,f,g){b.call(c,a,f,g)&&++d},c);return d};
goog.array.find=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};goog.array.findIndex=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1};goog.array.findRight=function(a,b,c){b=goog.array.findIndexRight(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};
goog.array.findIndexRight=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,d=d-1;0<=d;d--)if(d in e&&b.call(c,e[d],d,a))return d;return-1};goog.array.contains=function(a,b){return 0<=goog.array.indexOf(a,b)};goog.array.isEmpty=function(a){return 0==a.length};goog.array.clear=function(a){if(!goog.isArray(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0};goog.array.insert=function(a,b){goog.array.contains(a,b)||a.push(b)};
goog.array.insertAt=function(a,b,c){goog.array.splice(a,c,0,b)};goog.array.insertArrayAt=function(a,b,c){goog.partial(goog.array.splice,a,c,0).apply(null,b)};goog.array.insertBefore=function(a,b,c){var d;2==arguments.length||0>(d=goog.array.indexOf(a,c))?a.push(b):goog.array.insertAt(a,b,d)};goog.array.remove=function(a,b){var c=goog.array.indexOf(a,b),d;(d=0<=c)&&goog.array.removeAt(a,c);return d};
goog.array.removeAt=function(a,b){goog.asserts.assert(null!=a.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(a,b,1).length};goog.array.removeIf=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0<=b?(goog.array.removeAt(a,b),!0):!1};goog.array.concat=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.join=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};
goog.array.toArray=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(goog.isArray(d)||(e=goog.isArrayLike(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,h=0;h<g;h++)a[f+h]=d[h];else a.push(d)}};
goog.array.splice=function(a,b,c,d){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(a,goog.array.slice(arguments,1))};goog.array.slice=function(a,b,c){goog.asserts.assert(null!=a.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(a,b):goog.array.ARRAY_PROTOTYPE_.slice.call(a,b,c)};
goog.array.removeDuplicates=function(a,b,c){b=b||a;var d=function(a){return goog.isObject(g)?"o"+goog.getUid(g):(typeof g).charAt(0)+g};c=c||d;for(var d={},e=0,f=0;f<a.length;){var g=a[f++],h=c(g);Object.prototype.hasOwnProperty.call(d,h)||(d[h]=!0,b[e++]=g)}b.length=e};goog.array.binarySearch=function(a,b,c){return goog.array.binarySearch_(a,c||goog.array.defaultCompare,!1,b)};goog.array.binarySelect=function(a,b,c){return goog.array.binarySearch_(a,b,!0,void 0,c)};
goog.array.binarySearch_=function(a,b,c,d,e){for(var f=0,g=a.length,h;f<g;){var k=f+g>>1,l;l=c?b.call(e,a[k],k,a):b(d,a[k]);0<l?f=k+1:(g=k,h=!l)}return h?f:~f};goog.array.sort=function(a,b){a.sort(b||goog.array.defaultCompare)};goog.array.stableSort=function(a,b){for(var c=0;c<a.length;c++)a[c]={index:c,value:a[c]};var d=b||goog.array.defaultCompare;goog.array.sort(a,function(a,b){return d(a.value,b.value)||a.index-b.index});for(c=0;c<a.length;c++)a[c]=a[c].value};
goog.array.sortObjectsByKey=function(a,b,c){var d=c||goog.array.defaultCompare;goog.array.sort(a,function(a,c){return d(a[b],c[b])})};goog.array.isSorted=function(a,b,c){b=b||goog.array.defaultCompare;for(var d=1;d<a.length;d++){var e=b(a[d-1],a[d]);if(0<e||0==e&&c)return!1}return!0};goog.array.equals=function(a,b,c){if(!goog.isArrayLike(a)||!goog.isArrayLike(b)||a.length!=b.length)return!1;var d=a.length;c=c||goog.array.defaultCompareEquality;for(var e=0;e<d;e++)if(!c(a[e],b[e]))return!1;return!0};
goog.array.compare3=function(a,b,c){c=c||goog.array.defaultCompare;for(var d=Math.min(a.length,b.length),e=0;e<d;e++){var f=c(a[e],b[e]);if(0!=f)return f}return goog.array.defaultCompare(a.length,b.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(a,b,c){c=goog.array.binarySearch(a,b,c);return 0>c?(goog.array.insertAt(a,b,-(c+1)),!0):!1};
goog.array.binaryRemove=function(a,b,c){b=goog.array.binarySearch(a,b,c);return 0<=b?goog.array.removeAt(a,b):!1};goog.array.bucket=function(a,b,c){for(var d={},e=0;e<a.length;e++){var f=a[e],g=b.call(c,f,e,a);goog.isDef(g)&&(d[g]||(d[g]=[])).push(f)}return d};goog.array.toObject=function(a,b,c){var d={};goog.array.forEach(a,function(e,f){d[b.call(c,e,f,a)]=e});return d};
goog.array.range=function(a,b,c){var d=[],e=0,f=a;c=c||1;void 0!==b&&(e=a,f=b);if(0>c*(f-e))return[];if(0<c)for(a=e;a<f;a+=c)d.push(a);else for(a=e;a>f;a+=c)d.push(a);return d};goog.array.repeat=function(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c};goog.array.flatten=function(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];goog.isArray(d)?b.push.apply(b,goog.array.flatten.apply(null,d)):b.push(d)}return b};
goog.array.rotate=function(a,b){goog.asserts.assert(null!=a.length);a.length&&(b%=a.length,0<b?goog.array.ARRAY_PROTOTYPE_.unshift.apply(a,a.splice(-b,b)):0>b&&goog.array.ARRAY_PROTOTYPE_.push.apply(a,a.splice(0,-b)));return a};goog.array.moveItem=function(a,b,c){goog.asserts.assert(0<=b&&b<a.length);goog.asserts.assert(0<=c&&c<a.length);b=goog.array.ARRAY_PROTOTYPE_.splice.call(a,b,1);goog.array.ARRAY_PROTOTYPE_.splice.call(a,c,0,b[0])};
goog.array.zip=function(a){if(!arguments.length)return[];for(var b=[],c=0;;c++){for(var d=[],e=0;e<arguments.length;e++){var f=arguments[e];if(c>=f.length)return b;d.push(f[c])}b.push(d)}};goog.array.shuffle=function(a,b){for(var c=b||Math.random,d=a.length-1;0<d;d--){var e=Math.floor(c()*(d+1)),f=a[d];a[d]=a[e];a[e]=f}};goog.events.ListenerMap=function(a){this.src=a;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var a=0,b;for(b in this.listeners)a+=this.listeners[b].length;return a};
goog.events.ListenerMap.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.listeners[f];a||(a=this.listeners[f]=[],this.typeCount_++);var g=goog.events.ListenerMap.findListenerIndex_(a,b,d,e);-1<g?(b=a[g],c||(b.callOnce=!1)):(b=new goog.events.Listener(b,null,this.src,f,!!d,e),b.callOnce=c,a.push(b));return b};
goog.events.ListenerMap.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.listeners))return!1;var e=this.listeners[a];b=goog.events.ListenerMap.findListenerIndex_(e,b,c,d);return-1<b?(e[b].markAsRemoved(),goog.array.removeAt(e,b),0==e.length&&(delete this.listeners[a],this.typeCount_--),!0):!1};
goog.events.ListenerMap.prototype.removeByKey=function(a){var b=a.type;if(!(b in this.listeners))return!1;var c=goog.array.remove(this.listeners[b],a);c&&(a.markAsRemoved(),0==this.listeners[b].length&&(delete this.listeners[b],this.typeCount_--));return c};goog.events.ListenerMap.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.listeners)if(!a||c==a){for(var d=this.listeners[c],e=0;e<d.length;e++)++b,d[e].markAsRemoved();delete this.listeners[c];this.typeCount_--}return b};
goog.events.ListenerMap.prototype.getListeners=function(a,b){var c=this.listeners[a.toString()],d=[];if(c)for(var e=0;e<c.length;++e){var f=c[e];f.capture==b&&d.push(f)}return d};goog.events.ListenerMap.prototype.getListener=function(a,b,c,d){a=this.listeners[a.toString()];var e=-1;a&&(e=goog.events.ListenerMap.findListenerIndex_(a,b,c,d));return-1<e?a[e]:null};
goog.events.ListenerMap.prototype.hasListener=function(a,b){var c=goog.isDef(a),d=c?a.toString():"",e=goog.isDef(b);return goog.object.some(this.listeners,function(a,g){for(var h=0;h<a.length;++h)if(!(c&&a[h].type!=d||e&&a[h].capture!=b))return!0;return!1})};goog.events.ListenerMap.findListenerIndex_=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.handler==d)return e}return-1};goog.labs={};goog.labs.userAgent={};goog.labs.userAgent.util={};goog.labs.userAgent.util.getNativeUserAgentString_=function(){var a=goog.labs.userAgent.util.getNavigator_();return a&&(a=a.userAgent)?a:""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(a){goog.labs.userAgent.util.userAgent_=a||goog.labs.userAgent.util.getNativeUserAgentString_()};
goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(a){var b=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(b,a)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(a){var b=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(b,a)};
goog.labs.userAgent.util.extractVersionTuples=function(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};goog.labs.userAgent.browser={};goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")};
goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!goog.labs.userAgent.util.matchUserAgent("Chrome")&&!goog.labs.userAgent.util.matchUserAgent("CriOS")&&!goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.browser.matchChrome_=function(){return goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS")};
goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!goog.labs.userAgent.util.matchUserAgent("Chrome")&&!goog.labs.userAgent.util.matchUserAgent("CriOS")};goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;
goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};
goog.labs.userAgent.browser.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(a);if(goog.labs.userAgent.browser.isOpera())return goog.labs.userAgent.browser.getOperaVersion_(a);a=goog.labs.userAgent.util.extractVersionTuples(a);return goog.labs.userAgent.browser.getVersionFromTuples_(a)};
goog.labs.userAgent.browser.isVersionOrHigher=function(a){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),a)};goog.labs.userAgent.browser.getIEVersion_=function(a){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])return b[1];var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];return b};
goog.labs.userAgent.browser.getOperaVersion_=function(a){a=goog.labs.userAgent.util.extractVersionTuples(a);var b=goog.array.peek(a);return"OPR"==b[0]&&b[1]?b[1]:goog.labs.userAgent.browser.getVersionFromTuples_(a)};goog.labs.userAgent.browser.getVersionFromTuples_=function(a){goog.asserts.assert(2<a.length,"Couldn't extract version tuple from user agent string");return a[2]&&a[2][1]?a[2][1]:""};goog.labs.userAgent.engine={};goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")};
goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()};goog.labs.userAgent.engine.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent();if(a){var a=goog.labs.userAgent.util.extractVersionTuples(a),b=a[1];if(b)return"Gecko"==b[0]?goog.labs.userAgent.engine.getVersionForKey_(a,"Firefox"):b[1];var a=a[0],c;if(a&&(c=a[2])&&(c=/Trident\/([^\s;]+)/.exec(c)))return c[1]}return""};
goog.labs.userAgent.engine.isVersionOrHigher=function(a){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),a)};goog.labs.userAgent.engine.getVersionForKey_=function(a,b){var c=goog.array.find(a,function(a){return b==a[0]});return c&&c[1]||""};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};
goog.userAgent.getNavigator=function(){return goog.global.navigator||null};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();
goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;
goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigator();return a&&a.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;
goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11");var a=goog.userAgent.getUserAgentString();goog.userAgent.detectedAndroid_=!!a&&
goog.string.contains(a,"Android");goog.userAgent.detectedIPhone_=!!a&&goog.string.contains(a,"iPhone");goog.userAgent.detectedIPad_=!!a&&goog.string.contains(a,"iPad")};goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_();goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;
goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.userAgent.detectedAndroid_;goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.userAgent.detectedIPhone_;
goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.userAgent.detectedIPad_;
goog.userAgent.determineVersion_=function(){var a="",b;if(goog.userAgent.OPERA&&goog.global.opera)return a=goog.global.opera.version,goog.isFunction(a)?a():a;goog.userAgent.GECKO?b=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(goog.userAgent.getUserAgentString()))?a[1]:"");return goog.userAgent.IE&&(b=goog.userAgent.getDocumentMode_(),b>parseFloat(a))?String(b):a};
goog.userAgent.getDocumentMode_=function(){var a=goog.global.document;return a?a.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(a,b){return goog.string.compareVersions(a,b)};goog.userAgent.isVersionOrHigherCache_={};
goog.userAgent.isVersionOrHigher=function(a){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[a]||(goog.userAgent.isVersionOrHigherCache_[a]=0<=goog.string.compareVersions(goog.userAgent.VERSION,a))};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(a){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=a};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;
goog.userAgent.DOCUMENT_MODE=function(){var a=goog.global.document;return a&&goog.userAgent.IE?goog.userAgent.getDocumentMode_()||("CSS1Compat"==a.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0}();goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||
goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(a){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=a;if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var b=goog.debug.entryPointRegistry.monitors_,c=0;c<b.length;c++)a(goog.bind(b[c].wrap,b[c]))};
goog.debug.entryPointRegistry.monitorAll=function(a){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var b=goog.bind(a.wrap,a),c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](b);goog.debug.entryPointRegistry.monitors_.push(a)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(a){var b=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(a==b[b.length-1],"Only the most recent monitor can be unwrapped.");a=goog.bind(a.unwrap,a);for(var c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](a);b.length--};goog.events.getVendorPrefixedName_=function(a){return goog.userAgent.WEBKIT?"webkit"+a:goog.userAgent.OPERA?"o"+a.toLowerCase():a.toLowerCase()};
goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",
INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",
RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),
TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",
MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",
EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",
DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified"};goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this)};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.INCLUDE_STACK_ON_CREATION=!0;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var a=[],b;for(b in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(b)&&a.push(goog.Disposable.instances_[Number(b)]);return a};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var a=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(a))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[a]}};
goog.Disposable.prototype.registerDisposable=function(a){this.addOnDisposeCallback(goog.partial(goog.dispose,a))};goog.Disposable.prototype.addOnDisposeCallback=function(a,b){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]);this.onDisposeCallbacks_.push(goog.isDef(b)?goog.bind(a,b):a)};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};
goog.Disposable.isDisposed=function(a){return a&&"function"==typeof a.isDisposed?a.isDisposed():!1};goog.dispose=function(a){a&&"function"==typeof a.dispose&&a.dispose()};goog.disposeAll=function(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];goog.isArrayLike(d)?goog.disposeAll.apply(null,d):goog.dispose(d)}};goog.events.Event=function(a,b){this.type=a instanceof goog.events.EventId?String(a):a;this.currentTarget=this.target=b;this.defaultPrevented=this.propagationStopped_=!1;this.returnValue_=!0};goog.events.Event.prototype.disposeInternal=function(){};goog.events.Event.prototype.dispose=function(){};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};
goog.events.Event.stopPropagation=function(a){a.stopPropagation()};goog.events.Event.preventDefault=function(a){a.preventDefault()};goog.reflect={};goog.reflect.object=function(a,b){return b};goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(a,b){try{return goog.reflect.sinkValue(a[b]),!0}catch(c){}return!1};goog.events.BrowserEvent=function(a,b){goog.events.Event.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.platformModifierKey=!1;this.event_=null;a&&this.init(a,b)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);
goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];
goog.events.BrowserEvent.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;d?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(d,"nodeName")||(d=null)):c==goog.events.EventType.MOUSEOVER?d=a.fromElement:c==goog.events.EventType.MOUSEOUT&&(d=a.toElement);this.relatedTarget=d;this.offsetX=goog.userAgent.WEBKIT||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=goog.userAgent.WEBKIT||void 0!==a.offsetY?a.offsetY:a.layerY;
this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.platformModifierKey=goog.userAgent.MAC?a.metaKey:a.ctrlKey;this.state=a.state;this.event_=a;a.defaultPrevented&&this.preventDefault()};
goog.events.BrowserEvent.prototype.isButton=function(a){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==a:"click"==this.type?a==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[a])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var a=this.event_;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.BrowserEvent.prototype.disposeInternal=function(){};goog.events.listeners_={};goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1E6*Math.random()|0);goog.events.onString_="on";goog.events.onStringMap_={};goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2};goog.events.CAPTURE_SIMULATION_MODE=2;goog.events.listenerCountEstimate_=0;
goog.events.listen=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listen(a,b[f],c,d,e);return null}c=goog.events.wrapListener(c);return goog.events.Listenable.isImplementedBy(a)?a.listen(b,c,d,e):goog.events.listen_(a,b,c,!1,d,e)};
goog.events.listen_=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e;if(g&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var h=goog.events.getListenerMap_(a);h||(a[goog.events.LISTENER_MAP_PROP_]=h=new goog.events.ListenerMap(a));
c=h.add(b,c,d,e,f);if(c.proxy)return c;d=goog.events.getProxy();c.proxy=d;d.src=a;d.listener=c;a.addEventListener?a.addEventListener(b.toString(),d,g):a.attachEvent(goog.events.getOnString_(b.toString()),d);goog.events.listenerCountEstimate_++;return c};goog.events.getProxy=function(){var a=goog.events.handleBrowserEvent_,b=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b};
goog.events.listenOnce=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listenOnce(a,b[f],c,d,e);return null}c=goog.events.wrapListener(c);return goog.events.Listenable.isImplementedBy(a)?a.listenOnce(b,c,d,e):goog.events.listen_(a,b,c,!0,d,e)};goog.events.listenWithWrapper=function(a,b,c,d,e){b.listen(a,c,d,e)};
goog.events.unlisten=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.unlisten(a,b[f],c,d,e);return null}c=goog.events.wrapListener(c);if(goog.events.Listenable.isImplementedBy(a))return a.unlisten(b,c,d,e);if(!a)return!1;d=!!d;if(a=goog.events.getListenerMap_(a))if(b=a.getListener(b,c,d,e))return goog.events.unlistenByKey(b);return!1};
goog.events.unlistenByKey=function(a){if(goog.isNumber(a)||!a||a.removed)return!1;var b=a.src;if(goog.events.Listenable.isImplementedBy(b))return b.unlistenByKey(a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(goog.events.getOnString_(c),d);goog.events.listenerCountEstimate_--;(c=goog.events.getListenerMap_(b))?(c.removeByKey(a),0==c.getTypeCount()&&(c.src=null,b[goog.events.LISTENER_MAP_PROP_]=null)):a.markAsRemoved();return!0};
goog.events.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e)};goog.events.removeAll=function(a,b){if(!a)return 0;if(goog.events.Listenable.isImplementedBy(a))return a.removeAllListeners(b);var c=goog.events.getListenerMap_(a);if(!c)return 0;var d=0,e=b&&b.toString(),f;for(f in c.listeners)if(!e||f==e)for(var g=c.listeners[f].concat(),h=0;h<g.length;++h)goog.events.unlistenByKey(g[h])&&++d;return d};
goog.events.removeAllNativeListeners=function(){return goog.events.listenerCountEstimate_=0};goog.events.getListeners=function(a,b,c){return goog.events.Listenable.isImplementedBy(a)?a.getListeners(b,c):a?(a=goog.events.getListenerMap_(a))?a.getListeners(b,c):[]:[]};goog.events.getListener=function(a,b,c,d,e){c=goog.events.wrapListener(c);d=!!d;return goog.events.Listenable.isImplementedBy(a)?a.getListener(b,c,d,e):a?(a=goog.events.getListenerMap_(a))?a.getListener(b,c,d,e):null:null};
goog.events.hasListener=function(a,b,c){if(goog.events.Listenable.isImplementedBy(a))return a.hasListener(b,c);a=goog.events.getListenerMap_(a);return!!a&&a.hasListener(b,c)};goog.events.expose=function(a){var b=[],c;for(c in a)a[c]&&a[c].id?b.push(c+" = "+a[c]+" ("+a[c].id+")"):b.push(c+" = "+a[c]);return b.join("\n")};goog.events.getOnString_=function(a){return a in goog.events.onStringMap_?goog.events.onStringMap_[a]:goog.events.onStringMap_[a]=goog.events.onString_+a};
goog.events.fireListeners=function(a,b,c,d){return goog.events.Listenable.isImplementedBy(a)?a.fireListeners(b,c,d):goog.events.fireListeners_(a,b,c,d)};goog.events.fireListeners_=function(a,b,c,d){var e=1;if(a=goog.events.getListenerMap_(a))if(b=a.listeners[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.removed&&(e&=!1!==goog.events.fireListener(f,d))}return Boolean(e)};
goog.events.fireListener=function(a,b){var c=a.listener,d=a.handler||a.src;a.callOnce&&goog.events.unlistenByKey(a);return c.call(d,b)};goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_};goog.events.dispatchEvent=function(a,b){goog.asserts.assert(goog.events.Listenable.isImplementedBy(a),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return a.dispatchEvent(b)};
goog.events.protectBrowserEventEntryPoint=function(a){goog.events.handleBrowserEvent_=a.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(a,b){if(a.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var c=b||goog.getObjectByName("window.event"),d=new goog.events.BrowserEvent(c,this),e=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(c)){goog.events.markIeEvent_(c);for(var c=[],f=d.currentTarget;f;f=f.parentNode)c.push(f);for(var f=a.type,g=c.length-1;!d.propagationStopped_&&0<=g;g--)d.currentTarget=c[g],e&=goog.events.fireListeners_(c[g],
f,!0,d);for(g=0;!d.propagationStopped_&&g<c.length;g++)d.currentTarget=c[g],e&=goog.events.fireListeners_(c[g],f,!1,d)}}else e=goog.events.fireListener(a,d);return e}return goog.events.fireListener(a,new goog.events.BrowserEvent(b,this))};goog.events.markIeEvent_=function(a){var b=!1;if(0==a.keyCode)try{a.keyCode=-1;return}catch(c){b=!0}if(b||void 0==a.returnValue)a.returnValue=!0};goog.events.isMarkedIeEvent_=function(a){return 0>a.keyCode||void 0!=a.returnValue};goog.events.uniqueIdCounter_=0;
goog.events.getUniqueId=function(a){return a+"_"+goog.events.uniqueIdCounter_++};goog.events.getListenerMap_=function(a){a=a[goog.events.LISTENER_MAP_PROP_];return a instanceof goog.events.ListenerMap?a:null};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1E9*Math.random()>>>0);
goog.events.wrapListener=function(a){goog.asserts.assert(a,"Listener can not be null.");if(goog.isFunction(a))return a;goog.asserts.assert(a.handleEvent,"An object listener must have handleEvent method.");return a[goog.events.LISTENER_WRAPPER_PROP_]||(a[goog.events.LISTENER_WRAPPER_PROP_]=function(b){return a.handleEvent(b)})};goog.debug.entryPointRegistry.register(function(a){goog.events.handleBrowserEvent_=a(goog.events.handleBrowserEvent_)});goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this;this.parentEventTarget_=null};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1E3;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};
goog.events.EventTarget.prototype.setParentEventTarget=function(a){this.parentEventTarget_=a};goog.events.EventTarget.prototype.addEventListener=function(a,b,c,d){goog.events.listen(this,a,b,c,d)};goog.events.EventTarget.prototype.removeEventListener=function(a,b,c,d){goog.events.unlisten(this,a,b,c,d)};
goog.events.EventTarget.prototype.dispatchEvent=function(a){this.assertInitialized_();var b,c=this.getParentEventTarget();if(c){b=[];for(var d=1;c;c=c.getParentEventTarget())b.push(c),goog.asserts.assert(++d<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,a,b)};
goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(a,b,c,d){this.assertInitialized_();return this.eventTargetListeners_.add(String(a),b,!1,c,d)};goog.events.EventTarget.prototype.listenOnce=function(a,b,c,d){return this.eventTargetListeners_.add(String(a),b,!0,c,d)};
goog.events.EventTarget.prototype.unlisten=function(a,b,c,d){return this.eventTargetListeners_.remove(String(a),b,c,d)};goog.events.EventTarget.prototype.unlistenByKey=function(a){return this.eventTargetListeners_.removeByKey(a)};goog.events.EventTarget.prototype.removeAllListeners=function(a){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(a):0};
goog.events.EventTarget.prototype.fireListeners=function(a,b,c){a=this.eventTargetListeners_.listeners[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.removed&&f.capture==b){var g=f.listener,h=f.handler||f.src;f.callOnce&&this.unlistenByKey(f);d=!1!==g.call(h,c)&&d}}return d&&!1!=c.returnValue_};goog.events.EventTarget.prototype.getListeners=function(a,b){return this.eventTargetListeners_.getListeners(String(a),b)};
goog.events.EventTarget.prototype.getListener=function(a,b,c,d){return this.eventTargetListeners_.getListener(String(a),b,c,d)};goog.events.EventTarget.prototype.hasListener=function(a,b){var c=goog.isDef(a)?String(a):void 0;return this.eventTargetListeners_.hasListener(c,b)};goog.events.EventTarget.prototype.setTargetForTesting=function(a){this.actualEventTarget_=a};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};
goog.events.EventTarget.dispatchEventInternal_=function(a,b,c){var d=b.type||b;if(goog.isString(b))b=new goog.events.Event(b,a);else if(b instanceof goog.events.Event)b.target=b.target||a;else{var e=b;b=new goog.events.Event(d,a);goog.object.extend(b,e)}var e=!0,f;if(c)for(var g=c.length-1;!b.propagationStopped_&&0<=g;g--)f=b.currentTarget=c[g],e=f.fireListeners(d,!0,b)&&e;b.propagationStopped_||(f=b.currentTarget=a,e=f.fireListeners(d,!0,b)&&e,b.propagationStopped_||(e=f.fireListeners(d,!1,b)&&e));
if(c)for(g=0;!b.propagationStopped_&&g<c.length;g++)f=b.currentTarget=c[g],e=f.fireListeners(d,!1,b)&&e;return e};X.base=function(){goog.events.EventTarget.call(this);this._classname="base";this._id=window["X.counter"].uniqueId();this._dirty=!1};goog.inherits(X.base,goog.events.EventTarget);X.base.prototype.__defineGetter__("classname",function(){return this._classname});X.base.prototype.__defineGetter__("id",function(){return this._id});goog.exportSymbol("X.base",X.base);X.triplets=function(a,b){X.base.call(this);this._classname="triplets";this._minA=Infinity;this._maxA=-Infinity;this._minB=Infinity;this._maxB=-Infinity;this._minC=Infinity;this._maxC=-Infinity;this._centroid=[0,0,0];this._fresh=!0;this._dataPointer=0;this._triplets=new Float32Array(a);goog.isDefAndNotNull(b)&&(this._triplets=b._triplets.subarray(0,b._triplets.length),this._dataPointer=this._triplets.length,this._minA=b._minA,this._maxA=b._maxA,this._minB=b._minB,this._maxB=b._maxB,this._minC=b._minC,
this._maxC=b._maxC,this._centroid=b._centroid.slice(),this._fresh=!1)};goog.inherits(X.triplets,X.base);
X.triplets.prototype.add=function(a,b,c){this._minA=Math.min(this._minA,a);this._maxA=Math.max(this._maxA,a);this._minB=Math.min(this._minB,b);this._maxB=Math.max(this._maxB,b);this._minC=Math.min(this._minC,c);this._maxC=Math.max(this._maxC,c);this._centroid=[(this._minA+this._maxA)/2,(this._minB+this._maxB)/2,(this._minC+this._maxC)/2];this._fresh=!1;this._dirty=!0;this._triplets[this._dataPointer++]=a;this._triplets[this._dataPointer++]=b;this._triplets[this._dataPointer++]=c;return this._dataPointer/
3};X.triplets.prototype.resize=function(){if(this._dataPointer!=this._triplets.length){var a=new Float32Array(this._dataPointer);a.set(this._triplets.subarray(0,this._dataPointer));this._triplets=a}};X.triplets.prototype.get=function(a){a*=3;return[this._triplets[a],this._triplets[a+1],this._triplets[a+2]]};X.triplets.prototype.remove=function(a){throw Error("Not implemented.");};X.triplets.prototype.clear=function(){this._triplets=new Float32Array(this._triplets.length);this._dirty=!0};
X.triplets.prototype.__defineGetter__("count",function(){this.resize();return this._triplets.length/3});X.triplets.prototype.__defineGetter__("length",function(){this.resize();return this._triplets.length});goog.exportSymbol("X.triplets",X.triplets);goog.exportSymbol("X.triplets.prototype.add",X.triplets.prototype.add);goog.exportSymbol("X.triplets.prototype.resize",X.triplets.prototype.resize);goog.exportSymbol("X.triplets.prototype.get",X.triplets.prototype.get);
goog.exportSymbol("X.triplets.prototype.remove",X.triplets.prototype.remove);goog.exportSymbol("X.triplets.prototype.clear",X.triplets.prototype.clear);X.indexer=function(){X.base.call(this);this._classname="indexer";this._unique=[];this._indices=[];this._map={}};goog.inherits(X.indexer,X.base);X.indexer.prototype.add=function(a){if(!goog.isDefAndNotNull(a))throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this._map||(this._map[b]=this._unique.length,this._unique.push(a));return this._map[b]};X.indexer.prototype.unique=function(){return this._unique};X.file=function(a){X.base.call(this);this._classname="file";this._path=a;this._dirty=!0};goog.inherits(X.file,X.base);X.loadable=function(){this._filedata=this._file=null};X.loadable.prototype.__defineSetter__("file",function(a){if(!goog.isDefAndNotNull(a)||goog.isArray(a)&&0==a.length)this._file=null;else{if(goog.isArray(a)){if(1==a.length){this._file=new X.file(a[0]);return}this._file=goog.array.map(a,function(a){var c=new X.volume;c._file=new X.file(a);return c})}else this._file=new X.file(a);this._filedata=null}});
X.loadable.prototype.__defineGetter__("file",function(){return this._file?goog.isArray(this._file)?this._file.map(function(a){return a._file._path}):this._file._path:""});X.loadable.prototype.__defineGetter__("filedata",function(){return goog.isArray(this._file)?this._file.map(function(a){return a._filedata}):this._filedata});
X.loadable.prototype.__defineSetter__("filedata",function(a){if(!goog.isDefAndNotNull(a)||goog.isArray(a)&&0==a.length)this._filedata=null;if(goog.isArray(a))if(1==a.length)this._filedata=a[0];else{var b=this._file.length,c;for(c=0;c<b;c++)this._file[c]._filedata=a[c]}else this._filedata=a});goog.functions={};goog.functions.constant=function(a){return function(){return a}};goog.functions.FALSE=goog.functions.constant(!1);goog.functions.TRUE=goog.functions.constant(!0);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(a,b){return a};goog.functions.error=function(a){return function(){throw Error(a);}};goog.functions.fail=function(a){return function(){throw a;}};
goog.functions.lock=function(a,b){b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}};goog.functions.nth=function(a){return function(){return arguments[a]}};goog.functions.withReturnValue=function(a,b){return goog.functions.sequence(a,goog.functions.constant(b))};goog.functions.compose=function(a,b){var c=arguments,d=c.length;return function(){var a;d&&(a=c[d-1].apply(this,arguments));for(var b=d-2;0<=b;b--)a=c[b].call(this,a);return a}};
goog.functions.sequence=function(a){var b=arguments,c=b.length;return function(){for(var a,e=0;e<c;e++)a=b[e].apply(this,arguments);return a}};goog.functions.and=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};goog.functions.or=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(b[a].apply(this,arguments))return!0;return!1}};
goog.functions.not=function(a){return function(){return!a.apply(this,arguments)}};goog.functions.create=function(a,b){var c=function(){};c.prototype=a.prototype;c=new c;a.apply(c,Array.prototype.slice.call(arguments,1));return c};goog.functions.CACHE_RETURN_VALUE=!0;goog.functions.cacheReturnValue=function(a){var b=!1,c;return function(){if(!goog.functions.CACHE_RETURN_VALUE)return a();b||(c=a(),b=!0);return c}};goog.math={};goog.math.randomInt=function(a){return Math.floor(Math.random()*a)};goog.math.uniformRandom=function(a,b){return a+Math.random()*(b-a)};goog.math.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};goog.math.modulo=function(a,b){var c=a%b;return 0>c*b?c+b:c};goog.math.lerp=function(a,b,c){return a+c*(b-a)};goog.math.nearlyEquals=function(a,b,c){return Math.abs(a-b)<=(c||1E-6)};goog.math.standardAngle=function(a){return goog.math.modulo(a,360)};
goog.math.standardAngleInRadians=function(a){return goog.math.modulo(a,2*Math.PI)};goog.math.toRadians=function(a){return a*Math.PI/180};goog.math.toDegrees=function(a){return 180*a/Math.PI};goog.math.angleDx=function(a,b){return b*Math.cos(goog.math.toRadians(a))};goog.math.angleDy=function(a,b){return b*Math.sin(goog.math.toRadians(a))};goog.math.angle=function(a,b,c,d){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(d-b,c-a)))};
goog.math.angleDifference=function(a,b){var c=goog.math.standardAngle(b)-goog.math.standardAngle(a);180<c?c-=360:-180>=c&&(c=360+c);return c};goog.math.sign=function(a){return 0==a?0:0>a?-1:1};
goog.math.longestCommonSubsequence=function(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b,c){return a[b]};for(var e=a.length,f=b.length,g=[],h=0;h<e+1;h++)g[h]=[],g[h][0]=0;for(var k=0;k<f+1;k++)g[0][k]=0;for(h=1;h<=e;h++)for(k=1;k<=f;k++)c(a[h-1],b[k-1])?g[h][k]=g[h-1][k-1]+1:g[h][k]=Math.max(g[h-1][k],g[h][k-1]);for(var l=[],h=e,k=f;0<h&&0<k;)c(a[h-1],b[k-1])?(l.unshift(d(h-1,k-1)),h--,k--):g[h-1][k]>g[h][k-1]?h--:k--;return l};
goog.math.sum=function(a){return goog.array.reduce(arguments,function(a,c){return a+c},0)};goog.math.average=function(a){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.sampleVariance=function(a){var b=arguments.length;if(2>b)return 0;var c=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)};goog.math.standardDeviation=function(a){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))};
goog.math.isInt=function(a){return isFinite(a)&&0==a%1};goog.math.isFiniteNumber=function(a){return isFinite(a)&&!isNaN(a)};goog.math.log10Floor=function(a){if(0<a){var b=Math.round(Math.log(a)*Math.LOG10E);return b-(parseFloat("1e"+b)>a)}return 0==a?-Infinity:NaN};goog.math.safeFloor=function(a,b){goog.asserts.assert(!goog.isDef(b)||0<b);return Math.floor(a+(b||2E-15))};goog.math.safeCeil=function(a,b){goog.asserts.assert(!goog.isDef(b)||0<b);return Math.ceil(a-(b||2E-15))};goog.iter={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:Error("StopIteration");goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.__iterator__=function(a){return this};
goog.iter.toIterator=function(a){if(a instanceof goog.iter.Iterator)return a;if("function"==typeof a.__iterator__)return a.__iterator__(!1);if(goog.isArrayLike(a)){var b=0,c=new goog.iter.Iterator;c.next=function(){for(;;){if(b>=a.length)throw goog.iter.StopIteration;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");};
goog.iter.forEach=function(a,b,c){if(goog.isArrayLike(a))try{goog.array.forEach(a,b,c)}catch(d){if(d!==goog.iter.StopIteration)throw d;}else{a=goog.iter.toIterator(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(e){if(e!==goog.iter.StopIteration)throw e;}}};goog.iter.filter=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){for(;;){var a=d.next();if(b.call(c,a,void 0,d))return a}};return a};
goog.iter.filterFalse=function(a,b,c){return goog.iter.filter(a,goog.functions.not(b),c)};goog.iter.range=function(a,b,c){var d=0,e=a,f=c||1;1<arguments.length&&(d=a,e=b);if(0==f)throw Error("Range step argument must not be zero");var g=new goog.iter.Iterator;g.next=function(){if(0<f&&d>=e||0>f&&d<=e)throw goog.iter.StopIteration;var a=d;d+=f;return a};return g};goog.iter.join=function(a,b){return goog.iter.toArray(a).join(b)};
goog.iter.map=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){var a=d.next();return b.call(c,a,void 0,d)};return a};goog.iter.reduce=function(a,b,c,d){var e=c;goog.iter.forEach(a,function(a){e=b.call(d,e,a)});return e};goog.iter.some=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(b.call(c,a.next(),void 0,a))return!0}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!1};
goog.iter.every=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(!b.call(c,a.next(),void 0,a))return!1}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!0};goog.iter.chain=function(a){var b=goog.iter.toIterator(arguments),c=new goog.iter.Iterator,d=null;c.next=function(){for(;;){if(null==d){var a=b.next();d=goog.iter.toIterator(a)}try{return d.next()}catch(c){if(c!==goog.iter.StopIteration)throw c;d=null}}};return c};
goog.iter.chainFromIterable=function(a){return goog.iter.chain.apply(void 0,a)};goog.iter.dropWhile=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;var e=!0;a.next=function(){for(;;){var a=d.next();if(!e||!b.call(c,a,void 0,d))return e=!1,a}};return a};goog.iter.takeWhile=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;var e=!0;a.next=function(){for(;;)if(e){var a=d.next();if(b.call(c,a,void 0,d))return a;e=!1}else throw goog.iter.StopIteration;};return a};
goog.iter.toArray=function(a){if(goog.isArrayLike(a))return goog.array.toArray(a);a=goog.iter.toIterator(a);var b=[];goog.iter.forEach(a,function(a){b.push(a)});return b};goog.iter.equals=function(a,b){var c=goog.iter.zipLongest({},a,b);return goog.iter.every(c,function(a){return a[0]==a[1]})};goog.iter.nextOrValue=function(a,b){try{return goog.iter.toIterator(a).next()}catch(c){if(c!=goog.iter.StopIteration)throw c;return b}};
goog.iter.product=function(a){if(goog.array.some(arguments,function(a){return!a.length})||!arguments.length)return new goog.iter.Iterator;var b=new goog.iter.Iterator,c=arguments,d=goog.array.repeat(0,c.length);b.next=function(){if(d){for(var a=goog.array.map(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){goog.asserts.assert(d);if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw goog.iter.StopIteration;};return b};
goog.iter.cycle=function(a){var b=goog.iter.toIterator(a),c=[],d=0;a=new goog.iter.Iterator;var e=!1;a.next=function(){var a=null;if(!e)try{return a=b.next(),c.push(a),a}catch(g){if(g!=goog.iter.StopIteration||goog.array.isEmpty(c))throw g;e=!0}a=c[d];d=(d+1)%c.length;return a};return a};goog.iter.count=function(a,b){var c=a||0,d=goog.isDef(b)?b:1,e=new goog.iter.Iterator;e.next=function(){var a=c;c+=d;return a};return e};
goog.iter.repeat=function(a){var b=new goog.iter.Iterator;b.next=goog.functions.constant(a);return b};goog.iter.accumulate=function(a){var b=goog.iter.toIterator(a),c=0;a=new goog.iter.Iterator;a.next=function(){return c+=b.next()};return a};goog.iter.zip=function(a){var b=arguments,c=new goog.iter.Iterator;if(0<b.length){var d=goog.array.map(b,goog.iter.toIterator);c.next=function(){return goog.array.map(d,function(a){return a.next()})}}return c};
goog.iter.zipLongest=function(a,b){var c=goog.array.slice(arguments,1),d=new goog.iter.Iterator;if(0<c.length){var e=goog.array.map(c,goog.iter.toIterator);d.next=function(){var b=!1,c=goog.array.map(e,function(c){var d;try{d=c.next(),b=!0}catch(e){if(e!==goog.iter.StopIteration)throw e;d=a}return d});if(!b)throw goog.iter.StopIteration;return c}}return d};goog.iter.compress=function(a,b){var c=goog.iter.toIterator(b);return goog.iter.filter(a,function(){return!!c.next()})};
goog.iter.GroupByIterator_=function(a,b){this.iterator=goog.iter.toIterator(a);this.keyFunc=b||goog.functions.identity};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);goog.iter.GroupByIterator_.prototype.next=function(){for(;this.currentKey==this.targetKey;)this.currentValue=this.iterator.next(),this.currentKey=this.keyFunc(this.currentValue);this.targetKey=this.currentKey;return[this.currentKey,this.groupItems_(this.targetKey)]};
goog.iter.GroupByIterator_.prototype.groupItems_=function(a){for(var b=[];this.currentKey==a;){b.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(c){if(c!==goog.iter.StopIteration)throw c;break}this.currentKey=this.keyFunc(this.currentValue)}return b};goog.iter.groupBy=function(a,b){return new goog.iter.GroupByIterator_(a,b)};
goog.iter.starMap=function(a,b,c){var d=goog.iter.toIterator(a);a=new goog.iter.Iterator;a.next=function(){var a=goog.iter.toArray(d.next());return b.apply(c,goog.array.concat(a,void 0,d))};return a};
goog.iter.tee=function(a,b){var c=goog.iter.toIterator(a),d=goog.isNumber(b)?b:2,e=goog.array.map(goog.array.range(d),function(){return[]}),f=function(){var a=c.next();goog.array.forEach(e,function(b){b.push(a)})};return goog.array.map(e,function(a){var b=new goog.iter.Iterator;b.next=function(){goog.array.isEmpty(a)&&f();goog.asserts.assert(!goog.array.isEmpty(a));return a.shift()};return b})};goog.iter.enumerate=function(a,b){return goog.iter.zip(goog.iter.count(b),a)};
goog.iter.limit=function(a,b){goog.asserts.assert(goog.math.isInt(b)&&0<=b);var c=goog.iter.toIterator(a),d=new goog.iter.Iterator,e=b;d.next=function(){if(0<e--)return c.next();throw goog.iter.StopIteration;};return d};goog.iter.consume=function(a,b){goog.asserts.assert(goog.math.isInt(b)&&0<=b);for(var c=goog.iter.toIterator(a);0<b--;)goog.iter.nextOrValue(c,null);return c};
goog.iter.slice=function(a,b,c){goog.asserts.assert(goog.math.isInt(b)&&0<=b);a=goog.iter.consume(a,b);goog.isNumber(c)&&(goog.asserts.assert(goog.math.isInt(c)&&c>=b),a=goog.iter.limit(a,c-b));return a};goog.iter.hasDuplicates_=function(a){var b=[];goog.array.removeDuplicates(a,b);return a.length!=b.length};goog.iter.permutations=function(a,b){var c=goog.iter.toArray(a),d=goog.isNumber(b)?b:c.length,c=goog.array.repeat(c,d),c=goog.iter.product.apply(void 0,c);return goog.iter.filter(c,function(a){return!goog.iter.hasDuplicates_(a)})};
goog.iter.combinations=function(a,b){function c(a){return d[a]}var d=goog.iter.toArray(a),e=goog.iter.range(d.length),e=goog.iter.permutations(e,b),f=goog.iter.filter(e,function(a){return goog.array.isSorted(a)}),e=new goog.iter.Iterator;e.next=function(){return goog.array.map(f.next(),c)};return e};
goog.iter.combinationsWithReplacement=function(a,b){function c(a){return d[a]}var d=goog.iter.toArray(a),e=goog.array.range(d.length),e=goog.array.repeat(e,b),e=goog.iter.product.apply(void 0,e),f=goog.iter.filter(e,function(a){return goog.array.isSorted(a)}),e=new goog.iter.Iterator;e.next=function(){return goog.array.map(f.next(),c)};return e};goog.structs={};goog.structs.Map=function(a,b){this.map_={};this.keys_=[];this.version_=this.count_=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var a=[],b=0;b<this.keys_.length;b++)a.push(this.map_[this.keys_[b]]);return a};
goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(a){return goog.structs.Map.hasKey_(this.map_,a)};goog.structs.Map.prototype.containsValue=function(a){for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];if(goog.structs.Map.hasKey_(this.map_,c)&&this.map_[c]==a)return!0}return!1};
goog.structs.Map.prototype.equals=function(a,b){if(this===a)return!0;if(this.count_!=a.getCount())return!1;var c=b||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var d,e=0;d=this.keys_[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};goog.structs.Map.defaultEquals=function(a,b){return a===b};goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};
goog.structs.Map.prototype.remove=function(a){return goog.structs.Map.hasKey_(this.map_,a)?(delete this.map_[a],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};
goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];goog.structs.Map.hasKey_(this.map_,c)&&(this.keys_[b++]=c);a++}this.keys_.length=b}if(this.count_!=this.keys_.length){for(var d={},b=a=0;a<this.keys_.length;)c=this.keys_[a],goog.structs.Map.hasKey_(d,c)||(this.keys_[b++]=c,d[c]=1),a++;this.keys_.length=b}};
goog.structs.Map.prototype.get=function(a,b){return goog.structs.Map.hasKey_(this.map_,a)?this.map_[a]:b};goog.structs.Map.prototype.set=function(a,b){goog.structs.Map.hasKey_(this.map_,a)||(this.count_++,this.keys_.push(a),this.version_++);this.map_[a]=b};goog.structs.Map.prototype.addAll=function(a){var b;a instanceof goog.structs.Map?(b=a.getKeys(),a=a.getValues()):(b=goog.object.getKeys(a),a=goog.object.getValues(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};
goog.structs.Map.prototype.forEach=function(a,b){for(var c=this.getKeys(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var a=new goog.structs.Map,b=0;b<this.keys_.length;b++){var c=this.keys_[b];a.set(this.map_[c],c)}return a};
goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var a={},b=0;b<this.keys_.length;b++){var c=this.keys_[b];a[c]=this.map_[c]}return a};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};
goog.structs.Map.prototype.__iterator__=function(a){this.cleanupKeysArray_();var b=0,c=this.keys_,d=this.map_,e=this.version_,f=this,g=new goog.iter.Iterator;g.next=function(){for(;;){if(e!=f.version_)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw goog.iter.StopIteration;var g=c[b++];return a?g:d[g]}};return g};goog.structs.Map.hasKey_=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};X.colortable=function(){X.base.call(this);this._classname="colortable";this._map=new goog.structs.Map;inject(this,new X.loadable)};goog.inherits(X.colortable,X.base);X.colortable.prototype.add=function(a,b,c,d,e,f){if(!(goog.isNumber(a)&&goog.isNumber(c)&&goog.isNumber(d)&&goog.isNumber(e)&&goog.isNumber(f)))throw Error("Invalid color table entry.");this._map.set(a,[b,c,d,e,f]);this._dirty=!0};X.colortable.prototype.get=function(a){return this._map.get(a)};
goog.exportSymbol("X.colortable.prototype.get",X.colortable.prototype.get);goog.math.Coordinate3=function(a,b,c){this.x=goog.isDef(a)?a:0;this.y=goog.isDef(b)?b:0;this.z=goog.isDef(c)?c:0};goog.math.Coordinate3.prototype.clone=function(){return new goog.math.Coordinate3(this.x,this.y,this.z)};goog.DEBUG&&(goog.math.Coordinate3.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"});goog.math.Coordinate3.equals=function(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y&&a.z==b.z:!1};
goog.math.Coordinate3.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)};goog.math.Coordinate3.squaredDistance=function(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e};goog.math.Coordinate3.difference=function(a,b){return new goog.math.Coordinate3(a.x-b.x,a.y-b.y,a.z-b.z)};goog.math.Coordinate3.prototype.toArray=function(){return[this.x,this.y,this.z]};
goog.math.Coordinate3.fromArray=function(a){if(3>=a.length)return new goog.math.Coordinate3(a[0],a[1],a[2]);throw Error("Conversion from an array requires an array of length 3");};goog.math.Vec3=function(a,b,c){this.x=a;this.y=b;this.z=c};goog.inherits(goog.math.Vec3,goog.math.Coordinate3);goog.math.Vec3.randomUnit=function(){var a=Math.random()*Math.PI*2,b=Math.random()*Math.PI*2,b=Math.cos(b),c=Math.sqrt(1-b*b)*Math.cos(a),a=Math.sqrt(1-b*b)*Math.sin(a);return new goog.math.Vec3(c,a,b)};goog.math.Vec3.random=function(){return goog.math.Vec3.randomUnit().scale(Math.random())};goog.math.Vec3.fromCoordinate3=function(a){return new goog.math.Vec3(a.x,a.y,a.z)};
goog.math.Vec3.prototype.clone=function(){return new goog.math.Vec3(this.x,this.y,this.z)};goog.math.Vec3.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};goog.math.Vec3.prototype.squaredMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z};goog.math.Vec3.prototype.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};goog.math.Vec3.prototype.invert=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};
goog.math.Vec3.prototype.normalize=function(){return this.scale(1/this.magnitude())};goog.math.Vec3.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};goog.math.Vec3.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};goog.math.Vec3.prototype.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};goog.math.Vec3.distance=goog.math.Coordinate3.distance;goog.math.Vec3.squaredDistance=goog.math.Coordinate3.squaredDistance;
goog.math.Vec3.equals=goog.math.Coordinate3.equals;goog.math.Vec3.sum=function(a,b){return new goog.math.Vec3(a.x+b.x,a.y+b.y,a.z+b.z)};goog.math.Vec3.difference=function(a,b){return new goog.math.Vec3(a.x-b.x,a.y-b.y,a.z-b.z)};goog.math.Vec3.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};goog.math.Vec3.cross=function(a,b){return new goog.math.Vec3(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};
goog.math.Vec3.lerp=function(a,b,c){return new goog.math.Vec3(goog.math.lerp(a.x,b.x,c),goog.math.lerp(a.y,b.y,c),goog.math.lerp(a.z,b.z,c))};X.vector=goog.math.Vec3;X.vector.prototype.clone=goog.math.Vec3.prototype.clone;X.vector.prototype.magnitude=goog.math.Vec3.prototype.magnitude;X.vector.prototype.scale=goog.math.Vec3.prototype.scale;X.vector.prototype.invert=goog.math.Vec3.prototype.invert;X.vector.prototype.add=goog.math.Vec3.prototype.add;X.vector.prototype.subtract=goog.math.Vec3.prototype.subtract;X.vector.prototype.normalize=function(){var a=this.magnitude();return 0==a?this.scale(0):this.scale(1/a)};X.vector.dot=goog.math.Vec3.dot;
X.vector.cross=goog.math.Vec3.cross;X.vector.distance=goog.math.Vec3.distance;X.vector.lerp=goog.math.Vec3.lerp;X.vector.prototype.__defineGetter__("xx",function(){return this.x});X.vector.prototype.__defineGetter__("yy",function(){return this.y});X.vector.prototype.__defineGetter__("zz",function(){return this.z});goog.exportSymbol("X.vector",X.vector);goog.exportSymbol("X.vector.prototype.clone",X.vector.prototype.clone);goog.exportSymbol("X.vector.prototype.magnitude",X.vector.prototype.magnitude);
goog.exportSymbol("X.vector.prototype.scale",X.vector.prototype.scale);goog.exportSymbol("X.vector.prototype.invert",X.vector.prototype.invert);goog.exportSymbol("X.vector.prototype.normalize",X.vector.prototype.normalize);goog.exportSymbol("X.vector.prototype.add",X.vector.prototype.add);goog.exportSymbol("X.vector.prototype.subtract",X.vector.prototype.subtract);goog.exportSymbol("X.vector.dot",X.vector.dot);goog.exportSymbol("X.vector.cross",X.vector.cross);
goog.exportSymbol("X.vector.distance",X.vector.distance);goog.exportSymbol("X.vector.lerp",X.vector.lerp);goog.vec={};goog.vec.Float64Array=function(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0};goog.vec.Float64Array.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};goog.vec.Float64Array.prototype.toString=Array.prototype.join;
if("undefined"==typeof Float64Array){try{goog.exportProperty(goog.vec.Float64Array,"BYTES_PER_ELEMENT",goog.vec.Float64Array.BYTES_PER_ELEMENT)}catch(float64ArrayError){}goog.exportProperty(goog.vec.Float64Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float64Array.prototype,"set",goog.vec.Float64Array.prototype.set);goog.exportProperty(goog.vec.Float64Array.prototype,"toString",goog.vec.Float64Array.prototype.toString);goog.exportSymbol("Float64Array",
goog.vec.Float64Array)};goog.vec.Float32Array=function(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0};goog.vec.Float32Array.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};goog.vec.Float32Array.prototype.toString=Array.prototype.join;
"undefined"==typeof Float32Array&&(goog.exportProperty(goog.vec.Float32Array,"BYTES_PER_ELEMENT",goog.vec.Float32Array.BYTES_PER_ELEMENT),goog.exportProperty(goog.vec.Float32Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT),goog.exportProperty(goog.vec.Float32Array.prototype,"set",goog.vec.Float32Array.prototype.set),goog.exportProperty(goog.vec.Float32Array.prototype,"toString",goog.vec.Float32Array.prototype.toString),goog.exportSymbol("Float32Array",goog.vec.Float32Array));goog.vec.EPSILON=1E-6;goog.vec.Vec3={};goog.vec.Vec3.createFloat32=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat64=function(){return new Float64Array(3)};goog.vec.Vec3.createNumber=function(){var a=Array(3);goog.vec.Vec3.setFromValues(a,0,0,0);return a};goog.vec.Vec3.create=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat32FromArray=function(a){var b=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromArray(b,a);return b};
goog.vec.Vec3.createFloat32FromValues=function(a,b,c){var d=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromValues(d,a,b,c);return d};goog.vec.Vec3.cloneFloat32=goog.vec.Vec3.createFloat32FromArray;goog.vec.Vec3.createFloat64FromArray=function(a){var b=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromArray(b,a);return b};goog.vec.Vec3.createFloat64FromValues=function(a,b,c){var d=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromValues(d,a,b,c);return d};goog.vec.Vec3.cloneFloat64=goog.vec.Vec3.createFloat64FromArray;
goog.vec.Vec3.createFromArray=function(a){var b=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(b,a);return b};goog.vec.Vec3.createFromValues=function(a,b,c){var d=goog.vec.Vec3.create();goog.vec.Vec3.setFromValues(d,a,b,c);return d};goog.vec.Vec3.clone=function(a){var b=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(b,a);return b};goog.vec.Vec3.setFromValues=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};goog.vec.Vec3.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};
goog.vec.Vec3.add=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};goog.vec.Vec3.subtract=function(a,b,c){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};goog.vec.Vec3.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};goog.vec.Vec3.abs=function(a,b){b[0]=Math.abs(a[0]);b[1]=Math.abs(a[1]);b[2]=Math.abs(a[2]);return b};goog.vec.Vec3.scale=function(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};
goog.vec.Vec3.magnitudeSquared=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};goog.vec.Vec3.magnitude=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};goog.vec.Vec3.normalize=function(a,b){var c=1/goog.vec.Vec3.magnitude(a);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;return b};goog.vec.Vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};goog.vec.Vec3.cross=function(a,b,c){var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];c[0]=e*b-a*g;c[1]=a*f-d*b;c[2]=d*g-e*f;return c};
goog.vec.Vec3.distanceSquared=function(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e};goog.vec.Vec3.distance=function(a,b){return Math.sqrt(goog.vec.Vec3.distanceSquared(a,b))};goog.vec.Vec3.direction=function(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b):c[0]=c[1]=c[2]=0;return c};goog.vec.Vec3.lerp=function(a,b,c,d){var e=a[0],f=a[1];a=a[2];d[0]=(b[0]-e)*c+e;d[1]=(b[1]-f)*c+f;d[2]=(b[2]-a)*c+a;return d};
goog.vec.Vec3.max=function(a,b,c){goog.isNumber(b)?(c[0]=Math.max(a[0],b),c[1]=Math.max(a[1],b),c[2]=Math.max(a[2],b)):(c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],b[2]));return c};goog.vec.Vec3.min=function(a,b,c){goog.isNumber(b)?(c[0]=Math.min(a[0],b),c[1]=Math.min(a[1],b),c[2]=Math.min(a[2],b)):(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]));return c};
goog.vec.Vec3.equals=function(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};goog.vec.Vec4={};goog.vec.Vec4.createFloat32=function(){return new Float32Array(4)};goog.vec.Vec4.createFloat64=function(){return new Float64Array(4)};goog.vec.Vec4.createNumber=function(){var a=Array(4);goog.vec.Vec4.setFromValues(a,0,0,0,0);return a};goog.vec.Vec4.create=function(){return new Float32Array(4)};goog.vec.Vec4.createFromArray=function(a){var b=goog.vec.Vec4.create();goog.vec.Vec4.setFromArray(b,a);return b};
goog.vec.Vec4.createFloat32FromArray=function(a){var b=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromArray(b,a);return b};goog.vec.Vec4.createFloat32FromValues=function(a,b,c,d){var e=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromValues(e,a,b,c,d);return e};goog.vec.Vec4.cloneFloat32=goog.vec.Vec4.createFloat32FromArray;goog.vec.Vec4.createFloat64FromArray=function(a){var b=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromArray(b,a);return b};
goog.vec.Vec4.createFloat64FromValues=function(a,b,c,d){var e=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromValues(e,a,b,c,d);return e};goog.vec.Vec4.cloneFloat64=goog.vec.Vec4.createFloat64FromArray;goog.vec.Vec4.createFromValues=function(a,b,c,d){var e=goog.vec.Vec4.create();goog.vec.Vec4.setFromValues(e,a,b,c,d);return e};goog.vec.Vec4.clone=goog.vec.Vec4.createFromArray;goog.vec.Vec4.setFromValues=function(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a};
goog.vec.Vec4.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};goog.vec.Vec4.add=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};goog.vec.Vec4.subtract=function(a,b,c){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};goog.vec.Vec4.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};
goog.vec.Vec4.abs=function(a,b){b[0]=Math.abs(a[0]);b[1]=Math.abs(a[1]);b[2]=Math.abs(a[2]);b[3]=Math.abs(a[3]);return b};goog.vec.Vec4.scale=function(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};goog.vec.Vec4.magnitudeSquared=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a};goog.vec.Vec4.magnitude=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};
goog.vec.Vec4.normalize=function(a,b){var c=1/goog.vec.Vec4.magnitude(a);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;return b};goog.vec.Vec4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};goog.vec.Vec4.lerp=function(a,b,c,d){var e=a[0],f=a[1],g=a[2];a=a[3];d[0]=(b[0]-e)*c+e;d[1]=(b[1]-f)*c+f;d[2]=(b[2]-g)*c+g;d[3]=(b[3]-a)*c+a;return d};
goog.vec.Vec4.max=function(a,b,c){goog.isNumber(b)?(c[0]=Math.max(a[0],b),c[1]=Math.max(a[1],b),c[2]=Math.max(a[2],b),c[3]=Math.max(a[3],b)):(c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c[3]=Math.max(a[3],b[3]));return c};goog.vec.Vec4.min=function(a,b,c){goog.isNumber(b)?(c[0]=Math.min(a[0],b),c[1]=Math.min(a[1],b),c[2]=Math.min(a[2],b),c[3]=Math.min(a[3],b)):(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.min(a[3],b[3]));return c};
goog.vec.Vec4.equals=function(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};goog.vec.Mat4={};goog.vec.Mat4.createFloat32=function(){return new Float32Array(16)};goog.vec.Mat4.createFloat64=function(){return new Float64Array(16)};goog.vec.Mat4.createNumber=function(){var a=Array(16);goog.vec.Mat4.setFromValues(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return a};goog.vec.Mat4.create=function(){return goog.vec.Mat4.createFloat32()};goog.vec.Mat4.createFloat32Identity=function(){var a=goog.vec.Mat4.createFloat32();a[0]=a[5]=a[10]=a[15]=1;return a};
goog.vec.Mat4.createFloat64Identity=function(){var a=goog.vec.Mat4.createFloat64();a[0]=a[5]=a[10]=a[15]=1;return a};goog.vec.Mat4.createNumberIdentity=function(){var a=Array(16);goog.vec.Mat4.setFromValues(a,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return a};goog.vec.Mat4.createIdentity=function(){return goog.vec.Mat4.createFloat32Identity()};goog.vec.Mat4.createFloat32FromArray=function(a){var b=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(b,a);return b};
goog.vec.Mat4.createFloat32FromValues=function(a,b,c,d,e,f,g,h,k,l,m,n,p,q,u,t){var C=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromValues(C,a,b,c,d,e,f,g,h,k,l,m,n,p,q,u,t);return C};goog.vec.Mat4.cloneFloat32=goog.vec.Mat4.createFloat32FromArray;goog.vec.Mat4.createFloat64FromArray=function(a){var b=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromArray(b,a);return b};
goog.vec.Mat4.createFloat64FromValues=function(a,b,c,d,e,f,g,h,k,l,m,n,p,q,u,t){var C=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromValues(C,a,b,c,d,e,f,g,h,k,l,m,n,p,q,u,t);return C};goog.vec.Mat4.cloneFloat64=goog.vec.Mat4.createFloat64FromArray;goog.vec.Mat4.createFromArray=function(a){var b=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(b,a);return b};
goog.vec.Mat4.createFromValues=function(a,b,c,d,e,f,g,h,k,l,m,n,p,q,u,t){return goog.vec.Mat4.createFloat32FromValues(a,b,c,d,e,f,g,h,k,l,m,n,p,q,u,t)};goog.vec.Mat4.clone=goog.vec.Mat4.createFromArray;goog.vec.Mat4.getElement=function(a,b,c){return a[b+4*c]};goog.vec.Mat4.setElement=function(a,b,c,d){a[b+4*c]=d;return a};
goog.vec.Mat4.setFromValues=function(a,b,c,d,e,f,g,h,k,l,m,n,p,q,u,t,C){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=k;a[8]=l;a[9]=m;a[10]=n;a[11]=p;a[12]=q;a[13]=u;a[14]=t;a[15]=C;return a};goog.vec.Mat4.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};
goog.vec.Mat4.setFromRowMajorArray=function(a,b){a[0]=b[0];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=b[1];a[5]=b[5];a[6]=b[9];a[7]=b[13];a[8]=b[2];a[9]=b[6];a[10]=b[10];a[11]=b[14];a[12]=b[3];a[13]=b[7];a[14]=b[11];a[15]=b[15];return a};goog.vec.Mat4.setDiagonalValues=function(a,b,c,d,e){a[0]=b;a[5]=c;a[10]=d;a[15]=e;return a};goog.vec.Mat4.setDiagonal=function(a,b){a[0]=b[0];a[5]=b[1];a[10]=b[2];a[15]=b[3];return a};
goog.vec.Mat4.getDiagonal=function(a,b,c){if(c)for(var d=0<c?4*c:-c,e=0;e<4-Math.abs(c);e++)b[e]=a[d+5*e];else b[0]=a[0],b[1]=a[5],b[2]=a[10],b[3]=a[15];return b};goog.vec.Mat4.setColumnValues=function(a,b,c,d,e,f){b*=4;a[b]=c;a[b+1]=d;a[b+2]=e;a[b+3]=f;return a};goog.vec.Mat4.setColumn=function(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];return a};goog.vec.Mat4.getColumn=function(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3];return c};
goog.vec.Mat4.setColumns=function(a,b,c,d,e){goog.vec.Mat4.setColumn(a,0,b);goog.vec.Mat4.setColumn(a,1,c);goog.vec.Mat4.setColumn(a,2,d);goog.vec.Mat4.setColumn(a,3,e);return a};goog.vec.Mat4.getColumns=function(a,b,c,d,e){goog.vec.Mat4.getColumn(a,0,b);goog.vec.Mat4.getColumn(a,1,c);goog.vec.Mat4.getColumn(a,2,d);goog.vec.Mat4.getColumn(a,3,e)};goog.vec.Mat4.setRowValues=function(a,b,c,d,e,f){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=f;return a};
goog.vec.Mat4.setRow=function(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3];return a};goog.vec.Mat4.getRow=function(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12];return c};goog.vec.Mat4.setRows=function(a,b,c,d,e){goog.vec.Mat4.setRow(a,0,b);goog.vec.Mat4.setRow(a,1,c);goog.vec.Mat4.setRow(a,2,d);goog.vec.Mat4.setRow(a,3,e);return a};
goog.vec.Mat4.getRows=function(a,b,c,d,e){goog.vec.Mat4.getRow(a,0,b);goog.vec.Mat4.getRow(a,1,c);goog.vec.Mat4.getRow(a,2,d);goog.vec.Mat4.getRow(a,3,e)};goog.vec.Mat4.makeZero=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=0;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=0;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=0;return a};goog.vec.Mat4.makeIdentity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
goog.vec.Mat4.addMat=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];c[9]=a[9]+b[9];c[10]=a[10]+b[10];c[11]=a[11]+b[11];c[12]=a[12]+b[12];c[13]=a[13]+b[13];c[14]=a[14]+b[14];c[15]=a[15]+b[15];return c};
goog.vec.Mat4.subMat=function(a,b,c){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];c[9]=a[9]-b[9];c[10]=a[10]-b[10];c[11]=a[11]-b[11];c[12]=a[12]-b[12];c[13]=a[13]-b[13];c[14]=a[14]-b[14];c[15]=a[15]-b[15];return c};
goog.vec.Mat4.multScalar=function(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;c[6]=a[6]*b;c[7]=a[7]*b;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12]*b;c[13]=a[13]*b;c[14]=a[14]*b;c[15]=a[15]*b;return c};
goog.vec.Mat4.multMat=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],n=a[8],p=a[9],q=a[10],u=a[11],t=a[12],C=a[13],B=a[14];a=a[15];var y=b[0],D=b[1],A=b[2],F=b[3],I=b[4],G=b[5],w=b[6],E=b[7],z=b[8],r=b[9],s=b[10],H=b[11],K=b[12],v=b[13],J=b[14];b=b[15];c[0]=d*y+h*D+n*A+t*F;c[1]=e*y+k*D+p*A+C*F;c[2]=f*y+l*D+q*A+B*F;c[3]=g*y+m*D+u*A+a*F;c[4]=d*I+h*G+n*w+t*E;c[5]=e*I+k*G+p*w+C*E;c[6]=f*I+l*G+q*w+B*E;c[7]=g*I+m*G+u*w+a*E;c[8]=d*z+h*r+n*s+t*H;c[9]=e*z+k*r+p*s+C*H;c[10]=f*z+
l*r+q*s+B*H;c[11]=g*z+m*r+u*s+a*H;c[12]=d*K+h*v+n*J+t*b;c[13]=e*K+k*v+p*J+C*b;c[14]=f*K+l*v+q*J+B*b;c[15]=g*K+m*v+u*J+a*b;return c};
goog.vec.Mat4.transpose=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=f;b[11]=a[14];b[12]=e;b[13]=g;b[14]=h}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
goog.vec.Mat4.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=a[9],n=a[10],p=a[11],q=a[12],u=a[13],t=a[14];a=a[15];return(b*g-c*f)*(n*a-p*t)-(b*h-d*f)*(m*a-p*u)+(b*k-e*f)*(m*t-n*u)+(c*h-d*g)*(l*a-p*q)-(c*k-e*g)*(l*t-n*q)+(d*k-e*h)*(l*u-m*q)};
goog.vec.Mat4.invert=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8],n=a[9],p=a[10],q=a[11],u=a[12],t=a[13],C=a[14],B=a[15],y=c*h-d*g,D=c*k-e*g,A=c*l-f*g,F=d*k-e*h,I=d*l-f*h,G=e*l-f*k,w=m*t-n*u,E=m*C-p*u,z=m*B-q*u,r=n*C-p*t,s=n*B-q*t,H=p*B-q*C,K=y*H-D*s+A*r+F*z-I*E+G*w;if(0==K)return!1;K=1/K;b[0]=(h*H-k*s+l*r)*K;b[1]=(-d*H+e*s-f*r)*K;b[2]=(t*G-C*I+B*F)*K;b[3]=(-n*G+p*I-q*F)*K;b[4]=(-g*H+k*z-l*E)*K;b[5]=(c*H-e*z+f*E)*K;b[6]=(-u*G+C*A-B*D)*K;b[7]=(m*G-p*A+q*D)*K;b[8]=
(g*s-h*z+l*w)*K;b[9]=(-c*s+d*z-f*w)*K;b[10]=(u*I-t*A+B*y)*K;b[11]=(-m*I+n*A-q*y)*K;b[12]=(-g*r+h*E-k*w)*K;b[13]=(c*r-d*E+e*w)*K;b[14]=(-u*F+t*D-C*y)*K;b[15]=(m*F-n*D+p*y)*K;return!0};goog.vec.Mat4.equals=function(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]&&a[4]==b[4]&&a[5]==b[5]&&a[6]==b[6]&&a[7]==b[7]&&a[8]==b[8]&&a[9]==b[9]&&a[10]==b[10]&&a[11]==b[11]&&a[12]==b[12]&&a[13]==b[13]&&a[14]==b[14]&&a[15]==b[15]};
goog.vec.Mat4.multVec3=function(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14];return c};goog.vec.Mat4.multVec3NoTranslate=function(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8];c[1]=d*a[1]+e*a[5]+b*a[9];c[2]=d*a[2]+e*a[6]+b*a[10];return c};
goog.vec.Mat4.multVec3Projective=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f;return c};goog.vec.Mat4.multVec4=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+f*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+f*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+f*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+f*a[11]+b*a[15];return c};
goog.vec.Mat4.makeTranslate=function(a,b,c,d){goog.vec.Mat4.makeIdentity(a);return goog.vec.Mat4.setColumnValues(a,3,b,c,d,1)};goog.vec.Mat4.makeScale=function(a,b,c,d){goog.vec.Mat4.makeIdentity(a);return goog.vec.Mat4.setDiagonalValues(a,b,c,d,1)};goog.vec.Mat4.makeRotate=function(a,b,c,d,e){var f=Math.cos(b),g=1-f;b=Math.sin(b);return goog.vec.Mat4.setFromValues(a,c*c*g+f,c*d*g+e*b,c*e*g-d*b,0,c*d*g-e*b,d*d*g+f,d*e*g+c*b,0,c*e*g+d*b,d*e*g-c*b,e*e*g+f,0,0,0,0,1)};
goog.vec.Mat4.makeRotateX=function(a,b){var c=Math.cos(b),d=Math.sin(b);return goog.vec.Mat4.setFromValues(a,1,0,0,0,0,c,d,0,0,-d,c,0,0,0,0,1)};goog.vec.Mat4.makeRotateY=function(a,b){var c=Math.cos(b),d=Math.sin(b);return goog.vec.Mat4.setFromValues(a,c,0,-d,0,0,1,0,0,d,0,c,0,0,0,0,1)};goog.vec.Mat4.makeRotateZ=function(a,b){var c=Math.cos(b),d=Math.sin(b);return goog.vec.Mat4.setFromValues(a,c,d,0,0,-d,c,0,0,0,0,1,0,0,0,0,1)};
goog.vec.Mat4.makeFrustum=function(a,b,c,d,e,f,g){return goog.vec.Mat4.setFromValues(a,2*f/(c-b),0,0,0,0,2*f/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(g+f)/(g-f),-1,0,0,-(2*g*f)/(g-f),0)};goog.vec.Mat4.makePerspective=function(a,b,c,d,e){var f=b/2;b=e-d;var g=Math.sin(f);if(0==b||0==g||0==c)return a;f=Math.cos(f)/g;return goog.vec.Mat4.setFromValues(a,f/c,0,0,0,0,f,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
goog.vec.Mat4.makeOrtho=function(a,b,c,d,e,f,g){return goog.vec.Mat4.setFromValues(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(g-f),0,-(c+b)/(c-b),-(e+d)/(e-d),-(g+f)/(g-f),1)};
goog.vec.Mat4.makeLookAt=function(a,b,c,d){var e=goog.vec.Mat4.tmpVec4_[0];goog.vec.Vec3.subtract(c,b,e);goog.vec.Vec3.normalize(e,e);e[3]=0;c=goog.vec.Mat4.tmpVec4_[1];goog.vec.Vec3.cross(e,d,c);goog.vec.Vec3.normalize(c,c);c[3]=0;d=goog.vec.Mat4.tmpVec4_[2];goog.vec.Vec3.cross(c,e,d);goog.vec.Vec3.normalize(d,d);d[3]=0;goog.vec.Vec3.negate(e,e);goog.vec.Mat4.setRow(a,0,c);goog.vec.Mat4.setRow(a,1,d);goog.vec.Mat4.setRow(a,2,e);goog.vec.Mat4.setRowValues(a,3,0,0,0,1);goog.vec.Mat4.translate(a,-b[0],
-b[1],-b[2]);return a};goog.vec.Mat4.toLookAt=function(a,b,c,d){var e=goog.vec.Mat4.tmpMat4_[0];if(!goog.vec.Mat4.invert(a,e))return!1;b&&(b[0]=e[12],b[1]=e[13],b[2]=e[14]);if(c||d)c||(c=goog.vec.Mat4.tmpVec3_[0]),c[0]=-a[2],c[1]=-a[6],c[2]=-a[10],goog.vec.Vec3.normalize(c,c);d&&(b=goog.vec.Mat4.tmpVec3_[1],b[0]=a[0],b[1]=a[4],b[2]=a[8],goog.vec.Vec3.cross(b,c,d),goog.vec.Vec3.normalize(d,d));return!0};
goog.vec.Mat4.makeEulerZXZ=function(a,b,c,d){var e=Math.cos(b);b=Math.sin(b);var f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);a[0]=e*g-f*b*d;a[1]=f*e*d+g*b;a[2]=d*c;a[3]=0;a[4]=-e*d-g*f*b;a[5]=e*f*g-b*d;a[6]=g*c;a[7]=0;a[8]=c*b;a[9]=-e*c;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
goog.vec.Mat4.toEulerZXZ=function(a,b,c){var d=Math.sqrt(a[2]*a[2]+a[6]*a[6]);c=c?-1:1;d>goog.vec.EPSILON?(b[2]=Math.atan2(a[2]*c,a[6]*c),b[1]=Math.atan2(d*c,a[10]),b[0]=Math.atan2(a[8]*c,-a[9]*c)):(b[0]=0,b[1]=Math.atan2(d*c,a[10]),b[2]=Math.atan2(a[1],a[0]));b[0]=(b[0]+2*Math.PI)%(2*Math.PI);b[2]=(b[2]+2*Math.PI)%(2*Math.PI);b[1]=(b[1]*c+2*Math.PI)%(2*Math.PI)*c;return b};
goog.vec.Mat4.translate=function(a,b,c,d){return goog.vec.Mat4.setColumnValues(a,3,a[0]*b+a[4]*c+a[8]*d+a[12],a[1]*b+a[5]*c+a[9]*d+a[13],a[2]*b+a[6]*c+a[10]*d+a[14],a[3]*b+a[7]*c+a[11]*d+a[15])};goog.vec.Mat4.scale=function(a,b,c,d){return goog.vec.Mat4.setFromValues(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
goog.vec.Mat4.rotate=function(a,b,c,d,e){var f=a[0],g=a[1],h=a[2],k=a[3],l=a[4],m=a[5],n=a[6],p=a[7],q=a[8],u=a[9],t=a[10],C=a[11],B=a[12],y=a[13],D=a[14],A=a[15],F=Math.cos(b),I=Math.sin(b),G=1-F;b=c*c*G+F;var w=c*d*G+e*I,E=c*e*G-d*I,z=c*d*G-e*I,r=d*d*G+F,s=d*e*G+c*I,H=c*e*G+d*I;c=d*e*G-c*I;e=e*e*G+F;return goog.vec.Mat4.setFromValues(a,f*b+l*w+q*E,g*b+m*w+u*E,h*b+n*w+t*E,k*b+p*w+C*E,f*z+l*r+q*s,g*z+m*r+u*s,h*z+n*r+t*s,k*z+p*r+C*s,f*H+l*c+q*e,g*H+m*c+u*e,h*H+n*c+t*e,k*H+p*c+C*e,B,y,D,A)};
goog.vec.Mat4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],g=a[8],h=a[9],k=a[10],l=a[11],m=Math.cos(b),n=Math.sin(b);a[4]=c*m+g*n;a[5]=d*m+h*n;a[6]=e*m+k*n;a[7]=f*m+l*n;a[8]=c*-n+g*m;a[9]=d*-n+h*m;a[10]=e*-n+k*m;a[11]=f*-n+l*m;return a};goog.vec.Mat4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[8],h=a[9],k=a[10],l=a[11],m=Math.cos(b),n=Math.sin(b);a[0]=c*m+g*-n;a[1]=d*m+h*-n;a[2]=e*m+k*-n;a[3]=f*m+l*-n;a[8]=c*n+g*m;a[9]=d*n+h*m;a[10]=e*n+k*m;a[11]=f*n+l*m;return a};
goog.vec.Mat4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=Math.cos(b),n=Math.sin(b);a[0]=c*m+g*n;a[1]=d*m+h*n;a[2]=e*m+k*n;a[3]=f*m+l*n;a[4]=c*-n+g*m;a[5]=d*-n+h*m;a[6]=e*-n+k*m;a[7]=f*-n+l*m;return a};goog.vec.Mat4.getTranslation=function(a,b){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};goog.vec.Mat4.tmpVec3_=[goog.vec.Vec3.createFloat64(),goog.vec.Vec3.createFloat64()];goog.vec.Mat4.tmpVec4_=[goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64()];
goog.vec.Mat4.tmpMat4_=[goog.vec.Mat4.createFloat64()];X.matrix={};X.matrix.makeLookAt=function(a,b,c,d){c=c.subtract(b);c.normalize();d=X.vector.cross(c,d);d.normalize();var e=X.vector.cross(d,c);e.normalize();c.invert();goog.vec.Mat4.setRowValues(a,0,d.x,d.y,d.z,0);goog.vec.Mat4.setRowValues(a,1,e.x,e.y,e.z,0);goog.vec.Mat4.setRowValues(a,2,c.x,c.y,c.z,0);goog.vec.Mat4.translate(a,-b.x,-b.y,-b.z);return a};
X.matrix.multiplyByVector=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new X.vector((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};X.matrix.swapRows=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);goog.vec.Mat4.getRow(a,b,d);goog.vec.Mat4.getRow(a,c,e);goog.vec.Mat4.setRow(a,b,e);goog.vec.Mat4.setRow(a,c,d);return a};
X.matrix.swapCols=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);goog.vec.Mat4.getColumn(a,b,d);goog.vec.Mat4.getColumn(a,c,e);goog.vec.Mat4.setColumn(a,b,e);goog.vec.Mat4.setColumn(a,c,d);return a};X.matrix.identity=goog.vec.Mat4.createFloat32Identity;X.matrix.clone=goog.vec.Mat4.cloneFloat32;X.matrix.transpose=goog.vec.Mat4.transpose;X.matrix.determinant=goog.vec.Mat4.determinant;X.matrix.invert=goog.vec.Mat4.invert;X.matrix.makePerspective=goog.vec.Mat4.makePerspective;
X.matrix.makeFrustum=goog.vec.Mat4.makeFrustum;X.matrix.makeOrtho=goog.vec.Mat4.makeOrtho;X.matrix.multiply=goog.vec.Mat4.multMat;X.matrix.multiplyByVec4=goog.vec.Mat4.multVec4;X.matrix.translate=goog.vec.Mat4.translate;X.matrix.scale=goog.vec.Mat4.scale;X.matrix.rotate=goog.vec.Mat4.rotate;X.matrix.rotateX=goog.vec.Mat4.rotateX;X.matrix.rotateY=goog.vec.Mat4.rotateY;X.matrix.rotateZ=goog.vec.Mat4.rotateZ;goog.exportSymbol("X.matrix.identity",X.matrix.identity);
goog.exportSymbol("X.matrix.clone",X.matrix.clone);goog.exportSymbol("X.matrix.transpose",X.matrix.transpose);goog.exportSymbol("X.matrix.determinant",X.matrix.determinant);goog.exportSymbol("X.matrix.invert",X.matrix.invert);goog.exportSymbol("X.matrix.multiply",X.matrix.multiply);goog.exportSymbol("X.matrix.multiplyByVector",X.matrix.multiplyByVector);goog.exportSymbol("X.matrix.multiplyByVec4",X.matrix.multiplyByVec4);goog.exportSymbol("X.matrix.makePerspective",X.matrix.makePerspective);
goog.exportSymbol("X.matrix.makeFrustum",X.matrix.makeFrustum);goog.exportSymbol("X.matrix.makeOrtho",X.matrix.makeOrtho);goog.exportSymbol("X.matrix.makeLookAt",X.matrix.makeLookAt);goog.exportSymbol("X.matrix.translate",X.matrix.translate);goog.exportSymbol("X.matrix.scale",X.matrix.scale);goog.exportSymbol("X.matrix.rotate",X.matrix.rotate);goog.exportSymbol("X.matrix.rotateX",X.matrix.rotateX);goog.exportSymbol("X.matrix.rotateY",X.matrix.rotateY);goog.exportSymbol("X.matrix.rotateZ",X.matrix.rotateZ);
goog.exportSymbol("X.matrix.swapRows",X.matrix.swapRows);goog.exportSymbol("X.matrix.swapCols",X.matrix.swapCols);X.transform=function(){X.base.call(this);this._classname="transform";this._matrix=X.matrix.identity()};goog.inherits(X.transform,X.base);X.transform.prototype.__defineGetter__("matrix",function(){return this._matrix});X.transform.prototype.__defineSetter__("matrix",function(a){if(!(goog.isDefAndNotNull(a)&&a instanceof Float32Array))throw Error("Invalid matrix.");this._matrix=a;this.modified()});
X.transform.prototype.rotateX=function(a){if(!goog.isNumber(a)||-360>a||360<a)throw Error("Invalid angle.");X.matrix.rotateX(this._matrix,a*Math.PI/180);this.modified()};X.transform.prototype.rotateY=function(a){if(!goog.isNumber(a)||-360>a||360<a)throw Error("Invalid angle.");X.matrix.rotateY(this._matrix,a*Math.PI/180);this.modified()};X.transform.prototype.rotateZ=function(a){if(!goog.isNumber(a)||-360>a||360<a)throw Error("Invalid angle.");X.matrix.rotateZ(this._matrix,a*Math.PI/180);this.modified()};
X.transform.prototype.translateX=function(a){if(!goog.isNumber(a))throw Error("Invalid distance.");X.matrix.translate(this._matrix,a,0,0);this.modified()};X.transform.prototype.translateY=function(a){if(!goog.isNumber(a))throw Error("Invalid distance.");X.matrix.translate(this._matrix,0,a,0);this.modified()};X.transform.prototype.translateZ=function(a){if(!goog.isNumber(a))throw Error("Invalid distance.");X.matrix.translate(this._matrix,0,0,a);this.modified()};
X.transform.prototype.flip_=function(a,b){this._matrix[a+4*b]*=-1;this.modified()};X.transform.prototype.flipX=function(){this.flip_(0,0)};X.transform.prototype.flipY=function(){this.flip_(1,1)};X.transform.prototype.flipZ=function(){this.flip_(2,2)};X.transform.prototype.modified=function(){this._dirty=!0};goog.exportSymbol("X.transform",X.transform);goog.exportSymbol("X.transform.prototype.rotateX",X.transform.prototype.rotateX);goog.exportSymbol("X.transform.prototype.rotateY",X.transform.prototype.rotateY);
goog.exportSymbol("X.transform.prototype.rotateZ",X.transform.prototype.rotateZ);goog.exportSymbol("X.transform.prototype.translateX",X.transform.prototype.translateX);goog.exportSymbol("X.transform.prototype.translateY",X.transform.prototype.translateY);goog.exportSymbol("X.transform.prototype.translateZ",X.transform.prototype.translateZ);goog.exportSymbol("X.transform.prototype.flipX",X.transform.prototype.flipX);goog.exportSymbol("X.transform.prototype.flipY",X.transform.prototype.flipY);
goog.exportSymbol("X.transform.prototype.flipZ",X.transform.prototype.flipZ);goog.exportSymbol("X.transform.prototype.modified",X.transform.prototype.modified);X.texture=function(){X.base.call(this);this._classname="texture";this._rawData=this._image=this._file=null;this._rawDataHeight=this._rawDataWidth=0;this._grayscale=!1;inject(this,new X.loadable)};goog.inherits(X.texture,X.base);X.texture.prototype.__defineSetter__("rawData",function(a){this._rawData=a;this._dirty=!0});X.texture.prototype.__defineSetter__("rawDataHeight",function(a){this._rawDataHeight=a;this._dirty=!0});
X.texture.prototype.__defineSetter__("rawDataWidth",function(a){this._rawDataWidth=a;this._dirty=!0});X.texture.prototype.__defineSetter__("grayscale",function(a){this._grayscale=a;this._dirty=!0});goog.exportSymbol("X.texture",X.texture);X.displayable=function(){this._type=X.displayable.types.TRIANGLES;this._transform=new X.transform;this._color=[1,1,1];this._textureCoordinateMap=this._texture=this._colors=this._normals=this._points=null;this._pointIndices=[];this._visible=!0;this._linewidth=this._pointsize=1;this._caption=null;this._magicmode=!1;this._opacity=1;this._distance=0;this._pickable=!0};X.displayable.types={TRIANGLES:"TRIANGLES",TRIANGLE_STRIPS:"TRIANGLE_STRIPS",LINES:"LINES",POINTS:"POINTS",POLYGONS:"POLYGONS"};
X.displayable.prototype.__defineSetter__("type",function(a){return this._type=a});X.displayable.prototype.__defineGetter__("type",function(){return this._type});X.displayable.prototype.__defineGetter__("texture",function(){this._texture||(this._texture=new X.texture);return this._texture});X.displayable.prototype.__defineGetter__("transform",function(){return this._transform});X.displayable.prototype.__defineGetter__("points",function(){return this._points});
X.displayable.prototype.__defineSetter__("points",function(a){this._points=a});X.displayable.prototype.__defineGetter__("normals",function(){return this._normals});X.displayable.prototype.__defineSetter__("normals",function(a){this._normals=a});X.displayable.prototype.__defineGetter__("colors",function(){return this._colors});X.displayable.prototype.__defineSetter__("colors",function(a){this._colors=a});X.displayable.prototype.__defineGetter__("color",function(){return this._color});
X.displayable.prototype.__defineSetter__("color",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid color.");for(var b=this._children,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this._color=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("opacity",function(){return this._opacity});
X.displayable.prototype.__defineSetter__("opacity",function(a){if(!goog.isNumber(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this._children,c=b.length,d=0,d=0;d<c;d++)goog.isDefAndNotNull(b[d])&&(b[d].opacity=a);this._opacity=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("caption",function(){return this._caption});X.displayable.prototype.__defineSetter__("caption",function(a){this._caption=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("visible",function(){return this._visible});
X.displayable.prototype.__defineSetter__("visible",function(a){for(var b=this._children,c=b.length,d=0,d=0;d<c;d++)goog.isDefAndNotNull(b[d])&&(b[d].visible=a);this._visible=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("pointsize",function(){return this._pointsize});X.displayable.prototype.__defineSetter__("pointsize",function(a){if(!goog.isNumber(a))throw Error("Invalid point size.");this._pointsize=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("magicmode",function(){return this._magicmode});
X.displayable.prototype.__defineSetter__("magicmode",function(a){if(!goog.isBoolean(a))throw Error("Invalid magic mode setting.");this._magicmode=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("linewidth",function(){return this._linewidth});X.displayable.prototype.__defineSetter__("linewidth",function(a){if(!goog.isNumber(a))throw Error("Invalid line width.");this._linewidth=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("pickable",function(){return this._pickable});
X.displayable.prototype.__defineSetter__("pickable",function(a){if(!goog.isBoolean(a))throw Error("Invalid pickable setting.");this._pickable=a;this._dirty=!0});X.displayable.prototype.__defineGetter__("textureCoordinateMap",function(){return this._textureCoordinateMap});X.displayable.prototype.__defineSetter__("textureCoordinateMap",function(a){this._textureCoordinate=a});X.thresholdable=function(){this._min=Infinity;this._lowerThreshold=this._max=-Infinity;this._upperThreshold=Infinity;this._minColor=[0,0,0];this._maxColor=[1,1,1]};X.thresholdable.prototype.__defineGetter__("lowerThreshold",function(){return this._lowerThreshold});X.thresholdable.prototype.__defineSetter__("lowerThreshold",function(a){this._lowerThreshold=a});X.thresholdable.prototype.__defineGetter__("upperThreshold",function(){return this._upperThreshold});
X.thresholdable.prototype.__defineSetter__("upperThreshold",function(a){this._upperThreshold=a});X.thresholdable.prototype.__defineGetter__("min",function(){return this._min});X.thresholdable.prototype.__defineGetter__("max",function(){return this._max});X.thresholdable.prototype.__defineGetter__("minColor",function(){return this._minColor});
X.thresholdable.prototype.__defineSetter__("minColor",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid min. color.");this._minColor=a});X.thresholdable.prototype.__defineGetter__("maxColor",function(){return this._maxColor});X.thresholdable.prototype.__defineSetter__("maxColor",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid max. color.");this._maxColor=a});X.scalars=function(){X.base.call(this);this._classname="scalars";this._glArray=this._array=null;this._replaceMode=!0;this._interpolation=0;inject(this,new X.loadable);inject(this,new X.thresholdable);this._minColor=[0,1,0];this._maxColor=[1,0,0]};goog.inherits(X.scalars,X.base);X.scalars.prototype.__defineGetter__("array",function(){return this._array});X.scalars.prototype.__defineSetter__("array",function(a){this._glArray=this._array=a;this._dirty=!0});
X.scalars.prototype.__defineGetter__("interpolation",function(){return this._interpolation});X.scalars.prototype.__defineSetter__("interpolation",function(a){this._interpolation=a});goog.exportSymbol("X.scalars",X.scalars);X.object=function(a){X.base.call(this);this._classname="object";this._children=[];this._scalars=this._colortable=null;inject(this,new X.displayable);goog.isDefAndNotNull(a)&&this.copy_(a)};goog.inherits(X.object,X.base);
X.object.prototype.copy_=function(a){this._type=a._type;this._transform=new X.transform;this._transform._matrix=new Float32Array(a._transform._matrix);this._color=a._color.slice();a._points&&(this._points=new X.triplets(a._points.length,a._points));a._normals&&(this._normals=new X.triplets(a._normals.length,a._normals));a._colors&&(this._colors=new X.triplets(a._colors.length,a._colors));this._texture=a._texture;this._textureCoordinateMap=a._textureCoordinateMap;a._file&&(this._file=new X.file((new String(a._file._path)).toString()));
this._opacity=a._opacity;this._children.length=0;var b=a._children;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this._children.push(new X[b[d]._classname](b[d]));this._visible=a._visible;this._pointsize=a._pointsize;this._linewidth=a._linewidth;a._caption&&(this._caption=(new String(a._caption)).toString());this._magicmode=a._magicmode;this._pickable=a._pickable;this._pointIndices=a._pointIndices.slice();this._dirty=!0};
X.object.prototype.__defineGetter__("colortable",function(){this._colortable||(this._colortable=new X.colortable);return this._colortable});X.object.prototype.__defineGetter__("scalars",function(){this._scalars||(this._scalars=new X.scalars);return this._scalars});X.object.prototype.__defineGetter__("children",function(){return this._children});X.object.prototype.modified=function(a){a=new X.event.ModifiedEvent;a._object=this;this.dispatchEvent(a)};
X.object.prototype.remove=function(a){a=new X.event.RemoveEvent;a._object=this;this.dispatchEvent(a)};X.object.OPACITY_COMPARATOR=function(a,b){if(!(goog.isDefAndNotNull(a)&&goog.isDefAndNotNull(b)&&a instanceof X.object&&b instanceof X.object))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a._opacity?-1:1==b._opacity?1:goog.isDefAndNotNull(a._distance)&&goog.isDefAndNotNull(b._distance)&&a._distance>b._distance?-1:1};goog.exportSymbol("X.object",X.object);
goog.exportSymbol("X.object.prototype.modified",X.object.prototype.modified);goog.exportSymbol("X.object.prototype.remove",X.object.prototype.remove);X.event=function(a){goog.events.Event.call(this,a);this._classname="event"};goog.inherits(X.event,goog.events.Event);X.event.uniqueId=function(a){return a+"_"+goog.string.createUniqueString()};
X.event.events={PAN:X.event.uniqueId("pan"),ROTATE:X.event.uniqueId("rotate"),ZOOM:X.event.uniqueId("zoom"),SCROLL:X.event.uniqueId("scroll"),RENDER:X.event.uniqueId("render"),RESETVIEW:X.event.uniqueId("resetview"),WINDOWLEVEL:X.event.uniqueId("windowlevel"),MODIFIED:X.event.uniqueId("modified"),REMOVE:X.event.uniqueId("remove"),PROGRESS:X.event.uniqueId("progress"),HOVER:X.event.uniqueId("hover"),HOVER_END:X.event.uniqueId("hover_end"),COMPUTING:X.event.uniqueId("computing"),COMPUTING_END:X.event.uniqueId("computing_end"),
COMPUTING_PROGRESS:X.event.uniqueId("computing_progress")};X.event.WindowLevelEvent=function(){X.event.call(this,X.event.events.WINDOWLEVEL);this._level=this._window=0};goog.inherits(X.event.WindowLevelEvent,X.event);X.event.PanEvent=function(){X.event.call(this,X.event.events.PAN);this._distance=new X.vector(0,0,0)};goog.inherits(X.event.PanEvent,X.event);X.event.RotateEvent=function(){X.event.call(this,X.event.events.ROTATE);this._distance=new X.vector(0,0,0)};
goog.inherits(X.event.RotateEvent,X.event);X.event.ZoomEvent=function(){X.event.call(this,X.event.events.ZOOM);this._fast=this._in=!1};goog.inherits(X.event.ZoomEvent,X.event);X.event.ScrollEvent=function(){X.event.call(this,X.event.events.SCROLL);this._up=!1};goog.inherits(X.event.ScrollEvent,X.event);X.event.RenderEvent=function(){X.event.call(this,X.event.events.RENDER)};goog.inherits(X.event.RenderEvent,X.event);
X.event.HoverEvent=function(){X.event.call(this,X.event.events.HOVER);this._y=this._x=0};goog.inherits(X.event.HoverEvent,X.event);X.event.HoverEndEvent=function(){X.event.call(this,X.event.events.HOVER_END)};goog.inherits(X.event.HoverEndEvent,X.event);X.event.ResetViewEvent=function(){X.event.call(this,X.event.events.RESETVIEW)};goog.inherits(X.event.ResetViewEvent,X.event);X.event.ModifiedEvent=function(){X.event.call(this,X.event.events.MODIFIED);this._container=this._object=null};
goog.inherits(X.event.ModifiedEvent,X.event);X.event.RemoveEvent=function(){X.event.call(this,X.event.events.REMOVE);this._container=this._object=null};goog.inherits(X.event.RemoveEvent,X.event);X.event.ProgressEvent=function(){X.event.call(this,X.event.events.PROGRESS);this._value=0};goog.inherits(X.event.ProgressEvent,X.event);X.event.ComputingEvent=function(){X.event.call(this,X.event.events.COMPUTING);this._object=null};goog.inherits(X.event.ComputingEvent,X.event);
X.event.ComputingProgressEvent=function(){X.event.call(this,X.event.events.COMPUTING_PROGRESS);this._value=0};goog.inherits(X.event.ComputingProgressEvent,X.event);X.event.ComputingEndEvent=function(){X.event.call(this,X.event.events.COMPUTING_END);this._object=null};goog.inherits(X.event.ComputingEndEvent,X.event);goog.exportSymbol("X.event.events.PAN",X.event.events.PAN);goog.exportSymbol("X.event.events.ROTATE",X.event.events.ROTATE);goog.exportSymbol("X.event.events.ZOOM",X.event.events.ZOOM);
goog.exportSymbol("X.event.events.SCROLL",X.event.events.SCROLL);X.parser=function(){X.base.call(this);this._classname="parser";this._data=null;this._dataPointer=0;this._nativeLittleEndian=0<(new Int8Array((new Int16Array([1])).buffer))[0];this._littleEndian=!0;this._lastMin=-Infinity;this._lastMax=Infinity};goog.inherits(X.parser,X.base);X.parser.prototype.parse=function(a,b,c,d){throw Error("The function parse() should be overloaded.");};
X.parser.prototype.arrayMinMax=function(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var f=a[e],b=Math.min(b,f),c=Math.max(c,f);return[b,c]};X.parser.prototype.parseChars=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d};X.parser.prototype.jumpTo=function(a){this._dataPointer=a};
X.parser.prototype.scan=function(a,b){goog.isDefAndNotNull(b)||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this._dataPointer,this._dataPointer+=b*c));this._nativeLittleEndian!=this._littleEndian&&
(d=this.flipEndianness(d,c));return 1==b?d[0]:d};X.parser.prototype.flipEndianness=function(a,b){for(var c=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),d=0;d<a.byteLength;d+=b)for(var e=d+b-1,f=d;e>f;e--,f++){var g=c[f];c[f]=c[e];c[e]=g}return a};
X.parser.computeRASBBox=function(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=goog.vec.Vec4.createFloat32FromValues(0,0,0,1),e=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=goog.vec.Vec4.createFloat32FromValues(0,0,b[2]-1,1);goog.vec.Mat4.multVec4(a,d,e);c[0]=
e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=goog.vec.Vec4.createFloat32FromValues(0,b[1]-1,0,1);goog.vec.Mat4.multVec4(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=goog.vec.Vec4.createFloat32FromValues(b[0]-1,0,0,1);goog.vec.Mat4.multVec4(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?
e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=goog.vec.Vec4.createFloat32FromValues(b[0]-1,b[1]-1,0,1);goog.vec.Mat4.multVec4(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=goog.vec.Vec4.createFloat32FromValues(b[0]-1,0,b[2]-1,1);goog.vec.Mat4.multVec4(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?
e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=goog.vec.Vec4.createFloat32FromValues(0,b[1]-1,b[2]-1,1);goog.vec.Mat4.multVec4(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=goog.vec.Vec4.createFloat32FromValues(b[0]-1,b[1]-1,b[2]-1,1);goog.vec.Mat4.multVec4(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>
c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c};X.parser.createIJKVolume=function(a,b,c){for(var d=Array(b[2]),e=Array(b[2]),f=b[1]*b[0],g=0,h=0,k=0,l=0,m=0,l=0;l<b[2];l++){var n=a.subarray(l*f,(l+1)*f),m=0;e[l]=Array(b[1]);d[l]=Array(b[1]);for(k=0;k<b[1];k++)for(e[l][k]=new a.constructor(b[0]),d[l][k]=new a.constructor(b[0]),h=0;h<b[0];h++)g=n[m],e[l][k][h]=g/c*255,d[l][k][h]=g,m++}return[d,e]};
X.parser.intersectionBBoxLine=function(a,b,c){for(var d=[],e=[],f=0;6>f;f++){var g=Math.floor(f/2),h=(g+1)%3,k=(g+2)%3,l=(2+2*g)%6,m=(4+2*g)%6,n=1/c[g]*(a[f]-b[g]);if(Infinity!=n&&-Infinity!=n){var p=b[h]+c[h]*n,n=b[k]+c[k]*n;p>=a[l]&&p<=a[l+1]&&n>=a[m]&&n<=a[m+1]?(l=[],l[g]=a[f],l[h]=p,l[k]=n,d.push(l)):(l=[],l[g]=a[f],l[h]=p,l[k]=n,e.push(l))}}return[d,e]};
X.parser.intersectionBBoxPlane=function(a,b,c){for(var d=[],e=[],f=0;6>f;f++)for(var g=Math.floor(f/2),h=(g+1)%3,k=(g+2)%3,l=(4+2*g)%6,m=0;2>m;m++){var n=(2+m+2*g)%6,p=-(c[g]*(a[f]-b[g])+c[h]*(a[n]-b[h]))/c[k]+b[k];if(p>=a[l]&&p<=a[l+1]||p<=a[l]&&p>=a[l+1]){var q=[];q[g]=a[f];q[h]=a[n];q[k]=p;d.push(q)}else q=[],q[g]=a[f],q[h]=a[n],q[k]=p,e.push(q)}return[d,e]};
X.parser.xyrasTransform=function(a,b){var c=goog.vec.Mat4.createFloat32Identity();if(!goog.vec.Vec3.equals(a,b)){var d=Math.acos(a[2]),e=goog.vec.Vec3.createFloat32();goog.vec.Vec3.cross(a,b,e);goog.vec.Vec3.normalize(e,e);var f=Math.cos(d/2),g=Math.sin(d/2)*e[0],h=Math.sin(d/2)*e[1],d=Math.sin(d/2)*e[2];goog.vec.Mat4.setRowValues(c,0,f*f+g*g-h*h-d*d,2*(g*h-f*d),2*(g*d+f*h),0);goog.vec.Mat4.setRowValues(c,1,2*(g*h+f*d),f*f+h*h-g*g-d*d,2*(h*d-f*g),0);goog.vec.Mat4.setRowValues(c,2,2*(g*d-f*h),2*(h*
d+f*g),f*f+d*d-h*h-g*g,0)}f=goog.vec.Mat4.createFloat32();goog.vec.Mat4.invert(c,f);return[c,f]};X.parser.xyBBox=function(a){for(var b=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],c=0,c=0;c<a.length;++c)a[c][0]<b[0]&&(b[0]=a[c][0]),a[c][0]>b[1]&&(b[1]=a[c][0]),a[c][1]<b[2]&&(b[2]=a[c][1]),a[c][1]>b[3]&&(b[3]=a[c][1]),a[c][2]<b[4]&&(b[4]=a[c][2]),a[c][2]>b[5]&&(b[5]=a[c][2]);return b};
X.parser.reslice2=function(a,b,c,d,e,f,g,h,k){var l=new X.slice;goog.vec.Vec3.normalize(c,c);e=X.parser.intersectionBBoxPlane(e,a,c)[0];a=goog.vec.Vec3.createFloat32FromValues(0,0,1);a=X.parser.xyrasTransform(c,a);var m=a[0];a=a[1];for(var n=[],p=0;p<e.length;++p){var q=goog.vec.Vec4.createFloat32FromValues(e[p][0],e[p][1],e[p][2],1),u=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(m,q,u);n.push([u[0],u[1],u[2]])}p=goog.vec.Vec3.createFloat32FromValues(1,0,0);e=goog.vec.Vec3.createFloat32();
goog.vec.Mat4.multVec3(a,p,e);p=goog.vec.Vec3.createFloat32FromValues(0,1,0);m=goog.vec.Vec3.createFloat32();goog.vec.Mat4.multVec3(a,p,m);n=X.parser.xyBBox(n);p=goog.vec.Vec4.createFloat32FromValues(n[0]+(n[1]-n[0])/2,n[2]+(n[3]-n[2])/2,n[4]+(n[5]-n[4])/2,0);q=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multMat(a,p,q);var u=Math.floor(n[0]),t=Math.ceil(n[1]);u==t&&t++;var C=t-u,B=Math.floor(n[2]),y=Math.ceil(n[3]),D=y-B,A=b[0];b=b[1];var p=Math.ceil(C/A),F=Math.ceil(D/b),I=new Uint8Array(4*p*F),
G=new X.texture;G._rawDataWidth=p;G._rawDataHeight=F;var F=goog.vec.Vec4.createFloat32(),w=goog.vec.Vec4.createFloat32FromValues(0,0,n[4],1),E=goog.vec.Mat4.createFloat32();goog.vec.Mat4.multMat(g._RASToIJK,a,E);for(var z=y-1E-7,r=t-1E-7,s=0,H=0,K=0,v=B,v=B;v<=z;v+=b)for(K++,H=0,w[1]=v,p=u;p<=r;p+=A){H++;w[0]=p;goog.vec.Mat4.multVec4(E,w,F);var J=4*s,Q=Math.floor(F[2]),L=Math.floor(F[1]),M=Math.floor(F[0]);if(0<=M&&M<g._dimensions[0]&&0<=L&&L<g._dimensions[1]&&0<=Q&&Q<g._dimensions[2]){var N=f[Q][L][M],
S=M=L=Q=0;k?((N=k.get(N))||(N=[0,.61,0,0,1]),Q=255*N[1],L=255*N[2],M=255*N[3],S=255*N[4]):(Q=L=M=N/g._max*255,S=255);I[J]=Q;I[++J]=L;I[++J]=M;I[++J]=S}else I[J]=0,I[++J]=0,I[++J]=0,I[++J]=0;s++}G._rawData=I;l._texture=G;l._xyBBox=n;l._XYToRAS=a;l._XYToIJK=E;l._hmin=B;l._hmax=y;l._wmin=u;l._wmax=t;l._iWidth=H;l._iHeight=K;l._widthSpacing=A;l._width=C;l._heightSpacing=b;l._height=D;l._center=[q[0],q[1],q[2]];l._front=[c[0],c[1],c[2]];l._right=[e[0],e[1],e[2]];l._up=[m[0],m[1],m[2]];l._visible=!1;l._volume=
g;goog.isDefAndNotNull(g._volume)&&!h?l._borders=!1:l._borders=!0;l._borderColor=d;l.create_();l._visible=!1;return l};
X.parser.prototype.updateSliceInfo=function(a,b,c,d){var e=X.parser.intersectionBBoxLine(d._BBox,b,c);b=e[0];d._childrenInfo[a]._solutionsLine=e;var e=new goog.math.Vec3(b[0][0],b[0][1],b[0][2]),f=new goog.math.Vec3(b[1][0],b[1][1],b[1][2]),e=goog.math.Vec3.distance(e,f);d._childrenInfo[a]._dist=e;var f=goog.vec.Vec3.createFloat32FromValues(0,0,1),g=X.parser.xyrasTransform(c,f)[0],h=goog.vec.Vec4.createFloat32FromValues(d._RASSpacing[0],d._RASSpacing[1],d._RASSpacing[2],0),f=goog.vec.Vec4.createFloat32();
goog.vec.Mat4.multVec4(g,h,f);g=goog.vec.Vec4.createFloat32();goog.vec.Vec4.scale(c,f[2],g);.5>Math.abs(f[0])&&(f[0]=.5);.5>Math.abs(f[1])&&(f[1]=.5);d._childrenInfo[a]._sliceXYSpacing=[Math.abs(f[0]),Math.abs(f[1])];d._childrenInfo[a]._sliceSpacing=f[2];d._childrenInfo[a]._sliceDirection=g;e=Math.floor(Math.abs(e/f[2]));d._range[a]=e+1;d._childrenInfo[a]._nb=e+1;d._childrenInfo[a]._solutionsLine[0][0][0]>d._childrenInfo[a]._solutionsLine[0][1][0]?0<g[0]&&(e=d._childrenInfo[a]._solutionsLine[0][0],
d._childrenInfo[a]._solutionsLine[0][0]=d._childrenInfo[a]._solutionsLine[0][1],d._childrenInfo[a]._solutionsLine[0][1]=e):d._childrenInfo[a]._solutionsLine[0][0][0]<d._childrenInfo[a]._solutionsLine[0][1][0]?0>g[0]&&(e=d._childrenInfo[a]._solutionsLine[0][0],d._childrenInfo[a]._solutionsLine[0][0]=d._childrenInfo[a]._solutionsLine[0][1],d._childrenInfo[a]._solutionsLine[0][1]=e):d._childrenInfo[a]._solutionsLine[0][0][1]>d._childrenInfo[a]._solutionsLine[0][1][1]?0<g[1]&&(e=d._childrenInfo[a]._solutionsLine[0][0],
d._childrenInfo[a]._solutionsLine[0][0]=d._childrenInfo[a]._solutionsLine[0][1],d._childrenInfo[a]._solutionsLine[0][1]=e):d._childrenInfo[a]._solutionsLine[0][0][1]<d._childrenInfo[a]._solutionsLine[0][1][1]?0>g[1]&&(e=d._childrenInfo[a]._solutionsLine[0][0],d._childrenInfo[a]._solutionsLine[0][0]=d._childrenInfo[a]._solutionsLine[0][1],d._childrenInfo[a]._solutionsLine[0][1]=e):d._childrenInfo[a]._solutionsLine[0][0][2]>d._childrenInfo[a]._solutionsLine[0][1][2]?0<g[2]&&(e=d._childrenInfo[a]._solutionsLine[0][0],
d._childrenInfo[a]._solutionsLine[0][0]=d._childrenInfo[a]._solutionsLine[0][1],d._childrenInfo[a]._solutionsLine[0][1]=e):d._childrenInfo[a]._solutionsLine[0][0][2]<d._childrenInfo[a]._solutionsLine[0][1][2]&&0>g[2]&&(e=d._childrenInfo[a]._solutionsLine[0][0],d._childrenInfo[a]._solutionsLine[0][0]=d._childrenInfo[a]._solutionsLine[0][1],d._childrenInfo[a]._solutionsLine[0][1]=e);d._childrenInfo[a]._originD=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])};
X.parser.prototype.reslice=function(a){var b=X.parser.createIJKVolume(a._data,a._dimensions,a._max);a._IJKVolume=b[0];a._IJKVolumeN=b[1];X.TIMER(this._classname+".reslice");a.hasLabelMap=null!=a._labelmap;a._colortable&&(a._colorTable=a._colortable._map);a.range=[0,0,0];a._RASCenter=[a._RASOrigin[0]+(a._RASDimensions[0]-1)/2,a._RASOrigin[1]+(a._RASDimensions[1]-1)/2,a._RASOrigin[2]+(a._RASDimensions[2]-1)/2];a._BBox=[Math.min(a._RASOrigin[0],a._RASOrigin[0]+a._RASDimensions[0]-1),Math.max(a._RASOrigin[0],
a._RASOrigin[0]+a._RASDimensions[0]-1),Math.min(a._RASOrigin[1],a._RASOrigin[1]+a._RASDimensions[1]-1),Math.max(a._RASOrigin[1],a._RASOrigin[1]+a._RASDimensions[1]-1),Math.min(a._RASOrigin[2],a._RASOrigin[2]+a._RASDimensions[2]-1),Math.max(a._RASOrigin[2],a._RASOrigin[2]+a._RASDimensions[2]-1)];a._childrenInfo=[{},{},{}];b=goog.vec.Vec3.createFloat32FromValues(a._RASCenter[0],a._RASCenter[1],a._RASCenter[2]);a._childrenInfo[0]._sliceOrigin=b;var c=goog.vec.Vec3.createFloat32FromValues(1,0,0);goog.vec.Vec3.normalize(c,
c);a._childrenInfo[0]._sliceNormal=c;var d=[1,0,0];a._childrenInfo[0]._color=d;this.updateSliceInfo(0,b,c,a);a._children[0]._children=Array(a._childrenInfo[0]._nb);b[0]=a._childrenInfo[0]._solutionsLine[0][0][0]+a._childrenInfo[0]._sliceDirection[0]*Math.floor(a._childrenInfo[0]._nb/2);b[1]=a._childrenInfo[0]._solutionsLine[0][0][1]+a._childrenInfo[0]._sliceDirection[1]*Math.floor(a._childrenInfo[0]._nb/2);b[2]=a._childrenInfo[0]._solutionsLine[0][0][2]+a._childrenInfo[0]._sliceDirection[2]*Math.floor(a._childrenInfo[0]._nb/
2);b=X.parser.reslice2(b,a._childrenInfo[0]._sliceXYSpacing,a._childrenInfo[0]._sliceNormal,a._childrenInfo[0]._color,a._BBox,a._IJKVolume,a,a.hasLabelMap,a._colorTable);a.hasLabelMap&&(b._labelmap=a._labelmap._children[0]._children[Math.floor(a._childrenInfo[0]._nb/2)]._texture);a._children[0]._children[Math.floor(a._childrenInfo[0]._nb/2)]=b;a._indexX=Math.floor(a._childrenInfo[0]._nb/2);a._indexXold=Math.floor(a._childrenInfo[0]._nb/2);b=goog.vec.Vec3.createFloat32FromValues(a._RASCenter[0],a._RASCenter[1],
a._RASCenter[2]);a._childrenInfo[1]._sliceOrigin=b;c=goog.vec.Vec3.createFloat32FromValues(0,1,0);goog.vec.Vec3.normalize(c,c);a._childrenInfo[1]._sliceNormal=c;d=[0,1,0];a._childrenInfo[1]._color=d;this.updateSliceInfo(1,b,c,a);a._children[1]._children=Array(a._childrenInfo[1]._nb);b[0]=a._childrenInfo[1]._solutionsLine[0][0][0]+a._childrenInfo[1]._sliceDirection[0]*Math.floor(a._childrenInfo[1]._nb/2);b[1]=a._childrenInfo[1]._solutionsLine[0][0][1]+a._childrenInfo[1]._sliceDirection[1]*Math.floor(a._childrenInfo[1]._nb/
2);b[2]=a._childrenInfo[1]._solutionsLine[0][0][2]+a._childrenInfo[1]._sliceDirection[2]*Math.floor(a._childrenInfo[1]._nb/2);b=X.parser.reslice2(b,a._childrenInfo[1]._sliceXYSpacing,a._childrenInfo[1]._sliceNormal,a._childrenInfo[1]._color,a._BBox,a._IJKVolume,a,a.hasLabelMap,a._colorTable);a.hasLabelMap&&(b._labelmap=a._labelmap._children[1]._children[Math.floor(a._childrenInfo[1]._nb/2)]._texture);a._children[1]._children[Math.floor(a._childrenInfo[1]._nb/2)]=b;a._indexY=Math.floor(a._childrenInfo[1]._nb/
2);a._indexYold=Math.floor(a._childrenInfo[1]._nb/2);b=goog.vec.Vec3.createFloat32FromValues(a._RASCenter[0],a._RASCenter[1],a._RASCenter[2]);a._childrenInfo[2]._sliceOrigin=b;c=goog.vec.Vec3.createFloat32FromValues(0,0,1);goog.vec.Vec3.normalize(c,c);a._childrenInfo[2]._sliceNormal=c;d=[0,.392,.804];a._childrenInfo[2]._color=d;this.updateSliceInfo(2,b,c,a);a._children[2]._children=Array(a._childrenInfo[2]._nb);b[0]=a._childrenInfo[2]._solutionsLine[0][0][0]+a._childrenInfo[2]._sliceDirection[0]*
Math.floor(a._childrenInfo[2]._nb/2);b[1]=a._childrenInfo[2]._solutionsLine[0][0][1]+a._childrenInfo[2]._sliceDirection[1]*Math.floor(a._childrenInfo[2]._nb/2);b[2]=a._childrenInfo[2]._solutionsLine[0][0][2]+a._childrenInfo[2]._sliceDirection[2]*Math.floor(a._childrenInfo[2]._nb/2);b=X.parser.reslice2(b,a._childrenInfo[2]._sliceXYSpacing,a._childrenInfo[2]._sliceNormal,a._childrenInfo[2]._color,a._BBox,a._IJKVolume,a,a.hasLabelMap,a._colorTable);a.hasLabelMap&&(b._labelmap=a._labelmap._children[2]._children[Math.floor(a._childrenInfo[2]._nb/
2)]._texture);a._children[2]._children[Math.floor(a._childrenInfo[2]._nb/2)]=b;a._indexZ=Math.floor(a._childrenInfo[2]._nb/2);a._indexZold=Math.floor(a._childrenInfo[2]._nb/2);X.TIMERSTOP(this._classname+".reslice");return a._IJKVolume};X.parserOFF=function(){X.parser.call(this);this._classname="parserOFF"};goog.inherits(X.parserOFF,X.parser);
X.parserOFF.prototype.parse=function(a,b,c,d){function e(){if(k===f)throw Error("End of file reached unexpectedly.");for(var a=k;a<f;++a)if(10===g[a]){var b=l.parseChars(g,k,a);k=a+1;return b}k=f;return l.parseChars(g,k,f-1)}X.TIMER(this._classname+".parse");this._data=c;var f=c.byteLength,g=this.scan("uchar",f);c=[];b._points=new X.triplets(f);b._normals=new X.triplets(f);d=b._points;for(var h=b._normals,k=0,l=this,m=e(),m=("OFF"===m?e():m).split(" "),n=m[0],m=m[1];n--;){var p=e(),p=p.split(" "),
q=parseFloat(p[0]),u=parseFloat(p[1]),p=parseFloat(p[2]);c.push([q,u,p])}for(;m--;)p=e(),p=p.split(" "),q=c[parseInt(p[1],10)],n=c[parseInt(p[2],10)],p=c[parseInt(p[3],10)],d.add(q[0],q[1],q[2]),d.add(n[0],n[1],n[2]),d.add(p[0],p[1],p[2]),q=new goog.math.Vec3(q[0],q[1],q[2]),n=new goog.math.Vec3(n[0],n[1],n[2]),p=new goog.math.Vec3(p[0],p[1],p[2]),n=goog.math.Vec3.cross(n.subtract(q),p.subtract(q)),n.normalize(),h.add(n.x,n.y,n.z),h.add(n.x,n.y,n.z),h.add(n.x,n.y,n.z);X.TIMERSTOP(this._classname+
".parse");c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};goog.exportSymbol("X.parserOFF",X.parserOFF);goog.exportSymbol("X.parserOFF.prototype.parse",X.parserOFF.prototype.parse);X.parserDCM=function(){X.parser.call(this);this._classname="parserDCM"};goog.inherits(X.parserDCM,X.parser);
X.parserDCM.prototype.parse=function(a,b,c,d){b.MRI={};b.MRI.loaded_files=0;this.parseStream(c,b);if(!goog.isDefAndNotNull(b._file.length)||b.slices.length==b._file.length){b.MRI.loaded_files=b._file.length;var e={};c={};for(d=0;d<b.slices.length;d++)e.hasOwnProperty(b.slices[d].series_instance_uid)||(e[b.slices[d].series_instance_uid]=[],c[b.slices[d].series_instance_uid]={}),c[b.slices[d].series_instance_uid].hasOwnProperty(b.slices[d].sop_instance_uid)||(c[b.slices[d].series_instance_uid][b.slices[d].sop_instance_uid]=
!0,e[b.slices[d].series_instance_uid].push(b.slices[d]));var f=Object.keys(e)[0];d=e[f];var g=d.length;c={};var h="image_position_patient";1==g?(h="image_position_patient",e[f][0].dist=0):d[0].image_position_patient[0]!=d[1].image_position_patient[0]||d[0].image_position_patient[1]!=d[1].image_position_patient[1]||d[0].image_position_patient[2]!=d[1].image_position_patient[2]?(h="image_position_patient",e=new goog.math.Vec3(d[0].image_orientation_patient[0],d[0].image_orientation_patient[1],d[0].image_orientation_patient[2]),
f=new goog.math.Vec3(d[0].image_orientation_patient[3],d[0].image_orientation_patient[4],d[0].image_orientation_patient[5]),e=goog.math.Vec3.cross(e,f),d.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,e)),d.sort(function(a,b){return a.dist-b.dist})):d[0].instance_number!=d[1].instance_number?(h="instance_number",d.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");
isNaN(d[0].pixel_spacing[0])&&(d[0].pixel_spacing[0]=1);isNaN(d[0].pixel_spacing[1])&&(d[0].pixel_spacing[1]=1);if(1<g)switch(h){case "image_position_patient":var k=d[0].image_position_patient,e=d[1].image_position_patient,f=e[0]-k[0],l=e[1]-k[1],m=e[2]-k[2];d[0].pixel_spacing[2]=Math.sqrt(f*f+l*l+m*m);break;case "instance_number":d[0].pixel_spacing[2]=1;break;default:window.console.log("Unkown ordering mode - returning: "+h)}else d[0].pixel_spacing[2]=1;e=1;switch(h){case "image_position_patient":var k=
d[0].image_position_patient,n=d[g-1].image_position_patient,f=n[0]-k[0],l=n[1]-k[1],m=n[2]-k[2],f=Math.sqrt(f*f+l*l+m*m),e=e+Math.round(f/d[0].pixel_spacing[2]);break;case "instance_number":e+=Math.abs(d[g-1].instance_number-d[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+h)}k=d[0].columns*d[0].rows;f=k*e;n=null;switch(d[0].bits_allocated){case 8:n=new Uint8Array(f);break;case 16:n=new Uint16Array(f);break;case 32:n=new Uint32Array(f);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b._spacing=
d[0].pixel_spacing;for(var p=0;p<g;p++){var q=d[p].data,f=0;switch(h){case "image_position_patient":f=d[p].image_position_patient[0]-d[0].image_position_patient[0];l=d[p].image_position_patient[1]-d[0].image_position_patient[1];m=d[p].image_position_patient[2]-d[0].image_position_patient[2];f=Math.sqrt(f*f+l*l+m*m)/d[0].pixel_spacing[2];break;case "instance_number":f=d[p].instance_number-d[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+h)}n.set(q,f*k)}c.data=
n;b._data=n;b._dimensions=[d[0].columns,d[0].rows,e];c.dimensions=b._dimensions;e=this.arrayMinMax(n);g=e[0];e=e[1];c.min=b._min=b._windowLow=g;c.max=b._max=b._windowHigh=e;-Infinity==b._lowerThreshold&&(b._lowerThreshold=g);Infinity==b._upperThreshold&&(b._upperThreshold=e);l=d[0].image_position_patient;g=goog.vec.Mat4.createFloat32();switch(h){case "image_position_patient":e=new goog.math.Vec3(d[0].image_orientation_patient[0],d[0].image_orientation_patient[1],d[0].image_orientation_patient[2]);
f=new goog.math.Vec3(d[0].image_orientation_patient[3],d[0].image_orientation_patient[4],d[0].image_orientation_patient[5]);e=goog.math.Vec3.cross(e,f);goog.vec.Mat4.setRowValues(g,0,-d[0].image_orientation_patient[0]*d[0].pixel_spacing[0],-d[0].image_orientation_patient[3]*d[0].pixel_spacing[1],-e.x*d[0].pixel_spacing[2],-l[0]);goog.vec.Mat4.setRowValues(g,1,-d[0].image_orientation_patient[1]*d[0].pixel_spacing[0],-d[0].image_orientation_patient[4]*d[0].pixel_spacing[1],-e.y*d[0].pixel_spacing[2],
-l[1]);goog.vec.Mat4.setRowValues(g,2,d[0].image_orientation_patient[2]*d[0].pixel_spacing[0],d[0].image_orientation_patient[5]*d[0].pixel_spacing[1],e.z*d[0].pixel_spacing[2],l[2]);goog.vec.Mat4.setRowValues(g,3,0,0,0,1);break;case "instance_number":goog.vec.Mat4.setRowValues(g,0,-1,0,0,-l[0]);goog.vec.Mat4.setRowValues(g,1,-0,-1,-0,-l[1]);goog.vec.Mat4.setRowValues(g,2,0,0,1,l[2]);goog.vec.Mat4.setRowValues(g,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+h)}c.IJKToRAS=
g;c.RASToIJK=goog.vec.Mat4.createFloat32();goog.vec.Mat4.invert(c.IJKToRAS,c.RASToIJK);h=goog.vec.Vec4.createFloat32FromValues(0,0,0,1);d=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(g,h,d);h=goog.vec.Vec4.createFloat32FromValues(1,1,1,1);e=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(g,h,e);c.RASSpacing=[e[0]-d[0],e[1]-d[1],e[2]-d[2]];d=X.parser.computeRASBBox(g,[b._dimensions[0],b._dimensions[1],b._dimensions[2]]);c.RASDimensions=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.RASOrigin=
[d[0],d[2],d[4]];b.create_(c);b._image=this.reslice(b)}c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};X.parserDCM.prototype.handleDefaults=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];var e=a[b++],f=(d&65280)>>8;a=e&255;e=(e&65280)>>8;d=c(d&255);d=c(f)+d;a=c(a);c=c(e)+a+d;d=parseInt(c,2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
X.parserDCM.prototype.parseStream=function(a,b){this._data=a;if("undefined"==typeof b.slices||null==b.slices)b.slices=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.scan("ushort",this._data.byteLength),e=66,f=null,g=null,h=null,k=null;e<d.length;)switch(f=d[e++],g=d[e++],h=d[e++],k=d[e++],"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==k&&(k=h),f){case 2:switch(g){case 16:for(var l=
"",f=f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(h);c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=X.parserDCM.prototype.handleDefaults(d,e,h,k)}break;case 40:switch(g){case 16:c.rows=d[e];e+=k/2;break;case 17:c.columns=d[e];e+=k/2;break;case 256:c.bits_allocated=d[e];e+=k/2;break;case 257:c.bits_stored=d[e];e+=k/2;break;case 2:c.number_of_images=d[e];e+=k/2;break;case 48:l="";for(f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,l+=String.fromCharCode(g),
l+=String.fromCharCode(h);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=X.parserDCM.prototype.handleDefaults(d,e,h,k)}break;case 32:switch(g){case 14:c.series_instance_uid="";for(f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,c.series_instance_uid+=String.fromCharCode(g),c.series_instance_uid+=String.fromCharCode(h);break;case 19:l="";for(f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(h);c.instance_number=
parseInt(l,10);break;case 50:l="";for(f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(h);l=l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(h);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;
default:e=X.parserDCM.prototype.handleDefaults(d,e,h,k)}break;case 65534:switch(g){default:k=0,e+=k/2}break;case 8:switch(g){case 24:c.sop_instance_uid="";for(f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,c.sop_instance_uid+=String.fromCharCode(g),c.sop_instance_uid+=String.fromCharCode(h);break;default:e=X.parserDCM.prototype.handleDefaults(d,e,h,k)}break;case 16:switch(g){case 8720:l="";for(f=0;f<k/2;f++)h=d[e++],g=h&255,h=(h&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(h);break;default:e=
X.parserDCM.prototype.handleDefaults(d,e,h,k)}break;default:e=X.parserDCM.prototype.handleDefaults(d,e,h,k)}switch(c.bits_allocated){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.jumpTo(this._data.byteLength-c.columns*c.rows*2);d=null;switch(c.bits_allocated){case 8:d=this.scan("uchar",c.columns*c.rows);break;case 16:d=this.scan("ushort",c.columns*c.rows);break;case 32:d=this.scan("uint",
c.columns*c.rows)}c.data=d;b.slices.push(c);return b};goog.exportSymbol("X.parserDCM",X.parserDCM);goog.exportSymbol("X.parserDCM.prototype.parse",X.parserDCM.prototype.parse);X.parserVTK=function(){X.parser.call(this);this._classname="parserVTK"};goog.inherits(X.parserVTK,X.parser);
X.parserVTK.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");d=b._points;var e=b._normals,f=new Uint8Array(c),g="";b._points=d=new X.triplets(c.byteLength);b._normals=e=new X.triplets(c.byteLength);c=0;for(var h=f.length;c<h;c+=32768)g+=this.parseChars(f,c,Math.min(c+32768,h));f=g.split("\n");g=f.length;this._unorderedNormals=this._unorderedPoints=null;this._geometries=[];this._objectType=X.displayable.types.TRIANGLES;this._normalsMode=this._pointDataMode=this._geometryMode=this._pointsMode=
!1;c=0;for(h=g%8;h--;)this.parseLine(f[c]),c++;for(h=.125*g^0;h--;)this.parseLine(f[c]),c++,this.parseLine(f[c]),c++,this.parseLine(f[c]),c++,this.parseLine(f[c]),c++,this.parseLine(f[c]),c++,this.parseLine(f[c]),c++,this.parseLine(f[c]),c++,this.parseLine(f[c]),c++;this.configure(d,e);b._type=this._objectType;X.TIMERSTOP(this._classname+".parse");d=new X.event.ModifiedEvent;d._object=b;d._container=a;this.dispatchEvent(d)};
X.parserVTK.prototype.parseLine=function(a){a=a.replace(/^\s+|\s+$/g,"");a=a.split(" ");var b=a.length,c=a[0];switch(c){case "POINTS":this._pointsMode=!0;this._pointDataMode=this._geometryMode=!1;a=parseInt(a[1],10);this._unorderedPoints=new X.triplets(3*a);this._unorderedNormals=new X.triplets(3*a);return;case "VERTICES":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;a=parseInt(a[1],10);if(3<=a)this._objectType=X.displayable.types.TRIANGLES;else if(1==a)this._objectType=X.displayable.types.POINTS;
else throw Error("This VTK file is not supported!");this._geometries=[];return;case "TRIANGLE_STRIPS":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;this._objectType=X.displayable.types.TRIANGLE_STRIPS;this._geometries=[];return;case "LINES":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;this._objectType=X.displayable.types.LINES;this._geometries=[];return;case "POLYGONS":this._geometryMode=!0;this._pointDataMode=this._pointsMode=!1;this._objectType=X.displayable.types.POLYGONS;
this._geometries=[];return;case "POINT_DATA":this._pointDataMode=!0;this._geometryMode=this._pointsMode=!1;return}if(this._pointsMode)if(1==b||isNaN(parseFloat(c)))this._pointsMode=!1;else{if(3<=b){var c=parseFloat(a[0]),d=parseFloat(a[1]),e=parseFloat(a[2]);this._unorderedPoints.add(c,d,e)}6<=b&&(c=parseFloat(a[3]),d=parseFloat(a[4]),e=parseFloat(a[5]),this._unorderedPoints.add(c,d,e));9<=b&&(b=parseFloat(a[6]),c=parseFloat(a[7]),a=parseFloat(a[8]),this._unorderedPoints.add(b,c,a))}else this._geometryMode?
1==b||isNaN(parseFloat(c))?this._geometryMode=!1:(a=a.slice(1),this._geometries.push(a)):this._pointDataMode&&("NORMALS"==c?this._normalsMode=!0:1==b||isNaN(parseFloat(c))?this._normalsMode=this._pointDataMode=!1:this._normalsMode&&(3<=b&&(c=parseFloat(a[0]),d=parseFloat(a[1]),e=parseFloat(a[2]),this._unorderedNormals.add(c,d,e)),6<=b&&(c=parseFloat(a[3]),d=parseFloat(a[4]),e=parseFloat(a[5]),this._unorderedNormals.add(c,d,e)),9<=b&&(b=parseFloat(a[6]),c=parseFloat(a[7]),a=parseFloat(a[8]),this._unorderedNormals.add(b,
c,a))))};
X.parserVTK.prototype.configure=function(a,b){var c=this._unorderedPoints,d=this._unorderedNormals,e=d.length,f=this._geometries.length,g=f;do{var h=this._geometries[f-g],k=h.length,l;for(l=0;l<k&&!(this._objectType==X.displayable.types.LINES&&l+1>=k);l++){var m=parseInt(h[l],10),n=c.get(m);a.add(n[0],n[1],n[2]);var p=m,q=n;this._objectType==X.displayable.types.LINES?(p=parseInt(h[l+1],10),q=c.get(p),a.add(q[0],q[1],q[2])):this._objectType==X.displayable.types.TRIANGLE_STRIPS&&(0!=l&&l!=k-1||a.add(n[0],
n[1],n[2]));m<e?(q=d.get(m),b.add(q[0],q[1],q[2]),this._objectType==X.displayable.types.LINES?(p=d.get(p),b.add(p[0],p[1],p[2])):this._objectType==X.displayable.types.TRIANGLE_STRIPS&&(0!=l&&l!=k-1||b.add(q[0],q[1],q[2]))):(p=new goog.math.Vec3(n[0],n[1],n[2]),p.normalize(),b.add(p.x,p.y,p.z),this._objectType==X.displayable.types.LINES?(p=new goog.math.Vec3(q[0],q[1],q[2]),p.normalize(),b.add(p.x,p.y,p.z)):this._objectType==X.displayable.types.TRIANGLE_STRIPS&&(0!=l&&l!=k-1||b.add(p.x,p.y,p.z)))}g--}while(0<
g)};goog.exportSymbol("X.parserVTK",X.parserVTK);goog.exportSymbol("X.parserVTK.prototype.parse",X.parserVTK.prototype.parse);X.parserFSM=function(){X.parser.call(this);this._classname="parserFSM";this._littleEndian=!1};goog.inherits(X.parserFSM,X.parser);
X.parserFSM.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");this._data=c;var e=b._points,f=b._normals;b._pointIndices=[];var g=b._pointIndices;c=0;do d=this.scan("uchar"),c++;while(200>c&&10!=d);this.scan("uchar");f=this.scan("uint");c=this.scan("uint");var h=this.scan("float",3*f);d=this.scan("uint",3*c);var k=new Uint32Array(f),l=new Float32Array(9*c);b._points=e=new X.triplets(9*c);b._normals=f=new X.triplets(9*c);var m;for(m=0;m<c;m++){var n=3*m,p=d[n],q=d[n+1],u=d[n+2];g.push(p);
g.push(q);g.push(u);k[p]+=1;k[q]+=1;k[u]+=1;var n=3*p,t=3*q,C=3*u,B=h[n],y=h[n+1],D=h[n+2],A=h[t],F=h[t+1],I=h[t+2],q=h[C],u=h[C+1],p=h[C+2];e.add(B,y,D);e.add(A,F,I);e.add(q,u,p);B=new goog.math.Vec3(B,y,D);A=new goog.math.Vec3(A,F,I);q=new goog.math.Vec3(q,u,p);u=A.clone().subtract(B);q=q.clone().subtract(B);q=goog.math.Vec3.cross(u,q).normalize();l[n]+=q.x;l[n+1]+=q.y;l[n+2]+=q.z;l[t]+=q.x;l[t+1]+=q.y;l[t+2]+=q.z;l[C]+=q.x;l[C+1]+=q.y;l[C+2]+=q.z}for(m=0;m<c;m++)n=3*m,p=d[n],q=d[n+1],u=d[n+2],
n=3*p,t=3*q,C=3*u,g=l[t],h=l[t+1],A=l[t+2],t=l[C],e=l[C+1],C=l[C+2],n=new goog.math.Vec3(l[n],l[n+1],l[n+2]),g=new goog.math.Vec3(g,h,A),C=new goog.math.Vec3(t,e,C),n=n.scale(1/k[p]).normalize(),g=g.scale(1/k[q]).normalize(),C=C.scale(1/k[u]).normalize(),f.add(n.x,n.y,n.z),f.add(g.x,g.y,g.z),f.add(C.x,C.y,C.z);c=this.scan("uchar",this._data.byteLength-this._dataPointer);d=null;for(n=0;n<c.length;n++)if(99==c[n]&&114==c[n+1]&&97==c[n+2]&&115==c[n+3]){for(f=d=n+9;10!=c[n]&&n<c.length;)f++,n++;d=this.parseChars(c.subarray(d,
f)).split(" ");break}d&&(b._transform.translateX(parseFloat(d[0])),b._transform.translateY(parseFloat(d[1])),b._transform.translateZ(parseFloat(d[2])));b._type=X.displayable.types.TRIANGLES;X.TIMERSTOP(this._classname+".parse");c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};goog.exportSymbol("X.parserFSM",X.parserFSM);goog.exportSymbol("X.parserFSM.prototype.parse",X.parserFSM.prototype.parse);var USE_TYPEDARRAY=!0;var Zlib={CRC32:{}},ZLIB_CRC32_EXPORT=!1;Zlib.CRC32.calc=function(a,b,c){return Zlib.CRC32.update(a,0,b,c)};
Zlib.CRC32.update=function(a,b,c,d){var e=Zlib.CRC32.Table,f="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(f=d&7;f--;++c)b=b>>>8^e[(b^a[c])&255];for(f=d>>3;f--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0};
Zlib.CRC32.Table=function(a){return USE_TYPEDARRAY?new Uint32Array(a):a}([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,
1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,
1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,
1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,
570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,
3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);ZLIB_CRC32_EXPORT&&(goog.exportSymbol("Zlib.CRC32",Zlib.CRC32),goog.exportSymbol("Zlib.CRC32.calc",Zlib.CRC32.calc),goog.exportSymbol("Zlib.CRC32.update",Zlib.CRC32.update));Zlib.Huffman={};Zlib.Huffman.buildHuffmanTable=function(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,k,l,m,n,p;for(n=0;n<b;++n)a[n]>c&&(c=a[n]),a[n]<d&&(d=a[n]);e=1<<c;f=new (USE_TYPEDARRAY?Uint32Array:Array)(e);g=1;h=0;for(k=2;g<=c;){for(n=0;n<b;++n)if(a[n]===g){l=0;m=h;for(p=0;p<g;++p)l=l<<1|m&1,m>>=1;for(p=l;p<e;p+=k)f[p]=g<<16|n;++h}++g;h<<=1;k<<=1}return[f,c,d]};var ZLIB_RAW_INFLATE_EXPORT=!1,ZLIB_RAW_INFLATE_BUFFER_SIZE=32768;
Zlib.RawInflate=function(a,b){this.blocks=[];this.bufferSize=ZLIB_RAW_INFLATE_BUFFER_SIZE;this.bitsbuflen=this.bitsbuf=this.ip=this.totalpos=0;this.input=USE_TYPEDARRAY?new Uint8Array(a):a;this.bfinal=!1;this.bufferType=Zlib.RawInflate.BufferType.ADAPTIVE;this.resize=!1;if(b||!(b={}))b.index&&(this.ip=b.index),b.bufferSize&&(this.bufferSize=b.bufferSize),b.bufferType&&(this.bufferType=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.bufferType){case Zlib.RawInflate.BufferType.BLOCK:this.op=
Zlib.RawInflate.MaxBackwardLength;this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.RawInflate.MaxBackwardLength+this.bufferSize+Zlib.RawInflate.MaxCopyLength);break;case Zlib.RawInflate.BufferType.ADAPTIVE:this.op=0;this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(this.bufferSize);this.expandBuffer=this.expandBufferAdaptive;this.concatBuffer=this.concatBufferDynamic;this.decodeHuffman=this.decodeHuffmanAdaptive;break;default:throw Error("invalid inflate mode");}};
Zlib.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1};Zlib.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()};Zlib.RawInflate.MaxBackwardLength=32768;Zlib.RawInflate.MaxCopyLength=258;Zlib.RawInflate.Order=function(a){return USE_TYPEDARRAY?new Uint16Array(a):a}([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);
Zlib.RawInflate.LengthCodeTable=function(a){return USE_TYPEDARRAY?new Uint16Array(a):a}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]);Zlib.RawInflate.LengthExtraTable=function(a){return USE_TYPEDARRAY?new Uint8Array(a):a}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]);
Zlib.RawInflate.DistCodeTable=function(a){return USE_TYPEDARRAY?new Uint16Array(a):a}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);Zlib.RawInflate.DistExtraTable=function(a){return USE_TYPEDARRAY?new Uint8Array(a):a}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);
Zlib.RawInflate.FixedLiteralLengthTable=function(a){return a}(function(){var a=new (USE_TYPEDARRAY?Uint8Array:Array)(288),b,c;b=0;for(c=a.length;b<c;++b)a[b]=143>=b?8:255>=b?9:279>=b?7:8;return(0,Zlib.Huffman.buildHuffmanTable)(a)}());Zlib.RawInflate.FixedDistanceTable=function(a){return a}(function(){var a=new (USE_TYPEDARRAY?Uint8Array:Array)(30),b,c;b=0;for(c=a.length;b<c;++b)a[b]=5;return(0,Zlib.Huffman.buildHuffmanTable)(a)}());
Zlib.RawInflate.prototype.parseBlock=function(){var a=this.readBits(3);a&1&&(this.bfinal=!0);a>>>=1;switch(a){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw Error("unknown BTYPE: "+a);}};
Zlib.RawInflate.prototype.readBits=function(a){for(var b=this.bitsbuf,c=this.bitsbuflen,d=this.input,e=this.ip,f;c<a;){f=d[e++];if(void 0===f)throw Error("input buffer is broken");b|=f<<c;c+=8}f=b&(1<<a)-1;this.bitsbuf=b>>>a;this.bitsbuflen=c-a;this.ip=e;return f};
Zlib.RawInflate.prototype.readCodeByTable=function(a){var b=this.bitsbuf,c=this.bitsbuflen,d=this.input,e=this.ip,f=a[0];a=a[1];for(var g;c<a;){g=d[e++];if(void 0===g)throw Error("input buffer is broken");b|=g<<c;c+=8}d=f[b&(1<<a)-1];f=d>>>16;this.bitsbuf=b>>f;this.bitsbuflen=c-f;this.ip=e;return d&65535};
Zlib.RawInflate.prototype.parseUncompressedBlock=function(){var a=this.input,b=this.ip,c=this.output,d=this.op,e,f,g,h=c.length;this.bitsbuflen=this.bitsbuf=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");f=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");f|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");g=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");
if(f===~(g|e<<8))throw Error("invalid uncompressed block header: length verify");if(b+f>a.length)throw Error("input buffer is broken");switch(this.bufferType){case Zlib.RawInflate.BufferType.BLOCK:for(;d+f>c.length;){e=h-d;f-=e;if(USE_TYPEDARRAY)c.set(a.subarray(b,b+e),d),d+=e,b+=e;else for(;e--;)c[d++]=a[b++];this.op=d;c=this.expandBuffer();d=this.op}break;case Zlib.RawInflate.BufferType.ADAPTIVE:for(;d+f>c.length;)c=this.expandBuffer({fixRatio:2});break;default:throw Error("invalid inflate mode");
}if(USE_TYPEDARRAY)c.set(a.subarray(b,b+f),d),d+=f,b+=f;else for(;f--;)c[d++]=a[b++];this.ip=b;this.op=d;this.output=c};Zlib.RawInflate.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(Zlib.RawInflate.FixedLiteralLengthTable,Zlib.RawInflate.FixedDistanceTable)};
Zlib.RawInflate.prototype.parseDynamicHuffmanBlock=function(){function a(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=this.readCodeByTable(b),d){case 16:for(d=3+this.readBits(2);d--;)c[f++]=e;break;case 17:for(d=3+this.readBits(3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+this.readBits(7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var b=this.readBits(5)+257,c=this.readBits(5)+1,d=this.readBits(4)+4,e=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.RawInflate.Order.length),f;for(f=0;f<d;++f)e[Zlib.RawInflate.Order[f]]=
this.readBits(3);d=(0,Zlib.Huffman.buildHuffmanTable)(e);e=new (USE_TYPEDARRAY?Uint8Array:Array)(b);f=new (USE_TYPEDARRAY?Uint8Array:Array)(c);this.decodeHuffman((0,Zlib.Huffman.buildHuffmanTable)(a.call(this,b,d,e)),(0,Zlib.Huffman.buildHuffmanTable)(a.call(this,c,d,f)))};
Zlib.RawInflate.prototype.decodeHuffman=function(a,b){var c=this.output,d=this.op;this.currentLitlenTable=a;for(var e=c.length-Zlib.RawInflate.MaxCopyLength,f,g,h;256!==(f=this.readCodeByTable(a));)if(256>f)d>=e&&(this.op=d,c=this.expandBuffer(),d=this.op),c[d++]=f;else for(f-=257,h=Zlib.RawInflate.LengthCodeTable[f],0<Zlib.RawInflate.LengthExtraTable[f]&&(h+=this.readBits(Zlib.RawInflate.LengthExtraTable[f])),f=this.readCodeByTable(b),g=Zlib.RawInflate.DistCodeTable[f],0<Zlib.RawInflate.DistExtraTable[f]&&
(g+=this.readBits(Zlib.RawInflate.DistExtraTable[f])),d>=e&&(this.op=d,c=this.expandBuffer(),d=this.op);h--;)c[d]=c[d++-g];for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=d};
Zlib.RawInflate.prototype.decodeHuffmanAdaptive=function(a,b){var c=this.output,d=this.op;this.currentLitlenTable=a;for(var e=c.length,f,g,h;256!==(f=this.readCodeByTable(a));)if(256>f)d>=e&&(c=this.expandBuffer(),e=c.length),c[d++]=f;else for(f-=257,h=Zlib.RawInflate.LengthCodeTable[f],0<Zlib.RawInflate.LengthExtraTable[f]&&(h+=this.readBits(Zlib.RawInflate.LengthExtraTable[f])),f=this.readCodeByTable(b),g=Zlib.RawInflate.DistCodeTable[f],0<Zlib.RawInflate.DistExtraTable[f]&&(g+=this.readBits(Zlib.RawInflate.DistExtraTable[f])),
d+h>e&&(c=this.expandBuffer(),e=c.length);h--;)c[d]=c[d++-g];for(;8<=this.bitsbuflen;)this.bitsbuflen-=8,this.ip--;this.op=d};
Zlib.RawInflate.prototype.expandBuffer=function(a){a=new (USE_TYPEDARRAY?Uint8Array:Array)(this.op-Zlib.RawInflate.MaxBackwardLength);var b=this.op-Zlib.RawInflate.MaxBackwardLength,c,d,e=this.output;if(USE_TYPEDARRAY)a.set(e.subarray(Zlib.RawInflate.MaxBackwardLength,a.length));else for(c=0,d=a.length;c<d;++c)a[c]=e[c+Zlib.RawInflate.MaxBackwardLength];this.blocks.push(a);this.totalpos+=a.length;if(USE_TYPEDARRAY)e.set(e.subarray(b,b+Zlib.RawInflate.MaxBackwardLength));else for(c=0;c<Zlib.RawInflate.MaxBackwardLength;++c)e[c]=
e[b+c];this.op=Zlib.RawInflate.MaxBackwardLength;return e};Zlib.RawInflate.prototype.expandBufferAdaptive=function(a){var b=this.input.length/this.ip+1|0,c=this.input,d=this.output;a&&("number"===typeof a.fixRatio&&(b=a.fixRatio),"number"===typeof a.addRatio&&(b+=a.addRatio));2>b?(a=(c.length-this.ip)/this.currentLitlenTable[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;USE_TYPEDARRAY?(a=new Uint8Array(a),a.set(d)):a=d;return this.output=a};
Zlib.RawInflate.prototype.concatBuffer=function(){var a=0,b=this.output,c=this.blocks,d,e=new (USE_TYPEDARRAY?Uint8Array:Array)(this.totalpos+(this.op-Zlib.RawInflate.MaxBackwardLength)),f,g,h,k;if(0===c.length)return USE_TYPEDARRAY?this.output.subarray(Zlib.RawInflate.MaxBackwardLength,this.op):this.output.slice(Zlib.RawInflate.MaxBackwardLength,this.op);f=0;for(g=c.length;f<g;++f)for(d=c[f],h=0,k=d.length;h<k;++h)e[a++]=d[h];f=Zlib.RawInflate.MaxBackwardLength;for(g=this.op;f<g;++f)e[a++]=b[f];
this.blocks=[];return this.buffer=e};Zlib.RawInflate.prototype.concatBufferDynamic=function(){var a,b=this.op;USE_TYPEDARRAY?this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b):(this.output.length>b&&(this.output.length=b),a=this.output);return this.buffer=a};ZLIB_RAW_INFLATE_EXPORT&&(goog.exportSymbol("Zlib.RawInflate",Zlib.RawInflate),goog.exportSymbol("Zlib.RawInflate.prototype.decompress",Zlib.RawInflate.prototype.decompress));Zlib.Heap=function(a){this.buffer=new (USE_TYPEDARRAY?Uint16Array:Array)(2*a);this.length=0};Zlib.Heap.prototype.getParent=function(a){return 2*((a-2)/4|0)};Zlib.Heap.prototype.getChild=function(a){return 2*a+2};Zlib.Heap.prototype.push=function(a,b){var c,d,e=this.buffer,f;c=this.length;e[this.length++]=b;for(e[this.length++]=a;0<c;)if(d=this.getParent(c),e[c]>e[d])f=e[c],e[c]=e[d],e[d]=f,f=e[c+1],e[c+1]=e[d+1],e[d+1]=f,c=d;else break;return this.length};
Zlib.Heap.prototype.pop=function(){var a,b,c=this.buffer,d,e,f;b=c[0];a=c[1];this.length-=2;c[0]=c[this.length];c[1]=c[this.length+1];for(f=0;;){e=this.getChild(f);if(e>=this.length)break;e+2<this.length&&c[e+2]>c[e]&&(e+=2);if(c[e]>c[f])d=c[f],c[f]=c[e],c[e]=d,d=c[f+1],c[f+1]=c[e+1],c[e+1]=d;else break;f=e}return{index:a,value:b,length:this.length}};Zlib.BitStream=function(a,b){this.index="number"===typeof b?b:0;this.bitindex=0;this.buffer=a instanceof(USE_TYPEDARRAY?Uint8Array:Array)?a:new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.BitStream.DefaultBlockSize);if(2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()};Zlib.BitStream.DefaultBlockSize=32768;
Zlib.BitStream.prototype.expandBuffer=function(){var a=this.buffer,b,c=a.length,d=new (USE_TYPEDARRAY?Uint8Array:Array)(c<<1);if(USE_TYPEDARRAY)d.set(a);else for(b=0;b<c;++b)d[b]=a[b];return this.buffer=d};
Zlib.BitStream.prototype.writeBits=function(a,b,c){var d=this.buffer,e=this.index,f=this.bitindex,g=d[e];c&&1<b&&(a=8<b?(Zlib.BitStream.ReverseTable[a&255]<<24|Zlib.BitStream.ReverseTable[a>>>8&255]<<16|Zlib.BitStream.ReverseTable[a>>>16&255]<<8|Zlib.BitStream.ReverseTable[a>>>24&255])>>32-b:Zlib.BitStream.ReverseTable[a]>>8-b);if(8>b+f)g=g<<b|a,f+=b;else for(c=0;c<b;++c)g=g<<1|a>>b-c-1&1,8===++f&&(f=0,d[e++]=Zlib.BitStream.ReverseTable[g],g=0,e===d.length&&(d=this.expandBuffer()));d[e]=g;this.buffer=
d;this.bitindex=f;this.index=e};Zlib.BitStream.prototype.finish=function(){var a=this.buffer,b=this.index;0<this.bitindex&&(a[b]<<=8-this.bitindex,a[b]=Zlib.BitStream.ReverseTable[a[b]],b++);USE_TYPEDARRAY?a=a.subarray(0,b):a.length=b;return a};Zlib.BitStream.ReverseTable=function(a){return a}(function(){var a=new (USE_TYPEDARRAY?Uint8Array:Array)(256),b;for(b=0;256>b;++b){for(var c=b,d=b,e=d,f=7,d=d>>>1;d;d>>>=1)e<<=1,e|=d&1,--f;a[c]=(e<<f&255)>>>0}return a}());var ZLIB_RAWDEFLATE_EXPORT=!1;
Zlib.RawDeflate=function(a,b){this.compressionType=Zlib.RawDeflate.CompressionType.DYNAMIC;this.lazy=0;this.input=a;this.op=0;b&&(b.lazy&&(this.lazy=b.lazy),"number"===typeof b.compressionType&&(this.compressionType=b.compressionType),b.outputBuffer&&(this.output=USE_TYPEDARRAY&&b.outputBuffer instanceof Array?new Uint8Array(b.outputBuffer):b.outputBuffer),"number"===typeof b.outputIndex&&(this.op=b.outputIndex));this.output||(this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(32768))};
Zlib.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3};Zlib.RawDeflate.Lz77MinLength=3;Zlib.RawDeflate.Lz77MaxLength=258;Zlib.RawDeflate.WindowSize=32768;Zlib.RawDeflate.MaxCodeLength=16;Zlib.RawDeflate.HUFMAX=286;
Zlib.RawDeflate.FixedHuffmanTable=function(){var a=[],b;for(b=0;288>b;b++)switch(!0){case 143>=b:a.push([b+48,8]);break;case 255>=b:a.push([b-144+400,9]);break;case 279>=b:a.push([b-256+0,7]);break;case 287>=b:a.push([b-280+192,8]);break;default:throw"invalid literal: "+b;}return a}();
Zlib.RawDeflate.prototype.compress=function(){var a,b,c,d=this.input;switch(this.compressionType){case Zlib.RawDeflate.CompressionType.NONE:b=0;for(c=d.length;b<c;)a=USE_TYPEDARRAY?d.subarray(b,b+65535):d.slice(b,b+65535),b+=a.length,this.makeNocompressBlock(a,b===c);break;case Zlib.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(d,!0);this.op=this.output.length;break;case Zlib.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(d,!0);this.op=this.output.length;
break;default:throw"invalid compression type";}return this.output};
Zlib.RawDeflate.prototype.makeNocompressBlock=function(a,b){var c,d,e=this.output,f=this.op;if(USE_TYPEDARRAY){for(e=new Uint8Array(this.output.buffer);e.length<=f+a.length+5;)e=new Uint8Array(e.length<<1);e.set(this.output)}c=Zlib.RawDeflate.CompressionType.NONE;e[f++]=(b?1:0)|c<<1;c=a.length;d=~c+65536&65535;e[f++]=c&255;e[f++]=c>>>8&255;e[f++]=d&255;e[f++]=d>>>8&255;if(USE_TYPEDARRAY)e.set(a,f),f+=a.length,e=e.subarray(0,f);else{c=0;for(d=a.length;c<d;++c)e[f++]=a[c];e.length=f}this.op=f;return this.output=
e};Zlib.RawDeflate.prototype.makeFixedHuffmanBlock=function(a,b){var c=new Zlib.BitStream(new Uint8Array(this.output.buffer),this.op),d;d=Zlib.RawDeflate.CompressionType.FIXED;c.writeBits(b?1:0,1,!0);c.writeBits(d,2,!0);d=this.lz77(a);this.fixedHuffman(d,c);return c.finish()};
Zlib.RawDeflate.prototype.makeDynamicHuffmanBlock=function(a,b){var c=new Zlib.BitStream(new Uint8Array(this.output),this.op),d,e,f,g,h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k,l,m,n,p,q,u=Array(19),t;d=Zlib.RawDeflate.CompressionType.DYNAMIC;c.writeBits(b?1:0,1,!0);c.writeBits(d,2,!0);d=this.lz77(a);k=this.getLengths_(this.freqsLitLen,15);l=this.getCodesFromLengths_(k);m=this.getLengths_(this.freqsDist,7);n=this.getCodesFromLengths_(m);for(e=286;257<e&&0===k[e-1];e--);for(f=30;1<f&&0===
m[f-1];f--);p=this.getTreeSymbols_(e,k,f,m);q=this.getLengths_(p.freqs,7);for(t=0;19>t;t++)u[t]=q[h[t]];for(g=19;4<g&&0===u[g-1];g--);h=this.getCodesFromLengths_(q);c.writeBits(e-257,5,!0);c.writeBits(f-1,5,!0);c.writeBits(g-4,4,!0);for(t=0;t<g;t++)c.writeBits(u[t],3,!0);t=0;for(u=p.codes.length;t<u;t++)if(e=p.codes[t],c.writeBits(h[e],q[e],!0),16<=e){t++;switch(e){case 16:e=2;break;case 17:e=3;break;case 18:e=7;break;default:throw"invalid code: "+e;}c.writeBits(p.codes[t],e,!0)}this.dynamicHuffman(d,
[l,k],[n,m],c);return c.finish()};Zlib.RawDeflate.prototype.dynamicHuffman=function(a,b,c,d){var e,f,g,h,k;g=b[0];b=b[1];h=c[0];k=c[1];c=0;for(e=a.length;c<e;++c)if(f=a[c],d.writeBits(g[f],b[f],!0),256<f)d.writeBits(a[++c],a[++c],!0),f=a[++c],d.writeBits(h[f],k[f],!0),d.writeBits(a[++c],a[++c],!0);else if(256===f)break;return d};
Zlib.RawDeflate.prototype.fixedHuffman=function(a,b){var c,d,e;c=0;for(d=a.length;c<d;c++)if(e=a[c],Zlib.BitStream.prototype.writeBits.apply(b,Zlib.RawDeflate.FixedHuffmanTable[e]),256<e)b.writeBits(a[++c],a[++c],!0),b.writeBits(a[++c],5),b.writeBits(a[++c],a[++c],!0);else if(256===e)break;return b};Zlib.RawDeflate.Lz77Match=function(a,b){this.length=a;this.backwardDistance=b};
Zlib.RawDeflate.Lz77Match.LengthCodeTable=function(a){return USE_TYPEDARRAY?new Uint32Array(a):a}(function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,
a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];
default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|d[1]<<16|d[0];return b}());
Zlib.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(a){switch(!0){case 1===a:a=[0,a-1,0];break;case 2===a:a=[1,a-2,0];break;case 3===a:a=[2,a-3,0];break;case 4===a:a=[3,a-4,0];break;case 6>=a:a=[4,a-5,1];break;case 8>=a:a=[5,a-7,1];break;case 12>=a:a=[6,a-9,2];break;case 16>=a:a=[7,a-13,2];break;case 24>=a:a=[8,a-17,3];break;case 32>=a:a=[9,a-25,3];break;case 48>=a:a=[10,a-33,4];break;case 64>=a:a=[11,a-49,4];break;case 96>=a:a=[12,a-65,5];break;case 128>=a:a=[13,a-97,5];break;case 192>=
a:a=[14,a-129,6];break;case 256>=a:a=[15,a-193,6];break;case 384>=a:a=[16,a-257,7];break;case 512>=a:a=[17,a-385,7];break;case 768>=a:a=[18,a-513,8];break;case 1024>=a:a=[19,a-769,8];break;case 1536>=a:a=[20,a-1025,9];break;case 2048>=a:a=[21,a-1537,9];break;case 3072>=a:a=[22,a-2049,10];break;case 4096>=a:a=[23,a-3073,10];break;case 6144>=a:a=[24,a-4097,11];break;case 8192>=a:a=[25,a-6145,11];break;case 12288>=a:a=[26,a-8193,12];break;case 16384>=a:a=[27,a-12289,12];break;case 24576>=a:a=[28,a-16385,
13];break;case 32768>=a:a=[29,a-24577,13];break;default:throw"invalid distance";}return a};Zlib.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var a=this.backwardDistance,b=[],c=0,d;d=Zlib.RawDeflate.Lz77Match.LengthCodeTable[this.length];b[c++]=d&65535;b[c++]=d>>16&255;b[c++]=d>>24;d=this.getDistanceCode_(a);b[c++]=d[0];b[c++]=d[1];b[c++]=d[2];return b};
Zlib.RawDeflate.prototype.lz77=function(a){function b(a,b){var c=a.toLz77Array(),d,e;d=0;for(e=c.length;d<e;++d)m[n++]=c[d];q[c[0]]++;u[c[3]]++;p=a.length+b-1;l=null}var c,d,e,f,g,h={},k=Zlib.RawDeflate.WindowSize,l,m=USE_TYPEDARRAY?new Uint16Array(2*a.length):[],n=0,p=0,q=new (USE_TYPEDARRAY?Uint32Array:Array)(286),u=new (USE_TYPEDARRAY?Uint32Array:Array)(30),t=this.lazy;if(!USE_TYPEDARRAY){for(e=0;285>=e;)q[e++]=0;for(e=0;29>=e;)u[e++]=0}q[256]=1;c=0;for(d=a.length;c<d;++c){e=g=0;for(f=Zlib.RawDeflate.Lz77MinLength;e<
f&&c+e!==d;++e)g=g<<8|a[c+e];void 0===h[g]&&(h[g]=[]);e=h[g];if(!(0<p--)){for(;0<e.length&&c-e[0]>k;)e.shift();if(c+Zlib.RawDeflate.Lz77MinLength>=d){l&&b(l,-1);e=0;for(f=d-c;e<f;++e)g=a[c+e],m[n++]=g,++q[g];break}0<e.length?(f=this.searchLongestMatch_(a,c,e),l?l.length<f.length?(g=a[c-1],m[n++]=g,++q[g],b(f,0)):b(l,-1):f.length<t?l=f:b(f,0)):l?b(l,-1):(g=a[c],m[n++]=g,++q[g])}e.push(c)}m[n++]=256;q[256]++;this.freqsLitLen=q;this.freqsDist=u;return USE_TYPEDARRAY?m.subarray(0,n):m};
Zlib.RawDeflate.prototype.searchLongestMatch_=function(a,b,c){var d,e,f=0,g,h,k,l=a.length;h=0;k=c.length;a:for(;h<k;h++){d=c[k-h-1];g=Zlib.RawDeflate.Lz77MinLength;if(f>Zlib.RawDeflate.Lz77MinLength){for(g=f;g>Zlib.RawDeflate.Lz77MinLength;g--)if(a[d+g-1]!==a[b+g-1])continue a;g=f}for(;g<Zlib.RawDeflate.Lz77MaxLength&&b+g<l&&a[d+g]===a[b+g];)++g;g>f&&(e=d,f=g);if(g===Zlib.RawDeflate.Lz77MaxLength)break}return new Zlib.RawDeflate.Lz77Match(f,b-e)};
Zlib.RawDeflate.prototype.getTreeSymbols_=function(a,b,c,d){var e=new (USE_TYPEDARRAY?Uint32Array:Array)(a+c),f,g,h=new (USE_TYPEDARRAY?Uint32Array:Array)(316),k=new (USE_TYPEDARRAY?Uint8Array:Array)(19);for(f=g=0;f<a;f++)e[g++]=b[f];for(f=0;f<c;f++)e[g++]=d[f];if(!USE_TYPEDARRAY)for(f=0,b=k.length;f<b;++f)k[f]=0;f=c=0;for(b=e.length;f<b;f+=g){for(g=1;f+g<b&&e[f+g]===e[f];++g);a=g;if(0===e[f])if(3>a)for(;0<a--;)h[c++]=0,k[0]++;else for(;0<a;)d=138>a?a:138,d>a-3&&d<a&&(d=a-3),10>=d?(h[c++]=17,h[c++]=
d-3,k[17]++):(h[c++]=18,h[c++]=d-11,k[18]++),a-=d;else if(h[c++]=e[f],k[e[f]]++,a--,3>a)for(;0<a--;)h[c++]=e[f],k[e[f]]++;else for(;0<a;)d=6>a?a:6,d>a-3&&d<a&&(d=a-3),h[c++]=16,h[c++]=d-3,k[16]++,a-=d}return{codes:USE_TYPEDARRAY?h.subarray(0,c):h.slice(0,c),freqs:k}};
Zlib.RawDeflate.prototype.getLengths_=function(a,b){var c=a.length,d=new Zlib.Heap(2*Zlib.RawDeflate.HUFMAX),e=new (USE_TYPEDARRAY?Uint8Array:Array)(c),f,g,h;if(!USE_TYPEDARRAY)for(g=0;g<c;g++)e[g]=0;for(g=0;g<c;++g)0<a[g]&&d.push(g,a[g]);c=Array(d.length/2);f=new (USE_TYPEDARRAY?Uint32Array:Array)(d.length/2);if(1===c.length)return e[d.pop().index]=1,e;g=0;for(h=d.length/2;g<h;++g)c[g]=d.pop(),f[g]=c[g].value;d=this.reversePackageMerge_(f,f.length,b);g=0;for(h=c.length;g<h;++g)e[c[g].index]=d[g];
return e};
Zlib.RawDeflate.prototype.reversePackageMerge_=function(a,b,c){function d(a){var c=k[a][l[a]];c===b?(d(a+1),d(a+1)):--g[c];++l[a]}var e=new (USE_TYPEDARRAY?Uint16Array:Array)(c),f=new (USE_TYPEDARRAY?Uint8Array:Array)(c),g=new (USE_TYPEDARRAY?Uint8Array:Array)(b),h=Array(c),k=Array(c),l=Array(c),m=(1<<c)-b,n=1<<c-1,p,q;e[c-1]=b;for(p=0;p<c;++p)m<n?f[p]=0:(f[p]=1,m-=n),m<<=1,e[c-2-p]=(e[c-1-p]/2|0)+b;e[0]=f[0];h[0]=Array(e[0]);k[0]=Array(e[0]);for(p=1;p<c;++p)e[p]>2*e[p-1]+f[p]&&(e[p]=2*e[p-1]+f[p]),
h[p]=Array(e[p]),k[p]=Array(e[p]);for(m=0;m<b;++m)g[m]=c;for(n=0;n<e[c-1];++n)h[c-1][n]=a[n],k[c-1][n]=n;for(m=0;m<c;++m)l[m]=0;1===f[c-1]&&(--g[0],++l[c-1]);for(p=c-2;0<=p;--p){c=m=0;q=l[p+1];for(n=0;n<e[p];n++)c=h[p+1][q]+h[p+1][q+1],c>a[m]?(h[p][n]=c,k[p][n]=b,q+=2):(h[p][n]=a[m],k[p][n]=m,++m);l[p]=0;1===f[p]&&d(p)}return g};
Zlib.RawDeflate.prototype.getCodesFromLengths_=function(a){var b=new (USE_TYPEDARRAY?Uint16Array:Array)(a.length),c=[],d=[],e=0,f,g,h;f=0;for(g=a.length;f<g;f++)c[a[f]]=(c[a[f]]|0)+1;f=1;for(g=Zlib.RawDeflate.MaxCodeLength;f<=g;f++)d[f]=e,e+=c[f]|0,e<<=1;f=0;for(g=a.length;f<g;f++)for(e=d[a[f]],d[a[f]]+=1,c=b[f]=0,h=a[f];c<h;c++)b[f]=b[f]<<1|e&1,e>>>=1;return b};
ZLIB_RAWDEFLATE_EXPORT&&(goog.exportSymbol("Zlib.RawDeflate",Zlib.RawDeflate),goog.exportSymbol("Zlib.RawDeflate.CompressionType",Zlib.RawDeflate.CompressionType),goog.exportSymbol("Zlib.RawDeflate.CompressionType.NONE",Zlib.RawDeflate.CompressionType.NONE),goog.exportSymbol("Zlib.RawDeflate.CompressionType.FIXED",Zlib.RawDeflate.CompressionType.FIXED),goog.exportSymbol("Zlib.RawDeflate.CompressionType.DYNAMIC",Zlib.RawDeflate.CompressionType.DYNAMIC));var ZLIB_GZIP_EXPORT=!1;Zlib.Gzip=function(a,b){this.input=a;this.op=this.ip=0;this.flags={};b&&(b.flags&&(this.flags=b.flags),"string"===typeof b.filename&&(this.filename=b.filename),"string"===typeof b.comment&&(this.comment=b.comment),b.deflateOptions&&(this.deflateOptions=b.deflateOptions));this.deflateOptions||(this.deflateOptions={})};Zlib.Gzip.DefaultBufferSize=32768;
Zlib.Gzip.prototype.compress=function(){var a,b,c,d,e,f=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.Gzip.DefaultBufferSize);c=0;var g=this.input,h=this.ip;b=this.filename;var k=this.comment;f[c++]=31;f[c++]=139;f[c++]=8;a=0;this.flags.fname&&(a|=Zlib.Gzip.FlagsMask.FNAME);this.flags.fcomment&&(a|=Zlib.Gzip.FlagsMask.FCOMMENT);this.flags.fhcrc&&(a|=Zlib.Gzip.FlagsMask.FHCRC);f[c++]=a;a=(Date.now?Date.now():+new Date)/1E3|0;f[c++]=a&255;f[c++]=a>>>8&255;f[c++]=a>>>16&255;f[c++]=a>>>24&255;f[c++]=0;f[c++]=
Zlib.Gzip.OperatingSystem.UNKNOWN;if(void 0!==this.flags.fname){d=0;for(e=b.length;d<e;++d)a=b.charCodeAt(d),255<a&&(f[c++]=a>>>8&255),f[c++]=a&255;f[c++]=0}if(this.flags.comment){d=0;for(e=k.length;d<e;++d)a=k.charCodeAt(d),255<a&&(f[c++]=a>>>8&255),f[c++]=a&255;f[c++]=0}this.flags.fhcrc&&(b=Zlib.CRC32.calc(f,0,c)&65535,f[c++]=b&255,f[c++]=b>>>8&255);this.deflateOptions.outputBuffer=f;this.deflateOptions.outputIndex=c;c=new Zlib.RawDeflate(g,this.deflateOptions);f=c.compress();c=c.op;USE_TYPEDARRAY&&
(c+8>f.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(f.buffer)),f=this.output):f=new Uint8Array(f.buffer));b=Zlib.CRC32.calc(g);f[c++]=b&255;f[c++]=b>>>8&255;f[c++]=b>>>16&255;f[c++]=b>>>24&255;e=g.length;f[c++]=e&255;f[c++]=e>>>8&255;f[c++]=e>>>16&255;f[c++]=e>>>24&255;this.ip=h;USE_TYPEDARRAY&&c<f.length&&(this.output=f=f.subarray(0,c));return f};
Zlib.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255};Zlib.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16};ZLIB_GZIP_EXPORT&&(goog.exportSymbol("Zlib.Gzip",Zlib.Gzip),goog.exportSymbol("Zlib.Gzip.prototype.compress",Zlib.Gzip.prototype.compress));Zlib.GunzipMember=function(){};var ZLIB_GUNZIP_EXPORT=!1;Zlib.Gunzip=function(a,b){this.input=a;this.ip=0;this.member=[]};Zlib.Gunzip.prototype.decompress=function(){for(var a=this.input.length;this.ip<a;)this.decodeMember();return this.concatMember()};
Zlib.Gunzip.prototype.decodeMember=function(){var a=new Zlib.GunzipMember,b,c,d,e,f,g=this.input;c=this.ip;a.id1=g[c++];a.id2=g[c++];if(31!==a.id1||139!==a.id2)throw Error("invalid file signature:",a.id1,a.id2);a.cm=g[c++];switch(a.cm){case 8:break;default:throw Error("unknown compression method: "+a.cm);}a.flg=g[c++];b=g[c++]|g[c++]<<8|g[c++]<<16|g[c++]<<24;a.mtime=new Date(1E3*b);a.xfl=g[c++];a.os=g[c++];0<(a.flg&Zlib.Gzip.FlagsMask.FEXTRA)&&(a.xlen=g[c++]|g[c++]<<8,c=this.decodeSubField(c,a.xlen));
if(0<(a.flg&Zlib.Gzip.FlagsMask.FNAME)){f=[];for(e=0;0<(b=g[c++]);)f[e++]=String.fromCharCode(b);a.name=f.join("")}if(0<(a.flg&Zlib.Gzip.FlagsMask.FCOMMENT)){f=[];for(e=0;0<(b=g[c++]);)f[e++]=String.fromCharCode(b);a.comment=f.join("")}if(0<(a.flg&Zlib.Gzip.FlagsMask.FHCRC)&&(a.crc16=Zlib.CRC32.calc(g,0,c)&65535,a.crc16!==(g[c++]|g[c++]<<8)))throw Error("invalid header crc16");b=g[g.length-4]|g[g.length-3]<<8|g[g.length-2]<<16|g[g.length-1]<<24;g.length-c-4-4<512*b&&(d=b);c=new Zlib.RawInflate(g,
{index:c,bufferSize:d});a.data=d=c.decompress();c=c.ip;a.crc32=b=(g[c++]|g[c++]<<8|g[c++]<<16|g[c++]<<24)>>>0;if(Zlib.CRC32.calc(d)!==b)throw Error("invalid CRC-32 checksum: 0x"+Zlib.CRC32.calc(d).toString(16)+" / 0x"+b.toString(16));a.isize=b=(g[c++]|g[c++]<<8|g[c++]<<16|g[c++]<<24)>>>0;if((d.length&4294967295)!==b)throw Error("invalid input size: "+(d.length&4294967295)+" / "+b);this.member.push(a);this.ip=c};Zlib.Gunzip.prototype.decodeSubField=function(a,b){return a+b};
Zlib.Gunzip.prototype.concatMember=function(){var a=this.member,b,c,d=0,e=0;b=0;for(c=a.length;b<c;++b)e+=a[b].data.length;if(USE_TYPEDARRAY)for(e=new Uint8Array(e),b=0;b<c;++b)e.set(a[b].data,d),d+=a[b].data.length;else{e=[];for(b=0;b<c;++b)e[b]=a[b].data;e=Array.prototype.concat.apply([],e)}return e};ZLIB_GUNZIP_EXPORT&&(goog.exportSymbol("Zlib.Gunzip",Zlib.Gunzip),goog.exportSymbol("Zlib.Gunzip.prototype.decompress",Zlib.Gunzip.prototype.decompress));X.parserMGZ=function(){X.parser.call(this);this._classname="parserMGZ";this._littleEndian=!1};goog.inherits(X.parserMGZ,X.parser);
X.parserMGZ.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");d&&(c=(new Zlib.Gunzip(new Uint8Array(c))).decompress(),c=c.buffer);d=this.parseStream(c);var e=[d.ndim1,d.ndim2,d.ndim3];b._dimensions=e;var f=d.v_voxelsize;b._spacing=f;c=d.min;var g=d.max;b._min=b._windowLow=c;b._max=b._windowHigh=g;-Infinity==b._lowerThreshold&&(b._lowerThreshold=c);Infinity==b._upperThreshold&&(b._upperThreshold=g);c=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setRowValues(c,0,d.M_ras[0][0],d.M_ras[1][0],
d.M_ras[2][0],0);goog.vec.Mat4.setRowValues(c,1,d.M_ras[0][1],d.M_ras[1][1],d.M_ras[2][1],0);goog.vec.Mat4.setRowValues(c,2,d.M_ras[0][2],d.M_ras[1][2],d.M_ras[2][2],0);goog.vec.Mat4.setRowValues(c,3,0,0,0,1);for(var g=e[0]/2,h=e[1]/2,e=e[2]/2,k=[0,0,0],l=0;3>l;++l)k[l]=d.M_ras[3][l]-(goog.vec.Mat4.getElement(c,l,0)*f[0]*g+goog.vec.Mat4.getElement(c,l,1)*f[1]*h+goog.vec.Mat4.getElement(c,l,2)*f[2]*e);goog.vec.Mat4.setColumnValues(c,3,k[0],k[1],k[2],1);d.IJKToRAS=c;d.RASToIJK=goog.vec.Mat4.createFloat32();
goog.vec.Mat4.invert(d.IJKToRAS,d.RASToIJK);g=goog.vec.Vec4.createFloat32FromValues(0,0,0,1);f=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(c,g,f);h=goog.vec.Vec4.createFloat32FromValues(1,1,1,1);g=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(c,h,g);c=X.parser.computeRASBBox(c,b._dimensions);d.RASSpacing=[g[0]-f[0],g[1]-f[1],g[2]-f[2]];d.RASDimensions=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.RASOrigin=[c[0],c[2],c[4]];b.create_(d);X.TIMERSTOP(this._classname+".parse");b._image=this.reslice(b);
d=new X.event.ModifiedEvent;d._object=b;d._container=a;this.dispatchEvent(d)};
X.parserMGZ.prototype.parseStream=function(a){this._data=a;a={version:0,Tr:0,Te:0,flipangle:0,Ti:0,ndim1:0,ndim2:0,ndim3:0,nframes:0,type:0,dof:0,rasgoodflag:0,MRIreader:null,M_ras:null,v_voxelsize:null,data:null,min:Infinity,max:-Infinity};a.version=this.scan("uint");a.ndim1=this.scan("uint");a.ndim2=this.scan("uint");a.ndim3=this.scan("uint");a.nframes=this.scan("uint");a.type=this.scan("uint");a.dof=this.scan("uint");a.rasgoodflag=this.scan("ushort");if(0<a.rasgoodflag){a.v_voxelsize=this.scan("float",
3);var b=[];b.push(this.scan("float",3));b.push(this.scan("float",3));b.push(this.scan("float",3));b.push(this.scan("float",3));a.M_ras=b}this.jumpTo(284);b=a.ndim1*a.ndim2*a.ndim3;switch(a.type){case 0:a.data=this.scan("uchar",b);break;case 1:a.data=this.scan("uint",b);break;case 3:a.data=this.scan("float",b);break;case 4:a.data=this.scan("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=this.arrayMinMax(a.data);a.min=b[0];a.max=b[1];this._dataPointer+16<this._data.byteLength&&
(a.Tr=this.scan("float"),a.flipangle=this.scan("float"),a.Te=this.scan("float"),a.Ti=this.scan("float"));return a};goog.exportSymbol("X.parserMGZ",X.parserMGZ);goog.exportSymbol("X.parserMGZ.prototype.parse",X.parserMGZ.prototype.parse);X.parserLBL=function(){X.parser.call(this);this._classname="parserLBL"};goog.inherits(X.parserLBL,X.parser);
X.parserLBL.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");d=b._pointIndices;var e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var f=[],g=this.scan("uchar",c.byteLength),h=g.length,k=!1,l=0;for(c=1;c<h;c++)10==g[c-1]?(l=c,k=!0):k&&32==g[c]&&(k=parseInt(this.parseChars(g,l,c),10),f.push(k),k=!1);g=b._scalars._array?b._scalars._array:new Float32Array(e);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*e);for(c=h=0;c<e;c++){l=d[c];
if(l>e)throw Error("Could not find scalar for vertex.");l=g[l];f[h++]=l;f[h++]=l;f[h++]=l}b._scalars._array=g;b._scalars._glArray=f;b._scalars._dirty=!0;X.TIMERSTOP(this._classname+".parse");d=new X.event.ModifiedEvent;d._object=b;d._container=a;this.dispatchEvent(d)};goog.exportSymbol("X.parserLBL",X.parserLBL);goog.exportSymbol("X.parserLBL.prototype.parse",X.parserLBL.prototype.parse);X.parserCRV=function(){X.parser.call(this);this._classname="parserCRV";this._littleEndian=!1};goog.inherits(X.parserCRV,X.parser);
X.parserCRV.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");d=b._pointIndices;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.jumpTo(3);var e=this.scan("uint");this.scan("uint");this.scan("uint");var f=0,g=0,h=0,k=0,l=0,m=0,n=0,p=0,q=0,u=0,t=0;c=Array(2);var C=Array(2),B=this.scan("float",e),y;for(y=0;y<e;y++){var D=B[y];0==y&&(c[0]=C[0]=D);0<=D?(f++,k+=D):(g++,h+=D);q+=D;t++;C[0]=Math.max(D,C[0]);c[0]=Math.min(D,c[0]);B[y]=D}0!=f&&(l=
k/f);0!=g&&(m=h/g);0!=t&&(u=q/t);for(y=q=h=k=0;y<e;y++){var D=B[y],A=0;0<=D?(A=Math.pow(D-l,2),k+=A):(A=Math.pow(D-m,2),h+=A);A=Math.pow(D-u,2);q+=A}1<f&&(n=Math.sqrt(k/(f-1)));1<g&&(p=Math.sqrt(h/(g-1)));1<t&&Math.sqrt(q/(t-1));c[1]=m-2.5*p;C[1]=l+2.5*n;e=d.length;f=new Float32Array(3*e);for(y=0;y<e;y++)g=B[d[y]],h=3*y,f[h]=g,f[h+1]=g,f[h+2]=g;b._scalars._min=c[1];b._scalars._max=C[1];-Infinity==b._scalars._lowerThreshold&&(b._scalars._lowerThreshold=c[1]);Infinity==b._scalars._upperThreshold&&(b._scalars._upperThreshold=
C[1]);b._scalars._array=B;b._scalars._glArray=f;b._scalars._dirty=!0;X.TIMERSTOP(this._classname+".parse");d=new X.event.ModifiedEvent;d._object=b;d._container=a;this.dispatchEvent(d)};goog.exportSymbol("X.parserCRV",X.parserCRV);goog.exportSymbol("X.parserCRV.prototype.parse",X.parserCRV.prototype.parse);Zlib.Adler32=function(a){"string"===typeof a&&(a=Zlib.Util.stringToByteArray(a));return Zlib.Adler32.update(1,a)};Zlib.Adler32.update=function(a,b){for(var c=a&65535,d=a>>>16&65535,e=b.length,f,g=0;0<e;){f=e>Zlib.Adler32.OptimizationParameter?Zlib.Adler32.OptimizationParameter:e;e-=f;do c+=b[g++],d+=c;while(--f);c%=65521;d%=65521}return(d<<16|c)>>>0};Zlib.Adler32.OptimizationParameter=1024;var ZLIB_DEFLATE_EXPORT=!1;Zlib.Deflate=function(a,b){this.input=a;this.output=new (USE_TYPEDARRAY?Uint8Array:Array)(Zlib.Deflate.DefaultBufferSize);this.compressionType=Zlib.Deflate.CompressionType.DYNAMIC;var c={},d;!b&&(b={})||"number"!==typeof b.compressionType||(this.compressionType=b.compressionType);for(d in b)c[d]=b[d];c.outputBuffer=this.output;this.rawDeflate=new Zlib.RawDeflate(this.input,c)};Zlib.Deflate.DefaultBufferSize=32768;Zlib.Deflate.CompressionType=Zlib.RawDeflate.CompressionType;
Zlib.Deflate.compress=function(a,b){return(new Zlib.Deflate(a,b)).compress()};
Zlib.Deflate.prototype.compress=function(){var a,b,c,d=0;c=this.output;a=Zlib.CompressionMethod.DEFLATE;switch(a){case Zlib.CompressionMethod.DEFLATE:b=Math.LOG2E*Math.log(Zlib.RawDeflate.WindowSize)-8;break;default:throw Error("invalid compression method");}b=b<<4|a;c[d++]=b;switch(a){case Zlib.CompressionMethod.DEFLATE:switch(this.compressionType){case Zlib.Deflate.CompressionType.NONE:a=0;break;case Zlib.Deflate.CompressionType.FIXED:a=1;break;case Zlib.Deflate.CompressionType.DYNAMIC:a=2;break;
default:throw Error("unsupported compression type");}break;default:throw Error("invalid compression method");}a=a<<6|0;c[d++]=a|31-(256*b+a)%31;b=Zlib.Adler32(this.input);this.rawDeflate.op=d;c=this.rawDeflate.compress();d=c.length;USE_TYPEDARRAY&&(c=new Uint8Array(c.buffer),c.length<=d+4&&(this.output=new Uint8Array(c.length+4),this.output.set(c),c=this.output),c=c.subarray(0,d+4));c[d++]=b>>24&255;c[d++]=b>>16&255;c[d++]=b>>8&255;c[d++]=b&255;return c};
ZLIB_DEFLATE_EXPORT&&(goog.exportSymbol("Zlib.Deflate",Zlib.Deflate),goog.exportSymbol("Zlib.Deflate.compress",Zlib.Deflate.compress),goog.exportSymbol("Zlib.Deflate.prototype.compress",Zlib.Deflate.prototype.compress),goog.exportSymbol("Zlib.Deflate.CompressionType",Zlib.Deflate.CompressionType),goog.exportSymbol("Zlib.Deflate.CompressionType.NONE",Zlib.Deflate.CompressionType.NONE),goog.exportSymbol("Zlib.Deflate.CompressionType.FIXED",Zlib.Deflate.CompressionType.FIXED),goog.exportSymbol("Zlib.Deflate.CompressionType.DYNAMIC",
Zlib.Deflate.CompressionType.DYNAMIC));Zlib.CompressionMethod={DEFLATE:8,RESERVED:15};Zlib.Util={};Zlib.Util.convertNetworkByteOrder=function(a,b){var c=[],d;do d=a&255,c.push(d),a>>>=8;while(0<a);if("number"===typeof b)for(;c.length<b;)c.push(0);return c.reverse()};Zlib.Util.slice=function(a,b,c){var d,e=a.length;if(a instanceof Array)return a.slice(b,b+c);d=[];for(var f=0;f<c&&!(b+f>=e);f++)d.push(a[b+f]);return d};Zlib.Util.push=function(a,b){var c=0,d=b.length,e=b.length;if(a.push)for(;c<e;c++)a.push(b[c]);else for(;c<e;c++)a[d+c]=b[c];return a.length};
Zlib.Util.stringToByteArray=function(a){a=a.split("");var b,c;b=0;for(c=a.length;b<c;b++)a[b]=(a[b].charCodeAt(0)&255)>>>0;return a};var ZLIB_INFLATE_EXPORT=!1;
Zlib.Inflate=function(a,b){var c,d;this.input=a;this.ip=0;if(b||!(b={}))b.index&&(this.ip=b.index),b.verify&&(this.verify=b.verify);c=a[this.ip++];d=a[this.ip++];switch(c&15){case Zlib.CompressionMethod.DEFLATE:this.method=Zlib.CompressionMethod.DEFLATE;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.rawinflate=new Zlib.RawInflate(a,{index:this.ip,bufferSize:b.bufferSize,
bufferType:b.bufferType,resize:b.resize})};Zlib.Inflate.BufferType=Zlib.RawInflate.BufferType;Zlib.Inflate.prototype.decompress=function(){var a=this.input,b;b=this.rawinflate.decompress();this.ip=this.rawinflate.ip;if(this.verify&&(a=(a[this.ip++]<<24|a[this.ip++]<<16|a[this.ip++]<<8|a[this.ip++])>>>0,a!==Zlib.Adler32(b)))throw Error("invalid adler-32 checksum");return b};
ZLIB_INFLATE_EXPORT&&(goog.exportSymbol("Zlib.Inflate",Zlib.Inflate),goog.exportSymbol("Zlib.Inflate.BufferType",Zlib.Inflate.BufferType),goog.exportProperty(Zlib.Inflate.BufferType,"ADAPTIVE",Zlib.Inflate.BufferType.ADAPTIVE),goog.exportProperty(Zlib.Inflate.BufferType,"BLOCK",Zlib.Inflate.BufferType.BLOCK),goog.exportSymbol("Zlib.Inflate.prototype.decompress",Zlib.Inflate.prototype.decompress));X.parserRAW=function(){X.parser.call(this);this._classname="parserRAW"};goog.inherits(X.parserRAW,X.parser);
X.parserRAW.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");d&&(c=(new Zlib.Inflate(new Uint8Array(c))).decompress(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=this.arrayMinMax(d.data);c=e[0];e=e[1];d.min=b._min=b._windowLow=c;d.max=b._max=b._windowHigh=e;-Infinity==b._lowerThreshold&&(b._lowerThreshold=c);Infinity==b._upperThreshold&&(b._upperThreshold=e);e=goog.vec.Mat4.createFloat32Identity();d.IJKToRAS=e;d.RASToIJK=goog.vec.Mat4.createFloat32Identity();var f=goog.vec.Vec4.createFloat32FromValues(0,
0,0,1);c=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(e,f,c);var g=goog.vec.Vec4.createFloat32FromValues(1,1,1,1),f=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(e,g,f);e=X.parser.computeRASBBox(e,b._dimensions);d.RASSpacing=[f[0]-c[0],f[1]-c[1],f[2]-c[2]];d.RASDimensions=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.RASOrigin=[e[0],e[2],e[4]];b.create_(d);X.TIMERSTOP(this._classname+".parse");b._image=this.reslice(b);d=new X.event.ModifiedEvent;d._object=b;d._container=a;this.dispatchEvent(d)};
goog.exportSymbol("X.parserRAW",X.parserRAW);goog.exportSymbol("X.parserRAW.prototype.parse",X.parserRAW.prototype.parse);X.parserIMAGE=function(){X.parser.call(this);this._classname="parserIMAGE"};goog.inherits(X.parserIMAGE,X.parser);X.parserIMAGE.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=g.join("");e=window.btoa(e);f=new Image;goog.events.listenOnce(f,goog.events.EventType.LOAD,this.parseCompleted.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};
X.parserIMAGE.prototype.parseCompleted=function(a,b,c,d,e){b._image=a;b._rawData=null;a=new X.event.ModifiedEvent;a._object=c;a._container=b;this.dispatchEvent(a)};goog.exportSymbol("X.parserIMAGE",X.parserIMAGE);goog.exportSymbol("X.parserIMAGE.prototype.parse",X.parserIMAGE.prototype.parse);X.parserLUT=function(){X.parser.call(this);this._classname="parserLUT"};goog.inherits(X.parserLUT,X.parser);
X.parserLUT.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");this._data=c;c=this.scan("uchar",c.byteLength);d=c.length;var e=0,f;for(f=0;f<d;f++)if(10==c[f]){var g=this.parseChars(c,e,f),e=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}X.TIMERSTOP(this._classname+
".parse");c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};goog.exportSymbol("X.parserLUT",X.parserLUT);goog.exportSymbol("X.parserLUT.prototype.parse",X.parserLUT.prototype.parse);goog.vec.Mat3={};goog.vec.Mat3.createFloat32=function(){return new Float32Array(9)};goog.vec.Mat3.createFloat64=function(){return new Float64Array(9)};goog.vec.Mat3.createNumber=function(){var a=Array(9);goog.vec.Mat3.setFromValues(a,0,0,0,0,0,0,0,0,0);return a};goog.vec.Mat3.create=function(){return goog.vec.Mat3.createFloat32()};goog.vec.Mat3.createFloat32Identity=function(){var a=goog.vec.Mat3.createFloat32();a[0]=a[4]=a[8]=1;return a};
goog.vec.Mat3.createFloat64Identity=function(){var a=goog.vec.Mat3.createFloat64();a[0]=a[4]=a[8]=1;return a};goog.vec.Mat3.createNumberIdentity=function(){var a=Array(9);goog.vec.Mat3.setFromValues(a,1,0,0,0,1,0,0,0,1);return a};goog.vec.Mat3.createIdentity=function(){return goog.vec.Mat3.createFloat32Identity()};goog.vec.Mat3.createFloat32FromArray=function(a){var b=goog.vec.Mat3.createFloat32();goog.vec.Mat3.setFromArray(b,a);return b};
goog.vec.Mat3.createFloat32FromValues=function(a,b,c,d,e,f,g,h,k){var l=goog.vec.Mat3.createFloat32();goog.vec.Mat3.setFromValues(l,a,b,c,d,e,f,g,h,k);return l};goog.vec.Mat3.cloneFloat32=goog.vec.Mat3.createFloat32FromArray;goog.vec.Mat3.createFloat64FromArray=function(a){var b=goog.vec.Mat3.createFloat64();goog.vec.Mat3.setFromArray(b,a);return b};
goog.vec.Mat3.createFloat64FromValues=function(a,b,c,d,e,f,g,h,k){var l=goog.vec.Mat3.createFloat64();goog.vec.Mat3.setFromValues(l,a,b,c,d,e,f,g,h,k);return l};goog.vec.Mat3.cloneFloat64=goog.vec.Mat3.createFloat64FromArray;goog.vec.Mat3.createFromArray=function(a){var b=goog.vec.Mat3.createFloat32();goog.vec.Mat3.setFromArray(b,a);return b};goog.vec.Mat3.createFromValues=function(a,b,c,d,e,f,g,h,k){var l=goog.vec.Mat3.create();goog.vec.Mat3.setFromValues(l,a,b,c,d,e,f,g,h,k);return l};
goog.vec.Mat3.clone=goog.vec.Mat3.createFromArray;goog.vec.Mat3.getElement=function(a,b,c){return a[b+3*c]};goog.vec.Mat3.setElement=function(a,b,c,d){a[b+3*c]=d;return a};goog.vec.Mat3.setFromValues=function(a,b,c,d,e,f,g,h,k,l){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=k;a[8]=l;return a};goog.vec.Mat3.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};
goog.vec.Mat3.setFromRowMajorArray=function(a,b){a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return a};goog.vec.Mat3.setDiagonalValues=function(a,b,c,d){a[0]=b;a[4]=c;a[8]=d;return a};goog.vec.Mat3.setDiagonal=function(a,b){a[0]=b[0];a[4]=b[1];a[8]=b[2];return a};goog.vec.Mat3.setColumnValues=function(a,b,c,d,e){b*=3;a[b]=c;a[b+1]=d;a[b+2]=e;return a};goog.vec.Mat3.setColumn=function(a,b,c){b*=3;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];return a};
goog.vec.Mat3.getColumn=function(a,b,c){b*=3;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];return c};goog.vec.Mat3.setColumns=function(a,b,c,d){goog.vec.Mat3.setColumn(a,0,b);goog.vec.Mat3.setColumn(a,1,c);goog.vec.Mat3.setColumn(a,2,d);return a};goog.vec.Mat3.getColumns=function(a,b,c,d){goog.vec.Mat3.getColumn(a,0,b);goog.vec.Mat3.getColumn(a,1,c);goog.vec.Mat3.getColumn(a,2,d)};goog.vec.Mat3.setRowValues=function(a,b,c,d,e){a[b]=c;a[b+3]=d;a[b+6]=e;return a};
goog.vec.Mat3.setRow=function(a,b,c){a[b]=c[0];a[b+3]=c[1];a[b+6]=c[2];return a};goog.vec.Mat3.getRow=function(a,b,c){c[0]=a[b];c[1]=a[b+3];c[2]=a[b+6];return c};goog.vec.Mat3.setRows=function(a,b,c,d){goog.vec.Mat3.setRow(a,0,b);goog.vec.Mat3.setRow(a,1,c);goog.vec.Mat3.setRow(a,2,d);return a};goog.vec.Mat3.getRows=function(a,b,c,d){goog.vec.Mat3.getRow(a,0,b);goog.vec.Mat3.getRow(a,1,c);goog.vec.Mat3.getRow(a,2,d)};
goog.vec.Mat3.makeZero=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=0;a[6]=0;a[7]=0;a[8]=0;return a};goog.vec.Mat3.makeIdentity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};goog.vec.Mat3.addMat=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c};
goog.vec.Mat3.subMat=function(a,b,c){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c};goog.vec.Mat3.multScalar=function(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;c[6]=a[6]*b;c[7]=a[7]*b;c[8]=a[8]*b;return c};
goog.vec.Mat3.multMat=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var n=b[0],p=b[1],q=b[2],u=b[3],t=b[4],C=b[5],B=b[6],y=b[7];b=b[8];c[0]=d*n+g*p+l*q;c[1]=e*n+h*p+m*q;c[2]=f*n+k*p+a*q;c[3]=d*u+g*t+l*C;c[4]=e*u+h*t+m*C;c[5]=f*u+k*t+a*C;c[6]=d*B+g*y+l*b;c[7]=e*B+h*y+m*b;c[8]=f*B+k*y+a*b;return c};
goog.vec.Mat3.transpose=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[5];b[1]=a[3];b[2]=a[6];b[3]=c;b[5]=a[7];b[6]=d;b[7]=e}else b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8];return b};
goog.vec.Mat3.invert=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8],n=g*m-l*h,p=l*e-d*m,q=d*h-g*e,u=c*n+f*p+k*q;if(0==u)return!1;u=1/u;b[0]=n*u;b[3]=(k*h-f*m)*u;b[6]=(f*l-k*g)*u;b[1]=p*u;b[4]=(c*m-k*e)*u;b[7]=(k*d-c*l)*u;b[2]=q*u;b[5]=(f*e-c*h)*u;b[8]=(c*g-f*d)*u;return!0};goog.vec.Mat3.equals=function(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]&&a[4]==b[4]&&a[5]==b[5]&&a[6]==b[6]&&a[7]==b[7]&&a[8]==b[8]};
goog.vec.Mat3.multVec3=function(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[3]+b*a[6];c[1]=d*a[1]+e*a[4]+b*a[7];c[2]=d*a[2]+e*a[5]+b*a[8];return c};goog.vec.Mat3.makeTranslate=function(a,b,c){goog.vec.Mat3.makeIdentity(a);return goog.vec.Mat3.setColumnValues(a,2,b,c,1)};goog.vec.Mat3.makeScale=function(a,b,c,d){goog.vec.Mat3.makeIdentity(a);return goog.vec.Mat3.setDiagonalValues(a,b,c,d)};
goog.vec.Mat3.makeRotate=function(a,b,c,d,e){var f=Math.cos(b),g=1-f;b=Math.sin(b);return goog.vec.Mat3.setFromValues(a,c*c*g+f,c*d*g+e*b,c*e*g-d*b,c*d*g-e*b,d*d*g+f,d*e*g+c*b,c*e*g+d*b,d*e*g-c*b,e*e*g+f)};goog.vec.Mat3.makeRotateX=function(a,b){var c=Math.cos(b),d=Math.sin(b);return goog.vec.Mat3.setFromValues(a,1,0,0,0,c,d,0,-d,c)};goog.vec.Mat3.makeRotateY=function(a,b){var c=Math.cos(b),d=Math.sin(b);return goog.vec.Mat3.setFromValues(a,c,0,-d,0,1,0,d,0,c)};
goog.vec.Mat3.makeRotateZ=function(a,b){var c=Math.cos(b),d=Math.sin(b);return goog.vec.Mat3.setFromValues(a,c,d,0,-d,c,0,0,0,1)};
goog.vec.Mat3.rotate=function(a,b,c,d,e){var f=a[0],g=a[1],h=a[2],k=a[3],l=a[4],m=a[5],n=a[6],p=a[7],q=a[8],u=Math.cos(b),t=Math.sin(b),C=1-u;b=c*c*C+u;var B=c*d*C+e*t,y=c*e*C-d*t,D=c*d*C-e*t,A=d*d*C+u,F=d*e*C+c*t,I=c*e*C+d*t;c=d*e*C-c*t;e=e*e*C+u;return goog.vec.Mat3.setFromValues(a,f*b+k*B+n*y,g*b+l*B+p*y,h*b+m*B+q*y,f*D+k*A+n*F,g*D+l*A+p*F,h*D+m*A+q*F,f*I+k*c+n*e,g*I+l*c+p*e,h*I+m*c+q*e)};
goog.vec.Mat3.rotateX=function(a,b){var c=a[3],d=a[4],e=a[5],f=a[6],g=a[7],h=a[8],k=Math.cos(b),l=Math.sin(b);a[3]=c*k+f*l;a[4]=d*k+g*l;a[5]=e*k+h*l;a[6]=c*-l+f*k;a[7]=d*-l+g*k;a[8]=e*-l+h*k;return a};goog.vec.Mat3.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[6],g=a[7],h=a[8],k=Math.cos(b),l=Math.sin(b);a[0]=c*k+f*-l;a[1]=d*k+g*-l;a[2]=e*k+h*-l;a[6]=c*l+f*k;a[7]=d*l+g*k;a[8]=e*l+h*k;return a};
goog.vec.Mat3.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=Math.cos(b),l=Math.sin(b);a[0]=c*k+f*l;a[1]=d*k+g*l;a[2]=e*k+h*l;a[3]=c*-l+f*k;a[4]=d*-l+g*k;a[5]=e*-l+h*k;return a};goog.vec.Mat3.makeEulerZXZ=function(a,b,c,d){var e=Math.cos(b);b=Math.sin(b);var f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);a[0]=e*g-f*b*d;a[1]=f*e*d+g*b;a[2]=d*c;a[3]=-e*d-g*f*b;a[4]=e*f*g-b*d;a[5]=g*c;a[6]=c*b;a[7]=-e*c;a[8]=f;return a};
goog.vec.Mat3.toEulerZXZ=function(a,b,c){var d=Math.sqrt(a[2]*a[2]+a[5]*a[5]);c=c?-1:1;d>goog.vec.EPSILON?(b[2]=Math.atan2(a[2]*c,a[5]*c),b[1]=Math.atan2(d*c,a[8]),b[0]=Math.atan2(a[6]*c,-a[7]*c)):(b[0]=0,b[1]=Math.atan2(d*c,a[8]),b[2]=Math.atan2(a[1],a[0]));b[0]=(b[0]+2*Math.PI)%(2*Math.PI);b[2]=(b[2]+2*Math.PI)%(2*Math.PI);b[1]=(b[1]*c+2*Math.PI)%(2*Math.PI)*c;return b};X.parserMRC=function(){X.parser.call(this);this._classname="parserMRC"};goog.inherits(X.parserMRC,X.parser);
X.parserMRC.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");c=this.parseStream(c);d=c.min;var e=c.max;b._dimensions=[c.nx,c.ny,c.nz];b._spacing=[c.xlen/c.mx,c.ylen/c.my,c.zlen/c.mz];b._min=b._windowLow=d;b._max=b._windowHigh=e;-Infinity==b._lowerThreshold&&(b._lowerThreshold=d);Infinity==b._upperThreshold&&(b._upperThreshold=e);e=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setRowValues(e,3,0,0,0,1);goog.vec.Mat4.setRowValues(e,0,-1,0,0,c.nx);goog.vec.Mat4.setRowValues(e,1,0,0,
-1,c.ny);goog.vec.Mat4.setRowValues(e,2,0,-1,0,c.nz);c.IJKToRAS=e;c.RASToIJK=goog.vec.Mat4.createFloat32();goog.vec.Mat4.invert(c.IJKToRAS,c.RASToIJK);var f=goog.vec.Vec4.createFloat32FromValues(0,0,0,1);d=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(e,f,d);var g=goog.vec.Vec4.createFloat32FromValues(1,1,1,1),f=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(e,g,f);g=[c.nx,c.ny,c.nz];e=X.parser.computeRASBBox(e,g);c.RASSpacing=[f[0]-d[0],f[1]-d[1],f[2]-d[2]];c.RASDimensions=[e[1]+e[0]+
1,e[3]-e[2]+1,e[5]-e[4]+1];c.RASOrigin=[e[0],e[2],e[4]];b._dimensions=g;b.create_(c);b._image=this.reslice(b);X.TIMERSTOP(this._classname+".parse");c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};
X.parserMRC.prototype.parseStream=function(a){this._data=a;a={nx:0,ny:0,nz:0,mode:0,nxstart:0,nystart:0,nzstart:0,mx:0,my:0,mz:0,xlen:0,ylen:0,zlen:0,alpha:0,beta:0,gamma:0,mapc:0,mapr:0,maps:0,amin:0,amax:0,amean:0,ispg:0,next:0,creatid:0,extra:null,nint:0,nreal:0,extra:null,imodStamp:0,imodFlags:0,idtype:0,lens:0,nd1:0,nd2:0,vd1:0,vd2:0,tiltangles:null,xorg:0,yorg:0,zorg:0,cmap:0,stamp:0,rms:0,nlabl:0,data:null,min:Infinity,max:-Infinity,mean:0,space:null,spaceorientation:null,rasspaceorientation:null,
orientation:null,normcosine:null};this.jumpTo(0);a.nx=this.scan("sint");a.ny=this.scan("sint");a.nz=this.scan("sint");a.mode=this.scan("sint");var b=a.nx*a.ny*a.nz;this.jumpTo(1024);switch(a.mode){case 0:a.data=this.scan("schar",b);break;case 1:a.data=this.scan("sshort",b);break;case 2:a.data=this.scan("float",b);break;case 3:a.data=this.scan("uint",b);break;case 4:a.data=this.scan("double",b);break;case 6:a.data=this.scan("ushort",b);break;case 16:a.data=this.scan("uchar",b);break;default:throw Error("Unsupported MRC data type: "+
a.mode);}this.jumpTo(28);a.mx=this.scan("sint");a.my=this.scan("sint");a.mz=this.scan("sint");a.xlen=this.scan("float");a.ylen=this.scan("float");a.zlen=this.scan("float");a.alpha=this.scan("float");a.beta=this.scan("float");a.gamma=this.scan("float");a.mapc=this.scan("sint");a.mapr=this.scan("sint");a.maps=this.scan("sint");a.amin=this.scan("float");a.amax=this.scan("float");a.amean=this.scan("float");a.ispeg=this.scan("sint");a.next=this.scan("sint");a.creatid=this.scan("short");a.nint=this.scan("short");
a.nreal=this.scan("short");a.imodStamp=this.scan("sint");a.imodFLags=this.scan("sint");a.idtype=this.scan("short");a.lens=this.scan("short");a.nd1=this.scan("short");a.nd2=this.scan("short");a.vd1=this.scan("short");a.vd2=this.scan("short");a.tiltangles=this.scan("float",6);this.jumpTo(196);a.xorg=this.scan("float");a.yorg=this.scan("float");a.zorg=this.scan("float");this.jumpTo(216);a.rms=this.scan("float");a.nlabl=this.scan("sint");a.lables=this.scan("schar",10);if(0!=a.next)switch(this.jumpTo(parseInt(a.next+
1024,10)),a.mode){case 0:a.data=this.scan("schar",b);break;case 1:a.data=this.scan("sshort",b);break;case 2:a.data=this.scan("float",b);break;case 3:a.data=this.scan("uint",b);break;case 4:a.data=this.scan("double",b);break;case 6:a.data=this.scan("ushort",b);break;case 16:a.data=this.scan("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}0>a.amean-(a.amax-a.amean)?(a.min=a.amin,a.max=a.amean+(a.amean-a.amin)):(a.min=a.amean-(a.amax-a.amean),a.max=a.amax);return a};
goog.exportSymbol("X.parserMRC",X.parserMRC);goog.exportSymbol("X.parserMRC.prototype.parse",X.parserMRC.prototype.parse);X.parserNRRD=function(){X.parser.call(this);this._classname="parserNRRD"};goog.inherits(X.parserNRRD,X.parser);
X.parserNRRD.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");this._data=c;c=this.scan("uchar",c.byteLength);d=c.length;var e=null,f=0,g;for(g=1;g<d;g++)if(10==c[g-1]&&10==c[g]){e=this.parseChars(c,0,g-2);f=g+1;break}this.parseHeader(e);d=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)d=(new Zlib.Gunzip(new Uint8Array(d))).decompress();d=d.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.__array(d);e=this.arrayMinMax(c.data);d=c.min=e[0];e=c.max=e[1];
b._min=b._windowLow=d;b._max=b._windowHigh=e;b._dimensions=[this.sizes[0],this.sizes[1],this.sizes[2]];f=(new goog.math.Vec3(this.vectors[0][0],this.vectors[0][1],this.vectors[0][2])).magnitude();g=(new goog.math.Vec3(this.vectors[1][0],this.vectors[1][1],this.vectors[1][2])).magnitude();var h=(new goog.math.Vec3(this.vectors[2][0],this.vectors[2][1],this.vectors[2][2])).magnitude();b._spacing=[f,g,h];-Infinity==b._lowerThreshold&&(b._lowerThreshold=d);Infinity==b._upperThreshold&&(b._upperThreshold=
e);f=e=1;"left-posterior-superior"==this.space&&(f=e=-1);d=goog.vec.Mat4.createFloat32Identity();goog.vec.Mat4.setRowValues(d,0,e*this.vectors[0][0],e*this.vectors[1][0],e*this.vectors[2][0],e*this.space_origin[0]);goog.vec.Mat4.setRowValues(d,1,f*this.vectors[0][1],f*this.vectors[1][1],f*this.vectors[2][1],f*this.space_origin[1]);goog.vec.Mat4.setRowValues(d,2,1*this.vectors[0][2],1*this.vectors[1][2],1*this.vectors[2][2],1*this.space_origin[2]);goog.vec.Mat4.setRowValues(d,3,0,0,0,1);c.IJKToRAS=
d;c.RASToIJK=goog.vec.Mat4.createFloat32();goog.vec.Mat4.invert(c.IJKToRAS,c.RASToIJK);f=goog.vec.Vec4.createFloat32FromValues(0,0,0,1);e=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(d,f,e);g=goog.vec.Vec4.createFloat32FromValues(1,1,1,1);f=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(d,g,f);d=X.parser.computeRASBBox(d,b._dimensions);c.RASSpacing=[f[0]-e[0],f[1]-e[1],f[2]-e[2]];c.RASDimensions=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.RASOrigin=[d[0],d[2],d[4]];b.create_(c);X.TIMERSTOP(this._classname+
".parse");b._image=this.reslice(b);c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};
X.parserNRRD.prototype.parseHeader=function(a){var b,c,d,e,f,g;a=a.split(/\r?\n/);f=0;for(g=a.length;f<g;f++)b=a[f],b.match(/NRRD\d+/)?this.isNrrd=!0:!b.match(/^#/)&&(e=b.match(/(.*):(.*)/))&&(c=e[1].trim(),b=e[2].trim(),(d=this.fieldFunctions[c])?d.call(this,b):this[c]=b);if(!this.isNrrd)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.vectors&&(this.vectors=[new goog.math.Vec3(1,
0,0),new goog.math.Vec3(0,1,0),new goog.math.Vec3(0,0,1)],this.spacings)){a=[];for(e=0;2>=e;e++)a.push(isNaN(this.spacings[e])?void 0:this.vectors[e].scale(this.spacings[e]));return a}};
X.parserNRRD.prototype.fieldFunctions={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.__array=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.__array=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.__array=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.__array=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.__array=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.__array=Uint32Array;break;case "float":this.__array=Float32Array;break;case "double":this.__array=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.endian=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.dim=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],
e.push(parseInt(a,10));return this.sizes=e},space:function(a){return this.space=a},"space origin":function(a){return this.space_origin=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.vectors=function(){var a,f,g;g=[];a=0;for(f=c.length;a<f;a++)d=c[a],g.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];a=0;for(c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return g}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.spacings=e}};goog.exportSymbol("X.parserNRRD",X.parserNRRD);goog.exportSymbol("X.parserNRRD.prototype.parse",X.parserNRRD.prototype.parse);X.parserSTL=function(){X.parser.call(this);this._classname="parserSTL"};goog.inherits(X.parserSTL,X.parser);
X.parserSTL.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");this._data=c;d=b._points;var e=b._normals;"solid"==this.parseChars(this.scan("uchar",5))?(b._points=d=new X.triplets(c.byteLength),b._normals=e=new X.triplets(c.byteLength),this.parseASCII(d,e,this.scan("uchar",c.byteLength-5))):(this.jumpTo(80),c=this.scan("uint"),b._points=d=new X.triplets(9*c),b._normals=e=new X.triplets(9*c),this.parseBIN(d,e,c));X.TIMERSTOP(this._classname+".parse");c=new X.event.ModifiedEvent;c._object=
b;c._container=a;this.dispatchEvent(c)};X.parserSTL.prototype.parseASCII=function(a,b,c){var d=c.length,e=!1,f=!1,g=0,h;for(h=0;h<d;h++)if(10==c[h]){if(e||f){var k=this.parseChars(c,g,h).split(" "),f=parseFloat(k[0]),l=parseFloat(k[1]),k=parseFloat(k[2]);e?(b.add(f,l,k),b.add(f,l,k),b.add(f,l,k)):a.add(f,l,k);f=e=!1}}else 32==c[h-1]&&(102==c[h]?(g=h+=13,e=!0):118==c[h]&&(g=h+=7,f=!0))};
X.parserSTL.prototype.parseBIN=function(a,b,c){for(var d=0,d=0;d<c;d++){var e=this.scan("float",12),f=e[0],g=e[1],h=e[2];b.add(f,g,h);b.add(f,g,h);b.add(f,g,h);a.add(e[3],e[4],e[5]);a.add(e[6],e[7],e[8]);a.add(e[9],e[10],e[11]);this._dataPointer+=2}};goog.exportSymbol("X.parserSTL",X.parserSTL);goog.exportSymbol("X.parserSTL.prototype.parse",X.parserSTL.prototype.parse);X.parserNII=function(){X.parser.call(this);this._classname="parserNII"};goog.inherits(X.parserNII,X.parser);
X.parserNII.prototype.parse=function(a,b,c,d){d=c;var e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new Zlib.Gunzip(new Uint8Array(d))).decompress(),d=d.buffer);c=this.parseStream(d);d=c.min;e=c.max;b._min=b._windowLow=d;b._max=b._windowHigh=e;-Infinity==b._lowerThreshold&&(b._lowerThreshold=d);Infinity==b._upperThreshold&&(b._upperThreshold=e);d=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setRowValues(d,3,0,0,0,1);if(0<c.qform_code){var e=
0,f=c.quatern_b,g=c.quatern_c,h=c.quatern_d,k=1,l=1,m=1,n=c.qoffset_x,p=c.qoffset_y,q=c.qoffset_z,e=1-(f*f+g*g+h*h);1E-7>e?(e=1/Math.sqrt(f*f+g*g+h*h),f*=e,g*=e,h*=e,e=0):e=Math.sqrt(e);0<c.pixdim[1]&&(k=c.pixdim[1]);0<c.pixdim[2]&&(l=c.pixdim[2]);0<c.pixdim[2]&&(m=c.pixdim[3]);0>c.pixdim[0]&&(m=-m);goog.vec.Mat4.setRowValues(d,0,(e*e+f*f-g*g-h*h)*k,2*(f*g-e*h)*l,2*(f*h+e*g)*m,n);goog.vec.Mat4.setRowValues(d,1,2*(f*g+e*h)*k,(e*e+g*g-f*f-h*h)*l,2*(g*h-e*f)*m,p);goog.vec.Mat4.setRowValues(d,2,2*(f*
h-e*g)*k,2*(g*h+e*f)*l,(e*e+h*h-g*g-f*f)*m,q)}else 0<c.sform_code?(e=c.srow_x,f=c.srow_y,g=c.srow_z,goog.vec.Mat4.setRowValues(d,0,e[0],e[1],e[2],e[3]),goog.vec.Mat4.setRowValues(d,1,f[0],f[1],f[2],f[3]),goog.vec.Mat4.setRowValues(d,2,g[0],g[1],g[2],g[3])):0==c.qform_code?(goog.vec.Mat4.setRowValues(d,0,c.pixdim[1],0,0,0),goog.vec.Mat4.setRowValues(d,1,0,c.pixdim[2],0,0),goog.vec.Mat4.setRowValues(d,2,0,0,c.pixdim[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.IJKToRAS=d;c.RASToIJK=goog.vec.Mat4.createFloat32();
goog.vec.Mat4.invert(c.IJKToRAS,c.RASToIJK);f=goog.vec.Vec4.createFloat32FromValues(0,0,0,1);e=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(d,f,e);g=goog.vec.Vec4.createFloat32FromValues(1,1,1,1);f=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(d,g,f);g=[c.dim[1],c.dim[2],c.dim[3]];d=X.parser.computeRASBBox(d,g);c.RASSpacing=[f[0]-e[0],f[1]-e[1],f[2]-e[2]];c.RASDimensions=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.RASOrigin=[d[0],d[2],d[4]];b._dimensions=g;b.create_(c);b._image=this.reslice(b);
c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};
X.parserNII.prototype.parseStream=function(a){this._data=a;a={sizeof_hdr:0,data_type:null,db_name:null,extents:0,session_error:0,regular:0,dim_info:null,dim:null,intent_p1:0,intent_p2:0,intent_p3:0,intent_code:0,datatype:0,bitpix:0,slice_start:0,pixdim:null,vox_offset:0,scl_slope:0,scl_inter:0,slice_end:0,slice_code:null,xyzt_units:null,cal_max:0,cal_min:0,slice_duration:0,toffset:0,glmax:0,glmin:0,descrip:null,aux_file:null,qform_code:0,sform_code:0,quatern_b:0,quatern_c:0,quatern_d:0,qoffset_x:0,
qoffset_y:0,qoffset_z:0,srow_x:null,srow_y:null,srow_z:null,intent_name:null,magic:null,data:null,min:Infinity,max:-Infinity};a.sizeof_hdr=this.scan("uint");a.data_type=this.scan("uchar",10);a.db_name=this.scan("uchar",18);a.extents=this.scan("uint");a.session_error=this.scan("ushort");a.regular=this.scan("uchar");a.dim_info=this.scan("uchar");a.dim=this.scan("ushort",8);a.intent_p1=this.scan("float");a.intent_p2=this.scan("float");a.intent_p3=this.scan("float");a.intent_code=this.scan("ushort");
a.datatype=this.scan("ushort");a.bitpix=this.scan("ushort");a.slice_start=this.scan("ushort");a.pixdim=this.scan("float",8);a.vox_offset=this.scan("float");a.scl_slope=this.scan("float");a.scl_inter=this.scan("float");a.slice_end=this.scan("ushort");a.slice_code=this.scan("uchar");a.xyzt_units=this.scan("uchar");a.cal_max=this.scan("float");a.cal_min=this.scan("float");a.slice_duration=this.scan("float");a.toffset=this.scan("float");a.glmax=this.scan("uint",1);a.glmin=this.scan("uint",1);a.descrip=
this.scan("uchar",80);a.aux_file=this.scan("uchar",24);a.qform_code=this.scan("ushort");a.sform_code=this.scan("ushort");a.quatern_b=this.scan("float");a.quatern_c=this.scan("float");a.quatern_d=this.scan("float");a.qoffset_x=this.scan("float");a.qoffset_y=this.scan("float");a.qoffset_z=this.scan("float");a.srow_x=this.scan("float",4);a.srow_y=this.scan("float",4);a.srow_z=this.scan("float",4);a.intent_name=this.scan("uchar",16);a.magic=this.scan("uchar",4);this.jumpTo(parseInt(a.vox_offset,10));
var b=a.dim[1]*a.dim[2]*a.dim[3];switch(a.datatype){case 2:a.data=this.scan("uchar",b);break;case 4:a.data=this.scan("sshort",b);break;case 8:a.data=this.scan("sint",b);break;case 16:a.data=this.scan("float",b);break;case 32:a.data=this.scan("complex",b);break;case 64:a.data=this.scan("double",b);break;case 256:a.data=this.scan("schar",b);break;case 512:a.data=this.scan("ushort",b);break;case 768:a.data=this.scan("uint",b);break;default:throw Error("Unsupported NII data type: "+a.datatype);}b=this.arrayMinMax(a.data);
a.min=b[0];a.max=b[1];return a};goog.exportSymbol("X.parserNII",X.parserNII);goog.exportSymbol("X.parserNII.prototype.parse",X.parserNII.prototype.parse);X.parserTRK=function(){X.parser.call(this);this._classname="parserTRK"};goog.inherits(X.parserTRK,X.parser);
X.parserTRK.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");var e=b._points,f=b._normals,g=b._colors;this._data=c;this.scan("uchar",6);this.scan("ushort",3);var h=this.scan("float",3);this.scan("float",3);var k=this.scan("ushort");this.scan("uchar",200);this.scan("ushort");this.scan("uchar",200);c=this.scan("float",16);this.scan("uchar",444);this.scan("uchar",4);this.scan("uchar",4);this.scan("float",6);this.scan("uchar",2);this.scan("uchar");this.scan("uchar");this.scan("uchar");
this.scan("uchar");this.scan("uchar");this.scan("uchar");var l=this.scan("uint");this.scan("uint");var m=this.scan("uint"),n=[],p=[];d=Infinity;var q=-Infinity,u=null,t=null,C=null,B=null,f=e=null,y=this.scan("uint",(this._data.byteLength-1E3)/4);this.jumpTo(m);for(var D=this.scan("float",(this._data.byteLength-1E3)/4),A=0,m=g=0;m<l;m++){for(var F=y[A],I=new X.triplets(3*F),G=0,w=0;w<F;w++){var E=D[A+3*w+w*k+1],z=D[A+3*w+w*k+2],r=D[A+3*w+w*k+3],E=E/h[0],z=z/h[1],r=r/h[2];I.add(E,z,r);if(0<w)var s=
I.get(w-1),G=G+Math.sqrt(Math.pow(E-s[0],2)+Math.pow(z-s[1],2)+Math.pow(r-s[2],2));w<F-1&&(g+=6)}A+=3*F+F*k+1;w=I._minA;F=I._maxA;E=I._minB;z=I._maxB;r=I._minC;s=I._maxC;if(!u||w<u)u=w;if(!t||F>t)t=F;if(!C||E<C)C=E;if(!B||z>B)B=z;if(!e||r<e)e=r;if(!f||s>f)f=s;n.push(I);p.push(G)}h=(u+t)/2;C=(C+B)/2;k=(e+f)/2;B=new Float32Array(g);b._points=e=new X.triplets(g);b._normals=f=new X.triplets(g);b._colors=g=new X.triplets(g);for(m=u=0;m<l;m++)for(t=n[m],y=t.count,G=p[m],d=Math.min(d,G),q=Math.max(q,G),
w=0;w<y-1;w++){A=t.get(w);D=t.get(w+1);e.add(A[0],A[1],A[2]);e.add(D[0],D[1],D[2]);var I=A[0]-h,F=A[1]-C,E=A[2]-k,z=Math.sqrt(I*I+F*F+E*E),r=D[0]-h,s=D[1]-C,H=D[2]-k,K=Math.sqrt(r*r+s*s+H*H);f.add(I/z,F/z,E/z);f.add(r/K,s/K,H/K);D=[Math.abs(D[0]-A[0]),Math.abs(D[1]-A[1]),Math.abs(D[2]-A[2])];A=Math.sqrt(D[0]*D[0]+D[1]*D[1]+D[2]*D[2]);D[0]/=A;D[1]/=A;D[2]/=A;g.add(D[0],D[1],D[2]);g.add(D[0],D[1],D[2]);B[u++]=G;B[u++]=G;B[u++]=G;B[u++]=G;B[u++]=G;B[u++]=G}b._type=X.displayable.types.LINES;l=new X.scalars;
l._min=d;l._max=q;l._lowerThreshold=d;l._upperThreshold=q;l._glArray=B;l._replaceMode=!1;l._dirty=!0;b._scalars=l;d=!1;for(m=0;16>m;m++)if(0!=c[m]){d=!0;break}!1==d&&(c[0]=c[5]=c[10]=c[15]=1);X.TIMERSTOP(this._classname+".parse");X.matrix.transpose(c,b._transform._matrix);c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};goog.exportSymbol("X.parserTRK",X.parserTRK);goog.exportSymbol("X.parserTRK.prototype.parse",X.parserTRK.prototype.parse);X.parserOBJ=function(){X.parser.call(this);this._classname="parserOBJ"};goog.inherits(X.parserOBJ,X.parser);
X.parserOBJ.prototype.parse=function(a,b,c,d){X.TIMER(this._classname+".parse");this._data=c;c=c.byteLength;d=this.scan("uchar",c);var e=[];b._points=new X.triplets(c);b._normals=new X.triplets(c);var f=b._points,g=b._normals,h=0,k;for(k=0;k<c;++k)if(10==d[k]){h=this.parseChars(d,h,k).replace(/\s{2,}/g," ").split(" ");if("v"==h[0]){var l=parseFloat(h[1]),m=parseFloat(h[2]),h=parseFloat(h[3]);e.push([l,m,h])}else"f"==h[0]&&(m=e[parseInt(h[1],10)-1],l=e[parseInt(h[2],10)-1],h=e[parseInt(h[3],10)-1],
f.add(m[0],m[1],m[2]),f.add(l[0],l[1],l[2]),f.add(h[0],h[1],h[2]),m=new goog.math.Vec3(m[0],m[1],m[2]),l=new goog.math.Vec3(l[0],l[1],l[2]),h=new goog.math.Vec3(h[0],h[1],h[2]),h=goog.math.Vec3.cross(l.subtract(m),h.subtract(m)),h.normalize(),g.add(h.x,h.y,h.z),g.add(h.x,h.y,h.z),g.add(h.x,h.y,h.z));h=k+1}X.TIMERSTOP(this._classname+".parse");c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};goog.exportSymbol("X.parserOBJ",X.parserOBJ);
goog.exportSymbol("X.parserOBJ.prototype.parse",X.parserOBJ.prototype.parse);X.loader=function(){X.base.call(this);this._classname="loader";this._jobs=new goog.structs.Map;this._progress=0};goog.inherits(X.loader,X.base);X.loader.prototype.completed=function(){return!this._jobs.containsValue(!1)};X.loader.prototype.addProgress=function(a){this._progress+=a/this._jobs.getCount()/3;this._progress=Math.min(1,this._progress);a=new X.event.ProgressEvent;a._value=this._progress;this.dispatchEvent(a)};
X.loader.prototype.checkFileFormat=function(a){a=a._file._path;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in X.loader.extensions))throw Error("The "+b+" file format is not supported.");return[a,b,X.loader.extensions[b][0],X.loader.extensions[b][1],X.loader.extensions[b][2]]};
X.loader.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!this._jobs.containsKey(a._id)||this._jobs.get(a._id)){this._jobs.set(a._id,!1);var c=this.checkFileFormat(a)[0];if(null!=a._filedata)this.parse(null,a,b);else{var d=new XMLHttpRequest;goog.events.listen(d,"abort",this.failed.bind(this,d,a,b));goog.events.listen(d,"error",this.failed.bind(this,d,a,b));goog.events.listen(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";
d.send(null)}}};X.loader.prototype.parse=function(a,b,c){this.addProgress(1);setTimeout(function(){var d=this.checkFileFormat(b),e=d[3],d=new d[2];goog.events.listenOnce(d,X.event.events.MODIFIED,this.complete.bind(this));var f=b._filedata;null==f&&(f=a.response,b._filedata=f);d.parse(b,c,f,e)}.bind(this),100)};
X.loader.prototype.complete=function(a){this.addProgress(1);setTimeout(function(){var b=a._container,c=a._object;b._file._dirty=!1;b._dirty=!0;c.modified();this._jobs.set(b._id,!0)}.bind(this),100)};X.loader.prototype.failed=function(a,b,c){throw Error("Loading failed: ",b,c);};
X.loader.extensions={OBJ:[X.parserOBJ,null],OFF:[X.parserOFF,null],STL:[X.parserSTL,null],VTK:[X.parserVTK,null],TRK:[X.parserTRK,null],MRC:[X.parserMRC,null],ST:[X.parserMRC,null],FSM:[X.parserFSM,null],INFLATED:[X.parserFSM,null],SMOOTHWM:[X.parserFSM,null],SPHERE:[X.parserFSM,null],PIAL:[X.parserFSM,null],ORIG:[X.parserFSM,null],NRRD:[X.parserNRRD,null],NII:[X.parserNII,null],GZ:[X.parserNII,null],DCM:[X.parserDCM,null],DICOM:[X.parserDCM,null],"":[X.parserDCM,null],CRV:[X.parserCRV,null],LABEL:[X.parserLBL,
null],MGH:[X.parserMGZ,!1],MGZ:[X.parserMGZ,!0],RAW:[X.parserRAW,!1],RZ:[X.parserRAW,!0],TXT:[X.parserLUT,null],LUT:[X.parserLUT,null],PNG:[X.parserIMAGE,"png"],JPG:[X.parserIMAGE,"jpeg"],JPEG:[X.parserIMAGE,"jpeg"],GIF:[X.parserIMAGE,"gif"]};X.parserIMA=function(){X.parser.call(this);this._classname="parserIMA"};goog.inherits(X.parserIMA,X.parser);
X.parserIMA.prototype.parse=function(a,b,c,d){b.MRI={};b.MRI.loaded_files=0;this.parseStream(c,b);if(!goog.isDefAndNotNull(b._file.length)||b.slices.length==b._file.length){b.MRI.loaded_files=b._file.length;var e={};c={};for(d=0;d<b.slices.length;d++)e.hasOwnProperty(b.slices[d].series_instance_uid)||(e[b.slices[d].series_instance_uid]=[],c[b.slices[d].series_instance_uid]={}),c[b.slices[d].series_instance_uid].hasOwnProperty(b.slices[d].sop_instance_uid)||(c[b.slices[d].series_instance_uid][b.slices[d].sop_instance_uid]=
!0,e[b.slices[d].series_instance_uid].push(b.slices[d]));var f=Object.keys(e)[0];d=e[f];var g=d.length;c={};console.log("FIRST IMAGE",d,e,f);var h="image_position_patient";1==g?(h="image_position_patient",e[f][0].dist=0):d[0].image_position_patient[0]!=d[1].image_position_patient[0]||d[0].image_position_patient[1]!=d[1].image_position_patient[1]||d[0].image_position_patient[2]!=d[1].image_position_patient[2]?(h="image_position_patient",e=new goog.math.Vec3(d[0].image_orientation_patient[0],d[0].image_orientation_patient[1],
d[0].image_orientation_patient[2]),f=new goog.math.Vec3(d[0].image_orientation_patient[3],d[0].image_orientation_patient[4],d[0].image_orientation_patient[5]),e=goog.math.Vec3.cross(e,f),d.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,e)),d.sort(function(a,b){return a.dist-b.dist})):d[0].instance_number!=d[1].instance_number?(h="instance_number",d.sort(function(a,b){return a.instance_number-b.instance_number})):
window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+d[0].sequence_name+"'");-1<["fgre","memp","fse"].indexOf(d[0].sequence_name)&&(window.console.log(d[0].sequence_name,"reordering..."),h="instance_number",d.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(d[0].pixel_spacing[0])&&(d[0].pixel_spacing[0]=1);isNaN(d[0].pixel_spacing[1])&&(d[0].pixel_spacing[1]=1);if(1<g)switch(h){case "image_position_patient":var k=d[0].image_position_patient,
e=d[1].image_position_patient,f=e[0]-k[0],l=e[1]-k[1],m=e[2]-k[2];d[0].pixel_spacing[2]=Math.sqrt(f*f+l*l+m*m);break;case "instance_number":d[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+h)}else d[0].pixel_spacing[2]=1;e=1;switch(h){case "image_position_patient":var k=d[0].image_position_patient,n=d[g-1].image_position_patient,f=n[0]-k[0],l=n[1]-k[1],m=n[2]-k[2],f=Math.sqrt(f*f+l*l+m*m),e=e+Math.round(f/d[0].pixel_spacing[2]);
break;case "instance_number":e+=Math.abs(d[g-1].instance_number-d[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+h)}k=d[0].columns*d[0].rows;f=k*e;n=null;switch(d[0].bits_allocated){case 8:n=new Uint8Array(f);break;case 16:n=new Uint16Array(f);break;case 32:n=new Uint32Array(f);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b._spacing=d[0].pixel_spacing;for(var p=0;p<g;p++){var q=d[p].data,f=0;switch(h){case "image_position_patient":f=
d[p].image_position_patient[0]-d[0].image_position_patient[0];l=d[p].image_position_patient[1]-d[0].image_position_patient[1];m=d[p].image_position_patient[2]-d[0].image_position_patient[2];f=Math.sqrt(f*f+l*l+m*m)/d[0].pixel_spacing[2];break;case "instance_number":f=d[p].instance_number-d[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+h)}n.set(q,f*k)}c.data=n;b._data=n;b._dimensions=[d[0].columns,d[0].rows,e];c.dimensions=b._dimensions;e=this.arrayMinMax(n);
g=e[0];e=e[1];c.min=b._min=b._windowLow=g;c.max=b._max=b._windowHigh=e;-Infinity==b._lowerThreshold&&(b._lowerThreshold=g);Infinity==b._upperThreshold&&(b._upperThreshold=e);l=d[0].image_position_patient;g=goog.vec.Mat4.createFloat32();switch(h){case "image_position_patient":console.log("ORIENTATION",d[0].image_orientation_patient);e=new goog.math.Vec3(d[0].image_orientation_patient[0],d[0].image_orientation_patient[1],d[0].image_orientation_patient[2]);f=new goog.math.Vec3(d[0].image_orientation_patient[3],
d[0].image_orientation_patient[4],d[0].image_orientation_patient[5]);e=goog.math.Vec3.cross(e,f);goog.vec.Mat4.setRowValues(g,0,-d[0].image_orientation_patient[0]*d[0].pixel_spacing[0],-d[0].image_orientation_patient[3]*d[0].pixel_spacing[1],-e.x*d[0].pixel_spacing[2],-l[0]);goog.vec.Mat4.setRowValues(g,1,-d[0].image_orientation_patient[1]*d[0].pixel_spacing[0],-d[0].image_orientation_patient[4]*d[0].pixel_spacing[1],-e.y*d[0].pixel_spacing[2],-l[1]);goog.vec.Mat4.setRowValues(g,2,d[0].image_orientation_patient[2]*
d[0].pixel_spacing[0],d[0].image_orientation_patient[5]*d[0].pixel_spacing[1],e.z*d[0].pixel_spacing[2],l[2]);goog.vec.Mat4.setRowValues(g,3,0,0,0,1);break;case "instance_number":"memp"===d[0].sequence_name||"fse"===d[0].sequence_name?(e=new goog.math.Vec3(d[0].image_orientation_patient[0],d[0].image_orientation_patient[1],d[0].image_orientation_patient[2]),f=new goog.math.Vec3(d[0].image_orientation_patient[3],d[0].image_orientation_patient[4],d[0].image_orientation_patient[5]),e=goog.math.Vec3.cross(e,
f),goog.vec.Mat4.setRowValues(g,0,-d[0].image_orientation_patient[0]*d[0].pixel_spacing[0],-d[0].image_orientation_patient[3]*d[0].pixel_spacing[1],-e.x*d[0].pixel_spacing[2]*d[0].slice_thickness,-l[0]),goog.vec.Mat4.setRowValues(g,1,-d[0].image_orientation_patient[1]*d[0].pixel_spacing[0],-d[0].image_orientation_patient[4]*d[0].pixel_spacing[1],-e.y*d[0].pixel_spacing[2]*d[0].slice_thickness,-l[1]),goog.vec.Mat4.setRowValues(g,2,d[0].image_orientation_patient[2]*d[0].pixel_spacing[0],d[0].image_orientation_patient[5]*
d[0].pixel_spacing[1],e.z*d[0].pixel_spacing[2]*d[0].slice_thickness,l[2])):(goog.vec.Mat4.setRowValues(g,0,1,0,0,-l[0]),goog.vec.Mat4.setRowValues(g,1,0,-1,-0,-l[1]),goog.vec.Mat4.setRowValues(g,2,0,0,1,l[2]));goog.vec.Mat4.setRowValues(g,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+h)}c.IJKToRAS=g;c.RASToIJK=goog.vec.Mat4.createFloat32();goog.vec.Mat4.invert(c.IJKToRAS,c.RASToIJK);h=goog.vec.Vec4.createFloat32FromValues(0,0,0,1);d=goog.vec.Vec4.createFloat32();
goog.vec.Mat4.multVec4(g,h,d);h=goog.vec.Vec4.createFloat32FromValues(1,1,1,1);e=goog.vec.Vec4.createFloat32();goog.vec.Mat4.multVec4(g,h,e);c.RASSpacing=[e[0]-d[0],e[1]-d[1],e[2]-d[2]];d=X.parser.computeRASBBox(g,[b._dimensions[0],b._dimensions[1],b._dimensions[2]]);c.RASDimensions=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.RASOrigin=[d[0],d[2],d[4]];b.create_(c);b._image=this.reslice(b)}c=new X.event.ModifiedEvent;c._object=b;c._container=a;this.dispatchEvent(c)};
X.parserIMA.prototype.handleDefaults=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];var e=a[b++],f=(d&65280)>>8;a=e&255;e=(e&65280)>>8;d=c(d&255);d=c(f)+d;a=c(a);c=c(e)+a+d;d=parseInt(c,2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
X.parserIMA.prototype.parseStream=function(a,b){this._data=a;if("undefined"==typeof b.slices||null==b.slices)b.slices=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.scan("ushort",this._data.byteLength),e=66,f=null,g=null,h=null,k=null,l=[[8,4368],[8,4384]],m=!1;e<d.length;){for(var f=d[e++],g=d[e++],h=d[e++],k=d[e++],m=!1,n=0,p=l.length;n<p;n++)if(f===l[n][0]&&g===l[n][1]){m=!0;
break}if(m)window.console.log("Skipping ","("+f.toString(16)+","+g.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==k&&(k=h),f){case 2:switch(g){case 16:g="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,g+=String.fromCharCode(f),g+=String.fromCharCode(h);c.transfer_syntax_uid=g.replace(/\0/g,"");break;default:e=X.parserIMA.prototype.handleDefaults(d,e,h,k)}break;case 40:switch(g){case 16:c.rows=d[e];e+=k/2;break;case 17:c.columns=d[e];e+=k/2;break;case 256:c.bits_allocated=
d[e];e+=k/2;break;case 257:c.bits_stored=d[e];e+=k/2;break;case 2:c.number_of_images=d[e];e+=k/2;break;case 48:g="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,g+=String.fromCharCode(f),g+=String.fromCharCode(h);g=g.split("\\");c.pixel_spacing=[parseFloat(g[0]),parseFloat(g[1]),Infinity];break;default:e=X.parserIMA.prototype.handleDefaults(d,e,h,k)}break;case 32:switch(g){case 14:c.series_instance_uid="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,c.series_instance_uid+=String.fromCharCode(f),
c.series_instance_uid+=String.fromCharCode(h);break;case 19:g="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,g+=String.fromCharCode(f),g+=String.fromCharCode(h);c.instance_number=parseInt(g,10);break;case 50:g="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,g+=String.fromCharCode(f),g+=String.fromCharCode(h);g=g.split("\\");c.image_position_patient=[parseFloat(g[0]),parseFloat(g[1]),parseFloat(g[2])];break;case 55:g="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,g+=String.fromCharCode(f),
g+=String.fromCharCode(h);g=g.split("\\");c.image_orientation_patient=[parseFloat(g[0]),parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3]),parseFloat(g[4]),parseFloat(g[5])];break;default:e=X.parserIMA.prototype.handleDefaults(d,e,h,k)}break;case 24:switch(g){case 36:c.sequence_name="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,c.sequence_name+=String.fromCharCode(f),c.sequence_name+=String.fromCharCode(h);c.sequence_name=goog.string.trimLeft(c.sequence_name);c.sequence_name=goog.string.trimRight(c.sequence_name);
break;case 80:c.slice_thickness="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,c.slice_thickness+=String.fromCharCode(f),c.slice_thickness+=String.fromCharCode(h);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=X.parserIMA.prototype.handleDefaults(d,e,h,k);break}case 65534:switch(g){default:k=0,e+=k/2}break;case 8:switch(g){case 24:c.sop_instance_uid="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,c.sop_instance_uid+=String.fromCharCode(f),c.sop_instance_uid+=String.fromCharCode(h);
break;default:e=X.parserIMA.prototype.handleDefaults(d,e,h,k)}break;case 16:switch(g){case 8720:g="";for(n=0;n<k/2;n++)h=d[e++],f=h&255,h=(h&65280)>>8,g+=String.fromCharCode(f),g+=String.fromCharCode(h);break;default:e=X.parserIMA.prototype.handleDefaults(d,e,h,k)}break;default:e=X.parserIMA.prototype.handleDefaults(d,e,h,k)}}switch(c.bits_allocated){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*
c.rows)}this.jumpTo(this._data.byteLength-c.columns*c.rows*2);d=null;switch(c.bits_allocated){case 8:d=this.scan("uchar",c.columns*c.rows);break;case 16:d=this.scan("ushort",c.columns*c.rows);break;case 32:d=this.scan("uint",c.columns*c.rows)}c.data=d;b.slices.push(c);return b};goog.exportSymbol("X.parserIMA",X.parserIMA);goog.exportSymbol("X.parserIMA.prototype.parse",X.parserIMA.prototype.parse);goog.uri={};goog.uri.utils={};goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(a,b,c,d,e,f,g){var h="";a&&(h+=a+":");c&&(h+="//",b&&(h+=b+"@"),h+=c,d&&(h+=":"+d));e&&(h+=e);f&&(h+="?"+f);g&&(h+="#"+g);return h};goog.uri.utils.splitRe_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(a){goog.uri.utils.phishingProtection_();return a.match(goog.uri.utils.splitRe_)};goog.uri.utils.needsPhishingProtection_=goog.userAgent.WEBKIT;
goog.uri.utils.phishingProtection_=function(){if(goog.uri.utils.needsPhishingProtection_){goog.uri.utils.needsPhishingProtection_=!1;var a=goog.global.location;if(a){var b=a.href;if(b&&(b=goog.uri.utils.getDomain(b))&&b!=a.hostname)throw goog.uri.utils.needsPhishingProtection_=!0,Error();}}};goog.uri.utils.decodeIfPossible_=function(a){return a&&decodeURIComponent(a)};goog.uri.utils.getComponentByIndex_=function(a,b){return goog.uri.utils.split(b)[a]||null};
goog.uri.utils.getScheme=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,a)};goog.uri.utils.getEffectiveScheme=function(a){a=goog.uri.utils.getScheme(a);!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1));return a?a.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,a)};goog.uri.utils.getUserInfo=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(a))};
goog.uri.utils.getDomainEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,a)};goog.uri.utils.getDomain=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(a))};goog.uri.utils.getPort=function(a){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,a))||null};goog.uri.utils.getPathEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,a)};
goog.uri.utils.getPath=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(a))};goog.uri.utils.getQueryData=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,a)};goog.uri.utils.getFragmentEncoded=function(a){var b=a.indexOf("#");return 0>b?null:a.substr(b+1)};goog.uri.utils.setFragmentEncoded=function(a,b){return goog.uri.utils.removeFragment(a)+(b?"#"+b:"")};goog.uri.utils.getFragment=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(a))};
goog.uri.utils.getHost=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],a[goog.uri.utils.ComponentIndex.USER_INFO],a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,a[goog.uri.utils.ComponentIndex.PATH],a[goog.uri.utils.ComponentIndex.QUERY_DATA],a[goog.uri.utils.ComponentIndex.FRAGMENT])};
goog.uri.utils.removeFragment=function(a){var b=a.indexOf("#");return 0>b?a:a.substr(0,b)};goog.uri.utils.haveSameDomain=function(a,b){var c=goog.uri.utils.split(a),d=goog.uri.utils.split(b);return c[goog.uri.utils.ComponentIndex.DOMAIN]==d[goog.uri.utils.ComponentIndex.DOMAIN]&&c[goog.uri.utils.ComponentIndex.SCHEME]==d[goog.uri.utils.ComponentIndex.SCHEME]&&c[goog.uri.utils.ComponentIndex.PORT]==d[goog.uri.utils.ComponentIndex.PORT]};
goog.uri.utils.assertNoFragmentsOrQueries_=function(a){if(goog.DEBUG&&(0<=a.indexOf("#")||0<=a.indexOf("?")))throw Error("goog.uri.utils: Fragment or query identifiers are not supported: ["+a+"]");};goog.uri.utils.appendQueryData_=function(a){if(a[1]){var b=a[0],c=b.indexOf("#");0<=c&&(a.push(b.substr(c)),a[0]=b=b.substr(0,c));c=b.indexOf("?");0>c?a[1]="?":c==b.length-1&&(a[1]=void 0)}return a.join("")};
goog.uri.utils.appendKeyValuePairs_=function(a,b,c){if(goog.isArray(b)){goog.asserts.assertArray(b);for(var d=0;d<b.length;d++)goog.uri.utils.appendKeyValuePairs_(a,String(b[d]),c)}else null!=b&&c.push("&",a,""===b?"":"=",goog.string.urlEncode(b))};goog.uri.utils.buildQueryDataBuffer_=function(a,b,c){goog.asserts.assert(0==Math.max(b.length-(c||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");for(c=c||0;c<b.length;c+=2)goog.uri.utils.appendKeyValuePairs_(b[c],b[c+1],a);return a};
goog.uri.utils.buildQueryData=function(a,b){var c=goog.uri.utils.buildQueryDataBuffer_([],a,b);c[0]="";return c.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(a,b){for(var c in b)goog.uri.utils.appendKeyValuePairs_(c,b[c],a);return a};goog.uri.utils.buildQueryDataFromMap=function(a){a=goog.uri.utils.buildQueryDataBufferFromMap_([],a);a[0]="";return a.join("")};
goog.uri.utils.appendParams=function(a,b){return goog.uri.utils.appendQueryData_(2==arguments.length?goog.uri.utils.buildQueryDataBuffer_([a],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([a],arguments,1))};goog.uri.utils.appendParamsFromMap=function(a,b){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([a],b))};goog.uri.utils.appendParam=function(a,b,c){a=[a,"&",b];goog.isDefAndNotNull(c)&&a.push("=",goog.string.urlEncode(c));return goog.uri.utils.appendQueryData_(a)};
goog.uri.utils.findParam_=function(a,b,c,d){for(var e=c.length;0<=(b=a.indexOf(c,b))&&b<d;){var f=a.charCodeAt(b-1);if(f==goog.uri.utils.CharCode_.AMPERSAND||f==goog.uri.utils.CharCode_.QUESTION)if(f=a.charCodeAt(b+e),!f||f==goog.uri.utils.CharCode_.EQUAL||f==goog.uri.utils.CharCode_.AMPERSAND||f==goog.uri.utils.CharCode_.HASH)return b;b+=e+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(a,b){return 0<=goog.uri.utils.findParam_(a,0,b,a.search(goog.uri.utils.hashOrEndRe_))};
goog.uri.utils.getParamValue=function(a,b){var c=a.search(goog.uri.utils.hashOrEndRe_),d=goog.uri.utils.findParam_(a,0,b,c);if(0>d)return null;var e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return goog.string.urlDecode(a.substr(d,e-d))};goog.uri.utils.getParamValues=function(a,b){for(var c=a.search(goog.uri.utils.hashOrEndRe_),d=0,e,f=[];0<=(e=goog.uri.utils.findParam_(a,d,b,c));){d=a.indexOf("&",e);if(0>d||d>c)d=c;e+=b.length+1;f.push(goog.string.urlDecode(a.substr(e,d-e)))}return f};
goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(a,b){for(var c=a.search(goog.uri.utils.hashOrEndRe_),d=0,e,f=[];0<=(e=goog.uri.utils.findParam_(a,d,b,c));)f.push(a.substring(d,e)),d=Math.min(a.indexOf("&",e)+1||c,c);f.push(a.substr(d));return f.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(a,b,c){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(a,b),b,c)};
goog.uri.utils.appendPath=function(a,b){goog.uri.utils.assertNoFragmentsOrQueries_(a);goog.string.endsWith(a,"/")&&(a=a.substr(0,a.length-1));goog.string.startsWith(b,"/")&&(b=b.substr(1));return goog.string.buildString(a,"/",b)};
goog.uri.utils.setPath=function(a,b){goog.string.startsWith(b,"/")||(b="/"+b);var c=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(c[goog.uri.utils.ComponentIndex.SCHEME],c[goog.uri.utils.ComponentIndex.USER_INFO],c[goog.uri.utils.ComponentIndex.DOMAIN],c[goog.uri.utils.ComponentIndex.PORT],b,c[goog.uri.utils.ComponentIndex.QUERY_DATA],c[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};
goog.uri.utils.makeUnique=function(a){return goog.uri.utils.setParam(a,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.Timer=function(a,b){goog.events.EventTarget.call(this);this.interval_=a||1;this.timerObject_=b||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};
goog.Timer.prototype.setInterval=function(a){this.interval_=a;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};
goog.Timer.prototype.tick_=function(){if(this.enabled){var a=goog.now()-this.last_;0<a&&a<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-a):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};
goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";
goog.Timer.callOnce=function(a,b,c){if(goog.isFunction(a))c&&(a=goog.bind(a,c));else if(a&&"function"==typeof a.handleEvent)a=goog.bind(a.handleEvent,a);else throw Error("Invalid listener argument");return b>goog.Timer.MAX_TIMEOUT_?-1:goog.Timer.defaultTimerObject.setTimeout(a,b||0)};goog.Timer.clear=function(a){goog.Timer.defaultTimerObject.clearTimeout(a)};goog.structs.getCount=function(a){return"function"==typeof a.getCount?a.getCount():goog.isArrayLike(a)||goog.isString(a)?a.length:goog.object.getCount(a)};goog.structs.getValues=function(a){if("function"==typeof a.getValues)return a.getValues();if(goog.isString(a))return a.split("");if(goog.isArrayLike(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return goog.object.getValues(a)};
goog.structs.getKeys=function(a){if("function"==typeof a.getKeys)return a.getKeys();if("function"!=typeof a.getValues){if(goog.isArrayLike(a)||goog.isString(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return goog.object.getKeys(a)}};goog.structs.contains=function(a,b){return"function"==typeof a.contains?a.contains(b):"function"==typeof a.containsValue?a.containsValue(b):goog.isArrayLike(a)||goog.isString(a)?goog.array.contains(a,b):goog.object.containsValue(a,b)};
goog.structs.isEmpty=function(a){return"function"==typeof a.isEmpty?a.isEmpty():goog.isArrayLike(a)||goog.isString(a)?goog.array.isEmpty(a):goog.object.isEmpty(a)};goog.structs.clear=function(a){"function"==typeof a.clear?a.clear():goog.isArrayLike(a)?goog.array.clear(a):goog.object.clear(a)};
goog.structs.forEach=function(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(goog.isArrayLike(a)||goog.isString(a))goog.array.forEach(a,b,c);else for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)};
goog.structs.filter=function(a,b,c){if("function"==typeof a.filter)return a.filter(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.filter(a,b,c);var d,e=goog.structs.getKeys(a),f=goog.structs.getValues(a),g=f.length;if(e){d={};for(var h=0;h<g;h++)b.call(c,f[h],e[h],a)&&(d[e[h]]=f[h])}else for(d=[],h=0;h<g;h++)b.call(c,f[h],void 0,a)&&d.push(f[h]);return d};
goog.structs.map=function(a,b,c){if("function"==typeof a.map)return a.map(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.map(a,b,c);var d,e=goog.structs.getKeys(a),f=goog.structs.getValues(a),g=f.length;if(e){d={};for(var h=0;h<g;h++)d[e[h]]=b.call(c,f[h],e[h],a)}else for(d=[],h=0;h<g;h++)d[h]=b.call(c,f[h],void 0,a);return d};
goog.structs.some=function(a,b,c){if("function"==typeof a.some)return a.some(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.some(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(b.call(c,e[g],d&&d[g],a))return!0;return!1};
goog.structs.every=function(a,b,c){if("function"==typeof a.every)return a.every(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.every(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(!b.call(c,e[g],d&&d[g],a))return!1;return!0};goog.net={};goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};
goog.net.ErrorCode.getDebugMessage=function(a){switch(a){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";
case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.net.HttpStatus={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,
PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUEST_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,QUIRK_IE_NO_CONTENT:1223};
goog.net.HttpStatus.isSuccess=function(a){switch(a){case goog.net.HttpStatus.OK:case goog.net.HttpStatus.CREATED:case goog.net.HttpStatus.ACCEPTED:case goog.net.HttpStatus.NO_CONTENT:case goog.net.HttpStatus.PARTIAL_CONTENT:case goog.net.HttpStatus.NOT_MODIFIED:case goog.net.HttpStatus.QUIRK_IE_NO_CONTENT:return!0;default:return!1}};goog.json={};goog.json.USE_NATIVE_JSON=!1;goog.json.isValid_=function(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))};
goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){a=String(a);if(goog.json.isValid_(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};goog.json.unsafeParse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){return eval("("+a+")")};goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(a,b){return(new goog.json.Serializer(b)).serialize(a)};goog.json.Serializer=function(a){this.replacer_=a};
goog.json.Serializer.prototype.serialize=function(a){var b=[];this.serializeInternal(a,b);return b.join("")};
goog.json.Serializer.prototype.serializeInternal=function(a,b){switch(typeof a){case "string":this.serializeString_(a,b);break;case "number":this.serializeNumber_(a,b);break;case "boolean":b.push(a);break;case "undefined":b.push("null");break;case "object":if(null==a){b.push("null");break}if(goog.isArray(a)){this.serializeArray(a,b);break}this.serializeObject_(a,b);break;case "function":break;default:throw Error("Unknown type: "+typeof a);}};
goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
goog.json.Serializer.prototype.serializeString_=function(a,b){b.push('"',a.replace(goog.json.Serializer.charsToReplace_,function(a){if(a in goog.json.Serializer.charToJsonCharCache_)return goog.json.Serializer.charToJsonCharCache_[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return goog.json.Serializer.charToJsonCharCache_[a]=e+b.toString(16)}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(a,b){b.push(isFinite(a)&&!isNaN(a)?a:"null")};
goog.json.Serializer.prototype.serializeArray=function(a,b){var c=a.length;b.push("[");for(var d="",e=0;e<c;e++)b.push(d),d=a[e],this.serializeInternal(this.replacer_?this.replacer_.call(a,String(e),d):d,b),d=",";b.push("]")};
goog.json.Serializer.prototype.serializeObject_=function(a,b){b.push("{");var c="",d;for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d];"function"!=typeof e&&(b.push(c),this.serializeString_(d,b),b.push(":"),this.serializeInternal(this.replacer_?this.replacer_.call(a,d,e):e,b),c=",")}b.push("}")};goog.net.XhrLike=function(){};goog.net.XhrLike.prototype.open=function(a,b,c,d,e){};goog.net.XhrLike.prototype.send=function(a){};goog.net.XhrLike.prototype.abort=function(){};goog.net.XhrLike.prototype.setRequestHeader=function(a,b){};goog.net.XhrLike.prototype.getResponseHeader=function(a){};goog.net.XhrLike.prototype.getAllResponseHeaders=function(){};goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.WrapperXmlHttpFactory=function(a,b){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=a;this.optionsFactory_=b};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.net.XmlHttp.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttpDefines={};goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};
goog.net.XmlHttp.setFactory=function(a,b){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(goog.asserts.assert(a),goog.asserts.assert(b)))};goog.net.XmlHttp.setGlobalFactory=function(a){goog.net.XmlHttp.factory_=a};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);
goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){var a=this.getProgId_();return a?new ActiveXObject(a):new XMLHttpRequest};goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){var a={};this.getProgId_()&&(a[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=!0,a[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=!0);return a};
goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR||goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR)return"";if(!this.ieProgId_&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],b=0;b<a.length;b++){var c=a[b];try{return new ActiveXObject(c),this.ieProgId_=c}catch(d){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");
}return this.ieProgId_};goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory);goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.structs.Collection=function(){};goog.structs.Set=function(a){this.map_=new goog.structs.Map;a&&this.addAll(a)};goog.structs.Set.getKey_=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+goog.getUid(a):b.substr(0,1)+a};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(a){this.map_.set(goog.structs.Set.getKey_(a),a)};goog.structs.Set.prototype.addAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};
goog.structs.Set.prototype.removeAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};goog.structs.Set.prototype.remove=function(a){return this.map_.remove(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(a){return this.map_.containsKey(goog.structs.Set.getKey_(a))};
goog.structs.Set.prototype.containsAll=function(a){return goog.structs.every(a,this.contains,this)};goog.structs.Set.prototype.intersection=function(a){var b=new goog.structs.Set;a=goog.structs.getValues(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};goog.structs.Set.prototype.difference=function(a){var b=this.clone();b.removeAll(a);return b};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};
goog.structs.Set.prototype.equals=function(a){return this.getCount()==goog.structs.getCount(a)&&this.isSubsetOf(a)};goog.structs.Set.prototype.isSubsetOf=function(a){var b=goog.structs.getCount(a);if(this.getCount()>b)return!1;!(a instanceof goog.structs.Set)&&5<b&&(a=new goog.structs.Set(a));return goog.structs.every(this,function(b){return goog.structs.contains(a,b)})};goog.structs.Set.prototype.__iterator__=function(a){return this.map_.__iterator__(!1)};goog.debug.LOGGING_ENABLED=goog.DEBUG;goog.debug.catchErrors=function(a,b,c){c=c||goog.global;var d=c.onerror,e=!!b;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(e=!e);c.onerror=function(b,c,h,k,l){d&&d(b,c,h,k,l);a({message:b,fileName:c,line:h,col:k,error:l});return e}};goog.debug.expose=function(a,b){if("undefined"==typeof a)return"undefined";if(null==a)return"NULL";var c=[],d;for(d in a)if(b||!goog.isFunction(a[d])){var e=d+" = ";try{e+=a[d]}catch(f){e+="*** "+f+" ***"}c.push(e)}return c.join("\n")};
goog.debug.deepExpose=function(a,b){var c=[],d=function(a,f,g){var h=f+"  ";g=new goog.structs.Set(g);try{if(goog.isDef(a))if(goog.isNull(a))c.push("NULL");else if(goog.isString(a))c.push('"'+a.replace(/\n/g,"\n"+f)+'"');else if(goog.isFunction(a))c.push(String(a).replace(/\n/g,"\n"+f));else if(goog.isObject(a))if(g.contains(a))c.push("*** reference loop detected ***");else{g.add(a);c.push("{");for(var k in a)if(b||!goog.isFunction(a[k]))c.push("\n"),c.push(h),c.push(k+" = "),d(a[k],h,g);c.push("\n"+
f+"}")}else c.push(a);else c.push("undefined")}catch(l){c.push("*** "+l+" ***")}};d(a,"",new goog.structs.Set);return c.join("")};goog.debug.exposeArray=function(a){for(var b=[],c=0;c<a.length;c++)goog.isArray(a[c])?b.push(goog.debug.exposeArray(a[c])):b.push(a[c]);return"[ "+b.join(", ")+" ]"};
goog.debug.exposeException=function(a,b){try{var c=goog.debug.normalizeErrorObject(a);return"Message: "+goog.string.htmlEscape(c.message)+'\nUrl: <a href="view-source:'+c.fileName+'" target="_new">'+c.fileName+"</a>\nLine: "+c.lineNumber+"\n\nBrowser stack:\n"+goog.string.htmlEscape(c.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+goog.string.htmlEscape(goog.debug.getStacktrace(b)+"-> ")}catch(d){return"Exception trying to expose exception! You win, we lose. "+d}};
goog.debug.normalizeErrorObject=function(a){var b=goog.getObjectByName("window.location.href");if(goog.isString(a))return{message:a,name:"Unknown error",lineNumber:"Not available",fileName:b,stack:"Not available"};var c,d,e=!1;try{c=a.lineNumber||a.line||"Not available"}catch(f){c="Not available",e=!0}try{d=a.fileName||a.filename||a.sourceURL||goog.global.$googDebugFname||b}catch(g){d="Not available",e=!0}return!e&&a.lineNumber&&a.fileName&&a.stack&&a.message&&a.name?a:{message:a.message||"Not available",
name:a.name||"UnknownError",lineNumber:c,fileName:d,stack:a.stack||"Not available"}};goog.debug.enhanceError=function(a,b){var c;"string"==typeof a?(c=Error(a),Error.captureStackTrace&&Error.captureStackTrace(c,goog.debug.enhanceError)):c=a;c.stack||(c.stack=goog.debug.getStacktrace(goog.debug.enhanceError));if(b){for(var d=0;c["message"+d];)++d;c["message"+d]=String(b)}return c};
goog.debug.getStacktraceSimple=function(a){if(goog.STRICT_MODE_COMPATIBLE){var b=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(b)return b}for(var b=[],c=arguments.callee.caller,d=0;c&&(!a||d<a);){b.push(goog.debug.getFunctionName(c));b.push("()\n");try{c=c.caller}catch(e){b.push("[exception trying to get caller]\n");break}d++;if(d>=goog.debug.MAX_STACK_DEPTH){b.push("[...long stack...]");break}}a&&d>=a?b.push("[...reached max depth limit...]"):b.push("[end]");return b.join("")};
goog.debug.MAX_STACK_DEPTH=50;goog.debug.getNativeStackTrace_=function(a){var b=Error();if(Error.captureStackTrace)return Error.captureStackTrace(b,a),String(b.stack);try{throw b;}catch(c){b=c}return(a=b.stack)?String(a):null};goog.debug.getStacktrace=function(a){var b;goog.STRICT_MODE_COMPATIBLE&&(b=goog.debug.getNativeStackTrace_(a||goog.debug.getStacktrace));b||(b=goog.debug.getStacktraceHelper_(a||arguments.callee.caller,[]));return b};
goog.debug.getStacktraceHelper_=function(a,b){var c=[];if(goog.array.contains(b,a))c.push("[...circular reference...]");else if(a&&b.length<goog.debug.MAX_STACK_DEPTH){c.push(goog.debug.getFunctionName(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=goog.debug.getFunctionName(f))?f:"[fn]";break;
default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(goog.debug.getStacktraceHelper_(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")};goog.debug.setFunctionResolver=function(a){goog.debug.fnNameResolver_=a};
goog.debug.getFunctionName=function(a){if(goog.debug.fnNameCache_[a])return goog.debug.fnNameCache_[a];if(goog.debug.fnNameResolver_){var b=goog.debug.fnNameResolver_(a);if(b)return goog.debug.fnNameCache_[a]=b}a=String(a);goog.debug.fnNameCache_[a]||(b=/function ([^\(]+)/.exec(a),goog.debug.fnNameCache_[a]=b?b[1]:"[Anonymous]");return goog.debug.fnNameCache_[a]};
goog.debug.makeWhitespaceVisible=function(a){return a.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.fnNameCache_={};goog.debug.LogRecord=function(a,b,c,d,e){this.reset(a,b,c,d,e)};goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.debug.LogRecord.prototype.exceptionText_=null;goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0;goog.debug.LogRecord.nextSequenceNumber_=0;
goog.debug.LogRecord.prototype.reset=function(a,b,c,d,e){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof e?e:goog.debug.LogRecord.nextSequenceNumber_++);this.time_=d||goog.now();this.level_=a;this.msg_=b;this.loggerName_=c;delete this.exception_;delete this.exceptionText_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};
goog.debug.LogRecord.prototype.setException=function(a){this.exception_=a};goog.debug.LogRecord.prototype.getExceptionText=function(){return this.exceptionText_};goog.debug.LogRecord.prototype.setExceptionText=function(a){this.exceptionText_=a};goog.debug.LogRecord.prototype.setLoggerName=function(a){this.loggerName_=a};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(a){this.level_=a};
goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(a){this.msg_=a};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(a){this.time_=a};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer);return goog.debug.LogBuffer.instance_};goog.debug.LogBuffer.CAPACITY=0;
goog.debug.LogBuffer.prototype.addRecord=function(a,b,c){var d=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=d;if(this.isFull_)return d=this.buffer_[d],d.reset(a,b,c),d;this.isFull_=d==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[d]=new goog.debug.LogRecord(a,b,c)};goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY};
goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=!1};goog.debug.LogBuffer.prototype.forEachRecord=function(a){var b=this.buffer_;if(b[0]){var c=this.curIndex_,d=this.isFull_?c:-1;do d=(d+1)%goog.debug.LogBuffer.CAPACITY,a(b[d]);while(d!=c)}};goog.debug.Logger=function(a){this.name_=a;this.handlers_=this.children_=this.level_=this.parent_=null};goog.debug.Logger.ROOT_LOGGER_NAME="";goog.debug.Logger.ENABLE_HIERARCHY=!0;goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]);goog.debug.Logger.Level=function(a,b){this.name=a;this.value=b};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);
goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1E3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);
goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];
goog.debug.Logger.Level.predefinedLevelsCache_=null;goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var a=0,b;b=goog.debug.Logger.Level.PREDEFINED_LEVELS[a];a++)goog.debug.Logger.Level.predefinedLevelsCache_[b.value]=b,goog.debug.Logger.Level.predefinedLevelsCache_[b.name]=b};
goog.debug.Logger.Level.getPredefinedLevel=function(a){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();return goog.debug.Logger.Level.predefinedLevelsCache_[a]||null};
goog.debug.Logger.Level.getPredefinedLevelByValue=function(a){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();if(a in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[a];for(var b=0;b<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++b){var c=goog.debug.Logger.Level.PREDEFINED_LEVELS[b];if(c.value<=a)return c}return null};goog.debug.Logger.getLogger=function(a){return goog.debug.LogManager.getLogger(a)};
goog.debug.Logger.logToProfilers=function(a){goog.global.console&&(goog.global.console.timeStamp?goog.global.console.timeStamp(a):goog.global.console.markTimeline&&goog.global.console.markTimeline(a));goog.global.msWriteProfilerMark&&goog.global.msWriteProfilerMark(a)};goog.debug.Logger.prototype.getName=function(){return this.name_};
goog.debug.Logger.prototype.addHandler=function(a){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(a)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(a)))};
goog.debug.Logger.prototype.removeHandler=function(a){if(goog.debug.LOGGING_ENABLED){var b=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!b&&goog.array.remove(b,a)}return!1};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){this.children_||(this.children_={});return this.children_};
goog.debug.Logger.prototype.setLevel=function(a){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?this.level_=a:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=a))};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};
goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED)return goog.debug.Logger.Level.OFF;if(!goog.debug.Logger.ENABLE_HIERARCHY)return goog.debug.Logger.rootLevel_;if(this.level_)return this.level_;if(this.parent_)return this.parent_.getEffectiveLevel();goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(a){return goog.debug.LOGGING_ENABLED&&a.value>=this.getEffectiveLevel().value};
goog.debug.Logger.prototype.log=function(a,b,c){goog.debug.LOGGING_ENABLED&&this.isLoggable(a)&&(goog.isFunction(b)&&(b=b()),this.doLogRecord_(this.getLogRecord(a,b,c,goog.debug.Logger.prototype.log)))};
goog.debug.Logger.prototype.getLogRecord=function(a,b,c,d){a=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(a,b,this.name_):new goog.debug.LogRecord(a,String(b),this.name_);c&&(a.setException(c),a.setExceptionText(goog.debug.exposeException(c,d||goog.debug.Logger.prototype.getLogRecord)));return a};goog.debug.Logger.prototype.shout=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SHOUT,a,b)};
goog.debug.Logger.prototype.severe=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SEVERE,a,b)};goog.debug.Logger.prototype.warning=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.WARNING,a,b)};goog.debug.Logger.prototype.info=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.INFO,a,b)};goog.debug.Logger.prototype.config=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.CONFIG,a,b)};
goog.debug.Logger.prototype.fine=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINE,a,b)};goog.debug.Logger.prototype.finer=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINER,a,b)};goog.debug.Logger.prototype.finest=function(a,b){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINEST,a,b)};goog.debug.Logger.prototype.logRecord=function(a){goog.debug.LOGGING_ENABLED&&this.isLoggable(a.getLevel())&&this.doLogRecord_(a)};
goog.debug.Logger.prototype.doLogRecord_=function(a){goog.debug.Logger.logToProfilers("log:"+a.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY)for(var b=this;b;)b.callPublish_(a),b=b.getParent();else for(var b=0,c;c=goog.debug.Logger.rootHandlers_[b++];)c(a)};goog.debug.Logger.prototype.callPublish_=function(a){if(this.handlers_)for(var b=0,c;c=this.handlers_[b];b++)c(a)};goog.debug.Logger.prototype.setParent_=function(a){this.parent_=a};
goog.debug.Logger.prototype.addChild_=function(a,b){this.getChildren()[a]=b};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME),goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))};
goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(a){goog.debug.LogManager.initialize();return goog.debug.LogManager.loggers_[a]||goog.debug.LogManager.createLogger_(a)};
goog.debug.LogManager.createFunctionForCatchErrors=function(a){return function(b){(a||goog.debug.LogManager.getRoot()).severe("Error: "+b.message+" ("+b.fileName+" @ Line: "+b.line+")")}};goog.debug.LogManager.createLogger_=function(a){var b=new goog.debug.Logger(a);if(goog.debug.Logger.ENABLE_HIERARCHY){var c=a.lastIndexOf("."),d=a.substr(0,c),c=a.substr(c+1),d=goog.debug.LogManager.getLogger(d);d.addChild_(c,b);b.setParent_(d)}return goog.debug.LogManager.loggers_[a]=b};goog.log={};goog.log.ENABLED=goog.debug.LOGGING_ENABLED;goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(a,b){if(goog.log.ENABLED){var c=goog.debug.LogManager.getLogger(a);b&&c&&c.setLevel(b);return c}return null};goog.log.addHandler=function(a,b){goog.log.ENABLED&&a&&a.addHandler(b)};
goog.log.removeHandler=function(a,b){return goog.log.ENABLED&&a?a.removeHandler(b):!1};goog.log.log=function(a,b,c,d){goog.log.ENABLED&&a&&a.log(b,c,d)};goog.log.error=function(a,b,c){goog.log.ENABLED&&a&&a.severe(b,c)};goog.log.warning=function(a,b,c){goog.log.ENABLED&&a&&a.warning(b,c)};goog.log.info=function(a,b,c){goog.log.ENABLED&&a&&a.info(b,c)};goog.log.fine=function(a,b,c){goog.log.ENABLED&&a&&a.fine(b,c)};goog.net.XhrIo=function(a){goog.events.EventTarget.call(this);this.headers=new goog.structs.Map;this.xmlHttpFactory_=a||null;this.active_=!1;this.xhrOptions_=this.xhr_=null;this.lastMethod_=this.lastUri_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastError_="";this.inAbort_=this.inOpen_=this.inSend_=this.errorDispatched_=!1;this.timeoutInterval_=0;this.timeoutId_=null;this.responseType_=goog.net.XhrIo.ResponseType.DEFAULT;this.useXhr2Timeout_=this.withCredentials_=!1};
goog.inherits(goog.net.XhrIo,goog.events.EventTarget);goog.net.XhrIo.ResponseType={DEFAULT:"",TEXT:"text",DOCUMENT:"document",BLOB:"blob",ARRAY_BUFFER:"arraybuffer"};goog.net.XhrIo.prototype.logger_=goog.log.getLogger("goog.net.XhrIo");goog.net.XhrIo.CONTENT_TYPE_HEADER="Content-Type";goog.net.XhrIo.HTTP_SCHEME_PATTERN=/^https?$/i;goog.net.XhrIo.METHODS_WITH_FORM_DATA=["POST","PUT"];goog.net.XhrIo.FORM_CONTENT_TYPE="application/x-www-form-urlencoded;charset=utf-8";goog.net.XhrIo.XHR2_TIMEOUT_="timeout";
goog.net.XhrIo.XHR2_ON_TIMEOUT_="ontimeout";goog.net.XhrIo.sendInstances_=[];goog.net.XhrIo.send=function(a,b,c,d,e,f,g){var h=new goog.net.XhrIo;goog.net.XhrIo.sendInstances_.push(h);b&&h.listen(goog.net.EventType.COMPLETE,b);h.listenOnce(goog.net.EventType.READY,h.cleanupSend_);f&&h.setTimeoutInterval(f);g&&h.setWithCredentials(g);h.send(a,c,d,e)};goog.net.XhrIo.cleanup=function(){for(var a=goog.net.XhrIo.sendInstances_;a.length;)a.pop().dispose()};
goog.net.XhrIo.protectEntryPoints=function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a.protectEntryPoint(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)};goog.net.XhrIo.prototype.cleanupSend_=function(){this.dispose();goog.array.remove(goog.net.XhrIo.sendInstances_,this)};goog.net.XhrIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.XhrIo.prototype.setTimeoutInterval=function(a){this.timeoutInterval_=Math.max(0,a)};
goog.net.XhrIo.prototype.setResponseType=function(a){this.responseType_=a};goog.net.XhrIo.prototype.getResponseType=function(){return this.responseType_};goog.net.XhrIo.prototype.setWithCredentials=function(a){this.withCredentials_=a};goog.net.XhrIo.prototype.getWithCredentials=function(){return this.withCredentials_};
goog.net.XhrIo.prototype.send=function(a,b,c,d){if(this.xhr_)throw Error("[goog.net.XhrIo] Object is active with another request="+this.lastUri_+"; newUri="+a);b=b?b.toUpperCase():"GET";this.lastUri_=a;this.lastError_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastMethod_=b;this.errorDispatched_=!1;this.active_=!0;this.xhr_=this.createXhr();this.xhrOptions_=this.xmlHttpFactory_?this.xmlHttpFactory_.getOptions():goog.net.XmlHttp.getOptions();this.xhr_.onreadystatechange=goog.bind(this.onReadyStateChange_,
this);try{goog.log.fine(this.logger_,this.formatMsg_("Opening Xhr")),this.inOpen_=!0,this.xhr_.open(b,String(a),!0),this.inOpen_=!1}catch(e){goog.log.fine(this.logger_,this.formatMsg_("Error opening Xhr: "+e.message));this.error_(goog.net.ErrorCode.EXCEPTION,e);return}a=c||"";var f=this.headers.clone();d&&goog.structs.forEach(d,function(a,b){f.set(b,a)});d=goog.array.find(f.getKeys(),goog.net.XhrIo.isContentTypeHeader_);c=goog.global.FormData&&a instanceof goog.global.FormData;!goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA,
b)||d||c||f.set(goog.net.XhrIo.CONTENT_TYPE_HEADER,goog.net.XhrIo.FORM_CONTENT_TYPE);f.forEach(function(a,b){this.xhr_.setRequestHeader(b,a)},this);this.responseType_&&(this.xhr_.responseType=this.responseType_);goog.object.containsKey(this.xhr_,"withCredentials")&&(this.xhr_.withCredentials=this.withCredentials_);try{this.cleanUpTimeoutTimer_(),0<this.timeoutInterval_&&(this.useXhr2Timeout_=goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_),goog.log.fine(this.logger_,this.formatMsg_("Will abort after "+
this.timeoutInterval_+"ms if incomplete, xhr2 "+this.useXhr2Timeout_)),this.useXhr2Timeout_?(this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_]=this.timeoutInterval_,this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=goog.bind(this.timeout_,this)):this.timeoutId_=goog.Timer.callOnce(this.timeout_,this.timeoutInterval_,this)),goog.log.fine(this.logger_,this.formatMsg_("Sending request")),this.inSend_=!0,this.xhr_.send(a),this.inSend_=!1}catch(g){goog.log.fine(this.logger_,this.formatMsg_("Send error: "+g.message)),this.error_(goog.net.ErrorCode.EXCEPTION,
g)}};goog.net.XhrIo.shouldUseXhr2Timeout_=function(a){return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(9)&&goog.isNumber(a[goog.net.XhrIo.XHR2_TIMEOUT_])&&goog.isDef(a[goog.net.XhrIo.XHR2_ON_TIMEOUT_])};goog.net.XhrIo.isContentTypeHeader_=function(a){return goog.string.caseInsensitiveEquals(goog.net.XhrIo.CONTENT_TYPE_HEADER,a)};goog.net.XhrIo.prototype.createXhr=function(){return this.xmlHttpFactory_?this.xmlHttpFactory_.createInstance():goog.net.XmlHttp()};
goog.net.XhrIo.prototype.timeout_=function(){"undefined"!=typeof goog&&this.xhr_&&(this.lastError_="Timed out after "+this.timeoutInterval_+"ms, aborting",this.lastErrorCode_=goog.net.ErrorCode.TIMEOUT,goog.log.fine(this.logger_,this.formatMsg_(this.lastError_)),this.dispatchEvent(goog.net.EventType.TIMEOUT),this.abort(goog.net.ErrorCode.TIMEOUT))};
goog.net.XhrIo.prototype.error_=function(a,b){this.active_=!1;this.xhr_&&(this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1);this.lastError_=b;this.lastErrorCode_=a;this.dispatchErrors_();this.cleanUpXhr_()};goog.net.XhrIo.prototype.dispatchErrors_=function(){this.errorDispatched_||(this.errorDispatched_=!0,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ERROR))};
goog.net.XhrIo.prototype.abort=function(a){this.xhr_&&this.active_&&(goog.log.fine(this.logger_,this.formatMsg_("Aborting")),this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1,this.lastErrorCode_=a||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ABORT),this.cleanUpXhr_())};
goog.net.XhrIo.prototype.disposeInternal=function(){this.xhr_&&(this.active_&&(this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1),this.cleanUpXhr_(!0));goog.net.XhrIo.superClass_.disposeInternal.call(this)};goog.net.XhrIo.prototype.onReadyStateChange_=function(){if(!this.isDisposed())if(this.inOpen_||this.inSend_||this.inAbort_)this.onReadyStateChangeHelper_();else this.onReadyStateChangeEntryPoint_()};goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};
goog.net.XhrIo.prototype.onReadyStateChangeHelper_=function(){if(this.active_&&"undefined"!=typeof goog)if(this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE&&2==this.getStatus())goog.log.fine(this.logger_,this.formatMsg_("Local request error detected and ignored"));else if(this.inSend_&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE)goog.Timer.callOnce(this.onReadyStateChange_,0,this);else if(this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE),
this.isComplete()){goog.log.fine(this.logger_,this.formatMsg_("Request complete"));this.active_=!1;try{this.isSuccess()?(this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.SUCCESS)):(this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR,this.lastError_=this.getStatusText()+" ["+this.getStatus()+"]",this.dispatchErrors_())}finally{this.cleanUpXhr_()}}};
goog.net.XhrIo.prototype.cleanUpXhr_=function(a){if(this.xhr_){this.cleanUpTimeoutTimer_();var b=this.xhr_,c=this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]?goog.nullFunction:null;this.xhrOptions_=this.xhr_=null;a||this.dispatchEvent(goog.net.EventType.READY);try{b.onreadystatechange=c}catch(d){goog.log.error(this.logger_,"Problem encountered resetting onreadystatechange: "+d.message)}}};
goog.net.XhrIo.prototype.cleanUpTimeoutTimer_=function(){this.xhr_&&this.useXhr2Timeout_&&(this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=null);goog.isNumber(this.timeoutId_)&&(goog.Timer.clear(this.timeoutId_),this.timeoutId_=null)};goog.net.XhrIo.prototype.isActive=function(){return!!this.xhr_};goog.net.XhrIo.prototype.isComplete=function(){return this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE};
goog.net.XhrIo.prototype.isSuccess=function(){var a=this.getStatus();return goog.net.HttpStatus.isSuccess(a)||0===a&&!this.isLastUriEffectiveSchemeHttp_()};goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_=function(){var a=goog.uri.utils.getEffectiveScheme(String(this.lastUri_));return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(a)};goog.net.XhrIo.prototype.getReadyState=function(){return this.xhr_?this.xhr_.readyState:goog.net.XmlHttp.ReadyState.UNINITIALIZED};
goog.net.XhrIo.prototype.getStatus=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.status:-1}catch(a){return-1}};goog.net.XhrIo.prototype.getStatusText=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.statusText:""}catch(a){return goog.log.fine(this.logger_,"Can not get status: "+a.message),""}};goog.net.XhrIo.prototype.getLastUri=function(){return String(this.lastUri_)};
goog.net.XhrIo.prototype.getResponseText=function(){try{return this.xhr_?this.xhr_.responseText:""}catch(a){return goog.log.fine(this.logger_,"Can not get responseText: "+a.message),""}};goog.net.XhrIo.prototype.getResponseBody=function(){try{if(this.xhr_&&"responseBody"in this.xhr_)return this.xhr_.responseBody}catch(a){goog.log.fine(this.logger_,"Can not get responseBody: "+a.message)}return null};
goog.net.XhrIo.prototype.getResponseXml=function(){try{return this.xhr_?this.xhr_.responseXML:null}catch(a){return goog.log.fine(this.logger_,"Can not get responseXML: "+a.message),null}};goog.net.XhrIo.prototype.getResponseJson=function(a){if(this.xhr_){var b=this.xhr_.responseText;a&&0==b.indexOf(a)&&(b=b.substring(a.length));return goog.json.parse(b)}};
goog.net.XhrIo.prototype.getResponse=function(){try{if(!this.xhr_)return null;if("response"in this.xhr_)return this.xhr_.response;switch(this.responseType_){case goog.net.XhrIo.ResponseType.DEFAULT:case goog.net.XhrIo.ResponseType.TEXT:return this.xhr_.responseText;case goog.net.XhrIo.ResponseType.ARRAY_BUFFER:if("mozResponseArrayBuffer"in this.xhr_)return this.xhr_.mozResponseArrayBuffer}goog.log.error(this.logger_,"Response type "+this.responseType_+" is not supported on this browser");return null}catch(a){return goog.log.fine(this.logger_,
"Can not get response: "+a.message),null}};goog.net.XhrIo.prototype.getResponseHeader=function(a){return this.xhr_&&this.isComplete()?this.xhr_.getResponseHeader(a):void 0};goog.net.XhrIo.prototype.getAllResponseHeaders=function(){return this.xhr_&&this.isComplete()?this.xhr_.getAllResponseHeaders():""};
goog.net.XhrIo.prototype.getResponseHeaders=function(){for(var a={},b=this.getAllResponseHeaders().split("\r\n"),c=0;c<b.length;c++)if(!goog.string.isEmpty(b[c])){var d=goog.string.splitLimit(b[c],": ",2);a[d[0]]=a[d[0]]?a[d[0]]+(", "+d[1]):d[1]}return a};goog.net.XhrIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.XhrIo.prototype.getLastError=function(){return goog.isString(this.lastError_)?this.lastError_:String(this.lastError_)};
goog.net.XhrIo.prototype.formatMsg_=function(a){return a+" ["+this.lastMethod_+" "+this.lastUri_+" "+this.getStatus()+"]"};goog.debug.entryPointRegistry.register(function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)});/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
var gxnat=function(){};goog.exportSymbol("gxnat",gxnat);gxnat.JPEG_CONVERT_SUFFIX="?format=image/jpeg";gxnat.folderAbbrev={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};gxnat.ZIP_SUFFIX="?format=zip";gxnat.jsonGet=function(a,b,c){var d=-1<a.indexOf("?")?"&":"?";a=a+d+"format=json";goog.isDefAndNotNull(c)&&("&"!==c[0]&&(c="&"+c),a+=c);gxnat.get(a,b,"json")};
gxnat.get=function(a,b,c){goog.net.XhrIo.send(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":a=a.getResponseJson();a.hasOwnProperty("ResultSet")?b(a.ResultSet.Result):b(a);break;case "text":b(a.getResponseText())}})};
gxnat.naturalSort=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,f=/^0x[0-9a-f]+$/i,g=/^0/,h=function(a){return gxnat.naturalSort.insensitive&&(""+a).toLowerCase()||""+a},k=h(a).replace(d,"")||"",h=h(b).replace(d,"")||"",d=k.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=h.replace(c,"\x00$1\x00").replace(/\0$/,
"").replace(/^\0/,"").split("\x00"),k=parseInt(k.match(f))||1!=d.length&&k.match(e)&&Date.parse(k);if(e=parseInt(h.match(f))||k&&h.match(e)&&Date.parse(h)||null){if(k<e)return-1;if(k>e)return 1}k=0;for(h=Math.max(d.length,c.length);k<h;k++){e=!(d[k]||"").match(g)&&parseFloat(d[k])||d[k]||0;f=!(c[k]||"").match(g)&&parseFloat(c[k])||c[k]||0;if(isNaN(e)!==isNaN(f))return isNaN(e)?1:-1;typeof e!==typeof f&&(e+="",f+="");if(e<f)return-1;if(e>f)return 1}return 0};
gxnat.sortXnatPropertiesArray=function(a,b){var c=[],d={},e=[],f={};goog.array.forEach(a,function(a){f=a;goog.array.forEach(b,function(a){f=f[a]});f=f.toLowerCase();c.push(f);d[f]=a});c=c.sort(gxnat.naturalCompare);goog.array.forEach(c,function(a){e.push(d[a])});return e};goog.exportSymbol("gxnat.JPEG_CONVERT_SUFFIX",gxnat.JPEG_CONVERT_SUFFIX);goog.exportSymbol("gxnat.folderAbbrev",gxnat.folderAbbrev);goog.exportSymbol("gxnat.ZIP_SUFFIX",gxnat.ZIP_SUFFIX);goog.exportSymbol("gxnat.jsonGet",gxnat.jsonGet);
goog.exportSymbol("gxnat.get",gxnat.get);goog.exportSymbol("gxnat.naturalSort",gxnat.naturalSort);goog.exportSymbol("gxnat.sortXnatPropertiesArray",gxnat.sortXnatPropertiesArray);gxnat.Path=function(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;this.deconstructUrl_(a)};goog.inherits(gxnat.Path,goog.Disposable);goog.exportSymbol("gxnat.Path",gxnat.Path);gxnat.Path.getQueryPrefix=function(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a};
gxnat.Path.forEachXnatLevel=function(a){for(var b=0,c=gxnat.Path.xnatLevelOrder.length,b=0;b<c;b++)a(gxnat.Path.xnatLevelOrder[b],b)};gxnat.Path.getDeepestSharedXnatLevel=function(a,b){var c=new gxnat.Path(a),d=new gxnat.Path(b),e=void 0;gxnat.Path.forEachXnatLevel(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e};
gxnat.Path.graftUrl=function(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]};gxnat.Path.xnatLevelOrder=["projects","subjects","experiments",["scans","resources"],"files"];
gxnat.Path.prototype.deconstructUrl_=function(a){a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}this.findDeepestLevel_()};
gxnat.Path.prototype.findDeepestLevel_=function(){var a,b,c,d=!1;gxnat.Path.forEachXnatLevel(function(e,f){if(goog.isArray(e))for(a=0,b=e.length;a<b;a++)c=e[a],goog.isDefAndNotNull(this[c])||d||(this.deepestLevel_=gxnat.Path.xnatLevelOrder[f-1],d=!0);else goog.isDefAndNotNull(this[e])||d||(this.deepestLevel_=gxnat.Path.xnatLevelOrder[f-1],d=!0)}.bind(this))};gxnat.Path.prototype.getDeepestLevel=function(){goog.isDefAndNotNull(this.deepestLevel_)||this.findDeepestLevel_();return this.deepestLevel_};
gxnat.Path.prototype.pathByLevel=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,f=gxnat.Path.xnatLevelOrder.length,g=0,d=0;d<f;d++){c=gxnat.Path.xnatLevelOrder[d];if(goog.isArray(c))for(g=c.length,e=0;e<g;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};gxnat.Path.prototype.dispose=function(a){gxnat.Path.superClass_.dispose.call(this);goog.object.clear(this)};
goog.exportSymbol("gxnat.Path.getQueryPrefix",gxnat.Path.getQueryPrefix);goog.exportSymbol("gxnat.Path.forEachXnatLevel",gxnat.Path.forEachXnatLevel);goog.exportSymbol("gxnat.Path.getDeepestSharedXnatLevel",gxnat.Path.getDeepestSharedXnatLevel);goog.exportSymbol("gxnat.Path.graftUrl",gxnat.Path.graftUrl);goog.exportSymbol("gxnat.Path.xnatLevelOrder",gxnat.Path.xnatLevelOrder);goog.exportSymbol("gxnat.Path.prototype.getDeepestLevel",gxnat.Path.prototype.getDeepestLevel);
goog.exportSymbol("gxnat.Path.prototype.pathByLevel",gxnat.Path.prototype.pathByLevel);goog.exportSymbol("gxnat.Path.prototype.dispose",gxnat.Path.prototype.dispose);gxnat.ProjectTree=function(a){this.initPath_=new gxnat.Path(a);this.projects=[];this[gxnat.ProjectTree.PROJ_DIRECT]={};this[gxnat.ProjectTree.SUBJ_DIRECT]={};this[gxnat.ProjectTree.EXPT_DIRECT]={}};goog.inherits(gxnat.ProjectTree,goog.Disposable);goog.exportSymbol("gxnat.ProjectTree",gxnat.ProjectTree);
gxnat.ProjectTree.TreeNode=function(a){this[gxnat.ProjectTree.PATH_KEY]=goog.isString(a)?new gxnat.Path(a):a;this[gxnat.ProjectTree.LEVEL_KEY]=this[gxnat.ProjectTree.PATH_KEY].getDeepestLevel();a=gxnat.Path.xnatLevelOrder.indexOf(this[gxnat.ProjectTree.PATH_KEY].getDeepestLevel())+1;-1!=a&&(this[gxnat.ProjectTree.NEXTLEVEL_KEY]=gxnat.Path.xnatLevelOrder[a],goog.isString(this[gxnat.ProjectTree.NEXTLEVEL_KEY])&&(this[gxnat.ProjectTree.NEXTLEVELQUERY_KEY]=this[gxnat.ProjectTree.PATH_KEY].originalUrl+
"/"+this[gxnat.ProjectTree.NEXTLEVEL_KEY],this[this[gxnat.ProjectTree.NEXTLEVEL_KEY]]=[]))};goog.inherits(gxnat.ProjectTree.TreeNode,goog.Disposable);goog.exportSymbol("gxnat.ProjectTree.TreeNode",gxnat.ProjectTree.TreeNode);gxnat.ProjectTree.TreeNode.prototype.setTitle=function(a){this.title_=a};gxnat.ProjectTree.TreeNode.prototype.getTitle=function(a){return this.title_};
gxnat.ProjectTree.TreeNode.prototype.dispose=function(a){gxnat.ProjectTree.TreeNode.superClass_.dispose.call(this);goog.isDefAndNotNull(this[gxnat.ProjectTree.PATH_KEY])&&this[gxnat.ProjectTree.PATH_KEY].dispose();goog.object.clear(this)};gxnat.ProjectTree.LEVEL_KEY=goog.string.createUniqueString();gxnat.ProjectTree.NEXTLEVELQUERY_KEY=goog.string.createUniqueString();gxnat.ProjectTree.NEXTLEVELJSON_KEY=goog.string.createUniqueString();gxnat.ProjectTree.PATH_KEY=goog.string.createUniqueString();
gxnat.ProjectTree.NEXTLEVEL_KEY=goog.string.createUniqueString();gxnat.ProjectTree.NEXTLEVELLOADED_KEY=goog.string.createUniqueString();gxnat.ProjectTree.ISLOADING_KEY=goog.string.createUniqueString();gxnat.ProjectTree.METADATA_KEY=goog.string.createUniqueString();gxnat.ProjectTree.PROJ_DIRECT=goog.string.createUniqueString();gxnat.ProjectTree.SUBJ_DIRECT=goog.string.createUniqueString();gxnat.ProjectTree.EXPT_DIRECT=goog.string.createUniqueString();
gxnat.ProjectTree.PROJECT_METADATA=["ID","description","name","URI"];gxnat.ProjectTree.SUBJECT_METADATA=["gender","handedness","label","URI"];gxnat.ProjectTree.EXPERIMENT_METADATA=["label","URI"];gxnat.ProjectTree.compareNodeTitles=function(a,b){return goog.string.numerateCompare(a.getTitle(),b.getTitle())};gxnat.ProjectTree.getColumnQuery=function(a){var b="&columns=";goog.array.forEach(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b};
gxnat.ProjectTree.prototype.getBranchTitles=function(a){var b=[];goog.object.forEach(this.getBranchFromEndNode(a),function(a,d){"projects"==d?b.push(a[gxnat.ProjectTree.METADATA_KEY].ID):b.push(a[gxnat.ProjectTree.METADATA_KEY].label)});return b};gxnat.ProjectTree.prototype.getBranchUris=function(a){var b=[];goog.object.forEach(this.getBranchFromEndNode(a),function(a,d){b.push(a[gxnat.ProjectTree.PATH_KEY].originalUrl)});return b};
gxnat.ProjectTree.prototype.getBranchFromEndNode=function(a){branch={projects:this.Proj_};"experiments"==a[gxnat.ProjectTree.NEXTLEVEL_KEY]?branch.subjects=a:goog.isArray(a[gxnat.ProjectTree.NEXTLEVEL_KEY])&&(branch.subjects=this[gxnat.ProjectTree.SUBJ_DIRECT][a[gxnat.ProjectTree.PATH_KEY].pathByLevel("subjects")],branch.experiments=a);return branch};gxnat.ProjectTree.prototype.loadInitBranch=function(a,b){this.loadBranch(this.initPath_,a,b)};
gxnat.ProjectTree.prototype.loadBranch=function(a,b,c){var d=goog.isString(a)?new gxnat.Path(a):a,e;if(goog.isDefAndNotNull(this.Proj_)){a={projects:this.Proj_};if(goog.isDefAndNotNull(d.subjects)){e=d.pathByLevel("subjects");if(!goog.isDefAndNotNull(this[gxnat.ProjectTree.SUBJ_DIRECT][e])){this.loadSubject(e,function(a){this.loadSubjectMetadata(a,function(){goog.isDefAndNotNull(b)&&b(a);this.loadBranch(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[gxnat.ProjectTree.SUBJ_DIRECT][e]}if(goog.isDefAndNotNull(d.experiments)){e=
d.pathByLevel("experiments");if(!goog.isDefAndNotNull(this[gxnat.ProjectTree.EXPT_DIRECT][e])){this.loadExperiment(e,function(a){goog.isDefAndNotNull(b)&&b(a);this.loadBranch(d,b,c)}.bind(this));return}a.experiments=this[gxnat.ProjectTree.EXPT_DIRECT][e]}goog.isDefAndNotNull(c)&&c(a)}else this.loadProject(function(a){goog.isDefAndNotNull(b)&&b(a);this.loadBranch(d,b,c)}.bind(this))};
gxnat.ProjectTree.prototype.loadProject=function(a){if(!goog.isDefAndNotNull(this.Proj_)){var b=gxnat.ProjectTree.getColumnQuery(gxnat.ProjectTree.PROJECT_METADATA),c=this.initPath_.prefix+"/projects/"+this.initPath_.projects,d;gxnat.jsonGet(this.initPath_.prefix+"/projects",function(b){d=new gxnat.ProjectTree.TreeNode(c);this.projects.push(d);this.Proj_=d;this[gxnat.ProjectTree.PROJ_DIRECT][d[gxnat.ProjectTree.PATH_KEY].originalUrl]=d;d[gxnat.ProjectTree.METADATA_KEY]=b[0];d.setTitle(d[gxnat.ProjectTree.METADATA_KEY].name);
a(d)}.bind(this),"&ID="+this.initPath_.projects+b)}};gxnat.ProjectTree.prototype.getSubjectNodeByUri=function(a){return this[gxnat.ProjectTree.SUBJ_DIRECT][a]};gxnat.ProjectTree.prototype.getExperimentNodeByUri=function(a){return this[gxnat.ProjectTree.EXPT_DIRECT][a]};
gxnat.ProjectTree.prototype.loadSubjectMetadata=function(a,b){var c=a;goog.isString(a)?c=this.getSubjectNodeByUri(a):a instanceof gxnat.Path&&(c=this.getSubjectNodeByUri(a.originalUrl));if(goog.isDefAndNotNull(c[gxnat.ProjectTree.METADATA_KEY]))b(c);else{var d=this.initPath_.prefix+"/subjects",e=gxnat.ProjectTree.getColumnQuery(gxnat.ProjectTree.SUBJECT_METADATA),e="&ID="+c[gxnat.ProjectTree.PATH_KEY].subjects+e;gxnat.jsonGet(d,function(a){c[gxnat.ProjectTree.METADATA_KEY]=a[0];c.setTitle(c[gxnat.ProjectTree.METADATA_KEY].label);
b(c)}.bind(this),e)}};
gxnat.ProjectTree.prototype.loadSubjects=function(a,b){if(!goog.isDefAndNotNull(this.Proj_[gxnat.ProjectTree.NEXTLEVELLOADED_KEY])||!0!=this.Proj_[gxnat.ProjectTree.NEXTLEVELLOADED_KEY]){var c=this.Proj_[gxnat.ProjectTree.PATH_KEY].prefix+"/subjects",d="&project="+this.Proj_[gxnat.ProjectTree.PATH_KEY].projects+gxnat.ProjectTree.getColumnQuery(gxnat.ProjectTree.SUBJECT_METADATA),e,f;gxnat.jsonGet(c,function(c){goog.array.forEach(c,function(d){f=this.Proj_[gxnat.ProjectTree.PATH_KEY].prefix+"/projects/"+
this.Proj_[gxnat.ProjectTree.PATH_KEY].projects+"/subjects/"+d.ID;e=this.loadSubject(f);goog.isDefAndNotNull(e[gxnat.ProjectTree.METADATA_KEY])||(e[gxnat.ProjectTree.METADATA_KEY]=d,e.setTitle(e[gxnat.ProjectTree.METADATA_KEY].label));goog.isDefAndNotNull(a)&&a(e);this.Proj_.subjects.length==c.length&&(this.Proj_[gxnat.ProjectTree.NEXTLEVELLOADED_KEY]=!0,goog.isDefAndNotNull(b)&&(d=this.Proj_.subjects,d.sort(gxnat.ProjectTree.compareNodeTitles),b(d)))}.bind(this))}.bind(this),d)}};
gxnat.ProjectTree.prototype.loadSubject=function(a,b){if(goog.isDefAndNotNull(this[gxnat.ProjectTree.SUBJ_DIRECT][a]))return this[gxnat.ProjectTree.SUBJ_DIRECT][a];subjNode=new gxnat.ProjectTree.TreeNode(a);this.Proj_.subjects.push(subjNode);this[gxnat.ProjectTree.SUBJ_DIRECT][a]=subjNode;goog.isDefAndNotNull(b)&&b(subjNode);return subjNode};
gxnat.ProjectTree.prototype.loadExperimentMetadata=function(a,b){var c=a;goog.isString(a)?c=this.getExperimentNodeByUri(a):a instanceof gxnat.Path&&(c=this.getExperimentNodeByUri(a.originalUrl));var d=this.initPath_.prefix+"/experiments",e=gxnat.ProjectTree.getColumnQuery(gxnat.ProjectTree.EXPERIMENT_METADATA),e="&ID="+c[gxnat.ProjectTree.PATH_KEY].experiments+e;gxnat.jsonGet(d,function(a){c[gxnat.ProjectTree.METADATA_KEY]=a[0];c.setTitle(c[gxnat.ProjectTree.METADATA_KEY].label);b(c)}.bind(this),
e)};
gxnat.ProjectTree.prototype.loadExperiments=function(a,b,c){var d=a;goog.isString(a)?d=this.getSubjectNodeByUri(a):a instanceof gxnat.Path&&(d=this.getSubjectNodeByUri(a.originalUrl));if(goog.isDefAndNotNull(d[gxnat.ProjectTree.NEXTLEVELLOADED_KEY])&&!0==d[gxnat.ProjectTree.NEXTLEVELLOADED_KEY])window.console.log("Don't need to reload the experiments of "+d[gxnat.ProjectTree.PATH_KEY].originalUrl);else{var e=d[gxnat.ProjectTree.PATH_KEY].originalUrl+"/experiments";gxnat.jsonGet(e+"?xsiType=xnat:imageSessionData",function(a){goog.array.forEach(a,
function(g){this.loadExperiment(e+"/"+g.ID,function(e){goog.isDefAndNotNull(b)&&b(e);d.experiments.length==a.length&&(d[gxnat.ProjectTree.NEXTLEVELLOADED_KEY]=!0,goog.isDefAndNotNull(c)&&(e=d.experiments,e.sort(gxnat.ProjectTree.compareNodeTitles),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
gxnat.ProjectTree.prototype.loadExperiment=function(a,b){goog.isDefAndNotNull(this[gxnat.ProjectTree.EXPT_DIRECT][a])||(exptNode=new gxnat.ProjectTree.TreeNode(a),this.loadExperimentMetadata(exptNode,function(c){this[gxnat.ProjectTree.SUBJ_DIRECT][c[gxnat.ProjectTree.PATH_KEY].pathByLevel("subjects")].experiments.push(c);this[gxnat.ProjectTree.EXPT_DIRECT][a]=c;goog.isDefAndNotNull(b)&&b(c)}.bind(this)))};
gxnat.ProjectTree.prototype.dispose=function(a){gxnat.ProjectTree.superClass_.dispose.call(this);delete this.Proj_;this.initPath_.dispose();delete this.initPath_;goog.array.forEach(this.projects,function(a){goog.isDefAndNotNull(a.subjects)&&goog.array.forEach(a.subjects,function(a){goog.isDefAndNotNull(a.experiments)&&goog.array.forEach(a.experiments,function(a){a.dispose()});a.dispose()});a.dispose()});goog.object.clear(this)};goog.exportSymbol("gxnat.ProjectTree.TreeNode",gxnat.ProjectTree.TreeNode);
goog.exportSymbol("gxnat.ProjectTree.LEVEL_KEY",gxnat.ProjectTree.LEVEL_KEY);goog.exportSymbol("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",gxnat.ProjectTree.NEXTLEVELQUERY_KEY);goog.exportSymbol("gxnat.ProjectTree.NEXTLEVELJSON_KEY",gxnat.ProjectTree.NEXTLEVELJSON_KEY);goog.exportSymbol("gxnat.ProjectTree.PATH_KEY",gxnat.ProjectTree.PATH_KEY);goog.exportSymbol("gxnat.ProjectTree.NEXTLEVEL_KEY",gxnat.ProjectTree.NEXTLEVEL_KEY);goog.exportSymbol("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",gxnat.ProjectTree.NEXTLEVELLOADED_KEY);
goog.exportSymbol("gxnat.ProjectTree.ISLOADING_KEY",gxnat.ProjectTree.ISLOADING_KEY);goog.exportSymbol("gxnat.ProjectTree.METADATA_KEY",gxnat.ProjectTree.METADATA_KEY);goog.exportSymbol("gxnat.ProjectTree.PROJ_DIRECT",gxnat.ProjectTree.PROJ_DIRECT);goog.exportSymbol("gxnat.ProjectTree.SUBJ_DIRECT",gxnat.ProjectTree.SUBJ_DIRECT);goog.exportSymbol("gxnat.ProjectTree.EXPT_DIRECT",gxnat.ProjectTree.EXPT_DIRECT);goog.exportSymbol("gxnat.ProjectTree.PROJECT_METADATA",gxnat.ProjectTree.PROJECT_METADATA);
goog.exportSymbol("gxnat.ProjectTree.SUBJECT_METADATA",gxnat.ProjectTree.SUBJECT_METADATA);goog.exportSymbol("gxnat.ProjectTree.EXPERIMENT_METADATA",gxnat.ProjectTree.EXPERIMENT_METADATA);goog.exportSymbol("gxnat.ProjectTree.compareNodeTitles",gxnat.ProjectTree.compareNodeTitles);goog.exportSymbol("gxnat.ProjectTree.getColumnQuery",gxnat.ProjectTree.getColumnQuery);goog.exportSymbol("gxnat.ProjectTree.prototype.getBranchTitles",gxnat.ProjectTree.prototype.getBranchTitles);
goog.exportSymbol("gxnat.ProjectTree.prototype.getBranchUris",gxnat.ProjectTree.prototype.getBranchUris);goog.exportSymbol("gxnat.ProjectTree.prototype.getBranchFromEndNode",gxnat.ProjectTree.prototype.getBranchFromEndNode);goog.exportSymbol("gxnat.ProjectTree.prototype.loadInitBranch",gxnat.ProjectTree.prototype.loadInitBranch);goog.exportSymbol("gxnat.ProjectTree.prototype.loadBranch",gxnat.ProjectTree.prototype.loadBranch);goog.exportSymbol("gxnat.ProjectTree.prototype.loadProject",gxnat.ProjectTree.prototype.loadProject);
goog.exportSymbol("gxnat.ProjectTree.prototype.getSubjectNodeByUri",gxnat.ProjectTree.prototype.getSubjectNodeByUri);goog.exportSymbol("gxnat.ProjectTree.prototype.getExperimentNodeByUri",gxnat.ProjectTree.prototype.getExperimentNodeByUri);goog.exportSymbol("gxnat.ProjectTree.prototype.loadSubjectMetadata",gxnat.ProjectTree.prototype.loadSubjectMetadata);goog.exportSymbol("gxnat.ProjectTree.prototype.loadSubjects",gxnat.ProjectTree.prototype.loadSubjects);
goog.exportSymbol("gxnat.ProjectTree.prototype.loadSubject",gxnat.ProjectTree.prototype.loadSubject);goog.exportSymbol("gxnat.ProjectTree.prototype.loadExperimentMetadata",gxnat.ProjectTree.prototype.loadExperimentMetadata);goog.exportSymbol("gxnat.ProjectTree.prototype.loadExperiments",gxnat.ProjectTree.prototype.loadExperiments);goog.exportSymbol("gxnat.ProjectTree.prototype.loadExperiment",gxnat.ProjectTree.prototype.loadExperiment);goog.exportSymbol("gxnat.ProjectTree.prototype.dispose",gxnat.ProjectTree.prototype.dispose);goog.dom.classes={};goog.dom.classes.set=function(a,b){a.className=b};goog.dom.classes.get=function(a){a=a.className;return goog.isString(a)&&a.match(/\S+/g)||[]};goog.dom.classes.add=function(a,b){var c=goog.dom.classes.get(a),d=goog.array.slice(arguments,1),e=c.length+d.length;goog.dom.classes.add_(c,d);goog.dom.classes.set(a,c.join(" "));return c.length==e};
goog.dom.classes.remove=function(a,b){var c=goog.dom.classes.get(a),d=goog.array.slice(arguments,1),e=goog.dom.classes.getDifference_(c,d);goog.dom.classes.set(a,e.join(" "));return e.length==c.length-d.length};goog.dom.classes.add_=function(a,b){for(var c=0;c<b.length;c++)goog.array.contains(a,b[c])||a.push(b[c])};goog.dom.classes.getDifference_=function(a,b){return goog.array.filter(a,function(a){return!goog.array.contains(b,a)})};
goog.dom.classes.swap=function(a,b,c){for(var d=goog.dom.classes.get(a),e=!1,f=0;f<d.length;f++)d[f]==b&&(goog.array.splice(d,f--,1),e=!0);e&&(d.push(c),goog.dom.classes.set(a,d.join(" ")));return e};goog.dom.classes.addRemove=function(a,b,c){var d=goog.dom.classes.get(a);goog.isString(b)?goog.array.remove(d,b):goog.isArray(b)&&(d=goog.dom.classes.getDifference_(d,b));goog.isString(c)&&!goog.array.contains(d,c)?d.push(c):goog.isArray(c)&&goog.dom.classes.add_(d,c);goog.dom.classes.set(a,d.join(" "))};
goog.dom.classes.has=function(a,b){return goog.array.contains(goog.dom.classes.get(a),b)};goog.dom.classes.enable=function(a,b,c){c?goog.dom.classes.add(a,b):goog.dom.classes.remove(a,b)};goog.dom.classes.toggle=function(a,b){var c=!goog.dom.classes.has(a,b);goog.dom.classes.enable(a,b,c);return c};goog.math.Coordinate=function(a,b){this.x=goog.isDef(a)?a:0;this.y=goog.isDef(b)?b:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.equals=function(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1};goog.math.Coordinate.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)};
goog.math.Coordinate.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};goog.math.Coordinate.azimuth=function(a){return goog.math.angle(0,0,a.x,a.y)};goog.math.Coordinate.squaredDistance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d};goog.math.Coordinate.difference=function(a,b){return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};goog.math.Coordinate.sum=function(a,b){return new goog.math.Coordinate(a.x+b.x,a.y+b.y)};
goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.x+=a.x,this.y+=a.y):(this.x+=a,goog.isNumber(b)&&(this.y+=b));return this};
goog.math.Coordinate.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.x*=a;this.y*=c;return this};goog.math.Coordinate.prototype.rotateRadians=function(a,b){var c=b||new goog.math.Coordinate(0,0),d=this.x,e=this.y,f=Math.cos(a),g=Math.sin(a);this.x=(d-c.x)*f-(e-c.y)*g+c.x;this.y=(d-c.x)*g+(e-c.y)*f+c.y};goog.math.Coordinate.prototype.rotateDegrees=function(a,b){this.rotateRadians(goog.math.toRadians(a),b)};goog.math.Box=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};goog.math.Box.boundingBox=function(a){for(var b=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),c=1;c<arguments.length;c++){var d=arguments[c];b.top=Math.min(b.top,d.y);b.right=Math.max(b.right,d.x);b.bottom=Math.max(b.bottom,d.y);b.left=Math.min(b.left,d.x)}return b};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};
goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(a){return goog.math.Box.contains(this,a)};goog.math.Box.prototype.expand=function(a,b,c,d){goog.isObject(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=b,this.bottom+=c,this.left-=d);return this};
goog.math.Box.prototype.expandToInclude=function(a){this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.right=Math.max(this.right,a.right);this.bottom=Math.max(this.bottom,a.bottom)};goog.math.Box.equals=function(a,b){return a==b?!0:a&&b?a.top==b.top&&a.right==b.right&&a.bottom==b.bottom&&a.left==b.left:!1};
goog.math.Box.contains=function(a,b){return a&&b?b instanceof goog.math.Box?b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom:b.x>=a.left&&b.x<=a.right&&b.y>=a.top&&b.y<=a.bottom:!1};goog.math.Box.relativePositionX=function(a,b){return b.x<a.left?b.x-a.left:b.x>a.right?b.x-a.right:0};goog.math.Box.relativePositionY=function(a,b){return b.y<a.top?b.y-a.top:b.y>a.bottom?b.y-a.bottom:0};
goog.math.Box.distance=function(a,b){var c=goog.math.Box.relativePositionX(a,b),d=goog.math.Box.relativePositionY(a,b);return Math.sqrt(c*c+d*d)};goog.math.Box.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom};goog.math.Box.intersectsWithPadding=function(a,b,c){return a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c};
goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,goog.isNumber(b)&&(this.top+=b,this.bottom+=b));return this};
goog.math.Box.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};goog.math.Size=function(a,b){this.width=a;this.height=b};goog.math.Size.equals=function(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};
goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
goog.math.Size.prototype.fitsInside=function(a){return this.width<=a.width&&this.height<=a.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.width*=a;this.height*=c;return this};
goog.math.Size.prototype.scaleToFit=function(a){a=this.aspectRatio()>a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(a)};goog.math.Rect=function(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromBox=function(a){return new goog.math.Rect(a.left,a.top,a.right-a.left,a.bottom-a.top)};
goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(a,b){return a==b?!0:a&&b?a.left==b.left&&a.width==b.width&&a.top==b.top&&a.height==b.height:!1};
goog.math.Rect.prototype.intersection=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};
goog.math.Rect.intersection=function(a,b){var c=Math.max(a.left,b.left),d=Math.min(a.left+a.width,b.left+b.width);if(c<=d){var e=Math.max(a.top,b.top),f=Math.min(a.top+a.height,b.top+b.height);if(e<=f)return new goog.math.Rect(c,e,d-c,f-e)}return null};goog.math.Rect.intersects=function(a,b){return a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height};goog.math.Rect.prototype.intersects=function(a){return goog.math.Rect.intersects(this,a)};
goog.math.Rect.difference=function(a,b){var c=goog.math.Rect.intersection(a,b);if(!c||!c.height||!c.width)return[a.clone()];var c=[],d=a.top,e=a.height,f=a.left+a.width,g=a.top+a.height,h=b.left+b.width,k=b.top+b.height;b.top>a.top&&(c.push(new goog.math.Rect(a.left,a.top,a.width,b.top-a.top)),d=b.top,e-=b.top-a.top);k<g&&(c.push(new goog.math.Rect(a.left,k,a.width,g-k)),e=k-d);b.left>a.left&&c.push(new goog.math.Rect(a.left,d,b.left-a.left,e));h<f&&c.push(new goog.math.Rect(h,d,f-h,e));return c};
goog.math.Rect.prototype.difference=function(a){return goog.math.Rect.difference(this,a)};goog.math.Rect.prototype.boundingRect=function(a){var b=Math.max(this.left+this.width,a.left+a.width),c=Math.max(this.top+this.height,a.top+a.height);this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.width=b-this.left;this.height=c-this.top};goog.math.Rect.boundingRect=function(a,b){if(!a||!b)return null;var c=a.clone();c.boundingRect(b);return c};
goog.math.Rect.prototype.contains=function(a){return a instanceof goog.math.Rect?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};goog.math.Rect.prototype.squaredDistance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return b*b+a*a};
goog.math.Rect.prototype.distance=function(a){return Math.sqrt(this.squaredDistance(a))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};
goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(a,b){a instanceof goog.math.Coordinate?(this.left+=a.x,this.top+=a.y):(this.left+=a,goog.isNumber(b)&&(this.top+=b));return this};goog.math.Rect.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null};
goog.dom.vendor.getPrefixedPropertyName=function(a,b){if(b&&a in b)return a;var c=goog.dom.vendor.getVendorJsPrefix();return c?(c=c.toLowerCase(),c+=goog.string.toTitleCase(a),!goog.isDef(b)||c in b?c:null):null};goog.dom.vendor.getPrefixedEventType=function(a){return((goog.dom.vendor.getVendorJsPrefix()||"")+a).toLowerCase()};goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",
DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",
NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",
TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.getDomHelper=function(a){return a?new goog.dom.DomHelper(goog.dom.getOwnerDocument(a)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.getDocument=function(){return document};goog.dom.getElement=function(a){return goog.dom.getElementHelper_(document,a)};
goog.dom.getElementHelper_=function(a,b){return goog.isString(b)?a.getElementById(b):b};goog.dom.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(document,a)};goog.dom.getRequiredElementHelper_=function(a,b){goog.asserts.assertString(b);var c=goog.dom.getElementHelper_(a,b);return c=goog.asserts.assertElement(c,"No element found with id: "+b)};goog.dom.$=goog.dom.getElement;
goog.dom.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(document,a,b,c)};goog.dom.getElementsByClass=function(a,b){var c=b||document;return goog.dom.canUseQuerySelector_(c)?c.querySelectorAll("."+a):goog.dom.getElementsByTagNameAndClass_(document,"*",a,b)};goog.dom.getElementByClass=function(a,b){var c=b||document,d=null;return(d=goog.dom.canUseQuerySelector_(c)?c.querySelector("."+a):goog.dom.getElementsByTagNameAndClass_(document,"*",a,b)[0])||null};
goog.dom.getRequiredElementByClass=function(a,b){var c=goog.dom.getElementByClass(a,b);return goog.asserts.assert(c,"No element found with className: "+a)};goog.dom.canUseQuerySelector_=function(a){return!(!a.querySelectorAll||!a.querySelector)};
goog.dom.getElementsByTagNameAndClass_=function(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(goog.dom.canUseQuerySelector_(a)&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&goog.array.contains(b.split(/\s+/),c)&&(d[e++]=g);d.length=
e;return d}return a};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(a,b){goog.object.forEach(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in goog.dom.DIRECT_ATTRIBUTE_MAP_?a.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[d],b):goog.string.startsWith(d,"aria-")||goog.string.startsWith(d,"data-")?a.setAttribute(d,b):a[d]=b})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(a){return goog.dom.getViewportSize_(a||window)};goog.dom.getViewportSize_=function(a){a=a.document;a=goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body;return new goog.math.Size(a.clientWidth,a.clientHeight)};
goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(a){var b=a.document,c=0;if(b){var c=b.body,d=b.documentElement;if(!c&&!d)return 0;a=goog.dom.getViewportSize_(a).height;if(goog.dom.isCss1CompatMode_(b)&&d.scrollHeight)c=d.scrollHeight!=a?d.scrollHeight:d.offsetHeight;else{var b=d.scrollHeight,e=d.offsetHeight;d.clientHeight!=e&&(b=c.scrollHeight,e=c.offsetHeight);c=b>a?b>e?b:e:b<e?b:e}}return c};
goog.dom.getPageScroll=function(a){return goog.dom.getDomHelper((a||goog.global||window).document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};
goog.dom.getDocumentScroll_=function(a){var b=goog.dom.getDocumentScrollElement_(a);a=goog.dom.getWindow_(a);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&a.pageYOffset!=b.scrollTop?new goog.math.Coordinate(b.scrollLeft,b.scrollTop):new goog.math.Coordinate(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(a){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body||a.documentElement};goog.dom.getWindow=function(a){return a?goog.dom.getWindow_(a):window};goog.dom.getWindow_=function(a){return a.parentWindow||a.defaultView};goog.dom.createDom=function(a,b,c){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(a,b){var c=b[0],d=b[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',goog.string.htmlEscape(d.name),'"');if(d.type){c.push(' type="',goog.string.htmlEscape(d.type),'"');var e={};goog.object.extend(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(goog.isString(d)?c.className=d:goog.isArray(d)?c.className=d.join(" "):goog.dom.setProperties(c,d));2<b.length&&goog.dom.append_(a,
c,b,2);return c};goog.dom.append_=function(a,b,c,d){function e(c){c&&b.appendChild(goog.isString(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];goog.isArrayLike(f)&&!goog.dom.isNodeLike(f)?goog.array.forEach(goog.dom.isNodeList(f)?goog.array.toArray(f):f,e):e(f)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(a){return document.createElement(a)};goog.dom.createTextNode=function(a){return document.createTextNode(String(a))};
goog.dom.createTable=function(a,b,c){return goog.dom.createTable_(document,a,b,!!c)};goog.dom.createTable_=function(a,b,c,d){for(var e=["<tr>"],f=0;f<c;f++)e.push(d?"<td>&nbsp;</td>":"<td></td>");e.push("</tr>");e=e.join("");c=["<table>"];for(f=0;f<b;f++)c.push(e);c.push("</table>");a=a.createElement(goog.dom.TagName.DIV);a.innerHTML=c.join("");return a.removeChild(a.firstChild)};goog.dom.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(document,a)};
goog.dom.htmlToDocumentFragment_=function(a,b){var c=a.createElement("div");goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(c.innerHTML="<br>"+b,c.removeChild(c.firstChild)):c.innerHTML=b;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(var d=a.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);return d};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};
goog.dom.isCss1CompatMode_=function(a){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==a.compatMode};goog.dom.canHaveChildren=function(a){if(a.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(a.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0};
goog.dom.appendChild=function(a,b){a.appendChild(b)};goog.dom.append=function(a,b){goog.dom.append_(goog.dom.getOwnerDocument(a),a,arguments,1)};goog.dom.removeChildren=function(a){for(var b;b=a.firstChild;)a.removeChild(b)};goog.dom.insertSiblingBefore=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)};goog.dom.insertSiblingAfter=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)};goog.dom.insertChildAt=function(a,b,c){a.insertBefore(b,a.childNodes[c]||null)};
goog.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};goog.dom.replaceNode=function(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)};goog.dom.flattenElement=function(a){var b,c=a.parentNode;if(c&&c.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(a.removeNode)return a.removeNode(!1);for(;b=a.firstChild;)c.insertBefore(b,a);return goog.dom.removeNode(a)}};
goog.dom.getChildren=function(a){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=a.children?a.children:goog.array.filter(a.childNodes,function(a){return a.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(a){return void 0!=a.firstElementChild?a.firstElementChild:goog.dom.getNextElementNode_(a.firstChild,!0)};goog.dom.getLastElementChild=function(a){return void 0!=a.lastElementChild?a.lastElementChild:goog.dom.getNextElementNode_(a.lastChild,!1)};
goog.dom.getNextElementSibling=function(a){return void 0!=a.nextElementSibling?a.nextElementSibling:goog.dom.getNextElementNode_(a.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(a){return void 0!=a.previousElementSibling?a.previousElementSibling:goog.dom.getNextElementNode_(a.previousSibling,!1)};goog.dom.getNextElementNode_=function(a,b){for(;a&&a.nodeType!=goog.dom.NodeType.ELEMENT;)a=b?a.nextSibling:a.previousSibling;return a};
goog.dom.getNextNode=function(a){if(!a)return null;if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null};goog.dom.getPreviousNode=function(a){if(!a)return null;if(!a.previousSibling)return a.parentNode;for(a=a.previousSibling;a&&a.lastChild;)a=a.lastChild;return a};goog.dom.isNodeLike=function(a){return goog.isObject(a)&&0<a.nodeType};goog.dom.isElement=function(a){return goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT};
goog.dom.isWindow=function(a){return goog.isObject(a)&&a.window==a};goog.dom.getParentElement=function(a){var b;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&a instanceof goog.global.SVGElement)&&(b=a.parentElement))return b;b=a.parentNode;return goog.dom.isElement(b)?b:null};
goog.dom.contains=function(a,b){if(a.contains&&b.nodeType==goog.dom.NodeType.ELEMENT)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};
goog.dom.compareNodeOrder=function(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(a.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(b.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=a.nodeType==goog.dom.NodeType.ELEMENT,d=b.nodeType==goog.dom.NodeType.ELEMENT;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,
f=b.parentNode;return e==f?goog.dom.compareSiblingOrder_(a,b):!c&&goog.dom.contains(e,b)?-1*goog.dom.compareParentsDescendantNodeIe_(a,b):!d&&goog.dom.contains(f,a)?goog.dom.compareParentsDescendantNodeIe_(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}d=goog.dom.getOwnerDocument(a);c=d.createRange();c.selectNode(a);c.collapse(!0);d=d.createRange();d.selectNode(b);d.collapse(!0);return c.compareBoundaryPoints(goog.global.Range.START_TO_END,d)};
goog.dom.compareParentsDescendantNodeIe_=function(a,b){var c=a.parentNode;if(c==b)return-1;for(var d=b;d.parentNode!=c;)d=d.parentNode;return goog.dom.compareSiblingOrder_(d,a)};goog.dom.compareSiblingOrder_=function(a,b){for(var c=b;c=c.previousSibling;)if(c==a)return-1;return 1};
goog.dom.findCommonAncestor=function(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var f=[],g=arguments[b];g;)f.unshift(g),g=g.parentNode;d.push(f);e=Math.min(e,f.length)}f=null;for(b=0;b<e;b++){for(var g=d[0][b],h=1;h<c;h++)if(g!=d[h][b])return f;f=g}return f};goog.dom.getOwnerDocument=function(a){goog.asserts.assert(a,"Node cannot be null or undefined.");return a.nodeType==goog.dom.NodeType.DOCUMENT?a:a.ownerDocument||a.document};
goog.dom.getFrameContentDocument=function(a){return a.contentDocument||a.contentWindow.document};goog.dom.getFrameContentWindow=function(a){return a.contentWindow||goog.dom.getWindow(goog.dom.getFrameContentDocument(a))};
goog.dom.setTextContent=function(a,b){goog.asserts.assert(null!=a,"goog.dom.setTextContent expects a non-null value for node");if("textContent"in a)a.textContent=b;else if(a.nodeType==goog.dom.NodeType.TEXT)a.data=b;else if(a.firstChild&&a.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{goog.dom.removeChildren(a);var c=goog.dom.getOwnerDocument(a);a.appendChild(c.createTextNode(String(b)))}};
goog.dom.getOuterHtml=function(a){if("outerHTML"in a)return a.outerHTML;var b=goog.dom.getOwnerDocument(a).createElement("div");b.appendChild(a.cloneNode(!0));return b.innerHTML};goog.dom.findNode=function(a,b){var c=[];return goog.dom.findNodes_(a,b,c,!0)?c[0]:void 0};goog.dom.findNodes=function(a,b){var c=[];goog.dom.findNodes_(a,b,c,!1);return c};goog.dom.findNodes_=function(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||goog.dom.findNodes_(a,b,c,d))return!0;a=a.nextSibling}return!1};
goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(a){return goog.dom.hasSpecifiedTabIndex_(a)&&goog.dom.isTabIndexFocusable_(a)};goog.dom.setFocusableTabIndex=function(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))};
goog.dom.isFocusable=function(a){var b;return(b=goog.dom.nativelySupportsFocus_(a)?!a.disabled&&(!goog.dom.hasSpecifiedTabIndex_(a)||goog.dom.isTabIndexFocusable_(a)):goog.dom.isFocusableTabIndex(a))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(a):b};goog.dom.hasSpecifiedTabIndex_=function(a){a=a.getAttributeNode("tabindex");return goog.isDefAndNotNull(a)&&a.specified};goog.dom.isTabIndexFocusable_=function(a){a=a.tabIndex;return goog.isNumber(a)&&0<=a&&32768>a};
goog.dom.nativelySupportsFocus_=function(a){return a.tagName==goog.dom.TagName.A||a.tagName==goog.dom.TagName.INPUT||a.tagName==goog.dom.TagName.TEXTAREA||a.tagName==goog.dom.TagName.SELECT||a.tagName==goog.dom.TagName.BUTTON};goog.dom.hasNonZeroBoundingRect_=function(a){a=goog.isFunction(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth};return goog.isDefAndNotNull(a)&&0<a.height&&0<a.width};
goog.dom.getTextContent=function(a){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in a)a=goog.string.canonicalizeNewlines(a.innerText);else{var b=[];goog.dom.getTextContent_(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a};goog.dom.getRawTextContent=function(a){var b=[];goog.dom.getTextContent_(a,b,!1);return b.join("")};
goog.dom.getTextContent_=function(a,b,c){if(!(a.nodeName in goog.dom.TAGS_TO_IGNORE_))if(a.nodeType==goog.dom.NodeType.TEXT)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)b.push(goog.dom.PREDEFINED_TAG_VALUES_[a.nodeName]);else for(a=a.firstChild;a;)goog.dom.getTextContent_(a,b,c),a=a.nextSibling};goog.dom.getNodeTextLength=function(a){return goog.dom.getTextContent(a).length};
goog.dom.getNodeTextOffset=function(a,b){for(var c=b||goog.dom.getOwnerDocument(a).body,d=[];a&&a!=c;){for(var e=a;e=e.previousSibling;)d.unshift(goog.dom.getTextContent(e));a=a.parentNode}return goog.string.trimLeft(d.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(a,b,c){a=[a];for(var d=0,e=null;0<a.length&&d<b;)if(e=a.pop(),!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT)var f=e.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," "),d=d+f.length;else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)d+=goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName].length;else for(f=e.childNodes.length-1;0<=f;f--)a.push(e.childNodes[f]);goog.isObject(c)&&(c.remainder=e?e.nodeValue.length+b-d-1:0,c.node=e);return e};
goog.dom.isNodeList=function(a){if(a&&"number"==typeof a.length){if(goog.isObject(a))return"function"==typeof a.item||"string"==typeof a.item;if(goog.isFunction(a))return"function"==typeof a.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return goog.dom.getAncestor(a,function(a){return(!d||a.nodeName==d)&&(!c||goog.isString(a.className)&&goog.array.contains(a.className.split(/\s+/),c))},!0)};
goog.dom.getAncestorByClass=function(a,b){return goog.dom.getAncestorByTagNameAndClass(a,null,b)};goog.dom.getAncestor=function(a,b,c,d){c||(a=a.parentNode);c=null==d;for(var e=0;a&&(c||e<=d);){if(b(a))return a;a=a.parentNode;e++}return null};goog.dom.getActiveElement=function(a){try{return a&&a.activeElement}catch(b){}return null};
goog.dom.getPixelRatio=goog.functions.cacheReturnValue(function(){var a=goog.dom.getWindow(),b=goog.userAgent.GECKO&&goog.userAgent.MOBILE;return goog.isDef(a.devicePixelRatio)&&!b?a.devicePixelRatio:a.matchMedia?goog.dom.matchesPixelRatio_(.75)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(3)||1:1});
goog.dom.matchesPixelRatio_=function(a){return goog.dom.getWindow().matchMedia("(-webkit-min-device-pixel-ratio: "+a+"),(min--moz-device-pixel-ratio: "+a+"),(min-resolution: "+a+"dppx)").matches?a:0};goog.dom.DomHelper=function(a){this.document_=a||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(a){this.document_=a};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};
goog.dom.DomHelper.prototype.getElement=function(a){return goog.dom.getElementHelper_(this.document_,a)};goog.dom.DomHelper.prototype.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(this.document_,a)};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(this.document_,a,b,c)};
goog.dom.DomHelper.prototype.getElementsByClass=function(a,b){return goog.dom.getElementsByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(a,b){return goog.dom.getElementByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.getRequiredElementByClass=function(a,b){return goog.dom.getRequiredElementByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;
goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(a){return goog.dom.getViewportSize(a||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(a,b,c){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;
goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createTextNode=function(a){return this.document_.createTextNode(String(a))};goog.dom.DomHelper.prototype.createTable=function(a,b,c){return goog.dom.createTable_(this.document_,a,b,!!c)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(this.document_,a)};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};
goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(a){return goog.dom.getActiveElement(a||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;
goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;
goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;
goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;
goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;
goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;
goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.style={};goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS=!1;goog.style.setStyle=function(a,b,c){goog.isString(b)?goog.style.setStyle_(a,c,b):goog.object.forEach(b,goog.partial(goog.style.setStyle_,a))};goog.style.setStyle_=function(a,b,c){(c=goog.style.getVendorJsStyleName_(a,c))&&(a.style[c]=b)};goog.style.getVendorJsStyleName_=function(a,b){var c=goog.string.toCamelCase(b);if(void 0===a.style[c]){var d=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(c);if(void 0!==a.style[d])return d}return c};
goog.style.getVendorStyleName_=function(a,b){var c=goog.string.toCamelCase(b);return void 0===a.style[c]&&(c=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(c),void 0!==a.style[c])?goog.dom.vendor.getVendorPrefix()+"-"+b:b};goog.style.getStyle=function(a,b){var c=a.style[goog.string.toCamelCase(b)];return"undefined"!==typeof c?c:a.style[goog.style.getVendorJsStyleName_(a,b)]||""};
goog.style.getComputedStyle=function(a,b){var c=goog.dom.getOwnerDocument(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""};goog.style.getCascadedStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:null};goog.style.getStyle_=function(a,b){return goog.style.getComputedStyle(a,b)||goog.style.getCascadedStyle(a,b)||a.style&&a.style[b]};
goog.style.getComputedBoxSizing=function(a){return goog.style.getStyle_(a,"boxSizing")||goog.style.getStyle_(a,"MozBoxSizing")||goog.style.getStyle_(a,"WebkitBoxSizing")||null};goog.style.getComputedPosition=function(a){return goog.style.getStyle_(a,"position")};goog.style.getBackgroundColor=function(a){return goog.style.getStyle_(a,"backgroundColor")};goog.style.getComputedOverflowX=function(a){return goog.style.getStyle_(a,"overflowX")};
goog.style.getComputedOverflowY=function(a){return goog.style.getStyle_(a,"overflowY")};goog.style.getComputedZIndex=function(a){return goog.style.getStyle_(a,"zIndex")};goog.style.getComputedTextAlign=function(a){return goog.style.getStyle_(a,"textAlign")};goog.style.getComputedCursor=function(a){return goog.style.getStyle_(a,"cursor")};goog.style.getComputedTransform=function(a){var b=goog.style.getVendorStyleName_(a,"transform");return goog.style.getStyle_(a,b)||goog.style.getStyle_(a,"transform")};
goog.style.setPosition=function(a,b,c){var d,e=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersionOrHigher("1.9");b instanceof goog.math.Coordinate?(d=b.x,b=b.y):(d=b,b=c);a.style.left=goog.style.getPixelStyleValue_(d,e);a.style.top=goog.style.getPixelStyleValue_(b,e)};goog.style.getPosition=function(a){return new goog.math.Coordinate(a.offsetLeft,a.offsetTop)};
goog.style.getClientViewportElement=function(a){a=a?goog.dom.getOwnerDocument(a):goog.dom.getDocument();return!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(a).isCss1CompatMode()?a.documentElement:a.body};goog.style.getViewportPageOffset=function(a){var b=a.body;a=a.documentElement;return new goog.math.Coordinate(b.scrollLeft||a.scrollLeft,b.scrollTop||a.scrollTop)};
goog.style.getBoundingClientRect_=function(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}goog.userAgent.IE&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b};
goog.style.getOffsetParent=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return a.offsetParent;var b=goog.dom.getOwnerDocument(a),c=goog.style.getStyle_(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=goog.style.getStyle_(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null};
goog.style.getVisibleRectForElement=function(a){for(var b=new goog.math.Box(0,Infinity,Infinity,0),c=goog.dom.getDomHelper(a),d=c.getDocument().body,e=c.getDocument().documentElement,f=c.getDocumentScrollElement();a=goog.style.getOffsetParent(a);)if(!(goog.userAgent.IE&&0==a.clientWidth||goog.userAgent.WEBKIT&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=goog.style.getStyle_(a,"overflow")){var g=goog.style.getPageOffset(a),h=goog.style.getClientLeftTop(a);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.getViewportSize();b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null};
goog.style.getContainerOffsetToScrollInto=function(a,b,c){var d=goog.style.getPageOffset(a),e=goog.style.getPageOffset(b),f=goog.style.getBorderBox(b),g=d.x-e.x-f.left,d=d.y-e.y-f.top,e=b.clientWidth-a.offsetWidth;a=b.clientHeight-a.offsetHeight;f=b.scrollLeft;b=b.scrollTop;c?(f+=g-e/2,b+=d-a/2):(f+=Math.min(g,Math.max(g-e,0)),b+=Math.min(d,Math.max(d-a,0)));return new goog.math.Coordinate(f,b)};
goog.style.scrollIntoContainerView=function(a,b,c){a=goog.style.getContainerOffsetToScrollInto(a,b,c);b.scrollLeft=a.x;b.scrollTop=a.y};
goog.style.getClientLeftTop=function(a){if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("1.9")){var b=parseFloat(goog.style.getComputedStyle(a,"borderLeftWidth"));if(goog.style.isRightToLeft(a))var c=a.offsetWidth-a.clientWidth-b-parseFloat(goog.style.getComputedStyle(a,"borderRightWidth")),b=b+c;return new goog.math.Coordinate(b,parseFloat(goog.style.getComputedStyle(a,"borderTopWidth")))}return new goog.math.Coordinate(a.clientLeft,a.clientTop)};
goog.style.getPageOffset=function(a){var b,c=goog.dom.getOwnerDocument(a),d=goog.style.getStyle_(a,"position");goog.asserts.assertObject(a,"Parameter is required");var e=!goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS&&goog.userAgent.GECKO&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new goog.math.Coordinate(0,0),g=goog.style.getClientViewportElement(c);if(a==g)return f;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||
a.getBoundingClientRect)b=goog.style.getBoundingClientRect_(a),a=goog.dom.getDomHelper(c).getDocumentScroll(),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(goog.userAgent.WEBKIT&&"fixed"==goog.style.getComputedPosition(b)){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&
b!=a);if(goog.userAgent.OPERA||goog.userAgent.WEBKIT&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=goog.style.getOffsetParent(b))&&b!=c.body&&b!=g;)f.x-=b.scrollLeft,goog.userAgent.OPERA&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f};goog.style.getPageOffsetLeft=function(a){return goog.style.getPageOffset(a).x};goog.style.getPageOffsetTop=function(a){return goog.style.getPageOffset(a).y};
goog.style.getFramedPageOffset=function(a,b){var c=new goog.math.Coordinate(0,0),d=goog.dom.getWindow(goog.dom.getOwnerDocument(a)),e=a;do{var f=d==b?goog.style.getPageOffset(e):goog.style.getClientPositionForElement_(goog.asserts.assert(e));c.x+=f.x;c.y+=f.y}while(d&&d!=b&&(e=d.frameElement)&&(d=d.parent));return c};
goog.style.translateRectForAnotherFrame=function(a,b,c){if(b.getDocument()!=c.getDocument()){var d=b.getDocument().body;c=goog.style.getFramedPageOffset(d,c.getWindow());c=goog.math.Coordinate.difference(c,goog.style.getPageOffset(d));goog.userAgent.IE&&!b.isCss1CompatMode()&&(c=goog.math.Coordinate.difference(c,b.getDocumentScroll()));a.left+=c.x;a.top+=c.y}};
goog.style.getRelativePosition=function(a,b){var c=goog.style.getClientPosition(a),d=goog.style.getClientPosition(b);return new goog.math.Coordinate(c.x-d.x,c.y-d.y)};
goog.style.getClientPositionForElement_=function(a){var b;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||a.getBoundingClientRect)b=goog.style.getBoundingClientRect_(a),b=new goog.math.Coordinate(b.left,b.top);else{b=goog.dom.getDomHelper(a).getDocumentScroll();var c=goog.style.getPageOffset(a);b=new goog.math.Coordinate(c.x-b.x,c.y-b.y)}return goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(12)?goog.math.Coordinate.sum(b,goog.style.getCssTranslation(a)):b};
goog.style.getClientPosition=function(a){goog.asserts.assert(a);if(a.nodeType==goog.dom.NodeType.ELEMENT)return goog.style.getClientPositionForElement_(a);var b=goog.isFunction(a.getBrowserEvent),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.getBrowserEvent().targetTouches&&(c=a.getBrowserEvent().targetTouches[0]);return new goog.math.Coordinate(c.clientX,c.clientY)};
goog.style.setPageOffset=function(a,b,c){var d=goog.style.getPageOffset(a);b instanceof goog.math.Coordinate&&(c=b.y,b=b.x);goog.style.setPosition(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))};goog.style.setSize=function(a,b,c){if(b instanceof goog.math.Size)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");goog.style.setWidth(a,b);goog.style.setHeight(a,c)};goog.style.getPixelStyleValue_=function(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a};
goog.style.setHeight=function(a,b){a.style.height=goog.style.getPixelStyleValue_(b,!0)};goog.style.setWidth=function(a,b){a.style.width=goog.style.getPixelStyleValue_(b,!0)};goog.style.getSize=function(a){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,a)};
goog.style.evaluateWithTemporaryDisplay_=function(a,b){if("none"!=goog.style.getStyle_(b,"display"))return a(b);var c=b.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";var g=a(b);c.display=d;c.position=f;c.visibility=e;return g};
goog.style.getSizeWithDisplay_=function(a){var b=a.offsetWidth,c=a.offsetHeight,d=goog.userAgent.WEBKIT&&!b&&!c;return goog.isDef(b)&&!d||!a.getBoundingClientRect?new goog.math.Size(b,c):(a=goog.style.getBoundingClientRect_(a),new goog.math.Size(a.right-a.left,a.bottom-a.top))};goog.style.getTransformedSize=function(a){if(!a.getBoundingClientRect)return null;a=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,a);return new goog.math.Size(a.right-a.left,a.bottom-a.top)};
goog.style.getBounds=function(a){var b=goog.style.getPageOffset(a);a=goog.style.getSize(a);return new goog.math.Rect(b.x,b.y,a.width,a.height)};goog.style.toCamelCase=function(a){return goog.string.toCamelCase(String(a))};goog.style.toSelectorCase=function(a){return goog.string.toSelectorCase(a)};
goog.style.getOpacity=function(a){var b=a.style;a="";"opacity"in b?a=b.opacity:"MozOpacity"in b?a=b.MozOpacity:"filter"in b&&(b=b.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(a=String(b[1]/100));return""==a?a:Number(a)};goog.style.setOpacity=function(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")};
goog.style.setTransparentBackgroundImage=function(a,b){var c=a.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?c.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'", sizingMethod="crop")':(c.backgroundImage="url("+b+")",c.backgroundPosition="top left",c.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(a){a=a.style;"filter"in a?a.filter="":a.backgroundImage="none"};
goog.style.showElement=function(a,b){goog.style.setElementShown(a,b)};goog.style.setElementShown=function(a,b){a.style.display=b?"":"none"};goog.style.isElementShown=function(a){return"none"!=a.style.display};
goog.style.installStyles=function(a,b){var c=goog.dom.getDomHelper(b),d=null,e=c.getDocument();goog.userAgent.IE&&e.createStyleSheet?(d=e.createStyleSheet(),goog.style.setStyles(d,a)):(e=c.getElementsByTagNameAndClass("head")[0],e||(d=c.getElementsByTagNameAndClass("body")[0],e=c.createDom("head"),d.parentNode.insertBefore(e,d)),d=c.createDom("style"),goog.style.setStyles(d,a),c.appendChild(e,d));return d};goog.style.uninstallStyles=function(a){goog.dom.removeNode(a.ownerNode||a.owningElement||a)};
goog.style.setStyles=function(a,b){goog.userAgent.IE&&goog.isDef(a.cssText)?a.cssText=b:a.innerHTML=b};goog.style.setPreWrap=function(a){a=a.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(a.whiteSpace="pre",a.wordWrap="break-word"):a.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};
goog.style.setInlineBlock=function(a){a=a.style;a.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(a.zoom="1",a.display="inline"):a.display=goog.userAgent.GECKO?goog.userAgent.isVersionOrHigher("1.9a")?"inline-block":"-moz-inline-box":"inline-block"};goog.style.isRightToLeft=function(a){return"rtl"==goog.style.getStyle_(a,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;
goog.style.isUnselectable=function(a){return goog.style.unselectableStyle_?"none"==a.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==a.getAttribute("unselectable"):!1};
goog.style.setUnselectable=function(a,b,c){c=c?null:a.getElementsByTagName("*");var d=goog.style.unselectableStyle_;if(d){if(b=b?"none":"",a.style[d]=b,c){a=0;for(var e;e=c[a];a++)e.style[d]=b}}else if(goog.userAgent.IE||goog.userAgent.OPERA)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;e=c[a];a++)e.setAttribute("unselectable",b)};goog.style.getBorderBoxSize=function(a){return new goog.math.Size(a.offsetWidth,a.offsetHeight)};
goog.style.setBorderBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();if(!goog.userAgent.IE||d&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(a,b,"border-box");else if(c=a.style,d){var d=goog.style.getPaddingBox(a),e=goog.style.getBorderBox(a);c.pixelWidth=b.width-e.left-d.left-d.right-e.right;c.pixelHeight=b.height-e.top-d.top-d.bottom-e.bottom}else c.pixelWidth=b.width,c.pixelHeight=b.height};
goog.style.getContentBoxSize=function(a){var b=goog.dom.getOwnerDocument(a),c=goog.userAgent.IE&&a.currentStyle;if(c&&goog.dom.getDomHelper(b).isCss1CompatMode()&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)return b=goog.style.getIePixelValue_(a,c.width,"width","pixelWidth"),a=goog.style.getIePixelValue_(a,c.height,"height","pixelHeight"),new goog.math.Size(b,a);c=goog.style.getBorderBoxSize(a);b=goog.style.getPaddingBox(a);a=goog.style.getBorderBox(a);return new goog.math.Size(c.width-a.left-
b.left-b.right-a.right,c.height-a.top-b.top-b.bottom-a.bottom)};
goog.style.setContentBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();if(!goog.userAgent.IE||d&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(a,b,"content-box");else if(c=a.style,d)c.pixelWidth=b.width,c.pixelHeight=b.height;else{var d=goog.style.getPaddingBox(a),e=goog.style.getBorderBox(a);c.pixelWidth=b.width+e.left+d.left+d.right+e.right;c.pixelHeight=b.height+e.top+d.top+d.bottom+e.bottom}};
goog.style.setBoxSizingSize_=function(a,b,c){a=a.style;goog.userAgent.GECKO?a.MozBoxSizing=c:goog.userAgent.WEBKIT?a.WebkitBoxSizing=c:a.boxSizing=c;a.width=Math.max(b.width,0)+"px";a.height=Math.max(b.height,0)+"px"};goog.style.getIePixelValue_=function(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return b};
goog.style.getIePixelDistance_=function(a,b){var c=goog.style.getCascadedStyle(a,b);return c?goog.style.getIePixelValue_(a,c,"left","pixelLeft"):0};
goog.style.getBox_=function(a,b){if(goog.userAgent.IE){var c=goog.style.getIePixelDistance_(a,b+"Left"),d=goog.style.getIePixelDistance_(a,b+"Right"),e=goog.style.getIePixelDistance_(a,b+"Top"),f=goog.style.getIePixelDistance_(a,b+"Bottom");return new goog.math.Box(e,d,f,c)}c=goog.style.getComputedStyle(a,b+"Left");d=goog.style.getComputedStyle(a,b+"Right");e=goog.style.getComputedStyle(a,b+"Top");f=goog.style.getComputedStyle(a,b+"Bottom");return new goog.math.Box(parseFloat(e),parseFloat(d),parseFloat(f),
parseFloat(c))};goog.style.getPaddingBox=function(a){return goog.style.getBox_(a,"padding")};goog.style.getMarginBox=function(a){return goog.style.getBox_(a,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};
goog.style.getIePixelBorder_=function(a,b){if("none"==goog.style.getCascadedStyle(a,b+"Style"))return 0;var c=goog.style.getCascadedStyle(a,b+"Width");return c in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[c]:goog.style.getIePixelValue_(a,c,"left","pixelLeft")};
goog.style.getBorderBox=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var b=goog.style.getIePixelBorder_(a,"borderLeft"),c=goog.style.getIePixelBorder_(a,"borderRight"),d=goog.style.getIePixelBorder_(a,"borderTop");a=goog.style.getIePixelBorder_(a,"borderBottom");return new goog.math.Box(d,c,a,b)}b=goog.style.getComputedStyle(a,"borderLeftWidth");c=goog.style.getComputedStyle(a,"borderRightWidth");d=goog.style.getComputedStyle(a,"borderTopWidth");a=goog.style.getComputedStyle(a,
"borderBottomWidth");return new goog.math.Box(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};goog.style.getFontFamily=function(a){var b=goog.dom.getOwnerDocument(a),c="";if(b.body.createTextRange&&goog.dom.contains(b,a)){b=b.body.createTextRange();b.moveToElementText(a);try{c=b.queryCommandValue("FontName")}catch(d){c=""}}c||(c=goog.style.getStyle_(a,"fontFamily"));a=c.split(",");1<a.length&&(c=a[0]);return goog.string.stripQuotes(c,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;
goog.style.getLengthUnits=function(a){return(a=a.match(goog.style.lengthUnitRegex_))&&a[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(a){var b=goog.style.getStyle_(a,"fontSize"),c=goog.style.getLengthUnits(b);if(b&&"px"==c)return parseInt(b,10);if(goog.userAgent.IE){if(c in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(a,b,"left","pixelLeft");if(a.parentNode&&a.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&c in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return a=a.parentNode,c=goog.style.getStyle_(a,"fontSize"),goog.style.getIePixelValue_(a,b==c?"1em":b,"left","pixelLeft")}c=
goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(a,c);b=c.offsetHeight;goog.dom.removeNode(c);return b};goog.style.parseStyleAttribute=function(a){var b={};goog.array.forEach(a.split(/\s*;\s*/),function(a){a=a.split(/\s*:\s*/);2==a.length&&(b[goog.string.toCamelCase(a[0].toLowerCase())]=a[1])});return b};
goog.style.toStyleAttribute=function(a){var b=[];goog.object.forEach(a,function(a,d){b.push(goog.string.toSelectorCase(d),":",a,";")});return b.join("")};goog.style.setFloat=function(a,b){a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=b};goog.style.getFloat=function(a){return a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(a){var b=goog.dom.createElement("div");a&&(b.className=a);b.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";a=goog.dom.createElement("div");goog.style.setSize(a,"200px","200px");b.appendChild(a);goog.dom.appendChild(goog.dom.getDocument().body,b);a=b.offsetWidth-b.clientWidth;goog.dom.removeNode(b);return a};goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;
goog.style.getCssTranslation=function(a){a=goog.style.getComputedTransform(a);return a?(a=a.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(a[1]),parseFloat(a[2])):new goog.math.Coordinate(0,0):new goog.math.Coordinate(0,0)};goog.events.EventHandler=function(a){goog.Disposable.call(this);this.handler_=a;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(a,b,c,d){return this.listen_(a,b,c,d)};goog.events.EventHandler.prototype.listenWithScope=function(a,b,c,d,e){return this.listen_(a,b,c,d,e)};
goog.events.EventHandler.prototype.listen_=function(a,b,c,d,e){goog.isArray(b)||(b&&(goog.events.EventHandler.typeArray_[0]=b.toString()),b=goog.events.EventHandler.typeArray_);for(var f=0;f<b.length;f++){var g=goog.events.listen(a,b[f],c||this.handleEvent,d||!1,e||this.handler_||this);if(!g)break;this.keys_[g.key]=g}return this};goog.events.EventHandler.prototype.listenOnce=function(a,b,c,d){return this.listenOnce_(a,b,c,d)};
goog.events.EventHandler.prototype.listenOnceWithScope=function(a,b,c,d,e){return this.listenOnce_(a,b,c,d,e)};goog.events.EventHandler.prototype.listenOnce_=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.listenOnce_(a,b[f],c,d,e);else{a=goog.events.listenOnce(a,b,c||this.handleEvent,d,e||this.handler_||this);if(!a)return this;this.keys_[a.key]=a}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(a,b,c,d){return this.listenWithWrapper_(a,b,c,d)};
goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(a,b,c,d,e){return this.listenWithWrapper_(a,b,c,d,e)};goog.events.EventHandler.prototype.listenWithWrapper_=function(a,b,c,d,e){b.listen(a,c,d,e||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){var a=0,b;for(b in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,b)&&a++;return a};
goog.events.EventHandler.prototype.unlisten=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.unlisten(a,b[f],c,d,e);else if(a=goog.events.getListener(a,b,c||this.handleEvent,d,e||this.handler_||this))goog.events.unlistenByKey(a),delete this.keys_[a.key];return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e||this.handler_||this,this);return this};
goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,goog.events.unlistenByKey);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(a){throw Error("EventHandler.handleEvent not implemented");};goog.style.bidi={};goog.style.bidi.getScrollLeft=function(a){var b=goog.style.isRightToLeft(a);return b&&goog.userAgent.GECKO?-a.scrollLeft:!b||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(a)?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft};
goog.style.bidi.getOffsetStart=function(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=goog.style.getComputedPosition(a)||(c=goog.dom.getOwnerDocument(a).documentElement);if(!c)return b;if(goog.userAgent.GECKO)var d=goog.style.getBorderBox(c),b=b+d.left;else goog.userAgent.isDocumentModeOrHigher(8)&&(d=goog.style.getBorderBox(c),b-=d.left);return goog.style.isRightToLeft(c)?c.clientWidth-(b+a.offsetWidth):b};
goog.style.bidi.setScrollOffset=function(a,b){b=Math.max(b,0);goog.style.isRightToLeft(a)?goog.userAgent.GECKO?a.scrollLeft=-b:goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")?a.scrollLeft=b:a.scrollLeft=a.scrollWidth-b-a.clientWidth:a.scrollLeft=b};goog.style.bidi.setPosition=function(a,b,c,d){goog.isNull(c)||(a.style.top=c+"px");d?(a.style.right=b+"px",a.style.left=""):(a.style.left=b+"px",a.style.right="")};goog.fx={};goog.fx.Dragger=function(a,b,c){goog.events.EventTarget.call(this);this.target=a;this.handle=b||a;this.limits=c||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(a);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);
goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.3");
goog.fx.Dragger.cloneNode=function(a){for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":return goog.dom.createDom("table",null,goog.dom.createDom("tbody",null,b));case "td":case "th":return goog.dom.createDom("table",null,goog.dom.createDom("tbody",null,goog.dom.createDom("tr",null,b)));case "textarea":b.value=a.value;default:return b}};
goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.clientX=0;goog.fx.Dragger.prototype.clientY=0;goog.fx.Dragger.prototype.screenX=0;goog.fx.Dragger.prototype.screenY=0;goog.fx.Dragger.prototype.startX=0;goog.fx.Dragger.prototype.startY=0;goog.fx.Dragger.prototype.deltaX=0;goog.fx.Dragger.prototype.deltaY=0;goog.fx.Dragger.prototype.enabled_=!0;goog.fx.Dragger.prototype.dragging_=!1;
goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0;goog.fx.Dragger.prototype.mouseDownTime_=0;goog.fx.Dragger.prototype.ieDragStartCancellingOn_=!1;goog.fx.Dragger.prototype.useRightPositioningForRtl_=!1;goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(a){this.limits=a||new goog.math.Rect(NaN,NaN,NaN,NaN)};
goog.fx.Dragger.prototype.setHysteresis=function(a){this.hysteresisDistanceSquared_=Math.pow(a,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(a){this.scrollTarget_=a};goog.fx.Dragger.prototype.setCancelIeDragStart=function(a){this.ieDragStartCancellingOn_=a};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};
goog.fx.Dragger.prototype.setEnabled=function(a){this.enabled_=a};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.handle=this.target=null};goog.fx.Dragger.prototype.isRightToLeft_=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};
goog.fx.Dragger.prototype.startDrag=function(a){var b=a.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||b&&!a.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{this.maybeReinitTouchEvent_(a);if(0==this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0,a.preventDefault();else return;else a.preventDefault();this.setupDragHandlers();this.clientX=this.startX=a.clientX;this.clientY=this.startY=a.clientY;this.screenX=a.screenX;
this.screenY=a.screenY;this.computeInitialPosition();this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();this.mouseDownTime_=goog.now()}};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var a=this.document_,b=a.documentElement,c=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(a,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,c);this.eventHandler_.listen(a,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,c);goog.fx.Dragger.HAS_SET_CAPTURE_?(b.setCapture(!1),this.eventHandler_.listen(b,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(a),
goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(a,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,c)};goog.fx.Dragger.prototype.fireDragStart_=function(a){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,a.clientX,a.clientY,a))};
goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(a,b){this.cleanUpAfterDragging_();if(this.dragging_){this.maybeReinitTouchEvent_(a);this.dragging_=!1;var c=this.limitX(this.deltaX),d=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,a.clientX,a.clientY,a,c,d,b||a.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};
goog.fx.Dragger.prototype.endDragCancel=function(a){this.endDrag(a,!0)};goog.fx.Dragger.prototype.maybeReinitTouchEvent_=function(a){var b=a.type;b==goog.events.EventType.TOUCHSTART||b==goog.events.EventType.TOUCHMOVE?a.init(a.getBrowserEvent().targetTouches[0],a.currentTarget):b!=goog.events.EventType.TOUCHEND&&b!=goog.events.EventType.TOUCHCANCEL||a.init(a.getBrowserEvent().changedTouches[0],a.currentTarget)};
goog.fx.Dragger.prototype.handleMove_=function(a){if(this.enabled_){this.maybeReinitTouchEvent_(a);var b=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.dragging_){var d=this.startX-this.clientX,e=this.startY-this.clientY;if(d*d+e*e>this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0;else{this.isDisposed()||this.endDrag(a);
return}}c=this.calculatePosition_(b,c);b=c.x;c=c.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,a.clientX,a.clientY,a,b,c))&&(this.doDrag(a,b,c,!1),a.preventDefault())}};
goog.fx.Dragger.prototype.calculatePosition_=function(a,b){var c=goog.dom.getDomHelper(this.document_).getDocumentScroll();a+=c.x-this.pageScroll.x;b+=c.y-this.pageScroll.y;this.pageScroll=c;this.deltaX+=a;this.deltaY+=b;var c=this.limitX(this.deltaX),d=this.limitY(this.deltaY);return new goog.math.Coordinate(c,d)};goog.fx.Dragger.prototype.onScroll_=function(a){var b=this.calculatePosition_(0,0);a.clientX=this.clientX;a.clientY=this.clientY;this.doDrag(a,b.x,b.y,!0)};
goog.fx.Dragger.prototype.doDrag=function(a,b,c,d){this.defaultAction(b,c);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,a.clientX,a.clientY,a,b,c))};goog.fx.Dragger.prototype.limitX=function(a){var b=this.limits,c=isNaN(b.left)?null:b.left,b=isNaN(b.width)?0:b.width;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};
goog.fx.Dragger.prototype.limitY=function(a){var b=this.limits,c=isNaN(b.top)?null:b.top,b=isNaN(b.height)?0:b.height;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop};
goog.fx.Dragger.prototype.defaultAction=function(a,b){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};goog.fx.DragEvent=function(a,b,c,d,e,f,g,h){goog.events.Event.call(this,a);this.clientX=c;this.clientY=d;this.browserEvent=e;this.left=goog.isDef(f)?f:b.deltaX;this.top=goog.isDef(g)?g:b.deltaY;this.dragger=b;this.dragCanceled=!!h};
goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.string.TypedString=function(){};goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="";this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_};goog.string.Const.prototype.implementsGoogStringTypedString=!0;goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_};
goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"};goog.string.Const.unwrap=function(a){if(a instanceof goog.string.Const&&a.constructor===goog.string.Const&&a.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_)return a.stringConstValueWithSecurityContract__googStringSecurityPrivate_;goog.asserts.fail("expected object of type Const, got '"+a+"'");return"type_error:Const"};
goog.string.Const.from=function(a){return goog.string.Const.create__googStringSecurityPrivate_(a)};goog.string.Const.TYPE_MARKER_={};goog.string.Const.create__googStringSecurityPrivate_=function(a){var b=new goog.string.Const;b.stringConstValueWithSecurityContract__googStringSecurityPrivate_=a;return b};goog.i18n={};goog.i18n.bidi={};goog.i18n.bidi.FORCE_RTL=!1;
goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||
"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4));goog.i18n.bidi.Format={LRE:"\u202a",RLE:"\u202b",PDF:"\u202c",LRM:"\u200e",RLM:"\u200f"};goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0,UNKNOWN:0};goog.i18n.bidi.RIGHT="right";goog.i18n.bidi.LEFT="left";goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT;
goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;goog.i18n.bidi.toDir=function(a,b){return"number"==typeof a?0<a?goog.i18n.bidi.Dir.LTR:0>a?goog.i18n.bidi.Dir.RTL:b?null:goog.i18n.bidi.Dir.NEUTRAL:null==a?null:a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};goog.i18n.bidi.ltrChars_="A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff";goog.i18n.bidi.rtlChars_="\u0591-\u07ff\u200f\ufb1d-\ufdff\ufe70-\ufefc";
goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g;goog.i18n.bidi.stripHtmlIfNeeded_=function(a,b){return b?a.replace(goog.i18n.bidi.htmlSkipReg_,""):a};goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.hasAnyRtl=function(a,b){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl;
goog.i18n.bidi.hasAnyLtr=function(a,b){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.isRtlChar=function(a){return goog.i18n.bidi.rtlRe_.test(a)};goog.i18n.bidi.isLtrChar=function(a){return goog.i18n.bidi.ltrRe_.test(a)};goog.i18n.bidi.isNeutralChar=function(a){return!goog.i18n.bidi.isLtrChar(a)&&!goog.i18n.bidi.isRtlChar(a)};
goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.startsWithRtl=function(a,b){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl;
goog.i18n.bidi.startsWithLtr=function(a,b){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr;goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/;goog.i18n.bidi.isNeutralText=function(a,b){a=goog.i18n.bidi.stripHtmlIfNeeded_(a,b);return goog.i18n.bidi.isRequiredLtrRe_.test(a)||!goog.i18n.bidi.hasAnyLtr(a)&&!goog.i18n.bidi.hasAnyRtl(a)};
goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$");goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$");goog.i18n.bidi.endsWithLtr=function(a,b){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr;
goog.i18n.bidi.endsWithRtl=function(a,b){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl;goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;goog.i18n.bidi.isRtlLanguage=function(a){return goog.i18n.bidi.rtlLocalesRe_.test(a)};goog.i18n.bidi.bracketGuardHtmlRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(&lt;.*?(&gt;)+)/g;
goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g;goog.i18n.bidi.guardBracketInHtml=function(a,b){return(void 0===b?goog.i18n.bidi.hasAnyRtl(a):b)?a.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=rtl>$&</span>"):a.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=ltr>$&</span>")};
goog.i18n.bidi.guardBracketInText=function(a,b){var c=(void 0===b?goog.i18n.bidi.hasAnyRtl(a):b)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return a.replace(goog.i18n.bidi.bracketGuardTextRe_,c+"$&"+c)};goog.i18n.bidi.enforceRtlInHtml=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+a+"</span>"};goog.i18n.bidi.enforceRtlInText=function(a){return goog.i18n.bidi.Format.RLE+a+goog.i18n.bidi.Format.PDF};
goog.i18n.bidi.enforceLtrInHtml=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+a+"</span>"};goog.i18n.bidi.enforceLtrInText=function(a){return goog.i18n.bidi.Format.LRE+a+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g;goog.i18n.bidi.leftRe_=/left/gi;goog.i18n.bidi.rightRe_=/right/gi;goog.i18n.bidi.tempRe_=/%%%%/g;
goog.i18n.bidi.mirrorCSS=function(a){return a.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)};goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g;goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g;
goog.i18n.bidi.normalizeHebrewQuote=function(a){return a.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05f4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05f3")};goog.i18n.bidi.wordSeparatorRe_=/\s+/;goog.i18n.bidi.hasNumeralsRe_=/\d/;goog.i18n.bidi.rtlDetectionThreshold_=.4;
goog.i18n.bidi.estimateDirection=function(a,b){for(var c=0,d=0,e=!1,f=goog.i18n.bidi.stripHtmlIfNeeded_(a,b).split(goog.i18n.bidi.wordSeparatorRe_),g=0;g<f.length;g++){var h=f[g];goog.i18n.bidi.startsWithRtl(h)?(c++,d++):goog.i18n.bidi.isRequiredLtrRe_.test(h)?e=!0:goog.i18n.bidi.hasAnyLtr(h)?d++:goog.i18n.bidi.hasNumeralsRe_.test(h)&&(e=!0)}return 0==d?e?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:c/d>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};
goog.i18n.bidi.detectRtlDirectionality=function(a,b){return goog.i18n.bidi.estimateDirection(a,b)==goog.i18n.bidi.Dir.RTL};goog.i18n.bidi.setElementDirAndAlign=function(a,b){a&&(b=goog.i18n.bidi.toDir(b))&&(a.style.textAlign=b==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,a.dir=b==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")};goog.i18n.bidi.DirectionalString=function(){};goog.html={};goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez";goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0;goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};
goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"});
goog.html.SafeUrl.unwrap=function(a){if(a instanceof goog.html.SafeUrl&&a.constructor===goog.html.SafeUrl&&a.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeHtmlWrappedValue_;goog.asserts.fail("expected object of type SafeUrl, got '"+a+"'");return"type_error:SafeUrl"};goog.html.SafeUrl.fromConstant=function(a){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse_(goog.string.Const.unwrap(a))};
goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto):|[^&:/?#]*(?:[/?#]|$))/i;goog.html.SafeUrl.sanitize=function(a){if(a instanceof goog.html.SafeUrl)return a;a=a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);a=goog.html.SAFE_URL_PATTERN_.test(a)?goog.html.SafeUrl.normalize_(a):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse_(a)};
goog.html.SafeUrl.normalize_=function(a){try{var b=encodeURI(a)}catch(c){return goog.html.SafeUrl.INNOCUOUS_STRING}return b.replace(goog.html.SafeUrl.NORMALIZE_MATCHER_,function(a){return goog.html.SafeUrl.NORMALIZE_REPLACER_MAP_[a]})};goog.html.SafeUrl.NORMALIZE_MATCHER_=/[()']|%5B|%5D|%25/g;goog.html.SafeUrl.NORMALIZE_REPLACER_MAP_={"'":"%27","(":"%28",")":"%29","%5B":"[","%5D":"]","%25":"%"};goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};
goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse_=function(a){var b=new goog.html.SafeUrl;b.privateDoNotAccessOrElseSafeHtmlWrappedValue_=a;return b};goog.dom.tags={};goog.dom.tags.VOID_TAGS_=goog.object.createSet("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));goog.dom.tags.isVoidTag=function(a){return!0===goog.dom.tags.VOID_TAGS_[a]};goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="";this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0;goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};
goog.html.SafeStyle.fromConstant=function(a){a=goog.string.Const.unwrap(a);if(0===a.length)return goog.html.SafeStyle.EMPTY;goog.html.SafeStyle.checkStyle_(a);goog.asserts.assert(goog.string.endsWith(a,";"),"Last character of style string is not ';': "+a);goog.asserts.assert(goog.string.contains(a,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+a);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse_(a)};
goog.html.SafeStyle.checkStyle_=function(a){goog.asserts.assert(!/[<>]/.test(a),"Forbidden characters in style string: "+a)};goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_};goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"});
goog.html.SafeStyle.unwrap=function(a){if(a instanceof goog.html.SafeStyle&&a.constructor===goog.html.SafeStyle&&a.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeStyleWrappedValue_;goog.asserts.fail("expected object of type SafeStyle, got '"+a+"'");return"type_error:SafeStyle"};
goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse_=function(a){var b=new goog.html.SafeStyle;b.privateDoNotAccessOrElseSafeStyleWrappedValue_=a;return b};goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse_("");goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez";
goog.html.SafeStyle.create=function(a){var b="",c;for(c in a){if(!/^[-_a-zA-Z0-9]+$/.test(c))throw Error("Name allows only [-_a-zA-Z0-9], got: "+c);var d=a[c];null!=d&&(d instanceof goog.string.Const?(d=goog.string.Const.unwrap(d),goog.asserts.assert(!/[{;}]/.test(d),"Value does not allow [{;}].")):goog.html.SafeStyle.VALUE_RE_.test(d)||(goog.asserts.fail("String value allows only [-.%_!# a-zA-Z0-9], got: "+d),d=goog.html.SafeStyle.INNOCUOUS_STRING),b+=c+":"+d+";")}if(!b)return goog.html.SafeStyle.EMPTY;
goog.html.SafeStyle.checkStyle_(b);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse_(b)};goog.html.SafeStyle.VALUE_RE_=/^[-.%_!# a-zA-Z0-9]+$/;goog.html.SafeStyle.concat=function(a){var b="",c=function(a){goog.isArray(a)?goog.array.forEach(a,c):b+=goog.html.SafeStyle.unwrap(a)};goog.array.forEach(arguments,c);return b?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse_(b):goog.html.SafeStyle.EMPTY};goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;this.dir_=null};goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_};goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0;goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};
goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"});goog.html.SafeHtml.unwrap=function(a){if(a instanceof goog.html.SafeHtml&&a.constructor===goog.html.SafeHtml&&a.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseSafeHtmlWrappedValue_;goog.asserts.fail("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"};
goog.html.SafeHtml.htmlEscape=function(a){if(a instanceof goog.html.SafeHtml)return a;var b=null;a.implementsGoogI18nBidiDirectionalString&&(b=a.getDirection());a=a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse_(goog.string.htmlEscape(a),b)};
goog.html.SafeHtml.htmlEscapePreservingNewlines=function(a){if(a instanceof goog.html.SafeHtml)return a;a=goog.html.SafeHtml.htmlEscape(a);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse_(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(a)),a.getDirection())};goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape;goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/;
goog.html.SafeHtml.URL_ATTRIBUTES_=goog.object.createSet("action","cite","data","formaction","href","manifest","poster","src");goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet("link","script","style");
goog.html.SafeHtml.create=function(a,b,c){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(a))throw Error("Invalid tag name <"+a+">.");if(a.toLowerCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+a+"> is not allowed for SafeHtml.");var d=null,e="<"+a;if(b)for(var f in b){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(f))throw Error('Invalid attribute name "'+f+'".');var g=b[f];if(null!=g){if(g instanceof goog.string.Const)g=goog.string.Const.unwrap(g);else if("style"==f.toLowerCase())g=
goog.html.SafeHtml.getStyleValue_(g);else{if(/^on/i.test(f))throw Error('Attribute "'+f+'" requires goog.string.Const value, "'+g+'" given.');if(g instanceof goog.html.SafeUrl)g=goog.html.SafeUrl.unwrap(g);else if(f.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)throw Error('Attribute "'+f+'" requires goog.string.Const or goog.html.SafeUrl value, "'+g+'" given.');}goog.asserts.assert(goog.isString(g)||goog.isNumber(g),"String or number value expected, got "+typeof g+" with value: "+g);e+=" "+
f+'="'+goog.string.htmlEscape(String(g))+'"'}}goog.isDef(c)?goog.isArray(c)||(c=[c]):c=[];goog.dom.tags.isVoidTag(a.toLowerCase())?(goog.asserts.assert(!c.length,"Void tag <"+a+"> does not allow content."),e+=">"):(d=goog.html.SafeHtml.concat(c),e+=">"+goog.html.SafeHtml.unwrap(d)+"</"+a+">",d=d.getDirection());(a=b&&b.dir)&&(d=/^(ltr|rtl|auto)$/i.test(a)?goog.i18n.bidi.Dir.NEUTRAL:null);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse_(e,d)};
goog.html.SafeHtml.getStyleValue_=function(a){if(!goog.isObject(a))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof a+" given: "+a);a instanceof goog.html.SafeStyle||(a=goog.html.SafeStyle.create(a));return goog.html.SafeStyle.unwrap(a)};goog.html.SafeHtml.createWithDir=function(a,b,c,d){b=goog.html.SafeHtml.create(b,c,d);b.dir_=a;return b};
goog.html.SafeHtml.concat=function(a){var b=goog.i18n.bidi.Dir.NEUTRAL,c="",d=function(a){goog.isArray(a)?goog.array.forEach(a,d):(a=goog.html.SafeHtml.htmlEscape(a),c+=goog.html.SafeHtml.unwrap(a),a=a.getDirection(),b==goog.i18n.bidi.Dir.NEUTRAL?b=a:a!=goog.i18n.bidi.Dir.NEUTRAL&&b!=a&&(b=null))};goog.array.forEach(arguments,d);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse_(c,b)};
goog.html.SafeHtml.concatWithDir=function(a,b){var c=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));c.dir_=a;return c};goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse_=function(a,b){var c=new goog.html.SafeHtml;c.privateDoNotAccessOrElseSafeHtmlWrappedValue_=a;c.dir_=b;return c};goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse_("",goog.i18n.bidi.Dir.NEUTRAL);goog.dom.safe={};goog.dom.safe.setInnerHtml=function(a,b){a.innerHTML=goog.html.SafeHtml.unwrap(b)};goog.dom.safe.setOuterHtml=function(a,b){a.outerHTML=goog.html.SafeHtml.unwrap(b)};goog.dom.safe.documentWrite=function(a,b){a.write(goog.html.SafeHtml.unwrap(b))};goog.dom.safe.setAnchorHref=function(a,b){var c;c=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitize(b);a.href=goog.html.SafeUrl.unwrap(c)};
goog.dom.safe.setLocationHref=function(a,b){var c;c=b instanceof goog.html.SafeUrl?b:goog.html.SafeUrl.sanitize(b);a.href=goog.html.SafeUrl.unwrap(c)};goog.ui={};goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)};goog.ui.Component=function(a){goog.events.EventTarget.call(this);this.dom_=a||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_;this.id_=null;this.inDocument_=!1;this.element_=null;this.googUiComponentHandler_=void 0;this.childIndex_=this.children_=this.parent_=this.model_=null;this.wasDecorated_=!1};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.ALLOW_DETACHED_DECORATION=!1;goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();
goog.ui.Component.DEFAULT_BIDI_DIR=0;goog.ui.Component.defaultRightToLeft_=1==goog.ui.Component.DEFAULT_BIDI_DIR?!1:-1==goog.ui.Component.DEFAULT_BIDI_DIR?!0:null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(a,b){switch(a){case goog.ui.Component.State.DISABLED:return b?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return b?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return b?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return b?goog.ui.Component.EventType.SELECT:
goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return b?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return b?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return b?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(a){goog.ui.Component.defaultRightToLeft_=a};goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(a){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,a,this));this.id_=a};goog.ui.Component.prototype.getElement=function(){return this.element_};
goog.ui.Component.prototype.getElementStrict=function(){var a=this.element_;goog.asserts.assert(a,"Can not call getElementStrict before rendering/decorating.");return a};goog.ui.Component.prototype.setElementInternal=function(a){this.element_=a};goog.ui.Component.prototype.getElementsByClass=function(a){return this.element_?this.dom_.getElementsByClass(a,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(a){return this.element_?this.dom_.getElementByClass(a,this.element_):null};
goog.ui.Component.prototype.getRequiredElementByClass=function(a){var b=this.getElementByClass(a);goog.asserts.assert(b,"Expected element in component with class: %s",a);return b};goog.ui.Component.prototype.getHandler=function(){this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this));return this.googUiComponentHandler_};
goog.ui.Component.prototype.setParent=function(a){if(this==a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(a&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=a;goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(a){if(this.parent_&&this.parent_!=a)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")};goog.ui.Component.prototype.render=function(a){this.render_(a)};
goog.ui.Component.prototype.renderBefore=function(a){this.render_(a.parentNode,a)};goog.ui.Component.prototype.render_=function(a,b){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();a?a.insertBefore(this.element_,b||null):this.dom_.getDocument().body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};
goog.ui.Component.prototype.decorate=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(a&&this.canDecorate(a)){this.wasDecorated_=!0;var b=goog.dom.getOwnerDocument(a);this.dom_&&this.dom_.getDocument()==b||(this.dom_=goog.dom.getDomHelper(a));this.decorateInternal(a);goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(b,a)||this.enterDocument()}else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};goog.ui.Component.prototype.canDecorate=function(a){return!0};
goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(a){this.element_=a};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(a){!a.isInDocument()&&a.getElement()&&a.enterDocument()})};
goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(a){a.isInDocument()&&a.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};
goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(a){a.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null;goog.ui.Component.superClass_.disposeInternal.call(this)};
goog.ui.Component.prototype.makeId=function(a){return this.getId()+"."+a};goog.ui.Component.prototype.makeIds=function(a){var b={},c;for(c in a)b[c]=this.makeId(a[c]);return b};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(a){this.model_=a};goog.ui.Component.prototype.getFragmentFromId=function(a){return a.substring(this.getId().length+1)};
goog.ui.Component.prototype.getElementByFragment=function(a){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(a))};goog.ui.Component.prototype.addChild=function(a,b){this.addChildAt(a,this.getChildCount(),b)};
goog.ui.Component.prototype.addChildAt=function(a,b,c){goog.asserts.assert(!!a,"Provided element must not be null.");if(a.inDocument_&&(c||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>b||b>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]);a.getParent()==this?(goog.object.set(this.childIndex_,a.getId(),a),goog.array.remove(this.children_,a)):goog.object.add(this.childIndex_,
a.getId(),a);a.setParent(this);goog.array.insertAt(this.children_,a,b);a.inDocument_&&this.inDocument_&&a.getParent()==this?(c=this.getContentElement(),c.insertBefore(a.getElement(),c.childNodes[b]||null)):c?(this.element_||this.createDom(),b=this.getChildAt(b+1),a.render_(this.getContentElement(),b?b.element_:null)):this.inDocument_&&!a.inDocument_&&a.element_&&a.element_.parentNode&&a.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&a.enterDocument()};
goog.ui.Component.prototype.getContentElement=function(){return this.element_};goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=a};
goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length};goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var a=[];this.forEachChild(function(b){a.push(b.getId())});return a};goog.ui.Component.prototype.getChild=function(a){return this.childIndex_&&a?goog.object.get(this.childIndex_,a)||null:null};
goog.ui.Component.prototype.getChildAt=function(a){return this.children_?this.children_[a]||null:null};goog.ui.Component.prototype.forEachChild=function(a,b){this.children_&&goog.array.forEach(this.children_,a,b)};goog.ui.Component.prototype.indexOfChild=function(a){return this.children_&&a?goog.array.indexOf(this.children_,a):-1};
goog.ui.Component.prototype.removeChild=function(a,b){if(a){var c=goog.isString(a)?a:a.getId();a=this.getChild(c);c&&a&&(goog.object.remove(this.childIndex_,c),goog.array.remove(this.children_,a),b&&(a.exitDocument(),a.element_&&goog.dom.removeNode(a.element_)),a.setParent(null))}if(!a)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return a};goog.ui.Component.prototype.removeChildAt=function(a,b){return this.removeChild(this.getChildAt(a),b)};
goog.ui.Component.prototype.removeChildren=function(a){for(var b=[];this.hasChildren();)b.push(this.removeChildAt(0,a));return b};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,
V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,
TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=goog.events.KeyCodes.F1&&a.keyCode<=goog.events.KeyCodes.F12)return!1;switch(a.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;
default:return a.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(a,b,c,d,e){if(!(goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&e)return goog.events.KeyCodes.isCharacterKey(a);if(e&&!d)return!1;goog.isNumber(b)&&(b=goog.events.KeyCodes.normalizeKeyCode(b));if(!c&&(b==goog.events.KeyCodes.CTRL||b==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&b==goog.events.KeyCodes.META))return!1;if(goog.userAgent.WEBKIT&&d&&c)switch(a){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&
d&&b==a)return!1;switch(a){case goog.events.KeyCodes.ENTER:return!(goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9));case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(a)};
goog.events.KeyCodes.isCharacterKey=function(a){if(a>=goog.events.KeyCodes.ZERO&&a<=goog.events.KeyCodes.NINE||a>=goog.events.KeyCodes.NUM_ZERO&&a<=goog.events.KeyCodes.NUM_MULTIPLY||a>=goog.events.KeyCodes.A&&a<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==a)return!0;switch(a){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}};goog.events.KeyCodes.normalizeKeyCode=function(a){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(a):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(a):a};
goog.events.KeyCodes.normalizeGeckoKeyCode=function(a){switch(a){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return a}};
goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(a){switch(a){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return a}};goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.ui.PopupBase=function(a,b){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(a||null);b&&this.setType(b)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHidePartners_=null;goog.ui.PopupBase.prototype.autoHideRegion_=null;
goog.ui.PopupBase.prototype.isVisible_=!1;goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;
goog.ui.PopupBase.prototype.getType=function(){return this.type_};goog.ui.PopupBase.prototype.setType=function(a){this.type_=a};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(a){this.shouldHideAsync_=a};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};goog.ui.PopupBase.prototype.setElement=function(a){this.ensureNotVisible_();this.element_=a};
goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};goog.ui.PopupBase.prototype.setAutoHide=function(a){this.ensureNotVisible_();this.autoHide_=a};goog.ui.PopupBase.prototype.addAutoHidePartner=function(a){this.autoHidePartners_||(this.autoHidePartners_=[]);goog.array.insert(this.autoHidePartners_,a)};goog.ui.PopupBase.prototype.removeAutoHidePartner=function(a){this.autoHidePartners_&&goog.array.remove(this.autoHidePartners_,a)};goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};
goog.ui.PopupBase.prototype.setHideOnEscape=function(a){this.ensureNotVisible_();this.hideOnEscape_=a};goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(a){this.enableCrossIframeDismissal_=a};goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};goog.ui.PopupBase.prototype.setAutoHideRegion=function(a){this.autoHideRegion_=a};
goog.ui.PopupBase.prototype.setTransition=function(a,b){this.showTransition_=a;this.hideTransition_=b};goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.getHandler=function(){return this.handler_};goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.");};
goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.setVisible=function(a){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();a?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;
goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var a=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(a,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_)if(this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){var b;try{b=a.activeElement}catch(c){}for(;b&&
"IFRAME"==b.nodeName;){try{var d=goog.dom.getFrameContentDocument(b)}catch(e){break}a=d;b=a.activeElement}this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(a,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(a,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();this.isVisible_=
!0;this.lastShowTime_=goog.now();this.lastHideTime_=-1;if(this.showTransition_)goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow_,!1,this),this.showTransition_.play();else this.onShow_()}};
goog.ui.PopupBase.prototype.hide_=function(a){if(!this.isVisible_||!this.onBeforeHide_(a))return!1;this.handler_&&this.handler_.removeAll();this.isVisible_=!1;this.lastHideTime_=goog.now();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,a),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(a);return!0};
goog.ui.PopupBase.prototype.continueHidingPopup_=function(a){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement,0,this):this.hidePopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.onHide_(a)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.setElementShown(this.element_,!0)};
goog.ui.PopupBase.prototype.hidePopupElement=function(){this.element_.style.visibility="hidden";goog.style.setElementShown(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow_=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.PopupBase.prototype.onBeforeHide_=function(a){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:a})};goog.ui.PopupBase.prototype.onHide_=function(a){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:a})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(a){a=a.target;goog.dom.contains(this.element_,a)||this.isOrWithinAutoHidePartner_(a)||!this.isWithinAutoHideRegion_(a)||this.shouldDebounce_()||this.hide_(a)};
goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(a){a.keyCode==goog.events.KeyCodes.ESC&&this.hide_(a.target)&&(a.preventDefault(),a.stopPropagation())};goog.ui.PopupBase.prototype.onDocumentBlur_=function(a){if(this.enableCrossIframeDismissal_){var b=goog.dom.getOwnerDocument(this.element_);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||goog.dom.contains(this.element_,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;this.shouldDebounce_()||this.hide_()}};
goog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_=function(a){return goog.array.some(this.autoHidePartners_||[],function(b){return a===b||goog.dom.contains(b,a)})};goog.ui.PopupBase.prototype.isWithinAutoHideRegion_=function(a){return this.autoHideRegion_?goog.dom.contains(this.autoHideRegion_,a):!0};goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this);this.handler_.dispose();goog.dispose(this.showTransition_);goog.dispose(this.hideTransition_);delete this.element_;delete this.handler_;delete this.autoHidePartners_};goog.dom.classlist={};goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1;goog.dom.classlist.get=function(a){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList)return a.classList;a=a.className;return goog.isString(a)&&a.match(/\S+/g)||[]};goog.dom.classlist.set=function(a,b){a.className=b};goog.dom.classlist.contains=function(a,b){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.contains(b):goog.array.contains(goog.dom.classlist.get(a),b)};
goog.dom.classlist.add=function(a,b){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.add(b):goog.dom.classlist.contains(a,b)||(a.className+=0<a.className.length?" "+b:b)};
goog.dom.classlist.addAll=function(a,b){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList)goog.array.forEach(b,function(b){goog.dom.classlist.add(a,b)});else{var c={};goog.array.forEach(goog.dom.classlist.get(a),function(a){c[a]=!0});goog.array.forEach(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}};
goog.dom.classlist.remove=function(a,b){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.remove(b):goog.dom.classlist.contains(a,b)&&(a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return a!=b}).join(" "))};
goog.dom.classlist.removeAll=function(a,b){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?goog.array.forEach(b,function(b){goog.dom.classlist.remove(a,b)}):a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return!goog.array.contains(b,a)}).join(" ")};goog.dom.classlist.enable=function(a,b,c){c?goog.dom.classlist.add(a,b):goog.dom.classlist.remove(a,b)};goog.dom.classlist.enableAll=function(a,b,c){(c?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(a,b)};
goog.dom.classlist.swap=function(a,b,c){return goog.dom.classlist.contains(a,b)?(goog.dom.classlist.remove(a,b),goog.dom.classlist.add(a,c),!0):!1};goog.dom.classlist.toggle=function(a,b){var c=!goog.dom.classlist.contains(a,b);goog.dom.classlist.enable(a,b,c);return c};goog.dom.classlist.addRemove=function(a,b,c){goog.dom.classlist.remove(a,b);goog.dom.classlist.add(a,c)};goog.a11y={};goog.a11y.aria={};
goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",
PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"};goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"};goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};
goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"};goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"};goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};
goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"};goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.datatables={};
goog.a11y.aria.datatables.getDefaultValuesMap=function(){goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,
"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false"));return goog.a11y.aria.DefaultStateValueMap_};goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",
MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",
TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.a11y.aria.ARIA_PREFIX_="aria-";goog.a11y.aria.ROLE_ATTRIBUTE_="role";goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=[goog.dom.TagName.A,goog.dom.TagName.AREA,goog.dom.TagName.BUTTON,goog.dom.TagName.HEAD,goog.dom.TagName.INPUT,goog.dom.TagName.LINK,goog.dom.TagName.MENU,goog.dom.TagName.META,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.PROGRESS,goog.dom.TagName.STYLE,goog.dom.TagName.SELECT,goog.dom.TagName.SOURCE,goog.dom.TagName.TEXTAREA,goog.dom.TagName.TITLE,goog.dom.TagName.TRACK];
goog.a11y.aria.setRole=function(a,b){b?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,b),"No such ARIA role "+b),a.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,b)):goog.a11y.aria.removeRole(a)};goog.a11y.aria.getRole=function(a){return a.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null};goog.a11y.aria.removeRole=function(a){a.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)};
goog.a11y.aria.setState=function(a,b,c){goog.isArrayLike(c)&&(c=c.join(" "));var d=goog.a11y.aria.getAriaAttributeName_(b);""===c||void 0==c?(c=goog.a11y.aria.datatables.getDefaultValuesMap(),b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};goog.a11y.aria.removeState=function(a,b){a.removeAttribute(goog.a11y.aria.getAriaAttributeName_(b))};goog.a11y.aria.getState=function(a,b){var c=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));return null==c||void 0==c?"":String(c)};
goog.a11y.aria.getActiveDescendant=function(a){var b=goog.a11y.aria.getState(a,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(a).getElementById(b)};goog.a11y.aria.setActiveDescendant=function(a,b){var c="";b&&(c=b.id,goog.asserts.assert(c,"The active element should have an id."));goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,c)};goog.a11y.aria.getLabel=function(a){return goog.a11y.aria.getState(a,goog.a11y.aria.State.LABEL)};
goog.a11y.aria.setLabel=function(a,b){goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,b)};goog.a11y.aria.assertRoleIsSetInternalUtil=function(a,b){if(!goog.array.contains(goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_,a.tagName)){var c=goog.a11y.aria.getRole(a);goog.asserts.assert(null!=c,"The element ARIA role cannot be null.");goog.asserts.assert(goog.array.contains(b,c),'Non existing or incorrect role set for element.The role set is "'+c+'". The role should be any of "'+b+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.')}};
goog.a11y.aria.getStateBoolean=function(a,b){var c=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));goog.asserts.assert(goog.isBoolean(c)||null==c||"true"==c||"false"==c);return null==c?c:goog.isBoolean(c)?c:"true"==c};goog.a11y.aria.getStateNumber=function(a,b){var c=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));goog.asserts.assert((null==c||!isNaN(Number(c)))&&!goog.isBoolean(c));return null==c?null:Number(c)};
goog.a11y.aria.getStateString=function(a,b){var c=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));goog.asserts.assert((null==c||goog.isString(c))&&isNaN(Number(c))&&"true"!=c&&"false"!=c);return null==c?null:c};goog.a11y.aria.getStringArrayStateInternalUtil=function(a,b){var c=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(b));return goog.a11y.aria.splitStringOnWhitespace_(c)};goog.a11y.aria.splitStringOnWhitespace_=function(a){return a?a.split(/\s+/):[]};
goog.a11y.aria.getAriaAttributeName_=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(a,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,a),"No such ARIA attribute "+a));return goog.a11y.aria.ARIA_PREFIX_+a};goog.events.FocusHandler=function(a){goog.events.EventTarget.call(this);this.element_=a;a=goog.userAgent.IE?"focusout":"blur";this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE);this.listenKeyOut_=goog.events.listen(this.element_,a,this,!goog.userAgent.IE)};goog.inherits(goog.events.FocusHandler,goog.events.EventTarget);goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"};
goog.events.FocusHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent(),b=new goog.events.BrowserEvent(b);b.type="focusin"==a.type||"focus"==a.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT;this.dispatchEvent(b)};goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKeyIn_);goog.events.unlistenByKey(this.listenKeyOut_);delete this.element_};goog.dom.iframe={};goog.dom.iframe.BLANK_SOURCE='javascript:""';goog.dom.iframe.BLANK_SOURCE_NEW_FRAME=goog.userAgent.IE?'javascript:""':"javascript:undefined";goog.dom.iframe.STYLES_="border:0;vertical-align:bottom;";goog.dom.iframe.createBlank=function(a,b){return a.createDom("iframe",{frameborder:0,style:goog.dom.iframe.STYLES_+(b||""),src:goog.dom.iframe.BLANK_SOURCE})};goog.dom.iframe.writeContent=function(a,b){var c=goog.dom.getFrameContentDocument(a);c.open();c.write(b);c.close()};
goog.dom.iframe.createWithContent=function(a,b,c,d,e){var f=goog.dom.getDomHelper(a),g=[];e||g.push("<!DOCTYPE html>");g.push("<html><head>",b,"</head><body>",c,"</body></html>");b=goog.dom.iframe.createBlank(f,d);a.appendChild(b);goog.dom.iframe.writeContent(b,g.join(""));return b};goog.ui.ModalPopup=function(a,b){goog.ui.Component.call(this,b);this.useIframeMask_=!!a;this.lastFocus_=null};goog.inherits(goog.ui.ModalPopup,goog.ui.Component);goog.ui.ModalPopup.prototype.focusHandler_=null;goog.ui.ModalPopup.prototype.visible_=!1;goog.ui.ModalPopup.prototype.bgEl_=null;goog.ui.ModalPopup.prototype.bgIframeEl_=null;goog.ui.ModalPopup.prototype.tabCatcherElement_=null;goog.ui.ModalPopup.prototype.backwardTabWrapInProgress_=!1;goog.ui.ModalPopup.prototype.getCssClass=function(){return"goog-modalpopup"};
goog.ui.ModalPopup.prototype.getBackgroundIframe=function(){return this.bgIframeEl_};goog.ui.ModalPopup.prototype.getBackgroundElement=function(){return this.bgEl_};goog.ui.ModalPopup.prototype.createDom=function(){goog.ui.ModalPopup.superClass_.createDom.call(this);var a=this.getElement();goog.asserts.assert(a);var b=goog.string.trim(this.getCssClass()).split(" ");goog.dom.classlist.addAll(a,b);goog.dom.setFocusableTabIndex(a,!0);goog.style.setElementShown(a,!1);this.manageBackgroundDom_();this.createTabCatcher_()};
goog.ui.ModalPopup.prototype.manageBackgroundDom_=function(){this.useIframeMask_&&!this.bgIframeEl_&&(this.bgIframeEl_=goog.dom.iframe.createBlank(this.getDomHelper()),this.bgIframeEl_.className=this.getCssClass()+"-bg",goog.style.setElementShown(this.bgIframeEl_,!1),goog.style.setOpacity(this.bgIframeEl_,0));this.bgEl_||(this.bgEl_=this.getDomHelper().createDom("div",this.getCssClass()+"-bg"),goog.style.setElementShown(this.bgEl_,!1))};
goog.ui.ModalPopup.prototype.createTabCatcher_=function(){this.tabCatcherElement_||(this.tabCatcherElement_=this.getDomHelper().createElement("span"),goog.style.setElementShown(this.tabCatcherElement_,!1),goog.dom.setFocusableTabIndex(this.tabCatcherElement_,!0),this.tabCatcherElement_.style.position="absolute")};
goog.ui.ModalPopup.prototype.setupBackwardTabWrap=function(){this.backwardTabWrapInProgress_=!0;try{this.tabCatcherElement_.focus()}catch(a){}goog.Timer.callOnce(this.resetBackwardTabWrap_,0,this)};goog.ui.ModalPopup.prototype.resetBackwardTabWrap_=function(){this.backwardTabWrapInProgress_=!1};
goog.ui.ModalPopup.prototype.renderBackground_=function(){goog.asserts.assert(!!this.bgEl_,"Background element must not be null.");this.bgIframeEl_&&goog.dom.insertSiblingBefore(this.bgIframeEl_,this.getElement());goog.dom.insertSiblingBefore(this.bgEl_,this.getElement())};goog.ui.ModalPopup.prototype.canDecorate=function(a){return!!a&&a.tagName==goog.dom.TagName.DIV};
goog.ui.ModalPopup.prototype.decorateInternal=function(a){goog.ui.ModalPopup.superClass_.decorateInternal.call(this,a);a=goog.string.trim(this.getCssClass()).split(" ");goog.dom.classlist.addAll(goog.asserts.assert(this.getElement()),a);this.manageBackgroundDom_();this.createTabCatcher_();goog.style.setElementShown(this.getElement(),!1)};
goog.ui.ModalPopup.prototype.enterDocument=function(){this.renderBackground_();goog.ui.ModalPopup.superClass_.enterDocument.call(this);goog.dom.insertSiblingAfter(this.tabCatcherElement_,this.getElement());this.focusHandler_=new goog.events.FocusHandler(this.getDomHelper().getDocument());this.getHandler().listen(this.focusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.onFocus);this.setA11YDetectBackground(!1)};
goog.ui.ModalPopup.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);goog.dispose(this.focusHandler_);goog.ui.ModalPopup.superClass_.exitDocument.call(this);goog.dom.removeNode(this.bgIframeEl_);goog.dom.removeNode(this.bgEl_);goog.dom.removeNode(this.tabCatcherElement_)};
goog.ui.ModalPopup.prototype.setVisible=function(a){goog.asserts.assert(this.isInDocument(),"ModalPopup must be rendered first.");a!=this.visible_&&(this.popupShowTransition_&&this.popupShowTransition_.stop(),this.bgShowTransition_&&this.bgShowTransition_.stop(),this.popupHideTransition_&&this.popupHideTransition_.stop(),this.bgHideTransition_&&this.bgHideTransition_.stop(),this.isInDocument()&&this.setA11YDetectBackground(a),a?this.show_():this.hide_())};
goog.ui.ModalPopup.prototype.setA11YDetectBackground=function(a){if(a){this.hiddenElements_||(this.hiddenElements_=[]);a=this.getDomHelper();a=a.getChildren(a.getDocument().body);for(var b=0;b<a.length;b++){var c=a[b];c==this.getElementStrict()||goog.a11y.aria.getState(c,goog.a11y.aria.State.HIDDEN)||(goog.a11y.aria.setState(c,goog.a11y.aria.State.HIDDEN,!0),this.hiddenElements_.push(c))}}else if(this.hiddenElements_){for(b=0;b<this.hiddenElements_.length;b++)goog.a11y.aria.removeState(this.hiddenElements_[b],
goog.a11y.aria.State.HIDDEN);this.hiddenElements_=null}};goog.ui.ModalPopup.prototype.setTransition=function(a,b,c,d){this.popupShowTransition_=a;this.popupHideTransition_=b;this.bgShowTransition_=c;this.bgHideTransition_=d};
goog.ui.ModalPopup.prototype.show_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)){try{this.lastFocus_=this.getDomHelper().getDocument().activeElement}catch(a){}this.resizeBackground_();this.reposition();this.getHandler().listen(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_);this.showPopupElement_(!0);this.focus();this.visible_=!0;if(this.popupShowTransition_&&this.bgShowTransition_)goog.events.listenOnce(this.popupShowTransition_,goog.fx.Transition.EventType.END,
this.onShow,!1,this),this.bgShowTransition_.play(),this.popupShowTransition_.play();else this.onShow()}};
goog.ui.ModalPopup.prototype.hide_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_HIDE)){this.getHandler().unlisten(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_);this.visible_=!1;if(this.popupHideTransition_&&this.bgHideTransition_)goog.events.listenOnce(this.popupHideTransition_,goog.fx.Transition.EventType.END,this.onHide,!1,this),this.bgHideTransition_.play(),this.popupHideTransition_.play();else this.onHide();try{var a=this.getDomHelper().getDocument().body,
b=this.getDomHelper().getDocument().activeElement||a;this.lastFocus_&&b==a&&this.lastFocus_!=a&&this.lastFocus_.focus()}catch(c){}this.lastFocus_=null}};goog.ui.ModalPopup.prototype.showPopupElement_=function(a){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,a);this.bgEl_&&goog.style.setElementShown(this.bgEl_,a);goog.style.setElementShown(this.getElement(),a);goog.style.setElementShown(this.tabCatcherElement_,a)};goog.ui.ModalPopup.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.ModalPopup.prototype.onHide=function(){this.showPopupElement_(!1);this.dispatchEvent(goog.ui.PopupBase.EventType.HIDE)};goog.ui.ModalPopup.prototype.isVisible=function(){return this.visible_};goog.ui.ModalPopup.prototype.focus=function(){this.focusElement_()};
goog.ui.ModalPopup.prototype.resizeBackground_=function(){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,!1);this.bgEl_&&goog.style.setElementShown(this.bgEl_,!1);var a=this.getDomHelper().getDocument(),b=goog.dom.getWindow(a)||window,c=goog.dom.getViewportSize(b),b=Math.max(c.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(c.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.bgIframeEl_&&(goog.style.setElementShown(this.bgIframeEl_,
!0),goog.style.setSize(this.bgIframeEl_,b,a));this.bgEl_&&(goog.style.setElementShown(this.bgEl_,!0),goog.style.setSize(this.bgEl_,b,a))};
goog.ui.ModalPopup.prototype.reposition=function(){var a=this.getDomHelper().getDocument(),b=goog.dom.getWindow(a)||window;if("fixed"==goog.style.getComputedPosition(this.getElement()))var c=a=0;else c=this.getDomHelper().getDocumentScroll(),a=c.x,c=c.y;var d=goog.style.getSize(this.getElement()),b=goog.dom.getViewportSize(b),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);goog.style.setPosition(this.getElement(),a,c);goog.style.setPosition(this.tabCatcherElement_,a,c)};
goog.ui.ModalPopup.prototype.onFocus=function(a){this.backwardTabWrapInProgress_?this.resetBackwardTabWrap_():a.target==this.tabCatcherElement_&&goog.Timer.callOnce(this.focusElement_,0,this)};goog.ui.ModalPopup.prototype.getTabCatcherElement=function(){return this.tabCatcherElement_};goog.ui.ModalPopup.prototype.focusElement_=function(){try{goog.userAgent.IE&&this.getDomHelper().getDocument().body.focus(),this.getElement().focus()}catch(a){}};
goog.ui.ModalPopup.prototype.disposeInternal=function(){goog.dispose(this.popupShowTransition_);this.popupShowTransition_=null;goog.dispose(this.popupHideTransition_);this.popupHideTransition_=null;goog.dispose(this.bgShowTransition_);this.bgShowTransition_=null;goog.dispose(this.bgHideTransition_);this.bgHideTransition_=null;goog.ui.ModalPopup.superClass_.disposeInternal.call(this)};goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="";this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0;goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_};
goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"});
goog.html.TrustedResourceUrl.unwrap=function(a){if(a instanceof goog.html.TrustedResourceUrl&&a.constructor===goog.html.TrustedResourceUrl&&a.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return a.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_;goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+a+"'");return"type_error:TrustedResourceUrl"};goog.html.TrustedResourceUrl.fromConstant=function(a){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse_(goog.string.Const.unwrap(a))};
goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse_=function(a){var b=new goog.html.TrustedResourceUrl;b.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=a;return b};goog.html.legacyconversions={};goog.html.legacyconversions.ALLOW_LEGACY_CONVERSIONS=!0;goog.html.legacyconversions.safeHtmlFromString=function(a){goog.html.legacyconversions.throwIfConversionDisallowed_();return goog.html.legacyconversions.createSafeHtmlSecurityPrivateDoNotAccessOrElse_(a)};goog.html.legacyconversions.trustedResourceUrlFromString=function(a){goog.html.legacyconversions.throwIfConversionDisallowed_();return goog.html.legacyconversions.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse_(a)};
goog.html.legacyconversions.safeUrlFromString=function(a){goog.html.legacyconversions.throwIfConversionDisallowed_();return goog.html.legacyconversions.createSafeUrlSecurityPrivateDoNotAccessOrElse_(a)};goog.html.legacyconversions.reportCallback_=goog.nullFunction;goog.html.legacyconversions.setReportCallback=function(a){goog.html.legacyconversions.reportCallback_=a};
goog.html.legacyconversions.createSafeHtmlSecurityPrivateDoNotAccessOrElse_=function(a){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse_(a,null)};goog.html.legacyconversions.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse_=function(a){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse_(a)};goog.html.legacyconversions.createSafeUrlSecurityPrivateDoNotAccessOrElse_=function(a){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse_(a)};
goog.html.legacyconversions.throwIfConversionDisallowed_=function(){if(!goog.html.legacyconversions.ALLOW_LEGACY_CONVERSIONS)throw Error("Error: Legacy conversion from string to goog.html types is disabled");goog.html.legacyconversions.reportCallback_()};goog.ui.Dialog=function(a,b,c){goog.ui.ModalPopup.call(this,b,c);this.class_=a||"modal-dialog";this.buttons_=goog.ui.Dialog.ButtonSet.createOkCancel()};goog.inherits(goog.ui.Dialog,goog.ui.ModalPopup);goog.ui.Dialog.prototype.escapeToCancel_=!0;goog.ui.Dialog.prototype.hasTitleCloseButton_=!0;goog.ui.Dialog.prototype.modal_=!0;goog.ui.Dialog.prototype.draggable_=!0;goog.ui.Dialog.prototype.backgroundElementOpacity_=.5;goog.ui.Dialog.prototype.title_="";goog.ui.Dialog.prototype.content_=null;
goog.ui.Dialog.prototype.dragger_=null;goog.ui.Dialog.prototype.disposeOnHide_=!1;goog.ui.Dialog.prototype.titleEl_=null;goog.ui.Dialog.prototype.titleTextEl_=null;goog.ui.Dialog.prototype.titleTextId_=null;goog.ui.Dialog.prototype.titleCloseEl_=null;goog.ui.Dialog.prototype.contentEl_=null;goog.ui.Dialog.prototype.buttonEl_=null;goog.ui.Dialog.prototype.preferredAriaRole_=goog.a11y.aria.Role.DIALOG;goog.ui.Dialog.prototype.getCssClass=function(){return this.class_};
goog.ui.Dialog.prototype.setTitle=function(a){this.title_=a;this.titleTextEl_&&goog.dom.setTextContent(this.titleTextEl_,a)};goog.ui.Dialog.prototype.getTitle=function(){return this.title_};goog.ui.Dialog.prototype.setContent=function(a){this.setSafeHtmlContent(goog.html.legacyconversions.safeHtmlFromString(a))};goog.ui.Dialog.prototype.setSafeHtmlContent=function(a){this.content_=a;this.contentEl_&&goog.dom.safe.setInnerHtml(this.contentEl_,a)};
goog.ui.Dialog.prototype.getContent=function(){return null!=this.content_?goog.html.SafeHtml.unwrap(this.content_):""};goog.ui.Dialog.prototype.getSafeHtmlContent=function(){return this.content_};goog.ui.Dialog.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};goog.ui.Dialog.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Dialog.prototype.renderIfNoDom_=function(){this.getElement()||this.render()};
goog.ui.Dialog.prototype.getContentElement=function(){this.renderIfNoDom_();return this.contentEl_};goog.ui.Dialog.prototype.getTitleElement=function(){this.renderIfNoDom_();return this.titleEl_};goog.ui.Dialog.prototype.getTitleTextElement=function(){this.renderIfNoDom_();return this.titleTextEl_};goog.ui.Dialog.prototype.getTitleCloseElement=function(){this.renderIfNoDom_();return this.titleCloseEl_};goog.ui.Dialog.prototype.getButtonElement=function(){this.renderIfNoDom_();return this.buttonEl_};
goog.ui.Dialog.prototype.getDialogElement=function(){this.renderIfNoDom_();return this.getElement()};goog.ui.Dialog.prototype.getBackgroundElement=function(){this.renderIfNoDom_();return goog.ui.Dialog.superClass_.getBackgroundElement.call(this)};goog.ui.Dialog.prototype.getBackgroundElementOpacity=function(){return this.backgroundElementOpacity_};
goog.ui.Dialog.prototype.setBackgroundElementOpacity=function(a){this.backgroundElementOpacity_=a;this.getElement()&&(a=this.getBackgroundElement())&&goog.style.setOpacity(a,this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.setModal=function(a){a!=this.modal_&&this.setModalInternal_(a)};
goog.ui.Dialog.prototype.setModalInternal_=function(a){this.modal_=a;if(this.isInDocument()){var b=this.getDomHelper(),c=this.getBackgroundElement(),d=this.getBackgroundIframe();a?(d&&b.insertSiblingBefore(d,this.getElement()),b.insertSiblingBefore(c,this.getElement())):(b.removeNode(d),b.removeNode(c))}this.isVisible()&&this.setA11YDetectBackground(a)};goog.ui.Dialog.prototype.getModal=function(){return this.modal_};goog.ui.Dialog.prototype.getClass=function(){return this.getCssClass()};
goog.ui.Dialog.prototype.setDraggable=function(a){this.draggable_=a;this.setDraggingEnabled_(a&&this.isInDocument())};goog.ui.Dialog.prototype.createDragger=function(){return new goog.fx.Dragger(this.getElement(),this.titleEl_)};goog.ui.Dialog.prototype.getDraggable=function(){return this.draggable_};
goog.ui.Dialog.prototype.setDraggingEnabled_=function(a){var b=goog.string.trim(this.class_+"-title-draggable").split(" ");this.getElement()&&(a?goog.dom.classlist.addAll(goog.asserts.assert(this.titleEl_),b):goog.dom.classlist.removeAll(goog.asserts.assert(this.titleEl_),b));a&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classlist.addAll(goog.asserts.assert(this.titleEl_),b),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!a&&this.dragger_&&
(this.dragger_.dispose(),this.dragger_=null)};
goog.ui.Dialog.prototype.createDom=function(){goog.ui.Dialog.superClass_.createDom.call(this);var a=this.getElement();goog.asserts.assert(a,"getElement() returns null");var b=this.getDomHelper();this.titleEl_=b.createDom("div",this.class_+"-title",this.titleTextEl_=b.createDom("span",{className:this.class_+"-title-text",id:this.getId()},this.title_),this.titleCloseEl_=b.createDom("span",this.class_+"-title-close"));goog.dom.append(a,this.titleEl_,this.contentEl_=b.createDom("div",this.class_+"-content"),
this.buttonEl_=b.createDom("div",this.class_+"-buttons"));goog.a11y.aria.setRole(this.titleTextEl_,goog.a11y.aria.Role.HEADING);goog.a11y.aria.setRole(this.titleCloseEl_,goog.a11y.aria.Role.BUTTON);goog.dom.setFocusableTabIndex(this.titleCloseEl_,!0);goog.a11y.aria.setLabel(this.titleCloseEl_,goog.ui.Dialog.MSG_GOOG_UI_DIALOG_CLOSE_);this.titleTextId_=this.titleTextEl_.id;goog.a11y.aria.setRole(a,this.getPreferredAriaRole());goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextId_||
"");this.content_&&goog.dom.safe.setInnerHtml(this.contentEl_,this.content_);goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);this.buttons_&&this.buttons_.attachToElement(this.buttonEl_);goog.style.setElementShown(this.buttonEl_,!!this.buttons_);this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.decorateInternal=function(a){goog.ui.Dialog.superClass_.decorateInternal.call(this,a);a=this.getElement();goog.asserts.assert(a,"The DOM element for dialog cannot be null.");var b=this.class_+"-content";this.contentEl_=goog.dom.getElementsByTagNameAndClass(null,b,a)[0];this.contentEl_||(this.contentEl_=this.getDomHelper().createDom("div",b),this.content_&&goog.dom.safe.setInnerHtml(this.contentEl_,this.content_),a.appendChild(this.contentEl_));var b=this.class_+"-title",c=
this.class_+"-title-text",d=this.class_+"-title-close";(this.titleEl_=goog.dom.getElementsByTagNameAndClass(null,b,a)[0])?(this.titleTextEl_=goog.dom.getElementsByTagNameAndClass(null,c,this.titleEl_)[0],this.titleCloseEl_=goog.dom.getElementsByTagNameAndClass(null,d,this.titleEl_)[0]):(this.titleEl_=this.getDomHelper().createDom("div",b),a.insertBefore(this.titleEl_,this.contentEl_));this.titleTextEl_?(this.title_=goog.dom.getTextContent(this.titleTextEl_),this.titleTextEl_.id||(this.titleTextEl_.id=
this.getId())):(this.titleTextEl_=goog.dom.createDom("span",{className:c,id:this.getId()}),this.titleEl_.appendChild(this.titleTextEl_));this.titleTextId_=this.titleTextEl_.id;goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextId_||"");this.titleCloseEl_||(this.titleCloseEl_=this.getDomHelper().createDom("span",d),this.titleEl_.appendChild(this.titleCloseEl_));goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);b=this.class_+"-buttons";(this.buttonEl_=goog.dom.getElementsByTagNameAndClass(null,
b,a)[0])?(this.buttons_=new goog.ui.Dialog.ButtonSet(this.getDomHelper()),this.buttons_.decorate(this.buttonEl_)):(this.buttonEl_=this.getDomHelper().createDom("div",b),a.appendChild(this.buttonEl_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.setElementShown(this.buttonEl_,!!this.buttons_));this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.enterDocument=function(){goog.ui.Dialog.superClass_.enterDocument.call(this);this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,this.onKey_).listen(this.getElement(),goog.events.EventType.KEYPRESS,this.onKey_);this.getHandler().listen(this.buttonEl_,goog.events.EventType.CLICK,this.onButtonClick_);this.setDraggingEnabled_(this.draggable_);this.getHandler().listen(this.titleCloseEl_,goog.events.EventType.CLICK,this.onTitleCloseClick_);var a=this.getElement();
goog.asserts.assert(a,"The DOM element for dialog cannot be null");goog.a11y.aria.setRole(a,this.getPreferredAriaRole());""!==this.titleTextEl_.id&&goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextEl_.id);this.modal_||this.setModalInternal_(!1)};goog.ui.Dialog.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);this.setDraggingEnabled_(!1);goog.ui.Dialog.superClass_.exitDocument.call(this)};
goog.ui.Dialog.prototype.setVisible=function(a){a!=this.isVisible()&&(this.isInDocument()||this.render(),goog.ui.Dialog.superClass_.setVisible.call(this,a))};goog.ui.Dialog.prototype.onShow=function(){goog.ui.Dialog.superClass_.onShow.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_SHOW)};goog.ui.Dialog.prototype.onHide=function(){goog.ui.Dialog.superClass_.onHide.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_HIDE);this.disposeOnHide_&&this.dispose()};
goog.ui.Dialog.prototype.setDraggerLimits_=function(a){var b=this.getDomHelper().getDocument();a=goog.dom.getWindow(b)||window;a=goog.dom.getViewportSize(a);var c=Math.max(b.body.scrollWidth,a.width),b=Math.max(b.body.scrollHeight,a.height),d=goog.style.getSize(this.getElement());"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,a.width-d.width),Math.max(0,a.height-d.height))):this.dragger_.setLimits(new goog.math.Rect(0,0,c-d.width,
b-d.height))};goog.ui.Dialog.prototype.onTitleCloseClick_=function(a){this.handleTitleClose_()};goog.ui.Dialog.prototype.handleTitleClose_=function(){if(this.hasTitleCloseButton_){var a=this.getButtonSet(),b=a&&a.getCancel();b?(a=a.get(b),this.dispatchEvent(new goog.ui.Dialog.Event(b,a))&&this.setVisible(!1)):this.setVisible(!1)}};goog.ui.Dialog.prototype.getHasTitleCloseButton=function(){return this.hasTitleCloseButton_};
goog.ui.Dialog.prototype.setHasTitleCloseButton=function(a){this.hasTitleCloseButton_=a;this.titleCloseEl_&&goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_)};goog.ui.Dialog.prototype.isEscapeToCancel=function(){return this.escapeToCancel_};goog.ui.Dialog.prototype.setEscapeToCancel=function(a){this.escapeToCancel_=a};goog.ui.Dialog.prototype.setDisposeOnHide=function(a){this.disposeOnHide_=a};goog.ui.Dialog.prototype.getDisposeOnHide=function(){return this.disposeOnHide_};
goog.ui.Dialog.prototype.disposeInternal=function(){this.buttonEl_=this.titleCloseEl_=null;goog.ui.Dialog.superClass_.disposeInternal.call(this)};goog.ui.Dialog.prototype.setButtonSet=function(a){this.buttons_=a;this.buttonEl_&&(this.buttons_?this.buttons_.attachToElement(this.buttonEl_):goog.dom.safe.setInnerHtml(this.buttonEl_,goog.html.SafeHtml.EMPTY),goog.style.setElementShown(this.buttonEl_,!!this.buttons_))};goog.ui.Dialog.prototype.getButtonSet=function(){return this.buttons_};
goog.ui.Dialog.prototype.onButtonClick_=function(a){if((a=this.findParentButton_(a.target))&&!a.disabled){a=a.name;var b=this.getButtonSet().get(a);this.dispatchEvent(new goog.ui.Dialog.Event(a,b))&&this.setVisible(!1)}};goog.ui.Dialog.prototype.findParentButton_=function(a){for(;null!=a&&a!=this.buttonEl_;){if("BUTTON"==a.tagName)return a;a=a.parentNode}return null};
goog.ui.Dialog.prototype.onKey_=function(a){var b=!1,c=!1,d=this.getButtonSet(),e=a.target;if(a.type==goog.events.EventType.KEYDOWN)if(this.escapeToCancel_&&a.keyCode==goog.events.KeyCodes.ESC){var f=d&&d.getCancel(),e="SELECT"==e.tagName&&!e.disabled;f&&!e?(c=!0,b=d.get(f),b=this.dispatchEvent(new goog.ui.Dialog.Event(f,b))):e||(b=!0)}else a.keyCode==goog.events.KeyCodes.TAB&&a.shiftKey&&e==this.getElement()&&this.setupBackwardTabWrap();else if(a.keyCode==goog.events.KeyCodes.ENTER){if("BUTTON"==
e.tagName&&!e.disabled)f=e.name;else if(e==this.titleCloseEl_)this.handleTitleClose_();else if(d){var g=d.getDefault(),h=g&&d.getButton(g),e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!h||h.disabled||e||(f=g)}f&&d&&(c=!0,b=this.dispatchEvent(new goog.ui.Dialog.Event(f,String(d.get(f)))))}else e==this.titleCloseEl_&&a.keyCode==goog.events.KeyCodes.SPACE&&this.handleTitleClose_();if(b||c)a.stopPropagation(),a.preventDefault();b&&this.setVisible(!1)};
goog.ui.Dialog.Event=function(a,b){this.type=goog.ui.Dialog.EventType.SELECT;this.key=a;this.caption=b};goog.inherits(goog.ui.Dialog.Event,goog.events.Event);goog.ui.Dialog.SELECT_EVENT="dialogselect";goog.ui.Dialog.EventType={SELECT:"dialogselect",AFTER_HIDE:"afterhide",AFTER_SHOW:"aftershow"};goog.ui.Dialog.ButtonSet=function(a){this.dom_=a||goog.dom.getDomHelper();goog.structs.Map.call(this)};goog.inherits(goog.ui.Dialog.ButtonSet,goog.structs.Map);goog.ui.Dialog.ButtonSet.prototype.class_="goog-buttonset";
goog.ui.Dialog.ButtonSet.prototype.defaultButton_=null;goog.ui.Dialog.ButtonSet.prototype.element_=null;goog.ui.Dialog.ButtonSet.prototype.cancelButton_=null;goog.ui.Dialog.ButtonSet.prototype.set=function(a,b,c,d){goog.structs.Map.prototype.set.call(this,a,b);c&&(this.defaultButton_=a);d&&(this.cancelButton_=a);return this};goog.ui.Dialog.ButtonSet.prototype.addButton=function(a,b,c){return this.set(a.key,a.caption,b,c)};
goog.ui.Dialog.ButtonSet.prototype.attachToElement=function(a){this.element_=a;this.render()};goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){goog.dom.safe.setInnerHtml(this.element_,goog.html.SafeHtml.EMPTY);var a=goog.dom.getDomHelper(this.element_);this.forEach(function(b,c){var d=a.createDom("button",{name:c},b);c==this.defaultButton_&&(d.className=this.class_+"-default");this.element_.appendChild(d)},this)}};
goog.ui.Dialog.ButtonSet.prototype.decorate=function(a){if(a&&a.nodeType==goog.dom.NodeType.ELEMENT){this.element_=a;a=this.element_.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=goog.dom.getTextContent(c)||c.value,d){var f=0==b;this.set(d,e,f,c.name==goog.ui.Dialog.DefaultButtonKeys.CANCEL);f&&goog.dom.classlist.add(c,this.class_+"-default")}}};goog.ui.Dialog.ButtonSet.prototype.getElement=function(){return this.element_};
goog.ui.Dialog.ButtonSet.prototype.getDomHelper=function(){return this.dom_};goog.ui.Dialog.ButtonSet.prototype.setDefault=function(a){this.defaultButton_=a};goog.ui.Dialog.ButtonSet.prototype.getDefault=function(){return this.defaultButton_};goog.ui.Dialog.ButtonSet.prototype.setCancel=function(a){this.cancelButton_=a};goog.ui.Dialog.ButtonSet.prototype.getCancel=function(){return this.cancelButton_};
goog.ui.Dialog.ButtonSet.prototype.getButton=function(a){for(var b=this.getAllButtons(),c=0,d;d=b[c];c++)if(d.name==a||d.id==a)return d;return null};goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return this.element_.getElementsByTagName(goog.dom.TagName.BUTTON)};goog.ui.Dialog.ButtonSet.prototype.setButtonEnabled=function(a,b){var c=this.getButton(a);c&&(c.disabled=!b)};
goog.ui.Dialog.ButtonSet.prototype.setAllButtonsEnabled=function(a){for(var b=this.getAllButtons(),c=0,d;d=b[c];c++)d.disabled=!a};goog.ui.Dialog.DefaultButtonKeys={OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",SAVE:"save",CONTINUE:"continue"};goog.ui.Dialog.MSG_DIALOG_OK_=goog.getMsg("OK");goog.ui.Dialog.MSG_DIALOG_CANCEL_=goog.getMsg("Cancel");goog.ui.Dialog.MSG_DIALOG_YES_=goog.getMsg("Yes");goog.ui.Dialog.MSG_DIALOG_NO_=goog.getMsg("No");goog.ui.Dialog.MSG_DIALOG_SAVE_=goog.getMsg("Save");
goog.ui.Dialog.MSG_DIALOG_CONTINUE_=goog.getMsg("Continue");goog.ui.Dialog.MSG_GOOG_UI_DIALOG_CLOSE_=goog.getMsg("Close");goog.ui.Dialog.DefaultButtonCaptions={OK:goog.ui.Dialog.MSG_DIALOG_OK_,CANCEL:goog.ui.Dialog.MSG_DIALOG_CANCEL_,YES:goog.ui.Dialog.MSG_DIALOG_YES_,NO:goog.ui.Dialog.MSG_DIALOG_NO_,SAVE:goog.ui.Dialog.MSG_DIALOG_SAVE_,CONTINUE:goog.ui.Dialog.MSG_DIALOG_CONTINUE_};
goog.ui.Dialog.ButtonSet.DefaultButtons={OK:{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:goog.ui.Dialog.DefaultButtonCaptions.OK},CANCEL:{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:goog.ui.Dialog.DefaultButtonCaptions.CANCEL},YES:{key:goog.ui.Dialog.DefaultButtonKeys.YES,caption:goog.ui.Dialog.DefaultButtonCaptions.YES},NO:{key:goog.ui.Dialog.DefaultButtonKeys.NO,caption:goog.ui.Dialog.DefaultButtonCaptions.NO},SAVE:{key:goog.ui.Dialog.DefaultButtonKeys.SAVE,caption:goog.ui.Dialog.DefaultButtonCaptions.SAVE},
CONTINUE:{key:goog.ui.Dialog.DefaultButtonKeys.CONTINUE,caption:goog.ui.Dialog.DefaultButtonCaptions.CONTINUE}};goog.ui.Dialog.ButtonSet.createOk=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0,!0)};goog.ui.Dialog.ButtonSet.createOkCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createYesNo=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!1,!0)};goog.ui.Dialog.ButtonSet.createYesNoCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createContinueSaveCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)};
(function(){"undefined"!=typeof document&&(goog.ui.Dialog.ButtonSet.OK=goog.ui.Dialog.ButtonSet.createOk(),goog.ui.Dialog.ButtonSet.OK_CANCEL=goog.ui.Dialog.ButtonSet.createOkCancel(),goog.ui.Dialog.ButtonSet.YES_NO=goog.ui.Dialog.ButtonSet.createYesNo(),goog.ui.Dialog.ButtonSet.YES_NO_CANCEL=goog.ui.Dialog.ButtonSet.createYesNoCancel(),goog.ui.Dialog.ButtonSet.CONTINUE_SAVE_CANCEL=goog.ui.Dialog.ButtonSet.createContinueSaveCancel())})();var nrg={string:function(){}};goog.exportSymbol("nrg.string",nrg.string);nrg.string.basename=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")};nrg.string.dirname=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")};nrg.string.getFileExtension=function(a){if(goog.isDefAndNotNull(a))return a="array"==goog.typeOf(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()};
nrg.string.fileNameMatch=function(a,b){return nrg.string.basename(a)===nrg.string.basename(b)};nrg.string.stripNonAlphanumeric=function(a){return a.replace(/\W/g,"")};nrg.string.stripIllegal=function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")};nrg.string.getLettersOnly=function(a){return nrg.string.stripNonAlphanumeric(a).replace(/[0-9]/g,"")};
nrg.string.replaceIllegal=function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)};nrg.string.truncateString=function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a};nrg.string.makeCssName=function(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");goog.isDefAndNotNull(b)&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c};
nrg.string.mrmlColorToRgb=function(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"};goog.exportSymbol("nrg.string.basename",nrg.string.basename);goog.exportSymbol("nrg.string.dirname",nrg.string.dirname);goog.exportSymbol("nrg.string.getFileExtension",nrg.string.getFileExtension);goog.exportSymbol("nrg.string.fileNameMatch",nrg.string.fileNameMatch);goog.exportSymbol("nrg.string.stripNonAlphanumeric",nrg.string.stripNonAlphanumeric);
goog.exportSymbol("nrg.string.stripIllegal",nrg.string.stripIllegal);goog.exportSymbol("nrg.string.getLettersOnly",nrg.string.getLettersOnly);goog.exportSymbol("nrg.string.replaceIllegal",nrg.string.replaceIllegal);goog.exportSymbol("nrg.string.truncateString",nrg.string.truncateString);goog.exportSymbol("nrg.string.makeCssName",nrg.string.makeCssName);goog.exportSymbol("nrg.string.mrmlColorToRgb",nrg.string.mrmlColorToRgb);goog.async={};goog.async.Delay=function(a,b,c){goog.Disposable.call(this);this.listener_=a;this.interval_=b||0;this.handler_=c;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.Delay,goog.Disposable);goog.Delay=goog.async.Delay;goog.async.Delay.prototype.id_=0;goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this);this.stop();delete this.listener_;delete this.handler_};
goog.async.Delay.prototype.start=function(a){this.stop();this.id_=goog.Timer.callOnce(this.callback_,goog.isDef(a)?a:this.interval_)};goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_);this.id_=0};goog.async.Delay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.Delay.prototype.isActive=function(){return 0!=this.id_};
goog.async.Delay.prototype.doAction_=function(){this.id_=0;this.listener_&&this.listener_.call(this.handler_)};goog.async.AnimationDelay=function(a,b,c){goog.Disposable.call(this);this.listener_=a;this.handler_=c;this.win_=b||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.prototype.id_=null;goog.async.AnimationDelay.prototype.usingListeners_=!1;goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";
goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=!1;var a=this.getRaf_(),b=this.getCancelRaf_();a&&!b&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=a&&b?a.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)};
goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var a=this.getRaf_(),b=this.getCancelRaf_();a&&!b&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):a&&b?b.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};
goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_};goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_);this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.superClass_.disposeInternal.call(this)};
goog.async.AnimationDelay.prototype.getRaf_=function(){var a=this.win_;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var a=this.win_;return a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null};goog.fx.anim={};goog.fx.anim.Animated=function(){};goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT;goog.fx.anim.activeAnimations_={};goog.fx.anim.animationWindow_=null;goog.fx.anim.animationDelay_=null;goog.fx.anim.registerAnimation=function(a){var b=goog.getUid(a);b in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[b]=a);goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.unregisterAnimation=function(a){a=goog.getUid(a);delete goog.fx.anim.activeAnimations_[a];goog.object.isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()};goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null;goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.activeAnimations_={}};
goog.fx.anim.setAnimationWindow=function(a){var b=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();goog.dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.animationWindow_=a;b&&goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay(function(a){goog.fx.anim.cycleAnimations_(a)},goog.fx.anim.animationWindow_):new goog.async.Delay(function(){goog.fx.anim.cycleAnimations_(goog.now())},goog.fx.anim.TIMEOUT));var a=goog.fx.anim.animationDelay_;a.isActive()||a.start()};goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()};
goog.fx.anim.cycleAnimations_=function(a){goog.object.forEach(goog.fx.anim.activeAnimations_,function(b){b.onAnimationFrame(a)});goog.object.isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()};goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this);this.state_=goog.fx.TransitionBase.State.STOPPED;this.endTime=this.startTime=null};goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget);goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1};goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_};goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING};
goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED};goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING};goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED};
goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)};goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)};goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)};
goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)};goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)};goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)};goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)};
goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(a)};goog.fx.Animation=function(a,b,c,d){goog.fx.TransitionBase.call(this);if(!goog.isArray(a)||!goog.isArray(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.startPoint=a;this.endPoint=b;this.duration=c;this.accel_=d;this.coords=[];this.useRightPositioningForRtl_=!1};goog.inherits(goog.fx.Animation,goog.fx.TransitionBase);
goog.fx.Animation.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_};
goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"};goog.fx.Animation.TIMEOUT=goog.fx.anim.TIMEOUT;goog.fx.Animation.State=goog.fx.TransitionBase.State;goog.fx.Animation.setAnimationWindow=function(a){goog.fx.anim.setAnimationWindow(a)};
goog.fx.Animation.prototype.fps_=0;goog.fx.Animation.prototype.progress=0;goog.fx.Animation.prototype.lastFrame=null;
goog.fx.Animation.prototype.play=function(a){if(a||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;goog.fx.anim.unregisterAnimation(this);this.startTime=a=goog.now();this.isPaused()&&(this.startTime-=this.duration*this.progress);this.endTime=this.startTime+this.duration;this.lastFrame=this.startTime;if(!this.progress)this.onBegin();this.onPlay();if(this.isPaused())this.onResume();this.setStatePlaying();goog.fx.anim.registerAnimation(this);this.cycle(a);
return!0};goog.fx.Animation.prototype.stop=function(a){goog.fx.anim.unregisterAnimation(this);this.setStateStopped();a&&(this.progress=1);this.updateCoords_(this.progress);this.onStop();this.onEnd()};goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())};goog.fx.Animation.prototype.getProgress=function(){return this.progress};
goog.fx.Animation.prototype.setProgress=function(a){this.progress=a;this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)};goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1);this.onDestroy();goog.fx.Animation.superClass_.disposeInternal.call(this)};goog.fx.Animation.prototype.destroy=function(){this.dispose()};goog.fx.Animation.prototype.onAnimationFrame=function(a){this.cycle(a)};
goog.fx.Animation.prototype.cycle=function(a){this.progress=(a-this.startTime)/(this.endTime-this.startTime);1<=this.progress&&(this.progress=1);this.fps_=1E3/(a-this.lastFrame);this.lastFrame=a;this.updateCoords_(this.progress);if(1==this.progress)this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),this.onFinish(),this.onEnd();else if(this.isPlaying())this.onAnimate()};
goog.fx.Animation.prototype.updateCoords_=function(a){goog.isFunction(this.accel_)&&(a=this.accel_(a));this.coords=Array(this.startPoint.length);for(var b=0;b<this.startPoint.length;b++)this.coords[b]=(this.endPoint[b]-this.startPoint[b])*a+this.startPoint[b]};goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)};goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)};
goog.fx.Animation.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(new goog.fx.AnimationEvent(a,this))};goog.fx.AnimationEvent=function(a,b){goog.events.Event.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.progress=b.getProgress();this.fps=b.fps_;this.state=b.getStateInternal();this.anim=b};goog.inherits(goog.fx.AnimationEvent,goog.events.Event);
goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return goog.array.map(this.coords,Math.round)};goog.color={};
goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.color.parse=function(a){var b={};a=String(a);var c=goog.color.prependHashIfNecessaryHelper(a);if(goog.color.isValidHexColor_(c))return b.hex=goog.color.normalizeHex(c),b.type="hex",b;c=goog.color.isValidRgbColor_(a);if(c.length)return b.hex=goog.color.rgbArrayToHex(c),b.type="rgb",b;if(goog.color.names&&(c=goog.color.names[a.toLowerCase()]))return b.hex=c,b.type="named",b;throw Error(a+" is not a valid color string");};
goog.color.isValidColor=function(a){var b=goog.color.prependHashIfNecessaryHelper(a);return!!(goog.color.isValidHexColor_(b)||goog.color.isValidRgbColor_(a).length||goog.color.names&&goog.color.names[a.toLowerCase()])};goog.color.parseRgb=function(a){var b=goog.color.isValidRgbColor_(a);if(!b.length)throw Error(a+" is not a valid RGB color");return b};goog.color.hexToRgbStyle=function(a){return goog.color.rgbStyle_(goog.color.hexToRgb(a))};goog.color.hexTripletRe_=/#(.)(.)(.)/;
goog.color.normalizeHex=function(a){if(!goog.color.isValidHexColor_(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return a.toLowerCase()};goog.color.hexToRgb=function(a){a=goog.color.normalizeHex(a);var b=parseInt(a.substr(1,2),16),c=parseInt(a.substr(3,2),16);a=parseInt(a.substr(5,2),16);return[b,c,a]};
goog.color.rgbToHex=function(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(isNaN(a)||0>a||255<a||isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c)throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');a=goog.color.prependZeroIfNecessaryHelper(a.toString(16));b=goog.color.prependZeroIfNecessaryHelper(b.toString(16));c=goog.color.prependZeroIfNecessaryHelper(c.toString(16));return"#"+a+b+c};goog.color.rgbArrayToHex=function(a){return goog.color.rgbToHex(a[0],a[1],a[2])};
goog.color.rgbToHsl=function(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),f=0,g=0,h=.5*(d+e);d!=e&&(d==a?f=60*(b-c)/(d-e):d==b?f=60*(c-a)/(d-e)+120:d==c&&(f=60*(a-b)/(d-e)+240),g=0<h&&.5>=h?(d-e)/(2*h):(d-e)/(2-2*h));return[Math.round(f+360)%360,g,h]};goog.color.rgbArrayToHsl=function(a){return goog.color.rgbToHsl(a[0],a[1],a[2])};goog.color.hueToRgb_=function(a,b,c){0>c?c+=1:1<c&&(c-=1);return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};
goog.color.hslToRgb=function(a,b,c){var d=0,e=0,f=0;a/=360;if(0==b)d=e=f=255*c;else var g=f=0,g=.5>c?c*(1+b):c+b-b*c,f=2*c-g,d=255*goog.color.hueToRgb_(f,g,a+1/3),e=255*goog.color.hueToRgb_(f,g,a),f=255*goog.color.hueToRgb_(f,g,a-1/3);return[Math.round(d),Math.round(e),Math.round(f)]};goog.color.hslArrayToRgb=function(a){return goog.color.hslToRgb(a[0],a[1],a[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(a){return goog.color.validHexColorRe_.test(a)};
goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(a){return goog.color.normalizedHexColorRe_.test(a)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(a){var b=a.match(goog.color.rgbColorRe_);if(b){a=Number(b[1]);var c=Number(b[2]),b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]};
goog.color.prependZeroIfNecessaryHelper=function(a){return 1==a.length?"0"+a:a};goog.color.prependHashIfNecessaryHelper=function(a){return"#"==a.charAt(0)?a:"#"+a};goog.color.rgbStyle_=function(a){return"rgb("+a.join(",")+")"};
goog.color.hsvToRgb=function(a,b,c){var d=0,e=0,f=0;if(0==b)f=e=d=c;else{var g=Math.floor(a/60),h=a/60-g;a=c*(1-b);var k=c*(1-b*h);b=c*(1-b*(1-h));switch(g){case 1:d=k;e=c;f=a;break;case 2:d=a;e=c;f=b;break;case 3:d=a;e=k;f=c;break;case 4:d=b;e=a;f=c;break;case 5:d=c;e=a;f=k;break;case 6:case 0:d=c,e=b,f=a}}return[Math.floor(d),Math.floor(e),Math.floor(f)]};
goog.color.rgbToHsv=function(a,b,c){var d=Math.max(Math.max(a,b),c),e=Math.min(Math.min(a,b),c);if(e==d)e=a=0;else{var f=d-e,e=f/d;a=60*(a==d?(b-c)/f:b==d?2+(c-a)/f:4+(a-b)/f);0>a&&(a+=360);360<a&&(a-=360)}return[a,e,d]};goog.color.rgbArrayToHsv=function(a){return goog.color.rgbToHsv(a[0],a[1],a[2])};goog.color.hsvArrayToRgb=function(a){return goog.color.hsvToRgb(a[0],a[1],a[2])};goog.color.hexToHsl=function(a){a=goog.color.hexToRgb(a);return goog.color.rgbToHsl(a[0],a[1],a[2])};
goog.color.hslToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a,b,c))};goog.color.hslArrayToHex=function(a){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a[0],a[1],a[2]))};goog.color.hexToHsv=function(a){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(a))};goog.color.hsvToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(a,b,c))};goog.color.hsvArrayToHex=function(a){return goog.color.hsvToHex(a[0],a[1],a[2])};
goog.color.hslDistance=function(a,b){var c,d;c=.5>=a[2]?a[1]*a[2]:a[1]*(1-a[2]);d=.5>=b[2]?b[1]*b[2]:b[1]*(1-b[2]);return(a[2]-b[2])*(a[2]-b[2])+c*c+d*d-2*c*d*Math.cos(2*(a[0]/360-b[0]/360)*Math.PI)};goog.color.blend=function(a,b,c){c=goog.math.clamp(c,0,1);return[Math.round(c*a[0]+(1-c)*b[0]),Math.round(c*a[1]+(1-c)*b[1]),Math.round(c*a[2]+(1-c)*b[2])]};goog.color.darken=function(a,b){return goog.color.blend([0,0,0],a,b)};goog.color.lighten=function(a,b){return goog.color.blend([255,255,255],a,b)};
goog.color.highContrast=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push({color:b[d],diff:goog.color.yiqBrightnessDiff_(b[d],a)+goog.color.colorDiff_(b[d],a)});c.sort(function(a,b){return b.diff-a.diff});return c[0].color};goog.color.yiqBrightness_=function(a){return Math.round((299*a[0]+587*a[1]+114*a[2])/1E3)};goog.color.yiqBrightnessDiff_=function(a,b){return Math.abs(goog.color.yiqBrightness_(a)-goog.color.yiqBrightness_(b))};
goog.color.colorDiff_=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};goog.fx.dom={};goog.fx.dom.PredefinedEffect=function(a,b,c,d,e){goog.fx.Animation.call(this,b,c,d,e);this.element=a};goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation);goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction;goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.element));return this.rightToLeft_};
goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)};goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)};goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)};
goog.fx.dom.Slide=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect);goog.fx.dom.Slide.prototype.updateStyle=function(){var a=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};
goog.fx.dom.SlideFrom=function(a,b,c,d){var e=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(a):a.offsetLeft,a.offsetTop];goog.fx.dom.Slide.call(this,a,e,b,c,d)};goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide);goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop];goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)};
goog.fx.dom.Swipe=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments);this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]);this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])};goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Swipe.prototype.updateStyle=function(){var a=this.coords[0],b=this.coords[1];this.clip_(Math.round(a),Math.round(b),this.maxWidth_,this.maxHeight_);this.element.style.width=Math.round(a)+"px";var c=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft";this.element.style[c]=Math.round(a)-this.maxWidth_+"px";this.element.style.marginTop=Math.round(b)-this.maxHeight_+"px"};
goog.fx.dom.Swipe.prototype.clip_=function(a,b,c,d){this.element.style.clip="rect("+(d-b)+"px "+c+"px "+d+"px "+(c-a)+"px)"};goog.fx.dom.Scroll=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};goog.fx.dom.Resize=function(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};goog.fx.dom.ResizeWidth=function(a,b,c,d,e){goog.fx.dom.PredefinedEffect.call(this,a,[b],[c],d,e)};goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
goog.fx.dom.ResizeHeight=function(a,b,c,d,e){goog.fx.dom.PredefinedEffect.call(this,a,[b],[c],d,e)};goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"};goog.fx.dom.Fade=function(a,b,c,d,e){goog.isNumber(b)&&(b=[b]);goog.isNumber(c)&&(c=[c]);goog.fx.dom.PredefinedEffect.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");};
goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect);goog.fx.dom.Fade.prototype.updateStyle=function(){goog.style.setOpacity(this.element,this.coords[0])};goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""};goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"};goog.fx.dom.FadeOut=function(a,b,c){goog.fx.dom.Fade.call(this,a,1,0,b,c)};goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade);
goog.fx.dom.FadeIn=function(a,b,c){goog.fx.dom.Fade.call(this,a,0,1,b,c)};goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide=function(a,b,c){goog.fx.dom.Fade.call(this,a,1,0,b,c)};goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show();goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)};goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide();goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)};
goog.fx.dom.FadeInAndShow=function(a,b,c){goog.fx.dom.Fade.call(this,a,0,1,b,c)};goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade);goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show();goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)};goog.fx.dom.BgColorTransform=function(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect);
goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);a="rgb("+a.join(",")+")";this.element.style.backgroundColor=a};goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()};
goog.fx.dom.bgColorFadeIn=function(a,b,c,d){function e(){a.style.backgroundColor=f}var f=a.style.backgroundColor||"",g=goog.style.getBackgroundColor(a),g=g&&"transparent"!=g&&"rgba(0, 0, 0, 0)"!=g?goog.color.hexToRgb(goog.color.parse(g).hex):[255,255,255];b=new goog.fx.dom.BgColorTransform(a,b,g,c);d?d.listen(b,goog.fx.Transition.EventType.END,e):goog.events.listen(b,goog.fx.Transition.EventType.END,e);b.play()};
goog.fx.dom.ColorTransform=function(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)};goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect);goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);a="rgb("+a.join(",")+")";this.element.style.color=a};goog.fx.AnimationQueue=function(){goog.fx.TransitionBase.call(this);this.queue=[]};goog.inherits(goog.fx.AnimationQueue,goog.fx.TransitionBase);goog.fx.AnimationQueue.prototype.add=function(a){goog.asserts.assert(this.isStopped(),"Not allowed to add animations to a running animation queue.");goog.array.contains(this.queue,a)||(this.queue.push(a),goog.events.listen(a,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this))};
goog.fx.AnimationQueue.prototype.remove=function(a){goog.asserts.assert(this.isStopped(),"Not allowed to remove animations from a running animation queue.");goog.array.remove(this.queue,a)&&goog.events.unlisten(a,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this)};goog.fx.AnimationQueue.prototype.disposeInternal=function(){goog.array.forEach(this.queue,function(a){a.dispose()});this.queue.length=0;goog.fx.AnimationQueue.superClass_.disposeInternal.call(this)};
goog.fx.AnimationParallelQueue=function(){goog.fx.AnimationQueue.call(this);this.finishedCounter_=0};goog.inherits(goog.fx.AnimationParallelQueue,goog.fx.AnimationQueue);
goog.fx.AnimationParallelQueue.prototype.play=function(a){if(0==this.queue.length)return!1;if(a||this.isStopped())this.finishedCounter_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay();if(this.isPaused())this.onResume();var b=this.isPaused()&&!a;this.startTime=goog.now();this.endTime=null;this.setStatePlaying();goog.array.forEach(this.queue,function(c){b&&!c.isPaused()||c.play(a)});return!0};
goog.fx.AnimationParallelQueue.prototype.pause=function(){this.isPlaying()&&(goog.array.forEach(this.queue,function(a){a.isPlaying()&&a.pause()}),this.setStatePaused(),this.onPause())};goog.fx.AnimationParallelQueue.prototype.stop=function(a){goog.array.forEach(this.queue,function(b){b.isStopped()||b.stop(a)});this.setStateStopped();this.endTime=goog.now();this.onStop();this.onEnd()};
goog.fx.AnimationParallelQueue.prototype.onAnimationFinish=function(a){this.finishedCounter_++;this.finishedCounter_==this.queue.length&&(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd())};goog.fx.AnimationSerialQueue=function(){goog.fx.AnimationQueue.call(this);this.current_=0};goog.inherits(goog.fx.AnimationSerialQueue,goog.fx.AnimationQueue);
goog.fx.AnimationSerialQueue.prototype.play=function(a){if(0==this.queue.length)return!1;if(a||this.isStopped())this.current_<this.queue.length&&!this.queue[this.current_].isStopped()&&this.queue[this.current_].stop(!1),this.current_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay();if(this.isPaused())this.onResume();this.startTime=goog.now();this.endTime=null;this.setStatePlaying();this.queue[this.current_].play(a);return!0};
goog.fx.AnimationSerialQueue.prototype.pause=function(){this.isPlaying()&&(this.queue[this.current_].pause(),this.setStatePaused(),this.onPause())};goog.fx.AnimationSerialQueue.prototype.stop=function(a){this.setStateStopped();this.endTime=goog.now();if(a)for(a=this.current_;a<this.queue.length;++a){var b=this.queue[a];b.isStopped()&&b.play();b.isStopped()||b.stop(!0)}else this.current_<this.queue.length&&this.queue[this.current_].stop(!1);this.onStop();this.onEnd()};
goog.fx.AnimationSerialQueue.prototype.onAnimationFinish=function(a){this.isPlaying()&&(this.current_++,this.current_<this.queue.length?this.queue[this.current_].play():(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd()))};nrg.convert=function(){};goog.exportSymbol("nrg.convert",nrg.convert);nrg.convert.pct=function(a){if(!goog.isNumber(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"};nrg.convert.px=function(a){if(!goog.isArray(a)&&!goog.isNumber(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}};
nrg.convert.remap1D=function(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}};nrg.convert.toInt=function(a){if(!goog.isString(a)&&!goog.isNumber(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)};
nrg.convert.toFloatArray=function(a){if(!goog.isString(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");goog.array.forEach(a,function(a,d){b[d]=parseFloat(a,10)});return b};nrg.convert.objectToArray=function(a){if(!goog.isObject(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b};
nrg.convert.rgbToArray=function(a){if(!goog.isString(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a};nrg.convert.arrayToRgb=function(a,b){if(!goog.isArray(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;goog.array.forEach(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"};
nrg.convert.filterNaN=function(a){var b={};goog.object.forEach(a,function(a,d){isNaN(a)?goog.isString(a)&&(b[d]=a):b[d]=a});return b};nrg.convert.filterZeroLengthStrings=function(a){var b={};goog.object.forEach(a,function(a,d){goog.isString(a)?0<a.length&&(b[d]=a):b[d]=a});return b};goog.exportSymbol("nrg.convert.pct",nrg.convert.pct);goog.exportSymbol("nrg.convert.px",nrg.convert.px);goog.exportSymbol("nrg.convert.remap1D",nrg.convert.remap1D);goog.exportSymbol("nrg.convert.toInt",nrg.convert.toInt);
goog.exportSymbol("nrg.convert.toFloatArray",nrg.convert.toFloatArray);goog.exportSymbol("nrg.convert.objectToArray",nrg.convert.objectToArray);goog.exportSymbol("nrg.convert.rgbToArray",nrg.convert.rgbToArray);goog.exportSymbol("nrg.convert.arrayToRgb",nrg.convert.arrayToRgb);goog.exportSymbol("nrg.convert.filterNaN",nrg.convert.filterNaN);goog.exportSymbol("nrg.convert.filterZeroLengthStrings",nrg.convert.filterZeroLengthStrings);nrg.style=function(){};goog.exportSymbol("nrg.style",nrg.style);nrg.style.cssProperties="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
nrg.style.removeClassesThatContain=function(a,b){var c=goog.dom.classes.get(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)goog.dom.classes.remove(a,d[e])};nrg.style.absolutePosition=function(a){return a.getBoundingClientRect()};
nrg.style.dims=function(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return nrg.convert.toInt(a.style[b]);var d=goog.style.getRelativePosition(a,a.parentNode),d={left:nrg.convert.toInt(a.style.left)||d.x,top:nrg.convert.toInt(a.style.top)||
d.y};return d[b]}}else return c={},d=a.parentNode?goog.style.getRelativePosition(a,a.parentNode):goog.style.getRelativePosition(a,document.body),d={left:nrg.convert.toInt(a.style.left)||d.x,top:nrg.convert.toInt(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c};
nrg.style.getStyleSheet=function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}};nrg.style.getComputedStyle=function(a,b){if(b&&goog.isString(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=nrg.style.cssProperties);for(var c={},d=window.getComputedStyle(a,null),e=0,f=b.length,e=0;e<f;e++)c[b[e]]=d.getPropertyValue(b[e]);return nrg.style.parseIntNumericalProperties(c)};
nrg.style.parseIntNumericalProperties=function(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a};
nrg.style.setStyle=function(a,b){a&&b&&(a.style||(a.style={}),goog.style.setStyle(a,b),goog.array.forEach("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!goog.string.endsWith(b[c],"%")&&(a.style[c]=nrg.convert.px(b[c]))}))};nrg.style.IS_HOVERED="is_hovered_"+goog.string.createUniqueString();
nrg.style.setHoverClass=function(a,b,c,d,e,f){var g=function(){a[nrg.style.IS_HOVERED]=!0;goog.dom.classes.add(a,b);goog.isDefAndNotNull(e)&&e()},h=function(){a[nrg.style.IS_HOVERED]=!1;goog.dom.classes.remove(a,b);goog.isDefAndNotNull(f)&&f()};goog.events.listen(a,goog.events.EventType.MOUSEOVER,g);goog.events.listen(a,goog.events.EventType.MOUSEOUT,h);c&&(c=void 0!==d?c.bind(d):c,c(g,h))};
nrg.style.determineStartEndDimsCSS=function(a,b,c,d){var e=goog.dom.createDom("div",{id:"tempEndStateElt"+goog.string.getUniqueString()});a.parentNode.appendChild(e);goog.dom.classes.set(e,b);c&&c(a,e);b=nrg.style.getComputedStyle(a,d);d=nrg.style.getComputedStyle(e,d);a.parentNode.removeChild(e);delete e;return{start:b,end:d}};nrg.style.getPositionRelativeToAncestor=function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}};
goog.exportSymbol("nrg.style.cssProperties",nrg.style.cssProperties);goog.exportSymbol("nrg.style.removeClassesThatContain",nrg.style.removeClassesThatContain);goog.exportSymbol("nrg.style.absolutePosition",nrg.style.absolutePosition);goog.exportSymbol("nrg.style.dims",nrg.style.dims);goog.exportSymbol("nrg.style.getStyleSheet",nrg.style.getStyleSheet);goog.exportSymbol("nrg.style.getComputedStyle",nrg.style.getComputedStyle);goog.exportSymbol("nrg.style.parseIntNumericalProperties",nrg.style.parseIntNumericalProperties);
goog.exportSymbol("nrg.style.setStyle",nrg.style.setStyle);goog.exportSymbol("nrg.style.IS_HOVERED",nrg.style.IS_HOVERED);goog.exportSymbol("nrg.style.setHoverClass",nrg.style.setHoverClass);goog.exportSymbol("nrg.style.getPositionRelativeToAncestor",nrg.style.getPositionRelativeToAncestor);goog.fx.easing={};goog.fx.easing.easeIn=function(a){return goog.fx.easing.easeInInternal_(a,3)};goog.fx.easing.easeInInternal_=function(a,b){return Math.pow(a,b)};goog.fx.easing.easeOut=function(a){return goog.fx.easing.easeOutInternal_(a,3)};goog.fx.easing.easeOutInternal_=function(a,b){return 1-goog.fx.easing.easeInInternal_(1-a,b)};goog.fx.easing.easeOutLong=function(a){return goog.fx.easing.easeOutInternal_(a,4)};goog.fx.easing.inAndOut=function(a){return 3*a*a-2*a*a*a};nrg.fx=function(){};goog.exportSymbol("nrg.fx",nrg.fx);nrg.fx.fadeIn=function(a,b,c){void 0===b&&(b=500);nrg.fx.fadeTo(a,b,1,c)};nrg.fx.fadeInFromZero=function(a,b,c){void 0===b&&(b=500);nrg.fx.fadeTo(a,0,0,function(){nrg.fx.fadeTo(a,b,1,c)})};nrg.fx.fadeOut=function(a,b,c){void 0===b&&(b=500);nrg.fx.fadeTo(a,b,0,c)};nrg.fx.fadeOutAndRemove=function(a,b,c){void 0===b&&(b=500);nrg.fx.fadeTo(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})};
nrg.fx.fadeTo=function(a,b,c,d,e){e||(goog.isDefAndNotNull(a.style)?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var f=new goog.fx.dom.Fade(a,e,c,b);d&&f.addEventListener(goog.fx.Transition.EventType.END,function(a){d(a);goog.events.removeAll(f);delete f});f.play()};nrg.fx.animGenStyles="left top width height opacity background-color color z-index".split(" ");
nrg.fx.generateAnim_Slide=function(a,b,c,d){if((goog.object.containsKey(b,"left")||goog.object.containsKey(c,"left")||goog.object.containsKey(b,"top")||goog.object.containsKey(c,"top"))&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new goog.fx.dom.Slide(a,[b.left,b.top],[c.left,c.top],d,goog.fx.easing.easeOut)};
nrg.fx.generateAnim_Resize=function(a,b,c,d){if((goog.object.containsKey(b,"height")||goog.object.containsKey(c,"height")||goog.object.containsKey(b,"width")||goog.object.containsKey(c,"width"))&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new goog.fx.dom.Resize(a,[b.width,b.height],[c.width,c.height],d,goog.fx.easing.easeOut)};
nrg.fx.generateAnim_Fade=function(a,b,c,d){if(goog.object.containsKey(b,"opacity")||goog.object.containsKey(c,"opacity"))if(goog.array.forEach([b,c],function(a){goog.object.containsKey(a,"opacity")||(a.opacity=1);goog.isNumber(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new goog.fx.dom.Fade(a,b.opacity,c.opacity,d)};
nrg.fx.generateAnim_RemoveAddFade=function(a,b,c,d){if(goog.object.containsKey(b,"visibility")||goog.object.containsKey(c,"visibility"))if(goog.array.forEach([b,c],function(a){goog.object.containsKey(a,"visibility")||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new goog.fx.dom.FadeInAndShow(a,d):new goog.fx.dom.FadeOutAndHide(a,d)};
nrg.fx.generateAnim_BgColorTrans=function(a,b,c,d){if(goog.object.containsKey(b,"background-color")||goog.object.containsKey(c,"background-color")){goog.array.forEach([b,c],function(a){goog.object.containsKey(a,"background-color")||(a["background-color"]="rgb(255,255,255)")});try{var e=goog.color.parse(b["background-color"]),f=goog.color.parse(c["background-color"]);if(e.hex!==f.hex)return new goog.fx.dom.BgColorTransform(a,goog.color.hexToRgb(e),goog.color.hexToRgb(f),d,goog.fx.easing.easeOut)}catch(g){window.console.log("Skipping color transition anim: ",
g.message)}}};nrg.fx.TransitionDims=function(a,b){this.asIs=a;this.toBe=b};nrg.fx.filterTransitionStyles=function(a){return nrg.convert.filterZeroLengthStrings(nrg.convert.filterNaN(a))};nrg.fx.getTransitionStyles=function(a){var b=goog.style.getSize(a),c=goog.style.getPosition(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}};
nrg.fx.generateTransitionDims=function(a,b){var c=nrg.fx.getTransitionStyles(a),c=nrg.fx.filterTransitionStyles(c),d=nrg.fx.getTransitionStyles(b),e=nrg.fx.filterTransitionStyles(d);goog.object.forEach(c,function(a,b){goog.isDefAndNotNull(e[b])||(e[b]=a)});return new nrg.fx.TransitionDims(c,e)};
nrg.fx.generateAnimations=function(a,b,c,d){var e=[];goog.array.forEach(nrg.fx.animGenStyles,function(f){if(goog.isDefAndNotNull(b)&&goog.isDefAndNotNull(c))switch(f){case "left":e.push(nrg.fx.generateAnim_Slide(a,b,c,d));break;case "height":e.push(nrg.fx.generateAnim_Resize(a,b,c,d));break;case "opacity":e.push(nrg.fx.generateAnim_Fade(a,b,c,d));break;case "visibility":e.push(nrg.fx.generateAnim_RemoveAddFade(a,b,c,d));break;case "background-color":e.push(nrg.fx.generateAnim_BgColorTrans(a,b,c,d))}});
var f=[];goog.array.forEach(e,function(a){goog.isDefAndNotNull(a)&&f.push(a)});delete e;return f};nrg.fx.parallelAnimate=function(a,b,c,d){var e=new goog.fx.AnimationParallelQueue;goog.array.forEach(a,function(a){c&&goog.events.listen(a,goog.fx.Animation.EventType.ANIMATE,c);e.add(a)});b&&goog.events.listen(e,goog.fx.Animation.EventType.BEGIN,b);goog.events.listen(e,goog.fx.Animation.EventType.END,function(){d&&d();e.dispose();e=null;delete e});e.play()};
nrg.fx.serialAnimate=function(a,b,c,d){var e=new goog.fx.AnimationSerialQueue;goog.array.forEach(a,function(a){c&&goog.events.listen(a,goog.fx.Animation.EventType.ANIMATE,c);e.add(a)});b&&goog.events.listen(e,goog.fx.Animation.EventType.BEGIN,b);goog.events.listen(e,goog.fx.Animation.EventType.END,function(){d&&d();e.dispose();e=null;delete e});e.play()};
nrg.fx.setBasicHoverStates=function(a,b,c){b=void 0===b?1:b;c=void 0===c?.5:c;var d=function(b){nrg.style.setStyle(a,{opacity:c})};goog.events.listen(a,goog.events.EventType.MOUSEOVER,function(c){nrg.style.setStyle(a,{opacity:b})});goog.events.listen(a,goog.events.EventType.MOUSEOUT,d);d()};goog.exportSymbol("nrg.fx.fadeIn",nrg.fx.fadeIn);goog.exportSymbol("nrg.fx.fadeInFromZero",nrg.fx.fadeInFromZero);goog.exportSymbol("nrg.fx.fadeOut",nrg.fx.fadeOut);
goog.exportSymbol("nrg.fx.fadeOutAndRemove",nrg.fx.fadeOutAndRemove);goog.exportSymbol("nrg.fx.fadeTo",nrg.fx.fadeTo);goog.exportSymbol("nrg.fx.animGenStyles",nrg.fx.animGenStyles);goog.exportSymbol("nrg.fx.generateAnim_Slide",nrg.fx.generateAnim_Slide);goog.exportSymbol("nrg.fx.generateAnim_Resize",nrg.fx.generateAnim_Resize);goog.exportSymbol("nrg.fx.generateAnim_Fade",nrg.fx.generateAnim_Fade);goog.exportSymbol("nrg.fx.generateAnim_RemoveAddFade",nrg.fx.generateAnim_RemoveAddFade);
goog.exportSymbol("nrg.fx.generateAnim_BgColorTrans",nrg.fx.generateAnim_BgColorTrans);goog.exportSymbol("nrg.fx.TransitionDims",nrg.fx.TransitionDims);goog.exportSymbol("nrg.fx.filterTransitionStyles",nrg.fx.filterTransitionStyles);goog.exportSymbol("nrg.fx.getTransitionStyles",nrg.fx.getTransitionStyles);goog.exportSymbol("nrg.fx.generateTransitionDims",nrg.fx.generateTransitionDims);goog.exportSymbol("nrg.fx.generateAnimations",nrg.fx.generateAnimations);
goog.exportSymbol("nrg.fx.parallelAnimate",nrg.fx.parallelAnimate);goog.exportSymbol("nrg.fx.serialAnimate",nrg.fx.serialAnimate);goog.exportSymbol("nrg.fx.setBasicHoverStates",nrg.fx.setBasicHoverStates);goog.string.path={};goog.string.path.baseName=function(a){var b=a.lastIndexOf("/")+1;return a.slice(b)};goog.string.path.basename=goog.string.path.baseName;goog.string.path.dirname=function(a){var b=a.lastIndexOf("/")+1;a=a.slice(0,b);/^\/+$/.test(a)||(a=a.replace(/\/+$/,""));return a};goog.string.path.extension=function(a){a=goog.string.path.baseName(a).replace(/\.+/g,".");var b=a.lastIndexOf(".");return 0>=b?"":a.substr(b+1)};
goog.string.path.join=function(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=goog.string.startsWith(d,"/")?d:""==b||goog.string.endsWith(b,"/")?b+d:b+("/"+d);return b};
goog.string.path.normalizePath=function(a){if(""==a)return".";var b="";goog.string.startsWith(a,"/")&&(b="/",goog.string.startsWith(a,"//")&&!goog.string.startsWith(a,"///")&&(b="//"));a=a.split("/");for(var c=[],d=0;d<a.length;d++){var e=a[d];""!=e&&"."!=e&&(".."!=e||!b&&!c.length||".."==goog.array.peek(c)?c.push(e):c.pop())}return b+c.join("/")||"."};goog.string.path.split=function(a){var b=goog.string.path.dirname(a);a=goog.string.path.baseName(a);return[b,a]};nrg.dom=function(){};goog.exportSymbol("nrg.dom",nrg.dom);nrg.dom.createBasicHoverButtonSet=function(a,b,c){if(!goog.isArray(a))throw new TypeError("Array expected!",a);if(b&&!goog.isString(b))throw new TypeError("String expected!",b);if(c&&!goog.isString(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",f=0,f=0;for(len=a.length;f<len;f++)e=a[f],d[e]=nrg.dom.createBasicHoverButton(e,{src:b?goog.string.path.join(b,goog.string.toSelectorCase(e)+"."+c):""});return d};
nrg.dom.createDivChildImage=function(a,b){var c=goog.dom.createDom("img",{src:b});c.style.backgroundSize="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";goog.dom.append(a,c);c.onclick=c.parentNode.onclick};
nrg.dom.createBasicHoverButton=function(a,b,c,d){if(!goog.isString(a))throw new TypeError("String expected!");if(b&&!goog.isObject(b))throw new TypeError("Object expected!");if(goog.isDefAndNotNull(c)&&!goog.isNumber(c))throw new TypeError("Number expected!");if(goog.isDefAndNotNull(d)&&!goog.isNumber(d))throw new TypeError("Number expected!");a=nrg.dom.createUniqueDom("div",a,b?b:{});b&&b.src&&nrg.dom.createDivChildImage(a,b.src);nrg.fx.setBasicHoverStates(a,void 0===c?1:c,void 0===d?.5:d);return a};
nrg.dom.createUniqueDom=function(a,b,c){if(!goog.isString(a))throw new TypeError("String expected!",a);if(!goog.isString(b))throw new TypeError("String expected!",b);if(c&&!goog.isObject(c))throw new TypeError("Object expected!");c=c&&goog.isObject(c)?c:{};c.id=c.id?c.id:b+"_"+goog.string.createUniqueString();c["class"]=c["class"]?c["class"]:goog.string.toSelectorCase(b.replace(/\./g,"-").toLowerCase());return goog.dom.createDom(a,c)};
nrg.dom.stopPropagation=function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()};nrg.dom.checkForExtraneousArgs=function(a,b,c){for(var d in b)if(d in a)"[object Object]"===b[d].toString()&&nrg.dom.validateArgs(originString,a[d],b[d]);else throw"Invalid arguments detected in args: '"+d+"' ";};
nrg.dom.readCSS=function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b};goog.exportSymbol("nrg.dom.createBasicHoverButtonSet",nrg.dom.createBasicHoverButtonSet);goog.exportSymbol("nrg.dom.createDivChildImage",nrg.dom.createDivChildImage);goog.exportSymbol("nrg.dom.createBasicHoverButton",nrg.dom.createBasicHoverButton);
goog.exportSymbol("nrg.dom.createUniqueDom",nrg.dom.createUniqueDom);goog.exportSymbol("nrg.dom.stopPropagation",nrg.dom.stopPropagation);goog.exportSymbol("nrg.dom.checkForExtraneousArgs",nrg.dom.checkForExtraneousArgs);goog.exportSymbol("nrg.dom.readCSS",nrg.dom.readCSS);nrg.ui={};nrg.ui.Component=function(a){goog.ui.Component.call(this,a);this.validateIdPrefix();this.setElementInternal(nrg.dom.createUniqueDom("div",this.constructor.ID_PREFIX,a));this.createCssMap();this.applyCssHierarchy_()};goog.inherits(nrg.ui.Component,goog.ui.Component);goog.exportSymbol("nrg.ui.Component",nrg.ui.Component);
nrg.ui.Component.prototype.validateIdPrefix=function(){if(this instanceof nrg.ui.Component){this.constructor.superClass_&&this.constructor.superClass_ instanceof nrg.ui.Component&&nrg.ui.Component.prototype.validateIdPrefix.bind(this.constructor.superClass_)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);goog.isDef(this.constructor.CSS_CLASS_PREFIX)||(this.constructor.CSS_CLASS_PREFIX=nrg.ui.Component.idPrefixToCssClass(this.constructor.ID_PREFIX),
this.constructor.ELEMENT_CLASS=this.constructor.CSS_CLASS_PREFIX)}};nrg.ui.Component.idPrefixToCssClass=function(a){return a.toLowerCase().replace(/\./g,"-")};
nrg.ui.Component.prototype.createCssMap=function(){if(goog.isDefAndNotNull(this.constructor.superClass_))for(var a=this.constructor.superClass_;null!=a.constructor.ID_PREFIX;)nrg.ui.Component.prototype.createCssMap.bind(a)(),a=a.constructor.superClass_;goog.isDef(this.constructor.CSS_SUFFIX)&&!goog.isDef(this.constructor.CSS)&&(this.constructor.CSS=goog.object.clone(this.constructor.CSS_SUFFIX),goog.object.forEach(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=nrg.string.makeCssName(this.constructor.ID_PREFIX,
a)}.bind(this)))};nrg.ui.Component.prototype.applyCssHierarchy_=function(){for(var a=[],b=this,c;goog.isDefAndNotNull(b.constructor.ID_PREFIX);)c=nrg.ui.Component.idPrefixToCssClass(b.constructor.ID_PREFIX),goog.array.insert(a,c),b=b.constructor.superClass_;goog.array.forEach(a,function(a){goog.isDefAndNotNull(this.getElement())&&goog.dom.classes.add(this.getElement(),a)}.bind(this))};nrg.ui.Component.animationLengths={FAST:150,MEDIUM:300,SLOW:600};nrg.ui.Component.prototype.imagePrefix="";
nrg.ui.Component.prototype.setImagePrefix=function(a){this.imagePrefix=a};nrg.ui.Component.prototype.getImagePrefix=function(a){return this.imagePrefix};nrg.ui.Component.prototype.addSubComponent=function(a){goog.isDefAndNotNull(this.subComponents)||(this.subComponents=[]);this.subComponents.push(a)};
nrg.ui.Component.prototype.calcDims=function(){if(!goog.isDefAndNotNull(this.prevSize))this.prevSize=goog.style.getSize(this.getElement());else if(this.prevSize.height!==this.currSize.height||this.prevSize.width!==this.currSize.width)this.prevSize=this.currSize;if(!goog.isDefAndNotNull(this.prevPos))this.prevPos=goog.style.getPosition(this.getElement());else if(this.prevPos.x!==this.currPos.x||this.prevPos.y!==this.currPos.y)this.prevPos=this.currPos;this.currSize=goog.style.getSize(this.getElement());
this.currPos=goog.style.getPosition(this.getElement())};nrg.ui.Component.prototype.updateStyle=function(){this.calcDims()};nrg.ui.Component.prototype.render=function(a){this.isInDocument()&&this.getElement().parentNode!==a&&goog.isDefAndNotNull(a)?goog.dom.appendChild(a,this.getElement()):nrg.ui.Component.superClass_.render.call(this,a)};nrg.ui.Component.prototype.disposeInternalCalled_=!1;nrg.ui.Component.prototype.disposeInternalCalled=function(){return this.disposeInternalCalled_};
nrg.ui.Component.prototype.disposeInternal=function(){nrg.ui.Component.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.subComponents)&&(goog.array.forEach(this.subComponents,function(a){goog.events.removeAll(a);a.dispose()}),goog.array.clear(this.subComponents));goog.events.removeAll(this);goog.events.removeAll(this.getElement());goog.dom.removeNode(this.getElement());this.prevPos=this.prevSize=this.currPos=this.currSize=this.imagePrefix=this.iconUrl=this.iconBaseUrl=null;this.disposeInternalCalled_=
!0};nrg.ui.Component.prototype.disposeAnimations=function(a){goog.isDefAndNotNull(a)&&(a=goog.isArray(a)?a:[a],goog.array.forEach(a,function(a){goog.events.removeAll(a);a.dispose()}),goog.array.clear(a))};nrg.ui.Component.prototype.disposeAnimationQueue=function(a){goog.isDefAndNotNull(a)&&(goog.events.removeAll(a),a.dispose())};nrg.ui.Component.prototype.disposeElementMap=function(a){goog.object.forEach(a,function(b,c){goog.events.removeAll(b);goog.dom.removeNode(b);delete a[c]});goog.object.clear(a)};
nrg.ui.Component.prototype.disposeComponentMap=function(a){goog.object.forEach(a,function(b,c){goog.events.removeAll(b);b.dispose();delete a[c]});goog.object.clear(a)};goog.exportSymbol("nrg.ui.Component.animationLengths",nrg.ui.Component.animationLengths);goog.exportSymbol("nrg.ui.Component.idPrefixToCssClass",nrg.ui.Component.idPrefixToCssClass);goog.exportSymbol("nrg.ui.Component.prototype.validateIdPrefix",nrg.ui.Component.prototype.validateIdPrefix);
goog.exportSymbol("nrg.ui.Component.prototype.imagePrefix",nrg.ui.Component.prototype.imagePrefix);goog.exportSymbol("nrg.ui.Component.prototype.createCssMap",nrg.ui.Component.prototype.createCssMap);goog.exportSymbol("nrg.ui.Component.prototype.setImagePrefix",nrg.ui.Component.prototype.setImagePrefix);goog.exportSymbol("nrg.ui.Component.prototype.getImagePrefix",nrg.ui.Component.prototype.getImagePrefix);goog.exportSymbol("nrg.ui.Component.prototype.addSubComponent",nrg.ui.Component.prototype.addSubComponent);
goog.exportSymbol("nrg.ui.Component.prototype.calcDims",nrg.ui.Component.prototype.calcDims);goog.exportSymbol("nrg.ui.Component.prototype.updateStyle",nrg.ui.Component.prototype.updateStyle);goog.exportSymbol("nrg.ui.Component.prototype.render",nrg.ui.Component.prototype.render);goog.exportSymbol("nrg.ui.Component.prototype.disposeInternalCalled",nrg.ui.Component.prototype.disposeInternalCalled);goog.exportSymbol("nrg.ui.Component.prototype.disposeAnimations",nrg.ui.Component.prototype.disposeAnimations);
goog.exportSymbol("nrg.ui.Component.prototype.disposeAnimationQueue",nrg.ui.Component.prototype.disposeAnimationQueue);goog.exportSymbol("nrg.ui.Component.prototype.disposeElementMap",nrg.ui.Component.prototype.disposeElementMap);goog.exportSymbol("nrg.ui.Component.prototype.disposeComponentMap",nrg.ui.Component.prototype.disposeComponentMap);goog.exportSymbol("nrg.ui.Component.prototype.disposeInternal",nrg.ui.Component.prototype.disposeInternal);nrg.ui.Dialog=function(){goog.ui.Dialog.call(this);this.setEscapeToCancel(!1)};goog.inherits(nrg.ui.Dialog,goog.ui.Dialog);goog.exportSymbol("nrg.ui.Dialog",nrg.ui.Dialog);nrg.ui.Dialog.ID_PREFIX="nrg.ui.Dialog";nrg.ui.Dialog.EventType={OPENED:goog.events.getUniqueId("open"),CLOSED:goog.events.getUniqueId("close"),CLOSE_BUTTON_CLICKED:goog.events.getUniqueId("close-button-clicked")};
nrg.ui.Dialog.CSS={OVERLAY:"nrg-ui-dialog-overlay",BACKGROUND:"nrg-ui-dialog-background",CLOSEBUTTON:"nrg-ui-dialog-closebutton",CLOSEBUTTON_IMAGE:"nrg-ui-dialog-closebutton-image",TEXT:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",CONTENT:"nrg-ui-dialog-content",BUTTONS:"nrg-ui-dialog-buttons"};
nrg.ui.Dialog.prototype.setMouseoverClass=function(a){this.titleElt_.style.visibility="hidden";this.closeButton_.style.visibility="hidden";goog.isDefAndNotNull(a)&&nrg.style.setHoverClass(this.getElement(),a,null,null,function(){this.titleElt_.style.visibility="visible";this.closeButton_.style.visibility="visible"}.bind(this),function(){this.titleElt_.style.visibility="hidden";this.closeButton_.style.visibility="hidden"}.bind(this))};
nrg.ui.Dialog.prototype.addTitleClass=function(a){goog.dom.classes.add(this.titleElt_,a)};nrg.ui.Dialog.prototype.addContentClass=function(a){goog.dom.classes.add(this.content_,a)};nrg.ui.Dialog.prototype.addCloseButtonClass=function(a){goog.dom.classes.add(this.closeButton_.parentNode,a)};nrg.ui.Dialog.prototype.addCloseButtonImageClass=function(a){goog.dom.classes.add(this.closeButton_,a)};nrg.ui.Dialog.prototype.addCloseSpanClass=function(a){goog.dom.classes.add(this.closeSpan_,a)};
nrg.ui.Dialog.prototype.addButtonsClass=function(a){goog.dom.classes.add(this.buttonCollection_,a)};nrg.ui.Dialog.prototype.modifyButtonCollection_=function(){goog.dom.classes.add(this.buttonCollection_,nrg.ui.Dialog.CSS.BUTTONS)};nrg.ui.Dialog.prototype.modifyContent_=function(){goog.dom.classes.add(this.content_,nrg.ui.Dialog.CSS.CONTENT)};nrg.ui.Dialog.prototype.modifyTitle_=function(){goog.dom.classes.add(this.titleElt_,nrg.ui.Dialog.CSS.TITLE)};
nrg.ui.Dialog.prototype.modifyCloseButton_=function(){this.closeSpan_=goog.dom.getElementsByClass("modal-dialog-title-close",this.getElement())[0];goog.dom.classes.add(this.closeSpan_,nrg.ui.Dialog.CSS.CLOSEBUTTON);this.closeButton_=goog.dom.createDom("img",{id:this.constructor.ID_PREFIX+"_CloseButton_"+goog.string.createUniqueString(),"class":nrg.ui.Dialog.CSS.CLOSEBUTTON_IMAGE});this.closeButton_.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";goog.dom.appendChild(this.closeSpan_,this.closeButton_);
goog.events.listen(this.closeButton_,goog.events.EventType.CLICK,function(a){this.setVisible(!this.isVisible());this.dispatchEvent({type:nrg.ui.Dialog.EventType.CLOSE_BUTTON_CLICKED});a.stopPropagation()}.bind(this))};
nrg.ui.Dialog.prototype.applyFadeTransitions=function(){var a=this.getElement(),b=goog.fx.dom.FadeIn(a,nrg.ui.Component.animationLengths.SLOW),c=goog.fx.dom.FadeOut(a,nrg.ui.Component.animationLengths.SLOW),d=goog.fx.dom.FadeIn(a,nrg.ui.Component.animationLengths.SLOW),a=goog.fx.dom.FadeOut(a,nrg.ui.Component.animationLengths.SLOW);this.setTransition(b,c,d,a)};nrg.ui.Dialog.prototype.moveToCorner=function(a,b){var c=this.getElement();"left"==a&&(c.style.left="0px");"top"==b&&(c.style.top="0px")};
nrg.ui.Dialog.prototype.center=function(){var a=this.getElement(),b=this.getElement().parentNode,b=goog.style.getSize(b);if(goog.isDefAndNotNull(this.getBackgroundElement())){var c=this.getBackgroundElement();0==c.opacity?goog.dom.removeNode(c):nrg.style.setStyle(c,{width:b.width,height:b.height,"z-index":199})}var c=goog.style.getSize(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);goog.style.setPosition(a,d,e)};
nrg.ui.Dialog.prototype.draggable_=!0;nrg.ui.Dialog.prototype.dragger_=null;nrg.ui.Dialog.prototype.setDraggable=function(a){this.draggable_=a;this.setDraggingEnabled_(a&&this.isInDocument())};
nrg.ui.Dialog.prototype.setDraggingEnabled_=function(a){var b=goog.string.trim(this.getClass()+"-title-draggable").split(" "),c=this.getTitleElement();this.getElement()&&(a?goog.dom.classlist.addAll(goog.asserts.assert(c),b):goog.dom.classlist.removeAll(goog.asserts.assert(c),b));a&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classlist.addAll(goog.asserts.assert(c),b),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!a&&this.dragger_&&
(this.dragger_.dispose(),this.dragger_=null)};nrg.ui.Dialog.prototype.updateLimits=function(){this.setDraggerLimits_()};
nrg.ui.Dialog.prototype.setDraggerLimits_=function(a){a=this.getDomHelper().getDocument();var b=goog.dom.getWindow(a)||window;a=this.getElement().parentNode;a=goog.style.getSize(a);var b=goog.dom.getViewportSize(b),c=goog.style.getSize(this.getElement());"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):this.dragger_.setLimits(new goog.math.Rect(-1*c.width,-1*c.height,a.width+c.width,
a.height+c.height))};nrg.ui.Dialog.prototype.addImage=function(a){var b=goog.dom.createDom("img",{id:this.constructor.ID_PREFIX+"_Image_"+goog.string.createUniqueString(),"class":nrg.ui.Dialog.CSS.IMAGE});goog.isDefAndNotNull(this.images_)||(this.images_=[]);this.images_.push(b);goog.dom.appendChild(this.overlay_,b);goog.isDefAndNotNull(a)&&(b.src=a);return b};
nrg.ui.Dialog.prototype.addText=function(a){var b=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_Text_"+goog.string.createUniqueString(),"class":nrg.ui.Dialog.CSS.TEXT},a);goog.isDefAndNotNull(this.texts_)||(this.texts_=[]);this.texts_.push(b);b.innerHTML=a||"";this.setContent(a);return b};nrg.ui.Dialog.prototype.getOverlay=function(){return this.getElement()};
nrg.ui.Dialog.prototype.render=function(a){nrg.ui.Dialog.superClass_.render.call(this,a);goog.dom.classes.add(this.getElement(),"nrg-ui-dialog");this.titleElt_=goog.dom.getElementsByClass("modal-dialog-title",this.getElement())[0];this.content_=goog.dom.getElementsByClass("modal-dialog-content",this.getElement())[0];this.buttonCollection_=goog.dom.getElementsByClass("modal-dialog-buttons",this.getElement())[0];this.closeButton_=null;this.modifyCloseButton_();this.modifyButtonCollection_();this.modifyTitle_();
this.modifyContent_();nrg.ui.Dialog.superClass_.setDraggable.call(this,!1);this.setDraggable(!0)};nrg.ui.Dialog.prototype.setVisible=function(a){nrg.ui.Dialog.superClass_.setVisible.call(this,a)};nrg.ui.Dialog.prototype.getTextElements=function(){return this.texts_};
nrg.ui.Dialog.prototype.disposeInternal=function(){nrg.ui.Dialog.superClass_.disposeInternal.call(this);delete this.buttonCollection_;delete this.titleElt_;delete this.content_;delete this.closeButton_;delete this.closeSpan_;goog.isDefAndNotNull(this.overlay_)&&(goog.dom.removeNode(this.overlay_),delete this.overlay_);goog.isDefAndNotNull(this.texts_)&&(goog.array.forEach(this.texts_,function(a){goog.dom.removeNode(a);delete a}),delete this.texts_);goog.isDefAndNotNull(this.images_)&&(goog.array.forEach(this.images_,
function(a){goog.dom.removeNode(a);delete a}),delete this.images_)};goog.exportSymbol("nrg.ui.Dialog.ID_PREFIX",nrg.ui.Dialog.ID_PREFIX);goog.exportSymbol("nrg.ui.Dialog.EventType",nrg.ui.Dialog.EventType);goog.exportSymbol("nrg.ui.Dialog.prototype.setMouseoverClass",nrg.ui.Dialog.prototype.setMouseoverClass);goog.exportSymbol("nrg.ui.Dialog.prototype.addTitleClass",nrg.ui.Dialog.prototype.addTitleClass);goog.exportSymbol("nrg.ui.Dialog.prototype.addContentClass",nrg.ui.Dialog.prototype.addContentClass);
goog.exportSymbol("nrg.ui.Dialog.prototype.addCloseButtonClass",nrg.ui.Dialog.prototype.addCloseButtonClass);goog.exportSymbol("nrg.ui.Dialog.prototype.addCloseButtonImageClass",nrg.ui.Dialog.prototype.addCloseButtonImageClass);goog.exportSymbol("nrg.ui.Dialog.prototype.addCloseSpanClass",nrg.ui.Dialog.prototype.addCloseSpanClass);goog.exportSymbol("nrg.ui.Dialog.prototype.addButtonsClass",nrg.ui.Dialog.prototype.addButtonsClass);goog.exportSymbol("nrg.ui.Dialog.prototype.applyFadeTransitions",nrg.ui.Dialog.prototype.applyFadeTransitions);
goog.exportSymbol("nrg.ui.Dialog.prototype.moveToCorner",nrg.ui.Dialog.prototype.moveToCorner);goog.exportSymbol("nrg.ui.Dialog.prototype.center",nrg.ui.Dialog.prototype.center);goog.exportSymbol("nrg.ui.Dialog.prototype.setDraggable",nrg.ui.Dialog.prototype.setDraggable);goog.exportSymbol("nrg.ui.Dialog.prototype.updateLimits",nrg.ui.Dialog.prototype.updateLimits);goog.exportSymbol("nrg.ui.Dialog.prototype.addImage",nrg.ui.Dialog.prototype.addImage);
goog.exportSymbol("nrg.ui.Dialog.prototype.addText",nrg.ui.Dialog.prototype.addText);goog.exportSymbol("nrg.ui.Dialog.prototype.getOverlay",nrg.ui.Dialog.prototype.getOverlay);goog.exportSymbol("nrg.ui.Dialog.prototype.render",nrg.ui.Dialog.prototype.render);goog.exportSymbol("nrg.ui.Dialog.prototype.setVisible",nrg.ui.Dialog.prototype.setVisible);goog.exportSymbol("nrg.ui.Dialog.prototype.getTextElements",nrg.ui.Dialog.prototype.getTextElements);
goog.exportSymbol("nrg.ui.Dialog.prototype.disposeInternal",nrg.ui.Dialog.prototype.disposeInternal);nrg.ui.ErrorOverlay=function(){nrg.ui.Dialog.call(this);goog.dom.classes.add(this.overlay_,nrg.ui.ErrorOverlay.CSS.OVERLAY)};goog.inherits(nrg.ui.ErrorOverlay,nrg.ui.Dialog);goog.exportSymbol("nrg.ui.ErrorOverlay",nrg.ui.ErrorOverlay);nrg.ui.ErrorOverlay.ID_PREFIX="nrg.ui.ErrorOverlay";nrg.ui.ErrorOverlay.CSS={OVERLAY:"nrg-ui-infooverlay-overlay",TEXT:"nrg-ui-infooverlay-text"};
nrg.ui.ErrorOverlay.prototype.addText=function(a){nrg.ui.ErrorOverlay.superClass_.addText.call(this,a);a=this.getTextElements();goog.dom.classes.add(a[a.length-1],nrg.ui.ErrorOverlay.CSS.TEXT)};nrg.ui.ErrorOverlay.prototype.disposeInternal=function(){nrg.ui.ErrorOverlay.superClass_.disposeInternal.call(this)};goog.exportSymbol("nrg.ui.ErrorOverlay.ID_PREFIX",nrg.ui.ErrorOverlay.ID_PREFIX);goog.exportSymbol("nrg.ui.ErrorOverlay.prototype.addText",nrg.ui.ErrorOverlay.prototype.addText);
goog.exportSymbol("nrg.ui.ErrorOverlay.prototype.disposeInternal",nrg.ui.ErrorOverlay.prototype.disposeInternal);goog.ui.Zippy=function(a,b,c,d,e){function f(a){a&&(a.tabIndex=0,goog.a11y.aria.setRole(a,g.getAriaRole()),goog.dom.classlist.add(a,"goog-zippy-header"),g.enableMouseEventsHandling_(a),g.enableKeyboardEventsHandling_(a))}goog.events.EventTarget.call(this);this.dom_=e||goog.dom.getDomHelper();this.elHeader_=this.dom_.getElement(a)||null;this.elExpandedHeader_=this.dom_.getElement(d||null);this.elContent_=(this.lazyCreateFunc_=goog.isFunction(b)?b:null)||!b?null:this.dom_.getElement(b);this.expanded_=
!0==c;this.keyboardEventHandler_=new goog.events.EventHandler(this);this.mouseEventHandler_=new goog.events.EventHandler(this);var g=this;f(this.elHeader_);f(this.elExpandedHeader_);this.setExpanded(this.expanded_)};goog.inherits(goog.ui.Zippy,goog.events.EventTarget);goog.ui.Zippy.Events={ACTION:"action",TOGGLE:"toggle"};goog.ui.Zippy.prototype.handleMouseEvents_=!0;goog.ui.Zippy.prototype.handleKeyEvents_=!0;
goog.ui.Zippy.prototype.disposeInternal=function(){goog.ui.Zippy.superClass_.disposeInternal.call(this);goog.dispose(this.keyboardEventHandler_);goog.dispose(this.mouseEventHandler_)};goog.ui.Zippy.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TAB};goog.ui.Zippy.prototype.getContentElement=function(){return this.elContent_};goog.ui.Zippy.prototype.getVisibleHeaderElement=function(){var a=this.elExpandedHeader_;return a&&goog.style.isElementShown(a)?a:this.elHeader_};
goog.ui.Zippy.prototype.expand=function(){this.setExpanded(!0)};goog.ui.Zippy.prototype.collapse=function(){this.setExpanded(!1)};goog.ui.Zippy.prototype.toggle=function(){this.setExpanded(!this.expanded_)};
goog.ui.Zippy.prototype.setExpanded=function(a){this.elContent_?goog.style.setElementShown(this.elContent_,a):a&&this.lazyCreateFunc_&&(this.elContent_=this.lazyCreateFunc_());this.elContent_&&goog.dom.classlist.add(this.elContent_,"goog-zippy-content");this.elExpandedHeader_?(goog.style.setElementShown(this.elHeader_,!a),goog.style.setElementShown(this.elExpandedHeader_,a)):this.updateHeaderClassName(a);this.setExpandedInternal(a);this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.Zippy.Events.TOGGLE,
this,this.expanded_))};goog.ui.Zippy.prototype.setExpandedInternal=function(a){this.expanded_=a};goog.ui.Zippy.prototype.isExpanded=function(){return this.expanded_};goog.ui.Zippy.prototype.updateHeaderClassName=function(a){this.elHeader_&&(goog.dom.classlist.enable(this.elHeader_,"goog-zippy-expanded",a),goog.dom.classlist.enable(this.elHeader_,"goog-zippy-collapsed",!a),goog.a11y.aria.setState(this.elHeader_,goog.a11y.aria.State.EXPANDED,a))};goog.ui.Zippy.prototype.isHandleKeyEvents=function(){return this.handleKeyEvents_};
goog.ui.Zippy.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Zippy.prototype.setHandleKeyboardEvents=function(a){this.handleKeyEvents_!=a&&((this.handleKeyEvents_=a)?(this.enableKeyboardEventsHandling_(this.elHeader_),this.enableKeyboardEventsHandling_(this.elExpandedHeader_)):this.keyboardEventHandler_.removeAll())};
goog.ui.Zippy.prototype.setHandleMouseEvents=function(a){this.handleMouseEvents_!=a&&((this.handleMouseEvents_=a)?(this.enableMouseEventsHandling_(this.elHeader_),this.enableMouseEventsHandling_(this.elExpandedHeader_)):this.mouseEventHandler_.removeAll())};goog.ui.Zippy.prototype.enableKeyboardEventsHandling_=function(a){a&&this.keyboardEventHandler_.listen(a,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_)};
goog.ui.Zippy.prototype.enableMouseEventsHandling_=function(a){a&&this.mouseEventHandler_.listen(a,goog.events.EventType.CLICK,this.onHeaderClick_)};goog.ui.Zippy.prototype.onHeaderKeyDown_=function(a){if(a.keyCode==goog.events.KeyCodes.ENTER||a.keyCode==goog.events.KeyCodes.SPACE)this.toggle(),this.dispatchActionEvent_(),a.preventDefault(),a.stopPropagation()};goog.ui.Zippy.prototype.onHeaderClick_=function(a){this.toggle();this.dispatchActionEvent_()};
goog.ui.Zippy.prototype.dispatchActionEvent_=function(){this.dispatchEvent(new goog.events.Event(goog.ui.Zippy.Events.ACTION,this))};goog.ui.ZippyEvent=function(a,b,c){goog.events.Event.call(this,a,b);this.expanded=c};goog.inherits(goog.ui.ZippyEvent,goog.events.Event);goog.ui.AnimatedZippy=function(a,b,c,d){d=d||goog.dom.getDomHelper();var e=d.createDom("div",{style:"overflow:hidden"});b=d.getElement(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.elWrapper_=e;this.anim_=null;goog.ui.Zippy.call(this,a,b,c,void 0,d);a=this.isExpanded();this.elWrapper_.style.display=a?"":"none";this.updateHeaderClassName(a)};goog.inherits(goog.ui.AnimatedZippy,goog.ui.Zippy);goog.ui.AnimatedZippy.prototype.animationDuration=500;
goog.ui.AnimatedZippy.prototype.animationAcceleration=goog.fx.easing.easeOut;goog.ui.AnimatedZippy.prototype.isBusy=function(){return null!=this.anim_};
goog.ui.AnimatedZippy.prototype.setExpanded=function(a){if(this.isExpanded()!=a||this.anim_){"none"==this.elWrapper_.style.display&&(this.elWrapper_.style.display="");var b=this.getContentElement().offsetHeight,c=0;this.anim_?(a=this.isExpanded(),goog.events.removeAll(this.anim_),this.anim_.stop(!1),c=parseInt(this.getContentElement().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;this.updateHeaderClassName(a);this.anim_=new goog.fx.Animation([0,c],[0,a?b:0],this.animationDuration,this.animationAcceleration);
goog.events.listen(this.anim_,[goog.fx.Transition.EventType.BEGIN,goog.fx.Animation.EventType.ANIMATE,goog.fx.Transition.EventType.END],this.onAnimate_,!1,this);goog.events.listen(this.anim_,goog.fx.Transition.EventType.END,goog.bind(this.onAnimationCompleted_,this,a));this.anim_.play(!1)}};goog.ui.AnimatedZippy.prototype.onAnimate_=function(a){var b=this.getContentElement();b.style.marginTop=a.y-b.offsetHeight+"px"};
goog.ui.AnimatedZippy.prototype.onAnimationCompleted_=function(a){a&&(this.getContentElement().style.marginTop="0");goog.events.removeAll(this.anim_);this.setExpandedInternal(a);this.anim_=null;a||(this.elWrapper_.style.display="none");this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.Zippy.Events.TOGGLE,this,a))};nrg.ui.ZippyNode=function(a,b,c,d){nrg.ui.Component.call(this);this.title_=a;this.header_=nrg.ui.ZippyNode.createZippyHeader_(a);this.header_[nrg.ui.ZippyNode.NODE_STORT_TAG]=a.toLowerCase();goog.isDefAndNotNull(d)?d(b,this.header_):goog.dom.appendChild(b,this.header_);this.headerLabel_=nrg.ui.ZippyNode.createZippyHeaderLabel_(a);this.header_.appendChild(this.headerLabel_);this.expandIcon_=nrg.ui.ZippyNode.createZippyExpandIcon_(a);this.header_.appendChild(this.expandIcon_);this.contentHolder_=nrg.ui.ZippyNode.createZippyContentHolder_(a);
b.appendChild(this.contentHolder_);this.Zippy_=new this.zippyType_(this.header_,this.contentHolder_,goog.isDefAndNotNull(c)?c:!1);this.storageKey_=goog.getUid(this);this.Nodes_={};this.setZippyEvents_Hover_();this.setZippyEvents_ExpandAndCollapse_()};goog.inherits(nrg.ui.ZippyNode,nrg.ui.Component);goog.exportSymbol("nrg.ui.ZippyNode",nrg.ui.ZippyNode);nrg.ui.ZippyNode.ID_PREFIX="nrg.ui.ZippyNode";
nrg.ui.ZippyNode.EventType={EXPANDED:goog.events.getUniqueId("expanded"),COLLAPSED:goog.events.getUniqueId("collapsed"),CLICKED:goog.events.getUniqueId("clicked")};nrg.ui.ZippyNode.CSS_SUFFIX={HEADER:"header",HEADER_MOUSEOVER:"header-mouseover",HEADER_LABEL:"header-label",EXPAND_ICON:"expandicon",EXPAND_ICON_MOUSEOVER:"expandicon-mouseover",CONTENT:"content",CONTENT:"content-sub"};
nrg.ui.ZippyNode.createZippyHeaderLabel_=function(a){var b=goog.dom.createDom("div",{id:"ZippyHeaderLabel_"+a+"_"+goog.string.createUniqueString(),"class":nrg.ui.ZippyNode.CSS.HEADER_LABEL}),c=a.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<a?goog.string.truncateMiddle(a,105):c.length==a.length?goog.string.truncateMiddle(a,45):a;return b};
nrg.ui.ZippyNode.createZippyExpandIcon_=function(a){return goog.dom.createDom("div",{id:"ZippyExpandIcon_"+a+"_"+goog.string.createUniqueString(),"class":nrg.ui.ZippyNode.CSS.EXPAND_ICON},"+")};nrg.ui.ZippyNode.createZippyContentHolder_=function(a){return goog.dom.createDom("div",{id:"ZippyContent_"+a+"_"+goog.string.createUniqueString(),"class":nrg.ui.ZippyNode.CSS.CONTENT})};
nrg.ui.ZippyNode.createZippyHeader_=function(a){return goog.dom.createDom("div",{id:"ZippyHeader_"+a+"_"+goog.string.createUniqueString(),"class":nrg.ui.ZippyNode.CSS.HEADER})};nrg.ui.ZippyNode.NODE_STORT_TAG=goog.string.createUniqueString();nrg.ui.ZippyNode.prototype.zippyType_=goog.ui.AnimatedZippy;nrg.ui.ZippyNode.prototype.getTitle=function(){return this.title_};nrg.ui.ZippyNode.prototype.getNodes=function(){return this.Nodes_};nrg.ui.ZippyNode.prototype.getHeader=function(){return this.header_};
nrg.ui.ZippyNode.prototype.getContentHolder=function(){return this.contentHolder_};nrg.ui.ZippyNode.prototype.getHeaderLabel=function(){return this.headerLabel_};nrg.ui.ZippyNode.prototype.getZippy=function(){return this.Zippy_};nrg.ui.ZippyNode.prototype.setExpanded=function(a){this.Zippy_.setExpanded(a)};nrg.ui.ZippyNode.prototype.setAnimated=function(a){this.zippyType_=!0===a?goog.ui.AnimatedZippy:goog.ui.Zippy};
nrg.ui.ZippyNode.prototype.setZippyEvents_ExpandAndCollapse_=function(){goog.events.listen(this.Zippy_,goog.object.getValues(goog.ui.Zippy.Events),function(a){if(this.Zippy_.isBusy())this.onZippyClicked_();else if(a.target.isExpanded())this.onZippyExpanded_();else this.onZippyCollapsed_()}.bind(this))};
nrg.ui.ZippyNode.prototype.setZippyEvents_Hover_=function(){goog.events.listen(this.header_,goog.events.EventType.MOUSEOVER,this.onZippyMouseOver_.bind(this));goog.events.listen(this.header_,goog.events.EventType.MOUSEOUT,this.onZippyMouseOut_.bind(this))};nrg.ui.ZippyNode.prototype.onZippyClicked_=function(){this.dispatchEvent({type:nrg.ui.ZippyNode.EventType.CLICKED})};
nrg.ui.ZippyNode.prototype.onZippyExpanded_=function(){this.expandIcon_.innerHTML="-";nrg.style.setStyle(this.expandIcon_,{"margin-left":"-1em"});this.dispatchEvent({type:nrg.ui.ZippyNode.EventType.EXPANDED})};nrg.ui.ZippyNode.prototype.onZippyCollapsed_=function(){this.expandIcon_.innerHTML="+";nrg.style.setStyle(this.expandIcon_,{"margin-left":"-1.1em"});this.dispatchEvent({type:nrg.ui.ZippyNode.EventType.COLLAPSED})};
nrg.ui.ZippyNode.prototype.onZippyMouseOver_=function(){goog.dom.classes.add(this.header_,nrg.ui.ZippyNode.CSS.HEADER_MOUSEOVER);goog.dom.classes.add(this.expandIcon_,nrg.ui.ZippyNode.CSS.EXPAND_ICON_MOUSEOVER)};nrg.ui.ZippyNode.prototype.onZippyMouseOut_=function(){goog.dom.classes.remove(this.header_,nrg.ui.ZippyNode.CSS.HEADER_MOUSEOVER);goog.dom.classes.remove(this.expandIcon_,nrg.ui.ZippyNode.CSS.EXPAND_ICON_MOUSEOVER)};
nrg.ui.ZippyNode.prototype.disposeInternal=function(){nrg.ui.ZippyNode.superClass_.disposeInternal.call(this);goog.dom.removeNode(this.headerLabel_);delete this.headerLabel_;goog.dom.removeNode(this.expandIcon_);delete this.expandIcon_;goog.events.removeAll(this.header_);goog.dom.removeNode(this.header_);delete this.header_;goog.dom.removeNode(this.contentHolder_);delete this.contentHolder_;goog.isDefAndNotNull(this.Zippy_)&&(this.Zippy_.dispose(),goog.events.removeAll(this.Zippy_),delete this.Zippy_);
this.disposeComponentMap(this.Nodes_);delete this.Nodes_;delete this.storageKey_;delete this.title_};gxnat.vis={};gxnat.vis.VisNode=function(a,b){goog.Disposable.call(this)};goog.inherits(gxnat.vis.VisNode,goog.Disposable);goog.exportSymbol("gxnat.vis.VisNode",gxnat.vis.VisNode);gxnat.vis.VisNode.prototype.category_="Generic";gxnat.vis.VisNode.prototype.setCategory=function(a){this.category_=a};gxnat.vis.VisNode.prototype.getCategory=function(){return this.category_};gxnat.vis.VisNode.prototype.thumbnailUrl_="";gxnat.vis.VisNode.prototype.setThumbnailUrl=function(a){this.thumbnailUrl_=a};
gxnat.vis.VisNode.prototype.getThumbnailUrl=function(){return this.thumbnailUrl_};gxnat.vis.VisNode.prototype.title_=null;gxnat.vis.VisNode.prototype.setTitle=function(a){this.title_=a};gxnat.vis.VisNode.prototype.getTitle=function(){return this.title_};gxnat.vis.VisNode.prototype.dispose=function(){gxnat.vis.VisNode.superClass_.dispose.call(this);this.category_&&delete this.category_;this.thumbnailUrl_&&delete this.thumbnailUrl_;this.title_&&delete this.title_};
goog.exportSymbol("gxnat.vis.VisNode.prototype.setCategory",gxnat.vis.VisNode.prototype.setCategory);goog.exportSymbol("gxnat.vis.VisNode.prototype.getCategory",gxnat.vis.VisNode.prototype.getCategory);goog.exportSymbol("gxnat.vis.VisNode.prototype.setThumbnailUrl",gxnat.vis.VisNode.prototype.setThumbnailUrl);goog.exportSymbol("gxnat.vis.VisNode.prototype.getThumbnailUrl",gxnat.vis.VisNode.prototype.getThumbnailUrl);goog.exportSymbol("gxnat.vis.VisNode.prototype.setTitle",gxnat.vis.VisNode.prototype.setTitle);
goog.exportSymbol("gxnat.vis.VisNode.prototype.getTitle",gxnat.vis.VisNode.prototype.getTitle);goog.exportSymbol("gxnat.vis.VisNode.prototype.dispose",gxnat.vis.VisNode.prototype.dispose);var JSZip={},ZipObject={};
!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.JSZip=a():"undefined"!=typeof global?global.JSZip=a():"undefined"!=typeof self&&(self.JSZip=a())}(function(){return function b(c,d,e){function f(h,l){if(!d[h]){if(!c[h]){var m="function"==typeof require&&require;if(!l&&m)return m(h,!0);if(g)return g(h,!0);throw Error("Cannot find module '"+h+"'");}m=d[h]={exports:{}};c[h][0].call(m.exports,function(b){var d=c[h][1][b];
return f(d?d:b)},m,m.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof require&&require,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(b,c,d){d.encode=function(b,c){for(var d="",h,k,l,m,n,p,q=0;q<b.length;)h=b.charCodeAt(q++),k=b.charCodeAt(q++),l=b.charCodeAt(q++),m=h>>2,h=(h&3)<<4|k>>4,n=(k&15)<<2|l>>6,p=l&63,isNaN(k)?n=p=64:isNaN(l)&&(p=64),d=d+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p);return d};d.decode=function(b,c){var d="",h,k,l,m,n,p=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");p<b.length;)h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),
n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),h=h<<2|k>>4,k=(k&15)<<4|m>>2,l=(m&3)<<6|n,d+=String.fromCharCode(h),64!=m&&(d+=String.fromCharCode(k)),64!=n&&(d+=String.fromCharCode(l));return d}},{}],2:[function(b,c,d){function e(){this.crc32=this.uncompressedSize=this.compressedSize=0;this.compressedContent=this.compressionMethod=null}e.prototype={getContent:function(){return null},getCompressedContent:function(){return null}};c.exports=e},{}],3:[function(b,
c,d){d.STORE={magic:"\x00\x00",compress:function(b){return b},uncompress:function(b){return b},compressInputType:null,uncompressInputType:null};d.DEFLATE=b("./flate")},{"./flate":6}],4:[function(b,c,d){function e(b){this.data=null;this.index=this.length=0}var f=b("./utils");e.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<b||0>b)throw Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?");},setIndex:function(b){this.checkIndex(b);
this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(b){},readInt:function(b){var c=0,d;this.checkOffset(b);for(d=this.index+b-1;d>=this.index;d--)c=(c<<8)+this.byteAt(d);this.index+=b;return c},readString:function(b){return f.transformTo("string",this.readData(b))},readData:function(b){},lastIndexOfSignature:function(b){},readDate:function(){var b=this.readInt(4);return new Date((b>>25&127)+1980,(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(b&31)<<1)}};c.exports=e},{"./utils":14}],
5:[function(b,c,d){d.base64=!1;d.binary=!1;d.dir=!1;d.date=null;d.compression=null},{}],6:[function(b,c,d){c="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;var e=b("pako");d.uncompressInputType=c?"uint8array":"array";d.compressInputType=c?"uint8array":"array";d.magic="\b\x00";d.compress=function(b){return e.deflateRaw(b)};d.uncompress=function(b){return e.inflateRaw(b)}},{pako:19}],7:[function(b,c,d){function e(b,c){if(!(this instanceof e))return new e(b,
c);this.files={};this.root="";b&&this.load(b,c);this.clone=function(){var b=new e,c;for(c in this)"function"!==typeof this[c]&&(b[c]=this[c]);return b}}e.prototype.files=void 0;e.prototype.remove=void 0;e.prototype=b("./object");e.prototype.load=b("./load");e.support=b("./support");e.defaults=b("./defaults");e.utils=b("./utils");e.base64=b("./base64");e.compressions=b("./compressions");c.exports=e},{"./base64":1,"./compressions":3,"./defaults":5,"./load":8,"./object":9,"./support":12,"./utils":14}],
8:[function(b,c,d){var e=b("./base64"),f=b("./zipEntries");c.exports=function(b,c){var d,l,m;c=c||{};c.base64&&(b=e.decode(b));d=(new f(b,c)).files;for(l=0;l<d.length;l++)m=d[l],this.file(m.fileName,m.decompressed,{binary:!0,optimizedBinaryString:!0,date:m.date,dir:m.dir});return this}},{"./base64":1,"./zipEntries":15}],9:[function(b,c,d){var e=b("./support"),f=b("./utils"),g=b("./signature"),h=b("./defaults"),k=b("./base64"),l=b("./compressions"),m=b("./compressedObject"),n=b("./nodeBuffer"),p,q;
e.uint8array&&"function"===typeof TextEncoder&&"function"===typeof TextDecoder&&(p=new TextEncoder("utf-8"),q=new TextDecoder("utf-8"));var u=function(b){if(b._data instanceof m&&(b._data=b._data.getContent(),b.options.binary=!0,b.options.base64=!1,"uint8array"===f.getTypeOf(b._data))){var c=b._data;b._data=new Uint8Array(c.length);0!==c.length&&b._data.set(c,0)}return b._data},t=function(b){var c=u(b);if("string"===f.getTypeOf(c)){if(!b.options.binary){if(p)return p.encode(c);if(e.nodebuffer)return n(c,
"utf-8")}return b.asBinary()}return c},C=function(b){var c=u(this);if(null===c||"undefined"===typeof c)return"";this.options.base64&&(c=k.decode(c));c=b&&this.options.binary?w.utf8decode(c):f.transformTo("string",c);b||this.options.binary||(c=w.utf8encode(c));return c},B=function(b,c,d){this.name=b;this._data=c;this.options=d};B.prototype={asText:function(){return C.call(this,!0)},asBinary:function(){return C.call(this,!1)},asNodeBuffer:function(){var b=t(this);return f.transformTo("nodebuffer",b)},
asUint8Array:function(){var b=t(this);return f.transformTo("uint8array",b)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var y=function(b,c){var d="",e;for(e=0;e<c;e++)d+=String.fromCharCode(b&255),b>>>=8;return d},D=function(){var b={},c,d;for(c=0;c<arguments.length;c++)for(d in arguments[c])arguments[c].hasOwnProperty(d)&&"undefined"===typeof b[d]&&(b[d]=arguments[c][d]);return b},A=function(b,c,d){var e,g=b;"/"==g.slice(-1)&&(g=g.substring(0,g.length-1));e=g.lastIndexOf("/");e=
0<e?g.substring(0,e):"";g=f.getTypeOf(c);e&&F.call(this,e);d=d||{};!0!==d.base64||null!==d.binary&&void 0!==d.binary||(d.binary=!0);d=D(d,h);d.date=d.date||new Date;null!==d.compression&&(d.compression=d.compression.toUpperCase());if(d.dir||null===c||"undefined"===typeof c)d.base64=!1,d.binary=!1,c=null;else if("string"===g)d.binary&&!d.base64&&!0!==d.optimizedBinaryString&&(c=f.string2binary(c));else{d.base64=!1;d.binary=!0;if(!(g||c instanceof m))throw Error("The data of '"+b+"' is in an unsupported format !");
"arraybuffer"===g&&(c=f.transformTo("uint8array",c))}c=new B(b,c,d);return this.files[b]=c},F=function(b){"/"!=b.slice(-1)&&(b+="/");this.files[b]||A.call(this,b,null,{dir:!0});return this.files[b]},I=function(){this.data=[]};I.prototype={append:function(b){b=f.transformTo("string",b);this.data.push(b)},finalize:function(){return this.data.join("")}};var G=function(b){this.data=new Uint8Array(b);this.index=0};G.prototype={append:function(b){0!==b.length&&(b=f.transformTo("uint8array",b),this.data.set(b,
this.index),this.index+=b.length)},finalize:function(){return this.data}};var w={load:function(b,c){throw Error("Load method is not defined. Is the file jszip-load.js included ?");},filter:function(b){var c=[],d,e,f;for(d in this.files)this.files.hasOwnProperty(d)&&(e=this.files[d],f=new B(e.name,e._data,D(e.options)),e=d.slice(this.root.length,d.length),d.slice(0,this.root.length)===this.root&&b(e,f)&&c.push(f));return c},file:function(b,c,d){if(1===arguments.length){if(f.isRegExp(b)){var e=b;return this.filter(function(b,
c){return!c.options.dir&&e.test(b)})}return this.filter(function(c,d){return!d.options.dir&&c===b})[0]||null}b=this.root+b;A.call(this,b,c,d);return this},folder:function(b){if(!b)return this;if(f.isRegExp(b))return this.filter(function(c,d){return d.options.dir&&b.test(c)});var c=F.call(this,this.root+b),d=this.clone();d.root=c.name;return d},remove:function(b){b=this.root+b;var c=this.files[b];c||("/"!=b.slice(-1)&&(b+="/"),c=this.files[b]);if(c)if(c.options.dir)for(var c=this.filter(function(c,
d){return d.name.slice(0,b.length)===b}),d=0;d<c.length;d++)delete this.files[c[d].name];else delete this.files[b];return this},generate:function(b){b=D(b||{},{base64:!0,compression:"STORE",type:"base64"});f.checkSupport(b.type);var c=[],d=0,e=0,h;for(h in this.files)if(this.files.hasOwnProperty(h)){var n=this.files[h],p=n.options.compression||b.compression.toUpperCase(),A=l[p];if(!A)throw Error(p+" is not a valid compression method !");var p=n,q=new m,u=void 0;if(p._data instanceof m)q.uncompressedSize=
p._data.uncompressedSize,q.crc32=p._data.crc32,0===q.uncompressedSize||p.options.dir?(A=l.STORE,q.compressedContent="",q.crc32=0):p._data.compressionMethod===A.magic?q.compressedContent=p._data.getCompressedContent():(u=p._data.getContent(),q.compressedContent=A.compress(f.transformTo(A.compressInputType,u)));else{u=t(p);if(!u||0===u.length||p.options.dir)A=l.STORE,u="";q.uncompressedSize=u.length;q.crc32=this.crc32(u);q.compressedContent=A.compress(f.transformTo(A.compressInputType,u))}q.compressedSize=
q.compressedContent.length;q.compressionMethod=A.magic;var p=q,A=n,n=p,q=d,u=this.utf8encode(A.name),F=u!==A.name,w=A.options,S=void 0,O=void 0,B="",C="",S=w.date.getHours(),S=S<<6,S=S|w.date.getMinutes(),S=S<<5,S=S|w.date.getSeconds()/2,O=w.date.getFullYear()-1980,O=O<<4,O=O|w.date.getMonth()+1,O=O<<5,O=O|w.date.getDate();F&&(C=y(1,1)+y(this.crc32(u),4)+u,B+="up"+y(C.length,2)+C);w="";w+="\n\x00";w+=F?"\x00\b":"\x00\x00";w+=n.compressionMethod;w+=y(S,2);w+=y(O,2);w+=y(n.crc32,4);w+=y(n.compressedSize,
4);w+=y(n.uncompressedSize,4);w+=y(u.length,2);w+=y(B.length,2);F=g.LOCAL_FILE_HEADER+w+u+B;A=g.CENTRAL_FILE_HEADER+"\u0014\x00"+w+"\x00\x00\x00\x00\x00\x00"+(!0===A.options.dir?"\u0010\x00\x00\x00":"\x00\x00\x00\x00")+y(q,4)+u+B;n={fileRecord:F,dirRecord:A,compressedObject:n};d+=n.fileRecord.length+p.compressedSize;e+=n.dirRecord.length;c.push(n)}h="";h=g.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+y(c.length,2)+y(c.length,2)+y(e,4)+y(d,4)+"\x00\x00";p=b.type.toLowerCase();d="uint8array"===p||"arraybuffer"===
p||"blob"===p||"nodebuffer"===p?new G(d+e+h.length):new I(d+e+h.length);for(e=0;e<c.length;e++)d.append(c[e].fileRecord),d.append(c[e].compressedObject.compressedContent);for(e=0;e<c.length;e++)d.append(c[e].dirRecord);d.append(h);c=d.finalize();switch(b.type.toLowerCase()){case "uint8array":case "arraybuffer":case "nodebuffer":return f.transformTo(b.type.toLowerCase(),c);case "blob":return f.arrayBuffer2Blob(f.transformTo("arraybuffer",c));case "base64":return b.base64?k.encode(c):c;default:return c}},
crc32:function(b,c){if("undefined"===typeof b||!b.length)return 0;var d="string"!==f.getTypeOf(b),e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,
3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,
453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,
3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,
1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,
1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"==typeof c&&(c=0);var g=0,g=g=0;c^=-1;for(var h=0,k=b.length;h<k;h++)g=d?b[h]:b.charCodeAt(h),g=(c^g)&255,g=e[g],c=c>>>8^g;return c^-1},utf8encode:function(b){if(p)return b=
p.encode(b),f.transformTo("string",b);if(e.nodebuffer)return f.transformTo("string",n(b,"utf-8"));for(var c=[],d=0,g=0;g<b.length;g++){var h=b.charCodeAt(g);128>h?c[d++]=String.fromCharCode(h):(127<h&&2048>h?c[d++]=String.fromCharCode(h>>6|192):(c[d++]=String.fromCharCode(h>>12|224),c[d++]=String.fromCharCode(h>>6&63|128)),c[d++]=String.fromCharCode(h&63|128))}return c.join("")},utf8decode:function(b){var c=[],d=0,g="string"!==f.getTypeOf(b),h=0,k=0,l=0,m=0;if(q)return q.decode(f.transformTo("uint8array",
b));if(e.nodebuffer)return f.transformTo("nodebuffer",b).toString("utf-8");for(;h<b.length;)k=g?b[h]:b.charCodeAt(h),128>k?(c[d++]=String.fromCharCode(k),h++):191<k&&224>k?(l=g?b[h+1]:b.charCodeAt(h+1),c[d++]=String.fromCharCode((k&31)<<6|l&63),h+=2):(l=g?b[h+1]:b.charCodeAt(h+1),m=g?b[h+2]:b.charCodeAt(h+2),c[d++]=String.fromCharCode((k&15)<<12|(l&63)<<6|m&63),h+=3);return c.join("")}};c.exports=w},{"./base64":1,"./compressedObject":2,"./compressions":3,"./defaults":5,"./nodeBuffer":17,"./signature":10,
"./support":12,"./utils":14}],10:[function(b,c,d){d.LOCAL_FILE_HEADER="PK\u0003\u0004";d.CENTRAL_FILE_HEADER="PK\u0001\u0002";d.CENTRAL_DIRECTORY_END="PK\u0005\u0006";d.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\u0006\u0007";d.ZIP64_CENTRAL_DIRECTORY_END="PK\u0006\u0006";d.DATA_DESCRIPTOR="PK\u0007\b"},{}],11:[function(b,c,d){function e(b,c){this.data=b;c||(this.data=f.string2binary(this.data));this.length=this.data.length;this.index=0}d=b("./dataReader");var f=b("./utils");e.prototype=new d;e.prototype.byteAt=
function(b){return this.data.charCodeAt(b)};e.prototype.lastIndexOfSignature=function(b){return this.data.lastIndexOf(b)};e.prototype.readData=function(b){this.checkOffset(b);var c=this.data.slice(this.index,this.index+b);this.index+=b;return c};c.exports=e},{"./dataReader":4,"./utils":14}],12:[function(b,c,d){b=b("__browserify_process");"use strict";d.base64=!0;d.array=!0;d.string=!0;d.arraybuffer="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array;d.nodebuffer=!b.browser;d.uint8array=
"undefined"!==typeof Uint8Array;if("undefined"===typeof ArrayBuffer)d.blob=!1;else{b=new ArrayBuffer(0);try{d.blob=0===(new Blob([b],{type:"application/zip"})).size}catch(e){try{var f=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);f.append(b);d.blob=0===f.getBlob("application/zip").size}catch(g){d.blob=!1}}}},{__browserify_process:18}],13:[function(b,c,d){function e(b){b&&(this.data=b,this.length=this.data.length,this.index=0)}b=b("./dataReader");e.prototype=
new b;e.prototype.byteAt=function(b){return this.data[b]};e.prototype.lastIndexOfSignature=function(b){var c=b.charCodeAt(0),d=b.charCodeAt(1),e=b.charCodeAt(2);b=b.charCodeAt(3);for(var l=this.length-4;0<=l;--l)if(this.data[l]===c&&this.data[l+1]===d&&this.data[l+2]===e&&this.data[l+3]===b)return l;return-1};e.prototype.readData=function(b){this.checkOffset(b);var c=this.data.subarray(this.index,this.index+b);this.index+=b;return c};c.exports=e},{"./dataReader":4}],14:[function(b,c,d){function e(b){return b}
function f(b,c){for(var d=0;d<b.length;++d)c[d]=b.charCodeAt(d)&255;return c}function g(b){var c=65536,e=[],f=b.length,g=d.getTypeOf(b),h=0,k=!0;try{switch(g){case "uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case "nodebuffer":String.fromCharCode.apply(null,m(0))}}catch(l){k=!1}if(!k){c="";for(e=0;e<b.length;e++)c+=String.fromCharCode(b[e]);return c}for(;h<f&&1<c;)try{"array"===g||"nodebuffer"===g?e.push(String.fromCharCode.apply(null,b.slice(h,Math.min(h+c,f)))):e.push(String.fromCharCode.apply(null,
b.subarray(h,Math.min(h+c,f)))),h+=c}catch(n){c=Math.floor(c/2)}return e.join("")}function h(b,c){for(var d=0;d<b.length;d++)c[d]=b[d];return c}var k=b("./support"),l=b("./compressions"),m=b("./nodeBuffer");d.string2binary=function(b){for(var c="",d=0;d<b.length;d++)c+=String.fromCharCode(b.charCodeAt(d)&255);return c};d.string2Uint8Array=function(b){return d.transformTo("uint8array",b)};d.uint8Array2String=function(b){return d.transformTo("string",b)};d.string2Blob=function(b){b=d.transformTo("arraybuffer",
b);return d.arrayBuffer2Blob(b)};d.arrayBuffer2Blob=function(b){d.checkSupport("blob");try{return new Blob([b],{type:"application/zip"})}catch(c){try{var e=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);e.append(b);return e.getBlob("application/zip")}catch(f){throw Error("Bug : can't construct the Blob.");}}};var n={};n.string={string:e,array:function(b){return f(b,Array(b.length))},arraybuffer:function(b){return n.string.uint8array(b).buffer},uint8array:function(b){return f(b,
new Uint8Array(b.length))},nodebuffer:function(b){return f(b,m(b.length))}};n.array={string:g,array:e,arraybuffer:function(b){return(new Uint8Array(b)).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return m(b)}};n.arraybuffer={string:function(b){return g(new Uint8Array(b))},array:function(b){return h(new Uint8Array(b),Array(b.byteLength))},arraybuffer:e,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return m(new Uint8Array(b))}};n.uint8array=
{string:g,array:function(b){return h(b,Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:e,nodebuffer:function(b){return m(b)}};n.nodebuffer={string:g,array:function(b){return h(b,Array(b.length))},arraybuffer:function(b){return n.nodebuffer.uint8array(b).buffer},uint8array:function(b){return h(b,new Uint8Array(b.length))},nodebuffer:e};d.transformTo=function(b,c){c||(c="");if(!b)return c;d.checkSupport(b);var e=d.getTypeOf(c);return n[e][b](c)};d.getTypeOf=function(b){if("string"===
typeof b)return"string";if("[object Array]"===Object.prototype.toString.call(b))return"array";if(k.nodebuffer&&m.test(b))return"nodebuffer";if(k.uint8array&&b instanceof Uint8Array)return"uint8array";if(k.arraybuffer&&b instanceof ArrayBuffer)return"arraybuffer"};d.checkSupport=function(b){if(!k[b.toLowerCase()])throw Error(b+" is not supported by this browser");};d.MAX_VALUE_16BITS=65535;d.MAX_VALUE_32BITS=-1;d.pretty=function(b){var c="",d,e;for(e=0;e<(b||"").length;e++)d=b.charCodeAt(e),c+="\\x"+
(16>d?"0":"")+d.toString(16).toUpperCase();return c};d.findCompression=function(b){for(var c in l)if(l.hasOwnProperty(c)&&l[c].magic===b)return l[c];return null};d.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)}},{"./compressions":3,"./nodeBuffer":17,"./support":12}],15:[function(b,c,d){function e(b,c){this.files=[];this.loadOptions=c;b&&this.load(b)}var f=b("./stringReader"),g=b("./nodeBufferReader"),h=b("./uint8ArrayReader"),k=b("./utils"),l=b("./signature"),m=
b("./zipEntry"),n=b("./support");e.prototype={checkSignature:function(b){var c=this.reader.readString(4);if(c!==b)throw Error("Corrupted zip or bug : unexpected signature ("+k.pretty(c)+", expected "+k.pretty(b)+")");},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=
this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);this.zipComment=this.reader.readString(this.zipCommentLength)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.versionMadeBy=this.reader.readString(2);this.versionNeeded=this.reader.readInt(2);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=
this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};for(var b=this.zip64EndOfCentralSize-44,c,d,e;0<b;)c=this.reader.readInt(2),d=this.reader.readInt(4),e=this.reader.readString(d),this.zip64ExtensibleData[c]={id:c,length:d,value:e}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(1<this.disksCount)throw Error("Multi-volumes zip are not supported");
},readLocalFiles:function(){var b,c;for(b=0;b<this.files.length;b++)c=this.files[b],this.reader.setIndex(c.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),c.readLocalPart(this.reader),c.handleUTF8()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)b=new m({zip64:this.zip64},this.loadOptions),b.readCentralPart(this.reader),this.files.push(b)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);
if(-1===b)throw Error("Corrupted zip : can't find end of central directory");this.reader.setIndex(b);this.checkSignature(l.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===k.MAX_VALUE_16BITS||this.diskWithCentralDirStart===k.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===k.MAX_VALUE_16BITS||this.centralDirRecords===k.MAX_VALUE_16BITS||this.centralDirSize===k.MAX_VALUE_32BITS||this.centralDirOffset===k.MAX_VALUE_32BITS){this.zip64=!0;b=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR);
if(-1===b)throw Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(b);this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}},prepareReader:function(b){var c=k.getTypeOf(b);this.reader="string"!==c||n.uint8array?"nodebuffer"===c?new g(b):new h(k.transformTo("uint8array",
b)):new f(b,this.loadOptions.optimizedBinaryString)},load:function(b){this.prepareReader(b);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};c.exports=e},{"./nodeBufferReader":17,"./signature":10,"./stringReader":11,"./support":12,"./uint8ArrayReader":13,"./utils":14,"./zipEntry":16}],16:[function(b,c,d){function e(b,c){this.options=b;this.loadOptions=c}var f=b("./stringReader"),g=b("./utils"),h=b("./compressedObject"),k=b("./object");e.prototype={isEncrypted:function(){return 1===
(this.bitFlag&1)},useUTF8:function(){return 2048===(this.bitFlag&2048)},prepareCompressedContent:function(b,c,d){return function(){var e=b.index;b.setIndex(c);var f=b.readData(d);b.setIndex(e);return f}},prepareContent:function(b,c,d,e,f){return function(){var b=g.transformTo(e.uncompressInputType,this.getCompressedContent()),b=e.uncompress(b);if(b.length!==f)throw Error("Bug : uncompressed data size mismatch");return b}},readLocalPart:function(b){var c;b.skip(22);this.fileNameLength=b.readInt(2);
c=b.readInt(2);this.fileName=b.readString(this.fileNameLength);b.skip(c);if(-1==this.compressedSize||-1==this.uncompressedSize)throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");c=g.findCompression(this.compressionMethod);if(null===c)throw Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");this.decompressed=new h;this.decompressed.compressedSize=
this.compressedSize;this.decompressed.uncompressedSize=this.uncompressedSize;this.decompressed.crc32=this.crc32;this.decompressed.compressionMethod=this.compressionMethod;this.decompressed.getCompressedContent=this.prepareCompressedContent(b,b.index,this.compressedSize,c);this.decompressed.getContent=this.prepareContent(b,b.index,this.compressedSize,c,this.uncompressedSize);if(this.loadOptions.checkCRC32&&(this.decompressed=g.transformTo("string",this.decompressed.getContent()),k.crc32(this.decompressed)!==
this.crc32))throw Error("Corrupted zip : CRC32 mismatch");},readCentralPart:function(b){this.versionMadeBy=b.readString(2);this.versionNeeded=b.readInt(2);this.bitFlag=b.readInt(2);this.compressionMethod=b.readString(2);this.date=b.readDate();this.crc32=b.readInt(4);this.compressedSize=b.readInt(4);this.uncompressedSize=b.readInt(4);this.fileNameLength=b.readInt(2);this.extraFieldsLength=b.readInt(2);this.fileCommentLength=b.readInt(2);this.diskNumberStart=b.readInt(2);this.internalFileAttributes=
b.readInt(2);this.externalFileAttributes=b.readInt(4);this.localHeaderOffset=b.readInt(4);if(this.isEncrypted())throw Error("Encrypted zip are not supported");this.fileName=b.readString(this.fileNameLength);this.readExtraFields(b);this.parseZIP64ExtraField(b);this.fileComment=b.readString(this.fileCommentLength);this.dir=this.externalFileAttributes&16?!0:!1},parseZIP64ExtraField:function(b){this.extraFields[1]&&(b=new f(this.extraFields[1].value),this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=
b.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4)))},readExtraFields:function(b){var c=b.index,d,e,f;for(this.extraFields=this.extraFields||{};b.index<c+this.extraFieldsLength;)d=b.readInt(2),e=b.readInt(2),f=b.readString(e),this.extraFields[d]={id:d,length:e,value:f}},handleUTF8:function(){if(this.useUTF8())this.fileName=
k.utf8decode(this.fileName),this.fileComment=k.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();null!==b&&(this.fileName=b)}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var c=new f(b.value);return 1!==c.readInt(1)||k.crc32(this.fileName)!==c.readInt(4)?null:k.utf8decode(c.readString(b.length-5))}return null}};c.exports=e},{"./compressedObject":2,"./object":9,"./stringReader":11,"./utils":14}],17:[function(b,c,d){},{}],18:[function(b,c,d){b=c.exports=
{};b.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(b){return window.setImmediate(b)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var b=[];window.addEventListener("message",function(c){var d=c.source;d!==window&&null!==d||"process-tick"!==c.data||(c.stopPropagation(),0<b.length&&b.shift()())},!0);return function(c){b.push(c);window.postMessage("process-tick","*")}}return function(b){setTimeout(b,0)}}();b.title="browser";b.browser=
!0;b.env={};b.argv=[];b.binding=function(b){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(b){throw Error("process.chdir is not supported");}},{}],19:[function(b,c,d){d=b("./lib/utils/common").assign;var e=b("./lib/deflate"),f=b("./lib/inflate");b=b("./lib/zlib/constants");var g={};d(g,e,f,b);c.exports=g},{"./lib/deflate":20,"./lib/inflate":21,"./lib/utils/common":22,"./lib/zlib/constants":25}],20:[function(b,c,d){function e(b,c){var d=new m(c);d.push(b,
!0);if(d.err)throw d.msg;return d.result}var f=b("./zlib/deflate.js"),g=b("./utils/common"),h=b("./utils/strings"),k=b("./zlib/messages"),l=b("./zlib/zstream"),m=function(b){b=this.options=g.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},b||{});b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&16>b.windowBits&&(b.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new l;this.strm.avail_out=0;var c=f.deflateInit2(this.strm,
b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(0!==c)throw Error(k[c]);b.header&&f.deflateSetHeader(this.strm,b.header)};m.prototype.push=function(b,c){var d=this.strm,e=this.options.chunkSize,k,l;if(this.ended)return!1;l=c===~~c?c:!0===c?4:0;d.input="string"===typeof b?h.string2buf(b):b;d.next_in=0;d.avail_in=d.input.length;do{0===d.avail_out&&(d.output=new g.Buf8(e),d.next_out=0,d.avail_out=e);k=f.deflate(d,l);if(1!==k&&0!==k)return this.onEnd(k),this.ended=!0,!1;if(0===d.avail_out||0===
d.avail_in&&4===l)if("string"===this.options.to)this.onData(h.buf2binstring(g.shrinkBuf(d.output,d.next_out)));else this.onData(g.shrinkBuf(d.output,d.next_out))}while((0<d.avail_in||0===d.avail_out)&&1!==k);return 4===l?(k=f.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,0===k):!0};m.prototype.onData=function(b){this.chunks.push(b)};m.prototype.onEnd=function(b){0===b&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=
this.strm.msg};d.Deflate=m;d.deflate=e;d.deflateRaw=function(b,c){c=c||{};c.raw=!0;return e(b,c)};d.gzip=function(b,c){c=c||{};c.gzip=!0;return e(b,c)}},{"./utils/common":22,"./utils/strings":23,"./zlib/deflate.js":27,"./zlib/messages":32,"./zlib/zstream":34}],21:[function(b,c,d){function e(b,c){var d=new p(c);d.push(b,!0);if(d.err)throw d.msg;return d.result}var f=b("./zlib/inflate.js"),g=b("./utils/common"),h=b("./utils/strings"),k=b("./zlib/constants"),l=b("./zlib/messages"),m=b("./zlib/zstream"),
n=b("./zlib/gzheader"),p=function(b){var c=this.options=g.assign({chunkSize:16384,windowBits:0,to:""},b||{});c.raw&&0<=c.windowBits&&16>c.windowBits&&(c.windowBits=-c.windowBits,0===c.windowBits&&(c.windowBits=-15));!(0<=c.windowBits&&16>c.windowBits)||b&&b.windowBits||(c.windowBits+=32);15<c.windowBits&&48>c.windowBits&&0===(c.windowBits&15)&&(c.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new m;this.strm.avail_out=0;b=f.inflateInit2(this.strm,c.windowBits);if(b!==
k.Z_OK)throw Error(l[b]);this.header=new n;f.inflateGetHeader(this.strm,this.header)};p.prototype.push=function(b,c){var d=this.strm,e=this.options.chunkSize,l,m,n,A,p;if(this.ended)return!1;m=c===~~c?c:!0===c?k.Z_FINISH:k.Z_NO_FLUSH;d.input="string"===typeof b?h.binstring2buf(b):b;d.next_in=0;d.avail_in=d.input.length;do{0===d.avail_out&&(d.output=new g.Buf8(e),d.next_out=0,d.avail_out=e);l=f.inflate(d,k.Z_NO_FLUSH);if(l!==k.Z_STREAM_END&&l!==k.Z_OK)return this.onEnd(l),this.ended=!0,!1;if(d.next_out&&
(0===d.avail_out||l===k.Z_STREAM_END||0===d.avail_in&&m===k.Z_FINISH))if("string"===this.options.to)n=h.utf8border(d.output,d.next_out),A=d.next_out-n,p=h.buf2string(d.output,n),d.next_out=A,d.avail_out=e-A,A&&g.arraySet(d.output,d.output,n,A,0),this.onData(p);else this.onData(g.shrinkBuf(d.output,d.next_out))}while((0<d.avail_in||0===d.avail_out)&&l!==k.Z_STREAM_END);l===k.Z_STREAM_END&&(m=k.Z_FINISH);return m===k.Z_FINISH?(l=f.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===k.Z_OK):!0};p.prototype.onData=
function(b){this.chunks.push(b)};p.prototype.onEnd=function(b){b===k.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};d.Inflate=p;d.inflate=e;d.inflateRaw=function(b,c){c=c||{};c.raw=!0;return e(b,c)};d.ungzip=e},{"./utils/common":22,"./utils/strings":23,"./zlib/constants":25,"./zlib/gzheader":28,"./zlib/inflate.js":30,"./zlib/messages":32,"./zlib/zstream":34}],22:[function(b,c,d){b="undefined"!==typeof Uint8Array&&
"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(b){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!==typeof d)throw new TypeError(d+"must be non-object");for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}}return b};d.shrinkBuf=function(b,c){if(b.length===c)return b;if(b.subarray)return b.subarray(0,c);b.length=c;return b};var e={arraySet:function(b,c,d,e,f){if(c.subarray&&b.subarray)b.set(c.subarray(d,d+e),f);else for(var n=
0;n<e;n++)b[f+n]=c[d+n]},flattenChunks:function(b){var c,d,e,f,n;c=e=0;for(d=b.length;c<d;c++)e+=b[c].length;n=new Uint8Array(e);c=e=0;for(d=b.length;c<d;c++)f=b[c],n.set(f,e),e+=f.length;return n}},f={arraySet:function(b,c,d,e,f){for(var n=0;n<e;n++)b[f+n]=c[d+n]},flattenChunks:function(b){return[].concat.apply([],b)}};d.setTyped=function(b){b?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,e)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,f))};d.setTyped(b)},{}],23:[function(b,
c,d){var e=b("./common"),f=!0;try{String.fromCharCode.apply(null,[0])}catch(g){f=!1}var h=new e.Buf8(256);for(b=0;256>b;b++)h[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;h[254]=h[254]=1;d.string2buf=function(b){var c,d,f,g,h,u=b.length,t=0;for(g=0;g<u;g++)d=b.charCodeAt(g),55296===(d&64512)&&g+1<u&&(f=b.charCodeAt(g+1),56320===(f&64512)&&(d=65536+(d-55296<<10)+(f-56320),g++)),t+=128>d?1:2048>d?2:65536>d?3:4;c=new e.Buf8(t);for(g=h=0;h<t;g++)d=b.charCodeAt(g),55296===(d&64512)&&g+1<u&&(f=b.charCodeAt(g+
1),56320===(f&64512)&&(d=65536+(d-55296<<10)+(f-56320),g++)),128>d?c[h++]=d:(2048>d?c[h++]=192|d>>>6:(65536>d?c[h++]=224|d>>>12:(c[h++]=240|d>>>18,c[h++]=128|d>>>12&63),c[h++]=128|d>>>6&63),c[h++]=128|d&63);return c};d.buf2binstring=function(b){if(f&&65537>b.length)return String.fromCharCode.apply(null,b);for(var c="",d=0,e=b.length;d<e;d++)c+=String.fromCharCode(b[d]);return c};d.binstring2buf=function(b){for(var c=new e.Buf8(b.length),d=0,f=c.length;d<f;d++)c[d]=b.charCodeAt(d);return c};d.buf2string=
function(b,c){var d,g,p,q,u=c||b.length,t=Array(2*u);for(g=p=0;g<u;)if(d=b[g++],128>d)t[p++]=d;else if(q=h[d],4<q)t[p++]=65533,g+=q-1;else{for(d&=2===q?31:3===q?15:7;1<q&&g<u;)d=d<<6|b[g++]&63,q--;1<q?t[p++]=65533:65536>d?t[p++]=d:(d-=65536,t[p++]=55296|d>>10&1023,t[p++]=56320|d&1023)}if(f)return String.fromCharCode.apply(null,e.shrinkBuf(t,p));d="";g=0;for(u=p;g<u;g++)d+=String.fromCharCode(t[g]);return d};d.utf8border=function(b,c){var d;c=c||b.length;c>b.length&&(c=b.length);for(d=c-1;0<=d&&128===
(b[d]&192);)d--;return 0>d||0===d?c:d+h[b[d]]>c?d:c}},{"./common":22}],24:[function(b,c,d){c.exports=function(b,c,d,h){var k=b&65535|0;b=b>>>16&65535|0;for(var l=0;0!==d;){l=2E3<d?2E3:d;d-=l;do k=k+c[h++]|0,b=b+k|0;while(--l);k%=65521;b%=65521}return k|b<<16|0}},{}],25:[function(b,c,d){c.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,
Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],26:[function(b,c,d){var e=function(){for(var b,c=[],d=0;256>d;d++){b=d;for(var e=0;8>e;e++)b=b&1?3988292384^b>>>1:b>>>1;c[d]=b}return c}();c.exports=function(b,c,d,k){d=k+d;for(b^=-1;k<d;k++)b=b>>>8^e[(b^c[k])&255];return b^-1}},{}],27:[function(b,c,d){function e(b,c){b.msg=w[c];return c}function f(b){for(var c=b.length;0<=
--c;)b[c]=0}function g(b){var c=b.state,d=c.pending;d>b.avail_out&&(d=b.avail_out);0!==d&&(A.arraySet(b.output,c.pending_buf,c.pending_out,d,b.next_out),b.next_out+=d,c.pending_out+=d,b.total_out+=d,b.avail_out-=d,c.pending-=d,0===c.pending&&(c.pending_out=0))}function h(b,c){F._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,c);b.block_start=b.strstart;g(b.strm)}function k(b,c){b.pending_buf[b.pending++]=c}function l(b,c){b.pending_buf[b.pending++]=c>>>8&255;b.pending_buf[b.pending++]=
c&255}function m(b,c){var d=b.max_chain_length,e=b.strstart,f,g=b.prev_length,h=b.nice_match,k=b.strstart>b.w_size-262?b.strstart-(b.w_size-262):0,l=b.window,m=b.w_mask,n=b.prev,A=b.strstart+258,p=l[e+g-1],q=l[e+g];b.prev_length>=b.good_match&&(d>>=2);h>b.lookahead&&(h=b.lookahead);do if(f=c,l[f+g]===q&&l[f+g-1]===p&&l[f]===l[e]&&l[++f]===l[e+1]){e+=2;for(f++;l[++e]===l[++f]&&l[++e]===l[++f]&&l[++e]===l[++f]&&l[++e]===l[++f]&&l[++e]===l[++f]&&l[++e]===l[++f]&&l[++e]===l[++f]&&l[++e]===l[++f]&&e<A;);
f=258-(A-e);e=A-258;if(f>g){b.match_start=c;g=f;if(f>=h)break;p=l[e+g-1];q=l[e+g]}}while((c=n[c&m])>k&&0!==--d);return g<=b.lookahead?g:b.lookahead}function n(b){var c=b.w_size,d,e,f,g;do{g=b.window_size-b.lookahead-b.strstart;if(b.strstart>=c+(c-262)){A.arraySet(b.window,b.window,c,c,0);b.match_start-=c;b.strstart-=c;b.block_start-=c;d=e=b.hash_size;do f=b.head[--d],b.head[d]=f>=c?f-c:0;while(--e);d=e=c;do f=b.prev[--d],b.prev[d]=f>=c?f-c:0;while(--e);g+=c}if(0===b.strm.avail_in)break;d=b.strm;e=
b.window;f=b.strstart+b.lookahead;var h=d.avail_in;h>g&&(h=g);0===h?e=0:(d.avail_in-=h,A.arraySet(e,d.input,d.next_in,h,f),1===d.state.wrap?d.adler=I(d.adler,e,h,f):2===d.state.wrap&&(d.adler=G(d.adler,e,h,f)),d.next_in+=h,d.total_in+=h,e=h);b.lookahead+=e;if(3<=b.lookahead+b.insert)for(g=b.strstart-b.insert,b.ins_h=b.window[g],b.ins_h=(b.ins_h<<b.hash_shift^b.window[g+1])&b.hash_mask;b.insert&&!(b.ins_h=(b.ins_h<<b.hash_shift^b.window[g+3-1])&b.hash_mask,b.prev[g&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=
g,g++,b.insert--,3>b.lookahead+b.insert););}while(262>b.lookahead&&0!==b.strm.avail_in)}function p(b,c){for(var d;;){if(262>b.lookahead){n(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);0!==d&&b.strstart-d<=b.w_size-262&&(b.match_length=m(b,d));if(3<=b.match_length)if(d=F._tr_tally(b,b.strstart-b.match_start,b.match_length-
3),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&3<=b.lookahead){b.match_length--;do b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart;while(0!==--b.match_length);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else d=F._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;
if(d&&(h(b,!1),0===b.strm.avail_out))return 1}b.insert=2>b.strstart?b.strstart:2;return 4===c?(h(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(h(b,!1),0===b.strm.avail_out)?1:2}function q(b,c){for(var d,e;;){if(262>b.lookahead){n(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);b.prev_length=b.match_length;b.prev_match=b.match_start;
b.match_length=2;0!==d&&b.prev_length<b.max_lazy_match&&b.strstart-d<=b.w_size-262&&(b.match_length=m(b,d),5>=b.match_length&&(1===b.strategy||3===b.match_length&&4096<b.strstart-b.match_start)&&(b.match_length=2));if(3<=b.prev_length&&b.match_length<=b.prev_length){e=b.strstart+b.lookahead-3;d=F._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-3);b.lookahead-=b.prev_length-1;b.prev_length-=2;do++b.strstart<=e&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&
b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);while(0!==--b.prev_length);b.match_available=0;b.match_length=2;b.strstart++;if(d&&(h(b,!1),0===b.strm.avail_out))return 1}else if(b.match_available){if((d=F._tr_tally(b,0,b.window[b.strstart-1]))&&h(b,!1),b.strstart++,b.lookahead--,0===b.strm.avail_out)return 1}else b.match_available=1,b.strstart++,b.lookahead--}b.match_available&&(F._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0);b.insert=2>b.strstart?b.strstart:2;return 4===c?(h(b,
!0),0===b.strm.avail_out?3:4):b.last_lit&&(h(b,!1),0===b.strm.avail_out)?1:2}function u(b,c){for(var d,e,f,g=b.window;;){if(258>=b.lookahead){n(b);if(258>=b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.match_length=0;if(3<=b.lookahead&&0<b.strstart&&(e=b.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){for(f=b.strstart+258;d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<f;);b.match_length=258-(f-e);b.match_length>b.lookahead&&(b.match_length=
b.lookahead)}3<=b.match_length?(d=F._tr_tally(b,1,b.match_length-3),b.lookahead-=b.match_length,b.strstart+=b.match_length,b.match_length=0):(d=F._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++);if(d&&(h(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(h(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(h(b,!1),0===b.strm.avail_out)?1:2}function t(b,c){for(var d;;){if(0===b.lookahead&&(n(b),0===b.lookahead)){if(0===c)return 1;break}b.match_length=0;d=F._tr_tally(b,0,b.window[b.strstart]);
b.lookahead--;b.strstart++;if(d&&(h(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(h(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(h(b,!1),0===b.strm.avail_out)?1:2}function C(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=
this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new A.Buf16(1146);this.dyn_dtree=new A.Buf16(122);this.bl_tree=new A.Buf16(78);f(this.dyn_ltree);f(this.dyn_dtree);f(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new A.Buf16(16);this.heap=
new A.Buf16(573);f(this.heap);this.heap_max=this.heap_len=0;this.depth=new A.Buf16(573);f(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function B(b){var c;if(!b||!b.state)return e(b,-2);b.total_in=b.total_out=0;b.data_type=2;c=b.state;c.pending=0;c.pending_out=0;0>c.wrap&&(c.wrap=-c.wrap);c.status=c.wrap?42:113;b.adler=2===c.wrap?0:1;c.last_flush=0;F._tr_init(c);return 0}function y(b){var c=B(b);
0===c&&(b=b.state,b.window_size=2*b.w_size,f(b.head),b.max_lazy_match=E[b.level].max_lazy,b.good_match=E[b.level].good_length,b.nice_match=E[b.level].nice_length,b.max_chain_length=E[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=2,b.match_available=0,b.ins_h=0);return c}function D(b,c,d,f,g,h){if(!b)return-2;var k=1;-1===c&&(c=6);0>f?(k=0,f=-f):15<f&&(k=2,f-=16);if(1>g||9<g||8!==d||8>f||15<f||0>c||9<c||0>h||4<h)return e(b,-2);8===f&&(f=9);var l=
new C;b.state=l;l.strm=b;l.wrap=k;l.gzhead=null;l.w_bits=f;l.w_size=1<<l.w_bits;l.w_mask=l.w_size-1;l.hash_bits=g+7;l.hash_size=1<<l.hash_bits;l.hash_mask=l.hash_size-1;l.hash_shift=~~((l.hash_bits+3-1)/3);l.window=new A.Buf8(2*l.w_size);l.head=new A.Buf16(l.hash_size);l.prev=new A.Buf16(l.w_size);l.lit_bufsize=1<<g+6;l.pending_buf_size=4*l.lit_bufsize;l.pending_buf=new A.Buf8(l.pending_buf_size);l.d_buf=l.lit_bufsize>>1;l.l_buf=3*l.lit_bufsize;l.level=c;l.strategy=h;l.method=d;return y(b)}var A=
b("../utils/common"),F=b("./trees"),I=b("./adler32"),G=b("./crc32"),w=b("./messages");b=function(b,c,d,e,f){this.good_length=b;this.max_lazy=c;this.nice_length=d;this.max_chain=e;this.func=f};var E;E=[new b(0,0,0,0,function(b,c){var d=65535;for(d>b.pending_buf_size-5&&(d=b.pending_buf_size-5);;){if(1>=b.lookahead){n(b);if(0===b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.strstart+=b.lookahead;b.lookahead=0;var e=b.block_start+d;if(0===b.strstart||b.strstart>=e)if(b.lookahead=b.strstart-e,
b.strstart=e,h(b,!1),0===b.strm.avail_out)return 1;if(b.strstart-b.block_start>=b.w_size-262&&(h(b,!1),0===b.strm.avail_out))return 1}b.insert=0;if(4===c)return h(b,!0),0===b.strm.avail_out?3:4;b.strstart>b.block_start&&h(b,!1);return 1}),new b(4,4,8,4,p),new b(4,5,16,8,p),new b(4,6,32,32,p),new b(4,4,16,16,q),new b(8,16,32,32,q),new b(8,16,128,128,q),new b(8,32,128,256,q),new b(32,128,258,1024,q),new b(32,258,258,4096,q)];d.deflateInit=function(b,c){return D(b,c,8,15,8,0)};d.deflateInit2=D;d.deflateReset=
y;d.deflateResetKeep=B;d.deflateSetHeader=function(b,c){if(!b||!b.state||2!==b.state.wrap)return-2;b.state.gzhead=c;return 0};d.deflate=function(b,c){var d,h,m,n;if(!b||!b.state||5<c||0>c)return b?e(b,-2):-2;h=b.state;if(!b.output||!b.input&&0!==b.avail_in||666===h.status&&4!==c)return e(b,0===b.avail_out?-5:-2);h.strm=b;d=h.last_flush;h.last_flush=c;42===h.status&&(2===h.wrap?(b.adler=0,k(h,31),k(h,139),k(h,8),h.gzhead?(k(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?
8:0)+(h.gzhead.comment?16:0)),k(h,h.gzhead.time&255),k(h,h.gzhead.time>>8&255),k(h,h.gzhead.time>>16&255),k(h,h.gzhead.time>>24&255),k(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),k(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(k(h,h.gzhead.extra.length&255),k(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(b.adler=G(b.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=69):(k(h,0),k(h,0),k(h,0),k(h,0),k(h,0),k(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),k(h,3),h.status=113)):
(m=8+(h.w_bits-8<<4)<<8,n=-1,n=2<=h.strategy||2>h.level?0:6>h.level?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=32),h.status=113,l(h,m+(31-m%31)),0!==h.strstart&&(l(h,b.adler>>>16),l(h,b.adler&65535)),b.adler=1));if(69===h.status)if(h.gzhead.extra){for(m=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>m&&(b.adler=G(b.adler,h.pending_buf,h.pending-m,m)),g(b),m=h.pending,h.pending!==h.pending_buf_size));)k(h,h.gzhead.extra[h.gzindex]&255),
h.gzindex++;h.gzhead.hcrc&&h.pending>m&&(b.adler=G(b.adler,h.pending_buf,h.pending-m,m));h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=73)}else h.status=73;if(73===h.status)if(h.gzhead.name){m=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>m&&(b.adler=G(b.adler,h.pending_buf,h.pending-m,m)),g(b),m=h.pending,h.pending===h.pending_buf_size)){n=1;break}n=h.gzindex<h.gzhead.name.length?h.gzhead.name.charCodeAt(h.gzindex++)&255:0;k(h,n)}while(0!==n);h.gzhead.hcrc&&
h.pending>m&&(b.adler=G(b.adler,h.pending_buf,h.pending-m,m));0===n&&(h.gzindex=0,h.status=91)}else h.status=91;if(91===h.status)if(h.gzhead.comment){m=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>m&&(b.adler=G(b.adler,h.pending_buf,h.pending-m,m)),g(b),m=h.pending,h.pending===h.pending_buf_size)){n=1;break}n=h.gzindex<h.gzhead.comment.length?h.gzhead.comment.charCodeAt(h.gzindex++)&255:0;k(h,n)}while(0!==n);h.gzhead.hcrc&&h.pending>m&&(b.adler=G(b.adler,h.pending_buf,
h.pending-m,m));0===n&&(h.status=103)}else h.status=103;103===h.status&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(b),h.pending+2<=h.pending_buf_size&&(k(h,b.adler&255),k(h,b.adler>>8&255),b.adler=0,h.status=113)):h.status=113);if(0!==h.pending){if(g(b),0===b.avail_out)return h.last_flush=-1,0}else if(0===b.avail_in&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return e(b,-5);if(666===h.status&&0!==b.avail_in)return e(b,-5);if(0!==b.avail_in||0!==h.lookahead||0!==c&&666!==h.status){d=2===h.strategy?
t(h,c):3===h.strategy?u(h,c):E[h.level].func(h,c);if(3===d||4===d)h.status=666;if(1===d||3===d)return 0===b.avail_out&&(h.last_flush=-1),0;if(2===d&&(1===c?F._tr_align(h):5!==c&&(F._tr_stored_block(h,0,0,!1),3===c&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(b),0===b.avail_out))return h.last_flush=-1,0}if(4!==c)return 0;if(0>=h.wrap)return 1;2===h.wrap?(k(h,b.adler&255),k(h,b.adler>>8&255),k(h,b.adler>>16&255),k(h,b.adler>>24&255),k(h,b.total_in&255),k(h,b.total_in>>
8&255),k(h,b.total_in>>16&255),k(h,b.total_in>>24&255)):(l(h,b.adler>>>16),l(h,b.adler&65535));g(b);0<h.wrap&&(h.wrap=-h.wrap);return 0!==h.pending?0:1};d.deflateEnd=function(b){var c;if(!b||!b.state)return-2;c=b.state.status;if(42!==c&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c)return e(b,-2);b.state=null;return 113===c?e(b,-3):0};d.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./messages":32,"./trees":33}],28:[function(b,c,d){c.exports=
function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],29:[function(b,c,d){c.exports=function(b,c){var d,h,k,l,m,n,p,q,u,t,C,B,y,D,A,F,I,G,w,E,z,r,s,H;d=b.state;h=b.next_in;s=b.input;k=h+(b.avail_in-5);l=b.next_out;H=b.output;m=l-(c-b.avail_out);n=l+(b.avail_out-257);p=d.dmax;q=d.wsize;u=d.whave;t=d.wnext;C=d.window;B=d.hold;y=d.bits;D=d.lencode;A=d.distcode;F=(1<<d.lenbits)-1;I=(1<<d.distbits)-1;a:do b:for(15>
y&&(B+=s[h++]<<y,y+=8,B+=s[h++]<<y,y+=8),G=D[B&F];;){w=G>>>24;B>>>=w;y-=w;w=G>>>16&255;if(0===w)H[l++]=G&65535;else if(w&16){E=G&65535;if(w&=15)y<w&&(B+=s[h++]<<y,y+=8),E+=B&(1<<w)-1,B>>>=w,y-=w;15>y&&(B+=s[h++]<<y,y+=8,B+=s[h++]<<y,y+=8);G=A[B&I];c:for(;;){w=G>>>24;B>>>=w;y-=w;w=G>>>16&255;if(w&16){G&=65535;w&=15;y<w&&(B+=s[h++]<<y,y+=8,y<w&&(B+=s[h++]<<y,y+=8));G+=B&(1<<w)-1;if(G>p){b.msg="invalid distance too far back";d.mode=30;break a}B>>>=w;y-=w;w=l-m;if(G>w){w=G-w;if(w>u&&d.sane){b.msg="invalid distance too far back";
d.mode=30;break a}z=0;r=C;if(0===t){if(z+=q-w,w<E){E-=w;do H[l++]=C[z++];while(--w);z=l-G;r=H}}else if(t<w){if(z+=q+t-w,w-=t,w<E){E-=w;do H[l++]=C[z++];while(--w);z=0;if(t<E){w=t;E-=w;do H[l++]=C[z++];while(--w);z=l-G;r=H}}}else if(z+=t-w,w<E){E-=w;do H[l++]=C[z++];while(--w);z=l-G;r=H}for(;2<E;)H[l++]=r[z++],H[l++]=r[z++],H[l++]=r[z++],E-=3;E&&(H[l++]=r[z++],1<E&&(H[l++]=r[z++]))}else{z=l-G;do H[l++]=H[z++],H[l++]=H[z++],H[l++]=H[z++],E-=3;while(2<E);E&&(H[l++]=H[z++],1<E&&(H[l++]=H[z++]))}}else if(0===
(w&64)){G=A[(G&65535)+(B&(1<<w)-1)];continue c}else{b.msg="invalid distance code";d.mode=30;break a}break}}else if(0===(w&64)){G=D[(G&65535)+(B&(1<<w)-1)];continue b}else{w&32?d.mode=12:(b.msg="invalid literal/length code",d.mode=30);break a}break}while(h<k&&l<n);E=y>>3;h-=E;y-=E<<3;b.next_in=h;b.next_out=l;b.avail_in=h<k?5+(k-h):5-(h-k);b.avail_out=l<n?257+(n-l):257-(l-n);d.hold=B&(1<<y)-1;d.bits=y}},{}],30:[function(b,c,d){function e(b){return(b>>>24&255)+(b>>>8&65280)+((b&65280)<<8)+((b&255)<<
24)}function f(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new m.Buf16(320);this.work=new m.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function g(b){var c;
if(!b||!b.state)return-2;c=b.state;b.total_in=b.total_out=c.total=0;b.msg="";c.wrap&&(b.adler=c.wrap&1);c.mode=1;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=0;c.bits=0;c.lencode=c.lendyn=new m.Buf32(852);c.distcode=c.distdyn=new m.Buf32(592);c.sane=1;c.back=-1;return 0}function h(b){var c;if(!b||!b.state)return-2;c=b.state;c.wsize=0;c.whave=0;c.wnext=0;return g(b)}function k(b,c){var d,e;if(!b||!b.state)return-2;e=b.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;
null!==e.window&&e.wbits!==c&&(e.window=null);e.wrap=d;e.wbits=c;return h(b)}function l(b,c){var d;if(!b)return-2;d=new f;b.state=d;d.window=null;d=k(b,c);0!==d&&(b.state=null);return d}var m=b("../utils/common"),n=b("./adler32"),p=b("./crc32"),q=b("./inffast"),u=b("./inftrees"),t=!0,C,B;d.inflateReset=h;d.inflateReset2=k;d.inflateResetKeep=g;d.inflateInit=function(b){return l(b,15)};d.inflateInit2=l;d.inflate=function(b,c){var d,f,g,h,k,l,z,r,s,H,K,v,J,Q;v=0;var L,M,N,S,O,T=new m.Buf8(4),aa=[16,
17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&0!==b.avail_in)return-2;d=b.state;12===d.mode&&(d.mode=13);k=b.next_out;g=b.output;z=b.avail_out;h=b.next_in;f=b.input;l=b.avail_in;r=d.hold;s=d.bits;H=l;K=z;O=0;a:for(;;)switch(d.mode){case 1:if(0===d.wrap){d.mode=13;break}for(;16>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}if(d.wrap&2&&35615===r){d.check=0;T[0]=r&255;T[1]=r>>>8&255;d.check=p(d.check,T,2,0);s=r=0;d.mode=2;break}d.flags=0;d.head&&(d.head.done=!1);if(!(d.wrap&
1)||(((r&255)<<8)+(r>>8))%31){b.msg="incorrect header check";d.mode=30;break}if(8!==(r&15)){b.msg="unknown compression method";d.mode=30;break}r>>>=4;s-=4;J=(r&15)+8;if(0===d.wbits)d.wbits=J;else if(J>d.wbits){b.msg="invalid window size";d.mode=30;break}d.dmax=1<<J;b.adler=d.check=1;d.mode=r&512?10:12;s=r=0;break;case 2:for(;16>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.flags=r;if(8!==(d.flags&255)){b.msg="unknown compression method";d.mode=30;break}if(d.flags&57344){b.msg="unknown header flags set";
d.mode=30;break}d.head&&(d.head.text=r>>8&1);d.flags&512&&(T[0]=r&255,T[1]=r>>>8&255,d.check=p(d.check,T,2,0));s=r=0;d.mode=3;case 3:for(;32>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.head&&(d.head.time=r);d.flags&512&&(T[0]=r&255,T[1]=r>>>8&255,T[2]=r>>>16&255,T[3]=r>>>24&255,d.check=p(d.check,T,4,0));s=r=0;d.mode=4;case 4:for(;16>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.head&&(d.head.xflags=r&255,d.head.os=r>>8);d.flags&512&&(T[0]=r&255,T[1]=r>>>8&255,d.check=p(d.check,T,2,0));s=r=0;d.mode=
5;case 5:if(d.flags&1024){for(;16>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.length=r;d.head&&(d.head.extra_len=r);d.flags&512&&(T[0]=r&255,T[1]=r>>>8&255,d.check=p(d.check,T,2,0));s=r=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(d.flags&1024&&(v=d.length,v>l&&(v=l),v&&(d.head&&(J=d.head.extra_len-d.length,d.head.extra||(d.head.extra=Array(d.head.extra_len)),m.arraySet(d.head.extra,f,h,v,J)),d.flags&512&&(d.check=p(d.check,f,v,h)),l-=v,h+=v,d.length-=v),d.length))break a;d.length=0;d.mode=
7;case 7:if(d.flags&2048){if(0===l)break a;v=0;do J=f[h+v++],d.head&&J&&65536>d.length&&(d.head.name+=String.fromCharCode(J));while(J&&v<l);d.flags&512&&(d.check=p(d.check,f,v,h));l-=v;h+=v;if(J)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(d.flags&4096){if(0===l)break a;v=0;do J=f[h+v++],d.head&&J&&65536>d.length&&(d.head.comment+=String.fromCharCode(J));while(J&&v<l);d.flags&512&&(d.check=p(d.check,f,v,h));l-=v;h+=v;if(J)break a}else d.head&&(d.head.comment=null);d.mode=
9;case 9:if(d.flags&512){for(;16>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}if(r!==(d.check&65535)){b.msg="header crc mismatch";d.mode=30;break}s=r=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0);b.adler=d.check=0;d.mode=12;break;case 10:for(;32>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}b.adler=d.check=e(r);s=r=0;d.mode=11;case 11:if(0===d.havedict)return b.next_out=k,b.avail_out=z,b.next_in=h,b.avail_in=l,d.hold=r,d.bits=s,2;b.adler=d.check=1;d.mode=12;case 12:if(5===c||6===c)break a;case 13:if(d.last){r>>>=
s&7;s-=s&7;d.mode=27;break}for(;3>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.last=r&1;r>>>=1;s-=1;switch(r&3){case 0:d.mode=14;break;case 1:v=d;if(t){J=void 0;C=new m.Buf32(512);B=new m.Buf32(32);for(J=0;144>J;)v.lens[J++]=8;for(;256>J;)v.lens[J++]=9;for(;280>J;)v.lens[J++]=7;for(;288>J;)v.lens[J++]=8;u(1,v.lens,0,288,C,0,v.work,{bits:9});for(J=0;32>J;)v.lens[J++]=5;u(2,v.lens,0,32,B,0,v.work,{bits:5});t=!1}v.lencode=C;v.lenbits=9;v.distcode=B;v.distbits=5;d.mode=20;if(6===c){r>>>=2;s-=2;break a}break;
case 2:d.mode=17;break;case 3:b.msg="invalid block type",d.mode=30}r>>>=2;s-=2;break;case 14:r>>>=s&7;for(s-=s&7;32>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}if((r&65535)!==(r>>>16^65535)){b.msg="invalid stored block lengths";d.mode=30;break}d.length=r&65535;s=r=0;d.mode=15;if(6===c)break a;case 15:d.mode=16;case 16:if(v=d.length){v>l&&(v=l);v>z&&(v=z);if(0===v)break a;m.arraySet(g,f,h,v,k);l-=v;h+=v;z-=v;k+=v;d.length-=v;break}d.mode=12;break;case 17:for(;14>s;){if(0===l)break a;l--;r+=f[h++]<<
s;s+=8}d.nlen=(r&31)+257;r>>>=5;s-=5;d.ndist=(r&31)+1;r>>>=5;s-=5;d.ncode=(r&15)+4;r>>>=4;s-=4;if(286<d.nlen||30<d.ndist){b.msg="too many length or distance symbols";d.mode=30;break}d.have=0;d.mode=18;case 18:for(;d.have<d.ncode;){for(;3>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.lens[aa[d.have++]]=r&7;r>>>=3;s-=3}for(;19>d.have;)d.lens[aa[d.have++]]=0;d.lencode=d.lendyn;d.lenbits=7;v={bits:d.lenbits};O=u(0,d.lens,0,19,d.lencode,0,d.work,v);d.lenbits=v.bits;if(O){b.msg="invalid code lengths set";
d.mode=30;break}d.have=0;d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;;){v=d.lencode[r&(1<<d.lenbits)-1];L=v>>>24;M=v>>>16&255;N=v&65535;if(L<=s)break;if(0===l)break a;l--;r+=f[h++]<<s;s+=8}if(16>N)r>>>=L,s-=L,d.lens[d.have++]=N;else{if(16===N){for(v=L+2;s<v;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}r>>>=L;s-=L;if(0===d.have){b.msg="invalid bit length repeat";d.mode=30;break}J=d.lens[d.have-1];v=3+(r&3);r>>>=2;s-=2}else if(17===N){for(v=L+3;s<v;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}r>>>=
L;s-=L;J=0;v=3+(r&7);r>>>=3;s-=3}else{for(v=L+7;s<v;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}r>>>=L;s-=L;J=0;v=11+(r&127);r>>>=7;s-=7}if(d.have+v>d.nlen+d.ndist){b.msg="invalid bit length repeat";d.mode=30;break}for(;v--;)d.lens[d.have++]=J}}if(30===d.mode)break;if(0===d.lens[256]){b.msg="invalid code -- missing end-of-block";d.mode=30;break}d.lenbits=9;v={bits:d.lenbits};O=u(1,d.lens,0,d.nlen,d.lencode,0,d.work,v);d.lenbits=v.bits;if(O){b.msg="invalid literal/lengths set";d.mode=30;break}d.distbits=
6;d.distcode=d.distdyn;v={bits:d.distbits};O=u(2,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,v);d.distbits=v.bits;if(O){b.msg="invalid distances set";d.mode=30;break}d.mode=20;if(6===c)break a;case 20:d.mode=21;case 21:if(6<=l&&258<=z){b.next_out=k;b.avail_out=z;b.next_in=h;b.avail_in=l;d.hold=r;d.bits=s;q(b,K);k=b.next_out;g=b.output;z=b.avail_out;h=b.next_in;f=b.input;l=b.avail_in;r=d.hold;s=d.bits;12===d.mode&&(d.back=-1);break}for(d.back=0;;){v=d.lencode[r&(1<<d.lenbits)-1];L=v>>>24;M=v>>>16&255;
N=v&65535;if(L<=s)break;if(0===l)break a;l--;r+=f[h++]<<s;s+=8}if(M&&0===(M&240)){J=L;Q=M;for(S=N;;){v=d.lencode[S+((r&(1<<J+Q)-1)>>J)];L=v>>>24;M=v>>>16&255;N=v&65535;if(J+L<=s)break;if(0===l)break a;l--;r+=f[h++]<<s;s+=8}r>>>=J;s-=J;d.back+=J}r>>>=L;s-=L;d.back+=L;d.length=N;if(0===M){d.mode=26;break}if(M&32){d.back=-1;d.mode=12;break}if(M&64){b.msg="invalid literal/length code";d.mode=30;break}d.extra=M&15;d.mode=22;case 22:if(d.extra){for(v=d.extra;s<v;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.length+=
r&(1<<d.extra)-1;r>>>=d.extra;s-=d.extra;d.back+=d.extra}d.was=d.length;d.mode=23;case 23:for(;;){v=d.distcode[r&(1<<d.distbits)-1];L=v>>>24;M=v>>>16&255;N=v&65535;if(L<=s)break;if(0===l)break a;l--;r+=f[h++]<<s;s+=8}if(0===(M&240)){J=L;Q=M;for(S=N;;){v=d.distcode[S+((r&(1<<J+Q)-1)>>J)];L=v>>>24;M=v>>>16&255;N=v&65535;if(J+L<=s)break;if(0===l)break a;l--;r+=f[h++]<<s;s+=8}r>>>=J;s-=J;d.back+=J}r>>>=L;s-=L;d.back+=L;if(M&64){b.msg="invalid distance code";d.mode=30;break}d.offset=N;d.extra=M&15;d.mode=
24;case 24:if(d.extra){for(v=d.extra;s<v;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}d.offset+=r&(1<<d.extra)-1;r>>>=d.extra;s-=d.extra;d.back+=d.extra}if(d.offset>d.dmax){b.msg="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===z)break a;v=K-z;if(d.offset>v){v=d.offset-v;if(v>d.whave&&d.sane){b.msg="invalid distance too far back";d.mode=30;break}v>d.wnext?(v-=d.wnext,J=d.wsize-v):J=d.wnext-v;v>d.length&&(v=d.length);Q=d.window}else Q=g,J=k-d.offset,v=d.length;v>z&&(v=z);z-=v;d.length-=
v;do g[k++]=Q[J++];while(--v);0===d.length&&(d.mode=21);break;case 26:if(0===z)break a;g[k++]=d.length;z--;d.mode=21;break;case 27:if(d.wrap){for(;32>s;){if(0===l)break a;l--;r|=f[h++]<<s;s+=8}K-=z;b.total_out+=K;d.total+=K;K&&(b.adler=d.check=d.flags?p(d.check,g,K,k-K):n(d.check,g,K,k-K));K=z;if((d.flags?r:e(r))!==d.check){b.msg="incorrect data check";d.mode=30;break}s=r=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;32>s;){if(0===l)break a;l--;r+=f[h++]<<s;s+=8}if(r!==(d.total&4294967295)){b.msg=
"incorrect length check";d.mode=30;break}s=r=0}d.mode=29;case 29:O=1;break a;case 30:O=-3;break a;case 31:return-4;default:return-2}b.next_out=k;b.avail_out=z;b.next_in=h;b.avail_in=l;d.hold=r;d.bits=s;if(d.wsize||K!==b.avail_out&&30>d.mode&&(27>d.mode||4!==c))f=b.output,h=b.next_out,k=K-b.avail_out,z=b.state,null===z.window&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new m.Buf8(z.wsize)),k>=z.wsize?(m.arraySet(z.window,f,h-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(l=z.wsize-z.wnext,l>
k&&(l=k),m.arraySet(z.window,f,h-k,l,z.wnext),(k-=l)?(m.arraySet(z.window,f,h-k,k,0),z.wnext=k,z.whave=z.wsize):(z.wnext+=l,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=l)));H-=b.avail_in;K-=b.avail_out;b.total_in+=H;b.total_out+=K;d.total+=K;d.wrap&&K&&(b.adler=d.check=d.flags?p(d.check,g,K,b.next_out-K):n(d.check,g,K,b.next_out-K));b.data_type=d.bits+(d.last?64:0)+(12===d.mode?128:0)+(20===d.mode||15===d.mode?256:0);(0===H&&0===K||4===c)&&0===O&&(O=-5);return O};d.inflateEnd=function(b){if(!b||
!b.state)return-2;var c=b.state;c.window&&(c.window=null);b.state=null;return 0};d.inflateGetHeader=function(b,c){var d;if(!b||!b.state)return-2;d=b.state;if(0===(d.wrap&2))return-2;d.head=c;c.done=!1;return 0};d.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./inffast":29,"./inftrees":31}],31:[function(b,c,d){var e=b("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,
16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(b,c,d,p,q,u,t,C){for(var B=C.bits,y=0,D=0,A=0,F=0,I=0,G=0,w=0,E=0,z=0,r=0,s,H,K=null,v=0,J,Q=new e.Buf16(16),G=new e.Buf16(16),L=null,M=0,N,S,O,y=0;15>=y;y++)Q[y]=0;for(D=0;D<p;D++)Q[c[d+
D]]++;I=B;for(F=15;1<=F&&0===Q[F];F--);I>F&&(I=F);if(0===F)return q[u++]=20971520,q[u++]=20971520,C.bits=1,0;for(A=1;A<F&&0===Q[A];A++);I<A&&(I=A);for(y=E=1;15>=y;y++)if(E<<=1,E-=Q[y],0>E)return-1;if(0<E&&(0===b||1!==F))return-1;G[1]=0;for(y=1;15>y;y++)G[y+1]=G[y]+Q[y];for(D=0;D<p;D++)0!==c[d+D]&&(t[G[c[d+D]]++]=D);switch(b){case 0:K=L=t;J=19;break;case 1:K=f;v-=257;L=g;M-=257;J=256;break;default:K=h,L=k,J=-1}D=r=0;y=A;B=u;G=I;w=0;H=-1;z=1<<I;p=z-1;if(1===b&&852<z||2===b&&592<z)return 1;for(var T=
0;;){T++;N=y-w;t[D]<J?(S=0,O=t[D]):t[D]>J?(S=L[M+t[D]],O=K[v+t[D]]):(S=96,O=0);E=1<<y-w;A=s=1<<G;do s-=E,q[B+(r>>w)+s]=N<<24|S<<16|O|0;while(0!==s);for(E=1<<y-1;r&E;)E>>=1;0!==E?(r&=E-1,r+=E):r=0;D++;if(0===--Q[y]){if(y===F)break;y=c[d+t[D]]}if(y>I&&(r&p)!==H){0===w&&(w=I);B+=A;G=y-w;for(E=1<<G;G+w<F;){E-=Q[G+w];if(0>=E)break;G++;E<<=1}z+=1<<G;if(1===b&&852<z||2===b&&592<z)return 1;H=r&p;q[H]=I<<24|G<<16|B-u|0}}0!==r&&(q[B+r]=y-w<<24|4194304);C.bits=I;return 0}},{"../utils/common":22}],32:[function(b,
c,d){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],33:[function(b,c,d){function e(b){for(var c=b.length;0<=--c;)b[c]=0}function f(b,c){b.pending_buf[b.pending++]=c&255;b.pending_buf[b.pending++]=c>>>8&255}function g(b,c,d){b.bi_valid>16-d?(b.bi_buf|=c<<b.bi_valid&65535,f(b,b.bi_buf),b.bi_buf=c>>16-b.bi_valid,b.bi_valid+=d-16):(b.bi_buf|=c<<b.bi_valid&65535,
b.bi_valid+=d)}function h(b,c,d){g(b,d[2*c],d[2*c+1])}function k(b,c){var d=0;do d|=b&1,b>>>=1,d<<=1;while(0<--c);return d>>>1}function l(b,c,d){var e=Array(16),f=0,g;for(g=1;15>=g;g++)e[g]=f=f+d[g-1]<<1;for(d=0;d<=c;d++)f=b[2*d+1],0!==f&&(b[2*d]=k(e[f]++,f))}function m(b){var c;for(c=0;286>c;c++)b.dyn_ltree[2*c]=0;for(c=0;30>c;c++)b.dyn_dtree[2*c]=0;for(c=0;19>c;c++)b.bl_tree[2*c]=0;b.dyn_ltree[512]=1;b.opt_len=b.static_len=0;b.last_lit=b.matches=0}function n(b){8<b.bi_valid?f(b,b.bi_buf):0<b.bi_valid&&
(b.pending_buf[b.pending++]=b.bi_buf);b.bi_buf=0;b.bi_valid=0}function p(b,c,d,e){var f=2*c,g=2*d;return b[f]<b[g]||b[f]===b[g]&&e[c]<=e[d]}function q(b,c,d){for(var e=b.heap[d],f=d<<1;f<=b.heap_len;){f<b.heap_len&&p(c,b.heap[f+1],b.heap[f],b.depth)&&f++;if(p(c,e,b.heap[f],b.depth))break;b.heap[d]=b.heap[f];d=f;f<<=1}b.heap[d]=e}function u(b,c,d){var e,f,l=0,k,m;if(0!==b.last_lit){do e=b.pending_buf[b.d_buf+2*l]<<8|b.pending_buf[b.d_buf+2*l+1],f=b.pending_buf[b.l_buf+l],l++,0===e?h(b,f,c):(k=s[f],
h(b,k+256+1,c),m=F[k],0!==m&&(f-=H[k],g(b,f,m)),e--,k=256>e?r[e]:r[256+(e>>>7)],h(b,k,d),m=I[k],0!==m&&(e-=K[k],g(b,e,m)));while(l<b.last_lit)}h(b,256,c)}function t(b,c){var d=c.dyn_tree,e=c.stat_desc.static_tree,f=c.stat_desc.has_stree,g=c.stat_desc.elems,h,k=-1,m;b.heap_len=0;b.heap_max=573;for(h=0;h<g;h++)0!==d[2*h]?(b.heap[++b.heap_len]=k=h,b.depth[h]=0):d[2*h+1]=0;for(;2>b.heap_len;)m=b.heap[++b.heap_len]=2>k?++k:0,d[2*m]=1,b.depth[m]=0,b.opt_len--,f&&(b.static_len-=e[2*m+1]);c.max_code=k;for(h=
b.heap_len>>1;1<=h;h--)q(b,d,h);m=g;do h=b.heap[1],b.heap[1]=b.heap[b.heap_len--],q(b,d,1),e=b.heap[1],b.heap[--b.heap_max]=h,b.heap[--b.heap_max]=e,d[2*m]=d[2*h]+d[2*e],b.depth[m]=(b.depth[h]>=b.depth[e]?b.depth[h]:b.depth[e])+1,d[2*h+1]=d[2*e+1]=m,b.heap[1]=m++,q(b,d,1);while(2<=b.heap_len);b.heap[--b.heap_max]=b.heap[1];h=c.dyn_tree;m=c.max_code;for(var n=c.stat_desc.static_tree,p=c.stat_desc.has_stree,r=c.stat_desc.extra_bits,s=c.stat_desc.extra_base,t=c.stat_desc.max_length,u,v,w=0,g=0;15>=g;g++)b.bl_count[g]=
0;h[2*b.heap[b.heap_max]+1]=0;for(e=b.heap_max+1;573>e;e++)f=b.heap[e],g=h[2*h[2*f+1]+1]+1,g>t&&(g=t,w++),h[2*f+1]=g,f>m||(b.bl_count[g]++,u=0,f>=s&&(u=r[f-s]),v=h[2*f],b.opt_len+=v*(g+u),p&&(b.static_len+=v*(n[2*f+1]+u)));if(0!==w){do{for(g=t-1;0===b.bl_count[g];)g--;b.bl_count[g]--;b.bl_count[g+1]+=2;b.bl_count[t]--;w-=2}while(0<w);for(g=t;0!==g;g--)for(f=b.bl_count[g];0!==f;)n=b.heap[--e],n>m||(h[2*n+1]!==g&&(b.opt_len+=(g-h[2*n+1])*h[2*n],h[2*n+1]=g),f--)}l(d,k,b.bl_count)}function C(b,c,d){var e,
f=-1,g,h=c[1],k=0,l=7,m=4;0===h&&(l=138,m=3);c[2*(d+1)+1]=65535;for(e=0;e<=d;e++)g=h,h=c[2*(e+1)+1],++k<l&&g===h||(k<m?b.bl_tree[2*g]+=k:0!==g?(g!==f&&b.bl_tree[2*g]++,b.bl_tree[32]++):10>=k?b.bl_tree[34]++:b.bl_tree[36]++,k=0,f=g,0===h?(l=138,m=3):g===h?(l=6,m=3):(l=7,m=4))}function B(b,c,d){var e,f=-1,k,l=c[1],m=0,n=7,p=4;0===l&&(n=138,p=3);for(e=0;e<=d;e++)if(k=l,l=c[2*(e+1)+1],!(++m<n&&k===l)){if(m<p){do h(b,k,b.bl_tree);while(0!==--m)}else 0!==k?(k!==f&&(h(b,k,b.bl_tree),m--),h(b,16,b.bl_tree),
g(b,m-3,2)):10>=m?(h(b,17,b.bl_tree),g(b,m-3,3)):(h(b,18,b.bl_tree),g(b,m-11,7));m=0;f=k;0===l?(n=138,p=3):k===l?(n=6,p=3):(n=7,p=4)}}function y(b){var c=4093624447,d;for(d=0;31>=d;d++,c>>>=1)if(c&1&&0!==b.dyn_ltree[2*d])return 0;if(0!==b.dyn_ltree[18]||0!==b.dyn_ltree[20]||0!==b.dyn_ltree[26])return 1;for(d=32;256>d;d++)if(0!==b.dyn_ltree[2*d])return 1;return 0}function D(b,c,d,e){g(b,0+(e?1:0),3);n(b);f(b,d);f(b,~d);A.arraySet(b.pending_buf,b.window,c,d,b.pending);b.pending+=d}var A=b("../utils/common"),
F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=Array(576);e(E);var z=Array(60);e(z);var r=Array(512);e(r);var s=Array(256);e(s);var H=Array(29);e(H);var K=Array(30);e(K);var v=function(b,c,d,e,f){this.static_tree=b;this.extra_bits=c;this.extra_base=d;this.elems=e;this.max_length=f;this.has_stree=b&&b.length},J,Q,L,M=function(b,
c){this.dyn_tree=b;this.max_code=0;this.stat_desc=c},N=!1;d._tr_init=function(b){if(!N){var c,d,e,f=Array(16);for(e=d=0;28>e;e++)for(H[e]=d,c=0;c<1<<F[e];c++)s[d++]=e;s[d-1]=e;for(e=d=0;16>e;e++)for(K[e]=d,c=0;c<1<<I[e];c++)r[d++]=e;for(d>>=7;30>e;e++)for(K[e]=d<<7,c=0;c<1<<I[e]-7;c++)r[256+d++]=e;for(c=0;15>=c;c++)f[c]=0;for(c=0;143>=c;)E[2*c+1]=8,c++,f[8]++;for(;255>=c;)E[2*c+1]=9,c++,f[9]++;for(;279>=c;)E[2*c+1]=7,c++,f[7]++;for(;287>=c;)E[2*c+1]=8,c++,f[8]++;l(E,287,f);for(c=0;30>c;c++)z[2*c+
1]=5,z[2*c]=k(c,5);J=new v(E,F,257,286,15);Q=new v(z,I,0,30,15);L=new v([],G,0,19,7);N=!0}b.l_desc=new M(b.dyn_ltree,J);b.d_desc=new M(b.dyn_dtree,Q);b.bl_desc=new M(b.bl_tree,L);b.bi_buf=0;b.bi_valid=0;m(b)};d._tr_stored_block=D;d._tr_flush_block=function(b,c,d,e){var f,h,k=0;if(0<b.level){2===b.strm.data_type&&(b.strm.data_type=y(b));t(b,b.l_desc);t(b,b.d_desc);C(b,b.dyn_ltree,b.l_desc.max_code);C(b,b.dyn_dtree,b.d_desc.max_code);t(b,b.bl_desc);for(k=18;3<=k&&0===b.bl_tree[2*w[k]+1];k--);b.opt_len+=
3*(k+1)+14;f=b.opt_len+3+7>>>3;h=b.static_len+3+7>>>3;h<=f&&(f=h)}else f=h=d+5;if(d+4<=f&&-1!==c)D(b,c,d,e);else if(4===b.strategy||h===f)g(b,2+(e?1:0),3),u(b,E,z);else{g(b,4+(e?1:0),3);c=b.l_desc.max_code+1;d=b.d_desc.max_code+1;k+=1;g(b,c-257,5);g(b,d-1,5);g(b,k-4,4);for(f=0;f<k;f++)g(b,b.bl_tree[2*w[f]+1],3);B(b,b.dyn_ltree,c-1);B(b,b.dyn_dtree,d-1);u(b,b.dyn_ltree,b.dyn_dtree)}m(b);e&&n(b)};d._tr_tally=function(b,c,d){b.pending_buf[b.d_buf+2*b.last_lit]=c>>>8&255;b.pending_buf[b.d_buf+2*b.last_lit+
1]=c&255;b.pending_buf[b.l_buf+b.last_lit]=d&255;b.last_lit++;0===c?b.dyn_ltree[2*d]++:(b.matches++,c--,b.dyn_ltree[2*(s[d]+256+1)]++,b.dyn_dtree[2*(256>c?r[c]:r[256+(c>>>7)])]++);return b.last_lit===b.lit_bufsize-1};d._tr_align=function(b){g(b,2,3);h(b,256,E);16===b.bi_valid?(f(b,b.bi_buf),b.bi_buf=0,b.bi_valid=0):8<=b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf&255,b.bi_buf>>=8,b.bi_valid-=8)}},{"../utils/common":22}],34:[function(b,c,d){c.exports=function(){this.input=null;this.total_in=this.avail_in=
this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}]},{},[7])(7)});goog.exportSymbol("JSZip");goog.exportSymbol("ZipObject");gxnat.Zip=function(a){this.Zip_=new JSZip(a)};goog.inherits(gxnat.Zip,goog.Disposable);goog.exportSymbol("gxnat.Zip",gxnat.Zip);
gxnat.Zip.getFilesAsZip=function(a,b,c,d){if(!goog.string.caseInsensitiveEndsWith(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=gxnat.ZIP_SUFFIX;var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new gxnat.Zip(e.response))});goog.isDefAndNotNull(c)&&e.addEventListener("progress",c);goog.isDefAndNotNull(d)&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()};
gxnat.Zip.prototype.getFiles=function(a){return this.Zip_.files};gxnat.Zip.prototype.loopFiles=function(a){goog.object.forEach(this.getFiles(),function(b,c){a(b.name,b.asArrayBuffer())}.bind(this))};gxnat.Zip.prototype.dispose=function(a){gxnat.Zip.superClass_.dispose.call(this);this.loopFiles(function(a){this.Zip_.remove(a)}.bind(this));goog.object.clear(this.Zip_);delete this.Zip_};goog.exportSymbol("gxnat.Zip.prototype.getFiles",gxnat.Zip.prototype.getFiles);
goog.exportSymbol("gxnat.Zip.prototype.loopFiles",gxnat.Zip.prototype.loopFiles);goog.exportSymbol("gxnat.Zip.getFilesAsZip",gxnat.Zip.getFilesAsZip);goog.exportSymbol("gxnat.Zip.prototype.dispose",gxnat.Zip.prototype.dispose);gxnat.slicerNode=function(){};goog.exportSymbol("gxnat.slicerNode",gxnat.slicerNode);
gxnat.slicerNode.getDisplayNodeTypes=function(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c=
"FiberBundleTubeDisplayNode";break;case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b};gxnat.slicerNode.toFloatArray=function(a){if(goog.isDefAndNotNull(a))return a.split(" ").map(function(a){return parseFloat(a)})};goog.exportSymbol("gxnat.slicerNode.getDisplayNodeTypes",gxnat.slicerNode.getDisplayNodeTypes);goog.exportSymbol("gxnat.slicerNode.toFloatArray",gxnat.slicerNode.toFloatArray);gxnat.slicerNode.Node=function(){goog.getUid(this)};goog.exportSymbol("gxnat.slicerNode.Node",gxnat.slicerNode.Node);gxnat.slicerNode.Display=function(a,b){gxnat.slicerNode.Node.call(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;goog.array.forEach(gxnat.slicerNode.getDisplayNodeTypes(b),function(b){goog.array.forEach(a.getElementsByTagName(b),function(a){d.push(a)})});for(var f=0,g=d.length;f<g;f++)if(-1<c.indexOf(d[f].getAttribute("id"))){e=d[f];break}this.displayNodeElement=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=gxnat.slicerNode.toFloatArray(e.getAttribute("color"));
this.visible="true"===e.getAttribute("visibility");this.origin=gxnat.slicerNode.toFloatArray(a.getAttribute("origin"));this.colorMode=parseInt(e.getAttribute("colorMode"),10);this.ijkToRASDirections=a.getAttribute("ijkToRASDirections")};goog.inherits(gxnat.slicerNode.Display,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.Display",gxnat.slicerNode.Display);gxnat.slicerNode.Mesh=function(a,b){gxnat.slicerNode.Display.call(this,a,b)};goog.inherits(gxnat.slicerNode.Mesh,gxnat.slicerNode.Display);goog.exportSymbol("gxnat.slicerNode.Mesh",gxnat.slicerNode.Mesh);goog.math.Matrix=function(a,b){if(a instanceof goog.math.Matrix)this.array_=a.toArray();else if(goog.isArrayLike(a)&&goog.math.Matrix.isValidArray(a))this.array_=goog.array.clone(a);else if(a instanceof goog.math.Size)this.array_=goog.math.Matrix.createZeroPaddedArray_(a.height,a.width);else if(goog.isNumber(a)&&goog.isNumber(b)&&0<a&&0<b)this.array_=goog.math.Matrix.createZeroPaddedArray_(a,b);else throw Error("Invalid argument(s) for Matrix contructor");this.size_=new goog.math.Size(this.array_[0].length,
this.array_.length)};goog.math.Matrix.createIdentityMatrix=function(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new goog.math.Matrix(b)};goog.math.Matrix.forEach=function(a,b,c){for(var d=0;d<a.getSize().height;d++)for(var e=0;e<a.getSize().width;e++)b.call(c,a.array_[d][e],d,e,a)};
goog.math.Matrix.isValidArray=function(a){for(var b=0,c=0;c<a.length;c++){if(!goog.isArrayLike(a[c])||0<b&&a[c].length!=b)return!1;for(var d=0;d<a[c].length;d++)if(!goog.isNumber(a[c][d]))return!1;0==b&&(b=a[c].length)}return 0!=b};goog.math.Matrix.map=function(a,b,c){var d=new goog.math.Matrix(a.getSize());goog.math.Matrix.forEach(a,function(e,f,g){d.array_[f][g]=b.call(c,e,f,g,a)});return d};
goog.math.Matrix.createZeroPaddedArray_=function(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c};goog.math.Matrix.prototype.add=function(a){if(!goog.math.Size.equals(this.size_,a.getSize()))throw Error("Matrix summation is only supported on arrays of equal size");return goog.math.Matrix.map(this,function(b,c,d){return b+a.array_[c][d]})};
goog.math.Matrix.prototype.appendColumns=function(a){if(this.size_.height!=a.getSize().height)throw Error("The given matrix has height "+a.size_.height+", but  needs to have height "+this.size_.height+".");var b=new goog.math.Matrix(this.size_.height,this.size_.width+a.size_.width);goog.math.Matrix.forEach(this,function(a,d,e){b.array_[d][e]=a});goog.math.Matrix.forEach(a,function(a,d,e){b.array_[d][this.size_.width+e]=a},this);return b};
goog.math.Matrix.prototype.appendRows=function(a){if(this.size_.width!=a.getSize().width)throw Error("The given matrix has width "+a.size_.width+", but  needs to have width "+this.size_.width+".");var b=new goog.math.Matrix(this.size_.height+a.size_.height,this.size_.width);goog.math.Matrix.forEach(this,function(a,d,e){b.array_[d][e]=a});goog.math.Matrix.forEach(a,function(a,d,e){b.array_[this.size_.height+d][e]=a},this);return b};
goog.math.Matrix.prototype.equals=function(a,b){if(this.size_.width!=a.size_.width||this.size_.height!=a.size_.height)return!1;for(var c=b||0,d=0;d<this.size_.height;d++)for(var e=0;e<this.size_.width;e++)if(!goog.math.nearlyEquals(this.array_[d][e],a.array_[d][e],c))return!1;return!0};goog.math.Matrix.prototype.getDeterminant=function(){if(!this.isSquare())throw Error("A determinant can only be take on a square matrix");return this.getDeterminant_()};
goog.math.Matrix.prototype.getInverse=function(){if(!this.isSquare())throw Error("An inverse can only be taken on a square matrix.");if(1==this.getSize().width){var a=this.getValueAt(0,0);return 0==a?null:new goog.math.Matrix([[1/a]])}var a=goog.math.Matrix.createIdentityMatrix(this.size_.height),b=this.appendColumns(a).getReducedRowEchelonForm();return b.getSubmatrixByCoordinates_(0,0,a.size_.width-1,a.size_.height-1).equals(a)?b.getSubmatrixByCoordinates_(0,a.size_.width):null};
goog.math.Matrix.prototype.getReducedRowEchelonForm=function(){for(var a=new goog.math.Matrix(this),b=0,c=0;c<a.size_.height&&!(b>=a.size_.width);c++){for(var d=c;0==a.array_[d][b];)if(d++,d==a.size_.height&&(d=c,b++,b==a.size_.width))return a;this.swapRows_(d,c);for(var d=a.array_[c][b],e=b;e<a.size_.width;e++)a.array_[c][e]/=d;for(d=0;d<a.size_.height;d++)if(d!=c)for(var f=a.array_[d][b],e=b;e<a.size_.width;e++)a.array_[d][e]-=f*a.array_[c][e];b++}return a};goog.math.Matrix.prototype.getSize=function(){return this.size_};
goog.math.Matrix.prototype.getTranspose=function(){var a=new goog.math.Matrix(this.size_.width,this.size_.height);goog.math.Matrix.forEach(this,function(b,c,d){a.array_[d][c]=b});return a};goog.math.Matrix.prototype.getValueAt=function(a,b){return this.isInBounds_(a,b)?this.array_[a][b]:null};goog.math.Matrix.prototype.isSquare=function(){return this.size_.width==this.size_.height};
goog.math.Matrix.prototype.setValueAt=function(a,b,c){if(!this.isInBounds_(a,b))throw Error("Index out of bounds when setting matrix value, ("+a+","+b+") in size ("+this.size_.height+","+this.size_.width+")");this.array_[a][b]=c};
goog.math.Matrix.prototype.multiply=function(a){if(a instanceof goog.math.Matrix){if(this.size_.width!=a.getSize().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return this.matrixMultiply_(a)}if(goog.isNumber(a))return this.scalarMultiply_(a);throw Error("A matrix can only be multiplied by a number or another matrix.");};
goog.math.Matrix.prototype.subtract=function(a){if(!goog.math.Size.equals(this.size_,a.getSize()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return goog.math.Matrix.map(this,function(b,c,d){return b-a.array_[c][d]})};goog.math.Matrix.prototype.toArray=function(){return this.array_};
goog.DEBUG&&(goog.math.Matrix.prototype.toString=function(){var a=0;goog.math.Matrix.forEach(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];goog.array.forEach(this.array_,function(c,d){b.push("[ ");goog.array.forEach(c,function(c,d){var g=String(c);b.push(goog.string.repeat(" ",a-g.length)+g+" ")});b.push("]\n")});return b.join("")});goog.math.Matrix.prototype.getCofactor_=function(a,b){return(0==a+b%2?1:-1)*this.getMinor_(a,b)};
goog.math.Matrix.prototype.getDeterminant_=function(){if(1==this.getSize().area())return this.array_[0][0];for(var a=0,b=0;b<this.size_.width;b++)a+=this.array_[0][b]*this.getCofactor_(0,b);return a};goog.math.Matrix.prototype.getMinor_=function(a,b){return this.getSubmatrixByDeletion_(a,b).getDeterminant_()};
goog.math.Matrix.prototype.getSubmatrixByCoordinates_=function(a,b,c,d){var e=new goog.math.Matrix((c?c:this.size_.height-1)-a+1,(d?d:this.size_.width-1)-b+1);goog.math.Matrix.forEach(e,function(c,d,h){e.array_[d][h]=this.array_[a+d][b+h]},this);return e};goog.math.Matrix.prototype.getSubmatrixByDeletion_=function(a,b){var c=new goog.math.Matrix(this.size_.width-1,this.size_.height-1);goog.math.Matrix.forEach(c,function(d,e,f){c.setValueAt(e,f,this.array_[e>=a?e+1:e][f>=b?f+1:f])},this);return c};
goog.math.Matrix.prototype.isInBounds_=function(a,b){return 0<=a&&a<this.size_.height&&0<=b&&b<this.size_.width};goog.math.Matrix.prototype.matrixMultiply_=function(a){var b=new goog.math.Matrix(this.size_.height,a.getSize().width);goog.math.Matrix.forEach(b,function(c,d,e){for(var f=c=0;f<this.size_.width;f++)c+=this.getValueAt(d,f)*a.getValueAt(f,e);b.setValueAt(d,e,c)},this);return b};
goog.math.Matrix.prototype.scalarMultiply_=function(a){return goog.math.Matrix.map(this,function(b,c,d){return b*a})};goog.math.Matrix.prototype.swapRows_=function(a,b){var c=this.array_[a];this.array_[a]=this.array_[b];this.array_[b]=c};gxnat.slicerNode.Volume=function(a,b,c){gxnat.slicerNode.Display.call(this,a,b);for(var d=0,e,f,g,h;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=goog.math.Matrix.map(new goog.math.Matrix(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:f=sliceToRASMatrix;break;case 1:g=sliceToRASMatrix;break;case 2:h=sliceToRASMatrix}this.sliceToRAS=new gxnat.slicerNode.Volume.sliceToRAS(g,h,f);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=
a.getElementsByTagName("Slice"),d=0,f=a.length;d<f&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);this.isSelectedVolume=b;this.upperThreshold=this.displayNodeElement?parseInt(this.displayNodeElement.getAttribute("upperThreshold")):null;this.lowerThreshold=this.displayNodeElement?parseInt(this.displayNodeElement.getAttribute("lowerThreshold")):null;this.visible=c};goog.inherits(gxnat.slicerNode.Volume,gxnat.slicerNode.Display);goog.exportSymbol("gxnat.slicerNode.Volume",gxnat.slicerNode.Volume);
gxnat.slicerNode.Volume.sliceToRAS=function(a,b,c){this.sagittal=a;this.coronal=b;this.axial=c;var d=new goog.math.Matrix([[0],[0],[0],[1]]);goog.array.forEach([a,b,c],function(a,b){var c=a.multiply(d).toArray(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.sagittalSliceCenter=c;break;case 1:this.coronalSliceCenter=c;break;case 2:this.axialSliceCenter=c}}.bind(this))};goog.exportSymbol("gxnat.slicerNode.Volume.sliceToRAS",gxnat.slicerNode.Volume.sliceToRAS);gxnat.slicerNode.BackgroundColor=function(a,b){gxnat.slicerNode.Node.call(this);this.backgroundColor=nrg.string.mrmlColorToRgb(a);this.backgroundColor2=nrg.string.mrmlColorToRgb(b)};goog.inherits(gxnat.slicerNode.BackgroundColor,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.BackgroundColor",gxnat.slicerNode.BackgroundColor);gxnat.slicerNode.SceneView=function(a,b,c,d,e,f,g,h){gxnat.slicerNode.Node.call(this);this.element=a;this.camera=b;this.backgroundColor=c;this.layout=d;this.annotations=e;this.volumes=f;this.meshes=g;this.fibers=h};goog.inherits(gxnat.slicerNode.SceneView,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.SceneView",gxnat.slicerNode.SceneView);gxnat.vis.RenderProperties=function(a){goog.Disposable.call(this);a instanceof gxnat.slicerNode.SceneView?(this.annotations=a.annotations,this.camera=a.camera,this.backgroundColor=a.backgroundColor,this.layout=a.layout):a instanceof gxnat.slicerNode.Volume?(this.origin=a.origin||[0,0,0],this.upperThreshold=a.upperThreshold||1E4,this.lowerThreshold=a.lowerThreshold||-1E4,this.volumeRendering=a.volumeRendering||!1,this.isSelectedVolume=a.isSelectedVolume||!1,this.sliceToRAS=a.sliceToRAS||null,a.labelMap&&
(this.labelMapFile=a.labelMapFile,this.labelMapColorTableFile=a.colorTableFile)):a instanceof gxnat.slicerNode.Mesh&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)};goog.inherits(gxnat.vis.RenderProperties,goog.Disposable);goog.exportSymbol("gxnat.vis.RenderProperties",gxnat.vis.RenderProperties);gxnat.vis.RenderProperties.prototype.dispose=function(){gxnat.vis.RenderProperties.superClass_.dispose.call(this);goog.object.clear(this)};
goog.exportSymbol("gxnat.vis.RenderProperties.prototype.dispose",gxnat.vis.RenderProperties.prototype.dispose);gxnat.vis.Renderable=function(a){gxnat.vis.VisNode.call(this);this.RenderProperties_=a||null};goog.inherits(gxnat.vis.Renderable,gxnat.vis.VisNode);goog.exportSymbol("gxnat.vis.Renderable",gxnat.vis.Renderable);gxnat.vis.Renderable.prototype.setRenderProperties=function(a){this.RenderProperties_=a instanceof gxnat.vis.RenderProperties?a:new gxnat.vis.RenderProperties(a)};gxnat.vis.Renderable.prototype.getRenderProperties=function(){return this.RenderProperties_};
gxnat.vis.Renderable.prototype.dispose=function(){gxnat.vis.Renderable.superClass_.dispose.call(this);this.RenderProperties_&&(this.RenderProperties_.dispose(),delete this.RenderProperties_)};goog.exportSymbol("gxnat.vis.Renderable.prototype.setRenderProperties",gxnat.vis.Renderable.prototype.setRenderProperties);goog.exportSymbol("gxnat.vis.Renderable.prototype.getRenderProperties",gxnat.vis.Renderable.prototype.getRenderProperties);goog.exportSymbol("gxnat.vis.Renderable.prototype.dispose",gxnat.vis.Renderable.prototype.dispose);gxnat.vis.Viewable=function(a,b){gxnat.vis.Renderable.call(this,b);this.files_=a||[];goog.isDefAndNotNull(b)&&this.setRenderProperties(b)};goog.inherits(gxnat.vis.Viewable,gxnat.vis.Renderable);goog.exportSymbol("gxnat.vis.Viewable",gxnat.vis.Viewable);gxnat.vis.Viewable.prototype.fileData_=null;gxnat.vis.Viewable.prototype.getFileData=function(){return this.fileData_};gxnat.vis.Viewable.prototype.setFileData=function(a){return this.fileData_=a};
gxnat.vis.Viewable.prototype.setFileDataFromZip=function(a){goog.isDefAndNotNull(this.fileData_)&&goog.object.clear(this.fileData_);this.fileData_={};var b=this.getFiles();goog.array.forEach(b,function(a){this.fileData_[a]=null}.bind(this));var c,d,e,f;a.loopFiles(function(a,h){c=0;for(d=b.length;c<d;c++)if(e=b[c],f="/files/"+a.split("/files/")[1],goog.string.caseInsensitiveEndsWith(e,f)){this.fileData_[e]=h;break}}.bind(this));a.dispose()};gxnat.vis.Viewable.prototype.getFiles=function(){return this.files_};
gxnat.vis.Viewable.prototype.removeFile=function(a){window.conosle.log("REMOVING FILE",a);goog.array.remove(this.files_,a)};gxnat.vis.Viewable.prototype.addFiles=function(a,b){goog.isDefAndNotNull(this.files_)||(this.files_=[]);goog.isArray(a)||(a=[a]);goog.array.forEach(a,function(a){if(goog.isDefAndNotNull(b)){var d=b(a);if(!goog.isDefAndNotNull(d))return}this.files_.push(a)}.bind(this))};
gxnat.vis.Viewable.prototype.dispose=function(){gxnat.vis.Viewable.superClass_.dispose.call(this);this.files_&&(goog.array.clear(this.files_),delete this.files_)};goog.exportSymbol("gxnat.vis.Viewable.prototype.getFileData",gxnat.vis.Viewable.prototype.getFileData);goog.exportSymbol("gxnat.vis.Viewable.prototype.setFileData",gxnat.vis.Viewable.prototype.setFileData);goog.exportSymbol("gxnat.vis.Viewable.prototype.setFileDataFromZip",gxnat.vis.Viewable.prototype.setFileDataFromZip);
goog.exportSymbol("gxnat.vis.Viewable.prototype.getFiles",gxnat.vis.Viewable.prototype.getFiles);goog.exportSymbol("gxnat.vis.Viewable.prototype.removeFile",gxnat.vis.Viewable.prototype.removeFile);goog.exportSymbol("gxnat.vis.Viewable.prototype.addFiles",gxnat.vis.Viewable.prototype.addFiles);goog.exportSymbol("gxnat.vis.Viewable.prototype.dispose",gxnat.vis.Viewable.prototype.dispose);gxnat.vis.ViewableGroup=function(a){gxnat.vis.Renderable.call(this);goog.isDefAndNotNull(a)?goog.isArray(a)||(a=[a]):a=[];this.Viewables=a};goog.inherits(gxnat.vis.ViewableGroup,gxnat.vis.Renderable);goog.exportSymbol("gxnat.vis.ViewableGroup",gxnat.vis.ViewableGroup);gxnat.vis.ViewableGroup.prototype.addViewable=function(a){return this.Viewables.push(a)};
gxnat.vis.ViewableGroup.prototype.getAllViewableFiles=function(){var a=[];goog.array.forEach(this.Viewables,function(b){a=goog.array.concat(a,b.getFiles())});return a};gxnat.vis.ViewableGroup.prototype.getViewables=function(){return this.Viewables};
gxnat.vis.ViewableGroup.prototype.dispose=function(){gxnat.vis.ViewableGroup.superClass_.dispose.call(this);goog.array.forEach(this.Viewables,function(a){goog.isArray(a)?goog.array.forEach(a,function(a){a.dispose()}):a instanceof gxnat.vis.Viewable&&a.dispose()});delete this.Viewables};goog.exportSymbol("gxnat.vis.ViewableGroup.prototype.addViewable",gxnat.vis.ViewableGroup.prototype.addViewable);goog.exportSymbol("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",gxnat.vis.ViewableGroup.prototype.getAllViewableFiles);
goog.exportSymbol("gxnat.vis.ViewableGroup.prototype.getViewables",gxnat.vis.ViewableGroup.prototype.getViewables);goog.exportSymbol("gxnat.vis.ViewableGroup.prototype.dispose",gxnat.vis.ViewableGroup.prototype.dispose);gxnat.vis.ViewableTree=function(a,b){gxnat.vis.VisNode.call(this);this.thumbnailFiles=[];this.ViewableGroups=[]};goog.inherits(gxnat.vis.ViewableTree,gxnat.vis.VisNode);goog.exportSymbol("gxnat.vis.ViewableTree",gxnat.vis.ViewableTree);gxnat.vis.ViewableTree.metadataCollection=function(a,b,c){this.project=a;this.subject=b;this.experiment=c};goog.exportSymbol("gxnat.vis.ViewableTree.metadataCollection",gxnat.vis.ViewableTree.metadataCollection);gxnat.vis.ViewableTree.prototype.projectMetadata=null;
gxnat.vis.ViewableTree.prototype.subjectMetadata=null;gxnat.vis.ViewableTree.prototype.experimentMetadata=null;gxnat.vis.ViewableTree.prototype.orientation=null;gxnat.vis.ViewableTree.prototype.getOrientation=function(){return this.orientation};gxnat.vis.ViewableTree.prototype.setProjectMetadata=function(a){this.projectMetadata=a};gxnat.vis.ViewableTree.prototype.setSubjectMetadata=function(a){this.subjectMetadata=a};
gxnat.vis.ViewableTree.prototype.setExperimentMetadata=function(a){this.experimentMetadata=a};gxnat.vis.ViewableTree.prototype.getViewableGroups=function(){return this.ViewableGroups};
gxnat.vis.ViewableTree.prototype.dispose=function(){gxnat.vis.ViewableTree.superClass_.dispose.call(this);goog.isDefAndNotNull(this.projectMetadata)&&(goog.object.clear(this.projectMetadata),delete this.projectMetdata);goog.isDefAndNotNull(this.subjectMetadata)&&(goog.object.clear(this.subjectMetadata),delete this.subjectMetdata);goog.isDefAndNotNull(this.experimentMetadata)&&(goog.object.clear(this.experimentMetadata),delete this.experimentMetdata);goog.isDefAndNotNull(this.ViewableGroups)&&(goog.array.forEach(this.ViewableGroups,
function(a){a.dispose()}),delete this.ViewableGroups);goog.isDefAndNotNull(this.thumbnailFiles_)&&goog.array.clear(this.thumbnailFiles_);delete this.thumbnailFiles_;delete this.orientation};goog.exportSymbol("gxnat.vis.ViewableTree.metadataCollection",gxnat.vis.ViewableTree.metadataCollection);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.projectMetadata",gxnat.vis.ViewableTree.prototype.projectMetadata);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.subjectMetadata",gxnat.vis.ViewableTree.prototype.subjectMetadata);
goog.exportSymbol("gxnat.vis.ViewableTree.prototype.experimentMetadata",gxnat.vis.ViewableTree.prototype.experimentMetadata);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.orientation",gxnat.vis.ViewableTree.prototype.orientation);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.getOrientation",gxnat.vis.ViewableTree.prototype.getOrientation);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.setProjectMetadata",gxnat.vis.ViewableTree.prototype.setProjectMetadata);
goog.exportSymbol("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",gxnat.vis.ViewableTree.prototype.setSubjectMetadata);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",gxnat.vis.ViewableTree.prototype.setExperimentMetadata);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.getViewableGroups",gxnat.vis.ViewableTree.prototype.getViewableGroups);goog.exportSymbol("gxnat.vis.ViewableTree.prototype.dispose",gxnat.vis.ViewableTree.prototype.dispose);gxnat.vis.AjaxViewableTree=function(a,b,c){gxnat.vis.ViewableTree.call(this);this.setCategory(a);goog.isDefAndNotNull(c)&&goog.isDefAndNotNull(b)&&(this.experimentUrl=c,this.queryUrl=gxnat.Path.graftUrl(this.experimentUrl,b.URI,"experiments"),this.Path=new gxnat.Path(this.queryUrl));this.json=b;this.sessionInfo={}};goog.inherits(gxnat.vis.AjaxViewableTree,gxnat.vis.ViewableTree);goog.exportSymbol("gxnat.vis.AjaxViewableTree",gxnat.vis.AjaxViewableTree);
gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP={ID:"Scan ID",Name:"Name",type:"Scan Type"};gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"};gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP={label:"Session"};gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY="Size";gxnat.vis.AjaxViewableTree.loopFolderContents=function(a,b,c){gxnat.jsonGet(a,function(a){goog.isArray(a);goog.array.forEach(a,function(a){b(a)});c&&c()})};
gxnat.vis.AjaxViewableTree.prototype.fileMetadata_=null;gxnat.vis.AjaxViewableTree.prototype.filesGotten=!1;gxnat.vis.AjaxViewableTree.prototype.setFileMetadata=function(a,b){null==this.fileMetadata_&&(this.fileMetadata_={});this.fileMetadata_[a]=b};gxnat.vis.AjaxViewableTree.prototype.getTotalSize=function(){var a=0;goog.object.forEach(this.fileMetadata_,function(b,c){a+=this.getFileSize(c)}.bind(this));return a};
gxnat.vis.AjaxViewableTree.prototype.getFileSize=function(a){return parseInt(this.fileMetadata_[a][gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY],10)};gxnat.vis.AjaxViewableTree.prototype.getFileMetadata=function(){return this.fileMetadata_};gxnat.vis.AjaxViewableTree.prototype.getFilesGotten=function(){return this.filesGotten};gxnat.vis.AjaxViewableTree.prototype.setFilesGotten=function(a){this.filesGotten=a};gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl=function(){return this.experimentUrl};
gxnat.vis.AjaxViewableTree.prototype.getQueryUrl=function(){return this.queryUrl};gxnat.vis.AjaxViewableTree.prototype.getSessionInfo=function(){return this.sessionInfo};gxnat.vis.AjaxViewableTree.prototype.setSessionInfo=function(a){this.sessionInfo=a};gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata=function(){goog.object.forEach(gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP,function(a,b){goog.isDefAndNotNull(this.json[b])&&(this.sessionInfo[a]=this.json[b])}.bind(this))};
gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata=function(a){gxnat.vis.AjaxViewableTree.superClass_.setProjectMetadata.call(this,a)};gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata=function(a){gxnat.vis.AjaxViewableTree.superClass_.setSubjectMetadata.call(this,a);goog.object.forEach(gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP,function(a,c){goog.isDefAndNotNull(this.subjectMetadata[c])&&(this.sessionInfo[a]=this.subjectMetadata[c])}.bind(this))};
gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata=function(a){gxnat.vis.AjaxViewableTree.superClass_.setExperimentMetadata.call(this,a);goog.object.forEach(gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP,function(a,c){goog.isDefAndNotNull(this.experimentMetadata[c])&&(this.sessionInfo[a]=this.experimentMetadata[c])}.bind(this))};gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix=function(){return this.folderQuerySuffix};
gxnat.vis.AjaxViewableTree.prototype.makeFileUrl=function(a){a=a[this.fileContentsKey];if(!goog.string.endsWith(a,"/"))return this.queryUrl+"!"+a};gxnat.vis.AjaxViewableTree.prototype.getFileList=function(a){if(this.filesGotten)a();else{var b=0,c=0,d="",e;gxnat.jsonGet(this.queryUrl+this.fileQuerySuffix,function(f){for(c=f.length;b<c;b++)if(e=f[b],d=this.makeFileUrl(e))this.setFileMetadata(d,e),this.addFiles(d,this.fileFilter);a();this.filesGotten=!0}.bind(this))}};
gxnat.vis.AjaxViewableTree.prototype.fileFilter=function(a){return-1<a.indexOf("_MACOSX")?null:a};gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage=function(a){};gxnat.vis.AjaxViewableTree.getViewableTrees=function(a,b,c,d){var e=new gxnat.Path(a);a=a+"/"+b.prototype.getFolderQuerySuffix();gxnat.vis.AjaxViewableTree.loopFolderContents(a,function(a){new b(a,e.pathByLevel("experiments"),c)},d)};
gxnat.vis.AjaxViewableTree.prototype.dispose=function(){gxnat.vis.AjaxViewableTree.superClass_.dispose.call(this);null!=this.fileMetadata_&&(goog.object.clear(this.fileMetadata_),delete this.fileMetadata_);delete this.filesGotten;goog.object.clear(this.sessionInfo);delete this.sessionInfo;goog.isDefAndNotNull(this.json)&&(goog.object.clear(this.json),delete this.json);goog.isDefAndNotNull(this.Path)&&(this.Path.dispose(),delete this.Path);delete this.experimentUrl;delete this.queryUrl};
goog.exportSymbol("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP);goog.exportSymbol("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP);goog.exportSymbol("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP);goog.exportSymbol("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY",gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY);goog.exportSymbol("gxnat.vis.AjaxViewableTree.loopFolderContents",gxnat.vis.AjaxViewableTree.loopFolderContents);
goog.exportSymbol("gxnat.vis.AjaxViewableTree.getViewableTrees",gxnat.vis.AjaxViewableTree.getViewableTrees);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.filesGotten",gxnat.vis.AjaxViewableTree.prototype.filesGotten);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",gxnat.vis.AjaxViewableTree.prototype.setFileMetadata);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",gxnat.vis.AjaxViewableTree.prototype.getTotalSize);
goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getFileSize",gxnat.vis.AjaxViewableTree.prototype.getFileSize);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",gxnat.vis.AjaxViewableTree.prototype.getFileMetadata);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",gxnat.vis.AjaxViewableTree.prototype.getFilesGotten);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",gxnat.vis.AjaxViewableTree.prototype.setFilesGotten);
goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",gxnat.vis.AjaxViewableTree.prototype.getQueryUrl);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",gxnat.vis.AjaxViewableTree.prototype.getSessionInfo);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",gxnat.vis.AjaxViewableTree.prototype.setSessionInfo);
goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata);
goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",gxnat.vis.AjaxViewableTree.prototype.makeFileUrl);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getFileList",gxnat.vis.AjaxViewableTree.prototype.getFileList);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.fileFilter",gxnat.vis.AjaxViewableTree.prototype.fileFilter);
goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage);goog.exportSymbol("gxnat.vis.AjaxViewableTree.prototype.dispose",gxnat.vis.AjaxViewableTree.prototype.dispose);goog.window={};goog.window.DEFAULT_POPUP_HEIGHT=500;goog.window.DEFAULT_POPUP_WIDTH=690;goog.window.DEFAULT_POPUP_TARGET="google_popup";
goog.window.open=function(a,b,c){b||(b={});var d=c||window;c="undefined"!=typeof a.href?a.href:String(a);a=b.target||a.target;var e=[],f;for(f in b)switch(f){case "width":case "height":case "top":case "left":e.push(f+"="+b[f]);break;case "target":case "noreferrer":break;default:e.push(f+"="+(b[f]?1:0))}f=e.join(",");if(b.noreferrer){if(b=d.open("",a,f))goog.userAgent.IE&&-1!=c.indexOf(";")&&(c="'"+c.replace(/'/g,"%27")+"'"),b.opener=null,c=goog.string.htmlEscape(c),b.document.write('<META HTTP-EQUIV="refresh" content="0; url='+
c+'">'),b.document.close()}else b=d.open(c,a,f);return b};goog.window.openBlank=function(a,b,c){a=a?goog.string.htmlEscape(a):"";return goog.window.open('javascript:"'+encodeURI(a)+'"',b,c)};goog.window.popup=function(a,b){b||(b={});b.target=b.target||a.target||goog.window.DEFAULT_POPUP_TARGET;b.width=b.width||goog.window.DEFAULT_POPUP_WIDTH;b.height=b.height||goog.window.DEFAULT_POPUP_HEIGHT;var c=goog.window.open(a,b);if(!c)return!0;c.focus();return!1};gxnat.vis.Scan=function(a,b,c){gxnat.vis.AjaxViewableTree.call(this,"Scans",a,b);this.sessionInfo["Total Frames"]=0;c&&c(this)};goog.inherits(gxnat.vis.Scan,gxnat.vis.AjaxViewableTree);goog.exportSymbol("gxnat.vis.Scan",gxnat.vis.Scan);gxnat.vis.Scan.acceptableFileTypes="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");gxnat.vis.Scan.prototype.getOrientationFromAbbreviation_=function(a){switch(a){case "Sag":return"Sagittal";case "Cor":return"Coronal";case "Tra":return"Transverse"}};
gxnat.vis.Scan.prototype.folderQuerySuffix="scans";gxnat.vis.Scan.prototype.fileQuerySuffix="/files";gxnat.vis.Scan.prototype.fileContentsKey="URI";
gxnat.vis.Scan.prototype.setViewableMetadata=function(){gxnat.vis.Scan.superClass_.setViewableMetadata.call(this);goog.isDefAndNotNull(this.scanMetadata_["parameters/orientation"])&&(this.sessionInfo.Orientation=this.getOrientationFromAbbreviation_(this.scanMetadata_["parameters/orientation"]),this.orientation=this.sessionInfo.Orientation);goog.isDefAndNotNull(this.scanMetadata_["parameters/acqType"])&&(this.sessionInfo["Acq. Type"]=this.scanMetadata_["parameters/acqType"])};
gxnat.vis.Scan.prototype.getFileList=function(a){this.filesGotten?a():gxnat.jsonGet(this.Path.originalUrl,function(b){this.scanMetadata_=b.items[0].data_fields;window.console.log("SCAN JSON2",this.scanMetadata_);this.setViewableMetadata();gxnat.vis.Scan.superClass_.getFileList.call(this,function(){this.getThumbnailImage();a()}.bind(this))}.bind(this))};
gxnat.vis.Scan.prototype.fileFilter=function(a){a=gxnat.vis.Scan.superClass_.fileFilter.call(this,a);if(goog.isDefAndNotNull(a)){for(var b=0,c=gxnat.vis.Scan.acceptableFileTypes.length;b<c;b++)if(goog.string.caseInsensitiveEndsWith(a,"."+gxnat.vis.Scan.acceptableFileTypes[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
gxnat.vis.Scan.prototype.addFiles=function(a){this.setCategory("Scans");if(0==this.ViewableGroups.length){var b=new gxnat.vis.ViewableGroup;b.setTitle("scan");b.setCategory("scans");this.ViewableGroups.push(b)}0==this.ViewableGroups[0].getViewables().length&&this.ViewableGroups[0].addViewable(new gxnat.vis.Viewable);this.ViewableGroups[0].getViewables()[0].addFiles(a,this.fileFilter);this.sessionInfo["Total Frames"]=this.ViewableGroups[0].getViewables()[0].getFiles().length};
gxnat.vis.Scan.prototype.makeFileUrl=function(a){return gxnat.Path.graftUrl(this.experimentUrl,a[this.fileContentsKey],"experiments")};gxnat.vis.Scan.prototype.getThumbnailImage=function(a){if(this.ViewableGroups&&this.ViewableGroups[0]){var b=this.ViewableGroups[0].getViewables()[0].getFiles().sort(gxnat.naturalSort);this.setThumbnailUrl(b[Math.floor(b.length/2)]+gxnat.JPEG_CONVERT_SUFFIX);goog.isDefAndNotNull(a)&&a(this)}};
gxnat.vis.Scan.prototype.dispose=function(){gxnat.vis.Scan.superClass_.dispose.call(this);goog.isDefAndNotNull(this.scanMetadata_)&&goog.object.clear(this.scanMetadata_);delete this.scanMetadata_};goog.exportSymbol("gxnat.vis.Scan.acceptableFileTypes",gxnat.vis.Scan.acceptableFileTypes);goog.exportSymbol("gxnat.vis.Scan.prototype.folderQuerySuffix",gxnat.vis.Scan.prototype.folderQuerySuffix);goog.exportSymbol("gxnat.vis.Scan.prototype.fileQuerySuffix",gxnat.vis.Scan.prototype.fileQuerySuffix);
goog.exportSymbol("gxnat.vis.Scan.prototype.fileContentsKey",gxnat.vis.Scan.prototype.fileContentsKey);goog.exportSymbol("gxnat.vis.Scan.prototype.setViewableMetadata",gxnat.vis.Scan.prototype.setViewableMetadata);goog.exportSymbol("gxnat.vis.Scan.prototype.getFileList",gxnat.vis.Scan.prototype.getFileList);goog.exportSymbol("gxnat.vis.Scan.prototype.fileFilter",gxnat.vis.Scan.prototype.fileFilter);goog.exportSymbol("gxnat.vis.Scan.prototype.addFiles",gxnat.vis.Scan.prototype.addFiles);
goog.exportSymbol("gxnat.vis.Scan.prototype.makeFileUrl",gxnat.vis.Scan.prototype.makeFileUrl);goog.exportSymbol("gxnat.vis.Scan.prototype.getThumbnailImage",gxnat.vis.Scan.prototype.getThumbnailImage);goog.exportSymbol("gxnat.vis.Scan.prototype.dispose",gxnat.vis.Scan.prototype.dispose);gxnat.slicerNode.Mrml=function(a,b,c,d){gxnat.slicerNode.Node.call(this);this.url=a;this.document=b;this.files=d;this.mrbUrl=c};goog.inherits(gxnat.slicerNode.Mrml,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.Mrml",gxnat.slicerNode.Mrml);gxnat.slicerNode.Displayable=function(a,b,c){gxnat.slicerNode.Node.call(this);this.file=a;this.node=b;this.storageNode=c};goog.inherits(gxnat.slicerNode.Displayable,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.Displayable",gxnat.slicerNode.Displayable);goog.dom.xml={};goog.dom.xml.MAX_XML_SIZE_KB=2048;goog.dom.xml.MAX_ELEMENT_DEPTH=256;
goog.dom.xml.createDocument=function(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if("undefined"!=typeof ActiveXObject){var c=goog.dom.xml.createMsXmlDocument_();if(c)return a&&c.appendChild(c.createNode(goog.dom.NodeType.ELEMENT,a,b||"")),c}throw Error("Your browser does not support creating new documents");};
goog.dom.xml.loadXml=function(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=goog.dom.xml.createMsXmlDocument_();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};
goog.dom.xml.serialize=function(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents");};
goog.dom.xml.selectSingleNode=function(a,b){if("undefined"!=typeof a.selectSingleNode){var c=goog.dom.getOwnerDocument(a);"undefined"!=typeof c.setProperty&&c.setProperty("SelectionLanguage","XPath");return a.selectSingleNode(b)}if(document.implementation.hasFeature("XPath","3.0")){var c=goog.dom.getOwnerDocument(a),d=c.createNSResolver(c.documentElement);return c.evaluate(b,a,d,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}return null};
goog.dom.xml.selectNodes=function(a,b){if("undefined"!=typeof a.selectNodes){var c=goog.dom.getOwnerDocument(a);"undefined"!=typeof c.setProperty&&c.setProperty("SelectionLanguage","XPath");return a.selectNodes(b)}if(document.implementation.hasFeature("XPath","3.0")){for(var c=goog.dom.getOwnerDocument(a),d=c.createNSResolver(c.documentElement),c=c.evaluate(b,a,d,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),d=[],e=c.snapshotLength,f=0;f<e;f++)d.push(c.snapshotItem(f));return d}return[]};
goog.dom.xml.setAttributes=function(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])};goog.dom.xml.createMsXmlDocument_=function(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",goog.dom.xml.MAX_XML_SIZE_KB),a.setProperty("MaxElementDepth",goog.dom.xml.MAX_ELEMENT_DEPTH)}catch(b){}}return a};gxnat.slicerNode.Camera=function(a,b,c){gxnat.slicerNode.Node.call(this);this.position=a;this.up=b;this.focus=c};goog.inherits(gxnat.slicerNode.Camera,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.Camera",gxnat.slicerNode.Camera);gxnat.slicerNode.Annotations=function(a,b,c,d,e,f){gxnat.slicerNode.Node.call(this);this.position=a;this.color=b;this.fcsvText=c;this.markupsFiducialId=d;this.displayNodeId=e;this.name=f};goog.inherits(gxnat.slicerNode.Annotations,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.Annotations",gxnat.slicerNode.Annotations);gxnat.slicerNode.Layout=function(a){gxnat.slicerNode.Node.call(this);var b="Conventional";switch(a){case "0":b="Four-Up";break;case "2":b="Conventional"}this.layoutName=b};goog.inherits(gxnat.slicerNode.Layout,gxnat.slicerNode.Node);goog.exportSymbol("gxnat.slicerNode.Layout",gxnat.slicerNode.Layout);gxnat.slicerUtils={};goog.exportSymbol("gxnat.slicerUtils",gxnat.slicerUtils);gxnat.slicerUtils.GENERIC_COLORTABLE_FILE="/scripts/viewer/xiv/vis/GenericColorTable.txt";gxnat.slicerUtils.extractMrmls=function(a){for(var b=[],c=0,d=a.length;c<d;c++)goog.string.caseInsensitiveEndsWith(a[c],".mrml")&&b.push(a[c]);return b};gxnat.slicerUtils.getMrmlAsXml=function(a,b){gxnat.get(a,function(a){b(new goog.dom.xml.loadXml(a))},"text")};
gxnat.slicerUtils.getMrmlNodes=function(a,b,c){a=goog.isArray(a)?a:[a];var d=gxnat.slicerUtils.extractMrmls(a),e=[],f=0;goog.array.forEach(d,function(g){gxnat.slicerUtils.getMrmlAsXml(g,function(h){f++;e.push(new gxnat.slicerNode.Mrml(g,h,b,a));f==d.length&&c(e)})})};
gxnat.slicerUtils.createSceneViewProperties=function(a,b,c){gxnat.slicerUtils.getAnnotations(a,b,function(b){c(new gxnat.slicerNode.SceneView(a,gxnat.slicerUtils.getCameraFromSceneView(a),gxnat.slicerUtils.getBackgroundColorFromSceneView(a),gxnat.slicerUtils.getLayoutFromSceneView(a),b,gxnat.slicerUtils.getVolumes(a),gxnat.slicerUtils.getMeshes(a),gxnat.slicerUtils.getFibers(a)))})};
gxnat.slicerUtils.getSceneViewNodes=function(a,b){var c=[],d=[],e=0;goog.array.forEach(a,function(a,g){c=gxnat.slicerUtils.getSceneViewsFromMrml(a.document);goog.array.forEach(c,function(g,k){gxnat.slicerUtils.createSceneViewProperties(g,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};gxnat.slicerUtils.getElementsFromMrml=function(a,b){a=goog.isString(a)?gxnat.slicerUtils.getMrmlAsXml(a):a;var c=[];goog.array.forEach(a.getElementsByTagName(b),function(a){c.push(a)});return c};
gxnat.slicerUtils.getSceneViewsFromMrml=function(a){return gxnat.slicerUtils.getElementsFromMrml(a,"SceneView")};gxnat.slicerUtils.getCameraFromSceneView=function(a){return new gxnat.slicerNode.Camera(gxnat.slicerNode.toFloatArray(a.getElementsByTagName("Camera")[0].getAttribute("position")),gxnat.slicerNode.toFloatArray(a.getElementsByTagName("Camera")[0].getAttribute("viewUp")),gxnat.slicerNode.toFloatArray(a.getElementsByTagName("Camera")[0].getAttribute("focalPoint")))};
gxnat.slicerUtils.getThumbnail=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,f=d.length;e<f;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};gxnat.slicerUtils.getBackgroundColorFromSceneView=function(a){return new gxnat.slicerNode.BackgroundColor(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};
gxnat.slicerUtils.getLayoutFromSceneView=function(a){return new gxnat.slicerNode.Layout(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};gxnat.slicerUtils.matchFileToSet=function(a,b){if(goog.isDefAndNotNull(a))for(var c=0,d=b.length,e="",f="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),f=decodeURIComponent(a.toLowerCase()),-1<f.indexOf("%")&&(f=decodeURIComponent(f)),e.indexOf(f)==e.length-f.length)return b[c].replace(/%/g,"%25")};
gxnat.slicerUtils.getFileUrlRelativeToMrbUrl=function(a,b){return goog.string.buildString(b,"!",goog.string.path.basename(goog.string.path.dirname(a)),"/",goog.string.path.basename(a))};
gxnat.slicerUtils.getAnnotations=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var f=[],g=[],h=0,k,l,m="rgb(255,0,0)",n="",p="",q="",u="",t=0,C,B;0==a.length?c(null):(goog.array.forEach(a,function(a){g.push(gxnat.slicerUtils.matchFileToSet(a.getAttribute("fileName"),b.files))}),0==g.length?c(null):goog.array.forEach(g,function(a){gxnat.get(a,function(a){h++;goog.array.forEach(a.split(/\n/),
function(a){if(-1==a.indexOf("#")&&(k=a.split(/,/),1!=k.length)){l=[parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])];u=k[11];m=[1,0,0];q=p=n="";t=0;for(len=e.length;t<len;t++)if(C=e[t],n=C.getAttribute("id"),n===k[0].replace("_","")){q=n;p=C.getAttribute("displayNodeRef");break}len=d.length;for(t=0;t<len;t++)if(B=d[t],n=B.getAttribute("id"),n===p){m=gxnat.slicerNode.toFloatArray(B.getAttribute("color")).map(function(a){return parseFloat(a)});break}f.push(new gxnat.slicerNode.Annotations(l,m,k,
q,p,u))}});h==g.length&&c(f)},"text")}))};gxnat.slicerUtils.getDisplayables=function(a,b,c){var d=[],e=a.getElementsByTagName(c),f=null,g=0,h=e.length;goog.array.forEach(a.getElementsByTagName(b),function(a){for(g=0;g<h;g++)if(f=e[g],f.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new gxnat.slicerNode.Displayable(f.getAttribute("fileName"),a,f));break}});return d};gxnat.slicerUtils.getFibers=function(a){return null};
gxnat.slicerUtils.getVolumes=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=gxnat.slicerUtils.getDisplayables(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],f=[],g="";goog.array.forEach(c,function(a,b){g=a.node.getAttribute("displayNodeRef");1<g.indexOf("LabelMap")?(goog.array.forEach(d,function(b){b.getAttribute("id")==g&&(a.displayNodeElement=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?
a.colorTableFile=serverRoot+gxnat.slicerUtils.GENERIC_COLORTABLE_FILE:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),e.push(a)):f.push(a)});var h="";goog.array.forEach(e,function(a){h=a.node.getAttribute("attributes").split(";");goog.array.forEach(h,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],goog.array.forEach(f,function(b){b.node.getAttribute("id")==refVol&&(b.labelMap=a)}.bind(this)))}.bind(this))});goog.array.forEach(f,function(c){c.properties=
new gxnat.slicerNode.Volume(a,c.node,b);c.labelMap&&(c.properties.labelMap=c.labelMap,delete c.labelMap)});return f};gxnat.slicerUtils.getMeshes=function(a){var b=gxnat.slicerUtils.getDisplayables(a,"Model","ModelStorage");goog.array.forEach(b,function(b){b.properties=new gxnat.slicerNode.Mesh(a,b.node)});return b};goog.exportSymbol("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",gxnat.slicerUtils.GENERIC_COLORTABLE_FILE);goog.exportSymbol("gxnat.slicerUtils.extractMrmls",gxnat.slicerUtils.extractMrmls);
goog.exportSymbol("gxnat.slicerUtils.getMrmlAsXml",gxnat.slicerUtils.getMrmlAsXml);goog.exportSymbol("gxnat.slicerUtils.getMrmlNodes",gxnat.slicerUtils.getMrmlNodes);goog.exportSymbol("gxnat.slicerUtils.createSceneViewProperties",gxnat.slicerUtils.createSceneViewProperties);goog.exportSymbol("gxnat.slicerUtils.getSceneViewNodes",gxnat.slicerUtils.getSceneViewNodes);goog.exportSymbol("gxnat.slicerUtils.getElementsFromMrml",gxnat.slicerUtils.getElementsFromMrml);
goog.exportSymbol("gxnat.slicerUtils.getSceneViewsFromMrml",gxnat.slicerUtils.getSceneViewsFromMrml);goog.exportSymbol("gxnat.slicerUtils.getCameraFromSceneView",gxnat.slicerUtils.getCameraFromSceneView);goog.exportSymbol("gxnat.slicerUtils.getThumbnail",gxnat.slicerUtils.getThumbnail);goog.exportSymbol("gxnat.slicerUtils.mrmlColorToRgb",gxnat.slicerUtils.mrmlColorToRgb);goog.exportSymbol("gxnat.slicerUtils.getBackgroundColorFromSceneView",gxnat.slicerUtils.getBackgroundColorFromSceneView);
goog.exportSymbol("gxnat.slicerUtils.getLayoutFromSceneView",gxnat.slicerUtils.getLayoutFromSceneView);goog.exportSymbol("gxnat.slicerUtils.matchFileToSet",gxnat.slicerUtils.matchFileToSet);goog.exportSymbol("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",gxnat.slicerUtils.getFileUrlRelativeToMrbUrl);goog.exportSymbol("gxnat.slicerUtils.getAnnotations",gxnat.slicerUtils.getAnnotations);goog.exportSymbol("gxnat.slicerUtils.getDisplayables",gxnat.slicerUtils.getDisplayables);
goog.exportSymbol("gxnat.slicerUtils.getFibers",gxnat.slicerUtils.getFibers);goog.exportSymbol("gxnat.slicerUtils.getVolumes",gxnat.slicerUtils.getVolumes);goog.exportSymbol("gxnat.slicerUtils.getMeshes",gxnat.slicerUtils.getMeshes);gxnat.vis.Slicer=function(a,b,c){this.mrbFiles_=[];gxnat.vis.AjaxViewableTree.call(this,"Slicer Scenes",a,b);c&&c(this)};goog.inherits(gxnat.vis.Slicer,gxnat.vis.AjaxViewableTree);goog.exportSymbol("gxnat.vis.Slicer",gxnat.vis.Slicer);gxnat.vis.Slicer.thumbnailExtensions=["jpeg","jpg","png","gif"];gxnat.vis.Slicer.prototype.folderQuerySuffix="resources/Slicer/files";gxnat.vis.Slicer.prototype.fileQuerySuffix="?listContents=true";gxnat.vis.Slicer.prototype.fileContentsKey="File Name";
gxnat.vis.Slicer.prototype.getFileList=function(a){this.filesGotten?this.getMrmlNodes_(a):gxnat.vis.Scan.superClass_.getFileList.call(this,function(){this.getThumbnailImage(function(){this.setViewableMetadata();this.getMrmlNodes_(a)}.bind(this))}.bind(this))};gxnat.vis.Slicer.prototype.getMrmlNodes_=function(a){gxnat.slicerUtils.getMrmlNodes(this.mrbFiles_,this.queryUrl,function(b){gxnat.slicerUtils.getSceneViewNodes(b,function(c){this.convertToViewableGroups(c,b,a)}.bind(this))}.bind(this))};
gxnat.vis.Slicer.prototype.convertToViewableGroups=function(a,b,c){this.mrml=b;this.sceneViews=a;var d,e,f,g;goog.array.forEach(this.sceneViews,function(a){d=[a.volumes||[],a.meshes||[],a.fibers||[]];e=[];goog.array.forEach(d,function(a){goog.array.forEach(a,function(a){f=gxnat.slicerUtils.matchFileToSet(goog.string.path.basename(a.file),this.mrbFiles_);a.properties instanceof gxnat.slicerNode.Volume&&this.adjustVolumeDisplayProperties_(a);e.push(new gxnat.vis.Viewable(f,a.properties))}.bind(this))}.bind(this));
g=new gxnat.vis.ViewableGroup(e);g.setThumbnailUrl(gxnat.slicerUtils.matchFileToSet(gxnat.slicerUtils.getThumbnail(a.element,this.mrml[0].document),this.mrbFiles_));g.setTitle(a.element.getAttribute("name"));g.setRenderProperties(a);this.ViewableGroups.push(g)}.bind(this));c&&c(this)};
gxnat.vis.Slicer.prototype.adjustVolumeDisplayProperties_=function(a){if(a.properties.labelMap&&(a.properties.labelMapFile=gxnat.slicerUtils.matchFileToSet(a.properties.labelMap.file,this.mrbFiles_),goog.isDefAndNotNull(a.properties.labelMap.colorTableFile))){var b=gxnat.slicerUtils.matchFileToSet(a.properties.labelMap.colorTableFile,this.mrbFiles_);goog.isDefAndNotNull(b)||(a.properties.colorTableFile=a.properties.labelMap.colorTableFile)}};
gxnat.vis.Slicer.prototype.getThumbnailImage=function(a){var b="",c=0,d=this.mrbFiles_.length;for(this.thumbnailFiles=[];c<d;c++)b=nrg.string.getFileExtension(this.mrbFiles_[c]),-1!=gxnat.vis.Slicer.thumbnailExtensions.indexOf(b)&&this.thumbnailFiles.push(this.mrbFiles_[c]);goog.array.forEach(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=nrg.string.basename(nrg.string.dirname(this.thumbnailFiles[c]))){this.setThumbnailUrl(this.thumbnailFiles[c]);
break}a&&a(this)};gxnat.vis.Slicer.prototype.addFiles=function(a){goog.isArray(a)||(a=[a]);goog.array.forEach(a,function(a){this.mrbFiles_.push(a)}.bind(this))};goog.exportSymbol("gxnat.vis.Slicer.thumbnailExtensions",gxnat.vis.Slicer.thumbnailExtensions);goog.exportSymbol("gxnat.vis.Slicer.prototype.folderQuerySuffix",gxnat.vis.Slicer.prototype.folderQuerySuffix);goog.exportSymbol("gxnat.vis.Slicer.prototype.fileQuerySuffix",gxnat.vis.Slicer.prototype.fileQuerySuffix);
goog.exportSymbol("gxnat.vis.Slicer.prototype.fileContentsKey",gxnat.vis.Slicer.prototype.fileContentsKey);goog.exportSymbol("gxnat.vis.Slicer.prototype.getFileList",gxnat.vis.Slicer.prototype.getFileList);goog.exportSymbol("gxnat.vis.Slicer.prototype.convertToViewableGroups",gxnat.vis.Slicer.prototype.convertToViewableGroups);goog.exportSymbol("gxnat.vis.Slicer.prototype.getThumbnailImage",gxnat.vis.Slicer.prototype.getThumbnailImage);goog.exportSymbol("gxnat.vis.Slicer.prototype.addFiles",gxnat.vis.Slicer.prototype.addFiles);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
var xiv=function(){};goog.exportSymbol("xiv",xiv);xiv.start=function(a,b,c,d){goog.Disposable.call(this);xiv.start.loadCustomExtensions();xiv.start.adjustDocumentStyle();this.ViewableTypes_={scan:gxnat.vis.Scan,slicer:gxnat.vis.Slicer};this.currState_=goog.isDefAndNotNull(a)?a:xiv.start.States.DEMO;this.modalState_=b;this.rootUrl_=d;this.queryPrefix_=gxnat.Path.getQueryPrefix(d);this.addDataPath_(c)};goog.inherits(xiv.start,goog.Disposable);goog.exportSymbol("xiv.start",xiv.start);
xiv.start.EventType={ADD_SUBJECTS:goog.events.getUniqueId("add_subjects")};xiv.start.ModalStates={FULLSCREEN:"fullscreen",POPUP:"popup",FULLSCREEN_POPUP:"fullscreen-popup",WINDOWED:"windowed",DEMO:"demo",DEMO_FULLSCREEN:"demp-fullscreen"};xiv.start.States={DEMO:"demo",LIVE:"live"};xiv.start.loadCustomExtensions=function(){X.loader.extensions.IMA=[X.parserIMA,null]};xiv.start.adjustDocumentStyle=function(){document.body.style.overflow="hidden"};
xiv.start.revertDocumentStyle_=function(){document.body.style.overflow="visible"};xiv.start.prototype.zippyDataKey_=goog.string.createUniqueString();xiv.start.prototype.animTime_=300;xiv.start.prototype.introTabSlideTime_=1E3;xiv.start.prototype.initExptExpanding_=!1;xiv.start.prototype.initSubjExpanding_=!1;xiv.start.prototype.setServerRoot=function(a){this.serverRoot_=a};
xiv.start.prototype.begin=function(){this.createModal_();this.show();if(this.currState_==xiv.start.States.DEMO){goog.dom.removeNode(this.Modal_.getPopupButton());goog.dom.removeNode(this.Modal_.getCloseButton());var a=goog.Timer.callOnce(function(){delete a;this.startDemoLoadChain_()}.bind(this),this.introTabSlideTime_)}else this.Modal_.setState(this.modalState_),this.startLiveLoadChain_()};xiv.start.prototype.setModalType=function(a){this.modalType_=a};
xiv.start.prototype.createModal_=function(){this.Modal_=new this.modalType_;this.Modal_.setImagePrefix(serverRoot);goog.events.listen(this.Modal_,xiv.start.EventType.ADD_SUBJECTS,this.onModalAddSubjectsClicked_.bind(this));window.onresize=function(){goog.isDefAndNotNull(this.Modal_)&&this.Modal_.updateStyle()}.bind(this)};xiv.start.prototype.onModalAddSubjectsClicked_=function(){this.ProjectTree_.loadSubjects(null,function(a){goog.array.forEach(a,function(a){this.createFoldersFromTreeNode_(a);this.Modal_.getThumbnailGallery().mapSliderToContents()}.bind(this))}.bind(this))};
xiv.start.prototype.show=function(a){this.Modal_.getElement().style.opacity=0;this.Modal_.render();this.setOnZippyExpanded_();this.setModalButtonCallbacks_();this.Modal_.getProjectTab().setExpanded(!0,0,this.introTabSlideTime_);nrg.fx.fadeInFromZero(this.Modal_.getElement(),this.animTime_)};
xiv.start.prototype.startDemoLoadChain_=function(){var a=this.Modal_.getThumbnailGallery(),b={slicer:(new xiv.sampleData.SlicerScenes).getSamples(),scan:(new xiv.sampleData.Scans).getSamples()},c;goog.object.forEach(b,function(a,b){goog.array.forEach(a,function(a){c="scan"==b?new this.ViewableTypes_.scan:new this.ViewableTypes_.slicer;c.addFiles(a.files);c.setFilesGotten(!0);c.setSessionInfo(a.metadata);c.setThumbnailUrl(a.thumbnail);this.addViewableTreeToModal_(c,a.folders)}.bind(this))}.bind(this));
a.getZippyTree().expandAll()};
xiv.start.prototype.startLiveLoadChain_=function(){var a=this.Modal_.getThumbnailGallery().getZippyTree(),b=0;this.collapseZippys_();this.ProjectTree_=new gxnat.ProjectTree(this.dataPaths_[0]);this.ProjectTree_.loadInitBranch(function(c){var d=this.createFoldersFromTreeNode_(c);0==b&&(this.initProjNode_=c,this.initProjFolderNode_=a.setExpanded(d[0]));1==b&&(this.initSubjExpanding_=!0,this.initSubjNode_=c,this.initSubjFolderNode_=a.setExpanded(d[1],this.initProjFolderNode_));2==b&&(this.initExptExpanding_=
!0,this.initExptNode_=c,this.initExptFolderNode_=a.setExpanded(d[2],this.initSubjFolderNode_));b++}.bind(this))};xiv.start.prototype.getFolderTitlesFromTreeNode_=function(a){var b=this.ProjectTree_.getBranchFromEndNode(a),c=this.ProjectTree_.getBranchTitles(a),d=0;goog.object.forEach(b,function(a,b){c[d]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+c[d];d++});return c};
xiv.start.prototype.createFoldersFromTreeNode_=function(a){var b=this.ProjectTree_.getBranchUris(a);a=this.getFolderTitlesFromTreeNode_(a);this.addFoldersToGallery_(a,b);return a};
xiv.start.prototype.onSubjectZippyExpanded_=function(a){this.ProjectTree_.loadExperiments(a.originalUrl,null,function(b){if(a.pathByLevel("subjects")==this.initPath_.pathByLevel("subjects")&&this.initSubjExpanding_){var c=this.initPath_.pathByLevel("experiments");this.initExptNode_=this.ProjectTree_.getExperimentNodeByUri(c);goog.array.remove(b,this.initExptNode_);goog.array.insertAt(b,this.initExptNode_,0);this.initSubjExpanding_=!1}goog.array.forEach(b,function(a){this.createFoldersFromTreeNode_(a)}.bind(this))}.bind(this),
"experiments")};xiv.start.prototype.onExperimentZippyExpanded_=function(a){this.loadExperiment_(a.originalUrl)};xiv.start.prototype.onZippyExpanded_=function(a){if(goog.isDefAndNotNull(a.node[this.zippyDataKey_]))switch(a=new gxnat.Path(a.node[this.zippyDataKey_]),a.getDeepestLevel()){case "subjects":this.onSubjectZippyExpanded_(a);break;case "experiments":this.onExperimentZippyExpanded_(a)}};
xiv.start.prototype.setOnZippyExpanded_=function(){goog.events.listen(this.Modal_.getThumbnailGallery().getZippyTree(),nrg.ui.ZippyNode.EventType.EXPANDED,this.onZippyExpanded_.bind(this))};xiv.start.prototype.hide=function(a){nrg.fx.fadeOut(this.Modal_.getElement(),this.animTime_,a)};
xiv.start.prototype.addDataPath_=function(a){this.dataPaths_=this.dataPaths_?this.dataPaths_:[];a="/"!==a[0]?"/"+a:a;-1===this.dataPaths_.indexOf(this.queryPrefix_+a)&&(a=-1===a.indexOf(this.queryPrefix_)?this.queryPrefix_+a:a,this.dataPaths_.push(a));1==this.dataPaths_.length&&(this.initPath_=new gxnat.Path(this.dataPaths_[0]))};xiv.start.prototype.dispose=function(){this.hide(this.dispose_.bind(this))};
xiv.start.prototype.loadExperiment_=function(a,b){if(!goog.isDefAndNotNull(this.loadedExperiments_))this.loadedExperiments_=[];else if(-1<this.loadedExperiments_.indexOf(a)){window.console.log("don't need to reload",a);return}var c=this.ProjectTree_.getExperimentNodeByUri(a),c=this.ProjectTree_.getBranchFromEndNode(c),c=new gxnat.vis.ViewableTree.metadataCollection(c.projects[gxnat.ProjectTree.METADATA_KEY],c.subjects[gxnat.ProjectTree.METADATA_KEY],c.experiments[gxnat.ProjectTree.METADATA_KEY]);
this.fetchViewableTreesAtExperiment_(a,function(){this.loadedExperiments_.push(a);goog.isDefAndNotNull(b)&&b();this.initExptExpanding_&&(this.initExptExpanding_=!1,goog.object.forEach(this.initSubjFolderNode_.getNodes(),function(a){}.bind(this)))}.bind(this),c)};xiv.start.prototype.onZippyAdded_=function(a){var b=a.node.getZippy().animationDuration;a.node.getZippy().animationDuration=0;a.node.getZippy().animationDuration=b};
xiv.start.prototype.collapseZippys_=function(){this.Modal_.getThumbnailGallery()&&goog.events.listen(this.Modal_.getThumbnailGallery().getZippyTree(),nrg.ui.ZippyTree.EventType.NODEADDED,this.onZippyAdded_.bind(this))};xiv.start.prototype.setModalButtonCallbacks_=function(){goog.events.listen(this.Modal_.getPopupButton(),goog.events.EventType.CLICK,this.createModalPopup_.bind(this));goog.events.listen(this.Modal_.getCloseButton(),goog.events.EventType.CLICK,this.dispose.bind(this))};
xiv.start.prototype.createModalPopup_=function(){var a=open(this.rootUrl_+"/scripts/viewer/xiv/popup.html?"+this.dataPaths_[0],"XImgView","width=1200,height=800");a.focus();var b=this.dataPaths_[0];a.onload=function(){a.launchXImgView(b,xiv.start.ModalStates.POPUP,serverRoot)}.bind(this);this.dispose()};
xiv.start.prototype.fetchViewableTreesAtExperiment_=function(a,b,c){this.getViewableTreesFromXnat_(a,function(a){var b=a.getQueryUrl();this.storeViewableTree_(a,b,function(a){this.addViewableTreeToModal_(a)}.bind(this));goog.isDefAndNotNull(c)&&(this.ViewableTrees_[b].setProjectMetadata(c.project),this.ViewableTrees_[b].setSubjectMetadata(c.subject),this.ViewableTrees_[b].setExperimentMetadata(c.experiment))}.bind(this),b)};
xiv.start.prototype.addFoldersToGallery_=function(a,b){var c=this.Modal_.getThumbnailGallery().getZippyTree();c.createBranch(a);zippyNodes=c.getFolderNodes(a);goog.array.forEach(zippyNodes,function(a,c){goog.isDefAndNotNull(b)&&goog.isDefAndNotNull(b[c])&&(goog.isDefAndNotNull(a[this.zippyDataKey_])||(a[this.zippyDataKey_]=b[c]))}.bind(this))};
xiv.start.prototype.addViewableTreeToModal_=function(a,b){var c=this.Modal_.getThumbnailGallery();if(goog.isDefAndNotNull(c)){if(!goog.isDefAndNotNull(b)&&goog.isDefAndNotNull(this.ProjectTree_)){var d=this.ProjectTree_.getExperimentNodeByUri(a.getExperimentUrl());b=this.getFolderTitlesFromTreeNode_(d)}"Scans"!=a.getCategory()&&b.push(a.getCategory());a.getFileList(function(){if(0<a.getViewableGroups().length){var d=c.createAndAddThumbnail(a,b);if("Scans"!=a.getCategory()){var f=c.getZippyTree().getFolderNodes(b);
0<b.length&&1<f.length&&c.setExpanded(b[b.length-1],f[f.length-2])}c.setHoverParent(this.Modal_.getElement());d.setImage(a.getThumbnailUrl());d.updateHoverable()}}.bind(this))}};xiv.start.prototype.storeViewableTree_=function(a,b,c){this.ViewableTrees_=this.ViewableTrees_?this.ViewableTrees_:{};goog.isDefAndNotNull(this.ViewableTrees_[b])||(this.ViewableTrees_[b]=a,c(a))};
xiv.start.prototype.dispose_=function(){xiv.start.superClass_.dispose.call(this);xiv.start.revertDocumentStyle_();goog.object.forEach(this.ViewableTrees_,function(a,b){a.dispose();delete this.ViewableTrees_[b]}.bind(this));delete this.ViewableTrees_;this.ProjectTree_&&(this.ProjectTree_.dispose(),delete this.ProjectTree_);delete this.dataPaths_;delete this.rootUrl_;delete this.queryPrefix_;delete this.iconUrl_;goog.isDefAndNotNull(this.initPath_)&&(this.initPath_.dispose(),delete this.initPath_);
delete this.initExptExpanding_;delete this.initSubjExpanding_;delete this.initProjNode_;delete this.initSubjNode_;delete this.initExptNode_;delete this.initProjFolderNode_;delete this.initSubjFolderNode_;delete this.initExptFolderNode_;goog.events.removeAll(this.Modal_);this.Modal_.dispose();goog.dom.removeNode(this.Modal_.getElement());delete this.Modal_};
xiv.start.prototype.getViewableTreesFromXnat_=function(a,b,c){var d=goog.object.getCount(this.ViewableTypes_),e=0;goog.object.forEach(this.ViewableTypes_,function(f){gxnat.vis.AjaxViewableTree.getViewableTrees(a,f,b,function(){e++;e===d&&goog.isDefAndNotNull(c)&&c()})})};
xiv.start.isCompatible=function(){var a=!0,b=goog.labs.userAgent.browser.getVersion(),c={Chrome:{isBrowser:goog.labs.userAgent.browser.isChrome(),minVersion:11},IE:{isBrowser:goog.labs.userAgent.browser.isIE(),minVersion:11},Safari:{isBrowser:goog.labs.userAgent.browser.isSafari(),minVersion:5.1},Opera:{isBrowser:goog.labs.userAgent.browser.isOpera(),minVersion:12},Firefox:{isBrowser:goog.labs.userAgent.browser.isFirefox(),minVersion:4}},d=!1;goog.object.forEach(c,function(c){c.isBrowser&&!d&&1==
goog.string.compareVersions(c.minVersion,b)&&(xiv.start.onOutdatedBrowser_(),a=!1,d=!0)});a&&!xiv.start.checkForWebGL()&&(xiv.start.onWebGLDisabled_(),a=!1);return a};
xiv.start.onOutdatedBrowser_=function(){var a=new nrg.ui.ErrorOverlay("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>");a.addBackground();a.addCloseButton();var b=a.addImage();goog.dom.classes.add(b,nrg.ui.ErrorOverlay.CSS.NO_WEBGL_IMAGE);b.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";a.getElement().style.position="fixed";a.getElement().style.height=
"240px";a.addText("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>");a.getTextElements()[0].style.top="120px";a.render();a.getElement().style.opacity=0;nrg.fx.fadeInFromZero(a.getElement(),400)};
xiv.start.onWebGLDisabled_=function(){var a='<br>It looks like <a style="color: #00FFFF" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">WebGL or Experimental-WebGL</a> is disabled.<br><br>How to enable WebGL in ',b,c=':<br> <a  style="color: #00FFFF" href=';goog.labs.userAgent.browser.isIE()?(b="Internet Explorer",c+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx</a>'):goog.labs.userAgent.browser.isChrome()?
(b="Chrome",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):goog.labs.userAgent.browser.isFirefox()?(b="Firefox",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):goog.labs.userAgent.browser.isSafari()?(b="Safari",c+='"https://discussions.apple.com/thread/3300585?start=0">https://discussions.apple.com/thread/3300585?start=0</a>'):goog.labs.userAgent.browser.isOpera()&&
(b="Opera",c+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html</a>');a+=b+c;b=new nrg.ui.ErrorOverlay(a);b.addBackground();b.addCloseButton();c=b.addImage();goog.dom.classes.add(c,nrg.ui.ErrorOverlay.CSS.NO_WEBGL_IMAGE);c.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";b.addText(a);b.getTextElements()[0].style.top="120px";b.render();b.getElement().style.position=
"fixed";b.getElement().style.opacity=0;nrg.fx.fadeInFromZero(b.getElement(),400)};xiv.start.checkForWebGL=function(){var a=goog.dom.createDom("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return goog.isDefAndNotNull(b)?!0:!1};goog.exportSymbol("xiv.start.States",xiv.start.States);goog.exportSymbol("xiv.start.loadCustomExtensions",xiv.start.loadCustomExtensions);goog.exportSymbol("xiv.start.adjustDocumentStyle",xiv.start.adjustDocumentStyle);
goog.exportSymbol("xiv.start.ModalStates",xiv.start.ModalStates);goog.exportSymbol("xiv.start.checkForWebGL",xiv.start.checkForWebGL);goog.exportSymbol("xiv.start.isCompatible",xiv.start.isCompatible);goog.exportSymbol("xiv.start.prototype.setServerRoot",xiv.start.prototype.setServerRoot);goog.exportSymbol("xiv.start.prototype.setModalType",xiv.start.prototype.setModalType);goog.exportSymbol("xiv.start.prototype.begin",xiv.start.prototype.begin);goog.exportSymbol("xiv.start.prototype.show",xiv.start.prototype.show);
goog.exportSymbol("xiv.start.prototype.hide",xiv.start.prototype.hide);goog.exportSymbol("xiv.start.prototype.dispose",xiv.start.prototype.dispose);window["xiv.start.isCompatible"]=xiv.start.isCompatible;window["xiv.start.checkForWebGL"]=xiv.start.checkForWebGL;window["xiv.start.ModalStates"]=xiv.start.ModalStates;xiv.start.prototype.setServerRoot=xiv.start.prototype.setServerRoot;xiv.start.prototype.begin=xiv.start.prototype.begin;goog.fx.AbstractDragDrop=function(){goog.events.EventTarget.call(this);this.items_=[];this.targets_=[];this.scrollableContainers_=[]};goog.inherits(goog.fx.AbstractDragDrop,goog.events.EventTarget);goog.fx.AbstractDragDrop.DUMMY_TARGET_MIN_SIZE_=10;goog.fx.AbstractDragDrop.prototype.isSource_=!1;goog.fx.AbstractDragDrop.prototype.isTarget_=!1;goog.fx.AbstractDragDrop.prototype.initialized_=!1;
goog.fx.AbstractDragDrop.EventType={DRAGOVER:"dragover",DRAGOUT:"dragout",DRAG:"drag",DROP:"drop",DRAGSTART:"dragstart",DRAGEND:"dragend"};goog.fx.AbstractDragDrop.initDragDistanceThreshold=5;goog.fx.AbstractDragDrop.prototype.setDragClass=function(a){this.dragClass_=a};goog.fx.AbstractDragDrop.prototype.setSourceClass=function(a){this.sourceClass_=a};goog.fx.AbstractDragDrop.prototype.setTargetClass=function(a){this.targetClass_=a};goog.fx.AbstractDragDrop.prototype.isInitialized=function(){return this.initialized_};
goog.fx.AbstractDragDrop.prototype.addTarget=function(a){this.targets_.push(a);this.isSource_=a.isTarget_=!0};goog.fx.AbstractDragDrop.prototype.setScrollTarget=function(a){this.scrollTarget_=a};goog.fx.AbstractDragDrop.prototype.init=function(){if(!this.initialized_){for(var a,b=0;a=this.items_[b];b++)this.initItem(a);this.initialized_=!0}};
goog.fx.AbstractDragDrop.prototype.initItem=function(a){this.isSource_&&(goog.events.listen(a.element,goog.events.EventType.MOUSEDOWN,a.mouseDown_,!1,a),this.sourceClass_&&goog.dom.classlist.add(goog.asserts.assert(a.element),this.sourceClass_));this.isTarget_&&this.targetClass_&&goog.dom.classlist.add(goog.asserts.assert(a.element),this.targetClass_)};
goog.fx.AbstractDragDrop.prototype.disposeItem=function(a){this.isSource_&&(goog.events.unlisten(a.element,goog.events.EventType.MOUSEDOWN,a.mouseDown_,!1,a),this.sourceClass_&&goog.dom.classlist.remove(goog.asserts.assert(a.element),this.sourceClass_));this.isTarget_&&this.targetClass_&&goog.dom.classlist.remove(goog.asserts.assert(a.element),this.targetClass_);a.dispose()};
goog.fx.AbstractDragDrop.prototype.removeItems=function(){for(var a,b=0;a=this.items_[b];b++)this.disposeItem(a);this.items_.length=0};goog.fx.AbstractDragDrop.prototype.maybeStartDrag=function(a,b){b.maybeStartDrag_(a,b.element)};
goog.fx.AbstractDragDrop.prototype.startDrag=function(a,b){if(!this.dragItem_){this.dragItem_=b;var c=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGSTART,this,this.dragItem_);if(!1==this.dispatchEvent(c))this.dragItem_=null;else{c=b.getCurrentDragElement();this.dragEl_=this.createDragElement(c);var d=goog.dom.getOwnerDocument(c);d.body.appendChild(this.dragEl_);this.dragger_=this.createDraggerFor(c,this.dragEl_,a);this.dragger_.setScrollTarget(this.scrollTarget_);goog.events.listen(this.dragger_,
goog.fx.Dragger.EventType.DRAG,this.moveDrag_,!1,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.END,this.endDrag,!1,this);goog.events.listen(d.body,goog.events.EventType.SELECTSTART,this.suppressSelect_);this.recalculateDragTargets();this.recalculateScrollableContainers();this.activeTarget_=null;this.initScrollableContainerListeners_();this.dragger_.startDrag(a);a.preventDefault()}}};
goog.fx.AbstractDragDrop.prototype.recalculateDragTargets=function(){this.targetList_=[];for(var a,b=0;a=this.targets_[b];b++)for(var c,d=0;c=a.items_[d];d++)this.addDragTarget_(a,c);this.targetBox_||(this.targetBox_=new goog.math.Box(0,0,0,0))};
goog.fx.AbstractDragDrop.prototype.recalculateScrollableContainers=function(){var a,b,c,d;for(b=0;a=this.scrollableContainers_[b];b++)a.containedTargets_=[],a.savedScrollLeft_=a.element_.scrollLeft,a.savedScrollTop_=a.element_.scrollTop,c=goog.style.getPageOffset(a.element_),d=goog.style.getSize(a.element_),a.box_=new goog.math.Box(c.y,c.x+d.width,c.y+d.height,c.x);for(b=0;d=this.targetList_[b];b++)for(c=0;a=this.scrollableContainers_[c];c++)goog.dom.contains(a.element_,d.element_)&&(a.containedTargets_.push(d),
d.scrollableContainer_=a)};goog.fx.AbstractDragDrop.prototype.createDraggerFor=function(a,b,c){a=this.getDragElementPosition(a,b,c);b.style.position="absolute";b.style.left=a.x+"px";b.style.top=a.y+"px";return new goog.fx.Dragger(b)};
goog.fx.AbstractDragDrop.prototype.endDrag=function(a){var b=a.dragCanceled?null:this.activeTarget_;if(b&&b.target_){var c=a.clientX;a=a.clientY;var d=this.getScrollPos(),e=c+d.x,d=a+d.y,f;this.subtargetFunction_&&(f=this.subtargetFunction_(b.item_,b.box_,e,d));var g=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAG,this,this.dragItem_,b.target_,b.item_,b.element_,c,a,e,d);this.dispatchEvent(g);c=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DROP,this,this.dragItem_,
b.target_,b.item_,b.element_,c,a,e,d,f);b.target_.dispatchEvent(c)}b=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGEND,this,this.dragItem_);this.dispatchEvent(b);goog.events.unlisten(this.dragger_,goog.fx.Dragger.EventType.DRAG,this.moveDrag_,!1,this);goog.events.unlisten(this.dragger_,goog.fx.Dragger.EventType.END,this.endDrag,!1,this);b=goog.dom.getOwnerDocument(this.dragItem_.getCurrentDragElement());goog.events.unlisten(b.body,goog.events.EventType.SELECTSTART,this.suppressSelect_);
this.afterEndDrag(this.activeTarget_?this.activeTarget_.item_:null)};goog.fx.AbstractDragDrop.prototype.afterEndDrag=function(a){this.disposeDrag()};goog.fx.AbstractDragDrop.prototype.disposeDrag=function(){this.disposeScrollableContainerListeners_();this.dragger_.dispose();goog.dom.removeNode(this.dragEl_);delete this.dragItem_;delete this.dragEl_;delete this.dragger_;delete this.targetList_;delete this.activeTarget_};
goog.fx.AbstractDragDrop.prototype.moveDrag_=function(a){var b=this.getEventPosition(a),c=b.x,d=b.y,e=this.activeTarget_,f;if(e){this.subtargetFunction_&&e.target_&&(f=this.subtargetFunction_(e.item_,e.box_,c,d));if(e.box_.contains(b)&&f==this.activeSubtarget_)return;if(e.target_){var g=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOUT,this,this.dragItem_,e.target_,e.item_,e.element_);this.dispatchEvent(g);g=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOUT,this,
this.dragItem_,e.target_,e.item_,e.element_,void 0,void 0,void 0,void 0,this.activeSubtarget_);e.target_.dispatchEvent(g)}this.activeSubtarget_=f;this.activeTarget_=null}this.targetBox_.contains(b)&&((e=this.activeTarget_=this.getTargetFromPosition_(b))&&e.target_?(this.subtargetFunction_&&(f=this.subtargetFunction_(e.item_,e.box_,c,d)),b=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOVER,this,this.dragItem_,e.target_,e.item_,e.element_),b.subtarget=f,this.dispatchEvent(b),a=new goog.fx.DragDropEvent(goog.fx.AbstractDragDrop.EventType.DRAGOVER,
this,this.dragItem_,e.target_,e.item_,e.element_,a.clientX,a.clientY,void 0,void 0,f),e.target_.dispatchEvent(a)):e||(this.activeTarget_=this.maybeCreateDummyTargetForPosition_(c,d)))};goog.fx.AbstractDragDrop.prototype.suppressSelect_=function(a){return!1};goog.fx.AbstractDragDrop.prototype.initScrollableContainerListeners_=function(){var a,b;for(b=0;a=this.scrollableContainers_[b];b++)goog.events.listen(a.element_,goog.events.EventType.SCROLL,this.containerScrollHandler_,!1,this)};
goog.fx.AbstractDragDrop.prototype.disposeScrollableContainerListeners_=function(){for(var a=0,b;b=this.scrollableContainers_[a];a++)goog.events.unlisten(b.element_,"scroll",this.containerScrollHandler_,!1,this),b.containedTargets_=[]};goog.fx.AbstractDragDrop.prototype.addScrollableContainer=function(a){this.scrollableContainers_.push(new goog.fx.ScrollableContainer_(a))};
goog.fx.AbstractDragDrop.prototype.removeAllScrollableContainers=function(){this.disposeScrollableContainerListeners_();this.scrollableContainers_=[]};
goog.fx.AbstractDragDrop.prototype.containerScrollHandler_=function(a){for(var b=0,c;c=this.scrollableContainers_[b];b++)if(a.target==c.element_){var d=c.savedScrollTop_-c.element_.scrollTop,e=c.savedScrollLeft_-c.element_.scrollLeft;c.savedScrollTop_=c.element_.scrollTop;c.savedScrollLeft_=c.element_.scrollLeft;this.dummyTarget_&&this.activeTarget_==this.dummyTarget_&&(0<d?this.dummyTarget_.box_.top+=d:this.dummyTarget_.box_.bottom+=d,0<e?this.dummyTarget_.box_.left+=e:this.dummyTarget_.box_.right+=
e);for(var f=0,g;g=c.containedTargets_[f];f++)g=g.box_,g.top+=d,g.left+=e,g.bottom+=d,g.right+=e,this.calculateTargetBox_(g)}this.dragger_.onScroll_(a)};goog.fx.AbstractDragDrop.prototype.setSubtargetFunction=function(a){this.subtargetFunction_=a};goog.fx.AbstractDragDrop.prototype.createDragElement=function(a){a=this.createDragElementInternal(a);goog.asserts.assert(a);this.dragClass_&&goog.dom.classlist.add(a,this.dragClass_);return a};
goog.fx.AbstractDragDrop.prototype.getDragElementPosition=function(a,b,c){b=goog.style.getPageOffset(a);a=goog.style.getMarginBox(a);b.x-=2*(a.left||0);b.y-=2*(a.top||0);return b};goog.fx.AbstractDragDrop.prototype.getDragger=function(){return this.dragger_};goog.fx.AbstractDragDrop.prototype.cloneNode_=function(a){return goog.fx.Dragger.cloneNode(a)};goog.fx.AbstractDragDrop.prototype.createDragElementInternal=function(a){return this.cloneNode_(a)};
goog.fx.AbstractDragDrop.prototype.addDragTarget_=function(a,b){for(var c=b.getDraggableElements(),d=this.targetList_,e=0;e<c.length;e++){var f=c[e],g=this.getElementBox(b,f);d.push(new goog.fx.ActiveDropTarget_(g,a,b,f));this.calculateTargetBox_(g)}};goog.fx.AbstractDragDrop.prototype.getElementBox=function(a,b){var c=goog.style.getPageOffset(b),d=goog.style.getSize(b);return new goog.math.Box(c.y,c.x+d.width,c.y+d.height,c.x)};
goog.fx.AbstractDragDrop.prototype.calculateTargetBox_=function(a){if(1==this.targetList_.length)this.targetBox_=new goog.math.Box(a.top,a.right,a.bottom,a.left);else{var b=this.targetBox_;b.left=Math.min(a.left,b.left);b.right=Math.max(a.right,b.right);b.top=Math.min(a.top,b.top);b.bottom=Math.max(a.bottom,b.bottom)}};
goog.fx.AbstractDragDrop.prototype.maybeCreateDummyTargetForPosition_=function(a,b){this.dummyTarget_||(this.dummyTarget_=new goog.fx.ActiveDropTarget_(this.targetBox_.clone()));var c=this.dummyTarget_.box_;c.top=this.targetBox_.top;c.right=this.targetBox_.right;c.bottom=this.targetBox_.bottom;c.left=this.targetBox_.left;for(var d=0,e;e=this.targetList_[d];d++){var f=e.box_;e.scrollableContainer_&&(e=e.scrollableContainer_.box_,f=new goog.math.Box(Math.max(f.top,e.top),Math.min(f.right,e.right),Math.min(f.bottom,
e.bottom),Math.max(f.left,e.left)));e=null;a>=f.right?e=f.right>c.left?f.right:c.left:a<f.left&&(e=f.left<c.right?f.left:c.right);var g=null;b>=f.bottom?g=f.bottom>c.top?f.bottom:c.top:b<f.top&&(g=f.top<c.bottom?f.top:c.bottom);goog.isNull(e)||goog.isNull(g)||(Math.abs(e-a)>Math.abs(g-b)?g=null:e=null);goog.isNull(e)?goog.isNull(g)||(g<=b?c.top=g:c.bottom=g):e<=a?c.left=e:c.right=e}return(c.right-c.left)*(c.bottom-c.top)>=goog.fx.AbstractDragDrop.DUMMY_TARGET_MIN_SIZE_?this.dummyTarget_:null};
goog.fx.AbstractDragDrop.prototype.getTargetFromPosition_=function(a){for(var b,c=0;b=this.targetList_[c];c++)if(b.box_.contains(a))if(b.scrollableContainer_){if(b.scrollableContainer_.box_.contains(a))return b}else return b;return null};goog.fx.AbstractDragDrop.prototype.isInside=function(a,b,c){return a>=c.left&&a<c.right&&b>=c.top&&b<c.bottom};goog.fx.AbstractDragDrop.prototype.getScrollPos=function(){return goog.dom.getDomHelper(this.dragEl_).getDocumentScroll()};
goog.fx.AbstractDragDrop.prototype.getEventPosition=function(a){var b=this.getScrollPos();return new goog.math.Coordinate(a.clientX+b.x,a.clientY+b.y)};goog.fx.AbstractDragDrop.prototype.disposeInternal=function(){goog.fx.AbstractDragDrop.superClass_.disposeInternal.call(this);this.removeItems()};
goog.fx.DragDropEvent=function(a,b,c,d,e,f,g,h,k,l,m){goog.events.Event.call(this,a);this.dragSource=b;this.dragSourceItem=c;this.dropTarget=d;this.dropTargetItem=e;this.dropTargetElement=f;this.clientX=g;this.clientY=h;this.viewportX=k;this.viewportY=l;this.subtarget=m};goog.inherits(goog.fx.DragDropEvent,goog.events.Event);goog.fx.DragDropEvent.prototype.disposeInternal=function(){};
goog.fx.DragDropItem=function(a,b){goog.events.EventTarget.call(this);this.element=goog.dom.getElement(a);this.data=b;this.parent_=null;this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);if(!this.element)throw Error("Invalid argument");};goog.inherits(goog.fx.DragDropItem,goog.events.EventTarget);goog.fx.DragDropItem.prototype.currentDragElement_=null;goog.fx.DragDropItem.prototype.getData=function(){return this.data};
goog.fx.DragDropItem.prototype.getDraggableElement=function(a){return a};goog.fx.DragDropItem.prototype.getCurrentDragElement=function(){return this.currentDragElement_};goog.fx.DragDropItem.prototype.getDraggableElements=function(){return[this.element]};goog.fx.DragDropItem.prototype.mouseDown_=function(a){if(a.isMouseActionButton()){var b=this.getDraggableElement(a.target);b&&this.maybeStartDrag_(a,b)}};goog.fx.DragDropItem.prototype.setParent=function(a){this.parent_=a};
goog.fx.DragDropItem.prototype.maybeStartDrag_=function(a,b){var c=goog.events.EventType;this.eventHandler_.listen(b,c.MOUSEMOVE,this.mouseMove_,!1).listen(b,c.MOUSEOUT,this.mouseMove_,!1);var d=goog.dom.getOwnerDocument(b);this.eventHandler_.listen(d,c.MOUSEUP,this.mouseUp_,!0);this.currentDragElement_=b;this.startPosition_=new goog.math.Coordinate(a.clientX,a.clientY);a.preventDefault()};
goog.fx.DragDropItem.prototype.mouseMove_=function(a){var b=Math.abs(a.clientX-this.startPosition_.x)+Math.abs(a.clientY-this.startPosition_.y),c=this.currentDragElement_,c=a.type==goog.events.EventType.MOUSEOUT&&a.target==c;if(b>goog.fx.AbstractDragDrop.initDragDistanceThreshold||c)this.eventHandler_.removeAll(),this.parent_.startDrag(a,this)};goog.fx.DragDropItem.prototype.mouseUp_=function(a){this.eventHandler_.removeAll();delete this.startPosition_;this.currentDragElement_=null};
goog.fx.ActiveDropTarget_=function(a,b,c,d){this.box_=a;this.target_=b;this.item_=c;this.element_=d};goog.fx.ActiveDropTarget_.prototype.scrollableContainer_=null;goog.fx.ScrollableContainer_=function(a){this.containedTargets_=[];this.element_=a;this.savedScrollTop_=this.savedScrollLeft_=0;this.box_=null};goog.fx.DragDrop=function(a,b){goog.fx.AbstractDragDrop.call(this);var c=new goog.fx.DragDropItem(a,b);c.setParent(this);this.items_.push(c)};goog.inherits(goog.fx.DragDrop,goog.fx.AbstractDragDrop);goog.testing={};goog.testing.events={};goog.testing.events.Event=function(a,b){this.type=a;this.currentTarget=this.target=b||null};goog.testing.events.Event.prototype.propagationStopped_=!1;goog.testing.events.Event.prototype.defaultPrevented=!1;goog.testing.events.Event.prototype.returnValue_=!0;goog.testing.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.testing.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};
goog.testing.events.assertEventTarget_=function(a){return goog.asserts.assert(a,"EventTarget should be defined.")};goog.testing.events.setEventClientXY_=function(a,b){if(!b&&a.target&&a.target.nodeType==goog.dom.NodeType.ELEMENT)try{b=goog.style.getClientPosition(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY};
goog.testing.events.fireClickSequence=function(a,b,c,d){return!!(goog.testing.events.fireMouseDownEvent(a,b,c,d)&goog.testing.events.fireMouseUpEvent(a,b,c,d)&goog.testing.events.fireClickEvent(a,b,c,d))};
goog.testing.events.fireDoubleClickSequence=function(a,b,c){var d=goog.events.BrowserEvent.MouseButton.LEFT;return!!(goog.testing.events.fireMouseDownEvent(a,d,b,c)&goog.testing.events.fireMouseUpEvent(a,d,b,c)&goog.testing.events.fireClickEvent(a,d,b,c)&(goog.userAgent.IE||goog.testing.events.fireMouseDownEvent(a,d,b,c))&goog.testing.events.fireMouseUpEvent(a,d,b,c)&(goog.userAgent.IE||goog.testing.events.fireClickEvent(a,d,b,c))&goog.testing.events.fireDoubleClickEvent(a,b,c))};
goog.testing.events.fireKeySequence=function(a,b,c){return goog.testing.events.fireNonAsciiKeySequence(a,b,b,c)};
goog.testing.events.fireNonAsciiKeySequence=function(a,b,c,d){var e=new goog.testing.events.Event(goog.events.EventType.KEYDOWN,a),f=new goog.testing.events.Event(goog.events.EventType.KEYUP,a);a=new goog.testing.events.Event(goog.events.EventType.KEYPRESS,a);e.keyCode=f.keyCode=b;a.keyCode=c;d&&(goog.object.extend(e,d),goog.object.extend(f,d),goog.object.extend(a,d));c=!0;goog.testing.events.isBrokenGeckoMacActionKey_(e)||(c=goog.testing.events.fireBrowserEvent(e));!goog.events.KeyCodes.firesKeyPressEvent(b,
void 0,e.shiftKey,e.ctrlKey,e.altKey)||goog.userAgent.IE&&!c||(c&=goog.testing.events.fireBrowserEvent(a));return!!(c&goog.testing.events.fireBrowserEvent(f))};goog.testing.events.isBrokenGeckoMacActionKey_=function(a){return goog.userAgent.MAC&&goog.userAgent.GECKO&&(a.keyCode==goog.events.KeyCodes.C||a.keyCode==goog.events.KeyCodes.X||a.keyCode==goog.events.KeyCodes.V)&&a.metaKey};
goog.testing.events.fireMouseOverEvent=function(a,b,c){a=new goog.testing.events.Event(goog.events.EventType.MOUSEOVER,a);a.relatedTarget=b;goog.testing.events.setEventClientXY_(a,c);return goog.testing.events.fireBrowserEvent(a)};goog.testing.events.fireMouseMoveEvent=function(a,b){var c=new goog.testing.events.Event(goog.events.EventType.MOUSEMOVE,a);goog.testing.events.setEventClientXY_(c,b);return goog.testing.events.fireBrowserEvent(c)};
goog.testing.events.fireMouseOutEvent=function(a,b,c){a=new goog.testing.events.Event(goog.events.EventType.MOUSEOUT,a);a.relatedTarget=b;goog.testing.events.setEventClientXY_(a,c);return goog.testing.events.fireBrowserEvent(a)};
goog.testing.events.fireMouseDownEvent=function(a,b,c,d){b=b||goog.events.BrowserEvent.MouseButton.LEFT;b=goog.events.BrowserFeature.HAS_W3C_BUTTON?b:goog.events.BrowserEvent.IEButtonMap[b];return goog.testing.events.fireMouseButtonEvent_(goog.events.EventType.MOUSEDOWN,a,b,c,d)};
goog.testing.events.fireMouseUpEvent=function(a,b,c,d){b=b||goog.events.BrowserEvent.MouseButton.LEFT;b=goog.events.BrowserFeature.HAS_W3C_BUTTON?b:goog.events.BrowserEvent.IEButtonMap[b];return goog.testing.events.fireMouseButtonEvent_(goog.events.EventType.MOUSEUP,a,b,c,d)};goog.testing.events.fireClickEvent=function(a,b,c,d){return goog.testing.events.fireMouseButtonEvent_(goog.events.EventType.CLICK,a,b,c,d)};
goog.testing.events.fireDoubleClickEvent=function(a,b,c){return goog.testing.events.fireMouseButtonEvent_(goog.events.EventType.DBLCLICK,a,goog.events.BrowserEvent.MouseButton.LEFT,b,c)};goog.testing.events.fireMouseButtonEvent_=function(a,b,c,d,e){a=new goog.testing.events.Event(a,b);a.button=c||goog.events.BrowserEvent.MouseButton.LEFT;goog.testing.events.setEventClientXY_(a,d);e&&goog.object.extend(a,e);return goog.testing.events.fireBrowserEvent(a)};
goog.testing.events.fireContextMenuEvent=function(a,b){var c=goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.BrowserEvent.MouseButton.LEFT:goog.events.BrowserEvent.MouseButton.RIGHT,d=new goog.testing.events.Event(goog.events.EventType.CONTEXTMENU,a);d.button=goog.events.BrowserFeature.HAS_W3C_BUTTON?c:goog.events.BrowserEvent.IEButtonMap[c];d.ctrlKey=goog.userAgent.MAC;goog.testing.events.setEventClientXY_(d,b);return goog.testing.events.fireBrowserEvent(d)};
goog.testing.events.fireContextMenuSequence=function(a,b){var c=goog.userAgent.MAC?{ctrlKey:!0}:{},d=goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.BrowserEvent.MouseButton.LEFT:goog.events.BrowserEvent.MouseButton.RIGHT,e=goog.testing.events.fireMouseDownEvent(a,d,b,c);goog.userAgent.WINDOWS?e=e&goog.testing.events.fireMouseUpEvent(a,d,b)&goog.testing.events.fireContextMenuEvent(a,b):(e&=goog.testing.events.fireContextMenuEvent(a,b),e&=goog.testing.events.fireMouseUpEvent(a,d,b,c),goog.userAgent.WEBKIT&&
goog.userAgent.MAC&&(e&=goog.testing.events.fireClickEvent(a,d,b,c)));return!!e};goog.testing.events.firePopStateEvent=function(a,b){var c=new goog.testing.events.Event(goog.events.EventType.POPSTATE,a);c.state=b;return goog.testing.events.fireBrowserEvent(c)};goog.testing.events.fireBlurEvent=function(a){a=new goog.testing.events.Event(goog.events.EventType.BLUR,a);return goog.testing.events.fireBrowserEvent(a)};
goog.testing.events.fireFocusEvent=function(a){a=new goog.testing.events.Event(goog.events.EventType.FOCUS,a);return goog.testing.events.fireBrowserEvent(a)};
goog.testing.events.fireBrowserEvent=function(a){a.returnValue_=!0;for(var b=[],c=a.target;c;c=c.parentNode)b.push(c);for(c=b.length-1;0<=c&&!a.propagationStopped_;c--)goog.events.fireListeners(b[c],a.type,!0,new goog.events.BrowserEvent(a,b[c]));for(c=0;c<b.length&&!a.propagationStopped_;c++)goog.events.fireListeners(b[c],a.type,!1,new goog.events.BrowserEvent(a,b[c]));return a.returnValue_};
goog.testing.events.fireTouchStartEvent=function(a,b,c){a=new goog.testing.events.Event(goog.events.EventType.TOUCHSTART,a);goog.testing.events.setEventClientXY_(a,b);c&&goog.object.extend(a,c);return goog.testing.events.fireBrowserEvent(a)};goog.testing.events.fireTouchMoveEvent=function(a,b,c){a=new goog.testing.events.Event(goog.events.EventType.TOUCHMOVE,a);goog.testing.events.setEventClientXY_(a,b);c&&goog.object.extend(a,c);return goog.testing.events.fireBrowserEvent(a)};
goog.testing.events.fireTouchEndEvent=function(a,b,c){a=new goog.testing.events.Event(goog.events.EventType.TOUCHEND,a);goog.testing.events.setEventClientXY_(a,b);c&&goog.object.extend(a,c);return goog.testing.events.fireBrowserEvent(a)};goog.testing.events.fireTouchSequence=function(a,b,c){return!!(goog.testing.events.fireTouchStartEvent(a,b,c)&goog.testing.events.fireTouchEndEvent(a,b,c))};
goog.testing.events.mixinListenable=function(a){var b=new goog.events.EventTarget;b.setTargetForTesting(a);var c=goog.events.EventTarget.prototype,d=goog.Disposable.prototype,e;for(e in c)if(c.hasOwnProperty(e)||d.hasOwnProperty(e)){var f=c[e];goog.isFunction(f)?a[e]=goog.bind(f,b):a[e]=f}};goog.ui.registry={};goog.ui.registry.getDefaultRenderer=function(a){for(var b;a;){b=goog.getUid(a);if(b=goog.ui.registry.defaultRenderers_[b])break;a=a.superClass_?a.superClass_.constructor:null}return b?goog.isFunction(b.getInstance)?b.getInstance():new b:null};
goog.ui.registry.setDefaultRenderer=function(a,b){if(!goog.isFunction(a))throw Error("Invalid component class "+a);if(!goog.isFunction(b))throw Error("Invalid renderer class "+b);var c=goog.getUid(a);goog.ui.registry.defaultRenderers_[c]=b};goog.ui.registry.getDecoratorByClassName=function(a){return a in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[a]():null};
goog.ui.registry.setDecoratorByClassName=function(a,b){if(!a)throw Error("Invalid class name "+a);if(!goog.isFunction(b))throw Error("Invalid decorator function "+b);goog.ui.registry.decoratorFunctions_[a]=b};goog.ui.registry.getDecorator=function(a){goog.asserts.assert(a);for(var b=goog.dom.classlist.get(a),c=0,d=b.length;c<d;c++)if(a=goog.ui.registry.getDecoratorByClassName(b[c]))return a;return null};
goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={}};goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={};goog.ui.ControlRenderer=function(){};goog.addSingletonGetter(goog.ui.ControlRenderer);goog.ui.ControlRenderer.getCustomRenderer=function(a,b){var c=new a;c.getCssClass=function(){return b};return c};goog.ui.ControlRenderer.CSS_CLASS="goog-control";goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[];
goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_=goog.object.create(goog.a11y.aria.Role.BUTTON,goog.a11y.aria.State.PRESSED,goog.a11y.aria.Role.CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.MENU_ITEM_CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM_RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.TAB,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.TREEITEM,
goog.a11y.aria.State.SELECTED);goog.ui.ControlRenderer.prototype.getAriaRole=function(){};goog.ui.ControlRenderer.prototype.createDom=function(a){var b=a.getDomHelper().createDom("div",this.getClassNames(a).join(" "),a.getContent());this.setAriaStates(a,b);return b};goog.ui.ControlRenderer.prototype.getContentElement=function(a){return a};
goog.ui.ControlRenderer.prototype.enableClassName=function(a,b,c){if(a=a.getElement?a.getElement():a){var d=[b];goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&(d=this.getAppliedCombinedClassNames_(goog.dom.classlist.get(a),b),d.push(b));goog.dom.classlist.enableAll(a,d,c)}};goog.ui.ControlRenderer.prototype.enableExtraClassName=function(a,b,c){this.enableClassName(a,b,c)};goog.ui.ControlRenderer.prototype.canDecorate=function(a){return!0};
goog.ui.ControlRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getContentElement(b);c&&c.firstChild?a.setContentInternal(c.firstChild.nextSibling?goog.array.clone(c.childNodes):c.firstChild):a.setContentInternal(null);var d=0,e=this.getCssClass(),f=this.getStructuralCssClass(),g=!1,h=!1,c=!1,k=goog.array.toArray(goog.dom.classlist.get(b));goog.array.forEach(k,function(a){g||a!=e?h||a!=f?d|=this.getStateFromClass(a):h=!0:(g=!0,f==e&&(h=!0))},this);a.setStateInternal(d);g||
(k.push(e),f==e&&(h=!0));h||k.push(f);var l=a.getExtraClassNames();l&&k.push.apply(k,l);if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var m=this.getAppliedCombinedClassNames_(k);0<m.length&&(k.push.apply(k,m),c=!0)}g&&h&&!l&&!c||goog.dom.classlist.set(b,k.join(" "));this.setAriaStates(a,b);return b};goog.ui.ControlRenderer.prototype.initializeDom=function(a){a.isRightToLeft()&&this.setRightToLeft(a.getElement(),!0);a.isEnabled()&&this.setFocusable(a,a.isVisible())};
goog.ui.ControlRenderer.prototype.setAriaRole=function(a,b){var c=b||this.getAriaRole();if(c){goog.asserts.assert(a,"The element passed as a first parameter cannot be null.");var d=goog.a11y.aria.getRole(a);c!=d&&goog.a11y.aria.setRole(a,c)}};
goog.ui.ControlRenderer.prototype.setAriaStates=function(a,b){goog.asserts.assert(a);goog.asserts.assert(b);a.isVisible()||goog.a11y.aria.setState(b,goog.a11y.aria.State.HIDDEN,!a.isVisible());a.isEnabled()||this.updateAriaState(b,goog.ui.Component.State.DISABLED,!a.isEnabled());a.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(b,goog.ui.Component.State.SELECTED,a.isSelected());a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,
a.isChecked());a.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(b,goog.ui.Component.State.OPENED,a.isOpen())};goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(a,b){goog.style.setUnselectable(a,!b,!goog.userAgent.IE&&!goog.userAgent.OPERA)};goog.ui.ControlRenderer.prototype.setRightToLeft=function(a,b){this.enableClassName(a,this.getStructuralCssClass()+"-rtl",b)};
goog.ui.ControlRenderer.prototype.isFocusable=function(a){var b;return a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(b=a.getKeyEventTarget())?goog.dom.isFocusableTabIndex(b):!1};goog.ui.ControlRenderer.prototype.setFocusable=function(a,b){var c;if(a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(c=a.getKeyEventTarget())){if(!b&&a.isFocused()){try{c.blur()}catch(d){}a.isFocused()&&a.handleBlur(null)}goog.dom.isFocusableTabIndex(c)!=b&&goog.dom.setFocusableTabIndex(c,b)}};
goog.ui.ControlRenderer.prototype.setVisible=function(a,b){goog.style.setElementShown(a,b);a&&goog.a11y.aria.setState(a,goog.a11y.aria.State.HIDDEN,!b)};goog.ui.ControlRenderer.prototype.setState=function(a,b,c){var d=a.getElement();if(d){var e=this.getClassForState(b);e&&this.enableClassName(a,e,c);this.updateAriaState(d,b,c)}};
goog.ui.ControlRenderer.prototype.updateAriaState=function(a,b,c){goog.ui.ControlRenderer.ARIA_ATTRIBUTE_MAP_||(goog.ui.ControlRenderer.ARIA_ATTRIBUTE_MAP_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED));goog.asserts.assert(a,"The element passed as a first parameter cannot be null.");
(b=goog.ui.ControlRenderer.getAriaStateForAriaRole_(a,goog.ui.ControlRenderer.ARIA_ATTRIBUTE_MAP_[b]))&&goog.a11y.aria.setState(a,b,c)};goog.ui.ControlRenderer.getAriaStateForAriaRole_=function(a,b){var c=goog.a11y.aria.getRole(a);if(!c)return b;c=goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[c]||b;return goog.ui.ControlRenderer.isAriaState_(b)?c:b};goog.ui.ControlRenderer.isAriaState_=function(a){return a==goog.a11y.aria.State.CHECKED||a==goog.a11y.aria.State.SELECTED};
goog.ui.ControlRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a);if(c&&(goog.dom.removeChildren(c),b))if(goog.isString(b))goog.dom.setTextContent(c,b);else{var d=function(a){if(a){var b=goog.dom.getOwnerDocument(c);c.appendChild(goog.isString(a)?b.createTextNode(a):a)}};goog.isArray(b)?goog.array.forEach(b,d):!goog.isArrayLike(b)||"nodeType"in b?d(b):goog.array.forEach(goog.array.clone(b),d)}};goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};
goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS};goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]};goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()};
goog.ui.ControlRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=[b],d=this.getStructuralCssClass();d!=b&&c.push(d);b=this.getClassNamesForState(a.getState());c.push.apply(c,b);(a=a.getExtraClassNames())&&c.push.apply(c,a);goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&c.push.apply(c,this.getAppliedCombinedClassNames_(c));return c};
goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(a,b){var c=[];b&&(a=a.concat([b]));goog.array.forEach(this.getIe6ClassCombinations(),function(d){!goog.array.every(d,goog.partial(goog.array.contains,a))||b&&!goog.array.contains(d,b)||c.push(d.join("_"))});return c};goog.ui.ControlRenderer.prototype.getClassNamesForState=function(a){for(var b=[];a;){var c=a&-a;b.push(this.getClassForState(c));a&=~c}return b};
goog.ui.ControlRenderer.prototype.getClassForState=function(a){this.classByState_||this.createClassByStateMap_();return this.classByState_[a]};goog.ui.ControlRenderer.prototype.getStateFromClass=function(a){this.stateByClass_||this.createStateByClassMap_();a=parseInt(this.stateByClass_[a],10);return isNaN(a)?0:a};
goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var a=this.getStructuralCssClass(),b=!goog.string.contains(goog.string.normalizeWhitespace(a)," ");goog.asserts.assert(b,"ControlRenderer has an invalid css class: '"+a+"'");this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,a+"-disabled",goog.ui.Component.State.HOVER,a+"-hover",goog.ui.Component.State.ACTIVE,a+"-active",goog.ui.Component.State.SELECTED,a+"-selected",goog.ui.Component.State.CHECKED,a+"-checked",
goog.ui.Component.State.FOCUSED,a+"-focused",goog.ui.Component.State.OPENED,a+"-open")};goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_();this.stateByClass_=goog.object.transpose(this.classByState_)};goog.ui.decorate=function(a){var b=goog.ui.registry.getDecorator(a);b&&b.decorate(a);return b};goog.events.KeyHandler=function(a,b){goog.events.EventTarget.call(this);a&&this.attach(a,b)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;
goog.events.KeyHandler.EventType={KEY:"key"};
goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,
63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;
goog.events.KeyHandler.prototype.handleKeyDown_=function(a){goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!a.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!a.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!a.metaKey)&&(this.keyCode_=this.lastKey_=-1);-1==this.lastKey_&&(a.ctrlKey&&a.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:a.altKey&&a.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:a.metaKey&&
a.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(a.keyCode,this.lastKey_,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(a.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=a.altKey))};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};
goog.events.KeyHandler.prototype.handleKeyup_=function(a){this.resetState();this.altKey_=a.altKey};
goog.events.KeyHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent(),c,d,e=b.altKey;goog.userAgent.IE&&a.type==goog.events.EventType.KEYPRESS?(c=this.keyCode_,d=c!=goog.events.KeyCodes.ENTER&&c!=goog.events.KeyCodes.ESC?b.keyCode:0):goog.userAgent.WEBKIT&&a.type==goog.events.EventType.KEYPRESS?(c=this.keyCode_,d=0<=b.charCode&&63232>b.charCode&&goog.events.KeyCodes.isCharacterKey(c)?b.charCode:0):goog.userAgent.OPERA?(c=this.keyCode_,d=goog.events.KeyCodes.isCharacterKey(c)?b.keyCode:
0):(c=b.keyCode||this.keyCode_,d=b.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(e=this.altKey_),goog.userAgent.MAC&&d==goog.events.KeyCodes.QUESTION_MARK&&c==goog.events.KeyCodes.WIN_KEY&&(c=goog.events.KeyCodes.SLASH));var f=c=goog.events.KeyCodes.normalizeKeyCode(c),g=b.keyIdentifier;c?63232<=c&&c in goog.events.KeyHandler.safariKey_?f=goog.events.KeyHandler.safariKey_[c]:25==c&&a.shiftKey&&(f=9):g&&g in goog.events.KeyHandler.keyIdentifier_&&(f=goog.events.KeyHandler.keyIdentifier_[g]);
a=f==this.lastKey_;this.lastKey_=f;b=new goog.events.KeyEvent(f,d,a,b);b.altKey=e;this.dispatchEvent(b)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};
goog.events.KeyHandler.prototype.attach=function(a,b){this.keyUpKey_&&this.detach();this.element_=a;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,b);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,b,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,b,this)};
goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};
goog.events.KeyEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,d);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=a;this.charCode=b;this.repeat=c};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.ui.Control=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.registry.getDefaultRenderer(this.constructor);this.setContentInternal(goog.isDef(a)?a:null)};goog.inherits(goog.ui.Control,goog.ui.Component);goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName;goog.ui.Control.getDecorator=goog.ui.registry.getDecorator;goog.ui.Control.decorate=goog.ui.decorate;goog.ui.Control.prototype.content_=null;goog.ui.Control.prototype.state_=0;
goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED;goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL;goog.ui.Control.prototype.statesWithTransitionEvents_=0;goog.ui.Control.prototype.visible_=!0;goog.ui.Control.prototype.extraClassNames_=null;goog.ui.Control.prototype.handleMouseEvents_=!0;goog.ui.Control.prototype.allowTextSelection_=!1;
goog.ui.Control.prototype.preferredAriaRole_=null;goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Control.prototype.setHandleMouseEvents=function(a){this.isInDocument()&&a!=this.handleMouseEvents_&&this.enableMouseEventHandling_(a);this.handleMouseEvents_=a};goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)};
goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)};goog.ui.Control.prototype.getRenderer=function(){return this.renderer_};goog.ui.Control.prototype.setRenderer=function(a){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null);this.renderer_=a};goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_};
goog.ui.Control.prototype.addClassName=function(a){a&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,a)||this.extraClassNames_.push(a):this.extraClassNames_=[a],this.renderer_.enableExtraClassName(this,a,!0))};goog.ui.Control.prototype.removeClassName=function(a){a&&this.extraClassNames_&&goog.array.remove(this.extraClassNames_,a)&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,a,!1))};
goog.ui.Control.prototype.enableClassName=function(a,b){b?this.addClassName(a):this.removeClassName(a)};goog.ui.Control.prototype.createDom=function(){var a=this.renderer_.createDom(this);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.isVisible()||this.renderer_.setVisible(a,!1)};goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};
goog.ui.Control.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Control.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};
goog.ui.Control.prototype.decorateInternal=function(a){a=this.renderer_.decorate(this,a);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.visible_="none"!=a.style.display};
goog.ui.Control.prototype.enterDocument=function(){goog.ui.Control.superClass_.enterDocument.call(this);this.renderer_.initializeDom(this);if(this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var a=this.getKeyEventTarget();if(a){var b=this.getKeyHandler();b.attach(a);this.getHandler().listen(b,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(a,goog.events.EventType.FOCUS,
this.handleFocus).listen(a,goog.events.EventType.BLUR,this.handleBlur)}}};
goog.ui.Control.prototype.enableMouseEventHandling_=function(a){var b=this.getHandler(),c=this.getElement();a?(b.listen(c,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(c,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(c,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(c,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&b.listen(c,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&b.listen(c,
goog.events.EventType.DBLCLICK,this.handleDblClick)):(b.unlisten(c,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(c,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(c,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(c,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&b.unlisten(c,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&b.unlisten(c,goog.events.EventType.DBLCLICK,this.handleDblClick))};
goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this);this.keyHandler_&&this.keyHandler_.detach();this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)};goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);delete this.renderer_;this.extraClassNames_=this.content_=null};goog.ui.Control.prototype.getContent=function(){return this.content_};
goog.ui.Control.prototype.setContent=function(a){this.renderer_.setContent(this.getElement(),a);this.setContentInternal(a)};goog.ui.Control.prototype.setContentInternal=function(a){this.content_=a};goog.ui.Control.prototype.getCaption=function(){var a=this.getContent();if(!a)return"";a=goog.isString(a)?a:goog.isArray(a)?goog.array.map(a,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(a);return goog.string.collapseBreakingSpaces(a)};goog.ui.Control.prototype.setCaption=function(a){this.setContent(a)};
goog.ui.Control.prototype.setRightToLeft=function(a){goog.ui.Control.superClass_.setRightToLeft.call(this,a);var b=this.getElement();b&&this.renderer_.setRightToLeft(b,a)};goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_};goog.ui.Control.prototype.setAllowTextSelection=function(a){this.allowTextSelection_=a;var b=this.getElement();b&&this.renderer_.setAllowTextSelection(b,a)};goog.ui.Control.prototype.isVisible=function(){return this.visible_};
goog.ui.Control.prototype.setVisible=function(a,b){if(b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var c=this.getElement();c&&this.renderer_.setVisible(c,a);this.isEnabled()&&this.renderer_.setFocusable(this,a);this.visible_=a;return!0}return!1};goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)};
goog.ui.Control.prototype.isParentDisabled_=function(){var a=this.getParent();return!!a&&"function"==typeof a.isEnabled&&!a.isEnabled()};goog.ui.Control.prototype.setEnabled=function(a){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!a)&&(a||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,a),this.setState(goog.ui.Component.State.DISABLED,!a))};goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)};
goog.ui.Control.prototype.setHighlighted=function(a){this.isTransitionAllowed(goog.ui.Component.State.HOVER,a)&&this.setState(goog.ui.Component.State.HOVER,a)};goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)};goog.ui.Control.prototype.setActive=function(a){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,a)&&this.setState(goog.ui.Component.State.ACTIVE,a)};goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)};
goog.ui.Control.prototype.setSelected=function(a){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,a)&&this.setState(goog.ui.Component.State.SELECTED,a)};goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)};goog.ui.Control.prototype.setChecked=function(a){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,a)&&this.setState(goog.ui.Component.State.CHECKED,a)};goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)};
goog.ui.Control.prototype.setFocused=function(a){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,a)&&this.setState(goog.ui.Component.State.FOCUSED,a)};goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)};goog.ui.Control.prototype.setOpen=function(a){this.isTransitionAllowed(goog.ui.Component.State.OPENED,a)&&this.setState(goog.ui.Component.State.OPENED,a)};goog.ui.Control.prototype.getState=function(){return this.state_};
goog.ui.Control.prototype.hasState=function(a){return!!(this.state_&a)};goog.ui.Control.prototype.setState=function(a,b){this.isSupportedState(a)&&b!=this.hasState(a)&&(this.renderer_.setState(this,a,b),this.state_=b?this.state_|a:this.state_&~a)};goog.ui.Control.prototype.setStateInternal=function(a){this.state_=a};goog.ui.Control.prototype.isSupportedState=function(a){return!!(this.supportedStates_&a)};
goog.ui.Control.prototype.setSupportedState=function(a,b){if(this.isInDocument()&&this.hasState(a)&&!b)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!b&&this.hasState(a)&&this.setState(a,!1);this.supportedStates_=b?this.supportedStates_|a:this.supportedStates_&~a};goog.ui.Control.prototype.isAutoState=function(a){return!!(this.autoStates_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setAutoStates=function(a,b){this.autoStates_=b?this.autoStates_|a:this.autoStates_&~a};
goog.ui.Control.prototype.isDispatchTransitionEvents=function(a){return!!(this.statesWithTransitionEvents_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setDispatchTransitionEvents=function(a,b){this.statesWithTransitionEvents_=b?this.statesWithTransitionEvents_|a:this.statesWithTransitionEvents_&~a};
goog.ui.Control.prototype.isTransitionAllowed=function(a,b){return this.isSupportedState(a)&&this.hasState(a)!=b&&(!(this.statesWithTransitionEvents_&a)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(a,b)))&&!this.isDisposed()};goog.ui.Control.prototype.handleMouseOver=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)};
goog.ui.Control.prototype.handleMouseOut=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))};goog.ui.Control.prototype.handleContextMenu=goog.nullFunction;goog.ui.Control.isMouseEventWithinElement_=function(a,b){return!!a.relatedTarget&&goog.dom.contains(b,a.relatedTarget)};
goog.ui.Control.prototype.handleMouseDown=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),a.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus()));!this.isAllowTextSelection()&&a.isMouseActionButton()&&a.preventDefault()};
goog.ui.Control.prototype.handleMouseUp=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&this.performActionInternal(a)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1))};goog.ui.Control.prototype.handleDblClick=function(a){this.isEnabled()&&this.performActionInternal(a)};
goog.ui.Control.prototype.performActionInternal=function(a){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked());this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0);this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var b=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.platformModifierKey=a.platformModifierKey);return this.dispatchEvent(b)};
goog.ui.Control.prototype.handleFocus=function(a){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)};goog.ui.Control.prototype.handleBlur=function(a){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1);this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)};goog.ui.Control.prototype.handleKeyEvent=function(a){return this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Control.prototype.handleKeyEventInternal=function(a){return a.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(a)};goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer);goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)});goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this);this.classNameCache_=[]};goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuItemRenderer);goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem";goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2};
goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(a){var b=this.classNameCache_[a];if(!b){switch(a){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:b=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:b=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:b=this.getStructuralCssClass()+"-content"}this.classNameCache_[a]=b}return b};
goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU_ITEM};goog.ui.MenuItemRenderer.prototype.createDom=function(a){var b=a.getDomHelper().createDom("div",this.getClassNames(a).join(" "),this.createContent(a.getContent(),a.getDomHelper()));this.setEnableCheckBoxStructure(a,b,a.isSupportedState(goog.ui.Component.State.SELECTED)||a.isSupportedState(goog.ui.Component.State.CHECKED));return b};
goog.ui.MenuItemRenderer.prototype.getContentElement=function(a){return a&&a.firstChild};goog.ui.MenuItemRenderer.prototype.decorate=function(a,b){goog.asserts.assert(b);this.hasContentStructure(b)||b.appendChild(this.createContent(b.childNodes,a.getDomHelper()));goog.dom.classlist.contains(b,"goog-option")&&(a.setCheckable(!0),this.setCheckable(a,b,!0));return goog.ui.MenuItemRenderer.superClass_.decorate.call(this,a,b)};
goog.ui.MenuItemRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a),d=this.hasCheckBoxStructure(a)?c.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,a,b);d&&!this.hasCheckBoxStructure(a)&&c.insertBefore(d,c.firstChild||null)};
goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(a){a=goog.dom.getFirstElementChild(a);var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return!!a&&goog.dom.classlist.contains(a,b)};goog.ui.MenuItemRenderer.prototype.createContent=function(a,b){var c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return b.createDom("div",c,a)};
goog.ui.MenuItemRenderer.prototype.setSelectable=function(a,b,c){a&&b&&this.setEnableCheckBoxStructure(a,b,c)};goog.ui.MenuItemRenderer.prototype.setCheckable=function(a,b,c){a&&b&&this.setEnableCheckBoxStructure(a,b,c)};goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(a){if(a=this.getContentElement(a)){a=a.firstChild;var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return!!a&&goog.dom.isElement(a)&&goog.dom.classlist.contains(a,b)}return!1};
goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(a,b,c){this.setAriaRole(b,a.getPreferredAriaRole());this.setAriaStates(a,b);c!=this.hasCheckBoxStructure(b)&&(goog.dom.classlist.enable(b,"goog-option",c),b=this.getContentElement(b),c?(c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),b.insertBefore(a.getDomHelper().createDom("div",c),b.firstChild||null)):b.removeChild(b.firstChild))};
goog.ui.MenuItemRenderer.prototype.getClassForState=function(a){switch(a){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,a)}};
goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(a){var b=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(a){case "goog-option-selected":return goog.ui.Component.State.CHECKED;case b:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,a)}};goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS};goog.ui.MenuItem=function(a,b,c,d){goog.ui.Control.call(this,a,d||goog.ui.MenuItemRenderer.getInstance(),c);this.setValue(b)};goog.inherits(goog.ui.MenuItem,goog.ui.Control);goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator";goog.ui.MenuItem.ACCELERATOR_CLASS="goog-menuitem-accel";goog.ui.MenuItem.prototype.getValue=function(){var a=this.getModel();return null!=a?a:this.getCaption()};goog.ui.MenuItem.prototype.setValue=function(a){this.setModel(a)};
goog.ui.MenuItem.prototype.setSupportedState=function(a,b){goog.ui.MenuItem.superClass_.setSupportedState.call(this,a,b);switch(a){case goog.ui.Component.State.SELECTED:this.setSelectableInternal_(b);break;case goog.ui.Component.State.CHECKED:this.setCheckableInternal_(b)}};goog.ui.MenuItem.prototype.setSelectable=function(a){this.setSupportedState(goog.ui.Component.State.SELECTED,a)};
goog.ui.MenuItem.prototype.setSelectableInternal_=function(a){this.isChecked()&&!a&&this.setChecked(!1);var b=this.getElement();b&&this.getRenderer().setSelectable(this,b,a)};goog.ui.MenuItem.prototype.setCheckable=function(a){this.setSupportedState(goog.ui.Component.State.CHECKED,a)};goog.ui.MenuItem.prototype.setCheckableInternal_=function(a){var b=this.getElement();b&&this.getRenderer().setCheckable(this,b,a)};
goog.ui.MenuItem.prototype.getCaption=function(){var a=this.getContent();if(goog.isArray(a)){var b=goog.ui.MenuItem.ACCELERATOR_CLASS,c=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_,a=goog.array.map(a,function(a){return goog.dom.isElement(a)&&(goog.dom.classlist.contains(a,b)||goog.dom.classlist.contains(a,c))?"":goog.dom.getRawTextContent(a)}).join("");return goog.string.collapseBreakingSpaces(a)}return goog.ui.MenuItem.superClass_.getCaption.call(this)};
goog.ui.MenuItem.prototype.getAccelerator=function(){var a=this.getDomHelper(),b=this.getContent();return goog.isArray(b)&&(b=goog.array.find(b,function(a){return goog.dom.classlist.contains(a,goog.ui.MenuItem.ACCELERATOR_CLASS)}))?a.getTextContent(b):null};
goog.ui.MenuItem.prototype.handleMouseUp=function(a){var b=this.getParent();if(b){var c=b.openingCoords;b.openingCoords=null;if(c&&goog.isNumber(a.clientX)&&(b=new goog.math.Coordinate(a.clientX,a.clientY),goog.math.Coordinate.equals(c,b)))return}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,a)};goog.ui.MenuItem.prototype.handleKeyEventInternal=function(a){return a.keyCode==this.getMnemonic()&&this.performActionInternal(a)?!0:goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,a)};
goog.ui.MenuItem.prototype.setMnemonic=function(a){this.mnemonicKey_=a};goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)});
goog.ui.MenuItem.prototype.getPreferredAriaRole=function(){return this.isSupportedState(goog.ui.Component.State.CHECKED)?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.isSupportedState(goog.ui.Component.State.SELECTED)?goog.a11y.aria.Role.MENU_ITEM_RADIO:goog.ui.MenuItem.superClass_.getPreferredAriaRole.call(this)};goog.ui.ContainerRenderer=function(a){this.ariaRole_=a};goog.addSingletonGetter(goog.ui.ContainerRenderer);goog.ui.ContainerRenderer.getCustomRenderer=function(a,b){var c=new a;c.getCssClass=function(){return b};return c};goog.ui.ContainerRenderer.CSS_CLASS="goog-container";goog.ui.ContainerRenderer.prototype.getAriaRole=function(){return this.ariaRole_};goog.ui.ContainerRenderer.prototype.enableTabIndex=function(a,b){a&&(a.tabIndex=b?0:-1)};
goog.ui.ContainerRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("div",this.getClassNames(a).join(" "))};goog.ui.ContainerRenderer.prototype.getContentElement=function(a){return a};goog.ui.ContainerRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};
goog.ui.ContainerRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getCssClass(),d=!1,e=goog.dom.classlist.get(b);e&&goog.array.forEach(e,function(b){b==c?d=!0:b&&this.setStateFromClassName(a,b,c)},this);d||goog.dom.classlist.add(b,c);this.decorateChildren(a,this.getContentElement(b));return b};
goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?a.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):b==c+"-vertical"&&a.setOrientation(goog.ui.Container.Orientation.VERTICAL)};
goog.ui.ContainerRenderer.prototype.decorateChildren=function(a,b,c){if(b){c=c||b.firstChild;for(var d;c&&c.parentNode==b;){d=c.nextSibling;if(c.nodeType==goog.dom.NodeType.ELEMENT){var e=this.getDecoratorForChild(c);e&&(e.setElementInternal(c),a.isEnabled()||e.setEnabled(!1),a.addChild(e),e.decorate(c))}else c.nodeValue&&""!=goog.string.trim(c.nodeValue)||b.removeChild(c);c=d}}};goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(a){return goog.ui.registry.getDecorator(a)};
goog.ui.ContainerRenderer.prototype.initializeDom=function(a){a=a.getElement();goog.asserts.assert(a,"The container DOM element cannot be null.");goog.style.setUnselectable(a,!0,goog.userAgent.GECKO);goog.userAgent.IE&&(a.hideFocus=!0);var b=this.getAriaRole();b&&goog.a11y.aria.setRole(a,b)};goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS};
goog.ui.ContainerRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=a.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL,c=[b,c?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL};goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer);goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator";goog.ui.MenuSeparatorRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("div",this.getCssClass())};
goog.ui.MenuSeparatorRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);if("HR"==b.tagName){var c=b;b=this.createDom(a);goog.dom.insertSiblingBefore(b,c);goog.dom.removeNode(c)}else goog.dom.classlist.add(b,this.getCssClass());return b};goog.ui.MenuSeparatorRenderer.prototype.setContent=function(a,b){};goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS};goog.ui.Separator=function(a,b){goog.ui.Control.call(this,null,a||goog.ui.MenuSeparatorRenderer.getInstance(),b);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.Separator,goog.ui.Control);
goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var a=this.getElement();goog.asserts.assert(a,"The DOM element for the separator cannot be null.");goog.a11y.aria.setRole(a,"separator")};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.MenuRenderer=function(a){goog.ui.ContainerRenderer.call(this,a||goog.a11y.aria.Role.MENU)};goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.MenuRenderer);goog.ui.MenuRenderer.CSS_CLASS="goog-menu";goog.ui.MenuRenderer.prototype.canDecorate=function(a){return"UL"==a.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,a)};
goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(a){return"HR"==a.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,a)};goog.ui.MenuRenderer.prototype.containsElement=function(a,b){return goog.dom.contains(a.getElement(),b)};goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS};
goog.ui.MenuRenderer.prototype.initializeDom=function(a){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,a);a=a.getElement();goog.asserts.assert(a,"The menu DOM element cannot be null.");goog.a11y.aria.setState(a,goog.a11y.aria.State.HASPOPUP,"true")};goog.positioning={};goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:2,BOTTOM_LEFT:1,BOTTOM_RIGHT:3,TOP_START:4,TOP_END:6,BOTTOM_START:5,BOTTOM_END:7};goog.positioning.CornerBit={BOTTOM:1,RIGHT:2,FLIP_RTL:4};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};
goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256};goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT;
goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT;goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM;
goog.positioning.positionAtAnchor=function(a,b,c,d,e,f,g,h,k){goog.asserts.assert(c);var l=goog.positioning.getOffsetParentPageOffset(c),m=goog.positioning.getVisiblePart_(a);goog.style.translateRectForAnotherFrame(m,goog.dom.getDomHelper(a),goog.dom.getDomHelper(c));a=goog.positioning.getEffectiveCorner(a,b);m=new goog.math.Coordinate(a&goog.positioning.CornerBit.RIGHT?m.left+m.width:m.left,a&goog.positioning.CornerBit.BOTTOM?m.top+m.height:m.top);m=goog.math.Coordinate.difference(m,l);e&&(m.x+=
(a&goog.positioning.CornerBit.RIGHT?-1:1)*e.x,m.y+=(a&goog.positioning.CornerBit.BOTTOM?-1:1)*e.y);var n;if(g)if(k)n=k;else if(n=goog.style.getVisibleRectForElement(c))n.top-=l.y,n.right-=l.x,n.bottom-=l.y,n.left-=l.x;return goog.positioning.positionAtCoordinate(m,c,d,f,n,g,h)};
goog.positioning.getOffsetParentPageOffset=function(a){var b;if(a=a.offsetParent){var c=a.tagName==goog.dom.TagName.HTML||a.tagName==goog.dom.TagName.BODY;c&&"static"==goog.style.getComputedPosition(a)||(b=goog.style.getPageOffset(a),c||(b=goog.math.Coordinate.difference(b,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(a),a.scrollTop))))}return b||new goog.math.Coordinate};
goog.positioning.getVisiblePart_=function(a){var b=goog.style.getBounds(a);(a=goog.style.getVisibleRectForElement(a))&&b.intersection(goog.math.Rect.createFromBox(a));return b};
goog.positioning.positionAtCoordinate=function(a,b,c,d,e,f,g){a=a.clone();var h=goog.positioning.OverflowStatus.NONE;c=goog.positioning.getEffectiveCorner(b,c);var k=goog.style.getSize(b);g=g?g.clone():k.clone();if(d||c!=goog.positioning.Corner.TOP_LEFT)c&goog.positioning.CornerBit.RIGHT?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),c&goog.positioning.CornerBit.BOTTOM?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f&&(h=e?goog.positioning.adjustForViewport_(a,g,e,f):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,
h&goog.positioning.OverflowStatus.FAILED))return h;goog.style.setPosition(b,a);goog.math.Size.equals(k,g)||goog.style.setBorderBoxSize(b,g);return h};
goog.positioning.adjustForViewport_=function(a,b,c,d){var e=goog.positioning.OverflowStatus.NONE,f=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,g=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;(d&f)==f&&(a.x<c.left||a.x>=c.right)&&(d&=~goog.positioning.Overflow.ADJUST_X);(d&g)==g&&(a.y<c.top||a.y>=c.bottom)&&(d&=~goog.positioning.Overflow.ADJUST_Y);a.x<c.left&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=c.left,e|=goog.positioning.OverflowStatus.ADJUSTED_X);a.x<c.left&&a.x+b.width>c.right&&
d&goog.positioning.Overflow.RESIZE_WIDTH&&(b.width=Math.max(b.width-(a.x+b.width-c.right),0),e|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED);a.x+b.width>c.right&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=Math.max(c.right-b.width,c.left),e|=goog.positioning.OverflowStatus.ADJUSTED_X);d&goog.positioning.Overflow.FAIL_X&&(e=e|(a.x<c.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(a.x+b.width>c.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0));a.y<c.top&&d&goog.positioning.Overflow.ADJUST_Y&&
(a.y=c.top,e|=goog.positioning.OverflowStatus.ADJUSTED_Y);a.y<=c.top&&a.y+b.height<c.bottom&&d&goog.positioning.Overflow.RESIZE_HEIGHT&&(b.height=Math.max(b.height-(c.top-a.y),0),a.y=c.top,e|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);a.y>=c.top&&a.y+b.height>c.bottom&&d&goog.positioning.Overflow.RESIZE_HEIGHT&&(b.height=Math.max(b.height-(a.y+b.height-c.bottom),0),e|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);a.y+b.height>c.bottom&&d&goog.positioning.Overflow.ADJUST_Y&&(a.y=Math.max(c.bottom-
b.height,c.top),e|=goog.positioning.OverflowStatus.ADJUSTED_Y);d&goog.positioning.Overflow.FAIL_Y&&(e=e|(a.y<c.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(a.y+b.height>c.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return e};goog.positioning.getEffectiveCorner=function(a,b){return(b&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(a)?b^goog.positioning.CornerBit.RIGHT:b)&~goog.positioning.CornerBit.FLIP_RTL};
goog.positioning.flipCornerHorizontal=function(a){return a^goog.positioning.CornerBit.RIGHT};goog.positioning.flipCornerVertical=function(a){return a^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(a){return a^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1;goog.userAgent.product.ASSUME_CAMINO=!1;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1;
goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_CAMINO||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI;
goog.userAgent.product.init_=function(){goog.userAgent.product.detectedFirefox_=!1;goog.userAgent.product.detectedCamino_=!1;goog.userAgent.product.detectedIphone_=!1;goog.userAgent.product.detectedIpad_=!1;goog.userAgent.product.detectedAndroid_=!1;goog.userAgent.product.detectedChrome_=!1;goog.userAgent.product.detectedSafari_=!1;var a=goog.userAgent.getUserAgentString();a&&(-1!=a.indexOf("Firefox")?goog.userAgent.product.detectedFirefox_=!0:-1!=a.indexOf("Camino")?goog.userAgent.product.detectedCamino_=
!0:-1!=a.indexOf("iPhone")||-1!=a.indexOf("iPod")?goog.userAgent.product.detectedIphone_=!0:-1!=a.indexOf("iPad")?goog.userAgent.product.detectedIpad_=!0:-1!=a.indexOf("Chrome")?goog.userAgent.product.detectedChrome_=!0:-1!=a.indexOf("Android")?goog.userAgent.product.detectedAndroid_=!0:-1!=a.indexOf("Safari")&&(goog.userAgent.product.detectedSafari_=!0))};goog.userAgent.product.PRODUCT_KNOWN_||goog.userAgent.product.init_();goog.userAgent.product.OPERA=goog.userAgent.OPERA;
goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.userAgent.product.detectedFirefox_;goog.userAgent.product.CAMINO=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CAMINO:goog.userAgent.product.detectedCamino_;goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.detectedIphone_;
goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.userAgent.product.detectedIpad_;goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.userAgent.product.detectedAndroid_;goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.userAgent.product.detectedChrome_;
goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.detectedSafari_;goog.ui.MenuSeparator=function(a){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),a)};goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator);goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.Container=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.ContainerRenderer.getInstance();this.orientation_=a||this.renderer_.getDefaultOrientation()};goog.inherits(goog.ui.Container,goog.ui.Component);goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"};goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"};goog.ui.Container.prototype.keyEventTarget_=null;goog.ui.Container.prototype.keyHandler_=null;
goog.ui.Container.prototype.renderer_=null;goog.ui.Container.prototype.orientation_=null;goog.ui.Container.prototype.visible_=!0;goog.ui.Container.prototype.enabled_=!0;goog.ui.Container.prototype.focusable_=!0;goog.ui.Container.prototype.highlightedIndex_=-1;goog.ui.Container.prototype.openItem_=null;goog.ui.Container.prototype.mouseButtonPressed_=!1;goog.ui.Container.prototype.allowFocusableChildren_=!1;goog.ui.Container.prototype.openFollowsHighlight_=!0;
goog.ui.Container.prototype.childElementIdMap_=null;goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)};
goog.ui.Container.prototype.setKeyEventTarget=function(a){if(this.focusable_){var b=this.getKeyEventTarget(),c=this.isInDocument();this.keyEventTarget_=a;var d=this.getKeyEventTarget();c&&(this.keyEventTarget_=b,this.enableFocusHandling_(!1),this.keyEventTarget_=a,this.getKeyHandler().attach(d),this.enableFocusHandling_(!0))}else throw Error("Can't set key event target for container that doesn't support keyboard focus!");};
goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))};goog.ui.Container.prototype.getRenderer=function(){return this.renderer_};goog.ui.Container.prototype.setRenderer=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=a};goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))};
goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Container.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};goog.ui.Container.prototype.decorateInternal=function(a){this.setElementInternal(this.renderer_.decorate(this,a));"none"==a.style.display&&(this.visible_=!1)};
goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this);this.forEachChild(function(a){a.isInDocument()&&this.registerChildId_(a)},this);var a=this.getElement();this.renderer_.initializeDom(this);this.setVisible(this.visible_,!0);this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,
goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(a,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(a),goog.events.EventType.MOUSEUP,this.handleDocumentMouseUp).listen(a,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.MOUSEUP,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents);this.isFocusable()&&this.enableFocusHandling_(!0)};
goog.ui.Container.prototype.enableFocusHandling_=function(a){var b=this.getHandler(),c=this.getKeyEventTarget();a?b.listen(c,goog.events.EventType.FOCUS,this.handleFocus).listen(c,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):b.unlisten(c,goog.events.EventType.FOCUS,this.handleFocus).unlisten(c,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)};
goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1);this.openItem_&&this.openItem_.setOpen(!1);this.mouseButtonPressed_=!1;goog.ui.Container.superClass_.exitDocument.call(this)};goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null);this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null};
goog.ui.Container.prototype.handleEnterItem=function(a){return!0};
goog.ui.Container.prototype.handleHighlightItem=function(a){var b=this.indexOfChild(a.target);if(-1<b&&b!=this.highlightedIndex_){var c=this.getHighlighted();c&&c.setHighlighted(!1);this.highlightedIndex_=b;c=this.getHighlighted();this.isMouseButtonPressed()&&c.setActive(!0);this.openFollowsHighlight_&&this.openItem_&&c!=this.openItem_&&(c.isSupportedState(goog.ui.Component.State.OPENED)?c.setOpen(!0):this.openItem_.setOpen(!1))}b=this.getElement();goog.asserts.assert(b,"The DOM element for the container cannot be null.");
null!=a.target.getElement()&&goog.a11y.aria.setState(b,goog.a11y.aria.State.ACTIVEDESCENDANT,a.target.getElement().id)};goog.ui.Container.prototype.handleUnHighlightItem=function(a){a.target==this.getHighlighted()&&(this.highlightedIndex_=-1);a=this.getElement();goog.asserts.assert(a,"The DOM element for the container cannot be null.");goog.a11y.aria.removeState(a,goog.a11y.aria.State.ACTIVEDESCENDANT)};
goog.ui.Container.prototype.handleOpenItem=function(a){(a=a.target)&&a!=this.openItem_&&a.getParent()==this&&(this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=a)};goog.ui.Container.prototype.handleCloseItem=function(a){a.target==this.openItem_&&(this.openItem_=null)};goog.ui.Container.prototype.handleMouseDown=function(a){this.enabled_&&this.setMouseButtonPressed(!0);var b=this.getKeyEventTarget();b&&goog.dom.isFocusableTabIndex(b)?b.focus():a.preventDefault()};
goog.ui.Container.prototype.handleDocumentMouseUp=function(a){this.setMouseButtonPressed(!1)};goog.ui.Container.prototype.handleChildMouseEvents=function(a){var b=this.getOwnerControl(a.target);if(b)switch(a.type){case goog.events.EventType.MOUSEDOWN:b.handleMouseDown(a);break;case goog.events.EventType.MOUSEUP:b.handleMouseUp(a);break;case goog.events.EventType.MOUSEOVER:b.handleMouseOver(a);break;case goog.events.EventType.MOUSEOUT:b.handleMouseOut(a);break;case goog.events.EventType.CONTEXTMENU:b.handleContextMenu(a)}};
goog.ui.Container.prototype.getOwnerControl=function(a){if(this.childElementIdMap_)for(var b=this.getElement();a&&a!==b;){var c=a.id;if(c in this.childElementIdMap_)return this.childElementIdMap_[c];a=a.parentNode}return null};goog.ui.Container.prototype.handleFocus=function(a){};goog.ui.Container.prototype.handleBlur=function(a){this.setHighlightedIndex(-1);this.setMouseButtonPressed(!1);this.openItem_&&this.openItem_.setOpen(!1)};
goog.ui.Container.prototype.handleKeyEvent=function(a){return this.isEnabled()&&this.isVisible()&&(0!=this.getChildCount()||this.keyEventTarget_)&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Container.prototype.handleKeyEventInternal=function(a){var b=this.getHighlighted();if(b&&"function"==typeof b.handleKeyEvent&&b.handleKeyEvent(a)||this.openItem_&&this.openItem_!=b&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case goog.events.KeyCodes.ESC:if(this.isFocusable())this.getKeyEventTarget().blur();else return!1;break;case goog.events.KeyCodes.HOME:this.highlightFirst();
break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.LEFT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightNext():this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.DOWN:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightNext();else return!1;
break;case goog.events.KeyCodes.RIGHT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightPrevious():this.highlightNext();else return!1;break;default:return!1}return!0};goog.ui.Container.prototype.registerChildId_=function(a){var b=a.getElement(),b=b.id||(b.id=a.getId());this.childElementIdMap_||(this.childElementIdMap_={});this.childElementIdMap_[b]=a};
goog.ui.Container.prototype.addChild=function(a,b){goog.asserts.assertInstanceof(a,goog.ui.Control,"The child of a container must be a control");goog.ui.Container.superClass_.addChild.call(this,a,b)};
goog.ui.Container.prototype.addChildAt=function(a,b,c){a.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0);a.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0);!this.isFocusable()&&this.isFocusableChildrenAllowed()||a.setSupportedState(goog.ui.Component.State.FOCUSED,!1);a.setHandleMouseEvents(!1);goog.ui.Container.superClass_.addChildAt.call(this,a,b,c);a.isInDocument()&&this.isInDocument()&&this.registerChildId_(a);b<=this.highlightedIndex_&&this.highlightedIndex_++};
goog.ui.Container.prototype.removeChild=function(a,b){if(a=goog.isString(a)?this.getChild(a):a){var c=this.indexOfChild(a);-1!=c&&(c==this.highlightedIndex_?(a.setHighlighted(!1),this.highlightedIndex_=-1):c<this.highlightedIndex_&&this.highlightedIndex_--);(c=a.getElement())&&c.id&&this.childElementIdMap_&&goog.object.remove(this.childElementIdMap_,c.id)}a=goog.ui.Container.superClass_.removeChild.call(this,a,b);a.setHandleMouseEvents(!0);return a};goog.ui.Container.prototype.getOrientation=function(){return this.orientation_};
goog.ui.Container.prototype.setOrientation=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=a};goog.ui.Container.prototype.isVisible=function(){return this.visible_};
goog.ui.Container.prototype.setVisible=function(a,b){if(b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=a;var c=this.getElement();c&&(goog.style.setElementShown(c,a),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),b||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE));return!0}return!1};
goog.ui.Container.prototype.isEnabled=function(){return this.enabled_};
goog.ui.Container.prototype.setEnabled=function(a){this.enabled_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(a?(this.enabled_=!0,this.forEachChild(function(a){a.wasDisabled?delete a.wasDisabled:a.setEnabled(!0)})):(this.forEachChild(function(a){a.isEnabled()?a.setEnabled(!1):a.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a&&this.visible_))};
goog.ui.Container.prototype.isFocusable=function(){return this.focusable_};goog.ui.Container.prototype.setFocusable=function(a){a!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(a);this.focusable_=a;this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a)};goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_};
goog.ui.Container.prototype.setFocusableChildrenAllowed=function(a){this.allowFocusableChildren_=a};goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_};goog.ui.Container.prototype.setOpenFollowsHighlight=function(a){this.openFollowsHighlight_=a};goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};
goog.ui.Container.prototype.setHighlightedIndex=function(a){(a=this.getChildAt(a))?a.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)};goog.ui.Container.prototype.setHighlighted=function(a){this.setHighlightedIndex(this.indexOfChild(a))};goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)};
goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.getChildCount()-1)};goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},0)};goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.highlightedIndex_)};goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},this.highlightedIndex_)};
goog.ui.Container.prototype.highlightHelper=function(a,b){for(var c=0>b?this.indexOfChild(this.openItem_):b,d=this.getChildCount(),c=a.call(this,c,d),e=0;e<=d;){var f=this.getChildAt(c);if(f&&this.canHighlightItem(f))return this.setHighlightedIndexFromKeyEvent(c),!0;e++;c=a.call(this,c,d)}return!1};goog.ui.Container.prototype.canHighlightItem=function(a){return a.isVisible()&&a.isEnabled()&&a.isSupportedState(goog.ui.Component.State.HOVER)};
goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(a){this.setHighlightedIndex(a)};goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_};goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_};goog.ui.Container.prototype.setMouseButtonPressed=function(a){this.mouseButtonPressed_=a};goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuHeaderRenderer);goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader";goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS};goog.ui.MenuHeader=function(a,b,c){goog.ui.Control.call(this,a,c||goog.ui.MenuHeaderRenderer.getInstance(),b);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.MenuHeader,goog.ui.Control);
goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)});goog.ui.Menu=function(a,b){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,b||goog.ui.MenuRenderer.getInstance(),a);this.setFocusable(!1)};goog.inherits(goog.ui.Menu,goog.ui.Container);goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE};goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS;goog.ui.Menu.prototype.allowAutoFocus_=!0;
goog.ui.Menu.prototype.allowHighlightDisabled_=!1;goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()};goog.ui.Menu.prototype.containsElement=function(a){if(this.getRenderer().containsElement(this,a))return!0;for(var b=0,c=this.getChildCount();b<c;b++){var d=this.getChildAt(b);if("function"==typeof d.containsElement&&d.containsElement(a))return!0}return!1};goog.ui.Menu.prototype.addItem=function(a){this.addChild(a,!0)};
goog.ui.Menu.prototype.addItemAt=function(a,b){this.addChildAt(a,b,!0)};goog.ui.Menu.prototype.removeItem=function(a){(a=this.removeChild(a,!0))&&a.dispose()};goog.ui.Menu.prototype.removeItemAt=function(a){(a=this.removeChildAt(a,!0))&&a.dispose()};goog.ui.Menu.prototype.getItemAt=function(a){return this.getChildAt(a)};goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()};goog.ui.Menu.prototype.getItems=function(){var a=[];this.forEachChild(function(b){a.push(b)});return a};
goog.ui.Menu.prototype.setPosition=function(a,b){var c=this.isVisible();c||goog.style.setElementShown(this.getElement(),!0);goog.style.setPageOffset(this.getElement(),a,b);c||goog.style.setElementShown(this.getElement(),!1)};goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null};goog.ui.Menu.prototype.setAllowAutoFocus=function(a){(this.allowAutoFocus_=a)&&this.setFocusable(!0)};goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_};
goog.ui.Menu.prototype.setAllowHighlightDisabled=function(a){this.allowHighlightDisabled_=a};goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_};goog.ui.Menu.prototype.setVisible=function(a,b,c){(b=goog.ui.Menu.superClass_.setVisible.call(this,a,b))&&a&&this.isInDocument()&&this.allowAutoFocus_&&this.getKeyEventTarget().focus();a&&c&&goog.isNumber(c.clientX)?this.openingCoords=new goog.math.Coordinate(c.clientX,c.clientY):this.openingCoords=null;return b};
goog.ui.Menu.prototype.handleEnterItem=function(a){this.allowAutoFocus_&&this.getKeyEventTarget().focus();return goog.ui.Menu.superClass_.handleEnterItem.call(this,a)};goog.ui.Menu.prototype.highlightNextPrefix=function(a){var b=new RegExp("^"+goog.string.regExpEscape(a),"i");return this.highlightHelper(function(a,d){var e=0>a?0:a,f=!1;do{++a;a==d&&(a=0,f=!0);var g=this.getChildAt(a).getCaption();if(g&&g.match(b))return a}while(!f||a!=e);return this.getHighlightedIndex()},this.getHighlightedIndex())};
goog.ui.Menu.prototype.canHighlightItem=function(a){return(this.allowHighlightDisabled_||a.isEnabled())&&a.isVisible()&&a.isSupportedState(goog.ui.Component.State.HOVER)};goog.ui.Menu.prototype.decorateInternal=function(a){this.decorateContent(a);goog.ui.Menu.superClass_.decorateInternal.call(this,a)};
goog.ui.Menu.prototype.handleKeyEventInternal=function(a){var b=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,a);b||this.forEachChild(function(c){!b&&c.getMnemonic&&c.getMnemonic()==a.keyCode&&(this.isEnabled()&&this.setHighlighted(c),b=c.handleKeyEvent(a))},this);return b};goog.ui.Menu.prototype.setHighlightedIndex=function(a){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,a);(a=this.getChildAt(a))&&goog.style.scrollIntoContainerView(a.getElement(),this.getElement())};
goog.ui.Menu.prototype.decorateContent=function(a){var b=this.getRenderer();a=this.getDomHelper().getElementsByTagNameAndClass("div",b.getCssClass()+"-content",a);for(var c=a.length,d=0;d<c;d++)b.decorateChildren(this,a[d])};goog.positioning.AbstractPosition=function(){};goog.positioning.AbstractPosition.prototype.reposition=function(a,b,c,d){};goog.positioning.AnchoredPosition=function(a,b,c){this.element=a;this.corner=b;this.overflow_=c};goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition);goog.positioning.AnchoredPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(this.element,this.corner,a,b,void 0,c,this.overflow_)};goog.positioning.AnchoredViewportPosition=function(a,b,c,d){goog.positioning.AnchoredPosition.call(this,a,b);this.lastResortOverflow_=c?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE;this.overflowConstraint_=d||void 0};goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition);goog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint=function(){return this.overflowConstraint_};
goog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint=function(a){this.overflowConstraint_=a};goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_};goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(a){this.lastResortOverflow_=a};
goog.positioning.AnchoredViewportPosition.prototype.reposition=function(a,b,c,d){var e=goog.positioning.positionAtAnchor(this.element,this.corner,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d,this.overflowConstraint_);if(e&goog.positioning.OverflowStatus.FAILED){var f=this.adjustCorner(e,this.corner);b=this.adjustCorner(e,b);e=goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d,this.overflowConstraint_);
e&goog.positioning.OverflowStatus.FAILED&&(f=this.adjustCorner(e,f),b=this.adjustCorner(e,b),goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,this.getLastResortOverflow(),d,this.overflowConstraint_))}};goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(a,b){a&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(b=goog.positioning.flipCornerHorizontal(b));a&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(b=goog.positioning.flipCornerVertical(b));return b};goog.positioning.MenuAnchoredPosition=function(a,b,c,d){goog.positioning.AnchoredViewportPosition.call(this,a,b,c||d);(c||d)&&this.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN|(d?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN))};goog.inherits(goog.positioning.MenuAnchoredPosition,goog.positioning.AnchoredViewportPosition);goog.ui.ButtonSide={NONE:0,START:1,END:2,BOTH:3};goog.ui.ButtonRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.ButtonRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.ButtonRenderer);goog.ui.ButtonRenderer.CSS_CLASS="goog-button";goog.ui.ButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};
goog.ui.ButtonRenderer.prototype.updateAriaState=function(a,b,c){switch(b){case goog.ui.Component.State.SELECTED:case goog.ui.Component.State.CHECKED:goog.asserts.assert(a,"The button DOM element cannot be null.");goog.a11y.aria.setState(a,goog.a11y.aria.State.PRESSED,c);break;default:case goog.ui.Component.State.OPENED:case goog.ui.Component.State.DISABLED:goog.ui.ButtonRenderer.superClass_.updateAriaState.call(this,a,b,c)}};
goog.ui.ButtonRenderer.prototype.createDom=function(a){var b=goog.ui.ButtonRenderer.superClass_.createDom.call(this,a);this.setTooltip(b,a.getTooltip());var c=a.getValue();c&&this.setValue(b,c);a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());return b};
goog.ui.ButtonRenderer.prototype.decorate=function(a,b){b=goog.ui.ButtonRenderer.superClass_.decorate.call(this,a,b);a.setValueInternal(this.getValue(b));a.setTooltipInternal(this.getTooltip(b));a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());return b};goog.ui.ButtonRenderer.prototype.getValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.setValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.getTooltip=function(a){return a.title};
goog.ui.ButtonRenderer.prototype.setTooltip=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};goog.ui.ButtonRenderer.prototype.setCollapsed=function(a,b){var c=a.isRightToLeft(),d=this.getStructuralCssClass()+"-collapse-left",e=this.getStructuralCssClass()+"-collapse-right";a.enableClassName(c?e:d,!!(b&goog.ui.ButtonSide.START));a.enableClassName(c?d:e,!!(b&goog.ui.ButtonSide.END))};goog.ui.ButtonRenderer.prototype.getCssClass=function(){return goog.ui.ButtonRenderer.CSS_CLASS};goog.ui.NativeButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.NativeButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.NativeButtonRenderer);goog.ui.NativeButtonRenderer.prototype.getAriaRole=function(){};
goog.ui.NativeButtonRenderer.prototype.createDom=function(a){this.setUpNativeButton_(a);return a.getDomHelper().createDom("button",{"class":this.getClassNames(a).join(" "),disabled:!a.isEnabled(),title:a.getTooltip()||"",value:a.getValue()||""},a.getCaption()||"")};goog.ui.NativeButtonRenderer.prototype.canDecorate=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};
goog.ui.NativeButtonRenderer.prototype.decorate=function(a,b){this.setUpNativeButton_(a);if(b.disabled){var c=goog.asserts.assertString(this.getClassForState(goog.ui.Component.State.DISABLED));goog.dom.classlist.add(b,c)}return goog.ui.NativeButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.NativeButtonRenderer.prototype.initializeDom=function(a){a.getHandler().listen(a.getElement(),goog.events.EventType.CLICK,a.performActionInternal)};
goog.ui.NativeButtonRenderer.prototype.setAllowTextSelection=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setRightToLeft=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.isFocusable=function(a){return a.isEnabled()};goog.ui.NativeButtonRenderer.prototype.setFocusable=goog.nullFunction;
goog.ui.NativeButtonRenderer.prototype.setState=function(a,b,c){goog.ui.NativeButtonRenderer.superClass_.setState.call(this,a,b,c);(a=a.getElement())&&b==goog.ui.Component.State.DISABLED&&(a.disabled=c)};goog.ui.NativeButtonRenderer.prototype.getValue=function(a){return a.value};goog.ui.NativeButtonRenderer.prototype.setValue=function(a,b){a&&(a.value=b)};goog.ui.NativeButtonRenderer.prototype.updateAriaState=goog.nullFunction;
goog.ui.NativeButtonRenderer.prototype.setUpNativeButton_=function(a){a.setHandleMouseEvents(!1);a.setAutoStates(goog.ui.Component.State.ALL,!1);a.setSupportedState(goog.ui.Component.State.FOCUSED,!1)};goog.ui.Button=function(a,b,c){goog.ui.Control.call(this,a,b||goog.ui.NativeButtonRenderer.getInstance(),c)};goog.inherits(goog.ui.Button,goog.ui.Control);goog.ui.Button.Side=goog.ui.ButtonSide;goog.ui.Button.prototype.getValue=function(){return this.value_};goog.ui.Button.prototype.setValue=function(a){this.value_=a;this.getRenderer().setValue(this.getElement(),a)};goog.ui.Button.prototype.setValueInternal=function(a){this.value_=a};goog.ui.Button.prototype.getTooltip=function(){return this.tooltip_};
goog.ui.Button.prototype.setTooltip=function(a){this.tooltip_=a;this.getRenderer().setTooltip(this.getElement(),a)};goog.ui.Button.prototype.setTooltipInternal=function(a){this.tooltip_=a};goog.ui.Button.prototype.setCollapsed=function(a){this.getRenderer().setCollapsed(this,a)};goog.ui.Button.prototype.disposeInternal=function(){goog.ui.Button.superClass_.disposeInternal.call(this);delete this.value_;delete this.tooltip_};
goog.ui.Button.prototype.enterDocument=function(){goog.ui.Button.superClass_.enterDocument.call(this);if(this.isSupportedState(goog.ui.Component.State.FOCUSED)){var a=this.getKeyEventTarget();a&&this.getHandler().listen(a,goog.events.EventType.KEYUP,this.handleKeyEventInternal)}};
goog.ui.Button.prototype.handleKeyEventInternal=function(a){return a.keyCode==goog.events.KeyCodes.ENTER&&a.type==goog.events.KeyHandler.EventType.KEY||a.keyCode==goog.events.KeyCodes.SPACE&&a.type==goog.events.EventType.KEYUP?this.performActionInternal(a):a.keyCode==goog.events.KeyCodes.SPACE};goog.ui.registry.setDecoratorByClassName(goog.ui.ButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null)});goog.ui.INLINE_BLOCK_CLASSNAME="goog-inline-block";goog.ui.CustomButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.CustomButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.CustomButtonRenderer);goog.ui.CustomButtonRenderer.CSS_CLASS="goog-custom-button";
goog.ui.CustomButtonRenderer.prototype.createDom=function(a){var b=this.getClassNames(a),b={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+b.join(" ")},b=a.getDomHelper().createDom("div",b,this.createButton(a.getContent(),a.getDomHelper()));this.setTooltip(b,a.getTooltip());this.setAriaStates(a,b);return b};goog.ui.CustomButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};goog.ui.CustomButtonRenderer.prototype.getContentElement=function(a){return a&&a.firstChild.firstChild};
goog.ui.CustomButtonRenderer.prototype.createButton=function(a,b){return b.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-outer-box"),b.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-inner-box"),a))};goog.ui.CustomButtonRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};
goog.ui.CustomButtonRenderer.prototype.hasBoxStructure=function(a,b){var c=a.getDomHelper().getFirstElementChild(b),d=this.getCssClass()+"-outer-box";return c&&goog.dom.classlist.contains(c,d)&&(c=a.getDomHelper().getFirstElementChild(c),d=this.getCssClass()+"-inner-box",c&&goog.dom.classlist.contains(c,d))?!0:!1};
goog.ui.CustomButtonRenderer.prototype.decorate=function(a,b){goog.asserts.assert(b);goog.ui.CustomButtonRenderer.trimTextNodes_(b,!0);goog.ui.CustomButtonRenderer.trimTextNodes_(b,!1);this.hasBoxStructure(a,b)||b.appendChild(this.createButton(b.childNodes,a.getDomHelper()));goog.dom.classlist.addAll(b,[goog.ui.INLINE_BLOCK_CLASSNAME,this.getCssClass()]);return goog.ui.CustomButtonRenderer.superClass_.decorate.call(this,a,b)};goog.ui.CustomButtonRenderer.prototype.getCssClass=function(){return goog.ui.CustomButtonRenderer.CSS_CLASS};
goog.ui.CustomButtonRenderer.trimTextNodes_=function(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(c.nodeType==goog.dom.NodeType.TEXT){var e=c.nodeValue;if(""==goog.string.trim(e))a.removeChild(c);else{c.nodeValue=b?goog.string.trimLeft(e):goog.string.trimRight(e);break}}else break;c=d}};goog.ui.MenuButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.MenuButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.MenuButtonRenderer);goog.ui.MenuButtonRenderer.CSS_CLASS="goog-menu-button";goog.ui.MenuButtonRenderer.prototype.getContentElement=function(a){return goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,a&&a.firstChild)};
goog.ui.MenuButtonRenderer.prototype.decorate=function(a,b){var c=goog.dom.getElementsByTagNameAndClass("*",goog.ui.MenuRenderer.CSS_CLASS,b)[0];if(c){goog.style.setElementShown(c,!1);goog.dom.appendChild(goog.dom.getOwnerDocument(c).body,c);var d=new goog.ui.Menu;d.decorate(c);a.setMenu(d)}return goog.ui.MenuButtonRenderer.superClass_.decorate.call(this,a,b)};
goog.ui.MenuButtonRenderer.prototype.createButton=function(a,b){return goog.ui.MenuButtonRenderer.superClass_.createButton.call(this,[this.createCaption(a,b),this.createDropdown(b)],b)};goog.ui.MenuButtonRenderer.prototype.createCaption=function(a,b){return goog.ui.MenuButtonRenderer.wrapCaption(a,this.getCssClass(),b)};goog.ui.MenuButtonRenderer.wrapCaption=function(a,b,c){return c.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(b+"-caption"),a)};
goog.ui.MenuButtonRenderer.prototype.createDropdown=function(a){return a.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-dropdown"),"\u00a0")};goog.ui.MenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.MenuButtonRenderer.CSS_CLASS};goog.ui.MenuButton=function(a,b,c,d,e){goog.ui.Button.call(this,a,c||goog.ui.MenuButtonRenderer.getInstance(),d);this.setSupportedState(goog.ui.Component.State.OPENED,!0);this.menuPosition_=new goog.positioning.MenuAnchoredPosition(null,goog.positioning.Corner.BOTTOM_START);b&&this.setMenu(b);this.menuMargin_=null;this.timer_=new goog.Timer(500);!goog.userAgent.product.IPHONE&&!goog.userAgent.product.IPAD||goog.userAgent.isVersionOrHigher("533.17.9")||this.setFocusablePopupMenu(!0);this.menuRenderer_=
e||goog.ui.MenuRenderer.getInstance()};goog.inherits(goog.ui.MenuButton,goog.ui.Button);goog.ui.MenuButton.prototype.isFocusablePopupMenu_=!1;goog.ui.MenuButton.prototype.renderMenuAsSibling_=!1;goog.ui.MenuButton.prototype.enterDocument=function(){goog.ui.MenuButton.superClass_.enterDocument.call(this);this.attachKeyDownEventListener_(!0);this.menu_&&this.attachMenuEventListeners_(this.menu_,!0);goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!this.menu_)};
goog.ui.MenuButton.prototype.exitDocument=function(){goog.ui.MenuButton.superClass_.exitDocument.call(this);this.attachKeyDownEventListener_(!1);if(this.menu_){this.setOpen(!1);this.menu_.exitDocument();this.attachMenuEventListeners_(this.menu_,!1);var a=this.menu_.getElement();a&&goog.dom.removeNode(a)}};
goog.ui.MenuButton.prototype.disposeInternal=function(){goog.ui.MenuButton.superClass_.disposeInternal.call(this);this.menu_&&(this.menu_.dispose(),delete this.menu_);delete this.positionElement_;this.timer_.dispose()};goog.ui.MenuButton.prototype.handleMouseDown=function(a){goog.ui.MenuButton.superClass_.handleMouseDown.call(this,a);this.isActive()&&(this.setOpen(!this.isOpen(),a),this.menu_&&this.menu_.setMouseButtonPressed(this.isOpen()))};
goog.ui.MenuButton.prototype.handleMouseUp=function(a){goog.ui.MenuButton.superClass_.handleMouseUp.call(this,a);this.menu_&&!this.isActive()&&this.menu_.setMouseButtonPressed(!1)};goog.ui.MenuButton.prototype.performActionInternal=function(a){this.setActive(!1);return!0};goog.ui.MenuButton.prototype.handleDocumentMouseDown=function(a){this.menu_&&this.menu_.isVisible()&&!this.containsElement(a.target)&&this.setOpen(!1)};
goog.ui.MenuButton.prototype.containsElement=function(a){return a&&goog.dom.contains(this.getElement(),a)||this.menu_&&this.menu_.containsElement(a)||!1};
goog.ui.MenuButton.prototype.handleKeyEventInternal=function(a){if(a.keyCode==goog.events.KeyCodes.SPACE){if(a.preventDefault(),a.type!=goog.events.EventType.KEYUP)return!0}else if(a.type!=goog.events.KeyHandler.EventType.KEY)return!1;if(this.menu_&&this.menu_.isVisible()){var b=this.menu_.handleKeyEvent(a);return a.keyCode==goog.events.KeyCodes.ESC?(this.setOpen(!1),!0):b}return a.keyCode==goog.events.KeyCodes.DOWN||a.keyCode==goog.events.KeyCodes.UP||a.keyCode==goog.events.KeyCodes.SPACE||a.keyCode==
goog.events.KeyCodes.ENTER?(this.setOpen(!0,a),!0):!1};goog.ui.MenuButton.prototype.handleMenuAction=function(a){this.setOpen(!1)};goog.ui.MenuButton.prototype.handleMenuBlur=function(a){this.isActive()||this.setOpen(!1)};goog.ui.MenuButton.prototype.handleBlur=function(a){this.isFocusablePopupMenu()||this.setOpen(!1);goog.ui.MenuButton.superClass_.handleBlur.call(this,a)};
goog.ui.MenuButton.prototype.getMenu=function(){this.menu_||this.setMenu(new goog.ui.Menu(this.getDomHelper(),this.menuRenderer_));return this.menu_||null};
goog.ui.MenuButton.prototype.setMenu=function(a){var b=this.menu_;a!=b&&(b&&(this.setOpen(!1),this.isInDocument()&&this.attachMenuEventListeners_(b,!1),delete this.menu_),this.isInDocument()&&goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!a),a&&(this.menu_=a,a.setParent(this),a.setVisible(!1),a.setAllowAutoFocus(this.isFocusablePopupMenu()),this.isInDocument()&&this.attachMenuEventListeners_(a,!0)));return b};
goog.ui.MenuButton.prototype.setMenuPosition=function(a){a&&(this.menuPosition_=a,this.positionElement_=a.element)};goog.ui.MenuButton.prototype.setPositionElement=function(a){this.positionElement_=a;this.positionMenu()};goog.ui.MenuButton.prototype.setMenuMargin=function(a){this.menuMargin_=a};goog.ui.MenuButton.prototype.addItem=function(a){this.getMenu().addChild(a,!0)};goog.ui.MenuButton.prototype.addItemAt=function(a,b){this.getMenu().addChildAt(a,b,!0)};
goog.ui.MenuButton.prototype.removeItem=function(a){(a=this.getMenu().removeChild(a,!0))&&a.dispose()};goog.ui.MenuButton.prototype.removeItemAt=function(a){(a=this.getMenu().removeChildAt(a,!0))&&a.dispose()};goog.ui.MenuButton.prototype.getItemAt=function(a){return this.menu_?this.menu_.getChildAt(a):null};goog.ui.MenuButton.prototype.getItemCount=function(){return this.menu_?this.menu_.getChildCount():0};
goog.ui.MenuButton.prototype.setVisible=function(a,b){var c=goog.ui.MenuButton.superClass_.setVisible.call(this,a,b);c&&!this.isVisible()&&this.setOpen(!1);return c};goog.ui.MenuButton.prototype.setEnabled=function(a){goog.ui.MenuButton.superClass_.setEnabled.call(this,a);this.isEnabled()||this.setOpen(!1)};goog.ui.MenuButton.prototype.isAlignMenuToStart=function(){var a=this.menuPosition_.corner;return a==goog.positioning.Corner.BOTTOM_START||a==goog.positioning.Corner.TOP_START};
goog.ui.MenuButton.prototype.setAlignMenuToStart=function(a){this.menuPosition_.corner=a?goog.positioning.Corner.BOTTOM_START:goog.positioning.Corner.BOTTOM_END};goog.ui.MenuButton.prototype.setScrollOnOverflow=function(a){this.menuPosition_.setLastResortOverflow&&this.menuPosition_.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X|(a?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y))};
goog.ui.MenuButton.prototype.isScrollOnOverflow=function(){return this.menuPosition_.getLastResortOverflow&&!!(this.menuPosition_.getLastResortOverflow()&goog.positioning.Overflow.RESIZE_HEIGHT)};goog.ui.MenuButton.prototype.isFocusablePopupMenu=function(){return this.isFocusablePopupMenu_};goog.ui.MenuButton.prototype.setFocusablePopupMenu=function(a){this.isFocusablePopupMenu_=a};goog.ui.MenuButton.prototype.setRenderMenuAsSibling=function(a){this.renderMenuAsSibling_=a};
goog.ui.MenuButton.prototype.showMenu=function(){this.setOpen(!0)};goog.ui.MenuButton.prototype.hideMenu=function(){this.setOpen(!1)};
goog.ui.MenuButton.prototype.setOpen=function(a,b){goog.ui.MenuButton.superClass_.setOpen.call(this,a);if(this.menu_&&this.hasState(goog.ui.Component.State.OPENED)==a){if(a){if(!this.menu_.isInDocument())if(this.renderMenuAsSibling_){var c=goog.dom.getNextElementSibling(this.getElement());c?this.menu_.renderBefore(c):this.menu_.render(this.getElement().parentNode)}else this.menu_.render();this.viewportBox_=goog.style.getVisibleRectForElement(this.getElement());this.buttonRect_=goog.style.getBounds(this.getElement());
this.positionMenu();this.menu_.setHighlightedIndex(!b||b.keyCode!=goog.events.KeyCodes.DOWN&&b.keyCode!=goog.events.KeyCodes.UP?-1:0)}else{this.setActive(!1);this.menu_.setMouseButtonPressed(!1);if(c=this.getElement())goog.a11y.aria.setState(c,goog.a11y.aria.State.ACTIVEDESCENDANT,""),goog.a11y.aria.setState(c,goog.a11y.aria.State.OWNS,"");goog.isDefAndNotNull(this.originalSize_)&&(this.originalSize_=void 0,(c=this.menu_.getElement())&&goog.style.setSize(c,"",""))}this.menu_.setVisible(a,!1,b);this.isDisposed()||
this.attachPopupListeners_(a)}};goog.ui.MenuButton.prototype.invalidateMenuSize=function(){this.originalSize_=void 0};
goog.ui.MenuButton.prototype.positionMenu=function(){if(this.menu_.isInDocument()){var a=this.positionElement_||this.getElement(),b=this.menuPosition_;this.menuPosition_.element=a;a=this.menu_.getElement();this.menu_.isVisible()||(a.style.visibility="hidden",goog.style.setElementShown(a,!0));!this.originalSize_&&this.isScrollOnOverflow()&&(this.originalSize_=goog.style.getSize(a));var c=goog.positioning.flipCornerVertical(b.corner);b.reposition(a,c,this.menuMargin_,this.originalSize_);this.menu_.isVisible()||
(goog.style.setElementShown(a,!1),a.style.visibility="visible")}};goog.ui.MenuButton.prototype.onTick_=function(a){a=goog.style.getBounds(this.getElement());var b=goog.style.getVisibleRectForElement(this.getElement());goog.math.Rect.equals(this.buttonRect_,a)&&goog.math.Box.equals(this.viewportBox_,b)||(this.buttonRect_=a,this.viewportBox_=b,this.positionMenu())};
goog.ui.MenuButton.prototype.attachMenuEventListeners_=function(a,b){var c=this.getHandler(),d=b?c.listen:c.unlisten;d.call(c,a,goog.ui.Component.EventType.ACTION,this.handleMenuAction);d.call(c,a,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem);d.call(c,a,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem)};
goog.ui.MenuButton.prototype.attachKeyDownEventListener_=function(a){var b=this.getHandler();(a?b.listen:b.unlisten).call(b,this.getElement(),goog.events.EventType.KEYDOWN,this.handleKeyDownEvent_)};
goog.ui.MenuButton.prototype.handleHighlightItem=function(a){var b=this.getElement();goog.asserts.assert(b,"The menu button DOM element cannot be null.");if(a=a.target.getElement()){a=goog.a11y.aria.getActiveDescendant(a)||a;if(!a.id){var c=goog.ui.IdGenerator.getInstance();a.id=c.getNextUniqueId()}goog.a11y.aria.setActiveDescendant(b,a);goog.a11y.aria.setState(b,goog.a11y.aria.State.OWNS,a.id)}};
goog.ui.MenuButton.prototype.handleKeyDownEvent_=function(a){this.isSupportedState(goog.ui.Component.State.FOCUSED)&&this.getKeyEventTarget()&&this.menu_&&this.menu_.isVisible()&&a.stopPropagation()};
goog.ui.MenuButton.prototype.handleUnHighlightItem=function(a){this.menu_.getHighlighted()||(a=this.getElement(),goog.asserts.assert(a,"The menu button DOM element cannot be null."),goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,""),goog.a11y.aria.setState(a,goog.a11y.aria.State.OWNS,""))};
goog.ui.MenuButton.prototype.attachPopupListeners_=function(a){var b=this.getHandler(),c=a?b.listen:b.unlisten;c.call(b,this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.handleDocumentMouseDown,!0);this.isFocusablePopupMenu()&&c.call(b,this.menu_,goog.ui.Component.EventType.BLUR,this.handleMenuBlur);c.call(b,this.timer_,goog.Timer.TICK,this.onTick_);a?this.timer_.start():this.timer_.stop()};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.MenuButton(null)});nrg.ui.SlideInMenu=function(){nrg.ui.Component.call(this);this.holder_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_Holder_"+goog.string.createUniqueString(),"class":nrg.ui.SlideInMenu.CSS.MENUHOLDER});goog.dom.append(this.getElement(),this.holder_);this.icon_=goog.dom.createDom("img",{id:this.constructor.ID_PREFIX+"_Icon_"+goog.string.createUniqueString(),"class":nrg.ui.SlideInMenu.CSS.ICON});goog.dom.append(this.getElement(),this.icon_);this.menu_=new goog.ui.Menu;this.animQueue_=new goog.fx.AnimationParallelQueue;
this.anims_=[];this.setMenuEvents_();this.hideMenu(void 0,0);this.menu_.render(this.holder_);goog.dom.classes.add(this.menu_.getElement(),nrg.ui.SlideInMenu.CSS.MENU)};goog.inherits(nrg.ui.SlideInMenu,nrg.ui.Component);goog.exportSymbol("nrg.ui.SlideInMenu",nrg.ui.SlideInMenu);nrg.ui.SlideInMenu.ID_PREFIX="nrg.ui.SlideInMenu";nrg.ui.SlideInMenu.EventType={ITEM_SELECTED:"item_selected"};
nrg.ui.SlideInMenu.CSS_SUFFIX={ICON:"icon",ICON_HOVERED:"icon-hovered",MENU:"menu",MENUHOLDER:"menuholder",MENUITEM:"menuitem",MENUITEM_HIGHLIGHT:"menuitem-highlight",MENUITEM_ICON:"menuitem-icon"};nrg.ui.SlideInMenu.menuItemCollection={ITEM:null,CONTENT:null,ICON:null};nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN=450;nrg.ui.SlideInMenu.ANIM_LEN_IN=500;nrg.ui.SlideInMenu.ANIM_LEN_OUT=700;nrg.ui.SlideInMenu.MOUSEOUT_HIDE=nrg.ui.SlideInMenu.ANIM_LEN_OUT+800;
nrg.ui.SlideInMenu.createAnimIn_=function(a,b,c,d){d=goog.isDef(d)?d:nrg.ui.SlideInMenu.ANIM_LEN_IN;return[new goog.fx.dom.FadeIn(a,d),new goog.fx.dom.Slide(a,b,c,d,goog.fx.easing.easeOut)]};nrg.ui.SlideInMenu.createAnimOut_=function(a,b,c,d){d=goog.isDef(d)?d:nrg.ui.SlideInMenu.ANIM_LEN_OUT;return[new goog.fx.dom.FadeOut(a,d),new goog.fx.dom.Slide(a,b,c,d,goog.fx.easing.easeOut)]};nrg.ui.SlideInMenu.prototype.menuItems_=null;nrg.ui.SlideInMenu.prototype.prevSelectedItem_=null;
nrg.ui.SlideInMenu.prototype.currSelectedItem_=null;nrg.ui.SlideInMenu.prototype.menuVisible_=!1;nrg.ui.SlideInMenu.prototype.hidePos_=[-100,-100];nrg.ui.SlideInMenu.prototype.showPos_=[0,0];nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected_=!0;nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected_=!0;nrg.ui.SlideInMenu.prototype.setHidePosition=function(a,b){return this.hidePos_=[a,b]};nrg.ui.SlideInMenu.prototype.setShowPosition=function(a,b){return this.showPos_=[a,b]};
nrg.ui.SlideInMenu.prototype.getHidePosition=function(a){return this.hidePos_};nrg.ui.SlideInMenu.prototype.getShowPosition=function(a){return this.showPos_};nrg.ui.SlideInMenu.prototype.getMenu=function(){return this.menu_};nrg.ui.SlideInMenu.prototype.getMenuHolder=function(){return this.holder_};nrg.ui.SlideInMenu.prototype.getMenuIcon=function(){return this.icon_};nrg.ui.SlideInMenu.prototype.setMenuIconSrc=function(a){this.icon_.src=a};
nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc=function(a,b){this.menuItems_[a].ICON.src=b};nrg.ui.SlideInMenu.prototype.getIndexFromTitle=function(a){return goog.object.getKeys(this.menuItems_).indexOf(a)};nrg.ui.SlideInMenu.prototype.getTitleFromIndex=function(a){return goog.object.getKeys(this.menuItems_)[a]};nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex=function(a){return this.menuItems_[goog.object.getKeys(this.menuItems_)[a]]};
nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected=function(a){return this.matchMenuIconToSelected_=a};nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected=function(a){return this.matchMenuTitleToSelected_=a};nrg.ui.SlideInMenu.prototype.getSelectedMenuItem=function(){return this.currSelectedItem_};
nrg.ui.SlideInMenu.prototype.clearAnimQueue_=function(){goog.isDefAndNotNull(this.animQueue_)&&(this.animQueue_.stop(),goog.array.forEach(this.anims_,function(a){this.animQueue_.remove(a);a.dispose()}.bind(this)),goog.array.clear(this.anims_))};
nrg.ui.SlideInMenu.prototype.runAnimations_=function(a,b){this.clearAnimQueue_();goog.array.forEach(goog.isArray(a)?a:[a],function(a){this.animQueue_.add(a);this.anims_.push(a)}.bind(this));this.holder_.style.visibility="visible";goog.events.listenOnce(this.animQueue_,goog.fx.Animation.EventType.END,function(a){b&&b()}.bind(this));this.animQueue_.play()};nrg.ui.SlideInMenu.prototype.fadeOutTimer_=null;
nrg.ui.SlideInMenu.prototype.startFadeOutTimer_=function(){goog.isDefAndNotNull(this.fadeOutTimer_)&&(goog.Timer.clear(this.fadeOutTimer_),this.fadeOutTimer_=null);this.fadeOutTimer_=goog.Timer.callOnce(function(){this.fadeOutTimer_=null;this.menuVisible_&&(!this.mouseIsOverMenu_&&this.menuVisible_?this.hideMenu():this.startFadeOutTimer_())}.bind(this),nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN)};
nrg.ui.SlideInMenu.prototype.setHighlightedIndex=function(a){goog.dom.classes.add(this.menuItems_[this.getTitleFromIndex(a)].CONTENT,nrg.ui.SlideInMenu.CSS.MENUITEM_HIGHLIGHT);this.matchMenuIconToSelected_&&(this.icon_.src=this.menuItems_[this.getTitleFromIndex(a)].ICON.src);this.matchMenuTitleToSelected_&&(this.getElement().title=this.getItemCollectionFromIndex(a).ITEM.getContent())};
nrg.ui.SlideInMenu.prototype.deselectAll=function(){goog.object.forEach(this.menuItems_,function(a,b){goog.dom.classes.remove(a.CONTENT,nrg.ui.SlideInMenu.CSS.MENUITEM_HIGHLIGHT)}.bind(this))};
nrg.ui.SlideInMenu.prototype.addMenuItem=function(a,b){goog.isDefAndNotNull(this.menuItems_)||(this.menuItems_={});a=goog.isString(a)?[a]:a;b=b||[];b=goog.isArray(b)?b:[b];var c=null,d=null,e=null;goog.array.forEach(a,function(a,g){if(this.menuItems_[a])throw Error(a+" is already in use!");c=new goog.ui.MenuItem(a);this.menu_.addItem(c);d=c.getContentElement();goog.dom.classes.add(d,nrg.ui.SlideInMenu.CSS.MENUITEM);d.title=a;e=goog.dom.createDom("img",{id:nrg.ui.SlideInMenu.ID_PREFIX+"_MenuItemIcon_"+
goog.string.createUniqueString(),"class":nrg.ui.SlideInMenu.CSS.MENUITEM_ICON});e.src=g<=b.length-1?b[g]:null;goog.dom.append(d,e);this.menuItems_[a]=goog.object.clone(nrg.ui.SlideInMenu.menuItemCollection);this.menuItems_[a].ITEM=c;this.menuItems_[a].CONTENT=d;this.menuItems_[a].ICON=e}.bind(this))};
nrg.ui.SlideInMenu.prototype.setSelected=function(a,b){var c=a;if(goog.isString(c)){if(!this.menuItems_[c])throw Error(c+" does not exist!");c=this.getIndexFromTitle(c)}this.prevSelectedItem_=this.currSelectedItem_?this.currSelectedItem_:a;this.currSelectedItem_=a;goog.isDef(b)&&!b||this.deselectAll();this.setHighlightedIndex(c);this.dispatchSelected_(c)};nrg.ui.SlideInMenu.prototype.dispatchSelected_=function(a){this.dispatchEvent({type:nrg.ui.SlideInMenu.EventType.ITEM_SELECTED,index:a,title:this.getItemCollectionFromIndex(a).ITEM.getContent()})};
nrg.ui.SlideInMenu.prototype.showMenu=function(a,b){this.runAnimations_(nrg.ui.SlideInMenu.createAnimIn_(this.holder_,this.hidePos_,this.showPos_,b),function(){this.menuVisible_=!0;goog.isDefAndNotNull(a)&&a()}.bind(this))};nrg.ui.SlideInMenu.prototype.hideMenu=function(a,b){this.runAnimations_(nrg.ui.SlideInMenu.createAnimOut_(this.holder_,this.showPos_,this.hidePos_,b),function(){this.menuVisible_=!1;this.holder_.style.visibility="hidden";goog.isDef(a)&&a()}.bind(this))};
nrg.ui.SlideInMenu.prototype.setMenuEvents_=function(){goog.events.listen(this.getElement(),goog.events.EventType.CLICK,function(a){this.menuVisible_?this.hideMenu():this.showMenu()}.bind(this));goog.events.listen(this.menu_,"action",function(a){this.setSelected(a.target.getContent())}.bind(this));goog.events.listen(this.holder_,goog.events.EventType.MOUSEOVER,function(a){this.mouseIsOverMenu_=!0}.bind(this));goog.events.listen(this.holder_,goog.events.EventType.MOUSEOUT,function(a){this.mouseIsOverMenu_=
!1;this.startFadeOutTimer_()}.bind(this))};
nrg.ui.SlideInMenu.prototype.disposeInternal=function(){nrg.ui.SlideInMenu.superClass_.disposeInternal.call(this);delete this.mouseIsOverMenu_;delete this.fadeOutTimer_;this.clearAnimQueue_();goog.array.clear(this.anims_);delete this.anims_;goog.object.forEach(this.menuItems_,function(a,b){goog.events.removeAll(a);goog.dom.removeNode(a);delete this.menuItems_[b]}.bind(this));goog.object.clear(this.menuItems_);delete this.menuItems_;goog.dom.removeNode(this.holder_);delete this.holder_;goog.dom.removeNode(this.icon_);
delete this.icon_;goog.events.removeAll(this.menu_);this.menu_.dispose();this.disposeAnimationQueue(this.animQueue_);delete this.animQueue_;delete this.prevSelectedItem_;delete this.currSelectedItem_;delete this.menuVisible_;delete this.hidePos_;delete this.showPos_;delete this.matchMenuIconToSelected_;delete this.matchMenuTitleToSelected_};goog.exportSymbol("nrg.ui.SlideInMenu.ID_PREFIX",nrg.ui.SlideInMenu.ID_PREFIX);goog.exportSymbol("nrg.ui.SlideInMenu.EventType",nrg.ui.SlideInMenu.EventType);
goog.exportSymbol("nrg.ui.SlideInMenu.CSS_SUFFIX",nrg.ui.SlideInMenu.CSS_SUFFIX);goog.exportSymbol("nrg.ui.SlideInMenu.menuItemCollection",nrg.ui.SlideInMenu.menuItemCollection);goog.exportSymbol("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN);goog.exportSymbol("nrg.ui.SlideInMenu.ANIM_LEN_IN",nrg.ui.SlideInMenu.ANIM_LEN_IN);goog.exportSymbol("nrg.ui.SlideInMenu.ANIM_LEN_OUT",nrg.ui.SlideInMenu.ANIM_LEN_OUT);goog.exportSymbol("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",nrg.ui.SlideInMenu.MOUSEOUT_HIDE);
goog.exportSymbol("nrg.ui.SlideInMenu.prototype.setHidePosition",nrg.ui.SlideInMenu.prototype.setHidePosition);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.setShowPosition",nrg.ui.SlideInMenu.prototype.setShowPosition);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getHidePosition",nrg.ui.SlideInMenu.prototype.getHidePosition);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getShowPosition",nrg.ui.SlideInMenu.prototype.getShowPosition);
goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getMenu",nrg.ui.SlideInMenu.prototype.getMenu);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getMenuHolder",nrg.ui.SlideInMenu.prototype.getMenuHolder);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getMenuIcon",nrg.ui.SlideInMenu.prototype.getMenuIcon);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",nrg.ui.SlideInMenu.prototype.setMenuIconSrc);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc);
goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",nrg.ui.SlideInMenu.prototype.getIndexFromTitle);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",nrg.ui.SlideInMenu.prototype.getTitleFromIndex);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected);
goog.exportSymbol("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",nrg.ui.SlideInMenu.prototype.getSelectedMenuItem);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",nrg.ui.SlideInMenu.prototype.setHighlightedIndex);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.deselectAll",nrg.ui.SlideInMenu.prototype.deselectAll);
goog.exportSymbol("nrg.ui.SlideInMenu.prototype.addMenuItem",nrg.ui.SlideInMenu.prototype.addMenuItem);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.setSelected",nrg.ui.SlideInMenu.prototype.setSelected);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.showMenu",nrg.ui.SlideInMenu.prototype.showMenu);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.hideMenu",nrg.ui.SlideInMenu.prototype.hideMenu);goog.exportSymbol("nrg.ui.SlideInMenu.prototype.disposeInternal",nrg.ui.SlideInMenu.prototype.disposeInternal);xiv.ui={};xiv.ui.layouts={};xiv.ui.layouts.interactors={};xiv.ui.layouts.interactors.InputController=function(){nrg.ui.Component.call(this)};goog.inherits(xiv.ui.layouts.interactors.InputController,nrg.ui.Component);goog.exportSymbol("xiv.ui.layouts.interactors.InputController",xiv.ui.layouts.interactors.InputController);xiv.ui.layouts.interactors.InputController.EventType={INPUT:"input",DISPLAY:"display"};xiv.ui.layouts.interactors.InputController.ID_PREFIX="xiv.ui.layouts.interactors.InputController";
xiv.ui.layouts.interactors.InputController.CSS_SUFFIX={INPUT_BOX:"inputbox",INPUT_BOX_HOVERED:"inputbox-hovered",DISPLAY:"display"};xiv.ui.layouts.interactors.InputController.prototype.displayElt_=null;xiv.ui.layouts.interactors.InputController.prototype.inputBox_=null;xiv.ui.layouts.interactors.InputController.prototype.inputHovered_=!1;xiv.ui.layouts.interactors.InputController.prototype.getValue=function(){if(goog.isDefAndNotNull(this.inputBox_))return this.inputBox_.value};
xiv.ui.layouts.interactors.InputController.prototype.setValue=function(a){goog.isDefAndNotNull(this.inputBox_)&&(this.inputBox_.value=a,this.updateValue())};xiv.ui.layouts.interactors.InputController.prototype.setMaximum=function(a){goog.isDefAndNotNull(this.inputBox_)&&(this.inputBox_.max=a,this.updateValue())};xiv.ui.layouts.interactors.InputController.prototype.setMinimum=function(a){goog.isDefAndNotNull(this.inputBox_)&&(this.inputBox_.min=a,this.updateValue())};
xiv.ui.layouts.interactors.InputController.prototype.updateValue=function(){};xiv.ui.layouts.interactors.InputController.prototype.onInput=function(a){a=parseInt(a.target.value);this.inputBox_.value=a;this.dispatchEvent({type:xiv.ui.layouts.interactors.InputController.EventType.INPUT,value:this.inputBox_.value});this.updateValue()};
xiv.ui.layouts.interactors.InputController.prototype.createDisplayElt_=function(){this.displayElt_=goog.dom.createDom("div");goog.dom.appendChild(this.getElement(),this.displayElt_);goog.dom.classes.add(this.displayElt_,xiv.ui.layouts.interactors.InputController.CSS.DISPLAY)};
xiv.ui.layouts.interactors.InputController.prototype.createInputElt_=function(){this.inputBox_=goog.dom.createDom("input");this.inputBox_.type="number";this.inputBox_.step=1;this.inputBox_.min=0;this.inputBox_.value=0;goog.dom.appendChild(this.getElement(),this.inputBox_);goog.dom.classes.add(this.inputBox_,xiv.ui.layouts.interactors.InputController.CSS.INPUT_BOX)};
xiv.ui.layouts.interactors.InputController.prototype.render=function(a){xiv.ui.layouts.interactors.InputController.superClass_.render.call(this,a);this.createDisplayElt_();this.createInputElt_();goog.events.listen(this.inputBox_,goog.events.EventType.MOUSEENTER,function(a){a.stopPropagation();this.inputBox_.style.opacity=1;this.displayElt_.style.opacity=0}.bind(this));goog.events.listen(this.inputBox_,goog.events.EventType.MOUSELEAVE,function(a){a.stopPropagation();this.inputBox_.style.opacity=0;
this.displayElt_.style.opacity=1}.bind(this));goog.events.listen(this.inputBox_,goog.events.EventType.INPUT,this.onInput.bind(this));this.updateValue()};
xiv.ui.layouts.interactors.InputController.prototype.disposeInternal=function(){xiv.ui.layouts.interactors.InputController.superClass_.disposeInternal.call(this);delete this.inputHovered_;this.inputBox_&&(goog.events.removeAll(this.inputBox_),goog.dom.removeNode(this.inputBox_),delete this.inputBox_);this.displayElt_&&(goog.events.removeAll(this.displayElt_),goog.dom.removeNode(this.displayElt_),delete this.displayElt_)};goog.exportSymbol("xiv.ui.layouts.interactors.InputController.EventType",xiv.ui.layouts.interactors.InputController.EventType);
goog.exportSymbol("xiv.ui.layouts.interactors.InputController.ID_PREFIX",xiv.ui.layouts.interactors.InputController.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",xiv.ui.layouts.interactors.InputController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.getValue",xiv.ui.layouts.interactors.InputController.prototype.getValue);goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.setValue",xiv.ui.layouts.interactors.InputController.prototype.setValue);
goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",xiv.ui.layouts.interactors.InputController.prototype.setMaximum);goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",xiv.ui.layouts.interactors.InputController.prototype.setMinimum);goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.updateValue",xiv.ui.layouts.interactors.InputController.prototype.updateValue);
goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.onInput",xiv.ui.layouts.interactors.InputController.prototype.onInput);goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.render",xiv.ui.layouts.interactors.InputController.prototype.render);goog.exportSymbol("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",xiv.ui.layouts.interactors.InputController.prototype.disposeInternal);xiv.ui.layouts.interactors.FrameDisplay=function(){xiv.ui.layouts.interactors.InputController.call(this)};goog.inherits(xiv.ui.layouts.interactors.FrameDisplay,xiv.ui.layouts.interactors.InputController);goog.exportSymbol("xiv.ui.layouts.interactors.FrameDisplay",xiv.ui.layouts.interactors.FrameDisplay);xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";
xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue=function(){this.displayElt_.innerHTML=this.inputBox_.value+" / "+this.inputBox_.max};goog.exportSymbol("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue);nrg.array=function(){};goog.exportSymbol("nrg.array",nrg.array);nrg.array.naturalCompare=function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,f,g;f=(g=a.charAt(c++)).charCodeAt(0);)f=46==f||48<=f&&57>=f,f!==e&&(b[++d]="",e=f),b[d]+=g;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var f=Number(d[x]),g=Number(e[x]);return f==d[x]&&g==e[x]?f-g:d[x]>e[x]?1:-1}return d.length-e.length};goog.exportSymbol("nrg.array.naturalCompare",nrg.array.naturalCompare);var csgVector=function(a,b,c){this.z_=this.y_=this.x_=0;3==arguments.length?(this.x_=Number(a),this.y_=Number(b),this.z_=Number(c)):a instanceof csgVector?(this.x_=Number(a.x()),this.y_=Number(a.y()),this.z_=Number(a.z())):(this.x_=Number(a[0]),this.y_=Number(a[1]),this.z_=Number(a[2]))};
csgVector.prototype={clone:function(){return new csgVector(this.x_,this.y_,this.z_)},negated:function(){return new csgVector(-this.x_,-this.y_,-this.z_)},plus:function(a){return new csgVector(this.x_+a.x(),this.y_+a.y(),this.z_+a.z())},minus:function(a){return new csgVector(this.x_-a.x(),this.y_-a.y(),this.z_-a.z())},times:function(a){return new csgVector(this.x_*a,this.y_*a,this.z_*a)},dividedBy:function(a){return new csgVector(this.x_/a,this.y_/a,this.z_/a)},dot:function(a){return this.x_*a.x()+
this.y_*a.y()+this.z_*a.z()},lerp:function(a,b){return this.plus(a.minus(this).times(b))},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.dividedBy(this.length())},cross:function(a){return new csgVector(this.y_*a.z()-this.z_*a.y(),this.z_*a.x()-this.x_*a.z(),this.x_*a.y()-this.y_*a.x())},x:function(){return this.x_},y:function(){return this.y_},z:function(){return this.z_}};var csgVertex=function(a,b){this.pos_=new csgVector(a);this.normal_=new csgVector(b)};csgVertex.prototype={clone:function(){return new csgVertex(this.pos_.clone(),this.normal_.clone())},flip:function(){this.normal_=this.normal_.negated()},interpolate:function(a,b){return new csgVertex(this.pos_.lerp(a.pos(),b),this.normal_.lerp(a.normal(),b))},pos:function(){return this.pos_},normal:function(){return this.normal_}};var csgPlane=function(a,b){this.normal_=a;this.w_=b};csgPlane.EPSILON=1E-5;csgPlane.fromPoints=function(a,b,c){b=b.minus(a).cross(c.minus(a)).unit();return new csgPlane(b,b.dot(a))};csgPlane.prototype={clone:function(){return new csgPlane(this.normal_.clone(),this.w_)},flip:function(){this.normal_=this.normal_.negated();this.w_=-this.w_},w:function(){return this.w_},normal:function(){return this.normal_}};var csgPolygon=function(a,b){this.vertices_=a;this.shared_=b;this.plane_=csgPlane.fromPoints(a[0].pos(),a[1].pos(),a[2].pos())};
csgPolygon.prototype={clone:function(){var a=this.vertices_.map(function(a){return a.clone()});return new csgPolygon(a,this.shared_)},flip:function(){this.vertices_.reverse().map(function(a){a.flip()});this.plane_.flip()},vertices:function(){return this.vertices_},shared:function(){return this.shared_},splitPolygon:function(a,b,c,d,e){for(var f=0,g=[],h=0;h<this.vertices_.length;h++){var k=a.normal().dot(this.vertices_[h].pos())-a.w(),k=k<-csgPlane.EPSILON?2:k>csgPlane.EPSILON?1:0,f=f|k;g.push(k)}switch(f){case 0:(0<
a.normal().dot(this.plane_.normal())?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(h=0;h<this.vertices().length;h++){var l=(h+1)%this.vertices().length,k=g[h],m=g[l],f=this.vertices()[h],l=this.vertices()[l];2!=k&&b.push(f);1!=k&&c.push(2!=k?f.clone():f);3==(k|m)&&(k=(a.w()-a.normal().dot(f.pos()))/a.normal().dot(l.pos().minus(f.pos())),k=f.interpolate(l,k),b.push(k),c.push(k.clone()))}3<=b.length&&d.push(new csgPolygon(b,this.shared()));3<=c.length&&
e.push(new csgPolygon(c,this.shared()))}}};var csgNode=function(a){this.back_=this.front_=this.plane_=null;this.polygons_=[];a&&this.build(a)};
csgNode.prototype={clone:function(){var a=new csgNode;a.setPlane(this.plane_&&this.plane_.clone());a.setFront(this.front_&&this.front_.clone());a.setBack(this.back_&&this.back_.clone());a.setPolygons(this.polygons_.map(function(a){return a.clone()}));return a},invert:function(){for(var a=0;a<this.polygons_.length;a++)this.polygons_[a].flip();this.plane_.flip();this.front_&&this.front_.invert();this.back_&&this.back_.invert();a=this.front_;this.front_=this.back_;this.back_=a},clipPolygons:function(a){if(!this.plane_)return a.slice();
for(var b=[],c=[],d=0;d<a.length;d++)a[d].splitPolygon(this.plane_,b,c,b,c);this.front_&&(b=this.front_.clipPolygons(b));c=this.back_?this.back_.clipPolygons(c):[];return b.concat(c)},clipTo:function(a){this.polygons_=a.clipPolygons(this.polygons_);this.front_&&this.front_.clipTo(a);this.back_&&this.back_.clipTo(a)},allPolygons:function(){var a=this.polygons_.slice();this.front_&&(a=a.concat(this.front_.allPolygons()));this.back_&&(a=a.concat(this.back_.allPolygons()));return a},build:function(a){if(a.length){this.plane_||
(this.plane_=a[0].plane_.clone());for(var b=[],c=[],d=0;d<a.length;d++)a[d].splitPolygon(this.plane_,this.polygons_,this.polygons_,b,c);b.length&&(this.front_||(this.front_=new csgNode),this.front_.build(b));c.length&&(this.back_||(this.back_=new csgNode),this.back_.build(c))}},plane:function(){return this.plane_},setPlane:function(a){this.plane_=a},front:function(){return this.front_},setFront:function(a){this.front_=a},back:function(){return this.back_},setBack:function(a){this.back_=a},polygons:function(){return this.polygons_},
setPolygons:function(a){this.polygons_=a}};var CSG=function(){this.polygons_=[]};CSG.fromPolygons=function(a){var b=new CSG;b.setPolygons(a);return b};
CSG.prototype={clone:function(){var a=new CSG;a.setPolygons(this.polygons_.map(function(a){return a.clone()}));return a},toPolygons:function(){return this.polygons_},union:function(a){var b=new csgNode(this.clone().polygons());a=new csgNode(a.clone().polygons());b.clipTo(a);a.clipTo(b);a.invert();a.clipTo(b);a.invert();b.build(a.allPolygons());return CSG.fromPolygons(b.allPolygons())},subtract:function(a){var b=new csgNode(this.clone().polygons());a=new csgNode(a.clone().polygons());b.invert();b.clipTo(a);
a.clipTo(b);a.invert();a.clipTo(b);a.invert();b.build(a.allPolygons());b.invert();return CSG.fromPolygons(b.allPolygons())},intersect:function(a){var b=new csgNode(this.clone().polygons());a=new csgNode(a.clone().polygons());b.invert();a.clipTo(b);a.invert();b.clipTo(a);a.clipTo(b);b.build(a.allPolygons());b.invert();return CSG.fromPolygons(b.allPolygons())},inverse:function(){var a=this.clone();a.polygons().map(function(a){a.flip()});return a},polygons:function(){return this.polygons_},setPolygons:function(a){this.polygons_=
a}};X.constructable=function(){};X.constructable.prototype.toCSG=function(){for(var a=this._points.count,b=[],c=0,c=0;c<a;c+=3){var d=this._points.get(c),e=this._points.get(c+1),f=this._points.get(c+2),g=this._normals.get(c),h=this._normals.get(c+1),k=this._normals.get(c+2),l=this._color;this._colors&&0<this._colors.length&&(l=this._colors.get(c));var m=[];m.push(new csgVertex(d,g));m.push(new csgVertex(e,h));m.push(new csgVertex(f,k));b.push(new csgPolygon(m,l))}return CSG.fromPolygons(b)};
X.constructable.prototype.fromCSG=function(a){if(!(goog.isDefAndNotNull(a)&&a instanceof CSG))throw Error("Invalid CSG object.");var b=new X.indexer,c=[];a=a.toPolygons();goog.array.map(a,function(a){var e=[],e=a.vertices(),f=a.shared(),e=goog.array.map(e,function(a){a.color=f;return b.add(a)});for(a=a=2;a<e.length;a++)c.push([e[0],e[a-1],e[a]])}.bind(this));this.__vertices=goog.array.map(b.unique(),function(a){return[a.pos().x(),a.pos().y(),a.pos().z()]});this.__normals=goog.array.map(b.unique(),
function(a){return[a.normal().x(),a.normal().y(),a.normal().z()]});this.__colors=goog.array.map(b.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});this._points=new X.triplets(9*c.length);this._normals=new X.triplets(9*c.length);this._colors=new X.triplets(9*c.length);goog.array.map(c,function(a){var b=a[0],c=a[1];a=a[2];var g=this.__vertices,h=this.__normals,k=this.__colors;this._points.add(g[b][0],g[b][1],g[b][2]);this._points.add(g[c][0],g[c][1],g[c][2]);this._points.add(g[a][0],
g[a][1],g[a][2]);this._normals.add(h[b][0],h[b][1],h[b][2]);this._normals.add(h[c][0],h[c][1],h[c][2]);this._normals.add(h[a][0],h[a][1],h[a][2]);k[b]&&this._colors.add(k[b][0],k[b][1],k[b][2]);k[c]&&this._colors.add(k[c][0],k[c][1],k[c][2]);k[a]&&this._colors.add(k[a][0],k[a][1],k[a][2])}.bind(this));0==this._colors._dataPointer&&(this._colors=null);this._type=X.displayable.types.TRIANGLES};
X.constructable.prototype.union=function(a){if(!goog.isDefAndNotNull(a)||!(a instanceof CSG||a instanceof X.object))throw Error("Invalid object.");var b=a;a instanceof X.object&&(b=b.toCSG());a=new X.object;inject(a,new X.constructable);a.fromCSG(this.toCSG().union(b));return a};
X.constructable.prototype.subtract=function(a){if(!goog.isDefAndNotNull(a)||!(a instanceof CSG||a instanceof X.object))throw Error("Invalid object.");var b=a;a instanceof X.object&&(b=b.toCSG());a=new X.object;inject(a,new X.constructable);a.fromCSG(this.toCSG().subtract(b));return a};
X.constructable.prototype.intersect=function(a){if(!goog.isDefAndNotNull(a)||!(a instanceof CSG||a instanceof X.object))throw Error("Invalid object.");var b=a;a instanceof X.object&&(b=b.toCSG());a=new X.object;inject(a,new X.constructable);a.fromCSG(this.toCSG().intersect(b));return a};X.constructable.prototype.inverse=function(){var a=new X.object;inject(a,new X.constructable);a.fromCSG(this.toCSG().inverse());return a};goog.exportSymbol("X.constructable",X.constructable);
goog.exportSymbol("X.constructable.prototype.intersect",X.constructable.prototype.intersect);goog.exportSymbol("X.constructable.prototype.inverse",X.constructable.prototype.inverse);goog.exportSymbol("X.constructable.prototype.subtract",X.constructable.prototype.subtract);goog.exportSymbol("X.constructable.prototype.union",X.constructable.prototype.union);CSG.sphere=function(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new csgVector(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new csgVertex(c.plus(e.times(d)),e))}CSG.call(this);a=a||{};var c=new csgVector(a.center||[0,0,0]),d=a.radius||1,e=a.slices||16;a=a.stacks||8;for(var f=[],g=[],h=0;h<e;h++)for(var k=0;k<a;k++)g=[],b(h/e,k/a),0<k&&b((h+1)/e,k/a),k<a-1&&b((h+1)/e,(k+1)/a),b(h/e,(k+1)/a),f.push(new csgPolygon(g));return CSG.fromPolygons(f)};goog.inherits(CSG.sphere,CSG);X.sphere=function(){X.object.call(this);this._classname="sphere";this._center=[0,0,0];this._radius=5;this._slices=32;this._stacks=16;inject(this,new X.constructable)};goog.inherits(X.sphere,X.object);X.sphere.prototype.__defineGetter__("center",function(){return this._center});X.sphere.prototype.__defineSetter__("center",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid center");this._center=a});X.sphere.prototype.__defineGetter__("radius",function(){return this._radius});
X.sphere.prototype.__defineSetter__("radius",function(a){if(!goog.isNumber(a))throw Error("Invalid radius.");this._radius=a});X.sphere.prototype.modified=function(){this.fromCSG(new CSG.sphere({center:this._center,radius:this._radius,slices:this._slices,stacks:this._stacks}));X.sphere.superClass_.modified.call(this)};goog.exportSymbol("X.sphere",X.sphere);goog.exportSymbol("X.sphere.prototype.modified",X.sphere.prototype.modified);X.slice=function(a){X.object.call(this);this._classname="slice";this._center=[0,0,0];this._front=[0,0,1];this._up=[0,1,0];this._right=[1,0,0];this._height=this._width=10;this._textureCoordinateMap=[0,1,0,0,1,1,1,1,1,0,0,0];this._labelmap=this._volume=null;this._borders=!0;this._borderColor=[1,1,1];goog.isDefAndNotNull(a)&&this.copy_(a)};goog.inherits(X.slice,X.object);
X.slice.prototype.copy_=function(a){this._center=a._center.slice();this._front=a._front.slice();this._up=a._up.slice();this._width=a._width;this._height=a._height;this._volume=a._volume;this._labelmap=a._labelmap;this._borders=a._borders;this._borderColor=a._borderColor;this._hideChildren=a._hideChildren;X.slice.superClass_.copy_.call(this,a)};X.slice.prototype.__defineSetter__("height",function(a){this._height=a});X.slice.prototype.__defineSetter__("width",function(a){this._width=a});
X.slice.prototype.setup=function(a,b,c,d,e,f,g,h){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid center.");if(!goog.isDefAndNotNull(b)||!goog.isArray(b)||3!=b.length)throw Error("Invalid front direction.");if(!goog.isDefAndNotNull(c)||!goog.isArray(c)||3!=c.length)throw Error("Invalid up direction.");if(!goog.isNumber(e))throw Error("Invalid width.");if(!goog.isNumber(f))throw Error("Invalid height.");var k=!1;goog.isDefAndNotNull(g)&&(k=g);g=[1,1,1];goog.isDefAndNotNull(h)&&
(g=h);this._center=a;this._front=b;this._up=c;this._right=d;this._width=e;this._height=f;this._borders=k;this._borderColor=g;this.create_()};X.slice.prototype.create=function(){this.create_()};
X.slice.prototype.create_=function(){var a=(new goog.math.Vec3(this._front[0],this._front[1],this._front[2])).normalize(),b=new goog.math.Vec3(this._up[0],this._up[1],this._up[2]),c=new goog.math.Vec3(this._right[0],this._right[1],this._right[2]),d=new goog.math.Vec3(this._center[0],this._center[1],this._center[2]),e=goog.math.Vec3.sum(c.clone().invert().scale(this._width/2),b.clone().invert().scale(this._height/2)),f=new goog.math.Vec3(e.x+d.x,e.y+d.y,e.z+d.z),e=goog.math.Vec3.sum(c.clone().invert().scale(this._width/
2),b.clone().scale(this._height/2)),g=new goog.math.Vec3(e.x+d.x,e.y+d.y,e.z+d.z),e=goog.math.Vec3.sum(c.clone().scale(this._width/2),b.clone().invert().scale(this._height/2)),h=new goog.math.Vec3(e.x+d.x,e.y+d.y,e.z+d.z),e=goog.math.Vec3.sum(c.clone().scale(this._width/2),b.clone().scale(this._height/2)),b=new goog.math.Vec3(e.x+d.x,e.y+d.y,e.z+d.z);this._points=new X.triplets(18);this._normals=new X.triplets(18);this._points.add(f.x,f.y,f.z);this._points.add(g.x,g.y,g.z);this._points.add(h.x,h.y,
h.z);this._points.add(h.x,h.y,h.z);this._points.add(b.x,b.y,b.z);this._points.add(g.x,g.y,g.z);this._normals.add(a.x,a.y,a.z);this._normals.add(a.x,a.y,a.z);this._normals.add(a.x,a.y,a.z);this._normals.add(a.x,a.y,a.z);this._normals.add(a.x,a.y,a.z);this._normals.add(a.x,a.y,a.z);this._borders&&(a=new X.object,a._points=new X.triplets(24),a._normals=new X.triplets(24),a._points.add(f.x,f.y,f.z),a._points.add(g.x,g.y,g.z),a._points.add(g.x,g.y,g.z),a._points.add(b.x,b.y,b.z),a._points.add(b.x,b.y,
b.z),a._points.add(h.x,h.y,h.z),a._points.add(h.x,h.y,h.z),a._points.add(f.x,f.y,f.z),a._normals.add(0,0,0),a._normals.add(0,0,0),a._normals.add(0,0,0),a._normals.add(0,0,0),a._normals.add(0,0,0),a._normals.add(0,0,0),a._normals.add(0,0,0),a._normals.add(0,0,0),a._color=[this._borderColor[0],this._borderColor[1],this._borderColor[2]],a._type=X.displayable.types.LINES,a._linewidth=2,this._children.push(a))};goog.exportSymbol("X.slice",X.slice);goog.exportSymbol("X.slice.prototype.create",X.slice.prototype.create);X.volume=function(a){X.object.call(this);this._classname="volume";this._center=[0,0,0];this._dimensions=[10,10,10];this._BBox=[1,1,1];this._range=[10,10,10];this._spacing=[1,1,1];this._image=[];this._indexZold=this._indexZ=this._indexYold=this._indexY=this._indexXold=this._indexX=0;this._slicesX=new X.object;this._slicesY=new X.object;this._slicesZ=new X.object;this._volumeRenderingOld=this._volumeRendering=!1;this._volumeRenderingDirection=-1;this._volumeRenderingCache=[];this._labelmap=null;this._borders=
!0;this._windowLow=Infinity;this._windowHigh=-Infinity;this._reslicing=!0;this._max=0;this._data=null;inject(this,new X.loadable);inject(this,new X.thresholdable);goog.isDefAndNotNull(a)&&this.copy_(a)};goog.inherits(X.volume,X.object);
X.volume.prototype.copy_=function(a){this._center=a._center.slice();this._dimensions=a._dimensions.slice();this._spacing=a._spacing.slice();this._indexX=a._indexX;this._indexXold=a._indexXold;this._indexY=a._indexY;this._indexYold=a._indexYold;this._indexZ=a._indexZ;this._indexZold=a._indexZold;this._dimensionsRAS=a._dimensionsRAS.slice();this._slicesX=new X.object(a._slicesX);this._slicesY=new X.object(a._slicesY);this._slicesZ=new X.object(a._slicesZ);this._max=a._max;this._data=a._data;this._volumeRendering=
a._volumeRendering;this._volumeRenderingOld=a._volumeRenderingOld;this._volumeRenderingDirection=a._volumeRenderingDirection;this._labelmap=a._labelmap;this._borders=a._borders;X.volume.superClass_.copy_.call(this,a)};
X.volume.prototype.create_=function(a){this._children.length=0;this._slicesX._children.length=0;this._slicesY._children.length=0;this._slicesZ._children.length=0;this._children.push(this._slicesX);this._children.push(this._slicesY);this._children.push(this._slicesZ);this._RASOrigin=a.RASOrigin;this._RASSpacing=a.RASSpacing;this._RASDimensions=a.RASDimensions;this._IJKToRAS=a.IJKToRAS;this._RASToIJK=a.RASToIJK;this._max=a.max;this._data=a.data;this._dirty=!0};
X.volume.prototype.modified=function(a){a="undefined"!==typeof a?a:!0;if(0<this._children.length){this._volumeRendering!=this._volumeRenderingOld&&(this._volumeRendering||-1==this._volumeRenderingDirection||(this._children[this._volumeRenderingDirection].visible=!1),this._dirty=!0,this._volumeRenderingOld=this._volumeRendering);if(!this._visible)return;this.slicing_();this._volumeRendering&&-1!=this._volumeRenderingDirection&&this.volumeRendering_(this._volumeRenderingDirection)}a&&X.volume.superClass_.modified.call(this)};
X.volume.prototype.slicing_=function(){for(var a=0,a=0;3>a;a++){var b=this._children[a],c=0,d=0;0==a?(c=this._indexX,d=this._indexXold,this._indexXold=this._indexX):1==a?(c=this._indexY,d=this._indexYold,this._indexYold=this._indexY):2==a&&(c=this._indexZ,d=this._indexZold,this._indexZold=this._indexZ);if(!goog.isDefAndNotNull(this._children[a]._children[parseInt(c,10)])){var e=goog.vec.Vec3.createFloat32();e[0]=this._childrenInfo[a]._solutionsLine[0][0][0]+this._childrenInfo[a]._sliceDirection[0]*
parseInt(c,10);e[1]=this._childrenInfo[a]._solutionsLine[0][0][1]+this._childrenInfo[a]._sliceDirection[1]*parseInt(c,10);e[2]=this._childrenInfo[a]._solutionsLine[0][0][2]+this._childrenInfo[a]._sliceDirection[2]*parseInt(c,10);if(this.hasLabelMap){var f=X.parser.reslice2(e,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._labelmap._IJKVolume,this._labelmap,this._labelmap.hasLabelMap,this._labelmap._colortable._map);this._labelmap._children[a]._children[parseInt(c,
10)]=f;this._labelmap._children[a].modified(!0)}e=X.parser.reslice2(e,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._IJKVolume,this,!0,null);this.hasLabelMap&&(e._labelmap=e._texture,e._labelmap=this._labelmap._children[a]._children[parseInt(c,10)]._texture);b._children[parseInt(c,10)]=e;this._children[a].modified(!0)}d=b._children[parseInt(d,10)];this._volumeRendering||(d.visible=!1);b=b._children[parseInt(c,10)];b.visible=!0;
b._opacity=1;this._volumeRendering&&(b._children[0]._visible=!1,a!=this._volumeRenderingDirection&&(b.visible=!1,b._opacity=0))}};X.volume.prototype.__defineGetter__("dimensions",function(){return this._dimensions});X.volume.prototype.__defineSetter__("dimensions",function(a){this._dimensions=a});X.volume.prototype.__defineGetter__("spacing",function(){return this._spacing});X.volume.prototype.__defineSetter__("spacing",function(a){this._spacing=a});X.volume.prototype.__defineGetter__("bbox",function(){return this._BBox});
X.volume.prototype.__defineGetter__("range",function(){return this._range});X.volume.prototype.__defineGetter__("dimensionsRAS",function(){return this._dimensionsRAS});X.volume.prototype.__defineGetter__("volumeRendering",function(){return this._volumeRendering});X.volume.prototype.__defineSetter__("volumeRendering",function(a){this._volumeRendering=a;this.modified(!1)});X.volume.prototype.__defineGetter__("visible",function(){return this._visible});
X.volume.prototype.__defineSetter__("visible",function(a){if(a)this._visible=a,this.modified(!1);else{for(var b=this._children,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this._visible=a;this._dirty=!0}});X.volume.prototype.__defineGetter__("center",function(){return this._center});X.volume.prototype.__defineSetter__("center",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid center.");this._center=a});
X.volume.prototype.__defineGetter__("volumeRenderingCache",function(){return this._volumeRenderingCache});X.volume.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(goog.isDefAndNotNull(a)&&goog.isArray(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this._volumeRenderingCache=a});X.volume.prototype.__defineGetter__("image",function(){return this._image});X.volume.prototype.__defineGetter__("labelmap",function(){this._labelmap||(this._labelmap=new X.labelmap(this));return this._labelmap});
X.volume.prototype.__defineGetter__("indexX",function(){return this._indexX});X.volume.prototype.__defineSetter__("indexX",function(a){goog.isNumber(a)&&0<=a&&a<this._slicesX._children.length&&(this._indexX=a,this.modified(!1))});X.volume.prototype.__defineGetter__("indexY",function(){return this._indexY});X.volume.prototype.__defineSetter__("indexY",function(a){goog.isNumber(a)&&0<=a&&a<this._slicesY._children.length&&(this._indexY=a,this.modified(!1))});
X.volume.prototype.__defineGetter__("indexZ",function(){return this._indexZ});X.volume.prototype.__defineSetter__("indexZ",function(a){goog.isNumber(a)&&0<=a&&a<this._slicesZ._children.length&&(this._indexZ=a,this.modified(!1))});X.volume.prototype.__defineGetter__("windowLow",function(){return this._windowLow});X.volume.prototype.__defineSetter__("windowLow",function(a){this._windowLow=a});X.volume.prototype.__defineGetter__("windowHigh",function(){return this._windowHigh});
X.volume.prototype.__defineSetter__("windowHigh",function(a){this._windowHigh=a});X.volume.prototype.__defineGetter__("borders",function(){return this._borders});X.volume.prototype.__defineSetter__("borders",function(a){this._borders=a});X.volume.prototype.__defineGetter__("reslicing",function(){return this._reslicing});X.volume.prototype.__defineSetter__("reslicing",function(a){this._reslicing=a});X.volume.prototype.__defineSetter__("xNormX",function(a){this._childrenInfo[0]._sliceNormal[0]=a});
X.volume.prototype.__defineGetter__("xNormX",function(){return this._childrenInfo[0]._sliceNormal[0]});X.volume.prototype.__defineSetter__("xNormY",function(a){this._childrenInfo[0]._sliceNormal[1]=a});X.volume.prototype.__defineGetter__("xNormY",function(){return this._childrenInfo[0]._sliceNormal[1]});X.volume.prototype.__defineSetter__("xNormZ",function(a){this._childrenInfo[0]._sliceNormal[2]=a});X.volume.prototype.__defineGetter__("xNormZ",function(){return this._childrenInfo[0]._sliceNormal[2]});
X.volume.prototype.__defineSetter__("xColor",function(a){this._childrenInfo[0]._color=a});X.volume.prototype.__defineGetter__("xColor",function(){return this._childrenInfo[0]._color});X.volume.prototype.__defineSetter__("yNormX",function(a){this._childrenInfo[1]._sliceNormal[0]=a});X.volume.prototype.__defineGetter__("yNormX",function(){return this._childrenInfo[1]._sliceNormal[0]});X.volume.prototype.__defineSetter__("yNormY",function(a){this._childrenInfo[1]._sliceNormal[1]=a});
X.volume.prototype.__defineGetter__("yNormY",function(){return this._childrenInfo[1]._sliceNormal[1]});X.volume.prototype.__defineSetter__("yNormZ",function(a){this._childrenInfo[1]._sliceNormal[2]=a});X.volume.prototype.__defineGetter__("yNormZ",function(){return this._childrenInfo[1]._sliceNormal[2]});X.volume.prototype.__defineSetter__("yColor",function(a){this._childrenInfo[1]._color=a});X.volume.prototype.__defineGetter__("yColor",function(){return this._childrenInfo[1]._color});
X.volume.prototype.__defineSetter__("zNormX",function(a){this._childrenInfo[2]._sliceNormal[0]=a});X.volume.prototype.__defineGetter__("zNormX",function(){return this._childrenInfo[2]._sliceNormal[0]});X.volume.prototype.__defineSetter__("zNormY",function(a){this._childrenInfo[2]._sliceNormal[1]=a});X.volume.prototype.__defineGetter__("zNormY",function(){return this._childrenInfo[2]._sliceNormal[1]});X.volume.prototype.__defineSetter__("zNormZ",function(a){this._childrenInfo[2]._sliceNormal[2]=a});
X.volume.prototype.__defineGetter__("zNormZ",function(){return this._childrenInfo[2]._sliceNormal[2]});X.volume.prototype.__defineSetter__("zColor",function(a){this._childrenInfo[2]._color=a});X.volume.prototype.__defineGetter__("zColor",function(){return this._childrenInfo[2]._color});
X.volume.prototype.sliceInfoChanged=function(a){this._children[a].visible=!1;for(var b=0;b<this._children[a]._children.length;b++)"undefined"!=typeof this._children[a]._children[b]&&(this.hasLabelMap&&(this._labelmap._children[a]._children[b].remove(),this._labelmap._children[a]._children[b]=null),this._children[a]._children[b].remove(),this._children[a]._children[b]=null);goog.vec.Vec3.normalize(this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._sliceNormal);X.parser.prototype.updateSliceInfo(a,
this._childrenInfo[a]._sliceOrigin,this._childrenInfo[a]._sliceNormal,this);this._children[a]._children=[];this._children[a]._children=Array(this._childrenInfo[a]._nb);this.hasLabelMap&&(b=X.parser.reslice2(this._childrenInfo[a]._sliceOrigin,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._labelmap._IJKVolume,this._labelmap,this._labelmap.hasLabelMap,this._labelmap._colortable._map),this._labelmap._children[a]._children=[],this._labelmap._children[a]._children=
Array(this._childrenInfo[a]._nb),this._labelmap._children[a]._children[Math.floor(this._childrenInfo[a]._nb/2)]=b,this._labelmap._children[a].modified());b=X.parser.reslice2(this._childrenInfo[a]._sliceOrigin,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._IJKVolume,this,!0,null);this.hasLabelMap&&(b._labelmap=b._texture,b._labelmap=this._labelmap._children[a]._children[Math.floor(this._childrenInfo[a]._nb/2)]._texture);this._children[a]._children[Math.floor(this._childrenInfo[a]._nb/
2)]=b;0==a?(this._indexX=Math.floor(this._childrenInfo[a]._nb/2),this._indexXold=Math.floor(this._childrenInfo[a]._nb/2)):1==a?(this._indexY=Math.floor(this._childrenInfo[a]._nb/2),this._indexYold=Math.floor(this._childrenInfo[a]._nb/2)):(this._indexZ=Math.floor(this._childrenInfo[a]._nb/2),this._indexZold=Math.floor(this._childrenInfo[a]._nb/2));this._children[a].modified();this._children[a]._children[Math.floor(this._childrenInfo[a]._nb/2)]._visible=!0};
X.volume.prototype.volumeRendering_=function(a){if(!this._computing)if(!this._volumeRendering||!this._dirty&&a==this._volumeRenderingDirection)this._volumeRenderingDirection=a;else if(-1==this._volumeRenderingCache.indexOf(a))this._volumeRenderingCache.push(a),this._computing=!0,this.onComputing_(a),setTimeout(function(){var b=null;0<=this._volumeRenderingDirection&&(b=this._children[this._volumeRenderingDirection],b.visible=!1);var b=this._children[a],c=b._children.length,d=Math.floor(c/4),h;for(h=
0;h<1*d;h++){if(!goog.isDefAndNotNull(b._children[h])){var k=goog.vec.Vec3.createFloat32();k[0]=this._childrenInfo[a]._solutionsLine[0][0][0]+this._childrenInfo[a]._sliceDirection[0]*h;k[1]=this._childrenInfo[a]._solutionsLine[0][0][1]+this._childrenInfo[a]._sliceDirection[1]*h;k[2]=this._childrenInfo[a]._solutionsLine[0][0][2]+this._childrenInfo[a]._sliceDirection[2]*h;if(this.hasLabelMap){var l=X.parser.reslice2(k,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,
this._BBox,this._labelmap._IJKVolume,this._labelmap,this._labelmap.hasLabelMap,this._labelmap._colortable._map);this._labelmap._children[a]._children[h]=l;this._labelmap._children[a].modified(!0)}k=X.parser.reslice2(k,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._IJKVolume,this,!0,null);k._children[0]._visible=!1;this.hasLabelMap&&(k._labelmap=k._texture,k._labelmap=this._labelmap._children[a]._children[h]._texture);b._children[h]=
k}b._children[h]._visible=!0}this.onComputingProgress_(.25);setTimeout(function(){for(;h<2*d;h++){if(!goog.isDefAndNotNull(b._children[h])){var k=goog.vec.Vec3.createFloat32();k[0]=this._childrenInfo[a]._solutionsLine[0][0][0]+this._childrenInfo[a]._sliceDirection[0]*h;k[1]=this._childrenInfo[a]._solutionsLine[0][0][1]+this._childrenInfo[a]._sliceDirection[1]*h;k[2]=this._childrenInfo[a]._solutionsLine[0][0][2]+this._childrenInfo[a]._sliceDirection[2]*h;if(this.hasLabelMap){var l=X.parser.reslice2(k,
this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._labelmap._IJKVolume,this._labelmap,this._labelmap.hasLabelMap,this._labelmap._colortable._map);this._labelmap._children[a]._children[h]=l;this._labelmap._children[a].modified(!0)}k=X.parser.reslice2(k,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._IJKVolume,this,!0,null);k._children[0]._visible=!1;this.hasLabelMap&&
(k._labelmap=k._texture,k._labelmap=this._labelmap._children[a]._children[h]._texture);b._children[h]=k}b._children[h]._visible=!0}this.onComputingProgress_(.5);setTimeout(function(){for(;h<3*d;h++){if(!goog.isDefAndNotNull(b._children[h])){var k=goog.vec.Vec3.createFloat32();k[0]=this._childrenInfo[a]._solutionsLine[0][0][0]+this._childrenInfo[a]._sliceDirection[0]*h;k[1]=this._childrenInfo[a]._solutionsLine[0][0][1]+this._childrenInfo[a]._sliceDirection[1]*h;k[2]=this._childrenInfo[a]._solutionsLine[0][0][2]+
this._childrenInfo[a]._sliceDirection[2]*h;if(this.hasLabelMap){var l=X.parser.reslice2(k,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._labelmap._IJKVolume,this._labelmap,this._labelmap.hasLabelMap,this._labelmap._colortable._map);this._labelmap._children[a]._children[h]=l;this._labelmap._children[a].modified(!0)}k=X.parser.reslice2(k,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,
this._BBox,this._IJKVolume,this,!0,null);k._children[0]._visible=!1;this.hasLabelMap&&(k._labelmap=k._texture,k._labelmap=this._labelmap._children[a]._children[h]._texture);b._children[h]=k}b._children[h]._visible=!0}this.onComputingProgress_(.75);setTimeout(function(){for(h=3*d;h<c;h++){if(!goog.isDefAndNotNull(b._children[h])){var k=goog.vec.Vec3.createFloat32();k[0]=this._childrenInfo[a]._solutionsLine[0][0][0]+this._childrenInfo[a]._sliceDirection[0]*h;k[1]=this._childrenInfo[a]._solutionsLine[0][0][1]+
this._childrenInfo[a]._sliceDirection[1]*h;k[2]=this._childrenInfo[a]._solutionsLine[0][0][2]+this._childrenInfo[a]._sliceDirection[2]*h;if(this.hasLabelMap){var l=X.parser.reslice2(k,this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._labelmap._IJKVolume,this._labelmap,this._labelmap.hasLabelMap,this._labelmap._colortable._map);this._labelmap._children[a]._children[h]=l;this._labelmap._children[a].modified(!0)}k=X.parser.reslice2(k,
this._childrenInfo[a]._sliceXYSpacing,this._childrenInfo[a]._sliceNormal,this._childrenInfo[a]._color,this._BBox,this._IJKVolume,this,!0,null);k._children[0]._visible=!1;this.hasLabelMap&&(k._labelmap=k._texture,k._labelmap=this._labelmap._children[a]._children[h]._texture);b._children[h]=k}b._children[h]._visible=!0}this.onComputingProgress_(1);setTimeout(function(){this._computing&&this._children[a].modified(!0);this._volumeRenderingDirection=a;this._dirty=!1;if(this._computing)this.onComputingEnd_(a);
this._computing=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10);else{var b=this._children[this._volumeRenderingDirection];b.visible=!1;var b=this._children[a],c=b._children.length,d;for(d=0;d<c;d++)b._children[d]._visible=!0;this._volumeRenderingDirection=a;this._dirty=!1}};X.volume.prototype.onComputing_=function(a){var b=new X.event.ComputingEvent;b._object=this;this.dispatchEvent(b);this.onComputing(a)};
X.volume.prototype.onComputingProgress_=function(a){var b=new X.event.ComputingProgressEvent;b._value=a;this.dispatchEvent(b);this.onComputingProgress(100*a)};X.volume.prototype.onComputingEnd_=function(a){var b=new X.event.ComputingEndEvent;b._object=this;this.dispatchEvent(b);this.onComputingEnd(a)};X.volume.prototype.onComputing=function(a){};X.volume.prototype.onComputingProgress=function(a){};X.volume.prototype.onComputingEnd=function(a){};goog.exportSymbol("X.volume",X.volume);
goog.exportSymbol("X.volume.prototype.modified",X.volume.prototype.modified);goog.exportSymbol("X.volume.prototype.sliceInfoChanged",X.volume.prototype.sliceInfoChanged);goog.exportSymbol("X.volume.prototype.onComputing",X.volume.prototype.onComputing);goog.exportSymbol("X.volume.prototype.onComputingProgress",X.volume.prototype.onComputingProgress);goog.exportSymbol("X.volume.prototype.onComputingEnd",X.volume.prototype.onComputingEnd);goog.events.MouseWheelHandler=function(a,b){goog.events.EventTarget.call(this);this.element_=a;var c=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null;this.isRtl_=!!c&&goog.style.isRightToLeft(c);this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,b)};goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget);goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"};
goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(a){this.maxDeltaX_=a};goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(a){this.maxDeltaY_=a};
goog.events.MouseWheelHandler.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.getBrowserEvent();if("mousewheel"==a.type){c=1;if(goog.userAgent.IE||goog.userAgent.WEBKIT&&(goog.userAgent.WINDOWS||goog.userAgent.isVersionOrHigher("532.0")))c=40;d=goog.events.MouseWheelHandler.smartScale_(-a.wheelDelta,c);goog.isDef(a.wheelDeltaX)?(b=goog.events.MouseWheelHandler.smartScale_(-a.wheelDeltaX,c),c=goog.events.MouseWheelHandler.smartScale_(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=
-3),goog.isDef(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;goog.isNumber(this.maxDeltaX_)&&(b=goog.math.clamp(b,-this.maxDeltaX_,this.maxDeltaX_));goog.isNumber(this.maxDeltaY_)&&(c=goog.math.clamp(c,-this.maxDeltaY_,this.maxDeltaY_));this.isRtl_&&(b=-b);b=new goog.events.MouseWheelEvent(d,a,b,c);this.dispatchEvent(b)};goog.events.MouseWheelHandler.smartScale_=function(a,b){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=a%b?a:a/b};
goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKey_);this.listenKey_=null};goog.events.MouseWheelEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,b);this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;this.detail=a;this.deltaX=c;this.deltaY=d};goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent);goog.ui.RangeModel=function(){goog.events.EventTarget.call(this)};goog.inherits(goog.ui.RangeModel,goog.events.EventTarget);goog.ui.RangeModel.prototype.value_=0;goog.ui.RangeModel.prototype.minimum_=0;goog.ui.RangeModel.prototype.maximum_=100;goog.ui.RangeModel.prototype.extent_=0;goog.ui.RangeModel.prototype.step_=1;goog.ui.RangeModel.prototype.isChanging_=!1;goog.ui.RangeModel.prototype.mute_=!1;goog.ui.RangeModel.prototype.setMute=function(a){this.mute_=a};
goog.ui.RangeModel.prototype.setValue=function(a){a=this.roundToStepWithMin(a);this.value_!=a&&(this.value_=a+this.extent_>this.maximum_?this.maximum_-this.extent_:a<this.minimum_?this.minimum_:a,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};goog.ui.RangeModel.prototype.getValue=function(){return this.roundToStepWithMin(this.value_)};
goog.ui.RangeModel.prototype.setExtent=function(a){a=this.roundToStepWithMin(a);this.extent_!=a&&(this.extent_=0>a?0:this.value_+a>this.maximum_?this.maximum_-this.value_:a,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};goog.ui.RangeModel.prototype.getExtent=function(){return this.roundToStep(this.extent_)};
goog.ui.RangeModel.prototype.setMinimum=function(a){if(this.minimum_!=a){var b=this.isChanging_;this.isChanging_=!0;this.minimum_=a;a+this.extent_>this.maximum_&&(this.extent_=this.maximum_-this.minimum_);a>this.value_&&this.setValue(a);a>this.maximum_&&(this.extent_=0,this.setMaximum(a),this.setValue(a));(this.isChanging_=b)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};goog.ui.RangeModel.prototype.getMinimum=function(){return this.roundToStepWithMin(this.minimum_)};
goog.ui.RangeModel.prototype.setMaximum=function(a){a=this.roundToStepWithMin(a);if(this.maximum_!=a){var b=this.isChanging_;this.isChanging_=!0;this.maximum_=a;a<this.value_+this.extent_&&this.setValue(a-this.extent_);a<this.minimum_&&(this.extent_=0,this.setMinimum(a),this.setValue(this.maximum_));a<this.minimum_+this.extent_&&(this.extent_=this.maximum_-this.minimum_);(this.isChanging_=b)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};
goog.ui.RangeModel.prototype.getMaximum=function(){return this.roundToStepWithMin(this.maximum_)};goog.ui.RangeModel.prototype.getStep=function(){return this.step_};goog.ui.RangeModel.prototype.setStep=function(a){this.step_!=a&&(this.step_=a,a=this.isChanging_,this.isChanging_=!0,this.setMaximum(this.getMaximum()),this.setExtent(this.getExtent()),this.setValue(this.getValue()),(this.isChanging_=a)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};
goog.ui.RangeModel.prototype.roundToStepWithMin=function(a){return null==this.step_?a:this.minimum_+Math.round((a-this.minimum_)/this.step_)*this.step_};goog.ui.RangeModel.prototype.roundToStep=function(a){return null==this.step_?a:Math.round(a/this.step_)*this.step_};goog.ui.SliderBase=function(a,b){goog.ui.Component.call(this,a);this.additionalAnimations_=null;this.rangeModel=new goog.ui.RangeModel;this.labelFn_=b||goog.functions.NULL;goog.events.listen(this.rangeModel,goog.ui.Component.EventType.CHANGE,this.handleRangeModelChange,!1,this)};goog.inherits(goog.ui.SliderBase,goog.ui.Component);
goog.ui.SliderBase.EventType={DRAG_VALUE_START:goog.events.getUniqueId("dragvaluestart"),DRAG_VALUE_END:goog.events.getUniqueId("dragvalueend"),DRAG_EXTENT_START:goog.events.getUniqueId("dragextentstart"),DRAG_EXTENT_END:goog.events.getUniqueId("dragextentend"),DRAG_START:goog.events.getUniqueId("dragstart"),DRAG_END:goog.events.getUniqueId("dragend")};goog.ui.SliderBase.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.ui.SliderBase.prototype.orientation_=goog.ui.SliderBase.Orientation.HORIZONTAL;
goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_=200;goog.ui.SliderBase.ANIMATION_INTERVAL_=100;goog.ui.SliderBase.prototype.isAnimating_=!1;goog.ui.SliderBase.prototype.moveToPointEnabled_=!1;goog.ui.SliderBase.prototype.blockIncrement_=10;goog.ui.SliderBase.prototype.minExtent_=0;goog.ui.SliderBase.prototype.isHandleMouseWheel_=!0;goog.ui.SliderBase.prototype.mouseDownTime_=0;goog.ui.SliderBase.prototype.MOUSE_DOWN_DELAY_=1E3;goog.ui.SliderBase.prototype.enabled_=!0;
goog.ui.SliderBase.prototype.flipForRtl_=!1;goog.ui.SliderBase.prototype.enableFlipForRtl=function(a){this.flipForRtl_=a};goog.ui.SliderBase.prototype.createDom=function(){goog.ui.SliderBase.superClass_.createDom.call(this);var a=this.getDomHelper().createDom("div",this.getCssClass(this.orientation_));this.decorateInternal(a)};goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_="goog-slider-dragging";goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_="goog-slider-thumb-dragging";
goog.ui.SliderBase.DISABLED_CSS_CLASS_="goog-slider-disabled";goog.ui.SliderBase.prototype.decorateInternal=function(a){goog.ui.SliderBase.superClass_.decorateInternal.call(this,a);goog.asserts.assert(a);goog.dom.classlist.add(a,this.getCssClass(this.orientation_));this.createThumbs();this.setAriaRoles()};
goog.ui.SliderBase.prototype.enterDocument=function(){goog.ui.SliderBase.superClass_.enterDocument.call(this);this.valueDragger_=new goog.fx.Dragger(this.valueThumb);this.extentDragger_=new goog.fx.Dragger(this.extentThumb);this.valueDragger_.enableRightPositioningForRtl(this.flipForRtl_);this.extentDragger_.enableRightPositioningForRtl(this.flipForRtl_);this.valueDragger_.defaultAction=this.extentDragger_.defaultAction=goog.nullFunction;this.keyHandler_=new goog.events.KeyHandler(this.getElement());
this.enableEventHandlers_(!0);this.getElement().tabIndex=0;this.updateUi_()};
goog.ui.SliderBase.prototype.enableEventHandlers_=function(a){a?(this.getHandler().listen(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.keyHandler_,
goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).listen(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!0)):(this.getHandler().unlisten(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.valueDragger_,
[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).unlisten(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).unlisten(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&
this.enableMouseWheelHandling_(!1))};goog.ui.SliderBase.prototype.exitDocument=function(){goog.ui.SliderBase.superClass_.exitDocument.call(this);goog.disposeAll(this.valueDragger_,this.extentDragger_,this.keyHandler_,this.mouseWheelHandler_)};
goog.ui.SliderBase.prototype.handleBeforeDrag_=function(a){var b=a.dragger==this.valueDragger_?this.valueThumb:this.extentThumb,c;this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(c=this.getElement().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.getMaximum()-this.getMinimum())+this.getMinimum()):(c=this.getElement().clientWidth-b.offsetWidth,c=a.left/c*(this.getMaximum()-this.getMinimum())+this.getMinimum());c=a.dragger==this.valueDragger_?Math.min(Math.max(c,this.getMinimum()),this.getValue()+
this.getExtent()):Math.min(Math.max(c,this.getValue()),this.getMaximum());this.setThumbPosition_(b,c)};
goog.ui.SliderBase.prototype.handleThumbDragStartEnd_=function(a){var b=a.type==goog.fx.Dragger.EventType.START;goog.dom.classlist.enable(goog.asserts.assertElement(this.getElement()),goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_,b);goog.dom.classlist.enable(goog.asserts.assertElement(a.target.handle),goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_,b);a=a.dragger==this.valueDragger_;b?(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_START),this.dispatchEvent(a?goog.ui.SliderBase.EventType.DRAG_VALUE_START:
goog.ui.SliderBase.EventType.DRAG_EXTENT_START)):(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_END),this.dispatchEvent(a?goog.ui.SliderBase.EventType.DRAG_VALUE_END:goog.ui.SliderBase.EventType.DRAG_EXTENT_END))};
goog.ui.SliderBase.prototype.handleKeyDown_=function(a){var b=!0;switch(a.keyCode){case goog.events.KeyCodes.HOME:this.animatedSetValue(this.getMinimum());break;case goog.events.KeyCodes.END:this.animatedSetValue(this.getMaximum());break;case goog.events.KeyCodes.PAGE_UP:this.moveThumbs(this.getBlockIncrement());break;case goog.events.KeyCodes.PAGE_DOWN:this.moveThumbs(-this.getBlockIncrement());break;case goog.events.KeyCodes.LEFT:var c=this.flipForRtl_&&this.isRightToLeft()?1:-1;this.moveThumbs(a.shiftKey?
c*this.getBlockIncrement():c*this.getUnitIncrement());break;case goog.events.KeyCodes.DOWN:this.moveThumbs(a.shiftKey?-this.getBlockIncrement():-this.getUnitIncrement());break;case goog.events.KeyCodes.RIGHT:c=this.flipForRtl_&&this.isRightToLeft()?-1:1;this.moveThumbs(a.shiftKey?c*this.getBlockIncrement():c*this.getUnitIncrement());break;case goog.events.KeyCodes.UP:this.moveThumbs(a.shiftKey?this.getBlockIncrement():this.getUnitIncrement());break;default:b=!1}b&&a.preventDefault()};
goog.ui.SliderBase.prototype.handleMouseDownAndClick_=function(a){this.getElement().focus&&this.getElement().focus();var b=a.target;goog.dom.contains(this.valueThumb,b)||goog.dom.contains(this.extentThumb,b)||(b=a.type==goog.events.EventType.CLICK,b&&goog.now()<this.mouseDownTime_+this.MOUSE_DOWN_DELAY_||(b||(this.mouseDownTime_=goog.now()),this.moveToPointEnabled_?this.animatedSetValue(this.getValueFromMousePosition(a)):this.startBlockIncrementing_(a)))};
goog.ui.SliderBase.prototype.handleMouseWheel_=function(a){this.moveThumbs((0<a.detail?-1:1)*this.getUnitIncrement());a.preventDefault()};
goog.ui.SliderBase.prototype.startBlockIncrementing_=function(a){this.storeMousePos_(a);this.thumbToMove_=this.getClosestThumb_(this.getValueFromMousePosition(a));this.incrementing_=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?this.lastMousePosition_<this.thumbToMove_.offsetTop:this.lastMousePosition_>this.getOffsetStart_(this.thumbToMove_)+this.thumbToMove_.offsetWidth;a=goog.dom.getOwnerDocument(this.getElement());this.getHandler().listen(a,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,
!0).listen(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_);this.incTimer_||(this.incTimer_=new goog.Timer(goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_),this.getHandler().listen(this.incTimer_,goog.Timer.TICK,this.handleTimerTick_));this.handleTimerTick_();this.incTimer_.start()};
goog.ui.SliderBase.prototype.handleTimerTick_=function(){var a;if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var b=this.lastMousePosition_,c=this.thumbToMove_.offsetTop;this.incrementing_?b<c&&(a=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):b>c+this.thumbToMove_.offsetHeight&&(a=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement())}else b=this.lastMousePosition_,c=this.getOffsetStart_(this.thumbToMove_),this.incrementing_?b>c+this.thumbToMove_.offsetWidth&&
(a=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):b<c&&(a=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement());goog.isDef(a)&&this.setThumbPosition_(this.thumbToMove_,a)};
goog.ui.SliderBase.prototype.stopBlockIncrementing_=function(){this.incTimer_&&this.incTimer_.stop();var a=goog.dom.getOwnerDocument(this.getElement());this.getHandler().unlisten(a,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).unlisten(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_)};
goog.ui.SliderBase.prototype.getRelativeMousePos_=function(a){a=goog.style.getRelativePosition(a,this.getElement());return this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?a.y:this.flipForRtl_&&this.isRightToLeft()?this.getElement().clientWidth-a.x:a.x};goog.ui.SliderBase.prototype.storeMousePos_=function(a){this.lastMousePosition_=this.getRelativeMousePos_(a)};
goog.ui.SliderBase.prototype.getValueFromMousePosition=function(a){var b=this.getMinimum(),c=this.getMaximum();if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var d=this.valueThumb.offsetHeight,e=this.getElement().clientHeight-d;a=this.getRelativeMousePos_(a)-d/2;return(c-b)*(e-a)/e+b}d=this.valueThumb.offsetWidth;e=this.getElement().clientWidth-d;a=this.getRelativeMousePos_(a)-d/2;return(c-b)*a/e+b};goog.ui.SliderBase.prototype.getValueFromMousePosition_=goog.ui.SliderBase.prototype.getValueFromMousePosition;
goog.ui.SliderBase.prototype.getThumbPosition_=function(a){if(a==this.valueThumb)return this.rangeModel.getValue();if(a==this.extentThumb)return this.rangeModel.getValue()+this.rangeModel.getExtent();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");};goog.ui.SliderBase.prototype.isDragging=function(){return this.valueDragger_.isDragging()||this.extentDragger_.isDragging()};
goog.ui.SliderBase.prototype.moveThumbs=function(a){Math.abs(a)<this.getStep()&&(a=goog.math.sign(a)*this.getStep());var b=this.getThumbPosition_(this.valueThumb)+a;a=this.getThumbPosition_(this.extentThumb)+a;b=goog.math.clamp(b,this.getMinimum(),this.getMaximum()-this.minExtent_);a=goog.math.clamp(a,this.getMinimum()+this.minExtent_,this.getMaximum());this.setValueAndExtent(b,a-b)};
goog.ui.SliderBase.prototype.setThumbPosition_=function(a,b){var c=this.rangeModel.roundToStepWithMin(b),d=a==this.valueThumb?c:this.rangeModel.getValue(),c=a==this.extentThumb?c:this.rangeModel.getValue()+this.rangeModel.getExtent();d>=this.getMinimum()&&c>=d+this.minExtent_&&this.getMaximum()>=c&&this.setValueAndExtent(d,c-d)};
goog.ui.SliderBase.prototype.setValueAndExtent=function(a,b){this.getMinimum()<=a&&a<=this.getMaximum()-b&&this.minExtent_<=b&&b<=this.getMaximum()-a&&(a!=this.getValue()||b!=this.getExtent())&&(this.rangeModel.setMute(!0),this.rangeModel.setExtent(0),this.rangeModel.setValue(a),this.rangeModel.setExtent(b),this.rangeModel.setMute(!1),this.handleRangeModelChange(null))};goog.ui.SliderBase.prototype.getMinimum=function(){return this.rangeModel.getMinimum()};
goog.ui.SliderBase.prototype.setMinimum=function(a){this.rangeModel.setMinimum(a)};goog.ui.SliderBase.prototype.getMaximum=function(){return this.rangeModel.getMaximum()};goog.ui.SliderBase.prototype.setMaximum=function(a){this.rangeModel.setMaximum(a)};goog.ui.SliderBase.prototype.getValueThumb=function(){return this.valueThumb};goog.ui.SliderBase.prototype.getExtentThumb=function(){return this.extentThumb};
goog.ui.SliderBase.prototype.getClosestThumb_=function(a){return a<=this.rangeModel.getValue()+this.rangeModel.getExtent()/2?this.valueThumb:this.extentThumb};goog.ui.SliderBase.prototype.handleRangeModelChange=function(a){this.updateUi_();this.updateAriaStates();this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};
goog.ui.SliderBase.prototype.updateUi_=function(){if(this.valueThumb&&!this.isAnimating_){var a=this.getThumbCoordinateForValue(this.getThumbPosition_(this.valueThumb)),b=this.getThumbCoordinateForValue(this.getThumbPosition_(this.extentThumb));if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL)this.valueThumb.style.top=a.y+"px",this.extentThumb.style.top=b.y+"px",this.rangeHighlight&&(a=this.calculateRangeHighlightPositioning_(b.y,a.y,this.valueThumb.offsetHeight),this.rangeHighlight.style.top=
a.offset+"px",this.rangeHighlight.style.height=a.size+"px");else{var c=this.flipForRtl_&&this.isRightToLeft()?"right":"left";this.valueThumb.style[c]=a.x+"px";this.extentThumb.style[c]=b.x+"px";this.rangeHighlight&&(a=this.calculateRangeHighlightPositioning_(a.x,b.x,this.valueThumb.offsetWidth),this.rangeHighlight.style[c]=a.offset+"px",this.rangeHighlight.style.width=a.size+"px")}}};
goog.ui.SliderBase.prototype.calculateRangeHighlightPositioning_=function(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}};
goog.ui.SliderBase.prototype.getThumbCoordinateForValue=function(a){var b=new goog.math.Coordinate;if(this.valueThumb){var c=this.getMinimum(),d=this.getMaximum();a=a==c&&c==d?0:(a-c)/(d-c);this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(c=this.valueThumb.offsetHeight,c=this.getElement().clientHeight-c,a=Math.round(a*c),b.x=this.getOffsetStart_(this.valueThumb),b.y=c-a):(c=this.getElement().clientWidth-this.valueThumb.offsetWidth,a=Math.round(a*c),b.x=a,b.y=this.valueThumb.offsetTop)}return b};
goog.ui.SliderBase.prototype.getThumbCoordinateForValue_=goog.ui.SliderBase.prototype.getThumbCoordinateForValue;
goog.ui.SliderBase.prototype.animatedSetValue=function(a){a=goog.math.clamp(a,this.getMinimum(),this.getMaximum());this.isAnimating_&&this.currentAnimation_.stop(!0);var b=new goog.fx.AnimationParallelQueue,c,d=this.getClosestThumb_(a),e=this.getValue(),f=this.getExtent(),g=this.getThumbPosition_(d),h=this.getThumbCoordinateForValue(g);c=this.getStep();Math.abs(a-g)<c&&(a=goog.math.clamp(g+(a>g?c:-c),this.getMinimum(),this.getMaximum()));this.setThumbPosition_(d,a);g=this.getThumbCoordinateForValue(this.getThumbPosition_(d));
c=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?[this.getOffsetStart_(d),g.y]:[g.x,d.offsetTop];h=new goog.fx.dom.Slide(d,[h.x,h.y],c,goog.ui.SliderBase.ANIMATION_INTERVAL_);h.enableRightPositioningForRtl(this.flipForRtl_);b.add(h);this.rangeHighlight&&this.addRangeHighlightAnimations_(d,e,f,g,b);this.additionalAnimations_&&(a=this.additionalAnimations_.createAnimations(e,a,goog.ui.SliderBase.ANIMATION_INTERVAL_),goog.array.forEach(a,function(a){b.add(a)}));this.currentAnimation_=b;this.getHandler().listen(b,
goog.fx.Transition.EventType.END,this.endAnimation_);this.isAnimating_=!0;b.play(!1)};goog.ui.SliderBase.prototype.isAnimating=function(){return this.isAnimating_};goog.ui.SliderBase.prototype.setAdditionalAnimations=function(a){this.additionalAnimations_=a};
goog.ui.SliderBase.prototype.addRangeHighlightAnimations_=function(a,b,c,d,e){var f=this.getThumbCoordinateForValue(b),g=this.getThumbCoordinateForValue(b+c);b=f;c=g;a==this.valueThumb?b=d:c=d;this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(a=this.calculateRangeHighlightPositioning_(g.y,f.y,this.valueThumb.offsetHeight),f=this.calculateRangeHighlightPositioning_(c.y,b.y,this.valueThumb.offsetHeight),d=new goog.fx.dom.Slide(this.rangeHighlight,[this.getOffsetStart_(this.rangeHighlight),
a.offset],[this.getOffsetStart_(this.rangeHighlight),f.offset],goog.ui.SliderBase.ANIMATION_INTERVAL_),a=new goog.fx.dom.ResizeHeight(this.rangeHighlight,a.size,f.size,goog.ui.SliderBase.ANIMATION_INTERVAL_)):(a=this.calculateRangeHighlightPositioning_(f.x,g.x,this.valueThumb.offsetWidth),f=this.calculateRangeHighlightPositioning_(b.x,c.x,this.valueThumb.offsetWidth),d=new goog.fx.dom.Slide(this.rangeHighlight,[a.offset,this.rangeHighlight.offsetTop],[f.offset,this.rangeHighlight.offsetTop],goog.ui.SliderBase.ANIMATION_INTERVAL_),
a=new goog.fx.dom.ResizeWidth(this.rangeHighlight,a.size,f.size,goog.ui.SliderBase.ANIMATION_INTERVAL_));d.enableRightPositioningForRtl(this.flipForRtl_);a.enableRightPositioningForRtl(this.flipForRtl_);e.add(d);e.add(a)};goog.ui.SliderBase.prototype.endAnimation_=function(a){this.isAnimating_=!1};
goog.ui.SliderBase.prototype.setOrientation=function(a){if(this.orientation_!=a){var b=this.getCssClass(this.orientation_),c=this.getCssClass(a);this.orientation_=a;this.getElement()&&(goog.dom.classlist.swap(goog.asserts.assert(this.getElement()),b,c),a=this.flipForRtl_&&this.isRightToLeft()?"right":"left",this.valueThumb.style[a]=this.valueThumb.style.top="",this.extentThumb.style[a]=this.extentThumb.style.top="",this.rangeHighlight&&(this.rangeHighlight.style[a]=this.rangeHighlight.style.top="",
this.rangeHighlight.style.width=this.rangeHighlight.style.height=""),this.updateUi_())}};goog.ui.SliderBase.prototype.getOrientation=function(){return this.orientation_};
goog.ui.SliderBase.prototype.disposeInternal=function(){goog.ui.SliderBase.superClass_.disposeInternal.call(this);this.incTimer_&&this.incTimer_.dispose();delete this.incTimer_;this.currentAnimation_&&this.currentAnimation_.dispose();delete this.currentAnimation_;delete this.valueThumb;delete this.extentThumb;this.rangeHighlight&&delete this.rangeHighlight;this.rangeModel.dispose();delete this.rangeModel;this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);this.mouseWheelHandler_&&
(this.mouseWheelHandler_.dispose(),delete this.mouseWheelHandler_);this.valueDragger_&&(this.valueDragger_.dispose(),delete this.valueDragger_);this.extentDragger_&&(this.extentDragger_.dispose(),delete this.extentDragger_)};goog.ui.SliderBase.prototype.getBlockIncrement=function(){return this.blockIncrement_};goog.ui.SliderBase.prototype.setBlockIncrement=function(a){this.blockIncrement_=a};goog.ui.SliderBase.prototype.setMinExtent=function(a){this.minExtent_=a};
goog.ui.SliderBase.prototype.unitIncrement_=1;goog.ui.SliderBase.prototype.getUnitIncrement=function(){return this.unitIncrement_};goog.ui.SliderBase.prototype.setUnitIncrement=function(a){this.unitIncrement_=a};goog.ui.SliderBase.prototype.getStep=function(){return this.rangeModel.getStep()};goog.ui.SliderBase.prototype.setStep=function(a){this.rangeModel.setStep(a)};goog.ui.SliderBase.prototype.getMoveToPointEnabled=function(){return this.moveToPointEnabled_};
goog.ui.SliderBase.prototype.setMoveToPointEnabled=function(a){this.moveToPointEnabled_=a};goog.ui.SliderBase.prototype.getValue=function(){return this.rangeModel.getValue()};goog.ui.SliderBase.prototype.setValue=function(a){this.setThumbPosition_(this.valueThumb,a)};goog.ui.SliderBase.prototype.getExtent=function(){return this.rangeModel.getExtent()};goog.ui.SliderBase.prototype.setExtent=function(a){this.setThumbPosition_(this.extentThumb,this.rangeModel.getValue()+a)};
goog.ui.SliderBase.prototype.setVisible=function(a){goog.style.setElementShown(this.getElement(),a);a&&this.updateUi_()};goog.ui.SliderBase.prototype.setAriaRoles=function(){var a=this.getElement();goog.asserts.assert(a,"The DOM element for the slider base cannot be null.");goog.a11y.aria.setRole(a,goog.a11y.aria.Role.SLIDER);this.updateAriaStates()};
goog.ui.SliderBase.prototype.updateAriaStates=function(){var a=this.getElement();a&&(goog.a11y.aria.setState(a,goog.a11y.aria.State.VALUEMIN,this.getMinimum()),goog.a11y.aria.setState(a,goog.a11y.aria.State.VALUEMAX,this.getMaximum()),goog.a11y.aria.setState(a,goog.a11y.aria.State.VALUENOW,this.getValue()),goog.a11y.aria.setState(a,goog.a11y.aria.State.VALUETEXT,this.getTextValue()||""))};
goog.ui.SliderBase.prototype.setHandleMouseWheel=function(a){this.isInDocument()&&a!=this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(a);this.isHandleMouseWheel_=a};goog.ui.SliderBase.prototype.isHandleMouseWheel=function(){return this.isHandleMouseWheel_};
goog.ui.SliderBase.prototype.enableMouseWheelHandling_=function(a){a?(this.mouseWheelHandler_||(this.mouseWheelHandler_=new goog.events.MouseWheelHandler(this.getElement())),this.getHandler().listen(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_)):this.getHandler().unlisten(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_)};
goog.ui.SliderBase.prototype.setEnabled=function(a){this.enabled_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(this.enabled_=a,this.enableEventHandlers_(a),a||this.stopBlockIncrementing_(),goog.dom.classlist.enable(goog.asserts.assert(this.getElement()),goog.ui.SliderBase.DISABLED_CSS_CLASS_,!a))};goog.ui.SliderBase.prototype.isEnabled=function(){return this.enabled_};
goog.ui.SliderBase.prototype.getOffsetStart_=function(a){return this.flipForRtl_?goog.style.bidi.getOffsetStart(a):a.offsetLeft};goog.ui.SliderBase.prototype.getTextValue=function(){return this.labelFn_(this.getValue())};goog.ui.SliderBase.AnimationFactory=function(){};goog.ui.TwoThumbSlider=function(a){goog.ui.SliderBase.call(this,a);this.rangeModel.setValue(this.getMinimum());this.rangeModel.setExtent(this.getMaximum()-this.getMinimum())};goog.inherits(goog.ui.TwoThumbSlider,goog.ui.SliderBase);goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX="goog-twothumbslider";goog.ui.TwoThumbSlider.VALUE_THUMB_CSS_CLASS=goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-value-thumb";goog.ui.TwoThumbSlider.EXTENT_THUMB_CSS_CLASS=goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-extent-thumb";
goog.ui.TwoThumbSlider.RANGE_HIGHLIGHT_CSS_CLASS=goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-rangehighlight";goog.ui.TwoThumbSlider.prototype.getCssClass=function(a){return a==goog.ui.SliderBase.Orientation.VERTICAL?goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-vertical":goog.ui.TwoThumbSlider.CSS_CLASS_PREFIX+"-horizontal"};goog.ui.TwoThumbSlider.prototype.createThumb_=function(a){a=this.getDomHelper().createDom("div",a);goog.a11y.aria.setRole(a,goog.a11y.aria.Role.BUTTON);return a};
goog.ui.TwoThumbSlider.prototype.createThumbs=function(){var a=goog.dom.getElementsByTagNameAndClass(null,goog.ui.TwoThumbSlider.VALUE_THUMB_CSS_CLASS,this.getElement())[0],b=goog.dom.getElementsByTagNameAndClass(null,goog.ui.TwoThumbSlider.EXTENT_THUMB_CSS_CLASS,this.getElement())[0],c=goog.dom.getElementsByTagNameAndClass(null,goog.ui.TwoThumbSlider.RANGE_HIGHLIGHT_CSS_CLASS,this.getElement())[0];a||(a=this.createThumb_(goog.ui.TwoThumbSlider.VALUE_THUMB_CSS_CLASS),this.getElement().appendChild(a));
b||(b=this.createThumb_(goog.ui.TwoThumbSlider.EXTENT_THUMB_CSS_CLASS),this.getElement().appendChild(b));c||(c=this.getDomHelper().createDom("div",goog.ui.TwoThumbSlider.RANGE_HIGHLIGHT_CSS_CLASS),this.getDomHelper().insertSiblingBefore(c,a));this.valueThumb=a;this.extentThumb=b;this.rangeHighlight=c};X.fibers=function(){X.object.call(this);this._classname="fibers";inject(this,new X.loadable)};goog.inherits(X.fibers,X.object);goog.exportSymbol("X.fibers",X.fibers);nrg.ui.ZippyTree=function(){this.rootElt_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_"+goog.string.createUniqueString(),"class":this.constructor.ELEMENT_CLASS});nrg.ui.ZippyNode.call(this,"",this.rootElt_,!0);goog.dom.classes.add(this.getHeader(),nrg.ui.ZippyTree.CSS.ROOT_NODE);this.getHeader().style.marginTop="0px"};goog.inherits(nrg.ui.ZippyTree,nrg.ui.ZippyNode);goog.exportSymbol("nrg.ui.ZippyTree",nrg.ui.ZippyTree);
nrg.ui.ZippyTree.EventType={CONTENTADDED:goog.events.getUniqueId("contentadded"),NODEADDED:goog.events.getUniqueId("zippyadded")};nrg.ui.ZippyTree.INDENT_PCT=5;nrg.ui.ZippyTree.ID_PREFIX="nrg.ui.ZippyTree";nrg.ui.ZippyTree.CSS_SUFFIX={ROOT_NODE:"rootnode"};nrg.ui.ZippyTree.FADE_TIME=300;nrg.ui.ZippyTree.NODE_DEPTH_KEY="_nodeDepth";nrg.ui.ZippyTree.MAX_DEPTH_KEY="_maxDepth";nrg.ui.ZippyTree.prototype.maxDepth_=1;nrg.ui.ZippyTree.prototype.fadeInFx_=!1;nrg.ui.ZippyTree.prototype.isEmpty_=!0;
nrg.ui.ZippyTree.prototype.initOp_=1;nrg.ui.ZippyTree.prototype.fadeDur_=0;nrg.ui.ZippyTree.prototype.secondaryAnimQueue_=null;nrg.ui.ZippyTree.prototype.AnimQueue_=null;nrg.ui.ZippyTree.prototype.setCustomInsertMethod=function(a){this.customInsertMethod_=a};nrg.ui.ZippyTree.prototype.isEmpty=function(){return 0===goog.dom.getChildren(this.getContentHolder()).length};nrg.ui.ZippyTree.prototype.contractAll=function(){this.traverse(function(a){a.getZippy().setExpanded(!1)},this)};
nrg.ui.ZippyTree.prototype.collapseAll=function(){this.contractAll()};nrg.ui.ZippyTree.prototype.getAllNodes=function(){var a=[];this.traverse(function(b){a.push(b)},this);return a};nrg.ui.ZippyTree.prototype.getTopLevelNodes=function(){var a=[];goog.object.forEach(this.getNodes(),function(b){a.push(b)});return a};nrg.ui.ZippyTree.prototype.expandAll=function(){this.traverse(function(a){a.getZippy().setExpanded(!0)},this)};
nrg.ui.ZippyTree.prototype.traverse=function(a,b){goog.object.forEach(b.getNodes(),function(b){a(b);this.traverse(a,b)}.bind(this))};nrg.ui.ZippyTree.prototype.getElement=function(){return this.rootElt_};nrg.ui.ZippyTree.prototype.setExpanded=function(a,b){b=goog.isDefAndNotNull(b)?b:this;if(goog.isDefAndNotNull(b.getNodes()[a])){var c=b.getNodes()[a];c.getZippy().setExpanded(!0);return c}};
nrg.ui.ZippyTree.prototype.setCollapsed=function(a,b){b=goog.isDefAndNotNull(b)?b:this;if(goog.isDefAndNotNull(b.getNodes()[a])){var c=b.getNodes()[a];c.getZippy().setExpanded(!1);return c}};nrg.ui.ZippyTree.prototype.getFolderNodes=function(a){var b=this,c=[];goog.array.forEach(a,function(a){c.push(b.getNodes()[a]);b=b.getNodes()[a]}.bind(this));return c};
nrg.ui.ZippyTree.prototype.addContents=function(a,b){!goog.isArray(a)||goog.dom.isElement(a)?this.addContent_(a,b):goog.array.forEach(a,function(a){this.addContents(a,b)}.bind(this))};nrg.ui.ZippyTree.prototype.addContent_=function(a,b){b?(b&&(b=goog.isString(b)?[b]:b,b.length>this.maxDepth_&&(this.maxDepth_=b.length)),this.createBranch(b,this,a)):goog.dom.append(this.rootElt_,a)};
nrg.ui.ZippyTree.prototype.createBranch=function(a,b,c,d){d=goog.isDefAndNotNull(d)?d:1;b=goog.isDefAndNotNull(b)?b:this;var e=b.getContentHolder();0==a.length?(this.onEndOfBranch_(e,c),goog.isDefAndNotNull(c)&&this.indentElement_(c,d-2)):(0<a.length&&a.length>this.maxDepth_&&(this.maxDepth_=a.length),b=b.getNodes()[a[0]]?b.getNodes()[a[0]]:this.createNode_(a[0],e,b),this.indentNode_(b,d),this.createBranch(1<a.length?a.slice(1):[],b,c,d+1))};
nrg.ui.ZippyTree.prototype.indentNode_=function(a,b){this.indentElement_(a.getHeader(),b-1)};
nrg.ui.ZippyTree.prototype.indentElement_=function(a,b,c,d){a[nrg.ui.ZippyTree.MAX_DEPTH_KEY]!=this.maxDepth_&&(goog.isDefAndNotNull(a[nrg.ui.ZippyTree.MAX_DEPTH_KEY])||(a[nrg.ui.ZippyTree.MAX_DEPTH_KEY]=this.maxDepth_),b=0>b?0:b,goog.isDefAndNotNull(a[nrg.ui.ZippyTree.NODE_DEPTH_KEY])||(a[nrg.ui.ZippyTree.NODE_DEPTH_KEY]=b),goog.isDefAndNotNull(c)&&!0!=c||(a.style.width=(100-b*nrg.ui.ZippyTree.INDENT_PCT).toString()+"%"),goog.isDefAndNotNull(d)&&!0!=d||(a.style.left=(b*nrg.ui.ZippyTree.INDENT_PCT).toString()+
"%"))};nrg.ui.ZippyTree.prototype.setNodeEvents_=function(a){goog.events.listen(a,nrg.ui.ZippyNode.EventType.EXPANDED,function(){this.dispatchEvent({type:nrg.ui.ZippyNode.EventType.EXPANDED,node:a})}.bind(this));goog.events.listen(a,nrg.ui.ZippyNode.EventType.CLICKED,function(){this.dispatchEvent({type:nrg.ui.ZippyNode.EventType.CLICKED,node:a})}.bind(this));goog.events.listen(a,nrg.ui.ZippyNode.EventType.COLLAPSED,function(){this.dispatchEvent({type:nrg.ui.ZippyNode.EventType.COLLAPSED,node:a})}.bind(this))};
nrg.ui.ZippyTree.prototype.createNode_=function(a,b,c){b.style.opacity=this.initOp_;var d=new nrg.ui.ZippyNode(a,b,!1);c.getHeader().parentNode==this.rootElt_&&2==this.rootElt_.childNodes.length&&(d.getHeader().style.marginTop="0px");d.getHeader().style.left="inherit";d.getHeader().style.width="inherit";this.setNodeEvents_(d);c.getNodes()[a]=d;d.getHeader().style.opacity=this.initOp_;b.style.opacity=1;this.fadeInFx_&&this.createFadeAnim_(d.getHeader());this.dispatchEvent({type:nrg.ui.ZippyTree.EventType.NODEADDED,
node:d});return d};nrg.ui.ZippyTree.prototype.createFadeAnim_=function(a,b){(new goog.fx.dom.FadeIn(a,this.fadeDur_)).play()};nrg.ui.ZippyTree.prototype.playFx=function(){this.fadeInFx_&&!this.AnimQueue_.isPlaying()&&this.AnimQueue_.play()};
nrg.ui.ZippyTree.prototype.toggleFadeInFx=function(a){this.initOp_=(this.fadeInFx_=!0===a)?0:1;this.fadeDur_=this.fadeInFx_?nrg.ui.ZippyTree.FADE_TIME:0;this.fadeInFx_&&(this.disposeAnims_(),this.secondaryAnimQueue_=[],this.AnimQueue_=new goog.fx.AnimationParallelQueue,goog.events.listen(this.AnimQueue_,"end",this.continueAnim_.bind(this)))};
nrg.ui.ZippyTree.folderSorter=function(a,b){if(goog.isDefAndNotNull(a.childNodes)&&0!=a.childNodes.length)for(var c=goog.dom.getChildren(a),d=b[nrg.ui.ZippyNode.NODE_STORT_TAG].toLowerCase(),e,f,g=c.length,h=0;h<g;h++){if(f=c[h],goog.isDefAndNotNull(f[nrg.ui.ZippyNode.NODE_STORT_TAG])&&(e=f[nrg.ui.ZippyNode.NODE_STORT_TAG].toLowerCase(),e=goog.string.numerateCompare(d,e),0>e)){goog.dom.insertSiblingBefore(b,f);return}}else window.console.log("FOLDER SORTER",a,b);goog.dom.appendChild(a,b)};
nrg.ui.ZippyTree.prototype.onEndOfBranch_=function(a,b){b&&(nrg.style.setStyle(b,{position:"relative"}),b.style.opacity=this.initOp_,goog.isDefAndNotNull(this.customInsertMethod_)?this.customInsertMethod_(a,b):goog.dom.appendChild(a,b),this.putFoldersAtEnd_(a),this.fadeInFx_?this.createFadeAnim_(b,function(){this.dispatchEvent({type:nrg.ui.ZippyTree.EventType.CONTENTADDED})}.bind(this)):this.dispatchEvent({type:nrg.ui.ZippyTree.EventType.CONTENTADDED}))};
nrg.ui.ZippyTree.prototype.putFoldersAtEnd_=function(a){var b=[],c=[],d=goog.dom.getChildren(a),e=d.length;goog.array.forEach(d,function(a){goog.dom.classlist.contains(a,nrg.ui.ZippyNode.CSS.HEADER)?b.push(a):1==a.childNodes.length&&goog.dom.classlist.contains(a.childNodes[0],nrg.ui.ZippyNode.CSS.CONTENT)&&c.push(a)});goog.array.forEach(b,function(b,d){goog.dom.insertChildAt(a,b,e);goog.dom.insertChildAt(a,c[d],e+1)})};
nrg.ui.ZippyTree.prototype.continueAnim_=function(){for(this.AnimQueue_.dispose();this.secondaryAnimQueue_.length;)this.AnimQueue_.add(this.secondaryAnimQueue_[0]),goog.array.removeAt(this.secondaryAnimQueue_,0);goog.events.listen(this.AnimQueue_,"end",this.continueAnim_.bind(this));this.AnimQueue_.play()};
nrg.ui.ZippyTree.prototype.disposeAnims_=function(){goog.isDefAndNotNull(this.secondaryAnimationQueue_)&&(this.disposeAnimations(this.secondaryAnimationQueue_),delete this.secondaryAnimationQueue_);goog.isDefAndNotNull(this.AnimQueue_)&&(this.disposeAnimationQueue(this.AnimQueue_),delete this.AnimQueue_)};
nrg.ui.ZippyTree.prototype.disposeInternal=function(){nrg.ui.ZippyTree.superClass_.disposeInternal.call(this);goog.dom.removeNode(this.rootElt_);delete this.rootElt_;this.disposeAnims_();delete this.maxDepth_;delete this.fadeInFx_;delete this.isEmpty_;delete this.initOp_;delete this.fadeDur_};goog.exportSymbol("nrg.ui.ZippyTree.EventType",nrg.ui.ZippyTree.EventType);goog.exportSymbol("nrg.ui.ZippyTree.INDENT_PCT",nrg.ui.ZippyTree.INDENT_PCT);goog.exportSymbol("nrg.ui.ZippyTree.ID_PREFIX",nrg.ui.ZippyTree.ID_PREFIX);
goog.exportSymbol("nrg.ui.ZippyTree.CSS_SUFFIX",nrg.ui.ZippyTree.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ZippyTree.FADE_TIME",nrg.ui.ZippyTree.FADE_TIME);goog.exportSymbol("nrg.ui.ZippyTree.NODE_DEPTH_KEY",nrg.ui.ZippyTree.NODE_DEPTH_KEY);goog.exportSymbol("nrg.ui.ZippyTree.MAX_DEPTH_KEY",nrg.ui.ZippyTree.MAX_DEPTH_KEY);goog.exportSymbol("nrg.ui.ZippyTree.folderSorter",nrg.ui.ZippyTree.folderSorter);goog.exportSymbol("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",nrg.ui.ZippyTree.prototype.setCustomInsertMethod);
goog.exportSymbol("nrg.ui.ZippyTree.prototype.isEmpty",nrg.ui.ZippyTree.prototype.isEmpty);goog.exportSymbol("nrg.ui.ZippyTree.prototype.contractAll",nrg.ui.ZippyTree.prototype.contractAll);goog.exportSymbol("nrg.ui.ZippyTree.prototype.collapseAll",nrg.ui.ZippyTree.prototype.collapseAll);goog.exportSymbol("nrg.ui.ZippyTree.prototype.getAllNodes",nrg.ui.ZippyTree.prototype.getAllNodes);goog.exportSymbol("nrg.ui.ZippyTree.prototype.getTopLevelNodes",nrg.ui.ZippyTree.prototype.getTopLevelNodes);
goog.exportSymbol("nrg.ui.ZippyTree.prototype.expandAll",nrg.ui.ZippyTree.prototype.expandAll);goog.exportSymbol("nrg.ui.ZippyTree.prototype.traverse",nrg.ui.ZippyTree.prototype.traverse);goog.exportSymbol("nrg.ui.ZippyTree.prototype.getElement",nrg.ui.ZippyTree.prototype.getElement);goog.exportSymbol("nrg.ui.ZippyTree.prototype.setExpanded",nrg.ui.ZippyTree.prototype.setExpanded);goog.exportSymbol("nrg.ui.ZippyTree.prototype.setCollapsed",nrg.ui.ZippyTree.prototype.setCollapsed);
goog.exportSymbol("nrg.ui.ZippyTree.prototype.getFolderNodes",nrg.ui.ZippyTree.prototype.getFolderNodes);goog.exportSymbol("nrg.ui.ZippyTree.prototype.addContents",nrg.ui.ZippyTree.prototype.addContents);goog.exportSymbol("nrg.ui.ZippyTree.prototype.createBranch",nrg.ui.ZippyTree.prototype.createBranch);goog.exportSymbol("nrg.ui.ZippyTree.prototype.playFx",nrg.ui.ZippyTree.prototype.playFx);goog.exportSymbol("nrg.ui.ZippyTree.prototype.toggleFadeInFx",nrg.ui.ZippyTree.prototype.toggleFadeInFx);
goog.exportSymbol("nrg.ui.ZippyTree.prototype.disposeInternal",nrg.ui.ZippyTree.prototype.disposeInternal);goog.ui.CheckboxRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.CheckboxRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.CheckboxRenderer);goog.ui.CheckboxRenderer.CSS_CLASS="goog-checkbox";goog.ui.CheckboxRenderer.prototype.createDom=function(a){var b=a.getDomHelper().createDom("span",this.getClassNames(a).join(" "));a=a.getChecked();this.setCheckboxState(b,a);return b};
goog.ui.CheckboxRenderer.prototype.decorate=function(a,b){b=goog.ui.CheckboxRenderer.superClass_.decorate.call(this,a,b);goog.asserts.assert(b);var c=goog.dom.classlist.get(b),d=goog.ui.Checkbox.State.UNCHECKED;goog.array.contains(c,this.getClassForCheckboxState(goog.ui.Checkbox.State.UNDETERMINED))?d=goog.ui.Checkbox.State.UNDETERMINED:goog.array.contains(c,this.getClassForCheckboxState(goog.ui.Checkbox.State.CHECKED))?d=goog.ui.Checkbox.State.CHECKED:goog.array.contains(c,this.getClassForCheckboxState(goog.ui.Checkbox.State.UNCHECKED))&&
(d=goog.ui.Checkbox.State.UNCHECKED);a.setCheckedInternal(d);goog.asserts.assert(b,"The element cannot be null.");goog.a11y.aria.setState(b,goog.a11y.aria.State.CHECKED,this.ariaStateFromCheckState_(d));return b};goog.ui.CheckboxRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.CHECKBOX};
goog.ui.CheckboxRenderer.prototype.setCheckboxState=function(a,b){if(a){goog.asserts.assert(a);var c=this.getClassForCheckboxState(b);goog.asserts.assert(c);goog.asserts.assert(a);goog.dom.classlist.contains(a,c)||(goog.object.forEach(goog.ui.Checkbox.State,function(b){b=this.getClassForCheckboxState(b);goog.asserts.assert(a);goog.dom.classlist.enable(a,b,b==c)},this),goog.a11y.aria.setState(a,goog.a11y.aria.State.CHECKED,this.ariaStateFromCheckState_(b)))}};
goog.ui.CheckboxRenderer.prototype.ariaStateFromCheckState_=function(a){return a==goog.ui.Checkbox.State.UNDETERMINED?"mixed":a==goog.ui.Checkbox.State.CHECKED?"true":"false"};goog.ui.CheckboxRenderer.prototype.getCssClass=function(){return goog.ui.CheckboxRenderer.CSS_CLASS};
goog.ui.CheckboxRenderer.prototype.getClassForCheckboxState=function(a){var b=this.getStructuralCssClass();if(a==goog.ui.Checkbox.State.CHECKED)return b+"-checked";if(a==goog.ui.Checkbox.State.UNCHECKED)return b+"-unchecked";if(a==goog.ui.Checkbox.State.UNDETERMINED)return b+"-undetermined";throw Error("Invalid checkbox state: "+a);};goog.ui.Checkbox=function(a,b,c){c=c||goog.ui.CheckboxRenderer.getInstance();goog.ui.Control.call(this,null,c,b);this.checked_=goog.isDef(a)?a:goog.ui.Checkbox.State.UNCHECKED};goog.inherits(goog.ui.Checkbox,goog.ui.Control);goog.ui.Checkbox.State={CHECKED:!0,UNCHECKED:!1,UNDETERMINED:null};goog.ui.Checkbox.prototype.label_=null;goog.ui.Checkbox.prototype.getChecked=function(){return this.checked_};goog.ui.Checkbox.prototype.isChecked=function(){return this.checked_==goog.ui.Checkbox.State.CHECKED};
goog.ui.Checkbox.prototype.isUnchecked=function(){return this.checked_==goog.ui.Checkbox.State.UNCHECKED};goog.ui.Checkbox.prototype.isUndetermined=function(){return this.checked_==goog.ui.Checkbox.State.UNDETERMINED};goog.ui.Checkbox.prototype.setChecked=function(a){a!=this.checked_&&(this.checked_=a,this.getRenderer().setCheckboxState(this.getElement(),this.checked_))};goog.ui.Checkbox.prototype.setCheckedInternal=function(a){this.checked_=a};
goog.ui.Checkbox.prototype.setLabel=function(a){this.isInDocument()?(this.exitDocument(),this.label_=a,this.enterDocument()):this.label_=a};goog.ui.Checkbox.prototype.toggle=function(){this.setChecked(this.checked_?goog.ui.Checkbox.State.UNCHECKED:goog.ui.Checkbox.State.CHECKED)};
goog.ui.Checkbox.prototype.enterDocument=function(){goog.ui.Checkbox.superClass_.enterDocument.call(this);if(this.isHandleMouseEvents()){var a=this.getHandler();this.label_&&a.listen(this.label_,goog.events.EventType.CLICK,this.handleClickOrSpace_).listen(this.label_,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(this.label_,goog.events.EventType.MOUSEOUT,this.handleMouseOut).listen(this.label_,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(this.label_,goog.events.EventType.MOUSEUP,
this.handleMouseUp);a.listen(this.getElement(),goog.events.EventType.CLICK,this.handleClickOrSpace_)}this.label_&&(this.label_.id||(this.label_.id=this.makeId("lbl")),a=this.getElement(),goog.asserts.assert(a,"The checkbox DOM element cannot be null."),goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.label_.id))};goog.ui.Checkbox.prototype.setEnabled=function(a){goog.ui.Checkbox.superClass_.setEnabled.call(this,a);if(a=this.getElement())a.tabIndex=this.isEnabled()?0:-1};
goog.ui.Checkbox.prototype.handleClickOrSpace_=function(a){a.stopPropagation();var b=this.checked_?goog.ui.Component.EventType.UNCHECK:goog.ui.Component.EventType.CHECK;this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};goog.ui.Checkbox.prototype.handleKeyEventInternal=function(a){a.keyCode==goog.events.KeyCodes.SPACE&&this.handleClickOrSpace_(a);return!1};
goog.ui.registry.setDecoratorByClassName(goog.ui.CheckboxRenderer.CSS_CLASS,function(){return new goog.ui.Checkbox});X.mesh=function(){X.object.call(this);this._classname="mesh";inject(this,new X.loadable)};goog.inherits(X.mesh,X.object);goog.exportSymbol("X.mesh",X.mesh);xiv.ui.ctrl={};xiv.ui.ctrl.XtkController=function(){nrg.ui.Component.call(this);this.masterControllers=[];this.subControllers=[]};goog.inherits(xiv.ui.ctrl.XtkController,nrg.ui.Component);goog.exportSymbol("xiv.ui.ctrl.XtkController",xiv.ui.ctrl.XtkController);xiv.ui.ctrl.XtkController.ID_PREFIX="xiv.ui.ctrl.XtkController";xiv.ui.ctrl.XtkController.CSS_SUFFIX={LABEL:"label",COMPONENT:"component"};xiv.ui.ctrl.XtkController.EventType={CHANGE:goog.events.getUniqueId("change")};
xiv.ui.ctrl.XtkController.OBJ_KEY=goog.string.createUniqueString();xiv.ui.ctrl.XtkController.createLabel=function(){return goog.dom.createDom("div",{id:"Label_"+goog.string.createUniqueString(),"class":xiv.ui.ctrl.XtkController.CSS.LABEL})};xiv.ui.ctrl.XtkController.getXObjLabel=function(a){a=goog.isArray(a.file)?a.file[0]:a.file||a.name;return goog.string.path.basename(a)};
xiv.ui.ctrl.XtkController.getObjectCategory=function(a){if(a instanceof X.mesh)return"Meshes";if(a instanceof X.volume)return"Volumes";if(a instanceof X.fibers)return"Fibers";if(a instanceof X.sphere)return"Annotations"};xiv.ui.ctrl.XtkController.setControllerFolders=function(a,b){b.setFolders([xiv.ui.ctrl.XtkController.getXObjLabel(a)])};xiv.ui.ctrl.XtkController.prototype.initialized_=!1;
xiv.ui.ctrl.XtkController.prototype.render=function(a){xiv.ui.ctrl.XtkController.superClass_.render.call(this,a)};xiv.ui.ctrl.XtkController.prototype.setLabel=function(a){goog.isDefAndNotNull(this.label_)||(this.label_=xiv.ui.ctrl.XtkController.createLabel(),goog.dom.append(this.getElement(),this.label_));this.label_.innerHTML=a};xiv.ui.ctrl.XtkController.prototype.getLabel=function(){return this.label_};
xiv.ui.ctrl.XtkController.prototype.setFolders=function(a){goog.isString(a)&&(a=[a]);this.folders_=a};xiv.ui.ctrl.XtkController.prototype.getFolders=function(){return this.folders_};xiv.ui.ctrl.XtkController.prototype.setXObj=function(a){this.xObj_=a};xiv.ui.ctrl.XtkController.prototype.getXObj=function(){return this.xObj_};
xiv.ui.ctrl.XtkController.prototype.setComponent=function(a){a=this.component_=a;this.component_ instanceof goog.ui.Component?(a=this.component_.getElement(),this.component_.isInDocument()?this.component_.getElement().parentNode!==this.getElement()&&this.component_.getElement()!==this.getElement()&&goog.dom.appendChild(this.getElement(),this.component_.getElement()):this.component_.render(this.getElement())):goog.dom.appendChild(this.getElement(),a);goog.isDefAndNotNull(a)&&goog.dom.classes.add(a,
xiv.ui.ctrl.XtkController.CSS.COMPONENT)};xiv.ui.ctrl.XtkController.prototype.getAllControllers=function(){return goog.array.concat(this.masterControllers,this.subControllers)};xiv.ui.ctrl.XtkController.prototype.getMasterControllers=function(){return this.masterControllers};xiv.ui.ctrl.XtkController.prototype.isInitialized=function(){return this.initialized_};xiv.ui.ctrl.XtkController.prototype.setInitialized=function(a){this.initialized_=a};
xiv.ui.ctrl.XtkController.prototype.getSubControllers=function(){return this.subControllers};xiv.ui.ctrl.XtkController.prototype.getComponent=function(){return this.component_};xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent=goog.nullFunction;xiv.ui.ctrl.XtkController.prototype.createController=function(a,b,c){a=new a;a.render();a.setLabel(b);goog.dom.append(this.getElement(),a.getElement());goog.isDefAndNotNull(c)&&goog.events.listen(a,xiv.ui.ctrl.XtkController.EventType.CHANGE,c);return a};
xiv.ui.ctrl.XtkController.prototype.update=function(){this.component_==this?this.updateStyle():this.component_.updateStyle&&this.component_.updateStyle()};xiv.ui.ctrl.XtkController.prototype.updateStyle=function(){this.component_.updateStyle&&this.component_!=this&&(window.console.log("UPDATE STYLE",this.component_),this.component_.updateStyle())};
xiv.ui.ctrl.XtkController.prototype.add_colorPalette=function(a,b){var c=this.createController(b,"Color",function(b){a.color=b.color}.bind(this));xiv.ui.ctrl.XtkController.setControllerFolders(a,c);this.subControllers.push(c);c[xiv.ui.ctrl.XtkController.OBJ_KEY]=a;c.update()};
xiv.ui.ctrl.XtkController.prototype.add_opacity=function(a,b){var c=this.createController(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});xiv.ui.ctrl.XtkController.setControllerFolders(a,c);this.subControllers.push(c);c.getComponent().setValue(1);c.getComponent().updateStyle()};
xiv.ui.ctrl.XtkController.prototype.add_visible=function(a,b){var c=this.createController(b,"Visible",function(b){a.visible=b.checked});xiv.ui.ctrl.XtkController.setControllerFolders(a,c);this.subControllers.push(c);c.getComponent().setChecked(a.visible)};
xiv.ui.ctrl.XtkController.prototype.disposeInternal=function(){xiv.ui.ctrl.XtkController.superClass_.disposeInternal.call(this);this[xiv.ui.ctrl.XtkController.OBJ_KEY]=null;delete this.initialized_;delete this.xObj_;goog.array.forEach(this.subControllers,function(a){goog.events.removeAll(a);a.dispose()});goog.array.clear(this.subControllers);delete this.subControllers;goog.array.forEach(this.masterControllers,function(a){goog.events.removeAll(a);a.dispose();controller=null});goog.array.clear(this.masterControllers);
delete this.masterControllers;goog.isDefAndNotNull(this.component_)&&(goog.events.removeAll(this.component_),this.component_ instanceof goog.ui.Component?this.component_.dispose():goog.dom.removeNode(this.component_),delete this.component_);goog.isDefAndNotNull(this.folders_)&&(goog.array.clear(this.folders_),delete this.folders_);goog.isDefAndNotNull(this.label_)&&(goog.dom.removeNode(this.label_),delete this.label_)};goog.exportSymbol("xiv.ui.ctrl.XtkController.ID_PREFIX",xiv.ui.ctrl.XtkController.ID_PREFIX);
goog.exportSymbol("xiv.ui.ctrl.XtkController.CSS_SUFFIX",xiv.ui.ctrl.XtkController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.XtkController.EventType",xiv.ui.ctrl.XtkController.EventType);goog.exportSymbol("xiv.ui.ctrl.XtkController.OBJ_KEY",xiv.ui.ctrl.XtkController.OBJ_KEY);goog.exportSymbol("xiv.ui.ctrl.XtkController.createLabel",xiv.ui.ctrl.XtkController.createLabel);goog.exportSymbol("xiv.ui.ctrl.XtkController.getXObjLabel",xiv.ui.ctrl.XtkController.getXObjLabel);
goog.exportSymbol("xiv.ui.ctrl.XtkController.getObjectCategory",xiv.ui.ctrl.XtkController.getObjectCategory);goog.exportSymbol("xiv.ui.ctrl.XtkController.setControllerFolders",xiv.ui.ctrl.XtkController.setControllerFolders);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.render",xiv.ui.ctrl.XtkController.prototype.render);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.setLabel",xiv.ui.ctrl.XtkController.prototype.setLabel);
goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.getLabel",xiv.ui.ctrl.XtkController.prototype.getLabel);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.setFolders",xiv.ui.ctrl.XtkController.prototype.setFolders);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.getFolders",xiv.ui.ctrl.XtkController.prototype.getFolders);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.setXObj",xiv.ui.ctrl.XtkController.prototype.setXObj);
goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.getXObj",xiv.ui.ctrl.XtkController.prototype.getXObj);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.setComponent",xiv.ui.ctrl.XtkController.prototype.setComponent);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.getAllControllers",xiv.ui.ctrl.XtkController.prototype.getAllControllers);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",xiv.ui.ctrl.XtkController.prototype.getMasterControllers);
goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.isInitialized",xiv.ui.ctrl.XtkController.prototype.isInitialized);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.setInitialized",xiv.ui.ctrl.XtkController.prototype.setInitialized);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.getSubControllers",xiv.ui.ctrl.XtkController.prototype.getSubControllers);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.getComponent",xiv.ui.ctrl.XtkController.prototype.getComponent);
goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.createController",xiv.ui.ctrl.XtkController.prototype.createController);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.update",xiv.ui.ctrl.XtkController.prototype.update);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.updateStyle",xiv.ui.ctrl.XtkController.prototype.updateStyle);
goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",xiv.ui.ctrl.XtkController.prototype.add_colorPalette);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.add_opacity",xiv.ui.ctrl.XtkController.prototype.add_opacity);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.add_visible",xiv.ui.ctrl.XtkController.prototype.add_visible);goog.exportSymbol("xiv.ui.ctrl.XtkController.prototype.disposeInternal",xiv.ui.ctrl.XtkController.prototype.disposeInternal);xiv.ui.ctrl.Histogram=function(){xiv.ui.ctrl.XtkController.call(this)};goog.inherits(xiv.ui.ctrl.Histogram,xiv.ui.ctrl.XtkController);goog.exportSymbol("xiv.ui.ctrl.Histogram",xiv.ui.ctrl.Histogram);xiv.ui.ctrl.Histogram.EventType={};xiv.ui.ctrl.Histogram.ID_PREFIX="xiv.ui.ctrl.Histogram";xiv.ui.ctrl.Histogram.CSS_SUFFIX={CANVAS:"canvas",LINECANVAS:"linecanvas",MAX:"max",MIN:"min"};xiv.ui.ctrl.Histogram.LEVEL_CUTOFF=.99;xiv.ui.ctrl.Histogram.prototype.heightLimit_=.95;
xiv.ui.ctrl.Histogram.prototype.levels_=null;xiv.ui.ctrl.Histogram.prototype.percentages_=null;xiv.ui.ctrl.Histogram.prototype.totalPixels_=null;xiv.ui.ctrl.Histogram.prototype.maxPct_=null;xiv.ui.ctrl.Histogram.prototype.windowHigh_=null;xiv.ui.ctrl.Histogram.prototype.windowLow_=null;xiv.ui.ctrl.Histogram.prototype.contextFillStyle_="rgb(40,40,40)";xiv.ui.ctrl.Histogram.prototype.lineContextFillStyle_="rgb(0,0,0)";
xiv.ui.ctrl.Histogram.prototype.render=function(a){xiv.ui.ctrl.Histogram.superClass_.render.call(this,a);this.setComponent(this);this.canvas_=goog.dom.createDom("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+goog.string.createUniqueString(),"class":this.constructor.CSS.CANVAS});goog.dom.appendChild(this.getElement(),this.canvas_);this.context_=this.canvas_.getContext("2d");this.context_.fillStyle=this.contextFillStyle_;this.lineCanvas_=goog.dom.createDom("canvas",{id:this.constructor.ID_PREFIX+
"_LineCanvas_"+goog.string.createUniqueString(),"class":this.constructor.CSS.LINECANVAS});goog.dom.appendChild(this.getElement(),this.lineCanvas_);this.lineContext_=this.lineCanvas_.getContext("2d");this.maxDiv_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_Max_"+goog.string.createUniqueString(),"class":this.constructor.CSS.MAX},"1000");goog.dom.appendChild(this.getElement(),this.maxDiv_);this.minDiv_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_Min_"+goog.string.createUniqueString(),
"class":this.constructor.CSS.MIN},"-1000");goog.dom.appendChild(this.getElement(),this.minDiv_)};
xiv.ui.ctrl.Histogram.prototype.tallyLevels_=function(){if(!goog.isDefAndNotNull(this.levels_)){var a=0,b=this.getXObj().max;goog.array.forEach(this.getXObj().image,function(c){goog.array.forEach(c,function(c){goog.array.forEach(c,function(c){if(!goog.isDefAndNotNull(this.levels_))for(this.levels_=[];a<=b;a++)this.levels_.push(0);this.levels_[parseInt(c)]++;this.totalPixels_++}.bind(this))}.bind(this))}.bind(this));if(goog.isDefAndNotNull(this.levels_)){var c;goog.isDefAndNotNull(this.percentages_)||
(this.percentages_=[],this.maxPct_=0,goog.array.forEach(this.levels_,function(a,b){c=a/this.totalPixels_;this.percentages_.push(c);this.maxPct_=Math.max(this.maxPct_,c)}.bind(this)))}}};
xiv.ui.ctrl.Histogram.prototype.draw=function(){if(goog.isDefAndNotNull(this.getXObj())){var a=goog.style.getSize(this.canvas_),b=a.width,a=a.height;this.canvas_.height=a;this.canvas_.width=b;this.lineCanvas_.height=a;this.lineCanvas_.width=b;this.tallyLevels_();if(goog.isDefAndNotNull(this.levels_))for(var c=this.getXObj().windowHigh,b=Math.round(b/c),b=0<b?b:1,c=this.heightLimit_/this.maxPct_,d,e=0,f=this.percentages_.length;e<f;e++)d=this.percentages_[e]*c*a,this.context_.fillRect(b*e,a,b,-Math.round(d))}};
xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold=function(a){if(goog.isDefAndNotNull(this.levels_))for(var b=0,c=0,d=this.levels_.length;c<d;c++)if(b+=this.levels_[c],b/this.totalPixels_>=a)return c};
xiv.ui.ctrl.Histogram.prototype.drawLine=function(){if(goog.isDefAndNotNull(this.getXObj())){var a=goog.style.getSize(this.lineCanvas_),b=a.width,a=a.height;this.lineCanvas_.width=b;var c;c=0==this.startMin_&&0<this.startMax_?Math.round(this.windowLow_/this.startMax_*b):Math.round(this.windowLow_/this.startMin_*b);b=0==this.startMax_?0:Math.round(this.windowHigh_/this.startMax_*b);this.lineContext_.strokeStyle="gray";this.lineContext_.moveTo(c,a);this.lineContext_.lineTo(b,0);this.lineContext_.lineWidth=
.5;this.lineContext_.stroke();b=c+(b-c)/2;this.lineContext_.moveTo(b,a);this.lineContext_.lineTo(b,a-20);this.lineContext_.lineWidth=.5;this.lineContext_.stroke()}};xiv.ui.ctrl.Histogram.prototype.update=function(){this.draw();this.updateMaxMin();this.drawLine()};
xiv.ui.ctrl.Histogram.prototype.updateMaxMin=function(){goog.isDefAndNotNull(this.getXObj())&&(goog.isDefAndNotNull(this.startMin_)||(this.startMin_=parseInt(this.getXObj().windowLow),this.startMax_=parseInt(this.getXObj().windowHigh),this.startMin_=isNaN(this.startMin_)?null:this.startMin_,this.startMax_=isNaN(this.startMax_)?null:this.startMax_,this.windowLow_=this.startMin_,this.windowHigh_=this.startMax_),this.windowLow_=parseInt(this.getXObj().windowLow),this.windowHigh_=parseInt(this.getXObj().windowHigh),
this.minDiv_.innerHTML=this.windowLow_,this.maxDiv_.innerHTML=this.windowHigh_)};
xiv.ui.ctrl.Histogram.prototype.disposeInternal=function(){xiv.ui.ctrl.Histogram.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.maxDiv_)&&(goog.dom.removeNode(this.maxDiv_),delete this.maxDiv_);goog.isDefAndNotNull(this.minDiv_)&&(goog.dom.removeNode(this.minDiv_),delete this.minDiv_);goog.isDefAndNotNull(this.canvas_)&&(goog.dom.removeNode(this.canvas_),delete this.canvas_);goog.isDefAndNotNull(this.lineCanvas_)&&(goog.dom.removeNode(this.lineCanvas_),delete this.lineCanvas_);goog.isDefAndNotNull(this.levels_)&&
(goog.array.clear(this.levels_),delete this.levels_);goog.isDefAndNotNull(this.percentages_)&&(goog.array.clear(this.percentages_),delete this.percentages_);delete this.totalPixels_;delete this.maxPct_;delete this.context_;delete this.lineContext_;delete this.startMin_;delete this.startMax_};goog.exportSymbol("xiv.ui.ctrl.Histogram.EventType",xiv.ui.ctrl.Histogram.EventType);goog.exportSymbol("xiv.ui.ctrl.Histogram.ID_PREFIX",xiv.ui.ctrl.Histogram.ID_PREFIX);
goog.exportSymbol("xiv.ui.ctrl.Histogram.CSS_SUFFIX",xiv.ui.ctrl.Histogram.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",xiv.ui.ctrl.Histogram.LEVEL_CUTOFF);goog.exportSymbol("xiv.ui.ctrl.Histogram.prototype.render",xiv.ui.ctrl.Histogram.prototype.render);goog.exportSymbol("xiv.ui.ctrl.Histogram.prototype.draw",xiv.ui.ctrl.Histogram.prototype.draw);goog.exportSymbol("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold);
goog.exportSymbol("xiv.ui.ctrl.Histogram.prototype.drawLine",xiv.ui.ctrl.Histogram.prototype.drawLine);goog.exportSymbol("xiv.ui.ctrl.Histogram.prototype.update",xiv.ui.ctrl.Histogram.prototype.update);goog.exportSymbol("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",xiv.ui.ctrl.Histogram.prototype.updateMaxMin);goog.exportSymbol("xiv.ui.ctrl.Histogram.prototype.disposeInternal",xiv.ui.ctrl.Histogram.prototype.disposeInternal);nrg.ui.ResizeDragger=function(a,b){if(!goog.isDefAndNotNull(a))throw Error("Invalid direction for ResizeDragger: "+a);nrg.ui.Component.call(this);this.direction_=a;this.resizee=b;this.boundaryElt=null;this.Dragger=new goog.fx.Dragger(this.getElement());this.setEvents_()};goog.inherits(nrg.ui.ResizeDragger,nrg.ui.Component);goog.exportSymbol("nrg.ui.ResizeDragger",nrg.ui.ResizeDragger);nrg.ui.ResizeDragger.EventType={RESIZE:"resize",RESIZE_START:"start_resize",RESIZE_END:"end_resize"};
nrg.ui.ResizeDragger.ID_PREFIX="nrg.ui.ResizeDragger";nrg.ui.ResizeDragger.CSS_SUFFIX={};nrg.ui.ResizeDragger.ANIM_MED=500;nrg.ui.ResizeDragger.prototype.vertDraggerOffset=null;nrg.ui.ResizeDragger.prototype.horizDraggerOffset=null;nrg.ui.ResizeDragger.prototype.draggerLimitLeft=null;nrg.ui.ResizeDragger.prototype.draggerLimitRight=null;nrg.ui.ResizeDragger.prototype.draggerLimitTop=null;nrg.ui.ResizeDragger.prototype.draggerLimitBottom=null;nrg.ui.ResizeDragger.prototype.draggerLimitWidth=null;
nrg.ui.ResizeDragger.prototype.draggerLimitHeight=null;nrg.ui.ResizeDragger.prototype.offsetX=0;nrg.ui.ResizeDragger.prototype.setOffsetX=function(a){this.offsetX=a};nrg.ui.ResizeDragger.prototype.offsetY=0;nrg.ui.ResizeDragger.prototype.setOffsetY=function(a){this.offsetY=a};nrg.ui.ResizeDragger.prototype.handlePos=null;nrg.ui.ResizeDragger.prototype.handleSize=null;nrg.ui.ResizeDragger.prototype.resizeePos=null;nrg.ui.ResizeDragger.prototype.resizeeSize=null;
nrg.ui.ResizeDragger.prototype.boundaryPos=null;nrg.ui.ResizeDragger.prototype.boundarySize=null;nrg.ui.ResizeDragger.prototype.isAnimating=!1;nrg.ui.ResizeDragger.prototype.minSize=new goog.math.Size(10,10);nrg.ui.ResizeDragger.prototype.getBoundaryElement=function(){return this.boundaryElt};nrg.ui.ResizeDragger.prototype.setBoundaryElement=function(a){this.boundaryElt=a};nrg.ui.ResizeDragger.prototype.getDragger=function(){return this.Dragger};nrg.ui.ResizeDragger.prototype.getDirection=function(){return this.direction_};
nrg.ui.ResizeDragger.prototype.getHandle=function(){return this.getElement()};
nrg.ui.ResizeDragger.prototype.updateTrackingValues=function(){this.handleSize=goog.style.getSize(this.getElement());this.handlePos=goog.style.getPosition(this.getElement());this.vertDraggerOffset=-1*this.handleSize.height/2+this.offsetY;this.horizDraggerOffset=-1*this.handleSize.width/2+this.offsetX;this.Dragger.isDragging()||this.isAnimating||(this.resizeePos=goog.object.clone(goog.style.getPosition(this.resizee)),this.resizeeSize=goog.object.clone(goog.style.getSize(this.resizee)),this.resizeePos.left=
this.resizeePos.x,this.resizeePos.top=this.resizeePos.y,this.resizeePos.right=this.resizeePos.x+this.resizeeSize.width,this.resizeePos.bottom=this.resizeePos.y+this.resizeeSize.height,this.boundaryPos=goog.object.clone(goog.style.getPosition(this.boundaryElt)),this.boundarySize=goog.object.clone(goog.style.getSize(this.boundaryElt)),this.boundaryPos.left=this.boundaryPos.x,this.boundaryPos.top=this.boundaryPos.y,this.boundaryPos.right=this.boundaryPos.x+this.boundarySize.width,this.boundaryPos.bottom=
this.boundaryPos.y+this.boundarySize.height,this.calculateDraggerLimits&&this.calculateDraggerLimits(this))};nrg.ui.ResizeDragger.prototype.setMinSize=function(a){return this.minSize=a};nrg.ui.ResizeDragger.prototype.setEvents_=function(a){goog.events.listen(this.Dragger,goog.fx.Dragger.EventType.START,this.onResizeStart.bind(this));goog.events.listen(this.Dragger,goog.fx.Dragger.EventType.DRAG,this.onResize.bind(this));goog.events.listen(this.Dragger,goog.fx.Dragger.EventType.END,this.onResizeEnd.bind(this))};
nrg.ui.ResizeDragger.prototype.onResizeStart=function(a){this.dispatchEvent({type:nrg.ui.ResizeDragger.EventType.RESIZE_START})};nrg.ui.ResizeDragger.prototype.onResize=function(a){this.updateTrackingValues();this.dispatchEvent({type:nrg.ui.ResizeDragger.EventType.RESIZE,resizeePosition:this.resizeePos,resizeeSize:this.resizeeSize,boundaryPosition:this.boundaryPos,boundarySize:this.boundarySize});goog.isDefAndNotNull(this.resizeMethod)&&this.resizeMethod()};
nrg.ui.ResizeDragger.prototype.onResizeEnd=function(a){this.dispatchEvent({type:nrg.ui.ResizeDragger.EventType.RESIZE_END})};nrg.ui.ResizeDragger.prototype.update=function(){this.Dragger.isDragging()||this.isAnimating||this.updateTrackingValues()};nrg.ui.ResizeDragger.prototype.getSlideTrajectory=function(a){};
nrg.ui.ResizeDragger.prototype.slideToLimits=function(a,b,c){this.updateTrackingValues();a=this.getSlideTrajectory(a);goog.isNumber(c)&&0===c?goog.style.setStyle(this.getElement(),a.end):this.createSlideAnim_(a.start,a.end,b,c)};
nrg.ui.ResizeDragger.prototype.createSlideAnim_=function(a,b,c,d){this.slideAnim_=new goog.fx.dom.Slide(this.getElement(),[a.x,a.y],[b.x,b.y],goog.isNumber(d)?d:nrg.ui.ResizeDragger.ANIM_MED,goog.fx.easing.easeOut);goog.events.listen(this.slideAnim_,goog.fx.Animation.EventType.BEGIN,function(){this.isAnimating=!0;this.onResizeStart()}.bind(this));goog.events.listen(this.slideAnim_,goog.fx.Animation.EventType.ANIMATE,this.onResize.bind(this));goog.events.listen(this.slideAnim_,goog.fx.Animation.EventType.END,
function(a){this.isAnimating=!1;this.slideAnim_.dispose();goog.events.removeAll(this.slideAnim_);this.slideAnim_.destroy();this.slideAnim_=null;goog.style.setPosition(this.getElement(),b);this.onResizeEnd();c&&c()}.bind(this));this.slideAnim_.play()};
nrg.ui.ResizeDragger.prototype.disposeInternal=function(){delete this.offsetX_;delete this.offsetY_;delete this.horizDraggerOffset;delete this.draggerLimitLeft;delete this.draggerLimitRight;delete this.draggerLimitTop;delete this.draggerLimitBottom;delete this.draggerLimitWidth;delete this.draggerLimitHeight;delete this.isAnimating;goog.object.clear(this.minSize);delete this.minSize;delete this.resizee;delete this.boundaryElt;goog.object.clear(this.handlePos);delete this.handlePos;goog.object.clear(this.handleSize);
delete this.handleSize;goog.object.clear(this.resizeePos);delete this.resizeePos;goog.object.clear(this.resizeeSize);delete this.resizeeSize;goog.object.clear(this.boundaryPos);delete this.boundaryPos;goog.object.clear(this.boundarySize);delete this.boundarySize;goog.dom.removeNode(this.Dragger.handle);this.Dragger.handle=null;goog.events.removeAll(this.Dragger);this.Dragger.dispose();delete this.Dragger;delete this.direction_};goog.exportSymbol("nrg.ui.ResizeDragger.EventType",nrg.ui.ResizeDragger.EventType);
goog.exportSymbol("nrg.ui.ResizeDragger.ID_PREFIX",nrg.ui.ResizeDragger.ID_PREFIX);goog.exportSymbol("nrg.ui.ResizeDragger.CSS_SUFFIX",nrg.ui.ResizeDragger.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ResizeDragger.ANIM_MED",nrg.ui.ResizeDragger.ANIM_MED);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",nrg.ui.ResizeDragger.prototype.vertDraggerOffset);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",nrg.ui.ResizeDragger.prototype.horizDraggerOffset);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",nrg.ui.ResizeDragger.prototype.draggerLimitLeft);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.draggerLimitRight",nrg.ui.ResizeDragger.prototype.draggerLimitRight);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.draggerLimitTop",nrg.ui.ResizeDragger.prototype.draggerLimitTop);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",nrg.ui.ResizeDragger.prototype.draggerLimitBottom);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",nrg.ui.ResizeDragger.prototype.draggerLimitWidth);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",nrg.ui.ResizeDragger.prototype.draggerLimitHeight);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.offsetX",nrg.ui.ResizeDragger.prototype.offsetX);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.setOffsetX",nrg.ui.ResizeDragger.prototype.setOffsetX);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.offsetY",nrg.ui.ResizeDragger.prototype.offsetY);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.setOffsetY",nrg.ui.ResizeDragger.prototype.setOffsetY);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.handlePos",nrg.ui.ResizeDragger.prototype.handlePos);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.handleSize",nrg.ui.ResizeDragger.prototype.handleSize);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.resizeePos",nrg.ui.ResizeDragger.prototype.resizeePos);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.resizeeSize",nrg.ui.ResizeDragger.prototype.resizeeSize);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.boundaryPos",nrg.ui.ResizeDragger.prototype.boundaryPos);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.boundarySize",nrg.ui.ResizeDragger.prototype.boundarySize);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.isAnimating",nrg.ui.ResizeDragger.prototype.isAnimating);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.minSize",nrg.ui.ResizeDragger.prototype.minSize);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.getBoundaryElement",nrg.ui.ResizeDragger.prototype.getBoundaryElement);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.setBoundaryElement",nrg.ui.ResizeDragger.prototype.setBoundaryElement);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.getDragger",nrg.ui.ResizeDragger.prototype.getDragger);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.getDirection",nrg.ui.ResizeDragger.prototype.getDirection);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.getHandle",nrg.ui.ResizeDragger.prototype.getHandle);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.updateTrackingValues",nrg.ui.ResizeDragger.prototype.updateTrackingValues);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.setMinSize",nrg.ui.ResizeDragger.prototype.setMinSize);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.onResizeStart",nrg.ui.ResizeDragger.prototype.onResizeStart);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.onResize",nrg.ui.ResizeDragger.prototype.onResize);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.onResizeEnd",nrg.ui.ResizeDragger.prototype.onResizeEnd);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.update",nrg.ui.ResizeDragger.prototype.update);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",nrg.ui.ResizeDragger.prototype.getSlideTrajectory);goog.exportSymbol("nrg.ui.ResizeDragger.prototype.slideToLimits",nrg.ui.ResizeDragger.prototype.slideToLimits);
goog.exportSymbol("nrg.ui.ResizeDragger.prototype.disposeInternal",nrg.ui.ResizeDragger.prototype.disposeInternal);nrg.ui.ResizeDraggerRight=function(a){nrg.ui.ResizeDragger.call(this,"right",a)};goog.inherits(nrg.ui.ResizeDraggerRight,nrg.ui.ResizeDragger);goog.exportSymbol("nrg.ui.ResizeDraggerRight",nrg.ui.ResizeDraggerRight);nrg.ui.ResizeDraggerRight.ID_PREFIX="nrg.ui.ResizeDraggerRight";nrg.ui.ResizeDraggerRight.CSS_SUFFIX={};
nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits=function(){this.draggerLimitLeft=this.resizeePos.left+this.minSize.width+this.horizDraggerOffset;this.draggerLimitRight=this.boundaryPos.right+this.horizDraggerOffset;this.draggerLimitWidth=this.draggerLimitRight-this.draggerLimitLeft};goog.exportSymbol("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits);
nrg.ui.ResizeDraggerRight.prototype.resizeMethod=function(){goog.style.setWidth(this.resizee,Math.min(Math.max(this.resizeeSize.width+(this.isAnimating?this.handlePos.x-this.resizeePos.right+this.horizDraggerOffset:this.Dragger.clientX-this.Dragger.startX),this.minSize.width),this.boundarySize.width))};goog.exportSymbol("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",nrg.ui.ResizeDraggerRight.prototype.resizeMethod);
nrg.ui.ResizeDraggerRight.prototype.update=function(a){this.Dragger.isDragging()||this.isAnimating||(nrg.ui.ResizeDraggerRight.superClass_.update.call(this,a),this.Dragger.setLimits(new goog.math.Rect(this.draggerLimitLeft,this.resizeePos.y,this.draggerLimitWidth,0)),goog.style.setPosition(this.getElement(),this.resizeePos.right+this.horizDraggerOffset,this.resizeePos.y),goog.style.setHeight(this.getElement(),this.resizeeSize.height))};
nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory=function(a){nrg.ui.ResizeDraggerRight.superClass_.getSlideTrajectory.call(this);return{start:new goog.math.Coordinate(this.handlePos.x,this.handlePos.y),end:"MIN"==a?new goog.math.Coordinate(this.draggerLimitLeft,this.handlePos.y):new goog.math.Coordinate(this.draggerLimitRight,this.handlePos.y)}};goog.exportSymbol("nrg.ui.ResizeDraggerRight.ID_PREFIX",nrg.ui.ResizeDraggerRight.ID_PREFIX);
goog.exportSymbol("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",nrg.ui.ResizeDraggerRight.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ResizeDraggerRight.prototype.update",nrg.ui.ResizeDraggerRight.prototype.update);goog.exportSymbol("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory);nrg.ui.ResizeDraggerBottom=function(a){nrg.ui.ResizeDragger.call(this,"right",a)};goog.inherits(nrg.ui.ResizeDraggerBottom,nrg.ui.ResizeDragger);goog.exportSymbol("nrg.ui.ResizeDraggerBottom",nrg.ui.ResizeDraggerBottom);nrg.ui.ResizeDraggerBottom.ID_PREFIX="nrg.ui.ResizeDraggerBottom";nrg.ui.ResizeDraggerBottom.CSS_SUFFIX={};
nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits=function(){this.draggerLimitTop=this.resizeePos.top+this.minSize.height+this.vertDraggerOffset;this.draggerLimitBottom=this.boundaryPos.bottom+this.vertDraggerOffset;this.draggerLimitHeight=this.draggerLimitBottom-this.draggerLimitTop};goog.exportSymbol("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits);
nrg.ui.ResizeDraggerBottom.prototype.resizeMethod=function(){goog.style.setHeight(this.resizee,Math.max(this.resizeeSize.height+(this.handlePos.y-this.resizeePos.bottom),this.minSize.height))};goog.exportSymbol("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",nrg.ui.ResizeDraggerBottom.prototype.resizeMethod);
nrg.ui.ResizeDraggerBottom.prototype.update=function(){this.Dragger.isDragging()||this.isAnimating||(nrg.ui.ResizeDraggerBottom.superClass_.update.call(this),this.Dragger.setLimits(new goog.math.Rect(this.boundaryPos.x,this.draggerLimitTop,0,this.draggerLimitBottom)),goog.style.setPosition(this.getElement(),this.resizeePos.x,this.resizeePos.bottom+this.vertDraggerOffset))};
nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory=function(a){nrg.ui.ResizeDraggerBottom.superClass_.getSlideTrajectory.call(this);return{start:new goog.math.Coordinate(this.handlePos.x,this.handlePos.y),end:"MIN"==a?new goog.math.Coordinate(this.handlePos.x,this.draggerLimitTop):new goog.math.Coordinate(this.handlePos.x,this.draggerLimitBottom)}};goog.exportSymbol("nrg.ui.ResizeDraggerBottom.ID_PREFIX",nrg.ui.ResizeDraggerBottom.ID_PREFIX);
goog.exportSymbol("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",nrg.ui.ResizeDraggerBottom.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ResizeDraggerBottom.prototype.update",nrg.ui.ResizeDraggerBottom.prototype.update);goog.exportSymbol("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory);nrg.ui.ResizeDraggerTop=function(a){nrg.ui.ResizeDragger.call(this,"right",a)};goog.inherits(nrg.ui.ResizeDraggerTop,nrg.ui.ResizeDragger);goog.exportSymbol("nrg.ui.ResizeDraggerTop",nrg.ui.ResizeDraggerTop);nrg.ui.ResizeDraggerTop.ID_PREFIX="nrg.ui.ResizeDraggerTop";nrg.ui.ResizeDraggerTop.CSS_SUFFIX={};
nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits=function(){this.draggerLimitTop=this.boundaryPos.top-this.vertDraggerOffset;this.draggerLimitBottom=this.resizeePos.bottom-this.minSize.height+this.vertDraggerOffset;this.draggerLimitHeight=this.draggerLimitBottom-this.draggerLimitTop};goog.exportSymbol("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",nrg.ui.ResizeDraggerTop.calculateDraggerLimits);
nrg.ui.ResizeDraggerTop.prototype.resizeMethod=function(){var a=this.handlePos.y-this.vertDraggerOffset,b=this.resizeeSize.height+(this.isAnimating?this.resizeePos.y-a:this.Dragger.startY-this.Dragger.clientY);this.resizee.style.top=a.toString()+"px";goog.style.setHeight(this.resizee,Math.max(b,this.minSize.height))};
nrg.ui.ResizeDraggerTop.prototype.update=function(){this.Dragger.isDragging()||this.isAnimating||(nrg.ui.ResizeDraggerTop.superClass_.update.call(this),this.Dragger.setLimits(new goog.math.Rect(this.boundaryPos.x,this.draggerLimitTop,0,this.draggerLimitHeight)),goog.style.setPosition(this.getElement(),this.resizeePos.x,this.resizeePos.y+this.vertDraggerOffset))};
nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory=function(a){nrg.ui.ResizeDraggerTop.superClass_.getSlideTrajectory.call(this);return{start:new goog.math.Coordinate(this.handlePos.x,this.handlePos.y),end:"MIN"==a?new goog.math.Coordinate(this.handlePos.x,this.draggerLimitBottom):new goog.math.Coordinate(this.handlePos.x,this.draggerLimitTop)}};goog.exportSymbol("nrg.ui.ResizeDraggerTop.ID_PREFIX",nrg.ui.ResizeDraggerTop.ID_PREFIX);goog.exportSymbol("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",nrg.ui.ResizeDraggerTop.CSS_SUFFIX);
goog.exportSymbol("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits);goog.exportSymbol("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",nrg.ui.ResizeDraggerTop.prototype.resizeMethod);goog.exportSymbol("nrg.ui.ResizeDraggerTop.resizeMethod",nrg.ui.ResizeDraggerTop.resizeMethod);goog.exportSymbol("nrg.ui.ResizeDraggerTop.prototype.update",nrg.ui.ResizeDraggerTop.prototype.update);
goog.exportSymbol("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory);nrg.ui.ResizeDraggerTopRight=function(a){nrg.ui.ResizeDragger.call(this,"right",a)};goog.inherits(nrg.ui.ResizeDraggerTopRight,nrg.ui.ResizeDragger);goog.exportSymbol("nrg.ui.ResizeDraggerTopRight",nrg.ui.ResizeDraggerTopRight);nrg.ui.ResizeDraggerTopRight.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX={};
nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues=function(){nrg.ui.ResizeDraggerTopRight.superClass_.updateTrackingValues.call(this);this.Dragger.isDragging()||this.isAnimating||(nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits.bind(this)(),nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits.bind(this)())};
nrg.ui.ResizeDraggerTopRight.prototype.onResize=function(a){nrg.ui.ResizeDraggerTopRight.superClass_.onResize.call(this);nrg.ui.ResizeDraggerRight.prototype.resizeMethod.bind(this)();nrg.ui.ResizeDraggerTop.prototype.resizeMethod.bind(this)()};
nrg.ui.ResizeDraggerTopRight.prototype.update=function(a){this.Dragger.isDragging()||this.isAnimating||(nrg.ui.ResizeDraggerTopRight.superClass_.update.call(this,a),this.Dragger.setLimits(new goog.math.Rect(this.boundaryPos.x+this.horizDraggerOffset,this.boundaryPos.y+this.vertDraggerOffset,this.boundarySize.width,this.boundarySize.height)),goog.style.setPosition(this.getElement(),this.resizeePos.right+this.horizDraggerOffset,this.resizeePos.y+this.vertDraggerOffset))};
nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory=function(a){var b=new goog.math.Coordinate(this.handlePos.x,this.handlePos.y),c;"TOP_LEFT"==a?c=new goog.math.Coordinate(this.boundaryPos.x,this.boundaryPos.y):"TOP_RIGHT"==a?c=new goog.math.Coordinate(this.boundaryPos.x+this.boundarySize.width,this.boundaryPos.y):"BOTTOM_RIGHT"==a?c=new goog.math.Coordinate(this.boundaryPos.x+this.boundarySize.width,this.boundaryPos.y+this.boundarySize.height):"BOTTOM_LEFT"==a&&(c=new goog.math.Coordinate(this.boundaryPos.x,
this.boundaryPos.y+this.boundarySize.height));return{start:b,end:c}};goog.exportSymbol("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",nrg.ui.ResizeDraggerTopRight.ID_PREFIX);goog.exportSymbol("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues);goog.exportSymbol("nrg.ui.ResizeDraggerTopRight.prototype.onResize",nrg.ui.ResizeDraggerTopRight.prototype.onResize);
goog.exportSymbol("nrg.ui.ResizeDraggerTopRight.prototype.update",nrg.ui.ResizeDraggerTopRight.prototype.update);goog.exportSymbol("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory);nrg.ui.ResizeDraggerLeft=function(a){nrg.ui.ResizeDragger.call(this,"right",a)};goog.inherits(nrg.ui.ResizeDraggerLeft,nrg.ui.ResizeDragger);goog.exportSymbol("nrg.ui.ResizeDraggerLeft",nrg.ui.ResizeDraggerLeft);nrg.ui.ResizeDraggerLeft.ID_PREFIX="nrg.ui.ResizeDraggerLeft";nrg.ui.ResizeDraggerLeft.CSS_SUFFIX={};
nrg.ui.ResizeDraggerLeft.prototype.resizeMethod=function(){goog.style.setWidth(this.resizee,Math.min(Math.max(this.resizeeSize.width+(this.resizeePos.x-this.handlePos.x),this.minSize.width),this.boundarySize.width));goog.style.setPosition(this.getElement(),this.handlePos.x,this.resizeePos.y)};goog.exportSymbol("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",nrg.ui.ResizeDraggerLeft.prototype.resizeMethod);
nrg.ui.ResizeDraggerLeft.prototype.update=function(a){this.Dragger.isDragging()||this.isAnimating||(nrg.ui.ResizeDraggerLeft.superClass_.update.call(this,a),this.Dragger.setLimits(new goog.math.Rect(this.boundaryPos.x-this.handleSize.width,this.boundaryPos.y,this.boundarySize.width-this.minSize.width-this.handleSize.width,0)),goog.style.setPosition(this.getElement(),this.resizeePos.x-this.handleSize.width,this.resizeePos.y))};
nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory=function(a){nrg.ui.ResizeDraggerLeft.superClass_.getSlideTrajectory.call(this);return{start:new goog.math.Coordinate(this.handlePos.x,this.handlePos.y),end:"MIN"==a?new goog.math.Coordinate(this.boundaryPos.x+this.minSize.width,this.handlePos.y):new goog.math.Coordinate(this.boundaryPos.x+this.boundarySize.width-this.minSize.width,this.handlePos.y)}};goog.exportSymbol("nrg.ui.ResizeDraggerLeft.ID_PREFIX",nrg.ui.ResizeDraggerLeft.ID_PREFIX);
goog.exportSymbol("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",nrg.ui.ResizeDraggerLeft.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ResizeDraggerLeft.resizeMethod",nrg.ui.ResizeDraggerLeft.resizeMethod);goog.exportSymbol("nrg.ui.ResizeDraggerLeft.prototype.update",nrg.ui.ResizeDraggerLeft.prototype.update);goog.exportSymbol("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory);nrg.ui.Resizable=function(a,b){nrg.ui.Component.call(this);this.element_=goog.dom.$(a);this.ResizeDraggers_={};this.limits_=nrg.ui.Resizable.DEFAULT_LIMITS;this.minWidth_=nrg.ui.Resizable.DEFAULT_MIN_WIDTH;this.minHeight_=nrg.ui.Resizable.DEFAULT_MIN_HEIGHT;this.setResizeDirections(b||nrg.ui.Resizable.defaultDirections)};goog.inherits(nrg.ui.Resizable,nrg.ui.Component);goog.exportSymbol("nrg.ui.Resizable",nrg.ui.Resizable);nrg.ui.Resizable.EventType={RESIZE:"resize",RESIZE_START:"resize_start",RESIZE_END:"resize_end"};
nrg.ui.Resizable.ID_PREFIX="nrg.ui.Resizable";nrg.ui.Resizable.CSS_SUFFIX={BOUNDARY:"boundary"};nrg.ui.Resizable.DIRECTIONS="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" ");nrg.ui.Resizable.DEFAULT_DIRECTIONS=["RIGHT","BOTTOM"];nrg.ui.Resizable.DEFAULT_LIMITS=new goog.math.Rect(0,0,600,600);nrg.ui.Resizable.DEFAULT_MIN_HEIGHT=20;nrg.ui.Resizable.DEFAULT_MIN_WIDTH=20;nrg.ui.Resizable.boundThresholds_={TOP:4,LEFT:4,RIGHT:4,BOTTOM:4};
nrg.ui.Resizable.prototype.setBoundThreshold=function(a,b){this.checkValidDirection(a);if(0>b)throw Error("Threshold must be greater than zero!");this.boundThresholds_[a]=b};nrg.ui.Resizable.prototype.atLimits_={TOP:0,LEFT:0,RIGHT:0,BOTTOM:0};nrg.ui.Resizable.prototype.atMins_={WIDTH:0,HEIGHT:0};nrg.ui.Resizable.prototype.getResizeDraggerDirection_=function(a){for(direction in this.ResizeDraggers_)if(this.ResizeDraggers_[direction]===a)return direction};nrg.ui.Resizable.prototype.getHandle=function(a){return this.ResizeDraggers_[a].getHandle()};
nrg.ui.Resizable.prototype.getResizeDragger=function(a){return this.ResizeDraggers_[a]};nrg.ui.Resizable.prototype.getHandles=function(){var a=[];goog.array.forEach(goog.object.getValues(this.ResizeDraggers_),function(b){a.push(b.getHandle())});return a};nrg.ui.Resizable.prototype.getBoundaryElement=function(){return this.boundaryElt_};
nrg.ui.Resizable.prototype.setBoundaryElement=function(a){this.boundaryElt_=a;if(this.boundaryElt_.parentNode!==this.element_.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};nrg.ui.Resizable.prototype.setMinHeight=function(a){this.minHeight_=a};nrg.ui.Resizable.prototype.setMinWidth=function(a){this.minWidth_=a};nrg.ui.Resizable.prototype.getMinHeight=function(){return this.minHeight_};nrg.ui.Resizable.prototype.getMinWidth=function(){return this.minWidth_};
nrg.ui.Resizable.prototype.setResizeDirections=function(a){a=a||"DEFAULT";goog.isString(a)&&(a="ALL"==a.toUpperCase()?nrg.ui.Resizable.DIRECTIONS:"DEFAULT"==a.toUpperCase()?nrg.ui.Resizable.DEFAULT_DIRECTIONS:[a]);this.disposeDraggers_();goog.array.forEach(a,function(a,c){if(!goog.isString(a))throw Error("String required!");if(!goog.array.contains(nrg.ui.Resizable.DIRECTIONS,a))throw Error("Invalid direction: ",a);this.addResizeDirection(a)}.bind(this))};
nrg.ui.Resizable.prototype.checkDirectionValid=function(a){if(!goog.array.contains(nrg.ui.Resizable.DIRECTIONS,a))throw Error("Invalid draggerDir '"+a);};nrg.ui.Resizable.prototype.hasDragger=function(a){this.checkDirectionValid(a);if(!this.ResizeDraggers_[a])throw Error("No ResizeDragger for "+a);};nrg.ui.Resizable.prototype.slideToLimits=function(a,b,c,d){a=a.toUpperCase();this.checkDirectionValid(a);this.update();this.ResizeDraggers_[a].slideToLimits(b,c,d)};
nrg.ui.Resizable.createResizeDragger=function(a,b){switch(a){case "TOP":return new nrg.ui.ResizeDraggerTop(b);case "BOTTOM":return new nrg.ui.ResizeDraggerBottom(b);case "LEFT":return new nrg.ui.ResizeDraggerLeft(b);case "RIGHT":return new nrg.ui.ResizeDraggerRight(b);case "TOP_RIGHT":return new nrg.ui.ResizeDraggerTopRight(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");
break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}};
nrg.ui.Resizable.prototype.addResizeDirection=function(a){if(goog.object.containsKey(this.ResizeDraggers_,a))throw Error("Resize direction "+a+" already in use.");this.ResizeDraggers_[a]=nrg.ui.Resizable.createResizeDragger(a,this.element_);goog.events.listen(this.ResizeDraggers_[a],nrg.ui.ResizeDragger.EventType.RESIZE_START,this.onResizeStart_.bind(this));goog.events.listen(this.ResizeDraggers_[a],nrg.ui.ResizeDragger.EventType.RESIZE,this.onResize_.bind(this));goog.events.listen(this.ResizeDraggers_[a],
nrg.ui.ResizeDragger.EventType.RESIZE_END,this.onResizeEnd_.bind(this));this.update()};
nrg.ui.Resizable.prototype.update=function(){if(goog.isDefAndNotNull(this.boundaryElt_)){var a=new goog.math.Size(this.minWidth_,this.minHeight_);goog.object.forEach(this.ResizeDraggers_,function(b,c){this.boundaryElt_&&this.boundaryElt_.parentNode&&goog.dom.append(this.boundaryElt_.parentNode,b.getHandle());b.getBoundaryElement()!==this.boundaryElt_&&b.setBoundaryElement(this.boundaryElt_);b.setMinSize(a);b.updateTrackingValues();b.update()}.bind(this))}};
nrg.ui.Resizable.prototype.getDragParams_=function(a){this.currDragger_=a.currentTarget;this.currDragDirection_=this.getDraggerDirection_(this.currDragger_);this.currDragEltSize_=goog.style.getSize(this.currDragger_.handle);this.currDragEltPos_=goog.style.getPosition(this.currDragger_.handle);a=this.continuousResize_?this.element_:this.ghostEl_;this.eltSize_=goog.style.getSize(a);this.eltPos_=goog.style.getPosition(a);this.startPos_=goog.style.getPosition(a);this.startSize_=goog.style.getSize(a)};
nrg.ui.Resizable.prototype.onResizeStart_=function(a){this.dispatchEvent({type:nrg.ui.Resizable.EventType.RESIZE_START})};nrg.ui.Resizable.prototype.onResize_=function(a){this.dispatchEvent({type:nrg.ui.Resizable.EventType.RESIZE,resizeePosition:a.resizeePos,resizeeSize:a.resizeeSize,boundaryPosition:a.boundaryPos,boundarySize:a.boundarySize})};nrg.ui.Resizable.prototype.onResizeEnd_=function(a){this.update();this.dispatchEvent({type:nrg.ui.Resizable.EventType.RESIZE_END})};
nrg.ui.Resizable.prototype.disposeDraggers_=function(){goog.object.forEach(this.ResizeDraggers_,function(a,b){a&&(goog.events.removeAll(a),a.dispose())});goog.object.clear(this.ResizeDraggers_)};nrg.ui.Resizable.prototype.disposeInternal=function(){nrg.ui.Resizable.superClass_.disposeInternal.call(this);this.disposeDraggers_();delete this.ResizeDraggers_;this.boundaryElt_&&(goog.dom.removeNode(this.boundaryElt_.parentNode,this.containment),delete this.boundaryElt_)};
goog.exportSymbol("nrg.ui.Resizable.EventType",nrg.ui.Resizable.EventType);goog.exportSymbol("nrg.ui.Resizable.ID_PREFIX",nrg.ui.Resizable.ID_PREFIX);goog.exportSymbol("nrg.ui.Resizable.CSS_SUFFIX",nrg.ui.Resizable.CSS_SUFFIX);goog.exportSymbol("nrg.ui.Resizable.DIRECTIONS",nrg.ui.Resizable.DIRECTIONS);goog.exportSymbol("nrg.ui.Resizable.DEFAULT_DIRECTIONS",nrg.ui.Resizable.DEFAULT_DIRECTIONS);goog.exportSymbol("nrg.ui.Resizable.DEFAULT_LIMITS",nrg.ui.Resizable.DEFAULT_LIMITS);
goog.exportSymbol("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",nrg.ui.Resizable.DEFAULT_MIN_HEIGHT);goog.exportSymbol("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",nrg.ui.Resizable.DEFAULT_MIN_WIDTH);goog.exportSymbol("nrg.ui.Resizable.createResizeDragger",nrg.ui.Resizable.createResizeDragger);goog.exportSymbol("nrg.ui.Resizable.prototype.setBoundThreshold",nrg.ui.Resizable.prototype.setBoundThreshold);goog.exportSymbol("nrg.ui.Resizable.prototype.getHandle",nrg.ui.Resizable.prototype.getHandle);
goog.exportSymbol("nrg.ui.Resizable.prototype.getResizeDragger",nrg.ui.Resizable.prototype.getResizeDragger);goog.exportSymbol("nrg.ui.Resizable.prototype.getHandles",nrg.ui.Resizable.prototype.getHandles);goog.exportSymbol("nrg.ui.Resizable.prototype.getBoundaryElement",nrg.ui.Resizable.prototype.getBoundaryElement);goog.exportSymbol("nrg.ui.Resizable.prototype.setBoundaryElement",nrg.ui.Resizable.prototype.setBoundaryElement);goog.exportSymbol("nrg.ui.Resizable.prototype.setMinHeight",nrg.ui.Resizable.prototype.setMinHeight);
goog.exportSymbol("nrg.ui.Resizable.prototype.setMinWidth",nrg.ui.Resizable.prototype.setMinWidth);goog.exportSymbol("nrg.ui.Resizable.prototype.getMinHeight",nrg.ui.Resizable.prototype.getMinHeight);goog.exportSymbol("nrg.ui.Resizable.prototype.getMinWidth",nrg.ui.Resizable.prototype.getMinWidth);goog.exportSymbol("nrg.ui.Resizable.prototype.setResizeDirections",nrg.ui.Resizable.prototype.setResizeDirections);goog.exportSymbol("nrg.ui.Resizable.prototype.checkDirectionValid",nrg.ui.Resizable.prototype.checkDirectionValid);
goog.exportSymbol("nrg.ui.Resizable.prototype.hasDragger",nrg.ui.Resizable.prototype.hasDragger);goog.exportSymbol("nrg.ui.Resizable.prototype.slideToLimits",nrg.ui.Resizable.prototype.slideToLimits);goog.exportSymbol("nrg.ui.Resizable.prototype.addResizeDirection",nrg.ui.Resizable.prototype.addResizeDirection);goog.exportSymbol("nrg.ui.Resizable.prototype.update",nrg.ui.Resizable.prototype.update);goog.exportSymbol("nrg.ui.Resizable.prototype.disposeInternal",nrg.ui.Resizable.prototype.disposeInternal);xiv.ui.layouts.LayoutFrame=function(a,b){nrg.ui.Component.call(this);this.title_=a};goog.inherits(xiv.ui.layouts.LayoutFrame,nrg.ui.Component);goog.exportSymbol("xiv.ui.layouts.LayoutFrame",xiv.ui.layouts.LayoutFrame);xiv.ui.layouts.LayoutFrame.EventType={};xiv.ui.layouts.LayoutFrame.ID_PREFIX="xiv.ui.layouts.LayoutFrame";xiv.ui.layouts.LayoutFrame.CSS_SUFFIX={};xiv.ui.layouts.LayoutFrame.prototype.getTitle=function(){return this.title_};xiv.ui.layouts.LayoutFrame.prototype.Resizable_=null;
xiv.ui.layouts.LayoutFrame.prototype.resizeBoundary_=null;xiv.ui.layouts.LayoutFrame.prototype.isResizable_=!1;xiv.ui.layouts.LayoutFrame.prototype.getResizable=function(){return this.Resizeable_};xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections=function(a){this.Resizeable_=this.Resizeable_?this.Resizeable_:new nrg.ui.Resizable(this.getElement());this.Resizeable_.setResizeDirections(a)};
xiv.ui.layouts.LayoutFrame.prototype.disposeInternal=function(){xiv.ui.layouts.LayoutFrame.superClass_.disposeInternal.call(this);delete this.title_};goog.exportSymbol("xiv.ui.layouts.LayoutFrame.EventType",xiv.ui.layouts.LayoutFrame.EventType);goog.exportSymbol("xiv.ui.layouts.LayoutFrame.ID_PREFIX",xiv.ui.layouts.LayoutFrame.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",xiv.ui.layouts.LayoutFrame.CSS_SUFFIX);
goog.exportSymbol("xiv.ui.layouts.LayoutFrame.prototype.getTitle",xiv.ui.layouts.LayoutFrame.prototype.getTitle);goog.exportSymbol("xiv.ui.layouts.LayoutFrame.prototype.getResizable",xiv.ui.layouts.LayoutFrame.prototype.getResizable);goog.exportSymbol("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections);goog.exportSymbol("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",xiv.ui.layouts.LayoutFrame.prototype.disposeInternal);xiv.ui.layouts.Layout=function(){if(!this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");nrg.ui.Component.call(this);this.LayoutFrames={}};goog.inherits(xiv.ui.layouts.Layout,nrg.ui.Component);goog.exportSymbol("xiv.ui.layouts.Layout",xiv.ui.layouts.Layout);xiv.ui.layouts.Layout.EventType={RESIZE:goog.events.getUniqueId("resize")};
xiv.ui.layouts.Layout.INTERACTORS={SLIDER:"Slider_"+goog.string.createUniqueString(),FRAME_DISPLAY:"FrameDisplay_"+goog.string.createUniqueString(),ZOOM_DISPLAY:"ZoomDisplay_"+goog.string.createUniqueString(),CROSSHAIRS:"Crosshairs_"+goog.string.createUniqueString()};xiv.ui.layouts.Layout.ID_PREFIX="xiv.ui.layouts.Layout";xiv.ui.layouts.Layout.CSS_SUFFIX={};xiv.ui.layouts.Layout.prototype.minLayoutFrameWidth_=20;xiv.ui.layouts.Layout.prototype.minLayoutFrameHeight_=20;
xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight=function(a){this.minLayoutFrameHeight_=a};xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth=function(a){this.minLayoutFrameWidth_=a};xiv.ui.layouts.Layout.prototype.getLayoutFrames=function(){return this.LayoutFrames};xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle=function(a){return this.LayoutFrames[a]};
xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors=function(a){window.console.log(a,this.LayoutFrames[a]);var b={};goog.object.forEach(xiv.ui.layouts.Layout.INTERACTORS,function(c){b[c]=this.LayoutFrames[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};xiv.ui.layouts.Layout.prototype.getTitle=function(){return this.constructor.TITLE};
xiv.ui.layouts.Layout.prototype.addLayoutFrame=function(a){this.LayoutFrames=this.LayoutFrames?this.LayoutFrames:{};this.LayoutFrames[a.getTitle()]=a};xiv.ui.layouts.Layout.prototype.dispatchResize=function(){this.dispatchEvent({type:xiv.ui.layouts.Layout.EventType.RESIZE})};
xiv.ui.layouts.Layout.prototype.removeAllInteractors=function(){goog.object.forEach(this.getInteractors(),function(a,b){goog.isDefAndNotNull(a.SLIDER)&&(a.SLIDER.dispose(),delete a.SLIDER);goog.isDefAndNotNull(a.CROSSHAIRS)&&(a.CROSSHAIRS.dispose(),delete a.CROSSHAIRS);goog.isDefAndNotNull(a.FRAME_DISPLAY)&&(a.FRAME_DISPLAY.dispose(),delete a.FRAME_DISPLAY);goog.isDefAndNotNull(a.ZOOM_DISPLAY)&&(a.ZOOM_DISPLAY.dispose(),delete a.ZOOM_DISPLAY)})};
xiv.ui.layouts.Layout.prototype.updateInteractors=function(){goog.object.forEach(this.getInteractors(),function(a,b){goog.isDefAndNotNull(a.SLIDER)&&(a.SLIDER.updateStyle(),a.SLIDER.setValue(a.SLIDER.getValue()));goog.isDefAndNotNull(a.CROSSHAIRS)&&a.CROSSHAIRS.updateStyle();goog.isDefAndNotNull(a.FRAME_DISPLAY)&&a.FRAME_DISPLAY.updateStyle();goog.isDefAndNotNull(a.ZOOM_DISPLAY)&&a.ZOOM_DISPLAY.updateStyle()})};
xiv.ui.layouts.Layout.prototype.updateStyle=function(){xiv.ui.layouts.Layout.superClass_.updateStyle.call(this);this.dispatchResize()};xiv.ui.layouts.Layout.prototype.disposeInternal=function(){xiv.ui.layouts.Layout.superClass_.disposeInternal.call(this);delete this.minLayoutFrameHeight_;delete this.minLayoutFrameWidth_;this.disposeComponentMap(this.LayoutFrames_);delete this.LayoutFrames_};goog.exportSymbol("xiv.ui.layouts.Layout.EventType",xiv.ui.layouts.Layout.EventType);
goog.exportSymbol("xiv.ui.layouts.Layout.INTERACTORS",xiv.ui.layouts.Layout.INTERACTORS);goog.exportSymbol("xiv.ui.layouts.Layout.ID_PREFIX",xiv.ui.layouts.Layout.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.Layout.CSS_SUFFIX",xiv.ui.layouts.Layout.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth);
goog.exportSymbol("xiv.ui.layouts.Layout.prototype.getLayoutFrames",xiv.ui.layouts.Layout.prototype.getLayoutFrames);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.getTitle",xiv.ui.layouts.Layout.prototype.getTitle);
goog.exportSymbol("xiv.ui.layouts.Layout.prototype.addLayoutFrame",xiv.ui.layouts.Layout.prototype.addLayoutFrame);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.dispatchResize",xiv.ui.layouts.Layout.prototype.dispatchResize);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.removeAllInteractors",xiv.ui.layouts.Layout.prototype.removeAllInteractors);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.updateInteractors",xiv.ui.layouts.Layout.prototype.updateInteractors);
goog.exportSymbol("xiv.ui.layouts.Layout.prototype.updateStyle",xiv.ui.layouts.Layout.prototype.updateStyle);goog.exportSymbol("xiv.ui.layouts.Layout.prototype.disposeInternal",xiv.ui.layouts.Layout.prototype.disposeInternal);goog.cssom={};goog.cssom.CssRuleType={STYLE:1,IMPORT:3,MEDIA:4,FONT_FACE:5,PAGE:6,NAMESPACE:7};goog.cssom.getAllCssText=function(a){return goog.cssom.getAllCss_(a||document.styleSheets,!0)};goog.cssom.getAllCssStyleRules=function(a){return goog.cssom.getAllCss_(a||document.styleSheets,!1)};goog.cssom.getCssRulesFromStyleSheet=function(a){var b=null;try{b=a.cssRules||a.rules}catch(c){if(15==c.code)throw c.styleSheet=a,c;}return b};
goog.cssom.getAllCssStyleSheets=function(a,b){var c=[],d=a||document.styleSheets,e=goog.isDef(b)?b:!1;if(d.imports&&d.imports.length)for(var f=0,g=d.imports.length;f<g;f++)goog.array.extend(c,goog.cssom.getAllCssStyleSheets(d.imports[f]));else if(d.length)for(f=0,g=d.length;f<g;f++)goog.array.extend(c,goog.cssom.getAllCssStyleSheets(d[f]));else{var h=goog.cssom.getCssRulesFromStyleSheet(d);if(h&&h.length)for(var f=0,g=h.length,k;f<g;f++)k=h[f],k.styleSheet&&goog.array.extend(c,goog.cssom.getAllCssStyleSheets(k.styleSheet))}!(d.type||
d.rules||d.cssRules)||d.disabled&&!e||c.push(d);return c};goog.cssom.getCssTextFromCssRule=function(a){var b="";a.cssText?b=a.cssText:a.style&&a.style.cssText&&a.selectorText&&(b=a.style.cssText.replace(/\s*-closure-parent-stylesheet:\s*\[object\];?\s*/gi,"").replace(/\s*-closure-rule-index:\s*[\d]+;?\s*/gi,""),b=a.selectorText+" { "+b+" }");return b};
goog.cssom.getCssRuleIndexInParentStyleSheet=function(a,b){if(a.style&&a.style["-closure-rule-index"])return a.style["-closure-rule-index"];var c=b||goog.cssom.getParentStyleSheet(a);if(!c)throw Error("Cannot find a parentStyleSheet.");if((c=goog.cssom.getCssRulesFromStyleSheet(c))&&c.length)for(var d=0,e=c.length,f;d<e;d++)if(f=c[d],f==a)return d;return-1};goog.cssom.getParentStyleSheet=function(a){return a.parentStyleSheet||a.style&&a.style["-closure-parent-stylesheet"]};
goog.cssom.replaceCssRule=function(a,b,c,d){if(c=c||goog.cssom.getParentStyleSheet(a))if(a=0<=d?d:goog.cssom.getCssRuleIndexInParentStyleSheet(a,c),0<=a)goog.cssom.removeCssRule(c,a),goog.cssom.addCssRule(c,b,a);else throw Error("Cannot proceed without the index of the cssRule.");else throw Error("Cannot proceed without the parentStyleSheet.");};
goog.cssom.addCssRule=function(a,b,c){if(0>c||void 0==c)c=goog.cssom.getCssRulesFromStyleSheet(a).length;if(a.insertRule)a.insertRule(b,c);else if(b=/^([^\{]+)\{([^\{]+)\}/.exec(b),3==b.length)a.addRule(b[1],b[2],c);else throw Error("Your CSSRule appears to be ill-formatted.");};goog.cssom.removeCssRule=function(a,b){a.deleteRule?a.deleteRule(b):a.removeRule(b)};
goog.cssom.addCssText=function(a,b){var c=b?b.getDocument():goog.dom.getDocument(),d=c.createElement("style");d.type="text/css";c.getElementsByTagName("head")[0].appendChild(d);d.styleSheet?d.styleSheet.cssText=a:(c=c.createTextNode(a),d.appendChild(c));return d};goog.cssom.getFileNameFromStyleSheet=function(a){return(a=a.href)?/([^\/\?]+)[^\/]*$/.exec(a)[1]:null};
goog.cssom.getAllCss_=function(a,b){for(var c=[],d=goog.cssom.getAllCssStyleSheets(a),e=0;a=d[e];e++){var f=goog.cssom.getCssRulesFromStyleSheet(a);if(f&&f.length){if(!b)var g=0;for(var h=0,k=f.length,l;h<k;h++)l=f[h],b&&!l.href?(l=goog.cssom.getCssTextFromCssRule(l),c.push(l)):l.href||(l.style&&(l.parentStyleSheet||(l.style["-closure-parent-stylesheet"]=a),l.style["-closure-rule-index"]=g),c.push(l)),b||g++}}return b?c.join(" "):c};xiv.ui.layouts.interactors.ZoomDisplay=function(){xiv.ui.layouts.interactors.InputController.call(this)};goog.inherits(xiv.ui.layouts.interactors.ZoomDisplay,xiv.ui.layouts.interactors.InputController);goog.exportSymbol("xiv.ui.layouts.interactors.ZoomDisplay",xiv.ui.layouts.interactors.ZoomDisplay);xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";
xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue=function(){this.displayElt_.innerHTML="Zoom level:&nbsp"+this.inputBox_.value+"%"};goog.exportSymbol("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue);goog.ui.Slider=function(a,b){goog.ui.SliderBase.call(this,a,b);this.rangeModel.setExtent(0)};goog.inherits(goog.ui.Slider,goog.ui.SliderBase);goog.ui.Slider.Orientation=goog.ui.SliderBase.Orientation;goog.ui.Slider.CSS_CLASS_PREFIX="goog-slider";goog.ui.Slider.THUMB_CSS_CLASS=goog.ui.Slider.CSS_CLASS_PREFIX+"-thumb";goog.ui.Slider.prototype.getCssClass=function(a){return a==goog.ui.SliderBase.Orientation.VERTICAL?goog.ui.Slider.CSS_CLASS_PREFIX+"-vertical":goog.ui.Slider.CSS_CLASS_PREFIX+"-horizontal"};
goog.ui.Slider.prototype.createThumbs=function(){var a=this.getElement(),b=goog.dom.getElementsByTagNameAndClass(null,goog.ui.Slider.THUMB_CSS_CLASS,a)[0];b||(b=this.createThumb_(),a.appendChild(b));this.valueThumb=this.extentThumb=b};goog.ui.Slider.prototype.createThumb_=function(){var a=this.getDomHelper().createDom("div",goog.ui.Slider.THUMB_CSS_CLASS);goog.a11y.aria.setRole(a,goog.a11y.aria.Role.BUTTON);return a};nrg.ui.Slider=function(a){goog.ui.Slider.call(this);this.constructor.CSS_CLASS_PREFIX=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.ELEMENT_CLASS=this.constructor.CSS_CLASS_PREFIX;nrg.ui.Component.prototype.createCssMap.bind(this)();goog.isDefAndNotNull(a)&&this.setOrientation(a)};goog.inherits(nrg.ui.Slider,goog.ui.Slider);goog.exportSymbol("nrg.ui.Slider",nrg.ui.Slider);nrg.ui.Slider.EventType={SLIDE:goog.events.getUniqueId("slide"),MOUSEWHEEL:goog.events.getUniqueId("mousewheel")};
nrg.ui.Slider.ID_PREFIX="nrg.ui.Slider";nrg.ui.Slider.CSS_SUFFIX={TRACK:"track",TRACK_HOVERED:"track-hovered",THUMB:"thumb",THUMB_HOVERED:"thumb-hovered"};nrg.ui.Slider.prototype.isSliding_=!1;nrg.ui.Slider.prototype.suspendSlideEvent_=!1;nrg.ui.Slider.prototype.suspendSlideEvent=function(a){this.suspendSlideEvent_=a};nrg.ui.Slider.prototype.suspendChangeEvent=function(a){this.suspendSlideEvent_=a};
nrg.ui.Slider.prototype.render=function(a){this.element_=goog.dom.createDom("div",{id:nrg.ui.Slider.ID_PREFIX+"_Widget_"+goog.string.createUniqueString()});this.decorate(this.element_);a=goog.isDefAndNotNull(a)?a:document.body;goog.dom.appendChild(a,this.element_);this.track_=goog.dom.createDom("div",{id:nrg.ui.Slider.ID_PREFIX+"_Track_"+goog.string.createUniqueString()});this.element_.appendChild(this.track_);this.thumb_=goog.dom.getElementByClass("goog-slider-thumb",this.element_);this.initEvents_();
this.setOrientation(this.getOrientation().toLowerCase())};nrg.ui.Slider.prototype.getElement=function(){return this.element_};nrg.ui.Slider.prototype.getTrack=function(){return this.track_};nrg.ui.Slider.prototype.getThumb=function(){return this.thumb_};
nrg.ui.Slider.prototype.bindToMouseWheel=function(a){goog.isDefAndNotNull(this.MouseWheelHandlers_)||(this.MouseWheelHandlers_={});if(!goog.isDefAndNotNull(this.MouseWheelHandlers_[a.id])){var b=new goog.events.MouseWheelHandler(a);b.addEventListener(goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.onMouseWheelScroll_,!1,this);this.MouseWheelHandlers_[a.id]=b}};
nrg.ui.Slider.prototype.bindToArrowKeys=function(a){goog.isDefAndNotNull(this.KeyHandlers_)||(this.KeyHandlers_={});if(!goog.isDefAndNotNull(this.KeyHandlers_[a.id])){var b=new goog.events.KeyHandler(a);goog.events.listen(b,goog.events.KeyHandler.EventType.KEY,this.onKey_.bind(this));this.KeyHandlers_[a.id]=b}};nrg.ui.Slider.prototype.onKey_=function(a){window.console.log("KEY",a)};
nrg.ui.Slider.prototype.updateStyle=function(){var a=this.getValue(),a=this.getThumbCoordinateForValue(a);"horizontal"==this.getOrientation().toLowerCase()?this.thumb_.style.left=a.x.toString()+"px":"vertical"==this.getOrientation().toLowerCase()&&(this.thumb_.style.left=a.y.toString()+"px")};nrg.ui.Slider.prototype.setOrientation=function(a){nrg.ui.Slider.superClass_.setOrientation.call(this,a);this.isInDocument()&&this.setCssClasses_(this.getOrientation().toLowerCase())};
nrg.ui.Slider.prototype.setCssClasses_=function(a){function b(b,d){goog.dom.classes.addRemove(b,[nrg.string.makeCssName(d,"horizontal"),nrg.string.makeCssName(d,"vertical")],[d,nrg.string.makeCssName(d,a)])}b(this.element_,this.constructor.ELEMENT_CLASS);b(this.track_,nrg.ui.Slider.CSS.TRACK);b(this.thumb_,nrg.ui.Slider.CSS.THUMB)};nrg.ui.Slider.prototype.useDeltaToScroll_=!1;nrg.ui.Slider.prototype.deltaMultiplyer_=1;
nrg.ui.Slider.prototype.setUseDeltaToScroll=function(a,b){this.useDeltaToScroll_=a;goog.isNumber(b)&&(this.deltaMultiplyer_=b)};nrg.ui.Slider.prototype.onMouseWheelScroll_=function(a){var b=Math.abs(a.deltaY)<Math.abs(a.deltaX)?a.deltaX:a.deltaY;this.useDeltaToScroll_?this.setValue(Math.round(this.getValue()-b*this.deltaMultiplyer_)):this.setValue(Math.round(this.getValue()-(0>b?-1:1)));this.dispatchEvent({type:nrg.ui.Slider.EventType.MOUSEWHEEL});a.preventDefault()};
nrg.ui.Slider.prototype.addThumbHoverClass=function(a){this.thumbHoverClasses_=this.thumbHoverClasses_?this.thumbHoverClasses_:[];this.thumbHoverClasses_.push(a);this.removeThumbHoverClasses_()};nrg.ui.Slider.prototype.addTrackHoverClass=function(a){this.trackHoverClasses_=this.trackHoverClasses_?this.trackHoverClasses_:[];this.trackHoverClasses_.push(a);this.removeTrackHoverClasses_()};
nrg.ui.Slider.prototype.initEvents_=function(){goog.events.listen(this,goog.ui.Component.EventType.CHANGE,this.onChange_.bind(this));goog.events.listen(this.thumb_,goog.events.EventType.MOUSEOVER,this.onThumbMouseOver_.bind(this));goog.events.listen(this.thumb_,goog.events.EventType.MOUSEOUT,this.onThumbMouseOut_.bind(this));goog.events.listen(this.track_,goog.events.EventType.MOUSEOVER,this.onTrackMouseOver_.bind(this));goog.events.listen(this.track_,goog.events.EventType.MOUSEOUT,this.onTrackMouseOut_.bind(this));
goog.events.listen(this,goog.ui.SliderBase.EventType.DRAG_START,this.onThumbnailDragStart_.bind(this));goog.events.listen(this,goog.ui.SliderBase.EventType.DRAG_END,this.onThumbnailDragEnd_.bind(this))};
nrg.ui.Slider.prototype.onChange_=function(a){a.stopPropagation();this.isSliding_&&(this.addThumbHoverClasses_(),this.addTrackHoverClasses_());this.suspendSlideEvent_||this.dispatchEvent({type:nrg.ui.Slider.EventType.SLIDE,value:this.getValue(),minimum:this.getMinimum(),maximum:this.getMaximum()});this.suspendSlideEvent_=!1};
nrg.ui.Slider.prototype.addThumbHoverClasses_=function(a){goog.dom.classes.add(this.thumb_,nrg.ui.Slider.CSS.THUMB_HOVERED);goog.isDefAndNotNull(this.thumbHoverClasses_)&&goog.array.forEach(this.thumbHoverClasses_,function(a){goog.dom.classes.add(this.thumb_,a)}.bind(this))};
nrg.ui.Slider.prototype.addTrackHoverClasses_=function(a){goog.dom.classes.add(this.track_,nrg.ui.Slider.CSS.TRACK_HOVERED);goog.isDefAndNotNull(this.trackHoverClasses_)&&goog.array.forEach(this.trackHoverClasses_,function(a){goog.dom.classes.add(this.track_,a)}.bind(this))};
nrg.ui.Slider.prototype.removeThumbHoverClasses_=function(a){goog.dom.classes.remove(this.thumb_,nrg.ui.Slider.CSS.THUMB_HOVERED);goog.isDefAndNotNull(this.thumbHoverClasses_)&&goog.array.forEach(this.thumbHoverClasses_,function(a){goog.dom.classes.remove(this.thumb_,a)}.bind(this))};
nrg.ui.Slider.prototype.removeTrackHoverClasses_=function(a){goog.dom.classes.remove(this.track_,nrg.ui.Slider.CSS.TRACK_HOVERED);goog.isDefAndNotNull(this.trackHoverClasses_)&&goog.array.forEach(this.trackHoverClasses_,function(a){goog.dom.classes.remove(this.track_,a)}.bind(this))};nrg.ui.Slider.prototype.onThumbMouseOver_=function(a){a.stopPropagation();this.addThumbHoverClasses_();this.addTrackHoverClasses_()};nrg.ui.Slider.prototype.onTrackMouseOver_=function(a){this.addTrackHoverClasses_()};
nrg.ui.Slider.prototype.onThumbMouseOut_=function(a){this.isSliding_||(this.removeThumbHoverClasses_(),this.removeTrackHoverClasses_())};nrg.ui.Slider.prototype.onTrackMouseOut_=function(a){this.isSliding_||this.removeTrackHoverClasses_()};nrg.ui.Slider.prototype.onThumbnailDragStart_=function(a){this.isSliding_=!0};nrg.ui.Slider.prototype.onThumbnailDragEnd_=function(a){this.isSliding_=!1;this.removeThumbHoverClasses_();this.removeTrackHoverClasses_()};
nrg.ui.Slider.prototype.disposeInternal=function(){nrg.ui.Slider.superClass_.disposeInternal.call(this);delete this.suspendSlideEvent_;goog.isDefAndNotNull(this.element_)&&(goog.events.removeAll(this),goog.dom.removeNode(this.element_),delete this.element_);goog.isDefAndNotNull(this.thumb_)&&(goog.events.removeAll(this.thumb_),goog.dom.removeNode(this.thumb_),delete this.thumb_);goog.isDefAndNotNull(this.track_)&&(goog.events.removeAll(this.track_),goog.dom.removeNode(this.track_),delete this.track_);
goog.isDefAndNotNull(this.KeyHandlers_)&&(goog.object.forEach(this.KeyHandlers_,function(a){goog.events.removeAll(a);a.dispose()}),goog.object.clear(this.KeyHandlers_),delete this.KeyHandlers_);goog.isDefAndNotNull(this.MouseWheelHandlers_)&&(goog.object.forEach(this.MouseWheelHandlers_,function(a){goog.events.removeAll(a);a.dispose()}),goog.object.clear(this.MouseWheelHandlers_),delete this.MouseWheelHandlers_);goog.isDefAndNotNull(this.thumbHoverClasses_)&&(goog.array.clear(this.thumbHoverClasses_),
delete this.thumbHoverClasses_);goog.isDefAndNotNull(this.trackHoverClasses_)&&(goog.array.clear(this.trackHoverClasses_),delete this.trackHoverClasses_);delete this.useDeltaToScroll_;delete this.deltaMultiplyer_;delete this.isSliding_};goog.exportSymbol("nrg.ui.Slider.EventType",nrg.ui.Slider.EventType);goog.exportSymbol("nrg.ui.Slider.ID_PREFIX",nrg.ui.Slider.ID_PREFIX);goog.exportSymbol("nrg.ui.Slider.CSS_SUFFIX",nrg.ui.Slider.CSS_SUFFIX);
goog.exportSymbol("nrg.ui.Slider.prototype.suspendSlideEvent",nrg.ui.Slider.prototype.suspendSlideEvent);goog.exportSymbol("nrg.ui.Slider.prototype.suspendChangeEvent",nrg.ui.Slider.prototype.suspendChangeEvent);goog.exportSymbol("nrg.ui.Slider.prototype.render",nrg.ui.Slider.prototype.render);goog.exportSymbol("nrg.ui.Slider.prototype.getElement",nrg.ui.Slider.prototype.getElement);goog.exportSymbol("nrg.ui.Slider.prototype.getTrack",nrg.ui.Slider.prototype.getTrack);
goog.exportSymbol("nrg.ui.Slider.prototype.getThumb",nrg.ui.Slider.prototype.getThumb);goog.exportSymbol("nrg.ui.Slider.prototype.bindToMouseWheel",nrg.ui.Slider.prototype.bindToMouseWheel);goog.exportSymbol("nrg.ui.Slider.prototype.bindToArrowKeys",nrg.ui.Slider.prototype.bindToArrowKeys);goog.exportSymbol("nrg.ui.Slider.prototype.updateStyle",nrg.ui.Slider.prototype.updateStyle);goog.exportSymbol("nrg.ui.Slider.prototype.setOrientation",nrg.ui.Slider.prototype.setOrientation);
goog.exportSymbol("nrg.ui.Slider.prototype.setUseDeltaToScroll",nrg.ui.Slider.prototype.setUseDeltaToScroll);goog.exportSymbol("nrg.ui.Slider.prototype.addThumbHoverClass",nrg.ui.Slider.prototype.addThumbHoverClass);goog.exportSymbol("nrg.ui.Slider.prototype.addTrackHoverClass",nrg.ui.Slider.prototype.addTrackHoverClass);goog.exportSymbol("nrg.ui.Slider.prototype.disposeInternal",nrg.ui.Slider.prototype.disposeInternal);xiv.ui.layouts.interactors.Slider=function(){nrg.ui.Slider.call(this)};goog.inherits(xiv.ui.layouts.interactors.Slider,nrg.ui.Slider);goog.exportSymbol("xiv.ui.layouts.interactors.Slider",xiv.ui.layouts.interactors.Slider);xiv.ui.layouts.interactors.Slider.EventType={};xiv.ui.layouts.interactors.Slider.ID_PREFIX="xiv.ui.layouts.interactors.Slider";xiv.ui.layouts.interactors.Slider.CSS_SUFFIX={};xiv.ui.layouts.interactors.Slider.prototype.render=function(a){};
xiv.ui.layouts.interactors.Slider.prototype.disposeInternal=function(){xiv.ui.layouts.interactors.Slider.superClass_.disposeInternal.call(this)};goog.exportSymbol("xiv.ui.layouts.interactors.Slider.EventType",xiv.ui.layouts.interactors.Slider.EventType);goog.exportSymbol("xiv.ui.layouts.interactors.Slider.ID_PREFIX",xiv.ui.layouts.interactors.Slider.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",xiv.ui.layouts.interactors.Slider.CSS_SUFFIX);
goog.exportSymbol("xiv.ui.layouts.interactors.Slider.prototype.render",xiv.ui.layouts.interactors.Slider.prototype.render);goog.exportSymbol("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",xiv.ui.layouts.interactors.Slider.prototype.disposeInternal);xiv.ui.layouts.interactors.Crosshairs=function(){nrg.ui.Component.call(this)};goog.inherits(xiv.ui.layouts.interactors.Crosshairs,nrg.ui.Component);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs",xiv.ui.layouts.interactors.Crosshairs);xiv.ui.layouts.interactors.Crosshairs.EventType={};xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX={HORIZONTAL:"horizontal",VERTICAL:"vertical"};
xiv.ui.layouts.interactors.Crosshairs.prototype.vertical=null;xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal=null;xiv.ui.layouts.interactors.Crosshairs.prototype.setX=function(a){goog.isDefAndNotNull(a)&&(this.vertical.style.left=a.toString()+"px")};xiv.ui.layouts.interactors.Crosshairs.prototype.setY=function(a){goog.isDefAndNotNull(a)&&(this.horizontal.style.top=a.toString()+"px")};
xiv.ui.layouts.interactors.Crosshairs.prototype.render=function(a){this.vertical=this.createCrosshair_("vertical");this.horizontal=this.createCrosshair_("horizontal");goog.dom.appendChild(a,this.horizontal);goog.dom.appendChild(a,this.vertical)};xiv.ui.layouts.interactors.Crosshairs.prototype.validateOrientation_=function(a){if(!goog.object.containsValue(xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX,a))throw Error("Invalid orientation: "+a);};
xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible=function(a){a=!1===a?"hidden":"visible";this.vertical.style.visibility=a;this.horizontal.style.visibility=a};xiv.ui.layouts.interactors.Crosshairs.prototype.createCrosshair_=function(a){a=a.toLowerCase();this.validateOrientation_(a);return goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_"+a+"_"+goog.string.createUniqueString(),"class":this.constructor.ELEMENT_CLASS+"-"+a.toLowerCase()})};
xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal=function(){xiv.ui.layouts.interactors.Crosshairs.superClass_.disposeInternal.call(this);goog.dom.removeNode(this.vertical);delete this.vertical;goog.dom.removeNode(this.horizontal);delete this.horizontal};goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.EventType",xiv.ui.layouts.interactors.Crosshairs.EventType);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX);
goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",xiv.ui.layouts.interactors.Crosshairs.prototype.vertical);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",xiv.ui.layouts.interactors.Crosshairs.prototype.setX);
goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",xiv.ui.layouts.interactors.Crosshairs.prototype.setY);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.prototype.render",xiv.ui.layouts.interactors.Crosshairs.prototype.render);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible);goog.exportSymbol("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal);xiv.ui.layouts.XyzvLayout=function(a){xiv.ui.layouts.Layout.call(this);a=goog.isDefAndNotNull(a)?a:goog.object.getValues(xiv.ui.layouts.XyzvLayout.FRAMES);a=goog.isArray(a)?a:[a];goog.array.forEach(a,function(b,c){a[c]=b.toUpperCase()});this.validateFrameTitles_(a);this.addLayoutFrames_(a);this.setupLayoutFrames_();this.updateStyle()};goog.inherits(xiv.ui.layouts.XyzvLayout,xiv.ui.layouts.Layout);goog.exportSymbol("xiv.ui.layouts.XyzvLayout",xiv.ui.layouts.XyzvLayout);
xiv.ui.layouts.XyzvLayout.TITLE="XyzvLayout";xiv.ui.layouts.XyzvLayout.EventType={};xiv.ui.layouts.XyzvLayout.ID_PREFIX="xiv.ui.layouts.XyzvLayout";xiv.ui.layouts.XyzvLayout.FRAMES={X:"X",Y:"Y",Z:"Z",V:"V"};xiv.ui.layouts.XyzvLayout.CSS_SUFFIX={X:"x",Y:"y",Z:"z",V:"v",SLIDER:"slider",SLIDER_THUMB:"slider-thumb",SLIDER_THUMB_HOVERED:"slider-thumb-hovered",SLIDER_TRACK:"slider-track",SLIDER_TRACK_X:"slider-track-x",SLIDER_TRACK_Y:"slider-track-y",SLIDER_TRACK_Z:"slider-track-z",FRAMENUMBER:"framenumber"};
xiv.ui.layouts.XyzvLayout.InteractorSet=function(a,b,c,d){this.SLIDER=a;this.FRAME_DISPLAY=b;this.CROSSHAIRS=c;this.ZOOM_DISPLAY=d};xiv.ui.layouts.XyzvLayout.prototype.resizeMargin=0;xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable=function(a,b){this.LayoutFrames[a].setResizeDirections(b);var c=this.createResizeBoundary(a);goog.dom.append(this.getElement(),c);c.style.position="absolute";this.LayoutFrames[a].getResizable().setBoundaryElement(c);this.LayoutFrames[a].getResizable().update()};
xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary=function(a){return goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+goog.string.createUniqueString(),"class":nrg.string.makeCssName(this.constructor.ELEMENT_CLASS,a.toLowerCase()+"-resizeboundary")})};
xiv.ui.layouts.XyzvLayout.prototype.validateFrameTitles_=function(a){if(a.length>goog.object.getCount(xiv.ui.layouts.XyzvLayout.FRAMES))throw Error("Invalid amount of frames "+a+". Must be "+xiv.ui.layouts.XyzvLayout.FRAMES);goog.array.forEach(a,function(a){if(!goog.object.containsValue(xiv.ui.layouts.XyzvLayout.FRAMES,a))throw Error("Invalid frame title ",a);}.bind(this))};
xiv.ui.layouts.XyzvLayout.prototype.addLayoutFrames_=function(a){var b="";goog.array.forEach(a,function(a,d){b=a.toUpperCase();this.addLayoutFrame(new xiv.ui.layouts.LayoutFrame(b));goog.dom.append(this.getElement(),this.LayoutFrames[b].getElement());goog.dom.classes.add(this.LayoutFrames[b].getElement(),xiv.ui.layouts.XyzvLayout.CSS[d])}.bind(this))};xiv.ui.layouts.XyzvLayout.prototype.transferInteractors=function(a){a.setInteractors(this.getInteractors())};
xiv.ui.layouts.XyzvLayout.prototype.setInteractors=function(a){this.loopXyz(function(b,c){goog.isDefAndNotNull(a[c])&&(b[xiv.ui.layouts.Layout.INTERACTORS.SLIDER]=a[c].SLIDER,goog.dom.removeNode(a[c].SLIDER.getElement()),goog.dom.appendChild(b.getElement(),a[c].SLIDER.getElement()),b[xiv.ui.layouts.Layout.INTERACTORS.FRAME_DISPLAY]=a[c].FRAME_DISPLAY,goog.dom.removeNode(a[c].FRAME_DISPLAY.getElement()),goog.dom.appendChild(b.getElement(),a[c].FRAME_DISPLAY.getElement()),b[xiv.ui.layouts.Layout.INTERACTORS.CROSSHAIRS]=
a[c].CROSSHAIRS,goog.dom.appendChild(b.getElement(),a[c].CROSSHAIRS.vertical),goog.dom.appendChild(b.getElement(),a[c].CROSSHAIRS.horizontal))})};xiv.ui.layouts.XyzvLayout.prototype.addInteractors=function(){this.removeAllInteractors();this.addLayoutFrameSliders_();this.addFrameDisplays_();this.addZoomDisplays_();this.addCrosshairs_()};
xiv.ui.layouts.XyzvLayout.prototype.getInteractors=function(){var a={};this.loopXyz(function(b,c){a[c]=new xiv.ui.layouts.XyzvLayout.InteractorSet(b[xiv.ui.layouts.Layout.INTERACTORS.SLIDER],b[xiv.ui.layouts.Layout.INTERACTORS.FRAME_DISPLAY],b[xiv.ui.layouts.Layout.INTERACTORS.CROSSHAIRS],b[xiv.ui.layouts.Layout.INTERACTORS.ZOOM_DISPLAY])});return a};
xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane=function(a){a=this.LayoutFrames[a];return new xiv.ui.layouts.XyzvLayout.InteractorSet(a[xiv.ui.layouts.Layout.INTERACTORS.SLIDER],a[xiv.ui.layouts.Layout.INTERACTORS.FRAME_DISPLAY],a[xiv.ui.layouts.Layout.INTERACTORS.CROSSHAIRS])};xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane=function(a,b){return this.LayoutFrames[a][b]};xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane=function(a){return this.LayoutFrames[a]};
xiv.ui.layouts.XyzvLayout.prototype.addLayoutFrameSliders_=function(){var a;this.loopXyz(function(b,c){a=new nrg.ui.Slider("horizontal");a.render(b.getElement());a.getElement().id=c+"_LayoutFrameSlider_"+goog.string.createUniqueString();b[xiv.ui.layouts.Layout.INTERACTORS.SLIDER]=a;goog.dom.classes.addRemove(a.getElement(),null,[xiv.ui.layouts.XyzvLayout.CSS.SLIDER]);goog.dom.classes.addRemove(a.getThumb(),null,[xiv.ui.layouts.XyzvLayout.CSS.SLIDER_THUMB]);goog.dom.classes.addRemove(a.getTrack(),
null,[xiv.ui.layouts.XyzvLayout.CSS.SLIDER_TRACK,nrg.string.makeCssName(xiv.ui.layouts.XyzvLayout.CSS.SLIDER_TRACK,c.toLowerCase())]);a.addThumbHoverClass(xiv.ui.layouts.XyzvLayout.CSS.SLIDER_THUMB_HOVERED)}.bind(this))};xiv.ui.layouts.XyzvLayout.prototype.addFrameDisplays_=function(){var a;this.loopXyz(function(b,c){a=new xiv.ui.layouts.interactors.FrameDisplay;a.render(b.getElement());b[xiv.ui.layouts.Layout.INTERACTORS.FRAME_DISPLAY]=a}.bind(this))};
xiv.ui.layouts.XyzvLayout.prototype.addZoomDisplays_=function(){var a;this.loopXyz(function(b,c){a=new xiv.ui.layouts.interactors.ZoomDisplay;a.render(b.getElement());b[xiv.ui.layouts.Layout.INTERACTORS.ZOOM_DISPLAY]=a}.bind(this))};
xiv.ui.layouts.XyzvLayout.prototype.addCrosshairs_=function(){var a;this.loopXyz(function(b,c){a=new xiv.ui.layouts.interactors.Crosshairs;b[xiv.ui.layouts.Layout.INTERACTORS.CROSSHAIRS]=a;a.render(b.getElement());goog.dom.appendChild(b.getElement(),a.horizontal);goog.dom.appendChild(b.getElement(),a.vertical)}.bind(this))};
xiv.ui.layouts.XyzvLayout.prototype.loopXyz=function(a){goog.object.forEach(xiv.ui.layouts.XyzvLayout.FRAMES,function(b,c){b=b.toUpperCase();goog.isDefAndNotNull(this.LayoutFrames[b])&&"V"!=b&&a(this.LayoutFrames[b],b)}.bind(this))};xiv.ui.layouts.XyzvLayout.prototype.loop=function(a){goog.object.forEach(xiv.ui.layouts.XyzvLayout.FRAMES,function(b,c){b=b.toUpperCase();a(this.LayoutFrames[b],b)}.bind(this))};
xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrames_=function(){goog.isDefAndNotNull(this.LayoutFrames.X)&&this.setupLayoutFrame_X();goog.isDefAndNotNull(this.LayoutFrames.Y)&&this.setupLayoutFrame_Y();goog.isDefAndNotNull(this.LayoutFrames.Z)&&this.setupLayoutFrame_Z();goog.isDefAndNotNull(this.LayoutFrames.V)&&this.setupLayoutFrame_V()};
xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X=function(){goog.isDefAndNotNull(this.constructor.CSS)&&goog.dom.classes.add(this.LayoutFrames.X.getElement(),this.constructor.CSS.X)};xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y=function(){goog.isDefAndNotNull(this.constructor.CSS)&&goog.dom.classes.add(this.LayoutFrames.Y.getElement(),this.constructor.CSS.Y)};
xiv.ui.layouts.XyzvLayout.prototype.onXYLayoutFrameResize_=function(a){this.calcDims();var b=goog.style.getSize(this.LayoutFrames.X.getElement()),c=goog.style.getSize(this.LayoutFrames.Y.getElement()),d=goog.style.getSize(this.LayoutFrames.Z.getElement());a(b,c,d,b.width+c.width+d.width-this.currSize.width)};xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z=function(){goog.isDefAndNotNull(this.constructor.CSS)&&goog.dom.classes.add(this.LayoutFrames.Z.getElement(),this.constructor.CSS.Z)};
xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V=function(){goog.isDefAndNotNull(this.constructor.CSS)&&goog.dom.classes.add(this.LayoutFrames.V.getElement(),this.constructor.CSS.V)};xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X=goog.nullFunction;xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y=goog.nullFunction;xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z=goog.nullFunction;xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V=goog.nullFunction;
xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X=goog.nullFunction;xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z=goog.nullFunction;xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y=goog.nullFunction;xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V=goog.nullFunction;xiv.ui.layouts.XyzvLayout.prototype.disposeInternal=function(){xiv.ui.layouts.XyzvLayout.superClass_.disposeInternal.call(this);delete this.resizeMargin};goog.exportSymbol("xiv.ui.layouts.XyzvLayout.TITLE",xiv.ui.layouts.XyzvLayout.TITLE);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.EventType",xiv.ui.layouts.XyzvLayout.EventType);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.ID_PREFIX",xiv.ui.layouts.XyzvLayout.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.FRAMES",xiv.ui.layouts.XyzvLayout.FRAMES);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",xiv.ui.layouts.XyzvLayout.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.InteractorSet",xiv.ui.layouts.XyzvLayout.InteractorSet);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",xiv.ui.layouts.XyzvLayout.prototype.resizeMargin);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",xiv.ui.layouts.XyzvLayout.prototype.transferInteractors);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",xiv.ui.layouts.XyzvLayout.prototype.setInteractors);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",xiv.ui.layouts.XyzvLayout.prototype.addInteractors);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",xiv.ui.layouts.XyzvLayout.prototype.getInteractors);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",xiv.ui.layouts.XyzvLayout.prototype.loopXyz);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.loop",xiv.ui.layouts.XyzvLayout.prototype.loop);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y);goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V);
goog.exportSymbol("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",xiv.ui.layouts.XyzvLayout.prototype.disposeInternal);xiv.ui.layouts.TwoDWidescreen=function(){xiv.ui.layouts.XyzvLayout.call(this,["X","Y","Z"])};goog.inherits(xiv.ui.layouts.TwoDWidescreen,xiv.ui.layouts.XyzvLayout);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen",xiv.ui.layouts.TwoDWidescreen);xiv.ui.layouts.TwoDWidescreen.TITLE="TwoDWidescreen";xiv.ui.layouts.TwoDWidescreen.EventType={};xiv.ui.layouts.TwoDWidescreen.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX={X:"x",Y:"y",Z:"z"};
xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X=function(){xiv.ui.layouts.TwoDWidescreen.superClass_.setupLayoutFrame_X.call(this);this.setLayoutFrameResizable("X",["RIGHT"]);goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_X.bind(this));goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};
xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y=function(){xiv.ui.layouts.TwoDWidescreen.superClass_.setupLayoutFrame_Y.call(this);this.setLayoutFrameResizable("Y",["BOTTOM"]);goog.events.listen(this.LayoutFrames.Y.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_Y.bind(this));goog.events.listen(this.LayoutFrames.Y.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};
xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X=function(a){this.onXYLayoutFrameResize_(function(a,c,d,e){var f=a.width,g=Math.max(this.currSize.width-a.width,this.minLayoutFrameWidth_);goog.array.forEach(["Y","Z"],function(a){this.LayoutFrames[a].getElement().style.left=f+"px";this.LayoutFrames[a].getElement().style.width=g+"px"}.bind(this))}.bind(this));this.dispatchResize()};
xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y=function(a){this.onXYLayoutFrameResize_(function(a,c,d,e){window.console.log("Y SIZE",c.height);a=c.height;c=this.currSize.height-a;this.LayoutFrames.Z.getElement().style.top=a+"px";this.LayoutFrames.Z.getElement().style.height=c+"px"}.bind(this));this.dispatchResize()};
xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle=function(){xiv.ui.layouts.TwoDWidescreen.superClass_.updateStyle.call(this);this.scaleFrames_();this.updateStyle_X();this.updateStyle_Y();this.updateStyle_Z()};
xiv.ui.layouts.TwoDWidescreen.prototype.scaleFrames_=function(){if(this.prevSize.width!==this.currSize.width||this.prevSize.height!==this.currSize.height){var a=1-(this.prevSize.height-this.currSize.height)/this.prevSize.height,b=1-(this.prevSize.width-this.currSize.width)/this.prevSize.width;this.loopXyz(function(c,d){frameSize=goog.style.getSize(c.getElement());c.getElement().style.width=Math.max(frameSize.width*b,this.minLayoutFrameWidth_).toString()+"px";c.getElement().style.height=Math.max(frameSize.height*
a,this.minLayoutFrameHeight_).toString()+"px"}.bind(this))}};xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X=function(){var a=this.LayoutFrames.X;a.getElement().style.height=this.currSize.height.toString()+"px";nrg.style.setStyle(a.getResizable().getBoundaryElement(),{left:this.minLayoutFrameWidth_,width:this.currSize.width-2*this.minLayoutFrameWidth_});var b=a.getResizable().getHandle("RIGHT");b.style.left=a.getElement().style.width;goog.style.setHeight(b,this.currSize.height);a.getResizable().update()};
xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y=function(){var a=this.LayoutFrames.Y;a.getElement().style.left=this.LayoutFrames.X.getElement().style.width;nrg.style.setStyle(a.getResizable().getBoundaryElement(),{top:this.minLayoutFrameHeight_,height:this.currSize.height-2*this.minLayoutFrameHeight_});var b=a.getResizable().getHandle("BOTTOM");b.style.top=a.getElement().style.height;goog.style.setWidth(b,parseInt(a.getElement().style.width));a.getResizable().update()};
xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z=function(){var a=this.LayoutFrames.Z;a.getElement().style.left=this.LayoutFrames.X.getElement().style.width;a.getElement().style.top=this.LayoutFrames.Y.getElement().style.height;a.getElement().style.height=this.currSize.height-parseInt(this.LayoutFrames.Y.getElement().style.height)+NaN};goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.TITLE",xiv.ui.layouts.TwoDWidescreen.TITLE);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.EventType",xiv.ui.layouts.TwoDWidescreen.EventType);
goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",xiv.ui.layouts.TwoDWidescreen.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y);
goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X);
goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y);goog.exportSymbol("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z);xiv.ui.layouts.SingleFrameLayout=function(a){xiv.ui.layouts.XyzvLayout.call(this,a)};goog.inherits(xiv.ui.layouts.SingleFrameLayout,xiv.ui.layouts.XyzvLayout);goog.exportSymbol("xiv.ui.layouts.SingleFrameLayout",xiv.ui.layouts.SingleFrameLayout);xiv.ui.layouts.SingleFrameLayout.TITLE="SingleFrameLayout";xiv.ui.layouts.SingleFrameLayout.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";
xiv.ui.layouts.SingleFrameLayout.prototype.scaleFrames_=function(){if(this.prevSize.width!==this.currSize.width||this.prevSize.height!==this.currSize.height){var a=this.prevSize.height*(1-(this.prevSize.height-this.currSize.height)/this.prevSize.height),b=this.prevSize.width*(1-(this.prevSize.width-this.currSize.width)/this.prevSize.width);this.loop(function(c,d){goog.isDefAndNotNull(c)&&goog.style.setSize(c.getElement(),Math.max(b,this.minLayoutFrameWidth_),Math.max(a,this.minLayoutFrameHeight_))}.bind(this))}};
xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle=function(){xiv.ui.layouts.SingleFrameLayout.superClass_.updateStyle.call(this);this.scaleFrames_()};goog.exportSymbol("xiv.ui.layouts.SingleFrameLayout.TITLE",xiv.ui.layouts.SingleFrameLayout.TITLE);goog.exportSymbol("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",xiv.ui.layouts.SingleFrameLayout.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle);xiv.ui.layouts.ThreeD=function(){xiv.ui.layouts.SingleFrameLayout.call(this,"V");goog.dom.classes.add(this.LayoutFrames.V.getElement(),nrg.string.makeCssName(xiv.ui.layouts.LayoutFrame.ELEMENT_CLASS,this.constructor.TITLE))};goog.inherits(xiv.ui.layouts.ThreeD,xiv.ui.layouts.SingleFrameLayout);goog.exportSymbol("xiv.ui.layouts.ThreeD",xiv.ui.layouts.ThreeD);xiv.ui.layouts.ThreeD.TITLE="ThreeD";xiv.ui.layouts.ThreeD.ID_PREFIX="xiv.ui.layouts.ThreeD";
goog.exportSymbol("xiv.ui.layouts.ThreeD.TITLE",xiv.ui.layouts.ThreeD.TITLE);goog.exportSymbol("xiv.ui.layouts.ThreeD.ID_PREFIX",xiv.ui.layouts.ThreeD.ID_PREFIX);xiv.ui.layouts.Sagittal=function(){xiv.ui.layouts.SingleFrameLayout.call(this,"X");goog.dom.classes.add(this.LayoutFrames.X.getElement(),nrg.string.makeCssName(xiv.ui.layouts.LayoutFrame.ELEMENT_CLASS,this.constructor.TITLE.toLowerCase()))};goog.inherits(xiv.ui.layouts.Sagittal,xiv.ui.layouts.SingleFrameLayout);goog.exportSymbol("xiv.ui.layouts.Sagittal",xiv.ui.layouts.Sagittal);xiv.ui.layouts.Sagittal.TITLE="Sagittal";xiv.ui.layouts.Sagittal.ID_PREFIX="xiv.ui.layouts.Sagittal";
goog.exportSymbol("xiv.ui.layouts.Sagittal.TITLE",xiv.ui.layouts.Sagittal.TITLE);goog.exportSymbol("xiv.ui.layouts.Sagittal.ID_PREFIX",xiv.ui.layouts.Sagittal.ID_PREFIX);xiv.ui.layouts.Conventional=function(){xiv.ui.layouts.XyzvLayout.call(this)};goog.inherits(xiv.ui.layouts.Conventional,xiv.ui.layouts.XyzvLayout);goog.exportSymbol("xiv.ui.layouts.Conventional",xiv.ui.layouts.Conventional);xiv.ui.layouts.Conventional.TITLE="Conventional";xiv.ui.layouts.Conventional.EventType={};xiv.ui.layouts.Conventional.ID_PREFIX="xiv.ui.layouts.Conventional";xiv.ui.layouts.Conventional.CSS_SUFFIX={X:"x",Y:"y",Z:"z",V:"v",V_BOUNDARY:"v-boundary"};
xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X=function(){xiv.ui.layouts.Conventional.superClass_.setupLayoutFrame_X.call(this);this.setLayoutFrameResizable("X",["RIGHT","TOP_RIGHT"]);goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_X.bind(this));goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};
xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y=function(){xiv.ui.layouts.Conventional.superClass_.setupLayoutFrame_Y.call(this);this.setLayoutFrameResizable("Y",["RIGHT","TOP_RIGHT"]);goog.events.listen(this.LayoutFrames.Y.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_Y.bind(this));goog.events.listen(this.LayoutFrames.Y.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z=function(){xiv.ui.layouts.Conventional.superClass_.setupLayoutFrame_Z.call(this)};
xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V=function(){xiv.ui.layouts.Conventional.superClass_.setupLayoutFrame_V.call(this);this.setLayoutFrameResizable("V","BOTTOM");goog.events.listen(this.LayoutFrames.V.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_V.bind(this));goog.events.listen(this.LayoutFrames.V.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};
xiv.ui.layouts.Conventional.prototype.onXYLayoutFrameResize_=function(a){this.calcDims();var b=goog.style.getSize(this.LayoutFrames.X.getElement()),c=goog.style.getSize(this.LayoutFrames.Y.getElement()),d=goog.style.getSize(this.LayoutFrames.Z.getElement());a(b,c,d,b.width+c.width+d.width-this.currSize.width)};
xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X=function(a){this.onXYLayoutFrameResize_(function(a,c,d,e){c=Math.max(this.currSize.width-a.width-d.width,this.minLayoutFrameWidth_);e=this.currSize.height-a.height;goog.style.setPosition(this.LayoutFrames.Y.getElement(),a.width,e);goog.style.setSize(this.LayoutFrames.Y.getElement(),c,a.height);goog.style.setPosition(this.LayoutFrames.Z.getElement(),a.width+c,e);goog.style.setSize(this.LayoutFrames.Z.getElement(),d.width,a.height);goog.style.setSize(this.LayoutFrames.V.getElement(),
this.currSize.width,this.currSize.height-a.height)}.bind(this));this.dispatchResize()};
xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y=function(a){this.onXYLayoutFrameResize_(function(a,c,d,e){d=this.currSize.height-c.height;goog.style.setPosition(this.LayoutFrames.X.getElement(),0,d);goog.style.setSize(this.LayoutFrames.X.getElement(),a.width,c.height);goog.style.setPosition(this.LayoutFrames.Z.getElement(),a.width+c.width,d);goog.style.setSize(this.LayoutFrames.Z.getElement(),this.currSize.width-a.width-c.width,c.height);goog.style.setSize(this.LayoutFrames.V.getElement(),
this.currSize.width,this.currSize.height-c.height)}.bind(this));this.dispatchResize()};xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V=function(a){this.calcDims();var b=parseInt(this.LayoutFrames.V.getElement().style.height),c=this.currSize.height-b;goog.object.forEach(this.LayoutFrames,function(a){a!==this.LayoutFrames.V&&nrg.style.setStyle(a.getElement(),{top:b,height:c})}.bind(this));this.updateStyle_X();this.updateStyle_Y();this.dispatchResize()};
xiv.ui.layouts.Conventional.prototype.updateStyle=function(){xiv.ui.layouts.Conventional.superClass_.updateStyle.call(this);this.updateStyle_V();this.updateXyzHeights_();this.updateXyzWidths_();this.updateStyle_X();this.updateStyle_Y();this.updateStyle_Z()};
xiv.ui.layouts.Conventional.prototype.updateXyzHeights_=function(){var a=parseInt(this.LayoutFrames.V.getElement().style.height),b=Math.max(this.currSize.height-a,this.minLayoutFrameHeight_);this.loopXyz(function(c,d){c.getElement().style.top=a+"px";c.getElement().style.height=b+"px"})};
xiv.ui.layouts.Conventional.prototype.updateXyzWidths_=function(){var a,b=1-(this.prevSize.width-this.currSize.width)/this.prevSize.width;this.prevSize.width!==this.currSize.width&&this.loopXyz(function(c,d){a=goog.style.getSize(c.getElement());c.getElement().style.width=Math.max(a.width*b,this.minLayoutFrameWidth_).toString()+"px"}.bind(this))};
xiv.ui.layouts.Conventional.prototype.updateStyle_XY_=function(a){var b=this.LayoutFrames.V.getResizable().getResizeDragger("BOTTOM"),c=this.LayoutFrames[a].getResizable().getBoundaryElement(),d=goog.style.getPosition(this.LayoutFrames[a].getElement()),e=goog.style.getSize(this.LayoutFrames[a].getElement());goog.style.setPosition(c,parseInt(c.style.left),this.minLayoutFrameHeight_);goog.style.setSize(c,this.currSize.width-3*this.minLayoutFrameWidth_,this.currSize.height-2*this.minLayoutFrameHeight_);
c=this.LayoutFrames[a].getResizable().getHandle("RIGHT");goog.style.setPosition(c,d.x+e.width,d.y);goog.style.setHeight(c,this.currSize.height-b.handlePos.y);goog.style.setPosition(this.LayoutFrames[a].getResizable().getHandle("TOP_RIGHT"),d.x+e.width,d.y);this.LayoutFrames[a].getResizable().update()};xiv.ui.layouts.Conventional.prototype.updateStyle_X=function(){nrg.style.setStyle(this.LayoutFrames.X.getResizable().getBoundaryElement(),{left:this.minLayoutFrameWidth_});this.updateStyle_XY_("X")};
xiv.ui.layouts.Conventional.prototype.updateStyle_Y=function(){this.LayoutFrames.Y.getElement().style.left=this.LayoutFrames.X.getElement().style.width;nrg.style.setStyle(this.LayoutFrames.Y.getResizable().getBoundaryElement(),{left:2*this.minLayoutFrameWidth_});this.updateStyle_XY_("Y")};
xiv.ui.layouts.Conventional.prototype.updateStyle_Z=function(){this.LayoutFrames.Z.getElement().style.left=(parseInt(this.LayoutFrames.X.getElement().style.width)+parseInt(this.LayoutFrames.Y.getElement().style.width)).toString()+"px"};
xiv.ui.layouts.Conventional.prototype.updateStyle_V=function(){if(this.prevSize.width!==this.currSize.width||this.prevSize.height!==this.currSize.height){var a=goog.style.getSize(this.LayoutFrames.V.getElement()),b=1-(this.prevSize.height-this.currSize.height)/this.prevSize.height;goog.style.setSize(this.LayoutFrames.V.getElement(),this.currSize.width,Math.max(a.height*b,this.minLayoutFrameHeight_))}goog.style.setPosition(this.LayoutFrames.V.getResizable().getBoundaryElement(),this.currSize.width,
this.minLayoutFrameHeight_);goog.style.setSize(this.LayoutFrames.V.getResizable().getBoundaryElement(),this.currSize.width-3*this.minLayoutFrameWidth_,this.currSize.height-2*this.minLayoutFrameHeight_);a=this.LayoutFrames.V.getResizable().getHandle("BOTTOM");goog.style.setPosition(a,0,goog.style.getSize(this.LayoutFrames.V.getElement()).height);goog.style.setWidth(a,this.currSize.width);this.LayoutFrames.V.getResizable().update()};goog.exportSymbol("xiv.ui.layouts.Conventional.TITLE",xiv.ui.layouts.Conventional.TITLE);
goog.exportSymbol("xiv.ui.layouts.Conventional.EventType",xiv.ui.layouts.Conventional.EventType);goog.exportSymbol("xiv.ui.layouts.Conventional.ID_PREFIX",xiv.ui.layouts.Conventional.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.Conventional.CSS_SUFFIX",xiv.ui.layouts.Conventional.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X);
goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X);
goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y",xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.updateStyle",xiv.ui.layouts.Conventional.prototype.updateStyle);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.updateStyle_X",xiv.ui.layouts.Conventional.prototype.updateStyle_X);
goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",xiv.ui.layouts.Conventional.prototype.updateStyle_Y);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",xiv.ui.layouts.Conventional.prototype.updateStyle_Z);goog.exportSymbol("xiv.ui.layouts.Conventional.prototype.updateStyle_V",xiv.ui.layouts.Conventional.prototype.updateStyle_V);xiv.ui.layouts.Transverse=function(){xiv.ui.layouts.SingleFrameLayout.call(this,"Z");goog.dom.classes.add(this.LayoutFrames.Z.getElement(),nrg.string.makeCssName(xiv.ui.layouts.LayoutFrame.ELEMENT_CLASS,this.constructor.TITLE))};goog.inherits(xiv.ui.layouts.Transverse,xiv.ui.layouts.SingleFrameLayout);goog.exportSymbol("xiv.ui.layouts.Transverse",xiv.ui.layouts.Transverse);xiv.ui.layouts.Transverse.TITLE="Transverse";xiv.ui.layouts.Transverse.ID_PREFIX="xiv.ui.layouts.Transverse";
goog.exportSymbol("xiv.ui.layouts.Transverse.TITLE",xiv.ui.layouts.Transverse.TITLE);goog.exportSymbol("xiv.ui.layouts.Transverse.ID_PREFIX",xiv.ui.layouts.Transverse.ID_PREFIX);xiv.ui.layouts.FourUp=function(){xiv.ui.layouts.XyzvLayout.call(this)};goog.inherits(xiv.ui.layouts.FourUp,xiv.ui.layouts.XyzvLayout);goog.exportSymbol("xiv.ui.layouts.FourUp",xiv.ui.layouts.FourUp);xiv.ui.layouts.FourUp.TITLE="Four-Up";xiv.ui.layouts.FourUp.EventType={};xiv.ui.layouts.FourUp.ID_PREFIX="xiv.ui.layouts.FourUp";xiv.ui.layouts.FourUp.CSS_SUFFIX={X:"x",Y:"y",Z:"z",V:"v"};
xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X=function(){xiv.ui.layouts.FourUp.superClass_.setupLayoutFrame_X.call(this);this.setLayoutFrameResizable("X",["RIGHT","TOP","TOP_RIGHT"]);goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_X.bind(this));goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};
xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X=function(a){a=goog.style.getPosition(this.LayoutFrames.X.getElement());var b=goog.style.getSize(this.LayoutFrames.X.getElement());goog.style.setPosition(this.LayoutFrames.Y.getElement(),b.width,a.y);goog.style.setSize(this.LayoutFrames.Y.getElement(),this.currSize.width-b.width,b.height);goog.style.setPosition(this.LayoutFrames.Z.getElement(),0,0);goog.style.setSize(this.LayoutFrames.Z.getElement(),b.width,a.y);goog.style.setPosition(this.LayoutFrames.V.getElement(),
b.width,0);goog.style.setSize(this.LayoutFrames.V.getElement(),this.currSize.width-b.width,a.y);a=this.LayoutFrames.X.getResizable().getResizeDragger("RIGHT").getHandle();a.style.top="0px";a.style.height=this.currSize.height.toString()+"px";this.dispatchResize()};xiv.ui.layouts.FourUp.prototype.updateStyle=function(){xiv.ui.layouts.FourUp.superClass_.updateStyle.call(this);this.scaleFrames_();this.updateStyle_Z();this.updateStyle_V();this.updateStyle_X();this.updateStyle_Y()};
xiv.ui.layouts.FourUp.prototype.scaleFrames_=function(){if(this.prevSize.width!==this.currSize.width||this.prevSize.height!==this.currSize.height){var a=this.prevSize.height*(1-(this.prevSize.height-this.currSize.height)/this.prevSize.height)/2,b=this.prevSize.width*(1-(this.prevSize.width-this.currSize.width)/this.prevSize.width)/2;this.loop(function(c,d){goog.style.setSize(c.getElement(),Math.max(b,this.minLayoutFrameWidth_),Math.max(a,this.minLayoutFrameHeight_))}.bind(this))}};
xiv.ui.layouts.FourUp.prototype.updateStyle_X=function(){this.LayoutFrames.X.getElement().style.top=this.LayoutFrames.Z.getElement().style.height;goog.style.setPosition(this.LayoutFrames.X.getResizable().getBoundaryElement(),this.minLayoutFrameWidth_,this.minLayoutFrameHeight_);goog.style.setSize(this.LayoutFrames.X.getResizable().getBoundaryElement(),this.currSize.width-2*this.minLayoutFrameWidth_,this.currSize.height-2*this.minLayoutFrameHeight_);var a=this.LayoutFrames.X.getResizable().getResizeDragger("TOP").getHandle();
a.style.left="0px";a.style.width=this.currSize.width.toString()+"px";this.LayoutFrames.X.getResizable().update();a=this.LayoutFrames.X.getResizable().getResizeDragger("RIGHT").getHandle();a.style.top="0px";a.style.height=this.currSize.height.toString()+"px"};xiv.ui.layouts.FourUp.prototype.updateStyle_Y=function(){this.LayoutFrames.Y.getElement().style.left=this.LayoutFrames.Z.getElement().style.width;this.LayoutFrames.Y.getElement().style.top=this.LayoutFrames.Z.getElement().style.height};
xiv.ui.layouts.FourUp.prototype.updateStyle_Z=function(){};xiv.ui.layouts.FourUp.prototype.updateStyle_V=function(){this.LayoutFrames.V.getElement().style.left=this.LayoutFrames.Z.getElement().style.width};xiv.ui.layouts.FourUp.prototype.disposeInternal=function(){xiv.ui.layouts.FourUp.superClass_.disposeInternal.call(this)};goog.exportSymbol("xiv.ui.layouts.FourUp.TITLE",xiv.ui.layouts.FourUp.TITLE);goog.exportSymbol("xiv.ui.layouts.FourUp.EventType",xiv.ui.layouts.FourUp.EventType);
goog.exportSymbol("xiv.ui.layouts.FourUp.ID_PREFIX",xiv.ui.layouts.FourUp.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.FourUp.CSS_SUFFIX",xiv.ui.layouts.FourUp.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X);goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X);goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.updateStyle",xiv.ui.layouts.FourUp.prototype.updateStyle);
goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.updateStyle_X",xiv.ui.layouts.FourUp.prototype.updateStyle_X);goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",xiv.ui.layouts.FourUp.prototype.updateStyle_Y);goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",xiv.ui.layouts.FourUp.prototype.updateStyle_Z);goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.updateStyle_V",xiv.ui.layouts.FourUp.prototype.updateStyle_V);
goog.exportSymbol("xiv.ui.layouts.FourUp.prototype.disposeInternal",xiv.ui.layouts.FourUp.prototype.disposeInternal);xiv.ui.layouts.TwoDRow=function(){xiv.ui.layouts.XyzvLayout.call(this,["X","Y","Z"])};goog.inherits(xiv.ui.layouts.TwoDRow,xiv.ui.layouts.XyzvLayout);goog.exportSymbol("xiv.ui.layouts.TwoDRow",xiv.ui.layouts.TwoDRow);xiv.ui.layouts.TwoDRow.TITLE="TwoDRow";xiv.ui.layouts.TwoDRow.EventType={};xiv.ui.layouts.TwoDRow.ID_PREFIX="xiv.ui.layouts.TwoDRow";xiv.ui.layouts.TwoDRow.CSS_SUFFIX={X:"x",Y:"y",Z:"z"};
xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X=function(){xiv.ui.layouts.TwoDRow.superClass_.setupLayoutFrame_X.call(this);this.setLayoutFrameResizable("X",["RIGHT"]);goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_X.bind(this));goog.events.listen(this.LayoutFrames.X.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};
xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y=function(){xiv.ui.layouts.TwoDRow.superClass_.setupLayoutFrame_Y.call(this);this.setLayoutFrameResizable("Y",["RIGHT"]);goog.events.listen(this.LayoutFrames.Y.getResizable(),nrg.ui.Resizable.EventType.RESIZE,this.onLayoutFrameResize_Y.bind(this));goog.events.listen(this.LayoutFrames.Y.getResizable(),nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this))};xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z=function(){xiv.ui.layouts.TwoDRow.superClass_.setupLayoutFrame_Z.call(this)};
xiv.ui.layouts.TwoDRow.prototype.onXYLayoutFrameResize_=function(a){this.calcDims();var b=goog.style.getSize(this.LayoutFrames.X.getElement()),c=goog.style.getSize(this.LayoutFrames.Y.getElement()),d=goog.style.getSize(this.LayoutFrames.Z.getElement());a(b,c,d,b.width+c.width+d.width-this.currSize.width)};
xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X=function(a){this.onXYLayoutFrameResize_(function(a,c,d,e){c=Math.max(this.currSize.width-a.width-d.width,this.minLayoutFrameWidth_);e=this.currSize.height-a.height;goog.style.setPosition(this.LayoutFrames.Y.getElement(),a.width,e);goog.style.setSize(this.LayoutFrames.Y.getElement(),c,a.height);goog.style.setPosition(this.LayoutFrames.Z.getElement(),a.width+c,e);goog.style.setSize(this.LayoutFrames.Z.getElement(),d.width,a.height)}.bind(this));
this.dispatchResize()};
xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y=function(a){this.onXYLayoutFrameResize_(function(a,c,d,e){d=this.currSize.height-c.height;goog.style.setPosition(this.LayoutFrames.X.getElement(),0,d);goog.style.setSize(this.LayoutFrames.X.getElement(),a.width,c.height);goog.style.setPosition(this.LayoutFrames.Z.getElement(),a.width+c.width,d);goog.style.setSize(this.LayoutFrames.Z.getElement(),this.currSize.width-a.width-c.width,c.height);goog.style.setSize(this.LayoutFrames.V.getElement(),this.currSize.width,
this.currSize.height-c.height)}.bind(this));this.dispatchResize()};xiv.ui.layouts.TwoDRow.prototype.updateStyle=function(){xiv.ui.layouts.TwoDRow.superClass_.updateStyle.call(this);this.updateXyzWidths_();this.updateXyzHeights_();this.updateStyle_X();this.updateStyle_Y();this.updateStyle_Z()};xiv.ui.layouts.TwoDRow.prototype.updateXyzHeights_=function(){var a=this.currSize.height.toString()+"px";this.loopXyz(function(b,c){b.getElement().style.height=a})};
xiv.ui.layouts.TwoDRow.prototype.updateXyzWidths_=function(){var a,b=1-(this.prevSize.width-this.currSize.width)/this.prevSize.width;this.prevSize.width!==this.currSize.width&&this.loopXyz(function(c,d){a=goog.style.getSize(c.getElement());newWidth=c.getElement().style.width=Math.max(a.width*b,this.minLayoutFrameWidth_).toString()+"px"}.bind(this))};
xiv.ui.layouts.TwoDRow.prototype.updateStyle_XY_=function(a){var b=this.LayoutFrames[a].getResizable().getBoundaryElement(),c=goog.style.getPosition(this.LayoutFrames[a].getElement()),d=goog.style.getSize(this.LayoutFrames[a].getElement());goog.style.setPosition(b,parseInt(b.style.left),this.minLayoutFrameHeight_);goog.style.setSize(b,this.currSize.width-3*this.minLayoutFrameWidth_,this.currSize.height-2*this.minLayoutFrameHeight_);b=this.LayoutFrames[a].getResizable().getHandle("RIGHT");goog.style.setPosition(b,
c.x+d.width,c.y);goog.style.setHeight(b,this.currSize.height);this.LayoutFrames[a].getResizable().update()};xiv.ui.layouts.TwoDRow.prototype.updateStyle_X=function(){nrg.style.setStyle(this.LayoutFrames.X.getResizable().getBoundaryElement(),{left:this.minLayoutFrameWidth_});this.updateStyle_XY_("X")};
xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y=function(){this.LayoutFrames.Y.getElement().style.left=this.LayoutFrames.X.getElement().style.width;nrg.style.setStyle(this.LayoutFrames.Y.getResizable().getBoundaryElement(),{left:2*this.minLayoutFrameWidth_});this.updateStyle_XY_("Y")};
xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z=function(){this.LayoutFrames.Z.getElement().style.left=(parseInt(this.LayoutFrames.X.getElement().style.width)+parseInt(this.LayoutFrames.Y.getElement().style.width)).toString()+"px"};goog.exportSymbol("xiv.ui.layouts.TwoDRow.TITLE",xiv.ui.layouts.TwoDRow.TITLE);goog.exportSymbol("xiv.ui.layouts.TwoDRow.EventType",xiv.ui.layouts.TwoDRow.EventType);goog.exportSymbol("xiv.ui.layouts.TwoDRow.ID_PREFIX",xiv.ui.layouts.TwoDRow.ID_PREFIX);
goog.exportSymbol("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",xiv.ui.layouts.TwoDRow.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X);goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y);goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z);
goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X);goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y);goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.updateStyle",xiv.ui.layouts.TwoDRow.prototype.updateStyle);goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",xiv.ui.layouts.TwoDRow.prototype.updateStyle_X);
goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y);goog.exportSymbol("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z);xiv.ui.layouts.Coronal=function(){xiv.ui.layouts.SingleFrameLayout.call(this,"Y");goog.dom.classes.add(this.LayoutFrames.Y.getElement(),nrg.string.makeCssName(xiv.ui.layouts.LayoutFrame.ELEMENT_CLASS,this.constructor.TITLE.toLowerCase()))};goog.inherits(xiv.ui.layouts.Coronal,xiv.ui.layouts.SingleFrameLayout);goog.exportSymbol("xiv.ui.layouts.Coronal",xiv.ui.layouts.Coronal);xiv.ui.layouts.Coronal.TITLE="Coronal";xiv.ui.layouts.Coronal.ID_PREFIX="xiv.ui.layouts.Coronal";
goog.exportSymbol("xiv.ui.layouts.Coronal.TITLE",xiv.ui.layouts.Coronal.TITLE);goog.exportSymbol("xiv.ui.layouts.Coronal.ID_PREFIX",xiv.ui.layouts.Coronal.ID_PREFIX);xiv.ui.layouts.LayoutHandler=function(){nrg.ui.Component.call(this);this.constructor.LayoutTypes={};this.constructor.LayoutTypes[xiv.ui.layouts.FourUp.TITLE]=xiv.ui.layouts.FourUp;this.constructor.LayoutTypes[xiv.ui.layouts.Conventional.TITLE]=xiv.ui.layouts.Conventional;this.LayoutObjects_={};this.planeChildren_={};this.transitionElts_={}};goog.inherits(xiv.ui.layouts.LayoutHandler,nrg.ui.Component);goog.exportSymbol("xiv.ui.layouts.LayoutHandler",xiv.ui.layouts.LayoutHandler);
xiv.ui.layouts.LayoutHandler.EventType={LAYOUT_CHANGE_START:goog.events.getUniqueId("layout_change_start"),LAYOUT_CHANGE_END:goog.events.getUniqueId("layout_change_end"),LAYOUT_CHANGING:goog.events.getUniqueId("layout_changed"),RESIZE:goog.events.getUniqueId("resize")};xiv.ui.layouts.LayoutHandler.ID_PREFIX="xiv.ui.layouts.LayoutHandler";xiv.ui.layouts.LayoutHandler.CSS_SUFFIX={};xiv.ui.layouts.LayoutHandler.ANIM_TIME=500;xiv.ui.layouts.LayoutHandler.prototype.Layouts_=null;
xiv.ui.layouts.LayoutHandler.prototype.masterLayout_=null;xiv.ui.layouts.LayoutHandler.prototype.layoutChanging_=!1;xiv.ui.layouts.LayoutHandler.prototype.asIsDims_=null;xiv.ui.layouts.LayoutHandler.prototype.toBeDims_=null;xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange_=!0;xiv.ui.layouts.LayoutHandler.prototype.layoutChanging=function(){return this.layoutChanging_};xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange=function(a){this.animateLayoutChange_=a};
xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout=function(){return this.Layouts_[this.currLayoutTitle_]};xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame=function(a){return this.Layouts_[this.currLayoutTitle_].getLayoutFrameByTitle(a)};xiv.ui.layouts.LayoutHandler.prototype.updateInteractors=function(){goog.isDefAndNotNull(this.masterLayout_)&&this.masterLayout_.updateInteractors()};
xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors=function(){return goog.isDefAndNotNull(this.masterLayout_)?this.masterLayout_.getInteractors():null};xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane=function(a){return goog.isDefAndNotNull(this.masterLayout_)?this.masterLayout_.getInteractorsByPlane(a):null};xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane=function(a){return goog.isDefAndNotNull(this.masterLayout_)?this.masterLayout_.getFrameByPlane(a):null};
xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane=function(a,b){return goog.isDefAndNotNull(this.masterLayout_)?this.masterLayout_.getInteractorByPlane(a,b):null};xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout=function(a){this.setLayout(a);goog.isDefAndNotNull(this.masterLayout_)&&this.masterLayout_.removeAllInteractors();this.Layouts_[a].addInteractors();this.masterLayout_=this.Layouts_[a]};
xiv.ui.layouts.LayoutHandler.prototype.addLayout=function(a,b){if(goog.object.containsKey(this.LayoutObjects_))throw Error(a+" is an already used layout title!");b&&(this.LayoutObjects_[a]=b)};
xiv.ui.layouts.LayoutHandler.prototype.setLayout=function(a,b){if(!goog.object.containsKey(this.LayoutObjects_,a))throw Error("Invalid layout: "+a+"!");goog.isDefAndNotNull(this.Layouts_)||(this.Layouts_={});goog.object.containsKey(this.Layouts_,a)||(this.Layouts_[a]=new this.LayoutObjects_[a],goog.events.listen(this.Layouts_[a],xiv.ui.layouts.Layout.EventType.RESIZE,this.onLayoutResize_.bind(this)),this.setLayoutEvents_(this.Layouts_[a]),goog.dom.append(this.getElement(),this.Layouts_[a].getElement()));
this.prevLayoutTitle_=this.currLayoutTitle_;this.currLayoutTitle_=a;this.switchLayout(!1===b?0:xiv.ui.layouts.LayoutHandler.ANIM_TIME)};
xiv.ui.layouts.LayoutHandler.prototype.bindLayoutToSliderMousewheels_=function(){var a,b=this.Layouts_[this.currLayoutTitle_].getLayoutFrames();goog.object.forEach(b,function(b,d){a=this.getMasterInteractorByPlane(d,xiv.ui.layouts.Layout.INTERACTORS.SLIDER);goog.isDefAndNotNull(a)&&!goog.isDefAndNotNull(b[xiv.ui.layouts.LayoutHandler.SLIDER_BOUND])&&(a.bindToMouseWheel(b.getElement()),b[xiv.ui.layouts.LayoutHandler.SLIDER_BOUND]=!0)}.bind(this))};
xiv.ui.layouts.LayoutHandler.prototype.onLayoutResize_=function(a){this.dispatchEvent({type:xiv.ui.layouts.LayoutHandler.EventType.RESIZE})};
xiv.ui.layouts.LayoutHandler.prototype.switchLayout=function(a){a=goog.isNumber(a)&&0<=a?a:xiv.ui.layouts.LayoutHandler.ANIM_TIME;this.prevLayoutTitle_!=this.currLayoutTitle_&&(this.prevLayoutTitle_?this.animateLayoutChange_?this.runLayoutChangeAnim_(a):this.runLayoutChangeAnim_(0):(this.setLayoutVisible_(this.currLayoutTitle_),this.setLayoutOpacity_(this.currLayoutTitle_,1)))};
xiv.ui.layouts.LayoutHandler.prototype.storeAndAppendLayoutFrameChildren_=function(a,b,c){goog.array.forEach(goog.dom.getChildren(a.getElement()),function(a){goog.isDefAndNotNull(this.planeChildren_[b])||(this.planeChildren_[b]=[]);this.planeChildren_[b].push(a)}.bind(this))};xiv.ui.layouts.LayoutHandler.prototype.setTransitionElementChildren_=function(){goog.object.forEach(this.transitionElts_,function(a){goog.dom.append(this.getElement().parentNode,a)}.bind(this))};
xiv.ui.layouts.LayoutHandler.prototype.generateTransitionAnims_=function(a){var b=[];goog.object.forEach(this.transitionElts_,function(c,d){b=goog.array.concat(b,nrg.fx.generateAnimations(c,this.asIsDims_[d],this.toBeDims_[d],a))}.bind(this));return b};
xiv.ui.layouts.LayoutHandler.prototype.runLayoutChangeAnim_=function(a){var b=this.Layouts_[this.currLayoutTitle_].getLayoutFrames(),c;this.setLayoutVisible_(this.currLayoutTitle_);this.setLayoutOpacity_(this.currLayoutTitle_,1);goog.isDefAndNotNull(this.asIsDims_)&&goog.object.clear(this.asIsDims_);goog.isDefAndNotNull(this.toBeDims_)&&goog.object.clear(this.toBeDims_);this.asIsDims_={};this.toBeDims_={};goog.object.forEach(this.Layouts_[this.prevLayoutTitle_].getLayoutFrames(),function(a,e){c=a.getElement().cloneNode(!1);
this.transitionElts_[e]=c;this.storeAndAppendLayoutFrameChildren_(a,e,c);goog.object.forEach(this.planeChildren_,function(a,b){goog.array.forEach(a,function(a){goog.dom.removeNode(a);goog.isDefAndNotNull(this.transitionElts_[b])&&goog.dom.appendChild(this.transitionElts_[b],a)}.bind(this))}.bind(this));if(goog.object.containsKey(b,e)){var f=nrg.fx.generateTransitionDims(a.getElement(),b[e].getElement());this.asIsDims_[e]=f.asIs;this.toBeDims_[e]=f.toBe}else this.asIsDims_[e]={"z-index":0},this.toBeDims_[e]=
{opacity:0}}.bind(this));this.setTransitionElementChildren_();nrg.fx.parallelAnimate(this.generateTransitionAnims_(a),this.onLayoutChangeStart_.bind(this),this.onLayoutChanging_.bind(this),this.onLayoutChangeEnd_.bind(this))};xiv.ui.layouts.LayoutHandler.prototype.onLayoutChangeStart_=function(){this.hideAllLayouts();this.layoutChanging_=!0;this.dispatchEvent({type:xiv.ui.layouts.LayoutHandler.EventType.LAYOUT_CHANGE_START,transitionElements:this.transitionElts_})};
xiv.ui.layouts.LayoutHandler.SLIDER_BOUND=goog.string.createUniqueString();xiv.ui.layouts.LayoutHandler.prototype.onLayoutChanging_=function(){this.dispatchEvent({type:xiv.ui.layouts.LayoutHandler.EventType.LAYOUT_CHANGING,transitionElements:this.transitionElts_})};
xiv.ui.layouts.LayoutHandler.prototype.onLayoutChangeEnd_=function(){var a=this.Layouts_[this.currLayoutTitle_].getLayoutFrames();goog.object.forEach(a,function(a,c){goog.isDefAndNotNull(this.planeChildren_[c])&&goog.array.forEach(this.planeChildren_[c],function(c){goog.dom.appendChild(a.getElement(),c)})}.bind(this));goog.object.forEach(a,function(a,c){goog.isDefAndNotNull(this.toBeDims_[c])&&nrg.style.setStyle(a.getElement(),this.toBeDims_[c])}.bind(this));this.Layouts_[this.currLayoutTitle_]!==
this.masterLayout_&&this.Layouts_[this.currLayoutTitle_].setInteractors(this.getMasterInteractors());this.disposeTransitionElts_();this.layoutChanging_=!1;this.setLayoutVisible_(this.currLayoutTitle_);this.setLayoutOpacity_(this.currLayoutTitle_,1);this.disposeTransitionDims_();this.dispatchEvent({type:xiv.ui.layouts.LayoutHandler.EventType.LAYOUT_CHANGE_END,frames:a});this.bindLayoutToSliderMousewheels_();this.updateStyle()};
xiv.ui.layouts.LayoutHandler.prototype.setLayoutOpacity_=function(a,b){this.Layouts_[a].getElement().style.opacity=b;this.Layouts_[a].updateStyle()};xiv.ui.layouts.LayoutHandler.prototype.setLayoutVisible_=function(a){this.Layouts_[a].getElement().style.visibility="visible";this.Layouts_[a].updateStyle()};xiv.ui.layouts.LayoutHandler.prototype.setLayoutHidden_=function(a){this.Layouts_[a].getElement().style.visibility="hidden";this.Layouts_[a].updateStyle()};
xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts=function(){goog.object.forEach(this.Layouts_,function(a,b){a.getElement().style.visibility="hidden";a.updateStyle()}.bind(this))};xiv.ui.layouts.LayoutHandler.prototype.disposeTransitionElts_=function(){goog.object.forEach(this.transitionElts_,function(a){goog.dom.removeNode(a);delete a})};
xiv.ui.layouts.LayoutHandler.prototype.setLayoutEvents_=function(a){goog.object.forEach(a.getLayoutFrames(),function(a){goog.events.listen(a.getElement(),goog.events.EventType.DBLCLICK,function(a){})})};xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked=function(a){this.planeDoubleClickedCallback_.push(a)};xiv.ui.layouts.LayoutHandler.prototype.setLayoutFramesDoubleClicked_=function(a){};
xiv.ui.layouts.LayoutHandler.prototype.updateStyle=function(){xiv.ui.layouts.LayoutHandler.superClass_.updateStyle.call(this);this.Layouts_[this.currLayoutTitle_].updateStyle()};
xiv.ui.layouts.LayoutHandler.prototype.disposeTransitionDims_=function(){goog.isDefAndNotNull(this.asIsDims_)&&(goog.object.forEach(this.asIsDims_,function(a){goog.object.clear(a)}),goog.object.clear(this.toBeDims_),delete this.toBeDims_);goog.isDefAndNotNull(this.toBeDims_)&&(goog.object.forEach(this.toBeDims_,function(a){goog.object.clear(a)}),goog.object.clear(this.toBeDims_),delete this.toBeDims_)};
xiv.ui.layouts.LayoutHandler.prototype.disposeInternal=function(){xiv.ui.layouts.LayoutHandler.superClass_.disposeInternal.call(this);this.disposeTransitionDims_();delete this.transitionElts_;goog.object.clear(this.planeChildren_);delete this.planeChildren_;delete this.masterLayout_;this.disposeComponentMap(this.Layouts_);delete this.Layouts_;goog.object.clear(this.LayoutObjects_);delete this.LayoutObjects_;delete this.currLayoutTitle_;delete this.prevLayoutTitle_};
goog.exportSymbol("xiv.ui.layouts.LayoutHandler.EventType",xiv.ui.layouts.LayoutHandler.EventType);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.ID_PREFIX",xiv.ui.layouts.LayoutHandler.ID_PREFIX);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",xiv.ui.layouts.LayoutHandler.CSS_SUFFIX);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.ANIM_TIME",xiv.ui.layouts.LayoutHandler.ANIM_TIME);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",xiv.ui.layouts.LayoutHandler.SLIDER_BOUND);
goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",xiv.ui.layouts.LayoutHandler.prototype.layoutChanging);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame);
goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",xiv.ui.layouts.LayoutHandler.prototype.updateInteractors);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane);
goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.addLayout",xiv.ui.layouts.LayoutHandler.prototype.addLayout);
goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.setLayout",xiv.ui.layouts.LayoutHandler.prototype.setLayout);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",xiv.ui.layouts.LayoutHandler.prototype.switchLayout);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked);
goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",xiv.ui.layouts.LayoutHandler.prototype.updateStyle);goog.exportSymbol("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",xiv.ui.layouts.LayoutHandler.prototype.disposeInternal);goog.math.Vec2=function(a,b){this.x=a;this.y=b};goog.inherits(goog.math.Vec2,goog.math.Coordinate);goog.math.Vec2.randomUnit=function(){var a=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(a),Math.sin(a))};goog.math.Vec2.random=function(){var a=Math.sqrt(Math.random()),b=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(b)*a,Math.sin(b)*a)};goog.math.Vec2.fromCoordinate=function(a){return new goog.math.Vec2(a.x,a.y)};
goog.math.Vec2.prototype.clone=function(){return new goog.math.Vec2(this.x,this.y)};goog.math.Vec2.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};goog.math.Vec2.prototype.squaredMagnitude=function(){return this.x*this.x+this.y*this.y};goog.math.Vec2.prototype.scale=goog.math.Coordinate.prototype.scale;goog.math.Vec2.prototype.invert=function(){this.x=-this.x;this.y=-this.y;return this};goog.math.Vec2.prototype.normalize=function(){return this.scale(1/this.magnitude())};
goog.math.Vec2.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};goog.math.Vec2.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;return this};goog.math.Vec2.prototype.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};goog.math.Vec2.rotateAroundPoint=function(a,b,c){return a.clone().subtract(b).rotate(c).add(b)};goog.math.Vec2.prototype.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};
goog.math.Vec2.distance=goog.math.Coordinate.distance;goog.math.Vec2.squaredDistance=goog.math.Coordinate.squaredDistance;goog.math.Vec2.equals=goog.math.Coordinate.equals;goog.math.Vec2.sum=function(a,b){return new goog.math.Vec2(a.x+b.x,a.y+b.y)};goog.math.Vec2.difference=function(a,b){return new goog.math.Vec2(a.x-b.x,a.y-b.y)};goog.math.Vec2.dot=function(a,b){return a.x*b.x+a.y*b.y};
goog.math.Vec2.lerp=function(a,b,c){return new goog.math.Vec2(goog.math.lerp(a.x,b.x,c),goog.math.lerp(a.y,b.y,c))};xiv.ui.ctrl.CheckboxController=function(){xiv.ui.ctrl.XtkController.call(this);this.setLabel("Display All");this.checkboxHolder_=goog.dom.createDom("div",{id:"CheckboxHodler_"+goog.string.createUniqueString()});goog.dom.classes.add(this.checkboxHolder_,xiv.ui.ctrl.CheckboxController.CSS.CHECKBOXHOLDER);this.checkbox_=new goog.ui.Checkbox(!0);this.checkbox_.decorate(this.checkboxHolder_);this.setComponent(this.checkbox_);goog.events.listen(this.checkbox_,goog.events.EventType.CHANGE,this.dispatchComponentEvent.bind(this))};
goog.inherits(xiv.ui.ctrl.CheckboxController,xiv.ui.ctrl.XtkController);goog.exportSymbol("xiv.ui.ctrl.CheckboxController",xiv.ui.ctrl.CheckboxController);xiv.ui.ctrl.CheckboxController.ID_PREFIX="xiv.ui.ctrl.CheckboxController";xiv.ui.ctrl.CheckboxController.CSS_SUFFIX={CHECKBOXHOLDER:"checkboxholder"};xiv.ui.ctrl.CheckboxController.prototype.setChecked=function(a){this.getComponent().setChecked(a);this.dispatchComponentEvent()};
xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent=function(){this.dispatchEvent({type:xiv.ui.ctrl.XtkController.EventType.CHANGE,checked:this.checkbox_.isChecked()})};xiv.ui.ctrl.CheckboxController.prototype.disposeInternal=function(){xiv.ui.ctrl.CheckboxController.superClass_.disposeInternal.call(this);goog.dom.removeNode(this.checkboxHolder_);delete this.checkboxHolder_;goog.events.removeAll(this.checkbox_);this.checkbox_.dispose();delete this.checkbox_};
goog.exportSymbol("xiv.ui.ctrl.CheckboxController.ID_PREFIX",xiv.ui.ctrl.CheckboxController.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",xiv.ui.ctrl.CheckboxController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.CheckboxController.prototype.setChecked",xiv.ui.ctrl.CheckboxController.prototype.setChecked);goog.exportSymbol("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent);
goog.exportSymbol("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",xiv.ui.ctrl.CheckboxController.prototype.disposeInternal);nrg.ui.Thumbnail=function(){nrg.ui.Component.call(this);this.image_=goog.dom.createDom("img",{id:"nrg.ui.Thumbnail_"+goog.string.createUniqueString()});goog.dom.append(this.getElement(),this.image_);this.text_=goog.dom.createDom("div",{id:"DisplayText_"+goog.string.createUniqueString()});goog.dom.append(this.getElement(),this.text_);this.setEvents_();this.setClasses_();this.setHoverListeners_(!0);this.onMouseOut()};goog.inherits(nrg.ui.Thumbnail,nrg.ui.Component);
goog.exportSymbol("nrg.ui.Thumbnail",nrg.ui.Thumbnail);nrg.ui.Thumbnail.EventType={MOUSEOVER:goog.events.getUniqueId("mouseover"),MOUSEOUT:goog.events.getUniqueId("mouseout"),CLICK:goog.events.getUniqueId("click")};nrg.ui.Thumbnail.ID_PREFIX="nrg.ui.Thumbnail";
nrg.ui.Thumbnail.CSS_SUFFIX={IMAGE:"image",TEXT:"text",SELECTED:"selected",MOUSEOVER:"mouseover",IMAGE_MOUSEOVER:"image-mouseover",TEXT_MOUSEOVER:"text-mouseover",HIGHLIGHT:"highlight",ACTIVE:"active",IMAGE_ACTIVE:"image-active",TEXT_ACTIVE:"text-active",HOVERCLONE:"hoverclone"};nrg.ui.Thumbnail.HOVERABLE_PREFIX="HOVERABLE_";nrg.ui.Thumbnail.prototype.brokenThumbnailUrl_=null;nrg.ui.Thumbnail.prototype.hoverable_=null;nrg.ui.Thumbnail.prototype.isActive_=!1;nrg.ui.Thumbnail.prototype.getImage=function(){return this.image_};
nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl=function(a,b){this.brokenThumbnailUrl_=a;this.image_.onerror=function(){this.image_.onerror="";this.image_.src=this.brokenThumbnailUrl_;goog.isDefAndNotNull(b)&&b()}.bind(this)};nrg.ui.Thumbnail.prototype.getTextElement=function(){return this.text_};nrg.ui.Thumbnail.prototype.getText=function(){for(var a=this.text_;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
nrg.ui.Thumbnail.prototype.getHoverable=function(){return this.hoverable_=this.hoverable_?this.hoverable_:this.getElement()};nrg.ui.Thumbnail.prototype.isActive=function(){return this.isActive_};nrg.ui.Thumbnail.prototype.setImage=function(a){this.image_.src=a;goog.dom.classes.set(this.image_,nrg.ui.Thumbnail.CSS.IMAGE)};nrg.ui.Thumbnail.prototype.setText=function(a){this.text_.innerHTML=a};
nrg.ui.Thumbnail.prototype.removeHoverable=function(){this.hoverable_&&(this.hoverable_.parentNode&&(this.hoverable_=this.hoverable_.parentNode.removeChild(this.hoverable_)),delete this.hoverable_,this.hoverable_=null)};
nrg.ui.Thumbnail.prototype.createHoverable=function(a,b){this.removeHoverable();this.setHoverListeners_(!1);this.hoverable_=b?b:this.getElement().cloneNode(!0);this.hoverable_.setAttribute("id",nrg.ui.Thumbnail.HOVERABLE_PREFIX+this.getElement().getAttribute("id"));this.hoverable_.style.visibility="hidden";goog.dom.classes.add(this.hoverable_,nrg.ui.Thumbnail.CSS.HOVERCLONE);this.setHoverListeners_(!0);a&&a.appendChild(this.hoverable_);this.setEvents_()};
nrg.ui.Thumbnail.prototype.setActive=function(a,b){var c=this.getElement();(this.isActive_=a)?(b&&goog.dom.classes.add(c,nrg.ui.Thumbnail.CSS.HIGHLIGHT),goog.dom.classes.add(c,nrg.ui.Thumbnail.CSS.ACTIVE),goog.dom.classes.add(this.text_,nrg.ui.Thumbnail.CSS.TEXT_ACTIVE),goog.dom.classes.add(this.image_,nrg.ui.Thumbnail.CSS.IMAGE_ACTIVE)):(goog.dom.classes.remove(c,nrg.ui.Thumbnail.CSS.HIGHLIGHT),goog.dom.classes.remove(c,nrg.ui.Thumbnail.CSS.ACTIVE),goog.dom.classes.remove(this.text_,nrg.ui.Thumbnail.CSS.TEXT_ACTIVE),
goog.dom.classes.remove(this.image_,nrg.ui.Thumbnail.CSS.IMAGE_ACTIVE))};nrg.ui.Thumbnail.prototype.updateStyle=function(a){a&&this.getElement()&&nrg.style.setStyle(this.getElement(),a)};
nrg.ui.Thumbnail.prototype.repositionHoverable=function(){var a=this.getElement(),b=this.getHoverable();if(b!==a){var c=goog.dom.findCommonAncestor(a,b),c=goog.style.getRelativePosition(a,c),d=b.getElementsByTagName("img")[0],e=b.getElementsByTagName("div")[0],f=0,f=d.scrollWidth+e.scrollWidth+25,f=f>a.clientWidth?f:a.clientWidth;nrg.style.setStyle(b,{position:"absolute",left:c.x,top:c.y,width:f,visibility:"visible"})}};
nrg.ui.Thumbnail.prototype.onMouseOver=function(){var a=this.getHoverable();goog.dom.classes.add(a,nrg.ui.Thumbnail.CSS.MOUSEOVER);goog.dom.classes.add(a.childNodes[1],nrg.ui.Thumbnail.CSS.TEXT_MOUSEOVER);goog.dom.classes.add(a.childNodes[0],nrg.ui.Thumbnail.CSS.IMAGE_MOUSEOVER);a!==this.getElement()&&this.repositionHoverable();this.dispatchEvent(nrg.ui.Thumbnail.EventType.MOUSEOVER)};
nrg.ui.Thumbnail.prototype.onMouseOut=function(){var a=this.getHoverable();a&&1<a.childNodes.length&&(goog.dom.classes.remove(a,nrg.ui.Thumbnail.CSS.MOUSEOVER),goog.dom.classes.remove(a.childNodes[1],nrg.ui.Thumbnail.CSS.TEXT_MOUSEOVER),goog.dom.classes.remove(a.childNodes[0],nrg.ui.Thumbnail.CSS.IMAGE_MOUSEOVER),a.style.visibility=a!==this.getElement()?"hidden":"visible");this.dispatchEvent(nrg.ui.Thumbnail.EventType.MOUSEOUT)};
nrg.ui.Thumbnail.prototype.setHoverListeners_=function(a){var b=this.getHoverable();a?(goog.events.listen(b,goog.events.EventType.MOUSEOVER,this.onMouseOver.bind(this)),goog.events.listen(b,goog.events.EventType.MOUSEOUT,this.onMouseOut.bind(this))):(goog.events.unlisten(b,goog.events.EventType.MOUSEOVER,this.onMouseOver.bind(this)),goog.events.unlisten(b,goog.events.EventType.MOUSEOUT,this.onMouseOut.bind(this)))};
nrg.ui.Thumbnail.prototype.setEvents_=function(){goog.events.hasListener(this.getHoverable(),nrg.ui.Thumbnail.EventType.CLICK)&&goog.events.unlistenByKey(nrg.ui.Thumbnail.EventType.CLICK);goog.events.listen(this.getHoverable(),goog.events.EventType.CLICK,function(){this.dispatchEvent({type:nrg.ui.Thumbnail.EventType.CLICK})}.bind(this))};
nrg.ui.Thumbnail.prototype.setClasses_=function(){goog.dom.classes.set(this.getElement(),nrg.ui.Thumbnail.ELEMENT_CLASS);goog.dom.classes.set(this.image_,nrg.ui.Thumbnail.CSS.IMAGE);goog.dom.classes.set(this.text_,nrg.ui.Thumbnail.CSS.TEXT)};
nrg.ui.Thumbnail.prototype.disposeInternal=function(){nrg.ui.Thumbnail.superClass_.disposeInternal.call(this);goog.events.removeAll(this);goog.events.removeAll(this.getElement());goog.isDefAndNotNull(this.hoverable_)&&(goog.events.removeAll(this.hoverable_),goog.dom.removeNode(this.hoverable_),delete this.hoverable_);goog.dom.removeNode(this.image_);delete this.image_;goog.dom.removeNode(this.text_);delete this.text_;delete this.brokenThumbnalUrl_;delete this.isActive_};
goog.exportSymbol("nrg.ui.Thumbnail.EventType",nrg.ui.Thumbnail.EventType);goog.exportSymbol("nrg.ui.Thumbnail.ID_PREFIX",nrg.ui.Thumbnail.ID_PREFIX);goog.exportSymbol("nrg.ui.Thumbnail.CSS_SUFFIX",nrg.ui.Thumbnail.CSS_SUFFIX);goog.exportSymbol("nrg.ui.Thumbnail.HOVERABLE_PREFIX",nrg.ui.Thumbnail.HOVERABLE_PREFIX);goog.exportSymbol("nrg.ui.Thumbnail.prototype.getImage",nrg.ui.Thumbnail.prototype.getImage);goog.exportSymbol("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl);
goog.exportSymbol("nrg.ui.Thumbnail.prototype.getTextElement",nrg.ui.Thumbnail.prototype.getTextElement);goog.exportSymbol("nrg.ui.Thumbnail.prototype.getText",nrg.ui.Thumbnail.prototype.getText);goog.exportSymbol("nrg.ui.Thumbnail.prototype.getHoverable",nrg.ui.Thumbnail.prototype.getHoverable);goog.exportSymbol("nrg.ui.Thumbnail.prototype.isActive",nrg.ui.Thumbnail.prototype.isActive);goog.exportSymbol("nrg.ui.Thumbnail.prototype.setImage",nrg.ui.Thumbnail.prototype.setImage);
goog.exportSymbol("nrg.ui.Thumbnail.prototype.setText",nrg.ui.Thumbnail.prototype.setText);goog.exportSymbol("nrg.ui.Thumbnail.prototype.removeHoverable",nrg.ui.Thumbnail.prototype.removeHoverable);goog.exportSymbol("nrg.ui.Thumbnail.prototype.createHoverable",nrg.ui.Thumbnail.prototype.createHoverable);goog.exportSymbol("nrg.ui.Thumbnail.prototype.setActive",nrg.ui.Thumbnail.prototype.setActive);goog.exportSymbol("nrg.ui.Thumbnail.prototype.updateStyle",nrg.ui.Thumbnail.prototype.updateStyle);
goog.exportSymbol("nrg.ui.Thumbnail.prototype.repositionHoverable",nrg.ui.Thumbnail.prototype.repositionHoverable);goog.exportSymbol("nrg.ui.Thumbnail.prototype.onMouseOver",nrg.ui.Thumbnail.prototype.onMouseOver);goog.exportSymbol("nrg.ui.Thumbnail.prototype.onMouseOut",nrg.ui.Thumbnail.prototype.onMouseOut);goog.exportSymbol("nrg.ui.Thumbnail.prototype.disposeInternal",nrg.ui.Thumbnail.prototype.disposeInternal);nrg.ui.ScrollableContainer=function(a){nrg.ui.Component.call(this)};goog.inherits(nrg.ui.ScrollableContainer,nrg.ui.Component);goog.exportSymbol("nrg.ui.ScrollableContainer",nrg.ui.ScrollableContainer);nrg.ui.ScrollableContainer.ID_PREFIX="nrg.ui.ScrollableContainer";nrg.ui.ScrollableContainer.CSS_SUFFIX={SCROLLAREA:"scrollarea",SLIDER:"slider",SLIDER_THUMB:"slider-thumb",SLIDER_TRACK:"slider-track",SLIDER_THUMB_HOVERED:"slider-thumb-hovered",SLIDER_TRACK_HOVERED:"slider-track-hovered"};
nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH=30;nrg.ui.ScrollableContainer.prototype.createScrollArea_=function(){this.scrollArea_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+goog.string.createUniqueString(),"class":nrg.ui.ScrollableContainer.CSS.SCROLLAREA});goog.dom.appendChild(this.getElement(),this.scrollArea_)};
nrg.ui.ScrollableContainer.prototype.render=function(a){nrg.ui.ScrollableContainer.superClass_.render.call(this,a);goog.isDefAndNotNull(this.scrollArea_)||this.createScrollArea_();this.Slider=new nrg.ui.Slider("vertical");this.Slider.render(this.getElement());this.setSliderEvents_();this.setSliderStyles_();this.updateStyle();this.mapSliderToContents()};nrg.ui.ScrollableContainer.prototype.addContents=function(a){this.isInDocument()||this.render();goog.dom.append(this.scrollArea_,a);this.mapSliderToContents()};
nrg.ui.ScrollableContainer.prototype.getElement=function(){return this.element_};nrg.ui.ScrollableContainer.prototype.getSlider=function(){return this.Slider};nrg.ui.ScrollableContainer.prototype.getScrollArea=function(){return this.scrollArea_};nrg.ui.ScrollableContainer.prototype.updateStyle=function(a){a&&nrg.style.setStyle(this.element_,a)};
nrg.ui.ScrollableContainer.prototype.setSliderStyles_=function(){goog.dom.classes.add(this.Slider.getElement(),nrg.ui.ScrollableContainer.CSS.SLIDER);goog.dom.classes.add(this.Slider.getThumb(),nrg.ui.ScrollableContainer.CSS.SLIDER_THUMB);goog.dom.classes.add(this.Slider.getTrack(),nrg.ui.ScrollableContainer.CSS.SLIDER_TRACK);this.Slider.addThumbHoverClass(nrg.ui.ScrollableContainer.CSS.SLIDER_THUMB_HOVERED);this.Slider.addTrackHoverClass(nrg.ui.ScrollableContainer.CSS.SLIDER_TRACK_HOVERED)};
nrg.ui.ScrollableContainer.prototype.mapSliderToContents=function(){var a=goog.style.getSize(this.element_).height,b=goog.style.getSize(this.scrollArea_).height,c=[this.Slider.getMinimum(),this.Slider.getMaximum()],d=[0,b-a];a<b?(this.Slider.getElement().style.opacity=1,nrg.style.setStyle(this.Slider.getThumb(),{height:a/b*a}),this.Slider.setEnabled(!0),a=this.Slider.getMaximum()-this.Slider.getValue(),c=nrg.convert.remap1D(a,c,d).remappedVal,nrg.style.setStyle(this.scrollArea_,{top:-c})):(this.Slider.getElement().style.opacity=
0,this.Slider.setEnabled(!1),this.Slider.setValue(100))};nrg.ui.ScrollableContainer.prototype.setSliderEvents_=function(){goog.events.listen(this.Slider,nrg.ui.Slider.EventType.SLIDE,this.mapSliderToContents.bind(this));this.Slider.bindToMouseWheel(this.getElement())};
nrg.ui.ScrollableContainer.prototype.disposeInternal=function(){nrg.ui.ScrollableContainer.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.Slider)&&(goog.events.removeAll(this.Slider),this.Slider.dispose(),delete this.Slider);goog.isDefAndNotNull(this.scrollArea_)&&(goog.dom.removeNode(this.scrollArea_),delete this.scrollArea_)};goog.exportSymbol("nrg.ui.ScrollableContainer.ID_PREFIX",nrg.ui.ScrollableContainer.ID_PREFIX);
goog.exportSymbol("nrg.ui.ScrollableContainer.CSS_SUFFIX",nrg.ui.ScrollableContainer.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH);goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.render",nrg.ui.ScrollableContainer.prototype.render);goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.addContents",nrg.ui.ScrollableContainer.prototype.addContents);
goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.getElement",nrg.ui.ScrollableContainer.prototype.getElement);goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.getSlider",nrg.ui.ScrollableContainer.prototype.getSlider);goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.getScrollArea",nrg.ui.ScrollableContainer.prototype.getScrollArea);goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.updateStyle",nrg.ui.ScrollableContainer.prototype.updateStyle);
goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",nrg.ui.ScrollableContainer.prototype.mapSliderToContents);goog.exportSymbol("nrg.ui.ScrollableContainer.prototype.disposeInternal",nrg.ui.ScrollableContainer.prototype.disposeInternal);nrg.ui.ScrollableZippyTree=function(){nrg.ui.ScrollableContainer.call(this)};goog.inherits(nrg.ui.ScrollableZippyTree,nrg.ui.ScrollableContainer);goog.exportSymbol("nrg.ui.ScrollableZippyTree",nrg.ui.ScrollableZippyTree);nrg.ui.ScrollableZippyTree.EventType={};nrg.ui.ScrollableZippyTree.ID_PREFIX="nrg.ui.ScrollableZippyTree";nrg.ui.ScrollableZippyTree.CSS_SUFFIX={ZIPPYTREE:"zippytree"};
nrg.ui.ScrollableZippyTree.prototype.render=function(a){nrg.ui.ScrollableZippyTree.superClass_.render.call(this,a);this.ZippyTree=new nrg.ui.ZippyTree;goog.dom.classes.add(this.ZippyTree.getElement(),nrg.ui.ScrollableZippyTree.CSS.ZIPPYTREE);goog.dom.appendChild(this.getScrollArea(),this.ZippyTree.getElement());this.setZippyTreeEvents();this.Slider.setUseDeltaToScroll(!0,.3)};
nrg.ui.ScrollableZippyTree.prototype.addContents=function(a,b){this.ZippyTree.addContents(a,b);a=goog.isArray(a)?a:[a];goog.array.forEach(a,function(a){}.bind(this));this.getSlider().bindToMouseWheel(this.ZippyTree.getElement())};nrg.ui.ScrollableZippyTree.prototype.expandAll=function(){this.ZippyTree.expandAll()};nrg.ui.ScrollableZippyTree.prototype.collapseAll=function(){this.ZippyTree.collapseAll()};nrg.ui.ScrollableZippyTree.prototype.setExpanded=function(a,b){this.ZippyTree.setExpanded(a,b)};
nrg.ui.ScrollableZippyTree.prototype.getZippyTree=function(){return this.ZippyTree};nrg.ui.ScrollableZippyTree.prototype.addFolders=function(a){this.ZippyTree.createBranch(a);this.mapSliderToContents()};
nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents=function(){goog.events.listen(this.ZippyTree,nrg.ui.ZippyTree.EventType.CONTENTADDED,this.mapSliderToContents.bind(this));goog.events.listen(this.ZippyTree,nrg.ui.ZippyNode.EventType.EXPANDED,this.mapSliderToContents.bind(this));goog.events.listen(this.ZippyTree,nrg.ui.ZippyNode.EventType.COLLAPSED,this.mapSliderToContents.bind(this));goog.events.listen(this.ZippyTree,nrg.ui.ZippyNode.EventType.NODEADDED,this.mapSliderToContents.bind(this))};
nrg.ui.ScrollableZippyTree.prototype.updateStyle=function(a){a&&nrg.style.setStyle(this.getElement(),a)};nrg.ui.ScrollableZippyTree.prototype.disposeInternal=function(){nrg.ui.ScrollableZippyTree.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.ZippyTree)&&(goog.events.removeAll(this.ZippyTree),this.ZippyTree.dispose(),delete this.ZippyTree)};goog.exportSymbol("nrg.ui.ScrollableZippyTree.EventType",nrg.ui.ScrollableZippyTree.EventType);
goog.exportSymbol("nrg.ui.ScrollableZippyTree.ID_PREFIX",nrg.ui.ScrollableZippyTree.ID_PREFIX);goog.exportSymbol("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",nrg.ui.ScrollableZippyTree.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.render",nrg.ui.ScrollableZippyTree.prototype.render);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.addContents",nrg.ui.ScrollableZippyTree.prototype.addContents);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.expandAll",nrg.ui.ScrollableZippyTree.prototype.expandAll);
goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.collapseAll",nrg.ui.ScrollableZippyTree.prototype.collapseAll);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.setExpanded",nrg.ui.ScrollableZippyTree.prototype.setExpanded);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",nrg.ui.ScrollableZippyTree.prototype.getZippyTree);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.addFolders",nrg.ui.ScrollableZippyTree.prototype.addFolders);
goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.updateStyle",nrg.ui.ScrollableZippyTree.prototype.updateStyle);goog.exportSymbol("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",nrg.ui.ScrollableZippyTree.prototype.disposeInternal);X.interactor=function(a){X.base.call(this);this._classname="interactor";this._element=a;this._mouseWheelHandler=this._mouseOutListener=this._mouseMoveListener=this._mouseUpListener=this._mouseDownListener=this._mouseWheelListener=null;this._mouseInside=!0;this._rightButtonDown=this._middleButtonDown=this._leftButtonDown=!1;this._mousePosition=[0,0];this._lastMousePosition=new X.vector(0,0,0);this._lastTouchPosition=new X.vector(0,0,0);this.lastFingerDistance=0;this._touchHoverTrigger=this._hoverTrigger=
null;this._shiftDown=!1;this._config={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}};goog.inherits(X.interactor,X.base);X.interactor.prototype.__defineGetter__("config",function(){return this._config});X.interactor.prototype.__defineGetter__("leftButtonDown",function(){return this._leftButtonDown});X.interactor.prototype.__defineGetter__("middleButtonDown",function(){return this._middleButtonDown});
X.interactor.prototype.__defineGetter__("rightButtonDown",function(){return this._rightButtonDown});
X.interactor.prototype.init=function(){this._config.MOUSEWHEEL_ENABLED?(this._mouseWheelHandler=new goog.events.MouseWheelHandler(this._element),this._mouseWheelListener=goog.events.listen(this._mouseWheelHandler,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.onMouseWheel_.bind(this))):(goog.events.unlistenByKey(this._mouseWheelListener),this._mouseWheelHandler=null);this._config.MOUSECLICKS_ENABLED?(this._mouseDownListener=goog.events.listen(this._element,goog.events.EventType.MOUSEDOWN,
this.onMouseDown_.bind(this)),this._mouseUpListener=goog.events.listen(this._element,goog.events.EventType.MOUSEUP,this.onMouseUp_.bind(this))):(goog.events.unlistenByKey(this._mouseDownListener),goog.events.unlistenByKey(this._mouseUpListener));this._element.oncontextmenu=this._config.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this._config.KEYBOARD_ENABLED?this.onKey_.bind(this):null;this._config.TOUCH_ENABLED?(this._config.TOUCH_BOUNCING_ENABLED||document.body.addEventListener("touchmove",
function(a){a.preventDefault()},!1),this._touchStartListener=goog.events.listen(this._element,goog.events.EventType.TOUCHSTART,this.onTouchStart_.bind(this)),this._touchMoveListener=goog.events.listen(this._element,goog.events.EventType.TOUCHMOVE,this.onTouchMove_.bind(this)),this._touchEndListener=goog.events.listen(this._element,goog.events.EventType.TOUCHEND,this.onTouchEnd_.bind(this))):(goog.events.unlistenByKey(this._touchStartListener),goog.events.unlistenByKey(this._touchMoveListener),goog.events.unlistenByKey(this._touchEndListener));
goog.events.unlistenByKey(this._mouseMoveListener);goog.events.unlistenByKey(this._mouseOutListener);this._mouseMoveListener=goog.events.listen(this._element,goog.events.EventType.MOUSEMOVE,this.onMouseMovementInside_.bind(this));this._mouseOutListener=goog.events.listen(this._element,goog.events.EventType.MOUSEOUT,this.onMouseMovementOutside_.bind(this))};
X.interactor.prototype.onMouseDown_=function(a){a.button==goog.events.BrowserEvent.MouseButton.LEFT?this._leftButtonDown=!0:a.button==goog.events.BrowserEvent.MouseButton.MIDDLE?this._middleButtonDown=!0:a.button==goog.events.BrowserEvent.MouseButton.RIGHT&&(this._rightButtonDown=!0);eval("this.onMouseDown("+this._leftButtonDown+","+this._middleButtonDown+","+this._rightButtonDown+")");this.hoverEnd_();a.preventDefault()};X.interactor.prototype.onMouseDown=function(a,b,c){};
X.interactor.prototype.onMouseUp_=function(a){a.button==goog.events.BrowserEvent.MouseButton.LEFT?this._leftButtonDown=!1:a.button==goog.events.BrowserEvent.MouseButton.MIDDLE?this._middleButtonDown=!1:a.button==goog.events.BrowserEvent.MouseButton.RIGHT&&(this._rightButtonDown=!1);eval("this.onMouseUp("+this._leftButtonDown+","+this._middleButtonDown+","+this._rightButtonDown+")");this.hoverEnd_();a.preventDefault()};X.interactor.prototype.__defineGetter__("mousePosition",function(){return this._mousePosition});
X.interactor.prototype.onMouseUp=function(a,b,c){};X.interactor.prototype.onMouseMovementOutside_=function(a){this._mouseInside=!1;this._config.KEYBOARD_ENABLED&&(window.onkeydown=null);this._rightButtonDown=this._middleButtonDown=this._leftButtonDown=!1;this.hoverEnd_();this._lastMousePosition=new X.vector(0,0,0);a.preventDefault()};X.interactor.prototype.onMouseMove=function(a){};
X.interactor.prototype.onTouchStart_=function(a){a.preventDefault();a.init(a.getBrowserEvent().targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this._lastTouchPosition=new X.vector(a.clientX,a.clientY,0);this._touchHoverTrigger=setTimeout(this.onTouchHover_.bind(this,a),500)};X.interactor.prototype.onTouchStart=function(a,b){};
X.interactor.prototype.onTouchHover_=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new X.event.ZoomEvent;a._in=!0;a._fast=this instanceof X.interactor3D;this.dispatchEvent(a);this._touchHovering=!0};X.interactor.prototype.onTouchHover=function(a,b){};
X.interactor.prototype.resetTouchHover_=function(){clearTimeout(this._touchHoverTrigger);if(this._touchHovering){var a=new X.event.ZoomEvent;a._in=!1;a._fast=this instanceof X.interactor3D;this.dispatchEvent(a)}this._touchHovering=!1};X.interactor.prototype.onTouchEnd_=function(a){a.preventDefault();eval("this.onTouchEnd()");this.resetTouchHover_()};X.interactor.prototype.onTouchEnd=function(){};
X.interactor.prototype.onTouchMove_=function(a){a.preventDefault();this._touchHovering||this.resetTouchHover_();this.touchmoveEvent=a=a.getBrowserEvent();eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new X.vector(c[0],c[1],0);var b=c[0]>3*this._element.clientWidth/4,d=c[0]<this._element.clientWidth/4,e=c[1]<this._element.clientHeight/4,c=c[1]>3*this._element.clientHeight/4,c=!b&&!d&&!e&&!c,e=this._lastTouchPosition.subtract(a);
this._lastTouchPosition=a.clone();if(this._touchHovering)a=new X.event.PanEvent,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a._distance=e,this.dispatchEvent(a);else if(this instanceof X.interactor2D&&(b||d))a=new X.event.ScrollEvent,a._up=0>e.y,this.dispatchEvent(a);else if(this instanceof X.interactor3D||c)e.scale(3),a=new X.event.RotateEvent,a._distance=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new X.vector(a[0],a[1],
0),b=new X.vector(b[0],b[1],0),e=goog.math.Vec3.squaredDistance(a,b),b=e-this.lastFingerDistance,this.lastFingerDistance=e,this._lastTouchPosition.subtract(a),this._lastTouchPosition=a.clone(),10<Math.abs(b)&&(a=new X.event.ZoomEvent,a._in=0<b,a._fast=this instanceof X.interactor3D,this.dispatchEvent(a)))};X.interactor.prototype.onTouchMove=function(a){};
X.interactor.prototype.onMouseMovementInside_=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this._mouseInside=!0;this._config.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.onKey_.bind(this));a.preventDefault();var b=a.shiftKey;this._shiftDown=b;this._mousePosition=[a.offsetX,a.offsetY];var c=new X.vector(this._mousePosition[0],this._mousePosition[1],0);a=this._lastMousePosition.subtract(c);this._lastMousePosition=c.clone();this._config.HOVERING_ENABLED&&
((0<Math.abs(a.x)||0<Math.abs(a.y)||this._middleButtonDown||this._leftButtonDown||this._rightButtonDown)&&this.hoverEnd_(),this._hoverTrigger=setTimeout(function(){this.hoverEnd_();var a=new X.event.HoverEvent;a._x=c.x;a._y=c.y;this.dispatchEvent(a);this._hoverTrigger=null}.bind(this),300));0!=a.magnitude()&&(this._leftButtonDown&&!b?(b=new X.event.RotateEvent,a.scale(3),b._distance=a,this.dispatchEvent(b)):this._middleButtonDown||this._leftButtonDown&&b?(b=new X.event.PanEvent,b._distance=a,this.dispatchEvent(b)):
this._rightButtonDown&&(b=new X.event.ZoomEvent,b._in=0<a.y,b._fast=!1,this.dispatchEvent(b)))};X.interactor.prototype.hoverEnd_=function(){this._hoverTrigger&&clearTimeout(this._hoverTrigger);var a=new X.event.HoverEndEvent;this.dispatchEvent(a)};X.interactor.prototype.onMouseWheel=function(a){};X.interactor.prototype.onMouseWheel_=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");this.hoverEnd_();a.preventDefault()};X.interactor.prototype.onKey=function(a){};
X.interactor.prototype.onKey_=function(a){if(this._mouseInside){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");this.hoverEnd_();var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82!=f||b||c||d||e?37<=f&&40>=f&&(a.preventDefault(),e?a=new X.event.PanEvent:b?a=new X.event.ZoomEvent:(a=new X.event.RotateEvent,this instanceof X.interactor2D&&(a=new X.event.ScrollEvent)),a&&(c=new X.vector(0,0,0),37==f?(c.x=5,a._up=!1,b&&(a._up=!0,a._in=!0,a._fast=!1)):39==f?(c.x=-5,a._up=!0,b&&(a._in=
!1,a._fast=!1)):38==f?(c.y=5,a._up=!0,b&&(a._in=!0,a._fast=!0)):40==f&&(c.y=-5,a._up=!1,b&&(a._in=!1,a._fast=!0)),a._distance=c,this.dispatchEvent(a))):(a.preventDefault(),a=new X.event.ResetViewEvent,this.dispatchEvent(a))}};goog.exportSymbol("X.interactor",X.interactor);goog.exportSymbol("X.interactor.prototype.init",X.interactor.prototype.init);goog.exportSymbol("X.interactor.prototype.onMouseDown",X.interactor.prototype.onMouseDown);goog.exportSymbol("X.interactor.prototype.onMouseUp",X.interactor.prototype.onMouseUp);
goog.exportSymbol("X.interactor.prototype.onMouseMove",X.interactor.prototype.onMouseMove);goog.exportSymbol("X.interactor.prototype.onMouseWheel",X.interactor.prototype.onMouseWheel);goog.exportSymbol("X.interactor.prototype.onKey",X.interactor.prototype.onKey);goog.exportSymbol("X.interactor.prototype.onTouchStart",X.interactor.prototype.onTouchStart);goog.exportSymbol("X.interactor.prototype.onTouchMove",X.interactor.prototype.onTouchMove);
goog.exportSymbol("X.interactor.prototype.onTouchEnd",X.interactor.prototype.onTouchEnd);goog.exportSymbol("X.interactor.prototype.onTouchHover",X.interactor.prototype.onTouchHover);X.interactor2D=function(a){X.interactor.call(this,a);this._classname="interactor2D"};goog.inherits(X.interactor2D,X.interactor);X.interactor2D.prototype.onMouseWheel_=function(a){X.interactor2D.superClass_.onMouseWheel_.call(this,a);var b=new X.event.ScrollEvent;goog.isDefAndNotNull(a.deltaY)||(a.deltaY=0);b._up=0>a.deltaY;this.dispatchEvent(b)};X.camera=function(a,b){if(!goog.isNumber(a)||!goog.isNumber(b))throw Error("A camera needs valid width and height values.");X.base.call(this);this._classname="camera";this._position=new X.vector(0,100,0);this._focus=new X.vector(0,0,0);this._up=new X.vector(0,0,1);this._width=a;this._height=b;this._view=this.lookAt_(this._position,this._focus)};goog.inherits(X.camera,X.base);
X.camera.prototype.observe=function(a){if(!(goog.isDefAndNotNull(a)&&a instanceof X.interactor))throw Error("Could not observe the interactor.");goog.events.listen(a,X.event.events.ROTATE,this.onRotate_.bind(this));goog.events.listen(a,X.event.events.PAN,this.onPan_.bind(this));goog.events.listen(a,X.event.events.ZOOM,this.onZoom_.bind(this))};X.camera.prototype.onRotate_=function(a){if(!(a instanceof X.event.RotateEvent))throw Error("Received no valid rotate event.");this.rotate(a._distance)};
X.camera.prototype.onZoom_=function(a){if(!(a instanceof X.event.ZoomEvent))throw Error("Received no valid zoom event.");a._in?this.zoomIn(a._fast):this.zoomOut(a._fast)};X.camera.prototype.onPan_=function(a){if(!(a instanceof X.event.PanEvent))throw Error("Received no valid pan event.");this.pan(a._distance)};X.camera.prototype.__defineGetter__("view",function(){return this._view});
X.camera.prototype.__defineSetter__("view",function(a){if(!(goog.isDefAndNotNull(a)&&a instanceof Float32Array))throw Error("Invalid view matrix.");this._view=a});X.camera.prototype.__defineGetter__("position",function(){return[this._position.x,this._position.y,this._position.z]});X.camera.prototype.__defineSetter__("position",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid position.");this._position=new X.vector(a[0],a[1],a[2]);this.reset()});
X.camera.prototype.__defineGetter__("focus",function(){return[this._focus.x,this._focus.y,this._focus.z]});X.camera.prototype.__defineSetter__("focus",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid focus");this._focus=new X.vector(a[0],a[1],a[2]);this.reset()});X.camera.prototype.__defineGetter__("up",function(){return[this._up.x,this._up.y,this._up.z]});
X.camera.prototype.__defineSetter__("up",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid up vector.");this._up=new X.vector(a[0],a[1],a[2]);this.reset()});X.camera.prototype.reset=function(){this._view=this.lookAt_(this._position,this._focus)};X.camera.prototype.rotate=function(a){if(goog.isArray(a)&&2==a.length)a=new X.vector(a[0],a[1],0);else if(!(a instanceof X.vector))throw Error("Invalid distance vector for rotate operation.");return a};
X.camera.prototype.pan=function(a){if(goog.isArray(a)&&2==a.length)a=new X.vector(a[0],a[1],0);else if(!(a instanceof X.vector))throw Error("Invalid distance vector for pan operation.");this._view[12]-=a.x;this._view[13]+=a.y};X.camera.prototype.zoomIn=function(a){var b=20;goog.isDefAndNotNull(a)&&!a&&(b=1);this._view[14]+=b};X.camera.prototype.zoomOut=function(a){var b=20;goog.isDefAndNotNull(a)&&!a&&(b=1);this._view[14]-=b};
X.camera.prototype.lookAt_=function(a,b){if(!(a instanceof X.vector&&b instanceof X.vector))throw Error("3D vectors required for calculating the view.");return X.matrix.identity()};goog.exportSymbol("X.camera",X.camera);goog.exportSymbol("X.camera.prototype.pan",X.camera.prototype.pan);goog.exportSymbol("X.camera.prototype.rotate",X.camera.prototype.rotate);goog.exportSymbol("X.camera.prototype.zoomIn",X.camera.prototype.zoomIn);goog.exportSymbol("X.camera.prototype.zoomOut",X.camera.prototype.zoomOut);CSG.cylinder=function(a){function b(a,b,d){b=b*Math.PI*2;b=k.times(Math.cos(b)).plus(l.times(Math.sin(b)));a=c.plus(e.times(a)).plus(b.times(f));d=b.times(1-Math.abs(d)).plus(g.times(d));return new csgVertex(a,d)}CSG.call(this);a=a||{};var c=new csgVector(a.start||[0,-1,0]),d=new csgVector(a.end||[0,1,0]),e=d.minus(c),f=a.radius||1;a=a.slices||16;for(var g=e.unit(),h=.5<Math.abs(g.y()),k=(new csgVector(h,!h,0)).cross(g).unit(),l=k.cross(g).unit(),h=new csgVertex(c,g.negated()),d=new csgVertex(d,g.unit()),
m=[],n=0;n<a;n++){var p=n/a,q=(n+1)/a;m.push(new csgPolygon([h,b(0,p,-1),b(0,q,-1)]));m.push(new csgPolygon([b(0,q,0),b(0,p,0),b(1,p,0),b(1,q,0)]));m.push(new csgPolygon([d,b(1,q,1),b(1,p,1)]))}return CSG.fromPolygons(m)};goog.inherits(CSG.cylinder,CSG);X.cylinder=function(){X.object.call(this);this._classname="cylinder";this._start=[-10,-10,-10];this._end=[10,10,10];this._radius=10;this._slices=32;inject(this,new X.constructable)};goog.inherits(X.cylinder,X.object);X.cylinder.prototype.__defineGetter__("start",function(){return this._start});X.cylinder.prototype.__defineSetter__("start",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid start");this._start=a});
X.cylinder.prototype.__defineGetter__("end",function(){return this._end});X.cylinder.prototype.__defineSetter__("end",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid end");this._end=a});X.cylinder.prototype.__defineGetter__("radius",function(){return this._radius});X.cylinder.prototype.__defineSetter__("radius",function(a){if(!goog.isNumber(a))throw Error("Invalid radius.");this._radius=a});
X.cylinder.prototype.modified=function(){this.fromCSG(new CSG.cylinder({start:this._start,end:this._end,radius:this._radius,slices:this._slices}));X.cylinder.superClass_.modified.call(this)};goog.exportSymbol("X.cylinder",X.cylinder);goog.exportSymbol("X.cylinder.prototype.modified",X.cylinder.prototype.modified);X.labelmap=function(a){X.volume.call(this);this._classname="labelmap";this._volume=a;this._showOnlyColor=new Float32Array([-255,-255,-255,-255])};goog.inherits(X.labelmap,X.volume);X.labelmap.prototype.modified=function(){var a=new X.event.ModifiedEvent;a._object=this;this.dispatchEvent(a);this._volume.modified()};
X.labelmap.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(goog.isDefAndNotNull(a))if(goog.isArray(a)&&4==a.length)b=a;else{if(!this._colortable)throw Error("No colortable assigned.");b=this._colortable._map.get(a).slice(1,5)}this._showOnlyColor=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});goog.exportSymbol("X.labelmap",X.labelmap);CSG.cube=function(a){CSG.call(this);a=a||{};var b=new csgVector(a.center||[0,0,0]),c=a.radius?a.radius.length?a.radius:[a.radius,a.radius,a.radius]:[1,1,1];return CSG.fromPolygons([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new csgPolygon(a[0].map(function(e){e=new csgVector(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new csgVertex(e,new csgVector(a[1]))}))}))};
goog.inherits(CSG.cube,CSG);X.cube=function(){X.object.call(this);this._classname="cube";this._center=[0,0,0];this._lengthZ=this._lengthY=this._lengthX=20;this._textureCoordinateMap=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];inject(this,new X.constructable)};goog.inherits(X.cube,X.object);X.cube.prototype.__defineGetter__("center",function(){return this._center});
X.cube.prototype.__defineSetter__("center",function(a){if(!goog.isDefAndNotNull(a)||!goog.isArray(a)||3!=a.length)throw Error("Invalid center");this._center=a});X.cube.prototype.__defineGetter__("lengthX",function(){return this._lengthX});X.cube.prototype.__defineSetter__("lengthX",function(a){if(!goog.isNumber(a))throw Error("Invalid lengthX.");this._lengthX=a});X.cube.prototype.__defineGetter__("lengthY",function(){return this._lengthY});
X.cube.prototype.__defineSetter__("lengthY",function(a){if(!goog.isNumber(a))throw Error("Invalid lengthY.");this._lengthY=a});X.cube.prototype.__defineGetter__("lengthZ",function(){return this._lengthZ});X.cube.prototype.__defineSetter__("lengthZ",function(a){if(!goog.isNumber(a))throw Error("Invalid lengthZ.");this._lengthZ=a});X.cube.prototype.modified=function(){this.fromCSG(new CSG.cube({center:this._center,radius:[this._lengthX/2,this._lengthY/2,this._lengthZ/2]}));X.cube.superClass_.modified.call(this)};
goog.exportSymbol("X.cube",X.cube);goog.exportSymbol("X.cube.prototype.modified",X.cube.prototype.modified);X.interactor3D=function(a){X.interactor.call(this,a);this._classname="interactor3D";this._clear_all=!1};goog.inherits(X.interactor3D,X.interactor);X.interactor3D.prototype.onMouseWheel_=function(a){X.interactor3D.superClass_.onMouseWheel_.call(this,a);var b=new X.event.ZoomEvent;goog.isDefAndNotNull(a.deltaY)||(a.deltaY=0);b._in=0>a.deltaY;b._fast=!0;this.dispatchEvent(b)};X.array=function(a){X.base.call(this);this._classname="array";this._array=[];this._comparator=a};goog.inherits(X.array,X.base);X.array.compare=function(a,b,c,d,e){for(var f=0;f<e;f++)if(a[f+c]!==b[f+d])return!1;return!0};X.array.prototype.add=function(a){this._array.push(a);return!0};X.array.prototype.remove=function(a){a=this._array.indexOf(a);-1<a&&this._array.splice(a,1);return!0};X.array.prototype.clear=function(){this._array.length=0};
X.array.prototype.swap_=function(a,b){var c=this._array[a];this._array[a]=this._array[b];this._array[b]=c};X.array.prototype.insert_=function(a,b,c){for(;a+1<b&&0>this._comparator(this._array[a+1],c);)this.swap_(a,a+1),++a;this._array[a]=c};X.array.prototype.merge_inplace_=function(a,b,c){for(;a<b;++a)if(0<this._comparator(this._array[a],this._array[b])){var d=this._array[a];this._array[a]=this._array[b];this.insert_(b,c,d)}};
X.array.prototype.msort_=function(a,b){var c=b-a;2>c||(c=a+Math.floor(c/2),this.msort_(a,c),this.msort_(c,b),this.merge_inplace_(a,c,b))};X.array.prototype.sort=function(){this.msort_(0,this._array.length)};X.array.prototype.values=function(){return this._array};X.camera2D=function(a,b){X.camera.call(this,a,b);this._classname="camera2D"};goog.inherits(X.camera2D,X.camera);X.camera2D.prototype.rotate=function(a){a=X.camera2D.superClass_.rotate.call(this,a);var b=new X.event.WindowLevelEvent;0<a.x?b._window--:0>a.x&&b._window++;0<a.y?b._level++:0>a.y&&b._level--;this.dispatchEvent(b)};X.camera2D.prototype.zoomIn=function(a){var b=20;goog.isDefAndNotNull(a)&&!a&&(b=.02);this._view[14]+=b};
X.camera2D.prototype.zoomOut=function(a){var b=20;goog.isDefAndNotNull(a)&&!a&&(b=.02);this._view[14]-=b};X.camera2D.prototype.pan=function(a){if(goog.isArray(a)&&2==a.length)a=new X.vector(a[0],a[1],0);else if(!(a instanceof X.vector))throw Error("Invalid distance vector for pan operation.");this._view[12]-=a.x/this._view[14];this._view[13]+=a.y/this._view[14]};X.camera3D=function(a,b){X.camera.call(this,a,b);this._classname="camera3D";this._fieldOfView=45;this._perspective=X.matrix.makePerspective(X.matrix.identity(),this._fieldOfView,a/b,1,1E4)};goog.inherits(X.camera3D,X.camera);
X.camera3D.prototype.rotate=function(a){a=X.camera3D.superClass_.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new X.vector(this._view[1],this._view[5],this._view[9]),d=new X.vector(this._view[0],this._view[4],this._view[8]);c.normalize();d.normalize();X.matrix.rotate(this._view,b,c.x,c.y,c.z);X.matrix.rotate(this._view,a,d.x,d.y,d.z)};X.camera3D.prototype.lookAt_=function(a,b){var c=X.camera3D.superClass_.lookAt_.call(this,a,b);X.matrix.makeLookAt(c,a,b,this._up);return c};
X.camera3D.prototype.unproject_=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4),f=new Float32Array(16),g=new Float32Array(16);new Float32Array(16);X.matrix.multiply(this._perspective,this._view,g);X.matrix.invert(g,f);d[0]=a;d[1]=b;d[2]=2*c-1;d[3]=1;X.matrix.multiplyByVec4(f,d,e);e[3]=1/e[3];e[0]*=e[3];e[1]*=e[3];e[2]*=e[3];return e};goog.exportSymbol("X.camera3D",X.camera3D);goog.ui.ProgressBar=function(a){goog.ui.Component.call(this,a);this.rangeModel_=new goog.ui.RangeModel;goog.events.listen(this.rangeModel_,goog.ui.Component.EventType.CHANGE,this.handleChange_,!1,this)};goog.inherits(goog.ui.ProgressBar,goog.ui.Component);goog.ui.ProgressBar.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_={};goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[goog.ui.ProgressBar.Orientation.VERTICAL]="progress-bar-vertical";
goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[goog.ui.ProgressBar.Orientation.HORIZONTAL]="progress-bar-horizontal";goog.ui.ProgressBar.prototype.createDom=function(){this.thumbElement_=this.createThumb_();var a=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_];this.setElementInternal(this.getDomHelper().createDom("div",a,this.thumbElement_));this.setValueState_();this.setMinimumState_();this.setMaximumState_()};
goog.ui.ProgressBar.prototype.enterDocument=function(){goog.ui.ProgressBar.superClass_.enterDocument.call(this);this.attachEvents_();this.updateUi_();var a=this.getElement();goog.asserts.assert(a,"The progress bar DOM element cannot be null.");goog.a11y.aria.setRole(a,"progressbar");goog.a11y.aria.setState(a,"live","polite")};goog.ui.ProgressBar.prototype.exitDocument=function(){goog.ui.ProgressBar.superClass_.exitDocument.call(this);this.detachEvents_()};
goog.ui.ProgressBar.prototype.createThumb_=function(){return this.getDomHelper().createDom("div","progress-bar-thumb")};goog.ui.ProgressBar.prototype.attachEvents_=function(){goog.userAgent.IE&&7>goog.userAgent.VERSION&&goog.events.listen(this.getElement(),goog.events.EventType.RESIZE,this.updateUi_,!1,this)};goog.ui.ProgressBar.prototype.detachEvents_=function(){goog.userAgent.IE&&7>goog.userAgent.VERSION&&goog.events.unlisten(this.getElement(),goog.events.EventType.RESIZE,this.updateUi_,!1,this)};
goog.ui.ProgressBar.prototype.decorateInternal=function(a){goog.ui.ProgressBar.superClass_.decorateInternal.call(this,a);goog.dom.classlist.add(goog.asserts.assert(this.getElement()),goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_]);a=goog.dom.getElementsByTagNameAndClass(null,"progress-bar-thumb",this.getElement())[0];a||(a=this.createThumb_(),this.getElement().appendChild(a));this.thumbElement_=a};goog.ui.ProgressBar.prototype.getValue=function(){return this.rangeModel_.getValue()};
goog.ui.ProgressBar.prototype.setValue=function(a){this.rangeModel_.setValue(a);this.getElement()&&this.setValueState_()};goog.ui.ProgressBar.prototype.setValueState_=function(){var a=this.getElement();goog.asserts.assert(a,"The progress bar DOM element cannot be null.");goog.a11y.aria.setState(a,"valuenow",this.getValue())};goog.ui.ProgressBar.prototype.getMinimum=function(){return this.rangeModel_.getMinimum()};
goog.ui.ProgressBar.prototype.setMinimum=function(a){this.rangeModel_.setMinimum(a);this.getElement()&&this.setMinimumState_()};goog.ui.ProgressBar.prototype.setMinimumState_=function(){var a=this.getElement();goog.asserts.assert(a,"The progress bar DOM element cannot be null.");goog.a11y.aria.setState(a,"valuemin",this.getMinimum())};goog.ui.ProgressBar.prototype.getMaximum=function(){return this.rangeModel_.getMaximum()};
goog.ui.ProgressBar.prototype.setMaximum=function(a){this.rangeModel_.setMaximum(a);this.getElement()&&this.setMaximumState_()};goog.ui.ProgressBar.prototype.setMaximumState_=function(){var a=this.getElement();goog.asserts.assert(a,"The progress bar DOM element cannot be null.");goog.a11y.aria.setState(a,"valuemax",this.getMaximum())};goog.ui.ProgressBar.prototype.orientation_=goog.ui.ProgressBar.Orientation.HORIZONTAL;goog.ui.ProgressBar.prototype.handleChange_=function(a){this.updateUi_();this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};
goog.ui.ProgressBar.prototype.updateUi_=function(){if(this.thumbElement_){var a=this.getMinimum(),b=this.getMaximum(),a=(this.getValue()-a)/(b-a),b=Math.round(100*a);this.orientation_==goog.ui.ProgressBar.Orientation.VERTICAL?goog.userAgent.IE&&7>goog.userAgent.VERSION?(this.thumbElement_.style.top=0,this.thumbElement_.style.height="100%",b=this.thumbElement_.offsetHeight,a=Math.round(a*b),this.thumbElement_.style.top=b-a+"px",this.thumbElement_.style.height=a+"px"):(this.thumbElement_.style.top=
100-b+"%",this.thumbElement_.style.height=b+"%"):this.thumbElement_.style.width=b+"%"}};goog.ui.ProgressBar.prototype.initializeUi_=function(){var a=this.thumbElement_.style;this.orientation_==goog.ui.ProgressBar.Orientation.VERTICAL?(a.left=0,a.width="100%"):(a.top=a.left=0,a.height="100%")};
goog.ui.ProgressBar.prototype.setOrientation=function(a){if(this.orientation_!=a){var b=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_],c=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[a];this.orientation_=a;if(a=this.getElement())goog.dom.classlist.swap(a,b,c),this.initializeUi_(),this.updateUi_()}};goog.ui.ProgressBar.prototype.getOrientation=function(){return this.orientation_};
goog.ui.ProgressBar.prototype.disposeInternal=function(){this.detachEvents_();goog.ui.ProgressBar.superClass_.disposeInternal.call(this);this.thumbElement_=null;this.rangeModel_.dispose()};goog.ui.ProgressBar.prototype.getStep=function(){return this.rangeModel_.getStep()};goog.ui.ProgressBar.prototype.setStep=function(a){this.rangeModel_.setStep(a)};X.progressbar=function(a,b){if(!goog.isDefAndNotNull(a))throw Error("No valid parent element.");if(!goog.isDefAndNotNull(b))throw Error("Invalid initial value.");goog.ui.ProgressBar.call(this);this._classname="progressbar";this._parent=a;this._parent_position_original="";this._doneProgressBar=this._style=null;this._css=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";
c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this._css=[c,d,e];this.setValue(b);this.init_()};goog.inherits(X.progressbar,goog.ui.ProgressBar);
X.progressbar.prototype.init_=function(){var a=goog.style.getComputedStyle(this._parent,"position");if("static"==a||""==a)this._parent_position_original=this._parent.style.position,this._parent.style.position="relative";var a=goog.dom.getDocument().getElementsByTagName("head")[0],b=goog.dom.createDom("style");b.type="text/css";b.media="screen";var c=goog.dom.createTextNode(this._css[0]),d=goog.dom.createTextNode(this._css[1]),e=goog.dom.createTextNode(this._css[2]);goog.dom.appendChild(a,b);goog.dom.appendChild(b,
c);goog.dom.appendChild(b,d);goog.dom.appendChild(b,e);this._style=b;this.render(this._parent);a=this.getElement();a.style.position="absolute";a.style.top=(this._parent.clientHeight-5)/2+"px";a.style.left=(this._parent.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};
X.progressbar.prototype.done=function(){var a=this.getElement().style.top,b=this.getElement().style.left;goog.dom.removeNode(this.getElement());var c=new X.progressbar(this._parent,100),d=c.getElement();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");goog.dom.getFirstElementChild(d).classList.add("progress-bar-thumb-done");this._doneProgressBar=c};
X.progressbar.prototype.kill=function(){this._style&&goog.dom.removeNode(this._style);this.getElement()&&goog.dom.removeNode(this.getElement());this._doneProgressBar&&goog.dom.removeNode(this._doneProgressBar.getElement());this._doneProgressBar=this._style=null;this._parent_position_original&&(this._parent.style.position=this._parent_position_original)};X.renderer=function(){X.base.call(this);this._classname="renderer";this._container=window.document.body;this._width=this._container.clientWidth;this._height=this._container.clientHeight;this._interactor=this._camera=this._canvas=null;this._objects=new X.array(X.object.OPACITY_COMPARATOR);this._topLevelObjects=[];this._loader=null;this._onShowtime=this._loadingCompleted=this._locked=!1;this._context=this._progressBar2=this._progressBar=null;this._config={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,
SLICENAVIGATORS:!0};this._AnimationFrameID=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")};goog.inherits(X.renderer,X.base);X.renderer.prototype.onComputing=function(a){window.cancelAnimationFrame(this._AnimationFrameID);this._config.PROGRESSBAR_ENABLED&&(this._progressBar2=new X.progressbar(this._container,3))};
X.renderer.prototype.onComputingEnd=function(a){this._config.PROGRESSBAR_ENABLED&&this._progressBar2&&(this._progressBar2.done(),this.__readyCheckTimer2=goog.Timer.callOnce(function(){this.__readyCheckTimer2=null;this._progressBar2&&(this._progressBar2.kill(),this._progressBar2=null);this._loadingCompleted=this._onShowtime=!0;this.render()}.bind(this),700))};X.renderer.prototype.onComputingProgress=function(a){this._progressBar2&&this._progressBar2.setValue(100*a._value)};
X.renderer.prototype.onProgress=function(a){this._progressBar&&this._progressBar.setValue(100*a._value)};X.renderer.prototype.onModified=function(a){goog.isDefAndNotNull(a)&&a instanceof X.event.ModifiedEvent&&a._object&&this.update_(a._object)};X.renderer.prototype.onRemove=function(a){goog.isDefAndNotNull(a)&&a instanceof X.event.RemoveEvent&&a._object&&this.remove(a._object)};
X.renderer.prototype.onHover_=function(a){if(!(goog.isDefAndNotNull(a)&&a instanceof X.event.HoverEvent))throw Error("Invalid hover event.");};
X.renderer.prototype.onResize_=function(){var a=goog.dom.getElement(this._container);this._width=a.clientWidth;this._height=a.clientHeight;a=goog.dom.getElement(this._canvas);a.width=this._width;a.height=this._height;"renderer3D"==this._classname&&(this._context.viewport(0,0,this._width,this._height),this._camera._perspective=X.matrix.makePerspective(X.matrix.identity(),this._camera._fieldOfView,this._canvas.width/this._canvas.height,1,1E4))};
X.renderer.prototype.onScroll_=function(a){if(!(goog.isDefAndNotNull(a)&&a instanceof X.event.ScrollEvent))throw Error("Invalid scroll event.");};X.renderer.prototype.__defineGetter__("config",function(){return this._config});X.renderer.prototype.__defineGetter__("interactor",function(){return this._interactor});X.renderer.prototype.__defineGetter__("camera",function(){return this._camera});X.renderer.prototype.__defineGetter__("loadingCompleted",function(){return this._loadingCompleted});
X.renderer.prototype.__defineGetter__("container",function(){return this._container});X.renderer.prototype.__defineSetter__("container",function(a){if(!goog.isDefAndNotNull(a))throw Error("An ID to a valid container (<div>..) is required.");var b=a;goog.isString(b)&&(b=goog.dom.getElement(a));if(!goog.dom.isElement(b))throw Error("Could not find the given container.");this._container=b});X.renderer.prototype.resetViewAndRender=function(){this._camera.reset()};
X.renderer.prototype.showProgressBar_=function(){this._config.PROGRESSBAR_ENABLED&&!this._progressBar&&(this._progressBar=new X.progressbar(this._container,3))};X.renderer.prototype.hideProgressBar_=function(){this._config.PROGRESSBAR_ENABLED&&this._progressBar&&!this.__readyCheckTimer2&&(this._progressBar.done(),this.__readyCheckTimer2=goog.Timer.callOnce(function(){this.__readyCheckTimer2=null;this._progressBar&&(this._progressBar.kill(),this._progressBar=null);this.render()}.bind(this),700))};
X.renderer.prototype.init=function(a){var b=goog.dom.createDom("canvas");goog.dom.appendChild(this._container,b);this._width=this._container.clientWidth;this._height=this._container.clientHeight;b.width=this._width;b.height=this._height;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this._container.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this._loader=new X.loader;goog.events.listen(this._loader,X.event.events.PROGRESS,this.onProgress.bind(this));this._canvas=b;this._context=c;b=new X.interactor3D(this._canvas);"2d"==a&&(b=new X.interactor2D(this._canvas));b.init();goog.events.listen(b,X.event.events.RESETVIEW,this.resetViewAndRender.bind(this));goog.events.listen(b,X.event.events.HOVER,this.onHover_.bind(this));goog.events.listen(b,X.event.events.SCROLL,this.onScroll_.bind(this));this._interactor=b;b=new X.camera3D(this._width,
this._height);"2d"==a&&(b=new X.camera2D(this._width,this._height));b.observe(this._interactor);this._camera=b;goog.events.listen(window,goog.events.EventType.RESIZE,this.onResize_,!1,this)};X.renderer.prototype.add=function(a){(a instanceof X.cube||a instanceof X.sphere||a instanceof X.cylinder)&&a.modified();this._topLevelObjects.push(a);this.update_(a)};
X.renderer.prototype.remove=function(a){if(!this._canvas||!this._context)throw Error("The renderer was not initialized properly.");goog.isDefAndNotNull(a)&&goog.events.removeAll(a);return!1};
X.renderer.prototype.update_=function(a){if(!this._canvas||!this._context)throw Error("The renderer was not initialized properly.");goog.isDefAndNotNull(a)&&(goog.events.hasListener(a,X.event.events.MODIFIED)||goog.events.listen(a,X.event.events.MODIFIED,this.onModified.bind(this)),goog.events.hasListener(a,X.event.events.REMOVE)||goog.events.listen(a,X.event.events.REMOVE,this.onRemove.bind(this)),goog.events.hasListener(a,X.event.events.COMPUTING)||goog.events.listen(a,X.event.events.COMPUTING,
this.onComputing.bind(this)),goog.events.hasListener(a,X.event.events.COMPUTING_PROGRESS)||goog.events.listen(a,X.event.events.COMPUTING_PROGRESS,this.onComputingProgress.bind(this)),goog.events.hasListener(a,X.event.events.COMPUTING_END)||goog.events.listen(a,X.event.events.COMPUTING_END,this.onComputingEnd.bind(this)))};
X.renderer.prototype.get=function(a){if(!goog.isDefAndNotNull(a))throw Error("Invalid object id.");for(var b=this._objects.values(),c=b.length,d=0,d=0;d<c;d++)if(b[d]._id==a)return b[d];return null};X.renderer.prototype.printScene=function(){var a=this._topLevelObjects.length,b;for(b=0;b<a;b++)this.generateTree_(this._topLevelObjects[b],0)};
X.renderer.prototype.generateTree_=function(a,b){for(var c="",d=0,d=0;d<b;d++)c+=">";c+=a._id;window.console.log(c);if(0<a._children.length)for(var c=a._children,d=c.length,e=0,e=0;e<d;e++)this.generateTree_(c[e],b+1)};
X.renderer.prototype.render=function(){if(!this._canvas||!this._context)throw Error("The renderer was not initialized properly.");if(!goog.isDefAndNotNull(this._readyCheckTimer)){if(this._loader.completed()){if(this._loadingCompleted||this._onShowtime||(this._onShowtime=!0,eval("this.onShowtime()"),this._loadingCompleted=!0),this._progressBar){this.hideProgressBar_();return}}else if(this.showProgressBar_(),this._onShowtime=this._loadingCompleted=!1,this._readyCheckTimer=goog.Timer.callOnce(function(){this._readyCheckTimer=
null;this.render()}.bind(this),100),!this._config.INTERMEDIATE_RENDERING)return;this._AnimationFrameID=window.requestAnimationFrame(this.render.bind(this));eval("this.onRender()");this.render_(!1,!0)}};X.renderer.prototype.onShowtime=function(){};X.renderer.prototype.onRender=function(){};X.renderer.prototype.render_=function(a,b){};
X.renderer.prototype.destroy=function(){window.cancelAnimationFrame(this._AnimationFrameID);this._loader&&(delete this._loader,this._loader=null);this._progressBar&&(this._progressBar.kill(),delete this._progressBar,this._progressBar=null);this._objects.clear();delete this._objects;this._topLevelObjects.length=0;delete this._topLevelObjects;delete this._loader;this._loader=null;delete this._camera;this._camera=null;delete this._interactor;this._interactor=null;delete this._context;this._context=null;
goog.dom.removeNode(this._canvas);delete this._canvas;this._canvas=null};X.renderer2D=function(){X.renderer.call(this);this._classname="renderer2D";this._orientation=null;this._orientationIndex=-1;this._orientationColors=[];this._labelFrameBufferContext=this._labelFrameBuffer=this._frameBufferContext=this._frameBuffer=null;this._sliceHeightSpacing=this._sliceWidthSpacing=this._sliceHeight=this._sliceWidth=0;this._windowHigh=this._windowLow=this._upperThreshold=this._lowerThreshold=this._currentSlice=-1;this._labelmapShowOnlyColor=new Float32Array([-255,-255,-255,-255]);
this._radiological=!0};goog.inherits(X.renderer2D,X.renderer);X.renderer2D.prototype.onScroll=function(){};X.renderer2D.prototype.onWindowLevel=function(){};X.renderer2D.prototype.onScroll_=function(a){X.renderer2D.superClass_.onScroll_.call(this,a);var b=this._topLevelObjects[0];if(b){var c="",c=0==this._orientationIndex?"indexX":1==this._orientationIndex?"indexY":"indexZ";b[c]=a._up?b[c]+1:b[c]-1;eval("this.onScroll();")}};
X.renderer2D.prototype.onWindowLevel_=function(a){var b=this._topLevelObjects[0];if(b){var c=b._windowHigh-b._windowLow,d=c/2,e=parseInt(c+c/15*-a._window,10);a=parseInt(d+d/15*a._level,10);c==e&&e++;d==a&&a++;b._windowLow-=parseInt(d-a,10);b._windowLow-=parseInt(c-e,10);b._windowLow=Math.max(b._windowLow,b._min);b._windowHigh-=parseInt(d-a,10);b._windowHigh+=parseInt(c-e,10);b._windowHigh=Math.min(b._windowHigh,b._max);eval("this.onWindowLevel();")}};
X.renderer2D.prototype.__defineGetter__("orientation",function(){return this._orientation});X.renderer2D.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this._orientationIndex=2):"SAGITTAL"==a?(a="X",this._orientationIndex=0):"CORONAL"==a&&(a="Y",this._orientationIndex=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this._orientation=a});X.renderer2D.prototype.__defineGetter__("radiological",function(){return this._radiological});
X.renderer2D.prototype.__defineSetter__("radiological",function(a){this._radiological=a});
X.renderer2D.prototype.init=function(){if(!this._orientation)throw Error("No 2D orientation set.");X.renderer2D.superClass_.init.call(this,"2d");this._context.fillStyle="rgba(50,50,50,0)";this._context.fillRect(0,0,this._canvas.width,this._canvas.height);this._frameBuffer=goog.dom.createDom("canvas");this._labelFrameBuffer=goog.dom.createDom("canvas");goog.events.listen(this._camera,X.event.events.WINDOWLEVEL,this.onWindowLevel_.bind(this))};
X.renderer2D.prototype.onResize_=function(){X.renderer2D.superClass_.onResize_.call(this);this.autoScale_()};X.renderer2D.prototype.resetViewAndRender=function(){X.renderer2D.superClass_.resetViewAndRender.call(this);this.autoScale_();var a=this._topLevelObjects[0];a&&(a._windowHigh=a._max,a._windowLow=a._min)};X.renderer2D.prototype.volumeChildrenIndex_=function(a){return"X"==a?0:"Y"==a?1:2};
X.renderer2D.prototype.update_=function(a){X.renderer2D.superClass_.update_.call(this,a);var b=!1;this.get(a._id)&&(b=!0);if(a instanceof X.volume){var c=a._file,d=a._labelmap,e=a._colortable;if(goog.isDefAndNotNull(d)&&goog.isDefAndNotNull(d._file)&&d._file._dirty)this.update_(d);else if(goog.isDefAndNotNull(e)&&goog.isDefAndNotNull(e._file)&&e._file._dirty)this._loader.load(e,a);else{if(goog.isDefAndNotNull(c)&&goog.isArray(c))if(goog.isDefAndNotNull(a.MRI)){if(a.MRI.loaded_files!=c.length||b&&
!a._dirty)return}else{b=0;d=c.length;for(b=0;b<d;b++)this._loader.load(c[b],a);return}else if(goog.isDefAndNotNull(c)&&c._dirty){this._loader.load(a,a);return}this._orientationIndex=this.volumeChildrenIndex_(this._orientation);this._slices=a._children[this._orientationIndex]._children;e=null;e=0==this._orientationIndex?a.indexX:1==this._orientationIndex?a.indexY:a.indexZ;c=a._children[this._orientationIndex]._children[e]._iWidth;d=a._children[this._orientationIndex]._children[e]._iHeight;this._sliceWidthSpacing=
a._children[this._orientationIndex]._children[e]._widthSpacing;this._sliceHeightSpacing=a._children[this._orientationIndex]._children[e]._heightSpacing;this._sliceWidth=c;this._sliceHeight=d;e=this._frameBuffer;e.width=c;e.height=d;var f=this._labelFrameBuffer;f.width=c;f.height=d;this._frameBufferContext=e.getContext("2d");this._labelFrameBufferContext=f.getContext("2d");b||(this._objects.add(a),this.autoScale_())}}};
X.renderer2D.prototype.autoScale_=function(){var a=Math.min(this._width/(this._sliceWidth*this._sliceWidthSpacing),this._height/(this._sliceHeight*this._sliceHeightSpacing));this._camera._view[14]=a};X.renderer2D.prototype.onSliceNavigation=function(){};
X.renderer2D.prototype.xy2ijk=function(a,b){var c=this._topLevelObjects[0],d=this._camera._view,e=null,f=this._sliceWidth,g=this._sliceHeight,h=null,k=null;if("Y"==this._orientation)e=this._slices[parseInt(c.indexY,10)],h=e._widthSpacing,k=e._heightSpacing,this._orientationColors[0]="red",this._orientationColors[1]="blue";else if("Z"==this._orientation)e=this._slices[parseInt(c.indexZ,10)],h=e._widthSpacing,k=e._heightSpacing,this._orientationColors[0]="red",this._orientationColors[1]="green";else{e=
this._slices[parseInt(c.indexX,10)];h=e._heightSpacing;k=e._widthSpacing;this._orientationColors[0]="green";this._orientationColors[1]="blue";var l=f,f=g,g=l}var m=1*d[12],n=-1*d[13],l=Math.max(d[14],.6),d=[this._width/2,this._height/2],h=f*h*l,k=g*k*l,p=d[0]-h/2,d=d[1]-k/2,p=p+m*l,d=d+n*l;return a>p&&a<p+h&&b>d&&b<d+k?(m=(a-p)/h*f,n=(b-d)/k*g,k=e._xyBBox[4],"X"==this._orientation?(l=f-m,m=n,n=l):"Y"==this._orientation?m=f-m:"Z"==this._orientation&&(m=f-m,n=g-n),m=e._wmin+m*e._widthSpacing,n=e._hmin+
n*e._heightSpacing,m=goog.vec.Vec4.createFloat32FromValues(m,n,k,1),f=goog.vec.Mat4.createFloat32(),goog.vec.Mat4.multVec4(e._XYToIJK,m,f),g=goog.vec.Mat4.createFloat32(),goog.vec.Mat4.multVec4(e._XYToRAS,m,g),e=Math.round((c._childrenInfo[0]._sliceNormal[0]*g[0]+c._childrenInfo[0]._sliceNormal[1]*g[1]+c._childrenInfo[0]._sliceNormal[2]*g[2]+c._childrenInfo[0]._originD)/c._childrenInfo[0]._sliceSpacing),e>=c._childrenInfo[0]._nb?e=c._childrenInfo[0]._nb-1:0>e&&(e=0),m=Math.round((c._childrenInfo[1]._sliceNormal[0]*
g[0]+c._childrenInfo[1]._sliceNormal[1]*g[1]+c._childrenInfo[1]._sliceNormal[2]*g[2]+c._childrenInfo[1]._originD)/c._childrenInfo[1]._sliceSpacing),m>=c._childrenInfo[1]._nb?m=c._childrenInfo[1]._nb-1:0>m&&(m=0),n=Math.round((c._childrenInfo[2]._sliceNormal[0]*g[0]+c._childrenInfo[2]._sliceNormal[1]*g[1]+c._childrenInfo[2]._sliceNormal[2]*g[2]+c._childrenInfo[2]._originD)/c._childrenInfo[2]._sliceSpacing),n>=c._childrenInfo[2]._nb?n=c._childrenInfo[2]._nb-1:0>n&&(n=0),[[e,m,n],[f[0],f[1],f[2]],[g[0],
g[1],g[2]]]):null};
X.renderer2D.prototype.render_=function(a,b){X.renderer2D.superClass_.render_.call(this,a,b);if(0!=this._objects.values().length){var c=this._topLevelObjects[0],d=null,d=0==this._orientationIndex?c.indexX:1==this._orientationIndex?c.indexY:c.indexZ,e=this._slices[parseInt(d,10)]._iWidth,f=this._slices[parseInt(d,10)]._iHeight;this._sliceWidthSpacing=this._slices[parseInt(d,10)]._widthSpacing;this._sliceHeightSpacing=this._slices[parseInt(d,10)]._heightSpacing;this._sliceWidth=e;this._sliceHeight=
f;var g=this._width,h=this._height,k=this._camera._view;this._context.save();this._context.clearRect(-g,-h,2*g,2*h);this._context.restore();var l=Math.max(k[14],.1);this._context.setTransform(l,0,0,l,0,0);var m=1*k[12],k=-1*k[13],n=null;c._labelmap&&(n=c._labelmap._showOnlyColor);var p=this._slices[parseInt(d,10)],q=p._texture._rawData,p=p._labelmap,u=null;p&&(u=p._rawData);var t=this._sliceWidth,C=this._sliceHeight,B=this._frameBufferContext,y=this._labelFrameBufferContext,D=B.getImageData(0,0,t,
C),A=y.getImageData(0,0,t,C),F=D.data,I=A.data,G=F.length,w=c._max,E=c._lowerThreshold,z=c._upperThreshold,r=c._windowLow/w,s=c._windowHigh/w;if(this._currentSlice!=d||this._lowerThreshold!=E||this._upperThreshold!=z||this._windowLow!=r||this._windowHigh!=s||n&&!X.array.compare(n,this._labelmapShowOnlyColor,0,0,4)){var H=this._frameBuffer;H.width=e;H.height=f;H=this._labelFrameBuffer;H.width=e;H.height=f;e=0;do{var H=[0,0,0,0],f=[0,0,0,0],K=q[e]/255*w,v=q[e],v=(v/255-r)/(s-r),v=255*v;K>=E&&K<=z&&
(H=new goog.math.Vec3(c._maxColor[0],c._maxColor[1],c._maxColor[2]),K=new goog.math.Vec3(c._minColor[0],c._minColor[1],c._minColor[2]),H=H.scale(v).add(K.scale(255-v)),H=[Math.floor(H.x),Math.floor(H.y),Math.floor(H.z),255],p&&(-255==n[3]?f=[u[e],u[e+1],u[e+2],u[e+3]]:X.array.compare(n,u,0,e,4)&&(f=[u[e],u[e+1],u[e+2],u[e+3]])));"X"==this._orientation?(F[e]=H[0],F[e+1]=H[1],F[e+2]=H[2],F[e+3]=H[3],I[e]=f[0],I[e+1]=f[1],I[e+2]=f[2],I[e+3]=f[3]):"Y"==this._orientation?(v=Math.floor(e/(4*t)),v=v*t*4+
(4*(t-1)-(e-v*t*4)),F[v]=H[0],F[v+1]=H[1],F[v+2]=H[2],F[v+3]=H[3],I[v]=f[0],I[v+1]=f[1],I[v+2]=f[2],I[v+3]=f[3]):(v=G-1-e,F[v-3]=H[0],F[v-2]=H[1],F[v-1]=H[2],F[v]=H[3],I[v-3]=f[0],I[v-2]=f[1],I[v-1]=f[2],I[v]=f[3]);e+=4}while(e<G);B.putImageData(D,0,0);y.putImageData(A,0,0);this._currentSlice=d;this._lowerThreshold=E;this._upperThreshold=z;this._windowLow=r;this._windowHigh=s;p&&(this._labelmapShowOnlyColor=n)}this._context.globalAlpha=1;this._context.translate(g/2/l,h/2/l);"X"==this._orientation&&
(this._context.rotate(.5*Math.PI),d=m,m=k,k=-d);m=-t*this._sliceWidthSpacing/2+m;k=-C*this._sliceHeightSpacing/2+k;this._context.drawImage(this._frameBuffer,m,k,t*this._sliceWidthSpacing,C*this._sliceHeightSpacing);p&&c._labelmap._visible&&(this._context.globalAlpha=c._labelmap._opacity,this._context.drawImage(this._labelFrameBuffer,m,k,t*this._sliceWidthSpacing,C*this._sliceHeightSpacing));this._config.SLICENAVIGATORS&&this._interactor._mouseInside&&this._interactor._shiftDown&&!this._interactor._leftButtonDown&&
(m=this._interactor._mousePosition,m=this.xy2ijk(m[0],m[1]))&&(c._indexX=m[0][0],c._indexY=m[0][1],c._indexZ=m[0][2],c.modified(!1),this.onSliceNavigation(),this._context.setTransform(1,0,0,1,0,0),this._context.lineWidth=1,this._context.beginPath(),this._context.moveTo(this._interactor._mousePosition[0],0),this._context.lineTo(this._interactor._mousePosition[0],this._interactor._mousePosition[1]-10),this._context.moveTo(this._interactor._mousePosition[0],this._interactor._mousePosition[1]+10),this._context.lineTo(this._interactor._mousePosition[0],
this._height),this._context.strokeStyle=this._orientationColors[0],this._context.stroke(),this._context.closePath(),this._context.beginPath(),this._context.moveTo(0,this._interactor._mousePosition[1]),this._context.lineTo(this._interactor._mousePosition[0]-10,this._interactor._mousePosition[1]),this._context.moveTo(this._interactor._mousePosition[0]+10,this._interactor._mousePosition[1]+.5),this._context.lineTo(this._width,this._interactor._mousePosition[1]),this._context.strokeStyle=this._orientationColors[1],
this._context.stroke(),this._context.closePath(),this._context.font="10pt Arial",this._context.textAlign="left",this._context.textBaseline="top",this._context.fillStyle="white",this._context.fillText("RAS: "+m[2][0].toFixed(2)+", "+m[2][1].toFixed(2)+", "+m[2][2].toFixed(2),0,0),t=p=k="undefined","undefined"!=typeof c._IJKVolume[m[1][2].toFixed(0)]&&"undefined"!=typeof c._IJKVolume[m[1][2].toFixed(0)][m[1][1].toFixed(0)]&&(k=c._IJKVolume[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],
c.hasLabelMap&&(p=c._labelmap._IJKVolume[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c._labelmap._colorTable&&(t=c._labelmap._colorTable.get(p),"undefined"!=typeof t&&(t=t[0])))),this._context.fillText("Background:  "+k+" ("+m[1][0].toFixed(0)+", "+m[1][1].toFixed(0)+", "+m[1][2].toFixed(0)+")",0,15),c.hasLabelMap&&this._context.fillText("Labelmap:  "+t+" ("+p+")",0,30))}};goog.exportSymbol("X.renderer2D",X.renderer2D);goog.exportSymbol("X.renderer2D.prototype.init",X.renderer2D.prototype.init);
goog.exportSymbol("X.renderer2D.prototype.add",X.renderer2D.prototype.add);goog.exportSymbol("X.renderer2D.prototype.onShowtime",X.renderer2D.prototype.onShowtime);goog.exportSymbol("X.renderer2D.prototype.onRender",X.renderer2D.prototype.onRender);goog.exportSymbol("X.renderer2D.prototype.onScroll",X.renderer2D.prototype.onScroll);goog.exportSymbol("X.renderer2D.prototype.onWindowLevel",X.renderer2D.prototype.onWindowLevel);goog.exportSymbol("X.renderer2D.prototype.get",X.renderer2D.prototype.get);
goog.exportSymbol("X.renderer2D.prototype.resetViewAndRender",X.renderer2D.prototype.resetViewAndRender);goog.exportSymbol("X.renderer2D.prototype.xy2ijk",X.renderer2D.prototype.xy2ijk);goog.exportSymbol("X.renderer2D.prototype.render",X.renderer2D.prototype.render);goog.exportSymbol("X.renderer2D.prototype.destroy",X.renderer2D.prototype.destroy);goog.exportSymbol("X.renderer2D.prototype.onSliceNavigation",X.renderer2D.prototype.onSliceNavigation);xiv.vis={};xiv.vis.RenderEngine=function(){goog.events.EventTarget.call(this)};goog.inherits(xiv.vis.RenderEngine,goog.events.EventTarget);goog.exportSymbol("xiv.vis.RenderEngine",xiv.vis.RenderEngine);xiv.vis.RenderEngine.prototype.ID_PREFIX="xiv.vis.RenderEngine";xiv.vis.RenderEngine.EventType={RENDER_START:goog.events.getUniqueId("render-start"),RENDERING:goog.events.getUniqueId("rendering"),RENDER_END:goog.events.getUniqueId("render-end")};
xiv.vis.RenderEngine.SELECTED_VOL_KEY="isSelectedVolume"+goog.string.createUniqueString();goog.exportSymbol("xiv.vis.RenderEngine.EventType",xiv.vis.RenderEngine.EventType);goog.exportSymbol("xiv.vis.RenderEngine.SELECTED_VOL_KEY",xiv.vis.RenderEngine.SELECTED_VOL_KEY);goog.exportSymbol("xiv.vis.RenderEngine.prototype.ID_PREFIX",xiv.vis.RenderEngine.prototype.ID_PREFIX);xiv.vis.XtkPlane=function(){goog.events.EventTarget.call(this);this.xObjs_=[]};goog.inherits(xiv.vis.XtkPlane,goog.events.EventTarget);goog.exportSymbol("xiv.vis.XtkPlane",xiv.vis.XtkPlane);xiv.vis.XtkPlane.EventType={SLICE_NAVIGATED:goog.events.getUniqueId("slice-navigated")};xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION=[-300,300,300];xiv.vis.XtkPlane.DEFAULT_BACKGROUND="black";xiv.vis.XtkPlane.prototype.isEnabled_=!0;xiv.vis.XtkPlane.prototype.XRenderer=null;xiv.vis.XtkPlane.prototype.orientation=null;
xiv.vis.XtkPlane.prototype.progressTimer_=null;xiv.vis.XtkPlane.prototype.Renderer=null;xiv.vis.XtkPlane.prototype.container=null;xiv.vis.XtkPlane.prototype.getRenderer=function(){return this.Renderer};xiv.vis.XtkPlane.prototype.getOrientation=function(){return this.orientation};xiv.vis.XtkPlane.prototype.storeCamera_=function(){this.camera_=this.Renderer.camera};xiv.vis.XtkPlane.prototype.storeBackground_=function(){this.background_=this.container.style.background};
xiv.vis.XtkPlane.prototype.setCamera=function(a){goog.isDefAndNotNull(this.Renderer)&&(goog.isDefAndNotNull(a)?(this.camera_=a,this.Renderer.camera.focus=a.focus,this.Renderer.camera.position=a.position,this.Renderer.camera.up=a.up,a instanceof X.camera&&(this.Renderer.camera.view=a.view)):this.Renderer.camera.position=this.constructor.DEFAULT_CAMERA_POSITION)};
xiv.vis.XtkPlane.prototype.setBackground=function(a){goog.isDefAndNotNull(a)?goog.isString(a)?this.container.style.background=a:goog.isDefAndNotNull(a.backgroundColor2)?this.container.style.background="-webkit-linear-gradient(top, "+a.backgroundColor2+", "+a.backgroundColor+")":this.container.style.background=a.backgroundColor:this.container.style.background=xiv.vis.XtkPlane.DEFAULT_BACKGROUND};xiv.vis.XtkPlane.prototype.getCurrentVolume=function(){return this.currVolume_};
xiv.vis.XtkPlane.prototype.getContainer=function(){return this.container};xiv.vis.XtkPlane.prototype.setContainer=function(a){this.container=a;goog.isDefAndNotNull(this.Renderer)||this.init(a);this.Renderer.container=a};xiv.vis.XtkPlane.prototype.onSliceNavigated_=function(a){this.dispatchEvent(a)};xiv.vis.XtkPlane.prototype.destroyRenderer_=function(){goog.isDefAndNotNull(this.Renderer)&&(goog.events.removeAll(this.Renderer),this.Renderer.destroy(),this.Renderer=null)};
xiv.vis.XtkPlane.prototype.init=function(a){this.destroyRenderer_();if(!goog.isDefAndNotNull(this.XRenderer))throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Renderer=new this.XRenderer;this.Renderer.orientation=this.orientation;this.setContainer(a||this.container||document.body);this.Renderer.init();goog.events.listen(this.Renderer,xiv.vis.RenderEngine.EventType.RENDERING,function(a){this.dispatchEvent({type:xiv.vis.RenderEngine.EventType.RENDERING,value:a.value})}.bind(this));
goog.events.listen(this.Renderer,xiv.vis.XtkPlane.EventType.SLICE_NAVIGATED,this.onSliceNavigated_.bind(this))};xiv.vis.XtkPlane.prototype.add=function(a){this.isEnabled_&&(!0==a.isSelectedVolume&&(this.currVolume_=a),this.xObjs_.push(a),this.Renderer.add(a))};xiv.vis.XtkPlane.prototype.isEnabled=function(){return this.isEnabled_};xiv.vis.XtkPlane.prototype.disposeDisabledOverlay_=function(){goog.isDefAndNotNull(this.DisabledOverlay_)&&(goog.dom.removeNode(this.DisabledOverlay_),delete this.DisabledOverlay_)};
xiv.vis.XtkPlane.prototype.createDisabledOverlay_=function(){this.DisabledOverlay_=goog.dom.createDom("div",{id:"DisabledOverlay_"+goog.string.createUniqueString()});goog.dom.classes.set(this.DisabledOverlay_,"xiv-vis-xtkplane-disabledoverlay");var a=this.orientation;"V"==this.orientation&&(a="3D");var b=goog.dom.createDom("div",{id:"DisabledOverlay_"+goog.string.createUniqueString()});b.style.display="table-cell";b.style.verticalAlign="middle";b.innerHTML=a+" render plane disabled.";goog.dom.appendChild(this.DisabledOverlay_,
b);goog.dom.appendChild(this.container,this.DisabledOverlay_)};xiv.vis.XtkPlane.prototype.setEnabled=function(a){(this.isEnabled_=!1!==a)?nrg.fx.fadeOut(this.DisabledOverlay_,200,function(){this.DisabledOverlay_.style.visibility="hidden";this.disposeDisabledOverlay_()}.bind(this)):(goog.isDefAndNotNull(this.DisabledOverlay_)||this.createDisabledOverlay_(),this.DisabledOverlay_.style.visibility="visible",nrg.fx.fadeIn(this.DisabledOverlay_,200,function(){}.bind(this)))};
xiv.vis.XtkPlane.prototype.restore=function(){window.console.log("\n\nrestore");this.init();this.restoreXObjectsToRenderer_();this.restoreCamera_();this.restoreBackground_();this.render()};xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer=function(){goog.array.forEach(this.xObjs_,function(a){goog.isDefAndNotNull(a)&&this.Renderer.remove(a)}.bind(this))};xiv.vis.XtkPlane.prototype.restoreXObjectsToRenderer_=function(){goog.array.forEach(this.xObjs_,function(a){window.console.log("adding",a);this.Renderer.add(a)}.bind(this))};
xiv.vis.XtkPlane.prototype.restoreCamera_=function(){goog.isDefAndNotNull(this.camera_)&&this.setCamera(this.camera_)};xiv.vis.XtkPlane.prototype.restoreBackground_=function(){goog.isDefAndNotNull(this.background_)&&this.setBackground(this.background_)};xiv.vis.XtkPlane.prototype.render=function(){this.isEnabled_?this.Renderer.render():window.console.log("Plane"+this.orientation+" is switched off.")};xiv.vis.XtkPlane.prototype.updateStyle=function(){if(goog.isDefAndNotNull(this.Renderer))this.Renderer.onResize()};
xiv.vis.XtkPlane.prototype.dispose=function(){xiv.vis.XtkPlane.superClass_.dispose.call(this);goog.isDefAndNotNull(this.Renderer)&&(this.Renderer.destroy(),delete this.Renderer);this.disposeDisabledOverlay_();goog.isDefAndNotNull(this.background_)&&delete this.background_;goog.isDefAndNotNull(this.camera_)&&delete this.camera_;goog.isDefAndNotNull(this.progressTimer_)&&(goog.isDefAndNotNull(this.progressTimer_.dispose)&&(this.progressTimer_.stop(),this.progressTimer_.dispose()),delete this.progressTimer_);
delete this.isEnabled_;delete this.XRenderer;delete this.container;delete this.orientation;delete this.xObjs_;delete this.currVolume_;delete this.renderProgress_};goog.exportSymbol("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION);goog.exportSymbol("xiv.vis.XtkPlane.DEFAULT_BACKGROUND",xiv.vis.XtkPlane.DEFAULT_BACKGROUND);goog.exportSymbol("xiv.vis.XtkPlane.prototype.XRenderer",xiv.vis.XtkPlane.prototype.XRenderer);
goog.exportSymbol("xiv.vis.XtkPlane.prototype.orientation",xiv.vis.XtkPlane.prototype.orientation);goog.exportSymbol("xiv.vis.XtkPlane.prototype.Renderer",xiv.vis.XtkPlane.prototype.Renderer);goog.exportSymbol("xiv.vis.XtkPlane.prototype.container",xiv.vis.XtkPlane.prototype.container);goog.exportSymbol("xiv.vis.XtkPlane.prototype.getRenderer",xiv.vis.XtkPlane.prototype.getRenderer);goog.exportSymbol("xiv.vis.XtkPlane.prototype.getOrientation",xiv.vis.XtkPlane.prototype.getOrientation);
goog.exportSymbol("xiv.vis.XtkPlane.prototype.setCamera",xiv.vis.XtkPlane.prototype.setCamera);goog.exportSymbol("xiv.vis.XtkPlane.prototype.setBackground",xiv.vis.XtkPlane.prototype.setBackground);goog.exportSymbol("xiv.vis.XtkPlane.prototype.getCurrentVolume",xiv.vis.XtkPlane.prototype.getCurrentVolume);goog.exportSymbol("xiv.vis.XtkPlane.prototype.getContainer",xiv.vis.XtkPlane.prototype.getContainer);goog.exportSymbol("xiv.vis.XtkPlane.prototype.setContainer",xiv.vis.XtkPlane.prototype.setContainer);
goog.exportSymbol("xiv.vis.XtkPlane.prototype.init",xiv.vis.XtkPlane.prototype.init);goog.exportSymbol("xiv.vis.XtkPlane.prototype.add",xiv.vis.XtkPlane.prototype.add);goog.exportSymbol("xiv.vis.XtkPlane.prototype.isEnabled",xiv.vis.XtkPlane.prototype.isEnabled);goog.exportSymbol("xiv.vis.XtkPlane.prototype.setEnabled",xiv.vis.XtkPlane.prototype.setEnabled);goog.exportSymbol("xiv.vis.XtkPlane.prototype.restore",xiv.vis.XtkPlane.prototype.restore);
goog.exportSymbol("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer);goog.exportSymbol("xiv.vis.XtkPlane.prototype.render",xiv.vis.XtkPlane.prototype.render);goog.exportSymbol("xiv.vis.XtkPlane.prototype.updateStyle",xiv.vis.XtkPlane.prototype.updateStyle);goog.exportSymbol("xiv.vis.XtkPlane.prototype.dispose",xiv.vis.XtkPlane.prototype.dispose);xiv.vis.XtkRenderer2D=function(){X.renderer2D.call(this)};goog.inherits(xiv.vis.XtkRenderer2D,X.renderer2D);goog.exportSymbol("xiv.vis.XtkRenderer2D",xiv.vis.XtkRenderer2D);xiv.vis.XtkRenderer2D.EventType={SLICE_NAVIGATED:goog.events.getUniqueId("slice-navigated")};
xiv.vis.XtkRenderer2D.prototype.getDimsForCalc_=function(){this.originalWidth_=this._sliceWidthSpacing*this._sliceWidth;this.originalHeight_=this._sliceHeightSpacing*this._sliceHeight;this.originalWHRatio_=originalWidth/originalHeight;this.canvasWHRatio_=this._sliceWidth/this._sliceHeight};xiv.vis.XtkRenderer2D.prototype.onResize=function(){this.onResize_()};xiv.vis.XtkRenderer2D.prototype.onScroll=function(){this.onSliceNavigation()};
xiv.vis.XtkRenderer2D.prototype.onProgress=function(a){xiv.vis.XtkRenderer2D.superClass_.onProgress.call(this,a);this.dispatchEvent({type:xiv.vis.RenderEngine.EventType.RENDERING,value:a._value})};xiv.vis.XtkRenderer2D.prototype.init=function(){this.config.PROGRESSBAR_ENABLED=!1;xiv.vis.XtkRenderer2D.superClass_.init.call(this);this.interactor.onMouseMove=this.onInteractorMouseMove_.bind(this);this.disableMouseInteractions_()};xiv.vis.XtkRenderer2D.prototype.getOrientation=function(){return this._orientation};
xiv.vis.XtkRenderer2D.prototype.getCamera=function(){return this._camera};xiv.vis.XtkRenderer2D.prototype.getMousePosition=function(){return this.interactor.mousePosition};xiv.vis.XtkRenderer2D.prototype.isMouseOver=function(){this.mouseOver_=!0};xiv.vis.XtkRenderer2D.prototype.onInteractorMouseMove_=function(a){this.mouseOver_=!0;this.dispatchEvent({type:goog.events.EventType.MOUSEOVER,mousePosition:this.interactor.mousePosition,shiftDown:this.interactor._shiftDown})};
xiv.vis.XtkRenderer2D.prototype.disableMouseInteractions_=function(){this.interactor.config.MOUSEWHEEL_ENABLED=!1;this.interactor.config.MOUSECLICKS_ENABLED=!1;this.interactor.config.KEYBOARD_ENABLED=!1;this.interactor.init()};xiv.vis.XtkRenderer2D.prototype.onSliceNavigation=function(){this.dispatchEvent({type:xiv.vis.XtkRenderer2D.EventType.SLICE_NAVIGATED,volume:this._topLevelObjects[0],changeValue:this._topLevelObjects[0]["index"+this._orientation],changeOrientation:this._orientation,shiftDown:this.interactor._shiftDown})};
xiv.vis.XtkRenderer2D.prototype.render=function(){this._canvas&&this._context?(xiv.vis.XtkRenderer2D.superClass_.render.call(this),this.dispatchEvent({type:xiv.vis.RenderEngine.EventType.RENDER_END})):this.init()};xiv.vis.XtkRenderer2D.prototype.getCanvas=function(){return this._canvas};xiv.vis.XtkRenderer2D.prototype.getVolume=function(){return this._topLevelObjects[0]};xiv.vis.XtkRenderer2D.prototype.getNumberSlices=function(){if(goog.isDefAndNotNull(this._slices))return this._slices.length};
xiv.vis.XtkRenderer2D.prototype.getZoom=function(){return this._camera._view[14]};xiv.vis.XtkRenderer2D.prototype.setZoom=function(a){this._camera._view[14]=a};xiv.vis.XtkRenderer2D.prototype.zoom_=function(a){goog.isDefAndNotNull(a);this._camera._view[14]+=.03*a};xiv.vis.XtkRenderer2D.prototype.zoomIn=function(){this.zoom_(1)};xiv.vis.XtkRenderer2D.prototype.zoomOut=function(){this.zoom_(-1)};
xiv.vis.XtkRenderer2D.prototype.getSliceScreenPos_=function(a,b,c){var d=this._topLevelObjects[0],e=this._camera._view,f=null,g=this._sliceWidth,h=this._sliceHeight,k=null,l=null;if(goog.isDefAndNotNull(d)){"Y"==this._orientation?(f=this._slices[parseInt(d.indexY,10)],k=f._widthSpacing,l=f._heightSpacing,this._orientationColors[0]="red",this._orientationColors[1]="blue"):"Z"==this._orientation?(f=this._slices[parseInt(d.indexZ,10)],k=f._widthSpacing,l=f._heightSpacing,this._orientationColors[0]="red",
this._orientationColors[1]="green"):(f=this._slices[parseInt(d.indexX,10)],k=f._heightSpacing,l=f._widthSpacing,this._orientationColors[0]="green",this._orientationColors[1]="blue",d=g,g=h,h=d);var d=1*e[12],f=-1*e[13],e=Math.max(e[14],.6),m=[this._width/2,this._height/2],k=g*k*e,l=h*l*e,n=m[0]-k/2,m=m[1]-l/2,n=n+d*e,m=m+f*e;if("vertical"===b)return a=Math.max(0,a),a=Math.min(a,g),c?n+(this._sliceWidth-a)/g*k:n+a/g*k;a=Math.max(0,a);a=Math.min(a,h);return c?m+(this._sliceHeight-a)/h*l:m+a/h*l}};
xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX=function(a,b){return this.getSliceScreenPos_(a,"vertical",b)};xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY=function(a,b){return this.getSliceScreenPos_(a,"horizontal",b)};xiv.vis.XtkRenderer2D.prototype.destroy=function(){xiv.vis.XtkRenderer2D.superClass_.destroy.call(this)};goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.onResize",xiv.vis.XtkRenderer2D.prototype.onResize);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.onScroll",xiv.vis.XtkRenderer2D.prototype.onScroll);
goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.onProgress",xiv.vis.XtkRenderer2D.prototype.onProgress);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.init",xiv.vis.XtkRenderer2D.prototype.init);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getOrientation",xiv.vis.XtkRenderer2D.prototype.getOrientation);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getCamera",xiv.vis.XtkRenderer2D.prototype.getCamera);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getMousePosition",xiv.vis.XtkRenderer2D.prototype.getMousePosition);
goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.isMouseOver",xiv.vis.XtkRenderer2D.prototype.isMouseOver);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",xiv.vis.XtkRenderer2D.prototype.onSliceNavigation);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.render",xiv.vis.XtkRenderer2D.prototype.render);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getCanvas",xiv.vis.XtkRenderer2D.prototype.getCanvas);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getVolume",xiv.vis.XtkRenderer2D.prototype.getVolume);
goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",xiv.vis.XtkRenderer2D.prototype.getNumberSlices);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getZoom",xiv.vis.XtkRenderer2D.prototype.getZoom);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.setZoom",xiv.vis.XtkRenderer2D.prototype.setZoom);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.zoomIn",xiv.vis.XtkRenderer2D.prototype.zoomIn);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.zoomOut",xiv.vis.XtkRenderer2D.prototype.zoomOut);
goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY);goog.exportSymbol("xiv.vis.XtkRenderer2D.prototype.destroy",xiv.vis.XtkRenderer2D.prototype.destroy);xiv.vis.XtkPlane2D=function(a){xiv.vis.XtkPlane.call(this);this.orientation=a;this.XRenderer=xiv.vis.XtkRenderer2D;this.currVolume_=null};goog.inherits(xiv.vis.XtkPlane2D,xiv.vis.XtkPlane);goog.exportSymbol("xiv.vis.XtkPlane2D",xiv.vis.XtkPlane2D);xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX=function(a){return this.Renderer.getSliceRelativeToContainerX(sliceNo)};xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY=function(a){return this.Renderer.getSliceRelativeToContainerY(sliceNo)};
xiv.vis.XtkPlane2D.prototype.getVolume=function(){return goog.isDefAndNotNull(this.Renderer)?this.Renderer.getVolume():null};xiv.vis.XtkPlane2D.prototype.setContainer=function(a){xiv.vis.XtkPlane2D.superClass_.setContainer.call(this,a)};xiv.vis.XtkPlane2D.prototype.dispose=function(){xiv.vis.XtkPlane2D.superClass_.dispose.call(this);delete this.currVolume_;delete this.keyDown_;delete this.keyUp_};goog.exportSymbol("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX);
goog.exportSymbol("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY);goog.exportSymbol("xiv.vis.XtkPlane2D.prototype.getVolume",xiv.vis.XtkPlane2D.prototype.getVolume);goog.exportSymbol("xiv.vis.XtkPlane2D.prototype.setContainer",xiv.vis.XtkPlane2D.prototype.setContainer);goog.exportSymbol("xiv.vis.XtkPlane2D.prototype.dispose",xiv.vis.XtkPlane2D.prototype.dispose);xiv.ui.ctrl.RadioButtonController=function(){xiv.ui.ctrl.XtkController.call(this);this.setComponent(goog.dom.createDom("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+goog.string.createUniqueString(),type:"radio"}));goog.dom.classes.add(this.getComponent(),xiv.ui.ctrl.RadioButtonController.CSS.RADIOBUTTON);goog.events.listen(this.getComponent(),goog.events.EventType.CHANGE,this.dispatchComponentEvent.bind(this))};goog.inherits(xiv.ui.ctrl.RadioButtonController,xiv.ui.ctrl.XtkController);
goog.exportSymbol("xiv.ui.ctrl.RadioButtonController",xiv.ui.ctrl.RadioButtonController);xiv.ui.ctrl.RadioButtonController.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX={RADIOBUTTON:"radiobutton"};xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent=function(){this.dispatchEvent({type:xiv.ui.ctrl.XtkController.EventType.CHANGE,checked:this.getComponent().checked})};xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal=function(){xiv.ui.ctrl.RadioButtonController.superClass_.disposeInternal.call(this)};
goog.exportSymbol("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",xiv.ui.ctrl.RadioButtonController.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent);goog.exportSymbol("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal);xiv.ui.ctrl.MasterController2D=function(){xiv.ui.ctrl.XtkController.call(this);this.xObjs_=[]};goog.inherits(xiv.ui.ctrl.MasterController2D,xiv.ui.ctrl.XtkController);goog.exportSymbol("xiv.ui.ctrl.MasterController2D",xiv.ui.ctrl.MasterController2D);xiv.ui.ctrl.MasterController2D.ID_PREFIX="xiv.ui.ctrl.MasterController2D";xiv.ui.ctrl.MasterController2D.CSS_SUFFIX={};xiv.ui.ctrl.MasterController2D.prototype.add=function(a){};
xiv.ui.ctrl.MasterController2D.prototype.disposeInternal=function(){xiv.ui.ctrl.MasterController2D.superClass_.disposeInternal.call(this);goog.array.clear(this.xObjs_);delete this.xObjs_};goog.exportSymbol("xiv.ui.ctrl.MasterController2D.ID_PREFIX",xiv.ui.ctrl.MasterController2D.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",xiv.ui.ctrl.MasterController2D.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.MasterController2D.prototype.add",xiv.ui.ctrl.MasterController2D.prototype.add);
goog.exportSymbol("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",xiv.ui.ctrl.MasterController2D.prototype.disposeInternal);xiv.ui.ctrl.SliderController=function(){xiv.ui.ctrl.XtkController.call(this);this.setLabel("Master Opacity")};goog.inherits(xiv.ui.ctrl.SliderController,xiv.ui.ctrl.XtkController);goog.exportSymbol("xiv.ui.ctrl.SliderController",xiv.ui.ctrl.SliderController);xiv.ui.ctrl.SliderController.ID_PREFIX="xiv.ui.ctrl.SliderController";
xiv.ui.ctrl.SliderController.CSS_SUFFIX={SLIDER:"slider",SLIDER_THUMB:"slider-thumb",SLIDER_THUMB_HOVER:"slider-thumb-hover",SLIDER_TRACK:"slider-track",SLIDER_TRACK_HOVER:"slider-track-hover",VALUE_INPUT:"value-input"};xiv.ui.ctrl.SliderController.prototype.valueDecimals_=2;xiv.ui.ctrl.SliderController.prototype.setValueDecimals=function(a){this.valueDecimals_=a};
xiv.ui.ctrl.SliderController.prototype.render=function(a){xiv.ui.ctrl.SliderController.superClass_.render.call(this,a);this.createSlider_();this.createValueInput_()};
xiv.ui.ctrl.SliderController.prototype.createSlider_=function(){var a=new nrg.ui.Slider;this.setComponent(a);a.setMinimum(0);a.setMaximum(1);a.setStep(.01);a.setValue(1);goog.dom.classes.add(a.getElement(),xiv.ui.ctrl.SliderController.CSS.SLIDER);goog.dom.classes.add(a.getThumb(),xiv.ui.ctrl.SliderController.CSS.SLIDER_THUMB);goog.dom.classes.add(a.getTrack(),xiv.ui.ctrl.SliderController.CSS.SLIDER_TRACK);a.addThumbHoverClass(xiv.ui.ctrl.SliderController.CSS.SLIDER_THUMB_HOVER);a.addTrackHoverClass(xiv.ui.ctrl.SliderController.CSS.SLIDER_TRACK_HOVER);
goog.events.listen(this.getComponent(),goog.events.EventType.CHANGE,this.dispatchComponentEvent.bind(this))};
xiv.ui.ctrl.SliderController.prototype.createValueInput_=function(){this.getComponent();this.valueInput_=goog.dom.createDom("input");this.valueInput_.type="number";goog.dom.classes.add(this.valueInput_,xiv.ui.ctrl.SliderController.CSS.VALUE_INPUT);goog.dom.append(this.getElement(),this.valueInput_);goog.events.listen(this.valueInput_,goog.events.EventType.INPUT,this.onValueInput_.bind(this));this.update()};
xiv.ui.ctrl.SliderController.prototype.onValueInput_=function(a){window.console.log("on value input");a=this.getComponent();var b=parseFloat(this.valueInput_.value),b=goog.math.clamp(b,a.getMinimum(),a.getMaximum());this.valueInput_.value=b;a.setValue(b)};xiv.ui.ctrl.SliderController.prototype.getValueInput=function(a){return this.valueInput_};
xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent=function(){var a=this.getComponent(),b=a.getValue().toFixed(this.valueDecimals_),c=parseInt(this.valueInput_.value);this.valueInput_.value=b;this.dispatchEvent({type:xiv.ui.ctrl.XtkController.EventType.CHANGE,value:b,minimum:a.getMinimum(),maximum:a.getMaximum(),previous:c})};
xiv.ui.ctrl.SliderController.prototype.update=function(){var a=this.getComponent(),b=a.getValue();a.updateStyle();a.setValue(0);a.setValue(b);a.getStep()!==this.valueInput_.step&&(this.valueInput_.step=a.getStep());a.getMinimum()!==this.valueInput_.min&&(this.valueInput_.min=a.getMinimum());a.getMaximum()!==this.valueInput_.max&&(this.valueInput_.max=a.getMaximum());a.getValue()!==this.valueInput_.value&&(this.valueInput_.value=b)};
xiv.ui.ctrl.SliderController.prototype.disposeInternal=function(){xiv.ui.ctrl.SliderController.superClass_.disposeInternal.call(this);delete this.valueDecimals_;goog.isDefAndNotNull(this.valueInput_)&&(goog.events.removeAll(this.valueInput_),goog.dom.removeNode(this.valueInput_),delete this.valueInput_)};goog.exportSymbol("xiv.ui.ctrl.SliderController.ID_PREFIX",xiv.ui.ctrl.SliderController.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.SliderController.CSS_SUFFIX",xiv.ui.ctrl.SliderController.CSS_SUFFIX);
goog.exportSymbol("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",xiv.ui.ctrl.SliderController.prototype.setValueDecimals);goog.exportSymbol("xiv.ui.ctrl.SliderController.prototype.render",xiv.ui.ctrl.SliderController.prototype.render);goog.exportSymbol("xiv.ui.ctrl.SliderController.prototype.getValueInput",xiv.ui.ctrl.SliderController.prototype.getValueInput);goog.exportSymbol("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent);
goog.exportSymbol("xiv.ui.ctrl.SliderController.prototype.update",xiv.ui.ctrl.SliderController.prototype.update);goog.exportSymbol("xiv.ui.ctrl.SliderController.prototype.disposeInternal",xiv.ui.ctrl.SliderController.prototype.disposeInternal);xiv.ui.ctrl.TwoThumbSliderController=function(){xiv.ui.ctrl.XtkController.call(this);this.setLabel("TwoThumb");this.createSlider_();this.createValueInput_();this.createExtentInput_()};goog.inherits(xiv.ui.ctrl.TwoThumbSliderController,xiv.ui.ctrl.XtkController);goog.exportSymbol("xiv.ui.ctrl.TwoThumbSliderController",xiv.ui.ctrl.TwoThumbSliderController);xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";
xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX={SLIDER:"slider",SLIDER_THUMB:"slider-thumb",SLIDER_THUMB_EXTENT:"slider-thumb-extent",SLIDER_THUMB_VALUE:"slider-thumb-value",SLIDER_THUMB_HOVER:"slider-thumb-hover",SLIDER_TRACK:"slider-track",SLIDER_TRACK_HOVER:"slider-track-hover",VALUE_INPUT:"value-input",EXTENT_INPUT:"extent-input"};
xiv.ui.ctrl.TwoThumbSliderController.prototype.createSlider_=function(){this.slider_=new goog.ui.TwoThumbSlider;this.slider_.createDom();var a=this.slider_.getElement();a.setAttribute("id","ThresholdSlider_"+goog.string.createUniqueString());goog.dom.classes.add(a,xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER);var b=goog.dom.createDom("div",{id:"ThwoThumbSlider_track_"+goog.string.createUniqueString(),"class":xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER_TRACK});goog.dom.appendChild(a,b);this.setComponent(this.slider_);
this.setSliderClasses_();goog.events.listen(this.slider_,goog.events.EventType.CHANGE,this.dispatchComponentEvent.bind(this))};
xiv.ui.ctrl.TwoThumbSliderController.prototype.setSliderClasses_=function(){goog.dom.classes.add(this.slider_.getValueThumb(),xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER_THUMB);goog.dom.classes.add(this.slider_.getValueThumb(),xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER_THUMB_VALUE);nrg.style.setHoverClass(this.slider_.getValueThumb(),xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER_THUMB_HOVER);goog.dom.classes.add(this.slider_.getExtentThumb(),xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER_THUMB);
goog.dom.classes.add(this.slider_.getExtentThumb(),xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER_THUMB_EXTENT);nrg.style.setHoverClass(this.slider_.getExtentThumb(),xiv.ui.ctrl.TwoThumbSliderController.CSS.SLIDER_THUMB_HOVER)};xiv.ui.ctrl.TwoThumbSliderController.prototype.update=function(){this.updateSliderThumbPositions_();this.updateValueInputParameters_();this.updateExtentInputParameters_()};
xiv.ui.ctrl.TwoThumbSliderController.prototype.updateSliderThumbPositions_=function(){var a=goog.style.getSize(this.slider_.getValueThumb()).width,b=this.slider_.getMaximum()-this.slider_.getMinimum(),c=goog.style.getSize(this.slider_.getElement()).width-a,a=c*((this.slider_.getValue()-this.slider_.getMinimum())/b),b=c*(this.slider_.getExtent()/b);this.slider_.getValueThumb().style.left=a.toString()+"px";this.slider_.getExtentThumb().style.left=b.toString()+"px"};
xiv.ui.ctrl.TwoThumbSliderController.prototype.updateValueInputParameters_=function(){this.valueInput_.step=1;this.valueInput_.min=this.slider_.getMinimum();this.valueInput_.max=this.slider_.getMaximum();this.valueInput_.value=this.slider_.getValue()};
xiv.ui.ctrl.TwoThumbSliderController.prototype.updateExtentInputParameters_=function(){this.extentInput_.step=1;this.extentInput_.min=this.slider_.getMinimum();this.extentInput_.max=this.slider_.getMaximum();this.extentInput_.value=this.slider_.getExtent()+this.slider_.getValue()};
xiv.ui.ctrl.TwoThumbSliderController.prototype.createValueInput_=function(){this.valueInput_=goog.dom.createDom("input");this.valueInput_.type="number";goog.dom.classes.add(this.valueInput_,xiv.ui.ctrl.TwoThumbSliderController.CSS.VALUE_INPUT);goog.dom.append(this.getElement(),this.valueInput_);goog.events.listen(this.valueInput_,goog.events.EventType.INPUT,this.onValueInput_.bind(this));this.updateValueInputParameters_()};
xiv.ui.ctrl.TwoThumbSliderController.prototype.createExtentInput_=function(){this.extentInput_=goog.dom.createDom("input");this.extentInput_.type="number";goog.dom.classes.add(this.extentInput_,xiv.ui.ctrl.TwoThumbSliderController.CSS.EXTENT_INPUT);goog.dom.append(this.getElement(),this.extentInput_);goog.events.listen(this.extentInput_,goog.events.EventType.INPUT,this.onExtentInput_.bind(this));this.updateExtentInputParameters_()};
xiv.ui.ctrl.TwoThumbSliderController.prototype.onValueInput_=function(a){window.console.log(a,this.valueInput_);a=parseInt(this.valueInput_.value);this.slider_.setValue(a)};xiv.ui.ctrl.TwoThumbSliderController.prototype.onExtentInput_=function(a){a=parseInt(this.extentInput_.value);this.slider_.setExtent(a-this.slider_.getValue())};
xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent=function(){var a=this.slider_.getValue(),b=this.slider_.getExtent()+a;this.valueInput_.value=a;this.extentInput_.value=b;this.dispatchEvent({type:xiv.ui.ctrl.XtkController.EventType.CHANGE,lower:a,upper:b})};
xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal=function(){xiv.ui.ctrl.TwoThumbSliderController.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.slider_)&&(goog.events.removeAll(this.slider_),goog.isDefAndNotNull(this.slider_.rangeModel)||(this.slider_.rangeModel=new goog.ui.RangeModel),this.slider_.dispose(),delete this.slider_);goog.isDefAndNotNull(this.valueInput_)&&(goog.events.removeAll(this.valueInput_),goog.dom.removeNode(this.valueInput_),delete this.valueInput_);
goog.isDefAndNotNull(this.extentInput_)&&(goog.events.removeAll(this.extentInput_),goog.dom.removeNode(this.extentInput_),delete this.extentInput_)};goog.exportSymbol("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",xiv.ui.ctrl.TwoThumbSliderController.prototype.update);
goog.exportSymbol("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent);goog.exportSymbol("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal);xiv.ui.ctrl.MasterController3D=function(){xiv.ui.ctrl.XtkController.call(this);this.xObjs=[]};goog.inherits(xiv.ui.ctrl.MasterController3D,xiv.ui.ctrl.XtkController);goog.exportSymbol("xiv.ui.ctrl.MasterController3D",xiv.ui.ctrl.MasterController3D);xiv.ui.ctrl.MasterController3D.ID_PREFIX="xiv.ui.ctrl.MasterController3D";xiv.ui.ctrl.MasterController3D.CSS_SUFFIX={};xiv.ui.ctrl.MasterController3D.CONTROLLERS={VISIBLE:"Visible",OPACITY:"Opacity"};
xiv.ui.ctrl.MasterController3D.prototype.add=function(a){this.xObjs.push(a);this.add_opacity(a,xiv.ui.ctrl.SliderController);1==this.xObjs.length&&goog.dom.append(document.body,this.getElement())};xiv.ui.ctrl.XtkController.prototype.add_displayAll=function(a){a=this.createController(xiv.ui.ctrl.CheckboxController,"Display All",this.onMasterDisplayAllChange_.bind(this));this.masterControllers.push(a);a.getComponent().setChecked(!0)};
xiv.ui.ctrl.XtkController.prototype.add_masterOpacity=function(a){a=this.createController(xiv.ui.ctrl.SliderController,"Master Opacity",this.onMasterOpacityChange_.bind(this));this.masterControllers.push(a);a.getComponent().setValue(1)};xiv.ui.ctrl.MasterController3D.prototype.onMasterOpacityChange_=function(a){goog.array.forEach(this.subControllers,function(b){"Opacity"==b.getLabel().innerHTML&&b.getComponent().setValue(parseFloat(a.value))})};
xiv.ui.ctrl.MasterController3D.prototype.onMasterDisplayAllChange_=function(a){goog.array.forEach(this.subControllers,function(b){"Visible"==b.getLabel().innerHTML&&b.setChecked(a.checked)})};xiv.ui.ctrl.MasterController3D.prototype.disposeInternal=function(){xiv.ui.ctrl.MasterController3D.superClass_.disposeInternal.call(this);goog.array.clear(this.xObjs);delete this.xObjs};goog.exportSymbol("xiv.ui.ctrl.MasterController3D.ID_PREFIX",xiv.ui.ctrl.MasterController3D.ID_PREFIX);
goog.exportSymbol("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",xiv.ui.ctrl.MasterController3D.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.MasterController3D.CONTROLLERS",xiv.ui.ctrl.MasterController3D.CONTROLLERS);goog.exportSymbol("xiv.ui.ctrl.MasterController3D.prototype.add",xiv.ui.ctrl.MasterController3D.prototype.add);goog.exportSymbol("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",xiv.ui.ctrl.MasterController3D.prototype.disposeInternal);xiv.ui.ctrl.VolumeController3D=function(){xiv.ui.ctrl.MasterController3D.call(this)};goog.inherits(xiv.ui.ctrl.VolumeController3D,xiv.ui.ctrl.MasterController3D);goog.exportSymbol("xiv.ui.ctrl.VolumeController3D",xiv.ui.ctrl.VolumeController3D);xiv.ui.ctrl.VolumeController3D.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD=1E3;xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX={};
xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering=function(a){var b=this.createController(xiv.ui.ctrl.CheckboxController,"Volume Rendering",function(b){a.volumeRendering=b.checked});xiv.ui.ctrl.XtkController.setControllerFolders(a,b);this.subControllers.push(b);b.getComponent().setChecked(!1)};
xiv.ui.ctrl.VolumeController3D.onSliderChange_=function(a){a.target[xiv.ui.ctrl.VolumeController3D.VOLUME_ID].lowerThreshold=parseFloat(a.lower);a.target[xiv.ui.ctrl.VolumeController3D.VOLUME_ID].upperThreshold=parseFloat(a.upper)};xiv.ui.ctrl.VolumeController3D.VOLUME_ID=goog.string.createUniqueString();
xiv.ui.ctrl.VolumeController3D.prototype.add_threshold=function(a){var b=this.createController(xiv.ui.ctrl.TwoThumbSliderController,"Threshold",this.constructor.onSliderChange_);b[xiv.ui.ctrl.VolumeController3D.VOLUME_ID]=a;xiv.ui.ctrl.XtkController.setControllerFolders(a,b);this.subControllers.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1*xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD,
a.upperThreshold=d);b=b.getComponent();b.setMinimum(c);b.setMaximum(d);b.setValueAndExtent(d-c);b.setValue(c);b.setStep(10);b.setExtent(d-c);a.upperThreshold=d;a.lowerThreshold=c};xiv.ui.ctrl.VolumeController3D.prototype.add=function(a){xiv.ui.ctrl.VolumeController3D.superClass_.add.call(this,a);this.add_volumeRendering(a);this.add_threshold(a)};xiv.ui.ctrl.VolumeController3D.prototype.updateStyle=function(a){xiv.ui.ctrl.VolumeController3D.superClass_.updateStyle.call(this)};
goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",xiv.ui.ctrl.VolumeController3D.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD);goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.VOLUME_ID",xiv.ui.ctrl.VolumeController3D.VOLUME_ID);
goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering);goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",xiv.ui.ctrl.VolumeController3D.prototype.add_threshold);goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.prototype.add",xiv.ui.ctrl.VolumeController3D.prototype.add);goog.exportSymbol("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",xiv.ui.ctrl.VolumeController3D.prototype.updateStyle);xiv.ui.ctrl.MasterController=function(){xiv.ui.ctrl.XtkController.call(this);this.xObjs=[]};goog.inherits(xiv.ui.ctrl.MasterController,xiv.ui.ctrl.XtkController);goog.exportSymbol("xiv.ui.ctrl.MasterController",xiv.ui.ctrl.MasterController);xiv.ui.ctrl.MasterController.ID_PREFIX="xiv.ui.ctrl.MasterController";xiv.ui.ctrl.MasterController.CSS_SUFFIX={};xiv.ui.ctrl.MasterController.CONTROLLERS={};xiv.ui.ctrl.MasterController.prototype.add=function(a){this.xObjs.push(a)};
xiv.ui.ctrl.MasterController.prototype.disposeInternal=function(){xiv.ui.ctrl.MasterController.superClass_.disposeInternal.call(this);goog.array.clear(this.xObjs);delete this.xObjs};goog.exportSymbol("xiv.ui.ctrl.MasterController.ID_PREFIX",xiv.ui.ctrl.MasterController.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.MasterController.CSS_SUFFIX",xiv.ui.ctrl.MasterController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.MasterController.CONTROLLERS",xiv.ui.ctrl.MasterController.CONTROLLERS);
goog.exportSymbol("xiv.ui.ctrl.MasterController.prototype.add",xiv.ui.ctrl.MasterController.prototype.add);goog.exportSymbol("xiv.ui.ctrl.MasterController.prototype.disposeInternal",xiv.ui.ctrl.MasterController.prototype.disposeInternal);xiv.ui.ctrl.LevelsController=function(){xiv.ui.ctrl.MasterController.call(this)};goog.inherits(xiv.ui.ctrl.LevelsController,xiv.ui.ctrl.MasterController);goog.exportSymbol("xiv.ui.ctrl.LevelsController",xiv.ui.ctrl.LevelsController);xiv.ui.ctrl.LevelsController.ID_PREFIX="xiv.ui.ctrl.LevelsController";xiv.ui.ctrl.LevelsController.CSS_SUFFIX={};xiv.ui.ctrl.LevelsController.CONTROLLERS={BRIGHTNESS:"Brightness",CONTRAST:"Contrast",LEVEL_MIN:"Level Min.",LEVEL_MAX:"Level Max.",HISTOGRAM:"Histogram"};
xiv.ui.ctrl.LevelsController.LEVEL_MAX=1E3;xiv.ui.ctrl.LevelsController.LEVEL_MIN=0;xiv.ui.ctrl.LevelsController.prototype.updateHistogram_=function(a){a.update()};
xiv.ui.ctrl.LevelsController.prototype.add=function(a){xiv.ui.ctrl.LevelsController.superClass_.add.call(this,a);var b=this.add_histogram(a),c=this.add_levelMin(a),d=this.add_levelMax(a),e=this.add_brightness(a,c,d);a=this.add_contrast(a,c,d);goog.array.forEach([c,d,e,a],function(a){goog.events.listen(a.getComponent(),nrg.ui.Slider.EventType.SLIDE,function(a){this.updateHistogram_(b)}.bind(this))}.bind(this))};
xiv.ui.ctrl.LevelsController.prototype.add_histogram=function(a){var b=this.createController(xiv.ui.ctrl.Histogram,xiv.ui.ctrl.LevelsController.CONTROLLERS.HISTOGRAM,function(a){}.bind(this));b.setXObj(a);xiv.ui.ctrl.XtkController.setControllerFolders(a,b);this.masterControllers.push(b);b.update();return b};
xiv.ui.ctrl.LevelsController.prototype.add_levelMin=function(a){var b=this.createController(xiv.ui.ctrl.SliderController,xiv.ui.ctrl.LevelsController.CONTROLLERS.LEVEL_MIN,function(b){a.windowLow=b.value}.bind(this));b.setXObj(a);xiv.ui.ctrl.XtkController.setControllerFolders(a,b);this.masterControllers.push(b);b.getComponent().setMaximum(xiv.ui.ctrl.LevelsController.LEVEL_MAX);b.getComponent().setMinimum(xiv.ui.ctrl.LevelsController.LEVEL_MIN);b.getComponent().setValue(xiv.ui.ctrl.LevelsController.LEVEL_MIN);
b.getComponent().setStep(1);b.setValueDecimals(0);b.update();return b};
xiv.ui.ctrl.LevelsController.prototype.add_levelMax=function(a){var b=this.createController(xiv.ui.ctrl.SliderController,xiv.ui.ctrl.LevelsController.CONTROLLERS.LEVEL_MAX);b.setXObj(a);goog.events.listen(b,xiv.ui.ctrl.XtkController.EventType.CHANGE,function(b){a.windowHigh=b.value}.bind(this));xiv.ui.ctrl.XtkController.setControllerFolders(a,b);this.masterControllers.push(b);b.getComponent().setMaximum(xiv.ui.ctrl.LevelsController.LEVEL_MAX);b.getComponent().setMinimum(xiv.ui.ctrl.LevelsController.LEVEL_MIN);
b.getComponent().setValue(xiv.ui.ctrl.LevelsController.LEVEL_MAX);b.getComponent().setStep(1);b.setValueDecimals(0);b.update();return b};
xiv.ui.ctrl.LevelsController.prototype.add_brightness=function(a,b,c){var d=this.createController(xiv.ui.ctrl.SliderController,xiv.ui.ctrl.LevelsController.CONTROLLERS.BRIGHTNESS);d.setXObj(a);goog.events.listen(d,xiv.ui.ctrl.XtkController.EventType.CHANGE,function(d){d=(d.value-d.previous)/(d.maximum-d.minimum);var f=a.windowHigh-a.windowLow;a.windowLow=Math.round(parseInt(a.windowLow)-f*d);a.windowHigh=Math.round(parseInt(a.windowHigh)-f*d);b.getComponent().setValue(a.windowLow);c.getComponent().setValue(a.windowHigh)}.bind(this));
xiv.ui.ctrl.XtkController.setControllerFolders(a,d);this.masterControllers.push(d);d.getComponent().setMaximum(150);d.getComponent().setMinimum(-150);d.getComponent().setValue(0);d.getComponent().setStep(1);d.setValueDecimals(0);d.update();return d};
xiv.ui.ctrl.LevelsController.prototype.add_contrast=function(a,b,c){var d=this.createController(xiv.ui.ctrl.SliderController,xiv.ui.ctrl.LevelsController.CONTROLLERS.CONTRAST);d.setXObj(a);goog.events.listen(d,xiv.ui.ctrl.XtkController.EventType.CHANGE,function(d){var f=(d.value-d.previous)/(d.maximum-d.minimum),g=parseInt(a.windowHigh)-parseInt(a.windowLow);d=parseInt(a.windowLow)+g*f;f=parseInt(a.windowHigh)-g*f;a.windowLow=Math.round(d);a.windowHigh=Math.round(f);b.getComponent().setValue(a.windowLow);
c.getComponent().setValue(a.windowHigh)}.bind(this));xiv.ui.ctrl.XtkController.setControllerFolders(a,d);this.masterControllers.push(d);d.getComponent().setMaximum(150);d.getComponent().setMinimum(-150);d.getComponent().setValue(0);d.getComponent().setStep(1);d.setValueDecimals(0);d.update();return d};xiv.ui.ctrl.LevelsController.prototype.disposeInternal=function(){xiv.ui.ctrl.LevelsController.superClass_.disposeInternal.call(this)};goog.exportSymbol("xiv.ui.ctrl.LevelsController.ID_PREFIX",xiv.ui.ctrl.LevelsController.ID_PREFIX);
goog.exportSymbol("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",xiv.ui.ctrl.LevelsController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.LevelsController.CONTROLLERS",xiv.ui.ctrl.LevelsController.CONTROLLERS);goog.exportSymbol("xiv.ui.ctrl.LevelsController.LEVEL_MAX",xiv.ui.ctrl.LevelsController.LEVEL_MAX);goog.exportSymbol("xiv.ui.ctrl.LevelsController.LEVEL_MIN",xiv.ui.ctrl.LevelsController.LEVEL_MIN);goog.exportSymbol("xiv.ui.ctrl.LevelsController.prototype.add",xiv.ui.ctrl.LevelsController.prototype.add);
goog.exportSymbol("xiv.ui.ctrl.LevelsController.prototype.add_histogram",xiv.ui.ctrl.LevelsController.prototype.add_histogram);goog.exportSymbol("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",xiv.ui.ctrl.LevelsController.prototype.add_levelMin);goog.exportSymbol("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",xiv.ui.ctrl.LevelsController.prototype.add_levelMax);goog.exportSymbol("xiv.ui.ctrl.LevelsController.prototype.add_brightness",xiv.ui.ctrl.LevelsController.prototype.add_brightness);
goog.exportSymbol("xiv.ui.ctrl.LevelsController.prototype.add_contrast",xiv.ui.ctrl.LevelsController.prototype.add_contrast);goog.exportSymbol("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",xiv.ui.ctrl.LevelsController.prototype.disposeInternal);goog.events.InputHandler=function(a){goog.events.EventTarget.call(this);this.timer_=null;this.element_=a;a=goog.userAgent.IE||goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("531")&&"TEXTAREA"==a.tagName;this.eventHandler_=new goog.events.EventHandler(this);this.eventHandler_.listen(this.element_,a?["keydown","paste","cut","drop","input"]:"input",this)};goog.inherits(goog.events.InputHandler,goog.events.EventTarget);goog.events.InputHandler.EventType={INPUT:"input"};
goog.events.InputHandler.prototype.handleEvent=function(a){if("input"==a.type)goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(10)&&0==a.keyCode&&0==a.charCode||(this.cancelTimerIfSet_(),goog.userAgent.OPERA&&this.element_!=goog.dom.getOwnerDocument(this.element_).activeElement||this.dispatchEvent(this.createInputEvent_(a)));else if("keydown"!=a.type||goog.events.KeyCodes.isTextModifyingKeyEvent(a)){var b="keydown"==a.type?this.element_.value:null;goog.userAgent.IE&&a.keyCode==goog.events.KeyCodes.WIN_IME&&
(b=null);var c=this.createInputEvent_(a);this.cancelTimerIfSet_();this.timer_=goog.Timer.callOnce(function(){this.timer_=null;this.element_.value!=b&&this.dispatchEvent(c)},0,this)}};goog.events.InputHandler.prototype.cancelTimerIfSet_=function(){null!=this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null)};goog.events.InputHandler.prototype.createInputEvent_=function(a){a=new goog.events.BrowserEvent(a.getBrowserEvent());a.type=goog.events.InputHandler.EventType.INPUT;return a};
goog.events.InputHandler.prototype.disposeInternal=function(){goog.events.InputHandler.superClass_.disposeInternal.call(this);this.eventHandler_.dispose();this.cancelTimerIfSet_();delete this.element_};goog.ui.HsvPalette=function(a,b,c){goog.ui.Component.call(this,a);this.setColorInternal(b||"#f00");this.className=c||"goog-hsv-palette";this.document_=this.getDomHelper().getDocument()};goog.inherits(goog.ui.HsvPalette,goog.ui.Component);goog.ui.HsvPalette.prototype.getColor=function(){return this.color_};goog.ui.HsvPalette.prototype.getAlpha=function(){return 1};
goog.ui.HsvPalette.prototype.updateInput=function(){var a;try{a=goog.color.parse(this.inputElement.value).hex}catch(b){}this.color_!=a&&(this.inputElement.value=this.color_)};goog.ui.HsvPalette.prototype.setColor=function(a){a!=this.color_&&(this.setColorInternal(a),this.updateUi(),this.dispatchEvent(goog.ui.Component.EventType.ACTION))};
goog.ui.HsvPalette.prototype.setColorInternal=function(a){a=goog.color.parse(a).hex;var b=goog.color.hexToRgb(a);this.hsv_=goog.color.rgbArrayToHsv(b);this.hsv_[0]/=360;this.color_=a};goog.ui.HsvPalette.prototype.setHsv=function(a,b,c){if(null!=a||null!=b||null!=c)this.setHsv_(a,b,c),this.updateUi(),this.dispatchEvent(goog.ui.Component.EventType.ACTION)};
goog.ui.HsvPalette.prototype.setHsv_=function(a,b,c){this.hsv_[0]=null!=a?a:this.hsv_[0];this.hsv_[1]=null!=b?b:this.hsv_[1];this.hsv_[2]=null!=c?c:this.hsv_[2];this.color_=goog.color.hsvArrayToHex([360*this.hsv_[0],this.hsv_[1],this.hsv_[2]])};goog.ui.HsvPalette.prototype.canDecorate=function(a){return!1};
goog.ui.HsvPalette.prototype.createDom=function(){var a=this.getDomHelper(),b=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")?" "+(this.className+"-noalpha"):"",c=a.createDom(goog.dom.TagName.DIV,this.className+"-hs-backdrop");this.hsHandleEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-hs-handle");this.hsImageEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-hs-image",this.hsHandleEl_);this.valueBackgroundImageElement=a.createDom(goog.dom.TagName.DIV,this.className+"-v-image");
this.vHandleEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-v-handle");this.swatchElement=a.createDom(goog.dom.TagName.DIV,this.className+"-swatch");this.inputElement=a.createDom("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.createDom("label",null,this.inputElement),a=a.createDom(goog.dom.TagName.DIV,this.className+b,c,this.hsImageEl_,this.valueBackgroundImageElement,this.vHandleEl_,this.swatchElement,d);this.setElementInternal(a)};
goog.ui.HsvPalette.prototype.enterDocument=function(){goog.ui.HsvPalette.superClass_.enterDocument.call(this);this.updateUi();var a=this.getHandler();a.listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDown);this.inputHandler_||(this.inputHandler_=new goog.events.InputHandler(this.inputElement));a.listen(this.inputHandler_,goog.events.InputHandler.EventType.INPUT,this.handleInput)};
goog.ui.HsvPalette.prototype.disposeInternal=function(){goog.ui.HsvPalette.superClass_.disposeInternal.call(this);delete this.hsImageEl_;delete this.hsHandleEl_;delete this.valueBackgroundImageElement;delete this.vHandleEl_;delete this.swatchElement;delete this.inputElement;this.inputHandler_&&(this.inputHandler_.dispose(),delete this.inputHandler_);goog.events.unlistenByKey(this.mouseMoveListener);goog.events.unlistenByKey(this.mouseUpListener)};
goog.ui.HsvPalette.prototype.updateUi=function(){if(this.isInDocument()){var a=this.hsv_[1],b=this.hsv_[2],c=this.hsImageEl_.offsetWidth*this.hsv_[0];this.isRightToLeft()&&(c=this.hsImageEl_.offsetWidth-c);var d=Math.ceil(this.hsHandleEl_.offsetWidth/2),c=c-d,a=this.hsImageEl_.offsetHeight*(1-a),a=a-Math.ceil(this.hsHandleEl_.offsetHeight/2);goog.style.bidi.setPosition(this.hsHandleEl_,c,a,this.isRightToLeft());a=this.valueBackgroundImageElement.offsetTop-Math.floor(this.vHandleEl_.offsetHeight/2)+
(255-b)/255*this.valueBackgroundImageElement.offsetHeight;this.vHandleEl_.style.top=a+"px";goog.style.setOpacity(this.hsImageEl_,b/255);goog.style.setStyle(this.valueBackgroundImageElement,"background-color",goog.color.hsvToHex(360*this.hsv_[0],this.hsv_[1],255));goog.style.setStyle(this.swatchElement,"background-color",this.color_);goog.style.setStyle(this.swatchElement,"color",127.5<this.hsv_[2]?"#000":"#fff");this.updateInput()}};
goog.ui.HsvPalette.prototype.handleMouseDown=function(a){if(a.target==this.valueBackgroundImageElement||a.target==this.vHandleEl_){var b=goog.style.getBounds(this.valueBackgroundImageElement);this.handleMouseMoveV_(b,a);this.mouseMoveListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveV_,this,b));this.mouseUpListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEUP,this.handleMouseUp,!1,this)}else if(a.target==this.hsImageEl_||a.target==
this.hsHandleEl_)b=goog.style.getBounds(this.hsImageEl_),this.handleMouseMoveHs_(b,a),this.mouseMoveListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveHs_,this,b)),this.mouseUpListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEUP,this.handleMouseUp,!1,this)};
goog.ui.HsvPalette.prototype.handleMouseMoveV_=function(a,b){b.preventDefault();var c=this.getDomHelper().getDocumentScroll(),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);this.setHsv(null,null,c)};
goog.ui.HsvPalette.prototype.handleMouseMoveHs_=function(a,b){b.preventDefault();var c=this.getDomHelper().getDocumentScroll(),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;this.setHsv(d,c,null)};goog.ui.HsvPalette.prototype.handleMouseUp=function(a){goog.events.unlistenByKey(this.mouseMoveListener);goog.events.unlistenByKey(this.mouseUpListener)};
goog.ui.HsvPalette.prototype.handleInput=function(a){/^#?[0-9a-f]{6}$/i.test(this.inputElement.value)&&this.setColor(this.inputElement.value)};xiv.ui.ctrl.ColorPaletteController=function(){xiv.ui.ctrl.XtkController.call(this);this.setLabel("Color");this.colorSquare_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_ColorSquare_"+goog.string.createUniqueString(),"class":xiv.ui.ctrl.ColorPaletteController.CSS.COLORSQUARE});goog.dom.append(this.getElement(),this.colorSquare_);goog.events.listen(this.colorSquare_,goog.events.EventType.CLICK,this.showColorPalette_.bind(this));this.colorPalette_=new goog.ui.HsvPalette;this.colorPalette_.render();
goog.events.listen(this.colorPalette_,goog.ui.Component.EventType.ACTION,this.dispatchComponentEvent.bind(this));this.setComponent(this.colorPalette_);goog.dom.classes.add(this.colorPalette_.getElement(),this.constructor.CSS.COLORPALETTE);this.colorPaletteHolder_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+goog.string.createUniqueString(),"class":xiv.ui.ctrl.ColorPaletteController.CSS.COLORPALETTEHOLDER});goog.dom.append(document.body,this.colorPaletteHolder_);goog.dom.append(this.colorPaletteHolder_,
this.colorPalette_.getElement());this.colorPaletteHolder_.style.visibility="hidden";this.closeButton_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_CloseButton_"+goog.string.createUniqueString(),"class":xiv.ui.ctrl.ColorPaletteController.CSS.CLOSEBUTTON});goog.dom.append(this.colorPaletteHolder_,this.closeButton_);goog.events.listen(this.closeButton_,goog.events.EventType.CLICK,this.showColorPalette_.bind(this))};goog.inherits(xiv.ui.ctrl.ColorPaletteController,xiv.ui.ctrl.XtkController);
goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController",xiv.ui.ctrl.ColorPaletteController);xiv.ui.ctrl.ColorPaletteController.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX={COLORSQUARE:"colorsquare",COLORPALETTEHOLDER:"colorpaletteholder",COLORPALETTE:"colorpalette",CLOSEBUTTON:"closebutton"};xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X=20;xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y=20;
xiv.ui.ctrl.ColorPaletteController.prototype.showColorPalette_=function(){this.colorPaletteHolder_.style.visibility="hidden"==this.colorPaletteHolder_.style.visibility?"visible":"hidden";var a=goog.style.getPageOffset(this.colorSquare_),b=goog.style.getSize(this.colorSquare_),c=goog.style.getSize(this.colorPaletteHolder_),b=a.x+b.width+xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X,a=a.y-xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y,d=parseInt(window.innerHeight);parseInt(window.innerWidth);
a+c.height>d&&(a-=a+c.height-d);goog.style.setPosition(this.colorPaletteHolder_,b,a)};
xiv.ui.ctrl.ColorPaletteController.prototype.update=function(){var a=Math.floor(255*this[xiv.ui.ctrl.XtkController.OBJ_KEY].color[0]),b=Math.floor(255*this[xiv.ui.ctrl.XtkController.OBJ_KEY].color[1]),c=Math.floor(255*this[xiv.ui.ctrl.XtkController.OBJ_KEY].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.getComponent().setColor(goog.color.rgbArrayToHex([a,b,c]))};
xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent=function(a){this.colorSquare_.style.backgroundColor=a.target.getColor();this.dispatchEvent({type:xiv.ui.ctrl.XtkController.EventType.CHANGE,color:goog.color.hexToRgb(a.target.getColor()).map(function(a){return a/255})})};
xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal=function(){xiv.ui.ctrl.ColorPaletteController.superClass_.disposeInternal.call(this);goog.events.removeAll(this.closeButton_);goog.dom.removeNode(this.closeButton_);delete this.closeButton_;goog.events.removeAll(this.colorSquare_);goog.dom.removeNode(this.colorSquare_);delete this.colorSquare_;goog.events.removeAll(this.colorPalette_);this.colorPalette_.dispose();delete this.colorPalette_;goog.dom.removeNode(this.colorPaletteHolder_);delete this.colorPaletteHolder_};
goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",xiv.ui.ctrl.ColorPaletteController.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X);goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y);
goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController.prototype.update",xiv.ui.ctrl.ColorPaletteController.prototype.update);goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent);goog.exportSymbol("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal);xiv.ui.ctrl.MeshController3D=function(){xiv.ui.ctrl.MasterController3D.call(this)};goog.inherits(xiv.ui.ctrl.MeshController3D,xiv.ui.ctrl.MasterController3D);goog.exportSymbol("xiv.ui.ctrl.MeshController3D",xiv.ui.ctrl.MeshController3D);xiv.ui.ctrl.MeshController3D.ID_PREFIX="xiv.ui.ctrl.MeshController3D";xiv.ui.ctrl.MeshController3D.CSS_SUFFIX={};
xiv.ui.ctrl.MeshController3D.prototype.add=function(a){xiv.ui.ctrl.MeshController3D.superClass_.add.call(this,a);this.add_visible(a,xiv.ui.ctrl.CheckboxController);this.add_colorPalette(a,xiv.ui.ctrl.ColorPaletteController)};goog.exportSymbol("xiv.ui.ctrl.MeshController3D.ID_PREFIX",xiv.ui.ctrl.MeshController3D.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",xiv.ui.ctrl.MeshController3D.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.MeshController3D.prototype.add",xiv.ui.ctrl.MeshController3D.prototype.add);
goog.exportSymbol("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",xiv.ui.ctrl.MeshController3D.prototype.disposeInternal);xiv.ui.ctrl.AnnotationsController3D=function(){xiv.ui.ctrl.MasterController3D.call(this)};goog.inherits(xiv.ui.ctrl.AnnotationsController3D,xiv.ui.ctrl.MasterController3D);goog.exportSymbol("xiv.ui.ctrl.AnnotationsController3D",xiv.ui.ctrl.AnnotationsController3D);xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX={};
xiv.ui.ctrl.AnnotationsController3D.prototype.add=function(a){xiv.ui.ctrl.AnnotationsController3D.superClass_.add.call(this,a);this.add_visible(a,xiv.ui.ctrl.CheckboxController);this.add_colorPalette(a,xiv.ui.ctrl.ColorPaletteController)};goog.exportSymbol("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX);
goog.exportSymbol("xiv.ui.ctrl.AnnotationsController3D.prototype.add",xiv.ui.ctrl.AnnotationsController3D.prototype.add);xiv.ui.ctrl.VolumeController=function(){xiv.ui.ctrl.MasterController.call(this)};goog.inherits(xiv.ui.ctrl.VolumeController,xiv.ui.ctrl.MasterController);goog.exportSymbol("xiv.ui.ctrl.VolumeController",xiv.ui.ctrl.VolumeController);xiv.ui.ctrl.VolumeController.ID_PREFIX="xiv.ui.ctrl.VolumeController";xiv.ui.ctrl.VolumeController.CSS_SUFFIX={};xiv.ui.ctrl.VolumeController.prototype.add=function(a){xiv.ui.ctrl.VolumeController.superClass_.add.call(this,a);this.add_visibleRadio(a);this.add_labelMapToggle(a)};
xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio=function(a){var b=this.createController(xiv.ui.ctrl.RadioButtonController,"Visible",function(a){});xiv.ui.ctrl.XtkController.setControllerFolders(a,b);this.subControllers.push(b);b.setXObj(a);b.getComponent().checked=a[xiv.vis.RenderEngine.SELECTED_VOL_KEY]||!1};
xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle=function(a){var b=this.createController(xiv.ui.ctrl.CheckboxController,"Show Label Map",function(b){a.labelmap.visible=b.checked});xiv.ui.ctrl.XtkController.setControllerFolders(a,b);this.subControllers.push(b);b.setXObj(a);b.getComponent().setChecked(!1)};xiv.ui.ctrl.VolumeController.prototype.disposeInternal=function(){xiv.ui.ctrl.VolumeController.superClass_.disposeInternal.call(this);window.console.log("need to implement dispose methods for VolumeController")};
goog.exportSymbol("xiv.ui.ctrl.VolumeController.ID_PREFIX",xiv.ui.ctrl.VolumeController.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",xiv.ui.ctrl.VolumeController.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.VolumeController.prototype.add",xiv.ui.ctrl.VolumeController.prototype.add);goog.exportSymbol("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio);
goog.exportSymbol("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle);goog.exportSymbol("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",xiv.ui.ctrl.VolumeController.prototype.disposeInternal);xiv.ui.ctrl.XtkControllerTree=function(){nrg.ui.Component.call(this);var a=this.constructor.getEmptyPropertiesObject();goog.object.forEach(a,function(a,c){this[c]=null})};goog.inherits(xiv.ui.ctrl.XtkControllerTree,nrg.ui.Component);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree",xiv.ui.ctrl.XtkControllerTree);xiv.ui.ctrl.XtkControllerTree.ControlSet=function(a,b,c){this["2D"]=a;this["3D"]=b;this.all=goog.isDefAndNotNull(c)?c:null};goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.ControlSet",xiv.ui.ctrl.XtkControllerTree.ControlSet);
xiv.ui.ctrl.XtkControllerTree.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX={};xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject=function(){return{volumes:null,annotations:null,meshes:null,levels:null}};xiv.ui.ctrl.XtkControllerTree.prototype.Levels=function(){};xiv.ui.ctrl.XtkControllerTree.prototype.Annotations=function(){return this.getControllers([this.AnnotationsController3D_])};xiv.ui.ctrl.XtkControllerTree.prototype.Levels=function(){return this.getControllers([this.LevelsController_])};
xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D=function(){return this.getControllers([this.VolumeController3D_])};
xiv.ui.ctrl.XtkControllerTree.prototype.setControllersAsProperties_=function(){this.volumes=new xiv.ui.ctrl.XtkControllerTree.ControlSet(null,this.getControllers([this.VolumeController3D_]),this.getControllers([this.VolumeController_]));this.annotations=new xiv.ui.ctrl.XtkControllerTree.ControlSet(null,this.getControllers([this.AnnotationsController3D_]));this.meshes=new xiv.ui.ctrl.XtkControllerTree.ControlSet(null,this.getControllers([this.MeshController3D_]));this.levels=new xiv.ui.ctrl.XtkControllerTree.ControlSet(null,
null,this.getControllers([this.LevelsController_]))};xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms=function(a){};xiv.ui.ctrl.XtkControllerTree.prototype.getControllers=function(a){var b=[];goog.array.forEach(goog.isArray(a)?a:[a],function(a){goog.isDefAndNotNull(a)&&(b=goog.array.concat(b,a.getAllControllers()))});return b};
xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers=function(){var a=this.getControllers([this.LevelsController_,this.VolumeController_,this.VolumeController3D_,this.MeshController3D_,this.AnnotationsController3D_,this.FiberController3D_]);goog.array.forEach(a,function(a){a.update()}.bind(this))};
xiv.ui.ctrl.XtkControllerTree.prototype.createControllers=function(a,b){a instanceof X.volume?(goog.isDefAndNotNull(this.VolumeController_)||(this.LevelsController_=new xiv.ui.ctrl.LevelsController,this.VolumeController_=new xiv.ui.ctrl.VolumeController,this.VolumeController3D_=new xiv.ui.ctrl.VolumeController3D),this.LevelsController_.add(a,b),this.VolumeController_.add(a,b),this.VolumeController3D_.add(a,b)):a instanceof X.mesh?(goog.isDefAndNotNull(this.MeshController3D_)||(this.MeshController3D_=
new xiv.ui.ctrl.MeshController3D),this.MeshController3D_.add(a,b)):a instanceof X.sphere&&(goog.isDefAndNotNull(this.AnnotationsController3D_)||(this.AnnotationsController3D_=new xiv.ui.ctrl.AnnotationsController3D),this.AnnotationsController3D_.add(a));this.setControllersAsProperties_()};
xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal=function(){xiv.ui.ctrl.XtkControllerTree.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.LevelsController_)&&(this.LevelsController_.dispose(),delete this.LevelsController_);goog.isDefAndNotNull(this.VolumeController_)&&(this.VolumeController_.dispose(),delete this.VolumeController_);goog.isDefAndNotNull(this.VolumeController2D_)&&(this.VolumeController2D_.dispose(),delete this.VolumeController2D_);goog.isDefAndNotNull(this.VolumeController3D_)&&
(this.VolumeController3D_.dispose(),delete this.VolumeController3D_);goog.isDefAndNotNull(this.MeshController3D_)&&(this.MeshController3D_.dispose(),delete this.MeshController3D_);goog.isDefAndNotNull(this.AnnotationsController3D_)&&(this.AnnotationsController3D_.dispose(),delete this.AnnotationsController3D_);goog.isDefAndNotNull(this.FiberController3D_)&&(this.FiberController3D_.dispose(),delete this.FiberController3D_)};goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.ControlSet",xiv.ui.ctrl.XtkControllerTree.ControlSet);
goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",xiv.ui.ctrl.XtkControllerTree.ID_PREFIX);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",xiv.ui.ctrl.XtkControllerTree.prototype.Levels);
goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",xiv.ui.ctrl.XtkControllerTree.prototype.Annotations);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",xiv.ui.ctrl.XtkControllerTree.prototype.getControllers);
goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",xiv.ui.ctrl.XtkControllerTree.prototype.createControllers);goog.exportSymbol("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal);X.shaders=function(){X.base.call(this);this._classname="shaders";this._vertexshaderSource="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";
a+="uniform bool scalarsReplaceMode;\n";a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";
a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";
a+="  fragmentTexturePos = vertexTexturePos;\n";a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";
a+="            vec3 zeroMinColor;\n";a+="            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this._vertexshaderSource=a+="}\n";this._fragmentshaderSource="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";
a+="uniform float volumeLowerThreshold;\n";a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";
a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+=
"     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";
a+="           } else {\n";a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";
a+="     };\n";a+="   };\n";a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this._fragmentshaderSource=
a+="}\n"};goog.inherits(X.shaders,X.base);X.shaders.attributes={VERTEXPOSITION:"vertexPosition",VERTEXNORMAL:"vertexNormal",VERTEXCOLOR:"vertexColor",VERTEXTEXTUREPOS:"vertexTexturePos",VERTEXSCALAR:"vertexScalar"};
X.shaders.uniforms={VIEW:"view",PERSPECTIVE:"perspective",CENTER:"center",OBJECTTRANSFORM:"objectTransform",USEOBJECTCOLOR:"useObjectColor",OBJECTCOLOR:"objectColor",USESCALARS:"useScalars",SCALARSREPLACEMODE:"scalarsReplaceMode",SCALARSMIN:"scalarsMin",SCALARSMAX:"scalarsMax",SCALARSMINCOLOR:"scalarsMinColor",SCALARSMAXCOLOR:"scalarsMaxColor",SCALARSMINTHRESHOLD:"scalarsMinThreshold",SCALARSMAXTHRESHOLD:"scalarsMaxThreshold",SCALARSINTERPOLATION:"scalarsInterpolation",POINTSIZE:"pointSize",OBJECTOPACITY:"objectOpacity",
NORMAL:"normal",USEPICKING:"usePicking",USETEXTURE:"useTexture",USELABELMAPTEXTURE:"useLabelMapTexture",LABELMAPOPACITY:"labelmapOpacity",LABELMAPCOLOR:"labelmapColor",TEXTURESAMPLER:"textureSampler",TEXTURESAMPLER2:"textureSampler2",VOLUMELOWERTHRESHOLD:"volumeLowerThreshold",VOLUMEUPPERTHRESHOLD:"volumeUpperThreshold",VOLUMESCALARMIN:"volumeScalarMin",VOLUMESCALARMAX:"volumeScalarMax",VOLUMESCALARMINCOLOR:"volumeScalarMinColor",VOLUMESCALARMAXCOLOR:"volumeScalarMaxColor",VOLUMEWINDOWLOW:"volumeWindowLow",
VOLUMEWINDOWHIGH:"volumeWindowHigh",VOLUMETEXTURE:"volumeTexture"};X.shaders.prototype.vertex=function(){return this._vertexshaderSource};X.shaders.prototype.fragment=function(){return this._fragmentshaderSource};
X.shaders.prototype.validate=function(){var a=Object.keys(X.shaders.attributes),b=Object.keys(X.shaders.uniforms);if(!a.every(function(a){a=X.shaders.attributes[a];return-1!=this._vertexshaderSource.search(a)||-1!=this._fragmentshaderSource.search(a)}.bind(this)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=X.shaders.uniforms[a];return-1!=this._vertexshaderSource.search(a)||-1!=this._fragmentshaderSource.search(a)}.bind(this)))throw Error("Could not find all uniforms in the shader sources.");
return!0};X.buffer=function(a,b,c){if(!goog.isDefAndNotNull(a))throw Error("Invalid GL Buffer.");if(!goog.isDefAndNotNull(b))throw Error("Invalid number of items.");if(!goog.isDefAndNotNull(c))throw Error("Invalid item size.");X.base.call(this);this._classname="buffer";this._glBuffer=a;this._itemCount=b;this._itemSize=c};goog.inherits(X.buffer,X.base);goog.positioning.ViewportPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ViewportPosition,goog.positioning.AbstractPosition);goog.positioning.ViewportPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(goog.style.getClientViewportElement(a),goog.positioning.Corner.TOP_LEFT,a,b,this.coordinate,c,null,d)};goog.positioning.ClientPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ClientPosition,goog.positioning.AbstractPosition);
goog.positioning.ClientPosition.prototype.reposition=function(a,b,c,d){goog.asserts.assert(a);var e=goog.style.getViewportPageOffset(goog.dom.getOwnerDocument(a)),f=this.coordinate.x+e.x,e=this.coordinate.y+e.y,g=goog.positioning.getOffsetParentPageOffset(a),f=f-g.x,e=e-g.y;goog.positioning.positionAtCoordinate(new goog.math.Coordinate(f,e),a,b,c,null,null,d)};goog.positioning.ViewportClientPosition=function(a,b){goog.positioning.ClientPosition.call(this,a,b)};goog.inherits(goog.positioning.ViewportClientPosition,goog.positioning.ClientPosition);goog.positioning.ViewportClientPosition.prototype.lastResortOverflow_=0;goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow=function(a){this.lastResortOverflow_=a};
goog.positioning.ViewportClientPosition.prototype.reposition=function(a,b,c,d){var e=goog.style.getClientViewportElement(a),e=goog.style.getVisibleRectForElement(e),f=goog.dom.getDomHelper(a).getDocumentScrollElement(),f=new goog.math.Coordinate(this.coordinate.x+f.scrollLeft,this.coordinate.y+f.scrollTop),g=goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,h=b,k=goog.positioning.positionAtCoordinate(f,a,h,c,e,g,d);if(0!=(k&goog.positioning.OverflowStatus.FAILED)){if(k&goog.positioning.OverflowStatus.FAILED_LEFT||
k&goog.positioning.OverflowStatus.FAILED_RIGHT)h=goog.positioning.flipCornerHorizontal(h);if(k&goog.positioning.OverflowStatus.FAILED_TOP||k&goog.positioning.OverflowStatus.FAILED_BOTTOM)h=goog.positioning.flipCornerVertical(h);k=goog.positioning.positionAtCoordinate(f,a,h,c,e,g,d);0!=(k&goog.positioning.OverflowStatus.FAILED)&&goog.positioning.positionAtCoordinate(f,a,b,c,e,this.lastResortOverflow_,d)}};goog.positioning.AbsolutePosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.AbsolutePosition,goog.positioning.AbstractPosition);goog.positioning.AbsolutePosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtCoordinate(this.coordinate,a,b,c,null,null,d)};goog.ui.Popup=function(a,b){this.popupCorner_=goog.positioning.Corner.TOP_START;this.position_=b||void 0;goog.ui.PopupBase.call(this,a)};goog.inherits(goog.ui.Popup,goog.ui.PopupBase);goog.ui.Popup.Corner=goog.positioning.Corner;goog.ui.Popup.Overflow=goog.positioning.Overflow;goog.ui.Popup.prototype.getPinnedCorner=function(){return this.popupCorner_};goog.ui.Popup.prototype.setPinnedCorner=function(a){this.popupCorner_=a;this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.getPosition=function(){return this.position_||null};goog.ui.Popup.prototype.setPosition=function(a){this.position_=a||void 0;this.isVisible()&&this.reposition()};goog.ui.Popup.prototype.getMargin=function(){return this.margin_||null};goog.ui.Popup.prototype.setMargin=function(a,b,c,d){this.margin_=null==a||a instanceof goog.math.Box?a:new goog.math.Box(a,b,c,d);this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.reposition=function(){if(this.position_){var a=!this.isVisible()&&this.getType()!=goog.ui.PopupBase.Type.MOVE_OFFSCREEN,b=this.getElement();a&&(b.style.visibility="hidden",goog.style.setElementShown(b,!0));this.position_.reposition(b,this.popupCorner_,this.margin_);a&&goog.style.setElementShown(b,!1)}};goog.ui.Popup.AnchoredPosition=goog.positioning.AnchoredPosition;goog.ui.Popup.AnchoredViewPortPosition=goog.positioning.AnchoredViewportPosition;
goog.ui.Popup.AbsolutePosition=goog.positioning.AbsolutePosition;goog.ui.Popup.ViewPortPosition=goog.positioning.ViewportPosition;goog.ui.Popup.ClientPosition=goog.positioning.ClientPosition;goog.ui.Popup.ViewPortClientPosition=goog.positioning.ViewportClientPosition;goog.ui.Tooltip=function(a,b,c){this.dom_=c||(a?goog.dom.getDomHelper(goog.dom.getElement(a)):goog.dom.getDomHelper());goog.ui.Popup.call(this,this.dom_.createDom("div",{style:"position:absolute;display:none;"}));this.cursorPosition=new goog.math.Coordinate(1,1);this.elements_=new goog.structs.Set;a&&this.attach(a);null!=b&&this.setText(b)};goog.inherits(goog.ui.Tooltip,goog.ui.Popup);goog.ui.Tooltip.activeInstances_=[];goog.ui.Tooltip.prototype.activeEl_=null;
goog.ui.Tooltip.prototype.className="goog-tooltip";goog.ui.Tooltip.prototype.showDelayMs_=500;goog.ui.Tooltip.prototype.hideDelayMs_=0;goog.ui.Tooltip.State={INACTIVE:0,WAITING_TO_SHOW:1,SHOWING:2,WAITING_TO_HIDE:3,UPDATING:4};goog.ui.Tooltip.Activation={CURSOR:0,FOCUS:1};goog.ui.Tooltip.prototype.getDomHelper=function(){return this.dom_};goog.ui.Tooltip.prototype.getChildTooltip=function(){return this.childTooltip_};
goog.ui.Tooltip.prototype.attach=function(a){a=goog.dom.getElement(a);this.elements_.add(a);goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.listen(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.listen(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.detach=function(a){if(a)a=goog.dom.getElement(a),this.detachElement_(a),this.elements_.remove(a);else{for(var b=this.elements_.getValues(),c=0;a=b[c];c++)this.detachElement_(a);this.elements_.clear()}};
goog.ui.Tooltip.prototype.detachElement_=function(a){goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.unlisten(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.unlisten(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.setShowDelayMs=function(a){this.showDelayMs_=a};goog.ui.Tooltip.prototype.getShowDelayMs=function(){return this.showDelayMs_};goog.ui.Tooltip.prototype.setHideDelayMs=function(a){this.hideDelayMs_=a};goog.ui.Tooltip.prototype.getHideDelayMs=function(){return this.hideDelayMs_};goog.ui.Tooltip.prototype.setText=function(a){goog.dom.setTextContent(this.getElement(),a)};goog.ui.Tooltip.prototype.setHtml=function(a){this.setSafeHtml(goog.html.legacyconversions.safeHtmlFromString(a))};
goog.ui.Tooltip.prototype.setSafeHtml=function(a){var b=this.getElement();b&&goog.dom.safe.setInnerHtml(b,a)};goog.ui.Tooltip.prototype.setElement=function(a){var b=this.getElement();b&&goog.dom.removeNode(b);goog.ui.Tooltip.superClass_.setElement.call(this,a);a&&(b=this.dom_.getDocument().body,b.insertBefore(a,b.lastChild))};goog.ui.Tooltip.prototype.getText=function(){return goog.dom.getTextContent(this.getElement())};goog.ui.Tooltip.prototype.getHtml=function(){return this.getElement().innerHTML};
goog.ui.Tooltip.prototype.getState=function(){return this.showTimer?this.isVisible()?goog.ui.Tooltip.State.UPDATING:goog.ui.Tooltip.State.WAITING_TO_SHOW:this.hideTimer?goog.ui.Tooltip.State.WAITING_TO_HIDE:this.isVisible()?goog.ui.Tooltip.State.SHOWING:goog.ui.Tooltip.State.INACTIVE};goog.ui.Tooltip.prototype.setRequireInteraction=function(a){this.requireInteraction_=a};
goog.ui.Tooltip.prototype.isCoordinateInTooltip=function(a){if(!this.isVisible())return!1;var b=goog.style.getPageOffset(this.getElement()),c=goog.style.getSize(this.getElement());return b.x<=a.x&&a.x<=b.x+c.width&&b.y<=a.y&&a.y<=b.y+c.height};
goog.ui.Tooltip.prototype.onBeforeShow=function(){if(!goog.ui.PopupBase.prototype.onBeforeShow.call(this))return!1;if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)||a.setVisible(!1);goog.array.insert(goog.ui.Tooltip.activeInstances_,this);a=this.getElement();a.className=this.className;this.clearHideTimer();goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,
this.handleTooltipMouseOut,!1,this);this.clearShowTimer();return!0};
goog.ui.Tooltip.prototype.onHide_=function(){goog.array.remove(goog.ui.Tooltip.activeInstances_,this);for(var a=this.getElement(),b,c=0;b=goog.ui.Tooltip.activeInstances_[c];c++)b.anchor&&goog.dom.contains(a,b.anchor)&&b.setVisible(!1);this.parentTooltip_&&this.parentTooltip_.startHideTimer();goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this);this.anchor=void 0;this.getState()==
goog.ui.Tooltip.State.INACTIVE&&(this.seenInteraction_=!1);goog.ui.PopupBase.prototype.onHide_.call(this)};goog.ui.Tooltip.prototype.maybeShow=function(a,b){this.anchor==a&&this.elements_.contains(this.anchor)&&(this.seenInteraction_||!this.requireInteraction_?(this.setVisible(!1),this.isVisible()||this.positionAndShow_(a,b)):this.anchor=void 0);this.showTimer=void 0};goog.ui.Tooltip.prototype.getElements=function(){return this.elements_};goog.ui.Tooltip.prototype.getActiveElement=function(){return this.activeEl_};
goog.ui.Tooltip.prototype.setActiveElement=function(a){this.activeEl_=a};goog.ui.Tooltip.prototype.showForElement=function(a,b){this.attach(a);this.activeEl_=a;this.positionAndShow_(a,b)};goog.ui.Tooltip.prototype.positionAndShow_=function(a,b){this.anchor=a;this.setPosition(b||this.getPositioningStrategy(goog.ui.Tooltip.Activation.CURSOR));this.setVisible(!0)};
goog.ui.Tooltip.prototype.maybeHide=function(a){this.hideTimer=void 0;a==this.anchor&&(null!=this.activeEl_&&(this.activeEl_==this.getElement()||this.elements_.contains(this.activeEl_))||this.hasActiveChild()||this.setVisible(!1))};goog.ui.Tooltip.prototype.hasActiveChild=function(){return!(!this.childTooltip_||!this.childTooltip_.activeEl_)};
goog.ui.Tooltip.prototype.saveCursorPosition_=function(a){var b=this.dom_.getDocumentScroll();this.cursorPosition.x=a.clientX+b.x;this.cursorPosition.y=a.clientY+b.y};goog.ui.Tooltip.prototype.handleMouseOver=function(a){var b=this.getAnchorFromElement(a.target);this.activeEl_=b;this.clearHideTimer();b!=this.anchor&&(this.anchor=b,this.startShowTimer(b),this.checkForParentTooltip_(),this.saveCursorPosition_(a))};
goog.ui.Tooltip.prototype.getAnchorFromElement=function(a){try{for(;a&&!this.elements_.contains(a);)a=a.parentNode;return a}catch(b){return null}};goog.ui.Tooltip.prototype.handleMouseMove=function(a){this.saveCursorPosition_(a);this.seenInteraction_=!0};
goog.ui.Tooltip.prototype.handleFocus=function(a){this.activeEl_=a=this.getAnchorFromElement(a.target);this.seenInteraction_=!0;if(this.anchor!=a){this.anchor=a;var b=this.getPositioningStrategy(goog.ui.Tooltip.Activation.FOCUS);this.clearHideTimer();this.startShowTimer(a,b);this.checkForParentTooltip_()}};goog.ui.Tooltip.prototype.getPositioningStrategy=function(a){return a==goog.ui.Tooltip.Activation.CURSOR?(a=this.cursorPosition.clone(),new goog.ui.Tooltip.CursorTooltipPosition(a)):new goog.ui.Tooltip.ElementTooltipPosition(this.activeEl_)};
goog.ui.Tooltip.prototype.checkForParentTooltip_=function(){if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)&&(a.childTooltip_=this,this.parentTooltip_=a)};
goog.ui.Tooltip.prototype.handleMouseOutAndBlur=function(a){var b=this.getAnchorFromElement(a.target),c=this.getAnchorFromElement(a.relatedTarget);b!=c&&(b==this.activeEl_&&(this.activeEl_=null),this.clearShowTimer(),this.seenInteraction_=!1,!this.isVisible()||a.relatedTarget&&goog.dom.contains(this.getElement(),a.relatedTarget)?this.anchor=void 0:this.startHideTimer())};
goog.ui.Tooltip.prototype.handleTooltipMouseOver=function(a){a=this.getElement();this.activeEl_!=a&&(this.clearHideTimer(),this.activeEl_=a)};goog.ui.Tooltip.prototype.handleTooltipMouseOut=function(a){var b=this.getElement();this.activeEl_!=b||a.relatedTarget&&goog.dom.contains(b,a.relatedTarget)||(this.activeEl_=null,this.startHideTimer())};goog.ui.Tooltip.prototype.startShowTimer=function(a,b){this.showTimer||(this.showTimer=goog.Timer.callOnce(goog.bind(this.maybeShow,this,a,b),this.showDelayMs_))};
goog.ui.Tooltip.prototype.clearShowTimer=function(){this.showTimer&&(goog.Timer.clear(this.showTimer),this.showTimer=void 0)};goog.ui.Tooltip.prototype.startHideTimer=function(){this.getState()==goog.ui.Tooltip.State.SHOWING&&(this.hideTimer=goog.Timer.callOnce(goog.bind(this.maybeHide,this,this.anchor),this.getHideDelayMs()))};goog.ui.Tooltip.prototype.clearHideTimer=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=void 0)};
goog.ui.Tooltip.prototype.disposeInternal=function(){this.setVisible(!1);this.clearShowTimer();this.detach();this.getElement()&&goog.dom.removeNode(this.getElement());this.activeEl_=null;delete this.dom_;goog.ui.Tooltip.superClass_.disposeInternal.call(this)};goog.ui.Tooltip.CursorTooltipPosition=function(a,b){goog.positioning.ViewportPosition.call(this,a,b)};goog.inherits(goog.ui.Tooltip.CursorTooltipPosition,goog.positioning.ViewportPosition);
goog.ui.Tooltip.CursorTooltipPosition.prototype.reposition=function(a,b,c){b=goog.style.getClientViewportElement(a);b=goog.style.getVisibleRectForElement(b);c=c?new goog.math.Box(c.top+10,c.right,c.bottom,c.left+10):new goog.math.Box(10,0,0,10);goog.positioning.positionAtCoordinate(this.coordinate,a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtCoordinate(this.coordinate,
a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};goog.ui.Tooltip.ElementTooltipPosition=function(a){goog.positioning.AnchoredPosition.call(this,a,goog.positioning.Corner.BOTTOM_RIGHT)};goog.inherits(goog.ui.Tooltip.ElementTooltipPosition,goog.positioning.AnchoredPosition);
goog.ui.Tooltip.ElementTooltipPosition.prototype.reposition=function(a,b,c){var d=new goog.math.Coordinate(10,0);goog.positioning.positionAtAnchor(this.element,this.corner,a,b,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtAnchor(this.element,goog.positioning.Corner.TOP_RIGHT,a,goog.positioning.Corner.BOTTOM_LEFT,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};X.caption=function(a,b,c,d){if(!goog.isDefAndNotNull(a))throw Error("No valid parent element.");if(!goog.isNumber(b)||!goog.isNumber(c))throw Error("Invalid coordinates.");if(!(goog.isDefAndNotNull(d)&&d instanceof X.interactor))throw Error("Invalid interactor.");goog.ui.Tooltip.call(this);this._classname="caption";this._parent=a;this._x=b;this._y=c;this._interactor=d;this._style=null;this._css=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+=
"  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this._css=[a];goog.events.listenOnce(d,X.event.events.HOVER_END,this.kill.bind(this));this.init_()};goog.inherits(X.caption,goog.ui.Tooltip);
X.caption.prototype.init_=function(){var a=goog.style.getComputedStyle(this._parent,"position");if("static"==a||""==a)this._parent.style.position="relative";var a=goog.dom.getDocument().getElementsByTagName("head")[0],b=goog.dom.createDom("style");b.type="text/css";b.media="screen";var c=goog.dom.createTextNode(this._css[0]);goog.dom.appendChild(a,b);goog.dom.appendChild(b,c);this._style=b;this.setPosition(new goog.positioning.ViewportPosition(this._x,this._y));this.setVisible(!0);this.attach(this._parent);
this.getElement().classList.add("x-tooltip")};X.caption.prototype.kill=function(){this.setVisible(!1);this._style&&goog.dom.removeNode(this._style);this.getElement()&&goog.dom.removeNode(this.getElement());this._style=null};X.renderer3D=function(){X.renderer.call(this);this._classname="renderer3D";this._maxZ=this._minZ=this._maxY=this._minY=this._maxX=this._minX=this._shaderProgram=this._shaders=null;this._center=[0,0,0];this._bgColor=[0,0,0];this._pickFrameBuffer=null;this._attributePointers=new goog.structs.Map;this._uniformLocations=new goog.structs.Map;this._vertexBuffers=new goog.structs.Map;this._normalBuffers=new goog.structs.Map;this._colorBuffers=new goog.structs.Map;this._scalarBuffers=new goog.structs.Map;
this._texturePositionBuffers=new goog.structs.Map;this._textures=new goog.structs.Map;this._config={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}};goog.inherits(X.renderer3D,X.renderer);X.renderer3D.prototype.__defineGetter__("config",function(){return this._config});X.renderer3D.prototype.resetBoundingBox=function(){this._maxZ=this._minZ=this._maxY=this._minY=this._maxX=this._minX=null;this._center=[0,0,0]};
X.renderer3D.prototype.onHover_=function(a){X.renderer3D.superClass_.onHover_.call(this,a);this.showCaption_(a._x,a._y)};
X.renderer3D.prototype.init=function(){X.renderer3D.superClass_.init.call(this,"experimental-webgl");try{if(this._context.viewport(0,0,this._width,this._height),this._context.clearColor(this._bgColor[0],this._bgColor[1],this._bgColor[2],0),this._context.enable(this._context.BLEND),this._context.blendEquation(this._context.FUNC_ADD),this._context.blendFunc(this._context.SRC_ALPHA,this._context.ONE_MINUS_SRC_ALPHA),this._context.enable(this._context.DEPTH_TEST),this._context.depthFunc(this._context.LEQUAL),
this._context.clear(this._context.COLOR_BUFFER_BIT|this._context.DEPTH_BUFFER_BIT),this._config.PICKING_ENABLED){var a=this._context.createFramebuffer(),b=this._context.createRenderbuffer(),c=this._context.createTexture();this._context.bindTexture(this._context.TEXTURE_2D,c);this._context.texImage2D(this._context.TEXTURE_2D,0,this._context.RGB,this._width,this._height,0,this._context.RGB,this._context.UNSIGNED_BYTE,null);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_S,
this._context.CLAMP_TO_EDGE);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_T,this._context.CLAMP_TO_EDGE);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.NEAREST);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.NEAREST);this._context.bindFramebuffer(this._context.FRAMEBUFFER,a);this._context.bindRenderbuffer(this._context.RENDERBUFFER,b);this._context.renderbufferStorage(this._context.RENDERBUFFER,
this._context.DEPTH_COMPONENT16,this._width,this._height);this._context.bindRenderbuffer(this._context.RENDERBUFFER,null);this._context.framebufferTexture2D(this._context.FRAMEBUFFER,this._context.COLOR_ATTACHMENT0,this._context.TEXTURE_2D,c,0);this._context.framebufferRenderbuffer(this._context.FRAMEBUFFER,this._context.DEPTH_ATTACHMENT,this._context.RENDERBUFFER,b);this._context.bindFramebuffer(this._context.FRAMEBUFFER,null);this._pickFrameBuffer=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new X.shaders;this.addShaders(a)};
X.renderer3D.prototype.addShaders=function(a){if(!goog.isDefAndNotNull(this._canvas)||!goog.isDefAndNotNull(this._context)||!goog.isDefAndNotNull(this._camera))throw Error("Renderer was not initialized properly.");if(!(goog.isDefAndNotNull(a)&&a instanceof X.shaders))throw Error("Could not add shaders.");a.validate();var b=this._context.createShader(this._context.FRAGMENT_SHADER),c=this._context.createShader(this._context.VERTEX_SHADER);this._context.shaderSource(b,a.fragment());this._context.shaderSource(c,
a.vertex());this._context.compileShader(b);this._context.compileShader(c);if(!this._context.getShaderParameter(b,this._context.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+this._context.getShaderInfoLog(b));if(!this._context.getShaderParameter(c,this._context.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+this._context.getShaderInfoLog(c));var d=this._context.createProgram();this._context.attachShader(d,c);this._context.attachShader(d,b);this._context.linkProgram(d);
if(!this._context.getProgramParameter(d,this._context.LINK_STATUS))throw Error("Could not create shader program!\n"+this._context.getShaderInfoLog(b)+"\n"+this._context.getShaderInfoLog(c)+"\n"+this._context.getProgramInfoLog(d));this._context.useProgram(d);this._shaderProgram=d;Object.keys(X.shaders.attributes).forEach(function(a){a=X.shaders.attributes[a];this._attributePointers.set(a,this._context.getAttribLocation(this._shaderProgram,a));this._context.enableVertexAttribArray(this._attributePointers.get(a))}.bind(this));
Object.keys(X.shaders.uniforms).forEach(function(a){a=X.shaders.uniforms[a];this._uniformLocations.set(a,this._context.getUniformLocation(this._shaderProgram,a))}.bind(this));this._shaders=a};
X.renderer3D.prototype.update_=function(a){X.renderer3D.superClass_.update_.call(this,a);var b=!1;if(goog.isDefAndNotNull(a)){this.get(a._id)&&(b=!0);var c=a._id,d=a._points,e=a._normals,f=a._colors,g=a._texture,h=a._file,k=a._transform,l=a._colortable,m=a._labelmap,n=a._scalars;if(goog.isDefAndNotNull(m)&&goog.isDefAndNotNull(m._file)&&m._file._dirty)this.update_(m);else if(goog.isDefAndNotNull(m)&&m._dirty&&this.update_(m),goog.isDefAndNotNull(l)&&goog.isDefAndNotNull(l._file)&&l._file._dirty)this._loader.load(l,
a);else if(goog.isDefAndNotNull(g)&&goog.isDefAndNotNull(g._file)&&g._file._dirty)this._loader.load(g,a);else{if(goog.isDefAndNotNull(h)&&goog.isArray(h))if(goog.isDefAndNotNull(a.MRI)){if(a.MRI.loaded_files!=h.length||!a._dirty)return}else{b=0;c=h.length;for(b=0;b<c;b++)this._loader.load(h[b],a);return}else{if(goog.isDefAndNotNull(h)&&h._dirty){this._loader.load(a,a);return}if(goog.isDefAndNotNull(n)&&goog.isDefAndNotNull(n._file)&&n._file._dirty){this._loader.load(n,a);return}}if(0<a._children.length)for(h=
a._children,l=h.length,m=m=0;m<l;m++)this.update_(h[m]);if(d){for(h=0;this._locked;)h++,window.console.log("Possible thread lock avoided: "+h);this._locked=!0;l=a instanceof X.slice&&a._volume instanceof X.labelmap;b&&goog.isDefAndNotNull(g)&&g._dirty&&(h=this._texturePositionBuffers.get(c),goog.isDefAndNotNull(h)&&this._context.isBuffer(h._glBuffer)&&this._context.deleteBuffer(h._glBuffer));h=null;if(goog.isDefAndNotNull(g))if(!b||g._dirty){h=a._textureCoordinateMap;if(!goog.isDefAndNotNull(h))throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
m=!1;g._rawData&&(m=!0);this._context.pixelStorei(this._context.UNPACK_FLIP_Y_WEBGL,m);m=this._context.createTexture();m.image=g._image;this._textures.set(g._id,m);this._context.bindTexture(this._context.TEXTURE_2D,m);g._rawData?(m=this._context.RGBA,g._grayscale&&(m=this._context.LUMINANCE,this._context.pixelStorei(this._context.UNPACK_ALIGNMENT,1)),this._context.texImage2D(this._context.TEXTURE_2D,0,m,g._rawDataWidth,g._rawDataHeight,0,m,this._context.UNSIGNED_BYTE,g._rawData)):this._context.texImage2D(this._context.TEXTURE_2D,
0,this._context.RGBA,this._context.RGBA,this._context.UNSIGNED_BYTE,m.image);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_S,this._context.CLAMP_TO_EDGE);this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_T,this._context.CLAMP_TO_EDGE);l?(this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.NEAREST),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.NEAREST)):
(this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.LINEAR),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.LINEAR));this._context.bindTexture(this._context.TEXTURE_2D,null);m=this._context.createBuffer();this._context.bindBuffer(this._context.ARRAY_BUFFER,m);this._context.bufferData(this._context.ARRAY_BUFFER,new Float32Array(h),this._context.STATIC_DRAW);h=new X.buffer(m,h.length,2);this._texturePositionBuffers.set(c,
h);g._dirty=!1}else h=this._texturePositionBuffers.get(c);this._loader.addProgress(.1);if(l)this._locked=!1,X.TIMERSTOP(this._classname+".update"),this._loader.addProgress(.9);else{if(!b||d._dirty||k._dirty){l=k._matrix;g=X.matrix.multiplyByVector(l,d._minA,d._minB,d._minC);l=X.matrix.multiplyByVector(l,d._maxA,d._maxB,d._maxC);if(goog.isNull(this._minX)||g.x<this._minX)this._minX=g.x;if(goog.isNull(this._maxX)||l.x>this._maxX)this._maxX=l.x;if(goog.isNull(this._minY)||g.y<this._minY)this._minY=g.y;
if(goog.isNull(this._maxY)||l.y>this._maxY)this._maxY=l.y;if(goog.isNull(this._minZ)||g.z<this._minZ)this._minZ=g.z;if(goog.isNull(this._maxZ)||l.z>this._maxZ)this._maxZ=l.z;this._center=[(this._minX+this._maxX)/2,(this._minY+this._maxY)/2,(this._minZ+this._maxZ)/2];k._dirty=!1}b&&d._dirty&&(k=this._vertexBuffers.get(c),goog.isDefAndNotNull(k)&&this._context.isBuffer(k._glBuffer)&&this._context.deleteBuffer(k._glBuffer));k=null;!b||d._dirty?(k=this._context.createBuffer(),d.resize(),this._context.bindBuffer(this._context.ARRAY_BUFFER,
k),this._context.bufferData(this._context.ARRAY_BUFFER,d._triplets,this._context.STATIC_DRAW),k=new X.buffer(k,d.count,3),d._dirty=!1):k=this._vertexBuffers.get(c);this._loader.addProgress(.3);b&&e._dirty&&(g=this._vertexBuffers.get(c),goog.isDefAndNotNull(g)&&this._context.isBuffer(g._glBuffer)&&this._context.deleteBuffer(g._glBuffer));g=null;!b||e._dirty?(g=this._context.createBuffer(),e.resize(),this._context.bindBuffer(this._context.ARRAY_BUFFER,g),this._context.bufferData(this._context.ARRAY_BUFFER,
e._triplets,this._context.STATIC_DRAW),g=new X.buffer(g,e.count,3),e._dirty=!1):g=this._normalBuffers.get(c);this._loader.addProgress(.3);b&&f&&f._dirty&&(e=this._colorBuffers.get(c),goog.isDefAndNotNull(e)&&this._context.isBuffer(e._glBuffer)&&this._context.deleteBuffer(e._glBuffer));e=null;if(f)if(!b||f._dirty){if(f.length!=d.length)throw Error("Mismatch between points and point colors.");e=this._context.createBuffer();f.resize();this._context.bindBuffer(this._context.ARRAY_BUFFER,e);this._context.bufferData(this._context.ARRAY_BUFFER,
f._triplets,this._context.STATIC_DRAW);e=new X.buffer(e,f.count,3);f._dirty=!1}else e=this._colorBuffers.get(c);this._loader.addProgress(.2);b&&n&&n._dirty&&(f=this._scalarBuffers.get(c),goog.isDefAndNotNull(f)&&this._context.isBuffer(f._glBuffer)&&this._context.deleteBuffer(f._glBuffer));f=null;if(n)if(f=n._glArray,!b||n._dirty){if(f.length!=d.length)throw Error("Mismatch between points and scalars.");d=this._context.createBuffer();this._context.bindBuffer(this._context.ARRAY_BUFFER,d);this._context.bufferData(this._context.ARRAY_BUFFER,
f,this._context.STATIC_DRAW);f=new X.buffer(d,f.length,3);n._dirty=!1}else f=this._scalarBuffers.get(c);this._loader.addProgress(.1);b||this._objects.add(a);this._vertexBuffers.set(c,k);this._normalBuffers.set(c,g);this._colorBuffers.set(c,e);this._texturePositionBuffers.set(c,h);this._scalarBuffers.set(c,f);this._locked=a._dirty=!1}}else a._dirty=!1}}};
X.renderer3D.prototype.showCaption_=function(a,b){var c=this.pick(a,b);if(c=this.get(c))if(c=c._caption){var d=goog.style.getClientPosition(this._container);(new X.caption(this._container,d.x+a+10,d.y+b+10,this._interactor)).setHtml(c)}};
X.renderer3D.prototype.orientVolume_=function(a){var b=X.matrix.multiplyByVector(this._camera._view,a._RASCenter[0]+a._childrenInfo[0]._sliceNormal[0],a._RASCenter[1]+a._childrenInfo[0]._sliceNormal[1],a._RASCenter[2]+a._childrenInfo[0]._sliceNormal[2]),c=X.matrix.multiplyByVector(this._camera._view,a._RASCenter[0]-a._childrenInfo[0]._sliceNormal[0],a._RASCenter[1]-a._childrenInfo[0]._sliceNormal[1],a._RASCenter[2]-a._childrenInfo[0]._sliceNormal[2]),d=Math.abs(b.z-c.z),b=X.matrix.multiplyByVector(this._camera._view,
a._RASCenter[0]+a._childrenInfo[1]._sliceNormal[0],a._RASCenter[1]+a._childrenInfo[1]._sliceNormal[1],a._RASCenter[2]+a._childrenInfo[1]._sliceNormal[2]),c=X.matrix.multiplyByVector(this._camera._view,a._RASCenter[0]-a._childrenInfo[1]._sliceNormal[0],a._RASCenter[1]-a._childrenInfo[1]._sliceNormal[1],a._RASCenter[2]+-a._childrenInfo[1]._sliceNormal[2]),e=Math.abs(b.z-c.z),b=X.matrix.multiplyByVector(this._camera._view,a._RASCenter[0]+a._childrenInfo[2]._sliceNormal[0],a._RASCenter[1]+a._childrenInfo[2]._sliceNormal[1],
a._RASCenter[2]+a._childrenInfo[2]._sliceNormal[2]),c=X.matrix.multiplyByVector(this._camera._view,a._RASCenter[0]-a._childrenInfo[2]._sliceNormal[0],a._RASCenter[1]-a._childrenInfo[2]._sliceNormal[1],a._RASCenter[2]-a._childrenInfo[2]._sliceNormal[2]),b=Math.abs(b.z-c.z),b=Math.max(d,e,b);b==d?a.volumeRendering_(0):b==e?a.volumeRendering_(1):a.volumeRendering_(2)};
X.renderer3D.prototype.distanceToEye_=function(a){var b=a._points._centroid;a=X.matrix.multiplyByVector(a._transform._matrix,b[0],b[1],b[2]);a=X.matrix.multiplyByVector(this._camera._view,a.x,a.y,a.z);a=X.vector.distance(this._camera._position,a);return Math.round(1E3*a)/1E3};
X.renderer3D.prototype.order_=function(){var a=!1,b=this._topLevelObjects,c;c=b.length-1;do{var d=b[c];if(d instanceof X.volume&&d._volumeRendering&&-1!=d._volumeRenderingDirection){var a=d._children[d._volumeRenderingDirection]._children,e=d._volumeRenderingDirection,f=X.matrix.multiplyByVector(this._camera._view,d._RASCenter[0]+d._childrenInfo[e]._sliceDirection[0],d._RASCenter[1]+d._childrenInfo[e]._sliceDirection[1],d._RASCenter[2]+d._childrenInfo[e]._sliceDirection[2]),g=X.matrix.multiplyByVector(this._camera._view,
d._RASCenter[0]-d._childrenInfo[e]._sliceDirection[0],d._RASCenter[1]-d._childrenInfo[e]._sliceDirection[1],d._RASCenter[2]-d._childrenInfo[e]._sliceDirection[2]),f=f.z-g.z,g=Math.max(d._IJKToRAS[d._volumeRenderingDirection],Math.max(d._IJKToRAS[d._volumeRenderingDirection+4],d._IJKToRAS[d._volumeRenderingDirection+8])),h=Math.min(d._IJKToRAS[d._volumeRenderingDirection],Math.min(d._IJKToRAS[d._volumeRenderingDirection+4],d._IJKToRAS[d._volumeRenderingDirection+8]));if(0>f*(g+h))for(f=f=0;f<d._range[e]-
1;f++)a[f]&&(a[f]._opacity=d._opacity,a[f]._distance=d._childrenInfo[e]._sliceSpacing*f);else for(f=d._range[e]-1;0<=f;f--)a[f]&&(a[f]._opacity=d._opacity,a[f]._distance=(d._range[e]-1)*d._childrenInfo[e]._sliceSpacing-d._childrenInfo[e]._sliceSpacing*f);a=!0}}while(c--);b=this._objects.values();c=b.length-1;do d=b[c],!d._visible||1==d._opacity||d instanceof X.slice||(d._distance=this.distanceToEye_(d),a=!0);while(c--);a&&this._objects.sort()};
X.renderer3D.prototype.pick=function(a,b){if(this._config.PICKING_ENABLED){this.render_(!0,!1);var c=new Uint8Array(4);this._context.readPixels(a,this._height-b,1,1,this._context.RGBA,this._context.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
X.renderer3D.prototype.render_=function(a,b){X.renderer3D.superClass_.render_.call(this,a,b);this._context.viewport(0,0,this._width,this._height);this._context.clear(this._context.COLOR_BUFFER_BIT|this._context.DEPTH_BUFFER_BIT);var c=this._objects.values(),d=c.length;if(0!=d){a?this._context.bindFramebuffer(this._context.FRAMEBUFFER,this._pickFrameBuffer):this._context.bindFramebuffer(this._context.FRAMEBUFFER,null);var e=this._camera._perspective,f=this._camera._view;this._context.uniformMatrix4fv(this._uniformLocations.get(X.shaders.uniforms.PERSPECTIVE),
!1,e);this._context.uniformMatrix4fv(this._uniformLocations.get(X.shaders.uniforms.VIEW),!1,f);e=this._center;this._context.uniform3f(this._uniformLocations.get(X.shaders.uniforms.CENTER),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));f=this._topLevelObjects.length;for(e=0;e<f;++e){var g=this._topLevelObjects[e];g instanceof X.volume&&this.orientVolume_(g)}this._config.ORDERING_ENABLED&&this.order_();if(f=!a&&goog.isDefAndNotNull(b)&&b&&this._config.STATISTICS_ENABLED)var h=0,k=0,l=0,m=0;var e=
this._attributePointers,g=e.get(X.shaders.attributes.VERTEXPOSITION),n=e.get(X.shaders.attributes.VERTEXNORMAL),p=e.get(X.shaders.attributes.VERTEXCOLOR),q=e.get(X.shaders.attributes.VERTEXTEXTUREPOS),u=e.get(X.shaders.attributes.VERTEXSCALAR),e=this._uniformLocations,t=e.get(X.shaders.uniforms.USEPICKING),C=e.get(X.shaders.uniforms.USEOBJECTCOLOR),B=e.get(X.shaders.uniforms.OBJECTCOLOR),y=e.get(X.shaders.uniforms.USESCALARS),D=e.get(X.shaders.uniforms.SCALARSREPLACEMODE),A=e.get(X.shaders.uniforms.SCALARSMIN),
F=e.get(X.shaders.uniforms.SCALARSMAX),I=e.get(X.shaders.uniforms.SCALARSMINCOLOR),G=e.get(X.shaders.uniforms.SCALARSMAXCOLOR),w=e.get(X.shaders.uniforms.SCALARSINTERPOLATION),E=e.get(X.shaders.uniforms.SCALARSMINTHRESHOLD),z=e.get(X.shaders.uniforms.SCALARSMAXTHRESHOLD),r=e.get(X.shaders.uniforms.OBJECTOPACITY),s=e.get(X.shaders.uniforms.LABELMAPOPACITY),H=e.get(X.shaders.uniforms.LABELMAPCOLOR),K=e.get(X.shaders.uniforms.USETEXTURE),v=e.get(X.shaders.uniforms.USELABELMAPTEXTURE),J=e.get(X.shaders.uniforms.TEXTURESAMPLER),
Q=e.get(X.shaders.uniforms.TEXTURESAMPLER2),L=e.get(X.shaders.uniforms.VOLUMELOWERTHRESHOLD),M=e.get(X.shaders.uniforms.VOLUMEUPPERTHRESHOLD),N=e.get(X.shaders.uniforms.VOLUMESCALARMIN),S=e.get(X.shaders.uniforms.VOLUMESCALARMAX),O=e.get(X.shaders.uniforms.VOLUMEWINDOWLOW),T=e.get(X.shaders.uniforms.VOLUMEWINDOWHIGH),aa=e.get(X.shaders.uniforms.VOLUMESCALARMINCOLOR),ea=e.get(X.shaders.uniforms.VOLUMESCALARMAXCOLOR),da=e.get(X.shaders.uniforms.VOLUMETEXTURE),fa=e.get(X.shaders.uniforms.OBJECTTRANSFORM),
ga=e.get(X.shaders.uniforms.POINTSIZE),e=d;do{var P=c[d-e];if(P){var R=null;P instanceof X.slice&&P._volume&&(R=P._volume);if(P._visible&&(!R||R._visible)&&(!a||P._pickable)){var U=P._id,W=P._magicmode,V=this._vertexBuffers.get(U),Y=this._normalBuffers.get(U),ba=this._colorBuffers.get(U),Z=this._scalarBuffers.get(U),ca=this._texturePositionBuffers.get(U);this._context.bindBuffer(this._context.ARRAY_BUFFER,V._glBuffer);this._context.vertexAttribPointer(g,V._itemSize,this._context.FLOAT,!1,0,0);this._context.bindBuffer(this._context.ARRAY_BUFFER,
Y._glBuffer);this._context.vertexAttribPointer(n,Y._itemSize,this._context.FLOAT,!1,0,0);a?this._context.uniform1i(t,!0):this._context.uniform1i(t,!1);!ba||a||W?(Y=1,W&&!a&&(Y=0),this._context.uniform1i(C,Y),Y=P._color,a&&(Y=[Math.floor(U%65025%255)/255,Math.floor(U%65025/255)/255,Math.floor(U/65025)/255]),this._context.uniform3f(B,parseFloat(Y[0]),parseFloat(Y[1]),parseFloat(Y[2])),this._context.vertexAttribPointer(p,V._itemSize,this._context.FLOAT,!1,0,0)):(this._context.uniform1i(C,!1),this._context.bindBuffer(this._context.ARRAY_BUFFER,
ba._glBuffer),this._context.vertexAttribPointer(p,ba._itemSize,this._context.FLOAT,!1,0,0));!Z||a||W?(this._context.uniform1i(y,!1),this._context.vertexAttribPointer(u,V._itemSize,this._context.FLOAT,!1,0,0)):(this._context.uniform1i(y,!0),this._context.uniform1i(D,P._scalars._replaceMode),U=P._scalars._minColor,W=P._scalars._maxColor,this._context.uniform3f(I,parseFloat(U[0]),parseFloat(U[1]),parseFloat(U[2])),this._context.uniform3f(G,parseFloat(W[0]),parseFloat(W[1]),parseFloat(W[2])),this._context.uniform1f(E,
parseFloat(P._scalars._lowerThreshold)),this._context.uniform1f(z,parseFloat(P._scalars._upperThreshold)),this._context.uniform1f(A,parseFloat(P._scalars._min)),this._context.uniform1f(F,parseFloat(P._scalars._max)),this._context.uniform1i(w,parseInt(P._scalars._interpolation,10)),this._context.bindBuffer(this._context.ARRAY_BUFFER,Z._glBuffer),this._context.vertexAttribPointer(u,Z._itemSize,this._context.FLOAT,!1,0,0));this._context.uniform1f(r,parseFloat(P._opacity));P._texture&&ca&&!a?(this._context.uniform1i(K,
!0),this._context.activeTexture(this._context.TEXTURE0),this._context.bindTexture(this._context.TEXTURE_2D,this._textures.get(P._texture._id)),this._context.uniform1i(J,0),this._context.bindBuffer(this._context.ARRAY_BUFFER,ca._glBuffer),this._context.vertexAttribPointer(q,ca._itemSize,this._context.FLOAT,!1,0,0),this._context.uniform1i(da,!1)):(this._context.uniform1i(K,!1),this._context.vertexAttribPointer(q,V._itemSize,this._context.FLOAT,!1,0,0));R&&(this._context.uniform1i(da,!0),this._context.uniform1f(L,
R._lowerThreshold),this._context.uniform1f(M,R._upperThreshold),this._context.uniform1f(N,R._min),this._context.uniform1f(S,R._max),U=R._minColor,W=R._maxColor,this._context.uniform3f(aa,parseFloat(U[0]),parseFloat(U[1]),parseFloat(U[2])),this._context.uniform3f(ea,parseFloat(W[0]),parseFloat(W[1]),parseFloat(W[2])),this._context.uniform1f(O,R._windowLow),this._context.uniform1f(T,R._windowHigh),Z=R._labelmap,this._context.uniform1i(v,!1),R._volumeRendering?this._context.uniform1f(r,parseFloat(R._opacity)):
Z&&Z._visible&&(R=P._labelmap._id,this._context.uniform1i(v,!0),this._context.activeTexture(this._context.TEXTURE1),this._context.bindTexture(this._context.TEXTURE_2D,this._textures.get(R)),this._context.uniform1i(Q,1),this._context.uniform1f(s,Z._opacity),this._context.uniform4fv(H,Z._showOnlyColor)));this._context.uniformMatrix4fv(fa,!1,P._transform._matrix);R=1;P._type==X.displayable.types.POINTS&&(R=P._pointsize);this._context.uniform1f(ga,R);R=-1;P._type==X.displayable.types.TRIANGLES?(R=this._context.TRIANGLES,
f&&(k+=V._itemCount/3)):P._type==X.displayable.types.LINES?(this._context.lineWidth(P._linewidth),R=this._context.LINES,f&&(l+=V._itemCount/2)):P._type==X.displayable.types.POINTS?(R=this._context.POINTS,f&&(m+=V._itemCount)):P._type==X.displayable.types.TRIANGLE_STRIPS?(R=this._context.TRIANGLE_STRIP,f&&(k+=V._itemCount/3)):P._type==X.displayable.types.POLYGONS&&(R=0==V._itemCount%3?this._context.TRIANGLES:this._context.TRIANGLE_FAN,f&&(k+=V._itemCount/3));f&&(h+=V._itemCount);this._context.drawArrays(R,
0,V._itemCount)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+h+" | "),c+="Triangles: "+Math.round(k)+" | ",c+="Lines: "+l+" | ",c+="Points: "+m+" | ",c+="Textures: "+this._textures.getCount(),window.console.log(c))}};
X.renderer3D.prototype.remove=function(a){X.renderer3D.superClass_.remove.call(this,a);if(0<a._children.length)for(var b=a._children,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a._id;c=this._texturePositionBuffers.get(b);goog.isDefAndNotNull(c)&&this._context.isBuffer(c._glBuffer)&&this._context.deleteBuffer(c._glBuffer);a._texture&&(c=this._textures.get(a._texture._id))&&(this._context.deleteTexture(c),this._textures.remove(a._texture._id));c=this._vertexBuffers.get(b);goog.isDefAndNotNull(c)&&
this._context.isBuffer(c._glBuffer)&&this._context.deleteBuffer(c._glBuffer);c=this._normalBuffers.get(b);goog.isDefAndNotNull(c)&&this._context.isBuffer(c._glBuffer)&&this._context.deleteBuffer(c._glBuffer);c=this._colorBuffers.get(b);goog.isDefAndNotNull(c)&&this._context.isBuffer(c._glBuffer)&&this._context.deleteBuffer(c._glBuffer);c=this._scalarBuffers.get(b);goog.isDefAndNotNull(c)&&this._context.isBuffer(c._glBuffer)&&this._context.deleteBuffer(c._glBuffer);this._vertexBuffers.remove(b);this._normalBuffers.remove(b);
this._colorBuffers.remove(b);this._texturePositionBuffers.remove(b);this._scalarBuffers.remove(b);this._objects.remove(a);return!0};X.renderer3D.prototype.destroy=function(){this._shaders=null;delete this._shaders;this._context.clear(this._context.COLOR_BUFFER_BIT|this._context.DEPTH_BUFFER_BIT);X.renderer3D.superClass_.destroy.call(this)};X.renderer3D.prototype.__defineGetter__("bgColor",function(){return this._bgColor});
X.renderer3D.prototype.__defineSetter__("bgColor",function(a){this._bgColor=a});X.renderer3D.prototype.ray_intersect_box_=function(a,b,c){for(var d=[],e=[],f=0;6>f;f++){var g=Math.floor(f/2),h=(g+1)%3,k=(g+2)%3,l=(2+2*g)%6,m=(4+2*g)%6,n=1/c[g]*(a[f]-b[g]);if(Infinity!=n&&-Infinity!=n){var p=b[h]+c[h]*n,n=b[k]+c[k]*n;p>=a[l]&&p<=a[l+1]&&n>=a[m]&&n<=a[m+1]?(l=[],l[g]=a[f],l[h]=p,l[k]=n,d.push(l)):(l=[],l[g]=a[f],l[h]=p,l[k]=n,e.push(l))}}return[d,e]};
X.renderer3D.prototype.pick3d=function(a,b,c,d,e){goog.isDefAndNotNull(c)||(c=4);goog.isDefAndNotNull(d)||(d=2);if(!goog.isDefAndNotNull(e)){e=this.pick(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var f=this._camera.unproject_(a/this._width*2-1,(this._height-b)/this._height*2-1,0);a=this._camera.unproject_(a/this._width*2-1,(this._height-b)/this._height*2-1,1);f[0]+=this._center[0];f[1]+=this._center[1];f[2]+=this._center[2];a[0]+=this._center[0];a[1]+=this._center[1];a[2]+=this._center[2];
b=[e._points._minA,e._points._minB,e._points._minC];var g=[e._points._maxA,e._points._minB,e._points._minC],h=[e._points._maxA,e._points._maxB,e._points._minC],k=[e._points._minA,e._points._maxB,e._points._minC],l=[e._points._minA,e._points._maxB,e._points._maxC],m=[e._points._minA,e._points._minB,e._points._maxC],n=[e._points._maxA,e._points._maxB,e._points._maxC],p=[e._points._maxA,e._points._minB,e._points._maxC];b=[X.matrix.multiplyByVector(e._transform._matrix,b[0],b[1],b[2]),X.matrix.multiplyByVector(e._transform._matrix,
g[0],g[1],g[2]),X.matrix.multiplyByVector(e._transform._matrix,h[0],h[1],h[2]),X.matrix.multiplyByVector(e._transform._matrix,k[0],k[1],k[2]),X.matrix.multiplyByVector(e._transform._matrix,l[0],l[1],l[2]),X.matrix.multiplyByVector(e._transform._matrix,m[0],m[1],m[2]),X.matrix.multiplyByVector(e._transform._matrix,n[0],n[1],n[2]),X.matrix.multiplyByVector(e._transform._matrix,p[0],p[1],p[2])];var g=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],q;for(q in b)q=b[q],g=[Math.min(g[0],q.x),
Math.max(g[1],q.x),Math.min(g[2],q.y),Math.max(g[3],q.y),Math.min(g[4],q.z),Math.max(g[5],q.z)];q=this.ray_intersect_box_(g,f,a);q=q[0];if(0==q.length)return null;g=Array(2);for(a=0;2>a;a++)b=q[a],g[a]=Math.sqrt((b[0]-f[0])*(b[0]-f[0])+(b[1]-f[1])*(b[1]-f[1])+(b[2]-f[2])*(b[2]-f[2]));f=b=a=null;g[0]<g[1]?(a=q[0],b=q[1]):(a=q[1],b=q[0]);f=Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])+(a[2]-b[2])*(a[2]-b[2]));f/=c;q=a;a=[b[0]-a[0],b[1]-a[1],b[2]-a[2]];b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*
a[2]);g=[a[0]/b,a[1]/b,a[2]/b];h=e._points._triplets;k=h.length;for(a=0;a<f;a+=c)for(q=[q[0]+c*g[0],q[1]+c*g[1],q[2]+c*g[2]],b=0;b<k;b+=3)if(l=h[b],m=h[b+1],n=h[b+2],p=new X.vector(l,m,n),p=X.matrix.multiplyByVector(e._transform._matrix,l,m,n),Math.sqrt((q[0]-p.x)*(q[0]-p.x)+(q[1]-p.y)*(q[1]-p.y)+(q[2]-p.z)*(q[2]-p.z))<=d)return[p.x,p.y,p.z];return null};goog.exportSymbol("X.renderer3D",X.renderer3D);goog.exportSymbol("X.renderer3D.prototype.init",X.renderer3D.prototype.init);
goog.exportSymbol("X.renderer3D.prototype.add",X.renderer3D.prototype.add);goog.exportSymbol("X.renderer3D.prototype.onShowtime",X.renderer3D.prototype.onShowtime);goog.exportSymbol("X.renderer3D.prototype.onRender",X.renderer3D.prototype.onRender);goog.exportSymbol("X.renderer3D.prototype.get",X.renderer3D.prototype.get);goog.exportSymbol("X.renderer3D.prototype.render",X.renderer3D.prototype.render);goog.exportSymbol("X.renderer3D.prototype.destroy",X.renderer3D.prototype.destroy);
goog.exportSymbol("X.renderer3D.prototype.remove",X.renderer3D.prototype.remove);goog.exportSymbol("X.renderer3D.prototype.resetBoundingBox",X.renderer3D.prototype.resetBoundingBox);goog.exportSymbol("X.renderer3D.prototype.resetViewAndRender",X.renderer3D.prototype.resetViewAndRender);goog.exportSymbol("X.renderer3D.prototype.pick",X.renderer3D.prototype.pick);goog.exportSymbol("X.renderer3D.prototype.pick3d",X.renderer3D.prototype.pick3d);xiv.vis.XtkRenderer3D=function(){X.renderer3D.call(this)};goog.inherits(xiv.vis.XtkRenderer3D,X.renderer3D);goog.exportSymbol("xiv.vis.XtkRenderer3D",xiv.vis.XtkRenderer3D);xiv.vis.XtkRenderer3D.prototype.onResize=function(){this.onResize_()};xiv.vis.XtkRenderer3D.prototype.onProgress=function(a){xiv.vis.XtkRenderer3D.superClass_.onProgress.call(this,a);this.dispatchEvent({type:xiv.vis.RenderEngine.EventType.RENDERING,value:a._value})};
xiv.vis.XtkRenderer3D.prototype.render=function(){this._canvas&&this._context?(xiv.vis.XtkRenderer3D.superClass_.render.call(this),this.dispatchEvent({type:xiv.vis.RenderEngine.EventType.RENDER_END})):this.init()};xiv.vis.XtkRenderer3D.prototype.remove=function(a){goog.isDefAndNotNull(a)&&xiv.vis.XtkRenderer3D.superClass_.remove.call(this,a)};goog.exportSymbol("xiv.vis.XtkRenderer3D.prototype.onResize",xiv.vis.XtkRenderer3D.prototype.onResize);
goog.exportSymbol("xiv.vis.XtkRenderer3D.prototype.onProgress",xiv.vis.XtkRenderer3D.prototype.onProgress);goog.exportSymbol("xiv.vis.XtkRenderer3D.prototype.render",xiv.vis.XtkRenderer3D.prototype.render);goog.exportSymbol("xiv.vis.XtkRenderer3D.prototype.remove",xiv.vis.XtkRenderer3D.prototype.remove);xiv.vis.XtkPlane3D=function(){xiv.vis.XtkPlane.call(this);this.orientation="V";this.XRenderer=xiv.vis.XtkRenderer3D};goog.inherits(xiv.vis.XtkPlane3D,xiv.vis.XtkPlane);goog.exportSymbol("xiv.vis.XtkPlane3D",xiv.vis.XtkPlane3D);xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION=[-300,300,300];goog.exportSymbol("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION);xiv.vis.XtkEngine=function(){xiv.vis.RenderEngine.call(this);this.ControllerTree_=null;this.currXObjects_={volumes:[],meshes:[],fibers:[],spheres:[]};this.PlaneX_=new xiv.vis.XtkPlane2D("X");this.PlaneY_=new xiv.vis.XtkPlane2D("Y");this.PlaneZ_=new xiv.vis.XtkPlane2D("Z");this.PlaneV_=new xiv.vis.XtkPlane3D;this.Planes_={};this.Planes_[this.PlaneX_.getOrientation()]=this.PlaneX_;this.Planes_[this.PlaneY_.getOrientation()]=this.PlaneY_;this.Planes_[this.PlaneZ_.getOrientation()]=this.PlaneZ_;this.Planes_[this.PlaneV_.getOrientation()]=
this.PlaneV_;this.primaryRenderPlane_=null;this.setPrimaryRenderPlane(this.PlaneV_);this.setRenderPlaneEvents_()};goog.inherits(xiv.vis.XtkEngine,xiv.vis.RenderEngine);goog.exportSymbol("xiv.vis.XtkEngine",xiv.vis.XtkEngine);
xiv.vis.XtkEngine.EventType={SLICE_NAVIGATED:goog.events.getUniqueId("slice-navigated"),SHIFT_DOWN:goog.events.getUniqueId("shift-down"),SHIFT_UP:goog.events.getUniqueId("shift-up"),ERROR:goog.events.getUniqueId("error"),ZOOM:goog.events.getUniqueId("zoom"),LEFTMOUSE_DOWN:goog.events.getUniqueId("leftmouse-down"),LEFTMOUSE_UP:goog.events.getUniqueId("leftmouse-up")};xiv.vis.XtkEngine.ID_PREFIX="xiv.vis.XtkEngine";xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN={SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"};
xiv.vis.XtkEngine.SLICE_TO_RAS_KEY="sliceToRAS"+goog.string.createUniqueString();xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY="hasLabelMap";xiv.vis.XtkEngine.prototype.renderEndCalled_=!1;xiv.vis.XtkEngine.prototype.getAnnotations_=function(a){goog.isDefAndNotNull(a.getRenderProperties().annotations)&&goog.array.forEach(a.getRenderProperties().annotations,function(a){this.currXObjects_.spheres.push(xiv.vis.XtkEngine.createAnnotation(a))}.bind(this))};
xiv.vis.XtkEngine.prototype.setPlaneEnabled=function(a,b){switch(a.toLowerCase()){case "x":this.PlaneX_.setEnabled(b);break;case "y":this.PlaneY_.setEnabled(b);break;case "z":this.PlaneZ_.setEnabled(b);break;case "v":this.PlaneV_.setEnabled(b)}};xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane=function(a){this.primaryRenderPlane_=a;this.setPrimaryRenderPlaneEvents_()};xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane=function(){return this.primaryRenderPlane_};
xiv.vis.XtkEngine.prototype.onSliceNavigated_=function(a){this.dispatchEvent(a)};xiv.vis.XtkEngine.prototype.setRenderPlaneEvents_=function(){goog.object.forEach(this.getPlanes(),function(a,b){goog.events.listen(a,xiv.vis.XtkEngine.EventType.SLICE_NAVIGATED,this.onSliceNavigated_.bind(this));goog.events.listen(a,xiv.vis.XtkEngine.EventType.SHIFT_UP,function(a){}.bind(this))}.bind(this))};
xiv.vis.XtkEngine.prototype.setPrimaryRenderPlaneEvents_=function(){this.primaryRenderPlane_.init();this.renderKey_=goog.events.listen(this.primaryRenderPlane_,xiv.vis.RenderEngine.EventType.RENDERING,this.onRendering_.bind(this))};xiv.vis.XtkEngine.prototype.updateControllers=function(){this.ControllerTree_.updateControllers()};xiv.vis.XtkEngine.prototype.getControllerTree=function(){return this.ControllerTree_};
xiv.vis.XtkEngine.prototype.createXObjects_=function(a){goog.isDefAndNotNull(this.ControllerTree_)&&(this.ControllerTree_.dispose(),this.ControllerTree_=null);this.ControllerTree_=new xiv.ui.ctrl.XtkControllerTree;goog.isDefAndNotNull(a.getRenderProperties()&&goog.isDefAndNotNull(a.getRenderProperties().annotations))&&(this.getAnnotations_(a),goog.array.forEach(this.currXObjects_.spheres,function(a){this.ControllerTree_.createControllers(a)}.bind(this)));var b;goog.array.forEach(a.getViewables(),
function(a){b=a.getFiles();goog.isDefAndNotNull(b)&&(currXObj=xiv.vis.XtkEngine.createXObject(b,a.getFileData()),renderProps=a.getRenderProperties(),currXObj&&(this.ControllerTree_.createControllers(currXObj,renderProps),currXObj instanceof X.volume?(this.constructor.setRenderProperties_Volume_(currXObj,renderProps),this.currXObjects_.volumes.push(currXObj)):currXObj instanceof X.mesh?(this.constructor.setRenderProperties_Mesh_(currXObj,renderProps),this.currXObjects_.meshes.push(currXObj)):currXObj instanceof
X.fibers&&(this.constructor.setRenderProperties_Fiber_(currXObj,renderProps),this.currXObjects_.fibers.push(currXObj))))}.bind(this))};
xiv.vis.XtkEngine.prototype.render3dPlane=function(){this.setPrimaryRenderPlane(this.PlaneV_);this.PlaneV_.init();goog.object.forEach(this.currXObjects_,function(a,b){"volumes"!==b&&goog.array.forEach(a,function(a){this.PlaneV_.add(a)}.bind(this))}.bind(this));goog.events.listenOnce(this.PlaneV_.getRenderer(),xiv.vis.RenderEngine.EventType.RENDER_END,function(a){this.onRenderEnd_();this.PlaneX_.render()}.bind(this));this.PlaneV_.render()};
xiv.vis.XtkEngine.prototype.render2D=function(a){var b=goog.isDefAndNotNull(a)?a:this.getSelectedVolume();goog.object.forEach(this.Planes_,function(a,d){"v"!=d.toLowerCase()&&(a.init(),a.add(b),a.render())})};xiv.vis.XtkEngine.prototype.hideNonSelectedVolumes_=function(){var a=this.getSelectedVolume();goog.object.forEach(this.currXObjects_.volumes,function(b){b!==a&&(b.visible=!1)})};
xiv.vis.XtkEngine.prototype.renderAllPlanes=function(){var a=this.getSelectedVolume(),b=[],c=[],d=["x","y","z","v"];goog.object.forEach(this.currXObjects_,function(a,d){currArr="volumes"==d?c:b;goog.array.forEach(a,function(a){currArr.push(a)})}.bind(this));goog.array.forEach(b,function(a){this.PlaneV_.add(a)}.bind(this));goog.array.forEach(c,function(b){b!==a&&(b.visible=!0,this.PlaneV_.add(b))}.bind(this));this.primaryRenderPlane_.getRenderer().onShowtime=function(){var b=goog.array.remove(d,this.primaryRenderPlane_.getOrientation().toLowerCase());
this.renderNonPrimary_(a,b)}.bind(this);this.primaryRenderPlane_.add(a);this.primaryRenderPlane_.render()};
xiv.vis.XtkEngine.prototype.render=function(a){this.renderEndCalled_=!1;this.createXObjects_(a);var b=a.getRenderProperties();goog.isDefAndNotNull(b)?(goog.isDefAndNotNull(b.backgroundColor)&&this.PlaneV_.setBackground(a.getRenderProperties().backgroundColor),goog.isDefAndNotNull(b.camera)&&this.PlaneV_.setCamera(a.getRenderProperties().camera)):(this.PlaneV_.setBackground(),this.PlaneV_.setCamera());if(0<this.currXObjects_.volumes.length){a=this.getPlanes();b="";for(b in a)if(a[b].isEnabled()){this.setPrimaryRenderPlane(a[b]);
break}this.renderAllPlanes()}else this.PlaneV_.isEnabled()&&this.render3dPlane()};xiv.vis.XtkEngine.prototype.renderNonPrimary_=function(a,b){var c=goog.object.getCount(this.getPlanes())-1;goog.object.forEach(this.getPlanes(),function(b,e){b!=this.primaryRenderPlane_&&b.isEnabled()&&(b.add(a),goog.events.listenOnce(b.getRenderer(),xiv.vis.RenderEngine.EventType.RENDER_END,function(a){c--;if(0==c)this.onRenderEnd_()}.bind(this)),b.render())}.bind(this))};
xiv.vis.XtkEngine.prototype.getSelectedVolume=function(){if(0!=this.currXObjects_.volumes.length){for(var a=0,b=this.currXObjects_.volumes.length;a<b;a++){var c=this.currXObjects_.volumes[a];if(c[xiv.vis.RenderEngine.SELECTED_VOL_KEY])return c}this.currXObjects_.volumes[0][xiv.vis.RenderEngine.SELECTED_VOL_KEY]=!0;return this.currXObjects_.volumes[0]}};xiv.vis.XtkEngine.prototype.updateStyle=function(){goog.object.forEach(this.getPlanes(),function(a,b){a.updateStyle()}.bind(this))};
xiv.vis.XtkEngine.setRenderProperties_Mesh_=function(a,b){a.color=b.color||[.5,.5,.5];a.opacity=b.opacity||1};
xiv.vis.XtkEngine.setRenderProperties_Volume_=function(a,b){goog.isDefAndNotNull(b)||(b={origin:[0,0,0],upperThreshold:1E4,lowerThreshold:-1E4,isSelectedVolume:!0,volumeRendering:!1});a.origin=b.origin;a.upperThreshold=b.upperThreshold;a.lowerThreshold=b.lowerThreshold;a.volumeRendering=b.volumeRendering;a[xiv.vis.RenderEngine.SELECTED_VOL_KEY]=b.isSelectedVolume;a[xiv.vis.XtkEngine.SLICE_TO_RAS_KEY]=b.sliceToRAS;goog.isDefAndNotNull(b.labelMapFile)?(a.labelmap.file=b.labelMapFile,a.labelmap.colortable.file=
b.labelMapColorTableFile,a[xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY]=!0):a[xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY]=!1};xiv.vis.XtkEngine.prototype.onRendering_=function(a){this.renderEndCalled_||this.dispatchEvent({type:xiv.vis.RenderEngine.EventType.RENDERING,value:a.value})};
xiv.vis.XtkEngine.prototype.onRenderEnd_=function(a){this.hideNonSelectedVolumes_();goog.events.unlistenByKey(this.renderKey_);this.renderEndCalled_=!0;this.dispatchEvent({type:xiv.vis.RenderEngine.EventType.RENDER_END,value:goog.isDefAndNotNull(a)?a.value:1})};xiv.vis.XtkEngine.prototype.getPlaneX=function(){return this.PlaneX_};xiv.vis.XtkEngine.prototype.getPlaneY=function(){return this.PlaneY_};xiv.vis.XtkEngine.prototype.getPlaneZ=function(){return this.PlaneZ_};
xiv.vis.XtkEngine.prototype.getPlaneV=function(){return this.PlaneV_};xiv.vis.XtkEngine.prototype.getPlaneByOrientation=function(a){return this.Planes_[a]};xiv.vis.XtkEngine.prototype.getPlanes=function(){return this.Planes_};
xiv.vis.XtkEngine.prototype.dispose=function(){xiv.vis.XtkEngine.superClass_.dispose.call(this);goog.isDefAndNotNull(this.ControllerTree_)&&(this.ControllerTree_.dispose(),delete this.ControllerTree_);goog.events.removeAll(this.PlaneX_);goog.events.removeAll(this.PlaneY_);goog.events.removeAll(this.PlaneZ_);goog.events.removeAll(this.PlaneV_);delete this.primaryRenderPlane_;goog.object.clear(this.Planes_);delete this.Planes_;this.PlaneX_.dispose();delete this.PlaneX_;this.PlaneY_.dispose();delete this.PlaneY_;
this.PlaneZ_.dispose();delete this.PlaneZ_;this.PlaneV_.dispose();delete this.PlaneV_;delete this.renderEndCalled_};xiv.vis.XtkEngine.volumeExtensions_=["nrrd","nii","nii.gz","mgh","mgz"];xiv.vis.XtkEngine.dicomExtensions_=["dicom","dcm","ima"];xiv.vis.XtkEngine.analyzeExtensions_=["hdr","img"];xiv.vis.XtkEngine.niftiExtensions_=["nii","nii.gz"];xiv.vis.XtkEngine.imageExtensions_=["jpeg","jpg","gif","png","img"];xiv.vis.XtkEngine.meshExtensions_="stl vtk obj fsm inflated smoothwm pial orig".split(" ");
xiv.vis.XtkEngine.fiberExtensions_=["trk"];xiv.vis.XtkEngine.generateXtkObjectFromExtension=function(a){var b=void 0;xiv.vis.XtkEngine.isMesh(a)?b=new X.mesh:xiv.vis.XtkEngine.isVolume(a)||xiv.vis.XtkEngine.isDicom(a)||xiv.vis.XtkEngine.isImage(a)?b=new X.volume:xiv.vis.XtkEngine.isFiber(a)&&(b=new X.fibers);return b};xiv.vis.XtkEngine.createAnnotation=function(a,b){var c=new X.sphere;c.center=a.position;c.caption=a.name;c.name=a.name;c.radius=void 0===b?3:b;c.color=[.85,0,0];return c};
xiv.vis.XtkEngine.isVolume=function(a){return-1<xiv.vis.XtkEngine.volumeExtensions_.indexOf(a)?!0:!1};xiv.vis.XtkEngine.isImage=function(a){return-1<xiv.vis.XtkEngine.imageExtensions_.indexOf(a)?!0:!1};xiv.vis.XtkEngine.isDicom=function(a){return-1<xiv.vis.XtkEngine.dicomExtensions_.indexOf(a)?!0:!1};xiv.vis.XtkEngine.isAnalyze=function(a){return-1<xiv.vis.XtkEngine.analyzeExtensions_.indexOf(a)?!0:!1};
xiv.vis.XtkEngine.isNifti=function(a){return-1<xiv.vis.XtkEngine.niftiExtensions_.indexOf(a)?!0:!1};xiv.vis.XtkEngine.isMesh=function(a){return-1<xiv.vis.XtkEngine.meshExtensions_.indexOf(a)?!0:!1};xiv.vis.XtkEngine.isFiber=function(a){return-1<xiv.vis.XtkEngine.fiberExtensions_.indexOf(a)?!0:!1};xiv.vis.XtkEngine.ViewablesObject={fibers:[],volumes:[],dicoms:[],analyze:[],nifti:[],meshes:[],annotations:[],images:[]};
xiv.vis.XtkEngine.getViewables=function(a){var b=goog.object.clone(xiv.vis.XtkEngine.ViewablesObject);goog.isArray(a)||(a=[a]);for(var c="",d="",e=0,f=a.length;e<f;e++)c=goog.string.path.basename(a[e]).toLowerCase(),d=goog.string.path.extension(c),goog.string.startsWith(c,".")||("mrml"===d?b.slicer.push(a[e]):xiv.vis.XtkEngine.isVolume(d)?b.volumes.push(a[e]):xiv.vis.XtkEngine.isDicom(d)?b.dicoms.push(a[e]):xiv.vis.XtkEngine.isMesh(d)?b.meshes.push(a[e]):xiv.vis.XtkEngine.isFiber(d)?b.fibers.push(a[e]):
xiv.vis.XtkEngine.isImage(d)&&b.images.push(a[e]));window.console.log("VIEWABLE TYPES",b);goog.object.forEach(b,function(a,c){a.length||goog.object.remove(b,c)});return b};
xiv.vis.XtkEngine.createXObject=function(a,b){var c=goog.isArray(a)?nrg.string.getFileExtension(a[0]):nrg.string.getFileExtension(a),c=xiv.vis.XtkEngine.generateXtkObjectFromExtension(c);if(!goog.isDefAndNotNull(c))throw Error("No renderable files in the set :(<br>");var d=function(a){var b=nrg.string.dirname(a);a=nrg.string.basename(a);-1<a.indexOf("%")||a.indexOf(" ");return b+"/"+a};if(goog.isArray(a)){var e=[];goog.array.forEach(a,function(a){e.push(d(a))});a=e}else a=d(a);goog.isDefAndNotNull(b)?
(c.file=goog.object.getKeys(b),c.filedata=goog.object.getValues(b)):c.file=a;return c};goog.exportSymbol("xiv.vis.XtkEngine.EventType",xiv.vis.XtkEngine.EventType);goog.exportSymbol("xiv.vis.XtkEngine.ID_PREFIX",xiv.vis.XtkEngine.ID_PREFIX);goog.exportSymbol("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN);goog.exportSymbol("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",xiv.vis.XtkEngine.SLICE_TO_RAS_KEY);goog.exportSymbol("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY);
goog.exportSymbol("xiv.vis.XtkEngine.generateXtkObjectFromExtension",xiv.vis.XtkEngine.generateXtkObjectFromExtension);goog.exportSymbol("xiv.vis.XtkEngine.createAnnotation",xiv.vis.XtkEngine.createAnnotation);goog.exportSymbol("xiv.vis.XtkEngine.isVolume",xiv.vis.XtkEngine.isVolume);goog.exportSymbol("xiv.vis.XtkEngine.isImage",xiv.vis.XtkEngine.isImage);goog.exportSymbol("xiv.vis.XtkEngine.isDicom",xiv.vis.XtkEngine.isDicom);goog.exportSymbol("xiv.vis.XtkEngine.isAnalyze",xiv.vis.XtkEngine.isAnalyze);
goog.exportSymbol("xiv.vis.XtkEngine.isNifti",xiv.vis.XtkEngine.isNifti);goog.exportSymbol("xiv.vis.XtkEngine.isMesh",xiv.vis.XtkEngine.isMesh);goog.exportSymbol("xiv.vis.XtkEngine.isFiber",xiv.vis.XtkEngine.isFiber);goog.exportSymbol("xiv.vis.XtkEngine.ViewablesObject",xiv.vis.XtkEngine.ViewablesObject);goog.exportSymbol("xiv.vis.XtkEngine.getViewables",xiv.vis.XtkEngine.getViewables);goog.exportSymbol("xiv.vis.XtkEngine.createXObject",xiv.vis.XtkEngine.createXObject);
goog.exportSymbol("xiv.vis.XtkEngine.prototype.setPlaneEnabled",xiv.vis.XtkEngine.prototype.setPlaneEnabled);goog.exportSymbol("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane);goog.exportSymbol("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane);goog.exportSymbol("xiv.vis.XtkEngine.prototype.updateControllers",xiv.vis.XtkEngine.prototype.updateControllers);
goog.exportSymbol("xiv.vis.XtkEngine.prototype.getControllerTree",xiv.vis.XtkEngine.prototype.getControllerTree);goog.exportSymbol("xiv.vis.XtkEngine.prototype.render3dPlane",xiv.vis.XtkEngine.prototype.render3dPlane);goog.exportSymbol("xiv.vis.XtkEngine.prototype.render2D",xiv.vis.XtkEngine.prototype.render2D);goog.exportSymbol("xiv.vis.XtkEngine.prototype.renderAllPlanes",xiv.vis.XtkEngine.prototype.renderAllPlanes);goog.exportSymbol("xiv.vis.XtkEngine.prototype.render",xiv.vis.XtkEngine.prototype.render);
goog.exportSymbol("xiv.vis.XtkEngine.prototype.getSelectedVolume",xiv.vis.XtkEngine.prototype.getSelectedVolume);goog.exportSymbol("xiv.vis.XtkEngine.prototype.updateStyle",xiv.vis.XtkEngine.prototype.updateStyle);goog.exportSymbol("xiv.vis.XtkEngine.prototype.getPlaneX",xiv.vis.XtkEngine.prototype.getPlaneX);goog.exportSymbol("xiv.vis.XtkEngine.prototype.getPlaneY",xiv.vis.XtkEngine.prototype.getPlaneY);goog.exportSymbol("xiv.vis.XtkEngine.prototype.getPlaneZ",xiv.vis.XtkEngine.prototype.getPlaneZ);
goog.exportSymbol("xiv.vis.XtkEngine.prototype.getPlaneV",xiv.vis.XtkEngine.prototype.getPlaneV);goog.exportSymbol("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",xiv.vis.XtkEngine.prototype.getPlaneByOrientation);goog.exportSymbol("xiv.vis.XtkEngine.prototype.getPlanes",xiv.vis.XtkEngine.prototype.getPlanes);goog.exportSymbol("xiv.vis.XtkEngine.prototype.dispose",xiv.vis.XtkEngine.prototype.dispose);xiv.ui.HelpDialog=function(){nrg.ui.Dialog.call(this)};goog.inherits(xiv.ui.HelpDialog,nrg.ui.Dialog);goog.exportSymbol("xiv.ui.HelpDialog",xiv.ui.HelpDialog);xiv.ui.HelpDialog.EventType={};xiv.ui.HelpDialog.ID_PREFIX="xiv.ui.HelpDialog";xiv.ui.HelpDialog.CSS={DIALOG:"nrg-ui-helpdialog-dialog",TEXT:"nrg-ui-helpdialog-text",SCROLLABLEZIPPYTREE:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",CLOSEBUTTON:"xiv-ui-helpdialog-closebutton"};
xiv.ui.HelpDialog.LAYOUT_IMAGE_ID=xiv.ui.HelpDialog.ID_PREFIX+".LayoutImage";
xiv.ui.HelpDialog.prototype.render=function(a){xiv.ui.HelpDialog.superClass_.render.call(this,a);goog.dom.classes.add(this.getElement(),"xiv-ui-helpdialog");this.ScrollableZippyTree_=new nrg.ui.ScrollableZippyTree;goog.dom.classes.add(this.ScrollableZippyTree_.getElement(),this.constructor.CSS.SCROLLABLEZIPPYTREE);this.ScrollableZippyTree_.render(this.getElement());this.populateZippy_();this.addTitleClass(this.constructor.CSS.TITLE);this.addCloseSpanClass(this.constructor.CSS.CLOSEBUTTON)};
xiv.ui.HelpDialog.prototype.setLayoutButton=function(a){var b=document.getElementById(xiv.ui.HelpDialog.LAYOUT_IMAGE_ID);goog.isDefAndNotNull(b)&&(document.getElementById(xiv.ui.HelpDialog.LAYOUT_IMAGE_ID).src=a)};
xiv.ui.HelpDialog.prototype.populateZippy_=function(){var a=[["Change Layouts","<img height=15 width=15 id="+xiv.ui.HelpDialog.LAYOUT_IMAGE_ID+"></img>"],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>'],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["Settings",
"keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>'],["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>'],["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']],
b=[["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Remove ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removerow.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Remove ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removecolumn.png"></img>'],
["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];this.setTitle("Help");goog.array.forEach([[["Slice-scroll","shift + mousemove","2D panels"],["Resize","left-click + drag","panel borders"]],a,b],function(a,b){var e='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';goog.array.forEach(a,
function(a){e+="<tr>";goog.array.forEach(a,function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}e+="<td height=25>"+a+"</td>"});e+="</tr>"});var e=e+"</table>",f;currText=b+1;switch(currText){case 1:f="Image Manipulation";break;case 2:f="Toggles";break;case 3:f="Modal"}goog.dom.removeNode(e);var g=goog.dom.createDom("div");g.innerHTML=e;this.ScrollableZippyTree_.addContents(g,[f])}.bind(this))};
xiv.ui.HelpDialog.prototype.disposeInternal=function(){xiv.ui.HelpDialog.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.ScrollableZippyTree_)&&this.ScrollableZippyTree_.dispose()};goog.exportSymbol("xiv.ui.HelpDialog.EventType",xiv.ui.HelpDialog.EventType);goog.exportSymbol("xiv.ui.HelpDialog.ID_PREFIX",xiv.ui.HelpDialog.ID_PREFIX);goog.exportSymbol("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",xiv.ui.HelpDialog.LAYOUT_IMAGE_ID);goog.exportSymbol("xiv.ui.HelpDialog.CSS_SUFFIX",xiv.ui.HelpDialog.CSS_SUFFIX);
goog.exportSymbol("xiv.ui.HelpDialog.prototype.render",xiv.ui.HelpDialog.prototype.render);goog.exportSymbol("xiv.ui.HelpDialog.prototype.setLayoutButton",xiv.ui.HelpDialog.prototype.setLayoutButton);goog.exportSymbol("xiv.ui.HelpDialog.prototype.disposeInternal",xiv.ui.HelpDialog.prototype.disposeInternal);goog.ui.ToggleButton=function(a,b,c){goog.ui.Button.call(this,a,b||goog.ui.CustomButtonRenderer.getInstance(),c);this.setSupportedState(goog.ui.Component.State.CHECKED,!0)};goog.inherits(goog.ui.ToggleButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName("goog-toggle-button",function(){return new goog.ui.ToggleButton(null)});xiv.ui.ViewBoxDialogs=function(a){nrg.ui.Component.call(this);this.Dialogs_={};this.ViewBox_=a};goog.inherits(xiv.ui.ViewBoxDialogs,nrg.ui.Component);goog.exportSymbol("xiv.ui.ViewBoxDialogs",xiv.ui.ViewBoxDialogs);xiv.ui.ViewBoxDialogs.EventType={DIALOG_OPENED:goog.events.getUniqueId("dialog-opened"),DIALOG_CLOSED:goog.events.getUniqueId("dialog-closed")};xiv.ui.ViewBoxDialogs.ID_PREFIX="xiv.ui.ViewBoxDialogs";
xiv.ui.ViewBoxDialogs.CSS_SUFFIX={GENERIC_TOGGLE:"generic-toggle",INFODIALOG:"infodialog",INFODIALOG_TEXT:"infodialog-text",INUSEDIALOG:"inusedialog"};xiv.ui.ViewBoxDialogs.DIALOG_KEYS={INFO:"Info_"+goog.string.createUniqueString(),HELP:"Help_"+goog.string.createUniqueString(),INUSE:"InUse_"+goog.string.createUniqueString()};xiv.ui.ViewBoxDialogs.TOGGLED_CLASS="ToggleClass_"+goog.string.createUniqueString();xiv.ui.ViewBoxDialogs.prototype.getDialogs=function(){return this.Dialogs_};
xiv.ui.ViewBoxDialogs.prototype.getDialog=function(a){return this.Dialogs_[a]};
xiv.ui.ViewBoxDialogs.prototype.createToggleableDialog=function(a,b,c,d,e,f,g,h,k){e=goog.isDefAndNotNull(e)?e:"";var l=this.ViewBox_.createToggleButton("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.Dialogs_[a].setVisible(b);this.Dialogs_[a].center();this.dispatchEvent({type:b?xiv.ui.ViewBoxDialogs.EventType.DIALOG_OPENED:xiv.ui.ViewBoxDialogs.EventType.DIALOG_CLOSED,dialog:this.Dialogs_[a],dialogKey:a})}.bind(this),d);goog.isDefAndNotNull(this.Dialogs_[a])&&this.Dialogs_[a].dispose();
c=new nrg.ui.Dialog;this.Dialogs_[a]=c;c.setModal(goog.isDefAndNotNull(g)?g:!1);c.setButtonSet(goog.isDefAndNotNull(h)?h:null);c.render(this.ViewBox_.getViewFrame());c.setBackgroundElementOpacity(0);c.reposition();c.setTitle(e);goog.dom.classes.add(c.getElement(),b);goog.events.listen(c,nrg.ui.Dialog.EventType.CLOSE_BUTTON_CLICKED,function(){this.ViewBox_.onToggleButtonClicked(l)}.bind(this));goog.events.listen(c,goog.ui.Dialog.EventType.AFTER_SHOW,function(a){}.bind(this));!1===f&&goog.testing.events.fireClickEvent(this.ViewBox_.getToggleButtons()[a])};
xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog=function(){this.createToggleableDialog(xiv.ui.ViewBoxDialogs.DIALOG_KEYS.MESHES,"xiv-ui-viewboxdialogs-meshes-dialog",xiv.ui.ViewBoxDialogs.CSS.GENERIC_TOGGLE,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};
xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog=function(){this.createToggleableDialog(xiv.ui.ViewBoxDialogs.DIALOG_KEYS.VOLUMES,"xiv-ui-viewboxdialogs-volumes-dialog",xiv.ui.ViewBoxDialogs.CSS.GENERIC_TOGGLE,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};xiv.ui.ViewBoxDialogs.prototype.createDialogs=function(){this.createInUseDialog_();this.createHelpDialog_();this.createInfoDialog_()};
xiv.ui.ViewBoxDialogs.prototype.setInUseSelect=function(a,b){goog.events.listenOnce(this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE],goog.ui.Dialog.EventType.SELECT,function(c){"yes"===c.key&&goog.isDefAndNotNull(a)&&a(this);"no"===c.key&&goog.isDefAndNotNull(b)&&b(this)}.bind(this))};
xiv.ui.ViewBoxDialogs.prototype.createInUseDialog_=function(){this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE]=new nrg.ui.Dialog;this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE].setButtonSet(goog.ui.Dialog.ButtonSet.YES_NO);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE].render(this.ViewBox_.getViewFrame());this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE].setContent("ViewBox in use.&nbspProceed anyway?")};
xiv.ui.ViewBoxDialogs.prototype.showInUseDialog=function(){goog.dom.classes.add(this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE].getElement(),xiv.ui.ViewBoxDialogs.CSS.INUSEDIALOG);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE].setModal(!0);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE].setVisible(!0);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INUSE].center()};xiv.ui.ViewBoxDialogs.prototype.update=function(){goog.object.forEach(this.Dialogs_,function(a){a.updateLimits()})};
xiv.ui.ViewBoxDialogs.prototype.toggleVisible=function(a,b){var c=!1===b?0:1;window.console.log(a,this.Dialogs_[a]);goog.isDefAndNotNull(this.Dialogs_[a].getElement())&&nrg.fx.fadeTo(this.Dialogs_[a].getElement(),200,c)};xiv.ui.ViewBoxDialogs.prototype.getHelpDialog=function(){return this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP]};
xiv.ui.ViewBoxDialogs.prototype.createHelpDialog_=function(){goog.isDefAndNotNull(this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP])&&this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].dispose();this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP]=new xiv.ui.HelpDialog;this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].setModal(!1);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].setButtonSet(null);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].render(this.ViewBox_.getViewFrame());
this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].setVisible(!1);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].center();var a=this.ViewBox_.createToggleButton("LEFT",xiv.ui.ViewBoxDialogs.CSS.GENERIC_TOGGLE,xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP,"Help",function(a){a="true"==a.getAttribute("checked");this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].setVisible(a);this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP].center();this.dispatchEvent({type:a?xiv.ui.ViewBoxDialogs.EventType.DIALOG_OPENED:
xiv.ui.ViewBoxDialogs.EventType.DIALOG_CLOSED,dialog:this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP]})}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");goog.events.listen(this.Dialogs_[xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP],nrg.ui.Dialog.EventType.CLOSE_BUTTON_CLICKED,function(){this.ViewBox_.onToggleButtonClicked(a)}.bind(this));this.ViewBox_.onToggleButtonClicked(a)};
xiv.ui.ViewBoxDialogs.prototype.createInfoDialog_=function(){var a=xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INFO;goog.isDefAndNotNull(this.Dialogs_[a])&&this.Dialogs_[a].dispose();this.Dialogs_[a]=new nrg.ui.Dialog;var b="";0<this.ViewBox_.getViewableTrees().length?goog.object.forEach(this.ViewBox_.getViewableTrees()[0].getSessionInfo(),function(a,c){goog.isDefAndNotNull(a)&&0<a.length&&(b+=c+": "+a+"<br>")}):b=goog.string.path.basename(this.ViewBox_.getViewableTrees()[0].getQueryUrl());this.Dialogs_[a].setModal(!1);
this.Dialogs_[a].addText(b);this.Dialogs_[a].setButtonSet(null);this.Dialogs_[a].render(this.ViewBox_.getViewFrame());this.Dialogs_[a].setVisible(!0);this.Dialogs_[a].moveToCorner("left","top");this.Dialogs_[a].addContentClass("xiv-ui-viewboxdialogs-infodialog-content");this.Dialogs_[a].setMouseoverClass("xiv-ui-viewboxdialogs-infodialog-hovered");goog.dom.classes.add(this.Dialogs_[a].getElement(),xiv.ui.ViewBoxDialogs.CSS.INFODIALOG);goog.dom.classes.add(this.Dialogs_[a].getTextElements()[0],xiv.ui.ViewBoxDialogs.CSS.INFODIALOG_TEXT);
this.Dialogs_[a].addTitleClass("xiv-ui-viewboxdialogs-infodialog-title");this.Dialogs_[a].addCloseButtonClass("xiv-ui-viewboxdialogs-infodialog-closebutton");this.Dialogs_[a].addCloseButtonImageClass("xiv-ui-viewboxdialogs-infodialog-closebutton-image");var c=this.ViewBox_.createToggleButton("LEFT",xiv.ui.ViewBoxDialogs.CSS.GENERIC_TOGGLE,a,"Info. Display",function(b){b="true"==b.getAttribute("checked");this.Dialogs_[a].setVisible(b);this.Dialogs_[a].moveToCorner("left","top");this.dispatchEvent({type:b?
xiv.ui.ViewBoxDialogs.EventType.DIALOG_OPENED:xiv.ui.ViewBoxDialogs.EventType.DIALOG_CLOSED,dialog:this.Dialogs_[a]})}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");goog.events.listen(this.Dialogs_[a],nrg.ui.Dialog.EventType.CLOSE_BUTTON_CLICKED,function(){this.ViewBox_.onToggleButtonClicked(c)}.bind(this))};
xiv.ui.ViewBoxDialogs.prototype.disposeInternal=function(){delete this.ViewBox_;goog.isDefAndNotNull(this.Dialogs_)&&(goog.object.forEach(this.Dialogs_,function(a){goog.events.removeAll(a);a.disposeInternal();a.dispose()}.bind(this)),goog.object.clear(this.Dialogs_))};goog.exportSymbol("xiv.ui.ViewBoxDialogs.EventType",xiv.ui.ViewBoxDialogs.EventType);goog.exportSymbol("xiv.ui.ViewBoxDialogs.ID_PREFIX",xiv.ui.ViewBoxDialogs.ID_PREFIX);goog.exportSymbol("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",xiv.ui.ViewBoxDialogs.CSS_SUFFIX);
goog.exportSymbol("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",xiv.ui.ViewBoxDialogs.DIALOG_KEYS);goog.exportSymbol("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",xiv.ui.ViewBoxDialogs.TOGGLED_CLASS);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.getDialogs",xiv.ui.ViewBoxDialogs.prototype.getDialogs);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.getDialog",xiv.ui.ViewBoxDialogs.prototype.getDialog);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.createToggleableDialog",xiv.ui.ViewBoxDialogs.prototype.createToggleableDialog);
goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.createDialogs",xiv.ui.ViewBoxDialogs.prototype.createDialogs);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",xiv.ui.ViewBoxDialogs.prototype.setInUseSelect);
goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",xiv.ui.ViewBoxDialogs.prototype.showInUseDialog);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.update",xiv.ui.ViewBoxDialogs.prototype.update);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",xiv.ui.ViewBoxDialogs.prototype.toggleVisible);goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",xiv.ui.ViewBoxDialogs.prototype.getHelpDialog);
goog.exportSymbol("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",xiv.ui.ViewBoxDialogs.prototype.disposeInternal);xiv.ui.ViewBoxInteractorHandler=function(a,b,c,d){goog.events.EventTarget.call(this);this.ViewBox_=a;this.Renderer_=b;this.LayoutHandler_=c;this.Dialogs_=d;this.mouseXY_={prev:null,curr:null};this.mouseDown_={left:!1,middle:!1,right:!1};this.mouseEvents_={up:{},down:{},out:{},over:{}};this.setDialogEvents_();this.listenForKeyboardEvents_();this.zoomFollower_=goog.dom.createDom("div",{id:"mousefollower"});goog.dom.classes.add(this.zoomFollower_,this.constructor.CURSOR_CSS.ZOOM_FOLLOWER);this.zoomFollower_.innerHTML=
"Zoom In (drag up)<br>Zoom Out (drag down)<br>";goog.dom.append(this.ViewBox_.getViewFrame(),this.zoomFollower_)};goog.inherits(xiv.ui.ViewBoxInteractorHandler,goog.events.EventTarget);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler",xiv.ui.ViewBoxInteractorHandler);xiv.ui.ViewBoxInteractorHandler.EventType={RIGHT_ARROW:goog.events.getUniqueId("right_arrow"),LEFT_ARROW:goog.events.getUniqueId("left_arrow"),UP_ARROW:goog.events.getUniqueId("up_arrow"),DOWN_ARROW:goog.events.getUniqueId("up_arrow")};
xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE={CROSSHAIRS:"Crosshairs_"+goog.string.createUniqueString(),SETTINGS:"Settings_"+goog.string.createUniqueString(),TWODPAN:"TwoDPan_"+goog.string.createUniqueString(),TWODZOOM:"TwoDZoom_"+goog.string.createUniqueString()};xiv.ui.ViewBoxInteractorHandler.CSS={GENERIC_TOGGLE:"xiv-ui-viewboxinteractorhandler-generic-toggle",GENERIC_DIALOG:"xiv-ui-viewboxinteractorhandler-generic-dialog",GENERIC_ZIPPYTREE:"xiv-ui-viewboxinteractorhandler-generic-zippytree"};
xiv.ui.ViewBoxInteractorHandler.CURSOR_CSS={ZOOM_FOLLOWER:"xiv-ui-viewboxinteractorhandler-zoom-follower",GRAB:"xiv-ui-viewboxinteractorhandler-viewframe-grab",GRAB_CUSTOM:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",GRABBING:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",GRABBING_CUSTOM:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",ZOOM_IN:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",ZOOM_OUT:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};
xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY="Orientation_"+goog.string.createUniqueString();xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT="_";xiv.ui.ViewBoxInteractorHandler.prototype.keyHandler_=null;xiv.ui.ViewBoxInteractorHandler.prototype.viewableCtrls_=null;xiv.ui.ViewBoxInteractorHandler.prototype.zippyTrees_=null;xiv.ui.ViewBoxInteractorHandler.prototype.zooming_=!1;xiv.ui.ViewBoxInteractorHandler.prototype.panning_=!1;xiv.ui.ViewBoxInteractorHandler.prototype.dialogKeys_={};
xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors=function(){this.createViewableCtrls();this.setVolumeSlidersHalfway_();this.adjustToPredefinedSliceIndices_();this.createSettingsDialog();this.createCrosshairToggle(!1);this.createTwoDPanToggle();this.createTwoDZoomToggle();this.listenForMouseEvents_()};
xiv.ui.ViewBoxInteractorHandler.prototype.listenForKeyboardEvents_=function(){var a=document.body;this.keyHandler_=new goog.events.KeyHandler;this.keyHandler_.attach(a);goog.events.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.onKey_.bind(this))};xiv.ui.ViewBoxInteractorHandler.prototype.clearCursorStyle_=function(a){var b=this.ViewBox_.getViewFrame();goog.object.forEach(this.constructor.CURSOR_CSS,function(a,d){goog.dom.classes.remove(b,a)})};
xiv.ui.ViewBoxInteractorHandler.prototype.setCursorCss_=function(a,b,c){a=a?goog.dom.classes.add:goog.dom.classes.remove;a(this.ViewBox_.getViewFrame(),b);goog.isDefAndNotNull(c)&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&a(this.ViewBox_.getViewFrame(),c)};
xiv.ui.ViewBoxInteractorHandler.prototype.setCursorGrab_=function(a){this.setCursorCss_(!0,this.constructor.CURSOR_CSS.GRAB,this.constructor.CURSOR_CSS.GRAB_CUSTOM);this.setCursorCss_(!1,this.constructor.CURSOR_CSS.GRABBING,this.constructor.CURSOR_CSS.GRABBING_CUSTOM)};xiv.ui.ViewBoxInteractorHandler.prototype.setCursorGrabbing_=function(a){this.setCursorCss_(!1,this.constructor.CURSOR_CSS.GRAB,this.constructor.CURSOR_CSS.GRAB_CUSTOM);this.setCursorCss_(!0,this.constructor.CURSOR_CSS.GRABBING,this.constructor.CURSOR_CSS.GRABBING_CUSTOM)};
xiv.ui.ViewBoxInteractorHandler.prototype.setCursorZoomIn_=function(a){this.setCursorCss_(!1,this.constructor.CURSOR_CSS.ZOOM_OUT);this.setCursorCss_(!0,this.constructor.CURSOR_CSS.ZOOM_IN)};xiv.ui.ViewBoxInteractorHandler.prototype.setCursorZoomOut_=function(a){this.setCursorCss_(!0,this.constructor.CURSOR_CSS.ZOOM_OUT);this.setCursorCss_(!1,this.constructor.CURSOR_CSS.ZOOM_IN)};
xiv.ui.ViewBoxInteractorHandler.prototype.onMouseOver_=function(a){this.currMouseRenderer_=a.target;this.mouseXY_.prev=this.mouseXY_.curr;this.mouseXY_.curr=a.mousePosition;if(null!=this.mouseXY_.prev){if(a.shiftDown){if(!this.shiftDown_){this.shiftDown_=!0;this.onRenderPlaneShiftDown_();return}}else this.shiftDown_&&(this.showInteractors(),this.syncSlidersToVolume_(),this.syncAllCrosshairs(),this.shiftDown_=!1);(new goog.math.Vec2(this.mouseXY_.curr[0],this.mouseXY_.curr[1])).add(new goog.math.Vec2(this.mouseXY_.prev[0],
this.mouseXY_.prev[1]));Math.sqrt(Math.pow(this.mouseXY_.curr[0]-this.mouseXY_.prev[0],2)+Math.pow(this.mouseXY_.curr[1]-this.mouseXY_.prev[1],2));a=this.mouseXY_.curr[0]-this.mouseXY_.prev[0];var b=this.mouseXY_.curr[1]-this.mouseXY_.prev[1];this.zoomFollower_.style.visibility="hidden";if(this.zooming_){if(goog.dom.removeNode(this.zoomFollower_),goog.dom.append(this.currMouseRenderer_.container,this.zoomFollower_),this.zoomFollower_.style.visibility="visible",this.zoomFollower_.style.left=this.mouseXY_.curr[0]+
20+"px",this.zoomFollower_.style.top=this.mouseXY_.curr[1]+"px",this.setCursorZoomIn_(),this.mouseDown_.left)this.onRenderPlaneZoom_(a,b)}else if(this.panning_&&(this.setCursorGrab_(),this.mouseDown_.left))this.onRenderPlanePan_(a,b)}};xiv.ui.ViewBoxInteractorHandler.prototype.onMouseOut_=function(a){this.clearCursorStyle_();this.currMouseRenderer_=null;this.zoomFollower_.style.visibility="hidden"};
xiv.ui.ViewBoxInteractorHandler.prototype.onMouseDown_=function(a){0==a.button?this.mouseDown_.left=!0:1==a.button?this.this.mouseDown_.middle=!0:2==a.button&&(this.mouseDown_.right=!0)};xiv.ui.ViewBoxInteractorHandler.prototype.onMouseUp_=function(a){0==a.button?this.mouseDown_.left=!1:1==a.button?this.this.mouseDown_.middle=!1:2==a.button&&(this.mouseDown_.right=!1)};
xiv.ui.ViewBoxInteractorHandler.prototype.onKey_=function(a){window.console.log("On key:",a.keyCode,this.dialogKeys_);if(-3<=a.keyCode-40&&0>=a.keyCode-40)this.onArrowKey_(a.keyCode);else switch(a.keyCode){case 27:a=this.ViewBox_.getToggleButton(this.constructor.TOGGLEABLE.TWODPAN);"true"==a.getAttribute("checked")&&this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.TWODPAN);var b=this.ViewBox_.getToggleButton(this.constructor.TOGGLEABLE.TWODZOOM);"true"==b.getAttribute("checked")&&this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.TWODZOOM);
window.console.log(a.getAttribute("checked"),b.getAttribute("checked"),"true"==a.checked,"true"==b.checked);break;case 90:this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.TWODZOOM);break;case 72:case 80:this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.TWODPAN);break;case 66:case 76:this.ViewBox_.fireToggleButton(this.dialogKeys_.levels);break;case 86:this.ViewBox_.fireToggleButton(this.dialogKeys_.volumes);break;case 77:this.ViewBox_.fireToggleButton(this.dialogKeys_.meshes);break;
case 65:this.ViewBox_.fireToggleButton(this.dialogKeys_.annotations);break;case 67:this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.CROSSHAIRS);break;case 83:this.ViewBox_.fireToggleButton(this.dialogKeys_[this.constructor.TOGGLEABLE.SETTINGS]);break;case 191:a.shiftKey&&this.ViewBox_.fireToggleButton(xiv.ui.ViewBoxDialogs.DIALOG_KEYS.HELP);break;case 73:this.ViewBox_.fireToggleButton(xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INFO)}};
xiv.ui.ViewBoxInteractorHandler.prototype.onArrowKey_=function(a){this.incrementFrameSlider_(this.currMouseRenderer_,40==a||37==a?-1:1)};xiv.ui.ViewBoxInteractorHandler.prototype.onRenderPlaneZoom_=function(a,b){this.clearCursorStyle_();var c=function(){this.setCursorZoomIn_();this.currMouseRenderer_.zoomIn()}.bind(this),d=function(){this.setCursorZoomOut_();this.currMouseRenderer_.zoomOut()}.bind(this);Math.abs(a)>Math.abs(b)?1<a?c():d():0>b?c():d();this.syncZoomDisplayToRenderer_();this.syncAllCrosshairs()};
xiv.ui.ViewBoxInteractorHandler.prototype.onRenderPlanePan_=function(a,b){this.setCursorGrabbing_();this.currMouseRenderer_.getCamera().pan([-1*a,-1*b]);this.syncAllCrosshairs()};xiv.ui.ViewBoxInteractorHandler.prototype.MouseX_=0;xiv.ui.ViewBoxInteractorHandler.prototype.MouseY_=0;xiv.ui.ViewBoxInteractorHandler.prototype.storeMouseCoords_=function(a){this.MouseX_=a.clientX;this.MouseY_=a.clientY;window.console.log("store mouse coords",this.MouseX_,this.MouseY_)};
xiv.ui.ViewBoxInteractorHandler.prototype.listenForMouseEvents_=function(){this.loopIR_(function(a,b,c,d){this.mouseEvents_.over[b]=goog.events.listen(a.getRenderer(),goog.events.EventType.MOUSEOVER,this.onMouseOver_.bind(this));a=a.getRenderer().getCanvas();this.mouseEvents_.out[b]=goog.events.listen(a,goog.events.EventType.MOUSEOUT,this.onMouseOut_.bind(this));this.mouseEvents_.down[b]=goog.events.listen(a,goog.events.EventType.MOUSEDOWN,this.onMouseDown_.bind(this));this.mouseEvents_.up[b]=goog.events.listen(a,
goog.events.EventType.MOUSEUP,this.onMouseUp_.bind(this))}.bind(this))};xiv.ui.ViewBoxInteractorHandler.prototype.incrementFrameSlider_=function(a,b){this.loopIR_(function(a,d,e,f){e.SLIDER.setValue(e.SLIDER.getValue()+b)}.bind(this),a.getOrientation())};
xiv.ui.ViewBoxInteractorHandler.prototype.loopIR_=function(a,b){if(goog.isDefAndNotNull(this.Renderer_)){var c=this.LayoutHandler_.getMasterInteractors(),d=function(b,d){goog.isDefAndNotNull(c)&&goog.isDefAndNotNull(c[d])&&a(b,d,c[d],b.getVolume())};if(goog.isString(b)){var e=this.Renderer_.getPlaneByOrientation(b);if(!goog.isDefAndNotNull(e))throw Error("Invalid plane: ",e);d(this.Renderer_.getPlaneByOrientation(b),b)}else goog.object.forEach(this.Renderer_.getPlanes(),function(a,b){d(a,b)}.bind(this))}};
xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle=function(){this.ViewBox_.createToggleButton("LEFT",this.constructor.CSS.GENERIC_TOGGLE,this.constructor.TOGGLEABLE.TWODZOOM,"2D Zoom",function(a,b){this.clearCursorStyle_();var c="true"==a.getAttribute("checked").toString();if(this.zooming_=c)this.ViewBox_.untoggle(this.constructor.TOGGLEABLE.TWODPAN),this.setCursorZoomIn_()}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.TWODZOOM)};
xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle=function(){this.ViewBox_.createToggleButton("LEFT",this.constructor.CSS.GENERIC_TOGGLE,this.constructor.TOGGLEABLE.TWODPAN,"2D Pan",function(a){this.clearCursorStyle_();if(this.panning_=a="true"==a.getAttribute("checked").toString())this.setCursorGrab_(),this.ViewBox_.untoggle(this.constructor.TOGGLEABLE.TWODZOOM)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.TWODPAN)};
xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle=function(a){this.ViewBox_.createToggleButton("LEFT",this.constructor.CSS.GENERIC_TOGGLE,this.constructor.TOGGLEABLE.CROSSHAIRS,"Toggle Crosshairs",function(a){this.toggleCrosshairsVisible("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.ViewBox_.fireToggleButton(this.constructor.TOGGLEABLE.CROSSHAIRS)};
xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog=function(){var a=this.constructor.TOGGLEABLE.SETTINGS;this.dialogKeys_[a]=a+this.constructor.DIALOG_SPLIT+goog.string.createUniqueString();this.Dialogs_.createToggleableDialog(this.dialogKeys_[a],this.constructor.CSS.GENERIC_DIALOG,this.constructor.CSS.GENERIC_TOGGLE,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.zippyTrees_[a]=new nrg.ui.ScrollableZippyTree;this.zippyTrees_[a].render();var b=this.zippyTrees_[a].getElement();
goog.dom.classes.add(b,this.constructor.CSS.GENERIC_ZIPPYTREE);this.Dialogs_.getDialogs()[this.dialogKeys_[a]].getElement().appendChild(b);this.zippyTrees_[a].expandAll();b=new xiv.ui.ctrl.CheckboxController;b.render();b.setLabel("Enable 3D Rendering");b.getComponent().setChecked(!0);this.zippyTrees_[a].addContents(b.getElement(),"3D Rendering");goog.events.listen(b,xiv.ui.ctrl.XtkController.EventType.CHANGE,function(a){this.Renderer_.setPlaneEnabled("V",a.checked)}.bind(this));return b};
xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs=function(){this.loopIR_(function(a,b,c,d){this.syncCrosshairsToVolume_(b,d)}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.syncVolumeCtrlsToRenderer_=function(){goog.isDefAndNotNull(this.Renderer_)&&(this.loopIR_(function(a,b,c,d){var e=c.SLIDER,f=c.FRAME_DISPLAY,g=c.ZOOM_DISPLAY;c=c.CROSSHAIRS;e[this.constructor.ORIENTATION_KEY]=b;f[this.constructor.ORIENTATION_KEY]=b;g[this.constructor.ORIENTATION_KEY]=b;c[this.constructor.ORIENTATION_KEY]=b;this.syncSlidersToVolume_(!0);this.syncVolumeToSlider_(e,d);this.syncCrosshairsToVolume_(e[this.constructor.ORIENTATION_KEY],d);this.syncFrameDisplayToSlider_(e,
d);goog.isDefAndNotNull(a.getRenderer())&&(goog.events.listen(a.getRenderer(),xiv.vis.XtkEngine.EventType.ZOOM,function(a){this.syncZoomDisplayToRenderer_()}.bind(this)),goog.events.listen(e,nrg.ui.Slider.EventType.SLIDE,function(a){this.syncVolumeToSlider_(a.target,d);this.syncCrosshairsToVolume_(a.target[this.constructor.ORIENTATION_KEY],d);this.syncFrameDisplayToSlider_(a.target,d)}.bind(this)),goog.events.listen(f,xiv.ui.layouts.interactors.InputController.EventType.INPUT,function(a){this.syncSliderToFrameDisplay_(a.target,
d);this.syncAllCrosshairs()}.bind(this)),goog.events.listen(g,xiv.ui.layouts.interactors.InputController.EventType.INPUT,function(b){this.syncRendererToZoomDisplay_(g,a);this.syncAllCrosshairs()}.bind(this)))}.bind(this)),this.Renderer_.updateControllers())};xiv.ui.ViewBoxInteractorHandler.prototype.setDialogEvents_=function(){goog.events.listen(this.Dialogs_,xiv.ui.ViewBoxDialogs.EventType.DIALOG_OPENED,this.onControllerDialogOpened_.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.updateLevelControllers_=function(a){a instanceof xiv.ui.ctrl.Histogram?a.update():a.getComponent().updateStyle()};xiv.ui.ViewBoxInteractorHandler.prototype.updateVolumeToggle_=function(a,b){a.getComponent().checked=a.getXObj()[xiv.vis.RenderEngine.SELECTED_VOL_KEY]||!1;goog.isDefAndNotNull(this.volumeToggles_)||(this.volumeToggles_=[]);-1==this.volumeToggles_.indexOf(a)&&this.volumeToggles_.push(a)};
xiv.ui.ViewBoxInteractorHandler.prototype.updateLabelMapToggle_=function(a,b){a.getXObj()[xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY]?a.getXObj().labelmap.visible&&!a.getComponent().isChecked()&&a.getComponent().setChecked(!0):(goog.dom.removeNode(a.getElement()),a.getElement().style.visibility="hidden",a.getElement().style.height="0px");this.zippyTrees_[b].mapSliderToContents()};
xiv.ui.ViewBoxInteractorHandler.prototype.updateVolumeControllers_=function(a,b){var c=b.split(this.constructor.DIALOG_SPLIT)[0];a instanceof xiv.ui.ctrl.RadioButtonController?this.updateVolumeToggle_(a,c):"Show Label Map"==a.getLabel().innerHTML&&this.updateLabelMapToggle_(a,c);a.update()};
xiv.ui.ViewBoxInteractorHandler.prototype.updateControllers_=function(a){var b=a.split(this.constructor.DIALOG_SPLIT)[0];this.zippyTrees_[b].mapSliderToContents();goog.object.forEach(this.viewableCtrls_[b],function(c,d){goog.isDefAndNotNull(c)&&goog.array.forEach(c,function(c){switch(b){case "levels":this.updateLevelControllers_(c,a);break;case "volumes":this.updateVolumeControllers_(c,a)}}.bind(this))}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.onControllerDialogOpened_=function(a,b){if(goog.isDefAndNotNull(a.dialogKey)||goog.isDefAndNotNull(b)){var c=goog.isDefAndNotNull(b)?b:a.dialogKey;this.updateControllers_(c)}};
xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel=function(){window.console.log("Applying auto window/level");var a,b={};goog.array.forEach(this.viewableCtrls_.levels.all,function(c,d){levelMax=hist=null;a=c.getFolders();folderStr="";goog.array.forEach(a,function(a){folderStr+=a});goog.isDefAndNotNull(b[folderStr])||(b[folderStr]={});c instanceof xiv.ui.ctrl.Histogram?b[folderStr].hist=c:-1<c.getLabel().innerHTML.indexOf("Level Max")&&(b[folderStr].levelMax=c)}.bind(this));goog.object.forEach(b,
function(a){var b=a.hist.getLevelByPixelThreshold(xiv.ui.ctrl.Histogram.LEVEL_CUTOFF);a.levelMax.getComponent().setValue(b)})};xiv.ui.ViewBoxInteractorHandler.prototype.syncVolumeToSlider_=function(a,b){if(goog.isDefAndNotNull(b)){var c=a[this.constructor.ORIENTATION_KEY],c="Y"==c||"Z"==c?a.getMaximum()-a.getValue()-1:a.getValue()-1;b["index"+a[this.constructor.ORIENTATION_KEY]]=c}};
xiv.ui.ViewBoxInteractorHandler.prototype.adjustCrosshairs_=function(a,b,c,d){var e=this.Renderer_.getPlaneByOrientation(a).getRenderer();a=this.LayoutHandler_.getCurrentLayout().getLayoutFrameByTitle(a);var f=null;goog.isDefAndNotNull(a)&&(f=a[xiv.ui.layouts.Layout.INTERACTORS.CROSSHAIRS]);goog.isDefAndNotNull(f)&&("vertical"==b?f.setX(e.getVerticalSliceX(c,d)):"horizontal"==b&&f.setY(e.getHorizontalSliceY(c,d)))};
xiv.ui.ViewBoxInteractorHandler.prototype.syncCrosshairsToVolumeX_=function(a){a=a.indexX;this.adjustCrosshairs_("Y","vertical",a,!0);this.adjustCrosshairs_("Z","vertical",a,!0)};xiv.ui.ViewBoxInteractorHandler.prototype.syncCrosshairsToVolumeY_=function(a){a=a.indexY;this.adjustCrosshairs_("X","vertical",a,!1);this.adjustCrosshairs_("Z","horizontal",a,!1)};
xiv.ui.ViewBoxInteractorHandler.prototype.syncCrosshairsToVolumeZ_=function(a){a=a.indexZ;this.adjustCrosshairs_("X","horizontal",a,!1);this.adjustCrosshairs_("Y","horizontal",a,!1)};xiv.ui.ViewBoxInteractorHandler.prototype.syncCrosshairsToVolume_=function(a,b){if(goog.isDefAndNotNull(b))switch(a){case "X":this.syncCrosshairsToVolumeX_(b);break;case "Y":this.syncCrosshairsToVolumeY_(b);break;case "Z":this.syncCrosshairsToVolumeZ_(b)}};
xiv.ui.ViewBoxInteractorHandler.prototype.syncFrameDisplayToSlider_=function(a,b){this.loopIR_(function(a,b,e,f){a=e.FRAME_DISPLAY;e=e.SLIDER;a.setMaximum(e.getMaximum());a.setValue(e.getValue())}.bind(this),a[this.constructor.ORIENTATION_KEY])};xiv.ui.ViewBoxInteractorHandler.prototype.syncRendererToZoomDisplay_=function(a,b){b.getRenderer().setZoom(a.getValue()/100)};
xiv.ui.ViewBoxInteractorHandler.prototype.syncZoomDisplayToRenderer_=function(){this.loopIR_(function(a,b,c){c.ZOOM_DISPLAY&&a.getRenderer()&&(a=a.getRenderer().getZoom(),c.ZOOM_DISPLAY.getValue(),c.ZOOM_DISPLAY.setValue(Math.round(100*a)))}.bind(this))};xiv.ui.ViewBoxInteractorHandler.prototype.syncSliderToFrameDisplay_=function(a,b){goog.isDefAndNotNull(b)&&this.loopIR_(function(b,d,e,f){e.SLIDER.setValue(a.getValue())}.bind(this),a[this.constructor.ORIENTATION_KEY])};
xiv.ui.ViewBoxInteractorHandler.prototype.setVolumeSlidersHalfway_=function(){this.loopIR_(function(a,b,c,d){goog.isDefAndNotNull(c.SLIDER)&&c.SLIDER.setValue(c.SLIDER.getMaximum()/2)}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.adjustToPredefinedSliceIndices_=function(){this.loopIR_(function(a,b,c,d){if(goog.isDefAndNotNull(d[xiv.vis.XtkEngine.SLICE_TO_RAS_KEY])&&goog.isDefAndNotNull(c.SLIDER)){slider=c.SLIDER;orientation=slider[this.constructor.ORIENTATION_KEY];a=d.bbox;d=d[xiv.vis.XtkEngine.SLICE_TO_RAS_KEY];var e;"X"==orientation?(e=a[1]-a[0],e=(d.sagittalSliceCenter[0]-a[0])/e):"Y"==orientation?(e=a[3]-a[2],e=(d.coronalSliceCenter[1]-a[2])/e):"Z"==orientation&&(e=a[5]-a[4],e=
(d.axialSliceCenter[2]-a[4])/e);slider.setValue(Math.round(slider.getMaximum()*e)+1)}}.bind(this))};xiv.ui.ViewBoxInteractorHandler.prototype.syncSlidersToVolume_=function(a){var b,c;this.loopIR_(function(d,e,f,g){goog.isDefAndNotNull(f.SLIDER)&&(c=f.SLIDER,b=c[this.constructor.ORIENTATION_KEY],goog.isDefAndNotNull(g)&&(!0===a&&(c.setMaximum(d.getRenderer().getNumberSlices()),c.setMinimum(1)),c.setValue(g["index"+b]+1)))})};
xiv.ui.ViewBoxInteractorHandler.prototype.onRenderPlaneShiftDown_=function(a){this.hideInteractors();this.syncSlidersToVolume_()};xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize=function(){this.loopIR_(function(a,b,c,d){this.syncSliderToFrameDisplay_(c.FRAME_DISPLAY,d);this.syncZoomDisplayToRenderer_()}.bind(this));this.syncAllCrosshairs()};
xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible=function(a){var b=!1===a?0:1;this.loopIR_(function(a,d,e){nrg.fx.fadeTo(e.SLIDER.getElement(),200,b);nrg.fx.fadeTo(e.FRAME_DISPLAY.getElement(),200,b);nrg.fx.fadeTo(e.CROSSHAIRS.vertical,200,b);nrg.fx.fadeTo(e.CROSSHAIRS.horizontal,200,b);nrg.fx.fadeTo(e.ZOOM_DISPLAY.getElement(),200,b)}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors=function(){this.toggleInteractorsVisible(!1);this.Dialogs_.toggleVisible(xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INFO,!1)};xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors=function(){this.toggleInteractorsVisible(!0);this.Dialogs_.toggleVisible(xiv.ui.ViewBoxDialogs.DIALOG_KEYS.INFO,!0)};xiv.ui.ViewBoxInteractorHandler.prototype.update=function(){this.LayoutHandler_.updateInteractors()};
xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible=function(a){var b=!0==a?"visible":"hidden";this.loopIR_(function(a,d,e,f){goog.isDefAndNotNull(e.CROSSHAIRS)&&(e.CROSSHAIRS.vertical.style.visibility=b,e.CROSSHAIRS.horizontal.style.visibility=b)}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles=function(){goog.isDefAndNotNull(this.LayoutHandler_)&&goog.isDefAndNotNull(this.Renderer_)&&this.loopIR_(function(a,b,c,d){if(goog.isDefAndNotNull(c)){var e=c.SLIDER;c=c.FRAME_DISPLAY;e[this.constructor.ORIENTATION_KEY]=b;c[this.constructor.ORIENTATION_KEY]=b;goog.isDefAndNotNull(a.getRenderer())&&(this.syncSliderToFrameDisplay_(c,d),e.updateStyle())}}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler=function(a){a.setMenuIconSrc(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");goog.object.forEach({Sagittal:{OBJ:xiv.ui.layouts.Sagittal,ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{OBJ:xiv.ui.layouts.Coronal,ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{OBJ:xiv.ui.layouts.Transverse,ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{OBJ:xiv.ui.layouts.ThreeD,
ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{OBJ:xiv.ui.layouts.Conventional,ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{OBJ:xiv.ui.layouts.FourUp,ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},"2D Row":{OBJ:xiv.ui.layouts.TwoDRow,ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{OBJ:xiv.ui.layouts.TwoDWidescreen,ICON:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.addMenuItem(c,
b.ICON);this.LayoutHandler_.addLayout(c,b.OBJ);"Four-Up"==c&&this.LayoutHandler_.setMasterLayout(c)}.bind(this));goog.events.listen(a,nrg.ui.SlideInMenu.EventType.ITEM_SELECTED,this.onMenuItemSelected_.bind(this))};xiv.ui.ViewBoxInteractorHandler.prototype.onMenuItemSelected_=function(a){this.LayoutHandler_.setLayout(a.title);goog.isDefAndNotNull(this.Dialogs_)&&goog.isDefAndNotNull(this.Dialogs_.getHelpDialog())&&this.Dialogs_.getHelpDialog().setLayoutButton(a.target.getMenuIcon().src)};
xiv.ui.ViewBoxInteractorHandler.prototype.setZippyTreeEvents_=function(a){goog.events.listen(this.zippyTrees_[a].getZippyTree(),nrg.ui.ZippyNode.EventType.CLICKED,function(b){this.onControllerDialogOpened_(b,this.dialogKeys_[a])}.bind(this))};xiv.ui.ViewBoxInteractorHandler.prototype.createZippyTree_=function(a){this.zippyTrees_[a]=new nrg.ui.ScrollableZippyTree;this.zippyTrees_[a].render()};
xiv.ui.ViewBoxInteractorHandler.prototype.createDialogKey_=function(a){this.dialogKeys_[a]=a+this.constructor.DIALOG_SPLIT+goog.string.createUniqueString()};xiv.ui.ViewBoxInteractorHandler.prototype.setVolumeToggleEvents_=function(a){goog.events.listen(a,xiv.ui.ctrl.XtkController.EventType.CHANGE,function(a){goog.array.forEach(this.volumeToggles_,function(c){var d=c.getXObj();c!==a.target?(c.getComponent().checked=!1,d.visible=!1):(d.visible=!0,this.Renderer_.render2D(d))}.bind(this))}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.addControlsToZippyTree_=function(a){goog.object.forEach(this.viewableCtrls_[a],function(b,c){goog.isArray(b)&&goog.array.forEach(b,function(b){var e=b.getFolders()||[];"all"!==c&&0<e.length&&e.push(c);this.zippyTrees_[a].addContents(b.getElement(),e);b instanceof xiv.ui.ctrl.RadioButtonController&&this.setVolumeToggleEvents_(b,a)}.bind(this))}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.createControllerZippyTrees_=function(){this.zippyTrees_=xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject();this.dialogKeys_=goog.object.clone(this.zippyTrees_);goog.object.forEach(this.zippyTrees_,function(a,b){this.createZippyTree_(b);this.createDialogKey_(b);this.addControlsToZippyTree_(b);this.setZippyTreeEvents_(b)}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls=function(){this.viewableCtrls_=this.Renderer_.getControllerTree();this.createControllerZippyTrees_();this.createControllerDialogs_();this.syncVolumeCtrlsToRenderer_()};
xiv.ui.ViewBoxInteractorHandler.prototype.createControllerDialogs_=function(){goog.object.forEach(this.zippyTrees_,function(a,b){var c=!1;goog.object.forEach(this.viewableCtrls_[b],function(a,b){goog.isDefAndNotNull(a)&&goog.isArray(a)&&0<a.length&&(c=!0)}.bind(this));if(c){this.Dialogs_.createToggleableDialog(this.dialogKeys_[b],this.constructor.CSS.GENERIC_DIALOG,this.constructor.CSS.GENERIC_TOGGLE,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+goog.string.toTitleCase(b)+".png",goog.string.toTitleCase(b),
!1,!1);var d=this.zippyTrees_[b].getElement();goog.dom.classes.add(d,this.constructor.CSS.GENERIC_ZIPPYTREE);this.Dialogs_.getDialogs()[this.dialogKeys_[b]].getElement().appendChild(d);1<this.zippyTrees_[b].getZippyTree().getTopLevelNodes().length?this.zippyTrees_[b].collapseAll():this.zippyTrees_[b].expandAll()}}.bind(this))};
xiv.ui.ViewBoxInteractorHandler.prototype.dispose=function(){xiv.ui.ViewBoxInteractorHandler.superClass_.dispose.call(this);goog.isDefAndNotNull(this.keyHandler_)&&(window.console.log("disposing key handler"),this.keyHandler_.dispose(),delete this.keyHandler_);goog.isDefAndNotNull(this.dialogKeys_)&&goog.object.clear(this.dialogKeys_);delete this.dialogKeys_;goog.isDefAndNotNull(this.zippyTrees_)&&(goog.object.forEach(this.zippyTrees_,function(a){a.dispose()}),goog.object.clear(this.zippyTrees_));
delete this.zippyTrees_;goog.object.clear(this.mouseXY_);delete this.mouseXY_;goog.object.forEach(this.mouseEvents_,function(a){goog.object.forEach(a,function(a){goog.events.unlistenByKey(a);delete a});goog.object.clear(a)});goog.object.clear(this.mouseEvents_);delete this.mouseEvents_;goog.dom.removeNode(this.zoomFollower_);delete this.zoomFollower_;delete this.viewableCtrls_;delete this.zooming_;delete this.panning_;delete this.ViewBox_;delete this.Renderer_;delete this.LayoutHandler_;delete this.Dialogs_};
goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.EventType",xiv.ui.ViewBoxInteractorHandler.EventType);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT",xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT);
goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle);
goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs);
goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible);
goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.update",xiv.ui.ViewBoxInteractorHandler.prototype.update);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible);
goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler);goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls);
goog.exportSymbol("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",xiv.ui.ViewBoxInteractorHandler.prototype.dispose);goog.structs.InversionMap=function(a,b,c){this.rangeArray=null;if(a.length!=b.length)return null;this.storeInversion_(a,c);this.values=b};goog.structs.InversionMap.prototype.storeInversion_=function(a,b){this.rangeArray=a;for(var c=1;c<a.length;c++)null==a[c]?a[c]=a[c-1]+1:b&&(a[c]+=a[c-1])};
goog.structs.InversionMap.prototype.spliceInversion=function(a,b,c){a=new goog.structs.InversionMap(a,b,c);c=a.rangeArray[0];var d=goog.array.peek(a.rangeArray);b=this.getLeast(c);d=this.getLeast(d);c!=this.rangeArray[b]&&b++;c=d-b+1;goog.partial(goog.array.splice,this.rangeArray,b,c).apply(null,a.rangeArray);goog.partial(goog.array.splice,this.values,b,c).apply(null,a.values)};goog.structs.InversionMap.prototype.at=function(a){a=this.getLeast(a);return 0>a?null:this.values[a]};
goog.structs.InversionMap.prototype.getLeast=function(a){for(var b=this.rangeArray,c=0,d=b.length;8<d-c;){var e=d+c>>1;b[e]<=a?c=e:d=e}for(;c<d&&!(a<b[c]);++c);return c-1};goog.i18n.GraphemeBreak={};goog.i18n.GraphemeBreak.property={ANY:0,CONTROL:1,EXTEND:2,PREPEND:3,SPACING_MARK:4,INDIC_CONSONANT:5,VIRAMA:6,L:7,V:8,T:9,LV:10,LVT:11,CR:12,LF:13,REGIONAL_INDICATOR:14};goog.i18n.GraphemeBreak.inversions_=null;
goog.i18n.GraphemeBreak.applyLegacyBreakRules_=function(a,b){var c=goog.i18n.GraphemeBreak.property;return a==c.CR&&b==c.LF?!1:a==c.CONTROL||a==c.CR||a==c.LF||b==c.CONTROL||b==c.CR||b==c.LF?!0:a==c.L&&(b==c.L||b==c.V||b==c.LV||b==c.LVT)||!(a!=c.LV&&a!=c.V||b!=c.V&&b!=c.T)||(a==c.LVT||a==c.T)&&b==c.T||b==c.EXTEND||b==c.VIRAMA||a==c.VIRAMA&&b==c.INDIC_CONSONANT?!1:!0};
goog.i18n.GraphemeBreak.getBreakProp_=function(a){if(44032<=a&&55203>=a){var b=goog.i18n.GraphemeBreak.property;return 16==a%28?b.LV:b.LVT}goog.i18n.GraphemeBreak.inversions_||(goog.i18n.GraphemeBreak.inversions_=new goog.structs.InversionMap([0,10,1,2,1,18,95,33,13,1,594,112,275,7,263,45,1,1,1,2,1,2,1,1,56,5,11,11,48,21,16,1,101,7,1,1,6,2,2,1,4,33,1,1,1,30,27,91,11,58,9,34,4,1,9,1,3,1,5,43,3,136,31,1,17,37,1,1,1,1,3,8,4,1,2,1,7,8,2,2,21,8,1,2,17,39,1,1,1,2,6,6,1,9,5,4,2,2,12,2,15,2,1,17,39,2,3,12,
4,8,6,17,2,3,14,1,17,39,1,1,3,8,4,1,20,2,29,1,2,17,39,1,1,2,1,6,6,9,6,4,2,2,13,1,16,1,18,41,1,1,1,12,1,9,1,41,3,17,37,4,3,5,7,8,3,2,8,2,30,2,17,39,1,1,1,1,2,1,3,1,5,1,8,9,1,3,2,30,2,17,38,3,1,2,5,7,1,9,1,10,2,30,2,22,48,5,1,2,6,7,19,2,13,46,2,1,1,1,6,1,12,8,50,46,2,1,1,1,9,11,6,14,2,58,2,27,1,1,1,1,1,4,2,49,14,1,4,1,1,2,5,48,9,1,57,33,12,4,1,6,1,2,2,2,1,16,2,4,2,2,4,3,1,3,2,7,3,4,13,1,1,1,2,6,1,1,14,1,98,96,72,88,349,3,931,15,2,1,14,15,2,1,14,15,2,15,15,14,35,17,2,1,7,8,1,2,9,1,1,9,1,45,3,155,1,87,
31,3,4,2,9,1,6,3,20,19,29,44,9,3,2,1,69,23,2,3,4,45,6,2,1,1,1,8,1,1,1,2,8,6,13,128,4,1,14,33,1,1,5,1,1,5,1,1,1,7,31,9,12,2,1,7,23,1,4,2,2,2,2,2,11,3,2,36,2,1,1,2,3,1,1,3,2,12,36,8,8,2,2,21,3,128,3,1,13,1,7,4,1,4,2,1,203,64,523,1,2,2,24,7,49,16,96,33,3070,3,141,1,96,32,554,6,105,2,30164,4,1,10,33,1,80,2,272,1,3,1,4,1,23,2,2,1,24,30,4,4,3,8,1,1,13,2,16,34,16,1,27,18,24,24,4,8,2,23,11,1,1,12,32,3,1,5,3,3,36,1,2,4,2,1,3,1,69,35,6,2,2,2,2,12,1,8,1,1,18,16,1,3,6,1,5,48,1,1,3,2,2,5,2,1,1,32,9,1,2,2,5,1,
1,201,14,2,1,1,9,8,2,1,2,1,2,1,1,1,18,11184,27,49,1028,1024,6942,1,737,16,16,7,216,1,158,2,89,3,513,1,2051,15,40,7,1,1472,1,1,1,53,14,1,57,2,1,45,3,4,2,1,1,2,1,66,3,36,5,1,6,2,75,2,1,48,3,9,1,1,1258,1,1,1,2,6,1,1,22681,62,4,25042,1,1,3,3,1,5,8,8,2,7,30,4,148,3,8097,26,790017,255],[1,13,1,12,1,0,1,0,1,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,1,0,2,0,2,0,2,0,2,1,0,2,0,2,0,2,0,1,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,4,0,5,2,4,2,0,4,2,4,6,4,0,2,5,0,2,0,5,2,4,0,5,2,0,2,4,2,4,6,0,2,5,0,2,0,5,0,2,4,0,5,2,4,2,6,2,
5,0,2,0,2,4,0,5,2,0,4,2,4,6,0,2,0,2,4,0,5,2,0,2,4,2,4,6,2,5,0,2,0,5,0,2,0,5,2,4,2,4,6,0,2,0,4,0,5,0,2,4,2,6,2,5,0,2,0,4,0,5,2,0,4,2,4,2,4,2,4,2,6,2,5,0,2,0,4,0,5,0,2,4,2,4,6,0,2,0,2,0,4,0,5,6,2,4,2,4,2,4,0,5,0,2,0,4,2,6,0,2,0,5,0,2,0,4,2,0,2,0,5,0,2,0,2,0,2,0,2,0,4,5,2,4,2,6,0,2,0,2,0,2,0,5,0,2,4,2,0,6,4,2,5,0,5,0,4,2,5,2,5,0,5,0,5,2,5,2,0,4,2,0,2,5,0,2,0,7,8,9,0,2,0,5,2,6,0,5,2,6,0,5,2,0,5,2,5,0,2,4,2,4,2,4,2,6,2,0,2,0,2,0,2,0,5,2,4,2,4,2,4,2,0,5,0,5,0,4,0,4,0,5,2,4,0,5,0,5,4,2,4,2,6,0,2,0,2,4,2,
0,2,4,0,5,2,4,2,4,2,4,2,4,6,5,0,2,0,2,4,0,5,4,2,4,2,6,4,5,0,5,0,5,0,2,4,2,4,2,4,2,6,0,5,4,2,4,2,0,5,0,2,0,2,4,2,0,2,0,4,2,0,2,0,1,2,1,0,1,0,1,0,2,0,2,0,6,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,6,5,2,5,4,2,4,0,5,0,5,0,5,0,5,0,4,0,5,4,6,0,2,0,5,0,2,0,5,2,4,6,0,7,2,4,0,5,0,5,2,4,2,4,2,4,6,0,5,2,4,2,4,2,0,2,0,2,4,0,5,0,5,0,5,0,5,2,0,2,0,2,0,2,0,2,0,5,4,2,4,0,4,6,0,5,0,5,0,5,0,4,2,4,2,4,0,4,6,0,11,8,9,0,2,0,2,0,2,0,2,0,1,0,2,0,1,0,2,0,2,0,2,6,0,4,2,4,0,2,6,0,2,4,0,4,2,4,6,2,0,1,0,2,0,2,4,2,6,0,2,4,0,4,2,4,
6,0,2,4,2,4,2,6,2,0,4,2,0,2,4,2,0,4,2,1,2,0,2,0,2,0,2,0,14,0,1,2],!0));return goog.i18n.GraphemeBreak.inversions_.at(a)};goog.i18n.GraphemeBreak.hasGraphemeBreak=function(a,b,c){a=goog.i18n.GraphemeBreak.getBreakProp_(a);b=goog.i18n.GraphemeBreak.getBreakProp_(b);var d=goog.i18n.GraphemeBreak.property;return goog.i18n.GraphemeBreak.applyLegacyBreakRules_(a,b)&&!(c&&(a==d.PREPEND||b==d.SPACING_MARK))};goog.format={};goog.format.fileSize=function(a,b){return goog.format.numBytesToString(a,b,!1)};goog.format.isConvertableScaledNumber=function(a){return goog.format.SCALED_NUMERIC_RE_.test(a)};goog.format.stringToNumericValue=function(a){return goog.string.endsWith(a,"B")?goog.format.stringToNumericValue_(a,goog.format.NUMERIC_SCALES_BINARY_):goog.format.stringToNumericValue_(a,goog.format.NUMERIC_SCALES_SI_)};goog.format.stringToNumBytes=function(a){return goog.format.stringToNumericValue_(a,goog.format.NUMERIC_SCALES_BINARY_)};
goog.format.numericValueToString=function(a,b){return goog.format.numericValueToString_(a,goog.format.NUMERIC_SCALES_SI_,b)};goog.format.numBytesToString=function(a,b,c,d){var e="";if(!goog.isDef(c)||c)e="B";return goog.format.numericValueToString_(a,goog.format.NUMERIC_SCALES_BINARY_,b,e,d)};goog.format.stringToNumericValue_=function(a,b){var c=a.match(goog.format.SCALED_NUMERIC_RE_);return c?c[1]*b[c[2]]:NaN};
goog.format.numericValueToString_=function(a,b,c,d,e){var f=goog.format.NUMERIC_SCALE_PREFIXES_,g=a,h="",k="",l=1;0>a&&(a=-a);for(var m=0;m<f.length;m++){var n=f[m],l=b[n];if(a>=l||1>=l&&a>.1*l){h=n;break}}h?(d&&(h+=d),e&&(k=" ")):l=1;a=Math.pow(10,goog.isDef(c)?c:2);return Math.round(g/l*a)/a+k+h};goog.format.SCALED_NUMERIC_RE_=/^([-]?\d+\.?\d*)([K,M,G,T,P,k,m,u,n]?)[B]?$/;goog.format.NUMERIC_SCALE_PREFIXES_="P T G M K  m u n".split(" ");
goog.format.NUMERIC_SCALES_SI_={"":1,n:1E-9,u:1E-6,m:.001,k:1E3,K:1E3,M:1E6,G:1E9,T:1E12,P:1E15};goog.format.NUMERIC_SCALES_BINARY_={"":1,n:Math.pow(1024,-3),u:Math.pow(1024,-2),m:1/1024,k:1024,K:1024,M:Math.pow(1024,2),G:Math.pow(1024,3),T:Math.pow(1024,4),P:Math.pow(1024,5)};goog.format.FIRST_GRAPHEME_EXTEND_=768;
goog.format.isTreatedAsBreakingSpace_=function(a){return a<=goog.format.WbrToken_.SPACE||4096<=a&&(8192<=a&&8198>=a||8200<=a&&8203>=a||5760==a||6158==a||8232==a||8233==a||8287==a||12288==a)};goog.format.isInvisibleFormattingCharacter_=function(a){return 8204<=a&&8207>=a||8234<=a&&8238>=a};
goog.format.insertWordBreaksGeneric_=function(a,b,c){c=c||10;if(c>a.length)return a;for(var d=[],e=0,f=0,g=0,h=0,k=0;k<a.length;k++){var l=h,h=a.charCodeAt(k),l=h>=goog.format.FIRST_GRAPHEME_EXTEND_&&!b(l,h,!0);e>=c&&!goog.format.isTreatedAsBreakingSpace_(h)&&!l&&(d.push(a.substring(g,k),goog.format.WORD_BREAK_HTML),g=k,e=0);f?h==goog.format.WbrToken_.GT&&f==goog.format.WbrToken_.LT?f=0:h==goog.format.WbrToken_.SEMI_COLON&&f==goog.format.WbrToken_.AMP&&(f=0,e++):h==goog.format.WbrToken_.LT||h==goog.format.WbrToken_.AMP?
f=h:goog.format.isTreatedAsBreakingSpace_(h)?e=0:goog.format.isInvisibleFormattingCharacter_(h)||e++}d.push(a.substr(g));return d.join("")};goog.format.insertWordBreaks=function(a,b){return goog.format.insertWordBreaksGeneric_(a,goog.i18n.GraphemeBreak.hasGraphemeBreak,b)};goog.format.conservativelyHasGraphemeBreak_=function(a,b,c){return 1024<=b&&1315>b};goog.format.insertWordBreaksBasic=function(a,b){return goog.format.insertWordBreaksGeneric_(a,goog.format.conservativelyHasGraphemeBreak_,b)};
goog.format.IS_IE8_OR_ABOVE_=goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(8);goog.format.WORD_BREAK_HTML=goog.userAgent.WEBKIT?"<wbr></wbr>":goog.userAgent.OPERA?"&shy;":goog.format.IS_IE8_OR_ABOVE_?"&#8203;":"<wbr>";goog.format.WbrToken_={LT:60,GT:62,AMP:38,SEMI_COLON:59,SPACE:32};xiv.ui.ProgressBarPanel=function(){nrg.ui.Component.call(this);this.progBarHolder_=goog.dom.createDom("div",{id:xiv.ui.ProgressBarPanel.ID_PREFIX+"_ProgBarHolder_"+goog.string.createUniqueString(),"class":xiv.ui.ProgressBarPanel.CSS.PROGBARHOLDER});goog.dom.append(this.getElement(),this.progBarHolder_);this.labelHolder_=goog.dom.createDom("div",{id:xiv.ui.ProgressBarPanel.ID_PREFIX+"_LabelHolder_"+goog.string.createUniqueString(),"class":xiv.ui.ProgressBarPanel.CSS.LABELHOLDER});goog.dom.append(this.getElement(),
this.labelHolder_);this.ProgressBar_=new goog.ui.ProgressBar;this.ProgressBar_.decorate(this.progBarHolder_);goog.dom.classes.add(goog.dom.getElementByClass("progress-bar-thumb",this.progBarHolder_),xiv.ui.ProgressBarPanel.CSS.THUMB);this.progressBarHolder_=null};goog.inherits(xiv.ui.ProgressBarPanel,nrg.ui.Component);goog.exportSymbol("xiv.ui.ProgressBarPanel",xiv.ui.ProgressBarPanel);xiv.ui.ProgressBarPanel.EventType={};xiv.ui.ProgressBarPanel.ID_PREFIX="xiv.ui.ProgressBarPanel";
xiv.ui.ProgressBarPanel.CSS_SUFFIX={THUMB:"thumb",PROGBARHOLDER:"progbarholder",LABELHOLDER:"labelholder"};xiv.ui.ProgressBarPanel.prototype.labelText_="";xiv.ui.ProgressBarPanel.prototype.showValue_=!1;xiv.ui.ProgressBarPanel.prototype.setLabel=function(a){this.labelText_=a;this.labelHolder_.innerHTML=this.labelText_};xiv.ui.ProgressBarPanel.prototype.showValue=function(a){this.showValue_=goog.isDefAndNotNull(a)&&!1===a?!1:!0;this.setValue(this.ProgressBar_.getValue())};
xiv.ui.ProgressBarPanel.prototype.setValue=function(a){this.ProgressBar_.setValue(a);this.labelHolder_.innerHTML=this.labelText_;this.showValue_&&(0<this.labelText_.length&&(this.labelHolder_.innerHTML+=" "),this.labelHolder_.innerHTML+=this.ProgressBar_.getValue().toString()+"%");goog.dom.classes.remove(this.progBarHolder_,"progress-bar-horizontal")};xiv.ui.ProgressBarPanel.prototype.getValue=function(){return this.ProgressBar_.getValue()};
xiv.ui.ProgressBarPanel.prototype.disposeInternal=function(){xiv.ui.ProgressBarPanel.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.ProgressBar_)&&(this.ProgressBar_.dispose(),delete this.ProgressBar_);goog.isDefAndNotNull(this.progBarHolder_)&&(goog.dom.removeNode(this.progBarHolder_),delete this.progBarHolder_);goog.isDefAndNotNull(this.labelHolder_)&&(goog.dom.removeNode(this.labelHolder_),delete this.labelHolder_);this.labelText_=this.showValue_=null};
goog.exportSymbol("xiv.ui.ProgressBarPanel.EventType",xiv.ui.ProgressBarPanel.EventType);goog.exportSymbol("xiv.ui.ProgressBarPanel.ID_PREFIX",xiv.ui.ProgressBarPanel.ID_PREFIX);goog.exportSymbol("xiv.ui.ProgressBarPanel.CSS_SUFFIX",xiv.ui.ProgressBarPanel.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ProgressBarPanel.prototype.setLabel",xiv.ui.ProgressBarPanel.prototype.setLabel);goog.exportSymbol("xiv.ui.ProgressBarPanel.prototype.showValue",xiv.ui.ProgressBarPanel.prototype.showValue);
goog.exportSymbol("xiv.ui.ProgressBarPanel.prototype.setValue",xiv.ui.ProgressBarPanel.prototype.setValue);goog.exportSymbol("xiv.ui.ProgressBarPanel.prototype.getValue",xiv.ui.ProgressBarPanel.prototype.getValue);goog.exportSymbol("xiv.ui.ProgressBarPanel.prototype.disposeInternal",xiv.ui.ProgressBarPanel.prototype.disposeInternal);nrg.ui.ThumbnailGallery=function(){nrg.ui.ScrollableZippyTree.call(this)};goog.inherits(nrg.ui.ThumbnailGallery,nrg.ui.ScrollableZippyTree);goog.exportSymbol("nrg.ui.ThumbnailGallery",nrg.ui.ThumbnailGallery);nrg.ui.ThumbnailGallery.ID_PREFIX="nrg.ui.ThumbnailGallery";nrg.ui.ThumbnailGallery.CSS_SUFFIX={DIALOG:"dialog",THUMBNAIL:"thumbnail",THUMBNAIL_IMAGE:"thumbnail-image",THUMBNAIL_DISPLAYTEXT:"thumbnail-text"};nrg.ui.ThumbnailGallery.THUMB_SORT_TAG=goog.string.createUniqueString();
nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert_=!1;nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert=function(a){this.sortThumbnailsOnInsert_=a;goog.isDefAndNotNull(this.ZippyTree)&&this.sortThumbnailsOnInsert_&&this.ZippyTree.setCustomInsertMethod(nrg.ui.ThumbnailGallery.thumbnailSorter)};nrg.ui.ThumbnailGallery.prototype.render=function(a){nrg.ui.ThumbnailGallery.superClass_.render.call(this,a);this.setDefaultClasses_();this.sortThumbnailsOnInsert_&&this.ZippyTree.setCustomInsertMethod(nrg.ui.ThumbnailGallery.thumbnailSorter)};
nrg.ui.ThumbnailGallery.thumbnailSorter=function(a,b){if(goog.isDefAndNotNull(a.childNodes)&&0!=a.childNodes.length)for(var c=goog.dom.getChildren(a),d=b[nrg.ui.ThumbnailGallery.THUMB_SORT_TAG].toLowerCase(),e,f,g=c.length,h=0;h<g;h++)if(f=c[h],goog.isDefAndNotNull(f[nrg.ui.ThumbnailGallery.THUMB_SORT_TAG])&&(e=f[nrg.ui.ThumbnailGallery.THUMB_SORT_TAG].toLowerCase(),e=goog.string.numerateCompare(d,e),0>e)){goog.dom.insertSiblingBefore(b,f);return}goog.dom.appendChild(a,b)};
nrg.ui.ThumbnailGallery.prototype.createThumbnail=function(a,b){var c=new nrg.ui.Thumbnail;goog.dom.classes.addRemove(c.getElement(),goog.dom.classes.get(c.getElement()),this.thumbnailClasses_);goog.dom.classes.addRemove(c.getTextElement(),goog.dom.classes.get(c.getTextElement()),this.thumbnailTextClasses_);goog.dom.classes.addRemove(c.getImage(),goog.dom.classes.get(c.getImage()),this.thumbnailImageClasses_);c.setImage(a);c.setText(b);return c};
nrg.ui.ThumbnailGallery.prototype.loop=function(a){goog.object.forEach(this.Thumbs_,function(b){a(b)})};nrg.ui.ThumbnailGallery.prototype.setHoverParent=function(a){this.loop(function(b){goog.dom.append(a,b.getHoverable())})};
nrg.ui.ThumbnailGallery.prototype.addThumbnail=function(a,b){goog.object.containsValue(this.Thumbs_,a)||(this.Thumbs_=this.Thumbs_?this.Thumbs_:{},this.Thumbs_[a.getElement().getAttribute("id")]=a,this.getSlider().bindToMouseWheel(a.getHoverable()),goog.events.listen(this.getSlider(),nrg.ui.Slider.EventType.MOUSEWHEEL,this.onHoverAndScroll_.bind(this)),a.getElement()[nrg.ui.ThumbnailGallery.THUMB_SORT_TAG]=a.getText().toLowerCase(),this.addContents(a.getElement(),b),this.mapSliderToContents(),goog.events.listen(a,
nrg.ui.Thumbnail.EventType.MOUSEOVER,function(a){this.dispatchEvent({type:nrg.ui.Thumbnail.EventType.MOUSEOVER,Thumbnail:a.target})}.bind(this)),goog.events.listen(a,nrg.ui.Thumbnail.EventType.MOUSEOUT,function(a){this.dispatchEvent({type:nrg.ui.Thumbnail.EventType.MOUSEOUT,Thumbnail:a.target})}.bind(this)))};
nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail=function(a,b,c){a=this.createThumbnail(a,b);this.addThumbnail(a,c);this.setThumbnailClasses_("image");this.setThumbnailClasses_("text");this.setThumbnailClasses_("thumbnail");this.mapSliderToContents();return a};nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents=function(){nrg.ui.ThumbnailGallery.superClass_.setZippyTreeEvents.call(this);goog.events.listen(this.getScrollArea(),goog.events.EventType.MOUSEOVER,this.storeMouseCoords_.bind(this))};
nrg.ui.ThumbnailGallery.prototype.storeMouseCoords_=function(a){this.mouseX_=a.clientX;this.mouseY_=a.clientY};nrg.ui.ThumbnailGallery.prototype.clearHoverThumb_=function(){goog.object.forEach(this.Thumbs_,function(a){a.onMouseOut()});this.storedHoverThumbId_=null};
nrg.ui.ThumbnailGallery.prototype.onHoverAndScroll_=function(a){a=document.elementFromPoint(this.mouseX_,this.mouseY_);(a=goog.dom.getAncestorByClass(a,nrg.ui.Thumbnail.ELEMENT_CLASS))?(a=a.id.replace(nrg.ui.Thumbnail.HOVERABLE_PREFIX,""),this.storedHoverThumbId_!==a&&(this.clearHoverThumb_(),this.storedHoverThumbId_=a,this.Thumbs_[this.storedHoverThumbId_].onMouseOver()),this.Thumbs_[this.storedHoverThumbId_].repositionHoverable()):this.clearHoverThumb_()};
nrg.ui.ThumbnailGallery.prototype.setThumbnailClasses_=function(a){var b,c=[],d="";for(d in this.Thumbs_){switch(a){case "thumbnail":c=this.thumbnailClasses_;b=this.Thumbs_[d].getElement();break;case "image":c=this.thumbnailImageClasses_;b=this.Thumbs_[d].getImage();break;case "text":c=this.thumbnailTextClasses_,b=this.Thumbs_[d].getTextElement()}goog.dom.classes.addRemove(b,goog.dom.classes.get(b),c)}};
nrg.ui.ThumbnailGallery.prototype.addThumbnailClass=function(a){goog.isDefAndNotNull(this.thumbnailClasses_)||this.setDefaultClasses_();this.thumbnailClasses_.push(a);this.setThumbnailClasses_("thumbnail")};nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass=function(a){this.thumbnailImageClasses_.push(a);this.setThumbnailClasses_("image")};nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass=function(a){this.thumbnailTextClasses_.push(a);this.setThumbnailClasses_("text")};
nrg.ui.ThumbnailGallery.prototype.updateStyle=function(a){a&&nrg.style.setStyle(this.getElement(),a)};
nrg.ui.ThumbnailGallery.prototype.setDefaultClasses_=function(){var a=new nrg.ui.Thumbnail;this.thumbnailClasses_=goog.dom.classes.get(a.getElement());this.thumbnailClasses_.push(nrg.ui.ThumbnailGallery.CSS.THUMBNAIL);this.thumbnailImageClasses_=goog.dom.classes.get(a.getImage());this.thumbnailImageClasses_.push(nrg.ui.ThumbnailGallery.CSS.THUMBNAIL_IMAGE);this.thumbnailTextClasses_=goog.dom.classes.get(a.getTextElement());this.thumbnailTextClasses_.push(nrg.ui.ThumbnailGallery.CSS.THUMBNAIL_TEXT);
goog.dom.removeNode(a.getElement());delete a};
nrg.ui.ThumbnailGallery.prototype.disposeInternal=function(){nrg.ui.ThumbnailGallery.superClass_.disposeInternal.call(this);delete this.sortThumbnailsOnInsert_;goog.isDefAndNotNull(this.mouseX_)&&delete this.mouseX_;goog.isDefAndNotNull(this.mouseY_)&&delete this.mouseY_;goog.isDefAndNotNull(this.Thumbs_)&&(this.disposeComponentMap(this.Thumbs_),delete this.Thumbs_);goog.isDefAndNotNull(this.ZippyTree)&&(goog.events.removeAll(this.ZippyTree),this.ZippyTree.dispose(),delete this.ZippyTree);goog.isDefAndNotNull(this.thumbnailClasses_)&&
(goog.array.clear(this.thumbnailClasses_),delete this.thumbnailClasses_);goog.isDefAndNotNull(this.thumbnailImageClasses_)&&(goog.array.clear(this.thumbnailImageClasses_),delete this.thumbnailImageClasses_);goog.isDefAndNotNull(this.thumbnailTextClasses_)&&(goog.array.clear(this.thumbnailTextClasses_),delete this.thumbnailTextClasses_);delete this.storedHoverThumbId_};goog.exportSymbol("nrg.ui.ThumbnailGallery.ID_PREFIX",nrg.ui.ThumbnailGallery.ID_PREFIX);
goog.exportSymbol("nrg.ui.ThumbnailGallery.CSS_SUFFIX",nrg.ui.ThumbnailGallery.CSS_SUFFIX);goog.exportSymbol("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",nrg.ui.ThumbnailGallery.THUMB_SORT_TAG);goog.exportSymbol("nrg.ui.ThumbnailGallery.thumbnailSorter",nrg.ui.ThumbnailGallery.thumbnailSorter);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.render",nrg.ui.ThumbnailGallery.prototype.render);
goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.createThumbnail",nrg.ui.ThumbnailGallery.prototype.createThumbnail);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.loop",nrg.ui.ThumbnailGallery.prototype.loop);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.setHoverParent",nrg.ui.ThumbnailGallery.prototype.setHoverParent);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.addThumbnail",nrg.ui.ThumbnailGallery.prototype.addThumbnail);
goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",nrg.ui.ThumbnailGallery.prototype.addThumbnailClass);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass);
goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.updateStyle",nrg.ui.ThumbnailGallery.prototype.updateStyle);goog.exportSymbol("nrg.ui.ThumbnailGallery.prototype.disposeInternal",nrg.ui.ThumbnailGallery.prototype.disposeInternal);xiv.ui.ViewableGroupMenu=function(){nrg.ui.Component.call(this)};goog.inherits(xiv.ui.ViewableGroupMenu,nrg.ui.Component);goog.exportSymbol("xiv.ui.ViewableGroupMenu",xiv.ui.ViewableGroupMenu);xiv.ui.ViewableGroupMenu.ID_PREFIX="xiv.ui.ViewableGroupMenu";xiv.ui.ViewableGroupMenu.EventType={VIEWSELECTED:goog.events.getUniqueId("viewselected")};
xiv.ui.ViewableGroupMenu.CSS_SUFFIX={HEADER:"header",THUMBNAIL:"thumbnail",THUMBNAIL_TEXT:"thumbnail-text",THUMBNAIL_IMAGE:"thumbnail-image",THUMBNAILGALLERY:"thumbnailgallery",BACKGROUND:"background"};xiv.ui.ViewableGroupMenu.prototype.ThumbnailGallery_=null;xiv.ui.ViewableGroupMenu.prototype.background_=null;xiv.ui.ViewableGroupMenu.prototype.headerText_=null;
xiv.ui.ViewableGroupMenu.prototype.render=function(){xiv.ui.ViewableGroupMenu.superClass_.render.call(this);this.background_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_Background_"+goog.string.createUniqueString()});goog.dom.classes.add(this.background_,this.constructor.CSS.BACKGROUND);goog.dom.append(this.getElement(),this.background_);this.headerText_=goog.dom.createDom("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+goog.string.createUniqueString(),"class":xiv.ui.ViewableGroupMenu.CSS.HEADER});
this.headerText_.innerHTML="<b> Select View <b>";goog.dom.append(this.getElement(),this.headerText_);goog.isDefAndNotNull(this.ThumbnailGallery_)||this.reset()};xiv.ui.ViewableGroupMenu.prototype.getBackground=function(){return this.background_};xiv.ui.ViewableGroupMenu.prototype.show=function(){nrg.fx.fadeIn(this.getElement(),xiv.ANIM_SLOW)};
xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail=function(a,b){goog.isDefAndNotNull(this.ThumbnailGallery_)||this.reset();var c=this.ThumbnailGallery_.createAndAddThumbnail(a,b);this.setThumbnailOnClick_(c);return c};xiv.ui.ViewableGroupMenu.prototype.hide=function(){nrg.fx.fadeOut(this.getElement(),500);goog.dom.removeNode(this.getElement())};
xiv.ui.ViewableGroupMenu.prototype.reset=function(){goog.isDefAndNotNull(this.ThumbnailGallery_)&&(this.ThumbnailGallery_.dispose(),delete this.ThumbnailGallery_);this.ThumbnailGallery_=new nrg.ui.ThumbnailGallery;this.ThumbnailGallery_.sortThumbnailsOnInsert(!0);this.ThumbnailGallery_.render(this.getElement());goog.dom.classes.add(this.ThumbnailGallery_.getElement(),xiv.ui.ViewableGroupMenu.CSS.THUMBNAILGALLERY);this.ThumbnailGallery_.addThumbnailClass(xiv.ui.ViewableGroupMenu.CSS.THUMBNAIL);this.ThumbnailGallery_.addThumbnailImageClass(xiv.ui.ViewableGroupMenu.CSS.THUMBNAIL_IMAGE);
this.ThumbnailGallery_.addThumbnailTextClass(xiv.ui.ViewableGroupMenu.CSS.THUMBNAIL_TEXT)};xiv.ui.ViewableGroupMenu.prototype.setThumbnailOnClick_=function(a){goog.events.listen(a,nrg.ui.Thumbnail.EventType.CLICK,function(b){this.dispatchEvent({type:xiv.ui.ViewableGroupMenu.EventType.VIEWSELECTED,thumbnail:a})}.bind(this))};
xiv.ui.ViewableGroupMenu.prototype.disposeInternal=function(){xiv.ui.ViewableGroupMenu.superClass_.disposeInternal.call(this);goog.isDefAndNotNull(this.background_)&&(goog.dom.removeNode(this.background_),delete this.background_);goog.isDefAndNotNull(this.headerText_)&&(goog.dom.removeNode(this.headerText_),delete this.headerText_);goog.isDefAndNotNull(this.ThumbnailGallery_)&&(this.ThumbnailGallery_.dispose(),delete this.ThumbnailGallery_)};
goog.exportSymbol("xiv.ui.ViewableGroupMenu.ID_PREFIX",xiv.ui.ViewableGroupMenu.ID_PREFIX);goog.exportSymbol("xiv.ui.ViewableGroupMenu.EventType",xiv.ui.ViewableGroupMenu.EventType);goog.exportSymbol("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",xiv.ui.ViewableGroupMenu.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ViewableGroupMenu.prototype.render",xiv.ui.ViewableGroupMenu.prototype.render);goog.exportSymbol("xiv.ui.ViewableGroupMenu.prototype.getBackground",xiv.ui.ViewableGroupMenu.prototype.getBackground);
goog.exportSymbol("xiv.ui.ViewableGroupMenu.prototype.show",xiv.ui.ViewableGroupMenu.prototype.show);goog.exportSymbol("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail);goog.exportSymbol("xiv.ui.ViewableGroupMenu.prototype.hide",xiv.ui.ViewableGroupMenu.prototype.hide);goog.exportSymbol("xiv.ui.ViewableGroupMenu.prototype.reset",xiv.ui.ViewableGroupMenu.prototype.reset);
goog.exportSymbol("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",xiv.ui.ViewableGroupMenu.prototype.disposeInternal);goog.testing.ObjectPropertyString=function(a,b){this.object_=a;this.propertyString_=b};goog.testing.ObjectPropertyString.prototype.getObject=function(){return this.object_};goog.testing.ObjectPropertyString.prototype.getPropertyString=function(){return this.propertyString_};goog.testing.PropertyReplacer=function(){this.original_=[]};goog.testing.PropertyReplacer.NO_SUCH_KEY_={};goog.testing.PropertyReplacer.hasKey_=function(a,b){return b in a?Object.prototype.hasOwnProperty.call(a,b)?!0:a.constructor!=Object||goog.userAgent.OPERA&&"[object Object]"!=Object.prototype.toString.call(a)?!(b in a.constructor.prototype):!1:!1};
goog.testing.PropertyReplacer.deleteKey_=function(a,b){try{if(delete a[b],!goog.testing.PropertyReplacer.hasKey_(a,b))return}catch(c){}a[b]=void 0;"undefined"==a[b]&&(a[b]="")};goog.testing.PropertyReplacer.prototype.set=function(a,b,c){var d=goog.testing.PropertyReplacer.hasKey_(a,b)?a[b]:goog.testing.PropertyReplacer.NO_SUCH_KEY_;this.original_.push({object:a,key:b,value:d});a[b]=c};
goog.testing.PropertyReplacer.prototype.replace=function(a,b,c){if(!(b in a))throw Error('Cannot replace missing property "'+b+'" in '+a);if(goog.typeOf(a[b])!=goog.typeOf(c))throw Error('Cannot replace property "'+b+'" in '+a+" with a value of different type");this.set(a,b,c)};
goog.testing.PropertyReplacer.prototype.setPath=function(a,b){for(var c=a.split("."),d=goog.global,e=0;e<c.length-1;e++){var f=c[e];if("prototype"==f&&!d[f])throw Error("Cannot set the prototype of "+c.slice(0,e).join("."));goog.isObject(d[f])||goog.isFunction(d[f])||this.set(d,f,{});d=d[f]}this.set(d,c[c.length-1],b)};
goog.testing.PropertyReplacer.prototype.remove=function(a,b){goog.testing.PropertyReplacer.hasKey_(a,b)&&(this.original_.push({object:a,key:b,value:a[b]}),goog.testing.PropertyReplacer.deleteKey_(a,b))};
goog.testing.PropertyReplacer.prototype.reset=function(){for(var a=this.original_.length-1;0<=a;a--){var b=this.original_[a];b.value==goog.testing.PropertyReplacer.NO_SUCH_KEY_?goog.testing.PropertyReplacer.deleteKey_(b.object,b.key):b.object[b.key]=b.value;delete this.original_[a]}this.original_.length=0};goog.testing.MockInterface=function(){};goog.testing.MockInterface.prototype.$replay=function(){};goog.testing.MockInterface.prototype.$reset=function(){};goog.testing.MockInterface.prototype.$verify=function(){};goog.testing.stacktrace={};goog.testing.stacktrace.Frame=function(a,b,c,d,e){this.context_=a;this.name_=b;this.alias_=c;this.args_=d;this.path_=e};goog.testing.stacktrace.Frame.prototype.getName=function(){return this.name_};goog.testing.stacktrace.Frame.prototype.isAnonymous=function(){return!this.name_||"[object Object]"==this.context_};
goog.testing.stacktrace.Frame.prototype.toCanonicalString=function(){var a=goog.testing.stacktrace.htmlEscape_,b=goog.testing.stacktrace.maybeDeobfuscateFunctionName_,b=[this.context_?a(this.context_)+".":"",this.name_?a(b(this.name_)):"anonymous",a(this.args_),this.alias_?" [as "+a(b(this.alias_))+"]":""];if(this.path_)if(b.push(" at "),goog.testing.stacktrace.isClosureInspectorActive_()){var c=this.path_.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',a(this.path_),
"', '",c,"'); return false\">",a(this.path_),"</a>")}else b.push(a(this.path_));return b.join("")};goog.testing.stacktrace.MAX_DEPTH_=20;goog.testing.stacktrace.MAX_FIREFOX_FRAMESTRING_LENGTH_=5E5;goog.testing.stacktrace.IDENTIFIER_PATTERN_="[a-zA-Z_$][\\w$]*";goog.testing.stacktrace.CHROME_ALIAS_PATTERN_="(?: \\[as ("+goog.testing.stacktrace.IDENTIFIER_PATTERN_+")\\])?";goog.testing.stacktrace.CHROME_FUNCTION_NAME_PATTERN_="(?:new )?(?:"+goog.testing.stacktrace.IDENTIFIER_PATTERN_+"|<anonymous>)";
goog.testing.stacktrace.CHROME_FUNCTION_CALL_PATTERN_=" (?:(.*?)\\.)?("+goog.testing.stacktrace.CHROME_FUNCTION_NAME_PATTERN_+")"+goog.testing.stacktrace.CHROME_ALIAS_PATTERN_;goog.testing.stacktrace.URL_PATTERN_="((?:http|https|file)://[^\\s)]+|javascript:.*)";goog.testing.stacktrace.CHROME_URL_PATTERN_=" (?:\\(unknown source\\)|\\(native\\)|\\((?:eval at )?"+goog.testing.stacktrace.URL_PATTERN_+"\\)|"+goog.testing.stacktrace.URL_PATTERN_+")";
goog.testing.stacktrace.CHROME_STACK_FRAME_REGEXP_=new RegExp("^    at(?:"+goog.testing.stacktrace.CHROME_FUNCTION_CALL_PATTERN_+")?"+goog.testing.stacktrace.CHROME_URL_PATTERN_+"$");goog.testing.stacktrace.FIREFOX_FUNCTION_CALL_PATTERN_="("+goog.testing.stacktrace.IDENTIFIER_PATTERN_+")?(\\(.*\\))?@";goog.testing.stacktrace.FIREFOX_STACK_FRAME_REGEXP_=new RegExp("^"+goog.testing.stacktrace.FIREFOX_FUNCTION_CALL_PATTERN_+"(?::0|"+goog.testing.stacktrace.URL_PATTERN_+")$");
goog.testing.stacktrace.OPERA_ANONYMOUS_FUNCTION_NAME_PATTERN_="<anonymous function(?:\\: (?:("+goog.testing.stacktrace.IDENTIFIER_PATTERN_+"(?:\\."+goog.testing.stacktrace.IDENTIFIER_PATTERN_+")*)\\.)?("+goog.testing.stacktrace.IDENTIFIER_PATTERN_+"))?>";goog.testing.stacktrace.OPERA_FUNCTION_CALL_PATTERN_="(?:(?:("+goog.testing.stacktrace.IDENTIFIER_PATTERN_+")|"+goog.testing.stacktrace.OPERA_ANONYMOUS_FUNCTION_NAME_PATTERN_+")(\\(.*\\)))?@";
goog.testing.stacktrace.OPERA_STACK_FRAME_REGEXP_=new RegExp("^"+goog.testing.stacktrace.OPERA_FUNCTION_CALL_PATTERN_+goog.testing.stacktrace.URL_PATTERN_+"?$");goog.testing.stacktrace.FUNCTION_SOURCE_REGEXP_=new RegExp("^function ("+goog.testing.stacktrace.IDENTIFIER_PATTERN_+")");goog.testing.stacktrace.IE_FUNCTION_CALL_PATTERN_="("+goog.testing.stacktrace.IDENTIFIER_PATTERN_+"(?:\\s+\\w+)*)";
goog.testing.stacktrace.IE_STACK_FRAME_REGEXP_=new RegExp("^   at "+goog.testing.stacktrace.IE_FUNCTION_CALL_PATTERN_+"\\s*\\((eval code:[^)]*|"+goog.testing.stacktrace.URL_PATTERN_+")\\)?$");
goog.testing.stacktrace.followCallChain_=function(){for(var a=[],b=arguments.callee.caller,c=0;b&&c<goog.testing.stacktrace.MAX_DEPTH_;){var d=Function.prototype.toString.call(b).match(goog.testing.stacktrace.FUNCTION_SOURCE_REGEXP_),d=d?d[1]:"",e=["("];if(b.arguments)for(var f=0;f<b.arguments.length;f++){var g=b.arguments[f];0<f&&e.push(", ");goog.isString(g)?e.push('"',g,'"'):g&&g.$replay?e.push("goog.testing.Mock"):e.push(String(g))}else e.push("unknown");e.push(")");e=e.join("");a.push(new goog.testing.stacktrace.Frame("",
d,"",e,""));try{b=b.caller}catch(h){break}c++}return a};
goog.testing.stacktrace.parseStackFrame_=function(a){var b=a.match(goog.testing.stacktrace.CHROME_STACK_FRAME_REGEXP_);return b?new goog.testing.stacktrace.Frame(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||""):a.length>goog.testing.stacktrace.MAX_FIREFOX_FRAMESTRING_LENGTH_?goog.testing.stacktrace.parseLongFirefoxFrame_(a):(b=a.match(goog.testing.stacktrace.FIREFOX_STACK_FRAME_REGEXP_))?new goog.testing.stacktrace.Frame("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(goog.testing.stacktrace.OPERA_STACK_FRAME_REGEXP_))?
new goog.testing.stacktrace.Frame(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(goog.testing.stacktrace.IE_STACK_FRAME_REGEXP_))?new goog.testing.stacktrace.Frame("",b[1]||"","","",b[2]||""):null};
goog.testing.stacktrace.parseLongFirefoxFrame_=function(a){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var f="";0<=c&&c+1<d&&(f=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new goog.testing.stacktrace.Frame("",e,"",d,f)};goog.testing.stacktrace.setDeobfuscateFunctionName=function(a){goog.testing.stacktrace.deobfuscateFunctionName_=a};
goog.testing.stacktrace.maybeDeobfuscateFunctionName_=function(a){return goog.testing.stacktrace.deobfuscateFunctionName_?goog.testing.stacktrace.deobfuscateFunctionName_(a):a};goog.testing.stacktrace.isClosureInspectorActive_=function(){return Boolean(goog.global.CLOSURE_INSPECTOR___&&goog.global.CLOSURE_INSPECTOR___.supportsJSUnit)};goog.testing.stacktrace.htmlEscape_=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};
goog.testing.stacktrace.framesToString_=function(a){for(var b=a.length-1;a[b]&&a[b].isAnonymous();)b--;for(var c=-1,d=0;d<a.length;d++)if(a[d]&&"_assert"==a[d].getName()){c=d;break}for(var e=[],d=c+1;d<=b;d++)e.push("> "),a[d]?e.push(a[d].toCanonicalString()):e.push("(unknown)"),e.push("\n");return e.join("")};goog.testing.stacktrace.parse_=function(a){a=a.replace(/\s*$/,"").split("\n");for(var b=[],c=0;c<a.length;c++)b.push(goog.testing.stacktrace.parseStackFrame_(a[c]));return b};
goog.testing.stacktrace.canonicalize=function(a){a=goog.testing.stacktrace.parse_(a);return goog.testing.stacktrace.framesToString_(a)};goog.testing.stacktrace.getNativeStack_=function(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""};
goog.testing.stacktrace.get=function(){var a=goog.testing.stacktrace.getNativeStack_(),a=a?goog.isArray(a)?goog.testing.stacktrace.callSitesToFrames_(a):goog.testing.stacktrace.parse_(a):goog.testing.stacktrace.followCallChain_();return goog.testing.stacktrace.framesToString_(a)};
goog.testing.stacktrace.callSitesToFrames_=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d.getFunctionName()||"unknown",f=d.getFileName(),d=f?f+":"+d.getLineNumber()+":"+d.getColumnNumber():"unknown";b.push(new goog.testing.stacktrace.Frame("",e,"","",d))}return b};goog.exportSymbol("setDeobfuscateFunctionName",goog.testing.stacktrace.setDeobfuscateFunctionName);goog.testing.asserts={};var DOUBLE_EQUALITY_PREDICATE=function(a,b){return a==b},JSUNIT_UNDEFINED_VALUE,TO_STRING_EQUALITY_PREDICATE=function(a,b){return a.toString()===b.toString()},PRIMITIVE_EQUALITY_PREDICATES={String:DOUBLE_EQUALITY_PREDICATE,Number:DOUBLE_EQUALITY_PREDICATE,Boolean:DOUBLE_EQUALITY_PREDICATE,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:TO_STRING_EQUALITY_PREDICATE,Function:TO_STRING_EQUALITY_PREDICATE};
goog.testing.asserts.numberRoughEqualityPredicate_=function(a,b,c){return Math.abs(a-b)<=c};goog.testing.asserts.primitiveRoughEqualityPredicates_={Number:goog.testing.asserts.numberRoughEqualityPredicate_};
var _trueTypeOf=function(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b},_displayStringForValue=function(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&a!==JSUNIT_UNDEFINED_VALUE&&(b+=" ("+_trueTypeOf(a)+")");return b},fail=function(a){goog.testing.asserts.raiseException("Call to fail()",a)},argumentsIncludeComments=function(a,b){return b.length==a+1},commentArg=function(a,b){return argumentsIncludeComments(a,b)?b[0]:null},nonCommentArg=function(a,
b,c){return argumentsIncludeComments(b,c)?c[a]:c[a-1]},_validateArguments=function(a,b){var c=b.length==a||b.length==a+1&&goog.isString(b[0]);_assert(null,c,"Incorrect arguments passed to assert function")},_assert=function(a,b,c){b||goog.testing.asserts.raiseException(a,c)};
goog.testing.asserts.getDefaultErrorMsg_=function(a,b){var c="Expected "+_displayStringForValue(a)+" but was "+_displayStringForValue(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var f=0;f<d&&a.charAt(a.length-f-1)==b.charAt(b.length-f-1);)f++;e+f>d&&(f=0);if(2<e||2<f)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(f-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+
e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c};
var assert=function(a,b){_validateArguments(1,arguments);var c=commentArg(1,arguments),d=nonCommentArg(1,1,arguments);_assert(c,goog.isBoolean(d),"Bad argument to assert(boolean)");_assert(c,d,"Call to assert(boolean) with false")},assertThrows=function(a,b){_validateArguments(1,arguments);var c=nonCommentArg(1,1,arguments),d=commentArg(1,arguments);_assert(d,"function"==typeof c,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&goog.isString(e.stacktrace)&&goog.isString(e.message)&&
(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}goog.testing.asserts.raiseException(d,"No exception thrown from function passed to assertThrows")},assertNotThrows=function(a,b){_validateArguments(1,arguments);var c=commentArg(1,arguments),d=nonCommentArg(1,1,arguments);_assert(c,"function"==typeof d,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",
goog.testing.asserts.raiseException(c,e.stack||e.stacktrace||e.toString())}},assertThrowsJsUnitException=function(a,b){var c=!1;try{goog.testing.asserts.callWithoutLogging(a)}catch(d){d.isJsUnitException||fail("Expected a JsUnitException"),"undefined"!=typeof b&&d.message!=b&&fail("Expected message ["+b+"] but got ["+d.message+"]"),c=!0}c||fail("Expected a failure: "+b)},assertTrue=function(a,b){_validateArguments(1,arguments);var c=commentArg(1,arguments),d=nonCommentArg(1,1,arguments);_assert(c,
goog.isBoolean(d),"Bad argument to assertTrue(boolean)");_assert(c,d,"Call to assertTrue(boolean) with false")},assertFalse=function(a,b){_validateArguments(1,arguments);var c=commentArg(1,arguments),d=nonCommentArg(1,1,arguments);_assert(c,goog.isBoolean(d),"Bad argument to assertFalse(boolean)");_assert(c,!d,"Call to assertFalse(boolean) with true")},assertEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments);_assert(commentArg(2,
arguments),d===e,goog.testing.asserts.getDefaultErrorMsg_(d,e))},assertNotEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments);_assert(commentArg(2,arguments),d!==e,"Expected not to be "+_displayStringForValue(e))},assertNull=function(a,b){_validateArguments(1,arguments);var c=nonCommentArg(1,1,arguments);_assert(commentArg(1,arguments),null===c,goog.testing.asserts.getDefaultErrorMsg_(null,c))},assertNotNull=function(a,b){_validateArguments(1,
arguments);var c=nonCommentArg(1,1,arguments);_assert(commentArg(1,arguments),null!==c,"Expected not to be "+_displayStringForValue(null))},assertUndefined=function(a,b){_validateArguments(1,arguments);var c=nonCommentArg(1,1,arguments);_assert(commentArg(1,arguments),c===JSUNIT_UNDEFINED_VALUE,goog.testing.asserts.getDefaultErrorMsg_(JSUNIT_UNDEFINED_VALUE,c))},assertNotUndefined=function(a,b){_validateArguments(1,arguments);var c=nonCommentArg(1,1,arguments);_assert(commentArg(1,arguments),c!==
JSUNIT_UNDEFINED_VALUE,"Expected not to be "+_displayStringForValue(JSUNIT_UNDEFINED_VALUE))},assertNotNullNorUndefined=function(a,b){_validateArguments(1,arguments);assertNotNull.apply(null,arguments);assertNotUndefined.apply(null,arguments)},assertNonEmptyString=function(a,b){_validateArguments(1,arguments);var c=nonCommentArg(1,1,arguments);_assert(commentArg(1,arguments),c!==JSUNIT_UNDEFINED_VALUE&&null!==c&&"string"==typeof c&&""!==c,"Expected non-empty string but was "+_displayStringForValue(c))},
assertNaN=function(a,b){_validateArguments(1,arguments);var c=nonCommentArg(1,1,arguments);_assert(commentArg(1,arguments),isNaN(c),"Expected NaN")},assertNotNaN=function(a,b){_validateArguments(1,arguments);var c=nonCommentArg(1,1,arguments);_assert(commentArg(1,arguments),!isNaN(c),"Expected not NaN")};goog.testing.asserts.callWithoutLogging=function(a){var b=goog.global.G_testRunner,c=b.logTestFailure;try{b.logTestFailure=void 0,a()}finally{b.logTestFailure=c}};
goog.testing.asserts.EQUALITY_PREDICATE_CANT_PROCESS=null;goog.testing.asserts.EQUALITY_PREDICATE_VARS_ARE_EQUAL="";
goog.testing.asserts.findDifferences=function(a,b,c){function d(a,b,c){for(var n=0;n<f.length;++n){var p=f[n]===a,q=g[n]===b;if(p||q){p&&q||e.push("Asymmetric cycle detected at "+c);return}}f.push(a);g.push(b);if(a!==b)if(n=_trueTypeOf(a),p=_trueTypeOf(b),n==p){var q="Array"==n,u=h(n,a,b);if(u!=goog.testing.asserts.EQUALITY_PREDICATE_CANT_PROCESS)u!=goog.testing.asserts.EQUALITY_PREDICATE_VARS_ARE_EQUAL&&e.push(c+": "+u);else if(q&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+
b.length+"-element array");else if(u=c+(q?"[%s]":c?".%s":"%s"),a.__iterator__)goog.isFunction(a.equals)?a.equals(b)||e.push("equals() returned false for "+(c||n)):a.map_?d(a.map_,b.map_,u.replace("%s","map_")):e.push("unable to check "+(c||n)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var t in a)q&&goog.testing.asserts.isArrayIndexProp_(t)||(t in b?d(a[t],b[t],u.replace("%s",t)):e.push("property "+t+" not present in actual "+(c||p)));for(t in b)q&&
goog.testing.asserts.isArrayIndexProp_(t)||t in a||e.push("property "+t+" not present in expected "+(c||n));if(q)for(t=0;t<a.length;t++)d(a[t],b[t],u.replace("%s",String(t)))}}else e.push(c+" "+goog.testing.asserts.getDefaultErrorMsg_(a,b));f.pop();g.pop()}var e=[],f=[],g=[],h=c||function(a,b,c){return(a=PRIMITIVE_EQUALITY_PREDICATES[a])?a(b,c)?goog.testing.asserts.EQUALITY_PREDICATE_VARS_ARE_EQUAL:goog.testing.asserts.getDefaultErrorMsg_(b,c):goog.testing.asserts.EQUALITY_PREDICATE_CANT_PROCESS};
d(a,b,"");return 0==e.length?null:goog.testing.asserts.getDefaultErrorMsg_(a,b)+"\n   "+e.join("\n   ")};
var assertObjectEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments),f=commentArg(2,arguments)?commentArg(2,arguments):"",d=goog.testing.asserts.findDifferences(d,e);_assert(f,!d,d)},assertObjectRoughlyEquals=function(a,b,c,d){_validateArguments(3,arguments);var e=nonCommentArg(1,3,arguments),f=nonCommentArg(2,3,arguments),g=nonCommentArg(3,3,arguments),h=commentArg(3,arguments)?commentArg(3,arguments):"",e=goog.testing.asserts.findDifferences(e,
f,function(a,b,c){return(a=goog.testing.asserts.primitiveRoughEqualityPredicates_[a])?a(b,c,g)?goog.testing.asserts.EQUALITY_PREDICATE_VARS_ARE_EQUAL:goog.testing.asserts.getDefaultErrorMsg_(b,c)+" which was more than "+g+" away":goog.testing.asserts.EQUALITY_PREDICATE_CANT_PROCESS});_assert(h,!e,e)},assertObjectNotEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments),f=commentArg(2,arguments)?commentArg(2,arguments):"",d=goog.testing.asserts.findDifferences(d,
e);_assert(f,d,"Objects should not be equal")},assertArrayEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments),f=commentArg(2,arguments)?commentArg(2,arguments):"",g=_trueTypeOf(d);_assert(f,"Array"==g,"Expected an array for assertArrayEquals but found a "+g);g=_trueTypeOf(e);_assert(f,"Array"==g,"Expected an array for assertArrayEquals but found a "+g);assertObjectEquals(f,Array.prototype.concat.call(d),Array.prototype.concat.call(e))},
assertElementsEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments),f=commentArg(2,arguments)?commentArg(2,arguments):"";if(d){assertEquals("length mismatch: "+f,d.length,e.length);for(var g=0;g<d.length;++g)assertEquals("mismatch at index "+g+": "+f,d[g],e[g])}else assert(f,!e)},assertElementsRoughlyEqual=function(a,b,c,d){_validateArguments(3,arguments);var e=nonCommentArg(1,3,arguments),f=nonCommentArg(2,3,arguments),g=nonCommentArg(3,
3,arguments),h=commentArg(3,arguments)?commentArg(3,arguments):"";if(e){assertEquals("length mismatch: "+h,e.length,f.length);for(var k=0;k<e.length;++k)assertRoughlyEquals(h,e[k],f[k],g)}else assert(h,!f)},assertSameElements=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments),f=commentArg(2,arguments);assertTrue("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",goog.isArrayLike(d)&&goog.isArrayLike(e));
d=goog.testing.asserts.toArray_(d);e=goog.testing.asserts.toArray_(e);_assert(f,d.length==e.length,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var g=goog.testing.asserts.toArray_(d),h=0;h<e.length;h++){var k=goog.testing.asserts.indexOf_(g,e[h]);_assert(f,-1!=k,"Expected ["+d+"], got ["+e+"]");g.splice(k,1)}},assertEvaluatesToTrue=function(a,b){_validateArguments(1,arguments);nonCommentArg(1,1,arguments)||_assert(commentArg(1,arguments),!1,"Expected to evaluate to true")},
assertEvaluatesToFalse=function(a,b){_validateArguments(1,arguments);nonCommentArg(1,1,arguments)&&_assert(commentArg(1,arguments),!1,"Expected to evaluate to false")},assertHTMLEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments),d=standardizeHTML(d),e=standardizeHTML(e);_assert(commentArg(2,arguments),d===e,goog.testing.asserts.getDefaultErrorMsg_(d,e))},assertCSSValueEquals=function(a,b,c,d){_validateArguments(3,arguments);var e=
nonCommentArg(1,3,arguments),f=nonCommentArg(2,3,arguments),g=nonCommentArg(3,3,arguments),f=standardizeCSSValue(e,f),e=standardizeCSSValue(e,g);_assert(commentArg(3,arguments),f==e,goog.testing.asserts.getDefaultErrorMsg_(f,e))},assertHashEquals=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments),f=commentArg(2,arguments),g;for(g in d)_assert(f,g in e,"Expected hash had key "+g+" that was not found"),_assert(f,d[g]==e[g],"Value for key "+
g+" mismatch - expected = "+d[g]+", actual = "+e[g]);for(g in e)_assert(f,g in d,"Actual hash had key "+g+" that was not expected")},assertRoughlyEquals=function(a,b,c,d){_validateArguments(3,arguments);var e=nonCommentArg(1,3,arguments),f=nonCommentArg(2,3,arguments),g=nonCommentArg(3,3,arguments);_assert(commentArg(3,arguments),goog.testing.asserts.numberRoughEqualityPredicate_(e,f,g),"Expected "+e+", but got "+f+" which was more than "+g+" away")},assertContains=function(a,b,c){_validateArguments(2,
arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments);_assert(commentArg(2,arguments),goog.testing.asserts.contains_(e,d),"Expected '"+e+"' to contain '"+d+"'")},assertNotContains=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,2,arguments),e=nonCommentArg(2,2,arguments);_assert(commentArg(2,arguments),!goog.testing.asserts.contains_(e,d),"Expected '"+e+"' not to contain '"+d+"'")},assertRegExp=function(a,b,c){_validateArguments(2,arguments);var d=nonCommentArg(1,
2,arguments),e=nonCommentArg(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));_assert(commentArg(2,arguments),d.test(e),"Expected '"+e+"' to match RegExp "+d.toString())};goog.testing.asserts.toArray_=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b};goog.testing.asserts.indexOf_=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1};goog.testing.asserts.contains_=function(a,b){return-1!=goog.testing.asserts.indexOf_(a,b)};
var standardizeHTML=function(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")},standardizeCSSValue=function(a,b){var c=document.createElement("DIV").style;c[a]=b;return c[a]};goog.testing.asserts.raiseException=function(a,b){goog.global.CLOSURE_INSPECTOR___&&goog.global.CLOSURE_INSPECTOR___.supportsJSUnit&&goog.global.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new goog.testing.JsUnitException(a,b);};
goog.testing.asserts.isArrayIndexProp_=function(a){return(a|0)==a};goog.testing.JsUnitException=function(a,b){this.isJsUnitException=!0;this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");this.stackTrace=goog.testing.stacktrace.get();this.comment=a||null;this.jsUnitMessage=b||"";Error.captureStackTrace?Error.captureStackTrace(this,goog.testing.JsUnitException):this.stack=Error().stack||""};goog.inherits(goog.testing.JsUnitException,Error);goog.testing.JsUnitException.prototype.toString=function(){return this.message};
goog.exportSymbol("fail",fail);goog.exportSymbol("assert",assert);goog.exportSymbol("assertThrows",assertThrows);goog.exportSymbol("assertNotThrows",assertNotThrows);goog.exportSymbol("assertTrue",assertTrue);goog.exportSymbol("assertFalse",assertFalse);goog.exportSymbol("assertEquals",assertEquals);goog.exportSymbol("assertNotEquals",assertNotEquals);goog.exportSymbol("assertNull",assertNull);goog.exportSymbol("assertNotNull",assertNotNull);goog.exportSymbol("assertUndefined",assertUndefined);
goog.exportSymbol("assertNotUndefined",assertNotUndefined);goog.exportSymbol("assertNotNullNorUndefined",assertNotNullNorUndefined);goog.exportSymbol("assertNonEmptyString",assertNonEmptyString);goog.exportSymbol("assertNaN",assertNaN);goog.exportSymbol("assertNotNaN",assertNotNaN);goog.exportSymbol("assertObjectEquals",assertObjectEquals);goog.exportSymbol("assertObjectRoughlyEquals",assertObjectRoughlyEquals);goog.exportSymbol("assertObjectNotEquals",assertObjectNotEquals);
goog.exportSymbol("assertArrayEquals",assertArrayEquals);goog.exportSymbol("assertElementsEquals",assertElementsEquals);goog.exportSymbol("assertElementsRoughlyEqual",assertElementsRoughlyEqual);goog.exportSymbol("assertSameElements",assertSameElements);goog.exportSymbol("assertEvaluatesToTrue",assertEvaluatesToTrue);goog.exportSymbol("assertEvaluatesToFalse",assertEvaluatesToFalse);goog.exportSymbol("assertHTMLEquals",assertHTMLEquals);goog.exportSymbol("assertHashEquals",assertHashEquals);
goog.exportSymbol("assertRoughlyEquals",assertRoughlyEquals);goog.exportSymbol("assertContains",assertContains);goog.exportSymbol("assertNotContains",assertNotContains);goog.exportSymbol("assertRegExp",assertRegExp);goog.testing.mockmatchers={};goog.testing.mockmatchers.ArgumentMatcher=function(a,b){this.matchFn_=a||null;this.matchName_=b||null};
goog.testing.mockmatchers.ArgumentMatcher.prototype.matches=function(a,b){if(this.matchFn_){var c=this.matchFn_(a);!c&&b&&(this.matchName_?b.addErrorMessage("Expected: "+this.matchName_+" but was: "+_displayStringForValue(a)):b.addErrorMessage("Expected: missing mockmatcher description but was: "+_displayStringForValue(a)));return c}throw Error("No match function defined for this mock matcher");};
goog.testing.mockmatchers.InstanceOf=function(a){goog.testing.mockmatchers.ArgumentMatcher.call(this,function(b){return b instanceof a},"instanceOf()")};goog.inherits(goog.testing.mockmatchers.InstanceOf,goog.testing.mockmatchers.ArgumentMatcher);goog.testing.mockmatchers.TypeOf=function(a){goog.testing.mockmatchers.ArgumentMatcher.call(this,function(b){return goog.typeOf(b)==a},"typeOf("+a+")")};goog.inherits(goog.testing.mockmatchers.TypeOf,goog.testing.mockmatchers.ArgumentMatcher);
goog.testing.mockmatchers.RegexpMatch=function(a){goog.testing.mockmatchers.ArgumentMatcher.call(this,function(b){return a.test(b)},"match("+a+")")};goog.inherits(goog.testing.mockmatchers.RegexpMatch,goog.testing.mockmatchers.ArgumentMatcher);goog.testing.mockmatchers.IgnoreArgument=function(){goog.testing.mockmatchers.ArgumentMatcher.call(this,function(){return!0},"true")};goog.inherits(goog.testing.mockmatchers.IgnoreArgument,goog.testing.mockmatchers.ArgumentMatcher);
goog.testing.mockmatchers.ObjectEquals=function(a){goog.testing.mockmatchers.ArgumentMatcher.call(this,function(b){assertObjectEquals("Expected equal objects",a,b);return!0},"objectEquals("+a+")")};goog.inherits(goog.testing.mockmatchers.ObjectEquals,goog.testing.mockmatchers.ArgumentMatcher);goog.testing.mockmatchers.ObjectEquals.prototype.matches=function(a,b){try{return goog.testing.mockmatchers.ObjectEquals.superClass_.matches.call(this,a,b)}catch(c){return b&&b.addErrorMessage(c.message),!1}};
goog.testing.mockmatchers.SaveArgument=function(a,b){goog.testing.mockmatchers.ArgumentMatcher.call(this,a,b);a instanceof goog.testing.mockmatchers.ArgumentMatcher?this.delegateMatcher_=a:a||(this.delegateMatcher_=goog.testing.mockmatchers.ignoreArgument)};goog.inherits(goog.testing.mockmatchers.SaveArgument,goog.testing.mockmatchers.ArgumentMatcher);
goog.testing.mockmatchers.SaveArgument.prototype.matches=function(a,b){this.arg=a;return this.delegateMatcher_?this.delegateMatcher_.matches(a,b):goog.testing.mockmatchers.SaveArgument.superClass_.matches.call(this,a,b)};goog.testing.mockmatchers.ignoreArgument=new goog.testing.mockmatchers.IgnoreArgument;goog.testing.mockmatchers.isArray=new goog.testing.mockmatchers.ArgumentMatcher(goog.isArray,"isArray");
goog.testing.mockmatchers.isArrayLike=new goog.testing.mockmatchers.ArgumentMatcher(goog.isArrayLike,"isArrayLike");goog.testing.mockmatchers.isDateLike=new goog.testing.mockmatchers.ArgumentMatcher(goog.isDateLike,"isDateLike");goog.testing.mockmatchers.isString=new goog.testing.mockmatchers.ArgumentMatcher(goog.isString,"isString");goog.testing.mockmatchers.isBoolean=new goog.testing.mockmatchers.ArgumentMatcher(goog.isBoolean,"isBoolean");
goog.testing.mockmatchers.isNumber=new goog.testing.mockmatchers.ArgumentMatcher(goog.isNumber,"isNumber");goog.testing.mockmatchers.isFunction=new goog.testing.mockmatchers.ArgumentMatcher(goog.isFunction,"isFunction");goog.testing.mockmatchers.isObject=new goog.testing.mockmatchers.ArgumentMatcher(goog.isObject,"isObject");goog.testing.mockmatchers.isNodeLike=new goog.testing.mockmatchers.ArgumentMatcher(goog.dom.isNodeLike,"isNodeLike");
goog.testing.mockmatchers.flexibleArrayMatcher=function(a,b,c){return goog.array.equals(a,b,function(a,b){var f=0;c&&(f=c.getErrorMessageCount());var g=a===b||a instanceof goog.testing.mockmatchers.ArgumentMatcher&&a.matches(b,c),h=null;g||(h=goog.testing.asserts.findDifferences(a,b),g=!h);!g&&c&&f==c.getErrorMessageCount()&&(h||(h="Expected: "+_displayStringForValue(a)+" but was: "+_displayStringForValue(b)),c.addErrorMessage(h));return g})};goog.testing.MockExpectation=function(a){this.name=a;this.errorMessages=[]};goog.testing.MockExpectation.prototype.minCalls=1;goog.testing.MockExpectation.prototype.maxCalls=1;goog.testing.MockExpectation.prototype.actualCalls=0;goog.testing.MockExpectation.prototype.verificationCalls=0;goog.testing.MockExpectation.prototype.addErrorMessage=function(a){this.errorMessages.push(a)};goog.testing.MockExpectation.prototype.getErrorMessage=function(){return this.errorMessages.join("\n")};
goog.testing.MockExpectation.prototype.getErrorMessageCount=function(){return this.errorMessages.length};
goog.testing.Mock=function(a,b,c){if(!goog.isObject(a)&&!goog.isFunction(a))throw Error("objectToMock must be an object or constructor.");if(c&&!b&&goog.isFunction(a))c=function(){},goog.inherits(c,a),this.$proxy=new c;else{if(c&&b&&goog.isFunction(a))throw Error("Cannot create a proxy when opt_mockStaticMethods is true");if(c&&!goog.isFunction(a))throw Error("Must have a constructor to create a proxy");}goog.isFunction(a)&&!b?this.$initializeFunctions_(a.prototype):this.$initializeFunctions_(a);
this.$argumentListVerifiers_={}};goog.testing.Mock.LOOSE=1;goog.testing.Mock.STRICT=0;goog.testing.Mock.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.testing.Mock.prototype.$proxy=null;goog.testing.Mock.prototype.$recording_=!0;goog.testing.Mock.prototype.$threwException_=null;
goog.testing.Mock.prototype.$initializeFunctions_=function(a){for(var b=goog.object.getKeys(a),c=0;c<goog.testing.Mock.PROTOTYPE_FIELDS_.length;c++){var d=goog.testing.Mock.PROTOTYPE_FIELDS_[c];a[d]!==Object.prototype[d]&&b.push(d)}for(c=0;c<b.length;c++)d=b[c],"function"==typeof a[d]&&(this[d]=goog.bind(this.$mockMethod,this,d),this.$proxy&&(this.$proxy[d]=goog.bind(this.$mockMethod,this,d)))};
goog.testing.Mock.prototype.$registerArgumentListVerifier=function(a,b){this.$argumentListVerifiers_[a]=b;return this};goog.testing.Mock.prototype.$mockMethod=function(a){try{var b=goog.array.slice(arguments,1);return this.$recording_?(this.$pendingExpectation=new goog.testing.MockExpectation(a),this.$pendingExpectation.argumentList=b,this.$recordExpectation(),this):this.$recordCall(a,b)}catch(c){this.$recordAndThrow(c)}};goog.testing.Mock.prototype.$recordExpectation=function(){};
goog.testing.Mock.prototype.$recordCall=function(a,b){};goog.testing.Mock.prototype.$maybeThrow=function(a){if("undefined"!=typeof a.exceptionToThrow)throw a.exceptionToThrow;};goog.testing.Mock.prototype.$do=function(a,b){return"undefined"==typeof a.toDo?(this.$maybeThrow(a),a.returnValue):a.toDo.apply(this,b)};goog.testing.Mock.prototype.$returns=function(a){this.$pendingExpectation.returnValue=a;return this};
goog.testing.Mock.prototype.$throws=function(a){this.$pendingExpectation.exceptionToThrow=a;return this};goog.testing.Mock.prototype.$does=function(a){this.$pendingExpectation.toDo=a;return this};goog.testing.Mock.prototype.$atMostOnce=function(){this.$pendingExpectation.minCalls=0;this.$pendingExpectation.maxCalls=1;return this};goog.testing.Mock.prototype.$atLeastOnce=function(){this.$pendingExpectation.maxCalls=Infinity;return this};
goog.testing.Mock.prototype.$once=function(){this.$pendingExpectation.minCalls=1;this.$pendingExpectation.maxCalls=1;return this};goog.testing.Mock.prototype.$never=function(){this.$pendingExpectation.minCalls=0;this.$pendingExpectation.maxCalls=0;return this};goog.testing.Mock.prototype.$anyTimes=function(){this.$pendingExpectation.minCalls=0;this.$pendingExpectation.maxCalls=Infinity;return this};
goog.testing.Mock.prototype.$times=function(a){this.$pendingExpectation.minCalls=a;this.$pendingExpectation.maxCalls=a;return this};goog.testing.Mock.prototype.$replay=function(){this.$recording_=!1};goog.testing.Mock.prototype.$reset=function(){this.$recording_=!0;this.$threwException_=null;delete this.$pendingExpectation};goog.testing.Mock.prototype.$throwException=function(a,b){this.$recordAndThrow(new goog.testing.JsUnitException(a,b))};
goog.testing.Mock.prototype.$recordAndThrow=function(a){if(a.isJsUnitException){var b=goog.global.G_testRunner;if(b){var c=b.logTestFailure;c&&c.call(b,a)}this.$threwException_||(this.$threwException_=a)}throw a;};goog.testing.Mock.prototype.$verify=function(){if(this.$threwException_)throw this.$threwException_;};
goog.testing.Mock.prototype.$verifyCall=function(a,b,c){return a.name!=b?!1:(this.$argumentListVerifiers_.hasOwnProperty(a.name)?this.$argumentListVerifiers_[a.name]:goog.testing.mockmatchers.flexibleArrayMatcher)(a.argumentList,c,a)};goog.testing.Mock.prototype.$argumentsAsString=function(a){for(var b=[],c=0;c<a.length;c++)try{b.push(goog.typeOf(a[c]))}catch(d){b.push("[unknown]")}return"("+b.join(", ")+")"};
goog.testing.Mock.prototype.$throwCallException=function(a,b,c){var d=[];b=this.$argumentsAsString(b);var e=c?this.$argumentsAsString(c.argumentList):"";c&&c.name==a?d.push("Bad arguments to ",a,"().\n","Actual: ",b,"\n","Expected: ",e,"\n",c.getErrorMessage()):(d.push("Unexpected call to ",a,b,"."),c&&d.push("\nNext expected call was to ",c.name,e));this.$throwException(d.join(""))};goog.testing.StrictMock=function(a,b,c){goog.testing.Mock.call(this,a,b,c);this.$expectations_=[]};goog.inherits(goog.testing.StrictMock,goog.testing.Mock);goog.testing.StrictMock.prototype.$recordExpectation=function(){this.$expectations_.push(this.$pendingExpectation)};
goog.testing.StrictMock.prototype.$recordCall=function(a,b){0==this.$expectations_.length&&this.$throwCallException(a,b);for(var c=this.$expectations_[0];!this.$verifyCall(c,a,b);)c.actualCalls<c.minCalls&&this.$throwCallException(a,b,c),this.$expectations_.shift(),1>this.$expectations_.length&&this.$throwCallException(a,b,c),c=this.$expectations_[0];0==c.maxCalls&&this.$throwCallException(a,b);c.actualCalls++;c.actualCalls==c.maxCalls&&this.$expectations_.shift();return this.$do(c,b)};
goog.testing.StrictMock.prototype.$reset=function(){goog.testing.StrictMock.superClass_.$reset.call(this);goog.array.clear(this.$expectations_)};goog.testing.StrictMock.prototype.$verify=function(){for(goog.testing.StrictMock.superClass_.$verify.call(this);0<this.$expectations_.length;){var a=this.$expectations_[0];a.actualCalls<a.minCalls?this.$throwException("Missing a call to "+a.name+"\nExpected: "+a.minCalls+" but was: "+a.actualCalls):this.$expectations_.shift()}};goog.testing.LooseExpectationCollection=function(){this.expectations_=[]};goog.testing.LooseExpectationCollection.prototype.addExpectation=function(a){this.expectations_.push(a)};goog.testing.LooseExpectationCollection.prototype.getExpectations=function(){return this.expectations_};goog.testing.LooseMock=function(a,b,c,d){goog.testing.Mock.call(this,a,c,d);this.$expectations_=new goog.structs.Map;this.$calls_=[];this.$ignoreUnexpectedCalls_=!!b};goog.inherits(goog.testing.LooseMock,goog.testing.Mock);
goog.testing.LooseMock.prototype.$setIgnoreUnexpectedCalls=function(a){this.$ignoreUnexpectedCalls_=a;return this};goog.testing.LooseMock.prototype.$recordExpectation=function(){this.$expectations_.containsKey(this.$pendingExpectation.name)||this.$expectations_.set(this.$pendingExpectation.name,new goog.testing.LooseExpectationCollection);this.$expectations_.get(this.$pendingExpectation.name).addExpectation(this.$pendingExpectation)};
goog.testing.LooseMock.prototype.$recordCall=function(a,b){if(!this.$expectations_.containsKey(a)){if(this.$ignoreUnexpectedCalls_)return;this.$throwCallException(a,b)}for(var c=null,d=this.$expectations_.get(a).getExpectations(),e=0;e<d.length;e++){var f=d[e];if(this.$verifyCall(f,a,b)&&(c=f,f.actualCalls<f.maxCalls))break}null==c&&this.$throwCallException(a,b,f);c.actualCalls++;c.actualCalls>c.maxCalls&&this.$throwException("Too many calls to "+c.name+"\nExpected: "+c.maxCalls+" but was: "+c.actualCalls);
this.$calls_.push([a,b]);return this.$do(c,b)};goog.testing.LooseMock.prototype.$reset=function(){goog.testing.LooseMock.superClass_.$reset.call(this);this.$expectations_=new goog.structs.Map;this.$calls_=[]};
goog.testing.LooseMock.prototype.$replay=function(){goog.testing.LooseMock.superClass_.$replay.call(this);for(var a=this.$expectations_.getValues(),b=0;b<a.length;b++)for(var c=a[b].getExpectations(),d=0;d<c.length;d++){var e=c[d];if(!isFinite(e.maxCalls))for(var f=d+1;f<c.length;f++){var g=c[f];if(0<g.minCalls&&goog.array.equals(e.argumentList,g.argumentList)){var g=e.name,h=this.$argumentsAsString(e.argumentList);this.$throwException(["Expected call to ",g," with arguments ",h," has an infinite max number of calls; can't expect an identical call later with a positive min number of calls"].join(""))}}}};
goog.testing.LooseMock.prototype.$verify=function(){goog.testing.LooseMock.superClass_.$verify.call(this);for(var a=this.$expectations_.getValues(),b=0;b<a.length;b++)for(var c=a[b].getExpectations(),d=0;d<c.length;d++){var e=c[d];e.actualCalls>e.maxCalls?this.$throwException("Too many calls to "+e.name+"\nExpected: "+e.maxCalls+" but was: "+e.actualCalls):e.actualCalls<e.minCalls&&this.$throwException("Not enough calls to "+e.name+"\nExpected: "+e.minCalls+" but was: "+e.actualCalls)}};goog.testing.FunctionMock=function(a,b){var c=function(){var b=Array.prototype.slice.call(arguments);b.splice(0,0,a||"[anonymous mocked function]");return c.$mockMethod.apply(c,b)};goog.object.extend(c,new (b===goog.testing.Mock.LOOSE?goog.testing.LooseMock:goog.testing.StrictMock)({}));return c};
goog.testing.MethodMock=function(a,b,c){if(!(b in a))throw Error(b+" is not a property of the given scope.");c=goog.testing.FunctionMock(b,c);c.$propertyReplacer_=new goog.testing.PropertyReplacer;c.$propertyReplacer_.set(a,b,c);c.$tearDown=goog.testing.MethodMock.$tearDown;return c};goog.testing.MethodMock.$tearDown=function(){this.$propertyReplacer_.reset()};goog.testing.GlobalFunctionMock=function(a,b){return goog.testing.MethodMock(goog.global,a,b)};
goog.testing.createFunctionMock=function(a,b){return goog.testing.FunctionMock(a,b)};goog.testing.createMethodMock=function(a,b,c){return goog.testing.MethodMock(a,b,c)};goog.testing.createConstructorMock=function(a,b,c){var d=a[b];a=goog.testing.MethodMock(a,b,c);for(var e in d)"superClass_"!=e&&"prototype"!=e&&d.hasOwnProperty(e)&&(a[e]=d[e]);return a};goog.testing.createGlobalFunctionMock=function(a,b){return goog.testing.GlobalFunctionMock(a,b)};xiv.ui.ViewBox=function(){nrg.ui.Component.call(this);this.ViewableTrees_=[];this.ViewableGroups_={};this.menus_={TOP:null,TOP_LEFT:null,LEFT:null,BOTTOM_LEFT:null,BOTTOM:null,BOTTOM_RIGHT:null,RIGHT:null,TOP_RIGHT:null};this.addMenu_topLeft_();this.viewFrameElt_=goog.dom.createDom("div",{id:xiv.ui.ViewBox.ID_PREFIX+"_ViewFrame_"+goog.string.createUniqueString(),"class":xiv.ui.ViewBox.CSS.VIEWFRAME});goog.dom.append(this.getElement(),this.viewFrameElt_);this.initProgressBarPanel_();this.updateStyle()};
goog.inherits(xiv.ui.ViewBox,nrg.ui.Component);goog.exportSymbol("xiv.ui.ViewBox",xiv.ui.ViewBox);xiv.ui.ViewBox.EventType={VIEWABLE_PRELOAD:goog.events.getUniqueId("viewable_preload"),VIEWABLE_LOADED:goog.events.getUniqueId("viewable_load"),VIEWABLE_LOADERROR:goog.events.getUniqueId("viewable_loaderror")};xiv.ui.ViewBox.ID_PREFIX="xiv.ui.ViewBox";
xiv.ui.ViewBox.CSS_SUFFIX={HIDDEN:"hidden",TABDRAGGER:"tabdragger",TABDRAGGER_HANDLE:"tabdragger-handle",VIEWLAYOUTMENU:"viewlayoutmenu",MENU_TOP_LEFT:"menu-top-left",MENU_LEFT:"menu-left",VIEWLAYOUTHANDLER:"viewlayouthandler",TABS:"ziptabs",TAB_BOUNDS:"ziptab-bounds",VIEWFRAME:"viewframe",COMPONENT_HIGHLIGHT:"component-highlight",VIEWABLEGROUPMENU:"viewablegroupmenu"};xiv.ui.ViewBox.defaultLayout={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};
xiv.ui.ViewBox.MIN_HOLDER_HEIGHT=200;xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT=15;xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH=50;xiv.ui.ViewBox.MIN_TAB_H_PCT=.2;xiv.ui.ViewBox.prototype.loadState_="empty";xiv.ui.ViewBox.prototype.toggleButtons_=null;xiv.ui.ViewBox.prototype.LayoutHandler_=null;xiv.ui.ViewBox.prototype.LayoutMenu_=null;xiv.ui.ViewBox.prototype.Renderer_=null;xiv.ui.ViewBox.prototype.ProgressBarPanel_=null;xiv.ui.ViewBox.prototype.ViewableGroupMenu_=null;xiv.ui.ViewBox.prototype.Dialogs_=null;
xiv.ui.ViewBox.prototype.InteractorHandler_=null;xiv.ui.ViewBox.prototype.hasLoadComponents_=!1;xiv.ui.ViewBox.prototype.getMenus=function(){return this.menus_};xiv.ui.ViewBox.prototype.getLoadState=function(){return this.loadState_};xiv.ui.ViewBox.prototype.getViewableTrees=function(){return this.ViewableTrees_};xiv.ui.ViewBox.prototype.getViewFrame=function(){return this.viewFrameElt_};xiv.ui.ViewBox.prototype.getLayoutHandler=function(){return this.LayoutHandler_};
xiv.ui.ViewBox.prototype.getViewableGroupMenu=function(){return this.ViewableGroupMenu_};xiv.ui.ViewBox.prototype.highlight=function(){goog.dom.classes.add(this.viewFrameElt_,xiv.ui.ViewBox.CSS.COMPONENT_HIGHLIGHT)};xiv.ui.ViewBox.prototype.unhighlight=function(){goog.dom.classes.remove(this.viewFrameElt_,xiv.ui.ViewBox.CSS.COMPONENT_HIGHLIGHT)};xiv.ui.ViewBox.prototype.getThumbnailLoadTime=function(){return this.thumbLoadTime_};
xiv.ui.ViewBox.prototype.clearThumbnailLoadTime=function(){this.thumbLoadTime_=void 0};xiv.ui.ViewBox.prototype.doNotHide=function(a){this.doNotHide_=this.doNotHide_?this.doNotHide_:[];this.doNotHide_.push(a)};xiv.ui.ViewBox.prototype.setLayout=function(a){this.LayoutMenu_.setSelected(a)};xiv.ui.ViewBox.prototype.onRenderStart_=function(){this.ProgressBarPanel_.setValue(0);this.ProgressBarPanel_.showValue(!0);this.showSubComponent_(this.ProgressBarPanel_,0);this.highlight()};
xiv.ui.ViewBox.prototype.setProgressBarPct_=function(a){this.ProgressBarPanel_.setLabel("");this.ProgressBarPanel_.showValue(!0);this.ProgressBarPanel_.setValue(100*a)};xiv.ui.ViewBox.prototype.onRendering_=function(a){this.highlight();this.setProgressBarPct_(a.value)};xiv.ui.ViewBox.ControllersSet=function(a,b){this.CONTROLLER=a;this.FOLDERS=b};
xiv.ui.ViewBox.prototype.hideProgressBarPanel_=function(a,b){this.progTimer_=goog.Timer.callOnce(function(){this.progTimer_=null;this.hideSubComponent_(this.ProgressBarPanel_,500,function(){this.updateStyle();goog.isDefAndNotNull(b)&&b()}.bind(this))}.bind(this),goog.isNumber(a)?a:1E3)};
xiv.ui.ViewBox.prototype.onRenderEnd_=function(a){this.toggleWaitForRenderErrors_(!1);goog.array.forEach(goog.dom.getElementsByClass("xtk-progress-bar"),function(a){a.visibility="hidden"});goog.isDefAndNotNull(this.ViewableTrees_[0].getOrientation())&&this.setLayout(this.ViewableTrees_[0].getOrientation());this.Dialogs_.createDialogs();this.fadeInLoadComponents_(0,null,null);this.InteractorHandler_.createInteractors();this.InteractorHandler_.applyAutoLevel();this.hideProgressBarPanel_(800,function(){this.ProgressBarPanel_.setValue(0);
this.updateStyle();this.onLayoutResize_();this.dispatchEvent(xiv.ui.ViewBox.EventType.VIEWABLE_LOADED);this.unhighlight()}.bind(this))};xiv.ui.ViewBox.prototype.onLayoutResize_=function(a){this.updateStyle_Renderer_();goog.isDefAndNotNull(this.InteractorHandler_)&&this.InteractorHandler_.update();if(goog.isDefAndNotNull(this.Renderer_))this.InteractorHandler_.onLayoutResize()};
xiv.ui.ViewBox.prototype.loadViewableTree_=function(a){this.ViewableGroupMenu_.reset();goog.object.clear(this.ViewableGroups_);goog.array.contains(this.ViewableTrees_,a)||this.ViewableTrees_.push(a);1==this.ViewableTrees_.length&&this.setLayout(xiv.ui.ViewBox.defaultLayout[a.getCategory()]);a=a.getViewableGroups();var b=null;1<a.length?(goog.array.forEach(a,function(a,d){b=this.ViewableGroupMenu_.createAndAddThumbnail(a.getThumbnailUrl(),a.getTitle()||d);this.ViewableGroups_[goog.getUid(b)]=a}.bind(this)),
this.showSubComponent_(this.ViewableGroupMenu_,400)):this.load(a[0],!1)};xiv.ui.ViewBox.prototype.showInUseDialog=function(){this.Dialogs_.showInUseDialog()};xiv.ui.ViewBox.prototype.checkInUseAndShowDialog=function(a){return goog.isDefAndNotNull(this.thumbLoadTime_)?(this.showInUseDialog(),this.Dialogs_.setInUseSelect(a),!0):!1};
xiv.ui.ViewBox.prototype.load=function(a,b){this.dispatchEvent(xiv.ui.ViewBox.EventType.VIEWABLE_PRELOAD);if(!this.checkInUseAndShowDialog(function(){this.thumbLoadTime_=void 0;this.load(a,b)}.bind(this)))if(goog.isDefAndNotNull(a)){if(b=goog.isDefAndNotNull(b)?b:!0)this.disposeLoadComponents_(),this.initLoadComponents_();this.hideSubComponent_(this.ViewableGroupMenu_,400);this.showSubComponent_(this.ProgressBarPanel_,0);if(a instanceof gxnat.vis.ViewableTree)this.loadViewableTree_(a);else{var c;
goog.object.forEach(this.Renderer_.getPlanes(),function(a,b){(c=this.LayoutHandler_.getCurrentLayoutFrame(b))&&a.init(c.getElement())}.bind(this));goog.events.listenOnce(this.Renderer_,xiv.vis.RenderEngine.EventType.RENDER_START,this.onRenderStart_.bind(this));goog.events.listenOnce(this.Renderer_,xiv.vis.RenderEngine.EventType.RENDER_END,this.onRenderEnd_.bind(this));goog.events.listen(this.Renderer_,xiv.vis.RenderEngine.EventType.RENDERING,this.onRendering_.bind(this));this.toggleWaitForRenderErrors_(!0);
"scans"==a.getCategory().toLowerCase()?this.renderScanViaZipDownload_(a):this.renderViewableSet_(a)}}else this.onRenderError_("The data set is empty!")};
xiv.ui.ViewBox.prototype.renderScanViaZipDownload_=function(a){this.showSubComponent_(this.ProgressBarPanel_,0);this.setProgressBarPct_(0);var b=this.ViewableTrees_[this.ViewableTrees_.length-1].getTotalSize(),c=a.getViewables()[0].getFiles()[0].split("/files/")[0]+"/files";gxnat.Zip.getFilesAsZip(c,function(b){a.getViewables()[0].setFileDataFromZip(b);this.renderViewableSet_(a)}.bind(this),function(a){this.highlight();this.setProgressBarPct_(a.loaded/b)}.bind(this))};
xiv.ui.ViewBox.prototype.renderViewableSet_=function(a){this.Renderer_.render(a);this.thumbLoadTime_=(new Date).getTime()};xiv.ui.ViewBox.prototype.toggleWaitForRenderErrors_=function(a){window.onerror=!0===a?function(a,c,d){this.onRenderError_(a)}.bind(this):void 0};
xiv.ui.ViewBox.prototype.onRenderError_=function(a){this.unhighlight();this.hideProgressBarPanel_();this.toggleWaitForRenderErrors_(!1);this.disposeLoadComponents_();a=a.replace("Uncaught Error: ","")||"A render error occured :(<br>";this.dispatchEvent({type:xiv.ui.ViewBox.EventType.THUMBNAIL_LOADERROR,message:a});var b=new nrg.ui.ErrorOverlay;b.addBackground();b.addCloseButton();var c=b.addImage();goog.dom.classes.add(c,nrg.ui.ErrorOverlay.CSS.NO_WEBGL_IMAGE);c.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";
b.addText(a||"");b.render(this.viewFrameElt_);b.getElement().style.opacity=0;b.getElement().style.zIndex=1E3;nrg.fx.fadeInFromZero(b.getElement(),xiv.ANIM_TIME)};xiv.ui.ViewBox.prototype.onLayoutChangeStart_=function(a){goog.object.forEach(this.Renderer_.getPlanes(),function(b,c){goog.isDefAndNotNull(a.transitionElements[c])&&(b.setContainer(a.transitionElements[c]),b.updateStyle())})};
xiv.ui.ViewBox.prototype.onLayoutChanging_=function(a){goog.object.forEach(this.Renderer_.getPlanes(),function(a,c){a.updateStyle()});this.InteractorHandler_.update()};xiv.ui.ViewBox.prototype.onLayoutChangeEnd_=function(a){var b=a.frames;goog.object.forEach(this.Renderer_.getPlanes(),function(a,d){goog.isDefAndNotNull(b[d])&&(a.setContainer(b[d].getElement()),a.updateStyle())}.bind(this));this.InteractorHandler_.update()};
xiv.ui.ViewBox.prototype.initLoadComponents_=function(){this.initToggleMenu_();this.initDialogs_();this.initLayoutHandler_();this.initRenderer_();this.initViewableGroupMenu_();this.initInteractorHandler_();this.InteractorHandler_.syncLayoutMenuToLayoutHandler(this.LayoutMenu_);this.hasLoadComponents_=!0};
xiv.ui.ViewBox.prototype.fadeInLoadComponents_=function(a,b,c,d){a=goog.isNumber(a)?a:500;var e=[],f=[this.menus_.LEFT,this.LayoutMenu_.getElement(),this.LayoutHandler_.getElement()];goog.array.forEach(f,function(b){e.push(nrg.fx.generateAnim_Fade(b,{opacity:0},{opacity:1},a))});nrg.fx.parallelAnimate(e,b,c,d)};
xiv.ui.ViewBox.prototype.hideSubComponent_=function(a,b,c){if(goog.isDefAndNotNull(a)){b=goog.isNumber(b)&&0<=b?b:0;var d=function(){a.getElement().style.visibility="hidden";a.getElement().style.zIndex="-1";c&&c()};"hidden"==a.getElement().style.visibility||0==b?d():nrg.fx.fadeOut(a.getElement(),b,d)}};
xiv.ui.ViewBox.prototype.showSubComponent_=function(a,b,c){b=goog.isNumber(b)&&0<=b?b:0;a.getElement().style.opacity="0";a.getElement().style.zIndex="1000";a.getElement().style.visibility="visible";0==b?(a.getElement().style.opacity="1",c&&c()):nrg.fx.fadeIn(a.getElement(),b,function(){c&&c()})};
xiv.ui.ViewBox.prototype.initProgressBarPanel_=function(){this.ProgressBarPanel_=new xiv.ui.ProgressBarPanel;goog.dom.append(this.viewFrameElt_,this.ProgressBarPanel_.getElement());this.ProgressBarPanel_.getElement().style.opacity=0;this.ProgressBarPanel_.getElement().style.zIndex=1E5;this.hideSubComponent_(this.ProgressBarPanel_)};xiv.ui.ViewBox.prototype.initDialogs_=function(){this.Dialogs_=new xiv.ui.ViewBoxDialogs(this)};
xiv.ui.ViewBox.prototype.initInteractorHandler_=function(){this.InteractorHandler_=new xiv.ui.ViewBoxInteractorHandler(this,this.Renderer_,this.LayoutHandler_,this.Dialogs_)};xiv.ui.ViewBox.prototype.addMenu_topLeft_=function(){this.menus_.TOP_LEFT=goog.dom.createDom("div",{id:xiv.ui.ViewBox.ID_PREFIX+"_menu_top_left_"+goog.string.createUniqueString(),"class":xiv.ui.ViewBox.CSS.MENU_TOP_LEFT,viewbox:this.getElement().id});goog.dom.append(this.getElement(),this.menus_.TOP_LEFT)};
xiv.ui.ViewBox.prototype.addMenu_left_=function(){this.menus_.LEFT=goog.dom.createDom("div",{id:xiv.ui.ViewBox.ID_PREFIX+"_menu_left_"+goog.string.createUniqueString(),"class":xiv.ui.ViewBox.CSS.MENU_LEFT,viewbox:this.getElement().id});this.menus_.LEFT.style.opacity=0;goog.dom.append(this.getElement(),this.menus_.LEFT)};
xiv.ui.ViewBox.prototype.addToMenu=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.menus_.TOP_LEFT;break;case "LEFT":d=this.menus_.LEFT;break;case "BOTTOM_LEFT":d=this.menus_.BOTTOM_LEFT;break;case "TOP_RIGHT":d=this.menus_.TOP_RIGHT;break;case "RIGHT":d=this.menus_.RIGHT;break;case "BOTTOM_RIGHT":d=this.menus_.BOTTOM_RIGHT}goog.isNumber(c)?
d.insertBefore(b,d.childNodes[c]):goog.dom.append(d,b)};
xiv.ui.ViewBox.prototype.createLayoutMenu_=function(){this.LayoutMenu_=new nrg.ui.SlideInMenu;this.addToMenu("LEFT",this.LayoutMenu_.getElement());goog.dom.classes.add(this.LayoutMenu_.getElement(),xiv.ui.ViewBox.CSS.VIEWLAYOUTMENU);this.LayoutMenu_.matchMenuIconToSelected(!0);this.LayoutMenu_.matchMenuTitleToSelected(!0);this.LayoutMenu_.getElement().style.opacity=0;this.LayoutMenu_.getMenuHolder().style.opacity=0;goog.dom.appendChild(this.viewFrameElt_,this.LayoutMenu_.getMenuHolder())};
xiv.ui.ViewBox.prototype.onToggleButtonClicked=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?goog.dom.classes.add(a,a.getAttribute(xiv.ui.ViewBoxDialogs.TOGGLED_CLASS)):goog.dom.classes.remove(a,a.getAttribute(xiv.ui.ViewBoxDialogs.TOGGLED_CLASS));goog.isDefAndNotNull(b)&&b(a)};xiv.ui.ViewBox.prototype.toggleButtonChecked=function(a){return"true"==this.toggleButtons_[a].getAttribute("checked").toString()};
xiv.ui.ViewBox.prototype.getToggleButton=function(a){return this.toggleButtons_[a]};xiv.ui.ViewBox.prototype.fireToggleButton=function(a){goog.testing.events.fireClickEvent(this.toggleButtons_[a])};xiv.ui.ViewBox.prototype.untoggle=function(a){goog.isArray(a)||(a=[a]);goog.array.forEach(a,function(a){goog.isDefAndNotNull(this.toggleButtons_[a])&&this.toggleButtonChecked(a)&&goog.testing.events.fireClickEvent(this.toggleButtons_[a])}.bind(this))};
xiv.ui.ViewBox.prototype.createToggleButton=function(a,b,c,d,e,f){var g=b+"-on",h=goog.dom.createDom("img",b);h.id=this.makeId("IconButton_");h.title=d;goog.isDefAndNotNull(f)&&(h.src=f);h.setAttribute("checked","true");h.setAttribute(xiv.ui.ViewBoxDialogs.TOGGLED_CLASS,b+"-on");goog.dom.classes.add(h,g);nrg.style.setStyle(h,{cursor:"pointer"});goog.events.listen(h,goog.events.EventType.CLICK,function(a){this.onToggleButtonClicked(h,e)}.bind(this));this.addToMenu(a,h);if(!goog.isDefAndNotNull(this.toggleButtons_))this.toggleButtons_=
{};else if(goog.isDefAndNotNull(this.toggleButtons_[c]))throw Error("Invalid identifier for toggle button.  In use.");return this.toggleButtons_[c]=h};xiv.ui.ViewBox.prototype.initToggleMenu_=function(){this.addMenu_left_();this.createLayoutMenu_()};
xiv.ui.ViewBox.prototype.initLayoutHandler_=function(){this.LayoutHandler_=new xiv.ui.layouts.LayoutHandler;this.LayoutHandler_.getElement().style.opacity=0;goog.dom.append(this.viewFrameElt_,this.LayoutHandler_.getElement());goog.dom.classes.add(this.LayoutHandler_.getElement(),xiv.ui.ViewBox.CSS.VIEWLAYOUTHANDLER);goog.events.listen(this.LayoutHandler_,xiv.ui.layouts.LayoutHandler.EventType.RESIZE,this.onLayoutResize_.bind(this));goog.events.listen(this.LayoutHandler_,xiv.ui.layouts.LayoutHandler.EventType.LAYOUT_CHANGE_START,
this.onLayoutChangeStart_.bind(this));goog.events.listen(this.LayoutHandler_,xiv.ui.layouts.LayoutHandler.EventType.LAYOUT_CHANGING,this.onLayoutChanging_.bind(this));goog.events.listen(this.LayoutHandler_,xiv.ui.layouts.LayoutHandler.EventType.LAYOUT_CHANGE_END,this.onLayoutChangeEnd_.bind(this))};
xiv.ui.ViewBox.prototype.initViewableGroupMenu_=function(){this.ViewableGroupMenu_=new xiv.ui.ViewableGroupMenu;this.ViewableGroupMenu_.render(this.viewFrameElt_);goog.dom.append(this.viewFrameElt_,this.ViewableGroupMenu_.getElement());goog.dom.append(this.viewFrameElt_,this.ViewableGroupMenu_.getBackground());goog.dom.classes.add(this.ViewableGroupMenu_.getElement(),xiv.ui.ViewBox.CSS.VIEWABLEGROUPMENU);goog.events.listen(this.ViewableGroupMenu_,xiv.ui.ViewableGroupMenu.EventType.VIEWSELECTED,function(a){this.load(this.ViewableGroups_[goog.getUid(a.thumbnail)],
!1)}.bind(this));this.hideSubComponent_(this.ViewableGroupMenu_)};xiv.ui.ViewBox.prototype.getToggleButtons=function(){return this.toggleButtons_};xiv.ui.ViewBox.prototype.initRenderer_=function(){this.Renderer_=new xiv.vis.XtkEngine;goog.events.listen(this.Renderer_,xiv.vis.XtkEngine.EventType.ERROR,function(a){this.onRenderError_(a.message)}.bind(this))};
xiv.ui.ViewBox.prototype.updateStyle=function(a){xiv.ui.ViewBox.superClass_.updateStyle.call(this,a);this.updateStyle_LayoutHandler_();this.updateStyle_Renderer_();this.updateStyle_LayoutMenu_();goog.isDefAndNotNull(this.Dialogs_)&&this.Dialogs_.update();goog.isDefAndNotNull(this.InteractorHandler_)&&this.InteractorHandler_.updateInteractorStyles()};
xiv.ui.ViewBox.prototype.updateStyle_LayoutMenu_=function(){if(goog.isDefAndNotNull(this.LayoutMenu_)){var a=goog.style.getSize(this.viewFrameElt_);this.LayoutMenu_.setHidePosition(-100,a.height/2-130);this.LayoutMenu_.setShowPosition(0,a.height/2-130)}};xiv.ui.ViewBox.prototype.updateStyle_LayoutHandler_=function(){goog.isDefAndNotNull(this.LayoutHandler_)&&this.LayoutHandler_.updateStyle()};xiv.ui.ViewBox.prototype.updateStyle_Renderer_=function(){this.Renderer_&&this.Renderer_.updateStyle()};
xiv.ui.ViewBox.prototype.disposeLoadComponents_=function(){goog.object.clear(this.ViewableGroups_);goog.array.clear(this.ViewableTrees_);goog.isDefAndNotNull(this.LayoutHandler_)&&(goog.events.removeAll(this.LayoutHandler_),goog.dispose(this.LayoutHandler_.dispose()),delete this.LayoutHandler_);goog.isDefAndNotNull(this.LayoutMenu_)&&(goog.events.removeAll(this.LayoutMenu_),this.LayoutMenu_.dispose(),delete this.LayoutMenu_);goog.isDefAndNotNull(this.Renderer_)&&(this.Renderer_.dispose(),delete this.Renderer_);
goog.isDefAndNotNull(this.ViewableGroupMenu_)&&(this.ViewableGroupMenu_.dispose(),delete this.ViewableGroupMenu_);goog.isDefAndNotNull(this.Dialogs_)&&this.Dialogs_.disposeInternal();goog.isDefAndNotNull(this.InteractorHandler_)&&this.InteractorHandler_.dispose();goog.isDefAndNotNull(this.toggleButtons_)&&(goog.dom.removeNode(this.menus_.LEFT),delete this.menus_.LEFT,goog.object.forEach(this.toggleButtons_,function(a){goog.events.removeAll(a);goog.dom.removeNode(a)}),goog.array.clear(this.toggleButtons_),
delete this.toggleButtons_)};
xiv.ui.ViewBox.prototype.disposeInternal=function(){xiv.ui.ViewBox.superClass_.disposeInternal.call(this);this.disposeLoadComponents_();goog.isDefAndNotNull(this.ProgressBarPanel_)&&(this.ProgressBarPanel_.dispose(),delete this.ProgressBarPanel_);goog.dom.removeNode(this.viewFrameElt_);goog.events.removeAll(this.viewFrameElt_);delete this.viewFrameElt_;goog.object.forEach(this.menus_,function(a,b){goog.dom.removeNode(a);delete this.menus_[b]}.bind(this));delete this.menus_;delete this.Viewables_;
delete this.hasLoadComponents_};goog.exportSymbol("xiv.ui.ViewBox.EventType",xiv.ui.ViewBox.EventType);goog.exportSymbol("xiv.ui.ViewBox.ID_PREFIX",xiv.ui.ViewBox.ID_PREFIX);goog.exportSymbol("xiv.ui.ViewBox.CSS_SUFFIX",xiv.ui.ViewBox.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ViewBox.defaultLayout",xiv.ui.ViewBox.defaultLayout);goog.exportSymbol("xiv.ui.ViewBox.MIN_HOLDER_HEIGHT",xiv.ui.ViewBox.MIN_HOLDER_HEIGHT);goog.exportSymbol("xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT",xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT);
goog.exportSymbol("xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH",xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH);goog.exportSymbol("xiv.ui.ViewBox.MIN_TAB_H_PCT",xiv.ui.ViewBox.MIN_TAB_H_PCT);goog.exportSymbol("xiv.ui.ViewBox.ControllersSet",xiv.ui.ViewBox.ControllersSet);goog.exportSymbol("xiv.ui.ViewBox.prototype.getMenus",xiv.ui.ViewBox.prototype.getMenus);goog.exportSymbol("xiv.ui.ViewBox.prototype.getLoadState",xiv.ui.ViewBox.prototype.getLoadState);
goog.exportSymbol("xiv.ui.ViewBox.prototype.getViewableTrees",xiv.ui.ViewBox.prototype.getViewableTrees);goog.exportSymbol("xiv.ui.ViewBox.prototype.getViewFrame",xiv.ui.ViewBox.prototype.getViewFrame);goog.exportSymbol("xiv.ui.ViewBox.prototype.getLayoutHandler",xiv.ui.ViewBox.prototype.getLayoutHandler);goog.exportSymbol("xiv.ui.ViewBox.prototype.getViewableGroupMenu",xiv.ui.ViewBox.prototype.getViewableGroupMenu);goog.exportSymbol("xiv.ui.ViewBox.prototype.highlight",xiv.ui.ViewBox.prototype.highlight);
goog.exportSymbol("xiv.ui.ViewBox.prototype.unhighlight",xiv.ui.ViewBox.prototype.unhighlight);goog.exportSymbol("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",xiv.ui.ViewBox.prototype.getThumbnailLoadTime);goog.exportSymbol("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",xiv.ui.ViewBox.prototype.clearThumbnailLoadTime);goog.exportSymbol("xiv.ui.ViewBox.prototype.doNotHide",xiv.ui.ViewBox.prototype.doNotHide);goog.exportSymbol("xiv.ui.ViewBox.prototype.setLayout",xiv.ui.ViewBox.prototype.setLayout);
goog.exportSymbol("xiv.ui.ViewBox.prototype.showInUseDialog",xiv.ui.ViewBox.prototype.showInUseDialog);goog.exportSymbol("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",xiv.ui.ViewBox.prototype.checkInUseAndShowDialog);goog.exportSymbol("xiv.ui.ViewBox.prototype.load",xiv.ui.ViewBox.prototype.load);goog.exportSymbol("xiv.ui.ViewBox.prototype.addToMenu",xiv.ui.ViewBox.prototype.addToMenu);goog.exportSymbol("xiv.ui.ViewBox.prototype.onToggleButtonClicked",xiv.ui.ViewBox.prototype.onToggleButtonClicked);
goog.exportSymbol("xiv.ui.ViewBox.prototype.toggleButtonChecked",xiv.ui.ViewBox.prototype.toggleButtonChecked);goog.exportSymbol("xiv.ui.ViewBox.prototype.getToggleButton",xiv.ui.ViewBox.prototype.getToggleButton);goog.exportSymbol("xiv.ui.ViewBox.prototype.fireToggleButton",xiv.ui.ViewBox.prototype.fireToggleButton);goog.exportSymbol("xiv.ui.ViewBox.prototype.untoggle",xiv.ui.ViewBox.prototype.untoggle);goog.exportSymbol("xiv.ui.ViewBox.prototype.createToggleButton",xiv.ui.ViewBox.prototype.createToggleButton);
goog.exportSymbol("xiv.ui.ViewBox.prototype.getToggleButtons",xiv.ui.ViewBox.prototype.getToggleButtons);goog.exportSymbol("xiv.ui.ViewBox.prototype.updateStyle",xiv.ui.ViewBox.prototype.updateStyle);goog.exportSymbol("xiv.ui.ViewBox.prototype.disposeInternal",xiv.ui.ViewBox.prototype.disposeInternal);goog.fx.DragDropGroup=function(){goog.fx.AbstractDragDrop.call(this)};goog.inherits(goog.fx.DragDropGroup,goog.fx.AbstractDragDrop);goog.fx.DragDropGroup.prototype.addItem=function(a,b){var c=new goog.fx.DragDropItem(a,b);this.addDragDropItem(c)};goog.fx.DragDropGroup.prototype.addDragDropItem=function(a){a.setParent(this);this.items_.push(a);this.isInitialized()&&this.initItem(a)};
goog.fx.DragDropGroup.prototype.removeItem=function(a){a=goog.dom.getElement(a);for(var b,c=0;b=this.items_[c];c++)if(b.element==a){this.items_.splice(c,1);this.disposeItem(b);break}};goog.fx.DragDropGroup.prototype.setSelection=function(a){};xiv.ui.ViewBoxHandler=function(){nrg.ui.Component.call(this)};goog.inherits(xiv.ui.ViewBoxHandler,nrg.ui.Component);goog.exportSymbol("xiv.ui.ViewBoxHandler",xiv.ui.ViewBoxHandler);xiv.ui.ViewBoxHandler.CSS_SUFFIX={HANDLE:"handle",VIEWBOXDRAGCLONE:"viewboxdragclone",CLOSEBUTTON:"closebutton",ADDROWBUTTON:"addrowbutton",ADDCOLUMNBUTTON:"addcolumnbutton"};
xiv.ui.ViewBoxHandler.EventType={VIEWABLE_PRELOAD:goog.events.getUniqueId("viewable_preload"),VIEWABLE_LOADED:goog.events.getUniqueId("viewable_load"),VIEWABLE_LOADERROR:goog.events.getUniqueId("viewable_loaderror"),VIEWBOXES_CHANGED:goog.events.getUniqueId("viewboxes_changed")};xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR="viewboxid";xiv.ui.ViewBoxHandler.ID_PREFIX="xiv.ui.ViewBoxHandler";xiv.ui.ViewBoxHandler.prototype.MAX_ROWS=5;xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS=5;
xiv.ui.ViewBoxHandler.prototype.ViewBoxesParent_=document.body;xiv.ui.ViewBoxHandler.prototype.onViewBoxesChanged_=function(a,b){this.dispatchEvent({type:xiv.ui.ViewBoxHandler.EventType.VIEWBOXES_CHANGED,newSet:a,animate:b})};xiv.ui.ViewBoxHandler.prototype.rowCount=function(){return this.ViewBoxes_.length};xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix=function(a){var b=[];goog.array.forEach(this.ViewBoxes_,function(a,d){b.push([]);goog.array.forEach(a,function(a){b[d].push(null)})});return b};
xiv.ui.ViewBoxHandler.prototype.loop=function(a){this.ViewBoxes_&&goog.array.forEach(this.ViewBoxes_,function(b,c){goog.array.forEach(b,function(d,e){a(d,c,e,this.ViewBoxes_.length,b.length)}.bind(this))}.bind(this))};
xiv.ui.ViewBoxHandler.prototype.insertColumn=function(a,b){this.ViewBoxes_||(this.ViewBoxes_=[[]]);var c=0,d=[],e;if(goog.isDefAndNotNull(a))c=this.getViewBoxIndices_(a),this.ViewBoxes_[c.i].length<this.MAX_COLUMNS&&(d.push(this.createViewBox_()),goog.array.insertAt(this.ViewBoxes_[c.i],d[0],c.j+1));else{d=[];e=this.ViewBoxes_.length?this.ViewBoxes_.length:1;for(c=0;c<e;c++)d.push(this.createViewBox_());0===this.ViewBoxes_.length?this.ViewBoxes_.push([d[0]]):goog.array.forEach(this.ViewBoxes_,function(a,
b){a.push(d[b])})}this.onViewBoxesChanged_(d,void 0===b?!0:b);this.resetDragDropGroup_()};xiv.ui.ViewBoxHandler.prototype.removeColumn=function(a){this.ViewBoxes_&&(a=void 0===a?!0:a,this.ViewBoxes_[0]&&1<this.ViewBoxes_[0].length&&goog.array.forEach(this.ViewBoxes_,function(a,c){var d=a.length-1;this.removeViewBox_(a[d]);a.splice(d,1)}.bind(this)),this.onViewBoxesChanged_(null,a),this.resetDragDropGroup_())};
xiv.ui.ViewBoxHandler.prototype.getViewBoxIndices_=function(a){for(var b=0,c=0,d=this.ViewBoxes_.length,e=0,b=0;b<d;b++)for(c=0,e=this.ViewBoxes_[b].length;c<e;c++)if(a===this.ViewBoxes_[b][c])return{i:b,j:c}};
xiv.ui.ViewBoxHandler.prototype.insertRow=function(a,b){this.ViewBoxes_||(this.ViewBoxes_=[[]]);var c=[],d,e;if(goog.isDefAndNotNull(a)){var f=this.getViewBoxIndices_(a),c=[];e=this.ViewBoxes_[f.i].length;if(this.ViewBoxes_.length<this.MAX_ROWS){for(d=0;d<e;d++)c.push(this.createViewBox_());goog.array.insertAt(this.ViewBoxes_,c,f.i+1)}}else if(e=this.ViewBoxes_[0]&&this.ViewBoxes_[0].length?this.ViewBoxes_[0].length:1,this.ViewBoxes_.length<this.MAX_ROWS){for(d=0;d<e;d++)c.push(this.createViewBox_());
this.ViewBoxes_.push(c)}this.onViewBoxesChanged_(c,void 0===b?!0:b);this.resetDragDropGroup_()};xiv.ui.ViewBoxHandler.prototype.removeRow=function(a){this.ViewBoxes_&&(a=void 0===a?!0:a,1<this.ViewBoxes_.length&&(goog.array.forEach(this.ViewBoxes_[this.ViewBoxes_.length-1],function(a){this.removeViewBox_(a)}.bind(this)),this.ViewBoxes_.splice(this.ViewBoxes_.length-1,1)),this.onViewBoxesChanged_(null,a),this.resetDragDropGroup_())};
xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement=function(a){for(var b=0,c=0,d=this.ViewBoxes_.length,e=0,b=0;b<d;b++)for(c=0,e=this.ViewBoxes_[b].length;c<e;c++)if(a===this.ViewBoxes_[b][c].getElement())return this.ViewBoxes_[b][c]};xiv.ui.ViewBoxHandler.prototype.getViewBoxElement=function(a,b){return this.ViewBoxes_[a][b].getElement()};xiv.ui.ViewBoxHandler.prototype.getViewBox=function(a,b){return this.ViewBoxes_[a][b]};
xiv.ui.ViewBoxHandler.prototype.getViewBoxes=function(){var a=[];this.loop(function(b){a.push(b)});return a};xiv.ui.ViewBoxHandler.prototype.getViewBoxElements=function(){var a=[];this.loop(function(b){a.push(b.getElement())});return a};xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent=function(a){this.ViewBoxesParent_=a};
xiv.ui.ViewBoxHandler.prototype.createViewBox_=function(){var a=new xiv.ui.ViewBox;goog.dom.append(this.ViewBoxesParent_,a.getElement());this.addCloseButton_(a);this.addDragDropHandle_(a);this.addAddRowButton_(a);this.addAddColumnButton_(a);this.setViewBoxEvents_(a);return a};
xiv.ui.ViewBoxHandler.prototype.addAddColumnButton_=function(a){var b=goog.dom.createDom("img",{id:xiv.ui.ViewBoxHandler.ID_PREFIX+"_CloseButton_"+goog.string.createUniqueString(),"class":xiv.ui.ViewBoxHandler.CSS.ADDCOLUMNBUTTON,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});nrg.style.setHoverClass(b,xiv.ui.ViewBoxHandler.CSS.ADDCOLUMNBUTTON+"-hovered");goog.events.listen(b,goog.events.EventType.CLICK,function(){this.insertColumn(a)}.bind(this));b.setAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR,
a.getElement().id);a.addToMenu("TOP_LEFT",b,1);this.addColumnButtons_||(this.addColumnButtons_={});this.addColumnButtons_[a.getElement().id]=b;b.title="Add ViewBox Column."};
xiv.ui.ViewBoxHandler.prototype.addAddRowButton_=function(a){var b=goog.dom.createDom("img",{id:xiv.ui.ViewBoxHandler.ID_PREFIX+"_CloseButton_"+goog.string.createUniqueString(),"class":xiv.ui.ViewBoxHandler.CSS.ADDROWBUTTON,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});nrg.style.setHoverClass(b,xiv.ui.ViewBoxHandler.CSS.ADDROWBUTTON+"-hovered");goog.events.listen(b,goog.events.EventType.CLICK,function(){this.insertRow(a)}.bind(this));b.setAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR,
a.getElement().id);a.addToMenu("TOP_LEFT",b,1);this.addRowButtons_||(this.addRowButtons_={});this.addRowButtons_[a.getElement().id]=b;b.title="Close ViewBox."};
xiv.ui.ViewBoxHandler.prototype.addCloseButton_=function(a){var b=goog.dom.createDom("img",{id:xiv.ui.ViewBoxHandler.ID_PREFIX+"_CloseButton_"+goog.string.createUniqueString(),"class":xiv.ui.ViewBoxHandler.CSS.CLOSEBUTTON,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});nrg.style.setHoverClass(b,xiv.ui.ViewBoxHandler.CSS.CLOSEBUTTON+"-hovered");goog.events.listen(b,goog.events.EventType.CLICK,function(){this.onViewBoxClosed_(a)}.bind(this));b.setAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR,
a.getElement().id);a.addToMenu("TOP_LEFT",b,1);this.closeButtons_||(this.closeButtons_={});this.closeButtons_[a.getElement().id]=b;b.title="Close ViewBox."};
xiv.ui.ViewBoxHandler.prototype.addDragDropHandle_=function(a){var b=goog.dom.createDom("img",{id:xiv.ui.ViewBoxHandler.ID_PREFIX+"_dragHandle_"+goog.string.createUniqueString(),"class":xiv.ui.ViewBoxHandler.CSS.HANDLE});b.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";b.setAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR,a.getElement().id);a.addToMenu("TOP_LEFT",b,1);this.dragDropHandles_||(this.dragDropHandles_={});this.dragDropHandles_[a.getElement().id]=b;b.title="Drag and drop view box to swap."};
xiv.ui.ViewBoxHandler.prototype.onThumbnailLoaded_=function(a){this.dispatchEvent({type:xiv.ui.ViewBoxHandler.EventType.VIEWABLE_LOADED,ViewBox:a.target})};xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode=function(a,b){this.loop(function(c){goog.array.contains(c.getViewableTrees(),a)&&b(c)})};xiv.ui.ViewBoxHandler.prototype.onThumbnailPreload_=function(a){this.dispatchEvent({type:xiv.ui.ViewBoxHandler.EventType.VIEWABLE_PRELOAD,ViewBox:a.target})};
xiv.ui.ViewBoxHandler.prototype.onThumbnailLoadError_=function(a){this.dispatchEvent({type:xiv.ui.ViewBoxHandler.EventType.VIEWABLE_LOADERROR,ViewBox:a.target})};xiv.ui.ViewBoxHandler.prototype.setViewBoxEvents_=function(a){goog.events.listen(a,xiv.ui.ViewBox.EventType.VIEWABLE_LOADED,this.onThumbnailLoaded_.bind(this));goog.events.listen(a,xiv.ui.ViewBox.EventType.VIEWABLE_PRELOAD,this.onThumbnailPreload_.bind(this));goog.events.listen(a,xiv.ui.ViewBox.EventType.VIEWABLE_LOADERROR,this.onThumbnailLoadError_.bind(this))};
xiv.ui.ViewBoxHandler.prototype.removeViewBox_=function(a){nrg.fx.fadeTo(a.getElement(),nrg.ui.Component.animationLengths.FAST,0);goog.dom.removeNode(this.dragDropHandles_[a.getElement().id]);goog.dom.removeNode(this.closeButtons_[a.getElement().id]);a.dispose()};
xiv.ui.ViewBoxHandler.prototype.adjustToClose_=function(a){var b=[],c;this.removeViewBox_(a);goog.array.forEach(this.ViewBoxes_,function(a,e){c=[];goog.array.forEach(a,function(a,b){a.isDisposed()||(window.console.log(a.getElement()),c.push(a))}.bind(this));0!=c.length&&b.push(c)}.bind(this));this.ViewBoxes_=b;this.onViewBoxesChanged_(null,!0);this.resetDragDropGroup_()};
xiv.ui.ViewBoxHandler.prototype.onViewBoxClosed_=function(a){1!=this.numViewBoxes()&&(a.checkInUseAndShowDialog(function(){this.adjustToClose_(a)}.bind(this))||this.adjustToClose_(a))};xiv.ui.ViewBoxHandler.prototype.isMatch=function(a,b){var c=a===b,d=a.getElement()===b,e=a.getElement().id===b;return c||d||e};
xiv.ui.ViewBoxHandler.prototype.swap=function(a,b){for(var c,d,e,f,g=0,h=0,k=this.ViewBoxes_.length,g=0;g<k;g++)for(var l=this.ViewBoxes_[g].length,h=0;h<l;h++){var m=this.ViewBoxes_[g][h];if(this.isMatch(m,a)){c=g;d=h;break}if(this.isMatch(m,b)){e=g;f=h;break}}goog.isNumber(c)&&goog.isNumber(e)&&(g=this.ViewBoxes_[c][d],this.ViewBoxes_[c][d]=this.ViewBoxes_[e][f],this.ViewBoxes_[e][f]=g,g=goog.style.getSize(this.ViewBoxes_[c][d].getElement()),h=goog.style.getSize(this.ViewBoxes_[e][f].getElement()),
goog.style.setSize(this.ViewBoxes_[e][f].getElement(),g),goog.style.setSize(this.ViewBoxes_[c][d].getElement(),h),this.onViewBoxesChanged_())};xiv.ui.ViewBoxHandler.prototype.numViewBoxes=function(){var a=0;this.loop(function(b){a++});return a};
xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter=function(a){for(var b=0,c=0,d=this.ViewBoxes_.length,e=0,f=e=0,b=0;b<d;b++)for(c=0,e=this.ViewBoxes_[b].length;c<e;c++)if(this.ViewBoxes_[b][c]===a)return e=b+1===this.ViewBoxes_.length,f=c+1===this.ViewBoxes_[b].length,e&&f?this.ViewBoxes_[0][0]:e&&!f?this.ViewBoxes_[0][c+1]:!e&&f?this.ViewBoxes_[b+1][0]:this.ViewBoxes_[b+1][c+1]};
xiv.ui.ViewBoxHandler.prototype.getFirstEmpty=function(){var a;this.loop(function(b){goog.isDefAndNotNull(a)||goog.isDefAndNotNull(b.getThumbnailLoadTime())||(a=b)}.bind(this));if(goog.isDefAndNotNull(a))return a;var b=this.getViewBoxes();goog.isArray(b)?b.sort(function(a,b){return a.getThumbnailLoadTime()<b.getThumbnailLoadTime()?-1:a.getThumbnailLoadTime()>b.getThumbnailLoadTime()?1:0}):b=[b];return b[0]};
xiv.ui.ViewBoxHandler.prototype.generateSlide_=function(a,b,c,d){return new goog.fx.dom.Slide(a,[a.offsetLeft,a.offsetTop],[b,c],d,goog.fx.easing.easeOut)};xiv.ui.ViewBoxHandler.prototype.animateSwap_=function(a,b,c,d){d=new goog.fx.AnimationParallelQueue;var e=c[a.id].relative;c=c[b.id].relative;d.add(this.generateSlide_(a,c.left,c.top,nrg.ui.Component.animationLengths.MEDIUM));d.add(this.generateSlide_(b,e.left,e.top,nrg.ui.Component.animationLengths.MEDIUM));d.play()};
xiv.ui.ViewBoxHandler.prototype.clearDragDropGroups_=function(){this.dragDropGroup_&&(this.dragDropGroup_.removeItems(),this.dragDropTargets_.removeItems(),delete this.dragDropGroup_,delete this.dragDropTargets_)};xiv.ui.ViewBoxHandler.prototype.addElementsToDragDropGroups_=function(){this.loop(function(a){goog.isDefAndNotNull(a.getElement())&&(this.dragDropGroup_.addItem(this.dragDropHandles_[a.getElement().id]),this.dragDropTargets_.addItem(a.getElement()))}.bind(this))};
xiv.ui.ViewBoxHandler.prototype.setDragEvents_=function(){goog.events.listen(this.dragDropGroup_,"dragstart",this.onDragStart_.bind(this));goog.events.listen(this.dragDropGroup_,"dragover",this.onDragOver_.bind(this));goog.events.listen(this.dragDropGroup_,"dragend",this.onDragEnd_.bind(this))};
xiv.ui.ViewBoxHandler.prototype.resetDragDropGroup_=function(){this.clearDragDropGroups_();this.dragDropGroup_=new goog.fx.DragDropGroup;this.dragDropTargets_=new goog.fx.DragDropGroup;this.addElementsToDragDropGroups_();this.dragDropGroup_.addTarget(this.dragDropTargets_);this.dragDropGroup_.init();this.dragDropTargets_.init();this.dragDropGroup_.createDragElement=this.createDragElement_.bind(this);this.setDragEvents_()};
xiv.ui.ViewBoxHandler.prototype.createDragElement_=function(a){return this.makeDragClone_(goog.dom.getElement(a.getAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR)),document.body)};xiv.ui.ViewBoxHandler.prototype.onDragStart_=function(a){this.ViewBoxPositions_={};this.loop(function(a){this.ViewBoxPositions_[a.getElement().id]={absolute:nrg.style.absolutePosition(a.getElement()),relative:nrg.style.dims(a.getElement())};this.dragDropHandles_[a.getElement().id].style.visibility="hidden"}.bind(this))};
xiv.ui.ViewBoxHandler.prototype.makeDragClone_=function(a,b){var c=a.cloneNode(!1);goog.dom.classes.set(c,xiv.ui.ViewBoxHandler.CSS.VIEWBOXDRAGCLONE);b&&b.appendChild(c);return c};
xiv.ui.ViewBoxHandler.prototype.onDragOver_=function(a){if(a.dropTargetItem.element.id!==a.dragSourceItem.currentDragElement_.getAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR)){var b=goog.dom.getElement(a.dragSourceItem.currentDragElement_.getAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR));a=goog.dom.getElement(a.dropTargetItem.element.id);this.swap(b,a);this.animateSwap_(b,a,this.ViewBoxPositions_);this.updatePositionsFromSwap_(b,a)}};
xiv.ui.ViewBoxHandler.prototype.updatePositionsFromSwap_=function(a,b){var c=this.ViewBoxPositions_[a.id];this.ViewBoxPositions_[a.id]=this.ViewBoxPositions_[b.id];this.ViewBoxPositions_[b.id]=c};
xiv.ui.ViewBoxHandler.prototype.onDragEnd_=function(a){var b=a.dragSourceItem.parent_.dragEl_;a=goog.dom.getElement(a.dragSourceItem.currentDragElement_.getAttribute(xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR));a=nrg.style.absolutePosition(a);var c=this.createDraggerClone_(b);this.repositionDraggerClone_(b,c);this.createDragEndAnim_(c,a).play();this.showDragDropHandles_()};
xiv.ui.ViewBoxHandler.prototype.createDraggerClone_=function(a){a=this.makeDragClone_(a,document.body);goog.dom.append(this.ViewBoxesParent_.parentNode?this.ViewBoxesParent_.parentNode:this.ViewBoxesParent_,a);return a};xiv.ui.ViewBoxHandler.prototype.repositionDraggerClone_=function(a,b){var c=nrg.style.absolutePosition(a);nrg.style.setStyle(b,{top:c.top,left:c.left,"z-index":1E4})};
xiv.ui.ViewBoxHandler.prototype.createDragEndAnim_=function(a,b){var c=new goog.fx.AnimationParallelQueue;c.add(this.generateSlide_(a,b.left,b.top,nrg.ui.Component.animationLengths.FAST));goog.events.listen(c,"end",function(){goog.dom.removeNode(a)});return c};xiv.ui.ViewBoxHandler.prototype.showDragDropHandles_=function(){this.loop(function(a){this.dragDropHandles_[a.getElement().id].style.visibility="visible"}.bind(this))};
xiv.ui.ViewBoxHandler.prototype.disposeInternal=function(){xiv.ui.ViewBoxHandler.superClass_.disposeInternal.call(this);this.loop(function(a){goog.events.removeAll(a);goog.dom.removeNode(a.getElement());a.dispose()}.bind(this));goog.array.forEach(this.ViewBoxes_,function(a){goog.array.clear(a)});goog.array.clear(this.ViewBoxes_);delete this.ViewBoxes_;this.disposeElementMap(this.dragDropHandles_);delete this.dragDropHandles_;this.disposeElementMap(this.closeButtons_);delete this.closeButtons_;goog.object.forEach(this.ViewBoxPositions_,
function(a,b){goog.object.clear(this.ViewBoxPositions_[b]);delete this.ViewBoxPositions_[b]}.bind(this));goog.object.clear(this.ViewBoxPositions_);delete this.ViewBoxPositions_;goog.isDefAndNotNull(this.dragDropGroup_)&&(goog.events.removeAll(this.dragDropGroup_),this.dragDropGroup_.dispose());delete this.dragDropGroup_;goog.isDefAndNotNull(this.dragDropTargets_)&&(goog.events.removeAll(this.dragDropTargets_),this.dragDropTargets_.dispose());delete this.dragDropTargets_;delete this.ViewBoxesParent_};
goog.exportSymbol("xiv.ui.ViewBoxHandler.CSS_SUFFIX",xiv.ui.ViewBoxHandler.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ViewBoxHandler.EventType",xiv.ui.ViewBoxHandler.EventType);goog.exportSymbol("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR",xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR);goog.exportSymbol("xiv.ui.ViewBoxHandler.ID_PREFIX",xiv.ui.ViewBoxHandler.ID_PREFIX);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",xiv.ui.ViewBoxHandler.prototype.MAX_ROWS);
goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.rowCount",xiv.ui.ViewBoxHandler.prototype.rowCount);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.loop",xiv.ui.ViewBoxHandler.prototype.loop);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.insertColumn",xiv.ui.ViewBoxHandler.prototype.insertColumn);
goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.removeColumn",xiv.ui.ViewBoxHandler.prototype.removeColumn);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.insertRow",xiv.ui.ViewBoxHandler.prototype.insertRow);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.removeRow",xiv.ui.ViewBoxHandler.prototype.removeRow);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement);
goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",xiv.ui.ViewBoxHandler.prototype.getViewBoxElement);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getViewBox",xiv.ui.ViewBoxHandler.prototype.getViewBox);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",xiv.ui.ViewBoxHandler.prototype.getViewBoxes);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",xiv.ui.ViewBoxHandler.prototype.getViewBoxElements);
goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.isMatch",xiv.ui.ViewBoxHandler.prototype.isMatch);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.swap",xiv.ui.ViewBoxHandler.prototype.swap);
goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",xiv.ui.ViewBoxHandler.prototype.numViewBoxes);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",xiv.ui.ViewBoxHandler.prototype.getFirstEmpty);goog.exportSymbol("xiv.ui.ViewBoxHandler.prototype.disposeInternal",xiv.ui.ViewBoxHandler.prototype.disposeInternal);xiv.ui.Thumbnail=function(a){nrg.ui.Thumbnail.call(this);this.setBrokenThumbnailUrl(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.updateHoverable.bind(this));this.ViewableTree_=a;this.createText_();this.createHoverable()};goog.inherits(xiv.ui.Thumbnail,nrg.ui.Thumbnail);goog.exportSymbol("xiv.ui.Thumbnail",xiv.ui.Thumbnail);xiv.ui.Thumbnail.ID_PREFIX="xiv.ui.Thumbnail";xiv.ui.Thumbnail.CSS_SUFFIX={};
xiv.ui.Thumbnail.prototype.updateHoverable=function(){var a=goog.dom.getElementsByTagNameAndClass("img",nrg.ui.Thumbnail.CSS.IMAGE,this.getHoverable()),a=a[0];a.src=this.getImage().src};xiv.ui.Thumbnail.prototype.createHoverable=function(){xiv.ui.Thumbnail.superClass_.createHoverable.call(this);goog.dom.classes.add(this.getHoverable(),xiv.ui.Thumbnail.CSS_CLASS_PREFIX)};
xiv.ui.Thumbnail.prototype.createText_=function(){var a="",b=this.ViewableTree_.getSessionInfo();if(goog.isDefAndNotNull(b["Scan ID"]))a+=b["Scan ID"];else if(goog.isDefAndNotNull(this.ViewableTree_.getQueryUrl()))var c=this.ViewableTree_.getQueryUrl().split("/"),a=a+c[c.length-1].split(".")[0];var d="",d=d+("<b><font size = '3'>"+a+"</font></b><br>");goog.array.forEach(["Total Frames","Scan Type","Orientation"],function(a){goog.isDefAndNotNull(b[a])&&(d+="<font size = '1.5'>"+a+": "+b[a]+"<br>")}.bind(this));
this.setText(d)};xiv.ui.Thumbnail.prototype.getViewable=function(){return this.ViewableTree_};xiv.ui.Thumbnail.prototype.disposeInternal=function(){xiv.ui.Thumbnail.superClass_.disposeInternal.call(this);this.ViewableTree_.dispose();delete this.ViewableTree_};goog.exportSymbol("xiv.ui.Thumbnail.ID_PREFIX",xiv.ui.Thumbnail.ID_PREFIX);goog.exportSymbol("xiv.ui.Thumbnail.CSS_SUFFIX",xiv.ui.Thumbnail.CSS_SUFFIX);goog.exportSymbol("xiv.ui.Thumbnail.prototype.updateHoverable",xiv.ui.Thumbnail.prototype.updateHoverable);
goog.exportSymbol("xiv.ui.Thumbnail.prototype.createHoverable",xiv.ui.Thumbnail.prototype.createHoverable);goog.exportSymbol("xiv.ui.Thumbnail.prototype.getViewable",xiv.ui.Thumbnail.prototype.getViewable);goog.exportSymbol("xiv.ui.Thumbnail.prototype.disposeInternal",xiv.ui.Thumbnail.prototype.disposeInternal);xiv.ui.ThumbnailGallery=function(){nrg.ui.ThumbnailGallery.call(this);this.initDragDrop_()};goog.inherits(xiv.ui.ThumbnailGallery,nrg.ui.ThumbnailGallery);goog.exportSymbol("xiv.ui.ThumbnailGallery",xiv.ui.ThumbnailGallery);
xiv.ui.ThumbnailGallery.EventType={MOUSEOVER:goog.events.getUniqueId("mouseover"),MOUSEOUT:goog.events.getUniqueId("mouseout"),THUMBNAIL_DRAG_OVER:goog.events.getUniqueId("thumbnail-drag-over"),THUMBNAIL_DRAG_OUT:goog.events.getUniqueId("thumbnail-drag-out"),THUMBNAIL_CLICK:goog.events.getUniqueId("thumbnailclick"),THUMBNAIL_DROPPED_INTO_TARGET:goog.events.getUniqueId("thumbnail-dropped-into-target")};xiv.ui.ThumbnailGallery.ID_PREFIX="xiv.ui.ThumbnailGallery";xiv.ui.ThumbnailGallery.CSS_SUFFIX={THUMBNAIL_DRAGGING:"thumbnail-dragging"};
xiv.ui.ThumbnailGallery.ANIM_MED=300;xiv.ui.ThumbnailGallery.DRAGGER_ID="THUMBNAIL_DRAGGER_"+goog.string.createUniqueString();xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID=xiv.ui.ThumbnailGallery.DRAGGER_ID+"_FADER"+goog.string.createUniqueString();xiv.ui.ThumbnailGallery.prototype.thumbnailDragDropGroup_=null;xiv.ui.ThumbnailGallery.prototype.thumbnailTargetGroup_=null;xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail=function(a,b){var c=this.createThumbnail(a);this.addThumbnail(c,b);return c};
xiv.ui.ThumbnailGallery.prototype.createThumbnail=function(a){var b=new xiv.ui.Thumbnail(a);goog.events.listen(b,nrg.ui.Thumbnail.EventType.CLICK,function(){this.dispatchEvent({type:xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_CLICK,Thumbnail:b})}.bind(this));return b};xiv.ui.ThumbnailGallery.prototype.addThumbnail=function(a,b){xiv.ui.ThumbnailGallery.superClass_.addThumbnail.call(this,a,b);this.addDragDropSource_(a)};xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets=function(a){this.thumbnailTargetGroup_.removeItems()};
xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget=function(a){this.thumbnailTargetGroup_.addItem(a)};xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets=function(a){goog.array.forEach(a,function(a){this.addThumbnailDropTarget(a)}.bind(this))};xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement=function(a){return this.Thumbs_[a.id]};
xiv.ui.ThumbnailGallery.prototype.clearDragDropGroups_=function(){goog.isDefAndNotNull(this.thumbnailDragDropGroup_)&&(this.thumbnailDragDropGroup_.removeItems(),this.thumbnailDragDropGroup_.dispose(),this.thumbnailDragDropGroup=null);goog.isDefAndNotNull(this.thumbnailTargetGroup_)&&(this.thumbnailTargetGroup_.removeItems(),this.thumbnailTargetGroup_.dispose(),this.thumbnailTargetGroup=null)};
xiv.ui.ThumbnailGallery.prototype.initDragDrop_=function(){this.thumbnailDragDropGroup_=new goog.fx.DragDropGroup;this.thumbnailTargetGroup_=new goog.fx.DragDropGroup;this.thumbnailDragDropGroup_.createDragElement=this.createDragElement_.bind(this);goog.events.listen(this.thumbnailDragDropGroup_,"dragover",this.onDragOver_.bind(this));goog.events.listen(this.thumbnailDragDropGroup_,"dragend",this.onDragEnd_.bind(this));goog.events.listen(this.thumbnailDragDropGroup_,"dragout",this.onDragOut_.bind(this));
goog.events.listen(this.thumbnailTargetGroup_,"drop",this.onDrop_.bind(this));this.thumbnailDragDropGroup_.addTarget(this.thumbnailTargetGroup_);this.thumbnailTargetGroup_.init();this.thumbnailDragDropGroup_.init()};
xiv.ui.ThumbnailGallery.prototype.createDragElement_=function(a){a=goog.dom.getAncestorByTagNameAndClass(a,"div",xiv.ui.Thumbnail.ELEMENT_CLASS).id.replace(nrg.ui.Thumbnail.HOVERABLE_PREFIX,"");if(goog.object.containsKey(this.Thumbs_,a))return this.Thumbs_[a].setActive(!0,!0),a=this.Thumbs_[a].getElement().cloneNode(!0),a.setAttribute("id",xiv.ui.ThumbnailGallery.DRAGGER_ID+a.id),goog.dom.classes.add(a,xiv.ui.ThumbnailGallery.CSS.THUMBNAIL_DRAGGING),a};
xiv.ui.ThumbnailGallery.prototype.onDragOver_=function(a){this.dispatchEvent({type:xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_DRAG_OVER,thumbnailTargetElement:a.dropTargetItem.element})};xiv.ui.ThumbnailGallery.prototype.onDragOut_=function(a){this.dispatchEvent({type:xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_DRAG_OUT,thumbnailTargetElement:a.dropTargetItem.element})};
xiv.ui.ThumbnailGallery.prototype.onDragEnd_=function(a){a=goog.dom.getElementsByClass(xiv.ui.ThumbnailGallery.CSS.THUMBNAIL_DRAGGING);goog.array.forEach(a,function(a){nrg.fx.fadeOut(a,xiv.ui.ThumbnailGallery.ANIM_MED,function(){goog.dom.removeNode(a)})});goog.isDefAndNotNull(a[0])&&this.Thumbs_[a[0].id.replace(xiv.ui.ThumbnailGallery.DRAGGER_ID,"")].setActive(!1,!0)};
xiv.ui.ThumbnailGallery.prototype.onDrop_=function(a){var b=goog.dom.getElementByClass(xiv.ui.ThumbnailGallery.CSS.THUMBNAIL_DRAGGING);if(goog.isDefAndNotNull(b)){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);goog.dom.removeNode(b);a.dropTargetItem.element&&this.dispatchEvent({type:xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_DROPPED_INTO_TARGET,Thumbnail:this.Thumbs_[b.id.replace(xiv.ui.ThumbnailGallery.DRAGGER_ID,"")],targetElement:a.dropTargetItem.element})}};
xiv.ui.ThumbnailGallery.prototype.addDragDropSource_=function(a){(a=a.getHoverable())&&this.thumbnailDragDropGroup_.addItem(a)};xiv.ui.ThumbnailGallery.prototype.disposeInternal=function(){xiv.ui.ThumbnailGallery.superClass_.disposeInternal.call(this);this.clearDragDropGroups_()};goog.exportSymbol("xiv.ui.ThumbnailGallery.EventType",xiv.ui.ThumbnailGallery.EventType);goog.exportSymbol("xiv.ui.ThumbnailGallery.ID_PREFIX",xiv.ui.ThumbnailGallery.ID_PREFIX);
goog.exportSymbol("xiv.ui.ThumbnailGallery.CSS_SUFFIX",xiv.ui.ThumbnailGallery.CSS_SUFFIX);goog.exportSymbol("xiv.ui.ThumbnailGallery.ANIM_MED",xiv.ui.ThumbnailGallery.ANIM_MED);goog.exportSymbol("xiv.ui.ThumbnailGallery.DRAGGER_ID",xiv.ui.ThumbnailGallery.DRAGGER_ID);goog.exportSymbol("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID);goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail);
goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.createThumbnail",xiv.ui.ThumbnailGallery.prototype.createThumbnail);goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.addThumbnail",xiv.ui.ThumbnailGallery.prototype.addThumbnail);goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets);goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget);
goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets);goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement);goog.exportSymbol("xiv.ui.ThumbnailGallery.prototype.disposeInternal",xiv.ui.ThumbnailGallery.prototype.disposeInternal);goog.ui.TabPane=function(a,b,c,d){goog.events.EventTarget.call(this);this.dom_=c||goog.dom.getDomHelper();this.el_=a;this.pages_=[];this.tabLocation_=b?b:goog.ui.TabPane.TabLocation.TOP;this.useMouseDown_=!!d;this.create_()};goog.inherits(goog.ui.TabPane,goog.events.EventTarget);goog.ui.TabPane.Events={CHANGE:"change"};goog.ui.TabPane.TabLocation={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3};
goog.ui.TabPane.prototype.create_=function(){this.el_.className="goog-tabpane";var a=this.getChildNodes_();this.elButtonBar_=this.dom_.createDom("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.elContent_=this.dom_.createDom("div","goog-tabpane-cont");this.el_.appendChild(this.elContent_);var b=goog.asserts.assertElement(this.el_);switch(this.tabLocation_){case goog.ui.TabPane.TabLocation.TOP:b.insertBefore(this.elButtonBar_,this.elContent_);b.insertBefore(this.createClear_(),this.elContent_);
goog.dom.classlist.add(b,"goog-tabpane-top");break;case goog.ui.TabPane.TabLocation.BOTTOM:b.appendChild(this.elButtonBar_);b.appendChild(this.createClear_());goog.dom.classlist.add(b,"goog-tabpane-bottom");break;case goog.ui.TabPane.TabLocation.LEFT:b.insertBefore(this.elButtonBar_,this.elContent_);goog.dom.classlist.add(b,"goog-tabpane-left");break;case goog.ui.TabPane.TabLocation.RIGHT:b.insertBefore(this.elButtonBar_,this.elContent_);goog.dom.classlist.add(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");
}this.elButtonBar_.tabIndex=0;goog.events.listen(this.elButtonBar_,this.useMouseDown_?goog.events.EventType.MOUSEDOWN:goog.events.EventType.CLICK,this.onHeaderClick_,!1,this);goog.events.listen(this.elButtonBar_,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_,!1,this);this.createPages_(a)};goog.ui.TabPane.prototype.createClear_=function(){goog.style.installStyles(".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }");return this.dom_.createDom("div","goog-tabpane-clear")};
goog.ui.TabPane.prototype.disposeInternal=function(){goog.ui.TabPane.superClass_.disposeInternal.call(this);goog.events.unlisten(this.elButtonBar_,this.useMouseDown_?goog.events.EventType.MOUSEDOWN:goog.events.EventType.CLICK,this.onHeaderClick_,!1,this);goog.events.unlisten(this.elButtonBar_,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_,!1,this);delete this.el_;this.elContent_=this.elButtonBar_=null};
goog.ui.TabPane.prototype.getChildNodes_=function(){for(var a=[],b=goog.dom.getFirstElementChild(this.el_);b;)a.push(b),b=goog.dom.getNextElementSibling(b);return a};goog.ui.TabPane.prototype.createPages_=function(a){for(var b,c=0;b=a[c];c++)this.addPage(new goog.ui.TabPane.TabPage(b))};
goog.ui.TabPane.prototype.addPage=function(a,b){a.parent_&&a.parent_!=this&&a.parent_ instanceof goog.ui.TabPane&&a.parent_.removePage(a);var c=this.pages_.length;goog.isDef(b)&&b!=c?(c=b,this.pages_.splice(c,0,a),this.elButtonBar_.insertBefore(a.elTitle_,this.elButtonBar_.childNodes[c])):(this.pages_.push(a),this.elButtonBar_.appendChild(a.elTitle_));a.setParent_(this,c);this.selected_||(this.selected_=a,this.dispatchEvent(new goog.ui.TabPaneEvent(goog.ui.TabPane.Events.CHANGE,this,this.selected_)));
this.elContent_.appendChild(a.elContent_);a.setVisible_(a==this.selected_);for(var d=c+1;c=this.pages_[d];d++)c.index_=d};goog.ui.TabPane.prototype.removePage=function(a){goog.isNumber(a)&&(a=this.pages_[a]);this.pages_.splice(a.index_,1);a.setParent_(null);goog.dom.removeNode(a.elTitle_);goog.dom.removeNode(a.elContent_);for(var b=0;a=this.pages_[b];b++)a.setParent_(this,b)};goog.ui.TabPane.prototype.getPage=function(a){return this.pages_[a]};
goog.ui.TabPane.prototype.setSelectedPage=function(a){!a.isEnabled()||this.selected_&&a==this.selected_||(this.selected_.setVisible_(!1),a.setVisible_(!0),this.selected_=a,this.dispatchEvent(new goog.ui.TabPaneEvent(goog.ui.TabPane.Events.CHANGE,this,this.selected_)))};goog.ui.TabPane.prototype.setSelectedIndex=function(a){0<=a&&a<this.pages_.length&&this.setSelectedPage(this.pages_[a])};goog.ui.TabPane.prototype.getSelectedIndex=function(){return this.selected_?this.selected_.index_:-1};
goog.ui.TabPane.prototype.getSelectedPage=function(){return this.selected_||null};goog.ui.TabPane.prototype.getContentElement=function(){return this.elContent_||null};goog.ui.TabPane.prototype.getElement=function(){return this.el_||null};goog.ui.TabPane.prototype.onHeaderClick_=function(a){for(var b=a.target;b!=this.elButtonBar_;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);this.setSelectedIndex(c);break}b=b.parentNode}a.preventDefault()};
goog.ui.TabPane.prototype.onHeaderKeyDown_=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case goog.events.KeyCodes.LEFT:a=this.selected_.getIndex()-1;this.setSelectedIndex(0>a?this.pages_.length-1:a);break;case goog.events.KeyCodes.RIGHT:a=this.selected_.getIndex()+1;this.setSelectedIndex(a>=this.pages_.length?0:a);break;case goog.events.KeyCodes.HOME:this.setSelectedIndex(0);break;case goog.events.KeyCodes.END:this.setSelectedIndex(this.pages_.length-1)}};
goog.ui.TabPane.TabPage=function(a,b,c){var d,e;if(goog.isString(a)&&!goog.isDef(b))d=a;else if(b)d=b,e=a;else if(a){if(b=goog.dom.getFirstElementChild(a))d=goog.dom.getTextContent(b),b.parentNode.removeChild(b);e=a}this.dom_=c||goog.dom.getDomHelper();this.elContent_=e||this.dom_.createDom("div");this.elTitle_=this.dom_.createDom("li",null,d);this.index_=this.parent_=null;this.enabled_=!0};goog.ui.TabPane.TabPage.prototype.getTitle=function(){return goog.dom.getTextContent(this.elTitle_)};
goog.ui.TabPane.TabPage.prototype.setTitle=function(a){goog.dom.setTextContent(this.elTitle_,a)};goog.ui.TabPane.TabPage.prototype.getTitleElement=function(){return this.elTitle_};goog.ui.TabPane.TabPage.prototype.getContentElement=function(){return this.elContent_};goog.ui.TabPane.TabPage.prototype.getIndex=function(){return this.index_};goog.ui.TabPane.TabPage.prototype.getParent=function(){return this.parent_};goog.ui.TabPane.TabPage.prototype.select=function(){this.parent_&&this.parent_.setSelectedPage(this)};
goog.ui.TabPane.TabPage.prototype.setEnabled=function(a){this.enabled_=a;this.elTitle_.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};goog.ui.TabPane.TabPage.prototype.isEnabled=function(){return this.enabled_};goog.ui.TabPane.TabPage.prototype.setVisible_=function(a){this.isEnabled()&&(this.elContent_.style.display=a?"":"none",this.elTitle_.className=a?"goog-tabpane-tab-selected":"goog-tabpane-tab")};
goog.ui.TabPane.TabPage.prototype.setParent_=function(a,b){this.parent_=a;this.index_=goog.isDef(b)?b:null};goog.ui.TabPaneEvent=function(a,b,c){goog.events.Event.call(this,a,b);this.page=c};goog.inherits(goog.ui.TabPaneEvent,goog.events.Event);nrg.ui.Tabs=function(a){nrg.ui.Component.call(this);goog.isDefAndNotNull(a)&&this.checkOrientation_(a);this.orientation=a||nrg.ui.Tabs.DEFAULT_ORIENTATION};goog.inherits(nrg.ui.Tabs,nrg.ui.Component);goog.exportSymbol("nrg.ui.Tabs",nrg.ui.Tabs);nrg.ui.Tabs.ORIENTATIONS=["TOP","BOTTOM","LEFT","RIGHT"];nrg.ui.Tabs.DEFAULT_ORIENTATION=nrg.ui.Tabs.ORIENTATIONS[0];nrg.ui.Tabs.ID_PREFIX="nrg.ui.Tabs";
nrg.ui.Tabs.CSS_SUFFIX={TAB:"tab",TAB_ACTIVE:"tab-active",PAGE:"page",PAGE_CONTENT:"page-content",PAGE_ACTIVE:"page-active",ICON:"icon",ICON_ACTIVE:"icon-active",ICON_CONTENT:"icon-content",SCROLLGALLERY:"scrollgallery"};nrg.ui.Tabs.TabItemCollection=function(a,b,c,d,e){this.ACTIVE=!1;this.TITLE=a;this.TAB=b;this.ICON=c;this.PAGE=d;this.OBJ=e};nrg.ui.Tabs.prototype.lastActiveTab_=0;nrg.ui.Tabs.prototype.prevActiveTab_=0;nrg.ui.Tabs.prototype.tabSize=null;
nrg.ui.Tabs.prototype.render=function(a){nrg.ui.Tabs.superClass_.render.call(this,a);this.googTabPane_=new goog.ui.TabPane(this.getElement());this.Tabs_=[];goog.dom.classes.add(this.getElement(),nrg.ui.Tabs.ELEMENT_CLASS)};nrg.ui.Tabs.prototype.createTabElt_=function(a){return goog.dom.createDom("div",{id:"Tab_"+goog.string.createUniqueString(),"class":nrg.ui.Tabs.CSS.TAB,title:a})};
nrg.ui.Tabs.prototype.createTabIcon_=function(a){var b=goog.dom.createDom("div",{id:"TabIcon_"+goog.string.createUniqueString(),"class":nrg.ui.Tabs.CSS.ICON});a=goog.dom.createDom("div",{"class":nrg.ui.Tabs.CSS.ICON_CONTENT},a);goog.dom.append(b,a);return b};nrg.ui.Tabs.prototype.createTabPage_=function(a){return goog.dom.createDom("div",{id:"TabPage_"+goog.string.createUniqueString(),"class":nrg.ui.Tabs.CSS.PAGE,label:a})};
nrg.ui.Tabs.prototype.checkOrientation_=function(a){if(!goog.isString(a))throw new TypeError("String required!");a=a.toUpperCase();if(-1==nrg.ui.Tabs.ORIENTATIONS.indexOf(a))throw Error("Invalid orienation!");};nrg.ui.Tabs.prototype.getTabCount=function(){return this.Tabs_.length};nrg.ui.Tabs.prototype.getLastActiveTab=function(){return this.lastActiveTab_};nrg.ui.Tabs.prototype.getPreviousActiveTab=function(){return this.prevActiveTab_};
nrg.ui.Tabs.prototype.getTabElements=function(){var a=[];goog.array.forEach(this.Tabs_,function(b){a.push(b.TAB)});return a};nrg.ui.Tabs.prototype.getTabPages=function(){var a=[];goog.array.forEach(this.Tabs_,function(b){a.push(b.PAGE)});return a};nrg.ui.Tabs.prototype.getTabIcons=function(){var a=[];goog.array.forEach(this.Tabs_,function(b){a.push(b.ICON)});return a};nrg.ui.Tabs.prototype.addTabs=function(a){goog.array.forEach(a,function(a){this.addTab(a)}.bind(this))};
nrg.ui.Tabs.prototype.reset=function(){for(var a=this.Tabs_.length;0<a;)this.googTabPane_.removePage(a-1),a--;this.disposeTabs()};nrg.ui.Tabs.prototype.tabExists=function(a){if(!goog.isDefAndNotNull(this.Tabs_))return!1;for(var b=0,c=this.Tabs_.length;b<c;b++)if(this.Tabs_[b].TITLE==a)return!0;return!1};nrg.ui.Tabs.prototype.getTabItemCollectionFromTitle_=function(a){if(!goog.isDefAndNotNull(this.Tabs_))return!1;for(var b=0,c=this.Tabs_.length;b<c;b++)if(this.Tabs_[b].TITLE==a)return this.Tabs_[b]};
nrg.ui.Tabs.prototype.addTab=function(a){this.Tabs_=goog.isDefAndNotNull(this.Tabs_)?this.Tabs_:[];if(this.tabExists(a))throw Error(a+" is an already existing tab!");var b=this.createTabElt_(a);goog.dom.append(this.getElement(),b);var c=this.createTabIcon_(a);goog.dom.append(b,c);var d=this.createTabPage_(a);nrg.style.setStyle(d,nrg.style.dims(this.getElement(),"width"));goog.dom.append(this.getElement().parentNode,d);var e=new goog.ui.TabPane.TabPage(d,a);this.googTabPane_.addPage(e);this.Tabs_.push(new nrg.ui.Tabs.TabItemCollection(a,
b,c,d,e));this.clearEventListeners_();this.setClickEvents_();this.setHoverEvents_();this.deactivateAll();this.setActive(0);this.updateStyle()};nrg.ui.Tabs.prototype.setTabPageContents=function(a,b){this.tabExists(a)||this.addTab(a);var c=this.getTabItemCollectionFromTitle_(a),d;b instanceof nrg.ui.ScrollableContainer?(d=b,c.PAGE.appendChild(b.getElement())):(d=new nrg.ui.ScrollableContainer,d.render(c.PAGE),d.addContents(b));goog.dom.classes.add(d.getElement(),nrg.ui.Tabs.CSS.PAGE_CONTENT);this.updateStyle()};
nrg.ui.Tabs.prototype.clearEventListeners_=function(){goog.array.forEach(this.Tabs_,function(a,b){goog.events.removeAll(a.TAB)}.bind(this))};nrg.ui.Tabs.prototype.setClickEvents_=function(){goog.array.forEach(this.Tabs_,function(a,b){goog.events.listen(a.TAB,goog.events.EventType.CLICK,function(a){this.deactivateAll();this.setActive(b)}.bind(this))}.bind(this))};nrg.ui.Tabs.prototype.setHoverEvents_=function(){goog.array.forEach(this.Tabs_,function(a,b){this.setTabMouseOver_(b);this.setTabMouseOut_(b)}.bind(this))};
nrg.ui.Tabs.prototype.setTabMouseOver_=function(a){goog.events.listen(this.Tabs_[a].TAB,goog.events.EventType.MOUSEOVER,function(){!0!==this.Tabs_[a].ACTIVE&&(goog.dom.classes.add(this.Tabs_[a].TAB,nrg.ui.Tabs.CSS.TAB_ACTIVE),goog.dom.classes.add(this.Tabs_[a].TAB,nrg.string.makeCssName(nrg.ui.Tabs.CSS.TAB_ACTIVE,this.orientation)),goog.dom.classes.add(this.Tabs_[a].ICON,nrg.ui.Tabs.CSS.ICON_ACTIVE))}.bind(this))};
nrg.ui.Tabs.prototype.setTabMouseOut_=function(a){goog.events.listen(this.Tabs_[a].TAB,goog.events.EventType.MOUSEOUT,function(b){!0!==this.Tabs_[a].ACTIVE&&(goog.dom.classes.remove(this.Tabs_[a].TAB,nrg.ui.Tabs.CSS.TAB_ACTIVE),goog.dom.classes.remove(this.Tabs_[a].TAB,nrg.string.makeCssName(nrg.ui.Tabs.CSS.TAB_ACTIVE,this.orientation)),goog.dom.classes.remove(this.Tabs_[a].ICON,nrg.ui.Tabs.CSS.ICON_ACTIVE))}.bind(this))};
nrg.ui.Tabs.prototype.setActive=function(a){this.Tabs_[a].ACTIVE=!0;this.prevActiveTab_=this.lastActiveTab_;this.lastActiveTab_=a;this.googTabPane_.setSelectedIndex(a);goog.dom.classes.add(this.Tabs_[a].TAB,nrg.ui.Tabs.CSS.TAB_ACTIVE);goog.dom.classes.add(this.Tabs_[a].TAB,nrg.string.makeCssName(nrg.ui.Tabs.CSS.TAB_ACTIVE,this.orientation));goog.dom.classes.add(this.Tabs_[a].PAGE,nrg.ui.Tabs.CSS.PAGE_ACTIVE);goog.dom.classes.add(this.Tabs_[a].PAGE,nrg.string.makeCssName(nrg.ui.Tabs.CSS.PAGE_ACTIVE,
this.orientation));goog.dom.classes.add(this.Tabs_[a].ICON,nrg.ui.Tabs.CSS.ICON_ACTIVE);goog.dom.classes.add(this.Tabs_[a].ICON,nrg.string.makeCssName(nrg.ui.Tabs.CSS.ICON_ACTIVE,this.orientation))};
nrg.ui.Tabs.prototype.deactivate=function(a){this.Tabs_[a].ACTIVE=!1;this.googTabPane_.setSelectedIndex(0);goog.dom.classes.remove(this.Tabs_[a].TAB,nrg.ui.Tabs.CSS.TAB_ACTIVE);goog.dom.classes.remove(this.Tabs_[a].TAB,nrg.string.makeCssName(nrg.ui.Tabs.CSS.TAB_ACTIVE,this.orientation));goog.dom.classes.remove(this.Tabs_[a].PAGE,nrg.ui.Tabs.CSS.PAGE_ACTIVE);goog.dom.classes.remove(this.Tabs_[a].PAGE,nrg.string.makeCssName(nrg.ui.Tabs.CSS.PAGE_ACTIVE,this.orientation));goog.dom.classes.remove(this.Tabs_[a].ICON,
nrg.ui.Tabs.CSS.ICON_ACTIVE);goog.dom.classes.remove(this.Tabs_[a].ICON,nrg.string.makeCssName(nrg.ui.Tabs.CSS.ICON_ACTIVE,this.orientation))};nrg.ui.Tabs.prototype.deactivateAll=function(){goog.array.forEach(this.Tabs_,function(a,b){this.deactivate(b)}.bind(this))};
nrg.ui.Tabs.prototype.updateStyle=function(){if(this.getElement().parentNode){goog.dom.classes.add(this.getElement(),nrg.ui.Tabs.ELEMENT_CLASS);goog.dom.classes.add(this.getElement(),nrg.string.makeCssName(nrg.ui.Tabs.ELEMENT_CLASS,this.orientation));goog.array.forEach(this.Tabs_,function(a,c){goog.dom.classes.add(a.TAB,nrg.string.makeCssName(nrg.ui.Tabs.CSS.TAB,this.orientation));goog.dom.classes.add(a.ICON,nrg.string.makeCssName(nrg.ui.Tabs.CSS.ICON,this.orientation));goog.dom.classes.add(a.PAGE,
nrg.string.makeCssName(nrg.ui.Tabs.CSS.PAGE,this.orientation))}.bind(this));switch(this.orientation){case "TOP":this.updateStyleTop_();break;case "BOTTOM":this.updateStyleBottom_();break;case "RIGHT":this.updateStyleRight_()}if(0<this.Tabs_.length){var a=goog.style.getSize(this.Tabs_[0].TAB);0<a.width&&0<a.height&&(this.tabSize=a)}}};
nrg.ui.Tabs.prototype.updateStyleVertical_=function(){goog.array.forEach(this.Tabs_,function(a){this.getElement().parentNode&&nrg.style.setStyle(a.TAB,{height:(100/this.Tabs_.length).toString()+"%"})}.bind(this))};nrg.ui.Tabs.prototype.updateStyleHorizontal_=function(){var a;goog.array.forEach(this.Tabs_,function(b,c){this.getElement().parentNode&&(a=100/this.Tabs_.length,nrg.style.setStyle(b.TAB,{width:a.toString()+"%",left:(c*a).toString()+"%"}))}.bind(this))};
nrg.ui.Tabs.prototype.updateStyleRight_=function(){this.updateStyleVertical_()};nrg.ui.Tabs.prototype.updateStyleTop_=function(){this.updateStyleHorizontal_()};nrg.ui.Tabs.prototype.disposeTabs_=function(){goog.array.forEach(this.Tabs_,function(a){goog.object.forEach(a,function(b,c){goog.events.removeAll(b);b.disposeInternal?b.dispose():b.dispose&&b.dispose();delete b;delete a[c]});goog.object.clear(a);delete a});goog.array.clear(this.Tabs_)};
nrg.ui.Tabs.prototype.disposeInternal=function(){nrg.ui.Tabs.superClass_.disposeInternal.call(this);goog.array.forEach(this.getTabElements(),function(a,b){goog.events.removeAll(a)}.bind(this));this.disposeTabs_();delete this.Tabs_;goog.events.removeAll(this.googTabPane_);this.googTabPane_.dispose();delete this.googTabPane_;delete this.lastActiveTab_;delete this.prevActiveTab_;delete this.tabHeight_;delete this.orientation};goog.exportSymbol("nrg.ui.Tabs.ORIENTATIONS",nrg.ui.Tabs.ORIENTATIONS);
goog.exportSymbol("nrg.ui.Tabs.DEFAULT_ORIENTATION",nrg.ui.Tabs.DEFAULT_ORIENTATION);goog.exportSymbol("nrg.ui.Tabs.ID_PREFIX",nrg.ui.Tabs.ID_PREFIX);goog.exportSymbol("nrg.ui.Tabs.CSS_SUFFIX",nrg.ui.Tabs.CSS_SUFFIX);goog.exportSymbol("nrg.ui.Tabs.TabItemCollection",nrg.ui.Tabs.TabItemCollection);goog.exportSymbol("nrg.ui.Tabs.prototype.tabSize",nrg.ui.Tabs.prototype.tabSize);goog.exportSymbol("nrg.ui.Tabs.prototype.render",nrg.ui.Tabs.prototype.render);
goog.exportSymbol("nrg.ui.Tabs.prototype.getTabCount",nrg.ui.Tabs.prototype.getTabCount);goog.exportSymbol("nrg.ui.Tabs.prototype.getLastActiveTab",nrg.ui.Tabs.prototype.getLastActiveTab);goog.exportSymbol("nrg.ui.Tabs.prototype.getPreviousActiveTab",nrg.ui.Tabs.prototype.getPreviousActiveTab);goog.exportSymbol("nrg.ui.Tabs.prototype.getTabElements",nrg.ui.Tabs.prototype.getTabElements);goog.exportSymbol("nrg.ui.Tabs.prototype.getTabPages",nrg.ui.Tabs.prototype.getTabPages);
goog.exportSymbol("nrg.ui.Tabs.prototype.getTabIcons",nrg.ui.Tabs.prototype.getTabIcons);goog.exportSymbol("nrg.ui.Tabs.prototype.addTabs",nrg.ui.Tabs.prototype.addTabs);goog.exportSymbol("nrg.ui.Tabs.prototype.reset",nrg.ui.Tabs.prototype.reset);goog.exportSymbol("nrg.ui.Tabs.prototype.tabExists",nrg.ui.Tabs.prototype.tabExists);goog.exportSymbol("nrg.ui.Tabs.prototype.addTab",nrg.ui.Tabs.prototype.addTab);goog.exportSymbol("nrg.ui.Tabs.prototype.setTabPageContents",nrg.ui.Tabs.prototype.setTabPageContents);
goog.exportSymbol("nrg.ui.Tabs.prototype.setActive",nrg.ui.Tabs.prototype.setActive);goog.exportSymbol("nrg.ui.Tabs.prototype.deactivate",nrg.ui.Tabs.prototype.deactivate);goog.exportSymbol("nrg.ui.Tabs.prototype.deactivateAll",nrg.ui.Tabs.prototype.deactivateAll);goog.exportSymbol("nrg.ui.Tabs.prototype.updateStyle",nrg.ui.Tabs.prototype.updateStyle);goog.exportSymbol("nrg.ui.Tabs.prototype.disposeInternal",nrg.ui.Tabs.prototype.disposeInternal);nrg.ui.ZipTabs=function(a){nrg.ui.Tabs.call(this,a)};goog.inherits(nrg.ui.ZipTabs,nrg.ui.Tabs);goog.exportSymbol("nrg.ui.ZipTabs",nrg.ui.ZipTabs);nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT=4;nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ=4;nrg.ui.ZipTabs.EventType={CLICKED:goog.events.getUniqueId("viewboxtab_clicked")};nrg.ui.ZipTabs.ID_PREFIX="nrg.ui.ZipTabs";
nrg.ui.ZipTabs.prototype.render=function(a){nrg.ui.ZipTabs.superClass_.render.call(this,a);goog.dom.classes.add(this.getElement(),nrg.string.makeCssName(nrg.ui.ZipTabs.ELEMENT_CLASS,this.orientation));this.Resizable_=new nrg.ui.Resizable(this.getElement(),this.orientation);this.setResizeEvents_()};nrg.ui.ZipTabs.prototype.setBoundaryElement=function(a){this.Resizable_.setBoundaryElement(a);this.updateStyle()};nrg.ui.ZipTabs.prototype.getResizable=function(){return this.Resizable_};
nrg.ui.ZipTabs.prototype.setResizeEvents_=function(){goog.events.listen(this.Resizable_,nrg.ui.Resizable.EventType.RESIZE,function(a){this.calcDims();if(goog.isDefAndNotNull(this.tabSize)){switch(this.orientation){case "BOTTOM":case "TOP":this.onResizeVert_();break;case "LEFT":case "RIGHT":this.onResizeHoriz_()}this.dispatchEvent({type:nrg.ui.Resizable.EventType.RESIZE,size:a.size,pos:a.pos})}}.bind(this))};
nrg.ui.ZipTabs.prototype.onResizeVert_=function(){Math.abs(this.tabSize.height-this.currSize.height)<=nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT?this.deactivateAll():this.setActive(this.getLastActiveTab())};nrg.ui.ZipTabs.prototype.onResizeHoriz_=function(){Math.abs(this.tabSize.width-this.currSize.width)<=nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ?this.deactivateAll():this.setActive(this.getLastActiveTab())};
nrg.ui.ZipTabs.prototype.setExpanded=function(a,b,c){this.updateStyle();a?(this.setActive(b||0),this.Resizable_.slideToLimits(this.orientation,"MAX",null,c)):(this.deactivateAll(),this.Resizable_.slideToLimits(this.orientation,"MIN",null,c))};
nrg.ui.ZipTabs.prototype.onTabClicked_=function(a,b){if(goog.isDefAndNotNull(this.tabSize))switch(this.updateStyle(),this.calcDims(),this.orientation){case "BOTTOM":this.onTabClickedBottom_(a,b);break;case "TOP":this.onTabClickedTop_(a,b);break;case "RIGHT":this.onTabClickedRight_(a,b)}};
nrg.ui.ZipTabs.prototype.onTabClickedTop_=function(a,b){Math.abs(this.currSize.height-this.tabSize.height)<=nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ?(this.setActive(this.lastActiveTab_),this.Resizable_.slideToLimits("TOP","MAX",b)):this.getLastActiveTab()==this.getPreviousActiveTab()&&this.Resizable_.slideToLimits("TOP","MIN",b)};
nrg.ui.ZipTabs.prototype.onTabClickedBottom_=function(a,b){Math.abs(this.currSize.height-this.tabSize.height)<=nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ?(this.setActive(this.lastActiveTab_),this.Resizable_.slideToLimits("BOTTOM","MAX",b)):this.getLastActiveTab()==this.getPreviousActiveTab()&&this.Resizable_.slideToLimits("BOTTOM","MIN",b)};
nrg.ui.ZipTabs.prototype.onTabClickedRight_=function(a,b){goog.isDefAndNotNull(this.tabSize)&&(Math.abs(this.currSize.width-this.tabSize.width)<=nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ?(this.setActive(this.lastActiveTab_),this.Resizable_.slideToLimits("RIGHT","MAX",b)):this.getLastActiveTab()==this.getPreviousActiveTab()&&this.Resizable_.slideToLimits("RIGHT","MIN",b))};
nrg.ui.ZipTabs.prototype.updateStyle=function(){nrg.ui.ZipTabs.superClass_.updateStyle.call(this);switch(this.orientation){case "TOP":case "BOTTOM":goog.isDefAndNotNull(this.tabSize)&&this.Resizable_.setMinHeight(this.tabSize.height);break;case "LEFT":case "RIGHT":goog.isDefAndNotNull(this.tabSize)&&this.Resizable_.setMinWidth(this.tabSize.width)}this.Resizable_.update()};nrg.ui.ZipTabs.prototype.setResizable_=function(a){this.updateStyle()};
nrg.ui.ZipTabs.prototype.addTab=function(a){nrg.ui.ZipTabs.superClass_.addTab.call(this,a);1==this.getTabElements().length&&this.setResizable_();goog.array.forEach(this.getTabElements(),function(a,c){goog.events.listen(a,goog.events.EventType.CLICK,function(a){this.onTabClicked_(a)}.bind(this))}.bind(this));this.deactivateAll();this.updateStyle()};
nrg.ui.ZipTabs.prototype.disposeInternal=function(){nrg.ui.ZipTabs.superClass_.disposeInternal.call(this);goog.events.removeAll(this.Resizable_);this.Resizable_.dispose();delete this.Resizable_};goog.exportSymbol("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT);goog.exportSymbol("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ);goog.exportSymbol("nrg.ui.ZipTabs.EventType",nrg.ui.ZipTabs.EventType);goog.exportSymbol("nrg.ui.ZipTabs.ID_PREFIX",nrg.ui.ZipTabs.ID_PREFIX);
goog.exportSymbol("nrg.ui.ZipTabs.prototype.render",nrg.ui.ZipTabs.prototype.render);goog.exportSymbol("nrg.ui.ZipTabs.prototype.setBoundaryElement",nrg.ui.ZipTabs.prototype.setBoundaryElement);goog.exportSymbol("nrg.ui.ZipTabs.prototype.getResizable",nrg.ui.ZipTabs.prototype.getResizable);goog.exportSymbol("nrg.ui.ZipTabs.prototype.setExpanded",nrg.ui.ZipTabs.prototype.setExpanded);goog.exportSymbol("nrg.ui.ZipTabs.prototype.updateStyle",nrg.ui.ZipTabs.prototype.updateStyle);
goog.exportSymbol("nrg.ui.ZipTabs.prototype.addTab",nrg.ui.ZipTabs.prototype.addTab);goog.exportSymbol("nrg.ui.ZipTabs.prototype.disposeInternal",nrg.ui.ZipTabs.prototype.disposeInternal);/*
 Copyright 2014 Washington Universityf
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
xiv.ui.Modal=function(){nrg.ui.Component.call(this);this.currState_=xiv.ui.Modal.ModalStates.DEMO};goog.inherits(xiv.ui.Modal,nrg.ui.Component);goog.exportSymbol("xiv.ui.Modal",xiv.ui.Modal);xiv.ui.Modal.ModalStates={FULLSCREEN:"fullscreen",POPUP:"popup",FULLSCREEN_POPUP:"fullscreen-popup",WINDOWED:"windowed",DEMO:"demo",DEMO_FULLSCREEN:"demp-fullscreen"};xiv.ui.Modal.ID_PREFIX="xiv.ui.Modal";
xiv.ui.Modal.CSS_SUFFIX={BACKGROUND:"background",COLUMNMENU:"columnmenu",ROWMENU:"rowmenu",COLUMNMENU_BUTTON:"button",ROWMENU_BUTTON:"button",PROJECTTAB:"projecttab",PROJECTTAB_BOUNDS:"projecttab-bounds",PROJECTTAB_DRAGGER:"projecttab-dragger",PROJECTTAB_DRAGGER_HANDLE:"projecttab-dragger-handle",ADDSUBJECTS:"addsubjects"};
xiv.ui.Modal.createButtons_=function(a){var b={};goog.object.forEach(xiv.ui.Modal.ButtonTypes_,function(a,c){b[c]=xiv.ui.Modal.ID_PREFIX+"."+goog.string.toTitleCase(a.key)+".Button"});var c=nrg.dom.createBasicHoverButtonSet(goog.object.getValues(b)),d={};goog.object.forEach(b,function(a,b){d[b]=c[a];goog.dom.classes.set(c[a],nrg.string.makeCssName(a))});return d};
xiv.ui.Modal.ButtonTypes_={CLOSE:{key:"CLOSE",title:"Close XNAT Image Viewer."},FULLSCREEN:{key:"FULLSCREEN",title:"Enter full-screen mode."},POPUP:{key:"POPUP",title:"Popup to new window."},WINDOWED:{key:"WINDOWED",title:"Exit full-screen mode."}};xiv.ui.Modal.prototype.horizMargin_=29;xiv.ui.Modal.prototype.verticalMargin_=29;xiv.ui.Modal.prototype.minHeight_=320;xiv.ui.Modal.prototype.minWidth_=320;xiv.ui.Modal.prototype.animLen_=500;xiv.ui.Modal.prototype.getViewBoxHandler=function(){return this.ViewBoxHandler_};
xiv.ui.Modal.prototype.getThumbnailGallery=function(){return this.ThumbnailGallery_};xiv.ui.Modal.prototype.getProjectTab=function(){return this.ProjectTab_};xiv.ui.Modal.prototype.getPopupButton=function(){return this.buttons_.POPUP};xiv.ui.Modal.prototype.getCloseButton=function(){return this.buttons_.CLOSE};xiv.ui.Modal.prototype.getFullScreenButton=function(){return this.buttons_.FULLSCREEN};
xiv.ui.Modal.prototype.render=function(a){xiv.ui.Modal.superClass_.render.call(this,a);this.initSubComponents();this.ViewBoxHandler_.insertColumn(null,!1);this.setState(this.currState_)};xiv.ui.Modal.prototype.setState=function(a){goog.isDefAndNotNull(this.currState_)&&(this.prevState_=this.currState_);this.currState_=a;this.adaptToState_()};xiv.ui.Modal.prototype.getState=function(){return this.currState_};
xiv.ui.Modal.prototype.highlightInUseThumbnails=function(){this.ThumbnailGallery_.loop(function(a){a.setActive(!1);this.ViewBoxHandler_.loop(function(b){-1<b.getViewableTrees().indexOf(a.getViewable())&&a.setActive(!0)})}.bind(this))};
xiv.ui.Modal.prototype.animateModal=function(){this.computeDims_();this.anims_=goog.isDefAndNotNull(this.anims_)?this.anims_:[];this.animQueue_=goog.isDefAndNotNull(this.animQueue_)?this.animQueue_:new goog.fx.AnimationParallelQueue;this.createViewBoxSlideAnimations_();this.createViewBoxResizeAnimations_();goog.events.listen(this.animQueue_,"end",this.onModalAnimationEnd_.bind(this));goog.array.forEach(this.anims_,function(a){this.animQueue_.add(a)}.bind(this));this.animQueue_.play();this.highlightInUseThumbnails()};
xiv.ui.Modal.prototype.onModalAnimationAnimate_=function(){this.ViewBoxHandler_.loop(function(a){a.updateStyle()})};xiv.ui.Modal.prototype.onModalAnimationEnd_=function(){goog.array.forEach(this.anims_,function(a){this.animQueue_.remove(a);goog.events.removeAll(a);a.destroy();a.dispose()}.bind(this));goog.array.clear(this.anims_);this.updateStyle();this.fadeInHiddenViewers_()};
xiv.ui.Modal.prototype.fadeInHiddenViewers_=function(){this.ViewBoxHandler_.loop(function(a,b,c){0==a.getElement().style.opacity&&nrg.fx.fadeIn(a.getElement(),nrg.ui.Component.animationLengths.MEDIUM)})};
xiv.ui.Modal.prototype.createViewBoxSlideAnimations_=function(){var a=null;this.ViewBoxHandler_.loop(function(b,c,d){a=b.getElement();this.anims_.push(new goog.fx.dom.Slide(a,[a.offsetLeft,a.offsetTop],[this.dims_.viewboxes.X[c][d],this.dims_.viewboxes.Y[c][d]],nrg.ui.Component.animationLengths.MEDIUM,goog.fx.easing.easeOut))}.bind(this))};
xiv.ui.Modal.prototype.createViewBoxResizeAnimations_=function(){var a=null;this.ViewBoxHandler_.loop(function(b,c,d){a=b.getElement();this.anims_.push(new goog.fx.dom.Resize(a,[a.offsetWidth,a.offsetHeight],[this.dims_.viewboxes.W[c][d],this.dims_.viewboxes.H[c][d]],nrg.ui.Component.animationLengths.MEDIUM,goog.fx.easing.easeOut))}.bind(this))};
xiv.ui.Modal.prototype.computeDims_=function(){this.dims_=goog.isDefAndNotNull(this.dims_)?this.dims_:{};this.calcDims();this.computeZipTabsDims_();this.computeViewBoxDims_();this.computeViewBoxPositions_()};xiv.ui.Modal.prototype.computeZipTabsDims_=function(){this.dims_.thumbgallery={};this.dims_.thumbgallery.W=Math.round(goog.style.getSize(this.ProjectTab_.getElement()).width);this.dims_.thumbgallery.H=Math.round(this.currSize.height-2*this.verticalMargin_);this.dims_.thumbgallery.Y=Math.round(this.verticalMargin_)};
xiv.ui.Modal.prototype.computeViewBoxDims_=function(){this.dims_.viewboxes={};this.dims_.viewboxes.W=this.ViewBoxHandler_.getEmptyMatrix();this.dims_.viewboxes.H=this.ViewBoxHandler_.getEmptyMatrix();this.ViewBoxHandler_.loop(function(a,b,c,d,e){this.dims_.viewboxes.W[b][c]=Math.round((this.currSize.width-this.dims_.thumbgallery.W-this.horizMargin_)/e-this.horizMargin_);this.dims_.viewboxes.H[b][c]=Math.round((this.currSize.height-(d+1)*this.horizMargin_)/d)}.bind(this))};
xiv.ui.Modal.prototype.computeViewBoxPositions_=function(){this.dims_.viewboxes.X=this.ViewBoxHandler_.getEmptyMatrix();this.dims_.viewboxes.Y=this.ViewBoxHandler_.getEmptyMatrix();this.dims_.viewboxes.START=this.dims_.thumbgallery.W+this.verticalMargin_;var a=0;this.ViewBoxHandler_.loop(function(b,c,d,e,f){a=this.dims_.viewboxes.START+d*(this.dims_.viewboxes.W[c][d]+this.verticalMargin_);this.dims_.viewboxes.X[c][d]=a;this.dims_.viewboxes.Y[c][d]=c*(this.dims_.viewboxes.H[c][d]+this.horizMargin_);
window.console.log();this.dims_.viewboxes.Y[c][d]+=this.horizMargin_}.bind(this))};xiv.ui.Modal.prototype.updateStyle=function(){this.computeDims_();this.updateStyle_ProjectTab_();this.updateStyle_ViewBoxes_();this.highlightInUseThumbnails();this.ThumbnailGallery_.updateStyle();this.ThumbnailGallery_.mapSliderToContents()};xiv.ui.Modal.prototype.updateStyle_ProjectTab_=function(){this.ProjectTab_&&this.ProjectTab_.updateStyle()};
xiv.ui.Modal.prototype.updateStyle_ViewBoxes_=function(){this.ViewBoxHandler_&&this.ViewBoxHandler_.loop(function(a,b,c){nrg.style.setStyle(a.getElement(),{height:this.dims_.viewboxes.H[b][c],width:this.dims_.viewboxes.W[b][c],left:this.dims_.viewboxes.X[b][c],top:this.dims_.viewboxes.Y[b][c]});a.updateStyle()}.bind(this))};xiv.ui.Modal.prototype.initSubComponents=function(){this.initBackground_();this.initProjectTab_();this.initViewBoxHandler_();this.initButtons_()};
xiv.ui.Modal.prototype.initBackground_=function(){var a=goog.dom.createDom("div");a.id=this.constructor.ID_PREFIX+"_Background_"+goog.string.createUniqueString();goog.dom.classes.set(a,xiv.ui.Modal.CSS.BACKGROUND);goog.dom.appendChild(this.getElement(),a)};
xiv.ui.Modal.prototype.initButtons_=function(){this.buttons_=xiv.ui.Modal.createButtons_();goog.object.forEach(this.buttons_,function(a,b){goog.dom.append(this.getElement(),a)}.bind(this));this.setRowColumnInsertRemoveEvents_();this.buttons_.CLOSE.innerHTML="<img src="+this.imagePrefix+'/images/viewer/xiv/ui/Modal/close.png width="100%">';this.buttons_.FULLSCREEN.innerHTML="<img src="+this.imagePrefix+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';this.buttons_.WINDOWED.innerHTML="<img src="+
this.imagePrefix+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';this.buttons_.POPUP.innerHTML="<img src="+this.imagePrefix+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'};
xiv.ui.Modal.prototype.addAddSubjectsToProjectTab_=function(){this.addSubjects_=goog.dom.createDom("div",{id:xiv.ui.Modal.ID_PREFIX+"_addSubjects_"+goog.string.createUniqueString(),"class":xiv.ui.Modal.CSS.ADDSUBJECTS},"+ Load all subjects in project");goog.dom.appendChild(this.getProjectTab().getTabPages()[0],this.addSubjects_);nrg.style.setHoverClass(this.addSubjects_,xiv.ui.Modal.CSS.ADDSUBJECTS+"-hovered");var a=this.getProjectTab().getTabPages()[0],b=goog.dom.getChildren(a)[0];goog.style.getSize(a);
goog.style.getSize(b);goog.style.getSize(this.addSubjects_);b.style.height="calc(100% - 70px)";goog.events.listen(this.addSubjects_,goog.events.EventType.CLICK,this.onAddSubjectsClicked_.bind(this))};xiv.ui.Modal.prototype.onAddSubjectsClicked_=function(){this.dispatchEvent({type:xiv.EventType.ADD_SUBJECTS});nrg.fx.fadeOut(this.addSubjects_,150,function(){this.disposeAddSubjects_();var a=this.ProjectTab_.getTabPages()[0];goog.dom.getChildren(a)[0].setAttribute("style","");this.ThumbnailGallery_.mapSliderToContents()}.bind(this))};
xiv.ui.Modal.prototype.disposeAddSubjects_=function(){goog.isDefAndNotNull(this.addSubjects_)&&(goog.dom.removeNode(this.addSubjects_),goog.events.removeAll(this.addSubjects_),delete this.addSubjects_)};xiv.ui.Modal.prototype.createThumbnailGallery_=function(){this.ThumbnailGallery_=new xiv.ui.ThumbnailGallery;this.ThumbnailGallery_.sortThumbnailsOnInsert(!0);this.ThumbnailGallery_.setHoverParent(this.getElement());this.setThumbnailGalleryEvents_()};
xiv.ui.Modal.prototype.initProjectTab_=function(){this.ProjectTabBounds_=goog.dom.createDom("div");goog.dom.append(this.getElement(),this.ProjectTabBounds_);goog.dom.classes.add(this.ProjectTabBounds_,xiv.ui.Modal.CSS.PROJECTTAB_BOUNDS);this.ProjectTab_=new nrg.ui.ZipTabs("RIGHT");this.ProjectTab_.render(this.getElement());goog.dom.classes.add(this.ProjectTab_.getElement(),xiv.ui.Modal.CSS.PROJECTTAB);this.createThumbnailGallery_();this.ThumbnailGallery_.render(this.ProjectTab_.getElement());this.ProjectTab_.setTabPageContents("Project Browser",
this.ThumbnailGallery_);this.ProjectTab_.setBoundaryElement(this.ProjectTabBounds_);var a=this.ProjectTab_.getResizable().getHandle("RIGHT");goog.dom.classes.add(a,xiv.ui.Modal.CSS.PROJECTTAB_DRAGGER);this.ProjectTab_.getResizable().getResizeDragger("RIGHT").setOffsetX(5);goog.dom.append(a,goog.dom.createDom("div",{id:xiv.ui.ViewBox.ID_PREFIX+"_DraggerHandle_"+goog.string.createUniqueString(),"class":xiv.ui.Modal.CSS.PROJECTTAB_DRAGGER_HANDLE}));goog.events.listen(this.ProjectTab_,nrg.ui.Resizable.EventType.RESIZE,
this.updateStyle.bind(this));goog.events.listen(this.ProjectTab_,nrg.ui.Resizable.EventType.RESIZE_END,this.updateStyle.bind(this));this.addAddSubjectsToProjectTab_()};xiv.ui.Modal.prototype.onViewBoxError_=function(){var a=goog.dom.getElementsByClass("xiv-ui-thumbnailgallery-thumbnail-dragging");goog.array.forEach(a,function(a){goog.dom.removeNode(a)});this.highlightInUseThumbnails();this.ThumbnailGallery_.thumbnailDragDropGroup_.endDrag({dragCancelled:!0})};
xiv.ui.Modal.prototype.initViewBoxHandler_=function(){this.ViewBoxHandler_=new xiv.ui.ViewBoxHandler;this.ViewBoxHandler_.setViewBoxesParent(this.getElement());this.setViewBoxHandlerEvents_();goog.events.listen(this.ViewBoxHandler_,xiv.ui.ViewBoxHandler.EventType.VIEWABLE_LOADERROR,this.onViewBoxError_.bind(this))};xiv.ui.Modal.prototype.onCloseButtonClicked_=function(){this.currState_===xiv.ui.Modal.ModalStates.FULLSCREEN&&goog.dom.fullscreen.exitFullScreen()};
xiv.ui.Modal.prototype.onFullScreenButtonClicked_=function(){goog.dom.fullscreen.requestFullScreen(this.getElement().parentNode);this.currState_===xiv.ui.Modal.ModalStates.POPUP?this.setState(xiv.ui.Modal.ModalStates.FULLSCREEN_POPUP):this.setState(xiv.ui.Modal.ModalStates.FULLSCREEN)};xiv.ui.Modal.prototype.onWindowedButtonClicked_=function(){goog.dom.fullscreen.exitFullScreen();this.setState(this.prevState_)};
xiv.ui.Modal.prototype.setRowColumnInsertRemoveEvents_=function(a){a=a||goog.events.listen;a(this.buttons_.FULLSCREEN,goog.events.EventType.CLICK,this.onFullScreenButtonClicked_.bind(this));a(this.buttons_.WINDOWED,goog.events.EventType.CLICK,this.onWindowedButtonClicked_.bind(this));a(this.buttons_.CLOSE,goog.events.EventType.CLICK,this.onCloseButtonClicked_.bind(this))};
xiv.ui.Modal.prototype.adaptToState_=function(){goog.isDefAndNotNull(this.prevState_)&&goog.dom.classes.remove(this.getElement(),nrg.string.makeCssName(this.constructor.ELEMENT_CLASS,this.prevState_));goog.dom.classes.add(this.getElement(),nrg.string.makeCssName(this.constructor.ELEMENT_CLASS,this.currState_));this.currState_==xiv.ui.Modal.ModalStates.DEMO?(this.buttons_.FULLSCREEN.style.visibility="visible",this.buttons_.WINDOWED.style.visibility="hidden"):this.currState_==xiv.ui.Modal.ModalStates.WINDOWED?
(this.buttons_.FULLSCREEN.style.visibility="visible",this.buttons_.WINDOWED.style.visibility="hidden"):this.currState_==xiv.ui.Modal.ModalStates.POPUP?(this.buttons_.POPUP.style.visibility="hidden",this.buttons_.CLOSE.style.visibility="hidden",this.buttons_.FULLSCREEN.style.visibility="visible",this.buttons_.WINDOWED.style.visibility="hidden"):this.currState_==xiv.ui.Modal.ModalStates.FULLSCREEN_POPUP?(this.buttons_.POPUP.style.visibility="hidden",this.buttons_.FULLSCREEN.style.visibility="hidden",
this.buttons_.WINDOWED.style.visibility="visible"):this.currState_==xiv.ui.Modal.ModalStates.FULLSCREEN&&(this.buttons_.POPUP.style.visibility="visible",this.buttons_.FULLSCREEN.style.visibility="hidden",this.buttons_.WINDOWED.style.visibility="visible");this.updateStyle()};
xiv.ui.Modal.prototype.setThumbnailGalleryEvents_=function(a){a=a||goog.events.listen;a(this.ThumbnailGallery_,nrg.ui.Thumbnail.EventType.MOUSEOVER,this.onThumbnailMouseOver_.bind(this));a(this.ThumbnailGallery_,nrg.ui.Thumbnail.EventType.MOUSEOUT,this.onThumbnailMouseOut_.bind(this));a(this.ThumbnailGallery_,xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_CLICK,this.onThumbnailClicked_.bind(this));a(this.ThumbnailGallery_,xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_DRAG_OVER,this.onThumbnailDragOver_.bind(this));
a(this.ThumbnailGallery_,xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_DRAG_OUT,this.onThumbnailDragOut_.bind(this));a(this.ThumbnailGallery_,xiv.ui.ThumbnailGallery.EventType.THUMBNAIL_DROPPED_INTO_TARGET,this.onThumbnailDroppedIntoViewBox_.bind(this))};xiv.ui.Modal.prototype.onThumbnailMouseOver_=function(a){this.ViewBoxHandler_.ViewBoxFromVisNode(a.Thumbnail.getViewable(),function(a){a.highlight()})};
xiv.ui.Modal.prototype.onThumbnailMouseOut_=function(a){this.ViewBoxHandler_.ViewBoxFromVisNode(a.Thumbnail.getViewable(),function(a){a.unhighlight()})};xiv.ui.Modal.prototype.onThumbnailDragOut_=function(a){this.ViewBoxHandler_.getViewBoxByElement(a.thumbnailTargetElement).unhighlight()};xiv.ui.Modal.prototype.onThumbnailDragOver_=function(a){this.ViewBoxHandler_.getViewBoxByElement(a.thumbnailTargetElement).highlight()};
xiv.ui.Modal.prototype.onThumbnailClicked_=function(a){this.ViewBoxHandler_.getFirstEmpty().load(a.Thumbnail.getViewable());this.highlightInUseThumbnails()};xiv.ui.Modal.prototype.onThumbnailDroppedIntoViewBox_=function(a){this.ViewBoxHandler_.getViewBoxByElement(a.targetElement).load(a.Thumbnail.getViewable());this.highlightInUseThumbnails()};
xiv.ui.Modal.prototype.setViewBoxHandlerEvents_=function(a){a=a||goog.events.listen;a(this.ViewBoxHandler_,xiv.ui.ViewBoxHandler.EventType.VIEWABLE_PRELOAD,this.onThumbnailPreload_.bind(this));a(this.ViewBoxHandler_,xiv.ui.ViewBoxHandler.EventType.VIEWABLE_LOADED,this.onThumbnailLoaded_.bind(this));a(this.ViewBoxHandler_,xiv.ui.ViewBoxHandler.EventType.VIEWBOXES_CHANGED,this.onViewBoxesChanged_.bind(this))};xiv.ui.Modal.prototype.onThumbnailPreload_=function(a){this.highlightInUseThumbnails()};
xiv.ui.Modal.prototype.onThumbnailLoaded_=function(a){this.highlightInUseThumbnails()};xiv.ui.Modal.prototype.onViewBoxesChanged_=function(a){goog.isDefAndNotNull(a)&&goog.isDefAndNotNull(a.animate)?(a.newSet&&goog.array.forEach(a.newSet,function(a){nrg.style.setStyle(a.getElement(),{opacity:0})}),this.animateModal()):this.updateStyle();this.ThumbnailGallery_.clearThumbnailDropTargets();this.ThumbnailGallery_.addThumbnailDropTargets(this.ViewBoxHandler_.getViewBoxElements())};
xiv.ui.Modal.prototype.disposeInternal=function(){xiv.ui.Modal.superClass_.disposeInternal.call(this);goog.object.clear(this.dims_);delete this.dims_;this.disposeAnimations(this.anims_);delete this.anims_;this.disposeAnimationQueue(this.animQueue_);delete this.animQueue_;this.disposeElementMap(this.buttons_);delete this.buttons_;goog.isDefAndNotNull(this.ViewBoxHandler_)&&(goog.events.removeAll(this.ViewBoxHandler_),this.ViewBoxHandler_.dispose(),delete this.ViewBoxHandler_);goog.events.removeAll(this.ProjectTab_);
this.ProjectTab_.dispose();delete this.ProjectTab_;goog.events.removeAll(this.ThumbnailGallery_);this.ThumbnailGallery_.dispose();delete this.ThumbnailGallery_;this.disposeAddSubjects_();delete this.currState_;delete this.prevState_};goog.exportSymbol("xiv.ui.Modal.EventType",xiv.ui.Modal.EventType);goog.exportSymbol("xiv.ui.Modal.ID_PREFIX",xiv.ui.Modal.ID_PREFIX);goog.exportSymbol("xiv.ui.Modal.CSS_SUFFIX",xiv.ui.Modal.CSS_SUFFIX);goog.exportSymbol("xiv.ui.Modal.prototype.getViewBoxHandler",xiv.ui.Modal.prototype.getViewBoxHandler);
goog.exportSymbol("xiv.ui.Modal.prototype.getThumbnailGallery",xiv.ui.Modal.prototype.getThumbnailGallery);goog.exportSymbol("xiv.ui.Modal.prototype.getProjectTab",xiv.ui.Modal.prototype.getProjectTab);goog.exportSymbol("xiv.ui.Modal.prototype.getPopupButton",xiv.ui.Modal.prototype.getPopupButton);goog.exportSymbol("xiv.ui.Modal.prototype.getCloseButton",xiv.ui.Modal.prototype.getCloseButton);goog.exportSymbol("xiv.ui.Modal.prototype.getFullScreenButton",xiv.ui.Modal.prototype.getFullScreenButton);
goog.exportSymbol("xiv.ui.Modal.prototype.render",xiv.ui.Modal.prototype.render);goog.exportSymbol("xiv.ui.Modal.prototype.setState",xiv.ui.Modal.prototype.setState);goog.exportSymbol("xiv.ui.Modal.prototype.getState",xiv.ui.Modal.prototype.getState);goog.exportSymbol("xiv.ui.Modal.prototype.highlightInUseThumbnails",xiv.ui.Modal.prototype.highlightInUseThumbnails);goog.exportSymbol("xiv.ui.Modal.prototype.animateModal",xiv.ui.Modal.prototype.animateModal);
goog.exportSymbol("xiv.ui.Modal.prototype.updateStyle",xiv.ui.Modal.prototype.updateStyle);goog.exportSymbol("xiv.ui.Modal.prototype.initSubComponents",xiv.ui.Modal.prototype.initSubComponents);goog.exportSymbol("xiv.ui.Modal.prototype.disposeInternal",xiv.ui.Modal.prototype.disposeInternal);window["xiv.ui.Modal"]=xiv.ui.Modal;window["xiv.ui.Modal.ModalStates"]=xiv.ui.Modal.ModalStates;
