var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.fe=function(){return a.ZA?a.ZA:a.ZA=new a}}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ga(a)}function ha(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ia(a){return"boolean"==typeof a}function u(a){return"number"==typeof a}function ja(a){return"function"==ga(a)}function ka(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ma(a){return a[na]||(a[na]=++pa)}
var na="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(null,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var va=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.WO=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.KM=!0;A.Ud=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.wd=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.gF=0;this.mM=function(){return this.gF++}};function xa(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.vD;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Aa);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba;function Ca(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ca);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ca,Error);Ca.prototype.name="CustomError";function Da(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ea(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Fa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ga(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ia(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ja=/(\.\d+)|(\d+)|(\D+)/g;function Ka(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ja),d=b.toLowerCase().match(Ja),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function La(a){if(!Pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ta,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Va,"&#0;"));return a}var Qa=/&/g,Ra=/</g,Sa=/>/g,Ta=/"/g,Ua=/'/g,Va=/\x00/g,Pa=/[\x00&<>"']/;
function Wa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Xa(a){return Array.prototype.join.call(arguments,"")}
function Ya(a,b){for(var c=0,d=Ia(String(a)).split("."),e=Ia(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",p=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var q=p.exec(l)||["","",""],t=m.exec(n)||["","",""];if(0==q[0].length&&0==t[0].length)break;c=Za(0==q[1].length?0:parseInt(q[1],10),0==t[1].length?0:parseInt(t[1],10))||Za(0==q[2].length,0==t[2].length)||Za(q[2],t[2])}while(0==c)}return c}function Za(a,b){return a<b?-1:a>b?1:0}
var $a=2147483648*Math.random()|0;function B(){return"goog_"+$a++}function ab(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function bb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function cb(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function db(a,b){b.unshift(a);Ca.call(this,Fa.apply(null,b));b.shift()}w(db,Ca);db.prototype.name="AssertionError";function eb(a,b){throw new db("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var fb="closure_listenable_"+(1E6*Math.random()|0);function gb(a){return!(!a||!a[fb])}var hb=0;function ib(a,b,c,d,e){this.Ek=a;this.Vr=null;this.src=b;this.type=c;this.zn=!!d;this.Wq=e;this.key=++hb;this.tm=this.jq=!1}function jb(a){a.tm=!0;a.Ek=null;a.Vr=null;a.src=null;a.Wq=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function kb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function lb(a){var b=0,c;for(c in a)b++;return b}function mb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function pb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function qb(){var a=rb,b;for(b in a)return!1;return!0}function sb(a){for(var b in a)delete a[b]}function tb(a,b){b in a&&delete a[b]}
function ub(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function vb(a){var b={},c;for(c in a)b[c]=a[c];return b}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<wb.length;h++)c=wb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function yb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return yb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var zb=Array.prototype,Ab=zb.indexOf?function(a,b,c){return zb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Bb=zb.lastIndexOf?function(a,b,c){return zb.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(r(a))return r(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},D=zb.forEach?function(a,b,c){zb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Cb=zb.filter?function(a,b,c){return zb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=0,k=r(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Db=zb.map?function(a,b,c){return zb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=r(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=
b.call(c,h[k],k,a));return e},Eb=zb.some?function(a,b,c){return zb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Fb=zb.every?function(a,b,c){return zb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};
function Gb(a){var b;a:{b=Hb;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function Ib(a,b){return 0<=Ab(a,b)}function Jb(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Kb(a,b){Ib(a,b)||a.push(b)}function Lb(a,b){var c=Ab(a,b),d;(d=0<=c)&&zb.splice.call(a,c,1);return d}function Mb(a){return zb.concat.apply(zb,arguments)}
function Nb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ob(a,b,c,d){zb.splice.apply(a,Pb(arguments,1))}function Pb(a,b,c){return 2>=arguments.length?zb.slice.call(a,b):zb.slice.call(a,b,c)}function Qb(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b};function Rb(a){this.src=a;this.Mc={};this.vp=0}f=Rb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.Mc[h];a||(a=this.Mc[h]=[],this.vp++);var k=Sb(a,b,d,e);-1<k?(b=a[k],c||(b.jq=!1)):(b=new ib(b,this.src,h,!!d,e),b.jq=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Mc))return!1;var e=this.Mc[a];b=Sb(e,b,c,d);return-1<b?(jb(e[b]),zb.splice.call(e,b,1),0==e.length&&(delete this.Mc[a],this.vp--),!0):!1};
function Tb(a,b){var c=b.type;if(!(c in a.Mc))return!1;var d=Lb(a.Mc[c],b);d&&(jb(b),0==a.Mc[c].length&&(delete a.Mc[c],a.vp--));return d}f.mg=function(a){a=a&&a.toString();var b=0,c;for(c in this.Mc)if(!a||c==a){for(var d=this.Mc[c],e=0;e<d.length;e++)++b,jb(d[e]);delete this.Mc[c];this.vp--}return b};f.Vn=function(a,b,c,d){a=this.Mc[a.toString()];var e=-1;a&&(e=Sb(a,b,c,d));return-1<e?a[e]:null};
f.Xq=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return kb(this.Mc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].zn!=b))return!0;return!1})};function Sb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.tm&&h.Ek==b&&h.zn==!!c&&h.Wq==d)return e}return-1};var Ub;a:{var Vb=ba.navigator;if(Vb){var Wb=Vb.userAgent;if(Wb){Ub=Wb;break a}}Ub=""}function Xb(a){return-1!=Ub.indexOf(a)}function Yb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Zb(){return Xb("Opera")||Xb("OPR")}function $b(){return Xb("Trident")||Xb("MSIE")}function ac(){return Xb("Safari")&&!Xb("Chrome")&&!Xb("CriOS")&&!Xb("Android")}
function bc(){var a=Ub;if($b()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Zb())return a=Yb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Yb(a);return a[2]&&a[2][1]?a[2][1]:""};var cc,dc,ec;function fc(){return ba.navigator||null}var gc=Zb(),E=$b(),hc=Xb("Gecko")&&-1==Ub.toLowerCase().indexOf("webkit")&&!(Xb("Trident")||Xb("MSIE")),ic=-1!=Ub.toLowerCase().indexOf("webkit"),jc,kc=fc();jc=kc&&kc.platform||"";cc=-1!=jc.indexOf("Mac");dc=-1!=jc.indexOf("Win");ec=-1!=jc.indexOf("Linux");var lc=!!fc()&&-1!=(fc().appVersion||"").indexOf("X11");function mc(){var a=ba.document;return a?a.documentMode:void 0}
var nc=function(){var a="",b;if(gc&&ba.opera)return a=ba.opera.version,ja(a)?a():a;hc?b=/rv\:([^\);]+)(\)|;)/:E?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:ic&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Ub))?a[1]:"");return E&&(b=mc(),b>parseFloat(a))?String(b):a}(),oc={};function pc(a){return oc[a]||(oc[a]=0<=Ya(nc,a))}function qc(a){return E&&rc>=a}var sc=ba.document,rc=sc&&E?mc()||("CSS1Compat"==sc.compatMode?parseInt(nc,10):5):void 0;var tc=!E||qc(9),uc=!E||qc(9),vc=E&&!pc("9");!ic||pc("528");hc&&pc("1.9b")||E&&pc("8")||gc&&pc("9.5")||ic&&pc("528");hc&&!pc("8")||E&&pc("9");function wc(){0!=xc&&(yc[ma(this)]=this)}var xc=0,yc={};wc.prototype.lk=!1;wc.prototype.g=function(){if(!this.lk&&(this.lk=!0,this.f(),0!=xc)){var a=ma(this);delete yc[a]}};function zc(a,b){a.Co||(a.Co=[]);a.Co.push(ca(void 0)?ta(b,void 0):b)}wc.prototype.f=function(){if(this.Co)for(;this.Co.length;)this.Co.shift()()};function Bc(a){a&&"function"==typeof a.g&&a.g()}function Dc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Dc.apply(null,d):Bc(d)}};function Ec(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.kg=!1;this.No=!0}Ec.prototype.f=function(){};Ec.prototype.g=function(){};Ec.prototype.stopPropagation=function(){this.kg=!0};Ec.prototype.preventDefault=function(){this.defaultPrevented=!0;this.No=!1};function Fc(a){a.preventDefault()};function Gc(a){Gc[" "](a);return a}Gc[" "]=ea;function Hc(a,b){Ec.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.bw=!1;this.Lc=null;a&&this.ra(a,b)}w(Hc,Ec);var Ic=[1,4,2];f=Hc.prototype;
f.ra=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(hc){var e;a:{try{Gc(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=ic||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=ic||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.bw=cc?a.metaKey:a.ctrlKey;this.state=a.state;this.Lc=a;a.defaultPrevented&&this.preventDefault()};function Jc(a){return(tc?0==a.Lc.button:"click"==a.type?!0:!!(a.Lc.button&Ic[0]))&&!(ic&&cc&&a.ctrlKey)}
f.stopPropagation=function(){Hc.d.stopPropagation.call(this);this.Lc.stopPropagation?this.Lc.stopPropagation():this.Lc.cancelBubble=!0};f.preventDefault=function(){Hc.d.preventDefault.call(this);var a=this.Lc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,vc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.DG=function(){return this.Lc};f.f=function(){};var Kc="closure_lm_"+(1E6*Math.random()|0),Lc={},Mc=0;function F(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)F(a,b[h],c,d,e);return null}c=Nc(c);return gb(a)?a.A(b,c,d,e):Oc(a,b,c,!1,d,e)}function Oc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Pc(a);l||(a[Kc]=l=new Rb(a));c=l.add(b,c,d,e,h);if(c.Vr)return c;d=Qc();c.Vr=d;d.src=a;d.Ek=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Rc(b.toString()),d);Mc++;return c}
function Qc(){var a=Sc,b=uc?function(c){return a.call(b.src,b.Ek,c)}:function(c){c=a.call(b.src,b.Ek,c);if(!c)return c};return b}function Tc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Tc(a,b[h],c,d,e);return null}c=Nc(c);return gb(a)?a.ev(b,c,d,e):Oc(a,b,c,!0,d,e)}function Uc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Uc(a,b[h],c,d,e);else c=Nc(c),gb(a)?a.tb(b,c,d,e):a&&(a=Pc(a))&&(b=a.Vn(b,c,!!d,e))&&Vc(b)}
function Vc(a){if(u(a)||!a||a.tm)return!1;var b=a.src;if(gb(b))return Tb(b.Sg,a);var c=a.type,d=a.Vr;b.removeEventListener?b.removeEventListener(c,d,a.zn):b.detachEvent&&b.detachEvent(Rc(c),d);Mc--;(c=Pc(b))?(Tb(c,a),0==c.vp&&(c.src=null,b[Kc]=null)):jb(a);return!0}function I(a){if(a)if(gb(a))a.removeAllListeners(void 0);else if(a=Pc(a)){var b=0,c;for(c in a.Mc)for(var d=a.Mc[c].concat(),e=0;e<d.length;++e)Vc(d[e])&&++b}}
function Wc(a,b){if(gb(a))return a.Xq(b,void 0);var c=Pc(a);return!!c&&c.Xq(b,void 0)}function Rc(a){return a in Lc?Lc[a]:Lc[a]="on"+a}function Xc(a,b,c,d){var e=1;if(a=Pc(a))if(b=a.Mc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.zn==c&&!h.tm&&(e&=!1!==Yc(h,d))}return Boolean(e)}function Yc(a,b){var c=a.Ek,d=a.Wq||a.src;a.jq&&Vc(a);return c.call(d,b)}
function Sc(a,b){if(a.tm)return!0;if(!uc){var c=b||da("window.event"),d=new Hc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.kg&&0<=l;l--)d.currentTarget=c[l],e&=Xc(c[l],h,!0,d);for(l=0;!d.kg&&l<c.length;l++)d.currentTarget=c[l],e&=Xc(c[l],h,!1,d)}return e}return Yc(a,new Hc(b,this))}
function Pc(a){a=a[Kc];return a instanceof Rb?a:null}var Zc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Nc(a){return ja(a)?a:a[Zc]||(a[Zc]=function(b){return a.handleEvent(b)})};function $c(){wc.call(this);this.Sg=new Rb(this);this.qF=this;this.Rr=null}w($c,wc);$c.prototype[fb]=!0;f=$c.prototype;f.vw=function(a){this.Rr=a};f.addEventListener=function(a,b,c,d){F(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Rr;if(c)for(b=[];c;c=c.Rr)b.push(c);var c=this.qF,d=a.type||a;if(r(a))a=new Ec(a,c);else if(a instanceof Ec)a.target=a.target||c;else{var e=a;a=new Ec(d,c);xb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.kg&&0<=k;k--)h=a.currentTarget=b[k],e=ad(h,d,!0,a)&&e;a.kg||(h=a.currentTarget=c,e=ad(h,d,!0,a)&&e,a.kg||(e=ad(h,d,!1,a)&&e));if(b)for(k=0;!a.kg&&k<b.length;k++)h=a.currentTarget=b[k],e=ad(h,d,!1,a)&&e;return e};
f.f=function(){$c.d.f.call(this);this.removeAllListeners();this.Rr=null};f.A=function(a,b,c,d){return this.Sg.add(String(a),b,!1,c,d)};f.ev=function(a,b,c,d){return this.Sg.add(String(a),b,!0,c,d)};f.tb=function(a,b,c,d){return this.Sg.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.Sg?this.Sg.mg(a):0};
function ad(a,b,c,d){b=a.Sg.Mc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.tm&&k.zn==c){var l=k.Ek,n=k.Wq||k.src;k.jq&&Tb(a.Sg,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.No}f.Vn=function(a,b,c,d){return this.Sg.Vn(String(a),b,c,d)};f.Xq=function(a,b){return this.Sg.Xq(ca(a)?String(a):void 0,b)};function bd(){$c.call(this);this.s="base";this.ld=window["X.counter"].mM();this.I=!1}w(bd,$c);bd.prototype.__defineGetter__("classname",function(){return this.s});bd.prototype.__defineGetter__("id",function(){return this.ld});v("X.base",bd);function cd(a,b){bd.call(this);this.s="triplets";this.Nf=Infinity;this.Kf=-Infinity;this.Of=Infinity;this.Lf=-Infinity;this.Pf=Infinity;this.Mf=-Infinity;this.Mp=[0,0,0];this.Ma=0;this.Zb=new Float32Array(a);null!=b&&(this.Zb=b.Zb.subarray(0,b.Zb.length),this.Ma=this.Zb.length,this.Nf=b.Nf,this.Kf=b.Kf,this.Of=b.Of,this.Lf=b.Lf,this.Pf=b.Pf,this.Mf=b.Mf,this.Mp=b.Mp.slice())}w(cd,bd);f=cd.prototype;
f.add=function(a,b,c){this.Nf=Math.min(this.Nf,a);this.Kf=Math.max(this.Kf,a);this.Of=Math.min(this.Of,b);this.Lf=Math.max(this.Lf,b);this.Pf=Math.min(this.Pf,c);this.Mf=Math.max(this.Mf,c);this.Mp=[(this.Nf+this.Kf)/2,(this.Of+this.Lf)/2,(this.Pf+this.Mf)/2];this.I=!0;this.Zb[this.Ma++]=a;this.Zb[this.Ma++]=b;this.Zb[this.Ma++]=c;return this.Ma/3};f.resize=function(){if(this.Ma!=this.Zb.length){var a=new Float32Array(this.Ma);a.set(this.Zb.subarray(0,this.Ma));this.Zb=a}};
f.get=function(a){a*=3;return[this.Zb[a],this.Zb[a+1],this.Zb[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Zb=new Float32Array(this.Zb.length);this.I=!0};cd.prototype.__defineGetter__("count",function(){this.resize();return this.Zb.length/3});cd.prototype.__defineGetter__("length",function(){this.resize();return this.Zb.length});v("X.triplets",cd);v("X.triplets.prototype.add",cd.prototype.add);v("X.triplets.prototype.resize",cd.prototype.resize);
v("X.triplets.prototype.get",cd.prototype.get);v("X.triplets.prototype.remove",cd.prototype.remove);v("X.triplets.prototype.clear",cd.prototype.clear);function dd(){bd.call(this);this.s="indexer";this.vt=[];this.Vd={}}w(dd,bd);dd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.Vd||(this.Vd[b]=this.vt.length,this.vt.push(a));return this.Vd[b]};dd.prototype.unique=function(){return this.vt};function ed(a){bd.call(this);this.s="file";this.Yp=a;this.I=!0}w(ed,bd);function fd(){this.Gg=this.fa=null}fd.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.fa=null;else{if(g(a)){if(1==a.length){this.fa=new ed(a[0]);return}this.fa=Db(a,function(a){var c=new J;c.fa=new ed(a);return c})}else this.fa=new ed(a);this.Gg=null}});fd.prototype.__defineGetter__("file",function(){return this.fa?g(this.fa)?this.fa.map(function(a){return a.fa.Yp}):this.fa.Yp:""});
fd.prototype.__defineGetter__("filedata",function(){return g(this.fa)?this.fa.map(function(a){return a.Gg}):this.Gg});fd.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.Gg=null;if(g(a))if(1==a.length)this.Gg=a[0];else{var b=this.fa.length,c;for(c=0;c<b;c++)this.fa[c].Gg=a[c]}else this.Gg=a});function gd(){return null};function hd(a,b,c){return Math.min(Math.max(a,b),c)};function jd(a,b){this.Bb={};this.jb=[];this.Nh=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.xt(a)}f=jd.prototype;f.Yf=function(){return this.Nh};f.Wh=function(){kd(this);for(var a=[],b=0;b<this.jb.length;b++)a.push(this.Bb[this.jb[b]]);return a};f.Un=function(){kd(this);return this.jb.concat()};
f.Ut=function(a){for(var b=0;b<this.jb.length;b++){var c=this.jb[b];if(ld(this.Bb,c)&&this.Bb[c]==a)return!0}return!1};f.Rl=function(a,b){if(this===a)return!0;if(this.Nh!=a.Yf())return!1;var c=b||md;kd(this);for(var d,e=0;d=this.jb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function md(a,b){return a===b}f.km=function(){return 0==this.Nh};f.clear=function(){this.Bb={};this.Nh=this.jb.length=0};
f.remove=function(a){return ld(this.Bb,a)?(delete this.Bb[a],this.Nh--,this.jb.length>2*this.Nh&&kd(this),!0):!1};function kd(a){if(a.Nh!=a.jb.length){for(var b=0,c=0;b<a.jb.length;){var d=a.jb[b];ld(a.Bb,d)&&(a.jb[c++]=d);b++}a.jb.length=c}if(a.Nh!=a.jb.length){for(var e={},c=b=0;b<a.jb.length;)d=a.jb[b],ld(e,d)||(a.jb[c++]=d,e[d]=1),b++;a.jb.length=c}}f.get=function(a,b){return ld(this.Bb,a)?this.Bb[a]:b};f.set=function(a,b){ld(this.Bb,a)||(this.Nh++,this.jb.push(a));this.Bb[a]=b};
f.xt=function(a){var b;a instanceof jd?(b=a.Un(),a=a.Wh()):(b=ob(a),a=mb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.Un(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new jd(this)};f.Yw=function(){for(var a=new jd,b=0;b<this.jb.length;b++){var c=this.jb[b];a.set(this.Bb[c],c)}return a};function ld(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function nd(){bd.call(this);this.s="colortable";this.Vd=new jd;xa(this,new fd)}w(nd,bd);nd.prototype.add=function(a,b,c,d,e,h){if(!(u(a)&&u(c)&&u(d)&&u(e)&&u(h)))throw Error("Invalid color table entry.");this.Vd.set(a,[b,c,d,e,h]);this.I=!0};nd.prototype.get=function(a){return this.Vd.get(a)};v("X.colortable.prototype.get",nd.prototype.get);function od(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}od.prototype.clone=function(){return new od(this.x,this.y,this.z)};od.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};od.prototype.Tw=function(){return[this.x,this.y,this.z]};function K(a,b,c){this.x=a;this.y=b;this.z=c}w(K,od);f=K.prototype;f.clone=function(){return new K(this.x,this.y,this.z)};f.gg=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.Fb=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.gg())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.Cc=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.Rl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function pd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function qd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function rd(a,b){return new K(a.x+b.x,a.y+b.y,a.z+b.z)}function sd(a,b){return new K(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.Q=K;f=A.Q.prototype;f.clone=K.prototype.clone;f.gg=K.prototype.gg;f.scale=K.prototype.scale;f.Fb=K.prototype.Fb;f.add=K.prototype.add;f.Cc=K.prototype.Cc;f.normalize=function(){var a=this.gg();return 0==a?this.scale(0):this.scale(1/a)};A.Q.$i=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.Q.jk=sd;A.Q.ku=pd;A.Q.pr=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new K(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.Q.prototype.__defineGetter__("xx",function(){return this.x});
A.Q.prototype.__defineGetter__("yy",function(){return this.y});A.Q.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.Q);v("X.vector.prototype.clone",A.Q.prototype.clone);v("X.vector.prototype.magnitude",A.Q.prototype.gg);v("X.vector.prototype.scale",A.Q.prototype.scale);v("X.vector.prototype.invert",A.Q.prototype.Fb);v("X.vector.prototype.normalize",A.Q.prototype.normalize);v("X.vector.prototype.add",A.Q.prototype.add);v("X.vector.prototype.subtract",A.Q.prototype.Cc);
v("X.vector.dot",A.Q.$i);v("X.vector.cross",A.Q.jk);v("X.vector.distance",A.Q.ku);v("X.vector.lerp",A.Q.pr);function td(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}td.prototype.BYTES_PER_ELEMENT=8;td.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};td.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{td.BYTES_PER_ELEMENT=8}catch(ud){}td.prototype.BYTES_PER_ELEMENT=td.prototype.BYTES_PER_ELEMENT;td.prototype.set=td.prototype.set;td.prototype.toString=td.prototype.toString;v("Float64Array",td)};function vd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}vd.prototype.BYTES_PER_ELEMENT=4;vd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};vd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(vd.BYTES_PER_ELEMENT=4,vd.prototype.BYTES_PER_ELEMENT=vd.prototype.BYTES_PER_ELEMENT,vd.prototype.set=vd.prototype.set,vd.prototype.toString=vd.prototype.toString,v("Float32Array",vd));function wd(){return new Float32Array(3)}function xd(a,b,c){var d=wd();d[0]=a;d[1]=b;d[2]=c;return d}function yd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function zd(){return new Float32Array(4)}function Ad(a,b,c,d){var e=zd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Bd(){return new Float32Array(16)}function Cd(){var a=Bd();a[0]=a[5]=a[10]=a[15]=1;return a}function Dd(a,b,c,d,e,h,k,l,n,p,m,q,t,s,z,y,H){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=p;a[9]=m;a[10]=q;a[11]=t;a[12]=s;a[13]=z;a[14]=y;a[15]=H;return a}function Ed(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Fd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function L(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Gd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Hd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Id(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],p=a[6],m=a[7],q=a[8],t=a[9],s=a[10],z=a[11],y=a[12],H=a[13],Q=a[14];a=a[15];var P=b[0],G=b[1],S=b[2],Y=b[3],U=b[4],wa=b[5],oa=b[6],ya=b[7],Ma=b[8],Ha=b[9],Na=b[10],la=b[11],za=b[12],qa=b[13],Cc=b[14];b=b[15];c[0]=d*P+l*G+q*S+y*Y;c[1]=e*P+n*G+t*S+H*Y;c[2]=h*P+p*G+s*S+Q*Y;c[3]=k*P+m*G+z*S+a*Y;c[4]=d*U+l*wa+q*oa+y*ya;c[5]=e*U+n*wa+t*oa+H*ya;c[6]=h*U+p*wa+s*oa+Q*ya;c[7]=k*U+m*wa+z*oa+a*ya;c[8]=d*Ma+l*Ha+q*Na+y*la;c[9]=e*Ma+n*Ha+t*Na+H*la;
c[10]=h*Ma+p*Ha+s*Na+Q*la;c[11]=k*Ma+m*Ha+z*Na+a*la;c[12]=d*za+l*qa+q*Cc+y*b;c[13]=e*za+n*qa+t*Cc+H*b;c[14]=h*za+p*qa+s*Cc+Q*b;c[15]=k*za+m*qa+z*Cc+a*b;return c}
function Jd(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=a[8],q=a[9],t=a[10],s=a[11],z=a[12],y=a[13],H=a[14],Q=a[15],P=c*l-d*k,G=c*n-e*k,S=c*p-h*k,Y=d*n-e*l,U=d*p-h*l,wa=e*p-h*n,oa=m*y-q*z,ya=m*H-t*z,Ma=m*Q-s*z,Ha=q*H-t*y,Na=q*Q-s*y,la=t*Q-s*H,za=P*la-G*Na+S*Ha+Y*Ma-U*ya+wa*oa;if(0==za)return!1;za=1/za;b[0]=(l*la-n*Na+p*Ha)*za;b[1]=(-d*la+e*Na-h*Ha)*za;b[2]=(y*wa-H*U+Q*Y)*za;b[3]=(-q*wa+t*U-s*Y)*za;b[4]=(-k*la+n*Ma-p*ya)*za;b[5]=(c*la-e*Ma+h*ya)*za;b[6]=(-z*wa+H*S-Q*G)*za;b[7]=
(m*wa-t*S+s*G)*za;b[8]=(k*Na-l*Ma+p*oa)*za;b[9]=(-c*Na+d*Ma-h*oa)*za;b[10]=(z*U-y*S+Q*P)*za;b[11]=(-m*U+q*S-s*P)*za;b[12]=(-k*Ha+l*ya-n*oa)*za;b[13]=(c*Ha-d*ya+e*oa)*za;b[14]=(-z*Y+y*G-H*P)*za;b[15]=(m*Y-q*G+t*P)*za;return!0}function Kd(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Ld(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Md(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.t={};A.t.oB=function(a,b,c,d){c=c.Cc(b);c.normalize();d=A.Q.jk(c,d);d.normalize();var e=A.Q.jk(d,c);e.normalize();c.Fb();L(a,0,d.x,d.y,d.z,0);L(a,1,e.x,e.y,e.z,0);L(a,2,c.x,c.y,c.z,0);Md(a,-b.x,-b.y,-b.z);return a};A.t.Sb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.Q((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.t.bM=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Hd(a,b,d);Hd(a,c,e);Gd(a,b,e);Gd(a,c,d);return a};A.t.aM=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Fd(a,b,d);Fd(a,c,e);Ed(a,b,e);Ed(a,c,d);return a};A.t.eo=Cd;A.t.clone=function(a){var b=Bd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.t.Yw=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.t.dG=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],p=a[8],m=a[9],q=a[10],t=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(q*a-t*y)-(b*l-d*h)*(m*a-t*z)+(b*n-e*h)*(m*y-q*z)+(c*l-d*k)*(p*a-t*s)-(c*n-e*k)*(p*y-q*s)+(d*n-e*l)*(p*z-m*s)};A.t.Fb=Jd;A.t.kv=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Dd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.t.nJ=function(a,b,c,d,e,h,k){return Dd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.t.oJ=function(a,b,c,d,e,h,k){return Dd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.t.multiply=Id;A.t.wB=Ld;A.t.translate=Md;A.t.scale=function(a,b,c,d){return Dd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.t.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],p=a[4],m=a[5],q=a[6],t=a[7],s=a[8],z=a[9],y=a[10],H=a[11],Q=Math.cos(b),P=Math.sin(b),G=1-Q;b=c*c*G+Q;var S=c*d*G+e*P,Y=c*e*G-d*P,U=c*d*G-e*P,wa=d*d*G+Q,oa=d*e*G+c*P,ya=c*e*G+d*P;c=d*e*G-c*P;e=e*e*G+Q;return Dd(a,h*b+p*S+s*Y,k*b+m*S+z*Y,l*b+q*S+y*Y,n*b+t*S+H*Y,h*U+p*wa+s*oa,k*U+m*wa+z*oa,l*U+q*wa+y*oa,n*U+t*wa+H*oa,h*ya+p*c+s*e,k*ya+m*c+z*e,l*ya+q*c+y*e,n*ya+t*c+H*e,a[12],a[13],a[14],a[15])};
A.t.Yr=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[4]=c*m+k*q;a[5]=d*m+l*q;a[6]=e*m+n*q;a[7]=h*m+p*q;a[8]=c*-q+k*m;a[9]=d*-q+l*m;a[10]=e*-q+n*m;a[11]=h*-q+p*m;return a};A.t.Zr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*-q;a[1]=d*m+l*-q;a[2]=e*m+n*-q;a[3]=h*m+p*-q;a[8]=c*q+k*m;a[9]=d*q+l*m;a[10]=e*q+n*m;a[11]=h*q+p*m;return a};
A.t.$r=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*q;a[1]=d*m+l*q;a[2]=e*m+n*q;a[3]=h*m+p*q;a[4]=c*-q+k*m;a[5]=d*-q+l*m;a[6]=e*-q+n*m;a[7]=h*-q+p*m;return a};v("X.matrix.identity",A.t.eo);v("X.matrix.clone",A.t.clone);v("X.matrix.transpose",A.t.Yw);v("X.matrix.determinant",A.t.dG);v("X.matrix.invert",A.t.Fb);v("X.matrix.multiply",A.t.multiply);v("X.matrix.multiplyByVector",A.t.Sb);v("X.matrix.multiplyByVec4",A.t.wB);
v("X.matrix.makePerspective",A.t.kv);v("X.matrix.makeFrustum",A.t.nJ);v("X.matrix.makeOrtho",A.t.oJ);v("X.matrix.makeLookAt",A.t.oB);v("X.matrix.translate",A.t.translate);v("X.matrix.scale",A.t.scale);v("X.matrix.rotate",A.t.rotate);v("X.matrix.rotateX",A.t.Yr);v("X.matrix.rotateY",A.t.Zr);v("X.matrix.rotateZ",A.t.$r);v("X.matrix.swapRows",A.t.bM);v("X.matrix.swapCols",A.t.aM);function Nd(){bd.call(this);this.s="transform";this.zb=A.t.eo()}w(Nd,bd);Nd.prototype.__defineGetter__("matrix",function(){return this.zb});Nd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.zb=a;this.ea()});f=Nd.prototype;f.Yr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Yr(this.zb,a*Math.PI/180);this.ea()};
f.Zr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Zr(this.zb,a*Math.PI/180);this.ea()};f.$r=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.$r(this.zb,a*Math.PI/180);this.ea()};f.gD=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.zb,a,0,0);this.ea()};f.hD=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.zb,0,a,0);this.ea()};
f.iD=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.zb,0,0,a);this.ea()};function Od(a,b,c){a.zb[b+4*c]*=-1;a.ea()}f.wG=function(){Od(this,0,0)};f.xG=function(){Od(this,1,1)};f.yG=function(){Od(this,2,2)};f.ea=function(){this.I=!0};v("X.transform",Nd);v("X.transform.prototype.rotateX",Nd.prototype.Yr);v("X.transform.prototype.rotateY",Nd.prototype.Zr);v("X.transform.prototype.rotateZ",Nd.prototype.$r);v("X.transform.prototype.translateX",Nd.prototype.gD);
v("X.transform.prototype.translateY",Nd.prototype.hD);v("X.transform.prototype.translateZ",Nd.prototype.iD);v("X.transform.prototype.flipX",Nd.prototype.wG);v("X.transform.prototype.flipY",Nd.prototype.xG);v("X.transform.prototype.flipZ",Nd.prototype.yG);v("X.transform.prototype.modified",Nd.prototype.ea);function Qd(){bd.call(this);this.s="texture";this.Li=this.Jf=this.fa=null;this.nt=this.pt=0;this.Zx=!1;xa(this,new fd)}w(Qd,bd);Qd.prototype.__defineSetter__("rawData",function(a){this.Li=a;this.I=!0});Qd.prototype.__defineSetter__("rawDataHeight",function(a){this.nt=a;this.I=!0});Qd.prototype.__defineSetter__("rawDataWidth",function(a){this.pt=a;this.I=!0});Qd.prototype.__defineSetter__("grayscale",function(a){this.Zx=a;this.I=!0});v("X.texture",Qd);function Rd(){this.Ed=Sd;this.ic=new Nd;this.Ha=[1,1,1];this.Bl=this.Wa=this.Hc=this.da=this.C=null;this.wl=[];this.ob=!0;this.vl=this.hn=1;this.nl=null;this.Ym=!1;this.Uc=1;this.kd=0;this.gn=!0}var Sd="TRIANGLES";Rd.prototype.__defineSetter__("type",function(a){return this.Ed=a});Rd.prototype.__defineGetter__("type",function(){return this.Ed});Rd.prototype.__defineGetter__("texture",function(){this.Wa||(this.Wa=new Qd);return this.Wa});Rd.prototype.__defineGetter__("transform",function(){return this.ic});
Rd.prototype.__defineGetter__("points",function(){return this.C});Rd.prototype.__defineSetter__("points",function(a){this.C=a});Rd.prototype.__defineGetter__("normals",function(){return this.da});Rd.prototype.__defineSetter__("normals",function(a){this.da=a});Rd.prototype.__defineGetter__("colors",function(){return this.Hc});Rd.prototype.__defineSetter__("colors",function(a){this.Hc=a});Rd.prototype.__defineGetter__("color",function(){return this.Ha});
Rd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Ha=a;this.I=!0});Rd.prototype.__defineGetter__("opacity",function(){return this.Uc});Rd.prototype.__defineSetter__("opacity",function(a){if(!u(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Uc=a;this.I=!0});Rd.prototype.__defineGetter__("caption",function(){return this.nl});
Rd.prototype.__defineSetter__("caption",function(a){this.nl=a;this.I=!0});Rd.prototype.__defineGetter__("visible",function(){return this.ob});Rd.prototype.__defineSetter__("visible",function(a){for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.ob=a;this.I=!0});Rd.prototype.__defineGetter__("pointsize",function(){return this.hn});Rd.prototype.__defineSetter__("pointsize",function(a){if(!u(a))throw Error("Invalid point size.");this.hn=a;this.I=!0});
Rd.prototype.__defineGetter__("magicmode",function(){return this.Ym});Rd.prototype.__defineSetter__("magicmode",function(a){if(!ia(a))throw Error("Invalid magic mode setting.");this.Ym=a;this.I=!0});Rd.prototype.__defineGetter__("linewidth",function(){return this.vl});Rd.prototype.__defineSetter__("linewidth",function(a){if(!u(a))throw Error("Invalid line width.");this.vl=a;this.I=!0});Rd.prototype.__defineGetter__("pickable",function(){return this.gn});
Rd.prototype.__defineSetter__("pickable",function(a){if(!ia(a))throw Error("Invalid pickable setting.");this.gn=a;this.I=!0});Rd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.Bl});Rd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Td(){this.Wd=Infinity;this.yb=this.Yb=-Infinity;this.Ab=Infinity;this.Hi=[0,0,0];this.Fi=[1,1,1]}Td.prototype.__defineGetter__("lowerThreshold",function(){return this.yb});Td.prototype.__defineSetter__("lowerThreshold",function(a){this.yb=a});Td.prototype.__defineGetter__("upperThreshold",function(){return this.Ab});Td.prototype.__defineSetter__("upperThreshold",function(a){this.Ab=a});Td.prototype.__defineGetter__("min",function(){return this.Wd});Td.prototype.__defineGetter__("max",function(){return this.Yb});
Td.prototype.__defineGetter__("minColor",function(){return this.Hi});Td.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.Hi=a});Td.prototype.__defineGetter__("maxColor",function(){return this.Fi});Td.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.Fi=a});function Ud(){bd.call(this);this.s="scalars";this.Vm=this.cb=null;this.ly=!0;this.ct=0;xa(this,new fd);xa(this,new Td);this.Hi=[0,1,0];this.Fi=[1,0,0]}w(Ud,bd);Ud.prototype.__defineGetter__("array",function(){return this.cb});Ud.prototype.__defineSetter__("array",function(a){this.Vm=this.cb=a;this.I=!0});Ud.prototype.__defineGetter__("interpolation",function(){return this.ct});Ud.prototype.__defineSetter__("interpolation",function(a){this.ct=a});v("X.scalars",Ud);function Vd(a){bd.call(this);this.s="object";this.j=[];this.eb=this.Bd=null;xa(this,new Rd);null!=a&&this.gk(a)}w(Vd,bd);
Vd.prototype.gk=function(a){this.Ed=a.Ed;this.ic=new Nd;this.ic.zb=new Float32Array(a.ic.zb);this.Ha=a.Ha.slice();a.C&&(this.C=new cd(a.C.length,a.C));a.da&&(this.da=new cd(a.da.length,a.da));a.Hc&&(this.Hc=new cd(a.Hc.length,a.Hc));this.Wa=a.Wa;this.Bl=a.Bl;a.fa&&(this.fa=new ed((new String(a.fa.Yp)).toString()));this.Uc=a.Uc;this.j.length=0;var b=a.j;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.j.push(new A[b[d].s](b[d]));this.ob=a.ob;this.hn=a.hn;this.vl=a.vl;a.nl&&(this.nl=(new String(a.nl)).toString());
this.Ym=a.Ym;this.gn=a.gn;this.wl=a.wl.slice();this.I=!0};Vd.prototype.__defineGetter__("colortable",function(){this.Bd||(this.Bd=new nd);return this.Bd});Vd.prototype.__defineGetter__("scalars",function(){this.eb||(this.eb=new Ud);return this.eb});Vd.prototype.__defineGetter__("children",function(){return this.j});Vd.prototype.ea=function(){var a=new Wd;a.Na=this;this.dispatchEvent(a)};Vd.prototype.remove=function(){var a=new Xd;a.Na=this;this.dispatchEvent(a)};
function Zd(a,b){if(!(null!=a&&null!=b&&a instanceof Vd&&b instanceof Vd))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Uc?-1:1==b.Uc?1:null!=a.kd&&null!=b.kd&&a.kd>b.kd?-1:1}v("X.object",Vd);v("X.object.prototype.modified",Vd.prototype.ea);v("X.object.prototype.remove",Vd.prototype.remove);function $d(a){Ec.call(this,a);this.s="event"}w($d,Ec);var ae="pan"+B(),be="rotate"+B(),ce="zoom"+B(),de="scroll"+B();B();var ee="resetview"+B(),fe="windowlevel"+B(),ge="modified"+B(),he="remove"+B(),ie="progress"+B(),je="hover"+B(),ke="hover_end"+B(),le="computing"+B(),me="computing_end"+B(),oe="computing_progress"+B();function pe(){$d.call(this,fe);this.ht=this.wt=0}w(pe,$d);function qe(){$d.call(this,ae);this.kd=new A.Q(0,0,0)}w(qe,$d);function re(){$d.call(this,be);this.kd=new A.Q(0,0,0)}
w(re,$d);function se(){$d.call(this,ce);this.If=this.Hg=!1}w(se,$d);function te(){$d.call(this,de);this.$b=!1}w(te,$d);function xe(){$d.call(this,je);this.eq=this.dq=0}w(xe,$d);function ye(){$d.call(this,ke)}w(ye,$d);function ze(){$d.call(this,ee)}w(ze,$d);function Wd(){$d.call(this,ge);this.va=this.Na=null}w(Wd,$d);function Xd(){$d.call(this,he);this.va=this.Na=null}w(Xd,$d);function Ae(){$d.call(this,ie);this.Yj=0}w(Ae,$d);function Be(){$d.call(this,le);this.Na=null}w(Be,$d);
function Ce(){$d.call(this,oe);this.Yj=0}w(Ce,$d);function De(){$d.call(this,me);this.Na=null}w(De,$d);v("X.event.events.PAN",ae);v("X.event.events.ROTATE",be);v("X.event.events.ZOOM",ce);v("X.event.events.SCROLL",de);function Ee(){bd.call(this);this.s="parser";this._data=null;this.Ma=0;this.jF=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Tp=!0}w(Ee,bd);Ee.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Fe(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Ge(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ee.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.Ma,this.Ma+=b*c));if(this.jF!=this.Tp)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function He(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Ad(0,0,0,1),e=zd();Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,0,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,b[1]-
1,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,0,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,b[1]-1,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,0,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,b[1]-1,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,b[1]-1,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ie(a,b){var c=Cd();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=wd(),h=a[0],k=a[1],l=a[2],n=b[0],p=b[1],m=b[2];e[0]=k*m-l*p;e[1]=l*n-h*m;e[2]=h*p-k*n;yd(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];L(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);L(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);L(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=Bd();Jd(c,d);return[c,d]}
function Je(a,b,c,d,e,h,k,l,n){var p=new Ke;yd(c,c);for(var m=[],q=[],t=0;6>t;t++)for(var s=Math.floor(t/2),z=(s+1)%3,y=(s+2)%3,H=(4+2*s)%6,Q=0;2>Q;Q++){var P=(2+Q+2*s)%6,G=-(c[s]*(e[t]-a[s])+c[z]*(e[P]-a[z]))/c[y]+a[y];if(G>=e[H]&&G<=e[H+1]||G<=e[H]&&G>=e[H+1]){var S=[];S[s]=e[t];S[z]=e[P];S[y]=G;m.push(S)}else S=[],S[s]=e[t],S[z]=e[P],S[y]=G,q.push(S)}a=xd(0,0,1);a=Ie(c,a);e=a[0];a=a[1];s=[];for(q=0;q<m.length;++q)t=Ad(m[q][0],m[q][1],m[q][2],1),z=zd(),Ld(e,t,z),s.push([z[0],z[1],z[2]]);e=xd(1,
0,0);m=wd();Kd(a,e,m);q=xd(0,1,0);e=wd();Kd(a,q,e);t=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(q=q=0;q<s.length;++q)s[q][0]<t[0]&&(t[0]=s[q][0]),s[q][0]>t[1]&&(t[1]=s[q][0]),s[q][1]<t[2]&&(t[2]=s[q][1]),s[q][1]>t[3]&&(t[3]=s[q][1]),s[q][2]<t[4]&&(t[4]=s[q][2]),s[q][2]>t[5]&&(t[5]=s[q][2]);q=Ad(t[0]+(t[1]-t[0])/2,t[2]+(t[3]-t[2])/2,t[4]+(t[5]-t[4])/2,0);s=zd();Id(a,q,s);z=Math.floor(t[0]);y=Math.ceil(t[1]);z==y&&y++;H=y-z;Q=Math.floor(t[2]);
P=Math.ceil(t[3]);G=P-Q;S=b[0];b=b[1];var q=Math.ceil(H/S),Y=Math.ceil(G/b),U=new Uint8Array(4*q*Y),wa=new Qd;wa.pt=q;wa.nt=Y;var Y=zd(),oa=Ad(0,0,t[4],1),ya=Bd();Id(k.aF,a,ya);for(var Ma=P-1E-7,Ha=y-1E-7,Na=0,la=0,za=0,qa=Q,qa=Q;qa<=Ma;qa+=b)for(za++,la=0,oa[1]=qa,q=z;q<=Ha;q+=S){la++;oa[0]=q;Ld(ya,oa,Y);var Cc=4*Na,ue=Math.floor(Y[2]),ve=Math.floor(Y[1]),we=Math.floor(Y[0]);if(0<=we&&we<k.Da[0]&&0<=ve&&ve<k.Da[1]&&0<=ue&&ue<k.Da[2]){var Yd=h[ue][ve][we],Qh=we=ve=ue=0;n?((Yd=n.get(Yd))||(Yd=[0,.61,
0,0,1]),ue=255*Yd[1],ve=255*Yd[2],we=255*Yd[3],Qh=255*Yd[4]):(ue=ve=we=Yd/k.Yb*255,Qh=255);U[Cc]=ue;U[++Cc]=ve;U[++Cc]=we;U[++Cc]=Qh}else U[Cc]=0,U[++Cc]=0,U[++Cc]=0,U[++Cc]=0;Na++}wa.Li=U;p.Wa=wa;p.pF=t;p.cF=a;p.bF=ya;p.iF=Q;p.SO=P;p.oF=z;p.TO=y;p.ay=la;p.$x=za;p.Hh=S;p.Xa=H;p.Ah=b;p.Ia=G;p.Ta=[s[0],s[1],s[2]];p.ql=[c[0],c[1],c[2]];p.Zp=[m[0],m[1],m[2]];p.$b=[e[0],e[1],e[2]];p.ob=!1;p.Gh=k;p.zh=null==k.Gh||l?!0:!1;p.ml=d;p.hf();p.ob=!1;return p}
function Le(a,b,c,d){var e;e=d.Gc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,q=(2+2*n)%6,t=(4+2*n)%6,s=1/c[n]*(e[l]-b[n]);if(Infinity!=s&&-Infinity!=s){var z=b[p]+c[p]*s,s=b[m]+c[m]*s;z>=e[q]&&z<=e[q+1]&&s>=e[t]&&s<=e[t+1]?(q=[],q[n]=e[l],q[p]=z,q[m]=s,h.push(q)):(q=[],q[n]=e[l],q[p]=z,q[m]=s,k.push(q))}}e=[h,k];b=e[0];d.e[a].J=e;e=pd(new K(b[0][0],b[0][1],b[0][2]),new K(b[1][0],b[1][1],b[1][2]));d.e[a].RO=e;h=xd(0,0,1);k=Ie(c,h)[0];l=Ad(d.$s[0],d.$s[1],d.$s[2],0);h=
zd();Ld(k,l,h);k=zd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.e[a].Dd=[Math.abs(h[0]),Math.abs(h[1])];d.e[a].zl=h[2];d.e[a].Oa=k;e=Math.floor(Math.abs(e/h[2]));d.kn[a]=e+1;d.e[a].ca=e+1;d.e[a].J[0][0][0]>d.e[a].J[0][1][0]?0<k[0]&&(e=d.e[a].J[0][0],d.e[a].J[0][0]=d.e[a].J[0][1],d.e[a].J[0][1]=e):d.e[a].J[0][0][0]<d.e[a].J[0][1][0]?0>k[0]&&(e=d.e[a].J[0][0],d.e[a].J[0][0]=d.e[a].J[0][1],d.e[a].J[0][1]=e):d.e[a].J[0][0][1]>d.e[a].J[0][1][1]?
0<k[1]&&(e=d.e[a].J[0][0],d.e[a].J[0][0]=d.e[a].J[0][1],d.e[a].J[0][1]=e):d.e[a].J[0][0][1]<d.e[a].J[0][1][1]?0>k[1]&&(e=d.e[a].J[0][0],d.e[a].J[0][0]=d.e[a].J[0][1],d.e[a].J[0][1]=e):d.e[a].J[0][0][2]>d.e[a].J[0][1][2]?0<k[2]&&(e=d.e[a].J[0][0],d.e[a].J[0][0]=d.e[a].J[0][1],d.e[a].J[0][1]=e):d.e[a].J[0][0][2]<d.e[a].J[0][1][2]&&0>k[2]&&(e=d.e[a].J[0][0],d.e[a].J[0][0]=d.e[a].J[0][1],d.e[a].J[0][1]=e);d.e[a].kt=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Me(a,b){var c;c=b._data;for(var d=b.Da,e=b.Yb,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,p=0,m=0,q=0,t=0,q=0;q<d[2];q++){var s=c.subarray(q*l,(q+1)*l),t=0;k[q]=Array(d[1]);h[q]=Array(d[1]);for(m=0;m<d[1];m++)for(k[q][m]=new c.constructor(d[0]),h[q][m]=new c.constructor(d[0]),p=0;p<d[0];p++)n=s[t],k[q][m][p]=n/e*255,h[q][m][p]=n,t++}c=[h,k];b.hc=c[0];b.QO=c[1];A.Ud(a.s+".reslice");b.hb=null!=b.q;b.Bd&&(b.Um=b.Bd.Vd);b.MP=[0,0,0];b.ua=[b.Ad[0]+(b.yh[0]-1)/2,b.Ad[1]+(b.yh[1]-1)/2,b.Ad[2]+(b.yh[2]-
1)/2];b.Gc=[Math.min(b.Ad[0],b.Ad[0]+b.yh[0]-1),Math.max(b.Ad[0],b.Ad[0]+b.yh[0]-1),Math.min(b.Ad[1],b.Ad[1]+b.yh[1]-1),Math.max(b.Ad[1],b.Ad[1]+b.yh[1]-1),Math.min(b.Ad[2],b.Ad[2]+b.yh[2]-1),Math.max(b.Ad[2],b.Ad[2]+b.yh[2]-1)];b.e=[{},{},{}];c=xd(b.ua[0],b.ua[1],b.ua[2]);b.e[0].ln=c;d=xd(1,0,0);yd(d,d);b.e[0].G=d;e=[1,0,0];b.e[0].Ha=e;Le(0,c,d,b);b.j[0].j=Array(b.e[0].ca);c[0]=b.e[0].J[0][0][0]+b.e[0].Oa[0]*Math.floor(b.e[0].ca/2);c[1]=b.e[0].J[0][0][1]+b.e[0].Oa[1]*Math.floor(b.e[0].ca/2);c[2]=
b.e[0].J[0][0][2]+b.e[0].Oa[2]*Math.floor(b.e[0].ca/2);c=Je(c,b.e[0].Dd,b.e[0].G,b.e[0].Ha,b.Gc,b.hc,b,b.hb,b.Um);b.hb&&(c.q=b.q.j[0].j[Math.floor(b.e[0].ca/2)].Wa);b.j[0].j[Math.floor(b.e[0].ca/2)]=c;b.Bh=Math.floor(b.e[0].ca/2);b.rl=Math.floor(b.e[0].ca/2);c=xd(b.ua[0],b.ua[1],b.ua[2]);b.e[1].ln=c;d=xd(0,1,0);yd(d,d);b.e[1].G=d;e=[0,1,0];b.e[1].Ha=e;Le(1,c,d,b);b.j[1].j=Array(b.e[1].ca);c[0]=b.e[1].J[0][0][0]+b.e[1].Oa[0]*Math.floor(b.e[1].ca/2);c[1]=b.e[1].J[0][0][1]+b.e[1].Oa[1]*Math.floor(b.e[1].ca/
2);c[2]=b.e[1].J[0][0][2]+b.e[1].Oa[2]*Math.floor(b.e[1].ca/2);c=Je(c,b.e[1].Dd,b.e[1].G,b.e[1].Ha,b.Gc,b.hc,b,b.hb,b.Um);b.hb&&(c.q=b.q.j[1].j[Math.floor(b.e[1].ca/2)].Wa);b.j[1].j[Math.floor(b.e[1].ca/2)]=c;b.Ch=Math.floor(b.e[1].ca/2);b.sl=Math.floor(b.e[1].ca/2);c=xd(b.ua[0],b.ua[1],b.ua[2]);b.e[2].ln=c;d=xd(0,0,1);yd(d,d);b.e[2].G=d;e=[0,.392,.804];b.e[2].Ha=e;Le(2,c,d,b);b.j[2].j=Array(b.e[2].ca);c[0]=b.e[2].J[0][0][0]+b.e[2].Oa[0]*Math.floor(b.e[2].ca/2);c[1]=b.e[2].J[0][0][1]+b.e[2].Oa[1]*
Math.floor(b.e[2].ca/2);c[2]=b.e[2].J[0][0][2]+b.e[2].Oa[2]*Math.floor(b.e[2].ca/2);c=Je(c,b.e[2].Dd,b.e[2].G,b.e[2].Ha,b.Gc,b.hc,b,b.hb,b.Um);b.hb&&(c.q=b.q.j[2].j[Math.floor(b.e[2].ca/2)].Wa);b.j[2].j[Math.floor(b.e[2].ca/2)]=c;b.Dh=Math.floor(b.e[2].ca/2);b.tl=Math.floor(b.e[2].ca/2);A.wd(a.s+".reslice");return b.hc};function Ne(){Ee.call(this);this.s="parserOFF"}w(Ne,Ee);
Ne.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Ge(h,n,a);n=a+1;return b}n=e;return Ge(h,n,e-1)}A.Ud(this.s+".parse");this._data=c;var e=c.byteLength,h=this.h("uchar",e);c=[];b.C=new cd(e);b.da=new cd(e);for(var k=b.C,l=b.da,n=0,p=d(),p=("OFF"===p?d():p).split(" "),m=p[0],p=p[1];m--;){var q=d(),q=q.split(" ");c.push([parseFloat(q[0]),parseFloat(q[1]),parseFloat(q[2])])}for(;p--;){var q=d(),q=q.split(" "),
t=c[parseInt(q[1],10)],m=c[parseInt(q[2],10)],q=c[parseInt(q[3],10)];k.add(t[0],t[1],t[2]);k.add(m[0],m[1],m[2]);k.add(q[0],q[1],q[2]);t=new K(t[0],t[1],t[2]);q=new K(q[0],q[1],q[2]);m=sd((new K(m[0],m[1],m[2])).Cc(t),q.Cc(t));m.normalize();l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z)}A.wd(this.s+".parse");c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};v("X.parserOFF",Ne);v("X.parserOFF.prototype.parse",Ne.prototype.parse);function Ke(a){Vd.call(this);this.s="slice";this.Ta=[0,0,0];this.ql=[0,0,1];this.$b=[0,1,0];this.Zp=[1,0,0];this.Ia=this.Xa=10;this.Bl=[0,1,0,0,1,1,1,1,1,0,0,0];this.q=this.Gh=null;this.zh=!0;this.ml=[1,1,1];null!=a&&this.gk(a)}w(Ke,Vd);Ke.prototype.gk=function(a){this.Ta=a.Ta.slice();this.ql=a.ql.slice();this.$b=a.$b.slice();this.Xa=a.Xa;this.Ia=a.Ia;this.Gh=a.Gh;this.q=a.q;this.zh=a.zh;this.ml=a.ml;this.hF=a.hF;Ke.d.gk.call(this,a)};Ke.prototype.__defineSetter__("height",function(a){this.Ia=a});
Ke.prototype.__defineSetter__("width",function(a){this.Xa=a});Ke.prototype.create=function(){this.hf()};
Ke.prototype.hf=function(){var a=(new K(this.ql[0],this.ql[1],this.ql[2])).normalize(),b=new K(this.$b[0],this.$b[1],this.$b[2]),c=new K(this.Zp[0],this.Zp[1],this.Zp[2]),d=new K(this.Ta[0],this.Ta[1],this.Ta[2]),e=rd(c.clone().Fb().scale(this.Xa/2),b.clone().Fb().scale(this.Ia/2)),h=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=rd(c.clone().Fb().scale(this.Xa/2),b.clone().scale(this.Ia/2)),k=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=rd(c.clone().scale(this.Xa/2),b.clone().Fb().scale(this.Ia/2)),l=new K(e.x+d.x,e.y+d.y,
e.z+d.z),e=rd(c.clone().scale(this.Xa/2),b.clone().scale(this.Ia/2)),b=new K(e.x+d.x,e.y+d.y,e.z+d.z);this.C=new cd(18);this.da=new cd(18);this.C.add(h.x,h.y,h.z);this.C.add(k.x,k.y,k.z);this.C.add(l.x,l.y,l.z);this.C.add(l.x,l.y,l.z);this.C.add(b.x,b.y,b.z);this.C.add(k.x,k.y,k.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.zh&&(a=new Vd,a.C=new cd(24),a.da=new cd(24),a.C.add(h.x,h.y,h.z),
a.C.add(k.x,k.y,k.z),a.C.add(k.x,k.y,k.z),a.C.add(b.x,b.y,b.z),a.C.add(b.x,b.y,b.z),a.C.add(l.x,l.y,l.z),a.C.add(l.x,l.y,l.z),a.C.add(h.x,h.y,h.z),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.Ha=[this.ml[0],this.ml[1],this.ml[2]],a.Ed="LINES",a.vl=2,this.j.push(a))};v("X.slice",Ke);v("X.slice.prototype.create",Ke.prototype.create);function J(a){Vd.call(this);this.s="volume";this.Ta=[0,0,0];this.Da=[10,10,10];this.Gc=[1,1,1];this.kn=[10,10,10];this.Eh=[1,1,1];this.Jf=[];this.tl=this.Dh=this.sl=this.Ch=this.rl=this.Bh=0;this.mn=new Vd;this.nn=new Vd;this.pn=new Vd;this.cq=this.Fe=!1;this.Gb=-1;this.bq=[];this.q=null;this.zh=!0;this.Rb=Infinity;this.Qb=-Infinity;this.my=!0;this.Yb=0;this._data=null;xa(this,new fd);xa(this,new Td);null!=a&&this.gk(a)}w(J,Vd);
J.prototype.gk=function(a){this.Ta=a.Ta.slice();this.Da=a.Da.slice();this.Eh=a.Eh.slice();this.Bh=a.Bh;this.rl=a.rl;this.Ch=a.Ch;this.sl=a.sl;this.Dh=a.Dh;this.tl=a.tl;this.Wx=a.Wx.slice();this.mn=new Vd(a.mn);this.nn=new Vd(a.nn);this.pn=new Vd(a.pn);this.Yb=a.Yb;this._data=a._data;this.Fe=a.Fe;this.cq=a.cq;this.Gb=a.Gb;this.q=a.q;this.zh=a.zh;J.d.gk.call(this,a)};
J.prototype.hf=function(a){this.j.length=0;this.mn.j.length=0;this.nn.j.length=0;this.pn.j.length=0;this.j.push(this.mn);this.j.push(this.nn);this.j.push(this.pn);this.Ad=a.df;this.$s=a.Bg;this.yh=a.jd;this.ll=a.ze;this.aF=a.Be;this.Yb=a.max;this._data=a.data;this.I=!0};
J.prototype.ea=function(a){a="undefined"!==typeof a?a:!0;if(0<this.j.length){this.Fe!=this.cq&&(this.Fe||-1==this.Gb||(this.j[this.Gb].visible=!1),this.I=!0,this.cq=this.Fe);if(!this.ob)return;for(var b=0,b=0;3>b;b++){var c=this.j[b],d=0,e=0;0==b?(d=this.Bh,e=this.rl,this.rl=this.Bh):1==b?(d=this.Ch,e=this.sl,this.sl=this.Ch):2==b&&(d=this.Dh,e=this.tl,this.tl=this.Dh);if(null==this.j[b].j[parseInt(d,10)]){var h=wd();h[0]=this.e[b].J[0][0][0]+this.e[b].Oa[0]*parseInt(d,10);h[1]=this.e[b].J[0][0][1]+
this.e[b].Oa[1]*parseInt(d,10);h[2]=this.e[b].J[0][0][2]+this.e[b].Oa[2]*parseInt(d,10);if(this.hb){var k=Je(h,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.q.hc,this.q,this.q.hb,this.q.Bd.Vd);this.q.j[b].j[parseInt(d,10)]=k;this.q.j[b].ea(!0)}h=Je(h,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.hc,this,!0,null);this.hb&&(h.q=h.Wa,h.q=this.q.j[b].j[parseInt(d,10)].Wa);c.j[parseInt(d,10)]=h;this.j[b].ea(!0)}e=c.j[parseInt(e,10)];this.Fe||(e.visible=!1);c=c.j[parseInt(d,10)];c.visible=!0;
c.Uc=1;this.Fe&&(c.j[0].ob=!1,b!=this.Gb&&(c.visible=!1,c.Uc=0))}this.Fe&&-1!=this.Gb&&Oe(this,this.Gb)}a&&J.d.ea.call(this)};J.prototype.__defineGetter__("dimensions",function(){return this.Da});J.prototype.__defineSetter__("dimensions",function(a){this.Da=a});J.prototype.__defineGetter__("spacing",function(){return this.Eh});J.prototype.__defineSetter__("spacing",function(a){this.Eh=a});J.prototype.__defineGetter__("bbox",function(){return this.Gc});J.prototype.__defineGetter__("range",function(){return this.kn});
J.prototype.__defineGetter__("dimensionsRAS",function(){return this.Wx});J.prototype.__defineGetter__("volumeRendering",function(){return this.Fe});J.prototype.__defineSetter__("volumeRendering",function(a){this.Fe=a;this.ea(!1)});J.prototype.__defineGetter__("visible",function(){return this.ob});J.prototype.__defineSetter__("visible",function(a){if(a)this.ob=a,this.ea(!1);else{for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.ob=a;this.I=!0}});
J.prototype.__defineGetter__("center",function(){return this.Ta});J.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.Ta=a});J.prototype.__defineGetter__("volumeRenderingCache",function(){return this.bq});J.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.bq=a});J.prototype.__defineGetter__("image",function(){return this.Jf});
J.prototype.__defineGetter__("labelmap",function(){this.q||(this.q=new Pe(this));return this.q});J.prototype.__defineGetter__("indexX",function(){return this.Bh});J.prototype.__defineSetter__("indexX",function(a){u(a)&&0<=a&&a<this.mn.j.length&&(this.Bh=a,this.ea(!1))});J.prototype.__defineGetter__("indexY",function(){return this.Ch});J.prototype.__defineSetter__("indexY",function(a){u(a)&&0<=a&&a<this.nn.j.length&&(this.Ch=a,this.ea(!1))});J.prototype.__defineGetter__("indexZ",function(){return this.Dh});
J.prototype.__defineSetter__("indexZ",function(a){u(a)&&0<=a&&a<this.pn.j.length&&(this.Dh=a,this.ea(!1))});J.prototype.__defineGetter__("windowLow",function(){return this.Rb});J.prototype.__defineSetter__("windowLow",function(a){this.Rb=a});J.prototype.__defineGetter__("windowHigh",function(){return this.Qb});J.prototype.__defineSetter__("windowHigh",function(a){this.Qb=a});J.prototype.__defineGetter__("borders",function(){return this.zh});
J.prototype.__defineSetter__("borders",function(a){this.zh=a});J.prototype.__defineGetter__("reslicing",function(){return this.my});J.prototype.__defineSetter__("reslicing",function(a){this.my=a});J.prototype.__defineSetter__("xNormX",function(a){this.e[0].G[0]=a});J.prototype.__defineGetter__("xNormX",function(){return this.e[0].G[0]});J.prototype.__defineSetter__("xNormY",function(a){this.e[0].G[1]=a});J.prototype.__defineGetter__("xNormY",function(){return this.e[0].G[1]});
J.prototype.__defineSetter__("xNormZ",function(a){this.e[0].G[2]=a});J.prototype.__defineGetter__("xNormZ",function(){return this.e[0].G[2]});J.prototype.__defineSetter__("xColor",function(a){this.e[0].Ha=a});J.prototype.__defineGetter__("xColor",function(){return this.e[0].Ha});J.prototype.__defineSetter__("yNormX",function(a){this.e[1].G[0]=a});J.prototype.__defineGetter__("yNormX",function(){return this.e[1].G[0]});J.prototype.__defineSetter__("yNormY",function(a){this.e[1].G[1]=a});
J.prototype.__defineGetter__("yNormY",function(){return this.e[1].G[1]});J.prototype.__defineSetter__("yNormZ",function(a){this.e[1].G[2]=a});J.prototype.__defineGetter__("yNormZ",function(){return this.e[1].G[2]});J.prototype.__defineSetter__("yColor",function(a){this.e[1].Ha=a});J.prototype.__defineGetter__("yColor",function(){return this.e[1].Ha});J.prototype.__defineSetter__("zNormX",function(a){this.e[2].G[0]=a});J.prototype.__defineGetter__("zNormX",function(){return this.e[2].G[0]});
J.prototype.__defineSetter__("zNormY",function(a){this.e[2].G[1]=a});J.prototype.__defineGetter__("zNormY",function(){return this.e[2].G[1]});J.prototype.__defineSetter__("zNormZ",function(a){this.e[2].G[2]=a});J.prototype.__defineGetter__("zNormZ",function(){return this.e[2].G[2]});J.prototype.__defineSetter__("zColor",function(a){this.e[2].Ha=a});J.prototype.__defineGetter__("zColor",function(){return this.e[2].Ha});
J.prototype.PL=function(a){this.j[a].visible=!1;for(var b=0;b<this.j[a].j.length;b++)"undefined"!=typeof this.j[a].j[b]&&(this.hb&&(this.q.j[a].j[b].remove(),this.q.j[a].j[b]=null),this.j[a].j[b].remove(),this.j[a].j[b]=null);yd(this.e[a].G,this.e[a].G);Le(a,this.e[a].ln,this.e[a].G,this);this.j[a].j=[];alert("#VOLUME#",this.e[a].ca);this.j[a].j=Array(this.e[a].ca);this.hb&&(b=Je(this.e[a].ln,this.e[a].Dd,this.e[a].G,this.e[a].Ha,this.Gc,this.q.hc,this.q,this.q.hb,this.q.Bd.Vd),this.q.j[a].j=[],this.q.j[a].j=
Array(this.e[a].ca),this.q.j[a].j[Math.floor(this.e[a].ca/2)]=b,this.q.j[a].ea());b=Je(this.e[a].ln,this.e[a].Dd,this.e[a].G,this.e[a].Ha,this.Gc,this.hc,this,!0,null);this.hb&&(b.q=b.Wa,b.q=this.q.j[a].j[Math.floor(this.e[a].ca/2)].Wa);this.j[a].j[Math.floor(this.e[a].ca/2)]=b;0==a?(this.Bh=Math.floor(this.e[a].ca/2),this.rl=Math.floor(this.e[a].ca/2)):1==a?(this.Ch=Math.floor(this.e[a].ca/2),this.sl=Math.floor(this.e[a].ca/2)):(this.Dh=Math.floor(this.e[a].ca/2),this.tl=Math.floor(this.e[a].ca/
2));this.j[a].ea();this.j[a].j[Math.floor(this.e[a].ca/2)].ob=!0};
function Oe(a,b){if(!a.Np)if(!a.Fe||!a.I&&b==a.Gb)a.Gb=b;else if(-1==a.bq.indexOf(b))a.bq.push(b),a.Np=!0,Qe(a,b),setTimeout(function(){var a=null;0<=this.Gb&&(a=this.j[this.Gb],a.visible=!1);var a=this.j[b],c=a.j.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.j[e]){var p=wd();p[0]=this.e[b].J[0][0][0]+this.e[b].Oa[0]*e;p[1]=this.e[b].J[0][0][1]+this.e[b].Oa[1]*e;p[2]=this.e[b].J[0][0][2]+this.e[b].Oa[2]*e;if(this.hb){var m=Je(p,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.q.hc,this.q,
this.q.hb,this.q.Bd.Vd);this.q.j[b].j[e]=m;this.q.j[b].ea(!0)}p=Je(p,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.hc,this,!0,null);p.j[0].ob=!1;this.hb&&(p.q=p.Wa,p.q=this.q.j[b].j[e].Wa);a.j[e]=p}a.j[e].ob=!0}Re(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].J[0][0][0]+this.e[b].Oa[0]*e;m[1]=this.e[b].J[0][0][1]+this.e[b].Oa[1]*e;m[2]=this.e[b].J[0][0][2]+this.e[b].Oa[2]*e;if(this.hb){var p=Je(m,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.q.hc,
this.q,this.q.hb,this.q.Bd.Vd);this.q.j[b].j[e]=p;this.q.j[b].ea(!0)}m=Je(m,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.hc,this,!0,null);m.j[0].ob=!1;this.hb&&(m.q=m.Wa,m.q=this.q.j[b].j[e].Wa);a.j[e]=m}a.j[e].ob=!0}Re(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].J[0][0][0]+this.e[b].Oa[0]*e;m[1]=this.e[b].J[0][0][1]+this.e[b].Oa[1]*e;m[2]=this.e[b].J[0][0][2]+this.e[b].Oa[2]*e;if(this.hb){var p=Je(m,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,
this.q.hc,this.q,this.q.hb,this.q.Bd.Vd);this.q.j[b].j[e]=p;this.q.j[b].ea(!0)}m=Je(m,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.hc,this,!0,null);m.j[0].ob=!1;this.hb&&(m.q=m.Wa,m.q=this.q.j[b].j[e].Wa);a.j[e]=m}a.j[e].ob=!0}Re(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].J[0][0][0]+this.e[b].Oa[0]*e;m[1]=this.e[b].J[0][0][1]+this.e[b].Oa[1]*e;m[2]=this.e[b].J[0][0][2]+this.e[b].Oa[2]*e;if(this.hb){var p=Je(m,this.e[b].Dd,this.e[b].G,this.e[b].Ha,
this.Gc,this.q.hc,this.q,this.q.hb,this.q.Bd.Vd);this.q.j[b].j[e]=p;this.q.j[b].ea(!0)}m=Je(m,this.e[b].Dd,this.e[b].G,this.e[b].Ha,this.Gc,this.hc,this,!0,null);m.j[0].ob=!1;this.hb&&(m.q=m.Wa,m.q=this.q.j[b].j[e].Wa);a.j[e]=m}a.j[e].ob=!0}Re(this,1);setTimeout(function(){this.Np&&this.j[b].ea(!0);this.Gb=b;this.I=!1;if(this.Np){var a=new De;a.Na=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Np=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.j[a.Gb];
c.visible=!1;var c=a.j[b],d=c.j.length,e;for(e=0;e<d;e++)c.j[e].ob=!0;a.Gb=b;a.I=!1}}function Qe(a,b){var c=new Be;c.Na=a;a.dispatchEvent(c);a.onComputing(b)}function Re(a,b){var c=new Ce;c.Yj=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}J.prototype.Cv=function(){};J.prototype.Ev=function(){};J.prototype.Dv=function(){};J.REORIENT_TRANSFORM_KEY="ot_"+B();v("X.volume.REORIENT_TRANSFORM_KEY",J.REORIENT_TRANSFORM_KEY);J.REORIENTED_DIMENSIONS_KEY="otd_"+B();
v("X.volume.REORIENTED_DIMENSIONS_KEY",J.REORIENTED_DIMENSIONS_KEY);J.ORIENTATION_KEY="or_"+B();v("X.volume.ORIENTATION_KEY",J.ORIENTATION_KEY);J.SINGLE_FRAME_SCAN="sf_"+B();v("X.volume.SINGLE_FRAME_SCAN",J.SINGLE_FRAME_SCAN);v("X.volume",J);v("X.volume.prototype.modified",J.prototype.ea);v("X.volume.prototype.sliceInfoChanged",J.prototype.PL);v("X.volume.prototype.onComputing",J.prototype.Cv);v("X.volume.prototype.onComputingProgress",J.prototype.Ev);v("X.volume.prototype.onComputingEnd",J.prototype.Dv);function Se(){Ee.call(this);this.s="parserDCM"}w(Se,Ee);
Se.prototype.parse=function(a,b,c){b.vh={};b.vh.vo=0;this.ji(c,b);if(null==b.fa.length||b.za.length==b.fa.length){b.vh.vo=b.fa.length;var d={};c={};for(var e=0;e<b.za.length;e++)d.hasOwnProperty(b.za[e].series_instance_uid)||(d[b.za[e].series_instance_uid]=[],c[b.za[e].series_instance_uid]={}),c[b.za[e].series_instance_uid].hasOwnProperty(b.za[e].sop_instance_uid)||(c[b.za[e].series_instance_uid][b.za[e].sop_instance_uid]=!0,d[b.za[e].series_instance_uid].push(b.za[e]));var e=Object.keys(d)[0],h=
d[e],k=h.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[e][0].dist=0):h[0].image_position_patient[0]!=h[1].image_position_patient[0]||h[0].image_position_patient[1]!=h[1].image_position_patient[1]||h[0].image_position_patient[2]!=h[1].image_position_patient[2]?(l="image_position_patient",e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],
h[0].image_orientation_patient[5]),e=sd(e,d),h.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,e)),h.sort(function(a,b){return a.dist-b.dist})):h[0].instance_number!=h[1].instance_number?(window.console.log("Ordering by instance number"),l="instance_number",h.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");if("image_position_patient"==
l&&5>k)if(e=0,d=function(){window.console.log('Warning: Although series was initially ordered by "image_position_patient", positional overlaps were found.\nSwitching to "instance_number" ordering as a result.');l="instance_number"},1==k)d(),b[J.SINGLE_FRAME_SCAN]=!0;else for(;e<k-1;e++).01>h[e].dist-h[e+1].dist&&(d(),h.sort(function(a,b){return a.instance_number-b.instance_number}));for(var e=0,n=h.length;e<n;e++)window.console.log("\n",e,"\nInstance number:",h[e].instance_number,"\nImage Position Patient:",
h[e].image_position_patient,"\nPixel Spacing:",h[e].pixel_spacing,"\nInitial Ordering:",l);isNaN(h[0].pixel_spacing[0])&&(h[0].pixel_spacing[0]=1);isNaN(h[0].pixel_spacing[1])&&(h[0].pixel_spacing[1]=1);if(1<h.length)for(var e=function(){l="instance_number";h.sort(function(a,b){return a.instance_number-b.instance_number});h.forced_instance_ordering=!0;window.console.log('Warning: Slices were found unordered after XTK "image_position_patient" sorting. Forcing "instance_number" reordering.');for(var a=
0,b=!1;a<n-1;a++)if(0==Math.abs(h[a].instance_number-h[a+1].instance_number)){b=!0;break}if(b)for(window.console.log('Warning: After forcing "instance_number" ordering overlaps were found. Rewriting "instance_number" data for every slice.'),a=0;a<n;a++)h[a].instance_number=a},p=0,n=h.length;p<n-1;p++)if(1!=Math.abs(h[p].instance_number-h[p+1].instance_number)){e();break}if(1<k)switch(l){case "image_position_patient":var d=h[0].image_position_patient,m=h[1].image_position_patient,e=m[0]-d[0],q=m[1]-
d[1],t=m[2]-d[2];h[0].pixel_spacing[2]=Math.sqrt(e*e+q*q+t*t);break;case "instance_number":var s=1;if(!0===h.forced_instance_ordering){for(var e=1,n=h.length,d=h[0].image_position_patient,z=!1;e<n;e++)if(m=h[e].image_position_patient,d[0]!=m[0]||d[1]!=m[1]||d[2]!=m[2]){z=!0;break}z&&(window.console.log('Warning: Setting pixel_spacing according to "image_position_patient" even though "forced_instance_ordering" is used.'),e=m[0]-d[0],q=m[1]-d[1],t=m[2]-d[2],s=Math.sqrt(e*e+q*q+t*t))}h[0].pixel_spacing[2]=
s;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else h[0].pixel_spacing[2]=1;m=1;switch(l){case "image_position_patient":d=h[0].image_position_patient;s=h[k-1].image_position_patient;e=s[0]-d[0];q=s[1]-d[1];t=s[2]-d[2];q=Math.sqrt(e*e+q*q+t*t);m+=Math.round(q/h[0].pixel_spacing[2]);break;case "instance_number":m+=Math.abs(h[k-1].instance_number-h[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}"false"==b.reslicing.toString()&&
(window.console.log('Forcing expexted slices to length of files because volume\'s "reslicing" property is set to false.'),window.console.log("Expected slices:",m),m=k,window.console.log("Ordering:",l));for(var d=h[0].columns*h[0].rows,y=d*m,s=!1,e=0,n=h.length,H=z=0;e<n;e++)h[e].columns>H&&(H=h[e].columns),h[e].rows>z&&(z=h[e].rows);H*z>d&&(d=H*z,y=d*m,s=!0,window.console.log("Warning: Dimensional inequalities found in image sizes."));var Q=null;window.console.log(h[0].Ri);switch(h[0].Ri){case 8:Q=
new Uint8Array(y);window.console.log("Using a Uint8Array.");break;case 16:Q=new Uint16Array(y);window.console.log("Using a Uint16Array.");break;case 32:Q=new Uint32Array(y),window.console.log("Using a Uint32Array.");default:window.console.log("Unknown number of bits allocated - using default: 32 bits"),Q=new Uint32Array(y)}b.Eh=h[0].pixel_spacing;for(y=0;y<k;y++){var P=h[y].data,q=0;switch(l){case "image_position_patient":e=h[y].image_position_patient[0]-h[0].image_position_patient[0];q=h[y].image_position_patient[1]-
h[0].image_position_patient[1];t=h[y].image_position_patient[2]-h[0].image_position_patient[2];q=Math.sqrt(e*e+q*q+t*t)/h[0].pixel_spacing[2];break;case "instance_number":q=h[y].instance_number-h[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}if(s){for(var p=h[y].columns,e=h[y].rows,t=0,G=Qb(z*H),S=Math.round((H-p)/2),Y=p+S,p=Math.round((z-e)/2),U=e+p,e=p;e<U;e++)for(p=S;p<Y;p++)G[H*e+p]=P[t],t++;P=G}Q.set(P,Math.round(q)*d)}c.data=Q;b._data=Q;b.Da=[h[0].columns,
h[0].rows,m];s&&(b.Da=[H,z,m]);c.fG=b.Da;m=Fe(Q);k=m[0];m=m[1];c.min=b.Wd=b.Rb=k;c.max=b.Yb=b.Qb=m;b.yb!=k&&(b.yb=k);b.Ab!=m&&(b.Ab=m);m=h[0].image_position_patient;k=Bd();if("false"==b.reslicing.toString())"image_position_patient"==l||h.forced_instance_ordering?(window.console.log('NRG modification: Running an orthogonal transform because the volume\'s "reslicing" property is set to false.'),e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),
d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),e=sd(e,d),e.x=Math.round(e.x),e.y=Math.round(e.y),e.z=Math.round(e.z),L(k,0,-Math.round(h[0].image_orientation_patient[0])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[3])*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]),L(k,1,-Math.round(h[0].image_orientation_patient[1])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[4])*h[0].pixel_spacing[1],
-e.y*h[0].pixel_spacing[2],-m[1]),L(k,2,Math.round(h[0].image_orientation_patient[2])*h[0].pixel_spacing[0],Math.round(h[0].image_orientation_patient[5])*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]),L(k,3,0,0,0,1),window.console.log("IJKToRAS transform:\n",k),m=Bd(),L(m,0,-Math.round(h[0].image_orientation_patient[0]),-Math.round(h[0].image_orientation_patient[3]),-e.x,0),L(m,1,-Math.round(h[0].image_orientation_patient[1]),-Math.round(h[0].image_orientation_patient[4]),-e.y,0),L(m,2,Math.round(h[0].image_orientation_patient[2]),
Math.round(h[0].image_orientation_patient[5]),e.z,0),L(m,3,0,0,0,1),b[J.REORIENT_TRANSFORM_KEY]=m,window.console.log("Orthogonal Transform:\n",m)):"instance_number"==l?(L(k,0,-1,0,0,-m[0]),L(k,1,-0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]),L(k,3,0,0,0,1),m=Bd(),L(m,0,-1,0,0,0),L(m,1,-0,-1,-0,0),L(m,2,0,0,1,0),L(m,3,0,0,0,1),L(m,3,0,0,0,1),b[J.REORIENT_TRANSFORM_KEY]=m):window.console.log("Unkown ordering mode - returning: "+l);else switch(l){case "image_position_patient":e=new K(h[0].image_orientation_patient[0],
h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]);d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]);e=sd(e,d);L(k,0,-h[0].image_orientation_patient[0]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[3]*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]);L(k,1,-h[0].image_orientation_patient[1]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[4]*h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]);L(k,
2,h[0].image_orientation_patient[2]*h[0].pixel_spacing[0],h[0].image_orientation_patient[5]*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]);L(k,3,0,0,0,1);break;case "instance_number":L(k,0,-1,0,0,-m[0]);L(k,1,-0,-1,-0,-m[1]);L(k,2,0,0,1,m[2]);L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.ze=k;c.Be=Bd();Jd(c.ze,c.Be);e=Ad(0,0,0,1);m=zd();Ld(k,e,m);e=Ad(1,1,1,1);d=zd();Ld(k,e,d);c.Bg=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];k=He(k,[b.Da[0],b.Da[1],b.Da[2]]);
c.jd=[k[1]-k[0]+1,k[3]-k[2]+1,k[5]-k[4]+1];c.df=[k[0],k[2],k[4]];"false"==b.reslicing.toString()&&(k=Ad(b.Da[0],b.Da[1],b.Da[2],1),m=zd(),Ld(b[J.REORIENT_TRANSFORM_KEY],k,m),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),b[J.REORIENTED_DIMENSIONS_KEY]=m,m[0]==b.Da[2]?(b[J.ORIENTATION_KEY]="sagittal",c.jd[0]+=1*h[0].pixel_spacing[2],c.Bg[0]=c.jd[0]/(h.length+1)):m[1]==b.Da[2]?(b[J.ORIENTATION_KEY]="coronal",c.jd[1]+=1*h[0].pixel_spacing[2],c.df[1]-=1*h[0].pixel_spacing[2]):(b[J.ORIENTATION_KEY]=
"transverse",c.jd[2]+=2*h[0].pixel_spacing[2],c.Bg[2]=c.jd[2]/(h.length+1),c.df[2]-=h[0].pixel_spacing[2]),window.console.log("Assessed volume orientation: "+b[J.ORIENTATION_KEY]+"\nXTK Modifications may be applied to restore acquired properties."),window.console.log("_transformedDims",m),window.console.log("RASSpacing",c.Bg),window.console.log("RASDimensions",c.jd),window.console.log("RASOrigin",c.df));b.hf(c);b.Jf=Me(this,b)}c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};
Se.prototype.he=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Se.prototype.ji=function(a,b){this._data=a;if("undefined"==typeof b.za||null==b.za)b.za=[];var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=!1,m,q,t;q=[[8,4416],[9,30576],[136,512]];t=[[18,100],[35,4224],[64,629],[8,4368],[8,4384],[136,512]];for(var s,z;e<d.length;){h=d[e++];k=d[e++];l=d[e++];n=d[e++];"1.2.840.10008.1.2"==
c.transfer_syntax_uid&&0==n&&(n=l);p=!1;if(void 0!==h&&void 0!==k){switch(c.transfer_syntax_uid){case "1.2.840.10008.1.2.1":m="Little Endian Explicit";s=0;for(z=q.length;s<z;s++)if(h===q[s][0]&&k===q[s][1]){p=!0;break}break;case "1.2.840.10008.1.2.2":m="Big Endian Explicit";break;case "1.2.840.10008.1.2":for(m="Little Endian Implicit",s=0,z=t.length;s<z;s++)if(h===t[s][0]&&k===t[s][1]){p=!0;break}}if(p){n="parserDCM.js: Identified "+m+". Skipping DICOM adddress (0x"+h.toString(16)+", 0x"+k.toString(16)+
")"+h+" "+k;window.console.log(n);if(8==h&&4416==k||9==h&&30576==k)for(n=0;;){_newTagGroup=d[e++];_newTagGroup.toString(16);s=parseInt(_newTagGroup.toString(16),10)-parseInt(h.toString(16),10);if(3>s&&0<s)if(_newTagElement=d[e++],_newTagGroup.toString(16),_newTagElement.toString(16),10==parseInt(_newTagElement.toString(16),10)){e--;e--;break}else e--;n++}continue}}switch(h){case 2:switch(k){case 16:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);
c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Se.prototype.he(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Ri=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=
Se.prototype.he(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(k);break;case 19:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=
l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Se.prototype.he(d,e,l,n)}break;case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";
for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(k);break;default:e=Se.prototype.he(d,e,l,n)}break;case 16:switch(k){case 8720:for(s=0;s<n/2;s++)e++;break;default:e=Se.prototype.he(d,e,l,n)}break;default:e=Se.prototype.he(d,e,l,n)}}switch(c.Ri){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Ma=this._data.byteLength-
c.columns*c.rows*2;d=null;switch(c.Ri){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.za.push(c);return b};v("X.parserDCM",Se);v("X.parserDCM.prototype.parse",Se.prototype.parse);function Te(){Ee.call(this);this.s="parserVTK"}w(Te,Ee);
Te.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");var d=b.C,e=b.da,h=new Uint8Array(c),k="";b.C=d=new cd(c.byteLength);b.da=e=new cd(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Ge(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.rn=this.sn=null;this.Sj=[];this.Ee=Sd;this.jt=this.Ii=this.Ci=this.Ji=!1;c=0;for(l=k%8;l--;)Ue(this,h[c]),c++;for(l=.125*k^0;l--;)Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),
c++,Ue(this,h[c]),c++;c=this.sn;var h=this.rn,k=h.length,n=l=this.Sj.length;do{var p=this.Sj[l-n],m=p.length,q;for(q=0;q<m&&!("LINES"==this.Ee&&q+1>=m);q++){var t=parseInt(p[q],10),s=c.get(t);d.add(s[0],s[1],s[2]);var z=t,y=s;"LINES"==this.Ee?(z=parseInt(p[q+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.Ee&&(0!=q&&q!=m-1||d.add(s[0],s[1],s[2]));t<k?(y=h.get(t),e.add(y[0],y[1],y[2]),"LINES"==this.Ee?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.Ee&&(0!=q&&q!=m-1||e.add(y[0],
y[1],y[2]))):(z=new K(s[0],s[1],s[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.Ee?(z=new K(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.Ee&&(0!=q&&q!=m-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.Ed=this.Ee;A.wd(this.s+".parse");d=new Wd;d.Na=b;d.va=a;this.dispatchEvent(d)};
function Ue(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Ji=!0;a.Ci=!1;a.Ii=!1;c=parseInt(c[1],10);a.sn=new cd(3*c);a.rn=new cd(3*c);return;case "VERTICES":a.Ci=!0;a.Ji=!1;a.Ii=!1;c=parseInt(c[1],10);if(3<=c)a.Ee=Sd;else if(1==c)a.Ee="POINTS";else throw Error("This VTK file is not supported!");a.Sj=[];return;case "TRIANGLE_STRIPS":a.Ci=!0;a.Ji=!1;a.Ii=!1;a.Ee="TRIANGLE_STRIPS";a.Sj=[];return;case "LINES":a.Ci=!0;a.Ji=!1;a.Ii=!1;a.Ee="LINES";a.Sj=
[];return;case "POLYGONS":a.Ci=!0;a.Ji=!1;a.Ii=!1;a.Ee="POLYGONS";a.Sj=[];return;case "POINT_DATA":a.Ii=!0;a.Ji=!1;a.Ci=!1;return}if(a.Ji)if(1==d||isNaN(parseFloat(e)))a.Ji=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.sn.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.sn.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.sn.add(d,e,c))}else a.Ci?1==d||isNaN(parseFloat(e))?a.Ci=!1:(c=c.slice(1),a.Sj.push(c)):
a.Ii&&("NORMALS"==e?a.jt=!0:1==d||isNaN(parseFloat(e))?(a.Ii=!1,a.jt=!1):a.jt&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.rn.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.rn.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.rn.add(d,e,c))))}v("X.parserVTK",Te);v("X.parserVTK.prototype.parse",Te.prototype.parse);function Ve(){Ee.call(this);this.s="parserFSM";this.Tp=!1}w(Ve,Ee);
Ve.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");this._data=c;var d=b.C,e=b.da;b.wl=[];var h=b.wl;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var n=new Uint32Array(e),p=new Float32Array(9*c);b.C=d=new cd(9*c);b.da=e=new cd(9*c);var m;for(m=0;m<c;m++){var q=3*m,t=k[q],s=k[q+1],z=k[q+2];h.push(t);h.push(s);h.push(z);n[t]+=1;n[s]+=1;n[z]+=1;var q=3*t,y=3*s,H=3*z,Q=l[q],P=l[q+1],G=l[q+2],
s=l[y],z=l[y+1],t=l[y+2],S=l[H],Y=l[H+1],U=l[H+2];d.add(Q,P,G);d.add(s,z,t);d.add(S,Y,U);Q=new K(Q,P,G);S=new K(S,Y,U);s=(new K(s,z,t)).clone().Cc(Q);z=S.clone().Cc(Q);s=sd(s,z).normalize();p[q]+=s.x;p[q+1]+=s.y;p[q+2]+=s.z;p[y]+=s.x;p[y+1]+=s.y;p[y+2]+=s.z;p[H]+=s.x;p[H+1]+=s.y;p[H+2]+=s.z}for(m=0;m<c;m++)q=3*m,t=k[q],s=k[q+1],z=k[q+2],q=3*t,y=3*s,H=3*z,h=new K(p[y],p[y+1],p[y+2]),l=new K(p[H],p[H+1],p[H+2]),q=(new K(p[q],p[q+1],p[q+2])).scale(1/n[t]).normalize(),h=h.scale(1/n[s]).normalize(),l=
l.scale(1/n[z]).normalize(),e.add(q.x,q.y,q.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this._data.byteLength-this.Ma);k=null;for(q=0;q<c.length;q++)if(99==c[q]&&114==c[q+1]&&97==c[q+2]&&115==c[q+3]){for(e=k=q+9;10!=c[q]&&q<c.length;)e++,q++;k=Ge(c.subarray(k,e)).split(" ");break}k&&(b.ic.gD(parseFloat(k[0])),b.ic.hD(parseFloat(k[1])),b.ic.iD(parseFloat(k[2])));b.Ed=Sd;A.wd(this.s+".parse");c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};v("X.parserFSM",Ve);
v("X.parserFSM.prototype.parse",Ve.prototype.parse);var We={Nt:function(a,b,c){return We.update(a,0,b,c)},update:function(a,b,c,d){var e=We.ME,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Xe;
Xe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);We.ME=Xe;function Ye(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,p,m,q,t;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(q=0;q<b;++q)if(a[q]===k){p=0;m=l;for(t=0;t<k;++t)p=p<<1|m&1,m>>=1;for(t=p;t<e;t+=n)h[t]=k<<16|q;++l}++k;l<<=1;n<<=1}return[h,c,d]};function Ze(a,b){this.It=[];this.Kt=32768;this.Qf=this.xn=this.ib=this.Ww=0;this.input=new Uint8Array(a);this.Zy=!1;this.Lt=$e;this.resize=!1;if(b||!(b={}))b.index&&(this.ib=b.index),b.bufferSize&&(this.Kt=b.bufferSize),b.bufferType&&(this.Lt=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Lt){case af:this.rc=32768;this.output=new Uint8Array(32768+this.Kt+258);break;case $e:this.rc=0;this.output=new Uint8Array(this.Kt);this.rk=this.rG;this.gz=this.TF;this.cu=this.bG;break;default:throw Error("invalid inflate mode");
}}var af=0,$e=1;
Ze.prototype.Yi=function(){for(;!this.Zy;){var a=bf(this,3);a&1&&(this.Zy=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.ib,c=this.output,d=this.rc,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.Qf=this.xn=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.Lt){case af:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.rc=d,c=this.rk(),d=this.rc;break;case $e:for(;d+h>c.length;)c=this.rk({Oz:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.ib=b+=h;this.rc=
d;this.output=c;break;case 1:this.cu(cf,df);break;case 2:ef(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.gz()};
var ff=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),hf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),jf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),kf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lf=new Uint8Array(288),
nf,of;nf=0;for(of=lf.length;nf<of;++nf)lf[nf]=143>=nf?8:255>=nf?9:279>=nf?7:8;var cf=Ye(lf),pf=new Uint8Array(30),qf,rf;qf=0;for(rf=pf.length;qf<rf;++qf)pf[qf]=5;var df=Ye(pf);function bf(a,b){for(var c=a.xn,d=a.Qf,e=a.input,h=a.ib,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.xn=c>>>b;a.Qf=d-b;a.ib=h;return k}
function sf(a,b){for(var c=a.xn,d=a.Qf,e=a.input,h=a.ib,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.xn=c>>k;a.Qf=d-k;a.ib=h;return e&65535}
function ef(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=sf(this,b),d){case 16:for(d=3+bf(this,2);d--;)c[h++]=e;break;case 17:for(d=3+bf(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+bf(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=bf(a,5)+257,d=bf(a,5)+1,e=bf(a,4)+4,h=new Uint8Array(ff.length),k;for(k=0;k<e;++k)h[ff[k]]=bf(a,3);e=Ye(h);h=new Uint8Array(c);k=new Uint8Array(d);a.cu(Ye(b.call(a,c,e,h)),Ye(b.call(a,d,e,k)))}f=Ze.prototype;
f.cu=function(a,b){var c=this.output,d=this.rc;this.xz=a;for(var e=c.length-258,h,k,l;256!==(h=sf(this,a));)if(256>h)d>=e&&(this.rc=d,c=this.rk(),d=this.rc),c[d++]=h;else for(h-=257,l=gf[h],0<hf[h]&&(l+=bf(this,hf[h])),h=sf(this,b),k=jf[h],0<kf[h]&&(k+=bf(this,kf[h])),d>=e&&(this.rc=d,c=this.rk(),d=this.rc);l--;)c[d]=c[d++-k];for(;8<=this.Qf;)this.Qf-=8,this.ib--;this.rc=d};
f.bG=function(a,b){var c=this.output,d=this.rc;this.xz=a;for(var e=c.length,h,k,l;256!==(h=sf(this,a));)if(256>h)d>=e&&(c=this.rk(),e=c.length),c[d++]=h;else for(h-=257,l=gf[h],0<hf[h]&&(l+=bf(this,hf[h])),h=sf(this,b),k=jf[h],0<kf[h]&&(k+=bf(this,kf[h])),d+l>e&&(c=this.rk(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.Qf;)this.Qf-=8,this.ib--;this.rc=d};
f.rk=function(){var a=new Uint8Array(this.rc-32768),b=this.rc-32768,c=this.output;a.set(c.subarray(32768,a.length));this.It.push(a);this.Ww+=a.length;c.set(c.subarray(b,b+32768));this.rc=32768;return c};
f.rG=function(a){var b=this.input.length/this.ib+1|0,c=this.input,d=this.output;a&&("number"===typeof a.Oz&&(b=a.Oz),"number"===typeof a.wF&&(b+=a.wF));2>b?(a=(c.length-this.ib)/this.xz[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.gz=function(){var a=0,b=this.output,c=this.It,d,e=new Uint8Array(this.Ww+(this.rc-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.rc);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.rc;h<k;++h)e[a++]=b[h];this.It=[];return this.buffer=e};f.TF=function(){var a,b=this.rc;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var tf;for(tf=0;256>tf;++tf)for(var uf=tf,vf=7,uf=uf>>>1;uf;uf>>>=1)--vf;var wf=[],xf;for(xf=0;288>xf;xf++)switch(!0){case 143>=xf:wf.push([xf+48,8]);break;case 255>=xf:wf.push([xf-144+400,9]);break;case 279>=xf:wf.push([xf-256+0,7]);break;case 287>=xf:wf.push([xf-280+192,8]);break;default:throw"invalid literal: "+xf;}
var yf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(yf);function zf(){};function Af(a){this.input=a;this.ib=0;this.member=[]}
Af.prototype.Yi=function(){for(var a=this.input.length;this.ib<a;){var b=new zf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.ib;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=We.Nt(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Ze(l,{index:d,bufferSize:e});b.data=e=d.Yi();d=d.ib;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(We.Nt(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+We.Nt(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.ib=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function Bf(){Ee.call(this);this.s="parserMGZ";this.Tp=!1}w(Bf,Ee);
Bf.prototype.parse=function(a,b,c,d){A.Ud(this.s+".parse");d&&(c=(new Af(new Uint8Array(c))).Yi(),c=c.buffer);d=this.ji(c);var e=[d.wv,d.xv,d.yv];b.Da=e;var h=d.mD;b.Eh=h;c=d.min;var k=d.max;b.Wd=b.Rb=c;b.Yb=b.Qb=k;-Infinity==b.yb&&(b.yb=c);Infinity==b.Ab&&(b.Ab=k);c=Bd();L(c,0,d.Ef[0][0],d.Ef[1][0],d.Ef[2][0],0);L(c,1,d.Ef[0][1],d.Ef[1][1],d.Ef[2][1],0);L(c,2,d.Ef[0][2],d.Ef[1][2],d.Ef[2][2],0);L(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.Ef[3][p]-(c[p+0]*h[0]*k+
c[p+4]*h[1]*l+c[p+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.ze=c;d.Be=Bd();Jd(d.ze,d.Be);e=Ad(0,0,0,1);h=zd();Ld(c,e,h);k=Ad(1,1,1,1);e=zd();Ld(c,k,e);c=He(c,b.Da);d.Bg=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.jd=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.df=[c[0],c[2],c[4]];b.hf(d);A.wd(this.s+".parse");b.Jf=Me(this,b);d=new Wd;d.Na=b;d.va=a;this.dispatchEvent(d)};
Bf.prototype.ji=function(a){this._data=a;a={version:0,PE:0,NE:0,zG:0,OE:0,wv:0,xv:0,yv:0,JJ:0,type:0,kG:0,WB:0,pN:null,Ef:null,mD:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.wv=this.h("uint");a.xv=this.h("uint");a.yv=this.h("uint");a.JJ=this.h("uint");a.type=this.h("uint");a.kG=this.h("uint");a.WB=this.h("ushort");if(0<a.WB){a.mD=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.Ef=b}this.Ma=
284;b=a.wv*a.xv*a.yv;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Fe(a.data);a.min=b[0];a.max=b[1];this.Ma+16<this._data.byteLength&&(a.PE=this.h("float"),a.zG=this.h("float"),a.NE=this.h("float"),a.OE=this.h("float"));return a};v("X.parserMGZ",Bf);v("X.parserMGZ.prototype.parse",Bf.prototype.parse);function Cf(){Ee.call(this);this.s="parserLBL"}w(Cf,Ee);
Cf.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");var d=b.wl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.h("uchar",c.byteLength),l=k.length,n=!1,p=0;for(c=1;c<l;c++)10==k[c-1]?(p=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Ge(k,p,c),10)),n=!1);k=b.eb.cb?b.eb.cb:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.eb.cb=k;b.eb.Vm=h;b.eb.I=!0;A.wd(this.s+".parse");d=new Wd;d.Na=b;d.va=a;this.dispatchEvent(d)};v("X.parserLBL",Cf);v("X.parserLBL.prototype.parse",Cf.prototype.parse);function Df(){Ee.call(this);this.s="parserCRV";this.Tp=!1}w(Df,Ee);
Df.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");var d=b.wl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.Ma=3;var e=this.h("uint");this.h("uint");this.h("uint");var h=0,k=0,l=0,n=0,p=0,m=0,q=0,t=0,s=0,z=0,y=0;c=Array(2);var H=Array(2),Q=this.h("float",e),P;for(P=0;P<e;P++){var G=Q[P];0==P&&(c[0]=H[0]=G);0<=G?(h++,n+=G):(k++,l+=G);s+=G;y++;H[0]=Math.max(G,H[0]);c[0]=Math.min(G,c[0]);Q[P]=G}0!=h&&(p=n/h);0!=k&&(m=l/k);0!=y&&(z=s/y);for(y=s=l=n=0;y<
e;y++)G=Q[y],P=0,0<=G?(P=Math.pow(G-p,2),n+=P):(P=Math.pow(G-m,2),l+=P),P=Math.pow(G-z,2),s+=P;1<h&&(q=Math.sqrt(n/(h-1)));1<k&&(t=Math.sqrt(l/(k-1)));c[1]=m-2.5*t;H[1]=p+2.5*q;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=Q[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.eb.Wd=c[1];b.eb.Yb=H[1];-Infinity==b.eb.yb&&(b.eb.yb=c[1]);Infinity==b.eb.Ab&&(b.eb.Ab=H[1]);b.eb.cb=Q;b.eb.Vm=h;b.eb.I=!0;A.wd(this.s+".parse");d=new Wd;d.Na=b;d.va=a;this.dispatchEvent(d)};v("X.parserCRV",Df);
v("X.parserCRV.prototype.parse",Df.prototype.parse);function Ef(a,b){var c,d;this.input=a;this.ib=0;if(b||!(b={}))b.index&&(this.ib=b.index),b.verify&&(this.rM=b.verify);c=a[this.ib++];d=a[this.ib++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.XB=new Ze(a,{index:this.ib,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Ef.prototype.Yi=function(){var a=this.input,b;b=this.XB.Yi();this.ib=this.XB.ib;if(this.rM){var a=(a[this.ib++]<<24|a[this.ib++]<<16|a[this.ib++]<<8|a[this.ib++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Ff(){Ee.call(this);this.s="parserRAW"}w(Ff,Ee);
Ff.prototype.parse=function(a,b,c,d){A.Ud(this.s+".parse");d&&(c=(new Ef(new Uint8Array(c))).Yi(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Fe(d.data);c=e[0];e=e[1];d.min=b.Wd=b.Rb=c;d.max=b.Yb=b.Qb=e;-Infinity==b.yb&&(b.yb=c);Infinity==b.Ab&&(b.Ab=e);e=Cd();d.ze=e;d.Be=Cd();var h=Ad(0,0,0,1);c=zd();Ld(e,h,c);var k=Ad(1,1,1,1),h=zd();Ld(e,k,h);e=He(e,b.Da);d.Bg=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.jd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.df=[e[0],e[2],e[4]];b.hf(d);A.wd(this.s+".parse");b.Jf=
Me(this,b);d=new Wd;d.Na=b;d.va=a;this.dispatchEvent(d)};v("X.parserRAW",Ff);v("X.parserRAW.prototype.parse",Ff.prototype.parse);function Gf(){Ee.call(this);this.s="parserIMAGE"}w(Gf,Ee);Gf.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Tc(h,"load",this.eL.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};Gf.prototype.eL=function(a,b,c){b.Jf=a;b.Li=null;a=new Wd;a.Na=c;a.va=b;this.dispatchEvent(a)};v("X.parserIMAGE",Gf);v("X.parserIMAGE.prototype.parse",Gf.prototype.parse);function Hf(){Ee.call(this);this.s="parserLUT"}w(Hf,Ee);
Hf.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Ge(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.wd(this.s+".parse");c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};
v("X.parserLUT",Hf);v("X.parserLUT.prototype.parse",Hf.prototype.parse);function If(){Ee.call(this);this.s="parserMRC"}w(If,Ee);
If.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");c=this.ji(c);var d=c.min,e=c.max;b.Da=[c.zo,c.Ao,c.Bo];b.Eh=[c.xlen/c.xB,c.sD/c.yB,c.uD/c.zB];b.Wd=b.Rb=d;b.Yb=b.Qb=e;-Infinity==b.yb&&(b.yb=d);Infinity==b.Ab&&(b.Ab=e);e=Bd();L(e,3,0,0,0,1);L(e,0,-1,0,0,c.zo);L(e,1,0,0,-1,c.Ao);L(e,2,0,-1,0,c.Bo);c.ze=e;c.Be=Bd();Jd(c.ze,c.Be);var h=Ad(0,0,0,1),d=zd();Ld(e,h,d);var k=Ad(1,1,1,1),h=zd();Ld(e,k,h);k=[c.zo,c.Ao,c.Bo];e=He(e,k);c.Bg=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.jd=[e[1]+e[0]+1,e[3]-e[2]+1,
e[5]-e[4]+1];c.df=[e[0],e[2],e[4]];b.Da=k;b.hf(c);b.Jf=Me(this,b);A.wd(this.s+".parse");c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};
If.prototype.ji=function(a){this._data=a;a={zo:0,Ao:0,Bo:0,mode:0,EP:0,FP:0,GP:0,xB:0,yB:0,zB:0,xlen:0,sD:0,uD:0,alpha:0,beta:0,gamma:0,pJ:0,qJ:0,rJ:0,Ft:0,gq:0,dk:0,rP:0,next:0,$F:0,extra:null,KJ:0,MJ:0,extra:null,OI:0,oP:0,LI:0,lens:0,HJ:0,IJ:0,pM:0,qM:0,hM:null,uM:0,wM:0,xM:0,bP:0,UP:0,tL:0,LJ:0,data:null,min:Infinity,max:-Infinity,AP:0,TC:null,TP:null,NP:null,orientation:null,DP:null};this.Ma=0;a.zo=this.h("sint");a.Ao=this.h("sint");a.Bo=this.h("sint");a.mode=this.h("sint");var b=a.zo*a.Ao*a.Bo;
this.Ma=1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.Ma=28;a.xB=this.h("sint");a.yB=this.h("sint");a.zB=this.h("sint");a.xlen=this.h("float");a.sD=this.h("float");a.uD=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.pJ=this.h("sint");a.qJ=this.h("sint");a.rJ=this.h("sint");a.Ft=this.h("float");a.gq=this.h("float");a.dk=this.h("float");a.qP=this.h("sint");a.next=this.h("sint");a.$F=this.h("short");a.KJ=this.h("short");a.MJ=this.h("short");a.OI=this.h("sint");a.nP=this.h("sint");a.LI=this.h("short");a.lens=this.h("short");a.HJ=this.h("short");a.IJ=this.h("short");a.pM=this.h("short");a.qM=this.h("short");a.hM=this.h("float",6);this.Ma=196;a.uM=this.h("float");a.wM=
this.h("float");a.xM=this.h("float");this.Ma=216;a.tL=this.h("float");a.LJ=this.h("sint");a.vP=this.h("schar",10);if(0!=a.next)switch(this.Ma=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.dk-(a.gq-a.dk)?(a.min=a.Ft,a.max=a.dk+(a.dk-a.Ft)):(a.min=a.dk-(a.gq-a.dk),a.max=a.gq);return a};v("X.parserMRC",If);v("X.parserMRC.prototype.parse",If.prototype.parse);function Jf(){Ee.call(this);this.s="parserNRRD"}w(Jf,Ee);
Jf.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ge(c,0,k-2);h=k+1;break}var l,n,p,m,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.bJ=!0:!l.match(/^#/)&&(m=l.match(/(.*):(.*)/))&&(n=m[1].trim(),l=m[2].trim(),(p=this.vG[n])?p.call(this,l):this[n]=l);if(!this.bJ)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.dc&&(this.dc=[new K(1,0,0),new K(0,1,0),new K(0,0,1)],this.Hw))for(d=[],m=0;2>=m;m++)d.push(isNaN(this.Hw[m])?void 0:this.dc[m].scale(this.Hw[m]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new Af(new Uint8Array(h))).Yi();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.Bi(h);m=Fe(c.data);h=c.min=m[0];m=c.max=m[1];b.Wd=b.Rb=h;b.Yb=b.Qb=m;b.Da=[this.Cw[0],this.Cw[1],this.Cw[2]];d=
(new K(this.dc[0][0],this.dc[0][1],this.dc[0][2])).gg();e=(new K(this.dc[1][0],this.dc[1][1],this.dc[1][2])).gg();k=(new K(this.dc[2][0],this.dc[2][1],this.dc[2][2])).gg();b.Eh=[d,e,k];-Infinity==b.yb&&(b.yb=h);Infinity==b.Ab&&(b.Ab=m);d=m=1;"left-posterior-superior"==this.TC&&(d=m=-1);h=Cd();L(h,0,m*this.dc[0][0],m*this.dc[1][0],m*this.dc[2][0],m*this.Gw[0]);L(h,1,d*this.dc[0][1],d*this.dc[1][1],d*this.dc[2][1],d*this.Gw[1]);L(h,2,1*this.dc[0][2],1*this.dc[1][2],1*this.dc[2][2],1*this.Gw[2]);L(h,
3,0,0,0,1);c.ze=h;c.Be=Bd();Jd(c.ze,c.Be);d=Ad(0,0,0,1);m=zd();Ld(h,d,m);e=Ad(1,1,1,1);d=zd();Ld(h,e,d);h=He(h,b.Da);c.Bg=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];c.jd=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.df=[h[0],h[2],h[4]];b.hf(c);A.wd(this.s+".parse");b.Jf=Me(this,b);c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};
Jf.prototype.vG={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Bi=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Bi=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Bi=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Bi=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Bi=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Bi=Uint32Array;break;case "float":this.Bi=Float32Array;break;case "double":this.Bi=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.jP=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Zi=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.Cw=e},space:function(a){return this.TC=a},"space origin":function(a){return this.Gw=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.dc=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.Hw=e}};v("X.parserNRRD",Jf);v("X.parserNRRD.prototype.parse",Jf.prototype.parse);function Kf(){Ee.call(this);this.s="parserSTL"}w(Kf,Ee);
Kf.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");this._data=c;var d=b.C,e=b.da;if("solid"==Ge(this.h("uchar",5))){b.C=d=new cd(c.byteLength);b.da=e=new cd(c.byteLength);var h=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,p;for(p=0;p<c;p++)if(10==e[p]){if(k||l){var m=Ge(e,n,p).split(" "),l=parseFloat(m[0]),q=parseFloat(m[1]),m=parseFloat(m[2]);k?(d.add(l,q,m),d.add(l,q,m),d.add(l,q,m)):h.add(l,q,m);l=k=!1}}else 32==e[p-1]&&(102==e[p]?(n=p+=13,k=!0):118==e[p]&&(n=p+=7,
l=!0))}else for(this.Ma=80,h=this.h("uint"),b.C=d=new cd(9*h),b.da=e=new cd(9*h),c=c=0;c<h;c++)k=this.h("float",12),n=k[0],p=k[1],l=k[2],e.add(n,p,l),e.add(n,p,l),e.add(n,p,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.Ma+=2;A.wd(this.s+".parse");h=new Wd;h.Na=b;h.va=a;this.dispatchEvent(h)};v("X.parserSTL",Kf);v("X.parserSTL.prototype.parse",Kf.prototype.parse);function Lf(){Ee.call(this);this.s="parserNII"}w(Lf,Ee);
Lf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new Af(new Uint8Array(d))).Yi(),d=d.buffer);c=this.ji(d);d=c.min;e=c.max;b.Wd=b.Rb=d;b.Yb=b.Qb=e;-Infinity==b.yb&&(b.yb=d);Infinity==b.Ab&&(b.Ab=e);d=Bd();L(d,3,0,0,0,1);if(0<c.gw){var e=0,h=c.TB,k=c.UB,l=c.VB,n=1,p=1,m=1,q=c.QB,t=c.RB,s=c.SB,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.jg[1]&&(n=c.jg[1]);
0<c.jg[2]&&(p=c.jg[2]);0<c.jg[2]&&(m=c.jg[3]);0>c.jg[0]&&(m=-m);L(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*p,2*(h*l+e*k)*m,q);L(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*p,2*(k*l-e*h)*m,t);L(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*p,(e*e+l*l-k*k-h*h)*m,s)}else 0<c.NC?(e=c.UC,h=c.VC,k=c.WC,L(d,0,e[0],e[1],e[2],e[3]),L(d,1,h[0],h[1],h[2],h[3]),L(d,2,k[0],k[1],k[2],k[3])):0==c.gw?(L(d,0,c.jg[1],0,0,0),L(d,1,0,c.jg[2],0,0),L(d,2,0,0,c.jg[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.ze=d;c.Be=Bd();Jd(c.ze,c.Be);
h=Ad(0,0,0,1);e=zd();Ld(d,h,e);k=Ad(1,1,1,1);h=zd();Ld(d,k,h);k=[c.Zi[1],c.Zi[2],c.Zi[3]];d=He(d,k);c.Bg=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.jd=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.df=[d[0],d[2],d[4]];b.Da=k;b.hf(c);b.Jf=Me(this,b);c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};
Lf.prototype.ji=function(a){this._data=a;a={OL:0,data_type:null,aG:null,tG:0,BL:0,kL:0,eG:null,Zi:null,WI:0,XI:0,YI:0,UI:0,bu:0,MF:0,TL:0,jg:null,oD:0,AL:0,zL:0,SL:0,QL:null,vM:null,PF:0,QF:0,RL:0,jM:0,tI:0,uI:0,cG:null,JF:null,gw:0,NC:0,TB:0,UB:0,VB:0,QB:0,RB:0,SB:0,UC:null,VC:null,WC:null,VI:null,magic:null,data:null,min:Infinity,max:-Infinity};a.OL=this.h("uint");a.data_type=this.h("uchar",10);a.aG=this.h("uchar",18);a.tG=this.h("uint");a.BL=this.h("ushort");a.kL=this.h("uchar");a.eG=this.h("uchar");
a.Zi=this.h("ushort",8);a.WI=this.h("float");a.XI=this.h("float");a.YI=this.h("float");a.UI=this.h("ushort");a.bu=this.h("ushort");a.MF=this.h("ushort");a.TL=this.h("ushort");a.jg=this.h("float",8);a.oD=this.h("float");a.AL=this.h("float");a.zL=this.h("float");a.SL=this.h("ushort");a.QL=this.h("uchar");a.vM=this.h("uchar");a.PF=this.h("float");a.QF=this.h("float");a.RL=this.h("float");a.jM=this.h("float");a.tI=this.h("uint",1);a.uI=this.h("uint",1);a.cG=this.h("uchar",80);a.JF=this.h("uchar",24);
a.gw=this.h("ushort");a.NC=this.h("ushort");a.TB=this.h("float");a.UB=this.h("float");a.VB=this.h("float");a.QB=this.h("float");a.RB=this.h("float");a.SB=this.h("float");a.UC=this.h("float",4);a.VC=this.h("float",4);a.WC=this.h("float",4);a.VI=this.h("uchar",16);a.magic=this.h("uchar",4);this.Ma=parseInt(a.oD,10);var b=a.Zi[1]*a.Zi[2]*a.Zi[3];switch(a.bu){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",
b);break;case 32:a.data=this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.bu);}b=Fe(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Lf);v("X.parserNII.prototype.parse",Lf.prototype.parse);function Mf(){Ee.call(this);this.s="parserTRK"}w(Mf,Ee);
Mf.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");var d=b.C,e=b.da,h=b.Hc;this._data=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var n=this.h("uint");this.h("uint");var p=
this.h("uint"),m=[],q=[],t=Infinity,s=-Infinity,z=null,y=null,H=null,Q=null,e=d=null,P=this.h("uint",(this._data.byteLength-1E3)/4);this.Ma=p;for(var G=this.h("float",(this._data.byteLength-1E3)/4),S=0,p=h=0;p<n;p++){for(var Y=P[S],U=new cd(3*Y),wa=0,oa=0;oa<Y;oa++){var ya=G[S+3*oa+oa*l+1],Ma=G[S+3*oa+oa*l+2],Ha=G[S+3*oa+oa*l+3],ya=ya/k[0],Ma=Ma/k[1],Ha=Ha/k[2];U.add(ya,Ma,Ha);if(0<oa)var Na=U.get(oa-1),wa=wa+Math.sqrt(Math.pow(ya-Na[0],2)+Math.pow(Ma-Na[1],2)+Math.pow(Ha-Na[2],2));oa<Y-1&&(h+=6)}S+=
3*Y+Y*l+1;oa=U.Nf;Y=U.Kf;ya=U.Of;Ma=U.Lf;Ha=U.Pf;Na=U.Mf;if(!z||oa<z)z=oa;if(!y||Y>y)y=Y;if(!H||ya<H)H=ya;if(!Q||Ma>Q)Q=Ma;if(!d||Ha<d)d=Ha;if(!e||Na>e)e=Na;m.push(U);q.push(wa)}k=(z+y)/2;H=(H+Q)/2;l=(d+e)/2;Q=new Float32Array(h);b.C=d=new cd(h);b.da=e=new cd(h);b.Hc=h=new cd(h);for(p=z=0;p<n;p++)for(y=m[p],P=y.count,wa=q[p],t=Math.min(t,wa),s=Math.max(s,wa),oa=0;oa<P-1;oa++){S=y.get(oa);G=y.get(oa+1);d.add(S[0],S[1],S[2]);d.add(G[0],G[1],G[2]);var U=S[0]-k,Y=S[1]-H,ya=S[2]-l,Ma=Math.sqrt(U*U+Y*Y+
ya*ya),Ha=G[0]-k,Na=G[1]-H,la=G[2]-l,za=Math.sqrt(Ha*Ha+Na*Na+la*la);e.add(U/Ma,Y/Ma,ya/Ma);e.add(Ha/za,Na/za,la/za);G=[Math.abs(G[0]-S[0]),Math.abs(G[1]-S[1]),Math.abs(G[2]-S[2])];S=Math.sqrt(G[0]*G[0]+G[1]*G[1]+G[2]*G[2]);G[0]/=S;G[1]/=S;G[2]/=S;h.add(G[0],G[1],G[2]);h.add(G[0],G[1],G[2]);Q[z++]=wa;Q[z++]=wa;Q[z++]=wa;Q[z++]=wa;Q[z++]=wa;Q[z++]=wa}b.Ed="LINES";n=new Ud;n.Wd=t;n.Yb=s;n.yb=t;n.Ab=s;n.Vm=Q;n.ly=!1;n.I=!0;b.eb=n;t=!1;for(p=0;16>p;p++)if(0!=c[p]){t=!0;break}!1==t&&(c[0]=c[5]=c[10]=c[15]=
1);A.wd(this.s+".parse");A.t.Yw(c,b.ic.zb);c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};v("X.parserTRK",Mf);v("X.parserTRK.prototype.parse",Mf.prototype.parse);function Nf(){Ee.call(this);this.s="parserOBJ"}w(Nf,Ee);
Nf.prototype.parse=function(a,b,c){A.Ud(this.s+".parse");this._data=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.C=new cd(c);b.da=new cd(c);var h=b.C,k=b.da,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var p=Ge(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var m=e[parseInt(p[1],10)-1],l=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];h.add(m[0],m[1],m[2]);h.add(l[0],l[1],l[2]);h.add(p[0],p[1],p[2]);m=new K(m[0],m[1],
m[2]);p=new K(p[0],p[1],p[2]);l=sd((new K(l[0],l[1],l[2])).Cc(m),p.Cc(m));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.wd(this.s+".parse");c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};v("X.parserOBJ",Nf);v("X.parserOBJ.prototype.parse",Nf.prototype.parse);function Of(){bd.call(this);this.s="loader";this.ul=new jd;this.jn=0}w(Of,bd);function Pf(a,b){a.jn+=b/a.ul.Yf()/3;a.jn=Math.min(1,a.jn);var c=new Ae;c.Yj=a.jn;a.dispatchEvent(c)}function Qf(a){a=a.fa.Yp;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Rf))throw Error("The "+b+" file format is not supported.");return[a,b,Rf[b][0],Rf[b][1],Rf[b][2]]}
Of.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!ld(this.ul.Bb,a.ld)||this.ul.get(a.ld)){this.ul.set(a.ld,!1);var c=Qf(a)[0];if(null!=a.Gg)this.parse(null,a,b);else{var d=new XMLHttpRequest;F(d,"abort",this.Nz.bind(this,d,a,b));F(d,"error",this.Nz.bind(this,d,a,b));F(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Of.prototype.parse=function(a,b,c){Pf(this,1);setTimeout(function(){var d=Qf(b),e=d[3],d=new d[2];Tc(d,ge,this.complete.bind(this));var h=b.Gg;null==h&&(h=a.response,b.Gg=h);d.parse(b,c,h,e)}.bind(this),100)};Of.prototype.complete=function(a){Pf(this,1);setTimeout(function(){var b=a.va,c=a.Na;b.fa.I=!1;b.I=!0;c.ea();this.ul.set(b.ld,!0)}.bind(this),100)};Of.prototype.Nz=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Rf={OBJ:[Nf,null],OFF:[Ne,null],STL:[Kf,null],VTK:[Te,null],TRK:[Mf,null],MRC:[If,null],ST:[If,null],FSM:[Ve,null],INFLATED:[Ve,null],SMOOTHWM:[Ve,null],SPHERE:[Ve,null],PIAL:[Ve,null],ORIG:[Ve,null],NRRD:[Jf,null],NII:[Lf,null],GZ:[Lf,null],DCM:[Se,null],DICOM:[Se,null],"":[Se,null],CRV:[Df,null],LABEL:[Cf,null],MGH:[Bf,!1],MGZ:[Bf,!0],RAW:[Ff,!1],RZ:[Ff,!0],TXT:[Hf,null],LUT:[Hf,null],PNG:[Gf,"png"],JPG:[Gf,"jpeg"],JPEG:[Gf,"jpeg"],GIF:[Gf,"gif"]};function Sf(){Ee.call(this);this.s="parserIMA"}w(Sf,Ee);
Sf.prototype.parse=function(a,b,c){b.vh={};b.vh.vo=0;this.ji(c,b);if(null==b.fa.length||b.za.length==b.fa.length){b.vh.vo=b.fa.length;var d={};c={};for(var e=0;e<b.za.length;e++)d.hasOwnProperty(b.za[e].series_instance_uid)||(d[b.za[e].series_instance_uid]=[],c[b.za[e].series_instance_uid]={}),c[b.za[e].series_instance_uid].hasOwnProperty(b.za[e].sop_instance_uid)||(c[b.za[e].series_instance_uid][b.za[e].sop_instance_uid]=!0,d[b.za[e].series_instance_uid].push(b.za[e]));var h=Object.keys(d)[0],e=
d[h],k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=sd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],p=d[1]-n[1],m=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+p*p+
m*m);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,q=e[k-1].image_position_patient,h=q[0]-n[0],p=q[1]-n[1],m=q[2]-n[2],h=Math.sqrt(h*h+p*p+m*m),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;q=null;switch(e[0].Ri){case 8:q=new Uint8Array(h);break;case 16:q=new Uint16Array(h);break;case 32:q=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Eh=e[0].pixel_spacing;for(var t=0;t<k;t++){var s=e[t].data,h=0;switch(l){case "image_position_patient":h=e[t].image_position_patient[0]-e[0].image_position_patient[0];p=e[t].image_position_patient[1]-
e[0].image_position_patient[1];m=e[t].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+p*p+m*m)/e[0].pixel_spacing[2];break;case "instance_number":h=e[t].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}q.set(s,h*n)}c.data=q;b._data=q;b.Da=[e[0].columns,e[0].rows,d];c.fG=b.Da;d=Fe(q);k=d[0];d=d[1];c.min=b.Wd=b.Rb=k;c.max=b.Yb=b.Qb=d;-Infinity==b.yb&&(b.yb=k);Infinity==b.Ab&&(b.Ab=d);p=e[0].image_position_patient;
k=Bd();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=sd(d,h);L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);L(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);L(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=sd(d,h),L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),L(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(L(k,0,1,0,0,-p[0]),L(k,1,0,-1,-0,-p[1]),L(k,2,0,0,1,p[2]));L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.ze=k;c.Be=Bd();Jd(c.ze,c.Be);l=Ad(0,0,0,1);e=zd();Ld(k,l,e);l=Ad(1,1,1,1);d=zd();Ld(k,l,d);c.Bg=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=He(k,[b.Da[0],b.Da[1],b.Da[2]]);c.jd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.df=[e[0],e[2],e[4]];b.hf(c);b.Jf=Me(this,b)}c=new Wd;c.Na=b;c.va=a;this.dispatchEvent(c)};
Sf.prototype.he=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Sf.prototype.ji=function(a,b){this._data=a;if("undefined"==typeof b.za||null==b.za)b.za=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=[[8,4368],[8,4384]],m=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],m=!1,q=0,t=p.length;q<t;q++)if(h===p[q][0]&&k===p[q][1]){m=!0;break}if(m)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Sf.prototype.he(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Ri=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Sf.prototype.he(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Sf.prototype.he(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Sf.prototype.he(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Sf.prototype.he(d,e,l,n)}break;case 16:switch(k){case 8720:for(q=0;q<n/2;q++)e++;break;default:e=
Sf.prototype.he(d,e,l,n)}break;default:e=Sf.prototype.he(d,e,l,n)}}switch(c.Ri){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Ma=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Ri){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.za.push(c);return b};v("X.parserIMA",Sf);
v("X.parserIMA.prototype.parse",Sf.prototype.parse);var Tf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Uf(a){if(Vf){Vf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Uf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Vf=!0,Error();}}return a.match(Tf)}var Vf=ic;function Wf(a,b){$c.call(this);this.cg=a||1;this.Em=b||ba;this.Jt=ta(this.gM,this);this.av=va()}w(Wf,$c);f=Wf.prototype;f.enabled=!1;f.pa=null;f.setInterval=function(a){this.cg=a;this.pa&&this.enabled?(this.stop(),this.start()):this.pa&&this.stop()};
f.gM=function(){if(this.enabled){var a=va()-this.av;0<a&&a<.8*this.cg?this.pa=this.Em.setTimeout(this.Jt,this.cg-a):(this.pa&&(this.Em.clearTimeout(this.pa),this.pa=null),this.dispatchEvent(Xf),this.enabled&&(this.pa=this.Em.setTimeout(this.Jt,this.cg),this.av=va()))}};f.start=function(){this.enabled=!0;this.pa||(this.pa=this.Em.setTimeout(this.Jt,this.cg),this.av=va())};f.stop=function(){this.enabled=!1;this.pa&&(this.Em.clearTimeout(this.pa),this.pa=null)};
f.f=function(){Wf.d.f.call(this);this.stop();delete this.Em};var Xf="tick";function Yf(a,b,c){if(ja(a))c&&(a=ta(a,c));else if(a&&"function"==typeof a.handleEvent)a=ta(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Zf(a){return"function"==typeof a.Yf?a.Yf():ha(a)||r(a)?a.length:lb(a)}function $f(a){if("function"==typeof a.Wh)return a.Wh();if(r(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return mb(a)}function ag(a){if("function"==typeof a.Un)return a.Un();if("function"!=typeof a.Wh){if(ha(a)||r(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return ob(a)}}
function bg(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ha(a)||r(a))D(a,b,void 0);else for(var c=ag(a),d=$f(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function cg(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ha(a)||r(a))return Fb(a,b,void 0);for(var c=ag(a),d=$f(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function dg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function eg(){}eg.prototype.bz=null;function fg(a){var b;(b=a.bz)||(b={},gg(a)&&(b[0]=!0,b[1]=!0),b=a.bz=b);return b};var hg;function ig(){}w(ig,eg);function jg(a){return(a=gg(a))?new ActiveXObject(a):new XMLHttpRequest}function gg(a){if(!a.VA&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.VA=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.VA}hg=new ig;function kg(a){this.Bb=new jd;a&&this.xt(a)}function lg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ma(a):b.substr(0,1)+a}f=kg.prototype;f.Yf=function(){return this.Bb.Yf()};f.add=function(a){this.Bb.set(lg(a),a)};f.xt=function(a){a=$f(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.mg=function(a){a=$f(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.Bb.remove(lg(a))};f.clear=function(){this.Bb.clear()};f.km=function(){return this.Bb.km()};
f.contains=function(a){a=lg(a);return ld(this.Bb.Bb,a)};f.$A=function(a){var b=new kg;a=$f(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.Wh=function(){return this.Bb.Wh()};f.clone=function(){return new kg(this)};f.Rl=function(a){return this.Yf()==Zf(a)&&mg(this,a)};
function mg(a,b){var c=Zf(b);if(a.Yf()>c)return!1;!(b instanceof kg)&&5<c&&(b=new kg(b));return cg(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.Ut?c.Ut(a):ha(c)||r(c)?Ib(c,a):pb(c,a)})};function ng(a){var b;b||(b=og(a||arguments.callee.caller,[]));return b}
function og(a,b){var c=[];if(Ib(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pg(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=pg(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(og(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pg(a){if(qg[a])return qg[a];a=String(a);if(!qg[a]){var b=/function ([^\(]+)/.exec(a);qg[a]=b?b[1]:"[Anonymous]"}return qg[a]}var qg={};function rg(a,b,c,d,e){this.reset(a,b,c,d,e)}rg.prototype.Lz=null;rg.prototype.Kz=null;var sg=0;rg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||sg++;d||va();this.so=a;this.GJ=b;delete this.Lz;delete this.Kz};rg.prototype.rC=function(a){this.so=a};function tg(a){this.Jk=a;this.OA=this.Ic=this.so=this.Ra=null}function ug(a,b){this.name=a;this.value=b}ug.prototype.toString=function(){return this.name};var vg=new ug("SEVERE",1E3),wg=new ug("CONFIG",700),xg=new ug("FINE",500);f=tg.prototype;f.getName=function(){return this.Jk};f.getParent=function(){return this.Ra};f.tu=function(){this.Ic||(this.Ic={});return this.Ic};f.rC=function(a){this.so=a};
function yg(a){if(a.so)return a.so;if(a.Ra)return yg(a.Ra);eb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=yg(this).value)for(ja(b)&&(b=b()),a=this.lA(a,b,c,tg.prototype.log),b="log:"+a.GJ,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.OA)for(var e=0,h=void 0;h=c.OA[e];e++)h(d);b=b.getParent()}};
f.lA=function(a,b,c,d){a=new rg(a,String(b),this.Jk);if(c){a.Lz=c;var e;d=d||tg.prototype.lA;try{var h;var k=da("window.location.href");if(r(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.yP||"Not available"}catch(p){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(m){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+La(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+La(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+La(ng(d)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}a.Kz=e}return a};f.Xo=function(a){this.Ra=a};var zg={},Ag=null;
function Bg(a){Ag||(Ag=new tg(""),zg[""]=Ag,Ag.rC(wg));var b;if(!(b=zg[a])){b=new tg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Bg(a.substr(0,c));c.tu()[d]=b;b.Xo(c);zg[a]=b}return b};function Cg(a,b){a&&a.log(xg,b,void 0)};function Dg(a){$c.call(this);this.headers=new jd;this.Hs=a||null;this.Ni=!1;this.Gs=this.Aa=null;this.qo=this.fB=this.or="";this.Bk=this.Qu=this.Zq=this.nu=!1;this.qp=0;this.xs=null;this.dC=Eg;this.Cs=this.tM=!1}w(Dg,$c);var Eg="",Fg=Dg.prototype,Gg=Bg("goog.net.XhrIo");Fg.rf=Gg;var Hg=/^https?$/i,Ig=["POST","PUT"],Jg=[];function Kg(a,b){var c=new Dg;Jg.push(c);b&&c.A("complete",b);c.ev("ready",c.SF);c.send(a,void 0,void 0,void 0)}f=Dg.prototype;f.SF=function(){this.g();Lb(Jg,this)};
f.send=function(a,b,c,d){if(this.Aa)throw Error("[goog.net.XhrIo] Object is active with another request="+this.or+"; newUri="+a);b=b?b.toUpperCase():"GET";this.or=a;this.qo="";this.fB=b;this.nu=!1;this.Ni=!0;this.Aa=this.Hs?jg(this.Hs):jg(hg);this.Gs=this.Hs?fg(this.Hs):fg(hg);this.Aa.onreadystatechange=ta(this.IB,this);try{Cg(this.rf,Lg(this,"Opening Xhr")),this.Qu=!0,this.Aa.open(b,String(a),!0),this.Qu=!1}catch(e){Cg(this.rf,Lg(this,"Error opening Xhr: "+e.message));Mg(this,e);return}a=c||"";var h=
this.headers.clone();d&&bg(d,function(a,b){h.set(b,a)});d=Gb(h.Un());c=ba.FormData&&a instanceof ba.FormData;!Ib(Ig,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.Aa.setRequestHeader(b,a)},this);this.dC&&(this.Aa.responseType=this.dC);"withCredentials"in this.Aa&&(this.Aa.withCredentials=this.tM);try{Ng(this),0<this.qp&&(this.Cs=Og(this.Aa),Cg(this.rf,Lg(this,"Will abort after "+this.qp+"ms if incomplete, xhr2 "+this.Cs)),this.Cs?(this.Aa.timeout=
this.qp,this.Aa.ontimeout=ta(this.dD,this)):this.xs=Yf(this.dD,this.qp,this)),Cg(this.rf,Lg(this,"Sending request")),this.Zq=!0,this.Aa.send(a),this.Zq=!1}catch(k){Cg(this.rf,Lg(this,"Send error: "+k.message)),Mg(this,k)}};function Og(a){return E&&pc(9)&&u(a.timeout)&&ca(a.ontimeout)}function Hb(a){return"content-type"==a.toLowerCase()}f.dD=function(){"undefined"!=typeof aa&&this.Aa&&(this.qo="Timed out after "+this.qp+"ms, aborting",Cg(this.rf,Lg(this,this.qo)),this.dispatchEvent("timeout"),this.abort(8))};
function Mg(a,b){a.Ni=!1;a.Aa&&(a.Bk=!0,a.Aa.abort(),a.Bk=!1);a.qo=b;Pg(a);Qg(a)}function Pg(a){a.nu||(a.nu=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Aa&&this.Ni&&(Cg(this.rf,Lg(this,"Aborting")),this.Ni=!1,this.Bk=!0,this.Aa.abort(),this.Bk=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Qg(this))};f.f=function(){this.Aa&&(this.Ni&&(this.Ni=!1,this.Bk=!0,this.Aa.abort(),this.Bk=!1),Qg(this,!0));Dg.d.f.call(this)};
f.IB=function(){this.lk||(this.Qu||this.Zq||this.Bk?Rg(this):this.vK())};f.vK=function(){Rg(this)};
function Rg(a){if(a.Ni&&"undefined"!=typeof aa)if(a.Gs[1]&&4==Sg(a)&&2==Tg(a))Cg(a.rf,Lg(a,"Local request error detected and ignored"));else if(a.Zq&&4==Sg(a))Yf(a.IB,0,a);else if(a.dispatchEvent("readystatechange"),4==Sg(a)){Cg(a.rf,Lg(a,"Request complete"));a.Ni=!1;try{var b=Tg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Uf(String(a.or))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Hg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Sg(a)?a.Aa.statusText:""}catch(n){Cg(a.rf,"Can not get status: "+n.message),l=""}a.qo=l+" ["+Tg(a)+"]";Pg(a)}}finally{Qg(a)}}}
function Qg(a,b){if(a.Aa){Ng(a);var c=a.Aa,d=a.Gs[0]?ea:null;a.Aa=null;a.Gs=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.rf)&&c.log(vg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ng(a){a.Aa&&a.Cs&&(a.Aa.ontimeout=null);u(a.xs)&&(ba.clearTimeout(a.xs),a.xs=null)}f.Zg=function(){return!!this.Aa};function Sg(a){return a.Aa?a.Aa.readyState:0}function Tg(a){try{return 2<Sg(a)?a.Aa.status:-1}catch(b){return-1}}
function Lg(a,b){return b+" ["+a.fB+" "+a.or+" "+Tg(a)+"]"};/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function M(){}v("gxnat",M);M.JPEG_CONVERT_SUFFIX="?format=image/jpeg";M.AG={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};M.Rx="?format=zip";M.di=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);M.get(a,b,"json")};
M.get=function(a,b,c){Kg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.Aa?dg(a.Aa.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Aa?a.Aa.responseText:""}catch(h){Cg(a.rf,"Can not get responseText: "+h.message),e=""}b(e)}})};
M.Cr=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(M.Cr.TI&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(M.Cr.TI&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
M.WL=function(a,b){var c=[],d={},e=[],h={};D(a,function(a){h=a;D(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(M.CP);D(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",M.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",M.AG);v("gxnat.ZIP_SUFFIX",M.Rx);v("gxnat.jsonGet",M.di);v("gxnat.get",M.get);v("gxnat.naturalSort",M.Cr);v("gxnat.sortXnatPropertiesArray",M.WL);function Ug(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Vg(this)}w(Ug,wc);v("gxnat.Path",Ug);
function Wg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Xg(a){for(var b=0,c=Yg.length,b=0;b<c;b++)a(Yg[b],b)}function Zg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Yg=["projects","subjects","experiments",["scans","resources"],"files"];
function Vg(a){var b,c,d,e=!1;Xg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.du=Yg[k-1],e=!0);else null!=this[a]||e||(this.du=Yg[k-1],e=!0)}.bind(a))}Ug.prototype.Gq=function(){null!=this.du||Vg(this);return this.du};
Ug.prototype.ki=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=Yg.length,k=0,d=0;d<h;d++){c=Yg[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Ug.prototype.g=function(){Ug.d.g.call(this);sb(this)};v("gxnat.Path.getQueryPrefix",Wg);v("gxnat.Path.forEachXnatLevel",Xg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Ug(a),d=new Ug(b),e=void 0;Xg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",Zg);v("gxnat.Path.xnatLevelOrder",Yg);v("gxnat.Path.prototype.getDeepestLevel",Ug.prototype.Gq);v("gxnat.Path.prototype.pathByLevel",Ug.prototype.ki);v("gxnat.Path.prototype.dispose",Ug.prototype.g);function $g(a){this.Jd=new Ug(a);this.projects=[];this[ah]={};this[bh]={};this[ch]={}}w($g,wc);v("gxnat.ProjectTree",$g);function dh(a){this[eh]=r(a)?new Ug(a):a;this[fh]=this[eh].Gq();a=Yg.indexOf(this[eh].Gq())+1;-1!=a&&(this[gh]=Yg[a],r(this[gh])&&(this[hh]=this[eh].originalUrl+"/"+this[gh],this[this[gh]]=[]))}w(dh,wc);v("gxnat.ProjectTree.TreeNode",dh);dh.prototype.qe=function(a){this.Mb=a};dh.prototype.Id=function(){return this.Mb};
dh.prototype.g=function(){dh.d.g.call(this);null!=this[eh]&&this[eh].g();sb(this)};var fh=B(),hh=B(),ih=B(),eh=B(),gh=B(),jh=B(),kh=B(),lh=B(),ah=B(),bh=B(),ch=B(),mh=["ID","description","name","URI"],nh=["gender","handedness","label","URI"],oh=["label","URI"];function ph(a,b){return Ka(a.Id(),b.Id())}function qh(a){var b="&columns=";D(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=$g.prototype;
f.Tz=function(a){var b=[];C(this.Rn(a),function(a,d){"projects"==d?b.push(a[lh].ID):b.push(a[lh].label)});return b};f.Uz=function(a){var b=[];C(this.Rn(a),function(a){b.push(a[eh].originalUrl)});return b};f.Rn=function(a){branch={projects:this.Qd};"experiments"==a[gh]?branch.subjects=a:g(a[gh])&&(branch.subjects=this[bh][a[eh].ki("subjects")],branch.experiments=a);return branch};f.kB=function(a,b){this.uo(this.Jd,a,b)};
f.uo=function(a,b,c){var d=r(a)?new Ug(a):a,e;if(null!=this.Qd){a={projects:this.Qd};if(null!=d.subjects){e=d.ki("subjects");if(null==this[bh][e]){this.hv(e,function(a){this.mB(a,function(){null!=b&&b(a);this.uo(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[bh][e]}if(null!=d.experiments){e=d.ki("experiments");if(null==this[ch][e]){this.gv(e,function(a){null!=b&&b(a);this.uo(d,b,c)}.bind(this));return}a.experiments=this[ch][e]}null!=c&&c(a)}else this.lB(function(a){null!=b&&b(a);this.uo(d,
b,c)}.bind(this))};f.lB=function(a){if(null==this.Qd){var b=qh(mh),c=this.Jd.prefix+"/projects/"+this.Jd.projects,d;M.di(this.Jd.prefix+"/projects",function(b){d=new dh(c);this.projects.push(d);this.Qd=d;this[ah][d[eh].originalUrl]=d;d[lh]=b[0];d.qe(d[lh].name);a(d)}.bind(this),"&ID="+this.Jd.projects+b)}};f.Wn=function(a){return this[bh][a]};f.Xl=function(a){return this[ch][a]};
f.mB=function(a,b){var c=a;r(a)?c=this.Wn(a):a instanceof Ug&&(c=this.Wn(a.originalUrl));if(null!=c[lh])b(c);else{var d=this.Jd.prefix+"/subjects",e=qh(nh),e="&ID="+c[eh].subjects+e;M.di(d,function(a){c[lh]=a[0];c.qe(c[lh].label);b(c)}.bind(this),e)}};
f.nB=function(a,b){if(null==this.Qd[jh]||!0!=this.Qd[jh]){var c=this.Qd[eh].originalUrl+"/subjects",d=qh(nh);window.console.log("load subjects",c,d);var e,h;M.di(c,function(c){D(c,function(d){h=this.Qd[eh].prefix+"/projects/"+this.Qd[eh].projects+"/subjects/"+d.ID;e=this.hv(h);null==e[lh]&&(e[lh]=d,e.qe(e[lh].label));null!=a&&a(e);this.Qd.subjects.length==c.length&&(this.Qd[jh]=!0,null!=b&&(d=this.Qd.subjects,d.sort(ph),b(d)))}.bind(this))}.bind(this),d)}};
f.hv=function(a,b){if(null!=this[bh][a])return this[bh][a];subjNode=new dh(a);this.Qd.subjects.push(subjNode);this[bh][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.iB=function(a,b){var c=a;r(a)?c=this.Xl(a):a instanceof Ug&&(c=this.Xl(a.originalUrl));var d=this.Jd.prefix+"/experiments",e=qh(oh),e="&ID="+c[eh].experiments+e;M.di(d,function(a){c[lh]=a[0];c.qe(c[lh].label);b(c)}.bind(this),e)};
f.jB=function(a,b,c){var d=a;r(a)?d=this.Wn(a):a instanceof Ug&&(d=this.Wn(a.originalUrl));if(null!=d[jh]&&!0==d[jh])window.console.log("Don't need to reload the experiments of "+d[eh].originalUrl);else{var e=d[eh].originalUrl+"/experiments";M.di(e+"?xsiType=xnat:imageSessionData",function(a){D(a,function(k){this.gv(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[jh]=!0,null!=c&&(e=d.experiments,e.sort(ph),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.gv=function(a,b){null==this[ch][a]&&(exptNode=new dh(a),this.iB(exptNode,function(c){this[bh][c[eh].ki("subjects")].experiments.push(c);this[ch][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){$g.d.g.call(this);delete this.Qd;this.Jd.g();delete this.Jd;D(this.projects,function(a){null!=a.subjects&&D(a.subjects,function(a){null!=a.experiments&&D(a.experiments,function(a){a.g()});a.g()});a.g()});sb(this)};v("gxnat.ProjectTree.TreeNode",dh);v("gxnat.ProjectTree.LEVEL_KEY",fh);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",hh);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",ih);v("gxnat.ProjectTree.PATH_KEY",eh);v("gxnat.ProjectTree.NEXTLEVEL_KEY",gh);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",jh);v("gxnat.ProjectTree.ISLOADING_KEY",kh);v("gxnat.ProjectTree.METADATA_KEY",lh);v("gxnat.ProjectTree.PROJ_DIRECT",ah);v("gxnat.ProjectTree.SUBJ_DIRECT",bh);v("gxnat.ProjectTree.EXPT_DIRECT",ch);v("gxnat.ProjectTree.PROJECT_METADATA",mh);v("gxnat.ProjectTree.SUBJECT_METADATA",nh);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",oh);v("gxnat.ProjectTree.compareNodeTitles",ph);v("gxnat.ProjectTree.getColumnQuery",qh);v("gxnat.ProjectTree.prototype.getBranchTitles",$g.prototype.Tz);v("gxnat.ProjectTree.prototype.getBranchUris",$g.prototype.Uz);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",$g.prototype.Rn);v("gxnat.ProjectTree.prototype.loadInitBranch",$g.prototype.kB);v("gxnat.ProjectTree.prototype.loadBranch",$g.prototype.uo);v("gxnat.ProjectTree.prototype.loadProject",$g.prototype.lB);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",$g.prototype.Wn);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",$g.prototype.Xl);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",$g.prototype.mB);v("gxnat.ProjectTree.prototype.loadSubjects",$g.prototype.nB);v("gxnat.ProjectTree.prototype.loadSubject",$g.prototype.hv);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",$g.prototype.iB);v("gxnat.ProjectTree.prototype.loadExperiments",$g.prototype.jB);
v("gxnat.ProjectTree.prototype.loadExperiment",$g.prototype.gv);v("gxnat.ProjectTree.prototype.dispose",$g.prototype.g);function rh(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=rh.prototype;f.clone=function(){return new rh(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function sh(a,b){return new rh(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof rh?(this.x+=a.x,this.y+=a.y):(this.x+=a,u(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.x*=a;this.y*=c;return this};function th(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=th.prototype;f.clone=function(){return new th(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof th?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof rh?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,u(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function uh(a,b){this.width=a;this.height=b}function vh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=uh.prototype;f.clone=function(){return new uh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.km=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=u(b)?b:a;this.width*=a;this.height*=c;return this};function wh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=wh.prototype;f.clone=function(){return new wh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.$A=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof wh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function xh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.ku=function(a){return Math.sqrt(xh(this,a))};f.jj=function(){return new uh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof rh?(this.left+=a.x,this.top+=a.y):(this.left+=a,u(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function yh(){return ic?"Webkit":hc?"Moz":E?"ms":gc?"O":null}function zh(a,b){if(b&&a in b)return a;var c=yh();return c?(c=c.toLowerCase(),c+=cb(a),!ca(b)||c in b?c:null):null};function Ah(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function N(a,b){var c=Ah(a),d=Pb(arguments,1),e=c.length+d.length;Bh(c,d);a.className=c.join(" ");return c.length==e}function Ch(a,b){var c=Ah(a),d=Pb(arguments,1),e=Dh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Bh(a,b){for(var c=0;c<b.length;c++)Ib(a,b[c])||a.push(b[c])}function Dh(a,b){return Cb(a,function(a){return!Ib(b,a)})}
function Eh(a,b,c){var d=Ah(a);r(b)?Lb(d,b):g(b)&&(d=Dh(d,b));r(c)&&!Ib(d,c)?d.push(c):g(c)&&Bh(d,c);a.className=d.join(" ")};var Fh=!E||qc(9),Gh=!hc&&!E||E&&qc(9)||hc&&pc("1.9.1"),Hh=E&&!pc("9");function Ih(a){return a?new Jh(Kh(a)):Ba||(Ba=new Jh)}function Lh(a){return r(a)?document.getElementById(a):a}function Mh(a,b,c){return Nh(document,a,b,c)}function Oh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Nh(document,"*",a,b)}function Ph(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Nh(document,"*",a,b)[0])||null}
function Nh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Ib(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Rh(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Sh?a.setAttribute(Sh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Sh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Th(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new uh(a.clientWidth,a.clientHeight)}function Uh(a){return ic||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Vh(a){return a?a.parentWindow||a.defaultView:window}function O(a,b,c){return Wh(document,arguments)}
function Wh(a,b){var c=b[0],d=b[1];if(!Fh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',La(d.name),'"');if(d.type){c.push(' type="',La(d.type),'"');var e={};xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(r(d)?c.className=d:g(d)?c.className=d.join(" "):Rh(c,d));2<b.length&&Xh(a,c,b,2);return c}function Xh(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ha(h)||ka(h)&&0<h.nodeType?e(h):D(Yh(h)?Nb(h):h,e)}}
function Zh(a,b){Xh(Kh(a),a,arguments,1)}function $h(a){for(var b;b=a.firstChild;)a.removeChild(b)}function ai(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function R(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function bi(a){return Gh&&void 0!=a.children?a.children:Cb(a.childNodes,function(a){return 1==a.nodeType})}function ci(a){return void 0!=a.firstElementChild?a.firstElementChild:di(a.firstChild)}
function ei(a){return void 0!=a.nextElementSibling?a.nextElementSibling:di(a.nextSibling)}function di(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function fi(a){return ka(a)&&1==a.nodeType}function gi(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function hi(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var h=[],k=arguments[b];k;)h.unshift(k),k=k.parentNode;d.push(h);e=Math.min(e,h.length)}h=null;for(b=0;b<e;b++){for(var k=d[0][b],l=1;l<c;l++)if(k!=d[l][b])return h;h=k}return h}function Kh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ii(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else $h(a),a.appendChild(Kh(a).createTextNode(String(b)))}var ji={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ki={IMG:" ",BR:"\n"};function li(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function mi(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function ni(a){a=a.tabIndex;return u(a)&&0<=a&&32768>a}function oi(a){if(Hh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];pi(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Hh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function qi(a){var b=[];pi(a,b,!1);return b.join("")}
function pi(a,b,c){if(!(a.nodeName in ji))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ki)b.push(ki[a.nodeName]);else for(a=a.firstChild;a;)pi(a,b,c),a=a.nextSibling}function Yh(a){if(a&&"number"==typeof a.length){if(ka(a))return"function"==typeof a.item||"string"==typeof a.item;if(ja(a))return"function"==typeof a.item}return!1}
function ri(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return si(a,function(a){return(!d||a.nodeName==d)&&(!c||r(a.className)&&Ib(a.className.split(/\s+/),c))})}function si(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Jh(a){this.ga=a||ba.document||document}f=Jh.prototype;f.N=Ih;function ti(a){return a.ga}f.a=function(a){return r(a)?this.ga.getElementById(a):a};f.vD=Jh.prototype.a;f.v=function(a,b,c){return Wh(this.ga,arguments)};f.createElement=function(a){return this.ga.createElement(a)};
f.createTextNode=function(a){return this.ga.createTextNode(String(a))};function ui(a){return"CSS1Compat"==a.ga.compatMode}function vi(a){a=a.ga;return a.parentWindow||a.defaultView}function wi(a){var b=a.ga;a=Uh(b);b=b.parentWindow||b.defaultView;return E&&pc("10")&&b.pageYOffset!=a.scrollTop?new rh(a.scrollLeft,a.scrollTop):new rh(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.Uu=ai;f.removeNode=R;f.tu=bi;f.cA=ci;f.contains=gi;
f.ai=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!mi(a)||ni(a)):mi(a)&&ni(a))&&E?(a=ja(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function xi(a,b,c){r(b)?yi(a,c,b):C(b,ua(yi,a))}function yi(a,b,c){a:if(c=ab(c),void 0===a.style[c]){var d=yh()+cb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function zi(a,b){var c=Kh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function Ai(a,b){return zi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Bi(a){return Ai(a,"position")}
function Ci(a,b,c){var d,e=hc&&(cc||lc)&&pc("1.9");b instanceof rh?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Di(d,e);a.style.top=Di(b,e)}function Ei(a){return new rh(a.offsetLeft,a.offsetTop)}function Fi(a){a=a?Kh(a):document;return!E||qc(9)||ui(Ih(a))?a.documentElement:a.body}
function Gi(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Hi(a){if(E&&!qc(8))return a.offsetParent;var b=Kh(a),c=Ai(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ai(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ii(a){for(var b=new th(0,Infinity,Infinity,0),c=Ih(a),d=c.ga.body,e=c.ga.documentElement,h=Uh(c.ga);a=Hi(a);)if(!(E&&0==a.clientWidth||ic&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=Ai(a,"overflow")){var k=Ji(a),l;l=a;if(hc&&!pc("1.9")){var n=parseFloat(zi(l,"borderLeftWidth"));if(Ki(l))var p=l.offsetWidth-l.clientWidth-n-parseFloat(zi(l,"borderRightWidth")),n=n+p;l=new rh(n,parseFloat(zi(l,"borderTopWidth")))}else l=new rh(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=Th(vi(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Ji(a){var b,c=Kh(a),d=Ai(a,"position"),e=hc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new rh(0,0),k=Fi(c);if(a==k)return h;if(a.getBoundingClientRect)b=Gi(a),a=wi(Ih(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(ic&&"fixed"==Bi(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(gc||ic&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=Hi(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,gc&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}function Li(a,b){var c=Mi(a),d=Mi(b);return new rh(c.x-d.x,c.y-d.y)}
function Ni(a){var b;if(a.getBoundingClientRect)b=Gi(a),b=new rh(b.left,b.top);else{b=wi(Ih(a));var c=Ji(a);b=new rh(c.x-b.x,c.y-b.y)}if(hc&&!pc(12)){b:{c=ab("transform");if(void 0===a.style[c]&&(c=yh()+cb(c),void 0!==a.style[c])){c=(ic?"-webkit":hc?"-moz":E?"-ms":gc?"-o":null)+"-transform";break b}c="transform"}a=(a=Ai(a,c)||Ai(a,"transform"))?(a=a.match(Oi))?new rh(parseFloat(a[1]),parseFloat(a[2])):new rh(0,0):new rh(0,0);a=new rh(b.x+a.x,b.y+a.y)}else a=b;return a}
function Mi(a){if(1==a.nodeType)return Ni(a);var b=ja(a.DG),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Lc.targetTouches&&(c=a.Lc.targetTouches[0]);return new rh(c.clientX,c.clientY)}function Pi(a,b,c){if(b instanceof uh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Qi(a,b);Ri(a,c)}function Di(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ri(a,b){a.style.height=Di(b,!0)}function Qi(a,b){a.style.width=Di(b,!0)}
function T(a){var b=Si;if("none"!=Ai(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Si(a){var b=a.offsetWidth,c=a.offsetHeight,d=ic&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new uh(b,c):(a=Gi(a),new uh(a.right-a.left,a.bottom-a.top))}function Ti(a){var b=Ji(a);a=T(a);return new wh(b.x,b.y,a.width,a.height)}
function Ui(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Vi(a,b){a.style.display=b?"":"none"}function Wi(a){E&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Ki(a){return"rtl"==Ai(a,"direction")}var Xi=hc?"MozUserSelect":ic?"WebkitUserSelect":null;
function Yi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Xi){if(b=b?"none":"",a.style[Xi]=b,c){a=0;for(var d;d=c[a];a++)d.style[Xi]=b}}else if(E||gc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Zi(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function $i(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Zi(a,c):0}function aj(a,b){if(E){var c=$i(a,b+"Left"),d=$i(a,b+"Right"),e=$i(a,b+"Top"),h=$i(a,b+"Bottom");return new th(e,d,h,c)}c=zi(a,b+"Left");d=zi(a,b+"Right");e=zi(a,b+"Top");h=zi(a,b+"Bottom");return new th(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var bj={thin:2,medium:4,thick:6};
function cj(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in bj?bj[c]:Zi(a,c)}function dj(a){if(E&&!qc(9)){var b=cj(a,"borderLeft"),c=cj(a,"borderRight"),d=cj(a,"borderTop");a=cj(a,"borderBottom");return new th(d,c,a,b)}b=zi(a,"borderLeftWidth");c=zi(a,"borderRightWidth");d=zi(a,"borderTopWidth");a=zi(a,"borderBottomWidth");return new th(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Oi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function ej(a){wc.call(this);this.bd=a;this.jb={}}w(ej,wc);var fj=[];f=ej.prototype;f.A=function(a,b,c,d){g(b)||(b&&(fj[0]=b.toString()),b=fj);for(var e=0;e<b.length;e++){var h=F(a,b[e],c||this.handleEvent,d||!1,this.bd||this);if(!h)break;this.jb[h.key]=h}return this};f.ev=function(a,b,c,d){return gj(this,a,b,c,d)};function gj(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)gj(a,b,c[k],d,e,h);else{b=Tc(b,c,d||a.handleEvent,e,h||a.bd||a);if(!b)return a;a.jb[b.key]=b}return a}
f.tb=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.tb(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.bd||this,c=Nc(c),d=!!d,b=gb(a)?a.Vn(b,c,d,e):a?(a=Pc(a))?a.Vn(b,c,d,e):null:null,b&&(Vc(b),delete this.jb[b.key]);return this};f.mg=function(){C(this.jb,Vc);this.jb={}};f.f=function(){ej.d.f.call(this);this.mg()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function hj(){}fa(hj);hj.prototype.BB=0;function ij(a){$c.call(this);this.qb=a||Ih();this.gh=jj;this.of=null;this.ha=!1;this.o=null;this.kj=void 0;this.Tf=this.Ic=this.Ra=this.pv=null;this.pD=!1}w(ij,$c);ij.prototype.KI=hj.fe();var jj=null;
function kj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function lj(a){return a.of||(a.of=":"+(a.KI.BB++).toString(36))}function mj(a,b){a.Ra&&a.Ra.Tf&&(tb(a.Ra.Tf,a.of),ub(a.Ra.Tf,b,a));a.of=b}f=ij.prototype;f.a=function(){return this.o};
f.gb=function(){this.kj||(this.kj=new ej(this));return this.kj};f.Wo=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Ra&&this.of&&nj(this.Ra,this.of)&&this.Ra!=a)throw Error("Unable to set parent component");this.Ra=a;ij.d.vw.call(this,a)};f.getParent=function(){return this.Ra};f.vw=function(a){if(this.Ra&&this.Ra!=a)throw Error("Method not supported");ij.d.vw.call(this,a)};f.N=function(){return this.qb};f.v=function(){this.o=this.qb.createElement("div")};f.n=function(a){this.fh(a)};
f.fh=function(a,b){if(this.ha)throw Error("Component already rendered");this.o||this.v();a?a.insertBefore(this.o,b||null):this.qb.ga.body.appendChild(this.o);this.Ra&&!this.Ra.ha||this.fb()};f.Db=function(a){if(this.ha)throw Error("Component already rendered");if(a&&this.He(a)){this.pD=!0;var b=Kh(a);this.qb&&this.qb.ga==b||(this.qb=Ih(a));this.ae(a);this.fb()}else throw Error("Invalid element to decorate");};f.He=function(){return!0};f.ae=function(a){this.o=a};
f.fb=function(){this.ha=!0;oj(this,function(a){!a.ha&&a.a()&&a.fb()})};f.zc=function(){oj(this,function(a){a.ha&&a.zc()});this.kj&&this.kj.mg();this.ha=!1};f.f=function(){this.ha&&this.zc();this.kj&&(this.kj.g(),delete this.kj);oj(this,function(a){a.g()});!this.pD&&this.o&&R(this.o);this.Ra=this.pv=this.o=this.Tf=this.Ic=null;ij.d.f.call(this)};f.tn=function(a,b){this.yt(a,pj(this),b)};
f.yt=function(a,b,c){if(a.ha&&(c||!this.ha))throw Error("Component already rendered");if(0>b||b>pj(this))throw Error("Child component index out of bounds");this.Tf&&this.Ic||(this.Tf={},this.Ic=[]);if(a.getParent()==this){var d=lj(a);this.Tf[d]=a;Lb(this.Ic,a)}else ub(this.Tf,lj(a),a);a.Wo(this);Ob(this.Ic,b,0,a);a.ha&&this.ha&&a.getParent()==this?(c=this.Ja(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.o||this.v(),b=qj(this,b+1),a.fh(this.Ja(),b?b.o:null)):this.ha&&!a.ha&&a.o&&a.o.parentNode&&
1==a.o.parentNode.nodeType&&a.fb()};f.Ja=function(){return this.o};f.Oe=function(){null==this.gh&&(this.gh=Ki(this.ha?this.o:this.qb.ga.body));return this.gh};f.xm=function(a){if(this.ha)throw Error("Component already rendered");this.gh=a};function pj(a){return a.Ic?a.Ic.length:0}function nj(a,b){var c;a.Tf&&b?(c=a.Tf,c=(b in c?c[b]:void 0)||null):c=null;return c}function qj(a,b){return a.Ic?a.Ic[b]||null:null}function oj(a,b,c){a.Ic&&D(a.Ic,b,c)}function rj(a,b){return a.Ic&&b?Ab(a.Ic,b):-1}
f.removeChild=function(a,b){if(a){var c=r(a)?a:lj(a);a=nj(this,c);c&&a&&(tb(this.Tf,c),Lb(this.Ic,a),b&&(a.zc(),a.o&&R(a.o)),a.Wo(null))}if(!a)throw Error("Child is not in parent component");return a};v("nrg.string",function(){});function sj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function tj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function uj(a){if(null!=a)return a="array"==ga(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function vj(a){return a.replace(/\W/g,"")}function wj(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function xj(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",sj);v("nrg.string.dirname",tj);v("nrg.string.getFileExtension",uj);v("nrg.string.fileNameMatch",function(a,b){return sj(a)===sj(b)});v("nrg.string.stripNonAlphanumeric",vj);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return vj(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",wj);v("nrg.string.mrmlColorToRgb",xj);function yj(a,b,c){wc.call(this);this.fv=a;this.cg=b||0;this.bd=c;this.RF=ta(this.iG,this)}w(yj,wc);f=yj.prototype;f.of=0;f.f=function(){yj.d.f.call(this);this.stop();delete this.fv;delete this.bd};f.start=function(a){this.stop();this.of=Yf(this.RF,ca(a)?a:this.cg)};f.stop=function(){this.Zg()&&ba.clearTimeout(this.of);this.of=0};f.Zg=function(){return 0!=this.of};f.iG=function(){this.of=0;this.fv&&this.fv.call(this.bd)};var rb={},zj=null;function Aj(a){a=ma(a);delete rb[a];qb()&&zj&&zj.stop()}function Bj(){zj||(zj=new yj(function(){Cj()},20));var a=zj;a.Zg()||a.start()}function Cj(){var a=va();C(rb,function(b){Dj(b,a)});qb()||Bj()};function Ej(){$c.call(this);this.R=Fj;this.endTime=this.startTime=null}w(Ej,$c);var Fj=0;Ej.prototype.pf=function(){return 1==this.R};Ej.prototype.hi=function(){this.lc("begin")};Ej.prototype.onEnd=function(){this.lc("end")};Ej.prototype.lc=function(a){this.dispatchEvent(a)};function Gj(a,b,c,d){Ej.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.hp=a;this.pG=b;this.duration=c;this.oy=d;this.coords=[];this.al=!1}w(Gj,Ej);f=Gj.prototype;f.cj=function(a){this.al=a};f.wf=0;
f.play=function(a){if(a||this.R==Fj)this.wf=0,this.coords=this.hp;else if(this.pf())return!1;Aj(this);this.startTime=a=va();-1==this.R&&(this.startTime-=this.duration*this.wf);this.endTime=this.startTime+this.duration;this.wf||this.hi();this.lc("play");-1==this.R&&this.lc("resume");this.R=1;var b=ma(this);b in rb||(rb[b]=this);Bj();Dj(this,a);return!0};f.stop=function(a){Aj(this);this.R=Fj;a&&(this.wf=1);Hj(this,this.wf);this.lc("stop");this.onEnd()};
f.pause=function(){this.pf()&&(Aj(this),this.R=-1,this.lc("pause"))};f.f=function(){this.R==Fj||this.stop(!1);this.lc("destroy");Gj.d.f.call(this)};f.be=function(){this.g()};function Dj(a,b){a.wf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.wf&&(a.wf=1);Hj(a,a.wf);1==a.wf?(a.R=Fj,Aj(a),a.lc("finish"),a.onEnd()):a.pf()&&a.zv()}function Hj(a,b){ja(a.oy)&&(b=a.oy(b));a.coords=Array(a.hp.length);for(var c=0;c<a.hp.length;c++)a.coords[c]=(a.pG[c]-a.hp[c])*b+a.hp[c]}f.zv=function(){this.lc("animate")};
f.lc=function(a){this.dispatchEvent(new Ij(a,this))};function Ij(a,b){Ec.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.wf=b.wf;this.state=b.R}w(Ij,Ec);var Jj={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Kj(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Lj.test(c))return b.lj=Mj(c),b.type="hex",b;a:{var d=a.match(Nj);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.lj=Oj(c),b.type="rgb",b;if(Jj&&(c=Jj[a.toLowerCase()]))return b.lj=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Pj=/#(.)(.)(.)/;
function Mj(a){if(!Lj.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Pj,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Qj(a){a=Mj(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Oj(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Rj(b.toString(16));c=Rj(c.toString(16));a=Rj(a.toString(16));return"#"+b+c+a}var Lj=/^#(?:[0-9a-f]{3}){1,2}$/i,Nj=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Rj(a){return 1==a.length?"0"+a:a}
function Sj(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Oj([Math.floor(d),Math.floor(e),Math.floor(h)])};function Tj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=Bi(a)||(c=Kh(a).documentElement);if(!c)return b;if(hc)var d=dj(c),b=b+d.left;else qc(8)&&(d=dj(c),b-=d.left);return Ki(c)?c.clientWidth-(b+a.offsetWidth):b};function Uj(a,b,c,d,e){Gj.call(this,b,c,d,e);this.element=a}w(Uj,Gj);f=Uj.prototype;f.k=ea;f.Oe=function(){ca(this.gh)||(this.gh=Ki(this.element));return this.gh};f.zv=function(){this.k();Uj.d.zv.call(this)};f.onEnd=function(){this.k();Uj.d.onEnd.call(this)};f.hi=function(){this.k();Uj.d.hi.call(this)};function Vj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Uj.apply(this,arguments)}w(Vj,Uj);
Vj.prototype.k=function(){var a=this.al&&this.Oe()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Wj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Uj.apply(this,arguments)}w(Wj,Uj);Wj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Xj(a,b,c,d,e){Uj.call(this,a,[b],[c],d,e)}w(Xj,Uj);Xj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Yj(a,b,c,d,e){Uj.call(this,a,[b],[c],d,e)}w(Yj,Uj);Yj.prototype.k=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Zj(a,b,c,d,e){u(b)&&(b=[b]);u(c)&&(c=[c]);Uj.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(Zj,Uj);Zj.prototype.k=function(){Ui(this.element,this.coords[0])};
Zj.prototype.show=function(){this.element.style.display=""};Zj.prototype.em=function(){this.element.style.display="none"};function ak(a,b,c){Zj.call(this,a,1,0,b,c)}w(ak,Zj);function bk(a,b,c){Zj.call(this,a,0,1,b,c)}w(bk,Zj);function ck(a,b,c){Zj.call(this,a,1,0,b,c)}w(ck,Zj);ck.prototype.hi=function(){this.show();ck.d.hi.call(this)};ck.prototype.onEnd=function(){this.em();ck.d.onEnd.call(this)};function dk(a,b,c){Zj.call(this,a,0,1,b,c)}w(dk,Zj);dk.prototype.hi=function(){this.show();dk.d.hi.call(this)};
function ek(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Uj.apply(this,arguments)}w(ek,Uj);ek.prototype.ks=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};ek.prototype.k=function(){this.ks()};function fk(){Ej.call(this);this.Tb=[]}w(fk,Ej);fk.prototype.add=function(a){Ib(this.Tb,a)||(this.Tb.push(a),F(a,"finish",this.Av,!1,this))};fk.prototype.remove=function(a){Lb(this.Tb,a)&&Uc(a,"finish",this.Av,!1,this)};fk.prototype.f=function(){D(this.Tb,function(a){a.g()});this.Tb.length=0;fk.d.f.call(this)};function gk(){fk.call(this);this.pu=0}w(gk,fk);
gk.prototype.play=function(a){if(0==this.Tb.length)return!1;if(a||this.R==Fj)this.pu=0,this.hi();else if(this.pf())return!1;this.lc("play");-1==this.R&&this.lc("resume");var b=-1==this.R&&!a;this.startTime=va();this.endTime=null;this.R=1;D(this.Tb,function(c){b&&-1!=c.R||c.play(a)});return!0};gk.prototype.pause=function(){this.pf()&&(D(this.Tb,function(a){a.pf()&&a.pause()}),this.R=-1,this.lc("pause"))};
gk.prototype.stop=function(a){D(this.Tb,function(b){b.R==Fj||b.stop(a)});this.R=Fj;this.endTime=va();this.lc("stop");this.onEnd()};gk.prototype.Av=function(){this.pu++;this.pu==this.Tb.length&&(this.endTime=va(),this.R=Fj,this.lc("finish"),this.onEnd())};function hk(){fk.call(this);this.jf=0}w(hk,fk);
hk.prototype.play=function(a){if(0==this.Tb.length)return!1;if(a||this.R==Fj)this.jf<this.Tb.length&&this.Tb[this.jf].R!=Fj&&this.Tb[this.jf].stop(!1),this.jf=0,this.hi();else if(this.pf())return!1;this.lc("play");-1==this.R&&this.lc("resume");this.startTime=va();this.endTime=null;this.R=1;this.Tb[this.jf].play(a);return!0};hk.prototype.pause=function(){this.pf()&&(this.Tb[this.jf].pause(),this.R=-1,this.lc("pause"))};
hk.prototype.stop=function(a){this.R=Fj;this.endTime=va();if(a)for(a=this.jf;a<this.Tb.length;++a){var b=this.Tb[a];b.R==Fj&&b.play();b.R==Fj||b.stop(!0)}else this.jf<this.Tb.length&&this.Tb[this.jf].stop(!1);this.lc("stop");this.onEnd()};hk.prototype.Av=function(){this.pf()&&(this.jf++,this.jf<this.Tb.length?this.Tb[this.jf].play():(this.endTime=va(),this.R=Fj,this.lc("finish"),this.onEnd()))};v("nrg.convert",function(){});function ik(a){if(!g(a)&&!u(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function jk(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function kk(a){if(!r(a)&&!u(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)}
function lk(a){var b={};C(a,function(a,d){isNaN(a)?r(a)&&(b[d]=a):b[d]=a});return b}function mk(a){var b={};C(a,function(a,d){r(a)?0<a.length&&(b[d]=a):b[d]=a});return b}v("nrg.convert.pct",function(a){if(!u(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",ik);v("nrg.convert.remap1D",jk);v("nrg.convert.toInt",kk);
v("nrg.convert.toFloatArray",function(a){if(!r(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");D(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!ka(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!r(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;D(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",lk);v("nrg.convert.filterZeroLengthStrings",mk);v("nrg.style",function(){});var nk="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function ok(a){return a.getBoundingClientRect()}
function pk(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return kk(a.style[b]);var d=Li(a,a.parentNode),d={left:kk(a.style.left)||d.x,top:kk(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?Li(a,a.parentNode):Li(a,document.body),
d={left:kk(a.style.left)||d.x,top:kk(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c}
function qk(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function rk(a,b){a&&b&&(a.style||(a.style={}),xi(a,b),D("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Da(b[c],"%")&&(a.style[c]=ik(b[c]))}))}var sk="is_hovered_"+B();
function tk(a,b,c,d,e,h){function k(){a[sk]=!1;Ch(a,b);null!=h&&h()}function l(){a[sk]=!0;N(a,b);null!=e&&e()}F(a,"mouseenter",l);F(a,"mouseleave",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}v("nrg.style.cssProperties",nk);v("nrg.style.removeClassesThatContain",function(a,b){var c=Ah(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)Ch(a,d[e])});v("nrg.style.absolutePosition",ok);v("nrg.style.dims",pk);
v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});v("nrg.style.getComputedStyle",function(a,b){if(b&&r(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=nk);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return qk(c)});v("nrg.style.parseIntNumericalProperties",qk);v("nrg.style.setStyle",rk);v("nrg.style.IS_HOVERED",sk);
v("nrg.style.setHoverClass",tk);v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function uk(a){return 1-Math.pow(1-a,3)};function vk(){}v("nrg.fx",vk);function wk(a,b,c){void 0===b&&(b=500);xk(a,b,1,c)}function yk(a,b,c){void 0===b&&(b=500);xk(a,0,0,function(){xk(a,b,1,c)})}function zk(a,b,c){void 0===b&&(b=500);xk(a,b,0,c)}function xk(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:a.style.opacity=1);var h=new Zj(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);I(h);delete h});h.play()}
function Ak(a,b,c){D(a,function(a){a.style.opacity=0});b=u(b)?b:500;c=u(c)?c:250;var d=new Wf(0);d.addEventListener(Xf,function(){elt=a[0];wk(elt,b);1==a.length?(d.stop(),d.g()):(a=Pb(a,1),d.setInterval(c))});d.start()}vk.animGenStyles="left top width height opacity background-color color z-index".split(" ");function Bk(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Vj(a,[b.left,b.top],[c.left,c.top],d,uk)}
function Ck(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Wj(a,[b.width,b.height],[c.width,c.height],d,uk)}function Dk(a,b,c,d){if("opacity"in b||"opacity"in c)if(D([b,c],function(a){"opacity"in a||(a.opacity=1);u(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Zj(a,b.opacity,c.opacity,d)}
function Ek(a,b,c,d){if("visibility"in b||"visibility"in c)if(D([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new dk(a,d):new ck(a,d)}
function Fk(a,b,c,d){if("background-color"in b||"background-color"in c){D([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Kj(b["background-color"]),h=Kj(c["background-color"]);if(e.lj!==h.lj)return new ek(a,Qj(e.lj),Qj(h.lj),d,uk)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function Gk(a){var b=T(a),c=Ei(a);return{"background-color":Ai(a,"backgroundColor"),width:b.width,left:c.x,top:c.y,height:b.height}}
function Hk(a,b){this.HF=a;this.iM=b}function Ik(a){return mk(lk(a))}function Jk(a){var b=T(a),c=Ei(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Kk(a,b){var c=Jk(a),c=Ik(c),d=Jk(b),e=Ik(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new Hk(c,e)}
function Lk(a,b,c,d){var e=[];D(vk.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(Bk(a,b,c,d));break;case "height":e.push(Ck(a,b,c,d));break;case "opacity":e.push(Dk(a,b,c,d));break;case "visibility":e.push(Ek(a,b,c,d));break;case "background-color":e.push(Fk(a,b,c,d))}});var h=[];D(e,function(a){null!=a&&h.push(a)});delete e;return h}
function Mk(a,b,c,d){var e=new gk;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Nk(a,b,c){function d(){rk(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;F(a,"mouseover",function(){rk(a,{opacity:b})});F(a,"mouseout",d);d()}
function Ok(a,b,c,d,e,h,k){if(!g(b)){var l=[];D(a,function(){l.push(b)});b=l}g(c)||(l=[],D(a,function(){l.push(c)}),c=l);d=u(d)?d:500;var n=[];D(a,function(a,e){n.push(Dk(a,{opacity:b[e]},{opacity:c[e]},d))});Mk(n,e,h,k)}v("nrg.fx.fadeIn",wk);v("nrg.fx.fadeInFromZero",yk);v("nrg.fx.fadeOut",zk);v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);xk(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",xk);v("nrg.fx.animGenStyles",vk.animGenStyles);
v("nrg.fx.generateAnim_Slide",Bk);v("nrg.fx.generateAnim_Resize",Ck);v("nrg.fx.generateAnim_Fade",Dk);v("nrg.fx.generateAnim_RemoveAddFade",Ek);v("nrg.fx.generateAnim_BgColorTrans",Fk);v("nrg.fx.TransitionDims",Hk);v("nrg.fx.filterTransitionStyles",Ik);v("nrg.fx.getTransitionStyles",Jk);v("nrg.fx.generateTransitionDims",Kk);v("nrg.fx.getAnimationDims",Gk);v("nrg.fx.generateAnimations",Lk);v("nrg.fx.parallelAnimate",Mk);
v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new hk;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",Nk);v("nrg.fx.sequentialFadeIn",Ak);v("nrg.fx.parallelFade",Ok);function Pk(a){return a.slice(a.lastIndexOf("/")+1)}function Qk(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Da(b,"/")?b+d:b+("/"+d);return b};function Rk(){}v("nrg.dom",Rk);function Sk(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!r(b))throw new TypeError("String expected!",b);if(c&&!r(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Tk(e,{src:b?Qk(b,bb(e)+"."+c):""});return d}function Uk(a,b){var c=O("img",{src:b});c.style.VO="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Zh(a,c);c.onclick=c.parentNode.onclick}
function Tk(a,b,c,d){if(!r(a))throw new TypeError("String expected!");if(b&&!ka(b))throw new TypeError("Object expected!");if(null!=c&&!u(c))throw new TypeError("Number expected!");if(null!=d&&!u(d))throw new TypeError("Number expected!");a=Vk("div",a,b?b:{});b&&b.src&&Uk(a,b.src);Nk(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Vk(a,b,c){if(!r(a))throw new TypeError("String expected!",a);if(!r(b))throw new TypeError("String expected!",b);if(c&&!ka(c))throw new TypeError("Object expected!");c=c&&ka(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:bb(b.replace(/\./g,"-").toLowerCase());return O(a,c)}v("nrg.dom.createBasicHoverButtonSet",Sk);v("nrg.dom.createDivChildImage",Uk);v("nrg.dom.createBasicHoverButton",Tk);v("nrg.dom.createUniqueDom",Vk);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Rk.aQ(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function V(a){ij.call(this,a);this.fx();this.o=Vk("div",this.constructor.ID_PREFIX,a);this.qq();Wk(this)}w(V,ij);v("nrg.ui.Component",V);f=V.prototype;f.fx=function(){if(this instanceof V){this.constructor.d&&this.constructor.d instanceof V&&V.prototype.fx.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.Pm)||(this.constructor.Pm=Xk(this.constructor.ID_PREFIX),this.constructor.Ec=this.constructor.Pm)}};
function Xk(a){return a.toLowerCase().replace(/\./g,"-")}f.qq=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)V.prototype.qq.bind(a)(),a=a.constructor.d;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=vb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=wj(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Wk(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Xk(c.constructor.ID_PREFIX),Kb(b,d),c=c.constructor.d;D(b,function(a){null!=this.a()&&N(this.a(),a)}.bind(a))}f.pj="";f.qC=function(a){this.pj=a};f.hH=function(){return this.pj};f.xF=function(a){null==this.kp&&(this.kp=[]);this.kp.push(a)};
f.Kh=function(){if(null==this.la)this.la=T(this.a());else if(this.la.height!==this.u.height||this.la.width!==this.u.width)this.la=this.u;if(null==this.Ko)this.Ko=Ei(this.a());else if(this.Ko.x!==this.sq.x||this.Ko.y!==this.sq.y)this.Ko=this.sq;this.u=T(this.a());this.sq=Ei(this.a())};f.k=function(){this.Kh()};f.n=function(a){this.ha&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):V.d.n.call(this,a)};f.Fz=!1;f.gG=function(){return this.Fz};
f.f=function(){V.d.f.call(this);null!=this.kp&&(D(this.kp,function(a){I(a);a.g()}),Jb(this.kp));I(this);I(this.a());R(this.a());this.Ko=this.la=this.sq=this.u=this.pj=null;this.Fz=!0};f.iu=function(a){null!=a&&(a=g(a)?a:[a],D(a,function(a){I(a);a.g()}),Jb(a))};f.wq=function(a){null!=a&&(I(a),a.g())};f.xq=function(a){C(a,function(b,c){I(b);R(b);delete a[c]});sb(a)};f.Kn=function(a){C(a,function(b,c){I(b);b.g();delete a[c]});sb(a)};v("nrg.ui.Component.animationLengths",{SM:150,kN:300,XN:600});
v("nrg.ui.Component.idPrefixToCssClass",Xk);v("nrg.ui.Component.prototype.validateIdPrefix",V.prototype.fx);v("nrg.ui.Component.prototype.imagePrefix",V.prototype.pj);v("nrg.ui.Component.prototype.createCssMap",V.prototype.qq);v("nrg.ui.Component.prototype.setImagePrefix",V.prototype.qC);v("nrg.ui.Component.prototype.getImagePrefix",V.prototype.hH);v("nrg.ui.Component.prototype.addSubComponent",V.prototype.xF);v("nrg.ui.Component.prototype.calcDims",V.prototype.Kh);
v("nrg.ui.Component.prototype.updateStyle",V.prototype.k);v("nrg.ui.Component.prototype.render",V.prototype.n);v("nrg.ui.Component.prototype.disposeInternalCalled",V.prototype.gG);v("nrg.ui.Component.prototype.disposeAnimations",V.prototype.iu);v("nrg.ui.Component.prototype.disposeAnimationQueue",V.prototype.wq);v("nrg.ui.Component.prototype.disposeElementMap",V.prototype.xq);v("nrg.ui.Component.prototype.disposeComponentMap",V.prototype.Kn);v("nrg.ui.Component.prototype.disposeInternal",V.prototype.f);var Yk;function Zk(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function $k(a,b,c){ha(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Yk||(Yk={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Yk,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function al(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function bl(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]}function cl(a,b){return a.classList?a.classList.contains(b):Ib(bl(a),b)}function dl(a,b){a.classList?a.classList.add(b):cl(a,b)||(a.className+=0<a.className.length?" "+b:b)}function el(a,b){if(a.classList)D(b,function(b){dl(a,b)});else{var c={};D(bl(a),function(a){c[a]=!0});D(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function fl(a,b){a.classList?a.classList.remove(b):cl(a,b)&&(a.className=Cb(bl(a),function(a){return a!=b}).join(" "))}function gl(a,b){a.classList?D(b,function(b){fl(a,b)}):a.className=Cb(bl(a),function(a){return!Ib(b,a)}).join(" ")}function hl(a,b,c){c?dl(a,b):fl(a,b)};function il(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!hc;default:return 166>a.keyCode||183<a.keyCode}}
function jl(a,b,c,d,e){if(!(E||ic&&pc("525")))return!0;if(cc&&e)return kl(a);if(e&&!d)return!1;u(b)&&(b=ll(b));if(!c&&(17==b||18==b||cc&&91==b))return!1;if(ic&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return!(E&&qc(9));case 27:return!ic}return kl(a)}
function kl(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||ic&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function ll(a){if(hc)a=ml(a);else if(cc&&ic)a:switch(a){case 93:a=91;break a}return a}
function ml(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function nl(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,Zk(a,k.Ug()),dl(a,"goog-zippy-header"),ol(k,a),a&&k.cB.A(a,"keydown",k.Fr))}$c.call(this);this.qb=e||Ih();this.ok=this.qb.a(a)||null;this.Bq=this.qb.a(d||null);this.nc=(this.cv=ja(b)?b:null)||!b?null:this.qb.a(b);this.Tg=!0==c;this.cB=new ej(this);this.qv=new ej(this);var k=this;h(this.ok);h(this.Bq);this.ac(this.Tg)}w(nl,$c);var pl={jx:"action",Ox:"toggle"};f=nl.prototype;f.zk=!0;f.f=function(){nl.d.f.call(this);Bc(this.cB);Bc(this.qv)};
f.Ug=function(){return"tab"};f.Ja=function(){return this.nc};f.toggle=function(){this.ac(!this.Tg)};f.ac=function(a){this.nc?Vi(this.nc,a):a&&this.cv&&(this.nc=this.cv());this.nc&&dl(this.nc,"goog-zippy-content");this.Bq?(Vi(this.ok,!a),Vi(this.Bq,a)):ql(this,a);this.Tg=a;this.dispatchEvent(new rl(pl.Ox,this))};function ql(a,b){a.ok&&(hl(a.ok,"goog-zippy-expanded",b),hl(a.ok,"goog-zippy-collapsed",!b),$k(a.ok,"expanded",b))}
f.Vo=function(a){this.zk!=a&&((this.zk=a)?(ol(this,this.ok),ol(this,this.Bq)):this.qv.mg())};function ol(a,b){b&&a.qv.A(b,"click",a.Er)}f.Fr=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Ec(pl.jx,this)),a.preventDefault(),a.stopPropagation()};f.Er=function(){this.toggle();this.dispatchEvent(new Ec(pl.jx,this))};function rl(a,b){Ec.call(this,a,b)}w(rl,Ec);function sl(a,b,c,d){d=d||Ih();var e=d.v("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.Cq=e;this.gf=null;nl.call(this,a,b,c,void 0,d);a=this.Tg;this.Cq.style.display=a?"":"none";ql(this,a)}w(sl,nl);f=sl.prototype;f.Pi=500;f.EF=uk;
f.ac=function(a){if(this.Tg!=a||this.gf){"none"==this.Cq.style.display&&(this.Cq.style.display="");var b=this.Ja().offsetHeight,c=0;this.gf?(a=this.Tg,I(this.gf),this.gf.stop(!1),c=parseInt(this.Ja().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;ql(this,a);this.gf=new Gj([0,c],[0,a?b:0],this.Pi,this.EF);F(this.gf,["begin","animate","end"],this.OJ,!1,this);F(this.gf,"end",ta(this.PJ,this,a));this.gf.play(!1)}};f.OJ=function(a){var b=this.Ja();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.PJ=function(a){a&&(this.Ja().style.marginTop="0");I(this.gf);this.Tg=a;this.gf=null;a||(this.Cq.style.display="none");this.dispatchEvent(new rl(pl.Ox,this))};function tl(a,b,c,d){V.call(this);this.Mb=a;this.Ib=O("div",{id:"ZippyHeader_"+a+"_"+B(),"class":tl.CSS.Cp});this.Ib[ul]=a.toLowerCase();null!=d?d(b,this.Ib):b.appendChild(this.Ib);this.Zn=O("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":tl.CSS.OD});this.Zw();this.Ib.appendChild(this.Zn);this.Rh=O("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":tl.CSS.LD},"+");this.Ib.appendChild(this.Rh);this.Vf=O("div",{id:"ZippyContent_"+a+"_"+B(),"class":tl.CSS.sh});b.appendChild(this.Vf);this.gc=new this.tD(this.Ib,
this.Vf,null!=c?c:!1);this.gc instanceof sl&&(this.gc.Pi=500);this.YL=ma(this);this.Rc={};F(this.Ib,"mouseover",this.aL.bind(this));F(this.Ib,"mouseout",this.$K.bind(this));vl(this)}w(tl,V);v("nrg.ui.ZippyNode",tl);tl.ID_PREFIX="nrg.ui.ZippyNode";var wl={QM:"a",FM:"b",DD:"c"};tl.CSS_SUFFIX={Cp:"header",xx:"header-mouseover",OD:"header-label",LD:"expandicon",px:"expandicon-mouseover",sh:"content",sh:"content-sub",cE:"loading-holder",eE:"loading-text",dE:"loading-image"};
function xl(a,b,c){var d=a[0];r(d)&&null!=b&&(d=b.Rc[d]);d.gc.Pi=200;1<a.length&&!d.gc.Tg&&Tc(d,"a",function(){d.gc.Pi=500;xl(Pb(a,1),d,c)});d.ac(!0);null!=c&&c(d,a)}var ul=B();f=tl.prototype;f.tD=sl;f.Zw=function(a){a=null!=a?a:45;var b=this.Zn,c=this.Mb.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.Mb?Wa(this.Mb,a+60):c.length==this.Mb.length?Wa(this.Mb,a):this.Mb;return b};f.ke=null;f.Ou=function(){return null!=this.ke};f.rr=!1;f.mJ=function(){return this.rr};
f.iw=function(a,b){var c=function(){R(this.ke);this.ke=null}.bind(this);a?(this.rr=!0,xk(this.ke,500,0,function(){c();null!=b&&b()},1)):c()};f.xy=function(){if(null==this.ke){this.ke=O("div",{id:"LoadingHolder_"+B()});N(this.ke,tl.CSS.cE);var a=O("div");N(a,tl.CSS.eE);a.innerHTML="Loading...";var b=O("img");N(b,tl.CSS.dE);b.src=serverRoot+"/images/viewer/xiv/ui/other/loading.gif";Zh(this.ke,a);Zh(this.ke,b);Zh(this.Vf,this.ke);this.ke.style.opacity=0;wk(this.ke,300);this.rr=!1}};f.Id=function(){return this.Mb};
f.BH=function(){return this.Rc};f.bH=function(){return this.Ib};f.MG=function(){return this.Vf};f.cH=function(){return this.Zn};f.rI=function(){return this.gc};f.ac=function(a){this.gc.ac(a)};f.CL=function(a){this.tD=!0===a?sl:nl};function vl(a){F(a.gc,mb(pl),function(a){null!=this.gc.gf?this.dispatchEvent({type:"c"}):a.target.Tg?this.Xv():(this.Rh.innerHTML="+",rk(this.Rh,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"b"}))}.bind(a))}
f.Xv=function(){this.Rh.innerHTML="-";rk(this.Rh,{"margin-left":"-1em"});this.dispatchEvent({type:"a"})};f.aL=function(){N(this.Ib,tl.CSS.xx);N(this.Rh,tl.CSS.px)};f.$K=function(){Ch(this.Ib,tl.CSS.xx);Ch(this.Rh,tl.CSS.px)};
f.f=function(){tl.d.f.call(this);R(this.Zn);delete this.Zn;R(this.Rh);delete this.Rh;I(this.Ib);R(this.Ib);delete this.Ib;R(this.Vf);delete this.Vf;null!=this.gc&&(this.gc.g(),I(this.gc),delete this.gc);null!=this.ke&&(this.iw(),delete this.ke);this.Kn(this.Rc);delete this.Rc;delete this.YL;delete this.Mb};v("nrg.ui.ZippyNode.ID_PREFIX",tl.ID_PREFIX);v("nrg.ui.ZippyNode.EventType",wl);v("nrg.ui.ZippyNode.CSS_SUFFIX",tl.CSS_SUFFIX);v("nrg.ui.ZippyNode.NODE_STORT_TAG",ul);
v("nrg.ui.ZippyNode.serialExpand",xl);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",tl.prototype.Zw);v("nrg.ui.ZippyNode.prototype.getTitle",tl.prototype.Id);v("nrg.ui.ZippyNode.prototype.addLoadingImage",tl.prototype.UO);v("nrg.ui.ZippyNode.prototype.getNodes",tl.prototype.BH);v("nrg.ui.ZippyNode.prototype.getHeader",tl.prototype.bH);v("nrg.ui.ZippyNode.prototype.getContentHolder",tl.prototype.MG);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",tl.prototype.cH);
v("nrg.ui.ZippyNode.prototype.getZippy",tl.prototype.rI);v("nrg.ui.ZippyNode.prototype.setExpanded",tl.prototype.ac);v("nrg.ui.ZippyNode.prototype.setAnimated",tl.prototype.CL);v("nrg.ui.ZippyNode.prototype.hasLoadingIndicator",tl.prototype.Ou);v("nrg.ui.ZippyNode.prototype.addLoadingIndicator",tl.prototype.xy);v("nrg.ui.ZippyNode.prototype.removeLoadingIndicator",tl.prototype.iw);v("nrg.ui.ZippyNode.prototype.loadingIndicatorRemoving",tl.prototype.mJ);
v("nrg.ui.ZippyNode.prototype.disposeInternal",tl.prototype.f);M.vd={};M.vd.zd=function(){wc.call(this)};w(M.vd.zd,wc);v("gxnat.vis.VisNode",M.vd.zd);f=M.vd.zd.prototype;f.Sf="Generic";f.is=function(a){this.Sf=a};f.HG=function(){return this.Sf};f.Dm="";f.bp=function(a){this.Dm=a};f.dI=function(){return this.Dm};f.Mb=null;f.qe=function(a){this.Mb=a};f.Id=function(){return this.Mb};f.g=function(){M.vd.zd.d.g.call(this);this.Sf&&delete this.Sf;this.Dm&&delete this.Dm;this.Mb&&delete this.Mb};v("gxnat.vis.VisNode.prototype.setCategory",M.vd.zd.prototype.is);
v("gxnat.vis.VisNode.prototype.getCategory",M.vd.zd.prototype.HG);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",M.vd.zd.prototype.bp);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",M.vd.zd.prototype.dI);v("gxnat.vis.VisNode.prototype.setTitle",M.vd.zd.prototype.qe);v("gxnat.vis.VisNode.prototype.getTitle",M.vd.zd.prototype.Id);v("gxnat.vis.VisNode.prototype.dispose",M.vd.zd.prototype.g);function yl(a){this.Kp=new JSZip(a)}w(yl,wc);v("gxnat.Zip",yl);function zl(a,b,c,d){if(!Ea(a,".zip")){if(!Ea(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=M.Rx}var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new yl(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}yl.prototype.Zf=function(){return this.Kp.files};
yl.prototype.jv=function(a,b){var c=0,d=this.Zf(),e=lb(d);C(d,function(d){d.asArrayBuffer();a(d.name,d.asArrayBuffer());c==e-1&&null!=b&&b();c++}.bind(this))};yl.prototype.g=function(){yl.d.g.call(this);this.jv(function(a){this.Kp.remove(a)}.bind(this));sb(this.Kp);delete this.Kp};v("gxnat.Zip.prototype.getFiles",yl.prototype.Zf);v("gxnat.Zip.prototype.loopFiles",yl.prototype.jv);v("gxnat.Zip.getFilesAsZip",zl);v("gxnat.Zip.prototype.dispose",yl.prototype.g);v("gxnat.slicerNode",function(){});
function Al(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function Bl(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",Al);v("gxnat.slicerNode.toFloatArray",Bl);function Cl(){ma(this)}v("gxnat.slicerNode.Node",Cl);function Dl(a,b){ma(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;D(Al(b),function(b){D(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.Jn=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=Bl(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=Bl(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(Dl,Cl);v("gxnat.slicerNode.Display",Dl);function El(a,b){Dl.call(this,a,b)}w(El,Dl);v("gxnat.slicerNode.Mesh",El);function Fl(a,b){if(a instanceof Fl)this.nd=a.Tw();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!u(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.nd=Nb(a);else if(a instanceof uh)this.nd=Gl(a.height,a.width);else if(u(a)&&u(b)&&0<a&&0<b)this.nd=Gl(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.td=new uh(this.nd[0].length,this.nd.length)}
function Hl(a,b,c){for(var d=0;d<a.jj().height;d++)for(var e=0;e<a.jj().width;e++)b.call(c,a.nd[d][e],d,e,a)}function Il(a,b){var c=new Fl(a.jj());Hl(a,function(d,e,h){c.nd[e][h]=b.call(void 0,d,e,h,a)});return c}function Gl(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=Fl.prototype;f.add=function(a){if(!vh(this.td,a.jj()))throw Error("Matrix summation is only supported on arrays of equal size");return Il(this,function(b,c,d){return b+a.nd[c][d]})};
f.Rl=function(a,b){if(this.td.width!=a.td.width||this.td.height!=a.td.height)return!1;for(var c=b||0,d=0;d<this.td.height;d++)for(var e=0;e<this.td.width;e++)if(!(Math.abs(this.nd[d][e]-a.nd[d][e])<=(c||1E-6)))return!1;return!0};f.jj=function(){return this.td};
f.multiply=function(a){if(a instanceof Fl){if(this.td.width!=a.jj().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return Jl(this,a)}if(u(a))return Kl(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.Cc=function(a){if(!vh(this.td,a.jj()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return Il(this,function(b,c,d){return b-a.nd[c][d]})};
f.Tw=function(){return this.nd};f.toString=function(){var a=0;Hl(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];D(this.nd,function(c){b.push("[ ");D(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Ll(a,b,c){return 0<=b&&b<a.td.height&&0<=c&&c<a.td.width}
function Jl(a,b){var c=new Fl(a.td.height,b.jj().width);Hl(c,function(a,e,h){for(var k=a=0;k<this.td.width;k++)a+=(Ll(this,e,k)?this.nd[e][k]:0)*(Ll(b,k,h)?b.nd[k][h]:0);if(!Ll(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.td.height+","+c.td.width+")");c.nd[e][h]=a},a);return c}function Kl(a,b){return Il(a,function(a){return a*b})};function Ml(a,b,c){Dl.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=Il(new Fl(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.Dw=new Nl(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.hr=b;this.Bs=this.Jn?parseInt(this.Jn.getAttribute("upperThreshold")):null;this.tr=this.Jn?parseInt(this.Jn.getAttribute("lowerThreshold")):null;this.visible=c}w(Ml,Dl);v("gxnat.slicerNode.Volume",Ml);function Nl(a,b,c){var d=new Fl([[0],[0],[0],[1]]);D([a,b,c],function(a,b){var c=a.multiply(d).Tw(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.vL=c;break;case 1:this.WF=c;break;case 2:this.KF=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",Nl);function Ol(a,b){ma(this);this.backgroundColor=xj(a);this.Xy=xj(b)}w(Ol,Cl);v("gxnat.slicerNode.BackgroundColor",Ol);function Pl(a,b,c,d,e,h,k,l){ma(this);this.element=a;this.kq=b;this.backgroundColor=c;this.gB=d;this.un=e;this.sM=h;this.xJ=k;this.uG=l}w(Pl,Cl);v("gxnat.slicerNode.SceneView",Pl);function Ql(a){wc.call(this);a instanceof Pl?(this.un=a.un,this.kq=a.kq,this.backgroundColor=a.backgroundColor,this.gB=a.gB):a instanceof Ml?(this.origin=a.origin||[0,0,0],this.Bs=a.Bs||1E4,this.tr=a.tr||-1E4,this.hx=a.hx||!1,this.hr=a.hr||!1,this.Dw=a.Dw||null,a.ah&&(this.dB=a.labelMapFile,this.hJ=a.colorTableFile)):a instanceof El&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Ql,wc);v("gxnat.vis.RenderProperties",Ql);Ql.prototype.g=function(){Ql.d.g.call(this);sb(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Ql.prototype.g);function Rl(a){M.vd.zd.call(this);this.Sd=a||null}w(Rl,M.vd.zd);v("gxnat.vis.Renderable",Rl);Rl.prototype.xw=function(a){this.Sd=a instanceof Ql?a:new Ql(a)};Rl.prototype.NH=function(){return this.Sd};Rl.prototype.g=function(){Rl.d.g.call(this);this.Sd&&(this.Sd.g(),delete this.Sd)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Rl.prototype.xw);v("gxnat.vis.Renderable.prototype.getRenderProperties",Rl.prototype.NH);v("gxnat.vis.Renderable.prototype.dispose",Rl.prototype.g);function Sl(a,b){Rl.call(this,b);this.gj=a||[];null!=b&&this.xw(b)}w(Sl,Rl);v("gxnat.vis.Viewable",Sl);f=Sl.prototype;f.Sh=null;f.UG=function(){return this.Sh};f.EL=function(a){return this.Sh=a};
f.lC=function(a,b,c){null!=this.Sh&&sb(this.Sh);this.Sh={};var d=this.Zf();D(d,function(a){this.Sh[a]=null}.bind(this));var e,h,k;a.jv(function(a,b){p=0;for(m=d.length;p<m;p++)if(k=a.split("/"),h=k[k.length-1],"."!=h[0]&&(e=d[p],Ea(e,h)))if(null!=c)for(var p=0,m=c.length;p<m;p++)Ea(e,c[p])&&(this.Sh[e]=b,p=m);else{this.Sh[e]=b;break}}.bind(this),b);a.g()};f.Zf=function(){return this.gj};f.mL=function(a){window.cP.log("REMOVING FILE",a);Lb(this.gj,a)};
f.Oi=function(a,b){null==this.gj&&(this.gj=[]);g(a)||(a=[a]);D(a,function(a){null!=b&&null==b(a)||this.gj.push(a)}.bind(this))};f.g=function(){Sl.d.g.call(this);this.gj&&(Jb(this.gj),delete this.gj)};v("gxnat.vis.Viewable.prototype.getFileData",Sl.prototype.UG);v("gxnat.vis.Viewable.prototype.setFileData",Sl.prototype.EL);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Sl.prototype.lC);v("gxnat.vis.Viewable.prototype.getFiles",Sl.prototype.Zf);v("gxnat.vis.Viewable.prototype.removeFile",Sl.prototype.mL);
v("gxnat.vis.Viewable.prototype.addFiles",Sl.prototype.Oi);v("gxnat.vis.Viewable.prototype.dispose",Sl.prototype.g);function Tl(a){Rl.call(this);null!=a?g(a)||(a=[a]):a=[];this.yd=a}w(Tl,Rl);v("gxnat.vis.ViewableGroup",Tl);Tl.prototype.Iy=function(a){return this.yd.push(a)};Tl.prototype.CG=function(){var a=[];D(this.yd,function(b){a=Mb(a,b.Zf())});return a};Tl.prototype.BA=function(){return this.yd};Tl.prototype.g=function(){Tl.d.g.call(this);D(this.yd,function(a){g(a)?D(a,function(a){a.g()}):a instanceof Sl&&a.g()});delete this.yd};v("gxnat.vis.ViewableGroup.prototype.addViewable",Tl.prototype.Iy);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Tl.prototype.CG);v("gxnat.vis.ViewableGroup.prototype.getViewables",Tl.prototype.BA);v("gxnat.vis.ViewableGroup.prototype.dispose",Tl.prototype.g);function Ul(){M.vd.zd.call(this);this.Sc=[]}w(Ul,M.vd.zd);v("gxnat.vis.ViewableTree",Ul);function Vl(a,b,c){this.jL=a;this.ZL=b;this.sG=c}v("gxnat.vis.ViewableTree.metadataCollection",Vl);f=Ul.prototype;f.Ur=null;f.Am=null;f.Ul=null;f.orientation=null;f.Eb=function(){return this.orientation};f.Yo=function(a){this.Ur=a};f.$o=function(a){this.Am=a};f.Uo=function(a){this.Ul=a};f.oI=function(){return this.Sc};
f.g=function(){Ul.d.g.call(this);null!=this.Ur&&(sb(this.Ur),delete this.LP);null!=this.Am&&(sb(this.Am),delete this.XP);null!=this.Ul&&(sb(this.Ul),delete this.kP);null!=this.Sc&&(D(this.Sc,function(a){a.g()}),delete this.Sc);null!=this.cD&&Jb(this.cD);delete this.cD;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Vl);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Ul.prototype.Ur);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Ul.prototype.Am);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Ul.prototype.Ul);v("gxnat.vis.ViewableTree.prototype.orientation",Ul.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Ul.prototype.Eb);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Ul.prototype.Yo);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Ul.prototype.$o);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Ul.prototype.Uo);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Ul.prototype.oI);
v("gxnat.vis.ViewableTree.prototype.dispose",Ul.prototype.g);function Wl(a,b,c){Ul.call(this);this.is(a);null!=c&&null!=b&&(this.Nn=c,this.li=Zg(this.Nn,b.URI,"experiments"),this.Ep=new Ug(this.li));this.no=b;this.oe={}}w(Wl,Ul);v("gxnat.vis.AjaxViewableTree",Wl);var Xl={ID:"Scan ID",Name:"Name",type:"Scan Type"},Yl={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Zl={label:"Session"};function $l(a,b,c){M.di(a,function(a){g(a);D(a,function(a){b(a)});c&&c()})}f=Wl.prototype;f.Th=null;f.fj=!1;
f.mC=function(a,b){null==this.Th&&(this.Th={});this.Th[a]=b};f.xA=function(){var a=0;C(this.Th,function(b,c){a+=this.bA(c)}.bind(this));return a};f.bA=function(a){return parseInt(this.Th[a].Size,10)};f.VG=function(){return this.Th};f.XG=function(){return this.fj};f.nC=function(a){this.fj=a};f.SG=function(){return this.Nn};f.MH=function(){return this.li};f.RH=function(){return this.oe};f.DC=function(a){this.oe=a};f.ym=function(){C(Xl,function(a,b){null!=this.no[b]&&(this.oe[a]=this.no[b])}.bind(this))};
f.Yo=function(a){Wl.d.Yo.call(this,a)};f.$o=function(a){Wl.d.$o.call(this,a);C(Yl,function(a,c){null!=this.Am[c]&&(this.oe[a]=this.Am[c])}.bind(this))};f.Uo=function(a){Wl.d.Uo.call(this,a);C(Zl,function(a,c){null!=this.Ul[c]&&(this.oe[a]=this.Ul[c])}.bind(this))};f.YG=function(){return this.Pn};f.ur=function(a){a=a[this.On];if(!Da(a,"/"))return this.li+"!"+a};
f.hj=function(a){if(this.fj)a();else{var b=0,c=0,d="",e;M.di(this.li+this.Dq,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.ur(e))this.mC(d,e),this.Oi(d,this.Wl);a();this.fj=!0}.bind(this))}};f.Wl=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.vk=function(){};function am(a,b,c,d){var e=new Ug(a);$l(a+"/"+b.prototype.Pn,function(a){new b(a,e.ki("experiments"),c)},d)}
f.g=function(){Wl.d.g.call(this);null!=this.Th&&(sb(this.Th),delete this.Th);delete this.fj;sb(this.oe);delete this.oe;null!=this.no&&(sb(this.no),delete this.no);null!=this.Ep&&(this.Ep.g(),delete this.Ep);delete this.Nn;delete this.li};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Xl);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Yl);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Zl);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",$l);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",am);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Wl.prototype.fj);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Wl.prototype.mC);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Wl.prototype.xA);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Wl.prototype.bA);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Wl.prototype.VG);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Wl.prototype.XG);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Wl.prototype.nC);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Wl.prototype.SG);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Wl.prototype.MH);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Wl.prototype.RH);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Wl.prototype.DC);v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Wl.prototype.ym);
v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Wl.prototype.Yo);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Wl.prototype.$o);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Wl.prototype.Uo);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Wl.prototype.YG);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Wl.prototype.ur);v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Wl.prototype.hj);
v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Wl.prototype.Wl);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Wl.prototype.vk);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Wl.prototype.g);function bm(a,b,c,d){this.files=a;this.yJ=b;this.Rw=c;this.su=d}v("xiv.sampleData.Sample",bm);function cm(){wc.call(this);this.Cg=[]}w(cm,wc);v("xiv.sampleData.SampleCollection",cm);cm.prototype.OH=function(){return this.Cg};cm.prototype.g=function(){cm.d.g.call(this);D(this.Cg,function(a){sb(a)});delete this.Cg};v("xiv.sampleData.SampleCollection.Samples",cm.Cg);v("xiv.sampleData.SampleCollection.getSamples",cm.OH);v("xiv.sampleData.SampleCollection.dispose",cm.g);function dm(){cm.call(this);this.Cg.push(this.nw)}w(dm,cm);v("xiv.sampleData.SlicerScenes",dm);
dm.prototype.nw=new bm("src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/oneView_brain_2.mrml;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm.nrrd.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/5%3a%20t1_mpr_1mm_p2_pos50-label.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/F.fcsv;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/brain.vtk;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/BrainMesh_Underside.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/Top.png".split(";"),{Name:"Example Slicer Scene",
Type:"Slicer Scene"},"src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function em(){}v("xiv",em);em.MODE="live";v("xiv.SAMPLE_DATA_PATH","xiv/sample-data");v("xiv.SAMPLE_SCAN_PREFIX","xiv/sample-data/scans/");function fm(a,b,c){Wl.call(this,"Scans",a,b);this.oe["Total Frames"]=0;c&&c(this)}w(fm,Wl);v("gxnat.vis.Scan",fm);var gm=["dcm","dicom"];f=fm.prototype;f.Pn="scans";f.Dq="/files";f.On="URI";
f.ym=function(){fm.d.ym.call(this);if(null!=this.Uk["parameters/orientation"]){var a;a:{switch(this.Uk["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.oe.Orientation=a;this.orientation=this.oe.Orientation}null!=this.Uk["parameters/acqType"]&&(this.oe["Acq. Type"]=this.Uk["parameters/acqType"])};
f.hj=function(a){this.fj?a():M.di(this.Ep.originalUrl,function(b){this.Uk=b.items[0].data_fields;this.ym();fm.d.hj.call(this,function(){this.vk();a()}.bind(this))}.bind(this))};f.Wl=function(a){a=fm.d.Wl.call(this,a);if(null!=a){for(var b=0,c=gm.length;b<c;b++)if(Ea(a,"."+gm[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.Oi=function(a){this.is("Scans");if(0==this.Sc.length){var b=new Tl;b.qe("scan");b.is("scans");this.Sc.push(b)}0==this.Sc[0].yd.length&&this.Sc[0].Iy(new Sl);this.Sc[0].yd[0].Oi(a,this.Wl);this.oe["Total Frames"]=this.Sc[0].yd[0].Zf().length};f.ur=function(a){return Zg(this.Nn,a[this.On],"experiments")};f.vk=function(a){if(this.Sc&&this.Sc[0]){var b=this.Sc[0].yd[0].Zf().sort(M.Cr);this.bp(b[Math.floor(b.length/2)]+M.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){fm.d.g.call(this);null!=this.Uk&&sb(this.Uk);delete this.Uk};v("gxnat.vis.Scan.acceptableFileTypes",gm);v("gxnat.vis.Scan.prototype.folderQuerySuffix",fm.prototype.Pn);v("gxnat.vis.Scan.prototype.fileQuerySuffix",fm.prototype.Dq);v("gxnat.vis.Scan.prototype.fileContentsKey",fm.prototype.On);v("gxnat.vis.Scan.prototype.setViewableMetadata",fm.prototype.ym);v("gxnat.vis.Scan.prototype.getFileList",fm.prototype.hj);v("gxnat.vis.Scan.prototype.fileFilter",fm.prototype.Wl);
v("gxnat.vis.Scan.prototype.addFiles",fm.prototype.Oi);v("gxnat.vis.Scan.prototype.makeFileUrl",fm.prototype.ur);v("gxnat.vis.Scan.prototype.getThumbnailImage",fm.prototype.vk);v("gxnat.vis.Scan.prototype.dispose",fm.prototype.g);function hm(a,b,c){$c.call(this);this.target=a;this.handle=b||a;this.qr=c||new wh(NaN,NaN,NaN,NaN);this.ga=Kh(a);this.yc=new ej(this);zc(this,ua(Bc,this.yc));F(this.handle,["touchstart","mousedown"],this.gp,!1,this)}w(hm,$c);var im=E||hc&&pc("1.9.3");f=hm.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.Jw=0;f.Kw=0;f.Oh=0;f.Hd=0;f.Kc=!0;f.aj=!1;f.UA=0;f.Ar=0;f.MI=!1;f.al=!1;f.cj=function(a){this.al=a};f.gb=function(){return this.yc};function jm(a,b){a.qr=b||new wh(NaN,NaN,NaN,NaN)}
f.AC=function(a){this.ds=a};f.sc=function(a){this.Kc=a};f.f=function(){hm.d.f.call(this);Uc(this.handle,["touchstart","mousedown"],this.gp,!1,this);this.yc.mg();im&&this.ga.releaseCapture();this.handle=this.target=null};function km(a){ca(a.gh)||(a.gh=Ki(a.target));return a.gh}
f.gp=function(a){var b="mousedown"==a.type;if(!this.Kc||this.aj||b&&!Jc(a))this.dispatchEvent("earlycancel");else{lm(a);if(0==this.UA)if(this.dispatchEvent(new mm("start",this,a.clientX,a.clientY)))this.aj=!0,a.preventDefault();else return;else a.preventDefault();var b=this.ga,c=b.documentElement,d=!im;this.yc.A(b,["touchmove","mousemove"],this.EI,d);this.yc.A(b,["touchend","mouseup"],this.dj,d);im?(c.setCapture(!1),this.yc.A(c,"losecapture",this.dj)):this.yc.A(Vh(b),"blur",this.dj);E&&this.MI&&this.yc.A(b,
"dragstart",Fc);this.ds&&this.yc.A(this.ds,"scroll",this.qm,d);this.clientX=this.Jw=a.clientX;this.clientY=this.Kw=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Oh=this.al?Tj(this.target):this.target.offsetLeft;this.Hd=this.target.offsetTop;this.Zv=wi(Ih(this.ga));this.Ar=va()}};
f.dj=function(a,b){this.yc.mg();im&&this.ga.releaseCapture();if(this.aj){lm(a);this.aj=!1;var c=nm(this,this.Oh),d=om(this,this.Hd);this.dispatchEvent(new mm("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function lm(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.ra(a.Lc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.ra(a.Lc.changedTouches[0],a.currentTarget)}
f.EI=function(a){if(this.Kc){lm(a);var b=(this.al&&km(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.aj){var d=this.Jw-this.clientX,e=this.Kw-this.clientY;if(d*d+e*e>this.UA)if(this.dispatchEvent(new mm("start",this,a.clientX,a.clientY)))this.aj=!0;else{this.lk||this.dj(a);return}}c=pm(this,b,c);b=c.x;c=c.y;this.aj&&this.dispatchEvent(new mm("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(qm(this,a,b,c),a.preventDefault())}};function pm(a,b,c){var d=wi(Ih(a.ga));b+=d.x-a.Zv.x;c+=d.y-a.Zv.y;a.Zv=d;a.Oh+=b;a.Hd+=c;b=nm(a,a.Oh);a=om(a,a.Hd);return new rh(b,a)}f.qm=function(a){var b=pm(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;qm(this,a,b.x,b.y)};function qm(a,b,c,d){a.eu(c,d);a.dispatchEvent(new mm("drag",a,b.clientX,b.clientY,0,c,d))}
function nm(a,b){var c=a.qr,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function om(a,b){var c=a.qr,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.eu=function(a,b){this.al&&km(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.dg=function(){return this.aj};
function mm(a,b,c,d,e,h,k,l){Ec.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(h)?h:b.Oh;this.top=ca(k)?k:b.Hd;this.mu=b;this.lG=!!l}w(mm,Ec);yb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function rm(){this.fw="";this.BE=sm;this.Dz=null}rm.prototype.Zz=function(){return this.Dz};rm.prototype.toString=function(){return"SafeHtml{"+this.fw+"}"};function tm(a){if(a instanceof rm&&a.constructor===rm&&a.BE===sm)return a.fw;eb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}yb("action","cite","data","formaction","href","manifest","poster","src");yb("link","script","style");var sm={};function um(a,b){var c=new rm;c.fw=a;c.Dz=b;return c}var vm=um("",0);function wm(a,b){$c.call(this);this.bd=new ej(this);this.pw(a||null);b&&(this.Im=b)}w(wm,$c);f=wm.prototype;f.o=null;f.IF=!0;f.Vy=null;f.Wy=null;f.nm=!1;f.ML=!1;f.$u=-1;f.JI=!1;f.nG=!0;f.Im="toggle_display";f.a=function(){return this.o};f.pw=function(a){if(this.nm)throw Error("Can not change this state of the popup while showing.");this.o=a};f.HC=function(a,b){this.zm=a;this.fm=b};f.gb=function(){return this.bd};f.sa=function(){return this.nm};
f.ba=function(a){this.zm&&this.zm.stop();this.fm&&this.fm.stop();a?this.Bw():this.gm()};f.ne=ea;
f.Bw=function(){if(!this.nm&&this.Bv()){if(!this.o)throw Error("Caller must call setElement before trying to show the popup");this.ne();var a=Kh(this.o);this.JI&&this.bd.A(a,"keydown",this.VJ,!0);if(this.IF)if(this.bd.A(a,"mousedown",this.FB,!0),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.bd.A(a,"mousedown",this.FB,!0);this.bd.A(a,"deactivate",this.EB)}else this.bd.A(a,"blur",
this.EB);"toggle_display"==this.Im?(this.o.style.visibility="visible",Vi(this.o,!0)):"move_offscreen"==this.Im&&this.ne();this.nm=!0;this.$u=va();this.zm?(Tc(this.zm,"end",this.KB,!1,this),this.zm.play()):this.KB()}};f.gm=function(a){if(!this.nm||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.bd&&this.bd.mg();this.nm=!1;va();this.fm?(Tc(this.fm,"end",ua(this.kz,a),!1,this),this.fm.play()):this.kz(a);return!0};
f.kz=function(a){"toggle_display"==this.Im?this.ML?Yf(this.RA,0,this):this.RA():"move_offscreen"==this.Im&&(this.o.style.top="-10000px");this.Jv(a)};f.RA=function(){this.o.style.visibility="hidden";Vi(this.o,!1)};f.Bv=function(){return this.dispatchEvent("beforeshow")};f.KB=function(){this.dispatchEvent("show")};f.Jv=function(a){this.dispatchEvent({type:"hide",target:a})};f.FB=function(a){a=a.target;gi(this.o,a)||xm(this,a)||this.Wy&&!gi(this.Wy,a)||150>va()-this.$u||this.gm(a)};
f.VJ=function(a){27==a.keyCode&&this.gm(a.target)&&(a.preventDefault(),a.stopPropagation())};f.EB=function(a){if(this.nG){var b=Kh(this.o);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||gi(this.o,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>va()-this.$u||this.gm()}};function xm(a,b){return Eb(a.Vy||[],function(a){return b===a||gi(a,b)})}f.f=function(){wm.d.f.call(this);this.bd.g();Bc(this.zm);Bc(this.fm);delete this.o;delete this.bd;delete this.Vy};function ym(a){$c.call(this);this.o=a;a=E?"focusout":"blur";this.jJ=F(this.o,E?"focusin":"focus",this,!E);this.kJ=F(this.o,a,this,!E)}w(ym,$c);ym.prototype.handleEvent=function(a){var b=new Hc(a.Lc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};ym.prototype.f=function(){ym.d.f.call(this);Vc(this.jJ);Vc(this.kJ);delete this.o};function zm(a,b){ij.call(this,b);this.oM=!!a;this.ro=null}w(zm,ij);f=zm.prototype;f.qu=null;f.Dc=!1;f.Ge=null;f.od=null;f.sg=null;f.Ht=!1;f.W=function(){return"goog-modalpopup"};f.Uh=function(){return this.Ge};f.v=function(){zm.d.v.call(this);var a=this.a(),b=Ia(this.W()).split(" ");el(a,b);li(a,!0);Vi(a,!1);Am(this);Bm(this)};
function Am(a){if(a.oM&&!a.od){var b;b=a.N().v("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.od=b;a.od.className=a.W()+"-bg";Vi(a.od,!1);Ui(a.od,0)}a.Ge||(a.Ge=a.N().v("div",a.W()+"-bg"),Vi(a.Ge,!1))}function Bm(a){a.sg||(a.sg=a.N().createElement("span"),Vi(a.sg,!1),li(a.sg,!0),a.sg.style.position="absolute")}f.bC=function(){this.Ht=!1};f.He=function(a){return!!a&&"DIV"==a.tagName};
f.ae=function(a){zm.d.ae.call(this,a);a=Ia(this.W()).split(" ");el(this.a(),a);Am(this);Bm(this);Vi(this.a(),!1)};f.fb=function(){this.od&&ai(this.od,this.a());ai(this.Ge,this.a());zm.d.fb.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.sg,a.nextSibling);this.qu=new ym(ti(this.N()));this.gb().A(this.qu,"focusin",this.$J);Cm(this,!1)};f.zc=function(){this.sa()&&this.ba(!1);Bc(this.qu);zm.d.zc.call(this);R(this.od);R(this.Ge);R(this.sg)};
f.ba=function(a){a!=this.Dc&&(this.Pk&&this.Pk.stop(),this.Jl&&this.Jl.stop(),this.Ok&&this.Ok.stop(),this.Il&&this.Il.stop(),this.ha&&Cm(this,a),a?this.Bw():this.gm())};function Cm(a,b){if(b){a.dm||(a.dm=[]);for(var c=a.N(),c=c.tu(c.ga.body),d=0;d<c.length;d++){var e=c[d];e==a.o||al(e,"hidden")||($k(e,"hidden",!0),a.dm.push(e))}}else if(a.dm){for(d=0;d<a.dm.length;d++)a.dm[d].removeAttribute("aria-hidden");a.dm=null}}f.HC=function(a,b,c,d){this.Pk=a;this.Ok=b;this.Jl=c;this.Il=d};
f.Bw=function(){if(this.dispatchEvent("beforeshow")){try{this.ro=ti(this.N()).activeElement}catch(a){}this.lw();this.ne();this.gb().A(vi(this.N()),"resize",this.lw);Dm(this,!0);this.focus();this.Dc=!0;this.Pk&&this.Jl?(Tc(this.Pk,"end",this.Nr,!1,this),this.Jl.play(),this.Pk.play()):this.Nr()}};
f.gm=function(){if(this.dispatchEvent("beforehide")){this.gb().tb(vi(this.N()),"resize",this.lw);this.Dc=!1;this.Ok&&this.Il?(Tc(this.Ok,"end",this.Do,!1,this),this.Il.play(),this.Ok.play()):this.Do();try{var a=ti(this.N()).body,b=ti(this.N()).activeElement||a;this.ro&&b==a&&this.ro!=a&&this.ro.focus()}catch(c){}this.ro=null}};function Dm(a,b){a.od&&Vi(a.od,b);a.Ge&&Vi(a.Ge,b);Vi(a.a(),b);Vi(a.sg,b)}f.Nr=function(){this.dispatchEvent("show")};f.Do=function(){Dm(this,!1);this.dispatchEvent("hide")};
f.sa=function(){return this.Dc};f.focus=function(){this.Pz()};f.lw=function(){this.od&&Vi(this.od,!1);this.Ge&&Vi(this.Ge,!1);var a=ti(this.N()),b=Th(Vh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.od&&(Vi(this.od,!0),Pi(this.od,c,a));this.Ge&&(Vi(this.Ge,!0),Pi(this.Ge,c,a))};
f.ne=function(){var a=ti(this.N()),b=Vh(a)||window;if("fixed"==Bi(this.a()))var c=a=0;else c=wi(this.N()),a=c.x,c=c.y;var d=T(this.a()),b=Th(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);Ci(this.a(),a,c);Ci(this.sg,a,c)};f.$J=function(a){this.Ht?this.bC():a.target==this.sg&&Yf(this.Pz,0,this)};f.Pz=function(){try{E&&ti(this.N()).body.focus(),this.a().focus()}catch(a){}};
f.f=function(){Bc(this.Pk);this.Pk=null;Bc(this.Ok);this.Ok=null;Bc(this.Jl);this.Jl=null;Bc(this.Il);this.Il=null;zm.d.f.call(this)};function Em(a,b,c){zm.call(this,b,c);this.Fd=a||"modal-dialog";this.$=Fm(Fm(new Gm,Hm,!0),Im,!1,!0)}w(Em,zm);f=Em.prototype;f.Iz=!0;f.Pu=!0;f.nv=!0;f.zq=!0;f.hq=.5;f.Mb="";f.Jc=null;f.Pa=null;f.ju=!1;f.ud=null;f.Nd=null;f.ys=null;f.se=null;f.Uf=null;f.Yc=null;f.ew="dialog";f.W=function(){return this.Fd};f.qe=function(a){this.Mb=a;this.Nd&&ii(this.Nd,a)};f.Id=function(){return this.Mb};f.Wk=function(a){this.Jc=a=um(a,null);this.Uf&&(this.Uf.innerHTML=tm(a))};
f.getContent=function(){return null!=this.Jc?tm(this.Jc):""};f.ij=function(){return this.ew};f.Ja=function(){this.a()||this.n();return this.Uf};f.wA=function(){this.a()||this.n();return this.ud};f.Uh=function(){this.a()||this.n();return Em.d.Uh.call(this)};function Jm(a,b){a.hq=b;if(a.a()){var c=a.Uh();c&&Ui(c,a.hq)}}function Km(a,b){b!=a.nv&&Lm(a,b)}function Lm(a,b){a.nv=b;if(a.ha){var c=a.N(),d=a.Uh(),e=a.od;b?(e&&c.Uu(e,a.a()),c.Uu(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.sa()&&Cm(a,b)}
f.ls=function(a){this.zq=a;this.To(a&&this.ha)};f.To=function(a){var b=Ia(this.Fd+"-title-draggable").split(" ");this.a()&&(a?el(this.ud,b):gl(this.ud,b));a&&!this.Pa?(this.Pa=new hm(this.a(),this.ud),el(this.ud,b),F(this.Pa,"start",this.ms,!1,this)):!a&&this.Pa&&(this.Pa.g(),this.Pa=null)};
f.v=function(){Em.d.v.call(this);var a=this.a(),b=this.N();this.ud=b.v("div",this.Fd+"-title",this.Nd=b.v("span",{className:this.Fd+"-title-text",id:lj(this)},this.Mb),this.se=b.v("span",this.Fd+"-title-close"));Zh(a,this.ud,this.Uf=b.v("div",this.Fd+"-content"),this.Yc=b.v("div",this.Fd+"-buttons"));Zk(this.Nd,"heading");Zk(this.se,"button");li(this.se,!0);$k(this.se,"label",Mm);this.ys=this.Nd.id;Zk(a,this.ij());$k(a,"labelledby",this.ys||"");this.Jc&&(this.Uf.innerHTML=tm(this.Jc));Vi(this.se,
this.Pu);this.$&&(a=this.$,a.o=this.Yc,a.n());Vi(this.Yc,!!this.$);Jm(this,this.hq)};
f.ae=function(a){Em.d.ae.call(this,a);a=this.a();var b=this.Fd+"-content";this.Uf=Mh(null,b,a)[0];this.Uf||(this.Uf=this.N().v("div",b),this.Jc&&(this.Uf.innerHTML=tm(this.Jc)),a.appendChild(this.Uf));var b=this.Fd+"-title",c=this.Fd+"-title-text",d=this.Fd+"-title-close";(this.ud=Mh(null,b,a)[0])?(this.Nd=Mh(null,c,this.ud)[0],this.se=Mh(null,d,this.ud)[0]):(this.ud=this.N().v("div",b),a.insertBefore(this.ud,this.Uf));this.Nd?(this.Mb=oi(this.Nd),this.Nd.id||(this.Nd.id=lj(this))):(this.Nd=O("span",
{className:c,id:lj(this)}),this.ud.appendChild(this.Nd));this.ys=this.Nd.id;$k(a,"labelledby",this.ys||"");this.se||(this.se=this.N().v("span",d),this.ud.appendChild(this.se));Vi(this.se,this.Pu);b=this.Fd+"-buttons";(this.Yc=Mh(null,b,a)[0])?(this.$=new Gm(this.N()),this.$.Db(this.Yc)):(this.Yc=this.N().v("div",b),a.appendChild(this.Yc),this.$&&(a=this.$,a.o=this.Yc,a.n()),Vi(this.Yc,!!this.$));Jm(this,this.hq)};
f.fb=function(){Em.d.fb.call(this);this.gb().A(this.a(),"keydown",this.ii).A(this.a(),"keypress",this.ii);this.gb().A(this.Yc,"click",this.RJ);this.To(this.zq);this.gb().A(this.se,"click",this.MK);var a=this.a();Zk(a,this.ij());""!==this.Nd.id&&$k(a,"labelledby",this.Nd.id);this.nv||Lm(this,!1)};f.zc=function(){this.sa()&&this.ba(!1);this.To(!1);Em.d.zc.call(this)};f.ba=function(a){a!=this.sa()&&(this.ha||this.n(),Em.d.ba.call(this,a))};f.Nr=function(){Em.d.Nr.call(this);this.dispatchEvent(Nm)};
f.Do=function(){Em.d.Do.call(this);this.dispatchEvent(Om);this.ju&&this.g()};f.ms=function(){var a=ti(this.N()),b=Th(Vh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=T(this.a());"fixed"==Bi(this.a())?jm(this.Pa,new wh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):jm(this.Pa,new wh(0,0,c-d.width,a-d.height))};f.MK=function(){Pm(this)};
function Pm(a){if(a.Pu){var b=a.$,c=b&&b.Ot;c?(b=b.get(c),a.dispatchEvent(new Qm(c,b))&&a.ba(!1)):a.ba(!1)}}f.f=function(){this.Yc=this.se=null;Em.d.f.call(this)};function Rm(a,b){a.$=b;if(a.Yc){if(a.$){var c=a.$;c.o=a.Yc;c.n()}else a.Yc.innerHTML=tm(vm);Vi(a.Yc,!!a.$)}}f.RJ=function(a){a:{for(a=a.target;null!=a&&a!=this.Yc;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.$.get(a);this.dispatchEvent(new Qm(a,b))&&this.ba(!1)}};
f.ii=function(a){var b=!1,c=!1,d=this.$,e=a.target;if("keydown"==a.type)if(this.Iz&&27==a.keyCode){var h=d&&d.Ot,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new Qm(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.Ht=!0;try{this.sg.focus()}catch(k){}Yf(this.bC,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.se)Pm(this);else if(d){var l=d.fu,n;if(n=l)a:{n=d.o.getElementsByTagName("BUTTON");for(var p=
0,m;m=n[p];p++)if(m.name==l||m.id==l){n=m;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new Qm(h,String(d.get(h)))))}else e==this.se&&32==a.keyCode&&Pm(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.ba(!1)};function Qm(a,b){this.type=Sm;this.key=a;this.caption=b}w(Qm,Ec);var Sm="dialogselect",Om="afterhide",Nm="aftershow";function Gm(a){this.qb=a||Ih();jd.call(this)}var Tm,Um;
w(Gm,jd);f=Gm.prototype;f.Fd="goog-buttonset";f.fu=null;f.o=null;f.Ot=null;f.set=function(a,b,c,d){jd.prototype.set.call(this,a,b);c&&(this.fu=a);d&&(this.Ot=a);return this};function Fm(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.n=function(){if(this.o){this.o.innerHTML=tm(vm);var a=Ih(this.o);this.forEach(function(b,c){var d=a.v("button",{name:c},b);c==this.fu&&(d.className=this.Fd+"-default");this.o.appendChild(d)},this)}};
f.Db=function(a){if(a&&1==a.nodeType){this.o=a;a=this.o.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=oi(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==Vm);h&&dl(c,this.Fd+"-default")}}};f.a=function(){return this.o};f.N=function(){return this.qb};var Vm="cancel",Mm="Close",Hm={key:"ok",caption:"OK"},Im={key:Vm,caption:"Cancel"},Wm={key:"yes",caption:"Yes"},Xm={key:"no",caption:"No"},Ym={key:"save",caption:"Save"},Zm={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Tm=Fm(new Gm,Hm,!0,!0),Fm(Fm(new Gm,Hm,!0),Im,!1,!0),Um=Fm(Fm(new Gm,Wm,!0),Xm,!1,!0),Fm(Fm(Fm(new Gm,Wm),Xm,!0),Im,!1,!0),Fm(Fm(Fm(new Gm,Zm),Ym),Im,!0,!0));function $m(){Em.call(this);this.Iz=!1}w($m,Em);v("nrg.ui.Dialog",$m);$m.ID_PREFIX="nrg.ui.Dialog";$m.CSS={Ix:"nrg-ui-dialog-overlay",Bp:"nrg-ui-dialog-background",Fj:"nrg-ui-dialog-closebutton",ED:"nrg-ui-dialog-closebutton-image",HE:"nrg-ui-dialog-subtext",hl:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",sh:"nrg-ui-dialog-content",zD:"nrg-ui-dialog-buttons"};f=$m.prototype;f.zq=!0;f.Pa=null;f.Qk=null;
f.uw=function(a){this.Fm.style.visibility="hidden";this.Ng.style.visibility="hidden";null!=a&&tk(this.a(),a,null,null,function(){this.Fm.style.visibility="visible";this.Ng.style.visibility="visible"}.bind(this),function(){this.Fm.style.visibility="hidden";this.Ng.style.visibility="hidden"}.bind(this))};f.Gy=function(a){N(this.Fm,a)};f.uF=function(a){N(this.Jc,a)};f.sF=function(a){N(this.Ng.parentNode,a)};f.tF=function(a){N(this.Ng,a)};f.ry=function(a){N(this.nq,a)};f.rF=function(a){N(this.Mt,a)};
function an(a){a.nq=Oh("modal-dialog-title-close",a.a())[0];N(a.nq,$m.CSS.Fj);a.Ng=O("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":$m.CSS.ED});a.Ng.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.nq.appendChild(a.Ng);F(a.Ng,"click",function(a){this.ba(!this.sa());this.dispatchEvent({type:"f"});a.stopPropagation()}.bind(a))}f.FF=function(){var a=this.a(),b=bk(a,600),c=ak(a,600),d=bk(a,600),a=ak(a,600);this.HC(b,c,d,a)};
f.Br=function(a,b,c,d){var e=this.a(),h=T(e.parentNode),k=T(e);c=null!=c?c:0;"left"==a?e.style.left=0+c+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=0+(null!=d?d:0)+"px")};f.$d=function(){var a=this.a(),b=T(this.a().parentNode);if(null!=this.Uh()){var c=this.Uh();0==c.opacity?R(c):rk(c,{width:b.width,height:b.height,"z-index":199})}var c=T(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);Ci(a,d,e)};
f.ls=function(a){this.zq=a;this.To(a&&this.ha)};f.To=function(a){var b=Ia(this.W()+"-title-draggable").split(" "),c=this.wA();this.a()&&(a?el(c,b):gl(c,b));a&&!this.Pa?(this.Pa=new hm(this.a(),this.ud),el(c,b),F(this.Pa,"start",this.ms,!1,this)):!a&&this.Pa&&(this.Pa.g(),this.Pa=null)};f.kD=function(){this.ms()};f.$z=function(){return null!=this.Pa?this.Pa.qr:null};
f.ms=function(){var a=ti(this.N()),b=Vh(a)||window;if(null!=this.a()){var a=T(this.a().parentNode),b=Th(b||window),c=T(this.a());"fixed"==Bi(this.a())?jm(this.Pa,new wh(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):jm(this.Pa,new wh(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))}};f.ty=function(a){var b=O("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":$m.CSS.wi});null==this.fo&&(this.fo=[]);this.fo.push(b);this.Ja().appendChild(b);null!=a&&(b.src=a);return b};
f.bk=function(a){var b=O("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":$m.CSS.hl},a);null==this.lh&&(this.lh=[]);this.lh.push(b);b.innerHTML=a||"";this.Ja().appendChild(b);return b};f.zt=function(a){var b=O("div",{id:"ErrorSub_"+B(),"class":$m.CSS.HE});b.innerHTML=a;this.Ja().appendChild(b);return b};f.CH=function(){return this.a()};
f.n=function(a){if(!this.ha)$m.d.n.call(this,a);else if(null!=a&&this.a().parentNode!=a){Zh(a,this.a());return}N(this.a(),"nrg-ui-dialog");this.Fm=Oh("modal-dialog-title",this.a())[0];this.Jc=Oh("modal-dialog-content",this.a())[0];this.Mt=Oh("modal-dialog-buttons",this.a())[0];this.Ng=null;an(this);N(this.Mt,$m.CSS.zD);N(this.Fm,$m.CSS.TITLE);N(this.Jc,$m.CSS.sh);$m.d.ls.call(this,!1);this.ls(!0)};
f.ba=function(a){null!=this.a()&&(null==this.Qk&&(this.Qk=Ei(this.a())),this.sa()&&!1==a?(this.Qk=Ei(this.a()),$m.d.ba.call(this,a)):this.sa()||!0!=a||($m.d.ba.call(this,a),Ci(this.a(),this.Qk)))};
f.mw=function(){var a=this.a(),b=this.Ja(),c=0,d=0,e=0,h=0,k=a.style.overflow;a.style.overflow="visible";null!=this.lh&&D(this.lh,function(a){e=a.scrollWidth;h=a.scrollHeight;c=e>c?e:c;d=h>d?h:d;Pi(a,e,h)});null!=k?a.style.overflow=k:a.style.removeProperty("overflow");Pi(b,c,d);b=T(b);Pi(a,b.width+20,b.height+20)};f.ZH=function(){return this.lh};
f.f=function(){$m.d.f.call(this);delete this.Mt;delete this.Fm;delete this.Jc;delete this.Ng;delete this.nq;null!=this.NB&&(R(this.NB),delete this.NB);null!=this.lh&&(D(this.lh,function(a){R(a);delete a}),delete this.lh);null!=this.fo&&(D(this.fo,function(a){R(a);delete a}),delete this.fo);null!=this.Qk&&(sb(this.Qk),delete this.Qk)};v("nrg.ui.Dialog.ID_PREFIX",$m.ID_PREFIX);v("nrg.ui.Dialog.EventType",{vN:"d",CLOSED:"e",EM:"f"});v("nrg.ui.Dialog.prototype.setMouseoverClass",$m.prototype.uw);
v("nrg.ui.Dialog.prototype.addTitleClass",$m.prototype.Gy);v("nrg.ui.Dialog.prototype.addContentClass",$m.prototype.uF);v("nrg.ui.Dialog.prototype.addCloseButtonClass",$m.prototype.sF);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",$m.prototype.tF);v("nrg.ui.Dialog.prototype.addCloseSpanClass",$m.prototype.ry);v("nrg.ui.Dialog.prototype.addButtonsClass",$m.prototype.rF);v("nrg.ui.Dialog.prototype.applyFadeTransitions",$m.prototype.FF);v("nrg.ui.Dialog.prototype.moveToCorner",$m.prototype.Br);
v("nrg.ui.Dialog.prototype.center",$m.prototype.$d);v("nrg.ui.Dialog.prototype.setDraggable",$m.prototype.ls);v("nrg.ui.Dialog.prototype.updateLimits",$m.prototype.kD);v("nrg.ui.Dialog.prototype.addImage",$m.prototype.ty);v("nrg.ui.Dialog.prototype.addText",$m.prototype.bk);v("nrg.ui.Dialog.prototype.addSubText",$m.prototype.zt);v("nrg.ui.Dialog.prototype.getOverlay",$m.prototype.CH);v("nrg.ui.Dialog.prototype.render",$m.prototype.n);v("nrg.ui.Dialog.prototype.setVisible",$m.prototype.ba);
v("nrg.ui.Dialog.prototype.getTextElements",$m.prototype.ZH);v("nrg.ui.Dialog.prototype.resizeToContents",$m.prototype.mw);v("nrg.ui.Dialog.prototype.getDraggerLimits",$m.prototype.$z);v("nrg.ui.Dialog.prototype.disposeInternal",$m.prototype.f);function bn(){$m.call(this);Rm(this,null)}w(bn,$m);v("nrg.ui.ErrorDialog",bn);bn.ID_PREFIX="nrg.ui.ErrorDialog";bn.CSS={Ix:"nrg-ui-errordialog",wi:"nrg-ui-errordialog-image",hl:"nrg-ui-errordialog-text"};bn.prototype.Sl=null;bn.prototype.bk=function(a){bn.d.bk.call(this,a);a=this.lh;N(a[a.length-1],bn.CSS.hl)};bn.prototype.n=function(a){bn.d.n.call(this,a);N(this.a(),bn.CSS.Ix);null==this.Sl&&(this.Sl=this.ty(serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png"),N(this.Sl,bn.CSS.wi),this.$d())};
bn.prototype.f=function(){bn.d.f.call(this);null!=this.Sl.parentNode&&R(this.Sl);delete this.Sl};v("nrg.ui.ErrorDialog.ID_PREFIX",bn.ID_PREFIX);v("nrg.ui.ErrorDialog.CSS",bn.CSS);v("nrg.ui.ErrorDialog.prototype.addText",bn.prototype.bk);v("nrg.ui.ErrorDialog.prototype.disposeInternal",bn.prototype.f);function en(a,b,c,d){ma(this);this.url=a;this.document=b;this.files=d}w(en,Cl);v("gxnat.slicerNode.Mrml",en);function fn(a,b){ma(this);this.file=a;this.me=b}w(fn,Cl);v("gxnat.slicerNode.Displayable",fn);function gn(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function hn(a,b,c){ma(this);this.position=a;this.nM=b;this.focus=c}w(hn,Cl);v("gxnat.slicerNode.Camera",hn);function jn(a,b,c,d,e,h){ma(this);this.position=a;this.color=b;this.name=h}w(jn,Cl);v("gxnat.slicerNode.Annotations",jn);function kn(){ma(this)}w(kn,Cl);v("gxnat.slicerNode.Layout",kn);M.H={};v("gxnat.slicerUtils",M.H);M.H.qx="/scripts/viewer/xiv/vis/GenericColorTable.txt";M.H.Mz=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ea(a[c],".mrml")&&b.push(a[c]);return b};M.H.Du=function(a,b){M.get(a,function(a){b(new gn(a))},"text")};M.H.oA=function(a,b,c){a=g(a)?a:[a];var d=M.H.Mz(a),e=[],h=0;D(d,function(b){M.H.Du(b,function(l){h++;e.push(new en(b,l,0,a));h==d.length&&c(e)})})};
M.H.rz=function(a,b,c){M.H.Rz(a,b,function(b){c(new Pl(a,M.H.Vz(a),M.H.Sz(a),M.H.jA(a),b,M.H.DA(a),M.H.nA(a),null))})};M.H.rA=function(a,b){var c=[],d=[],e=0;D(a,function(a){c=M.H.sA(a.document);D(c,function(k){M.H.rz(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};M.H.aA=function(a,b){a=r(a)?M.H.Du(a):a;var c=[];D(a.getElementsByTagName(b),function(a){c.push(a)});return c};M.H.sA=function(a){return M.H.aA(a,"SceneView")};
M.H.Vz=function(a){var b=a.getElementsByTagName("Camera").length-1,c=a.getElementsByTagName("Camera")[b].getAttribute("position"),d=a.getElementsByTagName("Camera")[b].getAttribute("viewUp");a=a.getElementsByTagName("Camera")[b].getAttribute("focalPoint");return new hn(Bl(c),Bl(d),Bl(a))};M.H.vA=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
M.H.Sz=function(a){return new Ol(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};M.H.jA=function(a){return new kn(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
M.H.om=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};M.H.WG=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Xa(b,"!",Pk(c),"/",Pk(a))};
M.H.Rz=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,p,m="rgb(255,0,0)",q="",t="",s="",z=0,y,H;0==a.length?c(null):(D(a,function(a){k.push(M.H.om(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):D(k,function(a){M.get(a,function(a){l++;D(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){p=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
s=n[11];m=[1,0,0];t=q="";z=0;for(len=e.length;z<len;z++)if(y=e[z],q=y.getAttribute("id"),q===n[0].replace("_","")){t=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(H=d[z],q=H.getAttribute("id"),q===t){m=Bl(H.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new jn(p,m,0,0,0,s))}});l==k.length&&c(h)},"text")}))};
M.H.yu=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;D(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new fn(h.getAttribute("fileName"),a));break}});return d};M.H.TG=function(){return null};
M.H.DA=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=M.H.yu(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";D(c,function(a){k=a.me.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(D(d,function(b){b.getAttribute("id")==k&&(a.Jn=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.St=serverRoot+M.H.qx:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";D(e,function(a){l=a.me.getAttribute("attributes").split(";");D(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],D(h,function(b){b.me.getAttribute("id")==refVol&&(b.ah=a)}.bind(this)))}.bind(this))});D(h,function(c){c.lg=new Ml(a,c.me,b);c.ah&&(c.lg.ah=c.ah,delete c.ah)});return h};M.H.nA=function(a){var b=M.H.yu(a,"Model","ModelStorage");D(b,function(b){b.lg=new El(a,b.me)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",M.H.qx);
v("gxnat.slicerUtils.extractMrmls",M.H.Mz);v("gxnat.slicerUtils.getMrmlAsXml",M.H.Du);v("gxnat.slicerUtils.getMrmlNodes",M.H.oA);v("gxnat.slicerUtils.createSceneViewProperties",M.H.rz);v("gxnat.slicerUtils.getSceneViewNodes",M.H.rA);v("gxnat.slicerUtils.getElementsFromMrml",M.H.aA);v("gxnat.slicerUtils.getSceneViewsFromMrml",M.H.sA);v("gxnat.slicerUtils.getCameraFromSceneView",M.H.Vz);v("gxnat.slicerUtils.getThumbnail",M.H.vA);v("gxnat.slicerUtils.mrmlColorToRgb",M.H.BP);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",M.H.Sz);v("gxnat.slicerUtils.getLayoutFromSceneView",M.H.jA);v("gxnat.slicerUtils.matchFileToSet",M.H.om);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",M.H.WG);v("gxnat.slicerUtils.getAnnotations",M.H.Rz);v("gxnat.slicerUtils.getDisplayables",M.H.yu);v("gxnat.slicerUtils.getFibers",M.H.TG);v("gxnat.slicerUtils.getVolumes",M.H.DA);v("gxnat.slicerUtils.getMeshes",M.H.nA);function ln(a,b,c){this.gi=[];Wl.call(this,"Slicer Scenes",a,b);c&&c(this)}w(ln,Wl);v("gxnat.vis.Slicer",ln);var mn=["jpeg","jpg","png","gif"];f=ln.prototype;f.Pn="resources/Slicer/files";f.Dq="?listContents=true";f.On="File Name";f.hj=function(a){this.fj?nn(this,a):fm.d.hj.call(this,function(){this.vk(function(){this.ym();nn(this,a)}.bind(this))}.bind(this))};function nn(a,b){M.H.oA(a.gi,0,function(a){M.H.rA(a,function(d){this.mz(d,a,b)}.bind(this))}.bind(a))}
f.mz=function(a,b,c){this.FJ=b;this.yL=a;var d,e,h,k;D(this.yL,function(a){d=[a.sM||[],a.xJ||[],a.uG||[]];e=[];D(d,function(a){D(a,function(a){h=M.H.om(Pk(a.file),this.gi);a.lg instanceof Ml&&a.lg.ah&&(a.lg.labelMapFile=M.H.om(a.lg.ah.file,this.gi),null!=a.lg.ah.St&&null==M.H.om(a.lg.ah.St,this.gi)&&(a.lg.colorTableFile=a.lg.ah.St));e.push(new Sl(h,a.lg))}.bind(this))}.bind(this));k=new Tl(e);k.bp(M.H.om(M.H.vA(a.element,this.FJ[0].document),this.gi));k.qe(a.element.getAttribute("name"));k.xw(a);
this.Sc.push(k)}.bind(this));c&&c(this)};f.vk=function(a){var b="",c=0,d=this.gi.length;for(this.thumbnailFiles=[];c<d;c++)b=uj(this.gi[c]),-1!=mn.indexOf(b)&&this.thumbnailFiles.push(this.gi[c]);D(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=sj(tj(this.thumbnailFiles[c]))){this.bp(this.thumbnailFiles[c]);break}a&&a(this)};f.Oi=function(a){g(a)||(a=[a]);D(a,function(a){this.gi.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",mn);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",ln.prototype.Pn);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",ln.prototype.Dq);v("gxnat.vis.Slicer.prototype.fileContentsKey",ln.prototype.On);v("gxnat.vis.Slicer.prototype.getFileList",ln.prototype.hj);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",ln.prototype.mz);v("gxnat.vis.Slicer.prototype.getThumbnailImage",ln.prototype.vk);v("gxnat.vis.Slicer.prototype.addFiles",ln.prototype.Oi);function on(){cm.call(this);this.Cg.push(this.nw);this.Cg.push(this.wL);this.Cg.push(this.xL)}w(on,cm);v("xiv.sampleData.Scans",on);
on.prototype.nw=new bm("src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 1","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample1/Sample1.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
on.prototype.wL=new bm("src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 2","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample2/Sample2.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
on.prototype.xL=new bm("src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 3","Total Frames":176,Type:"t2_spc_1mm_p2"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample3/Sample3.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function pn(a,b,c,d){wc.call(this);qn();rn();this.Jp={h:fm,UL:ln};this.$c=null!=a?a:pn.States.Gj;this.AJ=b;this.eC=d;this.Wr=Wg(d);this.Pg=this.Pg?this.Pg:[];a="/"!==c[0]?"/"+c:c;-1===this.Pg.indexOf(this.Wr+a)&&this.Pg.push(-1===a.indexOf(this.Wr)?this.Wr+a:a);1==this.Pg.length&&(this.Jd=new Ug(this.Pg[0]))}w(pn,wc);v("xiv.start",pn);pn.ModalStates={ye:"fullscreen",cf:"popup",Ks:"fullscreen-popup",Eg:"windowed",Gj:"demo",JD:"demp-fullscreen"};pn.States={Gj:"demo",jN:"live"};
function qn(){Rf.IMA=[Sf,null]}function rn(){document.body.style.overflow="hidden"}f=pn.prototype;f.Js=B();f.Qy=300;f.ZI=1E3;f.$q=!1;f.cr=!1;f.CC=function(){};f.Yy=function(){sn(this);this.show();this.$c==pn.States.Gj?(em.MODE="demo",R(this.Va.$.cf),R(this.Va.$.el),tn(this)):(this.Va.tc(this.AJ),un(this))};f.JL=function(a){this.BJ=a};function sn(a){a.Va=new a.BJ;a.Va.qC(serverRoot);F(a.Va,"g",a.iK.bind(a));window.onresize=function(){null!=this.Va&&this.Va.k()}.bind(a)}
f.iK=function(){this.Rd.nB(null,function(a){D(a,function(a){vn(this,a);this.Va.T.dd()}.bind(this))}.bind(this))};f.show=function(){this.Va.a().style.opacity=0;this.Va.n();this.$c!==pn.States.Gj&&this.Va.qy();F(this.Va.T.oa,"a",this.Xv.bind(this));F(this.Va.$.cf,"click",this.YF.bind(this));F(this.Va.$.el,"click",this.g.bind(this));this.Va.Ob.ac(!0,0,this.ZI);yk(this.Va.a(),this.Qy)};
function tn(a){var b=a.Va.T,c={slicer:(new dm).Cg,scan:(new on).Cg},d,e=null;C(c,function(a,b){D(a,function(a){d="scan"==b?new this.Jp.h:new this.Jp.UL;d.Oi(a.files);d.nC(!0);d.DC(a.yJ);d.bp(a.Rw);wn(this,d,a.su);null==e&&(e=a.su);D(a.su,function(a){Ib(e,a)||e.push(a)})}.bind(this))}.bind(a));a=b.oa.Iq(e);var h=[];D(a,function(a){null!=a&&(a.gc.Pi=0,a.ac(!0),a=a.Vf,a.style.opacity=0,h.push(a))});b.oa.a().style.opacity=1;Ob(h,void 0,0,b.oa.a());Ak(h,400,200)}
function un(a){var b=a.Va.T.oa,c=0;a.Va.T&&F(a.Va.T.oa,xn,a.ZK.bind(a));a.Rd=new $g(a.Pg[0]);a.Rd.kB(function(a){var e=vn(this,a);0==c&&(this.QI=a,this.Ru=b.Rc[e[0]],b.So(e[0]));1==c&&(this.cr=!0,this.RI=a,this.dr=this.Ru.Rc[e[1]]);2==c&&(this.$q=!0,this.ar=a,this.XA=this.dr.Rc[e[2]],xl([this.Ru,this.dr,this.XA]));c++}.bind(a))}
function yn(a,b){var c=a.Rd.Rn(b),d=a.Rd.Tz(b),e=0;C(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}function vn(a,b){var c=a.Rd.Uz(b),d=yn(a,b);zn(a,d,c);return d}function An(a,b){a.Rd.jB(b.originalUrl,null,function(a){if(b.ki("subjects")==this.Jd.ki("subjects")&&this.cr){var d=this.Jd.ki("experiments");this.ar=this.Rd.Xl(d);Lb(a,this.ar);Ob(a,0,0,this.ar);this.cr=!1}D(a,function(a){vn(this,a)}.bind(this))}.bind(a))}
f.Xv=function(a){if(null!=a.me[this.Js])switch(a=new Ug(a.me[this.Js]),a.Gq()){case "subjects":An(this,a);break;case "experiments":Bn(this,a.originalUrl)}};f.em=function(a){zk(this.Va.a(),this.Qy,a)};f.g=function(){this.em(this.hG.bind(this))};
function Bn(a,b){if(null==a.iv)a.iv=[];else if(-1<a.iv.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Rd.Rn(a.Rd.Xl(b)),c=new Vl(c.projects[lh],c.subjects[lh],c.experiments[lh]);Cn(a,b,function(){this.iv.push(b);this.$q&&(this.$q=!1,C(this.dr.Rc,function(){}.bind(this)))}.bind(a),c)}f.ZK=function(a){var b=a.me.gc.Pi;a.me.gc.Pi=0;a.me.gc.Pi=b};
f.YF=function(){var a=open(this.eC+"/scripts/viewer/xiv/popup.html?"+this.Pg[0],"XImgView","width=1200,height=800");a.focus();var b=this.Pg[0];a.onload=function(){a.wP(b,pn.ModalStates.cf,serverRoot)}.bind(this);this.g()};function Cn(a,b,c,d){Dn(a,b,function(a){var b=a.li;En(this,a,b,function(a){wn(this,a)}.bind(this));null!=d&&(this.vb[b].Yo(d.jL),this.vb[b].$o(d.ZL),this.vb[b].Uo(d.sG))}.bind(a),c)}
function zn(a,b,c){var d=a.Va.T.oa;d.En(b);zippyNodes=d.Iq(b);D(zippyNodes,function(a,b){-1<a.Id().toLowerCase().indexOf("experiments")&&!a.Ou()&&Tc(a,"a",function(){a.xy()});null==c||null==c[b]||null==a[this.Js]&&(a[this.Js]=c[b])}.bind(a))}
function wn(a,b,c){var d=a.Va.T;null!=d&&(null==c&&null!=a.Rd&&(c=yn(a,a.Rd.Xl(b.Nn))),"Scans"!=b.Sf&&c.push(b.Sf),b.hj(function(){if(0<b.Sc.length){var a=d.Wi(b,c);if("Scans"!=b.Sf){var h=d.oa.Iq(c);0<c.length&&1<h.length&&d.ac(c[c.length-1],h[h.length-2])}d.qw(this.Va.a());a.rw(b.Dm);a.bx()}}.bind(a)))}function En(a,b,c,d){a.vb=a.vb?a.vb:{};null==a.vb[c]&&(a.vb[c]=b,d(b))}
f.hG=function(){pn.d.g.call(this);document.body.style.overflow="visible";C(this.vb,function(a,b){a.g();delete this.vb[b]}.bind(this));delete this.vb;this.Rd&&(this.Rd.g(),delete this.Rd);delete this.Pg;delete this.eC;delete this.Wr;delete this.mP;null!=this.Jd&&(this.Jd.g(),delete this.Jd);delete this.$q;delete this.cr;delete this.QI;delete this.RI;delete this.ar;delete this.Ru;delete this.dr;delete this.XA;I(this.Va);this.Va.g();R(this.Va.a());delete this.Va};
function Dn(a,b,c,d){var e=lb(a.Jp),h=0;C(a.Jp,function(a){am(b,a,c,function(){h++;h===e&&null!=d&&d()})})}v("xiv.start.States",pn.States);v("xiv.start.loadCustomExtensions",qn);v("xiv.start.adjustDocumentStyle",rn);v("xiv.start.ModalStates",pn.ModalStates);v("xiv.start.checkForWebGL",pn.checkForWebGL);v("xiv.start.isCompatible",pn.$I);v("xiv.start.prototype.setServerRoot",pn.prototype.CC);v("xiv.start.prototype.setModalType",pn.prototype.JL);v("xiv.start.prototype.begin",pn.prototype.Yy);
v("xiv.start.prototype.show",pn.prototype.show);v("xiv.start.prototype.hide",pn.prototype.em);v("xiv.start.prototype.dispose",pn.prototype.g);window["xiv.start.isCompatible"]=pn.$I;window["xiv.start.checkForWebGL"]=pn.checkForWebGL;window["xiv.start.ModalStates"]=pn.ModalStates;pn.prototype.setServerRoot=pn.prototype.CC;pn.prototype.begin=pn.prototype.Yy;function Fn(){$c.call(this);this.mo=[];this.Qw=[];this.Qo=[]}w(Fn,$c);f=Fn.prototype;f.ir=!1;f.jr=!1;f.rj=!1;f.bB=function(){return this.rj};f.AC=function(a){this.ds=a};f.ra=function(){if(!this.rj){for(var a,b=0;a=this.mo[b];b++)Gn(this,a);this.rj=!0}};function Gn(a,b){a.ir&&(F(b.element,"mousedown",b.ig,!1,b),a.Fw&&dl(b.element,a.Fw));a.jr&&a.Pw&&dl(b.element,a.Pw)}
function Hn(a){for(var b,c=0;b=a.mo[c];c++){var d=a;d.ir&&(Uc(b.element,"mousedown",b.ig,!1,b),d.Fw&&fl(b.element,d.Fw));d.jr&&d.Pw&&fl(b.element,d.Pw);b.g()}a.mo.length=0}
f.gp=function(a,b){if(!this.lf)if(this.lf=b,!1==this.dispatchEvent(new In("dragstart",0,this.lf)))this.lf=null;else{var c=b.Xi;this.nk=this.Xt(c);var d=Kh(c);d.body.appendChild(this.nk);var e=this.nk,h=Ji(c),c=aj(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.Pa=new hm(e);this.Pa.AC(this.ds);F(this.Pa,"drag",this.vB,!1,this);F(this.Pa,"end",this.dj,!1,this);F(d.body,"selectstart",this.$C);this.Cm=[];for(e=0;d=this.Qw[e];e++)for(var k,
h=0;k=d.mo[h];h++)for(var c=d,l=[k.element],n=this.Cm,p=0;p<l.length;p++){var m=l[p],q,t=m;q=Ji(t);t=T(t);q=new th(q.y,q.x+t.width,q.y+t.height,q.x);n.push(new Jn(q,c,k,m));Kn(this,q)}this.si||(this.si=new th(0,0,0,0));for(e=0;d=this.Qo[e];e++)d.Tt=[],d.fC=d.o.scrollLeft,d.gC=d.o.scrollTop,h=Ji(d.o),c=T(d.o),d.wc=new th(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.Cm[e];e++)for(h=0;d=this.Qo[h];h++)gi(d.o,c.o)&&(d.Tt.push(c),c.Po=d);this.$j=null;for(e=0;d=this.Qo[e];e++)F(d.o,"scroll",this.iz,
!1,this);this.Pa.gp(a);a.preventDefault()}};
f.dj=function(a){var b=a.lG?null:this.$j;if(b&&b.Xk){var c=a.clientX;a=a.clientY;var d=wi(Ih(this.nk)),e=c+d.x,d=a+d.y,h;this.lp&&(h=this.lp(b.ci,b.wc,e,d));this.dispatchEvent(new In("drag",0,this.lf,0,b.ci,0,c,a));b.Xk.dispatchEvent(new In("drop",0,this.lf,0,b.ci,0,c,a,0,0,h))}this.dispatchEvent(new In("dragend",0,this.lf));Uc(this.Pa,"drag",this.vB,!1,this);Uc(this.Pa,"end",this.dj,!1,this);Uc(Kh(this.lf.Xi).body,"selectstart",this.$C);for(b=0;c=this.Qo[b];b++)Uc(c.o,"scroll",this.iz,!1,this),c.Tt=
[];this.Pa.g();R(this.nk);delete this.lf;delete this.nk;delete this.Pa;delete this.Cm;delete this.$j};
f.vB=function(a){var b,c=wi(Ih(this.nk));b=new rh(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.$j,h;if(e){this.lp&&e.Xk&&(h=this.lp(e.ci,e.wc,c,d));if(e.wc.contains(b)&&h==this.py)return;e.Xk&&(this.dispatchEvent(new In("dragout",0,this.lf,0,e.ci)),e.Xk.dispatchEvent(new In("dragout",0,this.lf,0,e.ci,0,void 0,void 0,0,0,this.py)));this.py=h;this.$j=null}if(this.si.contains(b)){a:{for(var k=0;e=this.Cm[k];k++)if(e.wc.contains(b))if(e.Po){if(e.Po.wc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.$j=b)&&e.Xk)this.lp&&(h=this.lp(e.ci,e.wc,c,d)),c=new In("dragover",0,this.lf,0,e.ci),c.$L=h,this.dispatchEvent(c),e.Xk.dispatchEvent(new In("dragover",0,this.lf,0,e.ci,0,a.clientX,a.clientY,0,0,h));else if(!e){this.Ie||(this.Ie=new Jn(this.si.clone()));a=this.Ie.wc;a.top=this.si.top;a.right=this.si.right;a.bottom=this.si.bottom;a.left=this.si.left;for(h=0;e=this.Cm[h];h++)b=e.wc,e.Po&&(e=e.Po.wc,b=new th(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.$j=10<=(a.right-a.left)*(a.bottom-a.top)?this.Ie:null}}};f.$C=function(){return!1};
f.iz=function(a){for(var b=0,c;c=this.Qo[b];b++)if(a.target==c.o){var d=c.gC-c.o.scrollTop,e=c.fC-c.o.scrollLeft;c.gC=c.o.scrollTop;c.fC=c.o.scrollLeft;this.Ie&&this.$j==this.Ie&&(0<d?this.Ie.wc.top+=d:this.Ie.wc.bottom+=d,0<e?this.Ie.wc.left+=e:this.Ie.wc.right+=e);for(var h=0,k;k=c.Tt[h];h++)k=k.wc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,Kn(this,k)}this.Pa.qm(a)};
f.Xt=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=O("table",null,O("tbody",null,b));break a;case "td":case "th":a=O("table",null,O("tbody",null,O("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.mG&&dl(a,this.mG);return a};f.Hq=function(){return this.Pa};
function Kn(a,b){if(1==a.Cm.length)a.si=new th(b.top,b.right,b.bottom,b.left);else{var c=a.si;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.f=function(){Fn.d.f.call(this);Hn(this)};function In(a,b,c,d,e,h,k,l,n,p,m){Ec.call(this,a);this.yq=c;this.Pl=e;this.clientX=k;this.clientY=l;this.$L=m}w(In,Ec);In.prototype.f=function(){};
function Ln(a,b){$c.call(this);this.element=Lh(a);this.data=b;this.Ra=null;this.yc=new ej(this);zc(this,ua(Bc,this.yc));if(!this.element)throw Error("Invalid argument");}w(Ln,$c);f=Ln.prototype;f.Xi=null;f.ig=function(a){if(Jc(a)){var b=a.target;b&&(this.yc.A(b,"mousemove",this.uB,!1).A(b,"mouseout",this.uB,!1),this.yc.A(Kh(b),"mouseup",this.DJ,!0),this.Xi=b,this.Iw=new rh(a.clientX,a.clientY),a.preventDefault())}};f.Wo=function(a){this.Ra=a};
f.uB=function(a){var b=this.Xi,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.Iw.x)+Math.abs(a.clientY-this.Iw.y)||b)this.yc.mg(),this.Ra.gp(a,this)};f.DJ=function(){this.yc.mg();delete this.Iw;this.Xi=null};function Jn(a,b,c,d){this.wc=a;this.Xk=b;this.ci=c;this.o=d}Jn.prototype.Po=null;function Mn(a,b){this.type=a;this.currentTarget=this.target=b||null}f=Mn.prototype;f.kg=!1;f.defaultPrevented=!1;f.No=!0;f.stopPropagation=function(){this.kg=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.No=!1};
function Nn(a){a=new Mn("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Mi(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.No=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.kg;d--){var e=b[d],h=a.type,k=new Hc(a,b[d]);gb(e)?ad(e,h,!0,k):Xc(e,h,!0,k)}for(d=0;d<b.length&&!a.kg;d++)e=b[d],h=a.type,k=new Hc(a,b[d]),gb(e)?ad(e,h,!1,k):Xc(e,h,!1,k)};function On(a,b){if(!a)throw Error("Invalid class name "+a);if(!ja(b))throw Error("Invalid decorator function "+b);Pn[a]=b}var Qn={},Pn={};function Rn(){}var Sn;fa(Rn);var Tn={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=Rn.prototype;f.Ug=function(){};f.v=function(a){var b=a.N().v("div",this.tk(a).join(" "),a.getContent());Un(this,a,b);return b};f.Ja=function(a){return a};f.qk=function(a,b,c){if(a=a.a?a.a():a){var d=[b];E&&!pc("7")&&(d=Vn(bl(a),b),d.push(b));(c?el:gl)(a,d)}};f.He=function(){return!0};
f.Db=function(a,b){b.id&&mj(a,b.id);var c=this.Ja(b);c&&c.firstChild?Wn(a,c.firstChild.nextSibling?Nb(c.childNodes):c.firstChild):a.Jc=null;var d=0,e=this.W(),h=this.W(),k=!1,l=!1,c=!1,n=Nb(bl(b));D(n,function(a){k||a!=e?l||a!=h?d|=this.Eu(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.R=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var p=a.Xf;p&&n.push.apply(n,p);if(E&&!pc("7")){var m=Vn(n);0<m.length&&(n.push.apply(n,m),c=!0)}if(!k||!l||p||c)b.className=n.join(" ");Un(this,a,b);return b};
f.jm=function(a){a.Oe()&&this.xm(a.a(),!0);a.isEnabled()&&this.yj(a,a.sa())};function Xn(a,b,c){if(a=c||a.Ug())c=b.getAttribute("role")||null,a!=c&&Zk(b,a)}function Un(a,b,c){b.sa()||$k(c,"hidden",!b.sa());b.isEnabled()||a.oh(c,1,!b.isEnabled());Yn(b,8)&&a.oh(c,8,!!(b.R&8));Yn(b,16)&&a.oh(c,16,b.$h());Yn(b,64)&&a.oh(c,64,!!(b.R&64))}f.Ro=function(a,b){Yi(a,!b,!E&&!gc)};f.xm=function(a,b){this.qk(a,this.W()+"-rtl",b)};f.ai=function(a){var b;return Yn(a,32)&&(b=a.oc())?mi(b)&&ni(b):!1};
f.yj=function(a,b){var c;if(Yn(a,32)&&(c=a.oc())){if(!b&&a.R&32){try{c.blur()}catch(d){}a.R&32&&a.xk(null)}(mi(c)&&ni(c))!=b&&li(c,b)}};f.ba=function(a,b){Vi(a,b);a&&$k(a,"hidden",!b)};f.tc=function(a,b,c){var d=a.a();if(d){var e=this.Sn(b);e&&this.qk(a,e,c);this.oh(d,b,c)}};f.oh=function(a,b,c){Sn||(Sn={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Sn[b];var d=a.getAttribute("role")||null;d&&(d=Tn[d]||b,b="checked"==b||"selected"==b?d:b);b&&$k(a,b,c)};
f.Wk=function(a,b){var c=this.Ja(a);if(c&&($h(c),b))if(r(b))ii(c,b);else{var d=function(a){if(a){var b=Kh(c);c.appendChild(r(a)?b.createTextNode(a):a)}};g(b)?D(b,d):!ha(b)||"nodeType"in b?d(b):D(Nb(b),d)}};f.oc=function(a){return a.a()};f.W=function(){return"goog-control"};f.tk=function(a){var b=this.W(),c=[b],d=this.W();d!=b&&c.push(d);b=a.$l();for(d=[];b;){var e=b&-b;d.push(this.Sn(e));b&=~e}c.push.apply(c,d);(a=a.Xf)&&c.push.apply(c,a);E&&!pc("7")&&c.push.apply(c,Vn(c));return c};
function Vn(a,b){var c=[];b&&(a=a.concat([b]));D([],function(d){!Fb(d,ua(Ib,a))||b&&!Ib(d,b)||c.push(d.join("_"))});return c}f.Sn=function(a){this.mq||Zn(this);return this.mq[a]};f.Eu=function(a){if(!this.XC){this.mq||Zn(this);var b=this.mq,c={},d;for(d in b)c[b[d]]=d;this.XC=c}a=parseInt(this.XC[a],10);return isNaN(a)?0:a};function Zn(a){var b=a.W();b.replace(/\xa0|\s/g," ");a.mq={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function $n(a,b){$c.call(this);a&&this.Gl(a,b)}w($n,$c);f=$n.prototype;f.o=null;f.kr=null;f.Yu=null;f.lr=null;f.Pe=-1;f.sj=-1;f.Et=!1;
var ao={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},bo={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},co=E||ic&&pc("525"),eo=cc&&hc;f=$n.prototype;
f.Rq=function(a){ic&&(17==this.Pe&&!a.ctrlKey||18==this.Pe&&!a.altKey||cc&&91==this.Pe&&!a.metaKey)&&(this.sj=this.Pe=-1);-1==this.Pe&&(a.ctrlKey&&17!=a.keyCode?this.Pe=17:a.altKey&&18!=a.keyCode?this.Pe=18:a.metaKey&&91!=a.keyCode&&(this.Pe=91));co&&!jl(a.keyCode,this.Pe,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.sj=ll(a.keyCode),eo&&(this.Et=a.altKey))};f.BI=function(a){this.sj=this.Pe=-1;this.Et=a.altKey};
f.handleEvent=function(a){var b=a.Lc,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.sj,d=13!=c&&27!=c?b.keyCode:0):ic&&"keypress"==a.type?(c=this.sj,d=0<=b.charCode&&63232>b.charCode&&kl(c)?b.charCode:0):gc?(c=this.sj,d=kl(c)?b.keyCode:0):(c=b.keyCode||this.sj,d=b.charCode||0,eo&&(e=this.Et),cc&&63==d&&224==c&&(c=191));var h=c=ll(c),k=b.keyIdentifier;c?63232<=c&&c in ao?h=ao[c]:25==c&&a.shiftKey&&(h=9):k&&k in bo&&(h=bo[k]);a=h==this.Pe;this.Pe=h;b=new fo(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.o};f.Gl=function(a,b){this.lr&&this.detach();this.o=a;this.kr=F(this.o,"keypress",this,b);this.Yu=F(this.o,"keydown",this.Rq,b,this);this.lr=F(this.o,"keyup",this.BI,b,this)};f.detach=function(){this.kr&&(Vc(this.kr),Vc(this.Yu),Vc(this.lr),this.lr=this.Yu=this.kr=null);this.o=null;this.sj=this.Pe=-1};f.f=function(){$n.d.f.call(this);this.detach()};function fo(a,b,c,d){Hc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(fo,Hc);function go(a,b,c){ij.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ma(b);if(d=Qn[d])break;b=b.d?b.d.constructor:null}b=d?ja(d.fe)?d.fe():new d:null}this.ta=b;this.Jc=ca(a)?a:null}w(go,ij);f=go.prototype;f.Jc=null;f.R=0;f.mp=39;f.vn=255;f.ip=0;f.Dc=!0;f.Xf=null;f.zk=!0;f.fq=!1;f.ew=null;f.Vo=function(a){this.ha&&a!=this.zk&&ho(this,a);this.zk=a};f.oc=function(){return this.ta.oc(this)};f.Lq=function(){return this.rb||(this.rb=new $n)};f.Qa=function(){return this.ta};
f.qk=function(a,b){b?a&&(this.Xf?Ib(this.Xf,a)||this.Xf.push(a):this.Xf=[a],this.ta.qk(this,a,!0)):a&&this.Xf&&Lb(this.Xf,a)&&(0==this.Xf.length&&(this.Xf=null),this.ta.qk(this,a,!1))};f.v=function(){var a=this.ta.v(this);this.o=a;Xn(this.ta,a,this.ij());this.fq||this.ta.Ro(a,!1);this.sa()||this.ta.ba(a,!1)};f.ij=function(){return this.ew};f.Ja=function(){return this.ta.Ja(this.a())};f.He=function(a){return this.ta.He(a)};
f.ae=function(a){this.o=a=this.ta.Db(this,a);Xn(this.ta,a,this.ij());this.fq||this.ta.Ro(a,!1);this.Dc="none"!=a.style.display};f.fb=function(){go.d.fb.call(this);this.ta.jm(this);if(this.mp&-2&&(this.zk&&ho(this,!0),Yn(this,32))){var a=this.oc();if(a){var b=this.Lq();b.Gl(a);this.gb().A(b,"key",this.Xg).A(a,"focus",this.yk).A(a,"blur",this.xk)}}};
function ho(a,b){var c=a.gb(),d=a.a();b?(c.A(d,"mouseover",a.Ak).A(d,"mousedown",a.Yg).A(d,"mouseup",a.ag).A(d,"mouseout",a.Tq),a.Yn!=ea&&c.A(d,"contextmenu",a.Yn),E&&c.A(d,"dblclick",a.FA)):(c.tb(d,"mouseover",a.Ak).tb(d,"mousedown",a.Yg).tb(d,"mouseup",a.ag).tb(d,"mouseout",a.Tq),a.Yn!=ea&&c.tb(d,"contextmenu",a.Yn),E&&c.tb(d,"dblclick",a.FA))}f.zc=function(){go.d.zc.call(this);this.rb&&this.rb.detach();this.sa()&&this.isEnabled()&&this.ta.yj(this,!1)};
f.f=function(){go.d.f.call(this);this.rb&&(this.rb.g(),delete this.rb);delete this.ta;this.Xf=this.Jc=null};f.getContent=function(){return this.Jc};f.Wk=function(a){this.ta.Wk(this.a(),a);this.Jc=a};function Wn(a,b){a.Jc=b}f.Fq=function(){var a=this.getContent();if(!a)return"";a=r(a)?a:g(a)?Db(a,qi).join(""):oi(a);return Ga(a)};f.xm=function(a){go.d.xm.call(this,a);var b=this.a();b&&this.ta.xm(b,a)};f.Ro=function(a){this.fq=a;var b=this.a();b&&this.ta.Ro(b,a)};f.sa=function(){return this.Dc};
f.ba=function(a,b){if(b||this.Dc!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.ta.ba(c,a);this.isEnabled()&&this.ta.yj(this,a);this.Dc=a;return!0}return!1};f.isEnabled=function(){return!(this.R&1)};f.sc=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!io(this,1,!a)||(a||(this.setActive(!1),this.og(!1)),this.sa()&&this.ta.yj(this,a),this.tc(1,!a))};f.og=function(a){io(this,2,a)&&this.tc(2,a)};f.Zg=function(){return!!(this.R&4)};
f.setActive=function(a){io(this,4,a)&&this.tc(4,a)};f.Zo=function(a){io(this,8,a)&&this.tc(8,a)};f.$h=function(){return!!(this.R&16)};f.pe=function(a){io(this,16,a)&&this.tc(16,a)};f.cc=function(a){io(this,64,a)&&this.tc(64,a)};f.$l=function(){return this.R};f.tc=function(a,b){Yn(this,a)&&b!=!!(this.R&a)&&(this.ta.tc(this,a,b),this.R=b?this.R|a:this.R&~a)};function Yn(a,b){return!!(a.mp&b)}
f.gd=function(a,b){if(this.ha&&this.R&a&&!b)throw Error("Component already rendered");!b&&this.R&a&&this.tc(a,!1);this.mp=b?this.mp|a:this.mp&~a};function jo(a,b){return!!(a.vn&b)&&Yn(a,b)}function io(a,b,c){return Yn(a,b)&&!!(a.R&b)!=c&&(!(a.ip&b)||a.dispatchEvent(kj(b,c)))&&!a.lk}f.Ak=function(a){(!a.relatedTarget||!gi(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&jo(this,2)&&this.og(!0)};
f.Tq=function(a){a.relatedTarget&&gi(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(jo(this,4)&&this.setActive(!1),jo(this,2)&&this.og(!1))};f.Yn=ea;f.Yg=function(a){this.isEnabled()&&(jo(this,2)&&this.og(!0),Jc(a)&&(jo(this,4)&&this.setActive(!0),this.ta.ai(this)&&this.oc().focus()));!this.fq&&Jc(a)&&a.preventDefault()};f.ag=function(a){this.isEnabled()&&(jo(this,2)&&this.og(!0),this.Zg()&&this.Nk(a)&&jo(this,4)&&this.setActive(!1))};f.FA=function(a){this.isEnabled()&&this.Nk(a)};
f.Nk=function(a){jo(this,16)&&this.pe(!this.$h());jo(this,8)&&this.Zo(!0);jo(this,64)&&this.cc(!(this.R&64));var b=new Ec("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.bw=a.bw);return this.dispatchEvent(b)};f.yk=function(){jo(this,32)&&io(this,32,!0)&&this.tc(32,!0)};f.xk=function(){jo(this,4)&&this.setActive(!1);jo(this,32)&&io(this,32,!1)&&this.tc(32,!1)};
f.Xg=function(a){return this.sa()&&this.isEnabled()&&this.$f(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.$f=function(a){return 13==a.keyCode&&this.Nk(a)};if(!ja(go))throw Error("Invalid component class "+go);if(!ja(Rn))throw Error("Invalid renderer class "+Rn);var ko=ma(go);Qn[ko]=Rn;On("goog-control",function(){return new go(null)});function lo(){this.ez=[]}w(lo,Rn);fa(lo);function mo(a,b){var c=a.ez[b];if(!c){switch(b){case 0:c=a.W()+"-highlight";break;case 1:c=a.W()+"-checkbox";break;case 2:c=a.W()+"-content"}a.ez[b]=c}return c}f=lo.prototype;f.Ug=function(){return"menuitem"};f.v=function(a){var b=a.N().v("div",this.tk(a).join(" "),no(this,a.getContent(),a.N()));oo(this,a,b,Yn(a,8)||Yn(a,16));return b};f.Ja=function(a){return a&&a.firstChild};
f.Db=function(a,b){var c=ci(b),d=mo(this,2);c&&cl(c,d)||b.appendChild(no(this,b.childNodes,a.N()));cl(b,"goog-option")&&(a.js(!0),this.js(a,b,!0));return lo.d.Db.call(this,a,b)};f.Wk=function(a,b){var c=this.Ja(a),d=po(this,a)?c.firstChild:null;lo.d.Wk.call(this,a,b);d&&!po(this,a)&&c.insertBefore(d,c.firstChild||null)};function no(a,b,c){a=mo(a,2);return c.v("div",a,b)}f.BC=function(a,b,c){a&&b&&oo(this,a,b,c)};f.js=function(a,b,c){a&&b&&oo(this,a,b,c)};
function po(a,b){var c=a.Ja(b);if(c){var c=c.firstChild,d=mo(a,1);return!!c&&fi(c)&&cl(c,d)}return!1}function oo(a,b,c,d){Xn(a,c,b.ij());Un(a,b,c);d!=po(a,c)&&(hl(c,"goog-option",d),c=a.Ja(c),d?(a=mo(a,1),c.insertBefore(b.N().v("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.Sn=function(a){switch(a){case 2:return mo(this,0);case 16:case 8:return"goog-option-selected";default:return lo.d.Sn.call(this,a)}};
f.Eu=function(a){var b=mo(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return lo.d.Eu.call(this,a)}};f.W=function(){return"goog-menuitem"};function qo(a,b,c,d){go.call(this,a,d||lo.fe(),c);this.F(b)}w(qo,go);f=qo.prototype;f.w=function(){var a=this.pv;return null!=a?a:this.Fq()};f.F=function(a){this.pv=a};f.gd=function(a,b){qo.d.gd.call(this,a,b);switch(a){case 8:this.$h()&&!b&&this.pe(!1);var c=this.a();c&&this.Qa().BC(this,c,b);break;case 16:(c=this.a())&&this.Qa().js(this,c,b)}};f.BC=function(a){this.gd(8,a)};f.js=function(a){this.gd(16,a)};
f.Fq=function(){var a=this.getContent();return g(a)?(a=Db(a,function(a){return fi(a)&&(cl(a,"goog-menuitem-accel")||cl(a,"goog-menuitem-mnemonic-separator"))?"":qi(a)}).join(""),Ga(a)):qo.d.Fq.call(this)};f.ag=function(a){var b=this.getParent();if(b){var c=b.MB;b.MB=null;if(b=c&&u(a.clientX))b=new rh(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}qo.d.ag.call(this,a)};f.$f=function(a){return a.keyCode==this.tB&&this.Nk(a)?!0:qo.d.$f.call(this,a)};f.zH=function(){return this.tB};
On("goog-menuitem",function(){return new qo(null)});qo.prototype.ij=function(){return Yn(this,16)?"menuitemcheckbox":Yn(this,8)?"menuitemradio":qo.d.ij.call(this)};function ro(a){this.Uy=a}fa(ro);f=ro.prototype;f.Ug=function(){return this.Uy};function so(a,b){a&&(a.tabIndex=b?0:-1)}f.v=function(a){return a.N().v("div",this.tk(a).join(" "))};f.Ja=function(a){return a};f.He=function(a){return"DIV"==a.tagName};f.Db=function(a,b){b.id&&mj(a,b.id);var c=this.W(),d=!1,e=bl(b);e&&D(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.sc(!1):b==c+"-horizontal"?a.pi(to):b==c+"-vertical"&&a.pi(uo))},this);d||dl(b,c);vo(this,a,this.Ja(b));return b};
function vo(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.xu(d);h&&(h.o=d,b.isEnabled()||h.sc(!1),b.tn(h),h.Db(d))}else d.nodeValue&&""!=Ia(d.nodeValue)||c.removeChild(d);d=e}}f.xu=function(a){a:{var b;a=bl(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Pn?Pn[b]():null){a=b;break a}a=null}return a};f.jm=function(a){a=a.a();Yi(a,!0,hc);E&&(a.hideFocus=!0);var b=this.Ug();b&&Zk(a,b)};f.oc=function(a){return a.a()};f.W=function(){return"goog-container"};
f.tk=function(a){var b=this.W(),c=[b,a.Eb()==to?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function wo(){}w(wo,Rn);fa(wo);wo.prototype.v=function(a){return a.N().v("div",this.W())};wo.prototype.Db=function(a,b){b.id&&mj(a,b.id);if("HR"==b.tagName){var c=b;b=this.v(a);ai(b,c);R(c)}else dl(b,this.W());return b};wo.prototype.Wk=function(){};wo.prototype.W=function(){return"goog-menuseparator"};function xo(a,b){go.call(this,null,a||wo.fe(),b);this.gd(1,!1);this.gd(2,!1);this.gd(4,!1);this.gd(32,!1);this.R=1}w(xo,go);xo.prototype.fb=function(){xo.d.fb.call(this);Zk(this.a(),"separator")};On("goog-menuseparator",function(){return new xo});function yo(a){this.Uy=a||"menu"}w(yo,ro);fa(yo);f=yo.prototype;f.He=function(a){return"UL"==a.tagName||yo.d.He.call(this,a)};f.xu=function(a){return"HR"==a.tagName?new xo:yo.d.xu.call(this,a)};f.fk=function(a,b){return gi(a.a(),b)};f.W=function(){return"goog-menu"};f.jm=function(a){yo.d.jm.call(this,a);$k(a.a(),"haspopup","true")};function zo(a,b,c,d,e,h,k,l,n){var p,m;if(p=c.offsetParent){var q="HTML"==p.tagName||"BODY"==p.tagName;q&&"static"==Bi(p)||(m=Ji(p),q||(q=(q=Ki(p))&&hc?-p.scrollLeft:!q||E&&pc("8")||"visible"==Ai(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,m=sh(m,new rh(q,p.scrollTop))))}p=m||new rh;m=Ti(a);(q=Ii(a))&&m.$A(new wh(q.left,q.top,q.right-q.left,q.bottom-q.top));var q=Ih(a),t=Ih(c);if(q.ga!=t.ga){var s=q.ga.body,t=vi(t),z=new rh(0,0),y=Vh(Kh(s)),H=s;do{var Q=y==t?Ji(H):Ni(H);z.x+=
Q.x;z.y+=Q.y}while(y&&y!=t&&(H=y.frameElement)&&(y=y.parent));s=sh(z,Ji(s));E&&!ui(q)&&(s=sh(s,wi(q)));m.left+=s.x;m.top+=s.y}a=Ao(a,b);b=new rh(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);b=sh(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var P;if(k)if(n)P=n;else if(P=Ii(c))P.top-=p.y,P.right-=p.x,P.bottom-=p.y,P.left-=p.x;return Bo(b,c,d,h,P,k,l)}
function Bo(a,b,c,d,e,h,k){a=a.clone();var l=0,n=Ao(b,c);c=T(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;Ci(b,a);vh(c,k)||(e=ui(Ih(Kh(b))),!E||e&&pc("8")?
(b=b.style,hc?b.MozBoxSizing="border-box":ic?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=aj(b,"padding"),b=dj(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function Ao(a,b){return(b&4&&Ki(a)?b^2:b)&-5};var Co,Do;Do=Co=!1;var Eo=Ub;Eo&&(-1!=Eo.indexOf("Firefox")||-1!=Eo.indexOf("Camino")||(-1!=Eo.indexOf("iPhone")||-1!=Eo.indexOf("iPod")?Co=!0:-1!=Eo.indexOf("iPad")&&(Do=!0)));var Fo=Co,Go=Do;On("goog-menuseparator",function(){return new xo});function Ho(a,b,c){ij.call(this,c);this.ta=b||ro.fe();this.Fa=a||uo}w(Ho,ij);var to="horizontal",uo="vertical";f=Ho.prototype;f.Zu=null;f.rb=null;f.ta=null;f.Fa=null;f.Dc=!0;f.Kc=!0;f.ru=!0;f.Ne=-1;f.Bc=null;f.fi=!1;f.zF=!1;f.cL=!0;f.Lh=null;f.oc=function(){return this.Zu||this.ta.oc(this)};f.Lq=function(){return this.rb||(this.rb=new $n(this.oc()))};f.Qa=function(){return this.ta};f.v=function(){this.o=this.ta.v(this)};f.Ja=function(){return this.ta.Ja(this.a())};f.He=function(a){return this.ta.He(a)};
f.ae=function(a){this.o=this.ta.Db(this,a);"none"==a.style.display&&(this.Dc=!1)};f.fb=function(){Ho.d.fb.call(this);oj(this,function(a){a.ha&&Io(this,a)},this);var a=this.a();this.ta.jm(this);this.ba(this.Dc,!0);this.gb().A(this,"enter",this.Lu).A(this,"highlight",this.Mu).A(this,"unhighlight",this.Nu).A(this,"open",this.FI).A(this,"close",this.wI).A(a,"mousedown",this.Yg).A(Kh(a),"mouseup",this.yI).A(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.vI);this.ai()&&Jo(this,!0)};
function Jo(a,b){var c=a.gb(),d=a.oc();b?c.A(d,"focus",a.yk).A(d,"blur",a.xk).A(a.Lq(),"key",a.Xg):c.tb(d,"focus",a.yk).tb(d,"blur",a.xk).tb(a.Lq(),"key",a.Xg)}f.zc=function(){this.ih(-1);this.Bc&&this.Bc.cc(!1);this.fi=!1;Ho.d.zc.call(this)};f.f=function(){Ho.d.f.call(this);this.rb&&(this.rb.g(),this.rb=null);this.ta=this.Bc=this.Lh=this.Zu=null};f.Lu=function(){return!0};
f.Mu=function(a){var b=rj(this,a.target);if(-1<b&&b!=this.Ne){var c=Ko(this);c&&c.og(!1);this.Ne=b;c=Ko(this);this.fi&&c.setActive(!0);this.cL&&this.Bc&&c!=this.Bc&&(Yn(c,64)?c.cc(!0):this.Bc.cc(!1))}b=this.a();null!=a.target.a()&&$k(b,"activedescendant",a.target.a().id)};f.Nu=function(a){a.target==Ko(this)&&(this.Ne=-1);this.a().removeAttribute("aria-activedescendant")};f.FI=function(a){(a=a.target)&&a!=this.Bc&&a.getParent()==this&&(this.Bc&&this.Bc.cc(!1),this.Bc=a)};
f.wI=function(a){a.target==this.Bc&&(this.Bc=null)};f.Yg=function(a){this.Kc&&(this.fi=!0);var b=this.oc();b&&mi(b)&&ni(b)?b.focus():a.preventDefault()};f.yI=function(){this.fi=!1};f.vI=function(a){var b;a:{b=a.target;if(this.Lh)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.Lh){b=this.Lh[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Yg(a);break;case "mouseup":b.ag(a);break;case "mouseover":b.Ak(a);break;case "mouseout":b.Tq(a);break;case "contextmenu":b.Yn(a)}};
f.yk=function(){};f.xk=function(){this.ih(-1);this.fi=!1;this.Bc&&this.Bc.cc(!1)};f.Xg=function(a){return this.isEnabled()&&this.sa()&&(0!=pj(this)||this.Zu)&&this.$f(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.$f=function(a){var b=Ko(this);if(b&&"function"==typeof b.Xg&&b.Xg(a)||this.Bc&&this.Bc!=b&&"function"==typeof this.Bc.Xg&&this.Bc.Xg(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.ai())this.oc().blur();else return!1;break;case 36:Lo(this);break;case 35:Mo(this);break;case 38:if(this.Fa==uo)No(this);else return!1;break;case 37:if(this.Fa==to)this.Oe()?Oo(this):No(this);else return!1;break;case 40:if(this.Fa==uo)Oo(this);else return!1;break;case 39:if(this.Fa==
to)this.Oe()?No(this):Oo(this);else return!1;break;default:return!1}return!0};function Io(a,b){var c=b.a(),c=c.id||(c.id=lj(b));a.Lh||(a.Lh={});a.Lh[c]=b}f.tn=function(a,b){Ho.d.tn.call(this,a,b)};f.yt=function(a,b,c){a.ip|=2;a.ip|=64;!this.ai()&&this.zF||a.gd(32,!1);a.Vo(!1);Ho.d.yt.call(this,a,b,c);a.ha&&this.ha&&Io(this,a);b<=this.Ne&&this.Ne++};
f.removeChild=function(a,b){if(a=r(a)?nj(this,a):a){var c=rj(this,a);-1!=c&&(c==this.Ne?(a.og(!1),this.Ne=-1):c<this.Ne&&this.Ne--);(c=a.a())&&c.id&&this.Lh&&tb(this.Lh,c.id)}a=Ho.d.removeChild.call(this,a,b);a.Vo(!0);return a};f.Eb=function(){return this.Fa};f.pi=function(a){if(this.a())throw Error("Component already rendered");this.Fa=a};f.sa=function(){return this.Dc};
f.ba=function(a,b){if(b||this.Dc!=a&&this.dispatchEvent(a?"show":"hide")){this.Dc=a;var c=this.a();c&&(Vi(c,a),this.ai()&&so(this.oc(),this.Kc&&this.Dc),b||this.dispatchEvent(this.Dc?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Kc};
f.sc=function(a){this.Kc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Kc=!0,oj(this,function(a){a.qD?delete a.qD:a.sc(!0)})):(oj(this,function(a){a.isEnabled()?a.sc(!1):a.qD=!0}),this.fi=this.Kc=!1),this.ai()&&so(this.oc(),a&&this.Dc))};f.ai=function(){return this.ru};f.yj=function(a){a!=this.ru&&this.ha&&Jo(this,a);this.ru=a;this.Kc&&this.Dc&&so(this.oc(),a)};f.ih=function(a){(a=qj(this,a))?a.og(!0):-1<this.Ne&&Ko(this).og(!1)};f.og=function(a){this.ih(rj(this,a))};
function Ko(a){return qj(a,a.Ne)}function Lo(a){Po(a,function(a,c){return(a+1)%c},pj(a)-1)}function Mo(a){Po(a,function(a,c){a--;return 0>a?c-1:a},0)}function Oo(a){Po(a,function(a,c){return(a+1)%c},a.Ne)}function No(a){Po(a,function(a,c){a--;return 0>a?c-1:a},a.Ne)}function Po(a,b,c){c=0>c?rj(a,a.Bc):c;var d=pj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=qj(a,c);if(h&&a.cz(h)){a.ih(c);break}e++;c=b.call(a,c,d)}}f.cz=function(a){return a.sa()&&a.isEnabled()&&Yn(a,2)};function Qo(){}w(Qo,Rn);fa(Qo);Qo.prototype.W=function(){return"goog-menuheader"};function Ro(a,b,c){go.call(this,a,c||Qo.fe(),b);this.gd(1,!1);this.gd(2,!1);this.gd(4,!1);this.gd(32,!1);this.R=1}w(Ro,go);On("goog-menuheader",function(){return new Ro(null)});function So(a,b){Ho.call(this,uo,b||yo.fe(),a);this.yj(!1)}w(So,Ho);f=So.prototype;f.Dt=!0;f.AF=!1;f.W=function(){return this.Qa().W()};f.fk=function(a){if(this.Qa().fk(this,a))return!0;for(var b=0,c=pj(this);b<c;b++){var d=qj(this,b);if("function"==typeof d.fk&&d.fk(a))return!0}return!1};f.ak=function(a){this.tn(a,!0)};f.ww=function(a,b){var c=this.sa();c||Vi(this.a(),!0);var d=this.a(),e=a,h=b,k=Ji(d);e instanceof rh&&(h=e.y,e=e.x);Ci(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Vi(this.a(),!1)};
f.ba=function(a,b,c){(b=So.d.ba.call(this,a,b))&&a&&this.ha&&this.Dt&&this.oc().focus();this.MB=a&&c&&u(c.clientX)?new rh(c.clientX,c.clientY):null;return b};f.Lu=function(a){this.Dt&&this.oc().focus();return So.d.Lu.call(this,a)};f.cz=function(a){return(this.AF||a.isEnabled())&&a.sa()&&Yn(a,2)};f.ae=function(a){var b=this.Qa(),c;c=this.N();c=Nh(c.ga,"div",b.W()+"-content",a);for(var d=c.length,e=0;e<d;e++)vo(b,this,c[e]);So.d.ae.call(this,a)};
f.$f=function(a){var b=So.d.$f.call(this,a);b||oj(this,function(c){!b&&c.zH&&c.tB==a.keyCode&&(this.isEnabled()&&this.og(c),b=c.Xg(a))},this);return b};f.ih=function(a){So.d.ih.call(this,a);var b=qj(this,a);if(b){a=this.a();var b=b.a(),c=Ji(b),d=Ji(a),e=dj(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new rh(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function To(){}To.prototype.ne=function(){};function Uo(a,b,c){this.element=a;this.Dn=b;this.dL=c}w(Uo,To);Uo.prototype.ne=function(a,b,c){zo(this.element,this.Dn,a,b,void 0,c,this.dL)};function Vo(a,b,c,d){Uo.call(this,a,b);this.nr=c?5:0;this.Yv=d||void 0}w(Vo,Uo);Vo.prototype.kH=function(){return this.nr};Vo.prototype.ne=function(a,b,c,d){var e=zo(this.element,this.Dn,a,b,null,c,10,d,this.Yv);if(e&496){var h=Wo(e,this.Dn);b=Wo(e,b);e=zo(this.element,h,a,b,null,c,10,d,this.Yv);e&496&&(h=Wo(e,h),b=Wo(e,b),zo(this.element,h,a,b,null,c,this.nr,d,this.Yv))}};function Wo(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Xo(a,b,c,d){Vo.call(this,a,b,c||d);if(c||d)this.nr=65|(d?32:132)}w(Xo,Vo);function Yo(){}w(Yo,Rn);fa(Yo);f=Yo.prototype;f.Ug=function(){return"button"};f.oh=function(a,b,c){switch(b){case 8:case 16:$k(a,"pressed",c);break;default:case 64:case 1:Yo.d.oh.call(this,a,b,c)}};f.v=function(a){var b=Yo.d.v.call(this,a);this.rs(b,a.Xn());var c=a.w();c&&this.F(b,c);Yn(a,16)&&this.oh(b,16,a.$h());return b};f.Db=function(a,b){b=Yo.d.Db.call(this,a,b);var c=this.w(b);a.vg=c;a.Vw=this.Xn(b);Yn(a,16)&&this.oh(b,16,a.$h());return b};f.w=ea;f.F=ea;f.Xn=function(a){return a.title};
f.rs=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.So=function(a,b){var c=a.Oe(),d=this.W()+"-collapse-left",e=this.W()+"-collapse-right";a.qk(c?e:d,!!(b&1));a.qk(c?d:e,!!(b&2))};f.W=function(){return"goog-button"};function Zo(){}w(Zo,Yo);fa(Zo);f=Zo.prototype;f.Ug=function(){};f.v=function(a){a.Vo(!1);a.vn&=-256;a.gd(32,!1);return a.N().v("button",{"class":this.tk(a).join(" "),disabled:!a.isEnabled(),title:a.Xn()||"",value:a.w()||""},a.Fq()||"")};f.He=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.Db=function(a,b){a.Vo(!1);a.vn&=-256;a.gd(32,!1);if(b.disabled){var c=this.Sn(1);dl(b,c)}return Zo.d.Db.call(this,a,b)};
f.jm=function(a){a.gb().A(a.a(),"click",a.Nk)};f.Ro=ea;f.xm=ea;f.ai=function(a){return a.isEnabled()};f.yj=ea;f.tc=function(a,b,c){Zo.d.tc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.w=function(a){return a.value};f.F=function(a,b){a&&(a.value=b)};f.oh=ea;function $o(a,b,c){go.call(this,a,b||Zo.fe(),c)}w($o,go);f=$o.prototype;f.w=function(){return this.vg};f.F=function(a){this.vg=a;this.Qa().F(this.a(),a)};f.Xn=function(){return this.Vw};f.rs=function(a){this.Vw=a;this.Qa().rs(this.a(),a)};f.So=function(a){this.Qa().So(this,a)};f.f=function(){$o.d.f.call(this);delete this.vg;delete this.Vw};f.fb=function(){$o.d.fb.call(this);if(Yn(this,32)){var a=this.oc();a&&this.gb().A(a,"keyup",this.$f)}};
f.$f=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Nk(a):32==a.keyCode};On("goog-button",function(){return new $o(null)});function ap(){}w(ap,Yo);fa(ap);f=ap.prototype;f.v=function(a){var b={"class":"goog-inline-block "+this.tk(a).join(" ")},b=a.N().v("div",b,this.pq(a.getContent(),a.N()));this.rs(b,a.Xn());Un(this,a,b);return b};f.Ug=function(){return"button"};f.Ja=function(a){return a&&a.firstChild.firstChild};f.pq=function(a,b){return b.v("div","goog-inline-block "+(this.W()+"-outer-box"),b.v("div","goog-inline-block "+(this.W()+"-inner-box"),a))};f.He=function(a){return"DIV"==a.tagName};
f.Db=function(a,b){bp(b,!0);bp(b,!1);var c;a:{c=a.N().cA(b);var d=this.W()+"-outer-box";if(c&&cl(c,d)&&(c=a.N().cA(c),d=this.W()+"-inner-box",c&&cl(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.pq(b.childNodes,a.N()));el(b,["goog-inline-block",this.W()]);return ap.d.Db.call(this,a,b)};f.W=function(){return"goog-custom-button"};
function bp(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ia(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function cp(){}w(cp,ap);fa(cp);f=cp.prototype;f.Ja=function(a){return cp.d.Ja.call(this,a&&a.firstChild)};f.Db=function(a,b){var c=Mh("*","goog-menu",b)[0];if(c){Vi(c,!1);Kh(c).body.appendChild(c);var d=new So;d.Db(c);dp(a,d)}return cp.d.Db.call(this,a,b)};f.pq=function(a,b){return cp.d.pq.call(this,[this.createCaption(a,b),b.v("div","goog-inline-block "+(this.W()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.v("div","goog-inline-block "+(this.W()+"-caption"),a)};f.W=function(){return"goog-menu-button"};function ep(a,b,c,d,e){$o.call(this,a,c||cp.fe(),d);this.gd(64,!0);this.wr=new Xo(null,5);b&&dp(this,b);this.vJ=null;this.pa=new Wf(500);!Fo&&!Go||pc("533.17.9")||(this.fr=!0);this.wJ=e||yo.fe()}w(ep,$o);f=ep.prototype;f.fr=!1;f.qL=!1;f.fb=function(){ep.d.fb.call(this);fp(this,!0);this.S&&gp(this,this.S,!0);$k(this.o,"haspopup",!!this.S)};f.zc=function(){ep.d.zc.call(this);fp(this,!1);if(this.S){this.cc(!1);this.S.zc();gp(this,this.S,!1);var a=this.S.a();a&&R(a)}};
f.f=function(){ep.d.f.call(this);this.S&&(this.S.g(),delete this.S);delete this.iL;this.pa.g()};f.Yg=function(a){ep.d.Yg.call(this,a);this.Zg()&&(this.cc(!(this.R&64),a),this.S&&(this.S.fi=!!(this.R&64)))};f.ag=function(a){ep.d.ag.call(this,a);this.S&&!this.Zg()&&(this.S.fi=!1)};f.Nk=function(){this.setActive(!1);return!0};f.xI=function(a){this.S&&this.S.sa()&&!this.fk(a.target)&&this.cc(!1)};f.fk=function(a){return a&&gi(this.a(),a)||this.S&&this.S.fk(a)||!1};
f.$f=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.S&&this.S.sa()){var b=this.S.Xg(a);return 27==a.keyCode?(this.cc(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.cc(!0,a),!0):!1};f.CI=function(){this.cc(!1)};f.DI=function(){this.Zg()||this.cc(!1)};f.xk=function(a){this.fr||this.cc(!1);ep.d.xk.call(this,a)};f.Cu=function(){this.S||dp(this,new So(this.N(),this.wJ));return this.S||null};
function dp(a,b){var c=a.S;b!=c&&(c&&(a.cc(!1),a.ha&&gp(a,c,!1),delete a.S),a.ha&&$k(a.o,"haspopup",!!b),b&&(a.S=b,b.Wo(a),b.ba(!1),c=a.fr,(b.Dt=c)&&b.yj(!0),a.ha&&gp(a,b,!0)))}f.ak=function(a){this.Cu().tn(a,!0)};f.ba=function(a,b){var c=ep.d.ba.call(this,a,b);c&&!this.sa()&&this.cc(!1);return c};f.sc=function(a){ep.d.sc.call(this,a);this.isEnabled()||this.cc(!1)};f.yw=function(){this.cc(!0)};f.$n=function(){this.cc(!1)};
f.cc=function(a,b){ep.d.cc.call(this,a);if(this.S&&!!(this.R&64)==a){if(a){if(!this.S.ha)if(this.qL){var c=ei(this.a());c?this.S.fh(c.parentNode,c):this.S.n(this.a().parentNode)}else this.S.n();this.nD=Ii(this.a());this.az=Ti(this.a());hp(this);this.S.ih(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.S.fi=!1;if(c=this.a())$k(c,"activedescendant",""),$k(c,"owns","");null!=this.Pr&&(this.Pr=void 0,(c=this.S.a())&&Pi(c,"",""))}this.S.ba(a,!1,b);if(!this.lk){var c=this.gb(),d=a?c.A:
c.tb;d.call(c,ti(this.N()),"mousedown",this.xI,!0);this.fr&&d.call(c,this.S,"blur",this.DI);d.call(c,this.pa,Xf,this.LK);a?this.pa.start():this.pa.stop()}}};function hp(a){if(a.S.ha){var b=a.wr;a.wr.element=a.iL||a.a();var c=a.S.a();a.S.sa()||(c.style.visibility="hidden",Vi(c,!0));!a.Pr&&a.wr.kH&&a.wr.nr&32&&(a.Pr=T(c));b.ne(c,b.Dn^1,a.vJ,a.Pr);a.S.sa()||(Vi(c,!1),c.style.visibility="visible")}}
f.LK=function(){var a=Ti(this.a()),b=Ii(this.a()),c=this.az;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.nD,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.az=a,this.nD=b,hp(this))};function gp(a,b,c){var d=a.gb();c=c?d.A:d.tb;c.call(d,b,"action",a.CI);c.call(d,b,"highlight",a.Mu);c.call(d,b,"unhighlight",a.Nu)}function fp(a,b){var c=a.gb();(b?c.A:c.tb).call(c,a.a(),"keydown",a.AI)}
f.Mu=function(a){var b=this.a();if(a=a.target.a()){var c=al(a,"activedescendant");a=Kh(a).getElementById(c)||a;a.id||(c=hj.fe(),a.id=":"+(c.BB++).toString(36));c="";a&&(c=a.id);$k(b,"activedescendant",c);$k(b,"owns",a.id)}};f.AI=function(a){Yn(this,32)&&this.oc()&&this.S&&this.S.sa()&&a.stopPropagation()};f.Nu=function(){if(!Ko(this.S)){var a=this.a();$k(a,"activedescendant","");$k(a,"owns","")}};On("goog-menu-button",function(){return new ep(null)});function ip(){V.call(this);this.ie=O("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":ip.CSS.iE});Zh(this.a(),this.ie);this.oj=O("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":ip.CSS.mb});Zh(this.a(),this.oj);this.S=new So;this.pb=new gk;this.Hb=[];jp(this);this.$n(void 0,0);this.S.n(this.ie);N(this.S.a(),ip.CSS.hE)}w(ip,V);v("nrg.ui.SlideInMenu",ip);ip.ID_PREFIX="nrg.ui.SlideInMenu";
ip.CSS_SUFFIX={mb:"icon",XM:"icon-hovered",hE:"menu",iE:"menuholder",jE:"menuitem",Fx:"menuitem-highlight",kE:"menuitem-icon"};var kp={Ms:null,sh:null,mb:null};function lp(a,b,c,d){d=ca(d)?d:200;return[new bk(a,d),new Vj(a,b,c,d,uk)]}function mp(a,b,c,d){d=ca(d)?d:200;return[new ak(a,d),new Vj(a,b,c,d,uk)]}f=ip.prototype;f.qc=null;f.PB=null;f.In=null;f.pm=!1;f.ao=[-100,-100];f.fp=[0,0];f.lv=!0;f.mv=!1;f.pC=function(a,b){return this.ao=[a,b]};f.EC=function(a,b){return this.fp=[a,b]};f.dH=function(){return this.ao};
f.SH=function(){return this.fp};f.Cu=function(){return this.S};f.uH=function(){return this.ie};f.vH=function(){return this.oj};f.tC=function(a){this.oj.src=a};f.GL=function(a,b){this.qc[a].mb.src=b};f.gA=function(a){return ob(this.qc).indexOf(a)};f.Gu=function(a){return ob(this.qc)[a]};f.zu=function(a){return this.qc[ob(this.qc)[a]]};f.pB=function(a){return this.lv=a};f.sJ=function(a){return this.mv=a};f.QH=function(){return this.In};
function np(a){null!=a.pb&&(a.pb.stop(),D(a.Hb,function(a){this.pb.remove(a);a.g()}.bind(a)),Jb(a.Hb))}function op(a,b,c){np(a);D(g(b)?b:[b],function(a){this.pb.add(a);this.Hb.push(a)}.bind(a));a.ie.style.visibility="visible";Tc(a.pb,"end",function(){c&&c()}.bind(a));a.pb.play()}f.Vl=null;f.vq=null;f.jC=function(a){this.vq=a;this.a().title=a};function pp(a){null!=a.Vl&&(ba.clearTimeout(a.Vl),a.Vl=null);a.Vl=Yf(function(){this.Vl=null;this.pm&&(!this.rv&&this.pm?this.$n():pp(this))}.bind(a),450)}
f.ih=function(a){N(this.qc[this.Gu(a)].sh,ip.CSS.Fx);this.lv&&(this.oj.src=this.qc[this.Gu(a)].mb.src);this.mv?this.a().title=this.zu(a).Ms.getContent():null!=this.vq&&(this.a().title=this.vq)};f.Az=function(){C(this.qc,function(a){Ch(a.sh,ip.CSS.Fx)}.bind(this))};
f.yy=function(a,b){null==this.qc&&(this.qc={});a=r(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;D(a,function(a,k){if(this.qc[a])throw Error(a+" is already in use!");c=new qo(a);this.S.ak(c);d=c.Ja();N(d,ip.CSS.jE);d.title=a;e=O("img",{id:ip.ID_PREFIX+"_MenuItemIcon_"+B(),"class":ip.CSS.kE});e.src=k<=b.length-1?b[k]:null;Zh(d,e);this.qc[a]=vb(kp);this.qc[a].Ms=c;this.qc[a].sh=d;this.qc[a].mb=e}.bind(this))};
f.Zo=function(a,b){var c=a;if(r(c)){if(!this.qc[c])throw Error(c+" does not exist!");c=this.gA(c)}this.PB=this.In?this.In:a;this.In=a;ca(b)&&!b||this.Az();this.ih(c);this.dispatchEvent({type:"item_selected",index:c,title:this.zu(c).Ms.getContent()})};f.yw=function(a,b){op(this,lp(this.ie,this.ao,this.fp,b),function(){this.pm=!0;null!=a&&a()}.bind(this))};f.$n=function(a,b){op(this,mp(this.ie,this.fp,this.ao,b),function(){this.pm=!1;this.ie.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function jp(a){F(a.a(),"click",function(){this.pm?this.$n():this.yw()}.bind(a));F(a.S,"action",function(a){this.Zo(a.target.getContent())}.bind(a));F(a.ie,"mouseover",function(){this.rv=!0}.bind(a));F(a.ie,"mouseout",function(){this.rv=!1;pp(this)}.bind(a))}
f.f=function(){ip.d.f.call(this);delete this.rv;delete this.Vl;np(this);Jb(this.Hb);delete this.Hb;C(this.qc,function(a,b){I(a);R(a);delete this.qc[b]}.bind(this));sb(this.qc);delete this.qc;R(this.ie);delete this.ie;R(this.oj);delete this.oj;I(this.S);this.S.g();this.wq(this.pb);delete this.pb;delete this.vq;delete this.PB;delete this.In;delete this.pm;delete this.ao;delete this.fp;delete this.lv;delete this.mv};v("nrg.ui.SlideInMenu.ID_PREFIX",ip.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{aN:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",ip.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",kp);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",ip.prototype.pC);v("nrg.ui.SlideInMenu.prototype.setShowPosition",ip.prototype.EC);v("nrg.ui.SlideInMenu.prototype.getHidePosition",ip.prototype.dH);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",ip.prototype.SH);v("nrg.ui.SlideInMenu.prototype.getMenu",ip.prototype.Cu);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",ip.prototype.uH);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",ip.prototype.vH);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",ip.prototype.tC);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",ip.prototype.GL);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",ip.prototype.gA);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",ip.prototype.Gu);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",ip.prototype.zu);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",ip.prototype.pB);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",ip.prototype.sJ);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",ip.prototype.QH);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",ip.prototype.ih);v("nrg.ui.SlideInMenu.prototype.deselectAll",ip.prototype.Az);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",ip.prototype.yy);v("nrg.ui.SlideInMenu.prototype.setSelected",ip.prototype.Zo);v("nrg.ui.SlideInMenu.prototype.showMenu",ip.prototype.yw);v("nrg.ui.SlideInMenu.prototype.hideMenu",ip.prototype.$n);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",ip.prototype.jC);v("nrg.ui.SlideInMenu.prototype.disposeInternal",ip.prototype.f);function qp(){V.call(this)}w(qp,V);v("xiv.ui.layouts.interactors.InputController",qp);qp.ID_PREFIX="xiv.ui.layouts.interactors.InputController";qp.CSS_SUFFIX={TD:"inputbox",$M:"inputbox-hovered",ox:"display"};f=qp.prototype;f.kf=null;f.Ka=null;f.SI=!1;f.w=function(){if(null!=this.Ka)return this.Ka.value};f.F=function(a){null!=this.Ka&&(this.Ka.value=a,this.qh())};f.bc=function(a){null!=this.Ka&&(this.Ka.max=a,this.qh())};f.Oc=function(a){null!=this.Ka&&(this.Ka.min=a,this.qh())};f.qh=function(){};
f.GB=function(a){this.Ka.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.Ka.value});this.qh()};
f.n=function(a){qp.d.n.call(this,a);this.kf=O("div");this.a().appendChild(this.kf);N(this.kf,qp.CSS.ox);this.Ka=O("input");this.Ka.type="number";this.Ka.step=1;this.Ka.min=0;this.Ka.value=0;this.a().appendChild(this.Ka);N(this.Ka,qp.CSS.TD);F(this.Ka,"mouseenter",function(a){a.stopPropagation();this.Ka.style.opacity=1;this.kf.style.opacity=0}.bind(this));F(this.Ka,"mouseleave",function(a){a.stopPropagation();this.Ka.style.opacity=0;this.kf.style.opacity=1}.bind(this));F(this.Ka,"input",this.GB.bind(this));
this.qh()};f.f=function(){qp.d.f.call(this);delete this.SI;this.Ka&&(I(this.Ka),R(this.Ka),delete this.Ka);this.kf&&(I(this.kf),R(this.kf),delete this.kf)};v("xiv.ui.layouts.interactors.InputController.EventType",{ZM:"input",ox:"display"});v("xiv.ui.layouts.interactors.InputController.ID_PREFIX",qp.ID_PREFIX);v("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",qp.CSS_SUFFIX);v("xiv.ui.layouts.interactors.InputController.prototype.displayElt",qp.prototype.kf);
v("xiv.ui.layouts.interactors.InputController.prototype.inputBox",qp.prototype.Ka);v("xiv.ui.layouts.interactors.InputController.prototype.getValue",qp.prototype.w);v("xiv.ui.layouts.interactors.InputController.prototype.setValue",qp.prototype.F);v("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",qp.prototype.bc);v("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",qp.prototype.Oc);v("xiv.ui.layouts.interactors.InputController.prototype.updateValue",qp.prototype.qh);
v("xiv.ui.layouts.interactors.InputController.prototype.onInput",qp.prototype.GB);v("xiv.ui.layouts.interactors.InputController.prototype.render",qp.prototype.n);v("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",qp.prototype.f);function rp(){V.call(this)}w(rp,qp);v("xiv.ui.layouts.interactors.FrameDisplay",rp);rp.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";rp.prototype.qh=function(){this.kf.innerHTML=this.Ka.value+" / "+this.Ka.max};v("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",rp.ID_PREFIX);v("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",rp.prototype.qh);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function sp(a,b,c){this.af=this.$e=this.Ze=0;3==arguments.length?(this.Ze=Number(a),this.$e=Number(b),this.af=Number(c)):a instanceof sp?(this.Ze=Number(a.x()),this.$e=Number(a.y()),this.af=Number(a.z())):(this.Ze=Number(a[0]),this.$e=Number(a[1]),this.af=Number(a[2]))}
sp.prototype={clone:function(){return new sp(this.Ze,this.$e,this.af)},$i:function(a){return this.Ze*a.x()+this.$e*a.y()+this.af*a.z()},pr:function(a,b){return tp(this,up(vp(a,this),b))},length:function(){return Math.sqrt(this.$i(this))},jk:function(a){return new sp(this.$e*a.z()-this.af*a.y(),this.af*a.x()-this.Ze*a.z(),this.Ze*a.y()-this.$e*a.x())},x:function(){return this.Ze},y:function(){return this.$e},z:function(){return this.af}};
function wp(a){var b=a.length();return new sp(a.Ze/b,a.$e/b,a.af/b)}function up(a,b){return new sp(a.Ze*b,a.$e*b,a.af*b)}function vp(a,b){return new sp(a.Ze-b.x(),a.$e-b.y(),a.af-b.z())}function tp(a,b){return new sp(a.Ze+b.x(),a.$e+b.y(),a.af+b.z())}function xp(a){return new sp(-a.Ze,-a.$e,-a.af)};function yp(a,b){this.cw=new sp(a);this.fd=new sp(b)}yp.prototype={clone:function(){return new yp(this.cw.clone(),this.fd.clone())},sk:function(){this.fd=xp(this.fd)},Ue:function(){return this.cw}};function zp(a,b){this.fd=a;this.Ap=b}zp.prototype={clone:function(){return new zp(this.fd.clone(),this.Ap)},sk:function(){this.fd=xp(this.fd);this.Ap=-this.Ap}};function Ap(a,b){this.ui=a;this.ss=b;var c=a[0].Ue(),d=a[1].Ue(),e=a[2].Ue(),d=wp(vp(d,c).jk(vp(e,c)));this.Te=new zp(d,d.$i(c))}Ap.prototype={clone:function(){var a=this.ui.map(function(a){return a.clone()});return new Ap(a,this.ss)},sk:function(){this.ui.reverse().map(function(a){a.sk()});this.Te.sk()}};
function Bp(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.ui.length;n++){var p=b.fd.$i(a.ui[n].Ue())-b.Ap,p=-1E-5>p?2:1E-5<p?1:0,k=k|p;l.push(p)}switch(k){case 0:(0<b.fd.$i(a.Te.fd)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.ui.length;n++){var m=(n+1)%a.ui.length,p=l[n],q=l[m],k=a.ui[n],m=a.ui[m];2!=p&&c.push(k);1!=p&&d.push(2!=p?k.clone():k);3==(p|q)&&(p=(b.Ap-b.fd.$i(k.Ue()))/b.fd.$i(vp(m.Ue(),k.Ue())),p=new yp(k.cw.pr(m.Ue(),p),k.fd.pr(m.fd,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new Ap(c,a.ss));3<=d.length&&h.push(new Ap(d,a.ss))}};function Cp(a){this.Ya=this.Ua=this.Te=null;this.Lb=[];a&&Dp(this,a)}Cp.prototype={clone:function(){var a=new Cp;Ep(a,this.Te&&this.Te.clone());Fp(a,this.Ua&&this.Ua.clone());Gp(a,this.Ya&&this.Ya.clone());a.ps(this.Lb.map(function(a){return a.clone()}));return a},Fb:function(){for(var a=0;a<this.Lb.length;a++)this.Lb[a].sk();this.Te.sk();this.Ua&&this.Ua.Fb();this.Ya&&this.Ya.Fb();a=this.Ua;this.Ua=this.Ya;this.Ya=a},ps:function(a){this.Lb=a}};function Gp(a,b){a.Ya=b}function Fp(a,b){a.Ua=b}
function Ep(a,b){a.Te=b}function Dp(a,b){if(b.length){a.Te||(a.Te=b[0].Te.clone());for(var c=[],d=[],e=0;e<b.length;e++)Bp(b[e],a.Te,a.Lb,a.Lb,c,d);c.length&&(a.Ua||(a.Ua=new Cp),Dp(a.Ua,c));d.length&&(a.Ya||(a.Ya=new Cp),Dp(a.Ya,d))}}function Hp(a){var b=a.Lb.slice();a.Ua&&(b=b.concat(Hp(a.Ua)));a.Ya&&(b=b.concat(Hp(a.Ya)));return b}function Ip(a,b){a.Lb=Jp(b,a.Lb);a.Ua&&Ip(a.Ua,b);a.Ya&&Ip(a.Ya,b)}
function Jp(a,b){if(!a.Te)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Bp(b[e],a.Te,c,d,c,d);a.Ua&&(c=Jp(a.Ua,c));d=a.Ya?Jp(a.Ya,d):[];return c.concat(d)};function Kp(){this.Lb=[]}function Lp(a){var b=new Kp;b.ps(a);return b}
Kp.prototype={clone:function(){var a=new Kp;a.ps(this.Lb.map(function(a){return a.clone()}));return a},$w:function(a){var b=new Cp(this.clone().Lb);a=new Cp(a.clone().Lb);Ip(b,a);Ip(a,b);a.Fb();Ip(a,b);a.Fb();Dp(b,Hp(a));return Lp(Hp(b))},Cc:function(a){var b=new Cp(this.clone().Lb);a=new Cp(a.clone().Lb);b.Fb();Ip(b,a);Ip(a,b);a.Fb();Ip(a,b);a.Fb();Dp(b,Hp(a));b.Fb();return Lp(Hp(b))},Vu:function(a){var b=new Cp(this.clone().Lb);a=new Cp(a.clone().Lb);b.Fb();Ip(a,b);a.Fb();Ip(b,a);Ip(a,b);Dp(b,Hp(a));
b.Fb();return Lp(Hp(b))},inverse:function(){var a=this.clone();a.Lb.map(function(a){a.sk()});return a},ps:function(a){this.Lb=a}};function Mp(){}function Np(a){for(var b=a.C.count,c=[],d=0,d=0;d<b;d+=3){var e=a.C.get(d),h=a.C.get(d+1),k=a.C.get(d+2),l=a.da.get(d),n=a.da.get(d+1),p=a.da.get(d+2),m=a.Ha;a.Hc&&0<a.Hc.length&&(m=a.Hc.get(d));var q=[];q.push(new yp(e,l));q.push(new yp(h,n));q.push(new yp(k,p));c.push(new Ap(q,m))}return Lp(c)}
function Op(a,b){if(!(null!=b&&b instanceof Kp))throw Error("Invalid CSG object.");var c=new dd,d=[];Db(b.Lb,function(a){var b=[],k=a.ss,b=Db(a.ui,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.fF=Db(c.unique(),function(a){return[a.Ue().x(),a.Ue().y(),a.Ue().z()]});a.eF=Db(c.unique(),function(a){return[a.fd.x(),a.fd.y(),a.fd.z()]});a.dF=Db(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.C=new cd(9*d.length);
a.da=new cd(9*d.length);a.Hc=new cd(9*d.length);Db(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.fF,n=this.eF,p=this.dF;this.C.add(d[b][0],d[b][1],d[b][2]);this.C.add(d[c][0],d[c][1],d[c][2]);this.C.add(d[a][0],d[a][1],d[a][2]);this.da.add(n[b][0],n[b][1],n[b][2]);this.da.add(n[c][0],n[c][1],n[c][2]);this.da.add(n[a][0],n[a][1],n[a][2]);p[b]&&this.Hc.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Hc.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Hc.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Hc.Ma&&(a.Hc=null);
a.Ed=Sd}Mp.prototype.$w=function(a){if(null==a||!(a instanceof Kp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Np(b));a=new Vd;xa(a,new Mp);Op(a,Np(this).$w(b));return a};Mp.prototype.Cc=function(a){if(null==a||!(a instanceof Kp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Np(b));a=new Vd;xa(a,new Mp);Op(a,Np(this).Cc(b));return a};
Mp.prototype.Vu=function(a){if(null==a||!(a instanceof Kp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Np(b));a=new Vd;xa(a,new Mp);Op(a,Np(this).Vu(b));return a};Mp.prototype.inverse=function(){var a=new Vd;xa(a,new Mp);Op(a,Np(this).inverse());return a};v("X.constructable",Mp);v("X.constructable.prototype.intersect",Mp.prototype.Vu);v("X.constructable.prototype.inverse",Mp.prototype.inverse);v("X.constructable.prototype.subtract",Mp.prototype.Cc);
v("X.constructable.prototype.union",Mp.prototype.$w);function Pp(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new sp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new yp(tp(c,up(e,d)),e))}this.Lb=[];a=a||{};var c=new sp(a.$d||[0,0,0]),d=a.dh||1,e=a.za||16;a=a.XL||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new Ap(k));return Lp(h)}w(Pp,Kp);function Qp(){Vd.call(this);this.s="sphere";this.Ta=[0,0,0];this.Uj=5;this.Wc=32;this.kF=16;xa(this,new Mp)}w(Qp,Vd);Qp.prototype.__defineGetter__("center",function(){return this.Ta});Qp.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Ta=a});Qp.prototype.__defineGetter__("radius",function(){return this.Uj});Qp.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Uj=a});
Qp.prototype.ea=function(){Op(this,new Pp({$d:this.Ta,dh:this.Uj,za:this.Wc,XL:this.kF}));Qp.d.ea.call(this)};v("X.sphere",Qp);v("X.sphere.prototype.modified",Qp.prototype.ea);function Rp(a,b){$c.call(this);this.o=a;var c=fi(this.o)?this.o:this.o?this.o.body:null;this.dJ=!!c&&Ki(c);this.hB=F(this.o,hc?"DOMMouseScroll":"mousewheel",this,b)}w(Rp,$c);
Rp.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Lc;if("mousewheel"==a.type){c=1;if(E||ic&&(dc||pc("532.0")))c=40;d=Sp(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=Sp(-a.wheelDeltaX,c),c=Sp(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;u(this.qB)&&(b=hd(b,-this.qB,this.qB));u(this.rB)&&(c=hd(c,-this.rB,this.rB));this.dJ&&(b=-b);b=new Tp(d,a,b,c);this.dispatchEvent(b)};function Sp(a,b){return ic&&(cc||ec)&&0!=a%b?a:a/b}
Rp.prototype.f=function(){Rp.d.f.call(this);Vc(this.hB);this.hB=null};function Tp(a,b,c,d){Hc.call(this,b);this.type="mousewheel";this.detail=a;this.Oh=c;this.Hd=d}w(Tp,Hc);function Up(){$c.call(this)}w(Up,$c);f=Up.prototype;f.vg=0;f.hg=0;f.tf=100;f.Je=0;f.qi=1;f.je=!1;f.Ik=!1;f.F=function(a){a=Vp(this,a);this.vg!=a&&(this.vg=a+this.Je>this.tf?this.tf-this.Je:a<this.hg?this.hg:a,this.je||this.Ik||this.dispatchEvent("change"))};f.w=function(){return Vp(this,this.vg)};f.xj=function(a){a=Vp(this,a);this.Je!=a&&(this.Je=0>a?0:this.vg+a>this.tf?this.tf-this.vg:a,this.je||this.Ik||this.dispatchEvent("change"))};
f.mf=function(){var a=this.Je;return null==this.qi?a:Math.round(a/this.qi)*this.qi};f.Oc=function(a){if(this.hg!=a){var b=this.je;this.je=!0;this.hg=a;a+this.Je>this.tf&&(this.Je=this.tf-this.hg);a>this.vg&&this.F(a);a>this.tf&&(this.Je=0,this.bc(a),this.F(a));(this.je=b)||this.Ik||this.dispatchEvent("change")}};f.ma=function(){return Vp(this,this.hg)};
f.bc=function(a){a=Vp(this,a);if(this.tf!=a){var b=this.je;this.je=!0;this.tf=a;a<this.vg+this.Je&&this.F(a-this.Je);a<this.hg&&(this.Je=0,this.Oc(a),this.F(this.tf));a<this.hg+this.Je&&(this.Je=this.tf-this.hg);(this.je=b)||this.Ik||this.dispatchEvent("change")}};f.aa=function(){return Vp(this,this.tf)};f.Vh=function(){return this.qi};f.qg=function(a){this.qi!=a&&(this.qi=a,a=this.je,this.je=!0,this.bc(this.aa()),this.xj(this.mf()),this.F(this.w()),(this.je=a)||this.Ik||this.dispatchEvent("change"))};
function Vp(a,b){return null==a.qi?b:a.hg+Math.round((b-a.hg)/a.qi)*a.qi};function Wp(a,b){ij.call(this,a);this.Oy=null;this.La=new Up;this.gJ=b||gd;F(this.La,"change",this.KA,!1,this)}w(Wp,ij);f=Wp.prototype;f.Fa="horizontal";f.jo=!1;f.EJ=!1;f.Kg=10;f.xr=0;f.aB=!0;f.Ar=0;f.oE=1E3;f.Kc=!0;f.Ke=!1;f.v=function(){Wp.d.v.call(this);var a=this.N().v("div",this.W(this.Fa));this.ae(a)};f.ae=function(a){Wp.d.ae.call(this,a);dl(a,this.W(this.Fa));this.tz();Zk(this.a(),"slider");Xp(this)};
f.fb=function(){Wp.d.fb.call(this);this.xe=new hm(this.qa);this.Wf=new hm(this.Ac);this.xe.cj(this.Ke);this.Wf.cj(this.Ke);this.xe.eu=this.Wf.eu=ea;this.rb=new $n(this.a());Yp(this,!0);this.a().tabIndex=0;this.ph()};
function Yp(a,b){b?(a.gb().A(a.xe,"beforedrag",a.Qq).A(a.Wf,"beforedrag",a.Qq).A(a.xe,["start","end"],a.Vq).A(a.Wf,["start","end"],a.Vq).A(a.rb,"key",a.Rq).A(a.a(),"click",a.Sq).A(a.a(),"mousedown",a.Sq),a.aB&&Zp(a,!0)):(a.gb().tb(a.xe,"beforedrag",a.Qq).tb(a.Wf,"beforedrag",a.Qq).tb(a.xe,["start","end"],a.Vq).tb(a.Wf,["start","end"],a.Vq).tb(a.rb,"key",a.Rq).tb(a.a(),"click",a.Sq).tb(a.a(),"mousedown",a.Sq),a.aB&&Zp(a,!1))}f.zc=function(){Wp.d.zc.call(this);Dc(this.xe,this.Wf,this.rb,this.Hk)};
f.Qq=function(a){var b=a.mu==this.xe?this.qa:this.Ac,c;"vertical"==this.Fa?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.aa()-this.ma())+this.ma()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.aa()-this.ma())+this.ma();c=a.mu==this.xe?Math.min(Math.max(c,this.ma()),this.w()+this.mf()):Math.min(Math.max(c,this.w()),this.aa());$p(this,b,c)};
f.Vq=function(a){var b="start"==a.type;hl(this.a(),"goog-slider-dragging",b);hl(a.target.handle,"goog-slider-thumb-dragging",b);a=a.mu==this.xe;b?(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j")):(this.dispatchEvent("m"),this.dispatchEvent(a?"i":"k"))};
f.Rq=function(a){var b=!0;switch(a.keyCode){case 36:aq(this,this.ma());break;case 35:aq(this,this.aa());break;case 33:bq(this,this.Kg);break;case 34:bq(this,-this.Kg);break;case 37:var c=this.Ke&&this.Oe()?1:-1;bq(this,a.shiftKey?c*this.Kg:c*this.wp);break;case 40:bq(this,a.shiftKey?-this.Kg:-this.wp);break;case 39:c=this.Ke&&this.Oe()?-1:1;bq(this,a.shiftKey?c*this.Kg:c*this.wp);break;case 38:bq(this,a.shiftKey?this.Kg:this.wp);break;default:b=!1}b&&a.preventDefault()};
f.Sq=function(a){this.a().focus&&this.a().focus();var b=a.target;gi(this.qa,b)||gi(this.Ac,b)||(b="click"==a.type,b&&va()<this.Ar+this.oE||(b||(this.Ar=va()),this.EJ?aq(this,cq(this,a)):(this.Nw(a),this.zf=dq(this,cq(this,a)),this.WA="vertical"==this.Fa?this.mr<this.zf.offsetTop:this.mr>eq(this,this.zf)+this.zf.offsetWidth,a=Kh(this.a()),this.gb().A(a,"mouseup",this.Lw,!0).A(this.a(),"mousemove",this.Nw),this.qj||(this.qj=new Wf(200),this.gb().A(this.qj,Xf,this.LA)),this.LA(),this.qj.start())))};
f.JA=function(a){bq(this,(0<a.detail?-1:1)*this.wp);a.preventDefault()};f.LA=function(){var a;if("vertical"==this.Fa){var b=this.mr,c=this.zf.offsetTop;this.WA?b<c&&(a=fq(this,this.zf)+this.Kg):b>c+this.zf.offsetHeight&&(a=fq(this,this.zf)-this.Kg)}else b=this.mr,c=eq(this,this.zf),this.WA?b>c+this.zf.offsetWidth&&(a=fq(this,this.zf)+this.Kg):b<c&&(a=fq(this,this.zf)-this.Kg);ca(a)&&$p(this,this.zf,a)};
f.Lw=function(){this.qj&&this.qj.stop();var a=Kh(this.a());this.gb().tb(a,"mouseup",this.Lw,!0).tb(this.a(),"mousemove",this.Nw)};function gq(a,b){var c=Li(b,a.a());return"vertical"==a.Fa?c.y:a.Ke&&a.Oe()?a.a().clientWidth-c.x:c.x}f.Nw=function(a){this.mr=gq(this,a)};function cq(a,b){var c=a.ma(),d=a.aa();if("vertical"==a.Fa){var e=a.qa.offsetHeight,h=a.a().clientHeight-e,e=gq(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.qa.offsetWidth;h=a.a().clientWidth-e;e=gq(a,b)-e/2;return(d-c)*e/h+c}
function fq(a,b){if(b==a.qa)return a.La.w();if(b==a.Ac)return a.La.w()+a.La.mf();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.dg=function(){return this.xe.dg()||this.Wf.dg()};function bq(a,b){Math.abs(b)<a.Vh()&&(b=(0==b?0:0>b?-1:1)*a.Vh());var c=fq(a,a.qa)+b,d=fq(a,a.Ac)+b,c=hd(c,a.ma(),a.aa()-a.xr),d=hd(d,a.ma()+a.xr,a.aa());hq(a,c,d-c)}function $p(a,b,c){var d=Vp(a.La,c);c=b==a.qa?d:a.La.w();b=b==a.Ac?d:a.La.w()+a.La.mf();c>=a.ma()&&b>=c+a.xr&&a.aa()>=b&&hq(a,c,b-c)}
function hq(a,b,c){a.ma()<=b&&b<=a.aa()-c&&a.xr<=c&&c<=a.aa()-b&&(b!=a.w()||c!=a.mf())&&(a.La.Ik=!0,a.La.xj(0),a.La.F(b),a.La.xj(c),a.La.Ik=!1,a.KA())}f.ma=function(){return this.La.ma()};f.Oc=function(a){this.La.Oc(a)};f.aa=function(){return this.La.aa()};f.bc=function(a){this.La.bc(a)};function dq(a,b){return b<=a.La.w()+a.La.mf()/2?a.qa:a.Ac}f.KA=function(){this.ph();Xp(this);this.dispatchEvent("change")};
f.ph=function(){if(this.qa&&!this.jo){var a=iq(this,fq(this,this.qa)),b=iq(this,fq(this,this.Ac));if("vertical"==this.Fa)this.qa.style.top=a.y+"px",this.Ac.style.top=b.y+"px",this.Ub&&(a=jq(b.y,a.y,this.qa.offsetHeight),this.Ub.style.top=a.offset+"px",this.Ub.style.height=a.size+"px");else{var c=this.Ke&&this.Oe()?"right":"left";this.qa.style[c]=a.x+"px";this.Ac.style[c]=b.x+"px";this.Ub&&(a=jq(a.x,b.x,this.qa.offsetWidth),this.Ub.style[c]=a.offset+"px",this.Ub.style.width=a.size+"px")}}};
function jq(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function iq(a,b){var c=new rh;if(a.qa){var d=a.ma(),e=a.aa(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Fa?(d=a.a().clientHeight-a.qa.offsetHeight,e=Math.round(e*d),c.x=eq(a,a.qa),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.qa.offsetWidth)),c.x=d,c.y=a.qa.offsetTop)}return c}
function aq(a,b){b=hd(b,a.ma(),a.aa());a.jo&&a.uq.stop(!0);var c=new gk,d,e=dq(a,b),h=a.w(),k=a.mf(),l=fq(a,e),n=iq(a,l);d=a.Vh();Math.abs(b-l)<d&&(b=hd(l+(b>l?d:-d),a.ma(),a.aa()));$p(a,e,b);l=iq(a,fq(a,e));d="vertical"==a.Fa?[eq(a,e),l.y]:[l.x,e.offsetTop];n=new Vj(e,[n.x,n.y],d,100);n.cj(a.Ke);c.add(n);a.Ub&&kq(a,e,h,k,l,c);a.Oy&&(e=a.Oy.dP(h,b,100),D(e,function(a){c.add(a)}));a.uq=c;a.gb().A(c,"end",a.oG);a.jo=!0;c.play(!1)}f.Kd=function(){return this.jo};
function kq(a,b,c,d,e,h){var k=iq(a,c),l=iq(a,c+d);c=k;d=l;b==a.qa?c=e:d=e;"vertical"==a.Fa?(b=jq(l.y,k.y,a.qa.offsetHeight),k=jq(d.y,c.y,a.qa.offsetHeight),e=new Vj(a.Ub,[eq(a,a.Ub),b.offset],[eq(a,a.Ub),k.offset],100),b=new Yj(a.Ub,b.size,k.size,100)):(b=jq(k.x,l.x,a.qa.offsetWidth),k=jq(c.x,d.x,a.qa.offsetWidth),e=new Vj(a.Ub,[b.offset,a.Ub.offsetTop],[k.offset,a.Ub.offsetTop],100),b=new Xj(a.Ub,b.size,k.size,100));e.cj(a.Ke);b.cj(a.Ke);h.add(e);h.add(b)}f.oG=function(){this.jo=!1};
f.pi=function(a){if(this.Fa!=a){var b=this.W(this.Fa),c=this.W(a);this.Fa=a;this.a()&&(a=this.a(),cl(a,b)&&(fl(a,b),dl(a,c)),b=this.Ke&&this.Oe()?"right":"left",this.qa.style[b]=this.qa.style.top="",this.Ac.style[b]=this.Ac.style.top="",this.Ub&&(this.Ub.style[b]=this.Ub.style.top="",this.Ub.style.width=this.Ub.style.height=""),this.ph())}};f.Eb=function(){return this.Fa};
f.f=function(){Wp.d.f.call(this);this.qj&&this.qj.g();delete this.qj;this.uq&&this.uq.g();delete this.uq;delete this.qa;delete this.Ac;this.Ub&&delete this.Ub;this.La.g();delete this.La;this.rb&&(this.rb.g(),delete this.rb);this.Hk&&(this.Hk.g(),delete this.Hk);this.xe&&(this.xe.g(),delete this.xe);this.Wf&&(this.Wf.g(),delete this.Wf)};f.wp=1;f.Vh=function(){return this.La.Vh()};f.qg=function(a){this.La.qg(a)};f.w=function(){return this.La.w()};f.F=function(a){$p(this,this.qa,a)};f.mf=function(){return this.La.mf()};
f.xj=function(a){$p(this,this.Ac,this.La.w()+a)};f.ba=function(a){Vi(this.a(),a);a&&this.ph()};function Xp(a){var b=a.a();b&&($k(b,"valuemin",a.ma()),$k(b,"valuemax",a.aa()),$k(b,"valuenow",a.w()),$k(b,"valuetext",a.gJ(a.w())||""))}function Zp(a,b){b?(a.Hk||(a.Hk=new Rp(a.a())),a.gb().A(a.Hk,"mousewheel",a.JA)):a.gb().tb(a.Hk,"mousewheel",a.JA)}f.sc=function(a){this.Kc!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Kc=a,Yp(this,a),a||this.Lw(),hl(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Kc};function eq(a,b){return a.Ke?Tj(b):b.offsetLeft};function lq(a){Wp.call(this,a);this.La.F(this.ma());this.La.xj(this.aa()-this.ma())}w(lq,Wp);lq.prototype.W=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};lq.prototype.hk=function(a){a=this.N().v("div",a);Zk(a,"button");return a};
lq.prototype.tz=function(){var a=Mh(null,"goog-twothumbslider-value-thumb",this.a())[0],b=Mh(null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Mh(null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.hk("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.hk("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.N().v("div","goog-twothumbslider-rangehighlight"),this.N().Uu(c,a));this.qa=a;this.Ac=b;this.Ub=c};function mq(){Vd.call(this);this.s="fibers";xa(this,new fd)}w(mq,Vd);v("X.fibers",mq);function nq(){this.Tk=O("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.Ec});tl.call(this,"",this.Tk,!0);N(this.Ib,nq.CSS.AE);this.Vf.style.marginTop="-4px";this.Ib.style.marginTop="0px"}w(nq,tl);v("nrg.ui.ZippyTree",nq);var xn="o",oq={JM:"n",pE:xn};nq.ID_PREFIX="nrg.ui.ZippyTree";nq.CSS_SUFFIX={AE:"rootnode"};f=nq.prototype;f.Fk=1;f.ej=!1;f.aJ=!0;f.br=1;f.ou=0;f.es=null;f.Cf=null;f.ow=function(a){this.yz=a};f.km=function(){return 0===bi(this.Vf).length};
f.lz=function(){this.tp(function(a){a.gc.ac(!1)},this)};f.Bn=function(){this.lz()};f.BG=function(){var a=[];this.tp(function(b){a.push(b)},this);return a};f.Iu=function(){var a=[];C(this.Rc,function(b){a.push(b)});return a};f.Tl=function(){this.tp(function(a){a.gc.ac(!0)},this)};f.tp=function(a,b){C(b.Rc,function(b){a(b);this.tp(a,b)}.bind(this))};f.a=function(){return this.Tk};f.ac=function(a,b){return pq(this,a,b,!0)};
function pq(a,b,c,d){c=null!=c?c:a;if(null!=c.Rc[b]){var e=c.Rc[b],h=e.gc;null!=h.gf?Tc(h,d?"a":"b",function(){h.Tg!=d&&e.ac(d)}):e.ac(d);return e}}f.So=function(a,b){return pq(this,a,b,!1)};f.Iq=function(a){var b=this,c=[];D(a,function(a){c.push(b.Rc[a]);b=b.Rc[a]}.bind(this));return c};f.ff=function(a,b){!g(a)||fi(a)?qq(this,a,b):D(a,function(a){this.ff(a,b)}.bind(this))};function qq(a,b,c){c?(c&&(c=r(c)?[c]:c,c.length>a.Fk&&(a.Fk=c.length)),a.En(c,a,b)):Zh(a.Tk,b)}
f.En=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.Vf;if(0==a.length)rq(this,b,c),null!=c&&sq(this,c,d-2);else{0<a.length&&a.length>this.Fk&&(this.Fk=a.length);if(b.Rc[a[0]])e=b.Rc[a[0]];else{var h=a[0];e.style.opacity=this.br;var k=new tl(h,e,!1);b.Ib.parentNode==this.Tk&&2==this.Tk.childNodes.length&&(k.Ib.style.marginTop="5px");k.Ib.style.left="inherit";k.Ib.style.width="inherit";tq(this,k);b.Rc[h]=k;k.Ib.style.opacity=this.br;e.style.opacity=1;this.ej&&uq(this,k.Ib);this.dispatchEvent({type:xn,
me:k});e=k}sq(this,e.Ib,d-1);this.En(1<a.length?a.slice(1):[],e,c,d+1)}};function sq(a,b,c){null!=b&&b._maxDepth!=a.Fk&&(null==b._maxDepth&&(b._maxDepth=a.Fk),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}function tq(a,b){F(b,"a",function(){this.dispatchEvent({type:"a",me:b})}.bind(a));F(b,"c",function(){this.dispatchEvent({type:"c",me:b})}.bind(a));F(b,"b",function(){this.dispatchEvent({type:"b",me:b})}.bind(a))}
function uq(a,b){(new bk(b,a.ou)).play()}f.gL=function(){this.ej&&!this.Cf.pf()&&this.Cf.play()};f.kM=function(a){this.br=(this.ej=!0===a)?0:1;this.ou=this.ej?300:0;this.ej&&(vq(this),this.es=[],this.Cf=new gk,F(this.Cf,"end",this.jz.bind(this)))};
function rq(a,b,c){if(null!=c){var d=b.Vf;a=function(){rk(c,{position:"relative"});c.style.opacity=0;wk(c,300);null!=this.yz?this.yz(d,c):d.appendChild(c);wq(d);this.ej?uq(this,c,function(){this.dispatchEvent({type:"n"})}.bind(this)):this.dispatchEvent({type:"n"})}.bind(a);b.Ou()&&!b.rr&&b.iw(!0);a()}}
function wq(a){var b=[],c=[],d=bi(a),e=d.length;D(d,function(a){cl(a,tl.CSS.Cp)?b.push(a):1==a.childNodes.length&&cl(a.childNodes[0],tl.CSS.sh)&&c.push(a)});D(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}f.jz=function(){for(this.Cf.g();this.es.length;)this.Cf.add(this.es[0]),zb.splice.call(this.es,0,1);F(this.Cf,"end",this.jz.bind(this));this.Cf.play()};
function vq(a){null!=a.hC&&(a.iu(a.hC),delete a.hC);null!=a.Cf&&(a.wq(a.Cf),delete a.Cf)}f.f=function(){nq.d.f.call(this);R(this.Tk);delete this.Tk;vq(this);delete this.Fk;delete this.ej;delete this.aJ;delete this.br;delete this.ou};v("nrg.ui.ZippyTree.EventType",oq);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",nq.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",nq.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");
v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=bi(a),d=b[ul].toLowerCase(),e,h,k=c.length,l=0;l<k;l++){if(h=c[l],null!=h[ul]&&(e=h[ul].toLowerCase(),e=Ka(d,e),0>e)){ai(b,h);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",nq.prototype.ow);v("nrg.ui.ZippyTree.prototype.isEmpty",nq.prototype.km);
v("nrg.ui.ZippyTree.prototype.contractAll",nq.prototype.lz);v("nrg.ui.ZippyTree.prototype.collapseAll",nq.prototype.Bn);v("nrg.ui.ZippyTree.prototype.getAllNodes",nq.prototype.BG);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",nq.prototype.Iu);v("nrg.ui.ZippyTree.prototype.expandAll",nq.prototype.Tl);v("nrg.ui.ZippyTree.prototype.traverse",nq.prototype.tp);v("nrg.ui.ZippyTree.prototype.getElement",nq.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",nq.prototype.ac);
v("nrg.ui.ZippyTree.prototype.setCollapsed",nq.prototype.So);v("nrg.ui.ZippyTree.prototype.getFolderNodes",nq.prototype.Iq);v("nrg.ui.ZippyTree.prototype.addContents",nq.prototype.ff);v("nrg.ui.ZippyTree.prototype.createBranch",nq.prototype.En);v("nrg.ui.ZippyTree.prototype.playFx",nq.prototype.gL);v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",nq.prototype.kM);v("nrg.ui.ZippyTree.prototype.disposeInternal",nq.prototype.f);function xq(){}w(xq,Rn);fa(xq);xq.prototype.v=function(a){var b=a.N().v("span",this.tk(a).join(" "));yq(this,b,a.Ti);return b};xq.prototype.Db=function(a,b){b=xq.d.Db.call(this,a,b);var c=bl(b),d=zq;Ib(c,Aq(this,Bq))?d=Bq:Ib(c,Aq(this,Cq))?d=Cq:Ib(c,Aq(this,zq))&&(d=zq);a.Ti=d;$k(b,"checked",d==Bq?"mixed":d==Cq?"true":"false");return b};xq.prototype.Ug=function(){return"checkbox"};
function yq(a,b,c){if(b){var d=Aq(a,c);cl(b,d)||(C(Dq,function(a){a=Aq(this,a);hl(b,a,a==d)},a),$k(b,"checked",c==Bq?"mixed":c==Cq?"true":"false"))}}xq.prototype.W=function(){return"goog-checkbox"};function Aq(a,b){var c=a.W();if(b==Cq)return c+"-checked";if(b==zq)return c+"-unchecked";if(b==Bq)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function Eq(a,b,c){c=c||xq.fe();go.call(this,null,c,b);this.Ti=ca(a)?a:zq}w(Eq,go);var Cq=!0,zq=!1,Bq=null,Dq={CM:Cq,lO:zq,mO:Bq};f=Eq.prototype;f.Jb=null;f.$h=function(){return this.Ti==Cq};f.pe=function(a){a!=this.Ti&&(this.Ti=a,yq(this.Qa(),this.a(),this.Ti))};f.pg=function(a){this.ha?(this.zc(),this.Jb=a,this.fb()):this.Jb=a};f.toggle=function(){this.pe(this.Ti?zq:Cq)};
f.fb=function(){Eq.d.fb.call(this);if(this.zk){var a=this.gb();this.Jb&&a.A(this.Jb,"click",this.Ku).A(this.Jb,"mouseover",this.Ak).A(this.Jb,"mouseout",this.Tq).A(this.Jb,"mousedown",this.Yg).A(this.Jb,"mouseup",this.ag);a.A(this.a(),"click",this.Ku)}this.Jb&&(this.Jb.id||(this.Jb.id=lj(this)+".lbl"),$k(this.a(),"labelledby",this.Jb.id))};f.sc=function(a){Eq.d.sc.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.Ku=function(a){a.stopPropagation();var b=this.Ti?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.$f=function(a){32==a.keyCode&&this.Ku(a);return!1};On("goog-checkbox",function(){return new Eq});function Fq(){Vd.call(this);this.s="mesh";xa(this,new fd)}w(Fq,Vd);v("X.mesh",Fq);function Gq(){V.call(this);this.sf=[];this.yf=[]}w(Gq,V);v("xiv.ui.ctrl.XtkController",Gq);Gq.ID_PREFIX="xiv.ui.ctrl.XtkController";Gq.CSS_SUFFIX={UD:"label",HD:"component"};var Hq=B();function Iq(){return O("div",{id:"Label_"+B(),"class":Gq.CSS.UD})}function Jq(a){a=g(a.file)?a.file[0]:a.file||a.name;return Pk(a)}function Kq(a,b){b.oC([Jq(a)])}f=Gq.prototype;f.rj=!1;f.n=function(a){Gq.d.n.call(this,a)};f.pg=function(a){null==this.Jb&&(this.Jb=Iq(),Zh(this.a(),this.Jb));this.Jb.innerHTML=a};
f.iH=function(){return this.Jb};f.vm=function(a){this.defaultValue=a};f.PG=function(){return this.defaultValue};f.oC=function(a){r(a)&&(a=[a]);this.Qn=a};f.ZG=function(){return this.Qn};f.jh=function(a){this.Ga=a};f.ge=function(){return this.Ga};function Lq(a){this.min=parseInt(a.min);this.max=parseInt(a.max);this.fg=parseInt(a.windowLow);this.Me=parseInt(a.windowHigh)}f.Wg=function(){return new Lq(this.Ga)};
f.wj=function(a){a=this.D=a;this.D instanceof ij?(a=this.D.a(),this.D.ha?this.D.a().parentNode!==this.a()&&this.D.a()!==this.a()&&this.a().appendChild(this.D.a()):this.D.n(this.a())):this.a().appendChild(a);null!=a&&N(a,Gq.CSS.HD)};f.Qz=function(){return Mb(this.sf,this.yf)};f.rH=function(){return this.sf};f.bB=function(){return this.rj};f.FL=function(a){this.rj=a};f.VH=function(){return this.yf};f.KG=function(){return this.D};f.mc=ea;
f.Gd=function(a,b,c){a=new a;a.n();r(b)&&a.pg(b);Zh(this.a(),a.a());null!=c&&F(a,"p",c);return a};f.update=function(){this.D==this?this.k():this.D.k&&this.D.k()};f.k=function(){this.D.k&&this.D!=this&&this.D.k()};f.Bt=function(a,b){var c=this.Gd(b,"Color",function(b){a.color=b.color}.bind(this));Kq(a,c);this.yf.push(c);c[Hq]=a;c.update()};f.Ky=function(a,b){var c=this.Gd(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});Kq(a,c);this.yf.push(c);c.D.F(1);c.D.k()};
f.Ct=function(a,b){var c=this.Gd(b,"Visible",function(b){a.visible=b.checked});Kq(a,c);this.yf.push(c);c.D.pe(a.visible)};
f.f=function(){Gq.d.f.call(this);this[Hq]=null;delete this.rj;delete this.Ga;D(this.yf,function(a){I(a);a.g()});Jb(this.yf);delete this.yf;D(this.sf,function(a){I(a);a.g();controller=null});Jb(this.sf);delete this.sf;null!=this.D&&(I(this.D),this.D instanceof ij?this.D.g():R(this.D),delete this.D);null!=this.Qn&&(Jb(this.Qn),delete this.Qn);null!=this.Jb&&(R(this.Jb),delete this.Jb);delete this.defaultValue};v("xiv.ui.ctrl.XtkController.ID_PREFIX",Gq.ID_PREFIX);
v("xiv.ui.ctrl.XtkController.CSS_SUFFIX",Gq.CSS_SUFFIX);v("xiv.ui.ctrl.XtkController.EventType",{BD:"p"});v("xiv.ui.ctrl.XtkController.OBJ_KEY",Hq);v("xiv.ui.ctrl.XtkController.CurrentLevels",Lq);v("xiv.ui.ctrl.XtkController.createLabel",Iq);v("xiv.ui.ctrl.XtkController.getXObjLabel",Jq);v("xiv.ui.ctrl.XtkController.getObjectCategory",function(a){if(a instanceof Fq)return"Meshes";if(a instanceof J)return"Volumes";if(a instanceof mq)return"Fibers";if(a instanceof Qp)return"Annotations"});
v("xiv.ui.ctrl.XtkController.setControllerFolders",Kq);v("xiv.ui.ctrl.XtkController.prototype.render",Gq.prototype.n);v("xiv.ui.ctrl.XtkController.prototype.setLabel",Gq.prototype.pg);v("xiv.ui.ctrl.XtkController.prototype.getLabel",Gq.prototype.iH);v("xiv.ui.ctrl.XtkController.prototype.setDefaultValue",Gq.prototype.vm);v("xiv.ui.ctrl.XtkController.prototype.getDefaultValue",Gq.prototype.PG);v("xiv.ui.ctrl.XtkController.prototype.setFolders",Gq.prototype.oC);
v("xiv.ui.ctrl.XtkController.prototype.getFolders",Gq.prototype.ZG);v("xiv.ui.ctrl.XtkController.prototype.setXObj",Gq.prototype.jh);v("xiv.ui.ctrl.XtkController.prototype.getXObj",Gq.prototype.ge);v("xiv.ui.ctrl.XtkController.prototype.setComponent",Gq.prototype.wj);v("xiv.ui.ctrl.XtkController.prototype.getAllControllers",Gq.prototype.Qz);v("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",Gq.prototype.rH);v("xiv.ui.ctrl.XtkController.prototype.isInitialized",Gq.prototype.bB);
v("xiv.ui.ctrl.XtkController.prototype.setInitialized",Gq.prototype.FL);v("xiv.ui.ctrl.XtkController.prototype.getCurrentLevels",Gq.prototype.Wg);v("xiv.ui.ctrl.XtkController.prototype.getSubControllers",Gq.prototype.VH);v("xiv.ui.ctrl.XtkController.prototype.getComponent",Gq.prototype.KG);v("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",Gq.prototype.mc);v("xiv.ui.ctrl.XtkController.prototype.createController",Gq.prototype.Gd);v("xiv.ui.ctrl.XtkController.prototype.update",Gq.prototype.update);
v("xiv.ui.ctrl.XtkController.prototype.updateStyle",Gq.prototype.k);v("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",Gq.prototype.Bt);v("xiv.ui.ctrl.XtkController.prototype.add_opacity",Gq.prototype.Ky);v("xiv.ui.ctrl.XtkController.prototype.add_visible",Gq.prototype.Ct);v("xiv.ui.ctrl.XtkController.prototype.disposeInternal",Gq.prototype.f);function Mq(){Gq.call(this)}w(Mq,Gq);v("xiv.ui.ctrl.Histogram",Mq);Mq.ID_PREFIX="xiv.ui.ctrl.Histogram";Mq.CSS_SUFFIX={AD:"canvas",bE:"linecanvas",gE:"max",nE:"min"};Mq.LEVEL_CUTOFF=.999;f=Mq.prototype;f.ab=null;f.vf=null;f.sp=null;f.As=null;f.vr=null;f.UF="rgb(40,40,40)";f.TA="rgb(90,90,90)";f.cs=!0;f.bs=function(a){this.cs=a};
f.n=function(a){Mq.d.n.call(this,a);this.wj(this);this.Si=O("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.AD});this.a().appendChild(this.Si);this.Og=this.Si.getContext("2d");this.Og.fillStyle=this.UF;this.ei=O("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.bE});this.a().appendChild(this.ei);this.eg=this.ei.getContext("2d");this.wo=O("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.gE},"1000");
this.a().appendChild(this.wo);this.xo=O("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.nE},"-1000");this.a().appendChild(this.xo)};f.ge=function(){return Mq.d.ge.call(this)};
function Nq(a){if(null==a.ab){var b=a.ge(),c=b.max;D(b.image,function(a){D(a,function(a){D(a,function(a){if(null==this.ab){this.ab=[];for(var b=0,b=0;b<=c;b++)this.ab.push(0)}this.ab[parseInt(a)]++;this.As++}.bind(this))}.bind(this))}.bind(a));if(null!=a.ab){var d,e=0;a.sp=Qb(a.ab.length);null==a.vf&&(a.vf=[],a.vr=0,D(a.ab,function(a,b){d=a/this.As;this.vf.push(d);e+=d;this.sp[b]=e;this.vr=Math.max(this.vr,d)}.bind(a)))}}}
f.Gz=function(){if(null!=this.ge()){var a=T(this.Si),b=a.width,a=a.height;if(0!=b&&0!=a&&(this.Si.height=a,this.Si.width=b,this.ei.height=a,this.ei.width=b,Nq(this),null!=this.ab))if(this.cs){for(var c=this.Wg(),d=0,e=c.Me,h=0;d<e+1;d++)this.vf[d]>h&&(h=this.vf[d]);for(var k=[],d=0;d<e+1;d++)k.push(this.vf[d]/h);for(var e=Math.round(b/c.Me),e=0<e?e:1,l=h=0,d=l=0;d<c.Me+1;d++)h=Math.round(a*k[d]),l=b/c.Me,l=Math.round(l*d),isNaN(h)||null==h||(this.Og.fillStyle=this.TA,this.Og.fillRect(e*l,a,e,-h))}else for(c=
Math.round(b/this.vf.length),c=0<c?c:1,i=k=k=k=0;i<b;i++)k=i/b,k=Math.round(this.vf.length*k)-1,k=0>k?0:k,k=Math.round(a*this.vf[k]),this.Og.fillStyle=this.TA,this.Og.fillRect(c*i,a,c,-k)}};f.kA=function(a){if(null!=this.ab)for(var b=0,c=0,d=this.ab.length;c<d;c++)if(b+=this.ab[c],b/this.As>=a)return c};f.Hz=function(){if(null!=this.ge()){var a=T(this.ei),b=a.width,a=a.height,c=this.Wg();this.ei.width=b;this.cs?Oq(this,b,a,b/c.Me):Oq(this,b,a,b/c.max)}};
function Oq(a,b,c,d){var e=a.Wg(),h=e.fg*d;d*=e.Me;var e=c/(d-h),k=-e*h,h=0*e+k,e=e*b+k;a.eg.beginPath();a.eg.strokeStyle="black";a.eg.moveTo(0,c-h);a.eg.lineTo(b,c-e);a.eg.lineWidth=.5;a.eg.stroke();0<d&&d<b&&(a.eg.moveTo(d,c),a.eg.lineTo(d,c-15),a.eg.lineWidth=.5,a.eg.stroke())}f.update=function(){if(null!=this.ge()){var a=this.Wg();this.xo.innerHTML=0<=a.fg?a.fg:0;this.wo.innerHTML=a.Me}this.Gz();this.Hz()};
f.f=function(){Mq.d.f.call(this);null!=this.wo&&(R(this.wo),delete this.wo);null!=this.xo&&(R(this.xo),delete this.xo);null!=this.Si&&(R(this.Si),delete this.Si);null!=this.ei&&(R(this.ei),delete this.ei);null!=this.ab&&(Jb(this.ab),delete this.ab);null!=this.vf&&(Jb(this.vf),delete this.vf);null!=this.sp&&(Jb(this.sp),delete this.sp);delete this.As;delete this.vr;delete this.Og;delete this.eg;delete this.WP;delete this.VP;delete this.cs};v("xiv.ui.ctrl.Histogram.EventType",{});
v("xiv.ui.ctrl.Histogram.ID_PREFIX",Mq.ID_PREFIX);v("xiv.ui.ctrl.Histogram.CSS_SUFFIX",Mq.CSS_SUFFIX);v("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",Mq.LEVEL_CUTOFF);v("xiv.ui.ctrl.Histogram.prototype.scaleOnChange",Mq.prototype.bs);v("xiv.ui.ctrl.Histogram.prototype.render",Mq.prototype.n);v("xiv.ui.ctrl.Histogram.prototype.draw",Mq.prototype.Gz);v("xiv.ui.ctrl.Histogram.prototype.drawLine",Mq.prototype.Hz);v("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",Mq.prototype.kA);
v("xiv.ui.ctrl.Histogram.prototype.update",Mq.prototype.update);v("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",Mq.prototype.ZP);v("xiv.ui.ctrl.Histogram.prototype.disposeInternal",Mq.prototype.f);function Pq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);V.call(this);this.Ez=a;this.vj=b;this.yn=null;this.lb=new hm(this.a());this.ns()}w(Pq,V);v("nrg.ui.ResizeDragger",Pq);Pq.ID_PREFIX="nrg.ui.ResizeDragger";Pq.CSS_SUFFIX={};f=Pq.prototype;f.wg=null;f.Zh=null;f.Ol=null;f.Mn=null;f.Rg=null;f.Qh=null;f.Aq=null;f.Ln=null;f.offsetX=0;f.xC=function(a){this.offsetX=a};f.offsetY=0;f.KL=function(a){this.offsetY=a};f.Za=null;f.Xh=null;f.ya=null;f.Ld=null;f.wa=null;f.jc=null;
f.Kd=!1;f.le=new uh(10,10);f.pd=function(){return this.yn};f.mi=function(a){this.yn=a};f.Hq=function(){return this.lb};f.Zz=function(){return this.Ez};f.qd=function(){return this.a()};
f.Dj=function(){this.Xh=T(this.a());this.Za=Ei(this.a());this.wg=-1*this.Xh.height/2+this.offsetY;this.Zh=-1*this.Xh.width/2+this.offsetX;this.lb.dg()||this.Kd||(this.ya=vb(Ei(this.vj)),this.Ld=vb(T(this.vj)),this.ya.left=this.ya.x,this.ya.top=this.ya.y,this.ya.right=this.ya.x+this.Ld.width,this.ya.bottom=this.ya.y+this.Ld.height,this.wa=vb(Ei(this.yn)),this.jc=vb(T(this.yn)),this.wa.left=this.wa.x,this.wa.top=this.wa.y,this.wa.right=this.wa.x+this.jc.width,this.wa.bottom=this.wa.y+this.jc.height,
this.Mg&&this.Mg(this))};f.vC=function(a){return this.le=a};f.ns=function(){F(this.lb,"start",this.Rv.bind(this));F(this.lb,"drag",this.Se.bind(this));F(this.lb,"end",this.Go.bind(this))};f.Rv=function(){this.dispatchEvent({type:"start_resize"})};f.Se=function(){this.Dj();this.dispatchEvent({type:"resize",sL:this.ya,Ld:this.Ld,NF:this.wa,jc:this.jc});null!=this.Ve&&this.Ve()};f.Go=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.lb.dg()||this.Kd||this.Dj()};f.nf=function(){};
f.xf=function(a,b,c){this.Dj();a=this.nf(a);u(c)&&0===c?(Ci(this.a(),a.end),this.Se(),this.Go()):Qq(this,a.start,a.end,b,c)};f.YC=function(){null!=this.kh&&(this.kh.stop(),this.Se(),this.Go())};function Qq(a,b,c,d,e){a.kh=new Vj(a.a(),[b.x,b.y],[c.x,c.y],u(e)?e:500,uk);F(a.kh,"begin",function(){this.Kd=!0;this.Rv()}.bind(a));F(a.kh,"animate",a.Se.bind(a));F(a.kh,"end",function(){this.Kd=!1;this.kh.g();I(this.kh);this.kh.be();this.kh=null;Ci(this.a(),c);this.Go();d&&d()}.bind(a));a.kh.play()}
f.f=function(){delete this.HP;delete this.IP;delete this.Zh;delete this.Ol;delete this.Mn;delete this.Rg;delete this.Qh;delete this.Aq;delete this.Ln;delete this.Kd;sb(this.le);delete this.le;delete this.vj;delete this.yn;sb(this.Za);delete this.Za;sb(this.Xh);delete this.Xh;sb(this.ya);delete this.ya;sb(this.Ld);delete this.Ld;sb(this.wa);delete this.wa;sb(this.jc);delete this.jc;R(this.lb.handle);this.lb.handle=null;I(this.lb);this.lb.g();delete this.lb;delete this.Ez};
v("nrg.ui.ResizeDragger.EventType",{Qs:"resize",yE:"start_resize",xE:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Pq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Pq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Pq.prototype.wg);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Pq.prototype.Zh);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Pq.prototype.Ol);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Pq.prototype.Mn);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Pq.prototype.Rg);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Pq.prototype.Qh);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Pq.prototype.Aq);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Pq.prototype.Ln);v("nrg.ui.ResizeDragger.prototype.offsetX",Pq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Pq.prototype.xC);v("nrg.ui.ResizeDragger.prototype.offsetY",Pq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Pq.prototype.KL);v("nrg.ui.ResizeDragger.prototype.handlePos",Pq.prototype.Za);v("nrg.ui.ResizeDragger.prototype.handleSize",Pq.prototype.Xh);v("nrg.ui.ResizeDragger.prototype.resizeePos",Pq.prototype.ya);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Pq.prototype.Ld);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Pq.prototype.wa);v("nrg.ui.ResizeDragger.prototype.boundarySize",Pq.prototype.jc);v("nrg.ui.ResizeDragger.prototype.isAnimating",Pq.prototype.Kd);
v("nrg.ui.ResizeDragger.prototype.minSize",Pq.prototype.le);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Pq.prototype.pd);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Pq.prototype.mi);v("nrg.ui.ResizeDragger.prototype.getDragger",Pq.prototype.Hq);v("nrg.ui.ResizeDragger.prototype.getDirection",Pq.prototype.Zz);v("nrg.ui.ResizeDragger.prototype.getHandle",Pq.prototype.qd);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Pq.prototype.Dj);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Pq.prototype.vC);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Pq.prototype.Rv);v("nrg.ui.ResizeDragger.prototype.onResize",Pq.prototype.Se);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Pq.prototype.Go);v("nrg.ui.ResizeDragger.prototype.update",Pq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Pq.prototype.nf);v("nrg.ui.ResizeDragger.prototype.stopSlideAnimation",Pq.prototype.YC);
v("nrg.ui.ResizeDragger.prototype.slideToLimits",Pq.prototype.xf);v("nrg.ui.ResizeDragger.prototype.disposeInternal",Pq.prototype.f);function Rq(a){Pq.call(this,"right",a)}w(Rq,Pq);v("nrg.ui.ResizeDraggerRight",Rq);Rq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Rq.CSS_SUFFIX={};Rq.prototype.Mg=function(){this.Ol=this.ya.left+this.le.width+this.Zh;this.Mn=this.wa.right+this.Zh;this.Aq=this.Mn-this.Ol};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Rq.prototype.Mg);Rq.prototype.Ve=function(){Qi(this.vj,Math.min(Math.max(this.Ld.width+(this.Kd?this.Za.x-this.ya.right+this.Zh:this.lb.clientX-this.lb.Jw),this.le.width),this.jc.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Rq.prototype.Ve);Rq.prototype.update=function(a){this.lb.dg()||this.Kd||(Rq.d.update.call(this,a),jm(this.lb,new wh(this.Ol,this.ya.y,this.Aq,0)),Ci(this.a(),this.ya.right+this.Zh,this.ya.y),Ri(this.a(),this.Ld.height))};Rq.prototype.nf=function(a){return{start:new rh(this.Za.x,this.Za.y),end:"MIN"==a?new rh(this.Ol,this.Za.y):new rh(this.Mn,this.Za.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Rq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Rq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Rq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Rq.prototype.nf);function Sq(a){Pq.call(this,"right",a)}w(Sq,Pq);v("nrg.ui.ResizeDraggerBottom",Sq);Sq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Sq.CSS_SUFFIX={};Sq.prototype.Mg=function(){this.Rg=this.ya.top+this.le.height+this.wg;this.Qh=this.wa.bottom+this.wg;this.Ln=this.Qh-this.Rg};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Sq.prototype.Mg);Sq.prototype.Ve=function(){Ri(this.vj,Math.max(this.Ld.height+(this.Za.y-this.ya.bottom),this.le.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Sq.prototype.Ve);Sq.prototype.update=function(){this.lb.dg()||this.Kd||(Sq.d.update.call(this),jm(this.lb,new wh(this.wa.x,this.Rg,0,this.Qh)),Ci(this.a(),this.ya.x,this.ya.bottom+this.wg))};Sq.prototype.nf=function(a){return{start:new rh(this.Za.x,this.Za.y),end:"MIN"==a?new rh(this.Za.x,this.Rg):new rh(this.Za.x,this.Qh)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Sq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Sq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Sq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Sq.prototype.nf);function Tq(a){Pq.call(this,"right",a)}w(Tq,Pq);v("nrg.ui.ResizeDraggerTop",Tq);Tq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Tq.CSS_SUFFIX={};Tq.prototype.Mg=function(){this.Rg=this.wa.top-this.wg;this.Qh=this.ya.bottom-this.le.height+this.wg;this.Ln=this.Qh-this.Rg};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Tq.Mg);Tq.prototype.Ve=function(){var a=this.Za.y-this.wg,b=this.Ld.height+(this.Kd?this.ya.y-a:this.lb.Kw-this.lb.clientY);this.vj.style.top=a.toString()+"px";Ri(this.vj,Math.max(b,this.le.height))};
Tq.prototype.update=function(){this.lb.dg()||this.Kd||(Tq.d.update.call(this),jm(this.lb,new wh(this.wa.x,this.Rg,0,this.Ln)),Ci(this.a(),this.ya.x,this.ya.y+this.wg))};Tq.prototype.nf=function(a){return{start:new rh(this.Za.x,this.Za.y),end:"MIN"==a?new rh(this.Za.x,this.Qh):new rh(this.Za.x,this.Rg)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Tq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Tq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Tq.prototype.Mg);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Tq.prototype.Ve);v("nrg.ui.ResizeDraggerTop.resizeMethod",Tq.Ve);v("nrg.ui.ResizeDraggerTop.prototype.update",Tq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Tq.prototype.nf);function Uq(a){Pq.call(this,"right",a)}w(Uq,Pq);v("nrg.ui.ResizeDraggerTopRight",Uq);Uq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Uq.CSS_SUFFIX={};Uq.prototype.Dj=function(){Uq.d.Dj.call(this);this.lb.dg()||this.Kd||(Rq.prototype.Mg.bind(this)(),Tq.prototype.Mg.bind(this)())};Uq.prototype.Se=function(){Uq.d.Se.call(this);Rq.prototype.Ve.bind(this)();Tq.prototype.Ve.bind(this)()};
Uq.prototype.update=function(a){this.lb.dg()||this.Kd||(Uq.d.update.call(this,a),jm(this.lb,new wh(this.wa.x+this.Zh,this.wa.y+this.wg,this.jc.width,this.jc.height)),Ci(this.a(),this.ya.right+this.Zh,this.ya.y+this.wg))};
Uq.prototype.nf=function(a){var b=new rh(this.Za.x,this.Za.y),c;"TOP_LEFT"==a?c=new rh(this.wa.x,this.wa.y):"TOP_RIGHT"==a?c=new rh(this.wa.x+this.jc.width,this.wa.y):"BOTTOM_RIGHT"==a?c=new rh(this.wa.x+this.jc.width,this.wa.y+this.jc.height):"BOTTOM_LEFT"==a&&(c=new rh(this.wa.x,this.wa.y+this.jc.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Uq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Uq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Uq.prototype.Dj);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Uq.prototype.Se);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Uq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Uq.prototype.nf);function Vq(a){Pq.call(this,"right",a)}w(Vq,Pq);v("nrg.ui.ResizeDraggerLeft",Vq);Vq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Vq.CSS_SUFFIX={};Vq.prototype.Ve=function(){Qi(this.vj,Math.min(Math.max(this.Ld.width+(this.ya.x-this.Za.x),this.le.width),this.jc.width));Ci(this.a(),this.Za.x,this.ya.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Vq.prototype.Ve);
Vq.prototype.update=function(a){this.lb.dg()||this.Kd||(Vq.d.update.call(this,a),jm(this.lb,new wh(this.wa.x-this.Xh.width,this.wa.y,this.jc.width-this.le.width-this.Xh.width,0)),Ci(this.a(),this.ya.x-this.Xh.width,this.ya.y))};Vq.prototype.nf=function(a){return{start:new rh(this.Za.x,this.Za.y),end:"MIN"==a?new rh(this.wa.x+this.le.width,this.Za.y):new rh(this.wa.x+this.jc.width-this.le.width,this.Za.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Vq.ID_PREFIX);
v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Vq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerLeft.resizeMethod",Vq.Ve);v("nrg.ui.ResizeDraggerLeft.prototype.update",Vq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Vq.prototype.nf);function Wq(a,b){V.call(this);this.o=Lh(a);this.Td={};this.yr=this.zr=20;this.wm(b||Wq.fP)}w(Wq,V);v("nrg.ui.Resizable",Wq);Wq.ID_PREFIX="nrg.ui.Resizable";Wq.CSS_SUFFIX={AM:"boundary"};var Xq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Yq=["RIGHT","BOTTOM"],Zq=new wh(0,0,600,600);f=Wq.prototype;f.DL=function(a,b){this.aP(a);if(0>b)throw Error("Threshold must be greater than zero!");this.XO[a]=b};f.qd=function(a){return this.Td[a].qd()};f.uk=function(a){return this.Td[a]};
f.aH=function(){var a=[];D(mb(this.Td),function(b){a.push(b.qd())});return a};f.pd=function(){return this.Rf};f.mi=function(a){this.Rf=a;if(this.Rf.parentNode!==this.o.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.uC=function(a){this.yr=a};f.wC=function(a){this.zr=a};f.xH=function(){return this.yr};f.yH=function(){return this.zr};
f.wm=function(a){a=a||"DEFAULT";r(a)&&(a="ALL"==a.toUpperCase()?Xq:"DEFAULT"==a.toUpperCase()?Yq:[a]);$q(this);D(a,function(a){if(!r(a))throw Error("String required!");if(!Ib(Xq,a))throw Error("Invalid direction: ",a);this.zy(a)}.bind(this))};f.Pt=function(a){if(!Ib(Xq,a))throw Error("Invalid draggerDir '"+a);};f.GI=function(a){this.Pt(a);if(!this.Td[a])throw Error("No ResizeDragger for "+a);};f.xf=function(a,b,c,d){a=a.toUpperCase();this.Pt(a);this.update();this.Td[a].xf(b,c,d)};
function ar(a,b){switch(a){case "TOP":return new Tq(b);case "BOTTOM":return new Sq(b);case "LEFT":return new Vq(b);case "RIGHT":return new Rq(b);case "TOP_RIGHT":return new Uq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.zy=function(a){if(a in this.Td)throw Error("Resize direction "+a+" already in use.");this.Td[a]=ar(a,this.o);F(this.Td[a],"start_resize",this.AK.bind(this));F(this.Td[a],"resize",this.Mk.bind(this));F(this.Td[a],"end_resize",this.zK.bind(this));this.update()};f.update=function(){if(null!=this.Rf){var a=new uh(this.zr,this.yr);C(this.Td,function(b){this.Rf&&this.Rf.parentNode&&Zh(this.Rf.parentNode,b.qd());b.pd()!==this.Rf&&b.mi(this.Rf);b.vC(a);b.Dj();b.update()}.bind(this))}};f.AK=function(){this.dispatchEvent({type:"resize_start"})};
f.Mk=function(a){this.dispatchEvent({type:"resize",sL:a.ya,Ld:a.Ld,NF:a.wa,jc:a.jc})};f.zK=function(){this.update();this.dispatchEvent({type:"resize_end"})};function $q(a){C(a.Td,function(a){a&&(I(a),a.g())});sb(a.Td)}f.f=function(){Wq.d.f.call(this);$q(this);delete this.Td;this.Rf&&(R(this.Rf.parentNode),delete this.Rf)};v("nrg.ui.Resizable.EventType",{Qs:"resize",yE:"resize_start",xE:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Wq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Wq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Xq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Yq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Zq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",ar);v("nrg.ui.Resizable.prototype.setBoundThreshold",Wq.prototype.DL);v("nrg.ui.Resizable.prototype.getHandle",Wq.prototype.qd);v("nrg.ui.Resizable.prototype.getResizeDragger",Wq.prototype.uk);v("nrg.ui.Resizable.prototype.getHandles",Wq.prototype.aH);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Wq.prototype.pd);v("nrg.ui.Resizable.prototype.setBoundaryElement",Wq.prototype.mi);v("nrg.ui.Resizable.prototype.setMinHeight",Wq.prototype.uC);v("nrg.ui.Resizable.prototype.setMinWidth",Wq.prototype.wC);v("nrg.ui.Resizable.prototype.getMinHeight",Wq.prototype.xH);v("nrg.ui.Resizable.prototype.getMinWidth",Wq.prototype.yH);v("nrg.ui.Resizable.prototype.setResizeDirections",Wq.prototype.wm);v("nrg.ui.Resizable.prototype.checkDirectionValid",Wq.prototype.Pt);
v("nrg.ui.Resizable.prototype.hasDragger",Wq.prototype.GI);v("nrg.ui.Resizable.prototype.slideToLimits",Wq.prototype.xf);v("nrg.ui.Resizable.prototype.addResizeDirection",Wq.prototype.zy);v("nrg.ui.Resizable.prototype.update",Wq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Wq.prototype.f);function br(a){V.call(this);this.Mb=a}w(br,V);v("xiv.ui.layouts.LayoutFrame",br);br.ID_PREFIX="xiv.ui.layouts.LayoutFrame";br.CSS_SUFFIX={};f=br.prototype;f.Id=function(){return this.Mb};f.Fc=null;f.P=function(){return this.Fp};f.wm=function(a){this.Fp=this.Fp?this.Fp:new Wq(this.a());this.Fp.wm(a)};f.f=function(){br.d.f.call(this);delete this.Mb};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",br.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",br.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",br.prototype.Id);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",br.prototype.P);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",br.prototype.wm);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",br.prototype.f);function cr(){V.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.i={}}w(cr,V);v("xiv.ui.layouts.Layout",cr);
var dr="Slider_"+B(),er="FrameDisplay_"+B(),fr="ZoomDisplay_"+B(),gr="Crosshairs_"+B(),hr="PlayButton_"+B(),ir={na:dr,Pd:er,Hf:fr,hd:gr,Kj:hr};cr.ID_PREFIX="xiv.ui.layouts.Layout";cr.CSS_SUFFIX={};f=cr.prototype;f.sb=20;f.ed=20;f.HL=function(a){this.ed=a};f.IL=function(a){this.sb=a};f.mH=function(){return this.i};f.Au=function(a){return this.i[a]};f.lH=function(a){window.console.log(a,this.i[a]);var b={};C(ir,function(c){b[c]=this.i[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};
f.Id=function(){return this.constructor.TITLE};f.wy=function(a){this.i=this.i?this.i:{};this.i[a.Id()]=a};f.Qg=function(){this.dispatchEvent({type:"q"})};f.hw=function(){C(this.Yl(),function(a){null!=a.na&&(a.na.g(),delete a.na);null!=a.hd&&(a.hd.g(),delete a.hd);null!=a.Pd&&(a.Pd.g(),delete a.Pd);null!=a.Hf&&(a.Hf.g(),delete a.Hf);null!=a.Kj&&(a.Kj.g(),delete a.Kj)})};
f.yp=function(){C(this.Yl(),function(a){null!=a.na&&(a.na.k(),a.na.F(a.na.w()));null!=a.hd&&a.hd.k();null!=a.Pd&&a.Pd.k();null!=a.Hf&&a.Hf.k();null!=a.Kj&&a.Kj.k()})};f.k=function(){cr.d.k.call(this);this.Qg()};f.f=function(){cr.d.f.call(this);delete this.ed;delete this.sb;this.Kn(this.fE);delete this.fE};v("xiv.ui.layouts.Layout.EventType",{Qs:"q"});v("xiv.ui.layouts.Layout.INTERACTORS",ir);v("xiv.ui.layouts.Layout.ID_PREFIX",cr.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",cr.CSS_SUFFIX);
v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",cr.prototype.HL);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",cr.prototype.IL);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",cr.prototype.mH);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",cr.prototype.Au);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",cr.prototype.lH);v("xiv.ui.layouts.Layout.prototype.getTitle",cr.prototype.Id);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",cr.prototype.wy);
v("xiv.ui.layouts.Layout.prototype.dispatchResize",cr.prototype.Qg);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",cr.prototype.hw);v("xiv.ui.layouts.Layout.prototype.updateInteractors",cr.prototype.yp);v("xiv.ui.layouts.Layout.prototype.updateStyle",cr.prototype.k);v("xiv.ui.layouts.Layout.prototype.disposeInternal",cr.prototype.f);function jr(a){bd.call(this);this.s="interactor";this.De=a;this.it=this.fy=this.ey=this.gy=this.dy=this.hy=null;this.Wp=!0;this.Mi=this.Gi=this.Ig=!1;this.Tc=[0,0];this.dt=new A.Q(0,0,0);this.Wm=new A.Q(0,0,0);this.eB=0;this.ny=this.Rp=null;this.st=!1;this.wb={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(jr,bd);jr.prototype.__defineGetter__("config",function(){return this.wb});
jr.prototype.__defineGetter__("leftButtonDown",function(){return this.Ig});jr.prototype.__defineGetter__("middleButtonDown",function(){return this.Gi});jr.prototype.__defineGetter__("rightButtonDown",function(){return this.Mi});
jr.prototype.ra=function(){this.wb.MOUSEWHEEL_ENABLED?(this.it=new Rp(this.De),this.hy=F(this.it,"mousewheel",this.Fo.bind(this))):(Vc(this.hy),this.it=null);this.wb.MOUSECLICKS_ENABLED?(this.dy=F(this.De,"mousedown",this.Ov.bind(this)),this.gy=F(this.De,"mouseup",this.Pv.bind(this))):(Vc(this.dy),Vc(this.gy));this.De.oncontextmenu=this.wb.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.wb.KEYBOARD_ENABLED?this.ii.bind(this):null;this.wb.TOUCH_ENABLED?(this.wb.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.nF=F(this.De,"touchstart",this.UK.bind(this)),this.mF=F(this.De,"touchmove",this.SK.bind(this)),this.lF=F(this.De,"touchend",this.OK.bind(this))):(Vc(this.nF),Vc(this.mF),Vc(this.lF));Vc(this.ey);Vc(this.fy);this.ey=F(this.De,"mousemove",this.oK.bind(this));this.fy=F(this.De,"mouseout",this.pK.bind(this))};
jr.prototype.Ov=function(a){0==a.button?this.Ig=!0:1==a.button?this.Gi=!0:2==a.button&&(this.Mi=!0);eval("this.onMouseDown("+this.Ig+","+this.Gi+","+this.Mi+")");kr(this);a.preventDefault()};jr.prototype.lK=function(){};jr.prototype.Pv=function(a){0==a.button?this.Ig=!1:1==a.button?this.Gi=!1:2==a.button&&(this.Mi=!1);eval("this.onMouseUp("+this.Ig+","+this.Gi+","+this.Mi+")");kr(this);a.preventDefault()};jr.prototype.__defineGetter__("mousePosition",function(){return this.Tc});f=jr.prototype;
f.rK=function(){};f.pK=function(a){this.Wp=!1;this.wb.KEYBOARD_ENABLED&&(window.onkeydown=null);this.Mi=this.Gi=this.Ig=!1;kr(this);this.dt=new A.Q(0,0,0);a.preventDefault()};f.nK=function(){};f.UK=function(a){a.preventDefault();a.ra(a.Lc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Wm=new A.Q(a.clientX,a.clientY,0);this.ny=setTimeout(this.QK.bind(this,a),500)};f.TK=function(){};
f.QK=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new se;a.Hg=!0;a.If=this instanceof lr;this.dispatchEvent(a);this.$p=!0};f.PK=function(){};function mr(a){clearTimeout(a.ny);if(a.$p){var b=new se;b.Hg=!1;b.If=a instanceof lr;a.dispatchEvent(b)}a.$p=!1}f.OK=function(a){a.preventDefault();eval("this.onTouchEnd()");mr(this)};f.NK=function(){};
f.SK=function(a){a.preventDefault();this.$p||mr(this);this.touchmoveEvent=a=a.Lc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.Q(c[0],c[1],0);var b=c[0]>3*this.De.clientWidth/4,d=c[0]<this.De.clientWidth/4,e=c[1]<this.De.clientHeight/4,c=c[1]>3*this.De.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Wm.Cc(a);this.Wm=a.clone();if(this.$p)a=new qe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.kd=e,this.dispatchEvent(a);
else if(this instanceof nr&&(b||d))a=new te,a.$b=0>e.y,this.dispatchEvent(a);else if(this instanceof lr||c)e.scale(3),a=new re,a.kd=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.Q(a[0],a[1],0),b=new A.Q(b[0],b[1],0),e=qd(a,b),b=e-this.eB,this.eB=e,this.Wm.Cc(a),this.Wm=a.clone(),10<Math.abs(b)&&(a=new se,a.Hg=0<b,a.If=this instanceof lr,this.dispatchEvent(a)))};f.RK=function(){};
f.oK=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Wp=!0;this.wb.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.ii.bind(this));a.preventDefault();var b=a.shiftKey;this.st=b;this.Tc=[a.offsetX,a.offsetY];var c=new A.Q(this.Tc[0],this.Tc[1],0);a=this.dt.Cc(c);this.dt=c.clone();this.wb.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Gi||this.Ig||this.Mi)&&kr(this),this.Rp=setTimeout(function(){kr(this);var a=new xe;a.dq=c.x;a.eq=
c.y;this.dispatchEvent(a);this.Rp=null}.bind(this),300));0!=a.gg()&&(this.Ig&&!b?(b=new re,a.scale(3),b.kd=a,this.dispatchEvent(b)):this.Gi||this.Ig&&b?(b=new qe,b.kd=a,this.dispatchEvent(b)):this.Mi&&(b=new se,b.Hg=0<a.y,b.If=!1,this.dispatchEvent(b)))};function kr(a){a.Rp&&clearTimeout(a.Rp);a.dispatchEvent(new ye)}f.sK=function(){};f.Fo=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");kr(this);a.preventDefault()};f.dK=function(){};
f.ii=function(a){if(this.Wp){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");kr(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new qe:b?a=new se:(a=new re,this instanceof nr&&(a=new te)),a&&(c=new A.Q(0,0,0),37==h?(c.x=5,a.$b=!1,b&&(a.$b=!0,a.Hg=!0,a.If=!1)):39==h?(c.x=-5,a.$b=!0,b&&(a.Hg=!1,a.If=!1)):38==h?(c.y=5,a.$b=!0,b&&(a.Hg=!0,a.If=!0)):40==h&&(c.y=-5,a.$b=!1,b&&(a.Hg=!1,a.If=!0)),a.kd=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new ze,this.dispatchEvent(a))}};v("X.interactor",jr);v("X.interactor.prototype.init",jr.prototype.ra);v("X.interactor.prototype.onMouseDown",jr.prototype.lK);v("X.interactor.prototype.onMouseUp",jr.prototype.rK);v("X.interactor.prototype.onMouseMove",jr.prototype.nK);v("X.interactor.prototype.onMouseWheel",jr.prototype.sK);v("X.interactor.prototype.onKey",jr.prototype.dK);v("X.interactor.prototype.onTouchStart",jr.prototype.TK);v("X.interactor.prototype.onTouchMove",jr.prototype.RK);
v("X.interactor.prototype.onTouchEnd",jr.prototype.NK);v("X.interactor.prototype.onTouchHover",jr.prototype.PK);function nr(a){jr.call(this,a);this.s="interactor2D"}w(nr,jr);nr.prototype.Fo=function(a){nr.d.Fo.call(this,a);var b=new te;null==a.Hd&&(a.Hd=0);b.$b=0>a.Hd;this.dispatchEvent(b)};function or(a,b){if(!u(a)||!u(b))throw Error("A camera needs valid width and height values.");bd.call(this);this.s="camera";this.Tj=new A.Q(0,100,0);this.pl=new A.Q(0,0,0);this.$b=new A.Q(0,0,1);this.Xa=a;this.Ia=b;this.O=this.sr(this.Tj,this.pl)}w(or,bd);or.prototype.observe=function(a){if(!(null!=a&&a instanceof jr))throw Error("Could not observe the interactor.");F(a,be,this.BK.bind(this));F(a,ae,this.uK.bind(this));F(a,ce,this.bL.bind(this))};
or.prototype.BK=function(a){if(!(a instanceof re))throw Error("Received no valid rotate event.");this.rotate(a.kd)};or.prototype.bL=function(a){if(!(a instanceof se))throw Error("Received no valid zoom event.");a.Hg?this.Nm(a.If):this.Om(a.If)};or.prototype.uK=function(a){if(!(a instanceof qe))throw Error("Received no valid pan event.");this.Qr(a.kd)};or.prototype.__defineGetter__("view",function(){return this.O});
or.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.O=a});or.prototype.__defineGetter__("position",function(){return[this.Tj.x,this.Tj.y,this.Tj.z]});or.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.Tj=new A.Q(a[0],a[1],a[2]);this.reset()});or.prototype.__defineGetter__("focus",function(){return[this.pl.x,this.pl.y,this.pl.z]});
or.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.pl=new A.Q(a[0],a[1],a[2]);this.reset()});or.prototype.__defineGetter__("up",function(){return[this.$b.x,this.$b.y,this.$b.z]});or.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.$b=new A.Q(a[0],a[1],a[2]);this.reset()});f=or.prototype;f.reset=function(){this.O=this.sr(this.Tj,this.pl)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.Q(a[0],a[1],0);else if(!(a instanceof A.Q))throw Error("Invalid distance vector for rotate operation.");return a};f.Qr=function(a){if(g(a)&&2==a.length)a=new A.Q(a[0],a[1],0);else if(!(a instanceof A.Q))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x;this.O[13]+=a.y};f.Nm=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]+=b};f.Om=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]-=b};
f.sr=function(a,b){if(!(a instanceof A.Q&&b instanceof A.Q))throw Error("3D vectors required for calculating the view.");return A.t.eo()};v("X.camera",or);v("X.camera.prototype.pan",or.prototype.Qr);v("X.camera.prototype.rotate",or.prototype.rotate);v("X.camera.prototype.zoomIn",or.prototype.Nm);v("X.camera.prototype.zoomOut",or.prototype.Om);function pr(a){function b(a,b,d){b=b*Math.PI*2;b=tp(up(n,Math.cos(b)),up(p,Math.sin(b)));a=tp(tp(c,up(e,a)),up(b,h));d=tp(up(b,1-Math.abs(d)),up(k,d));return new yp(a,d)}this.Lb=[];a=a||{};var c=new sp(a.start||[0,-1,0]),d=new sp(a.end||[0,1,0]),e=vp(d,c),h=a.dh||1;a=a.za||16;for(var k=wp(e),l=.5<Math.abs(k.y()),n=wp((new sp(l,!l,0)).jk(k)),p=wp(n.jk(k)),l=new yp(c,xp(k)),d=new yp(d,wp(k)),m=[],q=0;q<a;q++){var t=q/a,s=(q+1)/a;m.push(new Ap([l,b(0,t,-1),b(0,s,-1)]));m.push(new Ap([b(0,s,0),b(0,t,
0),b(1,t,0),b(1,s,0)]));m.push(new Ap([d,b(1,s,1),b(1,t,1)]))}return Lp(m)}w(pr,Kp);function qr(){Vd.call(this);this.s="cylinder";this.ut=[-10,-10,-10];this.bt=[10,10,10];this.Uj=10;this.Wc=32;xa(this,new Mp)}w(qr,Vd);qr.prototype.__defineGetter__("start",function(){return this.ut});qr.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.ut=a});qr.prototype.__defineGetter__("end",function(){return this.bt});qr.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.bt=a});
qr.prototype.__defineGetter__("radius",function(){return this.Uj});qr.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Uj=a});qr.prototype.ea=function(){Op(this,new pr({start:this.ut,end:this.bt,dh:this.Uj,za:this.Wc}));qr.d.ea.call(this)};v("X.cylinder",qr);v("X.cylinder.prototype.modified",qr.prototype.ea);function Pe(a){J.call(this);this.s="labelmap";this.Gh=a;this.tt=new Float32Array([-255,-255,-255,-255])}w(Pe,J);Pe.prototype.ea=function(){var a=new Wd;a.Na=this;this.dispatchEvent(a);this.Gh.ea()};Pe.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.Bd)throw Error("No colortable assigned.");b=this.Bd.Vd.get(a).slice(1,5)}this.tt=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Pe);function rr(a){this.Lb=[];a=a||{};var b=new sp(a.$d||[0,0,0]),c=a.dh?a.dh.length?a.dh:[a.dh,a.dh,a.dh]:[1,1,1];return Lp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Ap(a[0].map(function(e){e=new sp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new yp(e,new sp(a[1]))}))}))}w(rr,Kp);function sr(){Vd.call(this);this.s="cube";this.Ta=[0,0,0];this.gt=this.ft=this.et=20;this.Bl=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];xa(this,new Mp)}w(sr,Vd);sr.prototype.__defineGetter__("center",function(){return this.Ta});sr.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Ta=a});sr.prototype.__defineGetter__("lengthX",function(){return this.et});
sr.prototype.__defineSetter__("lengthX",function(a){if(!u(a))throw Error("Invalid lengthX.");this.et=a});sr.prototype.__defineGetter__("lengthY",function(){return this.ft});sr.prototype.__defineSetter__("lengthY",function(a){if(!u(a))throw Error("Invalid lengthY.");this.ft=a});sr.prototype.__defineGetter__("lengthZ",function(){return this.gt});sr.prototype.__defineSetter__("lengthZ",function(a){if(!u(a))throw Error("Invalid lengthZ.");this.gt=a});
sr.prototype.ea=function(){Op(this,new rr({$d:this.Ta,dh:[this.et/2,this.ft/2,this.gt/2]}));sr.d.ea.call(this)};v("X.cube",sr);v("X.cube.prototype.modified",sr.prototype.ea);function lr(a){jr.call(this,a);this.s="interactor3D"}w(lr,jr);lr.prototype.Fo=function(a){lr.d.Fo.call(this,a);var b=new se;null==a.Hd&&(a.Hd=0);b.Hg=0>a.Hd;b.If=!0;this.dispatchEvent(b)};function tr(a){bd.call(this);this.s="array";this.cb=[];this.Ux=a}w(tr,bd);function ur(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}tr.prototype.add=function(a){this.cb.push(a);return!0};tr.prototype.remove=function(a){a=this.cb.indexOf(a);-1<a&&this.cb.splice(a,1);return!0};tr.prototype.clear=function(){this.cb.length=0};
function vr(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),vr(a,b,d),vr(a,d,c);b<d;++b)if(0<a.Ux(a.cb[b],a.cb[d])){var e=a.cb[b];a.cb[b]=a.cb[d];for(var h=a,k=d,l=c;k+1<l&&0>h.Ux(h.cb[k+1],e);){var n=h,p=k+1,m=n.cb[k];n.cb[k]=n.cb[p];n.cb[p]=m;++k}h.cb[k]=e}}tr.prototype.sort=function(){vr(this,0,this.cb.length)};function wr(a,b){or.call(this,a,b);this.s="camera2D"}w(wr,or);wr.prototype.rotate=function(a){a=wr.d.rotate.call(this,a);var b=new pe;0<a.x?b.wt--:0>a.x&&b.wt++;0<a.y?b.ht++:0>a.y&&b.ht--;this.dispatchEvent(b)};wr.prototype.Nm=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]+=b};wr.prototype.Om=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]-=b};
wr.prototype.Qr=function(a){if(g(a)&&2==a.length)a=new A.Q(a[0],a[1],0);else if(!(a instanceof A.Q))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x/this.O[14];this.O[13]+=a.y/this.O[14]};function xr(a,b){or.call(this,a,b);this.s="camera3D";this.Xx=45;this.mt=A.t.kv(A.t.eo(),this.Xx,a/b,1,1E4)}w(xr,or);xr.prototype.rotate=function(a){a=xr.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.Q(this.O[1],this.O[5],this.O[9]),d=new A.Q(this.O[0],this.O[4],this.O[8]);c.normalize();d.normalize();A.t.rotate(this.O,b,c.x,c.y,c.z);A.t.rotate(this.O,a,d.x,d.y,d.z)};xr.prototype.sr=function(a,b){var c=xr.d.sr.call(this,a,b);A.t.oB(c,a,b,this.$b);return c};
function yr(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.t.multiply(a.mt,a.O,l);A.t.Fb(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.t.wB(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",xr);function zr(a){ij.call(this,a);this.eh=new Up;F(this.eh,"change",this.Ju,!1,this)}w(zr,ij);var Ar={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=zr.prototype;f.v=function(){this.Xe=this.hk();var a=Ar[this.Fa];this.o=this.N().v("div",a,this.Xe);Br(this);Cr(this);Dr(this)};f.fb=function(){zr.d.fb.call(this);E&&7>nc&&F(this.a(),"resize",this.ph,!1,this);this.ph();var a=this.a();Zk(a,"progressbar");$k(a,"live","polite")};f.zc=function(){zr.d.zc.call(this);Er(this)};
f.hk=function(){return this.N().v("div","progress-bar-thumb")};function Er(a){E&&7>nc&&Uc(a.a(),"resize",a.ph,!1,a)}f.ae=function(a){zr.d.ae.call(this,a);dl(this.a(),Ar[this.Fa]);a=Mh(null,"progress-bar-thumb",this.a())[0];a||(a=this.hk(),this.a().appendChild(a));this.Xe=a};f.w=function(){return this.eh.w()};f.F=function(a){this.eh.F(a);this.a()&&Br(this)};function Br(a){$k(a.a(),"valuenow",a.w())}f.ma=function(){return this.eh.ma()};f.Oc=function(a){this.eh.Oc(a);this.a()&&Cr(this)};
function Cr(a){$k(a.a(),"valuemin",a.ma())}f.aa=function(){return this.eh.aa()};f.bc=function(a){this.eh.bc(a);this.a()&&Dr(this)};function Dr(a){$k(a.a(),"valuemax",a.aa())}f.Fa="horizontal";f.Ju=function(){this.ph();this.dispatchEvent("change")};
f.ph=function(){if(this.Xe){var a=this.ma(),b=this.aa(),a=(this.w()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Fa?E&&7>nc?(this.Xe.style.top=0,this.Xe.style.height="100%",b=this.Xe.offsetHeight,a=Math.round(a*b),this.Xe.style.top=b-a+"px",this.Xe.style.height=a+"px"):(this.Xe.style.top=100-b+"%",this.Xe.style.height=b+"%"):this.Xe.style.width=b+"%"}};
f.pi=function(a){if(this.Fa!=a){var b=Ar[this.Fa],c=Ar[a];this.Fa=a;if(a=this.a())cl(a,b)&&(fl(a,b),dl(a,c)),b=this.Xe.style,"vertical"==this.Fa?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.ph()}};f.Eb=function(){return this.Fa};f.f=function(){Er(this);zr.d.f.call(this);this.Xe=null;this.eh.g()};f.Vh=function(){return this.eh.Vh()};f.qg=function(a){this.eh.qg(a)};function Fr(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");zr.call(this);this.s="progressbar";this.ef=a;this.lt="";this.Op=this.Fh=null;this.Rj=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Rj=[c,d,e];this.F(b);this.Su()}w(Fr,zr);
Fr.prototype.Su=function(){var a=zi(this.ef,"position");if("static"==a||""==a)this.lt=this.ef.style.position,this.ef.style.position="relative";var a=document.getElementsByTagName("head")[0],b=O("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Rj[0])),d=document.createTextNode(String(this.Rj[1])),e=document.createTextNode(String(this.Rj[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Fh=b;this.n(this.ef);a=this.a();a.style.position=
"absolute";a.style.top=(this.ef.clientHeight-5)/2+"px";a.style.left=(this.ef.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};Fr.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;R(this.a());var c=new Fr(this.ef,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");ci(d).classList.add("progress-bar-thumb-done");this.Op=c};
Fr.prototype.oo=function(){this.Fh&&R(this.Fh);this.a()&&R(this.a());this.Op&&R(this.Op.a());this.Op=this.Fh=null;this.lt&&(this.ef.style.position=this.lt)};function Gr(){bd.call(this);this.s="renderer";this.va=window.document.body;this.Xa=this.va.clientWidth;this.Ia=this.va.clientHeight;this.Ea=this.ja=this.vc=null;this.Jg=new tr(Zd);this.md=[];this.Pb=null;this.Xp=this.Xm=this.Vp=!1;this.b=this.Ki=this.Yd=null;this.wb={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Zs=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(Gr,bd);f=Gr.prototype;
f.Cv=function(){window.cancelAnimationFrame(this.Zs);this.wb.PROGRESSBAR_ENABLED&&(this.Ki=new Fr(this.va,3))};f.Dv=function(){this.wb.PROGRESSBAR_ENABLED&&this.Ki&&(this.Ki.done(),this.Lp=Yf(function(){this.Lp=null;this.Ki&&(this.Ki.oo(),this.Ki=null);this.Xm=this.Xp=!0;this.n()}.bind(this),700))};f.Ev=function(a){this.Ki&&this.Ki.F(100*a.Yj)};f.Lk=function(a){this.Yd&&this.Yd.F(100*a.Yj)};f.kK=function(a){null!=a&&a instanceof Wd&&a.Na&&this.rh(a.Na)};
f.wK=function(a){null!=a&&a instanceof Xd&&a.Na&&this.remove(a.Na)};f.Kv=function(a){if(!(null!=a&&a instanceof xe))throw Error("Invalid hover event.");};f.Mk=function(){var a=Lh(this.va);this.Xa=a.clientWidth;this.Ia=a.clientHeight;a=Lh(this.vc);null!=a&&(a.width=this.Xa,a.height=this.Ia,"renderer3D"==this.s&&(this.b.viewport(0,0,this.Xa,this.Ia),this.ja.mt=A.t.kv(A.t.eo(),this.ja.Xx,this.vc.width/this.vc.height,1,1E4)))};
f.qm=function(a){if(!(null!=a&&a instanceof te))throw Error("Invalid scroll event.");};Gr.prototype.__defineGetter__("config",function(){return this.wb});Gr.prototype.__defineGetter__("interactor",function(){return this.Ea});Gr.prototype.__defineGetter__("camera",function(){return this.ja});Gr.prototype.__defineGetter__("loadingCompleted",function(){return this.Xm});Gr.prototype.__defineGetter__("container",function(){return this.va});
Gr.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;r(b)&&(b=Lh(a));if(!fi(b))throw Error("Could not find the given container.");this.va=b});f=Gr.prototype;f.Mo=function(){this.ja.reset()};function Hr(a){a.wb.PROGRESSBAR_ENABLED&&a.Yd&&!a.Lp&&(a.Yd.done(),a.Lp=Yf(function(){this.Lp=null;this.Yd&&(this.Yd.oo(),this.Yd=null);this.n()}.bind(a),700))}
f.ra=function(a){var b=O("canvas");this.va.appendChild(b);this.Xa=this.va.clientWidth;this.Ia=this.va.clientHeight;b.width=this.Xa;b.height=this.Ia;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.va.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Pb=new Of;F(this.Pb,ie,this.Lk.bind(this));this.vc=b;this.b=c;b=new lr(this.vc);"2d"==a&&(b=new nr(this.vc));b.ra();F(b,ee,this.Mo.bind(this));F(b,je,this.Kv.bind(this));F(b,de,this.qm.bind(this));this.Ea=b;b=new xr(this.Xa,this.Ia);"2d"==a&&(b=new wr(this.Xa,this.Ia));b.observe(this.Ea);this.ja=b;F(window,"resize",this.Mk,!1,this)};f.add=function(a){(a instanceof sr||a instanceof Qp||a instanceof qr)&&a.ea();this.md.push(a);this.rh(a)};
f.remove=function(a){if(!this.vc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&I(a);return!1};f.rh=function(a){if(!this.vc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Wc(a,ge)||F(a,ge,this.kK.bind(this)),Wc(a,he)||F(a,he,this.wK.bind(this)),Wc(a,le)||F(a,le,this.Cv.bind(this)),Wc(a,oe)||F(a,oe,this.Ev.bind(this)),Wc(a,me)||F(a,me,this.Dv.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.Jg.cb,c=b.length,d=0,d=0;d<c;d++)if(b[d].ld==a)return b[d];return null};
f.n=function(){if(!this.vc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.ky){if(this.Pb.ul.Ut(!1)){if(this.wb.PROGRESSBAR_ENABLED&&!this.Yd&&(this.Yd=new Fr(this.va,3)),this.Xp=this.Xm=!1,this.ky=Yf(function(){this.ky=null;this.n()}.bind(this),100),!this.wb.INTERMEDIATE_RENDERING)return}else if(this.Xm||this.Xp||(this.Xp=!0,eval("this.onShowtime()"),this.Xm=!0),this.Yd){Hr(this);return}this.Zs=window.requestAnimationFrame(this.n.bind(this));eval("this.onRender()");
this.fh(!1,!0)}};f.LB=function(){};f.JB=function(){};f.fh=function(){};f.be=function(){window.cancelAnimationFrame(this.Zs);this.Pb&&(delete this.Pb,this.Pb=null);this.Yd&&(this.Yd.oo(),delete this.Yd,this.Yd=null);this.Jg.clear();delete this.Jg;this.md.length=0;delete this.md;delete this.Pb;this.Pb=null;delete this.ja;this.ja=null;delete this.Ea;this.Ea=null;delete this.b;this.b=null;R(this.vc);delete this.vc;this.vc=null};function Ir(){Gr.call(this);this.s="renderer2D";this.Vc=null;this.Cd=-1;this.Xd=[];this.by=this.Sp=this.Yx=this.Qp=null;this.yl=this.Al=this.Vj=this.Wj=0;this.Qb=this.Rb=this.Ab=this.yb=this.Vx=-1;this.cy=new Float32Array([-255,-255,-255,-255]);this.jy=!0}w(Ir,Gr);Ir.prototype.Sv=function(){};Ir.prototype.WK=function(){};Ir.prototype.qm=function(a){Ir.d.qm.call(this,a);var b=this.md[0];if(b){var c="",c=0==this.Cd?"indexX":1==this.Cd?"indexY":"indexZ";b[c]=a.$b?b[c]+1:b[c]-1;eval("this.onScroll();")}};
Ir.prototype.XK=function(a){var b=this.md[0];if(b){var c=b.Qb-b.Rb,d=c/2,e=parseInt(c+c/15*-a.wt,10);a=parseInt(d+d/15*a.ht,10);c==e&&e++;d==a&&a++;b.Rb-=parseInt(d-a,10);b.Rb-=parseInt(c-e,10);b.Rb=Math.max(b.Rb,b.Wd);b.Qb-=parseInt(d-a,10);b.Qb+=parseInt(c-e,10);b.Qb=Math.min(b.Qb,b.Yb);eval("this.onWindowLevel();")}};Ir.prototype.__defineGetter__("orientation",function(){return this.Vc});
Ir.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.Cd=2):"SAGITTAL"==a?(a="X",this.Cd=0):"CORONAL"==a&&(a="Y",this.Cd=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Vc=a});Ir.prototype.__defineGetter__("radiological",function(){return this.jy});Ir.prototype.__defineSetter__("radiological",function(a){this.jy=a});f=Ir.prototype;
f.ra=function(){if(!this.Vc)throw Error("No 2D orientation set.");Ir.d.ra.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.vc.width,this.vc.height);this.Qp=O("canvas");this.Sp=O("canvas");F(this.ja,fe,this.XK.bind(this))};f.Mk=function(){Ir.d.Mk.call(this);Jr(this)};f.Mo=function(){Ir.d.Mo.call(this);Jr(this);var a=this.md[0];a&&(a.Qb=a.Yb,a.Rb=a.Wd)};
f.rh=function(a){Ir.d.rh.call(this,a);var b=!1;this.get(a.ld)&&(b=!0);if(a instanceof J){var c=a.fa,d=a.q,e=a.Bd;if(null!=d&&null!=d.fa&&d.fa.I)this.rh(d);else if(null!=e&&null!=e.fa&&e.fa.I)this.Pb.load(e,a);else{if(null!=c&&g(c))if(null!=a.vh){if(a.vh.vo!=c.length||b&&!a.I)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Pb.load(c[b],a);return}else if(null!=c&&c.I){this.Pb.load(a,a);return}c=this.Vc;this.Cd="X"==c?0:"Y"==c?1:2;this.Wc=a.j[this.Cd].j;e=null;e=0==this.Cd?a.indexX:1==this.Cd?a.indexY:
a.indexZ;c=a.j[this.Cd].j[e].ay;d=a.j[this.Cd].j[e].$x;this.Al=a.j[this.Cd].j[e].Hh;this.yl=a.j[this.Cd].j[e].Ah;this.Wj=c;this.Vj=d;e=this.Qp;e.width=c;e.height=d;var h=this.Sp;h.width=c;h.height=d;this.Yx=e.getContext("2d");this.by=h.getContext("2d");b||(this.Jg.add(a),Jr(this))}}};function Jr(a){var b=Math.min(a.Xa/(a.Wj*a.Al),a.Ia/(a.Vj*a.yl));null!=a.ja&&(a.ja.O[14]=b)}f.Or=function(){};
f.rD=function(a,b){var c=this.md[0],d=this.ja.O,e=null,h=this.Wj,k=this.Vj,l=null,n=null;if("Y"==this.Vc)e=this.Wc[parseInt(c.indexY,10)],l=e.Hh,n=e.Ah,this.Xd[0]="red",this.Xd[1]="blue";else if("Z"==this.Vc)e=this.Wc[parseInt(c.indexZ,10)],l=e.Hh,n=e.Ah,this.Xd[0]="red",this.Xd[1]="green";else{e=this.Wc[parseInt(c.indexX,10)];l=e.Ah;n=e.Hh;this.Xd[0]="green";this.Xd[1]="blue";var p=h,h=k,k=p}var m=1*d[12],q=-1*d[13],p=Math.max(d[14],.6),d=[this.Xa/2,this.Ia/2],l=h*l*p,n=k*n*p,t=d[0]-l/2,d=d[1]-n/
2,t=t+m*p,d=d+q*p;return a>t&&a<t+l&&b>d&&b<d+n?(m=(a-t)/l*h,q=(b-d)/n*k,n=e.pF[4],"X"==this.Vc?(p=h-m,m=q,q=p):"Y"==this.Vc?m=h-m:"Z"==this.Vc&&(m=h-m,q=k-q),m=e.oF+m*e.Hh,q=e.iF+q*e.Ah,m=Ad(m,q,n,1),h=Bd(),Ld(e.bF,m,h),k=Bd(),Ld(e.cF,m,k),e=Math.round((c.e[0].G[0]*k[0]+c.e[0].G[1]*k[1]+c.e[0].G[2]*k[2]+c.e[0].kt)/c.e[0].zl),e>=c.e[0].ca?e=c.e[0].ca-1:0>e&&(e=0),m=Math.round((c.e[1].G[0]*k[0]+c.e[1].G[1]*k[1]+c.e[1].G[2]*k[2]+c.e[1].kt)/c.e[1].zl),m>=c.e[1].ca?m=c.e[1].ca-1:0>m&&(m=0),q=Math.round((c.e[2].G[0]*
k[0]+c.e[2].G[1]*k[1]+c.e[2].G[2]*k[2]+c.e[2].kt)/c.e[2].zl),q>=c.e[2].ca?q=c.e[2].ca-1:0>q&&(q=0),[[e,m,q],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.fh=function(a,b){Ir.d.fh.call(this,a,b);if(0!=this.Jg.cb.length){var c=this.md[0],d=null,d=0==this.Cd?c.indexX:1==this.Cd?c.indexY:c.indexZ,e=this.Wc[parseInt(d,10)].ay,h=this.Wc[parseInt(d,10)].$x;this.Al=this.Wc[parseInt(d,10)].Hh;this.yl=this.Wc[parseInt(d,10)].Ah;this.Wj=e;this.Vj=h;var k=this.Xa,l=this.Ia,n=this.ja.O;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var p=Math.max(n[14],.1);this.b.setTransform(p,0,0,p,0,0);var m=1*n[12],n=-1*n[13],q=null;c.q&&(q=c.q.tt);var t=
this.Wc[parseInt(d,10)],s=t.Wa.Li,t=t.q,z=null;t&&(z=t.Li);var y=this.Wj,H=this.Vj,Q=this.Yx,P=this.by,G=Q.getImageData(0,0,y,H),S=P.getImageData(0,0,y,H),Y=G.data,U=S.data,wa=Y.length,oa=c.Yb,ya=c.yb,Ma=c.Ab,Ha=c.Rb/oa,Na=c.Qb/oa;if(this.Vx!=d||this.yb!=ya||this.Ab!=Ma||this.Rb!=Ha||this.Qb!=Na||q&&!ur(q,this.cy,0)){var la=this.Qp;la.width=e;la.height=h;la=this.Sp;la.width=e;la.height=h;e=0;do{var la=[0,0,0,0],h=[0,0,0,0],za=s[e]/255*oa,qa=s[e],qa=(qa/255-Ha)/(Na-Ha),qa=255*qa;za>=ya&&za<=Ma&&(la=
new K(c.Hi[0],c.Hi[1],c.Hi[2]),la=(new K(c.Fi[0],c.Fi[1],c.Fi[2])).scale(qa).add(la.scale(255-qa)),la=[Math.floor(la.x),Math.floor(la.y),Math.floor(la.z),255],t&&(-255==q[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:ur(q,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.Vc?(Y[e]=la[0],Y[e+1]=la[1],Y[e+2]=la[2],Y[e+3]=la[3],U[e]=h[0],U[e+1]=h[1],U[e+2]=h[2],U[e+3]=h[3]):"Y"==this.Vc?(qa=Math.floor(e/(4*y)),qa=qa*y*4+(4*(y-1)-(e-qa*y*4)),Y[qa]=la[0],Y[qa+1]=la[1],Y[qa+2]=la[2],Y[qa+3]=la[3],U[qa]=h[0],U[qa+1]=
h[1],U[qa+2]=h[2],U[qa+3]=h[3]):(qa=wa-1-e,Y[qa-3]=la[0],Y[qa-2]=la[1],Y[qa-1]=la[2],Y[qa]=la[3],U[qa-3]=h[0],U[qa-2]=h[1],U[qa-1]=h[2],U[qa]=h[3]);e+=4}while(e<wa);Q.putImageData(G,0,0);P.putImageData(S,0,0);this.Vx=d;this.yb=ya;this.Ab=Ma;this.Rb=Ha;this.Qb=Na;t&&(this.cy=q)}this.b.globalAlpha=1;this.b.translate(k/2/p,l/2/p);"X"==this.Vc&&(this.b.rotate(.5*Math.PI),d=m,m=n,n=-d);m=-y*this.Al/2+m;n=-H*this.yl/2+n;this.b.drawImage(this.Qp,m,n,y*this.Al,H*this.yl);t&&c.q.ob&&(this.b.globalAlpha=c.q.Uc,
this.b.drawImage(this.Sp,m,n,y*this.Al,H*this.yl));this.wb.SLICENAVIGATORS&&this.Ea.Wp&&this.Ea.st&&!this.Ea.Ig&&(m=this.Ea.Tc,m=this.rD(m[0],m[1]))&&(c.Bh=m[0][0],c.Ch=m[0][1],c.Dh=m[0][2],c.ea(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Ea.Tc[0],0),this.b.lineTo(this.Ea.Tc[0],this.Ea.Tc[1]-10),this.b.moveTo(this.Ea.Tc[0],this.Ea.Tc[1]+10),this.b.lineTo(this.Ea.Tc[0],this.Ia),this.b.strokeStyle=this.Xd[0],this.b.stroke(),
this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Ea.Tc[1]),this.b.lineTo(this.Ea.Tc[0]-10,this.Ea.Tc[1]),this.b.moveTo(this.Ea.Tc[0]+10,this.Ea.Tc[1]+.5),this.b.lineTo(this.Xa,this.Ea.Tc[1]),this.b.strokeStyle=this.Xd[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+m[2][0].toFixed(2)+", "+m[2][1].toFixed(2)+", "+m[2][2].toFixed(2),0,0),y=t=n="undefined","undefined"!=typeof c.hc[m[1][2].toFixed(0)]&&
"undefined"!=typeof c.hc[m[1][2].toFixed(0)][m[1][1].toFixed(0)]&&(n=c.hc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.hb&&(t=c.q.hc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.q.Um&&(y=c.q.Um.get(t),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+m[1][0].toFixed(0)+", "+m[1][1].toFixed(0)+", "+m[1][2].toFixed(0)+")",0,15),c.hb&&this.b.fillText("Labelmap:  "+y+" ("+t+")",0,30))}};v("X.renderer2D",Ir);v("X.renderer2D.prototype.init",Ir.prototype.ra);
v("X.renderer2D.prototype.add",Ir.prototype.add);v("X.renderer2D.prototype.onShowtime",Ir.prototype.LB);v("X.renderer2D.prototype.onRender",Ir.prototype.JB);v("X.renderer2D.prototype.onScroll",Ir.prototype.Sv);v("X.renderer2D.prototype.onWindowLevel",Ir.prototype.WK);v("X.renderer2D.prototype.get",Ir.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",Ir.prototype.Mo);v("X.renderer2D.prototype.xy2ijk",Ir.prototype.rD);v("X.renderer2D.prototype.render",Ir.prototype.n);
v("X.renderer2D.prototype.destroy",Ir.prototype.be);v("X.renderer2D.prototype.onSliceNavigation",Ir.prototype.Or);function Kr(){$c.call(this)}w(Kr,$c);v("xiv.vis.RenderEngine",Kr);Kr.prototype.ID_PREFIX="xiv.vis.RenderEngine";var Lr="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{BN:"r",yN:"s",zN:"t"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",Lr);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",Kr.prototype.ID_PREFIX);function Mr(){Ir.call(this)}w(Mr,Ir);v("xiv.vis.XtkRenderer2D",Mr);f=Mr.prototype;f.Se=function(){this.Mk()};f.Sv=function(){this.Or()};f.Lk=function(a){Mr.d.Lk.call(this,a);this.dispatchEvent({type:"s",value:a.Yj})};f.ra=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;Mr.d.ra.call(this);this.Ea.onMouseMove=this.cK.bind(this);this.Ea.config.MOUSEWHEEL_ENABLED=!1;this.Ea.config.MOUSECLICKS_ENABLED=!1;this.Ea.config.KEYBOARD_ENABLED=!1;this.Ea.ra()};f.Eb=function(){return this.Vc};
f.FG=function(){return this.ja};f.AH=function(){return this.Ea.mousePosition};f.gr=function(){};f.cK=function(){this.dispatchEvent({type:"mouseover",CJ:this.Ea.CJ,LL:this.Ea.shiftDown})};f.Or=function(){this.dispatchEvent({type:"u",volume:this.md[0],$O:this.md[0]["index"+this.Vc],ZO:this.Vc,LL:this.Ea.st})};f.n=function(){this.vc&&this.b?(Mr.d.n.call(this),this.dispatchEvent({type:"t"})):(window.console.log("init"),this.ra(),window.console.log(this.am().visible))};f.GG=function(){return this.vc};
f.am=function(){return this.md[0]};f.pA=function(){if(null!=this.Wc){var a=this.md[0];if(null!=a[J.REORIENTED_DIMENSIONS_KEY]&&"false"==a.reslicing.toString())switch(this.Eb()){case "X":return a[J.REORIENTED_DIMENSIONS_KEY][0];case "Y":return a[J.REORIENTED_DIMENSIONS_KEY][1];case "Z":return a[J.REORIENTED_DIMENSIONS_KEY][2]}return this.Wc.length}};f.EA=function(){return this.ja.O[14]};f.MC=function(a){this.ja.O[14]=a};function Nr(a){.01>a.ja.O[14]&&(a.ja.O[14]=.01)}
f.Nm=function(){this.ja.O[14]+=.03;Nr(this)};f.Om=function(){this.ja.O[14]+=-.03;Nr(this)};
function Or(a,b,c,d){var e=a.md[0],h=a.ja.O,k=null,l=a.Wj,n=a.Vj,p=null,m=null;if(null!=e){"Y"==a.Vc?(k=a.Wc[parseInt(e.indexY,10)],p=k.Hh,m=k.Ah,a.Xd[0]="red",a.Xd[1]="blue"):"Z"==a.Vc?(k=a.Wc[parseInt(e.indexZ,10)],p=k.Hh,m=k.Ah,a.Xd[0]="red",a.Xd[1]="green"):(k=a.Wc[parseInt(e.indexX,10)],p=k.Ah,m=k.Hh,a.Xd[0]="green",a.Xd[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),q=[a.Xa/2,a.Ia/2],p=l*p*h,m=n*m*h,t=q[0]-p/2,q=q[1]-m/2,t=t+e*h,q=q+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?t+(a.Wj-b)/l*p:t+b/l*p;b=Math.max(0,b);b=Math.min(b,n);return d?q+(a.Vj-b)/n*m:q+b/n*m}}f.yA=function(a,b){return Or(this,a,"vertical",b)};f.fA=function(a,b){return Or(this,a,"horizontal",b)};f.be=function(){Mr.d.be.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",Mr.prototype.Se);v("xiv.vis.XtkRenderer2D.prototype.onScroll",Mr.prototype.Sv);v("xiv.vis.XtkRenderer2D.prototype.onProgress",Mr.prototype.Lk);
v("xiv.vis.XtkRenderer2D.prototype.init",Mr.prototype.ra);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",Mr.prototype.Eb);v("xiv.vis.XtkRenderer2D.prototype.getCamera",Mr.prototype.FG);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",Mr.prototype.AH);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",Mr.prototype.gr);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",Mr.prototype.Or);v("xiv.vis.XtkRenderer2D.prototype.render",Mr.prototype.n);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",Mr.prototype.GG);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",Mr.prototype.am);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",Mr.prototype.pA);v("xiv.vis.XtkRenderer2D.prototype.getZoom",Mr.prototype.EA);v("xiv.vis.XtkRenderer2D.prototype.setZoom",Mr.prototype.MC);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",Mr.prototype.Nm);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",Mr.prototype.Om);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",Mr.prototype.yA);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",Mr.prototype.fA);v("xiv.vis.XtkRenderer2D.prototype.destroy",Mr.prototype.be);function Pr(){V.call(this)}w(Pr,qp);v("xiv.ui.layouts.interactors.ZoomDisplay",Pr);Pr.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";Pr.prototype.n=function(a){Pr.d.n.call(this,a);this.Ka.min=1};Pr.prototype.qh=function(){this.kf.innerHTML="Zoom level:&nbsp"+this.Ka.value+"%"};v("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",Pr.ID_PREFIX);v("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",Pr.prototype.qh);function Qr(){this.Ua=[];this.Ya=[]}f=Qr.prototype;f.Yf=function(){return this.Ua.length+this.Ya.length};f.km=function(){return 0==this.Ua.length&&0==this.Ya.length};f.clear=function(){this.Ua=[];this.Ya=[]};f.contains=function(a){return Ib(this.Ua,a)||Ib(this.Ya,a)};f.remove=function(a){var b=Bb(this.Ua,a);if(0>b)return Lb(this.Ya,a);zb.splice.call(this.Ua,b,1);return!0};
f.Wh=function(){for(var a=[],b=this.Ua.length-1;0<=b;--b)a.push(this.Ua[b]);for(var c=this.Ya.length,b=0;b<c;++b)a.push(this.Ya[b]);return a};function Rr(a,b){Wp.call(this,a,b);this.La.xj(0)}w(Rr,Wp);Rr.prototype.W=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};Rr.prototype.tz=function(){var a=this.a(),b=Mh(null,"goog-slider-thumb",a)[0];b||(b=this.hk(),a.appendChild(b));this.qa=this.Ac=b};Rr.prototype.hk=function(){var a=this.N().v("div","goog-slider-thumb");Zk(a,"button");return a};function Sr(a){Rr.call(this);this.constructor.Pm=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.Ec=this.constructor.Pm;V.prototype.qq.bind(this)();null!=a&&this.pi(a)}w(Sr,Rr);v("nrg.ui.Slider",Sr);Sr.ID_PREFIX="nrg.ui.Slider";Sr.CSS_SUFFIX={LE:"track",Px:"track-hovered",Ss:"thumb",Nx:"thumb-hovered"};f=Sr.prototype;f.Dk=!1;f.bi=!1;f.us=!1;f.Fl=!1;f.eJ=function(){return this.Dk};f.DF=function(){return this.Fl};f.op=null;f.iq=null;f.Hl=null;f.Hb=null;f.pb=null;
f.ri=function(a){this.us=a};f.n=function(a){this.o=O("div",{id:Sr.ID_PREFIX+"_Widget_"+B()});this.Db(this.o);a=null!=a?a:document.body;a.appendChild(this.o);this.ue=O("div",{id:Sr.ID_PREFIX+"_Track_"+B()});this.o.appendChild(this.ue);this.Pc=Ph("goog-slider-thumb",this.o);F(this,"change",this.SJ.bind(this));F(this.a(),"mouseenter",this.mK.bind(this));F(this.a(),"mouseleave",this.Kr.bind(this));F(this,"l",this.HK.bind(this));F(this,"m",this.EK.bind(this));this.pi(this.Eb().toLowerCase())};f.a=function(){return this.o};
f.fI=function(){return this.ue};f.$H=function(){return this.Pc};f.wn=function(a){null==this.Jj&&(this.Jj={});if(null==this.Jj[a.id]){var b=new Rp(a);b.addEventListener("mousewheel",this.tK,!1,this);this.Jj[a.id]=b}};f.LF=function(a){null==this.Hj&&(this.Hj={});if(null==this.Hj[a.id]){var b=new $n(a);F(b,"key",this.ii.bind(this));this.Hj[a.id]=b}};f.ii=function(){};
f.k=function(){var a=this.w(),a=iq(this,a);"horizontal"==this.Eb().toLowerCase()?this.Pc.style.left=a.x.toString()+"px":"vertical"==this.Eb().toLowerCase()&&(this.Pc.style.left=a.y.toString()+"px")};f.pi=function(a){Sr.d.pi.call(this,a);this.ha&&Tr(this,this.Eb().toLowerCase())};function Tr(a,b){function c(a,c){Eh(a,[wj(c,"horizontal"),wj(c,"vertical")],[c,wj(c,b)])}c(a.o,a.constructor.Ec);c(a.ue,Sr.CSS.LE);c(a.Pc,Sr.CSS.Ss)}f.ex=!1;f.gu=1;f.IC=function(a,b){this.ex=a;u(b)&&(this.gu=b)};
f.tK=function(a){var b=Math.abs(a.Hd)<Math.abs(a.Oh)?a.Oh:a.Hd;this.ex?this.F(Math.round(this.w()-b*this.gu)):this.F(Math.round(this.w()-(0>b?-1:1)));this.dispatchEvent({type:"w"});a.preventDefault()};f.At=function(a){this.mh=this.mh?this.mh:[];this.mh.push(a);Ur(this)};f.Hy=function(a){this.nh=this.nh?this.nh:[];this.nh.push(a);Vr(this)};
f.Gt=function(a){this.Fl=!0;this.op=a;a=this.Pc;this.iq=Gk(a);N(a,this.op);var b=Gk(a);Ch(a,this.op);if(null!=this.Hl)for(var c in b){if(b[c]!=this.iq[c]){this.Hl=b;break}}else this.Hl=b};function Wr(a){null!=a.Hb&&(D(a.Hb,function(a){a.g()}),Jb(a.Hb),delete a.Hb)}
function Xr(a,b){if(a.Fl){var c=a.Pc,d=Gk(c),e=T(c),h=Ei(c);"vertical"==a.Eb()&&(d.top=h.y,d.height=e.height,b.top=h.y,b.height=e.height);null!=a.pb&&(a.pb.stop(),a.pb.g(),delete a.pb,Wr(a));a.pb=new gk;a.Hb=Lk(c,d,b,200);D(a.Hb,function(a){this.pb.add(a)}.bind(a));a.pb.play()}}f.ug=null;f.qA=function(){if(null!=this.ug){var a=this.ug.Wh();if(0<a.length)return a[0]}};
f.SJ=function(a){a.stopPropagation();null==this.ug&&(this.ug=new Qr);2>this.ug.Yf()?(a=this.w(),this.ug.Ya.push(a)):(a=this.w(),this.ug.Ya.push(a),a=this.ug,0==a.Ua.length&&(a.Ua=a.Ya,a.Ua.reverse(),a.Ya=[]),a.Ua.pop());this.Dk&&(Yr(this),Zr(this));this.us||this.dispatchEvent({type:"v",value:this.w(),zJ:this.ma(),tJ:this.aa()});this.us=!1};function Yr(a){N(a.Pc,Sr.CSS.Nx);null!=a.mh&&D(a.mh,function(a){N(this.Pc,a)}.bind(a))}
function Zr(a){N(a.ue,Sr.CSS.Px);null!=a.nh&&D(a.nh,function(a){N(this.ue,a)}.bind(a))}function Ur(a){Ch(a.Pc,Sr.CSS.Nx);null!=a.mh&&D(a.mh,function(a){Ch(this.Pc,a)}.bind(a))}function Vr(a){Ch(a.ue,Sr.CSS.Px);null!=a.nh&&D(a.nh,function(a){Ch(this.ue,a)}.bind(a))}f.mK=function(){this.bi=!0;this.Dk||(this.Fl?("vertical"==this.Eb()&&0==this.Hl.width&&this.Gt(this.op),Xr(this,this.Hl)):(Zr(this),Yr(this)))};f.Kr=function(){this.bi=!1;this.Dk||(this.Fl?Xr(this,this.iq):(Ur(this),Vr(this)))};
f.HK=function(){this.Dk=!0};f.EK=function(){this.Dk=!1;this.bi||this.Kr()};
f.f=function(){Sr.d.f.call(this);delete this.us;null!=this.o&&(I(this),R(this.o),delete this.o);null!=this.Pc&&(I(this.Pc),R(this.Pc),delete this.Pc);null!=this.ue&&(I(this.ue),R(this.ue),delete this.ue);null!=this.Hj&&(C(this.Hj,function(a){I(a);a.g()}),sb(this.Hj),delete this.Hj);null!=this.Jj&&(C(this.Jj,function(a){I(a);a.g()}),sb(this.Jj),delete this.Jj);null!=this.mh&&(Jb(this.mh),delete this.mh);null!=this.nh&&(Jb(this.nh),delete this.nh);null!=this.ug&&(sb(this.ug),delete this.ug);Wr(this);
delete this.ex;delete this.gu;delete this.Dk;delete this.Fl;delete this.op;delete this.Hb;delete this.pb;delete this.pP;delete this.iq;delete this.Hl;delete this.bi};v("nrg.ui.Slider.EventType",{BD:"v",oN:"w"});v("nrg.ui.Slider.ID_PREFIX",Sr.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",Sr.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendChangeEvent",Sr.prototype.ri);v("nrg.ui.Slider.prototype.render",Sr.prototype.n);v("nrg.ui.Slider.prototype.isSliding",Sr.prototype.eJ);
v("nrg.ui.Slider.prototype.getPreviousValue",Sr.prototype.qA);v("nrg.ui.Slider.prototype.getElement",Sr.prototype.a);v("nrg.ui.Slider.prototype.getTrack",Sr.prototype.fI);v("nrg.ui.Slider.prototype.getThumb",Sr.prototype.$H);v("nrg.ui.Slider.prototype.bindToMouseWheel",Sr.prototype.wn);v("nrg.ui.Slider.prototype.bindToArrowKeys",Sr.prototype.LF);v("nrg.ui.Slider.prototype.updateStyle",Sr.prototype.k);v("nrg.ui.Slider.prototype.setOrientation",Sr.prototype.pi);
v("nrg.ui.Slider.prototype.setUseDeltaToScroll",Sr.prototype.IC);v("nrg.ui.Slider.prototype.addThumbHoverClass",Sr.prototype.At);v("nrg.ui.Slider.prototype.addTrackHoverClass",Sr.prototype.Hy);v("nrg.ui.Slider.prototype.animateOnHover",Sr.prototype.Gt);v("nrg.ui.Slider.prototype.animatesOnHover",Sr.prototype.DF);v("nrg.ui.Slider.prototype.disposeInternal",Sr.prototype.f);function $r(){Sr.call(this)}w($r,Sr);v("xiv.ui.layouts.interactors.Slider",$r);$r.ID_PREFIX="xiv.ui.layouts.interactors.Slider";$r.CSS_SUFFIX={};$r.prototype.n=function(){$r.d.n.call(this)};$r.prototype.f=function(){$r.d.f.call(this)};v("xiv.ui.layouts.interactors.Slider.EventType",{});v("xiv.ui.layouts.interactors.Slider.ID_PREFIX",$r.ID_PREFIX);v("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",$r.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Slider.prototype.render",$r.prototype.n);
v("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",$r.prototype.f);function as(){V.call(this)}w(as,V);v("xiv.ui.layouts.interactors.Crosshairs",as);as.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";as.CSS_SUFFIX={WM:"horizontal",yO:"vertical"};f=as.prototype;f.xg=null;f.bg=null;f.KC=function(a){null!=a&&(this.xg.style.left=a.toString()+"px")};f.LC=function(a){null!=a&&(this.bg.style.top=a.toString()+"px")};f.n=function(a){this.xg=bs(this,"vertical");this.bg=bs(this,"horizontal");a.appendChild(this.bg);a.appendChild(this.xg)};
f.rp=function(a){a=!1===a?"hidden":"visible";this.xg.style.visibility=a;this.bg.style.visibility=a};function bs(a,b){b=b.toLowerCase();if(!pb(as.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return O("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.Ec+"-"+b.toLowerCase()})}f.f=function(){as.d.f.call(this);R(this.xg);delete this.xg;R(this.bg);delete this.bg};v("xiv.ui.layouts.interactors.Crosshairs.EventType",{});v("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",as.ID_PREFIX);
v("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",as.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",as.prototype.xg);v("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",as.prototype.bg);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",as.prototype.KC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",as.prototype.LC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.render",as.prototype.n);
v("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",as.prototype.rp);v("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",as.prototype.f);function cs(){V.call(this)}w(cs,V);v("xiv.ui.layouts.interactors.PlayButton",cs);cs.ID_PREFIX="xiv.ui.layouts.interactors.PlayButton";cs.CSS_SUFFIX={wi:"image"};f=cs.prototype;f.$a=null;f.lo=!1;f.L=null;f.pa=null;f.cg=70;f.n=function(a){cs.d.n.call(this,a);this.$a=O("img",{id:"PlayButton_"+B()});N(this.$a,cs.CSS.wi);this.a().appendChild(this.$a);this.$a.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";F(this.$a,"click",function(){this.lo?(this.lo=!1,this.pause()):(this.lo=!0,this.play())}.bind(this))};
f.pause=function(){this.$a.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";null!=this.L&&null!=this.pa&&this.pa.stop()};f.play=function(){this.$a.src=serverRoot+"/images/viewer/xiv/ui/other/pause.png";null!=this.L&&(null==this.pa&&(this.pa=new Wf),this.pa.setInterval(this.cg),this.pa.addEventListener(Xf,function(){this.L.w()==this.L.aa()?this.L.F(this.L.ma()):this.L.F(this.L.w()+1)}.bind(this)),this.pa.start())};f.setInterval=function(a){this.cg=a};f.pf=function(){return this.lo};
f.FC=function(a){this.L=a};f.f=function(){cs.d.f.call(this);R(this.$a);I(this.$a);delete this.$a;null!=this.pa&&(I(this.pa),this.pa.g());delete this.L;delete this.lo;delete this.pa;delete this.cg};v("xiv.ui.layouts.interactors.PlayButton.ID_PREFIX",cs.ID_PREFIX);v("xiv.ui.layouts.interactors.PlayButton.prototype.pause",cs.prototype.pause);v("xiv.ui.layouts.interactors.PlayButton.prototype.play",cs.prototype.play);v("xiv.ui.layouts.interactors.PlayButton.prototype.isPlaying",cs.prototype.pf);
v("xiv.ui.layouts.interactors.PlayButton.prototype.setInterval",cs.prototype.setInterval);v("xiv.ui.layouts.interactors.PlayButton.prototype.setSlider",cs.prototype.FC);function ds(a){cr.call(this);a=null!=a?a:mb(es);a=g(a)?a:[a];D(a,function(b,c){a[c]=b.toUpperCase()});fs(this,a);gs(this,a);null!=this.i.X&&this.re();null!=this.i.Y&&this.rg();null!=this.i.Z&&this.zj();null!=this.i.V&&this.ep();this.k()}w(ds,cr);v("xiv.ui.layouts.XyzvLayout",ds);ds.TITLE="XyzvLayout";ds.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var es={Fg:"X",Ce:"Y",kl:"Z",Hp:"V"};
ds.CSS_SUFFIX={Fg:"x",Ce:"y",kl:"z",Hp:"v",na:"slider",yi:"slider-thumb",Rs:"slider-thumb-hovered",zi:"slider-track",UN:"slider-track-x",VN:"slider-track-y",WN:"slider-track-z",TM:"framenumber"};function hs(a,b,c,d,e){this.na=a;this.Pd=b;this.hd=c;this.Hf=d;this.Kj=e}f=ds.prototype;f.cC=0;f.oi=function(a,b){this.i[a].wm(b);var c=this.qz(a);Zh(this.a(),c);c.style.position="absolute";this.i[a].P().mi(c);this.i[a].P().update()};
f.qz=function(a){return O("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":wj(this.constructor.Ec,a.toLowerCase()+"-resizeboundary")})};function fs(a,b){if(b.length>lb(es))throw Error("Invalid amount of frames "+b+". Must be "+es);D(b,function(a){if(!pb(es,a))throw Error("Invalid frame title ",a);}.bind(a))}function gs(a,b){var c="";D(b,function(a,b){c=a.toUpperCase();this.wy(new br(c));Zh(this.a(),this.i[c].a());N(this.i[c].a(),ds.CSS[b])}.bind(a))}f.lM=function(a){a.sw(this.Yl())};
f.sw=function(a){this.Qe(function(b,c){null!=a[c]&&(b[dr]=a[c].na,R(a[c].na.a()),b.a().appendChild(a[c].na.a()),b[er]=a[c].Pd,R(a[c].Pd.a()),b.a().appendChild(a[c].Pd.a()),b[gr]=a[c].hd,b.a().appendChild(a[c].hd.xg),b.a().appendChild(a[c].hd.bg))})};f.uy=function(){this.hw();is(this);js(this);ks(this);ls(this);ms(this)};f.Yl=function(){var a={};this.Qe(function(b,c){a[c]=new hs(b[dr],b[er],b[gr],b[fr],b[hr])});return a};f.iA=function(a){a=this.i[a];return new hs(a[dr],a[er],a[gr],a[fr],a[hr])};
f.hA=function(a,b){return this.i[a][b]};f.eA=function(a){return this.i[a]};function is(a){var b;a.Qe(function(a,d){b=new Sr("horizontal");b.n(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[dr]=b;Eh(b.a(),null,[ds.CSS.na]);Eh(b.Pc,null,[ds.CSS.yi]);Eh(b.ue,null,[ds.CSS.zi,wj(ds.CSS.zi,d.toLowerCase())]);b.At(ds.CSS.Rs)}.bind(a))}function js(a){var b;a.Qe(function(a){b=new rp;b.n(a.a());a[er]=b}.bind(a))}function ks(a){var b;a.Qe(function(a){b=new Pr;b.n(a.a());a[fr]=b}.bind(a))}
function ms(a){var b;a.Qe(function(a){b=new cs;b.n(a.a());a[hr]=b}.bind(a))}function ls(a){var b;a.Qe(function(a){b=new as;a[gr]=b;b.n(a.a());a.a().appendChild(b.bg);a.a().appendChild(b.xg)}.bind(a))}f.Qe=function(a){C(es,function(b){b=b.toUpperCase();null!=this.i[b]&&"V"!=b&&a(this.i[b],b)}.bind(this))};f.loop=function(a){C(es,function(b){b=b.toUpperCase();a(this.i[b],b)}.bind(this))};f.re=function(){null!=this.constructor.CSS&&N(this.i.X.a(),this.constructor.CSS.Fg)};
f.rg=function(){null!=this.constructor.CSS&&N(this.i.Y.a(),this.constructor.CSS.Ce)};f.Ho=function(a){this.Kh();var b=T(this.i.X.a()),c=T(this.i.Y.a()),d=T(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.u.width)};f.zj=function(){null!=this.constructor.CSS&&N(this.i.Z.a(),this.constructor.CSS.kl)};f.ep=function(){null!=this.constructor.CSS&&N(this.i.V.a(),this.constructor.CSS.Hp)};f.Re=ea;f.Kk=ea;f.Hr=ea;f.Gr=ea;f.ve=ea;f.Ye=ea;f.we=ea;f.$k=ea;f.f=function(){ds.d.f.call(this);delete this.cC};
v("xiv.ui.layouts.XyzvLayout.TITLE",ds.TITLE);v("xiv.ui.layouts.XyzvLayout.EventType",{});v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",ds.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",es);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",ds.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",hs);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",ds.prototype.cC);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",ds.prototype.oi);
v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",ds.prototype.qz);v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",ds.prototype.lM);v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",ds.prototype.sw);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",ds.prototype.uy);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",ds.prototype.Yl);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",ds.prototype.iA);
v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",ds.prototype.hA);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",ds.prototype.eA);v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",ds.prototype.Qe);v("xiv.ui.layouts.XyzvLayout.prototype.loop",ds.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",ds.prototype.re);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",ds.prototype.rg);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",ds.prototype.zj);
v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",ds.prototype.ep);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",ds.prototype.Re);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",ds.prototype.Kk);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",ds.prototype.Hr);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",ds.prototype.Gr);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",ds.prototype.ve);
v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",ds.prototype.Ye);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",ds.prototype.we);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",ds.prototype.$k);v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",ds.prototype.f);function ns(){ds.call(this,["X","Y","Z"])}w(ns,ds);v("xiv.ui.layouts.TwoDWidescreen",ns);ns.TITLE="TwoDWidescreen";ns.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";ns.CSS_SUFFIX={Fg:"x",Ce:"y",kl:"z"};f=ns.prototype;f.re=function(){ns.d.re.call(this);this.oi("X",["RIGHT"]);F(this.i.X.P(),"resize",this.Re.bind(this));F(this.i.X.P(),"resize_end",this.k.bind(this))};f.rg=function(){ns.d.rg.call(this);this.oi("Y",["BOTTOM"]);F(this.i.Y.P(),"resize",this.Kk.bind(this));F(this.i.Y.P(),"resize_end",this.k.bind(this))};
f.Re=function(){this.Ho(function(a){var b=a.width,c=Math.max(this.u.width-a.width,this.sb);D(["Y","Z"],function(a){this.i[a].a().style.left=b+"px";this.i[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.Qg()};f.Kk=function(){this.Ho(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.u.height-c;this.i.Z.a().style.top=c+"px";this.i.Z.a().style.height=d+"px"}.bind(this));this.Qg()};f.k=function(){ns.d.k.call(this);this.Oo();this.ve();this.we();this.Ye()};
f.Oo=function(){if(this.la.width!==this.u.width||this.la.height!==this.u.height){var a=1-(this.la.height-this.u.height)/this.la.height,b=1-(this.la.width-this.u.width)/this.la.width;this.Qe(function(c){frameSize=T(c.a());c.a().style.width=Math.max(frameSize.width*b,this.sb).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.ed).toString()+"px"}.bind(this))}};
f.ve=function(){var a=this.i.X;a.a().style.height=this.u.height.toString()+"px";rk(a.P().pd(),{left:this.sb,width:this.u.width-2*this.sb});var b=a.P().qd("RIGHT");b.style.left=a.a().style.width;Ri(b,this.u.height);a.P().update()};f.we=function(){var a=this.i.Y;a.a().style.left=this.i.X.a().style.width;rk(a.P().pd(),{top:this.ed,height:this.u.height-2*this.ed});var b=a.P().qd("BOTTOM");b.style.top=a.a().style.height;Qi(b,parseInt(a.a().style.width));a.P().update()};
f.Ye=function(){var a=this.i.Z;a.a().style.left=this.i.X.a().style.width;a.a().style.top=this.i.Y.a().style.height;a.a().style.height=this.u.height-parseInt(this.i.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",ns.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",ns.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",ns.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",ns.prototype.re);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",ns.prototype.rg);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",ns.prototype.Re);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",ns.prototype.Kk);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",ns.prototype.k);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",ns.prototype.ve);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",ns.prototype.we);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",ns.prototype.Ye);function os(a){ds.call(this,a)}w(os,ds);v("xiv.ui.layouts.SingleFrameLayout",os);os.TITLE="SingleFrameLayout";os.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";os.prototype.Oo=function(){if(this.la.width!==this.u.width||this.la.height!==this.u.height){var a=this.la.height*(1-(this.la.height-this.u.height)/this.la.height),b=this.la.width*(1-(this.la.width-this.u.width)/this.la.width);this.loop(function(c){null!=c&&Pi(c.a(),Math.max(b,this.sb),Math.max(a,this.ed))}.bind(this))}};
os.prototype.k=function(){os.d.k.call(this);this.Oo()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",os.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",os.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",os.prototype.k);function ps(){ds.call(this,"V");N(this.i.V.a(),wj(br.Ec,this.constructor.TITLE))}w(ps,os);v("xiv.ui.layouts.ThreeD",ps);ps.TITLE="ThreeD";ps.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",ps.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",ps.ID_PREFIX);function qs(){ds.call(this,"X");N(this.i.X.a(),wj(br.Ec,this.constructor.TITLE.toLowerCase()))}w(qs,os);v("xiv.ui.layouts.Sagittal",qs);qs.TITLE="Sagittal";qs.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",qs.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",qs.ID_PREFIX);function ss(){ds.call(this)}w(ss,ds);v("xiv.ui.layouts.Conventional",ss);ss.TITLE="Conventional";ss.ID_PREFIX="xiv.ui.layouts.Conventional";ss.CSS_SUFFIX={Fg:"x",Ce:"y",kl:"z",Hp:"v",NO:"v-boundary"};f=ss.prototype;f.re=function(){ss.d.re.call(this);this.oi("X",["RIGHT","TOP_RIGHT"]);F(this.i.X.P(),"resize",this.Re.bind(this));F(this.i.X.P(),"resize_end",this.k.bind(this))};f.rg=function(){ss.d.rg.call(this)};
f.zj=function(){ss.d.zj.call(this);this.oi("Z",["RIGHT","TOP_RIGHT"]);F(this.i.Z.P(),"resize",this.Hr.bind(this));F(this.i.Z.P(),"resize_end",this.k.bind(this))};f.ep=function(){ss.d.ep.call(this);this.oi("V","BOTTOM");F(this.i.V.P(),"resize",this.Gr.bind(this));F(this.i.V.P(),"resize_end",this.k.bind(this))};function ts(a,b){a.Kh();var c=T(a.i.X.a()),d=T(a.i.Y.a()),e=T(a.i.Z.a());b(c,d,e)}
f.Re=function(){ts(this,function(a,b,c){var d=Math.max(this.u.width-a.width-c.width,this.sb),e=c.width,h=this.u.height-a.height;this.sb==d&&(e=Math.max(this.u.width-a.width-b.width,this.sb),Ci(this.i.X.a(),e,h));Ci(this.i.Z.a(),0,h);Pi(this.i.Z.a(),e,a.height);Ci(this.i.Y.a(),c.width+a.width,h);Pi(this.i.Y.a(),d,a.height);Pi(this.i.V.a(),this.u.width,this.u.height-a.height)}.bind(this));this.Qg()};
f.Hr=function(){ts(this,function(a,b,c){var d=Math.max(this.u.width-c.width-b.width,this.sb),e=b.width,h=this.u.height-c.height;this.sb==d&&(e=Math.max(this.u.width-c.width-a.width,this.sb));Ci(this.i.X.a(),c.width,h);Pi(this.i.X.a(),d,c.height);Ci(this.i.Y.a(),c.width+d,h);Pi(this.i.Y.a(),e,b.height);Pi(this.i.V.a(),this.u.width,this.u.height-c.height)}.bind(this));this.Qg()};
f.Gr=function(){this.Kh();var a=parseInt(this.i.V.a().style.height),b=this.u.height-a;C(this.i,function(c){c!==this.i.V&&rk(c.a(),{top:a,height:b})}.bind(this));this.ve();this.we();this.Qg()};f.k=function(){ss.d.k.call(this);this.$k();this.cx();this.dx();this.ve();this.we();this.Ye()};f.cx=function(){var a=parseInt(this.i.V.a().style.height),b=Math.max(this.u.height-a,this.ed);this.Qe(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};
f.dx=function(){var a,b=1-(this.la.width-this.u.width)/this.la.width;this.la.width!==this.u.width&&this.Qe(function(c){a=T(c.a());c.a().style.width=Math.max(a.width*b,this.sb).toString()+"px"}.bind(this))};
function us(a,b){var c=a.i.V.P().uk("BOTTOM"),d=a.i[b].P().pd(),e=Ei(a.i[b].a()),h=T(a.i[b].a());Ci(d,parseInt(d.style.left),a.ed);Pi(d,a.u.width-3*a.sb,a.u.height-2*a.ed);d=a.i[b].P().qd("RIGHT");Ci(d,e.x+h.width,e.y);Ri(d,a.u.height-c.Za.y);Ci(a.i[b].P().qd("TOP_RIGHT"),e.x+h.width,e.y);a.i[b].P().update()}f.ve=function(){this.i.X.a().style.left=this.i.Z.a().style.width;rk(this.i.X.P().pd(),{left:2*this.sb});us(this,"X")};
f.we=function(){this.i.Y.a().style.left=(parseInt(this.i.Z.a().style.width)+parseInt(this.i.X.a().style.width)).toString()+"px"};f.Ye=function(){rk(this.i.Z.P().pd(),{left:this.sb});us(this,"Z")};
f.$k=function(){if(this.la.width!==this.u.width||this.la.height!==this.u.height){var a=T(this.i.V.a());Pi(this.i.V.a(),this.u.width,Math.max(a.height*(1-(this.la.height-this.u.height)/this.la.height),this.ed))}Ci(this.i.V.P().pd(),this.u.width,this.ed);Pi(this.i.V.P().pd(),this.u.width-3*this.sb,this.u.height-2*this.ed);a=this.i.V.P().qd("BOTTOM");Ci(a,0,T(this.i.V.a()).height);Qi(a,this.u.width);this.i.V.P().update()};v("xiv.ui.layouts.Conventional.TITLE",ss.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",ss.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",ss.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",ss.prototype.re);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",ss.prototype.rg);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",ss.prototype.zj);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",ss.prototype.ep);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Z",ss.prototype.Hr);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",ss.prototype.Re);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",ss.prototype.Gr);v("xiv.ui.layouts.Conventional.prototype.updateStyle",ss.prototype.k);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",ss.prototype.ve);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",ss.prototype.we);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",ss.prototype.Ye);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",ss.prototype.$k);function vs(){ds.call(this,"Z");N(this.i.Z.a(),wj(br.Ec,this.constructor.TITLE))}w(vs,os);v("xiv.ui.layouts.Transverse",vs);vs.TITLE="Transverse";vs.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",vs.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",vs.ID_PREFIX);function ws(){ds.call(this)}w(ws,ds);v("xiv.ui.layouts.FourUp",ws);ws.TITLE="Four-Up";ws.ID_PREFIX="xiv.ui.layouts.FourUp";ws.CSS_SUFFIX={Fg:"x",Ce:"y",kl:"z",Hp:"v"};f=ws.prototype;f.re=function(){ws.d.re.call(this);this.oi("X",["RIGHT","TOP","TOP_RIGHT"]);F(this.i.X.P(),"resize",this.Re.bind(this));F(this.i.X.P(),"resize_end",this.k.bind(this))};
f.Re=function(){var a=Ei(this.i.X.a()),b=T(this.i.X.a());Ci(this.i.Y.a(),b.width,a.y);Pi(this.i.Y.a(),this.u.width-b.width,b.height);Ci(this.i.Z.a(),0,0);Pi(this.i.Z.a(),b.width,a.y);Ci(this.i.V.a(),b.width,0);Pi(this.i.V.a(),this.u.width-b.width,a.y);a=this.i.X.P().uk("RIGHT").qd();a.style.top="0px";a.style.height=this.u.height.toString()+"px";this.Qg()};f.k=function(){ws.d.k.call(this);this.Oo();this.Ye();this.$k();this.ve();this.we()};
f.Oo=function(){if(this.la.width!==this.u.width||this.la.height!==this.u.height){var a=this.la.height*(1-(this.la.height-this.u.height)/this.la.height)/2,b=this.la.width*(1-(this.la.width-this.u.width)/this.la.width)/2;this.loop(function(c){Pi(c.a(),Math.max(b,this.sb),Math.max(a,this.ed))}.bind(this))}};
f.ve=function(){this.i.X.a().style.top=this.i.Z.a().style.height;Ci(this.i.X.P().pd(),this.sb,this.ed);Pi(this.i.X.P().pd(),this.u.width-2*this.sb,this.u.height-2*this.ed);var a=this.i.X.P().uk("TOP").qd();a.style.left="0px";a.style.width=this.u.width.toString()+"px";this.i.X.P().update();a=this.i.X.P().uk("RIGHT").qd();a.style.top="0px";a.style.height=this.u.height.toString()+"px"};f.we=function(){this.i.Y.a().style.left=this.i.Z.a().style.width;this.i.Y.a().style.top=this.i.Z.a().style.height};
f.Ye=function(){};f.$k=function(){this.i.V.a().style.left=this.i.Z.a().style.width};f.f=function(){ws.d.f.call(this)};v("xiv.ui.layouts.FourUp.TITLE",ws.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",ws.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",ws.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",ws.prototype.re);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",ws.prototype.Re);v("xiv.ui.layouts.FourUp.prototype.updateStyle",ws.prototype.k);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",ws.prototype.ve);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",ws.prototype.we);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",ws.prototype.Ye);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",ws.prototype.$k);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",ws.prototype.f);function xs(){ds.call(this,["X","Y","Z"])}w(xs,ds);v("xiv.ui.layouts.TwoDRow",xs);xs.TITLE="TwoDRow";xs.ID_PREFIX="xiv.ui.layouts.TwoDRow";xs.CSS_SUFFIX={Fg:"x",Ce:"y",kl:"z"};f=xs.prototype;f.re=function(){xs.d.re.call(this);this.oi("X",["RIGHT"]);F(this.i.X.P(),"resize",this.Re.bind(this));F(this.i.X.P(),"resize_end",this.k.bind(this))};f.rg=function(){xs.d.rg.call(this);this.oi("Y",["RIGHT"]);F(this.i.Y.P(),"resize",this.Kk.bind(this));F(this.i.Y.P(),"resize_end",this.k.bind(this))};f.zj=function(){xs.d.zj.call(this)};
f.Ho=function(a){this.Kh();var b=T(this.i.X.a()),c=T(this.i.Y.a()),d=T(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.u.width)};f.Re=function(){this.Ho(function(a,b,c){b=Math.max(this.u.width-a.width-c.width,this.sb);var d=this.u.height-a.height;Ci(this.i.Y.a(),a.width,d);Pi(this.i.Y.a(),b,a.height);Ci(this.i.Z.a(),a.width+b,d);Pi(this.i.Z.a(),c.width,a.height)}.bind(this));this.Qg()};
f.Kk=function(){this.Ho(function(a,b){var c=this.u.height-b.height;Ci(this.i.X.a(),0,c);Pi(this.i.X.a(),a.width,b.height);Ci(this.i.Z.a(),a.width+b.width,c);Pi(this.i.Z.a(),this.u.width-a.width-b.width,b.height)}.bind(this));this.Qg()};f.k=function(){xs.d.k.call(this);this.dx();this.cx();this.ve();this.we();this.Ye()};f.cx=function(){var a=this.u.height.toString()+"px";this.Qe(function(b){b.a().style.height=a})};
f.dx=function(){var a,b=1-(this.la.width-this.u.width)/this.la.width;this.la.width!==this.u.width&&this.Qe(function(c){a=T(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.sb).toString()+"px"}.bind(this))};function ys(a,b){var c=a.i[b].P().pd(),d=Ei(a.i[b].a()),e=T(a.i[b].a());Ci(c,parseInt(c.style.left),a.ed);Pi(c,a.u.width-3*a.sb,a.u.height-2*a.ed);c=a.i[b].P().qd("RIGHT");Ci(c,d.x+e.width,d.y);Ri(c,a.u.height);a.i[b].P().update()}
f.ve=function(){rk(this.i.X.P().pd(),{left:this.sb});ys(this,"X")};f.we=function(){this.i.Y.a().style.left=this.i.X.a().style.width;rk(this.i.Y.P().pd(),{left:2*this.sb});ys(this,"Y")};f.Ye=function(){this.i.Z.a().style.left=(parseInt(this.i.X.a().style.width)+parseInt(this.i.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",xs.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",xs.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",xs.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",xs.prototype.re);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",xs.prototype.rg);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",xs.prototype.zj);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",xs.prototype.Re);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",xs.prototype.Kk);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",xs.prototype.k);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",xs.prototype.ve);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",xs.prototype.we);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",xs.prototype.Ye);function zs(){ds.call(this,"Y");N(this.i.Y.a(),wj(br.Ec,this.constructor.TITLE.toLowerCase()))}w(zs,os);v("xiv.ui.layouts.Coronal",zs);zs.TITLE="Coronal";zs.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",zs.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",zs.ID_PREFIX);function As(){V.call(this);this.constructor.Cx={};this.constructor.Cx[ws.TITLE]=ws;this.constructor.Cx[ss.TITLE]=ss;this.gl={};this.uj={};this.ti={}}w(As,V);v("xiv.ui.layouts.LayoutHandler",As);As.ID_PREFIX="xiv.ui.layouts.LayoutHandler";As.CSS_SUFFIX={};f=As.prototype;f.ub=null;f.rd=null;f.bv=!1;f.Qi=null;f.te=null;f.Ry=!0;f.iJ=function(){return this.bv};f.CF=function(a){this.Ry=a};f.Xz=function(){return this.ub[this.Zc]};f.Yz=function(a){return this.ub[this.Zc].Au(a)};
f.yp=function(){null!=this.rd&&this.rd.yp()};f.Bu=function(){return null!=this.rd?this.rd.Yl():null};function Bs(a){var b=[];a=a.rd.Yl();C(a,function(a){C(a,function(a){b.push(a.a())})});return b}f.tH=function(a){return null!=this.rd?this.rd.iA(a):null};f.sH=function(a){return null!=this.rd?this.rd.eA(a):null};f.mA=function(a,b){return null!=this.rd?this.rd.hA(a,b):null};f.sC=function(a){this.ni(a);null!=this.rd&&this.rd.hw();this.ub[a].uy();this.rd=this.ub[a]};
f.vy=function(a,b){if(void 0 in this.gl)throw Error(a+" is an already used layout title!");b&&(this.gl[a]=b)};f.ni=function(a,b){if(!(a in this.gl))throw Error("Invalid layout: "+a+"!");null==this.ub&&(this.ub={});a in this.ub||(this.ub[a]=new this.gl[a],F(this.ub[a],"q",this.Ir.bind(this)),Cs(this.ub[a]),Zh(this.a(),this.ub[a].a()));this.Sr=this.Zc;this.Zc=a;this.aD(!1===b?0:500)};
function Ds(a){var b;C(a.ub[a.Zc].i,function(a,d){b=this.mA(d,dr);null!=b&&null==a[Es]&&(b.wn(a.a()),a[Es]=!0)}.bind(a))}f.Ir=function(){this.dispatchEvent({type:"A"})};f.aD=function(a){a=u(a)&&0<=a?a:500;this.Sr==this.Zc?Ds(this):this.Sr?this.Ry?Fs(this,a):Fs(this,0):(Gs(this,this.Zc),Hs(this,this.Zc))};function Is(a,b,c){D(bi(b.a()),function(a){null!=this.uj[c]||(this.uj[c]=[]);this.uj[c].push(a)}.bind(a))}function Js(a){C(a.ti,function(a){Zh(this.a().parentNode,a)}.bind(a))}
function Ks(a,b){var c=[];C(a.ti,function(a,e){c=Mb(c,Lk(a,this.Qi[e],this.te[e],b))}.bind(a));return c}
function Fs(a,b){var c=a.ub[a.Zc].i,d;Gs(a,a.Zc);Hs(a,a.Zc);null!=a.Qi&&sb(a.Qi);null!=a.te&&sb(a.te);a.Qi={};a.te={};C(a.ub[a.Sr].i,function(a,b){d=a.a().cloneNode(!1);this.ti[b]=d;Is(this,a,b);C(this.uj,function(a,b){D(a,function(a){R(a);null!=this.ti[b]&&this.ti[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Kk(a.a(),c[b].a());this.Qi[b]=k.HF;this.te[b]=k.iM}else this.Qi[b]={"z-index":0},this.te[b]={opacity:0}}.bind(a));Js(a);Mk(Ks(a,b),a.Mv.bind(a),a.Nv.bind(a),a.Lv.bind(a))}
f.Mv=function(){this.QA();this.bv=!0;this.dispatchEvent({type:"x",Xw:this.ti})};var Es=B();f=As.prototype;f.Nv=function(){this.dispatchEvent({type:"z",Xw:this.ti})};
f.Lv=function(){var a=this.ub[this.Zc].i;C(a,function(a,c){null!=this.uj[c]&&D(this.uj[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.te[c]&&rk(a.a(),this.te[c])}.bind(this));this.ub[this.Zc]!==this.rd&&this.ub[this.Zc].sw(this.Bu());Ls(this);this.bv=!1;Gs(this,this.Zc);Hs(this,this.Zc);Ms(this);this.dispatchEvent({type:"y",frames:a});Ds(this);this.k()};function Hs(a,b){a.ub[b].a().style.opacity=1;a.ub[b].k()}
function Gs(a,b){a.ub[b].a().style.visibility="visible";a.ub[b].k()}f.QA=function(){C(this.ub,function(a){a.a().style.visibility="hidden";a.k()}.bind(this))};function Ls(a){C(a.ti,function(a){R(a);delete a})}function Cs(a){C(a.i,function(a){F(a.a(),"dblclick",function(){})})}f.eK=function(a){this.JP.push(a)};f.k=function(){As.d.k.call(this);this.ub[this.Zc].k()};
function Ms(a){null!=a.Qi&&(C(a.Qi,function(a){sb(a)}),sb(a.te),delete a.te);null!=a.te&&(C(a.te,function(a){sb(a)}),sb(a.te),delete a.te)}f.f=function(){As.d.f.call(this);Ms(this);delete this.ti;sb(this.uj);delete this.uj;delete this.rd;this.Kn(this.ub);delete this.ub;sb(this.gl);delete this.gl;delete this.Zc;delete this.Sr};v("xiv.ui.layouts.LayoutHandler.EventType",{eN:"x",dN:"y",fN:"z",Qs:"A"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",As.ID_PREFIX);
v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",As.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",Es);v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",As.prototype.iJ);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",As.prototype.CF);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",As.prototype.Xz);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",As.prototype.Yz);
v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",As.prototype.yp);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",As.prototype.Bu);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsElements",As.prototype.lP);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",As.prototype.tH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",As.prototype.sH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",As.prototype.mA);
v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",As.prototype.sC);v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",As.prototype.vy);v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",As.prototype.ni);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",As.prototype.aD);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",As.prototype.QA);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",As.prototype.eK);
v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",As.prototype.k);v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",As.prototype.f);function Ns(a,b){this.x=a;this.y=b}w(Ns,rh);f=Ns.prototype;f.clone=function(){return new Ns(this.x,this.y)};f.gg=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=rh.prototype.scale;f.Fb=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.gg())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.Cc=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.Rl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function Os(){Gq.call(this);this.pg("Display All");this.Kl=O("div",{id:"CheckboxHodler_"+B()});N(this.Kl,Os.CSS.CD);this.ek=new Eq(!0);this.ek.Db(this.Kl);this.wj(this.ek);F(this.ek,"change",this.mc.bind(this))}w(Os,Gq);v("xiv.ui.ctrl.CheckboxController",Os);Os.ID_PREFIX="xiv.ui.ctrl.CheckboxController";Os.CSS_SUFFIX={CD:"checkboxholder"};Os.prototype.pe=function(a){this.D.pe(a);this.mc()};Os.prototype.mc=function(){this.dispatchEvent({type:"p",checked:this.ek.$h()})};Os.prototype.IG=function(){return this.Kl};
Os.prototype.f=function(){Os.d.f.call(this);R(this.Kl);delete this.Kl;I(this.ek);this.ek.g();delete this.ek};v("xiv.ui.ctrl.CheckboxController.ID_PREFIX",Os.ID_PREFIX);v("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",Os.CSS_SUFFIX);v("xiv.ui.ctrl.CheckboxController.prototype.setChecked",Os.prototype.pe);v("xiv.ui.ctrl.CheckboxController.prototype.getCheckboxHolder",Os.prototype.IG);v("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",Os.prototype.mc);
v("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",Os.prototype.f);function Ps(){V.call(this);this.$a=O("img",{id:"nrg.ui.Thumbnail_"+B()});Zh(this.a(),this.$a);this.We=O("div",{id:"DisplayText_"+B()});Zh(this.a(),this.We);this.ns();this.a().className=Ps.Ec;this.$a.className=Ps.CSS.wi;this.We.className=Ps.CSS.hl;Qs(this,!0);this.Eo()}w(Ps,V);v("nrg.ui.Thumbnail",Ps);Ps.ID_PREFIX="nrg.ui.Thumbnail";
Ps.CSS_SUFFIX={wi:"image",hl:"text",ON:"selected",Os:"mouseover",Ax:"image-mouseover",Lx:"text-mouseover",yx:"highlight",Ej:"active",zx:"image-active",Kx:"text-active",PD:"hoverclone"};f=Ps.prototype;f.$y=null;f.pc=null;f.er=!1;f.gH=function(){return this.$a};f.iC=function(a,b){this.$y=a;this.$a.onerror=function(){this.$a.onerror="";this.$a.src=this.$y;null!=b&&b()}.bind(this)};f.YH=function(){return this.We};f.Fu=function(){for(var a=this.We;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
f.Le=function(){return this.pc=this.pc?this.pc:this.a()};f.Zg=function(){return this.er};f.rw=function(a){this.$a.src=a;this.$a.className=Ps.CSS.wi};f.ap=function(a){this.We.innerHTML=a};f.YB=function(){this.pc&&(this.pc.parentNode&&(this.pc=this.pc.parentNode.removeChild(this.pc)),delete this.pc,this.pc=null)};
f.Gn=function(a,b){this.YB();Qs(this,!1);this.pc=b?b:this.a().cloneNode(!0);this.pc.setAttribute("id","HOVERABLE_"+this.a().getAttribute("id"));this.pc.style.visibility="hidden";N(this.pc,Ps.CSS.PD);Qs(this,!0);a&&a.appendChild(this.pc);this.ns()};f.setActive=function(a,b){var c=this.a();(this.er=a)?(b&&N(c,Ps.CSS.yx),N(c,Ps.CSS.Ej),N(this.We,Ps.CSS.Kx),N(this.$a,Ps.CSS.zx)):(Ch(c,Ps.CSS.yx),Ch(c,Ps.CSS.Ej),Ch(this.We,Ps.CSS.Kx),Ch(this.$a,Ps.CSS.zx))};f.k=function(a){a&&this.a()&&rk(this.a(),a)};
f.jw=function(){var a=this.a(),b=this.Le();if(b!==a){var c=hi(a,b),c=Li(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;rk(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.Jr=function(){var a=this.Le();N(a,Ps.CSS.Os);N(a.childNodes[1],Ps.CSS.Lx);N(a.childNodes[0],Ps.CSS.Ax);a!==this.a()&&this.jw()};
f.Eo=function(){var a=this.Le();a&&1<a.childNodes.length&&(Ch(a,Ps.CSS.Os),Ch(a.childNodes[1],Ps.CSS.Lx),Ch(a.childNodes[0],Ps.CSS.Ax),a.style.visibility=a!==this.a()?"hidden":"visible")};function Qs(a,b){var c=a.Le();b?(F(c,"mouseenter",a.Jr.bind(a)),F(c,"mouseleave",a.Eo.bind(a))):(Uc(c,"mouseenter",a.Jr.bind(a)),Uc(c,"mouseleave",a.Eo.bind(a)))}f.ns=function(){Wc(this.Le(),"B")&&Vc("B");F(this.Le(),"click",function(){this.dispatchEvent({type:"B"})}.bind(this))};
f.f=function(){Ps.d.f.call(this);I(this);I(this.a());null!=this.pc&&(I(this.pc),R(this.pc),delete this.pc);R(this.$a);delete this.$a;R(this.We);delete this.We;delete this.YO;delete this.er};v("nrg.ui.Thumbnail.EventType",{DM:"B"});v("nrg.ui.Thumbnail.ID_PREFIX",Ps.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",Ps.CSS_SUFFIX);v("nrg.ui.Thumbnail.HOVERABLE_PREFIX","HOVERABLE_");v("nrg.ui.Thumbnail.prototype.getImage",Ps.prototype.gH);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",Ps.prototype.iC);
v("nrg.ui.Thumbnail.prototype.getTextElement",Ps.prototype.YH);v("nrg.ui.Thumbnail.prototype.getText",Ps.prototype.Fu);v("nrg.ui.Thumbnail.prototype.getHoverable",Ps.prototype.Le);v("nrg.ui.Thumbnail.prototype.isActive",Ps.prototype.Zg);v("nrg.ui.Thumbnail.prototype.setImage",Ps.prototype.rw);v("nrg.ui.Thumbnail.prototype.setText",Ps.prototype.ap);v("nrg.ui.Thumbnail.prototype.removeHoverable",Ps.prototype.YB);v("nrg.ui.Thumbnail.prototype.createHoverable",Ps.prototype.Gn);
v("nrg.ui.Thumbnail.prototype.setActive",Ps.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",Ps.prototype.k);v("nrg.ui.Thumbnail.prototype.repositionHoverable",Ps.prototype.jw);v("nrg.ui.Thumbnail.prototype.onMouseEnter",Ps.prototype.Jr);v("nrg.ui.Thumbnail.prototype.onMouseLeave",Ps.prototype.Eo);v("nrg.ui.Thumbnail.prototype.disposeInternal",Ps.prototype.f);function Rs(){V.call(this)}w(Rs,V);v("nrg.ui.ScrollableContainer",Rs);Rs.ID_PREFIX="nrg.ui.ScrollableContainer";Rs.CSS_SUFFIX={DE:"scrollarea",na:"slider",yi:"slider-thumb",zi:"slider-track",Rs:"slider-thumb-hovered",TN:"slider-track-hovered"};f=Rs.prototype;
f.n=function(a){Rs.d.n.call(this,a);null==this.ng&&(this.ng=O("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":Rs.CSS.DE}),this.a().appendChild(this.ng));this.nb=new Sr("vertical");this.nb.n(this.a());F(this.nb,"v",this.dd.bind(this));this.nb.wn(this.a());N(this.nb.a(),Rs.CSS.na);N(this.nb.Pc,Rs.CSS.yi);N(this.nb.ue,Rs.CSS.zi);this.nb.Gt(Rs.CSS.Rs);this.k();this.dd()};f.ff=function(a){this.ha||this.n();Zh(this.ng,a);this.dd()};f.a=function(){return this.o};f.TH=function(){return this.nb};
f.PH=function(){return this.ng};f.k=function(a){a&&rk(this.o,a)};f.dd=function(){var a=T(this.o).height,b=T(this.ng).height,c=[this.nb.ma(),this.nb.aa()],d=[0,b-a],e=this.nb.Pc;a<b?(this.nb.a().style.opacity=1,a=Math.round(a/b*a),e.style.height=a.toString()+"px",this.nb.sc(!0),e=this.nb.aa()-this.nb.w(),c=jk(e,c,d).remappedVal,this.ng.style.top=(-c).toString()+"px"):(this.nb.a().style.opacity=0,this.nb.sc(!1),this.nb.F(100))};
f.f=function(){Rs.d.f.call(this);null!=this.nb&&(I(this.nb),this.nb.g(),delete this.nb);null!=this.ng&&(R(this.ng),delete this.ng)};v("nrg.ui.ScrollableContainer.ID_PREFIX",Rs.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",Rs.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",Rs.prototype.n);v("nrg.ui.ScrollableContainer.prototype.addContents",Rs.prototype.ff);v("nrg.ui.ScrollableContainer.prototype.getElement",Rs.prototype.a);
v("nrg.ui.ScrollableContainer.prototype.getSlider",Rs.prototype.TH);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",Rs.prototype.PH);v("nrg.ui.ScrollableContainer.prototype.updateStyle",Rs.prototype.k);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",Rs.prototype.dd);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",Rs.prototype.f);function Ss(){V.call(this)}w(Ss,Rs);v("nrg.ui.ScrollableZippyTree",Ss);Ss.ID_PREFIX="nrg.ui.ScrollableZippyTree";Ss.CSS_SUFFIX={ZE:"zippytree"};f=Ss.prototype;f.n=function(a){Ss.d.n.call(this,a);this.oa=new nq;N(this.oa.a(),Ss.CSS.ZE);this.ng.appendChild(this.oa.a());this.dp();this.nb.IC(!0,.3)};f.ff=function(a,b){this.oa.ff(a,b);g(a);this.nb.wn(this.oa.a())};f.Tl=function(){this.oa.Tl()};f.Bn=function(){this.oa.Bn()};f.ac=function(a,b){this.oa.ac(a,b)};f.sI=function(){return this.oa};
f.vF=function(a){this.oa.En(a);this.dd()};f.dp=function(){F(this.oa,"n",this.dd.bind(this));F(this.oa,"a",this.dd.bind(this));F(this.oa,"b",this.dd.bind(this));F(this.oa,wl.pE,this.dd.bind(this))};f.k=function(a){a&&rk(this.a(),a)};f.f=function(){Ss.d.f.call(this);null!=this.oa&&(I(this.oa),this.oa.g(),delete this.oa)};v("nrg.ui.ScrollableZippyTree.EventType",{});v("nrg.ui.ScrollableZippyTree.ID_PREFIX",Ss.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",Ss.CSS_SUFFIX);
v("nrg.ui.ScrollableZippyTree.prototype.render",Ss.prototype.n);v("nrg.ui.ScrollableZippyTree.prototype.addContents",Ss.prototype.ff);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",Ss.prototype.Tl);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",Ss.prototype.Bn);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",Ss.prototype.ac);v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",Ss.prototype.sI);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",Ss.prototype.vF);
v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",Ss.prototype.dp);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",Ss.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",Ss.prototype.f);function Ts(){bd.call(this);this.s="shaders";this.aq="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.aq=a+="}\n";this.Pp="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Pp=a+="}\n"}
w(Ts,bd);
var Us={vO:"vertexPosition",uO:"vertexNormal",tO:"vertexColor",xO:"vertexTexturePos",wO:"vertexScalar"},Vs={zO:"view",wN:"perspective",BM:"center",tN:"objectTransform",pO:"useObjectColor",rN:"objectColor",rO:"useScalars",MN:"scalarsReplaceMode",JN:"scalarsMin",GN:"scalarsMax",KN:"scalarsMinColor",HN:"scalarsMaxColor",LN:"scalarsMinThreshold",IN:"scalarsMaxThreshold",FN:"scalarsInterpolation",xN:"pointSize",sN:"objectOpacity",qN:"normal",qO:"usePicking",sO:"useTexture",oO:"useLabelMapTexture",cN:"labelmapOpacity",
bN:"labelmapColor",bO:"textureSampler",cO:"textureSampler2",DO:"volumeLowerThreshold",KO:"volumeUpperThreshold",HO:"volumeScalarMin",FO:"volumeScalarMax",IO:"volumeScalarMinColor",GO:"volumeScalarMaxColor",MO:"volumeWindowLow",LO:"volumeWindowHigh",JO:"volumeTexture"};
function Ws(a){var b=Object.keys(Vs);if(!Object.keys(Us).every(function(a){a=Us[a];return-1!=this.aq.search(a)||-1!=this.Pp.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Vs[a];return-1!=this.aq.search(a)||-1!=this.Pp.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Xs(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");bd.call(this);this.s="buffer";this.xb=a;this.Di=b;this.Ei=c}w(Xs,bd);function Ys(a,b){this.Vt=a instanceof rh?a:new rh(a,b)}w(Ys,To);Ys.prototype.ne=function(a,b,c,d){zo(Fi(a),0,a,b,this.Vt,c,null,d)};function Zs(a,b){this.hL=4;this.dw=b||void 0;wm.call(this,a)}w(Zs,wm);Zs.prototype.ww=function(a){this.dw=a||void 0;this.sa()&&this.ne()};Zs.prototype.ne=function(){if(this.dw){var a=!this.sa()&&"move_offscreen"!=this.Im,b=this.a();a&&(b.style.visibility="hidden",Vi(b,!0));this.dw.ne(b,this.hL,this.zP);a&&Vi(b,!1)}};function $s(a,b,c){this.qb=c||(a?Ih(Lh(a)):Ih());Zs.call(this,this.qb.v("div",{style:"position:absolute;display:none;"}));this.au=new rh(1,1);this.pk=new kg;a&&this.Gl(a);null!=b&&this.ap(b)}w($s,Zs);var at=[];f=$s.prototype;f.Zd=null;f.className="goog-tooltip";f.PC=500;f.HI=0;f.N=function(){return this.qb};f.Gl=function(a){a=Lh(a);this.pk.add(a);F(a,"mouseover",this.Ak,!1,this);F(a,"mouseout",this.Uq,!1,this);F(a,"mousemove",this.GA,!1,this);F(a,"focus",this.yk,!1,this);F(a,"blur",this.Uq,!1,this)};
f.detach=function(a){if(a)a=Lh(a),bt(this,a),this.pk.remove(a);else{for(var b=this.pk.Wh(),c=0;a=b[c];c++)bt(this,a);this.pk.clear()}};function bt(a,b){Uc(b,"mouseover",a.Ak,!1,a);Uc(b,"mouseout",a.Uq,!1,a);Uc(b,"mousemove",a.GA,!1,a);Uc(b,"focus",a.yk,!1,a);Uc(b,"blur",a.Uq,!1,a)}f.ap=function(a){ii(this.a(),a)};f.pw=function(a){var b=this.a();b&&R(b);$s.d.pw.call(this,a);a&&(b=this.qb.ga.body,b.insertBefore(a,b.lastChild))};f.Fu=function(){return oi(this.a())};
f.$l=function(){return this.Aj?this.sa()?4:1:this.bo?3:this.sa()?2:0};f.Bv=function(){if(!wm.prototype.Bv.call(this))return!1;if(this.anchor)for(var a,b=0;a=at[b];b++)gi(a.a(),this.anchor)||a.ba(!1);Kb(at,this);a=this.a();a.className=this.className;ct(this);F(a,"mouseover",this.NA,!1,this);F(a,"mouseout",this.MA,!1,this);dt(this);return!0};
f.Jv=function(){Lb(at,this);for(var a=this.a(),b,c=0;b=at[c];c++)b.anchor&&gi(a,b.anchor)&&b.ba(!1);this.OB&&et(this.OB);Uc(a,"mouseover",this.NA,!1,this);Uc(a,"mouseout",this.MA,!1,this);this.anchor=void 0;0==this.$l()&&(this.fs=!1);wm.prototype.Jv.call(this)};f.sB=function(a,b){this.anchor==a&&this.pk.contains(this.anchor)&&(this.fs||!this.PP?(this.ba(!1),this.sa()||(this.anchor=a,this.ww(b||ft(this,0)),this.ba(!0))):this.anchor=void 0);this.Aj=void 0};
f.uJ=function(a){this.bo=void 0;a==this.anchor&&(null!=this.Zd&&(this.Zd==this.a()||this.pk.contains(this.Zd))||this.dz&&this.dz.Zd||this.ba(!1))};function gt(a,b){var c=wi(a.qb);a.au.x=b.clientX+c.x;a.au.y=b.clientY+c.y}f.Ak=function(a){var b=ht(this,a.target);this.Zd=b;ct(this);b!=this.anchor&&(this.anchor=b,this.Aj||(this.Aj=Yf(ta(this.sB,this,b,void 0),this.PC)),it(this),gt(this,a))};function ht(a,b){try{for(;b&&!a.pk.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.GA=function(a){gt(this,a);this.fs=!0};f.yk=function(a){this.Zd=a=ht(this,a.target);this.fs=!0;if(this.anchor!=a){this.anchor=a;var b=ft(this,1);ct(this);this.Aj||(this.Aj=Yf(ta(this.sB,this,a,b),this.PC));it(this)}};function ft(a,b){if(0==b){var c=a.au.clone();return new jt(c)}return new kt(a.Zd)}function it(a){if(a.anchor)for(var b,c=0;b=at[c];c++)gi(b.a(),a.anchor)&&(b.dz=a,a.OB=b)}
f.Uq=function(a){var b=ht(this,a.target),c=ht(this,a.relatedTarget);b!=c&&(b==this.Zd&&(this.Zd=null),dt(this),this.fs=!1,!this.sa()||a.relatedTarget&&gi(this.a(),a.relatedTarget)?this.anchor=void 0:et(this))};f.NA=function(){var a=this.a();this.Zd!=a&&(ct(this),this.Zd=a)};f.MA=function(a){var b=this.a();this.Zd!=b||a.relatedTarget&&gi(b,a.relatedTarget)||(this.Zd=null,et(this))};function dt(a){a.Aj&&(ba.clearTimeout(a.Aj),a.Aj=void 0)}
function et(a){2==a.$l()&&(a.bo=Yf(ta(a.uJ,a,a.anchor),a.HI))}function ct(a){a.bo&&(ba.clearTimeout(a.bo),a.bo=void 0)}f.f=function(){this.ba(!1);dt(this);this.detach();this.a()&&R(this.a());this.Zd=null;delete this.qb;$s.d.f.call(this)};function jt(a,b){Ys.call(this,a,b)}w(jt,Ys);jt.prototype.ne=function(a,b,c){b=Fi(a);b=Ii(b);c=c?new th(c.top+10,c.right,c.bottom,c.left+10):new th(10,0,0,10);Bo(this.Vt,a,4,c,b,9)&496&&Bo(this.Vt,a,4,c,b,5)};function kt(a){Uo.call(this,a,3)}w(kt,Uo);
kt.prototype.ne=function(a,b,c){var d=new rh(10,0);zo(this.element,this.Dn,a,b,d,c,9)&496&&zo(this.element,2,a,1,d,c,5)};function lt(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!u(b)||!u(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof jr))throw Error("Invalid interactor.");$s.call(this);this.s="caption";this.ef=a;this.dq=b;this.eq=c;this.Ea=d;this.Fh=null;this.Rj=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Rj=[a];Tc(d,ke,this.oo.bind(this));this.Su()}
w(lt,$s);lt.prototype.Su=function(){var a=zi(this.ef,"position");if("static"==a||""==a)this.ef.style.position="relative";var a=document.getElementsByTagName("head")[0],b=O("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Rj[0]));a.appendChild(b);b.appendChild(c);this.Fh=b;this.ww(new Ys(this.dq,this.eq));this.ba(!0);this.Gl(this.ef);this.a().classList.add("x-tooltip")};lt.prototype.oo=function(){this.ba(!1);this.Fh&&R(this.Fh);this.a()&&R(this.a());this.Fh=null};function mt(){Gr.call(this);this.s="renderer3D";this.an=this.en=this.$m=this.cn=this.Zm=this.bn=this.qt=this.rt=null;this.Ta=[0,0,0];this.Tm=[0,0,0];this.iy=null;this.at=new jd;this.qn=new jd;this.Zj=new jd;this.fn=new jd;this.ol=new jd;this.xl=new jd;this.Xj=new jd;this.Cl=new jd;this.wb={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(mt,Gr);mt.prototype.__defineGetter__("config",function(){return this.wb});f=mt.prototype;
f.rL=function(){this.an=this.en=this.$m=this.cn=this.Zm=this.bn=null;this.Ta=[0,0,0]};f.Kv=function(a){mt.d.Kv.call(this,a);var b=a.dq;a=a.eq;var c=this.aw(b,a);if(c=this.get(c))if(c=c.nl){var d=Mi(this.va),b=new lt(this.va,d.x+b+10,d.y+a+10,this.Ea);a=um(c,null);if(b=b.a())b.innerHTML=tm(a)}};
f.ra=function(){mt.d.ra.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Xa,this.Ia),this.b.clearColor(this.Tm[0],this.Tm[1],this.Tm[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.wb.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Xa,this.Ia,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Xa,this.Ia);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.iy=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new Ts;nt(this,a)};
function nt(a,b){if(null==a.vc||null==a.b||null==a.ja)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Ts))throw Error("Could not add shaders.");Ws(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.Pp);a.b.shaderSource(d,b.aq);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.qt=e;Object.keys(Us).forEach(function(a){a=Us[a];this.at.set(a,this.b.getAttribLocation(this.qt,a));this.b.enableVertexAttribArray(this.at.get(a))}.bind(a));
Object.keys(Vs).forEach(function(a){a=Vs[a];this.qn.set(a,this.b.getUniformLocation(this.qt,a))}.bind(a));a.rt=b}
f.rh=function(a){mt.d.rh.call(this,a);var b=!1;if(null!=a){this.get(a.ld)&&(b=!0);var c=a.ld,d=a.C,e=a.da,h=a.Hc,k=a.Wa,l=a.fa,n=a.ic,p=a.Bd,m=a.q,q=a.eb;if(null!=m&&null!=m.fa&&m.fa.I)this.rh(m);else if(null!=m&&m.I&&this.rh(m),null!=p&&null!=p.fa&&p.fa.I)this.Pb.load(p,a);else if(null!=k&&null!=k.fa&&k.fa.I)this.Pb.load(k,a);else{if(null!=l&&g(l))if(null!=a.vh){if(a.vh.vo!=l.length||!a.I)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Pb.load(l[b],a);return}else{if(null!=l&&l.I){this.Pb.load(a,
a);return}if(null!=q&&null!=q.fa&&q.fa.I){this.Pb.load(q,a);return}}if(0<a.j.length)for(l=a.j,p=l.length,m=m=0;m<p;m++)this.rh(l[m]);if(d){for(l=0;this.Vp;)l++,window.console.log("Possible thread lock avoided: "+l);this.Vp=!0;p=a instanceof Ke&&a.Gh instanceof Pe;b&&null!=k&&k.I&&(l=this.Xj.get(c),null!=l&&this.b.isBuffer(l.xb)&&this.b.deleteBuffer(l.xb));l=null;if(null!=k)if(!b||k.I){l=a.Bl;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
m=!1;k.Li&&(m=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,m);m=this.b.createTexture();m.NI=k.Jf;this.Cl.set(k.ld,m);this.b.bindTexture(this.b.TEXTURE_2D,m);k.Li?(m=this.b.RGBA,k.Zx&&(m=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,m,k.pt,k.nt,0,m,this.b.UNSIGNED_BYTE,k.Li)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,m.NI);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);p?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);m=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
m);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new Xs(m,l.length,2);this.Xj.set(c,l);k.I=!1}else l=this.Xj.get(c);Pf(this.Pb,.1);if(p)this.Vp=!1,A.wd(this.s+".update"),Pf(this.Pb,.9);else{if(!b||d.I||n.I){p=n.zb;k=A.t.Sb(p,d.Nf,d.Of,d.Pf);p=A.t.Sb(p,d.Kf,d.Lf,d.Mf);if(null===this.bn||k.x<this.bn)this.bn=k.x;if(null===this.Zm||p.x>this.Zm)this.Zm=p.x;if(null===this.cn||k.y<this.cn)this.cn=k.y;if(null===this.$m||p.y>this.$m)this.$m=p.y;if(null===this.en||k.z<this.en)this.en=
k.z;if(null===this.an||p.z>this.an)this.an=p.z;this.Ta=[(this.bn+this.Zm)/2,(this.cn+this.$m)/2,(this.en+this.an)/2];n.I=!1}b&&d.I&&(n=this.Zj.get(c),null!=n&&this.b.isBuffer(n.xb)&&this.b.deleteBuffer(n.xb));n=null;!b||d.I?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.Zb,this.b.STATIC_DRAW),n=new Xs(n,d.count,3),d.I=!1):n=this.Zj.get(c);Pf(this.Pb,.3);b&&e.I&&(k=this.Zj.get(c),null!=k&&this.b.isBuffer(k.xb)&&this.b.deleteBuffer(k.xb));
k=null;!b||e.I?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.Zb,this.b.STATIC_DRAW),k=new Xs(k,e.count,3),e.I=!1):k=this.fn.get(c);Pf(this.Pb,.3);b&&h&&h.I&&(e=this.ol.get(c),null!=e&&this.b.isBuffer(e.xb)&&this.b.deleteBuffer(e.xb));e=null;if(h)if(!b||h.I){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.Zb,this.b.STATIC_DRAW);e=new Xs(e,h.count,3);h.I=!1}else e=this.ol.get(c);Pf(this.Pb,.2);b&&q&&q.I&&(h=this.xl.get(c),null!=h&&this.b.isBuffer(h.xb)&&this.b.deleteBuffer(h.xb));h=null;if(q)if(h=q.Vm,!b||q.I){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new Xs(d,h.length,3);q.I=!1}else h=this.xl.get(c);Pf(this.Pb,.1);b||this.Jg.add(a);this.Zj.set(c,
n);this.fn.set(c,k);this.ol.set(c,e);this.Xj.set(c,l);this.xl.set(c,h);this.Vp=a.I=!1}}else a.I=!1}}};f.aw=function(a,b){if(this.wb.PICKING_ENABLED){this.fh(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.Ia-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.fh=function(a,b){mt.d.fh.call(this,a,b);this.b.viewport(0,0,this.Xa,this.Ia);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.Jg.cb,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.iy):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.ja.mt,h=this.ja.O;this.b.uniformMatrix4fv(this.qn.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.qn.get("view"),!1,h);e=this.Ta;this.b.uniform3f(this.qn.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.md.length;for(e=0;e<h;++e){var k=this.md[e];if(k instanceof J){var l=A.t.Sb(this.ja.O,k.ua[0]+k.e[0].G[0],k.ua[1]+k.e[0].G[1],k.ua[2]+k.e[0].G[2]),n=A.t.Sb(this.ja.O,k.ua[0]-k.e[0].G[0],k.ua[1]-k.e[0].G[1],k.ua[2]-k.e[0].G[2]),p=Math.abs(l.z-n.z),l=A.t.Sb(this.ja.O,k.ua[0]+k.e[1].G[0],k.ua[1]+k.e[1].G[1],k.ua[2]+k.e[1].G[2]),n=A.t.Sb(this.ja.O,k.ua[0]-k.e[1].G[0],k.ua[1]-k.e[1].G[1],k.ua[2]+-k.e[1].G[2]),m=Math.abs(l.z-n.z),l=A.t.Sb(this.ja.O,k.ua[0]+k.e[2].G[0],k.ua[1]+k.e[2].G[1],k.ua[2]+
k.e[2].G[2]),n=A.t.Sb(this.ja.O,k.ua[0]-k.e[2].G[0],k.ua[1]-k.e[2].G[1],k.ua[2]-k.e[2].G[2]),l=Math.max(p,m,Math.abs(l.z-n.z));l==p?Oe(k,0):l==m?Oe(k,1):Oe(k,2)}}if(this.wb.ORDERING_ENABLED){p=!1;h=this.md;k=h.length-1;do if(e=h[k],e instanceof J&&e.Fe&&-1!=e.Gb){var p=e.j[e.Gb].j,m=e.Gb,l=A.t.Sb(this.ja.O,e.ua[0]+e.e[m].Oa[0],e.ua[1]+e.e[m].Oa[1],e.ua[2]+e.e[m].Oa[2]),n=A.t.Sb(this.ja.O,e.ua[0]-e.e[m].Oa[0],e.ua[1]-e.e[m].Oa[1],e.ua[2]-e.e[m].Oa[2]),l=l.z-n.z,n=Math.max(e.ll[e.Gb],Math.max(e.ll[e.Gb+
4],e.ll[e.Gb+8])),q=Math.min(e.ll[e.Gb],Math.min(e.ll[e.Gb+4],e.ll[e.Gb+8]));if(0>l*(n+q))for(l=l=0;l<e.kn[m]-1;l++)p[l]&&(p[l].Uc=e.Uc,p[l].kd=e.e[m].zl*l);else for(l=e.kn[m]-1;0<=l;l--)p[l]&&(p[l].Uc=e.Uc,p[l].kd=(e.kn[m]-1)*e.e[m].zl-e.e[m].zl*l);p=!0}while(k--);h=this.Jg.cb;k=h.length-1;do e=h[k],!e.ob||1==e.Uc||e instanceof Ke||(p=e,m=e.C.Mp,e=A.t.Sb(e.ic.zb,m[0],m[1],m[2]),e=A.t.Sb(this.ja.O,e.x,e.y,e.z),e=A.Q.ku(this.ja.Tj,e),e=Math.round(1E3*e)/1E3,p.kd=e,p=!0);while(k--);p&&this.Jg.sort()}if(h=
!a&&null!=b&&b&&this.wb.STATISTICS_ENABLED)var t=0,s=0,z=0,y=0;var e=this.at,k=e.get("vertexPosition"),p=e.get("vertexNormal"),m=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.qn,q=e.get("usePicking"),H=e.get("useObjectColor"),Q=e.get("objectColor"),P=e.get("useScalars"),G=e.get("scalarsReplaceMode"),S=e.get("scalarsMin"),Y=e.get("scalarsMax"),U=e.get("scalarsMinColor"),wa=e.get("scalarsMaxColor"),oa=e.get("scalarsInterpolation"),ya=e.get("scalarsMinThreshold"),Ma=
e.get("scalarsMaxThreshold"),Ha=e.get("objectOpacity"),Na=e.get("labelmapOpacity"),la=e.get("labelmapColor"),za=e.get("useTexture"),qa=e.get("useLabelMapTexture"),Cc=e.get("textureSampler"),ue=e.get("textureSampler2"),ve=e.get("volumeLowerThreshold"),we=e.get("volumeUpperThreshold"),Yd=e.get("volumeScalarMin"),Qh=e.get("volumeScalarMax"),Zv=e.get("volumeWindowLow"),$v=e.get("volumeWindowHigh"),aw=e.get("volumeScalarMinColor"),bw=e.get("volumeScalarMaxColor"),rs=e.get("volumeTexture"),cw=e.get("objectTransform"),
dw=e.get("pointSize"),e=d;do{var Oa=c[d-e];if(Oa){var nb=null;Oa instanceof Ke&&Oa.Gh&&(nb=Oa.Gh);if(Oa.ob&&(!nb||nb.ob)&&(!a||Oa.gn)){var Ac=Oa.ld,Pd=Oa.Ym,id=this.Zj.get(Ac),ne=this.fn.get(Ac),cn=this.ol.get(Ac),mf=this.xl.get(Ac),dn=this.Xj.get(Ac);this.b.bindBuffer(this.b.ARRAY_BUFFER,id.xb);this.b.vertexAttribPointer(k,id.Ei,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,ne.xb);this.b.vertexAttribPointer(p,ne.Ei,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(q,!0):this.b.uniform1i(q,!1);
!cn||a||Pd?(ne=1,Pd&&!a&&(ne=0),this.b.uniform1i(H,ne),ne=Oa.Ha,a&&(ne=[Math.floor(Ac%65025%255)/255,Math.floor(Ac%65025/255)/255,Math.floor(Ac/65025)/255]),this.b.uniform3f(Q,parseFloat(ne[0]),parseFloat(ne[1]),parseFloat(ne[2])),this.b.vertexAttribPointer(m,id.Ei,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(H,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,cn.xb),this.b.vertexAttribPointer(m,cn.Ei,this.b.FLOAT,!1,0,0));!mf||a||Pd?(this.b.uniform1i(P,!1),this.b.vertexAttribPointer(n,id.Ei,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(P,!0),this.b.uniform1i(G,Oa.eb.ly),Ac=Oa.eb.Hi,Pd=Oa.eb.Fi,this.b.uniform3f(U,parseFloat(Ac[0]),parseFloat(Ac[1]),parseFloat(Ac[2])),this.b.uniform3f(wa,parseFloat(Pd[0]),parseFloat(Pd[1]),parseFloat(Pd[2])),this.b.uniform1f(ya,parseFloat(Oa.eb.yb)),this.b.uniform1f(Ma,parseFloat(Oa.eb.Ab)),this.b.uniform1f(S,parseFloat(Oa.eb.Wd)),this.b.uniform1f(Y,parseFloat(Oa.eb.Yb)),this.b.uniform1i(oa,parseInt(Oa.eb.ct,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,mf.xb),this.b.vertexAttribPointer(n,
mf.Ei,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ha,parseFloat(Oa.Uc));Oa.Wa&&dn&&!a?(this.b.uniform1i(za,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.Cl.get(Oa.Wa.ld)),this.b.uniform1i(Cc,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,dn.xb),this.b.vertexAttribPointer(l,dn.Ei,this.b.FLOAT,!1,0,0),this.b.uniform1i(rs,!1)):(this.b.uniform1i(za,!1),this.b.vertexAttribPointer(l,id.Ei,this.b.FLOAT,!1,0,0));nb&&(this.b.uniform1i(rs,!0),this.b.uniform1f(ve,nb.yb),this.b.uniform1f(we,
nb.Ab),this.b.uniform1f(Yd,nb.Wd),this.b.uniform1f(Qh,nb.Yb),Ac=nb.Hi,Pd=nb.Fi,this.b.uniform3f(aw,parseFloat(Ac[0]),parseFloat(Ac[1]),parseFloat(Ac[2])),this.b.uniform3f(bw,parseFloat(Pd[0]),parseFloat(Pd[1]),parseFloat(Pd[2])),this.b.uniform1f(Zv,nb.Rb),this.b.uniform1f($v,nb.Qb),mf=nb.q,this.b.uniform1i(qa,!1),nb.Fe?this.b.uniform1f(Ha,parseFloat(nb.Uc)):mf&&mf.ob&&(nb=Oa.q.ld,this.b.uniform1i(qa,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.Cl.get(nb)),this.b.uniform1i(ue,
1),this.b.uniform1f(Na,mf.Uc),this.b.uniform4fv(la,mf.tt)));this.b.uniformMatrix4fv(cw,!1,Oa.ic.zb);nb=1;"POINTS"==Oa.Ed&&(nb=Oa.hn);this.b.uniform1f(dw,nb);nb=-1;Oa.Ed==Sd?(nb=this.b.TRIANGLES,h&&(s+=id.Di/3)):"LINES"==Oa.Ed?(this.b.lineWidth(Oa.vl),nb=this.b.LINES,h&&(z+=id.Di/2)):"POINTS"==Oa.Ed?(nb=this.b.POINTS,h&&(y+=id.Di)):"TRIANGLE_STRIPS"==Oa.Ed?(nb=this.b.TRIANGLE_STRIP,h&&(s+=id.Di/3)):"POLYGONS"==Oa.Ed&&(nb=0==id.Di%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(s+=id.Di/3));h&&(t+=id.Di);
this.b.drawArrays(nb,0,id.Di)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+t+" | "),c+="Triangles: "+Math.round(s)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.Cl.Yf(),window.console.log(c))}};
f.remove=function(a){mt.d.remove.call(this,a);if(0<a.j.length)for(var b=a.j,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.ld;c=this.Xj.get(b);null!=c&&this.b.isBuffer(c.xb)&&this.b.deleteBuffer(c.xb);a.Wa&&(c=this.Cl.get(a.Wa.ld))&&(this.b.deleteTexture(c),this.Cl.remove(a.Wa.ld));c=this.Zj.get(b);null!=c&&this.b.isBuffer(c.xb)&&this.b.deleteBuffer(c.xb);c=this.fn.get(b);null!=c&&this.b.isBuffer(c.xb)&&this.b.deleteBuffer(c.xb);c=this.ol.get(b);null!=c&&this.b.isBuffer(c.xb)&&this.b.deleteBuffer(c.xb);
c=this.xl.get(b);null!=c&&this.b.isBuffer(c.xb)&&this.b.deleteBuffer(c.xb);this.Zj.remove(b);this.fn.remove(b);this.ol.remove(b);this.Xj.remove(b);this.xl.remove(b);this.Jg.remove(a);return!0};f.be=function(){this.rt=null;delete this.rt;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);mt.d.be.call(this)};mt.prototype.__defineGetter__("bgColor",function(){return this.Tm});mt.prototype.__defineSetter__("bgColor",function(a){this.Tm=a});
mt.prototype.fL=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.aw(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=yr(this.ja,a/this.Xa*2-1,(this.Ia-b)/this.Ia*2-1,0);a=yr(this.ja,a/this.Xa*2-1,(this.Ia-b)/this.Ia*2-1,1);h[0]+=this.Ta[0];h[1]+=this.Ta[1];h[2]+=this.Ta[2];a[0]+=this.Ta[0];a[1]+=this.Ta[1];a[2]+=this.Ta[2];b=[e.C.Nf,e.C.Of,e.C.Pf];var k=[e.C.Kf,e.C.Of,e.C.Pf],l=[e.C.Kf,e.C.Lf,e.C.Pf],n=[e.C.Nf,e.C.Lf,e.C.Pf],p=[e.C.Nf,e.C.Lf,e.C.Mf],m=[e.C.Nf,e.C.Of,
e.C.Mf],q=[e.C.Kf,e.C.Lf,e.C.Mf],t=[e.C.Kf,e.C.Of,e.C.Mf];b=[A.t.Sb(e.ic.zb,b[0],b[1],b[2]),A.t.Sb(e.ic.zb,k[0],k[1],k[2]),A.t.Sb(e.ic.zb,l[0],l[1],l[2]),A.t.Sb(e.ic.zb,n[0],n[1],n[2]),A.t.Sb(e.ic.zb,p[0],p[1],p[2]),A.t.Sb(e.ic.zb,m[0],m[1],m[2]),A.t.Sb(e.ic.zb,q[0],q[1],q[2]),A.t.Sb(e.ic.zb,t[0],t[1],t[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],k=[Math.min(k[0],s.x),Math.max(k[1],s.x),Math.min(k[2],s.y),Math.max(k[3],s.y),Math.min(k[4],s.z),Math.max(k[5],
s.z)];s=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,t=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(s[l]-h[n]);Infinity!=y&&-Infinity!=y&&(q=h[p]+a[p]*y,y=h[m]+a[m]*y,q>=s[t]&&q<=s[t+1]&&y>=s[z]&&y<=s[z+1]?(t=[],t[n]=s[l],t[p]=q,t[m]=y,b.push(t)):(t=[],t[n]=s[l],t[p]=q,t[m]=y,k.push(t)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(s=0;2>s;s++)b=a[s],k[s]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=s=null;k[0]<k[1]?(s=a[0],b=a[1]):
(s=a[1],b=a[0]);h=Math.sqrt((s[0]-b[0])*(s[0]-b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));h/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k=[s[0]/b,s[1]/b,s[2]/b];l=e.C.Zb;n=l.length;for(s=0;s<h;s+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(p=l[b],m=l[b+1],q=l[b+2],t=new A.Q(p,m,q),t=A.t.Sb(e.ic.zb,p,m,q),Math.sqrt((a[0]-t.x)*(a[0]-t.x)+(a[1]-t.y)*(a[1]-t.y)+(a[2]-t.z)*(a[2]-t.z))<=d)return[t.x,t.y,t.z];return null};
v("X.renderer3D",mt);v("X.renderer3D.prototype.init",mt.prototype.ra);v("X.renderer3D.prototype.add",mt.prototype.add);v("X.renderer3D.prototype.onShowtime",mt.prototype.LB);v("X.renderer3D.prototype.onRender",mt.prototype.JB);v("X.renderer3D.prototype.get",mt.prototype.get);v("X.renderer3D.prototype.render",mt.prototype.n);v("X.renderer3D.prototype.destroy",mt.prototype.be);v("X.renderer3D.prototype.remove",mt.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",mt.prototype.rL);
v("X.renderer3D.prototype.resetViewAndRender",mt.prototype.Mo);v("X.renderer3D.prototype.pick",mt.prototype.aw);v("X.renderer3D.prototype.pick3d",mt.prototype.fL);function ot(){mt.call(this)}w(ot,mt);v("xiv.vis.XtkRenderer3D",ot);f=ot.prototype;f.Se=function(){this.Mk()};f.Lk=function(a){ot.d.Lk.call(this,a);this.dispatchEvent({type:"s",value:a.Yj})};f.n=function(){this.vc&&this.b?(ot.d.n.call(this),this.dispatchEvent({type:"t"})):(this.wb.PROGRESSBAR_ENABLED=!1,this.ra())};f.be=function(){ot.d.be.call(this)};f.remove=function(a){null!=a&&ot.d.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",ot.prototype.Se);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",ot.prototype.Lk);v("xiv.vis.XtkRenderer3D.prototype.render",ot.prototype.n);v("xiv.vis.XtkRenderer3D.prototype.remove",ot.prototype.remove);function pt(){$c.call(this);this.dl=[]}w(pt,$c);v("xiv.vis.XtkPlane",pt);var qt=[-300,300,300];f=pt.prototype;f.lm=!0;f.jl=null;f.orientation=null;f.Lo=null;f.Ba=null;f.Vi=null;f.Qa=function(){return this.Ba};f.Eb=function(){return this.orientation};f.hs=function(a){null!=this.Ba&&(null!=a?(this.lq=a,this.Ba.camera.focus=a.focus,this.Ba.camera.position=a.position,this.Ba.camera.up=a.nM,a instanceof or&&(this.Ba.camera.view=a.view)):this.Ba.camera.position=qt)};
f.gs=function(a){this.Vi.style.background=null!=a?r(a)?a:null!=a.Xy?"-webkit-linear-gradient(top, "+a.Xy+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.OG=function(){return this.tq};f.LG=function(){return this.Vi};f.Vk=function(a){this.Vi=a;null!=this.Ba||this.ra(a);this.Ba.container=a};f.Tv=function(a){this.dispatchEvent(a)};
f.ra=function(a){null!=this.Ba&&(I(this.Ba),this.Ba.be(),this.Ba=null);if(null==this.jl)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Ba=new this.jl;this.Ba.orientation=this.orientation;this.Vk(a||this.Vi||document.body);this.Ba.ra();F(this.Ba,"s",function(a){this.dispatchEvent({type:"s",value:a.value})}.bind(this));F(this.Ba,"C",this.Tv.bind(this))};f.add=function(a){this.lm&&(!0==a.isSelectedVolume&&(this.tq=a),this.dl.push(a),this.Ba.add(a))};f.isEnabled=function(){return this.lm};
function rt(a){null!=a.Df&&(R(a.Df),delete a.Df)}function st(a){a.Df=O("div",{id:"DisabledOverlay_"+B()});a.Df.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=O("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.Df.appendChild(c);a.Vi.appendChild(a.Df)}
f.sc=function(a){(this.lm=!1!==a)?zk(this.Df,200,function(){this.Df.style.visibility="hidden";rt(this)}.bind(this)):(null!=this.Df||st(this),this.Df.style.visibility="visible",wk(this.Df,200,function(){}.bind(this)))};f.restore=function(){this.ra();tt(this);null!=this.lq&&this.hs(this.lq);null!=this.Xc&&this.gs(this.Xc);this.n()};f.oL=function(){D(this.dl,function(a){null!=a&&this.Ba.remove(a)}.bind(this))};function tt(a){D(a.dl,function(a){this.Ba.add(a)}.bind(a))}f.n=function(){this.lm&&this.Ba.n()};
f.k=function(){null!=this.Ba&&this.Ba.Se()};f.g=function(){pt.d.g.call(this);null!=this.Ba&&(this.Ba.be(),delete this.Ba);rt(this);null!=this.Xc&&delete this.Xc;null!=this.lq&&delete this.lq;null!=this.Lo&&(null!=this.Lo.g&&(this.Lo.stop(),this.Lo.g()),delete this.Lo);delete this.lm;delete this.jl;delete this.Vi;delete this.orientation;sb(this.dl);delete this.tq;delete this.OP};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",qt);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",pt.prototype.jl);v("xiv.vis.XtkPlane.prototype.orientation",pt.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",pt.prototype.Ba);v("xiv.vis.XtkPlane.prototype.container",pt.prototype.Vi);v("xiv.vis.XtkPlane.prototype.getRenderer",pt.prototype.Qa);v("xiv.vis.XtkPlane.prototype.getOrientation",pt.prototype.Eb);v("xiv.vis.XtkPlane.prototype.setCamera",pt.prototype.hs);v("xiv.vis.XtkPlane.prototype.setBackground",pt.prototype.gs);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",pt.prototype.OG);v("xiv.vis.XtkPlane.prototype.getContainer",pt.prototype.LG);v("xiv.vis.XtkPlane.prototype.setContainer",pt.prototype.Vk);v("xiv.vis.XtkPlane.prototype.init",pt.prototype.ra);v("xiv.vis.XtkPlane.prototype.add",pt.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",pt.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",pt.prototype.sc);v("xiv.vis.XtkPlane.prototype.restore",pt.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",pt.prototype.oL);v("xiv.vis.XtkPlane.prototype.render",pt.prototype.n);v("xiv.vis.XtkPlane.prototype.updateStyle",pt.prototype.k);v("xiv.vis.XtkPlane.prototype.dispose",pt.prototype.g);function ut(){pt.call(this);this.orientation="V";this.jl=ot}w(ut,pt);v("xiv.vis.XtkPlane3D",ut);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function vt(a){pt.call(this);this.orientation=a;this.jl=Mr;this.tq=null}w(vt,pt);v("xiv.vis.XtkPlane2D",vt);f=vt.prototype;f.tA=function(){return this.Ba.tA()};f.uA=function(){return this.Ba.uA()};f.am=function(){return null!=this.Ba?this.Ba.am():null};f.Vk=function(a){vt.d.Vk.call(this,a)};f.g=function(){vt.d.g.call(this);delete this.tq;delete this.sP;delete this.tP};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",vt.prototype.tA);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",vt.prototype.uA);v("xiv.vis.XtkPlane2D.prototype.getVolume",vt.prototype.am);v("xiv.vis.XtkPlane2D.prototype.setContainer",vt.prototype.Vk);v("xiv.vis.XtkPlane2D.prototype.dispose",vt.prototype.g);function wt(){Gq.call(this);this.wj(O("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));N(this.D,wt.CSS.wE);F(this.D,"change",this.mc.bind(this))}w(wt,Gq);v("xiv.ui.ctrl.RadioButtonController",wt);wt.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";wt.CSS_SUFFIX={wE:"radiobutton"};wt.prototype.mc=function(){this.dispatchEvent({type:"p",checked:this.D.checked})};wt.prototype.f=function(){wt.d.f.call(this)};v("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",wt.ID_PREFIX);
v("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",wt.CSS_SUFFIX);v("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",wt.prototype.mc);v("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",wt.prototype.f);function xt(){Gq.call(this);this.dl=[]}w(xt,Gq);v("xiv.ui.ctrl.MasterController2D",xt);xt.ID_PREFIX="xiv.ui.ctrl.MasterController2D";xt.CSS_SUFFIX={};xt.prototype.add=function(){};xt.prototype.f=function(){xt.d.f.call(this);Jb(this.dl);delete this.dl};v("xiv.ui.ctrl.MasterController2D.ID_PREFIX",xt.ID_PREFIX);v("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",xt.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController2D.prototype.add",xt.prototype.add);v("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",xt.prototype.f);function yt(){Gq.call(this);this.pg("Master Opacity")}w(yt,Gq);v("xiv.ui.ctrl.SliderController",yt);yt.ID_PREFIX="xiv.ui.ctrl.SliderController";yt.CSS_SUFFIX={na:"slider",yi:"slider-thumb",Gp:"slider-thumb-hover",zi:"slider-track",Jx:"slider-track-hover",Ws:"value-input"};f=yt.prototype;f.gx=2;f.cp=function(a){this.gx=a};f.n=function(a){yt.d.n.call(this,a);this.Zt();this.$t()};
f.Zt=function(){var a=new Sr;this.wj(a);a.Oc(0);a.bc(1);a.qg(.01);a.F(1);N(a.a(),yt.CSS.na);N(a.Pc,yt.CSS.yi);N(a.ue,yt.CSS.zi);a.At(yt.CSS.Gp);a.Hy(yt.CSS.Jx);F(this.D,"v",this.mc.bind(this));a.a().style.zIndex=0};f.$t=function(){this.ia=O("input");this.ia.type="number";N(this.ia,yt.CSS.Ws);Zh(this.a(),this.ia);F(this.ia,"input",this.Wv.bind(this));this.update()};f.UH=function(){return this.SC};
f.Wv=function(){var a=this.D,b=parseFloat(this.ia.value),b=hd(b,a.ma(),a.aa());this.ia.value=b;this.SC=a.w();a.F(b)};f.gI=function(){return this.ia};f.mc=function(){var a=this.D,b=a.w().toFixed(this.gx),c=a.qA();this.ia.value=b;this.dispatchEvent({type:"p",value:b,zJ:a.ma(),tJ:a.aa(),KP:c})};
f.update=function(){var a=this.D,b=a.w();a.k();a.F(0);a.F(b);a.Vh()!==this.ia.step&&(this.ia.step=a.Vh());a.ma()!==this.ia.min&&(this.ia.min=a.ma());a.aa()!==this.ia.max&&(this.ia.max=a.aa());a.w()!==this.ia.value&&(this.ia.value=b)};f.f=function(){yt.d.f.call(this);delete this.gx;delete this.SC;null!=this.ia&&(I(this.ia),R(this.ia),delete this.ia)};v("xiv.ui.ctrl.SliderController.ID_PREFIX",yt.ID_PREFIX);v("xiv.ui.ctrl.SliderController.CSS_SUFFIX",yt.CSS_SUFFIX);
v("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",yt.prototype.cp);v("xiv.ui.ctrl.SliderController.prototype.render",yt.prototype.n);v("xiv.ui.ctrl.SliderController.prototype.getValueInput",yt.prototype.gI);v("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",yt.prototype.mc);v("xiv.ui.ctrl.SliderController.prototype.getSliderValueBeforeValueInput",yt.prototype.UH);v("xiv.ui.ctrl.SliderController.prototype.update",yt.prototype.update);
v("xiv.ui.ctrl.SliderController.prototype.disposeInternal",yt.prototype.f);function zt(){Gq.call(this);this.pg("TwoThumb");this.Zt();this.$t();this.ee=O("input");this.ee.type="number";N(this.ee,zt.CSS.MD);Zh(this.a(),this.ee);F(this.ee,"input",this.ZJ.bind(this));At(this)}w(zt,Gq);v("xiv.ui.ctrl.TwoThumbSliderController",zt);zt.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";zt.CSS_SUFFIX={na:"slider",yi:"slider-thumb",EE:"slider-thumb-extent",FE:"slider-thumb-value",Gp:"slider-thumb-hover",zi:"slider-track",Jx:"slider-track-hover",Ws:"value-input",MD:"extent-input"};
f=zt.prototype;f.Zt=function(){this.L=new lq;this.L.v();var a=this.L.a();a.setAttribute("id","ThresholdSlider_"+B());N(a,zt.CSS.na);var b=O("div",{id:"ThwoThumbSlider_track_"+B(),"class":zt.CSS.zi});a.appendChild(b);this.wj(this.L);N(this.L.qa,zt.CSS.yi);N(this.L.qa,zt.CSS.FE);tk(this.L.qa,zt.CSS.Gp);N(this.L.Ac,zt.CSS.yi);N(this.L.Ac,zt.CSS.EE);tk(this.L.Ac,zt.CSS.Gp);F(this.L,"change",this.mc.bind(this))};
f.update=function(){var a=this.ge();if(a.min!=this.L.ma()||a.max!=this.L.aa())this.L.Oc(a.min),this.L.bc(a.max),hq(this.L,a.max-a.min),this.L.F(a.min),this.L.qg(1);var b=T(this.L.qa).width,a=this.L.aa()-this.L.ma(),c=T(this.L.a()).width-b,b=c*((this.L.w()-this.L.ma())/a),a=c*(this.L.mf()/a);this.L.qa.style.left=b.toString()+"px";this.L.Ac.style.left=a.toString()+"px";Bt(this);At(this)};function Bt(a){a.ia.step=1;a.ia.min=a.L.ma();a.ia.max=a.L.aa();a.ia.value=a.L.w()}
function At(a){a.ee.step=1;a.ee.min=a.L.ma();a.ee.max=a.L.aa();a.ee.value=a.L.mf()+a.L.w()}f.$t=function(){this.ia=O("input");this.ia.type="number";N(this.ia,zt.CSS.Ws);Zh(this.a(),this.ia);F(this.ia,"input",this.Wv.bind(this));Bt(this)};f.Wv=function(){this.L.F(parseInt(this.ia.value))};f.ZJ=function(){this.L.xj(parseInt(this.ee.value)-this.L.w())};f.mc=function(){var a=this.L.w(),b=this.L.mf()+a;this.ia.value=a;this.ee.value=b;this.dispatchEvent({type:"p",lower:a,upper:b})};
f.f=function(){zt.d.f.call(this);null!=this.L&&(I(this.L),null==this.L.La&&(this.L.La=new Up),this.L.g(),delete this.L);null!=this.ia&&(I(this.ia),R(this.ia),delete this.ia);null!=this.ee&&(I(this.ee),R(this.ee),delete this.ee)};v("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",zt.ID_PREFIX);v("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",zt.CSS_SUFFIX);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",zt.prototype.update);
v("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",zt.prototype.mc);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",zt.prototype.f);function Ct(){Gq.call(this);this.yg=[]}w(Ct,Gq);v("xiv.ui.ctrl.MasterController3D",Ct);Ct.ID_PREFIX="xiv.ui.ctrl.MasterController3D";Ct.CSS_SUFFIX={};Ct.prototype.add=function(a){this.yg.push(a);this.Ky(a,yt);1==this.yg.length&&Zh(document.body,this.a())};Ct.prototype.f=function(){Ct.d.f.call(this);Jb(this.yg);delete this.yg};v("xiv.ui.ctrl.MasterController3D.ID_PREFIX",Ct.ID_PREFIX);v("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",Ct.CSS_SUFFIX);
v("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{CO:"Visible",uN:"Opacity"});v("xiv.ui.ctrl.MasterController3D.prototype.add",Ct.prototype.add);v("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",Ct.prototype.f);function Dt(){Ct.call(this)}w(Dt,Ct);v("xiv.ui.ctrl.VolumeController3D",Dt);Dt.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";Dt.CSS_SUFFIX={};f=Dt.prototype;f.Ny=function(a){var b=this.Gd(Os,"Volume Rendering",function(b){a.volumeRendering=b.checked});Kq(a,b);this.yf.push(b);b.D.pe(!1)};f.CK=function(a){null!=this.np&&(this.np.ge().lowerThreshold=parseFloat(a.lower),this.np.ge().upperThreshold=parseFloat(a.upper))};f.np=null;
f.Ly=function(a){var b=this.Gd(zt,"Threshold",this.CK.bind(this));b.jh(a);Kq(a,b);this.yf.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1E4,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=1E4,a.upperThreshold=d);var e=b.D;e.Oc(c);e.bc(d);hq(e,d-c);e.F(c);e.qg(1);e.xj(d-c);a.upperThreshold=d;a.lowerThreshold=c;this.np=b};f.add=function(a){Dt.d.add.call(this,a);this.Ny(a);this.Ly(a)};f.k=function(){Dt.d.k.call(this)};f.f=function(){Dt.d.f.call(this);this.np.g()};
v("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",Dt.ID_PREFIX);v("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",1E4);v("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",Dt.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",Dt.prototype.Ny);v("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",Dt.prototype.Ly);v("xiv.ui.ctrl.VolumeController3D.prototype.add",Dt.prototype.add);v("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",Dt.prototype.k);
v("xiv.ui.ctrl.VolumeController3D.prototype.disposeInternal",Dt.prototype.f);function Et(){Gq.call(this);this.yg=[]}w(Et,Gq);v("xiv.ui.ctrl.MasterController",Et);Et.ID_PREFIX="xiv.ui.ctrl.MasterController";Et.CSS_SUFFIX={};Et.prototype.add=function(a){this.yg.push(a)};Et.prototype.f=function(){Et.d.f.call(this);Jb(this.yg);delete this.yg};v("xiv.ui.ctrl.MasterController.ID_PREFIX",Et.ID_PREFIX);v("xiv.ui.ctrl.MasterController.CSS_SUFFIX",Et.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController.CONTROLLERS",{});v("xiv.ui.ctrl.MasterController.prototype.add",Et.prototype.add);
v("xiv.ui.ctrl.MasterController.prototype.disposeInternal",Et.prototype.f);function Ft(){Gq.call(this);this.Lg=new $o("Reset to Defaults");this.wj(this.Lg);this.Lg.a().style.fontFamily='Helvetica,"Helvetica neue", Arial, sans-serif';this.Lg.a().style.fontSize="10px";this.Lg.a().style.width="100%";F(this.Lg.a(),"click",this.mc.bind(this))}w(Ft,Gq);v("xiv.ui.ctrl.ButtonController",Ft);Ft.ID_PREFIX="xiv.ui.ctrl.ButtonController";Ft.CSS_SUFFIX={};Ft.prototype.mc=function(){this.dispatchEvent({type:"p",checked:this.Lg.$h()})};
Ft.prototype.f=function(){Ft.d.f.call(this);I(this.Lg);I(this.Lg.a());this.Lg.g();delete this.Lg};v("xiv.ui.ctrl.ButtonController.ID_PREFIX",Ft.ID_PREFIX);v("xiv.ui.ctrl.ButtonController.CSS_SUFFIX",Ft.CSS_SUFFIX);v("xiv.ui.ctrl.ButtonController.prototype.dispatchComponentEvent",Ft.prototype.mc);v("xiv.ui.ctrl.ButtonController.prototype.disposeInternal",Ft.prototype.f);function Gt(){Et.call(this)}w(Gt,Et);v("xiv.ui.ctrl.LevelsController",Gt);Gt.ID_PREFIX="xiv.ui.ctrl.LevelsController";Gt.CSS_SUFFIX={};f=Gt.prototype;f.bb=null;f.Nc=null;f.Jh=null;f.Mh=null;f.Yh=null;f.kw=null;f.um=null;f.Ga=null;function Ht(a,b,c,d,e,h,k){this.min=a;this.max=b;this.OF=c;this.VF=d;this.SA=e;this.as=h;this.reset=k;this.VL=[this.min,this.max,this.OF,this.VF]}f.Wz=function(){return new Ht(this.bb,this.Nc,this.Jh,this.Mh,this.Yh,this.um,this.kw)};
f.add=function(a){Gt.d.add.call(this,a);this.Ga=a;It(this);this.bb=this.Gd(yt,"Window Min.",this.hK.bind(this));this.bb.jh(this.Ga);Kq(this.Ga,this.bb);this.sf.push(this.bb);a=this.bb.D;a.bc(1E3);a.Oc(0);a.F(0);a.qg(1);this.bb.cp(0);this.bb.vm(this.Ga.min);this.bb.update();a=this.Gd(yt,"Window Max.",this.fK.bind(this));a.jh(this.Ga);Kq(this.Ga,a);this.sf.push(a);var b=a.D;b.bc(1E3);b.Oc(0);b.F(1E3);b.qg(1);a.cp(0);a.vm(this.Ga.max);a.update();this.Nc=a;a=this.Gd(yt,"Brightness",this.QJ.bind(this));
a.jh(this.Ga);Kq(this.Ga,a);this.sf.push(a);b=a.D;b.bc(100);b.Oc(0);b.F(0);b.qg(1);a.cp(0);a.update();this.Jh=a;a=this.Gd(yt,"Contrast",this.UJ.bind(this));a.jh(this.Ga);b=a.D;Kq(this.Ga,a);this.sf.push(a);b.bc(100);b.Oc(0);b.F(0);b.qg(1);a.cp(0);a.update();this.Mh=a;Jt(this);a=this.Gd(Ft,null,this.yK.bind(this));Kq(this.Ga,a);this.sf.push(a);a.jh(this.Ga);this.kw=a};
function Jt(a){var b=a.Gd(Os,"Scale Histogram",function(a){this.Yh.bs(a.checked);Kt(this)}.bind(a));Kq(a.Ga,b);a.Yh.bs(!0);b.D.pe(!0);a.sf.push(b);a.um=b}f.yK=function(){D([this.bb,this.Nc],function(a){a.ia.value=a.defaultValue;a.D.F(a.defaultValue);a.update()});this.um.D.pe(this.um.defaultValue);this.Yh.bs(this.um.defaultValue);this.Yh.update()};function It(a){var b=a.Gd(Mq,null,function(){}.bind(a));b.jh(a.Ga);Kq(a.Ga,b);a.sf.push(b);b.update();a.Yh=b}
function Lt(a){var b=a.Nc.D,c=a.bb.D;b.w();var d=c.w();b.bc(a.Ga.max);b.Oc(a.Ga.min);b.F(d);c.bc(a.Ga.max);c.Oc(a.Ga.min);c.F(d);a.Nc.update();a.bb.update();a.Yh.update()}f.hK=function(){if(null!=this.Nc&&null!=this.bb){var a=this.bb.D;a.ma()!=this.Ga.min&&Lt(this);this.Ga.windowLow=a.w();this.Km(this.bb)}};f.fK=function(){if(null!=this.Nc&&null!=this.bb){var a=this.Nc.D;a.aa()!=this.Ga.max&&Infinity!=this.Ga.max&&Lt(this);this.Ga.windowHigh=a.w();this.Km(this.Nc)}};
f.Km=function(a){switch(a){case this.bb:case this.Nc:var b=this.bb.D,c=this.Nc.D;a==this.Nc&&c.w()<=b.w()?b.F(c.w()-1):a==this.bb&&b.w()>=c.w()&&c.F(b.w()+1);a=this.Jh.D;a.ri(!0);b=this.bb.Wg();b=Math.round((1-(b.fg+(b.Me-b.fg)/2-b.min)/(b.max-b.min))*a.aa());a.F(b);this.Jh.ia.value=b;a.ri(!1);a=this.Mh.D;a.ri(!0);var b=this.bb.Wg(),c=a.aa()/2,d=(b.max-b.min)/(b.Me-b.fg)*c;d>c&&(d=a.aa()-(b.Me-b.fg)/(b.max-b.min)*c);b=Math.round(d);a.F(b);this.Mh.ia.value=b;a.ri(!1);case this.Jh:case this.Mh:a=this.bb.D,
b=this.Nc.D,c=this.bb.Wg(),a.ri(!0),b.ri(!0),a.F(c.fg),b.F(c.Me),this.bb.ia.value=a.w(),this.Nc.ia.value=b.w(),b.ri(!1),a.ri(!1)}Kt(this)};f.QJ=function(){if(null!=this.Jh){var a=this.bb.Wg(),b=this.Jh.D,b=a.min+(a.max-a.min)*((b.aa()-b.w())/b.aa()),c=a.Me-a.fg,a=Math.round(b-c/2),b=Math.round(b+c/2);Mt(this,a,b);this.Km(this.Jh)}};
f.UJ=function(){if(null!=this.Mh){var a=this.bb.Wg(),b=this.Mh.D,c,d=a.fg+(a.Me-a.fg)/2,a=a.max-a.min;c=b.aa()/2;c=b.w()<=c?b.w()/c:c/(b.aa()-b.w());0<c&&(b=Math.round(d-.5*a/c),d=Math.round(d+.5*a/c),Mt(this,b,d));this.Km(this.Mh)}};function Mt(a,b,c){b==c&&(b=c-1);a.Ga.windowLow=b;a.Ga.windowHigh=c}function Kt(a){if(1E3<a.yg[0].max&&a.Nc.D.aa()!=a.yg[0].max){var b=a.yg[0].max;a.Nc.D.bc(b);a.Nc.D.F(b);a.bb.D.bc(b)}a.Yh.update()}
f.f=function(){delete this.bb;delete this.Nc;delete this.kw;delete this.Jh;delete this.Mh;delete this.Yh;delete this.um;delete this.Ga;Gt.d.f.call(this)};v("xiv.ui.ctrl.LevelsController.ControllerSet",Ht);v("xiv.ui.ctrl.LevelsController.ID_PREFIX",Gt.ID_PREFIX);v("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",Gt.CSS_SUFFIX);v("xiv.ui.ctrl.LevelsController.prototype.add",Gt.prototype.add);v("xiv.ui.ctrl.LevelsController.prototype.getControllerSet",Gt.prototype.Wz);
v("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",Gt.prototype.f);function Nt(a){$c.call(this);this.pa=null;this.o=a;a=E||ic&&!pc("531")&&"TEXTAREA"==a.tagName;this.yc=new ej(this);this.yc.A(this.o,a?["keydown","paste","cut","drop","input"]:"input",this)}w(Nt,$c);
Nt.prototype.handleEvent=function(a){if("input"==a.type)E&&pc(10)&&0==a.keyCode&&0==a.charCode||(Ot(this),gc&&this.o!=Kh(this.o).activeElement||this.dispatchEvent(Pt(a)));else if("keydown"!=a.type||il(a)){var b="keydown"==a.type?this.o.value:null;E&&229==a.keyCode&&(b=null);var c=Pt(a);Ot(this);this.pa=Yf(function(){this.pa=null;this.o.value!=b&&this.dispatchEvent(c)},0,this)}};function Ot(a){null!=a.pa&&(ba.clearTimeout(a.pa),a.pa=null)}function Pt(a){a=new Hc(a.Lc);a.type="input";return a}
Nt.prototype.f=function(){Nt.d.f.call(this);this.yc.g();Ot(this);delete this.o};function Qt(a,b,c){ij.call(this,a);Rt(this,b||"#f00");this.className=c||"goog-hsv-palette";this.ga=ti(this.N())}w(Qt,ij);f=Qt.prototype;f.ks=function(a){a!=this.Ll&&(Rt(this,a),St(this),this.dispatchEvent("action"))};function Rt(a,b){var c=Kj(b).lj,d=Qj(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.cd=[e,l,d];a.cd[0]/=360;a.Ll=c}
function Tt(a,b,c,d){if(null!=b||null!=c||null!=d)a.cd[0]=null!=b?b:a.cd[0],a.cd[1]=null!=c?c:a.cd[1],a.cd[2]=null!=d?d:a.cd[2],b=[360*a.cd[0],a.cd[1],a.cd[2]],b=Sj(b[0],b[1],b[2]),a.Ll=b,St(a),a.dispatchEvent("action")}f.He=function(){return!1};
f.v=function(){var a=this.N(),b=E&&!pc("7")?" "+(this.className+"-noalpha"):"",c=a.v("DIV",this.className+"-hs-backdrop");this.im=a.v("DIV",this.className+"-hs-handle");this.nj=a.v("DIV",this.className+"-hs-image",this.im);this.cl=a.v("DIV",this.className+"-v-image");this.zp=a.v("DIV",this.className+"-v-handle");this.ws=a.v("DIV",this.className+"-swatch");this.Ck=a.v("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.v("label",null,this.Ck);this.o=a.v("DIV",this.className+b,
c,this.nj,this.cl,this.zp,this.ws,d)};f.fb=function(){Qt.d.fb.call(this);St(this);var a=this.gb();a.A(this.a(),"mousedown",this.Yg);this.io||(this.io=new Nt(this.Ck));a.A(this.io,"input",this.zI)};f.f=function(){Qt.d.f.call(this);delete this.nj;delete this.im;delete this.cl;delete this.zp;delete this.ws;delete this.Ck;this.io&&(this.io.g(),delete this.io);Vc(this.sv);Vc(this.tv)};
function St(a){if(a.ha){var b=a.cd[1],c=a.cd[2],d=a.nj.offsetWidth*a.cd[0];a.Oe()&&(d=a.nj.offsetWidth-d);var e=Math.ceil(a.im.offsetWidth/2),d=d-e,b=a.nj.offsetHeight*(1-b),b=b-Math.ceil(a.im.offsetHeight/2),e=a.im,h=a.Oe();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.cl.offsetTop-Math.floor(a.zp.offsetHeight/2)+(255-c)/255*a.cl.offsetHeight;a.zp.style.top=b+"px";Ui(a.nj,c/255);xi(a.cl,"background-color",Sj(360*a.cd[0],a.cd[1],
255));xi(a.ws,"background-color",a.Ll);xi(a.ws,"color",127.5<a.cd[2]?"#000":"#fff");var k;try{k=Kj(a.Ck.value).lj}catch(l){}a.Ll!=k&&(a.Ck.value=a.Ll)}}f.Yg=function(a){if(a.target==this.cl||a.target==this.zp){var b=Ti(this.cl);this.IA(b,a);this.sv=F(this.ga,"mousemove",ta(this.IA,this,b));this.tv=F(this.ga,"mouseup",this.ag,!1,this)}else if(a.target==this.nj||a.target==this.im)b=Ti(this.nj),this.HA(b,a),this.sv=F(this.ga,"mousemove",ta(this.HA,this,b)),this.tv=F(this.ga,"mouseup",this.ag,!1,this)};
f.IA=function(a,b){b.preventDefault();var c=wi(this.N()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);Tt(this,null,null,c)};f.HA=function(a,b){b.preventDefault();var c=wi(this.N()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;Tt(this,d,c,null)};f.ag=function(){Vc(this.sv);Vc(this.tv)};
f.zI=function(){/^#?[0-9a-f]{6}$/i.test(this.Ck.value)&&this.ks(this.Ck.value)};function Ut(){Gq.call(this);this.pg("Color");this.Ui=new Qt;this.Ui.n();F(this.Ui,"action",this.mc.bind(this));N(this.Ui.a(),this.constructor.CSS.FD);this.Cn=O("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":Ut.CSS.GD});Zh(this.Cn,this.Ui.a());O("div",{id:this.constructor.ID_PREFIX+"_ColorPalette_"+B(),"class":Ut.CSS.OM});this.a().appendChild(this.Cn);this.wj(this.Cn)}w(Ut,Gq);v("xiv.ui.ctrl.ColorPaletteController",Ut);Ut.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";
Ut.CSS_SUFFIX={GM:"colorsquare",GD:"colorpaletteholder",FD:"colorpalette",Fj:"closebutton"};Ut.prototype.update=function(){var a=Math.floor(255*this[Hq].color[0]),b=Math.floor(255*this[Hq].color[1]),c=Math.floor(255*this[Hq].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.Ui.ks(Oj([a,b,c]))};Ut.prototype.mc=function(a){this.dispatchEvent({type:"p",color:Qj(a.target.Ll).map(function(a){return a/255})})};
Ut.prototype.f=function(){Ut.d.f.call(this);I(this.Ui);this.Ui.g();delete this.Ui;R(this.Cn);delete this.Cn};v("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",Ut.ID_PREFIX);v("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",Ut.CSS_SUFFIX);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ctrl.ColorPaletteController.prototype.update",Ut.prototype.update);
v("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",Ut.prototype.mc);v("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",Ut.prototype.f);function Vt(){Ct.call(this)}w(Vt,Ct);v("xiv.ui.ctrl.MeshController3D",Vt);Vt.ID_PREFIX="xiv.ui.ctrl.MeshController3D";Vt.CSS_SUFFIX={};Vt.prototype.add=function(a){Vt.d.add.call(this,a);this.Ct(a,Os);this.Bt(a,Ut)};v("xiv.ui.ctrl.MeshController3D.ID_PREFIX",Vt.ID_PREFIX);v("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",Vt.CSS_SUFFIX);v("xiv.ui.ctrl.MeshController3D.prototype.add",Vt.prototype.add);v("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",Vt.prototype.f);function Wt(){Ct.call(this)}w(Wt,Ct);v("xiv.ui.ctrl.AnnotationsController3D",Wt);Wt.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";Wt.CSS_SUFFIX={};Wt.prototype.add=function(a){Wt.d.add.call(this,a);this.Ct(a,Os);this.Bt(a,Ut)};v("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",Wt.ID_PREFIX);v("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",Wt.CSS_SUFFIX);v("xiv.ui.ctrl.AnnotationsController3D.prototype.add",Wt.prototype.add);function Xt(){Et.call(this)}w(Xt,Et);v("xiv.ui.ctrl.VolumeController",Xt);Xt.ID_PREFIX="xiv.ui.ctrl.VolumeController";Xt.CSS_SUFFIX={};Xt.prototype.add=function(a){Xt.d.add.call(this,a);this.My(a);this.Jy(a)};Xt.prototype.My=function(a){var b=this.Gd(wt,"Visible",function(){});Kq(a,b);this.yf.push(b);b.jh(a);b.D.checked=a[Lr]||!1};Xt.prototype.Jy=function(a){var b=this.Gd(Os,"Show Label Map",function(b){a.uP.visible=b.checked});Kq(a,b);this.yf.push(b);b.jh(a);b.D.pe(!1)};Xt.prototype.f=function(){Xt.d.f.call(this)};
v("xiv.ui.ctrl.VolumeController.ID_PREFIX",Xt.ID_PREFIX);v("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",Xt.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController.prototype.add",Xt.prototype.add);v("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",Xt.prototype.My);v("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",Xt.prototype.Jy);v("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",Xt.prototype.f);function Yt(){V.call(this);C(Zt(),function(a,b){this[b]=null})}w(Yt,V);v("xiv.ui.ctrl.XtkControllerTree",Yt);function $t(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.ctrl.XtkControllerTree.ControlSet",$t);Yt.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";Yt.CSS_SUFFIX={};function Zt(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=Yt.prototype;f.Dx=function(){};f.wD=function(){return this.Vg([this.vi])};f.Dx=function(){return this.Vg([this.uh])};f.YE=function(){return this.Vg([this.Oj])};
f.fH=function(){};f.Vg=function(a){var b=[];D(g(a)?a:[a],function(a){null!=a&&(b=Mb(b,a.Qz()))});return b};f.pH=function(){return this.uh};f.xp=function(){var a=this.Vg([this.uh,this.Pj,this.Oj,this.Ij,this.vi,this.Ls]);D(a,function(a){a.update()}.bind(this))};
f.Wt=function(a,b){a instanceof J?(null==this.Pj&&(this.uh=new Gt,this.Pj=new Xt,this.Oj=new Dt),this.uh.add(a,b),this.Pj.add(a,b),this.Oj.add(a,b)):a instanceof Fq?(null==this.Ij&&(this.Ij=new Vt),this.Ij.add(a,b)):a instanceof Qp&&(null==this.vi&&(this.vi=new Wt),this.vi.add(a));this.volumes=new $t(null,this.Vg([this.Oj]),this.Vg([this.Pj]));this.annotations=new $t(null,this.Vg([this.vi]));this.meshes=new $t(null,this.Vg([this.Ij]));this.levels=new $t(null,null,this.Vg([this.uh]))};
f.f=function(){Yt.d.f.call(this);null!=this.uh&&(this.uh.g(),delete this.uh);null!=this.Pj&&(this.Pj.g(),delete this.Pj);null!=this.Qx&&(this.Qx.g(),delete this.Qx);null!=this.Oj&&(this.Oj.g(),delete this.Oj);null!=this.Ij&&(this.Ij.g(),delete this.Ij);null!=this.vi&&(this.vi.g(),delete this.vi);null!=this.Ls&&(this.Ls.g(),delete this.Ls)};v("xiv.ui.ctrl.XtkControllerTree.ControlSet",$t);v("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",Yt.ID_PREFIX);v("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",Yt.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",Zt);v("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",Yt.prototype.Dx);v("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",Yt.prototype.wD);v("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",Yt.prototype.YE);v("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",Yt.prototype.fH);v("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",Yt.prototype.Vg);v("xiv.ui.ctrl.XtkControllerTree.prototype.getLevelsController",Yt.prototype.pH);
v("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",Yt.prototype.xp);v("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",Yt.prototype.Wt);v("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",Yt.prototype.f);function au(){$c.call(this);this.bf=null;this.kc={volumes:[],meshes:[],fibers:[],spheres:[]};this.xi=new vt("X");this.Lj=new vt("Y");this.Mj=new vt("Z");this.ec=new ut;this.uc={};this.uc[this.xi.Eb()]=this.xi;this.uc[this.Lj.Eb()]=this.Lj;this.uc[this.Mj.Eb()]=this.Mj;this.uc[this.ec.Eb()]=this.ec;this.bh=null;this.qs(this.ec);bu(this)}w(au,Kr);v("xiv.vis.XtkEngine",au);au.ID_PREFIX="xiv.vis.XtkEngine";au.SLICE_TO_RAS_KEY="sliceToRAS"+B();au.HAS_LABEL_MAP_KEY="hasLabelMap";f=au.prototype;f.Xr=!1;
f.wu=function(){return this.kc.volumes};f.vu=function(){return this.kc.meshes};f.uu=function(){return this.kc.spheres};function cu(a,b){null!=b.Sd.un&&D(b.Sd.un,function(a){this.kc.spheres.push(du(a))}.bind(a))}f.zC=function(a,b){switch(a.toLowerCase()){case "x":this.xi.sc(b);break;case "y":this.Lj.sc(b);break;case "z":this.Mj.sc(b);break;case "v":this.ec.sc(b)}};f.qs=function(a){this.bh=a;this.bh.ra();this.pL=F(this.bh,"s",this.Qv.bind(this))};f.KH=function(){return this.bh};f.Tv=function(a){this.dispatchEvent(a)};
function bu(a){C(a.uc,function(a){F(a,"D",this.Tv.bind(this));F(a,"F",function(){}.bind(this))}.bind(a))}f.xp=function(){this.bf.xp()};f.NG=function(){return this.bf};
function eu(a,b){null!=a.bf&&(a.bf.g(),a.bf=null);a.bf=new Yt;null!=(b.Sd&&null!=b.Sd.un)&&(cu(a,b),D(a.kc.spheres,function(a){this.bf.Wt(a)}.bind(a)));var c;D(b.yd,function(a){c=a.Zf();if(null!=c&&(currXObj=fu(c,a.Sh),renderProps=a.Sd,currXObj))if(this.bf.Wt(currXObj,renderProps),currXObj instanceof J){"scans"==b.Sf.toLowerCase()&&(window.console.log("Turning off reslicing for scan"),currXObj.reslicing=!1);a=currXObj;var e=renderProps;null!=e||(e={origin:[0,0,0],Bs:1E4,tr:-1E4,hr:!0,hx:!1});a.origin=
e.origin;a.upperThreshold=e.Bs;a.lowerThreshold=e.tr;a.volumeRendering=e.hx;a[Lr]=e.hr;a[au.SLICE_TO_RAS_KEY]=e.Dw;null!=e.dB?(a.labelmap.file=e.dB,a.labelmap.colortable.file=e.hJ,a[au.HAS_LABEL_MAP_KEY]=!0):a[au.HAS_LABEL_MAP_KEY]=!1;this.kc.volumes.push(currXObj)}else currXObj instanceof Fq?(a=currXObj,e=renderProps,a.color=e.color||[.5,.5,.5],a.opacity=e.opacity||1,this.kc.meshes.push(currXObj)):currXObj instanceof mq&&(au.RP(currXObj,renderProps),this.kc.fibers.push(currXObj))}.bind(a))}
f.$B=function(){this.qs(this.ec);this.ec.ra();C(this.kc,function(a,b){"volumes"!==b&&D(a,function(a){this.ec.add(a)}.bind(this))}.bind(this));Tc(this.ec.Qa(),"t",function(){this.Lr();this.xi.n()}.bind(this));this.ec.n()};f.ZB=function(a){var b=null!=a?a:this.Zl();C(this.uc,function(a,d){"v"!=d.toLowerCase()&&(a.ra(),a.add(b),a.n())})};function gu(a){var b=a.Zl();C(a.kc.volumes,function(a){a!==b&&(a.visible=!1)})}
f.aC=function(){var a=this.Zl(),b=[],c=[],d=["x","y","z","v"];C(this.kc,function(a,d){currArr="volumes"==d?c:b;D(a,function(a){currArr.push(a)})}.bind(this));D(b,function(a){this.ec.add(a)}.bind(this));D(c,function(b){b!==a&&(b.visible=!0,this.ec.add(b))}.bind(this));this.bh.Qa().onShowtime=function(){Lb(d,this.bh.Eb().toLowerCase());hu(this,a)}.bind(this);this.bh.add(a);this.bh.n()};
f.n=function(a){this.Xr=!1;eu(this,a);var b=a.Sd;null!=b?(null!=b.backgroundColor&&this.ec.gs(a.Sd.backgroundColor),null!=b.kq&&this.ec.hs(a.Sd.kq)):(this.ec.gs(),this.ec.hs());if(0<this.kc.volumes.length){a=this.uc;b="";for(b in a)if(a[b].isEnabled()){this.qs(a[b]);break}this.aC()}else this.ec.isEnabled()&&this.$B()};function hu(a,b){var c=lb(a.uc)-1;C(a.uc,function(a){a!=this.bh&&a.isEnabled()&&(a.add(b),Tc(a.Qa(),"t",function(){c--;0==c&&this.Lr()}.bind(this)),a.n())}.bind(a))}
f.Zl=function(){if(0!=this.kc.volumes.length){for(var a=0,b=this.kc.volumes.length;a<b;a++){var c=this.kc.volumes[a];if(c[Lr])return c}this.kc.volumes[0][Lr]=!0;return this.kc.volumes[0]}};f.k=function(){C(this.uc,function(a){a.k()}.bind(this))};f.Qv=function(a){this.Xr||this.dispatchEvent({type:"s",value:a.value})};f.Lr=function(a){gu(this);Vc(this.pL);this.Xr=!0;this.dispatchEvent({type:"t",value:null!=a?a.value:1})};f.EH=function(){return this.xi};f.FH=function(){return this.Lj};f.GH=function(){return this.Mj};
f.DH=function(){return this.ec};f.Mq=function(a){return this.uc[a]};f.HH=function(){return this.uc};var iu=["nrrd","nii","nii.gz","mgh","mgz"],ju=["dicom","dcm","ima"],ku=["hdr","img"],lu=["nii","nii.gz"],mu=["jpeg","jpg","gif","png","img"],nu="stl vtk obj fsm inflated smoothwm pial orig".split(" "),ou=["trk"];function pu(a){var b=void 0;qu(a)?b=new Fq:ru(a)||su(a)||tu(a)?b=new J:uu(a)&&(b=new mq);return b}
function du(a){var b=new Qp;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function ru(a){return-1<iu.indexOf(a)?!0:!1}function tu(a){return-1<mu.indexOf(a)?!0:!1}function su(a){return-1<ju.indexOf(a)?!0:!1}function qu(a){return-1<nu.indexOf(a)?!0:!1}function uu(a){return-1<ou.indexOf(a)?!0:!1}
function fu(a,b){function c(a){var b=tj(a);a=sj(a);return b+"/"+a}var d=g(a)?uj(a[0]):uj(a),d=pu(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];D(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=ob(b),d.filedata=mb(b)):d.file=a;return d}
au.prototype.g=function(){au.d.g.call(this);null!=this.bf&&(this.bf.g(),delete this.bf);I(this.xi);I(this.Lj);I(this.Mj);I(this.ec);delete this.bh;sb(this.uc);delete this.uc;this.xi.g();delete this.xi;this.Lj.g();delete this.Lj;this.Mj.g();delete this.Mj;this.ec.g();delete this.ec;C(this.kc,function(a){C(a,function(a){I(a);sb(a)})});sb(this.kc);delete this.kc;delete this.Xr};v("xiv.vis.XtkEngine.EventType",{SN:"D",QN:"E",RN:"F",ERROR:"G",PO:"H",gN:"I",hN:"J"});v("xiv.vis.XtkEngine.ID_PREFIX",au.ID_PREFIX);
v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",au.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",au.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",ru);v("xiv.vis.XtkEngine.isImage",tu);v("xiv.vis.XtkEngine.isDicom",su);v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<ku.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<lu.indexOf(a)?!0:!1});
v("xiv.vis.XtkEngine.isMesh",qu);v("xiv.vis.XtkEngine.isFiber",uu);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",au.prototype.vu);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",au.prototype.uu);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",au.prototype.wu);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",au.prototype.zC);v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",au.prototype.qs);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",au.prototype.KH);
v("xiv.vis.XtkEngine.prototype.updateControllers",au.prototype.xp);v("xiv.vis.XtkEngine.prototype.getControllerTree",au.prototype.NG);v("xiv.vis.XtkEngine.prototype.render3dPlane",au.prototype.$B);v("xiv.vis.XtkEngine.prototype.render2D",au.prototype.ZB);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",au.prototype.aC);v("xiv.vis.XtkEngine.prototype.render",au.prototype.n);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",au.prototype.Zl);v("xiv.vis.XtkEngine.prototype.updateStyle",au.prototype.k);
v("xiv.vis.XtkEngine.prototype.getPlaneX",au.prototype.EH);v("xiv.vis.XtkEngine.prototype.getPlaneY",au.prototype.FH);v("xiv.vis.XtkEngine.prototype.getPlaneZ",au.prototype.GH);v("xiv.vis.XtkEngine.prototype.getPlaneV",au.prototype.DH);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",au.prototype.Mq);v("xiv.vis.XtkEngine.prototype.getPlanes",au.prototype.HH);v("xiv.vis.XtkEngine.prototype.dispose",au.prototype.g);function vu(a,b,c){$m.call(this);this.RC=!0===a;this.QC=!0===b;this.OC=!0===c}w(vu,$m);v("xiv.ui.HelpDialog",vu);vu.ID_PREFIX="xiv.ui.HelpDialog";vu.CSS={KD:"nrg-ui-helpdialog-dialog",hl:"nrg-ui-helpdialog-text",CE:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",Fj:"xiv-ui-helpdialog-closebutton"};vu.LAYOUT_IMAGE_ID=vu.ID_PREFIX+".LayoutImage";
vu.prototype.n=function(a){vu.d.n.call(this,a);N(this.a(),"xiv-ui-helpdialog");this.Rm=new Ss;N(this.Rm.a(),vu.CSS.CE);this.Rm.n(this.a());wu(this);this.Gy(vu.CSS.TITLE);this.ry(vu.CSS.Fj)};vu.prototype.tw=function(a){null!=document.getElementById(vu.LAYOUT_IMAGE_ID)&&(document.getElementById(vu.LAYOUT_IMAGE_ID).src=a)};
function wu(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts"," ","<img height=15 width=15 id="+vu.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.RC&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.QC&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.OC&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.qe("Help");D([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="black">';
D(a,function(a){c+="<tr>";D(a,function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}R(c);var n=O("div");n.innerHTML=c;this.Rm.ff(n,[d])}.bind(a))}
vu.prototype.f=function(){vu.d.f.call(this);delete this.RC;delete this.QC;delete this.OC;null!=this.Rm&&this.Rm.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",vu.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",vu.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",vu.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",vu.prototype.n);v("xiv.ui.HelpDialog.prototype.setLayoutButton",vu.prototype.tw);v("xiv.ui.HelpDialog.prototype.disposeInternal",vu.prototype.f);function xu(a,b,c){$o.call(this,a,b||ap.fe(),c);this.gd(16,!0)}w(xu,$o);On("goog-toggle-button",function(){return new xu(null)});function yu(a){V.call(this);this.K={};this.U=a}w(yu,V);v("xiv.ui.ViewBoxDialogs",yu);yu.ID_PREFIX="xiv.ui.ViewBoxDialogs";yu.CSS_SUFFIX={zg:"generic-toggle",RD:"infodialog",SD:"infodialog-text",mN:"modaldialog"};var zu="Info_"+B(),Au="Help_"+B(),Bu={YM:zu,UM:Au},Cu="ToggleClass_"+B();f=yu.prototype;f.RG=function(){return this.K};f.QG=function(a){return this.K[a]};
f.Fn=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.U.ik("LEFT",c,a,e,function(b){var c=this.K[a];b="true"==b.getAttribute("checked");c.ba(b);this.dispatchEvent({type:b?"K":"L",Bz:this.K[a],Cz:a});Du(this,c)}.bind(this),d);null!=this.K[a]&&this.K[a].g();c=new $m;this.K[a]=c;Km(c,null!=k?k:!1);Rm(c,null!=l?l:null);c.n(this.U.Cb);Jm(c,0);this.K[a].$d();c.qe(e);N(c.a(),b);F(c,"f",function(){this.U.rm(n)}.bind(this));F(c,Nm,function(){}.bind(this));this.K[a].ba(!0);this.K[a].$d();this.K[a].$d(!1);
!1===h&&Nn(this.U.Od[a])};f.XF=function(){this.Fn(Bu.lN,"xiv-ui-viewboxdialogs-meshes-dialog",yu.CSS.zg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.ZF=function(){this.Fn(Bu.EO,"xiv-ui-viewboxdialogs-volumes-dialog",yu.CSS.zg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.pz=function(){Eu(this);Fu(this)};
function Gu(a,b,c){var d=new $m;Rm(d,Um);d.n(null!=b?b:document.body);d.Wk(a);N(d.a(),"nrg-ui-dialogs-yesnomodal");Km(d,!0);var e=d.a(),h=d.Uh();Tc(d,Sm,function(a){var b=e.cloneNode(!0);b.style.opacity=1;b.style.display="inline";Zh(e.parentNode,b);var n=h.cloneNode(!0);n.style.opacity=.7;n.style.display="inline";Zh(e.parentNode,n);b.style.zIndex=2E9;n.style.zIndex=2E9;Ok([b,n],1,0,null,null,function(){R(b);delete b;R(n);delete n});"yes"===a.key.toLowerCase()&&null!=c&&c();d.ju=!0;d.Do()});d.ba(!0);
d.$d(!0);d.ju=!1;e.style.opacity=0;e.style.zIndex=2E9;h.style.opacity=0;h.style.zIndex=2E9;wk(e,150);xk(h,150,.7)}f.CA=function(){var a=[];C(this.K,function(b){b.sa()&&a.push(b.a())});return a};f.showModalDialog=function(a){if(null==this.K[a])throw Error("Invalid dialog key: ",a);this.K[a].ba(!0);this.K[a].$d()};
function Du(a,b){C(null!=b?[b]:a.K,function(a){if(null!=a&&!ja(a)){var b=a.$z(),e;if(null!=b){for(e in b)if(isNaN(b[e])&&!ja(b[e]))return;e=T(a.a());var h=Ei(a.a()),k=h.y+e.height,l=b.top+b.height,n=h.x,p=h.y;h.x+e.width>b.left+b.width&&(n=b.left+b.width-e.width);0>n&&(n=0);k>l&&(p=b.top+b.height-e.height);-15>p&&(p=-15);Ci(a.a(),n,p)}}})}f.update=function(){C(this.K,function(a){a.kD();Du(this,a)}.bind(this))};
f.rp=function(a,b){var c=!1===b?0:1;window.console.log(a,this.K[a]);null!=this.K[a].a()&&xk(this.K[a].a(),200,c)};f.Jq=function(){return this.K[Au]};
function Eu(a){null!=a.K[Au]&&a.K[Au].g();var b=new vu(0<a.U.Qa().wu().length,0<a.U.Qa().vu().length,0<a.U.Qa().uu().length);Km(b,!1);Rm(b,null);b.n(a.U.Cb);b.ba(!1);b.$d();var c=a.U.ik("LEFT",yu.CSS.zg,Au,"Help",function(a){a="true"==a.getAttribute("checked");b.ba(a);b.$d();this.dispatchEvent({type:a?"K":"L",Bz:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");F(b,"f",function(){this.U.rm(c)}.bind(a));a.U.rm(c);a.K[Au]=new vu}
function Fu(a){null!=a.K[zu]&&a.K[zu].g();currDialog=new $m;var b="";0<a.U.vb.length?C(a.U.vb[0].oe,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Pk(a.U.vb[0].li);Km(currDialog,!1);currDialog.bk(b);Rm(currDialog,null);currDialog.n(a.U.Cb);currDialog.ba(!0);currDialog.Br("left","top",0,-12);currDialog.qe("Info. Display");currDialog.uw("xiv-ui-viewboxdialogs-infodialog-hovered");N(currDialog.a(),yu.CSS.RD);N(currDialog.lh[0],yu.CSS.SD);var c=a.U.ik("LEFT",yu.CSS.zg,zu,"Info. Display",
function(a){a="true"==a.getAttribute("checked");currDialog.ba(a);currDialog.Br("left","top",0,-15);this.dispatchEvent({type:a?"K":"L",Bz:currDialog})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");F(currDialog,"f",function(){this.U.rm(c)}.bind(a));currDialog.mw();a.K[zu]=currDialog}f.f=function(){delete this.U;null!=this.K&&(C(this.K,function(a){I(a);a.f();a.g()}.bind(this)),sb(this.K))};v("xiv.ui.ViewBoxDialogs.EventType",{MM:"K",LM:"L"});
v("xiv.ui.ViewBoxDialogs.ID_PREFIX",yu.ID_PREFIX);v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",yu.CSS_SUFFIX);v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",Bu);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",Cu);v("xiv.ui.ViewBoxDialogs.createModalDialog",yu.eP);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",yu.prototype.RG);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",yu.prototype.QG);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",yu.prototype.Fn);
v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",yu.prototype.XF);v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",yu.prototype.ZF);v("xiv.ui.ViewBoxDialogs.prototype.createPostRenderDialogs",yu.prototype.pz);v("xiv.ui.ViewBoxDialogs.prototype.dispsePostRenderDialogs",yu.prototype.gP);v("xiv.ui.ViewBoxDialogs.prototype.setModalDialogOnYes",yu.prototype.QP);v("xiv.ui.ViewBoxDialogs.prototype.showModalDialog",yu.prototype.showModalDialog);
v("xiv.ui.ViewBoxDialogs.prototype.getVisibleDialogElements",yu.prototype.CA);v("xiv.ui.ViewBoxDialogs.prototype.update",yu.prototype.update);v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",yu.prototype.rp);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",yu.prototype.Jq);v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",yu.prototype.f);function W(a,b,c,d){$c.call(this);this.U=a;this.ka=b;this.Sa=c;this.K=d;this.sd={p:null,c:null};this.rq={x:null,y:null};this.ig={l:!1,m:!1,r:!1};this.Gk={up:{},dn:{},ot:{},ov:{}};F(this.K,"K",this.DB.bind(this));a=document.body;this.rb=new $n;this.rb.Gl(a);F(this.rb,"key",this.ii.bind(this));this.bl=!1;document.addEventListener("mousemove",this.Mw.bind(this),!1)}w(W,$c);v("xiv.ui.ViewBoxInteractorHandler",W);
var Hu="Crosshairs_"+B(),Iu="Settings_"+B(),Ju="TwoDPan_"+B(),Ku="TwoDZoom_"+B(),Lu={hd:Hu,PN:Iu,jO:Ju,kO:Ku};
W.CSS={zg:"xiv-ui-viewboxinteractorhandler-generic-toggle",rx:"xiv-ui-viewboxinteractorhandler-generic-dialog",sx:"xiv-ui-viewboxinteractorhandler-generic-zippytree",YD:"xiv-ui-viewboxinteractorhandler-levelsdialog",ZD:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered",$D:"xiv-ui-viewboxinteractorhandler-levels-slider",aE:"xiv-ui-viewboxinteractorhandler-levels-slidercontroller",Bx:"xiv-ui-viewboxinteractorhandler-levels-sliderlabel",XD:"xiv-ui-viewboxinteractorhandler-levels-checkboxholder",
WD:"xiv-ui-viewboxinteractorhandler-levels-checkboxcontroller"};W.CURSOR_CSS={$E:"xiv-ui-viewboxinteractorhandler-zoom-follower",tx:"xiv-ui-viewboxinteractorhandler-viewframe-grab",wx:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",ux:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",vx:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",Sx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",Tx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};
W.ORIENTATION_KEY="Orientation_"+B();f=W.prototype;f.rb=null;f.Lm=null;f.ab=null;f.kb=null;f.ix=!1;f.$v=!1;f.xc={};f.oz=function(){this.wz();Mu(this);Nu(this);this.sz();this.nz(!1);this.uz();this.vz();this.dv()};function Ou(a){var b=a.U.Cb;C(W.CURSOR_CSS,function(a){Ch(b,a)})}function Pu(a,b,c,d){b=b?N:Ch;b(a.U.Cb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.U.Cb,d)}
function Qu(a){Pu(a,!0,W.CURSOR_CSS.tx,W.CURSOR_CSS.wx);Pu(a,!1,W.CURSOR_CSS.ux,W.CURSOR_CSS.vx)}function Ru(a){Pu(a,!1,W.CURSOR_CSS.Tx);Pu(a,!0,W.CURSOR_CSS.Sx)}f.Mw=function(a){this.rq.x=a.clientX||a.pageX;this.rq.y=a.clientY||a.pageY};
f.qK=function(a){this.Ml=a.target;this.sd.p=this.sd.c;this.sd.c=[this.rq.x,this.rq.y];if(null!=this.sd.p){(new Ns(this.sd.c[0],this.sd.c[1])).add(new Ns(this.sd.p[0],this.sd.p[1]));a=this.sd.c[0]-this.sd.p[0];var b=this.sd.c[1]-this.sd.p[1];this.bl&&(this.Bf.style.visibility="hidden");this.ix?(this.bl&&this.bl&&(R(this.Bf),Zh(this.Ml.Vi,this.Bf),this.Bf.style.visibility="visible",this.Bf.style.left=this.sd.c[0]+20+"px",this.Bf.style.top=this.sd.c[1]+"px"),Ru(this),this.ig.l&&Su(this,a,b)):this.$v&&
(Qu(this),this.ig.l&&(Pu(this,!1,W.CURSOR_CSS.tx,W.CURSOR_CSS.wx),Pu(this,!0,W.CURSOR_CSS.ux,W.CURSOR_CSS.vx),this.Ml.ja.Qr([-1*a,-1*b]),this.Bm()))}};f.Kr=function(){Ou(this);this.Ml=null;this.bl&&(this.Bf.style.visibility="hidden")};f.Ov=function(a){0==a.button?this.ig.l=!0:1==a.button?this.fM.ig.m=!0:2==a.button&&(this.ig.r=!0)};f.Pv=function(a){0==a.button?this.ig.l=!1:1==a.button?this.fM.ig.m=!1:2==a.button&&(this.ig.r=!1)};
f.ii=function(a){window.console.log("On key:",a.keyCode,this.xc);if(this.U.gr())if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Tu(this,this.Ml,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.U.Hu(Ju);window.console.log("escape","pan",a,a.getAttribute("checked"));"true"==a.getAttribute("checked").toString()&&this.U.ad(Ju);"true"==this.U.Hu(Ku).getAttribute("checked").toString()&&this.U.ad(Ku);break;case 90:this.U.ad(Ku);break;case 72:case 80:this.U.ad(Ju);break;case 66:case 76:this.U.ad(this.xc.levels);
break;case 86:this.U.ad(this.xc.volumes);break;case 77:this.U.ad(this.xc.meshes);break;case 65:this.U.ad(this.xc.annotations);break;case 67:this.U.ad(Hu);break;case 83:this.U.ad(this.xc[Iu]);break;case 191:a.shiftKey&&this.U.ad(Au);break;case 73:this.U.ad(zu)}};function Su(a,b,c){Ou(a);var d=function(){Ru(this);this.Ml.Nm()}.bind(a),e=function(){Pu(this,!0,W.CURSOR_CSS.Tx);Pu(this,!1,W.CURSOR_CSS.Sx);this.Ml.Om()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Uu(a);a.Bm()}f.Gx=0;f.Hx=0;
f.ZC=function(a){this.Gx=a.clientX;this.Hx=a.clientY;window.console.log("store mouse coords",this.Gx,this.Hx)};f.dv=function(){Vu(this,function(a,b){this.Gk.ov[b]=F(a.Qa(),"mouseover",this.qK.bind(this));var c=a.Qa().vc;this.Gk.ot[b]=F(c,"mouseleave",this.Kr.bind(this));this.Gk.dn[b]=F(c,"mousedown",this.Ov.bind(this));this.Gk.up[b]=F(c,"mouseup",this.Pv.bind(this))}.bind(this))};function Tu(a,b,c){Vu(a,function(a,b,h){h.na.F(h.na.w()+c)}.bind(a),b.Eb())}
function Vu(a,b,c){if(null!=a.ka){var d=a.Sa.Bu(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.am())};if(r(c)){var h=a.ka.Mq(c);if(null==h)throw Error("Invalid plane: ",h);e(a.ka.Mq(c),c)}else C(a.ka.uc,function(a,b){e(a,b)}.bind(a))}}f.vz=function(){this.U.ik("LEFT",W.CSS.zg,Ku,"2D Zoom",function(a){Ou(this);if(this.ix=a="true"==a.getAttribute("checked").toString())this.U.ax(Ju),Ru(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.U.ad(Ku)};
f.uz=function(){this.U.ik("LEFT",W.CSS.zg,Ju,"2D Pan",function(a){Ou(this);if(this.$v=a="true"==a.getAttribute("checked").toString())Qu(this),this.U.ax(Ku)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.U.ad(Ju)};f.nz=function(a){this.U.ik("LEFT",W.CSS.zg,Hu,"Toggle Crosshairs",function(a){this.fD("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.U.ad(Hu)};
f.sz=function(){this.xc[Iu]=Iu+"_"+B();this.K.Fn(this.xc[Iu],W.CSS.rx,W.CSS.zg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.kb[Iu]=new Ss;this.kb[Iu].n();var a=this.kb[Iu].a();N(a,W.CSS.sx);this.K.K[this.xc[Iu]].a().appendChild(a);this.kb[Iu].Tl();a=new Os;a.n();a.pg("Enable 3D Rendering");a.D.pe(!0);this.kb[Iu].ff(a.a(),"3D Rendering");F(a,"p",function(a){this.ka.zC("V",a.checked)}.bind(this));return a};
f.Bm=function(){Vu(this,function(a,b,c,d){Wu(this,b,d)}.bind(this))};
function Xu(a){null!=a.ka&&(Vu(a,function(a,c,d,e){var h=d.na,k=d.Pd,l=d.Hf;d=d.hd;h[W.ORIENTATION_KEY]=c;k[W.ORIENTATION_KEY]=c;l[W.ORIENTATION_KEY]=c;d[W.ORIENTATION_KEY]=c;Yu(this);Zu(this);$u(h,e);Wu(this,h[W.ORIENTATION_KEY],e);av(this,h);null!=a.Qa()&&(F(a.Qa(),"H",function(){Uu(this)}.bind(this)),F(h,"v",function(a){$u(a.target,e);Wu(this,a.target[W.ORIENTATION_KEY],e);av(this,a.target)}.bind(this)),F(k,"input",function(a){bv(this,a.target,e);this.Bm()}.bind(this)),F(l,"input",function(){a.Qa().MC(l.w()/
100);this.Bm()}.bind(this)))}.bind(a)),a.ka.xp())}
f.Km=function(a){var b=a.split("_")[0];null!=this.kb[b]&&(this.kb[b].dd(),C(this.Lm[b],function(c){null!=c&&D(c,function(c){switch(b.toLowerCase()){case "levels":c instanceof Mq||null==c.D.k?c.update():c.D.k();break;case "volumes":var e=a.split("_")[0];c instanceof wt?(c.D.checked=c.ge()[Lr]||!1,null==this.Es&&(this.Es=[]),-1==this.Es.indexOf(c)&&this.Es.push(c)):"Show Label Map"==c.Jb.innerHTML&&(c.ge()[au.HAS_LABEL_MAP_KEY]?c.ge().labelmap.visible&&!c.D.$h()&&c.D.pe(!0):(R(c.a()),c.a().style.visibility=
"hidden",c.a().style.height="0px"),this.kb[e].dd());c.update();break;case "meshes":c instanceof yt&&c.k();break;case "annotations":c instanceof yt&&(window.console.log("ANNOT",c),c.k())}}.bind(this))}.bind(this)))};f.DB=function(a,b){null==a.Cz&&null==b||this.Km(null!=b?b:a.Cz)};f.Ty=function(){var a=this.ab.SA.kA(Mq.LEVEL_CUTOFF);this.ab.max.vm(a);this.ab.min.vm(0);this.ab.min.D.F(0);this.ab.max.D.F(a);this.ab.as.vm(!0);this.ab.SA.update()};
function $u(a,b){if(null!=b){var c=a[W.ORIENTATION_KEY],d="Y"==c||"Z"==c?a.aa()-a.w()-1:a.w()-1;"false"==b.reslicing.toString()&&("transverse"==b[J.ORIENTATION_KEY]&&"Z"==c?d+=2:"coronal"==b[J.ORIENTATION_KEY]&&"Y"==c?d+=2:"sagittal"==b[J.ORIENTATION_KEY]&&"X"==c&&(d+=1));b["index"+a[W.ORIENTATION_KEY]]=d}}function cv(a,b,c,d,e){var h=a.ka.Mq(b).Qa();a=a.Sa.Xz().Au(b);b=null;null!=a&&(b=a[gr]);null!=b&&("vertical"==c?b.KC(h.yA(d,e)):"horizontal"==c&&b.LC(h.fA(d,e)))}
function Wu(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;cv(a,"Y","vertical",b,!0);cv(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;cv(a,"X","vertical",b,!1);cv(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,cv(a,"X","horizontal",b,!1),cv(a,"Y","horizontal",b,!1)}}function av(a,b){Vu(a,function(a,b,e){a=e.Pd;e=e.na;a.bc(e.aa());a.Oc(1);a.F(e.w())}.bind(a),b[W.ORIENTATION_KEY])}
function Uu(a){Vu(a,function(a,c,d){d.Hf&&a.Qa()&&(a=a.Qa().EA(),d.Hf.w(),d.Hf.F(Math.round(100*a)))}.bind(a))}function bv(a,b,c){null!=c&&Vu(a,function(a,c,h){h.na.F(b.w())}.bind(a),b[W.ORIENTATION_KEY])}function Mu(a){Vu(a,function(a,c,d){null!=d.na&&d.na.F(d.na.aa()/2)}.bind(a))}
function Nu(a){Vu(a,function(a,c,d,e){if(null!=e[au.SLICE_TO_RAS_KEY]&&null!=d.na){slider=d.na;orientation=slider[W.ORIENTATION_KEY];a=e.bbox;e=e[au.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.vL[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.WF[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.KF[2]-a[4])/h);slider.F(Math.round(slider.aa()*h)+1)}}.bind(a))}
function Yu(a){var b,c;Vu(a,function(a,e,h,k){null!=h.na&&(c=h.na,b=c[W.ORIENTATION_KEY],null!=k&&(c.bc(a.Qa().pA()),c.Oc(1),null!=b&&c.F(k["index"+b]+1)))})}function Zu(a){var b;Vu(a,function(a,d,e,h){null!=e.na&&(b=e.na,playbutton=e.Kj,null!=h&&playbutton.FC(b))})}f.HB=function(){Vu(this,function(a,b,c,d){bv(this,c.Pd,d);Uu(this)}.bind(this));this.Bm()};
f.Uw=function(a){var b=!1===a?0:1;Vu(this,function(a,d,e){xk(e.na.a(),200,b);xk(e.Pd.a(),200,b);xk(e.hd.xg,200,b);xk(e.hd.bg,200,b);xk(e.Hf.a(),200,b)}.bind(this))};f.II=function(){this.Uw(!1);this.K.rp(zu,!1)};f.NL=function(){this.Uw(!0);this.K.rp(zu,!0)};f.update=function(){this.Sa.yp()};f.fD=function(a){var b=!0==a?"visible":"hidden";Vu(this,function(a,d,e){null!=e.hd&&(e.hd.xg.style.visibility=b,e.hd.bg.style.visibility=b)}.bind(this))};
f.jD=function(){null!=this.Sa&&null!=this.ka&&Vu(this,function(a,b,c,d){if(null!=c){var e=c.na;c=c.Pd;e[W.ORIENTATION_KEY]=b;c[W.ORIENTATION_KEY]=b;null!=a.Qa()&&(bv(this,c,d),e.k())}}.bind(this))};
f.bD=function(a){a.tC(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{wh:qs,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{wh:zs,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{wh:vs,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{wh:ps,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{wh:ss,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{wh:ws,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{wh:xs,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{wh:ns,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.yy(c,b.mb);this.Sa.vy(c,b.wh);"Four-Up"==c&&this.Sa.sC(c)}.bind(this));F(a,"item_selected",this.gK.bind(this))};f.gK=function(a){this.Sa.ni(a.title);null!=this.K&&null!=this.K.Jq()&&this.K.Jq().tw(a.target.oj.src)};function dv(a,b){F(a.kb[b].oa,"c",function(a){this.DB(a,this.xc[b])}.bind(a))}
function ev(a,b){F(b,"p",function(a){D(this.Es,function(b){var e=b.ge();b!==a.target?(b.D.checked=!1,e.visible=!1):(e.visible=!0,this.ka.ZB(e))}.bind(this))}.bind(a))}function fv(a,b){C(a.Lm[b],function(a,d){g(a)&&D(a,function(a){var c=a.Qn||[];"all"!==d&&0<c.length&&c.push(d);this.kb[b].ff(a.a(),c);a instanceof wt&&ev(this,a)}.bind(this))}.bind(a))}
function gv(a){a.kb=Zt();a.xc=vb(a.kb);C(a.kb,function(a,c){var d=!1;switch(c){case "volumes":0==this.ka.wu().length&&(d=!0);break;case "meshes":0==this.ka.vu().length&&(d=!0);break;case "annotations":0==this.ka.uu().length&&(d=!0)}d?tb(this.kb,c):(this.kb[c]=new Ss,this.kb[c].n(),this.xc[c]=c+"_"+B(),fv(this,c),dv(this,c))}.bind(a))}f.wz=function(){this.Lm=this.ka.bf;this.ab=this.Lm.uh.Wz();gv(this);hv(this);Xu(this)};
function hv(a){C(a.kb,function(a,c){var d=!1;C(this.Lm[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.K.Fn(this.xc[c],W.CSS.rx,W.CSS.zg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+cb(c)+".png",cb(c),!1,!1);var e=this.kb[c].a();N(e,W.CSS.sx);this.K.K[this.xc[c]].a().appendChild(e);1<this.kb[c].oa.Iu().length?this.kb[c].Bn():(this.kb[c].Tl(),this.kb[c].dd());"levels"==c&&iv(this)}}.bind(a))}
function iv(a){var b=a.K.K[a.xc.levels];N(b.a(),W.CSS.YD);b.uw(W.CSS.ZD);a.U.ad(a.xc.levels);D(a.ab.VL,function(a){N(a.Jb,W.CSS.Bx);N(a.a(),W.CSS.aE);N(a.D.a(),W.CSS.$D);a.D.k()}.bind(a));N(a.ab.as.a(),W.CSS.WD);N(a.ab.as.Jb,W.CSS.Bx);N(a.ab.as.Kl,W.CSS.XD);b.Br("right","top",4,50);D(a.kb.levels.oa.Iu(),function(a){a.Zw(10)})}
f.g=function(){W.d.g.call(this);document.removeEventListener("mousemove",this.Mw.bind(this));document.removeEventListener("mousemove",this.Mw);null!=this.rb&&(this.rb.g(),delete this.rb);null!=this.xc&&sb(this.xc);delete this.xc;null!=this.kb&&(C(this.kb,function(a){a.g()}),sb(this.kb));delete this.kb;sb(this.sd);delete this.sd;C(this.Gk,function(a){C(a,function(a){Vc(a);delete a});sb(a)});sb(this.Gk);delete this.Gk;this.bl&&(R(this.Bf),delete this.Bf);delete this.bl;delete this.Lm;delete this.ix;
delete this.$v;delete this.U;delete this.ka;delete this.Sa;delete this.K;delete this.xP};v("xiv.ui.ViewBoxInteractorHandler.EventType",{CN:"M",iN:"N",nO:"O",NM:"P"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",Lu);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",W.ORIENTATION_KEY);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",W.prototype.oz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",W.prototype.vz);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",W.prototype.uz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",W.prototype.nz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",W.prototype.sz);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",W.prototype.Bm);v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",W.prototype.Ty);v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",W.prototype.HB);
v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",W.prototype.Uw);v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",W.prototype.II);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",W.prototype.NL);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",W.prototype.update);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",W.prototype.fD);v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",W.prototype.jD);
v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",W.prototype.bD);v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",W.prototype.wz);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",W.prototype.g);function jv(){wc.call(this)}w(jv,wc);v("xiv.utils.ErrorCatcher",jv);
function kv(a){function b(a){a.target.g()}var c;g(a)||(a=[a]);null!=c&&!g(c)&&(c=[c]);var d=new bn;Rm(d,Tm);D(a,function(a){d.bk(a)});null!=c&&D(c,function(a){d.zt(a)});d.qe("XImgView Error");d.ba(!0);d.a().style.position="fixed";d.a().style.opacity=0;wk(d.a(),400);d.Uh().style.opacity=0;xk(d.Uh(),400,.75);d.a().style.height="250px";a=T(d.a());d.a().style.top="calc(50% - "+a.height/2+"px)";d.a().style.left="calc(50% - "+a.width/2+"px)";Tc(d,Sm,b);Tc(d,"f",b)}
function lv(){var a,b='<a target="_blank" style="color: #5CB8E6"  href=';$b()?(a="Internet Explorer",b+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">'):Xb("Chrome")||Xb("CriOS")?(a="Chrome",b+='"https://productforums.google.com/forum/#!msg/chrome/CgYesRogD4c/sU1TQsRgnWgJ">'):Xb("Firefox")?(a="Firefox",b+='"https://support.mozilla.org/en-US/questions/984663">'):ac()?(a="Safari",b+='"https://discussions.apple.com/thread/3300585?start=0">'):Zb()&&(a="Opera",b+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">');
kv('<br>It looks like <a target="_blank" style="color: #5CB8E6" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">Experimental-WebGL</a> is disabled.<br><br><br>'+(b+("How to enable WebGL in "+a+".</a>")))}jv.checkForWebGL=function(){var a=O("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};f=jv.prototype;f.hz=[];f.Mm=null;f.Dr=null;f.Qc=null;f.hu=document.body;f.Iv=null;f.yC=function(a){this.Iv=a};
f.kC=function(a){this.hu=a};function mv(a){Jb(a.hz);a.Mm=window.console.log;a.Dr=function(){a.Mm.apply(this,arguments);var b="";D(arguments,function(a,d){0<d&&(b+=" ");b+=a});a.hz.push(b)};window.console.log=a.Dr}f.Fs=function(a){!0===a?(mv(this),window.onerror=this.Hv.bind(this)):(window.onerror=void 0,null!=this.Mm&&(window.console.log=this.Mm,this.Dr=this.Mm=null))};
f.Hv=function(a,b,c){if(null==this.Qc){null!=this.Iv&&this.Iv();var d="",e="",d="<b>Render Error!</b><br><br>";r(a)&&(e+=a+"<br>");r(b)&&(e+="src: "+b+"<br>",u(c)&&(e+=" line: "+c+"<br>"));this.Qc=new bn;this.Qc.n(this.hu);Rm(this.Qc,null);this.Qc.bk(d);this.Qc.zt(e);Km(this.Qc,!0);this.Qc.ba(!0);this.Qc.a().style.opacity=0;this.Qc.mw();this.Qc.$d();wk(this.Qc.a(),200);Tc(this.Qc,"f",function(a){a.target.g();this.Qc=null}.bind(this))}};f.clear=function(){null!=this.Qc&&(this.Qc.g(),delete this.Qc)};
f.g=function(){jv.d.g.call(this);this.clear();delete this.Mm;delete this.Dr;delete this.hu};
v("xiv.utils.ErrorCatcher.isCompatible",function(){var a=!0,b=bc(),c={Chrome:{ko:Xb("Chrome")||Xb("CriOS"),yo:11},IE:{ko:$b(),yo:11},Safari:{ko:ac(),yo:5.1},Opera:{ko:Zb(),yo:12},Firefox:{ko:Xb("Firefox"),yo:4}},d=!1;C(c,function(c){c.ko&&!d&&1==Ya(c.yo,b)&&(kv("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>"),a=!1,d=!0)});a&&!jv.checkForWebGL()&&(lv(),
a=!1);return a});v("xiv.utils.ErrorCatcher.checkForWebGL",jv.checkForWebGL);v("xiv.utils.ErrorCatcher.EventType",{ERROR:"Q"});v("xiv.utils.ErrorCatcher.prototype.setOnErrorCallback",jv.prototype.yC);v("xiv.utils.ErrorCatcher.prototype.setDialogParent",jv.prototype.kC);v("xiv.utils.ErrorCatcher.prototype.waitForError",jv.prototype.Fs);v("xiv.utils.ErrorCatcher.prototype.clear",jv.prototype.clear);v("xiv.utils.ErrorCatcher.prototype.onError",jv.prototype.Hv);
v("xiv.utils.ErrorCatcher.prototype.dispose",jv.prototype.g);E&&pc(8);function nv(){V.call(this);this.Sk=O("div",{id:nv.ID_PREFIX+"_ProgBarHolder_"+B(),"class":nv.CSS.rE});Zh(this.a(),this.Sk);this.$g=O("div",{id:nv.ID_PREFIX+"_LabelHolder_"+B(),"class":nv.CSS.VD});Zh(this.a(),this.$g);this.xh=new zr;this.xh.Db(this.Sk);N(Ph("progress-bar-thumb",this.Sk),nv.CSS.Ss)}w(nv,V);v("xiv.ui.ProgressBarPanel",nv);nv.ID_PREFIX="xiv.ui.ProgressBarPanel";nv.CSS_SUFFIX={Ss:"thumb",rE:"progbarholder",VD:"labelholder"};f=nv.prototype;f.po="";f.Aw=!1;
f.pg=function(a){this.po=a;this.$g.innerHTML=this.po};f.zw=function(a){this.Aw=null!=a&&!1===a?!1:!0;this.F(this.xh.w())};f.F=function(a){this.xh.F(a);this.xh.a().childNodes[0].style.background="rgb(100,149,237)";this.$g.innerHTML=this.po;this.Aw&&(0<this.po.length&&(this.$g.innerHTML+=" "),this.$g.innerHTML+=this.xh.w().toString()+"%");Ch(this.Sk,"progress-bar-horizontal")};f.w=function(){return this.xh.w()};
f.f=function(){nv.d.f.call(this);null!=this.xh&&(this.xh.g(),delete this.xh);null!=this.Sk&&(R(this.Sk),delete this.Sk);null!=this.$g&&(R(this.$g),delete this.$g);this.po=this.Aw=null};v("xiv.ui.ProgressBarPanel.EventType",{});v("xiv.ui.ProgressBarPanel.ID_PREFIX",nv.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",nv.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",nv.prototype.pg);v("xiv.ui.ProgressBarPanel.prototype.showValue",nv.prototype.zw);
v("xiv.ui.ProgressBarPanel.prototype.setValue",nv.prototype.F);v("xiv.ui.ProgressBarPanel.prototype.getValue",nv.prototype.w);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",nv.prototype.f);function ov(){V.call(this)}w(ov,Ss);v("nrg.ui.ThumbnailGallery",ov);ov.ID_PREFIX="nrg.ui.ThumbnailGallery";ov.CSS_SUFFIX={KD:"dialog",Ts:"thumbnail",Vs:"thumbnail-image",eO:"thumbnail-text"};var pv=B();f=ov.prototype;f.ts=!1;f.Ew=function(a){this.ts=a;null!=this.oa&&this.ts&&this.oa.ow(qv)};f.n=function(a){ov.d.n.call(this,a);rv(this);this.ts&&this.oa.ow(qv)};
function qv(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=bi(a),d=b[pv].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[pv]&&(e=h[pv].toLowerCase(),e=Ka(d,e),0>e)){ai(b,h);return}a.appendChild(b)}f.Hn=function(a,b){var c=new Ps;Eh(c.a(),Ah(c.a()),this.Cj);Eh(c.We,Ah(c.We),this.Zk);Eh(c.$a,Ah(c.$a),this.Yk);c.rw(a);c.ap(b);return c};f.loop=function(a){C(this.Xb,function(b){a(b)})};f.qw=function(a){this.loop(function(b){Zh(a,b.Le())})};
f.El=function(a,b){if(!pb(this.Xb,a)){this.Xb=this.Xb?this.Xb:{};this.Xb[a.a().getAttribute("id")]=a;this.nb.wn(a.Le());F(this.nb,"w",this.bK.bind(this));a.a()[pv]=a.Fu().toLowerCase();this.ff(a.a(),b);this.dd();var c=a.Le();F(c,"mouseenter",function(){this.dispatchEvent({type:"R",Nj:a})}.bind(this));F(c,"mouseleave",function(){this.dispatchEvent({type:"S",Nj:a})}.bind(this))}};f.Wi=function(a,b,c){a=this.Hn(a,b);this.El(a,c);sv(this,"image");sv(this,"text");sv(this,"thumbnail");this.dd();return a};
f.dp=function(){ov.d.dp.call(this);F(this.ng,"mouseover",this.ZC.bind(this))};f.ZC=function(a){this.uv=a.clientX;this.vv=a.clientY};function tv(a){C(a.Xb,function(a){a.Eo()});a.jp=null}f.bK=function(){var a=document.elementFromPoint(this.uv,this.vv);(a=ri(a,null,Ps.Ec))?(a=a.id.replace("HOVERABLE_",""),this.jp!==a&&(tv(this),this.jp=a,this.Xb[this.jp].Jr()),this.Xb[this.jp].jw()):tv(this)};
function sv(a,b){var c,d=[],e="";for(e in a.Xb){switch(b){case "thumbnail":d=a.Cj;c=a.Xb[e].a();break;case "image":d=a.Yk;c=a.Xb[e].$a;break;case "text":d=a.Zk,c=a.Xb[e].We}Eh(c,Ah(c),d)}}f.By=function(a){null!=this.Cj||rv(this);this.Cj.push(a);sv(this,"thumbnail")};f.Ey=function(a){this.Yk.push(a);sv(this,"image")};f.Fy=function(a){this.Zk.push(a);sv(this,"text")};f.k=function(a){a&&rk(this.a(),a)};
function rv(a){var b=new Ps;a.Cj=Ah(b.a());a.Cj.push(ov.CSS.Ts);a.Yk=Ah(b.$a);a.Yk.push(ov.CSS.Vs);a.Zk=Ah(b.We);a.Zk.push(ov.CSS.Mx);R(b.a());delete b}f.f=function(){ov.d.f.call(this);delete this.ts;null!=this.uv&&delete this.uv;null!=this.vv&&delete this.vv;null!=this.Xb&&(this.Kn(this.Xb),delete this.Xb);null!=this.oa&&(I(this.oa),this.oa.g(),delete this.oa);null!=this.Cj&&(Jb(this.Cj),delete this.Cj);null!=this.Yk&&(Jb(this.Yk),delete this.Yk);null!=this.Zk&&(Jb(this.Zk),delete this.Zk);delete this.jp};
v("nrg.ui.ThumbnailGallery.ID_PREFIX",ov.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",ov.CSS_SUFFIX);v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",pv);v("nrg.ui.ThumbnailGallery.thumbnailSorter",qv);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",ov.prototype.Ew);v("nrg.ui.ThumbnailGallery.prototype.render",ov.prototype.n);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",ov.prototype.Hn);v("nrg.ui.ThumbnailGallery.prototype.loop",ov.prototype.loop);
v("nrg.ui.ThumbnailGallery.prototype.setHoverParent",ov.prototype.qw);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",ov.prototype.El);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",ov.prototype.Wi);v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",ov.prototype.dp);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",ov.prototype.By);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",ov.prototype.Ey);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",ov.prototype.Fy);
v("nrg.ui.ThumbnailGallery.prototype.updateStyle",ov.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",ov.prototype.f);function uv(){V.call(this)}w(uv,V);v("xiv.ui.ViewableGroupMenu",uv);uv.ID_PREFIX="xiv.ui.ViewableGroupMenu";uv.CSS_SUFFIX={Cp:"header",Ts:"thumbnail",Mx:"thumbnail-text",Vs:"thumbnail-image",JE:"thumbnailgallery",Bp:"background"};f=uv.prototype;f.T=null;f.Xc=null;f.bm=null;
f.n=function(a){uv.d.n.call(this,a);this.Xc=O("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});N(this.Xc,this.constructor.CSS.Bp);null!=this.a().parentNode?Zh(this.a().parentNode,this.Xc):Zh(this.a(),this.Xc);this.bm=O("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":uv.CSS.Cp});this.bm.innerHTML="<b> Select View <b>";Zh(this.a(),this.bm);null!=this.T||this.reset()};f.Eq=function(){return this.Xc};f.show=function(){wk(this.a(),em.yM)};
f.Wi=function(a,b){null!=this.T||this.reset();var c=this.T.Wi(a,b);vv(this,c);return c};f.em=function(){zk(this.a(),500);R(this.a())};f.reset=function(){null!=this.T&&(this.T.g(),delete this.T);this.T=new ov;this.T.Ew(!0);this.T.n(this.a());N(this.T.a(),uv.CSS.JE);this.T.By(uv.CSS.Ts);this.T.Ey(uv.CSS.Vs);this.T.Fy(uv.CSS.Mx)};function vv(a,b){F(b,"B",function(){this.dispatchEvent({type:"T",Rw:b})}.bind(a))}
f.f=function(){uv.d.f.call(this);null!=this.Xc&&(R(this.Xc),delete this.Xc);null!=this.bm&&(R(this.bm),delete this.bm);null!=this.T&&(this.T.g(),delete this.T)};v("xiv.ui.ViewableGroupMenu.ID_PREFIX",uv.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{BO:"T"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",uv.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",uv.prototype.n);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",uv.prototype.Eq);v("xiv.ui.ViewableGroupMenu.prototype.show",uv.prototype.show);
v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",uv.prototype.Wi);v("xiv.ui.ViewableGroupMenu.prototype.hide",uv.prototype.em);v("xiv.ui.ViewableGroupMenu.prototype.reset",uv.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",uv.prototype.f);var wv;function xv(a,b,c,d,e){this.Og=a;this.Jk=b;this.Py=c;this.GF=d;this.Jo=e}xv.prototype.getName=function(){return this.Jk};function yv(a){return!a.Jk||"[object Object]"==a.Og}
function zv(a){var b=[a.Og?Av(a.Og)+".":"",a.Jk?Av(Bv(a.Jk)):"anonymous",Av(a.GF),a.Py?" [as "+Av(Bv(a.Py))+"]":""];if(a.Jo)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.Jo.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',Av(a.Jo),"', '",c,"'); return false\">",Av(a.Jo),"</a>")}else b.push(Av(a.Jo));return b.join("")}
var Cv=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,Dv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,Ev=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
Fv=/^function ([a-zA-Z_$][\w$]*)/,Gv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function Hv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(Fv),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");r(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new xv("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function Iv(a){var b=a.match(Cv);if(b)return new xv(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new xv("",e,"",d,h)}return(b=a.match(Dv))?new xv("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(Ev))?new xv(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(Gv))?new xv("",b[1]||"","","",b[2]||
""):null}function Bv(a){return wv?wv(a):a}function Av(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Jv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){wv=a});function Kv(a,b){return a==b}function Lv(a,b){return a.toString()===b.toString()}var Mv={String:Kv,Number:Kv,Boolean:Kv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:Lv,Function:Lv};function Nv(a,b,c){return Math.abs(a-b)<=c}var Ov={Number:Nv};
function Pv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function Qv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+Pv(a)+")");return b}function Rv(a,b){return b.length==a+1?b[0]:null}function Sv(a,b,c){return c.length==b+1?c[a]:c[a-1]}function Tv(a,b){b.length==a||b.length==a+1&&r(b[0])||Uv(null,"Incorrect arguments passed to assert function")}
function Vv(a,b){var c="Expected "+Qv(a)+" but was "+Qv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function Wv(a,b){Tv(1,arguments);var c=Rv(1,arguments),d=Sv(1,1,arguments);ia(d)||Uv(c,"Bad argument to assert(boolean)");d||Uv(c,"Call to assert(boolean) with false")}function Xv(a,b){Tv(1,arguments);var c=Rv(1,arguments),d=Sv(1,1,arguments);ia(d)||Uv(c,"Bad argument to assertTrue(boolean)");d||Uv(c,"Call to assertTrue(boolean) with false")}function Yv(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments),h=Vv(d,e);d===e||Uv(Rv(2,arguments),h)}
function ew(a,b){Tv(1,arguments);var c="Expected not to be "+Qv(null);null!==Sv(1,1,arguments)||Uv(Rv(1,arguments),c)}function fw(a,b){Tv(1,arguments);var c="Expected not to be "+Qv(void 0);void 0!==Sv(1,1,arguments)||Uv(Rv(1,arguments),c)}
function gw(a,b,c){function d(a,b,c){for(var q=0;q<h.length;++q){var t=h[q]===a,s=k[q]===b;if(t||s){t&&s||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(q=Pv(a),t=Pv(b),q==t){var s="Array"==q,z=l(q,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(s&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(s?"[%s]":c?".%s":"%s"),a.__iterator__)ja(a.Rl)?a.Rl(b)||e.push("equals() returned false for "+(c||
q)):a.Bb?d(a.Bb,b.Bb,z.replace("%s","map_")):e.push("unable to check "+(c||q)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)s&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||t)));for(y in b)s&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||q));if(s)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+Vv(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=Mv[a])?a(b,c)?"":Vv(b,c):null};d(a,b,"");return 0==e.length?null:Vv(a,b)+"\n   "+e.join("\n   ")}function hw(a,b,c){Tv(2,arguments);var d=Rv(2,arguments)?Rv(2,arguments):"",e=gw(Sv(1,2,arguments),Sv(2,2,arguments));!e||Uv(d,e)}function iw(a,b,c,d){Tv(3,arguments);var e=Sv(1,3,arguments),h=Sv(2,3,arguments),k=Sv(3,3,arguments);Nv(e,h,k)||Uv(Rv(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function jw(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function kw(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function lw(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function Uv(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new mw(a,b);}
function mw(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=Jv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new xv("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(Iv(c[e]));c=d}else c=Hv();for(d=c.length-1;c[d]&&yv(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(zv(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,mw):this.stack=Error().stack||""}w(mw,Error);mw.prototype.toString=function(){return this.message};v("fail",function(a){Uv("Call to fail()",a)});v("assert",Wv);
v("assertThrows",function(a,b){Tv(1,arguments);var c=Sv(1,1,arguments),d=Rv(1,arguments);"function"==typeof c||Uv(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&r(e.stacktrace)&&r(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}Uv(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){Tv(1,arguments);var c=Rv(1,arguments),d=Sv(1,1,arguments);"function"==typeof d||Uv(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",Uv(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",Xv);
v("assertFalse",function(a,b){Tv(1,arguments);var c=Rv(1,arguments),d=Sv(1,1,arguments);ia(d)||Uv(c,"Bad argument to assertFalse(boolean)");!d||Uv(c,"Call to assertFalse(boolean) with true")});v("assertEquals",Yv);v("assertNotEquals",function(a,b,c){Tv(2,arguments);var d=Sv(2,2,arguments),e="Expected not to be "+Qv(d);Sv(1,2,arguments)!==d||Uv(Rv(2,arguments),e)});v("assertNull",function(a,b){Tv(1,arguments);var c=Sv(1,1,arguments),d=Vv(null,c);null===c||Uv(Rv(1,arguments),d)});
v("assertNotNull",ew);v("assertUndefined",function(a,b){Tv(1,arguments);var c=Sv(1,1,arguments),d=Vv(void 0,c);void 0===c||Uv(Rv(1,arguments),d)});v("assertNotUndefined",fw);v("assertNotNullNorUndefined",function(a,b){Tv(1,arguments);ew.apply(null,arguments);fw.apply(null,arguments)});v("assertNonEmptyString",function(a,b){Tv(1,arguments);var c=Sv(1,1,arguments),d="Expected non-empty string but was "+Qv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||Uv(Rv(1,arguments),d)});
v("assertNaN",function(a,b){Tv(1,arguments);isNaN(Sv(1,1,arguments))||Uv(Rv(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){Tv(1,arguments);!isNaN(Sv(1,1,arguments))||Uv(Rv(1,arguments),"Expected not NaN")});v("assertObjectEquals",hw);
v("assertObjectRoughlyEquals",function(a,b,c,d){Tv(3,arguments);var e=Sv(3,3,arguments),h=Rv(3,arguments)?Rv(3,arguments):"",k=gw(Sv(1,3,arguments),Sv(2,3,arguments),function(a,b,c){return(a=Ov[a])?a(b,c,e)?"":Vv(b,c)+" which was more than "+e+" away":null});!k||Uv(h,k)});v("assertObjectNotEquals",function(a,b,c){Tv(2,arguments);var d=Rv(2,arguments)?Rv(2,arguments):"";gw(Sv(1,2,arguments),Sv(2,2,arguments))||Uv(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments),h=Rv(2,arguments)?Rv(2,arguments):"",k=Pv(d);"Array"==k||Uv(h,"Expected an array for assertArrayEquals but found a "+k);k=Pv(e);"Array"==k||Uv(h,"Expected an array for assertArrayEquals but found a "+k);hw(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments),h=Rv(2,arguments)?Rv(2,arguments):"";if(d){Yv("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)Yv("mismatch at index "+k+": "+h,d[k],e[k])}else Wv(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){Tv(3,arguments);var e=Sv(1,3,arguments),h=Sv(2,3,arguments),k=Sv(3,3,arguments),l=Rv(3,arguments)?Rv(3,arguments):"";if(e){Yv("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)iw(l,e[n],h[n],k)}else Wv(l,!h)});
v("assertSameElements",function(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments),h=Rv(2,arguments);Xv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ha(d)&&ha(e));d=jw(d);e=jw(e);d.length==e.length||Uv(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=jw(d),l=0;l<e.length;l++){var n=kw(k,e[l]);-1!=n||Uv(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){Tv(1,arguments);Sv(1,1,arguments)||Uv(Rv(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){Tv(1,arguments);Sv(1,1,arguments)&&Uv(Rv(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){Tv(2,arguments);var d=Sv(2,2,arguments),e=lw(Sv(1,2,arguments)),d=lw(d),h=Vv(e,d);e===d||Uv(Rv(2,arguments),h)});
v("assertHashEquals",function(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments),h=Rv(2,arguments),k;for(k in d)k in e||Uv(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||Uv(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||Uv(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",iw);
v("assertContains",function(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments);-1!=kw(e,d)||Uv(Rv(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments);-1==kw(e,d)||Uv(Rv(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){Tv(2,arguments);var d=Sv(1,2,arguments),e=Sv(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||Uv(Rv(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function nw(){V.call(this);this.vb=[];this.Ip={};this.Kb={iO:null,Sm:null,Ag:null,xD:null,zM:null,yD:null,zE:null,KE:null};this.Kb.Sm=O("div",{id:nw.ID_PREFIX+"_menu_top_left_"+B(),"class":nw.CSS.mE,viewbox:this.a().id});Zh(this.a(),this.Kb.Sm);this.Cb=O("div",{id:nw.ID_PREFIX+"_ViewFrame_"+B(),"class":nw.CSS.UE});Zh(this.a(),this.Cb);this.Wb=new nv;Zh(this.Cb,this.Wb.a());this.Wb.a().style.opacity=0;ow(this.Wb);this.k();this.dv()}w(nw,V);v("xiv.ui.ViewBox",nw);nw.ID_PREFIX="xiv.ui.ViewBox";
nw.CSS_SUFFIX={VM:"hidden",YN:"tabdragger",ZN:"tabdragger-handle",WE:"viewlayoutmenu",mE:"menu-top-left",lE:"menu-left",VE:"viewlayouthandler",$N:"ziptabs",aO:"ziptab-bounds",UE:"viewframe",nx:"component-highlight",QE:"viewablegroupmenu",PM:"emptymenubutton"};var pw={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=nw.prototype;f.lJ="empty";f.Od=null;f.Sa=null;f.Nb=null;f.ka=null;f.Wb=null;f.xd=null;f.K=null;f.th=null;f.Ae=null;f.PA=!1;f.Is=!1;f.Gm=null;f.Rk=null;f.Hm=null;
f.mm=!1;f.vs=!1;f.cJ=function(){return this.mm};f.Qa=function(){return this.ka};f.wH=function(){return this.Kb};f.qH=function(){return this.lJ};f.pI=function(){return this.vb};f.lI=function(){return this.Cb};f.nH=function(){return this.Sa};f.oH=function(){return this.Nb};f.nI=function(){return this.xd};f.hm=function(){N(this.Cb,nw.CSS.nx)};f.Jm=function(){Ch(this.Cb,nw.CSS.nx)};f.cI=function(){return this.Bj};f.Wu=function(){return null!=this.Bj};f.Rt=function(){this.Bj=void 0};
f.jG=function(a){this.lu=this.lu?this.lu:[];this.lu.push(a)};f.ni=function(a){this.Nb.Zo(a)};f.xK=function(){this.Wb.F(0);this.Wb.zw(!0);qw(this,this.Wb,0);this.hm()};function rw(a,b){a.Wb.pg("");a.Wb.zw(!0);a.Wb.F(100*b)}
f.Qv=function(a){if(this.Is)rw(this,.5*a.value+.5);else if(1<this.Hm){var b=1/this.Hm;if(.96<a.value&&this.Rk!=a.value&&.96>this.Rk&&this.Rk<a.value)this.Gm++,rw(this,b*this.Gm);else{this.Rk=a.value;var b=1/this.Hm,c=b*this.Gm+a.value*b;this.Rk<a.value&&rw(this,c+a.value*b)}}else rw(this,a.value)};
f.Lr=function(){this.th.Fs(!1);D(Oh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.mm=this.Is=!1;this.K.pz();this.K.Jq().tw(this.Nb.oj.src);this.Ae.oz();this.Ae.Ty();var a=[this.Kb.Ag,this.Nb.a(),this.Sa.a()],a=Mb(a,this.K.CA()),b=[this.Wb.a()];if("demo"!=em.MODE){var c=this.ka.Zl();if(!0==c[J.SINGLE_FRAME_SCAN]){this.ni("Transverse");var d=Bs(this.Sa);D(d,function(a){-1==a.id.indexOf("ZoomDisplay")&&(a.style.visibility="hidden")});R(this.Nb.a())}else null!=this.vb[0].Eb()?this.ni(this.vb[0].Eb()):
null!=c[J.ORIENTATION_KEY]&&this.ni(cb(this.ka.Zl()[J.ORIENTATION_KEY]));c[J.SINGLE_FRAME_SCAN]||(a=Mb(a,Bs(this.Sa)))}var e=[],h=[],k=[],l=[];D(a,function(){e.push(0);h.push(1)});D(b,function(){k.push(1);l.push(0)});Ok(Mb(a,b),Mb(e,k),Mb(h,l),400,null,null,function(){this.Wb.F(0);ow(this.Wb,0);this.dispatchEvent("V");this.Jm();this.vs=!1;this.k();this.Ir()}.bind(this))};f.Mv=function(a){C(this.ka.uc,function(b,c){null!=a.Xw[c]&&(b.Vk(a.Xw[c]),b.k())})};
f.Ir=function(){this.ka&&this.ka.k();null!=this.Ae&&this.Ae.update();null!=this.ka&&this.Ae.HB()};function sw(a,b){a.xd.reset();sb(a.Ip);Ib(a.vb,b)||a.vb.push(b);1==a.vb.length&&a.ni(pw[b.Sf]);var c=b.Sc,d=null;1<c.length?(D(c,function(a,b){d=this.xd.Wi(a.Dm,a.Id()||b);this.Ip[ma(d)]=a}.bind(a)),ow(a.Wb,0),qw(a,a.xd,400)):a.load(c[0],!1)}f.eH=function(){return 700};function tw(a,b){Gu("Scans with frame counts greater than 700 may crash the Viewer.&nbspAre you sure you want to continue?",a.Cb,b)}
function uw(a,b){Gu("ViewBox in use.&nbspProceed anyway?",a.Cb,b)}function vw(a,b,c){var d=function(){this.load(b,c)}.bind(a),e=b.Sc[0];if(null!=e.BA){var h=700<e.yd[0].Zf().length;if("scans"==e.Sf.toLowerCase()&&h&&!a.vs)return tw(a,function(){this.vs=!0;d()}.bind(a)),!1}return a.Wu()?(uw(a,function(){this.Rt();d()}.bind(a)),!1):!0}
f.load=function(a,b){ow(this.Wb,0);null!=this.th?(this.th.clear(),this.th.Fs(!1)):(this.th=new jv,this.th.kC(this.Cb),this.th.yC(this.Mr.bind(this)));this.dispatchEvent("U");if(!(a instanceof Ul)||vw(this,a,b))if(this.mm=!0,null!=a){if(null!=b?b:1)ww(this),xw(this),this.K=new yu(this),this.Sa=new As,this.Sa.a().style.opacity=0,Zh(this.Cb,this.Sa.a()),N(this.Sa.a(),nw.CSS.VE),F(this.Sa,"A",this.Ir.bind(this)),F(this.Sa,"x",this.Mv.bind(this)),F(this.Sa,"z",this.Nv.bind(this)),F(this.Sa,"y",this.Lv.bind(this)),
this.ka=new au,yw(this),this.Ae=new W(this,this.ka,this.Sa,this.K),this.Ae.bD(this.Nb),this.PA=!0;ow(this.xd,400);qw(this,this.Wb,0);if(a instanceof Ul)sw(this,a);else{var c;C(this.ka.uc,function(a,b){(c=this.Sa.Yz(b))&&a.ra(c.a())}.bind(this));Tc(this.ka,"r",this.xK.bind(this));Tc(this.ka,"t",this.Lr.bind(this));F(this.ka,"s",this.Qv.bind(this));this.Gm=null;"scans"==a.Sf.toLowerCase()?zw(this,a):(this.hm(),Aw(this,a),Bw(this,a))}}else this.Mr("The data set is empty!")};
function Aw(a,b){a.Gm=0;a.Rk=0;a.Hm=b.yd.length+8;D(b.yd,function(a){null!=a.Sd.labelMapFile&&this.Hm++}.bind(a))}
function zw(a,b){qw(a,a.Wb,0);rw(a,0);a.Is=!0;var c=a.vb[a.vb.length-1].xA(),d=b.yd[0].Zf()[0],e="";null!=d?(-1!=d.toLowerCase().indexOf("xiv/sample-data/scans/")?(d=d.split("xiv/sample-data/scans/"),e=d[0]+"xiv/sample-data/scans/"+(d[1].split("/")[0]+".zip")):e=d.split("/files/")[0]+"/files",window.console.log("XImgView Zip Downloading (XHR): "+e),zl(e,function(a){window.console.log("Downloaded: "+e+"!");b.yd[0].lC(a,function(){Bw(this,b)}.bind(this),gm)}.bind(a),function(a){this.hm();0<a.totalSize?
rw(this,a.loaded/a.totalSize*.5):0<c&&rw(this,a.loaded/c*.5)}.bind(a))):a.th.Hv("No readable files in the data set!")}function Bw(a,b){window.console.log("\n\nTurning the error catcher off!\n\n");a.th.Fs(!1);a.ka.n(b);a.Bj=(new Date).getTime()}f.Mr=function(){this.mm=!1;this.Jm();ow(this.Wb);ww(this);this.Rt();this.dispatchEvent({type:"W"})};f.Nv=function(){C(this.ka.uc,function(a){a.k()});this.Ae.update()};
f.Lv=function(a){var b=a.frames;C(this.ka.uc,function(a,d){null!=b[d]&&(a.Vk(b[d].a()),a.k())}.bind(this));this.Ae.update()};function ow(a,b){if(null!=a){b=u(b)&&0<=b?b:0;var c=function(){a.a().style.visibility="hidden";R(a.a());null!=a.Eq&&R(a.Xc)};"hidden"==a.a().style.visibility||0==b?c():(zk(a.a(),b,c),null!=a.Eq&&zk(a.Xc,b,c))}}
function qw(a,b,c){c=u(c)&&0<=c?c:0;b.a().style.opacity="0";b.a().style.visibility="visible";Zh(a.Cb,b.a());0==c?b.a().style.opacity="1":(wk(b.a(),c,function(){}),null!=b.Eq&&(Zh(a.Cb,b.Xc),wk(b.Xc,c,function(){})))}f.zs="Info. Display;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");
function Cw(a,b,c,d){var e=bi(b),h=[],k;D(a.zs,function(){h.push(null)});h[d]=c;D(e,function(a){k=this.zs.indexOf(a.title);h[k]=a}.bind(a));$h(b);D(h,function(a){null!=a&&b.appendChild(a)})}
f.ck=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Kb.Sm;break;case "LEFT":d=this.Kb.Ag;break;case "BOTTOM_LEFT":d=this.Kb.xD;break;case "TOP_RIGHT":d=this.Kb.KE;break;case "RIGHT":d=this.Kb.zE;break;case "BOTTOM_RIGHT":d=this.Kb.yD}u(c)?d.insertBefore(b,d.childNodes[c]):(a=this.zs.indexOf(b.title),0<a?Cw(this,d,b,a):Zh(d,b));Dw(this)};
f.rm=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?N(a,a.getAttribute(Cu)):Ch(a,a.getAttribute(Cu));null!=b&&b(a)};f.eD=function(a){return"true"==this.Od[a].getAttribute("checked").toString()};f.Hu=function(a){return this.Od[a]};f.ad=function(a){Nn(this.Od[a])};f.ax=function(a){g(a)||(a=[a]);D(a,function(a){null!=this.Od[a]&&this.eD(a)&&Nn(this.Od[a])}.bind(this))};
f.ik=function(a,b,c,d,e,h){var k=b+"-on",l=O("img",b);l.id=lj(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(Cu,b+"-on");N(l,k);rk(l,{cursor:"pointer"});F(l,"click",function(){this.rm(l,e)}.bind(this));this.ck(a,l);if(null==this.Od)this.Od={};else if(null!=this.Od[c])throw Error("Invalid identifier for toggle button.  In use.");return this.Od[c]=l};
function xw(a){a.Kb.Ag=O("div",{id:nw.ID_PREFIX+"_menu_left_"+B(),"class":nw.CSS.lE,viewbox:a.a().id});a.Kb.Ag.style.opacity=0;Zh(a.a(),a.Kb.Ag);a.Nb=new ip;a.Nb.jC("Select Layout");N(a.Nb.a(),nw.CSS.WE);a.Nb.pB(!0);a.Nb.a().style.opacity=0;a.Nb.ie.style.opacity=0;var b=a.Nb.a();Ob(a.zs,void 0,0,b.title);a.ck("LEFT",b);a.Cb.appendChild(a.Nb.ie)}
function yw(a){a.xd=new uv;a.xd.n(a.Cb);Zh(a.Cb,a.xd.a());Zh(a.Cb,a.xd.Xc);N(a.xd.a(),nw.CSS.QE);F(a.xd,"T",function(a){this.load(this.Ip[ma(a.Rw)],!1)}.bind(a));ow(a.xd)}f.eI=function(){return this.Od};function Dw(a){var b,c,d,e;null!=a.Kb.Sm&&(d=a.Kb.Sm,e=T(d),b=0,c=e.height);null!=a.Kb.Ag&&(d=a.Kb.Ag,e=T(d),a=a.u.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.k=function(a){nw.d.k.call(this,a);null!=this.Sa&&this.Sa.k();this.ka&&this.ka.k();null!=this.Nb&&(a=Ei(this.Kb.Ag),T(this.Nb.ie),a=a.y-130,this.Nb.pC(0,a),this.Nb.EC(0,a));Dw(this);null!=this.K&&this.K.update();null!=this.Ae&&this.Ae.jD()};
function ww(a){sb(a.Ip);Jb(a.vb);null!=a.Sa&&(I(a.Sa),Bc(a.Sa.g()),delete a.Sa);null!=a.K&&a.K.g();null!=a.Nb&&(I(a.Nb),a.Nb.g(),delete a.Nb);null!=a.ka&&(a.ka.g(),delete a.ka);null!=a.xd&&(a.xd.g(),delete a.xd);null!=a.Ae&&a.Ae.g();null!=a.Od&&(R(a.Kb.Ag),delete a.Kb.Ag,C(a.Od,function(a){I(a);R(a)}),Jb(a.Od),delete a.Od)}f.bi=!1;f.gr=function(){return this.bi};f.dv=function(){F(this.a(),"mouseenter",function(){this.bi=!0}.bind(this));F(this.a(),"mouseleave",function(){this.bi=!1}.bind(this))};
f.f=function(){nw.d.f.call(this);ww(this);null!=this.Wb&&(this.Wb.g(),delete this.Wb);R(this.Cb);I(this.Cb);delete this.Cb;C(this.Kb,function(a,b){R(a);delete this.Kb[b]}.bind(this));delete this.Kb;delete this.OO;delete this.PA;delete this.Is;delete this.bi;delete this.Gm;delete this.Rk;delete this.Hm;delete this.vs};v("xiv.ui.ViewBox.EventType",{SE:"U",RE:"V",AN:"W"});v("xiv.ui.ViewBox.ID_PREFIX",nw.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",nw.CSS_SUFFIX);v("xiv.ui.ViewBox.defaultLayout",pw);
v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",nw.prototype.Qa);v("xiv.ui.ViewBox.prototype.getMenus",nw.prototype.wH);v("xiv.ui.ViewBox.prototype.getLoadState",nw.prototype.qH);v("xiv.ui.ViewBox.prototype.getViewableTrees",nw.prototype.pI);v("xiv.ui.ViewBox.prototype.getViewFrame",nw.prototype.lI);v("xiv.ui.ViewBox.prototype.getLayoutHandler",nw.prototype.nH);v("xiv.ui.ViewBox.prototype.getLayoutMenu",nw.prototype.oH);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",nw.prototype.nI);v("xiv.ui.ViewBox.prototype.highlight",nw.prototype.hm);v("xiv.ui.ViewBox.prototype.unhighlight",nw.prototype.Jm);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",nw.prototype.cI);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",nw.prototype.Rt);v("xiv.ui.ViewBox.prototype.doNotHide",nw.prototype.jG);v("xiv.ui.ViewBox.prototype.setLayout",nw.prototype.ni);v("xiv.ui.ViewBox.prototype.load",nw.prototype.load);
v("xiv.ui.ViewBox.prototype.addToMenu",nw.prototype.ck);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",nw.prototype.rm);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",nw.prototype.eD);v("xiv.ui.ViewBox.prototype.getToggleButton",nw.prototype.Hu);v("xiv.ui.ViewBox.prototype.getHighFrameCountThreshold",nw.prototype.eH);v("xiv.ui.ViewBox.prototype.fireToggleButton",nw.prototype.ad);v("xiv.ui.ViewBox.prototype.untoggle",nw.prototype.ax);v("xiv.ui.ViewBox.prototype.createToggleButton",nw.prototype.ik);
v("xiv.ui.ViewBox.prototype.getToggleButtons",nw.prototype.eI);v("xiv.ui.ViewBox.prototype.isMouseOver",nw.prototype.gr);v("xiv.ui.ViewBox.prototype.isRendering",nw.prototype.cJ);v("xiv.ui.ViewBox.prototype.isInUse",nw.prototype.Wu);v("xiv.ui.ViewBox.prototype.showInUseDialog",nw.prototype.SP);v("xiv.ui.ViewBox.prototype.updateStyle",nw.prototype.k);v("xiv.ui.ViewBox.prototype.disposeInternal",nw.prototype.f);function Ew(){Fn.call(this)}w(Ew,Fn);Ew.prototype.ak=function(a,b){var c=new Ln(a,b);c.Wo(this);this.mo.push(c);this.rj&&Gn(this,c)};function Fw(){V.call(this)}w(Fw,V);v("xiv.ui.ViewBoxHandler",Fw);Fw.CSS_SUFFIX={ND:"handle",TE:"viewboxdragclone",Fj:"closebutton",lx:"addrowbutton",kx:"addcolumnbutton"};Fw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=Fw.prototype;f.Ns=5;f.Ex=5;f.il=document.body;f.tj=function(a,b){this.dispatchEvent({type:"Z",AB:a,BF:b})};f.uL=function(){return this.B.length};f.Tn=function(){var a=[];D(this.B,function(b,c){a.push([]);D(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.B&&D(this.B,function(b,c){D(b,function(d,e){a(d,c,e,this.B.length,b.length)}.bind(this))}.bind(this))};f.Tu=function(a,b){this.B||(this.B=[[]]);var c=0,d=[],e;if(null!=a)c=Gw(this,a),this.B[c.Yq].length<this.Ex&&(d.push(Hw(this)),Ob(this.B[c.Yq],c.fJ+1,0,d[0]));else{d=[];e=this.B.length?this.B.length:1;for(c=0;c<e;c++)d.push(Hw(this));0===this.B.length?this.B.push([d[0]]):D(this.B,function(a,b){a.push(d[b])})}this.tj(d,void 0===b?!0:b);Iw(this)};
f.lL=function(a){this.B&&(a=void 0===a?!0:a,this.B[0]&&1<this.B[0].length&&D(this.B,function(a){var c=a.length-1;Jw(this,a[c]);a.splice(c,1)}.bind(this)),this.tj(null,a),Iw(this))};function Gw(a,b){for(var c=0,d=0,e=a.B.length,h=0,c=0;c<e;c++)for(d=0,h=a.B[c].length;d<h;d++)if(b===a.B[c][d])return{Yq:c,fJ:d}}f.Ys=function(){for(var a=0,b=0,c=this.B.length,d=0,a=0;a<c;a++)for(b=0,d=this.B[a].length;b<d;b++)if(this.B[a][b].mm)return!0;return!1};
f.insertRow=function(a,b){this.B||(this.B=[[]]);var c=[],d,e;if(null!=a){var h=Gw(this,a),c=[];e=this.B[h.Yq].length;if(this.B.length<this.Ns){for(d=0;d<e;d++)c.push(Hw(this));Ob(this.B,h.Yq+1,0,c)}}else if(e=this.B[0]&&this.B[0].length?this.B[0].length:1,this.B.length<this.Ns){for(d=0;d<e;d++)c.push(Hw(this));this.B.push(c)}this.tj(c,void 0===b?!0:b);Iw(this)};
f.nL=function(a){this.B&&(a=void 0===a?!0:a,1<this.B.length&&(D(this.B[this.B.length-1],function(a){Jw(this,a)}.bind(this)),this.B.splice(this.B.length-1,1)),this.tj(null,a),Iw(this))};f.Pq=function(a){for(var b=0,c=0,d=this.B.length,e=0,b=0;b<d;b++)for(c=0,e=this.B[b].length;c<e;c++)if(a===this.B[b][c].a())return this.B[b][c]};f.jI=function(a,b){return this.B[a][b].a()};f.hI=function(a,b){return this.B[a][b]};f.AA=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.zA=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.JC=function(a){this.il=a};
function Hw(a){var b=new nw;Zh(a.il,b.a());Kw(a,b);var c=O("img",{id:Fw.ID_PREFIX+"_dragHandle_"+B(),"class":Fw.CSS.ND});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.ck("TOP_LEFT",c,1);a.mk||(a.mk={});a.mk[b.a().id]=c;c.title="Drag / Swap ViewBox";Lw(a,b);Mw(a,b);F(b,"V",a.Uv.bind(a));F(b,"U",a.Vv.bind(a));F(b,"W",a.Mr.bind(a));return b}
function Mw(a,b){var c=O("img",{id:Fw.ID_PREFIX+"_CloseButton_"+B(),"class":Fw.CSS.kx,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});tk(c,Fw.CSS.kx+"-hovered");F(c,"click",function(){this.Tu(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.ck("TOP_LEFT",c,1);a.sy||(a.sy={});a.sy[b.a().id]=c;c.title="Add ViewBox Column"}
function Lw(a,b){var c=O("img",{id:Fw.ID_PREFIX+"_CloseButton_"+B(),"class":Fw.CSS.lx,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});tk(c,Fw.CSS.lx+"-hovered");F(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.ck("TOP_LEFT",c,1);a.Ay||(a.Ay={});a.Ay[b.a().id]=c;c.title="Add ViewBox Row"}
function Kw(a,b){var c=O("img",{id:Fw.ID_PREFIX+"_CloseButton_"+B(),"class":Fw.CSS.Fj,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});tk(c,Fw.CSS.Fj+"-hovered");F(c,"click",function(){Nw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.ck("TOP_LEFT",c,1);a.An||(a.An={});a.An[b.a().id]=c;c.title="Close ViewBox"}f.Uv=function(a){this.dispatchEvent({type:"Y",XE:a.target})};f.Xs=function(a,b){this.loop(function(c){Ib(c.vb,a)&&b(c)})};f.Vv=function(a){this.dispatchEvent({type:"X",XE:a.target})};
f.Mr=function(a){this.dispatchEvent(a)};function Jw(a,b){xk(b.a(),150,0);R(a.mk[b.a().id]);R(a.An[b.a().id]);b.g()}function Ow(a,b){var c=[],d;Jw(a,b);D(a.B,function(a){d=[];D(a,function(a){a.lk||d.push(a)}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.B=c;a.tj(null,!0);Iw(a)}function Nw(a,b){1!=a.CB()&&(b.Wu()?Ow(a,b):uw(b,function(){Ow(this,b)}.bind(a)))}f.Xu=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.CB=function(){var a=0;this.loop(function(){a++});return a};
f.iI=function(a){for(var b=0,c=0,d=this.B.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.B[b].length;c<e;c++)if(this.B[b][c]===a)return e=b+1===this.B.length,h=c+1===this.B[b].length,e&&h?this.B[0][0]:e&&!h?this.B[0][c+1]:!e&&h?this.B[b+1][0]:this.B[b+1][c+1]};f.dA=function(){var a;this.loop(function(b){null!=a||null!=b.Bj||(a=b)}.bind(this));if(null!=a)return a;var b=this.AA();g(b)?b.sort(function(a,b){return a.Bj<b.Bj?-1:a.Bj>b.Bj?1:0}):b=[b];return b[0]};
function Pw(a,b,c){var d=new gk,e=a.Dg[b.id],h=a.Dg[c.id];b[Qw]=!0;c[Qw]=!0;d.add(new Vj(b,[b.offsetLeft,b.offsetTop],[h.x,h.y],300,uk));d.add(new Vj(c,[c.offsetLeft,c.offsetTop],[e.x,e.y],300,uk));Tc(d,"end",function(){b[Qw]=!1;c[Qw]=!1;Rw(this);for(var a,d,e,h,m=0,q=0,t=this.B.length,s,z;m<t;m++)for(q=this.B[m],s=q.length,q=0;q<s;q++)z=this.B[m][q],this.Xu(z,b)&&(a=m,d=q),this.Xu(z,c)&&(e=m,h=q);u(a)&&u(e)&&(m=this.B[a][d],this.B[a][d]=this.B[e][h],this.B[e][h]=m,m=T(this.B[a][d].a()),t=T(this.B[e][h].a()),
Pi(this.B[e][h].a(),m),Pi(this.B[a][d].a(),t))}.bind(a));d.play()}f.Qt=function(){this.ce&&(Hn(this.ce),Hn(this.Ph),delete this.ce,delete this.Ph)};function Sw(a){a.loop(function(a){null!=a.a()&&(this.ce.ak(this.mk[a.a().id]),this.Ph.ak(a.a()))}.bind(a))}function Iw(a){a.Qt();a.ce=new Ew;a.Ph=new Ew;Sw(a);var b=a.ce,c=a.Ph;b.Qw.push(c);c.jr=!0;b.ir=!0;a.ce.ra();a.Ph.ra();a.ce.Xt=a.Yt.bind(a);F(a.ce,"dragstart",a.XJ.bind(a));F(a.ce,"dragover",a.Gv.bind(a));F(a.ce,"dragend",a.Fv.bind(a))}f.Yt=function(a){return Tw(Lh(a.getAttribute("viewboxid")))};
f.XJ=function(){null!=this.Dg?sb(this.Dg):this.Dg={};Rw(this)};function Tw(a){var b=document.body;a=a.cloneNode(!1);a.className=Fw.CSS.TE;b&&b.appendChild(a);return a}var Qw=B();Fw.prototype.Gv=function(a){if(a.Pl.element.id!==a.yq.Xi.getAttribute("viewboxid")){var b=Lh(a.yq.Xi.getAttribute("viewboxid"));a=Lh(a.Pl.element.id);b[Qw]||a[Qw]||Pw(this,b,a)}};function Rw(a){a.loop(function(a){this.Dg[a.a().id]=Ei(a.a())}.bind(a))}
Fw.prototype.Fv=function(a){var b=a.yq.Ra.nk;a=Lh(a.yq.Xi.getAttribute("viewboxid"));a=Mi(a);a={left:a.x,top:a.y};var c=Tw(b);Zh(this.il.parentNode?this.il.parentNode:this.il,c);b=ok(b);rk(c,{top:b.top,left:b.left,"z-index":1E4});Uw(c,a).play();Vw(this);this.tj()};function Uw(a,b){var c=new gk;c.add(new Vj(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,uk));F(c,"end",function(){R(a)});return c}function Vw(a){a.loop(function(a){this.mk[a.a().id].style.visibility="visible"}.bind(a))}
Fw.prototype.f=function(){Fw.d.f.call(this);this.loop(function(a){I(a);R(a.a());a.g()}.bind(this));D(this.B,function(a){Jb(a)});Jb(this.B);delete this.B;this.xq(this.mk);delete this.mk;this.xq(this.An);delete this.An;C(this.Dg,function(a,b){sb(this.Dg[b]);delete this.Dg[b]}.bind(this));sb(this.Dg);delete this.Dg;null!=this.ce&&(I(this.ce),this.ce.g());delete this.ce;null!=this.Ph&&(I(this.Ph),this.Ph.g());delete this.Ph;delete this.il};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",Fw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{SE:"X",RE:"Y",AO:"Z"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",Fw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",Fw.prototype.Ns);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",Fw.prototype.Ex);v("xiv.ui.ViewBoxHandler.prototype.rowCount",Fw.prototype.uL);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",Fw.prototype.Tn);v("xiv.ui.ViewBoxHandler.prototype.loop",Fw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",Fw.prototype.Tu);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",Fw.prototype.lL);v("xiv.ui.ViewBoxHandler.prototype.insertRow",Fw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",Fw.prototype.nL);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",Fw.prototype.Pq);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",Fw.prototype.jI);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",Fw.prototype.hI);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",Fw.prototype.AA);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",Fw.prototype.zA);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",Fw.prototype.JC);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",Fw.prototype.Xs);v("xiv.ui.ViewBoxHandler.prototype.isMatch",Fw.prototype.Xu);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",Fw.prototype.CB);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",Fw.prototype.iI);
v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",Fw.prototype.dA);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxesRendering",Fw.prototype.Ys);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",Fw.prototype.f);function Ww(a){var b=Xw;return function(){var c=this||ba,c=c[Yw]||(c[Yw]={}),d=b(ma(a),arguments);return c.hasOwnProperty(d)?c[d]:c[d]=a.apply(this,arguments)}}var Yw="closure_memoize_cache_";function Xw(a,b){for(var c=[a],d=b.length-1;0<=d;--d)c.push(typeof b[d],b[d]);return c.join("\x0B")};function Zw(a){$c.call(this);this.Nl=a||Ih();if(this.Jz=this.EG())this.qG=F(this.Nl.ga,this.Jz,ta(this.Ju,this))}w(Zw,$c);f=Zw.prototype;f.EG=Ww(function(){var a=this.isSupported(),b="hidden"!=this.Kq();return a?b?((yh()||"")+"visibilitychange").toLowerCase():"visibilitychange":null});f.Kq=Ww(function(){return zh("hidden",this.Nl.ga)});f.qI=Ww(function(){return zh("visibilityState",this.Nl.ga)});f.isSupported=function(){return!!this.Kq()};
f.Ju=function(){var a=this.isSupported()?this.Nl.ga[this.qI()]:null,a=new $w(!!this.Nl.ga[this.Kq()],a);this.dispatchEvent(a)};f.f=function(){Vc(this.qG);Zw.d.f.call(this)};function $w(a,b){Ec.call(this,"visibilitychange");this.hidden=a;this.visibilityState=b}w($w,Ec);function ax(a){Ps.call(this);this.iC(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.bx.bind(this));this.Gf=a;bx(this);this.Gn()}w(ax,Ps);v("xiv.ui.Thumbnail",ax);ax.ID_PREFIX="xiv.ui.Thumbnail";ax.CSS_SUFFIX={};ax.prototype.bx=function(){var a=Mh("img",Ps.CSS.wi,this.Le()),a=a[0];a.src=this.$a.src};ax.prototype.Gn=function(){ax.d.Gn.call(this);N(this.Le(),ax.Pm)};
function bx(a){var b="",c=a.Gf.oe;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=c.Name)b=c.Name;else if(null!=a.Gf.li)var d=a.Gf.li.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");D(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.ap(e)}ax.prototype.mI=function(){return this.Gf};ax.prototype.f=function(){ax.d.f.call(this);this.Gf.g();delete this.Gf};
v("xiv.ui.Thumbnail.ID_PREFIX",ax.ID_PREFIX);v("xiv.ui.Thumbnail.CSS_SUFFIX",ax.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.updateHoverable",ax.prototype.bx);v("xiv.ui.Thumbnail.prototype.createHoverable",ax.prototype.Gn);v("xiv.ui.Thumbnail.prototype.getViewable",ax.prototype.mI);v("xiv.ui.Thumbnail.prototype.disposeInternal",ax.prototype.f);function cx(){V.call(this);this.Af=new Ew;this.tg=new Ew;this.Af.Xt=this.Yt.bind(this);F(this.Af,"dragover",this.Gv.bind(this));F(this.Af,"dragend",this.Fv.bind(this));F(this.Af,"dragout",this.WJ.bind(this));F(this.tg,"drop",this.YJ.bind(this));var a=this.Af,b=this.tg;a.Qw.push(b);b.jr=!0;a.ir=!0;this.tg.ra();this.Af.ra()}w(cx,ov);v("xiv.ui.ThumbnailGallery",cx);cx.ID_PREFIX="xiv.ui.ThumbnailGallery";cx.CSS_SUFFIX={Us:"thumbnail-dragging"};var dx="THUMBNAIL_DRAGGER_"+B(),ex=dx+"_FADER"+B();f=cx.prototype;
f.Af=null;f.tg=null;f.Wi=function(a,b){var c=this.Hn(a);this.El(c,b);return c};f.Hn=function(a){var b=new ax(a);F(b,"B",function(){this.dispatchEvent({type:"da",Nj:b})}.bind(this));return b};f.El=function(a,b){cx.d.El.call(this,a,b);var c=a.Le();c&&this.Af.ak(c)};f.fz=function(){Hn(this.tg)};f.Cy=function(a){this.tg.ak(a)};f.Dy=function(a){D(a,function(a){this.Cy(a)}.bind(this))};f.aI=function(a){return this.Xb[a.id]};
f.Qt=function(){null!=this.Af&&(Hn(this.Af),this.Af.g());null!=this.tg&&(Hn(this.tg),this.tg.g())};f.Yt=function(a){a=ri(a,"div",ax.Ec).id.replace("HOVERABLE_","");if(a in this.Xb)return this.Xb[a].setActive(!0,!0),a=this.Xb[a].a().cloneNode(!0),a.setAttribute("id",dx+a.id),N(a,cx.CSS.Us),a};f.Gv=function(a){this.dispatchEvent({type:"ba",Sw:a.Pl.element})};f.WJ=function(a){this.dispatchEvent({type:"ca",Sw:a.Pl.element})};
f.Fv=function(){var a=Oh(cx.CSS.Us);D(a,function(a){zk(a,300,function(){R(a)})});null!=a[0]&&this.Xb[a[0].id.replace(dx,"")].setActive(!1,!0)};f.YJ=function(a){var b=Ph(cx.CSS.Us);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);R(b);a.Pl.element&&this.dispatchEvent({type:"ea",Nj:this.Xb[b.id.replace(dx,"")],eM:a.Pl.element})}};f.f=function(){cx.d.f.call(this);this.Qt()};
v("xiv.ui.ThumbnailGallery.EventType",{Os:"$",nN:"aa",gO:"ba",fO:"ca",dO:"da",hO:"ea"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",cx.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",cx.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",dx);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",ex);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",cx.prototype.Wi);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",cx.prototype.Hn);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",cx.prototype.El);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",cx.prototype.fz);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",cx.prototype.Cy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",cx.prototype.Dy);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",cx.prototype.aI);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",cx.prototype.f);function fx(){var a=ti(Ih());a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()};function gx(a,b,c,d){$c.call(this);this.qb=c||Ih();this.Ql=a;this.uf=[];this.cM=b?b:hx;this.lD=!!d;this.hf()}w(gx,$c);var hx=0;f=gx.prototype;
f.hf=function(){this.Ql.className="goog-tabpane";for(var a=[],b=ci(this.Ql);b;)a.push(b),b=ei(b);this.de=this.qb.v("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.nc=this.qb.v("div","goog-tabpane-cont");this.Ql.appendChild(this.nc);b=this.Ql;switch(this.cM){case hx:b.insertBefore(this.de,this.nc);b.insertBefore(ix(this),this.nc);dl(b,"goog-tabpane-top");break;case 1:b.appendChild(this.de);b.appendChild(ix(this));dl(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.de,this.nc);dl(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.de,this.nc);dl(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.de.tabIndex=0;F(this.de,this.lD?"mousedown":"click",this.Er,!1,this);F(this.de,"keydown",this.Fr,!1,this);for(var c=0;b=a[c];c++)jx(this,new kx(b))};
function ix(a){var b=Ih(void 0),c=null,d=b.ga;E&&d.createStyleSheet?(c=d.createStyleSheet(),Wi(c)):(d=Nh(b.ga,"head",void 0,void 0)[0],d||(c=Nh(b.ga,"body",void 0,void 0)[0],d=b.v("head"),c.parentNode.insertBefore(d,c)),c=b.v("style"),Wi(c),b.appendChild(d,c));return a.qb.v("div","goog-tabpane-clear")}f.f=function(){gx.d.f.call(this);Uc(this.de,this.lD?"mousedown":"click",this.Er,!1,this);Uc(this.de,"keydown",this.Fr,!1,this);delete this.Ql;this.nc=this.de=null};
function jx(a,b){b.Ra&&b.Ra!=a&&b.Ra instanceof gx&&lx(b.Ra,b);var c=a.uf.length;ca(void 0)&&void 0!=c?(c=void 0,a.uf.splice(c,0,b),a.de.insertBefore(b.bj,a.de.childNodes[c])):(a.uf.push(b),a.de.appendChild(b.bj));b.Xo(a,c);a.hh||(a.hh=b,a.dispatchEvent(new mx("change",a,a.hh)));a.nc.appendChild(b.nc);nx(b,b==a.hh);for(var d=c+1;c=a.uf[d];d++)c.ho=d}function lx(a,b){u(b)&&(b=a.uf[b]);a.uf.splice(b.ho,1);b.Xo(null);R(b.bj);R(b.nc);for(var c,d=0;c=a.uf[d];d++)c.Xo(a,d)}
function ox(a,b){if(0<=b&&b<a.uf.length){var c=a.uf[b];!c.isEnabled()||a.hh&&c==a.hh||(nx(a.hh,!1),nx(c,!0),a.hh=c,a.dispatchEvent(new mx("change",a,a.hh)))}}f.Ja=function(){return this.nc||null};f.a=function(){return this.Ql||null};f.Er=function(a){for(var b=a.target;b!=this.de;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);ox(this,c);break}b=b.parentNode}a.preventDefault()};
f.Fr=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.hh.ho-1;ox(this,0>a?this.uf.length-1:a);break;case 39:a=this.hh.ho+1;ox(this,a>=this.uf.length?0:a);break;case 36:ox(this,0);break;case 35:ox(this,this.uf.length-1)}};function kx(a,b,c){var d,e;if(r(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=ci(a))d=oi(b),b.parentNode.removeChild(b);e=a}this.qb=c||Ih();this.nc=e||this.qb.v("div");this.bj=this.qb.v("li",null,d);this.ho=this.Ra=null;this.Kc=!0}f=kx.prototype;
f.Id=function(){return oi(this.bj)};f.qe=function(a){ii(this.bj,a)};f.wA=function(){return this.bj};f.Ja=function(){return this.nc};f.getParent=function(){return this.Ra};f.sc=function(a){this.Kc=a;this.bj.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Kc};function nx(a,b){a.isEnabled()&&(a.nc.style.display=b?"":"none",a.bj.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.Xo=function(a,b){this.Ra=a;this.ho=ca(b)?b:null};
function mx(a,b,c){Ec.call(this,a,b);this.page=c}w(mx,Ec);function Z(a){V.call(this);if(null!=a){var b=a;if(!r(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==px.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||qx}w(Z,V);v("nrg.ui.Tabs",Z);var px=["TOP","BOTTOM","LEFT","RIGHT"],qx=px[0];Z.ID_PREFIX="nrg.ui.Tabs";Z.CSS_SUFFIX={fc:"tab",Ai:"tab-active",Ff:"page",qE:"page-content",Dp:"page-active",mb:"icon",fl:"icon-active",QD:"icon-content",NN:"scrollgallery"};
function rx(a,b,c,d,e){this.Ej=!1;this.TITLE=a;this.fc=b;this.mb=c;this.Ff=d;this.wh=e}f=Z.prototype;f.qf=0;f.sm=0;f.Md=null;f.n=function(a){Z.d.n.call(this,a);this.wk=new gx(this.a());this.M=[];N(this.a(),Z.Ec)};f.WH=function(){return this.M.length};f.jH=function(){return this.qf};f.JH=function(){return this.sm};f.Nq=function(){var a=[];D(this.M,function(b){a.push(b.fc)});return a};f.Oq=function(){var a=[];D(this.M,function(b){a.push(b.Ff)});return a};
f.XH=function(){var a=[];D(this.M,function(b){a.push(b.mb)});return a};f.yF=function(a){D(a,function(a){this.Dl(a)}.bind(this))};f.reset=function(){for(var a=this.M.length;0<a;)lx(this.wk,a-1),a--;this.hP()};f.Ow=function(a){if(null==this.M)return!1;for(var b=0,c=this.M.length;b<c;b++)if(this.M[b].TITLE==a)return!0;return!1};
f.Dl=function(a){this.M=null!=this.M?this.M:[];if(this.Ow(a))throw Error(a+" is an already existing tab!");var b;b=O("div",{id:"Tab_"+B(),"class":Z.CSS.fc,title:a});Zh(this.a(),b);var c=O("div",{id:"TabIcon_"+B(),"class":Z.CSS.mb}),d=O("div",{"class":Z.CSS.QD},a);Zh(c,d);Zh(b,c);d=O("div",{id:"TabPage_"+B(),"class":Z.CSS.Ff,label:a});rk(d,pk(this.a(),"width"));Zh(this.a().parentNode,d);var e=new kx(d,a);jx(this.wk,e);this.M.push(new rx(a,b,c,d,e));sx(this);tx(this);ux(this);this.kk();this.setActive(0);
this.k()};f.GC=function(a,b){this.Ow(a)||this.Dl(a);var c;a:if(null!=this.M){c=0;for(var d=this.M.length;c<d;c++)if(this.M[c].TITLE==a){c=this.M[c];break a}c=void 0}else c=!1;b instanceof Rs?(d=b,c.Ff.appendChild(b.a())):(d=new Rs,d.n(c.Ff),d.ff(b));N(d.a(),Z.CSS.qE);this.k()};function sx(a){D(a.M,function(a){I(a.fc)}.bind(a))}function tx(a){D(a.M,function(a,c){F(a.fc,"click",function(){this.kk();this.setActive(c)}.bind(this))}.bind(a))}
function ux(a){D(a.M,function(a,c){vx(this,c);wx(this,c)}.bind(a))}function vx(a,b){F(a.M[b].fc,"mouseover",function(){!0!==this.M[b].Ej&&(N(this.M[b].fc,Z.CSS.Ai),N(this.M[b].fc,wj(Z.CSS.Ai,this.orientation)),N(this.M[b].mb,Z.CSS.fl))}.bind(a))}function wx(a,b){F(a.M[b].fc,"mouseout",function(){!0!==this.M[b].Ej&&(Ch(this.M[b].fc,Z.CSS.Ai),Ch(this.M[b].fc,wj(Z.CSS.Ai,this.orientation)),Ch(this.M[b].mb,Z.CSS.fl))}.bind(a))}
f.setActive=function(a){this.M[a].Ej=!0;this.sm=this.qf;this.qf=a;ox(this.wk,a);N(this.M[a].fc,Z.CSS.Ai);N(this.M[a].fc,wj(Z.CSS.Ai,this.orientation));N(this.M[a].Ff,Z.CSS.Dp);N(this.M[a].Ff,wj(Z.CSS.Dp,this.orientation));N(this.M[a].mb,Z.CSS.fl);N(this.M[a].mb,wj(Z.CSS.fl,this.orientation))};
f.zz=function(a){this.M[a].Ej=!1;ox(this.wk,0);Ch(this.M[a].fc,Z.CSS.Ai);Ch(this.M[a].fc,wj(Z.CSS.Ai,this.orientation));Ch(this.M[a].Ff,Z.CSS.Dp);Ch(this.M[a].Ff,wj(Z.CSS.Dp,this.orientation));Ch(this.M[a].mb,Z.CSS.fl);Ch(this.M[a].mb,wj(Z.CSS.fl,this.orientation))};f.kk=function(){D(this.M,function(a,b){this.zz(b)}.bind(this))};
f.k=function(){if(this.a().parentNode){N(this.a(),Z.Ec);N(this.a(),wj(Z.Ec,this.orientation));D(this.M,function(a){N(a.fc,wj(Z.CSS.fc,this.orientation));N(a.mb,wj(Z.CSS.mb,this.orientation));N(a.Ff,wj(Z.CSS.Ff,this.orientation))}.bind(this));switch(this.orientation){case "TOP":xx(this);break;case "BOTTOM":this.$P();break;case "RIGHT":yx(this)}if(0<this.M.length){var a=T(this.M[0].fc);0<a.width&&0<a.height&&(this.Md=a)}}};
function yx(a){D(a.M,function(a){this.a().parentNode&&rk(a.fc,{height:(100/this.M.length).toString()+"%"})}.bind(a))}function xx(a){var b;D(a.M,function(a,d){this.a().parentNode&&(b=100/this.M.length,rk(a.fc,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function zx(a){D(a.M,function(a){C(a,function(c,d){I(c);c.f?c.g():c.g&&c.g();delete c;delete a[d]});sb(a);delete a});Jb(a.M)}
f.f=function(){Z.d.f.call(this);D(this.Nq(),function(a){I(a)}.bind(this));zx(this);delete this.M;I(this.wk);this.wk.g();delete this.wk;delete this.qf;delete this.sm;delete this.YP;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",px);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",qx);v("nrg.ui.Tabs.ID_PREFIX",Z.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",Z.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",rx);v("nrg.ui.Tabs.prototype.tabSize",Z.prototype.Md);v("nrg.ui.Tabs.prototype.render",Z.prototype.n);
v("nrg.ui.Tabs.prototype.getTabCount",Z.prototype.WH);v("nrg.ui.Tabs.prototype.getLastActiveTab",Z.prototype.jH);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",Z.prototype.JH);v("nrg.ui.Tabs.prototype.getTabElements",Z.prototype.Nq);v("nrg.ui.Tabs.prototype.getTabPages",Z.prototype.Oq);v("nrg.ui.Tabs.prototype.getTabIcons",Z.prototype.XH);v("nrg.ui.Tabs.prototype.addTabs",Z.prototype.yF);v("nrg.ui.Tabs.prototype.reset",Z.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",Z.prototype.Ow);
v("nrg.ui.Tabs.prototype.addTab",Z.prototype.Dl);v("nrg.ui.Tabs.prototype.setTabPageContents",Z.prototype.GC);v("nrg.ui.Tabs.prototype.setActive",Z.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",Z.prototype.zz);v("nrg.ui.Tabs.prototype.deactivateAll",Z.prototype.kk);v("nrg.ui.Tabs.prototype.updateStyle",Z.prototype.k);v("nrg.ui.Tabs.prototype.disposeInternal",Z.prototype.f);function Ax(a){Z.call(this,a)}w(Ax,Z);v("nrg.ui.ZipTabs",Ax);Ax.ID_PREFIX="nrg.ui.ZipTabs";f=Ax.prototype;f.n=function(a){Ax.d.n.call(this,a);N(this.a(),wj(Ax.Ec,this.orientation));this.Fc=new Wq(this.a(),this.orientation);Bx(this);a=Oh("goog-tabpane-tabs",this.a());D(a,function(a){a.style.visibility="hidden"})};f.mi=function(a){this.Fc.mi(a);this.k()};f.P=function(){return this.Fc};
function Bx(a){F(a.Fc,"resize",function(a){this.Kh();if(null!=this.Md){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.Md.height-this.u.height)?this.kk():this.setActive(this.qf);break;case "LEFT":case "RIGHT":var c=36>=Math.abs(this.Md.width-this.u.width)&&this.oq;4>=Math.abs(this.Md.width-this.u.width)||c?this.kk():this.setActive(this.qf)}this.dispatchEvent({type:"resize",size:a.size,Ue:a.Ue})}}.bind(a))}f.oq=!1;
f.ac=function(a,b,c){this.k();a?(this.setActive(b||0),this.Fc.xf(this.orientation,"MAX",null,c)):(this.kk(),this.Fc.xf(this.orientation,"MIN",null,c))};f.k=function(){Ax.d.k.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.Md&&this.Fc.uC(this.Md.height);break;case "LEFT":case "RIGHT":null!=this.Md&&this.Fc.wC(this.Md.width)}this.Fc.update()};
f.Dl=function(a){Ax.d.Dl.call(this,a);1==this.Nq().length&&this.k();D(this.Nq(),function(a){F(a,"click",function(){if(null!=this.Md)switch(this.k(),this.Kh(),this.orientation){case "BOTTOM":4>=Math.abs(this.u.height-this.Md.height)?(this.setActive(this.qf),this.Fc.xf("BOTTOM","MAX",void 0)):this.qf==this.sm&&this.Fc.xf("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.u.height-this.Md.height)?(this.setActive(this.qf),this.Fc.xf("TOP","MAX",void 0)):this.qf==this.sm&&this.Fc.xf("TOP","MIN",
void 0);break;case "RIGHT":null!=this.Md&&(4>=Math.abs(this.u.width-this.Md.width)?(this.oq=!1,this.setActive(this.qf),this.Fc.xf("RIGHT","MAX",void 0)):this.qf==this.sm&&(this.oq=!0,this.Fc.xf("RIGHT","MIN",void 0)))}}.bind(this))}.bind(this));this.kk();this.k()};f.f=function(){Ax.d.f.call(this);I(this.Fc);this.Fc.g();delete this.Fc;delete this.oq};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{DD:"fa"});
v("nrg.ui.ZipTabs.ID_PREFIX",Ax.ID_PREFIX);v("nrg.ui.ZipTabs.prototype.render",Ax.prototype.n);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",Ax.prototype.mi);v("nrg.ui.ZipTabs.prototype.getResizable",Ax.prototype.P);v("nrg.ui.ZipTabs.prototype.setExpanded",Ax.prototype.ac);v("nrg.ui.ZipTabs.prototype.updateStyle",Ax.prototype.k);v("nrg.ui.ZipTabs.prototype.addTab",Ax.prototype.Dl);v("nrg.ui.ZipTabs.prototype.disposeInternal",Ax.prototype.f);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function Cx(){V.call(this);this.$c=Cx.ModalStates.Gj}w(Cx,V);v("xiv.ui.Modal",Cx);Cx.ModalStates={ye:"fullscreen",cf:"popup",Ks:"fullscreen-popup",Eg:"windowed",Gj:"demo",JD:"demp-fullscreen"};Cx.ID_PREFIX="xiv.ui.Modal";Cx.CSS_SUFFIX={Bp:"background",HM:"columnmenu",DN:"rowmenu",IM:"button",EN:"button",sE:"projecttab",tE:"projecttab-bounds",uE:"projecttab-dragger",vE:"projecttab-dragger-handle",mx:"addsubjects"};
function Dx(){var a={};C(Ex,function(b,c){a[c]=Cx.ID_PREFIX+"."+cb(b.key)+".Button"});var b=Sk(mb(a)),c={};C(a,function(a,e){c[e]=b[a];var h=wj(a);b[a].className=h});return c}var Ex={el:{key:"CLOSE",title:"Close XNAT Image Viewer."},ye:{key:"FULLSCREEN",title:"Enter full-screen mode."},cf:{key:"POPUP",title:"Popup to new window."},Eg:{key:"WINDOWED",title:"Exit full-screen mode."}};f=Cx.prototype;f.co=29;f.Ds=29;f.yr=320;f.zr=320;f.Io=null;f.kI=function(){return this.Ca};f.bI=function(){return this.T};
f.LH=function(){return this.Ob};f.IH=function(){return this.$.cf};f.JG=function(){return this.$.el};f.$G=function(){return this.$.ye};f.n=function(a){Cx.d.n.call(this,a);this.YA();this.Ca.Tu(null,!1);this.tc(this.$c)};
f.tc=function(a){null!=this.$c&&(this.Tr=this.$c);this.$c=a;null!=this.Tr&&Ch(this.a(),wj(this.constructor.Ec,this.Tr));N(this.a(),wj(this.constructor.Ec,this.$c));this.$c==Cx.ModalStates.Gj?(this.$.ye.style.visibility="hidden",this.$.Eg.style.visibility="hidden"):this.$c==Cx.ModalStates.Eg?(this.$.ye.style.visibility="visible",this.$.Eg.style.visibility="hidden"):this.$c==Cx.ModalStates.cf?(this.$.cf.style.visibility="hidden",this.$.el.style.visibility="hidden",this.$.ye.style.visibility="visible",
this.$.Eg.style.visibility="hidden"):this.$c==Cx.ModalStates.Ks?(this.$.cf.style.visibility="hidden",this.$.ye.style.visibility="hidden",this.$.Eg.style.visibility="visible"):this.$c==Cx.ModalStates.ye&&(this.$.cf.style.visibility="visible",this.$.ye.style.visibility="hidden",this.$.Eg.style.visibility="visible");this.k()};f.$l=function(){return this.$c};f.mj=function(){this.T.loop(function(a){a.setActive(!1);this.Ca.loop(function(b){-1<b.vb.indexOf(a.Gf)&&a.setActive(!0)})}.bind(this))};
f.Sy=function(){Fx(this);this.Hb=null!=this.Hb?this.Hb:[];this.pb=null!=this.pb?this.pb:new gk;Gx(this);Hx(this);F(this.pb,"end",this.jK.bind(this));D(this.Hb,function(a){this.pb.add(a)}.bind(this));this.pb.play();this.mj()};f.jK=function(){D(this.Hb,function(a){this.pb.remove(a);I(a);a.be();a.g()}.bind(this));Jb(this.Hb);this.k();Ix(this)};function Ix(a){a.Ca.loop(function(a){0==a.a().style.opacity&&wk(a.a(),300)})}
function Gx(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.Hb.push(new Vj(b,[b.offsetLeft,b.offsetTop],[this.xa.Vb.Fg[d][e],this.xa.Vb.Ce[d][e]],300,uk))}.bind(a))}function Hx(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.Hb.push(new Wj(b,[b.offsetWidth,b.offsetHeight],[this.xa.Vb.Qj[d][e],this.xa.Vb.Qm[d][e]],300,uk))}.bind(a))}
function Fx(a){a.xa=null!=a.xa?a.xa:{};a.Kh();a.xa.pp={};a.xa.pp.Qj=Math.round(T(a.Ob.a()).width);a.xa.pp.Qm=Math.round(a.u.height-2*a.Ds);a.xa.pp.Ce=Math.round(a.Ds);Jx(a);Kx(a)}function Jx(a){a.xa.Vb={};a.xa.Vb.Qj=a.Ca.Tn();a.xa.Vb.Qm=a.Ca.Tn();a.Ca.loop(function(a,c,d,e,h){this.xa.Vb.Qj[c][d]=Math.round((this.u.width-this.xa.pp.Qj-this.co)/h-this.co);this.xa.Vb.Qm[c][d]=Math.round((this.u.height-(e+1)*this.co)/e)}.bind(a))}
function Kx(a){a.xa.Vb.Fg=a.Ca.Tn();a.xa.Vb.Ce=a.Ca.Tn();a.xa.Vb.GE=a.xa.pp.Qj+a.Ds;var b=0;a.Ca.loop(function(a,d,e){b=this.xa.Vb.GE+e*(this.xa.Vb.Qj[d][e]+this.Ds);this.xa.Vb.Fg[d][e]=b;this.xa.Vb.Ce[d][e]=d*(this.xa.Vb.Qm[d][e]+this.co);window.console.log();this.xa.Vb.Ce[d][e]+=this.co}.bind(a))}f.k=function(){Fx(this);this.Ob&&this.Ob.k();Lx(this);this.mj();this.T.k();this.T.dd()};
function Lx(a){a.Ca&&a.Ca.loop(function(a,c,d){rk(a.a(),{height:this.xa.Vb.Qm[c][d],width:this.xa.Vb.Qj[c][d],left:this.xa.Vb.Fg[c][d],top:this.xa.Vb.Ce[c][d]});a.k()}.bind(a))}
f.YA=function(){var a=O("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=Cx.CSS.Bp;this.a().appendChild(a);this.Ps=O("div");Zh(this.a(),this.Ps);N(this.Ps,Cx.CSS.tE);this.Ob=new Ax("RIGHT");this.Ob.n(this.a());N(this.Ob.a(),Cx.CSS.sE);this.T=new cx;this.T.Ew(!0);this.T.qw(this.a());var b;b=b||F;b(this.T,"R",this.JK.bind(this));b(this.T,"S",this.KK.bind(this));b(this.T,"da",this.DK.bind(this));b(this.T,"ba",this.GK.bind(this));b(this.T,"ca",this.FK.bind(this));b(this.T,"ea",this.IK.bind(this));
this.T.n(this.Ob.a());this.Ob.GC("Project Browser",this.T);this.Ob.mi(this.Ps);a=this.Ob.P().qd("RIGHT");N(a,Cx.CSS.uE);this.Ob.P().uk("RIGHT").xC(5);Zh(a,O("div",{id:nw.ID_PREFIX+"_DraggerHandle_"+B(),"class":Cx.CSS.vE}));this.Io=new Zw;F(this.Ob,"resize",this.dM.bind(this));F(this.Ob,"resize",this.k.bind(this));F(this.Ob,"resize_end",this.k.bind(this));this.Ca=new Fw;this.Ca.JC(this.a());var c;c=c||F;c(this.Ca,"X",this.Vv.bind(this));c(this.Ca,"Y",this.Uv.bind(this));c(this.Ca,"Z",this.tj.bind(this));
F(this.Ca,"W",this.VK.bind(this));Mx(this)};function Mx(a){a.$=Dx();C(a.$,function(a){Zh(this.a(),a)}.bind(a));Nx(a);a.$.el.innerHTML="<img src="+a.pj+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.$.ye.innerHTML="<img src="+a.pj+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.$.Eg.innerHTML="<img src="+a.pj+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.$.cf.innerHTML="<img src="+a.pj+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.qy=function(){this.Ih=O("div",{id:Cx.ID_PREFIX+"_addSubjects_"+B(),"class":Cx.CSS.mx},"+ Load all subjects in project");this.Ob.Oq()[0].appendChild(this.Ih);tk(this.Ih,Cx.CSS.mx+"-hovered");var a=this.Ob.Oq()[0],b=bi(a)[0];T(a);T(b);T(this.Ih);b.style.height="calc(100% - 70px)";F(this.Ih,"click",this.NJ.bind(this))};f.NJ=function(){this.dispatchEvent({type:"g"});zk(this.Ih,150,function(){Ox(this);var a=this.Ob.Oq()[0];bi(a)[0].setAttribute("style","");this.T.dd()}.bind(this))};
function Ox(a){null!=a.Ih&&(R(a.Ih),I(a.Ih),delete a.Ih)}f.dM=function(){var a=this.Io;a.Nl.ga[a.Kq()]&&this.Ob.P().uk("RIGHT").YC()};f.VK=function(){var a=Oh("xiv-ui-thumbnailgallery-thumbnail-dragging");D(a,function(a){R(a)});this.mj();window.console.log(this.T.tg.Hq());null!=this.T.tg.Hq()&&this.T.Af.dj({iP:!0})};f.TJ=function(){this.$c===Cx.ModalStates.ye&&fx()};
f.aK=function(){var a=this.a();a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();this.$c===Cx.ModalStates.cf?this.tc(Cx.ModalStates.Ks):this.tc(Cx.ModalStates.ye);this.k()};f.YK=function(){fx();this.tc(this.Tr)};function Nx(a){var b;b=b||F;b(a.$.ye,"click",a.aK.bind(a));b(a.$.Eg,"click",a.YK.bind(a));b(a.$.el,"click",a.TJ.bind(a))}
f.JK=function(a){this.Ca.Xs(a.Nj.Gf,function(a){a.hm()})};f.KK=function(a){this.Ca.Xs(a.Nj.Gf,function(a){a.mm||a.Jm()})};f.FK=function(a){this.Ca.Pq(a.Sw).Jm()};f.GK=function(a){this.Ca.Pq(a.Sw).hm()};f.DK=function(a){this.Ca.Ys()||(this.Ca.dA().load(a.Nj.Gf),this.mj())};f.IK=function(a){var b=this.Ca.Pq(a.eM);this.Ca.Ys()?b.Jm():(b.load(a.Nj.Gf),this.mj())};f.Vv=function(){this.mj()};f.Uv=function(){this.mj()};
f.tj=function(a){null!=a&&null!=a.BF?(a.AB&&D(a.AB,function(a){rk(a.a(),{opacity:0})}),this.Sy()):this.k();this.T.fz();this.T.Dy(this.Ca.zA())};f.f=function(){Cx.d.f.call(this);sb(this.xa);delete this.xa;this.iu(this.Hb);delete this.Hb;this.wq(this.pb);delete this.pb;this.xq(this.$);delete this.$;null!=this.Ca&&(I(this.Ca),this.Ca.g(),delete this.Ca);I(this.Ob);this.Ob.g();delete this.Ob;I(this.T);this.T.g();delete this.T;Ox(this);null!=this.Io&&(this.Io.g(),delete this.Io);delete this.$c;delete this.Tr};
v("xiv.ui.Modal.EventType",Cx.RM);v("xiv.ui.Modal.ID_PREFIX",Cx.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",Cx.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",Cx.prototype.kI);v("xiv.ui.Modal.prototype.getThumbnailGallery",Cx.prototype.bI);v("xiv.ui.Modal.prototype.getProjectTab",Cx.prototype.LH);v("xiv.ui.Modal.prototype.getPopupButton",Cx.prototype.IH);v("xiv.ui.Modal.prototype.getCloseButton",Cx.prototype.JG);v("xiv.ui.Modal.prototype.getFullScreenButton",Cx.prototype.$G);
v("xiv.ui.Modal.prototype.render",Cx.prototype.n);v("xiv.ui.Modal.prototype.setState",Cx.prototype.tc);v("xiv.ui.Modal.prototype.getState",Cx.prototype.$l);v("xiv.ui.Modal.prototype.highlightInUseThumbnails",Cx.prototype.mj);v("xiv.ui.Modal.prototype.animateModal",Cx.prototype.Sy);v("xiv.ui.Modal.prototype.updateStyle",Cx.prototype.k);v("xiv.ui.Modal.prototype.initSubComponents",Cx.prototype.YA);v("xiv.ui.Modal.prototype.addAddSubjectsToProjectTab",Cx.prototype.qy);
v("xiv.ui.Modal.prototype.disposeInternal",Cx.prototype.f);window["xiv.ui.Modal"]=Cx;window["xiv.ui.Modal.ModalStates"]=Cx.ModalStates;
//# sourceMappingURL=./xiv-min.js.map