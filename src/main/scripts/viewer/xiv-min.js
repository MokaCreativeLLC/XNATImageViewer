var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function ea(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function fa(){}function ga(a){a.ye=function(){return a.$C?a.$C:a.$C=new a}}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function h(a){return"array"==ha(a)}function ia(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"string"==typeof a}function ka(a){return"boolean"==typeof a}function la(a){return"number"==typeof a}function ma(a){return"function"==ha(a)}function na(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function oa(a){return a[pa]||(a[pa]=++qa)}
var pa="closure_uid_"+(1E9*Math.random()>>>0),qa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:ta;return ua.apply(null,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var xa=Date.now||function(){return+new Date};
function t(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.c=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.IS=function(a,c,g){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.UP=!0;A.ke=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.Nd=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.xH=0;this.jP=function(){return this.xH++}};function ya(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var za=window.SF;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),g=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+g)},g);a=c+g;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),g=new Uint8Array(d),k=a,l=0;k<c;++k,++l)g[l]=e[k];return d});t("$",za);
t("Function.prototype.bind",Function.prototype.bind);t("window.requestAnimationFrame",window.requestAnimationFrame);t("window.cancelAnimationFrame",window.cancelAnimationFrame);var Aa={},Ba;function Ca(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ca);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ca,Error);Ca.prototype.name="CustomError";function Da(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ea(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Fa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ga(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ha(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ia=/(\.\d+)|(\d+)|(\D+)/g;function Ka(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ia),d=b.toLowerCase().match(Ia),e=Math.min(c.length,d.length),g=0;g<e;g++){var k=c[g],l=d[g];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function La(a){if(!Ma.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Na,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Oa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Pa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ra,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Sa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Ta,"&#0;"));return a}var Na=/&/g,Oa=/</g,Pa=/>/g,Ra=/"/g,Sa=/'/g,Ta=/\x00/g,Ma=/[\x00&<>"']/;
function Ua(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Va(a){return Array.prototype.join.call(arguments,"")}
function Wa(a,b){for(var c=0,d=Ha(String(a)).split("."),e=Ha(String(b)).split("."),g=Math.max(d.length,e.length),k=0;0==c&&k<g;k++){var l=d[k]||"",n=e[k]||"",m=/(\d*)(\D*)/g,q=/(\d*)(\D*)/g;do{var p=m.exec(l)||["","",""],r=q.exec(n)||["","",""];if(0==p[0].length&&0==r[0].length)break;c=Xa(0==p[1].length?0:parseInt(p[1],10),0==r[1].length?0:parseInt(r[1],10))||Xa(0==p[2].length,0==r[2].length)||Xa(p[2],r[2])}while(0==c)}return c}function Xa(a,b){return a<b?-1:a>b?1:0}
var Ya=2147483648*Math.random()|0;function C(){return"goog_"+Ya++}function Za(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function $a(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function ab(a){var b=ja(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function bb(a,b){b.unshift(a);Ca.call(this,Fa.apply(null,b));b.shift()}w(bb,Ca);bb.prototype.name="AssertionError";function cb(a,b){throw new bb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var db="closure_listenable_"+(1E6*Math.random()|0);function eb(a){return!(!a||!a[db])}var gb=0;function hb(a,b,c,d,e){this.Ll=a;this.lt=null;this.src=b;this.type=c;this.Ko=!!d;this.rs=e;this.key=++gb;this.Kn=this.Hr=!1}function ib(a){a.Kn=!0;a.Ll=null;a.lt=null;a.src=null;a.rs=null};function I(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function jb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function kb(a){var b=0,c;for(c in a)b++;return b}function lb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function mb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function nb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function ob(){var a=pb,b;for(b in a)return!1;return!0}function qb(a){for(var b in a)delete a[b]}function sb(a,b){b in a&&delete a[b]}
function tb(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function ub(a){var b={},c;for(c in a)b[c]=a[c];return b}var vb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<vb.length;g++)c=vb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function xb(a){var b=arguments.length;if(1==b&&h(arguments[0]))return xb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var yb=Array.prototype,zb=yb.indexOf?function(a,b,c){return yb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ja(a))return ja(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},N=yb.forEach?function(a,b,c){yb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},Ab=yb.filter?function(a,b,c){return yb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],
g=0,k=ja(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[g++]=n)}return e},Bb=yb.map?function(a,b,c){return yb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=ja(a)?a.split(""):a,k=0;k<d;k++)k in g&&(e[k]=b.call(c,g[k],k,a));return e},Cb=yb.some?function(a,b,c){return yb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1},Db=yb.every?function(a,b,c){return yb.every.call(a,b,
c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return!1;return!0};function Eb(a){var b;a:{b=Fb;for(var c=a.length,d=ja(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:ja(a)?a.charAt(b):a[b]}function Gb(a,b){return 0<=zb(a,b)}function Hb(a){if(!h(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ib(a,b){Gb(a,b)||a.push(b)}
function Kb(a,b){var c=zb(a,b),d;(d=0<=c)&&yb.splice.call(a,c,1);return d}function Lb(a){return yb.concat.apply(yb,arguments)}function Mb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Nb(a,b,c,d){yb.splice.apply(a,Ob(arguments,1))}function Ob(a,b,c){return 2>=arguments.length?yb.slice.call(a,b):yb.slice.call(a,b,c)};function Pb(a){this.src=a;this.Sc={};this.Hq=0}f=Pb.prototype;f.add=function(a,b,c,d,e){var g=a.toString();a=this.Sc[g];a||(a=this.Sc[g]=[],this.Hq++);var k=Qb(a,b,d,e);-1<k?(b=a[k],c||(b.Hr=!1)):(b=new hb(b,this.src,g,!!d,e),b.Hr=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Sc))return!1;var e=this.Sc[a];b=Qb(e,b,c,d);return-1<b?(ib(e[b]),yb.splice.call(e,b,1),0==e.length&&(delete this.Sc[a],this.Hq--),!0):!1};
function Rb(a,b){var c=b.type;if(!(c in a.Sc))return!1;var d=Kb(a.Sc[c],b);d&&(ib(b),0==a.Sc[c].length&&(delete a.Sc[c],a.Hq--));return d}f.Xf=function(a){a=a&&a.toString();var b=0,c;for(c in this.Sc)if(!a||c==a){for(var d=this.Sc[c],e=0;e<d.length;e++)++b,ib(d[e]);delete this.Sc[c];this.Hq--}return b};f.hp=function(a,b,c,d){a=this.Sc[a.toString()];var e=-1;a&&(e=Qb(a,b,c,d));return-1<e?a[e]:null};
f.ss=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return jb(this.Sc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].Ko!=b))return!0;return!1})};function Qb(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e];if(!g.Kn&&g.Ll==b&&g.Ko==!!c&&g.rs==d)return e}return-1};var Tb;a:{var Ub=ba.navigator;if(Ub){var Vb=Ub.userAgent;if(Vb){Tb=Vb;break a}}Tb=""}function Wb(a){return-1!=Tb.indexOf(a)}function Xb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Yb(){return Wb("Opera")||Wb("OPR")}function Zb(){return Wb("Trident")||Wb("MSIE")}function $b(){return Wb("Safari")&&!Wb("Chrome")&&!Wb("CriOS")&&!Wb("Android")}
function ac(){var a=Tb;if(Zb()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Yb())return a=Xb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Xb(a);return a[2]&&a[2][1]?a[2][1]:""};var bc,cc,ec;function fc(){return ba.navigator||null}var gc=Yb(),hc=Zb(),ic=Wb("Gecko")&&-1==Tb.toLowerCase().indexOf("webkit")&&!(Wb("Trident")||Wb("MSIE")),jc=-1!=Tb.toLowerCase().indexOf("webkit"),kc,lc=fc();kc=lc&&lc.platform||"";bc=-1!=kc.indexOf("Mac");cc=-1!=kc.indexOf("Win");ec=-1!=kc.indexOf("Linux");var mc=!!fc()&&-1!=(fc().appVersion||"").indexOf("X11");function nc(){var a=ba.document;return a?a.documentMode:void 0}
var oc=function(){var a="",b;if(gc&&ba.opera)return a=ba.opera.version,ma(a)?a():a;ic?b=/rv\:([^\);]+)(\)|;)/:hc?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:jc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Tb))?a[1]:"");return hc&&(b=nc(),b>parseFloat(a))?String(b):a}(),pc={};function qc(a){return pc[a]||(pc[a]=0<=Wa(oc,a))}function rc(a){return hc&&sc>=a}var tc=ba.document,sc=tc&&hc?nc()||("CSS1Compat"==tc.compatMode?parseInt(oc,10):5):void 0;var uc=!hc||rc(9),vc=!hc||rc(9),wc=hc&&!qc("9");!jc||qc("528");ic&&qc("1.9b")||hc&&qc("8")||gc&&qc("9.5")||jc&&qc("528");ic&&!qc("8")||hc&&qc("9");function xc(){0!=yc&&(zc[oa(this)]=this)}var yc=0,zc={};xc.prototype.ql=!1;xc.prototype.g=function(){if(!this.ql&&(this.ql=!0,this.e(),0!=yc)){var a=oa(this);delete zc[a]}};function Ac(a,b){a.Sp||(a.Sp=[]);a.Sp.push(ca(void 0)?ua(b,void 0):b)}xc.prototype.e=function(){if(this.Sp)for(;this.Sp.length;)this.Sp.shift()()};function Bc(a){a&&"function"==typeof a.g&&a.g()}function Cc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ia(d)?Cc.apply(null,d):Bc(d)}};function Dc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Sg=!1;this.aq=!0}Dc.prototype.e=function(){};Dc.prototype.g=function(){};Dc.prototype.stopPropagation=function(){this.Sg=!0};Dc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.aq=!1};function Ec(a){a.preventDefault()};function Gc(a){Gc[" "](a);return a}Gc[" "]=fa;function Hc(a,b){Dc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Cx=!1;this.Qc=null;a&&this.ra(a,b)}w(Hc,Dc);var Ic=[1,4,2];f=Hc.prototype;
f.ra=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(ic){var e;a:{try{Gc(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=jc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=jc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Cx=bc?a.metaKey:a.ctrlKey;this.state=a.state;this.Qc=a;a.defaultPrevented&&this.preventDefault()};function Jc(a){return(uc?0==a.Qc.button:"click"==a.type?!0:!!(a.Qc.button&Ic[0]))&&!(jc&&bc&&a.ctrlKey)}
f.stopPropagation=function(){Hc.c.stopPropagation.call(this);this.Qc.stopPropagation?this.Qc.stopPropagation():this.Qc.cancelBubble=!0};f.preventDefault=function(){Hc.c.preventDefault.call(this);var a=this.Qc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,wc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.sJ=function(){return this.Qc};f.e=function(){};var Kc="closure_lm_"+(1E6*Math.random()|0),Lc={},Mc=0;function P(a,b,c,d,e){if(h(b)){for(var g=0;g<b.length;g++)P(a,b[g],c,d,e);return null}c=Nc(c);return eb(a)?a.s(b,c,d,e):Oc(a,b,c,!1,d,e)}function Oc(a,b,c,d,e,g){if(!b)throw Error("Invalid event type");var k=!!e,l=Pc(a);l||(a[Kc]=l=new Pb(a));c=l.add(b,c,d,e,g);if(c.lt)return c;d=Qc();c.lt=d;d.src=a;d.Ll=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Rc(b.toString()),d);Mc++;return c}
function Qc(){var a=Sc,b=vc?function(c){return a.call(b.src,b.Ll,c)}:function(c){c=a.call(b.src,b.Ll,c);if(!c)return c};return b}function Tc(a,b,c,d,e){if(h(b)){for(var g=0;g<b.length;g++)Tc(a,b[g],c,d,e);return null}c=Nc(c);return eb(a)?a.zw(b,c,d,e):Oc(a,b,c,!0,d,e)}function Uc(a,b,c,d,e){if(h(b))for(var g=0;g<b.length;g++)Uc(a,b[g],c,d,e);else c=Nc(c),eb(a)?a.rb(b,c,d,e):a&&(a=Pc(a))&&(b=a.hp(b,c,!!d,e))&&Vc(b)}
function Vc(a){if(la(a)||!a||a.Kn)return!1;var b=a.src;if(eb(b))return Rb(b.Ff,a);var c=a.type,d=a.lt;b.removeEventListener?b.removeEventListener(c,d,a.Ko):b.detachEvent&&b.detachEvent(Rc(c),d);Mc--;(c=Pc(b))?(Rb(c,a),0==c.Hq&&(c.src=null,b[Kc]=null)):ib(a);return!0}function Wc(a){if(a)if(eb(a))a.Ff&&a.Ff.Xf(void 0);else if(a=Pc(a)){var b=0,c;for(c in a.Sc)for(var d=a.Sc[c].concat(),e=0;e<d.length;++e)Vc(d[e])&&++b}}
function Xc(a,b){if(eb(a))return a.ss(b,void 0);var c=Pc(a);return!!c&&c.ss(b,void 0)}function Rc(a){return a in Lc?Lc[a]:Lc[a]="on"+a}function Yc(a,b,c,d){var e=1;if(a=Pc(a))if(b=a.Sc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var g=b[a];g&&g.Ko==c&&!g.Kn&&(e&=!1!==Zc(g,d))}return Boolean(e)}function Zc(a,b){var c=a.Ll,d=a.rs||a.src;a.Hr&&Vc(a);return c.call(d,b)}
function Sc(a,b){if(a.Kn)return!0;if(!vc){var c=b||ea("window.event"),d=new Hc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var g=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){g=!0}if(g||void 0==c.returnValue)c.returnValue=!0}c=[];for(g=d.currentTarget;g;g=g.parentNode)c.push(g);for(var g=a.type,l=c.length-1;!d.Sg&&0<=l;l--)d.currentTarget=c[l],e&=Yc(c[l],g,!0,d);for(l=0;!d.Sg&&l<c.length;l++)d.currentTarget=c[l],e&=Yc(c[l],g,!1,d)}return e}return Zc(a,new Hc(b,this))}
function Pc(a){a=a[Kc];return a instanceof Pb?a:null}var $c="__closure_events_fn_"+(1E9*Math.random()>>>0);function Nc(a){return ma(a)?a:a[$c]||(a[$c]=function(b){return a.handleEvent(b)})};function ad(){xc.call(this);this.Ff=new Pb(this);this.LH=this;this.ht=null}w(ad,xc);ad.prototype[db]=!0;f=ad.prototype;f.Tx=function(a){this.ht=a};f.addEventListener=function(a,b,c,d){P(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.ht;if(c)for(b=[];c;c=c.ht)b.push(c);var c=this.LH,d=a.type||a;if(ja(a))a=new Dc(a,c);else if(a instanceof Dc)a.target=a.target||c;else{var e=a;a=new Dc(d,c);wb(a,e)}var e=!0,g;if(b)for(var k=b.length-1;!a.Sg&&0<=k;k--)g=a.currentTarget=b[k],e=bd(g,d,!0,a)&&e;a.Sg||(g=a.currentTarget=c,e=bd(g,d,!0,a)&&e,a.Sg||(e=bd(g,d,!1,a)&&e));if(b)for(k=0;!a.Sg&&k<b.length;k++)g=a.currentTarget=b[k],e=bd(g,d,!1,a)&&e;return e};
f.e=function(){ad.c.e.call(this);this.Ff&&this.Ff.Xf(void 0);this.ht=null};f.s=function(a,b,c,d){return this.Ff.add(String(a),b,!1,c,d)};f.zw=function(a,b,c,d){return this.Ff.add(String(a),b,!0,c,d)};f.rb=function(a,b,c,d){return this.Ff.remove(String(a),b,c,d)};function bd(a,b,c,d){b=a.Ff.Sc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,g=0;g<b.length;++g){var k=b[g];if(k&&!k.Kn&&k.Ko==c){var l=k.Ll,n=k.rs||k.src;k.Hr&&Rb(a.Ff,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.aq}
f.hp=function(a,b,c,d){return this.Ff.hp(String(a),b,c,d)};f.ss=function(a,b){return this.Ff.ss(ca(a)?String(a):void 0,b)};function cd(){ad.call(this);this.n="base";this.sd=window["X.counter"].jP();this.C=!1}w(cd,ad);cd.prototype.__defineGetter__("classname",function(){return this.n});cd.prototype.__defineGetter__("id",function(){return this.sd});t("X.base",cd);function dd(a,b){cd.call(this);this.n="triplets";this.rg=Infinity;this.og=-Infinity;this.sg=Infinity;this.pg=-Infinity;this.tg=Infinity;this.qg=-Infinity;this.hr=[0,0,0];this.Ma=0;this.Zb=new Float32Array(a);null!=b&&(this.Zb=b.Zb.subarray(0,b.Zb.length),this.Ma=this.Zb.length,this.rg=b.rg,this.og=b.og,this.sg=b.sg,this.pg=b.pg,this.tg=b.tg,this.qg=b.qg,this.hr=b.hr.slice())}w(dd,cd);f=dd.prototype;
f.add=function(a,b,c){this.rg=Math.min(this.rg,a);this.og=Math.max(this.og,a);this.sg=Math.min(this.sg,b);this.pg=Math.max(this.pg,b);this.tg=Math.min(this.tg,c);this.qg=Math.max(this.qg,c);this.hr=[(this.rg+this.og)/2,(this.sg+this.pg)/2,(this.tg+this.qg)/2];this.C=!0;this.Zb[this.Ma++]=a;this.Zb[this.Ma++]=b;this.Zb[this.Ma++]=c;return this.Ma/3};f.resize=function(){if(this.Ma!=this.Zb.length){var a=new Float32Array(this.Ma);a.set(this.Zb.subarray(0,this.Ma));this.Zb=a}};
f.get=function(a){a*=3;return[this.Zb[a],this.Zb[a+1],this.Zb[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Zb=new Float32Array(this.Zb.length);this.C=!0};dd.prototype.__defineGetter__("count",function(){this.resize();return this.Zb.length/3});dd.prototype.__defineGetter__("length",function(){this.resize();return this.Zb.length});t("X.triplets",dd);t("X.triplets.prototype.add",dd.prototype.add);t("X.triplets.prototype.resize",dd.prototype.resize);
t("X.triplets.prototype.get",dd.prototype.get);t("X.triplets.prototype.remove",dd.prototype.remove);t("X.triplets.prototype.clear",dd.prototype.clear);function ed(){cd.call(this);this.n="indexer";this.Gu=[];this.me={}}w(ed,cd);ed.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.me||(this.me[b]=this.Gu.length,this.Gu.push(a));return this.me[b]};ed.prototype.unique=function(){return this.Gu};function fd(a){cd.call(this);this.n="file";this.sr=a;this.C=!0}w(fd,cd);function gd(){this.jh=this.da=null}gd.prototype.__defineSetter__("file",function(a){if(null==a||h(a)&&0==a.length)this.da=null;else{if(h(a)){if(1==a.length){this.da=new fd(a[0]);return}this.da=Bb(a,function(a){var c=new Q;c.da=new fd(a);return c})}else this.da=new fd(a);this.jh=null}});gd.prototype.__defineGetter__("file",function(){return this.da?h(this.da)?this.da.map(function(a){return a.da.sr}):this.da.sr:""});
gd.prototype.__defineGetter__("filedata",function(){return h(this.da)?this.da.map(function(a){return a.jh}):this.jh});gd.prototype.__defineSetter__("filedata",function(a){if(null==a||h(a)&&0==a.length)this.jh=null;if(h(a))if(1==a.length)this.jh=a[0];else{var b=this.da.length,c;for(c=0;c<b;c++)this.da[c].jh=a[c]}else this.jh=a});function hd(){return null};function id(a,b,c){return Math.min(Math.max(a,b),c)};function jd(a,b){this.Bb={};this.kb=[];this.ui=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Iu(a)}f=jd.prototype;f.Ai=function(){return this.ui};f.Cl=function(){ld(this);for(var a=[],b=0;b<this.kb.length;b++)a.push(this.Bb[this.kb[b]]);return a};f.gp=function(){ld(this);return this.kb.concat()};
f.lv=function(a){for(var b=0;b<this.kb.length;b++){var c=this.kb[b];if(md(this.Bb,c)&&this.Bb[c]==a)return!0}return!1};f.bn=function(a,b){if(this===a)return!0;if(this.ui!=a.Ai())return!1;var c=b||nd;ld(this);for(var d,e=0;d=this.kb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function nd(a,b){return a===b}f.xp=function(){return 0==this.ui};f.clear=function(){this.Bb={};this.ui=this.kb.length=0};
f.remove=function(a){return md(this.Bb,a)?(delete this.Bb[a],this.ui--,this.kb.length>2*this.ui&&ld(this),!0):!1};function ld(a){if(a.ui!=a.kb.length){for(var b=0,c=0;b<a.kb.length;){var d=a.kb[b];md(a.Bb,d)&&(a.kb[c++]=d);b++}a.kb.length=c}if(a.ui!=a.kb.length){for(var e={},c=b=0;b<a.kb.length;)d=a.kb[b],md(e,d)||(a.kb[c++]=d,e[d]=1),b++;a.kb.length=c}}f.get=function(a,b){return md(this.Bb,a)?this.Bb[a]:b};f.set=function(a,b){md(this.Bb,a)||(this.ui++,this.kb.push(a));this.Bb[a]=b};
f.Iu=function(a){var b;a instanceof jd?(b=a.gp(),a=a.Cl()):(b=mb(a),a=lb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.gp(),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};f.clone=function(){return new jd(this)};f.ty=function(){for(var a=new jd,b=0;b<this.kb.length;b++){var c=this.kb[b];a.set(this.Bb[c],c)}return a};function md(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function od(){cd.call(this);this.n="colortable";this.me=new jd;ya(this,new gd)}w(od,cd);od.prototype.add=function(a,b,c,d,e,g){if(!(la(a)&&la(c)&&la(d)&&la(e)&&la(g)))throw Error("Invalid color table entry.");this.me.set(a,[b,c,d,e,g]);this.C=!0};od.prototype.get=function(a){return this.me.get(a)};t("X.colortable.prototype.get",od.prototype.get);function pd(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}pd.prototype.clone=function(){return new pd(this.x,this.y,this.z)};pd.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};pd.prototype.oy=function(){return[this.x,this.y,this.z]};function qd(a,b,c){this.x=a;this.y=b;this.z=c}w(qd,pd);f=qd.prototype;f.clone=function(){return new qd(this.x,this.y,this.z)};f.Ng=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.Fb=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.Ng())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.Fc=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.bn=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function rd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function sd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function td(a,b){return new qd(a.x+b.x,a.y+b.y,a.z+b.z)}function ud(a,b){return new qd(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.K=qd;f=A.K.prototype;f.clone=qd.prototype.clone;f.Ng=qd.prototype.Ng;f.scale=qd.prototype.scale;f.Fb=qd.prototype.Fb;f.add=qd.prototype.add;f.Fc=qd.prototype.Fc;f.normalize=function(){var a=this.Ng();return 0==a?this.scale(0):this.scale(1/a)};A.K.Lj=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.K.ol=ud;A.K.Bv=rd;A.K.Ls=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new qd(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.K.prototype.__defineGetter__("xx",function(){return this.x});
A.K.prototype.__defineGetter__("yy",function(){return this.y});A.K.prototype.__defineGetter__("zz",function(){return this.z});t("X.vector",A.K);t("X.vector.prototype.clone",A.K.prototype.clone);t("X.vector.prototype.magnitude",A.K.prototype.Ng);t("X.vector.prototype.scale",A.K.prototype.scale);t("X.vector.prototype.invert",A.K.prototype.Fb);t("X.vector.prototype.normalize",A.K.prototype.normalize);t("X.vector.prototype.add",A.K.prototype.add);t("X.vector.prototype.subtract",A.K.prototype.Fc);
t("X.vector.dot",A.K.Lj);t("X.vector.cross",A.K.ol);t("X.vector.distance",A.K.Bv);t("X.vector.lerp",A.K.Ls);function vd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}vd.prototype.BYTES_PER_ELEMENT=8;vd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};vd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{vd.BYTES_PER_ELEMENT=8}catch(wd){}vd.prototype.BYTES_PER_ELEMENT=vd.prototype.BYTES_PER_ELEMENT;vd.prototype.set=vd.prototype.set;vd.prototype.toString=vd.prototype.toString;t("Float64Array",vd)};function xd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}xd.prototype.BYTES_PER_ELEMENT=4;xd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};xd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(xd.BYTES_PER_ELEMENT=4,xd.prototype.BYTES_PER_ELEMENT=xd.prototype.BYTES_PER_ELEMENT,xd.prototype.set=xd.prototype.set,xd.prototype.toString=xd.prototype.toString,t("Float32Array",xd));function yd(){return new Float32Array(3)}function zd(a,b,c){var d=yd();d[0]=a;d[1]=b;d[2]=c;return d}function Ad(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function Bd(){return new Float32Array(4)}function Cd(a,b,c,d){var e=Bd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Dd(){return new Float32Array(16)}function Ed(){var a=Dd();a[0]=a[5]=a[10]=a[15]=1;return a}function Fd(a,b,c,d,e,g,k,l,n,m,q,p,r,s,z,y,F){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=g;a[5]=k;a[6]=l;a[7]=n;a[8]=m;a[9]=q;a[10]=p;a[11]=r;a[12]=s;a[13]=z;a[14]=y;a[15]=F;return a}function Gd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Hd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function Id(a,b,c,d,e,g){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=g}
function Jd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Kd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Ld(a,b,c){var d=a[0],e=a[1],g=a[2],k=a[3],l=a[4],n=a[5],m=a[6],q=a[7],p=a[8],r=a[9],s=a[10],z=a[11],y=a[12],F=a[13],D=a[14];a=a[15];var O=b[0],K=b[1],J=b[2],G=b[3],E=b[4],M=b[5],L=b[6],U=b[7],H=b[8],u=b[9],v=b[10],da=b[11],V=b[12],B=b[13],T=b[14];b=b[15];c[0]=d*O+l*K+p*J+y*G;c[1]=e*O+n*K+r*J+F*G;c[2]=g*O+m*K+s*J+D*G;c[3]=k*O+q*K+z*J+a*G;c[4]=d*E+l*M+p*L+y*U;c[5]=e*E+n*M+r*L+F*U;c[6]=g*E+m*M+s*L+D*U;c[7]=k*E+q*M+z*L+a*U;c[8]=d*H+l*u+p*v+y*da;c[9]=e*H+n*u+r*v+F*da;c[10]=g*H+m*u+s*v+D*da;c[11]=
k*H+q*u+z*v+a*da;c[12]=d*V+l*B+p*T+y*b;c[13]=e*V+n*B+r*T+F*b;c[14]=g*V+m*B+s*T+D*b;c[15]=k*V+q*B+z*T+a*b;return c}
function Md(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=a[8],p=a[9],r=a[10],s=a[11],z=a[12],y=a[13],F=a[14],D=a[15],O=c*l-d*k,K=c*n-e*k,J=c*m-g*k,G=d*n-e*l,E=d*m-g*l,M=e*m-g*n,L=q*y-p*z,U=q*F-r*z,H=q*D-s*z,u=p*F-r*y,v=p*D-s*y,da=r*D-s*F,V=O*da-K*v+J*u+G*H-E*U+M*L;if(0==V)return!1;V=1/V;b[0]=(l*da-n*v+m*u)*V;b[1]=(-d*da+e*v-g*u)*V;b[2]=(y*M-F*E+D*G)*V;b[3]=(-p*M+r*E-s*G)*V;b[4]=(-k*da+n*H-m*U)*V;b[5]=(c*da-e*H+g*U)*V;b[6]=(-z*M+F*J-D*K)*V;b[7]=(q*M-r*J+s*K)*V;b[8]=(k*v-l*H+m*
L)*V;b[9]=(-c*v+d*H-g*L)*V;b[10]=(z*E-y*J+D*O)*V;b[11]=(-q*E+p*J-s*O)*V;b[12]=(-k*u+l*U-n*L)*V;b[13]=(c*u-d*U+e*L)*V;b[14]=(-z*G+y*K-F*O)*V;b[15]=(q*G-p*K+r*O)*V;return!0}function Od(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Pd(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+g*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+g*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+g*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+g*a[11]+b*a[15];return c}function Qd(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],g=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=g;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.p={};A.p.sD=function(a,b,c,d){c=c.Fc(b);c.normalize();d=A.K.ol(c,d);d.normalize();var e=A.K.ol(d,c);e.normalize();c.Fb();Id(a,0,d.x,d.y,d.z,0);Id(a,1,e.x,e.y,e.z,0);Id(a,2,c.x,c.y,c.z,0);Qd(a,-b.x,-b.y,-b.z);return a};A.p.Tb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.K((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.p.$O=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Kd(a,b,d);Kd(a,c,e);Jd(a,b,e);Jd(a,c,d);return a};A.p.ZO=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Hd(a,b,d);Hd(a,c,e);Gd(a,b,e);Gd(a,c,d);return a};A.p.qp=Ed;A.p.clone=function(a){var b=Dd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.p.ty=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],g=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=g;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.p.GI=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],k=a[5],l=a[6],n=a[7],m=a[8],q=a[9],p=a[10],r=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*g)*(p*a-r*y)-(b*l-d*g)*(q*a-r*z)+(b*n-e*g)*(q*y-p*z)+(c*l-d*k)*(m*a-r*s)-(c*n-e*k)*(m*y-p*s)+(d*n-e*l)*(m*z-q*s)};A.p.Fb=Md;A.p.Gw=function(a,b,c,d,e){var g=b/2;b=e-d;var k=Math.sin(g);if(0==b||0==k||0==c)return a;g=Math.cos(g)/k;return Fd(a,g/c,0,0,0,0,g,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.p.YL=function(a,b,c,d,e,g,k){return Fd(a,2*g/(c-b),0,0,0,0,2*g/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+g)/(k-g),-1,0,0,-(2*k*g)/(k-g),0)};A.p.ZL=function(a,b,c,d,e,g,k){return Fd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-g),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+g)/(k-g),1)};A.p.multiply=Ld;A.p.DD=Pd;A.p.translate=Qd;A.p.scale=function(a,b,c,d){return Fd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.p.rotate=function(a,b,c,d,e){var g=a[0],k=a[1],l=a[2],n=a[3],m=a[4],q=a[5],p=a[6],r=a[7],s=a[8],z=a[9],y=a[10],F=a[11],D=Math.cos(b),O=Math.sin(b),K=1-D;b=c*c*K+D;var J=c*d*K+e*O,G=c*e*K-d*O,E=c*d*K-e*O,M=d*d*K+D,L=d*e*K+c*O,U=c*e*K+d*O;c=d*e*K-c*O;e=e*e*K+D;return Fd(a,g*b+m*J+s*G,k*b+q*J+z*G,l*b+p*J+y*G,n*b+r*J+F*G,g*E+m*M+s*L,k*E+q*M+z*L,l*E+p*M+y*L,n*E+r*M+F*L,g*U+m*c+s*e,k*U+q*c+z*e,l*U+p*c+y*e,n*U+r*c+F*e,a[12],a[13],a[14],a[15])};
A.p.pt=function(a,b){var c=a[4],d=a[5],e=a[6],g=a[7],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[4]=c*q+k*p;a[5]=d*q+l*p;a[6]=e*q+n*p;a[7]=g*q+m*p;a[8]=c*-p+k*q;a[9]=d*-p+l*q;a[10]=e*-p+n*q;a[11]=g*-p+m*q;return a};A.p.qt=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*-p;a[1]=d*q+l*-p;a[2]=e*q+n*-p;a[3]=g*q+m*-p;a[8]=c*p+k*q;a[9]=d*p+l*q;a[10]=e*p+n*q;a[11]=g*p+m*q;return a};
A.p.rt=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*p;a[1]=d*q+l*p;a[2]=e*q+n*p;a[3]=g*q+m*p;a[4]=c*-p+k*q;a[5]=d*-p+l*q;a[6]=e*-p+n*q;a[7]=g*-p+m*q;return a};t("X.matrix.identity",A.p.qp);t("X.matrix.clone",A.p.clone);t("X.matrix.transpose",A.p.ty);t("X.matrix.determinant",A.p.GI);t("X.matrix.invert",A.p.Fb);t("X.matrix.multiply",A.p.multiply);t("X.matrix.multiplyByVector",A.p.Tb);t("X.matrix.multiplyByVec4",A.p.DD);
t("X.matrix.makePerspective",A.p.Gw);t("X.matrix.makeFrustum",A.p.YL);t("X.matrix.makeOrtho",A.p.ZL);t("X.matrix.makeLookAt",A.p.sD);t("X.matrix.translate",A.p.translate);t("X.matrix.scale",A.p.scale);t("X.matrix.rotate",A.p.rotate);t("X.matrix.rotateX",A.p.pt);t("X.matrix.rotateY",A.p.qt);t("X.matrix.rotateZ",A.p.rt);t("X.matrix.swapRows",A.p.$O);t("X.matrix.swapCols",A.p.ZO);function Rd(){cd.call(this);this.n="transform";this.yb=A.p.qp()}w(Rd,cd);Rd.prototype.__defineGetter__("matrix",function(){return this.yb});Rd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.yb=a;this.ca()});f=Rd.prototype;f.pt=function(a){if(!la(a)||-360>a||360<a)throw Error("Invalid angle.");A.p.pt(this.yb,a*Math.PI/180);this.ca()};
f.qt=function(a){if(!la(a)||-360>a||360<a)throw Error("Invalid angle.");A.p.qt(this.yb,a*Math.PI/180);this.ca()};f.rt=function(a){if(!la(a)||-360>a||360<a)throw Error("Invalid angle.");A.p.rt(this.yb,a*Math.PI/180);this.ca()};f.xF=function(a){if(!la(a))throw Error("Invalid distance.");A.p.translate(this.yb,a,0,0);this.ca()};f.yF=function(a){if(!la(a))throw Error("Invalid distance.");A.p.translate(this.yb,0,a,0);this.ca()};
f.zF=function(a){if(!la(a))throw Error("Invalid distance.");A.p.translate(this.yb,0,0,a);this.ca()};function Sd(a,b,c){a.yb[b+4*c]*=-1;a.ca()}f.jJ=function(){Sd(this,0,0)};f.kJ=function(){Sd(this,1,1)};f.lJ=function(){Sd(this,2,2)};f.ca=function(){this.C=!0};t("X.transform",Rd);t("X.transform.prototype.rotateX",Rd.prototype.pt);t("X.transform.prototype.rotateY",Rd.prototype.qt);t("X.transform.prototype.rotateZ",Rd.prototype.rt);t("X.transform.prototype.translateX",Rd.prototype.xF);
t("X.transform.prototype.translateY",Rd.prototype.yF);t("X.transform.prototype.translateZ",Rd.prototype.zF);t("X.transform.prototype.flipX",Rd.prototype.jJ);t("X.transform.prototype.flipY",Rd.prototype.kJ);t("X.transform.prototype.flipZ",Rd.prototype.lJ);t("X.transform.prototype.modified",Rd.prototype.ca);function Td(){cd.call(this);this.n="texture";this.uj=this.ng=this.da=null;this.Au=this.Bu=0;this.Dz=!1;ya(this,new gd)}w(Td,cd);Td.prototype.__defineSetter__("rawData",function(a){this.uj=a;this.C=!0});Td.prototype.__defineSetter__("rawDataHeight",function(a){this.Au=a;this.C=!0});Td.prototype.__defineSetter__("rawDataWidth",function(a){this.Bu=a;this.C=!0});Td.prototype.__defineSetter__("grayscale",function(a){this.Dz=a;this.C=!0});t("X.texture",Td);function Ud(){this.Vd=Vd;this.lc=new Rd;this.Ha=[1,1,1];this.Lm=this.Ua=this.Mc=this.$=this.t=null;this.Gm=[];this.ob=!0;this.Fm=this.uo=1;this.xm=null;this.lo=!1;this.Wc=1;this.rd=0;this.to=!0}var Vd="TRIANGLES";Ud.prototype.__defineSetter__("type",function(a){return this.Vd=a});Ud.prototype.__defineGetter__("type",function(){return this.Vd});Ud.prototype.__defineGetter__("texture",function(){this.Ua||(this.Ua=new Td);return this.Ua});Ud.prototype.__defineGetter__("transform",function(){return this.lc});
Ud.prototype.__defineGetter__("points",function(){return this.t});Ud.prototype.__defineSetter__("points",function(a){this.t=a});Ud.prototype.__defineGetter__("normals",function(){return this.$});Ud.prototype.__defineSetter__("normals",function(a){this.$=a});Ud.prototype.__defineGetter__("colors",function(){return this.Mc});Ud.prototype.__defineSetter__("colors",function(a){this.Mc=a});Ud.prototype.__defineGetter__("color",function(){return this.Ha});
Ud.prototype.__defineSetter__("color",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Ha=a;this.C=!0});Ud.prototype.__defineGetter__("opacity",function(){return this.Wc});Ud.prototype.__defineSetter__("opacity",function(a){if(!la(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Wc=a;this.C=!0});Ud.prototype.__defineGetter__("caption",function(){return this.xm});
Ud.prototype.__defineSetter__("caption",function(a){this.xm=a;this.C=!0});Ud.prototype.__defineGetter__("visible",function(){return this.ob});Ud.prototype.__defineSetter__("visible",function(a){for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.ob=a;this.C=!0});Ud.prototype.__defineGetter__("pointsize",function(){return this.uo});Ud.prototype.__defineSetter__("pointsize",function(a){if(!la(a))throw Error("Invalid point size.");this.uo=a;this.C=!0});
Ud.prototype.__defineGetter__("magicmode",function(){return this.lo});Ud.prototype.__defineSetter__("magicmode",function(a){if(!ka(a))throw Error("Invalid magic mode setting.");this.lo=a;this.C=!0});Ud.prototype.__defineGetter__("linewidth",function(){return this.Fm});Ud.prototype.__defineSetter__("linewidth",function(a){if(!la(a))throw Error("Invalid line width.");this.Fm=a;this.C=!0});Ud.prototype.__defineGetter__("pickable",function(){return this.to});
Ud.prototype.__defineSetter__("pickable",function(a){if(!ka(a))throw Error("Invalid pickable setting.");this.to=a;this.C=!0});Ud.prototype.__defineGetter__("textureCoordinateMap",function(){return this.Lm});Ud.prototype.__defineSetter__("textureCoordinateMap",function(){});function Wd(){this.ne=Infinity;this.xb=this.Yb=-Infinity;this.zb=Infinity;this.qj=[0,0,0];this.oj=[1,1,1]}Wd.prototype.__defineGetter__("lowerThreshold",function(){return this.xb});Wd.prototype.__defineSetter__("lowerThreshold",function(a){this.xb=a});Wd.prototype.__defineGetter__("upperThreshold",function(){return this.zb});Wd.prototype.__defineSetter__("upperThreshold",function(a){this.zb=a});Wd.prototype.__defineGetter__("min",function(){return this.ne});Wd.prototype.__defineGetter__("max",function(){return this.Yb});
Wd.prototype.__defineGetter__("minColor",function(){return this.qj});Wd.prototype.__defineSetter__("minColor",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid min. color.");this.qj=a});Wd.prototype.__defineGetter__("maxColor",function(){return this.oj});Wd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid max. color.");this.oj=a});function Xd(){cd.call(this);this.n="scalars";this.io=this.bb=null;this.Qz=!0;this.pu=0;ya(this,new gd);ya(this,new Wd);this.qj=[0,1,0];this.oj=[1,0,0]}w(Xd,cd);Xd.prototype.__defineGetter__("array",function(){return this.bb});Xd.prototype.__defineSetter__("array",function(a){this.io=this.bb=a;this.C=!0});Xd.prototype.__defineGetter__("interpolation",function(){return this.pu});Xd.prototype.__defineSetter__("interpolation",function(a){this.pu=a});t("X.scalars",Xd);function Yd(a){cd.call(this);this.n="object";this.i=[];this.cb=this.Rd=null;ya(this,new Ud);null!=a&&this.ll(a)}w(Yd,cd);
Yd.prototype.ll=function(a){this.Vd=a.Vd;this.lc=new Rd;this.lc.yb=new Float32Array(a.lc.yb);this.Ha=a.Ha.slice();a.t&&(this.t=new dd(a.t.length,a.t));a.$&&(this.$=new dd(a.$.length,a.$));a.Mc&&(this.Mc=new dd(a.Mc.length,a.Mc));this.Ua=a.Ua;this.Lm=a.Lm;a.da&&(this.da=new fd((new String(a.da.sr)).toString()));this.Wc=a.Wc;this.i.length=0;var b=a.i;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.i.push(new A[b[d].n](b[d]));this.ob=a.ob;this.uo=a.uo;this.Fm=a.Fm;a.xm&&(this.xm=(new String(a.xm)).toString());
this.lo=a.lo;this.to=a.to;this.Gm=a.Gm.slice();this.C=!0};Yd.prototype.__defineGetter__("colortable",function(){this.Rd||(this.Rd=new od);return this.Rd});Yd.prototype.__defineGetter__("scalars",function(){this.cb||(this.cb=new Xd);return this.cb});Yd.prototype.__defineGetter__("children",function(){return this.i});Yd.prototype.ca=function(){var a=new Zd;a.Na=this;this.dispatchEvent(a)};Yd.prototype.remove=function(){var a=new $d;a.Na=this;this.dispatchEvent(a)};
function ae(a,b){if(!(null!=a&&null!=b&&a instanceof Yd&&b instanceof Yd))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Wc?-1:1==b.Wc?1:null!=a.rd&&null!=b.rd&&a.rd>b.rd?-1:1}t("X.object",Yd);t("X.object.prototype.modified",Yd.prototype.ca);t("X.object.prototype.remove",Yd.prototype.remove);function be(a){Dc.call(this,a);this.n="event"}w(be,Dc);function ce(a){return a+"_"+C()}var de=ce("pan"),fe=ce("rotate"),ge=ce("zoom"),he=ce("scroll");ce("render");var ie=ce("resetview"),je=ce("windowlevel"),ke=ce("modified"),le=ce("remove"),me=ce("progress"),ne=ce("hover"),oe=ce("hover_end"),pe=ce("computing"),qe=ce("computing_end"),re=ce("computing_progress");function se(){be.call(this,je);this.uu=this.Hu=0}w(se,be);function te(){be.call(this,de);this.rd=new A.K(0,0,0)}w(te,be);
function ue(){be.call(this,fe);this.rd=new A.K(0,0,0)}w(ue,be);function ve(){be.call(this,ge);this.mg=this.kh=!1}w(ve,be);function we(){be.call(this,he);this.$b=!1}w(we,be);function xe(){be.call(this,ne);this.Ar=this.zr=0}w(xe,be);function ye(){be.call(this,oe)}w(ye,be);function ze(){be.call(this,ie)}w(ze,be);function Zd(){be.call(this,ke);this.xa=this.Na=null}w(Zd,be);function $d(){be.call(this,le);this.xa=this.Na=null}w($d,be);function Ae(){be.call(this,me);this.al=0}w(Ae,be);
function Be(){be.call(this,pe);this.Na=null}w(Be,be);function Ce(){be.call(this,re);this.al=0}w(Ce,be);function De(){be.call(this,qe);this.Na=null}w(De,be);t("X.event.events.PAN",de);t("X.event.events.ROTATE",fe);t("X.event.events.ZOOM",ge);t("X.event.events.SCROLL",he);function Ee(){cd.call(this);this.n="parser";this.S=null;this.Ma=0;this.AH=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.or=!0}w(Ee,cd);Ee.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Fe(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var g=a[e],b=Math.min(b,g),c=Math.max(c,g);return[b,c]}
function Ge(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ee.prototype.f=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this.S.slice(this.Ma,this.Ma+=b*c));if(this.AH!=this.or)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),g=0;g<d.byteLength;g+=
c)for(var k=g+c-1,l=g;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function He(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Cd(0,0,0,1),e=Bd();Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(0,0,b[2]-1,1);Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(0,b[1]-
1,0,1);Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,0,0,1);Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,b[1]-1,0,1);Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,0,b[2]-1,1);Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(0,b[1]-1,b[2]-1,1);Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,b[1]-1,b[2]-1,1);Pd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ie(a,b){var c=Ed();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=yd(),g=a[0],k=a[1],l=a[2],n=b[0],m=b[1],q=b[2];e[0]=k*q-l*m;e[1]=l*n-g*q;e[2]=g*m-k*n;Ad(e,e);g=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];Id(c,0,g*g+k*k-l*l-d*d,2*(k*l-g*d),2*(k*d+g*l),0);Id(c,1,2*(k*l+g*d),g*g+l*l-k*k-d*d,2*(l*d-g*k),0);Id(c,2,2*(k*d-g*l),2*(l*d+g*k),g*g+d*d-l*l-k*k,0)}d=Dd();Md(c,d);return[c,d]}
function Je(a,b,c,d,e,g,k,l,n){var m=new Ke;Ad(c,c);for(var q=[],p=[],r=0;6>r;r++)for(var s=Math.floor(r/2),z=(s+1)%3,y=(s+2)%3,F=(4+2*s)%6,D=0;2>D;D++){var O=(2+D+2*s)%6,K=-(c[s]*(e[r]-a[s])+c[z]*(e[O]-a[z]))/c[y]+a[y];if(K>=e[F]&&K<=e[F+1]||K<=e[F]&&K>=e[F+1]){var J=[];J[s]=e[r];J[z]=e[O];J[y]=K;q.push(J)}else J=[],J[s]=e[r],J[z]=e[O],J[y]=K,p.push(J)}a=zd(0,0,1);a=Ie(c,a);e=a[0];a=a[1];s=[];for(p=0;p<q.length;++p)r=Cd(q[p][0],q[p][1],q[p][2],1),z=Bd(),Pd(e,r,z),s.push([z[0],z[1],z[2]]);e=zd(1,
0,0);q=yd();Od(a,e,q);p=zd(0,1,0);e=yd();Od(a,p,e);r=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(p=p=0;p<s.length;++p)s[p][0]<r[0]&&(r[0]=s[p][0]),s[p][0]>r[1]&&(r[1]=s[p][0]),s[p][1]<r[2]&&(r[2]=s[p][1]),s[p][1]>r[3]&&(r[3]=s[p][1]),s[p][2]<r[4]&&(r[4]=s[p][2]),s[p][2]>r[5]&&(r[5]=s[p][2]);p=Cd(r[0]+(r[1]-r[0])/2,r[2]+(r[3]-r[2])/2,r[4]+(r[5]-r[4])/2,0);s=Bd();Ld(a,p,s);z=Math.floor(r[0]);y=Math.ceil(r[1]);z==y&&y++;F=y-z;D=Math.floor(r[2]);
O=Math.ceil(r[3]);K=O-D;J=b[0];b=b[1];var p=Math.ceil(F/J),G=Math.ceil(K/b),E=new Uint8Array(4*p*G),M=new Td;M.Bu=p;M.Au=G;var G=Bd(),L=Cd(0,0,r[4],1),U=Dd();Ld(k.rH,a,U);for(var H=O-1E-7,u=y-1E-7,v=0,da=0,V=0,B=D,B=D;B<=H;B+=b)for(V++,da=0,L[1]=B,p=z;p<=u;p+=J){da++;L[0]=p;Pd(U,L,G);var T=4*v,rb=Math.floor(G[2]),sa=Math.floor(G[1]),Ja=Math.floor(G[0]);if(0<=Ja&&Ja<k.nb[0]&&0<=sa&&sa<k.nb[1]&&0<=rb&&rb<k.nb[2]){var wa=g[rb][sa][Ja],Jb=Ja=sa=rb=0;n?((wa=n.get(wa))||(wa=[0,.61,0,0,1]),rb=255*wa[1],
sa=255*wa[2],Ja=255*wa[3],Jb=255*wa[4]):(rb=sa=Ja=wa/k.Yb*255,Jb=255);E[T]=rb;E[++T]=sa;E[++T]=Ja;E[++T]=Jb}else E[T]=0,E[++T]=0,E[++T]=0,E[++T]=0;v++}M.uj=E;m.Ua=M;m.KH=r;m.tH=a;m.sH=U;m.zH=D;m.CS=O;m.JH=z;m.DS=y;m.Fz=da;m.Ez=V;m.li=J;m.Va=F;m.ei=b;m.Ia=K;m.Sa=[s[0],s[1],s[2]];m.Am=[c[0],c[1],c[2]];m.tr=[q[0],q[1],q[2]];m.$b=[e[0],e[1],e[2]];m.ob=!1;m.ki=k;m.di=null==k.ki||l?!0:!1;m.wm=d;m.Cf();m.ob=!1;return m}
function Le(a,b,c,d){var e;e=d.Lc;for(var g=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,p=(2+2*n)%6,r=(4+2*n)%6,s=1/c[n]*(e[l]-b[n]);if(Infinity!=s&&-Infinity!=s){var z=b[m]+c[m]*s,s=b[q]+c[q]*s;z>=e[p]&&z<=e[p+1]&&s>=e[r]&&s<=e[r+1]?(p=[],p[n]=e[l],p[m]=z,p[q]=s,g.push(p)):(p=[],p[n]=e[l],p[m]=z,p[q]=s,k.push(p))}}e=[g,k];b=e[0];d.d[a].D=e;e=rd(new qd(b[0][0],b[0][1],b[0][2]),new qd(b[1][0],b[1][1],b[1][2]));d.d[a].BS=e;g=zd(0,0,1);k=Ie(c,g)[0];l=Cd(d.mu[0],d.mu[1],d.mu[2],0);
g=Bd();Pd(k,l,g);k=Bd();l=g[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(g[0])&&(g[0]=.5);.5>Math.abs(g[1])&&(g[1]=.5);d.d[a].Td=[Math.abs(g[0]),Math.abs(g[1])];d.d[a].Jm=g[2];d.d[a].Oa=k;e=Math.floor(Math.abs(e/g[2]));d.wo[a]=e+1;d.d[a].ba=e+1;d.d[a].D[0][0][0]>d.d[a].D[0][1][0]?0<k[0]&&(e=d.d[a].D[0][0],d.d[a].D[0][0]=d.d[a].D[0][1],d.d[a].D[0][1]=e):d.d[a].D[0][0][0]<d.d[a].D[0][1][0]?0>k[0]&&(e=d.d[a].D[0][0],d.d[a].D[0][0]=d.d[a].D[0][1],d.d[a].D[0][1]=e):d.d[a].D[0][0][1]>
d.d[a].D[0][1][1]?0<k[1]&&(e=d.d[a].D[0][0],d.d[a].D[0][0]=d.d[a].D[0][1],d.d[a].D[0][1]=e):d.d[a].D[0][0][1]<d.d[a].D[0][1][1]?0>k[1]&&(e=d.d[a].D[0][0],d.d[a].D[0][0]=d.d[a].D[0][1],d.d[a].D[0][1]=e):d.d[a].D[0][0][2]>d.d[a].D[0][1][2]?0<k[2]&&(e=d.d[a].D[0][0],d.d[a].D[0][0]=d.d[a].D[0][1],d.d[a].D[0][1]=e):d.d[a].D[0][0][2]<d.d[a].D[0][1][2]&&0>k[2]&&(e=d.d[a].D[0][0],d.d[a].D[0][0]=d.d[a].D[0][1],d.d[a].D[0][1]=e);d.d[a].xu=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Me(a,b){var c;c=b.S;for(var d=b.nb,e=b.Yb,g=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,m=0,q=0,p=0,r=0,p=0;p<d[2];p++){var s=c.subarray(p*l,(p+1)*l),r=0;k[p]=Array(d[1]);g[p]=Array(d[1]);for(q=0;q<d[1];q++)for(k[p][q]=new c.constructor(d[0]),g[p][q]=new c.constructor(d[0]),m=0;m<d[0];m++)n=s[r],k[p][q][m]=n/e*255,g[p][q][m]=n,r++}c=[g,k];b.kc=c[0];b.AS=c[1];A.ke(a.n+".reslice");b.hb=null!=b.m;b.Rd&&(b.ho=b.Rd.me);b.TT=[0,0,0];b.wa=[b.Qd[0]+(b.ci[0]-1)/2,b.Qd[1]+(b.ci[1]-1)/2,b.Qd[2]+(b.ci[2]-
1)/2];b.Lc=[Math.min(b.Qd[0],b.Qd[0]+b.ci[0]-1),Math.max(b.Qd[0],b.Qd[0]+b.ci[0]-1),Math.min(b.Qd[1],b.Qd[1]+b.ci[1]-1),Math.max(b.Qd[1],b.Qd[1]+b.ci[1]-1),Math.min(b.Qd[2],b.Qd[2]+b.ci[2]-1),Math.max(b.Qd[2],b.Qd[2]+b.ci[2]-1)];b.d=[{},{},{}];c=zd(b.wa[0],b.wa[1],b.wa[2]);b.d[0].xo=c;d=zd(1,0,0);Ad(d,d);b.d[0].A=d;e=[1,0,0];b.d[0].Ha=e;Le(0,c,d,b);b.i[0].i=Array(b.d[0].ba);c[0]=b.d[0].D[0][0][0]+b.d[0].Oa[0]*Math.floor(b.d[0].ba/2);c[1]=b.d[0].D[0][0][1]+b.d[0].Oa[1]*Math.floor(b.d[0].ba/2);c[2]=
b.d[0].D[0][0][2]+b.d[0].Oa[2]*Math.floor(b.d[0].ba/2);c=Je(c,b.d[0].Td,b.d[0].A,b.d[0].Ha,b.Lc,b.kc,b,b.hb,b.ho);b.hb&&(c.m=b.m.i[0].i[Math.floor(b.d[0].ba/2)].Ua);b.i[0].i[Math.floor(b.d[0].ba/2)]=c;b.fi=Math.floor(b.d[0].ba/2);b.Bm=Math.floor(b.d[0].ba/2);c=zd(b.wa[0],b.wa[1],b.wa[2]);b.d[1].xo=c;d=zd(0,1,0);Ad(d,d);b.d[1].A=d;e=[0,1,0];b.d[1].Ha=e;Le(1,c,d,b);b.i[1].i=Array(b.d[1].ba);c[0]=b.d[1].D[0][0][0]+b.d[1].Oa[0]*Math.floor(b.d[1].ba/2);c[1]=b.d[1].D[0][0][1]+b.d[1].Oa[1]*Math.floor(b.d[1].ba/
2);c[2]=b.d[1].D[0][0][2]+b.d[1].Oa[2]*Math.floor(b.d[1].ba/2);c=Je(c,b.d[1].Td,b.d[1].A,b.d[1].Ha,b.Lc,b.kc,b,b.hb,b.ho);b.hb&&(c.m=b.m.i[1].i[Math.floor(b.d[1].ba/2)].Ua);b.i[1].i[Math.floor(b.d[1].ba/2)]=c;b.gi=Math.floor(b.d[1].ba/2);b.Cm=Math.floor(b.d[1].ba/2);c=zd(b.wa[0],b.wa[1],b.wa[2]);b.d[2].xo=c;d=zd(0,0,1);Ad(d,d);b.d[2].A=d;e=[0,.392,.804];b.d[2].Ha=e;Le(2,c,d,b);b.i[2].i=Array(b.d[2].ba);c[0]=b.d[2].D[0][0][0]+b.d[2].Oa[0]*Math.floor(b.d[2].ba/2);c[1]=b.d[2].D[0][0][1]+b.d[2].Oa[1]*
Math.floor(b.d[2].ba/2);c[2]=b.d[2].D[0][0][2]+b.d[2].Oa[2]*Math.floor(b.d[2].ba/2);c=Je(c,b.d[2].Td,b.d[2].A,b.d[2].Ha,b.Lc,b.kc,b,b.hb,b.ho);b.hb&&(c.m=b.m.i[2].i[Math.floor(b.d[2].ba/2)].Ua);b.i[2].i[Math.floor(b.d[2].ba/2)]=c;b.hi=Math.floor(b.d[2].ba/2);b.Dm=Math.floor(b.d[2].ba/2);A.Nd(a.n+".reslice");return b.kc};function Ne(){Ee.call(this);this.n="parserOFF"}w(Ne,Ee);
Ne.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===g[a]){var b=Ge(g,n,a);n=a+1;return b}n=e;return Ge(g,n,e-1)}A.ke(this.n+".parse");this.S=c;var e=c.byteLength,g=this.f("uchar",e);c=[];b.t=new dd(e);b.$=new dd(e);for(var k=b.t,l=b.$,n=0,m=d(),m=("OFF"===m?d():m).split(" "),q=m[0],m=m[1];q--;){var p=d(),p=p.split(" ");c.push([parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])])}for(;m--;){var p=d(),p=p.split(" "),r=
c[parseInt(p[1],10)],q=c[parseInt(p[2],10)],p=c[parseInt(p[3],10)];k.add(r[0],r[1],r[2]);k.add(q[0],q[1],q[2]);k.add(p[0],p[1],p[2]);r=new qd(r[0],r[1],r[2]);p=new qd(p[0],p[1],p[2]);q=ud((new qd(q[0],q[1],q[2])).Fc(r),p.Fc(r));q.normalize();l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z)}A.Nd(this.n+".parse");c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};t("X.parserOFF",Ne);t("X.parserOFF.prototype.parse",Ne.prototype.parse);function Oe(){Ee.call(this);this.n="parserDCM"}w(Oe,Ee);
Oe.prototype.parse=function(a,b,c){b.ai={};b.ai.Hp=0;this.Qi(c,b);if(null==b.da.length||b.Ca.length==b.da.length){b.ai.Hp=b.da.length;var d={};c={};for(var e=0;e<b.Ca.length;e++)d.hasOwnProperty(b.Ca[e].series_instance_uid)||(d[b.Ca[e].series_instance_uid]=[],c[b.Ca[e].series_instance_uid]={}),c[b.Ca[e].series_instance_uid].hasOwnProperty(b.Ca[e].sop_instance_uid)||(c[b.Ca[e].series_instance_uid][b.Ca[e].sop_instance_uid]=!0,d[b.Ca[e].series_instance_uid].push(b.Ca[e]));var g=Object.keys(d)[0],e=
d[g],k=e.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new qd(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],
e[0].image_orientation_patient[5]),d=ud(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&
(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-n[0],m=d[1]-n[1],q=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+m*m+q*q);break;case "instance_number":e[0].pixel_spacing[2]=1;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,p=e[k-1].image_position_patient,g=p[0]-n[0],m=p[1]-
n[1],q=p[2]-n[2],g=Math.sqrt(g*g+m*m+q*q),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;g=n*d;p=null;switch(e[0].gl){case 8:p=new Uint8Array(g);break;case 16:p=new Uint16Array(g);break;case 32:p=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.ii=e[0].pixel_spacing;
for(var r=0;r<k;r++){var s=e[r].data,g=0;switch(l){case "image_position_patient":g=e[r].image_position_patient[0]-e[0].image_position_patient[0];m=e[r].image_position_patient[1]-e[0].image_position_patient[1];q=e[r].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+m*m+q*q)/e[0].pixel_spacing[2];break;case "instance_number":g=e[r].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(s,g*n)}c.data=p;b.S=p;b.nb=[e[0].columns,
e[0].rows,d];c.II=b.nb;d=Fe(p);k=d[0];d=d[1];c.min=b.ne=b.Pb=k;c.max=b.Yb=b.Ob=d;-Infinity==b.xb&&(b.xb=k);Infinity==b.zb&&(b.zb=d);m=e[0].image_position_patient;k=Dd();switch(l){case "image_position_patient":d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new qd(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=ud(d,g);Id(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],
-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-m[0]);Id(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-m[1]);Id(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],m[2]);Id(k,3,0,0,0,1);break;case "instance_number":Id(k,0,-1,0,0,-m[0]);Id(k,1,-0,-1,-0,-m[1]);Id(k,2,0,0,1,m[2]);
Id(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Re=k;c.Ue=Dd();Md(c.Re,c.Ue);l=Cd(0,0,0,1);e=Bd();Pd(k,l,e);l=Cd(1,1,1,1);d=Bd();Pd(k,l,d);c.Pk=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=He(k,[b.nb[0],b.nb[1],b.nb[2]]);c.Nk=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.Ok=[e[0],e[2],e[4]];b.Cf(c);b.ng=Me(this,b)}c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};
Oe.prototype.ze=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Oe.prototype.Qi=function(a,b){this.S=a;if("undefined"==typeof b.Ca||null==b.Ca)b.Ca=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.f("ushort",this.S.byteLength),e=66,g=null,k=null,l=null,n=null;e<d.length;)switch(g=d[e++],k=d[e++],l=d[e++],n=d[e++],"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),g){case 2:switch(k){case 16:for(var m="",g=g=0;g<n/2;g++)l=d[e++],k=l&255,
l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);c.transfer_syntax_uid=m.replace(/\0/g,"");break;default:e=Oe.prototype.ze(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.gl=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:m="";for(g=0;g<n/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);m=m.split("\\");c.pixel_spacing=
[parseFloat(m[0]),parseFloat(m[1]),Infinity];break;default:e=Oe.prototype.ze(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(g=0;g<n/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(k),c.series_instance_uid+=String.fromCharCode(l);break;case 19:m="";for(g=0;g<n/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);c.instance_number=parseInt(m,10);break;case 50:m="";for(g=0;g<n/2;g++)l=d[e++],k=l&255,l=(l&65280)>>
8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);m=m.split("\\");c.image_position_patient=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])];break;case 55:m="";for(g=0;g<n/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);m=m.split("\\");c.image_orientation_patient=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4]),parseFloat(m[5])];break;default:e=Oe.prototype.ze(d,e,l,n)}break;case 65534:switch(k){default:n=0,e+=n/
2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(g=0;g<n/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(k),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Oe.prototype.ze(d,e,l,n)}break;case 16:switch(k){case 8720:for(g=0;g<n/2;g++)e++;break;default:e=Oe.prototype.ze(d,e,l,n)}break;default:e=Oe.prototype.ze(d,e,l,n)}switch(c.gl){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=
new Uint32Array(c.columns*c.rows)}this.Ma=this.S.byteLength-c.columns*c.rows*2;d=null;switch(c.gl){case 8:d=this.f("uchar",c.columns*c.rows);break;case 16:d=this.f("ushort",c.columns*c.rows);break;case 32:d=this.f("uint",c.columns*c.rows)}c.data=d;b.Ca.push(c);return b};t("X.parserDCM",Oe);t("X.parserDCM.prototype.parse",Oe.prototype.parse);function Pe(){Ee.call(this);this.n="parserVTK"}w(Pe,Ee);
Pe.prototype.parse=function(a,b,c){A.ke(this.n+".parse");var d=b.t,e=b.$,g=new Uint8Array(c),k="";b.t=d=new dd(c.byteLength);b.$=e=new dd(c.byteLength);c=0;for(var l=g.length;c<l;c+=32768)k+=Ge(g,c,Math.min(c+32768,l));g=k.split("\n");k=g.length;this.Co=this.Do=null;this.Vk=[];this.Ye=Vd;this.wu=this.rj=this.lj=this.sj=!1;c=0;for(l=k%8;l--;)Qe(this,g[c]),c++;for(l=.125*k^0;l--;)Qe(this,g[c]),c++,Qe(this,g[c]),c++,Qe(this,g[c]),c++,Qe(this,g[c]),c++,Qe(this,g[c]),c++,Qe(this,g[c]),c++,Qe(this,g[c]),
c++,Qe(this,g[c]),c++;c=this.Do;var g=this.Co,k=g.length,n=l=this.Vk.length;do{var m=this.Vk[l-n],q=m.length,p;for(p=0;p<q&&!("LINES"==this.Ye&&p+1>=q);p++){var r=parseInt(m[p],10),s=c.get(r);d.add(s[0],s[1],s[2]);var z=r,y=s;"LINES"==this.Ye?(z=parseInt(m[p+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.Ye&&(0!=p&&p!=q-1||d.add(s[0],s[1],s[2]));r<k?(y=g.get(r),e.add(y[0],y[1],y[2]),"LINES"==this.Ye?(z=g.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.Ye&&(0!=p&&p!=q-1||e.add(y[0],
y[1],y[2]))):(z=new qd(s[0],s[1],s[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.Ye?(z=new qd(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.Ye&&(0!=p&&p!=q-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.Vd=this.Ye;A.Nd(this.n+".parse");d=new Zd;d.Na=b;d.xa=a;this.dispatchEvent(d)};
function Qe(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.sj=!0;a.lj=!1;a.rj=!1;c=parseInt(c[1],10);a.Do=new dd(3*c);a.Co=new dd(3*c);return;case "VERTICES":a.lj=!0;a.sj=!1;a.rj=!1;c=parseInt(c[1],10);if(3<=c)a.Ye=Vd;else if(1==c)a.Ye="POINTS";else throw Error("This VTK file is not supported!");a.Vk=[];return;case "TRIANGLE_STRIPS":a.lj=!0;a.sj=!1;a.rj=!1;a.Ye="TRIANGLE_STRIPS";a.Vk=[];return;case "LINES":a.lj=!0;a.sj=!1;a.rj=!1;a.Ye="LINES";a.Vk=
[];return;case "POLYGONS":a.lj=!0;a.sj=!1;a.rj=!1;a.Ye="POLYGONS";a.Vk=[];return;case "POINT_DATA":a.rj=!0;a.sj=!1;a.lj=!1;return}if(a.sj)if(1==d||isNaN(parseFloat(e)))a.sj=!1;else{if(3<=d){var e=parseFloat(c[0]),g=parseFloat(c[1]),k=parseFloat(c[2]);a.Do.add(e,g,k)}6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),k=parseFloat(c[5]),a.Do.add(e,g,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Do.add(d,e,c))}else a.lj?1==d||isNaN(parseFloat(e))?a.lj=!1:(c=c.slice(1),a.Vk.push(c)):
a.rj&&("NORMALS"==e?a.wu=!0:1==d||isNaN(parseFloat(e))?(a.rj=!1,a.wu=!1):a.wu&&(3<=d&&(e=parseFloat(c[0]),g=parseFloat(c[1]),k=parseFloat(c[2]),a.Co.add(e,g,k)),6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),k=parseFloat(c[5]),a.Co.add(e,g,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Co.add(d,e,c))))}t("X.parserVTK",Pe);t("X.parserVTK.prototype.parse",Pe.prototype.parse);function Re(){Ee.call(this);this.n="parserFSM";this.or=!1}w(Re,Ee);
Re.prototype.parse=function(a,b,c){A.ke(this.n+".parse");this.S=c;var d=b.t,e=b.$;b.Gm=[];var g=b.Gm;c=0;var k;do k=this.f("uchar"),c++;while(200>c&&10!=k);this.f("uchar");e=this.f("uint");c=this.f("uint");var l=this.f("float",3*e);k=this.f("uint",3*c);var n=new Uint32Array(e),m=new Float32Array(9*c);b.t=d=new dd(9*c);b.$=e=new dd(9*c);var q;for(q=0;q<c;q++){var p=3*q,r=k[p],s=k[p+1],z=k[p+2];g.push(r);g.push(s);g.push(z);n[r]+=1;n[s]+=1;n[z]+=1;var p=3*r,y=3*s,F=3*z,D=l[p],O=l[p+1],K=l[p+2],s=l[y],
z=l[y+1],r=l[y+2],J=l[F],G=l[F+1],E=l[F+2];d.add(D,O,K);d.add(s,z,r);d.add(J,G,E);D=new qd(D,O,K);J=new qd(J,G,E);s=(new qd(s,z,r)).clone().Fc(D);z=J.clone().Fc(D);s=ud(s,z).normalize();m[p]+=s.x;m[p+1]+=s.y;m[p+2]+=s.z;m[y]+=s.x;m[y+1]+=s.y;m[y+2]+=s.z;m[F]+=s.x;m[F+1]+=s.y;m[F+2]+=s.z}for(q=0;q<c;q++)p=3*q,r=k[p],s=k[p+1],z=k[p+2],p=3*r,y=3*s,F=3*z,g=new qd(m[y],m[y+1],m[y+2]),l=new qd(m[F],m[F+1],m[F+2]),p=(new qd(m[p],m[p+1],m[p+2])).scale(1/n[r]).normalize(),g=g.scale(1/n[s]).normalize(),l=l.scale(1/
n[z]).normalize(),e.add(p.x,p.y,p.z),e.add(g.x,g.y,g.z),e.add(l.x,l.y,l.z);c=this.f("uchar",this.S.byteLength-this.Ma);k=null;for(p=0;p<c.length;p++)if(99==c[p]&&114==c[p+1]&&97==c[p+2]&&115==c[p+3]){for(e=k=p+9;10!=c[p]&&p<c.length;)e++,p++;k=Ge(c.subarray(k,e)).split(" ");break}k&&(b.lc.xF(parseFloat(k[0])),b.lc.yF(parseFloat(k[1])),b.lc.zF(parseFloat(k[2])));b.Vd=Vd;A.Nd(this.n+".parse");c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};t("X.parserFSM",Re);t("X.parserFSM.prototype.parse",Re.prototype.parse);var Se={Zu:function(a,b,c){return Se.update(a,0,b,c)},update:function(a,b,c,d){var e=Se.bH,g="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(g=d&7;g--;++c)b=b>>>8^e[(b^a[c])&255];for(g=d>>3;g--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Te;
Te=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Se.bH=Te;function Ue(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,g,k,l,n,m,q,p,r;for(p=0;p<b;++p)a[p]>c&&(c=a[p]),a[p]<d&&(d=a[p]);e=1<<c;g=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(p=0;p<b;++p)if(a[p]===k){m=0;q=l;for(r=0;r<k;++r)m=m<<1|q&1,q>>=1;for(r=m;r<e;r+=n)g[r]=k<<16|p;++l}++k;l<<=1;n<<=1}return[g,c,d]};function Ve(a,b){this.Tu=[];this.Vu=32768;this.xg=this.Io=this.jb=this.ry=0;this.input=new Uint8Array(a);this.JA=!1;this.Wu=We;this.resize=!1;if(b||!(b={}))b.index&&(this.jb=b.index),b.bufferSize&&(this.Vu=b.bufferSize),b.bufferType&&(this.Wu=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Wu){case Xe:this.sc=32768;this.Qa=new Uint8Array(32768+this.Vu+258);break;case We:this.sc=0;this.Qa=new Uint8Array(this.Vu);this.yl=this.ZI;this.XA=this.sI;this.vv=this.AI;break;default:throw Error("invalid inflate mode");
}}var Xe=0,We=1;
Ve.prototype.Jj=function(){for(;!this.JA;){var a=Ye(this,3);a&1&&(this.JA=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.jb,c=this.Qa,d=this.sc,e=void 0,g=void 0,k=void 0,l=c.length,e=void 0;this.xg=this.Io=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");g=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");g|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=e;
e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(g===~k)throw Error("invalid uncompressed block header: length verify");if(b+g>a.length)throw Error("input buffer is broken");switch(this.Wu){case Xe:for(;d+g>c.length;)e=l-d,g-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.sc=d,c=this.yl(),d=this.sc;break;case We:for(;d+g>c.length;)c=this.yl({MB:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+g),d);d+=g;this.jb=b+=g;this.sc=
d;this.Qa=c;break;case 1:this.vv(Ze,$e);break;case 2:af(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.XA()};
var cf=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),df=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),ef=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),ff=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),gf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),hf=new Uint8Array(288),
jf,kf;jf=0;for(kf=hf.length;jf<kf;++jf)hf[jf]=143>=jf?8:255>=jf?9:279>=jf?7:8;var Ze=Ue(hf),lf=new Uint8Array(30),mf,nf;mf=0;for(nf=lf.length;mf<nf;++mf)lf[mf]=5;var $e=Ue(lf);function Ye(a,b){for(var c=a.Io,d=a.xg,e=a.input,g=a.jb,k;d<b;){k=e[g++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.Io=c>>>b;a.xg=d-b;a.jb=g;return k}
function of(a,b){for(var c=a.Io,d=a.xg,e=a.input,g=a.jb,k=b[0],l=b[1],n;d<l;){n=e[g++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.Io=c>>k;a.xg=d-k;a.jb=g;return e&65535}
function af(a){function b(a,b,c){var d,e,g;for(g=0;g<a;)switch(d=of(this,b),d){case 16:for(d=3+Ye(this,2);d--;)c[g++]=e;break;case 17:for(d=3+Ye(this,3);d--;)c[g++]=0;e=0;break;case 18:for(d=11+Ye(this,7);d--;)c[g++]=0;e=0;break;default:e=c[g++]=d}return c}var c=Ye(a,5)+257,d=Ye(a,5)+1,e=Ye(a,4)+4,g=new Uint8Array(cf.length),k;for(k=0;k<e;++k)g[cf[k]]=Ye(a,3);e=Ue(g);g=new Uint8Array(c);k=new Uint8Array(d);a.vv(Ue(b.call(a,c,e,g)),Ue(b.call(a,d,e,k)))}f=Ve.prototype;
f.vv=function(a,b){var c=this.Qa,d=this.sc;this.mB=a;for(var e=c.length-258,g,k,l;256!==(g=of(this,a));)if(256>g)d>=e&&(this.sc=d,c=this.yl(),d=this.sc),c[d++]=g;else for(g-=257,l=df[g],0<ef[g]&&(l+=Ye(this,ef[g])),g=of(this,b),k=ff[g],0<gf[g]&&(k+=Ye(this,gf[g])),d>=e&&(this.sc=d,c=this.yl(),d=this.sc);l--;)c[d]=c[d++-k];for(;8<=this.xg;)this.xg-=8,this.jb--;this.sc=d};
f.AI=function(a,b){var c=this.Qa,d=this.sc;this.mB=a;for(var e=c.length,g,k,l;256!==(g=of(this,a));)if(256>g)d>=e&&(c=this.yl(),e=c.length),c[d++]=g;else for(g-=257,l=df[g],0<ef[g]&&(l+=Ye(this,ef[g])),g=of(this,b),k=ff[g],0<gf[g]&&(k+=Ye(this,gf[g])),d+l>e&&(c=this.yl(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.xg;)this.xg-=8,this.jb--;this.sc=d};
f.yl=function(){var a=new Uint8Array(this.sc-32768),b=this.sc-32768,c=this.Qa;a.set(c.subarray(32768,a.length));this.Tu.push(a);this.ry+=a.length;c.set(c.subarray(b,b+32768));this.sc=32768;return c};f.ZI=function(a){var b=this.input.length/this.jb+1|0,c=this.input,d=this.Qa;a&&("number"===typeof a.MB&&(b=a.MB),"number"===typeof a.OH&&(b+=a.OH));2>b?(a=(c.length-this.jb)/this.mB[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.Qa=a};
f.XA=function(){var a=0,b=this.Qa,c=this.Tu,d,e=new Uint8Array(this.ry+(this.sc-32768)),g,k,l,n;if(0===c.length)return this.Qa.subarray(32768,this.sc);g=0;for(k=c.length;g<k;++g)for(d=c[g],l=0,n=d.length;l<n;++l)e[a++]=d[l];g=32768;for(k=this.sc;g<k;++g)e[a++]=b[g];this.Tu=[];return this.buffer=e};f.sI=function(){var a,b=this.sc;this.resize?(a=new Uint8Array(b),a.set(this.Qa.subarray(0,b))):a=this.Qa.subarray(0,b);return this.buffer=a};new Uint8Array(256);var pf;for(pf=0;256>pf;++pf)for(var qf=pf,rf=7,qf=qf>>>1;qf;qf>>>=1)--rf;var sf=[],tf;for(tf=0;288>tf;tf++)switch(!0){case 143>=tf:sf.push([tf+48,8]);break;case 255>=tf:sf.push([tf-144+400,9]);break;case 279>=tf:sf.push([tf-256+0,7]);break;case 287>=tf:sf.push([tf-280+192,8]);break;default:throw"invalid literal: "+tf;}
var uf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(uf);function vf(){};function wf(a){this.input=a;this.jb=0;this.member=[]}
wf.prototype.Jj=function(){for(var a=this.input.length;this.jb<a;){var b=new vf,c=void 0,d=void 0,e=void 0,g=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.jb;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(g=0;0<(c=l[d++]);)k[g++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(g=0;0<(c=l[d++]);)k[g++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=Se.Zu(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Ve(l,{index:d,bufferSize:e});b.data=e=d.Jj();d=d.jb;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(Se.Zu(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Se.Zu(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.jb=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function xf(){Ee.call(this);this.n="parserMGZ";this.or=!1}w(xf,Ee);
xf.prototype.parse=function(a,b,c,d){A.ke(this.n+".parse");d&&(c=(new wf(new Uint8Array(c))).Jj(),c=c.buffer);d=this.Qi(c);var e=[d.Xw,d.Yw,d.Zw];b.nb=e;var g=d.HF;b.ii=g;c=d.min;var k=d.max;b.ne=b.Pb=c;b.Yb=b.Ob=k;-Infinity==b.xb&&(b.xb=c);Infinity==b.zb&&(b.zb=k);c=Dd();Id(c,0,d.hg[0][0],d.hg[1][0],d.hg[2][0],0);Id(c,1,d.hg[0][1],d.hg[1][1],d.hg[2][1],0);Id(c,2,d.hg[0][2],d.hg[1][2],d.hg[2][2],0);Id(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],m=0;3>m;++m)e[m]=d.hg[3][m]-(c[m+0]*g[0]*
k+c[m+4]*g[1]*l+c[m+8]*g[2]*n);g=e[1];k=e[2];c[12]=e[0];c[13]=g;c[14]=k;c[15]=1;d.Re=c;d.Ue=Dd();Md(d.Re,d.Ue);e=Cd(0,0,0,1);g=Bd();Pd(c,e,g);k=Cd(1,1,1,1);e=Bd();Pd(c,k,e);c=He(c,b.nb);d.Pk=[e[0]-g[0],e[1]-g[1],e[2]-g[2]];d.Nk=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.Ok=[c[0],c[2],c[4]];b.Cf(d);A.Nd(this.n+".parse");b.ng=Me(this,b);d=new Zd;d.Na=b;d.xa=a;this.dispatchEvent(d)};
xf.prototype.Qi=function(a){this.S=a;a={version:0,eH:0,cH:0,mJ:0,dH:0,Xw:0,Yw:0,Zw:0,rM:0,type:0,QI:0,hE:0,CQ:null,hg:null,HF:null,data:null,min:Infinity,max:-Infinity};a.version=this.f("uint");a.Xw=this.f("uint");a.Yw=this.f("uint");a.Zw=this.f("uint");a.rM=this.f("uint");a.type=this.f("uint");a.QI=this.f("uint");a.hE=this.f("ushort");if(0<a.hE){a.HF=this.f("float",3);var b=[];b.push(this.f("float",3));b.push(this.f("float",3));b.push(this.f("float",3));b.push(this.f("float",3));a.hg=b}this.Ma=284;
b=a.Xw*a.Yw*a.Zw;switch(a.type){case 0:a.data=this.f("uchar",b);break;case 1:a.data=this.f("uint",b);break;case 3:a.data=this.f("float",b);break;case 4:a.data=this.f("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Fe(a.data);a.min=b[0];a.max=b[1];this.Ma+16<this.S.byteLength&&(a.eH=this.f("float"),a.mJ=this.f("float"),a.cH=this.f("float"),a.dH=this.f("float"));return a};t("X.parserMGZ",xf);t("X.parserMGZ.prototype.parse",xf.prototype.parse);function yf(){Ee.call(this);this.n="parserLBL"}w(yf,Ee);
yf.prototype.parse=function(a,b,c){A.ke(this.n+".parse");var d=b.Gm,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this.S=c;var g=[],k=this.f("uchar",c.byteLength),l=k.length,n=!1,m=0;for(c=1;c<l;c++)10==k[c-1]?(m=c,n=!0):n&&32==k[c]&&(g.push(parseInt(Ge(k,m,c),10)),n=!1);k=b.cb.bb?b.cb.bb:new Float32Array(e);l=g.length;for(c=0;c<l;c++)k[g[c]]=1;g=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];g[l++]=n;g[l++]=
n;g[l++]=n}b.cb.bb=k;b.cb.io=g;b.cb.C=!0;A.Nd(this.n+".parse");d=new Zd;d.Na=b;d.xa=a;this.dispatchEvent(d)};t("X.parserLBL",yf);t("X.parserLBL.prototype.parse",yf.prototype.parse);function zf(){Ee.call(this);this.n="parserCRV";this.or=!1}w(zf,Ee);
zf.prototype.parse=function(a,b,c){A.ke(this.n+".parse");var d=b.Gm;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this.S=c;this.Ma=3;var e=this.f("uint");this.f("uint");this.f("uint");var g=0,k=0,l=0,n=0,m=0,q=0,p=0,r=0,s=0,z=0,y=0;c=Array(2);var F=Array(2),D=this.f("float",e),O;for(O=0;O<e;O++){var K=D[O];0==O&&(c[0]=F[0]=K);0<=K?(g++,n+=K):(k++,l+=K);s+=K;y++;F[0]=Math.max(K,F[0]);c[0]=Math.min(K,c[0]);D[O]=K}0!=g&&(m=n/g);0!=k&&(q=l/k);0!=y&&(z=s/y);for(y=s=l=n=0;y<e;y++)K=
D[y],O=0,0<=K?(O=Math.pow(K-m,2),n+=O):(O=Math.pow(K-q,2),l+=O),O=Math.pow(K-z,2),s+=O;1<g&&(p=Math.sqrt(n/(g-1)));1<k&&(r=Math.sqrt(l/(k-1)));c[1]=q-2.5*r;F[1]=m+2.5*p;e=d.length;g=new Float32Array(3*e);for(y=0;y<e;y++)k=D[d[y]],l=3*y,g[l]=k,g[l+1]=k,g[l+2]=k;b.cb.ne=c[1];b.cb.Yb=F[1];-Infinity==b.cb.xb&&(b.cb.xb=c[1]);Infinity==b.cb.zb&&(b.cb.zb=F[1]);b.cb.bb=D;b.cb.io=g;b.cb.C=!0;A.Nd(this.n+".parse");d=new Zd;d.Na=b;d.xa=a;this.dispatchEvent(d)};t("X.parserCRV",zf);
t("X.parserCRV.prototype.parse",zf.prototype.parse);function Af(a,b){var c,d;this.input=a;this.jb=0;if(b||!(b={}))b.index&&(this.jb=b.index),b.verify&&(this.pP=b.verify);c=a[this.jb++];d=a[this.jb++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.iE=new Ve(a,{index:this.jb,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Af.prototype.Jj=function(){var a=this.input,b;b=this.iE.Jj();this.jb=this.iE.jb;if(this.pP){var a=(a[this.jb++]<<24|a[this.jb++]<<16|a[this.jb++]<<8|a[this.jb++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var g=c.length,k,l=0;0<g;){k=1024<g?1024:g;g-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Bf(){Ee.call(this);this.n="parserRAW"}w(Bf,Ee);
Bf.prototype.parse=function(a,b,c,d){A.ke(this.n+".parse");d&&(c=(new Af(new Uint8Array(c))).Jj(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Fe(d.data);c=e[0];e=e[1];d.min=b.ne=b.Pb=c;d.max=b.Yb=b.Ob=e;-Infinity==b.xb&&(b.xb=c);Infinity==b.zb&&(b.zb=e);e=Ed();d.Re=e;d.Ue=Ed();var g=Cd(0,0,0,1);c=Bd();Pd(e,g,c);var k=Cd(1,1,1,1),g=Bd();Pd(e,k,g);e=He(e,b.nb);d.Pk=[g[0]-c[0],g[1]-c[1],g[2]-c[2]];d.Nk=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.Ok=[e[0],e[2],e[4]];b.Cf(d);A.Nd(this.n+".parse");b.ng=
Me(this,b);d=new Zd;d.Na=b;d.xa=a;this.dispatchEvent(d)};t("X.parserRAW",Bf);t("X.parserRAW.prototype.parse",Bf.prototype.parse);function Cf(){Ee.call(this);this.n="parserIMAGE"}w(Cf,Ee);Cf.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),g=e.length,k=Array(g);g--;)k[g]=String.fromCharCode(e[g]);e=window.btoa(k.join(""));g=new Image;Tc(g,"load",this.PN.bind(this,g,a,b,c,d));g.src="data:image/"+d+";base64,"+e};Cf.prototype.PN=function(a,b,c){b.ng=a;b.uj=null;a=new Zd;a.Na=c;a.xa=b;this.dispatchEvent(a)};t("X.parserIMAGE",Cf);t("X.parserIMAGE.prototype.parse",Cf.prototype.parse);function Df(){Ee.call(this);this.n="parserLUT"}w(Df,Ee);
Df.prototype.parse=function(a,b,c){A.ke(this.n+".parse");this.S=c;c=this.f("uchar",c.byteLength);var d=c.length,e=0,g;for(g=0;g<d;g++)if(10==c[g]){var k=Ge(c,e,g),e=g+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.Nd(this.n+".parse");c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};
t("X.parserLUT",Df);t("X.parserLUT.prototype.parse",Df.prototype.parse);function Ef(){Ee.call(this);this.n="parserMRC"}w(Ef,Ee);
Ef.prototype.parse=function(a,b,c){A.ke(this.n+".parse");c=this.Qi(c);var d=c.min,e=c.max;b.nb=[c.Op,c.Pp,c.Qp];b.ii=[c.xlen/c.ED,c.PF/c.FD,c.RF/c.GD];b.ne=b.Pb=d;b.Yb=b.Ob=e;-Infinity==b.xb&&(b.xb=d);Infinity==b.zb&&(b.zb=e);e=Dd();Id(e,3,0,0,0,1);Id(e,0,-1,0,0,c.Op);Id(e,1,0,0,-1,c.Pp);Id(e,2,0,-1,0,c.Qp);c.Re=e;c.Ue=Dd();Md(c.Re,c.Ue);var g=Cd(0,0,0,1),d=Bd();Pd(e,g,d);var k=Cd(1,1,1,1),g=Bd();Pd(e,k,g);k=[c.Op,c.Pp,c.Qp];e=He(e,k);c.Pk=[g[0]-d[0],g[1]-d[1],g[2]-d[2]];c.Nk=[e[1]+e[0]+1,e[3]-e[2]+
1,e[5]-e[4]+1];c.Ok=[e[0],e[2],e[4]];b.nb=k;b.Cf(c);b.ng=Me(this,b);A.Nd(this.n+".parse");c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};
Ef.prototype.Qi=function(a){this.S=a;a={Op:0,Pp:0,Qp:0,mode:0,KT:0,LT:0,MT:0,ED:0,FD:0,GD:0,xlen:0,PF:0,RF:0,alpha:0,beta:0,gamma:0,$L:0,aM:0,bM:0,Qu:0,Er:0,fl:0,xT:0,next:0,yI:0,Pa:null,tM:0,vM:0,Pa:null,vL:0,pT:0,tL:0,Rc:0,pM:0,qM:0,nP:0,oP:0,eP:null,tP:0,vP:0,AP:0,SS:0,bU:0,sO:0,uM:0,data:null,min:Infinity,max:-Infinity,ET:0,fF:null,aU:null,UT:null,orientation:null,JT:null};this.Ma=0;a.Op=this.f("sint");a.Pp=this.f("sint");a.Qp=this.f("sint");a.mode=this.f("sint");var b=a.Op*a.Pp*a.Qp;this.Ma=
1024;switch(a.mode){case 0:a.data=this.f("schar",b);break;case 1:a.data=this.f("sshort",b);break;case 2:a.data=this.f("float",b);break;case 3:a.data=this.f("uint",b);break;case 4:a.data=this.f("double",b);break;case 6:a.data=this.f("ushort",b);break;case 16:a.data=this.f("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.Ma=28;a.ED=this.f("sint");a.FD=this.f("sint");a.GD=this.f("sint");a.xlen=this.f("float");a.PF=this.f("float");a.RF=this.f("float");a.alpha=this.f("float");
a.beta=this.f("float");a.gamma=this.f("float");a.$L=this.f("sint");a.aM=this.f("sint");a.bM=this.f("sint");a.Qu=this.f("float");a.Er=this.f("float");a.fl=this.f("float");a.wT=this.f("sint");a.next=this.f("sint");a.yI=this.f("short");a.tM=this.f("short");a.vM=this.f("short");a.vL=this.f("sint");a.oT=this.f("sint");a.tL=this.f("short");a.Rc=this.f("short");a.pM=this.f("short");a.qM=this.f("short");a.nP=this.f("short");a.oP=this.f("short");a.eP=this.f("float",6);this.Ma=196;a.tP=this.f("float");a.vP=
this.f("float");a.AP=this.f("float");this.Ma=216;a.sO=this.f("float");a.uM=this.f("sint");a.AT=this.f("schar",10);if(0!=a.next)switch(this.Ma=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.f("schar",b);break;case 1:a.data=this.f("sshort",b);break;case 2:a.data=this.f("float",b);break;case 3:a.data=this.f("uint",b);break;case 4:a.data=this.f("double",b);break;case 6:a.data=this.f("ushort",b);break;case 16:a.data=this.f("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.fl-(a.Er-a.fl)?(a.min=a.Qu,a.max=a.fl+(a.fl-a.Qu)):(a.min=a.fl-(a.Er-a.fl),a.max=a.Er);return a};t("X.parserMRC",Ef);t("X.parserMRC.prototype.parse",Ef.prototype.parse);function Ff(){Ee.call(this);this.n="parserNRRD"}w(Ff,Ee);
Ff.prototype.parse=function(a,b,c){A.ke(this.n+".parse");this.S=c;c=this.f("uchar",c.byteLength);var d=c.length,e=null,g=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ge(c,0,k-2);g=k+1;break}var l,n,m,q,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.NL=!0:!l.match(/^#/)&&(q=l.match(/(.*):(.*)/))&&(n=q[1].trim(),l=q[2].trim(),(m=this.fJ[n])?m.call(this,l):this[n]=l);if(!this.NL)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");
if(!this.gc&&(this.gc=[new qd(1,0,0),new qd(0,1,0),new qd(0,0,1)],this.ey))for(d=[],q=0;2>=q;q++)d.push(isNaN(this.ey[q])?void 0:this.gc[q].scale(this.ey[q]));g=c.subarray(g);if("gzip"==this.encoding||"gz"==this.encoding)g=(new wf(new Uint8Array(g))).Jj();g=g.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.kj(g);q=Fe(c.data);g=c.min=q[0];q=c.max=q[1];b.ne=b.Pb=g;b.Yb=b.Ob=q;b.nb=[this.ay[0],this.ay[1],this.ay[2]];d=(new qd(this.gc[0][0],this.gc[0][1],this.gc[0][2])).Ng();e=(new qd(this.gc[1][0],
this.gc[1][1],this.gc[1][2])).Ng();k=(new qd(this.gc[2][0],this.gc[2][1],this.gc[2][2])).Ng();b.ii=[d,e,k];-Infinity==b.xb&&(b.xb=g);Infinity==b.zb&&(b.zb=q);d=q=1;"left-posterior-superior"==this.fF&&(d=q=-1);g=Ed();Id(g,0,q*this.gc[0][0],q*this.gc[1][0],q*this.gc[2][0],q*this.dy[0]);Id(g,1,d*this.gc[0][1],d*this.gc[1][1],d*this.gc[2][1],d*this.dy[1]);Id(g,2,1*this.gc[0][2],1*this.gc[1][2],1*this.gc[2][2],1*this.dy[2]);Id(g,3,0,0,0,1);c.Re=g;c.Ue=Dd();Md(c.Re,c.Ue);d=Cd(0,0,0,1);q=Bd();Pd(g,d,q);
e=Cd(1,1,1,1);d=Bd();Pd(g,e,d);g=He(g,b.nb);c.Pk=[d[0]-q[0],d[1]-q[1],d[2]-q[2]];c.Nk=[g[1]-g[0]+1,g[3]-g[2]+1,g[5]-g[4]+1];c.Ok=[g[0],g[2],g[4]];b.Cf(c);A.Nd(this.n+".parse");b.ng=Me(this,b);c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};
Ff.prototype.fJ={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.kj=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.kj=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.kj=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.kj=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.kj=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.kj=Uint32Array;break;case "float":this.kj=Float32Array;break;case "double":this.kj=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.fT=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Kj=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.ay=e},space:function(a){return this.fF=a},"space origin":function(a){return this.dy=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.gc=function(){var a,g,k;k=[];a=0;for(g=c.length;a<g;a++)d=c[a],k.push(function(){var a,c,e,g;e=d.slice(1,-1).split(/,/);g=[];a=0;for(c=e.length;a<c;a++)b=e[a],g.push(parseFloat(b));return g}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.ey=e}};t("X.parserNRRD",Ff);t("X.parserNRRD.prototype.parse",Ff.prototype.parse);function Gf(){Ee.call(this);this.n="parserSTL"}w(Gf,Ee);
Gf.prototype.parse=function(a,b,c){A.ke(this.n+".parse");this.S=c;var d=b.t,e=b.$;if("solid"==Ge(this.f("uchar",5))){b.t=d=new dd(c.byteLength);b.$=e=new dd(c.byteLength);var g=d,d=e,e=this.f("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,m;for(m=0;m<c;m++)if(10==e[m]){if(k||l){var q=Ge(e,n,m).split(" "),l=parseFloat(q[0]),p=parseFloat(q[1]),q=parseFloat(q[2]);k?(d.add(l,p,q),d.add(l,p,q),d.add(l,p,q)):g.add(l,p,q);l=k=!1}}else 32==e[m-1]&&(102==e[m]?(n=m+=13,k=!0):118==e[m]&&(n=m+=7,l=!0))}else for(this.Ma=
80,g=this.f("uint"),b.t=d=new dd(9*g),b.$=e=new dd(9*g),c=c=0;c<g;c++)k=this.f("float",12),n=k[0],m=k[1],l=k[2],e.add(n,m,l),e.add(n,m,l),e.add(n,m,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.Ma+=2;A.Nd(this.n+".parse");g=new Zd;g.Na=b;g.xa=a;this.dispatchEvent(g)};t("X.parserSTL",Gf);t("X.parserSTL.prototype.parse",Gf.prototype.parse);function Hf(){Ee.call(this);this.n="parserNII"}w(Hf,Ee);
Hf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new wf(new Uint8Array(d))).Jj(),d=d.buffer);c=this.Qi(d);d=c.min;e=c.max;b.ne=b.Pb=d;b.Yb=b.Ob=e;-Infinity==b.xb&&(b.xb=d);Infinity==b.zb&&(b.zb=e);d=Dd();Id(d,3,0,0,0,1);if(0<c.Ix){var e=0,g=c.eE,k=c.fE,l=c.gE,n=1,m=1,q=1,p=c.bE,r=c.cE,s=c.dE,e=1-(g*g+k*k+l*l);1E-7>e?(e=1/Math.sqrt(g*g+k*k+l*l),g*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.Rg[1]&&(n=c.Rg[1]);
0<c.Rg[2]&&(m=c.Rg[2]);0<c.Rg[2]&&(q=c.Rg[3]);0>c.Rg[0]&&(q=-q);Id(d,0,(e*e+g*g-k*k-l*l)*n,2*(g*k-e*l)*m,2*(g*l+e*k)*q,p);Id(d,1,2*(g*k+e*l)*n,(e*e+k*k-g*g-l*l)*m,2*(k*l-e*g)*q,r);Id(d,2,2*(g*l-e*k)*n,2*(k*l+e*g)*m,(e*e+l*l-k*k-g*g)*q,s)}else 0<c.ZE?(e=c.hF,g=c.iF,k=c.jF,Id(d,0,e[0],e[1],e[2],e[3]),Id(d,1,g[0],g[1],g[2],g[3]),Id(d,2,k[0],k[1],k[2],k[3])):0==c.Ix?(Id(d,0,c.Rg[1],0,0,0),Id(d,1,0,c.Rg[2],0,0),Id(d,2,0,0,c.Rg[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.Re=d;c.Ue=Dd();
Md(c.Re,c.Ue);g=Cd(0,0,0,1);e=Bd();Pd(d,g,e);k=Cd(1,1,1,1);g=Bd();Pd(d,k,g);k=[c.Kj[1],c.Kj[2],c.Kj[3]];d=He(d,k);c.Pk=[g[0]-e[0],g[1]-e[1],g[2]-e[2]];c.Nk=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.Ok=[d[0],d[2],d[4]];b.nb=k;b.Cf(c);b.ng=Me(this,b);c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};
Hf.prototype.Qi=function(a){this.S=a;a={KO:0,Wm:null,zI:null,aJ:0,zO:0,iO:0,HI:null,Kj:null,HL:0,IL:0,JL:0,FL:0,tv:0,hI:0,PO:0,Rg:null,KF:0,yO:0,xO:0,OO:0,MO:null,uP:null,mI:0,nI:0,NO:0,gP:0,YK:0,ZK:0,FI:null,dI:null,Ix:0,ZE:0,eE:0,fE:0,gE:0,bE:0,cE:0,dE:0,hF:null,iF:null,jF:null,GL:null,An:null,data:null,min:Infinity,max:-Infinity};a.KO=this.f("uint");a.Wm=this.f("uchar",10);a.zI=this.f("uchar",18);a.aJ=this.f("uint");a.zO=this.f("ushort");a.iO=this.f("uchar");a.HI=this.f("uchar");a.Kj=this.f("ushort",
8);a.HL=this.f("float");a.IL=this.f("float");a.JL=this.f("float");a.FL=this.f("ushort");a.tv=this.f("ushort");a.hI=this.f("ushort");a.PO=this.f("ushort");a.Rg=this.f("float",8);a.KF=this.f("float");a.yO=this.f("float");a.xO=this.f("float");a.OO=this.f("ushort");a.MO=this.f("uchar");a.uP=this.f("uchar");a.mI=this.f("float");a.nI=this.f("float");a.NO=this.f("float");a.gP=this.f("float");a.YK=this.f("uint",1);a.ZK=this.f("uint",1);a.FI=this.f("uchar",80);a.dI=this.f("uchar",24);a.Ix=this.f("ushort");
a.ZE=this.f("ushort");a.eE=this.f("float");a.fE=this.f("float");a.gE=this.f("float");a.bE=this.f("float");a.cE=this.f("float");a.dE=this.f("float");a.hF=this.f("float",4);a.iF=this.f("float",4);a.jF=this.f("float",4);a.GL=this.f("uchar",16);a.An=this.f("uchar",4);this.Ma=parseInt(a.KF,10);var b=a.Kj[1]*a.Kj[2]*a.Kj[3];switch(a.tv){case 2:a.data=this.f("uchar",b);break;case 4:a.data=this.f("sshort",b);break;case 8:a.data=this.f("sint",b);break;case 16:a.data=this.f("float",b);break;case 32:a.data=
this.f("complex",b);break;case 64:a.data=this.f("double",b);break;case 256:a.data=this.f("schar",b);break;case 512:a.data=this.f("ushort",b);break;case 768:a.data=this.f("uint",b);break;default:throw Error("Unsupported NII data type: "+a.tv);}b=Fe(a.data);a.min=b[0];a.max=b[1];return a};t("X.parserNII",Hf);t("X.parserNII.prototype.parse",Hf.prototype.parse);function If(){Ee.call(this);this.n="parserTRK"}w(If,Ee);
If.prototype.parse=function(a,b,c){A.ke(this.n+".parse");var d=b.t,e=b.$,g=b.Mc;this.S=c;this.f("uchar",6);this.f("ushort",3);var k=this.f("float",3);this.f("float",3);var l=this.f("ushort");this.f("uchar",200);this.f("ushort");this.f("uchar",200);c=this.f("float",16);this.f("uchar",444);this.f("uchar",4);this.f("uchar",4);this.f("float",6);this.f("uchar",2);this.f("uchar");this.f("uchar");this.f("uchar");this.f("uchar");this.f("uchar");this.f("uchar");var n=this.f("uint");this.f("uint");var m=this.f("uint"),
q=[],p=[],r=Infinity,s=-Infinity,z=null,y=null,F=null,D=null,e=d=null,O=this.f("uint",(this.S.byteLength-1E3)/4);this.Ma=m;for(var K=this.f("float",(this.S.byteLength-1E3)/4),J=0,m=g=0;m<n;m++){for(var G=O[J],E=new dd(3*G),M=0,L=0;L<G;L++){var U=K[J+3*L+L*l+1],H=K[J+3*L+L*l+2],u=K[J+3*L+L*l+3],U=U/k[0],H=H/k[1],u=u/k[2];E.add(U,H,u);if(0<L)var v=E.get(L-1),M=M+Math.sqrt(Math.pow(U-v[0],2)+Math.pow(H-v[1],2)+Math.pow(u-v[2],2));L<G-1&&(g+=6)}J+=3*G+G*l+1;L=E.rg;G=E.og;U=E.sg;H=E.pg;u=E.tg;v=E.qg;if(!z||
L<z)z=L;if(!y||G>y)y=G;if(!F||U<F)F=U;if(!D||H>D)D=H;if(!d||u<d)d=u;if(!e||v>e)e=v;q.push(E);p.push(M)}k=(z+y)/2;F=(F+D)/2;l=(d+e)/2;D=new Float32Array(g);b.t=d=new dd(g);b.$=e=new dd(g);b.Mc=g=new dd(g);for(m=z=0;m<n;m++)for(y=q[m],O=y.count,M=p[m],r=Math.min(r,M),s=Math.max(s,M),L=0;L<O-1;L++){J=y.get(L);K=y.get(L+1);d.add(J[0],J[1],J[2]);d.add(K[0],K[1],K[2]);var E=J[0]-k,G=J[1]-F,U=J[2]-l,H=Math.sqrt(E*E+G*G+U*U),u=K[0]-k,v=K[1]-F,da=K[2]-l,V=Math.sqrt(u*u+v*v+da*da);e.add(E/H,G/H,U/H);e.add(u/
V,v/V,da/V);K=[Math.abs(K[0]-J[0]),Math.abs(K[1]-J[1]),Math.abs(K[2]-J[2])];J=Math.sqrt(K[0]*K[0]+K[1]*K[1]+K[2]*K[2]);K[0]/=J;K[1]/=J;K[2]/=J;g.add(K[0],K[1],K[2]);g.add(K[0],K[1],K[2]);D[z++]=M;D[z++]=M;D[z++]=M;D[z++]=M;D[z++]=M;D[z++]=M}b.Vd="LINES";n=new Xd;n.ne=r;n.Yb=s;n.xb=r;n.zb=s;n.io=D;n.Qz=!1;n.C=!0;b.cb=n;r=!1;for(m=0;16>m;m++)if(0!=c[m]){r=!0;break}!1==r&&(c[0]=c[5]=c[10]=c[15]=1);A.Nd(this.n+".parse");A.p.ty(c,b.lc.yb);c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};t("X.parserTRK",If);
t("X.parserTRK.prototype.parse",If.prototype.parse);function Jf(){Ee.call(this);this.n="parserOBJ"}w(Jf,Ee);
Jf.prototype.parse=function(a,b,c){A.ke(this.n+".parse");this.S=c;c=c.byteLength;var d=this.f("uchar",c),e=[];b.t=new dd(c);b.$=new dd(c);var g=b.t,k=b.$,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var m=Ge(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==m[0])e.push([parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])]);else if("f"==m[0]){var q=e[parseInt(m[1],10)-1],l=e[parseInt(m[2],10)-1],m=e[parseInt(m[3],10)-1];g.add(q[0],q[1],q[2]);g.add(l[0],l[1],l[2]);g.add(m[0],m[1],m[2]);q=new qd(q[0],q[1],q[2]);
m=new qd(m[0],m[1],m[2]);l=ud((new qd(l[0],l[1],l[2])).Fc(q),m.Fc(q));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.Nd(this.n+".parse");c=new Zd;c.Na=b;c.xa=a;this.dispatchEvent(c)};t("X.parserOBJ",Jf);t("X.parserOBJ.prototype.parse",Jf.prototype.parse);function Kf(){cd.call(this);this.n="loader";this.Em=new jd;this.vo=0}w(Kf,cd);function Lf(a,b){a.vo+=b/a.Em.Ai()/3;a.vo=Math.min(1,a.vo);var c=new Ae;c.al=a.vo;a.dispatchEvent(c)}function Mf(a){a=a.da.sr;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Nf))throw Error("The "+b+" file format is not supported.");return[a,b,Nf[b][0],Nf[b][1],Nf[b][2]]}
Kf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!md(this.Em.Bb,a.sd)||this.Em.get(a.sd)){this.Em.set(a.sd,!1);var c=Mf(a)[0];if(null!=a.jh)this.parse(null,a,b);else{var d=new XMLHttpRequest;P(d,"abort",this.IB.bind(this,d,a,b));P(d,"error",this.IB.bind(this,d,a,b));P(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Kf.prototype.parse=function(a,b,c){Lf(this,1);setTimeout(function(){var d=Mf(b),e=d[3],d=new d[2];Tc(d,ke,this.complete.bind(this));var g=b.jh;null==g&&(g=a.response,b.jh=g);d.parse(b,c,g,e)}.bind(this),100)};Kf.prototype.complete=function(a){Lf(this,1);setTimeout(function(){var b=a.xa,c=a.Na;b.da.C=!1;b.C=!0;c.ca();this.Em.set(b.sd,!0)}.bind(this),100)};Kf.prototype.IB=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Nf={OBJ:[Jf,null],OFF:[Ne,null],STL:[Gf,null],VTK:[Pe,null],TRK:[If,null],MRC:[Ef,null],ST:[Ef,null],FSM:[Re,null],INFLATED:[Re,null],SMOOTHWM:[Re,null],SPHERE:[Re,null],PIAL:[Re,null],ORIG:[Re,null],NRRD:[Ff,null],NII:[Hf,null],GZ:[Hf,null],DCM:[Oe,null],DICOM:[Oe,null],"":[Oe,null],CRV:[zf,null],LABEL:[yf,null],MGH:[xf,!1],MGZ:[xf,!0],RAW:[Bf,!1],RZ:[Bf,!0],TXT:[Df,null],LUT:[Df,null],PNG:[Cf,"png"],JPG:[Cf,"jpeg"],JPEG:[Cf,"jpeg"],GIF:[Cf,"gif"]};function Of(){Ee.call(this);this.n="parserIMA"}w(Of,Ee);
Of.prototype.parse=function(a,b,c){b.ai={};b.ai.Hp=0;this.Qi(c,b);if(null==b.da.length||b.Ca.length==b.da.length){b.ai.Hp=b.da.length;var d={};c={};for(var e=0;e<b.Ca.length;e++)d.hasOwnProperty(b.Ca[e].series_instance_uid)||(d[b.Ca[e].series_instance_uid]=[],c[b.Ca[e].series_instance_uid]={}),c[b.Ca[e].series_instance_uid].hasOwnProperty(b.Ca[e].sop_instance_uid)||(c[b.Ca[e].series_instance_uid][b.Ca[e].sop_instance_uid]=!0,d[b.Ca[e].series_instance_uid].push(b.Ca[e]));var g=Object.keys(d)[0],e=
d[g],k=e.length;c={};console.log("FIRST IMAGE",e,d,g);var l="image_position_patient";1==k?(l="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new qd(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=ud(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-n[0],m=d[1]-n[1],q=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+m*m+
q*q);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,p=e[k-1].image_position_patient,g=p[0]-n[0],m=p[1]-n[1],q=p[2]-n[2],g=Math.sqrt(g*g+m*m+q*q),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;g=n*d;p=null;switch(e[0].gl){case 8:p=new Uint8Array(g);break;case 16:p=new Uint16Array(g);break;case 32:p=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.ii=e[0].pixel_spacing;for(var r=0;r<k;r++){var s=e[r].data,g=0;switch(l){case "image_position_patient":g=e[r].image_position_patient[0]-e[0].image_position_patient[0];m=e[r].image_position_patient[1]-
e[0].image_position_patient[1];q=e[r].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+m*m+q*q)/e[0].pixel_spacing[2];break;case "instance_number":g=e[r].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(s,g*n)}c.data=p;b.S=p;b.nb=[e[0].columns,e[0].rows,d];c.II=b.nb;d=Fe(p);k=d[0];d=d[1];c.min=b.ne=b.Pb=k;c.max=b.Yb=b.Ob=d;-Infinity==b.xb&&(b.xb=k);Infinity==b.zb&&(b.zb=d);m=e[0].image_position_patient;k=Dd();
switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new qd(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=ud(d,g);Id(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-m[0]);Id(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-m[1]);Id(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],m[2]);Id(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new qd(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=ud(d,g),Id(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[0]),Id(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[1]),Id(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,m[2])):(Id(k,0,1,0,0,-m[0]),Id(k,1,0,-1,-0,-m[1]),Id(k,2,0,0,1,m[2]));Id(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Re=k;c.Ue=Dd();Md(c.Re,c.Ue);l=Cd(0,0,0,1);e=Bd();Pd(k,l,e);l=Cd(1,1,1,1);d=Bd();Pd(k,l,d);c.Pk=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=He(k,[b.nb[0],b.nb[1],b.nb[2]]);c.Nk=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.Ok=[e[0],e[2],e[4]];b.Cf(c);b.ng=Me(this,b)}c=new Zd;c.Na=b;c.xa=
a;this.dispatchEvent(c)};Of.prototype.ze=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Of.prototype.Qi=function(a,b){this.S=a;if("undefined"==typeof b.Ca||null==b.Ca)b.Ca=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.f("ushort",this.S.byteLength),e=66,g=null,k=null,l=null,n=null,m=[[8,4368],[8,4384]],q=!1;e<d.length;){for(var g=d[e++],k=d[e++],l=d[e++],n=d[e++],q=!1,p=0,r=m.length;p<r;p++)if(g===m[p][0]&&k===m[p][1]){q=!0;break}if(q)window.console.log("Skipping ",
"("+g.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),g){case 2:switch(k){case 16:k="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Of.prototype.ze(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.gl=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Of.prototype.ze(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(g),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Of.prototype.ze(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(g),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(g),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Of.prototype.ze(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],g=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(g),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Of.prototype.ze(d,e,l,n)}break;case 16:switch(k){case 8720:for(p=0;p<n/2;p++)e++;break;default:e=
Of.prototype.ze(d,e,l,n)}break;default:e=Of.prototype.ze(d,e,l,n)}}switch(c.gl){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Ma=this.S.byteLength-c.columns*c.rows*2;d=null;switch(c.gl){case 8:d=this.f("uchar",c.columns*c.rows);break;case 16:d=this.f("ushort",c.columns*c.rows);break;case 32:d=this.f("uint",c.columns*c.rows)}c.data=d;b.Ca.push(c);return b};t("X.parserIMA",Of);
t("X.parserIMA.prototype.parse",Of.prototype.parse);var Pf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Qf(a){if(Rf){Rf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Qf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Rf=!0,Error();}}return a.match(Pf)}var Rf=jc;function Sf(a,b){ad.call(this);this.vn=a||1;this.Tn=b||ba;this.Uu=ua(this.dP,this);this.vw=xa()}w(Sf,ad);f=Sf.prototype;f.enabled=!1;f.fc=null;f.dP=function(){if(this.enabled){var a=xa()-this.vw;0<a&&a<.8*this.vn?this.fc=this.Tn.setTimeout(this.Uu,this.vn-a):(this.fc&&(this.Tn.clearTimeout(this.fc),this.fc=null),this.dispatchEvent(Tf),this.enabled&&(this.fc=this.Tn.setTimeout(this.Uu,this.vn),this.vw=xa()))}};
f.start=function(){this.enabled=!0;this.fc||(this.fc=this.Tn.setTimeout(this.Uu,this.vn),this.vw=xa())};f.stop=function(){this.enabled=!1;this.fc&&(this.Tn.clearTimeout(this.fc),this.fc=null)};f.e=function(){Sf.c.e.call(this);this.stop();delete this.Tn};var Tf="tick";function Uf(a,b,c){if(ma(a))c&&(a=ua(a,c));else if(a&&"function"==typeof a.handleEvent)a=ua(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Vf(a){return"function"==typeof a.Ai?a.Ai():ia(a)||ja(a)?a.length:kb(a)}function Wf(a){if("function"==typeof a.Cl)return a.Cl();if(ja(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return lb(a)}function Xf(a){if("function"==typeof a.gp)return a.gp();if("function"!=typeof a.Cl){if(ia(a)||ja(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return mb(a)}}
function Yf(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ia(a)||ja(a))N(a,b,void 0);else for(var c=Xf(a),d=Wf(a),e=d.length,g=0;g<e;g++)b.call(void 0,d[g],c&&c[g],a)}function Zf(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ia(a)||ja(a))return Db(a,b,void 0);for(var c=Xf(a),d=Wf(a),e=d.length,g=0;g<e;g++)if(!b.call(void 0,d[g],c&&c[g],a))return!1;return!0};function $f(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function ag(){}ag.prototype.OA=null;function bg(a){var b;(b=a.OA)||(b={},cg(a)&&(b[0]=!0,b[1]=!0),b=a.OA=b);return b};var dg;function eg(){}w(eg,ag);function fg(a){return(a=cg(a))?new ActiveXObject(a):new XMLHttpRequest}function cg(a){if(!a.UC&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.UC=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.UC}dg=new eg;function gg(a){this.Bb=new jd;a&&this.Iu(a)}function hg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+oa(a):b.substr(0,1)+a}f=gg.prototype;f.Ai=function(){return this.Bb.Ai()};f.add=function(a){this.Bb.set(hg(a),a)};f.Iu=function(a){a=Wf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.Xf=function(a){a=Wf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.Bb.remove(hg(a))};f.clear=function(){this.Bb.clear()};f.xp=function(){return this.Bb.xp()};
f.contains=function(a){a=hg(a);return md(this.Bb.Bb,a)};f.aD=function(a){var b=new gg;a=Wf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.Cl=function(){return this.Bb.Cl()};f.clone=function(){return new gg(this)};f.bn=function(a){return this.Ai()==Vf(a)&&ig(this,a)};
function ig(a,b){var c=Vf(b);if(a.Ai()>c)return!1;!(b instanceof gg)&&5<c&&(b=new gg(b));return Zf(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.lv?c.lv(a):ia(c)||ja(c)?Gb(c,a):nb(c,a)})};function jg(a){var b;b||(b=kg(a||arguments.callee.caller,[]));return b}
function kg(a,b){var c=[];if(Gb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(lg(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=lg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(kg(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function lg(a){if(mg[a])return mg[a];a=String(a);if(!mg[a]){var b=/function ([^\(]+)/.exec(a);mg[a]=b?b[1]:"[Anonymous]"}return mg[a]}var mg={};function ng(a,b,c,d,e){this.reset(a,b,c,d,e)}ng.prototype.GB=null;ng.prototype.FB=null;var og=0;ng.prototype.reset=function(a,b,c,d,e){"number"==typeof e||og++;d||xa();this.Ep=a;this.oM=b;delete this.GB;delete this.FB};ng.prototype.DE=function(a){this.Ep=a};function pg(a){this.Ql=a;this.MC=this.Nc=this.Ep=this.Ra=null}function qg(a,b){this.name=a;this.value=b}qg.prototype.toString=function(){return this.name};var rg=new qg("SEVERE",1E3),sg=new qg("CONFIG",700),tg=new qg("FINE",500);f=pg.prototype;f.getName=function(){return this.Ql};f.getParent=function(){return this.Ra};f.Ov=function(){this.Nc||(this.Nc={});return this.Nc};f.DE=function(a){this.Ep=a};
function ug(a){if(a.Ep)return a.Ep;if(a.Ra)return ug(a.Ra);cb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=ug(this).value)for(ma(b)&&(b=b()),a=this.jC(a,b,c,pg.prototype.log),b="log:"+a.oM,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.MC)for(var e=0,g=void 0;g=c.MC[e];e++)g(d);b=b.getParent()}};
f.jC=function(a,b,c,d){a=new ng(a,String(b),this.Ql);if(c){a.GB=c;var e;d=d||pg.prototype.jC;try{var g;var k=ea("window.location.href");if(ja(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.CT||"Not available"}catch(m){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(q){n="Not available",b=!0}g=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+La(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+La(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+La(jg(d)+"-> ")}catch(p){e="Exception trying to expose exception! You win, we lose. "+p}a.FB=e}return a};f.Nr=function(a,b){this.log(sg,a,b)};f.jq=function(a){this.Ra=a};var vg={},wg=null;
function xg(a){wg||(wg=new pg(""),vg[""]=wg,wg.DE(sg));var b;if(!(b=vg[a])){b=new pg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=xg(a.substr(0,c));c.Ov()[d]=b;b.jq(c);vg[a]=b}return b};function yg(a,b){a&&a.log(tg,b,void 0)};function zg(a){ad.call(this);this.headers=new jd;this.Ut=a||null;this.xj=!1;this.Tt=this.Da=null;this.Cp=this.iD=this.Ks="";this.Jl=this.kw=this.vs=this.Fv=!1;this.Dq=0;this.Lt=null;this.pE=Ag;this.Pt=this.rP=!1}w(zg,ad);var Ag="",Bg=zg.prototype,Cg=xg("goog.net.XhrIo");Bg.Of=Cg;var Dg=/^https?$/i,Eg=["POST","PUT"],Fg=[];function Gg(a,b){var c=new zg;Fg.push(c);b&&c.s("complete",b);c.zw("ready",c.pI);c.send(a,void 0,void 0,void 0)}f=zg.prototype;f.pI=function(){this.g();Kb(Fg,this)};
f.send=function(a,b,c,d){if(this.Da)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Ks+"; newUri="+a);b=b?b.toUpperCase():"GET";this.Ks=a;this.Cp="";this.iD=b;this.Fv=!1;this.xj=!0;this.Da=this.Ut?fg(this.Ut):fg(dg);this.Tt=this.Ut?bg(this.Ut):bg(dg);this.Da.onreadystatechange=ua(this.TD,this);try{yg(this.Of,Hg(this,"Opening Xhr")),this.kw=!0,this.Da.open(b,String(a),!0),this.kw=!1}catch(e){yg(this.Of,Hg(this,"Error opening Xhr: "+e.message));Ig(this,e);return}a=c||"";var g=
this.headers.clone();d&&Yf(d,function(a,b){g.set(b,a)});d=Eb(g.gp());c=ba.FormData&&a instanceof ba.FormData;!Gb(Eg,b)||d||c||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");g.forEach(function(a,b){this.Da.setRequestHeader(b,a)},this);this.pE&&(this.Da.responseType=this.pE);"withCredentials"in this.Da&&(this.Da.withCredentials=this.rP);try{Jg(this),0<this.Dq&&(this.Pt=Kg(this.Da),yg(this.Of,Hg(this,"Will abort after "+this.Dq+"ms if incomplete, xhr2 "+this.Pt)),this.Pt?(this.Da.timeout=
this.Dq,this.Da.ontimeout=ua(this.uF,this)):this.Lt=Uf(this.uF,this.Dq,this)),yg(this.Of,Hg(this,"Sending request")),this.vs=!0,this.Da.send(a),this.vs=!1}catch(k){yg(this.Of,Hg(this,"Send error: "+k.message)),Ig(this,k)}};function Kg(a){return hc&&qc(9)&&la(a.timeout)&&ca(a.ontimeout)}function Fb(a){return"content-type"==a.toLowerCase()}f.uF=function(){"undefined"!=typeof aa&&this.Da&&(this.Cp="Timed out after "+this.Dq+"ms, aborting",yg(this.Of,Hg(this,this.Cp)),this.dispatchEvent("timeout"),this.abort(8))};
function Ig(a,b){a.xj=!1;a.Da&&(a.Jl=!0,a.Da.abort(),a.Jl=!1);a.Cp=b;Lg(a);Mg(a)}function Lg(a){a.Fv||(a.Fv=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Da&&this.xj&&(yg(this.Of,Hg(this,"Aborting")),this.xj=!1,this.Jl=!0,this.Da.abort(),this.Jl=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Mg(this))};f.e=function(){this.Da&&(this.xj&&(this.xj=!1,this.Jl=!0,this.Da.abort(),this.Jl=!1),Mg(this,!0));zg.c.e.call(this)};
f.TD=function(){this.ql||(this.kw||this.vs||this.Jl?Ng(this):this.aN())};f.aN=function(){Ng(this)};
function Ng(a){if(a.xj&&"undefined"!=typeof aa)if(a.Tt[1]&&4==Og(a)&&2==Pg(a))yg(a.Of,Hg(a,"Local request error detected and ignored"));else if(a.vs&&4==Og(a))Uf(a.TD,0,a);else if(a.dispatchEvent("readystatechange"),4==Og(a)){yg(a.Of,Hg(a,"Request complete"));a.xj=!1;try{var b=Pg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var g=Qf(String(a.Ks))[1]||null;if(!g&&self.location)var k=self.location.protocol,
g=k.substr(0,k.length-1);e=!Dg.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Og(a)?a.Da.statusText:""}catch(n){yg(a.Of,"Can not get status: "+n.message),l=""}a.Cp=l+" ["+Pg(a)+"]";Lg(a)}}finally{Mg(a)}}}
function Mg(a,b){if(a.Da){Jg(a);var c=a.Da,d=a.Tt[0]?fa:null;a.Da=null;a.Tt=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.Of)&&c.log(rg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Jg(a){a.Da&&a.Pt&&(a.Da.ontimeout=null);la(a.Lt)&&(ba.clearTimeout(a.Lt),a.Lt=null)}f.Ch=function(){return!!this.Da};function Og(a){return a.Da?a.Da.readyState:0}function Pg(a){try{return 2<Og(a)?a.Da.status:-1}catch(b){return-1}}
function Hg(a,b){return b+" ["+a.iD+" "+a.Ks+" "+Pg(a)+"]"};/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function R(){}t("gxnat",R);R.JPEG_CONVERT_SUFFIX="?format=image/jpeg";R.nJ={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};R.uz="?format=zip";R.Hi=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);R.get(a,b,"json")};
R.get=function(a,b,c){Gg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.Da?$f(a.Da.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Da?a.Da.responseText:""}catch(g){yg(a.Of,"Can not get responseText: "+g.message),e=""}b(e)}})};
R.Us=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,g=/^0x[0-9a-f]+$/i,k=/^0/,l=(R.Us.EL&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(R.Us.EL&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(g))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(g))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;g=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(g))return isNaN(e)?1:-1;typeof e!==typeof g&&(e+="",g+="");if(e<g)return-1;if(e>g)return 1}return 0};
R.RO=function(a,b){var c=[],d={},e=[],g={};N(a,function(a){g=a;N(b,function(a){g=g[a]});g=g.toLowerCase();c.push(g);d[g]=a});c=c.sort(R.HT);N(c,function(a){e.push(d[a])});return e};t("gxnat.JPEG_CONVERT_SUFFIX",R.JPEG_CONVERT_SUFFIX);t("gxnat.folderAbbrev",R.nJ);t("gxnat.ZIP_SUFFIX",R.uz);t("gxnat.jsonGet",R.Hi);t("gxnat.get",R.get);t("gxnat.naturalSort",R.Us);t("gxnat.sortXnatPropertiesArray",R.RO);function Qg(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Rg(this)}w(Qg,xc);t("gxnat.Path",Qg);
function Sg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Tg(a){for(var b=0,c=Ug.length,b=0;b<c;b++)a(Ug[b],b)}function Vg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Ug=["projects","subjects","experiments",["scans","resources"],"files"];
function Rg(a){var b,c,d,e=!1;Tg(function(a,k){if(h(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.wv=Ug[k-1],e=!0);else null!=this[a]||e||(this.wv=Ug[k-1],e=!0)}.bind(a))}Qg.prototype.ds=function(){null!=this.wv||Rg(this);return this.wv};
Qg.prototype.Ri=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,g=Ug.length,k=0,d=0;d<g;d++){c=Ug[d];if(h(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Qg.prototype.g=function(){Qg.c.g.call(this);qb(this)};t("gxnat.Path.getQueryPrefix",Sg);t("gxnat.Path.forEachXnatLevel",Tg);
t("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Qg(a),d=new Qg(b),e=void 0;Tg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});t("gxnat.Path.graftUrl",Vg);t("gxnat.Path.xnatLevelOrder",Ug);t("gxnat.Path.prototype.getDeepestLevel",Qg.prototype.ds);t("gxnat.Path.prototype.pathByLevel",Qg.prototype.Ri);t("gxnat.Path.prototype.dispose",Qg.prototype.g);function Wg(a){this.$d=new Qg(a);this.projects=[];this[Xg]={};this[Yg]={};this[Zg]={}}w(Wg,xc);t("gxnat.ProjectTree",Wg);function $g(a){this[ah]=ja(a)?new Qg(a):a;this[bh]=this[ah].ds();a=Ug.indexOf(this[ah].ds())+1;-1!=a&&(this[ch]=Ug[a],ja(this[ch])&&(this[dh]=this[ah].originalUrl+"/"+this[ch],this[this[ch]]=[]))}w($g,xc);t("gxnat.ProjectTree.TreeNode",$g);$g.prototype.Zf=function(a){this.nd=a};$g.prototype.ff=function(){return this.nd};
$g.prototype.g=function(){$g.c.g.call(this);null!=this[ah]&&this[ah].g();qb(this)};var bh=C(),dh=C(),eh=C(),ah=C(),ch=C(),fh=C(),gh=C(),hh=C(),Xg=C(),Yg=C(),Zg=C(),ih=["ID","description","name","URI"],jh=["gender","handedness","label","URI"],kh=["label","URI"];function lh(a,b){return Ka(a.ff(),b.ff())}function mh(a){var b="&columns=";N(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=Wg.prototype;
f.SB=function(a){var b=[];I(this.cp(a),function(a,d){"projects"==d?b.push(a[hh].ID):b.push(a[hh].label)});return b};f.TB=function(a){var b=[];I(this.cp(a),function(a){b.push(a[ah].originalUrl)});return b};f.cp=function(a){branch={projects:this.Md};"experiments"==a[ch]?branch.subjects=a:h(a[ch])&&(branch.subjects=this[Yg][a[ah].Ri("subjects")],branch.experiments=a);return branch};f.oD=function(a,b){this.Gp(this.$d,a,b)};
f.Gp=function(a,b,c){var d=ja(a)?new Qg(a):a,e;if(null!=this.Md){a={projects:this.Md};if(null!=d.subjects){e=d.Ri("subjects");if(null==this[Yg][e]){this.Cw(e,function(a){this.qD(a,function(){null!=b&&b(a);this.Gp(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[Yg][e]}if(null!=d.experiments){e=d.Ri("experiments");if(null==this[Zg][e]){this.Bw(e,function(a){null!=b&&b(a);this.Gp(d,b,c)}.bind(this));return}a.experiments=this[Zg][e]}null!=c&&c(a)}else this.pD(function(a){null!=b&&b(a);this.Gp(d,
b,c)}.bind(this))};f.pD=function(a){if(null==this.Md){var b=mh(ih),c=this.$d.prefix+"/projects/"+this.$d.projects,d;R.Hi(this.$d.prefix+"/projects",function(b){d=new $g(c);this.projects.push(d);this.Md=d;this[Xg][d[ah].originalUrl]=d;d[hh]=b[0];d.Zf(d[hh].name);a(d)}.bind(this),"&ID="+this.$d.projects+b)}};f.ip=function(a){return this[Yg][a]};f.hn=function(a){return this[Zg][a]};
f.qD=function(a,b){var c=a;ja(a)?c=this.ip(a):a instanceof Qg&&(c=this.ip(a.originalUrl));if(null!=c[hh])b(c);else{var d=this.$d.prefix+"/subjects",e=mh(jh),e="&ID="+c[ah].subjects+e;R.Hi(d,function(a){c[hh]=a[0];c.Zf(c[hh].label);b(c)}.bind(this),e)}};
f.rD=function(a,b){if(null==this.Md[fh]||!0!=this.Md[fh]){var c=this.Md[ah].prefix+"/subjects",d="&project="+this.Md[ah].projects+mh(jh),e,g;R.Hi(c,function(c){N(c,function(d){g=this.Md[ah].prefix+"/projects/"+this.Md[ah].projects+"/subjects/"+d.ID;e=this.Cw(g);null==e[hh]&&(e[hh]=d,e.Zf(e[hh].label));null!=a&&a(e);this.Md.subjects.length==c.length&&(this.Md[fh]=!0,null!=b&&(d=this.Md.subjects,d.sort(lh),b(d)))}.bind(this))}.bind(this),d)}};
f.Cw=function(a,b){if(null!=this[Yg][a])return this[Yg][a];subjNode=new $g(a);this.Md.subjects.push(subjNode);this[Yg][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.mD=function(a,b){var c=a;ja(a)?c=this.hn(a):a instanceof Qg&&(c=this.hn(a.originalUrl));var d=this.$d.prefix+"/experiments",e=mh(kh),e="&ID="+c[ah].experiments+e;R.Hi(d,function(a){c[hh]=a[0];c.Zf(c[hh].label);b(c)}.bind(this),e)};
f.nD=function(a,b,c){var d=a;ja(a)?d=this.ip(a):a instanceof Qg&&(d=this.ip(a.originalUrl));if(null!=d[fh]&&!0==d[fh])window.console.log("Don't need to reload the experiments of "+d[ah].originalUrl);else{var e=d[ah].originalUrl+"/experiments";R.Hi(e+"?xsiType=xnat:imageSessionData",function(a){N(a,function(k){this.Bw(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[fh]=!0,null!=c&&(e=d.experiments,e.sort(lh),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Bw=function(a,b){null==this[Zg][a]&&(exptNode=new $g(a),this.mD(exptNode,function(c){this[Yg][c[ah].Ri("subjects")].experiments.push(c);this[Zg][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){Wg.c.g.call(this);delete this.Md;this.$d.g();delete this.$d;N(this.projects,function(a){null!=a.subjects&&N(a.subjects,function(a){null!=a.experiments&&N(a.experiments,function(a){a.g()});a.g()});a.g()});qb(this)};t("gxnat.ProjectTree.TreeNode",$g);t("gxnat.ProjectTree.LEVEL_KEY",bh);
t("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",dh);t("gxnat.ProjectTree.NEXTLEVELJSON_KEY",eh);t("gxnat.ProjectTree.PATH_KEY",ah);t("gxnat.ProjectTree.NEXTLEVEL_KEY",ch);t("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",fh);t("gxnat.ProjectTree.ISLOADING_KEY",gh);t("gxnat.ProjectTree.METADATA_KEY",hh);t("gxnat.ProjectTree.PROJ_DIRECT",Xg);t("gxnat.ProjectTree.SUBJ_DIRECT",Yg);t("gxnat.ProjectTree.EXPT_DIRECT",Zg);t("gxnat.ProjectTree.PROJECT_METADATA",ih);t("gxnat.ProjectTree.SUBJECT_METADATA",jh);
t("gxnat.ProjectTree.EXPERIMENT_METADATA",kh);t("gxnat.ProjectTree.compareNodeTitles",lh);t("gxnat.ProjectTree.getColumnQuery",mh);t("gxnat.ProjectTree.prototype.getBranchTitles",Wg.prototype.SB);t("gxnat.ProjectTree.prototype.getBranchUris",Wg.prototype.TB);t("gxnat.ProjectTree.prototype.getBranchFromEndNode",Wg.prototype.cp);t("gxnat.ProjectTree.prototype.loadInitBranch",Wg.prototype.oD);t("gxnat.ProjectTree.prototype.loadBranch",Wg.prototype.Gp);t("gxnat.ProjectTree.prototype.loadProject",Wg.prototype.pD);
t("gxnat.ProjectTree.prototype.getSubjectNodeByUri",Wg.prototype.ip);t("gxnat.ProjectTree.prototype.getExperimentNodeByUri",Wg.prototype.hn);t("gxnat.ProjectTree.prototype.loadSubjectMetadata",Wg.prototype.qD);t("gxnat.ProjectTree.prototype.loadSubjects",Wg.prototype.rD);t("gxnat.ProjectTree.prototype.loadSubject",Wg.prototype.Cw);t("gxnat.ProjectTree.prototype.loadExperimentMetadata",Wg.prototype.mD);t("gxnat.ProjectTree.prototype.loadExperiments",Wg.prototype.nD);
t("gxnat.ProjectTree.prototype.loadExperiment",Wg.prototype.Bw);t("gxnat.ProjectTree.prototype.dispose",Wg.prototype.g);function nh(a){a=a.className;return ja(a)&&a.match(/\S+/g)||[]}function S(a,b){var c=nh(a),d=Ob(arguments,1),e=c.length+d.length;oh(c,d);a.className=c.join(" ");return c.length==e}function ph(a,b){var c=nh(a),d=Ob(arguments,1),e=qh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function oh(a,b){for(var c=0;c<b.length;c++)Gb(a,b[c])||a.push(b[c])}function qh(a,b){return Ab(a,function(a){return!Gb(b,a)})}
function rh(a,b,c){var d=nh(a);ja(b)?Kb(d,b):h(b)&&(d=qh(d,b));ja(c)&&!Gb(d,c)?d.push(c):h(c)&&oh(d,c);a.className=d.join(" ")};function sh(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=sh.prototype;f.clone=function(){return new sh(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function th(a,b){return new sh(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof sh?(this.x+=a.x,this.y+=a.y):(this.x+=a,la(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=la(b)?b:a;this.x*=a;this.y*=c;return this};function uh(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=uh.prototype;f.clone=function(){return new uh(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof uh?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof sh?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,la(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=la(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function vh(a,b){this.width=a;this.height=b}function wh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=vh.prototype;f.clone=function(){return new vh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.xp=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=la(b)?b:a;this.width*=a;this.height*=c;return this};function xh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=xh.prototype;f.clone=function(){return new xh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.aD=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof xh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function yh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.Bv=function(a){return Math.sqrt(yh(this,a))};f.Yj=function(){return new vh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof sh?(this.left+=a.x,this.top+=a.y):(this.left+=a,la(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=la(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function zh(){return jc?"Webkit":ic?"Moz":hc?"ms":gc?"O":null};var Ah=!hc||rc(9),Bh=!ic&&!hc||hc&&rc(9)||ic&&qc("1.9.1"),Ch=hc&&!qc("9");function Dh(a){return a?new Eh(Fh(a)):Ba||(Ba=new Eh)}function Gh(a){return ja(a)?document.getElementById(a):a}function Hh(a,b,c){return Ih(document,a,b,c)}function Jh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Ih(document,"*",a,b)}function Kh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Ih(document,"*",a,b)[0])||null}
function Ih(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,g=0,k;k=a[g];g++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(g=e=0;k=a[g];g++)b=k.className,"function"==typeof b.split&&Gb(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Lh(a,b){I(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Mh?a.setAttribute(Mh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Mh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Nh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new vh(a.clientWidth,a.clientHeight)}function Oh(a){return jc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Ph(a){return a?a.parentWindow||a.defaultView:window}function W(a,b,c){return Qh(document,arguments)}
function Qh(a,b){var c=b[0],d=b[1];if(!Ah&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',La(d.name),'"');if(d.type){c.push(' type="',La(d.type),'"');var e={};wb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ja(d)?c.className=d:h(d)?c.className=d.join(" "):Lh(c,d));2<b.length&&Rh(a,c,b,2);return c}
function Rh(a,b,c,d){function e(c){c&&b.appendChild(ja(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];!ia(g)||na(g)&&0<g.nodeType?e(g):N(Sh(g)?Mb(g):g,e)}}function Th(a,b){Rh(Fh(a),a,arguments,1)}function Uh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Vh(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function Y(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function Wh(a){return Bh&&void 0!=a.children?a.children:Ab(a.childNodes,function(a){return 1==a.nodeType})}function Xh(a){return void 0!=a.firstElementChild?a.firstElementChild:Yh(a.firstChild)}function Zh(a){return void 0!=a.nextElementSibling?a.nextElementSibling:Yh(a.nextSibling)}function Yh(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function $h(a){return na(a)&&1==a.nodeType}
function ai(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function bi(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var g=[],k=arguments[b];k;)g.unshift(k),k=k.parentNode;d.push(g);e=Math.min(e,g.length)}g=null;for(b=0;b<e;b++){for(var k=d[0][b],l=1;l<c;l++)if(k!=d[l][b])return g;g=k}return g}function Fh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ci(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Uh(a),a.appendChild(Fh(a).createTextNode(String(b)))}var di={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ei={IMG:" ",BR:"\n"};function fi(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function gi(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function hi(a){a=a.tabIndex;return la(a)&&0<=a&&32768>a}function ii(a){if(Ch&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];ji(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Ch||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function ki(a){var b=[];ji(a,b,!1);return b.join("")}
function ji(a,b,c){if(!(a.nodeName in di))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ei)b.push(ei[a.nodeName]);else for(a=a.firstChild;a;)ji(a,b,c),a=a.nextSibling}function Sh(a){if(a&&"number"==typeof a.length){if(na(a))return"function"==typeof a.item||"string"==typeof a.item;if(ma(a))return"function"==typeof a.item}return!1}
function li(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return mi(a,function(a){return(!d||a.nodeName==d)&&(!c||ja(a.className)&&Gb(a.className.split(/\s+/),c))})}function mi(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Eh(a){this.qa=a||ba.document||document}f=Eh.prototype;f.H=Dh;function ni(a){return a.qa}f.a=function(a){return ja(a)?this.qa.getElementById(a):a};f.SF=Eh.prototype.a;f.r=function(a,b,c){return Qh(this.qa,arguments)};f.createElement=function(a){return this.qa.createElement(a)};
f.createTextNode=function(a){return this.qa.createTextNode(String(a))};function oi(a){return"CSS1Compat"==a.qa.compatMode}function pi(a){a=a.qa;return a.parentWindow||a.defaultView}function qi(a){var b=a.qa;a=Oh(b);b=b.parentWindow||b.defaultView;return hc&&qc("10")&&b.pageYOffset!=a.scrollTop?new sh(a.scrollLeft,a.scrollTop):new sh(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.append=Th;f.ow=Vh;f.removeNode=Y;f.Ov=Wh;f.aC=Xh;f.contains=ai;
f.Fi=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!gi(a)||hi(a)):gi(a)&&hi(a))&&hc?(a=ma(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function ri(a,b,c){ja(b)?si(a,c,b):I(b,va(si,a))}function si(a,b,c){a:if(c=Za(c),void 0===a.style[c]){var d=zh()+ab(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function ti(a,b){var c=Fh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function ui(a,b){return ti(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function vi(a){return ui(a,"position")}
function wi(a,b,c){var d,e=ic&&(bc||mc)&&qc("1.9");b instanceof sh?(d=b.x,b=b.y):(d=b,b=c);a.style.left=xi(d,e);a.style.top=xi(b,e)}function yi(a){return new sh(a.offsetLeft,a.offsetTop)}function zi(a){a=a?Fh(a):document;return!hc||rc(9)||oi(Dh(a))?a.documentElement:a.body}
function Ai(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}hc&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Bi(a){if(hc&&!rc(8))return a.offsetParent;var b=Fh(a),c=ui(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=ui(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ci(a){for(var b=new uh(0,Infinity,Infinity,0),c=Dh(a),d=c.qa.body,e=c.qa.documentElement,g=Oh(c.qa);a=Bi(a);)if(!(hc&&0==a.clientWidth||jc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=ui(a,"overflow")){var k=Di(a),l;l=a;if(ic&&!qc("1.9")){var n=parseFloat(ti(l,"borderLeftWidth"));if(Ei(l))var m=l.offsetWidth-l.clientWidth-n-parseFloat(ti(l,"borderRightWidth")),n=n+m;l=new sh(n,parseFloat(ti(l,"borderTopWidth")))}else l=new sh(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=Nh(pi(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Di(a){var b,c=Fh(a),d=ui(a,"position"),e=ic&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new sh(0,0),k=zi(c);if(a==k)return g;if(a.getBoundingClientRect)b=Ai(a),a=qi(Dh(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);
if(jc&&"fixed"==vi(b)){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(gc||jc&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Bi(b))&&b!=c.body&&b!=k;)g.x-=b.scrollLeft,gc&&"TR"==b.tagName||(g.y-=b.scrollTop)}return g}function Fi(a,b){var c=Gi(a),d=Gi(b);return new sh(c.x-d.x,c.y-d.y)}
function Hi(a){var b;if(a.getBoundingClientRect)b=Ai(a),b=new sh(b.left,b.top);else{b=qi(Dh(a));var c=Di(a);b=new sh(c.x-b.x,c.y-b.y)}if(ic&&!qc(12)){b:{c=Za("transform");if(void 0===a.style[c]&&(c=zh()+ab(c),void 0!==a.style[c])){c=(jc?"-webkit":ic?"-moz":hc?"-ms":gc?"-o":null)+"-transform";break b}c="transform"}a=(a=ui(a,c)||ui(a,"transform"))?(a=a.match(Ii))?new sh(parseFloat(a[1]),parseFloat(a[2])):new sh(0,0):new sh(0,0);a=new sh(b.x+a.x,b.y+a.y)}else a=b;return a}
function Gi(a){if(1==a.nodeType)return Hi(a);var b=ma(a.sJ),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Qc.targetTouches&&(c=a.Qc.targetTouches[0]);return new sh(c.clientX,c.clientY)}function Ji(a,b,c){if(b instanceof vh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Ki(a,b);Li(a,c)}function xi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Li(a,b){a.style.height=xi(b,!0)}function Ki(a,b){a.style.width=xi(b,!0)}
function Mi(a){var b=Ni;if("none"!=ui(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,g=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=g;c.visibility=e;return a}function Ni(a){var b=a.offsetWidth,c=a.offsetHeight,d=jc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new vh(b,c):(a=Ai(a),new vh(a.right-a.left,a.bottom-a.top))}function Oi(a){var b=Di(a);a=Mi(a);return new xh(b.x,b.y,a.width,a.height)}
function Pi(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Qi(a,b){a.style.display=b?"":"none"}function Ri(a){hc&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Ei(a){return"rtl"==ui(a,"direction")}var Si=ic?"MozUserSelect":jc?"WebkitUserSelect":null;
function Ti(a,b,c){c=c?null:a.getElementsByTagName("*");if(Si){if(b=b?"none":"",a.style[Si]=b,c){a=0;for(var d;d=c[a];a++)d.style[Si]=b}}else if(hc||gc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Ui(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Vi(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Ui(a,c):0}function Wi(a,b){if(hc){var c=Vi(a,b+"Left"),d=Vi(a,b+"Right"),e=Vi(a,b+"Top"),g=Vi(a,b+"Bottom");return new uh(e,d,g,c)}c=ti(a,b+"Left");d=ti(a,b+"Right");e=ti(a,b+"Top");g=ti(a,b+"Bottom");return new uh(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var Xi={thin:2,medium:4,thick:6};
function Yi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Xi?Xi[c]:Ui(a,c)}function Zi(a){if(hc&&!rc(9)){var b=Yi(a,"borderLeft"),c=Yi(a,"borderRight"),d=Yi(a,"borderTop");a=Yi(a,"borderBottom");return new uh(d,c,a,b)}b=ti(a,"borderLeftWidth");c=ti(a,"borderRightWidth");d=ti(a,"borderTopWidth");a=ti(a,"borderBottomWidth");return new uh(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Ii=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function $i(a){xc.call(this);this.gd=a;this.kb={}}w($i,xc);var aj=[];f=$i.prototype;f.s=function(a,b,c,d){h(b)||(b&&(aj[0]=b.toString()),b=aj);for(var e=0;e<b.length;e++){var g=P(a,b[e],c||this.handleEvent,d||!1,this.gd||this);if(!g)break;this.kb[g.key]=g}return this};f.zw=function(a,b,c,d){return bj(this,a,b,c,d)};function bj(a,b,c,d,e,g){if(h(c))for(var k=0;k<c.length;k++)bj(a,b,c[k],d,e,g);else{b=Tc(b,c,d||a.handleEvent,e,g||a.gd||a);if(!b)return a;a.kb[b.key]=b}return a}
f.rb=function(a,b,c,d,e){if(h(b))for(var g=0;g<b.length;g++)this.rb(a,b[g],c,d,e);else c=c||this.handleEvent,e=e||this.gd||this,c=Nc(c),d=!!d,b=eb(a)?a.hp(b,c,d,e):a?(a=Pc(a))?a.hp(b,c,d,e):null:null,b&&(Vc(b),delete this.kb[b.key]);return this};f.Xf=function(){I(this.kb,Vc);this.kb={}};f.e=function(){$i.c.e.call(this);this.Xf()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function cj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=vi(a)||(c=Fh(a).documentElement);if(!c)return b;if(ic)var d=Zi(c),b=b+d.left;else rc(8)&&(d=Zi(c),b-=d.left);return Ei(c)?c.clientWidth-(b+a.offsetWidth):b};function dj(a,b,c){ad.call(this);this.target=a;this.handle=b||a;this.yw=c||new xh(NaN,NaN,NaN,NaN);this.qa=Fh(a);this.Bc=new $i(this);Ac(this,va(Bc,this.Bc));P(this.handle,["touchstart","mousedown"],this.uq,!1,this)}w(dj,ad);var ej=hc||ic&&qc("1.9.3");f=dj.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.gy=0;f.hy=0;f.vi=0;f.Zd=0;f.Pc=!0;f.Nj=!1;f.TC=0;f.Ts=0;f.uL=!1;f.gm=!1;f.Pj=function(a){this.gm=a};f.gb=function(){return this.Bc};function fj(a,b){a.yw=b||new xh(NaN,NaN,NaN,NaN)}
f.NE=function(a){this.st=a};f.uc=function(a){this.Pc=a};f.e=function(){dj.c.e.call(this);Uc(this.handle,["touchstart","mousedown"],this.uq,!1,this);this.Bc.Xf();ej&&this.qa.releaseCapture();this.handle=this.target=null};function gj(a){ca(a.Lh)||(a.Lh=Ei(a.target));return a.Lh}
f.uq=function(a){var b="mousedown"==a.type;if(!this.Pc||this.Nj||b&&!Jc(a))this.dispatchEvent("earlycancel");else{hj(a);if(0==this.TC)if(this.dispatchEvent(new ij("start",this,a.clientX,a.clientY)))this.Nj=!0,a.preventDefault();else return;else a.preventDefault();var b=this.qa,c=b.documentElement,d=!ej;this.Bc.s(b,["touchmove","mousemove"],this.kL,d);this.Bc.s(b,["touchend","mouseup"],this.Qj,d);ej?(c.setCapture(!1),this.Bc.s(c,"losecapture",this.Qj)):this.Bc.s(Ph(b),"blur",this.Qj);hc&&this.uL&&
this.Bc.s(b,"dragstart",Ec);this.st&&this.Bc.s(this.st,"scroll",this.Hn,d);this.clientX=this.gy=a.clientX;this.clientY=this.hy=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.vi=this.gm?cj(this.target):this.target.offsetLeft;this.Zd=this.target.offsetTop;this.zx=qi(Dh(this.qa));this.Ts=xa()}};
f.Qj=function(a,b){this.Bc.Xf();ej&&this.qa.releaseCapture();if(this.Nj){hj(a);this.Nj=!1;var c=jj(this,this.vi),d=kj(this,this.Zd);this.dispatchEvent(new ij("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function hj(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.ra(a.Qc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.ra(a.Qc.changedTouches[0],a.currentTarget)}
f.kL=function(a){if(this.Pc){hj(a);var b=(this.gm&&gj(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Nj){var d=this.gy-this.clientX,e=this.hy-this.clientY;if(d*d+e*e>this.TC)if(this.dispatchEvent(new ij("start",this,a.clientX,a.clientY)))this.Nj=!0;else{this.ql||this.Qj(a);return}}c=lj(this,b,c);b=c.x;c=c.y;this.Nj&&this.dispatchEvent(new ij("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(mj(this,a,b,c),a.preventDefault())}};function lj(a,b,c){var d=qi(Dh(a.qa));b+=d.x-a.zx.x;c+=d.y-a.zx.y;a.zx=d;a.vi+=b;a.Zd+=c;b=jj(a,a.vi);a=kj(a,a.Zd);return new sh(b,a)}f.Hn=function(a){var b=lj(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;mj(this,a,b.x,b.y)};function mj(a,b,c,d){a.xv(c,d);a.dispatchEvent(new ij("drag",a,b.clientX,b.clientY,0,c,d))}
function jj(a,b){var c=a.yw,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function kj(a,b){var c=a.yw,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.xv=function(a,b){this.gm&&gj(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.Mg=function(){return this.Nj};
function ij(a,b,c,d,e,g,k,l){Dc.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(g)?g:b.vi;this.top=ca(k)?k:b.Zd;this.Dv=b;this.SI=!!l}w(ij,Dc);xb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function nj(){this.Hx="";this.SG=oj;this.uB=null}nj.prototype.XB=function(){return this.uB};nj.prototype.toString=function(){return"SafeHtml{"+this.Hx+"}"};function pj(a){if(a instanceof nj&&a.constructor===nj&&a.SG===oj)return a.Hx;cb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}xb("action","cite","data","formaction","href","manifest","poster","src");xb("link","script","style");var oj={};function qj(a,b){var c=new nj;c.Hx=a;c.uB=b;return c}var rj=qj("",0);function sj(){}ga(sj);sj.prototype.KD=0;function tj(a){ad.call(this);this.pb=a||Dh();this.Lh=uj;this.Kf=null;this.ga=!1;this.l=null;this.$j=void 0;this.Ag=this.Nc=this.Ra=this.Ow=null;this.LF=!1}w(tj,ad);tj.prototype.sL=sj.ye();var uj=null;
function vj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function wj(a){return a.Kf||(a.Kf=":"+(a.sL.KD++).toString(36))}function xj(a,b){a.Ra&&a.Ra.Ag&&(sb(a.Ra.Ag,a.Kf),tb(a.Ra.Ag,b,a));a.Kf=b}f=tj.prototype;f.a=function(){return this.l};
f.gb=function(){this.$j||(this.$j=new $i(this));return this.$j};f.iq=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Ra&&this.Kf&&yj(this.Ra,this.Kf)&&this.Ra!=a)throw Error("Unable to set parent component");this.Ra=a;tj.c.Tx.call(this,a)};f.getParent=function(){return this.Ra};f.Tx=function(a){if(this.Ra&&this.Ra!=a)throw Error("Method not supported");tj.c.Tx.call(this,a)};f.H=function(){return this.pb};f.r=function(){this.l=this.pb.createElement("div")};f.k=function(a){this.Kh(a)};
f.Kh=function(a,b){if(this.ga)throw Error("Component already rendered");this.l||this.r();a?a.insertBefore(this.l,b||null):this.pb.qa.body.appendChild(this.l);this.Ra&&!this.Ra.ga||this.eb()};f.Eb=function(a){if(this.ga)throw Error("Component already rendered");if(a&&this.af(a)){this.LF=!0;var b=Fh(a);this.pb&&this.pb.qa==b||(this.pb=Dh(a));this.se(a);this.eb()}else throw Error("Invalid element to decorate");};f.af=function(){return!0};f.se=function(a){this.l=a};
f.eb=function(){this.ga=!0;zj(this,function(a){!a.ga&&a.a()&&a.eb()})};f.Cc=function(){zj(this,function(a){a.ga&&a.Cc()});this.$j&&this.$j.Xf();this.ga=!1};f.e=function(){this.ga&&this.Cc();this.$j&&(this.$j.g(),delete this.$j);zj(this,function(a){a.g()});!this.LF&&this.l&&Y(this.l);this.Ra=this.Ow=this.l=this.Ag=this.Nc=null;tj.c.e.call(this)};f.Eo=function(a,b){this.Ju(a,Aj(this),b)};
f.Ju=function(a,b,c){if(a.ga&&(c||!this.ga))throw Error("Component already rendered");if(0>b||b>Aj(this))throw Error("Child component index out of bounds");this.Ag&&this.Nc||(this.Ag={},this.Nc=[]);if(a.getParent()==this){var d=wj(a);this.Ag[d]=a;Kb(this.Nc,a)}else tb(this.Ag,wj(a),a);a.iq(this);Nb(this.Nc,b,0,a);a.ga&&this.ga&&a.getParent()==this?(c=this.fb(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.l||this.r(),b=Bj(this,b+1),a.Kh(this.fb(),b?b.l:null)):this.ga&&!a.ga&&a.l&&a.l.parentNode&&
1==a.l.parentNode.nodeType&&a.eb()};f.fb=function(){return this.l};f.jf=function(){null==this.Lh&&(this.Lh=Ei(this.ga?this.l:this.pb.qa.body));return this.Lh};f.Mn=function(a){if(this.ga)throw Error("Component already rendered");this.Lh=a};function Aj(a){return a.Nc?a.Nc.length:0}function yj(a,b){var c;a.Ag&&b?(c=a.Ag,c=(b in c?c[b]:void 0)||null):c=null;return c}function Bj(a,b){return a.Nc?a.Nc[b]||null:null}function zj(a,b,c){a.Nc&&N(a.Nc,b,c)}function Cj(a,b){return a.Nc&&b?zb(a.Nc,b):-1}
f.removeChild=function(a,b){if(a){var c=ja(a)?a:wj(a);a=yj(this,c);c&&a&&(sb(this.Ag,c),Kb(this.Nc,a),b&&(a.Cc(),a.l&&Y(a.l)),a.iq(null))}if(!a)throw Error("Child is not in parent component");return a};function Dj(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!ic;default:return 166>a.keyCode||183<a.keyCode}}
function Ej(a,b,c,d,e){if(!(hc||jc&&qc("525")))return!0;if(bc&&e)return Fj(a);if(e&&!d)return!1;la(b)&&(b=Gj(b));if(!c&&(17==b||18==b||bc&&91==b))return!1;if(jc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(hc&&d&&b==a)return!1;switch(a){case 13:return!(hc&&rc(9));case 27:return!jc}return Fj(a)}
function Fj(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||jc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Gj(a){if(ic)a=Hj(a);else if(bc&&jc)a:switch(a){case 93:a=91;break a}return a}
function Hj(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Ij(a,b){ad.call(this);this.gd=new $i(this);this.Px(a||null);b&&(this.Vn=b)}w(Ij,ad);f=Ij.prototype;f.l=null;f.cI=!0;f.FA=null;f.GA=null;f.yn=!1;f.JO=!1;f.uw=-1;f.qL=!1;f.VI=!0;f.Vn="toggle_display";f.a=function(){return this.l};f.Px=function(a){if(this.yn)throw Error("Can not change this state of the popup while showing.");this.l=a};f.TE=function(a,b){this.On=a;this.qn=b};f.gb=function(){return this.gd};f.Ja=function(){return this.yn};
f.ea=function(a){this.On&&this.On.stop();this.qn&&this.qn.stop();a?this.$x():this.rn()};f.ce=fa;
f.$x=function(){if(!this.yn&&this.bx()){if(!this.l)throw Error("Caller must call setElement before trying to show the popup");this.ce();var a=Fh(this.l);this.qL&&this.gd.s(a,"keydown",this.CM,!0);if(this.cI)if(this.gd.s(a,"mousedown",this.PD,!0),hc){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.gd.s(a,"mousedown",this.PD,!0);this.gd.s(a,"deactivate",this.OD)}else this.gd.s(a,"blur",
this.OD);"toggle_display"==this.Vn?(this.l.style.visibility="visible",Qi(this.l,!0)):"move_offscreen"==this.Vn&&this.ce();this.yn=!0;this.uw=xa();this.On?(Tc(this.On,"end",this.VD,!1,this),this.On.play()):this.VD()}};f.rn=function(a){if(!this.yn||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.gd&&this.gd.Xf();this.yn=!1;xa();this.qn?(Tc(this.qn,"end",va(this.$A,a),!1,this),this.qn.play()):this.$A(a);return!0};
f.$A=function(a){"toggle_display"==this.Vn?this.JO?Uf(this.SC,0,this):this.SC():"move_offscreen"==this.Vn&&(this.l.style.top="-10000px");this.hx(a)};f.SC=function(){this.l.style.visibility="hidden";Qi(this.l,!1)};f.bx=function(){return this.dispatchEvent("beforeshow")};f.VD=function(){this.dispatchEvent("show")};f.hx=function(a){this.dispatchEvent({type:"hide",target:a})};f.PD=function(a){a=a.target;ai(this.l,a)||Jj(this,a)||this.GA&&!ai(this.GA,a)||150>xa()-this.uw||this.rn(a)};
f.CM=function(a){27==a.keyCode&&this.rn(a.target)&&(a.preventDefault(),a.stopPropagation())};f.OD=function(a){if(this.VI){var b=Fh(this.l);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||ai(this.l,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>xa()-this.uw||this.rn()}};function Jj(a,b){return Cb(a.FA||[],function(a){return b===a||ai(a,b)})}f.e=function(){Ij.c.e.call(this);this.gd.g();Bc(this.On);Bc(this.qn);delete this.l;delete this.gd;delete this.FA};function Kj(a){if(a.classList)return a.classList;a=a.className;return ja(a)&&a.match(/\S+/g)||[]}function Lj(a,b){return a.classList?a.classList.contains(b):Gb(Kj(a),b)}function Mj(a,b){a.classList?a.classList.add(b):Lj(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Nj(a,b){if(a.classList)N(b,function(b){Mj(a,b)});else{var c={};N(Kj(a),function(a){c[a]=!0});N(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function Oj(a,b){a.classList?a.classList.remove(b):Lj(a,b)&&(a.className=Ab(Kj(a),function(a){return a!=b}).join(" "))}function Pj(a,b){a.classList?N(b,function(b){Oj(a,b)}):a.className=Ab(Kj(a),function(a){return!Gb(b,a)}).join(" ")}function Qj(a,b,c){c?Mj(a,b):Oj(a,b)};var Rj;function Sj(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Tj(a,b,c){ia(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Rj||(Rj={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Rj,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Uj(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Vj(a){ad.call(this);this.l=a;a=hc?"focusout":"blur";this.VL=P(this.l,hc?"focusin":"focus",this,!hc);this.WL=P(this.l,a,this,!hc)}w(Vj,ad);Vj.prototype.handleEvent=function(a){var b=new Hc(a.Qc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};Vj.prototype.e=function(){Vj.c.e.call(this);Vc(this.VL);Vc(this.WL);delete this.l};function Wj(a,b){tj.call(this,b);this.kP=!!a;this.Dp=null}w(Wj,tj);f=Wj.prototype;f.Mv=null;f.Gc=!1;f.$e=null;f.ud=null;f.Zg=null;f.Ru=!1;f.P=function(){return"goog-modalpopup"};f.gn=function(){return this.$e};f.r=function(){Wj.c.r.call(this);var a=this.a(),b=Ha(this.P()).split(" ");Nj(a,b);fi(a,!0);Qi(a,!1);Yj(this);Zj(this)};
function Yj(a){if(a.kP&&!a.ud){var b;b=a.H().r("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.ud=b;a.ud.className=a.P()+"-bg";Qi(a.ud,!1);Pi(a.ud,0)}a.$e||(a.$e=a.H().r("div",a.P()+"-bg"),Qi(a.$e,!1))}function Zj(a){a.Zg||(a.Zg=a.H().createElement("span"),Qi(a.Zg,!1),fi(a.Zg,!0),a.Zg.style.position="absolute")}f.nE=function(){this.Ru=!1};f.af=function(a){return!!a&&"DIV"==a.tagName};
f.se=function(a){Wj.c.se.call(this,a);a=Ha(this.P()).split(" ");Nj(this.a(),a);Yj(this);Zj(this);Qi(this.a(),!1)};f.eb=function(){this.ud&&Vh(this.ud,this.a());Vh(this.$e,this.a());Wj.c.eb.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.Zg,a.nextSibling);this.Mv=new Vj(ni(this.H()));this.gb().s(this.Mv,"focusin",this.HM);ak(this,!1)};f.Cc=function(){this.Ja()&&this.ea(!1);Bc(this.Mv);Wj.c.Cc.call(this);Y(this.ud);Y(this.$e);Y(this.Zg)};
f.ea=function(a){a!=this.Gc&&(this.Vl&&this.Vl.stop(),this.Rm&&this.Rm.stop(),this.Ul&&this.Ul.stop(),this.Qm&&this.Qm.stop(),this.ga&&ak(this,a),a?this.$x():this.rn())};function ak(a,b){if(b){a.on||(a.on=[]);for(var c=a.H(),c=c.Ov(c.qa.body),d=0;d<c.length;d++){var e=c[d];e==a.l||Uj(e,"hidden")||(Tj(e,"hidden",!0),a.on.push(e))}}else if(a.on){for(d=0;d<a.on.length;d++)a.on[d].removeAttribute("aria-hidden");a.on=null}}f.TE=function(a,b,c,d){this.Vl=a;this.Ul=b;this.Rm=c;this.Qm=d};
f.$x=function(){if(this.dispatchEvent("beforeshow")){try{this.Dp=ni(this.H()).activeElement}catch(a){}this.Mx();this.ce();this.gb().s(pi(this.H()),"resize",this.Mx);bk(this,!0);this.focus();this.Gc=!0;this.Vl&&this.Rm?(Tc(this.Vl,"end",this.ct,!1,this),this.Rm.play(),this.Vl.play()):this.ct()}};
f.rn=function(){if(this.dispatchEvent("beforehide")){this.gb().rb(pi(this.H()),"resize",this.Mx);this.Gc=!1;this.Ul&&this.Qm?(Tc(this.Ul,"end",this.Ys,!1,this),this.Qm.play(),this.Ul.play()):this.Ys();try{var a=ni(this.H()).body,b=ni(this.H()).activeElement||a;this.Dp&&b==a&&this.Dp!=a&&this.Dp.focus()}catch(c){}this.Dp=null}};function bk(a,b){a.ud&&Qi(a.ud,b);a.$e&&Qi(a.$e,b);Qi(a.a(),b);Qi(a.Zg,b)}f.ct=function(){this.dispatchEvent("show")};f.Ys=function(){bk(this,!1);this.dispatchEvent("hide")};
f.Ja=function(){return this.Gc};f.focus=function(){this.NB()};f.Mx=function(){this.ud&&Qi(this.ud,!1);this.$e&&Qi(this.$e,!1);var a=ni(this.H()),b=Nh(Ph(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.ud&&(Qi(this.ud,!0),Ji(this.ud,c,a));this.$e&&(Qi(this.$e,!0),Ji(this.$e,c,a))};
f.ce=function(){var a=ni(this.H()),b=Ph(a)||window;if("fixed"==vi(this.a()))var c=a=0;else c=qi(this.H()),a=c.x,c=c.y;var d=Mi(this.a()),b=Nh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);wi(this.a(),a,c);wi(this.Zg,a,c)};f.HM=function(a){this.Ru?this.nE():a.target==this.Zg&&Uf(this.NB,0,this)};f.NB=function(){try{hc&&ni(this.H()).body.focus(),this.a().focus()}catch(a){}};
f.e=function(){Bc(this.Vl);this.Vl=null;Bc(this.Ul);this.Ul=null;Bc(this.Rm);this.Rm=null;Bc(this.Qm);this.Qm=null;Wj.c.e.call(this)};function ck(a,b,c){Wj.call(this,b,c);this.Yd=a||"modal-dialog";this.Q=dk(dk(new ek,fk,!0),gk,!1,!0)}w(ck,Wj);f=ck.prototype;f.EB=!0;f.gw=!0;f.Nw=!0;f.Yr=!0;f.Gr=.5;f.nd="";f.Oc=null;f.Wa=null;f.LI=!1;f.Jd=null;f.ee=null;f.Mt=null;f.Ie=null;f.Cg=null;f.bd=null;f.Fx="dialog";f.P=function(){return this.Yd};f.Zf=function(a){this.nd=a;this.ee&&ci(this.ee,a)};f.ff=function(){return this.nd};f.rk=function(a){this.Oc=a=qj(a,null);this.Cg&&(this.Cg.innerHTML=pj(a))};
f.xe=function(){return null!=this.Oc?pj(this.Oc):""};f.Xj=function(){return this.Fx};f.fb=function(){this.a()||this.k();return this.Cg};f.tC=function(){this.a()||this.k();return this.Jd};f.gn=function(){this.a()||this.k();return ck.c.gn.call(this)};function hk(a,b){a.Gr=b;if(a.a()){var c=a.gn();c&&Pi(c,a.Gr)}}function ik(a,b){b!=a.Nw&&jk(a,b)}function jk(a,b){a.Nw=b;if(a.ga){var c=a.H(),d=a.gn(),e=a.ud;b?(e&&c.ow(e,a.a()),c.ow(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.Ja()&&ak(a,b)}
f.Bt=function(a){this.Yr=a;this.fq(a&&this.ga)};f.fq=function(a){var b=Ha(this.Yd+"-title-draggable").split(" ");this.a()&&(a?Nj(this.Jd,b):Pj(this.Jd,b));a&&!this.Wa?(this.Wa=new dj(this.a(),this.Jd),Nj(this.Jd,b),P(this.Wa,"start",this.Ct,!1,this)):!a&&this.Wa&&(this.Wa.g(),this.Wa=null)};
f.r=function(){ck.c.r.call(this);var a=this.a(),b=this.H();this.Jd=b.r("div",this.Yd+"-title",this.ee=b.r("span",{className:this.Yd+"-title-text",id:wj(this)},this.nd),this.Ie=b.r("span",this.Yd+"-title-close"));Th(a,this.Jd,this.Cg=b.r("div",this.Yd+"-content"),this.bd=b.r("div",this.Yd+"-buttons"));Sj(this.ee,"heading");Sj(this.Ie,"button");fi(this.Ie,!0);Tj(this.Ie,"label",kk);this.Mt=this.ee.id;Sj(a,this.Xj());Tj(a,"labelledby",this.Mt||"");this.Oc&&(this.Cg.innerHTML=pj(this.Oc));Qi(this.Ie,
this.gw);this.Q&&(a=this.Q,a.l=this.bd,a.k());Qi(this.bd,!!this.Q);hk(this,this.Gr)};
f.se=function(a){ck.c.se.call(this,a);a=this.a();var b=this.Yd+"-content";this.Cg=Hh(null,b,a)[0];this.Cg||(this.Cg=this.H().r("div",b),this.Oc&&(this.Cg.innerHTML=pj(this.Oc)),a.appendChild(this.Cg));var b=this.Yd+"-title",c=this.Yd+"-title-text",d=this.Yd+"-title-close";(this.Jd=Hh(null,b,a)[0])?(this.ee=Hh(null,c,this.Jd)[0],this.Ie=Hh(null,d,this.Jd)[0]):(this.Jd=this.H().r("div",b),a.insertBefore(this.Jd,this.Cg));this.ee?(this.nd=ii(this.ee),this.ee.id||(this.ee.id=wj(this))):(this.ee=W("span",
{className:c,id:wj(this)}),this.Jd.appendChild(this.ee));this.Mt=this.ee.id;Tj(a,"labelledby",this.Mt||"");this.Ie||(this.Ie=this.H().r("span",d),this.Jd.appendChild(this.Ie));Qi(this.Ie,this.gw);b=this.Yd+"-buttons";(this.bd=Hh(null,b,a)[0])?(this.Q=new ek(this.H()),this.Q.Eb(this.bd)):(this.bd=this.H().r("div",b),a.appendChild(this.bd),this.Q&&(a=this.Q,a.l=this.bd,a.k()),Qi(this.bd,!!this.Q));hk(this,this.Gr)};
f.eb=function(){ck.c.eb.call(this);this.gb().s(this.a(),"keydown",this.Oi).s(this.a(),"keypress",this.Oi);this.gb().s(this.bd,"click",this.zM);this.fq(this.Yr);this.gb().s(this.Ie,"click",this.sN);var a=this.a();Sj(a,this.Xj());""!==this.ee.id&&Tj(a,"labelledby",this.ee.id);this.Nw||jk(this,!1)};f.Cc=function(){this.Ja()&&this.ea(!1);this.fq(!1);ck.c.Cc.call(this)};f.ea=function(a){a!=this.Ja()&&(this.ga||this.k(),ck.c.ea.call(this,a))};f.ct=function(){ck.c.ct.call(this);this.dispatchEvent(lk)};
f.Ys=function(){ck.c.Ys.call(this);this.dispatchEvent(mk);this.LI&&this.g()};f.Ct=function(){var a=ni(this.H()),b=Nh(Ph(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=Mi(this.a());"fixed"==vi(this.a())?fj(this.Wa,new xh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):fj(this.Wa,new xh(0,0,c-d.width,a-d.height))};f.sN=function(){nk(this)};
function nk(a){if(a.gw){var b=a.Q,c=b&&b.$u;c?(b=b.get(c),a.dispatchEvent(new ok(c,b))&&a.ea(!1)):a.ea(!1)}}f.e=function(){this.bd=this.Ie=null;ck.c.e.call(this)};function pk(a,b){a.Q=b;if(a.bd){if(a.Q){var c=a.Q;c.l=a.bd;c.k()}else a.bd.innerHTML=pj(rj);Qi(a.bd,!!a.Q)}}f.zM=function(a){a:{for(a=a.target;null!=a&&a!=this.bd;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.Q.get(a);this.dispatchEvent(new ok(a,b))&&this.ea(!1)}};
f.Oi=function(a){var b=!1,c=!1,d=this.Q,e=a.target;if("keydown"==a.type)if(this.EB&&27==a.keyCode){var g=d&&d.$u,e="SELECT"==e.tagName&&!e.disabled;g&&!e?(c=!0,b=d.get(g),b=this.dispatchEvent(new ok(g,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.Ru=!0;try{this.Zg.focus()}catch(k){}Uf(this.nE,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)g=e.name;else if(e==this.Ie)nk(this);else if(d){var l=d.yv,n;if(n=l)a:{n=d.l.getElementsByTagName("BUTTON");for(var m=
0,q;q=n[m];m++)if(q.name==l||q.id==l){n=q;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(g=l)}g&&d&&(c=!0,b=this.dispatchEvent(new ok(g,String(d.get(g)))))}else e==this.Ie&&32==a.keyCode&&nk(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.ea(!1)};function ok(a,b){this.type=qk;this.key=a;this.caption=b}w(ok,Dc);var qk="dialogselect",mk="afterhide",lk="aftershow";function ek(a){this.pb=a||Dh();jd.call(this)}var rk;w(ek,jd);
f=ek.prototype;f.Yd="goog-buttonset";f.yv=null;f.l=null;f.$u=null;f.set=function(a,b,c,d){jd.prototype.set.call(this,a,b);c&&(this.yv=a);d&&(this.$u=a);return this};function dk(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.k=function(){if(this.l){this.l.innerHTML=pj(rj);var a=Dh(this.l);this.forEach(function(b,c){var d=a.r("button",{name:c},b);c==this.yv&&(d.className=this.Yd+"-default");this.l.appendChild(d)},this)}};
f.Eb=function(a){if(a&&1==a.nodeType){this.l=a;a=this.l.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=ii(c)||c.value,d){var g=0==b;this.set(d,e,g,c.name==sk);g&&Mj(c,this.Yd+"-default")}}};f.a=function(){return this.l};f.H=function(){return this.pb};var sk="cancel",kk="Close",fk={key:"ok",caption:"OK"},gk={key:sk,caption:"Cancel"},tk={key:"yes",caption:"Yes"},uk={key:"no",caption:"No"},vk={key:"save",caption:"Save"},wk={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(dk(new ek,fk,!0,!0),dk(dk(new ek,fk,!0),gk,!1,!0),rk=dk(dk(new ek,tk,!0),uk,!1,!0),dk(dk(dk(new ek,tk),uk,!0),gk,!1,!0),dk(dk(dk(new ek,wk),vk),gk,!0,!0));t("nrg.string",function(){});function xk(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function yk(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function zk(a){if(null!=a)return a="array"==ha(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function Ak(a){return a.replace(/\W/g,"")}function Bk(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
t("nrg.string.basename",xk);t("nrg.string.dirname",yk);t("nrg.string.getFileExtension",zk);t("nrg.string.fileNameMatch",function(a,b){return xk(a)===xk(b)});t("nrg.string.stripNonAlphanumeric",Ak);t("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});t("nrg.string.getLettersOnly",function(a){return Ak(a).replace(/[0-9]/g,"")});
t("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});t("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});t("nrg.string.makeCssName",Bk);function Ck(a,b,c){xc.call(this);this.Aw=a;this.vn=b||0;this.gd=c;this.oI=ua(this.NI,this)}w(Ck,xc);f=Ck.prototype;f.Kf=0;f.e=function(){Ck.c.e.call(this);this.stop();delete this.Aw;delete this.gd};f.start=function(a){this.stop();this.Kf=Uf(this.oI,ca(a)?a:this.vn)};f.stop=function(){this.Ch()&&ba.clearTimeout(this.Kf);this.Kf=0};f.Ch=function(){return 0!=this.Kf};f.NI=function(){this.Kf=0;this.Aw&&this.Aw.call(this.gd)};var pb={},Dk=null;function Ek(a){a=oa(a);delete pb[a];ob()&&Dk&&Dk.stop()}function Fk(){Dk||(Dk=new Ck(function(){Gk()},20));var a=Dk;a.Ch()||a.start()}function Gk(){var a=xa();I(pb,function(b){Hk(b,a)});ob()||Fk()};function Ik(){ad.call(this);this.J=Jk;this.endTime=this.startTime=null}w(Ik,ad);var Jk=0;Ik.prototype.Ni=function(){this.ed("begin")};Ik.prototype.Fd=function(){this.ed("end")};Ik.prototype.ed=function(a){this.dispatchEvent(a)};function Kk(a,b,c,d){Ik.call(this);if(!h(a)||!h(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.vq=a;this.XI=b;this.duration=c;this.Tz=d;this.coords=[];this.gm=!1}w(Kk,Ik);f=Kk.prototype;f.Pj=function(a){this.gm=a};f.Vf=0;
f.play=function(a){if(a||this.J==Jk)this.Vf=0,this.coords=this.vq;else if(1==this.J)return!1;Ek(this);this.startTime=a=xa();-1==this.J&&(this.startTime-=this.duration*this.Vf);this.endTime=this.startTime+this.duration;this.Vf||this.Ni();this.ed("play");-1==this.J&&this.ed("resume");this.J=1;var b=oa(this);b in pb||(pb[b]=this);Fk();Hk(this,a);return!0};f.stop=function(a){Ek(this);this.J=Jk;a&&(this.Vf=1);Lk(this,this.Vf);this.ed("stop");this.Fd()};
f.e=function(){this.J==Jk||this.stop(!1);this.ed("destroy");Kk.c.e.call(this)};f.Df=function(){this.g()};function Hk(a,b){a.Vf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.Vf&&(a.Vf=1);Lk(a,a.Vf);1==a.Vf?(a.J=Jk,Ek(a),a.ed("finish"),a.Fd()):1==a.J&&a.$w()}function Lk(a,b){ma(a.Tz)&&(b=a.Tz(b));a.coords=Array(a.vq.length);for(var c=0;c<a.vq.length;c++)a.coords[c]=(a.XI[c]-a.vq[c])*b+a.vq[c]}f.$w=function(){this.ed("animate")};f.ed=function(a){this.dispatchEvent(new Mk(a,this))};
function Mk(a,b){Dc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.Vf=b.Vf;this.state=b.J}w(Mk,Dc);var Nk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ok(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Pk.test(c))return b.nn=Qk(c),b.type="hex",b;a:{var d=a.match(Rk);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.nn=Sk(c),b.type="rgb",b;if(Nk&&(c=Nk[a.toLowerCase()]))return b.nn=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Tk=/#(.)(.)(.)/;
function Qk(a){if(!Pk.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Tk,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Uk(a){a=Qk(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Sk(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Vk(b.toString(16));c=Vk(c.toString(16));a=Vk(a.toString(16));return"#"+b+c+a}var Pk=/^#(?:[0-9a-f]{3}){1,2}$/i,Rk=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Vk(a){return 1==a.length?"0"+a:a}
function Wk(a,b,c){var d=0,e=0,g=0;if(0==b)g=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;g=a;break;case 2:d=a;e=c;g=b;break;case 3:d=a;e=n;g=c;break;case 4:d=b;e=a;g=c;break;case 5:d=c;e=a;g=n;break;case 6:case 0:d=c,e=b,g=a}}return Sk([Math.floor(d),Math.floor(e),Math.floor(g)])};function Xk(a,b,c,d,e){Kk.call(this,b,c,d,e);this.element=a}w(Xk,Kk);f=Xk.prototype;f.j=fa;f.jf=function(){ca(this.Lh)||(this.Lh=Ei(this.element));return this.Lh};f.$w=function(){this.j();Xk.c.$w.call(this)};f.Fd=function(){this.j();Xk.c.Fd.call(this)};f.Ni=function(){this.j();Xk.c.Ni.call(this)};function Yk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Xk.apply(this,arguments)}w(Yk,Xk);
Yk.prototype.j=function(){var a=this.gm&&this.jf()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Zk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Xk.apply(this,arguments)}w(Zk,Xk);Zk.prototype.j=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function $k(a,b,c,d,e){Xk.call(this,a,[b],[c],d,e)}w($k,Xk);$k.prototype.j=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function al(a,b,c,d,e){Xk.call(this,a,[b],[c],d,e)}w(al,Xk);al.prototype.j=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function bl(a,b,c,d,e){la(b)&&(b=[b]);la(c)&&(c=[c]);Xk.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(bl,Xk);bl.prototype.j=function(){Pi(this.element,this.coords[0])};
bl.prototype.show=function(){this.element.style.display=""};bl.prototype.pn=function(){this.element.style.display="none"};function cl(a,b,c){bl.call(this,a,1,0,b,c)}w(cl,bl);function dl(a,b,c){bl.call(this,a,0,1,b,c)}w(dl,bl);function el(a,b,c){bl.call(this,a,1,0,b,c)}w(el,bl);el.prototype.Ni=function(){this.show();el.c.Ni.call(this)};el.prototype.Fd=function(){this.pn();el.c.Fd.call(this)};function fl(a,b,c){bl.call(this,a,0,1,b,c)}w(fl,bl);fl.prototype.Ni=function(){this.show();fl.c.Ni.call(this)};
function gl(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Xk.apply(this,arguments)}w(gl,Xk);gl.prototype.At=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};gl.prototype.j=function(){this.At()};function hl(){Ik.call(this);this.tc=[]}w(hl,Ik);hl.prototype.add=function(a){Gb(this.tc,a)||(this.tc.push(a),P(a,"finish",this.ax,!1,this))};hl.prototype.remove=function(a){Kb(this.tc,a)&&Uc(a,"finish",this.ax,!1,this)};hl.prototype.e=function(){N(this.tc,function(a){a.g()});this.tc.length=0;hl.c.e.call(this)};function il(){hl.call(this);this.Kv=0}w(il,hl);
il.prototype.play=function(a){if(0==this.tc.length)return!1;if(a||this.J==Jk)this.Kv=0,this.Ni();else if(1==this.J)return!1;this.ed("play");-1==this.J&&this.ed("resume");var b=-1==this.J&&!a;this.startTime=xa();this.endTime=null;this.J=1;N(this.tc,function(c){b&&-1!=c.J||c.play(a)});return!0};il.prototype.stop=function(a){N(this.tc,function(b){b.J==Jk||b.stop(a)});this.J=Jk;this.endTime=xa();this.ed("stop");this.Fd()};
il.prototype.ax=function(){this.Kv++;this.Kv==this.tc.length&&(this.endTime=xa(),this.J=Jk,this.ed("finish"),this.Fd())};function jl(){hl.call(this);this.Dg=0}w(jl,hl);jl.prototype.play=function(a){if(0==this.tc.length)return!1;if(a||this.J==Jk)this.Dg<this.tc.length&&this.tc[this.Dg].J!=Jk&&this.tc[this.Dg].stop(!1),this.Dg=0,this.Ni();else if(1==this.J)return!1;this.ed("play");-1==this.J&&this.ed("resume");this.startTime=xa();this.endTime=null;this.J=1;this.tc[this.Dg].play(a);return!0};
jl.prototype.stop=function(a){this.J=Jk;this.endTime=xa();if(a)for(a=this.Dg;a<this.tc.length;++a){var b=this.tc[a];b.J==Jk&&b.play();b.J==Jk||b.stop(!0)}else this.Dg<this.tc.length&&this.tc[this.Dg].stop(!1);this.ed("stop");this.Fd()};jl.prototype.ax=function(){1==this.J&&(this.Dg++,this.Dg<this.tc.length?this.tc[this.Dg].play():(this.endTime=xa(),this.J=Jk,this.ed("finish"),this.Fd()))};t("nrg.convert",function(){});function kl(a){if(!h(a)&&!la(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function ll(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function ml(a){if(!ja(a)&&!la(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)}
function nl(a){var b={};I(a,function(a,d){isNaN(a)?ja(a)&&(b[d]=a):b[d]=a});return b}function ol(a){var b={};I(a,function(a,d){ja(a)?0<a.length&&(b[d]=a):b[d]=a});return b}t("nrg.convert.pct",function(a){if(!la(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});t("nrg.convert.px",kl);t("nrg.convert.remap1D",ll);t("nrg.convert.toInt",ml);
t("nrg.convert.toFloatArray",function(a){if(!ja(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");N(a,function(a,d){b[d]=parseFloat(a,10)});return b});t("nrg.convert.objectToArray",function(a){if(!na(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});t("nrg.convert.rgbToArray",function(a){if(!ja(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
t("nrg.convert.arrayToRgb",function(a,b){if(!h(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;N(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});t("nrg.convert.filterNaN",nl);t("nrg.convert.filterZeroLengthStrings",ol);t("nrg.style",function(){});var pl="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function ql(a){return a.getBoundingClientRect()}
function rl(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return ml(a.style[b]);var d=Fi(a,a.parentNode),d={left:ml(a.style.left)||d.x,top:ml(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?Fi(a,a.parentNode):Fi(a,document.body),
d={left:ml(a.style.left)||d.x,top:ml(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c}
function sl(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function tl(a,b){a&&b&&(a.style||(a.style={}),ri(a,b),N("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Da(b[c],"%")&&(a.style[c]=kl(b[c]))}))}var ul="is_hovered_"+C();
function vl(a,b,c,d,e,g){function k(){a[ul]=!1;ph(a,b);null!=g&&g()}function l(){a[ul]=!0;S(a,b);null!=e&&e()}P(a,"mouseover",l);P(a,"mouseout",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}t("nrg.style.cssProperties",pl);t("nrg.style.removeClassesThatContain",function(a,b){var c=nh(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)ph(a,d[e])});t("nrg.style.absolutePosition",ql);t("nrg.style.dims",rl);
t("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});t("nrg.style.getComputedStyle",function(a,b){if(b&&ja(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=pl);for(var c={},d=window.getComputedStyle(a,null),e=0,g=b.length,e=0;e<g;e++)c[b[e]]=d.getPropertyValue(b[e]);return sl(c)});t("nrg.style.parseIntNumericalProperties",sl);t("nrg.style.setStyle",tl);t("nrg.style.IS_HOVERED",ul);
t("nrg.style.setHoverClass",vl);t("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function wl(a){return 1-Math.pow(1-a,3)};function xl(){}t("nrg.fx",xl);function yl(a,b,c){void 0===b&&(b=500);zl(a,b,1,c)}function Al(a,b,c){void 0===b&&(b=500);zl(a,0,0,function(){zl(a,b,1,c)})}function Bl(a,b,c){void 0===b&&(b=500);zl(a,b,0,c)}function zl(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var g=new bl(a,e,c,b);d&&g.addEventListener("end",function(a){d(a);Wc(g);delete g});g.play()}xl.animGenStyles="left top width height opacity background-color color z-index".split(" ");
function Cl(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Yk(a,[b.left,b.top],[c.left,c.top],d,wl)}function Dl(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Zk(a,[b.width,b.height],[c.width,c.height],d,wl)}
function El(a,b,c,d){if("opacity"in b||"opacity"in c)if(N([b,c],function(a){"opacity"in a||(a.opacity=1);la(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new bl(a,b.opacity,c.opacity,d)}function Fl(a,b,c,d){if("visibility"in b||"visibility"in c)if(N([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new fl(a,d):new el(a,d)}
function Gl(a,b,c,d){if("background-color"in b||"background-color"in c){N([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Ok(b["background-color"]),g=Ok(c["background-color"]);if(e.nn!==g.nn)return new gl(a,Uk(e),Uk(g),d,wl)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function Hl(a,b){this.aI=a;this.fP=b}function Il(a){return ol(nl(a))}
function Jl(a){var b=Mi(a),c=yi(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Kl(a,b){var c=Jl(a),c=Il(c),d=Jl(b),e=Il(d);I(c,function(a,b){null!=e[b]||(e[b]=a)});return new Hl(c,e)}
function Ll(a,b,c,d){var e=[];N(xl.animGenStyles,function(g){if(null!=b&&null!=c)switch(g){case "left":e.push(Cl(a,b,c,d));break;case "height":e.push(Dl(a,b,c,d));break;case "opacity":e.push(El(a,b,c,d));break;case "visibility":e.push(Fl(a,b,c,d));break;case "background-color":e.push(Gl(a,b,c,d))}});var g=[];N(e,function(a){null!=a&&g.push(a)});delete e;return g}
function Ml(a,b,c,d){var e=new il;N(a,function(a){c&&P(a,"animate",c);e.add(a)});b&&P(e,"begin",b);P(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Nl(a,b,c){function d(){tl(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;P(a,"mouseover",function(){tl(a,{opacity:b})});P(a,"mouseout",d);d()}t("nrg.fx.fadeIn",yl);t("nrg.fx.fadeInFromZero",Al);t("nrg.fx.fadeOut",Bl);
t("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);zl(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});t("nrg.fx.fadeTo",zl);t("nrg.fx.animGenStyles",xl.animGenStyles);t("nrg.fx.generateAnim_Slide",Cl);t("nrg.fx.generateAnim_Resize",Dl);t("nrg.fx.generateAnim_Fade",El);t("nrg.fx.generateAnim_RemoveAddFade",Fl);t("nrg.fx.generateAnim_BgColorTrans",Gl);t("nrg.fx.TransitionDims",Hl);t("nrg.fx.filterTransitionStyles",Il);t("nrg.fx.getTransitionStyles",Jl);
t("nrg.fx.generateTransitionDims",Kl);t("nrg.fx.generateAnimations",Ll);t("nrg.fx.parallelAnimate",Ml);t("nrg.fx.serialAnimate",function(a,b,c,d){var e=new jl;N(a,function(a){c&&P(a,"animate",c);e.add(a)});b&&P(e,"begin",b);P(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});t("nrg.fx.setBasicHoverStates",Nl);function Ol(a){return a.slice(a.lastIndexOf("/")+1)}function Pl(a){a=Ol(a).replace(/\.+/g,".");var b=a.lastIndexOf(".");return 0>=b?"":a.substr(b+1)}function Ql(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Da(b,"/")?b+d:b+("/"+d);return b};function Rl(){}t("nrg.dom",Rl);function Sl(a,b,c){if(!h(a))throw new TypeError("Array expected!",a);if(b&&!ja(b))throw new TypeError("String expected!",b);if(c&&!ja(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",g=0,g=0;for(len=a.length;g<len;g++)e=a[g],d[e]=Tl(e,{src:b?Ql(b,$a(e)+"."+c):""});return d}function Ul(a,b){var c=W("img",{src:b});c.style.HS="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Th(a,c);c.onclick=c.parentNode.onclick}
function Tl(a,b,c,d){if(!ja(a))throw new TypeError("String expected!");if(b&&!na(b))throw new TypeError("Object expected!");if(null!=c&&!la(c))throw new TypeError("Number expected!");if(null!=d&&!la(d))throw new TypeError("Number expected!");a=Xl("div",a,b?b:{});b&&b.src&&Ul(a,b.src);Nl(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Xl(a,b,c){if(!ja(a))throw new TypeError("String expected!",a);if(!ja(b))throw new TypeError("String expected!",b);if(c&&!na(c))throw new TypeError("Object expected!");c=c&&na(c)?c:{};c.id=c.id?c.id:b+"_"+C();c["class"]=c["class"]?c["class"]:$a(b.replace(/\./g,"-").toLowerCase());return W(a,c)}t("nrg.dom.createBasicHoverButtonSet",Sl);t("nrg.dom.createDivChildImage",Ul);t("nrg.dom.createBasicHoverButton",Tl);t("nrg.dom.createUniqueDom",Xl);
t("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});t("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Rl.mU(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
t("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function Z(a){tj.call(this,a);this.Dy();this.l=Xl("div",this.constructor.ID_PREFIX,a);this.Pr();Yl(this)}w(Z,tj);t("nrg.ui.Component",Z);f=Z.prototype;f.Dy=function(){if(this instanceof Z){this.constructor.c&&this.constructor.c instanceof Z&&Z.prototype.Dy.bind(this.constructor.c)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.bo)||(this.constructor.bo=Zl(this.constructor.ID_PREFIX),this.constructor.Hc=this.constructor.bo)}};
function Zl(a){return a.toLowerCase().replace(/\./g,"-")}f.Pr=function(){if(null!=this.constructor.c)for(var a=this.constructor.c;null!=a.constructor.ID_PREFIX;)Z.prototype.Pr.bind(a)(),a=a.constructor.c;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=ub(this.constructor.CSS_SUFFIX),I(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=Bk(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Yl(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Zl(c.constructor.ID_PREFIX),Ib(b,d),c=c.constructor.c;N(b,function(a){null!=this.a()&&S(this.a(),a)}.bind(a))}f.fk="";f.AE=function(a){this.fk=a};f.QJ=function(){return this.fk};f.PH=function(a){null==this.yq&&(this.yq=[]);this.yq.push(a)};
f.oi=function(){if(null==this.ia)this.ia=Mi(this.a());else if(this.ia.height!==this.q.height||this.ia.width!==this.q.width)this.ia=this.q;if(null==this.Yp)this.Yp=yi(this.a());else if(this.Yp.x!==this.Qr.x||this.Yp.y!==this.Qr.y)this.Yp=this.Qr;this.q=Mi(this.a());this.Qr=yi(this.a())};f.j=function(){this.oi()};f.k=function(a){this.ga&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):Z.c.k.call(this,a)};f.zB=!1;f.KI=function(){return this.zB};
f.e=function(){Z.c.e.call(this);null!=this.yq&&(N(this.yq,function(a){Wc(a);a.g()}),Hb(this.yq));Wc(this);Wc(this.a());Y(this.a());this.Yp=this.ia=this.Qr=this.q=this.fk=null;this.zB=!0};f.Av=function(a){null!=a&&(a=h(a)?a:[a],N(a,function(a){Wc(a);a.g()}),Hb(a))};f.Ur=function(a){null!=a&&(Wc(a),a.g())};f.Vr=function(a){I(a,function(b,c){Wc(b);Y(b);delete a[c]});qb(a)};f.Vo=function(a){I(a,function(b,c){Wc(b);b.g();delete a[c]});qb(a)};t("nrg.ui.Component.animationLengths",{ZP:150,xQ:300,hR:600});
t("nrg.ui.Component.idPrefixToCssClass",Zl);t("nrg.ui.Component.prototype.validateIdPrefix",Z.prototype.Dy);t("nrg.ui.Component.prototype.imagePrefix",Z.prototype.fk);t("nrg.ui.Component.prototype.createCssMap",Z.prototype.Pr);t("nrg.ui.Component.prototype.setImagePrefix",Z.prototype.AE);t("nrg.ui.Component.prototype.getImagePrefix",Z.prototype.QJ);t("nrg.ui.Component.prototype.addSubComponent",Z.prototype.PH);t("nrg.ui.Component.prototype.calcDims",Z.prototype.oi);
t("nrg.ui.Component.prototype.updateStyle",Z.prototype.j);t("nrg.ui.Component.prototype.render",Z.prototype.k);t("nrg.ui.Component.prototype.disposeInternalCalled",Z.prototype.KI);t("nrg.ui.Component.prototype.disposeAnimations",Z.prototype.Av);t("nrg.ui.Component.prototype.disposeAnimationQueue",Z.prototype.Ur);t("nrg.ui.Component.prototype.disposeElementMap",Z.prototype.Vr);t("nrg.ui.Component.prototype.disposeComponentMap",Z.prototype.Vo);t("nrg.ui.Component.prototype.disposeInternal",Z.prototype.e);function $l(){ck.call(this);this.EB=!1}w($l,ck);t("nrg.ui.Dialog",$l);$l.ID_PREFIX="nrg.ui.Dialog";$l.CSS={iz:"nrg-ui-dialog-overlay",Rq:"nrg-ui-dialog-background",ej:"nrg-ui-dialog-closebutton",ZF:"nrg-ui-dialog-closebutton-image",pm:"nrg-ui-dialog-text",xf:"nrg-ui-dialog-title",$h:"nrg-ui-dialog-content",WF:"nrg-ui-dialog-buttons"};f=$l.prototype;
f.KE=function(a){this.Un.style.visibility="hidden";this.wd.style.visibility="hidden";null!=a&&vl(this.a(),a,null,null,function(){this.Un.style.visibility="visible";this.wd.style.visibility="visible"}.bind(this),function(){this.Un.style.visibility="hidden";this.wd.style.visibility="hidden"}.bind(this))};f.Ku=function(a){S(this.Un,a)};f.aA=function(a){S(this.Oc,a)};f.Xz=function(a){S(this.wd.parentNode,a)};f.Yz=function(a){S(this.wd,a)};f.Zz=function(a){S(this.Mr,a)};f.MH=function(a){S(this.Xu,a)};
function am(a){a.Mr=Jh("modal-dialog-title-close",a.a())[0];S(a.Mr,$l.CSS.ej);a.wd=W("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+C(),"class":$l.CSS.ZF});a.wd.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.Mr.appendChild(a.wd);P(a.wd,"click",function(a){this.ea(!this.Ja());this.dispatchEvent({type:"c"});a.stopPropagation()}.bind(a))}f.WH=function(){var a=this.a(),b=dl(a,600),c=cl(a,600),d=dl(a,600),a=cl(a,600);this.TE(b,c,d,a)};
f.Ww=function(a,b){var c=this.a();"left"==a&&(c.style.left="0px");"top"==b&&(c.style.top="0px")};f.qh=function(){var a=this.a(),b=Mi(this.a().parentNode);if(null!=this.gn()){var c=this.gn();0==c.opacity?Y(c):tl(c,{width:b.width,height:b.height,"z-index":199})}var c=Mi(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);wi(a,d,e)};f.Yr=!0;f.Wa=null;f.Bt=function(a){this.Yr=a;this.fq(a&&this.ga)};
f.fq=function(a){var b=Ha(this.P()+"-title-draggable").split(" "),c=this.tC();this.a()&&(a?Nj(c,b):Pj(c,b));a&&!this.Wa?(this.Wa=new dj(this.a(),this.Jd),Nj(c,b),P(this.Wa,"start",this.Ct,!1,this)):!a&&this.Wa&&(this.Wa.g(),this.Wa=null)};f.DF=function(){this.Ct()};
f.Ct=function(){var a=ni(this.H()),b=Ph(a)||window,a=Mi(this.a().parentNode),b=Nh(b||window),c=Mi(this.a());"fixed"==vi(this.a())?fj(this.Wa,new xh(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):fj(this.Wa,new xh(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))};f.Br=function(a){var b=W("img",{id:this.constructor.ID_PREFIX+"_Image_"+C(),"class":$l.CSS.Tq});null==this.rp&&(this.rp=[]);this.rp.push(b);this.ft.appendChild(b);null!=a&&(b.src=a);return b};
f.zj=function(a){var b=W("div",{id:this.constructor.ID_PREFIX+"_Text_"+C(),"class":$l.CSS.pm},a);null==this.Qh&&(this.Qh=[]);this.Qh.push(b);b.innerHTML=a||"";this.rk(a);return b};f.hK=function(){return this.a()};
f.k=function(a){$l.c.k.call(this,a);S(this.a(),"nrg-ui-dialog");this.Un=Jh("modal-dialog-title",this.a())[0];this.Oc=Jh("modal-dialog-content",this.a())[0];this.Xu=Jh("modal-dialog-buttons",this.a())[0];this.wd=null;am(this);S(this.Xu,$l.CSS.WF);S(this.Un,$l.CSS.xf);S(this.Oc,$l.CSS.$h);$l.c.Bt.call(this,!1);this.Bt(!0)};f.ea=function(a){$l.c.ea.call(this,a)};f.DK=function(){return this.Qh};
f.e=function(){$l.c.e.call(this);delete this.Xu;delete this.Un;delete this.Oc;delete this.wd;delete this.Mr;null!=this.ft&&(Y(this.ft),delete this.ft);null!=this.Qh&&(N(this.Qh,function(a){Y(a);delete a}),delete this.Qh);null!=this.rp&&(N(this.rp,function(a){Y(a);delete a}),delete this.rp)};t("nrg.ui.Dialog.ID_PREFIX",$l.ID_PREFIX);t("nrg.ui.Dialog.EventType",{IQ:"a",CLOSED:"b",MP:"c"});t("nrg.ui.Dialog.prototype.setMouseoverClass",$l.prototype.KE);t("nrg.ui.Dialog.prototype.addTitleClass",$l.prototype.Ku);
t("nrg.ui.Dialog.prototype.addContentClass",$l.prototype.aA);t("nrg.ui.Dialog.prototype.addCloseButtonClass",$l.prototype.Xz);t("nrg.ui.Dialog.prototype.addCloseButtonImageClass",$l.prototype.Yz);t("nrg.ui.Dialog.prototype.addCloseSpanClass",$l.prototype.Zz);t("nrg.ui.Dialog.prototype.addButtonsClass",$l.prototype.MH);t("nrg.ui.Dialog.prototype.applyFadeTransitions",$l.prototype.WH);t("nrg.ui.Dialog.prototype.moveToCorner",$l.prototype.Ww);t("nrg.ui.Dialog.prototype.center",$l.prototype.qh);
t("nrg.ui.Dialog.prototype.setDraggable",$l.prototype.Bt);t("nrg.ui.Dialog.prototype.updateLimits",$l.prototype.DF);t("nrg.ui.Dialog.prototype.addImage",$l.prototype.Br);t("nrg.ui.Dialog.prototype.addText",$l.prototype.zj);t("nrg.ui.Dialog.prototype.getOverlay",$l.prototype.hK);t("nrg.ui.Dialog.prototype.render",$l.prototype.k);t("nrg.ui.Dialog.prototype.setVisible",$l.prototype.ea);t("nrg.ui.Dialog.prototype.getTextElements",$l.prototype.DK);t("nrg.ui.Dialog.prototype.disposeInternal",$l.prototype.e);function bm(){$l.call(this);S(this.ft,bm.CSS.iz)}w(bm,$l);t("nrg.ui.ErrorOverlay",bm);bm.ID_PREFIX="nrg.ui.ErrorOverlay";bm.CSS={iz:"nrg-ui-infooverlay-overlay",pm:"nrg-ui-infooverlay-text"};bm.prototype.zj=function(a){bm.c.zj.call(this,a);a=this.Qh;S(a[a.length-1],bm.CSS.pm)};bm.prototype.e=function(){bm.c.e.call(this)};t("nrg.ui.ErrorOverlay.ID_PREFIX",bm.ID_PREFIX);t("nrg.ui.ErrorOverlay.prototype.addText",bm.prototype.zj);t("nrg.ui.ErrorOverlay.prototype.disposeInternal",bm.prototype.e);function cm(a,b,c,d,e){function g(a){a&&(a.tabIndex=0,Sj(a,k.wh()),Mj(a,"goog-zippy-header"),dm(k,a),a&&k.gD.s(a,"keydown",k.Xs))}ad.call(this);this.pb=e||Dh();this.ul=this.pb.a(a)||null;this.$r=this.pb.a(d||null);this.oc=(this.xw=ma(b)?b:null)||!b?null:this.pb.a(b);this.Rj=!0==c;this.gD=new $i(this);this.Pw=new $i(this);var k=this;g(this.ul);g(this.$r);this.dc(this.Rj)}w(cm,ad);var em={Hy:"action",pz:"toggle"};f=cm.prototype;f.Gl=!0;f.e=function(){cm.c.e.call(this);Bc(this.gD);Bc(this.Pw)};
f.wh=function(){return"tab"};f.fb=function(){return this.oc};f.toggle=function(){this.dc(!this.Rj)};f.dc=function(a){this.oc?Qi(this.oc,a):a&&this.xw&&(this.oc=this.xw());this.oc&&Mj(this.oc,"goog-zippy-content");this.$r?(Qi(this.ul,!a),Qi(this.$r,a)):fm(this,a);this.Rj=a;this.dispatchEvent(new gm(em.pz,this))};function fm(a,b){a.ul&&(Qj(a.ul,"goog-zippy-expanded",b),Qj(a.ul,"goog-zippy-collapsed",!b),Tj(a.ul,"expanded",b))}
f.hq=function(a){this.Gl!=a&&((this.Gl=a)?(dm(this,this.ul),dm(this,this.$r)):this.Pw.Xf())};function dm(a,b){b&&a.Pw.s(b,"click",a.Ws)}f.Xs=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Dc(em.Hy,this)),a.preventDefault(),a.stopPropagation()};f.Ws=function(){this.toggle();this.dispatchEvent(new Dc(em.Hy,this))};function gm(a,b){Dc.call(this,a,b)}w(gm,Dc);function hm(a,b,c,d){d=d||Dh();var e=d.r("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.as=e;this.ug=null;cm.call(this,a,b,c,void 0,d);a=this.Rj;this.as.style.display=a?"":"none";fm(this,a)}w(hm,cm);f=hm.prototype;f.Fr=500;f.VH=wl;
f.dc=function(a){if(this.Rj!=a||this.ug){"none"==this.as.style.display&&(this.as.style.display="");var b=this.fb().offsetHeight,c=0;this.ug?(a=this.Rj,Wc(this.ug),this.ug.stop(!1),c=parseInt(this.fb().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;fm(this,a);this.ug=new Kk([0,c],[0,a?b:0],this.Fr,this.VH);P(this.ug,["begin","animate","end"],this.xM,!1,this);P(this.ug,"end",ua(this.yM,this,a));this.ug.play(!1)}};f.xM=function(a){var b=this.fb();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.yM=function(a){a&&(this.fb().style.marginTop="0");Wc(this.ug);this.Rj=a;this.ug=null;a||(this.as.style.display="none");this.dispatchEvent(new gm(em.pz,this))};function im(a,b,c,d){Z.call(this);this.nd=a;this.Qb=W("div",{id:"ZippyHeader_"+a+"_"+C(),"class":im.CSS.Sq});this.Qb[jm]=a.toLowerCase();null!=d?d(b,this.Qb):b.appendChild(this.Qb);d=W("div",{id:"ZippyHeaderLabel_"+a+"_"+C(),"class":im.CSS.jG});var e=a.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");d.innerHTML=e.length<a?Ua(a,105):e.length==a.length?Ua(a,45):a;this.jw=d;this.Qb.appendChild(this.jw);this.yi=W("div",{id:"ZippyExpandIcon_"+a+"_"+C(),"class":im.CSS.fG},"+");this.Qb.appendChild(this.yi);
this.Um=W("div",{id:"ZippyContent_"+a+"_"+C(),"class":im.CSS.$h});b.appendChild(this.Um);this.le=new this.zP(this.Qb,this.Um,null!=c?c:!1);this.TO=oa(this);this.he={};P(this.Qb,"mouseover",this.JN.bind(this));P(this.Qb,"mouseout",this.IN.bind(this));km(this)}w(im,Z);t("nrg.ui.ZippyNode",im);im.ID_PREFIX="nrg.ui.ZippyNode";var lm={};im.CSS_SUFFIX={Sq:"header",Wy:"header-mouseover",jG:"header-label",fG:"expandicon",Oy:"expandicon-mouseover",$h:"content",$h:"content-sub"};var jm=C();f=im.prototype;
f.zP=hm;f.ff=function(){return this.nd};f.dc=function(a){this.le.dc(a)};function km(a){P(a.le,lb(em),function(a){null!=this.le.ug?this.dispatchEvent({type:"f"}):a.target.Rj?this.xx():(this.yi.innerHTML="+",tl(this.yi,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"e"}))}.bind(a))}f.xx=function(){this.yi.innerHTML="-";tl(this.yi,{"margin-left":"-1em"});this.dispatchEvent({type:"d"})};f.JN=function(){S(this.Qb,im.CSS.Wy);S(this.yi,im.CSS.Oy)};f.IN=function(){ph(this.Qb,im.CSS.Wy);ph(this.yi,im.CSS.Oy)};
f.e=function(){im.c.e.call(this);Y(this.jw);delete this.jw;Y(this.yi);delete this.yi;Wc(this.Qb);Y(this.Qb);delete this.Qb;Y(this.Um);delete this.Um;null!=this.le&&(this.le.g(),Wc(this.le),delete this.le);this.Vo(this.he);delete this.he;delete this.TO;delete this.nd};R.od={};R.od.Pd=function(){xc.call(this)};w(R.od.Pd,xc);t("gxnat.vis.VisNode",R.od.Pd);f=R.od.Pd.prototype;f.qi="Generic";f.xt=function(a){this.qi=a};f.vJ=function(){return this.qi};f.Sn="";f.oq=function(a){this.Sn=a};f.IK=function(){return this.Sn};f.nd=null;f.Zf=function(a){this.nd=a};f.ff=function(){return this.nd};f.g=function(){R.od.Pd.c.g.call(this);this.qi&&delete this.qi;this.Sn&&delete this.Sn;this.nd&&delete this.nd};t("gxnat.vis.VisNode.prototype.setCategory",R.od.Pd.prototype.xt);
t("gxnat.vis.VisNode.prototype.getCategory",R.od.Pd.prototype.vJ);t("gxnat.vis.VisNode.prototype.setThumbnailUrl",R.od.Pd.prototype.oq);t("gxnat.vis.VisNode.prototype.getThumbnailUrl",R.od.Pd.prototype.IK);t("gxnat.vis.VisNode.prototype.setTitle",R.od.Pd.prototype.Zf);t("gxnat.vis.VisNode.prototype.getTitle",R.od.Pd.prototype.ff);t("gxnat.vis.VisNode.prototype.dispose",R.od.Pd.prototype.g);var mm={};
function nm(){return function b(c,d,e){function g(l,m){if(!d[l]){if(!c[l]){var q="function"==typeof require&&require;if(!m&&q)return q(l,!0);if(k)return k(l,!0);throw Error("Cannot find module '"+l+"'");}q=d[l]={Ib:{}};c[l][0].call(q.Ib,function(b){var d=c[l][1][b];return g(d?d:b)},q,q.Ib,b,c,d,e)}return d[l].Ib}for(var k="function"==typeof require&&require,l=0;l<e.length;l++)g(e[l]);return g}({1:[function(b,c,d){d.Ev=function(b){for(var c="",d,l,n,m,q,p,r=0;r<b.length;)d=b.charCodeAt(r++),l=b.charCodeAt(r++),
n=b.charCodeAt(r++),m=d>>2,d=(d&3)<<4|l>>4,q=(l&15)<<2|n>>6,p=n&63,isNaN(l)?q=p=64:isNaN(n)&&(p=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(q)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p);return c};d.uv=function(b){var c="",d,l,n,m,q,p=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,
"");p<b.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(p++)),d=d<<2|l>>4,l=(l&15)<<4|m>>2,n=(m&3)<<6|q,c+=String.fromCharCode(d),64!=m&&(c+=String.fromCharCode(l)),64!=q&&(c+=
String.fromCharCode(n));return c}},{}],2:[function(b,c){function d(){this.crc32=this.dg=this.Bg=0;this.Sm=this.Fj=null}d.prototype={xe:function(){return null},Pv:function(){return null}};c.Ib=d},{}],3:[function(b,c,d){d.iR={An:"\x00\x00",iv:function(b){return b},AF:function(b){return b},jv:null,BF:null};d.TP=b("./flate")},{"./flate":6}],4:[function(b,c){function d(){this.data=null;this.index=this.length=0}var e=b("./utils");d.prototype={dv:function(b){this.TA(this.index+b)},TA:function(b){if(this.length<
b||0>b)throw Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?");},uk:function(b){this.TA(b);this.index=b},dF:function(b){this.uk(this.index+b)},Yu:function(){},aa:function(b){var c=0,d;this.dv(b);for(d=this.index+b-1;d>=this.index;d--)c=(c<<8)+this.Yu(d);this.index+=b;return c},Wf:function(b){return e.wc("string",this.nt(b))},nt:function(){},Hs:function(){},dO:function(){var b=this.aa(4);return new Date((b>>25&127)+1980,(b>>21&15)-1,b>>16&31,b>>11&31,
b>>5&63,(b&31)<<1)}};c.Ib=d},{"./utils":14}],5:[function(b,c,d){d.wg=!1;d.nh=!1;d.dir=!1;d.Eg=null;d.Tm=null},{}],6:[function(b,c,d){c="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;var e=b("pako");d.BF=c?"uint8array":"array";d.jv=c?"uint8array":"array";d.An="\b\x00";d.iv=function(b){return e.DI(b)};d.AF=function(b){return e.zL(b)}},{pako:19}],7:[function(b,c){function d(b,c){if(!(this instanceof d))return new d(b,c);this.files={};this.root="";
b&&this.load(b,c);this.clone=function(){var b=new d,c;for(c in this)"function"!==typeof this[c]&&(b[c]=this[c]);return b}}d.prototype.files=void 0;d.prototype.remove=void 0;d.prototype=b("./object");d.prototype.load=b("./load");d.gU=b("./support");d.ZS=b("./defaults");d.lU=b("./utils");d.wg=b("./base64");d.TS=b("./compressions");c.Ib=d},{"./base64":1,"./compressions":3,"./defaults":5,"./load":8,"./object":9,"./support":12,"./utils":14}],8:[function(b,c){var d=b("./base64"),e=b("./zipEntries");c.Ib=
function(b,c){var l,n,m;c=c||{};c.wg&&(b=d.uv(b));l=(new e(b,c)).files;for(n=0;n<l.length;n++)m=l[n],this.file(m.fileName,m.th,{nh:!0,XD:!0,Eg:m.Eg,dir:m.dir});return this}},{"./base64":1,"./zipEntries":15}],9:[function(b,c){function d(b){this.data=new Uint8Array(b);this.index=0}function e(){this.data=[]}function g(b){"/"!=b.slice(-1)&&(b+="/");this.files[b]||k.call(this,b,null,{dir:!0});return this.files[b]}function k(b,c,d){var e,k=b;"/"==k.slice(-1)&&(k=k.substring(0,k.length-1));e=k.lastIndexOf("/");
e=0<e?k.substring(0,e):"";k=s.Zj(c);e&&g.call(this,e);d=d||{};!0!==d.wg||null!==d.nh&&void 0!==d.nh||(d.nh=!0);d=l(d,y);d.Eg=d.Eg||new Date;null!==d.Tm&&(d.Tm=d.Tm.toUpperCase());if(d.dir||null===c||"undefined"===typeof c)d.wg=!1,d.nh=!1,c=null;else if("string"===k)d.nh&&!d.wg&&!0!==d.XD&&(c=s.nF(c));else{d.wg=!1;d.nh=!0;if(!(k||c instanceof O))throw Error("The data of '"+b+"' is in an unsupported format !");"arraybuffer"===k&&(c=s.wc("uint8array",c))}c=new m(b,c,d);return this.files[b]=c}function l(){var b=
{},c,d;for(c=0;c<arguments.length;c++)for(d in arguments[c])arguments[c].hasOwnProperty(d)&&"undefined"===typeof b[d]&&(b[d]=arguments[c][d]);return b}function n(b,c){var d="",e;for(e=0;e<c;e++)d+=String.fromCharCode(b&255),b>>>=8;return d}function m(b,c,d){this.name=b;this.S=c;this.options=d}function q(b){var c=p(b);if("string"===s.Zj(c)){if(!b.options.nh){if(J)return J.Ev(c);if(r.Vs)return K(c,"utf-8")}return b.$H()}return c}function p(b){if(b.S instanceof O&&(b.S=b.S.xe(),b.options.nh=!0,b.options.wg=
!1,"uint8array"===s.Zj(b.S))){var c=b.S;b.S=new Uint8Array(c.length);0!==c.length&&b.S.set(c,0)}return b.S}var r=b("./support"),s=b("./utils"),z=b("./signature"),y=b("./defaults"),F=b("./base64"),D=b("./compressions"),O=b("./compressedObject"),K=b("./nodeBuffer"),J,G;r.vy&&"function"===typeof TextEncoder&&"function"===typeof TextDecoder&&(J=new TextEncoder("utf-8"),G=new TextDecoder("utf-8"));m.prototype={$H:function(){var b;b=p(this);null===b||"undefined"===typeof b?b="":(this.options.wg&&(b=F.uv(b)),
b=s.wc("string",b),this.options.nh||(b=E.GF(b)));return b},bI:function(){var b=q(this);return s.wc("uint8array",b)},ZH:function(){return this.bI().buffer}};e.prototype={append:function(b){b=s.wc("string",b);this.data.push(b)},LB:function(){return this.data.join("")}};d.prototype={append:function(b){0!==b.length&&(b=s.wc("uint8array",b),this.data.set(b,this.index),this.index+=b.length)},LB:function(){return this.data}};var E={load:function(){throw Error("Load method is not defined. Is the file jszip-load.js included ?");
},filter:function(b){var c=[],d,e,g;for(d in this.files)this.files.hasOwnProperty(d)&&(e=this.files[d],g=new m(e.name,e.S,l(e.options)),e=d.slice(this.root.length,d.length),d.slice(0,this.root.length)===this.root&&b(e,g)&&c.push(g));return c},file:function(b,c,d){if(1===arguments.length){if(s.eD(b)){var e=b;return this.filter(function(b,c){return!c.options.dir&&e.test(b)})}return this.filter(function(c,d){return!d.options.dir&&c===b})[0]||null}b=this.root+b;k.call(this,b,c,d);return this},jT:function(b){if(!b)return this;
if(s.eD(b))return this.filter(function(c,d){return d.options.dir&&b.test(c)});var c=g.call(this,this.root+b),d=this.clone();d.root=c.name;return d},remove:function(b){b=this.root+b;var c=this.files[b];c||("/"!=b.slice(-1)&&(b+="/"),c=this.files[b]);if(c)if(c.options.dir)for(var c=this.filter(function(c,d){return d.name.slice(0,b.length)===b}),d=0;d<c.length;d++)delete this.files[c[d].name];else delete this.files[b];return this},lT:function(b){b=l(b||{},{wg:!0,Tm:"STORE",type:"base64"});s.ev(b.type);
var c=[],g=0,k=0,u;for(u in this.files)if(this.files.hasOwnProperty(u)){var m=this.files[u],p=m.options.Tm||b.Tm.toUpperCase(),J=D[p];if(!J)throw Error(p+" is not a valid compression method !");var p=m,r=new O,y=void 0;if(p.S instanceof O)r.dg=p.S.dg,r.crc32=p.S.crc32,0===r.dg||p.options.dir?(J=D.STORE,r.Sm="",r.crc32=0):p.S.Fj===J.An?r.Sm=p.S.Pv():(y=p.S.xe(),r.Sm=J.iv(s.wc(J.jv,y)));else{y=q(p);if(!y||0===y.length||p.options.dir)J=D.STORE,y="";r.dg=y.length;r.crc32=this.crc32(y);r.Sm=J.iv(s.wc(J.jv,
y))}r.Bg=r.Sm.length;r.Fj=J.An;var J=p=r,r=g,y=this.GF(m.name),K=y!==m.name,G=m.options,E=void 0,wa=void 0,Jb="",Sb="",E=G.Eg.getHours(),E=E<<6,E=E|G.Eg.getMinutes(),E=E<<5,E=E|G.Eg.getSeconds()/2,wa=G.Eg.getFullYear()-1980,wa=wa<<4,wa=wa|G.Eg.getMonth()+1,wa=wa<<5,wa=wa|G.Eg.getDate();K&&(Sb=n(1,1)+n(this.crc32(y),4)+y,Jb+="up"+n(Sb.length,2)+Sb);G="";G+="\n\x00";G+=K?"\x00\b":"\x00\x00";G+=J.Fj;G+=n(E,2);G+=n(wa,2);G+=n(J.crc32,4);G+=n(J.Bg,4);G+=n(J.dg,4);G+=n(y.length,2);G+=n(Jb.length,2);m={KB:z.az+
G+y+Jb,tB:z.Ly+"\u0014\x00"+G+"\x00\x00\x00\x00\x00\x00"+(!0===m.options.dir?"\u0010\x00\x00\x00":"\x00\x00\x00\x00")+n(r,4)+y+Jb,rI:J};g+=m.KB.length+p.Bg;k+=m.tB.length;c.push(m)}u="";u=z.Wt+"\x00\x00\x00\x00"+n(c.length,2)+n(c.length,2)+n(k,4)+n(g,4)+"\x00\x00";p=b.type.toLowerCase();g="uint8array"===p||"arraybuffer"===p||"blob"===p||"nodebuffer"===p?new d(g+k+u.length):new e;for(k=0;k<c.length;k++)g.append(c[k].KB),g.append(c[k].rI.Sm);for(k=0;k<c.length;k++)g.append(c[k].tB);g.append(u);c=g.LB();
switch(b.type.toLowerCase()){case "uint8array":case "arraybuffer":case "nodebuffer":return s.wc(b.type.toLowerCase(),c);case "blob":return s.EA(s.wc("arraybuffer",c));case "base64":return b.wg?F.Ev(c):c;default:return c}},crc32:function(b,c){if("undefined"===typeof b||!b.length)return 0;var d="string"!==s.Zj(b),e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,
4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,
31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,
1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,
1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,
2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,
3272380065,1510334235,755167117];"undefined"==typeof c&&(c=0);var g=0,g=g=0;c^=-1;for(var k=0,l=b.length;k<l;k++)g=d?b[k]:b.charCodeAt(k),g=(c^g)&255,g=e[g],c=c>>>8^g;return c^-1},GF:function(b){if(J)return s.wc("string",J.Ev(b));if(r.Vs)return s.wc("string",K(b,"utf-8"));for(var c=[],d=0,e=0;e<b.length;e++){var g=b.charCodeAt(e);128>g?c[d++]=String.fromCharCode(g):(127<g&&2048>g?c[d++]=String.fromCharCode(g>>6|192):(c[d++]=String.fromCharCode(g>>12|224),c[d++]=String.fromCharCode(g>>6&63|128)),c[d++]=
String.fromCharCode(g&63|128))}return c.join("")},Cy:function(b){var c=[],d=0,e="string"!==s.Zj(b),g=0,k=0,l=0,n=0;if(G)return G.uv(s.wc("uint8array",b));if(r.Vs)return s.wc("nodebuffer",b).toString("utf-8");for(;g<b.length;)k=e?b[g]:b.charCodeAt(g),128>k?(c[d++]=String.fromCharCode(k),g++):191<k&&224>k?(l=e?b[g+1]:b.charCodeAt(g+1),c[d++]=String.fromCharCode((k&31)<<6|l&63),g+=2):(l=e?b[g+1]:b.charCodeAt(g+1),n=e?b[g+2]:b.charCodeAt(g+2),c[d++]=String.fromCharCode((k&15)<<12|(l&63)<<6|n&63),g+=3);
return c.join("")}};c.Ib=E},{"./base64":1,"./compressedObject":2,"./compressions":3,"./defaults":5,"./nodeBuffer":17,"./signature":10,"./support":12,"./utils":14}],10:[function(b,c,d){d.az="PK\u0003\u0004";d.Ly="PK\u0001\u0002";d.Wt="PK\u0005\u0006";d.tz="PK\u0006\u0007";d.oH="PK\u0006\u0006";d.RP="PK\u0007\b"},{}],11:[function(b,c){function d(b,c){this.data=b;c||(this.data=g.nF(this.data));this.length=this.data.length;this.index=0}var e=b("./dataReader"),g=b("./utils");d.prototype=new e;d.prototype.Yu=
function(b){return this.data.charCodeAt(b)};d.prototype.Hs=function(b){return this.data.lastIndexOf(b)};d.prototype.nt=function(b){this.dv(b);var c=this.data.slice(this.index,this.index+b);this.index+=b;return c};c.Ib=d},{"./dataReader":4,"./utils":14}],12:[function(b,c,d){b=b("__browserify_process");"use strict";d.wg=!0;d.GS=!0;d.cU=!0;d.YH="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array;d.Vs=!b.jI;d.vy="undefined"!==typeof Uint8Array;if("undefined"===typeof ArrayBuffer)d.Su=!1;
else{b=new ArrayBuffer(0);try{d.Su=0===(new Blob([b],{type:"application/zip"})).size}catch(e){try{var g=new (window.BlobBuilder||window.WebKitBlobBuilder||window.FG||window.EG);g.append(b);d.Su=0===g.getBlob("application/zip").size}catch(k){d.Su=!1}}}},{__browserify_process:18}],13:[function(b,c){function d(b){b&&(this.data=b,this.length=this.data.length,this.index=0)}var e=b("./dataReader");d.prototype=new e;d.prototype.Yu=function(b){return this.data[b]};d.prototype.Hs=function(b){var c=b.charCodeAt(0),
d=b.charCodeAt(1),e=b.charCodeAt(2);b=b.charCodeAt(3);for(var m=this.length-4;0<=m;--m)if(this.data[m]===c&&this.data[m+1]===d&&this.data[m+2]===e&&this.data[m+3]===b)return m;return-1};d.prototype.nt=function(b){this.dv(b);var c=this.data.subarray(this.index,this.index+b);this.index+=b;return c};c.Ib=d},{"./dataReader":4}],14:[function(b,c,d){function e(b){return b}function g(b,c){for(var d=0;d<b.length;++d)c[d]=b.charCodeAt(d)&255;return c}function k(b){var c=65536,e=[],g=b.length,k=d.Zj(b),l=0,
n=!0;try{switch(k){case "uint8array":new Uint8Array(0);break;case "nodebuffer":q(0)}}catch(m){n=!1}if(!n){c="";for(e=0;e<b.length;e++)c+=String.fromCharCode(b[e]);return c}for(;l<g&&1<c;)try{"array"===k||"nodebuffer"===k?e.push(String.fromCharCode.apply(null,b.slice(l,Math.min(l+c,g)))):e.push(String.fromCharCode.apply(null,b.subarray(l,Math.min(l+c,g)))),l+=c}catch(p){c=Math.floor(c/2)}return e.join("")}function l(b,c){for(var d=0;d<b.length;d++)c[d]=b[d];return c}var n=b("./support"),m=b("./compressions"),
q=b("./nodeBuffer");d.nF=function(b){for(var c="",d=0;d<b.length;d++)c+=String.fromCharCode(b.charCodeAt(d)&255);return c};d.eU=function(b){return d.wc("uint8array",b)};d.iU=function(b){return d.wc("string",b)};d.dU=function(b){b=d.wc("arraybuffer",b);return d.EA(b)};d.EA=function(b){d.ev("blob");try{return new Blob([b],{type:"application/zip"})}catch(c){try{var e=new (window.BlobBuilder||window.WebKitBlobBuilder||window.FG||window.EG);e.append(b);return e.getBlob("application/zip")}catch(g){throw Error("Bug : can't construct the Blob.");
}}};var p={};p.string={string:e,array:function(b){return g(b,Array(b.length))},arraybuffer:function(b){return p.string.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:function(b){return g(b,q(b.length))}};p.array={string:k,array:e,arraybuffer:function(b){return(new Uint8Array(b)).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return q(b)}};p.arraybuffer={string:function(b){return k(new Uint8Array(b))},array:function(b){return l(new Uint8Array(b),
Array(b.byteLength))},arraybuffer:e,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return q(new Uint8Array(b))}};p.uint8array={string:k,array:function(b){return l(b,Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:e,nodebuffer:function(b){return q(b)}};p.nodebuffer={string:k,array:function(b){return l(b,Array(b.length))},arraybuffer:function(b){return p.nodebuffer.uint8array(b).buffer},uint8array:function(b){return l(b,new Uint8Array(b.length))},nodebuffer:e};
d.wc=function(b,c){c||(c="");if(!b)return c;d.ev(b);var e=d.Zj(c);return p[e][b](c)};d.Zj=function(b){if("string"===typeof b)return"string";if("[object Array]"===Object.prototype.toString.call(b))return"array";if(n.Vs&&q.test(b))return"nodebuffer";if(n.vy&&b instanceof Uint8Array)return"uint8array";if(n.YH&&b instanceof ArrayBuffer)return"arraybuffer"};d.ev=function(b){if(!n[b.toLowerCase()])throw Error(b+" is not supported by this browser");};d.Uq=65535;d.om=-1;d.Gx=function(b){var c="",d,e;for(e=
0;e<(b||"").length;e++)d=b.charCodeAt(e),c+="\\x"+(16>d?"0":"")+d.toString(16).toUpperCase();return c};d.hJ=function(b){for(var c in m)if(m.hasOwnProperty(c)&&m[c].An===b)return m[c];return null};d.eD=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)}},{"./compressions":3,"./nodeBuffer":17,"./support":12}],15:[function(b,c){function d(b,c){this.files=[];this.Ms=c;b&&this.load(b)}var e=b("./stringReader"),g=b("./nodeBufferReader"),k=b("./uint8ArrayReader"),l=b("./utils"),n=b("./signature"),
m=b("./zipEntry"),q=b("./support");d.prototype={Jr:function(b){var c=this.sa.Wf(4);if(c!==b)throw Error("Corrupted zip or bug : unexpected signature ("+l.Gx(c)+", expected "+l.Gx(b)+")");},ZN:function(){this.wB=this.sa.aa(2);this.yB=this.sa.aa(2);this.RA=this.sa.aa(2);this.QA=this.sa.aa(2);this.SA=this.sa.aa(4);this.av=this.sa.aa(4);this.yP=this.sa.aa(2);this.sa.Wf(this.yP)},$N:function(){this.wP=this.sa.aa(8);this.sa.Wf(2);this.sa.aa(2);this.wB=this.sa.aa(4);this.yB=this.sa.aa(4);this.RA=this.sa.aa(8);
this.QA=this.sa.aa(8);this.SA=this.sa.aa(8);this.av=this.sa.aa(8);this.xP={};for(var b=this.wP-44,c,d,e;0<b;)c=this.sa.aa(2),d=this.sa.aa(4),e=this.sa.Wf(d),this.xP[c]={id:c,length:d,value:e}},aO:function(){this.sa.aa(4);this.jO=this.sa.aa(8);this.JI=this.sa.aa(4);if(1<this.JI)throw Error("Multi-volumes zip are not supported");},gO:function(){var b,c;for(b=0;b<this.files.length;b++)c=this.files[b],this.sa.uk(c.Ew),this.Jr(n.az),c.hO(this.sa),c.mL()},bO:function(){var b;for(this.sa.uk(this.av);this.sa.Wf(4)===
n.Ly;)b=new m({QF:this.QF},this.Ms),b.cO(this.sa),this.files.push(b)},eO:function(){var b=this.sa.Hs(n.Wt);if(-1===b)throw Error("Corrupted zip : can't find end of central directory");this.sa.uk(b);this.Jr(n.Wt);this.ZN();if(this.wB===l.Uq||this.yB===l.Uq||this.RA===l.Uq||this.QA===l.Uq||this.SA===l.om||this.av===l.om){this.QF=!0;b=this.sa.Hs(n.tz);if(-1===b)throw Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.sa.uk(b);this.Jr(n.tz);this.aO();this.sa.uk(this.jO);
this.Jr(n.oH);this.$N()}},XN:function(b){var c=l.Zj(b);this.sa="string"!==c||q.vy?"nodebuffer"===c?new g(b):new k(l.wc("uint8array",b)):new e(b,this.Ms.XD)},load:function(b){this.XN(b);this.eO();this.bO();this.gO()}};c.Ib=d},{"./nodeBufferReader":17,"./signature":10,"./stringReader":11,"./support":12,"./uint8ArrayReader":13,"./utils":14,"./zipEntry":16}],16:[function(b,c){function d(b,c){this.options=b;this.Ms=c}var e=b("./stringReader"),g=b("./utils"),k=b("./compressedObject"),l=b("./object");d.prototype=
{LL:function(){return 1===(this.KA&1)},lP:function(){return 2048===(this.KA&2048)},VN:function(b,c,d){return function(){var e=b.index;b.uk(c);var g=b.nt(d);b.uk(e);return g}},WN:function(b,c,d,e,k){return function(){var b=g.wc(e.BF,this.Pv()),b=e.AF(b);if(b.length!==k)throw Error("Bug : uncompressed data size mismatch");return b}},hO:function(b){var c;b.dF(22);this.Jv=b.aa(2);c=b.aa(2);this.fileName=b.Wf(this.Jv);b.dF(c);if(-1==this.Bg||-1==this.dg)throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");
c=g.hJ(this.Fj);if(null===c)throw Error("Corrupted zip : compression "+g.Gx(this.Fj)+" unknown (inner file : "+this.fileName+")");this.th=new k;this.th.Bg=this.Bg;this.th.dg=this.dg;this.th.crc32=this.crc32;this.th.Fj=this.Fj;this.th.Pv=this.VN(b,b.index,this.Bg,c);this.th.xe=this.WN(b,b.index,this.Bg,c,this.dg);if(this.Ms.QS&&(this.th=g.wc("string",this.th.xe()),l.crc32(this.th)!==this.crc32))throw Error("Corrupted zip : CRC32 mismatch");},cO:function(b){b.Wf(2);b.aa(2);this.KA=b.aa(2);this.Fj=b.Wf(2);
this.Eg=b.dO();this.crc32=b.aa(4);this.Bg=b.aa(4);this.dg=b.aa(4);this.Jv=b.aa(2);this.cJ=b.aa(2);this.gJ=b.aa(2);this.xB=b.aa(2);b.aa(2);this.bJ=b.aa(4);this.Ew=b.aa(4);if(this.LL())throw Error("Encrypted zip are not supported");this.fileName=b.Wf(this.Jv);this.fO(b);this.QN(b);this.JB=b.Wf(this.gJ);this.dir=this.bJ&16?!0:!1},QN:function(){if(this.$o[1]){var b=new e(this.$o[1].value);this.dg===g.om&&(this.dg=b.aa(8));this.Bg===g.om&&(this.Bg=b.aa(8));this.Ew===g.om&&(this.Ew=b.aa(8));this.xB===g.om&&
(this.xB=b.aa(4))}},fO:function(b){var c=b.index,d,e,g;for(this.$o=this.$o||{};b.index<c+this.cJ;)d=b.aa(2),e=b.aa(2),g=b.Wf(e),this.$o[d]={id:d,length:e,value:g}},mL:function(){if(this.lP())this.fileName=l.Cy(this.fileName),this.JB=l.Cy(this.JB);else{var b=this.iJ();null!==b&&(this.fileName=b)}},iJ:function(){var b=this.$o[28789];if(b){var c=new e(b.value);return 1!==c.aa(1)||l.crc32(this.fileName)!==c.aa(4)?null:l.Cy(c.Wf(b.length-5))}return null}};c.Ib=d},{"./compressedObject":2,"./object":9,"./stringReader":11,
"./utils":14}],17:[function(){},{}],18:[function(b,c){var d=c.Ib={};d.IT=function(){if("undefined"!==typeof window&&window.setImmediate)return function(b){return window.setImmediate(b)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var b=[];window.addEventListener("message",function(c){var d=c.source;d!==window&&null!==d||"process-tick"!==c.data||(c.stopPropagation(),0<b.length&&b.shift()())},!0);return function(c){b.push(c);window.postMessage("process-tick","*")}}return function(b){setTimeout(b,
0)}}();d.title="browser";d.jI=!0;d.gT={};d.FS=[];d.KS=function(){throw Error("process.binding is not supported");};d.XS=function(){return"/"};d.PS=function(){throw Error("process.chdir is not supported");}},{}],19:[function(b,c){var d=b("./lib/utils/common").assign,e=b("./lib/deflate"),g=b("./lib/inflate"),k=b("./lib/zlib/constants"),l={};d(l,e,g,k);c.Ib=l},{"./lib/deflate":20,"./lib/inflate":21,"./lib/utils/common":22,"./lib/zlib/constants":25}],20:[function(b,c,d){function e(b){b=this.options=l.assign({Cd:-1,
method:8,fv:16384,sb:15,gM:8,Ph:0,Eq:""},b||{});b.Jx&&0<b.sb?b.sb=-b.sb:b.CC&&0<b.sb&&16>b.sb&&(b.sb+=16);this.Yo=0;this.oa="";this.ended=!1;this.si=[];this.ha=new q;this.ha.T=0;var c=k.CI(this.ha,b.Cd,b.method,b.sb,b.gM,b.Ph);if(0!==c)throw Error(m[c]);b.iw&&k.EI(this.ha,b.iw)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.Yo)throw d.oa;return d.result}var k=b("./zlib/deflate.js"),l=b("./utils/common"),n=b("./utils/strings"),m=b("./zlib/messages"),q=b("./zlib/zstream");e.prototype.push=function(b,
c){var d=this.ha,e=this.options.fv,g,m;if(this.ended)return!1;m=c===~~c?c:!0===c?4:0;d.input="string"===typeof b?n.UO(b):b;d.Rf=0;d.Db=d.input.length;do{0===d.T&&(d.Qa=new l.fh(e),d.Ub=0,d.T=e);g=k.pB(d,m);if(1!==g&&0!==g)return this.Fd(g),this.ended=!0,!1;if(0===d.T||0===d.Db&&4===m)"string"===this.options.Eq?this.Rp(n.kI(l.It(d.Qa,d.Ub))):this.Rp(l.It(d.Qa,d.Ub))}while((0<d.Db||0===d.T)&&1!==g);return 4===m?(g=k.BI(this.ha),this.Fd(g),this.ended=!0,0===g):!0};e.prototype.Rp=function(b){this.si.push(b)};
e.prototype.Fd=function(b){0===b&&(this.result="string"===this.options.Eq?this.si.join(""):l.Lv(this.si));this.si=[];this.Yo=b;this.oa=this.ha.oa};d.YP=e;d.pB=g;d.DI=function(b){var c;c=c||{};c.Jx=!0;return g(b,c)};d.CC=function(b,c){c=c||{};c.CC=!0;return g(b,c)}},{"./utils/common":22,"./utils/strings":23,"./zlib/deflate.js":27,"./zlib/messages":32,"./zlib/zstream":34}],21:[function(b,c,d){function e(b){var c=this.options=l.assign({fv:16384,sb:0,Eq:""},b||{});c.Jx&&0<=c.sb&&16>c.sb&&(c.sb=-c.sb,
0===c.sb&&(c.sb=-15));!(0<=c.sb&&16>c.sb)||b&&b.sb||(c.sb+=32);15<c.sb&&48>c.sb&&0===(c.sb&15)&&(c.sb|=15);this.Yo=0;this.oa="";this.ended=!1;this.si=[];this.ha=new p;this.ha.T=0;b=k.yL(this.ha,c.sb);if(b!==m.dr)throw Error(q[b]);this.iw=new r;k.xL(this.ha,this.iw)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.Yo)throw d.oa;return d.result}var k=b("./zlib/inflate.js"),l=b("./utils/common"),n=b("./utils/strings"),m=b("./zlib/constants"),q=b("./zlib/messages"),p=b("./zlib/zstream"),r=b("./zlib/gzheader");
e.prototype.push=function(b,c){var d=this.ha,e=this.options.fv,g,q,p,J,r;if(this.ended)return!1;q=c===~~c?c:!0===c?m.cr:m.xz;d.input="string"===typeof b?n.gI(b):b;d.Rf=0;d.Db=d.input.length;do{0===d.T&&(d.Qa=new l.fh(e),d.Ub=0,d.T=e);g=k.XC(d,m.xz);if(g!==m.er&&g!==m.dr)return this.Fd(g),this.ended=!0,!1;d.Ub&&(0===d.T||g===m.er||0===d.Db&&q===m.cr)&&("string"===this.options.Eq?(p=n.mP(d.Qa,d.Ub),J=d.Ub-p,r=n.lI(d.Qa,p),d.Ub=J,d.T=e-J,J&&l.vg(d.Qa,d.Qa,p,J,0),this.Rp(r)):this.Rp(l.It(d.Qa,d.Ub)))}while((0<
d.Db||0===d.T)&&g!==m.er);g===m.er&&(q=m.cr);return q===m.cr?(g=k.wL(this.ha),this.Fd(g),this.ended=!0,g===m.dr):!0};e.prototype.Rp=function(b){this.si.push(b)};e.prototype.Fd=function(b){b===m.dr&&(this.result="string"===this.options.Eq?this.si.join(""):l.Lv(this.si));this.si=[];this.Yo=b;this.oa=this.ha.oa};d.kQ=e;d.XC=g;d.zL=function(b){var c;c=c||{};c.Jx=!0;return g(b,c)};d.jU=g},{"./utils/common":22,"./utils/strings":23,"./zlib/constants":25,"./zlib/gzheader":28,"./zlib/inflate.js":30,"./zlib/messages":32,
"./zlib/zstream":34}],22:[function(b,c,d){b="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(b){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!==typeof d)throw new TypeError(d+"must be non-object");for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}}return b};d.It=function(b,c){if(b.length===c)return b;if(b.subarray)return b.subarray(0,c);b.length=c;return b};var e={vg:function(b,c,d,e,
g){if(c.subarray&&b.subarray)b.set(c.subarray(d,d+e),g);else for(var p=0;p<e;p++)b[g+p]=c[d+p]},Lv:function(b){var c,d,e,g,p;c=e=0;for(d=b.length;c<d;c++)e+=b[c].length;p=new Uint8Array(e);c=e=0;for(d=b.length;c<d;c++)g=b[c],p.set(g,e),e+=g.length;return p}},g={vg:function(b,c,d,e,g){for(var p=0;p<e;p++)b[g+p]=c[d+p]},Lv:function(b){return[].concat.apply([],b)}};d.IO=function(b){b?(d.fh=Uint8Array,d.Pe=Uint16Array,d.ao=Int32Array,d.assign(d,e)):(d.fh=Array,d.Pe=Array,d.ao=Array,d.assign(d,g))};d.IO(b)},
{}],23:[function(b,c,d){var e=b("./common"),g=new e.fh(256);for(b=0;256>b;b++)g[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;g[254]=g[254]=1;d.UO=function(b){var c,d,g,q,p,r=b.length,s=0;for(q=0;q<r;q++)d=b.charCodeAt(q),55296===(d&64512)&&q+1<r&&(g=b.charCodeAt(q+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+(g-56320),q++)),s+=128>d?1:2048>d?2:65536>d?3:4;c=new e.fh(s);for(q=p=0;p<s;q++)d=b.charCodeAt(q),55296===(d&64512)&&q+1<r&&(g=b.charCodeAt(q+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+
(g-56320),q++)),128>d?c[p++]=d:(2048>d?c[p++]=192|d>>>6:(65536>d?c[p++]=224|d>>>12:(c[p++]=240|d>>>18,c[p++]=128|d>>>12&63),c[p++]=128|d>>>6&63),c[p++]=128|d&63);return c};d.kI=function(b){if(65537>b.length)return String.fromCharCode.apply(null,b);for(var c="",d=0,e=b.length;d<e;d++)c+=String.fromCharCode(b[d]);return c};d.gI=function(b){for(var c=new e.fh(b.length),d=0,g=c.length;d<g;d++)c[d]=b.charCodeAt(d);return c};d.lI=function(b,c){var d,m,q,p,r=c||b.length,s=Array(2*r);for(d=m=0;d<r;)if(q=
b[d++],128>q)s[m++]=q;else if(p=g[q],4<p)s[m++]=65533,d+=p-1;else{for(q&=2===p?31:3===p?15:7;1<p&&d<r;)q=q<<6|b[d++]&63,p--;1<p?s[m++]=65533:65536>q?s[m++]=q:(q-=65536,s[m++]=55296|q>>10&1023,s[m++]=56320|q&1023)}return String.fromCharCode.apply(null,e.It(s,m))};d.mP=function(b,c){var d;c=c||b.length;c>b.length&&(c=b.length);for(d=c-1;0<=d&&128===(b[d]&192);)d--;return 0>d||0===d?c:d+g[b[d]]>c?d:c}},{"./common":22}],24:[function(b,c){c.Ib=function(b,c,g,k){var l=b&65535|0;b=b>>>16&65535|0;for(var n=
0;0!==g;){n=2E3<g?2E3:g;g-=n;do l=l+c[k++]|0,b=b+l|0;while(--n);l%=65521;b%=65521}return l|b<<16|0}},{}],25:[function(b,c){c.Ib={xz:0,tS:1,wS:2,pS:3,cr:4,gS:5,yS:6,dr:0,er:1,rS:2,mS:-1,vS:-2,iS:-3,hS:-5,sS:0,eS:1,dS:9,jS:-1,nS:1,qS:2,uS:3,oS:4,kS:0,fS:0,xS:1,zS:2,lS:8}},{}],26:[function(b,c){var d=function(){for(var b,c=[],d=0;256>d;d++){b=d;for(var l=0;8>l;l++)b=b&1?3988292384^b>>>1:b>>>1;c[d]=b}return c}();c.Ib=function(b,c,k,l){k=l+k;for(b^=-1;l<k;l++)b=b>>>8^d[(b^c[l])&255];return b^-1}},{}],
27:[function(b,c,d){function e(b,c,d,e,g){this.$K=b;this.dM=c;this.sM=d;this.cM=e;this.oJ=g}function g(b,c){b.oa=U[c];return c}function k(b){for(var c=b.length;0<=--c;)b[c]=0}function l(b){var c=b.state,d=c.W;d>b.T&&(d=b.T);0!==d&&(G.vg(b.Qa,c.Jb,c.Xp,d,b.Ub),b.Ub+=d,c.Xp+=d,b.Ck+=d,b.T-=d,c.W-=d,0===c.W&&(c.Xp=0))}function n(b,c){E.GH(b,0<=b.yg?b.yg:-1,b.u-b.yg,c);b.yg=b.u;l(b.ha)}function m(b,c){b.Jb[b.W++]=c}function q(b,c){b.Jb[b.W++]=c>>>8&255;b.Jb[b.W++]=c&255}function p(b,c){var d=b.xD,e=b.u,
g,k=b.Uf,l=b.LD,n=b.u>b.dh-262?b.u-(b.dh-262):0,m=b.window,p=b.im,q=b.Gd,J=b.u+258,r=m[e+k-1],s=m[e+k];b.Uf>=b.BC&&(d>>=2);l>b.O&&(l=b.O);do if(g=c,m[g+k]===s&&m[g+k-1]===r&&m[g]===m[e]&&m[++g]===m[e+1]){e+=2;for(g++;m[++e]===m[++g]&&m[++e]===m[++g]&&m[++e]===m[++g]&&m[++e]===m[++g]&&m[++e]===m[++g]&&m[++e]===m[++g]&&m[++e]===m[++g]&&m[++e]===m[++g]&&e<J;);g=258-(J-e);e=J-258;if(g>k){b.Dn=c;k=g;if(g>=l)break;r=m[e+k-1];s=m[e+k]}}while((c=q[c&p])>n&&0!==--d);return k<=b.O?k:b.O}function r(b){var c=
b.dh,d,e,g,k;do{k=b.NF-b.O-b.u;if(b.u>=c+(c-262)){G.vg(b.window,b.window,c,c,0);b.Dn-=c;b.u-=c;b.yg-=c;d=e=b.ts;do g=b.head[--d],b.head[d]=g>=c?g-c:0;while(--e);d=e=c;do g=b.Gd[--d],b.Gd[d]=g>=c?g-c:0;while(--e);k+=c}if(0===b.ha.Db)break;d=b.ha;e=b.window;g=b.u+b.O;var l=d.Db;l>k&&(l=k);0===l?e=0:(d.Db-=l,G.vg(e,d.input,d.Rf,l,g),1===d.state.tb?d.fa=M(d.fa,e,l,g):2===d.state.tb&&(d.fa=L(d.fa,e,l,g)),d.Rf+=l,d.Th+=l,e=l);b.O+=e;if(3<=b.O+b.Lf)for(k=b.u-b.Lf,b.ib=b.window[k],b.ib=(b.ib<<b.bk^b.window[k+
1])&b.ak;b.Lf&&!(b.ib=(b.ib<<b.bk^b.window[k+3-1])&b.ak,b.Gd[k&b.im]=b.head[b.ib],b.head[b.ib]=k,k++,b.Lf--,3>b.O+b.Lf););}while(262>b.O&&0!==b.ha.Db)}function s(b,c){for(var d;;){if(262>b.O){r(b);if(262>b.O&&0===c)return 1;if(0===b.O)break}d=0;3<=b.O&&(b.ib=(b.ib<<b.bk^b.window[b.u+3-1])&b.ak,d=b.Gd[b.u&b.im]=b.head[b.ib],b.head[b.ib]=b.u);0!==d&&b.u-d<=b.dh-262&&(b.Ya=p(b,d));if(3<=b.Ya)if(d=E.wj(b,b.u-b.Dn,b.Ya-3),b.O-=b.Ya,b.Ya<=b.Jw&&3<=b.O){b.Ya--;do b.u++,b.ib=(b.ib<<b.bk^b.window[b.u+3-1])&
b.ak,b.Gd[b.u&b.im]=b.head[b.ib],b.head[b.ib]=b.u;while(0!==--b.Ya);b.u++}else b.u+=b.Ya,b.Ya=0,b.ib=b.window[b.u],b.ib=(b.ib<<b.bk^b.window[b.u+1])&b.ak;else d=E.wj(b,0,b.window[b.u]),b.O--,b.u++;if(d&&(n(b,!1),0===b.ha.T))return 1}b.Lf=2>b.u?b.u:2;return 4===c?(n(b,!0),0===b.ha.T?3:4):b.Nf&&(n(b,!1),0===b.ha.T)?1:2}function z(b,c){for(var d,e;;){if(262>b.O){r(b);if(262>b.O&&0===c)return 1;if(0===b.O)break}d=0;3<=b.O&&(b.ib=(b.ib<<b.bk^b.window[b.u+3-1])&b.ak,d=b.Gd[b.u&b.im]=b.head[b.ib],b.head[b.ib]=
b.u);b.Uf=b.Ya;b.$D=b.Dn;b.Ya=2;0!==d&&b.Uf<b.Jw&&b.u-d<=b.dh-262&&(b.Ya=p(b,d),5>=b.Ya&&(1===b.Ph||3===b.Ya&&4096<b.u-b.Dn)&&(b.Ya=2));if(3<=b.Uf&&b.Ya<=b.Uf){e=b.u+b.O-3;d=E.wj(b,b.u-1-b.$D,b.Uf-3);b.O-=b.Uf-1;b.Uf-=2;do++b.u<=e&&(b.ib=(b.ib<<b.bk^b.window[b.u+3-1])&b.ak,b.Gd[b.u&b.im]=b.head[b.ib],b.head[b.ib]=b.u);while(0!==--b.Uf);b.Cn=0;b.Ya=2;b.u++;if(d&&(n(b,!1),0===b.ha.T))return 1}else if(b.Cn){if((d=E.wj(b,0,b.window[b.u-1]))&&n(b,!1),b.u++,b.O--,0===b.ha.T)return 1}else b.Cn=1,b.u++,b.O--}b.Cn&&
(E.wj(b,0,b.window[b.u-1]),b.Cn=0);b.Lf=2>b.u?b.u:2;return 4===c?(n(b,!0),0===b.ha.T?3:4):b.Nf&&(n(b,!1),0===b.ha.T)?1:2}function y(b,c){for(var d,e,g,k=b.window;;){if(258>=b.O){r(b);if(258>=b.O&&0===c)return 1;if(0===b.O)break}b.Ya=0;if(3<=b.O&&0<b.u&&(e=b.u-1,d=k[e],d===k[++e]&&d===k[++e]&&d===k[++e])){for(g=b.u+258;d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&e<g;);b.Ya=258-(g-e);b.Ya>b.O&&(b.Ya=b.O)}3<=b.Ya?(d=E.wj(b,1,b.Ya-3),b.O-=b.Ya,b.u+=
b.Ya,b.Ya=0):(d=E.wj(b,0,b.window[b.u]),b.O--,b.u++);if(d&&(n(b,!1),0===b.ha.T))return 1}b.Lf=0;return 4===c?(n(b,!0),0===b.ha.T?3:4):b.Nf&&(n(b,!1),0===b.ha.T)?1:2}function F(b,c){for(var d;;){if(0===b.O&&(r(b),0===b.O)){if(0===c)return 1;break}b.Ya=0;d=E.wj(b,0,b.window[b.u]);b.O--;b.u++;if(d&&(n(b,!1),0===b.ha.T))return 1}b.Lf=0;return 4===c?(n(b,!0),0===b.ha.T?3:4):b.Nf&&(n(b,!1),0===b.ha.T)?1:2}function D(){this.ha=null;this.status=0;this.Jb=null;this.tb=this.W=this.Xp=this.Tf=0;this.na=null;
this.Ig=0;this.method=8;this.zn=-1;this.im=this.Fy=this.dh=0;this.window=null;this.NF=0;this.head=this.Gd=null;this.LD=this.BC=this.Ph=this.Cd=this.Jw=this.xD=this.Uf=this.O=this.Dn=this.u=this.Cn=this.$D=this.Ya=this.yg=this.bk=this.ak=this.hw=this.ts=this.ib=0;this.ue=new G.Pe(1146);this.tl=new G.Pe(122);this.vd=new G.Pe(78);k(this.ue);k(this.tl);k(this.vd);this.LA=this.Tr=this.Fs=null;this.ni=new G.Pe(16);this.Rb=new G.Pe(573);k(this.Rb);this.mn=this.Di=0;this.depth=new G.Pe(573);k(this.depth);
this.ad=this.Xd=this.Lf=this.matches=this.Pn=this.Pi=this.To=this.Nf=this.Fp=this.tw=0}function O(b){var c;if(!b||!b.state)return g(b,-2);b.Th=b.Ck=0;b.Wm=2;c=b.state;c.W=0;c.Xp=0;0>c.tb&&(c.tb=-c.tb);c.status=c.tb?42:113;b.fa=2===c.tb?0:1;c.zn=0;E.HH(c);return 0}function K(b){var c=O(b);0===c&&(b=b.state,b.NF=2*b.dh,k(b.head),b.Jw=H[b.Cd].dM,b.BC=H[b.Cd].$K,b.LD=H[b.Cd].sM,b.xD=H[b.Cd].cM,b.u=0,b.yg=0,b.O=0,b.Lf=0,b.Ya=b.Uf=2,b.Cn=0,b.ib=0);return c}function J(b,c,d,e,k,l){if(!b)return-2;var n=1;
-1===c&&(c=6);0>e?(n=0,e=-e):15<e&&(n=2,e-=16);if(1>k||9<k||8!==d||8>e||15<e||0>c||9<c||0>l||4<l)return g(b,-2);8===e&&(e=9);var m=new D;b.state=m;m.ha=b;m.tb=n;m.na=null;m.Fy=e;m.dh=1<<m.Fy;m.im=m.dh-1;m.hw=k+7;m.ts=1<<m.hw;m.ak=m.ts-1;m.bk=~~((m.hw+3-1)/3);m.window=new G.fh(2*m.dh);m.head=new G.Pe(m.ts);m.Gd=new G.Pe(m.dh);m.Fp=1<<k+6;m.Tf=4*m.Fp;m.Jb=new G.fh(m.Tf);m.To=m.Fp>>1;m.tw=3*m.Fp;m.Cd=c;m.Ph=l;m.method=d;return K(b)}var G=b("../utils/common"),E=b("./trees"),M=b("./adler32"),L=b("./crc32"),
U=b("./messages"),H;H=[new e(0,0,0,0,function(b,c){var d=65535;for(d>b.Tf-5&&(d=b.Tf-5);;){if(1>=b.O){r(b);if(0===b.O&&0===c)return 1;if(0===b.O)break}b.u+=b.O;b.O=0;var e=b.yg+d;if(0===b.u||b.u>=e)if(b.O=b.u-e,b.u=e,n(b,!1),0===b.ha.T)return 1;if(b.u-b.yg>=b.dh-262&&(n(b,!1),0===b.ha.T))return 1}b.Lf=0;if(4===c)return n(b,!0),0===b.ha.T?3:4;b.u>b.yg&&n(b,!1);return 1}),new e(4,4,8,4,s),new e(4,5,16,8,s),new e(4,6,32,32,s),new e(4,4,16,16,z),new e(8,16,32,32,z),new e(8,16,128,128,z),new e(8,32,128,
256,z),new e(32,128,258,1024,z),new e(32,258,258,4096,z)];d.aT=function(b,c){return J(b,c,8,15,8,0)};d.CI=J;d.bT=K;d.cT=O;d.EI=function(b,c){b&&b.state&&2===b.state.tb&&(b.state.na=c)};d.pB=function(b,c){var d,e,n,p;if(!b||!b.state||5<c||0>c)return b?g(b,-2):-2;e=b.state;if(!b.Qa||!b.input&&0!==b.Db||666===e.status&&4!==c)return g(b,0===b.T?-5:-2);e.ha=b;d=e.zn;e.zn=c;42===e.status&&(2===e.tb?(b.fa=0,m(e,31),m(e,139),m(e,8),e.na?(m(e,(e.na.text?1:0)+(e.na.Bh?2:0)+(e.na.Pa?4:0)+(e.na.name?8:0)+(e.na.comment?
16:0)),m(e,e.na.time&255),m(e,e.na.time>>8&255),m(e,e.na.time>>16&255),m(e,e.na.time>>24&255),m(e,9===e.Cd?2:2<=e.Ph||2>e.Cd?4:0),m(e,e.na.os&255),e.na.Pa&&e.na.Pa.length&&(m(e,e.na.Pa.length&255),m(e,e.na.Pa.length>>8&255)),e.na.Bh&&(b.fa=L(b.fa,e.Jb,e.W,0)),e.Ig=0,e.status=69):(m(e,0),m(e,0),m(e,0),m(e,0),m(e,0),m(e,9===e.Cd?2:2<=e.Ph||2>e.Cd?4:0),m(e,3),e.status=113)):(n=8+(e.Fy-8<<4)<<8,p=-1,p=2<=e.Ph||2>e.Cd?0:6>e.Cd?1:6===e.Cd?2:3,n|=p<<6,0!==e.u&&(n|=32),e.status=113,q(e,n+(31-n%31)),0!==e.u&&
(q(e,b.fa>>>16),q(e,b.fa&65535)),b.fa=1));if(69===e.status)if(e.na.Pa){for(n=e.W;e.Ig<(e.na.Pa.length&65535)&&(e.W!==e.Tf||(e.na.Bh&&e.W>n&&(b.fa=L(b.fa,e.Jb,e.W-n,n)),l(b),n=e.W,e.W!==e.Tf));)m(e,e.na.Pa[e.Ig]&255),e.Ig++;e.na.Bh&&e.W>n&&(b.fa=L(b.fa,e.Jb,e.W-n,n));e.Ig===e.na.Pa.length&&(e.Ig=0,e.status=73)}else e.status=73;if(73===e.status)if(e.na.name){n=e.W;do{if(e.W===e.Tf&&(e.na.Bh&&e.W>n&&(b.fa=L(b.fa,e.Jb,e.W-n,n)),l(b),n=e.W,e.W===e.Tf)){p=1;break}p=e.Ig<e.na.name.length?e.na.name.charCodeAt(e.Ig++)&
255:0;m(e,p)}while(0!==p);e.na.Bh&&e.W>n&&(b.fa=L(b.fa,e.Jb,e.W-n,n));0===p&&(e.Ig=0,e.status=91)}else e.status=91;if(91===e.status)if(e.na.comment){n=e.W;do{if(e.W===e.Tf&&(e.na.Bh&&e.W>n&&(b.fa=L(b.fa,e.Jb,e.W-n,n)),l(b),n=e.W,e.W===e.Tf)){p=1;break}p=e.Ig<e.na.comment.length?e.na.comment.charCodeAt(e.Ig++)&255:0;m(e,p)}while(0!==p);e.na.Bh&&e.W>n&&(b.fa=L(b.fa,e.Jb,e.W-n,n));0===p&&(e.status=103)}else e.status=103;103===e.status&&(e.na.Bh?(e.W+2>e.Tf&&l(b),e.W+2<=e.Tf&&(m(e,b.fa&255),m(e,b.fa>>
8&255),b.fa=0,e.status=113)):e.status=113);if(0!==e.W){if(l(b),0===b.T)return e.zn=-1,0}else if(0===b.Db&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return g(b,-5);if(666===e.status&&0!==b.Db)return g(b,-5);if(0!==b.Db||0!==e.O||0!==c&&666!==e.status){d=2===e.Ph?F(e,c):3===e.Ph?y(e,c):H[e.Cd].oJ(e,c);if(3===d||4===d)e.status=666;if(1===d||3===d)return 0===b.T&&(e.zn=-1),0;if(2===d&&(1===c?E.FH(e):5!==c&&(E.IH(e,0,0,!1),3===c&&(k(e.head),0===e.O&&(e.u=0,e.yg=0,e.Lf=0))),l(b),0===b.T))return e.zn=-1,
0}if(4!==c)return 0;if(0>=e.tb)return 1;2===e.tb?(m(e,b.fa&255),m(e,b.fa>>8&255),m(e,b.fa>>16&255),m(e,b.fa>>24&255),m(e,b.Th&255),m(e,b.Th>>8&255),m(e,b.Th>>16&255),m(e,b.Th>>24&255)):(q(e,b.fa>>>16),q(e,b.fa&65535));l(b);0<e.tb&&(e.tb=-e.tb);return 0!==e.W?0:1};d.BI=function(b){var c;if(!b||!b.state)return-2;c=b.state.status;if(42!==c&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c)return g(b,-2);b.state=null;return 113===c?g(b,-3):0};d.$S="pako deflate (from Nodeca project)"},{"../utils/common":22,
"./adler32":24,"./crc32":26,"./messages":32,"./trees":33}],28:[function(b,c){c.Ib=function(){this.os=this.sP=this.time=this.text=0;this.Pa=null;this.Gv=0;this.comment=this.name="";this.Bh=0;this.Ym=!1}},{}],29:[function(b,c){c.Ib=function(b,c){var g,k,l,n,m,q,p,r,s,z,y,F,D,O,K,J,G,E,M,L,U,H,u,v;g=b.state;k=b.Rf;u=b.input;l=k+(b.Db-5);n=b.Ub;v=b.Qa;m=n-(c-b.T);q=n+(b.T-257);p=g.Wr;r=g.Oe;s=g.cj;z=g.Ne;y=g.window;F=g.dk;D=g.mc;O=g.Ji;K=g.rl;J=(1<<g.Eh)-1;G=(1<<g.Xm)-1;a:do b:for(15>D&&(F+=u[k++]<<D,
D+=8,F+=u[k++]<<D,D+=8),E=O[F&J];;){M=E>>>24;F>>>=M;D-=M;M=E>>>16&255;if(0===M)v[n++]=E&65535;else if(M&16){L=E&65535;if(M&=15)D<M&&(F+=u[k++]<<D,D+=8),L+=F&(1<<M)-1,F>>>=M,D-=M;15>D&&(F+=u[k++]<<D,D+=8,F+=u[k++]<<D,D+=8);E=K[F&G];c:for(;;){M=E>>>24;F>>>=M;D-=M;M=E>>>16&255;if(M&16){E&=65535;M&=15;D<M&&(F+=u[k++]<<D,D+=8,D<M&&(F+=u[k++]<<D,D+=8));E+=F&(1<<M)-1;if(E>p){b.oa="invalid distance too far back";g.mode=30;break a}F>>>=M;D-=M;M=n-m;if(E>M){M=E-M;if(M>s&&g.Nx){b.oa="invalid distance too far back";
g.mode=30;break a}U=0;H=y;if(0===z){if(U+=r-M,M<L){L-=M;do v[n++]=y[U++];while(--M);U=n-E;H=v}}else if(z<M){if(U+=r+z-M,M-=z,M<L){L-=M;do v[n++]=y[U++];while(--M);U=0;if(z<L){M=z;L-=M;do v[n++]=y[U++];while(--M);U=n-E;H=v}}}else if(U+=z-M,M<L){L-=M;do v[n++]=y[U++];while(--M);U=n-E;H=v}for(;2<L;)v[n++]=H[U++],v[n++]=H[U++],v[n++]=H[U++],L-=3;L&&(v[n++]=H[U++],1<L&&(v[n++]=H[U++]))}else{U=n-E;do v[n++]=v[U++],v[n++]=v[U++],v[n++]=v[U++],L-=3;while(2<L);L&&(v[n++]=v[U++],1<L&&(v[n++]=v[U++]))}}else if(0===
(M&64)){E=K[(E&65535)+(F&(1<<M)-1)];continue c}else{b.oa="invalid distance code";g.mode=30;break a}break}}else if(0===(M&64)){E=O[(E&65535)+(F&(1<<M)-1)];continue b}else{M&32?g.mode=12:(b.oa="invalid literal/length code",g.mode=30);break a}break}while(k<l&&n<q);L=D>>3;k-=L;D-=L<<3;b.Rf=k;b.Ub=n;b.Db=k<l?5+(l-k):5-(k-l);b.T=n<q?257+(q-n):257-(n-q);g.dk=F&(1<<D)-1;g.mc=D}},{}],30:[function(b,c,d){function e(b){return(b>>>24&255)+(b>>>8&65280)+((b&65280)<<8)+((b&255)<<24)}function g(){this.mode=0;this.Gs=
!1;this.tb=0;this.PC=!1;this.total=this.check=this.Wr=this.ac=0;this.head=null;this.Ne=this.cj=this.Oe=this.Yn=0;this.window=null;this.Pa=this.offset=this.length=this.mc=this.dk=0;this.rl=this.Ji=null;this.Jf=this.Np=this.Gn=this.HD=this.Xm=this.Eh=0;this.next=null;this.Rc=new q.Pe(320);this.Qq=new q.Pe(288);this.AB=this.kD=null;this.qP=this.back=this.Nx=0}function k(b){var c;if(!b||!b.state)return-2;c=b.state;b.Th=b.Ck=c.total=0;b.oa="";c.tb&&(b.fa=c.tb&1);c.mode=1;c.Gs=0;c.PC=0;c.Wr=32768;c.head=
null;c.dk=0;c.mc=0;c.Ji=c.kD=new q.ao(852);c.rl=c.AB=new q.ao(592);c.Nx=1;c.back=-1;return 0}function l(b){var c;if(!b||!b.state)return-2;c=b.state;c.Oe=0;c.cj=0;c.Ne=0;return k(b)}function n(b,c){var d,e;if(!b||!b.state)return-2;e=b.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==e.window&&e.Yn!==c&&(e.window=null);e.tb=d;e.Yn=c;return l(b)}function m(b,c){var d;if(!b)return-2;d=new g;b.state=d;d.window=null;d=n(b,c);0!==d&&(b.state=null);return d}var q=b("../utils/common"),
p=b("./adler32"),r=b("./crc32"),s=b("./inffast"),z=b("./inftrees"),y=!0,F,D;d.sT=l;d.tT=n;d.uT=k;d.rT=function(b){return m(b,15)};d.yL=m;d.XC=function(b,c){var d,g,k,l,n,m,H,u,v,da,V,B,T,rb;B=0;var sa,Ja,wa,Jb,Sb,dc=new q.fh(4),Xj=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.Qa||!b.input&&0!==b.Db)return-2;d=b.state;12===d.mode&&(d.mode=13);n=b.Ub;k=b.Qa;H=b.T;l=b.Rf;g=b.input;m=b.Db;u=d.dk;v=d.mc;da=m;V=H;Sb=0;a:for(;;)switch(d.mode){case 1:if(0===d.tb){d.mode=13;break}for(;16>
v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}if(d.tb&2&&35615===u){d.check=0;dc[0]=u&255;dc[1]=u>>>8&255;d.check=r(d.check,dc,2,0);v=u=0;d.mode=2;break}d.ac=0;d.head&&(d.head.Ym=!1);if(!(d.tb&1)||(((u&255)<<8)+(u>>8))%31){b.oa="incorrect header check";d.mode=30;break}if(8!==(u&15)){b.oa="unknown compression method";d.mode=30;break}u>>>=4;v-=4;T=(u&15)+8;if(0===d.Yn)d.Yn=T;else if(T>d.Yn){b.oa="invalid window size";d.mode=30;break}d.Wr=1<<T;b.fa=d.check=1;d.mode=u&512?10:12;v=u=0;break;case 2:for(;16>
v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.ac=u;if(8!==(d.ac&255)){b.oa="unknown compression method";d.mode=30;break}if(d.ac&57344){b.oa="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=u>>8&1);d.ac&512&&(dc[0]=u&255,dc[1]=u>>>8&255,d.check=r(d.check,dc,2,0));v=u=0;d.mode=3;case 3:for(;32>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.head&&(d.head.time=u);d.ac&512&&(dc[0]=u&255,dc[1]=u>>>8&255,dc[2]=u>>>16&255,dc[3]=u>>>24&255,d.check=r(d.check,dc,4,0));v=u=0;d.mode=4;case 4:for(;16>
v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.head&&(d.head.sP=u&255,d.head.os=u>>8);d.ac&512&&(dc[0]=u&255,dc[1]=u>>>8&255,d.check=r(d.check,dc,2,0));v=u=0;d.mode=5;case 5:if(d.ac&1024){for(;16>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.length=u;d.head&&(d.head.Gv=u);d.ac&512&&(dc[0]=u&255,dc[1]=u>>>8&255,d.check=r(d.check,dc,2,0));v=u=0}else d.head&&(d.head.Pa=null);d.mode=6;case 6:if(d.ac&1024&&(B=d.length,B>m&&(B=m),B&&(d.head&&(T=d.head.Gv-d.length,d.head.Pa||(d.head.Pa=Array(d.head.Gv)),q.vg(d.head.Pa,
g,l,B,T)),d.ac&512&&(d.check=r(d.check,g,B,l)),m-=B,l+=B,d.length-=B),d.length))break a;d.length=0;d.mode=7;case 7:if(d.ac&2048){if(0===m)break a;B=0;do T=g[l+B++],d.head&&T&&65536>d.length&&(d.head.name+=String.fromCharCode(T));while(T&&B<m);d.ac&512&&(d.check=r(d.check,g,B,l));m-=B;l+=B;if(T)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(d.ac&4096){if(0===m)break a;B=0;do T=g[l+B++],d.head&&T&&65536>d.length&&(d.head.comment+=String.fromCharCode(T));while(T&&B<m);d.ac&512&&
(d.check=r(d.check,g,B,l));m-=B;l+=B;if(T)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(d.ac&512){for(;16>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}if(u!==(d.check&65535)){b.oa="header crc mismatch";d.mode=30;break}v=u=0}d.head&&(d.head.Bh=d.ac>>9&1,d.head.Ym=!0);b.fa=d.check=0;d.mode=12;break;case 10:for(;32>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}b.fa=d.check=e(u);v=u=0;d.mode=11;case 11:if(0===d.PC)return b.Ub=n,b.T=H,b.Rf=l,b.Db=m,d.dk=u,d.mc=v,2;b.fa=d.check=1;d.mode=12;case 12:if(5===
c||6===c)break a;case 13:if(d.Gs){u>>>=v&7;v-=v&7;d.mode=27;break}for(;3>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.Gs=u&1;u>>>=1;v-=1;switch(u&3){case 0:d.mode=14;break;case 1:B=d;if(y){T=void 0;F=new q.ao(512);D=new q.ao(32);for(T=0;144>T;)B.Rc[T++]=8;for(;256>T;)B.Rc[T++]=9;for(;280>T;)B.Rc[T++]=7;for(;288>T;)B.Rc[T++]=8;z(1,B.Rc,0,288,F,0,B.Qq,{mc:9});for(T=0;32>T;)B.Rc[T++]=5;z(2,B.Rc,0,32,D,0,B.Qq,{mc:5});y=!1}B.Ji=F;B.Eh=9;B.rl=D;B.Xm=5;d.mode=20;if(6===c){u>>>=2;v-=2;break a}break;case 2:d.mode=
17;break;case 3:b.oa="invalid block type",d.mode=30}u>>>=2;v-=2;break;case 14:u>>>=v&7;for(v-=v&7;32>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}if((u&65535)!==(u>>>16^65535)){b.oa="invalid stored block lengths";d.mode=30;break}d.length=u&65535;v=u=0;d.mode=15;if(6===c)break a;case 15:d.mode=16;case 16:if(B=d.length){B>m&&(B=m);B>H&&(B=H);if(0===B)break a;q.vg(k,g,l,B,n);m-=B;l+=B;H-=B;n+=B;d.length-=B;break}d.mode=12;break;case 17:for(;14>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.Gn=(u&31)+257;
u>>>=5;v-=5;d.Np=(u&31)+1;u>>>=5;v-=5;d.HD=(u&15)+4;u>>>=4;v-=4;if(286<d.Gn||30<d.Np){b.oa="too many length or distance symbols";d.mode=30;break}d.Jf=0;d.mode=18;case 18:for(;d.Jf<d.HD;){for(;3>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.Rc[Xj[d.Jf++]]=u&7;u>>>=3;v-=3}for(;19>d.Jf;)d.Rc[Xj[d.Jf++]]=0;d.Ji=d.kD;d.Eh=7;B={mc:d.Eh};Sb=z(0,d.Rc,0,19,d.Ji,0,d.Qq,B);d.Eh=B.mc;if(Sb){b.oa="invalid code lengths set";d.mode=30;break}d.Jf=0;d.mode=19;case 19:for(;d.Jf<d.Gn+d.Np;){for(;;){B=d.Ji[u&(1<<d.Eh)-
1];sa=B>>>24;Ja=B>>>16&255;wa=B&65535;if(sa<=v)break;if(0===m)break a;m--;u+=g[l++]<<v;v+=8}if(16>wa)u>>>=sa,v-=sa,d.Rc[d.Jf++]=wa;else{if(16===wa){for(B=sa+2;v<B;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}u>>>=sa;v-=sa;if(0===d.Jf){b.oa="invalid bit length repeat";d.mode=30;break}T=d.Rc[d.Jf-1];B=3+(u&3);u>>>=2;v-=2}else if(17===wa){for(B=sa+3;v<B;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}u>>>=sa;v-=sa;T=0;B=3+(u&7);u>>>=3;v-=3}else{for(B=sa+7;v<B;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}u>>>=sa;v-=
sa;T=0;B=11+(u&127);u>>>=7;v-=7}if(d.Jf+B>d.Gn+d.Np){b.oa="invalid bit length repeat";d.mode=30;break}for(;B--;)d.Rc[d.Jf++]=T}}if(30===d.mode)break;if(0===d.Rc[256]){b.oa="invalid code -- missing end-of-block";d.mode=30;break}d.Eh=9;B={mc:d.Eh};Sb=z(1,d.Rc,0,d.Gn,d.Ji,0,d.Qq,B);d.Eh=B.mc;if(Sb){b.oa="invalid literal/lengths set";d.mode=30;break}d.Xm=6;d.rl=d.AB;B={mc:d.Xm};Sb=z(2,d.Rc,d.Gn,d.Np,d.rl,0,d.Qq,B);d.Xm=B.mc;if(Sb){b.oa="invalid distances set";d.mode=30;break}d.mode=20;if(6===c)break a;
case 20:d.mode=21;case 21:if(6<=m&&258<=H){b.Ub=n;b.T=H;b.Rf=l;b.Db=m;d.dk=u;d.mc=v;s(b,V);n=b.Ub;k=b.Qa;H=b.T;l=b.Rf;g=b.input;m=b.Db;u=d.dk;v=d.mc;12===d.mode&&(d.back=-1);break}for(d.back=0;;){B=d.Ji[u&(1<<d.Eh)-1];sa=B>>>24;Ja=B>>>16&255;wa=B&65535;if(sa<=v)break;if(0===m)break a;m--;u+=g[l++]<<v;v+=8}if(Ja&&0===(Ja&240)){T=sa;rb=Ja;for(Jb=wa;;){B=d.Ji[Jb+((u&(1<<T+rb)-1)>>T)];sa=B>>>24;Ja=B>>>16&255;wa=B&65535;if(T+sa<=v)break;if(0===m)break a;m--;u+=g[l++]<<v;v+=8}u>>>=T;v-=T;d.back+=T}u>>>=
sa;v-=sa;d.back+=sa;d.length=wa;if(0===Ja){d.mode=26;break}if(Ja&32){d.back=-1;d.mode=12;break}if(Ja&64){b.oa="invalid literal/length code";d.mode=30;break}d.Pa=Ja&15;d.mode=22;case 22:if(d.Pa){for(B=d.Pa;v<B;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.length+=u&(1<<d.Pa)-1;u>>>=d.Pa;v-=d.Pa;d.back+=d.Pa}d.qP=d.length;d.mode=23;case 23:for(;;){B=d.rl[u&(1<<d.Xm)-1];sa=B>>>24;Ja=B>>>16&255;wa=B&65535;if(sa<=v)break;if(0===m)break a;m--;u+=g[l++]<<v;v+=8}if(0===(Ja&240)){T=sa;rb=Ja;for(Jb=wa;;){B=d.rl[Jb+
((u&(1<<T+rb)-1)>>T)];sa=B>>>24;Ja=B>>>16&255;wa=B&65535;if(T+sa<=v)break;if(0===m)break a;m--;u+=g[l++]<<v;v+=8}u>>>=T;v-=T;d.back+=T}u>>>=sa;v-=sa;d.back+=sa;if(Ja&64){b.oa="invalid distance code";d.mode=30;break}d.offset=wa;d.Pa=Ja&15;d.mode=24;case 24:if(d.Pa){for(B=d.Pa;v<B;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}d.offset+=u&(1<<d.Pa)-1;u>>>=d.Pa;v-=d.Pa;d.back+=d.Pa}if(d.offset>d.Wr){b.oa="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===H)break a;B=V-H;if(d.offset>B){B=
d.offset-B;if(B>d.cj&&d.Nx){b.oa="invalid distance too far back";d.mode=30;break}B>d.Ne?(B-=d.Ne,T=d.Oe-B):T=d.Ne-B;B>d.length&&(B=d.length);rb=d.window}else rb=k,T=n-d.offset,B=d.length;B>H&&(B=H);H-=B;d.length-=B;do k[n++]=rb[T++];while(--B);0===d.length&&(d.mode=21);break;case 26:if(0===H)break a;k[n++]=d.length;H--;d.mode=21;break;case 27:if(d.tb){for(;32>v;){if(0===m)break a;m--;u|=g[l++]<<v;v+=8}V-=H;b.Ck+=V;d.total+=V;V&&(b.fa=d.check=d.ac?r(d.check,k,V,n-V):p(d.check,k,V,n-V));V=H;if((d.ac?
u:e(u))!==d.check){b.oa="incorrect data check";d.mode=30;break}v=u=0}d.mode=28;case 28:if(d.tb&&d.ac){for(;32>v;){if(0===m)break a;m--;u+=g[l++]<<v;v+=8}if(u!==(d.total&4294967295)){b.oa="incorrect length check";d.mode=30;break}v=u=0}d.mode=29;case 29:Sb=1;break a;case 30:Sb=-3;break a;case 31:return-4;default:return-2}b.Ub=n;b.T=H;b.Rf=l;b.Db=m;d.dk=u;d.mc=v;if(g=d.Oe||V!==b.T&&30>d.mode&&(27>d.mode||4!==c))g=b.Qa,l=b.Ub,n=V-b.T,H=b.state,null===H.window&&(H.Oe=1<<H.Yn,H.Ne=0,H.cj=0,H.window=new q.fh(H.Oe)),
n>=H.Oe?(q.vg(H.window,g,l-H.Oe,H.Oe,0),H.Ne=0,H.cj=H.Oe):(m=H.Oe-H.Ne,m>n&&(m=n),q.vg(H.window,g,l-n,m,H.Ne),(n-=m)?(q.vg(H.window,g,l-n,n,0),H.Ne=n,H.cj=H.Oe):(H.Ne+=m,H.Ne===H.Oe&&(H.Ne=0),H.cj<H.Oe&&(H.cj+=m))),g=0;if(g)return d.mode=31,-4;da-=b.Db;V-=b.T;b.Th+=da;b.Ck+=V;d.total+=V;d.tb&&V&&(b.fa=d.check=d.ac?r(d.check,k,V,b.Ub-V):p(d.check,k,V,b.Ub-V));b.Wm=d.mc+(d.Gs?64:0)+(12===d.mode?128:0)+(20===d.mode||15===d.mode?256:0);(0===da&&0===V||4===c)&&0===Sb&&(Sb=-5);return Sb};d.wL=function(b){if(!b||
!b.state)return-2;var c=b.state;c.window&&(c.window=null);b.state=null;return 0};d.xL=function(b,c){var d;b&&b.state&&(d=b.state,0!==(d.tb&2)&&(d.head=c,c.Ym=!1))};d.qT="pako inflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./inffast":29,"./inftrees":31}],31:[function(b,c){var d=b("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,
20,21,21,21,21,16,72,78],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.Ib=function(b,c,q,p,r,s,z,y){for(var F=y.mc,D=0,O=0,K=0,J=0,G=0,E=0,M=0,L=0,U=0,H=0,u,v,da=null,V=0,B,T=new d.Pe(16),E=new d.Pe(16),rb=null,sa=0,Ja,wa,Jb,D=0;15>=D;D++)T[D]=0;for(O=0;O<p;O++)T[c[q+O]]++;G=F;for(J=15;1<=J&&0===T[J];J--);G>J&&(G=J);if(0===
J)return r[s++]=20971520,r[s++]=20971520,y.mc=1,0;for(K=1;K<J&&0===T[K];K++);G<K&&(G=K);for(D=L=1;15>=D;D++)if(L<<=1,L-=T[D],0>L)return-1;if(0<L&&(0===b||1!==J))return-1;E[1]=0;for(D=1;15>D;D++)E[D+1]=E[D]+T[D];for(O=0;O<p;O++)0!==c[q+O]&&(z[E[c[q+O]]++]=O);switch(b){case 0:da=rb=z;B=19;break;case 1:da=e;V-=257;rb=g;sa-=257;B=256;break;default:da=k,rb=l,B=-1}O=H=0;D=K;F=s;E=G;M=0;v=-1;U=1<<G;p=U-1;if(1===b&&852<U||2===b&&592<U)return 1;for(var Sb=0;;){Sb++;Ja=D-M;z[O]<B?(wa=0,Jb=z[O]):z[O]>B?(wa=
rb[sa+z[O]],Jb=da[V+z[O]]):(wa=96,Jb=0);L=1<<D-M;K=u=1<<E;do u-=L,r[F+(H>>M)+u]=Ja<<24|wa<<16|Jb|0;while(0!==u);for(L=1<<D-1;H&L;)L>>=1;0!==L?(H&=L-1,H+=L):H=0;O++;if(0===--T[D]){if(D===J)break;D=c[q+z[O]]}if(D>G&&(H&p)!==v){0===M&&(M=G);F+=K;E=D-M;for(L=1<<E;E+M<J;){L-=T[E+M];if(0>=L)break;E++;L<<=1}U+=1<<E;if(1===b&&852<U||2===b&&592<U)return 1;v=H&p;r[v]=G<<24|E<<16|F-s|0}}0!==H&&(r[F+H]=D-M<<24|4194304);y.mc=G;return 0}},{"../utils/common":22}],32:[function(b,c){c.Ib={2:"need dictionary",1:"stream end",
0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],33:[function(b,c,d){function e(b,c){this.DB=b;this.En=0;this.Ak=c}function g(b,c,d,e,g){this.lF=b;this.eJ=c;this.dJ=d;this.UI=e;this.eM=g;this.OC=b&&b.length}function k(b){for(var c=b.length;0<=--c;)b[c]=0}function l(b,c){b.Jb[b.W++]=c&255;b.Jb[b.W++]=c>>>8&255}function n(b,c,d){b.ad>16-d?(b.Xd|=c<<b.ad&65535,l(b,b.Xd),b.Xd=c>>16-b.ad,b.ad+=d-16):(b.Xd|=c<<
b.ad&65535,b.ad+=d)}function m(b,c,d){n(b,d[2*c],d[2*c+1])}function q(b,c){var d=0;do d|=b&1,b>>>=1,d<<=1;while(0<--c);return d>>>1}function p(b,c,d){var e=Array(16),g=0,k;for(k=1;15>=k;k++)e[k]=g=g+d[k-1]<<1;for(d=0;d<=c;d++)g=b[2*d+1],0!==g&&(b[2*d]=q(e[g]++,g))}function r(b){var c;for(c=0;286>c;c++)b.ue[2*c]=0;for(c=0;30>c;c++)b.tl[2*c]=0;for(c=0;19>c;c++)b.vd[2*c]=0;b.ue[512]=1;b.Pi=b.Pn=0;b.Nf=b.matches=0}function s(b){8<b.ad?l(b,b.Xd):0<b.ad&&(b.Jb[b.W++]=b.Xd);b.Xd=0;b.ad=0}function z(b,c,
d,e){var g=2*c,k=2*d;return b[g]<b[k]||b[g]===b[k]&&e[c]<=e[d]}function y(b,c,d){for(var e=b.Rb[d],g=d<<1;g<=b.Di;){g<b.Di&&z(c,b.Rb[g+1],b.Rb[g],b.depth)&&g++;if(z(c,e,b.Rb[g],b.depth))break;b.Rb[d]=b.Rb[g];d=g;g<<=1}b.Rb[d]=e}function F(b,c,d){var e,g,k=0,l,p;if(0!==b.Nf){do e=b.Jb[b.To+2*k]<<8|b.Jb[b.To+2*k+1],g=b.Jb[b.tw+k],k++,0===e?m(b,g,c):(l=V[g],m(b,l+256+1,c),p=M[l],0!==p&&(g-=B[l],n(b,g,p)),e--,l=256>e?da[e]:da[256+(e>>>7)],m(b,l,d),p=L[l],0!==p&&(e-=T[l],n(b,e,p)));while(k<b.Nf)}m(b,256,
c)}function D(b,c){var d=c.DB,e=c.Ak.lF,g=c.Ak.OC,k=c.Ak.UI,l,m=-1,n;b.Di=0;b.mn=573;for(l=0;l<k;l++)0!==d[2*l]?(b.Rb[++b.Di]=m=l,b.depth[l]=0):d[2*l+1]=0;for(;2>b.Di;)n=b.Rb[++b.Di]=2>m?++m:0,d[2*n]=1,b.depth[n]=0,b.Pi--,g&&(b.Pn-=e[2*n+1]);c.En=m;for(l=b.Di>>1;1<=l;l--)y(b,d,l);n=k;do l=b.Rb[1],b.Rb[1]=b.Rb[b.Di--],y(b,d,1),e=b.Rb[1],b.Rb[--b.mn]=l,b.Rb[--b.mn]=e,d[2*n]=d[2*l]+d[2*e],b.depth[n]=(b.depth[l]>=b.depth[e]?b.depth[l]:b.depth[e])+1,d[2*l+1]=d[2*e+1]=n,b.Rb[1]=n++,y(b,d,1);while(2<=b.Di);
b.Rb[--b.mn]=b.Rb[1];l=c.DB;n=c.En;for(var q=c.Ak.lF,r=c.Ak.OC,s=c.Ak.eJ,v=c.Ak.dJ,u=c.Ak.eM,z,B,D=0,k=0;15>=k;k++)b.ni[k]=0;l[2*b.Rb[b.mn]+1]=0;for(e=b.mn+1;573>e;e++)g=b.Rb[e],k=l[2*l[2*g+1]+1]+1,k>u&&(k=u,D++),l[2*g+1]=k,g>n||(b.ni[k]++,z=0,g>=v&&(z=s[g-v]),B=l[2*g],b.Pi+=B*(k+z),r&&(b.Pn+=B*(q[2*g+1]+z)));if(0!==D){do{for(k=u-1;0===b.ni[k];)k--;b.ni[k]--;b.ni[k+1]+=2;b.ni[u]--;D-=2}while(0<D);for(k=u;0!==k;k--)for(g=b.ni[k];0!==g;)q=b.Rb[--e],q>n||(l[2*q+1]!==k&&(b.Pi+=(k-l[2*q+1])*l[2*q],l[2*
q+1]=k),g--)}p(d,m,b.ni)}function O(b,c,d){var e,g=-1,k,l=c[1],m=0,n=7,p=4;0===l&&(n=138,p=3);c[2*(d+1)+1]=65535;for(e=0;e<=d;e++)k=l,l=c[2*(e+1)+1],++m<n&&k===l||(m<p?b.vd[2*k]+=m:0!==k?(k!==g&&b.vd[2*k]++,b.vd[32]++):10>=m?b.vd[34]++:b.vd[36]++,m=0,g=k,0===l?(n=138,p=3):k===l?(n=6,p=3):(n=7,p=4))}function K(b,c,d){var e,g=-1,k,l=c[1],p=0,q=7,r=4;0===l&&(q=138,r=3);for(e=0;e<=d;e++)if(k=l,l=c[2*(e+1)+1],!(++p<q&&k===l)){if(p<r){do m(b,k,b.vd);while(0!==--p)}else 0!==k?(k!==g&&(m(b,k,b.vd),p--),m(b,
16,b.vd),n(b,p-3,2)):10>=p?(m(b,17,b.vd),n(b,p-3,3)):(m(b,18,b.vd),n(b,p-11,7));p=0;g=k;0===l?(q=138,r=3):k===l?(q=6,r=3):(q=7,r=4)}}function J(b){var c=4093624447,d;for(d=0;31>=d;d++,c>>>=1)if(c&1&&0!==b.ue[2*d])return 0;if(0!==b.ue[18]||0!==b.ue[20]||0!==b.ue[26])return 1;for(d=32;256>d;d++)if(0!==b.ue[2*d])return 1;return 0}function G(b,c,d,e){n(b,0+(e?1:0),3);s(b);l(b,d);l(b,~d);E.vg(b.Jb,b.window,c,d,b.W);b.W+=d}var E=b("../utils/common"),M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,
5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=Array(576);k(u);var v=Array(60);k(v);var da=Array(512);k(da);var V=Array(256);k(V);var B=Array(29);k(B);var T=Array(30);k(T);var rb,sa,Ja,wa=!1;d.HH=function(b){if(!wa){var c,d,k,l=Array(16);for(k=d=0;28>k;k++)for(B[k]=d,c=0;c<1<<M[k];c++)V[d++]=k;V[d-1]=k;for(k=d=0;16>k;k++)for(T[k]=d,c=0;c<1<<L[k];c++)da[d++]=k;for(d>>=7;30>
k;k++)for(T[k]=d<<7,c=0;c<1<<L[k]-7;c++)da[256+d++]=k;for(c=0;15>=c;c++)l[c]=0;for(c=0;143>=c;)u[2*c+1]=8,c++,l[8]++;for(;255>=c;)u[2*c+1]=9,c++,l[9]++;for(;279>=c;)u[2*c+1]=7,c++,l[7]++;for(;287>=c;)u[2*c+1]=8,c++,l[8]++;p(u,287,l);for(c=0;30>c;c++)v[2*c+1]=5,v[2*c]=q(c,5);rb=new g(u,M,257,286,15);sa=new g(v,L,0,30,15);Ja=new g([],U,0,19,7);wa=!0}b.Fs=new e(b.ue,rb);b.Tr=new e(b.tl,sa);b.LA=new e(b.vd,Ja);b.Xd=0;b.ad=0;r(b)};d.IH=G;d.GH=function(b,c,d,e){var g,k,l=0;if(0<b.Cd){2===b.ha.Wm&&(b.ha.Wm=
J(b));D(b,b.Fs);D(b,b.Tr);O(b,b.ue,b.Fs.En);O(b,b.tl,b.Tr.En);D(b,b.LA);for(l=18;3<=l&&0===b.vd[2*H[l]+1];l--);b.Pi+=3*(l+1)+14;g=b.Pi+3+7>>>3;k=b.Pn+3+7>>>3;k<=g&&(g=k)}else g=k=d+5;if(d+4<=g&&-1!==c)G(b,c,d,e);else if(4===b.Ph||k===g)n(b,2+(e?1:0),3),F(b,u,v);else{n(b,4+(e?1:0),3);c=b.Fs.En+1;d=b.Tr.En+1;l+=1;n(b,c-257,5);n(b,d-1,5);n(b,l-4,4);for(g=0;g<l;g++)n(b,b.vd[2*H[g]+1],3);K(b,b.ue,c-1);K(b,b.tl,d-1);F(b,b.ue,b.tl)}r(b);e&&s(b)};d.wj=function(b,c,d){b.Jb[b.To+2*b.Nf]=c>>>8&255;b.Jb[b.To+
2*b.Nf+1]=c&255;b.Jb[b.tw+b.Nf]=d&255;b.Nf++;0===c?b.ue[2*d]++:(b.matches++,c--,b.ue[2*(V[d]+256+1)]++,b.tl[2*(256>c?da[c]:da[256+(c>>>7)])]++);return b.Nf===b.Fp-1};d.FH=function(b){n(b,2,3);m(b,256,u);16===b.ad?(l(b,b.Xd),b.Xd=0,b.ad=0):8<=b.ad&&(b.Jb[b.W++]=b.Xd&255,b.Xd>>=8,b.ad-=8)}},{"../utils/common":22}],34:[function(b,c){c.Ib=function(){this.input=null;this.Th=this.Db=this.Rf=0;this.Qa=null;this.Ck=this.T=this.Ub=0;this.oa="";this.state=null;this.Wm=2;this.fa=0}},{}]},{},[7])(7)}
"object"==typeof exports?module.Ib=nm():"function"==typeof define&&define.ES?define(nm):"undefined"!=typeof window?window.$y=nm():"undefined"!=typeof global?global.$y=nm():"undefined"!=typeof self&&(self.$y=nm());!0;t("JSZip");t("ZipObject");function om(a){this.fr=new mm(a)}w(om,xc);t("gxnat.Zip",om);function pm(a,b,c,d){if(!Ea(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=R.uz;var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new om(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}om.prototype.yh=function(){return this.fr.files};
om.prototype.Fw=function(a){I(this.yh(),function(b){a(b.name,b.ZH())}.bind(this))};om.prototype.g=function(){om.c.g.call(this);this.Fw(function(a){this.fr.remove(a)}.bind(this));qb(this.fr);delete this.fr};t("gxnat.Zip.prototype.getFiles",om.prototype.yh);t("gxnat.Zip.prototype.loopFiles",om.prototype.Fw);t("gxnat.Zip.getFilesAsZip",pm);t("gxnat.Zip.prototype.dispose",om.prototype.g);t("gxnat.slicerNode",function(){});
function qm(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function rm(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}t("gxnat.slicerNode.getDisplayNodeTypes",qm);t("gxnat.slicerNode.toFloatArray",rm);function sm(){oa(this)}t("gxnat.slicerNode.Node",sm);function tm(a,b){oa(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;N(qm(b),function(b){N(a.getElementsByTagName(b),function(a){d.push(a)})});for(var g=0,k=d.length;g<k;g++)if(-1<c.indexOf(d[g].getAttribute("id"))){e=d[g];break}this.Uo=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=rm(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=rm(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(tm,sm);t("gxnat.slicerNode.Display",tm);function um(a,b){tm.call(this,a,b)}w(um,tm);t("gxnat.slicerNode.Mesh",um);function vm(a,b){if(a instanceof vm)this.td=a.oy();else{var c;if(c=ia(a))a:{for(var d=c=0;d<a.length;d++){if(!ia(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!la(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.td=Mb(a);else if(a instanceof vh)this.td=wm(a.height,a.width);else if(la(a)&&la(b)&&0<a&&0<b)this.td=wm(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.Id=new vh(this.td[0].length,this.td.length)}
function xm(a,b,c){for(var d=0;d<a.Yj().height;d++)for(var e=0;e<a.Yj().width;e++)b.call(c,a.td[d][e],d,e,a)}function ym(a,b){var c=new vm(a.Yj());xm(a,function(d,e,g){c.td[e][g]=b.call(void 0,d,e,g,a)});return c}function wm(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=vm.prototype;f.add=function(a){if(!wh(this.Id,a.Yj()))throw Error("Matrix summation is only supported on arrays of equal size");return ym(this,function(b,c,d){return b+a.td[c][d]})};
f.bn=function(a,b){if(this.Id.width!=a.Id.width||this.Id.height!=a.Id.height)return!1;for(var c=b||0,d=0;d<this.Id.height;d++)for(var e=0;e<this.Id.width;e++)if(!(Math.abs(this.td[d][e]-a.td[d][e])<=(c||1E-6)))return!1;return!0};f.Yj=function(){return this.Id};
f.multiply=function(a){if(a instanceof vm){if(this.Id.width!=a.Yj().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return zm(this,a)}if(la(a))return Am(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.Fc=function(a){if(!wh(this.Id,a.Yj()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return ym(this,function(b,c,d){return b-a.td[c][d]})};
f.oy=function(){return this.td};f.toString=function(){var a=0;xm(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];N(this.td,function(c){b.push("[ ");N(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Bm(a,b,c){return 0<=b&&b<a.Id.height&&0<=c&&c<a.Id.width}
function zm(a,b){var c=new vm(a.Id.height,b.Yj().width);xm(c,function(a,e,g){for(var k=a=0;k<this.Id.width;k++)a+=(Bm(this,e,k)?this.td[e][k]:0)*(Bm(b,k,g)?b.td[k][g]:0);if(!Bm(c,e,g))throw Error("Index out of bounds when setting matrix value, ("+e+","+g+") in size ("+c.Id.height+","+c.Id.width+")");c.td[e][g]=a},a);return c}function Am(a,b){return ym(a,function(a){return a*b})};function Cm(a,b,c){tm.call(this,a,b);for(var d=0,e,g,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=ym(new vm(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:g=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.eF=new Dm(k,l,g);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,g=a.length;d<g&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.fD=b;this.Wn=this.Uo?parseInt(this.Uo.getAttribute("upperThreshold")):null;this.Ip=this.Uo?parseInt(this.Uo.getAttribute("lowerThreshold")):null;this.visible=c}w(Cm,tm);t("gxnat.slicerNode.Volume",Cm);function Dm(a,b,c){var d=new vm([[0],[0],[0],[1]]);N([a,b,c],function(a,b){var c=a.multiply(d).oy(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.uO=c;break;case 1:this.uI=c;break;case 2:this.eI=c}}.bind(this))}t("gxnat.slicerNode.Volume.sliceToRAS",Dm);function Em(a,b){oa(this);this.backgroundColor=Fm(a);this.HA=Fm(b)}w(Em,sm);t("gxnat.slicerNode.BackgroundColor",Em);function Fm(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"};function Gm(a,b,c,d,e,g,k,l){oa(this);this.element=a;this.pi=b;this.backgroundColor=c;this.jD=d;this.Fo=e;this.bj=g;this.Lw=k;this.Iv=l}w(Gm,sm);t("gxnat.slicerNode.SceneView",Gm);function Hm(a){xc.call(this);a instanceof Gm?(this.Fo=a.Fo,this.pi=a.pi,this.backgroundColor=a.backgroundColor,this.jD=a.jD):a instanceof Cm?(this.origin=a.origin||[0,0,0],this.Wn=a.Wn||1E4,this.Ip=a.Ip||-1E4,this.JF=a.JF||!1,this.fD=a.fD||!1,this.eF=a.eF||null):a instanceof um&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Hm,xc);t("gxnat.vis.RenderProperties",Hm);Hm.prototype.g=function(){Hm.c.g.call(this);qb(this)};t("gxnat.vis.RenderProperties.prototype.dispose",Hm.prototype.g);function Im(a){R.od.Pd.call(this);this.Ve=a||null}w(Im,R.od.Pd);t("gxnat.vis.Renderable",Im);Im.prototype.Vx=function(a){this.Ve=a instanceof Hm?a:new Hm(a)};Im.prototype.sK=function(){return this.Ve};Im.prototype.g=function(){Im.c.g.call(this);this.Ve&&(this.Ve.g(),delete this.Ve)};t("gxnat.vis.Renderable.prototype.setRenderProperties",Im.prototype.Vx);t("gxnat.vis.Renderable.prototype.getRenderProperties",Im.prototype.sK);t("gxnat.vis.Renderable.prototype.dispose",Im.prototype.g);function Jm(a,b){Im.call(this,b);this.Vj=a||[];null!=b&&this.Vx(b)}w(Jm,Im);t("gxnat.vis.Viewable",Jm);f=Jm.prototype;f.Tj=null;f.FJ=function(){return this.Tj};f.BO=function(a){return this.Tj=a};f.vE=function(a){null!=this.Tj&&qb(this.Tj);this.Tj={};var b=this.yh();N(b,function(a){this.Tj[a]=null}.bind(this));var c,d,e,g;a.Fw(function(a,l){c=0;for(d=b.length;c<d;c++)if(e=b[c],g="/files/"+a.split("/files/")[1],Ea(e,g)){this.Tj[e]=l;break}}.bind(this));a.g()};f.yh=function(){return this.Vj};
f.lO=function(a){window.US.log("REMOVING FILE",a);Kb(this.Vj,a)};f.yj=function(a,b){null==this.Vj&&(this.Vj=[]);h(a)||(a=[a]);N(a,function(a){null!=b&&null==b(a)||this.Vj.push(a)}.bind(this))};f.g=function(){Jm.c.g.call(this);this.Vj&&(Hb(this.Vj),delete this.Vj)};t("gxnat.vis.Viewable.prototype.getFileData",Jm.prototype.FJ);t("gxnat.vis.Viewable.prototype.setFileData",Jm.prototype.BO);t("gxnat.vis.Viewable.prototype.setFileDataFromZip",Jm.prototype.vE);t("gxnat.vis.Viewable.prototype.getFiles",Jm.prototype.yh);
t("gxnat.vis.Viewable.prototype.removeFile",Jm.prototype.lO);t("gxnat.vis.Viewable.prototype.addFiles",Jm.prototype.yj);t("gxnat.vis.Viewable.prototype.dispose",Jm.prototype.g);function Km(a){Im.call(this);null!=a?h(a)||(a=[a]):a=[];this.yf=a}w(Km,Im);t("gxnat.vis.ViewableGroup",Km);Km.prototype.mA=function(a){return this.yf.push(a)};Km.prototype.qJ=function(){var a=[];N(this.yf,function(b){a=Lb(a,b.yh())});return a};Km.prototype.VK=function(){return this.yf};Km.prototype.g=function(){Km.c.g.call(this);N(this.yf,function(a){h(a)?N(a,function(a){a.g()}):a instanceof Jm&&a.g()});delete this.yf};t("gxnat.vis.ViewableGroup.prototype.addViewable",Km.prototype.mA);
t("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Km.prototype.qJ);t("gxnat.vis.ViewableGroup.prototype.getViewables",Km.prototype.VK);t("gxnat.vis.ViewableGroup.prototype.dispose",Km.prototype.g);function Lm(){R.od.Pd.call(this);this.qd=[]}w(Lm,R.od.Pd);t("gxnat.vis.ViewableTree",Lm);function Mm(a,b,c){this.YN=a;this.VO=b;this.$I=c}t("gxnat.vis.ViewableTree.metadataCollection",Mm);f=Lm.prototype;f.kt=null;f.Qn=null;f.cn=null;f.orientation=null;f.bc=function(){return this.orientation};f.kq=function(a){this.kt=a};f.mq=function(a){this.Qn=a};f.gq=function(a){this.cn=a};f.TK=function(){return this.qd};
f.g=function(){Lm.c.g.call(this);null!=this.kt&&(qb(this.kt),delete this.RT);null!=this.Qn&&(qb(this.Qn),delete this.fU);null!=this.cn&&(qb(this.cn),delete this.hT);null!=this.qd&&(N(this.qd,function(a){a.g()}),delete this.qd);null!=this.tF&&Hb(this.tF);delete this.tF;delete this.orientation};t("gxnat.vis.ViewableTree.metadataCollection",Mm);t("gxnat.vis.ViewableTree.prototype.projectMetadata",Lm.prototype.kt);t("gxnat.vis.ViewableTree.prototype.subjectMetadata",Lm.prototype.Qn);
t("gxnat.vis.ViewableTree.prototype.experimentMetadata",Lm.prototype.cn);t("gxnat.vis.ViewableTree.prototype.orientation",Lm.prototype.orientation);t("gxnat.vis.ViewableTree.prototype.getOrientation",Lm.prototype.bc);t("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Lm.prototype.kq);t("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Lm.prototype.mq);t("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Lm.prototype.gq);t("gxnat.vis.ViewableTree.prototype.getViewableGroups",Lm.prototype.TK);
t("gxnat.vis.ViewableTree.prototype.dispose",Lm.prototype.g);function Nm(a,b,c){Lm.call(this);this.xt(a);null!=c&&null!=b&&(this.Zo=c,this.Si=Vg(this.Zo,b.URI,"experiments"),this.Xq=new Qg(this.Si));this.zp=b;this.Ee={}}w(Nm,Lm);t("gxnat.vis.AjaxViewableTree",Nm);var Om={ID:"Scan ID",Name:"Name",type:"Scan Type"},Pm={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Qm={label:"Session"};function Rm(a,b,c){R.Hi(a,function(a){h(a);N(a,function(a){b(a)});c&&c()})}f=Nm.prototype;f.zi=null;f.Uj=!1;
f.wE=function(a,b){null==this.zi&&(this.zi={});this.zi[a]=b};f.vC=function(){var a=0;I(this.zi,function(b,c){a+=this.$B(c)}.bind(this));return a};f.$B=function(a){return parseInt(this.zi[a].Size,10)};f.GJ=function(){return this.zi};f.IJ=function(){return this.Uj};f.xE=function(a){this.Uj=a};f.DJ=function(){return this.Zo};f.rK=function(){return this.Si};f.wK=function(){return this.Ee};f.QE=function(a){this.Ee=a};f.Nn=function(){I(Om,function(a,b){null!=this.zp[b]&&(this.Ee[a]=this.zp[b])}.bind(this))};
f.kq=function(a){Nm.c.kq.call(this,a)};f.mq=function(a){Nm.c.mq.call(this,a);I(Pm,function(a,c){null!=this.Qn[c]&&(this.Ee[a]=this.Qn[c])}.bind(this))};f.gq=function(a){Nm.c.gq.call(this,a);I(Qm,function(a,c){null!=this.cn[c]&&(this.Ee[a]=this.cn[c])}.bind(this))};f.JJ=function(){return this.bp};f.Os=function(a){a=a[this.ap];if(!Da(a,"/"))return this.Si+"!"+a};
f.Wj=function(a){if(this.Uj)a();else{var b=0,c=0,d="",e;R.Hi(this.Si+this.bs,function(g){for(c=g.length;b<c;b++)if(e=g[b],d=this.Os(e))this.wE(d,e),this.yj(d,this.en);a();this.Uj=!0}.bind(this))}};f.en=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.Bl=function(){};function Sm(a,b,c,d){var e=new Qg(a);Rm(a+"/"+b.prototype.bp,function(a){new b(a,e.Ri("experiments"),c)},d)}
f.g=function(){Nm.c.g.call(this);null!=this.zi&&(qb(this.zi),delete this.zi);delete this.Uj;qb(this.Ee);delete this.Ee;null!=this.zp&&(qb(this.zp),delete this.zp);null!=this.Xq&&(this.Xq.g(),delete this.Xq);delete this.Zo;delete this.Si};t("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Om);t("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Pm);t("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Qm);t("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");t("gxnat.vis.AjaxViewableTree.loopFolderContents",Rm);
t("gxnat.vis.AjaxViewableTree.getViewableTrees",Sm);t("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Nm.prototype.Uj);t("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Nm.prototype.wE);t("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Nm.prototype.vC);t("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Nm.prototype.$B);t("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Nm.prototype.GJ);t("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Nm.prototype.IJ);
t("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Nm.prototype.xE);t("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Nm.prototype.DJ);t("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Nm.prototype.rK);t("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Nm.prototype.wK);t("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Nm.prototype.QE);t("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Nm.prototype.Nn);
t("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Nm.prototype.kq);t("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Nm.prototype.mq);t("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Nm.prototype.gq);t("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Nm.prototype.JJ);t("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Nm.prototype.Os);t("gxnat.vis.AjaxViewableTree.prototype.getFileList",Nm.prototype.Wj);
t("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Nm.prototype.en);t("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Nm.prototype.Bl);t("gxnat.vis.AjaxViewableTree.prototype.dispose",Nm.prototype.g);function Tm(a,b,c){Nm.call(this,"Scans",a,b);this.Ee["Total Frames"]=0;c&&c(this)}w(Tm,Nm);t("gxnat.vis.Scan",Tm);var Um="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");f=Tm.prototype;f.bp="scans";f.bs="/files";f.ap="URI";
f.Nn=function(){Tm.c.Nn.call(this);if(null!=this.qk["parameters/orientation"]){var a;a:{switch(this.qk["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.Ee.Orientation=a;this.orientation=this.Ee.Orientation}null!=this.qk["parameters/acqType"]&&(this.Ee["Acq. Type"]=this.qk["parameters/acqType"])};
f.Wj=function(a){this.Uj?a():R.Hi(this.Xq.originalUrl,function(b){this.qk=b.items[0].data_fields;window.console.log("SCAN JSON2",this.qk);this.Nn();Tm.c.Wj.call(this,function(){this.Bl();a()}.bind(this))}.bind(this))};f.en=function(a){a=Tm.c.en.call(this,a);if(null!=a){for(var b=0,c=Um.length;b<c;b++)if(Ea(a,"."+Um[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.yj=function(a){this.xt("Scans");if(0==this.qd.length){var b=new Km;b.Zf("scan");b.xt("scans");this.qd.push(b)}0==this.qd[0].yf.length&&this.qd[0].mA(new Jm);this.qd[0].yf[0].yj(a,this.en);this.Ee["Total Frames"]=this.qd[0].yf[0].yh().length};f.Os=function(a){return Vg(this.Zo,a[this.ap],"experiments")};f.Bl=function(a){if(this.qd&&this.qd[0]){var b=this.qd[0].yf[0].yh().sort(R.Us);this.oq(b[Math.floor(b.length/2)]+R.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){Tm.c.g.call(this);null!=this.qk&&qb(this.qk);delete this.qk};t("gxnat.vis.Scan.acceptableFileTypes",Um);t("gxnat.vis.Scan.prototype.folderQuerySuffix",Tm.prototype.bp);t("gxnat.vis.Scan.prototype.fileQuerySuffix",Tm.prototype.bs);t("gxnat.vis.Scan.prototype.fileContentsKey",Tm.prototype.ap);t("gxnat.vis.Scan.prototype.setViewableMetadata",Tm.prototype.Nn);t("gxnat.vis.Scan.prototype.getFileList",Tm.prototype.Wj);t("gxnat.vis.Scan.prototype.fileFilter",Tm.prototype.en);
t("gxnat.vis.Scan.prototype.addFiles",Tm.prototype.yj);t("gxnat.vis.Scan.prototype.makeFileUrl",Tm.prototype.Os);t("gxnat.vis.Scan.prototype.getThumbnailImage",Tm.prototype.Bl);t("gxnat.vis.Scan.prototype.dispose",Tm.prototype.g);function Vm(a,b,c,d){oa(this);this.url=a;this.document=b;this.files=d}w(Vm,sm);t("gxnat.slicerNode.Mrml",Vm);function Wm(a,b){oa(this);this.file=a;this.De=b}w(Wm,sm);t("gxnat.slicerNode.Displayable",Wm);function Xm(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function Ym(a,b,c){oa(this);this.position=a;this.Ot=b;this.focus=c}w(Ym,sm);t("gxnat.slicerNode.Camera",Ym);function Zm(a,b,c,d,e,g){oa(this);this.position=a;this.color=b;this.name=g}w(Zm,sm);t("gxnat.slicerNode.Annotations",Zm);function $m(){oa(this)}w($m,sm);t("gxnat.slicerNode.Layout",$m);R.B={};t("gxnat.slicerUtils",R.B);R.B.Py="/scripts/viewer/xiv/vis/GenericColorTable.txt";R.B.HB=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ea(a[c],".mrml")&&b.push(a[c]);return b};R.B.Yv=function(a,b){R.get(a,function(a){b(new Xm(a))},"text")};R.B.mC=function(a,b,c){a=h(a)?a:[a];var d=R.B.HB(a),e=[],g=0;N(d,function(b){R.B.Yv(b,function(l){g++;e.push(new Vm(b,l,0,a));g==d.length&&c(e)})})};
R.B.gB=function(a,b,c){R.B.QB(a,b,function(b){c(new Gm(a,R.B.UB(a),R.B.RB(a),R.B.hC(a),b,R.B.zC(a),R.B.lC(a),null))})};R.B.oC=function(a,b){var c=[],d=[],e=0;N(a,function(a){c=R.B.pC(a.document);N(c,function(k){R.B.gB(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};R.B.ZB=function(a,b){a=ja(a)?R.B.Yv(a):a;var c=[];N(a.getElementsByTagName(b),function(a){c.push(a)});return c};R.B.pC=function(a){return R.B.ZB(a,"SceneView")};
R.B.UB=function(a){return new Ym(rm(a.getElementsByTagName("Camera")[0].getAttribute("position")),rm(a.getElementsByTagName("Camera")[0].getAttribute("viewUp")),rm(a.getElementsByTagName("Camera")[0].getAttribute("focalPoint")))};R.B.sC=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,g=d.length;e<g;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
R.B.RB=function(a){return new Em(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};R.B.hC=function(a){return new $m(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
R.B.Bn=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",g="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),g=decodeURIComponent(a.toLowerCase()),-1<g.indexOf("%")&&(g=decodeURIComponent(g)),e.indexOf(g)==e.length-g.length)return b[c].replace(/%/g,"%25")};R.B.HJ=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Va(b,"!",Ol(c),"/",Ol(a))};
R.B.QB=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var g=[],k=[],l=0,n,m,q="rgb(255,0,0)",p="",r="",s="",z=0,y,F;0==a.length?c(null):(N(a,function(a){k.push(R.B.Bn(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):N(k,function(a){R.get(a,function(a){l++;N(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){m=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
s=n[11];q=[1,0,0];r=p="";z=0;for(len=e.length;z<len;z++)if(y=e[z],p=y.getAttribute("id"),p===n[0].replace("_","")){r=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(F=d[z],p=F.getAttribute("id"),p===r){q=rm(F.getAttribute("color")).map(function(a){return parseFloat(a)});break}g.push(new Zm(m,q,0,0,0,s))}});l==k.length&&c(g)},"text")}))};
R.B.Rv=function(a,b,c){var d=[],e=a.getElementsByTagName(c),g=null,k=0,l=e.length;N(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(g=e[k],g.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new Wm(g.getAttribute("fileName"),a));break}});return d};R.B.EJ=function(){return null};
R.B.zC=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=R.B.Rv(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],g=[],k="";N(c,function(a){k=a.De.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(N(d,function(b){b.getAttribute("id")==k&&(a.Uo=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.hv=serverRoot+R.B.Py:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):g.push(a)});var l="";N(e,function(a){l=a.De.getAttribute("attributes").split(";");N(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],N(g,function(b){b.De.getAttribute("id")==refVol&&(b.Ii=a)}.bind(this)))}.bind(this))});N(g,function(c){c.Tg=new Cm(a,c.De,b);c.Ii&&(c.Tg.Ii=c.Ii,delete c.Ii)});return g};R.B.lC=function(a){var b=R.B.Rv(a,"Model","ModelStorage");N(b,function(b){b.Tg=new um(a,b.De)});return b};t("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",R.B.Py);
t("gxnat.slicerUtils.extractMrmls",R.B.HB);t("gxnat.slicerUtils.getMrmlAsXml",R.B.Yv);t("gxnat.slicerUtils.getMrmlNodes",R.B.mC);t("gxnat.slicerUtils.createSceneViewProperties",R.B.gB);t("gxnat.slicerUtils.getSceneViewNodes",R.B.oC);t("gxnat.slicerUtils.getElementsFromMrml",R.B.ZB);t("gxnat.slicerUtils.getSceneViewsFromMrml",R.B.pC);t("gxnat.slicerUtils.getCameraFromSceneView",R.B.UB);t("gxnat.slicerUtils.getThumbnail",R.B.sC);t("gxnat.slicerUtils.mrmlColorToRgb",R.B.GT);
t("gxnat.slicerUtils.getBackgroundColorFromSceneView",R.B.RB);t("gxnat.slicerUtils.getLayoutFromSceneView",R.B.hC);t("gxnat.slicerUtils.matchFileToSet",R.B.Bn);t("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",R.B.HJ);t("gxnat.slicerUtils.getAnnotations",R.B.QB);t("gxnat.slicerUtils.getDisplayables",R.B.Rv);t("gxnat.slicerUtils.getFibers",R.B.EJ);t("gxnat.slicerUtils.getVolumes",R.B.zC);t("gxnat.slicerUtils.getMeshes",R.B.lC);function an(a,b,c){this.Mi=[];Nm.call(this,"Slicer Scenes",a,b);c&&c(this)}w(an,Nm);t("gxnat.vis.Slicer",an);var bn=["jpeg","jpg","png","gif"];f=an.prototype;f.bp="resources/Slicer/files";f.bs="?listContents=true";f.ap="File Name";f.Wj=function(a){this.Uj?cn(this,a):Tm.c.Wj.call(this,function(){this.Bl(function(){this.Nn();cn(this,a)}.bind(this))}.bind(this))};function cn(a,b){R.B.mC(a.Mi,0,function(a){R.B.oC(a,function(d){this.bB(d,a,b)}.bind(this))}.bind(a))}
f.bB=function(a,b,c){this.nM=b;this.wO=a;var d,e,g,k;N(this.wO,function(a){d=[a.bj||[],a.Lw||[],a.Iv||[]];e=[];N(d,function(a){N(a,function(a){g=R.B.Bn(Ol(a.file),this.Mi);a.Tg instanceof Cm&&a.Tg.Ii&&(a.Tg.labelMapFile=R.B.Bn(a.Tg.Ii.file,this.Mi),null!=a.Tg.Ii.hv&&null==R.B.Bn(a.Tg.Ii.hv,this.Mi)&&(a.Tg.colorTableFile=a.Tg.Ii.hv));e.push(new Jm(g,a.Tg))}.bind(this))}.bind(this));k=new Km(e);k.oq(R.B.Bn(R.B.sC(a.element,this.nM[0].document),this.Mi));k.Zf(a.element.getAttribute("name"));k.Vx(a);
this.qd.push(k)}.bind(this));c&&c(this)};f.Bl=function(a){var b="",c=0,d=this.Mi.length;for(this.thumbnailFiles=[];c<d;c++)b=zk(this.Mi[c]),-1!=bn.indexOf(b)&&this.thumbnailFiles.push(this.Mi[c]);N(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=xk(yk(this.thumbnailFiles[c]))){this.oq(this.thumbnailFiles[c]);break}a&&a(this)};f.yj=function(a){h(a)||(a=[a]);N(a,function(a){this.Mi.push(a)}.bind(this))};
t("gxnat.vis.Slicer.thumbnailExtensions",bn);t("gxnat.vis.Slicer.prototype.folderQuerySuffix",an.prototype.bp);t("gxnat.vis.Slicer.prototype.fileQuerySuffix",an.prototype.bs);t("gxnat.vis.Slicer.prototype.fileContentsKey",an.prototype.ap);t("gxnat.vis.Slicer.prototype.getFileList",an.prototype.Wj);t("gxnat.vis.Slicer.prototype.convertToViewableGroups",an.prototype.bB);t("gxnat.vis.Slicer.prototype.getThumbnailImage",an.prototype.Bl);t("gxnat.vis.Slicer.prototype.addFiles",an.prototype.yj);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function dn(){}t("xiv",dn);function en(a,b,c,d){xc.call(this);fn();gn();this.br={f:Tm,QO:an};this.xd=null!=a?a:en.States.lm;this.jM=b;this.qE=d;this.mt=Sg(d);this.sh=this.sh?this.sh:[];a="/"!==c[0]?"/"+c:c;-1===this.sh.indexOf(this.mt+a)&&this.sh.push(-1===a.indexOf(this.mt)?this.mt+a:a);1==this.sh.length&&(this.$d=new Qg(this.sh[0]))}w(en,xc);t("xiv.start",en);en.ModalStates={Qe:"fullscreen",wf:"popup",Yt:"fullscreen-popup",hh:"windowed",lm:"demo",dG:"demp-fullscreen"};en.States={lm:"demo",wQ:"live"};
function fn(){Nf.IMA=[Of,null]}function gn(){document.body.style.overflow="hidden"}f=en.prototype;f.Vt=C();f.zA=300;f.bD=1E3;f.ws=!1;f.ys=!1;f.PE=function(){};f.IA=function(){hn(this);this.show();if(this.xd==en.States.lm){Y(this.$a.Q.wf);Y(this.$a.Q.km);var a=Uf(function(){delete a;jn(this)}.bind(this),this.bD)}else this.$a.vc(this.jM),kn(this)};f.GO=function(a){this.kM=a};
function hn(a){a.$a=new a.kM;a.$a.AE(serverRoot);P(a.$a,"g",a.PM.bind(a));window.onresize=function(){null!=this.$a&&this.$a.j()}.bind(a)}f.PM=function(){this.ie.rD(null,function(a){N(a,function(a){ln(this,a);this.$a.R.Dd()}.bind(this))}.bind(this))};f.show=function(){this.$a.a().style.opacity=0;this.$a.k();P(this.$a.R.Fa,"d",this.xx.bind(this));P(this.$a.Q.wf,"click",this.wI.bind(this));P(this.$a.Q.km,"click",this.g.bind(this));this.$a.ic.dc(!0,0,this.bD);Al(this.$a.a(),this.zA)};
function jn(a){var b=a.$a.R,c={slicer:(new dn.vO.kR).tK(),scan:(new dn.vO.jR).tK()},d;I(c,function(a,b){N(a,function(a){d="scan"==b?new this.br.f:new this.br.QO;d.yj(a.files);d.xE(!0);d.QE(a.FT);d.oq(a.sF);mn(this,d,a.kT)}.bind(this))}.bind(a));b.Fa.xl()}
function kn(a){var b=a.$a.R.Fa,c=0;a.$a.R&&P(a.$a.R.Fa,nn,a.HN.bind(a));a.ie=new Wg(a.sh[0]);a.ie.oD(function(a){var e=ln(this,a);0==c&&(this.BL=a,this.YC=b.dc(e[0]));1==c&&(this.ys=!0,this.CL=a,this.lw=b.dc(e[1],this.YC));2==c&&(this.ws=!0,this.xs=a,this.AL=b.dc(e[2],this.lw));c++}.bind(a))}function on(a,b){var c=a.ie.cp(b),d=a.ie.SB(b),e=0;I(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}
function ln(a,b){var c=a.ie.TB(b),d=on(a,b);pn(a,d,c);return d}function qn(a,b){a.ie.nD(b.originalUrl,null,function(a){if(b.Ri("subjects")==this.$d.Ri("subjects")&&this.ys){var d=this.$d.Ri("experiments");this.xs=this.ie.hn(d);Kb(a,this.xs);Nb(a,0,0,this.xs);this.ys=!1}N(a,function(a){ln(this,a)}.bind(this))}.bind(a))}f.xx=function(a){if(null!=a.De[this.Vt])switch(a=new Qg(a.De[this.Vt]),a.ds()){case "subjects":qn(this,a);break;case "experiments":rn(this,a.originalUrl)}};
f.pn=function(a){Bl(this.$a.a(),this.zA,a)};f.g=function(){this.pn(this.MI.bind(this))};function rn(a,b){if(null==a.Dw)a.Dw=[];else if(-1<a.Dw.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.ie.cp(a.ie.hn(b)),c=new Mm(c.projects[hh],c.subjects[hh],c.experiments[hh]);sn(a,b,function(){this.Dw.push(b);this.ws&&(this.ws=!1,I(this.lw.he,function(){}.bind(this)))}.bind(a),c)}f.HN=function(a){var b=a.De.le.Fr;a.De.le.Fr=0;a.De.le.Fr=b};
f.wI=function(){var a=open(this.qE+"/scripts/viewer/xiv/popup.html?"+this.sh[0],"XImgView","width=1200,height=800");a.focus();var b=this.sh[0];a.onload=function(){a.BT(b,en.ModalStates.wf,serverRoot)}.bind(this);this.g()};function sn(a,b,c,d){tn(a,b,function(a){var b=a.Si;un(this,a,b,function(a){mn(this,a)}.bind(this));null!=d&&(this.vb[b].kq(d.YN),this.vb[b].mq(d.VO),this.vb[b].gq(d.$I))}.bind(a),c)}
function pn(a,b,c){var d=a.$a.R.Fa;d.Oo(b);zippyNodes=d.Sv(b);N(zippyNodes,function(a,b){null==c||null==c[b]||null==a[this.Vt]&&(a[this.Vt]=c[b])}.bind(a))}function mn(a,b,c){var d=a.$a.R;null!=d&&(null==c&&null!=a.ie&&(c=on(a,a.ie.hn(b.Zo))),"Scans"!=b.qi&&c.push(b.qi),b.Wj(function(){if(0<b.qd.length){var a=d.Gj(b,c);if("Scans"!=b.qi){var g=d.Fa.Sv(c);0<c.length&&1<g.length&&d.dc(c[c.length-1],g[g.length-2])}d.Qx(this.$a.a());a.Rx(b.Sn);a.yy()}}.bind(a)))}
function un(a,b,c,d){a.vb=a.vb?a.vb:{};null==a.vb[c]&&(a.vb[c]=b,d(b))}
f.MI=function(){en.c.g.call(this);document.body.style.overflow="visible";I(this.vb,function(a,b){a.g();delete this.vb[b]}.bind(this));delete this.vb;this.ie&&(this.ie.g(),delete this.ie);delete this.sh;delete this.qE;delete this.mt;delete this.nT;null!=this.$d&&(this.$d.g(),delete this.$d);delete this.ws;delete this.ys;delete this.BL;delete this.CL;delete this.xs;delete this.YC;delete this.lw;delete this.AL;Wc(this.$a);this.$a.g();Y(this.$a.a());delete this.$a};
function tn(a,b,c,d){var e=kb(a.br),g=0;I(a.br,function(a){Sm(b,a,c,function(){g++;g===e&&null!=d&&d()})})}
function vn(){var a=!0,b=ac(),c={Chrome:{wp:Wb("Chrome")||Wb("CriOS"),Mp:11},IE:{wp:Zb(),Mp:11},Safari:{wp:$b(),Mp:5.1},Opera:{wp:Yb(),Mp:12},Firefox:{wp:Wb("Firefox"),Mp:4}},d=!1;I(c,function(c){if(c.wp&&!d&&1==Wa(c.Mp,b)){c=new bm;c.Vz();c.Wz();var g=c.Br();S(g,bm.CSS.hz);g.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.a().style.position="fixed";c.a().style.height="240px";c.zj("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>");
c.Qh[0].style.top="120px";c.k();c.a().style.opacity=0;Al(c.a(),400);a=!1;d=!0}});a&&!en.checkForWebGL()&&(wn(),a=!1);return a}
function wn(){var a='<br>It looks like <a style="color: #00FFFF" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">WebGL or Experimental-WebGL</a> is disabled.<br><br>How to enable WebGL in ',b,c=':<br> <a  style="color: #00FFFF" href=';Zb()?(b="Internet Explorer",c+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx</a>'):Wb("Chrome")||Wb("CriOS")?(b="Chrome",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):
Wb("Firefox")?(b="Firefox",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):$b()?(b="Safari",c+='"https://discussions.apple.com/thread/3300585?start=0">https://discussions.apple.com/thread/3300585?start=0</a>'):Yb()&&(b="Opera",c+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html</a>');a+=b+c;b=new bm;
b.Vz();b.Wz();c=b.Br();S(c,bm.CSS.hz);c.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";b.zj(a);b.Qh[0].style.top="120px";b.k();b.a().style.position="fixed";b.a().style.opacity=0;Al(b.a(),400)}en.checkForWebGL=function(){var a=W("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};t("xiv.start.States",en.States);t("xiv.start.loadCustomExtensions",fn);t("xiv.start.adjustDocumentStyle",gn);t("xiv.start.ModalStates",en.ModalStates);
t("xiv.start.checkForWebGL",en.checkForWebGL);t("xiv.start.isCompatible",vn);t("xiv.start.prototype.setServerRoot",en.prototype.PE);t("xiv.start.prototype.setModalType",en.prototype.GO);t("xiv.start.prototype.begin",en.prototype.IA);t("xiv.start.prototype.show",en.prototype.show);t("xiv.start.prototype.hide",en.prototype.pn);t("xiv.start.prototype.dispose",en.prototype.g);window["xiv.start.isCompatible"]=vn;window["xiv.start.checkForWebGL"]=en.checkForWebGL;window["xiv.start.ModalStates"]=en.ModalStates;
en.prototype.setServerRoot=en.prototype.PE;en.prototype.begin=en.prototype.IA;function xn(){ad.call(this);this.yp=[];this.my=[];this.dq=[]}w(xn,ad);f=xn.prototype;f.Bs=!1;f.Cs=!1;f.hk=!1;f.dD=function(){return this.hk};f.NE=function(a){this.st=a};f.ra=function(){if(!this.hk){for(var a,b=0;a=this.yp[b];b++)yn(this,a);this.hk=!0}};function yn(a,b){a.Bs&&(P(b.element,"mousedown",b.Pg,!1,b),a.cy&&Mj(b.element,a.cy));a.Cs&&a.ly&&Mj(b.element,a.ly)}
function zn(a){for(var b,c=0;b=a.yp[c];c++){var d=a;d.Bs&&(Uc(b.element,"mousedown",b.Pg,!1,b),d.cy&&Oj(b.element,d.cy));d.Cs&&d.ly&&Oj(b.element,d.ly);b.g()}a.yp.length=0}
f.uq=function(a,b){if(!this.Ef)if(this.Ef=b,!1==this.dispatchEvent(new An("dragstart",0,this.Ef)))this.Ef=null;else{var c=b.Ij;this.sl=this.ov(c);var d=Fh(c);d.body.appendChild(this.sl);var e=this.sl,g=Di(c),c=Wi(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.Wa=new dj(e);this.Wa.NE(this.st);P(this.Wa,"drag",this.CD,!1,this);P(this.Wa,"end",this.Qj,!1,this);P(d.body,"selectstart",this.oF);this.Rn=[];for(e=0;d=this.my[e];e++)for(var k,
g=0;k=d.yp[g];g++)for(var c=d,l=[k.element],n=this.Rn,m=0;m<l.length;m++){var q=l[m],p,r=q;p=Di(r);r=Mi(r);p=new uh(p.y,p.x+r.width,p.y+r.height,p.x);n.push(new Bn(p,c,k,q));Cn(this,p)}this.Yi||(this.Yi=new uh(0,0,0,0));for(e=0;d=this.dq[e];e++)d.kv=[],d.rE=d.l.scrollLeft,d.sE=d.l.scrollTop,g=Di(d.l),c=Mi(d.l),d.Ac=new uh(g.y,g.x+c.width,g.y+c.height,g.x);for(e=0;c=this.Rn[e];e++)for(g=0;d=this.dq[g];g++)ai(d.l,c.l)&&(d.kv.push(c),c.cq=d);this.cl=null;for(e=0;d=this.dq[e];e++)P(d.l,"scroll",this.YA,
!1,this);this.Wa.uq(a);a.preventDefault()}};
f.Qj=function(a){var b=a.SI?null:this.cl;if(b&&b.bm){var c=a.clientX;a=a.clientY;var d=qi(Dh(this.sl)),e=c+d.x,d=a+d.y,g;this.zq&&(g=this.zq(b.Gi,b.Ac,e,d));this.dispatchEvent(new An("drag",0,this.Ef,0,b.Gi,0,c,a));b.bm.dispatchEvent(new An("drop",0,this.Ef,0,b.Gi,0,c,a,0,0,g))}this.dispatchEvent(new An("dragend",0,this.Ef));Uc(this.Wa,"drag",this.CD,!1,this);Uc(this.Wa,"end",this.Qj,!1,this);Uc(Fh(this.Ef.Ij).body,"selectstart",this.oF);for(b=0;c=this.dq[b];b++)Uc(c.l,"scroll",this.YA,!1,this),c.kv=
[];this.Wa.g();Y(this.sl);delete this.Ef;delete this.sl;delete this.Wa;delete this.Rn;delete this.cl};
f.CD=function(a){var b,c=qi(Dh(this.sl));b=new sh(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.cl,g;if(e){this.zq&&e.bm&&(g=this.zq(e.Gi,e.Ac,c,d));if(e.Ac.contains(b)&&g==this.Uz)return;e.bm&&(this.dispatchEvent(new An("dragout",0,this.Ef,0,e.Gi)),e.bm.dispatchEvent(new An("dragout",0,this.Ef,0,e.Gi,0,void 0,void 0,0,0,this.Uz)));this.Uz=g;this.cl=null}if(this.Yi.contains(b)){a:{for(var k=0;e=this.Rn[k];k++)if(e.Ac.contains(b))if(e.cq){if(e.cq.Ac.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.cl=b)&&e.bm)this.zq&&(g=this.zq(e.Gi,e.Ac,c,d)),c=new An("dragover",0,this.Ef,0,e.Gi),c.WO=g,this.dispatchEvent(c),e.bm.dispatchEvent(new An("dragover",0,this.Ef,0,e.Gi,0,a.clientX,a.clientY,0,0,g));else if(!e){this.cf||(this.cf=new Bn(this.Yi.clone()));a=this.cf.Ac;a.top=this.Yi.top;a.right=this.Yi.right;a.bottom=this.Yi.bottom;a.left=this.Yi.left;for(g=0;e=this.Rn[g];g++)b=e.Ac,e.cq&&(e=e.cq.Ac,b=new uh(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.cl=10<=(a.right-a.left)*(a.bottom-a.top)?this.cf:null}}};f.oF=function(){return!1};
f.YA=function(a){for(var b=0,c;c=this.dq[b];b++)if(a.target==c.l){var d=c.sE-c.l.scrollTop,e=c.rE-c.l.scrollLeft;c.sE=c.l.scrollTop;c.rE=c.l.scrollLeft;this.cf&&this.cl==this.cf&&(0<d?this.cf.Ac.top+=d:this.cf.Ac.bottom+=d,0<e?this.cf.Ac.left+=e:this.cf.Ac.right+=e);for(var g=0,k;k=c.kv[g];g++)k=k.Ac,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,Cn(this,k)}this.Wa.Hn(a)};
f.ov=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=W("table",null,W("tbody",null,b));break a;case "td":case "th":a=W("table",null,W("tbody",null,W("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.TI&&Mj(a,this.TI);return a};f.YB=function(){return this.Wa};
function Cn(a,b){if(1==a.Rn.length)a.Yi=new uh(b.top,b.right,b.bottom,b.left);else{var c=a.Yi;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.e=function(){xn.c.e.call(this);zn(this)};function An(a,b,c,d,e,g,k,l,n,m,q){Dc.call(this,a);this.Xr=c;this.$m=e;this.clientX=k;this.clientY=l;this.WO=q}w(An,Dc);An.prototype.e=function(){};
function Dn(a,b){ad.call(this);this.element=Gh(a);this.data=b;this.Ra=null;this.Bc=new $i(this);Ac(this,va(Bc,this.Bc));if(!this.element)throw Error("Invalid argument");}w(Dn,ad);f=Dn.prototype;f.Ij=null;f.Pg=function(a){if(Jc(a)){var b=a.target;b&&(this.Bc.s(b,"mousemove",this.BD,!1).s(b,"mouseout",this.BD,!1),this.Bc.s(Fh(b),"mouseup",this.lM,!0),this.Ij=b,this.fy=new sh(a.clientX,a.clientY),a.preventDefault())}};f.iq=function(a){this.Ra=a};
f.BD=function(a){var b=this.Ij,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.fy.x)+Math.abs(a.clientY-this.fy.y)||b)this.Bc.Xf(),this.Ra.uq(a,this)};f.lM=function(){this.Bc.Xf();delete this.fy;this.Ij=null};function Bn(a,b,c,d){this.Ac=a;this.bm=b;this.Gi=c;this.l=d}Bn.prototype.cq=null;function En(a,b){this.type=a;this.currentTarget=this.target=b||null}f=En.prototype;f.Sg=!1;f.defaultPrevented=!1;f.aq=!0;f.stopPropagation=function(){this.Sg=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.aq=!1};
function Fn(a){a=new En("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Gi(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.aq=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.Sg;d--){var e=b[d],g=a.type,k=new Hc(a,b[d]);eb(e)?bd(e,g,!0,k):Yc(e,g,!0,k)}for(d=0;d<b.length&&!a.Sg;d++)e=b[d],g=a.type,k=new Hc(a,b[d]),eb(e)?bd(e,g,!1,k):Yc(e,g,!1,k)};function Gn(a,b){if(!a)throw Error("Invalid class name "+a);if(!ma(b))throw Error("Invalid decorator function "+b);Hn[a]=b}var In={},Hn={};function Jn(){}var Kn;ga(Jn);var Ln={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=Jn.prototype;f.wh=function(){};f.r=function(a){var b=a.H().r("div",this.Al(a).join(" "),a.xe());Mn(this,a,b);return b};f.fb=function(a){return a};f.wl=function(a,b,c){if(a=a.a?a.a():a){var d=[b];hc&&!qc("7")&&(d=Nn(Kj(a),b),d.push(b));(c?Nj:Pj)(a,d)}};f.af=function(){return!0};
f.Eb=function(a,b){b.id&&xj(a,b.id);var c=this.fb(b);c&&c.firstChild?On(a,c.firstChild.nextSibling?Mb(c.childNodes):c.firstChild):a.Oc=null;var d=0,e=this.P(),g=this.P(),k=!1,l=!1,c=!1,n=Mb(Kj(b));N(n,function(a){k||a!=e?l||a!=g?d|=this.Zv(a):l=!0:(k=!0,g==e&&(l=!0))},this);a.J=d;k||(n.push(e),g==e&&(l=!0));l||n.push(g);var m=a.Hg;m&&n.push.apply(n,m);if(hc&&!qc("7")){var q=Nn(n);0<q.length&&(n.push.apply(n,q),c=!0)}if(!k||!l||m||c)b.className=n.join(" ");Mn(this,a,b);return b};
f.un=function(a){a.jf()&&this.Mn(a.a(),!0);a.isEnabled()&&this.tk(a,a.Ja())};function Pn(a,b,c){if(a=c||a.wh())c=b.getAttribute("role")||null,a!=c&&Sj(b,a)}function Mn(a,b,c){b.Ja()||Tj(c,"hidden",!b.Ja());b.isEnabled()||a.Vh(c,1,!b.isEnabled());Qn(b,8)&&a.Vh(c,8,!!(b.J&8));Qn(b,16)&&a.Vh(c,16,b.jk());Qn(b,64)&&a.Vh(c,64,!!(b.J&64))}f.eq=function(a,b){Ti(a,!b,!hc&&!gc)};f.Mn=function(a,b){this.wl(a,this.P()+"-rtl",b)};f.Fi=function(a){var b;return Qn(a,32)&&(b=a.pc())?gi(b)&&hi(b):!1};
f.tk=function(a,b){var c;if(Qn(a,32)&&(c=a.pc())){if(!b&&a.J&32){try{c.blur()}catch(d){}a.J&32&&a.El(null)}(gi(c)&&hi(c))!=b&&fi(c,b)}};f.ea=function(a,b){Qi(a,b);a&&Tj(a,"hidden",!b)};f.vc=function(a,b,c){var d=a.a();if(d){var e=this.dp(b);e&&this.wl(a,e,c);this.Vh(d,b,c)}};f.Vh=function(a,b,c){Kn||(Kn={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Kn[b];var d=a.getAttribute("role")||null;d&&(d=Ln[d]||b,b="checked"==b||"selected"==b?d:b);b&&Tj(a,b,c)};
f.rk=function(a,b){var c=this.fb(a);if(c&&(Uh(c),b))if(ja(b))ci(c,b);else{var d=function(a){if(a){var b=Fh(c);c.appendChild(ja(a)?b.createTextNode(a):a)}};h(b)?N(b,d):!ia(b)||"nodeType"in b?d(b):N(Mb(b),d)}};f.pc=function(a){return a.a()};f.P=function(){return"goog-control"};f.Al=function(a){var b=this.P(),c=[b],d=this.P();d!=b&&c.push(d);b=a.kn();for(d=[];b;){var e=b&-b;d.push(this.dp(e));b&=~e}c.push.apply(c,d);(a=a.Hg)&&c.push.apply(c,a);hc&&!qc("7")&&c.push.apply(c,Nn(c));return c};
function Nn(a,b){var c=[];b&&(a=a.concat([b]));N([],function(d){!Db(d,va(Gb,a))||b&&!Gb(d,b)||c.push(d.join("_"))});return c}f.dp=function(a){this.Lr||Rn(this);return this.Lr[a]};f.Zv=function(a){if(!this.kF){this.Lr||Rn(this);var b=this.Lr,c={},d;for(d in b)c[b[d]]=d;this.kF=c}a=parseInt(this.kF[a],10);return isNaN(a)?0:a};function Rn(a){var b=a.P();b.replace(/\xa0|\s/g," ");a.Lr={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Sn(a,b){ad.call(this);a&&this.Pm(a,b)}w(Sn,ad);f=Sn.prototype;f.l=null;f.Ds=null;f.rw=null;f.Es=null;f.kf=-1;f.kk=-1;f.Pu=!1;
var Tn={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Un={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Vn=hc||jc&&qc("525"),Wn=bc&&ic;f=Sn.prototype;
f.ls=function(a){jc&&(17==this.kf&&!a.ctrlKey||18==this.kf&&!a.altKey||bc&&91==this.kf&&!a.metaKey)&&(this.kk=this.kf=-1);-1==this.kf&&(a.ctrlKey&&17!=a.keyCode?this.kf=17:a.altKey&&18!=a.keyCode?this.kf=18:a.metaKey&&91!=a.keyCode&&(this.kf=91));Vn&&!Ej(a.keyCode,this.kf,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.kk=Gj(a.keyCode),Wn&&(this.Pu=a.altKey))};f.hL=function(a){this.kk=this.kf=-1;this.Pu=a.altKey};
f.handleEvent=function(a){var b=a.Qc,c,d,e=b.altKey;hc&&"keypress"==a.type?(c=this.kk,d=13!=c&&27!=c?b.keyCode:0):jc&&"keypress"==a.type?(c=this.kk,d=0<=b.charCode&&63232>b.charCode&&Fj(c)?b.charCode:0):gc?(c=this.kk,d=Fj(c)?b.keyCode:0):(c=b.keyCode||this.kk,d=b.charCode||0,Wn&&(e=this.Pu),bc&&63==d&&224==c&&(c=191));var g=c=Gj(c),k=b.keyIdentifier;c?63232<=c&&c in Tn?g=Tn[c]:25==c&&a.shiftKey&&(g=9):k&&k in Un&&(g=Un[k]);a=g==this.kf;this.kf=g;b=new Xn(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.l};f.Pm=function(a,b){this.Es&&this.detach();this.l=a;this.Ds=P(this.l,"keypress",this,b);this.rw=P(this.l,"keydown",this.ls,b,this);this.Es=P(this.l,"keyup",this.hL,b,this)};f.detach=function(){this.Ds&&(Vc(this.Ds),Vc(this.rw),Vc(this.Es),this.Es=this.rw=this.Ds=null);this.l=null;this.kk=this.kf=-1};f.e=function(){Sn.c.e.call(this);this.detach()};function Xn(a,b,c,d){Hc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(Xn,Hc);function Yn(a,b,c){tj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=oa(b);if(d=In[d])break;b=b.c?b.c.constructor:null}b=d?ma(d.ye)?d.ye():new d:null}this.ta=b;this.Oc=ca(a)?a:null}w(Yn,tj);f=Yn.prototype;f.Oc=null;f.J=0;f.Aq=39;f.Go=255;f.wq=0;f.Gc=!0;f.Hg=null;f.Gl=!0;f.Dr=!1;f.Fx=null;f.hq=function(a){this.ga&&a!=this.Gl&&Zn(this,a);this.Gl=a};f.pc=function(){return this.ta.pc(this)};f.es=function(){return this.qb||(this.qb=new Sn)};f.Ab=function(){return this.ta};
f.wl=function(a,b){b?a&&(this.Hg?Gb(this.Hg,a)||this.Hg.push(a):this.Hg=[a],this.ta.wl(this,a,!0)):a&&this.Hg&&Kb(this.Hg,a)&&(0==this.Hg.length&&(this.Hg=null),this.ta.wl(this,a,!1))};f.r=function(){var a=this.ta.r(this);this.l=a;Pn(this.ta,a,this.Xj());this.Dr||this.ta.eq(a,!1);this.Ja()||this.ta.ea(a,!1)};f.Xj=function(){return this.Fx};f.fb=function(){return this.ta.fb(this.a())};f.af=function(a){return this.ta.af(a)};
f.se=function(a){this.l=a=this.ta.Eb(this,a);Pn(this.ta,a,this.Xj());this.Dr||this.ta.eq(a,!1);this.Gc="none"!=a.style.display};f.eb=function(){Yn.c.eb.call(this);this.ta.un(this);if(this.Aq&-2&&(this.Gl&&Zn(this,!0),Qn(this,32))){var a=this.pc();if(a){var b=this.es();b.Pm(a);this.gb().s(b,"key",this.zh).s(a,"focus",this.Fl).s(a,"blur",this.El)}}};
function Zn(a,b){var c=a.gb(),d=a.a();b?(c.s(d,"mouseover",a.Hl).s(d,"mousedown",a.Ah).s(d,"mouseup",a.Kg).s(d,"mouseout",a.ns),a.lp!=fa&&c.s(d,"contextmenu",a.lp),hc&&c.s(d,"dblclick",a.DC)):(c.rb(d,"mouseover",a.Hl).rb(d,"mousedown",a.Ah).rb(d,"mouseup",a.Kg).rb(d,"mouseout",a.ns),a.lp!=fa&&c.rb(d,"contextmenu",a.lp),hc&&c.rb(d,"dblclick",a.DC))}f.Cc=function(){Yn.c.Cc.call(this);this.qb&&this.qb.detach();this.Ja()&&this.isEnabled()&&this.ta.tk(this,!1)};
f.e=function(){Yn.c.e.call(this);this.qb&&(this.qb.g(),delete this.qb);delete this.ta;this.Hg=this.Oc=null};f.xe=function(){return this.Oc};f.rk=function(a){this.ta.rk(this.a(),a);this.Oc=a};function On(a,b){a.Oc=b}f.cs=function(){var a=this.xe();if(!a)return"";a=ja(a)?a:h(a)?Bb(a,ki).join(""):ii(a);return Ga(a)};f.Mn=function(a){Yn.c.Mn.call(this,a);var b=this.a();b&&this.ta.Mn(b,a)};f.eq=function(a){this.Dr=a;var b=this.a();b&&this.ta.eq(b,a)};f.Ja=function(){return this.Gc};
f.ea=function(a,b){if(b||this.Gc!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.ta.ea(c,a);this.isEnabled()&&this.ta.tk(this,a);this.Gc=a;return!0}return!1};f.isEnabled=function(){return!(this.J&1)};f.uc=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!$n(this,1,!a)||(a||(this.setActive(!1),this.Wg(!1)),this.Ja()&&this.ta.tk(this,a),this.vc(1,!a))};f.Wg=function(a){$n(this,2,a)&&this.vc(2,a)};f.Ch=function(){return!!(this.J&4)};
f.setActive=function(a){$n(this,4,a)&&this.vc(4,a)};f.lq=function(a){$n(this,8,a)&&this.vc(8,a)};f.jk=function(){return!!(this.J&16)};f.Yf=function(a){$n(this,16,a)&&this.vc(16,a)};f.ec=function(a){$n(this,64,a)&&this.vc(64,a)};f.kn=function(){return this.J};f.vc=function(a,b){Qn(this,a)&&b!=!!(this.J&a)&&(this.ta.vc(this,a,b),this.J=b?this.J|a:this.J&~a)};function Qn(a,b){return!!(a.Aq&b)}
f.md=function(a,b){if(this.ga&&this.J&a&&!b)throw Error("Component already rendered");!b&&this.J&a&&this.vc(a,!1);this.Aq=b?this.Aq|a:this.Aq&~a};function ao(a,b){return!!(a.Go&b)&&Qn(a,b)}function $n(a,b,c){return Qn(a,b)&&!!(a.J&b)!=c&&(!(a.wq&b)||a.dispatchEvent(vj(b,c)))&&!a.ql}f.Hl=function(a){(!a.relatedTarget||!ai(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&ao(this,2)&&this.Wg(!0)};
f.ns=function(a){a.relatedTarget&&ai(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(ao(this,4)&&this.setActive(!1),ao(this,2)&&this.Wg(!1))};f.lp=fa;f.Ah=function(a){this.isEnabled()&&(ao(this,2)&&this.Wg(!0),Jc(a)&&(ao(this,4)&&this.setActive(!0),this.ta.Fi(this)&&this.pc().focus()));!this.Dr&&Jc(a)&&a.preventDefault()};f.Kg=function(a){this.isEnabled()&&(ao(this,2)&&this.Wg(!0),this.Ch()&&this.Tl(a)&&ao(this,4)&&this.setActive(!1))};f.DC=function(a){this.isEnabled()&&this.Tl(a)};
f.Tl=function(a){ao(this,16)&&this.Yf(!this.jk());ao(this,8)&&this.lq(!0);ao(this,64)&&this.ec(!(this.J&64));var b=new Dc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Cx=a.Cx);return this.dispatchEvent(b)};f.Fl=function(){ao(this,32)&&$n(this,32,!0)&&this.vc(32,!0)};f.El=function(){ao(this,4)&&this.setActive(!1);ao(this,32)&&$n(this,32,!1)&&this.vc(32,!1)};
f.zh=function(a){return this.Ja()&&this.isEnabled()&&this.Jg(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.Jg=function(a){return 13==a.keyCode&&this.Tl(a)};if(!ma(Yn))throw Error("Invalid component class "+Yn);if(!ma(Jn))throw Error("Invalid renderer class "+Jn);var bo=oa(Yn);In[bo]=Jn;Gn("goog-control",function(){return new Yn(null)});function co(){this.VA=[]}w(co,Jn);ga(co);function eo(a,b){var c=a.VA[b];if(!c){switch(b){case 0:c=a.P()+"-highlight";break;case 1:c=a.P()+"-checkbox";break;case 2:c=a.P()+"-content"}a.VA[b]=c}return c}f=co.prototype;f.wh=function(){return"menuitem"};f.r=function(a){var b=a.H().r("div",this.Al(a).join(" "),fo(this,a.xe(),a.H()));go(this,a,b,Qn(a,8)||Qn(a,16));return b};f.fb=function(a){return a&&a.firstChild};
f.Eb=function(a,b){var c=Xh(b),d=eo(this,2);c&&Lj(c,d)||b.appendChild(fo(this,b.childNodes,a.H()));Lj(b,"goog-option")&&(a.yt(!0),this.yt(a,b,!0));return co.c.Eb.call(this,a,b)};f.rk=function(a,b){var c=this.fb(a),d=ho(this,a)?c.firstChild:null;co.c.rk.call(this,a,b);d&&!ho(this,a)&&c.insertBefore(d,c.firstChild||null)};function fo(a,b,c){a=eo(a,2);return c.r("div",a,b)}f.OE=function(a,b,c){a&&b&&go(this,a,b,c)};f.yt=function(a,b,c){a&&b&&go(this,a,b,c)};
function ho(a,b){var c=a.fb(b);if(c){var c=c.firstChild,d=eo(a,1);return!!c&&$h(c)&&Lj(c,d)}return!1}function go(a,b,c,d){Pn(a,c,b.Xj());Mn(a,b,c);d!=ho(a,c)&&(Qj(c,"goog-option",d),c=a.fb(c),d?(a=eo(a,1),c.insertBefore(b.H().r("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.dp=function(a){switch(a){case 2:return eo(this,0);case 16:case 8:return"goog-option-selected";default:return co.c.dp.call(this,a)}};
f.Zv=function(a){var b=eo(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return co.c.Zv.call(this,a)}};f.P=function(){return"goog-menuitem"};function io(a,b,c,d){Yn.call(this,a,d||co.ye(),c);this.F(b)}w(io,Yn);f=io.prototype;f.I=function(){var a=this.Ow;return null!=a?a:this.cs()};f.F=function(a){this.Ow=a};f.md=function(a,b){io.c.md.call(this,a,b);switch(a){case 8:this.jk()&&!b&&this.Yf(!1);var c=this.a();c&&this.Ab().OE(this,c,b);break;case 16:(c=this.a())&&this.Ab().yt(this,c,b)}};f.OE=function(a){this.md(8,a)};f.yt=function(a){this.md(16,a)};
f.cs=function(){var a=this.xe();return h(a)?(a=Bb(a,function(a){return $h(a)&&(Lj(a,"goog-menuitem-accel")||Lj(a,"goog-menuitem-mnemonic-separator"))?"":ki(a)}).join(""),Ga(a)):io.c.cs.call(this)};f.Kg=function(a){var b=this.getParent();if(b){var c=b.WD;b.WD=null;if(b=c&&la(a.clientX))b=new sh(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}io.c.Kg.call(this,a)};f.Jg=function(a){return a.keyCode==this.AD&&this.Tl(a)?!0:io.c.Jg.call(this,a)};f.fK=function(){return this.AD};
Gn("goog-menuitem",function(){return new io(null)});io.prototype.Xj=function(){return Qn(this,16)?"menuitemcheckbox":Qn(this,8)?"menuitemradio":io.c.Xj.call(this)};function jo(a){this.DA=a}ga(jo);f=jo.prototype;f.wh=function(){return this.DA};function ko(a,b){a&&(a.tabIndex=b?0:-1)}f.r=function(a){return a.H().r("div",this.Al(a).join(" "))};f.fb=function(a){return a};f.af=function(a){return"DIV"==a.tagName};f.Eb=function(a,b){b.id&&xj(a,b.id);var c=this.P(),d=!1,e=Kj(b);e&&N(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.uc(!1):b==c+"-horizontal"?a.Vi(lo):b==c+"-vertical"&&a.Vi(mo))},this);d||Mj(b,c);no(this,a,this.fb(b));return b};
function no(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var g=a.Qv(d);g&&(g.l=d,b.isEnabled()||g.uc(!1),b.Eo(g),g.Eb(d))}else d.nodeValue&&""!=Ha(d.nodeValue)||c.removeChild(d);d=e}}f.Qv=function(a){a:{var b;a=Kj(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Hn?Hn[b]():null){a=b;break a}a=null}return a};f.un=function(a){a=a.a();Ti(a,!0,ic);hc&&(a.hideFocus=!0);var b=this.wh();b&&Sj(a,b)};f.pc=function(a){return a.a()};f.P=function(){return"goog-container"};
f.Al=function(a){var b=this.P(),c=[b,a.bc()==lo?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function oo(){}w(oo,Jn);ga(oo);oo.prototype.r=function(a){return a.H().r("div",this.P())};oo.prototype.Eb=function(a,b){b.id&&xj(a,b.id);if("HR"==b.tagName){var c=b;b=this.r(a);Vh(b,c);Y(c)}else Mj(b,this.P());return b};oo.prototype.rk=function(){};oo.prototype.P=function(){return"goog-menuseparator"};function po(a,b){Yn.call(this,null,a||oo.ye(),b);this.md(1,!1);this.md(2,!1);this.md(4,!1);this.md(32,!1);this.J=1}w(po,Yn);po.prototype.eb=function(){po.c.eb.call(this);Sj(this.a(),"separator")};Gn("goog-menuseparator",function(){return new po});function qo(a){this.DA=a||"menu"}w(qo,jo);ga(qo);f=qo.prototype;f.af=function(a){return"UL"==a.tagName||qo.c.af.call(this,a)};f.Qv=function(a){return"HR"==a.tagName?new po:qo.c.Qv.call(this,a)};f.jl=function(a,b){return ai(a.a(),b)};f.P=function(){return"goog-menu"};f.un=function(a){qo.c.un.call(this,a);Tj(a.a(),"haspopup","true")};function ro(a,b,c,d,e,g,k,l,n){var m,q;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==vi(m)||(q=Di(m),p||(p=(p=Ei(m))&&ic?-m.scrollLeft:!p||hc&&qc("8")||"visible"==ui(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,q=th(q,new sh(p,m.scrollTop))))}m=q||new sh;q=Oi(a);(p=Ci(a))&&q.aD(new xh(p.left,p.top,p.right-p.left,p.bottom-p.top));var p=Dh(a),r=Dh(c);if(p.qa!=r.qa){var s=p.qa.body,r=pi(r),z=new sh(0,0),y=Ph(Fh(s)),F=s;do{var D=y==r?Di(F):Hi(F);
z.x+=D.x;z.y+=D.y}while(y&&y!=r&&(F=y.frameElement)&&(y=y.parent));s=th(z,Di(s));hc&&!oi(p)&&(s=th(s,qi(p)));q.left+=s.x;q.top+=s.y}a=so(a,b);b=new sh(a&2?q.left+q.width:q.left,a&1?q.top+q.height:q.top);b=th(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var O;if(k)if(n)O=n;else if(O=Ci(c))O.top-=m.y,O.right-=m.x,O.bottom-=m.y,O.left-=m.x;return to(b,c,d,g,O,k,l)}
function to(a,b,c,d,e,g,k){a=a.clone();var l=0,n=so(b,c);c=Mi(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(g&&(e?(l=a,d=0,65==(g&65)&&(l.x<e.left||l.x>=e.right)&&(g&=-2),132==(g&132)&&(l.y<e.top||l.y>=e.bottom)&&(g&=-5),l.x<e.left&&g&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&g&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&g&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),g&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&g&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&g&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&g&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&g&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),g&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;wi(b,a);wh(c,k)||(e=oi(Dh(Fh(b))),!hc||e&&qc("8")?
(b=b.style,ic?b.MozBoxSizing="border-box":jc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=Wi(b,"padding"),b=Zi(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function so(a,b){return(b&4&&Ei(a)?b^2:b)&-5};var uo,vo;vo=uo=!1;var wo=Tb;wo&&(-1!=wo.indexOf("Firefox")||-1!=wo.indexOf("Camino")||(-1!=wo.indexOf("iPhone")||-1!=wo.indexOf("iPod")?uo=!0:-1!=wo.indexOf("iPad")&&(vo=!0)));var xo=uo,yo=vo;Gn("goog-menuseparator",function(){return new po});function zo(a,b,c){tj.call(this,c);this.ta=b||jo.ye();this.Ga=a||mo}w(zo,tj);var lo="horizontal",mo="vertical";f=zo.prototype;f.sw=null;f.qb=null;f.ta=null;f.Ga=null;f.Gc=!0;f.Pc=!0;f.Nv=!0;f.gf=-1;f.Ec=null;f.Li=!1;f.RH=!1;f.LN=!0;f.ri=null;f.pc=function(){return this.sw||this.ta.pc(this)};f.es=function(){return this.qb||(this.qb=new Sn(this.pc()))};f.Ab=function(){return this.ta};f.r=function(){this.l=this.ta.r(this)};f.fb=function(){return this.ta.fb(this.a())};f.af=function(a){return this.ta.af(a)};
f.se=function(a){this.l=this.ta.Eb(this,a);"none"==a.style.display&&(this.Gc=!1)};f.eb=function(){zo.c.eb.call(this);zj(this,function(a){a.ga&&Ao(this,a)},this);var a=this.a();this.ta.un(this);this.ea(this.Gc,!0);this.gb().s(this,"enter",this.dw).s(this,"highlight",this.ew).s(this,"unhighlight",this.fw).s(this,"open",this.lL).s(this,"close",this.cL).s(a,"mousedown",this.Ah).s(Fh(a),"mouseup",this.eL).s(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.bL);this.Fi()&&Bo(this,!0)};
function Bo(a,b){var c=a.gb(),d=a.pc();b?c.s(d,"focus",a.Fl).s(d,"blur",a.El).s(a.es(),"key",a.zh):c.rb(d,"focus",a.Fl).rb(d,"blur",a.El).rb(a.es(),"key",a.zh)}f.Cc=function(){this.Nh(-1);this.Ec&&this.Ec.ec(!1);this.Li=!1;zo.c.Cc.call(this)};f.e=function(){zo.c.e.call(this);this.qb&&(this.qb.g(),this.qb=null);this.ta=this.Ec=this.ri=this.sw=null};f.dw=function(){return!0};
f.ew=function(a){var b=Cj(this,a.target);if(-1<b&&b!=this.gf){var c=Co(this);c&&c.Wg(!1);this.gf=b;c=Co(this);this.Li&&c.setActive(!0);this.LN&&this.Ec&&c!=this.Ec&&(Qn(c,64)?c.ec(!0):this.Ec.ec(!1))}b=this.a();null!=a.target.a()&&Tj(b,"activedescendant",a.target.a().id)};f.fw=function(a){a.target==Co(this)&&(this.gf=-1);this.a().removeAttribute("aria-activedescendant")};f.lL=function(a){(a=a.target)&&a!=this.Ec&&a.getParent()==this&&(this.Ec&&this.Ec.ec(!1),this.Ec=a)};
f.cL=function(a){a.target==this.Ec&&(this.Ec=null)};f.Ah=function(a){this.Pc&&(this.Li=!0);var b=this.pc();b&&gi(b)&&hi(b)?b.focus():a.preventDefault()};f.eL=function(){this.Li=!1};f.bL=function(a){var b;a:{b=a.target;if(this.ri)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.ri){b=this.ri[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Ah(a);break;case "mouseup":b.Kg(a);break;case "mouseover":b.Hl(a);break;case "mouseout":b.ns(a);break;case "contextmenu":b.lp(a)}};
f.Fl=function(){};f.El=function(){this.Nh(-1);this.Li=!1;this.Ec&&this.Ec.ec(!1)};f.zh=function(a){return this.isEnabled()&&this.Ja()&&(0!=Aj(this)||this.sw)&&this.Jg(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.Jg=function(a){var b=Co(this);if(b&&"function"==typeof b.zh&&b.zh(a)||this.Ec&&this.Ec!=b&&"function"==typeof this.Ec.zh&&this.Ec.zh(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.Fi())this.pc().blur();else return!1;break;case 36:Do(this);break;case 35:Eo(this);break;case 38:if(this.Ga==mo)Fo(this);else return!1;break;case 37:if(this.Ga==lo)this.jf()?Go(this):Fo(this);else return!1;break;case 40:if(this.Ga==mo)Go(this);else return!1;break;case 39:if(this.Ga==
lo)this.jf()?Fo(this):Go(this);else return!1;break;default:return!1}return!0};function Ao(a,b){var c=b.a(),c=c.id||(c.id=wj(b));a.ri||(a.ri={});a.ri[c]=b}f.Eo=function(a,b){zo.c.Eo.call(this,a,b)};f.Ju=function(a,b,c){a.wq|=2;a.wq|=64;!this.Fi()&&this.RH||a.md(32,!1);a.hq(!1);zo.c.Ju.call(this,a,b,c);a.ga&&this.ga&&Ao(this,a);b<=this.gf&&this.gf++};
f.removeChild=function(a,b){if(a=ja(a)?yj(this,a):a){var c=Cj(this,a);-1!=c&&(c==this.gf?(a.Wg(!1),this.gf=-1):c<this.gf&&this.gf--);(c=a.a())&&c.id&&this.ri&&sb(this.ri,c.id)}a=zo.c.removeChild.call(this,a,b);a.hq(!0);return a};f.bc=function(){return this.Ga};f.Vi=function(a){if(this.a())throw Error("Component already rendered");this.Ga=a};f.Ja=function(){return this.Gc};
f.ea=function(a,b){if(b||this.Gc!=a&&this.dispatchEvent(a?"show":"hide")){this.Gc=a;var c=this.a();c&&(Qi(c,a),this.Fi()&&ko(this.pc(),this.Pc&&this.Gc),b||this.dispatchEvent(this.Gc?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Pc};
f.uc=function(a){this.Pc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Pc=!0,zj(this,function(a){a.MF?delete a.MF:a.uc(!0)})):(zj(this,function(a){a.isEnabled()?a.uc(!1):a.MF=!0}),this.Li=this.Pc=!1),this.Fi()&&ko(this.pc(),a&&this.Gc))};f.Fi=function(){return this.Nv};f.tk=function(a){a!=this.Nv&&this.ga&&Bo(this,a);this.Nv=a;this.Pc&&this.Gc&&ko(this.pc(),a)};f.Nh=function(a){(a=Bj(this,a))?a.Wg(!0):-1<this.gf&&Co(this).Wg(!1)};f.Wg=function(a){this.Nh(Cj(this,a))};
function Co(a){return Bj(a,a.gf)}function Do(a){Ho(a,function(a,c){return(a+1)%c},Aj(a)-1)}function Eo(a){Ho(a,function(a,c){a--;return 0>a?c-1:a},0)}function Go(a){Ho(a,function(a,c){return(a+1)%c},a.gf)}function Fo(a){Ho(a,function(a,c){a--;return 0>a?c-1:a},a.gf)}function Ho(a,b,c){c=0>c?Cj(a,a.Ec):c;var d=Aj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var g=Bj(a,c);if(g&&a.PA(g)){a.Nh(c);break}e++;c=b.call(a,c,d)}}f.PA=function(a){return a.Ja()&&a.isEnabled()&&Qn(a,2)};function Io(){}w(Io,Jn);ga(Io);Io.prototype.P=function(){return"goog-menuheader"};function Jo(a,b,c){Yn.call(this,a,c||Io.ye(),b);this.md(1,!1);this.md(2,!1);this.md(4,!1);this.md(32,!1);this.J=1}w(Jo,Yn);Gn("goog-menuheader",function(){return new Jo(null)});function Ko(a,b){zo.call(this,mo,b||qo.ye(),a);this.tk(!1)}w(Ko,zo);f=Ko.prototype;f.Ou=!0;f.SH=!1;f.P=function(){return this.Ab().P()};f.jl=function(a){if(this.Ab().jl(this,a))return!0;for(var b=0,c=Aj(this);b<c;b++){var d=Bj(this,b);if("function"==typeof d.jl&&d.jl(a))return!0}return!1};f.dl=function(a){this.Eo(a,!0)};f.Ux=function(a,b){var c=this.Ja();c||Qi(this.a(),!0);var d=this.a(),e=a,g=b,k=Di(d);e instanceof sh&&(g=e.y,e=e.x);wi(d,d.offsetLeft+(e-k.x),d.offsetTop+(g-k.y));c||Qi(this.a(),!1)};
f.ea=function(a,b,c){(b=Ko.c.ea.call(this,a,b))&&a&&this.ga&&this.Ou&&this.pc().focus();this.WD=a&&c&&la(c.clientX)?new sh(c.clientX,c.clientY):null;return b};f.dw=function(a){this.Ou&&this.pc().focus();return Ko.c.dw.call(this,a)};f.PA=function(a){return(this.SH||a.isEnabled())&&a.Ja()&&Qn(a,2)};f.se=function(a){var b=this.Ab(),c;c=this.H();c=Ih(c.qa,"div",b.P()+"-content",a);for(var d=c.length,e=0;e<d;e++)no(b,this,c[e]);Ko.c.se.call(this,a)};
f.Jg=function(a){var b=Ko.c.Jg.call(this,a);b||zj(this,function(c){!b&&c.fK&&c.AD==a.keyCode&&(this.isEnabled()&&this.Wg(c),b=c.zh(a))},this);return b};f.Nh=function(a){Ko.c.Nh.call(this,a);var b=Bj(this,a);if(b){a=this.a();var b=b.a(),c=Di(b),d=Di(a),e=Zi(a),g=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(g,Math.max(g-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new sh(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Lo(){}Lo.prototype.ce=function(){};function Mo(a,b,c){this.element=a;this.No=b;this.ON=c}w(Mo,Lo);Mo.prototype.ce=function(a,b,c){ro(this.element,this.No,a,b,void 0,c,this.ON)};function No(a,b,c,d){Mo.call(this,a,b);this.Js=c?5:0;this.yx=d||void 0}w(No,Mo);No.prototype.TJ=function(){return this.Js};No.prototype.ce=function(a,b,c,d){var e=ro(this.element,this.No,a,b,null,c,10,d,this.yx);if(e&496){var g=Oo(e,this.No);b=Oo(e,b);e=ro(this.element,g,a,b,null,c,10,d,this.yx);e&496&&(g=Oo(e,g),b=Oo(e,b),ro(this.element,g,a,b,null,c,this.Js,d,this.yx))}};function Oo(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Po(a,b,c,d){No.call(this,a,b,c||d);if(c||d)this.Js=65|(d?32:132)}w(Po,No);function Qo(){}w(Qo,Jn);ga(Qo);f=Qo.prototype;f.wh=function(){return"button"};f.Vh=function(a,b,c){switch(b){case 8:case 16:Tj(a,"pressed",c);break;default:case 64:case 1:Qo.c.Vh.call(this,a,b,c)}};f.r=function(a){var b=Qo.c.r.call(this,a);this.Gt(b,a.jp());var c=a.I();c&&this.F(b,c);Qn(a,16)&&this.Vh(b,16,a.jk());return b};f.Eb=function(a,b){b=Qo.c.Eb.call(this,a,b);var c=this.I(b);a.$g=c;a.qy=this.jp(b);Qn(a,16)&&this.Vh(b,16,a.jk());return b};f.I=fa;f.F=fa;f.jp=function(a){return a.title};
f.Gt=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.zt=function(a,b){var c=a.jf(),d=this.P()+"-collapse-left",e=this.P()+"-collapse-right";a.wl(c?e:d,!!(b&1));a.wl(c?d:e,!!(b&2))};f.P=function(){return"goog-button"};function Ro(){}w(Ro,Qo);ga(Ro);f=Ro.prototype;f.wh=function(){};f.r=function(a){a.hq(!1);a.Go&=-256;a.md(32,!1);return a.H().r("button",{"class":this.Al(a).join(" "),disabled:!a.isEnabled(),title:a.jp()||"",value:a.I()||""},a.cs()||"")};f.af=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.Eb=function(a,b){a.hq(!1);a.Go&=-256;a.md(32,!1);if(b.disabled){var c=this.dp(1);Mj(b,c)}return Ro.c.Eb.call(this,a,b)};
f.un=function(a){a.gb().s(a.a(),"click",a.Tl)};f.eq=fa;f.Mn=fa;f.Fi=function(a){return a.isEnabled()};f.tk=fa;f.vc=function(a,b,c){Ro.c.vc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.I=function(a){return a.value};f.F=function(a,b){a&&(a.value=b)};f.Vh=fa;function So(a,b,c){Yn.call(this,a,b||Ro.ye(),c)}w(So,Yn);f=So.prototype;f.I=function(){return this.$g};f.F=function(a){this.$g=a;this.Ab().F(this.a(),a)};f.jp=function(){return this.qy};f.Gt=function(a){this.qy=a;this.Ab().Gt(this.a(),a)};f.zt=function(a){this.Ab().zt(this,a)};f.e=function(){So.c.e.call(this);delete this.$g;delete this.qy};f.eb=function(){So.c.eb.call(this);if(Qn(this,32)){var a=this.pc();a&&this.gb().s(a,"keyup",this.Jg)}};
f.Jg=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Tl(a):32==a.keyCode};Gn("goog-button",function(){return new So(null)});function To(){}w(To,Qo);ga(To);f=To.prototype;f.r=function(a){var b={"class":"goog-inline-block "+this.Al(a).join(" ")},b=a.H().r("div",b,this.Or(a.xe(),a.H()));this.Gt(b,a.jp());Mn(this,a,b);return b};f.wh=function(){return"button"};f.fb=function(a){return a&&a.firstChild.firstChild};f.Or=function(a,b){return b.r("div","goog-inline-block "+(this.P()+"-outer-box"),b.r("div","goog-inline-block "+(this.P()+"-inner-box"),a))};f.af=function(a){return"DIV"==a.tagName};
f.Eb=function(a,b){Uo(b,!0);Uo(b,!1);var c;a:{c=a.H().aC(b);var d=this.P()+"-outer-box";if(c&&Lj(c,d)&&(c=a.H().aC(c),d=this.P()+"-inner-box",c&&Lj(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Or(b.childNodes,a.H()));Nj(b,["goog-inline-block",this.P()]);return To.c.Eb.call(this,a,b)};f.P=function(){return"goog-custom-button"};
function Uo(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ha(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Vo(){}w(Vo,To);ga(Vo);f=Vo.prototype;f.fb=function(a){return Vo.c.fb.call(this,a&&a.firstChild)};f.Eb=function(a,b){var c=Hh("*","goog-menu",b)[0];if(c){Qi(c,!1);Fh(c).body.appendChild(c);var d=new Ko;d.Eb(c);Wo(a,d)}return Vo.c.Eb.call(this,a,b)};f.Or=function(a,b){return Vo.c.Or.call(this,[this.createCaption(a,b),b.r("div","goog-inline-block "+(this.P()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.r("div","goog-inline-block "+(this.P()+"-caption"),a)};f.P=function(){return"goog-menu-button"};function Xo(a,b,c,d,e){So.call(this,a,c||Vo.ye(),d);this.md(64,!0);this.Ps=new Po(null,5);b&&Wo(this,b);this.hM=null;this.fc=new Sf(500);!xo&&!yo||qc("533.17.9")||(this.As=!0);this.iM=e||qo.ye()}w(Xo,So);f=Xo.prototype;f.As=!1;f.pO=!1;f.eb=function(){Xo.c.eb.call(this);Yo(this,!0);this.N&&Zo(this,this.N,!0);Tj(this.l,"haspopup",!!this.N)};f.Cc=function(){Xo.c.Cc.call(this);Yo(this,!1);if(this.N){this.ec(!1);this.N.Cc();Zo(this,this.N,!1);var a=this.N.a();a&&Y(a)}};
f.e=function(){Xo.c.e.call(this);this.N&&(this.N.g(),delete this.N);delete this.UN;this.fc.g()};f.Ah=function(a){Xo.c.Ah.call(this,a);this.Ch()&&(this.ec(!(this.J&64),a),this.N&&(this.N.Li=!!(this.J&64)))};f.Kg=function(a){Xo.c.Kg.call(this,a);this.N&&!this.Ch()&&(this.N.Li=!1)};f.Tl=function(){this.setActive(!1);return!0};f.dL=function(a){this.N&&this.N.Ja()&&!this.jl(a.target)&&this.ec(!1)};f.jl=function(a){return a&&ai(this.a(),a)||this.N&&this.N.jl(a)||!1};
f.Jg=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.N&&this.N.Ja()){var b=this.N.zh(a);return 27==a.keyCode?(this.ec(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.ec(!0,a),!0):!1};f.iL=function(){this.ec(!1)};f.jL=function(){this.Ch()||this.ec(!1)};f.El=function(a){this.As||this.ec(!1);Xo.c.El.call(this,a)};f.Xv=function(){this.N||Wo(this,new Ko(this.H(),this.iM));return this.N||null};
function Wo(a,b){var c=a.N;b!=c&&(c&&(a.ec(!1),a.ga&&Zo(a,c,!1),delete a.N),a.ga&&Tj(a.l,"haspopup",!!b),b&&(a.N=b,b.iq(a),b.ea(!1),c=a.As,(b.Ou=c)&&b.tk(!0),a.ga&&Zo(a,b,!0)))}f.dl=function(a){this.Xv().Eo(a,!0)};f.ea=function(a,b){var c=Xo.c.ea.call(this,a,b);c&&!this.Ja()&&this.ec(!1);return c};f.uc=function(a){Xo.c.uc.call(this,a);this.isEnabled()||this.ec(!1)};f.Xx=function(){this.ec(!0)};f.mp=function(){this.ec(!1)};
f.ec=function(a,b){Xo.c.ec.call(this,a);if(this.N&&!!(this.J&64)==a){if(a){if(!this.N.ga)if(this.pO){var c=Zh(this.a());c?this.N.Kh(c.parentNode,c):this.N.k(this.a().parentNode)}else this.N.k();this.IF=Ci(this.a());this.NA=Oi(this.a());$o(this);this.N.Nh(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.N.Li=!1;if(c=this.a())Tj(c,"activedescendant",""),Tj(c,"owns","");null!=this.et&&(this.et=void 0,(c=this.N.a())&&Ji(c,"",""))}this.N.ea(a,!1,b);if(!this.ql){var c=this.gb(),d=a?c.s:
c.rb;d.call(c,ni(this.H()),"mousedown",this.dL,!0);this.As&&d.call(c,this.N,"blur",this.jL);d.call(c,this.fc,Tf,this.rN);a?this.fc.start():this.fc.stop()}}};function $o(a){if(a.N.ga){var b=a.Ps;a.Ps.element=a.UN||a.a();var c=a.N.a();a.N.Ja()||(c.style.visibility="hidden",Qi(c,!0));!a.et&&a.Ps.TJ&&a.Ps.Js&32&&(a.et=Mi(c));b.ce(c,b.No^1,a.hM,a.et);a.N.Ja()||(Qi(c,!1),c.style.visibility="visible")}}
f.rN=function(){var a=Oi(this.a()),b=Ci(this.a()),c=this.NA;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.IF,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.NA=a,this.IF=b,$o(this))};function Zo(a,b,c){var d=a.gb();c=c?d.s:d.rb;c.call(d,b,"action",a.iL);c.call(d,b,"highlight",a.ew);c.call(d,b,"unhighlight",a.fw)}function Yo(a,b){var c=a.gb();(b?c.s:c.rb).call(c,a.a(),"keydown",a.gL)}
f.ew=function(a){var b=this.a();if(a=a.target.a()){var c=Uj(a,"activedescendant");a=Fh(a).getElementById(c)||a;a.id||(c=sj.ye(),a.id=":"+(c.KD++).toString(36));c="";a&&(c=a.id);Tj(b,"activedescendant",c);Tj(b,"owns",a.id)}};f.gL=function(a){Qn(this,32)&&this.pc()&&this.N&&this.N.Ja()&&a.stopPropagation()};f.fw=function(){if(!Co(this.N)){var a=this.a();Tj(a,"activedescendant","");Tj(a,"owns","")}};Gn("goog-menu-button",function(){return new Xo(null)});function ap(){Z.call(this);this.hf=W("div",{id:this.constructor.ID_PREFIX+"_Holder_"+C(),"class":ap.CSS.wG});Th(this.a(),this.hf);this.Il=W("img",{id:this.constructor.ID_PREFIX+"_Icon_"+C(),"class":ap.CSS.mb});Th(this.a(),this.Il);this.N=new Ko;this.Zc=new il;this.Wd=[];bp(this);this.mp(void 0,0);this.N.k(this.hf);S(this.N.a(),ap.CSS.vG)}w(ap,Z);t("nrg.ui.SlideInMenu",ap);ap.ID_PREFIX="nrg.ui.SlideInMenu";
ap.CSS_SUFFIX={mb:"icon",eQ:"icon-hovered",vG:"menu",wG:"menuholder",xG:"menuitem",ez:"menuitem-highlight",yG:"menuitem-icon"};var cp={$t:null,$h:null,mb:null};function dp(a,b,c,d){d=ca(d)?d:500;return[new dl(a,d),new Yk(a,b,c,d,wl)]}function ep(a,b,c,d){d=ca(d)?d:700;return[new cl(a,d),new Yk(a,b,c,d,wl)]}f=ap.prototype;f.rc=null;f.ZD=null;f.So=null;f.Fn=!1;f.np=[-100,-100];f.tq=[0,0];f.Hw=!0;f.Iw=!0;f.zE=function(a,b){return this.np=[a,b]};f.RE=function(a,b){return this.tq=[a,b]};f.NJ=function(){return this.np};
f.xK=function(){return this.tq};f.Xv=function(){return this.N};f.aK=function(){return this.hf};f.bK=function(){return this.Il};f.FE=function(a){this.Il.src=a};f.DO=function(a,b){this.rc[a].mb.src=b};f.eC=function(a){return mb(this.rc).indexOf(a)};f.aw=function(a){return mb(this.rc)[a]};f.Uv=function(a){return this.rc[mb(this.rc)[a]]};f.tD=function(a){return this.Hw=a};f.uD=function(a){return this.Iw=a};f.vK=function(){return this.So};
function fp(a){null!=a.Zc&&(a.Zc.stop(),N(a.Wd,function(a){this.Zc.remove(a);a.g()}.bind(a)),Hb(a.Wd))}function gp(a,b,c){fp(a);N(h(b)?b:[b],function(a){this.Zc.add(a);this.Wd.push(a)}.bind(a));a.hf.style.visibility="visible";Tc(a.Zc,"end",function(){c&&c()}.bind(a));a.Zc.play()}f.dn=null;function hp(a){null!=a.dn&&(ba.clearTimeout(a.dn),a.dn=null);a.dn=Uf(function(){this.dn=null;this.Fn&&(!this.Qw&&this.Fn?this.mp():hp(this))}.bind(a),450)}
f.Nh=function(a){S(this.rc[this.aw(a)].$h,ap.CSS.ez);this.Hw&&(this.Il.src=this.rc[this.aw(a)].mb.src);this.Iw&&(this.a().title=this.Uv(a).$t.xe())};f.qB=function(){I(this.rc,function(a){ph(a.$h,ap.CSS.ez)}.bind(this))};
f.eA=function(a,b){null==this.rc&&(this.rc={});a=ja(a)?[a]:a;b=b||[];b=h(b)?b:[b];var c=null,d=null,e=null;N(a,function(a,k){if(this.rc[a])throw Error(a+" is already in use!");c=new io(a);this.N.dl(c);d=c.fb();S(d,ap.CSS.xG);d.title=a;e=W("img",{id:ap.ID_PREFIX+"_MenuItemIcon_"+C(),"class":ap.CSS.yG});e.src=k<=b.length-1?b[k]:null;Th(d,e);this.rc[a]=ub(cp);this.rc[a].$t=c;this.rc[a].$h=d;this.rc[a].mb=e}.bind(this))};
f.lq=function(a,b){var c=a;if(ja(c)){if(!this.rc[c])throw Error(c+" does not exist!");c=this.eC(c)}this.ZD=this.So?this.So:a;this.So=a;ca(b)&&!b||this.qB();this.Nh(c);this.dispatchEvent({type:"item_selected",index:c,title:this.Uv(c).$t.xe()})};f.Xx=function(a,b){gp(this,dp(this.hf,this.np,this.tq,b),function(){this.Fn=!0;null!=a&&a()}.bind(this))};f.mp=function(a,b){gp(this,ep(this.hf,this.tq,this.np,b),function(){this.Fn=!1;this.hf.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function bp(a){P(a.a(),"click",function(){this.Fn?this.mp():this.Xx()}.bind(a));P(a.N,"action",function(a){this.lq(a.target.xe())}.bind(a));P(a.hf,"mouseover",function(){this.Qw=!0}.bind(a));P(a.hf,"mouseout",function(){this.Qw=!1;hp(this)}.bind(a))}
f.e=function(){ap.c.e.call(this);delete this.Qw;delete this.dn;fp(this);Hb(this.Wd);delete this.Wd;I(this.rc,function(a,b){Wc(a);Y(a);delete this.rc[b]}.bind(this));qb(this.rc);delete this.rc;Y(this.hf);delete this.hf;Y(this.Il);delete this.Il;Wc(this.N);this.N.g();this.Ur(this.Zc);delete this.Zc;delete this.ZD;delete this.So;delete this.Fn;delete this.np;delete this.tq;delete this.Hw;delete this.Iw};t("nrg.ui.SlideInMenu.ID_PREFIX",ap.ID_PREFIX);t("nrg.ui.SlideInMenu.EventType",{jQ:"item_selected"});
t("nrg.ui.SlideInMenu.CSS_SUFFIX",ap.CSS_SUFFIX);t("nrg.ui.SlideInMenu.menuItemCollection",cp);t("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);t("nrg.ui.SlideInMenu.ANIM_LEN_IN",500);t("nrg.ui.SlideInMenu.ANIM_LEN_OUT",700);t("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1500);t("nrg.ui.SlideInMenu.prototype.setHidePosition",ap.prototype.zE);t("nrg.ui.SlideInMenu.prototype.setShowPosition",ap.prototype.RE);t("nrg.ui.SlideInMenu.prototype.getHidePosition",ap.prototype.NJ);
t("nrg.ui.SlideInMenu.prototype.getShowPosition",ap.prototype.xK);t("nrg.ui.SlideInMenu.prototype.getMenu",ap.prototype.Xv);t("nrg.ui.SlideInMenu.prototype.getMenuHolder",ap.prototype.aK);t("nrg.ui.SlideInMenu.prototype.getMenuIcon",ap.prototype.bK);t("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",ap.prototype.FE);t("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",ap.prototype.DO);t("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",ap.prototype.eC);
t("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",ap.prototype.aw);t("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",ap.prototype.Uv);t("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",ap.prototype.tD);t("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",ap.prototype.uD);t("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",ap.prototype.vK);t("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",ap.prototype.Nh);t("nrg.ui.SlideInMenu.prototype.deselectAll",ap.prototype.qB);
t("nrg.ui.SlideInMenu.prototype.addMenuItem",ap.prototype.eA);t("nrg.ui.SlideInMenu.prototype.setSelected",ap.prototype.lq);t("nrg.ui.SlideInMenu.prototype.showMenu",ap.prototype.Xx);t("nrg.ui.SlideInMenu.prototype.hideMenu",ap.prototype.mp);t("nrg.ui.SlideInMenu.prototype.disposeInternal",ap.prototype.e);dn.uy={};dn.uy.TL={};dn.uy.TL.vT={};function ip(){Z.call(this)}w(ip,Z);t("xiv.ui.layouts.interactors.InputController",ip);ip.ID_PREFIX="xiv.ui.layouts.interactors.InputController";ip.CSS_SUFFIX={oG:"inputbox",hQ:"inputbox-hovered",Ny:"display"};f=ip.prototype;f.Fg=null;f.Ta=null;f.DL=!1;f.I=function(){if(null!=this.Ta)return this.Ta.value};f.F=function(a){null!=this.Ta&&(this.Ta.value=a,this.Xh())};f.Hd=function(a){null!=this.Ta&&(this.Ta.max=a,this.Xh())};
f.Fe=function(a){null!=this.Ta&&(this.Ta.min=a,this.Xh())};f.Xh=function(){};f.QD=function(a){this.Ta.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.Ta.value});this.Xh()};
f.k=function(a){ip.c.k.call(this,a);this.Fg=W("div");this.a().appendChild(this.Fg);S(this.Fg,ip.CSS.Ny);this.Ta=W("input");this.Ta.type="number";this.Ta.step=1;this.Ta.min=0;this.Ta.value=0;this.a().appendChild(this.Ta);S(this.Ta,ip.CSS.oG);P(this.Ta,"mouseenter",function(a){a.stopPropagation();this.Ta.style.opacity=1;this.Fg.style.opacity=0}.bind(this));P(this.Ta,"mouseleave",function(a){a.stopPropagation();this.Ta.style.opacity=0;this.Fg.style.opacity=1}.bind(this));P(this.Ta,"input",this.QD.bind(this));
this.Xh()};f.e=function(){ip.c.e.call(this);delete this.DL;this.Ta&&(Wc(this.Ta),Y(this.Ta),delete this.Ta);this.Fg&&(Wc(this.Fg),Y(this.Fg),delete this.Fg)};t("xiv.ui.layouts.interactors.InputController.EventType",{gQ:"input",Ny:"display"});t("xiv.ui.layouts.interactors.InputController.ID_PREFIX",ip.ID_PREFIX);t("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",ip.CSS_SUFFIX);t("xiv.ui.layouts.interactors.InputController.prototype.getValue",ip.prototype.I);
t("xiv.ui.layouts.interactors.InputController.prototype.setValue",ip.prototype.F);t("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",ip.prototype.Hd);t("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",ip.prototype.Fe);t("xiv.ui.layouts.interactors.InputController.prototype.updateValue",ip.prototype.Xh);t("xiv.ui.layouts.interactors.InputController.prototype.onInput",ip.prototype.QD);t("xiv.ui.layouts.interactors.InputController.prototype.render",ip.prototype.k);
t("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",ip.prototype.e);function jp(){Z.call(this)}w(jp,ip);t("xiv.ui.layouts.interactors.FrameDisplay",jp);jp.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";jp.prototype.Xh=function(){this.Fg.innerHTML=this.Ta.value+" / "+this.Ta.max};t("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",jp.ID_PREFIX);t("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",jp.prototype.Xh);t("nrg.array",function(){});t("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,g,k;g=(k=a.charAt(c++)).charCodeAt(0);)g=46==g||48<=g&&57>=g,g!==e&&(b[++d]="",e=g),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var g=Number(d[x]),k=Number(e[x]);return g==d[x]&&k==e[x]?g-k:d[x]>e[x]?1:-1}return d.length-e.length});function kp(a,b,c){this.uf=this.tf=this.sf=0;3==arguments.length?(this.sf=Number(a),this.tf=Number(b),this.uf=Number(c)):a instanceof kp?(this.sf=Number(a.x()),this.tf=Number(a.y()),this.uf=Number(a.z())):(this.sf=Number(a[0]),this.tf=Number(a[1]),this.uf=Number(a[2]))}
kp.prototype={clone:function(){return new kp(this.sf,this.tf,this.uf)},Lj:function(a){return this.sf*a.x()+this.tf*a.y()+this.uf*a.z()},Ls:function(a,b){return lp(this,mp(np(a,this),b))},length:function(){return Math.sqrt(this.Lj(this))},ol:function(a){return new kp(this.tf*a.z()-this.uf*a.y(),this.uf*a.x()-this.sf*a.z(),this.sf*a.y()-this.tf*a.x())},x:function(){return this.sf},y:function(){return this.tf},z:function(){return this.uf}};
function op(a){var b=a.length();return new kp(a.sf/b,a.tf/b,a.uf/b)}function mp(a,b){return new kp(a.sf*b,a.tf*b,a.uf*b)}function np(a,b){return new kp(a.sf-b.x(),a.tf-b.y(),a.uf-b.z())}function lp(a,b){return new kp(a.sf+b.x(),a.tf+b.y(),a.uf+b.z())}function pp(a){return new kp(-a.sf,-a.tf,-a.uf)};function qp(a,b){this.Dx=new kp(a);this.ld=new kp(b)}qp.prototype={clone:function(){return new qp(this.Dx.clone(),this.ld.clone())},zl:function(){this.ld=pp(this.ld)},nf:function(){return this.Dx}};function rp(a,b){this.ld=a;this.Oq=b}rp.prototype={clone:function(){return new rp(this.ld.clone(),this.Oq)},zl:function(){this.ld=pp(this.ld);this.Oq=-this.Oq}};function sp(a,b){this.aj=a;this.Ht=b;var c=a[0].nf(),d=a[1].nf(),e=a[2].nf(),d=op(np(d,c).ol(np(e,c)));this.mf=new rp(d,d.Lj(c))}sp.prototype={clone:function(){var a=this.aj.map(function(a){return a.clone()});return new sp(a,this.Ht)},zl:function(){this.aj.reverse().map(function(a){a.zl()});this.mf.zl()}};
function tp(a,b,c,d,e,g){for(var k=0,l=[],n=0;n<a.aj.length;n++){var m=b.ld.Lj(a.aj[n].nf())-b.Oq,m=-1E-5>m?2:1E-5<m?1:0,k=k|m;l.push(m)}switch(k){case 0:(0<b.ld.Lj(a.mf.ld)?c:d).push(a);break;case 1:e.push(a);break;case 2:g.push(a);break;case 3:c=[];d=[];for(n=0;n<a.aj.length;n++){var q=(n+1)%a.aj.length,m=l[n],p=l[q],k=a.aj[n],q=a.aj[q];2!=m&&c.push(k);1!=m&&d.push(2!=m?k.clone():k);3==(m|p)&&(m=(b.Oq-b.ld.Lj(k.nf()))/b.ld.Lj(np(q.nf(),k.nf())),m=new qp(k.Dx.Ls(q.nf(),m),k.ld.Ls(q.ld,m)),c.push(m),
d.push(m.clone()))}3<=c.length&&e.push(new sp(c,a.Ht));3<=d.length&&g.push(new sp(d,a.Ht))}};function up(a){this.$c=this.zd=this.mf=null;this.Kb=[];a&&vp(this,a)}up.prototype={clone:function(){var a=new up;wp(a,this.mf&&this.mf.clone());xp(a,this.zd&&this.zd.clone());yp(a,this.$c&&this.$c.clone());a.Et(this.Kb.map(function(a){return a.clone()}));return a},Fb:function(){for(var a=0;a<this.Kb.length;a++)this.Kb[a].zl();this.mf.zl();this.zd&&this.zd.Fb();this.$c&&this.$c.Fb();a=this.zd;this.zd=this.$c;this.$c=a},back:function(){return this.$c},Et:function(a){this.Kb=a}};
function yp(a,b){a.$c=b}function xp(a,b){a.zd=b}function wp(a,b){a.mf=b}function vp(a,b){if(b.length){a.mf||(a.mf=b[0].mf.clone());for(var c=[],d=[],e=0;e<b.length;e++)tp(b[e],a.mf,a.Kb,a.Kb,c,d);c.length&&(a.zd||(a.zd=new up),vp(a.zd,c));d.length&&(a.$c||(a.$c=new up),vp(a.$c,d))}}function zp(a){var b=a.Kb.slice();a.zd&&(b=b.concat(zp(a.zd)));a.$c&&(b=b.concat(zp(a.$c)));return b}function Ap(a,b){a.Kb=Bp(b,a.Kb);a.zd&&Ap(a.zd,b);a.$c&&Ap(a.$c,b)}
function Bp(a,b){if(!a.mf)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)tp(b[e],a.mf,c,d,c,d);a.zd&&(c=Bp(a.zd,c));d=a.$c?Bp(a.$c,d):[];return c.concat(d)};function Cp(){this.Kb=[]}function Dp(a){var b=new Cp;b.Et(a);return b}
Cp.prototype={clone:function(){var a=new Cp;a.Et(this.Kb.map(function(a){return a.clone()}));return a},wy:function(a){var b=new up(this.clone().Kb);a=new up(a.clone().Kb);Ap(b,a);Ap(a,b);a.Fb();Ap(a,b);a.Fb();vp(b,zp(a));return Dp(zp(b))},Fc:function(a){var b=new up(this.clone().Kb);a=new up(a.clone().Kb);b.Fb();Ap(b,a);Ap(a,b);a.Fb();Ap(a,b);a.Fb();vp(b,zp(a));b.Fb();return Dp(zp(b))},pw:function(a){var b=new up(this.clone().Kb);a=new up(a.clone().Kb);b.Fb();Ap(a,b);a.Fb();Ap(b,a);Ap(a,b);vp(b,zp(a));
b.Fb();return Dp(zp(b))},inverse:function(){var a=this.clone();a.Kb.map(function(a){a.zl()});return a},Et:function(a){this.Kb=a}};function Ep(){}function Fp(a){for(var b=a.t.count,c=[],d=0,d=0;d<b;d+=3){var e=a.t.get(d),g=a.t.get(d+1),k=a.t.get(d+2),l=a.$.get(d),n=a.$.get(d+1),m=a.$.get(d+2),q=a.Ha;a.Mc&&0<a.Mc.length&&(q=a.Mc.get(d));var p=[];p.push(new qp(e,l));p.push(new qp(g,n));p.push(new qp(k,m));c.push(new sp(p,q))}return Dp(c)}
function Gp(a,b){if(!(null!=b&&b instanceof Cp))throw Error("Invalid CSG object.");var c=new ed,d=[];Bb(b.Kb,function(a){var b=[],k=a.Ht,b=Bb(a.aj,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.wH=Bb(c.unique(),function(a){return[a.nf().x(),a.nf().y(),a.nf().z()]});a.vH=Bb(c.unique(),function(a){return[a.ld.x(),a.ld.y(),a.ld.z()]});a.uH=Bb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.t=new dd(9*d.length);
a.$=new dd(9*d.length);a.Mc=new dd(9*d.length);Bb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.wH,n=this.vH,m=this.uH;this.t.add(d[b][0],d[b][1],d[b][2]);this.t.add(d[c][0],d[c][1],d[c][2]);this.t.add(d[a][0],d[a][1],d[a][2]);this.$.add(n[b][0],n[b][1],n[b][2]);this.$.add(n[c][0],n[c][1],n[c][2]);this.$.add(n[a][0],n[a][1],n[a][2]);m[b]&&this.Mc.add(m[b][0],m[b][1],m[b][2]);m[c]&&this.Mc.add(m[c][0],m[c][1],m[c][2]);m[a]&&this.Mc.add(m[a][0],m[a][1],m[a][2])}.bind(a));0==a.Mc.Ma&&(a.Mc=null);
a.Vd=Vd}Ep.prototype.wy=function(a){if(null==a||!(a instanceof Cp||a instanceof Yd))throw Error("Invalid object.");var b=a;a instanceof Yd&&(b=Fp(b));a=new Yd;ya(a,new Ep);Gp(a,Fp(this).wy(b));return a};Ep.prototype.Fc=function(a){if(null==a||!(a instanceof Cp||a instanceof Yd))throw Error("Invalid object.");var b=a;a instanceof Yd&&(b=Fp(b));a=new Yd;ya(a,new Ep);Gp(a,Fp(this).Fc(b));return a};
Ep.prototype.pw=function(a){if(null==a||!(a instanceof Cp||a instanceof Yd))throw Error("Invalid object.");var b=a;a instanceof Yd&&(b=Fp(b));a=new Yd;ya(a,new Ep);Gp(a,Fp(this).pw(b));return a};Ep.prototype.inverse=function(){var a=new Yd;ya(a,new Ep);Gp(a,Fp(this).inverse());return a};t("X.constructable",Ep);t("X.constructable.prototype.intersect",Ep.prototype.pw);t("X.constructable.prototype.inverse",Ep.prototype.inverse);t("X.constructable.prototype.subtract",Ep.prototype.Fc);
t("X.constructable.prototype.union",Ep.prototype.wy);function Hp(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new kp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new qp(lp(c,mp(e,d)),e))}this.Kb=[];a=a||{};var c=new kp(a.qh||[0,0,0]),d=a.Ug||1,e=a.Ca||16;a=a.SO||8;for(var g=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),g.push(new sp(k));return Dp(g)}w(Hp,Cp);function Ip(){Yd.call(this);this.n="sphere";this.Sa=[0,0,0];this.Xk=5;this.Yc=32;this.BH=16;ya(this,new Ep)}w(Ip,Yd);Ip.prototype.__defineGetter__("center",function(){return this.Sa});Ip.prototype.__defineSetter__("center",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid center");this.Sa=a});Ip.prototype.__defineGetter__("radius",function(){return this.Xk});Ip.prototype.__defineSetter__("radius",function(a){if(!la(a))throw Error("Invalid radius.");this.Xk=a});
Ip.prototype.ca=function(){Gp(this,new Hp({qh:this.Sa,Ug:this.Xk,Ca:this.Yc,SO:this.BH}));Ip.c.ca.call(this)};t("X.sphere",Ip);t("X.sphere.prototype.modified",Ip.prototype.ca);function Ke(a){Yd.call(this);this.n="slice";this.Sa=[0,0,0];this.Am=[0,0,1];this.$b=[0,1,0];this.tr=[1,0,0];this.Ia=this.Va=10;this.Lm=[0,1,0,0,1,1,1,1,1,0,0,0];this.m=this.ki=null;this.di=!0;this.wm=[1,1,1];null!=a&&this.ll(a)}w(Ke,Yd);Ke.prototype.ll=function(a){this.Sa=a.Sa.slice();this.Am=a.Am.slice();this.$b=a.$b.slice();this.Va=a.Va;this.Ia=a.Ia;this.ki=a.ki;this.m=a.m;this.di=a.di;this.wm=a.wm;this.yH=a.yH;Ke.c.ll.call(this,a)};Ke.prototype.__defineSetter__("height",function(a){this.Ia=a});
Ke.prototype.__defineSetter__("width",function(a){this.Va=a});Ke.prototype.create=function(){this.Cf()};
Ke.prototype.Cf=function(){var a=(new qd(this.Am[0],this.Am[1],this.Am[2])).normalize(),b=new qd(this.$b[0],this.$b[1],this.$b[2]),c=new qd(this.tr[0],this.tr[1],this.tr[2]),d=new qd(this.Sa[0],this.Sa[1],this.Sa[2]),e=td(c.clone().Fb().scale(this.Va/2),b.clone().Fb().scale(this.Ia/2)),g=new qd(e.x+d.x,e.y+d.y,e.z+d.z),e=td(c.clone().Fb().scale(this.Va/2),b.clone().scale(this.Ia/2)),k=new qd(e.x+d.x,e.y+d.y,e.z+d.z),e=td(c.clone().scale(this.Va/2),b.clone().Fb().scale(this.Ia/2)),l=new qd(e.x+d.x,
e.y+d.y,e.z+d.z),e=td(c.clone().scale(this.Va/2),b.clone().scale(this.Ia/2)),b=new qd(e.x+d.x,e.y+d.y,e.z+d.z);this.t=new dd(18);this.$=new dd(18);this.t.add(g.x,g.y,g.z);this.t.add(k.x,k.y,k.z);this.t.add(l.x,l.y,l.z);this.t.add(l.x,l.y,l.z);this.t.add(b.x,b.y,b.z);this.t.add(k.x,k.y,k.z);this.$.add(a.x,a.y,a.z);this.$.add(a.x,a.y,a.z);this.$.add(a.x,a.y,a.z);this.$.add(a.x,a.y,a.z);this.$.add(a.x,a.y,a.z);this.$.add(a.x,a.y,a.z);this.di&&(a=new Yd,a.t=new dd(24),a.$=new dd(24),a.t.add(g.x,g.y,g.z),
a.t.add(k.x,k.y,k.z),a.t.add(k.x,k.y,k.z),a.t.add(b.x,b.y,b.z),a.t.add(b.x,b.y,b.z),a.t.add(l.x,l.y,l.z),a.t.add(l.x,l.y,l.z),a.t.add(g.x,g.y,g.z),a.$.add(0,0,0),a.$.add(0,0,0),a.$.add(0,0,0),a.$.add(0,0,0),a.$.add(0,0,0),a.$.add(0,0,0),a.$.add(0,0,0),a.$.add(0,0,0),a.Ha=[this.wm[0],this.wm[1],this.wm[2]],a.Vd="LINES",a.Fm=2,this.i.push(a))};t("X.slice",Ke);t("X.slice.prototype.create",Ke.prototype.create);function Q(a){Yd.call(this);this.n="volume";this.Sa=[0,0,0];this.nb=[10,10,10];this.Lc=[1,1,1];this.wo=[10,10,10];this.ii=[1,1,1];this.ng=[];this.Dm=this.hi=this.Cm=this.gi=this.Bm=this.fi=0;this.yo=new Yd;this.zo=new Yd;this.Ao=new Yd;this.yr=this.Ze=!1;this.Hb=-1;this.xr=[];this.m=null;this.di=!0;this.Pb=Infinity;this.Ob=-Infinity;this.Rz=!0;this.Yb=0;this.S=null;ya(this,new gd);ya(this,new Wd);null!=a&&this.ll(a)}w(Q,Yd);
Q.prototype.ll=function(a){this.Sa=a.Sa.slice();this.nb=a.nb.slice();this.ii=a.ii.slice();this.fi=a.fi;this.Bm=a.Bm;this.gi=a.gi;this.Cm=a.Cm;this.hi=a.hi;this.Dm=a.Dm;this.Az=a.Az.slice();this.yo=new Yd(a.yo);this.zo=new Yd(a.zo);this.Ao=new Yd(a.Ao);this.Yb=a.Yb;this.S=a.S;this.Ze=a.Ze;this.yr=a.yr;this.Hb=a.Hb;this.m=a.m;this.di=a.di;Q.c.ll.call(this,a)};
Q.prototype.Cf=function(a){this.i.length=0;this.yo.i.length=0;this.zo.i.length=0;this.Ao.i.length=0;this.i.push(this.yo);this.i.push(this.zo);this.i.push(this.Ao);this.Qd=a.Ok;this.mu=a.Pk;this.ci=a.Nk;this.vm=a.Re;this.rH=a.Ue;this.Yb=a.max;this.S=a.data;this.C=!0};
Q.prototype.ca=function(a){a="undefined"!==typeof a?a:!0;if(0<this.i.length){this.Ze!=this.yr&&(this.Ze||-1==this.Hb||(this.i[this.Hb].visible=!1),this.C=!0,this.yr=this.Ze);if(!this.ob)return;for(var b=0,b=0;3>b;b++){var c=this.i[b],d=0,e=0;0==b?(d=this.fi,e=this.Bm,this.Bm=this.fi):1==b?(d=this.gi,e=this.Cm,this.Cm=this.gi):2==b&&(d=this.hi,e=this.Dm,this.Dm=this.hi);if(null==this.i[b].i[parseInt(d,10)]){var g=yd();g[0]=this.d[b].D[0][0][0]+this.d[b].Oa[0]*parseInt(d,10);g[1]=this.d[b].D[0][0][1]+
this.d[b].Oa[1]*parseInt(d,10);g[2]=this.d[b].D[0][0][2]+this.d[b].Oa[2]*parseInt(d,10);if(this.hb){var k=Je(g,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.m.kc,this.m,this.m.hb,this.m.Rd.me);this.m.i[b].i[parseInt(d,10)]=k;this.m.i[b].ca(!0)}g=Je(g,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.kc,this,!0,null);this.hb&&(g.m=g.Ua,g.m=this.m.i[b].i[parseInt(d,10)].Ua);c.i[parseInt(d,10)]=g;this.i[b].ca(!0)}e=c.i[parseInt(e,10)];this.Ze||(e.visible=!1);c=c.i[parseInt(d,10)];c.visible=!0;
c.Wc=1;this.Ze&&(c.i[0].ob=!1,b!=this.Hb&&(c.visible=!1,c.Wc=0))}this.Ze&&-1!=this.Hb&&Jp(this,this.Hb)}a&&Q.c.ca.call(this)};Q.prototype.__defineGetter__("dimensions",function(){return this.nb});Q.prototype.__defineSetter__("dimensions",function(a){this.nb=a});Q.prototype.__defineGetter__("spacing",function(){return this.ii});Q.prototype.__defineSetter__("spacing",function(a){this.ii=a});Q.prototype.__defineGetter__("bbox",function(){return this.Lc});Q.prototype.__defineGetter__("range",function(){return this.wo});
Q.prototype.__defineGetter__("dimensionsRAS",function(){return this.Az});Q.prototype.__defineGetter__("volumeRendering",function(){return this.Ze});Q.prototype.__defineSetter__("volumeRendering",function(a){this.Ze=a;this.ca(!1)});Q.prototype.__defineGetter__("visible",function(){return this.ob});Q.prototype.__defineSetter__("visible",function(a){if(a)this.ob=a,this.ca(!1);else{for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.ob=a;this.C=!0}});
Q.prototype.__defineGetter__("center",function(){return this.Sa});Q.prototype.__defineSetter__("center",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid center.");this.Sa=a});Q.prototype.__defineGetter__("volumeRenderingCache",function(){return this.xr});Q.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&h(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.xr=a});Q.prototype.__defineGetter__("image",function(){return this.ng});
Q.prototype.__defineGetter__("labelmap",function(){this.m||(this.m=new Kp(this));return this.m});Q.prototype.__defineGetter__("indexX",function(){return this.fi});Q.prototype.__defineSetter__("indexX",function(a){la(a)&&0<=a&&a<this.yo.i.length&&(this.fi=a,this.ca(!1))});Q.prototype.__defineGetter__("indexY",function(){return this.gi});Q.prototype.__defineSetter__("indexY",function(a){la(a)&&0<=a&&a<this.zo.i.length&&(this.gi=a,this.ca(!1))});Q.prototype.__defineGetter__("indexZ",function(){return this.hi});
Q.prototype.__defineSetter__("indexZ",function(a){la(a)&&0<=a&&a<this.Ao.i.length&&(this.hi=a,this.ca(!1))});Q.prototype.__defineGetter__("windowLow",function(){return this.Pb});Q.prototype.__defineSetter__("windowLow",function(a){this.Pb=a});Q.prototype.__defineGetter__("windowHigh",function(){return this.Ob});Q.prototype.__defineSetter__("windowHigh",function(a){this.Ob=a});Q.prototype.__defineGetter__("borders",function(){return this.di});
Q.prototype.__defineSetter__("borders",function(a){this.di=a});Q.prototype.__defineGetter__("reslicing",function(){return this.Rz});Q.prototype.__defineSetter__("reslicing",function(a){this.Rz=a});Q.prototype.__defineSetter__("xNormX",function(a){this.d[0].A[0]=a});Q.prototype.__defineGetter__("xNormX",function(){return this.d[0].A[0]});Q.prototype.__defineSetter__("xNormY",function(a){this.d[0].A[1]=a});Q.prototype.__defineGetter__("xNormY",function(){return this.d[0].A[1]});
Q.prototype.__defineSetter__("xNormZ",function(a){this.d[0].A[2]=a});Q.prototype.__defineGetter__("xNormZ",function(){return this.d[0].A[2]});Q.prototype.__defineSetter__("xColor",function(a){this.d[0].Ha=a});Q.prototype.__defineGetter__("xColor",function(){return this.d[0].Ha});Q.prototype.__defineSetter__("yNormX",function(a){this.d[1].A[0]=a});Q.prototype.__defineGetter__("yNormX",function(){return this.d[1].A[0]});Q.prototype.__defineSetter__("yNormY",function(a){this.d[1].A[1]=a});
Q.prototype.__defineGetter__("yNormY",function(){return this.d[1].A[1]});Q.prototype.__defineSetter__("yNormZ",function(a){this.d[1].A[2]=a});Q.prototype.__defineGetter__("yNormZ",function(){return this.d[1].A[2]});Q.prototype.__defineSetter__("yColor",function(a){this.d[1].Ha=a});Q.prototype.__defineGetter__("yColor",function(){return this.d[1].Ha});Q.prototype.__defineSetter__("zNormX",function(a){this.d[2].A[0]=a});Q.prototype.__defineGetter__("zNormX",function(){return this.d[2].A[0]});
Q.prototype.__defineSetter__("zNormY",function(a){this.d[2].A[1]=a});Q.prototype.__defineGetter__("zNormY",function(){return this.d[2].A[1]});Q.prototype.__defineSetter__("zNormZ",function(a){this.d[2].A[2]=a});Q.prototype.__defineGetter__("zNormZ",function(){return this.d[2].A[2]});Q.prototype.__defineSetter__("zColor",function(a){this.d[2].Ha=a});Q.prototype.__defineGetter__("zColor",function(){return this.d[2].Ha});
Q.prototype.LO=function(a){this.i[a].visible=!1;for(var b=0;b<this.i[a].i.length;b++)"undefined"!=typeof this.i[a].i[b]&&(this.hb&&(this.m.i[a].i[b].remove(),this.m.i[a].i[b]=null),this.i[a].i[b].remove(),this.i[a].i[b]=null);Ad(this.d[a].A,this.d[a].A);Le(a,this.d[a].xo,this.d[a].A,this);this.i[a].i=[];this.i[a].i=Array(this.d[a].ba);this.hb&&(b=Je(this.d[a].xo,this.d[a].Td,this.d[a].A,this.d[a].Ha,this.Lc,this.m.kc,this.m,this.m.hb,this.m.Rd.me),this.m.i[a].i=[],this.m.i[a].i=Array(this.d[a].ba),
this.m.i[a].i[Math.floor(this.d[a].ba/2)]=b,this.m.i[a].ca());b=Je(this.d[a].xo,this.d[a].Td,this.d[a].A,this.d[a].Ha,this.Lc,this.kc,this,!0,null);this.hb&&(b.m=b.Ua,b.m=this.m.i[a].i[Math.floor(this.d[a].ba/2)].Ua);this.i[a].i[Math.floor(this.d[a].ba/2)]=b;0==a?(this.fi=Math.floor(this.d[a].ba/2),this.Bm=Math.floor(this.d[a].ba/2)):1==a?(this.gi=Math.floor(this.d[a].ba/2),this.Cm=Math.floor(this.d[a].ba/2)):(this.hi=Math.floor(this.d[a].ba/2),this.Dm=Math.floor(this.d[a].ba/2));this.i[a].ca();this.i[a].i[Math.floor(this.d[a].ba/
2)].ob=!0};
function Jp(a,b){if(!a.ir)if(!a.Ze||!a.C&&b==a.Hb)a.Hb=b;else if(-1==a.xr.indexOf(b))a.xr.push(b),a.ir=!0,Lp(a,b),setTimeout(function(){var a=null;0<=this.Hb&&(a=this.i[this.Hb],a.visible=!1);var a=this.i[b],c=a.i.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.i[e]){var m=yd();m[0]=this.d[b].D[0][0][0]+this.d[b].Oa[0]*e;m[1]=this.d[b].D[0][0][1]+this.d[b].Oa[1]*e;m[2]=this.d[b].D[0][0][2]+this.d[b].Oa[2]*e;if(this.hb){var q=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.m.kc,this.m,
this.m.hb,this.m.Rd.me);this.m.i[b].i[e]=q;this.m.i[b].ca(!0)}m=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.kc,this,!0,null);m.i[0].ob=!1;this.hb&&(m.m=m.Ua,m.m=this.m.i[b].i[e].Ua);a.i[e]=m}a.i[e].ob=!0}Mp(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.i[e]){var m=yd();m[0]=this.d[b].D[0][0][0]+this.d[b].Oa[0]*e;m[1]=this.d[b].D[0][0][1]+this.d[b].Oa[1]*e;m[2]=this.d[b].D[0][0][2]+this.d[b].Oa[2]*e;if(this.hb){var q=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.m.kc,
this.m,this.m.hb,this.m.Rd.me);this.m.i[b].i[e]=q;this.m.i[b].ca(!0)}m=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.kc,this,!0,null);m.i[0].ob=!1;this.hb&&(m.m=m.Ua,m.m=this.m.i[b].i[e].Ua);a.i[e]=m}a.i[e].ob=!0}Mp(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.i[e]){var m=yd();m[0]=this.d[b].D[0][0][0]+this.d[b].Oa[0]*e;m[1]=this.d[b].D[0][0][1]+this.d[b].Oa[1]*e;m[2]=this.d[b].D[0][0][2]+this.d[b].Oa[2]*e;if(this.hb){var p=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,
this.m.kc,this.m,this.m.hb,this.m.Rd.me);this.m.i[b].i[e]=p;this.m.i[b].ca(!0)}m=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.kc,this,!0,null);m.i[0].ob=!1;this.hb&&(m.m=m.Ua,m.m=this.m.i[b].i[e].Ua);a.i[e]=m}a.i[e].ob=!0}Mp(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.i[e]){var m=yd();m[0]=this.d[b].D[0][0][0]+this.d[b].Oa[0]*e;m[1]=this.d[b].D[0][0][1]+this.d[b].Oa[1]*e;m[2]=this.d[b].D[0][0][2]+this.d[b].Oa[2]*e;if(this.hb){var p=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,
this.Lc,this.m.kc,this.m,this.m.hb,this.m.Rd.me);this.m.i[b].i[e]=p;this.m.i[b].ca(!0)}m=Je(m,this.d[b].Td,this.d[b].A,this.d[b].Ha,this.Lc,this.kc,this,!0,null);m.i[0].ob=!1;this.hb&&(m.m=m.Ua,m.m=this.m.i[b].i[e].Ua);a.i[e]=m}a.i[e].ob=!0}Mp(this,1);setTimeout(function(){this.ir&&this.i[b].ca(!0);this.Hb=b;this.C=!1;if(this.ir){var a=new De;a.Na=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.ir=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.i[a.Hb];
c.visible=!1;var c=a.i[b],d=c.i.length,e;for(e=0;e<d;e++)c.i[e].ob=!0;a.Hb=b;a.C=!1}}function Lp(a,b){var c=new Be;c.Na=a;a.dispatchEvent(c);a.onComputing(b)}function Mp(a,b){var c=new Ce;c.al=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}Q.prototype.cx=function(){};Q.prototype.ex=function(){};Q.prototype.dx=function(){};t("X.volume",Q);t("X.volume.prototype.modified",Q.prototype.ca);t("X.volume.prototype.sliceInfoChanged",Q.prototype.LO);t("X.volume.prototype.onComputing",Q.prototype.cx);
t("X.volume.prototype.onComputingProgress",Q.prototype.ex);t("X.volume.prototype.onComputingEnd",Q.prototype.dx);function Np(a,b){ad.call(this);this.l=a;var c=$h(this.l)?this.l:this.l?this.l.body:null;this.OL=!!c&&Ei(c);this.lD=P(this.l,ic?"DOMMouseScroll":"mousewheel",this,b)}w(Np,ad);
Np.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Qc;if("mousewheel"==a.type){c=1;if(hc||jc&&(cc||qc("532.0")))c=40;d=Op(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=Op(-a.wheelDeltaX,c),c=Op(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;la(this.vD)&&(b=id(b,-this.vD,this.vD));la(this.wD)&&(c=id(c,-this.wD,this.wD));this.OL&&(b=-b);b=new Pp(d,a,b,c);this.dispatchEvent(b)};function Op(a,b){return jc&&(bc||ec)&&0!=a%b?a:a/b}
Np.prototype.e=function(){Np.c.e.call(this);Vc(this.lD);this.lD=null};function Pp(a,b,c,d){Hc.call(this,b);this.type="mousewheel";this.detail=a;this.vi=c;this.Zd=d}w(Pp,Hc);function Qp(){ad.call(this)}w(Qp,ad);f=Qp.prototype;f.$g=0;f.Og=0;f.Qf=100;f.df=0;f.Xi=1;f.Ae=!1;f.Pl=!1;f.F=function(a){a=Rp(this,a);this.$g!=a&&(this.$g=a+this.df>this.Qf?this.Qf-this.df:a<this.Og?this.Og:a,this.Ae||this.Pl||this.dispatchEvent("change"))};f.I=function(){return Rp(this,this.$g)};f.sk=function(a){a=Rp(this,a);this.df!=a&&(this.df=0>a?0:this.$g+a>this.Qf?this.Qf-this.$g:a,this.Ae||this.Pl||this.dispatchEvent("change"))};
f.Gf=function(){var a=this.df;return null==this.Xi?a:Math.round(a/this.Xi)*this.Xi};f.Fe=function(a){if(this.Og!=a){var b=this.Ae;this.Ae=!0;this.Og=a;a+this.df>this.Qf&&(this.df=this.Qf-this.Og);a>this.$g&&this.F(a);a>this.Qf&&(this.df=0,this.Hd(a),this.F(a));(this.Ae=b)||this.Pl||this.dispatchEvent("change")}};f.Aa=function(){return Rp(this,this.Og)};
f.Hd=function(a){a=Rp(this,a);if(this.Qf!=a){var b=this.Ae;this.Ae=!0;this.Qf=a;a<this.$g+this.df&&this.F(a-this.df);a<this.Og&&(this.df=0,this.Fe(a),this.F(this.Qf));a<this.Og+this.df&&(this.df=this.Qf-this.Og);(this.Ae=b)||this.Pl||this.dispatchEvent("change")}};f.la=function(){return Rp(this,this.Qf)};f.Bi=function(){return this.Xi};f.Oh=function(a){this.Xi!=a&&(this.Xi=a,a=this.Ae,this.Ae=!0,this.Hd(this.la()),this.sk(this.Gf()),this.F(this.I()),(this.Ae=a)||this.Pl||this.dispatchEvent("change"))};
function Rp(a,b){return null==a.Xi?b:a.Og+Math.round((b-a.Og)/a.Xi)*a.Xi};function Sp(a,b){tj.call(this,a);this.xA=null;this.Ka=new Qp;this.QL=b||hd;P(this.Ka,"change",this.IC,!1,this)}w(Sp,tj);f=Sp.prototype;f.Ga="horizontal";f.vp=!1;f.mM=!1;f.oh=10;f.Qs=0;f.cD=!0;f.Ts=0;f.DG=1E3;f.Pc=!0;f.ef=!1;f.r=function(){Sp.c.r.call(this);var a=this.H().r("div",this.P(this.Ga));this.se(a)};f.se=function(a){Sp.c.se.call(this,a);Mj(a,this.P(this.Ga));this.iB();Sj(this.a(),"slider");Tp(this)};
f.eb=function(){Sp.c.eb.call(this);this.Me=new dj(this.pa);this.Gg=new dj(this.Dc);this.Me.Pj(this.ef);this.Gg.Pj(this.ef);this.Me.xv=this.Gg.xv=fa;this.qb=new Sn(this.a());Up(this,!0);this.a().tabIndex=0;this.Wh()};
function Up(a,b){b?(a.gb().s(a.Me,"beforedrag",a.ks).s(a.Gg,"beforedrag",a.ks).s(a.Me,["start","end"],a.qs).s(a.Gg,["start","end"],a.qs).s(a.qb,"key",a.ls).s(a.a(),"click",a.ms).s(a.a(),"mousedown",a.ms),a.cD&&Vp(a,!0)):(a.gb().rb(a.Me,"beforedrag",a.ks).rb(a.Gg,"beforedrag",a.ks).rb(a.Me,["start","end"],a.qs).rb(a.Gg,["start","end"],a.qs).rb(a.qb,"key",a.ls).rb(a.a(),"click",a.ms).rb(a.a(),"mousedown",a.ms),a.cD&&Vp(a,!1))}f.Cc=function(){Sp.c.Cc.call(this);Cc(this.Me,this.Gg,this.qb,this.Ol)};
f.ks=function(a){var b=a.Dv==this.Me?this.pa:this.Dc,c;"vertical"==this.Ga?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.la()-this.Aa())+this.Aa()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.la()-this.Aa())+this.Aa();c=a.Dv==this.Me?Math.min(Math.max(c,this.Aa()),this.I()+this.Gf()):Math.min(Math.max(c,this.I()),this.la());Wp(this,b,c)};
f.qs=function(a){var b="start"==a.type;Qj(this.a(),"goog-slider-dragging",b);Qj(a.target.handle,"goog-slider-thumb-dragging",b);a=a.Dv==this.Me;b?(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j")):(this.dispatchEvent("m"),this.dispatchEvent(a?"i":"k"))};
f.ls=function(a){var b=!0;switch(a.keyCode){case 36:Xp(this,this.Aa());break;case 35:Xp(this,this.la());break;case 33:Yp(this,this.oh);break;case 34:Yp(this,-this.oh);break;case 37:var c=this.ef&&this.jf()?1:-1;Yp(this,a.shiftKey?c*this.oh:c*this.Jq);break;case 40:Yp(this,a.shiftKey?-this.oh:-this.Jq);break;case 39:c=this.ef&&this.jf()?-1:1;Yp(this,a.shiftKey?c*this.oh:c*this.Jq);break;case 38:Yp(this,a.shiftKey?this.oh:this.Jq);break;default:b=!1}b&&a.preventDefault()};
f.ms=function(a){this.a().focus&&this.a().focus();var b=a.target;ai(this.pa,b)||ai(this.Dc,b)||(b="click"==a.type,b&&xa()<this.Ts+this.DG||(b||(this.Ts=xa()),this.mM?Xp(this,Zp(this,a)):(this.jy(a),this.bg=$p(this,Zp(this,a)),this.WC="vertical"==this.Ga?this.Is<this.bg.offsetTop:this.Is>aq(this,this.bg)+this.bg.offsetWidth,a=Fh(this.a()),this.gb().s(a,"mouseup",this.iy,!0).s(this.a(),"mousemove",this.jy),this.gk||(this.gk=new Sf(200),this.gb().s(this.gk,Tf,this.JC)),this.JC(),this.gk.start())))};
f.HC=function(a){Yp(this,(0<a.detail?-1:1)*this.Jq);a.preventDefault()};f.JC=function(){var a;if("vertical"==this.Ga){var b=this.Is,c=this.bg.offsetTop;this.WC?b<c&&(a=bq(this,this.bg)+this.oh):b>c+this.bg.offsetHeight&&(a=bq(this,this.bg)-this.oh)}else b=this.Is,c=aq(this,this.bg),this.WC?b>c+this.bg.offsetWidth&&(a=bq(this,this.bg)+this.oh):b<c&&(a=bq(this,this.bg)-this.oh);ca(a)&&Wp(this,this.bg,a)};
f.iy=function(){this.gk&&this.gk.stop();var a=Fh(this.a());this.gb().rb(a,"mouseup",this.iy,!0).rb(this.a(),"mousemove",this.jy)};function cq(a,b){var c=Fi(b,a.a());return"vertical"==a.Ga?c.y:a.ef&&a.jf()?a.a().clientWidth-c.x:c.x}f.jy=function(a){this.Is=cq(this,a)};function Zp(a,b){var c=a.Aa(),d=a.la();if("vertical"==a.Ga){var e=a.pa.offsetHeight,g=a.a().clientHeight-e,e=cq(a,b)-e/2;return(d-c)*(g-e)/g+c}e=a.pa.offsetWidth;g=a.a().clientWidth-e;e=cq(a,b)-e/2;return(d-c)*e/g+c}
function bq(a,b){if(b==a.pa)return a.Ka.I();if(b==a.Dc)return a.Ka.I()+a.Ka.Gf();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.Mg=function(){return this.Me.Mg()||this.Gg.Mg()};function Yp(a,b){Math.abs(b)<a.Bi()&&(b=(0==b?0:0>b?-1:1)*a.Bi());var c=bq(a,a.pa)+b,d=bq(a,a.Dc)+b,c=id(c,a.Aa(),a.la()-a.Qs),d=id(d,a.Aa()+a.Qs,a.la());dq(a,c,d-c)}function Wp(a,b,c){var d=Rp(a.Ka,c);c=b==a.pa?d:a.Ka.I();b=b==a.Dc?d:a.Ka.I()+a.Ka.Gf();c>=a.Aa()&&b>=c+a.Qs&&a.la()>=b&&dq(a,c,b-c)}
function dq(a,b,c){a.Aa()<=b&&b<=a.la()-c&&a.Qs<=c&&c<=a.la()-b&&(b!=a.I()||c!=a.Gf())&&(a.Ka.Pl=!0,a.Ka.sk(0),a.Ka.F(b),a.Ka.sk(c),a.Ka.Pl=!1,a.IC())}f.Aa=function(){return this.Ka.Aa()};f.Fe=function(a){this.Ka.Fe(a)};f.la=function(){return this.Ka.la()};f.Hd=function(a){this.Ka.Hd(a)};function $p(a,b){return b<=a.Ka.I()+a.Ka.Gf()/2?a.pa:a.Dc}f.IC=function(){this.Wh();Tp(this);this.dispatchEvent("change")};
f.Wh=function(){if(this.pa&&!this.vp){var a=eq(this,bq(this,this.pa)),b=eq(this,bq(this,this.Dc));if("vertical"==this.Ga)this.pa.style.top=a.y+"px",this.Dc.style.top=b.y+"px",this.Vb&&(a=fq(b.y,a.y,this.pa.offsetHeight),this.Vb.style.top=a.offset+"px",this.Vb.style.height=a.size+"px");else{var c=this.ef&&this.jf()?"right":"left";this.pa.style[c]=a.x+"px";this.Dc.style[c]=b.x+"px";this.Vb&&(a=fq(a.x,b.x,this.pa.offsetWidth),this.Vb.style[c]=a.offset+"px",this.Vb.style.width=a.size+"px")}}};
function fq(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function eq(a,b){var c=new sh;if(a.pa){var d=a.Aa(),e=a.la(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Ga?(d=a.a().clientHeight-a.pa.offsetHeight,e=Math.round(e*d),c.x=aq(a,a.pa),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.pa.offsetWidth)),c.x=d,c.y=a.pa.offsetTop)}return c}
function Xp(a,b){b=id(b,a.Aa(),a.la());a.vp&&a.Sr.stop(!0);var c=new il,d,e=$p(a,b),g=a.I(),k=a.Gf(),l=bq(a,e),n=eq(a,l);d=a.Bi();Math.abs(b-l)<d&&(b=id(l+(b>l?d:-d),a.Aa(),a.la()));Wp(a,e,b);l=eq(a,bq(a,e));d="vertical"==a.Ga?[aq(a,e),l.y]:[l.x,e.offsetTop];n=new Yk(e,[n.x,n.y],d,100);n.Pj(a.ef);c.add(n);a.Vb&&gq(a,e,g,k,l,c);a.xA&&(e=a.xA.VS(g,b,100),N(e,function(a){c.add(a)}));a.Sr=c;a.gb().s(c,"end",a.WI);a.vp=!0;c.play(!1)}f.ae=function(){return this.vp};
function gq(a,b,c,d,e,g){var k=eq(a,c),l=eq(a,c+d);c=k;d=l;b==a.pa?c=e:d=e;"vertical"==a.Ga?(b=fq(l.y,k.y,a.pa.offsetHeight),k=fq(d.y,c.y,a.pa.offsetHeight),e=new Yk(a.Vb,[aq(a,a.Vb),b.offset],[aq(a,a.Vb),k.offset],100),b=new al(a.Vb,b.size,k.size,100)):(b=fq(k.x,l.x,a.pa.offsetWidth),k=fq(c.x,d.x,a.pa.offsetWidth),e=new Yk(a.Vb,[b.offset,a.Vb.offsetTop],[k.offset,a.Vb.offsetTop],100),b=new $k(a.Vb,b.size,k.size,100));e.Pj(a.ef);b.Pj(a.ef);g.add(e);g.add(b)}f.WI=function(){this.vp=!1};
f.Vi=function(a){if(this.Ga!=a){var b=this.P(this.Ga),c=this.P(a);this.Ga=a;this.a()&&(a=this.a(),Lj(a,b)&&(Oj(a,b),Mj(a,c)),b=this.ef&&this.jf()?"right":"left",this.pa.style[b]=this.pa.style.top="",this.Dc.style[b]=this.Dc.style.top="",this.Vb&&(this.Vb.style[b]=this.Vb.style.top="",this.Vb.style.width=this.Vb.style.height=""),this.Wh())}};f.bc=function(){return this.Ga};
f.e=function(){Sp.c.e.call(this);this.gk&&this.gk.g();delete this.gk;this.Sr&&this.Sr.g();delete this.Sr;delete this.pa;delete this.Dc;this.Vb&&delete this.Vb;this.Ka.g();delete this.Ka;this.qb&&(this.qb.g(),delete this.qb);this.Ol&&(this.Ol.g(),delete this.Ol);this.Me&&(this.Me.g(),delete this.Me);this.Gg&&(this.Gg.g(),delete this.Gg)};f.Jq=1;f.Bi=function(){return this.Ka.Bi()};f.Oh=function(a){this.Ka.Oh(a)};f.I=function(){return this.Ka.I()};f.F=function(a){Wp(this,this.pa,a)};f.Gf=function(){return this.Ka.Gf()};
f.sk=function(a){Wp(this,this.Dc,this.Ka.I()+a)};f.ea=function(a){Qi(this.a(),a);a&&this.Wh()};function Tp(a){var b=a.a();b&&(Tj(b,"valuemin",a.Aa()),Tj(b,"valuemax",a.la()),Tj(b,"valuenow",a.I()),Tj(b,"valuetext",a.QL(a.I())||""))}function Vp(a,b){b?(a.Ol||(a.Ol=new Np(a.a())),a.gb().s(a.Ol,"mousewheel",a.HC)):a.gb().rb(a.Ol,"mousewheel",a.HC)}f.uc=function(a){this.Pc!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Pc=a,Up(this,a),a||this.iy(),Qj(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Pc};function aq(a,b){return a.ef?cj(b):b.offsetLeft};function hq(a){Sp.call(this,a);this.Ka.F(this.Aa());this.Ka.sk(this.la()-this.Aa())}w(hq,Sp);hq.prototype.P=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};hq.prototype.ml=function(a){a=this.H().r("div",a);Sj(a,"button");return a};
hq.prototype.iB=function(){var a=Hh(null,"goog-twothumbslider-value-thumb",this.a())[0],b=Hh(null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Hh(null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.ml("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.ml("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.H().r("div","goog-twothumbslider-rangehighlight"),this.H().ow(c,a));this.pa=a;this.Dc=b;this.Vb=c};function iq(){Yd.call(this);this.n="fibers";ya(this,new gd)}w(iq,Yd);t("X.fibers",iq);function jq(){this.Xl=W("div",{id:this.constructor.ID_PREFIX+"_"+C(),"class":this.constructor.Hc});im.call(this,"",this.Xl,!0);S(this.Qb,jq.CSS.RG);this.Qb.style.marginTop="0px"}w(jq,im);t("nrg.ui.ZippyTree",jq);var nn="o",kq={PP:"n",GG:nn};jq.ID_PREFIX="nrg.ui.ZippyTree";jq.CSS_SUFFIX={RG:"rootnode"};f=jq.prototype;f.Ml=1;f.Sj=!1;f.KL=!0;f.tp=1;f.Hv=0;f.tt=null;f.fg=null;f.Ox=function(a){this.nB=a};f.xp=function(){return 0===Wh(this.Um).length};f.aB=function(){this.Gq(function(a){a.le.dc(!1)},this)};
f.Mo=function(){this.aB()};f.pJ=function(){var a=[];this.Gq(function(b){a.push(b)},this);return a};f.uC=function(){var a=[];I(this.he,function(b){a.push(b)});return a};f.xl=function(){this.Gq(function(a){a.le.dc(!0)},this)};f.Gq=function(a,b){I(b.he,function(b){a(b);this.Gq(a,b)}.bind(this))};f.a=function(){return this.Xl};f.dc=function(a,b){b=null!=b?b:this;if(null!=b.he[a]){var c=b.he[a];c.le.dc(!0);return c}};f.zt=function(a,b){b=null!=b?b:this;if(null!=b.he[a]){var c=b.he[a];c.le.dc(!1);return c}};
f.Sv=function(a){var b=this,c=[];N(a,function(a){c.push(b.he[a]);b=b.he[a]}.bind(this));return c};f.Af=function(a,b){!h(a)||$h(a)?lq(this,a,b):N(a,function(a){this.Af(a,b)}.bind(this))};function lq(a,b,c){c?(c&&(c=ja(c)?[c]:c,c.length>a.Ml&&(a.Ml=c.length)),a.Oo(c,a,b)):Th(a.Xl,b)}
f.Oo=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.Um;if(0==a.length)mq(this,e,c),null!=c&&nq(this,c,d-2);else{0<a.length&&a.length>this.Ml&&(this.Ml=a.length);if(b.he[a[0]])e=b.he[a[0]];else{var g=a[0];e.style.opacity=this.tp;var k=new im(g,e,!1);b.Qb.parentNode==this.Xl&&2==this.Xl.childNodes.length&&(k.Qb.style.marginTop="0px");k.Qb.style.left="inherit";k.Qb.style.width="inherit";oq(this,k);b.he[g]=k;k.Qb.style.opacity=this.tp;e.style.opacity=1;this.Sj&&pq(this,k.Qb);this.dispatchEvent({type:nn,
De:k});e=k}nq(this,e.Qb,d-1);this.Oo(1<a.length?a.slice(1):[],e,c,d+1)}};function nq(a,b,c){b._maxDepth!=a.Ml&&(null==b._maxDepth&&(b._maxDepth=a.Ml),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}function oq(a,b){P(b,"d",function(){this.dispatchEvent({type:"d",De:b})}.bind(a));P(b,"f",function(){this.dispatchEvent({type:"f",De:b})}.bind(a));P(b,"e",function(){this.dispatchEvent({type:"e",De:b})}.bind(a))}
function pq(a,b){(new dl(b,a.Hv)).play()}f.SN=function(){this.Sj&&1!=this.fg.J&&this.fg.play()};f.hP=function(a){this.tp=(this.Sj=!0===a)?0:1;this.Hv=this.Sj?300:0;this.Sj&&(qq(this),this.tt=[],this.fg=new il,P(this.fg,"end",this.ZA.bind(this)))};function mq(a,b,c){c&&(tl(c,{position:"relative"}),c.style.opacity=a.tp,null!=a.nB?a.nB(b,c):b.appendChild(c),rq(b),a.Sj?pq(a,c,function(){this.dispatchEvent({type:"n"})}.bind(a)):a.dispatchEvent({type:"n"}))}
function rq(a){var b=[],c=[],d=Wh(a),e=d.length;N(d,function(a){Lj(a,im.CSS.Sq)?b.push(a):1==a.childNodes.length&&Lj(a.childNodes[0],im.CSS.$h)&&c.push(a)});N(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}f.ZA=function(){for(this.fg.g();this.tt.length;)this.fg.add(this.tt[0]),yb.splice.call(this.tt,0,1);P(this.fg,"end",this.ZA.bind(this));this.fg.play()};
function qq(a){null!=a.tE&&(a.Av(a.tE),delete a.tE);null!=a.fg&&(a.Ur(a.fg),delete a.fg)}f.e=function(){jq.c.e.call(this);Y(this.Xl);delete this.Xl;qq(this);delete this.Ml;delete this.Sj;delete this.KL;delete this.tp;delete this.Hv};t("nrg.ui.ZippyTree.EventType",kq);t("nrg.ui.ZippyTree.INDENT_PCT",5);t("nrg.ui.ZippyTree.ID_PREFIX",jq.ID_PREFIX);t("nrg.ui.ZippyTree.CSS_SUFFIX",jq.CSS_SUFFIX);t("nrg.ui.ZippyTree.FADE_TIME",300);t("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");
t("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");t("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Wh(a),d=b[jm].toLowerCase(),e,g,k=c.length,l=0;l<k;l++){if(g=c[l],null!=g[jm]&&(e=g[jm].toLowerCase(),e=Ka(d,e),0>e)){Vh(b,g);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)});t("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",jq.prototype.Ox);t("nrg.ui.ZippyTree.prototype.isEmpty",jq.prototype.xp);
t("nrg.ui.ZippyTree.prototype.contractAll",jq.prototype.aB);t("nrg.ui.ZippyTree.prototype.collapseAll",jq.prototype.Mo);t("nrg.ui.ZippyTree.prototype.getAllNodes",jq.prototype.pJ);t("nrg.ui.ZippyTree.prototype.getTopLevelNodes",jq.prototype.uC);t("nrg.ui.ZippyTree.prototype.expandAll",jq.prototype.xl);t("nrg.ui.ZippyTree.prototype.traverse",jq.prototype.Gq);t("nrg.ui.ZippyTree.prototype.getElement",jq.prototype.a);t("nrg.ui.ZippyTree.prototype.setExpanded",jq.prototype.dc);
t("nrg.ui.ZippyTree.prototype.setCollapsed",jq.prototype.zt);t("nrg.ui.ZippyTree.prototype.getFolderNodes",jq.prototype.Sv);t("nrg.ui.ZippyTree.prototype.addContents",jq.prototype.Af);t("nrg.ui.ZippyTree.prototype.createBranch",jq.prototype.Oo);t("nrg.ui.ZippyTree.prototype.playFx",jq.prototype.SN);t("nrg.ui.ZippyTree.prototype.toggleFadeInFx",jq.prototype.hP);t("nrg.ui.ZippyTree.prototype.disposeInternal",jq.prototype.e);function sq(){}w(sq,Jn);ga(sq);sq.prototype.r=function(a){var b=a.H().r("span",this.Al(a).join(" "));tq(this,b,a.Cj);return b};sq.prototype.Eb=function(a,b){b=sq.c.Eb.call(this,a,b);var c=Kj(b),d=uq;Gb(c,vq(this,wq))?d=wq:Gb(c,vq(this,xq))?d=xq:Gb(c,vq(this,uq))&&(d=uq);a.Cj=d;Tj(b,"checked",d==wq?"mixed":d==xq?"true":"false");return b};sq.prototype.wh=function(){return"checkbox"};
function tq(a,b,c){if(b){var d=vq(a,c);Lj(b,d)||(I(yq,function(a){a=vq(this,a);Qj(b,a,a==d)},a),Tj(b,"checked",c==wq?"mixed":c==xq?"true":"false"))}}sq.prototype.P=function(){return"goog-checkbox"};function vq(a,b){var c=a.P();if(b==xq)return c+"-checked";if(b==uq)return c+"-unchecked";if(b==wq)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function zq(a,b,c){c=c||sq.ye();Yn.call(this,null,c,b);this.Cj=ca(a)?a:uq}w(zq,Yn);var xq=!0,uq=!1,wq=null,yq={JP:xq,yR:uq,zR:wq};f=zq.prototype;f.Sb=null;f.jk=function(){return this.Cj==xq};f.Yf=function(a){a!=this.Cj&&(this.Cj=a,tq(this.Ab(),this.a(),this.Cj))};f.Xg=function(a){this.ga?(this.Cc(),this.Sb=a,this.eb()):this.Sb=a};f.toggle=function(){this.Yf(this.Cj?uq:xq)};
f.eb=function(){zq.c.eb.call(this);if(this.Gl){var a=this.gb();this.Sb&&a.s(this.Sb,"click",this.cw).s(this.Sb,"mouseover",this.Hl).s(this.Sb,"mouseout",this.ns).s(this.Sb,"mousedown",this.Ah).s(this.Sb,"mouseup",this.Kg);a.s(this.a(),"click",this.cw)}this.Sb&&(this.Sb.id||(this.Sb.id=wj(this)+".lbl"),Tj(this.a(),"labelledby",this.Sb.id))};f.uc=function(a){zq.c.uc.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.cw=function(a){a.stopPropagation();var b=this.Cj?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.Jg=function(a){32==a.keyCode&&this.cw(a);return!1};Gn("goog-checkbox",function(){return new zq});function Aq(){Yd.call(this);this.n="mesh";ya(this,new gd)}w(Aq,Yd);t("X.mesh",Aq);dn.uy.WS={};function Cq(){Z.call(this);this.Gh=[];this.ag=[]}w(Cq,Z);t("xiv.ui.ctrl.XtkController",Cq);Cq.ID_PREFIX="xiv.ui.ctrl.XtkController";Cq.CSS_SUFFIX={qG:"label",cG:"component"};var Dq=C();function Eq(){return W("div",{id:"Label_"+C(),"class":Cq.CSS.qG})}function Fq(a){a=h(a.file)?a.file[0]:a.file||a.name;return Ol(a)}function Gq(a,b){b.yE([Fq(a)])}f=Cq.prototype;f.hk=!1;f.k=function(a){Cq.c.k.call(this,a)};
f.Xg=function(a){null==this.Sb&&(this.Sb=Eq(),Th(this.a(),this.Sb));this.Sb.innerHTML=a};f.RJ=function(){return this.Sb};f.yE=function(a){ja(a)&&(a=[a]);this.fn=a};f.KJ=function(){return this.fn};f.vk=function(a){this.Ld=a};f.WK=function(){return this.Ld};f.Yl=function(a){a=this.w=a;this.w instanceof tj?(a=this.w.a(),this.w.ga?this.w.a().parentNode!==this.a()&&this.w.a()!==this.a()&&this.a().appendChild(this.w.a()):this.w.k(this.a())):this.a().appendChild(a);null!=a&&S(a,Cq.CSS.cG)};
f.PB=function(){return Lb(this.Gh,this.ag)};f.YJ=function(){return this.Gh};f.dD=function(){return this.hk};f.CO=function(a){this.hk=a};f.zK=function(){return this.ag};f.xJ=function(){return this.w};f.fd=fa;f.bf=function(a,b,c){a=new a;a.k();a.Xg(b);Th(this.a(),a.a());null!=c&&P(a,"p",c);return a};f.update=function(){this.w==this?this.j():this.w.j&&this.w.j()};f.j=function(){this.w.j&&this.w!=this&&(window.console.log("UPDATE STYLE",this.w),this.w.j())};
f.Mu=function(a,b){var c=this.bf(b,"Color",function(b){a.color=b.color}.bind(this));Gq(a,c);this.ag.push(c);c[Dq]=a;c.update()};f.tA=function(a,b){var c=this.bf(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});Gq(a,c);this.ag.push(c);c.w.F(1);c.w.j()};f.Nu=function(a,b){var c=this.bf(b,"Visible",function(b){a.visible=b.checked});Gq(a,c);this.ag.push(c);c.w.Yf(a.visible)};
f.e=function(){Cq.c.e.call(this);this[Dq]=null;delete this.hk;delete this.Ld;N(this.ag,function(a){Wc(a);a.g()});Hb(this.ag);delete this.ag;N(this.Gh,function(a){Wc(a);a.g();controller=null});Hb(this.Gh);delete this.Gh;null!=this.w&&(Wc(this.w),this.w instanceof tj?this.w.g():Y(this.w),delete this.w);null!=this.fn&&(Hb(this.fn),delete this.fn);null!=this.Sb&&(Y(this.Sb),delete this.Sb)};t("xiv.ui.ctrl.XtkController.ID_PREFIX",Cq.ID_PREFIX);t("xiv.ui.ctrl.XtkController.CSS_SUFFIX",Cq.CSS_SUFFIX);
t("xiv.ui.ctrl.XtkController.EventType",{IP:"p"});t("xiv.ui.ctrl.XtkController.OBJ_KEY",Dq);t("xiv.ui.ctrl.XtkController.createLabel",Eq);t("xiv.ui.ctrl.XtkController.getXObjLabel",Fq);t("xiv.ui.ctrl.XtkController.getObjectCategory",function(a){if(a instanceof Aq)return"Meshes";if(a instanceof Q)return"Volumes";if(a instanceof iq)return"Fibers";if(a instanceof Ip)return"Annotations"});t("xiv.ui.ctrl.XtkController.setControllerFolders",Gq);t("xiv.ui.ctrl.XtkController.prototype.render",Cq.prototype.k);
t("xiv.ui.ctrl.XtkController.prototype.setLabel",Cq.prototype.Xg);t("xiv.ui.ctrl.XtkController.prototype.getLabel",Cq.prototype.RJ);t("xiv.ui.ctrl.XtkController.prototype.setFolders",Cq.prototype.yE);t("xiv.ui.ctrl.XtkController.prototype.getFolders",Cq.prototype.KJ);t("xiv.ui.ctrl.XtkController.prototype.setXObj",Cq.prototype.vk);t("xiv.ui.ctrl.XtkController.prototype.getXObj",Cq.prototype.WK);t("xiv.ui.ctrl.XtkController.prototype.setComponent",Cq.prototype.Yl);
t("xiv.ui.ctrl.XtkController.prototype.getAllControllers",Cq.prototype.PB);t("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",Cq.prototype.YJ);t("xiv.ui.ctrl.XtkController.prototype.isInitialized",Cq.prototype.dD);t("xiv.ui.ctrl.XtkController.prototype.setInitialized",Cq.prototype.CO);t("xiv.ui.ctrl.XtkController.prototype.getSubControllers",Cq.prototype.zK);t("xiv.ui.ctrl.XtkController.prototype.getComponent",Cq.prototype.xJ);
t("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",Cq.prototype.fd);t("xiv.ui.ctrl.XtkController.prototype.createController",Cq.prototype.bf);t("xiv.ui.ctrl.XtkController.prototype.update",Cq.prototype.update);t("xiv.ui.ctrl.XtkController.prototype.updateStyle",Cq.prototype.j);t("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",Cq.prototype.Mu);t("xiv.ui.ctrl.XtkController.prototype.add_opacity",Cq.prototype.tA);t("xiv.ui.ctrl.XtkController.prototype.add_visible",Cq.prototype.Nu);
t("xiv.ui.ctrl.XtkController.prototype.disposeInternal",Cq.prototype.e);function Hq(){Cq.call(this)}w(Hq,Cq);t("xiv.ui.ctrl.Histogram",Hq);Hq.ID_PREFIX="xiv.ui.ctrl.Histogram";Hq.CSS_SUFFIX={XF:"canvas",sG:"linecanvas",uG:"max",BG:"min"};Hq.LEVEL_CUTOFF=.99;f=Hq.prototype;f.oL=.95;f.Be=null;f.nk=null;f.Nt=null;f.Kp=null;f.St=null;f.Pq=null;f.tI="rgb(40,40,40)";
f.k=function(a){Hq.c.k.call(this,a);this.Yl(this);this.Bj=W("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+C(),"class":this.constructor.CSS.XF});this.a().appendChild(this.Bj);this.kl=this.Bj.getContext("2d");this.kl.fillStyle=this.tI;this.Ki=W("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+C(),"class":this.constructor.CSS.sG});this.a().appendChild(this.Ki);this.Fh=this.Ki.getContext("2d");this.Jp=W("div",{id:this.constructor.ID_PREFIX+"_Max_"+C(),"class":this.constructor.CSS.uG},"1000");
this.a().appendChild(this.Jp);this.Lp=W("div",{id:this.constructor.ID_PREFIX+"_Min_"+C(),"class":this.constructor.CSS.BG},"-1000");this.a().appendChild(this.Lp)};
function Iq(a){if(null==a.Be){var b=0,c=a.Ld.max;N(a.Ld.VC,function(a){N(a,function(a){N(a,function(a){if(null==this.Be)for(this.Be=[];b<=c;b++)this.Be.push(0);this.Be[parseInt(a)]++;this.Nt++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Be){var d;null==a.nk&&(a.nk=[],a.Kp=0,N(a.Be,function(a){d=a/this.Nt;this.nk.push(d);this.Kp=Math.max(this.Kp,d)}.bind(a)))}}}
f.BB=function(){if(null!=this.Ld){var a=Mi(this.Bj),b=a.width,a=a.height;this.Bj.height=a;this.Bj.width=b;this.Ki.height=a;this.Ki.width=b;Iq(this);if(null!=this.Be)for(var b=Math.round(b/this.Ld.eh),b=0<b?b:1,c=this.oL/this.Kp,d,e=0,g=this.nk.length;e<g;e++)d=this.nk[e]*c*a,this.kl.fillRect(b*e,a,b,-Math.round(d))}};f.iC=function(a){if(null!=this.Be)for(var b=0,c=0,d=this.Be.length;c<d;c++)if(b+=this.Be[c],b/this.Nt>=a)return c};
f.CB=function(){if(null!=this.Ld){var a=Mi(this.Ki),b=a.width,a=a.height;this.Ki.width=b;var c;c=0==this.zk&&0<this.Wi?Math.round(this.Pq/this.Wi*b):Math.round(this.Pq/this.zk*b);b=0==this.Wi?0:Math.round(this.St/this.Wi*b);this.Fh.strokeStyle="gray";this.Fh.moveTo(c,a);this.Fh.lineTo(b,0);this.Fh.lineWidth=.5;this.Fh.stroke();b=c+(b-c)/2;this.Fh.moveTo(b,a);this.Fh.lineTo(b,a-20);this.Fh.lineWidth=.5;this.Fh.stroke()}};f.update=function(){this.BB();this.EF();this.CB()};
f.EF=function(){null!=this.Ld&&(null==this.zk&&(this.zk=parseInt(this.Ld.Zh),this.Wi=parseInt(this.Ld.eh),this.zk=isNaN(this.zk)?null:this.zk,this.Wi=isNaN(this.Wi)?null:this.Wi,this.Pq=this.zk,this.St=this.Wi),this.Pq=parseInt(this.Ld.Zh),this.St=parseInt(this.Ld.eh),this.Lp.innerHTML=this.Pq,this.Jp.innerHTML=this.St)};
f.e=function(){Hq.c.e.call(this);null!=this.Jp&&(Y(this.Jp),delete this.Jp);null!=this.Lp&&(Y(this.Lp),delete this.Lp);null!=this.Bj&&(Y(this.Bj),delete this.Bj);null!=this.Ki&&(Y(this.Ki),delete this.Ki);null!=this.Be&&(Hb(this.Be),delete this.Be);null!=this.nk&&(Hb(this.nk),delete this.nk);delete this.Nt;delete this.Kp;delete this.kl;delete this.Fh;delete this.zk;delete this.Wi};t("xiv.ui.ctrl.Histogram.EventType",{});t("xiv.ui.ctrl.Histogram.ID_PREFIX",Hq.ID_PREFIX);
t("xiv.ui.ctrl.Histogram.CSS_SUFFIX",Hq.CSS_SUFFIX);t("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",Hq.LEVEL_CUTOFF);t("xiv.ui.ctrl.Histogram.prototype.render",Hq.prototype.k);t("xiv.ui.ctrl.Histogram.prototype.draw",Hq.prototype.BB);t("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",Hq.prototype.iC);t("xiv.ui.ctrl.Histogram.prototype.drawLine",Hq.prototype.CB);t("xiv.ui.ctrl.Histogram.prototype.update",Hq.prototype.update);t("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",Hq.prototype.EF);
t("xiv.ui.ctrl.Histogram.prototype.disposeInternal",Hq.prototype.e);function Jq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);Z.call(this);this.vB=a;this.pk=b;this.Jo=null;this.lb=new dj(this.a());this.Dt()}w(Jq,Z);t("nrg.ui.ResizeDragger",Jq);Jq.ID_PREFIX="nrg.ui.ResizeDragger";Jq.CSS_SUFFIX={};f=Jq.prototype;f.ah=null;f.Ei=null;f.Zm=null;f.Xo=null;f.vh=null;f.xi=null;f.Zr=null;f.Wo=null;f.offsetX=0;f.LE=function(a){this.offsetX=a};f.offsetY=0;f.HO=function(a){this.offsetY=a};f.Xa=null;f.Ci=null;f.Ba=null;f.de=null;f.ya=null;f.nc=null;
f.ae=!1;f.Ce=new vh(10,10);f.Ad=function(){return this.Jo};f.Ti=function(a){this.Jo=a};f.YB=function(){return this.lb};f.XB=function(){return this.vB};f.Bd=function(){return this.a()};
f.Dk=function(){this.Ci=Mi(this.a());this.Xa=yi(this.a());this.ah=-1*this.Ci.height/2+this.offsetY;this.Ei=-1*this.Ci.width/2+this.offsetX;this.lb.Mg()||this.ae||(this.Ba=ub(yi(this.pk)),this.de=ub(Mi(this.pk)),this.Ba.left=this.Ba.x,this.Ba.top=this.Ba.y,this.Ba.right=this.Ba.x+this.de.width,this.Ba.bottom=this.Ba.y+this.de.height,this.ya=ub(yi(this.Jo)),this.nc=ub(Mi(this.Jo)),this.ya.left=this.ya.x,this.ya.top=this.ya.y,this.ya.right=this.ya.x+this.nc.width,this.ya.bottom=this.ya.y+this.nc.height,
this.ph&&this.ph(this))};f.HE=function(a){return this.Ce=a};f.Dt=function(){P(this.lb,"start",this.qx.bind(this));P(this.lb,"drag",this.Qg.bind(this));P(this.lb,"end",this.px.bind(this))};f.qx=function(){this.dispatchEvent({type:"start_resize"})};f.Qg=function(){this.Dk();this.dispatchEvent({type:"resize",rO:this.Ba,de:this.de,iI:this.ya,nc:this.nc});null!=this.of&&this.of()};f.px=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.lb.Mg()||this.ae||this.Dk()};f.If=function(){};
f.$f=function(a,b,c){this.Dk();a=this.If(a);la(c)&&0===c?ri(this.a(),a.end):Kq(this,a.start,a.end,b,c)};function Kq(a,b,c,d,e){a.yk=new Yk(a.a(),[b.x,b.y],[c.x,c.y],la(e)?e:500,wl);P(a.yk,"begin",function(){this.ae=!0;this.qx()}.bind(a));P(a.yk,"animate",a.Qg.bind(a));P(a.yk,"end",function(){this.ae=!1;this.yk.g();Wc(this.yk);this.yk.Df();this.yk=null;wi(this.a(),c);this.px();d&&d()}.bind(a));a.yk.play()}
f.e=function(){delete this.NT;delete this.OT;delete this.Ei;delete this.Zm;delete this.Xo;delete this.vh;delete this.xi;delete this.Zr;delete this.Wo;delete this.ae;qb(this.Ce);delete this.Ce;delete this.pk;delete this.Jo;qb(this.Xa);delete this.Xa;qb(this.Ci);delete this.Ci;qb(this.Ba);delete this.Ba;qb(this.de);delete this.de;qb(this.ya);delete this.ya;qb(this.nc);delete this.nc;Y(this.lb.handle);this.lb.handle=null;Wc(this.lb);this.lb.g();delete this.lb;delete this.vB};
t("nrg.ui.ResizeDragger.EventType",{cu:"resize",PG:"start_resize",OG:"end_resize"});t("nrg.ui.ResizeDragger.ID_PREFIX",Jq.ID_PREFIX);t("nrg.ui.ResizeDragger.CSS_SUFFIX",Jq.CSS_SUFFIX);t("nrg.ui.ResizeDragger.ANIM_MED",500);t("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Jq.prototype.ah);t("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Jq.prototype.Ei);t("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Jq.prototype.Zm);t("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Jq.prototype.Xo);
t("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Jq.prototype.vh);t("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Jq.prototype.xi);t("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Jq.prototype.Zr);t("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Jq.prototype.Wo);t("nrg.ui.ResizeDragger.prototype.offsetX",Jq.prototype.offsetX);t("nrg.ui.ResizeDragger.prototype.setOffsetX",Jq.prototype.LE);t("nrg.ui.ResizeDragger.prototype.offsetY",Jq.prototype.offsetY);
t("nrg.ui.ResizeDragger.prototype.setOffsetY",Jq.prototype.HO);t("nrg.ui.ResizeDragger.prototype.handlePos",Jq.prototype.Xa);t("nrg.ui.ResizeDragger.prototype.handleSize",Jq.prototype.Ci);t("nrg.ui.ResizeDragger.prototype.resizeePos",Jq.prototype.Ba);t("nrg.ui.ResizeDragger.prototype.resizeeSize",Jq.prototype.de);t("nrg.ui.ResizeDragger.prototype.boundaryPos",Jq.prototype.ya);t("nrg.ui.ResizeDragger.prototype.boundarySize",Jq.prototype.nc);t("nrg.ui.ResizeDragger.prototype.isAnimating",Jq.prototype.ae);
t("nrg.ui.ResizeDragger.prototype.minSize",Jq.prototype.Ce);t("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Jq.prototype.Ad);t("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Jq.prototype.Ti);t("nrg.ui.ResizeDragger.prototype.getDragger",Jq.prototype.YB);t("nrg.ui.ResizeDragger.prototype.getDirection",Jq.prototype.XB);t("nrg.ui.ResizeDragger.prototype.getHandle",Jq.prototype.Bd);t("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Jq.prototype.Dk);
t("nrg.ui.ResizeDragger.prototype.setMinSize",Jq.prototype.HE);t("nrg.ui.ResizeDragger.prototype.onResizeStart",Jq.prototype.qx);t("nrg.ui.ResizeDragger.prototype.onResize",Jq.prototype.Qg);t("nrg.ui.ResizeDragger.prototype.onResizeEnd",Jq.prototype.px);t("nrg.ui.ResizeDragger.prototype.update",Jq.prototype.update);t("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Jq.prototype.If);t("nrg.ui.ResizeDragger.prototype.slideToLimits",Jq.prototype.$f);
t("nrg.ui.ResizeDragger.prototype.disposeInternal",Jq.prototype.e);function Lq(a){Jq.call(this,"right",a)}w(Lq,Jq);t("nrg.ui.ResizeDraggerRight",Lq);Lq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Lq.CSS_SUFFIX={};Lq.prototype.ph=function(){this.Zm=this.Ba.left+this.Ce.width+this.Ei;this.Xo=this.ya.right+this.Ei;this.Zr=this.Xo-this.Zm};t("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Lq.prototype.ph);Lq.prototype.of=function(){Ki(this.pk,Math.min(Math.max(this.de.width+(this.ae?this.Xa.x-this.Ba.right+this.Ei:this.lb.clientX-this.lb.gy),this.Ce.width),this.nc.width))};
t("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Lq.prototype.of);Lq.prototype.update=function(a){this.lb.Mg()||this.ae||(Lq.c.update.call(this,a),fj(this.lb,new xh(this.Zm,this.Ba.y,this.Zr,0)),wi(this.a(),this.Ba.right+this.Ei,this.Ba.y),Li(this.a(),this.de.height))};Lq.prototype.If=function(a){return{start:new sh(this.Xa.x,this.Xa.y),end:"MIN"==a?new sh(this.Zm,this.Xa.y):new sh(this.Xo,this.Xa.y)}};t("nrg.ui.ResizeDraggerRight.ID_PREFIX",Lq.ID_PREFIX);
t("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Lq.CSS_SUFFIX);t("nrg.ui.ResizeDraggerRight.prototype.update",Lq.prototype.update);t("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Lq.prototype.If);function Mq(a){Jq.call(this,"right",a)}w(Mq,Jq);t("nrg.ui.ResizeDraggerBottom",Mq);Mq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Mq.CSS_SUFFIX={};Mq.prototype.ph=function(){this.vh=this.Ba.top+this.Ce.height+this.ah;this.xi=this.ya.bottom+this.ah;this.Wo=this.xi-this.vh};t("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Mq.prototype.ph);Mq.prototype.of=function(){Li(this.pk,Math.max(this.de.height+(this.Xa.y-this.Ba.bottom),this.Ce.height))};
t("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Mq.prototype.of);Mq.prototype.update=function(){this.lb.Mg()||this.ae||(Mq.c.update.call(this),fj(this.lb,new xh(this.ya.x,this.vh,0,this.xi)),wi(this.a(),this.Ba.x,this.Ba.bottom+this.ah))};Mq.prototype.If=function(a){return{start:new sh(this.Xa.x,this.Xa.y),end:"MIN"==a?new sh(this.Xa.x,this.vh):new sh(this.Xa.x,this.xi)}};t("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Mq.ID_PREFIX);t("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Mq.CSS_SUFFIX);
t("nrg.ui.ResizeDraggerBottom.prototype.update",Mq.prototype.update);t("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Mq.prototype.If);function Nq(a){Jq.call(this,"right",a)}w(Nq,Jq);t("nrg.ui.ResizeDraggerTop",Nq);Nq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Nq.CSS_SUFFIX={};Nq.prototype.ph=function(){this.vh=this.ya.top-this.ah;this.xi=this.Ba.bottom-this.Ce.height+this.ah;this.Wo=this.xi-this.vh};t("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Nq.ph);Nq.prototype.of=function(){var a=this.Xa.y-this.ah,b=this.de.height+(this.ae?this.Ba.y-a:this.lb.hy-this.lb.clientY);this.pk.style.top=a.toString()+"px";Li(this.pk,Math.max(b,this.Ce.height))};
Nq.prototype.update=function(){this.lb.Mg()||this.ae||(Nq.c.update.call(this),fj(this.lb,new xh(this.ya.x,this.vh,0,this.Wo)),wi(this.a(),this.Ba.x,this.Ba.y+this.ah))};Nq.prototype.If=function(a){return{start:new sh(this.Xa.x,this.Xa.y),end:"MIN"==a?new sh(this.Xa.x,this.xi):new sh(this.Xa.x,this.vh)}};t("nrg.ui.ResizeDraggerTop.ID_PREFIX",Nq.ID_PREFIX);t("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Nq.CSS_SUFFIX);t("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Nq.prototype.ph);
t("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Nq.prototype.of);t("nrg.ui.ResizeDraggerTop.resizeMethod",Nq.of);t("nrg.ui.ResizeDraggerTop.prototype.update",Nq.prototype.update);t("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Nq.prototype.If);function Oq(a){Jq.call(this,"right",a)}w(Oq,Jq);t("nrg.ui.ResizeDraggerTopRight",Oq);Oq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Oq.CSS_SUFFIX={};Oq.prototype.Dk=function(){Oq.c.Dk.call(this);this.lb.Mg()||this.ae||(Lq.prototype.ph.bind(this)(),Nq.prototype.ph.bind(this)())};Oq.prototype.Qg=function(){Oq.c.Qg.call(this);Lq.prototype.of.bind(this)();Nq.prototype.of.bind(this)()};
Oq.prototype.update=function(a){this.lb.Mg()||this.ae||(Oq.c.update.call(this,a),fj(this.lb,new xh(this.ya.x+this.Ei,this.ya.y+this.ah,this.nc.width,this.nc.height)),wi(this.a(),this.Ba.right+this.Ei,this.Ba.y+this.ah))};
Oq.prototype.If=function(a){var b=new sh(this.Xa.x,this.Xa.y),c;"TOP_LEFT"==a?c=new sh(this.ya.x,this.ya.y):"TOP_RIGHT"==a?c=new sh(this.ya.x+this.nc.width,this.ya.y):"BOTTOM_RIGHT"==a?c=new sh(this.ya.x+this.nc.width,this.ya.y+this.nc.height):"BOTTOM_LEFT"==a&&(c=new sh(this.ya.x,this.ya.y+this.nc.height));return{start:b,end:c}};t("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Oq.ID_PREFIX);t("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Oq.CSS_SUFFIX);
t("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Oq.prototype.Dk);t("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Oq.prototype.Qg);t("nrg.ui.ResizeDraggerTopRight.prototype.update",Oq.prototype.update);t("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Oq.prototype.If);function Pq(a){Jq.call(this,"right",a)}w(Pq,Jq);t("nrg.ui.ResizeDraggerLeft",Pq);Pq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Pq.CSS_SUFFIX={};Pq.prototype.of=function(){Ki(this.pk,Math.min(Math.max(this.de.width+(this.Ba.x-this.Xa.x),this.Ce.width),this.nc.width));wi(this.a(),this.Xa.x,this.Ba.y)};t("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Pq.prototype.of);
Pq.prototype.update=function(a){this.lb.Mg()||this.ae||(Pq.c.update.call(this,a),fj(this.lb,new xh(this.ya.x-this.Ci.width,this.ya.y,this.nc.width-this.Ce.width-this.Ci.width,0)),wi(this.a(),this.Ba.x-this.Ci.width,this.Ba.y))};Pq.prototype.If=function(a){return{start:new sh(this.Xa.x,this.Xa.y),end:"MIN"==a?new sh(this.ya.x+this.Ce.width,this.Xa.y):new sh(this.ya.x+this.nc.width-this.Ce.width,this.Xa.y)}};t("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Pq.ID_PREFIX);
t("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Pq.CSS_SUFFIX);t("nrg.ui.ResizeDraggerLeft.resizeMethod",Pq.of);t("nrg.ui.ResizeDraggerLeft.prototype.update",Pq.prototype.update);t("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Pq.prototype.If);function Qq(a,b){Z.call(this);this.l=Gh(a);this.je={};this.Rs=this.Ss=20;this.Ln(b||Qq.YS)}w(Qq,Z);t("nrg.ui.Resizable",Qq);Qq.ID_PREFIX="nrg.ui.Resizable";Qq.CSS_SUFFIX={FP:"boundary"};var Rq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Sq=["RIGHT","BOTTOM"],Tq=new xh(0,0,600,600);f=Qq.prototype;f.AO=function(a,b){this.RS(a);if(0>b)throw Error("Threshold must be greater than zero!");this.LS[a]=b};f.Bd=function(a){return this.je[a].Bd()};f.jn=function(a){return this.je[a]};
f.MJ=function(){var a=[];N(lb(this.je),function(b){a.push(b.Bd())});return a};f.Ad=function(){return this.zg};f.Ti=function(a){this.zg=a;if(this.zg.parentNode!==this.l.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.GE=function(a){this.Rs=a};f.JE=function(a){this.Ss=a};f.dK=function(){return this.Rs};f.eK=function(){return this.Ss};
f.Ln=function(a){a=a||"DEFAULT";ja(a)&&(a="ALL"==a.toUpperCase()?Rq:"DEFAULT"==a.toUpperCase()?Sq:[a]);Uq(this);N(a,function(a){if(!ja(a))throw Error("String required!");if(!Gb(Rq,a))throw Error("Invalid direction: ",a);this.fA(a)}.bind(this))};f.bv=function(a){if(!Gb(Rq,a))throw Error("Invalid draggerDir '"+a);};f.nL=function(a){this.bv(a);if(!this.je[a])throw Error("No ResizeDragger for "+a);};f.$f=function(a,b,c,d){a=a.toUpperCase();this.bv(a);this.update();this.je[a].$f(b,c,d)};
function Vq(a,b){switch(a){case "TOP":return new Nq(b);case "BOTTOM":return new Mq(b);case "LEFT":return new Pq(b);case "RIGHT":return new Lq(b);case "TOP_RIGHT":return new Oq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.fA=function(a){if(a in this.je)throw Error("Resize direction "+a+" already in use.");this.je[a]=Vq(a,this.l);P(this.je[a],"start_resize",this.eN.bind(this));P(this.je[a],"resize",this.Sl.bind(this));P(this.je[a],"end_resize",this.dN.bind(this));this.update()};f.update=function(){if(null!=this.zg){var a=new vh(this.Ss,this.Rs);I(this.je,function(b){this.zg&&this.zg.parentNode&&Th(this.zg.parentNode,b.Bd());b.Ad()!==this.zg&&b.Ti(this.zg);b.HE(a);b.Dk();b.update()}.bind(this))}};f.eN=function(){this.dispatchEvent({type:"resize_start"})};
f.Sl=function(a){this.dispatchEvent({type:"resize",rO:a.Ba,de:a.de,iI:a.ya,nc:a.nc})};f.dN=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Uq(a){I(a.je,function(a){a&&(Wc(a),a.g())});qb(a.je)}f.e=function(){Qq.c.e.call(this);Uq(this);delete this.je;this.zg&&(Y(this.zg.parentNode),delete this.zg)};t("nrg.ui.Resizable.EventType",{cu:"resize",PG:"resize_start",OG:"resize_end"});t("nrg.ui.Resizable.ID_PREFIX",Qq.ID_PREFIX);t("nrg.ui.Resizable.CSS_SUFFIX",Qq.CSS_SUFFIX);
t("nrg.ui.Resizable.DIRECTIONS",Rq);t("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Sq);t("nrg.ui.Resizable.DEFAULT_LIMITS",Tq);t("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);t("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);t("nrg.ui.Resizable.createResizeDragger",Vq);t("nrg.ui.Resizable.prototype.setBoundThreshold",Qq.prototype.AO);t("nrg.ui.Resizable.prototype.getHandle",Qq.prototype.Bd);t("nrg.ui.Resizable.prototype.getResizeDragger",Qq.prototype.jn);t("nrg.ui.Resizable.prototype.getHandles",Qq.prototype.MJ);
t("nrg.ui.Resizable.prototype.getBoundaryElement",Qq.prototype.Ad);t("nrg.ui.Resizable.prototype.setBoundaryElement",Qq.prototype.Ti);t("nrg.ui.Resizable.prototype.setMinHeight",Qq.prototype.GE);t("nrg.ui.Resizable.prototype.setMinWidth",Qq.prototype.JE);t("nrg.ui.Resizable.prototype.getMinHeight",Qq.prototype.dK);t("nrg.ui.Resizable.prototype.getMinWidth",Qq.prototype.eK);t("nrg.ui.Resizable.prototype.setResizeDirections",Qq.prototype.Ln);t("nrg.ui.Resizable.prototype.checkDirectionValid",Qq.prototype.bv);
t("nrg.ui.Resizable.prototype.hasDragger",Qq.prototype.nL);t("nrg.ui.Resizable.prototype.slideToLimits",Qq.prototype.$f);t("nrg.ui.Resizable.prototype.addResizeDirection",Qq.prototype.fA);t("nrg.ui.Resizable.prototype.update",Qq.prototype.update);t("nrg.ui.Resizable.prototype.disposeInternal",Qq.prototype.e);function Wq(a){Z.call(this);this.nd=a}w(Wq,Z);t("xiv.ui.layouts.LayoutFrame",Wq);Wq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Wq.CSS_SUFFIX={};f=Wq.prototype;f.ff=function(){return this.nd};f.Kc=null;f.L=function(){return this.Yq};f.Ln=function(a){this.Yq=this.Yq?this.Yq:new Qq(this.a());this.Yq.Ln(a)};f.e=function(){Wq.c.e.call(this);delete this.nd};t("xiv.ui.layouts.LayoutFrame.EventType",{});t("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Wq.ID_PREFIX);t("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Wq.CSS_SUFFIX);
t("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Wq.prototype.ff);t("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Wq.prototype.L);t("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Wq.prototype.Ln);t("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Wq.prototype.e);function Xq(){if(!this.constructor.xf)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");Z.call(this);this.h={}}w(Xq,Z);t("xiv.ui.layouts.Layout",Xq);var Yq="Slider_"+C(),Zq="FrameDisplay_"+C(),$q="ZoomDisplay_"+C(),ar="Crosshairs_"+C(),br={va:Yq,ge:Zq,lg:$q,xc:ar};Xq.ID_PREFIX="xiv.ui.layouts.Layout";Xq.CSS_SUFFIX={};f=Xq.prototype;f.cc=20;
f.kd=20;f.EO=function(a){this.kd=a};f.FO=function(a){this.cc=a};f.VJ=function(){return this.h};f.Vv=function(a){return this.h[a]};f.UJ=function(a){window.console.log(a,this.h[a]);var b={};I(br,function(c){b[c]=this.h[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};f.ff=function(){return this.constructor.xf};f.dA=function(a){this.h=this.h?this.h:{};this.h[a.ff()]=a};f.uh=function(){this.dispatchEvent({type:"q"})};
f.Kx=function(){I(this.fp(),function(a){null!=a.va&&(a.va.g(),delete a.va);null!=a.xc&&(a.xc.g(),delete a.xc);null!=a.ge&&(a.ge.g(),delete a.ge);null!=a.lg&&(a.lg.g(),delete a.lg)})};f.Lq=function(){I(this.fp(),function(a){null!=a.va&&(a.va.j(),a.va.F(a.va.I()));null!=a.xc&&a.xc.j();null!=a.ge&&a.ge.j();null!=a.lg&&a.lg.j()})};f.j=function(){Xq.c.j.call(this);this.uh()};f.e=function(){Xq.c.e.call(this);delete this.kd;delete this.cc;this.Vo(this.tG);delete this.tG};
t("xiv.ui.layouts.Layout.EventType",{cu:"q"});t("xiv.ui.layouts.Layout.INTERACTORS",br);t("xiv.ui.layouts.Layout.ID_PREFIX",Xq.ID_PREFIX);t("xiv.ui.layouts.Layout.CSS_SUFFIX",Xq.CSS_SUFFIX);t("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Xq.prototype.EO);t("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Xq.prototype.FO);t("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Xq.prototype.VJ);t("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Xq.prototype.Vv);
t("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Xq.prototype.UJ);t("xiv.ui.layouts.Layout.prototype.getTitle",Xq.prototype.ff);t("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Xq.prototype.dA);t("xiv.ui.layouts.Layout.prototype.dispatchResize",Xq.prototype.uh);t("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Xq.prototype.Kx);t("xiv.ui.layouts.Layout.prototype.updateInteractors",Xq.prototype.Lq);t("xiv.ui.layouts.Layout.prototype.updateStyle",Xq.prototype.j);
t("xiv.ui.layouts.Layout.prototype.disposeInternal",Xq.prototype.e);function cr(){Z.call(this)}w(cr,ip);t("xiv.ui.layouts.interactors.ZoomDisplay",cr);cr.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";cr.prototype.Xh=function(){this.Fg.innerHTML="Zoom level:&nbsp"+this.Ta.value+"%"};t("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",cr.ID_PREFIX);t("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",cr.prototype.Xh);function dr(a,b){Sp.call(this,a,b);this.Ka.sk(0)}w(dr,Sp);dr.prototype.P=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};dr.prototype.iB=function(){var a=this.a(),b=Hh(null,"goog-slider-thumb",a)[0];b||(b=this.ml(),a.appendChild(b));this.pa=this.Dc=b};dr.prototype.ml=function(){var a=this.H().r("div","goog-slider-thumb");Sj(a,"button");return a};function er(a){dr.call(this);this.constructor.bo=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.Hc=this.constructor.bo;Z.prototype.Pr.bind(this)();null!=a&&this.Vi(a)}w(er,dr);t("nrg.ui.Slider",er);er.ID_PREFIX="nrg.ui.Slider";er.CSS_SUFFIX={aH:"track",qz:"track-hovered",eu:"thumb",oz:"thumb-hovered"};f=er.prototype;f.xn=!1;f.Bq=!1;f.YO=function(a){this.Bq=a};f.XO=function(a){this.Bq=a};
f.k=function(a){this.l=W("div",{id:er.ID_PREFIX+"_Widget_"+C()});this.Eb(this.l);a=null!=a?a:document.body;a.appendChild(this.l);this.Kd=W("div",{id:er.ID_PREFIX+"_Track_"+C()});this.l.appendChild(this.Kd);this.Uc=Kh("goog-slider-thumb",this.l);P(this,"change",this.AM.bind(this));P(this.Uc,"mouseover",this.hN.bind(this));P(this.Uc,"mouseout",this.gN.bind(this));P(this.Kd,"mouseover",this.CN.bind(this));P(this.Kd,"mouseout",this.BN.bind(this));P(this,"l",this.mN.bind(this));P(this,"m",this.jN.bind(this));
this.Vi(this.bc().toLowerCase())};f.a=function(){return this.l};f.KK=function(){return this.Kd};f.EK=function(){return this.Uc};f.Ho=function(a){null==this.Kk&&(this.Kk={});if(null==this.Kk[a.id]){var b=new Np(a);b.addEventListener("mousewheel",this.ZM,!1,this);this.Kk[a.id]=b}};f.fI=function(a){null==this.Gk&&(this.Gk={});if(null==this.Gk[a.id]){var b=new Sn(a);P(b,"key",this.Oi.bind(this));this.Gk[a.id]=b}};f.Oi=function(a){window.console.log("KEY",a)};
f.j=function(){var a=this.I(),a=eq(this,a);"horizontal"==this.bc().toLowerCase()?this.Uc.style.left=a.x.toString()+"px":"vertical"==this.bc().toLowerCase()&&(this.Uc.style.left=a.y.toString()+"px")};f.Vi=function(a){er.c.Vi.call(this,a);this.ga&&fr(this,this.bc().toLowerCase())};function fr(a,b){function c(a,c){rh(a,[Bk(c,"horizontal"),Bk(c,"vertical")],[c,Bk(c,b)])}c(a.l,a.constructor.Hc);c(a.Kd,er.CSS.aH);c(a.Uc,er.CSS.eu)}f.By=!1;f.zv=1;f.UE=function(a,b){this.By=a;la(b)&&(this.zv=b)};
f.ZM=function(a){var b=Math.abs(a.Zd)<Math.abs(a.vi)?a.vi:a.Zd;this.By?this.F(Math.round(this.I()-b*this.zv)):this.F(Math.round(this.I()-(0>b?-1:1)));this.dispatchEvent({type:"s"});a.preventDefault()};f.Cr=function(a){this.Rh=this.Rh?this.Rh:[];this.Rh.push(a);gr(this)};f.Lu=function(a){this.Uh=this.Uh?this.Uh:[];this.Uh.push(a);hr(this)};f.AM=function(a){a.stopPropagation();this.xn&&(ir(this),jr(this));this.Bq||this.dispatchEvent({type:"r",value:this.I(),Mw:this.Aa(),Kw:this.la()});this.Bq=!1};
function ir(a){S(a.Uc,er.CSS.oz);null!=a.Rh&&N(a.Rh,function(a){S(this.Uc,a)}.bind(a))}function jr(a){S(a.Kd,er.CSS.qz);null!=a.Uh&&N(a.Uh,function(a){S(this.Kd,a)}.bind(a))}function gr(a){ph(a.Uc,er.CSS.oz);null!=a.Rh&&N(a.Rh,function(a){ph(this.Uc,a)}.bind(a))}function hr(a){ph(a.Kd,er.CSS.qz);null!=a.Uh&&N(a.Uh,function(a){ph(this.Kd,a)}.bind(a))}f.hN=function(a){a.stopPropagation();ir(this);jr(this)};f.CN=function(){jr(this)};f.gN=function(){this.xn||(gr(this),hr(this))};
f.BN=function(){this.xn||hr(this)};f.mN=function(){this.xn=!0};f.jN=function(){this.xn=!1;gr(this);hr(this)};
f.e=function(){er.c.e.call(this);delete this.Bq;null!=this.l&&(Wc(this),Y(this.l),delete this.l);null!=this.Uc&&(Wc(this.Uc),Y(this.Uc),delete this.Uc);null!=this.Kd&&(Wc(this.Kd),Y(this.Kd),delete this.Kd);null!=this.Gk&&(I(this.Gk,function(a){Wc(a);a.g()}),qb(this.Gk),delete this.Gk);null!=this.Kk&&(I(this.Kk,function(a){Wc(a);a.g()}),qb(this.Kk),delete this.Kk);null!=this.Rh&&(Hb(this.Rh),delete this.Rh);null!=this.Uh&&(Hb(this.Uh),delete this.Uh);delete this.By;delete this.zv;delete this.xn};
t("nrg.ui.Slider.EventType",{dR:"r",AQ:"s"});t("nrg.ui.Slider.ID_PREFIX",er.ID_PREFIX);t("nrg.ui.Slider.CSS_SUFFIX",er.CSS_SUFFIX);t("nrg.ui.Slider.prototype.suspendSlideEvent",er.prototype.YO);t("nrg.ui.Slider.prototype.suspendChangeEvent",er.prototype.XO);t("nrg.ui.Slider.prototype.render",er.prototype.k);t("nrg.ui.Slider.prototype.getElement",er.prototype.a);t("nrg.ui.Slider.prototype.getTrack",er.prototype.KK);t("nrg.ui.Slider.prototype.getThumb",er.prototype.EK);
t("nrg.ui.Slider.prototype.bindToMouseWheel",er.prototype.Ho);t("nrg.ui.Slider.prototype.bindToArrowKeys",er.prototype.fI);t("nrg.ui.Slider.prototype.updateStyle",er.prototype.j);t("nrg.ui.Slider.prototype.setOrientation",er.prototype.Vi);t("nrg.ui.Slider.prototype.setUseDeltaToScroll",er.prototype.UE);t("nrg.ui.Slider.prototype.addThumbHoverClass",er.prototype.Cr);t("nrg.ui.Slider.prototype.addTrackHoverClass",er.prototype.Lu);t("nrg.ui.Slider.prototype.disposeInternal",er.prototype.e);function kr(){er.call(this)}w(kr,er);t("xiv.ui.layouts.interactors.Slider",kr);kr.ID_PREFIX="xiv.ui.layouts.interactors.Slider";kr.CSS_SUFFIX={};kr.prototype.k=function(){};kr.prototype.e=function(){kr.c.e.call(this)};t("xiv.ui.layouts.interactors.Slider.EventType",{});t("xiv.ui.layouts.interactors.Slider.ID_PREFIX",kr.ID_PREFIX);t("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",kr.CSS_SUFFIX);t("xiv.ui.layouts.interactors.Slider.prototype.render",kr.prototype.k);
t("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",kr.prototype.e);function lr(){Z.call(this)}w(lr,Z);t("xiv.ui.layouts.interactors.Crosshairs",lr);lr.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";lr.CSS_SUFFIX={dQ:"horizontal",MR:"vertical"};f=lr.prototype;f.bh=null;f.Lg=null;f.WE=function(a){null!=a&&(this.bh.style.left=a.toString()+"px")};f.XE=function(a){null!=a&&(this.Lg.style.top=a.toString()+"px")};f.k=function(a){this.bh=mr(this,"vertical");this.Lg=mr(this,"horizontal");a.appendChild(this.Lg);a.appendChild(this.bh)};
f.Fq=function(a){a=!1===a?"hidden":"visible";this.bh.style.visibility=a;this.Lg.style.visibility=a};function mr(a,b){b=b.toLowerCase();if(!nb(lr.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return W("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+C(),"class":a.constructor.Hc+"-"+b.toLowerCase()})}f.e=function(){lr.c.e.call(this);Y(this.bh);delete this.bh;Y(this.Lg);delete this.Lg};t("xiv.ui.layouts.interactors.Crosshairs.EventType",{});t("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",lr.ID_PREFIX);
t("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",lr.CSS_SUFFIX);t("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",lr.prototype.bh);t("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",lr.prototype.Lg);t("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",lr.prototype.WE);t("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",lr.prototype.XE);t("xiv.ui.layouts.interactors.Crosshairs.prototype.render",lr.prototype.k);
t("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",lr.prototype.Fq);t("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",lr.prototype.e);function nr(a){Xq.call(this);a=null!=a?a:lb(or);a=h(a)?a:[a];N(a,function(b,c){a[c]=b.toUpperCase()});pr(this,a);qr(this,a);null!=this.h.X&&this.Ge();null!=this.h.Y&&this.Yg();null!=this.h.Z&&this.wk();null!=this.h.V&&this.rq();this.j()}w(nr,Xq);t("xiv.ui.layouts.XyzvLayout",nr);nr.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var or={ih:"X",We:"Y",um:"Z",$q:"V"};
nr.CSS_SUFFIX={ih:"x",We:"y",um:"z",$q:"v",va:"slider",hj:"slider-thumb",du:"slider-thumb-hovered",ij:"slider-track",eR:"slider-track-x",fR:"slider-track-y",gR:"slider-track-z",$P:"framenumber"};function rr(a,b,c,d){this.va=a;this.ge=b;this.xc=c;this.lg=d}f=nr.prototype;f.oE=0;f.Ui=function(a,b){this.h[a].Ln(b);var c=this.fB(a);Th(this.a(),c);c.style.position="absolute";this.h[a].L().Ti(c);this.h[a].L().update()};
f.fB=function(a){return W("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+C(),"class":Bk(this.constructor.Hc,a.toLowerCase()+"-resizeboundary")})};function pr(a,b){if(b.length>kb(or))throw Error("Invalid amount of frames "+b+". Must be "+or);N(b,function(a){if(!nb(or,a))throw Error("Invalid frame title ",a);}.bind(a))}function qr(a,b){var c="";N(b,function(a,b){c=a.toUpperCase();this.dA(new Wq(c));Th(this.a(),this.h[c].a());S(this.h[c].a(),nr.CSS[b])}.bind(a))}f.iP=function(a){a.Sx(this.fp())};
f.Sx=function(a){this.Pf(function(b,c){null!=a[c]&&(b[Yq]=a[c].va,Y(a[c].va.a()),b.a().appendChild(a[c].va.a()),b[Zq]=a[c].ge,Y(a[c].ge.a()),b.a().appendChild(a[c].ge.a()),b[ar]=a[c].xc,b.a().appendChild(a[c].xc.bh),b.a().appendChild(a[c].xc.Lg))})};f.bA=function(){this.Kx();sr(this);tr(this);ur(this);vr(this)};f.fp=function(){var a={};this.Pf(function(b,c){a[c]=new rr(b[Yq],b[Zq],b[ar],b[$q])});return a};f.gC=function(a){a=this.h[a];return new rr(a[Yq],a[Zq],a[ar])};f.fC=function(a,b){return this.h[a][b]};
f.cC=function(a){return this.h[a]};function sr(a){var b;a.Pf(function(a,d){b=new er("horizontal");b.k(a.a());b.a().id=d+"_LayoutFrameSlider_"+C();a[Yq]=b;rh(b.a(),null,[nr.CSS.va]);rh(b.Uc,null,[nr.CSS.hj]);rh(b.Kd,null,[nr.CSS.ij,Bk(nr.CSS.ij,d.toLowerCase())]);b.Cr(nr.CSS.du)}.bind(a))}function tr(a){var b;a.Pf(function(a){b=new jp;b.k(a.a());a[Zq]=b}.bind(a))}function ur(a){var b;a.Pf(function(a){b=new cr;b.k(a.a());a[$q]=b}.bind(a))}
function vr(a){var b;a.Pf(function(a){b=new lr;a[ar]=b;b.k(a.a());a.a().appendChild(b.Lg);a.a().appendChild(b.bh)}.bind(a))}f.Pf=function(a){I(or,function(b){b=b.toUpperCase();null!=this.h[b]&&"V"!=b&&a(this.h[b],b)}.bind(this))};f.loop=function(a){I(or,function(b){b=b.toUpperCase();a(this.h[b],b)}.bind(this))};f.Ge=function(){null!=this.constructor.CSS&&S(this.h.X.a(),this.constructor.CSS.ih)};f.Yg=function(){null!=this.constructor.CSS&&S(this.h.Y.a(),this.constructor.CSS.We)};
f.mk=function(a){this.oi();var b=Mi(this.h.X.a()),c=Mi(this.h.Y.a()),d=Mi(this.h.Z.a());a(b,c,d,b.width+c.width+d.width-this.q.width)};f.wk=function(){null!=this.constructor.CSS&&S(this.h.Z.a(),this.constructor.CSS.um)};f.rq=function(){null!=this.constructor.CSS&&S(this.h.V.a(),this.constructor.CSS.$q)};f.lf=fa;f.Hh=fa;f.NM=fa;f.Zs=fa;f.Ke=fa;f.rf=fa;f.Le=fa;f.fm=fa;f.e=function(){nr.c.e.call(this);delete this.oE};t("xiv.ui.layouts.XyzvLayout.TITLE","XyzvLayout");
t("xiv.ui.layouts.XyzvLayout.EventType",{});t("xiv.ui.layouts.XyzvLayout.ID_PREFIX",nr.ID_PREFIX);t("xiv.ui.layouts.XyzvLayout.FRAMES",or);t("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",nr.CSS_SUFFIX);t("xiv.ui.layouts.XyzvLayout.InteractorSet",rr);t("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",nr.prototype.oE);t("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",nr.prototype.Ui);t("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",nr.prototype.fB);
t("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",nr.prototype.iP);t("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",nr.prototype.Sx);t("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",nr.prototype.bA);t("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",nr.prototype.fp);t("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",nr.prototype.gC);t("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",nr.prototype.fC);
t("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",nr.prototype.cC);t("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",nr.prototype.Pf);t("xiv.ui.layouts.XyzvLayout.prototype.loop",nr.prototype.loop);t("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",nr.prototype.Ge);t("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",nr.prototype.Yg);t("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",nr.prototype.wk);t("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",nr.prototype.rq);
t("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",nr.prototype.lf);t("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",nr.prototype.Hh);t("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",nr.prototype.NM);t("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",nr.prototype.Zs);t("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",nr.prototype.Ke);t("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",nr.prototype.rf);
t("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",nr.prototype.Le);t("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",nr.prototype.fm);t("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",nr.prototype.e);function wr(){nr.call(this,["X","Y","Z"])}w(wr,nr);t("xiv.ui.layouts.TwoDWidescreen",wr);wr.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";wr.CSS_SUFFIX={ih:"x",We:"y",um:"z"};f=wr.prototype;f.Ge=function(){wr.c.Ge.call(this);this.Ui("X",["RIGHT"]);P(this.h.X.L(),"resize",this.lf.bind(this));P(this.h.X.L(),"resize_end",this.j.bind(this))};f.Yg=function(){wr.c.Yg.call(this);this.Ui("Y",["BOTTOM"]);P(this.h.Y.L(),"resize",this.Hh.bind(this));P(this.h.Y.L(),"resize_end",this.j.bind(this))};
f.lf=function(){this.mk(function(a){var b=a.width,c=Math.max(this.q.width-a.width,this.cc);N(["Y","Z"],function(a){this.h[a].a().style.left=b+"px";this.h[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.uh()};f.Hh=function(){this.mk(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.q.height-c;this.h.Z.a().style.top=c+"px";this.h.Z.a().style.height=d+"px"}.bind(this));this.uh()};f.j=function(){wr.c.j.call(this);this.bq();this.Ke();this.Le();this.rf()};
f.bq=function(){if(this.ia.width!==this.q.width||this.ia.height!==this.q.height){var a=1-(this.ia.height-this.q.height)/this.ia.height,b=1-(this.ia.width-this.q.width)/this.ia.width;this.Pf(function(c){frameSize=Mi(c.a());c.a().style.width=Math.max(frameSize.width*b,this.cc).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.kd).toString()+"px"}.bind(this))}};
f.Ke=function(){var a=this.h.X;a.a().style.height=this.q.height.toString()+"px";tl(a.L().Ad(),{left:this.cc,width:this.q.width-2*this.cc});var b=a.L().Bd("RIGHT");b.style.left=a.a().style.width;Li(b,this.q.height);a.L().update()};f.Le=function(){var a=this.h.Y;a.a().style.left=this.h.X.a().style.width;tl(a.L().Ad(),{top:this.kd,height:this.q.height-2*this.kd});var b=a.L().Bd("BOTTOM");b.style.top=a.a().style.height;Ki(b,parseInt(a.a().style.width));a.L().update()};
f.rf=function(){var a=this.h.Z;a.a().style.left=this.h.X.a().style.width;a.a().style.top=this.h.Y.a().style.height;a.a().style.height=this.q.height-parseInt(this.h.Y.a().style.height)+NaN};t("xiv.ui.layouts.TwoDWidescreen.TITLE","TwoDWidescreen");t("xiv.ui.layouts.TwoDWidescreen.EventType",{});t("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",wr.ID_PREFIX);t("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",wr.CSS_SUFFIX);t("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",wr.prototype.Ge);
t("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",wr.prototype.Yg);t("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",wr.prototype.lf);t("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",wr.prototype.Hh);t("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",wr.prototype.j);t("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",wr.prototype.Ke);t("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",wr.prototype.Le);
t("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",wr.prototype.rf);function xr(a){nr.call(this,a)}w(xr,nr);t("xiv.ui.layouts.SingleFrameLayout",xr);xr.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";xr.prototype.bq=function(){if(this.ia.width!==this.q.width||this.ia.height!==this.q.height){var a=this.ia.height*(1-(this.ia.height-this.q.height)/this.ia.height),b=this.ia.width*(1-(this.ia.width-this.q.width)/this.ia.width);this.loop(function(c){null!=c&&Ji(c.a(),Math.max(b,this.cc),Math.max(a,this.kd))}.bind(this))}};xr.prototype.j=function(){xr.c.j.call(this);this.bq()};
t("xiv.ui.layouts.SingleFrameLayout.TITLE","SingleFrameLayout");t("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",xr.ID_PREFIX);t("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",xr.prototype.j);function yr(){nr.call(this,"V");S(this.h.V.a(),Bk(Wq.Hc,this.constructor.xf))}w(yr,xr);t("xiv.ui.layouts.ThreeD",yr);yr.ID_PREFIX="xiv.ui.layouts.ThreeD";t("xiv.ui.layouts.ThreeD.TITLE","ThreeD");t("xiv.ui.layouts.ThreeD.ID_PREFIX",yr.ID_PREFIX);function zr(){nr.call(this,"X");S(this.h.X.a(),Bk(Wq.Hc,this.constructor.xf.toLowerCase()))}w(zr,xr);t("xiv.ui.layouts.Sagittal",zr);zr.ID_PREFIX="xiv.ui.layouts.Sagittal";t("xiv.ui.layouts.Sagittal.TITLE","Sagittal");t("xiv.ui.layouts.Sagittal.ID_PREFIX",zr.ID_PREFIX);function Ar(){nr.call(this)}w(Ar,nr);t("xiv.ui.layouts.Conventional",Ar);Ar.ID_PREFIX="xiv.ui.layouts.Conventional";Ar.CSS_SUFFIX={ih:"x",We:"y",um:"z",$q:"v",aS:"v-boundary"};f=Ar.prototype;f.Ge=function(){Ar.c.Ge.call(this);this.Ui("X",["RIGHT","TOP_RIGHT"]);P(this.h.X.L(),"resize",this.lf.bind(this));P(this.h.X.L(),"resize_end",this.j.bind(this))};f.Yg=function(){Ar.c.Yg.call(this);this.Ui("Y",["RIGHT","TOP_RIGHT"]);P(this.h.Y.L(),"resize",this.Hh.bind(this));P(this.h.Y.L(),"resize_end",this.j.bind(this))};
f.wk=function(){Ar.c.wk.call(this)};f.rq=function(){Ar.c.rq.call(this);this.Ui("V","BOTTOM");P(this.h.V.L(),"resize",this.Zs.bind(this));P(this.h.V.L(),"resize_end",this.j.bind(this))};f.mk=function(a){this.oi();var b=Mi(this.h.X.a()),c=Mi(this.h.Y.a()),d=Mi(this.h.Z.a());a(b,c,d,b.width+c.width+d.width-this.q.width)};
f.lf=function(){this.mk(function(a,b,c){b=Math.max(this.q.width-a.width-c.width,this.cc);var d=this.q.height-a.height;wi(this.h.Y.a(),a.width,d);Ji(this.h.Y.a(),b,a.height);wi(this.h.Z.a(),a.width+b,d);Ji(this.h.Z.a(),c.width,a.height);Ji(this.h.V.a(),this.q.width,this.q.height-a.height)}.bind(this));this.uh()};
f.Hh=function(){this.mk(function(a,b){var c=this.q.height-b.height;wi(this.h.X.a(),0,c);Ji(this.h.X.a(),a.width,b.height);wi(this.h.Z.a(),a.width+b.width,c);Ji(this.h.Z.a(),this.q.width-a.width-b.width,b.height);Ji(this.h.V.a(),this.q.width,this.q.height-b.height)}.bind(this));this.uh()};f.Zs=function(){this.oi();var a=parseInt(this.h.V.a().style.height),b=this.q.height-a;I(this.h,function(c){c!==this.h.V&&tl(c.a(),{top:a,height:b})}.bind(this));this.Ke();this.Le();this.uh()};
f.j=function(){Ar.c.j.call(this);this.fm();this.zy();this.Ay();this.Ke();this.Le();this.rf()};f.zy=function(){var a=parseInt(this.h.V.a().style.height),b=Math.max(this.q.height-a,this.kd);this.Pf(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};f.Ay=function(){var a,b=1-(this.ia.width-this.q.width)/this.ia.width;this.ia.width!==this.q.width&&this.Pf(function(c){a=Mi(c.a());c.a().style.width=Math.max(a.width*b,this.cc).toString()+"px"}.bind(this))};
f.Mq=function(a){var b=this.h.V.L().jn("BOTTOM"),c=this.h[a].L().Ad(),d=yi(this.h[a].a()),e=Mi(this.h[a].a());wi(c,parseInt(c.style.left),this.kd);Ji(c,this.q.width-3*this.cc,this.q.height-2*this.kd);c=this.h[a].L().Bd("RIGHT");wi(c,d.x+e.width,d.y);Li(c,this.q.height-b.Xa.y);wi(this.h[a].L().Bd("TOP_RIGHT"),d.x+e.width,d.y);this.h[a].L().update()};f.Ke=function(){tl(this.h.X.L().Ad(),{left:this.cc});this.Mq("X")};
f.Le=function(){this.h.Y.a().style.left=this.h.X.a().style.width;tl(this.h.Y.L().Ad(),{left:2*this.cc});this.Mq("Y")};f.rf=function(){this.h.Z.a().style.left=(parseInt(this.h.X.a().style.width)+parseInt(this.h.Y.a().style.width)).toString()+"px"};
f.fm=function(){if(this.ia.width!==this.q.width||this.ia.height!==this.q.height){var a=Mi(this.h.V.a());Ji(this.h.V.a(),this.q.width,Math.max(a.height*(1-(this.ia.height-this.q.height)/this.ia.height),this.kd))}wi(this.h.V.L().Ad(),this.q.width,this.kd);Ji(this.h.V.L().Ad(),this.q.width-3*this.cc,this.q.height-2*this.kd);a=this.h.V.L().Bd("BOTTOM");wi(a,0,Mi(this.h.V.a()).height);Ki(a,this.q.width);this.h.V.L().update()};t("xiv.ui.layouts.Conventional.TITLE","Conventional");
t("xiv.ui.layouts.Conventional.EventType",{});t("xiv.ui.layouts.Conventional.ID_PREFIX",Ar.ID_PREFIX);t("xiv.ui.layouts.Conventional.CSS_SUFFIX",Ar.CSS_SUFFIX);t("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",Ar.prototype.Ge);t("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",Ar.prototype.Yg);t("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",Ar.prototype.wk);t("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",Ar.prototype.rq);
t("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",Ar.prototype.lf);t("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y",Ar.prototype.Hh);t("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",Ar.prototype.Zs);t("xiv.ui.layouts.Conventional.prototype.updateStyle",Ar.prototype.j);t("xiv.ui.layouts.Conventional.prototype.updateStyle_X",Ar.prototype.Ke);t("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",Ar.prototype.Le);
t("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",Ar.prototype.rf);t("xiv.ui.layouts.Conventional.prototype.updateStyle_V",Ar.prototype.fm);function Br(){nr.call(this,"Z");S(this.h.Z.a(),Bk(Wq.Hc,this.constructor.xf))}w(Br,xr);t("xiv.ui.layouts.Transverse",Br);Br.ID_PREFIX="xiv.ui.layouts.Transverse";t("xiv.ui.layouts.Transverse.TITLE","Transverse");t("xiv.ui.layouts.Transverse.ID_PREFIX",Br.ID_PREFIX);function Cr(){nr.call(this)}w(Cr,nr);t("xiv.ui.layouts.FourUp",Cr);Cr.ID_PREFIX="xiv.ui.layouts.FourUp";Cr.CSS_SUFFIX={ih:"x",We:"y",um:"z",$q:"v"};f=Cr.prototype;f.Ge=function(){Cr.c.Ge.call(this);this.Ui("X",["RIGHT","TOP","TOP_RIGHT"]);P(this.h.X.L(),"resize",this.lf.bind(this));P(this.h.X.L(),"resize_end",this.j.bind(this))};
f.lf=function(){var a=yi(this.h.X.a()),b=Mi(this.h.X.a());wi(this.h.Y.a(),b.width,a.y);Ji(this.h.Y.a(),this.q.width-b.width,b.height);wi(this.h.Z.a(),0,0);Ji(this.h.Z.a(),b.width,a.y);wi(this.h.V.a(),b.width,0);Ji(this.h.V.a(),this.q.width-b.width,a.y);a=this.h.X.L().jn("RIGHT").Bd();a.style.top="0px";a.style.height=this.q.height.toString()+"px";this.uh()};f.j=function(){Cr.c.j.call(this);this.bq();this.rf();this.fm();this.Ke();this.Le()};
f.bq=function(){if(this.ia.width!==this.q.width||this.ia.height!==this.q.height){var a=this.ia.height*(1-(this.ia.height-this.q.height)/this.ia.height)/2,b=this.ia.width*(1-(this.ia.width-this.q.width)/this.ia.width)/2;this.loop(function(c){Ji(c.a(),Math.max(b,this.cc),Math.max(a,this.kd))}.bind(this))}};
f.Ke=function(){this.h.X.a().style.top=this.h.Z.a().style.height;wi(this.h.X.L().Ad(),this.cc,this.kd);Ji(this.h.X.L().Ad(),this.q.width-2*this.cc,this.q.height-2*this.kd);var a=this.h.X.L().jn("TOP").Bd();a.style.left="0px";a.style.width=this.q.width.toString()+"px";this.h.X.L().update();a=this.h.X.L().jn("RIGHT").Bd();a.style.top="0px";a.style.height=this.q.height.toString()+"px"};f.Le=function(){this.h.Y.a().style.left=this.h.Z.a().style.width;this.h.Y.a().style.top=this.h.Z.a().style.height};
f.rf=function(){};f.fm=function(){this.h.V.a().style.left=this.h.Z.a().style.width};f.e=function(){Cr.c.e.call(this)};t("xiv.ui.layouts.FourUp.TITLE","Four-Up");t("xiv.ui.layouts.FourUp.EventType",{});t("xiv.ui.layouts.FourUp.ID_PREFIX",Cr.ID_PREFIX);t("xiv.ui.layouts.FourUp.CSS_SUFFIX",Cr.CSS_SUFFIX);t("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",Cr.prototype.Ge);t("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",Cr.prototype.lf);t("xiv.ui.layouts.FourUp.prototype.updateStyle",Cr.prototype.j);
t("xiv.ui.layouts.FourUp.prototype.updateStyle_X",Cr.prototype.Ke);t("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",Cr.prototype.Le);t("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",Cr.prototype.rf);t("xiv.ui.layouts.FourUp.prototype.updateStyle_V",Cr.prototype.fm);t("xiv.ui.layouts.FourUp.prototype.disposeInternal",Cr.prototype.e);function Dr(){nr.call(this,["X","Y","Z"])}w(Dr,nr);t("xiv.ui.layouts.TwoDRow",Dr);Dr.ID_PREFIX="xiv.ui.layouts.TwoDRow";Dr.CSS_SUFFIX={ih:"x",We:"y",um:"z"};f=Dr.prototype;f.Ge=function(){Dr.c.Ge.call(this);this.Ui("X",["RIGHT"]);P(this.h.X.L(),"resize",this.lf.bind(this));P(this.h.X.L(),"resize_end",this.j.bind(this))};f.Yg=function(){Dr.c.Yg.call(this);this.Ui("Y",["RIGHT"]);P(this.h.Y.L(),"resize",this.Hh.bind(this));P(this.h.Y.L(),"resize_end",this.j.bind(this))};f.wk=function(){Dr.c.wk.call(this)};
f.mk=function(a){this.oi();var b=Mi(this.h.X.a()),c=Mi(this.h.Y.a()),d=Mi(this.h.Z.a());a(b,c,d,b.width+c.width+d.width-this.q.width)};f.lf=function(){this.mk(function(a,b,c){b=Math.max(this.q.width-a.width-c.width,this.cc);var d=this.q.height-a.height;wi(this.h.Y.a(),a.width,d);Ji(this.h.Y.a(),b,a.height);wi(this.h.Z.a(),a.width+b,d);Ji(this.h.Z.a(),c.width,a.height)}.bind(this));this.uh()};
f.Hh=function(){this.mk(function(a,b){var c=this.q.height-b.height;wi(this.h.X.a(),0,c);Ji(this.h.X.a(),a.width,b.height);wi(this.h.Z.a(),a.width+b.width,c);Ji(this.h.Z.a(),this.q.width-a.width-b.width,b.height);Ji(this.h.V.a(),this.q.width,this.q.height-b.height)}.bind(this));this.uh()};f.j=function(){Dr.c.j.call(this);this.Ay();this.zy();this.Ke();this.Le();this.rf()};f.zy=function(){var a=this.q.height.toString()+"px";this.Pf(function(b){b.a().style.height=a})};
f.Ay=function(){var a,b=1-(this.ia.width-this.q.width)/this.ia.width;this.ia.width!==this.q.width&&this.Pf(function(c){a=Mi(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.cc).toString()+"px"}.bind(this))};f.Mq=function(a){var b=this.h[a].L().Ad(),c=yi(this.h[a].a()),d=Mi(this.h[a].a());wi(b,parseInt(b.style.left),this.kd);Ji(b,this.q.width-3*this.cc,this.q.height-2*this.kd);b=this.h[a].L().Bd("RIGHT");wi(b,c.x+d.width,c.y);Li(b,this.q.height);this.h[a].L().update()};
f.Ke=function(){tl(this.h.X.L().Ad(),{left:this.cc});this.Mq("X")};f.Le=function(){this.h.Y.a().style.left=this.h.X.a().style.width;tl(this.h.Y.L().Ad(),{left:2*this.cc});this.Mq("Y")};f.rf=function(){this.h.Z.a().style.left=(parseInt(this.h.X.a().style.width)+parseInt(this.h.Y.a().style.width)).toString()+"px"};t("xiv.ui.layouts.TwoDRow.TITLE","TwoDRow");t("xiv.ui.layouts.TwoDRow.EventType",{});t("xiv.ui.layouts.TwoDRow.ID_PREFIX",Dr.ID_PREFIX);t("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",Dr.CSS_SUFFIX);
t("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",Dr.prototype.Ge);t("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",Dr.prototype.Yg);t("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",Dr.prototype.wk);t("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",Dr.prototype.lf);t("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",Dr.prototype.Hh);t("xiv.ui.layouts.TwoDRow.prototype.updateStyle",Dr.prototype.j);t("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",Dr.prototype.Ke);
t("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",Dr.prototype.Le);t("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",Dr.prototype.rf);function Er(){nr.call(this,"Y");S(this.h.Y.a(),Bk(Wq.Hc,this.constructor.xf.toLowerCase()))}w(Er,xr);t("xiv.ui.layouts.Coronal",Er);Er.ID_PREFIX="xiv.ui.layouts.Coronal";t("xiv.ui.layouts.Coronal.TITLE","Coronal");t("xiv.ui.layouts.Coronal.ID_PREFIX",Er.ID_PREFIX);function Fr(){Z.call(this);this.constructor.bz={};this.constructor.bz["Four-Up"]=Cr;this.constructor.bz.Conventional=Ar;this.nm={};this.ok={};this.$i={}}w(Fr,Z);t("xiv.ui.layouts.LayoutHandler",Fr);Fr.ID_PREFIX="xiv.ui.layouts.LayoutHandler";Fr.CSS_SUFFIX={};f=Fr.prototype;f.ub=null;f.be=null;f.ww=!1;f.Aj=null;f.Je=null;f.AA=!0;f.SL=function(){return this.ww};f.UH=function(a){this.AA=a};f.VB=function(){return this.ub[this.cd]};f.WB=function(a){return this.ub[this.cd].Vv(a)};
f.Lq=function(){null!=this.be&&this.be.Lq()};f.Wv=function(){return null!=this.be?this.be.fp():null};f.$J=function(a){return null!=this.be?this.be.gC(a):null};f.ZJ=function(a){return null!=this.be?this.be.cC(a):null};f.kC=function(a,b){return null!=this.be?this.be.fC(a,b):null};f.EE=function(a){this.$l(a);null!=this.be&&this.be.Kx();this.ub[a].bA();this.be=this.ub[a]};f.cA=function(a,b){if(void 0 in this.nm)throw Error(a+" is an already used layout title!");b&&(this.nm[a]=b)};
f.$l=function(a,b){if(!(a in this.nm))throw Error("Invalid layout: "+a+"!");null==this.ub&&(this.ub={});a in this.ub||(this.ub[a]=new this.nm[a],P(this.ub[a],"q",this.$s.bind(this)),Gr(this.ub[a]),Th(this.a(),this.ub[a].a()));this.it=this.cd;this.cd=a;this.qF(!1===b?0:500)};function Hr(a){var b;I(a.ub[a.cd].h,function(a,d){b=this.kC(d,Yq);null!=b&&null==a[Ir]&&(b.Ho(a.a()),a[Ir]=!0)}.bind(a))}f.$s=function(){this.dispatchEvent({type:"w"})};
f.qF=function(a){a=la(a)&&0<=a?a:500;this.it!=this.cd&&(this.it?this.AA?Jr(this,a):Jr(this,0):(Kr(this,this.cd),Lr(this,this.cd)))};function Mr(a,b,c){N(Wh(b.a()),function(a){null!=this.ok[c]||(this.ok[c]=[]);this.ok[c].push(a)}.bind(a))}function Nr(a){I(a.$i,function(a){Th(this.a().parentNode,a)}.bind(a))}function Or(a,b){var c=[];I(a.$i,function(a,e){c=Lb(c,Ll(a,this.Aj[e],this.Je[e],b))}.bind(a));return c}
function Jr(a,b){var c=a.ub[a.cd].h,d;Kr(a,a.cd);Lr(a,a.cd);null!=a.Aj&&qb(a.Aj);null!=a.Je&&qb(a.Je);a.Aj={};a.Je={};I(a.ub[a.it].h,function(a,b){d=a.a().cloneNode(!1);this.$i[b]=d;Mr(this,a,b);I(this.ok,function(a,b){N(a,function(a){Y(a);null!=this.$i[b]&&this.$i[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Kl(a.a(),c[b].a());this.Aj[b]=k.aI;this.Je[b]=k.fP}else this.Aj[b]={"z-index":0},this.Je[b]={opacity:0}}.bind(a));Nr(a);Ml(Or(a,b),a.kx.bind(a),a.lx.bind(a),a.jx.bind(a))}
f.kx=function(){this.QC();this.ww=!0;this.dispatchEvent({type:"t",sy:this.$i})};var Ir=C();f=Fr.prototype;f.lx=function(){this.dispatchEvent({type:"v",sy:this.$i})};
f.jx=function(){var a=this.ub[this.cd].h;I(a,function(a,c){null!=this.ok[c]&&N(this.ok[c],function(c){a.a().appendChild(c)})}.bind(this));I(a,function(a,c){null!=this.Je[c]&&tl(a.a(),this.Je[c])}.bind(this));this.ub[this.cd]!==this.be&&this.ub[this.cd].Sx(this.Wv());Pr(this);this.ww=!1;Kr(this,this.cd);Lr(this,this.cd);Qr(this);this.dispatchEvent({type:"u",frames:a});Hr(this);this.j()};function Lr(a,b){a.ub[b].a().style.opacity=1;a.ub[b].j()}
function Kr(a,b){a.ub[b].a().style.visibility="visible";a.ub[b].j()}f.QC=function(){I(this.ub,function(a){a.a().style.visibility="hidden";a.j()}.bind(this))};function Pr(a){I(a.$i,function(a){Y(a);delete a})}function Gr(a){I(a.h,function(a){P(a.a(),"dblclick",function(){})})}f.MM=function(a){this.QT.push(a)};f.j=function(){Fr.c.j.call(this);this.ub[this.cd].j()};
function Qr(a){null!=a.Aj&&(I(a.Aj,function(a){qb(a)}),qb(a.Je),delete a.Je);null!=a.Je&&(I(a.Je,function(a){qb(a)}),qb(a.Je),delete a.Je)}f.e=function(){Fr.c.e.call(this);Qr(this);delete this.$i;qb(this.ok);delete this.ok;delete this.be;this.Vo(this.ub);delete this.ub;qb(this.nm);delete this.nm;delete this.cd;delete this.it};t("xiv.ui.layouts.LayoutHandler.EventType",{pQ:"t",oQ:"u",qQ:"v",cu:"w"});t("xiv.ui.layouts.LayoutHandler.ID_PREFIX",Fr.ID_PREFIX);
t("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",Fr.CSS_SUFFIX);t("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);t("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",Ir);t("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",Fr.prototype.SL);t("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",Fr.prototype.UH);t("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",Fr.prototype.VB);t("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",Fr.prototype.WB);
t("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",Fr.prototype.Lq);t("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",Fr.prototype.Wv);t("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",Fr.prototype.$J);t("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",Fr.prototype.ZJ);t("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",Fr.prototype.kC);t("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",Fr.prototype.EE);
t("xiv.ui.layouts.LayoutHandler.prototype.addLayout",Fr.prototype.cA);t("xiv.ui.layouts.LayoutHandler.prototype.setLayout",Fr.prototype.$l);t("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",Fr.prototype.qF);t("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",Fr.prototype.QC);t("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",Fr.prototype.MM);t("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",Fr.prototype.j);
t("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",Fr.prototype.e);function Rr(a,b){this.x=a;this.y=b}w(Rr,sh);f=Rr.prototype;f.clone=function(){return new Rr(this.x,this.y)};f.Ng=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=sh.prototype.scale;f.Fb=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.Ng())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.Fc=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.bn=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function Sr(){Cq.call(this);this.Xg("Display All");this.Kr=W("div",{id:"CheckboxHodler_"+C()});S(this.Kr,Sr.CSS.YF);this.hl=new zq(!0);this.hl.Eb(this.Kr);this.Yl(this.hl);P(this.hl,"change",this.fd.bind(this))}w(Sr,Cq);t("xiv.ui.ctrl.CheckboxController",Sr);Sr.ID_PREFIX="xiv.ui.ctrl.CheckboxController";Sr.CSS_SUFFIX={YF:"checkboxholder"};Sr.prototype.Yf=function(a){this.w.Yf(a);this.fd()};Sr.prototype.fd=function(){this.dispatchEvent({type:"p",checked:this.hl.jk()})};
Sr.prototype.e=function(){Sr.c.e.call(this);Y(this.Kr);delete this.Kr;Wc(this.hl);this.hl.g();delete this.hl};t("xiv.ui.ctrl.CheckboxController.ID_PREFIX",Sr.ID_PREFIX);t("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",Sr.CSS_SUFFIX);t("xiv.ui.ctrl.CheckboxController.prototype.setChecked",Sr.prototype.Yf);t("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",Sr.prototype.fd);t("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",Sr.prototype.e);function Tr(){Z.call(this);this.jd=W("img",{id:"nrg.ui.Thumbnail_"+C()});Th(this.a(),this.jd);this.pf=W("div",{id:"DisplayText_"+C()});Th(this.a(),this.pf);this.Dt();this.a().className=Tr.Hc;this.jd.className=Tr.CSS.Tq;this.pf.className=Tr.CSS.pm;Ur(this,!0);this.Tp()}w(Tr,Z);t("nrg.ui.Thumbnail",Tr);Tr.ID_PREFIX="nrg.ui.Thumbnail";
Tr.CSS_SUFFIX={Tq:"image",pm:"text",$Q:"selected",Vq:"mouseover",Zy:"image-mouseover",mz:"text-mouseover",Xy:"highlight",Fk:"active",Yy:"image-active",lz:"text-active",kG:"hoverclone"};f=Tr.prototype;f.MA=null;f.qc=null;f.zs=!1;f.PJ=function(){return this.jd};f.uE=function(a,b){this.MA=a;this.jd.onerror=function(){this.jd.onerror="";this.jd.src=this.MA;null!=b&&b()}.bind(this)};f.CK=function(){return this.pf};f.$v=function(){for(var a=this.pf;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
f.Hf=function(){return this.qc=this.qc?this.qc:this.a()};f.Ch=function(){return this.zs};f.Rx=function(a){this.jd.src=a;this.jd.className=Tr.CSS.Tq};f.nq=function(a){this.pf.innerHTML=a};f.jE=function(){this.qc&&(this.qc.parentNode&&(this.qc=this.qc.parentNode.removeChild(this.qc)),delete this.qc,this.qc=null)};
f.Po=function(a,b){this.jE();Ur(this,!1);this.qc=b?b:this.a().cloneNode(!0);this.qc.setAttribute("id","HOVERABLE_"+this.a().getAttribute("id"));this.qc.style.visibility="hidden";S(this.qc,Tr.CSS.kG);Ur(this,!0);a&&a.appendChild(this.qc);this.Dt()};f.setActive=function(a,b){var c=this.a();(this.zs=a)?(b&&S(c,Tr.CSS.Xy),S(c,Tr.CSS.Fk),S(this.pf,Tr.CSS.lz),S(this.jd,Tr.CSS.Yy)):(ph(c,Tr.CSS.Xy),ph(c,Tr.CSS.Fk),ph(this.pf,Tr.CSS.lz),ph(this.jd,Tr.CSS.Yy))};f.j=function(a){a&&this.a()&&tl(this.a(),a)};
f.Lx=function(){var a=this.a(),b=this.Hf();if(b!==a){var c=bi(a,b),c=Fi(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;tl(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.at=function(){var a=this.Hf();S(a,Tr.CSS.Vq);S(a.childNodes[1],Tr.CSS.mz);S(a.childNodes[0],Tr.CSS.Zy);a!==this.a()&&this.Lx();this.dispatchEvent("x")};
f.Tp=function(){var a=this.Hf();a&&1<a.childNodes.length&&(ph(a,Tr.CSS.Vq),ph(a.childNodes[1],Tr.CSS.mz),ph(a.childNodes[0],Tr.CSS.Zy),a.style.visibility=a!==this.a()?"hidden":"visible");this.dispatchEvent("y")};function Ur(a,b){var c=a.Hf();b?(P(c,"mouseover",a.at.bind(a)),P(c,"mouseout",a.Tp.bind(a))):(Uc(c,"mouseover",a.at.bind(a)),Uc(c,"mouseout",a.Tp.bind(a)))}f.Dt=function(){Xc(this.Hf(),"z")&&Vc("z");P(this.Hf(),"click",function(){this.dispatchEvent({type:"z"})}.bind(this))};
f.e=function(){Tr.c.e.call(this);Wc(this);Wc(this.a());null!=this.qc&&(Wc(this.qc),Y(this.qc),delete this.qc);Y(this.jd);delete this.jd;Y(this.pf);delete this.pf;delete this.MS;delete this.zs};t("nrg.ui.Thumbnail.EventType",{Vq:"x",CG:"y",KP:"z"});t("nrg.ui.Thumbnail.ID_PREFIX",Tr.ID_PREFIX);t("nrg.ui.Thumbnail.CSS_SUFFIX",Tr.CSS_SUFFIX);t("nrg.ui.Thumbnail.HOVERABLE_PREFIX","HOVERABLE_");t("nrg.ui.Thumbnail.prototype.getImage",Tr.prototype.PJ);
t("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",Tr.prototype.uE);t("nrg.ui.Thumbnail.prototype.getTextElement",Tr.prototype.CK);t("nrg.ui.Thumbnail.prototype.getText",Tr.prototype.$v);t("nrg.ui.Thumbnail.prototype.getHoverable",Tr.prototype.Hf);t("nrg.ui.Thumbnail.prototype.isActive",Tr.prototype.Ch);t("nrg.ui.Thumbnail.prototype.setImage",Tr.prototype.Rx);t("nrg.ui.Thumbnail.prototype.setText",Tr.prototype.nq);t("nrg.ui.Thumbnail.prototype.removeHoverable",Tr.prototype.jE);
t("nrg.ui.Thumbnail.prototype.createHoverable",Tr.prototype.Po);t("nrg.ui.Thumbnail.prototype.setActive",Tr.prototype.setActive);t("nrg.ui.Thumbnail.prototype.updateStyle",Tr.prototype.j);t("nrg.ui.Thumbnail.prototype.repositionHoverable",Tr.prototype.Lx);t("nrg.ui.Thumbnail.prototype.onMouseOver",Tr.prototype.at);t("nrg.ui.Thumbnail.prototype.onMouseOut",Tr.prototype.Tp);t("nrg.ui.Thumbnail.prototype.disposeInternal",Tr.prototype.e);function Vr(){Z.call(this)}w(Vr,Z);t("nrg.ui.ScrollableContainer",Vr);Vr.ID_PREFIX="nrg.ui.ScrollableContainer";Vr.CSS_SUFFIX={UG:"scrollarea",va:"slider",hj:"slider-thumb",ij:"slider-track",du:"slider-thumb-hovered",XG:"slider-track-hovered"};f=Vr.prototype;
f.k=function(a){Vr.c.k.call(this,a);null==this.Vg&&(this.Vg=W("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+C(),"class":Vr.CSS.UG}),this.a().appendChild(this.Vg));this.ab=new er("vertical");this.ab.k(this.a());P(this.ab,"r",this.Dd.bind(this));this.ab.Ho(this.a());S(this.ab.a(),Vr.CSS.va);S(this.ab.Uc,Vr.CSS.hj);S(this.ab.Kd,Vr.CSS.ij);this.ab.Cr(Vr.CSS.du);this.ab.Lu(Vr.CSS.XG);this.j();this.Dd()};f.Af=function(a){this.ga||this.k();Th(this.Vg,a);this.Dd()};f.a=function(){return this.l};
f.yK=function(){return this.ab};f.uK=function(){return this.Vg};f.j=function(a){a&&tl(this.l,a)};f.Dd=function(){var a=Mi(this.l).height,b=Mi(this.Vg).height,c=[this.ab.Aa(),this.ab.la()],d=[0,b-a];a<b?(this.ab.a().style.opacity=1,tl(this.ab.Uc,{height:a/b*a}),this.ab.uc(!0),a=this.ab.la()-this.ab.I(),c=ll(a,c,d).remappedVal,tl(this.Vg,{top:-c})):(this.ab.a().style.opacity=0,this.ab.uc(!1),this.ab.F(100))};
f.e=function(){Vr.c.e.call(this);null!=this.ab&&(Wc(this.ab),this.ab.g(),delete this.ab);null!=this.Vg&&(Y(this.Vg),delete this.Vg)};t("nrg.ui.ScrollableContainer.ID_PREFIX",Vr.ID_PREFIX);t("nrg.ui.ScrollableContainer.CSS_SUFFIX",Vr.CSS_SUFFIX);t("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);t("nrg.ui.ScrollableContainer.prototype.render",Vr.prototype.k);t("nrg.ui.ScrollableContainer.prototype.addContents",Vr.prototype.Af);t("nrg.ui.ScrollableContainer.prototype.getElement",Vr.prototype.a);
t("nrg.ui.ScrollableContainer.prototype.getSlider",Vr.prototype.yK);t("nrg.ui.ScrollableContainer.prototype.getScrollArea",Vr.prototype.uK);t("nrg.ui.ScrollableContainer.prototype.updateStyle",Vr.prototype.j);t("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",Vr.prototype.Dd);t("nrg.ui.ScrollableContainer.prototype.disposeInternal",Vr.prototype.e);function Wr(){Z.call(this)}w(Wr,Vr);t("nrg.ui.ScrollableZippyTree",Wr);Wr.ID_PREFIX="nrg.ui.ScrollableZippyTree";Wr.CSS_SUFFIX={pH:"zippytree"};f=Wr.prototype;f.k=function(a){Wr.c.k.call(this,a);this.Fa=new jq;S(this.Fa.a(),Wr.CSS.pH);this.Vg.appendChild(this.Fa.a());this.qq();this.ab.UE(!0,.3)};f.Af=function(a,b){this.Fa.Af(a,b);a=h(a)?a:[a];N(a,function(){}.bind(this));this.ab.Ho(this.Fa.a())};f.xl=function(){this.Fa.xl()};f.Mo=function(){this.Fa.Mo()};f.dc=function(a,b){this.Fa.dc(a,b)};f.XK=function(){return this.Fa};
f.NH=function(a){this.Fa.Oo(a);this.Dd()};f.qq=function(){P(this.Fa,"n",this.Dd.bind(this));P(this.Fa,"d",this.Dd.bind(this));P(this.Fa,"e",this.Dd.bind(this));P(this.Fa,lm.GG,this.Dd.bind(this))};f.j=function(a){a&&tl(this.a(),a)};f.e=function(){Wr.c.e.call(this);null!=this.Fa&&(Wc(this.Fa),this.Fa.g(),delete this.Fa)};t("nrg.ui.ScrollableZippyTree.EventType",{});t("nrg.ui.ScrollableZippyTree.ID_PREFIX",Wr.ID_PREFIX);t("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",Wr.CSS_SUFFIX);
t("nrg.ui.ScrollableZippyTree.prototype.render",Wr.prototype.k);t("nrg.ui.ScrollableZippyTree.prototype.addContents",Wr.prototype.Af);t("nrg.ui.ScrollableZippyTree.prototype.expandAll",Wr.prototype.xl);t("nrg.ui.ScrollableZippyTree.prototype.collapseAll",Wr.prototype.Mo);t("nrg.ui.ScrollableZippyTree.prototype.setExpanded",Wr.prototype.dc);t("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",Wr.prototype.XK);t("nrg.ui.ScrollableZippyTree.prototype.addFolders",Wr.prototype.NH);
t("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",Wr.prototype.qq);t("nrg.ui.ScrollableZippyTree.prototype.updateStyle",Wr.prototype.j);t("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",Wr.prototype.e);function Xr(a){cd.call(this);this.n="interactor";this.Xe=a;this.vu=this.Kz=this.Jz=this.Lz=this.Iz=this.Mz=null;this.qr=!0;this.vj=this.pj=this.lh=!1;this.Vc=[0,0];this.qu=new A.K(0,0,0);this.jo=new A.K(0,0,0);this.hD=0;this.Sz=this.mr=null;this.ur=!1;this.Cb={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(Xr,cd);Xr.prototype.__defineGetter__("config",function(){return this.Cb});
Xr.prototype.__defineGetter__("leftButtonDown",function(){return this.lh});Xr.prototype.__defineGetter__("middleButtonDown",function(){return this.pj});Xr.prototype.__defineGetter__("rightButtonDown",function(){return this.vj});
Xr.prototype.ra=function(){this.Cb.MOUSEWHEEL_ENABLED?(this.vu=new Np(this.Xe),this.Mz=P(this.vu,"mousewheel",this.Vp.bind(this))):(Vc(this.Mz),this.vu=null);this.Cb.MOUSECLICKS_ENABLED?(this.Iz=P(this.Xe,"mousedown",this.mx.bind(this)),this.Lz=P(this.Xe,"mouseup",this.nx.bind(this))):(Vc(this.Iz),Vc(this.Lz));this.Xe.oncontextmenu=this.Cb.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.Cb.KEYBOARD_ENABLED?this.Oi.bind(this):null;this.Cb.TOUCH_ENABLED?(this.Cb.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.EH=P(this.Xe,"touchstart",this.AN.bind(this)),this.DH=P(this.Xe,"touchmove",this.yN.bind(this)),this.CH=P(this.Xe,"touchend",this.uN.bind(this))):(Vc(this.EH),Vc(this.DH),Vc(this.CH));Vc(this.Jz);Vc(this.Kz);this.Jz=P(this.Xe,"mousemove",this.TM.bind(this));this.Kz=P(this.Xe,"mouseout",this.UM.bind(this))};
Xr.prototype.mx=function(a){0==a.button?this.lh=!0:1==a.button?this.pj=!0:2==a.button&&(this.vj=!0);eval("this.onMouseDown("+this.lh+","+this.pj+","+this.vj+")");Yr(this);a.preventDefault()};Xr.prototype.SM=function(){};Xr.prototype.nx=function(a){0==a.button?this.lh=!1:1==a.button?this.pj=!1:2==a.button&&(this.vj=!1);eval("this.onMouseUp("+this.lh+","+this.pj+","+this.vj+")");Yr(this);a.preventDefault()};Xr.prototype.__defineGetter__("mousePosition",function(){return this.Vc});f=Xr.prototype;
f.XM=function(){};f.UM=function(a){this.qr=!1;this.Cb.KEYBOARD_ENABLED&&(window.onkeydown=null);this.vj=this.pj=this.lh=!1;Yr(this);this.qu=new A.K(0,0,0);a.preventDefault()};f.SD=function(){};f.AN=function(a){a.preventDefault();a.ra(a.Qc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.jo=new A.K(a.clientX,a.clientY,0);this.Sz=setTimeout(this.wN.bind(this,a),500)};f.zN=function(){};
f.wN=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new ve;a.kh=!0;a.mg=this instanceof Zr;this.dispatchEvent(a);this.vr=!0};f.vN=function(){};function $r(a){clearTimeout(a.Sz);if(a.vr){var b=new ve;b.kh=!1;b.mg=a instanceof Zr;a.dispatchEvent(b)}a.vr=!1}f.uN=function(a){a.preventDefault();eval("this.onTouchEnd()");$r(this)};f.tN=function(){};
f.yN=function(a){a.preventDefault();this.vr||$r(this);this.touchmoveEvent=a=a.Qc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.K(c[0],c[1],0);var b=c[0]>3*this.Xe.clientWidth/4,d=c[0]<this.Xe.clientWidth/4,e=c[1]<this.Xe.clientHeight/4,c=c[1]>3*this.Xe.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.jo.Fc(a);this.jo=a.clone();if(this.vr)a=new te,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.rd=e,this.dispatchEvent(a);
else if(this instanceof as&&(b||d))a=new we,a.$b=0>e.y,this.dispatchEvent(a);else if(this instanceof Zr||c)e.scale(3),a=new ue,a.rd=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.K(a[0],a[1],0),b=new A.K(b[0],b[1],0),e=sd(a,b),b=e-this.hD,this.hD=e,this.jo.Fc(a),this.jo=a.clone(),10<Math.abs(b)&&(a=new ve,a.kh=0<b,a.mg=this instanceof Zr,this.dispatchEvent(a)))};f.xN=function(){};
f.TM=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.qr=!0;this.Cb.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.Oi.bind(this));a.preventDefault();var b=a.shiftKey;this.ur=b;this.Vc=[a.offsetX,a.offsetY];var c=new A.K(this.Vc[0],this.Vc[1],0);a=this.qu.Fc(c);this.qu=c.clone();this.Cb.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.pj||this.lh||this.vj)&&Yr(this),this.mr=setTimeout(function(){Yr(this);var a=new xe;a.zr=c.x;a.Ar=
c.y;this.dispatchEvent(a);this.mr=null}.bind(this),300));0!=a.Ng()&&(this.lh&&!b?(b=new ue,a.scale(3),b.rd=a,this.dispatchEvent(b)):this.pj||this.lh&&b?(b=new te,b.rd=a,this.dispatchEvent(b)):this.vj&&(b=new ve,b.kh=0<a.y,b.mg=!1,this.dispatchEvent(b)))};function Yr(a){a.mr&&clearTimeout(a.mr);a.dispatchEvent(new ye)}f.YM=function(){};f.Vp=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");Yr(this);a.preventDefault()};f.LM=function(){};
f.Oi=function(a){if(this.qr){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");Yr(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,g=a.keyCode;82!=g||b||c||d||e?37<=g&&40>=g&&(a.preventDefault(),e?a=new te:b?a=new ve:(a=new ue,this instanceof as&&(a=new we)),a&&(c=new A.K(0,0,0),37==g?(c.x=5,a.$b=!1,b&&(a.$b=!0,a.kh=!0,a.mg=!1)):39==g?(c.x=-5,a.$b=!0,b&&(a.kh=!1,a.mg=!1)):38==g?(c.y=5,a.$b=!0,b&&(a.kh=!0,a.mg=!0)):40==g&&(c.y=-5,a.$b=!1,b&&(a.kh=!1,a.mg=!0)),a.rd=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new ze,this.dispatchEvent(a))}};t("X.interactor",Xr);t("X.interactor.prototype.init",Xr.prototype.ra);t("X.interactor.prototype.onMouseDown",Xr.prototype.SM);t("X.interactor.prototype.onMouseUp",Xr.prototype.XM);t("X.interactor.prototype.onMouseMove",Xr.prototype.SD);t("X.interactor.prototype.onMouseWheel",Xr.prototype.YM);t("X.interactor.prototype.onKey",Xr.prototype.LM);t("X.interactor.prototype.onTouchStart",Xr.prototype.zN);t("X.interactor.prototype.onTouchMove",Xr.prototype.xN);
t("X.interactor.prototype.onTouchEnd",Xr.prototype.tN);t("X.interactor.prototype.onTouchHover",Xr.prototype.vN);function as(a){Xr.call(this,a);this.n="interactor2D"}w(as,Xr);as.prototype.Vp=function(a){as.c.Vp.call(this,a);var b=new we;null==a.Zd&&(a.Zd=0);b.$b=0>a.Zd;this.dispatchEvent(b)};function bs(a,b){if(!la(a)||!la(b))throw Error("A camera needs valid width and height values.");cd.call(this);this.n="camera";this.Wk=new A.K(0,100,0);this.zm=new A.K(0,0,0);this.$b=new A.K(0,0,1);this.Va=a;this.Ia=b;this.M=this.Ns(this.Wk,this.zm)}w(bs,cd);bs.prototype.observe=function(a){if(!(null!=a&&a instanceof Xr))throw Error("Could not observe the interactor.");P(a,fe,this.fN.bind(this));P(a,de,this.$M.bind(this));P(a,ge,this.KN.bind(this))};
bs.prototype.fN=function(a){if(!(a instanceof ue))throw Error("Received no valid rotate event.");this.rotate(a.rd)};bs.prototype.KN=function(a){if(!(a instanceof ve))throw Error("Received no valid zoom event.");a.kh?this.Zn(a.mg):this.$n(a.mg)};bs.prototype.$M=function(a){if(!(a instanceof te))throw Error("Received no valid pan event.");this.gt(a.rd)};bs.prototype.__defineGetter__("view",function(){return this.M});
bs.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.M=a});bs.prototype.__defineGetter__("position",function(){return[this.Wk.x,this.Wk.y,this.Wk.z]});bs.prototype.__defineSetter__("position",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid position.");this.Wk=new A.K(a[0],a[1],a[2]);this.reset()});bs.prototype.__defineGetter__("focus",function(){return[this.zm.x,this.zm.y,this.zm.z]});
bs.prototype.__defineSetter__("focus",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid focus");this.zm=new A.K(a[0],a[1],a[2]);this.reset()});bs.prototype.__defineGetter__("up",function(){return[this.$b.x,this.$b.y,this.$b.z]});bs.prototype.__defineSetter__("up",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid up vector.");this.$b=new A.K(a[0],a[1],a[2]);this.reset()});f=bs.prototype;f.reset=function(){this.M=this.Ns(this.Wk,this.zm)};
f.rotate=function(a){if(h(a)&&2==a.length)a=new A.K(a[0],a[1],0);else if(!(a instanceof A.K))throw Error("Invalid distance vector for rotate operation.");return a};f.gt=function(a){if(h(a)&&2==a.length)a=new A.K(a[0],a[1],0);else if(!(a instanceof A.K))throw Error("Invalid distance vector for pan operation.");this.M[12]-=a.x;this.M[13]+=a.y};f.Zn=function(a){var b=20;null!=a&&!a&&(b=1);this.M[14]+=b};f.$n=function(a){var b=20;null!=a&&!a&&(b=1);this.M[14]-=b};
f.Ns=function(a,b){if(!(a instanceof A.K&&b instanceof A.K))throw Error("3D vectors required for calculating the view.");return A.p.qp()};t("X.camera",bs);t("X.camera.prototype.pan",bs.prototype.gt);t("X.camera.prototype.rotate",bs.prototype.rotate);t("X.camera.prototype.zoomIn",bs.prototype.Zn);t("X.camera.prototype.zoomOut",bs.prototype.$n);function cs(a){function b(a,b,d){b=b*Math.PI*2;b=lp(mp(n,Math.cos(b)),mp(m,Math.sin(b)));a=lp(lp(c,mp(e,a)),mp(b,g));d=lp(mp(b,1-Math.abs(d)),mp(k,d));return new qp(a,d)}this.Kb=[];a=a||{};var c=new kp(a.start||[0,-1,0]),d=new kp(a.end||[0,1,0]),e=np(d,c),g=a.Ug||1;a=a.Ca||16;for(var k=op(e),l=.5<Math.abs(k.y()),n=op((new kp(l,!l,0)).ol(k)),m=op(n.ol(k)),l=new qp(c,pp(k)),d=new qp(d,op(k)),q=[],p=0;p<a;p++){var r=p/a,s=(p+1)/a;q.push(new sp([l,b(0,r,-1),b(0,s,-1)]));q.push(new sp([b(0,s,0),b(0,r,
0),b(1,r,0),b(1,s,0)]));q.push(new sp([d,b(1,s,1),b(1,r,1)]))}return Dp(q)}w(cs,Cp);function ds(){Yd.call(this);this.n="cylinder";this.Fu=[-10,-10,-10];this.ou=[10,10,10];this.Xk=10;this.Yc=32;ya(this,new Ep)}w(ds,Yd);ds.prototype.__defineGetter__("start",function(){return this.Fu});ds.prototype.__defineSetter__("start",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid start");this.Fu=a});ds.prototype.__defineGetter__("end",function(){return this.ou});ds.prototype.__defineSetter__("end",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid end");this.ou=a});
ds.prototype.__defineGetter__("radius",function(){return this.Xk});ds.prototype.__defineSetter__("radius",function(a){if(!la(a))throw Error("Invalid radius.");this.Xk=a});ds.prototype.ca=function(){Gp(this,new cs({start:this.Fu,end:this.ou,Ug:this.Xk,Ca:this.Yc}));ds.c.ca.call(this)};t("X.cylinder",ds);t("X.cylinder.prototype.modified",ds.prototype.ca);function Kp(a){Q.call(this);this.n="labelmap";this.ki=a;this.Eu=new Float32Array([-255,-255,-255,-255])}w(Kp,Q);Kp.prototype.ca=function(){var a=new Zd;a.Na=this;this.dispatchEvent(a);this.ki.ca()};Kp.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(h(a)&&4==a.length)b=a;else{if(!this.Rd)throw Error("No colortable assigned.");b=this.Rd.me.get(a).slice(1,5)}this.Eu=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
t("X.labelmap",Kp);function es(a){this.Kb=[];a=a||{};var b=new kp(a.qh||[0,0,0]),c=a.Ug?a.Ug.length?a.Ug:[a.Ug,a.Ug,a.Ug]:[1,1,1];return Dp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new sp(a[0].map(function(e){e=new kp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new qp(e,new kp(a[1]))}))}))}w(es,Cp);function fs(){Yd.call(this);this.n="cube";this.Sa=[0,0,0];this.tu=this.su=this.ru=20;this.Lm=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];ya(this,new Ep)}w(fs,Yd);fs.prototype.__defineGetter__("center",function(){return this.Sa});fs.prototype.__defineSetter__("center",function(a){if(null==a||!h(a)||3!=a.length)throw Error("Invalid center");this.Sa=a});fs.prototype.__defineGetter__("lengthX",function(){return this.ru});
fs.prototype.__defineSetter__("lengthX",function(a){if(!la(a))throw Error("Invalid lengthX.");this.ru=a});fs.prototype.__defineGetter__("lengthY",function(){return this.su});fs.prototype.__defineSetter__("lengthY",function(a){if(!la(a))throw Error("Invalid lengthY.");this.su=a});fs.prototype.__defineGetter__("lengthZ",function(){return this.tu});fs.prototype.__defineSetter__("lengthZ",function(a){if(!la(a))throw Error("Invalid lengthZ.");this.tu=a});
fs.prototype.ca=function(){Gp(this,new es({qh:this.Sa,Ug:[this.ru/2,this.su/2,this.tu/2]}));fs.c.ca.call(this)};t("X.cube",fs);t("X.cube.prototype.modified",fs.prototype.ca);function Zr(a){Xr.call(this,a);this.n="interactor3D"}w(Zr,Xr);Zr.prototype.Vp=function(a){Zr.c.Vp.call(this,a);var b=new ve;null==a.Zd&&(a.Zd=0);b.kh=0>a.Zd;b.mg=!0;this.dispatchEvent(b)};function gs(a){cd.call(this);this.n="array";this.bb=[];this.yz=a}w(gs,cd);function hs(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}gs.prototype.add=function(a){this.bb.push(a);return!0};gs.prototype.remove=function(a){a=this.bb.indexOf(a);-1<a&&this.bb.splice(a,1);return!0};gs.prototype.clear=function(){this.bb.length=0};
function is(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),is(a,b,d),is(a,d,c);b<d;++b)if(0<a.yz(a.bb[b],a.bb[d])){var e=a.bb[b];a.bb[b]=a.bb[d];for(var g=a,k=d,l=c;k+1<l&&0>g.yz(g.bb[k+1],e);){var n=g,m=k+1,q=n.bb[k];n.bb[k]=n.bb[m];n.bb[m]=q;++k}g.bb[k]=e}}gs.prototype.sort=function(){is(this,0,this.bb.length)};function js(a,b){bs.call(this,a,b);this.n="camera2D"}w(js,bs);js.prototype.rotate=function(a){a=js.c.rotate.call(this,a);var b=new se;0<a.x?b.Hu--:0>a.x&&b.Hu++;0<a.y?b.uu++:0>a.y&&b.uu--;this.dispatchEvent(b)};js.prototype.Zn=function(a){var b=20;null!=a&&!a&&(b=.02);this.M[14]+=b};js.prototype.$n=function(a){var b=20;null!=a&&!a&&(b=.02);this.M[14]-=b};
js.prototype.gt=function(a){if(h(a)&&2==a.length)a=new A.K(a[0],a[1],0);else if(!(a instanceof A.K))throw Error("Invalid distance vector for pan operation.");this.M[12]-=a.x/this.M[14];this.M[13]+=a.y/this.M[14]};function ks(a,b){bs.call(this,a,b);this.n="camera3D";this.Bz=45;this.zu=A.p.Gw(A.p.qp(),this.Bz,a/b,1,1E4)}w(ks,bs);ks.prototype.rotate=function(a){a=ks.c.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.K(this.M[1],this.M[5],this.M[9]),d=new A.K(this.M[0],this.M[4],this.M[8]);c.normalize();d.normalize();A.p.rotate(this.M,b,c.x,c.y,c.z);A.p.rotate(this.M,a,d.x,d.y,d.z)};ks.prototype.Ns=function(a,b){var c=ks.c.Ns.call(this,a,b);A.p.sD(c,a,b,this.$b);return c};
function ls(a,b,c,d){var e=new Float32Array(4),g=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.p.multiply(a.zu,a.M,l);A.p.Fb(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.p.DD(k,e,g);g[3]=1/g[3];g[0]*=g[3];g[1]*=g[3];g[2]*=g[3];return g}t("X.camera3D",ks);function ms(a){tj.call(this,a);this.Jh=new Qp;P(this.Jh,"change",this.aL,!1,this)}w(ms,tj);var ns={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=ms.prototype;f.r=function(){this.qf=this.ml();var a=ns[this.Ga];this.l=this.H().r("div",a,this.qf);os(this);ps(this);qs(this)};f.eb=function(){ms.c.eb.call(this);hc&&7>oc&&P(this.a(),"resize",this.Wh,!1,this);this.Wh();var a=this.a();Sj(a,"progressbar");Tj(a,"live","polite")};f.Cc=function(){ms.c.Cc.call(this);rs(this)};
f.ml=function(){return this.H().r("div","progress-bar-thumb")};function rs(a){hc&&7>oc&&Uc(a.a(),"resize",a.Wh,!1,a)}f.se=function(a){ms.c.se.call(this,a);Mj(this.a(),ns[this.Ga]);a=Hh(null,"progress-bar-thumb",this.a())[0];a||(a=this.ml(),this.a().appendChild(a));this.qf=a};f.I=function(){return this.Jh.I()};f.F=function(a){this.Jh.F(a);this.a()&&os(this)};function os(a){Tj(a.a(),"valuenow",a.I())}f.Aa=function(){return this.Jh.Aa()};f.Fe=function(a){this.Jh.Fe(a);this.a()&&ps(this)};
function ps(a){Tj(a.a(),"valuemin",a.Aa())}f.la=function(){return this.Jh.la()};f.Hd=function(a){this.Jh.Hd(a);this.a()&&qs(this)};function qs(a){Tj(a.a(),"valuemax",a.la())}f.Ga="horizontal";f.aL=function(){this.Wh();this.dispatchEvent("change")};
f.Wh=function(){if(this.qf){var a=this.Aa(),b=this.la(),a=(this.I()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Ga?hc&&7>oc?(this.qf.style.top=0,this.qf.style.height="100%",b=this.qf.offsetHeight,a=Math.round(a*b),this.qf.style.top=b-a+"px",this.qf.style.height=a+"px"):(this.qf.style.top=100-b+"%",this.qf.style.height=b+"%"):this.qf.style.width=b+"%"}};
f.Vi=function(a){if(this.Ga!=a){var b=ns[this.Ga],c=ns[a];this.Ga=a;if(a=this.a())Lj(a,b)&&(Oj(a,b),Mj(a,c)),b=this.qf.style,"vertical"==this.Ga?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.Wh()}};f.bc=function(){return this.Ga};f.e=function(){rs(this);ms.c.e.call(this);this.qf=null;this.Jh.g()};f.Bi=function(){return this.Jh.Bi()};f.Oh=function(a){this.Jh.Oh(a)};function ss(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");ms.call(this);this.n="progressbar";this.zf=a;this.yu="";this.jr=this.ji=null;this.Uk=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Uk=[c,d,e];this.F(b);this.mw()}w(ss,ms);
ss.prototype.mw=function(){var a=ti(this.zf,"position");if("static"==a||""==a)this.yu=this.zf.style.position,this.zf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=W("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Uk[0])),d=document.createTextNode(String(this.Uk[1])),e=document.createTextNode(String(this.Uk[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.ji=b;this.k(this.zf);a=this.a();a.style.position=
"absolute";a.style.top=(this.zf.clientHeight-5)/2+"px";a.style.left=(this.zf.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};ss.prototype.Ym=function(){var a=this.a().style.top,b=this.a().style.left;Y(this.a());var c=new ss(this.zf,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");Xh(d).classList.add("progress-bar-thumb-done");this.jr=c};
ss.prototype.Ap=function(){this.ji&&Y(this.ji);this.a()&&Y(this.a());this.jr&&Y(this.jr.a());this.jr=this.ji=null;this.yu&&(this.zf.style.position=this.yu)};function ts(){cd.call(this);this.n="renderer";this.xa=window.document.body;this.Va=this.xa.clientWidth;this.Ia=this.xa.clientHeight;this.Gb=this.ma=this.zc=null;this.mh=new gs(ae);this.Ud=[];this.Nb=null;this.rr=this.ko=this.pr=!1;this.b=this.tj=this.pe=null;this.Cb={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.lu=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(ts,cd);f=ts.prototype;
f.cx=function(){window.cancelAnimationFrame(this.lu);this.Cb.PROGRESSBAR_ENABLED&&(this.tj=new ss(this.xa,3))};f.dx=function(){this.Cb.PROGRESSBAR_ENABLED&&this.tj&&(this.tj.Ym(),this.gr=Uf(function(){this.gr=null;this.tj&&(this.tj.Ap(),this.tj=null);this.ko=this.rr=!0;this.k()}.bind(this),700))};f.ex=function(a){this.tj&&this.tj.F(100*a.al)};f.Rl=function(a){this.pe&&this.pe.F(100*a.al)};f.RM=function(a){null!=a&&a instanceof Zd&&a.Na&&this.Yh(a.Na)};
f.bN=function(a){null!=a&&a instanceof $d&&a.Na&&this.remove(a.Na)};f.ix=function(a){if(!(null!=a&&a instanceof xe))throw Error("Invalid hover event.");};f.Sl=function(){var a=Gh(this.xa);this.Va=a.clientWidth;this.Ia=a.clientHeight;a=Gh(this.zc);a.width=this.Va;a.height=this.Ia;"renderer3D"==this.n&&(this.b.viewport(0,0,this.Va,this.Ia),this.ma.zu=A.p.Gw(A.p.qp(),this.ma.Bz,this.zc.width/this.zc.height,1,1E4))};
f.Hn=function(a){if(!(null!=a&&a instanceof we))throw Error("Invalid scroll event.");};ts.prototype.__defineGetter__("config",function(){return this.Cb});ts.prototype.__defineGetter__("interactor",function(){return this.Gb});ts.prototype.__defineGetter__("camera",function(){return this.ma});ts.prototype.__defineGetter__("loadingCompleted",function(){return this.ko});ts.prototype.__defineGetter__("container",function(){return this.xa});
ts.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;ja(b)&&(b=Gh(a));if(!$h(b))throw Error("Could not find the given container.");this.xa=b});f=ts.prototype;f.$p=function(){this.ma.reset()};function us(a){a.Cb.PROGRESSBAR_ENABLED&&a.pe&&!a.gr&&(a.pe.Ym(),a.gr=Uf(function(){this.gr=null;this.pe&&(this.pe.Ap(),this.pe=null);this.k()}.bind(a),700))}
f.ra=function(a){var b=W("canvas");this.xa.appendChild(b);this.Va=this.xa.clientWidth;this.Ia=this.xa.clientHeight;b.width=this.Va;b.height=this.Ia;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.xa.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Nb=new Kf;P(this.Nb,me,this.Rl.bind(this));this.zc=b;this.b=c;b=new Zr(this.zc);"2d"==a&&(b=new as(this.zc));b.ra();P(b,ie,this.$p.bind(this));P(b,ne,this.ix.bind(this));P(b,he,this.Hn.bind(this));this.Gb=b;b=new ks(this.Va,this.Ia);"2d"==a&&(b=new js(this.Va,this.Ia));b.observe(this.Gb);this.ma=b;P(window,"resize",this.Sl,!1,this)};f.add=function(a){(a instanceof fs||a instanceof Ip||a instanceof ds)&&a.ca();this.Ud.push(a);this.Yh(a)};
f.remove=function(a){if(!this.zc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&Wc(a);return!1};f.Yh=function(a){if(!this.zc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Xc(a,ke)||P(a,ke,this.RM.bind(this)),Xc(a,le)||P(a,le,this.bN.bind(this)),Xc(a,pe)||P(a,pe,this.cx.bind(this)),Xc(a,re)||P(a,re,this.ex.bind(this)),Xc(a,qe)||P(a,qe,this.dx.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.mh.bb,c=b.length,d=0,d=0;d<c;d++)if(b[d].sd==a)return b[d];return null};
f.k=function(){if(!this.zc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.Pz){if(this.Nb.Em.lv(!1)){if(this.Cb.PROGRESSBAR_ENABLED&&!this.pe&&(this.pe=new ss(this.xa,3)),this.rr=this.ko=!1,this.Pz=Uf(function(){this.Pz=null;this.k()}.bind(this),100),!this.Cb.INTERMEDIATE_RENDERING)return}else if(this.ko||this.rr||(this.rr=!0,eval("this.onShowtime()"),this.ko=!0),this.pe){us(this);return}this.lu=window.requestAnimationFrame(this.k.bind(this));eval("this.onRender()");
this.Kh(!1,!0)}};f.sx=function(){};f.UD=function(){};f.Kh=function(){};f.Df=function(){window.cancelAnimationFrame(this.lu);this.Nb&&(delete this.Nb,this.Nb=null);this.pe&&(this.pe.Ap(),delete this.pe,this.pe=null);this.mh.clear();delete this.mh;this.Ud.length=0;delete this.Ud;delete this.Nb;this.Nb=null;delete this.ma;this.ma=null;delete this.Gb;this.Gb=null;delete this.b;this.b=null;Y(this.zc);delete this.zc;this.zc=null};function vs(){ts.call(this);this.n="renderer2D";this.Xc=null;this.Sd=-1;this.oe=[];this.Gz=this.nr=this.Cz=this.lr=null;this.Im=this.Km=this.Yk=this.Zk=0;this.Ob=this.Pb=this.zb=this.xb=this.zz=-1;this.Hz=new Float32Array([-255,-255,-255,-255]);this.Oz=!0}w(vs,ts);vs.prototype.rx=function(){};vs.prototype.EN=function(){};vs.prototype.Hn=function(a){vs.c.Hn.call(this,a);var b=this.Ud[0];if(b){var c="",c=0==this.Sd?"indexX":1==this.Sd?"indexY":"indexZ";b[c]=a.$b?b[c]+1:b[c]-1;eval("this.onScroll();")}};
vs.prototype.FN=function(a){var b=this.Ud[0];if(b){var c=b.Ob-b.Pb,d=c/2,e=parseInt(c+c/15*-a.Hu,10);a=parseInt(d+d/15*a.uu,10);c==e&&e++;d==a&&a++;b.Pb-=parseInt(d-a,10);b.Pb-=parseInt(c-e,10);b.Pb=Math.max(b.Pb,b.ne);b.Ob-=parseInt(d-a,10);b.Ob+=parseInt(c-e,10);b.Ob=Math.min(b.Ob,b.Yb);eval("this.onWindowLevel();")}};vs.prototype.__defineGetter__("orientation",function(){return this.Xc});
vs.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.Sd=2):"SAGITTAL"==a?(a="X",this.Sd=0):"CORONAL"==a&&(a="Y",this.Sd=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Xc=a});vs.prototype.__defineGetter__("radiological",function(){return this.Oz});vs.prototype.__defineSetter__("radiological",function(a){this.Oz=a});f=vs.prototype;
f.ra=function(){if(!this.Xc)throw Error("No 2D orientation set.");vs.c.ra.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.zc.width,this.zc.height);this.lr=W("canvas");this.nr=W("canvas");P(this.ma,je,this.FN.bind(this))};f.Sl=function(){vs.c.Sl.call(this);ws(this)};f.$p=function(){vs.c.$p.call(this);ws(this);var a=this.Ud[0];a&&(a.Ob=a.Yb,a.Pb=a.ne)};
f.Yh=function(a){vs.c.Yh.call(this,a);var b=!1;this.get(a.sd)&&(b=!0);if(a instanceof Q){var c=a.da,d=a.m,e=a.Rd;if(null!=d&&null!=d.da&&d.da.C)this.Yh(d);else if(null!=e&&null!=e.da&&e.da.C)this.Nb.load(e,a);else{if(null!=c&&h(c))if(null!=a.ai){if(a.ai.Hp!=c.length||b&&!a.C)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Nb.load(c[b],a);return}else if(null!=c&&c.C){this.Nb.load(a,a);return}c=this.Xc;this.Sd="X"==c?0:"Y"==c?1:2;this.Yc=a.i[this.Sd].i;e=null;e=0==this.Sd?a.indexX:1==this.Sd?a.indexY:
a.indexZ;c=a.i[this.Sd].i[e].Fz;d=a.i[this.Sd].i[e].Ez;this.Km=a.i[this.Sd].i[e].li;this.Im=a.i[this.Sd].i[e].ei;this.Zk=c;this.Yk=d;e=this.lr;e.width=c;e.height=d;var g=this.nr;g.width=c;g.height=d;this.Cz=e.getContext("2d");this.Gz=g.getContext("2d");b||(this.mh.add(a),ws(this))}}};function ws(a){var b=Math.min(a.Va/(a.Zk*a.Km),a.Ia/(a.Yk*a.Im));a.ma.M[14]=b}f.dt=function(){};
f.OF=function(a,b){var c=this.Ud[0],d=this.ma.M,e=null,g=this.Zk,k=this.Yk,l=null,n=null;if("Y"==this.Xc)e=this.Yc[parseInt(c.indexY,10)],l=e.li,n=e.ei,this.oe[0]="red",this.oe[1]="blue";else if("Z"==this.Xc)e=this.Yc[parseInt(c.indexZ,10)],l=e.li,n=e.ei,this.oe[0]="red",this.oe[1]="green";else{e=this.Yc[parseInt(c.indexX,10)];l=e.ei;n=e.li;this.oe[0]="green";this.oe[1]="blue";var m=g,g=k,k=m}var q=1*d[12],p=-1*d[13],m=Math.max(d[14],.6),d=[this.Va/2,this.Ia/2],l=g*l*m,n=k*n*m,r=d[0]-l/2,d=d[1]-n/
2,r=r+q*m,d=d+p*m;return a>r&&a<r+l&&b>d&&b<d+n?(q=(a-r)/l*g,p=(b-d)/n*k,n=e.KH[4],"X"==this.Xc?(m=g-q,q=p,p=m):"Y"==this.Xc?q=g-q:"Z"==this.Xc&&(q=g-q,p=k-p),q=e.JH+q*e.li,p=e.zH+p*e.ei,q=Cd(q,p,n,1),g=Dd(),Pd(e.sH,q,g),k=Dd(),Pd(e.tH,q,k),e=Math.round((c.d[0].A[0]*k[0]+c.d[0].A[1]*k[1]+c.d[0].A[2]*k[2]+c.d[0].xu)/c.d[0].Jm),e>=c.d[0].ba?e=c.d[0].ba-1:0>e&&(e=0),q=Math.round((c.d[1].A[0]*k[0]+c.d[1].A[1]*k[1]+c.d[1].A[2]*k[2]+c.d[1].xu)/c.d[1].Jm),q>=c.d[1].ba?q=c.d[1].ba-1:0>q&&(q=0),p=Math.round((c.d[2].A[0]*
k[0]+c.d[2].A[1]*k[1]+c.d[2].A[2]*k[2]+c.d[2].xu)/c.d[2].Jm),p>=c.d[2].ba?p=c.d[2].ba-1:0>p&&(p=0),[[e,q,p],[g[0],g[1],g[2]],[k[0],k[1],k[2]]]):null};
f.Kh=function(a,b){vs.c.Kh.call(this,a,b);if(0!=this.mh.bb.length){var c=this.Ud[0],d=null,d=0==this.Sd?c.indexX:1==this.Sd?c.indexY:c.indexZ,e=this.Yc[parseInt(d,10)].Fz,g=this.Yc[parseInt(d,10)].Ez;this.Km=this.Yc[parseInt(d,10)].li;this.Im=this.Yc[parseInt(d,10)].ei;this.Zk=e;this.Yk=g;var k=this.Va,l=this.Ia,n=this.ma.M;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var m=Math.max(n[14],.1);this.b.setTransform(m,0,0,m,0,0);var q=1*n[12],n=-1*n[13],p=null;c.m&&(p=c.m.Eu);var r=
this.Yc[parseInt(d,10)],s=r.Ua.uj,r=r.m,z=null;r&&(z=r.uj);var y=this.Zk,F=this.Yk,D=this.Cz,O=this.Gz,K=D.getImageData(0,0,y,F),J=O.getImageData(0,0,y,F),G=K.data,E=J.data,M=G.length,L=c.Yb,U=c.xb,H=c.zb,u=c.Pb/L,v=c.Ob/L;if(this.zz!=d||this.xb!=U||this.zb!=H||this.Pb!=u||this.Ob!=v||p&&!hs(p,this.Hz,0)){var da=this.lr;da.width=e;da.height=g;da=this.nr;da.width=e;da.height=g;e=0;do{var da=[0,0,0,0],g=[0,0,0,0],V=s[e]/255*L,B=s[e],B=(B/255-u)/(v-u),B=255*B;V>=U&&V<=H&&(da=new qd(c.qj[0],c.qj[1],c.qj[2]),
da=(new qd(c.oj[0],c.oj[1],c.oj[2])).scale(B).add(da.scale(255-B)),da=[Math.floor(da.x),Math.floor(da.y),Math.floor(da.z),255],r&&(-255==p[3]?g=[z[e],z[e+1],z[e+2],z[e+3]]:hs(p,z,e)&&(g=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.Xc?(G[e]=da[0],G[e+1]=da[1],G[e+2]=da[2],G[e+3]=da[3],E[e]=g[0],E[e+1]=g[1],E[e+2]=g[2],E[e+3]=g[3]):"Y"==this.Xc?(B=Math.floor(e/(4*y)),B=B*y*4+(4*(y-1)-(e-B*y*4)),G[B]=da[0],G[B+1]=da[1],G[B+2]=da[2],G[B+3]=da[3],E[B]=g[0],E[B+1]=g[1],E[B+2]=g[2],E[B+3]=g[3]):(B=M-1-e,G[B-
3]=da[0],G[B-2]=da[1],G[B-1]=da[2],G[B]=da[3],E[B-3]=g[0],E[B-2]=g[1],E[B-1]=g[2],E[B]=g[3]);e+=4}while(e<M);D.putImageData(K,0,0);O.putImageData(J,0,0);this.zz=d;this.xb=U;this.zb=H;this.Pb=u;this.Ob=v;r&&(this.Hz=p)}this.b.globalAlpha=1;this.b.translate(k/2/m,l/2/m);"X"==this.Xc&&(this.b.rotate(.5*Math.PI),d=q,q=n,n=-d);q=-y*this.Km/2+q;n=-F*this.Im/2+n;this.b.drawImage(this.lr,q,n,y*this.Km,F*this.Im);r&&c.m.ob&&(this.b.globalAlpha=c.m.Wc,this.b.drawImage(this.nr,q,n,y*this.Km,F*this.Im));this.Cb.SLICENAVIGATORS&&
this.Gb.qr&&this.Gb.ur&&!this.Gb.lh&&(q=this.Gb.Vc,q=this.OF(q[0],q[1]))&&(c.fi=q[0][0],c.gi=q[0][1],c.hi=q[0][2],c.ca(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Gb.Vc[0],0),this.b.lineTo(this.Gb.Vc[0],this.Gb.Vc[1]-10),this.b.moveTo(this.Gb.Vc[0],this.Gb.Vc[1]+10),this.b.lineTo(this.Gb.Vc[0],this.Ia),this.b.strokeStyle=this.oe[0],this.b.stroke(),this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Gb.Vc[1]),this.b.lineTo(this.Gb.Vc[0]-
10,this.Gb.Vc[1]),this.b.moveTo(this.Gb.Vc[0]+10,this.Gb.Vc[1]+.5),this.b.lineTo(this.Va,this.Gb.Vc[1]),this.b.strokeStyle=this.oe[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+q[2][0].toFixed(2)+", "+q[2][1].toFixed(2)+", "+q[2][2].toFixed(2),0,0),y=r=n="undefined","undefined"!=typeof c.kc[q[1][2].toFixed(0)]&&"undefined"!=typeof c.kc[q[1][2].toFixed(0)][q[1][1].toFixed(0)]&&(n=c.kc[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],
c.hb&&(r=c.m.kc[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],c.m.ho&&(y=c.m.ho.get(r),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+q[1][0].toFixed(0)+", "+q[1][1].toFixed(0)+", "+q[1][2].toFixed(0)+")",0,15),c.hb&&this.b.fillText("Labelmap:  "+y+" ("+r+")",0,30))}};t("X.renderer2D",vs);t("X.renderer2D.prototype.init",vs.prototype.ra);t("X.renderer2D.prototype.add",vs.prototype.add);t("X.renderer2D.prototype.onShowtime",vs.prototype.sx);
t("X.renderer2D.prototype.onRender",vs.prototype.UD);t("X.renderer2D.prototype.onScroll",vs.prototype.rx);t("X.renderer2D.prototype.onWindowLevel",vs.prototype.EN);t("X.renderer2D.prototype.get",vs.prototype.get);t("X.renderer2D.prototype.resetViewAndRender",vs.prototype.$p);t("X.renderer2D.prototype.xy2ijk",vs.prototype.OF);t("X.renderer2D.prototype.render",vs.prototype.k);t("X.renderer2D.prototype.destroy",vs.prototype.Df);t("X.renderer2D.prototype.onSliceNavigation",vs.prototype.dt);dn.od={};function xs(){ad.call(this)}w(xs,ad);t("xiv.vis.RenderEngine",xs);xs.prototype.ID_PREFIX="xiv.vis.RenderEngine";var ys="isSelectedVolume"+C();t("xiv.vis.RenderEngine.EventType",{NQ:"A",LQ:"B",MQ:"C"});t("xiv.vis.RenderEngine.SELECTED_VOL_KEY",ys);t("xiv.vis.RenderEngine.prototype.ID_PREFIX",xs.prototype.ID_PREFIX);function zs(){ad.call(this);this.jm=[]}w(zs,ad);t("xiv.vis.XtkPlane",zs);f=zs.prototype;f.wn=!0;f.tm=null;f.orientation=null;f.Zp=null;f.Ea=null;f.ti=null;f.Ab=function(){return this.Ea};f.bc=function(){return this.orientation};f.wt=function(a){null!=this.Ea&&(null!=a?(this.Ir=a,this.Ea.pi.focus=a.focus,this.Ea.pi.position=a.position,this.Ea.pi.Ot=a.Ot,a instanceof bs&&(this.Ea.pi.view=a.view)):this.Ea.pi.position=this.constructor.SP)};
f.vt=function(a){this.ti.style.background=null!=a?ja(a)?a:null!=a.HA?"-webkit-linear-gradient(top, "+a.HA+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.AJ=function(){return this.Rr};f.yJ=function(){return this.ti};f.Zl=function(a){this.ti=a;null!=this.Ea||this.ra(a);this.Ea.ti=a};f.tx=function(a){this.dispatchEvent(a)};
f.ra=function(a){null!=this.Ea&&(Wc(this.Ea),this.Ea.Df(),this.Ea=null);if(null==this.tm)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Ea=new this.tm;this.Ea.orientation=this.orientation;this.Zl(a||this.ti||document.body);this.Ea.ra();P(this.Ea,"B",function(a){this.dispatchEvent({type:"B",value:a.value})}.bind(this));P(this.Ea,"D",this.tx.bind(this))};f.add=function(a){this.wn&&(!0==a.isSelectedVolume&&(this.Rr=a),this.jm.push(a),this.Ea.add(a))};f.isEnabled=function(){return this.wn};
function As(a){null!=a.gg&&(Y(a.gg),delete a.gg)}function Bs(a){a.gg=W("div",{id:"DisabledOverlay_"+C()});a.gg.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=W("div",{id:"DisabledOverlay_"+C()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.gg.appendChild(c);a.ti.appendChild(a.gg)}
f.uc=function(a){(this.wn=!1!==a)?Bl(this.gg,200,function(){this.gg.style.visibility="hidden";As(this)}.bind(this)):(null!=this.gg||Bs(this),this.gg.style.visibility="visible",yl(this.gg,200,function(){}.bind(this)))};f.restore=function(){window.console.log("\n\nrestore");this.ra();Cs(this);null!=this.Ir&&this.wt(this.Ir);null!=this.Bf&&this.vt(this.Bf);this.k()};f.nO=function(){N(this.jm,function(a){null!=a&&this.Ea.remove(a)}.bind(this))};
function Cs(a){N(a.jm,function(a){window.console.log("adding",a);this.Ea.add(a)}.bind(a))}f.k=function(){this.wn?this.Ea.k():window.console.log("Plane"+this.orientation+" is switched off.")};f.j=function(){null!=this.Ea&&this.Ea.Qg()};
f.g=function(){zs.c.g.call(this);null!=this.Ea&&(this.Ea.Df(),delete this.Ea);As(this);null!=this.Bf&&delete this.Bf;null!=this.Ir&&delete this.Ir;null!=this.Zp&&(null!=this.Zp.g&&(this.Zp.stop(),this.Zp.g()),delete this.Zp);delete this.wn;delete this.tm;delete this.ti;delete this.orientation;delete this.jm;delete this.Rr;delete this.VT};t("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",[-300,300,300]);t("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");t("xiv.vis.XtkPlane.prototype.XRenderer",zs.prototype.tm);
t("xiv.vis.XtkPlane.prototype.orientation",zs.prototype.orientation);t("xiv.vis.XtkPlane.prototype.Renderer",zs.prototype.Ea);t("xiv.vis.XtkPlane.prototype.container",zs.prototype.ti);t("xiv.vis.XtkPlane.prototype.getRenderer",zs.prototype.Ab);t("xiv.vis.XtkPlane.prototype.getOrientation",zs.prototype.bc);t("xiv.vis.XtkPlane.prototype.setCamera",zs.prototype.wt);t("xiv.vis.XtkPlane.prototype.setBackground",zs.prototype.vt);t("xiv.vis.XtkPlane.prototype.getCurrentVolume",zs.prototype.AJ);
t("xiv.vis.XtkPlane.prototype.getContainer",zs.prototype.yJ);t("xiv.vis.XtkPlane.prototype.setContainer",zs.prototype.Zl);t("xiv.vis.XtkPlane.prototype.init",zs.prototype.ra);t("xiv.vis.XtkPlane.prototype.add",zs.prototype.add);t("xiv.vis.XtkPlane.prototype.isEnabled",zs.prototype.isEnabled);t("xiv.vis.XtkPlane.prototype.setEnabled",zs.prototype.uc);t("xiv.vis.XtkPlane.prototype.restore",zs.prototype.restore);t("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",zs.prototype.nO);
t("xiv.vis.XtkPlane.prototype.render",zs.prototype.k);t("xiv.vis.XtkPlane.prototype.updateStyle",zs.prototype.j);t("xiv.vis.XtkPlane.prototype.dispose",zs.prototype.g);function Ds(){vs.call(this)}w(Ds,vs);t("xiv.vis.XtkRenderer2D",Ds);f=Ds.prototype;f.Qg=function(){this.Sl()};f.rx=function(){this.dt()};f.Rl=function(a){Ds.c.Rl.call(this,a);this.dispatchEvent({type:"B",value:a.al})};f.ra=function(){this.Nr.PROGRESSBAR_ENABLED=!1;Ds.c.ra.call(this);this.ik.SD=this.KM.bind(this);this.ik.Nr.BQ=!1;this.ik.Nr.zQ=!1;this.ik.Nr.lQ=!1;this.ik.ra()};f.bc=function(){return this.Xc};f.tJ=function(){return this.ma};f.gK=function(){return this.ik.Sw};f.ML=function(){};
f.KM=function(){this.dispatchEvent({type:"mouseover",Sw:this.ik.Sw,$E:this.ik.ur})};f.dt=function(){this.dispatchEvent({type:"E",volume:this.Ud[0],OS:this.Ud[0]["index"+this.Xc],NS:this.Xc,$E:this.ik.ur})};f.k=function(){this.zc&&this.b?(Ds.c.k.call(this),this.dispatchEvent({type:"C"})):this.ra()};f.uJ=function(){return this.zc};f.kp=function(){return this.Ud[0]};f.nC=function(){if(null!=this.Yc)return this.Yc.length};f.AC=function(){return this.ma.M[14]};f.YE=function(a){this.ma.M[14]=a};
f.Zn=function(){this.ma.M[14]+=.03};f.$n=function(){this.ma.M[14]+=-.03};
function Es(a,b,c,d){var e=a.Ud[0],g=a.ma.M,k=null,l=a.Zk,n=a.Yk,m=null,q=null;if(null!=e){"Y"==a.Xc?(k=a.Yc[parseInt(e.indexY,10)],m=k.li,q=k.ei,a.oe[0]="red",a.oe[1]="blue"):"Z"==a.Xc?(k=a.Yc[parseInt(e.indexZ,10)],m=k.li,q=k.ei,a.oe[0]="red",a.oe[1]="green"):(k=a.Yc[parseInt(e.indexX,10)],m=k.ei,q=k.li,a.oe[0]="green",a.oe[1]="blue",e=l,l=n,n=e);var e=1*g[12],k=-1*g[13],g=Math.max(g[14],.6),p=[a.Va/2,a.Ia/2],m=l*m*g,q=n*q*g,r=p[0]-m/2,p=p[1]-q/2,r=r+e*g,p=p+k*g;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?r+(a.Zk-b)/l*m:r+b/l*m;b=Math.max(0,b);b=Math.min(b,n);return d?p+(a.Yk-b)/n*q:p+b/n*q}}f.wC=function(a,b){return Es(this,a,"vertical",b)};f.dC=function(a,b){return Es(this,a,"horizontal",b)};f.Df=function(){Ds.c.Df.call(this)};t("xiv.vis.XtkRenderer2D.prototype.onResize",Ds.prototype.Qg);t("xiv.vis.XtkRenderer2D.prototype.onScroll",Ds.prototype.rx);t("xiv.vis.XtkRenderer2D.prototype.onProgress",Ds.prototype.Rl);t("xiv.vis.XtkRenderer2D.prototype.init",Ds.prototype.ra);
t("xiv.vis.XtkRenderer2D.prototype.getOrientation",Ds.prototype.bc);t("xiv.vis.XtkRenderer2D.prototype.getCamera",Ds.prototype.tJ);t("xiv.vis.XtkRenderer2D.prototype.getMousePosition",Ds.prototype.gK);t("xiv.vis.XtkRenderer2D.prototype.isMouseOver",Ds.prototype.ML);t("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",Ds.prototype.dt);t("xiv.vis.XtkRenderer2D.prototype.render",Ds.prototype.k);t("xiv.vis.XtkRenderer2D.prototype.getCanvas",Ds.prototype.uJ);
t("xiv.vis.XtkRenderer2D.prototype.getVolume",Ds.prototype.kp);t("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",Ds.prototype.nC);t("xiv.vis.XtkRenderer2D.prototype.getZoom",Ds.prototype.AC);t("xiv.vis.XtkRenderer2D.prototype.setZoom",Ds.prototype.YE);t("xiv.vis.XtkRenderer2D.prototype.zoomIn",Ds.prototype.Zn);t("xiv.vis.XtkRenderer2D.prototype.zoomOut",Ds.prototype.$n);t("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",Ds.prototype.wC);
t("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",Ds.prototype.dC);t("xiv.vis.XtkRenderer2D.prototype.destroy",Ds.prototype.Df);function Fs(a){zs.call(this);this.orientation=a;this.tm=Ds;this.Rr=null}w(Fs,zs);t("xiv.vis.XtkPlane2D",Fs);f=Fs.prototype;f.qC=function(){return this.Ea.qC()};f.rC=function(){return this.Ea.rC()};f.kp=function(){return null!=this.Ea?this.Ea.kp():null};f.Zl=function(a){Fs.c.Zl.call(this,a)};f.g=function(){Fs.c.g.call(this);delete this.Rr;delete this.yT;delete this.zT};t("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",Fs.prototype.qC);
t("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",Fs.prototype.rC);t("xiv.vis.XtkPlane2D.prototype.getVolume",Fs.prototype.kp);t("xiv.vis.XtkPlane2D.prototype.setContainer",Fs.prototype.Zl);t("xiv.vis.XtkPlane2D.prototype.dispose",Fs.prototype.g);function Gs(){Cq.call(this);this.Yl(W("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+C(),type:"radio"}));S(this.w,Gs.CSS.NG);P(this.w,"change",this.fd.bind(this))}w(Gs,Cq);t("xiv.ui.ctrl.RadioButtonController",Gs);Gs.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";Gs.CSS_SUFFIX={NG:"radiobutton"};Gs.prototype.fd=function(){this.dispatchEvent({type:"p",checked:this.w.checked})};Gs.prototype.e=function(){Gs.c.e.call(this)};t("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",Gs.ID_PREFIX);
t("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",Gs.CSS_SUFFIX);t("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",Gs.prototype.fd);t("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",Gs.prototype.e);function Hs(){Cq.call(this);this.jm=[]}w(Hs,Cq);t("xiv.ui.ctrl.MasterController2D",Hs);Hs.ID_PREFIX="xiv.ui.ctrl.MasterController2D";Hs.CSS_SUFFIX={};Hs.prototype.add=function(){};Hs.prototype.e=function(){Hs.c.e.call(this);Hb(this.jm);delete this.jm};t("xiv.ui.ctrl.MasterController2D.ID_PREFIX",Hs.ID_PREFIX);t("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",Hs.CSS_SUFFIX);t("xiv.ui.ctrl.MasterController2D.prototype.add",Hs.prototype.add);t("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",Hs.prototype.e);function Is(){Cq.call(this);this.Xg("Master Opacity")}w(Is,Cq);t("xiv.ui.ctrl.SliderController",Is);Is.ID_PREFIX="xiv.ui.ctrl.SliderController";Is.CSS_SUFFIX={va:"slider",hj:"slider-thumb",Zq:"slider-thumb-hover",ij:"slider-track",kz:"slider-track-hover",ju:"value-input"};f=Is.prototype;f.Ey=2;f.pq=function(a){this.Ey=a};f.k=function(a){Is.c.k.call(this,a);this.qv();this.rv()};
f.qv=function(){var a=new er;this.Yl(a);a.Fe(0);a.Hd(1);a.Oh(.01);a.F(1);S(a.a(),Is.CSS.va);S(a.Uc,Is.CSS.hj);S(a.Kd,Is.CSS.ij);a.Cr(Is.CSS.Zq);a.Lu(Is.CSS.kz);P(this.w,"change",this.fd.bind(this))};f.rv=function(){this.ka=W("input");this.ka.type="number";S(this.ka,Is.CSS.ju);Th(this.a(),this.ka);P(this.ka,"input",this.wx.bind(this));this.update()};f.wx=function(){window.console.log("on value input");var a=this.w,b=parseFloat(this.ka.value),b=id(b,a.Aa(),a.la());this.ka.value=b;a.F(b)};f.LK=function(){return this.ka};
f.fd=function(){var a=this.w,b=a.I().toFixed(this.Ey),c=parseInt(this.ka.value);this.ka.value=b;this.dispatchEvent({type:"p",value:b,Mw:a.Aa(),Kw:a.la(),aE:c})};f.update=function(){var a=this.w,b=a.I();a.j();a.F(0);a.F(b);a.Bi()!==this.ka.step&&(this.ka.step=a.Bi());a.Aa()!==this.ka.min&&(this.ka.min=a.Aa());a.la()!==this.ka.max&&(this.ka.max=a.la());a.I()!==this.ka.value&&(this.ka.value=b)};f.e=function(){Is.c.e.call(this);delete this.Ey;null!=this.ka&&(Wc(this.ka),Y(this.ka),delete this.ka)};
t("xiv.ui.ctrl.SliderController.ID_PREFIX",Is.ID_PREFIX);t("xiv.ui.ctrl.SliderController.CSS_SUFFIX",Is.CSS_SUFFIX);t("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",Is.prototype.pq);t("xiv.ui.ctrl.SliderController.prototype.render",Is.prototype.k);t("xiv.ui.ctrl.SliderController.prototype.getValueInput",Is.prototype.LK);t("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",Is.prototype.fd);t("xiv.ui.ctrl.SliderController.prototype.update",Is.prototype.update);
t("xiv.ui.ctrl.SliderController.prototype.disposeInternal",Is.prototype.e);function Js(){Cq.call(this);this.Xg("TwoThumb");this.qv();this.rv();this.we=W("input");this.we.type="number";S(this.we,Js.CSS.gG);Th(this.a(),this.we);P(this.we,"input",this.GM.bind(this));Ks(this)}w(Js,Cq);t("xiv.ui.ctrl.TwoThumbSliderController",Js);Js.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";Js.CSS_SUFFIX={va:"slider",hj:"slider-thumb",VG:"slider-thumb-extent",WG:"slider-thumb-value",Zq:"slider-thumb-hover",ij:"slider-track",kz:"slider-track-hover",ju:"value-input",gG:"extent-input"};
f=Js.prototype;f.qv=function(){this.ja=new hq;this.ja.r();var a=this.ja.a();a.setAttribute("id","ThresholdSlider_"+C());S(a,Js.CSS.va);var b=W("div",{id:"ThwoThumbSlider_track_"+C(),"class":Js.CSS.ij});a.appendChild(b);this.Yl(this.ja);S(this.ja.pa,Js.CSS.hj);S(this.ja.pa,Js.CSS.WG);vl(this.ja.pa,Js.CSS.Zq);S(this.ja.Dc,Js.CSS.hj);S(this.ja.Dc,Js.CSS.VG);vl(this.ja.Dc,Js.CSS.Zq);P(this.ja,"change",this.fd.bind(this))};
f.update=function(){var a=Mi(this.ja.pa).width,b=this.ja.la()-this.ja.Aa(),c=Mi(this.ja.a()).width-a,a=c*((this.ja.I()-this.ja.Aa())/b),b=c*(this.ja.Gf()/b);this.ja.pa.style.left=a.toString()+"px";this.ja.Dc.style.left=b.toString()+"px";Ls(this);Ks(this)};function Ls(a){a.ka.step=1;a.ka.min=a.ja.Aa();a.ka.max=a.ja.la();a.ka.value=a.ja.I()}function Ks(a){a.we.step=1;a.we.min=a.ja.Aa();a.we.max=a.ja.la();a.we.value=a.ja.Gf()+a.ja.I()}
f.rv=function(){this.ka=W("input");this.ka.type="number";S(this.ka,Js.CSS.ju);Th(this.a(),this.ka);P(this.ka,"input",this.wx.bind(this));Ls(this)};f.wx=function(a){window.console.log(a,this.ka);this.ja.F(parseInt(this.ka.value))};f.GM=function(){this.ja.sk(parseInt(this.we.value)-this.ja.I())};f.fd=function(){var a=this.ja.I(),b=this.ja.Gf()+a;this.ka.value=a;this.we.value=b;this.dispatchEvent({type:"p",lower:a,upper:b})};
f.e=function(){Js.c.e.call(this);null!=this.ja&&(Wc(this.ja),null==this.ja.Ka&&(this.ja.Ka=new Qp),this.ja.g(),delete this.ja);null!=this.ka&&(Wc(this.ka),Y(this.ka),delete this.ka);null!=this.we&&(Wc(this.we),Y(this.we),delete this.we)};t("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",Js.ID_PREFIX);t("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",Js.CSS_SUFFIX);t("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",Js.prototype.update);
t("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",Js.prototype.fd);t("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",Js.prototype.e);function Ms(){Cq.call(this);this.Ek=[]}w(Ms,Cq);t("xiv.ui.ctrl.MasterController3D",Ms);Ms.ID_PREFIX="xiv.ui.ctrl.MasterController3D";Ms.CSS_SUFFIX={};Ms.prototype.add=function(a){this.Ek.push(a);this.tA(a,Is);1==this.Ek.length&&Th(document.body,this.a())};Ms.prototype.e=function(){Ms.c.e.call(this);Hb(this.Ek);delete this.Ek};t("xiv.ui.ctrl.MasterController3D.ID_PREFIX",Ms.ID_PREFIX);t("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",Ms.CSS_SUFFIX);
t("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{QR:"Visible",HQ:"Opacity"});t("xiv.ui.ctrl.MasterController3D.prototype.add",Ms.prototype.add);t("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",Ms.prototype.e);function Ns(){Ms.call(this)}w(Ns,Ms);t("xiv.ui.ctrl.VolumeController3D",Ns);Ns.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";Ns.CSS_SUFFIX={};Ns.prototype.wA=function(a){var b=this.bf(Sr,"Volume Rendering",function(b){a.JF=b.checked});Gq(a,b);this.ag.push(b);b.w.Yf(!1)};var Os=C();
Ns.prototype.uA=function(a){var b=this.bf(Js,"Threshold",this.constructor.PT);b[Os]=a;Gq(a,b);this.ag.push(b);var c=a.Ip,d=a.Wn;-Infinity==c&&(c=-1E3,a.Ip=c);Infinity==a.Wn&&(d=1E3,a.Wn=d);b=b.w;b.Fe(c);b.Hd(d);dq(b,d-c);b.F(c);b.Oh(10);b.sk(d-c);a.Wn=d;a.Ip=c};Ns.prototype.add=function(a){Ns.c.add.call(this,a);this.wA(a);this.uA(a)};Ns.prototype.j=function(){Ns.c.j.call(this)};t("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",Ns.ID_PREFIX);t("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",1E3);
t("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",Ns.CSS_SUFFIX);t("xiv.ui.ctrl.VolumeController3D.VOLUME_ID",Os);t("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",Ns.prototype.wA);t("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",Ns.prototype.uA);t("xiv.ui.ctrl.VolumeController3D.prototype.add",Ns.prototype.add);t("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",Ns.prototype.j);function Ps(){Cq.call(this);this.Ek=[]}w(Ps,Cq);t("xiv.ui.ctrl.MasterController",Ps);Ps.ID_PREFIX="xiv.ui.ctrl.MasterController";Ps.CSS_SUFFIX={};Ps.prototype.add=function(a){this.Ek.push(a)};Ps.prototype.e=function(){Ps.c.e.call(this);Hb(this.Ek);delete this.Ek};t("xiv.ui.ctrl.MasterController.ID_PREFIX",Ps.ID_PREFIX);t("xiv.ui.ctrl.MasterController.CSS_SUFFIX",Ps.CSS_SUFFIX);t("xiv.ui.ctrl.MasterController.CONTROLLERS",{});t("xiv.ui.ctrl.MasterController.prototype.add",Ps.prototype.add);
t("xiv.ui.ctrl.MasterController.prototype.disposeInternal",Ps.prototype.e);function Qs(){Ps.call(this)}w(Qs,Ps);t("xiv.ui.ctrl.LevelsController",Qs);Qs.ID_PREFIX="xiv.ui.ctrl.LevelsController";Qs.CSS_SUFFIX={};f=Qs.prototype;f.add=function(a){Qs.c.add.call(this,a);var b=this.pA(a),c=this.sA(a),d=this.rA(a),e=this.nA(a,c,d);a=this.oA(a,c,d);N([c,d,e,a],function(a){P(a.w,"r",function(){b.update()}.bind(this))}.bind(this))};f.pA=function(a){var b=this.bf(Hq,"Histogram",function(){}.bind(this));b.vk(a);Gq(a,b);this.Gh.push(b);b.update();return b};
f.sA=function(a){var b=this.bf(Is,"Level Min.",function(b){a.Zh=b.value}.bind(this));b.vk(a);Gq(a,b);this.Gh.push(b);b.w.Hd(1E3);b.w.Fe(0);b.w.F(0);b.w.Oh(1);b.pq(0);b.update();return b};f.rA=function(a){var b=this.bf(Is,"Level Max.");b.vk(a);P(b,"p",function(b){a.eh=b.value}.bind(this));Gq(a,b);this.Gh.push(b);b.w.Hd(1E3);b.w.Fe(0);b.w.F(1E3);b.w.Oh(1);b.pq(0);b.update();return b};
f.nA=function(a,b,c){var d=this.bf(Is,"Brightness");d.vk(a);P(d,"p",function(d){d=(d.value-d.aE)/(d.Kw-d.Mw);var g=a.eh-a.Zh;a.Zh=Math.round(parseInt(a.Zh)-g*d);a.eh=Math.round(parseInt(a.eh)-g*d);b.w.F(a.Zh);c.w.F(a.eh)}.bind(this));Gq(a,d);this.Gh.push(d);d.w.Hd(150);d.w.Fe(-150);d.w.F(0);d.w.Oh(1);d.pq(0);d.update();return d};
f.oA=function(a,b,c){var d=this.bf(Is,"Contrast");d.vk(a);P(d,"p",function(d){d=(d.value-d.aE)/(d.Kw-d.Mw);var g=parseInt(a.eh)-parseInt(a.Zh),k=parseInt(a.eh)-g*d;a.Zh=Math.round(parseInt(a.Zh)+g*d);a.eh=Math.round(k);b.w.F(a.Zh);c.w.F(a.eh)}.bind(this));Gq(a,d);this.Gh.push(d);d.w.Hd(150);d.w.Fe(-150);d.w.F(0);d.w.Oh(1);d.pq(0);d.update();return d};f.e=function(){Qs.c.e.call(this)};t("xiv.ui.ctrl.LevelsController.ID_PREFIX",Qs.ID_PREFIX);t("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",Qs.CSS_SUFFIX);
t("xiv.ui.ctrl.LevelsController.CONTROLLERS",{GP:"Brightness",QP:"Contrast",vQ:"Level Min.",uQ:"Level Max.",cQ:"Histogram"});t("xiv.ui.ctrl.LevelsController.LEVEL_MAX",1E3);t("xiv.ui.ctrl.LevelsController.LEVEL_MIN",0);t("xiv.ui.ctrl.LevelsController.prototype.add",Qs.prototype.add);t("xiv.ui.ctrl.LevelsController.prototype.add_histogram",Qs.prototype.pA);t("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",Qs.prototype.sA);t("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",Qs.prototype.rA);
t("xiv.ui.ctrl.LevelsController.prototype.add_brightness",Qs.prototype.nA);t("xiv.ui.ctrl.LevelsController.prototype.add_contrast",Qs.prototype.oA);t("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",Qs.prototype.e);function Rs(a){ad.call(this);this.fc=null;this.l=a;a=hc||jc&&!qc("531")&&"TEXTAREA"==a.tagName;this.Bc=new $i(this);this.Bc.s(this.l,a?["keydown","paste","cut","drop","input"]:"input",this)}w(Rs,ad);
Rs.prototype.handleEvent=function(a){if("input"==a.type)hc&&qc(10)&&0==a.keyCode&&0==a.charCode||(Ss(this),gc&&this.l!=Fh(this.l).activeElement||this.dispatchEvent(Ts(a)));else if("keydown"!=a.type||Dj(a)){var b="keydown"==a.type?this.l.value:null;hc&&229==a.keyCode&&(b=null);var c=Ts(a);Ss(this);this.fc=Uf(function(){this.fc=null;this.l.value!=b&&this.dispatchEvent(c)},0,this)}};function Ss(a){null!=a.fc&&(ba.clearTimeout(a.fc),a.fc=null)}function Ts(a){a=new Hc(a.Qc);a.type="input";return a}
Rs.prototype.e=function(){Rs.c.e.call(this);this.Bc.g();Ss(this);delete this.l};function Us(a,b,c){tj.call(this,a);Vs(this,b||"#f00");this.className=c||"goog-hsv-palette";this.qa=ni(this.H())}w(Us,tj);f=Us.prototype;f.At=function(a){a!=this.il&&(Vs(this,a),Ws(this),this.dispatchEvent("action"))};function Vs(a,b){var c=Ok(b).nn,d=Uk(c),e=d[0],g=d[1],k=d[2],d=Math.max(Math.max(e,g),k),l=Math.min(Math.min(e,g),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(g-k)/n:g==d?2+(k-e)/n:4+(e-g)/n);0>e&&(e+=360);360<e&&(e-=360)}a.hd=[e,l,d];a.hd[0]/=360;a.il=c}
function Xs(a,b,c,d){if(null!=b||null!=c||null!=d)a.hd[0]=null!=b?b:a.hd[0],a.hd[1]=null!=c?c:a.hd[1],a.hd[2]=null!=d?d:a.hd[2],b=[360*a.hd[0],a.hd[1],a.hd[2]],b=Wk(b[0],b[1],b[2]),a.il=b,Ws(a),a.dispatchEvent("action")}f.af=function(){return!1};
f.r=function(){var a=this.H(),b=hc&&!qc("7")?" "+(this.className+"-noalpha"):"",c=a.r("DIV",this.className+"-hs-backdrop");this.tn=a.r("DIV",this.className+"-hs-handle");this.ek=a.r("DIV",this.className+"-hs-image",this.tn);this.hm=a.r("DIV",this.className+"-v-image");this.Nq=a.r("DIV",this.className+"-v-handle");this.Kt=a.r("DIV",this.className+"-swatch");this.Kl=a.r("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.r("label",null,this.Kl);this.l=a.r("DIV",this.className+b,
c,this.ek,this.hm,this.Nq,this.Kt,d)};f.eb=function(){Us.c.eb.call(this);Ws(this);var a=this.gb();a.s(this.a(),"mousedown",this.Ah);this.up||(this.up=new Rs(this.Kl));a.s(this.up,"input",this.fL)};f.e=function(){Us.c.e.call(this);delete this.ek;delete this.tn;delete this.hm;delete this.Nq;delete this.Kt;delete this.Kl;this.up&&(this.up.g(),delete this.up);Vc(this.Rw);Vc(this.Tw)};
function Ws(a){if(a.ga){var b=a.hd[1],c=a.hd[2],d=a.ek.offsetWidth*a.hd[0];a.jf()&&(d=a.ek.offsetWidth-d);var e=Math.ceil(a.tn.offsetWidth/2),d=d-e,b=a.ek.offsetHeight*(1-b),b=b-Math.ceil(a.tn.offsetHeight/2),e=a.tn,g=a.jf();null!==b&&(e.style.top=b+"px");g?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.hm.offsetTop-Math.floor(a.Nq.offsetHeight/2)+(255-c)/255*a.hm.offsetHeight;a.Nq.style.top=b+"px";Pi(a.ek,c/255);ri(a.hm,"background-color",Wk(360*a.hd[0],a.hd[1],
255));ri(a.Kt,"background-color",a.il);ri(a.Kt,"color",127.5<a.hd[2]?"#000":"#fff");var k;try{k=Ok(a.Kl.value).nn}catch(l){}a.il!=k&&(a.Kl.value=a.il)}}f.Ah=function(a){if(a.target==this.hm||a.target==this.Nq){var b=Oi(this.hm);this.GC(b,a);this.Rw=P(this.qa,"mousemove",ua(this.GC,this,b));this.Tw=P(this.qa,"mouseup",this.Kg,!1,this)}else if(a.target==this.ek||a.target==this.tn)b=Oi(this.ek),this.FC(b,a),this.Rw=P(this.qa,"mousemove",ua(this.FC,this,b)),this.Tw=P(this.qa,"mouseup",this.Kg,!1,this)};
f.GC=function(a,b){b.preventDefault();var c=qi(this.H()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);Xs(this,null,null,c)};f.FC=function(a,b){b.preventDefault();var c=qi(this.H()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;Xs(this,d,c,null)};f.Kg=function(){Vc(this.Rw);Vc(this.Tw)};
f.fL=function(){/^#?[0-9a-f]{6}$/i.test(this.Kl.value)&&this.At(this.Kl.value)};function Ys(){Cq.call(this);this.Xg("Color");this.Ej=W("div",{id:this.constructor.ID_PREFIX+"_ColorSquare_"+C(),"class":Ys.CSS.bG});Th(this.a(),this.Ej);P(this.Ej,"click",this.aF.bind(this));this.Dj=new Us;this.Dj.k();P(this.Dj,"action",this.fd.bind(this));this.Yl(this.Dj);S(this.Dj.a(),this.constructor.CSS.$F);this.rh=W("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+C(),"class":Ys.CSS.aG});Th(document.body,this.rh);Th(this.rh,this.Dj.a());this.rh.style.visibility="hidden";this.wd=W("div",
{id:this.constructor.ID_PREFIX+"_CloseButton_"+C(),"class":Ys.CSS.ej});Th(this.rh,this.wd);P(this.wd,"click",this.aF.bind(this))}w(Ys,Cq);t("xiv.ui.ctrl.ColorPaletteController",Ys);Ys.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";Ys.CSS_SUFFIX={bG:"colorsquare",aG:"colorpaletteholder",$F:"colorpalette",ej:"closebutton"};
Ys.prototype.aF=function(){this.rh.style.visibility="hidden"==this.rh.style.visibility?"visible":"hidden";var a=Di(this.Ej),b=Mi(this.Ej),c=Mi(this.rh),b=a.x+b.width+20,a=a.y-20,d=parseInt(window.innerHeight);a+c.height>d&&(a-=a+c.height-d);wi(this.rh,b,a)};
Ys.prototype.update=function(){var a=Math.floor(255*this[Dq].color[0]),b=Math.floor(255*this[Dq].color[1]),c=Math.floor(255*this[Dq].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.w.At(Sk([a,b,c]))};Ys.prototype.fd=function(a){this.Ej.style.backgroundColor=a.target.il;this.dispatchEvent({type:"p",color:Uk(a.target.il).map(function(a){return a/255})})};
Ys.prototype.e=function(){Ys.c.e.call(this);Wc(this.wd);Y(this.wd);delete this.wd;Wc(this.Ej);Y(this.Ej);delete this.Ej;Wc(this.Dj);this.Dj.g();delete this.Dj;Y(this.rh);delete this.rh};t("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",Ys.ID_PREFIX);t("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",Ys.CSS_SUFFIX);t("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",20);t("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",20);t("xiv.ui.ctrl.ColorPaletteController.prototype.update",Ys.prototype.update);
t("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",Ys.prototype.fd);t("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",Ys.prototype.e);function Zs(){Ms.call(this)}w(Zs,Ms);t("xiv.ui.ctrl.MeshController3D",Zs);Zs.ID_PREFIX="xiv.ui.ctrl.MeshController3D";Zs.CSS_SUFFIX={};Zs.prototype.add=function(a){Zs.c.add.call(this,a);this.Nu(a,Sr);this.Mu(a,Ys)};t("xiv.ui.ctrl.MeshController3D.ID_PREFIX",Zs.ID_PREFIX);t("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",Zs.CSS_SUFFIX);t("xiv.ui.ctrl.MeshController3D.prototype.add",Zs.prototype.add);t("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",Zs.prototype.e);function $s(){Ms.call(this)}w($s,Ms);t("xiv.ui.ctrl.AnnotationsController3D",$s);$s.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";$s.CSS_SUFFIX={};$s.prototype.add=function(a){$s.c.add.call(this,a);this.Nu(a,Sr);this.Mu(a,Ys)};t("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",$s.ID_PREFIX);t("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",$s.CSS_SUFFIX);t("xiv.ui.ctrl.AnnotationsController3D.prototype.add",$s.prototype.add);function at(){Ps.call(this)}w(at,Ps);t("xiv.ui.ctrl.VolumeController",at);at.ID_PREFIX="xiv.ui.ctrl.VolumeController";at.CSS_SUFFIX={};at.prototype.add=function(a){at.c.add.call(this,a);this.vA(a);this.qA(a)};at.prototype.vA=function(a){var b=this.bf(Gs,"Visible",function(){});Gq(a,b);this.ag.push(b);b.vk(a);b.w.checked=a[ys]||!1};at.prototype.qA=function(a){var b=this.bf(Sr,"Show Label Map",function(b){a.RL.visible=b.checked});Gq(a,b);this.ag.push(b);b.vk(a);b.w.Yf(!1)};
at.prototype.e=function(){at.c.e.call(this);window.console.log("need to implement dispose methods for VolumeController")};t("xiv.ui.ctrl.VolumeController.ID_PREFIX",at.ID_PREFIX);t("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",at.CSS_SUFFIX);t("xiv.ui.ctrl.VolumeController.prototype.add",at.prototype.add);t("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",at.prototype.vA);t("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",at.prototype.qA);
t("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",at.prototype.e);function bt(){Z.call(this);var a=this.constructor.mT();I(a,function(a,c){this[c]=null})}w(bt,Z);t("xiv.ui.ctrl.XtkControllerTree",bt);function ct(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}t("xiv.ui.ctrl.XtkControllerTree.ControlSet",ct);bt.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";bt.CSS_SUFFIX={};function dt(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=bt.prototype;f.cz=function(){};f.TF=function(){return this.xh([this.dj])};f.cz=function(){return this.xh([this.Ik])};
f.nH=function(){return this.xh([this.Rk])};f.OJ=function(){};f.xh=function(a){var b=[];N(h(a)?a:[a],function(a){null!=a&&(b=Lb(b,a.PB()))});return b};f.Kq=function(){var a=this.xh([this.Ik,this.Sk,this.Rk,this.Jk,this.dj,this.Zt]);N(a,function(a){a.update()}.bind(this))};
f.nv=function(a,b){a instanceof Q?(null==this.Sk&&(this.Ik=new Qs,this.Sk=new at,this.Rk=new Ns),this.Ik.add(a,b),this.Sk.add(a,b),this.Rk.add(a,b)):a instanceof Aq?(null==this.Jk&&(this.Jk=new Zs),this.Jk.add(a,b)):a instanceof Ip&&(null==this.dj&&(this.dj=new $s),this.dj.add(a));this.volumes=new ct(null,this.xh([this.Rk]),this.xh([this.Sk]));this.annotations=new ct(null,this.xh([this.dj]));this.meshes=new ct(null,this.xh([this.Jk]));this.levels=new ct(null,null,this.xh([this.Ik]))};
f.e=function(){bt.c.e.call(this);null!=this.Ik&&(this.Ik.g(),delete this.Ik);null!=this.Sk&&(this.Sk.g(),delete this.Sk);null!=this.sz&&(this.sz.g(),delete this.sz);null!=this.Rk&&(this.Rk.g(),delete this.Rk);null!=this.Jk&&(this.Jk.g(),delete this.Jk);null!=this.dj&&(this.dj.g(),delete this.dj);null!=this.Zt&&(this.Zt.g(),delete this.Zt)};t("xiv.ui.ctrl.XtkControllerTree.ControlSet",ct);t("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",bt.ID_PREFIX);t("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",bt.CSS_SUFFIX);
t("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",dt);t("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",bt.prototype.cz);t("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",bt.prototype.TF);t("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",bt.prototype.nH);t("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",bt.prototype.OJ);t("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",bt.prototype.xh);t("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",bt.prototype.Kq);
t("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",bt.prototype.nv);t("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",bt.prototype.e);function et(){cd.call(this);this.n="shaders";this.wr="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.wr=a+="}\n";this.kr="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.kr=a+="}\n"}
w(et,cd);
var ft={JR:"vertexPosition",IR:"vertexNormal",HR:"vertexColor",LR:"vertexTexturePos",KR:"vertexScalar"},gt={NR:"view",JQ:"perspective",HP:"center",GQ:"objectTransform",DR:"useObjectColor",EQ:"objectColor",FR:"useScalars",YQ:"scalarsReplaceMode",VQ:"scalarsMin",SQ:"scalarsMax",WQ:"scalarsMinColor",TQ:"scalarsMaxColor",XQ:"scalarsMinThreshold",UQ:"scalarsMaxThreshold",RQ:"scalarsInterpolation",KQ:"pointSize",FQ:"objectOpacity",DQ:"normal",ER:"usePicking",GR:"useTexture",CR:"useLabelMapTexture",nQ:"labelmapOpacity",
mQ:"labelmapColor",pR:"textureSampler",qR:"textureSampler2",RR:"volumeLowerThreshold",YR:"volumeUpperThreshold",VR:"volumeScalarMin",TR:"volumeScalarMax",WR:"volumeScalarMinColor",UR:"volumeScalarMaxColor",$R:"volumeWindowLow",ZR:"volumeWindowHigh",XR:"volumeTexture"};
function ht(a){var b=Object.keys(gt);if(!Object.keys(ft).every(function(a){a=ft[a];return-1!=this.wr.search(a)||-1!=this.kr.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=gt[a];return-1!=this.wr.search(a)||-1!=this.kr.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function it(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");cd.call(this);this.n="buffer";this.wb=a;this.mj=b;this.nj=c}w(it,cd);function jt(a,b){this.mv=a instanceof sh?a:new sh(a,b)}w(jt,Lo);jt.prototype.ce=function(a,b,c,d){ro(zi(a),0,a,b,this.mv,c,null,d)};function kt(a,b){this.TN=4;this.Ex=b||void 0;Ij.call(this,a)}w(kt,Ij);kt.prototype.Ux=function(a){this.Ex=a||void 0;this.Ja()&&this.ce()};kt.prototype.ce=function(){if(this.Ex){var a=!this.Ja()&&"move_offscreen"!=this.Vn,b=this.a();a&&(b.style.visibility="hidden",Qi(b,!0));this.Ex.ce(b,this.TN,this.DT);a&&Qi(b,!1)}};function lt(a,b,c){this.pb=c||(a?Dh(Gh(a)):Dh());kt.call(this,this.pb.r("div",{style:"position:absolute;display:none;"}));this.sv=new sh(1,1);this.vl=new gg;a&&this.Pm(a);null!=b&&this.nq(b)}w(lt,kt);var mt=[];f=lt.prototype;f.qe=null;f.className="goog-tooltip";f.bF=500;f.pL=0;f.H=function(){return this.pb};f.Pm=function(a){a=Gh(a);this.vl.add(a);P(a,"mouseover",this.Hl,!1,this);P(a,"mouseout",this.ps,!1,this);P(a,"mousemove",this.EC,!1,this);P(a,"focus",this.Fl,!1,this);P(a,"blur",this.ps,!1,this)};
f.detach=function(a){if(a)a=Gh(a),nt(this,a),this.vl.remove(a);else{for(var b=this.vl.Cl(),c=0;a=b[c];c++)nt(this,a);this.vl.clear()}};function nt(a,b){Uc(b,"mouseover",a.Hl,!1,a);Uc(b,"mouseout",a.ps,!1,a);Uc(b,"mousemove",a.EC,!1,a);Uc(b,"focus",a.Fl,!1,a);Uc(b,"blur",a.ps,!1,a)}f.nq=function(a){ci(this.a(),a)};f.Px=function(a){var b=this.a();b&&Y(b);lt.c.Px.call(this,a);a&&(b=this.pb.qa.body,b.insertBefore(a,b.lastChild))};f.$v=function(){return ii(this.a())};
f.kn=function(){return this.xk?this.Ja()?4:1:this.op?3:this.Ja()?2:0};f.bx=function(){if(!Ij.prototype.bx.call(this))return!1;if(this.anchor)for(var a,b=0;a=mt[b];b++)ai(a.a(),this.anchor)||a.ea(!1);Ib(mt,this);a=this.a();a.className=this.className;ot(this);P(a,"mouseover",this.LC,!1,this);P(a,"mouseout",this.KC,!1,this);pt(this);return!0};
f.hx=function(){Kb(mt,this);for(var a=this.a(),b,c=0;b=mt[c];c++)b.anchor&&ai(a,b.anchor)&&b.ea(!1);this.YD&&qt(this.YD);Uc(a,"mouseover",this.LC,!1,this);Uc(a,"mouseout",this.KC,!1,this);this.anchor=void 0;0==this.kn()&&(this.ut=!1);Ij.prototype.hx.call(this)};f.yD=function(a,b){this.anchor==a&&this.vl.contains(this.anchor)&&(this.ut||!this.XT?(this.ea(!1),this.Ja()||(this.anchor=a,this.Ux(b||rt(this,0)),this.ea(!0))):this.anchor=void 0);this.xk=void 0};
f.fM=function(a){this.op=void 0;a==this.anchor&&(null!=this.qe&&(this.qe==this.a()||this.vl.contains(this.qe))||this.UA&&this.UA.qe||this.ea(!1))};function st(a,b){var c=qi(a.pb);a.sv.x=b.clientX+c.x;a.sv.y=b.clientY+c.y}f.Hl=function(a){var b=tt(this,a.target);this.qe=b;ot(this);b!=this.anchor&&(this.anchor=b,this.xk||(this.xk=Uf(ua(this.yD,this,b,void 0),this.bF)),ut(this),st(this,a))};function tt(a,b){try{for(;b&&!a.vl.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.EC=function(a){st(this,a);this.ut=!0};f.Fl=function(a){this.qe=a=tt(this,a.target);this.ut=!0;if(this.anchor!=a){this.anchor=a;var b=rt(this,1);ot(this);this.xk||(this.xk=Uf(ua(this.yD,this,a,b),this.bF));ut(this)}};function rt(a,b){if(0==b){var c=a.sv.clone();return new vt(c)}return new wt(a.qe)}function ut(a){if(a.anchor)for(var b,c=0;b=mt[c];c++)ai(b.a(),a.anchor)&&(b.UA=a,a.YD=b)}
f.ps=function(a){var b=tt(this,a.target),c=tt(this,a.relatedTarget);b!=c&&(b==this.qe&&(this.qe=null),pt(this),this.ut=!1,!this.Ja()||a.relatedTarget&&ai(this.a(),a.relatedTarget)?this.anchor=void 0:qt(this))};f.LC=function(){var a=this.a();this.qe!=a&&(ot(this),this.qe=a)};f.KC=function(a){var b=this.a();this.qe!=b||a.relatedTarget&&ai(b,a.relatedTarget)||(this.qe=null,qt(this))};function pt(a){a.xk&&(ba.clearTimeout(a.xk),a.xk=void 0)}
function qt(a){2==a.kn()&&(a.op=Uf(ua(a.fM,a,a.anchor),a.pL))}function ot(a){a.op&&(ba.clearTimeout(a.op),a.op=void 0)}f.e=function(){this.ea(!1);pt(this);this.detach();this.a()&&Y(this.a());this.qe=null;delete this.pb;lt.c.e.call(this)};function vt(a,b){jt.call(this,a,b)}w(vt,jt);vt.prototype.ce=function(a,b,c){b=zi(a);b=Ci(b);c=c?new uh(c.top+10,c.right,c.bottom,c.left+10):new uh(10,0,0,10);to(this.mv,a,4,c,b,9)&496&&to(this.mv,a,4,c,b,5)};function wt(a){Mo.call(this,a,3)}w(wt,Mo);
wt.prototype.ce=function(a,b,c){var d=new sh(10,0);ro(this.element,this.No,a,b,d,c,9)&496&&ro(this.element,2,a,1,d,c,5)};function xt(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!la(b)||!la(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof Xr))throw Error("Invalid interactor.");lt.call(this);this.n="caption";this.zf=a;this.zr=b;this.Ar=c;this.Gb=d;this.ji=null;this.Uk=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Uk=[a];Tc(d,oe,this.Ap.bind(this));this.mw()}
w(xt,lt);xt.prototype.mw=function(){var a=ti(this.zf,"position");if("static"==a||""==a)this.zf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=W("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Uk[0]));a.appendChild(b);b.appendChild(c);this.ji=b;this.Ux(new jt(this.zr,this.Ar));this.ea(!0);this.Pm(this.zf);this.a().classList.add("x-tooltip")};xt.prototype.Ap=function(){this.ea(!1);this.ji&&Y(this.ji);this.a()&&Y(this.a());this.ji=null};function yt(){ts.call(this);this.n="renderer3D";this.oo=this.ro=this.no=this.qo=this.mo=this.po=this.Cu=this.Du=null;this.Sa=[0,0,0];this.fo=[0,0,0];this.Nz=null;this.nu=new jd;this.Bo=new jd;this.bl=new jd;this.so=new jd;this.ym=new jd;this.Hm=new jd;this.$k=new jd;this.Mm=new jd;this.Cb={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(yt,ts);yt.prototype.__defineGetter__("config",function(){return this.Cb});f=yt.prototype;
f.qO=function(){this.oo=this.ro=this.no=this.qo=this.mo=this.po=null;this.Sa=[0,0,0]};f.ix=function(a){yt.c.ix.call(this,a);var b=a.zr;a=a.Ar;var c=this.Bx(b,a);if(c=this.get(c))if(c=c.xm){var d=Gi(this.xa),b=new xt(this.xa,d.x+b+10,d.y+a+10,this.Gb);a=qj(c,null);if(b=b.a())b.innerHTML=pj(a)}};
f.ra=function(){yt.c.ra.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Va,this.Ia),this.b.clearColor(this.fo[0],this.fo[1],this.fo[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.Cb.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Va,this.Ia,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Va,this.Ia);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.Nz=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new et;zt(this,a)};
function zt(a,b){if(null==a.zc||null==a.b||null==a.ma)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof et))throw Error("Could not add shaders.");ht(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.kr);a.b.shaderSource(d,b.wr);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.Cu=e;Object.keys(ft).forEach(function(a){a=ft[a];this.nu.set(a,this.b.getAttribLocation(this.Cu,a));this.b.enableVertexAttribArray(this.nu.get(a))}.bind(a));
Object.keys(gt).forEach(function(a){a=gt[a];this.Bo.set(a,this.b.getUniformLocation(this.Cu,a))}.bind(a));a.Du=b}
f.Yh=function(a){yt.c.Yh.call(this,a);var b=!1;if(null!=a){this.get(a.sd)&&(b=!0);var c=a.sd,d=a.t,e=a.$,g=a.Mc,k=a.Ua,l=a.da,n=a.lc,m=a.Rd,q=a.m,p=a.cb;if(null!=q&&null!=q.da&&q.da.C)this.Yh(q);else if(null!=q&&q.C&&this.Yh(q),null!=m&&null!=m.da&&m.da.C)this.Nb.load(m,a);else if(null!=k&&null!=k.da&&k.da.C)this.Nb.load(k,a);else{if(null!=l&&h(l))if(null!=a.ai){if(a.ai.Hp!=l.length||!a.C)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Nb.load(l[b],a);return}else{if(null!=l&&l.C){this.Nb.load(a,a);
return}if(null!=p&&null!=p.da&&p.da.C){this.Nb.load(p,a);return}}if(0<a.i.length)for(l=a.i,m=l.length,q=q=0;q<m;q++)this.Yh(l[q]);if(d){for(l=0;this.pr;)l++,window.console.log("Possible thread lock avoided: "+l);this.pr=!0;m=a instanceof Ke&&a.ki instanceof Kp;b&&null!=k&&k.C&&(l=this.$k.get(c),null!=l&&this.b.isBuffer(l.wb)&&this.b.deleteBuffer(l.wb));l=null;if(null!=k)if(!b||k.C){l=a.Lm;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
q=!1;k.uj&&(q=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,q);q=this.b.createTexture();q.VC=k.ng;this.Mm.set(k.sd,q);this.b.bindTexture(this.b.TEXTURE_2D,q);k.uj?(q=this.b.RGBA,k.Dz&&(q=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,q,k.Bu,k.Au,0,q,this.b.UNSIGNED_BYTE,k.uj)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,q.VC);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);m?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);q=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
q);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new it(q,l.length,2);this.$k.set(c,l);k.C=!1}else l=this.$k.get(c);Lf(this.Nb,.1);if(m)this.pr=!1,A.Nd(this.n+".update"),Lf(this.Nb,.9);else{if(!b||d.C||n.C){m=n.yb;k=A.p.Tb(m,d.rg,d.sg,d.tg);m=A.p.Tb(m,d.og,d.pg,d.qg);if(null===this.po||k.x<this.po)this.po=k.x;if(null===this.mo||m.x>this.mo)this.mo=m.x;if(null===this.qo||k.y<this.qo)this.qo=k.y;if(null===this.no||m.y>this.no)this.no=m.y;if(null===this.ro||k.z<this.ro)this.ro=
k.z;if(null===this.oo||m.z>this.oo)this.oo=m.z;this.Sa=[(this.po+this.mo)/2,(this.qo+this.no)/2,(this.ro+this.oo)/2];n.C=!1}b&&d.C&&(n=this.bl.get(c),null!=n&&this.b.isBuffer(n.wb)&&this.b.deleteBuffer(n.wb));n=null;!b||d.C?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.Zb,this.b.STATIC_DRAW),n=new it(n,d.count,3),d.C=!1):n=this.bl.get(c);Lf(this.Nb,.3);b&&e.C&&(k=this.bl.get(c),null!=k&&this.b.isBuffer(k.wb)&&this.b.deleteBuffer(k.wb));
k=null;!b||e.C?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.Zb,this.b.STATIC_DRAW),k=new it(k,e.count,3),e.C=!1):k=this.so.get(c);Lf(this.Nb,.3);b&&g&&g.C&&(e=this.ym.get(c),null!=e&&this.b.isBuffer(e.wb)&&this.b.deleteBuffer(e.wb));e=null;if(g)if(!b||g.C){if(g.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();g.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
g.Zb,this.b.STATIC_DRAW);e=new it(e,g.count,3);g.C=!1}else e=this.ym.get(c);Lf(this.Nb,.2);b&&p&&p.C&&(g=this.Hm.get(c),null!=g&&this.b.isBuffer(g.wb)&&this.b.deleteBuffer(g.wb));g=null;if(p)if(g=p.io,!b||p.C){if(g.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,g,this.b.STATIC_DRAW);g=new it(d,g.length,3);p.C=!1}else g=this.Hm.get(c);Lf(this.Nb,.1);b||this.mh.add(a);this.bl.set(c,
n);this.so.set(c,k);this.ym.set(c,e);this.$k.set(c,l);this.Hm.set(c,g);this.pr=a.C=!1}}else a.C=!1}}};f.Bx=function(a,b){if(this.Cb.PICKING_ENABLED){this.Kh(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.Ia-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.Kh=function(a,b){yt.c.Kh.call(this,a,b);this.b.viewport(0,0,this.Va,this.Ia);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.mh.bb,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Nz):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.ma.zu,g=this.ma.M;this.b.uniformMatrix4fv(this.Bo.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.Bo.get("view"),!1,g);e=this.Sa;this.b.uniform3f(this.Bo.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
g=this.Ud.length;for(e=0;e<g;++e){var k=this.Ud[e];if(k instanceof Q){var l=A.p.Tb(this.ma.M,k.wa[0]+k.d[0].A[0],k.wa[1]+k.d[0].A[1],k.wa[2]+k.d[0].A[2]),n=A.p.Tb(this.ma.M,k.wa[0]-k.d[0].A[0],k.wa[1]-k.d[0].A[1],k.wa[2]-k.d[0].A[2]),m=Math.abs(l.z-n.z),l=A.p.Tb(this.ma.M,k.wa[0]+k.d[1].A[0],k.wa[1]+k.d[1].A[1],k.wa[2]+k.d[1].A[2]),n=A.p.Tb(this.ma.M,k.wa[0]-k.d[1].A[0],k.wa[1]-k.d[1].A[1],k.wa[2]+-k.d[1].A[2]),q=Math.abs(l.z-n.z),l=A.p.Tb(this.ma.M,k.wa[0]+k.d[2].A[0],k.wa[1]+k.d[2].A[1],k.wa[2]+
k.d[2].A[2]),n=A.p.Tb(this.ma.M,k.wa[0]-k.d[2].A[0],k.wa[1]-k.d[2].A[1],k.wa[2]-k.d[2].A[2]),l=Math.max(m,q,Math.abs(l.z-n.z));l==m?Jp(k,0):l==q?Jp(k,1):Jp(k,2)}}if(this.Cb.ORDERING_ENABLED){m=!1;g=this.Ud;k=g.length-1;do if(e=g[k],e instanceof Q&&e.Ze&&-1!=e.Hb){var m=e.i[e.Hb].i,q=e.Hb,l=A.p.Tb(this.ma.M,e.wa[0]+e.d[q].Oa[0],e.wa[1]+e.d[q].Oa[1],e.wa[2]+e.d[q].Oa[2]),n=A.p.Tb(this.ma.M,e.wa[0]-e.d[q].Oa[0],e.wa[1]-e.d[q].Oa[1],e.wa[2]-e.d[q].Oa[2]),l=l.z-n.z,n=Math.max(e.vm[e.Hb],Math.max(e.vm[e.Hb+
4],e.vm[e.Hb+8])),p=Math.min(e.vm[e.Hb],Math.min(e.vm[e.Hb+4],e.vm[e.Hb+8]));if(0>l*(n+p))for(l=l=0;l<e.wo[q]-1;l++)m[l]&&(m[l].Wc=e.Wc,m[l].rd=e.d[q].Jm*l);else for(l=e.wo[q]-1;0<=l;l--)m[l]&&(m[l].Wc=e.Wc,m[l].rd=(e.wo[q]-1)*e.d[q].Jm-e.d[q].Jm*l);m=!0}while(k--);g=this.mh.bb;k=g.length-1;do e=g[k],!e.ob||1==e.Wc||e instanceof Ke||(m=e,q=e.t.hr,e=A.p.Tb(e.lc.yb,q[0],q[1],q[2]),e=A.p.Tb(this.ma.M,e.x,e.y,e.z),e=A.K.Bv(this.ma.Wk,e),e=Math.round(1E3*e)/1E3,m.rd=e,m=!0);while(k--);m&&this.mh.sort()}if(g=
!a&&null!=b&&b&&this.Cb.STATISTICS_ENABLED)var r=0,s=0,z=0,y=0;var e=this.nu,k=e.get("vertexPosition"),m=e.get("vertexNormal"),q=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.Bo,p=e.get("usePicking"),F=e.get("useObjectColor"),D=e.get("objectColor"),O=e.get("useScalars"),K=e.get("scalarsReplaceMode"),J=e.get("scalarsMin"),G=e.get("scalarsMax"),E=e.get("scalarsMinColor"),M=e.get("scalarsMaxColor"),L=e.get("scalarsInterpolation"),U=e.get("scalarsMinThreshold"),H=e.get("scalarsMaxThreshold"),
u=e.get("objectOpacity"),v=e.get("labelmapOpacity"),da=e.get("labelmapColor"),V=e.get("useTexture"),B=e.get("useLabelMapTexture"),T=e.get("textureSampler"),rb=e.get("textureSampler2"),sa=e.get("volumeLowerThreshold"),Ja=e.get("volumeUpperThreshold"),wa=e.get("volumeScalarMin"),Jb=e.get("volumeScalarMax"),Sb=e.get("volumeWindowLow"),dc=e.get("volumeWindowHigh"),Xj=e.get("volumeScalarMinColor"),vu=e.get("volumeScalarMaxColor"),Bq=e.get("volumeTexture"),wu=e.get("objectTransform"),xu=e.get("pointSize"),
e=d;do{var Qa=c[d-e];if(Qa){var fb=null;Qa instanceof Ke&&Qa.ki&&(fb=Qa.ki);if(Qa.ob&&(!fb||fb.ob)&&(!a||Qa.to)){var Fc=Qa.sd,Nd=Qa.lo,kd=this.bl.get(Fc),ee=this.so.get(Fc),Vl=this.ym.get(Fc),bf=this.Hm.get(Fc),Wl=this.$k.get(Fc);this.b.bindBuffer(this.b.ARRAY_BUFFER,kd.wb);this.b.vertexAttribPointer(k,kd.nj,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,ee.wb);this.b.vertexAttribPointer(m,ee.nj,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(p,!0):this.b.uniform1i(p,!1);!Vl||a||Nd?(ee=1,Nd&&
!a&&(ee=0),this.b.uniform1i(F,ee),ee=Qa.Ha,a&&(ee=[Math.floor(Fc%65025%255)/255,Math.floor(Fc%65025/255)/255,Math.floor(Fc/65025)/255]),this.b.uniform3f(D,parseFloat(ee[0]),parseFloat(ee[1]),parseFloat(ee[2])),this.b.vertexAttribPointer(q,kd.nj,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(F,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,Vl.wb),this.b.vertexAttribPointer(q,Vl.nj,this.b.FLOAT,!1,0,0));!bf||a||Nd?(this.b.uniform1i(O,!1),this.b.vertexAttribPointer(n,kd.nj,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(O,
!0),this.b.uniform1i(K,Qa.cb.Qz),Fc=Qa.cb.qj,Nd=Qa.cb.oj,this.b.uniform3f(E,parseFloat(Fc[0]),parseFloat(Fc[1]),parseFloat(Fc[2])),this.b.uniform3f(M,parseFloat(Nd[0]),parseFloat(Nd[1]),parseFloat(Nd[2])),this.b.uniform1f(U,parseFloat(Qa.cb.xb)),this.b.uniform1f(H,parseFloat(Qa.cb.zb)),this.b.uniform1f(J,parseFloat(Qa.cb.ne)),this.b.uniform1f(G,parseFloat(Qa.cb.Yb)),this.b.uniform1i(L,parseInt(Qa.cb.pu,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,bf.wb),this.b.vertexAttribPointer(n,bf.nj,this.b.FLOAT,
!1,0,0));this.b.uniform1f(u,parseFloat(Qa.Wc));Qa.Ua&&Wl&&!a?(this.b.uniform1i(V,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.Mm.get(Qa.Ua.sd)),this.b.uniform1i(T,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,Wl.wb),this.b.vertexAttribPointer(l,Wl.nj,this.b.FLOAT,!1,0,0),this.b.uniform1i(Bq,!1)):(this.b.uniform1i(V,!1),this.b.vertexAttribPointer(l,kd.nj,this.b.FLOAT,!1,0,0));fb&&(this.b.uniform1i(Bq,!0),this.b.uniform1f(sa,fb.xb),this.b.uniform1f(Ja,fb.zb),this.b.uniform1f(wa,
fb.ne),this.b.uniform1f(Jb,fb.Yb),Fc=fb.qj,Nd=fb.oj,this.b.uniform3f(Xj,parseFloat(Fc[0]),parseFloat(Fc[1]),parseFloat(Fc[2])),this.b.uniform3f(vu,parseFloat(Nd[0]),parseFloat(Nd[1]),parseFloat(Nd[2])),this.b.uniform1f(Sb,fb.Pb),this.b.uniform1f(dc,fb.Ob),bf=fb.m,this.b.uniform1i(B,!1),fb.Ze?this.b.uniform1f(u,parseFloat(fb.Wc)):bf&&bf.ob&&(fb=Qa.m.sd,this.b.uniform1i(B,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.Mm.get(fb)),this.b.uniform1i(rb,1),this.b.uniform1f(v,
bf.Wc),this.b.uniform4fv(da,bf.Eu)));this.b.uniformMatrix4fv(wu,!1,Qa.lc.yb);fb=1;"POINTS"==Qa.Vd&&(fb=Qa.uo);this.b.uniform1f(xu,fb);fb=-1;Qa.Vd==Vd?(fb=this.b.TRIANGLES,g&&(s+=kd.mj/3)):"LINES"==Qa.Vd?(this.b.lineWidth(Qa.Fm),fb=this.b.LINES,g&&(z+=kd.mj/2)):"POINTS"==Qa.Vd?(fb=this.b.POINTS,g&&(y+=kd.mj)):"TRIANGLE_STRIPS"==Qa.Vd?(fb=this.b.TRIANGLE_STRIP,g&&(s+=kd.mj/3)):"POLYGONS"==Qa.Vd&&(fb=0==kd.mj%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,g&&(s+=kd.mj/3));g&&(r+=kd.mj);this.b.drawArrays(fb,
0,kd.mj)}}}while(--e);g&&(c="Objects: "+d+" | "+("Vertices: "+r+" | "),c+="Triangles: "+Math.round(s)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.Mm.Ai(),window.console.log(c))}};
f.remove=function(a){yt.c.remove.call(this,a);if(0<a.i.length)for(var b=a.i,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.sd;c=this.$k.get(b);null!=c&&this.b.isBuffer(c.wb)&&this.b.deleteBuffer(c.wb);a.Ua&&(c=this.Mm.get(a.Ua.sd))&&(this.b.deleteTexture(c),this.Mm.remove(a.Ua.sd));c=this.bl.get(b);null!=c&&this.b.isBuffer(c.wb)&&this.b.deleteBuffer(c.wb);c=this.so.get(b);null!=c&&this.b.isBuffer(c.wb)&&this.b.deleteBuffer(c.wb);c=this.ym.get(b);null!=c&&this.b.isBuffer(c.wb)&&this.b.deleteBuffer(c.wb);
c=this.Hm.get(b);null!=c&&this.b.isBuffer(c.wb)&&this.b.deleteBuffer(c.wb);this.bl.remove(b);this.so.remove(b);this.ym.remove(b);this.$k.remove(b);this.Hm.remove(b);this.mh.remove(a);return!0};f.Df=function(){this.Du=null;delete this.Du;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);yt.c.Df.call(this)};yt.prototype.__defineGetter__("bgColor",function(){return this.fo});yt.prototype.__defineSetter__("bgColor",function(a){this.fo=a});
yt.prototype.RN=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.Bx(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var g=ls(this.ma,a/this.Va*2-1,(this.Ia-b)/this.Ia*2-1,0);a=ls(this.ma,a/this.Va*2-1,(this.Ia-b)/this.Ia*2-1,1);g[0]+=this.Sa[0];g[1]+=this.Sa[1];g[2]+=this.Sa[2];a[0]+=this.Sa[0];a[1]+=this.Sa[1];a[2]+=this.Sa[2];b=[e.t.rg,e.t.sg,e.t.tg];var k=[e.t.og,e.t.sg,e.t.tg],l=[e.t.og,e.t.pg,e.t.tg],n=[e.t.rg,e.t.pg,e.t.tg],m=[e.t.rg,e.t.pg,e.t.qg],q=[e.t.rg,e.t.sg,
e.t.qg],p=[e.t.og,e.t.pg,e.t.qg],r=[e.t.og,e.t.sg,e.t.qg];b=[A.p.Tb(e.lc.yb,b[0],b[1],b[2]),A.p.Tb(e.lc.yb,k[0],k[1],k[2]),A.p.Tb(e.lc.yb,l[0],l[1],l[2]),A.p.Tb(e.lc.yb,n[0],n[1],n[2]),A.p.Tb(e.lc.yb,m[0],m[1],m[2]),A.p.Tb(e.lc.yb,q[0],q[1],q[2]),A.p.Tb(e.lc.yb,p[0],p[1],p[2]),A.p.Tb(e.lc.yb,r[0],r[1],r[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],k=[Math.min(k[0],s.x),Math.max(k[1],s.x),Math.min(k[2],s.y),Math.max(k[3],s.y),Math.min(k[4],s.z),Math.max(k[5],
s.z)];s=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,r=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(s[l]-g[n]);Infinity!=y&&-Infinity!=y&&(p=g[m]+a[m]*y,y=g[q]+a[q]*y,p>=s[r]&&p<=s[r+1]&&y>=s[z]&&y<=s[z+1]?(r=[],r[n]=s[l],r[m]=p,r[q]=y,b.push(r)):(r=[],r[n]=s[l],r[m]=p,r[q]=y,k.push(r)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(s=0;2>s;s++)b=a[s],k[s]=Math.sqrt((b[0]-g[0])*(b[0]-g[0])+(b[1]-g[1])*(b[1]-g[1])+(b[2]-g[2])*(b[2]-g[2]));g=b=s=null;k[0]<k[1]?(s=a[0],b=a[1]):
(s=a[1],b=a[0]);g=Math.sqrt((s[0]-b[0])*(s[0]-b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));g/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k=[s[0]/b,s[1]/b,s[2]/b];l=e.t.Zb;n=l.length;for(s=0;s<g;s+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(m=l[b],q=l[b+1],p=l[b+2],r=new A.K(m,q,p),r=A.p.Tb(e.lc.yb,m,q,p),Math.sqrt((a[0]-r.x)*(a[0]-r.x)+(a[1]-r.y)*(a[1]-r.y)+(a[2]-r.z)*(a[2]-r.z))<=d)return[r.x,r.y,r.z];return null};
t("X.renderer3D",yt);t("X.renderer3D.prototype.init",yt.prototype.ra);t("X.renderer3D.prototype.add",yt.prototype.add);t("X.renderer3D.prototype.onShowtime",yt.prototype.sx);t("X.renderer3D.prototype.onRender",yt.prototype.UD);t("X.renderer3D.prototype.get",yt.prototype.get);t("X.renderer3D.prototype.render",yt.prototype.k);t("X.renderer3D.prototype.destroy",yt.prototype.Df);t("X.renderer3D.prototype.remove",yt.prototype.remove);t("X.renderer3D.prototype.resetBoundingBox",yt.prototype.qO);
t("X.renderer3D.prototype.resetViewAndRender",yt.prototype.$p);t("X.renderer3D.prototype.pick",yt.prototype.Bx);t("X.renderer3D.prototype.pick3d",yt.prototype.RN);function At(){yt.call(this)}w(At,yt);t("xiv.vis.XtkRenderer3D",At);At.prototype.Qg=function(){this.Sl()};At.prototype.Rl=function(a){At.c.Rl.call(this,a);this.dispatchEvent({type:"B",value:a.al})};At.prototype.k=function(){this.zc&&this.b?(At.c.k.call(this),this.dispatchEvent({type:"C"})):this.ra()};At.prototype.remove=function(a){null!=a&&At.c.remove.call(this,a)};t("xiv.vis.XtkRenderer3D.prototype.onResize",At.prototype.Qg);t("xiv.vis.XtkRenderer3D.prototype.onProgress",At.prototype.Rl);
t("xiv.vis.XtkRenderer3D.prototype.render",At.prototype.k);t("xiv.vis.XtkRenderer3D.prototype.remove",At.prototype.remove);function Bt(){zs.call(this);this.orientation="V";this.tm=At}w(Bt,zs);t("xiv.vis.XtkPlane3D",Bt);t("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function Ct(){ad.call(this);this.vf=null;this.re={bj:[],Lw:[],Iv:[],gF:[]};this.fj=new Fs("X");this.Lk=new Fs("Y");this.Mk=new Fs("Z");this.hc=new Bt;this.yc={};this.yc[this.fj.bc()]=this.fj;this.yc[this.Lk.bc()]=this.Lk;this.yc[this.Mk.bc()]=this.Mk;this.yc[this.hc.bc()]=this.hc;this.Ih=null;this.Ft(this.hc);Dt(this)}w(Ct,xs);t("xiv.vis.XtkEngine",Ct);Ct.ID_PREFIX="xiv.vis.XtkEngine";Ct.SLICE_TO_RAS_KEY="sliceToRAS"+C();Ct.HAS_LABEL_MAP_KEY="hasLabelMap";f=Ct.prototype;f.ot=!1;
function Et(a,b){null!=b.Ve.Fo&&N(b.Ve.Fo,function(a){this.re.gF.push(Ft(a))}.bind(a))}f.ME=function(a,b){switch(a.toLowerCase()){case "x":this.fj.uc(b);break;case "y":this.Lk.uc(b);break;case "z":this.Mk.uc(b);break;case "v":this.hc.uc(b)}};f.Ft=function(a){this.Ih=a;this.Ih.ra();this.oO=P(this.Ih,"B",this.ox.bind(this))};f.pK=function(){return this.Ih};f.tx=function(a){this.dispatchEvent(a)};
function Dt(a){I(a.yc,function(a){P(a,"F",this.tx.bind(this));P(a,"H",function(){}.bind(this))}.bind(a))}f.Kq=function(){this.vf.Kq()};f.zJ=function(){return this.vf};
function Gt(a,b){null!=a.vf&&(a.vf.g(),a.vf=null);a.vf=new bt;null!=(b.Ve&&null!=b.Ve.Fo)&&(Et(a,b),N(a.re.gF,function(a){this.vf.nv(a)}.bind(a)));var c;N(b.yf,function(a){c=a.yh();null!=c&&(currXObj=Ht(c,a.Tj),renderProps=a.Ve,currXObj&&(this.vf.nv(currXObj,renderProps),currXObj instanceof Q?(this.constructor.$T(currXObj,renderProps),this.re.bj.push(currXObj)):currXObj instanceof Aq?(this.constructor.ZT(currXObj,renderProps),this.re.Lw.push(currXObj)):currXObj instanceof iq&&(this.constructor.YT(currXObj,
renderProps),this.re.Iv.push(currXObj))))}.bind(a))}f.lE=function(){this.Ft(this.hc);this.hc.ra();I(this.re,function(a,b){"volumes"!==b&&N(a,function(a){this.hc.add(a)}.bind(this))}.bind(this));Tc(this.hc.Ab(),"C",function(){this.bt();this.fj.k()}.bind(this));this.hc.k()};f.kE=function(a){var b=null!=a?a:this.gs();I(this.yc,function(a,d){"v"!=d.toLowerCase()&&(a.ra(),a.add(b),a.k())})};function It(a){var b=a.gs();I(a.re.volumes,function(a){a!==b&&(a.visible=!1)})}
f.mE=function(){var a=this.gs(),b=[],c=[],d=["x","y","z","v"];I(this.re,function(a,d){currArr="volumes"==d?c:b;N(a,function(a){currArr.push(a)})}.bind(this));N(b,function(a){this.hc.add(a)}.bind(this));N(c,function(b){b!==a&&(b.visible=!0,this.hc.add(b))}.bind(this));this.Ih.Ab().sx=function(){Kb(d,this.Ih.bc().toLowerCase());Jt(this,a)}.bind(this);this.Ih.add(a);this.Ih.k()};
f.k=function(a){this.ot=!1;Gt(this,a);var b=a.Ve;null!=b?(null!=b.backgroundColor&&this.hc.vt(a.Ve.backgroundColor),null!=b.pi&&this.hc.wt(a.Ve.pi)):(this.hc.vt(),this.hc.wt());if(0<this.re.bj.length){a=this.yc;b="";for(b in a)if(a[b].isEnabled()){this.Ft(a[b]);break}this.mE()}else this.hc.isEnabled()&&this.lE()};function Jt(a,b){var c=kb(a.yc)-1;I(a.yc,function(a){a!=this.Ih&&a.isEnabled()&&(a.add(b),Tc(a.Ab(),"C",function(){c--;0==c&&this.bt()}.bind(this)),a.k())}.bind(a))}
f.gs=function(){if(0!=this.re.bj.length){for(var a=0,b=this.re.bj.length;a<b;a++){var c=this.re.bj[a];if(c[ys])return c}this.re.bj[0][ys]=!0;return this.re.bj[0]}};f.j=function(){I(this.yc,function(a){a.j()}.bind(this))};f.ox=function(a){this.ot||this.dispatchEvent({type:"B",value:a.value})};f.bt=function(a){It(this);Vc(this.oO);this.ot=!0;this.dispatchEvent({type:"C",value:null!=a?a.value:1})};f.jK=function(){return this.fj};f.kK=function(){return this.Lk};f.lK=function(){return this.Mk};f.iK=function(){return this.hc};
f.fs=function(a){return this.yc[a]};f.mK=function(){return this.yc};f.g=function(){Ct.c.g.call(this);null!=this.vf&&(this.vf.g(),delete this.vf);Wc(this.fj);Wc(this.Lk);Wc(this.Mk);Wc(this.hc);delete this.Ih;qb(this.yc);delete this.yc;this.fj.g();delete this.fj;this.Lk.g();delete this.Lk;this.Mk.g();delete this.Mk;this.hc.g();delete this.hc;delete this.ot};
var Kt=["nrrd","nii","nii.gz","mgh","mgz"],Lt=["dicom","dcm","ima"],Mt=["hdr","img"],Nt=["nii","nii.gz"],Ot=["jpeg","jpg","gif","png","img"],Pt="stl vtk obj fsm inflated smoothwm pial orig".split(" "),Qt=["trk"];function Rt(a){var b=void 0;St(a)?b=new Aq:Tt(a)||Ut(a)||Vt(a)?b=new Q:Wt(a)&&(b=new iq);return b}function Ft(a,b){var c=new Ip;c.qh=a.position;c.caption=a.name;c.name=a.name;c.Ug=void 0===b?3:b;c.color=[.85,0,0];return c}function Tt(a){return-1<Kt.indexOf(a)?!0:!1}
function Vt(a){return-1<Ot.indexOf(a)?!0:!1}function Ut(a){return-1<Lt.indexOf(a)?!0:!1}function St(a){return-1<Pt.indexOf(a)?!0:!1}function Wt(a){return-1<Qt.indexOf(a)?!0:!1}var Xt={fibers:[],volumes:[],dicoms:[],analyze:[],nifti:[],meshes:[],annotations:[],images:[]};
function Ht(a,b){function c(a){var b=yk(a);a=xk(a);return b+"/"+a}var d=h(a)?zk(a[0]):zk(a),d=Rt(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(h(a)){var e=[];N(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=mb(b),d.iT=lb(b)):d.file=a;return d}t("xiv.vis.XtkEngine.EventType",{cR:"F",aR:"G",bR:"H",ERROR:"I",cS:"J",rQ:"K",sQ:"L"});t("xiv.vis.XtkEngine.ID_PREFIX",Ct.ID_PREFIX);t("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});
t("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",Ct.SLICE_TO_RAS_KEY);t("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",Ct.HAS_LABEL_MAP_KEY);t("xiv.vis.XtkEngine.generateXtkObjectFromExtension",Rt);t("xiv.vis.XtkEngine.createAnnotation",Ft);t("xiv.vis.XtkEngine.isVolume",Tt);t("xiv.vis.XtkEngine.isImage",Vt);t("xiv.vis.XtkEngine.isDicom",Ut);t("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<Mt.indexOf(a)?!0:!1});t("xiv.vis.XtkEngine.isNifti",function(a){return-1<Nt.indexOf(a)?!0:!1});
t("xiv.vis.XtkEngine.isMesh",St);t("xiv.vis.XtkEngine.isFiber",Wt);t("xiv.vis.XtkEngine.ViewablesObject",Xt);
t("xiv.vis.XtkEngine.getViewables",function(a){var b=ub(Xt);h(a)||(a=[a]);for(var c="",d="",e=0,g=a.length;e<g;e++)c=Ol(a[e]).toLowerCase(),d=Pl(c),0==c.lastIndexOf(".",0)||("mrml"===d?b.slicer.push(a[e]):Tt(d)?b.volumes.push(a[e]):Ut(d)?b.dicoms.push(a[e]):St(d)?b.meshes.push(a[e]):Wt(d)?b.fibers.push(a[e]):Vt(d)&&b.images.push(a[e]));window.console.log("VIEWABLE TYPES",b);I(b,function(a,c){a.length||sb(b,c)});return b});t("xiv.vis.XtkEngine.createXObject",Ht);
t("xiv.vis.XtkEngine.prototype.setPlaneEnabled",Ct.prototype.ME);t("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",Ct.prototype.Ft);t("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",Ct.prototype.pK);t("xiv.vis.XtkEngine.prototype.updateControllers",Ct.prototype.Kq);t("xiv.vis.XtkEngine.prototype.getControllerTree",Ct.prototype.zJ);t("xiv.vis.XtkEngine.prototype.render3dPlane",Ct.prototype.lE);t("xiv.vis.XtkEngine.prototype.render2D",Ct.prototype.kE);
t("xiv.vis.XtkEngine.prototype.renderAllPlanes",Ct.prototype.mE);t("xiv.vis.XtkEngine.prototype.render",Ct.prototype.k);t("xiv.vis.XtkEngine.prototype.getSelectedVolume",Ct.prototype.gs);t("xiv.vis.XtkEngine.prototype.updateStyle",Ct.prototype.j);t("xiv.vis.XtkEngine.prototype.getPlaneX",Ct.prototype.jK);t("xiv.vis.XtkEngine.prototype.getPlaneY",Ct.prototype.kK);t("xiv.vis.XtkEngine.prototype.getPlaneZ",Ct.prototype.lK);t("xiv.vis.XtkEngine.prototype.getPlaneV",Ct.prototype.iK);
t("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",Ct.prototype.fs);t("xiv.vis.XtkEngine.prototype.getPlanes",Ct.prototype.mK);t("xiv.vis.XtkEngine.prototype.dispose",Ct.prototype.g);function Yt(){$l.call(this)}w(Yt,$l);t("xiv.ui.HelpDialog",Yt);Yt.ID_PREFIX="xiv.ui.HelpDialog";Yt.CSS={eG:"nrg-ui-helpdialog-dialog",pm:"nrg-ui-helpdialog-text",TG:"xiv-ui-helpdialog-scrollablezippytree",xf:"xiv-ui-helpdialog-title",ej:"xiv-ui-helpdialog-closebutton"};Yt.LAYOUT_IMAGE_ID=Yt.ID_PREFIX+".LayoutImage";
Yt.prototype.k=function(a){Yt.c.k.call(this,a);S(this.a(),"xiv-ui-helpdialog");this.eo=new Wr;S(this.eo.a(),this.constructor.CSS.TG);this.eo.k(this.a());Zt(this);this.Ku(this.constructor.CSS.xf);this.Zz(this.constructor.CSS.ej)};Yt.prototype.CE=function(a){null!=document.getElementById(Yt.LAYOUT_IMAGE_ID)&&(document.getElementById(Yt.LAYOUT_IMAGE_ID).src=a)};
function Zt(a){var b=[["Change Layouts","<img height=15 width=15 id="+Yt.LAYOUT_IMAGE_ID+"></img>"],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>'],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],
["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+
'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>'],["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>'],["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']],c=[["Add ViewBox Row",
'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Remove ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removerow.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Remove ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removecolumn.png"></img>'],
["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.Zf("Help");N([[["Slice-scroll","shift + mousemove","2D panels"],["Resize","left-click + drag","panel borders"]],b,c],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';N(a,function(a){c+="<tr>";N(a,
function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",k;currText=b+1;switch(currText){case 1:k="Image Manipulation";break;case 2:k="Toggles";break;case 3:k="Modal"}Y(c);var l=W("div");l.innerHTML=c;this.eo.Af(l,[k])}.bind(a))}Yt.prototype.e=function(){Yt.c.e.call(this);null!=this.eo&&this.eo.g()};
t("xiv.ui.HelpDialog.EventType",{});t("xiv.ui.HelpDialog.ID_PREFIX",Yt.ID_PREFIX);t("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",Yt.LAYOUT_IMAGE_ID);t("xiv.ui.HelpDialog.CSS_SUFFIX",Yt.CSS_SUFFIX);t("xiv.ui.HelpDialog.prototype.render",Yt.prototype.k);t("xiv.ui.HelpDialog.prototype.setLayoutButton",Yt.prototype.CE);t("xiv.ui.HelpDialog.prototype.disposeInternal",Yt.prototype.e);function $t(a,b,c){So.call(this,a,b||To.ye(),c);this.md(16,!0)}w($t,So);Gn("goog-toggle-button",function(){return new $t(null)});function au(a){Z.call(this);this.o={};this.U=a}w(au,Z);t("xiv.ui.ViewBoxDialogs",au);au.ID_PREFIX="xiv.ui.ViewBoxDialogs";au.CSS_SUFFIX={gh:"generic-toggle",mG:"infodialog",nG:"infodialog-text",pG:"inusedialog"};var bu="Info_"+C(),cu="Help_"+C(),du="InUse_"+C(),eu={fQ:bu,aQ:cu,iQ:du},fu="ToggleClass_"+C();f=au.prototype;f.CJ=function(){return this.o};f.BJ=function(a){return this.o[a]};
f.Ro=function(a,b,c,d,e,g,k,l){e=null!=e?e:"";var n=this.U.nl("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.o[a].ea(b);this.o[a].qh();this.dispatchEvent({type:b?"M":"N",rB:this.o[a],sB:a})}.bind(this),d);null!=this.o[a]&&this.o[a].g();c=new $l;this.o[a]=c;ik(c,null!=k?k:!1);pk(c,null!=l?l:null);c.k(this.U.Lb);hk(c,0);c.ce();c.Zf(e);S(c.a(),b);P(c,"c",function(){this.U.In(n)}.bind(this));P(c,lk,function(){}.bind(this));!1===g&&Fn(this.U.fe[a])};
f.vI=function(){this.Ro(eu.yQ,"xiv-ui-viewboxdialogs-meshes-dialog",au.CSS.gh,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.xI=function(){this.Ro(eu.SR,"xiv-ui-viewboxdialogs-volumes-dialog",au.CSS.gh,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.dB=function(){this.o[du]=new $l;pk(this.o[du],rk);this.o[du].k(this.U.Lb);this.o[du].rk("ViewBox in use.&nbspProceed anyway?");gu(this);hu(this)};
f.BE=function(a,b){Tc(this.o[du],qk,function(c){"yes"===c.key&&null!=a&&a(this);"no"===c.key&&null!=b&&b(this)}.bind(this))};f.sq=function(){S(this.o[du].a(),au.CSS.pG);ik(this.o[du],!0);this.o[du].ea(!0);this.o[du].qh()};f.update=function(){I(this.o,function(a){a.DF()})};f.Fq=function(a,b){var c=!1===b?0:1;window.console.log(a,this.o[a]);null!=this.o[a].a()&&zl(this.o[a].a(),200,c)};f.Tv=function(){return this.o[cu]};
function gu(a){null!=a.o[cu]&&a.o[cu].g();a.o[cu]=new Yt;ik(a.o[cu],!1);pk(a.o[cu],null);a.o[cu].k(a.U.Lb);a.o[cu].ea(!1);a.o[cu].qh();var b=a.U.nl("LEFT",au.CSS.gh,cu,"Help",function(a){a="true"==a.getAttribute("checked");this.o[cu].ea(a);this.o[cu].qh();this.dispatchEvent({type:a?"M":"N",rB:this.o[cu]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");P(a.o[cu],"c",function(){this.U.In(b)}.bind(a));a.U.In(b)}
function hu(a){null!=a.o[bu]&&a.o[bu].g();a.o[bu]=new $l;var b="";0<a.U.vb.length?I(a.U.vb[0].Ee,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Ol(a.U.vb[0].Si);ik(a.o[bu],!1);a.o[bu].zj(b);pk(a.o[bu],null);a.o[bu].k(a.U.Lb);a.o[bu].ea(!0);a.o[bu].Ww("left","top");a.o[bu].aA("xiv-ui-viewboxdialogs-infodialog-content");a.o[bu].KE("xiv-ui-viewboxdialogs-infodialog-hovered");S(a.o[bu].a(),au.CSS.mG);S(a.o[bu].Qh[0],au.CSS.nG);a.o[bu].Ku("xiv-ui-viewboxdialogs-infodialog-title");a.o[bu].Xz("xiv-ui-viewboxdialogs-infodialog-closebutton");
a.o[bu].Yz("xiv-ui-viewboxdialogs-infodialog-closebutton-image");var c=a.U.nl("LEFT",au.CSS.gh,bu,"Info. Display",function(a){a="true"==a.getAttribute("checked");this.o[bu].ea(a);this.o[bu].Ww("left","top");this.dispatchEvent({type:a?"M":"N",rB:this.o[bu]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");P(a.o[bu],"c",function(){this.U.In(c)}.bind(a))}f.e=function(){delete this.U;null!=this.o&&(I(this.o,function(a){Wc(a);a.e();a.g()}.bind(this)),qb(this.o))};
t("xiv.ui.ViewBoxDialogs.EventType",{WP:"M",VP:"N"});t("xiv.ui.ViewBoxDialogs.ID_PREFIX",au.ID_PREFIX);t("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",au.CSS_SUFFIX);t("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",eu);t("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",fu);t("xiv.ui.ViewBoxDialogs.prototype.getDialogs",au.prototype.CJ);t("xiv.ui.ViewBoxDialogs.prototype.getDialog",au.prototype.BJ);t("xiv.ui.ViewBoxDialogs.prototype.createToggleableDialog",au.prototype.Ro);t("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",au.prototype.vI);
t("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",au.prototype.xI);t("xiv.ui.ViewBoxDialogs.prototype.createDialogs",au.prototype.dB);t("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",au.prototype.BE);t("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",au.prototype.sq);t("xiv.ui.ViewBoxDialogs.prototype.update",au.prototype.update);t("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",au.prototype.Fq);t("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",au.prototype.Tv);
t("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",au.prototype.e);function iu(a,b,c,d){ad.call(this);this.U=a;this.ua=b;this.Za=c;this.o=d;this.Ed={Gd:null,Hj:null};this.Pg={left:!1,zD:!1,right:!1};this.Nl={Ot:{},RI:{},MN:{},NN:{}};P(this.o,"M",this.ND.bind(this));a=document.body;this.qb=new Sn;this.qb.Pm(a);P(this.qb,"key",this.Oi.bind(this));this.eg=W("div",{id:"mousefollower"});S(this.eg,this.constructor.CURSOR_CSS.qH);this.eg.innerHTML="Zoom In (drag up)<br>Zoom Out (drag down)<br>";Th(this.U.Lb,this.eg)}w(iu,ad);t("xiv.ui.ViewBoxInteractorHandler",iu);
var ju="Crosshairs_"+C(),ku="Settings_"+C(),lu="TwoDPan_"+C(),mu="TwoDZoom_"+C(),nu={xc:ju,jz:ku,qm:lu,rm:mu};iu.CSS={gh:"xiv-ui-viewboxinteractorhandler-generic-toggle",Qy:"xiv-ui-viewboxinteractorhandler-generic-dialog",Ry:"xiv-ui-viewboxinteractorhandler-generic-zippytree"};
iu.CURSOR_CSS={qH:"xiv-ui-viewboxinteractorhandler-zoom-follower",Sy:"xiv-ui-viewboxinteractorhandler-viewframe-grab",Vy:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",Ty:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",Uy:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",vz:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",wz:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};var ou="Orientation_"+C();f=iu.prototype;f.qb=null;f.Xn=null;f.Mb=null;f.Gy=!1;f.Ax=!1;f.dd={};
f.eB=function(){this.lB();pu(this);qu(this);this.hB();this.cB(!1);this.jB();this.kB();ru(this)};function su(a){var b=a.U.Lb;I(a.constructor.CURSOR_CSS,function(a){ph(b,a)})}function tu(a,b,c,d){b=b?S:ph;b(a.U.Lb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.U.Lb,d)}function uu(a){tu(a,!0,a.constructor.CURSOR_CSS.Sy,a.constructor.CURSOR_CSS.Vy);tu(a,!1,a.constructor.CURSOR_CSS.Ty,a.constructor.CURSOR_CSS.Uy)}
function yu(a){tu(a,!1,a.constructor.CURSOR_CSS.wz);tu(a,!0,a.constructor.CURSOR_CSS.vz)}
f.WM=function(a){this.Vm=a.target;this.Ed.Gd=this.Ed.Hj;this.Ed.Hj=a.Sw;if(null!=this.Ed.Gd){if(a.$E){if(!this.Wx){this.Wx=!0;this.RC();zu(this);return}}else this.Wx&&(this.cF(),zu(this),this.am(),this.Wx=!1);(new Rr(this.Ed.Hj[0],this.Ed.Hj[1])).add(new Rr(this.Ed.Gd[0],this.Ed.Gd[1]));a=this.Ed.Hj[0]-this.Ed.Gd[0];var b=this.Ed.Hj[1]-this.Ed.Gd[1];this.eg.style.visibility="hidden";this.Gy?(Y(this.eg),Th(this.Vm.ti,this.eg),this.eg.style.visibility="visible",this.eg.style.left=this.Ed.Hj[0]+20+"px",
this.eg.style.top=this.Ed.Hj[1]+"px",yu(this),this.Pg.left&&Au(this,a,b)):this.Ax&&(uu(this),this.Pg.left&&(tu(this,!1,this.constructor.CURSOR_CSS.Sy,this.constructor.CURSOR_CSS.Vy),tu(this,!0,this.constructor.CURSOR_CSS.Ty,this.constructor.CURSOR_CSS.Uy),this.Vm.ma.gt([-1*a,-1*b]),this.am()))}};f.VM=function(){su(this);this.Vm=null;this.eg.style.visibility="hidden"};f.mx=function(a){0==a.button?this.Pg.left=!0:1==a.button?this.cP.Pg.zD=!0:2==a.button&&(this.Pg.right=!0)};
f.nx=function(a){0==a.button?this.Pg.left=!1:1==a.button?this.cP.Pg.zD=!1:2==a.button&&(this.Pg.right=!1)};
f.Oi=function(a){window.console.log("On key:",a.keyCode,this.dd);if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Bu(this,this.Vm,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.U.bw(this.constructor.pd.qm);"true"==a.getAttribute("checked")&&this.U.yd(this.constructor.pd.qm);var b=this.U.bw(this.constructor.pd.rm);"true"==b.getAttribute("checked")&&this.U.yd(this.constructor.pd.rm);window.console.log(a.getAttribute("checked"),b.getAttribute("checked"),"true"==a.checked,"true"==b.checked);
break;case 90:this.U.yd(this.constructor.pd.rm);break;case 72:case 80:this.U.yd(this.constructor.pd.qm);break;case 66:case 76:this.U.yd(this.dd.levels);break;case 86:this.U.yd(this.dd.volumes);break;case 77:this.U.yd(this.dd.meshes);break;case 65:this.U.yd(this.dd.annotations);break;case 67:this.U.yd(this.constructor.pd.xc);break;case 83:this.U.yd(this.dd[this.constructor.pd.jz]);break;case 191:a.shiftKey&&this.U.yd(cu);break;case 73:this.U.yd(bu)}};
function Au(a,b,c){su(a);var d=function(){yu(this);this.Vm.Zn()}.bind(a),e=function(){tu(this,!0,this.constructor.CURSOR_CSS.wz);tu(this,!1,this.constructor.CURSOR_CSS.vz);this.Vm.$n()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Cu(a);a.am()}f.fz=0;f.gz=0;f.mF=function(a){this.fz=a.clientX;this.gz=a.clientY;window.console.log("store mouse coords",this.fz,this.gz)};
function ru(a){Du(a,function(a,c){this.Nl.NN[c]=P(a.Ab(),"mouseover",this.WM.bind(this));var d=a.Ab().zc;this.Nl.MN[c]=P(d,"mouseout",this.VM.bind(this));this.Nl.RI[c]=P(d,"mousedown",this.mx.bind(this));this.Nl.Ot[c]=P(d,"mouseup",this.nx.bind(this))}.bind(a))}function Bu(a,b,c){Du(a,function(a,b,g){g.va.F(g.va.I()+c)}.bind(a),b.bc())}
function Du(a,b,c){if(null!=a.ua){var d=a.Za.Wv(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.kp())};if(ja(c)){var g=a.ua.fs(c);if(null==g)throw Error("Invalid plane: ",g);e(a.ua.fs(c),c)}else I(a.ua.yc,function(a,b){e(a,b)}.bind(a))}}
f.kB=function(){this.U.nl("LEFT",this.constructor.CSS.gh,this.constructor.pd.rm,"2D Zoom",function(a){su(this);if(this.Gy=a="true"==a.getAttribute("checked").toString())this.U.xy(this.constructor.pd.qm),yu(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.U.yd(this.constructor.pd.rm)};
f.jB=function(){this.U.nl("LEFT",this.constructor.CSS.gh,this.constructor.pd.qm,"2D Pan",function(a){su(this);if(this.Ax=a="true"==a.getAttribute("checked").toString())uu(this),this.U.xy(this.constructor.pd.rm)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.U.yd(this.constructor.pd.qm)};
f.cB=function(a){this.U.nl("LEFT",this.constructor.CSS.gh,this.constructor.pd.xc,"Toggle Crosshairs",function(a){this.wF("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.U.yd(this.constructor.pd.xc)};
f.hB=function(){var a=this.constructor.pd.jz;this.dd[a]=a+this.constructor.Xt+C();this.o.Ro(this.dd[a],this.constructor.CSS.Qy,this.constructor.CSS.gh,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.Mb[a]=new Wr;this.Mb[a].k();var b=this.Mb[a].a();S(b,this.constructor.CSS.Ry);this.o.o[this.dd[a]].a().appendChild(b);this.Mb[a].xl();b=new Sr;b.k();b.Xg("Enable 3D Rendering");b.w.Yf(!0);this.Mb[a].Af(b.a(),"3D Rendering");P(b,"p",function(a){this.ua.ME("V",a.checked)}.bind(this));
return b};f.am=function(){Du(this,function(a,b,c,d){Eu(this,b,d)}.bind(this))};
function Fu(a){null!=a.ua&&(Du(a,function(a,c,d,e){var g=d.va,k=d.ge,l=d.lg;d=d.xc;g[this.constructor.Te]=c;k[this.constructor.Te]=c;l[this.constructor.Te]=c;d[this.constructor.Te]=c;zu(this,!0);Gu(this,g,e);Eu(this,g[this.constructor.Te],e);Hu(this,g);null!=a.Ab()&&(P(a.Ab(),"J",function(){Cu(this)}.bind(this)),P(g,"r",function(a){Gu(this,a.target,e);Eu(this,a.target[this.constructor.Te],e);Hu(this,a.target)}.bind(this)),P(k,"input",function(a){Iu(this,a.target,e);this.am()}.bind(this)),P(l,"input",
function(){a.Ab().YE(l.I()/100);this.am()}.bind(this)))}.bind(a)),a.ua.Kq())}
function Ju(a,b){var c=b.split(a.constructor.Xt)[0];a.Mb[c].Dd();I(a.Xn[c],function(a){null!=a&&N(a,function(a){switch(c){case "levels":a instanceof Hq?a.update():a.w.j();break;case "volumes":var d=b.split(this.constructor.Xt)[0];a instanceof Gs?(a.w.checked=a.Ld[ys]||!1,null==this.Rt&&(this.Rt=[]),-1==this.Rt.indexOf(a)&&this.Rt.push(a)):"Show Label Map"==a.Sb.innerHTML&&(a.Ld[Ct.HAS_LABEL_MAP_KEY]?a.Ld.RL.visible&&!a.w.jk()&&a.w.Yf(!0):(Y(a.a()),a.a().style.visibility="hidden",a.a().style.height=
"0px"),this.Mb[d].Dd());a.update()}}.bind(this))}.bind(a))}f.ND=function(a,b){null==a.sB&&null==b||Ju(this,null!=b?b:a.sB)};f.CA=function(){window.console.log("Applying auto window/level");var a,b={};N(this.Xn.levels.all,function(c){levelMax=hist=null;a=c.fn;folderStr="";N(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});c instanceof Hq?b[folderStr].rL=c:-1<c.Sb.innerHTML.indexOf("Level Max")&&(b[folderStr].UL=c)}.bind(this));I(b,function(a){a.UL.w.F(a.rL.iC(Hq.LEVEL_CUTOFF))})};
function Gu(a,b,c){if(null!=c){var d=b[a.constructor.Te],d="Y"==d||"Z"==d?b.la()-b.I()-1:b.I()-1;c["index"+b[a.constructor.Te]]=d}}function Ku(a,b,c,d,e){var g=a.ua.fs(b).Ab();a=a.Za.VB().Vv(b);b=null;null!=a&&(b=a[ar]);null!=b&&("vertical"==c?b.WE(g.wC(d,e)):"horizontal"==c&&b.XE(g.dC(d,e)))}
function Eu(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Ku(a,"Y","vertical",b,!0);Ku(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Ku(a,"X","vertical",b,!1);Ku(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Ku(a,"X","horizontal",b,!1),Ku(a,"Y","horizontal",b,!1)}}function Hu(a,b){Du(a,function(a,b,e){a=e.ge;e=e.va;a.Hd(e.la());a.F(e.I())}.bind(a),b[a.constructor.Te])}function Cu(a){Du(a,function(a,c,d){d.lg&&a.Ab()&&(a=a.Ab().AC(),d.lg.I(),d.lg.F(Math.round(100*a)))}.bind(a))}
function Iu(a,b,c){null!=c&&Du(a,function(a,c,g){g.va.F(b.I())}.bind(a),b[a.constructor.Te])}function pu(a){Du(a,function(a,c,d){null!=d.va&&d.va.F(d.va.la()/2)}.bind(a))}
function qu(a){Du(a,function(a,c,d,e){if(null!=e[Ct.SLICE_TO_RAS_KEY]&&null!=d.va){slider=d.va;orientation=slider[this.constructor.Te];a=e.JS;e=e[Ct.SLICE_TO_RAS_KEY];var g;"X"==orientation?(g=a[1]-a[0],g=(e.uO[0]-a[0])/g):"Y"==orientation?(g=a[3]-a[2],g=(e.uI[1]-a[2])/g):"Z"==orientation&&(g=a[5]-a[4],g=(e.eI[2]-a[4])/g);slider.F(Math.round(slider.la()*g)+1)}}.bind(a))}
function zu(a,b){var c,d;Du(a,function(a,g,k,l){null!=k.va&&(d=k.va,c=d[this.constructor.Te],null!=l&&(!0===b&&(d.Hd(a.Ab().nC()),d.Fe(1)),d.F(l["index"+c]+1)))})}f.RD=function(){Du(this,function(a,b,c,d){Iu(this,c.ge,d);Cu(this)}.bind(this));this.am()};f.py=function(a){var b=!1===a?0:1;Du(this,function(a,d,e){zl(e.va.a(),200,b);zl(e.ge.a(),200,b);zl(e.xc.bh,200,b);zl(e.xc.Lg,200,b);zl(e.lg.a(),200,b)}.bind(this))};f.RC=function(){this.py(!1);this.o.Fq(bu,!1)};
f.cF=function(){this.py(!0);this.o.Fq(bu,!0)};f.update=function(){this.Za.Lq()};f.wF=function(a){var b=!0==a?"visible":"hidden";Du(this,function(a,d,e){null!=e.xc&&(e.xc.bh.style.visibility=b,e.xc.Lg.style.visibility=b)}.bind(this))};f.CF=function(){null!=this.Za&&null!=this.ua&&Du(this,function(a,b,c,d){if(null!=c){var e=c.va;c=c.ge;e[this.constructor.Te]=b;c[this.constructor.Te]=b;null!=a.Ab()&&(Iu(this,c,d),e.j())}}.bind(this))};
f.rF=function(a){a.FE(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");I({Sagittal:{bi:zr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{bi:Er,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{bi:Br,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{bi:yr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{bi:Ar,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{bi:Cr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{bi:Dr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{bi:wr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.eA(c,b.mb);this.Za.cA(c,b.bi);"Four-Up"==c&&this.Za.EE(c)}.bind(this));P(a,"item_selected",this.OM.bind(this))};f.OM=function(a){this.Za.$l(a.title);null!=this.o&&null!=this.o.Tv()&&this.o.Tv().CE(a.target.Il.src)};function Lu(a,b){P(a.Mb[b].Fa,"f",function(a){this.ND(a,this.dd[b])}.bind(a))}
function Mu(a,b){P(b,"p",function(a){N(this.Rt,function(b){var e=b.Ld;b!==a.target?(b.w.checked=!1,e.visible=!1):(e.visible=!0,this.ua.kE(e))}.bind(this))}.bind(a))}function Nu(a,b){I(a.Xn[b],function(a,d){h(a)&&N(a,function(a){var c=a.fn||[];"all"!==d&&0<c.length&&c.push(d);this.Mb[b].Af(a.a(),c);a instanceof Gs&&Mu(this,a)}.bind(this))}.bind(a))}
function Ou(a){a.Mb=dt();a.dd=ub(a.Mb);I(a.Mb,function(a,c){this.Mb[c]=new Wr;this.Mb[c].k();this.dd[c]=c+this.constructor.Xt+C();Nu(this,c);Lu(this,c)}.bind(a))}f.lB=function(){this.Xn=this.ua.vf;Ou(this);Pu(this);Fu(this)};
function Pu(a){I(a.Mb,function(a,c){var d=!1;I(this.Xn[c],function(a){null!=a&&h(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.o.Ro(this.dd[c],this.constructor.CSS.Qy,this.constructor.CSS.gh,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+ab(c)+".png",ab(c),!1,!1);var e=this.Mb[c].a();S(e,this.constructor.CSS.Ry);this.o.o[this.dd[c]].a().appendChild(e);1<this.Mb[c].Fa.uC().length?this.Mb[c].Mo():this.Mb[c].xl()}}.bind(a))}
f.g=function(){iu.c.g.call(this);null!=this.qb&&(window.console.log("disposing key handler"),this.qb.g(),delete this.qb);null!=this.dd&&qb(this.dd);delete this.dd;null!=this.Mb&&(I(this.Mb,function(a){a.g()}),qb(this.Mb));delete this.Mb;qb(this.Ed);delete this.Ed;I(this.Nl,function(a){I(a,function(a){Vc(a);delete a});qb(a)});qb(this.Nl);delete this.Nl;Y(this.eg);delete this.eg;delete this.Xn;delete this.Gy;delete this.Ax;delete this.U;delete this.ua;delete this.Za;delete this.o};
t("xiv.ui.ViewBoxInteractorHandler.EventType",{OQ:"O",tQ:"P",AR:"Q",XP:"R"});t("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",nu);t("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",ou);t("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");t("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",iu.prototype.eB);t("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",iu.prototype.kB);t("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",iu.prototype.jB);
t("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",iu.prototype.cB);t("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",iu.prototype.hB);t("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",iu.prototype.am);t("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",iu.prototype.CA);t("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",iu.prototype.RD);t("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",iu.prototype.py);
t("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",iu.prototype.RC);t("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",iu.prototype.cF);t("xiv.ui.ViewBoxInteractorHandler.prototype.update",iu.prototype.update);t("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",iu.prototype.wF);t("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",iu.prototype.CF);t("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",iu.prototype.rF);
t("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",iu.prototype.lB);t("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",iu.prototype.g);hc&&qc(8);function Qu(){Z.call(this);this.Wl=W("div",{id:Qu.ID_PREFIX+"_ProgBarHolder_"+C(),"class":Qu.CSS.IG});Th(this.a(),this.Wl);this.Dh=W("div",{id:Qu.ID_PREFIX+"_LabelHolder_"+C(),"class":Qu.CSS.rG});Th(this.a(),this.Dh);this.gj=new ms;this.gj.Eb(this.Wl);S(Kh("progress-bar-thumb",this.Wl),Qu.CSS.eu)}w(Qu,Z);t("xiv.ui.ProgressBarPanel",Qu);Qu.ID_PREFIX="xiv.ui.ProgressBarPanel";Qu.CSS_SUFFIX={eu:"thumb",IG:"progbarholder",rG:"labelholder"};f=Qu.prototype;f.Bp="";f.Zx=!1;
f.Xg=function(a){this.Bp=a;this.Dh.innerHTML=this.Bp};f.Yx=function(a){this.Zx=null!=a&&!1===a?!1:!0;this.F(this.gj.I())};f.F=function(a){this.gj.F(a);this.Dh.innerHTML=this.Bp;this.Zx&&(0<this.Bp.length&&(this.Dh.innerHTML+=" "),this.Dh.innerHTML+=this.gj.I().toString()+"%");ph(this.Wl,"progress-bar-horizontal")};f.I=function(){return this.gj.I()};
f.e=function(){Qu.c.e.call(this);null!=this.gj&&(this.gj.g(),delete this.gj);null!=this.Wl&&(Y(this.Wl),delete this.Wl);null!=this.Dh&&(Y(this.Dh),delete this.Dh);this.Bp=this.Zx=null};t("xiv.ui.ProgressBarPanel.EventType",{});t("xiv.ui.ProgressBarPanel.ID_PREFIX",Qu.ID_PREFIX);t("xiv.ui.ProgressBarPanel.CSS_SUFFIX",Qu.CSS_SUFFIX);t("xiv.ui.ProgressBarPanel.prototype.setLabel",Qu.prototype.Xg);t("xiv.ui.ProgressBarPanel.prototype.showValue",Qu.prototype.Yx);
t("xiv.ui.ProgressBarPanel.prototype.setValue",Qu.prototype.F);t("xiv.ui.ProgressBarPanel.prototype.getValue",Qu.prototype.I);t("xiv.ui.ProgressBarPanel.prototype.disposeInternal",Qu.prototype.e);function Ru(){Z.call(this)}w(Ru,Wr);t("nrg.ui.ThumbnailGallery",Ru);Ru.ID_PREFIX="nrg.ui.ThumbnailGallery";Ru.CSS_SUFFIX={eG:"dialog",fu:"thumbnail",hu:"thumbnail-image",sR:"thumbnail-text"};var Su=C();f=Ru.prototype;f.Jt=!1;f.by=function(a){this.Jt=a;null!=this.Fa&&this.Jt&&this.Fa.Ox(Tu)};f.k=function(a){Ru.c.k.call(this,a);Uu(this);this.Jt&&this.Fa.Ox(Tu)};
function Tu(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Wh(a),d=b[Su].toLowerCase(),e,g,k=c.length,l=0;l<k;l++)if(g=c[l],null!=g[Su]&&(e=g[Su].toLowerCase(),e=Ka(d,e),0>e)){Vh(b,g);return}a.appendChild(b)}f.Qo=function(a,b){var c=new Tr;rh(c.a(),nh(c.a()),this.Bk);rh(c.pf,nh(c.pf),this.em);rh(c.jd,nh(c.jd),this.dm);c.Rx(a);c.nq(b);return c};f.loop=function(a){I(this.Xb,function(b){a(b)})};f.Qx=function(a){this.loop(function(b){Th(a,b.Hf())})};
f.Om=function(a,b){nb(this.Xb,a)||(this.Xb=this.Xb?this.Xb:{},this.Xb[a.a().getAttribute("id")]=a,this.ab.Ho(a.Hf()),P(this.ab,"s",this.JM.bind(this)),a.a()[Su]=a.$v().toLowerCase(),this.Af(a.a(),b),this.Dd(),P(a,"x",function(a){this.dispatchEvent({type:"x",Qk:a.target})}.bind(this)),P(a,"y",function(a){this.dispatchEvent({type:"y",Qk:a.target})}.bind(this)))};f.Gj=function(a,b,c){a=this.Qo(a,b);this.Om(a,c);Vu(this,"image");Vu(this,"text");Vu(this,"thumbnail");this.Dd();return a};
f.qq=function(){Ru.c.qq.call(this);P(this.Vg,"mouseover",this.mF.bind(this))};f.mF=function(a){this.Uw=a.clientX;this.Vw=a.clientY};function Wu(a){I(a.Xb,function(a){a.Tp()});a.xq=null}f.JM=function(){var a=document.elementFromPoint(this.Uw,this.Vw);(a=li(a,null,Tr.Hc))?(a=a.id.replace("HOVERABLE_",""),this.xq!==a&&(Wu(this),this.xq=a,this.Xb[this.xq].at()),this.Xb[this.xq].Lx()):Wu(this)};
function Vu(a,b){var c,d=[],e="";for(e in a.Xb){switch(b){case "thumbnail":d=a.Bk;c=a.Xb[e].a();break;case "image":d=a.dm;c=a.Xb[e].jd;break;case "text":d=a.em,c=a.Xb[e].pf}rh(c,nh(c),d)}}f.hA=function(a){null!=this.Bk||Uu(this);this.Bk.push(a);Vu(this,"thumbnail")};f.kA=function(a){this.dm.push(a);Vu(this,"image")};f.lA=function(a){this.em.push(a);Vu(this,"text")};f.j=function(a){a&&tl(this.a(),a)};
function Uu(a){var b=new Tr;a.Bk=nh(b.a());a.Bk.push(Ru.CSS.fu);a.dm=nh(b.jd);a.dm.push(Ru.CSS.hu);a.em=nh(b.pf);a.em.push(Ru.CSS.nz);Y(b.a());delete b}f.e=function(){Ru.c.e.call(this);delete this.Jt;null!=this.Uw&&delete this.Uw;null!=this.Vw&&delete this.Vw;null!=this.Xb&&(this.Vo(this.Xb),delete this.Xb);null!=this.Fa&&(Wc(this.Fa),this.Fa.g(),delete this.Fa);null!=this.Bk&&(Hb(this.Bk),delete this.Bk);null!=this.dm&&(Hb(this.dm),delete this.dm);null!=this.em&&(Hb(this.em),delete this.em);delete this.xq};
t("nrg.ui.ThumbnailGallery.ID_PREFIX",Ru.ID_PREFIX);t("nrg.ui.ThumbnailGallery.CSS_SUFFIX",Ru.CSS_SUFFIX);t("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",Su);t("nrg.ui.ThumbnailGallery.thumbnailSorter",Tu);t("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",Ru.prototype.by);t("nrg.ui.ThumbnailGallery.prototype.render",Ru.prototype.k);t("nrg.ui.ThumbnailGallery.prototype.createThumbnail",Ru.prototype.Qo);t("nrg.ui.ThumbnailGallery.prototype.loop",Ru.prototype.loop);
t("nrg.ui.ThumbnailGallery.prototype.setHoverParent",Ru.prototype.Qx);t("nrg.ui.ThumbnailGallery.prototype.addThumbnail",Ru.prototype.Om);t("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Ru.prototype.Gj);t("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",Ru.prototype.qq);t("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",Ru.prototype.hA);t("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",Ru.prototype.kA);t("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",Ru.prototype.lA);
t("nrg.ui.ThumbnailGallery.prototype.updateStyle",Ru.prototype.j);t("nrg.ui.ThumbnailGallery.prototype.disposeInternal",Ru.prototype.e);function Xu(){Z.call(this)}w(Xu,Z);t("xiv.ui.ViewableGroupMenu",Xu);Xu.ID_PREFIX="xiv.ui.ViewableGroupMenu";Xu.CSS_SUFFIX={Sq:"header",fu:"thumbnail",nz:"thumbnail-text",hu:"thumbnail-image",ZG:"thumbnailgallery",Rq:"background"};f=Xu.prototype;f.R=null;f.Bf=null;f.ln=null;
f.k=function(){Xu.c.k.call(this);this.Bf=W("div",{id:this.constructor.ID_PREFIX+"_Background_"+C()});S(this.Bf,this.constructor.CSS.Rq);Th(this.a(),this.Bf);this.ln=W("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+C(),"class":Xu.CSS.Sq});this.ln.innerHTML="<b> Select View <b>";Th(this.a(),this.ln);null!=this.R||this.reset()};f.rJ=function(){return this.Bf};f.show=function(){yl(this.a(),dn.CP)};f.Gj=function(a,b){null!=this.R||this.reset();var c=this.R.Gj(a,b);Yu(this,c);return c};
f.pn=function(){Bl(this.a(),500);Y(this.a())};f.reset=function(){null!=this.R&&(this.R.g(),delete this.R);this.R=new Ru;this.R.by(!0);this.R.k(this.a());S(this.R.a(),Xu.CSS.ZG);this.R.hA(Xu.CSS.fu);this.R.kA(Xu.CSS.hu);this.R.lA(Xu.CSS.nz)};function Yu(a,b){P(b,"z",function(){this.dispatchEvent({type:"S",sF:b})}.bind(a))}f.e=function(){Xu.c.e.call(this);null!=this.Bf&&(Y(this.Bf),delete this.Bf);null!=this.ln&&(Y(this.ln),delete this.ln);null!=this.R&&(this.R.g(),delete this.R)};
t("xiv.ui.ViewableGroupMenu.ID_PREFIX",Xu.ID_PREFIX);t("xiv.ui.ViewableGroupMenu.EventType",{PR:"S"});t("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",Xu.CSS_SUFFIX);t("xiv.ui.ViewableGroupMenu.prototype.render",Xu.prototype.k);t("xiv.ui.ViewableGroupMenu.prototype.getBackground",Xu.prototype.rJ);t("xiv.ui.ViewableGroupMenu.prototype.show",Xu.prototype.show);t("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",Xu.prototype.Gj);t("xiv.ui.ViewableGroupMenu.prototype.hide",Xu.prototype.pn);
t("xiv.ui.ViewableGroupMenu.prototype.reset",Xu.prototype.reset);t("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",Xu.prototype.e);var Zu;function $u(a,b,c,d,e){this.kl=a;this.Ql=b;this.yA=c;this.XH=d;this.Wp=e}$u.prototype.getName=function(){return this.Ql};function av(a){return!a.Ql||"[object Object]"==a.kl}
function bv(a){var b=[a.kl?cv(a.kl)+".":"",a.Ql?cv(dv(a.Ql)):"anonymous",cv(a.XH),a.yA?" [as "+cv(dv(a.yA))+"]":""];if(a.Wp)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.Wp.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',cv(a.Wp),"', '",c,"'); return false\">",cv(a.Wp),"</a>")}else b.push(cv(a.Wp));return b.join("")}
var ev=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,fv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,gv=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
hv=/^function ([a-zA-Z_$][\w$]*)/,iv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function jv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(hv),d=d?d[1]:"",e=["("];if(b.arguments)for(var g=0;g<b.arguments.length;g++){var k=b.arguments[g];0<g&&e.push(", ");ja(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new $u("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function kv(a){var b=a.match(ev);if(b)return new $u(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var g="";0<=c&&c+1<d&&(g=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new $u("",e,"",d,g)}return(b=a.match(fv))?new $u("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(gv))?new $u(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(iv))?new $u("",b[1]||"","","",b[2]||
""):null}function dv(a){return Zu?Zu(a):a}function cv(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function lv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}t("setDeobfuscateFunctionName",function(a){Zu=a});function mv(a,b){return a==b}function nv(a,b){return a.toString()===b.toString()}var ov={String:mv,Number:mv,Boolean:mv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:nv,Function:nv};function pv(a,b,c){return Math.abs(a-b)<=c}var qv={Number:pv};
function rv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function sv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+rv(a)+")");return b}function tv(a,b){return b.length==a+1?b[0]:null}function uv(a,b,c){return c.length==b+1?c[a]:c[a-1]}function vv(a,b){b.length==a||b.length==a+1&&ja(b[0])||wv(null,"Incorrect arguments passed to assert function")}
function xv(a,b){var c="Expected "+sv(a)+" but was "+sv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var g=0;g<d&&a.charAt(a.length-g-1)==b.charAt(b.length-g-1);)g++;e+g>d&&(g=0);if(2<e||2<g)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(g-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function yv(a,b){vv(1,arguments);var c=tv(1,arguments),d=uv(1,1,arguments);ka(d)||wv(c,"Bad argument to assert(boolean)");d||wv(c,"Call to assert(boolean) with false")}function zv(a,b){vv(1,arguments);var c=tv(1,arguments),d=uv(1,1,arguments);ka(d)||wv(c,"Bad argument to assertTrue(boolean)");d||wv(c,"Call to assertTrue(boolean) with false")}function Av(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments),g=xv(d,e);d===e||wv(tv(2,arguments),g)}
function Bv(a,b){vv(1,arguments);var c="Expected not to be "+sv(null);null!==uv(1,1,arguments)||wv(tv(1,arguments),c)}function Cv(a,b){vv(1,arguments);var c="Expected not to be "+sv(void 0);void 0!==uv(1,1,arguments)||wv(tv(1,arguments),c)}
function Dv(a,b,c){function d(a,b,c){for(var p=0;p<g.length;++p){var r=g[p]===a,s=k[p]===b;if(r||s){r&&s||e.push("Asymmetric cycle detected at "+c);return}}g.push(a);k.push(b);if(a!==b)if(p=rv(a),r=rv(b),p==r){var s="Array"==p,z=l(p,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(s&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(s?"[%s]":c?".%s":"%s"),a.__iterator__)ma(a.bn)?a.bn(b)||e.push("equals() returned false for "+(c||
p)):a.Bb?d(a.Bb,b.Bb,z.replace("%s","map_")):e.push("unable to check "+(c||p)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)s&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||r)));for(y in b)s&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||p));if(s)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+xv(a,b));g.pop();k.pop()}
var e=[],g=[],k=[],l=c||function(a,b,c){return(a=ov[a])?a(b,c)?"":xv(b,c):null};d(a,b,"");return 0==e.length?null:xv(a,b)+"\n   "+e.join("\n   ")}function Ev(a,b,c){vv(2,arguments);var d=tv(2,arguments)?tv(2,arguments):"",e=Dv(uv(1,2,arguments),uv(2,2,arguments));!e||wv(d,e)}function Fv(a,b,c,d){vv(3,arguments);var e=uv(1,3,arguments),g=uv(2,3,arguments),k=uv(3,3,arguments);pv(e,g,k)||wv(tv(3,arguments),"Expected "+e+", but got "+g+" which was more than "+k+" away")}
function Gv(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function Hv(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function Iv(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function wv(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new Jv(a,b);}
function Jv(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=lv();if(c){if(h(c))for(var d=[],e=0;e<c.length;e++){var g=c[e],k=g.getFunctionName()||"unknown",l=g.getFileName(),g=l?l+":"+g.getLineNumber()+":"+g.getColumnNumber():"unknown";d.push(new $u("",k,"","",g))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(kv(c[e]));c=d}else c=jv();for(d=c.length-1;c[d]&&av(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}g=[];for(k=e+1;k<=
d;k++)g.push("> "),c[k]?g.push(bv(c[k])):g.push("(unknown)"),g.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,Jv):this.stack=Error().stack||""}w(Jv,Error);Jv.prototype.toString=function(){return this.message};t("fail",function(a){wv("Call to fail()",a)});t("assert",yv);
t("assertThrows",function(a,b){vv(1,arguments);var c=uv(1,1,arguments),d=tv(1,arguments);"function"==typeof c||wv(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&ja(e.stacktrace)&&ja(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}wv(d,"No exception thrown from function passed to assertThrows")});
t("assertNotThrows",function(a,b){vv(1,arguments);var c=tv(1,arguments),d=uv(1,1,arguments);"function"==typeof d||wv(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",wv(c,e.stack||e.stacktrace||e.toString())}});t("assertTrue",zv);
t("assertFalse",function(a,b){vv(1,arguments);var c=tv(1,arguments),d=uv(1,1,arguments);ka(d)||wv(c,"Bad argument to assertFalse(boolean)");!d||wv(c,"Call to assertFalse(boolean) with true")});t("assertEquals",Av);t("assertNotEquals",function(a,b,c){vv(2,arguments);var d=uv(2,2,arguments),e="Expected not to be "+sv(d);uv(1,2,arguments)!==d||wv(tv(2,arguments),e)});t("assertNull",function(a,b){vv(1,arguments);var c=uv(1,1,arguments),d=xv(null,c);null===c||wv(tv(1,arguments),d)});
t("assertNotNull",Bv);t("assertUndefined",function(a,b){vv(1,arguments);var c=uv(1,1,arguments),d=xv(void 0,c);void 0===c||wv(tv(1,arguments),d)});t("assertNotUndefined",Cv);t("assertNotNullNorUndefined",function(a,b){vv(1,arguments);Bv.apply(null,arguments);Cv.apply(null,arguments)});t("assertNonEmptyString",function(a,b){vv(1,arguments);var c=uv(1,1,arguments),d="Expected non-empty string but was "+sv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||wv(tv(1,arguments),d)});
t("assertNaN",function(a,b){vv(1,arguments);isNaN(uv(1,1,arguments))||wv(tv(1,arguments),"Expected NaN")});t("assertNotNaN",function(a,b){vv(1,arguments);!isNaN(uv(1,1,arguments))||wv(tv(1,arguments),"Expected not NaN")});t("assertObjectEquals",Ev);
t("assertObjectRoughlyEquals",function(a,b,c,d){vv(3,arguments);var e=uv(3,3,arguments),g=tv(3,arguments)?tv(3,arguments):"",k=Dv(uv(1,3,arguments),uv(2,3,arguments),function(a,b,c){return(a=qv[a])?a(b,c,e)?"":xv(b,c)+" which was more than "+e+" away":null});!k||wv(g,k)});t("assertObjectNotEquals",function(a,b,c){vv(2,arguments);var d=tv(2,arguments)?tv(2,arguments):"";Dv(uv(1,2,arguments),uv(2,2,arguments))||wv(d,"Objects should not be equal")});
t("assertArrayEquals",function(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments),g=tv(2,arguments)?tv(2,arguments):"",k=rv(d);"Array"==k||wv(g,"Expected an array for assertArrayEquals but found a "+k);k=rv(e);"Array"==k||wv(g,"Expected an array for assertArrayEquals but found a "+k);Ev(g,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
t("assertElementsEquals",function(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments),g=tv(2,arguments)?tv(2,arguments):"";if(d){Av("length mismatch: "+g,d.length,e.length);for(var k=0;k<d.length;++k)Av("mismatch at index "+k+": "+g,d[k],e[k])}else yv(g,!e)});
t("assertElementsRoughlyEqual",function(a,b,c,d){vv(3,arguments);var e=uv(1,3,arguments),g=uv(2,3,arguments),k=uv(3,3,arguments),l=tv(3,arguments)?tv(3,arguments):"";if(e){Av("length mismatch: "+l,e.length,g.length);for(var n=0;n<e.length;++n)Fv(l,e[n],g[n],k)}else yv(l,!g)});
t("assertSameElements",function(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments),g=tv(2,arguments);zv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ia(d)&&ia(e));d=Gv(d);e=Gv(e);d.length==e.length||wv(g,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=Gv(d),l=0;l<e.length;l++){var n=Hv(k,e[l]);-1!=n||wv(g,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
t("assertEvaluatesToTrue",function(a,b){vv(1,arguments);uv(1,1,arguments)||wv(tv(1,arguments),"Expected to evaluate to true")});t("assertEvaluatesToFalse",function(a,b){vv(1,arguments);uv(1,1,arguments)&&wv(tv(1,arguments),"Expected to evaluate to false")});t("assertHTMLEquals",function(a,b,c){vv(2,arguments);var d=uv(2,2,arguments),e=Iv(uv(1,2,arguments)),d=Iv(d),g=xv(e,d);e===d||wv(tv(2,arguments),g)});
t("assertHashEquals",function(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments),g=tv(2,arguments),k;for(k in d)k in e||wv(g,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||wv(g,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||wv(g,"Actual hash had key "+k+" that was not expected")});t("assertRoughlyEquals",Fv);
t("assertContains",function(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments);-1!=Hv(e,d)||wv(tv(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});t("assertNotContains",function(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments);-1==Hv(e,d)||wv(tv(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
t("assertRegExp",function(a,b,c){vv(2,arguments);var d=uv(1,2,arguments),e=uv(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||wv(tv(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function Kv(){Z.call(this);this.vb=[];this.ar={};this.Tc={xR:null,iu:null,Hk:null,UF:null,EP:null,VF:null,QG:null,$G:null};this.Tc.iu=W("div",{id:Kv.ID_PREFIX+"_menu_top_left_"+C(),"class":Kv.CSS.AG,viewbox:this.a().id});Th(this.a(),this.Tc.iu);this.Lb=W("div",{id:Kv.ID_PREFIX+"_ViewFrame_"+C(),"class":Kv.CSS.kH});Th(this.a(),this.Lb);this.Jc=new Qu;Th(this.Lb,this.Jc.a());this.Jc.a().style.opacity=0;this.Jc.a().style.zIndex=1E5;Lv(this.Jc);this.j()}w(Kv,Z);t("xiv.ui.ViewBox",Kv);
var Mv={iH:"T",gH:"U",hH:"V"};Kv.ID_PREFIX="xiv.ui.ViewBox";Kv.CSS_SUFFIX={bQ:"hidden",lR:"tabdragger",mR:"tabdragger-handle",mH:"viewlayoutmenu",AG:"menu-top-left",zG:"menu-left",lH:"viewlayouthandler",nR:"ziptabs",oR:"ziptab-bounds",kH:"viewframe",My:"component-highlight",fH:"viewablegroupmenu"};var Nv={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=Kv.prototype;f.XL="empty";f.fe=null;f.Za=null;f.Ic=null;f.ua=null;f.Jc=null;f.Od=null;f.o=null;f.Se=null;f.NC=!1;f.cK=function(){return this.Tc};
f.XJ=function(){return this.XL};f.UK=function(){return this.vb};f.QK=function(){return this.Lb};f.WJ=function(){return this.Za};f.SK=function(){return this.Od};f.sn=function(){S(this.Lb,Kv.CSS.My)};f.Iq=function(){ph(this.Lb,Kv.CSS.My)};f.HK=function(){return this.Sh};f.qI=function(){this.Sh=void 0};f.OI=function(a){this.Cv=this.Cv?this.Cv:[];this.Cv.push(a)};f.$l=function(a){this.Ic.lq(a)};f.cN=function(){this.Jc.F(0);this.Jc.Yx(!0);Ov(this.Jc,0);this.sn()};
function Pv(a,b){a.Jc.Xg("");a.Jc.Yx(!0);a.Jc.F(100*b)}f.ox=function(a){this.sn();Pv(this,a.value)};function Qv(a,b,c){Uf(function(){Lv(this.Jc,500,function(){this.j();null!=c&&c()}.bind(this))}.bind(a),la(b)?b:1E3)}f.bt=function(){Rv(this,!1);N(Jh("xtk-progress-bar"),function(a){a.visibility="hidden"});null!=this.vb[0].bc()&&this.$l(this.vb[0].bc());this.o.dB();Sv(this);this.Se.eB();this.Se.CA();Qv(this,800,function(){this.Jc.F(0);this.j();this.$s();this.dispatchEvent("U");this.Iq()}.bind(this))};
f.$s=function(){this.ua&&this.ua.j();null!=this.Se&&this.Se.update();null!=this.ua&&this.Se.RD()};function Tv(a,b){a.Od.reset();qb(a.ar);Gb(a.vb,b)||a.vb.push(b);1==a.vb.length&&a.$l(Nv[b.qi]);var c=b.qd,d=null;1<c.length?(N(c,function(a,b){d=this.Od.Gj(a.Sn,a.ff()||b);this.ar[oa(d)]=a}.bind(a)),Ov(a.Od,400)):a.load(c[0],!1)}f.sq=function(){this.o.sq()};f.cv=function(a){return null!=this.Sh?(this.sq(),this.o.BE(a),!0):!1};
f.load=function(a,b){this.dispatchEvent("T");if(!this.cv(function(){this.Sh=void 0;this.load(a,b)}.bind(this)))if(null!=a){if(b=null!=b?b:!0)Uv(this),this.Tc.Hk=W("div",{id:Kv.ID_PREFIX+"_menu_left_"+C(),"class":Kv.CSS.zG,viewbox:this.a().id}),this.Tc.Hk.style.opacity=0,Th(this.a(),this.Tc.Hk),this.Ic=new ap,this.el("LEFT",this.Ic.a()),S(this.Ic.a(),Kv.CSS.mH),this.Ic.tD(!0),this.Ic.uD(!0),this.Ic.a().style.opacity=0,this.Ic.hf.style.opacity=0,this.Lb.appendChild(this.Ic.hf),this.o=new au(this),this.Za=
new Fr,this.Za.a().style.opacity=0,Th(this.Lb,this.Za.a()),S(this.Za.a(),Kv.CSS.lH),P(this.Za,"w",this.$s.bind(this)),P(this.Za,"t",this.kx.bind(this)),P(this.Za,"v",this.lx.bind(this)),P(this.Za,"u",this.jx.bind(this)),Vv(this),Wv(this),this.Se=new iu(this,this.ua,this.Za,this.o),this.Se.rF(this.Ic),this.NC=!0;Lv(this.Od,400);Ov(this.Jc,0);if(a instanceof Lm)Tv(this,a);else{var c;I(this.ua.yc,function(a,b){(c=this.Za.WB(b))&&a.ra(c.a())}.bind(this));Tc(this.ua,"A",this.cN.bind(this));Tc(this.ua,
"C",this.bt.bind(this));P(this.ua,"B",this.ox.bind(this));Rv(this,!0);"scans"==a.qi.toLowerCase()?Xv(this,a):(this.ua.k(a),this.Sh=(new Date).getTime())}}else Yv(this,"The data set is empty!")};function Xv(a,b){Ov(a.Jc,0);Pv(a,0);var c=a.vb[a.vb.length-1].vC();pm(b.yf[0].yh()[0].split("/files/")[0]+"/files",function(a){b.yf[0].vE(a);this.ua.k(b);this.Sh=(new Date).getTime()}.bind(a),function(a){this.sn();Pv(this,a.loaded/c)}.bind(a))}
function Rv(a,b){window.onerror=!0===b?function(a){Yv(this,a)}.bind(a):void 0}function Yv(a,b){a.Iq();Qv(a);Rv(a,!1);Uv(a);b=b.replace("Uncaught Error: ","")||"A render error occured :(<br>";a.dispatchEvent({type:Mv.wR,message:b});var c=new bm;c.Vz();c.Wz();var d=c.Br();S(d,bm.CSS.hz);d.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.zj(b||"");c.k(a.Lb);c.a().style.opacity=0;c.a().style.zIndex=1E3;Al(c.a(),dn.DP)}
f.kx=function(a){I(this.ua.yc,function(b,c){null!=a.sy[c]&&(b.Zl(a.sy[c]),b.j())})};f.lx=function(){I(this.ua.yc,function(a){a.j()});this.Se.update()};f.jx=function(a){var b=a.frames;I(this.ua.yc,function(a,d){null!=b[d]&&(a.Zl(b[d].a()),a.j())}.bind(this));this.Se.update()};function Sv(a){var b=0,b=la(b)?b:500,c=[];N([a.Tc.Hk,a.Ic.a(),a.Za.a()],function(a){c.push(El(a,{opacity:0},{opacity:1},b))});Ml(c,null,null,void 0)}
function Lv(a,b,c){if(null!=a){b=la(b)&&0<=b?b:0;var d=function(){a.a().style.visibility="hidden";a.a().style.zIndex="-1";c&&c()};"hidden"==a.a().style.visibility||0==b?d():Bl(a.a(),b,d)}}function Ov(a,b){b=la(b)&&0<=b?b:0;a.a().style.opacity="0";a.a().style.zIndex="1000";a.a().style.visibility="visible";0==b?a.a().style.opacity="1":yl(a.a(),b,function(){})}
f.el=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Tc.iu;break;case "LEFT":d=this.Tc.Hk;break;case "BOTTOM_LEFT":d=this.Tc.UF;break;case "TOP_RIGHT":d=this.Tc.$G;break;case "RIGHT":d=this.Tc.QG;break;case "BOTTOM_RIGHT":d=this.Tc.VF}la(c)?d.insertBefore(b,d.childNodes[c]):Th(d,b)};
f.In=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?S(a,a.getAttribute(fu)):ph(a,a.getAttribute(fu));null!=b&&b(a)};f.vF=function(a){return"true"==this.fe[a].getAttribute("checked").toString()};f.bw=function(a){return this.fe[a]};f.yd=function(a){Fn(this.fe[a])};f.xy=function(a){h(a)||(a=[a]);N(a,function(a){null!=this.fe[a]&&this.vF(a)&&Fn(this.fe[a])}.bind(this))};
f.nl=function(a,b,c,d,e,g){var k=b+"-on",l=W("img",b);l.id=wj(this)+".IconButton_";l.title=d;null!=g&&(l.src=g);l.setAttribute("checked","true");l.setAttribute(fu,b+"-on");S(l,k);tl(l,{cursor:"pointer"});P(l,"click",function(){this.In(l,e)}.bind(this));this.el(a,l);if(null==this.fe)this.fe={};else if(null!=this.fe[c])throw Error("Invalid identifier for toggle button.  In use.");return this.fe[c]=l};
function Wv(a){a.Od=new Xu;a.Od.k(a.Lb);Th(a.Lb,a.Od.a());Th(a.Lb,a.Od.Bf);S(a.Od.a(),Kv.CSS.fH);P(a.Od,"S",function(a){this.load(this.ar[oa(a.sF)],!1)}.bind(a));Lv(a.Od)}f.JK=function(){return this.fe};function Vv(a){a.ua=new Ct;P(a.ua,"I",function(a){Yv(this,a.message)}.bind(a))}
f.j=function(a){Kv.c.j.call(this,a);null!=this.Za&&this.Za.j();this.ua&&this.ua.j();null!=this.Ic&&(a=Mi(this.Lb),this.Ic.zE(-100,a.height/2-130),this.Ic.RE(0,a.height/2-130));null!=this.o&&this.o.update();null!=this.Se&&this.Se.CF()};
function Uv(a){qb(a.ar);Hb(a.vb);null!=a.Za&&(Wc(a.Za),Bc(a.Za.g()),delete a.Za);null!=a.Ic&&(Wc(a.Ic),a.Ic.g(),delete a.Ic);null!=a.ua&&(a.ua.g(),delete a.ua);null!=a.Od&&(a.Od.g(),delete a.Od);null!=a.o&&a.o.e();null!=a.Se&&a.Se.g();null!=a.fe&&(Y(a.Tc.Hk),delete a.Tc.Hk,I(a.fe,function(a){Wc(a);Y(a)}),Hb(a.fe),delete a.fe)}
f.e=function(){Kv.c.e.call(this);Uv(this);null!=this.Jc&&(this.Jc.g(),delete this.Jc);Y(this.Lb);Wc(this.Lb);delete this.Lb;I(this.Tc,function(a,b){Y(a);delete this.Tc[b]}.bind(this));delete this.Tc;delete this.bS;delete this.NC};t("xiv.ui.ViewBox.EventType",Mv);t("xiv.ui.ViewBox.ID_PREFIX",Kv.ID_PREFIX);t("xiv.ui.ViewBox.CSS_SUFFIX",Kv.CSS_SUFFIX);t("xiv.ui.ViewBox.defaultLayout",Nv);t("xiv.ui.ViewBox.MIN_HOLDER_HEIGHT",200);t("xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT",15);
t("xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH",50);t("xiv.ui.ViewBox.MIN_TAB_H_PCT",.2);t("xiv.ui.ViewBox.ControllersSet",function(){});t("xiv.ui.ViewBox.prototype.getMenus",Kv.prototype.cK);t("xiv.ui.ViewBox.prototype.getLoadState",Kv.prototype.XJ);t("xiv.ui.ViewBox.prototype.getViewableTrees",Kv.prototype.UK);t("xiv.ui.ViewBox.prototype.getViewFrame",Kv.prototype.QK);t("xiv.ui.ViewBox.prototype.getLayoutHandler",Kv.prototype.WJ);t("xiv.ui.ViewBox.prototype.getViewableGroupMenu",Kv.prototype.SK);
t("xiv.ui.ViewBox.prototype.highlight",Kv.prototype.sn);t("xiv.ui.ViewBox.prototype.unhighlight",Kv.prototype.Iq);t("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",Kv.prototype.HK);t("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",Kv.prototype.qI);t("xiv.ui.ViewBox.prototype.doNotHide",Kv.prototype.OI);t("xiv.ui.ViewBox.prototype.setLayout",Kv.prototype.$l);t("xiv.ui.ViewBox.prototype.showInUseDialog",Kv.prototype.sq);t("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",Kv.prototype.cv);
t("xiv.ui.ViewBox.prototype.load",Kv.prototype.load);t("xiv.ui.ViewBox.prototype.addToMenu",Kv.prototype.el);t("xiv.ui.ViewBox.prototype.onToggleButtonClicked",Kv.prototype.In);t("xiv.ui.ViewBox.prototype.toggleButtonChecked",Kv.prototype.vF);t("xiv.ui.ViewBox.prototype.getToggleButton",Kv.prototype.bw);t("xiv.ui.ViewBox.prototype.fireToggleButton",Kv.prototype.yd);t("xiv.ui.ViewBox.prototype.untoggle",Kv.prototype.xy);t("xiv.ui.ViewBox.prototype.createToggleButton",Kv.prototype.nl);
t("xiv.ui.ViewBox.prototype.getToggleButtons",Kv.prototype.JK);t("xiv.ui.ViewBox.prototype.updateStyle",Kv.prototype.j);t("xiv.ui.ViewBox.prototype.disposeInternal",Kv.prototype.e);function Zv(){xn.call(this)}w(Zv,xn);Zv.prototype.dl=function(a,b){var c=new Dn(a,b);c.iq(this);this.yp.push(c);this.hk&&yn(this,c)};function $v(){Z.call(this)}w($v,Z);t("xiv.ui.ViewBoxHandler",$v);$v.CSS_SUFFIX={iG:"handle",jH:"viewboxdragclone",ej:"closebutton",Jy:"addrowbutton",Iy:"addcolumnbutton"};$v.ID_PREFIX="xiv.ui.ViewBoxHandler";f=$v.prototype;f.au=5;f.dz=5;f.sm=document.body;f.lk=function(a,b){this.dispatchEvent({type:"Z",JD:a,TH:b})};f.tO=function(){return this.v.length};f.ep=function(){var a=[];N(this.v,function(b,c){a.push([]);N(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.v&&N(this.v,function(b,c){N(b,function(d,e){a(d,c,e,this.v.length,b.length)}.bind(this))}.bind(this))};f.nw=function(a,b){this.v||(this.v=[[]]);var c=0,d=[],e;if(null!=a)c=aw(this,a),this.v[c.us].length<this.dz&&(d.push(bw(this)),Nb(this.v[c.us],c.PL+1,0,d[0]));else{d=[];e=this.v.length?this.v.length:1;for(c=0;c<e;c++)d.push(bw(this));0===this.v.length?this.v.push([d[0]]):N(this.v,function(a,b){a.push(d[b])})}this.lk(d,void 0===b?!0:b);cw(this)};
f.kO=function(a){this.v&&(a=void 0===a?!0:a,this.v[0]&&1<this.v[0].length&&N(this.v,function(a){var c=a.length-1;dw(this,a[c]);a.splice(c,1)}.bind(this)),this.lk(null,a),cw(this))};function aw(a,b){for(var c=0,d=0,e=a.v.length,g=0,c=0;c<e;c++)for(d=0,g=a.v[c].length;d<g;d++)if(b===a.v[c][d])return{us:c,PL:d}}
f.insertRow=function(a,b){this.v||(this.v=[[]]);var c=[],d,e;if(null!=a){var g=aw(this,a),c=[];e=this.v[g.us].length;if(this.v.length<this.au){for(d=0;d<e;d++)c.push(bw(this));Nb(this.v,g.us+1,0,c)}}else if(e=this.v[0]&&this.v[0].length?this.v[0].length:1,this.v.length<this.au){for(d=0;d<e;d++)c.push(bw(this));this.v.push(c)}this.lk(c,void 0===b?!0:b);cw(this)};
f.mO=function(a){this.v&&(a=void 0===a?!0:a,1<this.v.length&&(N(this.v[this.v.length-1],function(a){dw(this,a)}.bind(this)),this.v.splice(this.v.length-1,1)),this.lk(null,a),cw(this))};f.js=function(a){for(var b=0,c=0,d=this.v.length,e=0,b=0;b<d;b++)for(c=0,e=this.v[b].length;c<e;c++)if(a===this.v[b][c].a())return this.v[b][c]};f.OK=function(a,b){return this.v[a][b].a()};f.MK=function(a,b){return this.v[a][b]};f.yC=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.xC=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.VE=function(a){this.sm=a};
function bw(a){var b=new Kv;Th(a.sm,b.a());ew(a,b);var c=W("img",{id:$v.ID_PREFIX+"_dragHandle_"+C(),"class":$v.CSS.iG});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.el("TOP_LEFT",c,1);a.Mj||(a.Mj={});a.Mj[b.a().id]=c;c.title="Drag and drop view box to swap.";fw(a,b);gw(a,b);P(b,"U",a.ux.bind(a));P(b,"T",a.vx.bind(a));P(b,"V",a.oN.bind(a));return b}
function gw(a,b){var c=W("img",{id:$v.ID_PREFIX+"_CloseButton_"+C(),"class":$v.CSS.Iy,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});vl(c,$v.CSS.Iy+"-hovered");P(c,"click",function(){this.nw(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.el("TOP_LEFT",c,1);a.$z||(a.$z={});a.$z[b.a().id]=c;c.title="Add ViewBox Column."}
function fw(a,b){var c=W("img",{id:$v.ID_PREFIX+"_CloseButton_"+C(),"class":$v.CSS.Jy,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});vl(c,$v.CSS.Jy+"-hovered");P(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.el("TOP_LEFT",c,1);a.gA||(a.gA={});a.gA[b.a().id]=c;c.title="Close ViewBox."}
function ew(a,b){var c=W("img",{id:$v.ID_PREFIX+"_CloseButton_"+C(),"class":$v.CSS.ej,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});vl(c,$v.CSS.ej+"-hovered");P(c,"click",function(){hw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.el("TOP_LEFT",c,1);a.Lo||(a.Lo={});a.Lo[b.a().id]=c;c.title="Close ViewBox."}f.ux=function(a){this.dispatchEvent({type:"X",rz:a.target})};f.ku=function(a,b){this.loop(function(c){Gb(c.vb,a)&&b(c)})};f.vx=function(a){this.dispatchEvent({type:"W",rz:a.target})};
f.oN=function(a){this.dispatchEvent({type:"Y",rz:a.target})};function dw(a,b){zl(b.a(),150,0);Y(a.Mj[b.a().id]);Y(a.Lo[b.a().id]);b.g()}function iw(a,b){var c=[],d;dw(a,b);N(a.v,function(a){d=[];N(a,function(a){a.ql||(window.console.log(a.a()),d.push(a))}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.v=c;a.lk(null,!0);cw(a)}function hw(a,b){1!=a.MD()&&(b.cv(function(){iw(this,b)}.bind(a))||iw(a,b))}f.qw=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};
f.pF=function(a,b){for(var c,d,e,g,k=0,l=0,n=this.v.length,k=0;k<n;k++)for(var m=this.v[k].length,l=0;l<m;l++){var q=this.v[k][l];if(this.qw(q,a)){c=k;d=l;break}if(this.qw(q,b)){e=k;g=l;break}}la(c)&&la(e)&&(k=this.v[c][d],this.v[c][d]=this.v[e][g],this.v[e][g]=k,k=Mi(this.v[c][d].a()),l=Mi(this.v[e][g].a()),Ji(this.v[e][g].a(),k),Ji(this.v[c][d].a(),l),this.lk())};f.MD=function(){var a=0;this.loop(function(){a++});return a};
f.NK=function(a){for(var b=0,c=0,d=this.v.length,e=0,g=e=0,b=0;b<d;b++)for(c=0,e=this.v[b].length;c<e;c++)if(this.v[b][c]===a)return e=b+1===this.v.length,g=c+1===this.v[b].length,e&&g?this.v[0][0]:e&&!g?this.v[0][c+1]:!e&&g?this.v[b+1][0]:this.v[b+1][c+1]};f.bC=function(){var a;this.loop(function(b){null!=a||null!=b.Sh||(a=b)}.bind(this));if(null!=a)return a;var b=this.yC();h(b)?b.sort(function(a,b){return a.Sh<b.Sh?-1:a.Sh>b.Sh?1:0}):b=[b];return b[0]};
f.gv=function(){this.te&&(zn(this.te),zn(this.wi),delete this.te,delete this.wi)};function jw(a){a.loop(function(a){null!=a.a()&&(this.te.dl(this.Mj[a.a().id]),this.wi.dl(a.a()))}.bind(a))}function cw(a){a.gv();a.te=new Zv;a.wi=new Zv;jw(a);var b=a.te,c=a.wi;b.my.push(c);c.Cs=!0;b.Bs=!0;a.te.ra();a.wi.ra();a.te.ov=a.pv.bind(a);P(a.te,"dragstart",a.EM.bind(a));P(a.te,"dragover",a.gx.bind(a));P(a.te,"dragend",a.fx.bind(a))}f.pv=function(a){return kw(Gh(a.getAttribute("viewboxid")))};
f.EM=function(){this.jg={};this.loop(function(a){this.jg[a.a().id]={absolute:ql(a.a()),relative:rl(a.a())};this.Mj[a.a().id].style.visibility="hidden"}.bind(this))};function kw(a){var b=document.body;a=a.cloneNode(!1);a.className=$v.CSS.jH;b&&b.appendChild(a);return a}
f.gx=function(a){if(a.$m.element.id!==a.Xr.Ij.getAttribute("viewboxid")){var b=Gh(a.Xr.Ij.getAttribute("viewboxid"));a=Gh(a.$m.element.id);this.pF(b,a);var c=this.jg,d=new il,e=c[b.id].relative,c=c[a.id].relative;d.add(new Yk(b,[b.offsetLeft,b.offsetTop],[c.left,c.top],300,wl));d.add(new Yk(a,[a.offsetLeft,a.offsetTop],[e.left,e.top],300,wl));d.play();d=this.jg[b.id];this.jg[b.id]=this.jg[a.id];this.jg[a.id]=d}};
f.fx=function(a){var b=a.Xr.Ra.sl;a=Gh(a.Xr.Ij.getAttribute("viewboxid"));a=ql(a);var c=kw(b);Th(this.sm.parentNode?this.sm.parentNode:this.sm,c);b=ql(b);tl(c,{top:b.top,left:b.left,"z-index":1E4});lw(c,a).play();mw(this)};function lw(a,b){var c=new il;c.add(new Yk(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,wl));P(c,"end",function(){Y(a)});return c}function mw(a){a.loop(function(a){this.Mj[a.a().id].style.visibility="visible"}.bind(a))}
f.e=function(){$v.c.e.call(this);this.loop(function(a){Wc(a);Y(a.a());a.g()}.bind(this));N(this.v,function(a){Hb(a)});Hb(this.v);delete this.v;this.Vr(this.Mj);delete this.Mj;this.Vr(this.Lo);delete this.Lo;I(this.jg,function(a,b){qb(this.jg[b]);delete this.jg[b]}.bind(this));qb(this.jg);delete this.jg;null!=this.te&&(Wc(this.te),this.te.g());delete this.te;null!=this.wi&&(Wc(this.wi),this.wi.g());delete this.wi;delete this.sm};t("xiv.ui.ViewBoxHandler.CSS_SUFFIX",$v.CSS_SUFFIX);
t("xiv.ui.ViewBoxHandler.EventType",{iH:"W",gH:"X",hH:"Y",OR:"Z"});t("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");t("xiv.ui.ViewBoxHandler.ID_PREFIX",$v.ID_PREFIX);t("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",$v.prototype.au);t("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",$v.prototype.dz);t("xiv.ui.ViewBoxHandler.prototype.rowCount",$v.prototype.tO);t("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",$v.prototype.ep);t("xiv.ui.ViewBoxHandler.prototype.loop",$v.prototype.loop);
t("xiv.ui.ViewBoxHandler.prototype.insertColumn",$v.prototype.nw);t("xiv.ui.ViewBoxHandler.prototype.removeColumn",$v.prototype.kO);t("xiv.ui.ViewBoxHandler.prototype.insertRow",$v.prototype.insertRow);t("xiv.ui.ViewBoxHandler.prototype.removeRow",$v.prototype.mO);t("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",$v.prototype.js);t("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",$v.prototype.OK);t("xiv.ui.ViewBoxHandler.prototype.getViewBox",$v.prototype.MK);
t("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",$v.prototype.yC);t("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",$v.prototype.xC);t("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",$v.prototype.VE);t("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",$v.prototype.ku);t("xiv.ui.ViewBoxHandler.prototype.isMatch",$v.prototype.qw);t("xiv.ui.ViewBoxHandler.prototype.swap",$v.prototype.pF);t("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",$v.prototype.MD);
t("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",$v.prototype.NK);t("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",$v.prototype.bC);t("xiv.ui.ViewBoxHandler.prototype.disposeInternal",$v.prototype.e);function nw(a){Tr.call(this);this.uE(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.yy.bind(this));this.kg=a;ow(this);this.Po()}w(nw,Tr);t("xiv.ui.Thumbnail",nw);nw.ID_PREFIX="xiv.ui.Thumbnail";nw.CSS_SUFFIX={};nw.prototype.yy=function(){var a=Hh("img",Tr.CSS.Tq,this.Hf()),a=a[0];a.src=this.jd.src};nw.prototype.Po=function(){nw.c.Po.call(this);S(this.Hf(),nw.bo)};
function ow(a){var b="",c=a.kg.Ee;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=a.kg.Si)var d=a.kg.Si.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");N(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.nq(e)}nw.prototype.RK=function(){return this.kg};nw.prototype.e=function(){nw.c.e.call(this);this.kg.g();delete this.kg};t("xiv.ui.Thumbnail.ID_PREFIX",nw.ID_PREFIX);
t("xiv.ui.Thumbnail.CSS_SUFFIX",nw.CSS_SUFFIX);t("xiv.ui.Thumbnail.prototype.updateHoverable",nw.prototype.yy);t("xiv.ui.Thumbnail.prototype.createHoverable",nw.prototype.Po);t("xiv.ui.Thumbnail.prototype.getViewable",nw.prototype.RK);t("xiv.ui.Thumbnail.prototype.disposeInternal",nw.prototype.e);function pw(){Z.call(this);this.cg=new Zv;this.Zi=new Zv;this.cg.ov=this.pv.bind(this);P(this.cg,"dragover",this.gx.bind(this));P(this.cg,"dragend",this.fx.bind(this));P(this.cg,"dragout",this.DM.bind(this));P(this.Zi,"drop",this.FM.bind(this));var a=this.cg,b=this.Zi;a.my.push(b);b.Cs=!0;a.Bs=!0;this.Zi.ra();this.cg.ra()}w(pw,Ru);t("xiv.ui.ThumbnailGallery",pw);pw.ID_PREFIX="xiv.ui.ThumbnailGallery";pw.CSS_SUFFIX={gu:"thumbnail-dragging"};var qw="THUMBNAIL_DRAGGER_"+C(),rw=qw+"_FADER"+C();f=pw.prototype;
f.cg=null;f.Zi=null;f.Gj=function(a,b){var c=this.Qo(a);this.Om(c,b);return c};f.Qo=function(a){var b=new nw(a);P(b,"z",function(){this.dispatchEvent({type:"da",Qk:b})}.bind(this));return b};f.Om=function(a,b){pw.c.Om.call(this,a,b);var c=a.Hf();c&&this.cg.dl(c)};f.WA=function(){zn(this.Zi)};f.iA=function(a){this.Zi.dl(a)};f.jA=function(a){N(a,function(a){this.iA(a)}.bind(this))};f.FK=function(a){return this.Xb[a.id]};
f.gv=function(){null!=this.cg&&(zn(this.cg),this.cg.g());null!=this.Zi&&(zn(this.Zi),this.Zi.g())};f.pv=function(a){a=li(a,"div",nw.Hc).id.replace("HOVERABLE_","");if(a in this.Xb)return this.Xb[a].setActive(!0,!0),a=this.Xb[a].a().cloneNode(!0),a.setAttribute("id",qw+a.id),S(a,pw.CSS.gu),a};f.gx=function(a){this.dispatchEvent({type:"ba",ny:a.$m.element})};f.DM=function(a){this.dispatchEvent({type:"ca",ny:a.$m.element})};
f.fx=function(){var a=Jh(pw.CSS.gu);N(a,function(a){Bl(a,300,function(){Y(a)})});null!=a[0]&&this.Xb[a[0].id.replace(qw,"")].setActive(!1,!0)};f.FM=function(a){var b=Kh(pw.CSS.gu);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);Y(b);a.$m.element&&this.dispatchEvent({type:"ea",Qk:this.Xb[b.id.replace(qw,"")],bP:a.$m.element})}};f.e=function(){pw.c.e.call(this);this.gv()};
t("xiv.ui.ThumbnailGallery.EventType",{Vq:"$",CG:"aa",uR:"ba",tR:"ca",rR:"da",vR:"ea"});t("xiv.ui.ThumbnailGallery.ID_PREFIX",pw.ID_PREFIX);t("xiv.ui.ThumbnailGallery.CSS_SUFFIX",pw.CSS_SUFFIX);t("xiv.ui.ThumbnailGallery.ANIM_MED",300);t("xiv.ui.ThumbnailGallery.DRAGGER_ID",qw);t("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",rw);t("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",pw.prototype.Gj);t("xiv.ui.ThumbnailGallery.prototype.createThumbnail",pw.prototype.Qo);
t("xiv.ui.ThumbnailGallery.prototype.addThumbnail",pw.prototype.Om);t("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",pw.prototype.WA);t("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",pw.prototype.iA);t("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",pw.prototype.jA);t("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",pw.prototype.FK);t("xiv.ui.ThumbnailGallery.prototype.disposeInternal",pw.prototype.e);function sw(a,b,c,d){ad.call(this);this.pb=c||Dh();this.an=a;this.Sf=[];this.aP=b?b:tw;this.FF=!!d;this.Cf()}w(sw,ad);var tw=0;f=sw.prototype;
f.Cf=function(){this.an.className="goog-tabpane";for(var a=[],b=Xh(this.an);b;)a.push(b),b=Zh(b);this.ve=this.pb.r("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.oc=this.pb.r("div","goog-tabpane-cont");this.an.appendChild(this.oc);b=this.an;switch(this.aP){case tw:b.insertBefore(this.ve,this.oc);b.insertBefore(uw(this),this.oc);Mj(b,"goog-tabpane-top");break;case 1:b.appendChild(this.ve);b.appendChild(uw(this));Mj(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.ve,this.oc);Mj(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.ve,this.oc);Mj(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.ve.tabIndex=0;P(this.ve,this.FF?"mousedown":"click",this.Ws,!1,this);P(this.ve,"keydown",this.Xs,!1,this);for(var c=0;b=a[c];c++)vw(this,new ww(b))};
function uw(a){var b=Dh(void 0),c=null,d=b.qa;hc&&d.createStyleSheet?(c=d.createStyleSheet(),Ri(c)):(d=Ih(b.qa,"head",void 0,void 0)[0],d||(c=Ih(b.qa,"body",void 0,void 0)[0],d=b.r("head"),c.parentNode.insertBefore(d,c)),c=b.r("style"),Ri(c),b.appendChild(d,c));return a.pb.r("div","goog-tabpane-clear")}f.e=function(){sw.c.e.call(this);Uc(this.ve,this.FF?"mousedown":"click",this.Ws,!1,this);Uc(this.ve,"keydown",this.Xs,!1,this);delete this.an;this.oc=this.ve=null};
function vw(a,b){b.Ra&&b.Ra!=a&&b.Ra instanceof sw&&xw(b.Ra,b);var c=a.Sf.length;ca(void 0)&&void 0!=c?(c=void 0,a.Sf.splice(c,0,b),a.ve.insertBefore(b.Oj,a.ve.childNodes[c])):(a.Sf.push(b),a.ve.appendChild(b.Oj));b.jq(a,c);a.Mh||(a.Mh=b,a.dispatchEvent(new yw("change",a,a.Mh)));a.oc.appendChild(b.oc);zw(b,b==a.Mh);for(var d=c+1;c=a.Sf[d];d++)c.sp=d}function xw(a,b){la(b)&&(b=a.Sf[b]);a.Sf.splice(b.sp,1);b.jq(null);Y(b.Oj);Y(b.oc);for(var c,d=0;c=a.Sf[d];d++)c.jq(a,d)}
function Aw(a,b){if(0<=b&&b<a.Sf.length){var c=a.Sf[b];!c.isEnabled()||a.Mh&&c==a.Mh||(zw(a.Mh,!1),zw(c,!0),a.Mh=c,a.dispatchEvent(new yw("change",a,a.Mh)))}}f.fb=function(){return this.oc||null};f.a=function(){return this.an||null};f.Ws=function(a){for(var b=a.target;b!=this.ve;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);Aw(this,c);break}b=b.parentNode}a.preventDefault()};
f.Xs=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.Mh.sp-1;Aw(this,0>a?this.Sf.length-1:a);break;case 39:a=this.Mh.sp+1;Aw(this,a>=this.Sf.length?0:a);break;case 36:Aw(this,0);break;case 35:Aw(this,this.Sf.length-1)}};function ww(a,b,c){var d,e;if(ja(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=Xh(a))d=ii(b),b.parentNode.removeChild(b);e=a}this.pb=c||Dh();this.oc=e||this.pb.r("div");this.Oj=this.pb.r("li",null,d);this.sp=this.Ra=null;this.Pc=!0}f=ww.prototype;
f.ff=function(){return ii(this.Oj)};f.Zf=function(a){ci(this.Oj,a)};f.tC=function(){return this.Oj};f.fb=function(){return this.oc};f.getParent=function(){return this.Ra};f.uc=function(a){this.Pc=a;this.Oj.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Pc};function zw(a,b){a.isEnabled()&&(a.oc.style.display=b?"":"none",a.Oj.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.jq=function(a,b){this.Ra=a;this.sp=ca(b)?b:null};
function yw(a,b,c){Dc.call(this,a,b);this.page=c}w(yw,Dc);function Bw(a){Z.call(this);if(null!=a){var b=a;if(!ja(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==Cw.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||Dw}w(Bw,Z);t("nrg.ui.Tabs",Bw);var Cw=["TOP","BOTTOM","LEFT","RIGHT"],Dw=Cw[0];Bw.ID_PREFIX="nrg.ui.Tabs";Bw.CSS_SUFFIX={jc:"tab",jj:"tab-active",ig:"page",HG:"page-content",Wq:"page-active",mb:"icon",mm:"icon-active",lG:"icon-content",ZQ:"scrollgallery"};
function Ew(a,b,c,d,e){this.Fk=!1;this.xf=a;this.jc=b;this.mb=c;this.ig=d;this.bi=e}f=Bw.prototype;f.Mf=0;f.Jn=0;f.He=null;f.k=function(a){Bw.c.k.call(this,a);this.Dl=new sw(this.a());this.G=[];S(this.a(),Bw.Hc)};f.AK=function(){return this.G.length};f.SJ=function(){return this.Mf};f.oK=function(){return this.Jn};f.hs=function(){var a=[];N(this.G,function(b){a.push(b.jc)});return a};f.is=function(){var a=[];N(this.G,function(b){a.push(b.ig)});return a};
f.BK=function(){var a=[];N(this.G,function(b){a.push(b.mb)});return a};f.QH=function(a){N(a,function(a){this.Nm(a)}.bind(this))};f.reset=function(){for(var a=this.G.length;0<a;)xw(this.Dl,a-1),a--;this.dT()};f.ky=function(a){if(null==this.G)return!1;for(var b=0,c=this.G.length;b<c;b++)if(this.G[b].xf==a)return!0;return!1};
f.Nm=function(a){this.G=null!=this.G?this.G:[];if(this.ky(a))throw Error(a+" is an already existing tab!");var b;b=W("div",{id:"Tab_"+C(),"class":Bw.CSS.jc,title:a});Th(this.a(),b);var c=W("div",{id:"TabIcon_"+C(),"class":Bw.CSS.mb}),d=W("div",{"class":Bw.CSS.lG},a);Th(c,d);Th(b,c);d=W("div",{id:"TabPage_"+C(),"class":Bw.CSS.ig,label:a});tl(d,rl(this.a(),"width"));Th(this.a().parentNode,d);var e=new ww(d,a);vw(this.Dl,e);this.G.push(new Ew(a,b,c,d,e));Fw(this);Gw(this);Hw(this);this.pl();this.setActive(0);
this.j()};f.SE=function(a,b){this.ky(a)||this.Nm(a);var c;a:if(null!=this.G){c=0;for(var d=this.G.length;c<d;c++)if(this.G[c].xf==a){c=this.G[c];break a}c=void 0}else c=!1;b instanceof Vr?(d=b,c.ig.appendChild(b.a())):(d=new Vr,d.k(c.ig),d.Af(b));S(d.a(),Bw.CSS.HG);this.j()};function Fw(a){N(a.G,function(a){Wc(a.jc)}.bind(a))}function Gw(a){N(a.G,function(a,c){P(a.jc,"click",function(){this.pl();this.setActive(c)}.bind(this))}.bind(a))}
function Hw(a){N(a.G,function(a,c){Iw(this,c);Jw(this,c)}.bind(a))}function Iw(a,b){P(a.G[b].jc,"mouseover",function(){!0!==this.G[b].Fk&&(S(this.G[b].jc,Bw.CSS.jj),S(this.G[b].jc,Bk(Bw.CSS.jj,this.orientation)),S(this.G[b].mb,Bw.CSS.mm))}.bind(a))}function Jw(a,b){P(a.G[b].jc,"mouseout",function(){!0!==this.G[b].Fk&&(ph(this.G[b].jc,Bw.CSS.jj),ph(this.G[b].jc,Bk(Bw.CSS.jj,this.orientation)),ph(this.G[b].mb,Bw.CSS.mm))}.bind(a))}
f.setActive=function(a){this.G[a].Fk=!0;this.Jn=this.Mf;this.Mf=a;Aw(this.Dl,a);S(this.G[a].jc,Bw.CSS.jj);S(this.G[a].jc,Bk(Bw.CSS.jj,this.orientation));S(this.G[a].ig,Bw.CSS.Wq);S(this.G[a].ig,Bk(Bw.CSS.Wq,this.orientation));S(this.G[a].mb,Bw.CSS.mm);S(this.G[a].mb,Bk(Bw.CSS.mm,this.orientation))};
f.oB=function(a){this.G[a].Fk=!1;Aw(this.Dl,0);ph(this.G[a].jc,Bw.CSS.jj);ph(this.G[a].jc,Bk(Bw.CSS.jj,this.orientation));ph(this.G[a].ig,Bw.CSS.Wq);ph(this.G[a].ig,Bk(Bw.CSS.Wq,this.orientation));ph(this.G[a].mb,Bw.CSS.mm);ph(this.G[a].mb,Bk(Bw.CSS.mm,this.orientation))};f.pl=function(){N(this.G,function(a,b){this.oB(b)}.bind(this))};
f.j=function(){if(this.a().parentNode){S(this.a(),Bw.Hc);S(this.a(),Bk(Bw.Hc,this.orientation));N(this.G,function(a){S(a.jc,Bk(Bw.CSS.jc,this.orientation));S(a.mb,Bk(Bw.CSS.mb,this.orientation));S(a.ig,Bk(Bw.CSS.ig,this.orientation))}.bind(this));switch(this.orientation){case "TOP":Kw(this);break;case "BOTTOM":this.kU();break;case "RIGHT":Lw(this)}if(0<this.G.length){var a=Mi(this.G[0].jc);0<a.width&&0<a.height&&(this.He=a)}}};
function Lw(a){N(a.G,function(a){this.a().parentNode&&tl(a.jc,{height:(100/this.G.length).toString()+"%"})}.bind(a))}function Kw(a){var b;N(a.G,function(a,d){this.a().parentNode&&(b=100/this.G.length,tl(a.jc,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function Mw(a){N(a.G,function(a){I(a,function(c,d){Wc(c);c.e?c.g():c.g&&c.g();delete c;delete a[d]});qb(a);delete a});Hb(a.G)}
f.e=function(){Bw.c.e.call(this);N(this.hs(),function(a){Wc(a)}.bind(this));Mw(this);delete this.G;Wc(this.Dl);this.Dl.g();delete this.Dl;delete this.Mf;delete this.Jn;delete this.hU;delete this.orientation};t("nrg.ui.Tabs.ORIENTATIONS",Cw);t("nrg.ui.Tabs.DEFAULT_ORIENTATION",Dw);t("nrg.ui.Tabs.ID_PREFIX",Bw.ID_PREFIX);t("nrg.ui.Tabs.CSS_SUFFIX",Bw.CSS_SUFFIX);t("nrg.ui.Tabs.TabItemCollection",Ew);t("nrg.ui.Tabs.prototype.tabSize",Bw.prototype.He);t("nrg.ui.Tabs.prototype.render",Bw.prototype.k);
t("nrg.ui.Tabs.prototype.getTabCount",Bw.prototype.AK);t("nrg.ui.Tabs.prototype.getLastActiveTab",Bw.prototype.SJ);t("nrg.ui.Tabs.prototype.getPreviousActiveTab",Bw.prototype.oK);t("nrg.ui.Tabs.prototype.getTabElements",Bw.prototype.hs);t("nrg.ui.Tabs.prototype.getTabPages",Bw.prototype.is);t("nrg.ui.Tabs.prototype.getTabIcons",Bw.prototype.BK);t("nrg.ui.Tabs.prototype.addTabs",Bw.prototype.QH);t("nrg.ui.Tabs.prototype.reset",Bw.prototype.reset);t("nrg.ui.Tabs.prototype.tabExists",Bw.prototype.ky);
t("nrg.ui.Tabs.prototype.addTab",Bw.prototype.Nm);t("nrg.ui.Tabs.prototype.setTabPageContents",Bw.prototype.SE);t("nrg.ui.Tabs.prototype.setActive",Bw.prototype.setActive);t("nrg.ui.Tabs.prototype.deactivate",Bw.prototype.oB);t("nrg.ui.Tabs.prototype.deactivateAll",Bw.prototype.pl);t("nrg.ui.Tabs.prototype.updateStyle",Bw.prototype.j);t("nrg.ui.Tabs.prototype.disposeInternal",Bw.prototype.e);function Nw(a){Bw.call(this,a)}w(Nw,Bw);t("nrg.ui.ZipTabs",Nw);Nw.ID_PREFIX="nrg.ui.ZipTabs";f=Nw.prototype;f.k=function(a){Nw.c.k.call(this,a);S(this.a(),Bk(Nw.Hc,this.orientation));this.Kc=new Qq(this.a(),this.orientation);Ow(this)};f.Ti=function(a){this.Kc.Ti(a);this.j()};f.L=function(){return this.Kc};
function Ow(a){P(a.Kc,"resize",function(a){this.oi();if(null!=this.He){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.He.height-this.q.height)?this.pl():this.setActive(this.Mf);break;case "LEFT":case "RIGHT":4>=Math.abs(this.He.width-this.q.width)?this.pl():this.setActive(this.Mf)}this.dispatchEvent({type:"resize",size:a.size,nf:a.nf})}}.bind(a))}
f.dc=function(a,b,c){this.j();a?(this.setActive(b||0),this.Kc.$f(this.orientation,"MAX",null,c)):(this.pl(),this.Kc.$f(this.orientation,"MIN",null,c))};f.j=function(){Nw.c.j.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.He&&this.Kc.GE(this.He.height);break;case "LEFT":case "RIGHT":null!=this.He&&this.Kc.JE(this.He.width)}this.Kc.update()};
f.Nm=function(a){Nw.c.Nm.call(this,a);1==this.hs().length&&this.j();N(this.hs(),function(a){P(a,"click",function(){if(null!=this.He)switch(this.j(),this.oi(),this.orientation){case "BOTTOM":4>=Math.abs(this.q.height-this.He.height)?(this.setActive(this.Mf),this.Kc.$f("BOTTOM","MAX",void 0)):this.Mf==this.Jn&&this.Kc.$f("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.q.height-this.He.height)?(this.setActive(this.Mf),this.Kc.$f("TOP","MAX",void 0)):this.Mf==this.Jn&&this.Kc.$f("TOP","MIN",
void 0);break;case "RIGHT":null!=this.He&&(4>=Math.abs(this.q.width-this.He.width)?(this.setActive(this.Mf),this.Kc.$f("RIGHT","MAX",void 0)):this.Mf==this.Jn&&this.Kc.$f("RIGHT","MIN",void 0))}}.bind(this))}.bind(this));this.pl();this.j()};f.e=function(){Nw.c.e.call(this);Wc(this.Kc);this.Kc.g();delete this.Kc};t("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);t("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);t("nrg.ui.ZipTabs.EventType",{LP:"fa"});t("nrg.ui.ZipTabs.ID_PREFIX",Nw.ID_PREFIX);
t("nrg.ui.ZipTabs.prototype.render",Nw.prototype.k);t("nrg.ui.ZipTabs.prototype.setBoundaryElement",Nw.prototype.Ti);t("nrg.ui.ZipTabs.prototype.getResizable",Nw.prototype.L);t("nrg.ui.ZipTabs.prototype.setExpanded",Nw.prototype.dc);t("nrg.ui.ZipTabs.prototype.updateStyle",Nw.prototype.j);t("nrg.ui.ZipTabs.prototype.addTab",Nw.prototype.Nm);t("nrg.ui.ZipTabs.prototype.disposeInternal",Nw.prototype.e);/*
 Copyright 2014 Washington Universityf
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
function Pw(){Z.call(this);this.xd=Pw.ModalStates.lm}w(Pw,Z);t("xiv.ui.Modal",Pw);Pw.ModalStates={Qe:"fullscreen",wf:"popup",Yt:"fullscreen-popup",hh:"windowed",lm:"demo",dG:"demp-fullscreen"};Pw.ID_PREFIX="xiv.ui.Modal";Pw.CSS_SUFFIX={Rq:"background",NP:"columnmenu",PQ:"rowmenu",OP:"button",QQ:"button",JG:"projecttab",KG:"projecttab-bounds",LG:"projecttab-dragger",MG:"projecttab-dragger-handle",Ky:"addsubjects"};
function Qw(){var a={};I(Rw,function(b,c){a[c]=Pw.ID_PREFIX+"."+ab(b.key)+".Button"});var b=Sl(lb(a)),c={};I(a,function(a,e){c[e]=b[a];var g=Bk(a);b[a].className=g});return c}var Rw={km:{key:"CLOSE",title:"Close XNAT Image Viewer."},Qe:{key:"FULLSCREEN",title:"Enter full-screen mode."},wf:{key:"POPUP",title:"Popup to new window."},hh:{key:"WINDOWED",title:"Exit full-screen mode."}};f=Pw.prototype;f.pp=29;f.Qt=29;f.Rs=320;f.Ss=320;f.PK=function(){return this.La};f.GK=function(){return this.R};
f.qK=function(){return this.ic};f.nK=function(){return this.Q.wf};f.wJ=function(){return this.Q.km};f.LJ=function(){return this.Q.Qe};f.k=function(a){Pw.c.k.call(this,a);this.ZC();this.La.nw(null,!1);this.vc(this.xd)};
f.vc=function(a){null!=this.xd&&(this.jt=this.xd);this.xd=a;null!=this.jt&&ph(this.a(),Bk(this.constructor.Hc,this.jt));S(this.a(),Bk(this.constructor.Hc,this.xd));this.xd==Pw.ModalStates.lm?(this.Q.Qe.style.visibility="visible",this.Q.hh.style.visibility="hidden"):this.xd==Pw.ModalStates.hh?(this.Q.Qe.style.visibility="visible",this.Q.hh.style.visibility="hidden"):this.xd==Pw.ModalStates.wf?(this.Q.wf.style.visibility="hidden",this.Q.km.style.visibility="hidden",this.Q.Qe.style.visibility="visible",
this.Q.hh.style.visibility="hidden"):this.xd==Pw.ModalStates.Yt?(this.Q.wf.style.visibility="hidden",this.Q.Qe.style.visibility="hidden",this.Q.hh.style.visibility="visible"):this.xd==Pw.ModalStates.Qe&&(this.Q.wf.style.visibility="visible",this.Q.Qe.style.visibility="hidden",this.Q.hh.style.visibility="visible");this.j()};f.kn=function(){return this.xd};f.ck=function(){this.R.loop(function(a){a.setActive(!1);this.La.loop(function(b){-1<b.vb.indexOf(a.kg)&&a.setActive(!0)})}.bind(this))};
f.BA=function(){Sw(this);this.Wd=null!=this.Wd?this.Wd:[];this.Zc=null!=this.Zc?this.Zc:new il;Tw(this);Uw(this);P(this.Zc,"end",this.QM.bind(this));N(this.Wd,function(a){this.Zc.add(a)}.bind(this));this.Zc.play();this.ck()};f.QM=function(){N(this.Wd,function(a){this.Zc.remove(a);Wc(a);a.Df();a.g()}.bind(this));Hb(this.Wd);this.j();Vw(this)};function Vw(a){a.La.loop(function(a){0==a.a().style.opacity&&yl(a.a(),300)})}
function Tw(a){var b=null;a.La.loop(function(a,d,e){b=a.a();this.Wd.push(new Yk(b,[b.offsetLeft,b.offsetTop],[this.za.Wb.ih[d][e],this.za.Wb.We[d][e]],300,wl))}.bind(a))}function Uw(a){var b=null;a.La.loop(function(a,d,e){b=a.a();this.Wd.push(new Zk(b,[b.offsetWidth,b.offsetHeight],[this.za.Wb.Tk[d][e],this.za.Wb.co[d][e]],300,wl))}.bind(a))}
function Sw(a){a.za=null!=a.za?a.za:{};a.oi();a.za.Cq={};a.za.Cq.Tk=Math.round(Mi(a.ic.a()).width);a.za.Cq.co=Math.round(a.q.height-2*a.Qt);a.za.Cq.We=Math.round(a.Qt);Ww(a);Xw(a)}function Ww(a){a.za.Wb={};a.za.Wb.Tk=a.La.ep();a.za.Wb.co=a.La.ep();a.La.loop(function(a,c,d,e,g){this.za.Wb.Tk[c][d]=Math.round((this.q.width-this.za.Cq.Tk-this.pp)/g-this.pp);this.za.Wb.co[c][d]=Math.round((this.q.height-(e+1)*this.pp)/e)}.bind(a))}
function Xw(a){a.za.Wb.ih=a.La.ep();a.za.Wb.We=a.La.ep();a.za.Wb.YG=a.za.Cq.Tk+a.Qt;var b=0;a.La.loop(function(a,d,e){b=this.za.Wb.YG+e*(this.za.Wb.Tk[d][e]+this.Qt);this.za.Wb.ih[d][e]=b;this.za.Wb.We[d][e]=d*(this.za.Wb.co[d][e]+this.pp);window.console.log();this.za.Wb.We[d][e]+=this.pp}.bind(a))}f.j=function(){Sw(this);this.ic&&this.ic.j();Yw(this);this.ck();this.R.j();this.R.Dd()};
function Yw(a){a.La&&a.La.loop(function(a,c,d){tl(a.a(),{height:this.za.Wb.co[c][d],width:this.za.Wb.Tk[c][d],left:this.za.Wb.ih[c][d],top:this.za.Wb.We[c][d]});a.j()}.bind(a))}
f.ZC=function(){var a=W("div");a.id=this.constructor.ID_PREFIX+"_Background_"+C();a.className=Pw.CSS.Rq;this.a().appendChild(a);this.bu=W("div");Th(this.a(),this.bu);S(this.bu,Pw.CSS.KG);this.ic=new Nw("RIGHT");this.ic.k(this.a());S(this.ic.a(),Pw.CSS.JG);this.R=new pw;this.R.by(!0);this.R.Qx(this.a());var b;b=b||P;b(this.R,"x",this.qN.bind(this));b(this.R,"y",this.pN.bind(this));b(this.R,"da",this.iN.bind(this));b(this.R,"ba",this.lN.bind(this));b(this.R,"ca",this.kN.bind(this));b(this.R,"ea",this.nN.bind(this));
this.R.k(this.ic.a());this.ic.SE("Project Browser",this.R);this.ic.Ti(this.bu);a=this.ic.L().Bd("RIGHT");S(a,Pw.CSS.LG);this.ic.L().jn("RIGHT").LE(5);Th(a,W("div",{id:Kv.ID_PREFIX+"_DraggerHandle_"+C(),"class":Pw.CSS.MG}));P(this.ic,"resize",this.j.bind(this));P(this.ic,"resize_end",this.j.bind(this));this.mi=W("div",{id:Pw.ID_PREFIX+"_addSubjects_"+C(),"class":Pw.CSS.Ky},"+ Load all subjects in project");this.ic.is()[0].appendChild(this.mi);vl(this.mi,Pw.CSS.Ky+"-hovered");a=this.ic.is()[0];b=Wh(a)[0];
Mi(a);Mi(b);Mi(this.mi);b.style.height="calc(100% - 70px)";P(this.mi,"click",this.wM.bind(this));this.La=new $v;this.La.VE(this.a());var c;c=c||P;c(this.La,"W",this.vx.bind(this));c(this.La,"X",this.ux.bind(this));c(this.La,"Z",this.lk.bind(this));P(this.La,"Y",this.DN.bind(this));Zw(this)};
function Zw(a){a.Q=Qw();I(a.Q,function(a){Th(this.a(),a)}.bind(a));$w(a);a.Q.km.innerHTML="<img src="+a.fk+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.Q.Qe.innerHTML="<img src="+a.fk+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.Q.hh.innerHTML="<img src="+a.fk+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.Q.wf.innerHTML="<img src="+a.fk+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.wM=function(){this.dispatchEvent({type:dn.hG.BP});Bl(this.mi,150,function(){ax(this);var a=this.ic.is()[0];Wh(a)[0].setAttribute("style","");this.R.Dd()}.bind(this))};function ax(a){null!=a.mi&&(Y(a.mi),Wc(a.mi),delete a.mi)}f.DN=function(){var a=Jh("xiv-ui-thumbnailgallery-thumbnail-dragging");N(a,function(a){Y(a)});this.ck();this.R.cg.Qj({eT:!0})};f.BM=function(){this.xd===Pw.ModalStates.Qe&&Aa.OB.YI()};
f.IM=function(){Aa.OB.WT(this.a().parentNode);this.xd===Pw.ModalStates.wf?this.vc(Pw.ModalStates.Yt):this.vc(Pw.ModalStates.Qe)};f.GN=function(){Aa.OB.YI();this.vc(this.jt)};function $w(a){var b;b=b||P;b(a.Q.Qe,"click",a.IM.bind(a));b(a.Q.hh,"click",a.GN.bind(a));b(a.Q.km,"click",a.BM.bind(a))}f.qN=function(a){this.La.ku(a.Qk.kg,function(a){a.sn()})};f.pN=function(a){this.La.ku(a.Qk.kg,function(a){a.Iq()})};f.kN=function(a){this.La.js(a.ny).Iq()};f.lN=function(a){this.La.js(a.ny).sn()};
f.iN=function(a){this.La.bC().load(a.Qk.kg);this.ck()};f.nN=function(a){this.La.js(a.bP).load(a.Qk.kg);this.ck()};f.vx=function(){this.ck()};f.ux=function(){this.ck()};f.lk=function(a){null!=a&&null!=a.TH?(a.JD&&N(a.JD,function(a){tl(a.a(),{opacity:0})}),this.BA()):this.j();this.R.WA();this.R.jA(this.La.xC())};
f.e=function(){Pw.c.e.call(this);qb(this.za);delete this.za;this.Av(this.Wd);delete this.Wd;this.Ur(this.Zc);delete this.Zc;this.Vr(this.Q);delete this.Q;null!=this.La&&(Wc(this.La),this.La.g(),delete this.La);Wc(this.ic);this.ic.g();delete this.ic;Wc(this.R);this.R.g();delete this.R;ax(this);delete this.xd;delete this.jt};t("xiv.ui.Modal.EventType",Pw.hG);t("xiv.ui.Modal.ID_PREFIX",Pw.ID_PREFIX);t("xiv.ui.Modal.CSS_SUFFIX",Pw.CSS_SUFFIX);t("xiv.ui.Modal.prototype.getViewBoxHandler",Pw.prototype.PK);
t("xiv.ui.Modal.prototype.getThumbnailGallery",Pw.prototype.GK);t("xiv.ui.Modal.prototype.getProjectTab",Pw.prototype.qK);t("xiv.ui.Modal.prototype.getPopupButton",Pw.prototype.nK);t("xiv.ui.Modal.prototype.getCloseButton",Pw.prototype.wJ);t("xiv.ui.Modal.prototype.getFullScreenButton",Pw.prototype.LJ);t("xiv.ui.Modal.prototype.render",Pw.prototype.k);t("xiv.ui.Modal.prototype.setState",Pw.prototype.vc);t("xiv.ui.Modal.prototype.getState",Pw.prototype.kn);
t("xiv.ui.Modal.prototype.highlightInUseThumbnails",Pw.prototype.ck);t("xiv.ui.Modal.prototype.animateModal",Pw.prototype.BA);t("xiv.ui.Modal.prototype.updateStyle",Pw.prototype.j);t("xiv.ui.Modal.prototype.initSubComponents",Pw.prototype.ZC);t("xiv.ui.Modal.prototype.disposeInternal",Pw.prototype.e);window["xiv.ui.Modal"]=Pw;window["xiv.ui.Modal.ModalStates"]=Pw.ModalStates;
