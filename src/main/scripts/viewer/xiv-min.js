var f,ba=ba||{},ca=this;function da(a){return void 0!==a}function ea(a){a=a.split(".");for(var b=ca,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function fa(){}function ga(a){a.re=function(){return a.TA?a.TA:a.TA=new a}}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ha(a)}function ia(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ja(a){return"boolean"==typeof a}function u(a){return"number"==typeof a}function la(a){return"function"==ha(a)}function ma(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function na(a){return a[pa]||(a[pa]=++ra)}
var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return ua.apply(null,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var xa=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ca;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&da(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.zP=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.XM=!0;A.fe=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.Ed=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.sF=0;this.xM=function(){return this.sF++}};function Aa(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Ba=window.BD;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Ba);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ca;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Da,Error);Da.prototype.name="CustomError";function Ea(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Fa(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Ga(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ha(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ia(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ka=/(\.\d+)|(\d+)|(\D+)/g;function La(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ka),d=b.toLowerCase().match(Ka),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function Ma(a){if(!Na.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ra,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ua,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Va,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Wa,"&#0;"));return a}var Ra=/&/g,Sa=/</g,Ta=/>/g,Ua=/"/g,Va=/'/g,Wa=/\x00/g,Na=/[\x00&<>"']/;
function Xa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Ya(a){return Array.prototype.join.call(arguments,"")}
function Za(a,b){for(var c=0,d=Ia(String(a)).split("."),e=Ia(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",p=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var q=p.exec(l)||["","",""],t=m.exec(n)||["","",""];if(0==q[0].length&&0==t[0].length)break;c=$a(0==q[1].length?0:parseInt(q[1],10),0==t[1].length?0:parseInt(t[1],10))||$a(0==q[2].length,0==t[2].length)||$a(q[2],t[2])}while(0==c)}return c}function $a(a,b){return a<b?-1:a>b?1:0}
var ab=2147483648*Math.random()|0;function B(){return"goog_"+ab++}function bb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function cb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function db(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function eb(a,b){b.unshift(a);Da.call(this,Ga.apply(null,b));b.shift()}w(eb,Da);eb.prototype.name="AssertionError";function fb(a,b){throw new eb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var gb="closure_listenable_"+(1E6*Math.random()|0);function hb(a){return!(!a||!a[gb])}var ib=0;function jb(a,b,c,d,e){this.Kk=a;this.Sr=null;this.src=b;this.type=c;this.tn=!!d;this.Wq=e;this.key=++ib;this.um=this.hq=!1}function kb(a){a.um=!0;a.Kk=null;a.Sr=null;a.src=null;a.Wq=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function mb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function nb(a){var b=0,c;for(c in a)b++;return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function pb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function qb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function rb(){var a=sb,b;for(b in a)return!1;return!0}function D(a){for(var b in a)delete a[b]}function tb(a,b){b in a&&delete a[b]}
function ub(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function vb(a){var b={},c;for(c in a)b[c]=a[c];return b}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<wb.length;h++)c=wb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function yb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return yb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var zb=Array.prototype,Ab=zb.indexOf?function(a,b,c){return zb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Bb=zb.lastIndexOf?function(a,b,c){return zb.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(r(a))return r(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},E=zb.forEach?function(a,b,c){zb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Cb=zb.filter?function(a,b,c){return zb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=0,k=r(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Db=zb.map?function(a,b,c){return zb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=r(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=
b.call(c,h[k],k,a));return e},Eb=zb.some?function(a,b,c){return zb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Fb=zb.every?function(a,b,c){return zb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};
function Gb(a){var b;a:{b=Hb;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function Ib(a,b){return 0<=Ab(a,b)}function Jb(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Kb(a,b){Ib(a,b)||a.push(b)}function Lb(a,b){var c=Ab(a,b),d;(d=0<=c)&&zb.splice.call(a,c,1);return d}function Mb(a){return zb.concat.apply(zb,arguments)}
function Nb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ob(a,b,c,d){zb.splice.apply(a,Pb(arguments,1))}function Pb(a,b,c){return 2>=arguments.length?zb.slice.call(a,b):zb.slice.call(a,b,c)}function Qb(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b};function Rb(a){this.src=a;this.Rc={};this.rp=0}f=Rb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.Rc[h];a||(a=this.Rc[h]=[],this.rp++);var k=Sb(a,b,d,e);-1<k?(b=a[k],c||(b.hq=!1)):(b=new jb(b,this.src,h,!!d,e),b.hq=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Rc))return!1;var e=this.Rc[a];b=Sb(e,b,c,d);return-1<b?(kb(e[b]),zb.splice.call(e,b,1),0==e.length&&(delete this.Rc[a],this.rp--),!0):!1};
function Tb(a,b){var c=b.type;if(!(c in a.Rc))return!1;var d=Lb(a.Rc[c],b);d&&(kb(b),0==a.Rc[c].length&&(delete a.Rc[c],a.rp--));return d}f.yg=function(a){a=a&&a.toString();var b=0,c;for(c in this.Rc)if(!a||c==a){for(var d=this.Rc[c],e=0;e<d.length;e++)++b,kb(d[e]);delete this.Rc[c];this.rp--}return b};f.Qn=function(a,b,c,d){a=this.Rc[a.toString()];var e=-1;a&&(e=Sb(a,b,c,d));return-1<e?a[e]:null};
f.Xq=function(a,b){var c=da(a),d=c?a.toString():"",e=da(b);return mb(this.Rc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].tn!=b))return!0;return!1})};function Sb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.um&&h.Kk==b&&h.tn==!!c&&h.Wq==d)return e}return-1};var Ub;a:{var Vb=ca.navigator;if(Vb){var Wb=Vb.userAgent;if(Wb){Ub=Wb;break a}}Ub=""}function Xb(a){return-1!=Ub.indexOf(a)}function Yb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Zb(){return Xb("Opera")||Xb("OPR")}function $b(){return Xb("Trident")||Xb("MSIE")}function ac(){return Xb("Safari")&&!Xb("Chrome")&&!Xb("CriOS")&&!Xb("Android")}
function bc(){var a=Ub;if($b()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Zb())return a=Yb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Yb(a);return a[2]&&a[2][1]?a[2][1]:""};var cc,dc,ec;function fc(){return ca.navigator||null}var gc=Zb(),F=$b(),hc=Xb("Gecko")&&-1==Ub.toLowerCase().indexOf("webkit")&&!(Xb("Trident")||Xb("MSIE")),ic=-1!=Ub.toLowerCase().indexOf("webkit"),jc,kc=fc();jc=kc&&kc.platform||"";cc=-1!=jc.indexOf("Mac");dc=-1!=jc.indexOf("Win");ec=-1!=jc.indexOf("Linux");var lc=!!fc()&&-1!=(fc().appVersion||"").indexOf("X11");function mc(){var a=ca.document;return a?a.documentMode:void 0}
var nc=function(){var a="",b;if(gc&&ca.opera)return a=ca.opera.version,la(a)?a():a;hc?b=/rv\:([^\);]+)(\)|;)/:F?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:ic&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Ub))?a[1]:"");return F&&(b=mc(),b>parseFloat(a))?String(b):a}(),oc={};function pc(a){return oc[a]||(oc[a]=0<=Za(nc,a))}function qc(a){return F&&rc>=a}var sc=ca.document,rc=sc&&F?mc()||("CSS1Compat"==sc.compatMode?parseInt(nc,10):5):void 0;var tc=!F||qc(9),uc=!F||qc(9),vc=F&&!pc("9");!ic||pc("528");hc&&pc("1.9b")||F&&pc("8")||gc&&pc("9.5")||ic&&pc("528");hc&&!pc("8")||F&&pc("9");function wc(){0!=xc&&(yc[na(this)]=this)}var xc=0,yc={};wc.prototype.rk=!1;wc.prototype.g=function(){if(!this.rk&&(this.rk=!0,this.f(),0!=xc)){var a=na(this);delete yc[a]}};function zc(a,b){a.wo||(a.wo=[]);a.wo.push(da(void 0)?ua(b,void 0):b)}wc.prototype.f=function(){if(this.wo)for(;this.wo.length;)this.wo.shift()()};function Ac(a){a&&"function"==typeof a.g&&a.g()}function Bc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ia(d)?Bc.apply(null,d):Ac(d)}};function Cc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.wg=!1;this.Io=!0}Cc.prototype.f=function(){};Cc.prototype.g=function(){};Cc.prototype.stopPropagation=function(){this.wg=!0};Cc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Io=!1};function Ec(a){a.preventDefault()};function Fc(a){Fc[" "](a);return a}Fc[" "]=fa;function Hc(a,b){Cc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.$v=!1;this.Qc=null;a&&this.ta(a,b)}w(Hc,Cc);var Ic=[1,4,2];f=Hc.prototype;
f.ta=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(hc){var e;a:{try{Fc(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=ic||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=ic||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.$v=cc?a.metaKey:a.ctrlKey;this.state=a.state;this.Qc=a;a.defaultPrevented&&this.preventDefault()};function Jc(a){return(tc?0==a.Qc.button:"click"==a.type?!0:!!(a.Qc.button&Ic[0]))&&!(ic&&cc&&a.ctrlKey)}
f.stopPropagation=function(){Hc.d.stopPropagation.call(this);this.Qc.stopPropagation?this.Qc.stopPropagation():this.Qc.cancelBubble=!0};f.preventDefault=function(){Hc.d.preventDefault.call(this);var a=this.Qc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,vc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.LG=function(){return this.Qc};f.f=function(){};var Kc="closure_lm_"+(1E6*Math.random()|0),Lc={},Mc=0;function H(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)H(a,b[h],c,d,e);return null}c=Nc(c);return hb(a)?a.D(b,c,d,e):Oc(a,b,c,!1,d,e)}function Oc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Pc(a);l||(a[Kc]=l=new Rb(a));c=l.add(b,c,d,e,h);if(c.Sr)return c;d=Qc();c.Sr=d;d.src=a;d.Kk=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Rc(b.toString()),d);Mc++;return c}
function Qc(){var a=Sc,b=uc?function(c){return a.call(b.src,b.Kk,c)}:function(c){c=a.call(b.src,b.Kk,c);if(!c)return c};return b}function Tc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Tc(a,b[h],c,d,e);return null}c=Nc(c);return hb(a)?a.ev(b,c,d,e):Oc(a,b,c,!0,d,e)}function Uc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Uc(a,b[h],c,d,e);else c=Nc(c),hb(a)?a.vb(b,c,d,e):a&&(a=Pc(a))&&(b=a.Qn(b,c,!!d,e))&&Vc(b)}
function Vc(a){if(u(a)||!a||a.um)return!1;var b=a.src;if(hb(b))return Tb(b.Zg,a);var c=a.type,d=a.Sr;b.removeEventListener?b.removeEventListener(c,d,a.tn):b.detachEvent&&b.detachEvent(Rc(c),d);Mc--;(c=Pc(b))?(Tb(c,a),0==c.rp&&(c.src=null,b[Kc]=null)):kb(a);return!0}function J(a){if(a)if(hb(a))a.removeAllListeners(void 0);else if(a=Pc(a)){var b=0,c;for(c in a.Rc)for(var d=a.Rc[c].concat(),e=0;e<d.length;++e)Vc(d[e])&&++b}}
function Wc(a,b){if(hb(a))return a.Xq(b,void 0);var c=Pc(a);return!!c&&c.Xq(b,void 0)}function Rc(a){return a in Lc?Lc[a]:Lc[a]="on"+a}function Xc(a,b,c,d){var e=1;if(a=Pc(a))if(b=a.Rc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.tn==c&&!h.um&&(e&=!1!==Yc(h,d))}return Boolean(e)}function Yc(a,b){var c=a.Kk,d=a.Wq||a.src;a.hq&&Vc(a);return c.call(d,b)}
function Sc(a,b){if(a.um)return!0;if(!uc){var c=b||ea("window.event"),d=new Hc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.wg&&0<=l;l--)d.currentTarget=c[l],e&=Xc(c[l],h,!0,d);for(l=0;!d.wg&&l<c.length;l++)d.currentTarget=c[l],e&=Xc(c[l],h,!1,d)}return e}return Yc(a,new Hc(b,this))}
function Pc(a){a=a[Kc];return a instanceof Rb?a:null}var Zc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Nc(a){return la(a)?a:a[Zc]||(a[Zc]=function(b){return a.handleEvent(b)})};function $c(){wc.call(this);this.Zg=new Rb(this);this.CF=this;this.Or=null}w($c,wc);$c.prototype[gb]=!0;f=$c.prototype;f.rw=function(a){this.Or=a};f.addEventListener=function(a,b,c,d){H(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Or;if(c)for(b=[];c;c=c.Or)b.push(c);var c=this.CF,d=a.type||a;if(r(a))a=new Cc(a,c);else if(a instanceof Cc)a.target=a.target||c;else{var e=a;a=new Cc(d,c);xb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.wg&&0<=k;k--)h=a.currentTarget=b[k],e=ad(h,d,!0,a)&&e;a.wg||(h=a.currentTarget=c,e=ad(h,d,!0,a)&&e,a.wg||(e=ad(h,d,!1,a)&&e));if(b)for(k=0;!a.wg&&k<b.length;k++)h=a.currentTarget=b[k],e=ad(h,d,!1,a)&&e;return e};
f.f=function(){$c.d.f.call(this);this.removeAllListeners();this.Or=null};f.D=function(a,b,c,d){return this.Zg.add(String(a),b,!1,c,d)};f.ev=function(a,b,c,d){return this.Zg.add(String(a),b,!0,c,d)};f.vb=function(a,b,c,d){return this.Zg.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.Zg?this.Zg.yg(a):0};
function ad(a,b,c,d){b=a.Zg.Rc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.um&&k.tn==c){var l=k.Kk,n=k.Wq||k.src;k.hq&&Tb(a.Zg,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.Io}f.Qn=function(a,b,c,d){return this.Zg.Qn(String(a),b,c,d)};f.Xq=function(a,b){return this.Zg.Xq(da(a)?String(a):void 0,b)};function bd(){$c.call(this);this.u="base";this.nd=window["X.counter"].xM();this.J=!1}w(bd,$c);bd.prototype.__defineGetter__("classname",function(){return this.u});bd.prototype.__defineGetter__("id",function(){return this.nd});v("X.base",bd);function cd(a,b){bd.call(this);this.u="triplets";this.Yf=Infinity;this.Vf=-Infinity;this.Zf=Infinity;this.Wf=-Infinity;this.$f=Infinity;this.Xf=-Infinity;this.Jp=[0,0,0];this.Qa=0;this.dc=new Float32Array(a);null!=b&&(this.dc=b.dc.subarray(0,b.dc.length),this.Qa=this.dc.length,this.Yf=b.Yf,this.Vf=b.Vf,this.Zf=b.Zf,this.Wf=b.Wf,this.$f=b.$f,this.Xf=b.Xf,this.Jp=b.Jp.slice())}w(cd,bd);f=cd.prototype;
f.add=function(a,b,c){this.Yf=Math.min(this.Yf,a);this.Vf=Math.max(this.Vf,a);this.Zf=Math.min(this.Zf,b);this.Wf=Math.max(this.Wf,b);this.$f=Math.min(this.$f,c);this.Xf=Math.max(this.Xf,c);this.Jp=[(this.Yf+this.Vf)/2,(this.Zf+this.Wf)/2,(this.$f+this.Xf)/2];this.J=!0;this.dc[this.Qa++]=a;this.dc[this.Qa++]=b;this.dc[this.Qa++]=c;return this.Qa/3};f.resize=function(){if(this.Qa!=this.dc.length){var a=new Float32Array(this.Qa);a.set(this.dc.subarray(0,this.Qa));this.dc=a}};
f.get=function(a){a*=3;return[this.dc[a],this.dc[a+1],this.dc[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.dc=new Float32Array(this.dc.length);this.J=!0};cd.prototype.__defineGetter__("count",function(){this.resize();return this.dc.length/3});cd.prototype.__defineGetter__("length",function(){this.resize();return this.dc.length});v("X.triplets",cd);v("X.triplets.prototype.add",cd.prototype.add);v("X.triplets.prototype.resize",cd.prototype.resize);
v("X.triplets.prototype.get",cd.prototype.get);v("X.triplets.prototype.remove",cd.prototype.remove);v("X.triplets.prototype.clear",cd.prototype.clear);function dd(){bd.call(this);this.u="indexer";this.qt=[];this.he={}}w(dd,bd);dd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.he||(this.he[b]=this.qt.length,this.qt.push(a));return this.he[b]};dd.prototype.unique=function(){return this.qt};function ed(a){bd.call(this);this.u="file";this.Vp=a;this.J=!0}w(ed,bd);function fd(){this.Pg=this.ja=null}fd.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.ja=null;else{if(g(a)){if(1==a.length){this.ja=new ed(a[0]);return}this.ja=Db(a,function(a){var c=new K;c.ja=new ed(a);return c})}else this.ja=new ed(a);this.Pg=null}});fd.prototype.__defineGetter__("file",function(){return this.ja?g(this.ja)?this.ja.map(function(a){return a.ja.Vp}):this.ja.Vp:""});
fd.prototype.__defineGetter__("filedata",function(){return g(this.ja)?this.ja.map(function(a){return a.Pg}):this.Pg});fd.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.Pg=null;if(g(a))if(1==a.length)this.Pg=a[0];else{var b=this.ja.length,c;for(c=0;c<b;c++)this.ja[c].Pg=a[c]}else this.Pg=a});function gd(){return null};function hd(a,b,c){return Math.min(Math.max(a,b),c)};function id(a,b){this.Cb={};this.mb=[];this.Th=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.st(a)}f=id.prototype;f.jg=function(){return this.Th};f.$h=function(){kd(this);for(var a=[],b=0;b<this.mb.length;b++)a.push(this.Cb[this.mb[b]]);return a};f.Pn=function(){kd(this);return this.mb.concat()};
f.Ot=function(a){for(var b=0;b<this.mb.length;b++){var c=this.mb[b];if(ld(this.Cb,c)&&this.Cb[c]==a)return!0}return!1};f.Tl=function(a,b){if(this===a)return!0;if(this.Th!=a.jg())return!1;var c=b||md;kd(this);for(var d,e=0;d=this.mb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function md(a,b){return a===b}f.lm=function(){return 0==this.Th};f.clear=function(){this.Cb={};this.Th=this.mb.length=0};
f.remove=function(a){return ld(this.Cb,a)?(delete this.Cb[a],this.Th--,this.mb.length>2*this.Th&&kd(this),!0):!1};function kd(a){if(a.Th!=a.mb.length){for(var b=0,c=0;b<a.mb.length;){var d=a.mb[b];ld(a.Cb,d)&&(a.mb[c++]=d);b++}a.mb.length=c}if(a.Th!=a.mb.length){for(var e={},c=b=0;b<a.mb.length;)d=a.mb[b],ld(e,d)||(a.mb[c++]=d,e[d]=1),b++;a.mb.length=c}}f.get=function(a,b){return ld(this.Cb,a)?this.Cb[a]:b};f.set=function(a,b){ld(this.Cb,a)||(this.Th++,this.mb.push(a));this.Cb[a]=b};
f.st=function(a){var b;a instanceof id?(b=a.Pn(),a=a.$h()):(b=pb(a),a=ob(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.Pn(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new id(this)};f.Uw=function(){for(var a=new id,b=0;b<this.mb.length;b++){var c=this.mb[b];a.set(this.Cb[c],c)}return a};function ld(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function nd(){bd.call(this);this.u="colortable";this.he=new id;Aa(this,new fd)}w(nd,bd);nd.prototype.add=function(a,b,c,d,e,h){if(!(u(a)&&u(c)&&u(d)&&u(e)&&u(h)))throw Error("Invalid color table entry.");this.he.set(a,[b,c,d,e,h]);this.J=!0};nd.prototype.get=function(a){return this.he.get(a)};v("X.colortable.prototype.get",nd.prototype.get);function od(a,b,c){this.x=da(a)?a:0;this.y=da(b)?b:0;this.z=da(c)?c:0}od.prototype.clone=function(){return new od(this.x,this.y,this.z)};od.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};od.prototype.Pw=function(){return[this.x,this.y,this.z]};function L(a,b,c){this.x=a;this.y=b;this.z=c}w(L,od);f=L.prototype;f.clone=function(){return new L(this.x,this.y,this.z)};f.sg=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.Db=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.sg())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.Hc=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.Tl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function pd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function qd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function rd(a,b){return new L(a.x+b.x,a.y+b.y,a.z+b.z)}function sd(a,b){return new L(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.R=L;f=A.R.prototype;f.clone=L.prototype.clone;f.sg=L.prototype.sg;f.scale=L.prototype.scale;f.Db=L.prototype.Db;f.add=L.prototype.add;f.Hc=L.prototype.Hc;f.normalize=function(){var a=this.sg();return 0==a?this.scale(0):this.scale(1/a)};A.R.cj=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.R.pk=sd;A.R.fu=pd;A.R.pr=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new L(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.R.prototype.__defineGetter__("xx",function(){return this.x});
A.R.prototype.__defineGetter__("yy",function(){return this.y});A.R.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.R);v("X.vector.prototype.clone",A.R.prototype.clone);v("X.vector.prototype.magnitude",A.R.prototype.sg);v("X.vector.prototype.scale",A.R.prototype.scale);v("X.vector.prototype.invert",A.R.prototype.Db);v("X.vector.prototype.normalize",A.R.prototype.normalize);v("X.vector.prototype.add",A.R.prototype.add);v("X.vector.prototype.subtract",A.R.prototype.Hc);
v("X.vector.dot",A.R.cj);v("X.vector.cross",A.R.pk);v("X.vector.distance",A.R.fu);v("X.vector.lerp",A.R.pr);function td(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}td.prototype.BYTES_PER_ELEMENT=8;td.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};td.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{td.BYTES_PER_ELEMENT=8}catch(ud){}td.prototype.BYTES_PER_ELEMENT=td.prototype.BYTES_PER_ELEMENT;td.prototype.set=td.prototype.set;td.prototype.toString=td.prototype.toString;v("Float64Array",td)};function vd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}vd.prototype.BYTES_PER_ELEMENT=4;vd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};vd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(vd.BYTES_PER_ELEMENT=4,vd.prototype.BYTES_PER_ELEMENT=vd.prototype.BYTES_PER_ELEMENT,vd.prototype.set=vd.prototype.set,vd.prototype.toString=vd.prototype.toString,v("Float32Array",vd));function wd(){return new Float32Array(3)}function xd(a,b,c){var d=wd();d[0]=a;d[1]=b;d[2]=c;return d}function yd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function zd(){return new Float32Array(4)}function Ad(a,b,c,d){var e=zd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Bd(){return new Float32Array(16)}function Cd(){var a=Bd();a[0]=a[5]=a[10]=a[15]=1;return a}function Dd(a,b,c,d,e,h,k,l,n,p,m,q,t,s,z,y,I){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=p;a[9]=m;a[10]=q;a[11]=t;a[12]=s;a[13]=z;a[14]=y;a[15]=I;return a}function Ed(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Fd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function M(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Gd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Hd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Id(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],p=a[6],m=a[7],q=a[8],t=a[9],s=a[10],z=a[11],y=a[12],I=a[13],O=a[14];a=a[15];var N=b[0],G=b[1],T=b[2],aa=b[3],V=b[4],wa=b[5],oa=b[6],ya=b[7],Oa=b[8],Ja=b[9],Pa=b[10],ka=b[11],za=b[12],qa=b[13],Gc=b[14];b=b[15];c[0]=d*N+l*G+q*T+y*aa;c[1]=e*N+n*G+t*T+I*aa;c[2]=h*N+p*G+s*T+O*aa;c[3]=k*N+m*G+z*T+a*aa;c[4]=d*V+l*wa+q*oa+y*ya;c[5]=e*V+n*wa+t*oa+I*ya;c[6]=h*V+p*wa+s*oa+O*ya;c[7]=k*V+m*wa+z*oa+a*ya;c[8]=d*Oa+l*Ja+q*Pa+y*ka;c[9]=e*Oa+n*Ja+t*Pa+
I*ka;c[10]=h*Oa+p*Ja+s*Pa+O*ka;c[11]=k*Oa+m*Ja+z*Pa+a*ka;c[12]=d*za+l*qa+q*Gc+y*b;c[13]=e*za+n*qa+t*Gc+I*b;c[14]=h*za+p*qa+s*Gc+O*b;c[15]=k*za+m*qa+z*Gc+a*b;return c}
function Jd(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=a[8],q=a[9],t=a[10],s=a[11],z=a[12],y=a[13],I=a[14],O=a[15],N=c*l-d*k,G=c*n-e*k,T=c*p-h*k,aa=d*n-e*l,V=d*p-h*l,wa=e*p-h*n,oa=m*y-q*z,ya=m*I-t*z,Oa=m*O-s*z,Ja=q*I-t*y,Pa=q*O-s*y,ka=t*O-s*I,za=N*ka-G*Pa+T*Ja+aa*Oa-V*ya+wa*oa;if(0==za)return!1;za=1/za;b[0]=(l*ka-n*Pa+p*Ja)*za;b[1]=(-d*ka+e*Pa-h*Ja)*za;b[2]=(y*wa-I*V+O*aa)*za;b[3]=(-q*wa+t*V-s*aa)*za;b[4]=(-k*ka+n*Oa-p*ya)*za;b[5]=(c*ka-e*Oa+h*ya)*za;b[6]=(-z*wa+I*T-O*G)*za;
b[7]=(m*wa-t*T+s*G)*za;b[8]=(k*Pa-l*Oa+p*oa)*za;b[9]=(-c*Pa+d*Oa-h*oa)*za;b[10]=(z*V-y*T+O*N)*za;b[11]=(-m*V+q*T-s*N)*za;b[12]=(-k*Ja+l*ya-n*oa)*za;b[13]=(c*Ja-d*ya+e*oa)*za;b[14]=(-z*aa+y*G-I*N)*za;b[15]=(m*aa-q*G+t*N)*za;return!0}function Kd(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Ld(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Md(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.v={};A.v.iB=function(a,b,c,d){c=c.Hc(b);c.normalize();d=A.R.pk(c,d);d.normalize();var e=A.R.pk(d,c);e.normalize();c.Db();M(a,0,d.x,d.y,d.z,0);M(a,1,e.x,e.y,e.z,0);M(a,2,c.x,c.y,c.z,0);Md(a,-b.x,-b.y,-b.z);return a};A.v.Wb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.R((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.v.mM=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Hd(a,b,d);Hd(a,c,e);Gd(a,b,e);Gd(a,c,d);return a};A.v.lM=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Fd(a,b,d);Fd(a,c,e);Ed(a,b,e);Ed(a,c,d);return a};A.v.Zn=Cd;A.v.clone=function(a){var b=Bd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.v.Uw=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.v.mG=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],p=a[8],m=a[9],q=a[10],t=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(q*a-t*y)-(b*l-d*h)*(m*a-t*z)+(b*n-e*h)*(m*y-q*z)+(c*l-d*k)*(p*a-t*s)-(c*n-e*k)*(p*y-q*s)+(d*n-e*l)*(p*z-m*s)};A.v.Db=Jd;A.v.kv=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Dd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.v.zJ=function(a,b,c,d,e,h,k){return Dd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.v.AJ=function(a,b,c,d,e,h,k){return Dd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.v.multiply=Id;A.v.sB=Ld;A.v.translate=Md;A.v.scale=function(a,b,c,d){return Dd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.v.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],p=a[4],m=a[5],q=a[6],t=a[7],s=a[8],z=a[9],y=a[10],I=a[11],O=Math.cos(b),N=Math.sin(b),G=1-O;b=c*c*G+O;var T=c*d*G+e*N,aa=c*e*G-d*N,V=c*d*G-e*N,wa=d*d*G+O,oa=d*e*G+c*N,ya=c*e*G+d*N;c=d*e*G-c*N;e=e*e*G+O;return Dd(a,h*b+p*T+s*aa,k*b+m*T+z*aa,l*b+q*T+y*aa,n*b+t*T+I*aa,h*V+p*wa+s*oa,k*V+m*wa+z*oa,l*V+q*wa+y*oa,n*V+t*wa+I*oa,h*ya+p*c+s*e,k*ya+m*c+z*e,l*ya+q*c+y*e,n*ya+t*c+I*e,a[12],a[13],a[14],a[15])};
A.v.Wr=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[4]=c*m+k*q;a[5]=d*m+l*q;a[6]=e*m+n*q;a[7]=h*m+p*q;a[8]=c*-q+k*m;a[9]=d*-q+l*m;a[10]=e*-q+n*m;a[11]=h*-q+p*m;return a};A.v.Xr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*-q;a[1]=d*m+l*-q;a[2]=e*m+n*-q;a[3]=h*m+p*-q;a[8]=c*q+k*m;a[9]=d*q+l*m;a[10]=e*q+n*m;a[11]=h*q+p*m;return a};
A.v.Yr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*q;a[1]=d*m+l*q;a[2]=e*m+n*q;a[3]=h*m+p*q;a[4]=c*-q+k*m;a[5]=d*-q+l*m;a[6]=e*-q+n*m;a[7]=h*-q+p*m;return a};v("X.matrix.identity",A.v.Zn);v("X.matrix.clone",A.v.clone);v("X.matrix.transpose",A.v.Uw);v("X.matrix.determinant",A.v.mG);v("X.matrix.invert",A.v.Db);v("X.matrix.multiply",A.v.multiply);v("X.matrix.multiplyByVector",A.v.Wb);v("X.matrix.multiplyByVec4",A.v.sB);
v("X.matrix.makePerspective",A.v.kv);v("X.matrix.makeFrustum",A.v.zJ);v("X.matrix.makeOrtho",A.v.AJ);v("X.matrix.makeLookAt",A.v.iB);v("X.matrix.translate",A.v.translate);v("X.matrix.scale",A.v.scale);v("X.matrix.rotate",A.v.rotate);v("X.matrix.rotateX",A.v.Wr);v("X.matrix.rotateY",A.v.Xr);v("X.matrix.rotateZ",A.v.Yr);v("X.matrix.swapRows",A.v.mM);v("X.matrix.swapCols",A.v.lM);function Nd(){bd.call(this);this.u="transform";this.Ab=A.v.Zn()}w(Nd,bd);Nd.prototype.__defineGetter__("matrix",function(){return this.Ab});Nd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.Ab=a;this.ga()});f=Nd.prototype;f.Wr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.Wr(this.Ab,a*Math.PI/180);this.ga()};
f.Xr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.Xr(this.Ab,a*Math.PI/180);this.ga()};f.Yr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.Yr(this.Ab,a*Math.PI/180);this.ga()};f.mD=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.Ab,a,0,0);this.ga()};f.nD=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.Ab,0,a,0);this.ga()};
f.oD=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.Ab,0,0,a);this.ga()};function Od(a,b,c){a.Ab[b+4*c]*=-1;a.ga()}f.FG=function(){Od(this,0,0)};f.GG=function(){Od(this,1,1)};f.HG=function(){Od(this,2,2)};f.ga=function(){this.J=!0};v("X.transform",Nd);v("X.transform.prototype.rotateX",Nd.prototype.Wr);v("X.transform.prototype.rotateY",Nd.prototype.Xr);v("X.transform.prototype.rotateZ",Nd.prototype.Yr);v("X.transform.prototype.translateX",Nd.prototype.mD);
v("X.transform.prototype.translateY",Nd.prototype.nD);v("X.transform.prototype.translateZ",Nd.prototype.oD);v("X.transform.prototype.flipX",Nd.prototype.FG);v("X.transform.prototype.flipY",Nd.prototype.GG);v("X.transform.prototype.flipZ",Nd.prototype.HG);v("X.transform.prototype.modified",Nd.prototype.ga);function Pd(){bd.call(this);this.u="texture";this.Mi=this.Uf=this.ja=null;this.it=this.jt=0;this.Qx=!1;Aa(this,new fd)}w(Pd,bd);Pd.prototype.__defineSetter__("rawData",function(a){this.Mi=a;this.J=!0});Pd.prototype.__defineSetter__("rawDataHeight",function(a){this.it=a;this.J=!0});Pd.prototype.__defineSetter__("rawDataWidth",function(a){this.jt=a;this.J=!0});Pd.prototype.__defineSetter__("grayscale",function(a){this.Qx=a;this.J=!0});v("X.texture",Pd);function Qd(){this.Ld=Sd;this.lc=new Nd;this.Ka=[1,1,1];this.Gl=this.Ya=this.Mc=this.fa=this.G=null;this.Bl=[];this.qb=!0;this.Al=this.bn=1;this.sl=null;this.Tm=!1;this.Yc=1;this.md=0;this.an=!0}var Sd="TRIANGLES";Qd.prototype.__defineSetter__("type",function(a){return this.Ld=a});Qd.prototype.__defineGetter__("type",function(){return this.Ld});Qd.prototype.__defineGetter__("texture",function(){this.Ya||(this.Ya=new Pd);return this.Ya});Qd.prototype.__defineGetter__("transform",function(){return this.lc});
Qd.prototype.__defineGetter__("points",function(){return this.G});Qd.prototype.__defineSetter__("points",function(a){this.G=a});Qd.prototype.__defineGetter__("normals",function(){return this.fa});Qd.prototype.__defineSetter__("normals",function(a){this.fa=a});Qd.prototype.__defineGetter__("colors",function(){return this.Mc});Qd.prototype.__defineSetter__("colors",function(a){this.Mc=a});Qd.prototype.__defineGetter__("color",function(){return this.Ka});
Qd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Ka=a;this.J=!0});Qd.prototype.__defineGetter__("opacity",function(){return this.Yc});Qd.prototype.__defineSetter__("opacity",function(a){if(!u(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Yc=a;this.J=!0});Qd.prototype.__defineGetter__("caption",function(){return this.sl});
Qd.prototype.__defineSetter__("caption",function(a){this.sl=a;this.J=!0});Qd.prototype.__defineGetter__("visible",function(){return this.qb});Qd.prototype.__defineSetter__("visible",function(a){for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.qb=a;this.J=!0});Qd.prototype.__defineGetter__("pointsize",function(){return this.bn});Qd.prototype.__defineSetter__("pointsize",function(a){if(!u(a))throw Error("Invalid point size.");this.bn=a;this.J=!0});
Qd.prototype.__defineGetter__("magicmode",function(){return this.Tm});Qd.prototype.__defineSetter__("magicmode",function(a){if(!ja(a))throw Error("Invalid magic mode setting.");this.Tm=a;this.J=!0});Qd.prototype.__defineGetter__("linewidth",function(){return this.Al});Qd.prototype.__defineSetter__("linewidth",function(a){if(!u(a))throw Error("Invalid line width.");this.Al=a;this.J=!0});Qd.prototype.__defineGetter__("pickable",function(){return this.an});
Qd.prototype.__defineSetter__("pickable",function(a){if(!ja(a))throw Error("Invalid pickable setting.");this.an=a;this.J=!0});Qd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.Gl});Qd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Td(){this.ie=Infinity;this.zb=this.cc=-Infinity;this.Bb=Infinity;this.Ii=[0,0,0];this.Gi=[1,1,1]}Td.prototype.__defineGetter__("lowerThreshold",function(){return this.zb});Td.prototype.__defineSetter__("lowerThreshold",function(a){this.zb=a});Td.prototype.__defineGetter__("upperThreshold",function(){return this.Bb});Td.prototype.__defineSetter__("upperThreshold",function(a){this.Bb=a});Td.prototype.__defineGetter__("min",function(){return this.ie});Td.prototype.__defineGetter__("max",function(){return this.cc});
Td.prototype.__defineGetter__("minColor",function(){return this.Ii});Td.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.Ii=a});Td.prototype.__defineGetter__("maxColor",function(){return this.Gi});Td.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.Gi=a});function Ud(){bd.call(this);this.u="scalars";this.Qm=this.fb=null;this.cy=!0;this.Ys=0;Aa(this,new fd);Aa(this,new Td);this.Ii=[0,1,0];this.Gi=[1,0,0]}w(Ud,bd);Ud.prototype.__defineGetter__("array",function(){return this.fb});Ud.prototype.__defineSetter__("array",function(a){this.Qm=this.fb=a;this.J=!0});Ud.prototype.__defineGetter__("interpolation",function(){return this.Ys});Ud.prototype.__defineSetter__("interpolation",function(a){this.Ys=a});v("X.scalars",Ud);function Vd(a){bd.call(this);this.u="object";this.j=[];this.gb=this.Id=null;Aa(this,new Qd);null!=a&&this.mk(a)}w(Vd,bd);
Vd.prototype.mk=function(a){this.Ld=a.Ld;this.lc=new Nd;this.lc.Ab=new Float32Array(a.lc.Ab);this.Ka=a.Ka.slice();a.G&&(this.G=new cd(a.G.length,a.G));a.fa&&(this.fa=new cd(a.fa.length,a.fa));a.Mc&&(this.Mc=new cd(a.Mc.length,a.Mc));this.Ya=a.Ya;this.Gl=a.Gl;a.ja&&(this.ja=new ed((new String(a.ja.Vp)).toString()));this.Yc=a.Yc;this.j.length=0;var b=a.j;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.j.push(new A[b[d].u](b[d]));this.qb=a.qb;this.bn=a.bn;this.Al=a.Al;a.sl&&(this.sl=(new String(a.sl)).toString());
this.Tm=a.Tm;this.an=a.an;this.Bl=a.Bl.slice();this.J=!0};Vd.prototype.__defineGetter__("colortable",function(){this.Id||(this.Id=new nd);return this.Id});Vd.prototype.__defineGetter__("scalars",function(){this.gb||(this.gb=new Ud);return this.gb});Vd.prototype.__defineGetter__("children",function(){return this.j});Vd.prototype.ga=function(){var a=new Wd;a.Ra=this;this.dispatchEvent(a)};Vd.prototype.remove=function(){var a=new Xd;a.Ra=this;this.dispatchEvent(a)};
function Yd(a,b){if(!(null!=a&&null!=b&&a instanceof Vd&&b instanceof Vd))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Yc?-1:1==b.Yc?1:null!=a.md&&null!=b.md&&a.md>b.md?-1:1}v("X.object",Vd);v("X.object.prototype.modified",Vd.prototype.ga);v("X.object.prototype.remove",Vd.prototype.remove);function Zd(a){Cc.call(this,a);this.u="event"}w(Zd,Cc);var $d="pan"+B(),be="rotate"+B(),ce="zoom"+B(),de="scroll"+B();B();var ee="resetview"+B(),fe="windowlevel"+B(),ge="modified"+B(),he="remove"+B(),ie="progress"+B(),je="hover"+B(),ke="hover_end"+B(),le="computing"+B(),me="computing_end"+B(),ne="computing_progress"+B();function oe(){Zd.call(this,fe);this.ct=this.rt=0}w(oe,Zd);function pe(){Zd.call(this,$d);this.md=new A.R(0,0,0)}w(pe,Zd);function qe(){Zd.call(this,be);this.md=new A.R(0,0,0)}
w(qe,Zd);function re(){Zd.call(this,ce);this.Tf=this.Qg=!1}w(re,Zd);function se(){Zd.call(this,de);this.ec=!1}w(se,Zd);function ue(){Zd.call(this,je);this.bq=this.aq=0}w(ue,Zd);function ve(){Zd.call(this,ke)}w(ve,Zd);function we(){Zd.call(this,ee)}w(we,Zd);function Wd(){Zd.call(this,ge);this.xa=this.Ra=null}w(Wd,Zd);function Xd(){Zd.call(this,he);this.xa=this.Ra=null}w(Xd,Zd);function xe(){Zd.call(this,ie);this.ck=0}w(xe,Zd);function ye(){Zd.call(this,le);this.Ra=null}w(ye,Zd);
function ze(){Zd.call(this,ne);this.ck=0}w(ze,Zd);function Ae(){Zd.call(this,me);this.Ra=null}w(Ae,Zd);v("X.event.events.PAN",$d);v("X.event.events.ROTATE",be);v("X.event.events.ZOOM",ce);v("X.event.events.SCROLL",de);function Ee(){bd.call(this);this.u="parser";this._data=null;this.Qa=0;this.vF=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Qp=!0}w(Ee,bd);Ee.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Fe(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Ge(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ee.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.Qa,this.Qa+=b*c));if(this.vF!=this.Qp)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function He(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Ad(0,0,0,1),e=zd();Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,0,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,b[1]-
1,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,0,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,b[1]-1,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,0,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,b[1]-1,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,b[1]-1,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ie(a,b){var c=Cd();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=wd(),h=a[0],k=a[1],l=a[2],n=b[0],p=b[1],m=b[2];e[0]=k*m-l*p;e[1]=l*n-h*m;e[2]=h*p-k*n;yd(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];M(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);M(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);M(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=Bd();Jd(c,d);return[c,d]}
function Je(a,b,c,d,e,h,k,l,n){var p=new Ke;yd(c,c);for(var m=[],q=[],t=0;6>t;t++)for(var s=Math.floor(t/2),z=(s+1)%3,y=(s+2)%3,I=(4+2*s)%6,O=0;2>O;O++){var N=(2+O+2*s)%6,G=-(c[s]*(e[t]-a[s])+c[z]*(e[N]-a[z]))/c[y]+a[y];if(G>=e[I]&&G<=e[I+1]||G<=e[I]&&G>=e[I+1]){var T=[];T[s]=e[t];T[z]=e[N];T[y]=G;m.push(T)}else T=[],T[s]=e[t],T[z]=e[N],T[y]=G,q.push(T)}a=xd(0,0,1);a=Ie(c,a);e=a[0];a=a[1];s=[];for(q=0;q<m.length;++q)t=Ad(m[q][0],m[q][1],m[q][2],1),z=zd(),Ld(e,t,z),s.push([z[0],z[1],z[2]]);e=xd(1,
0,0);m=wd();Kd(a,e,m);q=xd(0,1,0);e=wd();Kd(a,q,e);t=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(q=q=0;q<s.length;++q)s[q][0]<t[0]&&(t[0]=s[q][0]),s[q][0]>t[1]&&(t[1]=s[q][0]),s[q][1]<t[2]&&(t[2]=s[q][1]),s[q][1]>t[3]&&(t[3]=s[q][1]),s[q][2]<t[4]&&(t[4]=s[q][2]),s[q][2]>t[5]&&(t[5]=s[q][2]);q=Ad(t[0]+(t[1]-t[0])/2,t[2]+(t[3]-t[2])/2,t[4]+(t[5]-t[4])/2,0);s=zd();Id(a,q,s);z=Math.floor(t[0]);y=Math.ceil(t[1]);z==y&&y++;I=y-z;O=Math.floor(t[2]);
N=Math.ceil(t[3]);G=N-O;T=b[0];b=b[1];var q=Math.ceil(I/T),aa=Math.ceil(G/b),V=new Uint8Array(4*q*aa),wa=new Pd;wa.jt=q;wa.it=aa;var aa=zd(),oa=Ad(0,0,t[4],1),ya=Bd();Id(k.mF,a,ya);for(var Oa=N-1E-7,Ja=y-1E-7,Pa=0,ka=0,za=0,qa=O,qa=O;qa<=Oa;qa+=b)for(za++,ka=0,oa[1]=qa,q=z;q<=Ja;q+=T){ka++;oa[0]=q;Ld(ya,oa,aa);var Gc=4*Pa,Be=Math.floor(aa[2]),Ce=Math.floor(aa[1]),De=Math.floor(aa[0]);if(0<=De&&De<k.Fa[0]&&0<=Ce&&Ce<k.Fa[1]&&0<=Be&&Be<k.Fa[2]){var ae=h[Be][Ce][De],Qh=De=Ce=Be=0;n?((ae=n.get(ae))||
(ae=[0,.61,0,0,1]),Be=255*ae[1],Ce=255*ae[2],De=255*ae[3],Qh=255*ae[4]):(Be=Ce=De=ae/k.cc*255,Qh=255);V[Gc]=Be;V[++Gc]=Ce;V[++Gc]=De;V[++Gc]=Qh}else V[Gc]=0,V[++Gc]=0,V[++Gc]=0,V[++Gc]=0;Pa++}wa.Mi=V;p.Ya=wa;p.BF=t;p.oF=a;p.nF=ya;p.uF=O;p.vP=N;p.AF=z;p.wP=y;p.Sx=ka;p.Rx=za;p.Oh=T;p.Za=I;p.Hh=b;p.La=G;p.Va=[s[0],s[1],s[2]];p.vl=[c[0],c[1],c[2]];p.Wp=[m[0],m[1],m[2]];p.ec=[e[0],e[1],e[2]];p.qb=!1;p.Nh=k;p.Gh=null==k.Nh||l?!0:!1;p.rl=d;p.tf();p.qb=!1;return p}
function Le(a,b,c,d){var e;e=d.Lc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,q=(2+2*n)%6,t=(4+2*n)%6,s=1/c[n]*(e[l]-b[n]);if(Infinity!=s&&-Infinity!=s){var z=b[p]+c[p]*s,s=b[m]+c[m]*s;z>=e[q]&&z<=e[q+1]&&s>=e[t]&&s<=e[t+1]?(q=[],q[n]=e[l],q[p]=z,q[m]=s,h.push(q)):(q=[],q[n]=e[l],q[p]=z,q[m]=s,k.push(q))}}e=[h,k];b=e[0];d.e[a].K=e;e=pd(new L(b[0][0],b[0][1],b[0][2]),new L(b[1][0],b[1][1],b[1][2]));d.e[a].uP=e;h=xd(0,0,1);k=Ie(c,h)[0];l=Ad(d.Vs[0],d.Vs[1],d.Vs[2],0);h=
zd();Ld(k,l,h);k=zd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.e[a].Kd=[Math.abs(h[0]),Math.abs(h[1])];d.e[a].El=h[2];d.e[a].Sa=k;e=Math.floor(Math.abs(e/h[2]));d.en[a]=e+1;d.e[a].ea=e+1;d.e[a].K[0][0][0]>d.e[a].K[0][1][0]?0<k[0]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][0]<d.e[a].K[0][1][0]?0>k[0]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][1]>d.e[a].K[0][1][1]?
0<k[1]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][1]<d.e[a].K[0][1][1]?0>k[1]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][2]>d.e[a].K[0][1][2]?0<k[2]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][2]<d.e[a].K[0][1][2]&&0>k[2]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e);d.e[a].ft=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Me(a,b){var c;c=b._data;for(var d=b.Fa,e=b.cc,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,p=0,m=0,q=0,t=0,q=0;q<d[2];q++){var s=c.subarray(q*l,(q+1)*l),t=0;k[q]=Array(d[1]);h[q]=Array(d[1]);for(m=0;m<d[1];m++)for(k[q][m]=new c.constructor(d[0]),h[q][m]=new c.constructor(d[0]),p=0;p<d[0];p++)n=s[t],k[q][m][p]=n/e*255,h[q][m][p]=n,t++}c=[h,k];b.kc=c[0];b.tP=c[1];A.fe(a.u+".reslice");b.jb=null!=b.t;b.Id&&(b.Pm=b.Id.he);b.oQ=[0,0,0];b.wa=[b.Hd[0]+(b.Fh[0]-1)/2,b.Hd[1]+(b.Fh[1]-1)/2,b.Hd[2]+(b.Fh[2]-
1)/2];b.Lc=[Math.min(b.Hd[0],b.Hd[0]+b.Fh[0]-1),Math.max(b.Hd[0],b.Hd[0]+b.Fh[0]-1),Math.min(b.Hd[1],b.Hd[1]+b.Fh[1]-1),Math.max(b.Hd[1],b.Hd[1]+b.Fh[1]-1),Math.min(b.Hd[2],b.Hd[2]+b.Fh[2]-1),Math.max(b.Hd[2],b.Hd[2]+b.Fh[2]-1)];b.e=[{},{},{}];c=xd(b.wa[0],b.wa[1],b.wa[2]);b.e[0].fn=c;d=xd(1,0,0);yd(d,d);b.e[0].H=d;e=[1,0,0];b.e[0].Ka=e;Le(0,c,d,b);b.j[0].j=Array(b.e[0].ea);c[0]=b.e[0].K[0][0][0]+b.e[0].Sa[0]*Math.floor(b.e[0].ea/2);c[1]=b.e[0].K[0][0][1]+b.e[0].Sa[1]*Math.floor(b.e[0].ea/2);c[2]=
b.e[0].K[0][0][2]+b.e[0].Sa[2]*Math.floor(b.e[0].ea/2);c=Je(c,b.e[0].Kd,b.e[0].H,b.e[0].Ka,b.Lc,b.kc,b,b.jb,b.Pm);b.jb&&(c.t=b.t.j[0].j[Math.floor(b.e[0].ea/2)].Ya);b.j[0].j[Math.floor(b.e[0].ea/2)]=c;b.Ih=Math.floor(b.e[0].ea/2);b.wl=Math.floor(b.e[0].ea/2);c=xd(b.wa[0],b.wa[1],b.wa[2]);b.e[1].fn=c;d=xd(0,1,0);yd(d,d);b.e[1].H=d;e=[0,1,0];b.e[1].Ka=e;Le(1,c,d,b);b.j[1].j=Array(b.e[1].ea);c[0]=b.e[1].K[0][0][0]+b.e[1].Sa[0]*Math.floor(b.e[1].ea/2);c[1]=b.e[1].K[0][0][1]+b.e[1].Sa[1]*Math.floor(b.e[1].ea/
2);c[2]=b.e[1].K[0][0][2]+b.e[1].Sa[2]*Math.floor(b.e[1].ea/2);c=Je(c,b.e[1].Kd,b.e[1].H,b.e[1].Ka,b.Lc,b.kc,b,b.jb,b.Pm);b.jb&&(c.t=b.t.j[1].j[Math.floor(b.e[1].ea/2)].Ya);b.j[1].j[Math.floor(b.e[1].ea/2)]=c;b.Jh=Math.floor(b.e[1].ea/2);b.xl=Math.floor(b.e[1].ea/2);c=xd(b.wa[0],b.wa[1],b.wa[2]);b.e[2].fn=c;d=xd(0,0,1);yd(d,d);b.e[2].H=d;e=[0,.392,.804];b.e[2].Ka=e;Le(2,c,d,b);b.j[2].j=Array(b.e[2].ea);c[0]=b.e[2].K[0][0][0]+b.e[2].Sa[0]*Math.floor(b.e[2].ea/2);c[1]=b.e[2].K[0][0][1]+b.e[2].Sa[1]*
Math.floor(b.e[2].ea/2);c[2]=b.e[2].K[0][0][2]+b.e[2].Sa[2]*Math.floor(b.e[2].ea/2);c=Je(c,b.e[2].Kd,b.e[2].H,b.e[2].Ka,b.Lc,b.kc,b,b.jb,b.Pm);b.jb&&(c.t=b.t.j[2].j[Math.floor(b.e[2].ea/2)].Ya);b.j[2].j[Math.floor(b.e[2].ea/2)]=c;b.Kh=Math.floor(b.e[2].ea/2);b.yl=Math.floor(b.e[2].ea/2);A.Ed(a.u+".reslice");return b.kc};function Ne(){Ee.call(this);this.u="parserOFF"}w(Ne,Ee);
Ne.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Ge(h,n,a);n=a+1;return b}n=e;return Ge(h,n,e-1)}A.fe(this.u+".parse");this._data=c;var e=c.byteLength,h=this.h("uchar",e);c=[];b.G=new cd(e);b.fa=new cd(e);for(var k=b.G,l=b.fa,n=0,p=d(),p=("OFF"===p?d():p).split(" "),m=p[0],p=p[1];m--;){var q=d(),q=q.split(" ");c.push([parseFloat(q[0]),parseFloat(q[1]),parseFloat(q[2])])}for(;p--;){var q=d(),q=q.split(" "),
t=c[parseInt(q[1],10)],m=c[parseInt(q[2],10)],q=c[parseInt(q[3],10)];k.add(t[0],t[1],t[2]);k.add(m[0],m[1],m[2]);k.add(q[0],q[1],q[2]);t=new L(t[0],t[1],t[2]);q=new L(q[0],q[1],q[2]);m=sd((new L(m[0],m[1],m[2])).Hc(t),q.Hc(t));m.normalize();l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z)}A.Ed(this.u+".parse");c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};v("X.parserOFF",Ne);v("X.parserOFF.prototype.parse",Ne.prototype.parse);function Ke(a){Vd.call(this);this.u="slice";this.Va=[0,0,0];this.vl=[0,0,1];this.ec=[0,1,0];this.Wp=[1,0,0];this.La=this.Za=10;this.Gl=[0,1,0,0,1,1,1,1,1,0,0,0];this.t=this.Nh=null;this.Gh=!0;this.rl=[1,1,1];null!=a&&this.mk(a)}w(Ke,Vd);Ke.prototype.mk=function(a){this.Va=a.Va.slice();this.vl=a.vl.slice();this.ec=a.ec.slice();this.Za=a.Za;this.La=a.La;this.Nh=a.Nh;this.t=a.t;this.Gh=a.Gh;this.rl=a.rl;this.tF=a.tF;Ke.d.mk.call(this,a)};Ke.prototype.__defineSetter__("height",function(a){this.La=a});
Ke.prototype.__defineSetter__("width",function(a){this.Za=a});Ke.prototype.create=function(){this.tf()};
Ke.prototype.tf=function(){var a=(new L(this.vl[0],this.vl[1],this.vl[2])).normalize(),b=new L(this.ec[0],this.ec[1],this.ec[2]),c=new L(this.Wp[0],this.Wp[1],this.Wp[2]),d=new L(this.Va[0],this.Va[1],this.Va[2]),e=rd(c.clone().Db().scale(this.Za/2),b.clone().Db().scale(this.La/2)),h=new L(e.x+d.x,e.y+d.y,e.z+d.z),e=rd(c.clone().Db().scale(this.Za/2),b.clone().scale(this.La/2)),k=new L(e.x+d.x,e.y+d.y,e.z+d.z),e=rd(c.clone().scale(this.Za/2),b.clone().Db().scale(this.La/2)),l=new L(e.x+d.x,e.y+d.y,
e.z+d.z),e=rd(c.clone().scale(this.Za/2),b.clone().scale(this.La/2)),b=new L(e.x+d.x,e.y+d.y,e.z+d.z);this.G=new cd(18);this.fa=new cd(18);this.G.add(h.x,h.y,h.z);this.G.add(k.x,k.y,k.z);this.G.add(l.x,l.y,l.z);this.G.add(l.x,l.y,l.z);this.G.add(b.x,b.y,b.z);this.G.add(k.x,k.y,k.z);this.fa.add(a.x,a.y,a.z);this.fa.add(a.x,a.y,a.z);this.fa.add(a.x,a.y,a.z);this.fa.add(a.x,a.y,a.z);this.fa.add(a.x,a.y,a.z);this.fa.add(a.x,a.y,a.z);this.Gh&&(a=new Vd,a.G=new cd(24),a.fa=new cd(24),a.G.add(h.x,h.y,h.z),
a.G.add(k.x,k.y,k.z),a.G.add(k.x,k.y,k.z),a.G.add(b.x,b.y,b.z),a.G.add(b.x,b.y,b.z),a.G.add(l.x,l.y,l.z),a.G.add(l.x,l.y,l.z),a.G.add(h.x,h.y,h.z),a.fa.add(0,0,0),a.fa.add(0,0,0),a.fa.add(0,0,0),a.fa.add(0,0,0),a.fa.add(0,0,0),a.fa.add(0,0,0),a.fa.add(0,0,0),a.fa.add(0,0,0),a.Ka=[this.rl[0],this.rl[1],this.rl[2]],a.Ld="LINES",a.Al=2,this.j.push(a))};v("X.slice",Ke);v("X.slice.prototype.create",Ke.prototype.create);function K(a){Vd.call(this);this.u="volume";this.Va=[0,0,0];this.Fa=[10,10,10];this.Lc=[1,1,1];this.en=[10,10,10];this.Lh=[1,1,1];this.Uf=[];this.yl=this.Kh=this.xl=this.Jh=this.wl=this.Ih=0;this.gn=new Vd;this.hn=new Vd;this.jn=new Vd;this.$p=this.Oe=!1;this.Ib=-1;this.Zp=[];this.t=null;this.Gh=!0;this.Rb=Infinity;this.Qb=-Infinity;this.dy=!0;this.cc=0;this._data=null;Aa(this,new fd);Aa(this,new Td);null!=a&&this.mk(a)}w(K,Vd);
K.prototype.mk=function(a){this.Va=a.Va.slice();this.Fa=a.Fa.slice();this.Lh=a.Lh.slice();this.Ih=a.Ih;this.wl=a.wl;this.Jh=a.Jh;this.xl=a.xl;this.Kh=a.Kh;this.yl=a.yl;this.Nx=a.Nx.slice();this.gn=new Vd(a.gn);this.hn=new Vd(a.hn);this.jn=new Vd(a.jn);this.cc=a.cc;this._data=a._data;this.Oe=a.Oe;this.$p=a.$p;this.Ib=a.Ib;this.t=a.t;this.Gh=a.Gh;K.d.mk.call(this,a)};
K.prototype.tf=function(a){this.j.length=0;this.gn.j.length=0;this.hn.j.length=0;this.jn.j.length=0;this.j.push(this.gn);this.j.push(this.hn);this.j.push(this.jn);this.Hd=a.mf;this.Vs=a.Jg;this.Fh=a.ld;this.ql=a.Je;this.mF=a.Ke;this.cc=a.max;this._data=a.data;this.J=!0};
K.prototype.ga=function(a){a="undefined"!==typeof a?a:!0;if(0<this.j.length){this.Oe!=this.$p&&(this.Oe||-1==this.Ib||(this.j[this.Ib].visible=!1),this.J=!0,this.$p=this.Oe);if(!this.qb)return;for(var b=0,b=0;3>b;b++){var c=this.j[b],d=0,e=0;0==b?(d=this.Ih,e=this.wl,this.wl=this.Ih):1==b?(d=this.Jh,e=this.xl,this.xl=this.Jh):2==b&&(d=this.Kh,e=this.yl,this.yl=this.Kh);if(null==this.j[b].j[parseInt(d,10)]){var h=wd();h[0]=this.e[b].K[0][0][0]+this.e[b].Sa[0]*parseInt(d,10);h[1]=this.e[b].K[0][0][1]+
this.e[b].Sa[1]*parseInt(d,10);h[2]=this.e[b].K[0][0][2]+this.e[b].Sa[2]*parseInt(d,10);if(this.jb){var k=Je(h,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.t.kc,this.t,this.t.jb,this.t.Id.he);this.t.j[b].j[parseInt(d,10)]=k;this.t.j[b].ga(!0)}h=Je(h,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.kc,this,!0,null);this.jb&&(h.t=h.Ya,h.t=this.t.j[b].j[parseInt(d,10)].Ya);c.j[parseInt(d,10)]=h;this.j[b].ga(!0)}e=c.j[parseInt(e,10)];this.Oe||(e.visible=!1);c=c.j[parseInt(d,10)];c.visible=!0;
c.Yc=1;this.Oe&&(c.j[0].qb=!1,b!=this.Ib&&(c.visible=!1,c.Yc=0))}this.Oe&&-1!=this.Ib&&Oe(this,this.Ib)}a&&K.d.ga.call(this)};K.prototype.__defineGetter__("dimensions",function(){return this.Fa});K.prototype.__defineSetter__("dimensions",function(a){this.Fa=a});K.prototype.__defineGetter__("spacing",function(){return this.Lh});K.prototype.__defineSetter__("spacing",function(a){this.Lh=a});K.prototype.__defineGetter__("bbox",function(){return this.Lc});K.prototype.__defineGetter__("range",function(){return this.en});
K.prototype.__defineGetter__("dimensionsRAS",function(){return this.Nx});K.prototype.__defineGetter__("volumeRendering",function(){return this.Oe});K.prototype.__defineSetter__("volumeRendering",function(a){this.Oe=a;this.ga(!1)});K.prototype.__defineGetter__("visible",function(){return this.qb});K.prototype.__defineSetter__("visible",function(a){if(a)this.qb=a,this.ga(!1);else{for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.qb=a;this.J=!0}});
K.prototype.__defineGetter__("center",function(){return this.Va});K.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.Va=a});K.prototype.__defineGetter__("volumeRenderingCache",function(){return this.Zp});K.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.Zp=a});K.prototype.__defineGetter__("image",function(){return this.Uf});
K.prototype.__defineGetter__("labelmap",function(){this.t||(this.t=new Pe(this));return this.t});K.prototype.__defineGetter__("indexX",function(){return this.Ih});K.prototype.__defineSetter__("indexX",function(a){u(a)&&0<=a&&a<this.gn.j.length&&(this.Ih=a,this.ga(!1))});K.prototype.__defineGetter__("indexY",function(){return this.Jh});K.prototype.__defineSetter__("indexY",function(a){u(a)&&0<=a&&a<this.hn.j.length&&(this.Jh=a,this.ga(!1))});K.prototype.__defineGetter__("indexZ",function(){return this.Kh});
K.prototype.__defineSetter__("indexZ",function(a){u(a)&&0<=a&&a<this.jn.j.length&&(this.Kh=a,this.ga(!1))});K.prototype.__defineGetter__("windowLow",function(){return this.Rb});K.prototype.__defineSetter__("windowLow",function(a){this.Rb=a});K.prototype.__defineGetter__("windowHigh",function(){return this.Qb});K.prototype.__defineSetter__("windowHigh",function(a){this.Qb=a});K.prototype.__defineGetter__("borders",function(){return this.Gh});
K.prototype.__defineSetter__("borders",function(a){this.Gh=a});K.prototype.__defineGetter__("reslicing",function(){return this.dy});K.prototype.__defineSetter__("reslicing",function(a){this.dy=a});K.prototype.__defineSetter__("xNormX",function(a){this.e[0].H[0]=a});K.prototype.__defineGetter__("xNormX",function(){return this.e[0].H[0]});K.prototype.__defineSetter__("xNormY",function(a){this.e[0].H[1]=a});K.prototype.__defineGetter__("xNormY",function(){return this.e[0].H[1]});
K.prototype.__defineSetter__("xNormZ",function(a){this.e[0].H[2]=a});K.prototype.__defineGetter__("xNormZ",function(){return this.e[0].H[2]});K.prototype.__defineSetter__("xColor",function(a){this.e[0].Ka=a});K.prototype.__defineGetter__("xColor",function(){return this.e[0].Ka});K.prototype.__defineSetter__("yNormX",function(a){this.e[1].H[0]=a});K.prototype.__defineGetter__("yNormX",function(){return this.e[1].H[0]});K.prototype.__defineSetter__("yNormY",function(a){this.e[1].H[1]=a});
K.prototype.__defineGetter__("yNormY",function(){return this.e[1].H[1]});K.prototype.__defineSetter__("yNormZ",function(a){this.e[1].H[2]=a});K.prototype.__defineGetter__("yNormZ",function(){return this.e[1].H[2]});K.prototype.__defineSetter__("yColor",function(a){this.e[1].Ka=a});K.prototype.__defineGetter__("yColor",function(){return this.e[1].Ka});K.prototype.__defineSetter__("zNormX",function(a){this.e[2].H[0]=a});K.prototype.__defineGetter__("zNormX",function(){return this.e[2].H[0]});
K.prototype.__defineSetter__("zNormY",function(a){this.e[2].H[1]=a});K.prototype.__defineGetter__("zNormY",function(){return this.e[2].H[1]});K.prototype.__defineSetter__("zNormZ",function(a){this.e[2].H[2]=a});K.prototype.__defineGetter__("zNormZ",function(){return this.e[2].H[2]});K.prototype.__defineSetter__("zColor",function(a){this.e[2].Ka=a});K.prototype.__defineGetter__("zColor",function(){return this.e[2].Ka});
K.prototype.aM=function(a){this.j[a].visible=!1;for(var b=0;b<this.j[a].j.length;b++)"undefined"!=typeof this.j[a].j[b]&&(this.jb&&(this.t.j[a].j[b].remove(),this.t.j[a].j[b]=null),this.j[a].j[b].remove(),this.j[a].j[b]=null);yd(this.e[a].H,this.e[a].H);Le(a,this.e[a].fn,this.e[a].H,this);this.j[a].j=[];alert("#VOLUME#",this.e[a].ea);this.j[a].j=Array(this.e[a].ea);this.jb&&(b=Je(this.e[a].fn,this.e[a].Kd,this.e[a].H,this.e[a].Ka,this.Lc,this.t.kc,this.t,this.t.jb,this.t.Id.he),this.t.j[a].j=[],this.t.j[a].j=
Array(this.e[a].ea),this.t.j[a].j[Math.floor(this.e[a].ea/2)]=b,this.t.j[a].ga());b=Je(this.e[a].fn,this.e[a].Kd,this.e[a].H,this.e[a].Ka,this.Lc,this.kc,this,!0,null);this.jb&&(b.t=b.Ya,b.t=this.t.j[a].j[Math.floor(this.e[a].ea/2)].Ya);this.j[a].j[Math.floor(this.e[a].ea/2)]=b;0==a?(this.Ih=Math.floor(this.e[a].ea/2),this.wl=Math.floor(this.e[a].ea/2)):1==a?(this.Jh=Math.floor(this.e[a].ea/2),this.xl=Math.floor(this.e[a].ea/2)):(this.Kh=Math.floor(this.e[a].ea/2),this.yl=Math.floor(this.e[a].ea/
2));this.j[a].ga();this.j[a].j[Math.floor(this.e[a].ea/2)].qb=!0};
function Oe(a,b){if(!a.Kp)if(!a.Oe||!a.J&&b==a.Ib)a.Ib=b;else if(-1==a.Zp.indexOf(b))a.Zp.push(b),a.Kp=!0,Qe(a,b),setTimeout(function(){var a=null;0<=this.Ib&&(a=this.j[this.Ib],a.visible=!1);var a=this.j[b],c=a.j.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.j[e]){var p=wd();p[0]=this.e[b].K[0][0][0]+this.e[b].Sa[0]*e;p[1]=this.e[b].K[0][0][1]+this.e[b].Sa[1]*e;p[2]=this.e[b].K[0][0][2]+this.e[b].Sa[2]*e;if(this.jb){var m=Je(p,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.t.kc,this.t,
this.t.jb,this.t.Id.he);this.t.j[b].j[e]=m;this.t.j[b].ga(!0)}p=Je(p,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.kc,this,!0,null);p.j[0].qb=!1;this.jb&&(p.t=p.Ya,p.t=this.t.j[b].j[e].Ya);a.j[e]=p}a.j[e].qb=!0}Re(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].K[0][0][0]+this.e[b].Sa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Sa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Sa[2]*e;if(this.jb){var p=Je(m,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.t.kc,
this.t,this.t.jb,this.t.Id.he);this.t.j[b].j[e]=p;this.t.j[b].ga(!0)}m=Je(m,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.kc,this,!0,null);m.j[0].qb=!1;this.jb&&(m.t=m.Ya,m.t=this.t.j[b].j[e].Ya);a.j[e]=m}a.j[e].qb=!0}Re(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].K[0][0][0]+this.e[b].Sa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Sa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Sa[2]*e;if(this.jb){var p=Je(m,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,
this.t.kc,this.t,this.t.jb,this.t.Id.he);this.t.j[b].j[e]=p;this.t.j[b].ga(!0)}m=Je(m,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.kc,this,!0,null);m.j[0].qb=!1;this.jb&&(m.t=m.Ya,m.t=this.t.j[b].j[e].Ya);a.j[e]=m}a.j[e].qb=!0}Re(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].K[0][0][0]+this.e[b].Sa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Sa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Sa[2]*e;if(this.jb){var p=Je(m,this.e[b].Kd,this.e[b].H,this.e[b].Ka,
this.Lc,this.t.kc,this.t,this.t.jb,this.t.Id.he);this.t.j[b].j[e]=p;this.t.j[b].ga(!0)}m=Je(m,this.e[b].Kd,this.e[b].H,this.e[b].Ka,this.Lc,this.kc,this,!0,null);m.j[0].qb=!1;this.jb&&(m.t=m.Ya,m.t=this.t.j[b].j[e].Ya);a.j[e]=m}a.j[e].qb=!0}Re(this,1);setTimeout(function(){this.Kp&&this.j[b].ga(!0);this.Ib=b;this.J=!1;if(this.Kp){var a=new Ae;a.Ra=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Kp=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.j[a.Ib];
c.visible=!1;var c=a.j[b],d=c.j.length,e;for(e=0;e<d;e++)c.j[e].qb=!0;a.Ib=b;a.J=!1}}function Qe(a,b){var c=new ye;c.Ra=a;a.dispatchEvent(c);a.onComputing(b)}function Re(a,b){var c=new ze;c.ck=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}K.prototype.Bv=function(){};K.prototype.Dv=function(){};K.prototype.Cv=function(){};K.REORIENT_TRANSFORM_KEY="ot_"+B();v("X.volume.REORIENT_TRANSFORM_KEY",K.REORIENT_TRANSFORM_KEY);K.REORIENTED_DIMENSIONS_KEY="otd_"+B();
v("X.volume.REORIENTED_DIMENSIONS_KEY",K.REORIENTED_DIMENSIONS_KEY);K.ORIENTATION_KEY="or_"+B();v("X.volume.ORIENTATION_KEY",K.ORIENTATION_KEY);K.SINGLE_FRAME_SCAN="sf_"+B();v("X.volume.SINGLE_FRAME_SCAN",K.SINGLE_FRAME_SCAN);v("X.volume",K);v("X.volume.prototype.modified",K.prototype.ga);v("X.volume.prototype.sliceInfoChanged",K.prototype.aM);v("X.volume.prototype.onComputing",K.prototype.Bv);v("X.volume.prototype.onComputingProgress",K.prototype.Dv);v("X.volume.prototype.onComputingEnd",K.prototype.Cv);function Se(){Ee.call(this);this.u="parserDCM"}w(Se,Ee);
Se.prototype.parse=function(a,b,c){b.Bh={};b.Bh.qo=0;this.li(c,b);if(null==b.ja.length||b.Ba.length==b.ja.length){b.Bh.qo=b.ja.length;var d={};c={};for(var e=0;e<b.Ba.length;e++)d.hasOwnProperty(b.Ba[e].series_instance_uid)||(d[b.Ba[e].series_instance_uid]=[],c[b.Ba[e].series_instance_uid]={}),c[b.Ba[e].series_instance_uid].hasOwnProperty(b.Ba[e].sop_instance_uid)||(c[b.Ba[e].series_instance_uid][b.Ba[e].sop_instance_uid]=!0,d[b.Ba[e].series_instance_uid].push(b.Ba[e]));var e=Object.keys(d)[0],h=
d[e],k=h.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[e][0].dist=0):h[0].image_position_patient[0]!=h[1].image_position_patient[0]||h[0].image_position_patient[1]!=h[1].image_position_patient[1]||h[0].image_position_patient[2]!=h[1].image_position_patient[2]?(l="image_position_patient",e=new L(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new L(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],
h[0].image_orientation_patient[5]),e=sd(e,d),h.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,e)),h.sort(function(a,b){return a.dist-b.dist})):h[0].instance_number!=h[1].instance_number?(window.console.log("Ordering by instance number"),l="instance_number",h.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");if("image_position_patient"==
l&&5>k)if(e=0,d=function(){window.console.log('Warning: Although series was initially ordered by "image_position_patient", positional overlaps were found.\nSwitching to "instance_number" ordering as a result.');l="instance_number"},1==k)d(),b[K.SINGLE_FRAME_SCAN]=!0;else for(;e<k-1;e++).01>h[e].dist-h[e+1].dist&&(d(),h.sort(function(a,b){return a.instance_number-b.instance_number}));for(var e=0,n=h.length;e<n;e++);isNaN(h[0].pixel_spacing[0])&&(h[0].pixel_spacing[0]=1);isNaN(h[0].pixel_spacing[1])&&
(h[0].pixel_spacing[1]=1);if(1<h.length)for(var e=function(){l="instance_number";h.sort(function(a,b){return a.instance_number-b.instance_number});h.forced_instance_ordering=!0;window.console.log('Warning: Slices were found unordered after XTK "image_position_patient" sorting. Forcing "instance_number" reordering.');for(var a=0,b=!1;a<n-1;a++)if(0==Math.abs(h[a].instance_number-h[a+1].instance_number)){b=!0;break}if(b)for(window.console.log('Warning: After forcing "instance_number" ordering overlaps were found. Rewriting "instance_number" data for every slice.'),
a=0;a<n;a++)h[a].instance_number=a},p=0,n=h.length;p<n-1;p++)if(1!=Math.abs(h[p].instance_number-h[p+1].instance_number)){e();break}if(1<k)switch(l){case "image_position_patient":var d=h[0].image_position_patient,m=h[1].image_position_patient,e=m[0]-d[0],q=m[1]-d[1],t=m[2]-d[2];h[0].pixel_spacing[2]=Math.sqrt(e*e+q*q+t*t);break;case "instance_number":var s=1;if(!0===h.forced_instance_ordering){for(var e=1,n=h.length,d=h[0].image_position_patient,z=!1;e<n;e++)if(m=h[e].image_position_patient,d[0]!=
m[0]||d[1]!=m[1]||d[2]!=m[2]){z=!0;break}z&&(window.console.log('Warning: Setting pixel_spacing according to "image_position_patient" even though "forced_instance_ordering" is used.'),e=m[0]-d[0],q=m[1]-d[1],t=m[2]-d[2],s=Math.sqrt(e*e+q*q+t*t))}h[0].pixel_spacing[2]=s;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else h[0].pixel_spacing[2]=1;m=1;switch(l){case "image_position_patient":d=h[0].image_position_patient;s=h[k-1].image_position_patient;e=s[0]-d[0];q=s[1]-d[1];
t=s[2]-d[2];q=Math.sqrt(e*e+q*q+t*t);m+=Math.round(q/h[0].pixel_spacing[2]);break;case "instance_number":m+=Math.abs(h[k-1].instance_number-h[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}"false"==b.reslicing.toString()&&(window.console.log('Forcing expexted slices to length of files because volume\'s "reslicing" property is set to false.'),window.console.log("Expected slices:",m),m=k,window.console.log("Ordering:",l));for(var d=h[0].columns*h[0].rows,
y=d*m,s=!1,e=0,n=h.length,I=z=0;e<n;e++)h[e].columns>I&&(I=h[e].columns),h[e].rows>z&&(z=h[e].rows);I*z>d&&(d=I*z,y=d*m,s=!0,window.console.log("Warning: Dimensional inequalities found in image sizes."));var O=null;window.console.log(h[0].Si);switch(h[0].Si){case 8:O=new Uint8Array(y);window.console.log("Using a Uint8Array.");break;case 16:O=new Uint16Array(y);window.console.log("Using a Uint16Array.");break;case 32:O=new Uint32Array(y),window.console.log("Using a Uint32Array.");default:window.console.log("Unknown number of bits allocated - using default: 32 bits"),
O=new Uint32Array(y)}b.Lh=h[0].pixel_spacing;for(y=0;y<k;y++){var N=h[y].data,q=0;switch(l){case "image_position_patient":e=h[y].image_position_patient[0]-h[0].image_position_patient[0];q=h[y].image_position_patient[1]-h[0].image_position_patient[1];t=h[y].image_position_patient[2]-h[0].image_position_patient[2];q=Math.sqrt(e*e+q*q+t*t)/h[0].pixel_spacing[2];break;case "instance_number":q=h[y].instance_number-h[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+
l)}if(s){for(var p=h[y].columns,e=h[y].rows,t=0,G=Qb(z*I),T=Math.round((I-p)/2),aa=p+T,p=Math.round((z-e)/2),V=e+p,e=p;e<V;e++)for(p=T;p<aa;p++)G[I*e+p]=N[t],t++;N=G}O.set(N,Math.round(q)*d)}c.data=O;b._data=O;b.Fa=[h[0].columns,h[0].rows,m];s&&(b.Fa=[I,z,m]);c.oG=b.Fa;m=Fe(O);k=m[0];m=m[1];c.min=b.ie=b.Rb=k;c.max=b.cc=b.Qb=m;b.zb!=k&&(b.zb=k);b.Bb!=m&&(b.Bb=m);m=h[0].image_position_patient;k=Bd();if("false"==b.reslicing.toString())"image_position_patient"==l||h.forced_instance_ordering?(window.console.log('NRG modification: Running an orthogonal transform because the volume\'s "reslicing" property is set to false.'),
e=new L(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new L(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),e=sd(e,d),e.x=Math.round(e.x),e.y=Math.round(e.y),e.z=Math.round(e.z),M(k,0,-Math.round(h[0].image_orientation_patient[0])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[3])*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]),M(k,1,-Math.round(h[0].image_orientation_patient[1])*
h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[4])*h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]),M(k,2,Math.round(h[0].image_orientation_patient[2])*h[0].pixel_spacing[0],Math.round(h[0].image_orientation_patient[5])*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]),M(k,3,0,0,0,1),window.console.log("IJKToRAS transform:\n",k),m=Bd(),M(m,0,-Math.round(h[0].image_orientation_patient[0]),-Math.round(h[0].image_orientation_patient[3]),-e.x,0),M(m,1,-Math.round(h[0].image_orientation_patient[1]),
-Math.round(h[0].image_orientation_patient[4]),-e.y,0),M(m,2,Math.round(h[0].image_orientation_patient[2]),Math.round(h[0].image_orientation_patient[5]),e.z,0),M(m,3,0,0,0,1),b[K.REORIENT_TRANSFORM_KEY]=m,window.console.log("Orthogonal Transform:\n",m)):"instance_number"==l?(M(k,0,-1,0,0,-m[0]),M(k,1,-0,-1,-0,-m[1]),M(k,2,0,0,1,m[2]),M(k,3,0,0,0,1),m=Bd(),M(m,0,-1,0,0,0),M(m,1,-0,-1,-0,0),M(m,2,0,0,1,0),M(m,3,0,0,0,1),M(m,3,0,0,0,1),b[K.REORIENT_TRANSFORM_KEY]=m):window.console.log("Unkown ordering mode - returning: "+
l);else switch(l){case "image_position_patient":e=new L(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]);d=new L(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]);e=sd(e,d);M(k,0,-h[0].image_orientation_patient[0]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[3]*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]);M(k,1,-h[0].image_orientation_patient[1]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[4]*
h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]);M(k,2,h[0].image_orientation_patient[2]*h[0].pixel_spacing[0],h[0].image_orientation_patient[5]*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]);M(k,3,0,0,0,1);break;case "instance_number":M(k,0,-1,0,0,-m[0]);M(k,1,-0,-1,-0,-m[1]);M(k,2,0,0,1,m[2]);M(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Je=k;c.Ke=Bd();Jd(c.Je,c.Ke);e=Ad(0,0,0,1);m=zd();Ld(k,e,m);e=Ad(1,1,1,1);d=zd();Ld(k,e,d);c.Jg=[d[0]-
m[0],d[1]-m[1],d[2]-m[2]];k=He(k,[b.Fa[0],b.Fa[1],b.Fa[2]]);c.ld=[k[1]-k[0]+1,k[3]-k[2]+1,k[5]-k[4]+1];c.mf=[k[0],k[2],k[4]];"false"==b.reslicing.toString()&&(k=Ad(b.Fa[0],b.Fa[1],b.Fa[2],1),m=zd(),Ld(b[K.REORIENT_TRANSFORM_KEY],k,m),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),b[K.REORIENTED_DIMENSIONS_KEY]=m,m[0]==b.Fa[2]?(b[K.ORIENTATION_KEY]="sagittal",c.ld[0]+=1*h[0].pixel_spacing[2],c.Jg[0]=c.ld[0]/(h.length+1)):m[1]==b.Fa[2]?(b[K.ORIENTATION_KEY]="coronal",c.ld[1]+=1*h[0].pixel_spacing[2],
c.mf[1]-=1*h[0].pixel_spacing[2]):(b[K.ORIENTATION_KEY]="transverse",c.ld[2]+=2*h[0].pixel_spacing[2],c.Jg[2]=c.ld[2]/(h.length+1),c.mf[2]-=h[0].pixel_spacing[2]),window.console.log("Assessed volume orientation: "+b[K.ORIENTATION_KEY]+"\nXTK Modifications may be applied to restore acquired properties."),window.console.log("_transformedDims",m),window.console.log("RASSpacing",c.Jg),window.console.log("RASDimensions",c.ld),window.console.log("RASOrigin",c.mf));b.tf(c);b.Uf=Me(this,b)}c=new Wd;c.Ra=
b;c.xa=a;this.dispatchEvent(c)};Se.prototype.se=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Se.prototype.li=function(a,b){this._data=a;if("undefined"==typeof b.Ba||null==b.Ba)b.Ba=[];var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=!1,m,q,t;q=[[8,4416],[9,30576],[136,512]];t=[[18,100],[35,4224],[64,629],[8,4368],[8,4384],[136,512]];for(var s,z;e<d.length;){h=d[e++];k=d[e++];l=d[e++];n=d[e++];"1.2.840.10008.1.2"==
c.transfer_syntax_uid&&0==n&&(n=l);p=!1;if(void 0!==h&&void 0!==k){switch(c.transfer_syntax_uid){case "1.2.840.10008.1.2.1":m="Little Endian Explicit";s=0;for(z=q.length;s<z;s++)if(h===q[s][0]&&k===q[s][1]){p=!0;break}break;case "1.2.840.10008.1.2.2":m="Big Endian Explicit";break;case "1.2.840.10008.1.2":for(m="Little Endian Implicit",s=0,z=t.length;s<z;s++)if(h===t[s][0]&&k===t[s][1]){p=!0;break}}if(p){n="parserDCM.js: Identified "+m+". Skipping DICOM adddress (0x"+h.toString(16)+", 0x"+k.toString(16)+
")"+h+" "+k;window.console.log(n);if(8==h&&4416==k||9==h&&30576==k)for(n=0;;){_newTagGroup=d[e++];_newTagGroup.toString(16);s=parseInt(_newTagGroup.toString(16),10)-parseInt(h.toString(16),10);if(3>s&&0<s)if(_newTagElement=d[e++],_newTagGroup.toString(16),_newTagElement.toString(16),10==parseInt(_newTagElement.toString(16),10)){e--;e--;break}else e--;n++}continue}}switch(h){case 2:switch(k){case 16:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);
c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Se.prototype.se(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Si=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=
Se.prototype.se(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(k);break;case 19:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=
l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Se.prototype.se(d,e,l,n)}break;case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";
for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(k);break;default:e=Se.prototype.se(d,e,l,n)}break;case 16:switch(k){case 8720:for(s=0;s<n/2;s++)e++;break;default:e=Se.prototype.se(d,e,l,n)}break;default:e=Se.prototype.se(d,e,l,n)}}switch(c.Si){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Qa=this._data.byteLength-
c.columns*c.rows*2;d=null;switch(c.Si){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.Ba.push(c);return b};v("X.parserDCM",Se);v("X.parserDCM.prototype.parse",Se.prototype.parse);function Te(){Ee.call(this);this.u="parserVTK"}w(Te,Ee);
Te.prototype.parse=function(a,b,c){A.fe(this.u+".parse");var d=b.G,e=b.fa,h=new Uint8Array(c),k="";b.G=d=new cd(c.byteLength);b.fa=e=new cd(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Ge(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.ln=this.mn=null;this.Xj=[];this.Ne=Sd;this.et=this.Ji=this.Di=this.Ki=!1;c=0;for(l=k%8;l--;)Ue(this,h[c]),c++;for(l=.125*k^0;l--;)Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),
c++,Ue(this,h[c]),c++;c=this.mn;var h=this.ln,k=h.length,n=l=this.Xj.length;do{var p=this.Xj[l-n],m=p.length,q;for(q=0;q<m&&!("LINES"==this.Ne&&q+1>=m);q++){var t=parseInt(p[q],10),s=c.get(t);d.add(s[0],s[1],s[2]);var z=t,y=s;"LINES"==this.Ne?(z=parseInt(p[q+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.Ne&&(0!=q&&q!=m-1||d.add(s[0],s[1],s[2]));t<k?(y=h.get(t),e.add(y[0],y[1],y[2]),"LINES"==this.Ne?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.Ne&&(0!=q&&q!=m-1||e.add(y[0],
y[1],y[2]))):(z=new L(s[0],s[1],s[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.Ne?(z=new L(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.Ne&&(0!=q&&q!=m-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.Ld=this.Ne;A.Ed(this.u+".parse");d=new Wd;d.Ra=b;d.xa=a;this.dispatchEvent(d)};
function Ue(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Ki=!0;a.Di=!1;a.Ji=!1;c=parseInt(c[1],10);a.mn=new cd(3*c);a.ln=new cd(3*c);return;case "VERTICES":a.Di=!0;a.Ki=!1;a.Ji=!1;c=parseInt(c[1],10);if(3<=c)a.Ne=Sd;else if(1==c)a.Ne="POINTS";else throw Error("This VTK file is not supported!");a.Xj=[];return;case "TRIANGLE_STRIPS":a.Di=!0;a.Ki=!1;a.Ji=!1;a.Ne="TRIANGLE_STRIPS";a.Xj=[];return;case "LINES":a.Di=!0;a.Ki=!1;a.Ji=!1;a.Ne="LINES";a.Xj=
[];return;case "POLYGONS":a.Di=!0;a.Ki=!1;a.Ji=!1;a.Ne="POLYGONS";a.Xj=[];return;case "POINT_DATA":a.Ji=!0;a.Ki=!1;a.Di=!1;return}if(a.Ki)if(1==d||isNaN(parseFloat(e)))a.Ki=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.mn.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.mn.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.mn.add(d,e,c))}else a.Di?1==d||isNaN(parseFloat(e))?a.Di=!1:(c=c.slice(1),a.Xj.push(c)):
a.Ji&&("NORMALS"==e?a.et=!0:1==d||isNaN(parseFloat(e))?(a.Ji=!1,a.et=!1):a.et&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.ln.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.ln.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.ln.add(d,e,c))))}v("X.parserVTK",Te);v("X.parserVTK.prototype.parse",Te.prototype.parse);function Ve(){Ee.call(this);this.u="parserFSM";this.Qp=!1}w(Ve,Ee);
Ve.prototype.parse=function(a,b,c){A.fe(this.u+".parse");this._data=c;var d=b.G,e=b.fa;b.Bl=[];var h=b.Bl;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var n=new Uint32Array(e),p=new Float32Array(9*c);b.G=d=new cd(9*c);b.fa=e=new cd(9*c);var m;for(m=0;m<c;m++){var q=3*m,t=k[q],s=k[q+1],z=k[q+2];h.push(t);h.push(s);h.push(z);n[t]+=1;n[s]+=1;n[z]+=1;var q=3*t,y=3*s,I=3*z,O=l[q],N=l[q+1],G=l[q+2],
s=l[y],z=l[y+1],t=l[y+2],T=l[I],aa=l[I+1],V=l[I+2];d.add(O,N,G);d.add(s,z,t);d.add(T,aa,V);O=new L(O,N,G);T=new L(T,aa,V);s=(new L(s,z,t)).clone().Hc(O);z=T.clone().Hc(O);s=sd(s,z).normalize();p[q]+=s.x;p[q+1]+=s.y;p[q+2]+=s.z;p[y]+=s.x;p[y+1]+=s.y;p[y+2]+=s.z;p[I]+=s.x;p[I+1]+=s.y;p[I+2]+=s.z}for(m=0;m<c;m++)q=3*m,t=k[q],s=k[q+1],z=k[q+2],q=3*t,y=3*s,I=3*z,h=new L(p[y],p[y+1],p[y+2]),l=new L(p[I],p[I+1],p[I+2]),q=(new L(p[q],p[q+1],p[q+2])).scale(1/n[t]).normalize(),h=h.scale(1/n[s]).normalize(),
l=l.scale(1/n[z]).normalize(),e.add(q.x,q.y,q.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this._data.byteLength-this.Qa);k=null;for(q=0;q<c.length;q++)if(99==c[q]&&114==c[q+1]&&97==c[q+2]&&115==c[q+3]){for(e=k=q+9;10!=c[q]&&q<c.length;)e++,q++;k=Ge(c.subarray(k,e)).split(" ");break}k&&(b.lc.mD(parseFloat(k[0])),b.lc.nD(parseFloat(k[1])),b.lc.oD(parseFloat(k[2])));b.Ld=Sd;A.Ed(this.u+".parse");c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};v("X.parserFSM",Ve);
v("X.parserFSM.prototype.parse",Ve.prototype.parse);var We={Gt:function(a,b,c){return We.update(a,0,b,c)},update:function(a,b,c,d){var e=We.WE,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Xe;
Xe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);We.WE=Xe;function Ye(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,p,m,q,t;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(q=0;q<b;++q)if(a[q]===k){p=0;m=l;for(t=0;t<k;++t)p=p<<1|m&1,m>>=1;for(t=p;t<e;t+=n)h[t]=k<<16|q;++l}++k;l<<=1;n<<=1}return[h,c,d]};function Ze(a,b){this.Bt=[];this.Dt=32768;this.ag=this.rn=this.lb=this.Sw=0;this.input=new Uint8Array(a);this.Qy=!1;this.Et=$e;this.resize=!1;if(b||!(b={}))b.index&&(this.lb=b.index),b.bufferSize&&(this.Dt=b.bufferSize),b.bufferType&&(this.Et=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Et){case af:this.uc=32768;this.output=new Uint8Array(32768+this.Dt+258);break;case $e:this.uc=0;this.output=new Uint8Array(this.Dt);this.xk=this.AG;this.Zy=this.cG;this.Xt=this.kG;break;default:throw Error("invalid inflate mode");
}}var af=0,$e=1;
Ze.prototype.aj=function(){for(;!this.Qy;){var a=bf(this,3);a&1&&(this.Qy=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.lb,c=this.output,d=this.uc,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.ag=this.rn=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.Et){case af:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.uc=d,c=this.xk(),d=this.uc;break;case $e:for(;d+h>c.length;)c=this.xk({Gz:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.lb=b+=h;this.uc=
d;this.output=c;break;case 1:this.Xt(cf,df);break;case 2:ef(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.Zy()};
var ff=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),hf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),jf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),kf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lf=new Uint8Array(288),
mf,nf;mf=0;for(nf=lf.length;mf<nf;++mf)lf[mf]=143>=mf?8:255>=mf?9:279>=mf?7:8;var cf=Ye(lf),pf=new Uint8Array(30),qf,rf;qf=0;for(rf=pf.length;qf<rf;++qf)pf[qf]=5;var df=Ye(pf);function bf(a,b){for(var c=a.rn,d=a.ag,e=a.input,h=a.lb,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.rn=c>>>b;a.ag=d-b;a.lb=h;return k}
function sf(a,b){for(var c=a.rn,d=a.ag,e=a.input,h=a.lb,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.rn=c>>k;a.ag=d-k;a.lb=h;return e&65535}
function ef(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=sf(this,b),d){case 16:for(d=3+bf(this,2);d--;)c[h++]=e;break;case 17:for(d=3+bf(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+bf(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=bf(a,5)+257,d=bf(a,5)+1,e=bf(a,4)+4,h=new Uint8Array(ff.length),k;for(k=0;k<e;++k)h[ff[k]]=bf(a,3);e=Ye(h);h=new Uint8Array(c);k=new Uint8Array(d);a.Xt(Ye(b.call(a,c,e,h)),Ye(b.call(a,d,e,k)))}f=Ze.prototype;
f.Xt=function(a,b){var c=this.output,d=this.uc;this.pz=a;for(var e=c.length-258,h,k,l;256!==(h=sf(this,a));)if(256>h)d>=e&&(this.uc=d,c=this.xk(),d=this.uc),c[d++]=h;else for(h-=257,l=gf[h],0<hf[h]&&(l+=bf(this,hf[h])),h=sf(this,b),k=jf[h],0<kf[h]&&(k+=bf(this,kf[h])),d>=e&&(this.uc=d,c=this.xk(),d=this.uc);l--;)c[d]=c[d++-k];for(;8<=this.ag;)this.ag-=8,this.lb--;this.uc=d};
f.kG=function(a,b){var c=this.output,d=this.uc;this.pz=a;for(var e=c.length,h,k,l;256!==(h=sf(this,a));)if(256>h)d>=e&&(c=this.xk(),e=c.length),c[d++]=h;else for(h-=257,l=gf[h],0<hf[h]&&(l+=bf(this,hf[h])),h=sf(this,b),k=jf[h],0<kf[h]&&(k+=bf(this,kf[h])),d+l>e&&(c=this.xk(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.ag;)this.ag-=8,this.lb--;this.uc=d};
f.xk=function(){var a=new Uint8Array(this.uc-32768),b=this.uc-32768,c=this.output;a.set(c.subarray(32768,a.length));this.Bt.push(a);this.Sw+=a.length;c.set(c.subarray(b,b+32768));this.uc=32768;return c};
f.AG=function(a){var b=this.input.length/this.lb+1|0,c=this.input,d=this.output;a&&("number"===typeof a.Gz&&(b=a.Gz),"number"===typeof a.IF&&(b+=a.IF));2>b?(a=(c.length-this.lb)/this.pz[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.Zy=function(){var a=0,b=this.output,c=this.Bt,d,e=new Uint8Array(this.Sw+(this.uc-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.uc);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.uc;h<k;++h)e[a++]=b[h];this.Bt=[];return this.buffer=e};f.cG=function(){var a,b=this.uc;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var tf;for(tf=0;256>tf;++tf)for(var uf=tf,vf=7,uf=uf>>>1;uf;uf>>>=1)--vf;var wf=[],xf;for(xf=0;288>xf;xf++)switch(!0){case 143>=xf:wf.push([xf+48,8]);break;case 255>=xf:wf.push([xf-144+400,9]);break;case 279>=xf:wf.push([xf-256+0,7]);break;case 287>=xf:wf.push([xf-280+192,8]);break;default:throw"invalid literal: "+xf;}
var yf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(yf);function zf(){};function Af(a){this.input=a;this.lb=0;this.member=[]}
Af.prototype.aj=function(){for(var a=this.input.length;this.lb<a;){var b=new zf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.lb;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=We.Gt(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Ze(l,{index:d,bufferSize:e});b.data=e=d.aj();d=d.lb;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(We.Gt(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+We.Gt(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.lb=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function Bf(){Ee.call(this);this.u="parserMGZ";this.Qp=!1}w(Bf,Ee);
Bf.prototype.parse=function(a,b,c,d){A.fe(this.u+".parse");d&&(c=(new Af(new Uint8Array(c))).aj(),c=c.buffer);d=this.li(c);var e=[d.uv,d.vv,d.wv];b.Fa=e;var h=d.sD;b.Lh=h;c=d.min;var k=d.max;b.ie=b.Rb=c;b.cc=b.Qb=k;-Infinity==b.zb&&(b.zb=c);Infinity==b.Bb&&(b.Bb=k);c=Bd();M(c,0,d.Sf[0][0],d.Sf[1][0],d.Sf[2][0],0);M(c,1,d.Sf[0][1],d.Sf[1][1],d.Sf[2][1],0);M(c,2,d.Sf[0][2],d.Sf[1][2],d.Sf[2][2],0);M(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.Sf[3][p]-(c[p+0]*h[0]*k+
c[p+4]*h[1]*l+c[p+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.Je=c;d.Ke=Bd();Jd(d.Je,d.Ke);e=Ad(0,0,0,1);h=zd();Ld(c,e,h);k=Ad(1,1,1,1);e=zd();Ld(c,k,e);c=He(c,b.Fa);d.Jg=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.ld=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.mf=[c[0],c[2],c[4]];b.tf(d);A.Ed(this.u+".parse");b.Uf=Me(this,b);d=new Wd;d.Ra=b;d.xa=a;this.dispatchEvent(d)};
Bf.prototype.li=function(a){this._data=a;a={version:0,ZE:0,XE:0,IG:0,YE:0,uv:0,vv:0,wv:0,VJ:0,type:0,tG:0,UB:0,NN:null,Sf:null,sD:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.uv=this.h("uint");a.vv=this.h("uint");a.wv=this.h("uint");a.VJ=this.h("uint");a.type=this.h("uint");a.tG=this.h("uint");a.UB=this.h("ushort");if(0<a.UB){a.sD=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.Sf=b}this.Qa=
284;b=a.uv*a.vv*a.wv;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Fe(a.data);a.min=b[0];a.max=b[1];this.Qa+16<this._data.byteLength&&(a.ZE=this.h("float"),a.IG=this.h("float"),a.XE=this.h("float"),a.YE=this.h("float"));return a};v("X.parserMGZ",Bf);v("X.parserMGZ.prototype.parse",Bf.prototype.parse);function Cf(){Ee.call(this);this.u="parserLBL"}w(Cf,Ee);
Cf.prototype.parse=function(a,b,c){A.fe(this.u+".parse");var d=b.Bl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.h("uchar",c.byteLength),l=k.length,n=!1,p=0;for(c=1;c<l;c++)10==k[c-1]?(p=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Ge(k,p,c),10)),n=!1);k=b.gb.fb?b.gb.fb:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.gb.fb=k;b.gb.Qm=h;b.gb.J=!0;A.Ed(this.u+".parse");d=new Wd;d.Ra=b;d.xa=a;this.dispatchEvent(d)};v("X.parserLBL",Cf);v("X.parserLBL.prototype.parse",Cf.prototype.parse);function Df(){Ee.call(this);this.u="parserCRV";this.Qp=!1}w(Df,Ee);
Df.prototype.parse=function(a,b,c){A.fe(this.u+".parse");var d=b.Bl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.Qa=3;var e=this.h("uint");this.h("uint");this.h("uint");var h=0,k=0,l=0,n=0,p=0,m=0,q=0,t=0,s=0,z=0,y=0;c=Array(2);var I=Array(2),O=this.h("float",e),N;for(N=0;N<e;N++){var G=O[N];0==N&&(c[0]=I[0]=G);0<=G?(h++,n+=G):(k++,l+=G);s+=G;y++;I[0]=Math.max(G,I[0]);c[0]=Math.min(G,c[0]);O[N]=G}0!=h&&(p=n/h);0!=k&&(m=l/k);0!=y&&(z=s/y);for(y=s=l=n=0;y<
e;y++)G=O[y],N=0,0<=G?(N=Math.pow(G-p,2),n+=N):(N=Math.pow(G-m,2),l+=N),N=Math.pow(G-z,2),s+=N;1<h&&(q=Math.sqrt(n/(h-1)));1<k&&(t=Math.sqrt(l/(k-1)));c[1]=m-2.5*t;I[1]=p+2.5*q;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=O[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.gb.ie=c[1];b.gb.cc=I[1];-Infinity==b.gb.zb&&(b.gb.zb=c[1]);Infinity==b.gb.Bb&&(b.gb.Bb=I[1]);b.gb.fb=O;b.gb.Qm=h;b.gb.J=!0;A.Ed(this.u+".parse");d=new Wd;d.Ra=b;d.xa=a;this.dispatchEvent(d)};v("X.parserCRV",Df);
v("X.parserCRV.prototype.parse",Df.prototype.parse);function Ef(a,b){var c,d;this.input=a;this.lb=0;if(b||!(b={}))b.index&&(this.lb=b.index),b.verify&&(this.CM=b.verify);c=a[this.lb++];d=a[this.lb++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.VB=new Ze(a,{index:this.lb,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Ef.prototype.aj=function(){var a=this.input,b;b=this.VB.aj();this.lb=this.VB.lb;if(this.CM){var a=(a[this.lb++]<<24|a[this.lb++]<<16|a[this.lb++]<<8|a[this.lb++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Ff(){Ee.call(this);this.u="parserRAW"}w(Ff,Ee);
Ff.prototype.parse=function(a,b,c,d){A.fe(this.u+".parse");d&&(c=(new Ef(new Uint8Array(c))).aj(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Fe(d.data);c=e[0];e=e[1];d.min=b.ie=b.Rb=c;d.max=b.cc=b.Qb=e;-Infinity==b.zb&&(b.zb=c);Infinity==b.Bb&&(b.Bb=e);e=Cd();d.Je=e;d.Ke=Cd();var h=Ad(0,0,0,1);c=zd();Ld(e,h,c);var k=Ad(1,1,1,1),h=zd();Ld(e,k,h);e=He(e,b.Fa);d.Jg=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.ld=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.mf=[e[0],e[2],e[4]];b.tf(d);A.Ed(this.u+".parse");b.Uf=
Me(this,b);d=new Wd;d.Ra=b;d.xa=a;this.dispatchEvent(d)};v("X.parserRAW",Ff);v("X.parserRAW.prototype.parse",Ff.prototype.parse);function Gf(){Ee.call(this);this.u="parserIMAGE"}w(Gf,Ee);Gf.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Tc(h,"load",this.qL.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};Gf.prototype.qL=function(a,b,c){b.Uf=a;b.Mi=null;a=new Wd;a.Ra=c;a.xa=b;this.dispatchEvent(a)};v("X.parserIMAGE",Gf);v("X.parserIMAGE.prototype.parse",Gf.prototype.parse);function Hf(){Ee.call(this);this.u="parserLUT"}w(Hf,Ee);
Hf.prototype.parse=function(a,b,c){A.fe(this.u+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Ge(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.Ed(this.u+".parse");c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};
v("X.parserLUT",Hf);v("X.parserLUT.prototype.parse",Hf.prototype.parse);function If(){Ee.call(this);this.u="parserMRC"}w(If,Ee);
If.prototype.parse=function(a,b,c){A.fe(this.u+".parse");c=this.li(c);var d=c.min,e=c.max;b.Fa=[c.so,c.uo,c.vo];b.Lh=[c.xlen/c.tB,c.yD/c.uB,c.AD/c.vB];b.ie=b.Rb=d;b.cc=b.Qb=e;-Infinity==b.zb&&(b.zb=d);Infinity==b.Bb&&(b.Bb=e);e=Bd();M(e,3,0,0,0,1);M(e,0,-1,0,0,c.so);M(e,1,0,0,-1,c.uo);M(e,2,0,-1,0,c.vo);c.Je=e;c.Ke=Bd();Jd(c.Je,c.Ke);var h=Ad(0,0,0,1),d=zd();Ld(e,h,d);var k=Ad(1,1,1,1),h=zd();Ld(e,k,h);k=[c.so,c.uo,c.vo];e=He(e,k);c.Jg=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.ld=[e[1]+e[0]+1,e[3]-e[2]+1,
e[5]-e[4]+1];c.mf=[e[0],e[2],e[4]];b.Fa=k;b.tf(c);b.Uf=Me(this,b);A.Ed(this.u+".parse");c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};
If.prototype.li=function(a){this._data=a;a={so:0,uo:0,vo:0,mode:0,gQ:0,hQ:0,iQ:0,tB:0,uB:0,vB:0,xlen:0,yD:0,AD:0,alpha:0,beta:0,gamma:0,BJ:0,CJ:0,DJ:0,zt:0,eq:0,ik:0,VP:0,next:0,iG:0,extra:null,WJ:0,YJ:0,extra:null,aJ:0,TP:0,YI:0,lens:0,TJ:0,UJ:0,AM:0,BM:0,sM:null,FM:0,HM:0,IM:0,GP:0,wQ:0,FL:0,XJ:0,data:null,min:Infinity,max:-Infinity,cQ:0,WC:null,vQ:null,pQ:null,orientation:null,fQ:null};this.Qa=0;a.so=this.h("sint");a.uo=this.h("sint");a.vo=this.h("sint");a.mode=this.h("sint");var b=a.so*a.uo*a.vo;
this.Qa=1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.Qa=28;a.tB=this.h("sint");a.uB=this.h("sint");a.vB=this.h("sint");a.xlen=this.h("float");a.yD=this.h("float");a.AD=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.BJ=this.h("sint");a.CJ=this.h("sint");a.DJ=this.h("sint");a.zt=this.h("float");a.eq=this.h("float");a.ik=this.h("float");a.UP=this.h("sint");a.next=this.h("sint");a.iG=this.h("short");a.WJ=this.h("short");a.YJ=this.h("short");a.aJ=this.h("sint");a.SP=this.h("sint");a.YI=this.h("short");a.lens=this.h("short");a.TJ=this.h("short");a.UJ=this.h("short");a.AM=this.h("short");a.BM=this.h("short");a.sM=this.h("float",6);this.Qa=196;a.FM=this.h("float");a.HM=
this.h("float");a.IM=this.h("float");this.Qa=216;a.FL=this.h("float");a.XJ=this.h("sint");a.YP=this.h("schar",10);if(0!=a.next)switch(this.Qa=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.ik-(a.eq-a.ik)?(a.min=a.zt,a.max=a.ik+(a.ik-a.zt)):(a.min=a.ik-(a.eq-a.ik),a.max=a.eq);return a};v("X.parserMRC",If);v("X.parserMRC.prototype.parse",If.prototype.parse);function Jf(){Ee.call(this);this.u="parserNRRD"}w(Jf,Ee);
Jf.prototype.parse=function(a,b,c){A.fe(this.u+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ge(c,0,k-2);h=k+1;break}var l,n,p,m,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.nJ=!0:!l.match(/^#/)&&(m=l.match(/(.*):(.*)/))&&(n=m[1].trim(),l=m[2].trim(),(p=this.EG[n])?p.call(this,l):this[n]=l);if(!this.nJ)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.ic&&(this.ic=[new L(1,0,0),new L(0,1,0),new L(0,0,1)],this.Dw))for(d=[],m=0;2>=m;m++)d.push(isNaN(this.Dw[m])?void 0:this.ic[m].scale(this.Dw[m]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new Af(new Uint8Array(h))).aj();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.Ci(h);m=Fe(c.data);h=c.min=m[0];m=c.max=m[1];b.ie=b.Rb=h;b.cc=b.Qb=m;b.Fa=[this.yw[0],this.yw[1],this.yw[2]];d=
(new L(this.ic[0][0],this.ic[0][1],this.ic[0][2])).sg();e=(new L(this.ic[1][0],this.ic[1][1],this.ic[1][2])).sg();k=(new L(this.ic[2][0],this.ic[2][1],this.ic[2][2])).sg();b.Lh=[d,e,k];-Infinity==b.zb&&(b.zb=h);Infinity==b.Bb&&(b.Bb=m);d=m=1;"left-posterior-superior"==this.WC&&(d=m=-1);h=Cd();M(h,0,m*this.ic[0][0],m*this.ic[1][0],m*this.ic[2][0],m*this.Cw[0]);M(h,1,d*this.ic[0][1],d*this.ic[1][1],d*this.ic[2][1],d*this.Cw[1]);M(h,2,1*this.ic[0][2],1*this.ic[1][2],1*this.ic[2][2],1*this.Cw[2]);M(h,
3,0,0,0,1);c.Je=h;c.Ke=Bd();Jd(c.Je,c.Ke);d=Ad(0,0,0,1);m=zd();Ld(h,d,m);e=Ad(1,1,1,1);d=zd();Ld(h,e,d);h=He(h,b.Fa);c.Jg=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];c.ld=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.mf=[h[0],h[2],h[4]];b.tf(c);A.Ed(this.u+".parse");b.Uf=Me(this,b);c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};
Jf.prototype.EG={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Ci=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Ci=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Ci=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Ci=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Ci=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Ci=Uint32Array;break;case "float":this.Ci=Float32Array;break;case "double":this.Ci=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.OP=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.bj=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.yw=e},space:function(a){return this.WC=a},"space origin":function(a){return this.Cw=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.ic=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.Dw=e}};v("X.parserNRRD",Jf);v("X.parserNRRD.prototype.parse",Jf.prototype.parse);function Kf(){Ee.call(this);this.u="parserSTL"}w(Kf,Ee);
Kf.prototype.parse=function(a,b,c){A.fe(this.u+".parse");this._data=c;var d=b.G,e=b.fa;if("solid"==Ge(this.h("uchar",5))){b.G=d=new cd(c.byteLength);b.fa=e=new cd(c.byteLength);var h=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,p;for(p=0;p<c;p++)if(10==e[p]){if(k||l){var m=Ge(e,n,p).split(" "),l=parseFloat(m[0]),q=parseFloat(m[1]),m=parseFloat(m[2]);k?(d.add(l,q,m),d.add(l,q,m),d.add(l,q,m)):h.add(l,q,m);l=k=!1}}else 32==e[p-1]&&(102==e[p]?(n=p+=13,k=!0):118==e[p]&&(n=p+=7,
l=!0))}else for(this.Qa=80,h=this.h("uint"),b.G=d=new cd(9*h),b.fa=e=new cd(9*h),c=c=0;c<h;c++)k=this.h("float",12),n=k[0],p=k[1],l=k[2],e.add(n,p,l),e.add(n,p,l),e.add(n,p,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.Qa+=2;A.Ed(this.u+".parse");h=new Wd;h.Ra=b;h.xa=a;this.dispatchEvent(h)};v("X.parserSTL",Kf);v("X.parserSTL.prototype.parse",Kf.prototype.parse);function Lf(){Ee.call(this);this.u="parserNII"}w(Lf,Ee);
Lf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new Af(new Uint8Array(d))).aj(),d=d.buffer);c=this.li(d);d=c.min;e=c.max;b.ie=b.Rb=d;b.cc=b.Qb=e;-Infinity==b.zb&&(b.zb=d);Infinity==b.Bb&&(b.Bb=e);d=Bd();M(d,3,0,0,0,1);if(0<c.fw){var e=0,h=c.RB,k=c.SB,l=c.TB,n=1,p=1,m=1,q=c.OB,t=c.PB,s=c.QB,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.vg[1]&&(n=c.vg[1]);
0<c.vg[2]&&(p=c.vg[2]);0<c.vg[2]&&(m=c.vg[3]);0>c.vg[0]&&(m=-m);M(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*p,2*(h*l+e*k)*m,q);M(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*p,2*(k*l-e*h)*m,t);M(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*p,(e*e+l*l-k*k-h*h)*m,s)}else 0<c.OC?(e=c.XC,h=c.YC,k=c.ZC,M(d,0,e[0],e[1],e[2],e[3]),M(d,1,h[0],h[1],h[2],h[3]),M(d,2,k[0],k[1],k[2],k[3])):0==c.fw?(M(d,0,c.vg[1],0,0,0),M(d,1,0,c.vg[2],0,0),M(d,2,0,0,c.vg[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.Je=d;c.Ke=Bd();Jd(c.Je,c.Ke);
h=Ad(0,0,0,1);e=zd();Ld(d,h,e);k=Ad(1,1,1,1);h=zd();Ld(d,k,h);k=[c.bj[1],c.bj[2],c.bj[3]];d=He(d,k);c.Jg=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.ld=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.mf=[d[0],d[2],d[4]];b.Fa=k;b.tf(c);b.Uf=Me(this,b);c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};
Lf.prototype.li=function(a){this._data=a;a={$L:0,data_type:null,jG:null,CG:0,NL:0,wL:0,nG:null,bj:null,hJ:0,iJ:0,jJ:0,fJ:0,Wt:0,XF:0,eM:0,vg:null,uD:0,ML:0,LL:0,dM:0,bM:null,GM:null,ZF:0,$F:0,cM:0,uM:0,DI:0,EI:0,lG:null,UF:null,fw:0,OC:0,RB:0,SB:0,TB:0,OB:0,PB:0,QB:0,XC:null,YC:null,ZC:null,gJ:null,magic:null,data:null,min:Infinity,max:-Infinity};a.$L=this.h("uint");a.data_type=this.h("uchar",10);a.jG=this.h("uchar",18);a.CG=this.h("uint");a.NL=this.h("ushort");a.wL=this.h("uchar");a.nG=this.h("uchar");
a.bj=this.h("ushort",8);a.hJ=this.h("float");a.iJ=this.h("float");a.jJ=this.h("float");a.fJ=this.h("ushort");a.Wt=this.h("ushort");a.XF=this.h("ushort");a.eM=this.h("ushort");a.vg=this.h("float",8);a.uD=this.h("float");a.ML=this.h("float");a.LL=this.h("float");a.dM=this.h("ushort");a.bM=this.h("uchar");a.GM=this.h("uchar");a.ZF=this.h("float");a.$F=this.h("float");a.cM=this.h("float");a.uM=this.h("float");a.DI=this.h("uint",1);a.EI=this.h("uint",1);a.lG=this.h("uchar",80);a.UF=this.h("uchar",24);
a.fw=this.h("ushort");a.OC=this.h("ushort");a.RB=this.h("float");a.SB=this.h("float");a.TB=this.h("float");a.OB=this.h("float");a.PB=this.h("float");a.QB=this.h("float");a.XC=this.h("float",4);a.YC=this.h("float",4);a.ZC=this.h("float",4);a.gJ=this.h("uchar",16);a.magic=this.h("uchar",4);this.Qa=parseInt(a.uD,10);var b=a.bj[1]*a.bj[2]*a.bj[3];switch(a.Wt){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",
b);break;case 32:a.data=this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.Wt);}b=Fe(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Lf);v("X.parserNII.prototype.parse",Lf.prototype.parse);function Mf(){Ee.call(this);this.u="parserTRK"}w(Mf,Ee);
Mf.prototype.parse=function(a,b,c){A.fe(this.u+".parse");var d=b.G,e=b.fa,h=b.Mc;this._data=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var n=this.h("uint");this.h("uint");var p=
this.h("uint"),m=[],q=[],t=Infinity,s=-Infinity,z=null,y=null,I=null,O=null,e=d=null,N=this.h("uint",(this._data.byteLength-1E3)/4);this.Qa=p;for(var G=this.h("float",(this._data.byteLength-1E3)/4),T=0,p=h=0;p<n;p++){for(var aa=N[T],V=new cd(3*aa),wa=0,oa=0;oa<aa;oa++){var ya=G[T+3*oa+oa*l+1],Oa=G[T+3*oa+oa*l+2],Ja=G[T+3*oa+oa*l+3],ya=ya/k[0],Oa=Oa/k[1],Ja=Ja/k[2];V.add(ya,Oa,Ja);if(0<oa)var Pa=V.get(oa-1),wa=wa+Math.sqrt(Math.pow(ya-Pa[0],2)+Math.pow(Oa-Pa[1],2)+Math.pow(Ja-Pa[2],2));oa<aa-1&&(h+=
6)}T+=3*aa+aa*l+1;oa=V.Yf;aa=V.Vf;ya=V.Zf;Oa=V.Wf;Ja=V.$f;Pa=V.Xf;if(!z||oa<z)z=oa;if(!y||aa>y)y=aa;if(!I||ya<I)I=ya;if(!O||Oa>O)O=Oa;if(!d||Ja<d)d=Ja;if(!e||Pa>e)e=Pa;m.push(V);q.push(wa)}k=(z+y)/2;I=(I+O)/2;l=(d+e)/2;O=new Float32Array(h);b.G=d=new cd(h);b.fa=e=new cd(h);b.Mc=h=new cd(h);for(p=z=0;p<n;p++)for(y=m[p],N=y.count,wa=q[p],t=Math.min(t,wa),s=Math.max(s,wa),oa=0;oa<N-1;oa++){T=y.get(oa);G=y.get(oa+1);d.add(T[0],T[1],T[2]);d.add(G[0],G[1],G[2]);var V=T[0]-k,aa=T[1]-I,ya=T[2]-l,Oa=Math.sqrt(V*
V+aa*aa+ya*ya),Ja=G[0]-k,Pa=G[1]-I,ka=G[2]-l,za=Math.sqrt(Ja*Ja+Pa*Pa+ka*ka);e.add(V/Oa,aa/Oa,ya/Oa);e.add(Ja/za,Pa/za,ka/za);G=[Math.abs(G[0]-T[0]),Math.abs(G[1]-T[1]),Math.abs(G[2]-T[2])];T=Math.sqrt(G[0]*G[0]+G[1]*G[1]+G[2]*G[2]);G[0]/=T;G[1]/=T;G[2]/=T;h.add(G[0],G[1],G[2]);h.add(G[0],G[1],G[2]);O[z++]=wa;O[z++]=wa;O[z++]=wa;O[z++]=wa;O[z++]=wa;O[z++]=wa}b.Ld="LINES";n=new Ud;n.ie=t;n.cc=s;n.zb=t;n.Bb=s;n.Qm=O;n.cy=!1;n.J=!0;b.gb=n;t=!1;for(p=0;16>p;p++)if(0!=c[p]){t=!0;break}!1==t&&(c[0]=c[5]=
c[10]=c[15]=1);A.Ed(this.u+".parse");A.v.Uw(c,b.lc.Ab);c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};v("X.parserTRK",Mf);v("X.parserTRK.prototype.parse",Mf.prototype.parse);function Nf(){Ee.call(this);this.u="parserOBJ"}w(Nf,Ee);
Nf.prototype.parse=function(a,b,c){A.fe(this.u+".parse");this._data=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.G=new cd(c);b.fa=new cd(c);var h=b.G,k=b.fa,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var p=Ge(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var m=e[parseInt(p[1],10)-1],l=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];h.add(m[0],m[1],m[2]);h.add(l[0],l[1],l[2]);h.add(p[0],p[1],p[2]);m=new L(m[0],m[1],
m[2]);p=new L(p[0],p[1],p[2]);l=sd((new L(l[0],l[1],l[2])).Hc(m),p.Hc(m));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.Ed(this.u+".parse");c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};v("X.parserOBJ",Nf);v("X.parserOBJ.prototype.parse",Nf.prototype.parse);function Of(){bd.call(this);this.u="loader";this.zl=new id;this.cn=0}w(Of,bd);function Pf(a,b){a.cn+=b/a.zl.jg()/3;a.cn=Math.min(1,a.cn);var c=new xe;c.ck=a.cn;a.dispatchEvent(c)}function Qf(a){a=a.ja.Vp;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Rf))throw Error("The "+b+" file format is not supported.");return[a,b,Rf[b][0],Rf[b][1],Rf[b][2]]}
Of.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!ld(this.zl.Cb,a.nd)||this.zl.get(a.nd)){this.zl.set(a.nd,!1);var c=Qf(a)[0];if(null!=a.Pg)this.parse(null,a,b);else{var d=new XMLHttpRequest;H(d,"abort",this.Fz.bind(this,d,a,b));H(d,"error",this.Fz.bind(this,d,a,b));H(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Of.prototype.parse=function(a,b,c){Pf(this,1);setTimeout(function(){var d=Qf(b),e=d[3],d=new d[2];Tc(d,ge,this.complete.bind(this));var h=b.Pg;null==h&&(h=a.response,b.Pg=h);d.parse(b,c,h,e)}.bind(this),100)};Of.prototype.complete=function(a){Pf(this,1);setTimeout(function(){var b=a.xa,c=a.Ra;b.ja.J=!1;b.J=!0;c.ga();this.zl.set(b.nd,!0)}.bind(this),100)};Of.prototype.Fz=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Rf={OBJ:[Nf,null],OFF:[Ne,null],STL:[Kf,null],VTK:[Te,null],TRK:[Mf,null],MRC:[If,null],ST:[If,null],FSM:[Ve,null],INFLATED:[Ve,null],SMOOTHWM:[Ve,null],SPHERE:[Ve,null],PIAL:[Ve,null],ORIG:[Ve,null],NRRD:[Jf,null],NII:[Lf,null],GZ:[Lf,null],DCM:[Se,null],DICOM:[Se,null],"":[Se,null],CRV:[Df,null],LABEL:[Cf,null],MGH:[Bf,!1],MGZ:[Bf,!0],RAW:[Ff,!1],RZ:[Ff,!0],TXT:[Hf,null],LUT:[Hf,null],PNG:[Gf,"png"],JPG:[Gf,"jpeg"],JPEG:[Gf,"jpeg"],GIF:[Gf,"gif"]};function Sf(){Ee.call(this);this.u="parserIMA"}w(Sf,Ee);
Sf.prototype.parse=function(a,b,c){b.Bh={};b.Bh.qo=0;this.li(c,b);if(null==b.ja.length||b.Ba.length==b.ja.length){b.Bh.qo=b.ja.length;var d={};c={};for(var e=0;e<b.Ba.length;e++)d.hasOwnProperty(b.Ba[e].series_instance_uid)||(d[b.Ba[e].series_instance_uid]=[],c[b.Ba[e].series_instance_uid]={}),c[b.Ba[e].series_instance_uid].hasOwnProperty(b.Ba[e].sop_instance_uid)||(c[b.Ba[e].series_instance_uid][b.Ba[e].sop_instance_uid]=!0,d[b.Ba[e].series_instance_uid].push(b.Ba[e]));var h=Object.keys(d)[0],e=
d[h],k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new L(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new L(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=sd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],p=d[1]-n[1],m=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+p*p+
m*m);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,q=e[k-1].image_position_patient,h=q[0]-n[0],p=q[1]-n[1],m=q[2]-n[2],h=Math.sqrt(h*h+p*p+m*m),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;q=null;switch(e[0].Si){case 8:q=new Uint8Array(h);break;case 16:q=new Uint16Array(h);break;case 32:q=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Lh=e[0].pixel_spacing;for(var t=0;t<k;t++){var s=e[t].data,h=0;switch(l){case "image_position_patient":h=e[t].image_position_patient[0]-e[0].image_position_patient[0];p=e[t].image_position_patient[1]-
e[0].image_position_patient[1];m=e[t].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+p*p+m*m)/e[0].pixel_spacing[2];break;case "instance_number":h=e[t].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}q.set(s,h*n)}c.data=q;b._data=q;b.Fa=[e[0].columns,e[0].rows,d];c.oG=b.Fa;d=Fe(q);k=d[0];d=d[1];c.min=b.ie=b.Rb=k;c.max=b.cc=b.Qb=d;-Infinity==b.zb&&(b.zb=k);Infinity==b.Bb&&(b.Bb=d);p=e[0].image_position_patient;
k=Bd();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new L(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new L(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=sd(d,h);M(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);M(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);M(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);M(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new L(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new L(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=sd(d,h),M(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),M(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),M(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(M(k,0,1,0,0,-p[0]),M(k,1,0,-1,-0,-p[1]),M(k,2,0,0,1,p[2]));M(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Je=k;c.Ke=Bd();Jd(c.Je,c.Ke);l=Ad(0,0,0,1);e=zd();Ld(k,l,e);l=Ad(1,1,1,1);d=zd();Ld(k,l,d);c.Jg=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=He(k,[b.Fa[0],b.Fa[1],b.Fa[2]]);c.ld=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.mf=[e[0],e[2],e[4]];b.tf(c);b.Uf=Me(this,b)}c=new Wd;c.Ra=b;c.xa=a;this.dispatchEvent(c)};
Sf.prototype.se=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Sf.prototype.li=function(a,b){this._data=a;if("undefined"==typeof b.Ba||null==b.Ba)b.Ba=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=[[8,4368],[8,4384]],m=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],m=!1,q=0,t=p.length;q<t;q++)if(h===p[q][0]&&k===p[q][1]){m=!0;break}if(m)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Sf.prototype.se(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Si=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Sf.prototype.se(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Sf.prototype.se(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Sf.prototype.se(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Sf.prototype.se(d,e,l,n)}break;case 16:switch(k){case 8720:for(q=0;q<n/2;q++)e++;break;default:e=
Sf.prototype.se(d,e,l,n)}break;default:e=Sf.prototype.se(d,e,l,n)}}switch(c.Si){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Qa=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Si){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.Ba.push(c);return b};v("X.parserIMA",Sf);
v("X.parserIMA.prototype.parse",Sf.prototype.parse);var Tf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Uf(a){if(Vf){Vf=!1;var b=ca.location;if(b){var c=b.href;if(c&&(c=(c=Uf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Vf=!0,Error();}}return a.match(Tf)}var Vf=ic;function Wf(a,b){$c.call(this);this.pg=a||1;this.Dm=b||ca;this.Ct=ua(this.rM,this);this.av=xa()}w(Wf,$c);f=Wf.prototype;f.enabled=!1;f.O=null;f.setInterval=function(a){this.pg=a;this.O&&this.enabled?(this.stop(),this.start()):this.O&&this.stop()};
f.rM=function(){if(this.enabled){var a=xa()-this.av;0<a&&a<.8*this.pg?this.O=this.Dm.setTimeout(this.Ct,this.pg-a):(this.O&&(this.Dm.clearTimeout(this.O),this.O=null),this.dispatchEvent(Xf),this.enabled&&(this.O=this.Dm.setTimeout(this.Ct,this.pg),this.av=xa()))}};f.start=function(){this.enabled=!0;this.O||(this.O=this.Dm.setTimeout(this.Ct,this.pg),this.av=xa())};f.stop=function(){this.enabled=!1;this.O&&(this.Dm.clearTimeout(this.O),this.O=null)};f.f=function(){Wf.d.f.call(this);this.stop();delete this.Dm};
var Xf="tick";function Yf(a,b,c){if(la(a))c&&(a=ua(a,c));else if(a&&"function"==typeof a.handleEvent)a=ua(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ca.setTimeout(a,b||0)};function Zf(a){return"function"==typeof a.jg?a.jg():ia(a)||r(a)?a.length:nb(a)}function $f(a){if("function"==typeof a.$h)return a.$h();if(r(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ob(a)}function ag(a){if("function"==typeof a.Pn)return a.Pn();if("function"!=typeof a.$h){if(ia(a)||r(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return pb(a)}}
function bg(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ia(a)||r(a))E(a,b,void 0);else for(var c=ag(a),d=$f(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function cg(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ia(a)||r(a))return Fb(a,b,void 0);for(var c=ag(a),d=$f(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function dg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function eg(){}eg.prototype.Ty=null;function fg(a){var b;(b=a.Ty)||(b={},gg(a)&&(b[0]=!0,b[1]=!0),b=a.Ty=b);return b};var hg;function ig(){}w(ig,eg);function jg(a){return(a=gg(a))?new ActiveXObject(a):new XMLHttpRequest}function gg(a){if(!a.PA&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.PA=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.PA}hg=new ig;function kg(a){this.Cb=new id;a&&this.st(a)}function lg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}f=kg.prototype;f.jg=function(){return this.Cb.jg()};f.add=function(a){this.Cb.set(lg(a),a)};f.st=function(a){a=$f(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.yg=function(a){a=$f(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.Cb.remove(lg(a))};f.clear=function(){this.Cb.clear()};f.lm=function(){return this.Cb.lm()};
f.contains=function(a){a=lg(a);return ld(this.Cb.Cb,a)};f.UA=function(a){var b=new kg;a=$f(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.$h=function(){return this.Cb.$h()};f.clone=function(){return new kg(this)};f.Tl=function(a){return this.jg()==Zf(a)&&mg(this,a)};
function mg(a,b){var c=Zf(b);if(a.jg()>c)return!1;!(b instanceof kg)&&5<c&&(b=new kg(b));return cg(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.Ot?c.Ot(a):ia(c)||r(c)?Ib(c,a):qb(c,a)})};function ng(a){var b;b||(b=og(a||arguments.callee.caller,[]));return b}
function og(a,b){var c=[];if(Ib(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pg(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=pg(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(og(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pg(a){if(qg[a])return qg[a];a=String(a);if(!qg[a]){var b=/function ([^\(]+)/.exec(a);qg[a]=b?b[1]:"[Anonymous]"}return qg[a]}var qg={};function rg(a,b,c,d,e){this.reset(a,b,c,d,e)}rg.prototype.Dz=null;rg.prototype.Cz=null;var sg=0;rg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||sg++;d||xa();this.no=a;this.SJ=b;delete this.Dz;delete this.Cz};rg.prototype.qC=function(a){this.no=a};function tg(a){this.Pk=a;this.KA=this.Nc=this.no=this.Ua=null}function ug(a,b){this.name=a;this.value=b}ug.prototype.toString=function(){return this.name};var vg=new ug("SEVERE",1E3),wg=new ug("CONFIG",700),xg=new ug("FINE",500);f=tg.prototype;f.getName=function(){return this.Pk};f.getParent=function(){return this.Ua};f.ou=function(){this.Nc||(this.Nc={});return this.Nc};f.qC=function(a){this.no=a};
function yg(a){if(a.no)return a.no;if(a.Ua)return yg(a.Ua);fb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=yg(this).value)for(la(b)&&(b=b()),a=this.eA(a,b,c,tg.prototype.log),b="log:"+a.SJ,ca.console&&(ca.console.timeStamp?ca.console.timeStamp(b):ca.console.markTimeline&&ca.console.markTimeline(b)),ca.msWriteProfilerMark&&ca.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.KA)for(var e=0,h=void 0;h=c.KA[e];e++)h(d);b=b.getParent()}};
f.eA=function(a,b,c,d){a=new rg(a,String(b),this.Pk);if(c){a.Dz=c;var e;d=d||tg.prototype.eA;try{var h;var k=ea("window.location.href");if(r(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.aQ||"Not available"}catch(p){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ca.$googDebugFname||k}catch(m){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+Ma(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Ma(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ma(ng(d)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}a.Cz=e}return a};f.Vo=function(a){this.Ua=a};var zg={},Ag=null;
function Bg(a){Ag||(Ag=new tg(""),zg[""]=Ag,Ag.qC(wg));var b;if(!(b=zg[a])){b=new tg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Bg(a.substr(0,c));c.ou()[d]=b;b.Vo(c);zg[a]=b}return b};function Cg(a,b){a&&a.log(xg,b,void 0)};function Dg(a){$c.call(this);this.headers=new id;this.Es=a||null;this.Oi=!1;this.Ds=this.Ca=null;this.lo=this.$A=this.or="";this.Ik=this.Nu=this.Zq=this.iu=!1;this.np=0;this.us=null;this.bC=Eg;this.zs=this.EM=!1}w(Dg,$c);var Eg="",Fg=Dg.prototype,Gg=Bg("goog.net.XhrIo");Fg.Cf=Gg;var Hg=/^https?$/i,Ig=["POST","PUT"],Jg=[];function Kg(a,b){var c=new Dg;Jg.push(c);b&&c.D("complete",b);c.ev("ready",c.bG);c.send(a,void 0,void 0,void 0)}f=Dg.prototype;f.bG=function(){this.g();Lb(Jg,this)};
f.send=function(a,b,c,d){if(this.Ca)throw Error("[goog.net.XhrIo] Object is active with another request="+this.or+"; newUri="+a);b=b?b.toUpperCase():"GET";this.or=a;this.lo="";this.$A=b;this.iu=!1;this.Oi=!0;this.Ca=this.Es?jg(this.Es):jg(hg);this.Ds=this.Es?fg(this.Es):fg(hg);this.Ca.onreadystatechange=ua(this.EB,this);try{Cg(this.Cf,Lg(this,"Opening Xhr")),this.Nu=!0,this.Ca.open(b,String(a),!0),this.Nu=!1}catch(e){Cg(this.Cf,Lg(this,"Error opening Xhr: "+e.message));Mg(this,e);return}a=c||"";var h=
this.headers.clone();d&&bg(d,function(a,b){h.set(b,a)});d=Gb(h.Pn());c=ca.FormData&&a instanceof ca.FormData;!Ib(Ig,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.Ca.setRequestHeader(b,a)},this);this.bC&&(this.Ca.responseType=this.bC);"withCredentials"in this.Ca&&(this.Ca.withCredentials=this.EM);try{Ng(this),0<this.np&&(this.zs=Og(this.Ca),Cg(this.Cf,Lg(this,"Will abort after "+this.np+"ms if incomplete, xhr2 "+this.zs)),this.zs?(this.Ca.timeout=
this.np,this.Ca.ontimeout=ua(this.iD,this)):this.us=Yf(this.iD,this.np,this)),Cg(this.Cf,Lg(this,"Sending request")),this.Zq=!0,this.Ca.send(a),this.Zq=!1}catch(k){Cg(this.Cf,Lg(this,"Send error: "+k.message)),Mg(this,k)}};function Og(a){return F&&pc(9)&&u(a.timeout)&&da(a.ontimeout)}function Hb(a){return"content-type"==a.toLowerCase()}f.iD=function(){"undefined"!=typeof ba&&this.Ca&&(this.lo="Timed out after "+this.np+"ms, aborting",Cg(this.Cf,Lg(this,this.lo)),this.dispatchEvent("timeout"),this.abort(8))};
function Mg(a,b){a.Oi=!1;a.Ca&&(a.Ik=!0,a.Ca.abort(),a.Ik=!1);a.lo=b;Pg(a);Qg(a)}function Pg(a){a.iu||(a.iu=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Ca&&this.Oi&&(Cg(this.Cf,Lg(this,"Aborting")),this.Oi=!1,this.Ik=!0,this.Ca.abort(),this.Ik=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Qg(this))};f.f=function(){this.Ca&&(this.Oi&&(this.Oi=!1,this.Ik=!0,this.Ca.abort(),this.Ik=!1),Qg(this,!0));Dg.d.f.call(this)};
f.EB=function(){this.rk||(this.Nu||this.Zq||this.Ik?Rg(this):this.GK())};f.GK=function(){Rg(this)};
function Rg(a){if(a.Oi&&"undefined"!=typeof ba)if(a.Ds[1]&&4==Sg(a)&&2==Tg(a))Cg(a.Cf,Lg(a,"Local request error detected and ignored"));else if(a.Zq&&4==Sg(a))Yf(a.EB,0,a);else if(a.dispatchEvent("readystatechange"),4==Sg(a)){Cg(a.Cf,Lg(a,"Request complete"));a.Oi=!1;try{var b=Tg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Uf(String(a.or))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Hg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Sg(a)?a.Ca.statusText:""}catch(n){Cg(a.Cf,"Can not get status: "+n.message),l=""}a.lo=l+" ["+Tg(a)+"]";Pg(a)}}finally{Qg(a)}}}
function Qg(a,b){if(a.Ca){Ng(a);var c=a.Ca,d=a.Ds[0]?fa:null;a.Ca=null;a.Ds=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.Cf)&&c.log(vg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ng(a){a.Ca&&a.zs&&(a.Ca.ontimeout=null);u(a.us)&&(ca.clearTimeout(a.us),a.us=null)}f.fh=function(){return!!this.Ca};function Sg(a){return a.Ca?a.Ca.readyState:0}function Tg(a){try{return 2<Sg(a)?a.Ca.status:-1}catch(b){return-1}}
function Lg(a,b){return b+" ["+a.$A+" "+a.or+" "+Tg(a)+"]"};/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function P(){}v("gxnat",P);P.JPEG_CONVERT_SUFFIX="?format=image/jpeg";P.JG={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};P.Ix="?format=zip";P.fi=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);P.get(a,b,"json")};
P.get=function(a,b,c){Kg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.Ca?dg(a.Ca.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Ca?a.Ca.responseText:""}catch(h){Cg(a.Cf,"Can not get responseText: "+h.message),e=""}b(e)}})};
P.Br=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(P.Br.eJ&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(P.Br.eJ&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
P.gM=function(a,b){var c=[],d={},e=[],h={};E(a,function(a){h=a;E(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(P.eQ);E(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",P.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",P.JG);v("gxnat.ZIP_SUFFIX",P.Ix);v("gxnat.jsonGet",P.fi);v("gxnat.get",P.get);v("gxnat.naturalSort",P.Br);v("gxnat.sortXnatPropertiesArray",P.gM);function Ug(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Vg(this)}w(Ug,wc);v("gxnat.Path",Ug);
function Wg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Xg(a){for(var b=0,c=Yg.length,b=0;b<c;b++)a(Yg[b],b)}function Zg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Yg=["projects","subjects","experiments",["scans","resources"],"files"];
function Vg(a){var b,c,d,e=!1;Xg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.Yt=Yg[k-1],e=!0);else null!=this[a]||e||(this.Yt=Yg[k-1],e=!0)}.bind(a))}Ug.prototype.Eq=function(){null!=this.Yt||Vg(this);return this.Yt};
Ug.prototype.mi=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=Yg.length,k=0,d=0;d<h;d++){c=Yg[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Ug.prototype.g=function(){Ug.d.g.call(this);D(this)};v("gxnat.Path.getQueryPrefix",Wg);v("gxnat.Path.forEachXnatLevel",Xg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Ug(a),d=new Ug(b),e=void 0;Xg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",Zg);v("gxnat.Path.xnatLevelOrder",Yg);v("gxnat.Path.prototype.getDeepestLevel",Ug.prototype.Eq);v("gxnat.Path.prototype.pathByLevel",Ug.prototype.mi);v("gxnat.Path.prototype.dispose",Ug.prototype.g);function $g(a){this.Ud=new Ug(a);this.projects=[];this[ah]={};this[bh]={};this[ch]={}}w($g,wc);v("gxnat.ProjectTree",$g);function dh(a){this[eh]=r(a)?new Ug(a):a;this[fh]=this[eh].Eq();a=Yg.indexOf(this[eh].Eq())+1;-1!=a&&(this[gh]=Yg[a],r(this[gh])&&(this[hh]=this[eh].originalUrl+"/"+this[gh],this[this[gh]]=[]))}w(dh,wc);v("gxnat.ProjectTree.TreeNode",dh);dh.prototype.Be=function(a){this.Nb=a};dh.prototype.Rd=function(){return this.Nb};
dh.prototype.g=function(){dh.d.g.call(this);null!=this[eh]&&this[eh].g();D(this)};var fh=B(),hh=B(),ih=B(),eh=B(),gh=B(),jh=B(),kh=B(),lh=B(),ah=B(),bh=B(),ch=B(),mh=["ID","description","name","URI"],nh=["gender","handedness","label","URI"],oh=["label","URI"];function ph(a,b){return La(a.Rd(),b.Rd())}function qh(a){var b="&columns=";E(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=$g.prototype;
f.Mz=function(a){var b=[];C(this.Mn(a),function(a,d){"projects"==d?b.push(a[lh].ID):b.push(a[lh].label)});return b};f.Nz=function(a){var b=[];C(this.Mn(a),function(a){b.push(a[eh].originalUrl)});return b};f.Mn=function(a){branch={projects:this.be};"experiments"==a[gh]?branch.subjects=a:g(a[gh])&&(branch.subjects=this[bh][a[eh].mi("subjects")],branch.experiments=a);return branch};f.eB=function(a,b){this.po(this.Ud,a,b)};
f.po=function(a,b,c){var d=r(a)?new Ug(a):a,e;if(null!=this.be){a={projects:this.be};if(null!=d.subjects){e=d.mi("subjects");if(null==this[bh][e]){this.hv(e,function(a){this.gB(a,function(){null!=b&&b(a);this.po(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[bh][e]}if(null!=d.experiments){e=d.mi("experiments");if(null==this[ch][e]){this.gv(e,function(a){null!=b&&b(a);this.po(d,b,c)}.bind(this));return}a.experiments=this[ch][e]}null!=c&&c(a)}else this.fB(function(a){null!=b&&b(a);this.po(d,
b,c)}.bind(this))};f.fB=function(a){if(null==this.be){var b=qh(mh),c=this.Ud.prefix+"/projects/"+this.Ud.projects,d;P.fi(this.Ud.prefix+"/projects",function(b){d=new dh(c);this.projects.push(d);this.be=d;this[ah][d[eh].originalUrl]=d;d[lh]=b[0];d.Be(d[lh].name);a(d)}.bind(this),"&ID="+this.Ud.projects+b)}};f.Rn=function(a){return this[bh][a]};f.Zl=function(a){return this[ch][a]};
f.gB=function(a,b){var c=a;r(a)?c=this.Rn(a):a instanceof Ug&&(c=this.Rn(a.originalUrl));if(null!=c[lh])b(c);else{var d=this.Ud.prefix+"/subjects",e=qh(nh),e="&ID="+c[eh].subjects+e;P.fi(d,function(a){c[lh]=a[0];c.Be(c[lh].label);b(c)}.bind(this),e)}};
f.hB=function(a,b){if(null==this.be[jh]||!0!=this.be[jh]){var c=this.be[eh].originalUrl+"/subjects",d=qh(nh);window.console.log("load subjects",c,d);var e,h;P.fi(c,function(c){E(c,function(d){h=this.be[eh].prefix+"/projects/"+this.be[eh].projects+"/subjects/"+d.ID;e=this.hv(h);null==e[lh]&&(e[lh]=d,e.Be(e[lh].label));null!=a&&a(e);this.be.subjects.length==c.length&&(this.be[jh]=!0,null!=b&&(d=this.be.subjects,d.sort(ph),b(d)))}.bind(this))}.bind(this),d)}};
f.hv=function(a,b){if(null!=this[bh][a])return this[bh][a];subjNode=new dh(a);this.be.subjects.push(subjNode);this[bh][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.cB=function(a,b){var c=a;r(a)?c=this.Zl(a):a instanceof Ug&&(c=this.Zl(a.originalUrl));var d=this.Ud.prefix+"/experiments",e=qh(oh),e="&ID="+c[eh].experiments+e;P.fi(d,function(a){c[lh]=a[0];c.Be(c[lh].label);b(c)}.bind(this),e)};
f.dB=function(a,b,c){var d=a;r(a)?d=this.Rn(a):a instanceof Ug&&(d=this.Rn(a.originalUrl));if(null!=d[jh]&&!0==d[jh])window.console.log("Don't need to reload the experiments of "+d[eh].originalUrl);else{var e=d[eh].originalUrl+"/experiments";P.fi(e+"?xsiType=xnat:imageSessionData",function(a){E(a,function(k){this.gv(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[jh]=!0,null!=c&&(e=d.experiments,e.sort(ph),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.gv=function(a,b){null==this[ch][a]&&(exptNode=new dh(a),this.cB(exptNode,function(c){this[bh][c[eh].mi("subjects")].experiments.push(c);this[ch][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){$g.d.g.call(this);delete this.be;this.Ud.g();delete this.Ud;E(this.projects,function(a){null!=a.subjects&&E(a.subjects,function(a){null!=a.experiments&&E(a.experiments,function(a){a.g()});a.g()});a.g()});D(this)};v("gxnat.ProjectTree.TreeNode",dh);v("gxnat.ProjectTree.LEVEL_KEY",fh);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",hh);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",ih);v("gxnat.ProjectTree.PATH_KEY",eh);v("gxnat.ProjectTree.NEXTLEVEL_KEY",gh);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",jh);v("gxnat.ProjectTree.ISLOADING_KEY",kh);v("gxnat.ProjectTree.METADATA_KEY",lh);v("gxnat.ProjectTree.PROJ_DIRECT",ah);v("gxnat.ProjectTree.SUBJ_DIRECT",bh);v("gxnat.ProjectTree.EXPT_DIRECT",ch);v("gxnat.ProjectTree.PROJECT_METADATA",mh);v("gxnat.ProjectTree.SUBJECT_METADATA",nh);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",oh);v("gxnat.ProjectTree.compareNodeTitles",ph);v("gxnat.ProjectTree.getColumnQuery",qh);v("gxnat.ProjectTree.prototype.getBranchTitles",$g.prototype.Mz);v("gxnat.ProjectTree.prototype.getBranchUris",$g.prototype.Nz);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",$g.prototype.Mn);v("gxnat.ProjectTree.prototype.loadInitBranch",$g.prototype.eB);v("gxnat.ProjectTree.prototype.loadBranch",$g.prototype.po);v("gxnat.ProjectTree.prototype.loadProject",$g.prototype.fB);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",$g.prototype.Rn);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",$g.prototype.Zl);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",$g.prototype.gB);v("gxnat.ProjectTree.prototype.loadSubjects",$g.prototype.hB);v("gxnat.ProjectTree.prototype.loadSubject",$g.prototype.hv);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",$g.prototype.cB);v("gxnat.ProjectTree.prototype.loadExperiments",$g.prototype.dB);
v("gxnat.ProjectTree.prototype.loadExperiment",$g.prototype.gv);v("gxnat.ProjectTree.prototype.dispose",$g.prototype.g);function rh(a,b){this.x=da(a)?a:0;this.y=da(b)?b:0}f=rh.prototype;f.clone=function(){return new rh(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function sh(a,b){return new rh(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof rh?(this.x+=a.x,this.y+=a.y):(this.x+=a,u(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.x*=a;this.y*=c;return this};function th(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=th.prototype;f.clone=function(){return new th(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof th?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof rh?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,u(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function uh(a,b){this.width=a;this.height=b}function vh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=uh.prototype;f.clone=function(){return new uh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.lm=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=u(b)?b:a;this.width*=a;this.height*=c;return this};function wh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=wh.prototype;f.clone=function(){return new wh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.UA=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof wh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function xh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.fu=function(a){return Math.sqrt(xh(this,a))};f.nj=function(){return new uh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof rh?(this.left+=a.x,this.top+=a.y):(this.left+=a,u(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function yh(){return ic?"Webkit":hc?"Moz":F?"ms":gc?"O":null}function zh(a,b){if(b&&a in b)return a;var c=yh();return c?(c=c.toLowerCase(),c+=db(a),!da(b)||c in b?c:null):null};function Ah(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function Q(a,b){var c=Ah(a),d=Pb(arguments,1),e=c.length+d.length;Bh(c,d);a.className=c.join(" ");return c.length==e}function Ch(a,b){var c=Ah(a),d=Pb(arguments,1),e=Dh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Bh(a,b){for(var c=0;c<b.length;c++)Ib(a,b[c])||a.push(b[c])}function Dh(a,b){return Cb(a,function(a){return!Ib(b,a)})}
function Eh(a,b,c){var d=Ah(a);r(b)?Lb(d,b):g(b)&&(d=Dh(d,b));r(c)&&!Ib(d,c)?d.push(c):g(c)&&Bh(d,c);a.className=d.join(" ")}function Fh(a){var b=Gh.CSS.Hs;return Ib(Ah(a),b)};var Hh=!F||qc(9),Ih=!hc&&!F||F&&qc(9)||hc&&pc("1.9.1"),Jh=F&&!pc("9");function Kh(a){return a?new Lh(Mh(a)):Ca||(Ca=new Lh)}function Nh(a){return r(a)?document.getElementById(a):a}function Oh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Ph(document,"*",a,b)}function Rh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Ph(document,"*",a,b)[0])||null}
function Ph(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Ib(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Sh(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Th?a.setAttribute(Th[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Th={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Uh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new uh(a.clientWidth,a.clientHeight)}function Vh(a){return ic||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Wh(a){return a?a.parentWindow||a.defaultView:window}function R(a,b,c){return Xh(document,arguments)}
function Xh(a,b){var c=b[0],d=b[1];if(!Hh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ma(d.name),'"');if(d.type){c.push(' type="',Ma(d.type),'"');var e={};xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(r(d)?c.className=d:g(d)?c.className=d.join(" "):Sh(c,d));2<b.length&&Yh(a,c,b,2);return c}function Yh(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ia(h)||ma(h)&&0<h.nodeType?e(h):E(Zh(h)?Nb(h):h,e)}}
function $h(a,b){Yh(Mh(a),a,arguments,1)}function ai(a){for(var b;b=a.firstChild;)a.removeChild(b)}function bi(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function ci(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function S(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function di(a){return Ih&&void 0!=a.children?a.children:Cb(a.childNodes,function(a){return 1==a.nodeType})}function ei(a){return void 0!=a.firstElementChild?a.firstElementChild:fi(a.firstChild)}
function gi(a){return void 0!=a.nextElementSibling?a.nextElementSibling:fi(a.nextSibling)}function fi(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function hi(a){return ma(a)&&1==a.nodeType}function ii(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Mh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ji(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else ai(a),a.appendChild(Mh(a).createTextNode(String(b)))}var ki={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},li={IMG:" ",BR:"\n"};function mi(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function ni(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function oi(a){a=a.tabIndex;return u(a)&&0<=a&&32768>a}function pi(a){if(Jh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];qi(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Jh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function ri(a){var b=[];qi(a,b,!1);return b.join("")}
function qi(a,b,c){if(!(a.nodeName in ki))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in li)b.push(li[a.nodeName]);else for(a=a.firstChild;a;)qi(a,b,c),a=a.nextSibling}function Zh(a){if(a&&"number"==typeof a.length){if(ma(a))return"function"==typeof a.item||"string"==typeof a.item;if(la(a))return"function"==typeof a.item}return!1}
function si(a){var b=ti.Vc;return ui(a,function(a){return"DIV"==a.nodeName&&(!b||r(a.className)&&Ib(a.className.split(/\s+/),b))})}function ui(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Lh(a){this.la=a||ca.document||document}f=Lh.prototype;f.N=Kh;function vi(a){return a.la}f.a=function(a){return r(a)?this.la.getElementById(a):a};f.BD=Lh.prototype.a;f.B=function(a,b,c){return Xh(this.la,arguments)};f.createElement=function(a){return this.la.createElement(a)};
f.createTextNode=function(a){return this.la.createTextNode(String(a))};function wi(a){return"CSS1Compat"==a.la.compatMode}function xi(a){a=a.la;return a.parentWindow||a.defaultView}function yi(a){var b=a.la;a=Vh(b);b=b.parentWindow||b.defaultView;return F&&pc("10")&&b.pageYOffset!=a.scrollTop?new rh(a.scrollLeft,a.scrollTop):new rh(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.Ru=bi;f.removeNode=S;f.ou=di;f.Wz=ei;f.contains=ii;
f.di=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!ni(a)||oi(a)):ni(a)&&oi(a))&&F?(a=la(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function zi(a,b,c){r(b)?Ai(a,c,b):C(b,va(Ai,a))}function Ai(a,b,c){a:if(c=bb(c),void 0===a.style[c]){var d=yh()+db(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function Bi(a,b){var c=Mh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function Ci(a,b){return Bi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Di(a){return Ci(a,"position")}
function Ei(a,b,c){var d,e=hc&&(cc||lc)&&pc("1.9");b instanceof rh?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Fi(d,e);a.style.top=Fi(b,e)}function Gi(a){return new rh(a.offsetLeft,a.offsetTop)}function Hi(a){a=a?Mh(a):document;return!F||qc(9)||wi(Kh(a))?a.documentElement:a.body}
function Ii(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}F&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Ji(a){if(F&&!qc(8))return a.offsetParent;var b=Mh(a),c=Ci(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ci(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ki(a){for(var b=new th(0,Infinity,Infinity,0),c=Kh(a),d=c.la.body,e=c.la.documentElement,h=Vh(c.la);a=Ji(a);)if(!(F&&0==a.clientWidth||ic&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=Ci(a,"overflow")){var k=Li(a),l;l=a;if(hc&&!pc("1.9")){var n=parseFloat(Bi(l,"borderLeftWidth"));if(Mi(l))var p=l.offsetWidth-l.clientWidth-n-parseFloat(Bi(l,"borderRightWidth")),n=n+p;l=new rh(n,parseFloat(Bi(l,"borderTopWidth")))}else l=new rh(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=Uh(xi(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Li(a){var b,c=Mh(a),d=Ci(a,"position"),e=hc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new rh(0,0),k=Hi(c);if(a==k)return h;if(a.getBoundingClientRect)b=Ii(a),a=yi(Kh(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(ic&&"fixed"==Di(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(gc||ic&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=Ji(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,gc&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}function Ni(a,b){var c=Oi(a),d=Oi(b);return new rh(c.x-d.x,c.y-d.y)}
function Pi(a){var b;if(a.getBoundingClientRect)b=Ii(a),b=new rh(b.left,b.top);else{b=yi(Kh(a));var c=Li(a);b=new rh(c.x-b.x,c.y-b.y)}if(hc&&!pc(12)){b:{c=bb("transform");if(void 0===a.style[c]&&(c=yh()+db(c),void 0!==a.style[c])){c=(ic?"-webkit":hc?"-moz":F?"-ms":gc?"-o":null)+"-transform";break b}c="transform"}a=(a=Ci(a,c)||Ci(a,"transform"))?(a=a.match(Qi))?new rh(parseFloat(a[1]),parseFloat(a[2])):new rh(0,0):new rh(0,0);a=new rh(b.x+a.x,b.y+a.y)}else a=b;return a}
function Oi(a){if(1==a.nodeType)return Pi(a);var b=la(a.LG),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Qc.targetTouches&&(c=a.Qc.targetTouches[0]);return new rh(c.clientX,c.clientY)}function Ri(a,b,c){if(b instanceof uh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Si(a,b);Ti(a,c)}function Fi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ti(a,b){a.style.height=Fi(b,!0)}function Si(a,b){a.style.width=Fi(b,!0)}
function U(a){var b=Ui;if("none"!=Ci(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Ui(a){var b=a.offsetWidth,c=a.offsetHeight,d=ic&&!b&&!c;return da(b)&&!d||!a.getBoundingClientRect?new uh(b,c):(a=Ii(a),new uh(a.right-a.left,a.bottom-a.top))}function Vi(a){var b=Li(a);a=U(a);return new wh(b.x,b.y,a.width,a.height)}
function Wi(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Xi(a,b){a.style.display=b?"":"none"}function Yi(a){F&&da(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Mi(a){return"rtl"==Ci(a,"direction")}var Zi=hc?"MozUserSelect":ic?"WebkitUserSelect":null;
function $i(a,b,c){c=c?null:a.getElementsByTagName("*");if(Zi){if(b=b?"none":"",a.style[Zi]=b,c){a=0;for(var d;d=c[a];a++)d.style[Zi]=b}}else if(F||gc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function aj(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function bj(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?aj(a,c):0}function cj(a,b){if(F){var c=bj(a,b+"Left"),d=bj(a,b+"Right"),e=bj(a,b+"Top"),h=bj(a,b+"Bottom");return new th(e,d,h,c)}c=Bi(a,b+"Left");d=Bi(a,b+"Right");e=Bi(a,b+"Top");h=Bi(a,b+"Bottom");return new th(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var dj={thin:2,medium:4,thick:6};
function ej(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in dj?dj[c]:aj(a,c)}function fj(a){if(F&&!qc(9)){var b=ej(a,"borderLeft"),c=ej(a,"borderRight"),d=ej(a,"borderTop");a=ej(a,"borderBottom");return new th(d,c,a,b)}b=Bi(a,"borderLeftWidth");c=Bi(a,"borderRightWidth");d=Bi(a,"borderTopWidth");a=Bi(a,"borderBottomWidth");return new th(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Qi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function gj(a){wc.call(this);this.ed=a;this.mb={}}w(gj,wc);var hj=[];f=gj.prototype;f.D=function(a,b,c,d){g(b)||(b&&(hj[0]=b.toString()),b=hj);for(var e=0;e<b.length;e++){var h=H(a,b[e],c||this.handleEvent,d||!1,this.ed||this);if(!h)break;this.mb[h.key]=h}return this};f.ev=function(a,b,c,d){return ij(this,a,b,c,d)};function ij(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)ij(a,b,c[k],d,e,h);else{b=Tc(b,c,d||a.handleEvent,e,h||a.ed||a);if(!b)return a;a.mb[b.key]=b}return a}
f.vb=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.vb(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.ed||this,c=Nc(c),d=!!d,b=hb(a)?a.Qn(b,c,d,e):a?(a=Pc(a))?a.Qn(b,c,d,e):null:null,b&&(Vc(b),delete this.mb[b.key]);return this};f.yg=function(){C(this.mb,Vc);this.mb={}};f.f=function(){gj.d.f.call(this);this.yg()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function jj(){}ga(jj);jj.prototype.xB=0;function kj(a){$c.call(this);this.rb=a||Kh();this.oh=lj;this.yf=null;this.ma=!1;this.q=null;this.oj=void 0;this.dg=this.Nc=this.Ua=this.pv=null;this.vD=!1}w(kj,$c);kj.prototype.XI=jj.re();var lj=null;
function mj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function nj(a){return a.yf||(a.yf=":"+(a.XI.xB++).toString(36))}function oj(a,b){a.Ua&&a.Ua.dg&&(tb(a.Ua.dg,a.yf),ub(a.Ua.dg,b,a));a.yf=b}f=kj.prototype;f.a=function(){return this.q};
f.ib=function(){this.oj||(this.oj=new gj(this));return this.oj};f.Uo=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Ua&&this.yf&&pj(this.Ua,this.yf)&&this.Ua!=a)throw Error("Unable to set parent component");this.Ua=a;kj.d.rw.call(this,a)};f.getParent=function(){return this.Ua};f.rw=function(a){if(this.Ua&&this.Ua!=a)throw Error("Method not supported");kj.d.rw.call(this,a)};f.N=function(){return this.rb};f.B=function(){this.q=this.rb.createElement("div")};f.k=function(a){this.nh(a)};
f.nh=function(a,b){if(this.ma)throw Error("Component already rendered");this.q||this.B();a?a.insertBefore(this.q,b||null):this.rb.la.body.appendChild(this.q);this.Ua&&!this.Ua.ma||this.hb()};f.Jb=function(a){if(this.ma)throw Error("Component already rendered");if(a&&this.Qe(a)){this.vD=!0;var b=Mh(a);this.rb&&this.rb.la==b||(this.rb=Kh(a));this.ne(a);this.hb()}else throw Error("Invalid element to decorate");};f.Qe=function(){return!0};f.ne=function(a){this.q=a};
f.hb=function(){this.ma=!0;qj(this,function(a){!a.ma&&a.a()&&a.hb()})};f.Dc=function(){qj(this,function(a){a.ma&&a.Dc()});this.oj&&this.oj.yg();this.ma=!1};f.f=function(){this.ma&&this.Dc();this.oj&&(this.oj.g(),delete this.oj);qj(this,function(a){a.g()});!this.vD&&this.q&&S(this.q);this.Ua=this.pv=this.q=this.dg=this.Nc=null;kj.d.f.call(this)};f.nn=function(a,b){this.tt(a,rj(this),b)};
f.tt=function(a,b,c){if(a.ma&&(c||!this.ma))throw Error("Component already rendered");if(0>b||b>rj(this))throw Error("Child component index out of bounds");this.dg&&this.Nc||(this.dg={},this.Nc=[]);if(a.getParent()==this){var d=nj(a);this.dg[d]=a;Lb(this.Nc,a)}else ub(this.dg,nj(a),a);a.Uo(this);Ob(this.Nc,b,0,a);a.ma&&this.ma&&a.getParent()==this?(c=this.Ha(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.q||this.B(),b=sj(this,b+1),a.nh(this.Ha(),b?b.q:null)):this.ma&&!a.ma&&a.q&&a.q.parentNode&&
1==a.q.parentNode.nodeType&&a.hb()};f.Ha=function(){return this.q};f.Ve=function(){null==this.oh&&(this.oh=Mi(this.ma?this.q:this.rb.la.body));return this.oh};f.wm=function(a){if(this.ma)throw Error("Component already rendered");this.oh=a};function rj(a){return a.Nc?a.Nc.length:0}function pj(a,b){var c;a.dg&&b?(c=a.dg,c=(b in c?c[b]:void 0)||null):c=null;return c}function sj(a,b){return a.Nc?a.Nc[b]||null:null}function qj(a,b,c){a.Nc&&E(a.Nc,b,c)}function tj(a,b){return a.Nc&&b?Ab(a.Nc,b):-1}
f.removeChild=function(a,b){if(a){var c=r(a)?a:nj(a);a=pj(this,c);c&&a&&(tb(this.dg,c),Lb(this.Nc,a),b&&(a.Dc(),a.q&&S(a.q)),a.Uo(null))}if(!a)throw Error("Child is not in parent component");return a};v("nrg.string",function(){});function uj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function vj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function wj(a){if(null!=a)return a="array"==ha(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function xj(a){return a.replace(/\W/g,"")}function yj(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function zj(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",uj);v("nrg.string.dirname",vj);v("nrg.string.getFileExtension",wj);v("nrg.string.fileNameMatch",function(a,b){return uj(a)===uj(b)});v("nrg.string.stripNonAlphanumeric",xj);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return xj(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",yj);v("nrg.string.mrmlColorToRgb",zj);function Aj(a,b,c){wc.call(this);this.fv=a;this.pg=b||0;this.ed=c;this.aG=ua(this.rG,this)}w(Aj,wc);f=Aj.prototype;f.yf=0;f.f=function(){Aj.d.f.call(this);this.stop();delete this.fv;delete this.ed};f.start=function(a){this.stop();this.yf=Yf(this.aG,da(a)?a:this.pg)};f.stop=function(){this.fh()&&ca.clearTimeout(this.yf);this.yf=0};f.fh=function(){return 0!=this.yf};f.rG=function(){this.yf=0;this.fv&&this.fv.call(this.ed)};var sb={},Bj=null;function Cj(a){a=na(a);delete sb[a];rb()&&Bj&&Bj.stop()}function Dj(){Bj||(Bj=new Aj(function(){Ej()},20));var a=Bj;a.fh()||a.start()}function Ej(){var a=xa();C(sb,function(b){Fj(b,a)});rb()||Dj()};function Gj(){$c.call(this);this.T=Hj;this.endTime=this.startTime=null}w(Gj,$c);var Hj=0;Gj.prototype.Af=function(){return 1==this.T};Gj.prototype.ji=function(){this.pc("begin")};Gj.prototype.onEnd=function(){this.pc("end")};Gj.prototype.pc=function(a){this.dispatchEvent(a)};function Ij(a,b,c,d){Gj.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.fp=a;this.yG=b;this.duration=c;this.fy=d;this.coords=[];this.fl=!1}w(Ij,Gj);f=Ij.prototype;f.fj=function(a){this.fl=a};f.Ff=0;
f.play=function(a){if(a||this.T==Hj)this.Ff=0,this.coords=this.fp;else if(this.Af())return!1;Cj(this);this.startTime=a=xa();-1==this.T&&(this.startTime-=this.duration*this.Ff);this.endTime=this.startTime+this.duration;this.Ff||this.ji();this.pc("play");-1==this.T&&this.pc("resume");this.T=1;var b=na(this);b in sb||(sb[b]=this);Dj();Fj(this,a);return!0};f.stop=function(a){Cj(this);this.T=Hj;a&&(this.Ff=1);Jj(this,this.Ff);this.pc("stop");this.onEnd()};
f.pause=function(){this.Af()&&(Cj(this),this.T=-1,this.pc("pause"))};f.f=function(){this.T==Hj||this.stop(!1);this.pc("destroy");Ij.d.f.call(this)};f.oe=function(){this.g()};function Fj(a,b){a.Ff=(b-a.startTime)/(a.endTime-a.startTime);1<=a.Ff&&(a.Ff=1);Jj(a,a.Ff);1==a.Ff?(a.T=Hj,Cj(a),a.pc("finish"),a.onEnd()):a.Af()&&a.xv()}function Jj(a,b){la(a.fy)&&(b=a.fy(b));a.coords=Array(a.fp.length);for(var c=0;c<a.fp.length;c++)a.coords[c]=(a.yG[c]-a.fp[c])*b+a.fp[c]}f.xv=function(){this.pc("animate")};
f.pc=function(a){this.dispatchEvent(new Kj(a,this))};function Kj(a,b){Cc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.Ff=b.Ff;this.state=b.T}w(Kj,Cc);var Lj={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Mj(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Nj.test(c))return b.pj=Oj(c),b.type="hex",b;a:{var d=a.match(Pj);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.pj=Qj(c),b.type="rgb",b;if(Lj&&(c=Lj[a.toLowerCase()]))return b.pj=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Rj=/#(.)(.)(.)/;
function Oj(a){if(!Nj.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Rj,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Sj(a){a=Oj(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Qj(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Tj(b.toString(16));c=Tj(c.toString(16));a=Tj(a.toString(16));return"#"+b+c+a}var Nj=/^#(?:[0-9a-f]{3}){1,2}$/i,Pj=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Tj(a){return 1==a.length?"0"+a:a}
function Uj(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Qj([Math.floor(d),Math.floor(e),Math.floor(h)])};function Vj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=Di(a)||(c=Mh(a).documentElement);if(!c)return b;if(hc)var d=fj(c),b=b+d.left;else qc(8)&&(d=fj(c),b-=d.left);return Mi(c)?c.clientWidth-(b+a.offsetWidth):b};function Wj(a,b,c,d,e){Ij.call(this,b,c,d,e);this.element=a}w(Wj,Ij);f=Wj.prototype;f.o=fa;f.Ve=function(){da(this.oh)||(this.oh=Mi(this.element));return this.oh};f.xv=function(){this.o();Wj.d.xv.call(this)};f.onEnd=function(){this.o();Wj.d.onEnd.call(this)};f.ji=function(){this.o();Wj.d.ji.call(this)};function Xj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Wj.apply(this,arguments)}w(Xj,Wj);
Xj.prototype.o=function(){var a=this.fl&&this.Ve()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Yj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Wj.apply(this,arguments)}w(Yj,Wj);Yj.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Zj(a,b,c,d,e){Wj.call(this,a,[b],[c],d,e)}w(Zj,Wj);Zj.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function ak(a,b,c,d,e){Wj.call(this,a,[b],[c],d,e)}w(ak,Wj);ak.prototype.o=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function bk(a,b,c,d,e){u(b)&&(b=[b]);u(c)&&(c=[c]);Wj.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(bk,Wj);bk.prototype.o=function(){Wi(this.element,this.coords[0])};
bk.prototype.show=function(){this.element.style.display=""};bk.prototype.fm=function(){this.element.style.display="none"};function ck(a,b,c){bk.call(this,a,1,0,b,c)}w(ck,bk);function dk(a,b,c){bk.call(this,a,0,1,b,c)}w(dk,bk);function ek(a,b,c){bk.call(this,a,1,0,b,c)}w(ek,bk);ek.prototype.ji=function(){this.show();ek.d.ji.call(this)};ek.prototype.onEnd=function(){this.fm();ek.d.onEnd.call(this)};function fk(a,b,c){bk.call(this,a,0,1,b,c)}w(fk,bk);fk.prototype.ji=function(){this.show();fk.d.ji.call(this)};
function gk(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Wj.apply(this,arguments)}w(gk,Wj);gk.prototype.hs=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};gk.prototype.o=function(){this.hs()};function hk(){Gj.call(this);this.Xb=[]}w(hk,Gj);hk.prototype.add=function(a){Ib(this.Xb,a)||(this.Xb.push(a),H(a,"finish",this.yv,!1,this))};hk.prototype.remove=function(a){Lb(this.Xb,a)&&Uc(a,"finish",this.yv,!1,this)};hk.prototype.f=function(){E(this.Xb,function(a){a.g()});this.Xb.length=0;hk.d.f.call(this)};function ik(){hk.call(this);this.ku=0}w(ik,hk);
ik.prototype.play=function(a){if(0==this.Xb.length)return!1;if(a||this.T==Hj)this.ku=0,this.ji();else if(this.Af())return!1;this.pc("play");-1==this.T&&this.pc("resume");var b=-1==this.T&&!a;this.startTime=xa();this.endTime=null;this.T=1;E(this.Xb,function(c){b&&-1!=c.T||c.play(a)});return!0};ik.prototype.pause=function(){this.Af()&&(E(this.Xb,function(a){a.Af()&&a.pause()}),this.T=-1,this.pc("pause"))};
ik.prototype.stop=function(a){E(this.Xb,function(b){b.T==Hj||b.stop(a)});this.T=Hj;this.endTime=xa();this.pc("stop");this.onEnd()};ik.prototype.yv=function(){this.ku++;this.ku==this.Xb.length&&(this.endTime=xa(),this.T=Hj,this.pc("finish"),this.onEnd())};function jk(){hk.call(this);this.uf=0}w(jk,hk);
jk.prototype.play=function(a){if(0==this.Xb.length)return!1;if(a||this.T==Hj)this.uf<this.Xb.length&&this.Xb[this.uf].T!=Hj&&this.Xb[this.uf].stop(!1),this.uf=0,this.ji();else if(this.Af())return!1;this.pc("play");-1==this.T&&this.pc("resume");this.startTime=xa();this.endTime=null;this.T=1;this.Xb[this.uf].play(a);return!0};jk.prototype.pause=function(){this.Af()&&(this.Xb[this.uf].pause(),this.T=-1,this.pc("pause"))};
jk.prototype.stop=function(a){this.T=Hj;this.endTime=xa();if(a)for(a=this.uf;a<this.Xb.length;++a){var b=this.Xb[a];b.T==Hj&&b.play();b.T==Hj||b.stop(!0)}else this.uf<this.Xb.length&&this.Xb[this.uf].stop(!1);this.pc("stop");this.onEnd()};jk.prototype.yv=function(){this.Af()&&(this.uf++,this.uf<this.Xb.length?this.Xb[this.uf].play():(this.endTime=xa(),this.T=Hj,this.pc("finish"),this.onEnd()))};v("nrg.convert",function(){});function kk(a){if(!g(a)&&!u(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function lk(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function mk(a){var b={};C(a,function(a,d){isNaN(a)?r(a)&&(b[d]=a):b[d]=a});return b}function nk(a){var b={};C(a,function(a,d){r(a)?0<a.length&&(b[d]=a):b[d]=a});return b}
v("nrg.convert.pct",function(a){if(!u(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",kk);v("nrg.convert.remap1D",lk);v("nrg.convert.toInt",function(a){if(!r(a)&&!u(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)});
v("nrg.convert.toFloatArray",function(a){if(!r(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");E(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!ma(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!r(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;E(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",mk);v("nrg.convert.filterZeroLengthStrings",nk);v("nrg.style",function(){});var ok="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function pk(a){return a.getBoundingClientRect()}function qk(a){var b=Gi(a);a=U(a);this.ye=b;this.size=a;this.left=this.x=b.x;this.width=a.width;this.right=b.x+a.width;this.top=this.y=b.y;this.height=a.height;this.bottom=b.y+a.height}
function rk(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function sk(a,b){a&&b&&(a.style||(a.style={}),zi(a,b),E("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Ea(b[c],"%")&&(a.style[c]=kk(b[c]))}))}var tk="is_hovered_"+B();
function uk(a,b,c,d,e,h){function k(){a[tk]=!1;Ch(a,b);null!=h&&h()}function l(){a[tk]=!0;Q(a,b);null!=e&&e()}H(a,"mouseenter",l);H(a,"mouseleave",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}function vk(a,b,c){var d=new qk(a);d.right>c&&(d.left=c-d.width);d.left<b&&(d.left=b);a.style.left=d.left.toString()+"px";return new qk(a)}v("nrg.style.cssProperties",ok);
v("nrg.style.removeClassesThatContain",function(a,b){var c=Ah(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)Ch(a,d[e])});v("nrg.style.absolutePosition",pk);v("nrg.style.dims",qk);v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});
v("nrg.style.getComputedStyle",function(a,b){if(b&&r(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=ok);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return rk(c)});v("nrg.style.parseIntNumericalProperties",rk);v("nrg.style.setStyle",sk);v("nrg.style.constrainHorizontally",vk);v("nrg.style.IS_HOVERED",tk);v("nrg.style.setHoverClass",uk);
v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function wk(a){return 1-Math.pow(1-a,3)};function xk(){}v("nrg.fx",xk);function yk(a,b,c){void 0===b&&(b=500);zk(a,b,1,c)}function Ak(a,b,c){void 0===b&&(b=500);zk(a,0,0,function(){zk(a,b,1,c)})}function Bk(a,b,c){void 0===b&&(b=500);zk(a,b,0,c)}function zk(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:a.style.opacity=1);var h=new bk(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);J(h);delete h});h.play()}
function Ck(a,b,c){E(a,function(a){a.style.opacity=0});b=u(b)?b:500;c=u(c)?c:250;var d=new Wf(0);d.addEventListener(Xf,function(){elt=a[0];yk(elt,b);1==a.length?(d.stop(),d.g()):(a=Pb(a,1),d.setInterval(c))});d.start()}xk.animGenStyles="left top width height opacity background-color color z-index".split(" ");function Dk(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Xj(a,[b.left,b.top],[c.left,c.top],d,wk)}
function Ek(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Yj(a,[b.width,b.height],[c.width,c.height],d,wk)}function Fk(a,b,c,d){if("opacity"in b||"opacity"in c)if(E([b,c],function(a){"opacity"in a||(a.opacity=1);u(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new bk(a,b.opacity,c.opacity,d)}
function Gk(a,b,c,d){if("visibility"in b||"visibility"in c)if(E([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new fk(a,d):new ek(a,d)}
function Hk(a,b,c,d){if("background-color"in b||"background-color"in c){E([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Mj(b["background-color"]),h=Mj(c["background-color"]);if(e.pj!==h.pj)return new gk(a,Sj(e.pj),Sj(h.pj),d,wk)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function Ik(a,b){this.SF=a;this.tM=b}function Jk(a){return nk(mk(a))}
function Kk(a){var b=U(a),c=Gi(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Lk(a,b){var c=Kk(a),c=Jk(c),d=Kk(b),e=Jk(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new Ik(c,e)}
function Mk(a,b,c,d){var e=[];E(xk.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(Dk(a,b,c,d));break;case "height":e.push(Ek(a,b,c,d));break;case "opacity":e.push(Fk(a,b,c,d));break;case "visibility":e.push(Gk(a,b,c,d));break;case "background-color":e.push(Hk(a,b,c,d))}});var h=[];E(e,function(a){null!=a&&h.push(a)});delete e;return h}
function Nk(a,b,c,d){var e=new ik;E(a,function(a){c&&H(a,"animate",c);e.add(a)});b&&H(e,"begin",b);H(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Ok(a,b,c){function d(){sk(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;H(a,"mouseover",function(){sk(a,{opacity:b})});H(a,"mouseout",d);d()}
function Pk(a,b,c,d,e,h,k){if(!g(b)){var l=[];E(a,function(){l.push(b)});b=l}g(c)||(l=[],E(a,function(){l.push(c)}),c=l);d=u(d)?d:500;var n=[];E(a,function(a,e){n.push(Fk(a,{opacity:b[e]},{opacity:c[e]},d))});Nk(n,e,h,k)}v("nrg.fx.fadeIn",yk);v("nrg.fx.fadeInFromZero",Ak);v("nrg.fx.fadeOut",Bk);v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);zk(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",zk);v("nrg.fx.animGenStyles",xk.animGenStyles);
v("nrg.fx.generateAnim_Slide",Dk);v("nrg.fx.generateAnim_Resize",Ek);v("nrg.fx.generateAnim_Fade",Fk);v("nrg.fx.generateAnim_RemoveAddFade",Gk);v("nrg.fx.generateAnim_BgColorTrans",Hk);v("nrg.fx.TransitionDims",Ik);v("nrg.fx.filterTransitionStyles",Jk);v("nrg.fx.getTransitionStyles",Kk);v("nrg.fx.generateTransitionDims",Lk);v("nrg.fx.getAnimationDims",function(a){var b=U(a),c=Gi(a);return{"background-color":Ci(a,"backgroundColor"),width:b.width,left:c.x,top:c.y,height:b.height}});
v("nrg.fx.generateAnimations",Mk);v("nrg.fx.parallelAnimate",Nk);v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new jk;E(a,function(a){c&&H(a,"animate",c);e.add(a)});b&&H(e,"begin",b);H(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",Ok);v("nrg.fx.sequentialFadeIn",Ck);v("nrg.fx.parallelFade",Pk);function Qk(a){return a.slice(a.lastIndexOf("/")+1)}function Rk(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Ea(b,"/")?b+d:b+("/"+d);return b};function Sk(){}v("nrg.dom",Sk);function Tk(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!r(b))throw new TypeError("String expected!",b);if(c&&!r(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Uk(e,{src:b?Rk(b,cb(e)+"."+c):""});return d}function Vk(a,b){var c=R("img",{src:b});c.style.yP="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";$h(a,c);c.onclick=c.parentNode.onclick}
function Uk(a,b,c,d){if(!r(a))throw new TypeError("String expected!");if(b&&!ma(b))throw new TypeError("Object expected!");if(null!=c&&!u(c))throw new TypeError("Number expected!");if(null!=d&&!u(d))throw new TypeError("Number expected!");a=Wk("div",a,b?b:{});b&&b.src&&Vk(a,b.src);Ok(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Wk(a,b,c){if(!r(a))throw new TypeError("String expected!",a);if(!r(b))throw new TypeError("String expected!",b);if(c&&!ma(c))throw new TypeError("Object expected!");c=c&&ma(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:cb(b.replace(/\./g,"-").toLowerCase());return R(a,c)}v("nrg.dom.createBasicHoverButtonSet",Tk);v("nrg.dom.createDivChildImage",Vk);v("nrg.dom.createBasicHoverButton",Uk);v("nrg.dom.createUniqueDom",Wk);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Sk.BQ(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function W(a){kj.call(this,a);this.ax();this.q=Wk("div",this.constructor.ID_PREFIX,a);this.oq();Xk(this)}w(W,kj);v("nrg.ui.Component",W);f=W.prototype;f.ax=function(){if(this instanceof W){this.constructor.d&&this.constructor.d instanceof W&&W.prototype.ax.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);da(this.constructor.zp)||(this.constructor.zp=Yk(this.constructor.ID_PREFIX),this.constructor.Vc=this.constructor.zp)}};
function Yk(a){return a.toLowerCase().replace(/\./g,"-")}f.oq=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)W.prototype.oq.bind(a)(),a=a.constructor.d;da(this.constructor.CSS_SUFFIX)&&!da(this.constructor.CSS)&&(this.constructor.CSS=vb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=yj(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Xk(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Yk(c.constructor.ID_PREFIX),Kb(b,d),c=c.constructor.d;E(b,function(a){null!=this.a()&&Q(this.a(),a)}.bind(a))}f.ci="";f.pC=function(a){this.ci=a};f.sH=function(){return this.ci};f.JF=function(a){null==this.hp&&(this.hp=[]);this.hp.push(a)};
f.Qh=function(){if(null==this.qa)this.qa=U(this.a());else if(this.qa.height!==this.A.height||this.qa.width!==this.A.width)this.qa=this.A;if(null==this.Eo)this.Eo=Gi(this.a());else if(this.Eo.x!==this.qq.x||this.Eo.y!==this.qq.y)this.Eo=this.qq;this.A=U(this.a());this.qq=Gi(this.a())};f.o=function(){this.Qh()};f.k=function(a){this.ma&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):W.d.k.call(this,a)};f.xz=!1;f.pG=function(){return this.xz};
f.f=function(){W.d.f.call(this);null!=this.hp&&(E(this.hp,function(a){J(a);a.g()}),Jb(this.hp));J(this);J(this.a());S(this.a());this.Eo=this.qa=this.qq=this.A=this.ci=null;this.xz=!0};f.du=function(a){null!=a&&(a=g(a)?a:[a],E(a,function(a){J(a);a.g()}),Jb(a))};f.vq=function(a){null!=a&&(J(a),a.g())};f.wq=function(a){C(a,function(b,c){J(b);S(b);delete a[c]});D(a)};f.En=function(a){C(a,function(b,c){J(b);b.g();delete a[c]});D(a)};v("nrg.ui.Component.animationLengths",{fN:150,IN:300,xO:600});
v("nrg.ui.Component.idPrefixToCssClass",Yk);v("nrg.ui.Component.prototype.validateIdPrefix",W.prototype.ax);v("nrg.ui.Component.prototype.imagePrefix",W.prototype.ci);v("nrg.ui.Component.prototype.createCssMap",W.prototype.oq);v("nrg.ui.Component.prototype.setImagePrefix",W.prototype.pC);v("nrg.ui.Component.prototype.getImagePrefix",W.prototype.sH);v("nrg.ui.Component.prototype.addSubComponent",W.prototype.JF);v("nrg.ui.Component.prototype.calcDims",W.prototype.Qh);
v("nrg.ui.Component.prototype.updateStyle",W.prototype.o);v("nrg.ui.Component.prototype.render",W.prototype.k);v("nrg.ui.Component.prototype.disposeInternalCalled",W.prototype.pG);v("nrg.ui.Component.prototype.disposeAnimations",W.prototype.du);v("nrg.ui.Component.prototype.disposeAnimationQueue",W.prototype.vq);v("nrg.ui.Component.prototype.disposeElementMap",W.prototype.wq);v("nrg.ui.Component.prototype.disposeComponentMap",W.prototype.En);v("nrg.ui.Component.prototype.disposeInternal",W.prototype.f);var Zk;function $k(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function al(a,b,c){ia(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Zk||(Zk={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Zk,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function bl(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function cl(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]}function dl(a,b){return a.classList?a.classList.contains(b):Ib(cl(a),b)}function el(a,b){a.classList?a.classList.add(b):dl(a,b)||(a.className+=0<a.className.length?" "+b:b)}function fl(a,b){if(a.classList)E(b,function(b){el(a,b)});else{var c={};E(cl(a),function(a){c[a]=!0});E(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function gl(a,b){a.classList?a.classList.remove(b):dl(a,b)&&(a.className=Cb(cl(a),function(a){return a!=b}).join(" "))}function hl(a,b){a.classList?E(b,function(b){gl(a,b)}):a.className=Cb(cl(a),function(a){return!Ib(b,a)}).join(" ")}function il(a,b,c){c?el(a,b):gl(a,b)};function jl(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!hc;default:return 166>a.keyCode||183<a.keyCode}}
function kl(a,b,c,d,e){if(!(F||ic&&pc("525")))return!0;if(cc&&e)return ll(a);if(e&&!d)return!1;u(b)&&(b=ml(b));if(!c&&(17==b||18==b||cc&&91==b))return!1;if(ic&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(F&&d&&b==a)return!1;switch(a){case 13:return!(F&&qc(9));case 27:return!ic}return ll(a)}
function ll(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||ic&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function ml(a){if(hc)a=nl(a);else if(cc&&ic)a:switch(a){case 93:a=91;break a}return a}
function nl(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function ol(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,$k(a,k.ah()),el(a,"goog-zippy-header"),pl(k,a),a&&k.XA.D(a,"keydown",k.Er))}$c.call(this);this.rb=e||Kh();this.uk=this.rb.a(a)||null;this.Aq=this.rb.a(d||null);this.qc=(this.cv=la(b)?b:null)||!b?null:this.rb.a(b);this.gg=!0==c;this.XA=new gj(this);this.qv=new gj(this);var k=this;h(this.uk);h(this.Aq);this.gc(this.gg)}w(ol,$c);var ql={dx:"action",Fx:"toggle"};f=ol.prototype;f.Gk=!0;f.f=function(){ol.d.f.call(this);Ac(this.XA);Ac(this.qv)};
f.ah=function(){return"tab"};f.Ha=function(){return this.qc};f.toggle=function(){this.gc(!this.gg)};f.gc=function(a){this.qc?Xi(this.qc,a):a&&this.cv&&(this.qc=this.cv());this.qc&&el(this.qc,"goog-zippy-content");this.Aq?(Xi(this.uk,!a),Xi(this.Aq,a)):rl(this,a);this.gg=a;this.dispatchEvent(new sl(ql.Fx,this))};function rl(a,b){a.uk&&(il(a.uk,"goog-zippy-expanded",b),il(a.uk,"goog-zippy-collapsed",!b),al(a.uk,"expanded",b))}
f.To=function(a){this.Gk!=a&&((this.Gk=a)?(pl(this,this.uk),pl(this,this.Aq)):this.qv.yg())};function pl(a,b){b&&a.qv.D(b,"click",a.Dr)}f.Er=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Cc(ql.dx,this)),a.preventDefault(),a.stopPropagation()};f.Dr=function(){this.toggle();this.dispatchEvent(new Cc(ql.dx,this))};function sl(a,b){Cc.call(this,a,b)}w(sl,Cc);function tl(a,b,c,d){d=d||Kh();var e=d.B("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.Bq=e;this.rf=null;ol.call(this,a,b,c,void 0,d);a=this.gg;this.Bq.style.display=a?"":"none";rl(this,a)}w(tl,ol);f=tl.prototype;f.Qi=500;f.PF=wk;
f.gc=function(a){if(this.gg!=a||this.rf){"none"==this.Bq.style.display&&(this.Bq.style.display="");var b=this.Ha().offsetHeight,c=0;this.rf?(a=this.gg,J(this.rf),this.rf.stop(!1),c=parseInt(this.Ha().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;rl(this,a);this.rf=new Ij([0,c],[0,a?b:0],this.Qi,this.PF);H(this.rf,["begin","animate","end"],this.$J,!1,this);H(this.rf,"end",ua(this.aK,this,a));this.rf.play(!1)}};f.$J=function(a){var b=this.Ha();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.aK=function(a){a&&(this.Ha().style.marginTop="0");J(this.rf);this.gg=a;this.rf=null;a||(this.Bq.style.display="none");this.dispatchEvent(new sl(ql.Fx,this))};function ul(a,b,c,d){W.call(this);this.Nb=a;this.kb=R("div",{id:"ZippyHeader_"+a+"_"+B(),"class":ul.CSS.Ap});this.kb[vl]=a.toLowerCase();null!=d?d(b,this.kb):b.appendChild(this.kb);this.Un=R("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":ul.CSS.XD});this.pD();this.kb.appendChild(this.Un);this.$g=R("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":ul.CSS.UD},"+");this.kb.appendChild(this.$g);this.sf=R("div",{id:"ZippyContent_"+a+"_"+B(),"class":ul.CSS.yh});b.appendChild(this.sf);this.bc=new this.zD(this.kb,
this.sf,null!=c?c:!1);this.bc instanceof tl&&(this.bc.Qi=500);this.iM=na(this);this.Jc={};H(this.kb,"mouseover",this.mL.bind(this));H(this.kb,"mouseout",this.lL.bind(this));wl(this)}w(ul,W);v("nrg.ui.ZippyNode",ul);ul.ID_PREFIX="nrg.ui.ZippyNode";var xl={cN:"a",RM:"b",KD:"c"};ul.CSS_SUFFIX={Ap:"header",qx:"header-mouseover",XD:"header-label",UD:"expandicon",ix:"expandicon-mouseover",yh:"content",yh:"content-sub",kE:"loading-holder",mE:"loading-text",lE:"loading-image"};
function yl(a,b,c){var d=a[0];r(d)&&null!=b&&(d=b.Jc[d]);d.bc.Qi=200;1<a.length&&!d.bc.gg&&Tc(d,"a",function(){d.bc.Qi=500;yl(Pb(a,1),d,c)});d.gc(!0);null!=c&&c(d,a)}var vl=B();f=ul.prototype;f.zD=tl;f.pD=function(a){a=null!=a?a:45;var b=this.Un,c=this.Nb.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.Nb?Xa(this.Nb,a+60):c.length==this.Nb.length?Xa(this.Nb,a):this.Nb;return b};f.ve=null;f.Ju=function(){return null!=this.ve};f.qr=!1;f.yJ=function(){return this.qr};
f.hw=function(a,b){var c=function(){S(this.ve);this.ve=null}.bind(this);a?(this.qr=!0,zk(this.ve,500,0,function(){c();null!=b&&b()},1)):c()};f.oy=function(){if(null==this.ve){this.ve=R("div",{id:"LoadingHolder_"+B()});Q(this.ve,ul.CSS.kE);var a=R("div");Q(a,ul.CSS.mE);a.innerHTML="Loading...";var b=R("img");Q(b,ul.CSS.lE);b.src=serverRoot+"/images/viewer/xiv/ui/other/loading.gif";$h(this.ve,a);$h(this.ve,b);$h(this.sf,this.ve);this.ve.style.opacity=0;yk(this.ve,300);this.qr=!1}};f.Rd=function(){return this.Nb};
f.MH=function(){return this.Jc};f.SC=function(a){this.$g.style.visibility=!0==a?"visible":"hidden"};f.mH=function(){return this.kb};f.UG=function(){return this.sf};f.nH=function(){return this.Un};f.BI=function(){return this.bc};f.gc=function(a){this.bc.gc(a)};f.OL=function(a){this.zD=!0===a?tl:ol};
function wl(a){H(a.bc,ob(ql),function(a){null!=this.bc.rf?this.dispatchEvent({type:"c"}):a.target.gg?this.Vv():(this.$g.innerHTML="+",sk(this.$g,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"b"}))}.bind(a))}f.Vv=function(){this.$g.innerHTML="-";sk(this.$g,{"margin-left":"-1em"});this.dispatchEvent({type:"a"})};f.mL=function(){Q(this.kb,ul.CSS.qx);Q(this.$g,ul.CSS.ix)};f.lL=function(){Ch(this.kb,ul.CSS.qx);Ch(this.$g,ul.CSS.ix)};
f.f=function(){ul.d.f.call(this);S(this.Un);delete this.Un;S(this.$g);delete this.$g;J(this.kb);S(this.kb);delete this.kb;S(this.sf);delete this.sf;null!=this.bc&&(this.bc.g(),J(this.bc),delete this.bc);null!=this.ve&&(this.hw(),delete this.ve);this.En(this.Jc);delete this.Jc;delete this.iM;delete this.Nb};v("nrg.ui.ZippyNode.ID_PREFIX",ul.ID_PREFIX);v("nrg.ui.ZippyNode.EventType",xl);v("nrg.ui.ZippyNode.CSS_SUFFIX",ul.CSS_SUFFIX);v("nrg.ui.ZippyNode.NODE_STORT_TAG",vl);
v("nrg.ui.ZippyNode.serialExpand",yl);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",ul.prototype.pD);v("nrg.ui.ZippyNode.prototype.getTitle",ul.prototype.Rd);v("nrg.ui.ZippyNode.prototype.addLoadingImage",ul.prototype.xP);v("nrg.ui.ZippyNode.prototype.getNodes",ul.prototype.MH);v("nrg.ui.ZippyNode.prototype.getHeader",ul.prototype.mH);v("nrg.ui.ZippyNode.prototype.getContentHolder",ul.prototype.UG);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",ul.prototype.nH);
v("nrg.ui.ZippyNode.prototype.showExpandIcon",ul.prototype.SC);v("nrg.ui.ZippyNode.prototype.getZippy",ul.prototype.BI);v("nrg.ui.ZippyNode.prototype.setExpanded",ul.prototype.gc);v("nrg.ui.ZippyNode.prototype.setAnimated",ul.prototype.OL);v("nrg.ui.ZippyNode.prototype.hasLoadingIndicator",ul.prototype.Ju);v("nrg.ui.ZippyNode.prototype.addLoadingIndicator",ul.prototype.oy);v("nrg.ui.ZippyNode.prototype.removeLoadingIndicator",ul.prototype.hw);
v("nrg.ui.ZippyNode.prototype.loadingIndicatorRemoving",ul.prototype.yJ);v("nrg.ui.ZippyNode.prototype.disposeInternal",ul.prototype.f);P.Bd={};P.Bd.Gd=function(){wc.call(this)};w(P.Bd.Gd,wc);v("gxnat.vis.VisNode",P.Bd.Gd);f=P.Bd.Gd.prototype;f.cg="Generic";f.fs=function(a){this.cg=a};f.PG=function(){return this.cg};f.Cm="";f.$o=function(a){this.Cm=a};f.nI=function(){return this.Cm};f.Nb=null;f.Be=function(a){this.Nb=a};f.Rd=function(){return this.Nb};f.g=function(){P.Bd.Gd.d.g.call(this);this.cg&&delete this.cg;this.Cm&&delete this.Cm;this.Nb&&delete this.Nb};v("gxnat.vis.VisNode.prototype.setCategory",P.Bd.Gd.prototype.fs);
v("gxnat.vis.VisNode.prototype.getCategory",P.Bd.Gd.prototype.PG);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",P.Bd.Gd.prototype.$o);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",P.Bd.Gd.prototype.nI);v("gxnat.vis.VisNode.prototype.setTitle",P.Bd.Gd.prototype.Be);v("gxnat.vis.VisNode.prototype.getTitle",P.Bd.Gd.prototype.Rd);v("gxnat.vis.VisNode.prototype.dispose",P.Bd.Gd.prototype.g);function zl(a){this.Hp=new JSZip(a)}w(zl,wc);v("gxnat.Zip",zl);function Al(a,b,c,d){if(!Fa(a,".zip")){if(!Fa(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=P.Ix}var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new zl(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}zl.prototype.lg=function(){return this.Hp.files};
zl.prototype.jv=function(a,b){var c=0,d=this.lg(),e=nb(d);C(d,function(d){d.asArrayBuffer();a(d.name,d.asArrayBuffer());c==e-1&&null!=b&&b();c++}.bind(this))};zl.prototype.g=function(){zl.d.g.call(this);this.jv(function(a){this.Hp.remove(a)}.bind(this));D(this.Hp);delete this.Hp};v("gxnat.Zip.prototype.getFiles",zl.prototype.lg);v("gxnat.Zip.prototype.loopFiles",zl.prototype.jv);v("gxnat.Zip.getFilesAsZip",Al);v("gxnat.Zip.prototype.dispose",zl.prototype.g);v("gxnat.slicerNode",function(){});
function Bl(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function Cl(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",Bl);v("gxnat.slicerNode.toFloatArray",Cl);function Dl(){na(this)}v("gxnat.slicerNode.Node",Dl);function El(a,b){na(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;E(Bl(b),function(b){E(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.Dn=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=Cl(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=Cl(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(El,Dl);v("gxnat.slicerNode.Display",El);function Fl(a,b){El.call(this,a,b)}w(Fl,El);v("gxnat.slicerNode.Mesh",Fl);function Gl(a,b){if(a instanceof Gl)this.pd=a.Pw();else{var c;if(c=ia(a))a:{for(var d=c=0;d<a.length;d++){if(!ia(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!u(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.pd=Nb(a);else if(a instanceof uh)this.pd=Hl(a.height,a.width);else if(u(a)&&u(b)&&0<a&&0<b)this.pd=Hl(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.zd=new uh(this.pd[0].length,this.pd.length)}
function Il(a,b,c){for(var d=0;d<a.nj().height;d++)for(var e=0;e<a.nj().width;e++)b.call(c,a.pd[d][e],d,e,a)}function Jl(a,b){var c=new Gl(a.nj());Il(a,function(d,e,h){c.pd[e][h]=b.call(void 0,d,e,h,a)});return c}function Hl(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=Gl.prototype;f.add=function(a){if(!vh(this.zd,a.nj()))throw Error("Matrix summation is only supported on arrays of equal size");return Jl(this,function(b,c,d){return b+a.pd[c][d]})};
f.Tl=function(a,b){if(this.zd.width!=a.zd.width||this.zd.height!=a.zd.height)return!1;for(var c=b||0,d=0;d<this.zd.height;d++)for(var e=0;e<this.zd.width;e++)if(!(Math.abs(this.pd[d][e]-a.pd[d][e])<=(c||1E-6)))return!1;return!0};f.nj=function(){return this.zd};
f.multiply=function(a){if(a instanceof Gl){if(this.zd.width!=a.nj().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return Kl(this,a)}if(u(a))return Ll(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.Hc=function(a){if(!vh(this.zd,a.nj()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return Jl(this,function(b,c,d){return b-a.pd[c][d]})};
f.Pw=function(){return this.pd};f.toString=function(){var a=0;Il(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];E(this.pd,function(c){b.push("[ ");E(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Ml(a,b,c){return 0<=b&&b<a.zd.height&&0<=c&&c<a.zd.width}
function Kl(a,b){var c=new Gl(a.zd.height,b.nj().width);Il(c,function(a,e,h){for(var k=a=0;k<this.zd.width;k++)a+=(Ml(this,e,k)?this.pd[e][k]:0)*(Ml(b,k,h)?b.pd[k][h]:0);if(!Ml(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.zd.height+","+c.zd.width+")");c.pd[e][h]=a},a);return c}function Ll(a,b){return Jl(a,function(a){return a*b})};function Nl(a,b,c){El.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=Jl(new Gl(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.zw=new Ol(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.ir=b;this.ys=this.Dn?parseInt(this.Dn.getAttribute("upperThreshold")):null;this.sr=this.Dn?parseInt(this.Dn.getAttribute("lowerThreshold")):null;this.visible=c}w(Nl,El);v("gxnat.slicerNode.Volume",Nl);function Ol(a,b,c){var d=new Gl([[0],[0],[0],[1]]);E([a,b,c],function(a,b){var c=a.multiply(d).Pw(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.HL=c;break;case 1:this.eG=c;break;case 2:this.VF=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",Ol);function Pl(a,b){na(this);this.backgroundColor=zj(a);this.Oy=zj(b)}w(Pl,Dl);v("gxnat.slicerNode.BackgroundColor",Pl);function Ql(a,b,c,d,e,h,k,l){na(this);this.element=a;this.iq=b;this.backgroundColor=c;this.aB=d;this.pn=e;this.DM=h;this.JJ=k;this.DG=l}w(Ql,Dl);v("gxnat.slicerNode.SceneView",Ql);function Rl(a){wc.call(this);a instanceof Ql?(this.pn=a.pn,this.iq=a.iq,this.backgroundColor=a.backgroundColor,this.aB=a.aB):a instanceof Nl?(this.origin=a.origin||[0,0,0],this.ys=a.ys||1E4,this.sr=a.sr||-1E4,this.bx=a.bx||!1,this.ir=a.ir||!1,this.zw=a.zw||null,a.ih&&(this.YA=a.labelMapFile,this.tJ=a.colorTableFile)):a instanceof Fl&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Rl,wc);v("gxnat.vis.RenderProperties",Rl);Rl.prototype.g=function(){Rl.d.g.call(this);D(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Rl.prototype.g);function Sl(a){P.Bd.Gd.call(this);this.de=a||null}w(Sl,P.Bd.Gd);v("gxnat.vis.Renderable",Sl);Sl.prototype.tw=function(a){this.de=a instanceof Rl?a:new Rl(a)};Sl.prototype.ZH=function(){return this.de};Sl.prototype.g=function(){Sl.d.g.call(this);this.de&&(this.de.g(),delete this.de)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Sl.prototype.tw);v("gxnat.vis.Renderable.prototype.getRenderProperties",Sl.prototype.ZH);v("gxnat.vis.Renderable.prototype.dispose",Sl.prototype.g);function Tl(a,b){Sl.call(this,b);this.kj=a||[];null!=b&&this.tw(b)}w(Tl,Sl);v("gxnat.vis.Viewable",Tl);f=Tl.prototype;f.Xh=null;f.eH=function(){return this.Xh};f.QL=function(a){return this.Xh=a};
f.kC=function(a,b,c){null!=this.Xh&&D(this.Xh);this.Xh={};var d=this.lg();E(d,function(a){this.Xh[a]=null}.bind(this));var e,h,k;a.jv(function(a,b){p=0;for(m=d.length;p<m;p++)if(k=a.split("/"),h=k[k.length-1],"."!=h[0]&&(e=d[p],Fa(e,h)))if(null!=c)for(var p=0,m=c.length;p<m;p++)Fa(e,c[p])&&(this.Xh[e]=b,p=m);else{this.Xh[e]=b;break}}.bind(this),b);a.g()};f.lg=function(){return this.kj};f.yL=function(a){window.HP.log("REMOVING FILE",a);Lb(this.kj,a)};
f.Pi=function(a,b){null==this.kj&&(this.kj=[]);g(a)||(a=[a]);E(a,function(a){null!=b&&null==b(a)||this.kj.push(a)}.bind(this))};f.g=function(){Tl.d.g.call(this);this.kj&&(Jb(this.kj),delete this.kj)};v("gxnat.vis.Viewable.prototype.getFileData",Tl.prototype.eH);v("gxnat.vis.Viewable.prototype.setFileData",Tl.prototype.QL);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Tl.prototype.kC);v("gxnat.vis.Viewable.prototype.getFiles",Tl.prototype.lg);v("gxnat.vis.Viewable.prototype.removeFile",Tl.prototype.yL);
v("gxnat.vis.Viewable.prototype.addFiles",Tl.prototype.Pi);v("gxnat.vis.Viewable.prototype.dispose",Tl.prototype.g);function Ul(a){Sl.call(this);null!=a?g(a)||(a=[a]):a=[];this.Fd=a}w(Ul,Sl);v("gxnat.vis.ViewableGroup",Ul);Ul.prototype.yy=function(a){return this.Fd.push(a)};Ul.prototype.KG=function(){var a=[];E(this.Fd,function(b){a=Mb(a,b.lg())});return a};Ul.prototype.wA=function(){return this.Fd};Ul.prototype.g=function(){Ul.d.g.call(this);E(this.Fd,function(a){g(a)?E(a,function(a){a.g()}):a instanceof Tl&&a.g()});delete this.Fd};v("gxnat.vis.ViewableGroup.prototype.addViewable",Ul.prototype.yy);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Ul.prototype.KG);v("gxnat.vis.ViewableGroup.prototype.getViewables",Ul.prototype.wA);v("gxnat.vis.ViewableGroup.prototype.dispose",Ul.prototype.g);function Vl(){P.Bd.Gd.call(this);this.Wc=[]}w(Vl,P.Bd.Gd);v("gxnat.vis.ViewableTree",Vl);function Wl(a,b,c){this.vL=a;this.jM=b;this.BG=c}v("gxnat.vis.ViewableTree.metadataCollection",Wl);f=Vl.prototype;f.Rr=null;f.zm=null;f.Wl=null;f.orientation=null;f.Ub=function(){return this.orientation};f.Wo=function(a){this.Rr=a};f.Yo=function(a){this.zm=a};f.So=function(a){this.Wl=a};f.yI=function(){return this.Wc};
f.g=function(){Vl.d.g.call(this);null!=this.Rr&&(D(this.Rr),delete this.nQ);null!=this.zm&&(D(this.zm),delete this.yQ);null!=this.Wl&&(D(this.Wl),delete this.PP);null!=this.Wc&&(E(this.Wc,function(a){a.g()}),delete this.Wc);null!=this.hD&&Jb(this.hD);delete this.hD;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Wl);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Vl.prototype.Rr);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Vl.prototype.zm);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Vl.prototype.Wl);v("gxnat.vis.ViewableTree.prototype.orientation",Vl.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Vl.prototype.Ub);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Vl.prototype.Wo);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Vl.prototype.Yo);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Vl.prototype.So);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Vl.prototype.yI);
v("gxnat.vis.ViewableTree.prototype.dispose",Vl.prototype.g);function Xl(a,b,c){Vl.call(this);this.fs(a);null!=c&&null!=b&&(this.Hn=c,this.ni=Zg(this.Hn,b.URI,"experiments"),this.Cp=new Ug(this.ni));this.io=b;this.Ae={}}w(Xl,Vl);v("gxnat.vis.AjaxViewableTree",Xl);var Yl={ID:"Scan ID",Name:"Name",type:"Scan Type"},Zl={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},$l={label:"Session"};function am(a,b,c){P.fi(a,function(a){g(a);E(a,function(a){b(a)});c&&c()})}f=Xl.prototype;f.Yh=null;f.jj=!1;
f.lC=function(a,b){null==this.Yh&&(this.Yh={});this.Yh[a]=b};f.sA=function(){var a=0;C(this.Yh,function(b,c){a+=this.Vz(c)}.bind(this));return a};f.Vz=function(a){return parseInt(this.Yh[a].Size,10)};f.fH=function(){return this.Yh};f.hH=function(){return this.jj};f.mC=function(a){this.jj=a};f.bH=function(){return this.Hn};f.YH=function(){return this.ni};f.cI=function(){return this.Ae};f.yu=function(){var a="";C(this.Ae,function(b,c){null!=b&&0<b.length&&(a+=c+": "+b+"<br>")});return a};
f.CC=function(a){this.Ae=a};f.xm=function(){C(Yl,function(a,b){null!=this.io[b]&&(this.Ae[a]=this.io[b])}.bind(this))};f.Wo=function(a){Xl.d.Wo.call(this,a)};f.Yo=function(a){Xl.d.Yo.call(this,a);C(Zl,function(a,c){null!=this.zm[c]&&(this.Ae[a]=this.zm[c])}.bind(this))};f.So=function(a){Xl.d.So.call(this,a);C($l,function(a,c){null!=this.Wl[c]&&(this.Ae[a]=this.Wl[c])}.bind(this))};f.iH=function(){return this.Jn};f.tr=function(a){a=a[this.In];if(!Ea(a,"/"))return this.ni+"!"+a};
f.lj=function(a){if(this.jj)a();else{var b=0,c=0,d="",e;P.fi(this.ni+this.Cq,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.tr(e))this.lC(d,e),this.Pi(d,this.Yl);a();this.jj=!0}.bind(this))}};f.Yl=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.Ck=function(){};function bm(a,b,c,d){var e=new Ug(a);am(a+"/"+b.prototype.Jn,function(a){new b(a,e.mi("experiments"),c)},d)}
f.g=function(){Xl.d.g.call(this);null!=this.Yh&&(D(this.Yh),delete this.Yh);delete this.jj;D(this.Ae);delete this.Ae;null!=this.io&&(D(this.io),delete this.io);null!=this.Cp&&(this.Cp.g(),delete this.Cp);delete this.Hn;delete this.ni};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Yl);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Zl);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",$l);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",am);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",bm);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Xl.prototype.jj);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Xl.prototype.lC);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Xl.prototype.sA);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Xl.prototype.Vz);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Xl.prototype.fH);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Xl.prototype.hH);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Xl.prototype.mC);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Xl.prototype.bH);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Xl.prototype.YH);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Xl.prototype.cI);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfoAsHtml",Xl.prototype.yu);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Xl.prototype.CC);
v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Xl.prototype.xm);v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Xl.prototype.Wo);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Xl.prototype.Yo);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Xl.prototype.So);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Xl.prototype.iH);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Xl.prototype.tr);
v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Xl.prototype.lj);v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Xl.prototype.Yl);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Xl.prototype.Ck);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Xl.prototype.g);function cm(a,b,c,d){this.files=a;this.KJ=b;this.Mw=c;this.nu=d}v("xiv.sampleData.Sample",cm);function dm(){wc.call(this);this.Lg=[]}w(dm,wc);v("xiv.sampleData.SampleCollection",dm);dm.prototype.$H=function(){return this.Lg};dm.prototype.g=function(){dm.d.g.call(this);E(this.Lg,function(a){D(a)});delete this.Lg};v("xiv.sampleData.SampleCollection.Samples",dm.Lg);v("xiv.sampleData.SampleCollection.getSamples",dm.$H);v("xiv.sampleData.SampleCollection.dispose",dm.g);function em(){dm.call(this);this.Lg.push(this.jw)}w(em,dm);v("xiv.sampleData.SlicerScenes",em);
em.prototype.jw=new cm("src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/oneView_brain_2.mrml;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm.nrrd.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/5%3a%20t1_mpr_1mm_p2_pos50-label.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/F.fcsv;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/brain.vtk;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/BrainMesh_Underside.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/Top.png".split(";"),{Name:"Example Slicer Scene",
Type:"Slicer Scene"},"src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function fm(){}v("xiv",fm);fm.MODE="live";v("xiv.SAMPLE_DATA_PATH","xiv/sample-data");v("xiv.SAMPLE_SCAN_PREFIX","xiv/sample-data/scans/");function gm(a,b,c){Xl.call(this,"Scans",a,b);this.Ae["Total Frames"]=0;c&&c(this)}w(gm,Xl);v("gxnat.vis.Scan",gm);var hm=["dcm","dicom"];f=gm.prototype;f.Jn="scans";f.Cq="/files";f.In="URI";
f.xm=function(){gm.d.xm.call(this);if(null!=this.Zk["parameters/orientation"]){var a;a:{switch(this.Zk["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.Ae.Orientation=a;this.orientation=this.Ae.Orientation}null!=this.Zk["parameters/acqType"]&&(this.Ae["Acq. Type"]=this.Zk["parameters/acqType"])};
f.lj=function(a){this.jj?a():P.fi(this.Cp.originalUrl,function(b){this.Zk=b.items[0].data_fields;this.xm();gm.d.lj.call(this,function(){this.Ck();a()}.bind(this))}.bind(this))};f.Yl=function(a){a=gm.d.Yl.call(this,a);if(null!=a){for(var b=0,c=hm.length;b<c;b++)if(Fa(a,"."+hm[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.Pi=function(a){this.fs("Scans");if(0==this.Wc.length){var b=new Ul;b.Be("scan");b.fs("scans");this.Wc.push(b)}0==this.Wc[0].Fd.length&&this.Wc[0].yy(new Tl);this.Wc[0].Fd[0].Pi(a,this.Yl);this.Ae["Total Frames"]=this.Wc[0].Fd[0].lg().length};f.tr=function(a){return Zg(this.Hn,a[this.In],"experiments")};f.Ck=function(a){if(this.Wc&&this.Wc[0]){var b=this.Wc[0].Fd[0].lg().sort(P.Br);this.$o(b[Math.floor(b.length/2)]+P.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){gm.d.g.call(this);null!=this.Zk&&D(this.Zk);delete this.Zk};v("gxnat.vis.Scan.acceptableFileTypes",hm);v("gxnat.vis.Scan.prototype.folderQuerySuffix",gm.prototype.Jn);v("gxnat.vis.Scan.prototype.fileQuerySuffix",gm.prototype.Cq);v("gxnat.vis.Scan.prototype.fileContentsKey",gm.prototype.In);v("gxnat.vis.Scan.prototype.setViewableMetadata",gm.prototype.xm);v("gxnat.vis.Scan.prototype.getFileList",gm.prototype.lj);v("gxnat.vis.Scan.prototype.fileFilter",gm.prototype.Yl);
v("gxnat.vis.Scan.prototype.addFiles",gm.prototype.Pi);v("gxnat.vis.Scan.prototype.makeFileUrl",gm.prototype.tr);v("gxnat.vis.Scan.prototype.getThumbnailImage",gm.prototype.Ck);v("gxnat.vis.Scan.prototype.dispose",gm.prototype.g);function im(a,b,c){$c.call(this);this.target=a;this.handle=b||a;this.oo=c||new wh(NaN,NaN,NaN,NaN);this.la=Mh(a);this.Cc=new gj(this);zc(this,va(Ac,this.Cc));H(this.handle,["touchstart","mousedown"],this.ep,!1,this)}w(im,$c);var jm=F||hc&&pc("1.9.3");f=im.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.Fw=0;f.Gw=0;f.Uh=0;f.Pd=0;f.Tb=!0;f.dj=!1;f.OA=0;f.zr=0;f.ZI=!1;f.fl=!1;f.fj=function(a){this.fl=a};f.ib=function(){return this.Cc};function km(a,b){a.oo=b||new wh(NaN,NaN,NaN,NaN)}
f.zC=function(a){this.$r=a};f.Lb=function(a){this.Tb=a};f.f=function(){im.d.f.call(this);Uc(this.handle,["touchstart","mousedown"],this.ep,!1,this);this.Cc.yg();jm&&this.la.releaseCapture();this.handle=this.target=null};function lm(a){da(a.oh)||(a.oh=Mi(a.target));return a.oh}
f.ep=function(a){var b="mousedown"==a.type;if(!this.Tb||this.dj||b&&!Jc(a))this.dispatchEvent("earlycancel");else{mm(a);if(0==this.OA)if(this.dispatchEvent(new nm("start",this,a.clientX,a.clientY)))this.dj=!0,a.preventDefault();else return;else a.preventDefault();var b=this.la,c=b.documentElement,d=!jm;this.Cc.D(b,["touchmove","mousemove"],this.OI,d);this.Cc.D(b,["touchend","mouseup"],this.gj,d);jm?(c.setCapture(!1),this.Cc.D(c,"losecapture",this.gj)):this.Cc.D(Wh(b),"blur",this.gj);F&&this.ZI&&this.Cc.D(b,
"dragstart",Ec);this.$r&&this.Cc.D(this.$r,"scroll",this.xj,d);this.clientX=this.Fw=a.clientX;this.clientY=this.Gw=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Uh=this.fl?Vj(this.target):this.target.offsetLeft;this.Pd=this.target.offsetTop;this.Xv=yi(Kh(this.la));this.zr=xa()}};
f.gj=function(a,b){this.Cc.yg();jm&&this.la.releaseCapture();if(this.dj){mm(a);this.dj=!1;var c=om(this,this.Uh),d=pm(this,this.Pd);this.dispatchEvent(new nm("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function mm(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.ta(a.Qc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.ta(a.Qc.changedTouches[0],a.currentTarget)}
f.OI=function(a){if(this.Tb){mm(a);var b=(this.fl&&lm(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.dj){var d=this.Fw-this.clientX,e=this.Gw-this.clientY;if(d*d+e*e>this.OA)if(this.dispatchEvent(new nm("start",this,a.clientX,a.clientY)))this.dj=!0;else{this.rk||this.gj(a);return}}c=qm(this,b,c);b=c.x;c=c.y;this.dj&&this.dispatchEvent(new nm("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(rm(this,a,b,c),a.preventDefault())}};function qm(a,b,c){var d=yi(Kh(a.la));b+=d.x-a.Xv.x;c+=d.y-a.Xv.y;a.Xv=d;a.Uh+=b;a.Pd+=c;b=om(a,a.Uh);a=pm(a,a.Pd);return new rh(b,a)}f.xj=function(a){var b=qm(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;rm(this,a,b.x,b.y)};function rm(a,b,c,d){a.Zt(c,d);a.dispatchEvent(new nm("drag",a,b.clientX,b.clientY,0,c,d))}
function om(a,b){var c=a.oo,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function pm(a,b){var c=a.oo,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.Zt=function(a,b){this.fl&&lm(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.qg=function(){return this.dj};
function nm(a,b,c,d,e,h,k,l){Cc.call(this,a);this.clientX=c;this.clientY=d;this.left=da(h)?h:b.Uh;this.top=da(k)?k:b.Pd;this.hu=b;this.uG=!!l}w(nm,Cc);yb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function sm(){this.dw="";this.LE=tm;this.vz=null}sm.prototype.Sz=function(){return this.vz};sm.prototype.toString=function(){return"SafeHtml{"+this.dw+"}"};function um(a){if(a instanceof sm&&a.constructor===sm&&a.LE===tm)return a.dw;fb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}yb("action","cite","data","formaction","href","manifest","poster","src");yb("link","script","style");var tm={};function vm(a,b){var c=new sm;c.dw=a;c.vz=b;return c}var wm=vm("",0);function xm(a,b){$c.call(this);this.ed=new gj(this);this.mw(a||null);b&&(this.Gm=b)}w(xm,$c);f=xm.prototype;f.q=null;f.TF=!0;f.My=null;f.Ny=null;f.om=!1;f.YL=!1;f.$u=-1;f.UI=!1;f.wG=!0;f.Gm="toggle_display";f.a=function(){return this.q};f.mw=function(a){if(this.om)throw Error("Can not change this state of the popup while showing.");this.q=a};f.GC=function(a,b){this.ym=a;this.gm=b};f.ib=function(){return this.ed};f.ua=function(){return this.om};
f.ca=function(a){this.ym&&this.ym.stop();this.gm&&this.gm.stop();a?this.xw():this.hm()};f.ze=fa;
f.xw=function(){if(!this.om&&this.zv()){if(!this.q)throw Error("Caller must call setElement before trying to show the popup");this.ze();var a=Mh(this.q);this.UI&&this.ed.D(a,"keydown",this.fK,!0);if(this.TF)if(this.ed.D(a,"mousedown",this.BB,!0),F){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.ed.D(a,"mousedown",this.BB,!0);this.ed.D(a,"deactivate",this.AB)}else this.ed.D(a,"blur",
this.AB);"toggle_display"==this.Gm?(this.q.style.visibility="visible",Xi(this.q,!0)):"move_offscreen"==this.Gm&&this.ze();this.om=!0;this.$u=xa();this.ym?(Tc(this.ym,"end",this.IB,!1,this),this.ym.play()):this.IB()}};f.hm=function(a){if(!this.om||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.ed&&this.ed.yg();this.om=!1;xa();this.gm?(Tc(this.gm,"end",va(this.cz,a),!1,this),this.gm.play()):this.cz(a);return!0};
f.cz=function(a){"toggle_display"==this.Gm?this.YL?Yf(this.NA,0,this):this.NA():"move_offscreen"==this.Gm&&(this.q.style.top="-10000px");this.Iv(a)};f.NA=function(){this.q.style.visibility="hidden";Xi(this.q,!1)};f.zv=function(){return this.dispatchEvent("beforeshow")};f.IB=function(){this.dispatchEvent("show")};f.Iv=function(a){this.dispatchEvent({type:"hide",target:a})};f.BB=function(a){a=a.target;ii(this.q,a)||ym(this,a)||this.Ny&&!ii(this.Ny,a)||150>xa()-this.$u||this.hm(a)};
f.fK=function(a){27==a.keyCode&&this.hm(a.target)&&(a.preventDefault(),a.stopPropagation())};f.AB=function(a){if(this.wG){var b=Mh(this.q);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||ii(this.q,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>xa()-this.$u||this.hm()}};function ym(a,b){return Eb(a.My||[],function(a){return b===a||ii(a,b)})}f.f=function(){xm.d.f.call(this);this.ed.g();Ac(this.ym);Ac(this.gm);delete this.q;delete this.ed;delete this.My};function zm(a){$c.call(this);this.q=a;a=F?"focusout":"blur";this.vJ=H(this.q,F?"focusin":"focus",this,!F);this.wJ=H(this.q,a,this,!F)}w(zm,$c);zm.prototype.handleEvent=function(a){var b=new Hc(a.Qc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};zm.prototype.f=function(){zm.d.f.call(this);Vc(this.vJ);Vc(this.wJ);delete this.q};function Am(a,b){kj.call(this,b);this.zM=!!a;this.mo=null}w(Am,kj);f=Am.prototype;f.lu=null;f.Ic=!1;f.Pe=null;f.qd=null;f.Dg=null;f.At=!1;f.$=function(){return"goog-modalpopup"};f.Zh=function(){return this.Pe};f.B=function(){Am.d.B.call(this);var a=this.a(),b=Ia(this.$()).split(" ");fl(a,b);mi(a,!0);Xi(a,!1);Bm(this);Cm(this)};
function Bm(a){if(a.zM&&!a.qd){var b;b=a.N().B("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.qd=b;a.qd.className=a.$()+"-bg";Xi(a.qd,!1);Wi(a.qd,0)}a.Pe||(a.Pe=a.N().B("div",a.$()+"-bg"),Xi(a.Pe,!1))}function Cm(a){a.Dg||(a.Dg=a.N().createElement("span"),Xi(a.Dg,!1),mi(a.Dg,!0),a.Dg.style.position="absolute")}f.$B=function(){this.At=!1};f.Qe=function(a){return!!a&&"DIV"==a.tagName};
f.ne=function(a){Am.d.ne.call(this,a);a=Ia(this.$()).split(" ");fl(this.a(),a);Bm(this);Cm(this);Xi(this.a(),!1)};f.hb=function(){this.qd&&bi(this.qd,this.a());bi(this.Pe,this.a());Am.d.hb.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.Dg,a.nextSibling);this.lu=new zm(vi(this.N()));this.ib().D(this.lu,"focusin",this.kK);Dm(this,!1)};f.Dc=function(){this.ua()&&this.ca(!1);Ac(this.lu);Am.d.Dc.call(this);S(this.qd);S(this.Pe);S(this.Dg)};
f.ca=function(a){a!=this.Ic&&(this.Vk&&this.Vk.stop(),this.Ml&&this.Ml.stop(),this.Uk&&this.Uk.stop(),this.Ll&&this.Ll.stop(),this.ma&&Dm(this,a),a?this.xw():this.hm())};function Dm(a,b){if(b){a.em||(a.em=[]);for(var c=a.N(),c=c.ou(c.la.body),d=0;d<c.length;d++){var e=c[d];e==a.q||bl(e,"hidden")||(al(e,"hidden",!0),a.em.push(e))}}else if(a.em){for(d=0;d<a.em.length;d++)a.em[d].removeAttribute("aria-hidden");a.em=null}}f.GC=function(a,b,c,d){this.Vk=a;this.Uk=b;this.Ml=c;this.Ll=d};
f.xw=function(){if(this.dispatchEvent("beforeshow")){try{this.mo=vi(this.N()).activeElement}catch(a){}this.iw();this.ze();this.ib().D(xi(this.N()),"resize",this.iw);Em(this,!0);this.focus();this.Ic=!0;this.Vk&&this.Ml?(Tc(this.Vk,"end",this.Kr,!1,this),this.Ml.play(),this.Vk.play()):this.Kr()}};
f.hm=function(){if(this.dispatchEvent("beforehide")){this.ib().vb(xi(this.N()),"resize",this.iw);this.Ic=!1;this.Uk&&this.Ll?(Tc(this.Uk,"end",this.xo,!1,this),this.Ll.play(),this.Uk.play()):this.xo();try{var a=vi(this.N()).body,b=vi(this.N()).activeElement||a;this.mo&&b==a&&this.mo!=a&&this.mo.focus()}catch(c){}this.mo=null}};function Em(a,b){a.qd&&Xi(a.qd,b);a.Pe&&Xi(a.Pe,b);Xi(a.a(),b);Xi(a.Dg,b)}f.Kr=function(){this.dispatchEvent("show")};f.xo=function(){Em(this,!1);this.dispatchEvent("hide")};
f.ua=function(){return this.Ic};f.focus=function(){this.Hz()};f.iw=function(){this.qd&&Xi(this.qd,!1);this.Pe&&Xi(this.Pe,!1);var a=vi(this.N()),b=Uh(Wh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.qd&&(Xi(this.qd,!0),Ri(this.qd,c,a));this.Pe&&(Xi(this.Pe,!0),Ri(this.Pe,c,a))};
f.ze=function(){var a=vi(this.N()),b=Wh(a)||window;if("fixed"==Di(this.a()))var c=a=0;else c=yi(this.N()),a=c.x,c=c.y;var d=U(this.a()),b=Uh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);Ei(this.a(),a,c);Ei(this.Dg,a,c)};f.kK=function(a){this.At?this.$B():a.target==this.Dg&&Yf(this.Hz,0,this)};f.Hz=function(){try{F&&vi(this.N()).body.focus(),this.a().focus()}catch(a){}};
f.f=function(){Ac(this.Vk);this.Vk=null;Ac(this.Uk);this.Uk=null;Ac(this.Ml);this.Ml=null;Ac(this.Ll);this.Ll=null;Am.d.f.call(this)};function Fm(a,b,c){Am.call(this,b,c);this.Od=a||"modal-dialog";this.ba=Gm(Gm(new Hm,Im,!0),Jm,!1,!0)}w(Fm,Am);f=Fm.prototype;f.Az=!0;f.Ku=!0;f.nv=!0;f.yq=!0;f.fq=.5;f.Nb="";f.Oc=null;f.Ma=null;f.eu=!1;f.Ad=null;f.Yd=null;f.vs=null;f.De=null;f.fg=null;f.bd=null;f.cw="dialog";f.$=function(){return this.Od};f.Be=function(a){this.Nb=a;this.Yd&&ji(this.Yd,a)};f.Rd=function(){return this.Nb};f.al=function(a){this.Oc=a=vm(a,null);this.fg&&(this.fg.innerHTML=um(a))};
f.getContent=function(){return null!=this.Oc?um(this.Oc):""};f.mj=function(){return this.cw};f.Ha=function(){this.a()||this.k();return this.fg};f.Oq=function(){this.a()||this.k();return this.Ad};f.Zh=function(){this.a()||this.k();return Fm.d.Zh.call(this)};function Km(a,b){a.fq=b;if(a.a()){var c=a.Zh();c&&Wi(c,a.fq)}}function Lm(a,b){b!=a.nv&&Mm(a,b)}function Mm(a,b){a.nv=b;if(a.ma){var c=a.N(),d=a.Zh(),e=a.qd;b?(e&&c.Ru(e,a.a()),c.Ru(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.ua()&&Dm(a,b)}
f.is=function(a){this.yq=a;this.Ro(a&&this.ma)};f.Ro=function(a){var b=Ia(this.Od+"-title-draggable").split(" ");this.a()&&(a?fl(this.Ad,b):hl(this.Ad,b));a&&!this.Ma?(this.Ma=new im(this.a(),this.Ad),fl(this.Ad,b),H(this.Ma,"start",this.js,!1,this)):!a&&this.Ma&&(this.Ma.g(),this.Ma=null)};
f.B=function(){Fm.d.B.call(this);var a=this.a(),b=this.N();this.Ad=b.B("div",this.Od+"-title",this.Yd=b.B("span",{className:this.Od+"-title-text",id:nj(this)},this.Nb),this.De=b.B("span",this.Od+"-title-close"));$h(a,this.Ad,this.fg=b.B("div",this.Od+"-content"),this.bd=b.B("div",this.Od+"-buttons"));$k(this.Yd,"heading");$k(this.De,"button");mi(this.De,!0);al(this.De,"label",Nm);this.vs=this.Yd.id;$k(a,this.mj());al(a,"labelledby",this.vs||"");this.Oc&&(this.fg.innerHTML=um(this.Oc));Xi(this.De,
this.Ku);this.ba&&(a=this.ba,a.q=this.bd,a.k());Xi(this.bd,!!this.ba);Km(this,this.fq)};
f.ne=function(a){Fm.d.ne.call(this,a);a=this.a();var b=this.Od+"-content";this.fg=Ph(document,null,b,a)[0];this.fg||(this.fg=this.N().B("div",b),this.Oc&&(this.fg.innerHTML=um(this.Oc)),a.appendChild(this.fg));var b=this.Od+"-title",c=this.Od+"-title-text",d=this.Od+"-title-close";(this.Ad=Ph(document,null,b,a)[0])?(this.Yd=Ph(document,null,c,this.Ad)[0],this.De=Ph(document,null,d,this.Ad)[0]):(this.Ad=this.N().B("div",b),a.insertBefore(this.Ad,this.fg));this.Yd?(this.Nb=pi(this.Yd),this.Yd.id||(this.Yd.id=
nj(this))):(this.Yd=R("span",{className:c,id:nj(this)}),this.Ad.appendChild(this.Yd));this.vs=this.Yd.id;al(a,"labelledby",this.vs||"");this.De||(this.De=this.N().B("span",d),this.Ad.appendChild(this.De));Xi(this.De,this.Ku);b=this.Od+"-buttons";(this.bd=Ph(document,null,b,a)[0])?(this.ba=new Hm(this.N()),this.ba.Jb(this.bd)):(this.bd=this.N().B("div",b),a.appendChild(this.bd),this.ba&&(a=this.ba,a.q=this.bd,a.k()),Xi(this.bd,!!this.ba));Km(this,this.fq)};
f.hb=function(){Fm.d.hb.call(this);this.ib().D(this.a(),"keydown",this.ki).D(this.a(),"keypress",this.ki);this.ib().D(this.bd,"click",this.cK);this.Ro(this.yq);this.ib().D(this.De,"click",this.XK);var a=this.a();$k(a,this.mj());""!==this.Yd.id&&al(a,"labelledby",this.Yd.id);this.nv||Mm(this,!1)};f.Dc=function(){this.ua()&&this.ca(!1);this.Ro(!1);Fm.d.Dc.call(this)};f.ca=function(a){a!=this.ua()&&(this.ma||this.k(),Fm.d.ca.call(this,a))};f.Kr=function(){Fm.d.Kr.call(this);this.dispatchEvent(Om)};
f.xo=function(){Fm.d.xo.call(this);this.dispatchEvent(Pm);this.eu&&this.g()};f.js=function(){var a=vi(this.N()),b=Uh(Wh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=U(this.a());"fixed"==Di(this.a())?km(this.Ma,new wh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):km(this.Ma,new wh(0,0,c-d.width,a-d.height))};f.XK=function(){Qm(this)};
function Qm(a){if(a.Ku){var b=a.ba,c=b&&b.Ht;c?(b=b.get(c),a.dispatchEvent(new Rm(c,b))&&a.ca(!1)):a.ca(!1)}}f.f=function(){this.bd=this.De=null;Fm.d.f.call(this)};function Sm(a,b){a.ba=b;if(a.bd){if(a.ba){var c=a.ba;c.q=a.bd;c.k()}else a.bd.innerHTML=um(wm);Xi(a.bd,!!a.ba)}}f.cK=function(a){a:{for(a=a.target;null!=a&&a!=this.bd;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.ba.get(a);this.dispatchEvent(new Rm(a,b))&&this.ca(!1)}};
f.ki=function(a){var b=!1,c=!1,d=this.ba,e=a.target;if("keydown"==a.type)if(this.Az&&27==a.keyCode){var h=d&&d.Ht,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new Rm(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.At=!0;try{this.Dg.focus()}catch(k){}Yf(this.$B,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.De)Qm(this);else if(d){var l=d.$t,n;if(n=l)a:{n=d.q.getElementsByTagName("BUTTON");for(var p=
0,m;m=n[p];p++)if(m.name==l||m.id==l){n=m;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new Rm(h,String(d.get(h)))))}else e==this.De&&32==a.keyCode&&Qm(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.ca(!1)};function Rm(a,b){this.type=Tm;this.key=a;this.caption=b}w(Rm,Cc);var Tm="dialogselect",Pm="afterhide",Om="aftershow";function Hm(a){this.rb=a||Kh();id.call(this)}var Um,Vm;
w(Hm,id);f=Hm.prototype;f.Od="goog-buttonset";f.$t=null;f.q=null;f.Ht=null;f.set=function(a,b,c,d){id.prototype.set.call(this,a,b);c&&(this.$t=a);d&&(this.Ht=a);return this};function Gm(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.k=function(){if(this.q){this.q.innerHTML=um(wm);var a=Kh(this.q);this.forEach(function(b,c){var d=a.B("button",{name:c},b);c==this.$t&&(d.className=this.Od+"-default");this.q.appendChild(d)},this)}};
f.Jb=function(a){if(a&&1==a.nodeType){this.q=a;a=this.q.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=pi(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==Wm);h&&el(c,this.Od+"-default")}}};f.a=function(){return this.q};f.N=function(){return this.rb};var Wm="cancel",Nm="Close",Im={key:"ok",caption:"OK"},Jm={key:Wm,caption:"Cancel"},Xm={key:"yes",caption:"Yes"},Ym={key:"no",caption:"No"},Zm={key:"save",caption:"Save"},$m={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Um=Gm(new Hm,Im,!0,!0),Gm(Gm(new Hm,Im,!0),Jm,!1,!0),Vm=Gm(Gm(new Hm,Xm,!0),Ym,!1,!0),Gm(Gm(Gm(new Hm,Xm),Ym,!0),Jm,!1,!0),Gm(Gm(Gm(new Hm,$m),Zm),Jm,!0,!0));function cn(){Fm.call(this);this.Az=!1}w(cn,Fm);v("nrg.ui.Dialog",cn);cn.ID_PREFIX="nrg.ui.Dialog";cn.CSS={Ax:"nrg-ui-dialog-overlay",yp:"nrg-ui-dialog-background",Lj:"nrg-ui-dialog-closebutton",ND:"nrg-ui-dialog-closebutton-image",SE:"nrg-ui-dialog-subtext",Sj:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",yh:"nrg-ui-dialog-content",FD:"nrg-ui-dialog-buttons"};f=cn.prototype;f.kl={x:20,y:20};f.yq=!0;f.Ma=null;f.Wk=null;f.sm=null;f.xy=function(a){Q(this.Ow,a)};f.GF=function(a){Q(this.Oc,a)};
f.EF=function(a){Q(this.kk.parentNode,a)};f.FF=function(a){Q(this.kk,a)};f.iy=function(a){Q(this.lq,a)};f.DF=function(a){Q(this.Ft,a)};function dn(a){a.lq=Oh("modal-dialog-title-close",a.a())[0];Q(a.lq,cn.CSS.Lj);a.kk=R("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":cn.CSS.ND});a.kk.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.lq.appendChild(a.kk);H(a.kk,"click",function(a){this.ca(!this.ua());this.dispatchEvent({type:"f"});a.stopPropagation()}.bind(a))}
f.QF=function(){var a=this.a(),b=dk(a,600),c=ck(a,600),d=dk(a,600),a=ck(a,600);this.GC(b,c,d,a)};f.Ar=function(a,b,c,d){var e=this.a(),h=U(e.parentNode),k=U(e);c=null!=c?c:0;"left"==a?e.style.left=(0+c).toString()+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=(0+(null!=d?d:0)).toString()+"px")};
f.Nd=function(){var a=this.a(),b=U(this.a().parentNode);if(null!=this.Zh()){var c=this.Zh();0==c.opacity?S(c):sk(c,{width:b.width,height:b.height,"z-index":199})}var c=U(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);Ei(a,d,e)};f.is=function(a){this.yq=a;this.Ro(a&&this.ma)};
f.Ro=function(a){var b=Ia(this.$()+"-title-draggable").split(" "),c=this.Oq();this.a()&&(a?fl(c,b):hl(c,b));a&&!this.Ma?(this.Ma=new im(this.a(),this.Ad),fl(c,b),H(this.Ma,"start",this.js,!1,this)):!a&&this.Ma&&(this.Ma.g(),this.Ma=null)};f.Xw=function(){this.js()};f.VH=function(){return this.sm};f.Tz=function(){return null!=this.Ma?this.Ma.oo:null};
f.js=function(){var a=vi(this.N()),b=Wh(a)||window;null!=this.a()&&(a=U(this.a().parentNode),b=Uh(b||window),U(this.a()),this.sm=this.Ma.oo.clone(),"fixed"==Di(this.a())?km(this.Ma,new wh(0,0,Math.max(0,b.width-this.kl.x),Math.max(0,b.height-this.kl.y))):km(this.Ma,new wh(-1*this.kl.x,-1*this.kl.y,a.width+this.kl.x,a.height+this.kl.y)))};
f.ky=function(a){var b=R("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":cn.CSS.Ah});null==this.$n&&(this.$n=[]);this.$n.push(b);this.Ha().appendChild(b);null!=a&&(b.src=a);return b};f.gk=function(a){var b=R("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":cn.CSS.Sj},a);null==this.th&&(this.th=[]);this.th.push(b);b.innerHTML=a||"";this.Ha().appendChild(b);return b};f.ut=function(a){var b=R("div",{id:"ErrorSub_"+B(),"class":cn.CSS.SE});b.innerHTML=a;this.Ha().appendChild(b);return b};
f.NH=function(){return this.a()};f.k=function(a){if(!this.ma)cn.d.k.call(this,a);else if(null!=a&&this.a().parentNode!=a){$h(a,this.a());return}Q(this.a(),"nrg-ui-dialog");this.Ow=Oh("modal-dialog-title",this.a())[0];this.Oc=Oh("modal-dialog-content",this.a())[0];this.Ft=Oh("modal-dialog-buttons",this.a())[0];this.kk=null;dn(this);Q(this.Ft,cn.CSS.FD);Q(this.Ow,cn.CSS.TITLE);Q(this.Oc,cn.CSS.yh);cn.d.is.call(this,!1);this.is(!0)};
f.ca=function(a,b){!0==b&&cn.d.ca.call(this,a);null!=this.a()&&(null==this.Wk&&(this.Wk=Gi(this.a())),this.ua()&&!1==a?(this.Wk=Gi(this.a()),Bk(this.a(),200,function(){this.ca(a,!0)}.bind(this))):this.ua()||!0!=a||(cn.d.ca.call(this,a),Ei(this.a(),this.Wk),this.a().style.opacity=0,yk(this.a(),200)))};
f.Vr=function(){var a=this.a(),b=this.Ha(),c=0,d=0,e=0,h=0,k=a.style.overflow;a.style.overflow="visible";var l=this.a().style.opacity,n=this.a().style.visibility;this.a().style.opacity=1;null!=this.th&&E(this.th,function(a){e=a.scrollWidth;h=a.scrollHeight;c=e>c?e:c;d=h>d?h:d;Ri(a,e,h)});null!=k?a.style.overflow=k:a.style.removeProperty("overflow");var p=U(b),k=c>p.width?c:p.width,p=d>p.height?d:p.height;Ri(b,k,p);Ri(a,k+20,p+20);this.a().style.opacity=l;this.a().style.visibility=n};f.iI=function(){return this.th};
f.VI=function(){};f.f=function(){cn.d.f.call(this);delete this.Ft;delete this.Ow;delete this.Oc;delete this.kk;delete this.lq;null!=this.LB&&(S(this.LB),delete this.LB);null!=this.th&&(E(this.th,function(a){S(a);delete a}),delete this.th);null!=this.$n&&(E(this.$n,function(a){S(a);delete a}),delete this.$n);null!=this.Wk&&(D(this.Wk),delete this.Wk);null!=this.sm&&(D(this.sm),delete this.sm)};v("nrg.ui.Dialog.ID_PREFIX",cn.ID_PREFIX);v("nrg.ui.Dialog.EventType",{TN:"d",CLOSED:"e",QM:"f"});
v("nrg.ui.Dialog.prototype.addTitleClass",cn.prototype.xy);v("nrg.ui.Dialog.prototype.addContentClass",cn.prototype.GF);v("nrg.ui.Dialog.prototype.addCloseButtonClass",cn.prototype.EF);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",cn.prototype.FF);v("nrg.ui.Dialog.prototype.addCloseSpanClass",cn.prototype.iy);v("nrg.ui.Dialog.prototype.addButtonsClass",cn.prototype.DF);v("nrg.ui.Dialog.prototype.applyFadeTransitions",cn.prototype.QF);v("nrg.ui.Dialog.prototype.moveToCorner",cn.prototype.Ar);
v("nrg.ui.Dialog.prototype.center",cn.prototype.Nd);v("nrg.ui.Dialog.prototype.hideWindowOnHover",cn.prototype.VI);v("nrg.ui.Dialog.prototype.setDraggable",cn.prototype.is);v("nrg.ui.Dialog.prototype.updateLimits",cn.prototype.Xw);v("nrg.ui.Dialog.prototype.addImage",cn.prototype.ky);v("nrg.ui.Dialog.prototype.addText",cn.prototype.gk);v("nrg.ui.Dialog.prototype.addSubText",cn.prototype.ut);v("nrg.ui.Dialog.prototype.getOverlay",cn.prototype.NH);v("nrg.ui.Dialog.prototype.render",cn.prototype.k);
v("nrg.ui.Dialog.prototype.setVisible",cn.prototype.ca);v("nrg.ui.Dialog.prototype.getTextElements",cn.prototype.iI);v("nrg.ui.Dialog.prototype.resizeToContents",cn.prototype.Vr);v("nrg.ui.Dialog.prototype.getPreviousDraggerLimits",cn.prototype.VH);v("nrg.ui.Dialog.prototype.getDraggerLimits",cn.prototype.Tz);v("nrg.ui.Dialog.prototype.disposeInternal",cn.prototype.f);function en(){cn.call(this);Sm(this,null)}w(en,cn);v("nrg.ui.ErrorDialog",en);en.ID_PREFIX="nrg.ui.ErrorDialog";en.CSS={Ax:"nrg-ui-errordialog",Ah:"nrg-ui-errordialog-image",Sj:"nrg-ui-errordialog-text"};en.prototype.Ul=null;en.prototype.gk=function(a){en.d.gk.call(this,a);a=this.th;Q(a[a.length-1],en.CSS.Sj)};en.prototype.k=function(a){en.d.k.call(this,a);Q(this.a(),en.CSS.Ax);null==this.Ul&&(this.Ul=this.ky(serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png"),Q(this.Ul,en.CSS.Ah),this.Nd())};
en.prototype.f=function(){en.d.f.call(this);null!=this.Ul.parentNode&&S(this.Ul);delete this.Ul};v("nrg.ui.ErrorDialog.ID_PREFIX",en.ID_PREFIX);v("nrg.ui.ErrorDialog.CSS",en.CSS);v("nrg.ui.ErrorDialog.prototype.addText",en.prototype.gk);v("nrg.ui.ErrorDialog.prototype.disposeInternal",en.prototype.f);function fn(a,b,c,d){na(this);this.url=a;this.document=b;this.files=d}w(fn,Dl);v("gxnat.slicerNode.Mrml",fn);function gn(a,b){na(this);this.file=a;this.xe=b}w(gn,Dl);v("gxnat.slicerNode.Displayable",gn);function hn(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function jn(a,b,c){na(this);this.position=a;this.yM=b;this.focus=c}w(jn,Dl);v("gxnat.slicerNode.Camera",jn);function kn(a,b,c,d,e,h){na(this);this.position=a;this.color=b;this.name=h}w(kn,Dl);v("gxnat.slicerNode.Annotations",kn);function ln(){na(this)}w(ln,Dl);v("gxnat.slicerNode.Layout",ln);P.I={};v("gxnat.slicerUtils",P.I);P.I.jx="/scripts/viewer/xiv/vis/GenericColorTable.txt";P.I.Ez=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Fa(a[c],".mrml")&&b.push(a[c]);return b};P.I.xu=function(a,b){P.get(a,function(a){b(new hn(a))},"text")};P.I.iA=function(a,b,c){a=g(a)?a:[a];var d=P.I.Ez(a),e=[],h=0;E(d,function(b){P.I.xu(b,function(l){h++;e.push(new fn(b,l,0,a));h==d.length&&c(e)})})};
P.I.jz=function(a,b,c){P.I.Kz(a,b,function(b){c(new Ql(a,P.I.Oz(a),P.I.Lz(a),P.I.cA(a),b,P.I.zA(a),P.I.hA(a),null))})};P.I.mA=function(a,b){var c=[],d=[],e=0;E(a,function(a){c=P.I.nA(a.document);E(c,function(k){P.I.jz(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};P.I.Uz=function(a,b){a=r(a)?P.I.xu(a):a;var c=[];E(a.getElementsByTagName(b),function(a){c.push(a)});return c};P.I.nA=function(a){return P.I.Uz(a,"SceneView")};
P.I.Oz=function(a){var b=a.getElementsByTagName("Camera").length-1,c=a.getElementsByTagName("Camera")[b].getAttribute("position"),d=a.getElementsByTagName("Camera")[b].getAttribute("viewUp");a=a.getElementsByTagName("Camera")[b].getAttribute("focalPoint");return new jn(Cl(c),Cl(d),Cl(a))};P.I.rA=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
P.I.Lz=function(a){return new Pl(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};P.I.cA=function(a){return new ln(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
P.I.pm=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};P.I.gH=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Ya(b,"!",Qk(c),"/",Qk(a))};
P.I.Kz=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,p,m="rgb(255,0,0)",q="",t="",s="",z=0,y,I;0==a.length?c(null):(E(a,function(a){k.push(P.I.pm(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):E(k,function(a){P.get(a,function(a){l++;E(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){p=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
s=n[11];m=[1,0,0];t=q="";z=0;for(len=e.length;z<len;z++)if(y=e[z],q=y.getAttribute("id"),q===n[0].replace("_","")){t=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(I=d[z],q=I.getAttribute("id"),q===t){m=Cl(I.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new kn(p,m,0,0,0,s))}});l==k.length&&c(h)},"text")}))};
P.I.tu=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;E(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new gn(h.getAttribute("fileName"),a));break}});return d};P.I.dH=function(){return null};
P.I.zA=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=P.I.tu(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";E(c,function(a){k=a.xe.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(E(d,function(b){b.getAttribute("id")==k&&(a.Dn=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.Mt=serverRoot+P.I.jx:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";E(e,function(a){l=a.xe.getAttribute("attributes").split(";");E(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],E(h,function(b){b.xe.getAttribute("id")==refVol&&(b.ih=a)}.bind(this)))}.bind(this))});E(h,function(c){c.xg=new Nl(a,c.xe,b);c.ih&&(c.xg.ih=c.ih,delete c.ih)});return h};P.I.hA=function(a){var b=P.I.tu(a,"Model","ModelStorage");E(b,function(b){b.xg=new Fl(a,b.xe)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",P.I.jx);
v("gxnat.slicerUtils.extractMrmls",P.I.Ez);v("gxnat.slicerUtils.getMrmlAsXml",P.I.xu);v("gxnat.slicerUtils.getMrmlNodes",P.I.iA);v("gxnat.slicerUtils.createSceneViewProperties",P.I.jz);v("gxnat.slicerUtils.getSceneViewNodes",P.I.mA);v("gxnat.slicerUtils.getElementsFromMrml",P.I.Uz);v("gxnat.slicerUtils.getSceneViewsFromMrml",P.I.nA);v("gxnat.slicerUtils.getCameraFromSceneView",P.I.Oz);v("gxnat.slicerUtils.getThumbnail",P.I.rA);v("gxnat.slicerUtils.mrmlColorToRgb",P.I.dQ);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",P.I.Lz);v("gxnat.slicerUtils.getLayoutFromSceneView",P.I.cA);v("gxnat.slicerUtils.matchFileToSet",P.I.pm);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",P.I.gH);v("gxnat.slicerUtils.getAnnotations",P.I.Kz);v("gxnat.slicerUtils.getDisplayables",P.I.tu);v("gxnat.slicerUtils.getFibers",P.I.dH);v("gxnat.slicerUtils.getVolumes",P.I.zA);v("gxnat.slicerUtils.getMeshes",P.I.hA);function mn(a,b,c){this.ii=[];Xl.call(this,"Slicer Scenes",a,b);c&&c(this)}w(mn,Xl);v("gxnat.vis.Slicer",mn);var nn=["jpeg","jpg","png","gif"];f=mn.prototype;f.Jn="resources/Slicer/files";f.Cq="?listContents=true";f.In="File Name";f.lj=function(a){this.jj?on(this,a):gm.d.lj.call(this,function(){this.Ck(function(){this.xm();on(this,a)}.bind(this))}.bind(this))};function on(a,b){P.I.iA(a.ii,0,function(a){P.I.mA(a,function(d){this.ez(d,a,b)}.bind(this))}.bind(a))}
f.ez=function(a,b,c){this.RJ=b;this.KL=a;var d,e,h,k;E(this.KL,function(a){d=[a.DM||[],a.JJ||[],a.DG||[]];e=[];E(d,function(a){E(a,function(a){h=P.I.pm(Qk(a.file),this.ii);a.xg instanceof Nl&&a.xg.ih&&(a.xg.labelMapFile=P.I.pm(a.xg.ih.file,this.ii),null!=a.xg.ih.Mt&&null==P.I.pm(a.xg.ih.Mt,this.ii)&&(a.xg.colorTableFile=a.xg.ih.Mt));e.push(new Tl(h,a.xg))}.bind(this))}.bind(this));k=new Ul(e);k.$o(P.I.pm(P.I.rA(a.element,this.RJ[0].document),this.ii));k.Be(a.element.getAttribute("name"));k.tw(a);
this.Wc.push(k)}.bind(this));c&&c(this)};f.Ck=function(a){var b="",c=0,d=this.ii.length;for(this.thumbnailFiles=[];c<d;c++)b=wj(this.ii[c]),-1!=nn.indexOf(b)&&this.thumbnailFiles.push(this.ii[c]);E(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=uj(vj(this.thumbnailFiles[c]))){this.$o(this.thumbnailFiles[c]);break}a&&a(this)};f.Pi=function(a){g(a)||(a=[a]);E(a,function(a){this.ii.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",nn);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",mn.prototype.Jn);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",mn.prototype.Cq);v("gxnat.vis.Slicer.prototype.fileContentsKey",mn.prototype.In);v("gxnat.vis.Slicer.prototype.getFileList",mn.prototype.lj);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",mn.prototype.ez);v("gxnat.vis.Slicer.prototype.getThumbnailImage",mn.prototype.Ck);v("gxnat.vis.Slicer.prototype.addFiles",mn.prototype.Pi);function pn(){dm.call(this);this.Lg.push(this.jw);this.Lg.push(this.IL);this.Lg.push(this.JL)}w(pn,dm);v("xiv.sampleData.Scans",pn);
pn.prototype.jw=new cm("src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 1","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample1/Sample1.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
pn.prototype.IL=new cm("src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 2","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample2/Sample2.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
pn.prototype.JL=new cm("src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 3","Total Frames":176,Type:"t2_spc_1mm_p2"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample3/Sample3.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function qn(a,b,c,d){wc.call(this);rn();sn();this.Gp={h:gm,fM:mn};this.dd=null!=a?a:qn.States.Mj;this.MJ=b;this.cC=d;this.Tr=Wg(d);this.Wg=this.Wg?this.Wg:[];a="/"!==c[0]?"/"+c:c;-1===this.Wg.indexOf(this.Tr+a)&&this.Wg.push(-1===a.indexOf(this.Tr)?this.Tr+a:a);1==this.Wg.length&&(this.Ud=new Ug(this.Wg[0]))}w(qn,wc);v("xiv.start",qn);qn.ModalStates={Ie:"fullscreen",lf:"popup",Is:"fullscreen-popup",Ng:"windowed",Mj:"demo",RD:"demp-fullscreen"};qn.States={Mj:"demo",HN:"live"};
function rn(){Rf.IMA=[Sf,null]}function sn(){document.body.style.overflow="hidden"}f=qn.prototype;f.Gs=B();f.Hy=300;f.kJ=1E3;f.$q=!1;f.cr=!1;f.BC=function(){};f.Py=function(){tn(this);this.show();this.dd==qn.States.Mj?(fm.MODE="demo",S(this.cb.ba.lf),S(this.cb.ba.jl),un(this)):(this.cb.vc(this.MJ),vn(this))};f.VL=function(a){this.NJ=a};function tn(a){a.cb=new a.NJ;a.cb.pC(serverRoot);H(a.cb,"g",a.tK.bind(a));window.onresize=function(){null!=this.cb&&this.cb.o()}.bind(a)}
f.tK=function(){this.ce.hB(null,function(a){E(a,function(a){wn(this,a);this.cb.aa.Sc()}.bind(this))}.bind(this))};f.show=function(){this.cb.a().style.opacity=0;this.cb.k();this.dd!==qn.States.Mj&&this.cb.hy();H(this.cb.aa.pa,"a",this.Vv.bind(this));H(this.cb.ba.lf,"click",this.gG.bind(this));H(this.cb.ba.jl,"click",this.g.bind(this));this.cb.Hb.gc(!0,0,this.kJ);Ak(this.cb.a(),this.Hy)};
function un(a){var b=a.cb.aa,c={slicer:(new em).Lg,scan:(new pn).Lg},d,e=null;C(c,function(a,b){E(a,function(a){d="scan"==b?new this.Gp.h:new this.Gp.fM;d.Pi(a.files);d.mC(!0);d.CC(a.KJ);d.$o(a.Mw);xn(this,d,a.nu);null==e&&(e=a.nu);E(a.nu,function(a){Ib(e,a)||e.push(a)})}.bind(this))}.bind(a));a=b.pa.Gq(e);var h=[];E(a,function(a){null!=a&&(a.bc.Qi=0,a.gc(!0),a=a.sf,a.style.opacity=0,h.push(a))});b.pa.a().style.opacity=1;Ob(h,void 0,0,b.pa.a());Ck(h,400,200)}
function vn(a){var b=a.cb.aa.pa,c=0;a.cb.aa&&H(a.cb.aa.pa,yn,a.kL.bind(a));a.ce=new $g(a.Wg[0]);a.ce.eB(function(a){var e=wn(this,a);0==c&&(this.bJ=a,this.Ou=b.Jc[e[0]],b.No(e[0]));1==c&&(this.cr=!0,this.cJ=a,this.dr=this.Ou.Jc[e[1]]);2==c&&(this.$q=!0,this.ar=a,this.RA=this.dr.Jc[e[2]],yl([this.Ou,this.dr,this.RA]));c++}.bind(a))}
function zn(a,b){var c=a.ce.Mn(b),d=a.ce.Mz(b),e=0;C(c,function(a,b){var c=d[e];25<c.length&&(c=Xa(c,25));d[e]=b.toUpperCase()+":&nbsp&nbsp&nbsp&nbsp&nbsp"+c;e++});return d}function wn(a,b){var c=a.ce.Nz(b),d=zn(a,b);An(a,d,c);return d}function Bn(a,b){a.ce.dB(b.originalUrl,null,function(a){if(b.mi("subjects")==this.Ud.mi("subjects")&&this.cr){var d=this.Ud.mi("experiments");this.ar=this.ce.Zl(d);Lb(a,this.ar);Ob(a,0,0,this.ar);this.cr=!1}E(a,function(a){wn(this,a)}.bind(this))}.bind(a))}
f.Vv=function(a){if(null!=a.xe[this.Gs])switch(a=new Ug(a.xe[this.Gs]),a.Eq()){case "subjects":Bn(this,a);break;case "experiments":Cn(this,a.originalUrl)}};f.fm=function(a){Bk(this.cb.a(),this.Hy,a)};f.g=function(){this.fm(this.qG.bind(this))};
function Cn(a,b){if(null==a.iv)a.iv=[];else if(-1<a.iv.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.ce.Mn(a.ce.Zl(b)),c=new Wl(c.projects[lh],c.subjects[lh],c.experiments[lh]);Dn(a,b,function(){this.iv.push(b);this.$q&&(this.$q=!1,C(this.dr.Jc,function(){}.bind(this)))}.bind(a),c)}f.kL=function(a){var b=a.xe.bc.Qi;a.xe.bc.Qi=0;a.xe.bc.Qi=b};
f.gG=function(){var a=open(this.cC+"/scripts/viewer/xiv/popup.html?"+this.Wg[0],"XImgView","width=1200,height=800");a.focus();var b=this.Wg[0];a.onload=function(){a.ZP(b,qn.ModalStates.lf,serverRoot)}.bind(this);this.g()};function Dn(a,b,c,d){En(a,b,function(a){var b=a.ni;Fn(this,a,b,function(a){xn(this,a)}.bind(this));null!=d&&(this.wb[b].Wo(d.vL),this.wb[b].Yo(d.jM),this.wb[b].So(d.BG))}.bind(a),c)}
function An(a,b,c){var d=a.cb.aa.pa;d.zn(b);zippyNodes=d.Gq(b);E(zippyNodes,function(a,b){-1<a.Rd().toLowerCase().indexOf("experiments")&&!a.Ju()&&Tc(a,"a",function(){a.oy()});null==c||null==c[b]||null==a[this.Gs]&&(a[this.Gs]=c[b])}.bind(a))}
function xn(a,b,c){var d=a.cb.aa;null!=d&&(null==c&&null!=a.ce&&(c=zn(a,a.ce.Zl(b.Hn))),"Scans"!=b.cg&&c.push(b.cg),b.lj(function(){if(0<b.Wc.length){var a=d.Zi(b,c);if("Scans"!=b.cg){var h=d.pa.Gq(c);0<c.length&&1<h.length&&d.gc(c[c.length-1],h[h.length-2])}a.ow(b.Cm)}}.bind(a)))}function Fn(a,b,c,d){a.wb=a.wb?a.wb:{};null==a.wb[c]&&(a.wb[c]=b,d(b))}
f.qG=function(){qn.d.g.call(this);document.body.style.overflow="visible";C(this.wb,function(a,b){a.g();delete this.wb[b]}.bind(this));delete this.wb;this.ce&&(this.ce.g(),delete this.ce);delete this.Wg;delete this.cC;delete this.Tr;delete this.RP;null!=this.Ud&&(this.Ud.g(),delete this.Ud);delete this.$q;delete this.cr;delete this.bJ;delete this.cJ;delete this.ar;delete this.Ou;delete this.dr;delete this.RA;J(this.cb);this.cb.g();S(this.cb.a());delete this.cb};
function En(a,b,c,d){var e=nb(a.Gp),h=0;C(a.Gp,function(a){bm(b,a,c,function(){h++;h===e&&null!=d&&d()})})}v("xiv.start.States",qn.States);v("xiv.start.loadCustomExtensions",rn);v("xiv.start.adjustDocumentStyle",sn);v("xiv.start.ModalStates",qn.ModalStates);v("xiv.start.checkForWebGL",qn.checkForWebGL);v("xiv.start.isCompatible",qn.lJ);v("xiv.start.prototype.setServerRoot",qn.prototype.BC);v("xiv.start.prototype.setModalType",qn.prototype.VL);v("xiv.start.prototype.begin",qn.prototype.Py);
v("xiv.start.prototype.show",qn.prototype.show);v("xiv.start.prototype.hide",qn.prototype.fm);v("xiv.start.prototype.dispose",qn.prototype.g);window["xiv.start.isCompatible"]=qn.lJ;window["xiv.start.checkForWebGL"]=qn.checkForWebGL;window["xiv.start.ModalStates"]=qn.ModalStates;qn.prototype.setServerRoot=qn.prototype.BC;qn.prototype.begin=qn.prototype.Py;function Gn(){$c.call(this);this.ho=[];this.fD=[];this.Lo=[]}w(Gn,$c);f=Gn.prototype;f.Vu=!1;f.Wu=!1;f.vj=!1;f.WA=function(){return this.vj};function Hn(a,b){a.fD.push(b);b.Wu=!0;a.Vu=!0}f.zC=function(a){this.$r=a};f.ta=function(){if(!this.vj){for(var a,b=0;a=this.ho[b];b++)In(this,a);this.vj=!0}};function In(a,b){a.Vu&&(H(b.element,"mousedown",b.ug,!1,b),a.Bw&&el(b.element,a.Bw));a.Wu&&a.Lw&&el(b.element,a.Lw)}
function Jn(a){for(var b,c=0;b=a.ho[c];c++){var d=a;d.Vu&&(Uc(b.element,"mousedown",b.ug,!1,b),d.Bw&&gl(b.element,d.Bw));d.Wu&&d.Lw&&gl(b.element,d.Lw);b.g()}a.ho.length=0}
f.ep=function(a,b){if(!this.vf)if(this.vf=b,!1==this.dispatchEvent(new Kn("dragstart",0,this.vf)))this.vf=null;else{var c=b.$i;this.tk=this.Rt(c);var d=Mh(c);d.body.appendChild(this.tk);var e=this.tk,h=Li(c),c=cj(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.Ma=new im(e);this.Ma.zC(this.$r);H(this.Ma,"drag",this.rB,!1,this);H(this.Ma,"end",this.gj,!1,this);H(d.body,"selectstart",this.cD);this.Bm=[];for(e=0;d=this.fD[e];e++)for(var k,
h=0;k=d.ho[h];h++)for(var c=d,l=[k.element],n=this.Bm,p=0;p<l.length;p++){var m=l[p],q,t=m;q=Li(t);t=U(t);q=new th(q.y,q.x+t.width,q.y+t.height,q.x);n.push(new Ln(q,c,k,m));Mn(this,q)}this.ui||(this.ui=new th(0,0,0,0));for(e=0;d=this.Lo[e];e++)d.Nt=[],d.dC=d.q.scrollLeft,d.eC=d.q.scrollTop,h=Li(d.q),c=U(d.q),d.zc=new th(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.Bm[e];e++)for(h=0;d=this.Lo[h];h++)ii(d.q,c.q)&&(d.Nt.push(c),c.Ko=d);this.ek=null;for(e=0;d=this.Lo[e];e++)H(d.q,"scroll",this.az,
!1,this);this.Ma.ep(a);a.preventDefault()}};
f.gj=function(a){var b=a.uG?null:this.ek;if(b&&b.bl){var c=a.clientX;a=a.clientY;var d=yi(Kh(this.tk)),e=c+d.x,d=a+d.y,h;this.ip&&(h=this.ip(b.ei,b.zc,e,d));this.dispatchEvent(new Kn("drag",0,this.vf,0,b.ei,0,c,a));b.bl.dispatchEvent(new Kn("drop",0,this.vf,0,b.ei,0,c,a,0,0,h))}this.dispatchEvent(new Kn("dragend",0,this.vf));Uc(this.Ma,"drag",this.rB,!1,this);Uc(this.Ma,"end",this.gj,!1,this);Uc(Mh(this.vf.$i).body,"selectstart",this.cD);for(b=0;c=this.Lo[b];b++)Uc(c.q,"scroll",this.az,!1,this),c.Nt=
[];this.Ma.g();S(this.tk);delete this.vf;delete this.tk;delete this.Ma;delete this.Bm;delete this.ek};
f.rB=function(a){var b,c=yi(Kh(this.tk));b=new rh(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.ek,h;if(e){this.ip&&e.bl&&(h=this.ip(e.ei,e.zc,c,d));if(e.zc.contains(b)&&h==this.gy)return;e.bl&&(this.dispatchEvent(new Kn("dragout",0,this.vf,0,e.ei)),e.bl.dispatchEvent(new Kn("dragout",0,this.vf,0,e.ei,0,void 0,void 0,0,0,this.gy)));this.gy=h;this.ek=null}if(this.ui.contains(b)){a:{for(var k=0;e=this.Bm[k];k++)if(e.zc.contains(b))if(e.Ko){if(e.Ko.zc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.ek=b)&&e.bl)this.ip&&(h=this.ip(e.ei,e.zc,c,d)),c=new Kn("dragover",0,this.vf,0,e.ei),c.kM=h,this.dispatchEvent(c),e.bl.dispatchEvent(new Kn("dragover",0,this.vf,0,e.ei,0,a.clientX,a.clientY,0,0,h));else if(!e){this.Re||(this.Re=new Ln(this.ui.clone()));a=this.Re.zc;a.top=this.ui.top;a.right=this.ui.right;a.bottom=this.ui.bottom;a.left=this.ui.left;for(h=0;e=this.Bm[h];h++)b=e.zc,e.Ko&&(e=e.Ko.zc,b=new th(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.ek=10<=(a.right-a.left)*(a.bottom-a.top)?this.Re:null}}};f.cD=function(){return!1};
f.az=function(a){for(var b=0,c;c=this.Lo[b];b++)if(a.target==c.q){var d=c.eC-c.q.scrollTop,e=c.dC-c.q.scrollLeft;c.eC=c.q.scrollTop;c.dC=c.q.scrollLeft;this.Re&&this.ek==this.Re&&(0<d?this.Re.zc.top+=d:this.Re.zc.bottom+=d,0<e?this.Re.zc.left+=e:this.Re.zc.right+=e);for(var h=0,k;k=c.Nt[h];h++)k=k.zc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,Mn(this,k)}this.Ma.xj(a)};
f.Rt=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=R("table",null,R("tbody",null,b));break a;case "td":case "th":a=R("table",null,R("tbody",null,R("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.vG&&el(a,this.vG);return a};f.Fq=function(){return this.Ma};
function Mn(a,b){if(1==a.Bm.length)a.ui=new th(b.top,b.right,b.bottom,b.left);else{var c=a.ui;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.f=function(){Gn.d.f.call(this);Jn(this)};function Kn(a,b,c,d,e,h,k,l,n,p,m){Cc.call(this,a);this.xq=c;this.Rl=e;this.clientX=k;this.clientY=l;this.kM=m}w(Kn,Cc);Kn.prototype.f=function(){};
function Nn(a,b){$c.call(this);this.element=Nh(a);this.data=b;this.Ua=null;this.Cc=new gj(this);zc(this,va(Ac,this.Cc));if(!this.element)throw Error("Invalid argument");}w(Nn,$c);f=Nn.prototype;f.$i=null;f.ug=function(a){if(Jc(a)){var b=a.target;b&&(this.Cc.D(b,"mousemove",this.oB,!1).D(b,"mouseout",this.oB,!1),this.Cc.D(Mh(b),"mouseup",this.PJ,!0),this.$i=b,this.Ew=new rh(a.clientX,a.clientY),a.preventDefault())}};f.Uo=function(a){this.Ua=a};
f.oB=function(a){var b=this.$i,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.Ew.x)+Math.abs(a.clientY-this.Ew.y)||b)this.Cc.yg(),this.Ua.ep(a,this)};f.PJ=function(){this.Cc.yg();delete this.Ew;this.$i=null};function Ln(a,b,c,d){this.zc=a;this.bl=b;this.ei=c;this.q=d}Ln.prototype.Ko=null;function On(a,b){this.type=a;this.currentTarget=this.target=b||null}f=On.prototype;f.wg=!1;f.defaultPrevented=!1;f.Io=!0;f.stopPropagation=function(){this.wg=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.Io=!1};
function Pn(a){a=new On("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Oi(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.Io=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.wg;d--){var e=b[d],h=a.type,k=new Hc(a,b[d]);hb(e)?ad(e,h,!0,k):Xc(e,h,!0,k)}for(d=0;d<b.length&&!a.wg;d++)e=b[d],h=a.type,k=new Hc(a,b[d]),hb(e)?ad(e,h,!1,k):Xc(e,h,!1,k)};function Qn(a,b){if(!a)throw Error("Invalid class name "+a);if(!la(b))throw Error("Invalid decorator function "+b);Rn[a]=b}var Sn={},Rn={};function Tn(){}var Un;ga(Tn);var Vn={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=Tn.prototype;f.ah=function(){};f.B=function(a){var b=a.N().B("div",this.zk(a).join(" "),a.getContent());Wn(this,a,b);return b};f.Ha=function(a){return a};f.wk=function(a,b,c){if(a=a.a?a.a():a){var d=[b];F&&!pc("7")&&(d=Xn(cl(a),b),d.push(b));(c?fl:hl)(a,d)}};f.Qe=function(){return!0};
f.Jb=function(a,b){b.id&&oj(a,b.id);var c=this.Ha(b);c&&c.firstChild?Yn(a,c.firstChild.nextSibling?Nb(c.childNodes):c.firstChild):a.Oc=null;var d=0,e=this.$(),h=this.$(),k=!1,l=!1,c=!1,n=Nb(cl(b));E(n,function(a){k||a!=e?l||a!=h?d|=this.zu(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.T=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var p=a.ig;p&&n.push.apply(n,p);if(F&&!pc("7")){var m=Xn(n);0<m.length&&(n.push.apply(n,m),c=!0)}if(!k||!l||p||c)b.className=n.join(" ");Wn(this,a,b);return b};
f.km=function(a){a.Ve()&&this.wm(a.a(),!0);a.isEnabled()&&this.Cj(a,a.ua())};function Zn(a,b,c){if(a=c||a.ah())c=b.getAttribute("role")||null,a!=c&&$k(b,a)}function Wn(a,b,c){b.ua()||al(c,"hidden",!b.ua());b.isEnabled()||a.vh(c,1,!b.isEnabled());$n(b,8)&&a.vh(c,8,!!(b.T&8));$n(b,16)&&a.vh(c,16,b.gh());$n(b,64)&&a.vh(c,64,!!(b.T&64))}f.Mo=function(a,b){$i(a,!b,!F&&!gc)};f.wm=function(a,b){this.wk(a,this.$()+"-rtl",b)};f.di=function(a){var b;return $n(a,32)&&(b=a.sc())?ni(b)&&oi(b):!1};
f.Cj=function(a,b){var c;if($n(a,32)&&(c=a.sc())){if(!b&&a.T&32){try{c.blur()}catch(d){}a.T&32&&a.Ek(null)}(ni(c)&&oi(c))!=b&&mi(c,b)}};f.ca=function(a,b){Xi(a,b);a&&al(a,"hidden",!b)};f.vc=function(a,b,c){var d=a.a();if(d){var e=this.Nn(b);e&&this.wk(a,e,c);this.vh(d,b,c)}};f.vh=function(a,b,c){Un||(Un={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Un[b];var d=a.getAttribute("role")||null;d&&(d=Vn[d]||b,b="checked"==b||"selected"==b?d:b);b&&al(a,b,c)};
f.al=function(a,b){var c=this.Ha(a);if(c&&(ai(c),b))if(r(b))ji(c,b);else{var d=function(a){if(a){var b=Mh(c);c.appendChild(r(a)?b.createTextNode(a):a)}};g(b)?E(b,d):!ia(b)||"nodeType"in b?d(b):E(Nb(b),d)}};f.sc=function(a){return a.a()};f.$=function(){return"goog-control"};f.zk=function(a){var b=this.$(),c=[b],d=this.$();d!=b&&c.push(d);b=a.am();for(d=[];b;){var e=b&-b;d.push(this.Nn(e));b&=~e}c.push.apply(c,d);(a=a.ig)&&c.push.apply(c,a);F&&!pc("7")&&c.push.apply(c,Xn(c));return c};
function Xn(a,b){var c=[];b&&(a=a.concat([b]));E([],function(d){!Fb(d,va(Ib,a))||b&&!Ib(d,b)||c.push(d.join("_"))});return c}f.Nn=function(a){this.kq||ao(this);return this.kq[a]};f.zu=function(a){if(!this.$C){this.kq||ao(this);var b=this.kq,c={},d;for(d in b)c[b[d]]=d;this.$C=c}a=parseInt(this.$C[a],10);return isNaN(a)?0:a};function ao(a){var b=a.$();b.replace(/\xa0|\s/g," ");a.kq={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function bo(a,b){$c.call(this);a&&this.Kl(a,b)}w(bo,$c);f=bo.prototype;f.q=null;f.kr=null;f.Xu=null;f.lr=null;f.We=-1;f.wj=-1;f.yt=!1;
var co={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},eo={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},fo=F||ic&&pc("525"),go=cc&&hc;f=bo.prototype;
f.Rq=function(a){ic&&(17==this.We&&!a.ctrlKey||18==this.We&&!a.altKey||cc&&91==this.We&&!a.metaKey)&&(this.wj=this.We=-1);-1==this.We&&(a.ctrlKey&&17!=a.keyCode?this.We=17:a.altKey&&18!=a.keyCode?this.We=18:a.metaKey&&91!=a.keyCode&&(this.We=91));fo&&!kl(a.keyCode,this.We,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.wj=ml(a.keyCode),go&&(this.yt=a.altKey))};f.LI=function(a){this.wj=this.We=-1;this.yt=a.altKey};
f.handleEvent=function(a){var b=a.Qc,c,d,e=b.altKey;F&&"keypress"==a.type?(c=this.wj,d=13!=c&&27!=c?b.keyCode:0):ic&&"keypress"==a.type?(c=this.wj,d=0<=b.charCode&&63232>b.charCode&&ll(c)?b.charCode:0):gc?(c=this.wj,d=ll(c)?b.keyCode:0):(c=b.keyCode||this.wj,d=b.charCode||0,go&&(e=this.yt),cc&&63==d&&224==c&&(c=191));var h=c=ml(c),k=b.keyIdentifier;c?63232<=c&&c in co?h=co[c]:25==c&&a.shiftKey&&(h=9):k&&k in eo&&(h=eo[k]);a=h==this.We;this.We=h;b=new ho(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.q};f.Kl=function(a,b){this.lr&&this.detach();this.q=a;this.kr=H(this.q,"keypress",this,b);this.Xu=H(this.q,"keydown",this.Rq,b,this);this.lr=H(this.q,"keyup",this.LI,b,this)};f.detach=function(){this.kr&&(Vc(this.kr),Vc(this.Xu),Vc(this.lr),this.lr=this.Xu=this.kr=null);this.q=null;this.wj=this.We=-1};f.f=function(){bo.d.f.call(this);this.detach()};function ho(a,b,c,d){Hc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(ho,Hc);function io(a,b,c){kj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=na(b);if(d=Sn[d])break;b=b.d?b.d.constructor:null}b=d?la(d.re)?d.re():new d:null}this.va=b;this.Oc=da(a)?a:null}w(io,kj);f=io.prototype;f.Oc=null;f.T=0;f.jp=39;f.qn=255;f.gp=0;f.Ic=!0;f.ig=null;f.Gk=!0;f.dq=!1;f.cw=null;f.To=function(a){this.ma&&a!=this.Gk&&jo(this,a);this.Gk=a};f.sc=function(){return this.va.sc(this)};f.Jq=function(){return this.sb||(this.sb=new bo)};f.Ta=function(){return this.va};
f.wk=function(a,b){b?a&&(this.ig?Ib(this.ig,a)||this.ig.push(a):this.ig=[a],this.va.wk(this,a,!0)):a&&this.ig&&Lb(this.ig,a)&&(0==this.ig.length&&(this.ig=null),this.va.wk(this,a,!1))};f.B=function(){var a=this.va.B(this);this.q=a;Zn(this.va,a,this.mj());this.dq||this.va.Mo(a,!1);this.ua()||this.va.ca(a,!1)};f.mj=function(){return this.cw};f.Ha=function(){return this.va.Ha(this.a())};f.Qe=function(a){return this.va.Qe(a)};
f.ne=function(a){this.q=a=this.va.Jb(this,a);Zn(this.va,a,this.mj());this.dq||this.va.Mo(a,!1);this.Ic="none"!=a.style.display};f.hb=function(){io.d.hb.call(this);this.va.km(this);if(this.jp&-2&&(this.Gk&&jo(this,!0),$n(this,32))){var a=this.sc();if(a){var b=this.Jq();b.Kl(a);this.ib().D(b,"key",this.dh).D(a,"focus",this.Fk).D(a,"blur",this.Ek)}}};
function jo(a,b){var c=a.ib(),d=a.a();b?(c.D(d,"mouseover",a.Hk).D(d,"mousedown",a.eh).D(d,"mouseup",a.ng).D(d,"mouseout",a.Tq),a.Tn!=fa&&c.D(d,"contextmenu",a.Tn),F&&c.D(d,"dblclick",a.BA)):(c.vb(d,"mouseover",a.Hk).vb(d,"mousedown",a.eh).vb(d,"mouseup",a.ng).vb(d,"mouseout",a.Tq),a.Tn!=fa&&c.vb(d,"contextmenu",a.Tn),F&&c.vb(d,"dblclick",a.BA))}f.Dc=function(){io.d.Dc.call(this);this.sb&&this.sb.detach();this.ua()&&this.isEnabled()&&this.va.Cj(this,!1)};
f.f=function(){io.d.f.call(this);this.sb&&(this.sb.g(),delete this.sb);delete this.va;this.ig=this.Oc=null};f.getContent=function(){return this.Oc};f.al=function(a){this.va.al(this.a(),a);this.Oc=a};function Yn(a,b){a.Oc=b}f.Dq=function(){var a=this.getContent();if(!a)return"";a=r(a)?a:g(a)?Db(a,ri).join(""):pi(a);return Ha(a)};f.wm=function(a){io.d.wm.call(this,a);var b=this.a();b&&this.va.wm(b,a)};f.Mo=function(a){this.dq=a;var b=this.a();b&&this.va.Mo(b,a)};f.ua=function(){return this.Ic};
f.ca=function(a,b){if(b||this.Ic!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.va.ca(c,a);this.isEnabled()&&this.va.Cj(this,a);this.Ic=a;return!0}return!1};f.isEnabled=function(){return!(this.T&1)};f.Lb=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!ko(this,1,!a)||(a||(this.setActive(!1),this.Ag(!1)),this.ua()&&this.va.Cj(this,a),this.vc(1,!a))};f.Ag=function(a){ko(this,2,a)&&this.vc(2,a)};f.fh=function(){return!!(this.T&4)};
f.setActive=function(a){ko(this,4,a)&&this.vc(4,a)};f.Xo=function(a){ko(this,8,a)&&this.vc(8,a)};f.gh=function(){return!!(this.T&16)};f.yd=function(a){ko(this,16,a)&&this.vc(16,a)};f.hc=function(a){ko(this,64,a)&&this.vc(64,a)};f.am=function(){return this.T};f.vc=function(a,b){$n(this,a)&&b!=!!(this.T&a)&&(this.va.vc(this,a,b),this.T=b?this.T|a:this.T&~a)};function $n(a,b){return!!(a.jp&b)}
f.jd=function(a,b){if(this.ma&&this.T&a&&!b)throw Error("Component already rendered");!b&&this.T&a&&this.vc(a,!1);this.jp=b?this.jp|a:this.jp&~a};function lo(a,b){return!!(a.qn&b)&&$n(a,b)}function ko(a,b,c){return $n(a,b)&&!!(a.T&b)!=c&&(!(a.gp&b)||a.dispatchEvent(mj(b,c)))&&!a.rk}f.Hk=function(a){(!a.relatedTarget||!ii(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&lo(this,2)&&this.Ag(!0)};
f.Tq=function(a){a.relatedTarget&&ii(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(lo(this,4)&&this.setActive(!1),lo(this,2)&&this.Ag(!1))};f.Tn=fa;f.eh=function(a){this.isEnabled()&&(lo(this,2)&&this.Ag(!0),Jc(a)&&(lo(this,4)&&this.setActive(!0),this.va.di(this)&&this.sc().focus()));!this.dq&&Jc(a)&&a.preventDefault()};f.ng=function(a){this.isEnabled()&&(lo(this,2)&&this.Ag(!0),this.fh()&&this.Tk(a)&&lo(this,4)&&this.setActive(!1))};f.BA=function(a){this.isEnabled()&&this.Tk(a)};
f.Tk=function(a){lo(this,16)&&this.yd(!this.gh());lo(this,8)&&this.Xo(!0);lo(this,64)&&this.hc(!(this.T&64));var b=new Cc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.$v=a.$v);return this.dispatchEvent(b)};f.Fk=function(){lo(this,32)&&ko(this,32,!0)&&this.vc(32,!0)};f.Ek=function(){lo(this,4)&&this.setActive(!1);lo(this,32)&&ko(this,32,!1)&&this.vc(32,!1)};
f.dh=function(a){return this.ua()&&this.isEnabled()&&this.mg(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.mg=function(a){return 13==a.keyCode&&this.Tk(a)};if(!la(io))throw Error("Invalid component class "+io);if(!la(Tn))throw Error("Invalid renderer class "+Tn);var mo=na(io);Sn[mo]=Tn;Qn("goog-control",function(){return new io(null)});function no(){this.Wy=[]}w(no,Tn);ga(no);function oo(a,b){var c=a.Wy[b];if(!c){switch(b){case 0:c=a.$()+"-highlight";break;case 1:c=a.$()+"-checkbox";break;case 2:c=a.$()+"-content"}a.Wy[b]=c}return c}f=no.prototype;f.ah=function(){return"menuitem"};f.B=function(a){var b=a.N().B("div",this.zk(a).join(" "),po(this,a.getContent(),a.N()));qo(this,a,b,$n(a,8)||$n(a,16));return b};f.Ha=function(a){return a&&a.firstChild};
f.Jb=function(a,b){var c=ei(b),d=oo(this,2);c&&dl(c,d)||b.appendChild(po(this,b.childNodes,a.N()));dl(b,"goog-option")&&(a.gs(!0),this.gs(a,b,!0));return no.d.Jb.call(this,a,b)};f.al=function(a,b){var c=this.Ha(a),d=ro(this,a)?c.firstChild:null;no.d.al.call(this,a,b);d&&!ro(this,a)&&c.insertBefore(d,c.firstChild||null)};function po(a,b,c){a=oo(a,2);return c.B("div",a,b)}f.AC=function(a,b,c){a&&b&&qo(this,a,b,c)};f.gs=function(a,b,c){a&&b&&qo(this,a,b,c)};
function ro(a,b){var c=a.Ha(b);if(c){var c=c.firstChild,d=oo(a,1);return!!c&&hi(c)&&dl(c,d)}return!1}function qo(a,b,c,d){Zn(a,c,b.mj());Wn(a,b,c);d!=ro(a,c)&&(il(c,"goog-option",d),c=a.Ha(c),d?(a=oo(a,1),c.insertBefore(b.N().B("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.Nn=function(a){switch(a){case 2:return oo(this,0);case 16:case 8:return"goog-option-selected";default:return no.d.Nn.call(this,a)}};
f.zu=function(a){var b=oo(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return no.d.zu.call(this,a)}};f.$=function(){return"goog-menuitem"};function so(a,b,c,d){io.call(this,a,d||no.re(),c);this.C(b)}w(so,io);f=so.prototype;f.w=function(){var a=this.pv;return null!=a?a:this.Dq()};f.C=function(a){this.pv=a};f.jd=function(a,b){so.d.jd.call(this,a,b);switch(a){case 8:this.gh()&&!b&&this.yd(!1);var c=this.a();c&&this.Ta().AC(this,c,b);break;case 16:(c=this.a())&&this.Ta().gs(this,c,b)}};f.AC=function(a){this.jd(8,a)};f.gs=function(a){this.jd(16,a)};
f.Dq=function(){var a=this.getContent();return g(a)?(a=Db(a,function(a){return hi(a)&&(dl(a,"goog-menuitem-accel")||dl(a,"goog-menuitem-mnemonic-separator"))?"":ri(a)}).join(""),Ha(a)):so.d.Dq.call(this)};f.ng=function(a){var b=this.getParent();if(b){var c=b.KB;b.KB=null;if(b=c&&u(a.clientX))b=new rh(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}so.d.ng.call(this,a)};f.mg=function(a){return a.keyCode==this.nB&&this.Tk(a)?!0:so.d.mg.call(this,a)};f.KH=function(){return this.nB};
Qn("goog-menuitem",function(){return new so(null)});so.prototype.mj=function(){return $n(this,16)?"menuitemcheckbox":$n(this,8)?"menuitemradio":so.d.mj.call(this)};function to(a){this.Ly=a}ga(to);f=to.prototype;f.ah=function(){return this.Ly};function uo(a,b){a&&(a.tabIndex=b?0:-1)}f.B=function(a){return a.N().B("div",this.zk(a).join(" "))};f.Ha=function(a){return a};f.Qe=function(a){return"DIV"==a.tagName};f.Jb=function(a,b){b.id&&oj(a,b.id);var c=this.$(),d=!1,e=cl(b);e&&E(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.Lb(!1):b==c+"-horizontal"?a.ri(vo):b==c+"-vertical"&&a.ri(wo))},this);d||el(b,c);xo(this,a,this.Ha(b));return b};
function xo(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.su(d);h&&(h.q=d,b.isEnabled()||h.Lb(!1),b.nn(h),h.Jb(d))}else d.nodeValue&&""!=Ia(d.nodeValue)||c.removeChild(d);d=e}}f.su=function(a){a:{var b;a=cl(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Rn?Rn[b]():null){a=b;break a}a=null}return a};f.km=function(a){a=a.a();$i(a,!0,hc);F&&(a.hideFocus=!0);var b=this.ah();b&&$k(a,b)};f.sc=function(a){return a.a()};f.$=function(){return"goog-container"};
f.zk=function(a){var b=this.$(),c=[b,a.Ub()==vo?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function yo(){}w(yo,Tn);ga(yo);yo.prototype.B=function(a){return a.N().B("div",this.$())};yo.prototype.Jb=function(a,b){b.id&&oj(a,b.id);if("HR"==b.tagName){var c=b;b=this.B(a);bi(b,c);S(c)}else el(b,this.$());return b};yo.prototype.al=function(){};yo.prototype.$=function(){return"goog-menuseparator"};function zo(a,b){io.call(this,null,a||yo.re(),b);this.jd(1,!1);this.jd(2,!1);this.jd(4,!1);this.jd(32,!1);this.T=1}w(zo,io);zo.prototype.hb=function(){zo.d.hb.call(this);$k(this.a(),"separator")};Qn("goog-menuseparator",function(){return new zo});function Ao(a){this.Ly=a||"menu"}w(Ao,to);ga(Ao);f=Ao.prototype;f.Qe=function(a){return"UL"==a.tagName||Ao.d.Qe.call(this,a)};f.su=function(a){return"HR"==a.tagName?new zo:Ao.d.su.call(this,a)};f.lk=function(a,b){return ii(a.a(),b)};f.$=function(){return"goog-menu"};f.km=function(a){Ao.d.km.call(this,a);al(a.a(),"haspopup","true")};function Bo(a,b,c,d,e,h,k,l,n){var p,m;if(p=c.offsetParent){var q="HTML"==p.tagName||"BODY"==p.tagName;q&&"static"==Di(p)||(m=Li(p),q||(q=(q=Mi(p))&&hc?-p.scrollLeft:!q||F&&pc("8")||"visible"==Ci(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,m=sh(m,new rh(q,p.scrollTop))))}p=m||new rh;m=Vi(a);(q=Ki(a))&&m.UA(new wh(q.left,q.top,q.right-q.left,q.bottom-q.top));var q=Kh(a),t=Kh(c);if(q.la!=t.la){var s=q.la.body,t=xi(t),z=new rh(0,0),y=Wh(Mh(s)),I=s;do{var O=y==t?Li(I):Pi(I);z.x+=
O.x;z.y+=O.y}while(y&&y!=t&&(I=y.frameElement)&&(y=y.parent));s=sh(z,Li(s));F&&!wi(q)&&(s=sh(s,yi(q)));m.left+=s.x;m.top+=s.y}a=Co(a,b);b=new rh(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);b=sh(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var N;if(k)if(n)N=n;else if(N=Ki(c))N.top-=p.y,N.right-=p.x,N.bottom-=p.y,N.left-=p.x;return Do(b,c,d,h,N,k,l)}
function Do(a,b,c,d,e,h,k){a=a.clone();var l=0,n=Co(b,c);c=U(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;Ei(b,a);vh(c,k)||(e=wi(Kh(Mh(b))),!F||e&&pc("8")?
(b=b.style,hc?b.MozBoxSizing="border-box":ic?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=cj(b,"padding"),b=fj(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function Co(a,b){return(b&4&&Mi(a)?b^2:b)&-5};var Eo,Fo;Fo=Eo=!1;var Go=Ub;Go&&(-1!=Go.indexOf("Firefox")||-1!=Go.indexOf("Camino")||(-1!=Go.indexOf("iPhone")||-1!=Go.indexOf("iPod")?Eo=!0:-1!=Go.indexOf("iPad")&&(Fo=!0)));var Ho=Eo,Io=Fo;Qn("goog-menuseparator",function(){return new zo});function Jo(a,b,c){kj.call(this,c);this.va=b||to.re();this.Ja=a||wo}w(Jo,kj);var vo="horizontal",wo="vertical";f=Jo.prototype;f.Yu=null;f.sb=null;f.va=null;f.Ja=null;f.Ic=!0;f.Tb=!0;f.mu=!0;f.Ue=-1;f.Fc=null;f.hi=!1;f.LF=!1;f.oL=!0;f.Sh=null;f.sc=function(){return this.Yu||this.va.sc(this)};f.Jq=function(){return this.sb||(this.sb=new bo(this.sc()))};f.Ta=function(){return this.va};f.B=function(){this.q=this.va.B(this)};f.Ha=function(){return this.va.Ha(this.a())};f.Qe=function(a){return this.va.Qe(a)};
f.ne=function(a){this.q=this.va.Jb(this,a);"none"==a.style.display&&(this.Ic=!1)};f.hb=function(){Jo.d.hb.call(this);qj(this,function(a){a.ma&&Ko(this,a)},this);var a=this.a();this.va.km(this);this.ca(this.Ic,!0);this.ib().D(this,"enter",this.Gu).D(this,"highlight",this.Hu).D(this,"unhighlight",this.Iu).D(this,"open",this.QI).D(this,"close",this.GI).D(a,"mousedown",this.eh).D(Mh(a),"mouseup",this.II).D(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.FI);this.di()&&Lo(this,!0)};
function Lo(a,b){var c=a.ib(),d=a.sc();b?c.D(d,"focus",a.Fk).D(d,"blur",a.Ek).D(a.Jq(),"key",a.dh):c.vb(d,"focus",a.Fk).vb(d,"blur",a.Ek).vb(a.Jq(),"key",a.dh)}f.Dc=function(){this.qh(-1);this.Fc&&this.Fc.hc(!1);this.hi=!1;Jo.d.Dc.call(this)};f.f=function(){Jo.d.f.call(this);this.sb&&(this.sb.g(),this.sb=null);this.va=this.Fc=this.Sh=this.Yu=null};f.Gu=function(){return!0};
f.Hu=function(a){var b=tj(this,a.target);if(-1<b&&b!=this.Ue){var c=Mo(this);c&&c.Ag(!1);this.Ue=b;c=Mo(this);this.hi&&c.setActive(!0);this.oL&&this.Fc&&c!=this.Fc&&($n(c,64)?c.hc(!0):this.Fc.hc(!1))}b=this.a();null!=a.target.a()&&al(b,"activedescendant",a.target.a().id)};f.Iu=function(a){a.target==Mo(this)&&(this.Ue=-1);this.a().removeAttribute("aria-activedescendant")};f.QI=function(a){(a=a.target)&&a!=this.Fc&&a.getParent()==this&&(this.Fc&&this.Fc.hc(!1),this.Fc=a)};
f.GI=function(a){a.target==this.Fc&&(this.Fc=null)};f.eh=function(a){this.Tb&&(this.hi=!0);var b=this.sc();b&&ni(b)&&oi(b)?b.focus():a.preventDefault()};f.II=function(){this.hi=!1};f.FI=function(a){var b;a:{b=a.target;if(this.Sh)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.Sh){b=this.Sh[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.eh(a);break;case "mouseup":b.ng(a);break;case "mouseover":b.Hk(a);break;case "mouseout":b.Tq(a);break;case "contextmenu":b.Tn(a)}};
f.Fk=function(){};f.Ek=function(){this.qh(-1);this.hi=!1;this.Fc&&this.Fc.hc(!1)};f.dh=function(a){return this.isEnabled()&&this.ua()&&(0!=rj(this)||this.Yu)&&this.mg(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.mg=function(a){var b=Mo(this);if(b&&"function"==typeof b.dh&&b.dh(a)||this.Fc&&this.Fc!=b&&"function"==typeof this.Fc.dh&&this.Fc.dh(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.di())this.sc().blur();else return!1;break;case 36:No(this);break;case 35:Oo(this);break;case 38:if(this.Ja==wo)Po(this);else return!1;break;case 37:if(this.Ja==vo)this.Ve()?Qo(this):Po(this);else return!1;break;case 40:if(this.Ja==wo)Qo(this);else return!1;break;case 39:if(this.Ja==
vo)this.Ve()?Po(this):Qo(this);else return!1;break;default:return!1}return!0};function Ko(a,b){var c=b.a(),c=c.id||(c.id=nj(b));a.Sh||(a.Sh={});a.Sh[c]=b}f.nn=function(a,b){Jo.d.nn.call(this,a,b)};f.tt=function(a,b,c){a.gp|=2;a.gp|=64;!this.di()&&this.LF||a.jd(32,!1);a.To(!1);Jo.d.tt.call(this,a,b,c);a.ma&&this.ma&&Ko(this,a);b<=this.Ue&&this.Ue++};
f.removeChild=function(a,b){if(a=r(a)?pj(this,a):a){var c=tj(this,a);-1!=c&&(c==this.Ue?(a.Ag(!1),this.Ue=-1):c<this.Ue&&this.Ue--);(c=a.a())&&c.id&&this.Sh&&tb(this.Sh,c.id)}a=Jo.d.removeChild.call(this,a,b);a.To(!0);return a};f.Ub=function(){return this.Ja};f.ri=function(a){if(this.a())throw Error("Component already rendered");this.Ja=a};f.ua=function(){return this.Ic};
f.ca=function(a,b){if(b||this.Ic!=a&&this.dispatchEvent(a?"show":"hide")){this.Ic=a;var c=this.a();c&&(Xi(c,a),this.di()&&uo(this.sc(),this.Tb&&this.Ic),b||this.dispatchEvent(this.Ic?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Tb};
f.Lb=function(a){this.Tb!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Tb=!0,qj(this,function(a){a.wD?delete a.wD:a.Lb(!0)})):(qj(this,function(a){a.isEnabled()?a.Lb(!1):a.wD=!0}),this.hi=this.Tb=!1),this.di()&&uo(this.sc(),a&&this.Ic))};f.di=function(){return this.mu};f.Cj=function(a){a!=this.mu&&this.ma&&Lo(this,a);this.mu=a;this.Tb&&this.Ic&&uo(this.sc(),a)};f.qh=function(a){(a=sj(this,a))?a.Ag(!0):-1<this.Ue&&Mo(this).Ag(!1)};f.Ag=function(a){this.qh(tj(this,a))};
function Mo(a){return sj(a,a.Ue)}function No(a){Ro(a,function(a,c){return(a+1)%c},rj(a)-1)}function Oo(a){Ro(a,function(a,c){a--;return 0>a?c-1:a},0)}function Qo(a){Ro(a,function(a,c){return(a+1)%c},a.Ue)}function Po(a){Ro(a,function(a,c){a--;return 0>a?c-1:a},a.Ue)}function Ro(a,b,c){c=0>c?tj(a,a.Fc):c;var d=rj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=sj(a,c);if(h&&a.Uy(h)){a.qh(c);break}e++;c=b.call(a,c,d)}}f.Uy=function(a){return a.ua()&&a.isEnabled()&&$n(a,2)};function So(){}w(So,Tn);ga(So);So.prototype.$=function(){return"goog-menuheader"};function To(a,b,c){io.call(this,a,c||So.re(),b);this.jd(1,!1);this.jd(2,!1);this.jd(4,!1);this.jd(32,!1);this.T=1}w(To,io);Qn("goog-menuheader",function(){return new To(null)});function Uo(a,b){Jo.call(this,wo,b||Ao.re(),a);this.Cj(!1)}w(Uo,Jo);f=Uo.prototype;f.xt=!0;f.MF=!1;f.$=function(){return this.Ta().$()};f.lk=function(a){if(this.Ta().lk(this,a))return!0;for(var b=0,c=rj(this);b<c;b++){var d=sj(this,b);if("function"==typeof d.lk&&d.lk(a))return!0}return!1};f.fk=function(a){this.nn(a,!0)};f.sw=function(a,b){var c=this.ua();c||Xi(this.a(),!0);var d=this.a(),e=a,h=b,k=Li(d);e instanceof rh&&(h=e.y,e=e.x);Ei(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Xi(this.a(),!1)};
f.ca=function(a,b,c){(b=Uo.d.ca.call(this,a,b))&&a&&this.ma&&this.xt&&this.sc().focus();this.KB=a&&c&&u(c.clientX)?new rh(c.clientX,c.clientY):null;return b};f.Gu=function(a){this.xt&&this.sc().focus();return Uo.d.Gu.call(this,a)};f.Uy=function(a){return(this.MF||a.isEnabled())&&a.ua()&&$n(a,2)};f.ne=function(a){var b=this.Ta(),c;c=this.N();c=Ph(c.la,"div",b.$()+"-content",a);for(var d=c.length,e=0;e<d;e++)xo(b,this,c[e]);Uo.d.ne.call(this,a)};
f.mg=function(a){var b=Uo.d.mg.call(this,a);b||qj(this,function(c){!b&&c.KH&&c.nB==a.keyCode&&(this.isEnabled()&&this.Ag(c),b=c.dh(a))},this);return b};f.qh=function(a){Uo.d.qh.call(this,a);var b=sj(this,a);if(b){a=this.a();var b=b.a(),c=Li(b),d=Li(a),e=fj(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new rh(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Vo(){}Vo.prototype.ze=function(){};function Wo(a,b,c){this.element=a;this.yn=b;this.pL=c}w(Wo,Vo);Wo.prototype.ze=function(a,b,c){Bo(this.element,this.yn,a,b,void 0,c,this.pL)};function Xo(a,b,c,d){Wo.call(this,a,b);this.nr=c?5:0;this.Wv=d||void 0}w(Xo,Wo);Xo.prototype.wH=function(){return this.nr};Xo.prototype.ze=function(a,b,c,d){var e=Bo(this.element,this.yn,a,b,null,c,10,d,this.Wv);if(e&496){var h=Yo(e,this.yn);b=Yo(e,b);e=Bo(this.element,h,a,b,null,c,10,d,this.Wv);e&496&&(h=Yo(e,h),b=Yo(e,b),Bo(this.element,h,a,b,null,c,this.nr,d,this.Wv))}};function Yo(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Zo(a,b,c,d){Xo.call(this,a,b,c||d);if(c||d)this.nr=65|(d?32:132)}w(Zo,Xo);function $o(){}w($o,Tn);ga($o);f=$o.prototype;f.ah=function(){return"button"};f.vh=function(a,b,c){switch(b){case 8:case 16:al(a,"pressed",c);break;default:case 64:case 1:$o.d.vh.call(this,a,b,c)}};f.B=function(a){var b=$o.d.B.call(this,a);this.ms(b,a.Sn());var c=a.w();c&&this.C(b,c);$n(a,16)&&this.vh(b,16,a.gh());return b};f.Jb=function(a,b){b=$o.d.Jb.call(this,a,b);var c=this.w(b);a.Uc=c;a.Rw=this.Sn(b);$n(a,16)&&this.vh(b,16,a.gh());return b};f.w=fa;f.C=fa;f.Sn=function(a){return a.title};
f.ms=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.No=function(a,b){var c=a.Ve(),d=this.$()+"-collapse-left",e=this.$()+"-collapse-right";a.wk(c?e:d,!!(b&1));a.wk(c?d:e,!!(b&2))};f.$=function(){return"goog-button"};function ap(){}w(ap,$o);ga(ap);f=ap.prototype;f.ah=function(){};f.B=function(a){a.To(!1);a.qn&=-256;a.jd(32,!1);return a.N().B("button",{"class":this.zk(a).join(" "),disabled:!a.isEnabled(),title:a.Sn()||"",value:a.w()||""},a.Dq()||"")};f.Qe=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.Jb=function(a,b){a.To(!1);a.qn&=-256;a.jd(32,!1);if(b.disabled){var c=this.Nn(1);el(b,c)}return ap.d.Jb.call(this,a,b)};
f.km=function(a){a.ib().D(a.a(),"click",a.Tk)};f.Mo=fa;f.wm=fa;f.di=function(a){return a.isEnabled()};f.Cj=fa;f.vc=function(a,b,c){ap.d.vc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.w=function(a){return a.value};f.C=function(a,b){a&&(a.value=b)};f.vh=fa;function bp(a,b,c){io.call(this,a,b||ap.re(),c)}w(bp,io);f=bp.prototype;f.w=function(){return this.Uc};f.C=function(a){this.Uc=a;this.Ta().C(this.a(),a)};f.Sn=function(){return this.Rw};f.ms=function(a){this.Rw=a;this.Ta().ms(this.a(),a)};f.No=function(a){this.Ta().No(this,a)};f.f=function(){bp.d.f.call(this);delete this.Uc;delete this.Rw};f.hb=function(){bp.d.hb.call(this);if($n(this,32)){var a=this.sc();a&&this.ib().D(a,"keyup",this.mg)}};
f.mg=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Tk(a):32==a.keyCode};Qn("goog-button",function(){return new bp(null)});function cp(){}w(cp,$o);ga(cp);f=cp.prototype;f.B=function(a){var b={"class":"goog-inline-block "+this.zk(a).join(" ")},b=a.N().B("div",b,this.nq(a.getContent(),a.N()));this.ms(b,a.Sn());Wn(this,a,b);return b};f.ah=function(){return"button"};f.Ha=function(a){return a&&a.firstChild.firstChild};f.nq=function(a,b){return b.B("div","goog-inline-block "+(this.$()+"-outer-box"),b.B("div","goog-inline-block "+(this.$()+"-inner-box"),a))};f.Qe=function(a){return"DIV"==a.tagName};
f.Jb=function(a,b){dp(b,!0);dp(b,!1);var c;a:{c=a.N().Wz(b);var d=this.$()+"-outer-box";if(c&&dl(c,d)&&(c=a.N().Wz(c),d=this.$()+"-inner-box",c&&dl(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.nq(b.childNodes,a.N()));fl(b,["goog-inline-block",this.$()]);return cp.d.Jb.call(this,a,b)};f.$=function(){return"goog-custom-button"};
function dp(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ia(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function ep(){}w(ep,cp);ga(ep);f=ep.prototype;f.Ha=function(a){return ep.d.Ha.call(this,a&&a.firstChild)};f.Jb=function(a,b){var c=Ph(document,"*","goog-menu",b)[0];if(c){Xi(c,!1);Mh(c).body.appendChild(c);var d=new Uo;d.Jb(c);fp(a,d)}return ep.d.Jb.call(this,a,b)};f.nq=function(a,b){return ep.d.nq.call(this,[this.createCaption(a,b),b.B("div","goog-inline-block "+(this.$()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.B("div","goog-inline-block "+(this.$()+"-caption"),a)};
f.$=function(){return"goog-menu-button"};function gp(a,b,c,d,e){bp.call(this,a,c||ep.re(),d);this.jd(64,!0);this.vr=new Zo(null,5);b&&fp(this,b);this.HJ=null;this.O=new Wf(500);!Ho&&!Io||pc("533.17.9")||(this.fr=!0);this.IJ=e||Ao.re()}w(gp,bp);f=gp.prototype;f.fr=!1;f.CL=!1;f.hb=function(){gp.d.hb.call(this);hp(this,!0);this.W&&ip(this,this.W,!0);al(this.q,"haspopup",!!this.W)};f.Dc=function(){gp.d.Dc.call(this);hp(this,!1);if(this.W){this.hc(!1);this.W.Dc();ip(this,this.W,!1);var a=this.W.a();a&&S(a)}};
f.f=function(){gp.d.f.call(this);this.W&&(this.W.g(),delete this.W);delete this.uL;this.O.g()};f.eh=function(a){gp.d.eh.call(this,a);this.fh()&&(this.hc(!(this.T&64),a),this.W&&(this.W.hi=!!(this.T&64)))};f.ng=function(a){gp.d.ng.call(this,a);this.W&&!this.fh()&&(this.W.hi=!1)};f.Tk=function(){this.setActive(!1);return!0};f.HI=function(a){this.W&&this.W.ua()&&!this.lk(a.target)&&this.hc(!1)};f.lk=function(a){return a&&ii(this.a(),a)||this.W&&this.W.lk(a)||!1};
f.mg=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.W&&this.W.ua()){var b=this.W.dh(a);return 27==a.keyCode?(this.hc(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.hc(!0,a),!0):!1};f.MI=function(){this.hc(!1)};f.NI=function(){this.fh()||this.hc(!1)};f.Ek=function(a){this.fr||this.hc(!1);gp.d.Ek.call(this,a)};f.wu=function(){this.W||fp(this,new Uo(this.N(),this.IJ));return this.W||null};
function fp(a,b){var c=a.W;b!=c&&(c&&(a.hc(!1),a.ma&&ip(a,c,!1),delete a.W),a.ma&&al(a.q,"haspopup",!!b),b&&(a.W=b,b.Uo(a),b.ca(!1),c=a.fr,(b.xt=c)&&b.Cj(!0),a.ma&&ip(a,b,!0)))}f.fk=function(a){this.wu().nn(a,!0)};f.ca=function(a,b){var c=gp.d.ca.call(this,a,b);c&&!this.ua()&&this.hc(!1);return c};f.Lb=function(a){gp.d.Lb.call(this,a);this.isEnabled()||this.hc(!1)};f.uw=function(){this.hc(!0)};f.Vn=function(){this.hc(!1)};
f.hc=function(a,b){gp.d.hc.call(this,a);if(this.W&&!!(this.T&64)==a){if(a){if(!this.W.ma)if(this.CL){var c=gi(this.a());c?this.W.nh(c.parentNode,c):this.W.k(this.a().parentNode)}else this.W.k();this.tD=Ki(this.a());this.Sy=Vi(this.a());jp(this);this.W.qh(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.W.hi=!1;if(c=this.a())al(c,"activedescendant",""),al(c,"owns","");null!=this.Mr&&(this.Mr=void 0,(c=this.W.a())&&Ri(c,"",""))}this.W.ca(a,!1,b);if(!this.rk){var c=this.ib(),d=a?c.D:
c.vb;d.call(c,vi(this.N()),"mousedown",this.HI,!0);this.fr&&d.call(c,this.W,"blur",this.NI);d.call(c,this.O,Xf,this.WK);a?this.O.start():this.O.stop()}}};function jp(a){if(a.W.ma){var b=a.vr;a.vr.element=a.uL||a.a();var c=a.W.a();a.W.ua()||(c.style.visibility="hidden",Xi(c,!0));!a.Mr&&a.vr.wH&&a.vr.nr&32&&(a.Mr=U(c));b.ze(c,b.yn^1,a.HJ,a.Mr);a.W.ua()||(Xi(c,!1),c.style.visibility="visible")}}
f.WK=function(){var a=Vi(this.a()),b=Ki(this.a()),c=this.Sy;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.tD,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Sy=a,this.tD=b,jp(this))};function ip(a,b,c){var d=a.ib();c=c?d.D:d.vb;c.call(d,b,"action",a.MI);c.call(d,b,"highlight",a.Hu);c.call(d,b,"unhighlight",a.Iu)}function hp(a,b){var c=a.ib();(b?c.D:c.vb).call(c,a.a(),"keydown",a.KI)}
f.Hu=function(a){var b=this.a();if(a=a.target.a()){var c=bl(a,"activedescendant");a=Mh(a).getElementById(c)||a;a.id||(c=jj.re(),a.id=":"+(c.xB++).toString(36));c="";a&&(c=a.id);al(b,"activedescendant",c);al(b,"owns",a.id)}};f.KI=function(a){$n(this,32)&&this.sc()&&this.W&&this.W.ua()&&a.stopPropagation()};f.Iu=function(){if(!Mo(this.W)){var a=this.a();al(a,"activedescendant","");al(a,"owns","")}};Qn("goog-menu-button",function(){return new gp(null)});function kp(){W.call(this);this.te=R("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":kp.CSS.qE});$h(this.a(),this.te);this.tj=R("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":kp.CSS.ob});$h(this.a(),this.tj);this.W=new Uo;this.ad=new ik;this.Md=[];lp(this);this.Vn(void 0,0);this.W.k(this.te);Q(this.W.a(),kp.CSS.pE)}w(kp,W);v("nrg.ui.SlideInMenu",kp);kp.ID_PREFIX="nrg.ui.SlideInMenu";
kp.CSS_SUFFIX={ob:"icon",nN:"icon-hovered",pE:"menu",qE:"menuholder",rE:"menuitem",xx:"menuitem-highlight",sE:"menuitem-icon"};var mp={Ks:null,yh:null,ob:null};function np(a,b,c,d){d=da(d)?d:200;return[new dk(a,d),new Xj(a,b,c,d,wk)]}function op(a,b,c,d){d=da(d)?d:200;return[new ck(a,d),new Xj(a,b,c,d,wk)]}f=kp.prototype;f.tc=null;f.NB=null;f.Cn=null;f.qm=!1;f.Wn=[-100,-100];f.cp=[0,0];f.lv=!0;f.mv=!1;f.oC=function(a,b){return this.Wn=[a,b]};f.DC=function(a,b){return this.cp=[a,b]};f.oH=function(){return this.Wn};
f.dI=function(){return this.cp};f.wu=function(){return this.W};f.FH=function(){return this.te};f.GH=function(){return this.tj};f.sC=function(a){this.tj.src=a};f.SL=function(a,b){this.tc[a].ob.src=b};f.$z=function(a){return pb(this.tc).indexOf(a)};f.Bu=function(a){return pb(this.tc)[a]};f.uu=function(a){return this.tc[pb(this.tc)[a]]};f.jB=function(a){return this.lv=a};f.EJ=function(a){return this.mv=a};f.bI=function(){return this.Cn};
function pp(a){null!=a.ad&&(a.ad.stop(),E(a.Md,function(a){this.ad.remove(a);a.g()}.bind(a)),Jb(a.Md))}function qp(a,b,c){pp(a);E(g(b)?b:[b],function(a){this.ad.add(a);this.Md.push(a)}.bind(a));a.te.style.visibility="visible";Tc(a.ad,"end",function(){c&&c()}.bind(a));a.ad.play()}f.Xl=null;f.tq=null;f.hC=function(a){this.tq=a;this.a().title=a};function rp(a){null!=a.Xl&&(ca.clearTimeout(a.Xl),a.Xl=null);a.Xl=Yf(function(){this.Xl=null;this.qm&&(!this.rv&&this.qm?this.Vn():rp(this))}.bind(a),450)}
f.qh=function(a){Q(this.tc[this.Bu(a)].yh,kp.CSS.xx);this.lv&&(this.tj.src=this.tc[this.Bu(a)].ob.src);this.mv?this.a().title=this.uu(a).Ks.getContent():null!=this.tq&&(this.a().title=this.tq)};f.sz=function(){C(this.tc,function(a){Ch(a.yh,kp.CSS.xx)}.bind(this))};
f.py=function(a,b){null==this.tc&&(this.tc={});a=r(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;E(a,function(a,k){if(this.tc[a])throw Error(a+" is already in use!");c=new so(a);this.W.fk(c);d=c.Ha();Q(d,kp.CSS.rE);d.title=a;e=R("img",{id:kp.ID_PREFIX+"_MenuItemIcon_"+B(),"class":kp.CSS.sE});e.src=k<=b.length-1?b[k]:null;$h(d,e);this.tc[a]=vb(mp);this.tc[a].Ks=c;this.tc[a].yh=d;this.tc[a].ob=e}.bind(this))};
f.Xo=function(a,b){var c=a;if(r(c)){if(!this.tc[c])throw Error(c+" does not exist!");c=this.$z(c)}this.NB=this.Cn?this.Cn:a;this.Cn=a;da(b)&&!b||this.sz();this.qh(c);this.dispatchEvent({type:"item_selected",index:c,title:this.uu(c).Ks.getContent()})};f.uw=function(a,b){qp(this,np(this.te,this.Wn,this.cp,b),function(){this.qm=!0;null!=a&&a()}.bind(this))};f.Vn=function(a,b){qp(this,op(this.te,this.cp,this.Wn,b),function(){this.qm=!1;this.te.style.visibility="hidden";da(a)&&a()}.bind(this))};
function lp(a){H(a.a(),"click",function(){this.qm?this.Vn():this.uw()}.bind(a));H(a.W,"action",function(a){this.Xo(a.target.getContent())}.bind(a));H(a.te,"mouseover",function(){this.rv=!0}.bind(a));H(a.te,"mouseout",function(){this.rv=!1;rp(this)}.bind(a))}
f.f=function(){kp.d.f.call(this);delete this.rv;delete this.Xl;pp(this);Jb(this.Md);delete this.Md;C(this.tc,function(a,b){J(a);S(a);delete this.tc[b]}.bind(this));D(this.tc);delete this.tc;S(this.te);delete this.te;S(this.tj);delete this.tj;J(this.W);this.W.g();this.vq(this.ad);delete this.ad;delete this.tq;delete this.NB;delete this.Cn;delete this.qm;delete this.Wn;delete this.cp;delete this.lv;delete this.mv};v("nrg.ui.SlideInMenu.ID_PREFIX",kp.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{sN:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",kp.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",mp);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",kp.prototype.oC);v("nrg.ui.SlideInMenu.prototype.setShowPosition",kp.prototype.DC);v("nrg.ui.SlideInMenu.prototype.getHidePosition",kp.prototype.oH);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",kp.prototype.dI);v("nrg.ui.SlideInMenu.prototype.getMenu",kp.prototype.wu);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",kp.prototype.FH);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",kp.prototype.GH);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",kp.prototype.sC);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",kp.prototype.SL);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",kp.prototype.$z);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",kp.prototype.Bu);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",kp.prototype.uu);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",kp.prototype.jB);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",kp.prototype.EJ);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",kp.prototype.bI);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",kp.prototype.qh);v("nrg.ui.SlideInMenu.prototype.deselectAll",kp.prototype.sz);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",kp.prototype.py);v("nrg.ui.SlideInMenu.prototype.setSelected",kp.prototype.Xo);v("nrg.ui.SlideInMenu.prototype.showMenu",kp.prototype.uw);v("nrg.ui.SlideInMenu.prototype.hideMenu",kp.prototype.Vn);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",kp.prototype.hC);v("nrg.ui.SlideInMenu.prototype.disposeInternal",kp.prototype.f);function sp(){W.call(this)}w(sp,W);v("nrg.ui.HoverInput",sp);sp.ID_PREFIX="nrg.ui.HoverInput";sp.CSS_SUFFIX={gE:"inputbox",rN:"inputbox-hovered",hx:"display"};f=sp.prototype;f.Bc=null;f.da=null;f.dJ=!1;f.Tb=!0;f.cu="";f.Lb=function(a){this.Tb=a};f.C=function(a){null!=this.da&&(this.da.value=a,this.Fg())};f.w=function(){if(null!=this.da)return parseInt(this.da.value)};f.Fb=function(a){null!=this.da&&(this.da.max=a,this.Fg())};f.S=function(){if(null!=this.da)return this.da.max};
f.Mb=function(a){null!=this.da&&(this.da.min=a,this.Fg())};f.ha=function(){if(null!=this.da)return this.da.min};f.Gc=function(a){null!=this.da&&(this.da.step=a,this.Fg())};f.vd=function(){if(null!=this.da)return this.da.step};f.tH=function(){return this.da};f.aH=function(){return this.Bc};f.Gy="right";f.jC=function(a){a=a.toLowerCase();if("right"==a||"left"==a)this.Gy=a;else throw Error("Invalid alignment: "+a);};
f.cq=function(){this.Bc.style.left="right"==this.Gy?"calc(100% - "+U(this.Bc).width.toString()+"px)":"0px"};f.Fg=function(){this.Bc.innerHTML=this.da.value.toString()+this.cu;this.cq()};f.CB=function(a){this.Tb&&(this.da.value=parseInt(a.target.value),this.dispatchEvent({type:"h",value:this.da.value}),this.Fg())};
f.k=function(a){sp.d.k.call(this,a);this.Bc=R("div");this.a().appendChild(this.Bc);Q(this.Bc,sp.CSS.hx);this.da=R("input");this.da.type="number";this.da.step=1;this.da.min=0;this.da.max=100;this.da.value=100;this.a().appendChild(this.da);Q(this.da,sp.CSS.gE);H(this.da,"input",this.CB.bind(this));this.Fg()};f.Qo=function(a){this.cu=a};f.f=function(){sp.d.f.call(this);delete this.dJ;delete this.Tb;delete this.cu;this.da&&(J(this.da),S(this.da),delete this.da);this.Bc&&(J(this.Bc),S(this.Bc),delete this.Bc)};
v("nrg.ui.HoverInput.EventType",{qN:"h",hx:"i"});v("nrg.ui.HoverInput.ID_PREFIX",sp.ID_PREFIX);v("nrg.ui.HoverInput.CSS_SUFFIX",sp.CSS_SUFFIX);v("nrg.ui.HoverInput.prototype.displayElt",sp.prototype.Bc);v("nrg.ui.HoverInput.prototype.inputBox",sp.prototype.da);v("nrg.ui.HoverInput.prototype.alignDisplayElement",sp.prototype.cq);v("nrg.ui.HoverInput.prototype.setDisplayAlignment",sp.prototype.jC);v("nrg.ui.HoverInput.prototype.getValue",sp.prototype.w);v("nrg.ui.HoverInput.prototype.setValue",sp.prototype.C);
v("nrg.ui.HoverInput.prototype.setStep",sp.prototype.Gc);v("nrg.ui.HoverInput.prototype.getStep",sp.prototype.vd);v("nrg.ui.HoverInput.prototype.setMaximum",sp.prototype.Fb);v("nrg.ui.HoverInput.prototype.getMaximum",sp.prototype.S);v("nrg.ui.HoverInput.prototype.setMinimum",sp.prototype.Mb);v("nrg.ui.HoverInput.prototype.getMinimum",sp.prototype.ha);v("nrg.ui.HoverInput.prototype.updateValue",sp.prototype.Fg);v("nrg.ui.HoverInput.prototype.onInput",sp.prototype.CB);
v("nrg.ui.HoverInput.prototype.getInputElement",sp.prototype.tH);v("nrg.ui.HoverInput.prototype.getDisplayElement",sp.prototype.aH);v("nrg.ui.HoverInput.prototype.setDisplaySuffix",sp.prototype.Qo);v("nrg.ui.HoverInput.prototype.render",sp.prototype.k);v("nrg.ui.HoverInput.prototype.disposeInternal",sp.prototype.f);function tp(a,b){$c.call(this);this.q=a;var c=hi(this.q)?this.q:this.q?this.q.body:null;this.pJ=!!c&&Mi(c);this.bB=H(this.q,hc?"DOMMouseScroll":"mousewheel",this,b)}w(tp,$c);
tp.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Qc;if("mousewheel"==a.type){c=1;if(F||ic&&(dc||pc("532.0")))c=40;d=up(-a.wheelDelta,c);da(a.wheelDeltaX)?(b=up(-a.wheelDeltaX,c),c=up(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),da(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;u(this.kB)&&(b=hd(b,-this.kB,this.kB));u(this.lB)&&(c=hd(c,-this.lB,this.lB));this.pJ&&(b=-b);b=new vp(d,a,b,c);this.dispatchEvent(b)};function up(a,b){return ic&&(cc||ec)&&0!=a%b?a:a/b}
tp.prototype.f=function(){tp.d.f.call(this);Vc(this.bB);this.bB=null};function vp(a,b,c,d){Hc.call(this,b);this.type="mousewheel";this.detail=a;this.Uh=c;this.Pd=d}w(vp,Hc);function wp(a){bd.call(this);this.u="interactor";this.Me=a;this.dt=this.Xx=this.Wx=this.Yx=this.Vx=this.Zx=null;this.Sp=!0;this.Ni=this.Hi=this.Rg=!1;this.Xc=[0,0];this.Zs=new A.R(0,0,0);this.Rm=new A.R(0,0,0);this.ZA=0;this.ey=this.Op=null;this.mt=!1;this.xb={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(wp,bd);wp.prototype.__defineGetter__("config",function(){return this.xb});
wp.prototype.__defineGetter__("leftButtonDown",function(){return this.Rg});wp.prototype.__defineGetter__("middleButtonDown",function(){return this.Hi});wp.prototype.__defineGetter__("rightButtonDown",function(){return this.Ni});
wp.prototype.ta=function(){this.xb.MOUSEWHEEL_ENABLED?(this.dt=new tp(this.Me),this.Zx=H(this.dt,"mousewheel",this.yo.bind(this))):(Vc(this.Zx),this.dt=null);this.xb.MOUSECLICKS_ENABLED?(this.Vx=H(this.Me,"mousedown",this.Nv.bind(this)),this.Yx=H(this.Me,"mouseup",this.Ov.bind(this))):(Vc(this.Vx),Vc(this.Yx));this.Me.oncontextmenu=this.xb.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.xb.KEYBOARD_ENABLED?this.ki.bind(this):null;this.xb.TOUCH_ENABLED?(this.xb.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.zF=H(this.Me,"touchstart",this.eL.bind(this)),this.yF=H(this.Me,"touchmove",this.cL.bind(this)),this.xF=H(this.Me,"touchend",this.ZK.bind(this))):(Vc(this.zF),Vc(this.yF),Vc(this.xF));Vc(this.Wx);Vc(this.Xx);this.Wx=H(this.Me,"mousemove",this.zK.bind(this));this.Xx=H(this.Me,"mouseout",this.AK.bind(this))};
wp.prototype.Nv=function(a){0==a.button?this.Rg=!0:1==a.button?this.Hi=!0:2==a.button&&(this.Ni=!0);eval("this.onMouseDown("+this.Rg+","+this.Hi+","+this.Ni+")");xp(this);a.preventDefault()};wp.prototype.wK=function(){};wp.prototype.Ov=function(a){0==a.button?this.Rg=!1:1==a.button?this.Hi=!1:2==a.button&&(this.Ni=!1);eval("this.onMouseUp("+this.Rg+","+this.Hi+","+this.Ni+")");xp(this);a.preventDefault()};wp.prototype.__defineGetter__("mousePosition",function(){return this.Xc});f=wp.prototype;
f.CK=function(){};f.AK=function(a){this.Sp=!1;this.xb.KEYBOARD_ENABLED&&(window.onkeydown=null);this.Ni=this.Hi=this.Rg=!1;xp(this);this.Zs=new A.R(0,0,0);a.preventDefault()};f.yK=function(){};f.eL=function(a){a.preventDefault();a.ta(a.Qc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Rm=new A.R(a.clientX,a.clientY,0);this.ey=setTimeout(this.aL.bind(this,a),500)};f.dL=function(){};
f.aL=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new re;a.Qg=!0;a.Tf=this instanceof yp;this.dispatchEvent(a);this.Xp=!0};f.$K=function(){};function zp(a){clearTimeout(a.ey);if(a.Xp){var b=new re;b.Qg=!1;b.Tf=a instanceof yp;a.dispatchEvent(b)}a.Xp=!1}f.ZK=function(a){a.preventDefault();eval("this.onTouchEnd()");zp(this)};f.YK=function(){};
f.cL=function(a){a.preventDefault();this.Xp||zp(this);this.touchmoveEvent=a=a.Qc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.R(c[0],c[1],0);var b=c[0]>3*this.Me.clientWidth/4,d=c[0]<this.Me.clientWidth/4,e=c[1]<this.Me.clientHeight/4,c=c[1]>3*this.Me.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Rm.Hc(a);this.Rm=a.clone();if(this.Xp)a=new pe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.md=e,this.dispatchEvent(a);
else if(this instanceof Ap&&(b||d))a=new se,a.ec=0>e.y,this.dispatchEvent(a);else if(this instanceof yp||c)e.scale(3),a=new qe,a.md=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.R(a[0],a[1],0),b=new A.R(b[0],b[1],0),e=qd(a,b),b=e-this.ZA,this.ZA=e,this.Rm.Hc(a),this.Rm=a.clone(),10<Math.abs(b)&&(a=new re,a.Qg=0<b,a.Tf=this instanceof yp,this.dispatchEvent(a)))};f.bL=function(){};
f.zK=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Sp=!0;this.xb.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.ki.bind(this));a.preventDefault();var b=a.shiftKey;this.mt=b;this.Xc=[a.offsetX,a.offsetY];var c=new A.R(this.Xc[0],this.Xc[1],0);a=this.Zs.Hc(c);this.Zs=c.clone();this.xb.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Hi||this.Rg||this.Ni)&&xp(this),this.Op=setTimeout(function(){xp(this);var a=new ue;a.aq=c.x;a.bq=
c.y;this.dispatchEvent(a);this.Op=null}.bind(this),300));0!=a.sg()&&(this.Rg&&!b?(b=new qe,a.scale(3),b.md=a,this.dispatchEvent(b)):this.Hi||this.Rg&&b?(b=new pe,b.md=a,this.dispatchEvent(b)):this.Ni&&(b=new re,b.Qg=0<a.y,b.Tf=!1,this.dispatchEvent(b)))};function xp(a){a.Op&&clearTimeout(a.Op);a.dispatchEvent(new ve)}f.DK=function(){};f.yo=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");xp(this);a.preventDefault()};f.oK=function(){};
f.ki=function(a){if(this.Sp){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");xp(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new pe:b?a=new re:(a=new qe,this instanceof Ap&&(a=new se)),a&&(c=new A.R(0,0,0),37==h?(c.x=5,a.ec=!1,b&&(a.ec=!0,a.Qg=!0,a.Tf=!1)):39==h?(c.x=-5,a.ec=!0,b&&(a.Qg=!1,a.Tf=!1)):38==h?(c.y=5,a.ec=!0,b&&(a.Qg=!0,a.Tf=!0)):40==h&&(c.y=-5,a.ec=!1,b&&(a.Qg=!1,a.Tf=!0)),a.md=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new we,this.dispatchEvent(a))}};v("X.interactor",wp);v("X.interactor.prototype.init",wp.prototype.ta);v("X.interactor.prototype.onMouseDown",wp.prototype.wK);v("X.interactor.prototype.onMouseUp",wp.prototype.CK);v("X.interactor.prototype.onMouseMove",wp.prototype.yK);v("X.interactor.prototype.onMouseWheel",wp.prototype.DK);v("X.interactor.prototype.onKey",wp.prototype.oK);v("X.interactor.prototype.onTouchStart",wp.prototype.dL);v("X.interactor.prototype.onTouchMove",wp.prototype.bL);
v("X.interactor.prototype.onTouchEnd",wp.prototype.YK);v("X.interactor.prototype.onTouchHover",wp.prototype.$K);function Ap(a){wp.call(this,a);this.u="interactor2D"}w(Ap,wp);Ap.prototype.yo=function(a){Ap.d.yo.call(this,a);var b=new se;null==a.Pd&&(a.Pd=0);b.ec=0>a.Pd;this.dispatchEvent(b)};function Bp(a,b){if(!u(a)||!u(b))throw Error("A camera needs valid width and height values.");bd.call(this);this.u="camera";this.Yj=new A.R(0,100,0);this.ul=new A.R(0,0,0);this.ec=new A.R(0,0,1);this.Za=a;this.La=b;this.P=this.rr(this.Yj,this.ul)}w(Bp,bd);Bp.prototype.observe=function(a){if(!(null!=a&&a instanceof wp))throw Error("Could not observe the interactor.");H(a,be,this.MK.bind(this));H(a,$d,this.FK.bind(this));H(a,ce,this.nL.bind(this))};
Bp.prototype.MK=function(a){if(!(a instanceof qe))throw Error("Received no valid rotate event.");this.rotate(a.md)};Bp.prototype.nL=function(a){if(!(a instanceof re))throw Error("Received no valid zoom event.");a.Qg?this.Im(a.Tf):this.Jm(a.Tf)};Bp.prototype.FK=function(a){if(!(a instanceof pe))throw Error("Received no valid pan event.");this.Nr(a.md)};Bp.prototype.__defineGetter__("view",function(){return this.P});
Bp.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.P=a});Bp.prototype.__defineGetter__("position",function(){return[this.Yj.x,this.Yj.y,this.Yj.z]});Bp.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.Yj=new A.R(a[0],a[1],a[2]);this.reset()});Bp.prototype.__defineGetter__("focus",function(){return[this.ul.x,this.ul.y,this.ul.z]});
Bp.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.ul=new A.R(a[0],a[1],a[2]);this.reset()});Bp.prototype.__defineGetter__("up",function(){return[this.ec.x,this.ec.y,this.ec.z]});Bp.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.ec=new A.R(a[0],a[1],a[2]);this.reset()});f=Bp.prototype;f.reset=function(){this.P=this.rr(this.Yj,this.ul)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.R(a[0],a[1],0);else if(!(a instanceof A.R))throw Error("Invalid distance vector for rotate operation.");return a};f.Nr=function(a){if(g(a)&&2==a.length)a=new A.R(a[0],a[1],0);else if(!(a instanceof A.R))throw Error("Invalid distance vector for pan operation.");this.P[12]-=a.x;this.P[13]+=a.y};f.Im=function(a){var b=20;null!=a&&!a&&(b=1);this.P[14]+=b};f.Jm=function(a){var b=20;null!=a&&!a&&(b=1);this.P[14]-=b};
f.rr=function(a,b){if(!(a instanceof A.R&&b instanceof A.R))throw Error("3D vectors required for calculating the view.");return A.v.Zn()};v("X.camera",Bp);v("X.camera.prototype.pan",Bp.prototype.Nr);v("X.camera.prototype.rotate",Bp.prototype.rotate);v("X.camera.prototype.zoomIn",Bp.prototype.Im);v("X.camera.prototype.zoomOut",Bp.prototype.Jm);function Cp(a,b,c){this.hf=this.gf=this.ff=0;3==arguments.length?(this.ff=Number(a),this.gf=Number(b),this.hf=Number(c)):a instanceof Cp?(this.ff=Number(a.x()),this.gf=Number(a.y()),this.hf=Number(a.z())):(this.ff=Number(a[0]),this.gf=Number(a[1]),this.hf=Number(a[2]))}
Cp.prototype={clone:function(){return new Cp(this.ff,this.gf,this.hf)},cj:function(a){return this.ff*a.x()+this.gf*a.y()+this.hf*a.z()},pr:function(a,b){return Dp(this,Ep(Fp(a,this),b))},length:function(){return Math.sqrt(this.cj(this))},pk:function(a){return new Cp(this.gf*a.z()-this.hf*a.y(),this.hf*a.x()-this.ff*a.z(),this.ff*a.y()-this.gf*a.x())},x:function(){return this.ff},y:function(){return this.gf},z:function(){return this.hf}};
function Gp(a){var b=a.length();return new Cp(a.ff/b,a.gf/b,a.hf/b)}function Ep(a,b){return new Cp(a.ff*b,a.gf*b,a.hf*b)}function Fp(a,b){return new Cp(a.ff-b.x(),a.gf-b.y(),a.hf-b.z())}function Dp(a,b){return new Cp(a.ff+b.x(),a.gf+b.y(),a.hf+b.z())}function Hp(a){return new Cp(-a.ff,-a.gf,-a.hf)};function Ip(a,b){this.aw=new Cp(a);this.hd=new Cp(b)}Ip.prototype={clone:function(){return new Ip(this.aw.clone(),this.hd.clone())},yk:function(){this.hd=Hp(this.hd)},ye:function(){return this.aw}};function Jp(a,b){this.hd=a;this.xp=b}Jp.prototype={clone:function(){return new Jp(this.hd.clone(),this.xp)},yk:function(){this.hd=Hp(this.hd);this.xp=-this.xp}};function Kp(a,b){this.wi=a;this.ns=b;var c=a[0].ye(),d=a[1].ye(),e=a[2].ye(),d=Gp(Fp(d,c).pk(Fp(e,c)));this.af=new Jp(d,d.cj(c))}Kp.prototype={clone:function(){var a=this.wi.map(function(a){return a.clone()});return new Kp(a,this.ns)},yk:function(){this.wi.reverse().map(function(a){a.yk()});this.af.yk()}};
function Lp(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.wi.length;n++){var p=b.hd.cj(a.wi[n].ye())-b.xp,p=-1E-5>p?2:1E-5<p?1:0,k=k|p;l.push(p)}switch(k){case 0:(0<b.hd.cj(a.af.hd)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.wi.length;n++){var m=(n+1)%a.wi.length,p=l[n],q=l[m],k=a.wi[n],m=a.wi[m];2!=p&&c.push(k);1!=p&&d.push(2!=p?k.clone():k);3==(p|q)&&(p=(b.xp-b.hd.cj(k.ye()))/b.hd.cj(Fp(m.ye(),k.ye())),p=new Ip(k.aw.pr(m.ye(),p),k.hd.pr(m.hd,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new Kp(c,a.ns));3<=d.length&&h.push(new Kp(d,a.ns))}};function Mp(a){this.$a=this.Wa=this.af=null;this.Kb=[];a&&Np(this,a)}Mp.prototype={clone:function(){var a=new Mp;Op(a,this.af&&this.af.clone());Pp(a,this.Wa&&this.Wa.clone());Qp(a,this.$a&&this.$a.clone());a.ks(this.Kb.map(function(a){return a.clone()}));return a},Db:function(){for(var a=0;a<this.Kb.length;a++)this.Kb[a].yk();this.af.yk();this.Wa&&this.Wa.Db();this.$a&&this.$a.Db();a=this.Wa;this.Wa=this.$a;this.$a=a},ks:function(a){this.Kb=a}};function Qp(a,b){a.$a=b}function Pp(a,b){a.Wa=b}
function Op(a,b){a.af=b}function Np(a,b){if(b.length){a.af||(a.af=b[0].af.clone());for(var c=[],d=[],e=0;e<b.length;e++)Lp(b[e],a.af,a.Kb,a.Kb,c,d);c.length&&(a.Wa||(a.Wa=new Mp),Np(a.Wa,c));d.length&&(a.$a||(a.$a=new Mp),Np(a.$a,d))}}function Rp(a){var b=a.Kb.slice();a.Wa&&(b=b.concat(Rp(a.Wa)));a.$a&&(b=b.concat(Rp(a.$a)));return b}function Sp(a,b){a.Kb=Tp(b,a.Kb);a.Wa&&Sp(a.Wa,b);a.$a&&Sp(a.$a,b)}
function Tp(a,b){if(!a.af)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Lp(b[e],a.af,c,d,c,d);a.Wa&&(c=Tp(a.Wa,c));d=a.$a?Tp(a.$a,d):[];return c.concat(d)};function Up(){this.Kb=[]}function Vp(a){var b=new Up;b.ks(a);return b}
Up.prototype={clone:function(){var a=new Up;a.ks(this.Kb.map(function(a){return a.clone()}));return a},Vw:function(a){var b=new Mp(this.clone().Kb);a=new Mp(a.clone().Kb);Sp(b,a);Sp(a,b);a.Db();Sp(a,b);a.Db();Np(b,Rp(a));return Vp(Rp(b))},Hc:function(a){var b=new Mp(this.clone().Kb);a=new Mp(a.clone().Kb);b.Db();Sp(b,a);Sp(a,b);a.Db();Sp(a,b);a.Db();Np(b,Rp(a));b.Db();return Vp(Rp(b))},Su:function(a){var b=new Mp(this.clone().Kb);a=new Mp(a.clone().Kb);b.Db();Sp(a,b);a.Db();Sp(b,a);Sp(a,b);Np(b,Rp(a));
b.Db();return Vp(Rp(b))},inverse:function(){var a=this.clone();a.Kb.map(function(a){a.yk()});return a},ks:function(a){this.Kb=a}};function Wp(){}function Xp(a){for(var b=a.G.count,c=[],d=0,d=0;d<b;d+=3){var e=a.G.get(d),h=a.G.get(d+1),k=a.G.get(d+2),l=a.fa.get(d),n=a.fa.get(d+1),p=a.fa.get(d+2),m=a.Ka;a.Mc&&0<a.Mc.length&&(m=a.Mc.get(d));var q=[];q.push(new Ip(e,l));q.push(new Ip(h,n));q.push(new Ip(k,p));c.push(new Kp(q,m))}return Vp(c)}
function Yp(a,b){if(!(null!=b&&b instanceof Up))throw Error("Invalid CSG object.");var c=new dd,d=[];Db(b.Kb,function(a){var b=[],k=a.ns,b=Db(a.wi,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.rF=Db(c.unique(),function(a){return[a.ye().x(),a.ye().y(),a.ye().z()]});a.qF=Db(c.unique(),function(a){return[a.hd.x(),a.hd.y(),a.hd.z()]});a.pF=Db(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.G=new cd(9*d.length);
a.fa=new cd(9*d.length);a.Mc=new cd(9*d.length);Db(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.rF,n=this.qF,p=this.pF;this.G.add(d[b][0],d[b][1],d[b][2]);this.G.add(d[c][0],d[c][1],d[c][2]);this.G.add(d[a][0],d[a][1],d[a][2]);this.fa.add(n[b][0],n[b][1],n[b][2]);this.fa.add(n[c][0],n[c][1],n[c][2]);this.fa.add(n[a][0],n[a][1],n[a][2]);p[b]&&this.Mc.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Mc.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Mc.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Mc.Qa&&(a.Mc=null);
a.Ld=Sd}Wp.prototype.Vw=function(a){if(null==a||!(a instanceof Up||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Xp(b));a=new Vd;Aa(a,new Wp);Yp(a,Xp(this).Vw(b));return a};Wp.prototype.Hc=function(a){if(null==a||!(a instanceof Up||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Xp(b));a=new Vd;Aa(a,new Wp);Yp(a,Xp(this).Hc(b));return a};
Wp.prototype.Su=function(a){if(null==a||!(a instanceof Up||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Xp(b));a=new Vd;Aa(a,new Wp);Yp(a,Xp(this).Su(b));return a};Wp.prototype.inverse=function(){var a=new Vd;Aa(a,new Wp);Yp(a,Xp(this).inverse());return a};v("X.constructable",Wp);v("X.constructable.prototype.intersect",Wp.prototype.Su);v("X.constructable.prototype.inverse",Wp.prototype.inverse);v("X.constructable.prototype.subtract",Wp.prototype.Hc);
v("X.constructable.prototype.union",Wp.prototype.Vw);function Zp(a){function b(a,b,d){b=b*Math.PI*2;b=Dp(Ep(n,Math.cos(b)),Ep(p,Math.sin(b)));a=Dp(Dp(c,Ep(e,a)),Ep(b,h));d=Dp(Ep(b,1-Math.abs(d)),Ep(k,d));return new Ip(a,d)}this.Kb=[];a=a||{};var c=new Cp(a.start||[0,-1,0]),d=new Cp(a.end||[0,1,0]),e=Fp(d,c),h=a.lh||1;a=a.Ba||16;for(var k=Gp(e),l=.5<Math.abs(k.y()),n=Gp((new Cp(l,!l,0)).pk(k)),p=Gp(n.pk(k)),l=new Ip(c,Hp(k)),d=new Ip(d,Gp(k)),m=[],q=0;q<a;q++){var t=q/a,s=(q+1)/a;m.push(new Kp([l,b(0,t,-1),b(0,s,-1)]));m.push(new Kp([b(0,s,0),b(0,t,
0),b(1,t,0),b(1,s,0)]));m.push(new Kp([d,b(1,s,1),b(1,t,1)]))}return Vp(m)}w(Zp,Up);function $p(){Vd.call(this);this.u="cylinder";this.pt=[-10,-10,-10];this.Xs=[10,10,10];this.Zj=10;this.$c=32;Aa(this,new Wp)}w($p,Vd);$p.prototype.__defineGetter__("start",function(){return this.pt});$p.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.pt=a});$p.prototype.__defineGetter__("end",function(){return this.Xs});$p.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.Xs=a});
$p.prototype.__defineGetter__("radius",function(){return this.Zj});$p.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Zj=a});$p.prototype.ga=function(){Yp(this,new Zp({start:this.pt,end:this.Xs,lh:this.Zj,Ba:this.$c}));$p.d.ga.call(this)};v("X.cylinder",$p);v("X.cylinder.prototype.modified",$p.prototype.ga);function aq(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new Cp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new Ip(Dp(c,Ep(e,d)),e))}this.Kb=[];a=a||{};var c=new Cp(a.Nd||[0,0,0]),d=a.lh||1,e=a.Ba||16;a=a.hM||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new Kp(k));return Vp(h)}w(aq,Up);function bq(){Vd.call(this);this.u="sphere";this.Va=[0,0,0];this.Zj=5;this.$c=32;this.wF=16;Aa(this,new Wp)}w(bq,Vd);bq.prototype.__defineGetter__("center",function(){return this.Va});bq.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Va=a});bq.prototype.__defineGetter__("radius",function(){return this.Zj});bq.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Zj=a});
bq.prototype.ga=function(){Yp(this,new aq({Nd:this.Va,lh:this.Zj,Ba:this.$c,hM:this.wF}));bq.d.ga.call(this)};v("X.sphere",bq);v("X.sphere.prototype.modified",bq.prototype.ga);function Pe(a){K.call(this);this.u="labelmap";this.Nh=a;this.nt=new Float32Array([-255,-255,-255,-255])}w(Pe,K);Pe.prototype.ga=function(){var a=new Wd;a.Ra=this;this.dispatchEvent(a);this.Nh.ga()};Pe.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.Id)throw Error("No colortable assigned.");b=this.Id.he.get(a).slice(1,5)}this.nt=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Pe);function cq(a){this.Kb=[];a=a||{};var b=new Cp(a.Nd||[0,0,0]),c=a.lh?a.lh.length?a.lh:[a.lh,a.lh,a.lh]:[1,1,1];return Vp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Kp(a[0].map(function(e){e=new Cp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new Ip(e,new Cp(a[1]))}))}))}w(cq,Up);function dq(){Vd.call(this);this.u="cube";this.Va=[0,0,0];this.bt=this.at=this.$s=20;this.Gl=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Aa(this,new Wp)}w(dq,Vd);dq.prototype.__defineGetter__("center",function(){return this.Va});dq.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Va=a});dq.prototype.__defineGetter__("lengthX",function(){return this.$s});
dq.prototype.__defineSetter__("lengthX",function(a){if(!u(a))throw Error("Invalid lengthX.");this.$s=a});dq.prototype.__defineGetter__("lengthY",function(){return this.at});dq.prototype.__defineSetter__("lengthY",function(a){if(!u(a))throw Error("Invalid lengthY.");this.at=a});dq.prototype.__defineGetter__("lengthZ",function(){return this.bt});dq.prototype.__defineSetter__("lengthZ",function(a){if(!u(a))throw Error("Invalid lengthZ.");this.bt=a});
dq.prototype.ga=function(){Yp(this,new cq({Nd:this.Va,lh:[this.$s/2,this.at/2,this.bt/2]}));dq.d.ga.call(this)};v("X.cube",dq);v("X.cube.prototype.modified",dq.prototype.ga);function yp(a){wp.call(this,a);this.u="interactor3D"}w(yp,wp);yp.prototype.yo=function(a){yp.d.yo.call(this,a);var b=new re;null==a.Pd&&(a.Pd=0);b.Qg=0>a.Pd;b.Tf=!0;this.dispatchEvent(b)};function eq(a){bd.call(this);this.u="array";this.fb=[];this.Lx=a}w(eq,bd);function fq(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}eq.prototype.add=function(a){this.fb.push(a);return!0};eq.prototype.remove=function(a){a=this.fb.indexOf(a);-1<a&&this.fb.splice(a,1);return!0};eq.prototype.clear=function(){this.fb.length=0};
function gq(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),gq(a,b,d),gq(a,d,c);b<d;++b)if(0<a.Lx(a.fb[b],a.fb[d])){var e=a.fb[b];a.fb[b]=a.fb[d];for(var h=a,k=d,l=c;k+1<l&&0>h.Lx(h.fb[k+1],e);){var n=h,p=k+1,m=n.fb[k];n.fb[k]=n.fb[p];n.fb[p]=m;++k}h.fb[k]=e}}eq.prototype.sort=function(){gq(this,0,this.fb.length)};function hq(a,b){Bp.call(this,a,b);this.u="camera2D"}w(hq,Bp);hq.prototype.rotate=function(a){a=hq.d.rotate.call(this,a);var b=new oe;0<a.x?b.rt--:0>a.x&&b.rt++;0<a.y?b.ct++:0>a.y&&b.ct--;this.dispatchEvent(b)};hq.prototype.Im=function(a){var b=20;null!=a&&!a&&(b=.02);this.P[14]+=b};hq.prototype.Jm=function(a){var b=20;null!=a&&!a&&(b=.02);this.P[14]-=b};
hq.prototype.Nr=function(a){if(g(a)&&2==a.length)a=new A.R(a[0],a[1],0);else if(!(a instanceof A.R))throw Error("Invalid distance vector for pan operation.");this.P[12]-=a.x/this.P[14];this.P[13]+=a.y/this.P[14]};function iq(a,b){Bp.call(this,a,b);this.u="camera3D";this.Ox=45;this.ht=A.v.kv(A.v.Zn(),this.Ox,a/b,1,1E4)}w(iq,Bp);iq.prototype.rotate=function(a){a=iq.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.R(this.P[1],this.P[5],this.P[9]),d=new A.R(this.P[0],this.P[4],this.P[8]);c.normalize();d.normalize();A.v.rotate(this.P,b,c.x,c.y,c.z);A.v.rotate(this.P,a,d.x,d.y,d.z)};iq.prototype.rr=function(a,b){var c=iq.d.rr.call(this,a,b);A.v.iB(c,a,b,this.ec);return c};
function jq(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.v.multiply(a.ht,a.P,l);A.v.Db(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.v.sB(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",iq);function kq(){$c.call(this)}w(kq,$c);f=kq.prototype;f.Uc=0;f.tg=0;f.Df=100;f.Se=0;f.si=1;f.ue=!1;f.Ok=!1;f.C=function(a){a=lq(this,a);this.Uc!=a&&(this.Uc=a+this.Se>this.Df?this.Df-this.Se:a<this.tg?this.tg:a,this.ue||this.Ok||this.dispatchEvent("change"))};f.w=function(){return lq(this,this.Uc)};f.Gf=function(a){a=lq(this,a);this.Se!=a&&(this.Se=0>a?0:this.Uc+a>this.Df?this.Df-this.Uc:a,this.ue||this.Ok||this.dispatchEvent("change"))};
f.td=function(){var a=this.Se;return null==this.si?a:Math.round(a/this.si)*this.si};f.Mb=function(a){if(this.tg!=a){var b=this.ue;this.ue=!0;this.tg=a;a+this.Se>this.Df&&(this.Se=this.Df-this.tg);a>this.Uc&&this.C(a);a>this.Df&&(this.Se=0,this.Fb(a),this.C(a));(this.ue=b)||this.Ok||this.dispatchEvent("change")}};f.ha=function(){return lq(this,this.tg)};
f.Fb=function(a){a=lq(this,a);if(this.Df!=a){var b=this.ue;this.ue=!0;this.Df=a;a<this.Uc+this.Se&&this.C(a-this.Se);a<this.tg&&(this.Se=0,this.Mb(a),this.C(this.Df));a<this.tg+this.Se&&(this.Se=this.Df-this.tg);(this.ue=b)||this.Ok||this.dispatchEvent("change")}};f.S=function(){return lq(this,this.Df)};f.vd=function(){return this.si};f.Gc=function(a){this.si!=a&&(this.si=a,a=this.ue,this.ue=!0,this.Fb(this.S()),this.Gf(this.td()),this.C(this.w()),(this.ue=a)||this.Ok||this.dispatchEvent("change"))};
function lq(a,b){return null==a.si?b:a.tg+Math.round((b-a.tg)/a.si)*a.si};function mq(a){kj.call(this,a);this.mh=new kq;H(this.mh,"change",this.Eu,!1,this)}w(mq,kj);var nq={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=mq.prototype;f.B=function(){this.df=this.nk();var a=nq[this.Ja];this.q=this.N().B("div",a,this.df);oq(this);pq(this);qq(this)};f.hb=function(){mq.d.hb.call(this);F&&7>nc&&H(this.a(),"resize",this.wh,!1,this);this.wh();var a=this.a();$k(a,"progressbar");al(a,"live","polite")};f.Dc=function(){mq.d.Dc.call(this);rq(this)};
f.nk=function(){return this.N().B("div","progress-bar-thumb")};function rq(a){F&&7>nc&&Uc(a.a(),"resize",a.wh,!1,a)}f.ne=function(a){mq.d.ne.call(this,a);el(this.a(),nq[this.Ja]);a=Ph(document,null,"progress-bar-thumb",this.a())[0];a||(a=this.nk(),this.a().appendChild(a));this.df=a};f.w=function(){return this.mh.w()};f.C=function(a){this.mh.C(a);this.a()&&oq(this)};function oq(a){al(a.a(),"valuenow",a.w())}f.ha=function(){return this.mh.ha()};f.Mb=function(a){this.mh.Mb(a);this.a()&&pq(this)};
function pq(a){al(a.a(),"valuemin",a.ha())}f.S=function(){return this.mh.S()};f.Fb=function(a){this.mh.Fb(a);this.a()&&qq(this)};function qq(a){al(a.a(),"valuemax",a.S())}f.Ja="horizontal";f.Eu=function(){this.wh();this.dispatchEvent("change")};
f.wh=function(){if(this.df){var a=this.ha(),b=this.S(),a=(this.w()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Ja?F&&7>nc?(this.df.style.top=0,this.df.style.height="100%",b=this.df.offsetHeight,a=Math.round(a*b),this.df.style.top=b-a+"px",this.df.style.height=a+"px"):(this.df.style.top=100-b+"%",this.df.style.height=b+"%"):this.df.style.width=b+"%"}};
f.ri=function(a){if(this.Ja!=a){var b=nq[this.Ja],c=nq[a];this.Ja=a;if(a=this.a())dl(a,b)&&(gl(a,b),el(a,c)),b=this.df.style,"vertical"==this.Ja?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.wh()}};f.Ub=function(){return this.Ja};f.f=function(){rq(this);mq.d.f.call(this);this.df=null;this.mh.g()};f.vd=function(){return this.mh.vd()};f.Gc=function(a){this.mh.Gc(a)};function sq(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");mq.call(this);this.u="progressbar";this.pf=a;this.gt="";this.Lp=this.Mh=null;this.Wj=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Wj=[c,d,e];this.C(b);this.Pu()}w(sq,mq);
sq.prototype.Pu=function(){var a=Bi(this.pf,"position");if("static"==a||""==a)this.gt=this.pf.style.position,this.pf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=R("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Wj[0])),d=document.createTextNode(String(this.Wj[1])),e=document.createTextNode(String(this.Wj[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Mh=b;this.k(this.pf);a=this.a();a.style.position=
"absolute";a.style.top=(this.pf.clientHeight-5)/2+"px";a.style.left=(this.pf.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};sq.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;S(this.a());var c=new sq(this.pf,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");ei(d).classList.add("progress-bar-thumb-done");this.Lp=c};
sq.prototype.jo=function(){this.Mh&&S(this.Mh);this.a()&&S(this.a());this.Lp&&S(this.Lp.a());this.Lp=this.Mh=null;this.gt&&(this.pf.style.position=this.gt)};function tq(){bd.call(this);this.u="renderer";this.xa=window.document.body;this.Za=this.xa.clientWidth;this.La=this.xa.clientHeight;this.Ga=this.oa=this.yc=null;this.Sg=new eq(Yd);this.od=[];this.Pb=null;this.Tp=this.Sm=this.Rp=!1;this.b=this.Li=this.ke=null;this.xb={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Us=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(tq,bd);f=tq.prototype;
f.Bv=function(){window.cancelAnimationFrame(this.Us);this.xb.PROGRESSBAR_ENABLED&&(this.Li=new sq(this.xa,3))};f.Cv=function(){this.xb.PROGRESSBAR_ENABLED&&this.Li&&(this.Li.done(),this.Ip=Yf(function(){this.Ip=null;this.Li&&(this.Li.jo(),this.Li=null);this.Sm=this.Tp=!0;this.k()}.bind(this),700))};f.Dv=function(a){this.Li&&this.Li.C(100*a.ck)};f.Rk=function(a){this.ke&&this.ke.C(100*a.ck)};f.vK=function(a){null!=a&&a instanceof Wd&&a.Ra&&this.xh(a.Ra)};
f.HK=function(a){null!=a&&a instanceof Xd&&a.Ra&&this.remove(a.Ra)};f.Jv=function(a){if(!(null!=a&&a instanceof ue))throw Error("Invalid hover event.");};f.Sk=function(){var a=Nh(this.xa);this.Za=a.clientWidth;this.La=a.clientHeight;a=Nh(this.yc);null!=a&&(a.width=this.Za,a.height=this.La,"renderer3D"==this.u&&(this.b.viewport(0,0,this.Za,this.La),this.oa.ht=A.v.kv(A.v.Zn(),this.oa.Ox,this.yc.width/this.yc.height,1,1E4)))};
f.xj=function(a){if(!(null!=a&&a instanceof se))throw Error("Invalid scroll event.");};tq.prototype.__defineGetter__("config",function(){return this.xb});tq.prototype.__defineGetter__("interactor",function(){return this.Ga});tq.prototype.__defineGetter__("camera",function(){return this.oa});tq.prototype.__defineGetter__("loadingCompleted",function(){return this.Sm});tq.prototype.__defineGetter__("container",function(){return this.xa});
tq.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;r(b)&&(b=Nh(a));if(!hi(b))throw Error("Could not find the given container.");this.xa=b});f=tq.prototype;f.Ho=function(){this.oa.reset()};function uq(a){a.xb.PROGRESSBAR_ENABLED&&a.ke&&!a.Ip&&(a.ke.done(),a.Ip=Yf(function(){this.Ip=null;this.ke&&(this.ke.jo(),this.ke=null);this.k()}.bind(a),700))}
f.ta=function(a){var b=R("canvas");this.xa.appendChild(b);this.Za=this.xa.clientWidth;this.La=this.xa.clientHeight;b.width=this.Za;b.height=this.La;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.xa.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Pb=new Of;H(this.Pb,ie,this.Rk.bind(this));this.yc=b;this.b=c;b=new yp(this.yc);"2d"==a&&(b=new Ap(this.yc));b.ta();H(b,ee,this.Ho.bind(this));H(b,je,this.Jv.bind(this));H(b,de,this.xj.bind(this));this.Ga=b;b=new iq(this.Za,this.La);"2d"==a&&(b=new hq(this.Za,this.La));b.observe(this.Ga);this.oa=b;H(window,"resize",this.Sk,!1,this)};f.add=function(a){(a instanceof dq||a instanceof bq||a instanceof $p)&&a.ga();this.od.push(a);this.xh(a)};
f.remove=function(a){if(!this.yc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&J(a);return!1};f.xh=function(a){if(!this.yc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Wc(a,ge)||H(a,ge,this.vK.bind(this)),Wc(a,he)||H(a,he,this.HK.bind(this)),Wc(a,le)||H(a,le,this.Bv.bind(this)),Wc(a,ne)||H(a,ne,this.Dv.bind(this)),Wc(a,me)||H(a,me,this.Cv.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.Sg.fb,c=b.length,d=0,d=0;d<c;d++)if(b[d].nd==a)return b[d];return null};
f.k=function(){if(!this.yc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.by){if(this.Pb.zl.Ot(!1)){if(this.xb.PROGRESSBAR_ENABLED&&!this.ke&&(this.ke=new sq(this.xa,3)),this.Tp=this.Sm=!1,this.by=Yf(function(){this.by=null;this.k()}.bind(this),100),!this.xb.INTERMEDIATE_RENDERING)return}else if(this.Sm||this.Tp||(this.Tp=!0,eval("this.onShowtime()"),this.Sm=!0),this.ke){uq(this);return}this.Us=window.requestAnimationFrame(this.k.bind(this));eval("this.onRender()");
this.nh(!1,!0)}};f.JB=function(){};f.FB=function(){};f.nh=function(){};f.oe=function(){window.cancelAnimationFrame(this.Us);this.Pb&&(delete this.Pb,this.Pb=null);this.ke&&(this.ke.jo(),delete this.ke,this.ke=null);this.Sg.clear();delete this.Sg;this.od.length=0;delete this.od;delete this.Pb;this.Pb=null;delete this.oa;this.oa=null;delete this.Ga;this.Ga=null;delete this.b;this.b=null;S(this.yc);delete this.yc;this.yc=null};function vq(){tq.call(this);this.u="renderer2D";this.Zc=null;this.Jd=-1;this.je=[];this.Tx=this.Pp=this.Px=this.Np=null;this.Dl=this.Fl=this.$j=this.ak=0;this.Qb=this.Rb=this.Bb=this.zb=this.Mx=-1;this.Ux=new Float32Array([-255,-255,-255,-255]);this.ay=!0}w(vq,tq);vq.prototype.Rv=function(){};vq.prototype.hL=function(){};vq.prototype.xj=function(a){vq.d.xj.call(this,a);var b=this.od[0];if(b){var c="",c=0==this.Jd?"indexX":1==this.Jd?"indexY":"indexZ";b[c]=a.ec?b[c]+1:b[c]-1;eval("this.onScroll();")}};
vq.prototype.iL=function(a){var b=this.od[0];if(b){var c=b.Qb-b.Rb,d=c/2,e=parseInt(c+c/15*-a.rt,10);a=parseInt(d+d/15*a.ct,10);c==e&&e++;d==a&&a++;b.Rb-=parseInt(d-a,10);b.Rb-=parseInt(c-e,10);b.Rb=Math.max(b.Rb,b.ie);b.Qb-=parseInt(d-a,10);b.Qb+=parseInt(c-e,10);b.Qb=Math.min(b.Qb,b.cc);eval("this.onWindowLevel();")}};vq.prototype.__defineGetter__("orientation",function(){return this.Zc});
vq.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.Jd=2):"SAGITTAL"==a?(a="X",this.Jd=0):"CORONAL"==a&&(a="Y",this.Jd=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Zc=a});vq.prototype.__defineGetter__("radiological",function(){return this.ay});vq.prototype.__defineSetter__("radiological",function(a){this.ay=a});f=vq.prototype;
f.ta=function(){if(!this.Zc)throw Error("No 2D orientation set.");vq.d.ta.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.yc.width,this.yc.height);this.Np=R("canvas");this.Pp=R("canvas");H(this.oa,fe,this.iL.bind(this))};f.Sk=function(){vq.d.Sk.call(this);wq(this)};f.Ho=function(){vq.d.Ho.call(this);wq(this);var a=this.od[0];a&&(a.Qb=a.cc,a.Rb=a.ie)};
f.xh=function(a){vq.d.xh.call(this,a);var b=!1;this.get(a.nd)&&(b=!0);if(a instanceof K){var c=a.ja,d=a.t,e=a.Id;if(null!=d&&null!=d.ja&&d.ja.J)this.xh(d);else if(null!=e&&null!=e.ja&&e.ja.J)this.Pb.load(e,a);else{if(null!=c&&g(c))if(null!=a.Bh){if(a.Bh.qo!=c.length||b&&!a.J)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Pb.load(c[b],a);return}else if(null!=c&&c.J){this.Pb.load(a,a);return}c=this.Zc;this.Jd="X"==c?0:"Y"==c?1:2;this.$c=a.j[this.Jd].j;e=null;e=0==this.Jd?a.indexX:1==this.Jd?a.indexY:
a.indexZ;c=a.j[this.Jd].j[e].Sx;d=a.j[this.Jd].j[e].Rx;this.Fl=a.j[this.Jd].j[e].Oh;this.Dl=a.j[this.Jd].j[e].Hh;this.ak=c;this.$j=d;e=this.Np;e.width=c;e.height=d;var h=this.Pp;h.width=c;h.height=d;this.Px=e.getContext("2d");this.Tx=h.getContext("2d");b||(this.Sg.add(a),wq(this))}}};function wq(a){var b=Math.min(a.Za/(a.ak*a.Fl),a.La/(a.$j*a.Dl));null!=a.oa&&(a.oa.P[14]=b)}f.Lr=function(){};
f.xD=function(a,b){var c=this.od[0],d=this.oa.P,e=null,h=this.ak,k=this.$j,l=null,n=null;if("Y"==this.Zc)e=this.$c[parseInt(c.indexY,10)],l=e.Oh,n=e.Hh,this.je[0]="red",this.je[1]="blue";else if("Z"==this.Zc)e=this.$c[parseInt(c.indexZ,10)],l=e.Oh,n=e.Hh,this.je[0]="red",this.je[1]="green";else{e=this.$c[parseInt(c.indexX,10)];l=e.Hh;n=e.Oh;this.je[0]="green";this.je[1]="blue";var p=h,h=k,k=p}var m=1*d[12],q=-1*d[13],p=Math.max(d[14],.6),d=[this.Za/2,this.La/2],l=h*l*p,n=k*n*p,t=d[0]-l/2,d=d[1]-n/
2,t=t+m*p,d=d+q*p;return a>t&&a<t+l&&b>d&&b<d+n?(m=(a-t)/l*h,q=(b-d)/n*k,n=e.BF[4],"X"==this.Zc?(p=h-m,m=q,q=p):"Y"==this.Zc?m=h-m:"Z"==this.Zc&&(m=h-m,q=k-q),m=e.AF+m*e.Oh,q=e.uF+q*e.Hh,m=Ad(m,q,n,1),h=Bd(),Ld(e.nF,m,h),k=Bd(),Ld(e.oF,m,k),e=Math.round((c.e[0].H[0]*k[0]+c.e[0].H[1]*k[1]+c.e[0].H[2]*k[2]+c.e[0].ft)/c.e[0].El),e>=c.e[0].ea?e=c.e[0].ea-1:0>e&&(e=0),m=Math.round((c.e[1].H[0]*k[0]+c.e[1].H[1]*k[1]+c.e[1].H[2]*k[2]+c.e[1].ft)/c.e[1].El),m>=c.e[1].ea?m=c.e[1].ea-1:0>m&&(m=0),q=Math.round((c.e[2].H[0]*
k[0]+c.e[2].H[1]*k[1]+c.e[2].H[2]*k[2]+c.e[2].ft)/c.e[2].El),q>=c.e[2].ea?q=c.e[2].ea-1:0>q&&(q=0),[[e,m,q],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.nh=function(a,b){vq.d.nh.call(this,a,b);if(0!=this.Sg.fb.length){var c=this.od[0],d=null,d=0==this.Jd?c.indexX:1==this.Jd?c.indexY:c.indexZ,e=this.$c[parseInt(d,10)].Sx,h=this.$c[parseInt(d,10)].Rx;this.Fl=this.$c[parseInt(d,10)].Oh;this.Dl=this.$c[parseInt(d,10)].Hh;this.ak=e;this.$j=h;var k=this.Za,l=this.La,n=this.oa.P;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var p=Math.max(n[14],.1);this.b.setTransform(p,0,0,p,0,0);var m=1*n[12],n=-1*n[13],q=null;c.t&&(q=c.t.nt);var t=
this.$c[parseInt(d,10)],s=t.Ya.Mi,t=t.t,z=null;t&&(z=t.Mi);var y=this.ak,I=this.$j,O=this.Px,N=this.Tx,G=O.getImageData(0,0,y,I),T=N.getImageData(0,0,y,I),aa=G.data,V=T.data,wa=aa.length,oa=c.cc,ya=c.zb,Oa=c.Bb,Ja=c.Rb/oa,Pa=c.Qb/oa;if(this.Mx!=d||this.zb!=ya||this.Bb!=Oa||this.Rb!=Ja||this.Qb!=Pa||q&&!fq(q,this.Ux,0)){var ka=this.Np;ka.width=e;ka.height=h;ka=this.Pp;ka.width=e;ka.height=h;e=0;do{var ka=[0,0,0,0],h=[0,0,0,0],za=s[e]/255*oa,qa=s[e],qa=(qa/255-Ja)/(Pa-Ja),qa=255*qa;za>=ya&&za<=Oa&&
(ka=new L(c.Ii[0],c.Ii[1],c.Ii[2]),ka=(new L(c.Gi[0],c.Gi[1],c.Gi[2])).scale(qa).add(ka.scale(255-qa)),ka=[Math.floor(ka.x),Math.floor(ka.y),Math.floor(ka.z),255],t&&(-255==q[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:fq(q,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.Zc?(aa[e]=ka[0],aa[e+1]=ka[1],aa[e+2]=ka[2],aa[e+3]=ka[3],V[e]=h[0],V[e+1]=h[1],V[e+2]=h[2],V[e+3]=h[3]):"Y"==this.Zc?(qa=Math.floor(e/(4*y)),qa=qa*y*4+(4*(y-1)-(e-qa*y*4)),aa[qa]=ka[0],aa[qa+1]=ka[1],aa[qa+2]=ka[2],aa[qa+3]=ka[3],V[qa]=h[0],
V[qa+1]=h[1],V[qa+2]=h[2],V[qa+3]=h[3]):(qa=wa-1-e,aa[qa-3]=ka[0],aa[qa-2]=ka[1],aa[qa-1]=ka[2],aa[qa]=ka[3],V[qa-3]=h[0],V[qa-2]=h[1],V[qa-1]=h[2],V[qa]=h[3]);e+=4}while(e<wa);O.putImageData(G,0,0);N.putImageData(T,0,0);this.Mx=d;this.zb=ya;this.Bb=Oa;this.Rb=Ja;this.Qb=Pa;t&&(this.Ux=q)}this.b.globalAlpha=1;this.b.translate(k/2/p,l/2/p);"X"==this.Zc&&(this.b.rotate(.5*Math.PI),d=m,m=n,n=-d);m=-y*this.Fl/2+m;n=-I*this.Dl/2+n;this.b.drawImage(this.Np,m,n,y*this.Fl,I*this.Dl);t&&c.t.qb&&(this.b.globalAlpha=
c.t.Yc,this.b.drawImage(this.Pp,m,n,y*this.Fl,I*this.Dl));this.xb.SLICENAVIGATORS&&this.Ga.Sp&&this.Ga.mt&&!this.Ga.Rg&&(m=this.Ga.Xc,m=this.xD(m[0],m[1]))&&(c.Ih=m[0][0],c.Jh=m[0][1],c.Kh=m[0][2],c.ga(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Ga.Xc[0],0),this.b.lineTo(this.Ga.Xc[0],this.Ga.Xc[1]-10),this.b.moveTo(this.Ga.Xc[0],this.Ga.Xc[1]+10),this.b.lineTo(this.Ga.Xc[0],this.La),this.b.strokeStyle=this.je[0],this.b.stroke(),
this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Ga.Xc[1]),this.b.lineTo(this.Ga.Xc[0]-10,this.Ga.Xc[1]),this.b.moveTo(this.Ga.Xc[0]+10,this.Ga.Xc[1]+.5),this.b.lineTo(this.Za,this.Ga.Xc[1]),this.b.strokeStyle=this.je[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+m[2][0].toFixed(2)+", "+m[2][1].toFixed(2)+", "+m[2][2].toFixed(2),0,0),y=t=n="undefined","undefined"!=typeof c.kc[m[1][2].toFixed(0)]&&
"undefined"!=typeof c.kc[m[1][2].toFixed(0)][m[1][1].toFixed(0)]&&(n=c.kc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.jb&&(t=c.t.kc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.t.Pm&&(y=c.t.Pm.get(t),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+m[1][0].toFixed(0)+", "+m[1][1].toFixed(0)+", "+m[1][2].toFixed(0)+")",0,15),c.jb&&this.b.fillText("Labelmap:  "+y+" ("+t+")",0,30))}};v("X.renderer2D",vq);v("X.renderer2D.prototype.init",vq.prototype.ta);
v("X.renderer2D.prototype.add",vq.prototype.add);v("X.renderer2D.prototype.onShowtime",vq.prototype.JB);v("X.renderer2D.prototype.onRender",vq.prototype.FB);v("X.renderer2D.prototype.onScroll",vq.prototype.Rv);v("X.renderer2D.prototype.onWindowLevel",vq.prototype.hL);v("X.renderer2D.prototype.get",vq.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",vq.prototype.Ho);v("X.renderer2D.prototype.xy2ijk",vq.prototype.xD);v("X.renderer2D.prototype.render",vq.prototype.k);
v("X.renderer2D.prototype.destroy",vq.prototype.oe);v("X.renderer2D.prototype.onSliceNavigation",vq.prototype.Lr);function xq(){$c.call(this)}w(xq,$c);v("xiv.vis.RenderEngine",xq);xq.prototype.ID_PREFIX="xiv.vis.RenderEngine";var yq="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{$N:"j",XN:"k",YN:"l"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",yq);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",xq.prototype.ID_PREFIX);function zq(){vq.call(this)}w(zq,vq);v("xiv.vis.XtkRenderer2D",zq);f=zq.prototype;f.$e=function(){this.Sk()};f.Rv=function(){this.Lr()};f.Rk=function(a){zq.d.Rk.call(this,a);this.dispatchEvent({type:"k",value:a.ck})};f.ta=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;zq.d.ta.call(this);this.Ga.onMouseMove=this.nK.bind(this);this.Ga.config.MOUSEWHEEL_ENABLED=!1;this.Ga.config.MOUSECLICKS_ENABLED=!1;this.Ga.config.KEYBOARD_ENABLED=!1;this.Ga.ta()};f.Ub=function(){return this.Zc};
f.NG=function(){return this.oa};f.LH=function(){return this.Ga.mousePosition};f.gr=function(){};f.nK=function(){this.dispatchEvent({type:"mouseover",OJ:this.Ga.OJ,XL:this.Ga.shiftDown})};f.Lr=function(){this.dispatchEvent({type:"m",volume:this.od[0],EP:this.od[0]["index"+this.Zc],DP:this.Zc,XL:this.Ga.mt})};f.k=function(){this.yc&&this.b?(zq.d.k.call(this),this.dispatchEvent({type:"l"})):(window.console.log("init"),this.ta(),window.console.log(this.bm().visible))};f.OG=function(){return this.yc};
f.bm=function(){return this.od[0]};f.kA=function(){if(null!=this.$c){var a=this.od[0];if(null!=a[K.REORIENTED_DIMENSIONS_KEY]&&"false"==a.reslicing.toString())switch(this.Ub()){case "X":return a[K.REORIENTED_DIMENSIONS_KEY][0];case "Y":return a[K.REORIENTED_DIMENSIONS_KEY][1];case "Z":return a[K.REORIENTED_DIMENSIONS_KEY][2]}return this.$c.length}};f.AA=function(){return this.oa.P[14]};f.LC=function(a){this.oa.P[14]=a};function Aq(a){.01>a.oa.P[14]&&(a.oa.P[14]=.01)}
f.Im=function(){this.oa.P[14]+=.03;Aq(this)};f.Jm=function(){this.oa.P[14]+=-.03;Aq(this)};
function Bq(a,b,c,d){var e=a.od[0],h=a.oa.P,k=null,l=a.ak,n=a.$j,p=null,m=null;if(null!=e){"Y"==a.Zc?(k=a.$c[parseInt(e.indexY,10)],p=k.Oh,m=k.Hh,a.je[0]="red",a.je[1]="blue"):"Z"==a.Zc?(k=a.$c[parseInt(e.indexZ,10)],p=k.Oh,m=k.Hh,a.je[0]="red",a.je[1]="green"):(k=a.$c[parseInt(e.indexX,10)],p=k.Hh,m=k.Oh,a.je[0]="green",a.je[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),q=[a.Za/2,a.La/2],p=l*p*h,m=n*m*h,t=q[0]-p/2,q=q[1]-m/2,t=t+e*h,q=q+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?t+(a.ak-b)/l*p:t+b/l*p;b=Math.max(0,b);b=Math.min(b,n);return d?q+(a.$j-b)/n*m:q+b/n*m}}f.tA=function(a,b){return Bq(this,a,"vertical",b)};f.Zz=function(a,b){return Bq(this,a,"horizontal",b)};f.oe=function(){zq.d.oe.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",zq.prototype.$e);v("xiv.vis.XtkRenderer2D.prototype.onScroll",zq.prototype.Rv);v("xiv.vis.XtkRenderer2D.prototype.onProgress",zq.prototype.Rk);
v("xiv.vis.XtkRenderer2D.prototype.init",zq.prototype.ta);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",zq.prototype.Ub);v("xiv.vis.XtkRenderer2D.prototype.getCamera",zq.prototype.NG);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",zq.prototype.LH);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",zq.prototype.gr);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",zq.prototype.Lr);v("xiv.vis.XtkRenderer2D.prototype.render",zq.prototype.k);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",zq.prototype.OG);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",zq.prototype.bm);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",zq.prototype.kA);v("xiv.vis.XtkRenderer2D.prototype.getZoom",zq.prototype.AA);v("xiv.vis.XtkRenderer2D.prototype.setZoom",zq.prototype.LC);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",zq.prototype.Im);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",zq.prototype.Jm);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",zq.prototype.tA);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",zq.prototype.Zz);v("xiv.vis.XtkRenderer2D.prototype.destroy",zq.prototype.oe);function Cq(){W.call(this)}w(Cq,sp);v("xiv.ui.ZoomDisplay",Cq);Cq.ID_PREFIX="xiv.ui.ZoomDisplay";Cq.prototype.k=function(a){Cq.d.k.call(this,a);this.da.max=1E5;this.da.min=1;Q(this.Bc,"xiv-ui-framedisplay-text");Q(this.da,"xiv-ui-framedisplay-text")};Cq.prototype.Fg=function(){this.Bc.innerHTML="Zoom:&nbsp"+this.da.value+"%";this.cq()};v("xiv.ui.ZoomDisplay.ID_PREFIX",Cq.ID_PREFIX);v("xiv.ui.ZoomDisplay.prototype.updateValue",Cq.prototype.Fg);v("xiv.ui.ZoomDisplay.prototype.render",Cq.prototype.k);function Dq(){W.call(this)}w(Dq,sp);v("xiv.ui.FrameDisplay",Dq);Dq.ID_PREFIX="xiv.ui.FrameDisplay";Dq.prototype.k=function(a){Dq.d.k.call(this,a);Q(this.Bc,"xiv-ui-framedisplay-text");Q(this.da,"xiv-ui-framedisplay-text")};Dq.prototype.Fg=function(){this.Bc.innerHTML=this.da.value+" / "+this.da.max;this.cq()};v("xiv.ui.FrameDisplay.ID_PREFIX",Dq.ID_PREFIX);v("xiv.ui.FrameDisplay.prototype.updateValue",Dq.prototype.Fg);v("xiv.ui.FrameDisplay.prototype.render",Dq.prototype.k);function Eq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);W.call(this);this.wz=a;this.Aj=b;this.sn=null;this.nb=new im(this.a());this.nw()}w(Eq,W);v("nrg.ui.ResizeDragger",Eq);Eq.ID_PREFIX="nrg.ui.ResizeDragger";Eq.CSS_SUFFIX={};f=Eq.prototype;f.Gg=null;f.bi=null;f.Ql=null;f.Gn=null;f.Yg=null;f.Wh=null;f.zq=null;f.Fn=null;f.offsetX=0;f.wC=function(a){this.offsetX=a};f.offsetY=0;f.WL=function(a){this.offsetY=a};f.ab=null;f.ai=null;f.Aa=null;f.Wd=null;f.ya=null;f.nc=null;
f.Vd=!1;f.we=new uh(10,10);f.sd=function(){return this.sn};f.oi=function(a){this.sn=a};f.Fq=function(){return this.nb};f.Sz=function(){return this.wz};f.ud=function(){return this.a()};
f.Ij=function(){this.ai=U(this.a());this.ab=Gi(this.a());this.Gg=-1*this.ai.height/2+this.offsetY;this.bi=-1*this.ai.width/2+this.offsetX;this.nb.qg()||this.Vd||(this.Aa=vb(Gi(this.Aj)),this.Wd=vb(U(this.Aj)),this.Aa.left=this.Aa.x,this.Aa.top=this.Aa.y,this.Aa.right=this.Aa.x+this.Wd.width,this.Aa.bottom=this.Aa.y+this.Wd.height,this.ya=vb(Gi(this.sn)),this.nc=vb(U(this.sn)),this.ya.left=this.ya.x,this.ya.top=this.ya.y,this.ya.right=this.ya.x+this.nc.width,this.ya.bottom=this.ya.y+this.nc.height,
this.Ug&&this.Ug(this))};f.uC=function(a){return this.we=a};f.nw=function(){H(this.nb,"start",this.Qv.bind(this));H(this.nb,"drag",this.$e.bind(this));H(this.nb,"end",this.zo.bind(this))};f.Qv=function(){this.dispatchEvent({type:"start_resize"})};f.$e=function(){this.Ij();this.dispatchEvent({type:"resize",EL:this.Aa,Wd:this.Wd,YF:this.ya,nc:this.nc});null!=this.bf&&this.bf()};f.zo=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.nb.qg()||this.Vd||this.Ij()};f.wf=function(){};
f.If=function(a,b,c){this.Ij();a=this.wf(a);u(c)&&0===c?(Ei(this.a(),a.end),this.$e(),this.zo()):Fq(this,a.start,a.end,b,c)};f.aD=function(){null!=this.rh&&(this.rh.stop(),this.$e(),this.zo())};function Fq(a,b,c,d,e){a.rh=new Xj(a.a(),[b.x,b.y],[c.x,c.y],u(e)?e:500,wk);H(a.rh,"begin",function(){this.Vd=!0;this.Qv()}.bind(a));H(a.rh,"animate",a.$e.bind(a));H(a.rh,"end",function(){this.Vd=!1;this.rh.g();J(this.rh);this.rh.oe();this.rh=null;Ei(this.a(),c);this.zo();d&&d()}.bind(a));a.rh.play()}
f.f=function(){delete this.jQ;delete this.kQ;delete this.bi;delete this.Ql;delete this.Gn;delete this.Yg;delete this.Wh;delete this.zq;delete this.Fn;delete this.Vd;D(this.we);delete this.we;delete this.Aj;delete this.sn;D(this.ab);delete this.ab;D(this.ai);delete this.ai;D(this.Aa);delete this.Aa;D(this.Wd);delete this.Wd;D(this.ya);delete this.ya;D(this.nc);delete this.nc;S(this.nb.handle);this.nb.handle=null;J(this.nb);this.nb.g();delete this.nb;delete this.wz};
v("nrg.ui.ResizeDragger.EventType",{Ns:"resize",HE:"start_resize",GE:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Eq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Eq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Eq.prototype.Gg);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Eq.prototype.bi);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Eq.prototype.Ql);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Eq.prototype.Gn);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Eq.prototype.Yg);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Eq.prototype.Wh);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Eq.prototype.zq);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Eq.prototype.Fn);v("nrg.ui.ResizeDragger.prototype.offsetX",Eq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Eq.prototype.wC);v("nrg.ui.ResizeDragger.prototype.offsetY",Eq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Eq.prototype.WL);v("nrg.ui.ResizeDragger.prototype.handlePos",Eq.prototype.ab);v("nrg.ui.ResizeDragger.prototype.handleSize",Eq.prototype.ai);v("nrg.ui.ResizeDragger.prototype.resizeePos",Eq.prototype.Aa);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Eq.prototype.Wd);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Eq.prototype.ya);v("nrg.ui.ResizeDragger.prototype.boundarySize",Eq.prototype.nc);v("nrg.ui.ResizeDragger.prototype.isAnimating",Eq.prototype.Vd);
v("nrg.ui.ResizeDragger.prototype.minSize",Eq.prototype.we);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Eq.prototype.sd);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Eq.prototype.oi);v("nrg.ui.ResizeDragger.prototype.getDragger",Eq.prototype.Fq);v("nrg.ui.ResizeDragger.prototype.getDirection",Eq.prototype.Sz);v("nrg.ui.ResizeDragger.prototype.getHandle",Eq.prototype.ud);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Eq.prototype.Ij);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Eq.prototype.uC);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Eq.prototype.Qv);v("nrg.ui.ResizeDragger.prototype.onResize",Eq.prototype.$e);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Eq.prototype.zo);v("nrg.ui.ResizeDragger.prototype.update",Eq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Eq.prototype.wf);v("nrg.ui.ResizeDragger.prototype.stopSlideAnimation",Eq.prototype.aD);
v("nrg.ui.ResizeDragger.prototype.slideToLimits",Eq.prototype.If);v("nrg.ui.ResizeDragger.prototype.disposeInternal",Eq.prototype.f);function Gq(a){Eq.call(this,"right",a)}w(Gq,Eq);v("nrg.ui.ResizeDraggerRight",Gq);Gq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Gq.CSS_SUFFIX={};Gq.prototype.Ug=function(){this.Ql=this.Aa.left+this.we.width+this.bi;this.Gn=this.ya.right+this.bi;this.zq=this.Gn-this.Ql};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Gq.prototype.Ug);Gq.prototype.bf=function(){Si(this.Aj,Math.min(Math.max(this.Wd.width+(this.Vd?this.ab.x-this.Aa.right+this.bi:this.nb.clientX-this.nb.Fw),this.we.width),this.nc.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Gq.prototype.bf);Gq.prototype.update=function(a){this.nb.qg()||this.Vd||(Gq.d.update.call(this,a),km(this.nb,new wh(this.Ql,this.Aa.y,this.zq,0)),Ei(this.a(),this.Aa.right+this.bi,this.Aa.y),Ti(this.a(),this.Wd.height))};Gq.prototype.wf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.Ql,this.ab.y):new rh(this.Gn,this.ab.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Gq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Gq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Gq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Gq.prototype.wf);function Hq(a){Eq.call(this,"right",a)}w(Hq,Eq);v("nrg.ui.ResizeDraggerBottom",Hq);Hq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Hq.CSS_SUFFIX={};Hq.prototype.Ug=function(){this.Yg=this.Aa.top+this.we.height+this.Gg;this.Wh=this.ya.bottom+this.Gg;this.Fn=this.Wh-this.Yg};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Hq.prototype.Ug);Hq.prototype.bf=function(){Ti(this.Aj,Math.max(this.Wd.height+(this.ab.y-this.Aa.bottom),this.we.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Hq.prototype.bf);Hq.prototype.update=function(){this.nb.qg()||this.Vd||(Hq.d.update.call(this),km(this.nb,new wh(this.ya.x,this.Yg,0,this.Wh)),Ei(this.a(),this.Aa.x,this.Aa.bottom+this.Gg))};Hq.prototype.wf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.ab.x,this.Yg):new rh(this.ab.x,this.Wh)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Hq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Hq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Hq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Hq.prototype.wf);function Iq(a){Eq.call(this,"right",a)}w(Iq,Eq);v("nrg.ui.ResizeDraggerTop",Iq);Iq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Iq.CSS_SUFFIX={};Iq.prototype.Ug=function(){this.Yg=this.ya.top-this.Gg;this.Wh=this.Aa.bottom-this.we.height+this.Gg;this.Fn=this.Wh-this.Yg};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Iq.Ug);Iq.prototype.bf=function(){var a=this.ab.y-this.Gg,b=this.Wd.height+(this.Vd?this.Aa.y-a:this.nb.Gw-this.nb.clientY);this.Aj.style.top=a.toString()+"px";Ti(this.Aj,Math.max(b,this.we.height))};
Iq.prototype.update=function(){this.nb.qg()||this.Vd||(Iq.d.update.call(this),km(this.nb,new wh(this.ya.x,this.Yg,0,this.Fn)),Ei(this.a(),this.Aa.x,this.Aa.y+this.Gg))};Iq.prototype.wf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.ab.x,this.Wh):new rh(this.ab.x,this.Yg)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Iq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Iq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Iq.prototype.Ug);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Iq.prototype.bf);v("nrg.ui.ResizeDraggerTop.resizeMethod",Iq.bf);v("nrg.ui.ResizeDraggerTop.prototype.update",Iq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Iq.prototype.wf);function Jq(a){Eq.call(this,"right",a)}w(Jq,Eq);v("nrg.ui.ResizeDraggerTopRight",Jq);Jq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Jq.CSS_SUFFIX={};Jq.prototype.Ij=function(){Jq.d.Ij.call(this);this.nb.qg()||this.Vd||(Gq.prototype.Ug.bind(this)(),Iq.prototype.Ug.bind(this)())};Jq.prototype.$e=function(){Jq.d.$e.call(this);Gq.prototype.bf.bind(this)();Iq.prototype.bf.bind(this)()};
Jq.prototype.update=function(a){this.nb.qg()||this.Vd||(Jq.d.update.call(this,a),km(this.nb,new wh(this.ya.x+this.bi,this.ya.y+this.Gg,this.nc.width,this.nc.height)),Ei(this.a(),this.Aa.right+this.bi,this.Aa.y+this.Gg))};
Jq.prototype.wf=function(a){var b=new rh(this.ab.x,this.ab.y),c;"TOP_LEFT"==a?c=new rh(this.ya.x,this.ya.y):"TOP_RIGHT"==a?c=new rh(this.ya.x+this.nc.width,this.ya.y):"BOTTOM_RIGHT"==a?c=new rh(this.ya.x+this.nc.width,this.ya.y+this.nc.height):"BOTTOM_LEFT"==a&&(c=new rh(this.ya.x,this.ya.y+this.nc.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Jq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Jq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Jq.prototype.Ij);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Jq.prototype.$e);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Jq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Jq.prototype.wf);function Kq(a){Eq.call(this,"right",a)}w(Kq,Eq);v("nrg.ui.ResizeDraggerLeft",Kq);Kq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Kq.CSS_SUFFIX={};Kq.prototype.bf=function(){Si(this.Aj,Math.min(Math.max(this.Wd.width+(this.Aa.x-this.ab.x),this.we.width),this.nc.width));Ei(this.a(),this.ab.x,this.Aa.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Kq.prototype.bf);
Kq.prototype.update=function(a){this.nb.qg()||this.Vd||(Kq.d.update.call(this,a),km(this.nb,new wh(this.ya.x-this.ai.width,this.ya.y,this.nc.width-this.we.width-this.ai.width,0)),Ei(this.a(),this.Aa.x-this.ai.width,this.Aa.y))};Kq.prototype.wf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.ya.x+this.we.width,this.ab.y):new rh(this.ya.x+this.nc.width-this.we.width,this.ab.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Kq.ID_PREFIX);
v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Kq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerLeft.resizeMethod",Kq.bf);v("nrg.ui.ResizeDraggerLeft.prototype.update",Kq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Kq.prototype.wf);function Lq(a,b){W.call(this);this.q=Nh(a);this.ee={};this.xr=this.yr=20;this.vm(b||Lq.KP)}w(Lq,W);v("nrg.ui.Resizable",Lq);Lq.ID_PREFIX="nrg.ui.Resizable";Lq.CSS_SUFFIX={MM:"boundary"};var Mq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Nq=["RIGHT","BOTTOM"],Oq=new wh(0,0,600,600);f=Lq.prototype;f.PL=function(a,b){this.FP(a);if(0>b)throw Error("Threshold must be greater than zero!");this.AP[a]=b};f.ud=function(a){return this.ee[a].ud()};f.Ak=function(a){return this.ee[a]};
f.lH=function(){var a=[];E(ob(this.ee),function(b){a.push(b.ud())});return a};f.sd=function(){return this.bg};f.oi=function(a){this.bg=a;if(this.bg.parentNode!==this.q.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.tC=function(a){this.xr=a};f.vC=function(a){this.yr=a};f.IH=function(){return this.xr};f.JH=function(){return this.yr};
f.vm=function(a){a=a||"DEFAULT";r(a)&&(a="ALL"==a.toUpperCase()?Mq:"DEFAULT"==a.toUpperCase()?Nq:[a]);Pq(this);E(a,function(a){if(!r(a))throw Error("String required!");if(!Ib(Mq,a))throw Error("Invalid direction: ",a);this.qy(a)}.bind(this))};f.It=function(a){if(!Ib(Mq,a))throw Error("Invalid draggerDir '"+a);};f.RI=function(a){this.It(a);if(!this.ee[a])throw Error("No ResizeDragger for "+a);};f.If=function(a,b,c,d){a=a.toUpperCase();this.It(a);this.update();this.ee[a].If(b,c,d)};
function Qq(a,b){switch(a){case "TOP":return new Iq(b);case "BOTTOM":return new Hq(b);case "LEFT":return new Kq(b);case "RIGHT":return new Gq(b);case "TOP_RIGHT":return new Jq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.qy=function(a){if(a in this.ee)throw Error("Resize direction "+a+" already in use.");this.ee[a]=Qq(a,this.q);H(this.ee[a],"start_resize",this.LK.bind(this));H(this.ee[a],"resize",this.Sk.bind(this));H(this.ee[a],"end_resize",this.KK.bind(this));this.update()};f.update=function(){if(null!=this.bg){var a=new uh(this.yr,this.xr);C(this.ee,function(b){this.bg&&this.bg.parentNode&&$h(this.bg.parentNode,b.ud());b.sd()!==this.bg&&b.oi(this.bg);b.uC(a);b.Ij();b.update()}.bind(this))}};f.LK=function(){this.dispatchEvent({type:"resize_start"})};
f.Sk=function(a){this.dispatchEvent({type:"resize",EL:a.Aa,Wd:a.Wd,YF:a.ya,nc:a.nc})};f.KK=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Pq(a){C(a.ee,function(a){a&&(J(a),a.g())});D(a.ee)}f.f=function(){Lq.d.f.call(this);Pq(this);delete this.ee;this.bg&&(S(this.bg.parentNode),delete this.bg)};v("nrg.ui.Resizable.EventType",{Ns:"resize",HE:"resize_start",GE:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Lq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Lq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Mq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Nq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Oq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",Qq);v("nrg.ui.Resizable.prototype.setBoundThreshold",Lq.prototype.PL);v("nrg.ui.Resizable.prototype.getHandle",Lq.prototype.ud);v("nrg.ui.Resizable.prototype.getResizeDragger",Lq.prototype.Ak);v("nrg.ui.Resizable.prototype.getHandles",Lq.prototype.lH);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Lq.prototype.sd);v("nrg.ui.Resizable.prototype.setBoundaryElement",Lq.prototype.oi);v("nrg.ui.Resizable.prototype.setMinHeight",Lq.prototype.tC);v("nrg.ui.Resizable.prototype.setMinWidth",Lq.prototype.vC);v("nrg.ui.Resizable.prototype.getMinHeight",Lq.prototype.IH);v("nrg.ui.Resizable.prototype.getMinWidth",Lq.prototype.JH);v("nrg.ui.Resizable.prototype.setResizeDirections",Lq.prototype.vm);v("nrg.ui.Resizable.prototype.checkDirectionValid",Lq.prototype.It);
v("nrg.ui.Resizable.prototype.hasDragger",Lq.prototype.RI);v("nrg.ui.Resizable.prototype.slideToLimits",Lq.prototype.If);v("nrg.ui.Resizable.prototype.addResizeDirection",Lq.prototype.qy);v("nrg.ui.Resizable.prototype.update",Lq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Lq.prototype.f);function Rq(a){W.call(this);this.Nb=a}w(Rq,W);v("xiv.ui.layouts.LayoutFrame",Rq);Rq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Rq.CSS_SUFFIX={};f=Rq.prototype;f.Rd=function(){return this.Nb};f.Kc=null;f.Q=function(){return this.Dp};f.vm=function(a){this.Dp=this.Dp?this.Dp:new Lq(this.a());this.Dp.vm(a)};f.f=function(){Rq.d.f.call(this);delete this.Nb};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Rq.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Rq.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Rq.prototype.Rd);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Rq.prototype.Q);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Rq.prototype.vm);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Rq.prototype.f);function Sq(){W.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.i={}}w(Sq,W);v("xiv.ui.layouts.Layout",Sq);
var Tq="Slider_"+B(),Uq="FrameDisplay_"+B(),Vq="ZoomDisplay_"+B(),Wq="Crosshairs_"+B(),Xq="PlayButton_"+B(),Yq={ia:Tq,Dd:Uq,of:Vq,kd:Wq,Dh:Xq};Sq.ID_PREFIX="xiv.ui.layouts.Layout";Sq.CSS_SUFFIX={};f=Sq.prototype;f.ub=20;f.gd=20;f.TL=function(a){this.gd=a};f.UL=function(a){this.ub=a};f.yH=function(){return this.i};f.vu=function(a){return this.i[a]};f.xH=function(a){window.console.log(a,this.i[a]);var b={};C(Yq,function(c){b[c]=this.i[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};
f.Rd=function(){return this.constructor.TITLE};f.ny=function(a){this.i=this.i?this.i:{};this.i[a.Rd()]=a};f.Xg=function(){this.dispatchEvent({type:"n"})};f.gw=function(){C(this.$l(),function(a){null!=a.ia&&(a.ia.g(),delete a.ia);null!=a.kd&&(a.kd.g(),delete a.kd);null!=a.Dd&&(a.Dd.g(),delete a.Dd);null!=a.of&&(a.of.g(),delete a.of);null!=a.Dh&&(a.Dh.g(),delete a.Dh)})};
f.vp=function(){C(this.$l(),function(a){null!=a.ia&&(a.ia.o(),a.ia.C(a.ia.w()));null!=a.kd&&a.kd.o();null!=a.Dd&&a.Dd.o();null!=a.of&&a.of.o();null!=a.Dh&&a.Dh.o()})};f.o=function(){Sq.d.o.call(this);this.Xg()};f.f=function(){Sq.d.f.call(this);delete this.gd;delete this.ub;this.En(this.nE);delete this.nE};v("xiv.ui.layouts.Layout.EventType",{Ns:"n"});v("xiv.ui.layouts.Layout.INTERACTORS",Yq);v("xiv.ui.layouts.Layout.ID_PREFIX",Sq.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",Sq.CSS_SUFFIX);
v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Sq.prototype.TL);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Sq.prototype.UL);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Sq.prototype.yH);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Sq.prototype.vu);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Sq.prototype.xH);v("xiv.ui.layouts.Layout.prototype.getTitle",Sq.prototype.Rd);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Sq.prototype.ny);
v("xiv.ui.layouts.Layout.prototype.dispatchResize",Sq.prototype.Xg);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Sq.prototype.gw);v("xiv.ui.layouts.Layout.prototype.updateInteractors",Sq.prototype.vp);v("xiv.ui.layouts.Layout.prototype.updateStyle",Sq.prototype.o);v("xiv.ui.layouts.Layout.prototype.disposeInternal",Sq.prototype.f);function Zq(){W.call(this)}w(Zq,W);v("xiv.ui.Crosshairs",Zq);Zq.ID_PREFIX="xiv.ui.Crosshairs";Zq.CSS_SUFFIX={kN:"horizontal",bP:"vertical"};f=Zq.prototype;f.Hg=null;f.og=null;f.JC=function(a){null!=a&&(this.Hg.style.left=a.toString()+"px")};f.KC=function(a){null!=a&&(this.og.style.top=a.toString()+"px")};f.k=function(a){this.Hg=$q(this,"vertical");this.og=$q(this,"horizontal");a.appendChild(this.og);a.appendChild(this.Hg)};
f.op=function(a){a=!1===a?"hidden":"visible";this.Hg.style.visibility=a;this.og.style.visibility=a};function $q(a,b){b=b.toLowerCase();if(!qb(Zq.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return R("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.Vc+"-"+b.toLowerCase()})}f.f=function(){Zq.d.f.call(this);S(this.Hg);delete this.Hg;S(this.og);delete this.og};v("xiv.ui.Crosshairs.EventType",{});v("xiv.ui.Crosshairs.ID_PREFIX",Zq.ID_PREFIX);
v("xiv.ui.Crosshairs.CSS_SUFFIX",Zq.CSS_SUFFIX);v("xiv.ui.Crosshairs.prototype.vertical",Zq.prototype.Hg);v("xiv.ui.Crosshairs.prototype.horizontal",Zq.prototype.og);v("xiv.ui.Crosshairs.prototype.setX",Zq.prototype.JC);v("xiv.ui.Crosshairs.prototype.setY",Zq.prototype.KC);v("xiv.ui.Crosshairs.prototype.render",Zq.prototype.k);v("xiv.ui.Crosshairs.prototype.toggleVisible",Zq.prototype.op);v("xiv.ui.Crosshairs.prototype.disposeInternal",Zq.prototype.f);function ar(a,b){kj.call(this,a);this.Ey=null;this.Na=new kq;this.sJ=b||gd;H(this.Na,"change",this.GA,!1,this)}w(ar,kj);f=ar.prototype;f.Ja="horizontal";f.co=!1;f.QJ=!1;f.Tg=10;f.wr=0;f.VA=!0;f.zr=0;f.xE=1E3;f.Tb=!0;f.Te=!1;f.B=function(){ar.d.B.call(this);var a=this.N().B("div",this.$(this.Ja));this.ne(a)};f.ne=function(a){ar.d.ne.call(this,a);el(a,this.$(this.Ja));this.lz();$k(this.a(),"slider");br(this)};
f.hb=function(){ar.d.hb.call(this);this.He=new im(this.ra);this.hg=new im(this.rc);this.He.fj(this.Te);this.hg.fj(this.Te);this.He.Zt=this.hg.Zt=fa;this.sb=new bo(this.a());cr(this,!0);this.a().tabIndex=0;this.wh()};
function cr(a,b){b?(a.ib().D(a.He,"beforedrag",a.Qq).D(a.hg,"beforedrag",a.Qq).D(a.He,["start","end"],a.Vq).D(a.hg,["start","end"],a.Vq).D(a.sb,"key",a.Rq).D(a.a(),"click",a.Sq).D(a.a(),"mousedown",a.Sq),a.VA&&dr(a,!0)):(a.ib().vb(a.He,"beforedrag",a.Qq).vb(a.hg,"beforedrag",a.Qq).vb(a.He,["start","end"],a.Vq).vb(a.hg,["start","end"],a.Vq).vb(a.sb,"key",a.Rq).vb(a.a(),"click",a.Sq).vb(a.a(),"mousedown",a.Sq),a.VA&&dr(a,!1))}f.Dc=function(){ar.d.Dc.call(this);Bc(this.He,this.hg,this.sb,this.Nk)};
f.Qq=function(a){var b=a.hu==this.He?this.ra:this.rc,c;"vertical"==this.Ja?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.S()-this.ha())+this.ha()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.S()-this.ha())+this.ha();c=a.hu==this.He?Math.min(Math.max(c,this.ha()),this.w()+this.td()):Math.min(Math.max(c,this.w()),this.S());er(this,b,c)};
f.Vq=function(a){var b="start"==a.type;il(this.a(),"goog-slider-dragging",b);il(a.target.handle,"goog-slider-thumb-dragging",b);a=a.hu==this.He;b?(this.dispatchEvent("s"),this.dispatchEvent(a?"o":"q")):(this.dispatchEvent("t"),this.dispatchEvent(a?"p":"r"))};
f.Rq=function(a){var b=!0;switch(a.keyCode){case 36:fr(this,this.ha());break;case 35:fr(this,this.S());break;case 33:gr(this,this.Tg);break;case 34:gr(this,-this.Tg);break;case 37:var c=this.Te&&this.Ve()?1:-1;gr(this,a.shiftKey?c*this.Tg:c*this.tp);break;case 40:gr(this,a.shiftKey?-this.Tg:-this.tp);break;case 39:c=this.Te&&this.Ve()?-1:1;gr(this,a.shiftKey?c*this.Tg:c*this.tp);break;case 38:gr(this,a.shiftKey?this.Tg:this.tp);break;default:b=!1}b&&a.preventDefault()};
f.Sq=function(a){this.a().focus&&this.a().focus();var b=a.target;ii(this.ra,b)||ii(this.rc,b)||(b="click"==a.type,b&&xa()<this.zr+this.xE||(b||(this.zr=xa()),this.QJ?fr(this,hr(this,a)):(this.Jw(a),this.Kf=ir(this,hr(this,a)),this.QA="vertical"==this.Ja?this.mr<this.Kf.offsetTop:this.mr>jr(this,this.Kf)+this.Kf.offsetWidth,a=Mh(this.a()),this.ib().D(a,"mouseup",this.Hw,!0).D(this.a(),"mousemove",this.Jw),this.uj||(this.uj=new Wf(200),this.ib().D(this.uj,Xf,this.HA)),this.HA(),this.uj.start())))};
f.FA=function(a){gr(this,(0<a.detail?-1:1)*this.tp);a.preventDefault()};f.HA=function(){var a;if("vertical"==this.Ja){var b=this.mr,c=this.Kf.offsetTop;this.QA?b<c&&(a=kr(this,this.Kf)+this.Tg):b>c+this.Kf.offsetHeight&&(a=kr(this,this.Kf)-this.Tg)}else b=this.mr,c=jr(this,this.Kf),this.QA?b>c+this.Kf.offsetWidth&&(a=kr(this,this.Kf)+this.Tg):b<c&&(a=kr(this,this.Kf)-this.Tg);da(a)&&er(this,this.Kf,a)};
f.Hw=function(){this.uj&&this.uj.stop();var a=Mh(this.a());this.ib().vb(a,"mouseup",this.Hw,!0).vb(this.a(),"mousemove",this.Jw)};function lr(a,b){var c=Ni(b,a.a());return"vertical"==a.Ja?c.y:a.Te&&a.Ve()?a.a().clientWidth-c.x:c.x}f.Jw=function(a){this.mr=lr(this,a)};function hr(a,b){var c=a.ha(),d=a.S();if("vertical"==a.Ja){var e=a.ra.offsetHeight,h=a.a().clientHeight-e,e=lr(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.ra.offsetWidth;h=a.a().clientWidth-e;e=lr(a,b)-e/2;return(d-c)*e/h+c}
function kr(a,b){if(b==a.ra)return a.Na.w();if(b==a.rc)return a.Na.w()+a.Na.td();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.qg=function(){return this.He.qg()||this.hg.qg()};function gr(a,b){Math.abs(b)<a.vd()&&(b=(0==b?0:0>b?-1:1)*a.vd());var c=kr(a,a.ra)+b,d=kr(a,a.rc)+b,c=hd(c,a.ha(),a.S()-a.wr),d=hd(d,a.ha()+a.wr,a.S());a.Dj(c,d-c)}function er(a,b,c){var d=lq(a.Na,c);c=b==a.ra?d:a.Na.w();b=b==a.rc?d:a.Na.w()+a.Na.td();c>=a.ha()&&b>=c+a.wr&&a.S()>=b&&a.Dj(c,b-c)}
f.Dj=function(a,b){this.ha()<=a&&a<=this.S()-b&&this.wr<=b&&b<=this.S()-a&&(a!=this.w()||b!=this.td())&&(this.Na.Ok=!0,this.Na.Gf(0),this.Na.C(a),this.Na.Gf(b),this.Na.Ok=!1,this.GA())};f.ha=function(){return this.Na.ha()};f.Mb=function(a){this.Na.Mb(a)};f.S=function(){return this.Na.S()};f.Fb=function(a){this.Na.Fb(a)};function ir(a,b){return b<=a.Na.w()+a.Na.td()/2?a.ra:a.rc}f.GA=function(){this.wh();br(this);this.dispatchEvent("change")};
f.wh=function(){if(this.ra&&!this.co){var a=mr(this,kr(this,this.ra)),b=mr(this,kr(this,this.rc));if("vertical"==this.Ja)this.ra.style.top=a.y+"px",this.rc.style.top=b.y+"px",this.Yb&&(a=nr(b.y,a.y,this.ra.offsetHeight),this.Yb.style.top=a.offset+"px",this.Yb.style.height=a.size+"px");else{var c=this.Te&&this.Ve()?"right":"left";this.ra.style[c]=a.x+"px";this.rc.style[c]=b.x+"px";this.Yb&&(a=nr(a.x,b.x,this.ra.offsetWidth),this.Yb.style[c]=a.offset+"px",this.Yb.style.width=a.size+"px")}}};
function nr(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function mr(a,b){var c=new rh;if(a.ra){var d=a.ha(),e=a.S(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Ja?(d=a.a().clientHeight-a.ra.offsetHeight,e=Math.round(e*d),c.x=jr(a,a.ra),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.ra.offsetWidth)),c.x=d,c.y=a.ra.offsetTop)}return c}
function fr(a,b){b=hd(b,a.ha(),a.S());a.co&&a.sq.stop(!0);var c=new ik,d,e=ir(a,b),h=a.w(),k=a.td(),l=kr(a,e),n=mr(a,l);d=a.vd();Math.abs(b-l)<d&&(b=hd(l+(b>l?d:-d),a.ha(),a.S()));er(a,e,b);l=mr(a,kr(a,e));d="vertical"==a.Ja?[jr(a,e),l.y]:[l.x,e.offsetTop];n=new Xj(e,[n.x,n.y],d,100);n.fj(a.Te);c.add(n);a.Yb&&or(a,e,h,k,l,c);a.Ey&&(e=a.Ey.IP(h,b,100),E(e,function(a){c.add(a)}));a.sq=c;a.ib().D(c,"end",a.xG);a.co=!0;c.play(!1)}f.Vd=function(){return this.co};
function or(a,b,c,d,e,h){var k=mr(a,c),l=mr(a,c+d);c=k;d=l;b==a.ra?c=e:d=e;"vertical"==a.Ja?(b=nr(l.y,k.y,a.ra.offsetHeight),k=nr(d.y,c.y,a.ra.offsetHeight),e=new Xj(a.Yb,[jr(a,a.Yb),b.offset],[jr(a,a.Yb),k.offset],100),b=new ak(a.Yb,b.size,k.size,100)):(b=nr(k.x,l.x,a.ra.offsetWidth),k=nr(c.x,d.x,a.ra.offsetWidth),e=new Xj(a.Yb,[b.offset,a.Yb.offsetTop],[k.offset,a.Yb.offsetTop],100),b=new Zj(a.Yb,b.size,k.size,100));e.fj(a.Te);b.fj(a.Te);h.add(e);h.add(b)}f.xG=function(){this.co=!1};
f.ri=function(a){if(this.Ja!=a){var b=this.$(this.Ja),c=this.$(a);this.Ja=a;this.a()&&(a=this.a(),dl(a,b)&&(gl(a,b),el(a,c)),b=this.Te&&this.Ve()?"right":"left",this.ra.style[b]=this.ra.style.top="",this.rc.style[b]=this.rc.style.top="",this.Yb&&(this.Yb.style[b]=this.Yb.style.top="",this.Yb.style.width=this.Yb.style.height=""),this.wh())}};f.Ub=function(){return this.Ja};
f.f=function(){ar.d.f.call(this);this.uj&&this.uj.g();delete this.uj;this.sq&&this.sq.g();delete this.sq;delete this.ra;delete this.rc;this.Yb&&delete this.Yb;this.Na.g();delete this.Na;this.sb&&(this.sb.g(),delete this.sb);this.Nk&&(this.Nk.g(),delete this.Nk);this.He&&(this.He.g(),delete this.He);this.hg&&(this.hg.g(),delete this.hg)};f.tp=1;f.vd=function(){return this.Na.vd()};f.Gc=function(a){this.Na.Gc(a)};f.w=function(){return this.Na.w()};f.C=function(a){er(this,this.ra,a)};f.td=function(){return this.Na.td()};
f.Gf=function(a){er(this,this.rc,this.Na.w()+a)};f.ca=function(a){Xi(this.a(),a);a&&this.wh()};function br(a){var b=a.a();b&&(al(b,"valuemin",a.ha()),al(b,"valuemax",a.S()),al(b,"valuenow",a.w()),al(b,"valuetext",a.sJ(a.w())||""))}function dr(a,b){b?(a.Nk||(a.Nk=new tp(a.a())),a.ib().D(a.Nk,"mousewheel",a.FA)):a.ib().vb(a.Nk,"mousewheel",a.FA)}f.Lb=function(a){this.Tb!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Tb=a,cr(this,a),a||this.Hw(),il(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Tb};function jr(a,b){return a.Te?Vj(b):b.offsetLeft};function pr(a,b){ar.call(this,a,b);this.Na.Gf(0)}w(pr,ar);pr.prototype.$=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};pr.prototype.lz=function(){var a=this.a(),b=Ph(document,null,"goog-slider-thumb",a)[0];b||(b=this.nk(),a.appendChild(b));this.ra=this.rc=b};pr.prototype.nk=function(){var a=this.N().B("div","goog-slider-thumb");$k(a,"button");return a};function qr(){W.call(this)}w(qr,W);v("xiv.ui.PlayButton",qr);qr.ID_PREFIX="xiv.ui.PlayButton";qr.CSS_SUFFIX={Ah:"image"};f=qr.prototype;f.bb=null;f.fo=!1;f.sh=null;f.O=null;f.pg=70;f.k=function(a){qr.d.k.call(this,a);this.bb=R("img",{id:"PlayButton_"+B()});Q(this.bb,qr.CSS.Ah);this.a().appendChild(this.bb);this.bb.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";H(this.bb,"click",function(){this.fo?(this.fo=!1,this.pause()):(this.fo=!0,this.play())}.bind(this))};
f.pause=function(){this.bb.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";null!=this.sh&&null!=this.O&&this.O.stop()};f.play=function(){this.bb.src=serverRoot+"/images/viewer/xiv/ui/other/pause.png";null!=this.sh&&(null==this.O&&(this.O=new Wf),this.O.setInterval(this.pg),this.O.addEventListener(Xf,function(){this.sh.w()==this.sh.S()?this.sh.C(this.sh.ha()):this.sh.C(this.sh.w()+1)}.bind(this)),this.O.start())};f.setInterval=function(a){this.pg=a};f.Af=function(){return this.fo};
f.EC=function(a){this.sh=a};f.f=function(){qr.d.f.call(this);S(this.bb);J(this.bb);delete this.bb;null!=this.O&&(J(this.O),this.O.g());delete this.sh;delete this.fo;delete this.O;delete this.pg};v("xiv.ui.PlayButton.ID_PREFIX",qr.ID_PREFIX);v("xiv.ui.PlayButton.prototype.pause",qr.prototype.pause);v("xiv.ui.PlayButton.prototype.play",qr.prototype.play);v("xiv.ui.PlayButton.prototype.isPlaying",qr.prototype.Af);v("xiv.ui.PlayButton.prototype.setInterval",qr.prototype.setInterval);
v("xiv.ui.PlayButton.prototype.setSlider",qr.prototype.EC);function rr(){this.Wa=[];this.$a=[]}f=rr.prototype;f.jg=function(){return this.Wa.length+this.$a.length};f.lm=function(){return 0==this.Wa.length&&0==this.$a.length};f.clear=function(){this.Wa=[];this.$a=[]};f.contains=function(a){return Ib(this.Wa,a)||Ib(this.$a,a)};f.remove=function(a){var b=Bb(this.Wa,a);if(0>b)return Lb(this.$a,a);zb.splice.call(this.Wa,b,1);return!0};
f.$h=function(){for(var a=[],b=this.Wa.length-1;0<=b;--b)a.push(this.Wa[b]);for(var c=this.$a.length,b=0;b<c;++b)a.push(this.$a[b]);return a};function sr(a){pr.call(this);this.constructor.zp=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.Vc=this.constructor.zp;W.prototype.oq.bind(this)();null!=a&&this.ri(a)}w(sr,pr);v("nrg.ui.Slider",sr);sr.ID_PREFIX="nrg.ui.Slider";sr.CSS_SUFFIX={VE:"track",MO:"track-hovered",Os:"thumb",KO:"thumb-hovered"};f=sr.prototype;f.jr=!1;f.qs=!1;f.qJ=function(){return this.jr};f.ti=function(a){this.qs=a};
f.k=function(a){this.q=R("div",{id:sr.ID_PREFIX+"_Widget_"+B()});this.Jb(this.q);a=null!=a?a:document.body;a.appendChild(this.q);this.uh=R("div",{id:sr.ID_PREFIX+"_Track_"+B()});this.q.appendChild(this.uh);this.Lf=Rh("goog-slider-thumb",this.q);H(this,"change",this.Av.bind(this));H(this,"s",this.SK.bind(this));H(this,"t",this.PK.bind(this));this.ri(this.Ub().toLowerCase())};f.a=function(){return this.q};f.pI=function(){return this.uh};f.jI=function(){return this.Lf};
f.gq=function(a){null==this.Pj&&(this.Pj={});if(null==this.Pj[a.id]){var b=new tp(a);b.addEventListener("mousewheel",this.EK,!1,this);this.Pj[a.id]=b}};f.WF=function(a){null==this.Nj&&(this.Nj={});if(null==this.Nj[a.id]){var b=new bo(a);H(b,"key",this.ki.bind(this));this.Nj[a.id]=b}};f.ki=function(){};f.o=function(){var a=this.w(),a=mr(this,a);"horizontal"==this.Ub().toLowerCase()?this.Lf.style.left=a.x.toString()+"px":"vertical"==this.Ub().toLowerCase()&&(this.Lf.style.left=a.y.toString()+"px")};
f.ri=function(a){sr.d.ri.call(this,a);this.ma&&tr(this,this.Ub().toLowerCase())};function tr(a,b){function c(a,c){Eh(a,[yj(c,"horizontal"),yj(c,"vertical")],[c,yj(c,b)])}c(a.q,a.constructor.Vc);c(a.uh,sr.CSS.VE);c(a.Lf,sr.CSS.Os)}f.$w=!1;f.au=1;f.HC=function(a,b){this.$w=a;u(b)&&(this.au=b)};f.EK=function(a){var b=Math.abs(a.Pd)<Math.abs(a.Uh)?a.Uh:a.Pd;this.$w?this.C(Math.round(this.w()-b*this.au)):this.C(Math.round(this.w()-(0>b?-1:1)));this.dispatchEvent({type:"v"});a.preventDefault()};f.$d=null;
f.lA=function(){if(null!=this.$d){var a=this.$d.$h();if(0<a.length)return a[0]}};f.Av=function(a){a.stopPropagation();null==this.$d&&(this.$d=new rr);2>this.$d.jg()?(a=this.w(),this.$d.$a.push(a)):(a=this.w(),this.$d.$a.push(a),a=this.$d,0==a.Wa.length&&(a.Wa=a.$a,a.Wa.reverse(),a.$a=[]),a.Wa.pop());this.qs||this.dispatchEvent({type:"u",value:this.w(),LJ:this.ha(),FJ:this.S()});this.qs=!1};f.SK=function(){this.jr=!0};f.PK=function(){this.jr=!1};
f.f=function(){sr.d.f.call(this);delete this.qs;null!=this.q&&(J(this),S(this.q),delete this.q);null!=this.Lf&&(J(this.Lf),S(this.Lf),delete this.Lf);null!=this.uh&&(J(this.uh),S(this.uh),delete this.uh);null!=this.Nj&&(C(this.Nj,function(a){J(a);a.g()}),D(this.Nj),delete this.Nj);null!=this.Pj&&(C(this.Pj,function(a){J(a);a.g()}),D(this.Pj),delete this.Pj);null!=this.gD&&(Jb(this.gD),delete this.gD);null!=this.lD&&(Jb(this.lD),delete this.lD);null!=this.$d&&(D(this.$d),delete this.$d);delete this.$w;
delete this.au;delete this.jr};v("nrg.ui.Slider.EventType",{HD:"u",MN:"v"});v("nrg.ui.Slider.ID_PREFIX",sr.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",sr.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendChangeEvent",sr.prototype.ti);v("nrg.ui.Slider.prototype.render",sr.prototype.k);v("nrg.ui.Slider.prototype.isSliding",sr.prototype.qJ);v("nrg.ui.Slider.prototype.getPreviousValue",sr.prototype.lA);v("nrg.ui.Slider.prototype.getElement",sr.prototype.a);v("nrg.ui.Slider.prototype.getTrack",sr.prototype.pI);
v("nrg.ui.Slider.prototype.getThumb",sr.prototype.jI);v("nrg.ui.Slider.prototype.bindToMouseWheel",sr.prototype.gq);v("nrg.ui.Slider.prototype.bindToArrowKeys",sr.prototype.WF);v("nrg.ui.Slider.prototype.updateStyle",sr.prototype.o);v("nrg.ui.Slider.prototype.setOrientation",sr.prototype.ri);v("nrg.ui.Slider.prototype.setUseDeltaToScroll",sr.prototype.HC);v("nrg.ui.Slider.prototype.disposeInternal",sr.prototype.f);function ur(){sr.call(this)}w(ur,sr);v("xiv.ui.FrameSlider",ur);ur.ID_PREFIX="xiv.ui.FrameSlider";ur.CSS_SUFFIX={};ur.prototype.k=function(){ur.d.k.call(this)};ur.prototype.f=function(){ur.d.f.call(this)};v("xiv.ui.FrameSlider.EventType",{});v("xiv.ui.FrameSlider.ID_PREFIX",ur.ID_PREFIX);v("xiv.ui.FrameSlider.CSS_SUFFIX",ur.CSS_SUFFIX);v("xiv.ui.FrameSlider.prototype.render",ur.prototype.k);v("xiv.ui.FrameSlider.prototype.disposeInternal",ur.prototype.f);function vr(a){Sq.call(this);a=null!=a?a:ob(wr);a=g(a)?a:[a];E(a,function(b,c){a[c]=b.toUpperCase()});xr(this,a);yr(this,a);null!=this.i.X&&this.Ce();null!=this.i.Y&&this.Cg();null!=this.i.Z&&this.Ej();null!=this.i.V&&this.bp();this.o()}w(vr,Sq);v("xiv.ui.layouts.XyzvLayout",vr);vr.TITLE="XyzvLayout";vr.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var wr={Og:"X",Le:"Y",pl:"Z",Ep:"V"};
vr.CSS_SUFFIX={Og:"x",Le:"y",pl:"z",Ep:"v",ia:"slider",Kg:"slider-thumb",QE:"slider-thumb-hovered",Eh:"slider-track",uO:"slider-track-x",vO:"slider-track-y",wO:"slider-track-z",gN:"framenumber"};function zr(a,b,c,d,e){this.ia=a;this.Dd=b;this.kd=c;this.of=d;this.Dh=e}f=vr.prototype;f.aC=0;f.qi=function(a,b){this.i[a].vm(b);var c=this.iz(a);$h(this.a(),c);c.style.position="absolute";this.i[a].Q().oi(c);this.i[a].Q().update()};
f.iz=function(a){return R("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":yj(this.constructor.Vc,a.toLowerCase()+"-resizeboundary")})};function xr(a,b){if(b.length>nb(wr))throw Error("Invalid amount of frames "+b+". Must be "+wr);E(b,function(a){if(!qb(wr,a))throw Error("Invalid frame title ",a);}.bind(a))}function yr(a,b){var c="";E(b,function(a,b){c=a.toUpperCase();this.ny(new Rq(c));$h(this.a(),this.i[c].a());Q(this.i[c].a(),vr.CSS[b])}.bind(a))}f.wM=function(a){a.pw(this.$l())};
f.pw=function(a){this.Xe(function(b,c){null!=a[c]&&(b[Tq]=a[c].ia,S(a[c].ia.a()),b.a().appendChild(a[c].ia.a()),b[Uq]=a[c].Dd,S(a[c].Dd.a()),b.a().appendChild(a[c].Dd.a()),b[Wq]=a[c].kd,b.a().appendChild(a[c].kd.Hg),b.a().appendChild(a[c].kd.og))})};f.ly=function(){this.gw();Ar(this);Br(this);Cr(this);Dr(this);Er(this)};f.$l=function(){var a={};this.Xe(function(b,c){a[c]=new zr(b[Tq],b[Uq],b[Wq],b[Vq],b[Xq])});return a};f.bA=function(a){a=this.i[a];return new zr(a[Tq],a[Uq],a[Wq],a[Vq],a[Xq])};
f.aA=function(a,b){return this.i[a][b]};f.Yz=function(a){return this.i[a]};function Ar(a){var b;a.Xe(function(a,d){b=new sr("horizontal");b.k(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[Tq]=b;Eh(b.a(),null,[vr.CSS.ia]);Eh(b.Lf,null,[vr.CSS.Kg]);Eh(b.uh,null,[vr.CSS.Eh,yj(vr.CSS.Eh,d.toLowerCase())])}.bind(a))}function Br(a){var b;a.Xe(function(a){b=new Dq;b.k(a.a());a[Uq]=b}.bind(a))}function Cr(a){var b;a.Xe(function(a){b=new Cq;b.k(a.a());a[Vq]=b}.bind(a))}
function Er(a){var b;a.Xe(function(a){b=new qr;b.k(a.a());a[Xq]=b}.bind(a))}function Dr(a){var b;a.Xe(function(a){b=new Zq;a[Wq]=b;b.k(a.a());a.a().appendChild(b.og);a.a().appendChild(b.Hg)}.bind(a))}f.Xe=function(a){C(wr,function(b){b=b.toUpperCase();null!=this.i[b]&&"V"!=b&&a(this.i[b],b)}.bind(this))};f.loop=function(a){C(wr,function(b){b=b.toUpperCase();a(this.i[b],b)}.bind(this))};f.Ce=function(){null!=this.constructor.CSS&&Q(this.i.X.a(),this.constructor.CSS.Og)};
f.Cg=function(){null!=this.constructor.CSS&&Q(this.i.Y.a(),this.constructor.CSS.Le)};f.Bo=function(a){this.Qh();var b=U(this.i.X.a()),c=U(this.i.Y.a()),d=U(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.A.width)};f.Ej=function(){null!=this.constructor.CSS&&Q(this.i.Z.a(),this.constructor.CSS.pl)};f.bp=function(){null!=this.constructor.CSS&&Q(this.i.V.a(),this.constructor.CSS.Ep)};f.Ze=fa;f.Qk=fa;f.Gr=fa;f.Fr=fa;f.Fe=fa;f.ef=fa;f.Ge=fa;f.el=fa;f.f=function(){vr.d.f.call(this);delete this.aC};
v("xiv.ui.layouts.XyzvLayout.TITLE",vr.TITLE);v("xiv.ui.layouts.XyzvLayout.EventType",{});v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",vr.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",wr);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",vr.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",zr);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",vr.prototype.aC);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",vr.prototype.qi);
v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",vr.prototype.iz);v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",vr.prototype.wM);v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",vr.prototype.pw);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",vr.prototype.ly);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",vr.prototype.$l);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",vr.prototype.bA);
v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",vr.prototype.aA);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",vr.prototype.Yz);v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",vr.prototype.Xe);v("xiv.ui.layouts.XyzvLayout.prototype.loop",vr.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",vr.prototype.Ce);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",vr.prototype.Cg);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",vr.prototype.Ej);
v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",vr.prototype.bp);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",vr.prototype.Ze);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",vr.prototype.Qk);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",vr.prototype.Gr);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",vr.prototype.Fr);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",vr.prototype.Fe);
v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",vr.prototype.ef);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",vr.prototype.Ge);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",vr.prototype.el);v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",vr.prototype.f);function Fr(){vr.call(this,["X","Y","Z"])}w(Fr,vr);v("xiv.ui.layouts.TwoDWidescreen",Fr);Fr.TITLE="TwoDWidescreen";Fr.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";Fr.CSS_SUFFIX={Og:"x",Le:"y",pl:"z"};f=Fr.prototype;f.Ce=function(){Fr.d.Ce.call(this);this.qi("X",["RIGHT"]);H(this.i.X.Q(),"resize",this.Ze.bind(this));H(this.i.X.Q(),"resize_end",this.o.bind(this))};f.Cg=function(){Fr.d.Cg.call(this);this.qi("Y",["BOTTOM"]);H(this.i.Y.Q(),"resize",this.Qk.bind(this));H(this.i.Y.Q(),"resize_end",this.o.bind(this))};
f.Ze=function(){this.Bo(function(a){var b=a.width,c=Math.max(this.A.width-a.width,this.ub);E(["Y","Z"],function(a){this.i[a].a().style.left=b+"px";this.i[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.Xg()};f.Qk=function(){this.Bo(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.A.height-c;this.i.Z.a().style.top=c+"px";this.i.Z.a().style.height=d+"px"}.bind(this));this.Xg()};f.o=function(){Fr.d.o.call(this);this.Jo();this.Fe();this.Ge();this.ef()};
f.Jo=function(){if(this.qa.width!==this.A.width||this.qa.height!==this.A.height){var a=1-(this.qa.height-this.A.height)/this.qa.height,b=1-(this.qa.width-this.A.width)/this.qa.width;this.Xe(function(c){frameSize=U(c.a());c.a().style.width=Math.max(frameSize.width*b,this.ub).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.gd).toString()+"px"}.bind(this))}};
f.Fe=function(){var a=this.i.X;a.a().style.height=this.A.height.toString()+"px";sk(a.Q().sd(),{left:this.ub,width:this.A.width-2*this.ub});var b=a.Q().ud("RIGHT");b.style.left=a.a().style.width;Ti(b,this.A.height);a.Q().update()};f.Ge=function(){var a=this.i.Y;a.a().style.left=this.i.X.a().style.width;sk(a.Q().sd(),{top:this.gd,height:this.A.height-2*this.gd});var b=a.Q().ud("BOTTOM");b.style.top=a.a().style.height;Si(b,parseInt(a.a().style.width));a.Q().update()};
f.ef=function(){var a=this.i.Z;a.a().style.left=this.i.X.a().style.width;a.a().style.top=this.i.Y.a().style.height;a.a().style.height=this.A.height-parseInt(this.i.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",Fr.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",Fr.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",Fr.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",Fr.prototype.Ce);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",Fr.prototype.Cg);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",Fr.prototype.Ze);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",Fr.prototype.Qk);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",Fr.prototype.o);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",Fr.prototype.Fe);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",Fr.prototype.Ge);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",Fr.prototype.ef);function Gr(a){vr.call(this,a)}w(Gr,vr);v("xiv.ui.layouts.SingleFrameLayout",Gr);Gr.TITLE="SingleFrameLayout";Gr.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";Gr.prototype.Jo=function(){if(this.qa.width!==this.A.width||this.qa.height!==this.A.height){var a=this.qa.height*(1-(this.qa.height-this.A.height)/this.qa.height),b=this.qa.width*(1-(this.qa.width-this.A.width)/this.qa.width);this.loop(function(c){null!=c&&Ri(c.a(),Math.max(b,this.ub),Math.max(a,this.gd))}.bind(this))}};
Gr.prototype.o=function(){Gr.d.o.call(this);this.Jo()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",Gr.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",Gr.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",Gr.prototype.o);function Hr(){vr.call(this,"V");Q(this.i.V.a(),yj(Rq.Vc,this.constructor.TITLE))}w(Hr,Gr);v("xiv.ui.layouts.ThreeD",Hr);Hr.TITLE="ThreeD";Hr.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",Hr.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",Hr.ID_PREFIX);function Ir(){vr.call(this,"X");Q(this.i.X.a(),yj(Rq.Vc,this.constructor.TITLE.toLowerCase()))}w(Ir,Gr);v("xiv.ui.layouts.Sagittal",Ir);Ir.TITLE="Sagittal";Ir.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",Ir.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",Ir.ID_PREFIX);function Jr(){vr.call(this)}w(Jr,vr);v("xiv.ui.layouts.Conventional",Jr);Jr.TITLE="Conventional";Jr.ID_PREFIX="xiv.ui.layouts.Conventional";Jr.CSS_SUFFIX={Og:"x",Le:"y",pl:"z",Ep:"v",qP:"v-boundary"};f=Jr.prototype;f.Ce=function(){Jr.d.Ce.call(this);this.qi("X",["RIGHT","TOP_RIGHT"]);H(this.i.X.Q(),"resize",this.Ze.bind(this));H(this.i.X.Q(),"resize_end",this.o.bind(this))};f.Cg=function(){Jr.d.Cg.call(this)};
f.Ej=function(){Jr.d.Ej.call(this);this.qi("Z",["RIGHT","TOP_RIGHT"]);H(this.i.Z.Q(),"resize",this.Gr.bind(this));H(this.i.Z.Q(),"resize_end",this.o.bind(this))};f.bp=function(){Jr.d.bp.call(this);this.qi("V","BOTTOM");H(this.i.V.Q(),"resize",this.Fr.bind(this));H(this.i.V.Q(),"resize_end",this.o.bind(this))};function Kr(a,b){a.Qh();var c=U(a.i.X.a()),d=U(a.i.Y.a()),e=U(a.i.Z.a());b(c,d,e)}
f.Ze=function(){Kr(this,function(a,b,c){var d=Math.max(this.A.width-a.width-c.width,this.ub),e=c.width,h=this.A.height-a.height;this.ub==d&&(e=Math.max(this.A.width-a.width-b.width,this.ub),Ei(this.i.X.a(),e,h));Ei(this.i.Z.a(),0,h);Ri(this.i.Z.a(),e,a.height);Ei(this.i.Y.a(),c.width+a.width,h);Ri(this.i.Y.a(),d,a.height);Ri(this.i.V.a(),this.A.width,this.A.height-a.height)}.bind(this));this.Xg()};
f.Gr=function(){Kr(this,function(a,b,c){var d=Math.max(this.A.width-c.width-b.width,this.ub),e=b.width,h=this.A.height-c.height;this.ub==d&&(e=Math.max(this.A.width-c.width-a.width,this.ub));Ei(this.i.X.a(),c.width,h);Ri(this.i.X.a(),d,c.height);Ei(this.i.Y.a(),c.width+d,h);Ri(this.i.Y.a(),e,b.height);Ri(this.i.V.a(),this.A.width,this.A.height-c.height)}.bind(this));this.Xg()};
f.Fr=function(){this.Qh();var a=parseInt(this.i.V.a().style.height),b=this.A.height-a;C(this.i,function(c){c!==this.i.V&&sk(c.a(),{top:a,height:b})}.bind(this));this.Fe();this.Ge();this.Xg()};f.o=function(){Jr.d.o.call(this);this.el();this.Yw();this.Zw();this.Fe();this.Ge();this.ef()};f.Yw=function(){var a=parseInt(this.i.V.a().style.height),b=Math.max(this.A.height-a,this.gd);this.Xe(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};
f.Zw=function(){var a,b=1-(this.qa.width-this.A.width)/this.qa.width;this.qa.width!==this.A.width&&this.Xe(function(c){a=U(c.a());c.a().style.width=Math.max(a.width*b,this.ub).toString()+"px"}.bind(this))};
function Lr(a,b){var c=a.i.V.Q().Ak("BOTTOM"),d=a.i[b].Q().sd(),e=Gi(a.i[b].a()),h=U(a.i[b].a());Ei(d,parseInt(d.style.left),a.gd);Ri(d,a.A.width-3*a.ub,a.A.height-2*a.gd);d=a.i[b].Q().ud("RIGHT");Ei(d,e.x+h.width,e.y);Ti(d,a.A.height-c.ab.y);Ei(a.i[b].Q().ud("TOP_RIGHT"),e.x+h.width,e.y);a.i[b].Q().update()}f.Fe=function(){this.i.X.a().style.left=this.i.Z.a().style.width;sk(this.i.X.Q().sd(),{left:2*this.ub});Lr(this,"X")};
f.Ge=function(){this.i.Y.a().style.left=(parseInt(this.i.Z.a().style.width)+parseInt(this.i.X.a().style.width)).toString()+"px"};f.ef=function(){sk(this.i.Z.Q().sd(),{left:this.ub});Lr(this,"Z")};
f.el=function(){if(this.qa.width!==this.A.width||this.qa.height!==this.A.height){var a=U(this.i.V.a());Ri(this.i.V.a(),this.A.width,Math.max(a.height*(1-(this.qa.height-this.A.height)/this.qa.height),this.gd))}Ei(this.i.V.Q().sd(),this.A.width,this.gd);Ri(this.i.V.Q().sd(),this.A.width-3*this.ub,this.A.height-2*this.gd);a=this.i.V.Q().ud("BOTTOM");Ei(a,0,U(this.i.V.a()).height);Si(a,this.A.width);this.i.V.Q().update()};v("xiv.ui.layouts.Conventional.TITLE",Jr.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",Jr.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",Jr.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",Jr.prototype.Ce);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",Jr.prototype.Cg);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",Jr.prototype.Ej);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",Jr.prototype.bp);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Z",Jr.prototype.Gr);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",Jr.prototype.Ze);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",Jr.prototype.Fr);v("xiv.ui.layouts.Conventional.prototype.updateStyle",Jr.prototype.o);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",Jr.prototype.Fe);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",Jr.prototype.Ge);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",Jr.prototype.ef);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",Jr.prototype.el);function Mr(){vr.call(this,"Z");Q(this.i.Z.a(),yj(Rq.Vc,this.constructor.TITLE))}w(Mr,Gr);v("xiv.ui.layouts.Transverse",Mr);Mr.TITLE="Transverse";Mr.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",Mr.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",Mr.ID_PREFIX);function Nr(){vr.call(this)}w(Nr,vr);v("xiv.ui.layouts.FourUp",Nr);Nr.TITLE="Four-Up";Nr.ID_PREFIX="xiv.ui.layouts.FourUp";Nr.CSS_SUFFIX={Og:"x",Le:"y",pl:"z",Ep:"v"};f=Nr.prototype;f.Ce=function(){Nr.d.Ce.call(this);this.qi("X",["RIGHT","TOP","TOP_RIGHT"]);H(this.i.X.Q(),"resize",this.Ze.bind(this));H(this.i.X.Q(),"resize_end",this.o.bind(this))};
f.Ze=function(){var a=Gi(this.i.X.a()),b=U(this.i.X.a());Ei(this.i.Y.a(),b.width,a.y);Ri(this.i.Y.a(),this.A.width-b.width,b.height);Ei(this.i.Z.a(),0,0);Ri(this.i.Z.a(),b.width,a.y);Ei(this.i.V.a(),b.width,0);Ri(this.i.V.a(),this.A.width-b.width,a.y);a=this.i.X.Q().Ak("RIGHT").ud();a.style.top="0px";a.style.height=this.A.height.toString()+"px";this.Xg()};f.o=function(){Nr.d.o.call(this);this.Jo();this.ef();this.el();this.Fe();this.Ge()};
f.Jo=function(){if(this.qa.width!==this.A.width||this.qa.height!==this.A.height){var a=this.qa.height*(1-(this.qa.height-this.A.height)/this.qa.height)/2,b=this.qa.width*(1-(this.qa.width-this.A.width)/this.qa.width)/2;this.loop(function(c){Ri(c.a(),Math.max(b,this.ub),Math.max(a,this.gd))}.bind(this))}};
f.Fe=function(){this.i.X.a().style.top=this.i.Z.a().style.height;Ei(this.i.X.Q().sd(),this.ub,this.gd);Ri(this.i.X.Q().sd(),this.A.width-2*this.ub,this.A.height-2*this.gd);var a=this.i.X.Q().Ak("TOP").ud();a.style.left="0px";a.style.width=this.A.width.toString()+"px";this.i.X.Q().update();a=this.i.X.Q().Ak("RIGHT").ud();a.style.top="0px";a.style.height=this.A.height.toString()+"px"};f.Ge=function(){this.i.Y.a().style.left=this.i.Z.a().style.width;this.i.Y.a().style.top=this.i.Z.a().style.height};
f.ef=function(){};f.el=function(){this.i.V.a().style.left=this.i.Z.a().style.width};f.f=function(){Nr.d.f.call(this)};v("xiv.ui.layouts.FourUp.TITLE",Nr.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",Nr.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",Nr.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",Nr.prototype.Ce);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",Nr.prototype.Ze);v("xiv.ui.layouts.FourUp.prototype.updateStyle",Nr.prototype.o);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",Nr.prototype.Fe);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",Nr.prototype.Ge);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",Nr.prototype.ef);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",Nr.prototype.el);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",Nr.prototype.f);function Or(){vr.call(this,["X","Y","Z"])}w(Or,vr);v("xiv.ui.layouts.TwoDRow",Or);Or.TITLE="TwoDRow";Or.ID_PREFIX="xiv.ui.layouts.TwoDRow";Or.CSS_SUFFIX={Og:"x",Le:"y",pl:"z"};f=Or.prototype;f.Ce=function(){Or.d.Ce.call(this);this.qi("X",["RIGHT"]);H(this.i.X.Q(),"resize",this.Ze.bind(this));H(this.i.X.Q(),"resize_end",this.o.bind(this))};f.Cg=function(){Or.d.Cg.call(this);this.qi("Y",["RIGHT"]);H(this.i.Y.Q(),"resize",this.Qk.bind(this));H(this.i.Y.Q(),"resize_end",this.o.bind(this))};f.Ej=function(){Or.d.Ej.call(this)};
f.Bo=function(a){this.Qh();var b=U(this.i.X.a()),c=U(this.i.Y.a()),d=U(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.A.width)};f.Ze=function(){this.Bo(function(a,b,c){b=Math.max(this.A.width-a.width-c.width,this.ub);var d=this.A.height-a.height;Ei(this.i.Y.a(),a.width,d);Ri(this.i.Y.a(),b,a.height);Ei(this.i.Z.a(),a.width+b,d);Ri(this.i.Z.a(),c.width,a.height)}.bind(this));this.Xg()};
f.Qk=function(){this.Bo(function(a,b){var c=this.A.height-b.height;Ei(this.i.X.a(),0,c);Ri(this.i.X.a(),a.width,b.height);Ei(this.i.Z.a(),a.width+b.width,c);Ri(this.i.Z.a(),this.A.width-a.width-b.width,b.height)}.bind(this));this.Xg()};f.o=function(){Or.d.o.call(this);this.Zw();this.Yw();this.Fe();this.Ge();this.ef()};f.Yw=function(){var a=this.A.height.toString()+"px";this.Xe(function(b){b.a().style.height=a})};
f.Zw=function(){var a,b=1-(this.qa.width-this.A.width)/this.qa.width;this.qa.width!==this.A.width&&this.Xe(function(c){a=U(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.ub).toString()+"px"}.bind(this))};function Pr(a,b){var c=a.i[b].Q().sd(),d=Gi(a.i[b].a()),e=U(a.i[b].a());Ei(c,parseInt(c.style.left),a.gd);Ri(c,a.A.width-3*a.ub,a.A.height-2*a.gd);c=a.i[b].Q().ud("RIGHT");Ei(c,d.x+e.width,d.y);Ti(c,a.A.height);a.i[b].Q().update()}
f.Fe=function(){sk(this.i.X.Q().sd(),{left:this.ub});Pr(this,"X")};f.Ge=function(){this.i.Y.a().style.left=this.i.X.a().style.width;sk(this.i.Y.Q().sd(),{left:2*this.ub});Pr(this,"Y")};f.ef=function(){this.i.Z.a().style.left=(parseInt(this.i.X.a().style.width)+parseInt(this.i.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",Or.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",Or.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",Or.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",Or.prototype.Ce);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",Or.prototype.Cg);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",Or.prototype.Ej);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",Or.prototype.Ze);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",Or.prototype.Qk);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",Or.prototype.o);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",Or.prototype.Fe);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",Or.prototype.Ge);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",Or.prototype.ef);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function Qr(){vr.call(this,"Y");Q(this.i.Y.a(),yj(Rq.Vc,this.constructor.TITLE.toLowerCase()))}w(Qr,Gr);v("xiv.ui.layouts.Coronal",Qr);Qr.TITLE="Coronal";Qr.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",Qr.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",Qr.ID_PREFIX);function Rr(){W.call(this);this.constructor.ux={};this.constructor.ux[Nr.TITLE]=Nr;this.constructor.ux[Jr.TITLE]=Jr;this.ml={};this.zj={};this.vi={}}w(Rr,W);v("xiv.ui.layouts.LayoutHandler",Rr);Rr.ID_PREFIX="xiv.ui.layouts.LayoutHandler";Rr.CSS_SUFFIX={};f=Rr.prototype;f.pb=null;f.wd=null;f.bv=!1;f.Ri=null;f.Ee=null;f.Iy=!0;f.uJ=function(){return this.bv};f.OF=function(a){this.Iy=a};f.Pz=function(){return this.pb[this.Pc]};f.Qz=function(a){return this.pb[this.Pc].vu(a)};
f.vp=function(){null!=this.wd&&this.wd.vp()};f.Kq=function(){return null!=this.wd?this.wd.$l():null};function Sr(a){var b=[];a=a.wd.$l();C(a,function(a){C(a,function(a){b.push(a.a())})});return b}f.gA=function(a){return null!=this.wd?this.wd.bA(a):null};f.EH=function(a){return null!=this.wd?this.wd.Yz(a):null};f.fA=function(a,b){return null!=this.wd?this.wd.aA(a,b):null};f.rC=function(a){this.pi(a);null!=this.wd&&this.wd.gw();this.pb[a].ly();this.wd=this.pb[a]};
f.my=function(a,b){if(void 0 in this.ml)throw Error(a+" is an already used layout title!");b&&(this.ml[a]=b)};f.pi=function(a,b){if(!(a in this.ml))throw Error("Invalid layout: "+a+"!");null==this.pb&&(this.pb={});a in this.pb||(this.pb[a]=new this.ml[a],H(this.pb[a],"n",this.Hr.bind(this)),Tr(this.pb[a]),$h(this.a(),this.pb[a].a()));this.Pr=this.Pc;this.Pc=a;Ur(this);this.dD(!1===b?0:500)};
function Ur(a){var b;C(a.pb[a.Pc].i,function(a,d){b=this.gA(d);null!=b&&null!=b.ia&&null!=b.Dh&&(Q(a.a(),"xiv-ui-layouts-hoverframe"),E([b.ia.a(),b.Dh.a()],function(a){Q(a,"xiv-ui-layouts-fadeableinteractor")}.bind(this)))}.bind(a))}function Vr(a){var b;C(a.pb[a.Pc].i,function(a,d){b=this.fA(d,Tq);null!=b&&null==a[Wr]&&(b.gq(a.a()),a[Wr]=!0)}.bind(a))}f.Hr=function(){this.dispatchEvent({type:"z"})};
f.dD=function(a){a=u(a)&&0<=a?a:500;this.Pr==this.Pc?Vr(this):this.Pr?this.Iy?Xr(this,a):Xr(this,0):(Yr(this,this.Pc),Zr(this,this.Pc))};function $r(a,b,c){E(di(b.a()),function(a){null!=this.zj[c]||(this.zj[c]=[]);this.zj[c].push(a)}.bind(a))}function as(a){C(a.vi,function(a){$h(this.a().parentNode,a)}.bind(a))}function bs(a,b){var c=[];C(a.vi,function(a,e){c=Mb(c,Mk(a,this.Ri[e],this.Ee[e],b))}.bind(a));return c}
function Xr(a,b){var c=a.pb[a.Pc].i,d;Yr(a,a.Pc);Zr(a,a.Pc);null!=a.Ri&&D(a.Ri);null!=a.Ee&&D(a.Ee);a.Ri={};a.Ee={};C(a.pb[a.Pr].i,function(a,b){d=a.a().cloneNode(!1);this.vi[b]=d;$r(this,a,b);C(this.zj,function(a,b){E(a,function(a){S(a);null!=this.vi[b]&&this.vi[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Lk(a.a(),c[b].a());this.Ri[b]=k.SF;this.Ee[b]=k.tM}else this.Ri[b]={"z-index":0},this.Ee[b]={opacity:0}}.bind(a));as(a);Nk(bs(a,b),a.Lv.bind(a),a.Mv.bind(a),a.Kv.bind(a))}
f.Lv=function(){this.MA();this.bv=!0;this.dispatchEvent({type:"w",Tw:this.vi})};var Wr=B();f=Rr.prototype;f.Mv=function(){this.dispatchEvent({type:"y",Tw:this.vi})};
f.Kv=function(){var a=this.pb[this.Pc].i;C(a,function(a,c){null!=this.zj[c]&&E(this.zj[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.Ee[c]&&sk(a.a(),this.Ee[c])}.bind(this));this.pb[this.Pc]!==this.wd&&this.pb[this.Pc].pw(this.Kq());ds(this);this.bv=!1;Yr(this,this.Pc);Zr(this,this.Pc);es(this);this.dispatchEvent({type:"x",frames:a});Vr(this);this.o()};function Zr(a,b){a.pb[b].a().style.opacity=1;a.pb[b].o()}
function Yr(a,b){a.pb[b].a().style.visibility="visible";a.pb[b].o()}f.MA=function(){C(this.pb,function(a){a.a().style.visibility="hidden";a.o()}.bind(this))};function ds(a){C(a.vi,function(a){S(a);delete a})}function Tr(a){C(a.i,function(a){H(a.a(),"dblclick",function(){})})}f.pK=function(a){this.lQ.push(a)};f.o=function(){Rr.d.o.call(this);this.pb[this.Pc].o()};function es(a){null!=a.Ri&&(C(a.Ri,function(a){D(a)}),D(a.Ee),delete a.Ee);null!=a.Ee&&(C(a.Ee,function(a){D(a)}),D(a.Ee),delete a.Ee)}
f.f=function(){Rr.d.f.call(this);es(this);delete this.vi;D(this.zj);delete this.zj;delete this.wd;this.En(this.pb);delete this.pb;D(this.ml);delete this.ml;delete this.Pc;delete this.Pr};v("xiv.ui.layouts.LayoutHandler.EventType",{wN:"w",vN:"x",xN:"y",Ns:"z"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",Rr.ID_PREFIX);v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",Rr.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",Wr);
v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",Rr.prototype.uJ);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",Rr.prototype.OF);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",Rr.prototype.Pz);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",Rr.prototype.Qz);v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",Rr.prototype.vp);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",Rr.prototype.Kq);
v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsElements",Rr.prototype.QP);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",Rr.prototype.gA);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",Rr.prototype.EH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",Rr.prototype.fA);v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",Rr.prototype.rC);v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",Rr.prototype.my);
v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",Rr.prototype.pi);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",Rr.prototype.dD);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",Rr.prototype.MA);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",Rr.prototype.pK);v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",Rr.prototype.o);v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",Rr.prototype.f);function fs(a,b){this.x=a;this.y=b}w(fs,rh);f=fs.prototype;f.clone=function(){return new fs(this.x,this.y)};f.sg=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=rh.prototype.scale;f.Db=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.sg())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.Hc=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.Tl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function gs(){bd.call(this);this.u="shaders";this.Yp="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Yp=a+="}\n";this.Mp="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Mp=a+="}\n"}
w(gs,bd);
var hs={ZO:"vertexPosition",YO:"vertexNormal",XO:"vertexColor",aP:"vertexTexturePos",$O:"vertexScalar"},is={cP:"view",UN:"perspective",NM:"center",RN:"objectTransform",TO:"useObjectColor",PN:"objectColor",VO:"useScalars",kO:"scalarsReplaceMode",hO:"scalarsMin",eO:"scalarsMax",iO:"scalarsMinColor",fO:"scalarsMaxColor",jO:"scalarsMinThreshold",gO:"scalarsMaxThreshold",dO:"scalarsInterpolation",VN:"pointSize",QN:"objectOpacity",ON:"normal",UO:"usePicking",WO:"useTexture",SO:"useLabelMapTexture",uN:"labelmapOpacity",
tN:"labelmapColor",CO:"textureSampler",DO:"textureSampler2",gP:"volumeLowerThreshold",nP:"volumeUpperThreshold",kP:"volumeScalarMin",iP:"volumeScalarMax",lP:"volumeScalarMinColor",jP:"volumeScalarMaxColor",pP:"volumeWindowLow",oP:"volumeWindowHigh",mP:"volumeTexture"};
function js(a){var b=Object.keys(is);if(!Object.keys(hs).every(function(a){a=hs[a];return-1!=this.Yp.search(a)||-1!=this.Mp.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=is[a];return-1!=this.Yp.search(a)||-1!=this.Mp.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function ks(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");bd.call(this);this.u="buffer";this.yb=a;this.Ei=b;this.Fi=c}w(ks,bd);function ls(a,b){this.Pt=a instanceof rh?a:new rh(a,b)}w(ls,Vo);ls.prototype.ze=function(a,b,c,d){Bo(Hi(a),0,a,b,this.Pt,c,null,d)};function ms(a,b){this.tL=4;this.bw=b||void 0;xm.call(this,a)}w(ms,xm);ms.prototype.sw=function(a){this.bw=a||void 0;this.ua()&&this.ze()};ms.prototype.ze=function(){if(this.bw){var a=!this.ua()&&"move_offscreen"!=this.Gm,b=this.a();a&&(b.style.visibility="hidden",Xi(b,!0));this.bw.ze(b,this.tL,this.bQ);a&&Xi(b,!1)}};function ns(a,b,c){this.rb=c||(a?Kh(Nh(a)):Kh());ms.call(this,this.rb.B("div",{style:"position:absolute;display:none;"}));this.Vt=new rh(1,1);this.vk=new kg;a&&this.Kl(a);null!=b&&this.Zo(b)}w(ns,ms);var os=[];f=ns.prototype;f.le=null;f.className="goog-tooltip";f.RC=500;f.SI=0;f.N=function(){return this.rb};f.Kl=function(a){a=Nh(a);this.vk.add(a);H(a,"mouseover",this.Hk,!1,this);H(a,"mouseout",this.Uq,!1,this);H(a,"mousemove",this.CA,!1,this);H(a,"focus",this.Fk,!1,this);H(a,"blur",this.Uq,!1,this)};
f.detach=function(a){if(a)a=Nh(a),ps(this,a),this.vk.remove(a);else{for(var b=this.vk.$h(),c=0;a=b[c];c++)ps(this,a);this.vk.clear()}};function ps(a,b){Uc(b,"mouseover",a.Hk,!1,a);Uc(b,"mouseout",a.Uq,!1,a);Uc(b,"mousemove",a.CA,!1,a);Uc(b,"focus",a.Fk,!1,a);Uc(b,"blur",a.Uq,!1,a)}f.Zo=function(a){ji(this.a(),a)};f.mw=function(a){var b=this.a();b&&S(b);ns.d.mw.call(this,a);a&&(b=this.rb.la.body,b.insertBefore(a,b.lastChild))};f.Au=function(){return pi(this.a())};
f.am=function(){return this.Fj?this.ua()?4:1:this.Xn?3:this.ua()?2:0};f.zv=function(){if(!xm.prototype.zv.call(this))return!1;if(this.anchor)for(var a,b=0;a=os[b];b++)ii(a.a(),this.anchor)||a.ca(!1);Kb(os,this);a=this.a();a.className=this.className;qs(this);H(a,"mouseover",this.JA,!1,this);H(a,"mouseout",this.IA,!1,this);rs(this);return!0};
f.Iv=function(){Lb(os,this);for(var a=this.a(),b,c=0;b=os[c];c++)b.anchor&&ii(a,b.anchor)&&b.ca(!1);this.MB&&ss(this.MB);Uc(a,"mouseover",this.JA,!1,this);Uc(a,"mouseout",this.IA,!1,this);this.anchor=void 0;0==this.am()&&(this.bs=!1);xm.prototype.Iv.call(this)};f.mB=function(a,b){this.anchor==a&&this.vk.contains(this.anchor)&&(this.bs||!this.rQ?(this.ca(!1),this.ua()||(this.anchor=a,this.sw(b||ts(this,0)),this.ca(!0))):this.anchor=void 0);this.Fj=void 0};
f.GJ=function(a){this.Xn=void 0;a==this.anchor&&(null!=this.le&&(this.le==this.a()||this.vk.contains(this.le))||this.Vy&&this.Vy.le||this.ca(!1))};function us(a,b){var c=yi(a.rb);a.Vt.x=b.clientX+c.x;a.Vt.y=b.clientY+c.y}f.Hk=function(a){var b=vs(this,a.target);this.le=b;qs(this);b!=this.anchor&&(this.anchor=b,this.Fj||(this.Fj=Yf(ua(this.mB,this,b,void 0),this.RC)),ws(this),us(this,a))};function vs(a,b){try{for(;b&&!a.vk.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.CA=function(a){us(this,a);this.bs=!0};f.Fk=function(a){this.le=a=vs(this,a.target);this.bs=!0;if(this.anchor!=a){this.anchor=a;var b=ts(this,1);qs(this);this.Fj||(this.Fj=Yf(ua(this.mB,this,a,b),this.RC));ws(this)}};function ts(a,b){if(0==b){var c=a.Vt.clone();return new xs(c)}return new ys(a.le)}function ws(a){if(a.anchor)for(var b,c=0;b=os[c];c++)ii(b.a(),a.anchor)&&(b.Vy=a,a.MB=b)}
f.Uq=function(a){var b=vs(this,a.target),c=vs(this,a.relatedTarget);b!=c&&(b==this.le&&(this.le=null),rs(this),this.bs=!1,!this.ua()||a.relatedTarget&&ii(this.a(),a.relatedTarget)?this.anchor=void 0:ss(this))};f.JA=function(){var a=this.a();this.le!=a&&(qs(this),this.le=a)};f.IA=function(a){var b=this.a();this.le!=b||a.relatedTarget&&ii(b,a.relatedTarget)||(this.le=null,ss(this))};function rs(a){a.Fj&&(ca.clearTimeout(a.Fj),a.Fj=void 0)}
function ss(a){2==a.am()&&(a.Xn=Yf(ua(a.GJ,a,a.anchor),a.SI))}function qs(a){a.Xn&&(ca.clearTimeout(a.Xn),a.Xn=void 0)}f.f=function(){this.ca(!1);rs(this);this.detach();this.a()&&S(this.a());this.le=null;delete this.rb;ns.d.f.call(this)};function xs(a,b){ls.call(this,a,b)}w(xs,ls);xs.prototype.ze=function(a,b,c){b=Hi(a);b=Ki(b);c=c?new th(c.top+10,c.right,c.bottom,c.left+10):new th(10,0,0,10);Do(this.Pt,a,4,c,b,9)&496&&Do(this.Pt,a,4,c,b,5)};function ys(a){Wo.call(this,a,3)}w(ys,Wo);
ys.prototype.ze=function(a,b,c){var d=new rh(10,0);Bo(this.element,this.yn,a,b,d,c,9)&496&&Bo(this.element,2,a,1,d,c,5)};function zs(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!u(b)||!u(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof wp))throw Error("Invalid interactor.");ns.call(this);this.u="caption";this.pf=a;this.aq=b;this.bq=c;this.Ga=d;this.Mh=null;this.Wj=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Wj=[a];Tc(d,ke,this.jo.bind(this));this.Pu()}
w(zs,ns);zs.prototype.Pu=function(){var a=Bi(this.pf,"position");if("static"==a||""==a)this.pf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=R("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Wj[0]));a.appendChild(b);b.appendChild(c);this.Mh=b;this.sw(new ls(this.aq,this.bq));this.ca(!0);this.Kl(this.pf);this.a().classList.add("x-tooltip")};zs.prototype.jo=function(){this.ca(!1);this.Mh&&S(this.Mh);this.a()&&S(this.a());this.Mh=null};function As(){tq.call(this);this.u="renderer3D";this.Wm=this.Zm=this.Vm=this.Ym=this.Um=this.Xm=this.kt=this.lt=null;this.Va=[0,0,0];this.Om=[0,0,0];this.$x=null;this.Ws=new id;this.kn=new id;this.dk=new id;this.$m=new id;this.tl=new id;this.Cl=new id;this.bk=new id;this.Hl=new id;this.xb={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(As,tq);As.prototype.__defineGetter__("config",function(){return this.xb});f=As.prototype;
f.DL=function(){this.Wm=this.Zm=this.Vm=this.Ym=this.Um=this.Xm=null;this.Va=[0,0,0]};f.Jv=function(a){As.d.Jv.call(this,a);var b=a.aq;a=a.bq;var c=this.Zv(b,a);if(c=this.get(c))if(c=c.sl){var d=Oi(this.xa),b=new zs(this.xa,d.x+b+10,d.y+a+10,this.Ga);a=vm(c,null);if(b=b.a())b.innerHTML=um(a)}};
f.ta=function(){As.d.ta.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Za,this.La),this.b.clearColor(this.Om[0],this.Om[1],this.Om[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.xb.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Za,this.La,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Za,this.La);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.$x=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new gs;Bs(this,a)};
function Bs(a,b){if(null==a.yc||null==a.b||null==a.oa)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof gs))throw Error("Could not add shaders.");js(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.Mp);a.b.shaderSource(d,b.Yp);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.kt=e;Object.keys(hs).forEach(function(a){a=hs[a];this.Ws.set(a,this.b.getAttribLocation(this.kt,a));this.b.enableVertexAttribArray(this.Ws.get(a))}.bind(a));
Object.keys(is).forEach(function(a){a=is[a];this.kn.set(a,this.b.getUniformLocation(this.kt,a))}.bind(a));a.lt=b}
f.xh=function(a){As.d.xh.call(this,a);var b=!1;if(null!=a){this.get(a.nd)&&(b=!0);var c=a.nd,d=a.G,e=a.fa,h=a.Mc,k=a.Ya,l=a.ja,n=a.lc,p=a.Id,m=a.t,q=a.gb;if(null!=m&&null!=m.ja&&m.ja.J)this.xh(m);else if(null!=m&&m.J&&this.xh(m),null!=p&&null!=p.ja&&p.ja.J)this.Pb.load(p,a);else if(null!=k&&null!=k.ja&&k.ja.J)this.Pb.load(k,a);else{if(null!=l&&g(l))if(null!=a.Bh){if(a.Bh.qo!=l.length||!a.J)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Pb.load(l[b],a);return}else{if(null!=l&&l.J){this.Pb.load(a,
a);return}if(null!=q&&null!=q.ja&&q.ja.J){this.Pb.load(q,a);return}}if(0<a.j.length)for(l=a.j,p=l.length,m=m=0;m<p;m++)this.xh(l[m]);if(d){for(l=0;this.Rp;)l++,window.console.log("Possible thread lock avoided: "+l);this.Rp=!0;p=a instanceof Ke&&a.Nh instanceof Pe;b&&null!=k&&k.J&&(l=this.bk.get(c),null!=l&&this.b.isBuffer(l.yb)&&this.b.deleteBuffer(l.yb));l=null;if(null!=k)if(!b||k.J){l=a.Gl;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
m=!1;k.Mi&&(m=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,m);m=this.b.createTexture();m.$I=k.Uf;this.Hl.set(k.nd,m);this.b.bindTexture(this.b.TEXTURE_2D,m);k.Mi?(m=this.b.RGBA,k.Qx&&(m=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,m,k.jt,k.it,0,m,this.b.UNSIGNED_BYTE,k.Mi)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,m.$I);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);p?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);m=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
m);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new ks(m,l.length,2);this.bk.set(c,l);k.J=!1}else l=this.bk.get(c);Pf(this.Pb,.1);if(p)this.Rp=!1,A.Ed(this.u+".update"),Pf(this.Pb,.9);else{if(!b||d.J||n.J){p=n.Ab;k=A.v.Wb(p,d.Yf,d.Zf,d.$f);p=A.v.Wb(p,d.Vf,d.Wf,d.Xf);if(null===this.Xm||k.x<this.Xm)this.Xm=k.x;if(null===this.Um||p.x>this.Um)this.Um=p.x;if(null===this.Ym||k.y<this.Ym)this.Ym=k.y;if(null===this.Vm||p.y>this.Vm)this.Vm=p.y;if(null===this.Zm||k.z<this.Zm)this.Zm=
k.z;if(null===this.Wm||p.z>this.Wm)this.Wm=p.z;this.Va=[(this.Xm+this.Um)/2,(this.Ym+this.Vm)/2,(this.Zm+this.Wm)/2];n.J=!1}b&&d.J&&(n=this.dk.get(c),null!=n&&this.b.isBuffer(n.yb)&&this.b.deleteBuffer(n.yb));n=null;!b||d.J?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.dc,this.b.STATIC_DRAW),n=new ks(n,d.count,3),d.J=!1):n=this.dk.get(c);Pf(this.Pb,.3);b&&e.J&&(k=this.dk.get(c),null!=k&&this.b.isBuffer(k.yb)&&this.b.deleteBuffer(k.yb));
k=null;!b||e.J?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.dc,this.b.STATIC_DRAW),k=new ks(k,e.count,3),e.J=!1):k=this.$m.get(c);Pf(this.Pb,.3);b&&h&&h.J&&(e=this.tl.get(c),null!=e&&this.b.isBuffer(e.yb)&&this.b.deleteBuffer(e.yb));e=null;if(h)if(!b||h.J){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.dc,this.b.STATIC_DRAW);e=new ks(e,h.count,3);h.J=!1}else e=this.tl.get(c);Pf(this.Pb,.2);b&&q&&q.J&&(h=this.Cl.get(c),null!=h&&this.b.isBuffer(h.yb)&&this.b.deleteBuffer(h.yb));h=null;if(q)if(h=q.Qm,!b||q.J){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new ks(d,h.length,3);q.J=!1}else h=this.Cl.get(c);Pf(this.Pb,.1);b||this.Sg.add(a);this.dk.set(c,
n);this.$m.set(c,k);this.tl.set(c,e);this.bk.set(c,l);this.Cl.set(c,h);this.Rp=a.J=!1}}else a.J=!1}}};f.Zv=function(a,b){if(this.xb.PICKING_ENABLED){this.nh(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.La-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.nh=function(a,b){As.d.nh.call(this,a,b);this.b.viewport(0,0,this.Za,this.La);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.Sg.fb,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.$x):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.oa.ht,h=this.oa.P;this.b.uniformMatrix4fv(this.kn.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.kn.get("view"),!1,h);e=this.Va;this.b.uniform3f(this.kn.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.od.length;for(e=0;e<h;++e){var k=this.od[e];if(k instanceof K){var l=A.v.Wb(this.oa.P,k.wa[0]+k.e[0].H[0],k.wa[1]+k.e[0].H[1],k.wa[2]+k.e[0].H[2]),n=A.v.Wb(this.oa.P,k.wa[0]-k.e[0].H[0],k.wa[1]-k.e[0].H[1],k.wa[2]-k.e[0].H[2]),p=Math.abs(l.z-n.z),l=A.v.Wb(this.oa.P,k.wa[0]+k.e[1].H[0],k.wa[1]+k.e[1].H[1],k.wa[2]+k.e[1].H[2]),n=A.v.Wb(this.oa.P,k.wa[0]-k.e[1].H[0],k.wa[1]-k.e[1].H[1],k.wa[2]+-k.e[1].H[2]),m=Math.abs(l.z-n.z),l=A.v.Wb(this.oa.P,k.wa[0]+k.e[2].H[0],k.wa[1]+k.e[2].H[1],k.wa[2]+
k.e[2].H[2]),n=A.v.Wb(this.oa.P,k.wa[0]-k.e[2].H[0],k.wa[1]-k.e[2].H[1],k.wa[2]-k.e[2].H[2]),l=Math.max(p,m,Math.abs(l.z-n.z));l==p?Oe(k,0):l==m?Oe(k,1):Oe(k,2)}}if(this.xb.ORDERING_ENABLED){p=!1;h=this.od;k=h.length-1;do if(e=h[k],e instanceof K&&e.Oe&&-1!=e.Ib){var p=e.j[e.Ib].j,m=e.Ib,l=A.v.Wb(this.oa.P,e.wa[0]+e.e[m].Sa[0],e.wa[1]+e.e[m].Sa[1],e.wa[2]+e.e[m].Sa[2]),n=A.v.Wb(this.oa.P,e.wa[0]-e.e[m].Sa[0],e.wa[1]-e.e[m].Sa[1],e.wa[2]-e.e[m].Sa[2]),l=l.z-n.z,n=Math.max(e.ql[e.Ib],Math.max(e.ql[e.Ib+
4],e.ql[e.Ib+8])),q=Math.min(e.ql[e.Ib],Math.min(e.ql[e.Ib+4],e.ql[e.Ib+8]));if(0>l*(n+q))for(l=l=0;l<e.en[m]-1;l++)p[l]&&(p[l].Yc=e.Yc,p[l].md=e.e[m].El*l);else for(l=e.en[m]-1;0<=l;l--)p[l]&&(p[l].Yc=e.Yc,p[l].md=(e.en[m]-1)*e.e[m].El-e.e[m].El*l);p=!0}while(k--);h=this.Sg.fb;k=h.length-1;do e=h[k],!e.qb||1==e.Yc||e instanceof Ke||(p=e,m=e.G.Jp,e=A.v.Wb(e.lc.Ab,m[0],m[1],m[2]),e=A.v.Wb(this.oa.P,e.x,e.y,e.z),e=A.R.fu(this.oa.Yj,e),e=Math.round(1E3*e)/1E3,p.md=e,p=!0);while(k--);p&&this.Sg.sort()}if(h=
!a&&null!=b&&b&&this.xb.STATISTICS_ENABLED)var t=0,s=0,z=0,y=0;var e=this.Ws,k=e.get("vertexPosition"),p=e.get("vertexNormal"),m=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.kn,q=e.get("usePicking"),I=e.get("useObjectColor"),O=e.get("objectColor"),N=e.get("useScalars"),G=e.get("scalarsReplaceMode"),T=e.get("scalarsMin"),aa=e.get("scalarsMax"),V=e.get("scalarsMinColor"),wa=e.get("scalarsMaxColor"),oa=e.get("scalarsInterpolation"),ya=e.get("scalarsMinThreshold"),Oa=
e.get("scalarsMaxThreshold"),Ja=e.get("objectOpacity"),Pa=e.get("labelmapOpacity"),ka=e.get("labelmapColor"),za=e.get("useTexture"),qa=e.get("useLabelMapTexture"),Gc=e.get("textureSampler"),Be=e.get("textureSampler2"),Ce=e.get("volumeLowerThreshold"),De=e.get("volumeUpperThreshold"),ae=e.get("volumeScalarMin"),Qh=e.get("volumeScalarMax"),Nv=e.get("volumeWindowLow"),Ov=e.get("volumeWindowHigh"),Pv=e.get("volumeScalarMinColor"),Qv=e.get("volumeScalarMaxColor"),cs=e.get("volumeTexture"),Rv=e.get("objectTransform"),
Sv=e.get("pointSize"),e=d;do{var Qa=c[d-e];if(Qa){var lb=null;Qa instanceof Ke&&Qa.Nh&&(lb=Qa.Nh);if(Qa.qb&&(!lb||lb.qb)&&(!a||Qa.an)){var Dc=Qa.nd,Rd=Qa.Tm,jd=this.dk.get(Dc),te=this.$m.get(Dc),an=this.tl.get(Dc),of=this.Cl.get(Dc),bn=this.bk.get(Dc);this.b.bindBuffer(this.b.ARRAY_BUFFER,jd.yb);this.b.vertexAttribPointer(k,jd.Fi,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,te.yb);this.b.vertexAttribPointer(p,te.Fi,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(q,!0):this.b.uniform1i(q,!1);
!an||a||Rd?(te=1,Rd&&!a&&(te=0),this.b.uniform1i(I,te),te=Qa.Ka,a&&(te=[Math.floor(Dc%65025%255)/255,Math.floor(Dc%65025/255)/255,Math.floor(Dc/65025)/255]),this.b.uniform3f(O,parseFloat(te[0]),parseFloat(te[1]),parseFloat(te[2])),this.b.vertexAttribPointer(m,jd.Fi,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(I,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,an.yb),this.b.vertexAttribPointer(m,an.Fi,this.b.FLOAT,!1,0,0));!of||a||Rd?(this.b.uniform1i(N,!1),this.b.vertexAttribPointer(n,jd.Fi,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(N,!0),this.b.uniform1i(G,Qa.gb.cy),Dc=Qa.gb.Ii,Rd=Qa.gb.Gi,this.b.uniform3f(V,parseFloat(Dc[0]),parseFloat(Dc[1]),parseFloat(Dc[2])),this.b.uniform3f(wa,parseFloat(Rd[0]),parseFloat(Rd[1]),parseFloat(Rd[2])),this.b.uniform1f(ya,parseFloat(Qa.gb.zb)),this.b.uniform1f(Oa,parseFloat(Qa.gb.Bb)),this.b.uniform1f(T,parseFloat(Qa.gb.ie)),this.b.uniform1f(aa,parseFloat(Qa.gb.cc)),this.b.uniform1i(oa,parseInt(Qa.gb.Ys,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,of.yb),this.b.vertexAttribPointer(n,
of.Fi,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ja,parseFloat(Qa.Yc));Qa.Ya&&bn&&!a?(this.b.uniform1i(za,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.Hl.get(Qa.Ya.nd)),this.b.uniform1i(Gc,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,bn.yb),this.b.vertexAttribPointer(l,bn.Fi,this.b.FLOAT,!1,0,0),this.b.uniform1i(cs,!1)):(this.b.uniform1i(za,!1),this.b.vertexAttribPointer(l,jd.Fi,this.b.FLOAT,!1,0,0));lb&&(this.b.uniform1i(cs,!0),this.b.uniform1f(Ce,lb.zb),this.b.uniform1f(De,
lb.Bb),this.b.uniform1f(ae,lb.ie),this.b.uniform1f(Qh,lb.cc),Dc=lb.Ii,Rd=lb.Gi,this.b.uniform3f(Pv,parseFloat(Dc[0]),parseFloat(Dc[1]),parseFloat(Dc[2])),this.b.uniform3f(Qv,parseFloat(Rd[0]),parseFloat(Rd[1]),parseFloat(Rd[2])),this.b.uniform1f(Nv,lb.Rb),this.b.uniform1f(Ov,lb.Qb),of=lb.t,this.b.uniform1i(qa,!1),lb.Oe?this.b.uniform1f(Ja,parseFloat(lb.Yc)):of&&of.qb&&(lb=Qa.t.nd,this.b.uniform1i(qa,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.Hl.get(lb)),this.b.uniform1i(Be,
1),this.b.uniform1f(Pa,of.Yc),this.b.uniform4fv(ka,of.nt)));this.b.uniformMatrix4fv(Rv,!1,Qa.lc.Ab);lb=1;"POINTS"==Qa.Ld&&(lb=Qa.bn);this.b.uniform1f(Sv,lb);lb=-1;Qa.Ld==Sd?(lb=this.b.TRIANGLES,h&&(s+=jd.Ei/3)):"LINES"==Qa.Ld?(this.b.lineWidth(Qa.Al),lb=this.b.LINES,h&&(z+=jd.Ei/2)):"POINTS"==Qa.Ld?(lb=this.b.POINTS,h&&(y+=jd.Ei)):"TRIANGLE_STRIPS"==Qa.Ld?(lb=this.b.TRIANGLE_STRIP,h&&(s+=jd.Ei/3)):"POLYGONS"==Qa.Ld&&(lb=0==jd.Ei%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(s+=jd.Ei/3));h&&(t+=jd.Ei);
this.b.drawArrays(lb,0,jd.Ei)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+t+" | "),c+="Triangles: "+Math.round(s)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.Hl.jg(),window.console.log(c))}};
f.remove=function(a){As.d.remove.call(this,a);if(0<a.j.length)for(var b=a.j,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.nd;c=this.bk.get(b);null!=c&&this.b.isBuffer(c.yb)&&this.b.deleteBuffer(c.yb);a.Ya&&(c=this.Hl.get(a.Ya.nd))&&(this.b.deleteTexture(c),this.Hl.remove(a.Ya.nd));c=this.dk.get(b);null!=c&&this.b.isBuffer(c.yb)&&this.b.deleteBuffer(c.yb);c=this.$m.get(b);null!=c&&this.b.isBuffer(c.yb)&&this.b.deleteBuffer(c.yb);c=this.tl.get(b);null!=c&&this.b.isBuffer(c.yb)&&this.b.deleteBuffer(c.yb);
c=this.Cl.get(b);null!=c&&this.b.isBuffer(c.yb)&&this.b.deleteBuffer(c.yb);this.dk.remove(b);this.$m.remove(b);this.tl.remove(b);this.bk.remove(b);this.Cl.remove(b);this.Sg.remove(a);return!0};f.oe=function(){this.lt=null;delete this.lt;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);As.d.oe.call(this)};As.prototype.__defineGetter__("bgColor",function(){return this.Om});As.prototype.__defineSetter__("bgColor",function(a){this.Om=a});
As.prototype.rL=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.Zv(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=jq(this.oa,a/this.Za*2-1,(this.La-b)/this.La*2-1,0);a=jq(this.oa,a/this.Za*2-1,(this.La-b)/this.La*2-1,1);h[0]+=this.Va[0];h[1]+=this.Va[1];h[2]+=this.Va[2];a[0]+=this.Va[0];a[1]+=this.Va[1];a[2]+=this.Va[2];b=[e.G.Yf,e.G.Zf,e.G.$f];var k=[e.G.Vf,e.G.Zf,e.G.$f],l=[e.G.Vf,e.G.Wf,e.G.$f],n=[e.G.Yf,e.G.Wf,e.G.$f],p=[e.G.Yf,e.G.Wf,e.G.Xf],m=[e.G.Yf,e.G.Zf,
e.G.Xf],q=[e.G.Vf,e.G.Wf,e.G.Xf],t=[e.G.Vf,e.G.Zf,e.G.Xf];b=[A.v.Wb(e.lc.Ab,b[0],b[1],b[2]),A.v.Wb(e.lc.Ab,k[0],k[1],k[2]),A.v.Wb(e.lc.Ab,l[0],l[1],l[2]),A.v.Wb(e.lc.Ab,n[0],n[1],n[2]),A.v.Wb(e.lc.Ab,p[0],p[1],p[2]),A.v.Wb(e.lc.Ab,m[0],m[1],m[2]),A.v.Wb(e.lc.Ab,q[0],q[1],q[2]),A.v.Wb(e.lc.Ab,t[0],t[1],t[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],k=[Math.min(k[0],s.x),Math.max(k[1],s.x),Math.min(k[2],s.y),Math.max(k[3],s.y),Math.min(k[4],s.z),Math.max(k[5],
s.z)];s=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,t=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(s[l]-h[n]);Infinity!=y&&-Infinity!=y&&(q=h[p]+a[p]*y,y=h[m]+a[m]*y,q>=s[t]&&q<=s[t+1]&&y>=s[z]&&y<=s[z+1]?(t=[],t[n]=s[l],t[p]=q,t[m]=y,b.push(t)):(t=[],t[n]=s[l],t[p]=q,t[m]=y,k.push(t)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(s=0;2>s;s++)b=a[s],k[s]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=s=null;k[0]<k[1]?(s=a[0],b=a[1]):
(s=a[1],b=a[0]);h=Math.sqrt((s[0]-b[0])*(s[0]-b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));h/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k=[s[0]/b,s[1]/b,s[2]/b];l=e.G.dc;n=l.length;for(s=0;s<h;s+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(p=l[b],m=l[b+1],q=l[b+2],t=new A.R(p,m,q),t=A.v.Wb(e.lc.Ab,p,m,q),Math.sqrt((a[0]-t.x)*(a[0]-t.x)+(a[1]-t.y)*(a[1]-t.y)+(a[2]-t.z)*(a[2]-t.z))<=d)return[t.x,t.y,t.z];return null};
v("X.renderer3D",As);v("X.renderer3D.prototype.init",As.prototype.ta);v("X.renderer3D.prototype.add",As.prototype.add);v("X.renderer3D.prototype.onShowtime",As.prototype.JB);v("X.renderer3D.prototype.onRender",As.prototype.FB);v("X.renderer3D.prototype.get",As.prototype.get);v("X.renderer3D.prototype.render",As.prototype.k);v("X.renderer3D.prototype.destroy",As.prototype.oe);v("X.renderer3D.prototype.remove",As.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",As.prototype.DL);
v("X.renderer3D.prototype.resetViewAndRender",As.prototype.Ho);v("X.renderer3D.prototype.pick",As.prototype.Zv);v("X.renderer3D.prototype.pick3d",As.prototype.rL);function Cs(){As.call(this)}w(Cs,As);v("xiv.vis.XtkRenderer3D",Cs);f=Cs.prototype;f.$e=function(){this.Sk()};f.Rk=function(a){Cs.d.Rk.call(this,a);this.dispatchEvent({type:"k",value:a.ck})};f.k=function(){this.yc&&this.b?(Cs.d.k.call(this),this.dispatchEvent({type:"l"})):(this.xb.PROGRESSBAR_ENABLED=!1,this.ta())};f.oe=function(){Cs.d.oe.call(this)};f.remove=function(a){null!=a&&Cs.d.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",Cs.prototype.$e);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",Cs.prototype.Rk);v("xiv.vis.XtkRenderer3D.prototype.render",Cs.prototype.k);v("xiv.vis.XtkRenderer3D.prototype.remove",Cs.prototype.remove);function Ds(){$c.call(this);this.il=[]}w(Ds,$c);v("xiv.vis.XtkPlane",Ds);var Es=[-300,300,300];f=Ds.prototype;f.mm=!0;f.ol=null;f.orientation=null;f.Go=null;f.Da=null;f.Xi=null;f.Ta=function(){return this.Da};f.Ub=function(){return this.orientation};f.es=function(a){null!=this.Da&&(null!=a?(this.jq=a,this.Da.camera.focus=a.focus,this.Da.camera.position=a.position,this.Da.camera.up=a.yM,a instanceof Bp&&(this.Da.camera.view=a.view)):this.Da.camera.position=Es)};
f.ds=function(a){this.Xi.style.background=null!=a?r(a)?a:null!=a.Oy?"-webkit-linear-gradient(top, "+a.Oy+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.XG=function(){return this.rq};f.TG=function(){return this.Xi};f.$k=function(a){this.Xi=a;null!=this.Da||this.ta(a);this.Da.container=a};f.Sv=function(a){this.dispatchEvent(a)};
f.ta=function(a){null!=this.Da&&(J(this.Da),this.Da.oe(),this.Da=null);if(null==this.ol)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Da=new this.ol;this.Da.orientation=this.orientation;this.$k(a||this.Xi||document.body);this.Da.ta();H(this.Da,"k",function(a){this.dispatchEvent({type:"k",value:a.value})}.bind(this));H(this.Da,"A",this.Sv.bind(this))};f.add=function(a){this.mm&&(!0==a.isSelectedVolume&&(this.rq=a),this.il.push(a),this.Da.add(a))};f.isEnabled=function(){return this.mm};
function Fs(a){null!=a.Pf&&(S(a.Pf),delete a.Pf)}function Gs(a){a.Pf=R("div",{id:"DisabledOverlay_"+B()});a.Pf.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=R("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.Pf.appendChild(c);a.Xi.appendChild(a.Pf)}
f.Lb=function(a){(this.mm=!1!==a)?Bk(this.Pf,200,function(){this.Pf.style.visibility="hidden";Fs(this)}.bind(this)):(null!=this.Pf||Gs(this),this.Pf.style.visibility="visible",yk(this.Pf,200,function(){}.bind(this)))};f.restore=function(){this.ta();Hs(this);null!=this.jq&&this.es(this.jq);null!=this.mc&&this.ds(this.mc);this.k()};f.AL=function(){E(this.il,function(a){null!=a&&this.Da.remove(a)}.bind(this))};function Hs(a){E(a.il,function(a){this.Da.add(a)}.bind(a))}f.k=function(){this.mm&&this.Da.k()};
f.o=function(){null!=this.Da&&this.Da.$e()};f.g=function(){Ds.d.g.call(this);null!=this.Da&&(this.Da.oe(),delete this.Da);Fs(this);null!=this.mc&&delete this.mc;null!=this.jq&&delete this.jq;null!=this.Go&&(null!=this.Go.g&&(this.Go.stop(),this.Go.g()),delete this.Go);delete this.mm;delete this.ol;delete this.Xi;delete this.orientation;D(this.il);delete this.rq;delete this.qQ};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",Es);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",Ds.prototype.ol);v("xiv.vis.XtkPlane.prototype.orientation",Ds.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",Ds.prototype.Da);v("xiv.vis.XtkPlane.prototype.container",Ds.prototype.Xi);v("xiv.vis.XtkPlane.prototype.getRenderer",Ds.prototype.Ta);v("xiv.vis.XtkPlane.prototype.getOrientation",Ds.prototype.Ub);v("xiv.vis.XtkPlane.prototype.setCamera",Ds.prototype.es);v("xiv.vis.XtkPlane.prototype.setBackground",Ds.prototype.ds);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",Ds.prototype.XG);v("xiv.vis.XtkPlane.prototype.getContainer",Ds.prototype.TG);v("xiv.vis.XtkPlane.prototype.setContainer",Ds.prototype.$k);v("xiv.vis.XtkPlane.prototype.init",Ds.prototype.ta);v("xiv.vis.XtkPlane.prototype.add",Ds.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",Ds.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",Ds.prototype.Lb);v("xiv.vis.XtkPlane.prototype.restore",Ds.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",Ds.prototype.AL);v("xiv.vis.XtkPlane.prototype.render",Ds.prototype.k);v("xiv.vis.XtkPlane.prototype.updateStyle",Ds.prototype.o);v("xiv.vis.XtkPlane.prototype.dispose",Ds.prototype.g);function Is(){Ds.call(this);this.orientation="V";this.ol=Cs}w(Is,Ds);v("xiv.vis.XtkPlane3D",Is);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function Js(a){ar.call(this,a);this.Na.C(this.ha());this.Na.Gf(this.S()-this.ha())}w(Js,ar);Js.prototype.$=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};Js.prototype.nk=function(a){a=this.N().B("div",a);$k(a,"button");return a};
Js.prototype.lz=function(){var a=Ph(document,null,"goog-twothumbslider-value-thumb",this.a())[0],b=Ph(document,null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Ph(document,null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.nk("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.nk("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.N().B("div","goog-twothumbslider-rangehighlight"),this.N().Ru(c,a));this.ra=a;this.rc=b;this.Yb=c};function Ks(){Vd.call(this);this.u="fibers";Aa(this,new fd)}w(Ks,Vd);v("X.fibers",Ks);function Ls(){this.Yk=R("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.Vc});ul.call(this,"",this.Yk,!0);Q(this.kb,Ls.CSS.KE);this.sf.style.marginTop="-4px";this.kb.style.marginTop="0px";this.kb.style.border="none";this.SC(!1)}w(Ls,ul);v("nrg.ui.ZippyTree",Ls);var yn="C",Ms={WM:"B",yE:yn};Ls.ID_PREFIX="nrg.ui.ZippyTree";Ls.CSS_SUFFIX={KE:"rootnode"};f=Ls.prototype;f.Lk=1;f.ij=!1;f.mJ=!0;f.br=1;f.ju=0;f.as=null;f.Of=null;f.lw=function(a){this.qz=a};
f.lm=function(){return 0===di(this.sf).length};f.dz=function(){this.qp(function(a){a.bc.gc(!1)},this)};f.wn=function(){this.dz()};f.Jz=function(){var a=[];this.qp(function(b){a.push(b)},this);return a};f.Du=function(){var a=[];C(this.Jc,function(b){a.push(b)});return a};function Ns(a,b,c,d){c==d?a.ts.push(b):C(b.Jc,function(a){Ns(this,a,c+1,d)}.bind(a))}f.jA=function(a){this.ts=[];Ns(this,this,0,a);a=Nb(this.ts);Jb(this.ts);delete this.ts;return a};
f.Vl=function(){this.qp(function(a){a.bc.gc(!0)},this)};f.qp=function(a,b){C(b.Jc,function(b){a(b);this.qp(a,b)}.bind(this))};f.a=function(){return this.Yk};f.gc=function(a,b){return Os(this,a,b,!0)};function Os(a,b,c,d){c=null!=c?c:a;if(null!=c.Jc[b]){var e=c.Jc[b],h=e.bc;null!=h.rf?Tc(h,d?"a":"b",function(){h.gg!=d&&e.gc(d)}):e.gc(d);return e}}f.No=function(a,b){return Os(this,a,b,!1)};f.Gq=function(a){var b=this,c=[];E(a,function(a){c.push(b.Jc[a]);b=b.Jc[a]}.bind(this));return c};
f.qf=function(a,b){!g(a)||hi(a)?Ps(this,a,b):E(a,function(a){this.qf(a,b)}.bind(this))};function Ps(a,b,c){c?(c&&(c=r(c)?[c]:c,c.length>a.Lk&&(a.Lk=c.length)),a.zn(c,a,b)):$h(a.Yk,b)}
f.zn=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.sf;if(0==a.length)Qs(this,b,c),null!=c&&Rs(this,c,d-2);else{0<a.length&&a.length>this.Lk&&(this.Lk=a.length);if(b.Jc[a[0]])e=b.Jc[a[0]];else{var h=a[0];e.style.opacity=this.br;var k=new ul(h,e,!1);b.kb.parentNode==this.Yk&&2==this.Yk.childNodes.length&&(k.kb.style.marginTop="5px");k.kb.style.left="inherit";k.kb.style.width="inherit";Ss(this,k);b.Jc[h]=k;k.kb.style.opacity=this.br;e.style.opacity=1;this.ij&&Ts(this,k.kb);this.dispatchEvent({type:yn,
xe:k});e=k}Rs(this,e.kb,d-1);this.zn(1<a.length?a.slice(1):[],e,c,d+1)}};function Rs(a,b,c){null!=b&&b._maxDepth!=a.Lk&&(null==b._maxDepth&&(b._maxDepth=a.Lk),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}
f.Zr=function(a,b,c,d){b=null!=b?b:0;E(this.Jz(),function(e){H(e,"c",function(){timer=new Wf;timer.setInterval(10);timer.addEventListener(Xf,function(){a.style.height=(U(this.a()).height+b).toString()+"px";null!=c&&c()}.bind(this));timer.start();Tc(e,e.bc.gg?"b":"a",function(){timer.stop();delete timer;null!=c&&c();null!=d&&d()}.bind(this))}.bind(this))}.bind(this))};
function Ss(a,b){H(b,"a",function(){this.dispatchEvent({type:"a",xe:b})}.bind(a));H(b,"c",function(){this.dispatchEvent({type:"c",xe:b})}.bind(a));H(b,"b",function(){this.dispatchEvent({type:"b",xe:b})}.bind(a))}function Ts(a,b){(new dk(b,a.ju)).play()}f.sL=function(){this.ij&&!this.Of.Af()&&this.Of.play()};f.vM=function(a){this.br=(this.ij=!0===a)?0:1;this.ju=this.ij?300:0;this.ij&&(Us(this),this.as=[],this.Of=new ik,H(this.Of,"end",this.bz.bind(this)))};
function Qs(a,b,c){if(null!=c){var d=b.sf;a=function(){sk(c,{position:"relative"});c.style.opacity=0;yk(c,300);null!=this.qz?this.qz(d,c):d.appendChild(c);Vs(d);this.ij?Ts(this,c,function(){this.dispatchEvent({type:"B"})}.bind(this)):this.dispatchEvent({type:"B"})}.bind(a);b.Ju()&&!b.qr&&b.hw(!0);a()}}
function Vs(a){var b=[],c=[],d=di(a),e=d.length;E(d,function(a){dl(a,ul.CSS.Ap)?b.push(a):1==a.childNodes.length&&dl(a.childNodes[0],ul.CSS.yh)&&c.push(a)});E(b,function(b,d){ci(a,b,e);ci(a,c[d],e+1)})}f.bz=function(){for(this.Of.g();this.as.length;)this.Of.add(this.as[0]),zb.splice.call(this.as,0,1);H(this.Of,"end",this.bz.bind(this));this.Of.play()};function Us(a){null!=a.fC&&(a.du(a.fC),delete a.fC);null!=a.Of&&(a.vq(a.Of),delete a.Of)}
f.f=function(){Ls.d.f.call(this);S(this.Yk);delete this.Yk;Us(this);delete this.Lk;delete this.ij;delete this.mJ;delete this.br;delete this.ju};v("nrg.ui.ZippyTree.EventType",Ms);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",Ls.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",Ls.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");
v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=di(a),d=b[vl].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[vl]&&(e=h[vl].toLowerCase(),e=La(d,e),0>e)){bi(b,h);return}a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",Ls.prototype.lw);v("nrg.ui.ZippyTree.prototype.isEmpty",Ls.prototype.lm);v("nrg.ui.ZippyTree.prototype.contractAll",Ls.prototype.dz);v("nrg.ui.ZippyTree.prototype.collapseAll",Ls.prototype.wn);
v("nrg.ui.ZippyTree.prototype.getAllNodes",Ls.prototype.Jz);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",Ls.prototype.Du);v("nrg.ui.ZippyTree.prototype.getNodesByLevel",Ls.prototype.jA);v("nrg.ui.ZippyTree.prototype.expandAll",Ls.prototype.Vl);v("nrg.ui.ZippyTree.prototype.traverse",Ls.prototype.qp);v("nrg.ui.ZippyTree.prototype.getElement",Ls.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",Ls.prototype.gc);v("nrg.ui.ZippyTree.prototype.setCollapsed",Ls.prototype.No);
v("nrg.ui.ZippyTree.prototype.getFolderNodes",Ls.prototype.Gq);v("nrg.ui.ZippyTree.prototype.addContents",Ls.prototype.qf);v("nrg.ui.ZippyTree.prototype.createBranch",Ls.prototype.zn);v("nrg.ui.ZippyTree.prototype.scaleElementOnChange",Ls.prototype.Zr);v("nrg.ui.ZippyTree.prototype.playFx",Ls.prototype.sL);v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",Ls.prototype.vM);v("nrg.ui.ZippyTree.prototype.disposeInternal",Ls.prototype.f);function Ws(){}w(Ws,Tn);ga(Ws);Ws.prototype.B=function(a){var b=a.N().B("span",this.zk(a).join(" "));Xs(this,b,a.Vi);return b};Ws.prototype.Jb=function(a,b){b=Ws.d.Jb.call(this,a,b);var c=cl(b),d=Ys;Ib(c,Zs(this,$s))?d=$s:Ib(c,Zs(this,at))?d=at:Ib(c,Zs(this,Ys))&&(d=Ys);a.Vi=d;al(b,"checked",d==$s?"mixed":d==at?"true":"false");return b};Ws.prototype.ah=function(){return"checkbox"};
function Xs(a,b,c){if(b){var d=Zs(a,c);dl(b,d)||(C(bt,function(a){a=Zs(this,a);il(b,a,a==d)},a),al(b,"checked",c==$s?"mixed":c==at?"true":"false"))}}Ws.prototype.$=function(){return"goog-checkbox"};function Zs(a,b){var c=a.$();if(b==at)return c+"-checked";if(b==Ys)return c+"-unchecked";if(b==$s)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function ct(a,b,c){c=c||Ws.re();io.call(this,null,c,b);this.Vi=da(a)?a:Ys}w(ct,io);var at=!0,Ys=!1,$s=null,bt={OM:at,PO:Ys,QO:$s};f=ct.prototype;f.tb=null;f.gh=function(){return this.Vi==at};f.yd=function(a){a!=this.Vi&&(this.Vi=a,Xs(this.Ta(),this.a(),this.Vi))};f.Hf=function(a){this.ma?(this.Dc(),this.tb=a,this.hb()):this.tb=a};f.toggle=function(){this.yd(this.Vi?Ys:at)};
f.hb=function(){ct.d.hb.call(this);if(this.Gk){var a=this.ib();this.tb&&a.D(this.tb,"click",this.Fu).D(this.tb,"mouseover",this.Hk).D(this.tb,"mouseout",this.Tq).D(this.tb,"mousedown",this.eh).D(this.tb,"mouseup",this.ng);a.D(this.a(),"click",this.Fu)}this.tb&&(this.tb.id||(this.tb.id=nj(this)+".lbl"),al(this.a(),"labelledby",this.tb.id))};f.Lb=function(a){ct.d.Lb.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.Fu=function(a){a.stopPropagation();var b=this.Vi?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.mg=function(a){32==a.keyCode&&this.Fu(a);return!1};Qn("goog-checkbox",function(){return new ct});function dt(){Vd.call(this);this.u="mesh";Aa(this,new fd)}w(dt,Vd);v("X.mesh",dt);function et(){W.call(this);this.Ye=[];this.Jf=[]}w(et,W);v("xiv.ui.XtkController",et);et.ID_PREFIX="xiv.ui.XtkController";et.CSS_SUFFIX={hE:"label",QD:"component"};var ft=B();function gt(){return R("div",{id:"Label_"+B(),"class":et.CSS.hE})}function ht(a){a=g(a.file)?a.file[0]:a.file||a.name;return Qk(a)}function it(a,b){b.nC([ht(a)])}f=et.prototype;f.vj=!1;f.k=function(a){et.d.k.call(this,a)};f.Hf=function(a){null==this.tb&&(this.tb=gt(),$h(this.a(),this.tb));this.tb.innerHTML=a};f.uH=function(){return this.tb};
f.Oo=function(a){this.defaultValue=a};f.YG=function(){return this.defaultValue};f.nC=function(a){r(a)&&(a=[a]);this.Kn=a};f.jH=function(){return this.Kn};f.Bg=function(a){this.Oa=a};f.Sd=function(){return this.Oa};function jt(a){this.min=parseInt(a.min);this.max=parseInt(a.max);this.jh=parseInt(a.windowLow);this.qj=parseInt(a.windowHigh)}f.kg=function(){return new jt(this.Oa)};
f.Bj=function(a){a=this.ka=a;this.ka instanceof kj?(a=this.ka.a(),this.ka.ma?this.ka.a().parentNode!==this.a()&&this.ka.a()!==this.a()&&this.a().appendChild(this.ka.a()):this.ka.k(this.a())):this.a().appendChild(a);null!=a&&Q(a,et.CSS.QD)};f.Iz=function(){return Mb(this.Ye,this.Jf)};f.DH=function(){return this.Ye};f.WA=function(){return this.vj};f.RL=function(a){this.vj=a};f.fI=function(){return this.Jf};f.SG=function(){return this.ka};f.Ac=fa;
f.rd=function(a,b,c){a=new a;a.k();r(b)&&a.Hf(b);$h(this.a(),a.a());null!=c&&H(a,"D",c);return a};f.refresh=function(){};f.vt=function(a,b){var c=this.rd(b,"Color",function(b){a.color=b.color}.bind(this));it(a,c);this.Jf.push(c);c[ft]=a;c.refresh()};f.Ay=function(a,b){var c=this.rd(b,"Opacity",function(b){a.opacity=parseFloat(b.value/100)});it(a,c);this.Jf.push(c);c.ka.o();c.Qo("%")};f.wt=function(a,b){var c=this.rd(b,"Visible",function(b){a.visible=b.checked});it(a,c);this.Jf.push(c);c.ka.yd(a.visible)};
f.f=function(){et.d.f.call(this);this[ft]=null;delete this.vj;delete this.Oa;E(this.Jf,function(a){J(a);a.g()});Jb(this.Jf);delete this.Jf;E(this.Ye,function(a){J(a);a.g();controller=null});Jb(this.Ye);delete this.Ye;null!=this.ka&&(J(this.ka),this.ka instanceof kj?this.ka.g():S(this.ka),delete this.ka);null!=this.Kn&&(Jb(this.Kn),delete this.Kn);null!=this.tb&&(S(this.tb),delete this.tb);delete this.defaultValue};v("xiv.ui.XtkController.ID_PREFIX",et.ID_PREFIX);
v("xiv.ui.XtkController.CSS_SUFFIX",et.CSS_SUFFIX);v("xiv.ui.XtkController.EventType",{HD:"D"});v("xiv.ui.XtkController.OBJ_KEY",ft);v("xiv.ui.XtkController.CurrentLevels",jt);v("xiv.ui.XtkController.createLabel",gt);v("xiv.ui.XtkController.getXObjLabel",ht);v("xiv.ui.XtkController.getObjectCategory",function(a){if(a instanceof dt)return"Meshes";if(a instanceof K)return"Volumes";if(a instanceof Ks)return"Fibers";if(a instanceof bq)return"Annotations"});
v("xiv.ui.XtkController.setControllerFolders",it);v("xiv.ui.XtkController.prototype.render",et.prototype.k);v("xiv.ui.XtkController.prototype.setLabel",et.prototype.Hf);v("xiv.ui.XtkController.prototype.getLabel",et.prototype.uH);v("xiv.ui.XtkController.prototype.setDefaultValue",et.prototype.Oo);v("xiv.ui.XtkController.prototype.getDefaultValue",et.prototype.YG);v("xiv.ui.XtkController.prototype.setFolders",et.prototype.nC);v("xiv.ui.XtkController.prototype.getFolders",et.prototype.jH);
v("xiv.ui.XtkController.prototype.setXObj",et.prototype.Bg);v("xiv.ui.XtkController.prototype.getXObj",et.prototype.Sd);v("xiv.ui.XtkController.prototype.setComponent",et.prototype.Bj);v("xiv.ui.XtkController.prototype.getAllControllers",et.prototype.Iz);v("xiv.ui.XtkController.prototype.getMasterControllers",et.prototype.DH);v("xiv.ui.XtkController.prototype.isInitialized",et.prototype.WA);v("xiv.ui.XtkController.prototype.setInitialized",et.prototype.RL);
v("xiv.ui.XtkController.prototype.getCurrentLevels",et.prototype.kg);v("xiv.ui.XtkController.prototype.getSubControllers",et.prototype.fI);v("xiv.ui.XtkController.prototype.getComponent",et.prototype.SG);v("xiv.ui.XtkController.prototype.dispatchComponentEvent",et.prototype.Ac);v("xiv.ui.XtkController.prototype.createController",et.prototype.rd);v("xiv.ui.XtkController.prototype.refresh",et.prototype.refresh);v("xiv.ui.XtkController.prototype.add_colorPalette",et.prototype.vt);
v("xiv.ui.XtkController.prototype.add_opacity",et.prototype.Ay);v("xiv.ui.XtkController.prototype.add_visible",et.prototype.wt);v("xiv.ui.XtkController.prototype.disposeInternal",et.prototype.f);function kt(a){$c.call(this);this.O=null;this.q=a;a=F||ic&&!pc("531")&&"TEXTAREA"==a.tagName;this.Cc=new gj(this);this.Cc.D(this.q,a?["keydown","paste","cut","drop","input"]:"input",this)}w(kt,$c);
kt.prototype.handleEvent=function(a){if("input"==a.type)F&&pc(10)&&0==a.keyCode&&0==a.charCode||(lt(this),gc&&this.q!=Mh(this.q).activeElement||this.dispatchEvent(mt(a)));else if("keydown"!=a.type||jl(a)){var b="keydown"==a.type?this.q.value:null;F&&229==a.keyCode&&(b=null);var c=mt(a);lt(this);this.O=Yf(function(){this.O=null;this.q.value!=b&&this.dispatchEvent(c)},0,this)}};function lt(a){null!=a.O&&(ca.clearTimeout(a.O),a.O=null)}function mt(a){a=new Hc(a.Qc);a.type="input";return a}
kt.prototype.f=function(){kt.d.f.call(this);this.Cc.g();lt(this);delete this.q};function nt(a,b,c){kj.call(this,a);ot(this,b||"#f00");this.className=c||"goog-hsv-palette";this.la=vi(this.N())}w(nt,kj);f=nt.prototype;f.hs=function(a){a!=this.Nl&&(ot(this,a),pt(this),this.dispatchEvent("action"))};function ot(a,b){var c=Mj(b).pj,d=Sj(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.fd=[e,l,d];a.fd[0]/=360;a.Nl=c}
function qt(a,b,c,d){if(null!=b||null!=c||null!=d)a.fd[0]=null!=b?b:a.fd[0],a.fd[1]=null!=c?c:a.fd[1],a.fd[2]=null!=d?d:a.fd[2],b=[360*a.fd[0],a.fd[1],a.fd[2]],b=Uj(b[0],b[1],b[2]),a.Nl=b,pt(a),a.dispatchEvent("action")}f.Qe=function(){return!1};
f.B=function(){var a=this.N(),b=F&&!pc("7")?" "+(this.className+"-noalpha"):"",c=a.B("DIV",this.className+"-hs-backdrop");this.im=a.B("DIV",this.className+"-hs-handle");this.sj=a.B("DIV",this.className+"-hs-image",this.im);this.hl=a.B("DIV",this.className+"-v-image");this.wp=a.B("DIV",this.className+"-v-handle");this.ss=a.B("DIV",this.className+"-swatch");this.Jk=a.B("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.B("label",null,this.Jk);this.q=a.B("DIV",this.className+b,
c,this.sj,this.hl,this.wp,this.ss,d)};f.hb=function(){nt.d.hb.call(this);pt(this);var a=this.ib();a.D(this.a(),"mousedown",this.eh);this.bo||(this.bo=new kt(this.Jk));a.D(this.bo,"input",this.JI)};f.f=function(){nt.d.f.call(this);delete this.sj;delete this.im;delete this.hl;delete this.wp;delete this.ss;delete this.Jk;this.bo&&(this.bo.g(),delete this.bo);Vc(this.sv);Vc(this.tv)};
function pt(a){if(a.ma){var b=a.fd[1],c=a.fd[2],d=a.sj.offsetWidth*a.fd[0];a.Ve()&&(d=a.sj.offsetWidth-d);var e=Math.ceil(a.im.offsetWidth/2),d=d-e,b=a.sj.offsetHeight*(1-b),b=b-Math.ceil(a.im.offsetHeight/2),e=a.im,h=a.Ve();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.hl.offsetTop-Math.floor(a.wp.offsetHeight/2)+(255-c)/255*a.hl.offsetHeight;a.wp.style.top=b+"px";Wi(a.sj,c/255);zi(a.hl,"background-color",Uj(360*a.fd[0],a.fd[1],
255));zi(a.ss,"background-color",a.Nl);zi(a.ss,"color",127.5<a.fd[2]?"#000":"#fff");var k;try{k=Mj(a.Jk.value).pj}catch(l){}a.Nl!=k&&(a.Jk.value=a.Nl)}}f.eh=function(a){if(a.target==this.hl||a.target==this.wp){var b=Vi(this.hl);this.EA(b,a);this.sv=H(this.la,"mousemove",ua(this.EA,this,b));this.tv=H(this.la,"mouseup",this.ng,!1,this)}else if(a.target==this.sj||a.target==this.im)b=Vi(this.sj),this.DA(b,a),this.sv=H(this.la,"mousemove",ua(this.DA,this,b)),this.tv=H(this.la,"mouseup",this.ng,!1,this)};
f.EA=function(a,b){b.preventDefault();var c=yi(this.N()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);qt(this,null,null,c)};f.DA=function(a,b){b.preventDefault();var c=yi(this.N()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;qt(this,d,c,null)};f.ng=function(){Vc(this.sv);Vc(this.tv)};
f.JI=function(){/^#?[0-9a-f]{6}$/i.test(this.Jk.value)&&this.hs(this.Jk.value)};function rt(){et.call(this);this.Hf("Color");this.Wi=new nt;this.Wi.k();H(this.Wi,"action",this.Ac.bind(this));Q(this.Wi.a(),this.constructor.CSS.OD);this.xn=R("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":rt.CSS.PD});$h(this.xn,this.Wi.a());R("div",{id:this.constructor.ID_PREFIX+"_ColorPalette_"+B(),"class":rt.CSS.aN});this.a().appendChild(this.xn);this.Bj(this.xn)}w(rt,et);v("xiv.ui.ColorPaletteController",rt);rt.ID_PREFIX="xiv.ui.ColorPaletteController";
rt.CSS_SUFFIX={SM:"colorsquare",PD:"colorpaletteholder",OD:"colorpalette",Lj:"closebutton"};rt.prototype.refresh=function(){var a=Math.floor(255*this[ft].color[0]),b=Math.floor(255*this[ft].color[1]),c=Math.floor(255*this[ft].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.Wi.hs(Qj([a,b,c]))};rt.prototype.Ac=function(a){this.dispatchEvent({type:"D",color:Sj(a.target.Nl).map(function(a){return a/255})})};
rt.prototype.f=function(){rt.d.f.call(this);J(this.Wi);this.Wi.g();delete this.Wi;S(this.xn);delete this.xn};v("xiv.ui.ColorPaletteController.ID_PREFIX",rt.ID_PREFIX);v("xiv.ui.ColorPaletteController.CSS_SUFFIX",rt.CSS_SUFFIX);v("xiv.ui.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ColorPaletteController.prototype.refresh",rt.prototype.refresh);v("xiv.ui.ColorPaletteController.prototype.dispatchComponentEvent",rt.prototype.Ac);
v("xiv.ui.ColorPaletteController.prototype.disposeInternal",rt.prototype.f);function st(){et.call(this);this.Hf("Display All");this.un=R("div",{id:"CheckboxHodler_"+B()});Q(this.un,st.CSS.JD);this.jk=new ct(!0);this.jk.Jb(this.un);this.Bj(this.jk);H(this.jk,"change",this.Av.bind(this))}w(st,et);v("xiv.ui.CheckboxController",st);st.ID_PREFIX="xiv.ui.CheckboxController";st.CSS_SUFFIX={JD:"checkboxholder"};f=st.prototype;f.refresh=function(){this.yd(this.ka.gh())};f.yd=function(a){this.ka.yd(a)};f.Av=function(){this.Ac()};f.Ac=function(){this.dispatchEvent({type:"D",checked:this.jk.gh()})};
f.QG=function(){return this.un};f.f=function(){st.d.f.call(this);S(this.un);delete this.un;J(this.jk);this.jk.g();delete this.jk};v("xiv.ui.CheckboxController.ID_PREFIX",st.ID_PREFIX);v("xiv.ui.CheckboxController.CSS_SUFFIX",st.CSS_SUFFIX);v("xiv.ui.CheckboxController.prototype.setChecked",st.prototype.yd);v("xiv.ui.CheckboxController.prototype.refresh",st.prototype.refresh);v("xiv.ui.CheckboxController.prototype.getCheckboxHolder",st.prototype.QG);
v("xiv.ui.CheckboxController.prototype.dispatchComponentEvent",st.prototype.Ac);v("xiv.ui.CheckboxController.prototype.disposeInternal",st.prototype.f);function tt(){et.call(this);this.Hf("Slider")}w(tt,et);v("xiv.ui.SliderBase",tt);tt.ID_PREFIX="xiv.ui.SliderBase";tt.CSS_SUFFIX={ia:"slider",Kg:"slider-thumb",Cx:"slider-thumb-hover",Eh:"slider-track",sO:"slider-track-hover",$E:"valueinput",bF:"valueinput-display",aF:"valueinput-box"};f=tt.prototype;f.uq=0;f.sa=null;f.s=null;f.Po=function(a){this.uq=a};f.Qo=function(a){this.sa.Qo(a)};f.k=function(a){tt.d.k.call(this,a);this.Ut();this.sa=this.Tt(this.fL.bind(this))};
f.Ut=function(){this.s=new sr;this.Bj(this.s);this.s.Gc(1);this.s.Mb(0);this.s.Fb(100);this.s.C(100);Q(this.s.a(),tt.CSS.ia);Q(this.s.Lf,tt.CSS.Kg);Q(this.s.uh,tt.CSS.Eh);H(this.s,"u",this.Ac.bind(this));this.s.a().style.zIndex=0};f.Tt=function(a){var b=new sp;b.k(this.a());Q(b.a(),tt.CSS.$E);Q(b.Bc,tt.CSS.bF);Q(b.da,tt.CSS.aF);H(b,"h",a);return b};
f.fL=function(a){window.console.log("INPUT",a);window.console.log(this.sa.vd());window.console.log(this.sa.S());window.console.log(this.sa.ha());window.console.log(this.sa.w());a=parseFloat(this.sa.w());a=hd(a,this.s.ha(),this.s.S());this.sa.C(a);this.s.C(a)};f.qI=function(){return this.sa};f.C=function(a){this.s.C(a);this.sa.Lb(!1);this.sa.C(a);this.sa.Lb(!0)};f.Fb=function(a){null!=this.sa&&this.sa.Fb(a);this.s.Fb(a);this.refresh()};f.Gc=function(a){null!=this.sa&&this.sa.Gc(a);this.s.Gc(a);this.refresh()};
f.Mb=function(a){null!=this.sa&&this.sa.Mb(a);this.s.Mb(a);this.refresh()};f.w=function(){return this.s.w()};f.S=function(){return this.s.S()};f.vd=function(){return this.s.vd()};f.ha=function(){return this.s.ha()};f.Ac=function(){var a=this.s.w().toFixed(this.uq),b=this.s.lA();null!=this.sa&&this.sa.C(a);this.dispatchEvent({type:"D",value:a,LJ:this.s.ha(),FJ:this.s.S(),mQ:b})};
f.kp=function(a){null!=a&&(this.s.vd()!=a.vd()&&a.Gc(this.s.vd()),this.s.ha()!=a.ha()&&a.Mb(this.s.ha()),this.s.S()!=a.S()&&a.Fb(this.s.S()),this.s.w()!=a.w()&&a.C(this.s.w()))};f.refresh=function(){var a=this.s.w();this.s instanceof W&&this.s.o();this.s.C(0);this.s.C(a);this.kp(this.sa)};f.f=function(){tt.d.f.call(this);delete this.uq;null!=this.s&&(this.s.g(),delete this.s);null!=this.sa&&(this.sa.g(),delete this.sa)};v("xiv.ui.SliderBase.ID_PREFIX",tt.ID_PREFIX);
v("xiv.ui.SliderBase.CSS_SUFFIX",tt.CSS_SUFFIX);v("xiv.ui.SliderBase.prototype.slider",tt.prototype.s);v("xiv.ui.SliderBase.prototype.displayDecimals",tt.prototype.uq);v("xiv.ui.SliderBase.prototype.valueInput",tt.prototype.sa);v("xiv.ui.SliderBase.prototype.createSlider",tt.prototype.Ut);v("xiv.ui.SliderBase.prototype.createInputBox",tt.prototype.Tt);v("xiv.ui.SliderBase.prototype.dispatchComponentEvent",tt.prototype.Ac);v("xiv.ui.SliderBase.prototype.syncInputToSlider",tt.prototype.kp);
v("xiv.ui.SliderBase.prototype.setDisplayDecimals",tt.prototype.Po);v("xiv.ui.SliderBase.prototype.render",tt.prototype.k);v("xiv.ui.SliderBase.prototype.getValueInput",tt.prototype.qI);v("xiv.ui.SliderBase.prototype.setValue",tt.prototype.C);v("xiv.ui.SliderBase.prototype.setStep",tt.prototype.Gc);v("xiv.ui.SliderBase.prototype.setMaximum",tt.prototype.Fb);v("xiv.ui.SliderBase.prototype.setMinumum",tt.prototype.Mb);v("xiv.ui.SliderBase.prototype.getValue",tt.prototype.w);
v("xiv.ui.SliderBase.prototype.getStep",tt.prototype.vd);v("xiv.ui.SliderBase.prototype.getMaximum",tt.prototype.S);v("xiv.ui.SliderBase.prototype.getMinumum",tt.prototype.ha);v("xiv.ui.SliderBase.prototype.refresh",tt.prototype.refresh);v("xiv.ui.SliderBase.prototype.setDisplaySuffix",tt.prototype.Qo);v("xiv.ui.SliderBase.prototype.disposeInternal",tt.prototype.f);function ut(){tt.call(this);this.Hf("Master Opacity")}w(ut,tt);v("xiv.ui.SliderController",ut);ut.ID_PREFIX="xiv.ui.SliderController";v("xiv.ui.SliderController.ID_PREFIX",ut.ID_PREFIX);function vt(){tt.call(this);this.Hf("TwoThumb")}w(vt,tt);v("xiv.ui.TwoThumbSliderController",vt);vt.ID_PREFIX="xiv.ui.TwoThumbSliderController";vt.CSS_SUFFIX={ia:"slider",Eh:"slider-track",Kg:"slider-thumb",PE:"slider-thumb-extent",dN:"extent-input"};f=vt.prototype;f.Qd=null;f.k=function(a){vt.d.k.call(this,a);this.sa.jC("left");this.Qd=this.Tt(this.jK.bind(this))};f.cH=function(){return this.Qd};
f.Ut=function(){this.s=new Js;this.s.B();var a=this.s.a();a.setAttribute("id","ThresholdSlider_"+B());Q(a,tt.CSS.ia);Q(a,vt.CSS.ia);var b=R("div",{id:"ThwoThumbSlider_track_"+B(),"class":tt.CSS.Eh});a.appendChild(b);Q(b,vt.CSS.Eh);this.Bj(this.s);Q(this.s.ra,tt.CSS.Kg);Q(this.s.ra,vt.CSS.Kg);Q(this.s.ra,vt.CSS.rO);uk(this.s.ra,tt.CSS.Cx);Q(this.s.rc,tt.CSS.Kg);Q(this.s.rc,vt.CSS.Kg);Q(this.s.rc,vt.CSS.PE);uk(this.s.rc,tt.CSS.Cx);H(this.s,"change",this.Ac.bind(this))};
f.refresh=function(){vt.d.refresh.call(this);null!=this.Qd&&this.kp(this.Qd);var a=this.Sd(),b=parseInt(a.min),c=parseInt(a.max);if(null!=a){if(b!=this.s.ha()||c!=this.s.S())this.s.Mb(b),this.s.Fb(c),this.s.Dj(c-b),this.s.C(b),this.s.Gc(1);b=U(this.s.ra).width;a=this.s.S()-this.s.ha();c=U(this.s.a()).width-b;b=c*((this.s.w()-this.s.ha())/a);a=c*(this.s.td()/a);this.s.ra.style.left=b.toString()+"px";this.s.rc.style.left=a.toString()+"px"}};
f.kp=function(a){vt.d.kp.call(this,a);null!=this.Qd&&a==this.Qd&&this.Qd.C(this.s.td()+this.s.w())};f.Dj=function(a,b){this.s.Dj(a,b)};f.Gf=function(a){this.s.Gf(a)};f.td=function(){return this.s.td()};f.jK=function(){var a=parseInt(this.Qd.w());this.s.Gf(a-this.s.w())};f.Ac=function(){var a=this.s.w(),b=this.s.td()+a;this.sa.C(a);this.Qd.C(b);this.dispatchEvent({type:"D",lower:a,upper:b})};
f.f=function(){null!=this.s&&(J(this.s),null==this.s.Na&&(this.s.Na=new kq),this.s.g(),delete this.s);vt.d.f.call(this);null!=this.Qd&&(this.Qd.g(),delete this.Qd)};v("xiv.ui.TwoThumbSliderController.ID_PREFIX",vt.ID_PREFIX);v("xiv.ui.TwoThumbSliderController.CSS_SUFFIX",vt.CSS_SUFFIX);v("xiv.ui.TwoThumbSliderController.prototype.refresh",vt.prototype.refresh);v("xiv.ui.TwoThumbSliderController.prototype.extentInput",vt.prototype.Qd);v("xiv.ui.TwoThumbSliderController.prototype.getExtentInput",vt.prototype.cH);
v("xiv.ui.TwoThumbSliderController.prototype.setValueAndExtent",vt.prototype.Dj);v("xiv.ui.TwoThumbSliderController.prototype.setExtent",vt.prototype.Gf);v("xiv.ui.TwoThumbSliderController.prototype.getExtent",vt.prototype.td);v("xiv.ui.TwoThumbSliderController.prototype.dispatchComponentEvent",vt.prototype.Ac);v("xiv.ui.TwoThumbSliderController.prototype.disposeInternal",vt.prototype.f);function wt(){et.call(this);this.Jj=[]}w(wt,et);v("xiv.ui.MasterController3D",wt);wt.ID_PREFIX="xiv.ui.MasterController3D";wt.CSS_SUFFIX={};wt.prototype.add=function(a){this.Jj.push(a);this.Ay(a,ut);1==this.Jj.length&&$h(document.body,this.a())};wt.prototype.f=function(){wt.d.f.call(this);Jb(this.Jj);delete this.Jj};v("xiv.ui.MasterController3D.ID_PREFIX",wt.ID_PREFIX);v("xiv.ui.MasterController3D.CSS_SUFFIX",wt.CSS_SUFFIX);v("xiv.ui.MasterController3D.CONTROLLERS",{fP:"Visible",SN:"Opacity"});
v("xiv.ui.MasterController3D.prototype.add",wt.prototype.add);v("xiv.ui.MasterController3D.prototype.disposeInternal",wt.prototype.f);function xt(){wt.call(this)}w(xt,wt);v("xiv.ui.AnnotationsController3D",xt);xt.ID_PREFIX="xiv.ui.AnnotationsController3D";xt.CSS_SUFFIX={};xt.prototype.add=function(a){xt.d.add.call(this,a);this.wt(a,st);this.vt(a,rt)};v("xiv.ui.AnnotationsController3D.ID_PREFIX",xt.ID_PREFIX);v("xiv.ui.AnnotationsController3D.CSS_SUFFIX",xt.CSS_SUFFIX);v("xiv.ui.AnnotationsController3D.prototype.add",xt.prototype.add);function yt(){et.call(this);this.Bj(R("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));Q(this.ka,yt.CSS.FE);H(this.ka,"change",this.Ac.bind(this))}w(yt,et);v("xiv.ui.RadioButtonController",yt);yt.ID_PREFIX="xiv.ui.RadioButtonController";yt.CSS_SUFFIX={FE:"radiobutton"};yt.prototype.Ac=function(){this.dispatchEvent({type:"D",checked:this.ka.checked})};yt.prototype.f=function(){yt.d.f.call(this)};v("xiv.ui.RadioButtonController.ID_PREFIX",yt.ID_PREFIX);
v("xiv.ui.RadioButtonController.CSS_SUFFIX",yt.CSS_SUFFIX);v("xiv.ui.RadioButtonController.prototype.dispatchComponentEvent",yt.prototype.Ac);v("xiv.ui.RadioButtonController.prototype.disposeInternal",yt.prototype.f);function zt(){et.call(this);this.il=[]}w(zt,et);v("xiv.ui.MasterController2D",zt);zt.ID_PREFIX="xiv.ui.MasterController2D";zt.CSS_SUFFIX={};zt.prototype.add=function(){};zt.prototype.f=function(){zt.d.f.call(this);Jb(this.il);delete this.il};v("xiv.ui.MasterController2D.ID_PREFIX",zt.ID_PREFIX);v("xiv.ui.MasterController2D.CSS_SUFFIX",zt.CSS_SUFFIX);v("xiv.ui.MasterController2D.prototype.add",zt.prototype.add);v("xiv.ui.MasterController2D.prototype.disposeInternal",zt.prototype.f);function At(){wt.call(this)}w(At,wt);v("xiv.ui.VolumeController3D",At);At.ID_PREFIX="xiv.ui.VolumeController3D";At.CSS_SUFFIX={};f=At.prototype;f.Dy=function(a){var b=this.rd(st,"Volume Rendering",function(b){a.volumeRendering=b.checked});it(a,b);this.Jf.push(b);b.ka.yd(!1)};f.NK=function(a){null!=this.lp&&(this.lp.Sd().lowerThreshold=parseFloat(a.lower),this.lp.Sd().upperThreshold=parseFloat(a.upper))};f.lp=null;
f.By=function(a){var b=this.rd(vt,"Threshold",this.NK.bind(this));b.Bg(a);it(a,b);this.Jf.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1E4,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=1E4,a.upperThreshold=d);var e=b.ka;e.Mb(c);e.Fb(d);e.Dj(d-c);e.C(c);e.Gc(1);e.Gf(d-c);a.upperThreshold=d;a.lowerThreshold=c;e.a().style.top="8px";b.sa.a().style.top="-1px";b.Qd.a().style.top="-1px";b.sa.a().style.left="calc(100% - 112px)";b.sa.Bc.style.textAlign="left";b.sa.da.style.textAlign=
"left";this.lp=b};f.add=function(a){At.d.add.call(this,a);this.Dy(a);this.By(a)};f.o=function(){At.d.o.call(this)};f.f=function(){At.d.f.call(this);this.lp.g()};v("xiv.ui.VolumeController3D.ID_PREFIX",At.ID_PREFIX);v("xiv.ui.VolumeController3D.DEFAULT_THRESHOLD",1E4);v("xiv.ui.VolumeController3D.CSS_SUFFIX",At.CSS_SUFFIX);v("xiv.ui.VolumeController3D.prototype.add_volumeRendering",At.prototype.Dy);v("xiv.ui.VolumeController3D.prototype.add_threshold",At.prototype.By);
v("xiv.ui.VolumeController3D.prototype.add",At.prototype.add);v("xiv.ui.VolumeController3D.prototype.updateStyle",At.prototype.o);v("xiv.ui.VolumeController3D.prototype.disposeInternal",At.prototype.f);function Bt(){wt.call(this)}w(Bt,wt);v("xiv.ui.MeshController3D",Bt);Bt.ID_PREFIX="xiv.ui.MeshController3D";Bt.CSS_SUFFIX={};Bt.prototype.add=function(a){Bt.d.add.call(this,a);this.wt(a,st);this.vt(a,rt)};v("xiv.ui.MeshController3D.ID_PREFIX",Bt.ID_PREFIX);v("xiv.ui.MeshController3D.CSS_SUFFIX",Bt.CSS_SUFFIX);v("xiv.ui.MeshController3D.prototype.add",Bt.prototype.add);v("xiv.ui.MeshController3D.prototype.disposeInternal",Bt.prototype.f);function Ct(){et.call(this)}w(Ct,et);v("xiv.ui.Histogram",Ct);Ct.ID_PREFIX="xiv.ui.Histogram";Ct.CSS_SUFFIX={GD:"canvas",jE:"linecanvas",oE:"max",vE:"min",LD:"clipmax",MD:"clipmin"};Ct.LEVEL_CUTOFF=.999;f=Ct.prototype;f.Ia=null;f.Tc=null;f.pp=null;f.xs=null;f.ur=null;f.dG="rgb(40,40,40)";f.Ec=[null,null];f.eg=[null,null];f.WI="rgb(90,90,90)";f.Km=[0,1E3];f.cd=[0,1E3];f.Lt=!1;f.NC=function(a,b){this.Km[0]=a;this.Km[1]=b};
f.kw=function(a,b){if(this.Lt)this.cd[0]=a,this.cd[1]=b;else{var c=this.kg();this.cd[0]=c.min;this.cd[1]=c.max}};f.MC=function(a,b){this.NC(a,b);this.kw(a,b)};
f.k=function(a){Ct.d.k.call(this,a);this.Bj(this);this.Rh=R("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.GD});this.a().appendChild(this.Rh);this.Yi=this.Rh.getContext("2d");this.Yi.fillStyle=this.dG;this.gi=R("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.jE});this.a().appendChild(this.gi);this.rg=this.gi.getContext("2d");this.Ec[0]=R("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.vE},"-1000");
this.a().appendChild(this.Ec[0]);this.Ec[1]=R("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.oE},"1000");this.a().appendChild(this.Ec[1]);this.eg[0]=R("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.MD},"-1000");this.a().appendChild(this.eg[0]);this.eg[1]=R("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.LD},"1000");this.a().appendChild(this.eg[1])};f.Sd=function(){return Ct.d.Sd.call(this)};
f.Yy=function(a){this.Lt=a;!1==a&&this.kw(null,null)};function Dt(a){if(null==a.Ia){var b=a.Sd(),c=b.max;E(b.image,function(a){E(a,function(a){E(a,function(a){if(null==this.Ia){this.Ia=[];for(var b=0,b=0;b<=c;b++)this.Ia.push(0)}this.Ia[parseInt(a)]++;this.xs++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Ia){var d,e=0;a.pp=Qb(a.Ia.length);null==a.Tc&&(a.Tc=[],a.ur=0,E(a.Ia,function(a,b){d=a/this.xs;this.Tc.push(d);e+=d;this.pp[b]=e;this.ur=Math.max(this.ur,d)}.bind(a)))}}}
f.yz=function(){if(null!=this.Sd()){var a=U(this.Rh),b=a.width,a=a.height;if(0!=b&&0!=a&&(this.Rh.height=a,this.Rh.width=b,this.gi.height=a,this.gi.width=b,Dt(this),null!=this.Ia)){for(var c=0,d=this.Km[0];d<this.Km[1]+1;d++)this.Tc[d]>c&&(c=this.Tc[d]);for(var e=[],d=this.cd[0];d<this.cd[1]+1;d++)e.push(this.Tc[d]/c);for(var b=(b-0)/(this.cd[1]-this.cd[0]),c=1>b?1:Math.round(b),h=0,k=0,l=e.length,d=0;d<l;d++)h=Math.round(a*e[d]),k=Math.round(d*b),isNaN(h)||null==h||(this.Yi.fillStyle=this.WI,this.Yi.fillRect(c*
k,a,c,-h))}}};f.yA=function(){var a=Math.round(.1*this.Tc.length),b=Math.round(.9*this.Tc.length),c,d=0;for(c=1;c<a;c++)this.Tc[c]>d&&(d=c);var e=this.Tc[d],h=d;for(c=d+1;c<a;c++)this.Tc[c]<e&&(h=c,e=this.Tc[c]);d=this.Tc[a];e=0;for(c=a+1;c<b;c++)this.Tc[c]<d&&(e=c,d=this.Tc[c]);return[h,e]};f.dA=function(a){if(null!=this.Ia)for(var b=0,c=0,d=this.Ia.length;c<d;c++)if(b+=this.Ia[c],b/this.xs>=a)return c};
f.zz=function(){if(null!=this.Sd()){var a=U(this.gi),b=a.width,a=a.height;this.gi.width=b;var c=this.kg(),d=(b-0)/(this.cd[1]-this.cd[0]),e=-1*this.cd[0]*d,h=c.jh*d+e,c=c.qj*d+e,k=this.cd[0]*d+e,d=this.cd[1]*d+e,l=(a-0)/(c-h),e=-1*h*l,n=k*l+e,e=d*l+e;this.Ec[0].style.width="auto";this.Ec[1].style.width="auto";var p=new qk(this.a()),l=p.left,p=p.right;this.Ec[0].style.left=h.toString()+"px";h=vk(this.Ec[0],l,p);this.Ec[1].style.left=c.toString()+"px";var m=vk(this.Ec[1],l,p);h.right+5>m.left&&(this.Ec[0].innerHTML+=
", "+this.Ec[1].innerHTML,this.Ec[1].innerHTML="",vk(this.Ec[0],l,p));h=new qk(this.Rh);this.eg[0].style.left=h.left.toString()+"px";this.eg[1].style.left=(h.right-U(this.eg[1]).width).toString()+"px";this.rg.beginPath();this.rg.strokeStyle="black";this.rg.moveTo(k,a-n);this.rg.lineTo(d,a-e);this.rg.lineWidth=.5;this.rg.stroke();0<c&&c<b&&(this.rg.moveTo(c,a),this.rg.lineTo(c,a-15),this.rg.lineWidth=.5,this.rg.stroke())}};
f.refresh=function(){if(null!=this.Sd()){var a=this.kg();this.Ec[0].innerHTML="Min: "+a.jh;this.Ec[1].innerHTML="Max: "+a.qj;this.eg[0].innerHTML=this.cd[0];this.eg[1].innerHTML=this.cd[1]}this.yz();this.zz()};
f.f=function(){Ct.d.f.call(this);this.Ec=[null,null];delete this.Ec;this.eg=[null,null];delete this.eg;null!=this.Rh&&(S(this.Rh),delete this.Rh);null!=this.gi&&(S(this.gi),delete this.gi);null!=this.Ia&&(Jb(this.Ia),delete this.Ia);null!=this.Tc&&(Jb(this.Tc),delete this.Tc);null!=this.pp&&(Jb(this.pp),delete this.pp);delete this.xs;delete this.ur;delete this.Yi;delete this.rg;Jb(this.Km);delete this.Km;Jb(this.cd);delete this.cd;delete this.Lt};v("xiv.ui.Histogram.EventType",{});
v("xiv.ui.Histogram.ID_PREFIX",Ct.ID_PREFIX);v("xiv.ui.Histogram.CSS_SUFFIX",Ct.CSS_SUFFIX);v("xiv.ui.Histogram.LEVEL_CUTOFF",Ct.LEVEL_CUTOFF);v("xiv.ui.Histogram.prototype.render",Ct.prototype.k);v("xiv.ui.Histogram.prototype.draw",Ct.prototype.yz);v("xiv.ui.Histogram.prototype.drawLine",Ct.prototype.zz);v("xiv.ui.Histogram.prototype.clipToZoom",Ct.prototype.Yy);v("xiv.ui.Histogram.prototype.setZoomRange",Ct.prototype.NC);v("xiv.ui.Histogram.prototype.setClipRange",Ct.prototype.kw);
v("xiv.ui.Histogram.prototype.setZoomAndClipRange",Ct.prototype.MC);v("xiv.ui.Histogram.prototype.getLevelByPixelThreshold",Ct.prototype.dA);v("xiv.ui.Histogram.prototype.getVisiblePixelRange",Ct.prototype.yA);v("xiv.ui.Histogram.prototype.refresh",Ct.prototype.refresh);v("xiv.ui.Histogram.prototype.disposeInternal",Ct.prototype.f);function Et(){et.call(this);this.Ui=new bp("Reset");this.Bj(this.Ui);Q(this.Ui.a(),"xiv-ui-buttoncontroller-element");H(this.Ui.a(),"click",this.Ac.bind(this))}w(Et,et);v("xiv.ui.ButtonController",Et);Et.ID_PREFIX="xiv.ui.ButtonController";Et.CSS_SUFFIX={};Et.prototype.Ac=function(){this.dispatchEvent({type:"D",checked:this.Ui.gh()})};Et.prototype.f=function(){Et.d.f.call(this);J(this.Ui);J(this.Ui.a());this.Ui.g();delete this.Ui};v("xiv.ui.ButtonController.ID_PREFIX",Et.ID_PREFIX);
v("xiv.ui.ButtonController.CSS_SUFFIX",Et.CSS_SUFFIX);v("xiv.ui.ButtonController.prototype.dispatchComponentEvent",Et.prototype.Ac);v("xiv.ui.ButtonController.prototype.disposeInternal",Et.prototype.f);function Ft(){et.call(this);this.Jj=[]}w(Ft,et);v("xiv.ui.MasterController",Ft);Ft.ID_PREFIX="xiv.ui.MasterController";Ft.CSS_SUFFIX={};Ft.prototype.add=function(a){this.Jj.push(a)};Ft.prototype.f=function(){Ft.d.f.call(this);Jb(this.Jj);delete this.Jj};v("xiv.ui.MasterController.ID_PREFIX",Ft.ID_PREFIX);v("xiv.ui.MasterController.CSS_SUFFIX",Ft.CSS_SUFFIX);v("xiv.ui.MasterController.CONTROLLERS",{});v("xiv.ui.MasterController.prototype.add",Ft.prototype.add);
v("xiv.ui.MasterController.prototype.disposeInternal",Ft.prototype.f);function Gt(){Ft.call(this);this.n={min:null,max:null,Ti:null,Vg:null,xf:null,Vb:null,reset:null,CQ:null,me:null,dp:[]}}w(Gt,Ft);v("xiv.ui.LevelsController",Gt);Gt.ID_PREFIX="xiv.ui.LevelsController";Gt.CSS_SUFFIX={};f=Gt.prototype;f.Oa=null;f.VG=function(){return this.n};function Ht(a){var b=a.n.xf.yA();a.n.Vb.Dj(b[0],b[1]-b[0])}
f.add=function(a){Gt.d.add.call(this,a);this.Oa=a;a=this.rd(vt,"Zoom Range",this.mK.bind(this));a.Bg(this.Oa);it(this.Oa,a);this.Ye.push(a);a.sa.da.style.textAlign="left";a.sa.Bc.style.textAlign="left";this.n.Vb=a;It(this);Jt(this);Kt(this);this.n.min=this.rd(ut,"Minimum",this.sK.bind(this));this.n.min.Bg(this.Oa);it(this.Oa,this.n.min);this.Ye.push(this.n.min);this.n.min.Fb(1E3);this.n.min.Mb(0);this.n.min.C(0);this.n.min.Gc(1);this.n.min.Po(0);this.n.min.Oo(this.Oa.min);this.n.min.refresh();a=this.rd(ut,
"Maximum",this.qK.bind(this));a.Bg(this.Oa);it(this.Oa,a);this.Ye.push(a);a.Fb(1E3);a.Mb(0);a.C(1E3);a.Gc(1);a.Po(0);a.Oo(this.Oa.max);a.refresh();this.n.max=a;a=this.rd(ut,"Brightness",this.bK.bind(this));a.Bg(this.Oa);it(this.Oa,a);this.Ye.push(a);a.Fb(100);a.Mb(0);a.C(0);a.Gc(1);a.Po(0);a.refresh();this.n.Ti=a;a=this.rd(ut,"Contrast",this.eK.bind(this));a.Bg(this.Oa);it(this.Oa,a);this.Ye.push(a);a.Fb(100);a.Mb(0);a.C(0);a.Gc(1);a.Po(0);a.refresh();this.n.Vg=a;a=this.rd(Et,null,this.JK.bind(this));
it(this.Oa,a);this.Ye.push(a);a.Bg(this.Oa);this.n.reset=a;this.n.dp.push(this.n.min);this.n.dp.push(this.n.max);this.n.dp.push(this.n.Ti);this.n.dp.push(this.n.Vg);Lt(this)};
function Lt(a){E(a.n.dp,function(a){Q(a.tb,"xiv-ui-levelscontroller-sliderlabel");Q(a.a(),"xiv-ui-levelscontroller-slidercontroller");Q(a.ka.a(),"xiv-ui-levelscontroller-slider");Q(a.sa.a(),"xiv-ui-levelscontroller-slidervalue");a.ka.o()}.bind(a));Q(a.n.Vb.tb,"xiv-ui-levelscontroller-twothumbsliderlabel");Q(a.n.Vb.tb,"xiv-ui-levelscontroller-sliderlabel");Q(a.n.Vb.a(),"xiv-ui-levelscontroller-twothumbslidercontroller");Q(a.n.Vb.ka.a(),"xiv-ui-levelscontroller-twothumbslider");Q(a.n.Vb.sa.a(),"xiv-ui-levelscontroller-twothumbslidervalue");
Q(a.n.Vb.Qd.a(),"xiv-ui-levelscontroller-twothumbsliderextent")}f.JK=function(){this.Oa.windowLow=0;E([this.n.max,this.n.min],function(a){a.C(a.defaultValue);a.refresh();this.n.me.yd(!1)}.bind(this));Ht(this);this.n.xf.update()};
function Kt(a){a.n.me=a.rd(st,"Clip X-Axis to Zoom");it(a.Oa,a.n.me);a.Ye.push(a.n.me);a.n.me.ka.a().style.left="calc(100% - 15px)";a.n.me.tb.style.fontSize="10px";H(a.n.me,"D",function(a){null!=this.n.xf&&null!=this.n.Vb&&(this.n.xf.Yy("true"==a.checked.toString()),this.n.Vb.refresh())}.bind(a))}function Jt(a){var b=a.rd(Ct,null,function(){}.bind(a));b.Bg(a.Oa);it(a.Oa,b);a.Ye.push(b);b.refresh();a.n.xf=b}
f.mK=function(){null!=this.n.xf&&(this.n.xf.MC(this.n.Vb.w(),this.n.Vb.td()+this.n.Vb.w()),this.n.xf.refresh())};function Mt(a){var b=a.n.min.kg();E([a.n.max,a.n.min],function(a,d){a.Fb(b.max);a.Mb(b.min);a.C(0==d?b.max:b.min)});It(a);a.n.xf.refresh()}function It(a){if(null!=a.n.min){var b=a.n.min.kg();a.n.Vb.Mb(b.min);a.n.Vb.Fb(b.max);a.n.Vb.C(b.min);a.n.Vb.Gc(1);a.n.Vb.Gf(b.max-b.min)}}
f.sK=function(){null!=this.n.max&&null!=this.n.min&&(this.n.min.ha()!=this.Oa.min&&Mt(this),this.Oa.windowLow=this.n.min.w(),Nt(this,this.n.min))};f.qK=function(){null!=this.n.max&&null!=this.n.min&&(this.n.max.S()!=this.Oa.max&&Infinity!=this.Oa.max&&Mt(this),this.Oa.windowHigh=this.n.max.w(),Nt(this,this.n.max))};
function Nt(a,b){switch(b){case a.n.min:a.n.min.w()>=a.n.max.w()&&a.n.max.C(a.n.min.w()+1);case a.n.max:a.n.max.w()<=a.n.min.w()&&a.n.min.C(a.n.max.w()-1);var c=a.n.Ti.ka;c.ti(!0);var d=a.n.min.kg(),d=Math.round((1-(d.jh+(d.qj-d.jh)/2-d.min)/(d.max-d.min))*c.S());a.n.Ti.C(d);c.ti(!1);c=a.n.Vg.ka;c.ti(!0);var d=a.n.min.kg(),e=a.n.Vg.S()/2,h=(d.max-d.min)/(d.qj-d.jh)*e;h>e&&(h=a.n.Vg.S()-(d.qj-d.jh)/(d.max-d.min)*e);d=Math.round(h);a.n.Vg.C(d);c.ti(!1);case a.n.Ti:case a.n.Vg:c=a.n.min.ka,d=a.n.max.ka,
e=a.n.min.kg(),c.ti(!0),d.ti(!0),a.n.min.C(e.jh,!0),a.n.max.C(e.qj,!0),d.ti(!1),c.ti(!1)}a.n.xf.refresh()}f.refresh=function(){null!=this.n.me&&this.n.me.refresh()};f.bK=function(){if(null!=this.n.Ti){var a=this.n.min.kg(),b=this.n.Ti.ka,b=a.min+(a.max-a.min)*((b.S()-b.w())/b.S()),c=a.qj-a.jh,a=Math.round(b-c/2),b=Math.round(b+c/2);Ot(this,a,b);Nt(this,this.n.Ti)}};
f.eK=function(){if(null!=this.n.Vg){var a=this.n.min.kg(),b=this.n.Vg.ka,c,d=a.jh+(a.qj-a.jh)/2,a=a.max-a.min;c=b.S()/2;c=b.w()<=c?b.w()/c:c/(b.S()-b.w());0<c&&(b=Math.round(d-.5*a/c),d=Math.round(d+.5*a/c),Ot(this,b,d));Nt(this,this.n.Vg)}};function Ot(a,b,c){b==c&&(b=c-1);a.Oa.windowLow=b;a.Oa.windowHigh=c}f.f=function(){D(this.n);delete this.Oa;Gt.d.f.call(this)};v("xiv.ui.LevelsController.ID_PREFIX",Gt.ID_PREFIX);v("xiv.ui.LevelsController.CSS_SUFFIX",Gt.CSS_SUFFIX);
v("xiv.ui.LevelsController.prototype.add",Gt.prototype.add);v("xiv.ui.LevelsController.prototype.getControllerSet",Gt.prototype.VG);v("xiv.ui.LevelsController.prototype.disposeInternal",Gt.prototype.f);function Pt(){Ft.call(this)}w(Pt,Ft);v("xiv.ui.VolumeController",Pt);Pt.ID_PREFIX="xiv.ui.VolumeController";Pt.CSS_SUFFIX={};Pt.prototype.add=function(a){Pt.d.add.call(this,a);this.Cy(a);this.zy(a)};Pt.prototype.Cy=function(a){var b=this.rd(yt,"Visible",function(){});it(a,b);this.Jf.push(b);b.Bg(a);b.ka.checked=a[yq]||!1};Pt.prototype.zy=function(a){var b=this.rd(st,"Show Label Map");it(a,b);this.Jf.push(b);b.Bg(a);b.ka.yd(!0)};Pt.prototype.f=function(){Pt.d.f.call(this)};
v("xiv.ui.VolumeController.ID_PREFIX",Pt.ID_PREFIX);v("xiv.ui.VolumeController.CSS_SUFFIX",Pt.CSS_SUFFIX);v("xiv.ui.VolumeController.prototype.add",Pt.prototype.add);v("xiv.ui.VolumeController.prototype.add_visibleRadio",Pt.prototype.Cy);v("xiv.ui.VolumeController.prototype.add_labelMapToggle",Pt.prototype.zy);v("xiv.ui.VolumeController.prototype.disposeInternal",Pt.prototype.f);function Qt(){W.call(this);C(Rt(),function(a,b){this[b]=null})}w(Qt,W);v("xiv.ui.XtkControllerTree",Qt);function St(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.XtkControllerTree.ControlSet",St);Qt.ID_PREFIX="xiv.ui.XtkControllerTree";Qt.CSS_SUFFIX={};function Rt(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=Qt.prototype;f.vx=function(){};f.CD=function(){return this.bh([this.yi])};f.vx=function(){return this.bh([this.Rf])};f.jF=function(){return this.bh([this.Tj])};
f.qH=function(){};f.bh=function(a){var b=[];E(g(a)?a:[a],function(a){null!=a&&(b=Mb(b,a.Iz()))});return b};f.BH=function(){return this.Rf};f.refresh=function(){var a=this.bh([this.Rf,this.Uj,this.Tj,this.Oj,this.yi,this.Js]);E(a,function(a){a.refresh()}.bind(this))};
f.Qt=function(a,b){a instanceof K?(null==this.Uj&&(this.Rf=new Gt,this.Uj=new Pt,this.Tj=new At),this.Rf.add(a,b),this.Uj.add(a,b),this.Tj.add(a,b)):a instanceof dt?(null==this.Oj&&(this.Oj=new Bt),this.Oj.add(a,b)):a instanceof bq&&(null==this.yi&&(this.yi=new xt),this.yi.add(a));this.volumes=new St(null,this.bh([this.Tj]),this.bh([this.Uj]));this.annotations=new St(null,this.bh([this.yi]));this.meshes=new St(null,this.bh([this.Oj]));this.levels=new St(null,null,this.bh([this.Rf]))};
f.f=function(){Qt.d.f.call(this);null!=this.Rf&&(this.Rf.g(),delete this.Rf);null!=this.Uj&&(this.Uj.g(),delete this.Uj);null!=this.Hx&&(this.Hx.g(),delete this.Hx);null!=this.Tj&&(this.Tj.g(),delete this.Tj);null!=this.Oj&&(this.Oj.g(),delete this.Oj);null!=this.yi&&(this.yi.g(),delete this.yi);null!=this.Js&&(this.Js.g(),delete this.Js)};v("xiv.ui.XtkControllerTree.ControlSet",St);v("xiv.ui.XtkControllerTree.ID_PREFIX",Qt.ID_PREFIX);v("xiv.ui.XtkControllerTree.CSS_SUFFIX",Qt.CSS_SUFFIX);
v("xiv.ui.XtkControllerTree.getEmptyPropertiesObject",Rt);v("xiv.ui.XtkControllerTree.prototype.Levels",Qt.prototype.vx);v("xiv.ui.XtkControllerTree.prototype.Annotations",Qt.prototype.CD);v("xiv.ui.XtkControllerTree.prototype.Volumes3D",Qt.prototype.jF);v("xiv.ui.XtkControllerTree.prototype.getHistograms",Qt.prototype.qH);v("xiv.ui.XtkControllerTree.prototype.getControllers",Qt.prototype.bh);v("xiv.ui.XtkControllerTree.prototype.getLevelsController",Qt.prototype.BH);
v("xiv.ui.XtkControllerTree.prototype.refresh",Qt.prototype.refresh);v("xiv.ui.XtkControllerTree.prototype.createControllers",Qt.prototype.Qt);v("xiv.ui.XtkControllerTree.prototype.disposeInternal",Qt.prototype.f);function Tt(a){Ds.call(this);this.orientation=a;this.ol=zq;this.rq=null}w(Tt,Ds);v("xiv.vis.XtkPlane2D",Tt);f=Tt.prototype;f.oA=function(){return this.Da.oA()};f.pA=function(){return this.Da.pA()};f.bm=function(){return null!=this.Da?this.Da.bm():null};f.$k=function(a){Tt.d.$k.call(this,a)};f.g=function(){Tt.d.g.call(this);delete this.rq;delete this.WP;delete this.XP};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",Tt.prototype.oA);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",Tt.prototype.pA);v("xiv.vis.XtkPlane2D.prototype.getVolume",Tt.prototype.bm);v("xiv.vis.XtkPlane2D.prototype.setContainer",Tt.prototype.$k);v("xiv.vis.XtkPlane2D.prototype.dispose",Tt.prototype.g);function Ut(){$c.call(this);this.jf=null;this.oc={volumes:[],meshes:[],fibers:[],spheres:[]};this.zi=new Tt("X");this.Qj=new Tt("Y");this.Rj=new Tt("Z");this.jc=new Is;this.wc={};this.wc[this.zi.Ub()]=this.zi;this.wc[this.Qj.Ub()]=this.Qj;this.wc[this.Rj.Ub()]=this.Rj;this.wc[this.jc.Ub()]=this.jc;this.kh=null;this.ls(this.jc);Vt(this)}w(Ut,xq);v("xiv.vis.XtkEngine",Ut);Ut.ID_PREFIX="xiv.vis.XtkEngine";Ut.SLICE_TO_RAS_KEY="sliceToRAS"+B();Ut.HAS_LABEL_MAP_KEY="hasLabelMap";f=Ut.prototype;f.Ur=!1;
f.ru=function(){return this.oc.volumes};f.qu=function(){return this.oc.meshes};f.pu=function(){return this.oc.spheres};function Wt(a,b){null!=b.de.pn&&E(b.de.pn,function(a){this.oc.spheres.push(Xt(a))}.bind(a))}f.yC=function(a,b){switch(a.toLowerCase()){case "x":this.zi.Lb(b);break;case "y":this.Qj.Lb(b);break;case "z":this.Rj.Lb(b);break;case "v":this.jc.Lb(b)}};f.ls=function(a){this.kh=a;this.kh.ta();this.BL=H(this.kh,"k",this.Pv.bind(this))};f.WH=function(){return this.kh};f.Sv=function(a){this.dispatchEvent(a)};
function Vt(a){C(a.wc,function(a){H(a,"E",this.Sv.bind(this));H(a,"G",function(){}.bind(this))}.bind(a))}f.WB=function(){this.jf.refresh()};f.WG=function(){return this.jf};
function Yt(a,b){null!=a.jf&&(a.jf.g(),a.jf=null);a.jf=new Qt;null!=(b.de&&null!=b.de.pn)&&(Wt(a,b),E(a.oc.spheres,function(a){this.jf.Qt(a)}.bind(a)));var c;E(b.Fd,function(a){c=a.lg();if(null!=c&&(currXObj=Zt(c,a.Xh),renderProps=a.de,currXObj))if(this.jf.Qt(currXObj,renderProps),currXObj instanceof K){"scans"==b.cg.toLowerCase()&&(window.console.log("Turning off reslicing for scan"),currXObj.reslicing=!1);a=currXObj;var e=renderProps;null!=e||(e={origin:[0,0,0],ys:1E4,sr:-1E4,ir:!0,bx:!1});a.origin=
e.origin;a.upperThreshold=e.ys;a.lowerThreshold=e.sr;a.volumeRendering=e.bx;a[yq]=e.ir;a[Ut.SLICE_TO_RAS_KEY]=e.zw;null!=e.YA?(a.labelmap.file=e.YA,a.labelmap.colortable.file=e.tJ,a[Ut.HAS_LABEL_MAP_KEY]=!0):a[Ut.HAS_LABEL_MAP_KEY]=!1;this.oc.volumes.push(currXObj)}else currXObj instanceof dt?(a=currXObj,e=renderProps,a.color=e.color||[.5,.5,.5],a.opacity=e.opacity||1,this.oc.meshes.push(currXObj)):currXObj instanceof Ks&&(Ut.tQ(currXObj,renderProps),this.oc.fibers.push(currXObj))}.bind(a))}
f.YB=function(){this.ls(this.jc);this.jc.ta();C(this.oc,function(a,b){"volumes"!==b&&E(a,function(a){this.jc.add(a)}.bind(this))}.bind(this));Tc(this.jc.Ta(),"l",function(){this.Ir();this.zi.k()}.bind(this));this.jc.k()};f.XB=function(a){var b=null!=a?a:this.Bk();C(this.wc,function(a,d){"v"!=d.toLowerCase()&&(a.ta(),a.add(b),a.k())})};function $t(a){var b=a.Bk();C(a.oc.volumes,function(a){a!==b&&(a.visible=!1)})}
f.ZB=function(){var a=this.Bk(),b=[],c=[],d=["x","y","z","v"];C(this.oc,function(a,d){currArr="volumes"==d?c:b;E(a,function(a){currArr.push(a)})}.bind(this));E(b,function(a){this.jc.add(a)}.bind(this));E(c,function(b){b!==a&&(b.visible=!0,this.jc.add(b))}.bind(this));this.kh.Ta().onShowtime=function(){Lb(d,this.kh.Ub().toLowerCase());au(this,a)}.bind(this);this.kh.add(a);this.kh.k()};
f.k=function(a){this.Ur=!1;Yt(this,a);var b=a.de;null!=b?(null!=b.backgroundColor&&this.jc.ds(a.de.backgroundColor),null!=b.iq&&this.jc.es(a.de.iq)):(this.jc.ds(),this.jc.es());if(0<this.oc.volumes.length){a=this.wc;b="";for(b in a)if(a[b].isEnabled()){this.ls(a[b]);break}this.ZB()}else this.jc.isEnabled()&&this.YB()};function au(a,b){var c=nb(a.wc)-1;C(a.wc,function(a){a!=this.kh&&a.isEnabled()&&(a.add(b),Tc(a.Ta(),"l",function(){c--;0==c&&this.Ir()}.bind(this)),a.k())}.bind(a))}
f.Bk=function(){if(0!=this.oc.volumes.length){for(var a=0,b=this.oc.volumes.length;a<b;a++){var c=this.oc.volumes[a];if(c[yq])return c}this.oc.volumes[0][yq]=!0;return this.oc.volumes[0]}};f.o=function(){C(this.wc,function(a){a.o()}.bind(this))};f.Pv=function(a){this.Ur||this.dispatchEvent({type:"k",value:a.value})};f.Ir=function(a){$t(this);Vc(this.BL);this.Ur=!0;this.dispatchEvent({type:"l",value:null!=a?a.value:1})};f.PH=function(){return this.zi};f.QH=function(){return this.Qj};f.RH=function(){return this.Rj};
f.OH=function(){return this.jc};f.Lq=function(a){return this.wc[a]};f.SH=function(){return this.wc};var bu=["nrrd","nii","nii.gz","mgh","mgz"],cu=["dicom","dcm","ima"],du=["hdr","img"],eu=["nii","nii.gz"],fu=["jpeg","jpg","gif","png","img"],gu="stl vtk obj fsm inflated smoothwm pial orig".split(" "),hu=["trk"];function iu(a){var b=void 0;ju(a)?b=new dt:ku(a)||lu(a)||mu(a)?b=new K:nu(a)&&(b=new Ks);return b}
function Xt(a){var b=new bq;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function ku(a){return-1<bu.indexOf(a)?!0:!1}function mu(a){return-1<fu.indexOf(a)?!0:!1}function lu(a){return-1<cu.indexOf(a)?!0:!1}function ju(a){return-1<gu.indexOf(a)?!0:!1}function nu(a){return-1<hu.indexOf(a)?!0:!1}
function Zt(a,b){function c(a){var b=vj(a);a=uj(a);return b+"/"+a}var d=g(a)?wj(a[0]):wj(a),d=iu(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];E(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=pb(b),d.filedata=ob(b)):d.file=a;return d}
Ut.prototype.g=function(){Ut.d.g.call(this);null!=this.jf&&(this.jf.g(),delete this.jf);J(this.zi);J(this.Qj);J(this.Rj);J(this.jc);delete this.kh;D(this.wc);delete this.wc;this.zi.g();delete this.zi;this.Qj.g();delete this.Qj;this.Rj.g();delete this.Rj;this.jc.g();delete this.jc;C(this.oc,function(a){C(a,function(a){J(a);D(a)})});D(this.oc);delete this.oc;delete this.Ur};v("xiv.vis.XtkEngine.EventType",{qO:"E",oO:"F",pO:"G",ERROR:"H",sP:"I",yN:"J",zN:"K"});v("xiv.vis.XtkEngine.ID_PREFIX",Ut.ID_PREFIX);
v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",Ut.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",Ut.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",ku);v("xiv.vis.XtkEngine.isImage",mu);v("xiv.vis.XtkEngine.isDicom",lu);v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<du.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<eu.indexOf(a)?!0:!1});
v("xiv.vis.XtkEngine.isMesh",ju);v("xiv.vis.XtkEngine.isFiber",nu);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",Ut.prototype.qu);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",Ut.prototype.pu);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",Ut.prototype.ru);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",Ut.prototype.yC);v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",Ut.prototype.ls);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",Ut.prototype.WH);
v("xiv.vis.XtkEngine.prototype.refreshControllers",Ut.prototype.WB);v("xiv.vis.XtkEngine.prototype.getControllerTree",Ut.prototype.WG);v("xiv.vis.XtkEngine.prototype.render3dPlane",Ut.prototype.YB);v("xiv.vis.XtkEngine.prototype.render2D",Ut.prototype.XB);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",Ut.prototype.ZB);v("xiv.vis.XtkEngine.prototype.render",Ut.prototype.k);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",Ut.prototype.Bk);v("xiv.vis.XtkEngine.prototype.updateStyle",Ut.prototype.o);
v("xiv.vis.XtkEngine.prototype.getPlaneX",Ut.prototype.PH);v("xiv.vis.XtkEngine.prototype.getPlaneY",Ut.prototype.QH);v("xiv.vis.XtkEngine.prototype.getPlaneZ",Ut.prototype.RH);v("xiv.vis.XtkEngine.prototype.getPlaneV",Ut.prototype.OH);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",Ut.prototype.Lq);v("xiv.vis.XtkEngine.prototype.getPlanes",Ut.prototype.SH);v("xiv.vis.XtkEngine.prototype.dispose",Ut.prototype.g);function ti(){W.call(this);this.bb=R("img",{id:"nrg.ui.Thumbnail_"+B()});$h(this.a(),this.bb);this.cf=R("div",{id:"DisplayText_"+B()});$h(this.a(),this.cf);this.cs=R("div",{id:"selectedIndicator_"+B()});Q(this.cs,ti.CSS.OE);$h(this.a(),this.cs);this.nw();this.a().className=ti.Vc;Q(this.a(),ti.CSS.YD);this.bb.className=ti.CSS.Ah;this.cf.className=ti.CSS.Sj}w(ti,W);v("nrg.ui.Thumbnail",ti);ti.ID_PREFIX="nrg.ui.Thumbnail";
ti.CSS_SUFFIX={Ah:"image",Sj:"text",mO:"selected",wE:"mouseover",oN:"image-mouseover",EO:"text-mouseover",rx:"highlight",Kj:"active",sx:"image-active",Dx:"text-active",OE:"selectindicator",Bx:"selectindicator-active",YD:"hoverable"};f=ti.prototype;f.Ry=null;f.er=!1;f.rH=function(){return this.bb};f.gC=function(a){this.Ry=a;this.bb.onerror=function(){this.bb.onerror="";this.bb.src=this.Ry}.bind(this)};f.hI=function(){return this.cf};
f.Au=function(){for(var a=this.cf;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};f.ew=function(a,b){null!=a||(a=500);var c=0;null==this.O&&(this.O=new Wf);this.O.setInterval(50);this.O.addEventListener(Xf,function(){c+=50;this.a().style.opacity=c/50%2;c>=a&&(this.O.stop(),this.O.g(),delete this.O,this.a().style.opacity=1,null!=b&&b())}.bind(this));this.O.start()};f.fh=function(){return this.er};f.ow=function(a){this.bb.src=a;this.bb.className=ti.CSS.Ah};
f.Zo=function(a){this.cf.innerHTML=a};f.setActive=function(a,b){var c=this.a();(this.er=a)?(b&&Q(c,ti.CSS.rx),Q(c,ti.CSS.Kj),Q(this.cf,ti.CSS.Dx),Q(this.bb,ti.CSS.sx),Q(this.cs,ti.CSS.Bx)):(Ch(c,ti.CSS.rx),Ch(c,ti.CSS.Kj),Ch(this.cf,ti.CSS.Dx),Ch(this.bb,ti.CSS.sx),Ch(this.cs,ti.CSS.Bx))};f.o=function(a){a&&this.a()&&sk(this.a(),a)};f.nw=function(){Wc(this.a(),"L")&&Vc("L");H(this.a(),"click",function(){this.dispatchEvent({type:"L"})}.bind(this))};
f.f=function(){ti.d.f.call(this);J(this);J(this.a());S(this.bb);delete this.bb;S(this.cf);delete this.cf;delete this.CP;delete this.er};v("nrg.ui.Thumbnail.EventType",{PM:"L"});v("nrg.ui.Thumbnail.ID_PREFIX",ti.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",ti.CSS_SUFFIX);v("nrg.ui.Thumbnail.prototype.getImage",ti.prototype.rH);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",ti.prototype.gC);v("nrg.ui.Thumbnail.prototype.getTextElement",ti.prototype.hI);v("nrg.ui.Thumbnail.prototype.getText",ti.prototype.Au);
v("nrg.ui.Thumbnail.prototype.isActive",ti.prototype.fh);v("nrg.ui.Thumbnail.prototype.setImage",ti.prototype.ow);v("nrg.ui.Thumbnail.prototype.setText",ti.prototype.Zo);v("nrg.ui.Thumbnail.prototype.setActive",ti.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",ti.prototype.o);v("nrg.ui.Thumbnail.prototype.pulse",ti.prototype.ew);v("nrg.ui.Thumbnail.prototype.disposeInternal",ti.prototype.f);function ou(){W.call(this)}w(ou,W);v("nrg.ui.ScrollableContainer",ou);ou.ID_PREFIX="nrg.ui.ScrollableContainer";ou.CSS_SUFFIX={NE:"scrollarea",ia:"slider",Kg:"slider-thumb",Eh:"slider-track",QE:"slider-thumb-hovered",tO:"slider-track-hovered"};f=ou.prototype;f.O=null;
f.k=function(a){ou.d.k.call(this,a);null==this.zg&&(this.zg=R("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":ou.CSS.NE}),this.a().appendChild(this.zg));this.eb=new sr("vertical");this.eb.k(this.a());H(this.eb,"u",this.xj.bind(this));H(this.eb,"s",this.HB.bind(this));H(this.eb,"t",this.GB.bind(this));pu(this);Q(this.eb.a(),ou.CSS.ia);Q(this.eb.Lf,ou.CSS.Kg);Q(this.eb.uh,ou.CSS.Eh);this.o();this.Sc();this.O=new Wf};f.qf=function(a){this.ma||this.k();$h(this.zg,a);this.Sc()};f.a=function(){return this.q};
f.eI=function(){return this.eb};f.aI=function(){return this.zg};f.o=function(a){a&&sk(this.q,a)};
f.Sc=function(){var a=U(this.q).height,b=U(this.zg).height,c=[this.eb.ha(),this.eb.S()],d=[0,b-a],e=this.eb.Lf,h=this.eb.a();a<b?("hidden"==h.style.visibility&&(h.style.opacity=0,h.style.visibility="visible",yk(h,200)),a=Math.round(a/b*a),e.style.height=a.toString()+"px",this.eb.Lb(!0),e=this.eb.S()-this.eb.w(),c=lk(e,c,d).remappedVal,this.zg.style.top=(-c).toString()+"px"):"hidden"!=h.style.visibility&&Bk(h,200,function(){this.eb&&(h.style.visibility="hidden",this.eb.Lb(!1),this.eb.C(100))}.bind(this))};
f.HB=function(){this.dispatchEvent({type:"N"})};f.GB=function(){this.dispatchEvent({type:"O"})};f.xj=function(){this.Sc();this.dispatchEvent({type:"M"})};function pu(a){a.O=new Wf;a.O.setInterval(100);var b=function(){200<(new Date).getTime()-this.Zu&&(this.O.stop(),delete this.Zu,this.GB())}.bind(a);H(a.eb,"v",function(){void 0==this.Zu&&this.HB();this.Zu=(new Date).getTime();this.O.stop();this.O.addEventListener(Xf,b);this.O.start()}.bind(a));a.eb.gq(a.a())}
f.f=function(){ou.d.f.call(this);null!=this.eb&&(J(this.eb),this.eb.g(),delete this.eb);null!=this.zg&&(S(this.zg),delete this.zg);this.O.g();delete this.O};v("nrg.ui.ScrollableContainer.ID_PREFIX",ou.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",ou.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",ou.prototype.k);v("nrg.ui.ScrollableContainer.prototype.addContents",ou.prototype.qf);
v("nrg.ui.ScrollableContainer.prototype.getElement",ou.prototype.a);v("nrg.ui.ScrollableContainer.prototype.getSlider",ou.prototype.eI);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",ou.prototype.aI);v("nrg.ui.ScrollableContainer.prototype.updateStyle",ou.prototype.o);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",ou.prototype.Sc);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",ou.prototype.f);function qu(){W.call(this)}w(qu,ou);v("nrg.ui.ScrollableZippyTree",qu);qu.ID_PREFIX="nrg.ui.ScrollableZippyTree";qu.CSS_SUFFIX={kF:"zippytree"};f=qu.prototype;f.k=function(a){qu.d.k.call(this,a);this.pa=new Ls;Q(this.pa.a(),qu.CSS.kF);this.zg.appendChild(this.pa.a());this.ap();this.eb.HC(!0,.3)};f.qf=function(a,b){this.pa.qf(a,b);g(a);this.eb.gq(this.pa.a())};f.Vl=function(){this.pa.Vl()};f.Zr=function(a,b,c,d){this.pa.Zr(a,b,function(){null!=c&&c();this.Sc()}.bind(this),function(){null!=d&&d()}.bind(this))};
f.wn=function(){this.pa.wn()};f.gc=function(a,b){this.pa.gc(a,b)};f.CI=function(){return this.pa};f.HF=function(a){this.pa.zn(a);this.Sc()};f.ap=function(){H(this.pa,"B",this.Sc.bind(this));H(this.pa,"a",this.Sc.bind(this));H(this.pa,"b",this.Sc.bind(this));H(this.pa,xl.yE,this.Sc.bind(this))};f.o=function(a){a&&sk(this.a(),a)};f.f=function(){qu.d.f.call(this);null!=this.pa&&(J(this.pa),this.pa.g(),delete this.pa)};v("nrg.ui.ScrollableZippyTree.EventType",{});
v("nrg.ui.ScrollableZippyTree.ID_PREFIX",qu.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",qu.CSS_SUFFIX);v("nrg.ui.ScrollableZippyTree.prototype.render",qu.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.addContents",qu.prototype.qf);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",qu.prototype.Vl);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",qu.prototype.wn);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",qu.prototype.gc);
v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",qu.prototype.CI);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",qu.prototype.HF);v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",qu.prototype.ap);v("nrg.ui.ScrollableZippyTree.prototype.scaleElementOnChange",qu.prototype.Zr);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",qu.prototype.o);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",qu.prototype.f);function ru(a,b,c){cn.call(this);this.VC=!0===a;this.UC=!0===b;this.PC=!0===c}w(ru,cn);v("xiv.ui.HelpDialog",ru);ru.ID_PREFIX="xiv.ui.HelpDialog";ru.CSS={SD:"nrg-ui-helpdialog-dialog",Sj:"nrg-ui-helpdialog-text",ME:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",Lj:"xiv-ui-helpdialog-closebutton"};ru.LAYOUT_IMAGE_ID=ru.ID_PREFIX+".LayoutImage";
ru.prototype.k=function(a){ru.d.k.call(this,a);Q(this.a(),"xiv-ui-helpdialog");this.Mm=new qu;Q(this.Mm.a(),ru.CSS.ME);this.Mm.k(this.a());su(this);this.xy(ru.CSS.TITLE);this.iy(ru.CSS.Lj)};ru.prototype.qw=function(a){null!=document.getElementById(ru.LAYOUT_IMAGE_ID)&&(document.getElementById(ru.LAYOUT_IMAGE_ID).src=a)};
function su(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts"," ","<img height=15 width=15 id="+ru.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.VC&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.UC&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.PC&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.Be("Help");E([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="margin-left:10%;width:90%;color:white;left:10%;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="black">';
E(a,function(a){c+="<tr>";E(a,function(a,b){switch(b){case 0:a='<b><font size="1">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}S(c);var n=R("div");n.innerHTML=c;this.Mm.qf(n,[d])}.bind(a))}
ru.prototype.f=function(){ru.d.f.call(this);delete this.VC;delete this.UC;delete this.PC;null!=this.Mm&&this.Mm.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",ru.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",ru.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",ru.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",ru.prototype.k);v("xiv.ui.HelpDialog.prototype.setLayoutButton",ru.prototype.qw);v("xiv.ui.HelpDialog.prototype.disposeInternal",ru.prototype.f);function tu(a,b,c){bp.call(this,a,b||cp.re(),c);this.jd(16,!0)}w(tu,bp);Qn("goog-toggle-button",function(){return new tu(null)});function uu(a){W.call(this);this.L={};this.U=a}w(uu,W);v("xiv.ui.ViewBoxDialogs",uu);uu.ID_PREFIX="xiv.ui.ViewBoxDialogs";uu.CSS_SUFFIX={Ig:"generic-toggle",dE:"infodialog",eE:"infodialog-text",KN:"modaldialog"};var vu="Info_"+B(),wu="Help_"+B(),xu={pN:vu,iN:wu},yu="ToggleClass_"+B();f=uu.prototype;f.$G=function(){return this.L};f.ZG=function(a){return this.L[a]};
f.An=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.U.ok("LEFT",c,a,e,function(b){var c=this.L[a];b="true"==b.getAttribute("checked");c.ca(b);c.Xw();zu(this,c);this.dispatchEvent({type:b?"P":"Q",tz:this.L[a],uz:a})}.bind(this),d);null!=this.L[a]&&this.L[a].g();c=new cn;this.L[a]=c;Lm(c,null!=k?k:!1);Sm(c,null!=l?l:null);c.k(this.U.Gb);Km(c,0);this.L[a].Nd();c.Be(e);Q(c.a(),b);H(c,"f",function(){this.U.Ao(n)}.bind(this));H(c,Om,function(){}.bind(this));this.L[a].ca(!0);this.L[a].Nd();this.L[a].Nd(!1);
!1===h&&Pn(this.U.Zd[a])};f.fG=function(){this.An(xu.JN,"xiv-ui-viewboxdialogs-meshes-dialog",uu.CSS.Ig,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.hG=function(){this.An(xu.hP,"xiv-ui-viewboxdialogs-volumes-dialog",uu.CSS.Ig,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.hz=function(){Au(this);Bu(this)};
function Cu(a,b,c){var d=new cn;Sm(d,Vm);d.k(null!=b?b:document.body);d.al(a);Q(d.a(),"nrg-ui-dialogs-yesnomodal");Lm(d,!0);var e=d.a(),h=d.Zh();Tc(d,Tm,function(a){var b=e.cloneNode(!0);b.style.opacity=1;b.style.display="inline";$h(e.parentNode,b);var n=h.cloneNode(!0);n.style.opacity=.7;n.style.display="inline";$h(e.parentNode,n);b.style.zIndex=2E9;n.style.zIndex=2E9;Pk([b,n],1,0,null,null,function(){S(b);delete b;S(n);delete n});"yes"===a.key.toLowerCase()&&null!=c&&c();d.eu=!0;d.xo()});d.ca(!0);
d.Nd(!0);d.eu=!1;e.style.opacity=0;e.style.zIndex=2E9;h.style.opacity=0;h.style.zIndex=2E9;yk(e,150);zk(h,150,.7)}f.xA=function(){var a=[];C(this.L,function(b){b.ua()&&a.push(b.a())});return a};f.showModalDialog=function(a){if(null==this.L[a])throw Error("Invalid dialog key: ",a);this.L[a].ca(!0);this.L[a].Nd()};
function zu(a,b){C(null!=b?[b]:a.L,function(a){if(null!=a&&!la(a)){var b=a.sm,e=a.Tz(),h;if(null!=b&&null!=e){for(var k=[e,b],l=0;l<k.length;l++)for(h in k[l])if(isNaN(k[l][h])&&!la(k[l][h]))return;U(a.a().parentNode);h=U(a.a());var k=Gi(a.a()),l=e.left+(k.x-b.left)/b.width*e.width,b=e.top+(k.y-b.top)/b.height*e.height,n=k.x+h.width,p=k.y+h.height,m=e.left+e.width,q=e.top+e.height,l=k.x,b=k.y;n>m&&(l=e.left+e.width-h.width);l<e.left&&(l=e.left);p>q&&(b=e.top+e.height-h.height);b<e.top&&(b=e.top);
Ei(a.a(),l,b)}}})}f.update=function(){C(this.L,function(a){a.Xw();zu(this,a)}.bind(this))};f.op=function(a,b){var c=!1===b?0:1;window.console.log(a,this.L[a]);null!=this.L[a].a()&&zk(this.L[a].a(),200,c)};f.Hq=function(){return this.L[wu]};
function Au(a){null!=a.L[wu]&&a.L[wu].g();var b=new ru(0<a.U.Ta().ru().length,0<a.U.Ta().qu().length,0<a.U.Ta().pu().length);Lm(b,!1);Sm(b,null);b.k(a.U.Gb);b.ca(!1);b.Nd();var c=a.U.ok("LEFT",uu.CSS.Ig,wu,"Help",function(a){a="true"==a.getAttribute("checked");b.ca(a);this.dispatchEvent({type:a?"P":"Q",tz:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");H(b,"f",function(){this.U.Ao(c)}.bind(a));a.U.Ao(c);a.L[wu]=new ru}
function Bu(a){null!=a.L[vu]&&a.L[vu].g();currDialog=new cn;Q(currDialog.Oq(),"xiv-ui-viewboxdialogs-infodialog-title");var b="",b=0<a.U.wb.length?a.U.wb[0].yu():Qk(a.U.wb[0].ni);Lm(currDialog,!1);currDialog.gk(b);Sm(currDialog,null);currDialog.k(a.U.Gb);currDialog.ca(!0);currDialog.Ar("left","top",0,-22);currDialog.Be("Info.");Q(currDialog.a(),uu.CSS.dE);Q(currDialog.th[0],uu.CSS.eE);a.U.ok("LEFT",uu.CSS.Ig,vu,"Info.",function(a){a="true"==a.getAttribute("checked");currDialog.ca(a);currDialog.Ar("left",
"top",0,-15);this.dispatchEvent({type:a?"P":"Q",tz:currDialog});this.U.QC(a)}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");currDialog.Vr();a.L[vu]=currDialog;a.U.fc(vu);a=Oh("nrg-ui-dialog-text",currDialog.a());Q(a[0],"xiv-ui-viewboxdialogs-infodialog-text");Q(currDialog.Ha(),"xiv-ui-viewboxdialogs-infodialog-content")}f.f=function(){delete this.U;null!=this.L&&(C(this.L,function(a){J(a);a.f();a.g()}.bind(this)),D(this.L))};v("xiv.ui.ViewBoxDialogs.EventType",{ZM:"P",YM:"Q"});
v("xiv.ui.ViewBoxDialogs.ID_PREFIX",uu.ID_PREFIX);v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",uu.CSS_SUFFIX);v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",xu);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",yu);v("xiv.ui.ViewBoxDialogs.createModalDialog",uu.JP);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",uu.prototype.$G);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",uu.prototype.ZG);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",uu.prototype.An);
v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",uu.prototype.fG);v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",uu.prototype.hG);v("xiv.ui.ViewBoxDialogs.prototype.createPostRenderDialogs",uu.prototype.hz);v("xiv.ui.ViewBoxDialogs.prototype.dispsePostRenderDialogs",uu.prototype.LP);v("xiv.ui.ViewBoxDialogs.prototype.setModalDialogOnYes",uu.prototype.sQ);v("xiv.ui.ViewBoxDialogs.prototype.showModalDialog",uu.prototype.showModalDialog);
v("xiv.ui.ViewBoxDialogs.prototype.getVisibleDialogElements",uu.prototype.xA);v("xiv.ui.ViewBoxDialogs.prototype.update",uu.prototype.update);v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",uu.prototype.op);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",uu.prototype.Hq);v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",uu.prototype.f);function Y(a,b,c,d){$c.call(this);this.U=a;this.na=b;this.Pa=c;this.L=d;this.xd={p:null,c:null};this.pq={x:null,y:null};this.ug={l:!1,m:!1,r:!1};this.Mk={up:{},dn:{},ot:{},ov:{}};H(this.L,"P",this.zB.bind(this));a=document.body;this.sb=new bo;this.sb.Kl(a);H(this.sb,"key",this.ki.bind(this));this.gl=!1;document.addEventListener("mousemove",this.Iw.bind(this),!1)}w(Y,$c);v("xiv.ui.ViewBoxInteractorHandler",Y);
var Du="Crosshairs_"+B(),Eu="Settings_"+B(),Fu="TwoDPan_"+B(),Gu="TwoDZoom_"+B(),Hu={kd:Du,nO:Eu,NO:Fu,OO:Gu};
Y.CSS={Ig:"xiv-ui-viewboxinteractorhandler-generic-toggle",kx:"xiv-ui-viewboxinteractorhandler-generic-dialog",lx:"xiv-ui-viewboxinteractorhandler-generic-zippytree",tx:"xiv-ui-viewboxinteractorhandler-levelsdialog",DN:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered",EN:"xiv-ui-viewboxinteractorhandler-levels-slider",FN:"xiv-ui-viewboxinteractorhandler-levels-slidercontroller",GN:"xiv-ui-viewboxinteractorhandler-levels-sliderlabel",CN:"xiv-ui-viewboxinteractorhandler-levels-checkboxholder",
BN:"xiv-ui-viewboxinteractorhandler-levels-checkboxcontroller"};Y.CURSOR_CSS={lF:"xiv-ui-viewboxinteractorhandler-zoom-follower",mx:"xiv-ui-viewboxinteractorhandler-viewframe-grab",px:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",nx:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",ox:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",Jx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",Kx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};
Y.ORIENTATION_KEY="Orientation_"+B();f=Y.prototype;f.sb=null;f.xi=null;f.Ia=null;f.Xa=null;f.cx=!1;f.Yv=!1;f.Sb={};f.Rz=function(a){return this.Sb[a]};f.gz=function(){this.oz();Iu(this);Ju(this);this.kz();this.fz(!1);this.mz();this.nz();this.dv()};function Ku(a){var b=a.U.Gb;C(Y.CURSOR_CSS,function(a){Ch(b,a)})}function Lu(a,b,c,d){b=b?Q:Ch;b(a.U.Gb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.U.Gb,d)}
function Mu(a){Lu(a,!0,Y.CURSOR_CSS.mx,Y.CURSOR_CSS.px);Lu(a,!1,Y.CURSOR_CSS.nx,Y.CURSOR_CSS.ox)}function Nu(a){Lu(a,!1,Y.CURSOR_CSS.Kx);Lu(a,!0,Y.CURSOR_CSS.Jx)}f.Iw=function(a){this.pq.x=a.clientX||a.pageX;this.pq.y=a.clientY||a.pageY};
f.BK=function(a){this.Ol=a.target;this.xd.p=this.xd.c;this.xd.c=[this.pq.x,this.pq.y];if(null!=this.xd.p){(new fs(this.xd.c[0],this.xd.c[1])).add(new fs(this.xd.p[0],this.xd.p[1]));a=this.xd.c[0]-this.xd.p[0];var b=this.xd.c[1]-this.xd.p[1];this.gl&&(this.Nf.style.visibility="hidden");this.cx?(this.gl&&this.gl&&(S(this.Nf),$h(this.Ol.Xi,this.Nf),this.Nf.style.visibility="visible",this.Nf.style.left=this.xd.c[0]+20+"px",this.Nf.style.top=this.xd.c[1]+"px"),Nu(this),this.ug.l&&Ou(this,a,b)):this.Yv&&
(Mu(this),this.ug.l&&(Lu(this,!1,Y.CURSOR_CSS.mx,Y.CURSOR_CSS.px),Lu(this,!0,Y.CURSOR_CSS.nx,Y.CURSOR_CSS.ox),this.Ol.oa.Nr([-1*a,-1*b]),this.Am()))}};f.xK=function(){Ku(this);this.Ol=null;this.gl&&(this.Nf.style.visibility="hidden")};f.Nv=function(a){0==a.button?this.ug.l=!0:1==a.button?this.qM.ug.m=!0:2==a.button&&(this.ug.r=!0)};f.Ov=function(a){0==a.button?this.ug.l=!1:1==a.button?this.qM.ug.m=!1:2==a.button&&(this.ug.r=!1)};
f.ki=function(a){if(this.U.gr())if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Pu(this,this.Ol,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.U.Cu(Fu);window.console.log("escape","pan",a,a.getAttribute("checked"));"true"==a.getAttribute("checked").toString()&&this.U.fc(Fu);"true"==this.U.Cu(Gu).getAttribute("checked").toString()&&this.U.fc(Gu);break;case 90:this.U.fc(Gu);break;case 72:case 80:this.U.fc(Fu);break;case 66:case 76:this.U.fc(this.Sb.levels);break;case 86:this.U.fc(this.Sb.volumes);
break;case 77:this.U.fc(this.Sb.meshes);break;case 65:this.U.fc(this.Sb.annotations);break;case 67:this.U.fc(Du);break;case 83:this.U.fc(this.Sb[Eu]);break;case 191:a.shiftKey&&this.U.fc(wu);break;case 73:this.U.fc(vu)}};function Ou(a,b,c){Ku(a);var d=function(){Nu(this);this.Ol.Im()}.bind(a),e=function(){Lu(this,!0,Y.CURSOR_CSS.Kx);Lu(this,!1,Y.CURSOR_CSS.Jx);this.Ol.Jm()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Qu(a);a.Am()}f.yx=0;f.zx=0;
f.bD=function(a){this.yx=a.clientX;this.zx=a.clientY;window.console.log("store mouse coords",this.yx,this.zx)};f.dv=function(){Ru(this,function(a,b){this.Mk.ov[b]=H(a.Ta(),"mouseover",this.BK.bind(this));var c=a.Ta().yc;this.Mk.ot[b]=H(c,"mouseleave",this.xK.bind(this));this.Mk.dn[b]=H(c,"mousedown",this.Nv.bind(this));this.Mk.up[b]=H(c,"mouseup",this.Ov.bind(this))}.bind(this))};function Pu(a,b,c){Ru(a,function(a,b,h){h.ia.C(h.ia.w()+c)}.bind(a),b.Ub())}
function Ru(a,b,c){if(null!=a.na){var d=a.Pa.Kq(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.bm())};if(r(c)){var h=a.na.Lq(c);if(null==h)throw Error("Invalid plane: ",h);e(a.na.Lq(c),c)}else C(a.na.wc,function(a,b){e(a,b)}.bind(a))}}f.nz=function(){this.U.ok("LEFT",Y.CSS.Ig,Gu,"2D Zoom",function(a){Ku(this);if(this.cx=a="true"==a.getAttribute("checked").toString())this.U.Ww(Fu),Nu(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.U.fc(Gu)};
f.mz=function(){this.U.ok("LEFT",Y.CSS.Ig,Fu,"2D Pan",function(a){Ku(this);if(this.Yv=a="true"==a.getAttribute("checked").toString())Mu(this),this.U.Ww(Gu)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.U.fc(Fu)};f.fz=function(a){this.U.ok("LEFT",Y.CSS.Ig,Du,"Toggle Crosshairs",function(a){this.kD("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.U.fc(Du)};
f.kz=function(){this.Sb[Eu]=Eu+"_"+B();this.L.An(this.Sb[Eu],Y.CSS.kx,Y.CSS.Ig,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.Xa[Eu]=new qu;this.Xa[Eu].k();var a=this.Xa[Eu].a();Q(a,Y.CSS.lx);this.L.L[this.Sb[Eu]].a().appendChild(a);this.Xa[Eu].Vl();a=new st;a.k();a.Hf("Enable 3D Rendering");a.ka.yd(!0);this.Xa[Eu].qf(a.a(),"3D Rendering");H(a,"D",function(a){this.na.yC("V",a.checked)}.bind(this));return a};
f.Am=function(){Ru(this,function(a,b,c,d){Su(this,b,d)}.bind(this))};
function Tu(a){null!=a.na&&(E(a.xi.volumes.all,function(a){"Show Label Map"==a.tb.innerHTML&&H(a,"D",function(c){c="true"==c.checked.toString();var d=(a.Sd().labelmap.visible=c)?1:-1;Ru(this,function(a,b,c,l){a=c.ia;b=a.w();a.C(b+d);Uu(a,l)}.bind(this));Yf(function(){Ru(this,function(a,b,c,l){a=c.ia;b=a.w();a.C(b-d);Uu(a,l)}.bind(this),1)}.bind(this),1)}.bind(this))}.bind(a)),Ru(a,function(a,c,d,e){var h=d.ia,k=d.Dd,l=d.of;d=d.kd;h[Y.ORIENTATION_KEY]=c;k[Y.ORIENTATION_KEY]=c;l[Y.ORIENTATION_KEY]=
c;d[Y.ORIENTATION_KEY]=c;Vu(this);Wu(this);Uu(h,e);Su(this,h[Y.ORIENTATION_KEY],e);Xu(this,h);Yu(this,this.Sb.volumes);null!=a.Ta()&&(H(a.Ta(),"I",function(){Qu(this)}.bind(this)),H(h,"u",function(a){Uu(a.target,e);Su(this,a.target[Y.ORIENTATION_KEY],e);Xu(this,a.target)}.bind(this)),H(k,"h",function(a){Zu(this,a.target,e);this.Am()}.bind(this)),H(l,"h",function(){a.Ta().LC(l.w()/100);this.Am()}.bind(this)))}.bind(a)),a.na.WB())}
function Yu(a,b){var c=b.split("_")[0];null!=a.Xa[c]&&(a.Xa[c].Sc(),a.xi.Rf.refresh(),C(a.xi[c],function(a){null!=a&&E(a,function(a){switch(c.toLowerCase()){case "volumes":var d=b.split("_")[0];a instanceof yt?(a.ka.checked=a.Sd()[yq]||!1,null==this.Bs&&(this.Bs=[]),-1==this.Bs.indexOf(a)&&this.Bs.push(a)):"Show Label Map"==a.tb.innerHTML&&(a.Sd()[Ut.HAS_LABEL_MAP_KEY]?a.Sd().labelmap.visible&&!a.ka.gh()&&a.yd(!0):(S(a.a()),a.a().style.visibility="hidden",a.a().style.height="0px",a.yd(!1)),this.Xa[d].Sc());
a.refresh();break;case "meshes":a instanceof ut&&a.o();break;case "annotations":a instanceof ut&&(window.console.log("ANNOT",a),a.o())}}.bind(this))}.bind(a)))}f.zB=function(a,b){null==a.uz&&null==b||Yu(this,null!=b?b:a.uz)};f.Ky=function(){var a=this.Ia.xf.dA(Ct.LEVEL_CUTOFF);this.Ia.max.Oo(a);this.Ia.min.Oo(0);this.Ia.min.C(0);this.Ia.max.C(a);Ht(this.xi.Rf);this.Ia.xf.refresh();this.L.L[this.Sb.levels]};
function Uu(a,b){if(null!=b){var c=a[Y.ORIENTATION_KEY],d="Y"==c||"Z"==c?a.S()-a.w()-1:a.w()-1;"false"==b.reslicing.toString()&&("transverse"==b[K.ORIENTATION_KEY]&&"Z"==c?d+=2:"coronal"==b[K.ORIENTATION_KEY]&&"Y"==c?d+=2:"sagittal"==b[K.ORIENTATION_KEY]&&"X"==c&&(d+=1));b["index"+a[Y.ORIENTATION_KEY]]=d}}function $u(a,b,c,d,e){var h=a.na.Lq(b).Ta();a=a.Pa.Pz().vu(b);b=null;null!=a&&(b=a[Wq]);null!=b&&("vertical"==c?b.JC(h.tA(d,e)):"horizontal"==c&&b.KC(h.Zz(d,e)))}
function Su(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;$u(a,"Y","vertical",b,!0);$u(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;$u(a,"X","vertical",b,!1);$u(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,$u(a,"X","horizontal",b,!1),$u(a,"Y","horizontal",b,!1)}}function Xu(a,b){Ru(a,function(a,b,e){a=e.Dd;e=e.ia;a.Fb(e.S());a.Mb(1);a.C(e.w())}.bind(a),b[Y.ORIENTATION_KEY])}function Qu(a){Ru(a,function(a,c,d){d.of&&a.Ta()&&(a=a.Ta().AA(),d.of.w(),d.of.C(Math.round(100*a)))}.bind(a))}
function Zu(a,b,c){null!=c&&Ru(a,function(a,c,h){h.ia.C(b.w())}.bind(a),b[Y.ORIENTATION_KEY])}function Iu(a){Ru(a,function(a,c,d){null!=d.ia&&d.ia.C(d.ia.S()/2)}.bind(a))}
function Ju(a){Ru(a,function(a,c,d,e){if(null!=e[Ut.SLICE_TO_RAS_KEY]&&null!=d.ia){slider=d.ia;orientation=slider[Y.ORIENTATION_KEY];a=e.bbox;e=e[Ut.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.HL[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.eG[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.VF[2]-a[4])/h);slider.C(Math.round(slider.S()*h)+1)}}.bind(a))}
function Vu(a){var b,c;Ru(a,function(a,e,h,k){null!=h.ia&&(c=h.ia,b=c[Y.ORIENTATION_KEY],null!=k&&(c.Fb(a.Ta().kA()),c.Mb(1),null!=b&&c.C(k["index"+b]+1)))})}function Wu(a){var b;Ru(a,function(a,d,e,h){null!=e.ia&&(b=e.ia,playbutton=e.Dh,null!=h&&playbutton.EC(b))})}f.DB=function(){Ru(this,function(a,b,c,d){Zu(this,c.Dd,d);Qu(this)}.bind(this));this.Am()};
f.Qw=function(a){var b=!1===a?0:1;Ru(this,function(a,d,e){zk(e.ia.a(),200,b);zk(e.Dd.a(),200,b);zk(e.kd.Hg,200,b);zk(e.kd.og,200,b);zk(e.of.a(),200,b)}.bind(this))};f.TI=function(){this.Qw(!1);this.L.op(vu,!1)};f.ZL=function(){this.Qw(!0);this.L.op(vu,!0)};f.update=function(){this.Pa.vp()};f.kD=function(a){var b=!0==a?"visible":"hidden";Ru(this,function(a,d,e){null!=e.kd&&(e.kd.Hg.style.visibility=b,e.kd.og.style.visibility=b)}.bind(this))};
f.qD=function(){null!=this.Pa&&null!=this.na&&Ru(this,function(a,b,c,d){if(null!=c){var e=c.ia;c=c.Dd;e[Y.ORIENTATION_KEY]=b;c[Y.ORIENTATION_KEY]=b;null!=a.Ta()&&(Zu(this,c,d),e.o())}}.bind(this))};
f.eD=function(a){a.sC(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{Ch:Ir,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{Ch:Qr,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{Ch:Mr,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{Ch:Hr,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{Ch:Jr,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{Ch:Nr,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{Ch:Or,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{Ch:Fr,ob:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.py(c,b.ob);this.Pa.my(c,b.Ch);"Four-Up"==c&&this.Pa.rC(c)}.bind(this));H(a,"item_selected",this.rK.bind(this))};f.rK=function(a){this.Pa.pi(a.title);null!=this.L&&null!=this.L.Hq()&&this.L.Hq().qw(a.target.tj.src)};function av(a,b){H(a.Xa[b].pa,"c",function(a){this.zB(a,this.Sb[b])}.bind(a))}
function bv(a,b){H(b,"D",function(a){E(this.Bs,function(b){var e=b.Sd();b!==a.target?(b.ka.checked=!1,e.visible=!1):(e.visible=!0,this.na.XB(e))}.bind(this))}.bind(a))}function cv(a,b){C(a.xi[b],function(a,d){g(a)&&E(a,function(a){var c=a.Kn||[];"all"!==d&&0<c.length&&c.push(d);this.Xa[b].qf(a.a(),c);a instanceof yt&&bv(this,a)}.bind(this))}.bind(a))}
function dv(a){a.Xa=Rt();a.Sb=vb(a.Xa);C(a.Xa,function(a,c){var d=!1;switch(c){case "volumes":0==this.na.ru().length&&(d=!0);break;case "meshes":0==this.na.qu().length&&(d=!0);break;case "annotations":0==this.na.pu().length&&(d=!0)}d?tb(this.Xa,c):(this.Xa[c]=new qu,this.Xa[c].k(),this.Sb[c]=c+"_"+B(),cv(this,c),av(this,c))}.bind(a))}f.oz=function(){this.xi=this.na.jf;this.Ia=this.xi.Rf.n;dv(this);ev(this);Tu(this)};
function ev(a){C(a.Xa,function(a,c){var d=!1;C(this.xi[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.L.An(this.Sb[c],Y.CSS.kx,Y.CSS.Ig,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+db(c)+".png",db(c),!1,!1);var e=this.Xa[c].a();Q(e,Y.CSS.lx);this.L.L[this.Sb[c]].a().appendChild(e);1<this.Xa[c].pa.Du().length?this.Xa[c].wn():(this.Xa[c].Vl(),this.Xa[c].Sc());"levels"==c&&fv(this)}}.bind(a))}
function fv(a){var b=a.L.L[a.Sb.levels],c=a.Xa.levels.pa,d=b.a();Q(d,Y.CSS.tx);Q(b.Oq(),Y.CSS.tx+"-title");var e=a.Xa.levels.eb.a();e.style.visibility="hidden";S(e);E(c.Du(),function(a){a.kb.style.height=0;a.kb.style.opacity=0;a.kb.style.visibility="hidden"});var c=a.Xa.levels.pa.jA(1)[0],e=R("div",{id:"HistDetails_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails"}),h=R("div",{id:"HistDetailsFade_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails-fadebottom"});d.appendChild(h);d=
R("div",{id:"HistDetauls_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails-expandbutton"},"Histogram...");e.appendChild(d);e.appendChild(a.Ia.Vb.a());e.appendChild(a.Ia.me.a());ci(c.sf,e,1);H(e,"mouseenter",function(){h.style.opacity=0;h.style.visibility="visible";yk(h,220)});H(e,"mouseleave",function(){Bk(h,220,function(){h.style.visibility="hidden"})});a.Ia.Vb.a().style.width="85%";a.Ia.Vb.a().style.left="1%";a.Ia.Vb.a().style.top="20px";a.Ia.me.a().style.width="90%";a.Ia.me.a().style.left=
"10px";a.Ia.me.a().style.top="25px";a.Ia.me.yd(!1);a.U.fc(a.Sb.levels);b.Ar("right","top",10,40);a.U.fc(a.Sb.levels)}
f.g=function(){Y.d.g.call(this);document.removeEventListener("mousemove",this.Iw.bind(this));document.removeEventListener("mousemove",this.Iw);null!=this.sb&&(this.sb.g(),delete this.sb);null!=this.Sb&&D(this.Sb);delete this.Sb;null!=this.Xa&&(C(this.Xa,function(a){a.g()}),D(this.Xa));delete this.Xa;D(this.xd);delete this.xd;C(this.Mk,function(a){C(a,function(a){Vc(a);delete a});D(a)});D(this.Mk);delete this.Mk;this.gl&&(S(this.Nf),delete this.Nf);delete this.gl;delete this.xi;delete this.cx;delete this.Yv;
delete this.U;delete this.na;delete this.Pa;delete this.L;delete this.$P};v("xiv.ui.ViewBoxInteractorHandler.EventType",{aO:"R",AN:"S",RO:"T",$M:"U"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",Hu);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",Y.ORIENTATION_KEY);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",Y.prototype.gz);v("xiv.ui.ViewBoxInteractorHandler.prototype.getDialogKey",Y.prototype.Rz);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",Y.prototype.nz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",Y.prototype.mz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",Y.prototype.fz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",Y.prototype.kz);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",Y.prototype.Am);v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",Y.prototype.Ky);
v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",Y.prototype.DB);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",Y.prototype.Qw);v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",Y.prototype.TI);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",Y.prototype.ZL);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",Y.prototype.update);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",Y.prototype.kD);
v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",Y.prototype.qD);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",Y.prototype.eD);v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",Y.prototype.oz);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",Y.prototype.g);function gv(){wc.call(this)}w(gv,wc);v("xiv.utils.ErrorCatcher",gv);
function hv(a){function b(a){a.target.g()}var c;g(a)||(a=[a]);null!=c&&!g(c)&&(c=[c]);var d=new en;Sm(d,Um);E(a,function(a){d.gk(a)});null!=c&&E(c,function(a){d.ut(a)});d.Be("XImgView Error");d.ca(!0);d.a().style.position="fixed";d.Nd();d.a().style.opacity=0;yk(d.a(),400);d.Zh().style.opacity=0;zk(d.Zh(),400,.75);d.a().style.height="250px";a=U(d.a());d.a().style.top="calc(50% - "+a.height/2+"px)";d.a().style.left="calc(50% - "+a.width/2+"px)";d.Vr();d.Nd();Tc(d,Tm,b);Tc(d,"f",b)}
function iv(){var a,b='<a target="_blank" style="color: #5CB8E6"  href=';$b()?(a="Internet Explorer",b+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">'):Xb("Chrome")||Xb("CriOS")?(a="Chrome",b+='"https://productforums.google.com/forum/#!msg/chrome/CgYesRogD4c/sU1TQsRgnWgJ">'):Xb("Firefox")?(a="Firefox",b+='"https://support.mozilla.org/en-US/questions/984663">'):ac()?(a="Safari",b+='"https://discussions.apple.com/thread/3300585?start=0">'):Zb()&&(a="Opera",b+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">');
hv('<br>It looks like <a target="_blank" style="color: #5CB8E6" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">Experimental-WebGL</a> is disabled.<br><br><br>'+(b+("How to enable WebGL in "+a+".</a>")))}gv.checkForWebGL=function(){var a=R("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};f=gv.prototype;f.$y=[];f.Hm=null;f.Cr=null;f.Cd=null;f.bu=document.body;f.Hv=null;f.xC=function(a){this.Hv=a};
f.iC=function(a){this.bu=a};function jv(a){Jb(a.$y);a.Hm=window.console.log;a.Cr=function(){a.Hm.apply(this,arguments);var b="";E(arguments,function(a,d){0<d&&(b+=" ");b+=a});a.$y.push(b)};window.console.log=a.Cr}f.Cs=function(a){!0===a?(jv(this),window.onerror=this.Gv.bind(this)):(window.onerror=void 0,null!=this.Hm&&(window.console.log=this.Hm,this.Cr=this.Hm=null))};
f.Gv=function(a,b,c){if(null==this.Cd){null!=this.Hv&&this.Hv();var d="",e="",d="<b>Render Error!</b><br><br>";r(a)&&(e+=a+"<br>");r(b)&&(e+="src: "+b+"<br>",u(c)&&(e+=" line: "+c+"<br>"));this.Cd=new en;this.Cd.k(this.bu);Sm(this.Cd,null);this.Cd.gk(d);this.Cd.ut(e);Lm(this.Cd,!0);this.Cd.ca(!0);this.Cd.Vr();this.Cd.Nd();Tc(this.Cd,"f",function(a){a.target.g();this.Cd=null}.bind(this))}};f.clear=function(){null!=this.Cd&&(this.Cd.g(),delete this.Cd)};
f.g=function(){gv.d.g.call(this);this.clear();delete this.Hm;delete this.Cr;delete this.bu};
v("xiv.utils.ErrorCatcher.isCompatible",function(){var a=!0,b=bc(),c={Chrome:{eo:Xb("Chrome")||Xb("CriOS"),ro:11},IE:{eo:$b(),ro:11},Safari:{eo:ac(),ro:5.1},Opera:{eo:Zb(),ro:12},Firefox:{eo:Xb("Firefox"),ro:4}},d=!1;C(c,function(c){c.eo&&!d&&1==Za(c.ro,b)&&(hv("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>"),a=!1,d=!0)});a&&!gv.checkForWebGL()&&(iv(),
a=!1);return a});v("xiv.utils.ErrorCatcher.checkForWebGL",gv.checkForWebGL);v("xiv.utils.ErrorCatcher.EventType",{ERROR:"V"});v("xiv.utils.ErrorCatcher.prototype.setOnErrorCallback",gv.prototype.xC);v("xiv.utils.ErrorCatcher.prototype.setDialogParent",gv.prototype.iC);v("xiv.utils.ErrorCatcher.prototype.waitForError",gv.prototype.Cs);v("xiv.utils.ErrorCatcher.prototype.clear",gv.prototype.clear);v("xiv.utils.ErrorCatcher.prototype.onError",gv.prototype.Gv);
v("xiv.utils.ErrorCatcher.prototype.dispose",gv.prototype.g);F&&pc(8);function Gh(){W.call(this);this.Fo=R("div",{id:Gh.ID_PREFIX+"_ProgBarHolder_"+B(),"class":Gh.CSS.AE});$h(this.a(),this.Fo);this.tm=R("div",{id:Gh.ID_PREFIX+"_ProgBarThumb_"+B(),"class":Gh.CSS.Os});$h(this.Fo,this.tm);this.hh=R("div",{id:Gh.ID_PREFIX+"_LabelHolder_"+B(),"class":Gh.CSS.iE});$h(this.a(),this.hh);this.hj=R("div",{id:Gh.ID_PREFIX+"_EndNode_"+B(),"class":Gh.CSS.TD});$h(this.tm,this.hj)}w(Gh,W);v("xiv.ui.ProgressBarPanel",Gh);var kv={};Gh.ID_PREFIX="xiv.ui.ProgressBarPanel";
Gh.CSS_SUFFIX={Os:"thumb",AE:"progbarholder",WN:"progressbar",iE:"labelholder",TD:"endnode",Hs:"endnode-glow",hN:"glownode"};kv={JM:"W"};f=Gh.prototype;f.Uc=0;f.$d=null;f.ko="";f.ww=!1;f.Hf=function(a){this.ko=a;this.hh.innerHTML=this.ko};f.vw=function(a){this.ww=null!=a&&!1===a?!1:!0;this.C(this.Uc)};
f.C=function(a){0>a||100<a||(this.Uc=a,this.tm.style.width="calc("+a.toString()+"% + 4px)",0==this.Uc&&Fh(this.hj)?Ch(this.hj,Gh.CSS.Hs):90<this.Uc&&!Fh(this.hj)&&Q(this.hj,Gh.CSS.Hs),this.hh.innerHTML=this.ko,this.ww&&(0<this.ko.length&&(this.hh.innerHTML+=" "),this.hh.innerHTML+=this.Uc.toString()+"%"))};f.w=function(){return this.Uc};
f.f=function(){Gh.d.f.call(this);null!=this.tm&&(S(this.tm),delete this.tm);null!=this.Fo&&(S(this.Fo),delete this.Fo);null!=this.hh&&(S(this.hh),delete this.hh);null!=this.hj&&(S(this.hj),delete this.hj);null!=this.$d&&(D(this.$d),delete this.$d);this.ko=this.ww=null};v("xiv.ui.ProgressBarPanel.EventType",kv);v("xiv.ui.ProgressBarPanel.ID_PREFIX",Gh.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",Gh.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",Gh.prototype.Hf);
v("xiv.ui.ProgressBarPanel.prototype.showValue",Gh.prototype.vw);v("xiv.ui.ProgressBarPanel.prototype.setValue",Gh.prototype.C);v("xiv.ui.ProgressBarPanel.prototype.getValue",Gh.prototype.w);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",Gh.prototype.f);function lv(){W.call(this)}w(lv,qu);v("nrg.ui.ThumbnailGallery",lv);lv.ID_PREFIX="nrg.ui.ThumbnailGallery";lv.CSS_SUFFIX={SD:"dialog",Ps:"thumbnail",Rs:"thumbnail-image",GO:"thumbnail-text"};var mv=B();f=lv.prototype;f.ps=!1;f.Aw=function(a){this.ps=a;null!=this.pa&&this.ps&&this.pa.lw(nv)};f.k=function(a){lv.d.k.call(this,a);ov(this);this.ps&&this.pa.lw(nv)};
function nv(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=di(a),d=b[mv].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[mv]&&(e=h[mv].toLowerCase(),e=La(d,e),0>e)){bi(b,h);return}a.appendChild(b)}f.Bn=function(a,b){var c=new ti;Eh(c.a(),Ah(c.a()),this.Hj);Eh(c.cf,Ah(c.cf),this.dl);Eh(c.bb,Ah(c.bb),this.cl);c.ow(a);c.Zo(b);return c};f.loop=function(a){C(this.xc,function(b){a(b)})};
f.Jl=function(a,b){if(!qb(this.xc,a)){this.xc=this.xc?this.xc:{};this.xc[a.a().getAttribute("id")]=a;a.a()[mv]=a.Au().toLowerCase();this.qf(a.a(),b);this.Sc();var c=a.a();H(c,"mouseenter",function(){this.dispatchEvent({type:"X",Bi:a})}.bind(this));H(c,"mouseleave",function(){this.dispatchEvent({type:"Y",Bi:a})}.bind(this))}};f.Zi=function(a,b,c){a=this.Bn(a,b);this.Jl(a,c);pv(this,"image");pv(this,"text");pv(this,"thumbnail");this.Sc();return a};
f.ap=function(){lv.d.ap.call(this);H(this.zg,"mouseover",this.bD.bind(this))};f.bD=function(a){this.pB=a.clientX;this.qB=a.clientY};function pv(a,b){var c,d=[],e="";for(e in a.xc){switch(b){case "thumbnail":d=a.Hj;c=a.xc[e].a();break;case "image":d=a.cl;c=a.xc[e].bb;break;case "text":d=a.dl,c=a.xc[e].cf}Eh(c,Ah(c),d)}}f.sy=function(a){null!=this.Hj||ov(this);this.Hj.push(a);pv(this,"thumbnail")};f.vy=function(a){this.cl.push(a);pv(this,"image")};f.wy=function(a){this.dl.push(a);pv(this,"text")};
f.o=function(a){a&&sk(this.a(),a)};function ov(a){var b=new ti;a.Hj=Ah(b.a());a.Hj.push(lv.CSS.Ps);a.cl=Ah(b.bb);a.cl.push(lv.CSS.Rs);a.dl=Ah(b.cf);a.dl.push(lv.CSS.Ex);S(b.a());delete b}
f.f=function(){lv.d.f.call(this);delete this.ps;null!=this.pB&&delete this.pB;null!=this.qB&&delete this.qB;null!=this.xc&&(this.En(this.xc),delete this.xc);null!=this.pa&&(J(this.pa),this.pa.g(),delete this.pa);null!=this.Hj&&(Jb(this.Hj),delete this.Hj);null!=this.cl&&(Jb(this.cl),delete this.cl);null!=this.dl&&(Jb(this.dl),delete this.dl);delete this.xQ};v("nrg.ui.ThumbnailGallery.ID_PREFIX",lv.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",lv.CSS_SUFFIX);
v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",mv);v("nrg.ui.ThumbnailGallery.thumbnailSorter",nv);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",lv.prototype.Aw);v("nrg.ui.ThumbnailGallery.prototype.render",lv.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",lv.prototype.Bn);v("nrg.ui.ThumbnailGallery.prototype.loop",lv.prototype.loop);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",lv.prototype.Jl);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",lv.prototype.Zi);
v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",lv.prototype.ap);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",lv.prototype.sy);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",lv.prototype.vy);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",lv.prototype.wy);v("nrg.ui.ThumbnailGallery.prototype.updateStyle",lv.prototype.o);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",lv.prototype.f);function qv(){W.call(this)}w(qv,W);v("xiv.ui.ViewableGroupMenu",qv);qv.ID_PREFIX="xiv.ui.ViewableGroupMenu";qv.CSS_SUFFIX={Ap:"header",Ps:"thumbnail",Ex:"thumbnail-text",Rs:"thumbnail-image",TE:"thumbnailgallery",yp:"background"};f=qv.prototype;f.aa=null;f.mc=null;f.dm=null;
f.k=function(a){qv.d.k.call(this,a);this.mc=R("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});Q(this.mc,this.constructor.CSS.yp);null!=this.a().parentNode||null!=a?$h(a||this.a().parentNode,this.mc):$h(this.a(),this.mc);this.dm=R("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":qv.CSS.Ap});this.dm.innerHTML="<b> Select Slicer Scene View <b>";$h(this.a(),this.dm);null!=this.aa||this.reset()};f.Ln=function(){return this.mc};f.show=function(){yk(this.a(),fm.KM)};
f.Zi=function(a,b){null!=this.aa||this.reset();var c=this.aa.Zi(a,b);rv(this,c);return c};f.fm=function(){Bk(this.a(),500);S(this.a())};f.reset=function(){null!=this.aa&&(this.aa.g(),delete this.aa);this.aa=new lv;this.aa.Aw(!0);this.aa.k(this.a());Q(this.aa.a(),qv.CSS.TE);this.aa.sy(qv.CSS.Ps);this.aa.vy(qv.CSS.Rs);this.aa.wy(qv.CSS.Ex)};function rv(a,b){H(b,"L",function(a){a.target.ew(300,function(){this.dispatchEvent({type:"Z",Mw:b})}.bind(this))}.bind(a))}
f.f=function(){qv.d.f.call(this);null!=this.mc&&(S(this.mc),delete this.mc);null!=this.dm&&(S(this.dm),delete this.dm);null!=this.aa&&(this.aa.g(),delete this.aa)};v("xiv.ui.ViewableGroupMenu.ID_PREFIX",qv.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{eP:"Z"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",qv.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",qv.prototype.k);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",qv.prototype.Ln);v("xiv.ui.ViewableGroupMenu.prototype.show",qv.prototype.show);
v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",qv.prototype.Zi);v("xiv.ui.ViewableGroupMenu.prototype.hide",qv.prototype.fm);v("xiv.ui.ViewableGroupMenu.prototype.reset",qv.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",qv.prototype.f);var sv;function tv(a,b,c,d,e){this.Yi=a;this.Pk=b;this.Fy=c;this.RF=d;this.Do=e}tv.prototype.getName=function(){return this.Pk};function uv(a){return!a.Pk||"[object Object]"==a.Yi}
function vv(a){var b=[a.Yi?wv(a.Yi)+".":"",a.Pk?wv(xv(a.Pk)):"anonymous",wv(a.RF),a.Fy?" [as "+wv(xv(a.Fy))+"]":""];if(a.Do)if(b.push(" at "),Boolean(ca.CLOSURE_INSPECTOR___&&ca.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.Do.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',wv(a.Do),"', '",c,"'); return false\">",wv(a.Do),"</a>")}else b.push(wv(a.Do));return b.join("")}
var yv=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,zv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,Av=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
Bv=/^function ([a-zA-Z_$][\w$]*)/,Cv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function Dv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(Bv),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");r(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new tv("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function Ev(a){var b=a.match(yv);if(b)return new tv(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new tv("",e,"",d,h)}return(b=a.match(zv))?new tv("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(Av))?new tv(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(Cv))?new tv("",b[1]||"","","",b[2]||
""):null}function xv(a){return sv?sv(a):a}function wv(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Fv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){sv=a});function Gv(a,b){return a==b}function Hv(a,b){return a.toString()===b.toString()}var Iv={String:Gv,Number:Gv,Boolean:Gv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:Hv,Function:Hv};function Jv(a,b,c){return Math.abs(a-b)<=c}var Kv={Number:Jv};
function Lv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function Mv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+Lv(a)+")");return b}function Tv(a,b){return b.length==a+1?b[0]:null}function Uv(a,b,c){return c.length==b+1?c[a]:c[a-1]}function Vv(a,b){b.length==a||b.length==a+1&&r(b[0])||Wv(null,"Incorrect arguments passed to assert function")}
function Xv(a,b){var c="Expected "+Mv(a)+" but was "+Mv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function Yv(a,b){Vv(1,arguments);var c=Tv(1,arguments),d=Uv(1,1,arguments);ja(d)||Wv(c,"Bad argument to assert(boolean)");d||Wv(c,"Call to assert(boolean) with false")}function Zv(a,b){Vv(1,arguments);var c=Tv(1,arguments),d=Uv(1,1,arguments);ja(d)||Wv(c,"Bad argument to assertTrue(boolean)");d||Wv(c,"Call to assertTrue(boolean) with false")}function $v(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments),h=Xv(d,e);d===e||Wv(Tv(2,arguments),h)}
function aw(a,b){Vv(1,arguments);var c="Expected not to be "+Mv(null);null!==Uv(1,1,arguments)||Wv(Tv(1,arguments),c)}function bw(a,b){Vv(1,arguments);var c="Expected not to be "+Mv(void 0);void 0!==Uv(1,1,arguments)||Wv(Tv(1,arguments),c)}
function cw(a,b,c){function d(a,b,c){for(var q=0;q<h.length;++q){var t=h[q]===a,s=k[q]===b;if(t||s){t&&s||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(q=Lv(a),t=Lv(b),q==t){var s="Array"==q,z=l(q,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(s&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(s?"[%s]":c?".%s":"%s"),a.__iterator__)la(a.Tl)?a.Tl(b)||e.push("equals() returned false for "+(c||
q)):a.Cb?d(a.Cb,b.Cb,z.replace("%s","map_")):e.push("unable to check "+(c||q)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)s&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||t)));for(y in b)s&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||q));if(s)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+Xv(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=Iv[a])?a(b,c)?"":Xv(b,c):null};d(a,b,"");return 0==e.length?null:Xv(a,b)+"\n   "+e.join("\n   ")}function dw(a,b,c){Vv(2,arguments);var d=Tv(2,arguments)?Tv(2,arguments):"",e=cw(Uv(1,2,arguments),Uv(2,2,arguments));!e||Wv(d,e)}function ew(a,b,c,d){Vv(3,arguments);var e=Uv(1,3,arguments),h=Uv(2,3,arguments),k=Uv(3,3,arguments);Jv(e,h,k)||Wv(Tv(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function fw(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function gw(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function hw(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function Wv(a,b){ca.CLOSURE_INSPECTOR___&&ca.CLOSURE_INSPECTOR___.supportsJSUnit&&ca.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new iw(a,b);}
function iw(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=Fv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new tv("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(Ev(c[e]));c=d}else c=Dv();for(d=c.length-1;c[d]&&uv(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(vv(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,iw):this.stack=Error().stack||""}w(iw,Error);iw.prototype.toString=function(){return this.message};v("fail",function(a){Wv("Call to fail()",a)});v("assert",Yv);
v("assertThrows",function(a,b){Vv(1,arguments);var c=Uv(1,1,arguments),d=Tv(1,arguments);"function"==typeof c||Wv(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&r(e.stacktrace)&&r(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}Wv(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){Vv(1,arguments);var c=Tv(1,arguments),d=Uv(1,1,arguments);"function"==typeof d||Wv(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",Wv(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",Zv);
v("assertFalse",function(a,b){Vv(1,arguments);var c=Tv(1,arguments),d=Uv(1,1,arguments);ja(d)||Wv(c,"Bad argument to assertFalse(boolean)");!d||Wv(c,"Call to assertFalse(boolean) with true")});v("assertEquals",$v);v("assertNotEquals",function(a,b,c){Vv(2,arguments);var d=Uv(2,2,arguments),e="Expected not to be "+Mv(d);Uv(1,2,arguments)!==d||Wv(Tv(2,arguments),e)});v("assertNull",function(a,b){Vv(1,arguments);var c=Uv(1,1,arguments),d=Xv(null,c);null===c||Wv(Tv(1,arguments),d)});
v("assertNotNull",aw);v("assertUndefined",function(a,b){Vv(1,arguments);var c=Uv(1,1,arguments),d=Xv(void 0,c);void 0===c||Wv(Tv(1,arguments),d)});v("assertNotUndefined",bw);v("assertNotNullNorUndefined",function(a,b){Vv(1,arguments);aw.apply(null,arguments);bw.apply(null,arguments)});v("assertNonEmptyString",function(a,b){Vv(1,arguments);var c=Uv(1,1,arguments),d="Expected non-empty string but was "+Mv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||Wv(Tv(1,arguments),d)});
v("assertNaN",function(a,b){Vv(1,arguments);isNaN(Uv(1,1,arguments))||Wv(Tv(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){Vv(1,arguments);!isNaN(Uv(1,1,arguments))||Wv(Tv(1,arguments),"Expected not NaN")});v("assertObjectEquals",dw);
v("assertObjectRoughlyEquals",function(a,b,c,d){Vv(3,arguments);var e=Uv(3,3,arguments),h=Tv(3,arguments)?Tv(3,arguments):"",k=cw(Uv(1,3,arguments),Uv(2,3,arguments),function(a,b,c){return(a=Kv[a])?a(b,c,e)?"":Xv(b,c)+" which was more than "+e+" away":null});!k||Wv(h,k)});v("assertObjectNotEquals",function(a,b,c){Vv(2,arguments);var d=Tv(2,arguments)?Tv(2,arguments):"";cw(Uv(1,2,arguments),Uv(2,2,arguments))||Wv(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments),h=Tv(2,arguments)?Tv(2,arguments):"",k=Lv(d);"Array"==k||Wv(h,"Expected an array for assertArrayEquals but found a "+k);k=Lv(e);"Array"==k||Wv(h,"Expected an array for assertArrayEquals but found a "+k);dw(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments),h=Tv(2,arguments)?Tv(2,arguments):"";if(d){$v("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)$v("mismatch at index "+k+": "+h,d[k],e[k])}else Yv(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){Vv(3,arguments);var e=Uv(1,3,arguments),h=Uv(2,3,arguments),k=Uv(3,3,arguments),l=Tv(3,arguments)?Tv(3,arguments):"";if(e){$v("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)ew(l,e[n],h[n],k)}else Yv(l,!h)});
v("assertSameElements",function(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments),h=Tv(2,arguments);Zv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ia(d)&&ia(e));d=fw(d);e=fw(e);d.length==e.length||Wv(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=fw(d),l=0;l<e.length;l++){var n=gw(k,e[l]);-1!=n||Wv(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){Vv(1,arguments);Uv(1,1,arguments)||Wv(Tv(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){Vv(1,arguments);Uv(1,1,arguments)&&Wv(Tv(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){Vv(2,arguments);var d=Uv(2,2,arguments),e=hw(Uv(1,2,arguments)),d=hw(d),h=Xv(e,d);e===d||Wv(Tv(2,arguments),h)});
v("assertHashEquals",function(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments),h=Tv(2,arguments),k;for(k in d)k in e||Wv(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||Wv(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||Wv(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",ew);
v("assertContains",function(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments);-1!=gw(e,d)||Wv(Tv(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments);-1==gw(e,d)||Wv(Tv(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){Vv(2,arguments);var d=Uv(1,2,arguments),e=Uv(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||Wv(Tv(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function jw(){W.call(this);this.wb=[];this.Fp={};this.Eb={LO:null,Nm:null,Qf:null,DD:null,LM:null,ED:null,JE:null,UE:null};this.Eb.Nm=R("div",{id:jw.ID_PREFIX+"_menu_top_left_"+B(),"class":jw.CSS.uE,viewbox:this.a().id});ci(this.a(),this.Eb.Nm,0);this.Gb=R("div",{id:jw.ID_PREFIX+"_ViewFrame_"+B(),"class":jw.CSS.Gx});$h(this.a(),this.Gb);E(["top","bottom","left","right"],function(a){$h(this.Gb,R("div",{id:jw.ID_PREFIX+"_ViewFrameBorder_"+B(),"class":jw.CSS.Gx+"-border-"+a}))}.bind(this));this.$b=new Gh;
$h(this.Gb,this.$b.a());this.$b.a().style.opacity=0;kw(this.$b,0);this.o();this.dv()}w(jw,W);v("xiv.ui.ViewBox",jw);jw.ID_PREFIX="xiv.ui.ViewBox";jw.CSS_SUFFIX={jN:"hidden",yO:"tabdragger",zO:"tabdragger-handle",hF:"viewlayoutmenu",uE:"menu-top-left",tE:"menu-left",gF:"viewlayouthandler",AO:"ziptabs",BO:"ziptab-bounds",Gx:"viewframe",VM:"component-highlight",cF:"viewablegroupmenu",bN:"emptymenubutton"};var lw={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=jw.prototype;
f.xJ="empty";f.Zd=null;f.Pa=null;f.Ob=null;f.na=null;f.$b=null;f.ge=null;f.L=null;f.zh=null;f.ae=null;f.LA=!1;f.Fs=!1;f.Em=null;f.Xk=null;f.Fm=null;f.nm=!1;f.rs=!1;f.oJ=function(){return this.nm};f.Ta=function(){return this.na};f.HH=function(){return this.Eb};f.CH=function(){return this.xJ};f.zI=function(){return this.wb};f.vI=function(){return this.Gb};f.zH=function(){return this.Pa};f.AH=function(){return this.Ob};f.xI=function(){return this.ge};
function mw(a,b){var c=new Wf,d=0;null!=b||(b=function(a){return a});c.setInterval(20);H(c,Xf,function(){d+=20;str="0px 0px 0px 2px rgba(255,255,255,"+b(d/200)+")";this.Gb.style.BP=str;200<d&&(c.stop(),c.g(),delete c)}.bind(a));c.start()}f.Mu=function(){mw(this)};f.sp=function(){mw(this,function(a){return 1-a})};f.mI=function(){return this.Gj};f.Tu=function(){return null!=this.Gj};f.Kt=function(){this.Gj=void 0};f.sG=function(a){this.gu=this.gu?this.gu:[];this.gu.push(a)};f.pi=function(a){this.Ob.Xo(a)};
f.IK=function(){this.$b.C(0);this.$b.vw(!0);nw(this,this.$b,0)};function ow(a,b){a.$b.Hf("");a.$b.vw(!0);a.$b.C(100*b)}f.Pv=function(a){if(this.Fs)ow(this,.5*a.value+.5);else if(1<this.Fm){var b=1/this.Fm;if(.96<a.value&&this.Xk!=a.value&&.96>this.Xk&&this.Xk<a.value)this.Em++,ow(this,b*this.Em);else{this.Xk=a.value;var b=1/this.Fm,c=b*this.Em+a.value*b;this.Xk<a.value&&ow(this,c+a.value*b)}}else ow(this,a.value)};
function pw(a){var b=a.na.Bk();!0==b[K.SINGLE_FRAME_SCAN]?(a.pi("Transverse"),b=Sr(a.Pa),E(b,function(a){-1==a.id.indexOf("ZoomDisplay")&&(a.style.visibility="hidden")}),S(a.Ob.a())):null!=a.wb[0].Ub()?a.pi(a.wb[0].Ub()):null!=b[K.ORIENTATION_KEY]&&a.pi(db(a.na.Bk()[K.ORIENTATION_KEY]));Yf(function(){this.fc(vu);this.fc(this.ae.Rz("levels"))}.bind(a),700)}
f.Ir=function(){this.zh.Cs(!1);E(Oh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.nm=this.Fs=!1;this.L.hz();this.L.Hq().qw(this.Ob.tj.src);this.ae.gz();this.ae.Ky();var a=[this.Eb.Qf,this.Ob.a()];a.push(this.Pa.a());var b=[];b.push(this.$b.a());"demo"!=fm.MODE&&(a=Mb(a,this.L.xA()),pw(this),this.na.Bk()[K.SINGLE_FRAME_SCAN]||(a=Mb(a,Sr(this.Pa))));var c=[],d=[],e=[],h=[];E(a,function(){c.push(0);d.push(1)});d[0]=.5;E(b,function(){e.push(1);h.push(0)});Pk(Mb(a,b),Mb(c,e),Mb(d,h),400,
null,null,function(){this.Eb.Qf.style.removeProperty("opacity");this.$b.C(0);kw(this.$b,0);this.dispatchEvent("aa");this.rs=!1;this.o();this.Hr()}.bind(this))};f.Lv=function(a){C(this.na.wc,function(b,c){null!=a.Tw[c]&&(b.$k(a.Tw[c]),b.o())})};f.Hr=function(){this.na&&this.na.o();null!=this.ae&&this.ae.update();null!=this.na&&this.ae.DB()};
function qw(a,b){a.ge.reset();D(a.Fp);Ib(a.wb,b)||a.wb.push(b);1==a.wb.length&&a.pi(lw[b.cg]);var c=b.Wc,d=null;1<c.length?(E(c,function(a,b){d=this.ge.Zi(a.Cm,a.Rd()||b);this.Fp[na(d)]=a}.bind(a)),kw(a.$b,0),nw(a,a.ge,200)):a.load(c[0],!1)}f.pH=function(){return 700};function rw(a,b){Cu("Scans with frame counts greater than 700 may crash the Viewer.&nbspAre you sure you want to continue?",a.Gb,b)}function sw(a,b){Cu("ViewBox in use.&nbspProceed anyway?",a.Gb,b)}
function tw(a,b,c){var d=function(){this.load(b,c)}.bind(a),e=b.Wc[0];if(null!=e.wA){var h=700<e.Fd[0].lg().length;if("scans"==e.cg.toLowerCase()&&h&&!a.rs)return rw(a,function(){this.rs=!0;d()}.bind(a)),!1}return a.Tu()?(sw(a,function(){this.Kt();d()}.bind(a)),!1):!0}
f.load=function(a,b){kw(this.$b,0);null!=this.zh?(this.zh.clear(),this.zh.Cs(!1)):(this.zh=new gv,this.zh.iC(this.Gb),this.zh.xC(this.Jr.bind(this)));this.dispatchEvent("$");if(!(a instanceof Vl)||tw(this,a,b))if(this.nm=!0,null!=a){if(null!=b?b:1)uw(this),vw(this),this.L=new uu(this),this.Pa=new Rr,this.Pa.a().style.opacity=0,$h(this.Gb,this.Pa.a()),Q(this.Pa.a(),jw.CSS.gF),H(this.Pa,"z",this.Hr.bind(this)),H(this.Pa,"w",this.Lv.bind(this)),H(this.Pa,"y",this.Mv.bind(this)),H(this.Pa,"x",this.Kv.bind(this)),
this.na=new Ut,ww(this),this.ae=new Y(this,this.na,this.Pa,this.L),this.ae.eD(this.Ob),this.LA=!0;nw(this,this.$b,200);if(a instanceof Vl)qw(this,a);else{var c;C(this.na.wc,function(a,b){(c=this.Pa.Qz(b))&&a.ta(c.a())}.bind(this));Tc(this.na,"j",this.IK.bind(this));Tc(this.na,"l",this.Ir.bind(this));H(this.na,"k",this.Pv.bind(this));this.Em=null;"scans"==a.cg.toLowerCase()?(ow(this,0),nw(this,this.$b,200,function(){xw(this,a)}.bind(this))):(yw(this,a),zw(this,a))}}else this.Jr("The data set is empty!")};
function yw(a,b){a.Em=0;a.Xk=0;a.Fm=b.Fd.length+8;E(b.Fd,function(a){null!=a.de.labelMapFile&&this.Fm++}.bind(a))}
function xw(a,b){a.Fs=!0;var c=a.wb[a.wb.length-1].sA(),d=b.Fd[0].lg()[0],e="";null!=d?(-1!=d.toLowerCase().indexOf("xiv/sample-data/scans/")?(d=d.split("xiv/sample-data/scans/"),e=d[0]+"xiv/sample-data/scans/"+(d[1].split("/")[0]+".zip")):e=d.split("/files/")[0]+"/files",window.console.log("XImgView Zip Downloading (XHR): "+e),Al(e,function(a){window.console.log("Downloaded: "+e+"!");b.Fd[0].kC(a,function(){zw(this,b)}.bind(this),hm)}.bind(a),function(a){0<a.totalSize?ow(this,a.loaded/a.totalSize*
.5):0<c&&ow(this,a.loaded/c*.5)}.bind(a))):a.zh.Gv("No readable files in the data set!")}function zw(a,b){a.zh.Cs(!0);a.na.k(b);a.Gj=(new Date).getTime()}f.Jr=function(){this.nm=!1;this.sp();kw(this.$b,200);uw(this);this.Kt();this.dispatchEvent({type:"ba"})};f.Mv=function(){C(this.na.wc,function(a){a.o()});this.ae.update()};f.Kv=function(a){var b=a.frames;C(this.na.wc,function(a,d){null!=b[d]&&(a.$k(b[d].a()),a.o())}.bind(this));this.ae.update()};
function kw(a,b,c){var d=a.a();if(null!=a){b=u(b)&&0<=b?b:0;var e=function(){d.style.visibility="hidden";S(d);null!=a.Ln&&S(a.mc);c&&c()};if("hidden"==d.style.visibility||0==b)e();else{var h=[d],k=[d.style.opacity];null!=a.Ln&&null!=a.mc&&(h.push(a.mc),k.push(a.mc.style.opacity));Pk(h,k,0,b,null,null,e)}}}
function nw(a,b,c,d){var e=b.a();c=u(c)&&0<=c?c:0;e.style.opacity="0";e.style.visibility="visible";$h(a.Gb,e);null!=b.Ln&&$h(a.Gb,b.mc);0==c?(e.style.opacity="1",d&&d()):(a=[e],e=[e.style.opacity],null!=b.Ln&&null!=b.mc&&(a.push(b.mc),e.push(b.mc.style.opacity)),Pk(a,e,1,c,null,null,d))}f.ws="Info.;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");
function Aw(a,b,c,d){var e=di(b),h=[],k;E(a.ws,function(){h.push(null)});h[d]=c;E(e,function(a){k=this.ws.indexOf(a.title);h[k]=a}.bind(a));ai(b);E(h,function(a){null!=a&&b.appendChild(a)})}
f.hk=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Eb.Nm;break;case "LEFT":d=this.Eb.Qf;break;case "BOTTOM_LEFT":d=this.Eb.DD;break;case "TOP_RIGHT":d=this.Eb.UE;break;case "RIGHT":d=this.Eb.JE;break;case "BOTTOM_RIGHT":d=this.Eb.ED}u(c)?d.insertBefore(b,d.childNodes[c]):(a=this.ws.indexOf(b.title),0<a?Aw(this,d,b,a):$h(d,b));Bw(this)};
f.Ao=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?zk(a,200,1,null,.5):zk(a,200,.5);null!=b&&b(a)};f.jD=function(a){return"true"==this.Zd[a].getAttribute("checked").toString()};f.Cu=function(a){return this.Zd[a]};f.fc=function(a){Pn(this.Zd[a])};f.Ww=function(a){g(a)||(a=[a]);E(a,function(a){null!=this.Zd[a]&&this.jD(a)&&Pn(this.Zd[a])}.bind(this))};
f.QC=function(a){var b=this.Pa.Kq();C(b,function(b){E([b.of.a(),b.Dd.a()],function(b){a?(b.style.visibility="visible",b.style.opacity=0,yk(b,200)):Bk(b,200,function(){b.style.visibility="hidden"})})})};
f.ok=function(a,b,c,d,e,h){var k=b+"-on",l=R("img",b);l.id=nj(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(yu,b+"-on");Q(l,k);sk(l,{cursor:"pointer"});H(l,"click",function(){this.Ao(l,e)}.bind(this));this.hk(a,l);if(null==this.Zd)this.Zd={};else if(null!=this.Zd[c])throw Error("Invalid identifier for toggle button.  In use.");return this.Zd[c]=l};
function vw(a){a.Eb.Qf=R("div",{id:jw.ID_PREFIX+"_menu_left_"+B(),"class":jw.CSS.tE,viewbox:a.a().id});a.Eb.Qf.style.opacity=0;ci(a.a(),a.Eb.Qf,1);a.Ob=new kp;a.Ob.hC("Select Layout");Q(a.Ob.a(),jw.CSS.hF);a.Ob.jB(!0);a.Ob.a().style.opacity=0;a.Ob.te.style.opacity=0;var b=a.Ob.a();Ob(a.ws,void 0,0,b.title);a.hk("LEFT",b);a.Gb.appendChild(a.Ob.te)}
function ww(a){a.ge=new qv;a.ge.k(a.Gb);$h(a.Gb,a.ge.a());Q(a.ge.a(),jw.CSS.cF);H(a.ge,"Z",function(a){kw(this.ge,200,function(){this.load(this.Fp[na(a.Mw)],!1)}.bind(this))}.bind(a));kw(a.ge,0)}f.oI=function(){return this.Zd};function Bw(a){var b,c,d,e;null!=a.Eb.Nm&&(d=a.Eb.Nm,e=U(d),b=0,c=e.height);null!=a.Eb.Qf&&(d=a.Eb.Qf,e=U(d),a=a.A.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.o=function(a){jw.d.o.call(this,a);null!=this.Pa&&this.Pa.o();this.na&&this.na.o();null!=this.Ob&&(a=Gi(this.Eb.Qf),U(this.Ob.te),a=a.y-130,this.Ob.oC(0,a),this.Ob.DC(0,a));Bw(this);null!=this.L&&this.L.update();null!=this.ae&&this.ae.qD()};
function uw(a){D(a.Fp);Jb(a.wb);null!=a.Pa&&(J(a.Pa),Ac(a.Pa.g()),delete a.Pa);null!=a.L&&a.L.g();null!=a.Ob&&(J(a.Ob),a.Ob.g(),delete a.Ob);null!=a.na&&(a.na.g(),delete a.na);null!=a.ge&&(a.ge.g(),delete a.ge);null!=a.ae&&a.ae.g();null!=a.Zd&&(S(a.Eb.Qf),delete a.Eb.Qf,C(a.Zd,function(a){J(a);S(a)}),Jb(a.Zd),delete a.Zd)}f.hr=!1;f.gr=function(){return this.hr};f.dv=function(){H(this.a(),"mouseenter",function(){this.hr=!0}.bind(this));H(this.a(),"mouseleave",function(){this.hr=!1}.bind(this))};
f.f=function(){jw.d.f.call(this);uw(this);null!=this.$b&&(this.$b.g(),delete this.$b);S(this.Gb);J(this.Gb);delete this.Gb;C(this.Eb,function(a,b){S(a);delete this.Eb[b]}.bind(this));delete this.Eb;delete this.rP;delete this.LA;delete this.Fs;delete this.hr;delete this.Em;delete this.Xk;delete this.Fm;delete this.rs};v("xiv.ui.ViewBox.EventType",{eF:"$",dF:"aa",ZN:"ba"});v("xiv.ui.ViewBox.ID_PREFIX",jw.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",jw.CSS_SUFFIX);v("xiv.ui.ViewBox.defaultLayout",lw);
v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",jw.prototype.Ta);v("xiv.ui.ViewBox.prototype.getMenus",jw.prototype.HH);v("xiv.ui.ViewBox.prototype.getLoadState",jw.prototype.CH);v("xiv.ui.ViewBox.prototype.getViewableTrees",jw.prototype.zI);v("xiv.ui.ViewBox.prototype.getViewFrame",jw.prototype.vI);v("xiv.ui.ViewBox.prototype.getLayoutHandler",jw.prototype.zH);v("xiv.ui.ViewBox.prototype.getLayoutMenu",jw.prototype.AH);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",jw.prototype.xI);v("xiv.ui.ViewBox.prototype.highlight",jw.prototype.Mu);v("xiv.ui.ViewBox.prototype.unhighlight",jw.prototype.sp);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",jw.prototype.mI);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",jw.prototype.Kt);v("xiv.ui.ViewBox.prototype.doNotHide",jw.prototype.sG);v("xiv.ui.ViewBox.prototype.setLayout",jw.prototype.pi);v("xiv.ui.ViewBox.prototype.showCornerInteractors",jw.prototype.QC);
v("xiv.ui.ViewBox.prototype.load",jw.prototype.load);v("xiv.ui.ViewBox.prototype.addToMenu",jw.prototype.hk);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",jw.prototype.Ao);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",jw.prototype.jD);v("xiv.ui.ViewBox.prototype.getToggleButton",jw.prototype.Cu);v("xiv.ui.ViewBox.prototype.getHighFrameCountThreshold",jw.prototype.pH);v("xiv.ui.ViewBox.prototype.fireToggleButton",jw.prototype.fc);v("xiv.ui.ViewBox.prototype.untoggle",jw.prototype.Ww);
v("xiv.ui.ViewBox.prototype.createToggleButton",jw.prototype.ok);v("xiv.ui.ViewBox.prototype.getToggleButtons",jw.prototype.oI);v("xiv.ui.ViewBox.prototype.isMouseOver",jw.prototype.gr);v("xiv.ui.ViewBox.prototype.isRendering",jw.prototype.oJ);v("xiv.ui.ViewBox.prototype.isInUse",jw.prototype.Tu);v("xiv.ui.ViewBox.prototype.showInUseDialog",jw.prototype.uQ);v("xiv.ui.ViewBox.prototype.updateStyle",jw.prototype.o);v("xiv.ui.ViewBox.prototype.disposeInternal",jw.prototype.f);function Cw(){Gn.call(this)}w(Cw,Gn);Cw.prototype.fk=function(a,b){var c=new Nn(a,b);c.Uo(this);this.ho.push(c);this.vj&&In(this,c)};function Dw(){W.call(this)}w(Dw,W);v("xiv.ui.ViewBoxHandler",Dw);Dw.CSS_SUFFIX={WD:"handle",fF:"viewboxdragclone",Lj:"closebutton",fx:"addrowbutton",ex:"addcolumnbutton"};Dw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=Dw.prototype;f.Ls=5;f.wx=5;f.nl=document.body;f.yj=function(a,b){this.dispatchEvent({type:"ea",wB:a,NF:b})};f.GL=function(){return this.F.length};f.On=function(){var a=[];E(this.F,function(b,c){a.push([]);E(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.F&&E(this.F,function(b,c){E(b,function(d,e){a(d,c,e,this.F.length,b.length)}.bind(this))}.bind(this))};f.Qu=function(a,b){this.F||(this.F=[[]]);var c=0,d=[],e;if(null!=a)c=Ew(this,a),this.F[c.Yq].length<this.wx&&(d.push(Fw(this)),Ob(this.F[c.Yq],c.rJ+1,0,d[0]));else{d=[];e=this.F.length?this.F.length:1;for(c=0;c<e;c++)d.push(Fw(this));0===this.F.length?this.F.push([d[0]]):E(this.F,function(a,b){a.push(d[b])})}this.yj(d,void 0===b?!0:b);Gw(this)};
f.xL=function(a){this.F&&(a=void 0===a?!0:a,this.F[0]&&1<this.F[0].length&&E(this.F,function(a){var c=a.length-1;Hw(this,a[c]);a.splice(c,1)}.bind(this)),this.yj(null,a),Gw(this))};function Ew(a,b){for(var c=0,d=0,e=a.F.length,h=0,c=0;c<e;c++)for(d=0,h=a.F[c].length;d<h;d++)if(b===a.F[c][d])return{Yq:c,rJ:d}}f.Ts=function(){for(var a=0,b=0,c=this.F.length,d=0,a=0;a<c;a++)for(b=0,d=this.F[a].length;b<d;b++)if(this.F[a][b].nm)return!0;return!1};
f.insertRow=function(a,b){this.F||(this.F=[[]]);var c=[],d,e;if(null!=a){var h=Ew(this,a),c=[];e=this.F[h.Yq].length;if(this.F.length<this.Ls){for(d=0;d<e;d++)c.push(Fw(this));Ob(this.F,h.Yq+1,0,c)}}else if(e=this.F[0]&&this.F[0].length?this.F[0].length:1,this.F.length<this.Ls){for(d=0;d<e;d++)c.push(Fw(this));this.F.push(c)}this.yj(c,void 0===b?!0:b);Gw(this)};
f.zL=function(a){this.F&&(a=void 0===a?!0:a,1<this.F.length&&(E(this.F[this.F.length-1],function(a){Hw(this,a)}.bind(this)),this.F.splice(this.F.length-1,1)),this.yj(null,a),Gw(this))};f.Pq=function(a){for(var b=0,c=0,d=this.F.length,e=0,b=0;b<d;b++)for(c=0,e=this.F[b].length;c<e;c++)if(a===this.F[b][c].a())return this.F[b][c]};f.tI=function(a,b){return this.F[a][b].a()};f.rI=function(a,b){return this.F[a][b]};f.vA=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.uA=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.IC=function(a){this.nl=a};
function Fw(a){var b=new jw;$h(a.nl,b.a());Iw(a,b);var c=R("img",{id:Dw.ID_PREFIX+"_dragHandle_"+B(),"class":Dw.CSS.WD});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.hk("TOP_LEFT",c,1);a.sk||(a.sk={});a.sk[b.a().id]=c;c.title="Drag / Swap ViewBox";Jw(a,b);Kw(a,b);H(b,"aa",a.Tv.bind(a));H(b,"$",a.Uv.bind(a));H(b,"ba",a.Jr.bind(a));return b}
function Kw(a,b){var c=R("img",{id:Dw.ID_PREFIX+"_CloseButton_"+B(),"class":Dw.CSS.ex,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});uk(c,Dw.CSS.ex+"-hovered");H(c,"click",function(){this.Qu(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.hk("TOP_LEFT",c,1);a.jy||(a.jy={});a.jy[b.a().id]=c;c.title="Add ViewBox Column"}
function Jw(a,b){var c=R("img",{id:Dw.ID_PREFIX+"_CloseButton_"+B(),"class":Dw.CSS.fx,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});uk(c,Dw.CSS.fx+"-hovered");H(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.hk("TOP_LEFT",c,1);a.ry||(a.ry={});a.ry[b.a().id]=c;c.title="Add ViewBox Row"}
function Iw(a,b){var c=R("img",{id:Dw.ID_PREFIX+"_CloseButton_"+B(),"class":Dw.CSS.Lj,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});uk(c,Dw.CSS.Lj+"-hovered");H(c,"click",function(){Lw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.hk("TOP_LEFT",c,1);a.vn||(a.vn={});a.vn[b.a().id]=c;c.title="Close ViewBox"}f.Tv=function(a){this.dispatchEvent({type:"da",iF:a.target})};f.Ss=function(a,b){this.loop(function(c){Ib(c.wb,a)&&b(c)})};f.Uv=function(a){this.dispatchEvent({type:"ca",iF:a.target})};
f.Jr=function(a){this.dispatchEvent(a)};function Hw(a,b){zk(b.a(),150,0);S(a.sk[b.a().id]);S(a.vn[b.a().id]);b.g()}function Mw(a,b){var c=[],d;Hw(a,b);E(a.F,function(a){d=[];E(a,function(a){a.rk||d.push(a)}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.F=c;a.yj(null,!0);Gw(a)}function Lw(a,b){1!=a.yB()&&(b.Tu()?sw(b,function(){Mw(this,b)}.bind(a)):Mw(a,b))}f.Uu=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.yB=function(){var a=0;this.loop(function(){a++});return a};
f.sI=function(a){for(var b=0,c=0,d=this.F.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.F[b].length;c<e;c++)if(this.F[b][c]===a)return e=b+1===this.F.length,h=c+1===this.F[b].length,e&&h?this.F[0][0]:e&&!h?this.F[0][c+1]:!e&&h?this.F[b+1][0]:this.F[b+1][c+1]};f.Xz=function(){var a;this.loop(function(b){null!=a||null!=b.Gj||(a=b)}.bind(this));if(null!=a)return a;var b=this.vA();g(b)?b.sort(function(a,b){return a.Gj<b.Gj?-1:a.Gj>b.Gj?1:0}):b=[b];return b[0]};
function Nw(a,b,c){var d=new ik,e=a.Mg[b.id],h=a.Mg[c.id];b[Ow]=!0;c[Ow]=!0;d.add(new Xj(b,[b.offsetLeft,b.offsetTop],[h.x,h.y],300,wk));d.add(new Xj(c,[c.offsetLeft,c.offsetTop],[e.x,e.y],300,wk));Tc(d,"end",function(){b[Ow]=!1;c[Ow]=!1;Pw(this);for(var a,d,e,h,m=0,q=0,t=this.F.length,s,z;m<t;m++)for(q=this.F[m],s=q.length,q=0;q<s;q++)z=this.F[m][q],this.Uu(z,b)&&(a=m,d=q),this.Uu(z,c)&&(e=m,h=q);u(a)&&u(e)&&(m=this.F[a][d],this.F[a][d]=this.F[e][h],this.F[e][h]=m,m=U(this.F[a][d].a()),t=U(this.F[e][h].a()),
Ri(this.F[e][h].a(),m),Ri(this.F[a][d].a(),t))}.bind(a));d.play()}f.Jt=function(){this.pe&&(Jn(this.pe),Jn(this.Vh),delete this.pe,delete this.Vh)};function Qw(a){a.loop(function(a){null!=a.a()&&(this.pe.fk(this.sk[a.a().id]),this.Vh.fk(a.a()))}.bind(a))}function Gw(a){a.Jt();a.pe=new Cw;a.Vh=new Cw;Qw(a);Hn(a.pe,a.Vh);a.pe.ta();a.Vh.ta();a.pe.Rt=a.St.bind(a);H(a.pe,"dragstart",a.hK.bind(a));H(a.pe,"dragover",a.Fv.bind(a));H(a.pe,"dragend",a.Ev.bind(a))}f.St=function(a){return Rw(Nh(a.getAttribute("viewboxid")))};
f.hK=function(){null!=this.Mg?D(this.Mg):this.Mg={};Pw(this)};function Rw(a){var b=document.body;a=a.cloneNode(!1);a.className=Dw.CSS.fF;b&&b.appendChild(a);return a}var Ow=B();Dw.prototype.Fv=function(a){if(a.Rl.element.id!==a.xq.$i.getAttribute("viewboxid")){var b=Nh(a.xq.$i.getAttribute("viewboxid"));a=Nh(a.Rl.element.id);b[Ow]||a[Ow]||Nw(this,b,a)}};function Pw(a){a.loop(function(a){this.Mg[a.a().id]=Gi(a.a())}.bind(a))}
Dw.prototype.Ev=function(a){var b=a.xq.Ua.tk;a=Nh(a.xq.$i.getAttribute("viewboxid"));a=Oi(a);a={left:a.x,top:a.y};var c=Rw(b);$h(this.nl.parentNode?this.nl.parentNode:this.nl,c);b=pk(b);sk(c,{top:b.top,left:b.left,"z-index":1E4});Sw(c,a).play();Tw(this);this.yj()};function Sw(a,b){var c=new ik;c.add(new Xj(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,wk));H(c,"end",function(){S(a)});return c}function Tw(a){a.loop(function(a){this.sk[a.a().id].style.visibility="visible"}.bind(a))}
Dw.prototype.f=function(){Dw.d.f.call(this);this.loop(function(a){J(a);S(a.a());a.g()}.bind(this));E(this.F,function(a){Jb(a)});Jb(this.F);delete this.F;this.wq(this.sk);delete this.sk;this.wq(this.vn);delete this.vn;C(this.Mg,function(a,b){D(this.Mg[b]);delete this.Mg[b]}.bind(this));D(this.Mg);delete this.Mg;null!=this.pe&&(J(this.pe),this.pe.g());delete this.pe;null!=this.Vh&&(J(this.Vh),this.Vh.g());delete this.Vh;delete this.nl};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",Dw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{eF:"ca",dF:"da",dP:"ea"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",Dw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",Dw.prototype.Ls);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",Dw.prototype.wx);v("xiv.ui.ViewBoxHandler.prototype.rowCount",Dw.prototype.GL);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",Dw.prototype.On);v("xiv.ui.ViewBoxHandler.prototype.loop",Dw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",Dw.prototype.Qu);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",Dw.prototype.xL);v("xiv.ui.ViewBoxHandler.prototype.insertRow",Dw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",Dw.prototype.zL);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",Dw.prototype.Pq);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",Dw.prototype.tI);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",Dw.prototype.rI);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",Dw.prototype.vA);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",Dw.prototype.uA);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",Dw.prototype.IC);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",Dw.prototype.Ss);v("xiv.ui.ViewBoxHandler.prototype.isMatch",Dw.prototype.Uu);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",Dw.prototype.yB);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",Dw.prototype.sI);
v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",Dw.prototype.Xz);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxesRendering",Dw.prototype.Ts);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",Dw.prototype.f);function Uw(a){var b=Vw;return function(){var c=this||ca,c=c[Ww]||(c[Ww]={}),d=b(na(a),arguments);return c.hasOwnProperty(d)?c[d]:c[d]=a.apply(this,arguments)}}var Ww="closure_memoize_cache_";function Vw(a,b){for(var c=[a],d=b.length-1;0<=d;--d)c.push(typeof b[d],b[d]);return c.join("\x0B")};function Xw(a){$c.call(this);this.Pl=a||Kh();if(this.Bz=this.MG())this.zG=H(this.Pl.la,this.Bz,ua(this.Eu,this))}w(Xw,$c);f=Xw.prototype;f.MG=Uw(function(){var a=this.isSupported(),b="hidden"!=this.Iq();return a?b?((yh()||"")+"visibilitychange").toLowerCase():"visibilitychange":null});f.Iq=Uw(function(){return zh("hidden",this.Pl.la)});f.AI=Uw(function(){return zh("visibilityState",this.Pl.la)});f.isSupported=function(){return!!this.Iq()};
f.Eu=function(){var a=this.isSupported()?this.Pl.la[this.AI()]:null,a=new Yw(!!this.Pl.la[this.Iq()],a);this.dispatchEvent(a)};f.f=function(){Vc(this.zG);Xw.d.f.call(this)};function Yw(a,b){Cc.call(this,"visibilitychange");this.hidden=a;this.visibilityState=b}w(Yw,Cc);function Zw(a){ti.call(this);this.gC(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png");this.nf=a;$w(this)}w(Zw,ti);v("xiv.ui.Thumbnail",Zw);Zw.ID_PREFIX="xiv.ui.Thumbnail";Zw.CSS_SUFFIX={ZD:"hoverinfo",$D:"hoverinfo-arrow",bE:"hoverinfo-arrowtop",aE:"hoverinfo-arrowbottom",lN:"hoverinfo-appear",mN:"hoverinfo-disappear",fE:"infohovertext",Ah:"image",Sj:"image"};f=Zw.prototype;f.jm=null;f.Td=null;f.zf=null;
function $w(a){var b="",c=a.nf.Ae;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=c.Name)b=c.Name;else if(null!=a.nf.ni)var d=a.nf.ni.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");E(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.Zo(e);ax(a)}
function ax(a){a.jm=R("div",{id:"MetdataLink_"+B()},"more...");Q(a.jm,Zw.CSS.fE);$h(a.a(),a.jm);Q(a.a(),"xiv-ui-thumbnail");Q(a.bb,Zw.CSS.Ah);a.Td=R("div",{id:"InfoHover_"+B()});Q(a.Td,Zw.CSS.ZD);$h(Oh("xiv-ui-modal")[0],a.Td);a.zf=R("div",{id:"InfoHoverArrow_"+B()});Q(a.zf,Zw.CSS.$D);$h(a.Td.parentNode,a.zf);var b=R("div",{id:"InfoHoverArrowBottom_"+B()});Q(b,Zw.CSS.aE);$h(a.zf,b);b=R("div",{id:"InfoHoverArrowTop_"+B()});Q(b,Zw.CSS.bE);$h(a.zf,b);a.Td.innerHTML=a.nf.yu();E([a.Td,a.zf],function(a){a.style.opacity=
0;a.style.visibility="hidden"});H(a.jm,"mouseenter",a.TC.bind(a));H(a.jm,"mouseleave",a.Lu.bind(a))}f.TC=function(){var a=Ni(this.a(),this.Td.parentNode);E([this.Td,this.zf],function(a){a.style.visibility="visible"});var b=a.y-13;b+this.Td.offsetHeight>window.innerHeight?b=window.innerHeight-U(this.Td).height:0>b&&(b=2);Ei(this.Td,a.x+U(this.a()).width+13,b);Ei(this.zf,a.x+U(this.a()).width-6,a.y+7);yk(this.Td,200);yk(this.zf,200)};
f.Lu=function(){Bk(this.Td,200,function(){this.Td.style.visibility="hidden"}.bind(this));Bk(this.zf,200,function(){this.zf.style.visibility="hidden"}.bind(this))};f.wI=function(){return this.nf};f.f=function(){Zw.d.f.call(this);this.nf.g();delete this.nf;delete this.jm;delete this.Td;delete this.zf};v("xiv.ui.Thumbnail.ID_PREFIX",Zw.ID_PREFIX);v("xiv.ui.Thumbnail.CSS_SUFFIX",Zw.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.getViewable",Zw.prototype.wI);v("xiv.ui.Thumbnail.prototype.hideInfo",Zw.prototype.Lu);
v("xiv.ui.Thumbnail.prototype.showInfo",Zw.prototype.TC);v("xiv.ui.Thumbnail.prototype.disposeInternal",Zw.prototype.f);function bx(){W.call(this);H(this,"N",function(){C(this.xc,function(a){a.Lu()})}.bind(this));this.Mf=new Cw;this.Eg=new Cw;this.Mf.Rt=this.St.bind(this);H(this.Mf,"dragover",this.Fv.bind(this));H(this.Mf,"dragend",this.Ev.bind(this));H(this.Mf,"dragout",this.gK.bind(this));H(this.Eg,"drop",this.iK.bind(this));Hn(this.Mf,this.Eg);this.Eg.ta();this.Mf.ta()}w(bx,lv);v("xiv.ui.ThumbnailGallery",bx);bx.ID_PREFIX="xiv.ui.ThumbnailGallery";bx.CSS_SUFFIX={Qs:"thumbnail-dragging"};
var cx="THUMBNAIL_DRAGGER_"+B(),dx=cx+"_FADER"+B();f=bx.prototype;f.Mf=null;f.Eg=null;f.Zi=function(a,b){var c=this.Bn(a);this.Jl(c,b);return c};f.Bn=function(a){var b=new Zw(a);H(b,"L",function(){this.dispatchEvent({type:"ja",Bi:b})}.bind(this));return b};f.Jl=function(a,b){bx.d.Jl.call(this,a,b);var c=a.a();c&&this.Mf.fk(c)};f.Xy=function(){Jn(this.Eg)};f.ty=function(a){this.Eg.fk(a)};f.uy=function(a){E(a,function(a){this.ty(a)}.bind(this))};f.kI=function(a){return this.xc[a.id]};
f.Jt=function(){null!=this.Mf&&(Jn(this.Mf),this.Mf.g());null!=this.Eg&&(Jn(this.Eg),this.Eg.g())};f.St=function(a){a=si(a).id;if(a in this.xc)return this.xc[a].setActive(!0,!0),a=this.xc[a].a().cloneNode(!0),a.setAttribute("id",cx+a.id),Q(a,bx.CSS.Qs),a};f.Fv=function(a){this.dispatchEvent({type:"ha",Nw:a.Rl.element})};f.gK=function(a){this.dispatchEvent({type:"ia",Nw:a.Rl.element})};
f.Ev=function(){var a=Oh(bx.CSS.Qs);E(a,function(a){Bk(a,300,function(){S(a)})});null!=a[0]&&this.xc[a[0].id.replace(cx,"")].setActive(!1,!0)};f.iK=function(a){var b=Rh(bx.CSS.Qs);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);S(b);a.Rl.element&&this.dispatchEvent({type:"ka",Bi:this.xc[b.id.replace(cx,"")],pM:a.Rl.element})}};f.f=function(){bx.d.f.call(this);this.Jt()};
v("xiv.ui.ThumbnailGallery.EventType",{wE:"fa",LN:"ga",IO:"ha",HO:"ia",FO:"ja",JO:"ka"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",bx.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",bx.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",cx);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",dx);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",bx.prototype.Zi);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",bx.prototype.Bn);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",bx.prototype.Jl);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",bx.prototype.Xy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",bx.prototype.ty);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",bx.prototype.uy);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",bx.prototype.kI);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",bx.prototype.f);function ex(){var a=vi(Kh());a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()};function fx(a,b,c,d){$c.call(this);this.rb=c||Kh();this.Sl=a;this.Ef=[];this.nM=b?b:gx;this.rD=!!d;this.tf()}w(fx,$c);var gx=0;f=fx.prototype;
f.tf=function(){this.Sl.className="goog-tabpane";for(var a=[],b=ei(this.Sl);b;)a.push(b),b=gi(b);this.qe=this.rb.B("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.qc=this.rb.B("div","goog-tabpane-cont");this.Sl.appendChild(this.qc);b=this.Sl;switch(this.nM){case gx:b.insertBefore(this.qe,this.qc);b.insertBefore(hx(this),this.qc);el(b,"goog-tabpane-top");break;case 1:b.appendChild(this.qe);b.appendChild(hx(this));el(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.qe,this.qc);el(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.qe,this.qc);el(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.qe.tabIndex=0;H(this.qe,this.rD?"mousedown":"click",this.Dr,!1,this);H(this.qe,"keydown",this.Er,!1,this);for(var c=0;b=a[c];c++)ix(this,new jx(b))};
function hx(a){var b=Kh(void 0),c=null,d=b.la;F&&d.createStyleSheet?(c=d.createStyleSheet(),Yi(c)):(d=Ph(b.la,"head",void 0,void 0)[0],d||(c=Ph(b.la,"body",void 0,void 0)[0],d=b.B("head"),c.parentNode.insertBefore(d,c)),c=b.B("style"),Yi(c),b.appendChild(d,c));return a.rb.B("div","goog-tabpane-clear")}f.f=function(){fx.d.f.call(this);Uc(this.qe,this.rD?"mousedown":"click",this.Dr,!1,this);Uc(this.qe,"keydown",this.Er,!1,this);delete this.Sl;this.qc=this.qe=null};
function ix(a,b){b.Ua&&b.Ua!=a&&b.Ua instanceof fx&&kx(b.Ua,b);var c=a.Ef.length;da(void 0)&&void 0!=c?(c=void 0,a.Ef.splice(c,0,b),a.qe.insertBefore(b.ej,a.qe.childNodes[c])):(a.Ef.push(b),a.qe.appendChild(b.ej));b.Vo(a,c);a.ph||(a.ph=b,a.dispatchEvent(new lx("change",a,a.ph)));a.qc.appendChild(b.qc);mx(b,b==a.ph);for(var d=c+1;c=a.Ef[d];d++)c.ao=d}function kx(a,b){u(b)&&(b=a.Ef[b]);a.Ef.splice(b.ao,1);b.Vo(null);S(b.ej);S(b.qc);for(var c,d=0;c=a.Ef[d];d++)c.Vo(a,d)}
function nx(a,b){if(0<=b&&b<a.Ef.length){var c=a.Ef[b];!c.isEnabled()||a.ph&&c==a.ph||(mx(a.ph,!1),mx(c,!0),a.ph=c,a.dispatchEvent(new lx("change",a,a.ph)))}}f.Ha=function(){return this.qc||null};f.a=function(){return this.Sl||null};f.Dr=function(a){for(var b=a.target;b!=this.qe;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);nx(this,c);break}b=b.parentNode}a.preventDefault()};
f.Er=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.ph.ao-1;nx(this,0>a?this.Ef.length-1:a);break;case 39:a=this.ph.ao+1;nx(this,a>=this.Ef.length?0:a);break;case 36:nx(this,0);break;case 35:nx(this,this.Ef.length-1)}};function jx(a,b,c){var d,e;if(r(a)&&!da(b))d=a;else if(b)d=b,e=a;else if(a){if(b=ei(a))d=pi(b),b.parentNode.removeChild(b);e=a}this.rb=c||Kh();this.qc=e||this.rb.B("div");this.ej=this.rb.B("li",null,d);this.ao=this.Ua=null;this.Tb=!0}f=jx.prototype;
f.Rd=function(){return pi(this.ej)};f.Be=function(a){ji(this.ej,a)};f.Oq=function(){return this.ej};f.Ha=function(){return this.qc};f.getParent=function(){return this.Ua};f.Lb=function(a){this.Tb=a;this.ej.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Tb};function mx(a,b){a.isEnabled()&&(a.qc.style.display=b?"":"none",a.ej.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.Vo=function(a,b){this.Ua=a;this.ao=da(b)?b:null};
function lx(a,b,c){Cc.call(this,a,b);this.page=c}w(lx,Cc);function Z(a){W.call(this);if(null!=a){var b=a;if(!r(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==ox.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||px}w(Z,W);v("nrg.ui.Tabs",Z);var ox=["TOP","BOTTOM","LEFT","RIGHT"],px=ox[0];Z.ID_PREFIX="nrg.ui.Tabs";Z.CSS_SUFFIX={ac:"tab",Ai:"tab-active",kf:"page",zE:"page-content",Bp:"page-active",ob:"icon",ll:"icon-active",cE:"icon-content",lO:"scrollgallery"};
function qx(a,b,c,d,e){this.Kj=!1;this.TITLE=a;this.ac=b;this.ob=c;this.kf=d;this.Ch=e}f=Z.prototype;f.Bf=0;f.rm=0;f.Xd=null;f.k=function(a){Z.d.k.call(this,a);this.Dk=new fx(this.a());this.M=[];Q(this.a(),Z.Vc)};f.gI=function(){return this.M.length};f.vH=function(){return this.Bf};f.UH=function(){return this.rm};f.Mq=function(){var a=[];E(this.M,function(b){a.push(b.ac)});return a};f.Nq=function(){var a=[];E(this.M,function(b){a.push(b.kf)});return a};
f.qA=function(){var a=[];E(this.M,function(b){a.push(b.ob)});return a};f.KF=function(a){E(a,function(a){this.Il(a)}.bind(this))};f.reset=function(){for(var a=this.M.length;0<a;)kx(this.Dk,a-1),a--;this.MP()};f.Kw=function(a){if(null==this.M)return!1;for(var b=0,c=this.M.length;b<c;b++)if(this.M[b].TITLE==a)return!0;return!1};
f.Il=function(a){this.M=null!=this.M?this.M:[];if(this.Kw(a))throw Error(a+" is an already existing tab!");var b;b=R("div",{id:"Tab_"+B(),"class":Z.CSS.ac,title:a});$h(this.a(),b);var c=R("div",{id:"TabIcon_"+B(),"class":Z.CSS.ob}),d=R("div",{"class":Z.CSS.cE},a);$h(c,d);$h(b,c);d=R("div",{id:"TabPage_"+B(),"class":Z.CSS.kf,label:a});$h(this.a().parentNode,d);var e=new jx(d,a);ix(this.Dk,e);this.M.push(new qx(a,b,c,d,e));rx(this);sx(this);tx(this);this.qk();this.setActive(0);this.o()};
f.FC=function(a,b){this.Kw(a)||this.Il(a);var c;a:if(null!=this.M){c=0;for(var d=this.M.length;c<d;c++)if(this.M[c].TITLE==a){c=this.M[c];break a}c=void 0}else c=!1;b instanceof ou?(d=b,c.kf.appendChild(b.a())):(d=new ou,d.k(c.kf),d.qf(b));Q(d.a(),Z.CSS.zE);this.o()};function rx(a){E(a.M,function(a){J(a.ac)}.bind(a))}function sx(a){E(a.M,function(a,c){H(a.ac,"click",function(){this.qk();this.setActive(c)}.bind(this))}.bind(a))}function tx(a){E(a.M,function(a,c){ux(this,c);vx(this,c)}.bind(a))}
function ux(a,b){H(a.M[b].ac,"mouseover",function(){!0!==this.M[b].Kj&&(Q(this.M[b].ac,Z.CSS.Ai),Q(this.M[b].ac,yj(Z.CSS.Ai,this.orientation)),Q(this.M[b].ob,Z.CSS.ll))}.bind(a))}function vx(a,b){H(a.M[b].ac,"mouseout",function(){!0!==this.M[b].Kj&&(Ch(this.M[b].ac,Z.CSS.Ai),Ch(this.M[b].ac,yj(Z.CSS.Ai,this.orientation)),Ch(this.M[b].ob,Z.CSS.ll))}.bind(a))}
f.setActive=function(a){this.M[a].Kj=!0;this.rm=this.Bf;this.Bf=a;nx(this.Dk,a);Q(this.M[a].ac,Z.CSS.Ai);Q(this.M[a].ac,yj(Z.CSS.Ai,this.orientation));Q(this.M[a].kf,Z.CSS.Bp);Q(this.M[a].kf,yj(Z.CSS.Bp,this.orientation));Q(this.M[a].ob,Z.CSS.ll);Q(this.M[a].ob,yj(Z.CSS.ll,this.orientation))};
f.rz=function(a){this.M[a].Kj=!1;nx(this.Dk,0);Ch(this.M[a].ac,Z.CSS.Ai);Ch(this.M[a].ac,yj(Z.CSS.Ai,this.orientation));Ch(this.M[a].kf,Z.CSS.Bp);Ch(this.M[a].kf,yj(Z.CSS.Bp,this.orientation));Ch(this.M[a].ob,Z.CSS.ll);Ch(this.M[a].ob,yj(Z.CSS.ll,this.orientation))};f.qk=function(){E(this.M,function(a,b){this.rz(b)}.bind(this))};
f.o=function(){if(this.a().parentNode){Q(this.a(),Z.Vc);Q(this.a(),yj(Z.Vc,this.orientation));E(this.M,function(a){Q(a.ac,yj(Z.CSS.ac,this.orientation));Q(a.ob,yj(Z.CSS.ob,this.orientation));Q(a.kf,yj(Z.CSS.kf,this.orientation))}.bind(this));switch(this.orientation){case "TOP":wx(this);break;case "BOTTOM":this.AQ();break;case "RIGHT":xx(this)}if(0<this.M.length){var a=U(this.M[0].ac);0<a.width&&0<a.height&&(this.Xd=a)}}};
function xx(a){E(a.M,function(a){this.a().parentNode&&(sk(a.ac,{height:(100/this.M.length).toString()+"%"}),a.kf.style.width="calc(100% - "+U(a.ac).width+"px)")}.bind(a))}function wx(a){var b;E(a.M,function(a,d){this.a().parentNode&&(b=100/this.M.length,sk(a.ac,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function yx(a){E(a.M,function(a){C(a,function(c,d){J(c);c.f?c.g():c.g&&c.g();delete c;delete a[d]});D(a);delete a});Jb(a.M)}
f.f=function(){Z.d.f.call(this);E(this.Mq(),function(a){J(a)}.bind(this));yx(this);delete this.M;J(this.Dk);this.Dk.g();delete this.Dk;delete this.Bf;delete this.rm;delete this.zQ;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",ox);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",px);v("nrg.ui.Tabs.ID_PREFIX",Z.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",Z.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",qx);v("nrg.ui.Tabs.prototype.tabSize",Z.prototype.Xd);v("nrg.ui.Tabs.prototype.render",Z.prototype.k);
v("nrg.ui.Tabs.prototype.getTabCount",Z.prototype.gI);v("nrg.ui.Tabs.prototype.getLastActiveTab",Z.prototype.vH);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",Z.prototype.UH);v("nrg.ui.Tabs.prototype.getTabElements",Z.prototype.Mq);v("nrg.ui.Tabs.prototype.getTabPages",Z.prototype.Nq);v("nrg.ui.Tabs.prototype.getTabIcons",Z.prototype.qA);v("nrg.ui.Tabs.prototype.addTabs",Z.prototype.KF);v("nrg.ui.Tabs.prototype.reset",Z.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",Z.prototype.Kw);
v("nrg.ui.Tabs.prototype.addTab",Z.prototype.Il);v("nrg.ui.Tabs.prototype.setTabPageContents",Z.prototype.FC);v("nrg.ui.Tabs.prototype.setActive",Z.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",Z.prototype.rz);v("nrg.ui.Tabs.prototype.deactivateAll",Z.prototype.qk);v("nrg.ui.Tabs.prototype.updateStyle",Z.prototype.o);v("nrg.ui.Tabs.prototype.disposeInternal",Z.prototype.f);function zx(a){Z.call(this,a)}w(zx,Z);v("nrg.ui.ZipTabs",zx);zx.ID_PREFIX="nrg.ui.ZipTabs";f=zx.prototype;f.k=function(a){zx.d.k.call(this,a);Q(this.a(),yj(zx.Vc,this.orientation));this.Kc=new Lq(this.a(),this.orientation);Ax(this);a=Oh("goog-tabpane-tabs",this.a());E(a,function(a){a.style.visibility="hidden"})};f.oi=function(a){this.Kc.oi(a);this.o()};f.Q=function(){return this.Kc};
function Ax(a){H(a.Kc,"resize",function(a){this.Qh();if(null!=this.Xd){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.Xd.height-this.A.height)?this.qk():this.setActive(this.Bf);break;case "LEFT":case "RIGHT":var c=36>=Math.abs(this.Xd.width-this.A.width)&&this.mq;4>=Math.abs(this.Xd.width-this.A.width)||c?this.qk():this.setActive(this.Bf)}this.dispatchEvent({type:"resize",size:a.size,ye:a.ye})}}.bind(a))}f.mq=!1;
f.gc=function(a,b,c){this.o();a?(this.setActive(b||0),this.Kc.If(this.orientation,"MAX",null,c)):(this.qk(),this.Kc.If(this.orientation,"MIN",null,c))};f.o=function(){zx.d.o.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.Xd&&this.Kc.tC(this.Xd.height);break;case "LEFT":case "RIGHT":null!=this.Xd&&this.Kc.vC(this.Xd.width)}this.Kc.update()};
f.Il=function(a){zx.d.Il.call(this,a);1==this.Mq().length&&this.o();E(this.Mq(),function(a){H(a,"click",function(){if(null!=this.Xd)switch(this.o(),this.Qh(),this.orientation){case "BOTTOM":4>=Math.abs(this.A.height-this.Xd.height)?(this.setActive(this.Bf),this.Kc.If("BOTTOM","MAX",void 0)):this.Bf==this.rm&&this.Kc.If("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.A.height-this.Xd.height)?(this.setActive(this.Bf),this.Kc.If("TOP","MAX",void 0)):this.Bf==this.rm&&this.Kc.If("TOP","MIN",
void 0);break;case "RIGHT":null!=this.Xd&&(4>=Math.abs(this.A.width-this.Xd.width)?(this.mq=!1,this.setActive(this.Bf),this.Kc.If("RIGHT","MAX",void 0)):this.Bf==this.rm&&(this.mq=!0,this.Kc.If("RIGHT","MIN",void 0)))}}.bind(this))}.bind(this));this.qk();this.o()};f.f=function(){zx.d.f.call(this);J(this.Kc);this.Kc.g();delete this.Kc;delete this.mq};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{KD:"la"});
v("nrg.ui.ZipTabs.ID_PREFIX",zx.ID_PREFIX);v("nrg.ui.ZipTabs.prototype.render",zx.prototype.k);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",zx.prototype.oi);v("nrg.ui.ZipTabs.prototype.getResizable",zx.prototype.Q);v("nrg.ui.ZipTabs.prototype.setExpanded",zx.prototype.gc);v("nrg.ui.ZipTabs.prototype.updateStyle",zx.prototype.o);v("nrg.ui.ZipTabs.prototype.addTab",zx.prototype.Il);v("nrg.ui.ZipTabs.prototype.disposeInternal",zx.prototype.f);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function Bx(){W.call(this);this.dd=Bx.ModalStates.Mj}w(Bx,W);v("xiv.ui.Modal",Bx);Bx.ModalStates={Ie:"fullscreen",lf:"popup",Is:"fullscreen-popup",Ng:"windowed",Mj:"demo",RD:"demp-fullscreen"};Bx.ID_PREFIX="xiv.ui.Modal";Bx.CSS_SUFFIX={yp:"background",TM:"columnmenu",bO:"rowmenu",UM:"button",cO:"button",BE:"projecttab",CE:"projecttab-bounds",DE:"projecttab-dragger",EE:"projecttab-dragger-handle",gx:"addsubjects",VD:"foldericon"};
function Cx(){var a={};C(Dx,function(b,c){a[c]=Bx.ID_PREFIX+"."+db(b.key)+".Button"});var b=Tk(ob(a)),c={};C(a,function(a,e){c[e]=b[a];var h=yj(a);b[a].className=h});return c}var Dx={jl:{key:"CLOSE",title:"Close XNAT Image Viewer."},Ie:{key:"FULLSCREEN",title:"Enter full-screen mode."},lf:{key:"POPUP",title:"Popup to new window."},Ng:{key:"WINDOWED",title:"Exit full-screen mode."}};f=Bx.prototype;f.Yn=29;f.As=29;f.xr=320;f.yr=320;f.Co=null;f.uI=function(){return this.Ea};f.lI=function(){return this.aa};
f.XH=function(){return this.Hb};f.TH=function(){return this.ba.lf};f.RG=function(){return this.ba.jl};f.kH=function(){return this.ba.Ie};f.k=function(a){Bx.d.k.call(this,a);this.SA();this.Ea.Qu(null,!1);this.vc(this.dd)};
f.vc=function(a){null!=this.dd&&(this.Qr=this.dd);this.dd=a;null!=this.Qr&&Ch(this.a(),yj(this.constructor.Vc,this.Qr));Q(this.a(),yj(this.constructor.Vc,this.dd));this.dd==Bx.ModalStates.Mj?(this.ba.Ie.style.visibility="hidden",this.ba.Ng.style.visibility="hidden"):this.dd==Bx.ModalStates.Ng?(this.ba.Ie.style.visibility="visible",this.ba.Ng.style.visibility="hidden"):this.dd==Bx.ModalStates.lf?(this.ba.lf.style.visibility="hidden",this.ba.jl.style.visibility="hidden",this.ba.Ie.style.visibility=
"visible",this.ba.Ng.style.visibility="hidden"):this.dd==Bx.ModalStates.Is?(this.ba.lf.style.visibility="hidden",this.ba.Ie.style.visibility="hidden",this.ba.Ng.style.visibility="visible"):this.dd==Bx.ModalStates.Ie&&(this.ba.lf.style.visibility="visible",this.ba.Ie.style.visibility="hidden",this.ba.Ng.style.visibility="visible");this.o()};f.am=function(){return this.dd};f.rj=function(){this.aa.loop(function(a){a.setActive(!1);this.Ea.loop(function(b){-1<b.wb.indexOf(a.nf)&&a.setActive(!0)})}.bind(this))};
f.Jy=function(){Ex(this);this.Md=null!=this.Md?this.Md:[];this.ad=null!=this.ad?this.ad:new ik;Fx(this);Gx(this);H(this.ad,"end",this.uK.bind(this));E(this.Md,function(a){this.ad.add(a)}.bind(this));this.ad.play();this.rj()};f.uK=function(){E(this.Md,function(a){this.ad.remove(a);J(a);a.oe();a.g()}.bind(this));Jb(this.Md);this.o();Hx(this)};function Hx(a){a.Ea.loop(function(a){0==a.a().style.opacity&&yk(a.a(),300)})}
function Fx(a){var b=null;a.Ea.loop(function(a,d,e){b=a.a();this.Md.push(new Xj(b,[b.offsetLeft,b.offsetTop],[this.za.Zb.Og[d][e],this.za.Zb.Le[d][e]],300,wk))}.bind(a))}function Gx(a){var b=null;a.Ea.loop(function(a,d,e){b=a.a();this.Md.push(new Yj(b,[b.offsetWidth,b.offsetHeight],[this.za.Zb.Vj[d][e],this.za.Zb.Lm[d][e]],300,wk))}.bind(a))}
function Ex(a){a.za=null!=a.za?a.za:{};a.Qh();a.za.mp={};a.za.mp.Vj=Math.round(U(a.Hb.a()).width);a.za.mp.Lm=Math.round(a.A.height-2*a.As);a.za.mp.Le=Math.round(a.As);Ix(a);Jx(a)}function Ix(a){a.za.Zb={};a.za.Zb.Vj=a.Ea.On();a.za.Zb.Lm=a.Ea.On();a.Ea.loop(function(a,c,d,e,h){this.za.Zb.Vj[c][d]=Math.round((this.A.width-this.za.mp.Vj-this.Yn)/h-this.Yn);this.za.Zb.Lm[c][d]=Math.round((this.A.height-(e+1)*this.Yn)/e)}.bind(a))}
function Jx(a){a.za.Zb.Og=a.Ea.On();a.za.Zb.Le=a.Ea.On();a.za.Zb.RE=a.za.mp.Vj+a.As;var b=0;a.Ea.loop(function(a,d,e){b=this.za.Zb.RE+e*(this.za.Zb.Vj[d][e]+this.As);this.za.Zb.Og[d][e]=b;this.za.Zb.Le[d][e]=d*(this.za.Zb.Lm[d][e]+this.Yn);window.console.log();this.za.Zb.Le[d][e]+=this.Yn}.bind(a))}f.o=function(){Ex(this);this.Hb&&this.Hb.o();Kx(this);this.rj();this.aa.o();this.aa.Sc()};
function Kx(a){a.Ea&&a.Ea.loop(function(a,c,d){sk(a.a(),{height:this.za.Zb.Lm[c][d],width:this.za.Zb.Vj[c][d],left:this.za.Zb.Og[c][d],top:this.za.Zb.Le[c][d]});a.o()}.bind(a))}
f.SA=function(){var a=R("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=Bx.CSS.yp;this.a().appendChild(a);this.Ms=R("div");$h(this.a(),this.Ms);Q(this.Ms,Bx.CSS.CE);this.Hb=new zx("RIGHT");this.Hb.k(this.a());Q(this.Hb.a(),Bx.CSS.BE);this.aa=new bx;this.aa.Aw(!0);var b;b=b||H;b(this.aa,"X",this.UK.bind(this));b(this.aa,"Y",this.VK.bind(this));b(this.aa,"ja",this.OK.bind(this));b(this.aa,"ha",this.RK.bind(this));b(this.aa,"ia",this.QK.bind(this));b(this.aa,"ka",this.TK.bind(this));
this.aa.k(this.Hb.a());this.Hb.FC("Project Browser",this.aa);this.Hb.oi(this.Ms);a=this.Hb.Q().ud("RIGHT");Q(a,Bx.CSS.DE);this.Hb.Q().Ak("RIGHT").wC(5);$h(a,R("div",{id:jw.ID_PREFIX+"_DraggerHandle_"+B(),"class":Bx.CSS.EE}));a=this.Hb.qA()[0];a.childNodes[0].style.visibility="hidden";b=R("img",{id:jw.ID_PREFIX+"_FolderIcon_"+B(),"class":Bx.CSS.VD});b.src=this.ci+"/images/viewer/xiv/ui/Modal/folder.png";$h(a,b);this.Co=new Xw;H(this.Hb,"resize",this.oM.bind(this));H(this.Hb,"resize",this.o.bind(this));
H(this.Hb,"resize_end",this.o.bind(this));this.Ea=new Dw;this.Ea.IC(this.a());var c;c=c||H;c(this.Ea,"ca",this.Uv.bind(this));c(this.Ea,"da",this.Tv.bind(this));c(this.Ea,"ea",this.yj.bind(this));H(this.Ea,"ba",this.gL.bind(this));Lx(this)};
function Lx(a){a.ba=Cx();C(a.ba,function(a){$h(this.a(),a)}.bind(a));Mx(a);a.ba.jl.innerHTML="<img src="+a.ci+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.ba.Ie.innerHTML="<img src="+a.ci+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.ba.Ng.innerHTML="<img src="+a.ci+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.ba.lf.innerHTML="<img src="+a.ci+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.hy=function(){this.Ph=R("div",{id:Bx.ID_PREFIX+"_addSubjects_"+B(),"class":Bx.CSS.gx},"+ Load all subjects in project");this.Hb.Nq()[0].appendChild(this.Ph);uk(this.Ph,Bx.CSS.gx+"-hovered");var a=this.Hb.Nq()[0],b=di(a)[0];U(a);U(b);U(this.Ph);b.style.height="calc(100% - 70px)";H(this.Ph,"click",this.ZJ.bind(this))};f.ZJ=function(){this.dispatchEvent({type:"g"});Bk(this.Ph,150,function(){Nx(this);var a=this.Hb.Nq()[0];di(a)[0].setAttribute("style","");this.aa.Sc()}.bind(this))};
function Nx(a){null!=a.Ph&&(S(a.Ph),J(a.Ph),delete a.Ph)}f.oM=function(){var a=this.Co;a.Pl.la[a.Iq()]&&this.Hb.Q().Ak("RIGHT").aD()};f.gL=function(){var a=Oh("xiv-ui-thumbnailgallery-thumbnail-dragging");E(a,function(a){S(a)});this.rj();window.console.log(this.aa.Eg.Fq());null!=this.aa.Eg.Fq()&&this.aa.Mf.gj({NP:!0})};f.dK=function(){this.dd===Bx.ModalStates.Ie&&ex()};
f.lK=function(){var a=this.a();a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();this.dd===Bx.ModalStates.lf?this.vc(Bx.ModalStates.Is):this.vc(Bx.ModalStates.Ie);this.o()};f.jL=function(){ex();this.vc(this.Qr)};function Mx(a){var b;b=b||H;b(a.ba.Ie,"click",a.lK.bind(a));b(a.ba.Ng,"click",a.jL.bind(a));b(a.ba.jl,"click",a.dK.bind(a))}
f.UK=function(a){this.Ea.Ss(a.Bi.nf,function(a){a.Mu()})};f.VK=function(a){this.Ea.Ss(a.Bi.nf,function(a){a.nm||a.sp()})};f.QK=function(a){this.Ea.Pq(a.Nw).sp()};f.RK=function(a){this.Ea.Pq(a.Nw).Mu()};f.OK=function(a){this.Ea.Ts()||a.Bi.ew(300,function(){this.Ea.Xz().load(a.Bi.nf);this.rj()}.bind(this))};f.TK=function(a){var b=this.Ea.Pq(a.pM);this.Ea.Ts()?b.sp():(b.load(a.Bi.nf),this.rj())};f.Uv=function(){this.rj()};f.Tv=function(){this.rj()};
f.yj=function(a){null!=a&&null!=a.NF?(a.wB&&E(a.wB,function(a){sk(a.a(),{opacity:0})}),this.Jy()):this.o();this.aa.Xy();this.aa.uy(this.Ea.uA())};f.f=function(){Bx.d.f.call(this);D(this.za);delete this.za;this.du(this.Md);delete this.Md;this.vq(this.ad);delete this.ad;this.wq(this.ba);delete this.ba;null!=this.Ea&&(J(this.Ea),this.Ea.g(),delete this.Ea);J(this.Hb);this.Hb.g();delete this.Hb;J(this.aa);this.aa.g();delete this.aa;Nx(this);null!=this.Co&&(this.Co.g(),delete this.Co);delete this.dd;delete this.Qr};
v("xiv.ui.Modal.EventType",Bx.eN);v("xiv.ui.Modal.ID_PREFIX",Bx.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",Bx.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",Bx.prototype.uI);v("xiv.ui.Modal.prototype.getThumbnailGallery",Bx.prototype.lI);v("xiv.ui.Modal.prototype.getProjectTab",Bx.prototype.XH);v("xiv.ui.Modal.prototype.getPopupButton",Bx.prototype.TH);v("xiv.ui.Modal.prototype.getCloseButton",Bx.prototype.RG);v("xiv.ui.Modal.prototype.getFullScreenButton",Bx.prototype.kH);
v("xiv.ui.Modal.prototype.render",Bx.prototype.k);v("xiv.ui.Modal.prototype.setState",Bx.prototype.vc);v("xiv.ui.Modal.prototype.getState",Bx.prototype.am);v("xiv.ui.Modal.prototype.highlightInUseThumbnails",Bx.prototype.rj);v("xiv.ui.Modal.prototype.animateModal",Bx.prototype.Jy);v("xiv.ui.Modal.prototype.updateStyle",Bx.prototype.o);v("xiv.ui.Modal.prototype.initSubComponents",Bx.prototype.SA);v("xiv.ui.Modal.prototype.addAddSubjectsToProjectTab",Bx.prototype.hy);
v("xiv.ui.Modal.prototype.disposeInternal",Bx.prototype.f);window["xiv.ui.Modal"]=Bx;window["xiv.ui.Modal.ModalStates"]=Bx.ModalStates;
//# sourceMappingURL=./xiv-min.js.map