var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.ee=function(){return a.SA?a.SA:a.SA=new a}}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ga(a)}function ha(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ia(a){return"boolean"==typeof a}function u(a){return"number"==typeof a}function ja(a){return"function"==ga(a)}function ka(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ma(a){return a[oa]||(a[oa]=++pa)}
var oa="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(null,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var wa=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.KO=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.rM=!0;A.Td=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.ud=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.YE=0;this.RL=function(){return this.YE++}};function xa(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.rD;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Aa);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba;function Ca(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ca);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ca,Error);Ca.prototype.name="CustomError";function Da(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ea(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Fa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ga(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ia(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ja=/(\.\d+)|(\d+)|(\D+)/g;function Ka(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ja),d=b.toLowerCase().match(Ja),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function La(a){if(!Pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ta,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Va,"&#0;"));return a}var Qa=/&/g,Ra=/</g,Sa=/>/g,Ta=/"/g,Ua=/'/g,Va=/\x00/g,Pa=/[\x00&<>"']/;
function Wa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Xa(a){return Array.prototype.join.call(arguments,"")}
function Ya(a,b){for(var c=0,d=Ia(String(a)).split("."),e=Ia(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",p=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var q=p.exec(l)||["","",""],t=m.exec(n)||["","",""];if(0==q[0].length&&0==t[0].length)break;c=Za(0==q[1].length?0:parseInt(q[1],10),0==t[1].length?0:parseInt(t[1],10))||Za(0==q[2].length,0==t[2].length)||Za(q[2],t[2])}while(0==c)}return c}function Za(a,b){return a<b?-1:a>b?1:0}
var $a=2147483648*Math.random()|0;function B(){return"goog_"+$a++}function ab(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function bb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function cb(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function db(a,b){b.unshift(a);Ca.call(this,Fa.apply(null,b));b.shift()}w(db,Ca);db.prototype.name="AssertionError";function eb(a,b){throw new db("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var fb="closure_listenable_"+(1E6*Math.random()|0);function gb(a){return!(!a||!a[fb])}var hb=0;function ib(a,b,c,d,e){this.vk=a;this.Nr=null;this.src=b;this.type=c;this.sn=!!d;this.Oq=e;this.key=++hb;this.om=this.bq=!1}function jb(a){a.om=!0;a.vk=null;a.Nr=null;a.src=null;a.Oq=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function kb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function mb(a){var b=0,c;for(c in a)b++;return b}function nb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function pb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function qb(){var a=rb,b;for(b in a)return!1;return!0}function sb(a){for(var b in a)delete a[b]}function tb(a,b){b in a&&delete a[b]}
function ub(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function vb(a){var b={},c;for(c in a)b[c]=a[c];return b}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<wb.length;h++)c=wb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function yb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return yb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var zb=Array.prototype,Ab=zb.indexOf?function(a,b,c){return zb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},D=zb.forEach?function(a,b,c){zb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Bb=zb.filter?function(a,b,c){return zb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=
0,k=r(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Cb=zb.map?function(a,b,c){return zb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=r(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=b.call(c,h[k],k,a));return e},Db=zb.some?function(a,b,c){return zb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Eb=zb.every?function(a,b,c){return zb.every.call(a,b,c)}:function(a,
b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};function Fb(a){var b;a:{b=Gb;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function Hb(a,b){return 0<=Ab(a,b)}function Ib(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Jb(a,b){Hb(a,b)||a.push(b)}
function Kb(a,b){var c=Ab(a,b),d;(d=0<=c)&&zb.splice.call(a,c,1);return d}function Lb(a){return zb.concat.apply(zb,arguments)}function Mb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Nb(a,b,c,d){zb.splice.apply(a,Ob(arguments,1))}function Ob(a,b,c){return 2>=arguments.length?zb.slice.call(a,b):zb.slice.call(a,b,c)}function Pb(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b};function Qb(a){this.src=a;this.Kc={};this.mp=0}f=Qb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.Kc[h];a||(a=this.Kc[h]=[],this.mp++);var k=Rb(a,b,d,e);-1<k?(b=a[k],c||(b.bq=!1)):(b=new ib(b,this.src,h,!!d,e),b.bq=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Kc))return!1;var e=this.Kc[a];b=Rb(e,b,c,d);return-1<b?(jb(e[b]),zb.splice.call(e,b,1),0==e.length&&(delete this.Kc[a],this.mp--),!0):!1};
function Sb(a,b){var c=b.type;if(!(c in a.Kc))return!1;var d=Kb(a.Kc[c],b);d&&(jb(b),0==a.Kc[c].length&&(delete a.Kc[c],a.mp--));return d}f.gg=function(a){a=a&&a.toString();var b=0,c;for(c in this.Kc)if(!a||c==a){for(var d=this.Kc[c],e=0;e<d.length;e++)++b,jb(d[e]);delete this.Kc[c];this.mp--}return b};f.Mn=function(a,b,c,d){a=this.Kc[a.toString()];var e=-1;a&&(e=Rb(a,b,c,d));return-1<e?a[e]:null};
f.Pq=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return kb(this.Kc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].sn!=b))return!0;return!1})};function Rb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.om&&h.vk==b&&h.sn==!!c&&h.Oq==d)return e}return-1};var Tb;a:{var Ub=ba.navigator;if(Ub){var Vb=Ub.userAgent;if(Vb){Tb=Vb;break a}}Tb=""}function Wb(a){return-1!=Tb.indexOf(a)}function Xb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Yb(){return Wb("Opera")||Wb("OPR")}function Zb(){return Wb("Trident")||Wb("MSIE")}function $b(){return Wb("Safari")&&!Wb("Chrome")&&!Wb("CriOS")&&!Wb("Android")}
function ac(){var a=Tb;if(Zb()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Yb())return a=Xb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Xb(a);return a[2]&&a[2][1]?a[2][1]:""};var bc,cc,dc;function ec(){return ba.navigator||null}var fc=Yb(),E=Zb(),gc=Wb("Gecko")&&-1==Tb.toLowerCase().indexOf("webkit")&&!(Wb("Trident")||Wb("MSIE")),hc=-1!=Tb.toLowerCase().indexOf("webkit"),ic,jc=ec();ic=jc&&jc.platform||"";bc=-1!=ic.indexOf("Mac");cc=-1!=ic.indexOf("Win");dc=-1!=ic.indexOf("Linux");var kc=!!ec()&&-1!=(ec().appVersion||"").indexOf("X11");function lc(){var a=ba.document;return a?a.documentMode:void 0}
var mc=function(){var a="",b;if(fc&&ba.opera)return a=ba.opera.version,ja(a)?a():a;gc?b=/rv\:([^\);]+)(\)|;)/:E?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:hc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Tb))?a[1]:"");return E&&(b=lc(),b>parseFloat(a))?String(b):a}(),nc={};function oc(a){return nc[a]||(nc[a]=0<=Ya(mc,a))}function pc(a){return E&&qc>=a}var rc=ba.document,qc=rc&&E?lc()||("CSS1Compat"==rc.compatMode?parseInt(mc,10):5):void 0;var sc=!E||pc(9),tc=!E||pc(9),uc=E&&!oc("9");!hc||oc("528");gc&&oc("1.9b")||E&&oc("8")||fc&&oc("9.5")||hc&&oc("528");gc&&!oc("8")||E&&oc("9");function vc(){0!=wc&&(xc[ma(this)]=this)}var wc=0,xc={};vc.prototype.dk=!1;vc.prototype.g=function(){if(!this.dk&&(this.dk=!0,this.f(),0!=wc)){var a=ma(this);delete xc[a]}};function yc(a,b){a.vo||(a.vo=[]);a.vo.push(ca(void 0)?ta(b,void 0):b)}vc.prototype.f=function(){if(this.vo)for(;this.vo.length;)this.vo.shift()()};function zc(a){a&&"function"==typeof a.g&&a.g()}function Bc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Bc.apply(null,d):zc(d)}};function Cc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.eg=!1;this.Eo=!0}Cc.prototype.f=function(){};Cc.prototype.g=function(){};Cc.prototype.stopPropagation=function(){this.eg=!0};Cc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Eo=!1};function Ec(a){a.preventDefault()};function Fc(a){Fc[" "](a);return a}Fc[" "]=ea;function Gc(a,b){Cc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Tv=!1;this.Ic=null;a&&this.ra(a,b)}w(Gc,Cc);var Hc=[1,4,2];f=Gc.prototype;
f.ra=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(gc){var e;a:{try{Fc(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=hc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=hc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Tv=bc?a.metaKey:a.ctrlKey;this.state=a.state;this.Ic=a;a.defaultPrevented&&this.preventDefault()};function Ic(a){return(sc?0==a.Ic.button:"click"==a.type?!0:!!(a.Ic.button&Hc[0]))&&!(hc&&bc&&a.ctrlKey)}
f.stopPropagation=function(){Gc.d.stopPropagation.call(this);this.Ic.stopPropagation?this.Ic.stopPropagation():this.Ic.cancelBubble=!0};f.preventDefault=function(){Gc.d.preventDefault.call(this);var a=this.Ic;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,uc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.tG=function(){return this.Ic};f.f=function(){};var Jc="closure_lm_"+(1E6*Math.random()|0),Kc={},Lc=0;function F(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)F(a,b[h],c,d,e);return null}c=Mc(c);return gb(a)?a.A(b,c,d,e):Nc(a,b,c,!1,d,e)}function Nc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Oc(a);l||(a[Jc]=l=new Qb(a));c=l.add(b,c,d,e,h);if(c.Nr)return c;d=Pc();c.Nr=d;d.src=a;d.vk=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Qc(b.toString()),d);Lc++;return c}
function Pc(){var a=Rc,b=tc?function(c){return a.call(b.src,b.vk,c)}:function(c){c=a.call(b.src,b.vk,c);if(!c)return c};return b}function Sc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Sc(a,b[h],c,d,e);return null}c=Mc(c);return gb(a)?a.Tu(b,c,d,e):Nc(a,b,c,!0,d,e)}function Tc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Tc(a,b[h],c,d,e);else c=Mc(c),gb(a)?a.ob(b,c,d,e):a&&(a=Oc(a))&&(b=a.Mn(b,c,!!d,e))&&Uc(b)}
function Uc(a){if(u(a)||!a||a.om)return!1;var b=a.src;if(gb(b))return Sb(b.Lg,a);var c=a.type,d=a.Nr;b.removeEventListener?b.removeEventListener(c,d,a.sn):b.detachEvent&&b.detachEvent(Qc(c),d);Lc--;(c=Oc(b))?(Sb(c,a),0==c.mp&&(c.src=null,b[Jc]=null)):jb(a);return!0}function I(a){if(a)if(gb(a))a.removeAllListeners(void 0);else if(a=Oc(a)){var b=0,c;for(c in a.Kc)for(var d=a.Kc[c].concat(),e=0;e<d.length;++e)Uc(d[e])&&++b}}
function Vc(a,b){if(gb(a))return a.Pq(b,void 0);var c=Oc(a);return!!c&&c.Pq(b,void 0)}function Qc(a){return a in Kc?Kc[a]:Kc[a]="on"+a}function Wc(a,b,c,d){var e=1;if(a=Oc(a))if(b=a.Kc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.sn==c&&!h.om&&(e&=!1!==Xc(h,d))}return Boolean(e)}function Xc(a,b){var c=a.vk,d=a.Oq||a.src;a.bq&&Uc(a);return c.call(d,b)}
function Rc(a,b){if(a.om)return!0;if(!tc){var c=b||da("window.event"),d=new Gc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.eg&&0<=l;l--)d.currentTarget=c[l],e&=Wc(c[l],h,!0,d);for(l=0;!d.eg&&l<c.length;l++)d.currentTarget=c[l],e&=Wc(c[l],h,!1,d)}return e}return Xc(a,new Gc(b,this))}
function Oc(a){a=a[Jc];return a instanceof Qb?a:null}var Yc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Mc(a){return ja(a)?a:a[Yc]||(a[Yc]=function(b){return a.handleEvent(b)})};function Zc(){vc.call(this);this.Lg=new Qb(this);this.hF=this;this.Jr=null}w(Zc,vc);Zc.prototype[fb]=!0;f=Zc.prototype;f.lw=function(a){this.Jr=a};f.addEventListener=function(a,b,c,d){F(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Tc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Jr;if(c)for(b=[];c;c=c.Jr)b.push(c);var c=this.hF,d=a.type||a;if(r(a))a=new Cc(a,c);else if(a instanceof Cc)a.target=a.target||c;else{var e=a;a=new Cc(d,c);xb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.eg&&0<=k;k--)h=a.currentTarget=b[k],e=$c(h,d,!0,a)&&e;a.eg||(h=a.currentTarget=c,e=$c(h,d,!0,a)&&e,a.eg||(e=$c(h,d,!1,a)&&e));if(b)for(k=0;!a.eg&&k<b.length;k++)h=a.currentTarget=b[k],e=$c(h,d,!1,a)&&e;return e};
f.f=function(){Zc.d.f.call(this);this.removeAllListeners();this.Jr=null};f.A=function(a,b,c,d){return this.Lg.add(String(a),b,!1,c,d)};f.Tu=function(a,b,c,d){return this.Lg.add(String(a),b,!0,c,d)};f.ob=function(a,b,c,d){return this.Lg.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.Lg?this.Lg.gg(a):0};
function $c(a,b,c,d){b=a.Lg.Kc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.om&&k.sn==c){var l=k.vk,n=k.Oq||k.src;k.bq&&Sb(a.Lg,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.Eo}f.Mn=function(a,b,c,d){return this.Lg.Mn(String(a),b,c,d)};f.Pq=function(a,b){return this.Lg.Pq(ca(a)?String(a):void 0,b)};function ad(){Zc.call(this);this.s="base";this.fd=window["X.counter"].RL();this.G=!1}w(ad,Zc);ad.prototype.__defineGetter__("classname",function(){return this.s});ad.prototype.__defineGetter__("id",function(){return this.fd});v("X.base",ad);function bd(a,b){ad.call(this);this.s="triplets";this.Jf=Infinity;this.Gf=-Infinity;this.Kf=Infinity;this.Hf=-Infinity;this.Lf=Infinity;this.If=-Infinity;this.Ep=[0,0,0];this.La=0;this.Ub=new Float32Array(a);null!=b&&(this.Ub=b.Ub.subarray(0,b.Ub.length),this.La=this.Ub.length,this.Jf=b.Jf,this.Gf=b.Gf,this.Kf=b.Kf,this.Hf=b.Hf,this.Lf=b.Lf,this.If=b.If,this.Ep=b.Ep.slice())}w(bd,ad);f=bd.prototype;
f.add=function(a,b,c){this.Jf=Math.min(this.Jf,a);this.Gf=Math.max(this.Gf,a);this.Kf=Math.min(this.Kf,b);this.Hf=Math.max(this.Hf,b);this.Lf=Math.min(this.Lf,c);this.If=Math.max(this.If,c);this.Ep=[(this.Jf+this.Gf)/2,(this.Kf+this.Hf)/2,(this.Lf+this.If)/2];this.G=!0;this.Ub[this.La++]=a;this.Ub[this.La++]=b;this.Ub[this.La++]=c;return this.La/3};f.resize=function(){if(this.La!=this.Ub.length){var a=new Float32Array(this.La);a.set(this.Ub.subarray(0,this.La));this.Ub=a}};
f.get=function(a){a*=3;return[this.Ub[a],this.Ub[a+1],this.Ub[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Ub=new Float32Array(this.Ub.length);this.G=!0};bd.prototype.__defineGetter__("count",function(){this.resize();return this.Ub.length/3});bd.prototype.__defineGetter__("length",function(){this.resize();return this.Ub.length});v("X.triplets",bd);v("X.triplets.prototype.add",bd.prototype.add);v("X.triplets.prototype.resize",bd.prototype.resize);
v("X.triplets.prototype.get",bd.prototype.get);v("X.triplets.prototype.remove",bd.prototype.remove);v("X.triplets.prototype.clear",bd.prototype.clear);function cd(){ad.call(this);this.s="indexer";this.kt=[];this.Ud={}}w(cd,ad);cd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.Ud||(this.Ud[b]=this.kt.length,this.kt.push(a));return this.Ud[b]};cd.prototype.unique=function(){return this.kt};function dd(a){ad.call(this);this.s="file";this.Pp=a;this.G=!0}w(dd,ad);function ed(){this.zg=this.ea=null}ed.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.ea=null;else{if(g(a)){if(1==a.length){this.ea=new dd(a[0]);return}this.ea=Cb(a,function(a){var c=new J;c.ea=new dd(a);return c})}else this.ea=new dd(a);this.zg=null}});ed.prototype.__defineGetter__("file",function(){return this.ea?g(this.ea)?this.ea.map(function(a){return a.ea.Pp}):this.ea.Pp:""});
ed.prototype.__defineGetter__("filedata",function(){return g(this.ea)?this.ea.map(function(a){return a.zg}):this.zg});ed.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.zg=null;if(g(a))if(1==a.length)this.zg=a[0];else{var b=this.ea.length,c;for(c=0;c<b;c++)this.ea[c].zg=a[c]}else this.zg=a});function fd(){return null};function gd(a,b,c){return Math.min(Math.max(a,b),c)};function hd(a,b){this.wb={};this.eb=[];this.Dh=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.mt(a)}f=hd.prototype;f.Lh=function(){return this.Dh};f.nk=function(){id(this);for(var a=[],b=0;b<this.eb.length;b++)a.push(this.wb[this.eb[b]]);return a};f.Ln=function(){id(this);return this.eb.concat()};
f.Jt=function(a){for(var b=0;b<this.eb.length;b++){var c=this.eb[b];if(kd(this.wb,c)&&this.wb[c]==a)return!0}return!1};f.Jl=function(a,b){if(this===a)return!0;if(this.Dh!=a.Lh())return!1;var c=b||ld;id(this);for(var d,e=0;d=this.eb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function ld(a,b){return a===b}f.bo=function(){return 0==this.Dh};f.clear=function(){this.wb={};this.Dh=this.eb.length=0};
f.remove=function(a){return kd(this.wb,a)?(delete this.wb[a],this.Dh--,this.eb.length>2*this.Dh&&id(this),!0):!1};function id(a){if(a.Dh!=a.eb.length){for(var b=0,c=0;b<a.eb.length;){var d=a.eb[b];kd(a.wb,d)&&(a.eb[c++]=d);b++}a.eb.length=c}if(a.Dh!=a.eb.length){for(var e={},c=b=0;b<a.eb.length;)d=a.eb[b],kd(e,d)||(a.eb[c++]=d,e[d]=1),b++;a.eb.length=c}}f.get=function(a,b){return kd(this.wb,a)?this.wb[a]:b};f.set=function(a,b){kd(this.wb,a)||(this.Dh++,this.eb.push(a));this.wb[a]=b};
f.mt=function(a){var b;a instanceof hd?(b=a.Ln(),a=a.nk()):(b=ob(a),a=nb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.Ln(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new hd(this)};f.Ow=function(){for(var a=new hd,b=0;b<this.eb.length;b++){var c=this.eb[b];a.set(this.wb[c],c)}return a};function kd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function md(){ad.call(this);this.s="colortable";this.Ud=new hd;xa(this,new ed)}w(md,ad);md.prototype.add=function(a,b,c,d,e,h){if(!(u(a)&&u(c)&&u(d)&&u(e)&&u(h)))throw Error("Invalid color table entry.");this.Ud.set(a,[b,c,d,e,h]);this.G=!0};md.prototype.get=function(a){return this.Ud.get(a)};v("X.colortable.prototype.get",md.prototype.get);function nd(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}nd.prototype.clone=function(){return new nd(this.x,this.y,this.z)};nd.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};nd.prototype.Jw=function(){return[this.x,this.y,this.z]};function K(a,b,c){this.x=a;this.y=b;this.z=c}w(K,nd);f=K.prototype;f.clone=function(){return new K(this.x,this.y,this.z)};f.$f=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.zb=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.$f())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.zc=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.Jl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function od(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function pd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function qd(a,b){return new K(a.x+b.x,a.y+b.y,a.z+b.z)}function rd(a,b){return new K(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.P=K;f=A.P.prototype;f.clone=K.prototype.clone;f.$f=K.prototype.$f;f.scale=K.prototype.scale;f.zb=K.prototype.zb;f.add=K.prototype.add;f.zc=K.prototype.zc;f.normalize=function(){var a=this.$f();return 0==a?this.scale(0):this.scale(1/a)};A.P.Oi=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.P.bk=rd;A.P.$t=od;A.P.hr=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new K(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.P.prototype.__defineGetter__("xx",function(){return this.x});
A.P.prototype.__defineGetter__("yy",function(){return this.y});A.P.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.P);v("X.vector.prototype.clone",A.P.prototype.clone);v("X.vector.prototype.magnitude",A.P.prototype.$f);v("X.vector.prototype.scale",A.P.prototype.scale);v("X.vector.prototype.invert",A.P.prototype.zb);v("X.vector.prototype.normalize",A.P.prototype.normalize);v("X.vector.prototype.add",A.P.prototype.add);v("X.vector.prototype.subtract",A.P.prototype.zc);
v("X.vector.dot",A.P.Oi);v("X.vector.cross",A.P.bk);v("X.vector.distance",A.P.$t);v("X.vector.lerp",A.P.hr);function sd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}sd.prototype.BYTES_PER_ELEMENT=8;sd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};sd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{sd.BYTES_PER_ELEMENT=8}catch(td){}sd.prototype.BYTES_PER_ELEMENT=sd.prototype.BYTES_PER_ELEMENT;sd.prototype.set=sd.prototype.set;sd.prototype.toString=sd.prototype.toString;v("Float64Array",sd)};function ud(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ud.prototype.BYTES_PER_ELEMENT=4;ud.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ud.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(ud.BYTES_PER_ELEMENT=4,ud.prototype.BYTES_PER_ELEMENT=ud.prototype.BYTES_PER_ELEMENT,ud.prototype.set=ud.prototype.set,ud.prototype.toString=ud.prototype.toString,v("Float32Array",ud));function vd(){return new Float32Array(3)}function wd(a,b,c){var d=vd();d[0]=a;d[1]=b;d[2]=c;return d}function xd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function yd(){return new Float32Array(4)}function zd(a,b,c,d){var e=yd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Ad(){return new Float32Array(16)}function Bd(){var a=Ad();a[0]=a[5]=a[10]=a[15]=1;return a}function Cd(a,b,c,d,e,h,k,l,n,p,m,q,t,s,z,y,H){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=p;a[9]=m;a[10]=q;a[11]=t;a[12]=s;a[13]=z;a[14]=y;a[15]=H;return a}function Dd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Ed(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function L(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Fd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Gd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Hd(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],p=a[6],m=a[7],q=a[8],t=a[9],s=a[10],z=a[11],y=a[12],H=a[13],P=a[14];a=a[15];var O=b[0],G=b[1],S=b[2],Y=b[3],U=b[4],va=b[5],na=b[6],ya=b[7],Ma=b[8],Ha=b[9],Na=b[10],la=b[11],za=b[12],qa=b[13],Dc=b[14];b=b[15];c[0]=d*O+l*G+q*S+y*Y;c[1]=e*O+n*G+t*S+H*Y;c[2]=h*O+p*G+s*S+P*Y;c[3]=k*O+m*G+z*S+a*Y;c[4]=d*U+l*va+q*na+y*ya;c[5]=e*U+n*va+t*na+H*ya;c[6]=h*U+p*va+s*na+P*ya;c[7]=k*U+m*va+z*na+a*ya;c[8]=d*Ma+l*Ha+q*Na+y*la;c[9]=e*Ma+n*Ha+t*Na+H*la;
c[10]=h*Ma+p*Ha+s*Na+P*la;c[11]=k*Ma+m*Ha+z*Na+a*la;c[12]=d*za+l*qa+q*Dc+y*b;c[13]=e*za+n*qa+t*Dc+H*b;c[14]=h*za+p*qa+s*Dc+P*b;c[15]=k*za+m*qa+z*Dc+a*b;return c}
function Id(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=a[8],q=a[9],t=a[10],s=a[11],z=a[12],y=a[13],H=a[14],P=a[15],O=c*l-d*k,G=c*n-e*k,S=c*p-h*k,Y=d*n-e*l,U=d*p-h*l,va=e*p-h*n,na=m*y-q*z,ya=m*H-t*z,Ma=m*P-s*z,Ha=q*H-t*y,Na=q*P-s*y,la=t*P-s*H,za=O*la-G*Na+S*Ha+Y*Ma-U*ya+va*na;if(0==za)return!1;za=1/za;b[0]=(l*la-n*Na+p*Ha)*za;b[1]=(-d*la+e*Na-h*Ha)*za;b[2]=(y*va-H*U+P*Y)*za;b[3]=(-q*va+t*U-s*Y)*za;b[4]=(-k*la+n*Ma-p*ya)*za;b[5]=(c*la-e*Ma+h*ya)*za;b[6]=(-z*va+H*S-P*G)*za;b[7]=
(m*va-t*S+s*G)*za;b[8]=(k*Na-l*Ma+p*na)*za;b[9]=(-c*Na+d*Ma-h*na)*za;b[10]=(z*U-y*S+P*O)*za;b[11]=(-m*U+q*S-s*O)*za;b[12]=(-k*Ha+l*ya-n*na)*za;b[13]=(c*Ha-d*ya+e*na)*za;b[14]=(-z*Y+y*G-H*O)*za;b[15]=(m*Y-q*G+t*O)*za;return!0}function Jd(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Kd(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Ld(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.t={};A.t.hB=function(a,b,c,d){c=c.zc(b);c.normalize();d=A.P.bk(c,d);d.normalize();var e=A.P.bk(d,c);e.normalize();c.zb();L(a,0,d.x,d.y,d.z,0);L(a,1,e.x,e.y,e.z,0);L(a,2,c.x,c.y,c.z,0);Ld(a,-b.x,-b.y,-b.z);return a};A.t.Nb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.P((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.t.HL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Gd(a,b,d);Gd(a,c,e);Fd(a,b,e);Fd(a,c,d);return a};A.t.GL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Ed(a,b,d);Ed(a,c,e);Dd(a,b,e);Dd(a,c,d);return a};A.t.Wn=Bd;A.t.clone=function(a){var b=Ad();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.t.Ow=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.t.VF=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],p=a[8],m=a[9],q=a[10],t=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(q*a-t*y)-(b*l-d*h)*(m*a-t*z)+(b*n-e*h)*(m*y-q*z)+(c*l-d*k)*(p*a-t*s)-(c*n-e*k)*(p*y-q*s)+(d*n-e*l)*(p*z-m*s)};A.t.zb=Id;A.t.Zu=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Cd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.t.ZI=function(a,b,c,d,e,h,k){return Cd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.t.$I=function(a,b,c,d,e,h,k){return Cd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.t.multiply=Hd;A.t.pB=Kd;A.t.translate=Ld;A.t.scale=function(a,b,c,d){return Cd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.t.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],p=a[4],m=a[5],q=a[6],t=a[7],s=a[8],z=a[9],y=a[10],H=a[11],P=Math.cos(b),O=Math.sin(b),G=1-P;b=c*c*G+P;var S=c*d*G+e*O,Y=c*e*G-d*O,U=c*d*G-e*O,va=d*d*G+P,na=d*e*G+c*O,ya=c*e*G+d*O;c=d*e*G-c*O;e=e*e*G+P;return Cd(a,h*b+p*S+s*Y,k*b+m*S+z*Y,l*b+q*S+y*Y,n*b+t*S+H*Y,h*U+p*va+s*na,k*U+m*va+z*na,l*U+q*va+y*na,n*U+t*va+H*na,h*ya+p*c+s*e,k*ya+m*c+z*e,l*ya+q*c+y*e,n*ya+t*c+H*e,a[12],a[13],a[14],a[15])};
A.t.Qr=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[4]=c*m+k*q;a[5]=d*m+l*q;a[6]=e*m+n*q;a[7]=h*m+p*q;a[8]=c*-q+k*m;a[9]=d*-q+l*m;a[10]=e*-q+n*m;a[11]=h*-q+p*m;return a};A.t.Rr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*-q;a[1]=d*m+l*-q;a[2]=e*m+n*-q;a[3]=h*m+p*-q;a[8]=c*q+k*m;a[9]=d*q+l*m;a[10]=e*q+n*m;a[11]=h*q+p*m;return a};
A.t.Sr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*q;a[1]=d*m+l*q;a[2]=e*m+n*q;a[3]=h*m+p*q;a[4]=c*-q+k*m;a[5]=d*-q+l*m;a[6]=e*-q+n*m;a[7]=h*-q+p*m;return a};v("X.matrix.identity",A.t.Wn);v("X.matrix.clone",A.t.clone);v("X.matrix.transpose",A.t.Ow);v("X.matrix.determinant",A.t.VF);v("X.matrix.invert",A.t.zb);v("X.matrix.multiply",A.t.multiply);v("X.matrix.multiplyByVector",A.t.Nb);v("X.matrix.multiplyByVec4",A.t.pB);
v("X.matrix.makePerspective",A.t.Zu);v("X.matrix.makeFrustum",A.t.ZI);v("X.matrix.makeOrtho",A.t.$I);v("X.matrix.makeLookAt",A.t.hB);v("X.matrix.translate",A.t.translate);v("X.matrix.scale",A.t.scale);v("X.matrix.rotate",A.t.rotate);v("X.matrix.rotateX",A.t.Qr);v("X.matrix.rotateY",A.t.Rr);v("X.matrix.rotateZ",A.t.Sr);v("X.matrix.swapRows",A.t.HL);v("X.matrix.swapCols",A.t.GL);function Md(){ad.call(this);this.s="transform";this.ub=A.t.Wn()}w(Md,ad);Md.prototype.__defineGetter__("matrix",function(){return this.ub});Md.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.ub=a;this.da()});f=Md.prototype;f.Qr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Qr(this.ub,a*Math.PI/180);this.da()};
f.Rr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Rr(this.ub,a*Math.PI/180);this.da()};f.Sr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Sr(this.ub,a*Math.PI/180);this.da()};f.ZC=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.ub,a,0,0);this.da()};f.$C=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.ub,0,a,0);this.da()};
f.aD=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.ub,0,0,a);this.da()};function Nd(a,b,c){a.ub[b+4*c]*=-1;a.da()}f.mG=function(){Nd(this,0,0)};f.nG=function(){Nd(this,1,1)};f.oG=function(){Nd(this,2,2)};f.da=function(){this.G=!0};v("X.transform",Md);v("X.transform.prototype.rotateX",Md.prototype.Qr);v("X.transform.prototype.rotateY",Md.prototype.Rr);v("X.transform.prototype.rotateZ",Md.prototype.Sr);v("X.transform.prototype.translateX",Md.prototype.ZC);
v("X.transform.prototype.translateY",Md.prototype.$C);v("X.transform.prototype.translateZ",Md.prototype.aD);v("X.transform.prototype.flipX",Md.prototype.mG);v("X.transform.prototype.flipY",Md.prototype.nG);v("X.transform.prototype.flipZ",Md.prototype.oG);v("X.transform.prototype.modified",Md.prototype.da);function Od(){ad.call(this);this.s="texture";this.zi=this.Ff=this.ea=null;this.dt=this.et=0;this.Px=!1;xa(this,new ed)}w(Od,ad);Od.prototype.__defineSetter__("rawData",function(a){this.zi=a;this.G=!0});Od.prototype.__defineSetter__("rawDataHeight",function(a){this.dt=a;this.G=!0});Od.prototype.__defineSetter__("rawDataWidth",function(a){this.et=a;this.G=!0});Od.prototype.__defineSetter__("grayscale",function(a){this.Px=a;this.G=!0});v("X.texture",Od);function Qd(){this.Cd=Rd;this.ec=new Md;this.Ga=[1,1,1];this.ul=this.Ua=this.Ec=this.ca=this.C=null;this.pl=[];this.jb=!0;this.ol=this.Zm=1;this.gl=null;this.Qm=!1;this.Qc=1;this.ed=0;this.Ym=!0}var Rd="TRIANGLES";Qd.prototype.__defineSetter__("type",function(a){return this.Cd=a});Qd.prototype.__defineGetter__("type",function(){return this.Cd});Qd.prototype.__defineGetter__("texture",function(){this.Ua||(this.Ua=new Od);return this.Ua});Qd.prototype.__defineGetter__("transform",function(){return this.ec});
Qd.prototype.__defineGetter__("points",function(){return this.C});Qd.prototype.__defineSetter__("points",function(a){this.C=a});Qd.prototype.__defineGetter__("normals",function(){return this.ca});Qd.prototype.__defineSetter__("normals",function(a){this.ca=a});Qd.prototype.__defineGetter__("colors",function(){return this.Ec});Qd.prototype.__defineSetter__("colors",function(a){this.Ec=a});Qd.prototype.__defineGetter__("color",function(){return this.Ga});
Qd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Ga=a;this.G=!0});Qd.prototype.__defineGetter__("opacity",function(){return this.Qc});Qd.prototype.__defineSetter__("opacity",function(a){if(!u(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Qc=a;this.G=!0});Qd.prototype.__defineGetter__("caption",function(){return this.gl});
Qd.prototype.__defineSetter__("caption",function(a){this.gl=a;this.G=!0});Qd.prototype.__defineGetter__("visible",function(){return this.jb});Qd.prototype.__defineSetter__("visible",function(a){for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.jb=a;this.G=!0});Qd.prototype.__defineGetter__("pointsize",function(){return this.Zm});Qd.prototype.__defineSetter__("pointsize",function(a){if(!u(a))throw Error("Invalid point size.");this.Zm=a;this.G=!0});
Qd.prototype.__defineGetter__("magicmode",function(){return this.Qm});Qd.prototype.__defineSetter__("magicmode",function(a){if(!ia(a))throw Error("Invalid magic mode setting.");this.Qm=a;this.G=!0});Qd.prototype.__defineGetter__("linewidth",function(){return this.ol});Qd.prototype.__defineSetter__("linewidth",function(a){if(!u(a))throw Error("Invalid line width.");this.ol=a;this.G=!0});Qd.prototype.__defineGetter__("pickable",function(){return this.Ym});
Qd.prototype.__defineSetter__("pickable",function(a){if(!ia(a))throw Error("Invalid pickable setting.");this.Ym=a;this.G=!0});Qd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.ul});Qd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Sd(){this.Vd=Infinity;this.tb=this.Tb=-Infinity;this.vb=Infinity;this.vi=[0,0,0];this.ti=[1,1,1]}Sd.prototype.__defineGetter__("lowerThreshold",function(){return this.tb});Sd.prototype.__defineSetter__("lowerThreshold",function(a){this.tb=a});Sd.prototype.__defineGetter__("upperThreshold",function(){return this.vb});Sd.prototype.__defineSetter__("upperThreshold",function(a){this.vb=a});Sd.prototype.__defineGetter__("min",function(){return this.Vd});Sd.prototype.__defineGetter__("max",function(){return this.Tb});
Sd.prototype.__defineGetter__("minColor",function(){return this.vi});Sd.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.vi=a});Sd.prototype.__defineGetter__("maxColor",function(){return this.ti});Sd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.ti=a});function Td(){ad.call(this);this.s="scalars";this.Nm=this.Ya=null;this.by=!0;this.Ts=0;xa(this,new ed);xa(this,new Sd);this.vi=[0,1,0];this.ti=[1,0,0]}w(Td,ad);Td.prototype.__defineGetter__("array",function(){return this.Ya});Td.prototype.__defineSetter__("array",function(a){this.Nm=this.Ya=a;this.G=!0});Td.prototype.__defineGetter__("interpolation",function(){return this.Ts});Td.prototype.__defineSetter__("interpolation",function(a){this.Ts=a});v("X.scalars",Td);function Ud(a){ad.call(this);this.s="object";this.j=[];this.Za=this.zd=null;xa(this,new Qd);null!=a&&this.Zj(a)}w(Ud,ad);
Ud.prototype.Zj=function(a){this.Cd=a.Cd;this.ec=new Md;this.ec.ub=new Float32Array(a.ec.ub);this.Ga=a.Ga.slice();a.C&&(this.C=new bd(a.C.length,a.C));a.ca&&(this.ca=new bd(a.ca.length,a.ca));a.Ec&&(this.Ec=new bd(a.Ec.length,a.Ec));this.Ua=a.Ua;this.ul=a.ul;a.ea&&(this.ea=new dd((new String(a.ea.Pp)).toString()));this.Qc=a.Qc;this.j.length=0;var b=a.j;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.j.push(new A[b[d].s](b[d]));this.jb=a.jb;this.Zm=a.Zm;this.ol=a.ol;a.gl&&(this.gl=(new String(a.gl)).toString());
this.Qm=a.Qm;this.Ym=a.Ym;this.pl=a.pl.slice();this.G=!0};Ud.prototype.__defineGetter__("colortable",function(){this.zd||(this.zd=new md);return this.zd});Ud.prototype.__defineGetter__("scalars",function(){this.Za||(this.Za=new Td);return this.Za});Ud.prototype.__defineGetter__("children",function(){return this.j});Ud.prototype.da=function(){var a=new Vd;a.Ma=this;this.dispatchEvent(a)};Ud.prototype.remove=function(){var a=new Wd;a.Ma=this;this.dispatchEvent(a)};
function Xd(a,b){if(!(null!=a&&null!=b&&a instanceof Ud&&b instanceof Ud))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Qc?-1:1==b.Qc?1:null!=a.ed&&null!=b.ed&&a.ed>b.ed?-1:1}v("X.object",Ud);v("X.object.prototype.modified",Ud.prototype.da);v("X.object.prototype.remove",Ud.prototype.remove);function Zd(a){Cc.call(this,a);this.s="event"}w(Zd,Cc);var $d="pan"+B(),ae="rotate"+B(),be="zoom"+B(),ce="scroll"+B();B();var de="resetview"+B(),ee="windowlevel"+B(),fe="modified"+B(),ge="remove"+B(),he="progress"+B(),ie="hover"+B(),je="hover_end"+B(),ke="computing"+B(),le="computing_end"+B(),me="computing_progress"+B();function oe(){Zd.call(this,ee);this.Ys=this.lt=0}w(oe,Zd);function pe(){Zd.call(this,$d);this.ed=new A.P(0,0,0)}w(pe,Zd);function qe(){Zd.call(this,ae);this.ed=new A.P(0,0,0)}
w(qe,Zd);function re(){Zd.call(this,be);this.Ef=this.Ag=!1}w(re,Zd);function se(){Zd.call(this,ce);this.Vb=!1}w(se,Zd);function te(){Zd.call(this,ie);this.Xp=this.Wp=0}w(te,Zd);function xe(){Zd.call(this,je)}w(xe,Zd);function ye(){Zd.call(this,de)}w(ye,Zd);function Vd(){Zd.call(this,fe);this.va=this.Ma=null}w(Vd,Zd);function Wd(){Zd.call(this,ge);this.va=this.Ma=null}w(Wd,Zd);function ze(){Zd.call(this,he);this.Qj=0}w(ze,Zd);function Ae(){Zd.call(this,ke);this.Ma=null}w(Ae,Zd);
function Be(){Zd.call(this,me);this.Qj=0}w(Be,Zd);function Ce(){Zd.call(this,le);this.Ma=null}w(Ce,Zd);v("X.event.events.PAN",$d);v("X.event.events.ROTATE",ae);v("X.event.events.ZOOM",be);v("X.event.events.SCROLL",ce);function De(){ad.call(this);this.s="parser";this._data=null;this.La=0;this.aF=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Lp=!0}w(De,ad);De.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Ee(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Fe(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
De.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.La,this.La+=b*c));if(this.aF!=this.Lp)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function Ge(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=zd(0,0,0,1),e=yd();Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=zd(0,0,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=zd(0,b[1]-
1,0,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=zd(b[0]-1,0,0,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=zd(b[0]-1,b[1]-1,0,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=zd(b[0]-1,0,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=zd(0,b[1]-1,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=zd(b[0]-1,b[1]-1,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function He(a,b){var c=Bd();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=vd(),h=a[0],k=a[1],l=a[2],n=b[0],p=b[1],m=b[2];e[0]=k*m-l*p;e[1]=l*n-h*m;e[2]=h*p-k*n;xd(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];L(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);L(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);L(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=Ad();Id(c,d);return[c,d]}
function Ie(a,b,c,d,e,h,k,l,n){var p=new Je;xd(c,c);for(var m=[],q=[],t=0;6>t;t++)for(var s=Math.floor(t/2),z=(s+1)%3,y=(s+2)%3,H=(4+2*s)%6,P=0;2>P;P++){var O=(2+P+2*s)%6,G=-(c[s]*(e[t]-a[s])+c[z]*(e[O]-a[z]))/c[y]+a[y];if(G>=e[H]&&G<=e[H+1]||G<=e[H]&&G>=e[H+1]){var S=[];S[s]=e[t];S[z]=e[O];S[y]=G;m.push(S)}else S=[],S[s]=e[t],S[z]=e[O],S[y]=G,q.push(S)}a=wd(0,0,1);a=He(c,a);e=a[0];a=a[1];s=[];for(q=0;q<m.length;++q)t=zd(m[q][0],m[q][1],m[q][2],1),z=yd(),Kd(e,t,z),s.push([z[0],z[1],z[2]]);e=wd(1,
0,0);m=vd();Jd(a,e,m);q=wd(0,1,0);e=vd();Jd(a,q,e);t=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(q=q=0;q<s.length;++q)s[q][0]<t[0]&&(t[0]=s[q][0]),s[q][0]>t[1]&&(t[1]=s[q][0]),s[q][1]<t[2]&&(t[2]=s[q][1]),s[q][1]>t[3]&&(t[3]=s[q][1]),s[q][2]<t[4]&&(t[4]=s[q][2]),s[q][2]>t[5]&&(t[5]=s[q][2]);q=zd(t[0]+(t[1]-t[0])/2,t[2]+(t[3]-t[2])/2,t[4]+(t[5]-t[4])/2,0);s=yd();Hd(a,q,s);z=Math.floor(t[0]);y=Math.ceil(t[1]);z==y&&y++;H=y-z;P=Math.floor(t[2]);
O=Math.ceil(t[3]);G=O-P;S=b[0];b=b[1];var q=Math.ceil(H/S),Y=Math.ceil(G/b),U=new Uint8Array(4*q*Y),va=new Od;va.et=q;va.dt=Y;var Y=yd(),na=zd(0,0,t[4],1),ya=Ad();Hd(k.SE,a,ya);for(var Ma=O-1E-7,Ha=y-1E-7,Na=0,la=0,za=0,qa=P,qa=P;qa<=Ma;qa+=b)for(za++,la=0,na[1]=qa,q=z;q<=Ha;q+=S){la++;na[0]=q;Kd(ya,na,Y);var Dc=4*Na,ue=Math.floor(Y[2]),ve=Math.floor(Y[1]),we=Math.floor(Y[0]);if(0<=we&&we<k.Da[0]&&0<=ve&&ve<k.Da[1]&&0<=ue&&ue<k.Da[2]){var Yd=h[ue][ve][we],Qh=we=ve=ue=0;n?((Yd=n.get(Yd))||(Yd=[0,.61,
0,0,1]),ue=255*Yd[1],ve=255*Yd[2],we=255*Yd[3],Qh=255*Yd[4]):(ue=ve=we=Yd/k.Tb*255,Qh=255);U[Dc]=ue;U[++Dc]=ve;U[++Dc]=we;U[++Dc]=Qh}else U[Dc]=0,U[++Dc]=0,U[++Dc]=0,U[++Dc]=0;Na++}va.zi=U;p.Ua=va;p.gF=t;p.UE=a;p.TE=ya;p.$E=P;p.GO=O;p.fF=z;p.HO=y;p.Rx=la;p.Qx=za;p.zh=S;p.Va=H;p.sh=b;p.Ha=G;p.Sa=[s[0],s[1],s[2]];p.jl=[c[0],c[1],c[2]];p.Qp=[m[0],m[1],m[2]];p.Vb=[e[0],e[1],e[2]];p.jb=!1;p.yh=k;p.rh=null==k.yh||l?!0:!1;p.fl=d;p.df();p.jb=!1;return p}
function Ke(a,b,c,d){var e;e=d.Dc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,q=(2+2*n)%6,t=(4+2*n)%6,s=1/c[n]*(e[l]-b[n]);if(Infinity!=s&&-Infinity!=s){var z=b[p]+c[p]*s,s=b[m]+c[m]*s;z>=e[q]&&z<=e[q+1]&&s>=e[t]&&s<=e[t+1]?(q=[],q[n]=e[l],q[p]=z,q[m]=s,h.push(q)):(q=[],q[n]=e[l],q[p]=z,q[m]=s,k.push(q))}}e=[h,k];b=e[0];d.e[a].I=e;e=od(new K(b[0][0],b[0][1],b[0][2]),new K(b[1][0],b[1][1],b[1][2]));d.e[a].FO=e;h=wd(0,0,1);k=He(c,h)[0];l=zd(d.Qs[0],d.Qs[1],d.Qs[2],0);h=
yd();Kd(k,l,h);k=yd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.e[a].Bd=[Math.abs(h[0]),Math.abs(h[1])];d.e[a].sl=h[2];d.e[a].Na=k;e=Math.floor(Math.abs(e/h[2]));d.an[a]=e+1;d.e[a].ba=e+1;d.e[a].I[0][0][0]>d.e[a].I[0][1][0]?0<k[0]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][0]<d.e[a].I[0][1][0]?0>k[0]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][1]>d.e[a].I[0][1][1]?
0<k[1]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][1]<d.e[a].I[0][1][1]?0>k[1]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][2]>d.e[a].I[0][1][2]?0<k[2]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][2]<d.e[a].I[0][1][2]&&0>k[2]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e);d.e[a].at=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Le(a,b){var c;c=b._data;for(var d=b.Da,e=b.Tb,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,p=0,m=0,q=0,t=0,q=0;q<d[2];q++){var s=c.subarray(q*l,(q+1)*l),t=0;k[q]=Array(d[1]);h[q]=Array(d[1]);for(m=0;m<d[1];m++)for(k[q][m]=new c.constructor(d[0]),h[q][m]=new c.constructor(d[0]),p=0;p<d[0];p++)n=s[t],k[q][m][p]=n/e*255,h[q][m][p]=n,t++}c=[h,k];b.dc=c[0];b.EO=c[1];A.Td(a.s+".reslice");b.bb=null!=b.q;b.zd&&(b.Mm=b.zd.Ud);b.yP=[0,0,0];b.ua=[b.yd[0]+(b.qh[0]-1)/2,b.yd[1]+(b.qh[1]-1)/2,b.yd[2]+(b.qh[2]-
1)/2];b.Dc=[Math.min(b.yd[0],b.yd[0]+b.qh[0]-1),Math.max(b.yd[0],b.yd[0]+b.qh[0]-1),Math.min(b.yd[1],b.yd[1]+b.qh[1]-1),Math.max(b.yd[1],b.yd[1]+b.qh[1]-1),Math.min(b.yd[2],b.yd[2]+b.qh[2]-1),Math.max(b.yd[2],b.yd[2]+b.qh[2]-1)];b.e=[{},{},{}];c=wd(b.ua[0],b.ua[1],b.ua[2]);b.e[0].bn=c;d=wd(1,0,0);xd(d,d);b.e[0].D=d;e=[1,0,0];b.e[0].Ga=e;Ke(0,c,d,b);b.j[0].j=Array(b.e[0].ba);c[0]=b.e[0].I[0][0][0]+b.e[0].Na[0]*Math.floor(b.e[0].ba/2);c[1]=b.e[0].I[0][0][1]+b.e[0].Na[1]*Math.floor(b.e[0].ba/2);c[2]=
b.e[0].I[0][0][2]+b.e[0].Na[2]*Math.floor(b.e[0].ba/2);c=Ie(c,b.e[0].Bd,b.e[0].D,b.e[0].Ga,b.Dc,b.dc,b,b.bb,b.Mm);b.bb&&(c.q=b.q.j[0].j[Math.floor(b.e[0].ba/2)].Ua);b.j[0].j[Math.floor(b.e[0].ba/2)]=c;b.th=Math.floor(b.e[0].ba/2);b.kl=Math.floor(b.e[0].ba/2);c=wd(b.ua[0],b.ua[1],b.ua[2]);b.e[1].bn=c;d=wd(0,1,0);xd(d,d);b.e[1].D=d;e=[0,1,0];b.e[1].Ga=e;Ke(1,c,d,b);b.j[1].j=Array(b.e[1].ba);c[0]=b.e[1].I[0][0][0]+b.e[1].Na[0]*Math.floor(b.e[1].ba/2);c[1]=b.e[1].I[0][0][1]+b.e[1].Na[1]*Math.floor(b.e[1].ba/
2);c[2]=b.e[1].I[0][0][2]+b.e[1].Na[2]*Math.floor(b.e[1].ba/2);c=Ie(c,b.e[1].Bd,b.e[1].D,b.e[1].Ga,b.Dc,b.dc,b,b.bb,b.Mm);b.bb&&(c.q=b.q.j[1].j[Math.floor(b.e[1].ba/2)].Ua);b.j[1].j[Math.floor(b.e[1].ba/2)]=c;b.uh=Math.floor(b.e[1].ba/2);b.ll=Math.floor(b.e[1].ba/2);c=wd(b.ua[0],b.ua[1],b.ua[2]);b.e[2].bn=c;d=wd(0,0,1);xd(d,d);b.e[2].D=d;e=[0,.392,.804];b.e[2].Ga=e;Ke(2,c,d,b);b.j[2].j=Array(b.e[2].ba);c[0]=b.e[2].I[0][0][0]+b.e[2].Na[0]*Math.floor(b.e[2].ba/2);c[1]=b.e[2].I[0][0][1]+b.e[2].Na[1]*
Math.floor(b.e[2].ba/2);c[2]=b.e[2].I[0][0][2]+b.e[2].Na[2]*Math.floor(b.e[2].ba/2);c=Ie(c,b.e[2].Bd,b.e[2].D,b.e[2].Ga,b.Dc,b.dc,b,b.bb,b.Mm);b.bb&&(c.q=b.q.j[2].j[Math.floor(b.e[2].ba/2)].Ua);b.j[2].j[Math.floor(b.e[2].ba/2)]=c;b.vh=Math.floor(b.e[2].ba/2);b.ml=Math.floor(b.e[2].ba/2);A.ud(a.s+".reslice");return b.dc};function Me(){De.call(this);this.s="parserOFF"}w(Me,De);
Me.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Fe(h,n,a);n=a+1;return b}n=e;return Fe(h,n,e-1)}A.Td(this.s+".parse");this._data=c;var e=c.byteLength,h=this.h("uchar",e);c=[];b.C=new bd(e);b.ca=new bd(e);for(var k=b.C,l=b.ca,n=0,p=d(),p=("OFF"===p?d():p).split(" "),m=p[0],p=p[1];m--;){var q=d(),q=q.split(" ");c.push([parseFloat(q[0]),parseFloat(q[1]),parseFloat(q[2])])}for(;p--;){var q=d(),q=q.split(" "),
t=c[parseInt(q[1],10)],m=c[parseInt(q[2],10)],q=c[parseInt(q[3],10)];k.add(t[0],t[1],t[2]);k.add(m[0],m[1],m[2]);k.add(q[0],q[1],q[2]);t=new K(t[0],t[1],t[2]);q=new K(q[0],q[1],q[2]);m=rd((new K(m[0],m[1],m[2])).zc(t),q.zc(t));m.normalize();l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z)}A.ud(this.s+".parse");c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};v("X.parserOFF",Me);v("X.parserOFF.prototype.parse",Me.prototype.parse);function Je(a){Ud.call(this);this.s="slice";this.Sa=[0,0,0];this.jl=[0,0,1];this.Vb=[0,1,0];this.Qp=[1,0,0];this.Ha=this.Va=10;this.ul=[0,1,0,0,1,1,1,1,1,0,0,0];this.q=this.yh=null;this.rh=!0;this.fl=[1,1,1];null!=a&&this.Zj(a)}w(Je,Ud);Je.prototype.Zj=function(a){this.Sa=a.Sa.slice();this.jl=a.jl.slice();this.Vb=a.Vb.slice();this.Va=a.Va;this.Ha=a.Ha;this.yh=a.yh;this.q=a.q;this.rh=a.rh;this.fl=a.fl;this.ZE=a.ZE;Je.d.Zj.call(this,a)};Je.prototype.__defineSetter__("height",function(a){this.Ha=a});
Je.prototype.__defineSetter__("width",function(a){this.Va=a});Je.prototype.create=function(){this.df()};
Je.prototype.df=function(){var a=(new K(this.jl[0],this.jl[1],this.jl[2])).normalize(),b=new K(this.Vb[0],this.Vb[1],this.Vb[2]),c=new K(this.Qp[0],this.Qp[1],this.Qp[2]),d=new K(this.Sa[0],this.Sa[1],this.Sa[2]),e=qd(c.clone().zb().scale(this.Va/2),b.clone().zb().scale(this.Ha/2)),h=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=qd(c.clone().zb().scale(this.Va/2),b.clone().scale(this.Ha/2)),k=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=qd(c.clone().scale(this.Va/2),b.clone().zb().scale(this.Ha/2)),l=new K(e.x+d.x,e.y+d.y,
e.z+d.z),e=qd(c.clone().scale(this.Va/2),b.clone().scale(this.Ha/2)),b=new K(e.x+d.x,e.y+d.y,e.z+d.z);this.C=new bd(18);this.ca=new bd(18);this.C.add(h.x,h.y,h.z);this.C.add(k.x,k.y,k.z);this.C.add(l.x,l.y,l.z);this.C.add(l.x,l.y,l.z);this.C.add(b.x,b.y,b.z);this.C.add(k.x,k.y,k.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.rh&&(a=new Ud,a.C=new bd(24),a.ca=new bd(24),a.C.add(h.x,h.y,h.z),
a.C.add(k.x,k.y,k.z),a.C.add(k.x,k.y,k.z),a.C.add(b.x,b.y,b.z),a.C.add(b.x,b.y,b.z),a.C.add(l.x,l.y,l.z),a.C.add(l.x,l.y,l.z),a.C.add(h.x,h.y,h.z),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.Ga=[this.fl[0],this.fl[1],this.fl[2]],a.Cd="LINES",a.ol=2,this.j.push(a))};v("X.slice",Je);v("X.slice.prototype.create",Je.prototype.create);function J(a){Ud.call(this);this.s="volume";this.Sa=[0,0,0];this.Da=[10,10,10];this.Dc=[1,1,1];this.an=[10,10,10];this.wh=[1,1,1];this.Ff=[];this.ml=this.vh=this.ll=this.uh=this.kl=this.th=0;this.cn=new Ud;this.en=new Ud;this.fn=new Ud;this.Vp=this.De=!1;this.Bb=-1;this.Tp=[];this.q=null;this.rh=!0;this.Lb=Infinity;this.Kb=-Infinity;this.cy=!0;this.Tb=0;this._data=null;xa(this,new ed);xa(this,new Sd);null!=a&&this.Zj(a)}w(J,Ud);
J.prototype.Zj=function(a){this.Sa=a.Sa.slice();this.Da=a.Da.slice();this.wh=a.wh.slice();this.th=a.th;this.kl=a.kl;this.uh=a.uh;this.ll=a.ll;this.vh=a.vh;this.ml=a.ml;this.Mx=a.Mx.slice();this.cn=new Ud(a.cn);this.en=new Ud(a.en);this.fn=new Ud(a.fn);this.Tb=a.Tb;this._data=a._data;this.De=a.De;this.Vp=a.Vp;this.Bb=a.Bb;this.q=a.q;this.rh=a.rh;J.d.Zj.call(this,a)};
J.prototype.df=function(a){this.j.length=0;this.cn.j.length=0;this.en.j.length=0;this.fn.j.length=0;this.j.push(this.cn);this.j.push(this.en);this.j.push(this.fn);this.yd=a.$e;this.Qs=a.ug;this.qh=a.dd;this.el=a.xe;this.SE=a.ze;this.Tb=a.max;this._data=a.data;this.G=!0};
J.prototype.da=function(a){a="undefined"!==typeof a?a:!0;if(0<this.j.length){this.De!=this.Vp&&(this.De||-1==this.Bb||(this.j[this.Bb].visible=!1),this.G=!0,this.Vp=this.De);if(!this.jb)return;for(var b=0,b=0;3>b;b++){var c=this.j[b],d=0,e=0;0==b?(d=this.th,e=this.kl,this.kl=this.th):1==b?(d=this.uh,e=this.ll,this.ll=this.uh):2==b&&(d=this.vh,e=this.ml,this.ml=this.vh);if(null==this.j[b].j[parseInt(d,10)]){var h=vd();h[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*parseInt(d,10);h[1]=this.e[b].I[0][0][1]+
this.e[b].Na[1]*parseInt(d,10);h[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*parseInt(d,10);if(this.bb){var k=Ie(h,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.q.dc,this.q,this.q.bb,this.q.zd.Ud);this.q.j[b].j[parseInt(d,10)]=k;this.q.j[b].da(!0)}h=Ie(h,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.dc,this,!0,null);this.bb&&(h.q=h.Ua,h.q=this.q.j[b].j[parseInt(d,10)].Ua);c.j[parseInt(d,10)]=h;this.j[b].da(!0)}e=c.j[parseInt(e,10)];this.De||(e.visible=!1);c=c.j[parseInt(d,10)];c.visible=!0;
c.Qc=1;this.De&&(c.j[0].jb=!1,b!=this.Bb&&(c.visible=!1,c.Qc=0))}this.De&&-1!=this.Bb&&Ne(this,this.Bb)}a&&J.d.da.call(this)};J.prototype.__defineGetter__("dimensions",function(){return this.Da});J.prototype.__defineSetter__("dimensions",function(a){this.Da=a});J.prototype.__defineGetter__("spacing",function(){return this.wh});J.prototype.__defineSetter__("spacing",function(a){this.wh=a});J.prototype.__defineGetter__("bbox",function(){return this.Dc});J.prototype.__defineGetter__("range",function(){return this.an});
J.prototype.__defineGetter__("dimensionsRAS",function(){return this.Mx});J.prototype.__defineGetter__("volumeRendering",function(){return this.De});J.prototype.__defineSetter__("volumeRendering",function(a){this.De=a;this.da(!1)});J.prototype.__defineGetter__("visible",function(){return this.jb});J.prototype.__defineSetter__("visible",function(a){if(a)this.jb=a,this.da(!1);else{for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.jb=a;this.G=!0}});
J.prototype.__defineGetter__("center",function(){return this.Sa});J.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.Sa=a});J.prototype.__defineGetter__("volumeRenderingCache",function(){return this.Tp});J.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.Tp=a});J.prototype.__defineGetter__("image",function(){return this.Ff});
J.prototype.__defineGetter__("labelmap",function(){this.q||(this.q=new Oe(this));return this.q});J.prototype.__defineGetter__("indexX",function(){return this.th});J.prototype.__defineSetter__("indexX",function(a){u(a)&&0<=a&&a<this.cn.j.length&&(this.th=a,this.da(!1))});J.prototype.__defineGetter__("indexY",function(){return this.uh});J.prototype.__defineSetter__("indexY",function(a){u(a)&&0<=a&&a<this.en.j.length&&(this.uh=a,this.da(!1))});J.prototype.__defineGetter__("indexZ",function(){return this.vh});
J.prototype.__defineSetter__("indexZ",function(a){u(a)&&0<=a&&a<this.fn.j.length&&(this.vh=a,this.da(!1))});J.prototype.__defineGetter__("windowLow",function(){return this.Lb});J.prototype.__defineSetter__("windowLow",function(a){this.Lb=a});J.prototype.__defineGetter__("windowHigh",function(){return this.Kb});J.prototype.__defineSetter__("windowHigh",function(a){this.Kb=a});J.prototype.__defineGetter__("borders",function(){return this.rh});
J.prototype.__defineSetter__("borders",function(a){this.rh=a});J.prototype.__defineGetter__("reslicing",function(){return this.cy});J.prototype.__defineSetter__("reslicing",function(a){this.cy=a});J.prototype.__defineSetter__("xNormX",function(a){this.e[0].D[0]=a});J.prototype.__defineGetter__("xNormX",function(){return this.e[0].D[0]});J.prototype.__defineSetter__("xNormY",function(a){this.e[0].D[1]=a});J.prototype.__defineGetter__("xNormY",function(){return this.e[0].D[1]});
J.prototype.__defineSetter__("xNormZ",function(a){this.e[0].D[2]=a});J.prototype.__defineGetter__("xNormZ",function(){return this.e[0].D[2]});J.prototype.__defineSetter__("xColor",function(a){this.e[0].Ga=a});J.prototype.__defineGetter__("xColor",function(){return this.e[0].Ga});J.prototype.__defineSetter__("yNormX",function(a){this.e[1].D[0]=a});J.prototype.__defineGetter__("yNormX",function(){return this.e[1].D[0]});J.prototype.__defineSetter__("yNormY",function(a){this.e[1].D[1]=a});
J.prototype.__defineGetter__("yNormY",function(){return this.e[1].D[1]});J.prototype.__defineSetter__("yNormZ",function(a){this.e[1].D[2]=a});J.prototype.__defineGetter__("yNormZ",function(){return this.e[1].D[2]});J.prototype.__defineSetter__("yColor",function(a){this.e[1].Ga=a});J.prototype.__defineGetter__("yColor",function(){return this.e[1].Ga});J.prototype.__defineSetter__("zNormX",function(a){this.e[2].D[0]=a});J.prototype.__defineGetter__("zNormX",function(){return this.e[2].D[0]});
J.prototype.__defineSetter__("zNormY",function(a){this.e[2].D[1]=a});J.prototype.__defineGetter__("zNormY",function(){return this.e[2].D[1]});J.prototype.__defineSetter__("zNormZ",function(a){this.e[2].D[2]=a});J.prototype.__defineGetter__("zNormZ",function(){return this.e[2].D[2]});J.prototype.__defineSetter__("zColor",function(a){this.e[2].Ga=a});J.prototype.__defineGetter__("zColor",function(){return this.e[2].Ga});
J.prototype.tL=function(a){this.j[a].visible=!1;for(var b=0;b<this.j[a].j.length;b++)"undefined"!=typeof this.j[a].j[b]&&(this.bb&&(this.q.j[a].j[b].remove(),this.q.j[a].j[b]=null),this.j[a].j[b].remove(),this.j[a].j[b]=null);xd(this.e[a].D,this.e[a].D);Ke(a,this.e[a].bn,this.e[a].D,this);this.j[a].j=[];alert("#VOLUME#",this.e[a].ba);this.j[a].j=Array(this.e[a].ba);this.bb&&(b=Ie(this.e[a].bn,this.e[a].Bd,this.e[a].D,this.e[a].Ga,this.Dc,this.q.dc,this.q,this.q.bb,this.q.zd.Ud),this.q.j[a].j=[],this.q.j[a].j=
Array(this.e[a].ba),this.q.j[a].j[Math.floor(this.e[a].ba/2)]=b,this.q.j[a].da());b=Ie(this.e[a].bn,this.e[a].Bd,this.e[a].D,this.e[a].Ga,this.Dc,this.dc,this,!0,null);this.bb&&(b.q=b.Ua,b.q=this.q.j[a].j[Math.floor(this.e[a].ba/2)].Ua);this.j[a].j[Math.floor(this.e[a].ba/2)]=b;0==a?(this.th=Math.floor(this.e[a].ba/2),this.kl=Math.floor(this.e[a].ba/2)):1==a?(this.uh=Math.floor(this.e[a].ba/2),this.ll=Math.floor(this.e[a].ba/2)):(this.vh=Math.floor(this.e[a].ba/2),this.ml=Math.floor(this.e[a].ba/
2));this.j[a].da();this.j[a].j[Math.floor(this.e[a].ba/2)].jb=!0};
function Ne(a,b){if(!a.Fp)if(!a.De||!a.G&&b==a.Bb)a.Bb=b;else if(-1==a.Tp.indexOf(b))a.Tp.push(b),a.Fp=!0,Pe(a,b),setTimeout(function(){var a=null;0<=this.Bb&&(a=this.j[this.Bb],a.visible=!1);var a=this.j[b],c=a.j.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.j[e]){var p=vd();p[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;p[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;p[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.bb){var m=Ie(p,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.q.dc,this.q,
this.q.bb,this.q.zd.Ud);this.q.j[b].j[e]=m;this.q.j[b].da(!0)}p=Ie(p,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.dc,this,!0,null);p.j[0].jb=!1;this.bb&&(p.q=p.Ua,p.q=this.q.j[b].j[e].Ua);a.j[e]=p}a.j[e].jb=!0}Qe(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.j[e]){var m=vd();m[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.bb){var p=Ie(m,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.q.dc,
this.q,this.q.bb,this.q.zd.Ud);this.q.j[b].j[e]=p;this.q.j[b].da(!0)}m=Ie(m,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.dc,this,!0,null);m.j[0].jb=!1;this.bb&&(m.q=m.Ua,m.q=this.q.j[b].j[e].Ua);a.j[e]=m}a.j[e].jb=!0}Qe(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.j[e]){var m=vd();m[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.bb){var p=Ie(m,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,
this.q.dc,this.q,this.q.bb,this.q.zd.Ud);this.q.j[b].j[e]=p;this.q.j[b].da(!0)}m=Ie(m,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.dc,this,!0,null);m.j[0].jb=!1;this.bb&&(m.q=m.Ua,m.q=this.q.j[b].j[e].Ua);a.j[e]=m}a.j[e].jb=!0}Qe(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.j[e]){var m=vd();m[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.bb){var p=Ie(m,this.e[b].Bd,this.e[b].D,this.e[b].Ga,
this.Dc,this.q.dc,this.q,this.q.bb,this.q.zd.Ud);this.q.j[b].j[e]=p;this.q.j[b].da(!0)}m=Ie(m,this.e[b].Bd,this.e[b].D,this.e[b].Ga,this.Dc,this.dc,this,!0,null);m.j[0].jb=!1;this.bb&&(m.q=m.Ua,m.q=this.q.j[b].j[e].Ua);a.j[e]=m}a.j[e].jb=!0}Qe(this,1);setTimeout(function(){this.Fp&&this.j[b].da(!0);this.Bb=b;this.G=!1;if(this.Fp){var a=new Ce;a.Ma=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Fp=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.j[a.Bb];
c.visible=!1;var c=a.j[b],d=c.j.length,e;for(e=0;e<d;e++)c.j[e].jb=!0;a.Bb=b;a.G=!1}}function Pe(a,b){var c=new Ae;c.Ma=a;a.dispatchEvent(c);a.onComputing(b)}function Qe(a,b){var c=new Be;c.Qj=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}J.prototype.sv=function(){};J.prototype.uv=function(){};J.prototype.tv=function(){};J.REORIENT_TRANSFORM_KEY="ot_"+B();v("X.volume.REORIENT_TRANSFORM_KEY",J.REORIENT_TRANSFORM_KEY);J.REORIENTED_DIMENSIONS_KEY="otd_"+B();
v("X.volume.REORIENTED_DIMENSIONS_KEY",J.REORIENTED_DIMENSIONS_KEY);J.ORIENTATION_KEY="or_"+B();v("X.volume.ORIENTATION_KEY",J.ORIENTATION_KEY);J.SINGLE_FRAME_SCAN="sf_"+B();v("X.volume.SINGLE_FRAME_SCAN",J.SINGLE_FRAME_SCAN);v("X.volume",J);v("X.volume.prototype.modified",J.prototype.da);v("X.volume.prototype.sliceInfoChanged",J.prototype.tL);v("X.volume.prototype.onComputing",J.prototype.sv);v("X.volume.prototype.onComputingProgress",J.prototype.uv);v("X.volume.prototype.onComputingEnd",J.prototype.tv);function Re(){De.call(this);this.s="parserDCM"}w(Re,De);
Re.prototype.parse=function(a,b,c){b.nh={};b.nh.no=0;this.Yh(c,b);if(null==b.ea.length||b.za.length==b.ea.length){b.nh.no=b.ea.length;var d={};c={};for(var e=0;e<b.za.length;e++)d.hasOwnProperty(b.za[e].series_instance_uid)||(d[b.za[e].series_instance_uid]=[],c[b.za[e].series_instance_uid]={}),c[b.za[e].series_instance_uid].hasOwnProperty(b.za[e].sop_instance_uid)||(c[b.za[e].series_instance_uid][b.za[e].sop_instance_uid]=!0,d[b.za[e].series_instance_uid].push(b.za[e]));var e=Object.keys(d)[0],h=
d[e],k=h.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[e][0].dist=0):h[0].image_position_patient[0]!=h[1].image_position_patient[0]||h[0].image_position_patient[1]!=h[1].image_position_patient[1]||h[0].image_position_patient[2]!=h[1].image_position_patient[2]?(l="image_position_patient",e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],
h[0].image_orientation_patient[5]),e=rd(e,d),h.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,e)),h.sort(function(a,b){return a.dist-b.dist})):h[0].instance_number!=h[1].instance_number?(window.console.log("Ordering by instance number"),l="instance_number",h.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");if("image_position_patient"==
l&&5>k)if(e=0,d=function(){window.console.log('Warning: Although series was initially ordered by "image_position_patient", positional overlaps were found.\nSwitching to "instance_number" ordering as a result.');l="instance_number"},1==k)d(),b[J.SINGLE_FRAME_SCAN]=!0;else for(;e<k-1;e++).01>h[e].dist-h[e+1].dist&&(d(),h.sort(function(a,b){return a.instance_number-b.instance_number}));for(var e=0,n=h.length;e<n;e++)window.console.log("\n",e,"\nInstance number:",h[e].instance_number,"\nImage Position Patient:",
h[e].image_position_patient,"\nPixel Spacing:",h[e].pixel_spacing,"\nInitial Ordering:",l);isNaN(h[0].pixel_spacing[0])&&(h[0].pixel_spacing[0]=1);isNaN(h[0].pixel_spacing[1])&&(h[0].pixel_spacing[1]=1);if(1<h.length)for(var e=function(){l="instance_number";h.sort(function(a,b){return a.instance_number-b.instance_number});h.forced_instance_ordering=!0;window.console.log('Warning: Slices were found unordered after XTK "image_position_patient" sorting. Forcing "instance_number" reordering.');for(var a=
0,b=!1;a<n-1;a++)if(0==Math.abs(h[a].instance_number-h[a+1].instance_number)){b=!0;break}if(b)for(window.console.log('Warning: After forcing "instance_number" ordering overlaps were found. Rewriting "instance_number" data for every slice.'),a=0;a<n;a++)h[a].instance_number=a},p=0,n=h.length;p<n-1;p++)if(1!=Math.abs(h[p].instance_number-h[p+1].instance_number)){e();break}if(1<k)switch(l){case "image_position_patient":var d=h[0].image_position_patient,m=h[1].image_position_patient,e=m[0]-d[0],q=m[1]-
d[1],t=m[2]-d[2];h[0].pixel_spacing[2]=Math.sqrt(e*e+q*q+t*t);break;case "instance_number":var s=1;if(!0===h.forced_instance_ordering){for(var e=1,n=h.length,d=h[0].image_position_patient,z=!1;e<n;e++)if(m=h[e].image_position_patient,d[0]!=m[0]||d[1]!=m[1]||d[2]!=m[2]){z=!0;break}z&&(window.console.log('Warning: Setting pixel_spacing according to "image_position_patient" even though "forced_instance_ordering" is used.'),e=m[0]-d[0],q=m[1]-d[1],t=m[2]-d[2],s=Math.sqrt(e*e+q*q+t*t))}h[0].pixel_spacing[2]=
s;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else h[0].pixel_spacing[2]=1;m=1;switch(l){case "image_position_patient":d=h[0].image_position_patient;s=h[k-1].image_position_patient;e=s[0]-d[0];q=s[1]-d[1];t=s[2]-d[2];q=Math.sqrt(e*e+q*q+t*t);m+=Math.round(q/h[0].pixel_spacing[2]);break;case "instance_number":m+=Math.abs(h[k-1].instance_number-h[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}"false"==b.reslicing.toString()&&
(window.console.log('Forcing expexted slices to length of files because volume\'s "reslicing" property is set to false.'),window.console.log("Expected slices:",m),m=k,window.console.log("Ordering:",l));for(var d=h[0].columns*h[0].rows,y=d*m,s=!1,e=0,n=h.length,H=z=0;e<n;e++)h[e].columns>H&&(H=h[e].columns),h[e].rows>z&&(z=h[e].rows);H*z>d&&(d=H*z,y=d*m,s=!0,window.console.log("Warning: Dimensional inequalities found in image sizes."));var P=null;window.console.log(h[0].Fi);switch(h[0].Fi){case 8:P=
new Uint8Array(y);window.console.log("Using a Uint8Array.");break;case 16:P=new Uint16Array(y);window.console.log("Using a Uint16Array.");break;case 32:P=new Uint32Array(y),window.console.log("Using a Uint32Array.");default:window.console.log("Unknown number of bits allocated - using default: 32 bits"),P=new Uint32Array(y)}b.wh=h[0].pixel_spacing;for(y=0;y<k;y++){var O=h[y].data,q=0;switch(l){case "image_position_patient":e=h[y].image_position_patient[0]-h[0].image_position_patient[0];q=h[y].image_position_patient[1]-
h[0].image_position_patient[1];t=h[y].image_position_patient[2]-h[0].image_position_patient[2];q=Math.sqrt(e*e+q*q+t*t)/h[0].pixel_spacing[2];break;case "instance_number":q=h[y].instance_number-h[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}if(s){for(var p=h[y].columns,e=h[y].rows,t=0,G=Pb(z*H),S=Math.round((H-p)/2),Y=p+S,p=Math.round((z-e)/2),U=e+p,e=p;e<U;e++)for(p=S;p<Y;p++)G[H*e+p]=O[t],t++;O=G}P.set(O,Math.round(q)*d)}c.data=P;b._data=P;b.Da=[h[0].columns,
h[0].rows,m];s&&(b.Da=[H,z,m]);c.XF=b.Da;m=Ee(P);k=m[0];m=m[1];c.min=b.Vd=b.Lb=k;c.max=b.Tb=b.Kb=m;b.tb!=k&&(b.tb=k);b.vb!=m&&(b.vb=m);m=h[0].image_position_patient;k=Ad();if("false"==b.reslicing.toString())"image_position_patient"==l||h.forced_instance_ordering?(window.console.log('NRG modification: Running an orthogonal transform because the volume\'s "reslicing" property is set to false.'),e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),
d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),e=rd(e,d),e.x=Math.round(e.x),e.y=Math.round(e.y),e.z=Math.round(e.z),L(k,0,-Math.round(h[0].image_orientation_patient[0])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[3])*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]),L(k,1,-Math.round(h[0].image_orientation_patient[1])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[4])*h[0].pixel_spacing[1],
-e.y*h[0].pixel_spacing[2],-m[1]),L(k,2,Math.round(h[0].image_orientation_patient[2])*h[0].pixel_spacing[0],Math.round(h[0].image_orientation_patient[5])*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]),L(k,3,0,0,0,1),window.console.log("IJKToRAS transform:\n",k),m=Ad(),L(m,0,-Math.round(h[0].image_orientation_patient[0]),-Math.round(h[0].image_orientation_patient[3]),-e.x,0),L(m,1,-Math.round(h[0].image_orientation_patient[1]),-Math.round(h[0].image_orientation_patient[4]),-e.y,0),L(m,2,Math.round(h[0].image_orientation_patient[2]),
Math.round(h[0].image_orientation_patient[5]),e.z,0),L(m,3,0,0,0,1),b[J.REORIENT_TRANSFORM_KEY]=m,window.console.log("Orthogonal Transform:\n",m)):"instance_number"==l?(L(k,0,-1,0,0,-m[0]),L(k,1,-0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]),L(k,3,0,0,0,1),m=Ad(),L(m,0,-1,0,0,0),L(m,1,-0,-1,-0,0),L(m,2,0,0,1,0),L(m,3,0,0,0,1),L(m,3,0,0,0,1),b[J.REORIENT_TRANSFORM_KEY]=m):window.console.log("Unkown ordering mode - returning: "+l);else switch(l){case "image_position_patient":e=new K(h[0].image_orientation_patient[0],
h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]);d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]);e=rd(e,d);L(k,0,-h[0].image_orientation_patient[0]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[3]*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]);L(k,1,-h[0].image_orientation_patient[1]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[4]*h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]);L(k,
2,h[0].image_orientation_patient[2]*h[0].pixel_spacing[0],h[0].image_orientation_patient[5]*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]);L(k,3,0,0,0,1);break;case "instance_number":L(k,0,-1,0,0,-m[0]);L(k,1,-0,-1,-0,-m[1]);L(k,2,0,0,1,m[2]);L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.xe=k;c.ze=Ad();Id(c.xe,c.ze);e=zd(0,0,0,1);m=yd();Kd(k,e,m);e=zd(1,1,1,1);d=yd();Kd(k,e,d);c.ug=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];k=Ge(k,[b.Da[0],b.Da[1],b.Da[2]]);
c.dd=[k[1]-k[0]+1,k[3]-k[2]+1,k[5]-k[4]+1];c.$e=[k[0],k[2],k[4]];"false"==b.reslicing.toString()&&(k=zd(b.Da[0],b.Da[1],b.Da[2],1),m=yd(),Kd(b[J.REORIENT_TRANSFORM_KEY],k,m),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),b[J.REORIENTED_DIMENSIONS_KEY]=m,m[0]==b.Da[2]?(b[J.ORIENTATION_KEY]="sagittal",c.dd[0]+=1*h[0].pixel_spacing[2],c.ug[0]=c.dd[0]/(h.length+1)):m[1]==b.Da[2]?(b[J.ORIENTATION_KEY]="coronal",c.dd[1]+=1*h[0].pixel_spacing[2],c.$e[1]-=1*h[0].pixel_spacing[2]):(b[J.ORIENTATION_KEY]=
"transverse",c.dd[2]+=2*h[0].pixel_spacing[2],c.ug[2]=c.dd[2]/(h.length+1),c.$e[2]-=h[0].pixel_spacing[2]),window.console.log("Assessed volume orientation: "+b[J.ORIENTATION_KEY]+"\nXTK Modifications may be applied to restore acquired properties."),window.console.log("_transformedDims",m),window.console.log("RASSpacing",c.ug),window.console.log("RASDimensions",c.dd),window.console.log("RASOrigin",c.$e));b.df(c);b.Ff=Le(this,b)}c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};
Re.prototype.fe=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Re.prototype.Yh=function(a,b){this._data=a;if("undefined"==typeof b.za||null==b.za)b.za=[];var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=!1,m,q,t;q=[[8,4416],[9,30576],[136,512]];t=[[18,100],[35,4224],[64,629],[8,4368],[8,4384],[136,512]];for(var s,z;e<d.length;){h=d[e++];k=d[e++];l=d[e++];n=d[e++];"1.2.840.10008.1.2"==
c.transfer_syntax_uid&&0==n&&(n=l);p=!1;if(void 0!==h&&void 0!==k){switch(c.transfer_syntax_uid){case "1.2.840.10008.1.2.1":m="Little Endian Explicit";s=0;for(z=q.length;s<z;s++)if(h===q[s][0]&&k===q[s][1]){p=!0;break}break;case "1.2.840.10008.1.2.2":m="Big Endian Explicit";break;case "1.2.840.10008.1.2":for(m="Little Endian Implicit",s=0,z=t.length;s<z;s++)if(h===t[s][0]&&k===t[s][1]){p=!0;break}}if(p){n="parserDCM.js: Identified "+m+". Skipping DICOM adddress (0x"+h.toString(16)+", 0x"+k.toString(16)+
")"+h+" "+k;window.console.log(n);if(8==h&&4416==k||9==h&&30576==k)for(n=0;;){_newTagGroup=d[e++];_newTagGroup.toString(16);s=parseInt(_newTagGroup.toString(16),10)-parseInt(h.toString(16),10);if(3>s&&0<s)if(_newTagElement=d[e++],_newTagGroup.toString(16),_newTagElement.toString(16),10==parseInt(_newTagElement.toString(16),10)){e--;e--;break}else e--;n++}continue}}switch(h){case 2:switch(k){case 16:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);
c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Re.prototype.fe(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Fi=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=
Re.prototype.fe(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(k);break;case 19:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=
l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Re.prototype.fe(d,e,l,n)}break;case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";
for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(k);break;default:e=Re.prototype.fe(d,e,l,n)}break;case 16:switch(k){case 8720:for(s=0;s<n/2;s++)e++;break;default:e=Re.prototype.fe(d,e,l,n)}break;default:e=Re.prototype.fe(d,e,l,n)}}switch(c.Fi){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.La=this._data.byteLength-
c.columns*c.rows*2;d=null;switch(c.Fi){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.za.push(c);return b};v("X.parserDCM",Re);v("X.parserDCM.prototype.parse",Re.prototype.parse);function Se(){De.call(this);this.s="parserVTK"}w(Se,De);
Se.prototype.parse=function(a,b,c){A.Td(this.s+".parse");var d=b.C,e=b.ca,h=new Uint8Array(c),k="";b.C=d=new bd(c.byteLength);b.ca=e=new bd(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Fe(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.hn=this.jn=null;this.Kj=[];this.Ce=Rd;this.$s=this.wi=this.qi=this.xi=!1;c=0;for(l=k%8;l--;)Te(this,h[c]),c++;for(l=.125*k^0;l--;)Te(this,h[c]),c++,Te(this,h[c]),c++,Te(this,h[c]),c++,Te(this,h[c]),c++,Te(this,h[c]),c++,Te(this,h[c]),c++,Te(this,h[c]),
c++,Te(this,h[c]),c++;c=this.jn;var h=this.hn,k=h.length,n=l=this.Kj.length;do{var p=this.Kj[l-n],m=p.length,q;for(q=0;q<m&&!("LINES"==this.Ce&&q+1>=m);q++){var t=parseInt(p[q],10),s=c.get(t);d.add(s[0],s[1],s[2]);var z=t,y=s;"LINES"==this.Ce?(z=parseInt(p[q+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.Ce&&(0!=q&&q!=m-1||d.add(s[0],s[1],s[2]));t<k?(y=h.get(t),e.add(y[0],y[1],y[2]),"LINES"==this.Ce?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.Ce&&(0!=q&&q!=m-1||e.add(y[0],
y[1],y[2]))):(z=new K(s[0],s[1],s[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.Ce?(z=new K(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.Ce&&(0!=q&&q!=m-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.Cd=this.Ce;A.ud(this.s+".parse");d=new Vd;d.Ma=b;d.va=a;this.dispatchEvent(d)};
function Te(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.xi=!0;a.qi=!1;a.wi=!1;c=parseInt(c[1],10);a.jn=new bd(3*c);a.hn=new bd(3*c);return;case "VERTICES":a.qi=!0;a.xi=!1;a.wi=!1;c=parseInt(c[1],10);if(3<=c)a.Ce=Rd;else if(1==c)a.Ce="POINTS";else throw Error("This VTK file is not supported!");a.Kj=[];return;case "TRIANGLE_STRIPS":a.qi=!0;a.xi=!1;a.wi=!1;a.Ce="TRIANGLE_STRIPS";a.Kj=[];return;case "LINES":a.qi=!0;a.xi=!1;a.wi=!1;a.Ce="LINES";a.Kj=
[];return;case "POLYGONS":a.qi=!0;a.xi=!1;a.wi=!1;a.Ce="POLYGONS";a.Kj=[];return;case "POINT_DATA":a.wi=!0;a.xi=!1;a.qi=!1;return}if(a.xi)if(1==d||isNaN(parseFloat(e)))a.xi=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.jn.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.jn.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.jn.add(d,e,c))}else a.qi?1==d||isNaN(parseFloat(e))?a.qi=!1:(c=c.slice(1),a.Kj.push(c)):
a.wi&&("NORMALS"==e?a.$s=!0:1==d||isNaN(parseFloat(e))?(a.wi=!1,a.$s=!1):a.$s&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.hn.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.hn.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.hn.add(d,e,c))))}v("X.parserVTK",Se);v("X.parserVTK.prototype.parse",Se.prototype.parse);function Ue(){De.call(this);this.s="parserFSM";this.Lp=!1}w(Ue,De);
Ue.prototype.parse=function(a,b,c){A.Td(this.s+".parse");this._data=c;var d=b.C,e=b.ca;b.pl=[];var h=b.pl;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var n=new Uint32Array(e),p=new Float32Array(9*c);b.C=d=new bd(9*c);b.ca=e=new bd(9*c);var m;for(m=0;m<c;m++){var q=3*m,t=k[q],s=k[q+1],z=k[q+2];h.push(t);h.push(s);h.push(z);n[t]+=1;n[s]+=1;n[z]+=1;var q=3*t,y=3*s,H=3*z,P=l[q],O=l[q+1],G=l[q+2],
s=l[y],z=l[y+1],t=l[y+2],S=l[H],Y=l[H+1],U=l[H+2];d.add(P,O,G);d.add(s,z,t);d.add(S,Y,U);P=new K(P,O,G);S=new K(S,Y,U);s=(new K(s,z,t)).clone().zc(P);z=S.clone().zc(P);s=rd(s,z).normalize();p[q]+=s.x;p[q+1]+=s.y;p[q+2]+=s.z;p[y]+=s.x;p[y+1]+=s.y;p[y+2]+=s.z;p[H]+=s.x;p[H+1]+=s.y;p[H+2]+=s.z}for(m=0;m<c;m++)q=3*m,t=k[q],s=k[q+1],z=k[q+2],q=3*t,y=3*s,H=3*z,h=new K(p[y],p[y+1],p[y+2]),l=new K(p[H],p[H+1],p[H+2]),q=(new K(p[q],p[q+1],p[q+2])).scale(1/n[t]).normalize(),h=h.scale(1/n[s]).normalize(),l=
l.scale(1/n[z]).normalize(),e.add(q.x,q.y,q.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this._data.byteLength-this.La);k=null;for(q=0;q<c.length;q++)if(99==c[q]&&114==c[q+1]&&97==c[q+2]&&115==c[q+3]){for(e=k=q+9;10!=c[q]&&q<c.length;)e++,q++;k=Fe(c.subarray(k,e)).split(" ");break}k&&(b.ec.ZC(parseFloat(k[0])),b.ec.$C(parseFloat(k[1])),b.ec.aD(parseFloat(k[2])));b.Cd=Rd;A.ud(this.s+".parse");c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};v("X.parserFSM",Ue);
v("X.parserFSM.prototype.parse",Ue.prototype.parse);var Ve={Ct:function(a,b,c){return Ve.update(a,0,b,c)},update:function(a,b,c,d){var e=Ve.CE,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},We;
We=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Ve.CE=We;function Xe(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,p,m,q,t;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(q=0;q<b;++q)if(a[q]===k){p=0;m=l;for(t=0;t<k;++t)p=p<<1|m&1,m>>=1;for(t=p;t<e;t+=n)h[t]=k<<16|q;++l}++k;l<<=1;n<<=1}return[h,c,d]};function Ye(a,b){this.xt=[];this.zt=32768;this.Mf=this.qn=this.cb=this.Mw=0;this.input=new Uint8Array(a);this.Wy=!1;this.At=Ze;this.resize=!1;if(b||!(b={}))b.index&&(this.cb=b.index),b.bufferSize&&(this.zt=b.bufferSize),b.bufferType&&(this.At=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.At){case $e:this.oc=32768;this.output=new Uint8Array(32768+this.zt+258);break;case Ze:this.oc=0;this.output=new Uint8Array(this.zt);this.jk=this.hG;this.dz=this.KF;this.St=this.TF;break;default:throw Error("invalid inflate mode");
}}var $e=0,Ze=1;
Ye.prototype.Mi=function(){for(;!this.Wy;){var a=af(this,3);a&1&&(this.Wy=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.cb,c=this.output,d=this.oc,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.Mf=this.qn=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.At){case $e:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.oc=d,c=this.jk(),d=this.oc;break;case Ze:for(;d+h>c.length;)c=this.jk({Kz:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.cb=b+=h;this.oc=
d;this.output=c;break;case 1:this.St(bf,cf);break;case 2:df(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.dz()};
var ef=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ff=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),gf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),hf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),jf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),kf=new Uint8Array(288),
lf,nf;lf=0;for(nf=kf.length;lf<nf;++lf)kf[lf]=143>=lf?8:255>=lf?9:279>=lf?7:8;var bf=Xe(kf),of=new Uint8Array(30),pf,qf;pf=0;for(qf=of.length;pf<qf;++pf)of[pf]=5;var cf=Xe(of);function af(a,b){for(var c=a.qn,d=a.Mf,e=a.input,h=a.cb,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.qn=c>>>b;a.Mf=d-b;a.cb=h;return k}
function rf(a,b){for(var c=a.qn,d=a.Mf,e=a.input,h=a.cb,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.qn=c>>k;a.Mf=d-k;a.cb=h;return e&65535}
function df(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=rf(this,b),d){case 16:for(d=3+af(this,2);d--;)c[h++]=e;break;case 17:for(d=3+af(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+af(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=af(a,5)+257,d=af(a,5)+1,e=af(a,4)+4,h=new Uint8Array(ef.length),k;for(k=0;k<e;++k)h[ef[k]]=af(a,3);e=Xe(h);h=new Uint8Array(c);k=new Uint8Array(d);a.St(Xe(b.call(a,c,e,h)),Xe(b.call(a,d,e,k)))}f=Ye.prototype;
f.St=function(a,b){var c=this.output,d=this.oc;this.uz=a;for(var e=c.length-258,h,k,l;256!==(h=rf(this,a));)if(256>h)d>=e&&(this.oc=d,c=this.jk(),d=this.oc),c[d++]=h;else for(h-=257,l=ff[h],0<gf[h]&&(l+=af(this,gf[h])),h=rf(this,b),k=hf[h],0<jf[h]&&(k+=af(this,jf[h])),d>=e&&(this.oc=d,c=this.jk(),d=this.oc);l--;)c[d]=c[d++-k];for(;8<=this.Mf;)this.Mf-=8,this.cb--;this.oc=d};
f.TF=function(a,b){var c=this.output,d=this.oc;this.uz=a;for(var e=c.length,h,k,l;256!==(h=rf(this,a));)if(256>h)d>=e&&(c=this.jk(),e=c.length),c[d++]=h;else for(h-=257,l=ff[h],0<gf[h]&&(l+=af(this,gf[h])),h=rf(this,b),k=hf[h],0<jf[h]&&(k+=af(this,jf[h])),d+l>e&&(c=this.jk(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.Mf;)this.Mf-=8,this.cb--;this.oc=d};
f.jk=function(){var a=new Uint8Array(this.oc-32768),b=this.oc-32768,c=this.output;a.set(c.subarray(32768,a.length));this.xt.push(a);this.Mw+=a.length;c.set(c.subarray(b,b+32768));this.oc=32768;return c};
f.hG=function(a){var b=this.input.length/this.cb+1|0,c=this.input,d=this.output;a&&("number"===typeof a.Kz&&(b=a.Kz),"number"===typeof a.nF&&(b+=a.nF));2>b?(a=(c.length-this.cb)/this.uz[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.dz=function(){var a=0,b=this.output,c=this.xt,d,e=new Uint8Array(this.Mw+(this.oc-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.oc);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.oc;h<k;++h)e[a++]=b[h];this.xt=[];return this.buffer=e};f.KF=function(){var a,b=this.oc;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var sf;for(sf=0;256>sf;++sf)for(var tf=sf,uf=7,tf=tf>>>1;tf;tf>>>=1)--uf;var vf=[],wf;for(wf=0;288>wf;wf++)switch(!0){case 143>=wf:vf.push([wf+48,8]);break;case 255>=wf:vf.push([wf-144+400,9]);break;case 279>=wf:vf.push([wf-256+0,7]);break;case 287>=wf:vf.push([wf-280+192,8]);break;default:throw"invalid literal: "+wf;}
var xf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(xf);function yf(){};function zf(a){this.input=a;this.cb=0;this.member=[]}
zf.prototype.Mi=function(){for(var a=this.input.length;this.cb<a;){var b=new yf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.cb;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=Ve.Ct(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Ye(l,{index:d,bufferSize:e});b.data=e=d.Mi();d=d.cb;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(Ve.Ct(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Ve.Ct(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.cb=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function Af(){De.call(this);this.s="parserMGZ";this.Lp=!1}w(Af,De);
Af.prototype.parse=function(a,b,c,d){A.Td(this.s+".parse");d&&(c=(new zf(new Uint8Array(c))).Mi(),c=c.buffer);d=this.Yh(c);var e=[d.lv,d.mv,d.nv];b.Da=e;var h=d.fD;b.wh=h;c=d.min;var k=d.max;b.Vd=b.Lb=c;b.Tb=b.Kb=k;-Infinity==b.tb&&(b.tb=c);Infinity==b.vb&&(b.vb=k);c=Ad();L(c,0,d.Af[0][0],d.Af[1][0],d.Af[2][0],0);L(c,1,d.Af[0][1],d.Af[1][1],d.Af[2][1],0);L(c,2,d.Af[0][2],d.Af[1][2],d.Af[2][2],0);L(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.Af[3][p]-(c[p+0]*h[0]*k+
c[p+4]*h[1]*l+c[p+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.xe=c;d.ze=Ad();Id(d.xe,d.ze);e=zd(0,0,0,1);h=yd();Kd(c,e,h);k=zd(1,1,1,1);e=yd();Kd(c,k,e);c=Ge(c,b.Da);d.ug=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.dd=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.$e=[c[0],c[2],c[4]];b.df(d);A.ud(this.s+".parse");b.Ff=Le(this,b);d=new Vd;d.Ma=b;d.va=a;this.dispatchEvent(d)};
Af.prototype.Yh=function(a){this._data=a;a={version:0,FE:0,DE:0,pG:0,EE:0,lv:0,mv:0,nv:0,sJ:0,type:0,bG:0,QB:0,aN:null,Af:null,fD:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.lv=this.h("uint");a.mv=this.h("uint");a.nv=this.h("uint");a.sJ=this.h("uint");a.type=this.h("uint");a.bG=this.h("uint");a.QB=this.h("ushort");if(0<a.QB){a.fD=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.Af=b}this.La=
284;b=a.lv*a.mv*a.nv;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Ee(a.data);a.min=b[0];a.max=b[1];this.La+16<this._data.byteLength&&(a.FE=this.h("float"),a.pG=this.h("float"),a.DE=this.h("float"),a.EE=this.h("float"));return a};v("X.parserMGZ",Af);v("X.parserMGZ.prototype.parse",Af.prototype.parse);function Bf(){De.call(this);this.s="parserLBL"}w(Bf,De);
Bf.prototype.parse=function(a,b,c){A.Td(this.s+".parse");var d=b.pl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.h("uchar",c.byteLength),l=k.length,n=!1,p=0;for(c=1;c<l;c++)10==k[c-1]?(p=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Fe(k,p,c),10)),n=!1);k=b.Za.Ya?b.Za.Ya:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.Za.Ya=k;b.Za.Nm=h;b.Za.G=!0;A.ud(this.s+".parse");d=new Vd;d.Ma=b;d.va=a;this.dispatchEvent(d)};v("X.parserLBL",Bf);v("X.parserLBL.prototype.parse",Bf.prototype.parse);function Cf(){De.call(this);this.s="parserCRV";this.Lp=!1}w(Cf,De);
Cf.prototype.parse=function(a,b,c){A.Td(this.s+".parse");var d=b.pl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.La=3;var e=this.h("uint");this.h("uint");this.h("uint");var h=0,k=0,l=0,n=0,p=0,m=0,q=0,t=0,s=0,z=0,y=0;c=Array(2);var H=Array(2),P=this.h("float",e),O;for(O=0;O<e;O++){var G=P[O];0==O&&(c[0]=H[0]=G);0<=G?(h++,n+=G):(k++,l+=G);s+=G;y++;H[0]=Math.max(G,H[0]);c[0]=Math.min(G,c[0]);P[O]=G}0!=h&&(p=n/h);0!=k&&(m=l/k);0!=y&&(z=s/y);for(y=s=l=n=0;y<
e;y++)G=P[y],O=0,0<=G?(O=Math.pow(G-p,2),n+=O):(O=Math.pow(G-m,2),l+=O),O=Math.pow(G-z,2),s+=O;1<h&&(q=Math.sqrt(n/(h-1)));1<k&&(t=Math.sqrt(l/(k-1)));c[1]=m-2.5*t;H[1]=p+2.5*q;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=P[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.Za.Vd=c[1];b.Za.Tb=H[1];-Infinity==b.Za.tb&&(b.Za.tb=c[1]);Infinity==b.Za.vb&&(b.Za.vb=H[1]);b.Za.Ya=P;b.Za.Nm=h;b.Za.G=!0;A.ud(this.s+".parse");d=new Vd;d.Ma=b;d.va=a;this.dispatchEvent(d)};v("X.parserCRV",Cf);
v("X.parserCRV.prototype.parse",Cf.prototype.parse);function Df(a,b){var c,d;this.input=a;this.cb=0;if(b||!(b={}))b.index&&(this.cb=b.index),b.verify&&(this.WL=b.verify);c=a[this.cb++];d=a[this.cb++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.RB=new Ye(a,{index:this.cb,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Df.prototype.Mi=function(){var a=this.input,b;b=this.RB.Mi();this.cb=this.RB.cb;if(this.WL){var a=(a[this.cb++]<<24|a[this.cb++]<<16|a[this.cb++]<<8|a[this.cb++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Ef(){De.call(this);this.s="parserRAW"}w(Ef,De);
Ef.prototype.parse=function(a,b,c,d){A.Td(this.s+".parse");d&&(c=(new Df(new Uint8Array(c))).Mi(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Ee(d.data);c=e[0];e=e[1];d.min=b.Vd=b.Lb=c;d.max=b.Tb=b.Kb=e;-Infinity==b.tb&&(b.tb=c);Infinity==b.vb&&(b.vb=e);e=Bd();d.xe=e;d.ze=Bd();var h=zd(0,0,0,1);c=yd();Kd(e,h,c);var k=zd(1,1,1,1),h=yd();Kd(e,k,h);e=Ge(e,b.Da);d.ug=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.dd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.$e=[e[0],e[2],e[4]];b.df(d);A.ud(this.s+".parse");b.Ff=
Le(this,b);d=new Vd;d.Ma=b;d.va=a;this.dispatchEvent(d)};v("X.parserRAW",Ef);v("X.parserRAW.prototype.parse",Ef.prototype.parse);function Ff(){De.call(this);this.s="parserIMAGE"}w(Ff,De);Ff.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Sc(h,"load",this.JK.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};Ff.prototype.JK=function(a,b,c){b.Ff=a;b.zi=null;a=new Vd;a.Ma=c;a.va=b;this.dispatchEvent(a)};v("X.parserIMAGE",Ff);v("X.parserIMAGE.prototype.parse",Ff.prototype.parse);function Gf(){De.call(this);this.s="parserLUT"}w(Gf,De);
Gf.prototype.parse=function(a,b,c){A.Td(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Fe(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.ud(this.s+".parse");c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};
v("X.parserLUT",Gf);v("X.parserLUT.prototype.parse",Gf.prototype.parse);function Hf(){De.call(this);this.s="parserMRC"}w(Hf,De);
Hf.prototype.parse=function(a,b,c){A.Td(this.s+".parse");c=this.Yh(c);var d=c.min,e=c.max;b.Da=[c.ro,c.so,c.uo];b.wh=[c.xlen/c.qB,c.oD/c.rB,c.qD/c.sB];b.Vd=b.Lb=d;b.Tb=b.Kb=e;-Infinity==b.tb&&(b.tb=d);Infinity==b.vb&&(b.vb=e);e=Ad();L(e,3,0,0,0,1);L(e,0,-1,0,0,c.ro);L(e,1,0,0,-1,c.so);L(e,2,0,-1,0,c.uo);c.xe=e;c.ze=Ad();Id(c.xe,c.ze);var h=zd(0,0,0,1),d=yd();Kd(e,h,d);var k=zd(1,1,1,1),h=yd();Kd(e,k,h);k=[c.ro,c.so,c.uo];e=Ge(e,k);c.ug=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.dd=[e[1]+e[0]+1,e[3]-e[2]+1,
e[5]-e[4]+1];c.$e=[e[0],e[2],e[4]];b.Da=k;b.df(c);b.Ff=Le(this,b);A.ud(this.s+".parse");c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};
Hf.prototype.Yh=function(a){this._data=a;a={ro:0,so:0,uo:0,mode:0,rP:0,sP:0,tP:0,qB:0,rB:0,sB:0,xlen:0,oD:0,qD:0,alpha:0,beta:0,gamma:0,aJ:0,bJ:0,cJ:0,vt:0,Zp:0,Wj:0,fP:0,next:0,RF:0,extra:null,tJ:0,vJ:0,extra:null,AI:0,cP:0,xI:0,lens:0,qJ:0,rJ:0,UL:0,VL:0,ML:null,ZL:0,aM:0,bM:0,QO:0,GP:0,YK:0,uJ:0,data:null,min:Infinity,max:-Infinity,nP:0,MC:null,FP:null,zP:null,orientation:null,qP:null};this.La=0;a.ro=this.h("sint");a.so=this.h("sint");a.uo=this.h("sint");a.mode=this.h("sint");var b=a.ro*a.so*a.uo;
this.La=1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.La=28;a.qB=this.h("sint");a.rB=this.h("sint");a.sB=this.h("sint");a.xlen=this.h("float");a.oD=this.h("float");a.qD=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.aJ=this.h("sint");a.bJ=this.h("sint");a.cJ=this.h("sint");a.vt=this.h("float");a.Zp=this.h("float");a.Wj=this.h("float");a.eP=this.h("sint");a.next=this.h("sint");a.RF=this.h("short");a.tJ=this.h("short");a.vJ=this.h("short");a.AI=this.h("sint");a.bP=this.h("sint");a.xI=this.h("short");a.lens=this.h("short");a.qJ=this.h("short");a.rJ=this.h("short");a.UL=this.h("short");a.VL=this.h("short");a.ML=this.h("float",6);this.La=196;a.ZL=this.h("float");a.aM=
this.h("float");a.bM=this.h("float");this.La=216;a.YK=this.h("float");a.uJ=this.h("sint");a.jP=this.h("schar",10);if(0!=a.next)switch(this.La=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.Wj-(a.Zp-a.Wj)?(a.min=a.vt,a.max=a.Wj+(a.Wj-a.vt)):(a.min=a.Wj-(a.Zp-a.Wj),a.max=a.Zp);return a};v("X.parserMRC",Hf);v("X.parserMRC.prototype.parse",Hf.prototype.parse);function If(){De.call(this);this.s="parserNRRD"}w(If,De);
If.prototype.parse=function(a,b,c){A.Td(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Fe(c,0,k-2);h=k+1;break}var l,n,p,m,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.NI=!0:!l.match(/^#/)&&(m=l.match(/(.*):(.*)/))&&(n=m[1].trim(),l=m[2].trim(),(p=this.lG[n])?p.call(this,l):this[n]=l);if(!this.NI)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.Zb&&(this.Zb=[new K(1,0,0),new K(0,1,0),new K(0,0,1)],this.xw))for(d=[],m=0;2>=m;m++)d.push(isNaN(this.xw[m])?void 0:this.Zb[m].scale(this.xw[m]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new zf(new Uint8Array(h))).Mi();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.pi(h);m=Ee(c.data);h=c.min=m[0];m=c.max=m[1];b.Vd=b.Lb=h;b.Tb=b.Kb=m;b.Da=[this.sw[0],this.sw[1],this.sw[2]];d=
(new K(this.Zb[0][0],this.Zb[0][1],this.Zb[0][2])).$f();e=(new K(this.Zb[1][0],this.Zb[1][1],this.Zb[1][2])).$f();k=(new K(this.Zb[2][0],this.Zb[2][1],this.Zb[2][2])).$f();b.wh=[d,e,k];-Infinity==b.tb&&(b.tb=h);Infinity==b.vb&&(b.vb=m);d=m=1;"left-posterior-superior"==this.MC&&(d=m=-1);h=Bd();L(h,0,m*this.Zb[0][0],m*this.Zb[1][0],m*this.Zb[2][0],m*this.ww[0]);L(h,1,d*this.Zb[0][1],d*this.Zb[1][1],d*this.Zb[2][1],d*this.ww[1]);L(h,2,1*this.Zb[0][2],1*this.Zb[1][2],1*this.Zb[2][2],1*this.ww[2]);L(h,
3,0,0,0,1);c.xe=h;c.ze=Ad();Id(c.xe,c.ze);d=zd(0,0,0,1);m=yd();Kd(h,d,m);e=zd(1,1,1,1);d=yd();Kd(h,e,d);h=Ge(h,b.Da);c.ug=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];c.dd=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.$e=[h[0],h[2],h[4]];b.df(c);A.ud(this.s+".parse");b.Ff=Le(this,b);c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};
If.prototype.lG={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.pi=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.pi=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.pi=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.pi=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.pi=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.pi=Uint32Array;break;case "float":this.pi=Float32Array;break;case "double":this.pi=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.YO=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Ni=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.sw=e},space:function(a){return this.MC=a},"space origin":function(a){return this.ww=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Zb=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.xw=e}};v("X.parserNRRD",If);v("X.parserNRRD.prototype.parse",If.prototype.parse);function Jf(){De.call(this);this.s="parserSTL"}w(Jf,De);
Jf.prototype.parse=function(a,b,c){A.Td(this.s+".parse");this._data=c;var d=b.C,e=b.ca;if("solid"==Fe(this.h("uchar",5))){b.C=d=new bd(c.byteLength);b.ca=e=new bd(c.byteLength);var h=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,p;for(p=0;p<c;p++)if(10==e[p]){if(k||l){var m=Fe(e,n,p).split(" "),l=parseFloat(m[0]),q=parseFloat(m[1]),m=parseFloat(m[2]);k?(d.add(l,q,m),d.add(l,q,m),d.add(l,q,m)):h.add(l,q,m);l=k=!1}}else 32==e[p-1]&&(102==e[p]?(n=p+=13,k=!0):118==e[p]&&(n=p+=7,
l=!0))}else for(this.La=80,h=this.h("uint"),b.C=d=new bd(9*h),b.ca=e=new bd(9*h),c=c=0;c<h;c++)k=this.h("float",12),n=k[0],p=k[1],l=k[2],e.add(n,p,l),e.add(n,p,l),e.add(n,p,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.La+=2;A.ud(this.s+".parse");h=new Vd;h.Ma=b;h.va=a;this.dispatchEvent(h)};v("X.parserSTL",Jf);v("X.parserSTL.prototype.parse",Jf.prototype.parse);function Kf(){De.call(this);this.s="parserNII"}w(Kf,De);
Kf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new zf(new Uint8Array(d))).Mi(),d=d.buffer);c=this.Yh(d);d=c.min;e=c.max;b.Vd=b.Lb=d;b.Tb=b.Kb=e;-Infinity==b.tb&&(b.tb=d);Infinity==b.vb&&(b.vb=e);d=Ad();L(d,3,0,0,0,1);if(0<c.Yv){var e=0,h=c.NB,k=c.OB,l=c.PB,n=1,p=1,m=1,q=c.KB,t=c.LB,s=c.MB,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.dg[1]&&(n=c.dg[1]);
0<c.dg[2]&&(p=c.dg[2]);0<c.dg[2]&&(m=c.dg[3]);0>c.dg[0]&&(m=-m);L(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*p,2*(h*l+e*k)*m,q);L(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*p,2*(k*l-e*h)*m,t);L(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*p,(e*e+l*l-k*k-h*h)*m,s)}else 0<c.HC?(e=c.NC,h=c.OC,k=c.PC,L(d,0,e[0],e[1],e[2],e[3]),L(d,1,h[0],h[1],h[2],h[3]),L(d,2,k[0],k[1],k[2],k[3])):0==c.Yv?(L(d,0,c.dg[1],0,0,0),L(d,1,0,c.dg[2],0,0),L(d,2,0,0,c.dg[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.xe=d;c.ze=Ad();Id(c.xe,c.ze);
h=zd(0,0,0,1);e=yd();Kd(d,h,e);k=zd(1,1,1,1);h=yd();Kd(d,k,h);k=[c.Ni[1],c.Ni[2],c.Ni[3]];d=Ge(d,k);c.ug=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.dd=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.$e=[d[0],d[2],d[4]];b.Da=k;b.df(c);b.Ff=Le(this,b);c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};
Kf.prototype.Yh=function(a){this._data=a;a={sL:0,data_type:null,SF:null,jG:0,fL:0,PK:0,WF:null,Ni:null,HI:0,II:0,JI:0,FI:0,Rt:0,DF:0,xL:0,dg:null,hD:0,eL:0,dL:0,wL:0,uL:null,$L:null,GF:0,HF:0,vL:0,OL:0,eI:0,fI:0,UF:null,AF:null,Yv:0,HC:0,NB:0,OB:0,PB:0,KB:0,LB:0,MB:0,NC:null,OC:null,PC:null,GI:null,magic:null,data:null,min:Infinity,max:-Infinity};a.sL=this.h("uint");a.data_type=this.h("uchar",10);a.SF=this.h("uchar",18);a.jG=this.h("uint");a.fL=this.h("ushort");a.PK=this.h("uchar");a.WF=this.h("uchar");
a.Ni=this.h("ushort",8);a.HI=this.h("float");a.II=this.h("float");a.JI=this.h("float");a.FI=this.h("ushort");a.Rt=this.h("ushort");a.DF=this.h("ushort");a.xL=this.h("ushort");a.dg=this.h("float",8);a.hD=this.h("float");a.eL=this.h("float");a.dL=this.h("float");a.wL=this.h("ushort");a.uL=this.h("uchar");a.$L=this.h("uchar");a.GF=this.h("float");a.HF=this.h("float");a.vL=this.h("float");a.OL=this.h("float");a.eI=this.h("uint",1);a.fI=this.h("uint",1);a.UF=this.h("uchar",80);a.AF=this.h("uchar",24);
a.Yv=this.h("ushort");a.HC=this.h("ushort");a.NB=this.h("float");a.OB=this.h("float");a.PB=this.h("float");a.KB=this.h("float");a.LB=this.h("float");a.MB=this.h("float");a.NC=this.h("float",4);a.OC=this.h("float",4);a.PC=this.h("float",4);a.GI=this.h("uchar",16);a.magic=this.h("uchar",4);this.La=parseInt(a.hD,10);var b=a.Ni[1]*a.Ni[2]*a.Ni[3];switch(a.Rt){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",
b);break;case 32:a.data=this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.Rt);}b=Ee(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Kf);v("X.parserNII.prototype.parse",Kf.prototype.parse);function Lf(){De.call(this);this.s="parserTRK"}w(Lf,De);
Lf.prototype.parse=function(a,b,c){A.Td(this.s+".parse");var d=b.C,e=b.ca,h=b.Ec;this._data=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var n=this.h("uint");this.h("uint");var p=
this.h("uint"),m=[],q=[],t=Infinity,s=-Infinity,z=null,y=null,H=null,P=null,e=d=null,O=this.h("uint",(this._data.byteLength-1E3)/4);this.La=p;for(var G=this.h("float",(this._data.byteLength-1E3)/4),S=0,p=h=0;p<n;p++){for(var Y=O[S],U=new bd(3*Y),va=0,na=0;na<Y;na++){var ya=G[S+3*na+na*l+1],Ma=G[S+3*na+na*l+2],Ha=G[S+3*na+na*l+3],ya=ya/k[0],Ma=Ma/k[1],Ha=Ha/k[2];U.add(ya,Ma,Ha);if(0<na)var Na=U.get(na-1),va=va+Math.sqrt(Math.pow(ya-Na[0],2)+Math.pow(Ma-Na[1],2)+Math.pow(Ha-Na[2],2));na<Y-1&&(h+=6)}S+=
3*Y+Y*l+1;na=U.Jf;Y=U.Gf;ya=U.Kf;Ma=U.Hf;Ha=U.Lf;Na=U.If;if(!z||na<z)z=na;if(!y||Y>y)y=Y;if(!H||ya<H)H=ya;if(!P||Ma>P)P=Ma;if(!d||Ha<d)d=Ha;if(!e||Na>e)e=Na;m.push(U);q.push(va)}k=(z+y)/2;H=(H+P)/2;l=(d+e)/2;P=new Float32Array(h);b.C=d=new bd(h);b.ca=e=new bd(h);b.Ec=h=new bd(h);for(p=z=0;p<n;p++)for(y=m[p],O=y.count,va=q[p],t=Math.min(t,va),s=Math.max(s,va),na=0;na<O-1;na++){S=y.get(na);G=y.get(na+1);d.add(S[0],S[1],S[2]);d.add(G[0],G[1],G[2]);var U=S[0]-k,Y=S[1]-H,ya=S[2]-l,Ma=Math.sqrt(U*U+Y*Y+
ya*ya),Ha=G[0]-k,Na=G[1]-H,la=G[2]-l,za=Math.sqrt(Ha*Ha+Na*Na+la*la);e.add(U/Ma,Y/Ma,ya/Ma);e.add(Ha/za,Na/za,la/za);G=[Math.abs(G[0]-S[0]),Math.abs(G[1]-S[1]),Math.abs(G[2]-S[2])];S=Math.sqrt(G[0]*G[0]+G[1]*G[1]+G[2]*G[2]);G[0]/=S;G[1]/=S;G[2]/=S;h.add(G[0],G[1],G[2]);h.add(G[0],G[1],G[2]);P[z++]=va;P[z++]=va;P[z++]=va;P[z++]=va;P[z++]=va;P[z++]=va}b.Cd="LINES";n=new Td;n.Vd=t;n.Tb=s;n.tb=t;n.vb=s;n.Nm=P;n.by=!1;n.G=!0;b.Za=n;t=!1;for(p=0;16>p;p++)if(0!=c[p]){t=!0;break}!1==t&&(c[0]=c[5]=c[10]=c[15]=
1);A.ud(this.s+".parse");A.t.Ow(c,b.ec.ub);c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};v("X.parserTRK",Lf);v("X.parserTRK.prototype.parse",Lf.prototype.parse);function Mf(){De.call(this);this.s="parserOBJ"}w(Mf,De);
Mf.prototype.parse=function(a,b,c){A.Td(this.s+".parse");this._data=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.C=new bd(c);b.ca=new bd(c);var h=b.C,k=b.ca,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var p=Fe(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var m=e[parseInt(p[1],10)-1],l=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];h.add(m[0],m[1],m[2]);h.add(l[0],l[1],l[2]);h.add(p[0],p[1],p[2]);m=new K(m[0],m[1],
m[2]);p=new K(p[0],p[1],p[2]);l=rd((new K(l[0],l[1],l[2])).zc(m),p.zc(m));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.ud(this.s+".parse");c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};v("X.parserOBJ",Mf);v("X.parserOBJ.prototype.parse",Mf.prototype.parse);function Nf(){ad.call(this);this.s="loader";this.nl=new hd;this.$m=0}w(Nf,ad);function Of(a,b){a.$m+=b/a.nl.Lh()/3;a.$m=Math.min(1,a.$m);var c=new ze;c.Qj=a.$m;a.dispatchEvent(c)}function Pf(a){a=a.ea.Pp;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Qf))throw Error("The "+b+" file format is not supported.");return[a,b,Qf[b][0],Qf[b][1],Qf[b][2]]}
Nf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!kd(this.nl.wb,a.fd)||this.nl.get(a.fd)){this.nl.set(a.fd,!1);var c=Pf(a)[0];if(null!=a.zg)this.parse(null,a,b);else{var d=new XMLHttpRequest;F(d,"abort",this.Jz.bind(this,d,a,b));F(d,"error",this.Jz.bind(this,d,a,b));F(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Nf.prototype.parse=function(a,b,c){Of(this,1);setTimeout(function(){var d=Pf(b),e=d[3],d=new d[2];Sc(d,fe,this.complete.bind(this));var h=b.zg;null==h&&(h=a.response,b.zg=h);d.parse(b,c,h,e)}.bind(this),100)};Nf.prototype.complete=function(a){Of(this,1);setTimeout(function(){var b=a.va,c=a.Ma;b.ea.G=!1;b.G=!0;c.da();this.nl.set(b.fd,!0)}.bind(this),100)};Nf.prototype.Jz=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Qf={OBJ:[Mf,null],OFF:[Me,null],STL:[Jf,null],VTK:[Se,null],TRK:[Lf,null],MRC:[Hf,null],ST:[Hf,null],FSM:[Ue,null],INFLATED:[Ue,null],SMOOTHWM:[Ue,null],SPHERE:[Ue,null],PIAL:[Ue,null],ORIG:[Ue,null],NRRD:[If,null],NII:[Kf,null],GZ:[Kf,null],DCM:[Re,null],DICOM:[Re,null],"":[Re,null],CRV:[Cf,null],LABEL:[Bf,null],MGH:[Af,!1],MGZ:[Af,!0],RAW:[Ef,!1],RZ:[Ef,!0],TXT:[Gf,null],LUT:[Gf,null],PNG:[Ff,"png"],JPG:[Ff,"jpeg"],JPEG:[Ff,"jpeg"],GIF:[Ff,"gif"]};function Rf(){De.call(this);this.s="parserIMA"}w(Rf,De);
Rf.prototype.parse=function(a,b,c){b.nh={};b.nh.no=0;this.Yh(c,b);if(null==b.ea.length||b.za.length==b.ea.length){b.nh.no=b.ea.length;var d={};c={};for(var e=0;e<b.za.length;e++)d.hasOwnProperty(b.za[e].series_instance_uid)||(d[b.za[e].series_instance_uid]=[],c[b.za[e].series_instance_uid]={}),c[b.za[e].series_instance_uid].hasOwnProperty(b.za[e].sop_instance_uid)||(c[b.za[e].series_instance_uid][b.za[e].sop_instance_uid]=!0,d[b.za[e].series_instance_uid].push(b.za[e]));var h=Object.keys(d)[0],e=
d[h],k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=rd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],p=d[1]-n[1],m=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+p*p+
m*m);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,q=e[k-1].image_position_patient,h=q[0]-n[0],p=q[1]-n[1],m=q[2]-n[2],h=Math.sqrt(h*h+p*p+m*m),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;q=null;switch(e[0].Fi){case 8:q=new Uint8Array(h);break;case 16:q=new Uint16Array(h);break;case 32:q=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.wh=e[0].pixel_spacing;for(var t=0;t<k;t++){var s=e[t].data,h=0;switch(l){case "image_position_patient":h=e[t].image_position_patient[0]-e[0].image_position_patient[0];p=e[t].image_position_patient[1]-
e[0].image_position_patient[1];m=e[t].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+p*p+m*m)/e[0].pixel_spacing[2];break;case "instance_number":h=e[t].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}q.set(s,h*n)}c.data=q;b._data=q;b.Da=[e[0].columns,e[0].rows,d];c.XF=b.Da;d=Ee(q);k=d[0];d=d[1];c.min=b.Vd=b.Lb=k;c.max=b.Tb=b.Kb=d;-Infinity==b.tb&&(b.tb=k);Infinity==b.vb&&(b.vb=d);p=e[0].image_position_patient;
k=Ad();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=rd(d,h);L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);L(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);L(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=rd(d,h),L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),L(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(L(k,0,1,0,0,-p[0]),L(k,1,0,-1,-0,-p[1]),L(k,2,0,0,1,p[2]));L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.xe=k;c.ze=Ad();Id(c.xe,c.ze);l=zd(0,0,0,1);e=yd();Kd(k,l,e);l=zd(1,1,1,1);d=yd();Kd(k,l,d);c.ug=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Ge(k,[b.Da[0],b.Da[1],b.Da[2]]);c.dd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.$e=[e[0],e[2],e[4]];b.df(c);b.Ff=Le(this,b)}c=new Vd;c.Ma=b;c.va=a;this.dispatchEvent(c)};
Rf.prototype.fe=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Rf.prototype.Yh=function(a,b){this._data=a;if("undefined"==typeof b.za||null==b.za)b.za=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=[[8,4368],[8,4384]],m=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],m=!1,q=0,t=p.length;q<t;q++)if(h===p[q][0]&&k===p[q][1]){m=!0;break}if(m)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Rf.prototype.fe(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Fi=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Rf.prototype.fe(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Rf.prototype.fe(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Rf.prototype.fe(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Rf.prototype.fe(d,e,l,n)}break;case 16:switch(k){case 8720:for(q=0;q<n/2;q++)e++;break;default:e=
Rf.prototype.fe(d,e,l,n)}break;default:e=Rf.prototype.fe(d,e,l,n)}}switch(c.Fi){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.La=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Fi){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.za.push(c);return b};v("X.parserIMA",Rf);
v("X.parserIMA.prototype.parse",Rf.prototype.parse);var Sf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Tf(a){if(Uf){Uf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Tf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Uf=!0,Error();}}return a.match(Sf)}var Uf=hc;function Vf(a,b){Zc.call(this);this.Yf=a||1;this.xm=b||ba;this.yt=ta(this.LL,this);this.Pu=wa()}w(Vf,Zc);f=Vf.prototype;f.enabled=!1;f.oa=null;f.setInterval=function(a){this.Yf=a;this.oa&&this.enabled?(this.stop(),this.start()):this.oa&&this.stop()};
f.LL=function(){if(this.enabled){var a=wa()-this.Pu;0<a&&a<.8*this.Yf?this.oa=this.xm.setTimeout(this.yt,this.Yf-a):(this.oa&&(this.xm.clearTimeout(this.oa),this.oa=null),this.dispatchEvent(Wf),this.enabled&&(this.oa=this.xm.setTimeout(this.yt,this.Yf),this.Pu=wa()))}};f.start=function(){this.enabled=!0;this.oa||(this.oa=this.xm.setTimeout(this.yt,this.Yf),this.Pu=wa())};f.stop=function(){this.enabled=!1;this.oa&&(this.xm.clearTimeout(this.oa),this.oa=null)};
f.f=function(){Vf.d.f.call(this);this.stop();delete this.xm};var Wf="tick";function Xf(a,b,c){if(ja(a))c&&(a=ta(a,c));else if(a&&"function"==typeof a.handleEvent)a=ta(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Yf(a){return"function"==typeof a.Lh?a.Lh():ha(a)||r(a)?a.length:mb(a)}function Zf(a){if("function"==typeof a.nk)return a.nk();if(r(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return nb(a)}function $f(a){if("function"==typeof a.Ln)return a.Ln();if("function"!=typeof a.nk){if(ha(a)||r(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return ob(a)}}
function ag(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ha(a)||r(a))D(a,b,void 0);else for(var c=$f(a),d=Zf(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function bg(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ha(a)||r(a))return Eb(a,b,void 0);for(var c=$f(a),d=Zf(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function cg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function dg(){}dg.prototype.Zy=null;function eg(a){var b;(b=a.Zy)||(b={},fg(a)&&(b[0]=!0,b[1]=!0),b=a.Zy=b);return b};var gg;function hg(){}w(hg,dg);function ig(a){return(a=fg(a))?new ActiveXObject(a):new XMLHttpRequest}function fg(a){if(!a.OA&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.OA=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.OA}gg=new hg;function jg(a){this.wb=new hd;a&&this.mt(a)}function kg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ma(a):b.substr(0,1)+a}f=jg.prototype;f.Lh=function(){return this.wb.Lh()};f.add=function(a){this.wb.set(kg(a),a)};f.mt=function(a){a=Zf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.gg=function(a){a=Zf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.wb.remove(kg(a))};f.clear=function(){this.wb.clear()};f.bo=function(){return this.wb.bo()};
f.contains=function(a){a=kg(a);return kd(this.wb.wb,a)};f.TA=function(a){var b=new jg;a=Zf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.nk=function(){return this.wb.nk()};f.clone=function(){return new jg(this)};f.Jl=function(a){return this.Lh()==Yf(a)&&lg(this,a)};
function lg(a,b){var c=Yf(b);if(a.Lh()>c)return!1;!(b instanceof jg)&&5<c&&(b=new jg(b));return bg(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.Jt?c.Jt(a):ha(c)||r(c)?Hb(c,a):pb(c,a)})};function mg(a){var b;b||(b=ng(a||arguments.callee.caller,[]));return b}
function ng(a,b){var c=[];if(Hb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(og(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=og(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(ng(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function og(a){if(pg[a])return pg[a];a=String(a);if(!pg[a]){var b=/function ([^\(]+)/.exec(a);pg[a]=b?b[1]:"[Anonymous]"}return pg[a]}var pg={};function qg(a,b,c,d,e){this.reset(a,b,c,d,e)}qg.prototype.Hz=null;qg.prototype.Gz=null;var rg=0;qg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||rg++;d||wa();this.lo=a;this.pJ=b;delete this.Hz;delete this.Gz};qg.prototype.lC=function(a){this.lo=a};function sg(a){this.Ak=a;this.IA=this.Fc=this.lo=this.Qa=null}function tg(a,b){this.name=a;this.value=b}tg.prototype.toString=function(){return this.name};var ug=new tg("SEVERE",1E3),vg=new tg("CONFIG",700),wg=new tg("FINE",500);f=sg.prototype;f.getName=function(){return this.Ak};f.getParent=function(){return this.Qa};f.iu=function(){this.Fc||(this.Fc={});return this.Fc};f.lC=function(a){this.lo=a};
function xg(a){if(a.lo)return a.lo;if(a.Qa)return xg(a.Qa);eb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=xg(this).value)for(ja(b)&&(b=b()),a=this.gA(a,b,c,sg.prototype.log),b="log:"+a.pJ,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.IA)for(var e=0,h=void 0;h=c.IA[e];e++)h(d);b=b.getParent()}};
f.gA=function(a,b,c,d){a=new qg(a,String(b),this.Ak);if(c){a.Hz=c;var e;d=d||sg.prototype.gA;try{var h;var k=da("window.location.href");if(r(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.lP||"Not available"}catch(p){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(m){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+La(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+La(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+La(mg(d)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}a.Gz=e}return a};f.Po=function(a){this.Qa=a};var yg={},zg=null;
function Ag(a){zg||(zg=new sg(""),yg[""]=zg,zg.lC(vg));var b;if(!(b=yg[a])){b=new sg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Ag(a.substr(0,c));c.iu()[d]=b;b.Po(c);yg[a]=b}return b};function Bg(a,b){a&&a.log(wg,b,void 0)};function Cg(a){Zc.call(this);this.headers=new hd;this.xs=a||null;this.Bi=!1;this.ws=this.Aa=null;this.jo=this.ZA=this.gr="";this.tk=this.Eu=this.Rq=this.cu=!1;this.ip=0;this.ms=null;this.YB=Dg;this.ss=this.YL=!1}w(Cg,Zc);var Dg="",Eg=Cg.prototype,Fg=Ag("goog.net.XhrIo");Eg.nf=Fg;var Gg=/^https?$/i,Hg=["POST","PUT"],Ig=[];function Jg(a,b){var c=new Cg;Ig.push(c);b&&c.A("complete",b);c.Tu("ready",c.JF);c.send(a,void 0,void 0,void 0)}f=Cg.prototype;f.JF=function(){this.g();Kb(Ig,this)};
f.send=function(a,b,c,d){if(this.Aa)throw Error("[goog.net.XhrIo] Object is active with another request="+this.gr+"; newUri="+a);b=b?b.toUpperCase():"GET";this.gr=a;this.jo="";this.ZA=b;this.cu=!1;this.Bi=!0;this.Aa=this.xs?ig(this.xs):ig(gg);this.ws=this.xs?eg(this.xs):eg(gg);this.Aa.onreadystatechange=ta(this.BB,this);try{Bg(this.nf,Kg(this,"Opening Xhr")),this.Eu=!0,this.Aa.open(b,String(a),!0),this.Eu=!1}catch(e){Bg(this.nf,Kg(this,"Error opening Xhr: "+e.message));Lg(this,e);return}a=c||"";var h=
this.headers.clone();d&&ag(d,function(a,b){h.set(b,a)});d=Fb(h.Ln());c=ba.FormData&&a instanceof ba.FormData;!Hb(Hg,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.Aa.setRequestHeader(b,a)},this);this.YB&&(this.Aa.responseType=this.YB);"withCredentials"in this.Aa&&(this.Aa.withCredentials=this.YL);try{Mg(this),0<this.ip&&(this.ss=Ng(this.Aa),Bg(this.nf,Kg(this,"Will abort after "+this.ip+"ms if incomplete, xhr2 "+this.ss)),this.ss?(this.Aa.timeout=
this.ip,this.Aa.ontimeout=ta(this.WC,this)):this.ms=Xf(this.WC,this.ip,this)),Bg(this.nf,Kg(this,"Sending request")),this.Rq=!0,this.Aa.send(a),this.Rq=!1}catch(k){Bg(this.nf,Kg(this,"Send error: "+k.message)),Lg(this,k)}};function Ng(a){return E&&oc(9)&&u(a.timeout)&&ca(a.ontimeout)}function Gb(a){return"content-type"==a.toLowerCase()}f.WC=function(){"undefined"!=typeof aa&&this.Aa&&(this.jo="Timed out after "+this.ip+"ms, aborting",Bg(this.nf,Kg(this,this.jo)),this.dispatchEvent("timeout"),this.abort(8))};
function Lg(a,b){a.Bi=!1;a.Aa&&(a.tk=!0,a.Aa.abort(),a.tk=!1);a.jo=b;Og(a);Pg(a)}function Og(a){a.cu||(a.cu=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Aa&&this.Bi&&(Bg(this.nf,Kg(this,"Aborting")),this.Bi=!1,this.tk=!0,this.Aa.abort(),this.tk=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pg(this))};f.f=function(){this.Aa&&(this.Bi&&(this.Bi=!1,this.tk=!0,this.Aa.abort(),this.tk=!1),Pg(this,!0));Cg.d.f.call(this)};
f.BB=function(){this.dk||(this.Eu||this.Rq||this.tk?Qg(this):this.aK())};f.aK=function(){Qg(this)};
function Qg(a){if(a.Bi&&"undefined"!=typeof aa)if(a.ws[1]&&4==Rg(a)&&2==Sg(a))Bg(a.nf,Kg(a,"Local request error detected and ignored"));else if(a.Rq&&4==Rg(a))Xf(a.BB,0,a);else if(a.dispatchEvent("readystatechange"),4==Rg(a)){Bg(a.nf,Kg(a,"Request complete"));a.Bi=!1;try{var b=Sg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Tf(String(a.gr))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Gg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Rg(a)?a.Aa.statusText:""}catch(n){Bg(a.nf,"Can not get status: "+n.message),l=""}a.jo=l+" ["+Sg(a)+"]";Og(a)}}finally{Pg(a)}}}
function Pg(a,b){if(a.Aa){Mg(a);var c=a.Aa,d=a.ws[0]?ea:null;a.Aa=null;a.ws=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.nf)&&c.log(ug,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Mg(a){a.Aa&&a.ss&&(a.Aa.ontimeout=null);u(a.ms)&&(ba.clearTimeout(a.ms),a.ms=null)}f.Rg=function(){return!!this.Aa};function Rg(a){return a.Aa?a.Aa.readyState:0}function Sg(a){try{return 2<Rg(a)?a.Aa.status:-1}catch(b){return-1}}
function Kg(a,b){return b+" ["+a.ZA+" "+a.gr+" "+Sg(a)+"]"};/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function M(){}v("gxnat",M);M.JPEG_CONVERT_SUFFIX="?format=image/jpeg";M.qG={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};M.Hx="?format=zip";M.Sh=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);M.get(a,b,"json")};
M.get=function(a,b,c){Jg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.Aa?cg(a.Aa.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Aa?a.Aa.responseText:""}catch(h){Bg(a.nf,"Can not get responseText: "+h.message),e=""}b(e)}})};
M.ur=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(M.ur.EI&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(M.ur.EI&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
M.zL=function(a,b){var c=[],d={},e=[],h={};D(a,function(a){h=a;D(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(M.pP);D(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",M.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",M.qG);v("gxnat.ZIP_SUFFIX",M.Hx);v("gxnat.jsonGet",M.Sh);v("gxnat.get",M.get);v("gxnat.naturalSort",M.ur);v("gxnat.sortXnatPropertiesArray",M.zL);function Tg(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Ug(this)}w(Tg,vc);v("gxnat.Path",Tg);
function Vg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Wg(a){for(var b=0,c=Xg.length,b=0;b<c;b++)a(Xg[b],b)}function Yg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Xg=["projects","subjects","experiments",["scans","resources"],"files"];
function Ug(a){var b,c,d,e=!1;Wg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.Tt=Xg[k-1],e=!0);else null!=this[a]||e||(this.Tt=Xg[k-1],e=!0)}.bind(a))}Tg.prototype.zq=function(){null!=this.Tt||Ug(this);return this.Tt};
Tg.prototype.Zh=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=Xg.length,k=0,d=0;d<h;d++){c=Xg[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Tg.prototype.g=function(){Tg.d.g.call(this);sb(this)};v("gxnat.Path.getQueryPrefix",Vg);v("gxnat.Path.forEachXnatLevel",Wg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Tg(a),d=new Tg(b),e=void 0;Wg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",Yg);v("gxnat.Path.xnatLevelOrder",Xg);v("gxnat.Path.prototype.getDeepestLevel",Tg.prototype.zq);v("gxnat.Path.prototype.pathByLevel",Tg.prototype.Zh);v("gxnat.Path.prototype.dispose",Tg.prototype.g);function Zg(a){this.Hd=new Tg(a);this.projects=[];this[$g]={};this[ah]={};this[bh]={}}w(Zg,vc);v("gxnat.ProjectTree",Zg);function ch(a){this[dh]=r(a)?new Tg(a):a;this[eh]=this[dh].zq();a=Xg.indexOf(this[dh].zq())+1;-1!=a&&(this[fh]=Xg[a],r(this[fh])&&(this[gh]=this[dh].originalUrl+"/"+this[fh],this[this[fh]]=[]))}w(ch,vc);v("gxnat.ProjectTree.TreeNode",ch);ch.prototype.oe=function(a){this.Ib=a};ch.prototype.Gd=function(){return this.Ib};
ch.prototype.g=function(){ch.d.g.call(this);null!=this[dh]&&this[dh].g();sb(this)};var eh=B(),gh=B(),hh=B(),dh=B(),fh=B(),ih=B(),jh=B(),kh=B(),$g=B(),ah=B(),bh=B(),lh=["ID","description","name","URI"],mh=["gender","handedness","label","URI"],nh=["label","URI"];function oh(a,b){return Ka(a.Gd(),b.Gd())}function ph(a){var b="&columns=";D(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=Zg.prototype;
f.Pz=function(a){var b=[];C(this.In(a),function(a,d){"projects"==d?b.push(a[kh].ID):b.push(a[kh].label)});return b};f.Qz=function(a){var b=[];C(this.In(a),function(a){b.push(a[dh].originalUrl)});return b};f.In=function(a){branch={projects:this.Pd};"experiments"==a[fh]?branch.subjects=a:g(a[fh])&&(branch.subjects=this[ah][a[dh].Zh("subjects")],branch.experiments=a);return branch};f.dB=function(a,b){this.mo(this.Hd,a,b)};
f.mo=function(a,b,c){var d=r(a)?new Tg(a):a,e;if(null!=this.Pd){a={projects:this.Pd};if(null!=d.subjects){e=d.Zh("subjects");if(null==this[ah][e]){this.Wu(e,function(a){this.fB(a,function(){null!=b&&b(a);this.mo(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[ah][e]}if(null!=d.experiments){e=d.Zh("experiments");if(null==this[bh][e]){this.Vu(e,function(a){null!=b&&b(a);this.mo(d,b,c)}.bind(this));return}a.experiments=this[bh][e]}null!=c&&c(a)}else this.eB(function(a){null!=b&&b(a);this.mo(d,
b,c)}.bind(this))};f.eB=function(a){if(null==this.Pd){var b=ph(lh),c=this.Hd.prefix+"/projects/"+this.Hd.projects,d;M.Sh(this.Hd.prefix+"/projects",function(b){d=new ch(c);this.projects.push(d);this.Pd=d;this[$g][d[dh].originalUrl]=d;d[kh]=b[0];d.oe(d[kh].name);a(d)}.bind(this),"&ID="+this.Hd.projects+b)}};f.Nn=function(a){return this[ah][a]};f.Ql=function(a){return this[bh][a]};
f.fB=function(a,b){var c=a;r(a)?c=this.Nn(a):a instanceof Tg&&(c=this.Nn(a.originalUrl));if(null!=c[kh])b(c);else{var d=this.Hd.prefix+"/subjects",e=ph(mh),e="&ID="+c[dh].subjects+e;M.Sh(d,function(a){c[kh]=a[0];c.oe(c[kh].label);b(c)}.bind(this),e)}};
f.gB=function(a,b){if(null==this.Pd[ih]||!0!=this.Pd[ih]){var c=this.Pd[dh].originalUrl+"/subjects",d=ph(mh);window.console.log("load subjects",c,d);var e,h;M.Sh(c,function(c){D(c,function(d){h=this.Pd[dh].prefix+"/projects/"+this.Pd[dh].projects+"/subjects/"+d.ID;e=this.Wu(h);null==e[kh]&&(e[kh]=d,e.oe(e[kh].label));null!=a&&a(e);this.Pd.subjects.length==c.length&&(this.Pd[ih]=!0,null!=b&&(d=this.Pd.subjects,d.sort(oh),b(d)))}.bind(this))}.bind(this),d)}};
f.Wu=function(a,b){if(null!=this[ah][a])return this[ah][a];subjNode=new ch(a);this.Pd.subjects.push(subjNode);this[ah][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.bB=function(a,b){var c=a;r(a)?c=this.Ql(a):a instanceof Tg&&(c=this.Ql(a.originalUrl));var d=this.Hd.prefix+"/experiments",e=ph(nh),e="&ID="+c[dh].experiments+e;M.Sh(d,function(a){c[kh]=a[0];c.oe(c[kh].label);b(c)}.bind(this),e)};
f.cB=function(a,b,c){var d=a;r(a)?d=this.Nn(a):a instanceof Tg&&(d=this.Nn(a.originalUrl));if(null!=d[ih]&&!0==d[ih])window.console.log("Don't need to reload the experiments of "+d[dh].originalUrl);else{var e=d[dh].originalUrl+"/experiments";M.Sh(e+"?xsiType=xnat:imageSessionData",function(a){D(a,function(k){this.Vu(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[ih]=!0,null!=c&&(e=d.experiments,e.sort(oh),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Vu=function(a,b){null==this[bh][a]&&(exptNode=new ch(a),this.bB(exptNode,function(c){this[ah][c[dh].Zh("subjects")].experiments.push(c);this[bh][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){Zg.d.g.call(this);delete this.Pd;this.Hd.g();delete this.Hd;D(this.projects,function(a){null!=a.subjects&&D(a.subjects,function(a){null!=a.experiments&&D(a.experiments,function(a){a.g()});a.g()});a.g()});sb(this)};v("gxnat.ProjectTree.TreeNode",ch);v("gxnat.ProjectTree.LEVEL_KEY",eh);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",gh);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",hh);v("gxnat.ProjectTree.PATH_KEY",dh);v("gxnat.ProjectTree.NEXTLEVEL_KEY",fh);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",ih);v("gxnat.ProjectTree.ISLOADING_KEY",jh);v("gxnat.ProjectTree.METADATA_KEY",kh);v("gxnat.ProjectTree.PROJ_DIRECT",$g);v("gxnat.ProjectTree.SUBJ_DIRECT",ah);v("gxnat.ProjectTree.EXPT_DIRECT",bh);v("gxnat.ProjectTree.PROJECT_METADATA",lh);v("gxnat.ProjectTree.SUBJECT_METADATA",mh);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",nh);v("gxnat.ProjectTree.compareNodeTitles",oh);v("gxnat.ProjectTree.getColumnQuery",ph);v("gxnat.ProjectTree.prototype.getBranchTitles",Zg.prototype.Pz);v("gxnat.ProjectTree.prototype.getBranchUris",Zg.prototype.Qz);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",Zg.prototype.In);v("gxnat.ProjectTree.prototype.loadInitBranch",Zg.prototype.dB);v("gxnat.ProjectTree.prototype.loadBranch",Zg.prototype.mo);v("gxnat.ProjectTree.prototype.loadProject",Zg.prototype.eB);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",Zg.prototype.Nn);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",Zg.prototype.Ql);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",Zg.prototype.fB);v("gxnat.ProjectTree.prototype.loadSubjects",Zg.prototype.gB);v("gxnat.ProjectTree.prototype.loadSubject",Zg.prototype.Wu);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",Zg.prototype.bB);v("gxnat.ProjectTree.prototype.loadExperiments",Zg.prototype.cB);
v("gxnat.ProjectTree.prototype.loadExperiment",Zg.prototype.Vu);v("gxnat.ProjectTree.prototype.dispose",Zg.prototype.g);function qh(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=qh.prototype;f.clone=function(){return new qh(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function rh(a,b){return new qh(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof qh?(this.x+=a.x,this.y+=a.y):(this.x+=a,u(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.x*=a;this.y*=c;return this};function sh(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=sh.prototype;f.clone=function(){return new sh(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof sh?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof qh?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,u(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function th(a,b){this.width=a;this.height=b}function uh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=th.prototype;f.clone=function(){return new th(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.bo=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=u(b)?b:a;this.width*=a;this.height*=c;return this};function vh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=vh.prototype;f.clone=function(){return new vh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.TA=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof vh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function wh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.$t=function(a){return Math.sqrt(wh(this,a))};f.Yi=function(){return new th(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof qh?(this.left+=a.x,this.top+=a.y):(this.left+=a,u(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function xh(){return hc?"Webkit":gc?"Moz":E?"ms":fc?"O":null};function yh(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function N(a,b){var c=yh(a),d=Ob(arguments,1),e=c.length+d.length;zh(c,d);a.className=c.join(" ");return c.length==e}function Ah(a,b){var c=yh(a),d=Ob(arguments,1),e=Bh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function zh(a,b){for(var c=0;c<b.length;c++)Hb(a,b[c])||a.push(b[c])}function Bh(a,b){return Bb(a,function(a){return!Hb(b,a)})}
function Ch(a,b,c){var d=yh(a);r(b)?Kb(d,b):g(b)&&(d=Bh(d,b));r(c)&&!Hb(d,c)?d.push(c):g(c)&&zh(d,c);a.className=d.join(" ")};var Dh=!E||pc(9),Eh=!gc&&!E||E&&pc(9)||gc&&oc("1.9.1"),Fh=E&&!oc("9");function Gh(a){return a?new Hh(Ih(a)):Ba||(Ba=new Hh)}function Jh(a){return r(a)?document.getElementById(a):a}function Kh(a,b,c){return Lh(document,a,b,c)}function Mh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Lh(document,"*",a,b)}function Nh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Lh(document,"*",a,b)[0])||null}
function Lh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Hb(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Oh(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ph?a.setAttribute(Ph[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ph={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Rh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new th(a.clientWidth,a.clientHeight)}function Sh(a){return hc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Th(a){return a?a.parentWindow||a.defaultView:window}function Q(a,b,c){return Uh(document,arguments)}
function Uh(a,b){var c=b[0],d=b[1];if(!Dh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',La(d.name),'"');if(d.type){c.push(' type="',La(d.type),'"');var e={};xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(r(d)?c.className=d:g(d)?c.className=d.join(" "):Oh(c,d));2<b.length&&Vh(a,c,b,2);return c}function Vh(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ha(h)||ka(h)&&0<h.nodeType?e(h):D(Wh(h)?Mb(h):h,e)}}
function Xh(a,b){Vh(Ih(a),a,arguments,1)}function Yh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Zh(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function R(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function $h(a){return Eh&&void 0!=a.children?a.children:Bb(a.childNodes,function(a){return 1==a.nodeType})}function ai(a){return void 0!=a.firstElementChild?a.firstElementChild:bi(a.firstChild)}
function ci(a){return void 0!=a.nextElementSibling?a.nextElementSibling:bi(a.nextSibling)}function bi(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function di(a){return ka(a)&&1==a.nodeType}function ei(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function fi(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var h=[],k=arguments[b];k;)h.unshift(k),k=k.parentNode;d.push(h);e=Math.min(e,h.length)}h=null;for(b=0;b<e;b++){for(var k=d[0][b],l=1;l<c;l++)if(k!=d[l][b])return h;h=k}return h}function Ih(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function gi(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Yh(a),a.appendChild(Ih(a).createTextNode(String(b)))}var hi={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ii={IMG:" ",BR:"\n"};function ji(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function ki(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function li(a){a=a.tabIndex;return u(a)&&0<=a&&32768>a}function mi(a){if(Fh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];ni(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Fh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function oi(a){var b=[];ni(a,b,!1);return b.join("")}
function ni(a,b,c){if(!(a.nodeName in hi))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ii)b.push(ii[a.nodeName]);else for(a=a.firstChild;a;)ni(a,b,c),a=a.nextSibling}function Wh(a){if(a&&"number"==typeof a.length){if(ka(a))return"function"==typeof a.item||"string"==typeof a.item;if(ja(a))return"function"==typeof a.item}return!1}
function pi(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return qi(a,function(a){return(!d||a.nodeName==d)&&(!c||r(a.className)&&Hb(a.className.split(/\s+/),c))})}function qi(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Hh(a){this.qa=a||ba.document||document}f=Hh.prototype;f.N=Gh;function ri(a){return a.qa}f.a=function(a){return r(a)?this.qa.getElementById(a):a};f.rD=Hh.prototype.a;f.w=function(a,b,c){return Uh(this.qa,arguments)};f.createElement=function(a){return this.qa.createElement(a)};
f.createTextNode=function(a){return this.qa.createTextNode(String(a))};function si(a){return"CSS1Compat"==a.qa.compatMode}function ti(a){a=a.qa;return a.parentWindow||a.defaultView}function ui(a){var b=a.qa;a=Sh(b);b=b.parentWindow||b.defaultView;return E&&oc("10")&&b.pageYOffset!=a.scrollTop?new qh(a.scrollLeft,a.scrollTop):new qh(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.Iu=Zh;f.removeNode=R;f.iu=$h;f.Yz=ai;f.contains=ei;
f.Ph=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!ki(a)||li(a)):ki(a)&&li(a))&&E?(a=ja(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function vi(a,b,c){r(b)?wi(a,c,b):C(b,ua(wi,a))}function wi(a,b,c){a:if(c=ab(c),void 0===a.style[c]){var d=xh()+cb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function xi(a,b){var c=Ih(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function yi(a,b){return xi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function zi(a){return yi(a,"position")}
function Ai(a,b,c){var d,e=gc&&(bc||kc)&&oc("1.9");b instanceof qh?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Bi(d,e);a.style.top=Bi(b,e)}function Ci(a){return new qh(a.offsetLeft,a.offsetTop)}function Di(a){a=a?Ih(a):document;return!E||pc(9)||si(Gh(a))?a.documentElement:a.body}
function Ei(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Fi(a){if(E&&!pc(8))return a.offsetParent;var b=Ih(a),c=yi(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=yi(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Gi(a){for(var b=new sh(0,Infinity,Infinity,0),c=Gh(a),d=c.qa.body,e=c.qa.documentElement,h=Sh(c.qa);a=Fi(a);)if(!(E&&0==a.clientWidth||hc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=yi(a,"overflow")){var k=Hi(a),l;l=a;if(gc&&!oc("1.9")){var n=parseFloat(xi(l,"borderLeftWidth"));if(Ii(l))var p=l.offsetWidth-l.clientWidth-n-parseFloat(xi(l,"borderRightWidth")),n=n+p;l=new qh(n,parseFloat(xi(l,"borderTopWidth")))}else l=new qh(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=Rh(ti(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Hi(a){var b,c=Ih(a),d=yi(a,"position"),e=gc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new qh(0,0),k=Di(c);if(a==k)return h;if(a.getBoundingClientRect)b=Ei(a),a=ui(Gh(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(hc&&"fixed"==zi(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(fc||hc&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=Fi(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,fc&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}function Ji(a,b){var c=Ki(a),d=Ki(b);return new qh(c.x-d.x,c.y-d.y)}
function Li(a){var b;if(a.getBoundingClientRect)b=Ei(a),b=new qh(b.left,b.top);else{b=ui(Gh(a));var c=Hi(a);b=new qh(c.x-b.x,c.y-b.y)}if(gc&&!oc(12)){b:{c=ab("transform");if(void 0===a.style[c]&&(c=xh()+cb(c),void 0!==a.style[c])){c=(hc?"-webkit":gc?"-moz":E?"-ms":fc?"-o":null)+"-transform";break b}c="transform"}a=(a=yi(a,c)||yi(a,"transform"))?(a=a.match(Mi))?new qh(parseFloat(a[1]),parseFloat(a[2])):new qh(0,0):new qh(0,0);a=new qh(b.x+a.x,b.y+a.y)}else a=b;return a}
function Ki(a){if(1==a.nodeType)return Li(a);var b=ja(a.tG),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Ic.targetTouches&&(c=a.Ic.targetTouches[0]);return new qh(c.clientX,c.clientY)}function Ni(a,b,c){if(b instanceof th)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Oi(a,b);Pi(a,c)}function Bi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Pi(a,b){a.style.height=Bi(b,!0)}function Oi(a,b){a.style.width=Bi(b,!0)}
function T(a){var b=Qi;if("none"!=yi(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Qi(a){var b=a.offsetWidth,c=a.offsetHeight,d=hc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new th(b,c):(a=Ei(a),new th(a.right-a.left,a.bottom-a.top))}function Ri(a){var b=Hi(a);a=T(a);return new vh(b.x,b.y,a.width,a.height)}
function Si(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Ti(a,b){a.style.display=b?"":"none"}function Ui(a){E&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Ii(a){return"rtl"==yi(a,"direction")}var Vi=gc?"MozUserSelect":hc?"WebkitUserSelect":null;
function Wi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Vi){if(b=b?"none":"",a.style[Vi]=b,c){a=0;for(var d;d=c[a];a++)d.style[Vi]=b}}else if(E||fc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Xi(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Yi(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Xi(a,c):0}function Zi(a,b){if(E){var c=Yi(a,b+"Left"),d=Yi(a,b+"Right"),e=Yi(a,b+"Top"),h=Yi(a,b+"Bottom");return new sh(e,d,h,c)}c=xi(a,b+"Left");d=xi(a,b+"Right");e=xi(a,b+"Top");h=xi(a,b+"Bottom");return new sh(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var $i={thin:2,medium:4,thick:6};
function aj(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in $i?$i[c]:Xi(a,c)}function bj(a){if(E&&!pc(9)){var b=aj(a,"borderLeft"),c=aj(a,"borderRight"),d=aj(a,"borderTop");a=aj(a,"borderBottom");return new sh(d,c,a,b)}b=xi(a,"borderLeftWidth");c=xi(a,"borderRightWidth");d=xi(a,"borderTopWidth");a=xi(a,"borderBottomWidth");return new sh(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Mi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function cj(a){vc.call(this);this.Xc=a;this.eb={}}w(cj,vc);var dj=[];f=cj.prototype;f.A=function(a,b,c,d){g(b)||(b&&(dj[0]=b.toString()),b=dj);for(var e=0;e<b.length;e++){var h=F(a,b[e],c||this.handleEvent,d||!1,this.Xc||this);if(!h)break;this.eb[h.key]=h}return this};f.Tu=function(a,b,c,d){return ej(this,a,b,c,d)};function ej(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)ej(a,b,c[k],d,e,h);else{b=Sc(b,c,d||a.handleEvent,e,h||a.Xc||a);if(!b)return a;a.eb[b.key]=b}return a}
f.ob=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.ob(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.Xc||this,c=Mc(c),d=!!d,b=gb(a)?a.Mn(b,c,d,e):a?(a=Oc(a))?a.Mn(b,c,d,e):null:null,b&&(Uc(b),delete this.eb[b.key]);return this};f.gg=function(){C(this.eb,Uc);this.eb={}};f.f=function(){cj.d.f.call(this);this.gg()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function fj(){}fa(fj);fj.prototype.uB=0;function gj(a){Zc.call(this);this.lb=a||Gh();this.Zg=hj;this.kf=null;this.fa=!1;this.o=null;this.Zi=void 0;this.Pf=this.Fc=this.Qa=this.ev=null;this.iD=!1}w(gj,Zc);gj.prototype.wI=fj.ee();var hj=null;
function ij(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function jj(a){return a.kf||(a.kf=":"+(a.wI.uB++).toString(36))}function kj(a,b){a.Qa&&a.Qa.Pf&&(tb(a.Qa.Pf,a.kf),ub(a.Qa.Pf,b,a));a.kf=b}f=gj.prototype;f.a=function(){return this.o};
f.ab=function(){this.Zi||(this.Zi=new cj(this));return this.Zi};f.Oo=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Qa&&this.kf&&lj(this.Qa,this.kf)&&this.Qa!=a)throw Error("Unable to set parent component");this.Qa=a;gj.d.lw.call(this,a)};f.getParent=function(){return this.Qa};f.lw=function(a){if(this.Qa&&this.Qa!=a)throw Error("Method not supported");gj.d.lw.call(this,a)};f.N=function(){return this.lb};f.w=function(){this.o=this.lb.createElement("div")};f.n=function(a){this.Yg(a)};
f.Yg=function(a,b){if(this.fa)throw Error("Component already rendered");this.o||this.w();a?a.insertBefore(this.o,b||null):this.lb.qa.body.appendChild(this.o);this.Qa&&!this.Qa.fa||this.$a()};f.yb=function(a){if(this.fa)throw Error("Component already rendered");if(a&&this.Fe(a)){this.iD=!0;var b=Ih(a);this.lb&&this.lb.qa==b||(this.lb=Gh(a));this.$d(a);this.$a()}else throw Error("Invalid element to decorate");};f.Fe=function(){return!0};f.$d=function(a){this.o=a};
f.$a=function(){this.fa=!0;mj(this,function(a){!a.fa&&a.a()&&a.$a()})};f.vc=function(){mj(this,function(a){a.fa&&a.vc()});this.Zi&&this.Zi.gg();this.fa=!1};f.f=function(){this.fa&&this.vc();this.Zi&&(this.Zi.g(),delete this.Zi);mj(this,function(a){a.g()});!this.iD&&this.o&&R(this.o);this.Qa=this.ev=this.o=this.Pf=this.Fc=null;gj.d.f.call(this)};f.kn=function(a,b){this.nt(a,nj(this),b)};
f.nt=function(a,b,c){if(a.fa&&(c||!this.fa))throw Error("Component already rendered");if(0>b||b>nj(this))throw Error("Child component index out of bounds");this.Pf&&this.Fc||(this.Pf={},this.Fc=[]);if(a.getParent()==this){var d=jj(a);this.Pf[d]=a;Kb(this.Fc,a)}else ub(this.Pf,jj(a),a);a.Oo(this);Nb(this.Fc,b,0,a);a.fa&&this.fa&&a.getParent()==this?(c=this.Ia(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.o||this.w(),b=oj(this,b+1),a.Yg(this.Ia(),b?b.o:null)):this.fa&&!a.fa&&a.o&&a.o.parentNode&&
1==a.o.parentNode.nodeType&&a.$a()};f.Ia=function(){return this.o};f.Le=function(){null==this.Zg&&(this.Zg=Ii(this.fa?this.o:this.lb.qa.body));return this.Zg};f.qm=function(a){if(this.fa)throw Error("Component already rendered");this.Zg=a};function nj(a){return a.Fc?a.Fc.length:0}function lj(a,b){var c;a.Pf&&b?(c=a.Pf,c=(b in c?c[b]:void 0)||null):c=null;return c}function oj(a,b){return a.Fc?a.Fc[b]||null:null}function mj(a,b,c){a.Fc&&D(a.Fc,b,c)}function pj(a,b){return a.Fc&&b?Ab(a.Fc,b):-1}
f.removeChild=function(a,b){if(a){var c=r(a)?a:jj(a);a=lj(this,c);c&&a&&(tb(this.Pf,c),Kb(this.Fc,a),b&&(a.vc(),a.o&&R(a.o)),a.Oo(null))}if(!a)throw Error("Child is not in parent component");return a};v("nrg.string",function(){});function qj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function rj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function sj(a){if(null!=a)return a="array"==ga(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function tj(a){return a.replace(/\W/g,"")}function uj(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function vj(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",qj);v("nrg.string.dirname",rj);v("nrg.string.getFileExtension",sj);v("nrg.string.fileNameMatch",function(a,b){return qj(a)===qj(b)});v("nrg.string.stripNonAlphanumeric",tj);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return tj(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",uj);v("nrg.string.mrmlColorToRgb",vj);function wj(a,b,c){vc.call(this);this.Uu=a;this.Yf=b||0;this.Xc=c;this.IF=ta(this.$F,this)}w(wj,vc);f=wj.prototype;f.kf=0;f.f=function(){wj.d.f.call(this);this.stop();delete this.Uu;delete this.Xc};f.start=function(a){this.stop();this.kf=Xf(this.IF,ca(a)?a:this.Yf)};f.stop=function(){this.Rg()&&ba.clearTimeout(this.kf);this.kf=0};f.Rg=function(){return 0!=this.kf};f.$F=function(){this.kf=0;this.Uu&&this.Uu.call(this.Xc)};var rb={},xj=null;function yj(a){a=ma(a);delete rb[a];qb()&&xj&&xj.stop()}function zj(){xj||(xj=new wj(function(){Aj()},20));var a=xj;a.Rg()||a.start()}function Aj(){var a=wa();C(rb,function(b){Bj(b,a)});qb()||zj()};function Cj(){Zc.call(this);this.R=Dj;this.endTime=this.startTime=null}w(Cj,Zc);var Dj=0;Cj.prototype.lf=function(){return 1==this.R};Cj.prototype.Wh=function(){this.ic("begin")};Cj.prototype.onEnd=function(){this.ic("end")};Cj.prototype.ic=function(a){this.dispatchEvent(a)};function Ej(a,b,c,d){Cj.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.$o=a;this.gG=b;this.duration=c;this.ey=d;this.coords=[];this.Tk=!1}w(Ej,Cj);f=Ej.prototype;f.Ri=function(a){this.Tk=a};f.sf=0;
f.play=function(a){if(a||this.R==Dj)this.sf=0,this.coords=this.$o;else if(this.lf())return!1;yj(this);this.startTime=a=wa();-1==this.R&&(this.startTime-=this.duration*this.sf);this.endTime=this.startTime+this.duration;this.sf||this.Wh();this.ic("play");-1==this.R&&this.ic("resume");this.R=1;var b=ma(this);b in rb||(rb[b]=this);zj();Bj(this,a);return!0};f.stop=function(a){yj(this);this.R=Dj;a&&(this.sf=1);Fj(this,this.sf);this.ic("stop");this.onEnd()};
f.pause=function(){this.lf()&&(yj(this),this.R=-1,this.ic("pause"))};f.f=function(){this.R==Dj||this.stop(!1);this.ic("destroy");Ej.d.f.call(this)};f.ae=function(){this.g()};function Bj(a,b){a.sf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.sf&&(a.sf=1);Fj(a,a.sf);1==a.sf?(a.R=Dj,yj(a),a.ic("finish"),a.onEnd()):a.lf()&&a.pv()}function Fj(a,b){ja(a.ey)&&(b=a.ey(b));a.coords=Array(a.$o.length);for(var c=0;c<a.$o.length;c++)a.coords[c]=(a.gG[c]-a.$o[c])*b+a.$o[c]}f.pv=function(){this.ic("animate")};
f.ic=function(a){this.dispatchEvent(new Gj(a,this))};function Gj(a,b){Cc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.sf=b.sf;this.state=b.R}w(Gj,Cc);var Hj={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ij(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Jj.test(c))return b.$i=Kj(c),b.type="hex",b;a:{var d=a.match(Lj);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.$i=Mj(c),b.type="rgb",b;if(Hj&&(c=Hj[a.toLowerCase()]))return b.$i=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Nj=/#(.)(.)(.)/;
function Kj(a){if(!Jj.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Nj,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Oj(a){a=Kj(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Mj(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Pj(b.toString(16));c=Pj(c.toString(16));a=Pj(a.toString(16));return"#"+b+c+a}var Jj=/^#(?:[0-9a-f]{3}){1,2}$/i,Lj=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Pj(a){return 1==a.length?"0"+a:a}
function Qj(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Mj([Math.floor(d),Math.floor(e),Math.floor(h)])};function Rj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=zi(a)||(c=Ih(a).documentElement);if(!c)return b;if(gc)var d=bj(c),b=b+d.left;else pc(8)&&(d=bj(c),b-=d.left);return Ii(c)?c.clientWidth-(b+a.offsetWidth):b};function Sj(a,b,c,d,e){Ej.call(this,b,c,d,e);this.element=a}w(Sj,Ej);f=Sj.prototype;f.k=ea;f.Le=function(){ca(this.Zg)||(this.Zg=Ii(this.element));return this.Zg};f.pv=function(){this.k();Sj.d.pv.call(this)};f.onEnd=function(){this.k();Sj.d.onEnd.call(this)};f.Wh=function(){this.k();Sj.d.Wh.call(this)};function Tj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Sj.apply(this,arguments)}w(Tj,Sj);
Tj.prototype.k=function(){var a=this.Tk&&this.Le()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Uj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Sj.apply(this,arguments)}w(Uj,Sj);Uj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Vj(a,b,c,d,e){Sj.call(this,a,[b],[c],d,e)}w(Vj,Sj);Vj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Wj(a,b,c,d,e){Sj.call(this,a,[b],[c],d,e)}w(Wj,Sj);Wj.prototype.k=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Xj(a,b,c,d,e){u(b)&&(b=[b]);u(c)&&(c=[c]);Sj.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(Xj,Sj);Xj.prototype.k=function(){Si(this.element,this.coords[0])};
Xj.prototype.show=function(){this.element.style.display=""};Xj.prototype.Yl=function(){this.element.style.display="none"};function Yj(a,b,c){Xj.call(this,a,1,0,b,c)}w(Yj,Xj);function Zj(a,b,c){Xj.call(this,a,0,1,b,c)}w(Zj,Xj);function ak(a,b,c){Xj.call(this,a,1,0,b,c)}w(ak,Xj);ak.prototype.Wh=function(){this.show();ak.d.Wh.call(this)};ak.prototype.onEnd=function(){this.Yl();ak.d.onEnd.call(this)};function bk(a,b,c){Xj.call(this,a,0,1,b,c)}w(bk,Xj);bk.prototype.Wh=function(){this.show();bk.d.Wh.call(this)};
function ck(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Sj.apply(this,arguments)}w(ck,Sj);ck.prototype.as=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};ck.prototype.k=function(){this.as()};function dk(){Cj.call(this);this.Ob=[]}w(dk,Cj);dk.prototype.add=function(a){Hb(this.Ob,a)||(this.Ob.push(a),F(a,"finish",this.qv,!1,this))};dk.prototype.remove=function(a){Kb(this.Ob,a)&&Tc(a,"finish",this.qv,!1,this)};dk.prototype.f=function(){D(this.Ob,function(a){a.g()});this.Ob.length=0;dk.d.f.call(this)};function ek(){dk.call(this);this.eu=0}w(ek,dk);
ek.prototype.play=function(a){if(0==this.Ob.length)return!1;if(a||this.R==Dj)this.eu=0,this.Wh();else if(this.lf())return!1;this.ic("play");-1==this.R&&this.ic("resume");var b=-1==this.R&&!a;this.startTime=wa();this.endTime=null;this.R=1;D(this.Ob,function(c){b&&-1!=c.R||c.play(a)});return!0};ek.prototype.pause=function(){this.lf()&&(D(this.Ob,function(a){a.lf()&&a.pause()}),this.R=-1,this.ic("pause"))};
ek.prototype.stop=function(a){D(this.Ob,function(b){b.R==Dj||b.stop(a)});this.R=Dj;this.endTime=wa();this.ic("stop");this.onEnd()};ek.prototype.qv=function(){this.eu++;this.eu==this.Ob.length&&(this.endTime=wa(),this.R=Dj,this.ic("finish"),this.onEnd())};function fk(){dk.call(this);this.ef=0}w(fk,dk);
fk.prototype.play=function(a){if(0==this.Ob.length)return!1;if(a||this.R==Dj)this.ef<this.Ob.length&&this.Ob[this.ef].R!=Dj&&this.Ob[this.ef].stop(!1),this.ef=0,this.Wh();else if(this.lf())return!1;this.ic("play");-1==this.R&&this.ic("resume");this.startTime=wa();this.endTime=null;this.R=1;this.Ob[this.ef].play(a);return!0};fk.prototype.pause=function(){this.lf()&&(this.Ob[this.ef].pause(),this.R=-1,this.ic("pause"))};
fk.prototype.stop=function(a){this.R=Dj;this.endTime=wa();if(a)for(a=this.ef;a<this.Ob.length;++a){var b=this.Ob[a];b.R==Dj&&b.play();b.R==Dj||b.stop(!0)}else this.ef<this.Ob.length&&this.Ob[this.ef].stop(!1);this.ic("stop");this.onEnd()};fk.prototype.qv=function(){this.lf()&&(this.ef++,this.ef<this.Ob.length?this.Ob[this.ef].play():(this.endTime=wa(),this.R=Dj,this.ic("finish"),this.onEnd()))};v("nrg.convert",function(){});function gk(a){if(!g(a)&&!u(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function hk(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function ik(a){if(!r(a)&&!u(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)}
function jk(a){var b={};C(a,function(a,d){isNaN(a)?r(a)&&(b[d]=a):b[d]=a});return b}function kk(a){var b={};C(a,function(a,d){r(a)?0<a.length&&(b[d]=a):b[d]=a});return b}v("nrg.convert.pct",function(a){if(!u(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",gk);v("nrg.convert.remap1D",hk);v("nrg.convert.toInt",ik);
v("nrg.convert.toFloatArray",function(a){if(!r(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");D(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!ka(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!r(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;D(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",jk);v("nrg.convert.filterZeroLengthStrings",kk);v("nrg.style",function(){});var lk="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function mk(a){return a.getBoundingClientRect()}
function nk(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return ik(a.style[b]);var d=Ji(a,a.parentNode),d={left:ik(a.style.left)||d.x,top:ik(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?Ji(a,a.parentNode):Ji(a,document.body),
d={left:ik(a.style.left)||d.x,top:ik(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c}
function ok(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function pk(a,b){a&&b&&(a.style||(a.style={}),vi(a,b),D("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Da(b[c],"%")&&(a.style[c]=gk(b[c]))}))}var qk="is_hovered_"+B();
function rk(a,b,c,d,e,h){function k(){a[qk]=!1;Ah(a,b);null!=h&&h()}function l(){a[qk]=!0;N(a,b);null!=e&&e()}F(a,"mouseenter",l);F(a,"mouseleave",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}v("nrg.style.cssProperties",lk);v("nrg.style.removeClassesThatContain",function(a,b){var c=yh(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)Ah(a,d[e])});v("nrg.style.absolutePosition",mk);v("nrg.style.dims",nk);
v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});v("nrg.style.getComputedStyle",function(a,b){if(b&&r(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=lk);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return ok(c)});v("nrg.style.parseIntNumericalProperties",ok);v("nrg.style.setStyle",pk);v("nrg.style.IS_HOVERED",qk);
v("nrg.style.setHoverClass",rk);v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function sk(a){return 1-Math.pow(1-a,3)};function tk(){}v("nrg.fx",tk);function uk(a,b,c){void 0===b&&(b=500);vk(a,b,1,c)}function wk(a,b,c){void 0===b&&(b=500);vk(a,0,0,function(){vk(a,b,1,c)})}function xk(a,b,c){void 0===b&&(b=500);vk(a,b,0,c)}function vk(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:a.style.opacity=1);var h=new Xj(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);I(h);delete h});h.play()}
function yk(a,b,c){D(a,function(a){a.style.opacity=0});b=u(b)?b:500;c=u(c)?c:250;var d=new Vf(0);d.addEventListener(Wf,function(){elt=a[0];uk(elt,b);1==a.length?(d.stop(),d.g()):(a=Ob(a,1),d.setInterval(c))});d.start()}tk.animGenStyles="left top width height opacity background-color color z-index".split(" ");function zk(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Tj(a,[b.left,b.top],[c.left,c.top],d,sk)}
function Ak(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Uj(a,[b.width,b.height],[c.width,c.height],d,sk)}function Bk(a,b,c,d){if("opacity"in b||"opacity"in c)if(D([b,c],function(a){"opacity"in a||(a.opacity=1);u(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Xj(a,b.opacity,c.opacity,d)}
function Ck(a,b,c,d){if("visibility"in b||"visibility"in c)if(D([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new bk(a,d):new ak(a,d)}
function Dk(a,b,c,d){if("background-color"in b||"background-color"in c){D([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Ij(b["background-color"]),h=Ij(c["background-color"]);if(e.$i!==h.$i)return new ck(a,Oj(e.$i),Oj(h.$i),d,sk)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function Ek(a){var b=T(a),c=Ci(a);return{"background-color":yi(a,"backgroundColor"),width:b.width,left:c.x,top:c.y,height:b.height}}
function Fk(a,b){this.yF=a;this.NL=b}function Gk(a){return kk(jk(a))}function Hk(a){var b=T(a),c=Ci(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Ik(a,b){var c=Hk(a),c=Gk(c),d=Hk(b),e=Gk(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new Fk(c,e)}
function Jk(a,b,c,d){var e=[];D(tk.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(zk(a,b,c,d));break;case "height":e.push(Ak(a,b,c,d));break;case "opacity":e.push(Bk(a,b,c,d));break;case "visibility":e.push(Ck(a,b,c,d));break;case "background-color":e.push(Dk(a,b,c,d))}});var h=[];D(e,function(a){null!=a&&h.push(a)});delete e;return h}
function Kk(a,b,c,d){var e=new ek;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Lk(a,b,c){function d(){pk(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;F(a,"mouseover",function(){pk(a,{opacity:b})});F(a,"mouseout",d);d()}
function Mk(a,b,c,d,e,h,k){if(!g(b)){var l=[];D(a,function(){l.push(b)});b=l}g(c)||(l=[],D(a,function(){l.push(c)}),c=l);d=u(d)?d:500;var n=[];D(a,function(a,e){n.push(Bk(a,{opacity:b[e]},{opacity:c[e]},d))});Kk(n,e,h,k)}v("nrg.fx.fadeIn",uk);v("nrg.fx.fadeInFromZero",wk);v("nrg.fx.fadeOut",xk);v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);vk(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",vk);v("nrg.fx.animGenStyles",tk.animGenStyles);
v("nrg.fx.generateAnim_Slide",zk);v("nrg.fx.generateAnim_Resize",Ak);v("nrg.fx.generateAnim_Fade",Bk);v("nrg.fx.generateAnim_RemoveAddFade",Ck);v("nrg.fx.generateAnim_BgColorTrans",Dk);v("nrg.fx.TransitionDims",Fk);v("nrg.fx.filterTransitionStyles",Gk);v("nrg.fx.getTransitionStyles",Hk);v("nrg.fx.generateTransitionDims",Ik);v("nrg.fx.getAnimationDims",Ek);v("nrg.fx.generateAnimations",Jk);v("nrg.fx.parallelAnimate",Kk);
v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new fk;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",Lk);v("nrg.fx.sequentialFadeIn",yk);v("nrg.fx.parallelFade",Mk);function Nk(a){return a.slice(a.lastIndexOf("/")+1)}function Ok(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Da(b,"/")?b+d:b+("/"+d);return b};function Pk(){}v("nrg.dom",Pk);function Qk(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!r(b))throw new TypeError("String expected!",b);if(c&&!r(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Rk(e,{src:b?Ok(b,bb(e)+"."+c):""});return d}function Sk(a,b){var c=Q("img",{src:b});c.style.JO="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Xh(a,c);c.onclick=c.parentNode.onclick}
function Rk(a,b,c,d){if(!r(a))throw new TypeError("String expected!");if(b&&!ka(b))throw new TypeError("Object expected!");if(null!=c&&!u(c))throw new TypeError("Number expected!");if(null!=d&&!u(d))throw new TypeError("Number expected!");a=Tk("div",a,b?b:{});b&&b.src&&Sk(a,b.src);Lk(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Tk(a,b,c){if(!r(a))throw new TypeError("String expected!",a);if(!r(b))throw new TypeError("String expected!",b);if(c&&!ka(c))throw new TypeError("Object expected!");c=c&&ka(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:bb(b.replace(/\./g,"-").toLowerCase());return Q(a,c)}v("nrg.dom.createBasicHoverButtonSet",Qk);v("nrg.dom.createDivChildImage",Sk);v("nrg.dom.createBasicHoverButton",Rk);v("nrg.dom.createUniqueDom",Tk);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Pk.KP(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function V(a){gj.call(this,a);this.Ww();this.o=Tk("div",this.constructor.ID_PREFIX,a);this.jq();Uk(this)}w(V,gj);v("nrg.ui.Component",V);f=V.prototype;f.Ww=function(){if(this instanceof V){this.constructor.d&&this.constructor.d instanceof V&&V.prototype.Ww.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.Gm)||(this.constructor.Gm=Vk(this.constructor.ID_PREFIX),this.constructor.Bc=this.constructor.Gm)}};
function Vk(a){return a.toLowerCase().replace(/\./g,"-")}f.jq=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)V.prototype.jq.bind(a)(),a=a.constructor.d;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=vb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=uj(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Uk(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Vk(c.constructor.ID_PREFIX),Jb(b,d),c=c.constructor.d;D(b,function(a){null!=this.a()&&N(this.a(),a)}.bind(a))}f.dj="";f.kC=function(a){this.dj=a};f.WG=function(){return this.dj};f.oF=function(a){null==this.cp&&(this.cp=[]);this.cp.push(a)};
f.Bh=function(){if(null==this.ja)this.ja=T(this.a());else if(this.ja.height!==this.v.height||this.ja.width!==this.v.width)this.ja=this.v;if(null==this.Bo)this.Bo=Ci(this.a());else if(this.Bo.x!==this.lq.x||this.Bo.y!==this.lq.y)this.Bo=this.lq;this.v=T(this.a());this.lq=Ci(this.a())};f.k=function(){this.Bh()};f.n=function(a){this.fa&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):V.d.n.call(this,a)};f.Cz=!1;f.YF=function(){return this.Cz};
f.f=function(){V.d.f.call(this);null!=this.cp&&(D(this.cp,function(a){I(a);a.g()}),Ib(this.cp));I(this);I(this.a());R(this.a());this.Bo=this.ja=this.lq=this.v=this.dj=null;this.Cz=!0};f.Yt=function(a){null!=a&&(a=g(a)?a:[a],D(a,function(a){I(a);a.g()}),Ib(a))};f.pq=function(a){null!=a&&(I(a),a.g())};f.qq=function(a){C(a,function(b,c){I(b);R(b);delete a[c]});sb(a)};f.Cn=function(a){C(a,function(b,c){I(b);b.g();delete a[c]});sb(a)};v("nrg.ui.Component.animationLengths",{AM:150,WM:300,KN:600});
v("nrg.ui.Component.idPrefixToCssClass",Vk);v("nrg.ui.Component.prototype.validateIdPrefix",V.prototype.Ww);v("nrg.ui.Component.prototype.imagePrefix",V.prototype.dj);v("nrg.ui.Component.prototype.createCssMap",V.prototype.jq);v("nrg.ui.Component.prototype.setImagePrefix",V.prototype.kC);v("nrg.ui.Component.prototype.getImagePrefix",V.prototype.WG);v("nrg.ui.Component.prototype.addSubComponent",V.prototype.oF);v("nrg.ui.Component.prototype.calcDims",V.prototype.Bh);
v("nrg.ui.Component.prototype.updateStyle",V.prototype.k);v("nrg.ui.Component.prototype.render",V.prototype.n);v("nrg.ui.Component.prototype.disposeInternalCalled",V.prototype.YF);v("nrg.ui.Component.prototype.disposeAnimations",V.prototype.Yt);v("nrg.ui.Component.prototype.disposeAnimationQueue",V.prototype.pq);v("nrg.ui.Component.prototype.disposeElementMap",V.prototype.qq);v("nrg.ui.Component.prototype.disposeComponentMap",V.prototype.Cn);v("nrg.ui.Component.prototype.disposeInternal",V.prototype.f);var Wk;function Xk(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Yk(a,b,c){ha(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Wk||(Wk={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Wk,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Zk(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function $k(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]}function al(a,b){return a.classList?a.classList.contains(b):Hb($k(a),b)}function bl(a,b){a.classList?a.classList.add(b):al(a,b)||(a.className+=0<a.className.length?" "+b:b)}function cl(a,b){if(a.classList)D(b,function(b){bl(a,b)});else{var c={};D($k(a),function(a){c[a]=!0});D(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function dl(a,b){a.classList?a.classList.remove(b):al(a,b)&&(a.className=Bb($k(a),function(a){return a!=b}).join(" "))}function el(a,b){a.classList?D(b,function(b){dl(a,b)}):a.className=Bb($k(a),function(a){return!Hb(b,a)}).join(" ")}function fl(a,b,c){c?bl(a,b):dl(a,b)};function gl(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!gc;default:return 166>a.keyCode||183<a.keyCode}}
function hl(a,b,c,d,e){if(!(E||hc&&oc("525")))return!0;if(bc&&e)return il(a);if(e&&!d)return!1;u(b)&&(b=jl(b));if(!c&&(17==b||18==b||bc&&91==b))return!1;if(hc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return!(E&&pc(9));case 27:return!hc}return il(a)}
function il(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||hc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function jl(a){if(gc)a=kl(a);else if(bc&&hc)a:switch(a){case 93:a=91;break a}return a}
function kl(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function ll(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,Xk(a,k.Ng()),bl(a,"goog-zippy-header"),ml(k,a),a&&k.WA.A(a,"keydown",k.xr))}Zc.call(this);this.lb=e||Gh();this.gk=this.lb.a(a)||null;this.uq=this.lb.a(d||null);this.kc=(this.Ru=ja(b)?b:null)||!b?null:this.lb.a(b);this.Mg=!0==c;this.WA=new cj(this);this.fv=new cj(this);var k=this;h(this.gk);h(this.uq);this.Xb(this.Mg)}w(ll,Zc);var nl={$w:"action",Ex:"toggle"};f=ll.prototype;f.rk=!0;f.f=function(){ll.d.f.call(this);zc(this.WA);zc(this.fv)};
f.Ng=function(){return"tab"};f.Ia=function(){return this.kc};f.toggle=function(){this.Xb(!this.Mg)};f.Xb=function(a){this.kc?Ti(this.kc,a):a&&this.Ru&&(this.kc=this.Ru());this.kc&&bl(this.kc,"goog-zippy-content");this.uq?(Ti(this.gk,!a),Ti(this.uq,a)):ol(this,a);this.Mg=a;this.dispatchEvent(new pl(nl.Ex,this))};function ol(a,b){a.gk&&(fl(a.gk,"goog-zippy-expanded",b),fl(a.gk,"goog-zippy-collapsed",!b),Yk(a.gk,"expanded",b))}
f.No=function(a){this.rk!=a&&((this.rk=a)?(ml(this,this.gk),ml(this,this.uq)):this.fv.gg())};function ml(a,b){b&&a.fv.A(b,"click",a.wr)}f.xr=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Cc(nl.$w,this)),a.preventDefault(),a.stopPropagation()};f.wr=function(){this.toggle();this.dispatchEvent(new Cc(nl.$w,this))};function pl(a,b){Cc.call(this,a,b)}w(pl,Cc);function ql(a,b,c,d){d=d||Gh();var e=d.w("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.vq=e;this.cf=null;ll.call(this,a,b,c,void 0,d);a=this.Mg;this.vq.style.display=a?"":"none";ol(this,a)}w(ql,ll);f=ql.prototype;f.Di=500;f.vF=sk;
f.Xb=function(a){if(this.Mg!=a||this.cf){"none"==this.vq.style.display&&(this.vq.style.display="");var b=this.Ia().offsetHeight,c=0;this.cf?(a=this.Mg,I(this.cf),this.cf.stop(!1),c=parseInt(this.Ia().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;ol(this,a);this.cf=new Ej([0,c],[0,a?b:0],this.Di,this.vF);F(this.cf,["begin","animate","end"],this.xJ,!1,this);F(this.cf,"end",ta(this.yJ,this,a));this.cf.play(!1)}};f.xJ=function(a){var b=this.Ia();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.yJ=function(a){a&&(this.Ia().style.marginTop="0");I(this.cf);this.Mg=a;this.cf=null;a||(this.vq.style.display="none");this.dispatchEvent(new pl(nl.Ex,this))};function rl(a,b,c,d){V.call(this);this.Ib=a;this.Eb=Q("div",{id:"ZippyHeader_"+a+"_"+B(),"class":rl.CSS.tp});this.Eb[sl]=a.toLowerCase();null!=d?d(b,this.Eb):b.appendChild(this.Eb);this.Qn=Q("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":rl.CSS.JD});this.Pw();this.Eb.appendChild(this.Qn);this.Hh=Q("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":rl.CSS.FD},"+");this.Eb.appendChild(this.Hh);this.Rf=Q("div",{id:"ZippyContent_"+a+"_"+B(),"class":rl.CSS.lh});b.appendChild(this.Rf);this.cc=new this.pD(this.Eb,
this.Rf,null!=c?c:!1);this.cc instanceof ql&&(this.cc.Di=500);this.BL=ma(this);this.Nc={};F(this.Eb,"mouseover",this.FK.bind(this));F(this.Eb,"mouseout",this.EK.bind(this));tl(this)}w(rl,V);v("nrg.ui.ZippyNode",rl);rl.ID_PREFIX="nrg.ui.ZippyNode";var ul={yM:"a",lM:"b",yD:"c"};rl.CSS_SUFFIX={tp:"header",nx:"header-mouseover",JD:"header-label",FD:"expandicon",fx:"expandicon-mouseover",lh:"content",lh:"content-sub",UD:"loading-holder",WD:"loading-text",VD:"loading-image"};
function vl(a,b,c){var d=a[0];r(d)&&null!=b&&(d=b.Nc[d]);d.cc.Di=200;1<a.length&&!d.cc.Mg&&Sc(d,"a",function(){d.cc.Di=500;vl(Ob(a,1),d,c)});d.Xb(!0);null!=c&&c(d,a)}var sl=B();f=rl.prototype;f.pD=ql;f.Pw=function(a){a=null!=a?a:45;var b=this.Qn,c=this.Ib.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.Ib?Wa(this.Ib,a+60):c.length==this.Ib.length?Wa(this.Ib,a):this.Ib;return b};f.ie=null;f.Cu=function(){return null!=this.ie};f.jr=!1;f.YI=function(){return this.jr};
f.$v=function(a,b){var c=function(){R(this.ie);this.ie=null}.bind(this);a?(this.jr=!0,vk(this.ie,500,0,function(){c();null!=b&&b()},1)):c()};f.ny=function(){if(null==this.ie){this.ie=Q("div",{id:"LoadingHolder_"+B()});N(this.ie,rl.CSS.UD);var a=Q("div");N(a,rl.CSS.WD);a.innerHTML="Loading...";var b=Q("img");N(b,rl.CSS.VD);b.src=serverRoot+"/images/viewer/xiv/ui/other/loading.gif";Xh(this.ie,a);Xh(this.ie,b);Xh(this.Rf,this.ie);this.ie.style.opacity=0;uk(this.ie,300);this.jr=!1}};f.Gd=function(){return this.Ib};
f.oH=function(){return this.Nc};f.QG=function(){return this.Eb};f.BG=function(){return this.Rf};f.RG=function(){return this.Qn};f.cI=function(){return this.cc};f.Xb=function(a){this.cc.Xb(a)};f.gL=function(a){this.pD=!0===a?ql:ll};function tl(a){F(a.cc,nb(nl),function(a){null!=this.cc.cf?this.dispatchEvent({type:"c"}):a.target.Mg?this.Ov():(this.Hh.innerHTML="+",pk(this.Hh,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"b"}))}.bind(a))}
f.Ov=function(){this.Hh.innerHTML="-";pk(this.Hh,{"margin-left":"-1em"});this.dispatchEvent({type:"a"})};f.FK=function(){N(this.Eb,rl.CSS.nx);N(this.Hh,rl.CSS.fx)};f.EK=function(){Ah(this.Eb,rl.CSS.nx);Ah(this.Hh,rl.CSS.fx)};
f.f=function(){rl.d.f.call(this);R(this.Qn);delete this.Qn;R(this.Hh);delete this.Hh;I(this.Eb);R(this.Eb);delete this.Eb;R(this.Rf);delete this.Rf;null!=this.cc&&(this.cc.g(),I(this.cc),delete this.cc);null!=this.ie&&(this.$v(),delete this.ie);this.Cn(this.Nc);delete this.Nc;delete this.BL;delete this.Ib};v("nrg.ui.ZippyNode.ID_PREFIX",rl.ID_PREFIX);v("nrg.ui.ZippyNode.EventType",ul);v("nrg.ui.ZippyNode.CSS_SUFFIX",rl.CSS_SUFFIX);v("nrg.ui.ZippyNode.NODE_STORT_TAG",sl);
v("nrg.ui.ZippyNode.serialExpand",vl);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",rl.prototype.Pw);v("nrg.ui.ZippyNode.prototype.getTitle",rl.prototype.Gd);v("nrg.ui.ZippyNode.prototype.addLoadingImage",rl.prototype.IO);v("nrg.ui.ZippyNode.prototype.getNodes",rl.prototype.oH);v("nrg.ui.ZippyNode.prototype.getHeader",rl.prototype.QG);v("nrg.ui.ZippyNode.prototype.getContentHolder",rl.prototype.BG);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",rl.prototype.RG);
v("nrg.ui.ZippyNode.prototype.getZippy",rl.prototype.cI);v("nrg.ui.ZippyNode.prototype.setExpanded",rl.prototype.Xb);v("nrg.ui.ZippyNode.prototype.setAnimated",rl.prototype.gL);v("nrg.ui.ZippyNode.prototype.hasLoadingIndicator",rl.prototype.Cu);v("nrg.ui.ZippyNode.prototype.addLoadingIndicator",rl.prototype.ny);v("nrg.ui.ZippyNode.prototype.removeLoadingIndicator",rl.prototype.$v);v("nrg.ui.ZippyNode.prototype.loadingIndicatorRemoving",rl.prototype.YI);
v("nrg.ui.ZippyNode.prototype.disposeInternal",rl.prototype.f);M.td={};M.td.xd=function(){vc.call(this)};w(M.td.xd,vc);v("gxnat.vis.VisNode",M.td.xd);f=M.td.xd.prototype;f.Of="Generic";f.Zr=function(a){this.Of=a};f.wG=function(){return this.Of};f.wm="";f.Uo=function(a){this.wm=a};f.QH=function(){return this.wm};f.Ib=null;f.oe=function(a){this.Ib=a};f.Gd=function(){return this.Ib};f.g=function(){M.td.xd.d.g.call(this);this.Of&&delete this.Of;this.wm&&delete this.wm;this.Ib&&delete this.Ib};v("gxnat.vis.VisNode.prototype.setCategory",M.td.xd.prototype.Zr);
v("gxnat.vis.VisNode.prototype.getCategory",M.td.xd.prototype.wG);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",M.td.xd.prototype.Uo);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",M.td.xd.prototype.QH);v("gxnat.vis.VisNode.prototype.setTitle",M.td.xd.prototype.oe);v("gxnat.vis.VisNode.prototype.getTitle",M.td.xd.prototype.Gd);v("gxnat.vis.VisNode.prototype.dispose",M.td.xd.prototype.g);function wl(a){this.Cp=new JSZip(a)}w(wl,vc);v("gxnat.Zip",wl);function xl(a,b,c,d){if(!Ea(a,".zip")){if(!Ea(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=M.Hx}var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new wl(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}wl.prototype.Uf=function(){return this.Cp.files};
wl.prototype.Yu=function(a,b){var c=0,d=this.Uf(),e=mb(d);C(d,function(d){d.asArrayBuffer();a(d.name,d.asArrayBuffer());c==e-1&&null!=b&&b();c++}.bind(this))};wl.prototype.g=function(){wl.d.g.call(this);this.Yu(function(a){this.Cp.remove(a)}.bind(this));sb(this.Cp);delete this.Cp};v("gxnat.Zip.prototype.getFiles",wl.prototype.Uf);v("gxnat.Zip.prototype.loopFiles",wl.prototype.Yu);v("gxnat.Zip.getFilesAsZip",xl);v("gxnat.Zip.prototype.dispose",wl.prototype.g);v("gxnat.slicerNode",function(){});
function yl(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function zl(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",yl);v("gxnat.slicerNode.toFloatArray",zl);function Al(){ma(this)}v("gxnat.slicerNode.Node",Al);function Bl(a,b){ma(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;D(yl(b),function(b){D(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.Bn=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=zl(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=zl(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(Bl,Al);v("gxnat.slicerNode.Display",Bl);function Cl(a,b){Bl.call(this,a,b)}w(Cl,Bl);v("gxnat.slicerNode.Mesh",Cl);function Dl(a,b){if(a instanceof Dl)this.hd=a.Jw();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!u(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.hd=Mb(a);else if(a instanceof th)this.hd=El(a.height,a.width);else if(u(a)&&u(b)&&0<a&&0<b)this.hd=El(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.rd=new th(this.hd[0].length,this.hd.length)}
function Fl(a,b,c){for(var d=0;d<a.Yi().height;d++)for(var e=0;e<a.Yi().width;e++)b.call(c,a.hd[d][e],d,e,a)}function Gl(a,b){var c=new Dl(a.Yi());Fl(a,function(d,e,h){c.hd[e][h]=b.call(void 0,d,e,h,a)});return c}function El(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=Dl.prototype;f.add=function(a){if(!uh(this.rd,a.Yi()))throw Error("Matrix summation is only supported on arrays of equal size");return Gl(this,function(b,c,d){return b+a.hd[c][d]})};
f.Jl=function(a,b){if(this.rd.width!=a.rd.width||this.rd.height!=a.rd.height)return!1;for(var c=b||0,d=0;d<this.rd.height;d++)for(var e=0;e<this.rd.width;e++)if(!(Math.abs(this.hd[d][e]-a.hd[d][e])<=(c||1E-6)))return!1;return!0};f.Yi=function(){return this.rd};
f.multiply=function(a){if(a instanceof Dl){if(this.rd.width!=a.Yi().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return Hl(this,a)}if(u(a))return Il(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.zc=function(a){if(!uh(this.rd,a.Yi()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return Gl(this,function(b,c,d){return b-a.hd[c][d]})};
f.Jw=function(){return this.hd};f.toString=function(){var a=0;Fl(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];D(this.hd,function(c){b.push("[ ");D(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Jl(a,b,c){return 0<=b&&b<a.rd.height&&0<=c&&c<a.rd.width}
function Hl(a,b){var c=new Dl(a.rd.height,b.Yi().width);Fl(c,function(a,e,h){for(var k=a=0;k<this.rd.width;k++)a+=(Jl(this,e,k)?this.hd[e][k]:0)*(Jl(b,k,h)?b.hd[k][h]:0);if(!Jl(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.rd.height+","+c.rd.width+")");c.hd[e][h]=a},a);return c}function Il(a,b){return Gl(a,function(a){return a*b})};function Kl(a,b,c){Bl.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=Gl(new Dl(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.tw=new Ll(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.$q=b;this.rs=this.Bn?parseInt(this.Bn.getAttribute("upperThreshold")):null;this.lr=this.Bn?parseInt(this.Bn.getAttribute("lowerThreshold")):null;this.visible=c}w(Kl,Bl);v("gxnat.slicerNode.Volume",Kl);function Ll(a,b,c){var d=new Dl([[0],[0],[0],[1]]);D([a,b,c],function(a,b){var c=a.multiply(d).Jw(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.$K=c;break;case 1:this.NF=c;break;case 2:this.BF=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",Ll);function Ml(a,b){ma(this);this.backgroundColor=vj(a);this.Uy=vj(b)}w(Ml,Al);v("gxnat.slicerNode.BackgroundColor",Ml);function Nl(a,b,c,d,e,h,k,l){ma(this);this.element=a;this.cq=b;this.backgroundColor=c;this.$A=d;this.ln=e;this.XL=h;this.hJ=k;this.kG=l}w(Nl,Al);v("gxnat.slicerNode.SceneView",Nl);function Ol(a){vc.call(this);a instanceof Nl?(this.ln=a.ln,this.cq=a.cq,this.backgroundColor=a.backgroundColor,this.$A=a.$A):a instanceof Kl?(this.origin=a.origin||[0,0,0],this.rs=a.rs||1E4,this.lr=a.lr||-1E4,this.Yw=a.Yw||!1,this.$q=a.$q||!1,this.tw=a.tw||null,a.Ug&&(this.XA=a.labelMapFile,this.TI=a.colorTableFile)):a instanceof Cl&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Ol,vc);v("gxnat.vis.RenderProperties",Ol);Ol.prototype.g=function(){Ol.d.g.call(this);sb(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Ol.prototype.g);function Pl(a){M.td.xd.call(this);this.Rd=a||null}w(Pl,M.td.xd);v("gxnat.vis.Renderable",Pl);Pl.prototype.nw=function(a){this.Rd=a instanceof Ol?a:new Ol(a)};Pl.prototype.AH=function(){return this.Rd};Pl.prototype.g=function(){Pl.d.g.call(this);this.Rd&&(this.Rd.g(),delete this.Rd)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Pl.prototype.nw);v("gxnat.vis.Renderable.prototype.getRenderProperties",Pl.prototype.AH);v("gxnat.vis.Renderable.prototype.dispose",Pl.prototype.g);function Ql(a,b){Pl.call(this,b);this.Vi=a||[];null!=b&&this.nw(b)}w(Ql,Pl);v("gxnat.vis.Viewable",Ql);f=Ql.prototype;f.Ih=null;f.IG=function(){return this.Ih};f.iL=function(a){return this.Ih=a};
f.fC=function(a,b,c){null!=this.Ih&&sb(this.Ih);this.Ih={};var d=this.Uf();D(d,function(a){this.Ih[a]=null}.bind(this));var e,h,k;a.Yu(function(a,b){p=0;for(m=d.length;p<m;p++)if(k=a.split("/"),h=k[k.length-1],"."!=h[0]&&(e=d[p],Ea(e,h)))if(null!=c)for(var p=0,m=c.length;p<m;p++)Ea(e,c[p])&&(this.Ih[e]=b,p=m);else{this.Ih[e]=b;break}}.bind(this),b);a.g()};f.Uf=function(){return this.Vi};f.RK=function(a){window.RO.log("REMOVING FILE",a);Kb(this.Vi,a)};
f.Ci=function(a,b){null==this.Vi&&(this.Vi=[]);g(a)||(a=[a]);D(a,function(a){null!=b&&null==b(a)||this.Vi.push(a)}.bind(this))};f.g=function(){Ql.d.g.call(this);this.Vi&&(Ib(this.Vi),delete this.Vi)};v("gxnat.vis.Viewable.prototype.getFileData",Ql.prototype.IG);v("gxnat.vis.Viewable.prototype.setFileData",Ql.prototype.iL);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Ql.prototype.fC);v("gxnat.vis.Viewable.prototype.getFiles",Ql.prototype.Uf);v("gxnat.vis.Viewable.prototype.removeFile",Ql.prototype.RK);
v("gxnat.vis.Viewable.prototype.addFiles",Ql.prototype.Ci);v("gxnat.vis.Viewable.prototype.dispose",Ql.prototype.g);function Rl(a){Pl.call(this);null!=a?g(a)||(a=[a]):a=[];this.wd=a}w(Rl,Pl);v("gxnat.vis.ViewableGroup",Rl);Rl.prototype.yy=function(a){return this.wd.push(a)};Rl.prototype.sG=function(){var a=[];D(this.wd,function(b){a=Lb(a,b.Uf())});return a};Rl.prototype.vA=function(){return this.wd};Rl.prototype.g=function(){Rl.d.g.call(this);D(this.wd,function(a){g(a)?D(a,function(a){a.g()}):a instanceof Ql&&a.g()});delete this.wd};v("gxnat.vis.ViewableGroup.prototype.addViewable",Rl.prototype.yy);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Rl.prototype.sG);v("gxnat.vis.ViewableGroup.prototype.getViewables",Rl.prototype.vA);v("gxnat.vis.ViewableGroup.prototype.dispose",Rl.prototype.g);function Sl(){M.td.xd.call(this);this.Oc=[]}w(Sl,M.td.xd);v("gxnat.vis.ViewableTree",Sl);function Tl(a,b,c){this.OK=a;this.CL=b;this.iG=c}v("gxnat.vis.ViewableTree.metadataCollection",Tl);f=Sl.prototype;f.Mr=null;f.tm=null;f.Ml=null;f.orientation=null;f.Db=function(){return this.orientation};f.Qo=function(a){this.Mr=a};f.So=function(a){this.tm=a};f.Mo=function(a){this.Ml=a};f.aI=function(){return this.Oc};
f.g=function(){Sl.d.g.call(this);null!=this.Mr&&(sb(this.Mr),delete this.xP);null!=this.tm&&(sb(this.tm),delete this.HP);null!=this.Ml&&(sb(this.Ml),delete this.ZO);null!=this.Oc&&(D(this.Oc,function(a){a.g()}),delete this.Oc);null!=this.VC&&Ib(this.VC);delete this.VC;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Tl);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Sl.prototype.Mr);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Sl.prototype.tm);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Sl.prototype.Ml);v("gxnat.vis.ViewableTree.prototype.orientation",Sl.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Sl.prototype.Db);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Sl.prototype.Qo);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Sl.prototype.So);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Sl.prototype.Mo);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Sl.prototype.aI);
v("gxnat.vis.ViewableTree.prototype.dispose",Sl.prototype.g);function Ul(a,b,c){Sl.call(this);this.Zr(a);null!=c&&null!=b&&(this.Fn=c,this.$h=Yg(this.Fn,b.URI,"experiments"),this.wp=new Tg(this.$h));this.fo=b;this.me={}}w(Ul,Sl);v("gxnat.vis.AjaxViewableTree",Ul);var Vl={ID:"Scan ID",Name:"Name",type:"Scan Type"},Wl={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Xl={label:"Session"};function Yl(a,b,c){M.Sh(a,function(a){g(a);D(a,function(a){b(a)});c&&c()})}f=Ul.prototype;f.Jh=null;f.Ui=!1;
f.gC=function(a,b){null==this.Jh&&(this.Jh={});this.Jh[a]=b};f.rA=function(){var a=0;C(this.Jh,function(b,c){a+=this.Xz(c)}.bind(this));return a};f.Xz=function(a){return parseInt(this.Jh[a].Size,10)};f.JG=function(){return this.Jh};f.LG=function(){return this.Ui};f.hC=function(a){this.Ui=a};f.GG=function(){return this.Fn};f.zH=function(){return this.$h};f.EH=function(){return this.me};f.xC=function(a){this.me=a};f.rm=function(){C(Vl,function(a,b){null!=this.fo[b]&&(this.me[a]=this.fo[b])}.bind(this))};
f.Qo=function(a){Ul.d.Qo.call(this,a)};f.So=function(a){Ul.d.So.call(this,a);C(Wl,function(a,c){null!=this.tm[c]&&(this.me[a]=this.tm[c])}.bind(this))};f.Mo=function(a){Ul.d.Mo.call(this,a);C(Xl,function(a,c){null!=this.Ml[c]&&(this.me[a]=this.Ml[c])}.bind(this))};f.MG=function(){return this.Hn};f.mr=function(a){a=a[this.Gn];if(!Da(a,"/"))return this.$h+"!"+a};
f.Wi=function(a){if(this.Ui)a();else{var b=0,c=0,d="",e;M.Sh(this.$h+this.wq,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.mr(e))this.gC(d,e),this.Ci(d,this.Ol);a();this.Ui=!0}.bind(this))}};f.Ol=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.mk=function(){};function Zl(a,b,c,d){var e=new Tg(a);Yl(a+"/"+b.prototype.Hn,function(a){new b(a,e.Zh("experiments"),c)},d)}
f.g=function(){Ul.d.g.call(this);null!=this.Jh&&(sb(this.Jh),delete this.Jh);delete this.Ui;sb(this.me);delete this.me;null!=this.fo&&(sb(this.fo),delete this.fo);null!=this.wp&&(this.wp.g(),delete this.wp);delete this.Fn;delete this.$h};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Vl);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Wl);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Xl);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",Yl);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",Zl);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Ul.prototype.Ui);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Ul.prototype.gC);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Ul.prototype.rA);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Ul.prototype.Xz);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Ul.prototype.JG);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Ul.prototype.LG);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Ul.prototype.hC);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Ul.prototype.GG);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Ul.prototype.zH);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Ul.prototype.EH);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Ul.prototype.xC);v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Ul.prototype.rm);
v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Ul.prototype.Qo);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Ul.prototype.So);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Ul.prototype.Mo);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Ul.prototype.MG);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Ul.prototype.mr);v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Ul.prototype.Wi);
v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Ul.prototype.Ol);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Ul.prototype.mk);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Ul.prototype.g);function $l(a,b,c,d){this.files=a;this.iJ=b;this.Hw=c;this.hu=d}v("xiv.sampleData.Sample",$l);function am(){vc.call(this);this.vg=[]}w(am,vc);v("xiv.sampleData.SampleCollection",am);am.prototype.BH=function(){return this.vg};am.prototype.g=function(){am.d.g.call(this);D(this.vg,function(a){sb(a)});delete this.vg};v("xiv.sampleData.SampleCollection.Samples",am.vg);v("xiv.sampleData.SampleCollection.getSamples",am.BH);v("xiv.sampleData.SampleCollection.dispose",am.g);function bm(){am.call(this);this.vg.push(this.dw)}w(bm,am);v("xiv.sampleData.SlicerScenes",bm);
bm.prototype.dw=new $l("src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/oneView_brain_2.mrml;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm.nrrd.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/5%3a%20t1_mpr_1mm_p2_pos50-label.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/F.fcsv;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/brain.vtk;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/BrainMesh_Underside.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/Top.png".split(";"),{Name:"Example Slicer Scene",
Type:"Slicer Scene"},"src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function cm(){}v("xiv",cm);cm.MODE="live";v("xiv.SAMPLE_DATA_PATH","xiv/sample-data");v("xiv.SAMPLE_SCAN_PREFIX","xiv/sample-data/scans/");function dm(a,b,c){Ul.call(this,"Scans",a,b);this.me["Total Frames"]=0;c&&c(this)}w(dm,Ul);v("gxnat.vis.Scan",dm);var em=["dcm","dicom"];f=dm.prototype;f.Hn="scans";f.wq="/files";f.Gn="URI";
f.rm=function(){dm.d.rm.call(this);if(null!=this.Lk["parameters/orientation"]){var a;a:{switch(this.Lk["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.me.Orientation=a;this.orientation=this.me.Orientation}null!=this.Lk["parameters/acqType"]&&(this.me["Acq. Type"]=this.Lk["parameters/acqType"])};
f.Wi=function(a){this.Ui?a():M.Sh(this.wp.originalUrl,function(b){this.Lk=b.items[0].data_fields;this.rm();dm.d.Wi.call(this,function(){this.mk();a()}.bind(this))}.bind(this))};f.Ol=function(a){a=dm.d.Ol.call(this,a);if(null!=a){for(var b=0,c=em.length;b<c;b++)if(Ea(a,"."+em[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.Ci=function(a){this.Zr("Scans");if(0==this.Oc.length){var b=new Rl;b.oe("scan");b.Zr("scans");this.Oc.push(b)}0==this.Oc[0].wd.length&&this.Oc[0].yy(new Ql);this.Oc[0].wd[0].Ci(a,this.Ol);this.me["Total Frames"]=this.Oc[0].wd[0].Uf().length};f.mr=function(a){return Yg(this.Fn,a[this.Gn],"experiments")};f.mk=function(a){if(this.Oc&&this.Oc[0]){var b=this.Oc[0].wd[0].Uf().sort(M.ur);this.Uo(b[Math.floor(b.length/2)]+M.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){dm.d.g.call(this);null!=this.Lk&&sb(this.Lk);delete this.Lk};v("gxnat.vis.Scan.acceptableFileTypes",em);v("gxnat.vis.Scan.prototype.folderQuerySuffix",dm.prototype.Hn);v("gxnat.vis.Scan.prototype.fileQuerySuffix",dm.prototype.wq);v("gxnat.vis.Scan.prototype.fileContentsKey",dm.prototype.Gn);v("gxnat.vis.Scan.prototype.setViewableMetadata",dm.prototype.rm);v("gxnat.vis.Scan.prototype.getFileList",dm.prototype.Wi);v("gxnat.vis.Scan.prototype.fileFilter",dm.prototype.Ol);
v("gxnat.vis.Scan.prototype.addFiles",dm.prototype.Ci);v("gxnat.vis.Scan.prototype.makeFileUrl",dm.prototype.mr);v("gxnat.vis.Scan.prototype.getThumbnailImage",dm.prototype.mk);v("gxnat.vis.Scan.prototype.dispose",dm.prototype.g);function fm(a,b,c){Zc.call(this);this.target=a;this.handle=b||a;this.ir=c||new vh(NaN,NaN,NaN,NaN);this.qa=Ih(a);this.uc=new cj(this);yc(this,ua(zc,this.uc));F(this.handle,["touchstart","mousedown"],this.Zo,!1,this)}w(fm,Zc);var gm=E||gc&&oc("1.9.3");f=fm.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.zw=0;f.Aw=0;f.Eh=0;f.Fd=0;f.Hc=!0;f.Pi=!1;f.NA=0;f.sr=0;f.yI=!1;f.Tk=!1;f.Ri=function(a){this.Tk=a};f.ab=function(){return this.uc};function hm(a,b){a.ir=b||new vh(NaN,NaN,NaN,NaN)}
f.uC=function(a){this.Ur=a};f.pc=function(a){this.Hc=a};f.f=function(){fm.d.f.call(this);Tc(this.handle,["touchstart","mousedown"],this.Zo,!1,this);this.uc.gg();gm&&this.qa.releaseCapture();this.handle=this.target=null};function im(a){ca(a.Zg)||(a.Zg=Ii(a.target));return a.Zg}
f.Zo=function(a){var b="mousedown"==a.type;if(!this.Hc||this.Pi||b&&!Ic(a))this.dispatchEvent("earlycancel");else{jm(a);if(0==this.NA)if(this.dispatchEvent(new km("start",this,a.clientX,a.clientY)))this.Pi=!0,a.preventDefault();else return;else a.preventDefault();var b=this.qa,c=b.documentElement,d=!gm;this.uc.A(b,["touchmove","mousemove"],this.qI,d);this.uc.A(b,["touchend","mouseup"],this.Si,d);gm?(c.setCapture(!1),this.uc.A(c,"losecapture",this.Si)):this.uc.A(Th(b),"blur",this.Si);E&&this.yI&&this.uc.A(b,
"dragstart",Ec);this.Ur&&this.uc.A(this.Ur,"scroll",this.lm,d);this.clientX=this.zw=a.clientX;this.clientY=this.Aw=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Eh=this.Tk?Rj(this.target):this.target.offsetLeft;this.Fd=this.target.offsetTop;this.Qv=ui(Gh(this.qa));this.sr=wa()}};
f.Si=function(a,b){this.uc.gg();gm&&this.qa.releaseCapture();if(this.Pi){jm(a);this.Pi=!1;var c=lm(this,this.Eh),d=mm(this,this.Fd);this.dispatchEvent(new km("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function jm(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.ra(a.Ic.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.ra(a.Ic.changedTouches[0],a.currentTarget)}
f.qI=function(a){if(this.Hc){jm(a);var b=(this.Tk&&im(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Pi){var d=this.zw-this.clientX,e=this.Aw-this.clientY;if(d*d+e*e>this.NA)if(this.dispatchEvent(new km("start",this,a.clientX,a.clientY)))this.Pi=!0;else{this.dk||this.Si(a);return}}c=nm(this,b,c);b=c.x;c=c.y;this.Pi&&this.dispatchEvent(new km("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(om(this,a,b,c),a.preventDefault())}};function nm(a,b,c){var d=ui(Gh(a.qa));b+=d.x-a.Qv.x;c+=d.y-a.Qv.y;a.Qv=d;a.Eh+=b;a.Fd+=c;b=lm(a,a.Eh);a=mm(a,a.Fd);return new qh(b,a)}f.lm=function(a){var b=nm(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;om(this,a,b.x,b.y)};function om(a,b,c,d){a.Ut(c,d);a.dispatchEvent(new km("drag",a,b.clientX,b.clientY,0,c,d))}
function lm(a,b){var c=a.ir,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function mm(a,b){var c=a.ir,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.Ut=function(a,b){this.Tk&&im(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.Zf=function(){return this.Pi};
function km(a,b,c,d,e,h,k,l){Cc.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(h)?h:b.Eh;this.top=ca(k)?k:b.Fd;this.bu=b;this.cG=!!l}w(km,Cc);yb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function pm(){this.Xv="";this.sE=qm;this.Az=null}pm.prototype.Uz=function(){return this.Az};pm.prototype.toString=function(){return"SafeHtml{"+this.Xv+"}"};function rm(a){if(a instanceof pm&&a.constructor===pm&&a.sE===qm)return a.Xv;eb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}yb("action","cite","data","formaction","href","manifest","poster","src");yb("link","script","style");var qm={};function sm(a,b){var c=new pm;c.Xv=a;c.Az=b;return c}var tm=sm("",0);function um(a,b){Zc.call(this);this.Xc=new cj(this);this.fw(a||null);b&&(this.Bm=b)}w(um,Zc);f=um.prototype;f.o=null;f.zF=!0;f.Sy=null;f.Ty=null;f.hm=!1;f.qL=!1;f.Ou=-1;f.vI=!1;f.eG=!0;f.Bm="toggle_display";f.a=function(){return this.o};f.fw=function(a){if(this.hm)throw Error("Can not change this state of the popup while showing.");this.o=a};f.BC=function(a,b){this.sm=a;this.Zl=b};f.ab=function(){return this.Xc};f.sa=function(){return this.hm};
f.aa=function(a){this.sm&&this.sm.stop();this.Zl&&this.Zl.stop();a?this.rw():this.$l()};f.le=ea;
f.rw=function(){if(!this.hm&&this.rv()){if(!this.o)throw Error("Caller must call setElement before trying to show the popup");this.le();var a=Ih(this.o);this.vI&&this.Xc.A(a,"keydown",this.CJ,!0);if(this.zF)if(this.Xc.A(a,"mousedown",this.yB,!0),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.Xc.A(a,"mousedown",this.yB,!0);this.Xc.A(a,"deactivate",this.xB)}else this.Xc.A(a,"blur",
this.xB);"toggle_display"==this.Bm?(this.o.style.visibility="visible",Ti(this.o,!0)):"move_offscreen"==this.Bm&&this.le();this.hm=!0;this.Ou=wa();this.sm?(Sc(this.sm,"end",this.DB,!1,this),this.sm.play()):this.DB()}};f.$l=function(a){if(!this.hm||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.Xc&&this.Xc.gg();this.hm=!1;wa();this.Zl?(Sc(this.Zl,"end",ua(this.hz,a),!1,this),this.Zl.play()):this.hz(a);return!0};
f.hz=function(a){"toggle_display"==this.Bm?this.qL?Xf(this.LA,0,this):this.LA():"move_offscreen"==this.Bm&&(this.o.style.top="-10000px");this.zv(a)};f.LA=function(){this.o.style.visibility="hidden";Ti(this.o,!1)};f.rv=function(){return this.dispatchEvent("beforeshow")};f.DB=function(){this.dispatchEvent("show")};f.zv=function(a){this.dispatchEvent({type:"hide",target:a})};f.yB=function(a){a=a.target;ei(this.o,a)||vm(this,a)||this.Ty&&!ei(this.Ty,a)||150>wa()-this.Ou||this.$l(a)};
f.CJ=function(a){27==a.keyCode&&this.$l(a.target)&&(a.preventDefault(),a.stopPropagation())};f.xB=function(a){if(this.eG){var b=Ih(this.o);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||ei(this.o,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>wa()-this.Ou||this.$l()}};function vm(a,b){return Db(a.Sy||[],function(a){return b===a||ei(a,b)})}f.f=function(){um.d.f.call(this);this.Xc.g();zc(this.sm);zc(this.Zl);delete this.o;delete this.Xc;delete this.Sy};function wm(a){Zc.call(this);this.o=a;a=E?"focusout":"blur";this.VI=F(this.o,E?"focusin":"focus",this,!E);this.WI=F(this.o,a,this,!E)}w(wm,Zc);wm.prototype.handleEvent=function(a){var b=new Gc(a.Ic);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};wm.prototype.f=function(){wm.d.f.call(this);Uc(this.VI);Uc(this.WI);delete this.o};function xm(a,b){gj.call(this,b);this.TL=!!a;this.ko=null}w(xm,gj);f=xm.prototype;f.fu=null;f.Ac=!1;f.Ee=null;f.kd=null;f.mg=null;f.wt=!1;f.W=function(){return"goog-modalpopup"};f.Kh=function(){return this.Ee};f.w=function(){xm.d.w.call(this);var a=this.a(),b=Ia(this.W()).split(" ");cl(a,b);ji(a,!0);Ti(a,!1);ym(this);zm(this)};
function ym(a){if(a.TL&&!a.kd){var b;b=a.N().w("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.kd=b;a.kd.className=a.W()+"-bg";Ti(a.kd,!1);Si(a.kd,0)}a.Ee||(a.Ee=a.N().w("div",a.W()+"-bg"),Ti(a.Ee,!1))}function zm(a){a.mg||(a.mg=a.N().createElement("span"),Ti(a.mg,!1),ji(a.mg,!0),a.mg.style.position="absolute")}f.WB=function(){this.wt=!1};f.Fe=function(a){return!!a&&"DIV"==a.tagName};
f.$d=function(a){xm.d.$d.call(this,a);a=Ia(this.W()).split(" ");cl(this.a(),a);ym(this);zm(this);Ti(this.a(),!1)};f.$a=function(){this.kd&&Zh(this.kd,this.a());Zh(this.Ee,this.a());xm.d.$a.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.mg,a.nextSibling);this.fu=new wm(ri(this.N()));this.ab().A(this.fu,"focusin",this.HJ);Am(this,!1)};f.vc=function(){this.sa()&&this.aa(!1);zc(this.fu);xm.d.vc.call(this);R(this.kd);R(this.Ee);R(this.mg)};
f.aa=function(a){a!=this.Ac&&(this.Gk&&this.Gk.stop(),this.Bl&&this.Bl.stop(),this.Fk&&this.Fk.stop(),this.Al&&this.Al.stop(),this.fa&&Am(this,a),a?this.rw():this.$l())};function Am(a,b){if(b){a.Xl||(a.Xl=[]);for(var c=a.N(),c=c.iu(c.qa.body),d=0;d<c.length;d++){var e=c[d];e==a.o||Zk(e,"hidden")||(Yk(e,"hidden",!0),a.Xl.push(e))}}else if(a.Xl){for(d=0;d<a.Xl.length;d++)a.Xl[d].removeAttribute("aria-hidden");a.Xl=null}}f.BC=function(a,b,c,d){this.Gk=a;this.Fk=b;this.Bl=c;this.Al=d};
f.rw=function(){if(this.dispatchEvent("beforeshow")){try{this.ko=ri(this.N()).activeElement}catch(a){}this.bw();this.le();this.ab().A(ti(this.N()),"resize",this.bw);Bm(this,!0);this.focus();this.Ac=!0;this.Gk&&this.Bl?(Sc(this.Gk,"end",this.Fr,!1,this),this.Bl.play(),this.Gk.play()):this.Fr()}};
f.$l=function(){if(this.dispatchEvent("beforehide")){this.ab().ob(ti(this.N()),"resize",this.bw);this.Ac=!1;this.Fk&&this.Al?(Sc(this.Fk,"end",this.wo,!1,this),this.Al.play(),this.Fk.play()):this.wo();try{var a=ri(this.N()).body,b=ri(this.N()).activeElement||a;this.ko&&b==a&&this.ko!=a&&this.ko.focus()}catch(c){}this.ko=null}};function Bm(a,b){a.kd&&Ti(a.kd,b);a.Ee&&Ti(a.Ee,b);Ti(a.a(),b);Ti(a.mg,b)}f.Fr=function(){this.dispatchEvent("show")};f.wo=function(){Bm(this,!1);this.dispatchEvent("hide")};
f.sa=function(){return this.Ac};f.focus=function(){this.Lz()};f.bw=function(){this.kd&&Ti(this.kd,!1);this.Ee&&Ti(this.Ee,!1);var a=ri(this.N()),b=Rh(Th(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.kd&&(Ti(this.kd,!0),Ni(this.kd,c,a));this.Ee&&(Ti(this.Ee,!0),Ni(this.Ee,c,a))};
f.le=function(){var a=ri(this.N()),b=Th(a)||window;if("fixed"==zi(this.a()))var c=a=0;else c=ui(this.N()),a=c.x,c=c.y;var d=T(this.a()),b=Rh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);Ai(this.a(),a,c);Ai(this.mg,a,c)};f.HJ=function(a){this.wt?this.WB():a.target==this.mg&&Xf(this.Lz,0,this)};f.Lz=function(){try{E&&ri(this.N()).body.focus(),this.a().focus()}catch(a){}};
f.f=function(){zc(this.Gk);this.Gk=null;zc(this.Fk);this.Fk=null;zc(this.Bl);this.Bl=null;zc(this.Al);this.Al=null;xm.d.f.call(this)};function Cm(a,b,c){xm.call(this,b,c);this.Dd=a||"modal-dialog";this.$=Dm(Dm(new Em,Fm,!0),Gm,!1,!0)}w(Cm,xm);f=Cm.prototype;f.Fz=!0;f.Du=!0;f.dv=!0;f.sq=!0;f.$p=.5;f.Ib="";f.Gc=null;f.Oa=null;f.Zt=!1;f.sd=null;f.Md=null;f.ns=null;f.qe=null;f.Qf=null;f.Uc=null;f.Wv="dialog";f.W=function(){return this.Dd};f.oe=function(a){this.Ib=a;this.Md&&gi(this.Md,a)};f.Gd=function(){return this.Ib};f.Nk=function(a){this.Gc=a=sm(a,null);this.Qf&&(this.Qf.innerHTML=rm(a))};
f.getContent=function(){return null!=this.Gc?rm(this.Gc):""};f.Xi=function(){return this.Wv};f.Ia=function(){this.a()||this.n();return this.Qf};f.qA=function(){this.a()||this.n();return this.sd};f.Kh=function(){this.a()||this.n();return Cm.d.Kh.call(this)};function Hm(a,b){a.$p=b;if(a.a()){var c=a.Kh();c&&Si(c,a.$p)}}function Im(a,b){b!=a.dv&&Jm(a,b)}function Jm(a,b){a.dv=b;if(a.fa){var c=a.N(),d=a.Kh(),e=a.kd;b?(e&&c.Iu(e,a.a()),c.Iu(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.sa()&&Am(a,b)}
f.bs=function(a){this.sq=a;this.Lo(a&&this.fa)};f.Lo=function(a){var b=Ia(this.Dd+"-title-draggable").split(" ");this.a()&&(a?cl(this.sd,b):el(this.sd,b));a&&!this.Oa?(this.Oa=new fm(this.a(),this.sd),cl(this.sd,b),F(this.Oa,"start",this.cs,!1,this)):!a&&this.Oa&&(this.Oa.g(),this.Oa=null)};
f.w=function(){Cm.d.w.call(this);var a=this.a(),b=this.N();this.sd=b.w("div",this.Dd+"-title",this.Md=b.w("span",{className:this.Dd+"-title-text",id:jj(this)},this.Ib),this.qe=b.w("span",this.Dd+"-title-close"));Xh(a,this.sd,this.Qf=b.w("div",this.Dd+"-content"),this.Uc=b.w("div",this.Dd+"-buttons"));Xk(this.Md,"heading");Xk(this.qe,"button");ji(this.qe,!0);Yk(this.qe,"label",Km);this.ns=this.Md.id;Xk(a,this.Xi());Yk(a,"labelledby",this.ns||"");this.Gc&&(this.Qf.innerHTML=rm(this.Gc));Ti(this.qe,
this.Du);this.$&&(a=this.$,a.o=this.Uc,a.n());Ti(this.Uc,!!this.$);Hm(this,this.$p)};
f.$d=function(a){Cm.d.$d.call(this,a);a=this.a();var b=this.Dd+"-content";this.Qf=Kh(null,b,a)[0];this.Qf||(this.Qf=this.N().w("div",b),this.Gc&&(this.Qf.innerHTML=rm(this.Gc)),a.appendChild(this.Qf));var b=this.Dd+"-title",c=this.Dd+"-title-text",d=this.Dd+"-title-close";(this.sd=Kh(null,b,a)[0])?(this.Md=Kh(null,c,this.sd)[0],this.qe=Kh(null,d,this.sd)[0]):(this.sd=this.N().w("div",b),a.insertBefore(this.sd,this.Qf));this.Md?(this.Ib=mi(this.Md),this.Md.id||(this.Md.id=jj(this))):(this.Md=Q("span",
{className:c,id:jj(this)}),this.sd.appendChild(this.Md));this.ns=this.Md.id;Yk(a,"labelledby",this.ns||"");this.qe||(this.qe=this.N().w("span",d),this.sd.appendChild(this.qe));Ti(this.qe,this.Du);b=this.Dd+"-buttons";(this.Uc=Kh(null,b,a)[0])?(this.$=new Em(this.N()),this.$.yb(this.Uc)):(this.Uc=this.N().w("div",b),a.appendChild(this.Uc),this.$&&(a=this.$,a.o=this.Uc,a.n()),Ti(this.Uc,!!this.$));Hm(this,this.$p)};
f.$a=function(){Cm.d.$a.call(this);this.ab().A(this.a(),"keydown",this.Xh).A(this.a(),"keypress",this.Xh);this.ab().A(this.Uc,"click",this.zJ);this.Lo(this.sq);this.ab().A(this.qe,"click",this.qK);var a=this.a();Xk(a,this.Xi());""!==this.Md.id&&Yk(a,"labelledby",this.Md.id);this.dv||Jm(this,!1)};f.vc=function(){this.sa()&&this.aa(!1);this.Lo(!1);Cm.d.vc.call(this)};f.aa=function(a){a!=this.sa()&&(this.fa||this.n(),Cm.d.aa.call(this,a))};f.Fr=function(){Cm.d.Fr.call(this);this.dispatchEvent(Lm)};
f.wo=function(){Cm.d.wo.call(this);this.dispatchEvent(Mm);this.Zt&&this.g()};f.cs=function(){var a=ri(this.N()),b=Rh(Th(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=T(this.a());"fixed"==zi(this.a())?hm(this.Oa,new vh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):hm(this.Oa,new vh(0,0,c-d.width,a-d.height))};f.qK=function(){Nm(this)};
function Nm(a){if(a.Du){var b=a.$,c=b&&b.Dt;c?(b=b.get(c),a.dispatchEvent(new Om(c,b))&&a.aa(!1)):a.aa(!1)}}f.f=function(){this.Uc=this.qe=null;Cm.d.f.call(this)};function Pm(a,b){a.$=b;if(a.Uc){if(a.$){var c=a.$;c.o=a.Uc;c.n()}else a.Uc.innerHTML=rm(tm);Ti(a.Uc,!!a.$)}}f.zJ=function(a){a:{for(a=a.target;null!=a&&a!=this.Uc;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.$.get(a);this.dispatchEvent(new Om(a,b))&&this.aa(!1)}};
f.Xh=function(a){var b=!1,c=!1,d=this.$,e=a.target;if("keydown"==a.type)if(this.Fz&&27==a.keyCode){var h=d&&d.Dt,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new Om(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.wt=!0;try{this.mg.focus()}catch(k){}Xf(this.WB,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.qe)Nm(this);else if(d){var l=d.Vt,n;if(n=l)a:{n=d.o.getElementsByTagName("BUTTON");for(var p=
0,m;m=n[p];p++)if(m.name==l||m.id==l){n=m;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new Om(h,String(d.get(h)))))}else e==this.qe&&32==a.keyCode&&Nm(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.aa(!1)};function Om(a,b){this.type=Qm;this.key=a;this.caption=b}w(Om,Cc);var Qm="dialogselect",Mm="afterhide",Lm="aftershow";function Em(a){this.lb=a||Gh();hd.call(this)}var Rm,Sm;
w(Em,hd);f=Em.prototype;f.Dd="goog-buttonset";f.Vt=null;f.o=null;f.Dt=null;f.set=function(a,b,c,d){hd.prototype.set.call(this,a,b);c&&(this.Vt=a);d&&(this.Dt=a);return this};function Dm(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.n=function(){if(this.o){this.o.innerHTML=rm(tm);var a=Gh(this.o);this.forEach(function(b,c){var d=a.w("button",{name:c},b);c==this.Vt&&(d.className=this.Dd+"-default");this.o.appendChild(d)},this)}};
f.yb=function(a){if(a&&1==a.nodeType){this.o=a;a=this.o.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=mi(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==Tm);h&&bl(c,this.Dd+"-default")}}};f.a=function(){return this.o};f.N=function(){return this.lb};var Tm="cancel",Km="Close",Fm={key:"ok",caption:"OK"},Gm={key:Tm,caption:"Cancel"},Um={key:"yes",caption:"Yes"},Vm={key:"no",caption:"No"},Wm={key:"save",caption:"Save"},Xm={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Rm=Dm(new Em,Fm,!0,!0),Dm(Dm(new Em,Fm,!0),Gm,!1,!0),Sm=Dm(Dm(new Em,Um,!0),Vm,!1,!0),Dm(Dm(Dm(new Em,Um),Vm,!0),Gm,!1,!0),Dm(Dm(Dm(new Em,Xm),Wm),Gm,!0,!0));function Ym(){Cm.call(this);this.Fz=!1}w(Ym,Cm);v("nrg.ui.Dialog",Ym);Ym.ID_PREFIX="nrg.ui.Dialog";Ym.CSS={xx:"nrg-ui-dialog-overlay",sp:"nrg-ui-dialog-background",wj:"nrg-ui-dialog-closebutton",zD:"nrg-ui-dialog-closebutton-image",yE:"nrg-ui-dialog-subtext",al:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",lh:"nrg-ui-dialog-content",vD:"nrg-ui-dialog-buttons"};f=Ym.prototype;f.sq=!0;f.Oa=null;f.Hk=null;
f.kw=function(a){this.ym.style.visibility="hidden";this.Gg.style.visibility="hidden";null!=a&&rk(this.a(),a,null,null,function(){this.ym.style.visibility="visible";this.Gg.style.visibility="visible"}.bind(this),function(){this.ym.style.visibility="hidden";this.Gg.style.visibility="hidden"}.bind(this))};f.wy=function(a){N(this.ym,a)};f.lF=function(a){N(this.Gc,a)};f.jF=function(a){N(this.Gg.parentNode,a)};f.kF=function(a){N(this.Gg,a)};f.hy=function(a){N(this.gq,a)};f.iF=function(a){N(this.Bt,a)};
function Zm(a){a.gq=Mh("modal-dialog-title-close",a.a())[0];N(a.gq,Ym.CSS.wj);a.Gg=Q("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":Ym.CSS.zD});a.Gg.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.gq.appendChild(a.Gg);F(a.Gg,"click",function(a){this.aa(!this.sa());this.dispatchEvent({type:"f"});a.stopPropagation()}.bind(a))}f.wF=function(){var a=this.a(),b=Zj(a,600),c=Yj(a,600),d=Zj(a,600),a=Yj(a,600);this.BC(b,c,d,a)};
f.tr=function(a,b,c,d){var e=this.a(),h=T(e.parentNode),k=T(e);c=null!=c?c:0;"left"==a?e.style.left=0+c+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=0+(null!=d?d:0)+"px")};f.Zd=function(){var a=this.a(),b=T(this.a().parentNode);if(null!=this.Kh()){var c=this.Kh();0==c.opacity?R(c):pk(c,{width:b.width,height:b.height,"z-index":199})}var c=T(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);Ai(a,d,e)};
f.bs=function(a){this.sq=a;this.Lo(a&&this.fa)};f.Lo=function(a){var b=Ia(this.W()+"-title-draggable").split(" "),c=this.qA();this.a()&&(a?cl(c,b):el(c,b));a&&!this.Oa?(this.Oa=new fm(this.a(),this.sd),cl(c,b),F(this.Oa,"start",this.cs,!1,this)):!a&&this.Oa&&(this.Oa.g(),this.Oa=null)};f.cD=function(){this.cs()};f.Vz=function(){return null!=this.Oa?this.Oa.ir:null};
f.cs=function(){var a=ri(this.N()),b=Th(a)||window;if(null!=this.a()){var a=T(this.a().parentNode),b=Rh(b||window),c=T(this.a());"fixed"==zi(this.a())?hm(this.Oa,new vh(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):hm(this.Oa,new vh(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))}};f.jy=function(a){var b=Q("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":Ym.CSS.ki});null==this.Xn&&(this.Xn=[]);this.Xn.push(b);this.Ia().appendChild(b);null!=a&&(b.src=a);return b};
f.Uj=function(a){var b=Q("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":Ym.CSS.al},a);null==this.dh&&(this.dh=[]);this.dh.push(b);b.innerHTML=a||"";this.Ia().appendChild(b);return b};f.pt=function(a){var b=Q("div",{id:"ErrorSub_"+B(),"class":Ym.CSS.yE});b.innerHTML=a;this.Ia().appendChild(b);return b};f.pH=function(){return this.a()};
f.n=function(a){if(!this.fa)Ym.d.n.call(this,a);else if(null!=a&&this.a().parentNode!=a){Xh(a,this.a());return}N(this.a(),"nrg-ui-dialog");this.ym=Mh("modal-dialog-title",this.a())[0];this.Gc=Mh("modal-dialog-content",this.a())[0];this.Bt=Mh("modal-dialog-buttons",this.a())[0];this.Gg=null;Zm(this);N(this.Bt,Ym.CSS.vD);N(this.ym,Ym.CSS.TITLE);N(this.Gc,Ym.CSS.lh);Ym.d.bs.call(this,!1);this.bs(!0)};
f.aa=function(a){null!=this.a()&&(null==this.Hk&&(this.Hk=Ci(this.a())),this.sa()&&!1==a?(this.Hk=Ci(this.a()),Ym.d.aa.call(this,a)):this.sa()||!0!=a||(Ym.d.aa.call(this,a),Ai(this.a(),this.Hk)))};
f.cw=function(){var a=this.a(),b=this.Ia(),c=0,d=0,e=0,h=0,k=a.style.overflow;a.style.overflow="visible";null!=this.dh&&D(this.dh,function(a){e=a.scrollWidth;h=a.scrollHeight;c=e>c?e:c;d=h>d?h:d;Ni(a,e,h)});null!=k?a.style.overflow=k:a.style.removeProperty("overflow");Ni(b,c,d);b=T(b);Ni(a,b.width+20,b.height+20)};f.LH=function(){return this.dh};
f.f=function(){Ym.d.f.call(this);delete this.Bt;delete this.ym;delete this.Gc;delete this.Gg;delete this.gq;null!=this.GB&&(R(this.GB),delete this.GB);null!=this.dh&&(D(this.dh,function(a){R(a);delete a}),delete this.dh);null!=this.Xn&&(D(this.Xn,function(a){R(a);delete a}),delete this.Xn);null!=this.Hk&&(sb(this.Hk),delete this.Hk)};v("nrg.ui.Dialog.ID_PREFIX",Ym.ID_PREFIX);v("nrg.ui.Dialog.EventType",{gN:"d",CLOSED:"e",kM:"f"});v("nrg.ui.Dialog.prototype.setMouseoverClass",Ym.prototype.kw);
v("nrg.ui.Dialog.prototype.addTitleClass",Ym.prototype.wy);v("nrg.ui.Dialog.prototype.addContentClass",Ym.prototype.lF);v("nrg.ui.Dialog.prototype.addCloseButtonClass",Ym.prototype.jF);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",Ym.prototype.kF);v("nrg.ui.Dialog.prototype.addCloseSpanClass",Ym.prototype.hy);v("nrg.ui.Dialog.prototype.addButtonsClass",Ym.prototype.iF);v("nrg.ui.Dialog.prototype.applyFadeTransitions",Ym.prototype.wF);v("nrg.ui.Dialog.prototype.moveToCorner",Ym.prototype.tr);
v("nrg.ui.Dialog.prototype.center",Ym.prototype.Zd);v("nrg.ui.Dialog.prototype.setDraggable",Ym.prototype.bs);v("nrg.ui.Dialog.prototype.updateLimits",Ym.prototype.cD);v("nrg.ui.Dialog.prototype.addImage",Ym.prototype.jy);v("nrg.ui.Dialog.prototype.addText",Ym.prototype.Uj);v("nrg.ui.Dialog.prototype.addSubText",Ym.prototype.pt);v("nrg.ui.Dialog.prototype.getOverlay",Ym.prototype.pH);v("nrg.ui.Dialog.prototype.render",Ym.prototype.n);v("nrg.ui.Dialog.prototype.setVisible",Ym.prototype.aa);
v("nrg.ui.Dialog.prototype.getTextElements",Ym.prototype.LH);v("nrg.ui.Dialog.prototype.resizeToContents",Ym.prototype.cw);v("nrg.ui.Dialog.prototype.getDraggerLimits",Ym.prototype.Vz);v("nrg.ui.Dialog.prototype.disposeInternal",Ym.prototype.f);function $m(){Ym.call(this);Pm(this,null)}w($m,Ym);v("nrg.ui.ErrorDialog",$m);$m.ID_PREFIX="nrg.ui.ErrorDialog";$m.CSS={xx:"nrg-ui-errordialog",ki:"nrg-ui-errordialog-image",al:"nrg-ui-errordialog-text"};$m.prototype.Kl=null;$m.prototype.Uj=function(a){$m.d.Uj.call(this,a);a=this.dh;N(a[a.length-1],$m.CSS.al)};$m.prototype.n=function(a){$m.d.n.call(this,a);N(this.a(),$m.CSS.xx);null==this.Kl&&(this.Kl=this.jy(serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png"),N(this.Kl,$m.CSS.ki),this.Zd())};
$m.prototype.f=function(){$m.d.f.call(this);null!=this.Kl.parentNode&&R(this.Kl);delete this.Kl};v("nrg.ui.ErrorDialog.ID_PREFIX",$m.ID_PREFIX);v("nrg.ui.ErrorDialog.CSS",$m.CSS);v("nrg.ui.ErrorDialog.prototype.addText",$m.prototype.Uj);v("nrg.ui.ErrorDialog.prototype.disposeInternal",$m.prototype.f);function cn(a,b,c,d){ma(this);this.url=a;this.document=b;this.files=d}w(cn,Al);v("gxnat.slicerNode.Mrml",cn);function dn(a,b){ma(this);this.file=a;this.ke=b}w(dn,Al);v("gxnat.slicerNode.Displayable",dn);function en(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function fn(a,b,c){ma(this);this.position=a;this.SL=b;this.focus=c}w(fn,Al);v("gxnat.slicerNode.Camera",fn);function gn(a,b,c,d,e,h){ma(this);this.position=a;this.color=b;this.name=h}w(gn,Al);v("gxnat.slicerNode.Annotations",gn);function hn(){ma(this)}w(hn,Al);v("gxnat.slicerNode.Layout",hn);M.F={};v("gxnat.slicerUtils",M.F);M.F.gx="/scripts/viewer/xiv/vis/GenericColorTable.txt";M.F.Iz=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ea(a[c],".mrml")&&b.push(a[c]);return b};M.F.su=function(a,b){M.get(a,function(a){b(new en(a))},"text")};M.F.jA=function(a,b,c){a=g(a)?a:[a];var d=M.F.Iz(a),e=[],h=0;D(d,function(b){M.F.su(b,function(l){h++;e.push(new cn(b,l,0,a));h==d.length&&c(e)})})};
M.F.oz=function(a,b,c){M.F.Nz(a,b,function(b){c(new Nl(a,M.F.Rz(a),M.F.Oz(a),M.F.eA(a),b,M.F.xA(a),M.F.iA(a),null))})};M.F.lA=function(a,b){var c=[],d=[],e=0;D(a,function(a){c=M.F.mA(a.document);D(c,function(k){M.F.oz(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};M.F.Wz=function(a,b){a=r(a)?M.F.su(a):a;var c=[];D(a.getElementsByTagName(b),function(a){c.push(a)});return c};M.F.mA=function(a){return M.F.Wz(a,"SceneView")};
M.F.Rz=function(a){var b=a.getElementsByTagName("Camera").length-1,c=a.getElementsByTagName("Camera")[b].getAttribute("position"),d=a.getElementsByTagName("Camera")[b].getAttribute("viewUp");a=a.getElementsByTagName("Camera")[b].getAttribute("focalPoint");return new fn(zl(c),zl(d),zl(a))};M.F.pA=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
M.F.Oz=function(a){return new Ml(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};M.F.eA=function(a){return new hn(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
M.F.jm=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};M.F.KG=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Xa(b,"!",Nk(c),"/",Nk(a))};
M.F.Nz=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,p,m="rgb(255,0,0)",q="",t="",s="",z=0,y,H;0==a.length?c(null):(D(a,function(a){k.push(M.F.jm(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):D(k,function(a){M.get(a,function(a){l++;D(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){p=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
s=n[11];m=[1,0,0];t=q="";z=0;for(len=e.length;z<len;z++)if(y=e[z],q=y.getAttribute("id"),q===n[0].replace("_","")){t=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(H=d[z],q=H.getAttribute("id"),q===t){m=zl(H.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new gn(p,m,0,0,0,s))}});l==k.length&&c(h)},"text")}))};
M.F.nu=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;D(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new dn(h.getAttribute("fileName"),a));break}});return d};M.F.HG=function(){return null};
M.F.xA=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=M.F.nu(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";D(c,function(a){k=a.ke.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(D(d,function(b){b.getAttribute("id")==k&&(a.Bn=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.Ht=serverRoot+M.F.gx:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";D(e,function(a){l=a.ke.getAttribute("attributes").split(";");D(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],D(h,function(b){b.ke.getAttribute("id")==refVol&&(b.Ug=a)}.bind(this)))}.bind(this))});D(h,function(c){c.fg=new Kl(a,c.ke,b);c.Ug&&(c.fg.Ug=c.Ug,delete c.Ug)});return h};M.F.iA=function(a){var b=M.F.nu(a,"Model","ModelStorage");D(b,function(b){b.fg=new Cl(a,b.ke)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",M.F.gx);
v("gxnat.slicerUtils.extractMrmls",M.F.Iz);v("gxnat.slicerUtils.getMrmlAsXml",M.F.su);v("gxnat.slicerUtils.getMrmlNodes",M.F.jA);v("gxnat.slicerUtils.createSceneViewProperties",M.F.oz);v("gxnat.slicerUtils.getSceneViewNodes",M.F.lA);v("gxnat.slicerUtils.getElementsFromMrml",M.F.Wz);v("gxnat.slicerUtils.getSceneViewsFromMrml",M.F.mA);v("gxnat.slicerUtils.getCameraFromSceneView",M.F.Rz);v("gxnat.slicerUtils.getThumbnail",M.F.pA);v("gxnat.slicerUtils.mrmlColorToRgb",M.F.oP);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",M.F.Oz);v("gxnat.slicerUtils.getLayoutFromSceneView",M.F.eA);v("gxnat.slicerUtils.matchFileToSet",M.F.jm);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",M.F.KG);v("gxnat.slicerUtils.getAnnotations",M.F.Nz);v("gxnat.slicerUtils.getDisplayables",M.F.nu);v("gxnat.slicerUtils.getFibers",M.F.HG);v("gxnat.slicerUtils.getVolumes",M.F.xA);v("gxnat.slicerUtils.getMeshes",M.F.iA);function jn(a,b,c){this.Vh=[];Ul.call(this,"Slicer Scenes",a,b);c&&c(this)}w(jn,Ul);v("gxnat.vis.Slicer",jn);var kn=["jpeg","jpg","png","gif"];f=jn.prototype;f.Hn="resources/Slicer/files";f.wq="?listContents=true";f.Gn="File Name";f.Wi=function(a){this.Ui?ln(this,a):dm.d.Wi.call(this,function(){this.mk(function(){this.rm();ln(this,a)}.bind(this))}.bind(this))};function ln(a,b){M.F.jA(a.Vh,0,function(a){M.F.lA(a,function(d){this.jz(d,a,b)}.bind(this))}.bind(a))}
f.jz=function(a,b,c){this.oJ=b;this.cL=a;var d,e,h,k;D(this.cL,function(a){d=[a.XL||[],a.hJ||[],a.kG||[]];e=[];D(d,function(a){D(a,function(a){h=M.F.jm(Nk(a.file),this.Vh);a.fg instanceof Kl&&a.fg.Ug&&(a.fg.labelMapFile=M.F.jm(a.fg.Ug.file,this.Vh),null!=a.fg.Ug.Ht&&null==M.F.jm(a.fg.Ug.Ht,this.Vh)&&(a.fg.colorTableFile=a.fg.Ug.Ht));e.push(new Ql(h,a.fg))}.bind(this))}.bind(this));k=new Rl(e);k.Uo(M.F.jm(M.F.pA(a.element,this.oJ[0].document),this.Vh));k.oe(a.element.getAttribute("name"));k.nw(a);
this.Oc.push(k)}.bind(this));c&&c(this)};f.mk=function(a){var b="",c=0,d=this.Vh.length;for(this.thumbnailFiles=[];c<d;c++)b=sj(this.Vh[c]),-1!=kn.indexOf(b)&&this.thumbnailFiles.push(this.Vh[c]);D(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=qj(rj(this.thumbnailFiles[c]))){this.Uo(this.thumbnailFiles[c]);break}a&&a(this)};f.Ci=function(a){g(a)||(a=[a]);D(a,function(a){this.Vh.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",kn);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",jn.prototype.Hn);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",jn.prototype.wq);v("gxnat.vis.Slicer.prototype.fileContentsKey",jn.prototype.Gn);v("gxnat.vis.Slicer.prototype.getFileList",jn.prototype.Wi);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",jn.prototype.jz);v("gxnat.vis.Slicer.prototype.getThumbnailImage",jn.prototype.mk);v("gxnat.vis.Slicer.prototype.addFiles",jn.prototype.Ci);function mn(){am.call(this);this.vg.push(this.dw);this.vg.push(this.aL);this.vg.push(this.bL)}w(mn,am);v("xiv.sampleData.Scans",mn);
mn.prototype.dw=new $l("src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 1","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample1/Sample1.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
mn.prototype.aL=new $l("src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 2","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample2/Sample2.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
mn.prototype.bL=new $l("src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 3","Total Frames":176,Type:"t2_spc_1mm_p2"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample3/Sample3.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function nn(a,b,c,d){vc.call(this);on();pn();this.Bp={h:dm,yL:jn};this.Wc=null!=a?a:nn.States.xj;this.jJ=b;this.ZB=d;this.Or=Vg(d);this.Ig=this.Ig?this.Ig:[];a="/"!==c[0]?"/"+c:c;-1===this.Ig.indexOf(this.Or+a)&&this.Ig.push(-1===a.indexOf(this.Or)?this.Or+a:a);1==this.Ig.length&&(this.Hd=new Tg(this.Ig[0]))}w(nn,vc);v("xiv.start",nn);nn.ModalStates={we:"fullscreen",Ze:"popup",As:"fullscreen-popup",xg:"windowed",xj:"demo",DD:"demp-fullscreen"};nn.States={xj:"demo",VM:"live"};
function on(){Qf.IMA=[Rf,null]}function pn(){document.body.style.overflow="hidden"}f=nn.prototype;f.zs=B();f.My=300;f.KI=1E3;f.Sq=!1;f.Vq=!1;f.wC=function(){};f.Vy=function(){qn(this);this.show();this.Wc==nn.States.xj?(cm.MODE="demo",R(this.Ta.$.Ze),R(this.Ta.$.Yk),rn(this)):(this.Ta.qc(this.jJ),sn(this))};f.nL=function(a){this.kJ=a};function qn(a){a.Ta=new a.kJ;a.Ta.kC(serverRoot);F(a.Ta,"g",a.OJ.bind(a));window.onresize=function(){null!=this.Ta&&this.Ta.k()}.bind(a)}
f.OJ=function(){this.Qd.gB(null,function(a){D(a,function(a){tn(this,a);this.Ta.U.Zc()}.bind(this))}.bind(this))};f.show=function(){this.Ta.a().style.opacity=0;this.Ta.n();this.Wc!==nn.States.xj&&this.Ta.gy();F(this.Ta.U.ma,"a",this.Ov.bind(this));F(this.Ta.$.Ze,"click",this.PF.bind(this));F(this.Ta.$.Yk,"click",this.g.bind(this));this.Ta.ac.Xb(!0,0,this.KI);wk(this.Ta.a(),this.My)};
function rn(a){var b=a.Ta.U,c={slicer:(new bm).vg,scan:(new mn).vg},d,e=null;C(c,function(a,b){D(a,function(a){d="scan"==b?new this.Bp.h:new this.Bp.yL;d.Ci(a.files);d.hC(!0);d.xC(a.iJ);d.Uo(a.Hw);un(this,d,a.hu);null==e&&(e=a.hu);D(a.hu,function(a){Hb(e,a)||e.push(a)})}.bind(this))}.bind(a));a=b.ma.Bq(e);var h=[];D(a,function(a){null!=a&&(a.cc.Di=0,a.Xb(!0),a=a.Rf,a.style.opacity=0,h.push(a))});b.ma.a().style.opacity=1;Nb(h,void 0,0,b.ma.a());yk(h,400,200)}
function sn(a){var b=a.Ta.U.ma,c=0;a.Ta.U&&F(a.Ta.U.ma,vn,a.DK.bind(a));a.Qd=new Zg(a.Ig[0]);a.Qd.dB(function(a){var e=tn(this,a);0==c&&(this.BI=a,this.Fu=b.Nc[e[0]],b.Ko(e[0]));1==c&&(this.Vq=!0,this.CI=a,this.Wq=this.Fu.Nc[e[1]]);2==c&&(this.Sq=!0,this.Tq=a,this.QA=this.Wq.Nc[e[2]],vl([this.Fu,this.Wq,this.QA]));c++}.bind(a))}
function wn(a,b){var c=a.Qd.In(b),d=a.Qd.Pz(b),e=0;C(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}function tn(a,b){var c=a.Qd.Qz(b),d=wn(a,b);xn(a,d,c);return d}function yn(a,b){a.Qd.cB(b.originalUrl,null,function(a){if(b.Zh("subjects")==this.Hd.Zh("subjects")&&this.Vq){var d=this.Hd.Zh("experiments");this.Tq=this.Qd.Ql(d);Kb(a,this.Tq);Nb(a,0,0,this.Tq);this.Vq=!1}D(a,function(a){tn(this,a)}.bind(this))}.bind(a))}
f.Ov=function(a){if(null!=a.ke[this.zs])switch(a=new Tg(a.ke[this.zs]),a.zq()){case "subjects":yn(this,a);break;case "experiments":zn(this,a.originalUrl)}};f.Yl=function(a){xk(this.Ta.a(),this.My,a)};f.g=function(){this.Yl(this.ZF.bind(this))};
function zn(a,b){if(null==a.Xu)a.Xu=[];else if(-1<a.Xu.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Qd.In(a.Qd.Ql(b)),c=new Tl(c.projects[kh],c.subjects[kh],c.experiments[kh]);An(a,b,function(){this.Xu.push(b);this.Sq&&(this.Sq=!1,C(this.Wq.Nc,function(){}.bind(this)))}.bind(a),c)}f.DK=function(a){var b=a.ke.cc.Di;a.ke.cc.Di=0;a.ke.cc.Di=b};
f.PF=function(){var a=open(this.ZB+"/scripts/viewer/xiv/popup.html?"+this.Ig[0],"XImgView","width=1200,height=800");a.focus();var b=this.Ig[0];a.onload=function(){a.kP(b,nn.ModalStates.Ze,serverRoot)}.bind(this);this.g()};function An(a,b,c,d){Bn(a,b,function(a){var b=a.$h;Cn(this,a,b,function(a){un(this,a)}.bind(this));null!=d&&(this.qb[b].Qo(d.OK),this.qb[b].So(d.CL),this.qb[b].Mo(d.iG))}.bind(a),c)}
function xn(a,b,c){var d=a.Ta.U.ma;d.xn(b);zippyNodes=d.Bq(b);D(zippyNodes,function(a,b){-1<a.Gd().toLowerCase().indexOf("experiments")&&!a.Cu()&&Sc(a,"a",function(){a.ny()});null==c||null==c[b]||null==a[this.zs]&&(a[this.zs]=c[b])}.bind(a))}
function un(a,b,c){var d=a.Ta.U;null!=d&&(null==c&&null!=a.Qd&&(c=wn(a,a.Qd.Ql(b.Fn))),"Scans"!=b.Of&&c.push(b.Of),b.Wi(function(){if(0<b.Oc.length){var a=d.Ki(b,c);if("Scans"!=b.Of){var h=d.ma.Bq(c);0<c.length&&1<h.length&&d.Xb(c[c.length-1],h[h.length-2])}d.gw(this.Ta.a());a.hw(b.wm);a.Sw()}}.bind(a)))}function Cn(a,b,c,d){a.qb=a.qb?a.qb:{};null==a.qb[c]&&(a.qb[c]=b,d(b))}
f.ZF=function(){nn.d.g.call(this);document.body.style.overflow="visible";C(this.qb,function(a,b){a.g();delete this.qb[b]}.bind(this));delete this.qb;this.Qd&&(this.Qd.g(),delete this.Qd);delete this.Ig;delete this.ZB;delete this.Or;delete this.aP;null!=this.Hd&&(this.Hd.g(),delete this.Hd);delete this.Sq;delete this.Vq;delete this.BI;delete this.CI;delete this.Tq;delete this.Fu;delete this.Wq;delete this.QA;I(this.Ta);this.Ta.g();R(this.Ta.a());delete this.Ta};
function Bn(a,b,c,d){var e=mb(a.Bp),h=0;C(a.Bp,function(a){Zl(b,a,c,function(){h++;h===e&&null!=d&&d()})})}v("xiv.start.States",nn.States);v("xiv.start.loadCustomExtensions",on);v("xiv.start.adjustDocumentStyle",pn);v("xiv.start.ModalStates",nn.ModalStates);v("xiv.start.checkForWebGL",nn.checkForWebGL);v("xiv.start.isCompatible",nn.LI);v("xiv.start.prototype.setServerRoot",nn.prototype.wC);v("xiv.start.prototype.setModalType",nn.prototype.nL);v("xiv.start.prototype.begin",nn.prototype.Vy);
v("xiv.start.prototype.show",nn.prototype.show);v("xiv.start.prototype.hide",nn.prototype.Yl);v("xiv.start.prototype.dispose",nn.prototype.g);window["xiv.start.isCompatible"]=nn.LI;window["xiv.start.checkForWebGL"]=nn.checkForWebGL;window["xiv.start.ModalStates"]=nn.ModalStates;nn.prototype.setServerRoot=nn.prototype.wC;nn.prototype.begin=nn.prototype.Vy;function Dn(){Zc.call(this);this.eo=[];this.Gw=[];this.Io=[]}w(Dn,Zc);f=Dn.prototype;f.ar=!1;f.br=!1;f.fj=!1;f.VA=function(){return this.fj};f.uC=function(a){this.Ur=a};f.ra=function(){if(!this.fj){for(var a,b=0;a=this.eo[b];b++)En(this,a);this.fj=!0}};function En(a,b){a.ar&&(F(b.element,"mousedown",b.bg,!1,b),a.vw&&bl(b.element,a.vw));a.br&&a.Fw&&bl(b.element,a.Fw)}
function Fn(a){for(var b,c=0;b=a.eo[c];c++){var d=a;d.ar&&(Tc(b.element,"mousedown",b.bg,!1,b),d.vw&&dl(b.element,d.vw));d.br&&d.Fw&&dl(b.element,d.Fw);b.g()}a.eo.length=0}
f.Zo=function(a,b){if(!this.gf)if(this.gf=b,!1==this.dispatchEvent(new Gn("dragstart",0,this.gf)))this.gf=null;else{var c=b.Li;this.fk=this.Mt(c);var d=Ih(c);d.body.appendChild(this.fk);var e=this.fk,h=Hi(c),c=Zi(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.Oa=new fm(e);this.Oa.uC(this.Ur);F(this.Oa,"drag",this.oB,!1,this);F(this.Oa,"end",this.Si,!1,this);F(d.body,"selectstart",this.SC);this.vm=[];for(e=0;d=this.Gw[e];e++)for(var k,
h=0;k=d.eo[h];h++)for(var c=d,l=[k.element],n=this.vm,p=0;p<l.length;p++){var m=l[p],q,t=m;q=Hi(t);t=T(t);q=new sh(q.y,q.x+t.width,q.y+t.height,q.x);n.push(new Hn(q,c,k,m));In(this,q)}this.fi||(this.fi=new sh(0,0,0,0));for(e=0;d=this.Io[e];e++)d.It=[],d.$B=d.o.scrollLeft,d.aC=d.o.scrollTop,h=Hi(d.o),c=T(d.o),d.tc=new sh(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.vm[e];e++)for(h=0;d=this.Io[h];h++)ei(d.o,c.o)&&(d.It.push(c),c.Ho=d);this.Sj=null;for(e=0;d=this.Io[e];e++)F(d.o,"scroll",this.fz,
!1,this);this.Oa.Zo(a);a.preventDefault()}};
f.Si=function(a){var b=a.cG?null:this.Sj;if(b&&b.Pk){var c=a.clientX;a=a.clientY;var d=ui(Gh(this.fk)),e=c+d.x,d=a+d.y,h;this.dp&&(h=this.dp(b.Rh,b.tc,e,d));this.dispatchEvent(new Gn("drag",0,this.gf,0,b.Rh,0,c,a));b.Pk.dispatchEvent(new Gn("drop",0,this.gf,0,b.Rh,0,c,a,0,0,h))}this.dispatchEvent(new Gn("dragend",0,this.gf));Tc(this.Oa,"drag",this.oB,!1,this);Tc(this.Oa,"end",this.Si,!1,this);Tc(Ih(this.gf.Li).body,"selectstart",this.SC);for(b=0;c=this.Io[b];b++)Tc(c.o,"scroll",this.fz,!1,this),c.It=
[];this.Oa.g();R(this.fk);delete this.gf;delete this.fk;delete this.Oa;delete this.vm;delete this.Sj};
f.oB=function(a){var b,c=ui(Gh(this.fk));b=new qh(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Sj,h;if(e){this.dp&&e.Pk&&(h=this.dp(e.Rh,e.tc,c,d));if(e.tc.contains(b)&&h==this.fy)return;e.Pk&&(this.dispatchEvent(new Gn("dragout",0,this.gf,0,e.Rh)),e.Pk.dispatchEvent(new Gn("dragout",0,this.gf,0,e.Rh,0,void 0,void 0,0,0,this.fy)));this.fy=h;this.Sj=null}if(this.fi.contains(b)){a:{for(var k=0;e=this.vm[k];k++)if(e.tc.contains(b))if(e.Ho){if(e.Ho.tc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.Sj=b)&&e.Pk)this.dp&&(h=this.dp(e.Rh,e.tc,c,d)),c=new Gn("dragover",0,this.gf,0,e.Rh),c.DL=h,this.dispatchEvent(c),e.Pk.dispatchEvent(new Gn("dragover",0,this.gf,0,e.Rh,0,a.clientX,a.clientY,0,0,h));else if(!e){this.Ge||(this.Ge=new Hn(this.fi.clone()));a=this.Ge.tc;a.top=this.fi.top;a.right=this.fi.right;a.bottom=this.fi.bottom;a.left=this.fi.left;for(h=0;e=this.vm[h];h++)b=e.tc,e.Ho&&(e=e.Ho.tc,b=new sh(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.Sj=10<=(a.right-a.left)*(a.bottom-a.top)?this.Ge:null}}};f.SC=function(){return!1};
f.fz=function(a){for(var b=0,c;c=this.Io[b];b++)if(a.target==c.o){var d=c.aC-c.o.scrollTop,e=c.$B-c.o.scrollLeft;c.aC=c.o.scrollTop;c.$B=c.o.scrollLeft;this.Ge&&this.Sj==this.Ge&&(0<d?this.Ge.tc.top+=d:this.Ge.tc.bottom+=d,0<e?this.Ge.tc.left+=e:this.Ge.tc.right+=e);for(var h=0,k;k=c.It[h];h++)k=k.tc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,In(this,k)}this.Oa.lm(a)};
f.Mt=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=Q("table",null,Q("tbody",null,b));break a;case "td":case "th":a=Q("table",null,Q("tbody",null,Q("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.dG&&bl(a,this.dG);return a};f.Aq=function(){return this.Oa};
function In(a,b){if(1==a.vm.length)a.fi=new sh(b.top,b.right,b.bottom,b.left);else{var c=a.fi;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.f=function(){Dn.d.f.call(this);Fn(this)};function Gn(a,b,c,d,e,h,k,l,n,p,m){Cc.call(this,a);this.rq=c;this.Hl=e;this.clientX=k;this.clientY=l;this.DL=m}w(Gn,Cc);Gn.prototype.f=function(){};
function Jn(a,b){Zc.call(this);this.element=Jh(a);this.data=b;this.Qa=null;this.uc=new cj(this);yc(this,ua(zc,this.uc));if(!this.element)throw Error("Invalid argument");}w(Jn,Zc);f=Jn.prototype;f.Li=null;f.bg=function(a){if(Ic(a)){var b=a.target;b&&(this.uc.A(b,"mousemove",this.nB,!1).A(b,"mouseout",this.nB,!1),this.uc.A(Ih(b),"mouseup",this.mJ,!0),this.Li=b,this.yw=new qh(a.clientX,a.clientY),a.preventDefault())}};f.Oo=function(a){this.Qa=a};
f.nB=function(a){var b=this.Li,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.yw.x)+Math.abs(a.clientY-this.yw.y)||b)this.uc.gg(),this.Qa.Zo(a,this)};f.mJ=function(){this.uc.gg();delete this.yw;this.Li=null};function Hn(a,b,c,d){this.tc=a;this.Pk=b;this.Rh=c;this.o=d}Hn.prototype.Ho=null;function Kn(a,b){this.type=a;this.currentTarget=this.target=b||null}f=Kn.prototype;f.eg=!1;f.defaultPrevented=!1;f.Eo=!0;f.stopPropagation=function(){this.eg=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.Eo=!1};
function Ln(a){a=new Kn("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Ki(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.Eo=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.eg;d--){var e=b[d],h=a.type,k=new Gc(a,b[d]);gb(e)?$c(e,h,!0,k):Wc(e,h,!0,k)}for(d=0;d<b.length&&!a.eg;d++)e=b[d],h=a.type,k=new Gc(a,b[d]),gb(e)?$c(e,h,!1,k):Wc(e,h,!1,k)};function Mn(a,b){if(!a)throw Error("Invalid class name "+a);if(!ja(b))throw Error("Invalid decorator function "+b);Nn[a]=b}var On={},Nn={};function Pn(){}var Qn;fa(Pn);var Rn={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=Pn.prototype;f.Ng=function(){};f.w=function(a){var b=a.N().w("div",this.lk(a).join(" "),a.getContent());Sn(this,a,b);return b};f.Ia=function(a){return a};f.ik=function(a,b,c){if(a=a.a?a.a():a){var d=[b];E&&!oc("7")&&(d=Tn($k(a),b),d.push(b));(c?cl:el)(a,d)}};f.Fe=function(){return!0};
f.yb=function(a,b){b.id&&kj(a,b.id);var c=this.Ia(b);c&&c.firstChild?Un(a,c.firstChild.nextSibling?Mb(c.childNodes):c.firstChild):a.Gc=null;var d=0,e=this.W(),h=this.W(),k=!1,l=!1,c=!1,n=Mb($k(b));D(n,function(a){k||a!=e?l||a!=h?d|=this.tu(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.R=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var p=a.Tf;p&&n.push.apply(n,p);if(E&&!oc("7")){var m=Tn(n);0<m.length&&(n.push.apply(n,m),c=!0)}if(!k||!l||p||c)b.className=n.join(" ");Sn(this,a,b);return b};
f.dm=function(a){a.Le()&&this.qm(a.a(),!0);a.isEnabled()&&this.nj(a,a.sa())};function Vn(a,b,c){if(a=c||a.Ng())c=b.getAttribute("role")||null,a!=c&&Xk(b,a)}function Sn(a,b,c){b.sa()||Yk(c,"hidden",!b.sa());b.isEnabled()||a.gh(c,1,!b.isEnabled());Wn(b,8)&&a.gh(c,8,!!(b.R&8));Wn(b,16)&&a.gh(c,16,b.Sg());Wn(b,64)&&a.gh(c,64,!!(b.R&64))}f.Jo=function(a,b){Wi(a,!b,!E&&!fc)};f.qm=function(a,b){this.ik(a,this.W()+"-rtl",b)};f.Ph=function(a){var b;return Wn(a,32)&&(b=a.lc())?ki(b)&&li(b):!1};
f.nj=function(a,b){var c;if(Wn(a,32)&&(c=a.lc())){if(!b&&a.R&32){try{c.blur()}catch(d){}a.R&32&&a.pk(null)}(ki(c)&&li(c))!=b&&ji(c,b)}};f.aa=function(a,b){Ti(a,b);a&&Yk(a,"hidden",!b)};f.qc=function(a,b,c){var d=a.a();if(d){var e=this.Jn(b);e&&this.ik(a,e,c);this.gh(d,b,c)}};f.gh=function(a,b,c){Qn||(Qn={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Qn[b];var d=a.getAttribute("role")||null;d&&(d=Rn[d]||b,b="checked"==b||"selected"==b?d:b);b&&Yk(a,b,c)};
f.Nk=function(a,b){var c=this.Ia(a);if(c&&(Yh(c),b))if(r(b))gi(c,b);else{var d=function(a){if(a){var b=Ih(c);c.appendChild(r(a)?b.createTextNode(a):a)}};g(b)?D(b,d):!ha(b)||"nodeType"in b?d(b):D(Mb(b),d)}};f.lc=function(a){return a.a()};f.W=function(){return"goog-control"};f.lk=function(a){var b=this.W(),c=[b],d=this.W();d!=b&&c.push(d);b=a.Ul();for(d=[];b;){var e=b&-b;d.push(this.Jn(e));b&=~e}c.push.apply(c,d);(a=a.Tf)&&c.push.apply(c,a);E&&!oc("7")&&c.push.apply(c,Tn(c));return c};
function Tn(a,b){var c=[];b&&(a=a.concat([b]));D([],function(d){!Eb(d,ua(Hb,a))||b&&!Hb(d,b)||c.push(d.join("_"))});return c}f.Jn=function(a){this.fq||Xn(this);return this.fq[a]};f.tu=function(a){if(!this.QC){this.fq||Xn(this);var b=this.fq,c={},d;for(d in b)c[b[d]]=d;this.QC=c}a=parseInt(this.QC[a],10);return isNaN(a)?0:a};function Xn(a){var b=a.W();b.replace(/\xa0|\s/g," ");a.fq={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Yn(a,b){Zc.call(this);a&&this.zl(a,b)}w(Yn,Zc);f=Yn.prototype;f.o=null;f.cr=null;f.Mu=null;f.dr=null;f.Me=-1;f.gj=-1;f.ut=!1;
var Zn={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},$n={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},ao=E||hc&&oc("525"),bo=bc&&gc;f=Yn.prototype;
f.Jq=function(a){hc&&(17==this.Me&&!a.ctrlKey||18==this.Me&&!a.altKey||bc&&91==this.Me&&!a.metaKey)&&(this.gj=this.Me=-1);-1==this.Me&&(a.ctrlKey&&17!=a.keyCode?this.Me=17:a.altKey&&18!=a.keyCode?this.Me=18:a.metaKey&&91!=a.keyCode&&(this.Me=91));ao&&!hl(a.keyCode,this.Me,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.gj=jl(a.keyCode),bo&&(this.ut=a.altKey))};f.nI=function(a){this.gj=this.Me=-1;this.ut=a.altKey};
f.handleEvent=function(a){var b=a.Ic,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.gj,d=13!=c&&27!=c?b.keyCode:0):hc&&"keypress"==a.type?(c=this.gj,d=0<=b.charCode&&63232>b.charCode&&il(c)?b.charCode:0):fc?(c=this.gj,d=il(c)?b.keyCode:0):(c=b.keyCode||this.gj,d=b.charCode||0,bo&&(e=this.ut),bc&&63==d&&224==c&&(c=191));var h=c=jl(c),k=b.keyIdentifier;c?63232<=c&&c in Zn?h=Zn[c]:25==c&&a.shiftKey&&(h=9):k&&k in $n&&(h=$n[k]);a=h==this.Me;this.Me=h;b=new co(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.o};f.zl=function(a,b){this.dr&&this.detach();this.o=a;this.cr=F(this.o,"keypress",this,b);this.Mu=F(this.o,"keydown",this.Jq,b,this);this.dr=F(this.o,"keyup",this.nI,b,this)};f.detach=function(){this.cr&&(Uc(this.cr),Uc(this.Mu),Uc(this.dr),this.dr=this.Mu=this.cr=null);this.o=null;this.gj=this.Me=-1};f.f=function(){Yn.d.f.call(this);this.detach()};function co(a,b,c,d){Gc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(co,Gc);function eo(a,b,c){gj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ma(b);if(d=On[d])break;b=b.d?b.d.constructor:null}b=d?ja(d.ee)?d.ee():new d:null}this.ta=b;this.Gc=ca(a)?a:null}w(eo,gj);f=eo.prototype;f.Gc=null;f.R=0;f.ep=39;f.mn=255;f.ap=0;f.Ac=!0;f.Tf=null;f.rk=!0;f.Yp=!1;f.Wv=null;f.No=function(a){this.fa&&a!=this.rk&&fo(this,a);this.rk=a};f.lc=function(){return this.ta.lc(this)};f.Dq=function(){return this.mb||(this.mb=new Yn)};f.Pa=function(){return this.ta};
f.ik=function(a,b){b?a&&(this.Tf?Hb(this.Tf,a)||this.Tf.push(a):this.Tf=[a],this.ta.ik(this,a,!0)):a&&this.Tf&&Kb(this.Tf,a)&&(0==this.Tf.length&&(this.Tf=null),this.ta.ik(this,a,!1))};f.w=function(){var a=this.ta.w(this);this.o=a;Vn(this.ta,a,this.Xi());this.Yp||this.ta.Jo(a,!1);this.sa()||this.ta.aa(a,!1)};f.Xi=function(){return this.Wv};f.Ia=function(){return this.ta.Ia(this.a())};f.Fe=function(a){return this.ta.Fe(a)};
f.$d=function(a){this.o=a=this.ta.yb(this,a);Vn(this.ta,a,this.Xi());this.Yp||this.ta.Jo(a,!1);this.Ac="none"!=a.style.display};f.$a=function(){eo.d.$a.call(this);this.ta.dm(this);if(this.ep&-2&&(this.rk&&fo(this,!0),Wn(this,32))){var a=this.lc();if(a){var b=this.Dq();b.zl(a);this.ab().A(b,"key",this.Pg).A(a,"focus",this.qk).A(a,"blur",this.pk)}}};
function fo(a,b){var c=a.ab(),d=a.a();b?(c.A(d,"mouseover",a.sk).A(d,"mousedown",a.Qg).A(d,"mouseup",a.Wf).A(d,"mouseout",a.Lq),a.Pn!=ea&&c.A(d,"contextmenu",a.Pn),E&&c.A(d,"dblclick",a.zA)):(c.ob(d,"mouseover",a.sk).ob(d,"mousedown",a.Qg).ob(d,"mouseup",a.Wf).ob(d,"mouseout",a.Lq),a.Pn!=ea&&c.ob(d,"contextmenu",a.Pn),E&&c.ob(d,"dblclick",a.zA))}f.vc=function(){eo.d.vc.call(this);this.mb&&this.mb.detach();this.sa()&&this.isEnabled()&&this.ta.nj(this,!1)};
f.f=function(){eo.d.f.call(this);this.mb&&(this.mb.g(),delete this.mb);delete this.ta;this.Tf=this.Gc=null};f.getContent=function(){return this.Gc};f.Nk=function(a){this.ta.Nk(this.a(),a);this.Gc=a};function Un(a,b){a.Gc=b}f.yq=function(){var a=this.getContent();if(!a)return"";a=r(a)?a:g(a)?Cb(a,oi).join(""):mi(a);return Ga(a)};f.qm=function(a){eo.d.qm.call(this,a);var b=this.a();b&&this.ta.qm(b,a)};f.Jo=function(a){this.Yp=a;var b=this.a();b&&this.ta.Jo(b,a)};f.sa=function(){return this.Ac};
f.aa=function(a,b){if(b||this.Ac!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.ta.aa(c,a);this.isEnabled()&&this.ta.nj(this,a);this.Ac=a;return!0}return!1};f.isEnabled=function(){return!(this.R&1)};f.pc=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!go(this,1,!a)||(a||(this.setActive(!1),this.ig(!1)),this.sa()&&this.ta.nj(this,a),this.qc(1,!a))};f.ig=function(a){go(this,2,a)&&this.qc(2,a)};f.Rg=function(){return!!(this.R&4)};
f.setActive=function(a){go(this,4,a)&&this.qc(4,a)};f.Ro=function(a){go(this,8,a)&&this.qc(8,a)};f.Sg=function(){return!!(this.R&16)};f.ne=function(a){go(this,16,a)&&this.qc(16,a)};f.Yb=function(a){go(this,64,a)&&this.qc(64,a)};f.Ul=function(){return this.R};f.qc=function(a,b){Wn(this,a)&&b!=!!(this.R&a)&&(this.ta.qc(this,a,b),this.R=b?this.R|a:this.R&~a)};function Wn(a,b){return!!(a.ep&b)}
f.bd=function(a,b){if(this.fa&&this.R&a&&!b)throw Error("Component already rendered");!b&&this.R&a&&this.qc(a,!1);this.ep=b?this.ep|a:this.ep&~a};function ho(a,b){return!!(a.mn&b)&&Wn(a,b)}function go(a,b,c){return Wn(a,b)&&!!(a.R&b)!=c&&(!(a.ap&b)||a.dispatchEvent(ij(b,c)))&&!a.dk}f.sk=function(a){(!a.relatedTarget||!ei(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&ho(this,2)&&this.ig(!0)};
f.Lq=function(a){a.relatedTarget&&ei(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(ho(this,4)&&this.setActive(!1),ho(this,2)&&this.ig(!1))};f.Pn=ea;f.Qg=function(a){this.isEnabled()&&(ho(this,2)&&this.ig(!0),Ic(a)&&(ho(this,4)&&this.setActive(!0),this.ta.Ph(this)&&this.lc().focus()));!this.Yp&&Ic(a)&&a.preventDefault()};f.Wf=function(a){this.isEnabled()&&(ho(this,2)&&this.ig(!0),this.Rg()&&this.Ek(a)&&ho(this,4)&&this.setActive(!1))};f.zA=function(a){this.isEnabled()&&this.Ek(a)};
f.Ek=function(a){ho(this,16)&&this.ne(!this.Sg());ho(this,8)&&this.Ro(!0);ho(this,64)&&this.Yb(!(this.R&64));var b=new Cc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Tv=a.Tv);return this.dispatchEvent(b)};f.qk=function(){ho(this,32)&&go(this,32,!0)&&this.qc(32,!0)};f.pk=function(){ho(this,4)&&this.setActive(!1);ho(this,32)&&go(this,32,!1)&&this.qc(32,!1)};
f.Pg=function(a){return this.sa()&&this.isEnabled()&&this.Vf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.Vf=function(a){return 13==a.keyCode&&this.Ek(a)};if(!ja(eo))throw Error("Invalid component class "+eo);if(!ja(Pn))throw Error("Invalid renderer class "+Pn);var io=ma(eo);On[io]=Pn;Mn("goog-control",function(){return new eo(null)});function jo(){this.bz=[]}w(jo,Pn);fa(jo);function ko(a,b){var c=a.bz[b];if(!c){switch(b){case 0:c=a.W()+"-highlight";break;case 1:c=a.W()+"-checkbox";break;case 2:c=a.W()+"-content"}a.bz[b]=c}return c}f=jo.prototype;f.Ng=function(){return"menuitem"};f.w=function(a){var b=a.N().w("div",this.lk(a).join(" "),lo(this,a.getContent(),a.N()));mo(this,a,b,Wn(a,8)||Wn(a,16));return b};f.Ia=function(a){return a&&a.firstChild};
f.yb=function(a,b){var c=ai(b),d=ko(this,2);c&&al(c,d)||b.appendChild(lo(this,b.childNodes,a.N()));al(b,"goog-option")&&(a.$r(!0),this.$r(a,b,!0));return jo.d.yb.call(this,a,b)};f.Nk=function(a,b){var c=this.Ia(a),d=no(this,a)?c.firstChild:null;jo.d.Nk.call(this,a,b);d&&!no(this,a)&&c.insertBefore(d,c.firstChild||null)};function lo(a,b,c){a=ko(a,2);return c.w("div",a,b)}f.vC=function(a,b,c){a&&b&&mo(this,a,b,c)};f.$r=function(a,b,c){a&&b&&mo(this,a,b,c)};
function no(a,b){var c=a.Ia(b);if(c){var c=c.firstChild,d=ko(a,1);return!!c&&di(c)&&al(c,d)}return!1}function mo(a,b,c,d){Vn(a,c,b.Xi());Sn(a,b,c);d!=no(a,c)&&(fl(c,"goog-option",d),c=a.Ia(c),d?(a=ko(a,1),c.insertBefore(b.N().w("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.Jn=function(a){switch(a){case 2:return ko(this,0);case 16:case 8:return"goog-option-selected";default:return jo.d.Jn.call(this,a)}};
f.tu=function(a){var b=ko(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return jo.d.tu.call(this,a)}};f.W=function(){return"goog-menuitem"};function oo(a,b,c,d){eo.call(this,a,d||jo.ee(),c);this.H(b)}w(oo,eo);f=oo.prototype;f.J=function(){var a=this.ev;return null!=a?a:this.yq()};f.H=function(a){this.ev=a};f.bd=function(a,b){oo.d.bd.call(this,a,b);switch(a){case 8:this.Sg()&&!b&&this.ne(!1);var c=this.a();c&&this.Pa().vC(this,c,b);break;case 16:(c=this.a())&&this.Pa().$r(this,c,b)}};f.vC=function(a){this.bd(8,a)};f.$r=function(a){this.bd(16,a)};
f.yq=function(){var a=this.getContent();return g(a)?(a=Cb(a,function(a){return di(a)&&(al(a,"goog-menuitem-accel")||al(a,"goog-menuitem-mnemonic-separator"))?"":oi(a)}).join(""),Ga(a)):oo.d.yq.call(this)};f.Wf=function(a){var b=this.getParent();if(b){var c=b.FB;b.FB=null;if(b=c&&u(a.clientX))b=new qh(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}oo.d.Wf.call(this,a)};f.Vf=function(a){return a.keyCode==this.mB&&this.Ek(a)?!0:oo.d.Vf.call(this,a)};f.mH=function(){return this.mB};
Mn("goog-menuitem",function(){return new oo(null)});oo.prototype.Xi=function(){return Wn(this,16)?"menuitemcheckbox":Wn(this,8)?"menuitemradio":oo.d.Xi.call(this)};function po(a){this.Ry=a}fa(po);f=po.prototype;f.Ng=function(){return this.Ry};function qo(a,b){a&&(a.tabIndex=b?0:-1)}f.w=function(a){return a.N().w("div",this.lk(a).join(" "))};f.Ia=function(a){return a};f.Fe=function(a){return"DIV"==a.tagName};f.yb=function(a,b){b.id&&kj(a,b.id);var c=this.W(),d=!1,e=$k(b);e&&D(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.pc(!1):b==c+"-horizontal"?a.di(ro):b==c+"-vertical"&&a.di(so))},this);d||bl(b,c);to(this,a,this.Ia(b));return b};
function to(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.mu(d);h&&(h.o=d,b.isEnabled()||h.pc(!1),b.kn(h),h.yb(d))}else d.nodeValue&&""!=Ia(d.nodeValue)||c.removeChild(d);d=e}}f.mu=function(a){a:{var b;a=$k(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Nn?Nn[b]():null){a=b;break a}a=null}return a};f.dm=function(a){a=a.a();Wi(a,!0,gc);E&&(a.hideFocus=!0);var b=this.Ng();b&&Xk(a,b)};f.lc=function(a){return a.a()};f.W=function(){return"goog-container"};
f.lk=function(a){var b=this.W(),c=[b,a.Db()==ro?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function uo(){}w(uo,Pn);fa(uo);uo.prototype.w=function(a){return a.N().w("div",this.W())};uo.prototype.yb=function(a,b){b.id&&kj(a,b.id);if("HR"==b.tagName){var c=b;b=this.w(a);Zh(b,c);R(c)}else bl(b,this.W());return b};uo.prototype.Nk=function(){};uo.prototype.W=function(){return"goog-menuseparator"};function vo(a,b){eo.call(this,null,a||uo.ee(),b);this.bd(1,!1);this.bd(2,!1);this.bd(4,!1);this.bd(32,!1);this.R=1}w(vo,eo);vo.prototype.$a=function(){vo.d.$a.call(this);Xk(this.a(),"separator")};Mn("goog-menuseparator",function(){return new vo});function wo(a){this.Ry=a||"menu"}w(wo,po);fa(wo);f=wo.prototype;f.Fe=function(a){return"UL"==a.tagName||wo.d.Fe.call(this,a)};f.mu=function(a){return"HR"==a.tagName?new vo:wo.d.mu.call(this,a)};f.Yj=function(a,b){return ei(a.a(),b)};f.W=function(){return"goog-menu"};f.dm=function(a){wo.d.dm.call(this,a);Yk(a.a(),"haspopup","true")};function xo(a,b,c,d,e,h,k,l,n){var p,m;if(p=c.offsetParent){var q="HTML"==p.tagName||"BODY"==p.tagName;q&&"static"==zi(p)||(m=Hi(p),q||(q=(q=Ii(p))&&gc?-p.scrollLeft:!q||E&&oc("8")||"visible"==yi(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,m=rh(m,new qh(q,p.scrollTop))))}p=m||new qh;m=Ri(a);(q=Gi(a))&&m.TA(new vh(q.left,q.top,q.right-q.left,q.bottom-q.top));var q=Gh(a),t=Gh(c);if(q.qa!=t.qa){var s=q.qa.body,t=ti(t),z=new qh(0,0),y=Th(Ih(s)),H=s;do{var P=y==t?Hi(H):Li(H);z.x+=
P.x;z.y+=P.y}while(y&&y!=t&&(H=y.frameElement)&&(y=y.parent));s=rh(z,Hi(s));E&&!si(q)&&(s=rh(s,ui(q)));m.left+=s.x;m.top+=s.y}a=yo(a,b);b=new qh(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);b=rh(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var O;if(k)if(n)O=n;else if(O=Gi(c))O.top-=p.y,O.right-=p.x,O.bottom-=p.y,O.left-=p.x;return zo(b,c,d,h,O,k,l)}
function zo(a,b,c,d,e,h,k){a=a.clone();var l=0,n=yo(b,c);c=T(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;Ai(b,a);uh(c,k)||(e=si(Gh(Ih(b))),!E||e&&oc("8")?
(b=b.style,gc?b.MozBoxSizing="border-box":hc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=Zi(b,"padding"),b=bj(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function yo(a,b){return(b&4&&Ii(a)?b^2:b)&-5};var Ao,Bo;Bo=Ao=!1;var Co=Tb;Co&&(-1!=Co.indexOf("Firefox")||-1!=Co.indexOf("Camino")||(-1!=Co.indexOf("iPhone")||-1!=Co.indexOf("iPod")?Ao=!0:-1!=Co.indexOf("iPad")&&(Bo=!0)));var Do=Ao,Eo=Bo;Mn("goog-menuseparator",function(){return new vo});function Fo(a,b,c){gj.call(this,c);this.ta=b||po.ee();this.Fa=a||so}w(Fo,gj);var ro="horizontal",so="vertical";f=Fo.prototype;f.Nu=null;f.mb=null;f.ta=null;f.Fa=null;f.Ac=!0;f.Hc=!0;f.gu=!0;f.Ke=-1;f.xc=null;f.Uh=!1;f.qF=!1;f.HK=!0;f.Ch=null;f.lc=function(){return this.Nu||this.ta.lc(this)};f.Dq=function(){return this.mb||(this.mb=new Yn(this.lc()))};f.Pa=function(){return this.ta};f.w=function(){this.o=this.ta.w(this)};f.Ia=function(){return this.ta.Ia(this.a())};f.Fe=function(a){return this.ta.Fe(a)};
f.$d=function(a){this.o=this.ta.yb(this,a);"none"==a.style.display&&(this.Ac=!1)};f.$a=function(){Fo.d.$a.call(this);mj(this,function(a){a.fa&&Go(this,a)},this);var a=this.a();this.ta.dm(this);this.aa(this.Ac,!0);this.ab().A(this,"enter",this.zu).A(this,"highlight",this.Au).A(this,"unhighlight",this.Bu).A(this,"open",this.rI).A(this,"close",this.iI).A(a,"mousedown",this.Qg).A(Ih(a),"mouseup",this.kI).A(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.hI);this.Ph()&&Ho(this,!0)};
function Ho(a,b){var c=a.ab(),d=a.lc();b?c.A(d,"focus",a.qk).A(d,"blur",a.pk).A(a.Dq(),"key",a.Pg):c.ob(d,"focus",a.qk).ob(d,"blur",a.pk).ob(a.Dq(),"key",a.Pg)}f.vc=function(){this.ah(-1);this.xc&&this.xc.Yb(!1);this.Uh=!1;Fo.d.vc.call(this)};f.f=function(){Fo.d.f.call(this);this.mb&&(this.mb.g(),this.mb=null);this.ta=this.xc=this.Ch=this.Nu=null};f.zu=function(){return!0};
f.Au=function(a){var b=pj(this,a.target);if(-1<b&&b!=this.Ke){var c=Io(this);c&&c.ig(!1);this.Ke=b;c=Io(this);this.Uh&&c.setActive(!0);this.HK&&this.xc&&c!=this.xc&&(Wn(c,64)?c.Yb(!0):this.xc.Yb(!1))}b=this.a();null!=a.target.a()&&Yk(b,"activedescendant",a.target.a().id)};f.Bu=function(a){a.target==Io(this)&&(this.Ke=-1);this.a().removeAttribute("aria-activedescendant")};f.rI=function(a){(a=a.target)&&a!=this.xc&&a.getParent()==this&&(this.xc&&this.xc.Yb(!1),this.xc=a)};
f.iI=function(a){a.target==this.xc&&(this.xc=null)};f.Qg=function(a){this.Hc&&(this.Uh=!0);var b=this.lc();b&&ki(b)&&li(b)?b.focus():a.preventDefault()};f.kI=function(){this.Uh=!1};f.hI=function(a){var b;a:{b=a.target;if(this.Ch)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.Ch){b=this.Ch[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Qg(a);break;case "mouseup":b.Wf(a);break;case "mouseover":b.sk(a);break;case "mouseout":b.Lq(a);break;case "contextmenu":b.Pn(a)}};
f.qk=function(){};f.pk=function(){this.ah(-1);this.Uh=!1;this.xc&&this.xc.Yb(!1)};f.Pg=function(a){return this.isEnabled()&&this.sa()&&(0!=nj(this)||this.Nu)&&this.Vf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.Vf=function(a){var b=Io(this);if(b&&"function"==typeof b.Pg&&b.Pg(a)||this.xc&&this.xc!=b&&"function"==typeof this.xc.Pg&&this.xc.Pg(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.Ph())this.lc().blur();else return!1;break;case 36:Jo(this);break;case 35:Ko(this);break;case 38:if(this.Fa==so)Lo(this);else return!1;break;case 37:if(this.Fa==ro)this.Le()?Mo(this):Lo(this);else return!1;break;case 40:if(this.Fa==so)Mo(this);else return!1;break;case 39:if(this.Fa==
ro)this.Le()?Lo(this):Mo(this);else return!1;break;default:return!1}return!0};function Go(a,b){var c=b.a(),c=c.id||(c.id=jj(b));a.Ch||(a.Ch={});a.Ch[c]=b}f.kn=function(a,b){Fo.d.kn.call(this,a,b)};f.nt=function(a,b,c){a.ap|=2;a.ap|=64;!this.Ph()&&this.qF||a.bd(32,!1);a.No(!1);Fo.d.nt.call(this,a,b,c);a.fa&&this.fa&&Go(this,a);b<=this.Ke&&this.Ke++};
f.removeChild=function(a,b){if(a=r(a)?lj(this,a):a){var c=pj(this,a);-1!=c&&(c==this.Ke?(a.ig(!1),this.Ke=-1):c<this.Ke&&this.Ke--);(c=a.a())&&c.id&&this.Ch&&tb(this.Ch,c.id)}a=Fo.d.removeChild.call(this,a,b);a.No(!0);return a};f.Db=function(){return this.Fa};f.di=function(a){if(this.a())throw Error("Component already rendered");this.Fa=a};f.sa=function(){return this.Ac};
f.aa=function(a,b){if(b||this.Ac!=a&&this.dispatchEvent(a?"show":"hide")){this.Ac=a;var c=this.a();c&&(Ti(c,a),this.Ph()&&qo(this.lc(),this.Hc&&this.Ac),b||this.dispatchEvent(this.Ac?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Hc};
f.pc=function(a){this.Hc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Hc=!0,mj(this,function(a){a.jD?delete a.jD:a.pc(!0)})):(mj(this,function(a){a.isEnabled()?a.pc(!1):a.jD=!0}),this.Uh=this.Hc=!1),this.Ph()&&qo(this.lc(),a&&this.Ac))};f.Ph=function(){return this.gu};f.nj=function(a){a!=this.gu&&this.fa&&Ho(this,a);this.gu=a;this.Hc&&this.Ac&&qo(this.lc(),a)};f.ah=function(a){(a=oj(this,a))?a.ig(!0):-1<this.Ke&&Io(this).ig(!1)};f.ig=function(a){this.ah(pj(this,a))};
function Io(a){return oj(a,a.Ke)}function Jo(a){No(a,function(a,c){return(a+1)%c},nj(a)-1)}function Ko(a){No(a,function(a,c){a--;return 0>a?c-1:a},0)}function Mo(a){No(a,function(a,c){return(a+1)%c},a.Ke)}function Lo(a){No(a,function(a,c){a--;return 0>a?c-1:a},a.Ke)}function No(a,b,c){c=0>c?pj(a,a.xc):c;var d=nj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=oj(a,c);if(h&&a.$y(h)){a.ah(c);break}e++;c=b.call(a,c,d)}}f.$y=function(a){return a.sa()&&a.isEnabled()&&Wn(a,2)};function Oo(){}w(Oo,Pn);fa(Oo);Oo.prototype.W=function(){return"goog-menuheader"};function Po(a,b,c){eo.call(this,a,c||Oo.ee(),b);this.bd(1,!1);this.bd(2,!1);this.bd(4,!1);this.bd(32,!1);this.R=1}w(Po,eo);Mn("goog-menuheader",function(){return new Po(null)});function Qo(a,b){Fo.call(this,so,b||wo.ee(),a);this.nj(!1)}w(Qo,Fo);f=Qo.prototype;f.tt=!0;f.rF=!1;f.W=function(){return this.Pa().W()};f.Yj=function(a){if(this.Pa().Yj(this,a))return!0;for(var b=0,c=nj(this);b<c;b++){var d=oj(this,b);if("function"==typeof d.Yj&&d.Yj(a))return!0}return!1};f.Tj=function(a){this.kn(a,!0)};f.mw=function(a,b){var c=this.sa();c||Ti(this.a(),!0);var d=this.a(),e=a,h=b,k=Hi(d);e instanceof qh&&(h=e.y,e=e.x);Ai(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Ti(this.a(),!1)};
f.aa=function(a,b,c){(b=Qo.d.aa.call(this,a,b))&&a&&this.fa&&this.tt&&this.lc().focus();this.FB=a&&c&&u(c.clientX)?new qh(c.clientX,c.clientY):null;return b};f.zu=function(a){this.tt&&this.lc().focus();return Qo.d.zu.call(this,a)};f.$y=function(a){return(this.rF||a.isEnabled())&&a.sa()&&Wn(a,2)};f.$d=function(a){var b=this.Pa(),c;c=this.N();c=Lh(c.qa,"div",b.W()+"-content",a);for(var d=c.length,e=0;e<d;e++)to(b,this,c[e]);Qo.d.$d.call(this,a)};
f.Vf=function(a){var b=Qo.d.Vf.call(this,a);b||mj(this,function(c){!b&&c.mH&&c.mB==a.keyCode&&(this.isEnabled()&&this.ig(c),b=c.Pg(a))},this);return b};f.ah=function(a){Qo.d.ah.call(this,a);var b=oj(this,a);if(b){a=this.a();var b=b.a(),c=Hi(b),d=Hi(a),e=bj(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new qh(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Ro(){}Ro.prototype.le=function(){};function So(a,b,c){this.element=a;this.wn=b;this.IK=c}w(So,Ro);So.prototype.le=function(a,b,c){xo(this.element,this.wn,a,b,void 0,c,this.IK)};function To(a,b,c,d){So.call(this,a,b);this.fr=c?5:0;this.Pv=d||void 0}w(To,So);To.prototype.ZG=function(){return this.fr};To.prototype.le=function(a,b,c,d){var e=xo(this.element,this.wn,a,b,null,c,10,d,this.Pv);if(e&496){var h=Uo(e,this.wn);b=Uo(e,b);e=xo(this.element,h,a,b,null,c,10,d,this.Pv);e&496&&(h=Uo(e,h),b=Uo(e,b),xo(this.element,h,a,b,null,c,this.fr,d,this.Pv))}};function Uo(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Vo(a,b,c,d){To.call(this,a,b,c||d);if(c||d)this.fr=65|(d?32:132)}w(Vo,To);function Wo(){}w(Wo,Pn);fa(Wo);f=Wo.prototype;f.Ng=function(){return"button"};f.gh=function(a,b,c){switch(b){case 8:case 16:Yk(a,"pressed",c);break;default:case 64:case 1:Wo.d.gh.call(this,a,b,c)}};f.w=function(a){var b=Wo.d.w.call(this,a);this.gs(b,a.On());var c=a.J();c&&this.H(b,c);Wn(a,16)&&this.gh(b,16,a.Sg());return b};f.yb=function(a,b){b=Wo.d.yb.call(this,a,b);var c=this.J(b);a.og=c;a.Lw=this.On(b);Wn(a,16)&&this.gh(b,16,a.Sg());return b};f.J=ea;f.H=ea;f.On=function(a){return a.title};
f.gs=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.Ko=function(a,b){var c=a.Le(),d=this.W()+"-collapse-left",e=this.W()+"-collapse-right";a.ik(c?e:d,!!(b&1));a.ik(c?d:e,!!(b&2))};f.W=function(){return"goog-button"};function Xo(){}w(Xo,Wo);fa(Xo);f=Xo.prototype;f.Ng=function(){};f.w=function(a){a.No(!1);a.mn&=-256;a.bd(32,!1);return a.N().w("button",{"class":this.lk(a).join(" "),disabled:!a.isEnabled(),title:a.On()||"",value:a.J()||""},a.yq()||"")};f.Fe=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.yb=function(a,b){a.No(!1);a.mn&=-256;a.bd(32,!1);if(b.disabled){var c=this.Jn(1);bl(b,c)}return Xo.d.yb.call(this,a,b)};
f.dm=function(a){a.ab().A(a.a(),"click",a.Ek)};f.Jo=ea;f.qm=ea;f.Ph=function(a){return a.isEnabled()};f.nj=ea;f.qc=function(a,b,c){Xo.d.qc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.J=function(a){return a.value};f.H=function(a,b){a&&(a.value=b)};f.gh=ea;function Yo(a,b,c){eo.call(this,a,b||Xo.ee(),c)}w(Yo,eo);f=Yo.prototype;f.J=function(){return this.og};f.H=function(a){this.og=a;this.Pa().H(this.a(),a)};f.On=function(){return this.Lw};f.gs=function(a){this.Lw=a;this.Pa().gs(this.a(),a)};f.Ko=function(a){this.Pa().Ko(this,a)};f.f=function(){Yo.d.f.call(this);delete this.og;delete this.Lw};f.$a=function(){Yo.d.$a.call(this);if(Wn(this,32)){var a=this.lc();a&&this.ab().A(a,"keyup",this.Vf)}};
f.Vf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Ek(a):32==a.keyCode};Mn("goog-button",function(){return new Yo(null)});function Zo(){}w(Zo,Wo);fa(Zo);f=Zo.prototype;f.w=function(a){var b={"class":"goog-inline-block "+this.lk(a).join(" ")},b=a.N().w("div",b,this.iq(a.getContent(),a.N()));this.gs(b,a.On());Sn(this,a,b);return b};f.Ng=function(){return"button"};f.Ia=function(a){return a&&a.firstChild.firstChild};f.iq=function(a,b){return b.w("div","goog-inline-block "+(this.W()+"-outer-box"),b.w("div","goog-inline-block "+(this.W()+"-inner-box"),a))};f.Fe=function(a){return"DIV"==a.tagName};
f.yb=function(a,b){$o(b,!0);$o(b,!1);var c;a:{c=a.N().Yz(b);var d=this.W()+"-outer-box";if(c&&al(c,d)&&(c=a.N().Yz(c),d=this.W()+"-inner-box",c&&al(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.iq(b.childNodes,a.N()));cl(b,["goog-inline-block",this.W()]);return Zo.d.yb.call(this,a,b)};f.W=function(){return"goog-custom-button"};
function $o(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ia(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function ap(){}w(ap,Zo);fa(ap);f=ap.prototype;f.Ia=function(a){return ap.d.Ia.call(this,a&&a.firstChild)};f.yb=function(a,b){var c=Kh("*","goog-menu",b)[0];if(c){Ti(c,!1);Ih(c).body.appendChild(c);var d=new Qo;d.yb(c);bp(a,d)}return ap.d.yb.call(this,a,b)};f.iq=function(a,b){return ap.d.iq.call(this,[this.createCaption(a,b),b.w("div","goog-inline-block "+(this.W()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.w("div","goog-inline-block "+(this.W()+"-caption"),a)};f.W=function(){return"goog-menu-button"};function cp(a,b,c,d,e){Yo.call(this,a,c||ap.ee(),d);this.bd(64,!0);this.or=new Vo(null,5);b&&bp(this,b);this.fJ=null;this.oa=new Vf(500);!Do&&!Eo||oc("533.17.9")||(this.Yq=!0);this.gJ=e||wo.ee()}w(cp,Yo);f=cp.prototype;f.Yq=!1;f.VK=!1;f.$a=function(){cp.d.$a.call(this);dp(this,!0);this.T&&ep(this,this.T,!0);Yk(this.o,"haspopup",!!this.T)};f.vc=function(){cp.d.vc.call(this);dp(this,!1);if(this.T){this.Yb(!1);this.T.vc();ep(this,this.T,!1);var a=this.T.a();a&&R(a)}};
f.f=function(){cp.d.f.call(this);this.T&&(this.T.g(),delete this.T);delete this.NK;this.oa.g()};f.Qg=function(a){cp.d.Qg.call(this,a);this.Rg()&&(this.Yb(!(this.R&64),a),this.T&&(this.T.Uh=!!(this.R&64)))};f.Wf=function(a){cp.d.Wf.call(this,a);this.T&&!this.Rg()&&(this.T.Uh=!1)};f.Ek=function(){this.setActive(!1);return!0};f.jI=function(a){this.T&&this.T.sa()&&!this.Yj(a.target)&&this.Yb(!1)};f.Yj=function(a){return a&&ei(this.a(),a)||this.T&&this.T.Yj(a)||!1};
f.Vf=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.T&&this.T.sa()){var b=this.T.Pg(a);return 27==a.keyCode?(this.Yb(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.Yb(!0,a),!0):!1};f.oI=function(){this.Yb(!1)};f.pI=function(){this.Rg()||this.Yb(!1)};f.pk=function(a){this.Yq||this.Yb(!1);cp.d.pk.call(this,a)};f.ru=function(){this.T||bp(this,new Qo(this.N(),this.gJ));return this.T||null};
function bp(a,b){var c=a.T;b!=c&&(c&&(a.Yb(!1),a.fa&&ep(a,c,!1),delete a.T),a.fa&&Yk(a.o,"haspopup",!!b),b&&(a.T=b,b.Oo(a),b.aa(!1),c=a.Yq,(b.tt=c)&&b.nj(!0),a.fa&&ep(a,b,!0)))}f.Tj=function(a){this.ru().kn(a,!0)};f.aa=function(a,b){var c=cp.d.aa.call(this,a,b);c&&!this.sa()&&this.Yb(!1);return c};f.pc=function(a){cp.d.pc.call(this,a);this.isEnabled()||this.Yb(!1)};f.ow=function(){this.Yb(!0)};f.Rn=function(){this.Yb(!1)};
f.Yb=function(a,b){cp.d.Yb.call(this,a);if(this.T&&!!(this.R&64)==a){if(a){if(!this.T.fa)if(this.VK){var c=ci(this.a());c?this.T.Yg(c.parentNode,c):this.T.n(this.a().parentNode)}else this.T.n();this.gD=Gi(this.a());this.Yy=Ri(this.a());fp(this);this.T.ah(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.T.Uh=!1;if(c=this.a())Yk(c,"activedescendant",""),Yk(c,"owns","");null!=this.Hr&&(this.Hr=void 0,(c=this.T.a())&&Ni(c,"",""))}this.T.aa(a,!1,b);if(!this.dk){var c=this.ab(),d=a?c.A:
c.ob;d.call(c,ri(this.N()),"mousedown",this.jI,!0);this.Yq&&d.call(c,this.T,"blur",this.pI);d.call(c,this.oa,Wf,this.pK);a?this.oa.start():this.oa.stop()}}};function fp(a){if(a.T.fa){var b=a.or;a.or.element=a.NK||a.a();var c=a.T.a();a.T.sa()||(c.style.visibility="hidden",Ti(c,!0));!a.Hr&&a.or.ZG&&a.or.fr&32&&(a.Hr=T(c));b.le(c,b.wn^1,a.fJ,a.Hr);a.T.sa()||(Ti(c,!1),c.style.visibility="visible")}}
f.pK=function(){var a=Ri(this.a()),b=Gi(this.a()),c=this.Yy;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.gD,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Yy=a,this.gD=b,fp(this))};function ep(a,b,c){var d=a.ab();c=c?d.A:d.ob;c.call(d,b,"action",a.oI);c.call(d,b,"highlight",a.Au);c.call(d,b,"unhighlight",a.Bu)}function dp(a,b){var c=a.ab();(b?c.A:c.ob).call(c,a.a(),"keydown",a.mI)}
f.Au=function(a){var b=this.a();if(a=a.target.a()){var c=Zk(a,"activedescendant");a=Ih(a).getElementById(c)||a;a.id||(c=fj.ee(),a.id=":"+(c.uB++).toString(36));c="";a&&(c=a.id);Yk(b,"activedescendant",c);Yk(b,"owns",a.id)}};f.mI=function(a){Wn(this,32)&&this.lc()&&this.T&&this.T.sa()&&a.stopPropagation()};f.Bu=function(){if(!Io(this.T)){var a=this.a();Yk(a,"activedescendant","");Yk(a,"owns","")}};Mn("goog-menu-button",function(){return new cp(null)});function gp(){V.call(this);this.ge=Q("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":gp.CSS.$D});Xh(this.a(),this.ge);this.cj=Q("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":gp.CSS.hb});Xh(this.a(),this.cj);this.T=new Qo;this.kb=new ek;this.Cb=[];hp(this);this.Rn(void 0,0);this.T.n(this.ge);N(this.T.a(),gp.CSS.ZD)}w(gp,V);v("nrg.ui.SlideInMenu",gp);gp.ID_PREFIX="nrg.ui.SlideInMenu";
gp.CSS_SUFFIX={hb:"icon",GM:"icon-hovered",ZD:"menu",$D:"menuholder",aE:"menuitem",ux:"menuitem-highlight",bE:"menuitem-icon"};var ip={Cs:null,lh:null,hb:null};function jp(a,b,c,d){d=ca(d)?d:200;return[new Zj(a,d),new Tj(a,b,c,d,sk)]}function kp(a,b,c,d){d=ca(d)?d:200;return[new Yj(a,d),new Tj(a,b,c,d,sk)]}f=gp.prototype;f.nc=null;f.IB=null;f.Fl=null;f.km=!1;f.Sn=[-100,-100];f.Yo=[0,0];f.$u=!0;f.av=!1;f.jC=function(a,b){return this.Sn=[a,b]};f.yC=function(a,b){return this.Yo=[a,b]};f.SG=function(){return this.Sn};
f.FH=function(){return this.Yo};f.ru=function(){return this.T};f.hH=function(){return this.ge};f.iH=function(){return this.cj};f.nC=function(a){this.cj.src=a};f.kL=function(a,b){this.nc[a].hb.src=b};f.bA=function(a){return ob(this.nc).indexOf(a)};f.vu=function(a){return ob(this.nc)[a]};f.ou=function(a){return this.nc[ob(this.nc)[a]]};f.iB=function(a){return this.$u=a};f.dJ=function(a){return this.av=a};f.DH=function(){return this.Fl};
function lp(a){null!=a.kb&&(a.kb.stop(),D(a.Cb,function(a){this.kb.remove(a);a.g()}.bind(a)),Ib(a.Cb))}function mp(a,b,c){lp(a);D(g(b)?b:[b],function(a){this.kb.add(a);this.Cb.push(a)}.bind(a));a.ge.style.visibility="visible";Sc(a.kb,"end",function(){c&&c()}.bind(a));a.kb.play()}f.Nl=null;f.oq=null;f.dC=function(a){this.oq=a;this.a().title=a};function np(a){null!=a.Nl&&(ba.clearTimeout(a.Nl),a.Nl=null);a.Nl=Xf(function(){this.Nl=null;this.km&&(!this.gv&&this.km?this.Rn():np(this))}.bind(a),450)}
f.ah=function(a){N(this.nc[this.vu(a)].lh,gp.CSS.ux);this.$u&&(this.cj.src=this.nc[this.vu(a)].hb.src);this.av?this.a().title=this.ou(a).Cs.getContent():null!=this.oq&&(this.a().title=this.oq)};f.xz=function(){C(this.nc,function(a){Ah(a.lh,gp.CSS.ux)}.bind(this))};
f.oy=function(a,b){null==this.nc&&(this.nc={});a=r(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;D(a,function(a,k){if(this.nc[a])throw Error(a+" is already in use!");c=new oo(a);this.T.Tj(c);d=c.Ia();N(d,gp.CSS.aE);d.title=a;e=Q("img",{id:gp.ID_PREFIX+"_MenuItemIcon_"+B(),"class":gp.CSS.bE});e.src=k<=b.length-1?b[k]:null;Xh(d,e);this.nc[a]=vb(ip);this.nc[a].Cs=c;this.nc[a].lh=d;this.nc[a].hb=e}.bind(this))};
f.Ro=function(a,b){var c=a;if(r(c)){if(!this.nc[c])throw Error(c+" does not exist!");c=this.bA(c)}this.IB=this.Fl?this.Fl:a;this.Fl=a;ca(b)&&!b||this.xz();this.ah(c);this.dispatchEvent({type:"item_selected",index:c,title:this.ou(c).Cs.getContent()})};f.ow=function(a,b){mp(this,jp(this.ge,this.Sn,this.Yo,b),function(){this.km=!0;null!=a&&a()}.bind(this))};f.Rn=function(a,b){mp(this,kp(this.ge,this.Yo,this.Sn,b),function(){this.km=!1;this.ge.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function hp(a){F(a.a(),"click",function(){this.km?this.Rn():this.ow()}.bind(a));F(a.T,"action",function(a){this.Ro(a.target.getContent())}.bind(a));F(a.ge,"mouseover",function(){this.gv=!0}.bind(a));F(a.ge,"mouseout",function(){this.gv=!1;np(this)}.bind(a))}
f.f=function(){gp.d.f.call(this);delete this.gv;delete this.Nl;lp(this);Ib(this.Cb);delete this.Cb;C(this.nc,function(a,b){I(a);R(a);delete this.nc[b]}.bind(this));sb(this.nc);delete this.nc;R(this.ge);delete this.ge;R(this.cj);delete this.cj;I(this.T);this.T.g();this.pq(this.kb);delete this.kb;delete this.oq;delete this.IB;delete this.Fl;delete this.km;delete this.Sn;delete this.Yo;delete this.$u;delete this.av};v("nrg.ui.SlideInMenu.ID_PREFIX",gp.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{KM:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",gp.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",ip);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",gp.prototype.jC);v("nrg.ui.SlideInMenu.prototype.setShowPosition",gp.prototype.yC);v("nrg.ui.SlideInMenu.prototype.getHidePosition",gp.prototype.SG);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",gp.prototype.FH);v("nrg.ui.SlideInMenu.prototype.getMenu",gp.prototype.ru);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",gp.prototype.hH);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",gp.prototype.iH);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",gp.prototype.nC);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",gp.prototype.kL);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",gp.prototype.bA);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",gp.prototype.vu);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",gp.prototype.ou);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",gp.prototype.iB);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",gp.prototype.dJ);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",gp.prototype.DH);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",gp.prototype.ah);v("nrg.ui.SlideInMenu.prototype.deselectAll",gp.prototype.xz);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",gp.prototype.oy);v("nrg.ui.SlideInMenu.prototype.setSelected",gp.prototype.Ro);v("nrg.ui.SlideInMenu.prototype.showMenu",gp.prototype.ow);v("nrg.ui.SlideInMenu.prototype.hideMenu",gp.prototype.Rn);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",gp.prototype.dC);v("nrg.ui.SlideInMenu.prototype.disposeInternal",gp.prototype.f);function op(){V.call(this)}w(op,V);v("xiv.ui.layouts.interactors.InputController",op);op.ID_PREFIX="xiv.ui.layouts.interactors.InputController";op.CSS_SUFFIX={OD:"inputbox",JM:"inputbox-hovered",ex:"display"};f=op.prototype;f.ff=null;f.Ja=null;f.DI=!1;f.J=function(){if(null!=this.Ja)return this.Ja.value};f.H=function(a){null!=this.Ja&&(this.Ja.value=a,this.ih())};f.yc=function(a){null!=this.Ja&&(this.Ja.max=a,this.ih())};f.qd=function(a){null!=this.Ja&&(this.Ja.min=a,this.ih())};f.ih=function(){};
f.zB=function(a){this.Ja.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.Ja.value});this.ih()};
f.n=function(a){op.d.n.call(this,a);this.ff=Q("div");this.a().appendChild(this.ff);N(this.ff,op.CSS.ex);this.Ja=Q("input");this.Ja.type="number";this.Ja.step=1;this.Ja.min=0;this.Ja.value=0;this.a().appendChild(this.Ja);N(this.Ja,op.CSS.OD);F(this.Ja,"mouseenter",function(a){a.stopPropagation();this.Ja.style.opacity=1;this.ff.style.opacity=0}.bind(this));F(this.Ja,"mouseleave",function(a){a.stopPropagation();this.Ja.style.opacity=0;this.ff.style.opacity=1}.bind(this));F(this.Ja,"input",this.zB.bind(this));
this.ih()};f.f=function(){op.d.f.call(this);delete this.DI;this.Ja&&(I(this.Ja),R(this.Ja),delete this.Ja);this.ff&&(I(this.ff),R(this.ff),delete this.ff)};v("xiv.ui.layouts.interactors.InputController.EventType",{IM:"input",ex:"display"});v("xiv.ui.layouts.interactors.InputController.ID_PREFIX",op.ID_PREFIX);v("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",op.CSS_SUFFIX);v("xiv.ui.layouts.interactors.InputController.prototype.displayElt",op.prototype.ff);
v("xiv.ui.layouts.interactors.InputController.prototype.inputBox",op.prototype.Ja);v("xiv.ui.layouts.interactors.InputController.prototype.getValue",op.prototype.J);v("xiv.ui.layouts.interactors.InputController.prototype.setValue",op.prototype.H);v("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",op.prototype.yc);v("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",op.prototype.qd);v("xiv.ui.layouts.interactors.InputController.prototype.updateValue",op.prototype.ih);
v("xiv.ui.layouts.interactors.InputController.prototype.onInput",op.prototype.zB);v("xiv.ui.layouts.interactors.InputController.prototype.render",op.prototype.n);v("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",op.prototype.f);function pp(){V.call(this)}w(pp,op);v("xiv.ui.layouts.interactors.FrameDisplay",pp);pp.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";pp.prototype.ih=function(){this.ff.innerHTML=this.Ja.value+" / "+this.Ja.max};v("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",pp.ID_PREFIX);v("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",pp.prototype.ih);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function qp(a,b,c){this.Xe=this.We=this.Ve=0;3==arguments.length?(this.Ve=Number(a),this.We=Number(b),this.Xe=Number(c)):a instanceof qp?(this.Ve=Number(a.x()),this.We=Number(a.y()),this.Xe=Number(a.z())):(this.Ve=Number(a[0]),this.We=Number(a[1]),this.Xe=Number(a[2]))}
qp.prototype={clone:function(){return new qp(this.Ve,this.We,this.Xe)},Oi:function(a){return this.Ve*a.x()+this.We*a.y()+this.Xe*a.z()},hr:function(a,b){return rp(this,sp(tp(a,this),b))},length:function(){return Math.sqrt(this.Oi(this))},bk:function(a){return new qp(this.We*a.z()-this.Xe*a.y(),this.Xe*a.x()-this.Ve*a.z(),this.Ve*a.y()-this.We*a.x())},x:function(){return this.Ve},y:function(){return this.We},z:function(){return this.Xe}};
function up(a){var b=a.length();return new qp(a.Ve/b,a.We/b,a.Xe/b)}function sp(a,b){return new qp(a.Ve*b,a.We*b,a.Xe*b)}function tp(a,b){return new qp(a.Ve-b.x(),a.We-b.y(),a.Xe-b.z())}function rp(a,b){return new qp(a.Ve+b.x(),a.We+b.y(),a.Xe+b.z())}function vp(a){return new qp(-a.Ve,-a.We,-a.Xe)};function wp(a,b){this.Uv=new qp(a);this.ad=new qp(b)}wp.prototype={clone:function(){return new wp(this.Uv.clone(),this.ad.clone())},kk:function(){this.ad=vp(this.ad)},Qe:function(){return this.Uv}};function xp(a,b){this.ad=a;this.rp=b}xp.prototype={clone:function(){return new xp(this.ad.clone(),this.rp)},kk:function(){this.ad=vp(this.ad);this.rp=-this.rp}};function yp(a,b){this.hi=a;this.hs=b;var c=a[0].Qe(),d=a[1].Qe(),e=a[2].Qe(),d=up(tp(d,c).bk(tp(e,c)));this.Pe=new xp(d,d.Oi(c))}yp.prototype={clone:function(){var a=this.hi.map(function(a){return a.clone()});return new yp(a,this.hs)},kk:function(){this.hi.reverse().map(function(a){a.kk()});this.Pe.kk()}};
function zp(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.hi.length;n++){var p=b.ad.Oi(a.hi[n].Qe())-b.rp,p=-1E-5>p?2:1E-5<p?1:0,k=k|p;l.push(p)}switch(k){case 0:(0<b.ad.Oi(a.Pe.ad)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.hi.length;n++){var m=(n+1)%a.hi.length,p=l[n],q=l[m],k=a.hi[n],m=a.hi[m];2!=p&&c.push(k);1!=p&&d.push(2!=p?k.clone():k);3==(p|q)&&(p=(b.rp-b.ad.Oi(k.Qe()))/b.ad.Oi(tp(m.Qe(),k.Qe())),p=new wp(k.Uv.hr(m.Qe(),p),k.ad.hr(m.ad,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new yp(c,a.hs));3<=d.length&&h.push(new yp(d,a.hs))}};function Ap(a){this.jd=this.ld=this.Pe=null;this.Hb=[];a&&Bp(this,a)}Ap.prototype={clone:function(){var a=new Ap;Cp(a,this.Pe&&this.Pe.clone());Dp(a,this.ld&&this.ld.clone());Ep(a,this.jd&&this.jd.clone());a.es(this.Hb.map(function(a){return a.clone()}));return a},zb:function(){for(var a=0;a<this.Hb.length;a++)this.Hb[a].kk();this.Pe.kk();this.ld&&this.ld.zb();this.jd&&this.jd.zb();a=this.ld;this.ld=this.jd;this.jd=a},es:function(a){this.Hb=a}};function Ep(a,b){a.jd=b}function Dp(a,b){a.ld=b}
function Cp(a,b){a.Pe=b}function Bp(a,b){if(b.length){a.Pe||(a.Pe=b[0].Pe.clone());for(var c=[],d=[],e=0;e<b.length;e++)zp(b[e],a.Pe,a.Hb,a.Hb,c,d);c.length&&(a.ld||(a.ld=new Ap),Bp(a.ld,c));d.length&&(a.jd||(a.jd=new Ap),Bp(a.jd,d))}}function Fp(a){var b=a.Hb.slice();a.ld&&(b=b.concat(Fp(a.ld)));a.jd&&(b=b.concat(Fp(a.jd)));return b}function Gp(a,b){a.Hb=Hp(b,a.Hb);a.ld&&Gp(a.ld,b);a.jd&&Gp(a.jd,b)}
function Hp(a,b){if(!a.Pe)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)zp(b[e],a.Pe,c,d,c,d);a.ld&&(c=Hp(a.ld,c));d=a.jd?Hp(a.jd,d):[];return c.concat(d)};function Ip(){this.Hb=[]}function Jp(a){var b=new Ip;b.es(a);return b}
Ip.prototype={clone:function(){var a=new Ip;a.es(this.Hb.map(function(a){return a.clone()}));return a},Qw:function(a){var b=new Ap(this.clone().Hb);a=new Ap(a.clone().Hb);Gp(b,a);Gp(a,b);a.zb();Gp(a,b);a.zb();Bp(b,Fp(a));return Jp(Fp(b))},zc:function(a){var b=new Ap(this.clone().Hb);a=new Ap(a.clone().Hb);b.zb();Gp(b,a);Gp(a,b);a.zb();Gp(a,b);a.zb();Bp(b,Fp(a));b.zb();return Jp(Fp(b))},Ju:function(a){var b=new Ap(this.clone().Hb);a=new Ap(a.clone().Hb);b.zb();Gp(a,b);a.zb();Gp(b,a);Gp(a,b);Bp(b,Fp(a));
b.zb();return Jp(Fp(b))},inverse:function(){var a=this.clone();a.Hb.map(function(a){a.kk()});return a},es:function(a){this.Hb=a}};function Kp(){}function Lp(a){for(var b=a.C.count,c=[],d=0,d=0;d<b;d+=3){var e=a.C.get(d),h=a.C.get(d+1),k=a.C.get(d+2),l=a.ca.get(d),n=a.ca.get(d+1),p=a.ca.get(d+2),m=a.Ga;a.Ec&&0<a.Ec.length&&(m=a.Ec.get(d));var q=[];q.push(new wp(e,l));q.push(new wp(h,n));q.push(new wp(k,p));c.push(new yp(q,m))}return Jp(c)}
function Mp(a,b){if(!(null!=b&&b instanceof Ip))throw Error("Invalid CSG object.");var c=new cd,d=[];Cb(b.Hb,function(a){var b=[],k=a.hs,b=Cb(a.hi,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.XE=Cb(c.unique(),function(a){return[a.Qe().x(),a.Qe().y(),a.Qe().z()]});a.WE=Cb(c.unique(),function(a){return[a.ad.x(),a.ad.y(),a.ad.z()]});a.VE=Cb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.C=new bd(9*d.length);
a.ca=new bd(9*d.length);a.Ec=new bd(9*d.length);Cb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.XE,n=this.WE,p=this.VE;this.C.add(d[b][0],d[b][1],d[b][2]);this.C.add(d[c][0],d[c][1],d[c][2]);this.C.add(d[a][0],d[a][1],d[a][2]);this.ca.add(n[b][0],n[b][1],n[b][2]);this.ca.add(n[c][0],n[c][1],n[c][2]);this.ca.add(n[a][0],n[a][1],n[a][2]);p[b]&&this.Ec.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Ec.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Ec.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Ec.La&&(a.Ec=null);
a.Cd=Rd}Kp.prototype.Qw=function(a){if(null==a||!(a instanceof Ip||a instanceof Ud))throw Error("Invalid object.");var b=a;a instanceof Ud&&(b=Lp(b));a=new Ud;xa(a,new Kp);Mp(a,Lp(this).Qw(b));return a};Kp.prototype.zc=function(a){if(null==a||!(a instanceof Ip||a instanceof Ud))throw Error("Invalid object.");var b=a;a instanceof Ud&&(b=Lp(b));a=new Ud;xa(a,new Kp);Mp(a,Lp(this).zc(b));return a};
Kp.prototype.Ju=function(a){if(null==a||!(a instanceof Ip||a instanceof Ud))throw Error("Invalid object.");var b=a;a instanceof Ud&&(b=Lp(b));a=new Ud;xa(a,new Kp);Mp(a,Lp(this).Ju(b));return a};Kp.prototype.inverse=function(){var a=new Ud;xa(a,new Kp);Mp(a,Lp(this).inverse());return a};v("X.constructable",Kp);v("X.constructable.prototype.intersect",Kp.prototype.Ju);v("X.constructable.prototype.inverse",Kp.prototype.inverse);v("X.constructable.prototype.subtract",Kp.prototype.zc);
v("X.constructable.prototype.union",Kp.prototype.Qw);function Np(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new qp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new wp(rp(c,sp(e,d)),e))}this.Hb=[];a=a||{};var c=new qp(a.Zd||[0,0,0]),d=a.Wg||1,e=a.za||16;a=a.AL||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new yp(k));return Jp(h)}w(Np,Ip);function Op(){Ud.call(this);this.s="sphere";this.Sa=[0,0,0];this.Mj=5;this.Sc=32;this.bF=16;xa(this,new Kp)}w(Op,Ud);Op.prototype.__defineGetter__("center",function(){return this.Sa});Op.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Sa=a});Op.prototype.__defineGetter__("radius",function(){return this.Mj});Op.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Mj=a});
Op.prototype.da=function(){Mp(this,new Np({Zd:this.Sa,Wg:this.Mj,za:this.Sc,AL:this.bF}));Op.d.da.call(this)};v("X.sphere",Op);v("X.sphere.prototype.modified",Op.prototype.da);function Pp(a,b){Zc.call(this);this.o=a;var c=di(this.o)?this.o:this.o?this.o.body:null;this.QI=!!c&&Ii(c);this.aB=F(this.o,gc?"DOMMouseScroll":"mousewheel",this,b)}w(Pp,Zc);
Pp.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Ic;if("mousewheel"==a.type){c=1;if(E||hc&&(cc||oc("532.0")))c=40;d=Qp(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=Qp(-a.wheelDeltaX,c),c=Qp(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;u(this.jB)&&(b=gd(b,-this.jB,this.jB));u(this.kB)&&(c=gd(c,-this.kB,this.kB));this.QI&&(b=-b);b=new Rp(d,a,b,c);this.dispatchEvent(b)};function Qp(a,b){return hc&&(bc||dc)&&0!=a%b?a:a/b}
Pp.prototype.f=function(){Pp.d.f.call(this);Uc(this.aB);this.aB=null};function Rp(a,b,c,d){Gc.call(this,b);this.type="mousewheel";this.detail=a;this.Eh=c;this.Fd=d}w(Rp,Gc);function Sp(){Zc.call(this)}w(Sp,Zc);f=Sp.prototype;f.og=0;f.ag=0;f.pf=100;f.He=0;f.ei=1;f.he=!1;f.zk=!1;f.H=function(a){a=Tp(this,a);this.og!=a&&(this.og=a+this.He>this.pf?this.pf-this.He:a<this.ag?this.ag:a,this.he||this.zk||this.dispatchEvent("change"))};f.J=function(){return Tp(this,this.og)};f.mj=function(a){a=Tp(this,a);this.He!=a&&(this.He=0>a?0:this.og+a>this.pf?this.pf-this.og:a,this.he||this.zk||this.dispatchEvent("change"))};
f.hf=function(){var a=this.He;return null==this.ei?a:Math.round(a/this.ei)*this.ei};f.qd=function(a){if(this.ag!=a){var b=this.he;this.he=!0;this.ag=a;a+this.He>this.pf&&(this.He=this.pf-this.ag);a>this.og&&this.H(a);a>this.pf&&(this.He=0,this.yc(a),this.H(a));(this.he=b)||this.zk||this.dispatchEvent("change")}};f.na=function(){return Tp(this,this.ag)};
f.yc=function(a){a=Tp(this,a);if(this.pf!=a){var b=this.he;this.he=!0;this.pf=a;a<this.og+this.He&&this.H(a-this.He);a<this.ag&&(this.He=0,this.qd(a),this.H(this.pf));a<this.ag+this.He&&(this.He=this.pf-this.ag);(this.he=b)||this.zk||this.dispatchEvent("change")}};f.ga=function(){return Tp(this,this.pf)};f.Mh=function(){return this.ei};f.kg=function(a){this.ei!=a&&(this.ei=a,a=this.he,this.he=!0,this.yc(this.ga()),this.mj(this.hf()),this.H(this.J()),(this.he=a)||this.zk||this.dispatchEvent("change"))};
function Tp(a,b){return null==a.ei?b:a.ag+Math.round((b-a.ag)/a.ei)*a.ei};function Up(a,b){gj.call(this,a);this.Ky=null;this.Ka=new Sp;this.SI=b||fd;F(this.Ka,"change",this.EA,!1,this)}w(Up,gj);f=Up.prototype;f.Fa="horizontal";f.$n=!1;f.nJ=!1;f.Dg=10;f.pr=0;f.UA=!0;f.sr=0;f.fE=1E3;f.Hc=!0;f.Ie=!1;f.w=function(){Up.d.w.call(this);var a=this.N().w("div",this.W(this.Fa));this.$d(a)};f.$d=function(a){Up.d.$d.call(this,a);bl(a,this.W(this.Fa));this.qz();Xk(this.a(),"slider");Vp(this)};
f.$a=function(){Up.d.$a.call(this);this.ve=new fm(this.pa);this.Sf=new fm(this.wc);this.ve.Ri(this.Ie);this.Sf.Ri(this.Ie);this.ve.Ut=this.Sf.Ut=ea;this.mb=new Yn(this.a());Wp(this,!0);this.a().tabIndex=0;this.hh()};
function Wp(a,b){b?(a.ab().A(a.ve,"beforedrag",a.Iq).A(a.Sf,"beforedrag",a.Iq).A(a.ve,["start","end"],a.Nq).A(a.Sf,["start","end"],a.Nq).A(a.mb,"key",a.Jq).A(a.a(),"click",a.Kq).A(a.a(),"mousedown",a.Kq),a.UA&&Xp(a,!0)):(a.ab().ob(a.ve,"beforedrag",a.Iq).ob(a.Sf,"beforedrag",a.Iq).ob(a.ve,["start","end"],a.Nq).ob(a.Sf,["start","end"],a.Nq).ob(a.mb,"key",a.Jq).ob(a.a(),"click",a.Kq).ob(a.a(),"mousedown",a.Kq),a.UA&&Xp(a,!1))}f.vc=function(){Up.d.vc.call(this);Bc(this.ve,this.Sf,this.mb,this.yk)};
f.Iq=function(a){var b=a.bu==this.ve?this.pa:this.wc,c;"vertical"==this.Fa?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.ga()-this.na())+this.na()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.ga()-this.na())+this.na();c=a.bu==this.ve?Math.min(Math.max(c,this.na()),this.J()+this.hf()):Math.min(Math.max(c,this.J()),this.ga());Yp(this,b,c)};
f.Nq=function(a){var b="start"==a.type;fl(this.a(),"goog-slider-dragging",b);fl(a.target.handle,"goog-slider-thumb-dragging",b);a=a.bu==this.ve;b?(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j")):(this.dispatchEvent("m"),this.dispatchEvent(a?"i":"k"))};
f.Jq=function(a){var b=!0;switch(a.keyCode){case 36:Zp(this,this.na());break;case 35:Zp(this,this.ga());break;case 33:$p(this,this.Dg);break;case 34:$p(this,-this.Dg);break;case 37:var c=this.Ie&&this.Le()?1:-1;$p(this,a.shiftKey?c*this.Dg:c*this.np);break;case 40:$p(this,a.shiftKey?-this.Dg:-this.np);break;case 39:c=this.Ie&&this.Le()?-1:1;$p(this,a.shiftKey?c*this.Dg:c*this.np);break;case 38:$p(this,a.shiftKey?this.Dg:this.np);break;default:b=!1}b&&a.preventDefault()};
f.Kq=function(a){this.a().focus&&this.a().focus();var b=a.target;ei(this.pa,b)||ei(this.wc,b)||(b="click"==a.type,b&&wa()<this.sr+this.fE||(b||(this.sr=wa()),this.nJ?Zp(this,aq(this,a)):(this.Dw(a),this.vf=bq(this,aq(this,a)),this.PA="vertical"==this.Fa?this.er<this.vf.offsetTop:this.er>cq(this,this.vf)+this.vf.offsetWidth,a=Ih(this.a()),this.ab().A(a,"mouseup",this.Bw,!0).A(this.a(),"mousemove",this.Dw),this.ej||(this.ej=new Vf(200),this.ab().A(this.ej,Wf,this.FA)),this.FA(),this.ej.start())))};
f.DA=function(a){$p(this,(0<a.detail?-1:1)*this.np);a.preventDefault()};f.FA=function(){var a;if("vertical"==this.Fa){var b=this.er,c=this.vf.offsetTop;this.PA?b<c&&(a=dq(this,this.vf)+this.Dg):b>c+this.vf.offsetHeight&&(a=dq(this,this.vf)-this.Dg)}else b=this.er,c=cq(this,this.vf),this.PA?b>c+this.vf.offsetWidth&&(a=dq(this,this.vf)+this.Dg):b<c&&(a=dq(this,this.vf)-this.Dg);ca(a)&&Yp(this,this.vf,a)};
f.Bw=function(){this.ej&&this.ej.stop();var a=Ih(this.a());this.ab().ob(a,"mouseup",this.Bw,!0).ob(this.a(),"mousemove",this.Dw)};function eq(a,b){var c=Ji(b,a.a());return"vertical"==a.Fa?c.y:a.Ie&&a.Le()?a.a().clientWidth-c.x:c.x}f.Dw=function(a){this.er=eq(this,a)};function aq(a,b){var c=a.na(),d=a.ga();if("vertical"==a.Fa){var e=a.pa.offsetHeight,h=a.a().clientHeight-e,e=eq(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.pa.offsetWidth;h=a.a().clientWidth-e;e=eq(a,b)-e/2;return(d-c)*e/h+c}
function dq(a,b){if(b==a.pa)return a.Ka.J();if(b==a.wc)return a.Ka.J()+a.Ka.hf();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.Zf=function(){return this.ve.Zf()||this.Sf.Zf()};function $p(a,b){Math.abs(b)<a.Mh()&&(b=(0==b?0:0>b?-1:1)*a.Mh());var c=dq(a,a.pa)+b,d=dq(a,a.wc)+b,c=gd(c,a.na(),a.ga()-a.pr),d=gd(d,a.na()+a.pr,a.ga());fq(a,c,d-c)}function Yp(a,b,c){var d=Tp(a.Ka,c);c=b==a.pa?d:a.Ka.J();b=b==a.wc?d:a.Ka.J()+a.Ka.hf();c>=a.na()&&b>=c+a.pr&&a.ga()>=b&&fq(a,c,b-c)}
function fq(a,b,c){a.na()<=b&&b<=a.ga()-c&&a.pr<=c&&c<=a.ga()-b&&(b!=a.J()||c!=a.hf())&&(a.Ka.zk=!0,a.Ka.mj(0),a.Ka.H(b),a.Ka.mj(c),a.Ka.zk=!1,a.EA())}f.na=function(){return this.Ka.na()};f.qd=function(a){this.Ka.qd(a)};f.ga=function(){return this.Ka.ga()};f.yc=function(a){this.Ka.yc(a)};function bq(a,b){return b<=a.Ka.J()+a.Ka.hf()/2?a.pa:a.wc}f.EA=function(){this.hh();Vp(this);this.dispatchEvent("change")};
f.hh=function(){if(this.pa&&!this.$n){var a=gq(this,dq(this,this.pa)),b=gq(this,dq(this,this.wc));if("vertical"==this.Fa)this.pa.style.top=a.y+"px",this.wc.style.top=b.y+"px",this.Pb&&(a=hq(b.y,a.y,this.pa.offsetHeight),this.Pb.style.top=a.offset+"px",this.Pb.style.height=a.size+"px");else{var c=this.Ie&&this.Le()?"right":"left";this.pa.style[c]=a.x+"px";this.wc.style[c]=b.x+"px";this.Pb&&(a=hq(a.x,b.x,this.pa.offsetWidth),this.Pb.style[c]=a.offset+"px",this.Pb.style.width=a.size+"px")}}};
function hq(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function gq(a,b){var c=new qh;if(a.pa){var d=a.na(),e=a.ga(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Fa?(d=a.a().clientHeight-a.pa.offsetHeight,e=Math.round(e*d),c.x=cq(a,a.pa),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.pa.offsetWidth)),c.x=d,c.y=a.pa.offsetTop)}return c}
function Zp(a,b){b=gd(b,a.na(),a.ga());a.$n&&a.nq.stop(!0);var c=new ek,d,e=bq(a,b),h=a.J(),k=a.hf(),l=dq(a,e),n=gq(a,l);d=a.Mh();Math.abs(b-l)<d&&(b=gd(l+(b>l?d:-d),a.na(),a.ga()));Yp(a,e,b);l=gq(a,dq(a,e));d="vertical"==a.Fa?[cq(a,e),l.y]:[l.x,e.offsetTop];n=new Tj(e,[n.x,n.y],d,100);n.Ri(a.Ie);c.add(n);a.Pb&&iq(a,e,h,k,l,c);a.Ky&&(e=a.Ky.SO(h,b,100),D(e,function(a){c.add(a)}));a.nq=c;a.ab().A(c,"end",a.fG);a.$n=!0;c.play(!1)}f.Id=function(){return this.$n};
function iq(a,b,c,d,e,h){var k=gq(a,c),l=gq(a,c+d);c=k;d=l;b==a.pa?c=e:d=e;"vertical"==a.Fa?(b=hq(l.y,k.y,a.pa.offsetHeight),k=hq(d.y,c.y,a.pa.offsetHeight),e=new Tj(a.Pb,[cq(a,a.Pb),b.offset],[cq(a,a.Pb),k.offset],100),b=new Wj(a.Pb,b.size,k.size,100)):(b=hq(k.x,l.x,a.pa.offsetWidth),k=hq(c.x,d.x,a.pa.offsetWidth),e=new Tj(a.Pb,[b.offset,a.Pb.offsetTop],[k.offset,a.Pb.offsetTop],100),b=new Vj(a.Pb,b.size,k.size,100));e.Ri(a.Ie);b.Ri(a.Ie);h.add(e);h.add(b)}f.fG=function(){this.$n=!1};
f.di=function(a){if(this.Fa!=a){var b=this.W(this.Fa),c=this.W(a);this.Fa=a;this.a()&&(a=this.a(),al(a,b)&&(dl(a,b),bl(a,c)),b=this.Ie&&this.Le()?"right":"left",this.pa.style[b]=this.pa.style.top="",this.wc.style[b]=this.wc.style.top="",this.Pb&&(this.Pb.style[b]=this.Pb.style.top="",this.Pb.style.width=this.Pb.style.height=""),this.hh())}};f.Db=function(){return this.Fa};
f.f=function(){Up.d.f.call(this);this.ej&&this.ej.g();delete this.ej;this.nq&&this.nq.g();delete this.nq;delete this.pa;delete this.wc;this.Pb&&delete this.Pb;this.Ka.g();delete this.Ka;this.mb&&(this.mb.g(),delete this.mb);this.yk&&(this.yk.g(),delete this.yk);this.ve&&(this.ve.g(),delete this.ve);this.Sf&&(this.Sf.g(),delete this.Sf)};f.np=1;f.Mh=function(){return this.Ka.Mh()};f.kg=function(a){this.Ka.kg(a)};f.J=function(){return this.Ka.J()};f.H=function(a){Yp(this,this.pa,a)};f.hf=function(){return this.Ka.hf()};
f.mj=function(a){Yp(this,this.wc,this.Ka.J()+a)};f.aa=function(a){Ti(this.a(),a);a&&this.hh()};function Vp(a){var b=a.a();b&&(Yk(b,"valuemin",a.na()),Yk(b,"valuemax",a.ga()),Yk(b,"valuenow",a.J()),Yk(b,"valuetext",a.SI(a.J())||""))}function Xp(a,b){b?(a.yk||(a.yk=new Pp(a.a())),a.ab().A(a.yk,"mousewheel",a.DA)):a.ab().ob(a.yk,"mousewheel",a.DA)}f.pc=function(a){this.Hc!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Hc=a,Wp(this,a),a||this.Bw(),fl(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Hc};function cq(a,b){return a.Ie?Rj(b):b.offsetLeft};function jq(a){Up.call(this,a);this.Ka.H(this.na());this.Ka.mj(this.ga()-this.na())}w(jq,Up);jq.prototype.W=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};jq.prototype.$j=function(a){a=this.N().w("div",a);Xk(a,"button");return a};
jq.prototype.qz=function(){var a=Kh(null,"goog-twothumbslider-value-thumb",this.a())[0],b=Kh(null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Kh(null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.$j("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.$j("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.N().w("div","goog-twothumbslider-rangehighlight"),this.N().Iu(c,a));this.pa=a;this.wc=b;this.Pb=c};function kq(){Ud.call(this);this.s="fibers";xa(this,new ed)}w(kq,Ud);v("X.fibers",kq);function lq(){this.Kk=Q("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.Bc});rl.call(this,"",this.Kk,!0);N(this.Eb,lq.CSS.rE);this.Rf.style.marginTop="-4px";this.Eb.style.marginTop="0px"}w(lq,rl);v("nrg.ui.ZippyTree",lq);var vn="o",mq={pM:"n",gE:vn};lq.ID_PREFIX="nrg.ui.ZippyTree";lq.CSS_SUFFIX={rE:"rootnode"};f=lq.prototype;f.wk=1;f.Ti=!1;f.MI=!0;f.Uq=1;f.du=0;f.Vr=null;f.yf=null;f.ew=function(a){this.vz=a};f.bo=function(){return 0===$h(this.Rf).length};
f.iz=function(){this.lp(function(a){a.cc.Xb(!1)},this)};f.un=function(){this.iz()};f.rG=function(){var a=[];this.lp(function(b){a.push(b)},this);return a};f.xu=function(){var a=[];C(this.Nc,function(b){a.push(b)});return a};f.Ll=function(){this.lp(function(a){a.cc.Xb(!0)},this)};f.lp=function(a,b){C(b.Nc,function(b){a(b);this.lp(a,b)}.bind(this))};f.a=function(){return this.Kk};f.Xb=function(a,b){return nq(this,a,b,!0)};
function nq(a,b,c,d){c=null!=c?c:a;if(null!=c.Nc[b]){var e=c.Nc[b],h=e.cc;null!=h.cf?Sc(h,d?"a":"b",function(){h.Mg!=d&&e.Xb(d)}):e.Xb(d);return e}}f.Ko=function(a,b){return nq(this,a,b,!1)};f.Bq=function(a){var b=this,c=[];D(a,function(a){c.push(b.Nc[a]);b=b.Nc[a]}.bind(this));return c};f.bf=function(a,b){!g(a)||di(a)?oq(this,a,b):D(a,function(a){this.bf(a,b)}.bind(this))};function oq(a,b,c){c?(c&&(c=r(c)?[c]:c,c.length>a.wk&&(a.wk=c.length)),a.xn(c,a,b)):Xh(a.Kk,b)}
f.xn=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.Rf;if(0==a.length)pq(this,b,c),null!=c&&qq(this,c,d-2);else{0<a.length&&a.length>this.wk&&(this.wk=a.length);if(b.Nc[a[0]])e=b.Nc[a[0]];else{var h=a[0];e.style.opacity=this.Uq;var k=new rl(h,e,!1);b.Eb.parentNode==this.Kk&&2==this.Kk.childNodes.length&&(k.Eb.style.marginTop="5px");k.Eb.style.left="inherit";k.Eb.style.width="inherit";rq(this,k);b.Nc[h]=k;k.Eb.style.opacity=this.Uq;e.style.opacity=1;this.Ti&&sq(this,k.Eb);this.dispatchEvent({type:vn,
ke:k});e=k}qq(this,e.Eb,d-1);this.xn(1<a.length?a.slice(1):[],e,c,d+1)}};function qq(a,b,c){null!=b&&b._maxDepth!=a.wk&&(null==b._maxDepth&&(b._maxDepth=a.wk),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}function rq(a,b){F(b,"a",function(){this.dispatchEvent({type:"a",ke:b})}.bind(a));F(b,"c",function(){this.dispatchEvent({type:"c",ke:b})}.bind(a));F(b,"b",function(){this.dispatchEvent({type:"b",ke:b})}.bind(a))}
function sq(a,b){(new Zj(b,a.du)).play()}f.LK=function(){this.Ti&&!this.yf.lf()&&this.yf.play()};f.PL=function(a){this.Uq=(this.Ti=!0===a)?0:1;this.du=this.Ti?300:0;this.Ti&&(tq(this),this.Vr=[],this.yf=new ek,F(this.yf,"end",this.gz.bind(this)))};
function pq(a,b,c){if(null!=c){var d=b.Rf;a=function(){pk(c,{position:"relative"});c.style.opacity=0;uk(c,300);null!=this.vz?this.vz(d,c):d.appendChild(c);uq(d);this.Ti?sq(this,c,function(){this.dispatchEvent({type:"n"})}.bind(this)):this.dispatchEvent({type:"n"})}.bind(a);b.Cu()&&!b.jr&&b.$v(!0);a()}}
function uq(a){var b=[],c=[],d=$h(a),e=d.length;D(d,function(a){al(a,rl.CSS.tp)?b.push(a):1==a.childNodes.length&&al(a.childNodes[0],rl.CSS.lh)&&c.push(a)});D(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}f.gz=function(){for(this.yf.g();this.Vr.length;)this.yf.add(this.Vr[0]),zb.splice.call(this.Vr,0,1);F(this.yf,"end",this.gz.bind(this));this.yf.play()};
function tq(a){null!=a.bC&&(a.Yt(a.bC),delete a.bC);null!=a.yf&&(a.pq(a.yf),delete a.yf)}f.f=function(){lq.d.f.call(this);R(this.Kk);delete this.Kk;tq(this);delete this.wk;delete this.Ti;delete this.MI;delete this.Uq;delete this.du};v("nrg.ui.ZippyTree.EventType",mq);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",lq.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",lq.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");
v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=$h(a),d=b[sl].toLowerCase(),e,h,k=c.length,l=0;l<k;l++){if(h=c[l],null!=h[sl]&&(e=h[sl].toLowerCase(),e=Ka(d,e),0>e)){Zh(b,h);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",lq.prototype.ew);v("nrg.ui.ZippyTree.prototype.isEmpty",lq.prototype.bo);
v("nrg.ui.ZippyTree.prototype.contractAll",lq.prototype.iz);v("nrg.ui.ZippyTree.prototype.collapseAll",lq.prototype.un);v("nrg.ui.ZippyTree.prototype.getAllNodes",lq.prototype.rG);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",lq.prototype.xu);v("nrg.ui.ZippyTree.prototype.expandAll",lq.prototype.Ll);v("nrg.ui.ZippyTree.prototype.traverse",lq.prototype.lp);v("nrg.ui.ZippyTree.prototype.getElement",lq.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",lq.prototype.Xb);
v("nrg.ui.ZippyTree.prototype.setCollapsed",lq.prototype.Ko);v("nrg.ui.ZippyTree.prototype.getFolderNodes",lq.prototype.Bq);v("nrg.ui.ZippyTree.prototype.addContents",lq.prototype.bf);v("nrg.ui.ZippyTree.prototype.createBranch",lq.prototype.xn);v("nrg.ui.ZippyTree.prototype.playFx",lq.prototype.LK);v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",lq.prototype.PL);v("nrg.ui.ZippyTree.prototype.disposeInternal",lq.prototype.f);function vq(){}w(vq,Pn);fa(vq);vq.prototype.w=function(a){var b=a.N().w("span",this.lk(a).join(" "));wq(this,b,a.Hi);return b};vq.prototype.yb=function(a,b){b=vq.d.yb.call(this,a,b);var c=$k(b),d=xq;Hb(c,yq(this,zq))?d=zq:Hb(c,yq(this,Aq))?d=Aq:Hb(c,yq(this,xq))&&(d=xq);a.Hi=d;Yk(b,"checked",d==zq?"mixed":d==Aq?"true":"false");return b};vq.prototype.Ng=function(){return"checkbox"};
function wq(a,b,c){if(b){var d=yq(a,c);al(b,d)||(C(Bq,function(a){a=yq(this,a);fl(b,a,a==d)},a),Yk(b,"checked",c==zq?"mixed":c==Aq?"true":"false"))}}vq.prototype.W=function(){return"goog-checkbox"};function yq(a,b){var c=a.W();if(b==Aq)return c+"-checked";if(b==xq)return c+"-unchecked";if(b==zq)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function Cq(a,b,c){c=c||vq.ee();eo.call(this,null,c,b);this.Hi=ca(a)?a:xq}w(Cq,eo);var Aq=!0,xq=!1,zq=null,Bq={iM:Aq,$N:xq,aO:zq};f=Cq.prototype;f.Fb=null;f.Sg=function(){return this.Hi==Aq};f.ne=function(a){a!=this.Hi&&(this.Hi=a,wq(this.Pa(),this.a(),this.Hi))};f.jg=function(a){this.fa?(this.vc(),this.Fb=a,this.$a()):this.Fb=a};f.toggle=function(){this.ne(this.Hi?xq:Aq)};
f.$a=function(){Cq.d.$a.call(this);if(this.rk){var a=this.ab();this.Fb&&a.A(this.Fb,"click",this.yu).A(this.Fb,"mouseover",this.sk).A(this.Fb,"mouseout",this.Lq).A(this.Fb,"mousedown",this.Qg).A(this.Fb,"mouseup",this.Wf);a.A(this.a(),"click",this.yu)}this.Fb&&(this.Fb.id||(this.Fb.id=jj(this)+".lbl"),Yk(this.a(),"labelledby",this.Fb.id))};f.pc=function(a){Cq.d.pc.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.yu=function(a){a.stopPropagation();var b=this.Hi?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.Vf=function(a){32==a.keyCode&&this.yu(a);return!1};Mn("goog-checkbox",function(){return new Cq});function Dq(){Ud.call(this);this.s="mesh";xa(this,new ed)}w(Dq,Ud);v("X.mesh",Dq);function Eq(){V.call(this);this.of=[];this.uf=[]}w(Eq,V);v("xiv.ui.ctrl.XtkController",Eq);Eq.ID_PREFIX="xiv.ui.ctrl.XtkController";Eq.CSS_SUFFIX={PD:"label",CD:"component"};var Fq=B();function Gq(){return Q("div",{id:"Label_"+B(),"class":Eq.CSS.PD})}function Hq(a){a=g(a.file)?a.file[0]:a.file||a.name;return Nk(a)}function Iq(a,b){b.iC([Hq(a)])}f=Eq.prototype;f.fj=!1;f.n=function(a){Eq.d.n.call(this,a)};f.jg=function(a){null==this.Fb&&(this.Fb=Gq(),Xh(this.a(),this.Fb));this.Fb.innerHTML=a};
f.XG=function(){return this.Fb};f.iC=function(a){r(a)&&(a=[a]);this.Pl=a};f.NG=function(){return this.Pl};f.bh=function(a){this.mD=a};f.Mb=function(){return this.mD};f.lj=function(a){a=this.u=a;this.u instanceof gj?(a=this.u.a(),this.u.fa?this.u.a().parentNode!==this.a()&&this.u.a()!==this.a()&&this.a().appendChild(this.u.a()):this.u.n(this.a())):this.a().appendChild(a);null!=a&&N(a,Eq.CSS.CD)};f.Mz=function(){return Lb(this.of,this.uf)};f.eH=function(){return this.of};f.VA=function(){return this.fj};
f.jL=function(a){this.fj=a};f.HH=function(){return this.uf};f.zG=function(){return this.u};f.jc=ea;f.Ed=function(a,b,c){a=new a;a.n();r(b)&&a.jg(b);Xh(this.a(),a.a());null!=c&&F(a,"p",c);return a};f.update=function(){this.u==this?this.k():this.u.k&&this.u.k()};f.k=function(){this.u.k&&this.u!=this&&this.u.k()};f.rt=function(a,b){var c=this.Ed(b,"Color",function(b){a.color=b.color}.bind(this));Iq(a,c);this.uf.push(c);c[Fq]=a;c.update()};
f.Fy=function(a,b){var c=this.Ed(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});Iq(a,c);this.uf.push(c);c.u.H(1);c.u.k()};f.st=function(a,b){var c=this.Ed(b,"Visible",function(b){a.visible=b.checked});Iq(a,c);this.uf.push(c);c.u.ne(a.visible)};
f.f=function(){Eq.d.f.call(this);this[Fq]=null;delete this.fj;delete this.mD;D(this.uf,function(a){I(a);a.g()});Ib(this.uf);delete this.uf;D(this.of,function(a){I(a);a.g();controller=null});Ib(this.of);delete this.of;null!=this.u&&(I(this.u),this.u instanceof gj?this.u.g():R(this.u),delete this.u);null!=this.Pl&&(Ib(this.Pl),delete this.Pl);null!=this.Fb&&(R(this.Fb),delete this.Fb)};v("xiv.ui.ctrl.XtkController.ID_PREFIX",Eq.ID_PREFIX);v("xiv.ui.ctrl.XtkController.CSS_SUFFIX",Eq.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkController.EventType",{hM:"p"});v("xiv.ui.ctrl.XtkController.OBJ_KEY",Fq);v("xiv.ui.ctrl.XtkController.createLabel",Gq);v("xiv.ui.ctrl.XtkController.getXObjLabel",Hq);v("xiv.ui.ctrl.XtkController.getObjectCategory",function(a){if(a instanceof Dq)return"Meshes";if(a instanceof J)return"Volumes";if(a instanceof kq)return"Fibers";if(a instanceof Op)return"Annotations"});v("xiv.ui.ctrl.XtkController.setControllerFolders",Iq);v("xiv.ui.ctrl.XtkController.prototype.render",Eq.prototype.n);
v("xiv.ui.ctrl.XtkController.prototype.setLabel",Eq.prototype.jg);v("xiv.ui.ctrl.XtkController.prototype.getLabel",Eq.prototype.XG);v("xiv.ui.ctrl.XtkController.prototype.setFolders",Eq.prototype.iC);v("xiv.ui.ctrl.XtkController.prototype.getFolders",Eq.prototype.NG);v("xiv.ui.ctrl.XtkController.prototype.setXObj",Eq.prototype.bh);v("xiv.ui.ctrl.XtkController.prototype.getXObj",Eq.prototype.Mb);v("xiv.ui.ctrl.XtkController.prototype.setComponent",Eq.prototype.lj);
v("xiv.ui.ctrl.XtkController.prototype.getAllControllers",Eq.prototype.Mz);v("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",Eq.prototype.eH);v("xiv.ui.ctrl.XtkController.prototype.isInitialized",Eq.prototype.VA);v("xiv.ui.ctrl.XtkController.prototype.setInitialized",Eq.prototype.jL);v("xiv.ui.ctrl.XtkController.prototype.getSubControllers",Eq.prototype.HH);v("xiv.ui.ctrl.XtkController.prototype.getComponent",Eq.prototype.zG);
v("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",Eq.prototype.jc);v("xiv.ui.ctrl.XtkController.prototype.createController",Eq.prototype.Ed);v("xiv.ui.ctrl.XtkController.prototype.update",Eq.prototype.update);v("xiv.ui.ctrl.XtkController.prototype.updateStyle",Eq.prototype.k);v("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",Eq.prototype.rt);v("xiv.ui.ctrl.XtkController.prototype.add_opacity",Eq.prototype.Fy);v("xiv.ui.ctrl.XtkController.prototype.add_visible",Eq.prototype.st);
v("xiv.ui.ctrl.XtkController.prototype.disposeInternal",Eq.prototype.f);function Jq(){Eq.call(this)}w(Jq,Eq);v("xiv.ui.ctrl.Histogram",Jq);Jq.ID_PREFIX="xiv.ui.ctrl.Histogram";Jq.CSS_SUFFIX={wD:"canvas",TD:"linecanvas",YD:"max",eE:"min"};Jq.LEVEL_CUTOFF=.999;f=Jq.prototype;f.Jd=null;f.rf=null;f.kp=null;f.qs=null;f.nr=null;f.kh=null;f.ii=null;f.LF="rgb(40,40,40)";f.MA="rgb(90,90,90)";f.Go=!0;f.Tr=function(a){this.Go=a};
f.n=function(a){Jq.d.n.call(this,a);this.lj(this);this.Gi=Q("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.wD});this.a().appendChild(this.Gi);this.Hg=this.Gi.getContext("2d");this.Hg.fillStyle=this.LF;this.Th=Q("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.TD});this.a().appendChild(this.Th);this.Wb=this.Th.getContext("2d");this.oo=Q("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.YD},"1000");
this.a().appendChild(this.oo);this.po=Q("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.eE},"-1000");this.a().appendChild(this.po)};f.Mb=function(){return Jq.d.Mb.call(this)};
function Kq(a){if(null==a.Jd){var b=a.Mb(),c=b.max;D(b.image,function(a){D(a,function(a){D(a,function(a){if(null==this.Jd){this.Jd=[];for(var b=0,b=0;b<=c;b++)this.Jd.push(0)}this.Jd[parseInt(a)]++;this.qs++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Jd){var d,e=0;a.kp=Pb(a.Jd.length);null==a.rf&&(a.rf=[],a.nr=0,D(a.Jd,function(a,b){d=a/this.qs;this.rf.push(d);e+=d;this.kp[b]=e;this.nr=Math.max(this.nr,d)}.bind(a)))}}}
f.Dz=function(){if(null!=this.Mb()){var a=T(this.Gi),b=a.width,a=a.height;if(0!=b&&0!=a&&(this.Gi.height=a,this.Gi.width=b,this.Th.height=a,this.Th.width=b,Kq(this),null!=this.Jd))if(this.Go){for(var c=1,d=this.Mb().windowHigh,e=0;c<d+1;c++)this.rf[c]>e&&(e=this.rf[c]);for(var h=[],c=1;c<d+1&&(h.push(this.rf[c]/e),c!=d);c++);for(var d=Math.round(b/(this.kh-this.ii)),d=0<d?d:1,k=e=e=e=0,l=0,k=0,c=this.ii;c<this.kh+1;c++)0>c||(e=(c+1)/this.kh,e=Math.round(e*this.kh),e=Math.round(a*h[e]),l=b/(this.kh-
this.ii),k=-1*l*this.ii,k=Math.round(l*c+k),isNaN(e)||null==e||(this.Hg.fillStyle=this.MA,this.Hg.fillRect(d*k,a,d,-e)))}else for(h=Math.round(b/this.rf.length),h=0<h?h:1,i=c=c=c=0;i<b;i++)c=(i+1)/b,c=Math.round(this.rf.length*c)-1,c=0>c?0:c,c=Math.round(a*this.rf[c]),this.Hg.fillStyle=this.MA,this.Hg.fillRect(h*i,a,h,-c)}};f.fA=function(a){if(null!=this.Jd)for(var b=0,c=0,d=this.Jd.length;c<d;c++)if(b+=this.Jd[c],b/this.qs>=a)return c};
f.Ez=function(){if(null!=this.Mb()){var a=T(this.Th),b=a.width,a=a.height;this.Th.width=b;if(this.Go)this.Wb.beginPath(),this.Wb.strokeStyle="black",this.Wb.moveTo(0,a),this.Wb.lineTo(b,0),this.Wb.lineWidth=.5,this.Wb.stroke(),d=Math.round(b/2),this.Wb.moveTo(d,a),this.Wb.lineTo(d,a-20),this.Wb.lineWidth=.5,this.Wb.stroke();else{var c=b/(this.Ok-this.rj),d=this.ii*c,c=this.kh*c,e=(a-0)/(c-d),h=-1*e*d,k=0*e+h,e=e*b+h;this.Wb.beginPath();this.Wb.strokeStyle="black";this.Wb.moveTo(0,a-k);this.Wb.lineTo(b,
a-e);this.Wb.lineWidth=.5;this.Wb.stroke();var d=d+(c-d)/2;0<d&&d<b&&(this.Wb.moveTo(d,a),this.Wb.lineTo(d,a-15),this.Wb.lineWidth=.5,this.Wb.stroke())}}};f.update=function(){window.console.log("UPDATE!");this.dD();this.Dz();this.Ez()};
f.dD=function(){null!=this.Mb()&&(null==this.rj&&(this.rj=parseInt(this.Mb().windowLow),this.Ok=parseInt(this.Mb().windowHigh),this.rj=isNaN(this.rj)?null:this.rj,this.Ok=isNaN(this.Ok)?null:this.Ok,this.ii=this.rj,this.kh=this.Ok),window.console.log("\nupdate max min",this.Mb().MP,this.Mb().LP),this.ii=parseInt(this.Mb().windowLow),this.kh=parseInt(this.Mb().windowHigh),this.po.innerHTML=this.ii,this.oo.innerHTML=this.kh,window.console.log("UPDATE MAX MIN",this.Ok,this.rj,this.kh,this.ii))};
f.f=function(){Jq.d.f.call(this);null!=this.oo&&(R(this.oo),delete this.oo);null!=this.po&&(R(this.po),delete this.po);null!=this.Gi&&(R(this.Gi),delete this.Gi);null!=this.Th&&(R(this.Th),delete this.Th);null!=this.Jd&&(Ib(this.Jd),delete this.Jd);null!=this.rf&&(Ib(this.rf),delete this.rf);null!=this.kp&&(Ib(this.kp),delete this.kp);delete this.qs;delete this.nr;delete this.Hg;delete this.Wb;delete this.rj;delete this.Ok;delete this.Go};v("xiv.ui.ctrl.Histogram.EventType",{});
v("xiv.ui.ctrl.Histogram.ID_PREFIX",Jq.ID_PREFIX);v("xiv.ui.ctrl.Histogram.CSS_SUFFIX",Jq.CSS_SUFFIX);v("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",Jq.LEVEL_CUTOFF);v("xiv.ui.ctrl.Histogram.prototype.scaleOnChange",Jq.prototype.Tr);v("xiv.ui.ctrl.Histogram.prototype.render",Jq.prototype.n);v("xiv.ui.ctrl.Histogram.prototype.draw",Jq.prototype.Dz);v("xiv.ui.ctrl.Histogram.prototype.drawLine",Jq.prototype.Ez);v("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",Jq.prototype.fA);
v("xiv.ui.ctrl.Histogram.prototype.update",Jq.prototype.update);v("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",Jq.prototype.dD);v("xiv.ui.ctrl.Histogram.prototype.disposeInternal",Jq.prototype.f);function Lq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);V.call(this);this.Bz=a;this.kj=b;this.rn=null;this.gb=new fm(this.a());this.ds()}w(Lq,V);v("nrg.ui.ResizeDragger",Lq);Lq.ID_PREFIX="nrg.ui.ResizeDragger";Lq.CSS_SUFFIX={};f=Lq.prototype;f.pg=null;f.Oh=null;f.Gl=null;f.En=null;f.Kg=null;f.Gh=null;f.tq=null;f.Dn=null;f.offsetX=0;f.rC=function(a){this.offsetX=a};f.offsetY=0;f.oL=function(a){this.offsetY=a};f.Wa=null;f.Nh=null;f.ya=null;f.Kd=null;f.wa=null;f.fc=null;
f.Id=!1;f.je=new th(10,10);f.md=function(){return this.rn};f.ai=function(a){this.rn=a};f.Aq=function(){return this.gb};f.Uz=function(){return this.Bz};f.nd=function(){return this.a()};
f.uj=function(){this.Nh=T(this.a());this.Wa=Ci(this.a());this.pg=-1*this.Nh.height/2+this.offsetY;this.Oh=-1*this.Nh.width/2+this.offsetX;this.gb.Zf()||this.Id||(this.ya=vb(Ci(this.kj)),this.Kd=vb(T(this.kj)),this.ya.left=this.ya.x,this.ya.top=this.ya.y,this.ya.right=this.ya.x+this.Kd.width,this.ya.bottom=this.ya.y+this.Kd.height,this.wa=vb(Ci(this.rn)),this.fc=vb(T(this.rn)),this.wa.left=this.wa.x,this.wa.top=this.wa.y,this.wa.right=this.wa.x+this.fc.width,this.wa.bottom=this.wa.y+this.fc.height,
this.Fg&&this.Fg(this))};f.pC=function(a){return this.je=a};f.ds=function(){F(this.gb,"start",this.Iv.bind(this));F(this.gb,"drag",this.cg.bind(this));F(this.gb,"end",this.Hv.bind(this))};f.Iv=function(){this.dispatchEvent({type:"start_resize"})};f.cg=function(){this.uj();this.dispatchEvent({type:"resize",XK:this.ya,Kd:this.Kd,EF:this.wa,fc:this.fc});null!=this.Re&&this.Re()};f.Hv=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.gb.Zf()||this.Id||this.uj()};f.jf=function(){};
f.tf=function(a,b,c){this.uj();a=this.jf(a);u(c)&&0===c?vi(this.a(),a.end):Mq(this,a.start,a.end,b,c)};function Mq(a,b,c,d,e){a.qj=new Tj(a.a(),[b.x,b.y],[c.x,c.y],u(e)?e:500,sk);F(a.qj,"begin",function(){this.Id=!0;this.Iv()}.bind(a));F(a.qj,"animate",a.cg.bind(a));F(a.qj,"end",function(){this.Id=!1;this.qj.g();I(this.qj);this.qj.ae();this.qj=null;Ai(this.a(),c);this.Hv();d&&d()}.bind(a));a.qj.play()}
f.f=function(){delete this.uP;delete this.vP;delete this.Oh;delete this.Gl;delete this.En;delete this.Kg;delete this.Gh;delete this.tq;delete this.Dn;delete this.Id;sb(this.je);delete this.je;delete this.kj;delete this.rn;sb(this.Wa);delete this.Wa;sb(this.Nh);delete this.Nh;sb(this.ya);delete this.ya;sb(this.Kd);delete this.Kd;sb(this.wa);delete this.wa;sb(this.fc);delete this.fc;R(this.gb.handle);this.gb.handle=null;I(this.gb);this.gb.g();delete this.gb;delete this.Bz};
v("nrg.ui.ResizeDragger.EventType",{Gs:"resize",pE:"start_resize",oE:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Lq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Lq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Lq.prototype.pg);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Lq.prototype.Oh);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Lq.prototype.Gl);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Lq.prototype.En);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Lq.prototype.Kg);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Lq.prototype.Gh);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Lq.prototype.tq);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Lq.prototype.Dn);v("nrg.ui.ResizeDragger.prototype.offsetX",Lq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Lq.prototype.rC);v("nrg.ui.ResizeDragger.prototype.offsetY",Lq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Lq.prototype.oL);v("nrg.ui.ResizeDragger.prototype.handlePos",Lq.prototype.Wa);v("nrg.ui.ResizeDragger.prototype.handleSize",Lq.prototype.Nh);v("nrg.ui.ResizeDragger.prototype.resizeePos",Lq.prototype.ya);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Lq.prototype.Kd);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Lq.prototype.wa);v("nrg.ui.ResizeDragger.prototype.boundarySize",Lq.prototype.fc);v("nrg.ui.ResizeDragger.prototype.isAnimating",Lq.prototype.Id);
v("nrg.ui.ResizeDragger.prototype.minSize",Lq.prototype.je);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Lq.prototype.md);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Lq.prototype.ai);v("nrg.ui.ResizeDragger.prototype.getDragger",Lq.prototype.Aq);v("nrg.ui.ResizeDragger.prototype.getDirection",Lq.prototype.Uz);v("nrg.ui.ResizeDragger.prototype.getHandle",Lq.prototype.nd);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Lq.prototype.uj);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Lq.prototype.pC);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Lq.prototype.Iv);v("nrg.ui.ResizeDragger.prototype.onResize",Lq.prototype.cg);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Lq.prototype.Hv);v("nrg.ui.ResizeDragger.prototype.update",Lq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Lq.prototype.jf);v("nrg.ui.ResizeDragger.prototype.slideToLimits",Lq.prototype.tf);
v("nrg.ui.ResizeDragger.prototype.disposeInternal",Lq.prototype.f);function Nq(a){Lq.call(this,"right",a)}w(Nq,Lq);v("nrg.ui.ResizeDraggerRight",Nq);Nq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Nq.CSS_SUFFIX={};Nq.prototype.Fg=function(){this.Gl=this.ya.left+this.je.width+this.Oh;this.En=this.wa.right+this.Oh;this.tq=this.En-this.Gl};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Nq.prototype.Fg);Nq.prototype.Re=function(){Oi(this.kj,Math.min(Math.max(this.Kd.width+(this.Id?this.Wa.x-this.ya.right+this.Oh:this.gb.clientX-this.gb.zw),this.je.width),this.fc.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Nq.prototype.Re);Nq.prototype.update=function(a){this.gb.Zf()||this.Id||(Nq.d.update.call(this,a),hm(this.gb,new vh(this.Gl,this.ya.y,this.tq,0)),Ai(this.a(),this.ya.right+this.Oh,this.ya.y),Pi(this.a(),this.Kd.height))};Nq.prototype.jf=function(a){return{start:new qh(this.Wa.x,this.Wa.y),end:"MIN"==a?new qh(this.Gl,this.Wa.y):new qh(this.En,this.Wa.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Nq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Nq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Nq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Nq.prototype.jf);function Oq(a){Lq.call(this,"right",a)}w(Oq,Lq);v("nrg.ui.ResizeDraggerBottom",Oq);Oq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Oq.CSS_SUFFIX={};Oq.prototype.Fg=function(){this.Kg=this.ya.top+this.je.height+this.pg;this.Gh=this.wa.bottom+this.pg;this.Dn=this.Gh-this.Kg};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Oq.prototype.Fg);Oq.prototype.Re=function(){Pi(this.kj,Math.max(this.Kd.height+(this.Wa.y-this.ya.bottom),this.je.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Oq.prototype.Re);Oq.prototype.update=function(){this.gb.Zf()||this.Id||(Oq.d.update.call(this),hm(this.gb,new vh(this.wa.x,this.Kg,0,this.Gh)),Ai(this.a(),this.ya.x,this.ya.bottom+this.pg))};Oq.prototype.jf=function(a){return{start:new qh(this.Wa.x,this.Wa.y),end:"MIN"==a?new qh(this.Wa.x,this.Kg):new qh(this.Wa.x,this.Gh)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Oq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Oq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Oq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Oq.prototype.jf);function Pq(a){Lq.call(this,"right",a)}w(Pq,Lq);v("nrg.ui.ResizeDraggerTop",Pq);Pq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Pq.CSS_SUFFIX={};Pq.prototype.Fg=function(){this.Kg=this.wa.top-this.pg;this.Gh=this.ya.bottom-this.je.height+this.pg;this.Dn=this.Gh-this.Kg};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Pq.Fg);Pq.prototype.Re=function(){var a=this.Wa.y-this.pg,b=this.Kd.height+(this.Id?this.ya.y-a:this.gb.Aw-this.gb.clientY);this.kj.style.top=a.toString()+"px";Pi(this.kj,Math.max(b,this.je.height))};
Pq.prototype.update=function(){this.gb.Zf()||this.Id||(Pq.d.update.call(this),hm(this.gb,new vh(this.wa.x,this.Kg,0,this.Dn)),Ai(this.a(),this.ya.x,this.ya.y+this.pg))};Pq.prototype.jf=function(a){return{start:new qh(this.Wa.x,this.Wa.y),end:"MIN"==a?new qh(this.Wa.x,this.Gh):new qh(this.Wa.x,this.Kg)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Pq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Pq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Pq.prototype.Fg);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Pq.prototype.Re);v("nrg.ui.ResizeDraggerTop.resizeMethod",Pq.Re);v("nrg.ui.ResizeDraggerTop.prototype.update",Pq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Pq.prototype.jf);function Qq(a){Lq.call(this,"right",a)}w(Qq,Lq);v("nrg.ui.ResizeDraggerTopRight",Qq);Qq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Qq.CSS_SUFFIX={};Qq.prototype.uj=function(){Qq.d.uj.call(this);this.gb.Zf()||this.Id||(Nq.prototype.Fg.bind(this)(),Pq.prototype.Fg.bind(this)())};Qq.prototype.cg=function(){Qq.d.cg.call(this);Nq.prototype.Re.bind(this)();Pq.prototype.Re.bind(this)()};
Qq.prototype.update=function(a){this.gb.Zf()||this.Id||(Qq.d.update.call(this,a),hm(this.gb,new vh(this.wa.x+this.Oh,this.wa.y+this.pg,this.fc.width,this.fc.height)),Ai(this.a(),this.ya.right+this.Oh,this.ya.y+this.pg))};
Qq.prototype.jf=function(a){var b=new qh(this.Wa.x,this.Wa.y),c;"TOP_LEFT"==a?c=new qh(this.wa.x,this.wa.y):"TOP_RIGHT"==a?c=new qh(this.wa.x+this.fc.width,this.wa.y):"BOTTOM_RIGHT"==a?c=new qh(this.wa.x+this.fc.width,this.wa.y+this.fc.height):"BOTTOM_LEFT"==a&&(c=new qh(this.wa.x,this.wa.y+this.fc.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Qq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Qq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Qq.prototype.uj);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Qq.prototype.cg);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Qq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Qq.prototype.jf);function Rq(a){Lq.call(this,"right",a)}w(Rq,Lq);v("nrg.ui.ResizeDraggerLeft",Rq);Rq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Rq.CSS_SUFFIX={};Rq.prototype.Re=function(){Oi(this.kj,Math.min(Math.max(this.Kd.width+(this.ya.x-this.Wa.x),this.je.width),this.fc.width));Ai(this.a(),this.Wa.x,this.ya.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Rq.prototype.Re);
Rq.prototype.update=function(a){this.gb.Zf()||this.Id||(Rq.d.update.call(this,a),hm(this.gb,new vh(this.wa.x-this.Nh.width,this.wa.y,this.fc.width-this.je.width-this.Nh.width,0)),Ai(this.a(),this.ya.x-this.Nh.width,this.ya.y))};Rq.prototype.jf=function(a){return{start:new qh(this.Wa.x,this.Wa.y),end:"MIN"==a?new qh(this.wa.x+this.je.width,this.Wa.y):new qh(this.wa.x+this.fc.width-this.je.width,this.Wa.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Rq.ID_PREFIX);
v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Rq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerLeft.resizeMethod",Rq.Re);v("nrg.ui.ResizeDraggerLeft.prototype.update",Rq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Rq.prototype.jf);function Sq(a,b){V.call(this);this.o=Jh(a);this.Sd={};this.qr=this.rr=20;this.pm(b||Sq.UO)}w(Sq,V);v("nrg.ui.Resizable",Sq);Sq.ID_PREFIX="nrg.ui.Resizable";Sq.CSS_SUFFIX={eM:"boundary"};var Tq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Uq=["RIGHT","BOTTOM"],Vq=new vh(0,0,600,600);f=Sq.prototype;f.hL=function(a,b){this.PO(a);if(0>b)throw Error("Threshold must be greater than zero!");this.LO[a]=b};f.nd=function(a){return this.Sd[a].nd()};f.Sl=function(a){return this.Sd[a]};
f.PG=function(){var a=[];D(nb(this.Sd),function(b){a.push(b.nd())});return a};f.md=function(){return this.Nf};f.ai=function(a){this.Nf=a;if(this.Nf.parentNode!==this.o.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.oC=function(a){this.qr=a};f.qC=function(a){this.rr=a};f.kH=function(){return this.qr};f.lH=function(){return this.rr};
f.pm=function(a){a=a||"DEFAULT";r(a)&&(a="ALL"==a.toUpperCase()?Tq:"DEFAULT"==a.toUpperCase()?Uq:[a]);Wq(this);D(a,function(a){if(!r(a))throw Error("String required!");if(!Hb(Tq,a))throw Error("Invalid direction: ",a);this.py(a)}.bind(this))};f.Et=function(a){if(!Hb(Tq,a))throw Error("Invalid draggerDir '"+a);};f.sI=function(a){this.Et(a);if(!this.Sd[a])throw Error("No ResizeDragger for "+a);};f.tf=function(a,b,c,d){a=a.toUpperCase();this.Et(a);this.update();this.Sd[a].tf(b,c,d)};
function Xq(a,b){switch(a){case "TOP":return new Pq(b);case "BOTTOM":return new Oq(b);case "LEFT":return new Rq(b);case "RIGHT":return new Nq(b);case "TOP_RIGHT":return new Qq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.py=function(a){if(a in this.Sd)throw Error("Resize direction "+a+" already in use.");this.Sd[a]=Xq(a,this.o);F(this.Sd[a],"start_resize",this.eK.bind(this));F(this.Sd[a],"resize",this.Dk.bind(this));F(this.Sd[a],"end_resize",this.dK.bind(this));this.update()};f.update=function(){if(null!=this.Nf){var a=new th(this.rr,this.qr);C(this.Sd,function(b){this.Nf&&this.Nf.parentNode&&Xh(this.Nf.parentNode,b.nd());b.md()!==this.Nf&&b.ai(this.Nf);b.pC(a);b.uj();b.update()}.bind(this))}};f.eK=function(){this.dispatchEvent({type:"resize_start"})};
f.Dk=function(a){this.dispatchEvent({type:"resize",XK:a.ya,Kd:a.Kd,EF:a.wa,fc:a.fc})};f.dK=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Wq(a){C(a.Sd,function(a){a&&(I(a),a.g())});sb(a.Sd)}f.f=function(){Sq.d.f.call(this);Wq(this);delete this.Sd;this.Nf&&(R(this.Nf.parentNode),delete this.Nf)};v("nrg.ui.Resizable.EventType",{Gs:"resize",pE:"resize_start",oE:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Sq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Sq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Tq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Uq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Vq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",Xq);v("nrg.ui.Resizable.prototype.setBoundThreshold",Sq.prototype.hL);v("nrg.ui.Resizable.prototype.getHandle",Sq.prototype.nd);v("nrg.ui.Resizable.prototype.getResizeDragger",Sq.prototype.Sl);v("nrg.ui.Resizable.prototype.getHandles",Sq.prototype.PG);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Sq.prototype.md);v("nrg.ui.Resizable.prototype.setBoundaryElement",Sq.prototype.ai);v("nrg.ui.Resizable.prototype.setMinHeight",Sq.prototype.oC);v("nrg.ui.Resizable.prototype.setMinWidth",Sq.prototype.qC);v("nrg.ui.Resizable.prototype.getMinHeight",Sq.prototype.kH);v("nrg.ui.Resizable.prototype.getMinWidth",Sq.prototype.lH);v("nrg.ui.Resizable.prototype.setResizeDirections",Sq.prototype.pm);v("nrg.ui.Resizable.prototype.checkDirectionValid",Sq.prototype.Et);
v("nrg.ui.Resizable.prototype.hasDragger",Sq.prototype.sI);v("nrg.ui.Resizable.prototype.slideToLimits",Sq.prototype.tf);v("nrg.ui.Resizable.prototype.addResizeDirection",Sq.prototype.py);v("nrg.ui.Resizable.prototype.update",Sq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Sq.prototype.f);function Yq(a){V.call(this);this.Ib=a}w(Yq,V);v("xiv.ui.layouts.LayoutFrame",Yq);Yq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Yq.CSS_SUFFIX={};f=Yq.prototype;f.Gd=function(){return this.Ib};f.Cc=null;f.Q=function(){return this.xp};f.pm=function(a){this.xp=this.xp?this.xp:new Sq(this.a());this.xp.pm(a)};f.f=function(){Yq.d.f.call(this);delete this.Ib};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Yq.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Yq.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Yq.prototype.Gd);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Yq.prototype.Q);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Yq.prototype.pm);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Yq.prototype.f);function Zq(){V.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.i={}}w(Zq,V);v("xiv.ui.layouts.Layout",Zq);
var $q="Slider_"+B(),ar="FrameDisplay_"+B(),br="ZoomDisplay_"+B(),cr="Crosshairs_"+B(),dr="PlayButton_"+B(),er={la:$q,Od:ar,Df:br,cd:cr,Cj:dr};Zq.ID_PREFIX="xiv.ui.layouts.Layout";Zq.CSS_SUFFIX={};f=Zq.prototype;f.nb=20;f.$c=20;f.lL=function(a){this.$c=a};f.mL=function(a){this.nb=a};f.aH=function(){return this.i};f.pu=function(a){return this.i[a]};f.$G=function(a){window.console.log(a,this.i[a]);var b={};C(er,function(c){b[c]=this.i[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};
f.Gd=function(){return this.constructor.TITLE};f.my=function(a){this.i=this.i?this.i:{};this.i[a.Gd()]=a};f.Jg=function(){this.dispatchEvent({type:"q"})};f.Zv=function(){C(this.Rl(),function(a){null!=a.la&&(a.la.g(),delete a.la);null!=a.cd&&(a.cd.g(),delete a.cd);null!=a.Od&&(a.Od.g(),delete a.Od);null!=a.Df&&(a.Df.g(),delete a.Df);null!=a.Cj&&(a.Cj.g(),delete a.Cj)})};
f.pp=function(){C(this.Rl(),function(a){null!=a.la&&(a.la.k(),a.la.H(a.la.J()));null!=a.cd&&a.cd.k();null!=a.Od&&a.Od.k();null!=a.Df&&a.Df.k();null!=a.Cj&&a.Cj.k()})};f.k=function(){Zq.d.k.call(this);this.Jg()};f.f=function(){Zq.d.f.call(this);delete this.$c;delete this.nb;this.Cn(this.XD);delete this.XD};v("xiv.ui.layouts.Layout.EventType",{Gs:"q"});v("xiv.ui.layouts.Layout.INTERACTORS",er);v("xiv.ui.layouts.Layout.ID_PREFIX",Zq.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",Zq.CSS_SUFFIX);
v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Zq.prototype.lL);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Zq.prototype.mL);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Zq.prototype.aH);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Zq.prototype.pu);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Zq.prototype.$G);v("xiv.ui.layouts.Layout.prototype.getTitle",Zq.prototype.Gd);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Zq.prototype.my);
v("xiv.ui.layouts.Layout.prototype.dispatchResize",Zq.prototype.Jg);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Zq.prototype.Zv);v("xiv.ui.layouts.Layout.prototype.updateInteractors",Zq.prototype.pp);v("xiv.ui.layouts.Layout.prototype.updateStyle",Zq.prototype.k);v("xiv.ui.layouts.Layout.prototype.disposeInternal",Zq.prototype.f);function fr(a){ad.call(this);this.s="interactor";this.Be=a;this.Zs=this.Wx=this.Vx=this.Xx=this.Ux=this.Yx=null;this.Np=!0;this.Ai=this.ui=this.Bg=!1;this.Pc=[0,0];this.Us=new A.P(0,0,0);this.Om=new A.P(0,0,0);this.YA=0;this.dy=this.Jp=null;this.ht=!1;this.rb={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(fr,ad);fr.prototype.__defineGetter__("config",function(){return this.rb});
fr.prototype.__defineGetter__("leftButtonDown",function(){return this.Bg});fr.prototype.__defineGetter__("middleButtonDown",function(){return this.ui});fr.prototype.__defineGetter__("rightButtonDown",function(){return this.Ai});
fr.prototype.ra=function(){this.rb.MOUSEWHEEL_ENABLED?(this.Zs=new Pp(this.Be),this.Yx=F(this.Zs,"mousewheel",this.yo.bind(this))):(Uc(this.Yx),this.Zs=null);this.rb.MOUSECLICKS_ENABLED?(this.Ux=F(this.Be,"mousedown",this.Ev.bind(this)),this.Xx=F(this.Be,"mouseup",this.Fv.bind(this))):(Uc(this.Ux),Uc(this.Xx));this.Be.oncontextmenu=this.rb.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.rb.KEYBOARD_ENABLED?this.Xh.bind(this):null;this.rb.TOUCH_ENABLED?(this.rb.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.eF=F(this.Be,"touchstart",this.yK.bind(this)),this.dF=F(this.Be,"touchmove",this.wK.bind(this)),this.cF=F(this.Be,"touchend",this.sK.bind(this))):(Uc(this.eF),Uc(this.dF),Uc(this.cF));Uc(this.Vx);Uc(this.Wx);this.Vx=F(this.Be,"mousemove",this.UJ.bind(this));this.Wx=F(this.Be,"mouseout",this.VJ.bind(this))};
fr.prototype.Ev=function(a){0==a.button?this.Bg=!0:1==a.button?this.ui=!0:2==a.button&&(this.Ai=!0);eval("this.onMouseDown("+this.Bg+","+this.ui+","+this.Ai+")");gr(this);a.preventDefault()};fr.prototype.RJ=function(){};fr.prototype.Fv=function(a){0==a.button?this.Bg=!1:1==a.button?this.ui=!1:2==a.button&&(this.Ai=!1);eval("this.onMouseUp("+this.Bg+","+this.ui+","+this.Ai+")");gr(this);a.preventDefault()};fr.prototype.__defineGetter__("mousePosition",function(){return this.Pc});f=fr.prototype;
f.XJ=function(){};f.VJ=function(a){this.Np=!1;this.rb.KEYBOARD_ENABLED&&(window.onkeydown=null);this.Ai=this.ui=this.Bg=!1;gr(this);this.Us=new A.P(0,0,0);a.preventDefault()};f.TJ=function(){};f.yK=function(a){a.preventDefault();a.ra(a.Ic.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Om=new A.P(a.clientX,a.clientY,0);this.dy=setTimeout(this.uK.bind(this,a),500)};f.xK=function(){};
f.uK=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new re;a.Ag=!0;a.Ef=this instanceof hr;this.dispatchEvent(a);this.Rp=!0};f.tK=function(){};function ir(a){clearTimeout(a.dy);if(a.Rp){var b=new re;b.Ag=!1;b.Ef=a instanceof hr;a.dispatchEvent(b)}a.Rp=!1}f.sK=function(a){a.preventDefault();eval("this.onTouchEnd()");ir(this)};f.rK=function(){};
f.wK=function(a){a.preventDefault();this.Rp||ir(this);this.touchmoveEvent=a=a.Ic;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.P(c[0],c[1],0);var b=c[0]>3*this.Be.clientWidth/4,d=c[0]<this.Be.clientWidth/4,e=c[1]<this.Be.clientHeight/4,c=c[1]>3*this.Be.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Om.zc(a);this.Om=a.clone();if(this.Rp)a=new pe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.ed=e,this.dispatchEvent(a);
else if(this instanceof jr&&(b||d))a=new se,a.Vb=0>e.y,this.dispatchEvent(a);else if(this instanceof hr||c)e.scale(3),a=new qe,a.ed=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.P(a[0],a[1],0),b=new A.P(b[0],b[1],0),e=pd(a,b),b=e-this.YA,this.YA=e,this.Om.zc(a),this.Om=a.clone(),10<Math.abs(b)&&(a=new re,a.Ag=0<b,a.Ef=this instanceof hr,this.dispatchEvent(a)))};f.vK=function(){};
f.UJ=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Np=!0;this.rb.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.Xh.bind(this));a.preventDefault();var b=a.shiftKey;this.ht=b;this.Pc=[a.offsetX,a.offsetY];var c=new A.P(this.Pc[0],this.Pc[1],0);a=this.Us.zc(c);this.Us=c.clone();this.rb.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.ui||this.Bg||this.Ai)&&gr(this),this.Jp=setTimeout(function(){gr(this);var a=new te;a.Wp=c.x;a.Xp=
c.y;this.dispatchEvent(a);this.Jp=null}.bind(this),300));0!=a.$f()&&(this.Bg&&!b?(b=new qe,a.scale(3),b.ed=a,this.dispatchEvent(b)):this.ui||this.Bg&&b?(b=new pe,b.ed=a,this.dispatchEvent(b)):this.Ai&&(b=new re,b.Ag=0<a.y,b.Ef=!1,this.dispatchEvent(b)))};function gr(a){a.Jp&&clearTimeout(a.Jp);a.dispatchEvent(new xe)}f.YJ=function(){};f.yo=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");gr(this);a.preventDefault()};f.LJ=function(){};
f.Xh=function(a){if(this.Np){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");gr(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new pe:b?a=new re:(a=new qe,this instanceof jr&&(a=new se)),a&&(c=new A.P(0,0,0),37==h?(c.x=5,a.Vb=!1,b&&(a.Vb=!0,a.Ag=!0,a.Ef=!1)):39==h?(c.x=-5,a.Vb=!0,b&&(a.Ag=!1,a.Ef=!1)):38==h?(c.y=5,a.Vb=!0,b&&(a.Ag=!0,a.Ef=!0)):40==h&&(c.y=-5,a.Vb=!1,b&&(a.Ag=!1,a.Ef=!0)),a.ed=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new ye,this.dispatchEvent(a))}};v("X.interactor",fr);v("X.interactor.prototype.init",fr.prototype.ra);v("X.interactor.prototype.onMouseDown",fr.prototype.RJ);v("X.interactor.prototype.onMouseUp",fr.prototype.XJ);v("X.interactor.prototype.onMouseMove",fr.prototype.TJ);v("X.interactor.prototype.onMouseWheel",fr.prototype.YJ);v("X.interactor.prototype.onKey",fr.prototype.LJ);v("X.interactor.prototype.onTouchStart",fr.prototype.xK);v("X.interactor.prototype.onTouchMove",fr.prototype.vK);
v("X.interactor.prototype.onTouchEnd",fr.prototype.rK);v("X.interactor.prototype.onTouchHover",fr.prototype.tK);function jr(a){fr.call(this,a);this.s="interactor2D"}w(jr,fr);jr.prototype.yo=function(a){jr.d.yo.call(this,a);var b=new se;null==a.Fd&&(a.Fd=0);b.Vb=0>a.Fd;this.dispatchEvent(b)};function kr(a,b){if(!u(a)||!u(b))throw Error("A camera needs valid width and height values.");ad.call(this);this.s="camera";this.Lj=new A.P(0,100,0);this.il=new A.P(0,0,0);this.Vb=new A.P(0,0,1);this.Va=a;this.Ha=b;this.O=this.kr(this.Lj,this.il)}w(kr,ad);kr.prototype.observe=function(a){if(!(null!=a&&a instanceof fr))throw Error("Could not observe the interactor.");F(a,ae,this.fK.bind(this));F(a,$d,this.$J.bind(this));F(a,be,this.GK.bind(this))};
kr.prototype.fK=function(a){if(!(a instanceof qe))throw Error("Received no valid rotate event.");this.rotate(a.ed)};kr.prototype.GK=function(a){if(!(a instanceof re))throw Error("Received no valid zoom event.");a.Ag?this.Em(a.Ef):this.Fm(a.Ef)};kr.prototype.$J=function(a){if(!(a instanceof pe))throw Error("Received no valid pan event.");this.Ir(a.ed)};kr.prototype.__defineGetter__("view",function(){return this.O});
kr.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.O=a});kr.prototype.__defineGetter__("position",function(){return[this.Lj.x,this.Lj.y,this.Lj.z]});kr.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.Lj=new A.P(a[0],a[1],a[2]);this.reset()});kr.prototype.__defineGetter__("focus",function(){return[this.il.x,this.il.y,this.il.z]});
kr.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.il=new A.P(a[0],a[1],a[2]);this.reset()});kr.prototype.__defineGetter__("up",function(){return[this.Vb.x,this.Vb.y,this.Vb.z]});kr.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.Vb=new A.P(a[0],a[1],a[2]);this.reset()});f=kr.prototype;f.reset=function(){this.O=this.kr(this.Lj,this.il)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.P(a[0],a[1],0);else if(!(a instanceof A.P))throw Error("Invalid distance vector for rotate operation.");return a};f.Ir=function(a){if(g(a)&&2==a.length)a=new A.P(a[0],a[1],0);else if(!(a instanceof A.P))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x;this.O[13]+=a.y};f.Em=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]+=b};f.Fm=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]-=b};
f.kr=function(a,b){if(!(a instanceof A.P&&b instanceof A.P))throw Error("3D vectors required for calculating the view.");return A.t.Wn()};v("X.camera",kr);v("X.camera.prototype.pan",kr.prototype.Ir);v("X.camera.prototype.rotate",kr.prototype.rotate);v("X.camera.prototype.zoomIn",kr.prototype.Em);v("X.camera.prototype.zoomOut",kr.prototype.Fm);function lr(a){function b(a,b,d){b=b*Math.PI*2;b=rp(sp(n,Math.cos(b)),sp(p,Math.sin(b)));a=rp(rp(c,sp(e,a)),sp(b,h));d=rp(sp(b,1-Math.abs(d)),sp(k,d));return new wp(a,d)}this.Hb=[];a=a||{};var c=new qp(a.start||[0,-1,0]),d=new qp(a.end||[0,1,0]),e=tp(d,c),h=a.Wg||1;a=a.za||16;for(var k=up(e),l=.5<Math.abs(k.y()),n=up((new qp(l,!l,0)).bk(k)),p=up(n.bk(k)),l=new wp(c,vp(k)),d=new wp(d,up(k)),m=[],q=0;q<a;q++){var t=q/a,s=(q+1)/a;m.push(new yp([l,b(0,t,-1),b(0,s,-1)]));m.push(new yp([b(0,s,0),b(0,t,
0),b(1,t,0),b(1,s,0)]));m.push(new yp([d,b(1,s,1),b(1,t,1)]))}return Jp(m)}w(lr,Ip);function mr(){Ud.call(this);this.s="cylinder";this.jt=[-10,-10,-10];this.Ss=[10,10,10];this.Mj=10;this.Sc=32;xa(this,new Kp)}w(mr,Ud);mr.prototype.__defineGetter__("start",function(){return this.jt});mr.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.jt=a});mr.prototype.__defineGetter__("end",function(){return this.Ss});mr.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.Ss=a});
mr.prototype.__defineGetter__("radius",function(){return this.Mj});mr.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Mj=a});mr.prototype.da=function(){Mp(this,new lr({start:this.jt,end:this.Ss,Wg:this.Mj,za:this.Sc}));mr.d.da.call(this)};v("X.cylinder",mr);v("X.cylinder.prototype.modified",mr.prototype.da);function Oe(a){J.call(this);this.s="labelmap";this.yh=a;this.it=new Float32Array([-255,-255,-255,-255])}w(Oe,J);Oe.prototype.da=function(){var a=new Vd;a.Ma=this;this.dispatchEvent(a);this.yh.da()};Oe.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.zd)throw Error("No colortable assigned.");b=this.zd.Ud.get(a).slice(1,5)}this.it=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Oe);function nr(a){this.Hb=[];a=a||{};var b=new qp(a.Zd||[0,0,0]),c=a.Wg?a.Wg.length?a.Wg:[a.Wg,a.Wg,a.Wg]:[1,1,1];return Jp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new yp(a[0].map(function(e){e=new qp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new wp(e,new qp(a[1]))}))}))}w(nr,Ip);function or(){Ud.call(this);this.s="cube";this.Sa=[0,0,0];this.Xs=this.Ws=this.Vs=20;this.ul=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];xa(this,new Kp)}w(or,Ud);or.prototype.__defineGetter__("center",function(){return this.Sa});or.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Sa=a});or.prototype.__defineGetter__("lengthX",function(){return this.Vs});
or.prototype.__defineSetter__("lengthX",function(a){if(!u(a))throw Error("Invalid lengthX.");this.Vs=a});or.prototype.__defineGetter__("lengthY",function(){return this.Ws});or.prototype.__defineSetter__("lengthY",function(a){if(!u(a))throw Error("Invalid lengthY.");this.Ws=a});or.prototype.__defineGetter__("lengthZ",function(){return this.Xs});or.prototype.__defineSetter__("lengthZ",function(a){if(!u(a))throw Error("Invalid lengthZ.");this.Xs=a});
or.prototype.da=function(){Mp(this,new nr({Zd:this.Sa,Wg:[this.Vs/2,this.Ws/2,this.Xs/2]}));or.d.da.call(this)};v("X.cube",or);v("X.cube.prototype.modified",or.prototype.da);function hr(a){fr.call(this,a);this.s="interactor3D"}w(hr,fr);hr.prototype.yo=function(a){hr.d.yo.call(this,a);var b=new re;null==a.Fd&&(a.Fd=0);b.Ag=0>a.Fd;b.Ef=!0;this.dispatchEvent(b)};function pr(a){ad.call(this);this.s="array";this.Ya=[];this.Kx=a}w(pr,ad);function qr(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}pr.prototype.add=function(a){this.Ya.push(a);return!0};pr.prototype.remove=function(a){a=this.Ya.indexOf(a);-1<a&&this.Ya.splice(a,1);return!0};pr.prototype.clear=function(){this.Ya.length=0};
function rr(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),rr(a,b,d),rr(a,d,c);b<d;++b)if(0<a.Kx(a.Ya[b],a.Ya[d])){var e=a.Ya[b];a.Ya[b]=a.Ya[d];for(var h=a,k=d,l=c;k+1<l&&0>h.Kx(h.Ya[k+1],e);){var n=h,p=k+1,m=n.Ya[k];n.Ya[k]=n.Ya[p];n.Ya[p]=m;++k}h.Ya[k]=e}}pr.prototype.sort=function(){rr(this,0,this.Ya.length)};function sr(a,b){kr.call(this,a,b);this.s="camera2D"}w(sr,kr);sr.prototype.rotate=function(a){a=sr.d.rotate.call(this,a);var b=new oe;0<a.x?b.lt--:0>a.x&&b.lt++;0<a.y?b.Ys++:0>a.y&&b.Ys--;this.dispatchEvent(b)};sr.prototype.Em=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]+=b};sr.prototype.Fm=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]-=b};
sr.prototype.Ir=function(a){if(g(a)&&2==a.length)a=new A.P(a[0],a[1],0);else if(!(a instanceof A.P))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x/this.O[14];this.O[13]+=a.y/this.O[14]};function tr(a,b){kr.call(this,a,b);this.s="camera3D";this.Nx=45;this.ct=A.t.Zu(A.t.Wn(),this.Nx,a/b,1,1E4)}w(tr,kr);tr.prototype.rotate=function(a){a=tr.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.P(this.O[1],this.O[5],this.O[9]),d=new A.P(this.O[0],this.O[4],this.O[8]);c.normalize();d.normalize();A.t.rotate(this.O,b,c.x,c.y,c.z);A.t.rotate(this.O,a,d.x,d.y,d.z)};tr.prototype.kr=function(a,b){var c=tr.d.kr.call(this,a,b);A.t.hB(c,a,b,this.Vb);return c};
function ur(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.t.multiply(a.ct,a.O,l);A.t.zb(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.t.pB(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",tr);function vr(a){gj.call(this,a);this.Xg=new Sp;F(this.Xg,"change",this.gI,!1,this)}w(vr,gj);var wr={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=vr.prototype;f.w=function(){this.Te=this.$j();var a=wr[this.Fa];this.o=this.N().w("div",a,this.Te);xr(this);yr(this);zr(this)};f.$a=function(){vr.d.$a.call(this);E&&7>mc&&F(this.a(),"resize",this.hh,!1,this);this.hh();var a=this.a();Xk(a,"progressbar");Yk(a,"live","polite")};f.vc=function(){vr.d.vc.call(this);Ar(this)};
f.$j=function(){return this.N().w("div","progress-bar-thumb")};function Ar(a){E&&7>mc&&Tc(a.a(),"resize",a.hh,!1,a)}f.$d=function(a){vr.d.$d.call(this,a);bl(this.a(),wr[this.Fa]);a=Kh(null,"progress-bar-thumb",this.a())[0];a||(a=this.$j(),this.a().appendChild(a));this.Te=a};f.J=function(){return this.Xg.J()};f.H=function(a){this.Xg.H(a);this.a()&&xr(this)};function xr(a){Yk(a.a(),"valuenow",a.J())}f.na=function(){return this.Xg.na()};f.qd=function(a){this.Xg.qd(a);this.a()&&yr(this)};
function yr(a){Yk(a.a(),"valuemin",a.na())}f.ga=function(){return this.Xg.ga()};f.yc=function(a){this.Xg.yc(a);this.a()&&zr(this)};function zr(a){Yk(a.a(),"valuemax",a.ga())}f.Fa="horizontal";f.gI=function(){this.hh();this.dispatchEvent("change")};
f.hh=function(){if(this.Te){var a=this.na(),b=this.ga(),a=(this.J()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Fa?E&&7>mc?(this.Te.style.top=0,this.Te.style.height="100%",b=this.Te.offsetHeight,a=Math.round(a*b),this.Te.style.top=b-a+"px",this.Te.style.height=a+"px"):(this.Te.style.top=100-b+"%",this.Te.style.height=b+"%"):this.Te.style.width=b+"%"}};
f.di=function(a){if(this.Fa!=a){var b=wr[this.Fa],c=wr[a];this.Fa=a;if(a=this.a())al(a,b)&&(dl(a,b),bl(a,c)),b=this.Te.style,"vertical"==this.Fa?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.hh()}};f.Db=function(){return this.Fa};f.f=function(){Ar(this);vr.d.f.call(this);this.Te=null;this.Xg.g()};f.Mh=function(){return this.Xg.Mh()};f.kg=function(a){this.Xg.kg(a)};function Br(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");vr.call(this);this.s="progressbar";this.af=a;this.bt="";this.Gp=this.xh=null;this.Jj=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Jj=[c,d,e];this.H(b);this.Gu()}w(Br,vr);
Br.prototype.Gu=function(){var a=xi(this.af,"position");if("static"==a||""==a)this.bt=this.af.style.position,this.af.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Jj[0])),d=document.createTextNode(String(this.Jj[1])),e=document.createTextNode(String(this.Jj[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.xh=b;this.n(this.af);a=this.a();a.style.position=
"absolute";a.style.top=(this.af.clientHeight-5)/2+"px";a.style.left=(this.af.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};Br.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;R(this.a());var c=new Br(this.af,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");ai(d).classList.add("progress-bar-thumb-done");this.Gp=c};
Br.prototype.ho=function(){this.xh&&R(this.xh);this.a()&&R(this.a());this.Gp&&R(this.Gp.a());this.Gp=this.xh=null;this.bt&&(this.af.style.position=this.bt)};function Cr(){ad.call(this);this.s="renderer";this.va=window.document.body;this.Va=this.va.clientWidth;this.Ha=this.va.clientHeight;this.Ea=this.ha=this.sc=null;this.Cg=new pr(Xd);this.gd=[];this.Jb=null;this.Op=this.Pm=this.Mp=!1;this.b=this.yi=this.Xd=null;this.rb={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Ps=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(Cr,ad);f=Cr.prototype;
f.sv=function(){window.cancelAnimationFrame(this.Ps);this.rb.PROGRESSBAR_ENABLED&&(this.yi=new Br(this.va,3))};f.tv=function(){this.rb.PROGRESSBAR_ENABLED&&this.yi&&(this.yi.done(),this.Dp=Xf(function(){this.Dp=null;this.yi&&(this.yi.ho(),this.yi=null);this.Pm=this.Op=!0;this.n()}.bind(this),700))};f.uv=function(a){this.yi&&this.yi.H(100*a.Qj)};f.Ck=function(a){this.Xd&&this.Xd.H(100*a.Qj)};f.QJ=function(a){null!=a&&a instanceof Vd&&a.Ma&&this.jh(a.Ma)};
f.bK=function(a){null!=a&&a instanceof Wd&&a.Ma&&this.remove(a.Ma)};f.Av=function(a){if(!(null!=a&&a instanceof te))throw Error("Invalid hover event.");};f.Dk=function(){var a=Jh(this.va);this.Va=a.clientWidth;this.Ha=a.clientHeight;a=Jh(this.sc);null!=a&&(a.width=this.Va,a.height=this.Ha,"renderer3D"==this.s&&(this.b.viewport(0,0,this.Va,this.Ha),this.ha.ct=A.t.Zu(A.t.Wn(),this.ha.Nx,this.sc.width/this.sc.height,1,1E4)))};
f.lm=function(a){if(!(null!=a&&a instanceof se))throw Error("Invalid scroll event.");};Cr.prototype.__defineGetter__("config",function(){return this.rb});Cr.prototype.__defineGetter__("interactor",function(){return this.Ea});Cr.prototype.__defineGetter__("camera",function(){return this.ha});Cr.prototype.__defineGetter__("loadingCompleted",function(){return this.Pm});Cr.prototype.__defineGetter__("container",function(){return this.va});
Cr.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;r(b)&&(b=Jh(a));if(!di(b))throw Error("Could not find the given container.");this.va=b});f=Cr.prototype;f.Do=function(){this.ha.reset()};function Dr(a){a.rb.PROGRESSBAR_ENABLED&&a.Xd&&!a.Dp&&(a.Xd.done(),a.Dp=Xf(function(){this.Dp=null;this.Xd&&(this.Xd.ho(),this.Xd=null);this.n()}.bind(a),700))}
f.ra=function(a){var b=Q("canvas");this.va.appendChild(b);this.Va=this.va.clientWidth;this.Ha=this.va.clientHeight;b.width=this.Va;b.height=this.Ha;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.va.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Jb=new Nf;F(this.Jb,he,this.Ck.bind(this));this.sc=b;this.b=c;b=new hr(this.sc);"2d"==a&&(b=new jr(this.sc));b.ra();F(b,de,this.Do.bind(this));F(b,ie,this.Av.bind(this));F(b,ce,this.lm.bind(this));this.Ea=b;b=new tr(this.Va,this.Ha);"2d"==a&&(b=new sr(this.Va,this.Ha));b.observe(this.Ea);this.ha=b;F(window,"resize",this.Dk,!1,this)};f.add=function(a){(a instanceof or||a instanceof Op||a instanceof mr)&&a.da();this.gd.push(a);this.jh(a)};
f.remove=function(a){if(!this.sc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&I(a);return!1};f.jh=function(a){if(!this.sc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Vc(a,fe)||F(a,fe,this.QJ.bind(this)),Vc(a,ge)||F(a,ge,this.bK.bind(this)),Vc(a,ke)||F(a,ke,this.sv.bind(this)),Vc(a,me)||F(a,me,this.uv.bind(this)),Vc(a,le)||F(a,le,this.tv.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.Cg.Ya,c=b.length,d=0,d=0;d<c;d++)if(b[d].fd==a)return b[d];return null};
f.n=function(){if(!this.sc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.ay){if(this.Jb.nl.Jt(!1)){if(this.rb.PROGRESSBAR_ENABLED&&!this.Xd&&(this.Xd=new Br(this.va,3)),this.Op=this.Pm=!1,this.ay=Xf(function(){this.ay=null;this.n()}.bind(this),100),!this.rb.INTERMEDIATE_RENDERING)return}else if(this.Pm||this.Op||(this.Op=!0,eval("this.onShowtime()"),this.Pm=!0),this.Xd){Dr(this);return}this.Ps=window.requestAnimationFrame(this.n.bind(this));eval("this.onRender()");
this.Yg(!1,!0)}};f.EB=function(){};f.CB=function(){};f.Yg=function(){};f.ae=function(){window.cancelAnimationFrame(this.Ps);this.Jb&&(delete this.Jb,this.Jb=null);this.Xd&&(this.Xd.ho(),delete this.Xd,this.Xd=null);this.Cg.clear();delete this.Cg;this.gd.length=0;delete this.gd;delete this.Jb;this.Jb=null;delete this.ha;this.ha=null;delete this.Ea;this.Ea=null;delete this.b;this.b=null;R(this.sc);delete this.sc;this.sc=null};function Er(){Cr.call(this);this.s="renderer2D";this.Rc=null;this.Ad=-1;this.Wd=[];this.Sx=this.Kp=this.Ox=this.Ip=null;this.rl=this.tl=this.Nj=this.Oj=0;this.Kb=this.Lb=this.vb=this.tb=this.Lx=-1;this.Tx=new Float32Array([-255,-255,-255,-255]);this.$x=!0}w(Er,Cr);Er.prototype.Jv=function(){};Er.prototype.AK=function(){};Er.prototype.lm=function(a){Er.d.lm.call(this,a);var b=this.gd[0];if(b){var c="",c=0==this.Ad?"indexX":1==this.Ad?"indexY":"indexZ";b[c]=a.Vb?b[c]+1:b[c]-1;eval("this.onScroll();")}};
Er.prototype.BK=function(a){var b=this.gd[0];if(b){var c=b.Kb-b.Lb,d=c/2,e=parseInt(c+c/15*-a.lt,10);a=parseInt(d+d/15*a.Ys,10);c==e&&e++;d==a&&a++;b.Lb-=parseInt(d-a,10);b.Lb-=parseInt(c-e,10);b.Lb=Math.max(b.Lb,b.Vd);b.Kb-=parseInt(d-a,10);b.Kb+=parseInt(c-e,10);b.Kb=Math.min(b.Kb,b.Tb);eval("this.onWindowLevel();")}};Er.prototype.__defineGetter__("orientation",function(){return this.Rc});
Er.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.Ad=2):"SAGITTAL"==a?(a="X",this.Ad=0):"CORONAL"==a&&(a="Y",this.Ad=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Rc=a});Er.prototype.__defineGetter__("radiological",function(){return this.$x});Er.prototype.__defineSetter__("radiological",function(a){this.$x=a});f=Er.prototype;
f.ra=function(){if(!this.Rc)throw Error("No 2D orientation set.");Er.d.ra.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.sc.width,this.sc.height);this.Ip=Q("canvas");this.Kp=Q("canvas");F(this.ha,ee,this.BK.bind(this))};f.Dk=function(){Er.d.Dk.call(this);Fr(this)};f.Do=function(){Er.d.Do.call(this);Fr(this);var a=this.gd[0];a&&(a.Kb=a.Tb,a.Lb=a.Vd)};
f.jh=function(a){Er.d.jh.call(this,a);var b=!1;this.get(a.fd)&&(b=!0);if(a instanceof J){var c=a.ea,d=a.q,e=a.zd;if(null!=d&&null!=d.ea&&d.ea.G)this.jh(d);else if(null!=e&&null!=e.ea&&e.ea.G)this.Jb.load(e,a);else{if(null!=c&&g(c))if(null!=a.nh){if(a.nh.no!=c.length||b&&!a.G)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Jb.load(c[b],a);return}else if(null!=c&&c.G){this.Jb.load(a,a);return}c=this.Rc;this.Ad="X"==c?0:"Y"==c?1:2;this.Sc=a.j[this.Ad].j;e=null;e=0==this.Ad?a.indexX:1==this.Ad?a.indexY:
a.indexZ;c=a.j[this.Ad].j[e].Rx;d=a.j[this.Ad].j[e].Qx;this.tl=a.j[this.Ad].j[e].zh;this.rl=a.j[this.Ad].j[e].sh;this.Oj=c;this.Nj=d;e=this.Ip;e.width=c;e.height=d;var h=this.Kp;h.width=c;h.height=d;this.Ox=e.getContext("2d");this.Sx=h.getContext("2d");b||(this.Cg.add(a),Fr(this))}}};function Fr(a){var b=Math.min(a.Va/(a.Oj*a.tl),a.Ha/(a.Nj*a.rl));null!=a.ha&&(a.ha.O[14]=b)}f.Gr=function(){};
f.nD=function(a,b){var c=this.gd[0],d=this.ha.O,e=null,h=this.Oj,k=this.Nj,l=null,n=null;if("Y"==this.Rc)e=this.Sc[parseInt(c.indexY,10)],l=e.zh,n=e.sh,this.Wd[0]="red",this.Wd[1]="blue";else if("Z"==this.Rc)e=this.Sc[parseInt(c.indexZ,10)],l=e.zh,n=e.sh,this.Wd[0]="red",this.Wd[1]="green";else{e=this.Sc[parseInt(c.indexX,10)];l=e.sh;n=e.zh;this.Wd[0]="green";this.Wd[1]="blue";var p=h,h=k,k=p}var m=1*d[12],q=-1*d[13],p=Math.max(d[14],.6),d=[this.Va/2,this.Ha/2],l=h*l*p,n=k*n*p,t=d[0]-l/2,d=d[1]-n/
2,t=t+m*p,d=d+q*p;return a>t&&a<t+l&&b>d&&b<d+n?(m=(a-t)/l*h,q=(b-d)/n*k,n=e.gF[4],"X"==this.Rc?(p=h-m,m=q,q=p):"Y"==this.Rc?m=h-m:"Z"==this.Rc&&(m=h-m,q=k-q),m=e.fF+m*e.zh,q=e.$E+q*e.sh,m=zd(m,q,n,1),h=Ad(),Kd(e.TE,m,h),k=Ad(),Kd(e.UE,m,k),e=Math.round((c.e[0].D[0]*k[0]+c.e[0].D[1]*k[1]+c.e[0].D[2]*k[2]+c.e[0].at)/c.e[0].sl),e>=c.e[0].ba?e=c.e[0].ba-1:0>e&&(e=0),m=Math.round((c.e[1].D[0]*k[0]+c.e[1].D[1]*k[1]+c.e[1].D[2]*k[2]+c.e[1].at)/c.e[1].sl),m>=c.e[1].ba?m=c.e[1].ba-1:0>m&&(m=0),q=Math.round((c.e[2].D[0]*
k[0]+c.e[2].D[1]*k[1]+c.e[2].D[2]*k[2]+c.e[2].at)/c.e[2].sl),q>=c.e[2].ba?q=c.e[2].ba-1:0>q&&(q=0),[[e,m,q],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.Yg=function(a,b){Er.d.Yg.call(this,a,b);if(0!=this.Cg.Ya.length){var c=this.gd[0],d=null,d=0==this.Ad?c.indexX:1==this.Ad?c.indexY:c.indexZ,e=this.Sc[parseInt(d,10)].Rx,h=this.Sc[parseInt(d,10)].Qx;this.tl=this.Sc[parseInt(d,10)].zh;this.rl=this.Sc[parseInt(d,10)].sh;this.Oj=e;this.Nj=h;var k=this.Va,l=this.Ha,n=this.ha.O;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var p=Math.max(n[14],.1);this.b.setTransform(p,0,0,p,0,0);var m=1*n[12],n=-1*n[13],q=null;c.q&&(q=c.q.it);var t=
this.Sc[parseInt(d,10)],s=t.Ua.zi,t=t.q,z=null;t&&(z=t.zi);var y=this.Oj,H=this.Nj,P=this.Ox,O=this.Sx,G=P.getImageData(0,0,y,H),S=O.getImageData(0,0,y,H),Y=G.data,U=S.data,va=Y.length,na=c.Tb,ya=c.tb,Ma=c.vb,Ha=c.Lb/na,Na=c.Kb/na;if(this.Lx!=d||this.tb!=ya||this.vb!=Ma||this.Lb!=Ha||this.Kb!=Na||q&&!qr(q,this.Tx,0)){var la=this.Ip;la.width=e;la.height=h;la=this.Kp;la.width=e;la.height=h;e=0;do{var la=[0,0,0,0],h=[0,0,0,0],za=s[e]/255*na,qa=s[e],qa=(qa/255-Ha)/(Na-Ha),qa=255*qa;za>=ya&&za<=Ma&&(la=
new K(c.vi[0],c.vi[1],c.vi[2]),la=(new K(c.ti[0],c.ti[1],c.ti[2])).scale(qa).add(la.scale(255-qa)),la=[Math.floor(la.x),Math.floor(la.y),Math.floor(la.z),255],t&&(-255==q[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:qr(q,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.Rc?(Y[e]=la[0],Y[e+1]=la[1],Y[e+2]=la[2],Y[e+3]=la[3],U[e]=h[0],U[e+1]=h[1],U[e+2]=h[2],U[e+3]=h[3]):"Y"==this.Rc?(qa=Math.floor(e/(4*y)),qa=qa*y*4+(4*(y-1)-(e-qa*y*4)),Y[qa]=la[0],Y[qa+1]=la[1],Y[qa+2]=la[2],Y[qa+3]=la[3],U[qa]=h[0],U[qa+1]=
h[1],U[qa+2]=h[2],U[qa+3]=h[3]):(qa=va-1-e,Y[qa-3]=la[0],Y[qa-2]=la[1],Y[qa-1]=la[2],Y[qa]=la[3],U[qa-3]=h[0],U[qa-2]=h[1],U[qa-1]=h[2],U[qa]=h[3]);e+=4}while(e<va);P.putImageData(G,0,0);O.putImageData(S,0,0);this.Lx=d;this.tb=ya;this.vb=Ma;this.Lb=Ha;this.Kb=Na;t&&(this.Tx=q)}this.b.globalAlpha=1;this.b.translate(k/2/p,l/2/p);"X"==this.Rc&&(this.b.rotate(.5*Math.PI),d=m,m=n,n=-d);m=-y*this.tl/2+m;n=-H*this.rl/2+n;this.b.drawImage(this.Ip,m,n,y*this.tl,H*this.rl);t&&c.q.jb&&(this.b.globalAlpha=c.q.Qc,
this.b.drawImage(this.Kp,m,n,y*this.tl,H*this.rl));this.rb.SLICENAVIGATORS&&this.Ea.Np&&this.Ea.ht&&!this.Ea.Bg&&(m=this.Ea.Pc,m=this.nD(m[0],m[1]))&&(c.th=m[0][0],c.uh=m[0][1],c.vh=m[0][2],c.da(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Ea.Pc[0],0),this.b.lineTo(this.Ea.Pc[0],this.Ea.Pc[1]-10),this.b.moveTo(this.Ea.Pc[0],this.Ea.Pc[1]+10),this.b.lineTo(this.Ea.Pc[0],this.Ha),this.b.strokeStyle=this.Wd[0],this.b.stroke(),
this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Ea.Pc[1]),this.b.lineTo(this.Ea.Pc[0]-10,this.Ea.Pc[1]),this.b.moveTo(this.Ea.Pc[0]+10,this.Ea.Pc[1]+.5),this.b.lineTo(this.Va,this.Ea.Pc[1]),this.b.strokeStyle=this.Wd[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+m[2][0].toFixed(2)+", "+m[2][1].toFixed(2)+", "+m[2][2].toFixed(2),0,0),y=t=n="undefined","undefined"!=typeof c.dc[m[1][2].toFixed(0)]&&
"undefined"!=typeof c.dc[m[1][2].toFixed(0)][m[1][1].toFixed(0)]&&(n=c.dc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.bb&&(t=c.q.dc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.q.Mm&&(y=c.q.Mm.get(t),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+m[1][0].toFixed(0)+", "+m[1][1].toFixed(0)+", "+m[1][2].toFixed(0)+")",0,15),c.bb&&this.b.fillText("Labelmap:  "+y+" ("+t+")",0,30))}};v("X.renderer2D",Er);v("X.renderer2D.prototype.init",Er.prototype.ra);
v("X.renderer2D.prototype.add",Er.prototype.add);v("X.renderer2D.prototype.onShowtime",Er.prototype.EB);v("X.renderer2D.prototype.onRender",Er.prototype.CB);v("X.renderer2D.prototype.onScroll",Er.prototype.Jv);v("X.renderer2D.prototype.onWindowLevel",Er.prototype.AK);v("X.renderer2D.prototype.get",Er.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",Er.prototype.Do);v("X.renderer2D.prototype.xy2ijk",Er.prototype.nD);v("X.renderer2D.prototype.render",Er.prototype.n);
v("X.renderer2D.prototype.destroy",Er.prototype.ae);v("X.renderer2D.prototype.onSliceNavigation",Er.prototype.Gr);function Gr(){Zc.call(this)}w(Gr,Zc);v("xiv.vis.RenderEngine",Gr);Gr.prototype.ID_PREFIX="xiv.vis.RenderEngine";var Hr="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{mN:"r",jN:"s",kN:"t"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",Hr);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",Gr.prototype.ID_PREFIX);function Ir(){Er.call(this)}w(Ir,Er);v("xiv.vis.XtkRenderer2D",Ir);f=Ir.prototype;f.cg=function(){this.Dk()};f.Jv=function(){this.Gr()};f.Ck=function(a){Ir.d.Ck.call(this,a);this.dispatchEvent({type:"s",value:a.Qj})};f.ra=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;Ir.d.ra.call(this);this.Ea.onMouseMove=this.KJ.bind(this);this.Ea.config.MOUSEWHEEL_ENABLED=!1;this.Ea.config.MOUSECLICKS_ENABLED=!1;this.Ea.config.KEYBOARD_ENABLED=!1;this.Ea.ra()};f.Db=function(){return this.Rc};
f.uG=function(){return this.ha};f.nH=function(){return this.Ea.mousePosition};f.Zq=function(){};f.KJ=function(){this.dispatchEvent({type:"mouseover",lJ:this.Ea.lJ,pL:this.Ea.shiftDown})};f.Gr=function(){this.dispatchEvent({type:"u",volume:this.gd[0],OO:this.gd[0]["index"+this.Rc],NO:this.Rc,pL:this.Ea.ht})};f.n=function(){this.sc&&this.b?(Ir.d.n.call(this),this.dispatchEvent({type:"t"})):(window.console.log("init"),this.ra(),window.console.log(this.Vl().visible))};f.vG=function(){return this.sc};
f.Vl=function(){return this.gd[0]};f.kA=function(){if(null!=this.Sc){var a=this.gd[0];if(null!=a[J.REORIENTED_DIMENSIONS_KEY]&&"false"==a.reslicing.toString())switch(this.Db()){case "X":return a[J.REORIENTED_DIMENSIONS_KEY][0];case "Y":return a[J.REORIENTED_DIMENSIONS_KEY][1];case "Z":return a[J.REORIENTED_DIMENSIONS_KEY][2]}return this.Sc.length}};f.yA=function(){return this.ha.O[14]};f.GC=function(a){this.ha.O[14]=a};function Jr(a){.01>a.ha.O[14]&&(a.ha.O[14]=.01)}
f.Em=function(){this.ha.O[14]+=.03;Jr(this)};f.Fm=function(){this.ha.O[14]+=-.03;Jr(this)};
function Kr(a,b,c,d){var e=a.gd[0],h=a.ha.O,k=null,l=a.Oj,n=a.Nj,p=null,m=null;if(null!=e){"Y"==a.Rc?(k=a.Sc[parseInt(e.indexY,10)],p=k.zh,m=k.sh,a.Wd[0]="red",a.Wd[1]="blue"):"Z"==a.Rc?(k=a.Sc[parseInt(e.indexZ,10)],p=k.zh,m=k.sh,a.Wd[0]="red",a.Wd[1]="green"):(k=a.Sc[parseInt(e.indexX,10)],p=k.sh,m=k.zh,a.Wd[0]="green",a.Wd[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),q=[a.Va/2,a.Ha/2],p=l*p*h,m=n*m*h,t=q[0]-p/2,q=q[1]-m/2,t=t+e*h,q=q+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?t+(a.Oj-b)/l*p:t+b/l*p;b=Math.max(0,b);b=Math.min(b,n);return d?q+(a.Nj-b)/n*m:q+b/n*m}}f.sA=function(a,b){return Kr(this,a,"vertical",b)};f.aA=function(a,b){return Kr(this,a,"horizontal",b)};f.ae=function(){Ir.d.ae.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",Ir.prototype.cg);v("xiv.vis.XtkRenderer2D.prototype.onScroll",Ir.prototype.Jv);v("xiv.vis.XtkRenderer2D.prototype.onProgress",Ir.prototype.Ck);
v("xiv.vis.XtkRenderer2D.prototype.init",Ir.prototype.ra);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",Ir.prototype.Db);v("xiv.vis.XtkRenderer2D.prototype.getCamera",Ir.prototype.uG);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",Ir.prototype.nH);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",Ir.prototype.Zq);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",Ir.prototype.Gr);v("xiv.vis.XtkRenderer2D.prototype.render",Ir.prototype.n);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",Ir.prototype.vG);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",Ir.prototype.Vl);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",Ir.prototype.kA);v("xiv.vis.XtkRenderer2D.prototype.getZoom",Ir.prototype.yA);v("xiv.vis.XtkRenderer2D.prototype.setZoom",Ir.prototype.GC);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",Ir.prototype.Em);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",Ir.prototype.Fm);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",Ir.prototype.sA);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",Ir.prototype.aA);v("xiv.vis.XtkRenderer2D.prototype.destroy",Ir.prototype.ae);function Lr(){V.call(this)}w(Lr,op);v("xiv.ui.layouts.interactors.ZoomDisplay",Lr);Lr.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";Lr.prototype.n=function(a){Lr.d.n.call(this,a);this.Ja.min=1};Lr.prototype.ih=function(){this.ff.innerHTML="Zoom level:&nbsp"+this.Ja.value+"%"};v("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",Lr.ID_PREFIX);v("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",Lr.prototype.ih);function Mr(a,b){Up.call(this,a,b);this.Ka.mj(0)}w(Mr,Up);Mr.prototype.W=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};Mr.prototype.qz=function(){var a=this.a(),b=Kh(null,"goog-slider-thumb",a)[0];b||(b=this.$j(),a.appendChild(b));this.pa=this.wc=b};Mr.prototype.$j=function(){var a=this.N().w("div","goog-slider-thumb");Xk(a,"button");return a};function Nr(a){Mr.call(this);this.constructor.Gm=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.Bc=this.constructor.Gm;V.prototype.jq.bind(this)();null!=a&&this.di(a)}w(Nr,Mr);v("nrg.ui.Slider",Nr);Nr.ID_PREFIX="nrg.ui.Slider";Nr.CSS_SUFFIX={BE:"track",Fx:"track-hovered",Is:"thumb",Dx:"thumb-hovered"};f=Nr.prototype;f.gm=!1;f.Qh=!1;f.fp=!1;f.yl=!1;f.uF=function(){return this.yl};f.ls=null;f.aq=null;f.nn=null;f.Cb=null;f.kb=null;f.FL=function(a){this.fp=a};
f.EL=function(a){this.fp=a};f.n=function(a){this.o=Q("div",{id:Nr.ID_PREFIX+"_Widget_"+B()});this.yb(this.o);a=null!=a?a:document.body;a.appendChild(this.o);this.se=Q("div",{id:Nr.ID_PREFIX+"_Track_"+B()});this.o.appendChild(this.se);this.Lc=Nh("goog-slider-thumb",this.o);F(this,"change",this.AJ.bind(this));F(this.a(),"mouseenter",this.SJ.bind(this));F(this.a(),"mouseleave",this.Cr.bind(this));F(this,"l",this.lK.bind(this));F(this,"m",this.iK.bind(this));this.di(this.Db().toLowerCase())};f.a=function(){return this.o};
f.SH=function(){return this.se};f.MH=function(){return this.Lc};f.pn=function(a){null==this.Bj&&(this.Bj={});if(null==this.Bj[a.id]){var b=new Pp(a);b.addEventListener("mousewheel",this.ZJ,!1,this);this.Bj[a.id]=b}};f.CF=function(a){null==this.yj&&(this.yj={});if(null==this.yj[a.id]){var b=new Yn(a);F(b,"key",this.Xh.bind(this));this.yj[a.id]=b}};f.Xh=function(){};
f.k=function(){var a=this.J(),a=gq(this,a);"horizontal"==this.Db().toLowerCase()?this.Lc.style.left=a.x.toString()+"px":"vertical"==this.Db().toLowerCase()&&(this.Lc.style.left=a.y.toString()+"px")};f.di=function(a){Nr.d.di.call(this,a);this.fa&&Or(this,this.Db().toLowerCase())};function Or(a,b){function c(a,c){Ch(a,[uj(c,"horizontal"),uj(c,"vertical")],[c,uj(c,b)])}c(a.o,a.constructor.Bc);c(a.se,Nr.CSS.BE);c(a.Lc,Nr.CSS.Is)}f.Vw=!1;f.Wt=1;f.CC=function(a,b){this.Vw=a;u(b)&&(this.Wt=b)};
f.ZJ=function(a){var b=Math.abs(a.Fd)<Math.abs(a.Eh)?a.Eh:a.Fd;this.Vw?this.H(Math.round(this.J()-b*this.Wt)):this.H(Math.round(this.J()-(0>b?-1:1)));this.dispatchEvent({type:"y"});a.preventDefault()};f.qt=function(a){this.eh=this.eh?this.eh:[];this.eh.push(a);Pr(this)};f.xy=function(a){this.fh=this.fh?this.fh:[];this.fh.push(a);Qr(this)};
f.Py=function(a){this.yl=!0;this.ls=a;a=this.Lc;this.aq=Ek(a);N(a,this.ls);var b=Ek(a);Ah(a,this.ls);if(null!=this.nn)for(var c in b){if(b[c]!=this.aq[c]){this.nn=b;break}}else this.nn=b};function Rr(a){null!=a.Cb&&(D(a.Cb,function(a){a.g()}),Ib(a.Cb),delete a.Cb)}
function Sr(a,b){if(a.yl){var c=a.Lc,d=Ek(c),e=T(c),h=Ci(c);"vertical"==a.Db()&&(d.top=h.y,d.height=e.height,b.top=h.y,b.height=e.height);null!=a.kb&&(a.kb.stop(),a.kb.g(),delete a.kb,Rr(a));a.kb=new ek;a.Cb=Jk(c,d,b,200);D(a.Cb,function(a){this.kb.add(a)}.bind(a));a.kb.play()}}f.AJ=function(a){a.stopPropagation();this.gm&&(Tr(this),Ur(this));this.fp||this.dispatchEvent({type:"v",value:this.J(),cv:this.na(),bv:this.ga()});this.fp=!1};
function Tr(a){N(a.Lc,Nr.CSS.Dx);null!=a.eh&&D(a.eh,function(a){N(this.Lc,a)}.bind(a))}function Ur(a){N(a.se,Nr.CSS.Fx);null!=a.fh&&D(a.fh,function(a){N(this.se,a)}.bind(a))}function Pr(a){Ah(a.Lc,Nr.CSS.Dx);null!=a.eh&&D(a.eh,function(a){Ah(this.Lc,a)}.bind(a))}function Qr(a){Ah(a.se,Nr.CSS.Fx);null!=a.fh&&D(a.fh,function(a){Ah(this.se,a)}.bind(a))}f.SJ=function(){this.Qh=!0;this.gm||(this.yl?Sr(this,this.nn):(Ur(this),Tr(this)))};
f.Cr=function(){this.Qh=!1;this.gm||(this.yl?Sr(this,this.aq):(Pr(this),Qr(this)))};f.lK=function(){this.gm=!0};f.iK=function(){this.gm=!1;this.Qh||this.Cr()};
f.f=function(){Nr.d.f.call(this);delete this.fp;null!=this.o&&(I(this),R(this.o),delete this.o);null!=this.Lc&&(I(this.Lc),R(this.Lc),delete this.Lc);null!=this.se&&(I(this.se),R(this.se),delete this.se);null!=this.yj&&(C(this.yj,function(a){I(a);a.g()}),sb(this.yj),delete this.yj);null!=this.Bj&&(C(this.Bj,function(a){I(a);a.g()}),sb(this.Bj),delete this.Bj);null!=this.eh&&(Ib(this.eh),delete this.eh);null!=this.fh&&(Ib(this.fh),delete this.fh);Rr(this);delete this.Vw;delete this.Wt;delete this.gm;
delete this.yl;delete this.ls;delete this.Cb;delete this.kb;delete this.dP;delete this.aq;delete this.nn;delete this.Qh};v("nrg.ui.Slider.EventType",{FN:"v",LN:"w",xM:"x",$M:"y"});v("nrg.ui.Slider.ID_PREFIX",Nr.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",Nr.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendSlideEvent",Nr.prototype.FL);v("nrg.ui.Slider.prototype.suspendChangeEvent",Nr.prototype.EL);v("nrg.ui.Slider.prototype.render",Nr.prototype.n);v("nrg.ui.Slider.prototype.getElement",Nr.prototype.a);
v("nrg.ui.Slider.prototype.getTrack",Nr.prototype.SH);v("nrg.ui.Slider.prototype.getThumb",Nr.prototype.MH);v("nrg.ui.Slider.prototype.bindToMouseWheel",Nr.prototype.pn);v("nrg.ui.Slider.prototype.bindToArrowKeys",Nr.prototype.CF);v("nrg.ui.Slider.prototype.updateStyle",Nr.prototype.k);v("nrg.ui.Slider.prototype.setOrientation",Nr.prototype.di);v("nrg.ui.Slider.prototype.setUseDeltaToScroll",Nr.prototype.CC);v("nrg.ui.Slider.prototype.addThumbHoverClass",Nr.prototype.qt);
v("nrg.ui.Slider.prototype.addTrackHoverClass",Nr.prototype.xy);v("nrg.ui.Slider.prototype.animateOnHover",Nr.prototype.Py);v("nrg.ui.Slider.prototype.animatesOnHover",Nr.prototype.uF);v("nrg.ui.Slider.prototype.disposeInternal",Nr.prototype.f);function Vr(){Nr.call(this)}w(Vr,Nr);v("xiv.ui.layouts.interactors.Slider",Vr);Vr.ID_PREFIX="xiv.ui.layouts.interactors.Slider";Vr.CSS_SUFFIX={};Vr.prototype.n=function(){Vr.d.n.call(this)};Vr.prototype.f=function(){Vr.d.f.call(this)};v("xiv.ui.layouts.interactors.Slider.EventType",{});v("xiv.ui.layouts.interactors.Slider.ID_PREFIX",Vr.ID_PREFIX);v("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",Vr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Slider.prototype.render",Vr.prototype.n);
v("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",Vr.prototype.f);function Wr(){V.call(this)}w(Wr,V);v("xiv.ui.layouts.interactors.Crosshairs",Wr);Wr.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";Wr.CSS_SUFFIX={FM:"horizontal",mO:"vertical"};f=Wr.prototype;f.qg=null;f.Xf=null;f.EC=function(a){null!=a&&(this.qg.style.left=a.toString()+"px")};f.FC=function(a){null!=a&&(this.Xf.style.top=a.toString()+"px")};f.n=function(a){this.qg=Xr(this,"vertical");this.Xf=Xr(this,"horizontal");a.appendChild(this.Xf);a.appendChild(this.qg)};
f.jp=function(a){a=!1===a?"hidden":"visible";this.qg.style.visibility=a;this.Xf.style.visibility=a};function Xr(a,b){b=b.toLowerCase();if(!pb(Wr.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return Q("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.Bc+"-"+b.toLowerCase()})}f.f=function(){Wr.d.f.call(this);R(this.qg);delete this.qg;R(this.Xf);delete this.Xf};v("xiv.ui.layouts.interactors.Crosshairs.EventType",{});v("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",Wr.ID_PREFIX);
v("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",Wr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",Wr.prototype.qg);v("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",Wr.prototype.Xf);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",Wr.prototype.EC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",Wr.prototype.FC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.render",Wr.prototype.n);
v("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",Wr.prototype.jp);v("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",Wr.prototype.f);function Yr(){V.call(this)}w(Yr,V);v("xiv.ui.layouts.interactors.PlayButton",Yr);Yr.ID_PREFIX="xiv.ui.layouts.interactors.PlayButton";Yr.CSS_SUFFIX={ki:"image"};f=Yr.prototype;f.Xa=null;f.co=!1;f.L=null;f.oa=null;f.Yf=70;f.n=function(a){Yr.d.n.call(this,a);this.Xa=Q("img",{id:"PlayButton_"+B()});N(this.Xa,Yr.CSS.ki);this.a().appendChild(this.Xa);this.Xa.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";F(this.Xa,"click",function(){this.co?(this.co=!1,this.pause()):(this.co=!0,this.play())}.bind(this))};
f.pause=function(){this.Xa.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";null!=this.L&&null!=this.oa&&this.oa.stop()};f.play=function(){this.Xa.src=serverRoot+"/images/viewer/xiv/ui/other/pause.png";null!=this.L&&(null==this.oa&&(this.oa=new Vf),this.oa.setInterval(this.Yf),this.oa.addEventListener(Wf,function(){this.L.J()==this.L.ga()?this.L.H(this.L.na()):this.L.H(this.L.J()+1)}.bind(this)),this.oa.start())};f.setInterval=function(a){this.Yf=a};f.lf=function(){return this.co};
f.zC=function(a){this.L=a};f.f=function(){Yr.d.f.call(this);R(this.Xa);I(this.Xa);delete this.Xa;null!=this.oa&&(I(this.oa),this.oa.g());delete this.L;delete this.co;delete this.oa;delete this.Yf};v("xiv.ui.layouts.interactors.PlayButton.ID_PREFIX",Yr.ID_PREFIX);v("xiv.ui.layouts.interactors.PlayButton.prototype.pause",Yr.prototype.pause);v("xiv.ui.layouts.interactors.PlayButton.prototype.play",Yr.prototype.play);v("xiv.ui.layouts.interactors.PlayButton.prototype.isPlaying",Yr.prototype.lf);
v("xiv.ui.layouts.interactors.PlayButton.prototype.setInterval",Yr.prototype.setInterval);v("xiv.ui.layouts.interactors.PlayButton.prototype.setSlider",Yr.prototype.zC);function Zr(a){Zq.call(this);a=null!=a?a:nb($r);a=g(a)?a:[a];D(a,function(b,c){a[c]=b.toUpperCase()});as(this,a);bs(this,a);null!=this.i.X&&this.pe();null!=this.i.Y&&this.lg();null!=this.i.Z&&this.oj();null!=this.i.V&&this.Xo();this.k()}w(Zr,Zq);v("xiv.ui.layouts.XyzvLayout",Zr);Zr.TITLE="XyzvLayout";Zr.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var $r={yg:"X",Ae:"Y",dl:"Z",zp:"V"};
Zr.CSS_SUFFIX={yg:"x",Ae:"y",dl:"z",zp:"v",la:"slider",mi:"slider-thumb",Hs:"slider-thumb-hovered",ni:"slider-track",HN:"slider-track-x",IN:"slider-track-y",JN:"slider-track-z",BM:"framenumber"};function cs(a,b,c,d,e){this.la=a;this.Od=b;this.cd=c;this.Df=d;this.Cj=e}f=Zr.prototype;f.XB=0;f.ci=function(a,b){this.i[a].pm(b);var c=this.nz(a);Xh(this.a(),c);c.style.position="absolute";this.i[a].Q().ai(c);this.i[a].Q().update()};
f.nz=function(a){return Q("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":uj(this.constructor.Bc,a.toLowerCase()+"-resizeboundary")})};function as(a,b){if(b.length>mb($r))throw Error("Invalid amount of frames "+b+". Must be "+$r);D(b,function(a){if(!pb($r,a))throw Error("Invalid frame title ",a);}.bind(a))}function bs(a,b){var c="";D(b,function(a,b){c=a.toUpperCase();this.my(new Yq(c));Xh(this.a(),this.i[c].a());N(this.i[c].a(),Zr.CSS[b])}.bind(a))}f.QL=function(a){a.iw(this.Rl())};
f.iw=function(a){this.Ne(function(b,c){null!=a[c]&&(b[$q]=a[c].la,R(a[c].la.a()),b.a().appendChild(a[c].la.a()),b[ar]=a[c].Od,R(a[c].Od.a()),b.a().appendChild(a[c].Od.a()),b[cr]=a[c].cd,b.a().appendChild(a[c].cd.qg),b.a().appendChild(a[c].cd.Xf))})};f.ky=function(){this.Zv();ds(this);es(this);fs(this);gs(this);hs(this)};f.Rl=function(){var a={};this.Ne(function(b,c){a[c]=new cs(b[$q],b[ar],b[cr],b[br],b[dr])});return a};f.dA=function(a){a=this.i[a];return new cs(a[$q],a[ar],a[cr],a[br],a[dr])};
f.cA=function(a,b){return this.i[a][b]};f.$z=function(a){return this.i[a]};function ds(a){var b;a.Ne(function(a,d){b=new Nr("horizontal");b.n(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[$q]=b;Ch(b.a(),null,[Zr.CSS.la]);Ch(b.Lc,null,[Zr.CSS.mi]);Ch(b.se,null,[Zr.CSS.ni,uj(Zr.CSS.ni,d.toLowerCase())]);b.qt(Zr.CSS.Hs)}.bind(a))}function es(a){var b;a.Ne(function(a){b=new pp;b.n(a.a());a[ar]=b}.bind(a))}function fs(a){var b;a.Ne(function(a){b=new Lr;b.n(a.a());a[br]=b}.bind(a))}
function hs(a){var b;a.Ne(function(a){b=new Yr;b.n(a.a());a[dr]=b}.bind(a))}function gs(a){var b;a.Ne(function(a){b=new Wr;a[cr]=b;b.n(a.a());a.a().appendChild(b.Xf);a.a().appendChild(b.qg)}.bind(a))}f.Ne=function(a){C($r,function(b){b=b.toUpperCase();null!=this.i[b]&&"V"!=b&&a(this.i[b],b)}.bind(this))};f.loop=function(a){C($r,function(b){b=b.toUpperCase();a(this.i[b],b)}.bind(this))};f.pe=function(){null!=this.constructor.CSS&&N(this.i.X.a(),this.constructor.CSS.yg)};
f.lg=function(){null!=this.constructor.CSS&&N(this.i.Y.a(),this.constructor.CSS.Ae)};f.zo=function(a){this.Bh();var b=T(this.i.X.a()),c=T(this.i.Y.a()),d=T(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.v.width)};f.oj=function(){null!=this.constructor.CSS&&N(this.i.Z.a(),this.constructor.CSS.dl)};f.Xo=function(){null!=this.constructor.CSS&&N(this.i.V.a(),this.constructor.CSS.zp)};f.Oe=ea;f.Bk=ea;f.zr=ea;f.yr=ea;f.te=ea;f.Ue=ea;f.ue=ea;f.Sk=ea;f.f=function(){Zr.d.f.call(this);delete this.XB};
v("xiv.ui.layouts.XyzvLayout.TITLE",Zr.TITLE);v("xiv.ui.layouts.XyzvLayout.EventType",{});v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",Zr.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",$r);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",Zr.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",cs);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",Zr.prototype.XB);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",Zr.prototype.ci);
v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",Zr.prototype.nz);v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",Zr.prototype.QL);v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",Zr.prototype.iw);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",Zr.prototype.ky);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",Zr.prototype.Rl);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",Zr.prototype.dA);
v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",Zr.prototype.cA);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",Zr.prototype.$z);v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",Zr.prototype.Ne);v("xiv.ui.layouts.XyzvLayout.prototype.loop",Zr.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",Zr.prototype.pe);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",Zr.prototype.lg);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",Zr.prototype.oj);
v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",Zr.prototype.Xo);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",Zr.prototype.Oe);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",Zr.prototype.Bk);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",Zr.prototype.zr);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",Zr.prototype.yr);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",Zr.prototype.te);
v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",Zr.prototype.Ue);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",Zr.prototype.ue);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",Zr.prototype.Sk);v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",Zr.prototype.f);function is(){Zr.call(this,["X","Y","Z"])}w(is,Zr);v("xiv.ui.layouts.TwoDWidescreen",is);is.TITLE="TwoDWidescreen";is.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";is.CSS_SUFFIX={yg:"x",Ae:"y",dl:"z"};f=is.prototype;f.pe=function(){is.d.pe.call(this);this.ci("X",["RIGHT"]);F(this.i.X.Q(),"resize",this.Oe.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};f.lg=function(){is.d.lg.call(this);this.ci("Y",["BOTTOM"]);F(this.i.Y.Q(),"resize",this.Bk.bind(this));F(this.i.Y.Q(),"resize_end",this.k.bind(this))};
f.Oe=function(){this.zo(function(a){var b=a.width,c=Math.max(this.v.width-a.width,this.nb);D(["Y","Z"],function(a){this.i[a].a().style.left=b+"px";this.i[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.Jg()};f.Bk=function(){this.zo(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.v.height-c;this.i.Z.a().style.top=c+"px";this.i.Z.a().style.height=d+"px"}.bind(this));this.Jg()};f.k=function(){is.d.k.call(this);this.Fo();this.te();this.ue();this.Ue()};
f.Fo=function(){if(this.ja.width!==this.v.width||this.ja.height!==this.v.height){var a=1-(this.ja.height-this.v.height)/this.ja.height,b=1-(this.ja.width-this.v.width)/this.ja.width;this.Ne(function(c){frameSize=T(c.a());c.a().style.width=Math.max(frameSize.width*b,this.nb).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.$c).toString()+"px"}.bind(this))}};
f.te=function(){var a=this.i.X;a.a().style.height=this.v.height.toString()+"px";pk(a.Q().md(),{left:this.nb,width:this.v.width-2*this.nb});var b=a.Q().nd("RIGHT");b.style.left=a.a().style.width;Pi(b,this.v.height);a.Q().update()};f.ue=function(){var a=this.i.Y;a.a().style.left=this.i.X.a().style.width;pk(a.Q().md(),{top:this.$c,height:this.v.height-2*this.$c});var b=a.Q().nd("BOTTOM");b.style.top=a.a().style.height;Oi(b,parseInt(a.a().style.width));a.Q().update()};
f.Ue=function(){var a=this.i.Z;a.a().style.left=this.i.X.a().style.width;a.a().style.top=this.i.Y.a().style.height;a.a().style.height=this.v.height-parseInt(this.i.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",is.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",is.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",is.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",is.prototype.pe);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",is.prototype.lg);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",is.prototype.Oe);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",is.prototype.Bk);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",is.prototype.k);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",is.prototype.te);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",is.prototype.ue);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",is.prototype.Ue);function js(a){Zr.call(this,a)}w(js,Zr);v("xiv.ui.layouts.SingleFrameLayout",js);js.TITLE="SingleFrameLayout";js.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";js.prototype.Fo=function(){if(this.ja.width!==this.v.width||this.ja.height!==this.v.height){var a=this.ja.height*(1-(this.ja.height-this.v.height)/this.ja.height),b=this.ja.width*(1-(this.ja.width-this.v.width)/this.ja.width);this.loop(function(c){null!=c&&Ni(c.a(),Math.max(b,this.nb),Math.max(a,this.$c))}.bind(this))}};
js.prototype.k=function(){js.d.k.call(this);this.Fo()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",js.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",js.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",js.prototype.k);function ks(){Zr.call(this,"V");N(this.i.V.a(),uj(Yq.Bc,this.constructor.TITLE))}w(ks,js);v("xiv.ui.layouts.ThreeD",ks);ks.TITLE="ThreeD";ks.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",ks.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",ks.ID_PREFIX);function ms(){Zr.call(this,"X");N(this.i.X.a(),uj(Yq.Bc,this.constructor.TITLE.toLowerCase()))}w(ms,js);v("xiv.ui.layouts.Sagittal",ms);ms.TITLE="Sagittal";ms.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",ms.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",ms.ID_PREFIX);function ns(){Zr.call(this)}w(ns,Zr);v("xiv.ui.layouts.Conventional",ns);ns.TITLE="Conventional";ns.ID_PREFIX="xiv.ui.layouts.Conventional";ns.CSS_SUFFIX={yg:"x",Ae:"y",dl:"z",zp:"v",BO:"v-boundary"};f=ns.prototype;f.pe=function(){ns.d.pe.call(this);this.ci("X",["RIGHT","TOP_RIGHT"]);F(this.i.X.Q(),"resize",this.Oe.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};f.lg=function(){ns.d.lg.call(this)};
f.oj=function(){ns.d.oj.call(this);this.ci("Z",["RIGHT","TOP_RIGHT"]);F(this.i.Z.Q(),"resize",this.zr.bind(this));F(this.i.Z.Q(),"resize_end",this.k.bind(this))};f.Xo=function(){ns.d.Xo.call(this);this.ci("V","BOTTOM");F(this.i.V.Q(),"resize",this.yr.bind(this));F(this.i.V.Q(),"resize_end",this.k.bind(this))};function os(a,b){a.Bh();var c=T(a.i.X.a()),d=T(a.i.Y.a()),e=T(a.i.Z.a());b(c,d,e)}
f.Oe=function(){os(this,function(a,b,c){var d=Math.max(this.v.width-a.width-c.width,this.nb),e=c.width,h=this.v.height-a.height;this.nb==d&&(e=Math.max(this.v.width-a.width-b.width,this.nb),Ai(this.i.X.a(),e,h));Ai(this.i.Z.a(),0,h);Ni(this.i.Z.a(),e,a.height);Ai(this.i.Y.a(),c.width+a.width,h);Ni(this.i.Y.a(),d,a.height);Ni(this.i.V.a(),this.v.width,this.v.height-a.height)}.bind(this));this.Jg()};
f.zr=function(){os(this,function(a,b,c){var d=Math.max(this.v.width-c.width-b.width,this.nb),e=b.width,h=this.v.height-c.height;this.nb==d&&(e=Math.max(this.v.width-c.width-a.width,this.nb));Ai(this.i.X.a(),c.width,h);Ni(this.i.X.a(),d,c.height);Ai(this.i.Y.a(),c.width+d,h);Ni(this.i.Y.a(),e,b.height);Ni(this.i.V.a(),this.v.width,this.v.height-c.height)}.bind(this));this.Jg()};
f.yr=function(){this.Bh();var a=parseInt(this.i.V.a().style.height),b=this.v.height-a;C(this.i,function(c){c!==this.i.V&&pk(c.a(),{top:a,height:b})}.bind(this));this.te();this.ue();this.Jg()};f.k=function(){ns.d.k.call(this);this.Sk();this.Tw();this.Uw();this.te();this.ue();this.Ue()};f.Tw=function(){var a=parseInt(this.i.V.a().style.height),b=Math.max(this.v.height-a,this.$c);this.Ne(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};
f.Uw=function(){var a,b=1-(this.ja.width-this.v.width)/this.ja.width;this.ja.width!==this.v.width&&this.Ne(function(c){a=T(c.a());c.a().style.width=Math.max(a.width*b,this.nb).toString()+"px"}.bind(this))};
function ps(a,b){var c=a.i.V.Q().Sl("BOTTOM"),d=a.i[b].Q().md(),e=Ci(a.i[b].a()),h=T(a.i[b].a());Ai(d,parseInt(d.style.left),a.$c);Ni(d,a.v.width-3*a.nb,a.v.height-2*a.$c);d=a.i[b].Q().nd("RIGHT");Ai(d,e.x+h.width,e.y);Pi(d,a.v.height-c.Wa.y);Ai(a.i[b].Q().nd("TOP_RIGHT"),e.x+h.width,e.y);a.i[b].Q().update()}f.te=function(){this.i.X.a().style.left=this.i.Z.a().style.width;pk(this.i.X.Q().md(),{left:2*this.nb});ps(this,"X")};
f.ue=function(){this.i.Y.a().style.left=(parseInt(this.i.Z.a().style.width)+parseInt(this.i.X.a().style.width)).toString()+"px"};f.Ue=function(){pk(this.i.Z.Q().md(),{left:this.nb});ps(this,"Z")};
f.Sk=function(){if(this.ja.width!==this.v.width||this.ja.height!==this.v.height){var a=T(this.i.V.a());Ni(this.i.V.a(),this.v.width,Math.max(a.height*(1-(this.ja.height-this.v.height)/this.ja.height),this.$c))}Ai(this.i.V.Q().md(),this.v.width,this.$c);Ni(this.i.V.Q().md(),this.v.width-3*this.nb,this.v.height-2*this.$c);a=this.i.V.Q().nd("BOTTOM");Ai(a,0,T(this.i.V.a()).height);Oi(a,this.v.width);this.i.V.Q().update()};v("xiv.ui.layouts.Conventional.TITLE",ns.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",ns.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",ns.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",ns.prototype.pe);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",ns.prototype.lg);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",ns.prototype.oj);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",ns.prototype.Xo);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Z",ns.prototype.zr);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",ns.prototype.Oe);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",ns.prototype.yr);v("xiv.ui.layouts.Conventional.prototype.updateStyle",ns.prototype.k);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",ns.prototype.te);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",ns.prototype.ue);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",ns.prototype.Ue);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",ns.prototype.Sk);function qs(){Zr.call(this,"Z");N(this.i.Z.a(),uj(Yq.Bc,this.constructor.TITLE))}w(qs,js);v("xiv.ui.layouts.Transverse",qs);qs.TITLE="Transverse";qs.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",qs.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",qs.ID_PREFIX);function rs(){Zr.call(this)}w(rs,Zr);v("xiv.ui.layouts.FourUp",rs);rs.TITLE="Four-Up";rs.ID_PREFIX="xiv.ui.layouts.FourUp";rs.CSS_SUFFIX={yg:"x",Ae:"y",dl:"z",zp:"v"};f=rs.prototype;f.pe=function(){rs.d.pe.call(this);this.ci("X",["RIGHT","TOP","TOP_RIGHT"]);F(this.i.X.Q(),"resize",this.Oe.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};
f.Oe=function(){var a=Ci(this.i.X.a()),b=T(this.i.X.a());Ai(this.i.Y.a(),b.width,a.y);Ni(this.i.Y.a(),this.v.width-b.width,b.height);Ai(this.i.Z.a(),0,0);Ni(this.i.Z.a(),b.width,a.y);Ai(this.i.V.a(),b.width,0);Ni(this.i.V.a(),this.v.width-b.width,a.y);a=this.i.X.Q().Sl("RIGHT").nd();a.style.top="0px";a.style.height=this.v.height.toString()+"px";this.Jg()};f.k=function(){rs.d.k.call(this);this.Fo();this.Ue();this.Sk();this.te();this.ue()};
f.Fo=function(){if(this.ja.width!==this.v.width||this.ja.height!==this.v.height){var a=this.ja.height*(1-(this.ja.height-this.v.height)/this.ja.height)/2,b=this.ja.width*(1-(this.ja.width-this.v.width)/this.ja.width)/2;this.loop(function(c){Ni(c.a(),Math.max(b,this.nb),Math.max(a,this.$c))}.bind(this))}};
f.te=function(){this.i.X.a().style.top=this.i.Z.a().style.height;Ai(this.i.X.Q().md(),this.nb,this.$c);Ni(this.i.X.Q().md(),this.v.width-2*this.nb,this.v.height-2*this.$c);var a=this.i.X.Q().Sl("TOP").nd();a.style.left="0px";a.style.width=this.v.width.toString()+"px";this.i.X.Q().update();a=this.i.X.Q().Sl("RIGHT").nd();a.style.top="0px";a.style.height=this.v.height.toString()+"px"};f.ue=function(){this.i.Y.a().style.left=this.i.Z.a().style.width;this.i.Y.a().style.top=this.i.Z.a().style.height};
f.Ue=function(){};f.Sk=function(){this.i.V.a().style.left=this.i.Z.a().style.width};f.f=function(){rs.d.f.call(this)};v("xiv.ui.layouts.FourUp.TITLE",rs.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",rs.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",rs.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",rs.prototype.pe);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",rs.prototype.Oe);v("xiv.ui.layouts.FourUp.prototype.updateStyle",rs.prototype.k);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",rs.prototype.te);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",rs.prototype.ue);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",rs.prototype.Ue);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",rs.prototype.Sk);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",rs.prototype.f);function ss(){Zr.call(this,["X","Y","Z"])}w(ss,Zr);v("xiv.ui.layouts.TwoDRow",ss);ss.TITLE="TwoDRow";ss.ID_PREFIX="xiv.ui.layouts.TwoDRow";ss.CSS_SUFFIX={yg:"x",Ae:"y",dl:"z"};f=ss.prototype;f.pe=function(){ss.d.pe.call(this);this.ci("X",["RIGHT"]);F(this.i.X.Q(),"resize",this.Oe.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};f.lg=function(){ss.d.lg.call(this);this.ci("Y",["RIGHT"]);F(this.i.Y.Q(),"resize",this.Bk.bind(this));F(this.i.Y.Q(),"resize_end",this.k.bind(this))};f.oj=function(){ss.d.oj.call(this)};
f.zo=function(a){this.Bh();var b=T(this.i.X.a()),c=T(this.i.Y.a()),d=T(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.v.width)};f.Oe=function(){this.zo(function(a,b,c){b=Math.max(this.v.width-a.width-c.width,this.nb);var d=this.v.height-a.height;Ai(this.i.Y.a(),a.width,d);Ni(this.i.Y.a(),b,a.height);Ai(this.i.Z.a(),a.width+b,d);Ni(this.i.Z.a(),c.width,a.height)}.bind(this));this.Jg()};
f.Bk=function(){this.zo(function(a,b){var c=this.v.height-b.height;Ai(this.i.X.a(),0,c);Ni(this.i.X.a(),a.width,b.height);Ai(this.i.Z.a(),a.width+b.width,c);Ni(this.i.Z.a(),this.v.width-a.width-b.width,b.height)}.bind(this));this.Jg()};f.k=function(){ss.d.k.call(this);this.Uw();this.Tw();this.te();this.ue();this.Ue()};f.Tw=function(){var a=this.v.height.toString()+"px";this.Ne(function(b){b.a().style.height=a})};
f.Uw=function(){var a,b=1-(this.ja.width-this.v.width)/this.ja.width;this.ja.width!==this.v.width&&this.Ne(function(c){a=T(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.nb).toString()+"px"}.bind(this))};function ts(a,b){var c=a.i[b].Q().md(),d=Ci(a.i[b].a()),e=T(a.i[b].a());Ai(c,parseInt(c.style.left),a.$c);Ni(c,a.v.width-3*a.nb,a.v.height-2*a.$c);c=a.i[b].Q().nd("RIGHT");Ai(c,d.x+e.width,d.y);Pi(c,a.v.height);a.i[b].Q().update()}
f.te=function(){pk(this.i.X.Q().md(),{left:this.nb});ts(this,"X")};f.ue=function(){this.i.Y.a().style.left=this.i.X.a().style.width;pk(this.i.Y.Q().md(),{left:2*this.nb});ts(this,"Y")};f.Ue=function(){this.i.Z.a().style.left=(parseInt(this.i.X.a().style.width)+parseInt(this.i.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",ss.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",ss.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",ss.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",ss.prototype.pe);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",ss.prototype.lg);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",ss.prototype.oj);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",ss.prototype.Oe);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",ss.prototype.Bk);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",ss.prototype.k);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",ss.prototype.te);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",ss.prototype.ue);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",ss.prototype.Ue);function us(){Zr.call(this,"Y");N(this.i.Y.a(),uj(Yq.Bc,this.constructor.TITLE.toLowerCase()))}w(us,js);v("xiv.ui.layouts.Coronal",us);us.TITLE="Coronal";us.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",us.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",us.ID_PREFIX);function vs(){V.call(this);this.constructor.rx={};this.constructor.rx[rs.TITLE]=rs;this.constructor.rx[ns.TITLE]=ns;this.$k={};this.jj={};this.gi={}}w(vs,V);v("xiv.ui.layouts.LayoutHandler",vs);vs.ID_PREFIX="xiv.ui.layouts.LayoutHandler";vs.CSS_SUFFIX={};f=vs.prototype;f.pb=null;f.od=null;f.Qu=!1;f.Ei=null;f.re=null;f.Ny=!0;f.UI=function(){return this.Qu};f.tF=function(a){this.Ny=a};f.Sz=function(){return this.pb[this.Vc]};f.Tz=function(a){return this.pb[this.Vc].pu(a)};
f.pp=function(){null!=this.od&&this.od.pp()};f.qu=function(){return null!=this.od?this.od.Rl():null};function ws(a){var b=[];a=a.od.Rl();C(a,function(a){C(a,function(a){b.push(a.a())})});return b}f.gH=function(a){return null!=this.od?this.od.dA(a):null};f.fH=function(a){return null!=this.od?this.od.$z(a):null};f.hA=function(a,b){return null!=this.od?this.od.cA(a,b):null};f.mC=function(a){this.bi(a);null!=this.od&&this.od.Zv();this.pb[a].ky();this.od=this.pb[a]};
f.ly=function(a,b){if(void 0 in this.$k)throw Error(a+" is an already used layout title!");b&&(this.$k[a]=b)};f.bi=function(a,b){if(!(a in this.$k))throw Error("Invalid layout: "+a+"!");null==this.pb&&(this.pb={});a in this.pb||(this.pb[a]=new this.$k[a],F(this.pb[a],"q",this.Ar.bind(this)),xs(this.pb[a]),Xh(this.a(),this.pb[a].a()));this.Kr=this.Vc;this.Vc=a;this.TC(!1===b?0:500)};
function ys(a){var b;C(a.pb[a.Vc].i,function(a,d){b=this.hA(d,$q);null!=b&&null==a[zs]&&(b.pn(a.a()),a[zs]=!0)}.bind(a))}f.Ar=function(){this.dispatchEvent({type:"C"})};f.TC=function(a){a=u(a)&&0<=a?a:500;this.Kr==this.Vc?ys(this):this.Kr?this.Ny?As(this,a):As(this,0):(Bs(this,this.Vc),Cs(this,this.Vc))};function Ds(a,b,c){D($h(b.a()),function(a){null!=this.jj[c]||(this.jj[c]=[]);this.jj[c].push(a)}.bind(a))}function Es(a){C(a.gi,function(a){Xh(this.a().parentNode,a)}.bind(a))}
function Fs(a,b){var c=[];C(a.gi,function(a,e){c=Lb(c,Jk(a,this.Ei[e],this.re[e],b))}.bind(a));return c}
function As(a,b){var c=a.pb[a.Vc].i,d;Bs(a,a.Vc);Cs(a,a.Vc);null!=a.Ei&&sb(a.Ei);null!=a.re&&sb(a.re);a.Ei={};a.re={};C(a.pb[a.Kr].i,function(a,b){d=a.a().cloneNode(!1);this.gi[b]=d;Ds(this,a,b);C(this.jj,function(a,b){D(a,function(a){R(a);null!=this.gi[b]&&this.gi[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Ik(a.a(),c[b].a());this.Ei[b]=k.yF;this.re[b]=k.NL}else this.Ei[b]={"z-index":0},this.re[b]={opacity:0}}.bind(a));Es(a);Kk(Fs(a,b),a.Cv.bind(a),a.Dv.bind(a),a.Bv.bind(a))}
f.Cv=function(){this.KA();this.Qu=!0;this.dispatchEvent({type:"z",Nw:this.gi})};var zs=B();f=vs.prototype;f.Dv=function(){this.dispatchEvent({type:"B",Nw:this.gi})};
f.Bv=function(){var a=this.pb[this.Vc].i;C(a,function(a,c){null!=this.jj[c]&&D(this.jj[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.re[c]&&pk(a.a(),this.re[c])}.bind(this));this.pb[this.Vc]!==this.od&&this.pb[this.Vc].iw(this.qu());Gs(this);this.Qu=!1;Bs(this,this.Vc);Cs(this,this.Vc);Hs(this);this.dispatchEvent({type:"A",frames:a});ys(this);this.k()};function Cs(a,b){a.pb[b].a().style.opacity=1;a.pb[b].k()}
function Bs(a,b){a.pb[b].a().style.visibility="visible";a.pb[b].k()}f.KA=function(){C(this.pb,function(a){a.a().style.visibility="hidden";a.k()}.bind(this))};function Gs(a){C(a.gi,function(a){R(a);delete a})}function xs(a){C(a.i,function(a){F(a.a(),"dblclick",function(){})})}f.MJ=function(a){this.wP.push(a)};f.k=function(){vs.d.k.call(this);this.pb[this.Vc].k()};
function Hs(a){null!=a.Ei&&(C(a.Ei,function(a){sb(a)}),sb(a.re),delete a.re);null!=a.re&&(C(a.re,function(a){sb(a)}),sb(a.re),delete a.re)}f.f=function(){vs.d.f.call(this);Hs(this);delete this.gi;sb(this.jj);delete this.jj;delete this.od;this.Cn(this.pb);delete this.pb;sb(this.$k);delete this.$k;delete this.Vc;delete this.Kr};v("xiv.ui.layouts.LayoutHandler.EventType",{OM:"z",NM:"A",PM:"B",Gs:"C"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",vs.ID_PREFIX);
v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",vs.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",zs);v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",vs.prototype.UI);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",vs.prototype.tF);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",vs.prototype.Sz);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",vs.prototype.Tz);
v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",vs.prototype.pp);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",vs.prototype.qu);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsElements",vs.prototype.$O);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",vs.prototype.gH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",vs.prototype.fH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",vs.prototype.hA);
v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",vs.prototype.mC);v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",vs.prototype.ly);v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",vs.prototype.bi);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",vs.prototype.TC);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",vs.prototype.KA);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",vs.prototype.MJ);
v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",vs.prototype.k);v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",vs.prototype.f);function Is(a,b){this.x=a;this.y=b}w(Is,qh);f=Is.prototype;f.clone=function(){return new Is(this.x,this.y)};f.$f=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=qh.prototype.scale;f.zb=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.$f())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.zc=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.Jl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function Js(){Eq.call(this);this.jg("Display All");this.Cl=Q("div",{id:"CheckboxHodler_"+B()});N(this.Cl,Js.CSS.xD);this.Xj=new Cq(!0);this.Xj.yb(this.Cl);this.lj(this.Xj);F(this.Xj,"change",this.jc.bind(this))}w(Js,Eq);v("xiv.ui.ctrl.CheckboxController",Js);Js.ID_PREFIX="xiv.ui.ctrl.CheckboxController";Js.CSS_SUFFIX={xD:"checkboxholder"};Js.prototype.ne=function(a){this.u.ne(a);this.jc()};Js.prototype.jc=function(){this.dispatchEvent({type:"p",checked:this.Xj.Sg()})};Js.prototype.xG=function(){return this.Cl};
Js.prototype.f=function(){Js.d.f.call(this);R(this.Cl);delete this.Cl;I(this.Xj);this.Xj.g();delete this.Xj};v("xiv.ui.ctrl.CheckboxController.ID_PREFIX",Js.ID_PREFIX);v("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",Js.CSS_SUFFIX);v("xiv.ui.ctrl.CheckboxController.prototype.setChecked",Js.prototype.ne);v("xiv.ui.ctrl.CheckboxController.prototype.getCheckboxHolder",Js.prototype.xG);v("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",Js.prototype.jc);
v("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",Js.prototype.f);function Ks(){V.call(this);this.Xa=Q("img",{id:"nrg.ui.Thumbnail_"+B()});Xh(this.a(),this.Xa);this.Se=Q("div",{id:"DisplayText_"+B()});Xh(this.a(),this.Se);this.ds();this.a().className=Ks.Bc;this.Xa.className=Ks.CSS.ki;this.Se.className=Ks.CSS.al;Ls(this,!0);this.xo()}w(Ks,V);v("nrg.ui.Thumbnail",Ks);Ks.ID_PREFIX="nrg.ui.Thumbnail";
Ks.CSS_SUFFIX={ki:"image",al:"text",AN:"selected",Es:"mouseover",qx:"image-mouseover",Bx:"text-mouseover",ox:"highlight",vj:"active",px:"image-active",Ax:"text-active",KD:"hoverclone"};f=Ks.prototype;f.Xy=null;f.mc=null;f.Xq=!1;f.VG=function(){return this.Xa};f.cC=function(a,b){this.Xy=a;this.Xa.onerror=function(){this.Xa.onerror="";this.Xa.src=this.Xy;null!=b&&b()}.bind(this)};f.KH=function(){return this.Se};f.uu=function(){for(var a=this.Se;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
f.Je=function(){return this.mc=this.mc?this.mc:this.a()};f.Rg=function(){return this.Xq};f.hw=function(a){this.Xa.src=a;this.Xa.className=Ks.CSS.ki};f.To=function(a){this.Se.innerHTML=a};f.SB=function(){this.mc&&(this.mc.parentNode&&(this.mc=this.mc.parentNode.removeChild(this.mc)),delete this.mc,this.mc=null)};
f.zn=function(a,b){this.SB();Ls(this,!1);this.mc=b?b:this.a().cloneNode(!0);this.mc.setAttribute("id","HOVERABLE_"+this.a().getAttribute("id"));this.mc.style.visibility="hidden";N(this.mc,Ks.CSS.KD);Ls(this,!0);a&&a.appendChild(this.mc);this.ds()};f.setActive=function(a,b){var c=this.a();(this.Xq=a)?(b&&N(c,Ks.CSS.ox),N(c,Ks.CSS.vj),N(this.Se,Ks.CSS.Ax),N(this.Xa,Ks.CSS.px)):(Ah(c,Ks.CSS.ox),Ah(c,Ks.CSS.vj),Ah(this.Se,Ks.CSS.Ax),Ah(this.Xa,Ks.CSS.px))};f.k=function(a){a&&this.a()&&pk(this.a(),a)};
f.aw=function(){var a=this.a(),b=this.Je();if(b!==a){var c=fi(a,b),c=Ji(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;pk(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.Br=function(){var a=this.Je();N(a,Ks.CSS.Es);N(a.childNodes[1],Ks.CSS.Bx);N(a.childNodes[0],Ks.CSS.qx);a!==this.a()&&this.aw()};
f.xo=function(){var a=this.Je();a&&1<a.childNodes.length&&(Ah(a,Ks.CSS.Es),Ah(a.childNodes[1],Ks.CSS.Bx),Ah(a.childNodes[0],Ks.CSS.qx),a.style.visibility=a!==this.a()?"hidden":"visible")};function Ls(a,b){var c=a.Je();b?(F(c,"mouseenter",a.Br.bind(a)),F(c,"mouseleave",a.xo.bind(a))):(Tc(c,"mouseenter",a.Br.bind(a)),Tc(c,"mouseleave",a.xo.bind(a)))}f.ds=function(){Vc(this.Je(),"D")&&Uc("D");F(this.Je(),"click",function(){this.dispatchEvent({type:"D"})}.bind(this))};
f.f=function(){Ks.d.f.call(this);I(this);I(this.a());null!=this.mc&&(I(this.mc),R(this.mc),delete this.mc);R(this.Xa);delete this.Xa;R(this.Se);delete this.Se;delete this.MO;delete this.Xq};v("nrg.ui.Thumbnail.EventType",{jM:"D"});v("nrg.ui.Thumbnail.ID_PREFIX",Ks.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",Ks.CSS_SUFFIX);v("nrg.ui.Thumbnail.HOVERABLE_PREFIX","HOVERABLE_");v("nrg.ui.Thumbnail.prototype.getImage",Ks.prototype.VG);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",Ks.prototype.cC);
v("nrg.ui.Thumbnail.prototype.getTextElement",Ks.prototype.KH);v("nrg.ui.Thumbnail.prototype.getText",Ks.prototype.uu);v("nrg.ui.Thumbnail.prototype.getHoverable",Ks.prototype.Je);v("nrg.ui.Thumbnail.prototype.isActive",Ks.prototype.Rg);v("nrg.ui.Thumbnail.prototype.setImage",Ks.prototype.hw);v("nrg.ui.Thumbnail.prototype.setText",Ks.prototype.To);v("nrg.ui.Thumbnail.prototype.removeHoverable",Ks.prototype.SB);v("nrg.ui.Thumbnail.prototype.createHoverable",Ks.prototype.zn);
v("nrg.ui.Thumbnail.prototype.setActive",Ks.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",Ks.prototype.k);v("nrg.ui.Thumbnail.prototype.repositionHoverable",Ks.prototype.aw);v("nrg.ui.Thumbnail.prototype.onMouseEnter",Ks.prototype.Br);v("nrg.ui.Thumbnail.prototype.onMouseLeave",Ks.prototype.xo);v("nrg.ui.Thumbnail.prototype.disposeInternal",Ks.prototype.f);function Ms(){V.call(this)}w(Ms,V);v("nrg.ui.ScrollableContainer",Ms);Ms.ID_PREFIX="nrg.ui.ScrollableContainer";Ms.CSS_SUFFIX={uE:"scrollarea",la:"slider",mi:"slider-thumb",ni:"slider-track",Hs:"slider-thumb-hovered",GN:"slider-track-hovered"};f=Ms.prototype;
f.n=function(a){Ms.d.n.call(this,a);null==this.hg&&(this.hg=Q("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":Ms.CSS.uE}),this.a().appendChild(this.hg));this.ib=new Nr("vertical");this.ib.n(this.a());F(this.ib,"v",this.Zc.bind(this));this.ib.pn(this.a());N(this.ib.a(),Ms.CSS.la);N(this.ib.Lc,Ms.CSS.mi);N(this.ib.se,Ms.CSS.ni);this.ib.Py(Ms.CSS.Hs);this.k();this.Zc()};f.bf=function(a){this.fa||this.n();Xh(this.hg,a);this.Zc()};f.a=function(){return this.o};f.GH=function(){return this.ib};
f.CH=function(){return this.hg};f.k=function(a){a&&pk(this.o,a)};f.Zc=function(){var a=T(this.o).height,b=T(this.hg).height,c=[this.ib.na(),this.ib.ga()],d=[0,b-a],e=this.ib.Lc;a<b?(this.ib.a().style.opacity=1,a=Math.round(a/b*a),e.style.height=a.toString()+"px",this.ib.pc(!0),e=this.ib.ga()-this.ib.J(),c=hk(e,c,d).remappedVal,this.hg.style.top=(-c).toString()+"px"):(this.ib.a().style.opacity=0,this.ib.pc(!1),this.ib.H(100))};
f.f=function(){Ms.d.f.call(this);null!=this.ib&&(I(this.ib),this.ib.g(),delete this.ib);null!=this.hg&&(R(this.hg),delete this.hg)};v("nrg.ui.ScrollableContainer.ID_PREFIX",Ms.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",Ms.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",Ms.prototype.n);v("nrg.ui.ScrollableContainer.prototype.addContents",Ms.prototype.bf);v("nrg.ui.ScrollableContainer.prototype.getElement",Ms.prototype.a);
v("nrg.ui.ScrollableContainer.prototype.getSlider",Ms.prototype.GH);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",Ms.prototype.CH);v("nrg.ui.ScrollableContainer.prototype.updateStyle",Ms.prototype.k);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",Ms.prototype.Zc);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",Ms.prototype.f);function Ns(){V.call(this)}w(Ns,Ms);v("nrg.ui.ScrollableZippyTree",Ns);Ns.ID_PREFIX="nrg.ui.ScrollableZippyTree";Ns.CSS_SUFFIX={QE:"zippytree"};f=Ns.prototype;f.n=function(a){Ns.d.n.call(this,a);this.ma=new lq;N(this.ma.a(),Ns.CSS.QE);this.hg.appendChild(this.ma.a());this.Wo();this.ib.CC(!0,.3)};f.bf=function(a,b){this.ma.bf(a,b);g(a);this.ib.pn(this.ma.a())};f.Ll=function(){this.ma.Ll()};f.un=function(){this.ma.un()};f.Xb=function(a,b){this.ma.Xb(a,b)};f.dI=function(){return this.ma};
f.mF=function(a){this.ma.xn(a);this.Zc()};f.Wo=function(){F(this.ma,"n",this.Zc.bind(this));F(this.ma,"a",this.Zc.bind(this));F(this.ma,"b",this.Zc.bind(this));F(this.ma,ul.gE,this.Zc.bind(this))};f.k=function(a){a&&pk(this.a(),a)};f.f=function(){Ns.d.f.call(this);null!=this.ma&&(I(this.ma),this.ma.g(),delete this.ma)};v("nrg.ui.ScrollableZippyTree.EventType",{});v("nrg.ui.ScrollableZippyTree.ID_PREFIX",Ns.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",Ns.CSS_SUFFIX);
v("nrg.ui.ScrollableZippyTree.prototype.render",Ns.prototype.n);v("nrg.ui.ScrollableZippyTree.prototype.addContents",Ns.prototype.bf);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",Ns.prototype.Ll);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",Ns.prototype.un);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",Ns.prototype.Xb);v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",Ns.prototype.dI);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",Ns.prototype.mF);
v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",Ns.prototype.Wo);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",Ns.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",Ns.prototype.f);function Os(){ad.call(this);this.s="shaders";this.Sp="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Sp=a+="}\n";this.Hp="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Hp=a+="}\n"}
w(Os,ad);
var Ps={jO:"vertexPosition",iO:"vertexNormal",hO:"vertexColor",lO:"vertexTexturePos",kO:"vertexScalar"},Qs={nO:"view",hN:"perspective",gM:"center",eN:"objectTransform",dO:"useObjectColor",cN:"objectColor",fO:"useScalars",xN:"scalarsReplaceMode",uN:"scalarsMin",rN:"scalarsMax",vN:"scalarsMinColor",sN:"scalarsMaxColor",wN:"scalarsMinThreshold",tN:"scalarsMaxThreshold",qN:"scalarsInterpolation",iN:"pointSize",dN:"objectOpacity",bN:"normal",eO:"usePicking",gO:"useTexture",cO:"useLabelMapTexture",MM:"labelmapOpacity",
LM:"labelmapColor",QN:"textureSampler",RN:"textureSampler2",rO:"volumeLowerThreshold",yO:"volumeUpperThreshold",vO:"volumeScalarMin",tO:"volumeScalarMax",wO:"volumeScalarMinColor",uO:"volumeScalarMaxColor",AO:"volumeWindowLow",zO:"volumeWindowHigh",xO:"volumeTexture"};
function Rs(a){var b=Object.keys(Qs);if(!Object.keys(Ps).every(function(a){a=Ps[a];return-1!=this.Sp.search(a)||-1!=this.Hp.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Qs[a];return-1!=this.Sp.search(a)||-1!=this.Hp.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Ss(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");ad.call(this);this.s="buffer";this.sb=a;this.ri=b;this.si=c}w(Ss,ad);function Ts(a,b){this.Kt=a instanceof qh?a:new qh(a,b)}w(Ts,Ro);Ts.prototype.le=function(a,b,c,d){xo(Di(a),0,a,b,this.Kt,c,null,d)};function Us(a,b){this.MK=4;this.Vv=b||void 0;um.call(this,a)}w(Us,um);Us.prototype.mw=function(a){this.Vv=a||void 0;this.sa()&&this.le()};Us.prototype.le=function(){if(this.Vv){var a=!this.sa()&&"move_offscreen"!=this.Bm,b=this.a();a&&(b.style.visibility="hidden",Ti(b,!0));this.Vv.le(b,this.MK,this.mP);a&&Ti(b,!1)}};function Vs(a,b,c){this.lb=c||(a?Gh(Jh(a)):Gh());Us.call(this,this.lb.w("div",{style:"position:absolute;display:none;"}));this.Qt=new qh(1,1);this.hk=new jg;a&&this.zl(a);null!=b&&this.To(b)}w(Vs,Us);var Ws=[];f=Vs.prototype;f.Yd=null;f.className="goog-tooltip";f.JC=500;f.tI=0;f.N=function(){return this.lb};f.zl=function(a){a=Jh(a);this.hk.add(a);F(a,"mouseover",this.sk,!1,this);F(a,"mouseout",this.Mq,!1,this);F(a,"mousemove",this.AA,!1,this);F(a,"focus",this.qk,!1,this);F(a,"blur",this.Mq,!1,this)};
f.detach=function(a){if(a)a=Jh(a),Xs(this,a),this.hk.remove(a);else{for(var b=this.hk.nk(),c=0;a=b[c];c++)Xs(this,a);this.hk.clear()}};function Xs(a,b){Tc(b,"mouseover",a.sk,!1,a);Tc(b,"mouseout",a.Mq,!1,a);Tc(b,"mousemove",a.AA,!1,a);Tc(b,"focus",a.qk,!1,a);Tc(b,"blur",a.Mq,!1,a)}f.To=function(a){gi(this.a(),a)};f.fw=function(a){var b=this.a();b&&R(b);Vs.d.fw.call(this,a);a&&(b=this.lb.qa.body,b.insertBefore(a,b.lastChild))};f.uu=function(){return mi(this.a())};
f.Ul=function(){return this.pj?this.sa()?4:1:this.Tn?3:this.sa()?2:0};f.rv=function(){if(!um.prototype.rv.call(this))return!1;if(this.anchor)for(var a,b=0;a=Ws[b];b++)ei(a.a(),this.anchor)||a.aa(!1);Jb(Ws,this);a=this.a();a.className=this.className;Ys(this);F(a,"mouseover",this.HA,!1,this);F(a,"mouseout",this.GA,!1,this);Zs(this);return!0};
f.zv=function(){Kb(Ws,this);for(var a=this.a(),b,c=0;b=Ws[c];c++)b.anchor&&ei(a,b.anchor)&&b.aa(!1);this.HB&&$s(this.HB);Tc(a,"mouseover",this.HA,!1,this);Tc(a,"mouseout",this.GA,!1,this);this.anchor=void 0;0==this.Ul()&&(this.Wr=!1);um.prototype.zv.call(this)};f.lB=function(a,b){this.anchor==a&&this.hk.contains(this.anchor)&&(this.Wr||!this.BP?(this.aa(!1),this.sa()||(this.anchor=a,this.mw(b||at(this,0)),this.aa(!0))):this.anchor=void 0);this.pj=void 0};
f.eJ=function(a){this.Tn=void 0;a==this.anchor&&(null!=this.Yd&&(this.Yd==this.a()||this.hk.contains(this.Yd))||this.az&&this.az.Yd||this.aa(!1))};function bt(a,b){var c=ui(a.lb);a.Qt.x=b.clientX+c.x;a.Qt.y=b.clientY+c.y}f.sk=function(a){var b=ct(this,a.target);this.Yd=b;Ys(this);b!=this.anchor&&(this.anchor=b,this.pj||(this.pj=Xf(ta(this.lB,this,b,void 0),this.JC)),dt(this),bt(this,a))};function ct(a,b){try{for(;b&&!a.hk.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.AA=function(a){bt(this,a);this.Wr=!0};f.qk=function(a){this.Yd=a=ct(this,a.target);this.Wr=!0;if(this.anchor!=a){this.anchor=a;var b=at(this,1);Ys(this);this.pj||(this.pj=Xf(ta(this.lB,this,a,b),this.JC));dt(this)}};function at(a,b){if(0==b){var c=a.Qt.clone();return new et(c)}return new ft(a.Yd)}function dt(a){if(a.anchor)for(var b,c=0;b=Ws[c];c++)ei(b.a(),a.anchor)&&(b.az=a,a.HB=b)}
f.Mq=function(a){var b=ct(this,a.target),c=ct(this,a.relatedTarget);b!=c&&(b==this.Yd&&(this.Yd=null),Zs(this),this.Wr=!1,!this.sa()||a.relatedTarget&&ei(this.a(),a.relatedTarget)?this.anchor=void 0:$s(this))};f.HA=function(){var a=this.a();this.Yd!=a&&(Ys(this),this.Yd=a)};f.GA=function(a){var b=this.a();this.Yd!=b||a.relatedTarget&&ei(b,a.relatedTarget)||(this.Yd=null,$s(this))};function Zs(a){a.pj&&(ba.clearTimeout(a.pj),a.pj=void 0)}
function $s(a){2==a.Ul()&&(a.Tn=Xf(ta(a.eJ,a,a.anchor),a.tI))}function Ys(a){a.Tn&&(ba.clearTimeout(a.Tn),a.Tn=void 0)}f.f=function(){this.aa(!1);Zs(this);this.detach();this.a()&&R(this.a());this.Yd=null;delete this.lb;Vs.d.f.call(this)};function et(a,b){Ts.call(this,a,b)}w(et,Ts);et.prototype.le=function(a,b,c){b=Di(a);b=Gi(b);c=c?new sh(c.top+10,c.right,c.bottom,c.left+10):new sh(10,0,0,10);zo(this.Kt,a,4,c,b,9)&496&&zo(this.Kt,a,4,c,b,5)};function ft(a){So.call(this,a,3)}w(ft,So);
ft.prototype.le=function(a,b,c){var d=new qh(10,0);xo(this.element,this.wn,a,b,d,c,9)&496&&xo(this.element,2,a,1,d,c,5)};function gt(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!u(b)||!u(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof fr))throw Error("Invalid interactor.");Vs.call(this);this.s="caption";this.af=a;this.Wp=b;this.Xp=c;this.Ea=d;this.xh=null;this.Jj=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Jj=[a];Sc(d,je,this.ho.bind(this));this.Gu()}
w(gt,Vs);gt.prototype.Gu=function(){var a=xi(this.af,"position");if("static"==a||""==a)this.af.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Jj[0]));a.appendChild(b);b.appendChild(c);this.xh=b;this.mw(new Ts(this.Wp,this.Xp));this.aa(!0);this.zl(this.af);this.a().classList.add("x-tooltip")};gt.prototype.ho=function(){this.aa(!1);this.xh&&R(this.xh);this.a()&&R(this.a());this.xh=null};function ht(){Cr.call(this);this.s="renderer3D";this.Tm=this.Wm=this.Sm=this.Vm=this.Rm=this.Um=this.ft=this.gt=null;this.Sa=[0,0,0];this.Lm=[0,0,0];this.Zx=null;this.Rs=new hd;this.gn=new hd;this.Rj=new hd;this.Xm=new hd;this.hl=new hd;this.ql=new hd;this.Pj=new hd;this.vl=new hd;this.rb={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(ht,Cr);ht.prototype.__defineGetter__("config",function(){return this.rb});f=ht.prototype;
f.WK=function(){this.Tm=this.Wm=this.Sm=this.Vm=this.Rm=this.Um=null;this.Sa=[0,0,0]};f.Av=function(a){ht.d.Av.call(this,a);var b=a.Wp;a=a.Xp;var c=this.Sv(b,a);if(c=this.get(c))if(c=c.gl){var d=Ki(this.va),b=new gt(this.va,d.x+b+10,d.y+a+10,this.Ea);a=sm(c,null);if(b=b.a())b.innerHTML=rm(a)}};
f.ra=function(){ht.d.ra.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Va,this.Ha),this.b.clearColor(this.Lm[0],this.Lm[1],this.Lm[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.rb.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Va,this.Ha,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Va,this.Ha);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.Zx=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new Os;it(this,a)};
function it(a,b){if(null==a.sc||null==a.b||null==a.ha)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Os))throw Error("Could not add shaders.");Rs(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.Hp);a.b.shaderSource(d,b.Sp);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.ft=e;Object.keys(Ps).forEach(function(a){a=Ps[a];this.Rs.set(a,this.b.getAttribLocation(this.ft,a));this.b.enableVertexAttribArray(this.Rs.get(a))}.bind(a));
Object.keys(Qs).forEach(function(a){a=Qs[a];this.gn.set(a,this.b.getUniformLocation(this.ft,a))}.bind(a));a.gt=b}
f.jh=function(a){ht.d.jh.call(this,a);var b=!1;if(null!=a){this.get(a.fd)&&(b=!0);var c=a.fd,d=a.C,e=a.ca,h=a.Ec,k=a.Ua,l=a.ea,n=a.ec,p=a.zd,m=a.q,q=a.Za;if(null!=m&&null!=m.ea&&m.ea.G)this.jh(m);else if(null!=m&&m.G&&this.jh(m),null!=p&&null!=p.ea&&p.ea.G)this.Jb.load(p,a);else if(null!=k&&null!=k.ea&&k.ea.G)this.Jb.load(k,a);else{if(null!=l&&g(l))if(null!=a.nh){if(a.nh.no!=l.length||!a.G)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Jb.load(l[b],a);return}else{if(null!=l&&l.G){this.Jb.load(a,
a);return}if(null!=q&&null!=q.ea&&q.ea.G){this.Jb.load(q,a);return}}if(0<a.j.length)for(l=a.j,p=l.length,m=m=0;m<p;m++)this.jh(l[m]);if(d){for(l=0;this.Mp;)l++,window.console.log("Possible thread lock avoided: "+l);this.Mp=!0;p=a instanceof Je&&a.yh instanceof Oe;b&&null!=k&&k.G&&(l=this.Pj.get(c),null!=l&&this.b.isBuffer(l.sb)&&this.b.deleteBuffer(l.sb));l=null;if(null!=k)if(!b||k.G){l=a.ul;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
m=!1;k.zi&&(m=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,m);m=this.b.createTexture();m.zI=k.Ff;this.vl.set(k.fd,m);this.b.bindTexture(this.b.TEXTURE_2D,m);k.zi?(m=this.b.RGBA,k.Px&&(m=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,m,k.et,k.dt,0,m,this.b.UNSIGNED_BYTE,k.zi)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,m.zI);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);p?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);m=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
m);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new Ss(m,l.length,2);this.Pj.set(c,l);k.G=!1}else l=this.Pj.get(c);Of(this.Jb,.1);if(p)this.Mp=!1,A.ud(this.s+".update"),Of(this.Jb,.9);else{if(!b||d.G||n.G){p=n.ub;k=A.t.Nb(p,d.Jf,d.Kf,d.Lf);p=A.t.Nb(p,d.Gf,d.Hf,d.If);if(null===this.Um||k.x<this.Um)this.Um=k.x;if(null===this.Rm||p.x>this.Rm)this.Rm=p.x;if(null===this.Vm||k.y<this.Vm)this.Vm=k.y;if(null===this.Sm||p.y>this.Sm)this.Sm=p.y;if(null===this.Wm||k.z<this.Wm)this.Wm=
k.z;if(null===this.Tm||p.z>this.Tm)this.Tm=p.z;this.Sa=[(this.Um+this.Rm)/2,(this.Vm+this.Sm)/2,(this.Wm+this.Tm)/2];n.G=!1}b&&d.G&&(n=this.Rj.get(c),null!=n&&this.b.isBuffer(n.sb)&&this.b.deleteBuffer(n.sb));n=null;!b||d.G?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.Ub,this.b.STATIC_DRAW),n=new Ss(n,d.count,3),d.G=!1):n=this.Rj.get(c);Of(this.Jb,.3);b&&e.G&&(k=this.Rj.get(c),null!=k&&this.b.isBuffer(k.sb)&&this.b.deleteBuffer(k.sb));
k=null;!b||e.G?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.Ub,this.b.STATIC_DRAW),k=new Ss(k,e.count,3),e.G=!1):k=this.Xm.get(c);Of(this.Jb,.3);b&&h&&h.G&&(e=this.hl.get(c),null!=e&&this.b.isBuffer(e.sb)&&this.b.deleteBuffer(e.sb));e=null;if(h)if(!b||h.G){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.Ub,this.b.STATIC_DRAW);e=new Ss(e,h.count,3);h.G=!1}else e=this.hl.get(c);Of(this.Jb,.2);b&&q&&q.G&&(h=this.ql.get(c),null!=h&&this.b.isBuffer(h.sb)&&this.b.deleteBuffer(h.sb));h=null;if(q)if(h=q.Nm,!b||q.G){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new Ss(d,h.length,3);q.G=!1}else h=this.ql.get(c);Of(this.Jb,.1);b||this.Cg.add(a);this.Rj.set(c,
n);this.Xm.set(c,k);this.hl.set(c,e);this.Pj.set(c,l);this.ql.set(c,h);this.Mp=a.G=!1}}else a.G=!1}}};f.Sv=function(a,b){if(this.rb.PICKING_ENABLED){this.Yg(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.Ha-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.Yg=function(a,b){ht.d.Yg.call(this,a,b);this.b.viewport(0,0,this.Va,this.Ha);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.Cg.Ya,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Zx):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.ha.ct,h=this.ha.O;this.b.uniformMatrix4fv(this.gn.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.gn.get("view"),!1,h);e=this.Sa;this.b.uniform3f(this.gn.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.gd.length;for(e=0;e<h;++e){var k=this.gd[e];if(k instanceof J){var l=A.t.Nb(this.ha.O,k.ua[0]+k.e[0].D[0],k.ua[1]+k.e[0].D[1],k.ua[2]+k.e[0].D[2]),n=A.t.Nb(this.ha.O,k.ua[0]-k.e[0].D[0],k.ua[1]-k.e[0].D[1],k.ua[2]-k.e[0].D[2]),p=Math.abs(l.z-n.z),l=A.t.Nb(this.ha.O,k.ua[0]+k.e[1].D[0],k.ua[1]+k.e[1].D[1],k.ua[2]+k.e[1].D[2]),n=A.t.Nb(this.ha.O,k.ua[0]-k.e[1].D[0],k.ua[1]-k.e[1].D[1],k.ua[2]+-k.e[1].D[2]),m=Math.abs(l.z-n.z),l=A.t.Nb(this.ha.O,k.ua[0]+k.e[2].D[0],k.ua[1]+k.e[2].D[1],k.ua[2]+
k.e[2].D[2]),n=A.t.Nb(this.ha.O,k.ua[0]-k.e[2].D[0],k.ua[1]-k.e[2].D[1],k.ua[2]-k.e[2].D[2]),l=Math.max(p,m,Math.abs(l.z-n.z));l==p?Ne(k,0):l==m?Ne(k,1):Ne(k,2)}}if(this.rb.ORDERING_ENABLED){p=!1;h=this.gd;k=h.length-1;do if(e=h[k],e instanceof J&&e.De&&-1!=e.Bb){var p=e.j[e.Bb].j,m=e.Bb,l=A.t.Nb(this.ha.O,e.ua[0]+e.e[m].Na[0],e.ua[1]+e.e[m].Na[1],e.ua[2]+e.e[m].Na[2]),n=A.t.Nb(this.ha.O,e.ua[0]-e.e[m].Na[0],e.ua[1]-e.e[m].Na[1],e.ua[2]-e.e[m].Na[2]),l=l.z-n.z,n=Math.max(e.el[e.Bb],Math.max(e.el[e.Bb+
4],e.el[e.Bb+8])),q=Math.min(e.el[e.Bb],Math.min(e.el[e.Bb+4],e.el[e.Bb+8]));if(0>l*(n+q))for(l=l=0;l<e.an[m]-1;l++)p[l]&&(p[l].Qc=e.Qc,p[l].ed=e.e[m].sl*l);else for(l=e.an[m]-1;0<=l;l--)p[l]&&(p[l].Qc=e.Qc,p[l].ed=(e.an[m]-1)*e.e[m].sl-e.e[m].sl*l);p=!0}while(k--);h=this.Cg.Ya;k=h.length-1;do e=h[k],!e.jb||1==e.Qc||e instanceof Je||(p=e,m=e.C.Ep,e=A.t.Nb(e.ec.ub,m[0],m[1],m[2]),e=A.t.Nb(this.ha.O,e.x,e.y,e.z),e=A.P.$t(this.ha.Lj,e),e=Math.round(1E3*e)/1E3,p.ed=e,p=!0);while(k--);p&&this.Cg.sort()}if(h=
!a&&null!=b&&b&&this.rb.STATISTICS_ENABLED)var t=0,s=0,z=0,y=0;var e=this.Rs,k=e.get("vertexPosition"),p=e.get("vertexNormal"),m=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.gn,q=e.get("usePicking"),H=e.get("useObjectColor"),P=e.get("objectColor"),O=e.get("useScalars"),G=e.get("scalarsReplaceMode"),S=e.get("scalarsMin"),Y=e.get("scalarsMax"),U=e.get("scalarsMinColor"),va=e.get("scalarsMaxColor"),na=e.get("scalarsInterpolation"),ya=e.get("scalarsMinThreshold"),Ma=
e.get("scalarsMaxThreshold"),Ha=e.get("objectOpacity"),Na=e.get("labelmapOpacity"),la=e.get("labelmapColor"),za=e.get("useTexture"),qa=e.get("useLabelMapTexture"),Dc=e.get("textureSampler"),ue=e.get("textureSampler2"),ve=e.get("volumeLowerThreshold"),we=e.get("volumeUpperThreshold"),Yd=e.get("volumeScalarMin"),Qh=e.get("volumeScalarMax"),Nv=e.get("volumeWindowLow"),Ov=e.get("volumeWindowHigh"),Pv=e.get("volumeScalarMinColor"),Qv=e.get("volumeScalarMaxColor"),ls=e.get("volumeTexture"),Rv=e.get("objectTransform"),
Sv=e.get("pointSize"),e=d;do{var Oa=c[d-e];if(Oa){var lb=null;Oa instanceof Je&&Oa.yh&&(lb=Oa.yh);if(Oa.jb&&(!lb||lb.jb)&&(!a||Oa.Ym)){var Ac=Oa.fd,Pd=Oa.Qm,jd=this.Rj.get(Ac),ne=this.Xm.get(Ac),an=this.hl.get(Ac),mf=this.ql.get(Ac),bn=this.Pj.get(Ac);this.b.bindBuffer(this.b.ARRAY_BUFFER,jd.sb);this.b.vertexAttribPointer(k,jd.si,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,ne.sb);this.b.vertexAttribPointer(p,ne.si,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(q,!0):this.b.uniform1i(q,!1);
!an||a||Pd?(ne=1,Pd&&!a&&(ne=0),this.b.uniform1i(H,ne),ne=Oa.Ga,a&&(ne=[Math.floor(Ac%65025%255)/255,Math.floor(Ac%65025/255)/255,Math.floor(Ac/65025)/255]),this.b.uniform3f(P,parseFloat(ne[0]),parseFloat(ne[1]),parseFloat(ne[2])),this.b.vertexAttribPointer(m,jd.si,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(H,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,an.sb),this.b.vertexAttribPointer(m,an.si,this.b.FLOAT,!1,0,0));!mf||a||Pd?(this.b.uniform1i(O,!1),this.b.vertexAttribPointer(n,jd.si,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(O,!0),this.b.uniform1i(G,Oa.Za.by),Ac=Oa.Za.vi,Pd=Oa.Za.ti,this.b.uniform3f(U,parseFloat(Ac[0]),parseFloat(Ac[1]),parseFloat(Ac[2])),this.b.uniform3f(va,parseFloat(Pd[0]),parseFloat(Pd[1]),parseFloat(Pd[2])),this.b.uniform1f(ya,parseFloat(Oa.Za.tb)),this.b.uniform1f(Ma,parseFloat(Oa.Za.vb)),this.b.uniform1f(S,parseFloat(Oa.Za.Vd)),this.b.uniform1f(Y,parseFloat(Oa.Za.Tb)),this.b.uniform1i(na,parseInt(Oa.Za.Ts,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,mf.sb),this.b.vertexAttribPointer(n,
mf.si,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ha,parseFloat(Oa.Qc));Oa.Ua&&bn&&!a?(this.b.uniform1i(za,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.vl.get(Oa.Ua.fd)),this.b.uniform1i(Dc,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,bn.sb),this.b.vertexAttribPointer(l,bn.si,this.b.FLOAT,!1,0,0),this.b.uniform1i(ls,!1)):(this.b.uniform1i(za,!1),this.b.vertexAttribPointer(l,jd.si,this.b.FLOAT,!1,0,0));lb&&(this.b.uniform1i(ls,!0),this.b.uniform1f(ve,lb.tb),this.b.uniform1f(we,
lb.vb),this.b.uniform1f(Yd,lb.Vd),this.b.uniform1f(Qh,lb.Tb),Ac=lb.vi,Pd=lb.ti,this.b.uniform3f(Pv,parseFloat(Ac[0]),parseFloat(Ac[1]),parseFloat(Ac[2])),this.b.uniform3f(Qv,parseFloat(Pd[0]),parseFloat(Pd[1]),parseFloat(Pd[2])),this.b.uniform1f(Nv,lb.Lb),this.b.uniform1f(Ov,lb.Kb),mf=lb.q,this.b.uniform1i(qa,!1),lb.De?this.b.uniform1f(Ha,parseFloat(lb.Qc)):mf&&mf.jb&&(lb=Oa.q.fd,this.b.uniform1i(qa,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.vl.get(lb)),this.b.uniform1i(ue,
1),this.b.uniform1f(Na,mf.Qc),this.b.uniform4fv(la,mf.it)));this.b.uniformMatrix4fv(Rv,!1,Oa.ec.ub);lb=1;"POINTS"==Oa.Cd&&(lb=Oa.Zm);this.b.uniform1f(Sv,lb);lb=-1;Oa.Cd==Rd?(lb=this.b.TRIANGLES,h&&(s+=jd.ri/3)):"LINES"==Oa.Cd?(this.b.lineWidth(Oa.ol),lb=this.b.LINES,h&&(z+=jd.ri/2)):"POINTS"==Oa.Cd?(lb=this.b.POINTS,h&&(y+=jd.ri)):"TRIANGLE_STRIPS"==Oa.Cd?(lb=this.b.TRIANGLE_STRIP,h&&(s+=jd.ri/3)):"POLYGONS"==Oa.Cd&&(lb=0==jd.ri%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(s+=jd.ri/3));h&&(t+=jd.ri);
this.b.drawArrays(lb,0,jd.ri)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+t+" | "),c+="Triangles: "+Math.round(s)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.vl.Lh(),window.console.log(c))}};
f.remove=function(a){ht.d.remove.call(this,a);if(0<a.j.length)for(var b=a.j,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.fd;c=this.Pj.get(b);null!=c&&this.b.isBuffer(c.sb)&&this.b.deleteBuffer(c.sb);a.Ua&&(c=this.vl.get(a.Ua.fd))&&(this.b.deleteTexture(c),this.vl.remove(a.Ua.fd));c=this.Rj.get(b);null!=c&&this.b.isBuffer(c.sb)&&this.b.deleteBuffer(c.sb);c=this.Xm.get(b);null!=c&&this.b.isBuffer(c.sb)&&this.b.deleteBuffer(c.sb);c=this.hl.get(b);null!=c&&this.b.isBuffer(c.sb)&&this.b.deleteBuffer(c.sb);
c=this.ql.get(b);null!=c&&this.b.isBuffer(c.sb)&&this.b.deleteBuffer(c.sb);this.Rj.remove(b);this.Xm.remove(b);this.hl.remove(b);this.Pj.remove(b);this.ql.remove(b);this.Cg.remove(a);return!0};f.ae=function(){this.gt=null;delete this.gt;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);ht.d.ae.call(this)};ht.prototype.__defineGetter__("bgColor",function(){return this.Lm});ht.prototype.__defineSetter__("bgColor",function(a){this.Lm=a});
ht.prototype.KK=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.Sv(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=ur(this.ha,a/this.Va*2-1,(this.Ha-b)/this.Ha*2-1,0);a=ur(this.ha,a/this.Va*2-1,(this.Ha-b)/this.Ha*2-1,1);h[0]+=this.Sa[0];h[1]+=this.Sa[1];h[2]+=this.Sa[2];a[0]+=this.Sa[0];a[1]+=this.Sa[1];a[2]+=this.Sa[2];b=[e.C.Jf,e.C.Kf,e.C.Lf];var k=[e.C.Gf,e.C.Kf,e.C.Lf],l=[e.C.Gf,e.C.Hf,e.C.Lf],n=[e.C.Jf,e.C.Hf,e.C.Lf],p=[e.C.Jf,e.C.Hf,e.C.If],m=[e.C.Jf,e.C.Kf,
e.C.If],q=[e.C.Gf,e.C.Hf,e.C.If],t=[e.C.Gf,e.C.Kf,e.C.If];b=[A.t.Nb(e.ec.ub,b[0],b[1],b[2]),A.t.Nb(e.ec.ub,k[0],k[1],k[2]),A.t.Nb(e.ec.ub,l[0],l[1],l[2]),A.t.Nb(e.ec.ub,n[0],n[1],n[2]),A.t.Nb(e.ec.ub,p[0],p[1],p[2]),A.t.Nb(e.ec.ub,m[0],m[1],m[2]),A.t.Nb(e.ec.ub,q[0],q[1],q[2]),A.t.Nb(e.ec.ub,t[0],t[1],t[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],k=[Math.min(k[0],s.x),Math.max(k[1],s.x),Math.min(k[2],s.y),Math.max(k[3],s.y),Math.min(k[4],s.z),Math.max(k[5],
s.z)];s=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,t=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(s[l]-h[n]);Infinity!=y&&-Infinity!=y&&(q=h[p]+a[p]*y,y=h[m]+a[m]*y,q>=s[t]&&q<=s[t+1]&&y>=s[z]&&y<=s[z+1]?(t=[],t[n]=s[l],t[p]=q,t[m]=y,b.push(t)):(t=[],t[n]=s[l],t[p]=q,t[m]=y,k.push(t)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(s=0;2>s;s++)b=a[s],k[s]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=s=null;k[0]<k[1]?(s=a[0],b=a[1]):
(s=a[1],b=a[0]);h=Math.sqrt((s[0]-b[0])*(s[0]-b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));h/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k=[s[0]/b,s[1]/b,s[2]/b];l=e.C.Ub;n=l.length;for(s=0;s<h;s+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(p=l[b],m=l[b+1],q=l[b+2],t=new A.P(p,m,q),t=A.t.Nb(e.ec.ub,p,m,q),Math.sqrt((a[0]-t.x)*(a[0]-t.x)+(a[1]-t.y)*(a[1]-t.y)+(a[2]-t.z)*(a[2]-t.z))<=d)return[t.x,t.y,t.z];return null};
v("X.renderer3D",ht);v("X.renderer3D.prototype.init",ht.prototype.ra);v("X.renderer3D.prototype.add",ht.prototype.add);v("X.renderer3D.prototype.onShowtime",ht.prototype.EB);v("X.renderer3D.prototype.onRender",ht.prototype.CB);v("X.renderer3D.prototype.get",ht.prototype.get);v("X.renderer3D.prototype.render",ht.prototype.n);v("X.renderer3D.prototype.destroy",ht.prototype.ae);v("X.renderer3D.prototype.remove",ht.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",ht.prototype.WK);
v("X.renderer3D.prototype.resetViewAndRender",ht.prototype.Do);v("X.renderer3D.prototype.pick",ht.prototype.Sv);v("X.renderer3D.prototype.pick3d",ht.prototype.KK);function jt(){ht.call(this)}w(jt,ht);v("xiv.vis.XtkRenderer3D",jt);f=jt.prototype;f.cg=function(){this.Dk()};f.Ck=function(a){jt.d.Ck.call(this,a);this.dispatchEvent({type:"s",value:a.Qj})};f.n=function(){this.sc&&this.b?(jt.d.n.call(this),this.dispatchEvent({type:"t"})):(this.rb.PROGRESSBAR_ENABLED=!1,this.ra())};f.ae=function(){jt.d.ae.call(this)};f.remove=function(a){null!=a&&jt.d.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",jt.prototype.cg);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",jt.prototype.Ck);v("xiv.vis.XtkRenderer3D.prototype.render",jt.prototype.n);v("xiv.vis.XtkRenderer3D.prototype.remove",jt.prototype.remove);function kt(){Zc.call(this);this.Xk=[]}w(kt,Zc);v("xiv.vis.XtkPlane",kt);var lt=[-300,300,300];f=kt.prototype;f.em=!0;f.cl=null;f.orientation=null;f.Co=null;f.Ba=null;f.Ji=null;f.Pa=function(){return this.Ba};f.Db=function(){return this.orientation};f.Yr=function(a){null!=this.Ba&&(null!=a?(this.dq=a,this.Ba.camera.focus=a.focus,this.Ba.camera.position=a.position,this.Ba.camera.up=a.SL,a instanceof kr&&(this.Ba.camera.view=a.view)):this.Ba.camera.position=lt)};
f.Xr=function(a){this.Ji.style.background=null!=a?r(a)?a:null!=a.Uy?"-webkit-linear-gradient(top, "+a.Uy+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.DG=function(){return this.mq};f.AG=function(){return this.Ji};f.Mk=function(a){this.Ji=a;null!=this.Ba||this.ra(a);this.Ba.container=a};f.Kv=function(a){this.dispatchEvent(a)};
f.ra=function(a){null!=this.Ba&&(I(this.Ba),this.Ba.ae(),this.Ba=null);if(null==this.cl)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Ba=new this.cl;this.Ba.orientation=this.orientation;this.Mk(a||this.Ji||document.body);this.Ba.ra();F(this.Ba,"s",function(a){this.dispatchEvent({type:"s",value:a.value})}.bind(this));F(this.Ba,"E",this.Kv.bind(this))};f.add=function(a){this.em&&(!0==a.isSelectedVolume&&(this.mq=a),this.Xk.push(a),this.Ba.add(a))};f.isEnabled=function(){return this.em};
function mt(a){null!=a.zf&&(R(a.zf),delete a.zf)}function nt(a){a.zf=Q("div",{id:"DisabledOverlay_"+B()});a.zf.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=Q("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.zf.appendChild(c);a.Ji.appendChild(a.zf)}
f.pc=function(a){(this.em=!1!==a)?xk(this.zf,200,function(){this.zf.style.visibility="hidden";mt(this)}.bind(this)):(null!=this.zf||nt(this),this.zf.style.visibility="visible",uk(this.zf,200,function(){}.bind(this)))};f.restore=function(){this.ra();ot(this);null!=this.dq&&this.Yr(this.dq);null!=this.Tc&&this.Xr(this.Tc);this.n()};f.TK=function(){D(this.Xk,function(a){null!=a&&this.Ba.remove(a)}.bind(this))};function ot(a){D(a.Xk,function(a){this.Ba.add(a)}.bind(a))}f.n=function(){this.em&&this.Ba.n()};
f.k=function(){null!=this.Ba&&this.Ba.cg()};f.g=function(){kt.d.g.call(this);null!=this.Ba&&(this.Ba.ae(),delete this.Ba);mt(this);null!=this.Tc&&delete this.Tc;null!=this.dq&&delete this.dq;null!=this.Co&&(null!=this.Co.g&&(this.Co.stop(),this.Co.g()),delete this.Co);delete this.em;delete this.cl;delete this.Ji;delete this.orientation;sb(this.Xk);delete this.mq;delete this.AP};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",lt);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",kt.prototype.cl);v("xiv.vis.XtkPlane.prototype.orientation",kt.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",kt.prototype.Ba);v("xiv.vis.XtkPlane.prototype.container",kt.prototype.Ji);v("xiv.vis.XtkPlane.prototype.getRenderer",kt.prototype.Pa);v("xiv.vis.XtkPlane.prototype.getOrientation",kt.prototype.Db);v("xiv.vis.XtkPlane.prototype.setCamera",kt.prototype.Yr);v("xiv.vis.XtkPlane.prototype.setBackground",kt.prototype.Xr);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",kt.prototype.DG);v("xiv.vis.XtkPlane.prototype.getContainer",kt.prototype.AG);v("xiv.vis.XtkPlane.prototype.setContainer",kt.prototype.Mk);v("xiv.vis.XtkPlane.prototype.init",kt.prototype.ra);v("xiv.vis.XtkPlane.prototype.add",kt.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",kt.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",kt.prototype.pc);v("xiv.vis.XtkPlane.prototype.restore",kt.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",kt.prototype.TK);v("xiv.vis.XtkPlane.prototype.render",kt.prototype.n);v("xiv.vis.XtkPlane.prototype.updateStyle",kt.prototype.k);v("xiv.vis.XtkPlane.prototype.dispose",kt.prototype.g);function pt(){kt.call(this);this.orientation="V";this.cl=jt}w(pt,kt);v("xiv.vis.XtkPlane3D",pt);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function qt(a){kt.call(this);this.orientation=a;this.cl=Ir;this.mq=null}w(qt,kt);v("xiv.vis.XtkPlane2D",qt);f=qt.prototype;f.nA=function(){return this.Ba.nA()};f.oA=function(){return this.Ba.oA()};f.Vl=function(){return null!=this.Ba?this.Ba.Vl():null};f.Mk=function(a){qt.d.Mk.call(this,a)};f.g=function(){qt.d.g.call(this);delete this.mq;delete this.gP;delete this.hP};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",qt.prototype.nA);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",qt.prototype.oA);v("xiv.vis.XtkPlane2D.prototype.getVolume",qt.prototype.Vl);v("xiv.vis.XtkPlane2D.prototype.setContainer",qt.prototype.Mk);v("xiv.vis.XtkPlane2D.prototype.dispose",qt.prototype.g);function rt(){Eq.call(this);this.lj(Q("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));N(this.u,rt.CSS.nE);F(this.u,"change",this.jc.bind(this))}w(rt,Eq);v("xiv.ui.ctrl.RadioButtonController",rt);rt.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";rt.CSS_SUFFIX={nE:"radiobutton"};rt.prototype.jc=function(){this.dispatchEvent({type:"p",checked:this.u.checked})};rt.prototype.f=function(){rt.d.f.call(this)};v("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",rt.ID_PREFIX);
v("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",rt.CSS_SUFFIX);v("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",rt.prototype.jc);v("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",rt.prototype.f);function st(){Eq.call(this);this.Xk=[]}w(st,Eq);v("xiv.ui.ctrl.MasterController2D",st);st.ID_PREFIX="xiv.ui.ctrl.MasterController2D";st.CSS_SUFFIX={};st.prototype.add=function(){};st.prototype.f=function(){st.d.f.call(this);Ib(this.Xk);delete this.Xk};v("xiv.ui.ctrl.MasterController2D.ID_PREFIX",st.ID_PREFIX);v("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",st.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController2D.prototype.add",st.prototype.add);v("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",st.prototype.f);function tt(){Eq.call(this);this.jg("Master Opacity")}w(tt,Eq);v("xiv.ui.ctrl.SliderController",tt);tt.ID_PREFIX="xiv.ui.ctrl.SliderController";tt.CSS_SUFFIX={la:"slider",mi:"slider-thumb",yp:"slider-thumb-hover",ni:"slider-track",yx:"slider-track-hover",Ms:"value-input"};f=tt.prototype;f.Xw=2;f.Vo=function(a){this.Xw=a};f.n=function(a){tt.d.n.call(this,a);this.Ot();this.Pt()};
f.Ot=function(){var a=new Nr;this.lj(a);a.qd(0);a.yc(1);a.kg(.01);a.H(1);N(a.a(),tt.CSS.la);N(a.Lc,tt.CSS.mi);N(a.se,tt.CSS.ni);a.qt(tt.CSS.yp);a.xy(tt.CSS.yx);F(this.u,"change",this.jc.bind(this));a.a().style.zIndex=0};f.Pt=function(){this.ka=Q("input");this.ka.type="number";N(this.ka,tt.CSS.Ms);Xh(this.a(),this.ka);F(this.ka,"input",this.Nv.bind(this));this.update()};f.Nv=function(){var a=this.u,b=parseFloat(this.ka.value),b=gd(b,a.na(),a.ga());this.ka.value=b;a.H(b)};f.TH=function(){return this.ka};
f.jc=function(){var a=this.u,b=a.J().toFixed(this.Xw),c=parseInt(this.ka.value);this.ka.value=b;this.dispatchEvent({type:"p",value:b,cv:a.na(),bv:a.ga(),JB:c})};f.update=function(){var a=this.u,b=a.J();a.k();a.H(0);a.H(b);a.Mh()!==this.ka.step&&(this.ka.step=a.Mh());a.na()!==this.ka.min&&(this.ka.min=a.na());a.ga()!==this.ka.max&&(this.ka.max=a.ga());a.J()!==this.ka.value&&(this.ka.value=b)};f.f=function(){tt.d.f.call(this);delete this.Xw;null!=this.ka&&(I(this.ka),R(this.ka),delete this.ka)};
v("xiv.ui.ctrl.SliderController.ID_PREFIX",tt.ID_PREFIX);v("xiv.ui.ctrl.SliderController.CSS_SUFFIX",tt.CSS_SUFFIX);v("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",tt.prototype.Vo);v("xiv.ui.ctrl.SliderController.prototype.render",tt.prototype.n);v("xiv.ui.ctrl.SliderController.prototype.getValueInput",tt.prototype.TH);v("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",tt.prototype.jc);v("xiv.ui.ctrl.SliderController.prototype.update",tt.prototype.update);
v("xiv.ui.ctrl.SliderController.prototype.disposeInternal",tt.prototype.f);function ut(){Eq.call(this);this.jg("TwoThumb");this.Ot();this.Pt();this.de=Q("input");this.de.type="number";N(this.de,ut.CSS.GD);Xh(this.a(),this.de);F(this.de,"input",this.GJ.bind(this));vt(this)}w(ut,Eq);v("xiv.ui.ctrl.TwoThumbSliderController",ut);ut.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";ut.CSS_SUFFIX={la:"slider",mi:"slider-thumb",vE:"slider-thumb-extent",wE:"slider-thumb-value",yp:"slider-thumb-hover",ni:"slider-track",yx:"slider-track-hover",Ms:"value-input",GD:"extent-input"};
f=ut.prototype;f.Ot=function(){this.L=new jq;this.L.w();var a=this.L.a();a.setAttribute("id","ThresholdSlider_"+B());N(a,ut.CSS.la);var b=Q("div",{id:"ThwoThumbSlider_track_"+B(),"class":ut.CSS.ni});a.appendChild(b);this.lj(this.L);N(this.L.pa,ut.CSS.mi);N(this.L.pa,ut.CSS.wE);rk(this.L.pa,ut.CSS.yp);N(this.L.wc,ut.CSS.mi);N(this.L.wc,ut.CSS.vE);rk(this.L.wc,ut.CSS.yp);F(this.L,"change",this.jc.bind(this))};
f.update=function(){var a=this.Mb();if(a.min!=this.L.na()||a.max!=this.L.ga())this.L.qd(a.min),this.L.yc(a.max),fq(this.L,a.max-a.min),this.L.H(a.min),this.L.kg(1);var b=T(this.L.pa).width,a=this.L.ga()-this.L.na(),c=T(this.L.a()).width-b,b=c*((this.L.J()-this.L.na())/a),a=c*(this.L.hf()/a);this.L.pa.style.left=b.toString()+"px";this.L.wc.style.left=a.toString()+"px";wt(this);vt(this)};function wt(a){a.ka.step=1;a.ka.min=a.L.na();a.ka.max=a.L.ga();a.ka.value=a.L.J()}
function vt(a){a.de.step=1;a.de.min=a.L.na();a.de.max=a.L.ga();a.de.value=a.L.hf()+a.L.J()}f.Pt=function(){this.ka=Q("input");this.ka.type="number";N(this.ka,ut.CSS.Ms);Xh(this.a(),this.ka);F(this.ka,"input",this.Nv.bind(this));wt(this)};f.Nv=function(){this.L.H(parseInt(this.ka.value))};f.GJ=function(){this.L.mj(parseInt(this.de.value)-this.L.J())};f.jc=function(){var a=this.L.J(),b=this.L.hf()+a;this.ka.value=a;this.de.value=b;this.dispatchEvent({type:"p",lower:a,upper:b})};
f.f=function(){ut.d.f.call(this);null!=this.L&&(I(this.L),null==this.L.Ka&&(this.L.Ka=new Sp),this.L.g(),delete this.L);null!=this.ka&&(I(this.ka),R(this.ka),delete this.ka);null!=this.de&&(I(this.de),R(this.de),delete this.de)};v("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",ut.ID_PREFIX);v("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",ut.CSS_SUFFIX);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",ut.prototype.update);
v("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",ut.prototype.jc);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",ut.prototype.f);function xt(){Eq.call(this);this.rg=[]}w(xt,Eq);v("xiv.ui.ctrl.MasterController3D",xt);xt.ID_PREFIX="xiv.ui.ctrl.MasterController3D";xt.CSS_SUFFIX={};xt.prototype.add=function(a){this.rg.push(a);this.Fy(a,tt);1==this.rg.length&&Xh(document.body,this.a())};xt.prototype.f=function(){xt.d.f.call(this);Ib(this.rg);delete this.rg};v("xiv.ui.ctrl.MasterController3D.ID_PREFIX",xt.ID_PREFIX);v("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",xt.CSS_SUFFIX);
v("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{qO:"Visible",fN:"Opacity"});v("xiv.ui.ctrl.MasterController3D.prototype.add",xt.prototype.add);v("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",xt.prototype.f);function yt(){xt.call(this)}w(yt,xt);v("xiv.ui.ctrl.VolumeController3D",yt);yt.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";yt.CSS_SUFFIX={};f=yt.prototype;f.Jy=function(a){var b=this.Ed(Js,"Volume Rendering",function(b){a.volumeRendering=b.checked});Iq(a,b);this.uf.push(b);b.u.ne(!1)};f.gK=function(a){null!=this.gp&&(this.gp.Mb().lowerThreshold=parseFloat(a.lower),this.gp.Mb().upperThreshold=parseFloat(a.upper))};f.gp=null;
f.Hy=function(a){var b=this.Ed(ut,"Threshold",this.gK.bind(this));b.bh(a);Iq(a,b);this.uf.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1E4,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=1E4,a.upperThreshold=d);var e=b.u;e.qd(c);e.yc(d);fq(e,d-c);e.H(c);e.kg(1);e.mj(d-c);a.upperThreshold=d;a.lowerThreshold=c;this.gp=b};f.add=function(a){yt.d.add.call(this,a);this.Jy(a);this.Hy(a)};f.k=function(){yt.d.k.call(this)};f.f=function(){yt.d.f.call(this);this.gp.g()};
v("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",yt.ID_PREFIX);v("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",1E4);v("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",yt.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",yt.prototype.Jy);v("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",yt.prototype.Hy);v("xiv.ui.ctrl.VolumeController3D.prototype.add",yt.prototype.add);v("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",yt.prototype.k);
v("xiv.ui.ctrl.VolumeController3D.prototype.disposeInternal",yt.prototype.f);function zt(){Eq.call(this);this.rg=[]}w(zt,Eq);v("xiv.ui.ctrl.MasterController",zt);zt.ID_PREFIX="xiv.ui.ctrl.MasterController";zt.CSS_SUFFIX={};zt.prototype.add=function(a){this.rg.push(a)};zt.prototype.f=function(){zt.d.f.call(this);Ib(this.rg);delete this.rg};v("xiv.ui.ctrl.MasterController.ID_PREFIX",zt.ID_PREFIX);v("xiv.ui.ctrl.MasterController.CSS_SUFFIX",zt.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController.CONTROLLERS",{});v("xiv.ui.ctrl.MasterController.prototype.add",zt.prototype.add);
v("xiv.ui.ctrl.MasterController.prototype.disposeInternal",zt.prototype.f);function At(){Eq.call(this);this.Eg=new Yo("Reset to Defaults");this.lj(this.Eg);this.Eg.a().style.fontFamily='Helvetica,"Helvetica neue", Arial, sans-serif';this.Eg.a().style.fontSize="10px";this.Eg.a().style.width="100%";F(this.Eg.a(),"click",this.jc.bind(this))}w(At,Eq);v("xiv.ui.ctrl.ButtonController",At);At.ID_PREFIX="xiv.ui.ctrl.ButtonController";At.CSS_SUFFIX={};At.prototype.jc=function(){this.dispatchEvent({type:"p",checked:this.Eg.Sg()})};
At.prototype.f=function(){At.d.f.call(this);I(this.Eg);I(this.Eg.a());this.Eg.g();delete this.Eg};v("xiv.ui.ctrl.ButtonController.ID_PREFIX",At.ID_PREFIX);v("xiv.ui.ctrl.ButtonController.CSS_SUFFIX",At.CSS_SUFFIX);v("xiv.ui.ctrl.ButtonController.prototype.dispatchComponentEvent",At.prototype.jc);v("xiv.ui.ctrl.ButtonController.prototype.disposeInternal",At.prototype.f);function Bt(){zt.call(this)}w(Bt,zt);v("xiv.ui.ctrl.LevelsController",Bt);Bt.ID_PREFIX="xiv.ui.ctrl.LevelsController";Bt.CSS_SUFFIX={};f=Bt.prototype;f.im=null;f.hj=null;f.Im=null;f.zx=null;function Ct(a){if(1E3<a.rg[0].max&&a.hj.u.ga()!=a.rg[0].max){var b=a.rg[0].max;a.hj.u.yc(b);a.hj.u.H(b);a.im.u.yc(b)}a.Im.update()}
f.add=function(a){Bt.d.add.call(this,a);this.Im=this.By(a);this.im=this.Ey(a);this.hj=this.Dy(a);var b=this.zy(a,this.im,this.hj),c=this.Ay(a,this.im,this.hj);this.zx=Dt(this,a);this.Gy(a);D([this.im,this.hj,b,c],function(a){F(a.u,"v",function(){Ct(this)}.bind(this))}.bind(this))};function Dt(a,b){var c=a.Ed(Js,"Scale Histogram",function(a){this.Im.Tr(a.checked);Ct(this)}.bind(a));Iq(b,c);a.Im.Tr(!0);c.u.ne(!0);a.of.push(c);return c}
f.Gy=function(a){var b=this.Ed(At,null,function(){}.bind(this));Iq(a,b);this.of.push(b);b.bh(a);return b};f.By=function(a){var b=this.Ed(Jq,null,function(){}.bind(this));b.bh(a);Iq(a,b);this.of.push(b);b.update();return b};f.Ey=function(a){var b=this.Ed(tt,"Window Min.",function(b){a.windowLow=b.value}.bind(this));b.bh(a);Iq(a,b);this.of.push(b);b.u.yc(1E3);b.u.qd(0);b.u.H(0);b.u.kg(1);b.Vo(0);b.update();return b};
f.Dy=function(a){var b=this.Ed(tt,"Window Max.");b.bh(a);F(b,"p",function(b){a.windowHigh=b.value}.bind(this));Iq(a,b);this.of.push(b);b.u.yc(1E3);b.u.qd(0);b.u.H(1E3);b.u.kg(1);b.Vo(0);b.update();return b};
f.zy=function(a,b,c){var d=this.Ed(tt,"Brightness");d.bh(a);F(d,"p",function(d){d=(d.value-d.JB)/(d.bv-d.cv);var h=a.windowHigh-a.windowLow;a.windowLow=Math.round(parseInt(a.windowLow)-h*d);a.windowHigh=Math.round(parseInt(a.windowHigh)-h*d);b.u.H(a.windowLow);c.u.H(a.windowHigh)}.bind(this));Iq(a,d);this.of.push(d);d.u.yc(150);d.u.qd(-150);d.u.H(0);d.u.kg(1);d.Vo(0);d.update();return d};
f.Ay=function(a,b,c){var d=this.Ed(tt,"Contrast");d.bh(a);F(d,"p",function(d){d=3*(d.value-d.JB)/(d.bv-d.cv);var h=parseInt(a.windowHigh)-parseInt(a.windowLow),k=parseInt(a.windowHigh)-h*d;a.windowLow=Math.round(parseInt(a.windowLow)+h*d);a.windowHigh=Math.round(k);b.u.H(a.windowLow);c.u.H(a.windowHigh)}.bind(this));Iq(a,d);this.of.push(d);d.u.yc(150);d.u.qd(-150);d.u.H(0);d.u.kg(1);d.Vo(0);d.update();return d};f.f=function(){delete this.im;delete this.hj;delete this.Im;delete this.zx;Bt.d.f.call(this)};
v("xiv.ui.ctrl.LevelsController.ID_PREFIX",Bt.ID_PREFIX);v("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",Bt.CSS_SUFFIX);v("xiv.ui.ctrl.LevelsController.CONTROLLERS",{fM:"Brightness",qM:"Contrast",UM:"Window Min.",TM:"Window Max.",EM:"Histogram",yN:"Scale Histogram"});v("xiv.ui.ctrl.LevelsController.LEVEL_MAX",1E3);v("xiv.ui.ctrl.LevelsController.LEVEL_MIN",0);v("xiv.ui.ctrl.LevelsController.prototype.add",Bt.prototype.add);v("xiv.ui.ctrl.LevelsController.prototype.add_histogram",Bt.prototype.By);
v("xiv.ui.ctrl.LevelsController.prototype.add_reset",Bt.prototype.Gy);v("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",Bt.prototype.Ey);v("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",Bt.prototype.Dy);v("xiv.ui.ctrl.LevelsController.prototype.add_brightness",Bt.prototype.zy);v("xiv.ui.ctrl.LevelsController.prototype.add_contrast",Bt.prototype.Ay);v("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",Bt.prototype.f);function Et(a){Zc.call(this);this.oa=null;this.o=a;a=E||hc&&!oc("531")&&"TEXTAREA"==a.tagName;this.uc=new cj(this);this.uc.A(this.o,a?["keydown","paste","cut","drop","input"]:"input",this)}w(Et,Zc);
Et.prototype.handleEvent=function(a){if("input"==a.type)E&&oc(10)&&0==a.keyCode&&0==a.charCode||(Ft(this),fc&&this.o!=Ih(this.o).activeElement||this.dispatchEvent(Gt(a)));else if("keydown"!=a.type||gl(a)){var b="keydown"==a.type?this.o.value:null;E&&229==a.keyCode&&(b=null);var c=Gt(a);Ft(this);this.oa=Xf(function(){this.oa=null;this.o.value!=b&&this.dispatchEvent(c)},0,this)}};function Ft(a){null!=a.oa&&(ba.clearTimeout(a.oa),a.oa=null)}function Gt(a){a=new Gc(a.Ic);a.type="input";return a}
Et.prototype.f=function(){Et.d.f.call(this);this.uc.g();Ft(this);delete this.o};function Ht(a,b,c){gj.call(this,a);It(this,b||"#f00");this.className=c||"goog-hsv-palette";this.qa=ri(this.N())}w(Ht,gj);f=Ht.prototype;f.as=function(a){a!=this.Dl&&(It(this,a),Jt(this),this.dispatchEvent("action"))};function It(a,b){var c=Ij(b).$i,d=Oj(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.Yc=[e,l,d];a.Yc[0]/=360;a.Dl=c}
function Kt(a,b,c,d){if(null!=b||null!=c||null!=d)a.Yc[0]=null!=b?b:a.Yc[0],a.Yc[1]=null!=c?c:a.Yc[1],a.Yc[2]=null!=d?d:a.Yc[2],b=[360*a.Yc[0],a.Yc[1],a.Yc[2]],b=Qj(b[0],b[1],b[2]),a.Dl=b,Jt(a),a.dispatchEvent("action")}f.Fe=function(){return!1};
f.w=function(){var a=this.N(),b=E&&!oc("7")?" "+(this.className+"-noalpha"):"",c=a.w("DIV",this.className+"-hs-backdrop");this.bm=a.w("DIV",this.className+"-hs-handle");this.bj=a.w("DIV",this.className+"-hs-image",this.bm);this.Vk=a.w("DIV",this.className+"-v-image");this.qp=a.w("DIV",this.className+"-v-handle");this.ks=a.w("DIV",this.className+"-swatch");this.uk=a.w("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.w("label",null,this.uk);this.o=a.w("DIV",this.className+b,
c,this.bj,this.Vk,this.qp,this.ks,d)};f.$a=function(){Ht.d.$a.call(this);Jt(this);var a=this.ab();a.A(this.a(),"mousedown",this.Qg);this.Zn||(this.Zn=new Et(this.uk));a.A(this.Zn,"input",this.lI)};f.f=function(){Ht.d.f.call(this);delete this.bj;delete this.bm;delete this.Vk;delete this.qp;delete this.ks;delete this.uk;this.Zn&&(this.Zn.g(),delete this.Zn);Uc(this.hv);Uc(this.iv)};
function Jt(a){if(a.fa){var b=a.Yc[1],c=a.Yc[2],d=a.bj.offsetWidth*a.Yc[0];a.Le()&&(d=a.bj.offsetWidth-d);var e=Math.ceil(a.bm.offsetWidth/2),d=d-e,b=a.bj.offsetHeight*(1-b),b=b-Math.ceil(a.bm.offsetHeight/2),e=a.bm,h=a.Le();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.Vk.offsetTop-Math.floor(a.qp.offsetHeight/2)+(255-c)/255*a.Vk.offsetHeight;a.qp.style.top=b+"px";Si(a.bj,c/255);vi(a.Vk,"background-color",Qj(360*a.Yc[0],a.Yc[1],
255));vi(a.ks,"background-color",a.Dl);vi(a.ks,"color",127.5<a.Yc[2]?"#000":"#fff");var k;try{k=Ij(a.uk.value).$i}catch(l){}a.Dl!=k&&(a.uk.value=a.Dl)}}f.Qg=function(a){if(a.target==this.Vk||a.target==this.qp){var b=Ri(this.Vk);this.CA(b,a);this.hv=F(this.qa,"mousemove",ta(this.CA,this,b));this.iv=F(this.qa,"mouseup",this.Wf,!1,this)}else if(a.target==this.bj||a.target==this.bm)b=Ri(this.bj),this.BA(b,a),this.hv=F(this.qa,"mousemove",ta(this.BA,this,b)),this.iv=F(this.qa,"mouseup",this.Wf,!1,this)};
f.CA=function(a,b){b.preventDefault();var c=ui(this.N()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);Kt(this,null,null,c)};f.BA=function(a,b){b.preventDefault();var c=ui(this.N()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;Kt(this,d,c,null)};f.Wf=function(){Uc(this.hv);Uc(this.iv)};
f.lI=function(){/^#?[0-9a-f]{6}$/i.test(this.uk.value)&&this.as(this.uk.value)};function Lt(){Eq.call(this);this.jg("Color");this.Ii=new Ht;this.Ii.n();F(this.Ii,"action",this.jc.bind(this));N(this.Ii.a(),this.constructor.CSS.AD);this.vn=Q("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":Lt.CSS.BD});Xh(this.vn,this.Ii.a());Q("div",{id:this.constructor.ID_PREFIX+"_ColorPalette_"+B(),"class":Lt.CSS.vM});this.a().appendChild(this.vn);this.lj(this.vn)}w(Lt,Eq);v("xiv.ui.ctrl.ColorPaletteController",Lt);Lt.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";
Lt.CSS_SUFFIX={mM:"colorsquare",BD:"colorpaletteholder",AD:"colorpalette",wj:"closebutton"};Lt.prototype.update=function(){var a=Math.floor(255*this[Fq].color[0]),b=Math.floor(255*this[Fq].color[1]),c=Math.floor(255*this[Fq].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.Ii.as(Mj([a,b,c]))};Lt.prototype.jc=function(a){this.dispatchEvent({type:"p",color:Oj(a.target.Dl).map(function(a){return a/255})})};
Lt.prototype.f=function(){Lt.d.f.call(this);I(this.Ii);this.Ii.g();delete this.Ii;R(this.vn);delete this.vn};v("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",Lt.ID_PREFIX);v("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",Lt.CSS_SUFFIX);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ctrl.ColorPaletteController.prototype.update",Lt.prototype.update);
v("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",Lt.prototype.jc);v("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",Lt.prototype.f);function Mt(){xt.call(this)}w(Mt,xt);v("xiv.ui.ctrl.MeshController3D",Mt);Mt.ID_PREFIX="xiv.ui.ctrl.MeshController3D";Mt.CSS_SUFFIX={};Mt.prototype.add=function(a){Mt.d.add.call(this,a);this.st(a,Js);this.rt(a,Lt)};v("xiv.ui.ctrl.MeshController3D.ID_PREFIX",Mt.ID_PREFIX);v("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",Mt.CSS_SUFFIX);v("xiv.ui.ctrl.MeshController3D.prototype.add",Mt.prototype.add);v("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",Mt.prototype.f);function Nt(){xt.call(this)}w(Nt,xt);v("xiv.ui.ctrl.AnnotationsController3D",Nt);Nt.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";Nt.CSS_SUFFIX={};Nt.prototype.add=function(a){Nt.d.add.call(this,a);this.st(a,Js);this.rt(a,Lt)};v("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",Nt.ID_PREFIX);v("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",Nt.CSS_SUFFIX);v("xiv.ui.ctrl.AnnotationsController3D.prototype.add",Nt.prototype.add);function Ot(){zt.call(this)}w(Ot,zt);v("xiv.ui.ctrl.VolumeController",Ot);Ot.ID_PREFIX="xiv.ui.ctrl.VolumeController";Ot.CSS_SUFFIX={};Ot.prototype.add=function(a){Ot.d.add.call(this,a);this.Iy(a);this.Cy(a)};Ot.prototype.Iy=function(a){var b=this.Ed(rt,"Visible",function(){});Iq(a,b);this.uf.push(b);b.bh(a);b.u.checked=a[Hr]||!1};Ot.prototype.Cy=function(a){var b=this.Ed(Js,"Show Label Map",function(b){a.iP.visible=b.checked});Iq(a,b);this.uf.push(b);b.bh(a);b.u.ne(!1)};Ot.prototype.f=function(){Ot.d.f.call(this)};
v("xiv.ui.ctrl.VolumeController.ID_PREFIX",Ot.ID_PREFIX);v("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",Ot.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController.prototype.add",Ot.prototype.add);v("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",Ot.prototype.Iy);v("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",Ot.prototype.Cy);v("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",Ot.prototype.f);function Pt(){V.call(this);C(Qt(),function(a,b){this[b]=null})}w(Pt,V);v("xiv.ui.ctrl.XtkControllerTree",Pt);function Rt(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.ctrl.XtkControllerTree.ControlSet",Rt);Pt.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";Pt.CSS_SUFFIX={};function Qt(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=Pt.prototype;f.sx=function(){};f.sD=function(){return this.Og([this.ji])};f.sx=function(){return this.Og([this.zj])};f.PE=function(){return this.Og([this.Gj])};
f.UG=function(){};f.Og=function(a){var b=[];D(g(a)?a:[a],function(a){null!=a&&(b=Lb(b,a.Mz()))});return b};f.op=function(){var a=this.Og([this.zj,this.Hj,this.Gj,this.Aj,this.ji,this.Bs]);D(a,function(a){a.update()}.bind(this))};
f.Lt=function(a,b){a instanceof J?(null==this.Hj&&(this.zj=new Bt,this.Hj=new Ot,this.Gj=new yt),this.zj.add(a,b),this.Hj.add(a,b),this.Gj.add(a,b)):a instanceof Dq?(null==this.Aj&&(this.Aj=new Mt),this.Aj.add(a,b)):a instanceof Op&&(null==this.ji&&(this.ji=new Nt),this.ji.add(a));this.volumes=new Rt(null,this.Og([this.Gj]),this.Og([this.Hj]));this.annotations=new Rt(null,this.Og([this.ji]));this.meshes=new Rt(null,this.Og([this.Aj]));this.levels=new Rt(null,null,this.Og([this.zj]))};
f.f=function(){Pt.d.f.call(this);null!=this.zj&&(this.zj.g(),delete this.zj);null!=this.Hj&&(this.Hj.g(),delete this.Hj);null!=this.Gx&&(this.Gx.g(),delete this.Gx);null!=this.Gj&&(this.Gj.g(),delete this.Gj);null!=this.Aj&&(this.Aj.g(),delete this.Aj);null!=this.ji&&(this.ji.g(),delete this.ji);null!=this.Bs&&(this.Bs.g(),delete this.Bs)};v("xiv.ui.ctrl.XtkControllerTree.ControlSet",Rt);v("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",Pt.ID_PREFIX);v("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",Pt.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",Qt);v("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",Pt.prototype.sx);v("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",Pt.prototype.sD);v("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",Pt.prototype.PE);v("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",Pt.prototype.UG);v("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",Pt.prototype.Og);v("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",Pt.prototype.op);
v("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",Pt.prototype.Lt);v("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",Pt.prototype.f);function St(){Zc.call(this);this.Ye=null;this.gc={volumes:[],meshes:[],fibers:[],spheres:[]};this.li=new qt("X");this.Dj=new qt("Y");this.Ej=new qt("Z");this.$b=new pt;this.rc={};this.rc[this.li.Db()]=this.li;this.rc[this.Dj.Db()]=this.Dj;this.rc[this.Ej.Db()]=this.Ej;this.rc[this.$b.Db()]=this.$b;this.Vg=null;this.fs(this.$b);Tt(this)}w(St,Gr);v("xiv.vis.XtkEngine",St);St.ID_PREFIX="xiv.vis.XtkEngine";St.SLICE_TO_RAS_KEY="sliceToRAS"+B();St.HAS_LABEL_MAP_KEY="hasLabelMap";f=St.prototype;f.Pr=!1;
f.lu=function(){return this.gc.volumes};f.ku=function(){return this.gc.meshes};f.ju=function(){return this.gc.spheres};function Ut(a,b){null!=b.Rd.ln&&D(b.Rd.ln,function(a){this.gc.spheres.push(Vt(a))}.bind(a))}f.tC=function(a,b){switch(a.toLowerCase()){case "x":this.li.pc(b);break;case "y":this.Dj.pc(b);break;case "z":this.Ej.pc(b);break;case "v":this.$b.pc(b)}};f.fs=function(a){this.Vg=a;this.Vg.ra();this.UK=F(this.Vg,"s",this.Gv.bind(this))};f.xH=function(){return this.Vg};f.Kv=function(a){this.dispatchEvent(a)};
function Tt(a){C(a.rc,function(a){F(a,"F",this.Kv.bind(this));F(a,"H",function(){}.bind(this))}.bind(a))}f.op=function(){this.Ye.op()};f.CG=function(){return this.Ye};
function Wt(a,b){null!=a.Ye&&(a.Ye.g(),a.Ye=null);a.Ye=new Pt;null!=(b.Rd&&null!=b.Rd.ln)&&(Ut(a,b),D(a.gc.spheres,function(a){this.Ye.Lt(a)}.bind(a)));var c;D(b.wd,function(a){c=a.Uf();if(null!=c&&(currXObj=Xt(c,a.Ih),renderProps=a.Rd,currXObj))if(this.Ye.Lt(currXObj,renderProps),currXObj instanceof J){"scans"==b.Of.toLowerCase()&&(window.console.log("Turning off reslicing for scan"),currXObj.reslicing=!1);a=currXObj;var e=renderProps;null!=e||(e={origin:[0,0,0],rs:1E4,lr:-1E4,$q:!0,Yw:!1});a.origin=
e.origin;a.upperThreshold=e.rs;a.lowerThreshold=e.lr;a.volumeRendering=e.Yw;a[Hr]=e.$q;a[St.SLICE_TO_RAS_KEY]=e.tw;null!=e.XA?(a.labelmap.file=e.XA,a.labelmap.colortable.file=e.TI,a[St.HAS_LABEL_MAP_KEY]=!0):a[St.HAS_LABEL_MAP_KEY]=!1;this.gc.volumes.push(currXObj)}else currXObj instanceof Dq?(a=currXObj,e=renderProps,a.color=e.color||[.5,.5,.5],a.opacity=e.opacity||1,this.gc.meshes.push(currXObj)):currXObj instanceof kq&&(St.DP(currXObj,renderProps),this.gc.fibers.push(currXObj))}.bind(a))}
f.UB=function(){this.fs(this.$b);this.$b.ra();C(this.gc,function(a,b){"volumes"!==b&&D(a,function(a){this.$b.add(a)}.bind(this))}.bind(this));Sc(this.$b.Pa(),"t",function(){this.Dr();this.li.n()}.bind(this));this.$b.n()};f.TB=function(a){var b=null!=a?a:this.Tl();C(this.rc,function(a,d){"v"!=d.toLowerCase()&&(a.ra(),a.add(b),a.n())})};function Yt(a){var b=a.Tl();C(a.gc.volumes,function(a){a!==b&&(a.visible=!1)})}
f.VB=function(){var a=this.Tl(),b=[],c=[],d=["x","y","z","v"];C(this.gc,function(a,d){currArr="volumes"==d?c:b;D(a,function(a){currArr.push(a)})}.bind(this));D(b,function(a){this.$b.add(a)}.bind(this));D(c,function(b){b!==a&&(b.visible=!0,this.$b.add(b))}.bind(this));this.Vg.Pa().onShowtime=function(){Kb(d,this.Vg.Db().toLowerCase());Zt(this,a)}.bind(this);this.Vg.add(a);this.Vg.n()};
f.n=function(a){this.Pr=!1;Wt(this,a);var b=a.Rd;null!=b?(null!=b.backgroundColor&&this.$b.Xr(a.Rd.backgroundColor),null!=b.cq&&this.$b.Yr(a.Rd.cq)):(this.$b.Xr(),this.$b.Yr());if(0<this.gc.volumes.length){a=this.rc;b="";for(b in a)if(a[b].isEnabled()){this.fs(a[b]);break}this.VB()}else this.$b.isEnabled()&&this.UB()};function Zt(a,b){var c=mb(a.rc)-1;C(a.rc,function(a){a!=this.Vg&&a.isEnabled()&&(a.add(b),Sc(a.Pa(),"t",function(){c--;0==c&&this.Dr()}.bind(this)),a.n())}.bind(a))}
f.Tl=function(){if(0!=this.gc.volumes.length){for(var a=0,b=this.gc.volumes.length;a<b;a++){var c=this.gc.volumes[a];if(c[Hr])return c}this.gc.volumes[0][Hr]=!0;return this.gc.volumes[0]}};f.k=function(){C(this.rc,function(a){a.k()}.bind(this))};f.Gv=function(a){this.Pr||this.dispatchEvent({type:"s",value:a.value})};f.Dr=function(a){Yt(this);Uc(this.UK);this.Pr=!0;this.dispatchEvent({type:"t",value:null!=a?a.value:1})};f.rH=function(){return this.li};f.sH=function(){return this.Dj};f.tH=function(){return this.Ej};
f.qH=function(){return this.$b};f.Eq=function(a){return this.rc[a]};f.uH=function(){return this.rc};var $t=["nrrd","nii","nii.gz","mgh","mgz"],au=["dicom","dcm","ima"],bu=["hdr","img"],cu=["nii","nii.gz"],du=["jpeg","jpg","gif","png","img"],eu="stl vtk obj fsm inflated smoothwm pial orig".split(" "),fu=["trk"];function gu(a){var b=void 0;hu(a)?b=new Dq:iu(a)||ju(a)||ku(a)?b=new J:lu(a)&&(b=new kq);return b}
function Vt(a){var b=new Op;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function iu(a){return-1<$t.indexOf(a)?!0:!1}function ku(a){return-1<du.indexOf(a)?!0:!1}function ju(a){return-1<au.indexOf(a)?!0:!1}function hu(a){return-1<eu.indexOf(a)?!0:!1}function lu(a){return-1<fu.indexOf(a)?!0:!1}
function Xt(a,b){function c(a){var b=rj(a);a=qj(a);return b+"/"+a}var d=g(a)?sj(a[0]):sj(a),d=gu(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];D(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=ob(b),d.filedata=nb(b)):d.file=a;return d}
St.prototype.g=function(){St.d.g.call(this);null!=this.Ye&&(this.Ye.g(),delete this.Ye);I(this.li);I(this.Dj);I(this.Ej);I(this.$b);delete this.Vg;sb(this.rc);delete this.rc;this.li.g();delete this.li;this.Dj.g();delete this.Dj;this.Ej.g();delete this.Ej;this.$b.g();delete this.$b;C(this.gc,function(a){C(a,function(a){I(a);sb(a)})});sb(this.gc);delete this.gc;delete this.Pr};v("xiv.vis.XtkEngine.EventType",{EN:"F",CN:"G",DN:"H",ERROR:"I",DO:"J",QM:"K",RM:"L"});v("xiv.vis.XtkEngine.ID_PREFIX",St.ID_PREFIX);
v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",St.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",St.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",iu);v("xiv.vis.XtkEngine.isImage",ku);v("xiv.vis.XtkEngine.isDicom",ju);v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<bu.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<cu.indexOf(a)?!0:!1});
v("xiv.vis.XtkEngine.isMesh",hu);v("xiv.vis.XtkEngine.isFiber",lu);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",St.prototype.ku);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",St.prototype.ju);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",St.prototype.lu);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",St.prototype.tC);v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",St.prototype.fs);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",St.prototype.xH);
v("xiv.vis.XtkEngine.prototype.updateControllers",St.prototype.op);v("xiv.vis.XtkEngine.prototype.getControllerTree",St.prototype.CG);v("xiv.vis.XtkEngine.prototype.render3dPlane",St.prototype.UB);v("xiv.vis.XtkEngine.prototype.render2D",St.prototype.TB);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",St.prototype.VB);v("xiv.vis.XtkEngine.prototype.render",St.prototype.n);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",St.prototype.Tl);v("xiv.vis.XtkEngine.prototype.updateStyle",St.prototype.k);
v("xiv.vis.XtkEngine.prototype.getPlaneX",St.prototype.rH);v("xiv.vis.XtkEngine.prototype.getPlaneY",St.prototype.sH);v("xiv.vis.XtkEngine.prototype.getPlaneZ",St.prototype.tH);v("xiv.vis.XtkEngine.prototype.getPlaneV",St.prototype.qH);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",St.prototype.Eq);v("xiv.vis.XtkEngine.prototype.getPlanes",St.prototype.uH);v("xiv.vis.XtkEngine.prototype.dispose",St.prototype.g);function mu(a,b,c){Ym.call(this);this.LC=!0===a;this.KC=!0===b;this.IC=!0===c}w(mu,Ym);v("xiv.ui.HelpDialog",mu);mu.ID_PREFIX="xiv.ui.HelpDialog";mu.CSS={ED:"nrg-ui-helpdialog-dialog",al:"nrg-ui-helpdialog-text",tE:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",wj:"xiv-ui-helpdialog-closebutton"};mu.LAYOUT_IMAGE_ID=mu.ID_PREFIX+".LayoutImage";
mu.prototype.n=function(a){mu.d.n.call(this,a);N(this.a(),"xiv-ui-helpdialog");this.Jm=new Ns;N(this.Jm.a(),mu.CSS.tE);this.Jm.n(this.a());nu(this);this.wy(mu.CSS.TITLE);this.hy(mu.CSS.wj)};mu.prototype.jw=function(a){null!=document.getElementById(mu.LAYOUT_IMAGE_ID)&&(document.getElementById(mu.LAYOUT_IMAGE_ID).src=a)};
function nu(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts"," ","<img height=15 width=15 id="+mu.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.LC&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.KC&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.IC&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.oe("Help");D([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="black">';
D(a,function(a){c+="<tr>";D(a,function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}R(c);var n=Q("div");n.innerHTML=c;this.Jm.bf(n,[d])}.bind(a))}
mu.prototype.f=function(){mu.d.f.call(this);delete this.LC;delete this.KC;delete this.IC;null!=this.Jm&&this.Jm.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",mu.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",mu.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",mu.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",mu.prototype.n);v("xiv.ui.HelpDialog.prototype.setLayoutButton",mu.prototype.jw);v("xiv.ui.HelpDialog.prototype.disposeInternal",mu.prototype.f);function ou(a,b,c){Yo.call(this,a,b||Zo.ee(),c);this.bd(16,!0)}w(ou,Yo);Mn("goog-toggle-button",function(){return new ou(null)});function pu(a){V.call(this);this.K={};this.S=a}w(pu,V);v("xiv.ui.ViewBoxDialogs",pu);pu.ID_PREFIX="xiv.ui.ViewBoxDialogs";pu.CSS_SUFFIX={sg:"generic-toggle",MD:"infodialog",ND:"infodialog-text",YM:"modaldialog"};var qu="Info_"+B(),ru="Help_"+B(),su={HM:qu,CM:ru},tu="ToggleClass_"+B();f=pu.prototype;f.FG=function(){return this.K};f.EG=function(a){return this.K[a]};
f.yn=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.S.ak("LEFT",c,a,e,function(b){var c=this.K[a];b="true"==b.getAttribute("checked");c.aa(b);this.dispatchEvent({type:b?"M":"N",yz:this.K[a],zz:a});uu(this,c)}.bind(this),d);null!=this.K[a]&&this.K[a].g();c=new Ym;this.K[a]=c;Im(c,null!=k?k:!1);Pm(c,null!=l?l:null);c.n(this.S.xb);Hm(c,0);this.K[a].Zd();c.oe(e);N(c.a(),b);F(c,"f",function(){this.S.mm(n)}.bind(this));F(c,Lm,function(){}.bind(this));this.K[a].aa(!0);this.K[a].Zd();this.K[a].Zd(!1);
!1===h&&Ln(this.S.Nd[a])};f.OF=function(){this.yn(su.XM,"xiv-ui-viewboxdialogs-meshes-dialog",pu.CSS.sg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.QF=function(){this.yn(su.sO,"xiv-ui-viewboxdialogs-volumes-dialog",pu.CSS.sg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.mz=function(){vu(this);wu(this)};
function xu(a,b,c){var d=new Ym;Pm(d,Sm);d.n(null!=b?b:document.body);d.Nk(a);N(d.a(),"nrg-ui-dialogs-yesnomodal");Im(d,!0);var e=d.a(),h=d.Kh();Sc(d,Qm,function(a){var b=e.cloneNode(!0);b.style.opacity=1;b.style.display="inline";Xh(e.parentNode,b);var n=h.cloneNode(!0);n.style.opacity=.7;n.style.display="inline";Xh(e.parentNode,n);b.style.zIndex=2E9;n.style.zIndex=2E9;Mk([b,n],1,0,null,null,function(){R(b);delete b;R(n);delete n});"yes"===a.key.toLowerCase()&&null!=c&&c();d.Zt=!0;d.wo()});d.aa(!0);
d.Zd(!0);d.Zt=!1;e.style.opacity=0;e.style.zIndex=2E9;h.style.opacity=0;h.style.zIndex=2E9;uk(e,150);vk(h,150,.7)}f.wA=function(){var a=[];C(this.K,function(b){b.sa()&&a.push(b.a())});return a};f.showModalDialog=function(a){if(null==this.K[a])throw Error("Invalid dialog key: ",a);this.K[a].aa(!0);this.K[a].Zd()};
function uu(a,b){C(null!=b?[b]:a.K,function(a){if(null!=a&&!ja(a)){var b=a.Vz(),e;if(null!=b){for(e in b)if(isNaN(b[e])&&!ja(b[e]))return;e=T(a.a());var h=Ci(a.a()),k=h.y+e.height,l=b.top+b.height,n=h.x,p=h.y;h.x+e.width>b.left+b.width&&(n=b.left+b.width-e.width);0>n&&(n=0);k>l&&(p=b.top+b.height-e.height);-15>p&&(p=-15);Ai(a.a(),n,p)}}})}f.update=function(){C(this.K,function(a){a.cD();uu(this,a)}.bind(this))};
f.jp=function(a,b){var c=!1===b?0:1;window.console.log(a,this.K[a]);null!=this.K[a].a()&&vk(this.K[a].a(),200,c)};f.Cq=function(){return this.K[ru]};
function vu(a){null!=a.K[ru]&&a.K[ru].g();var b=new mu(0<a.S.Pa().lu().length,0<a.S.Pa().ku().length,0<a.S.Pa().ju().length);Im(b,!1);Pm(b,null);b.n(a.S.xb);b.aa(!1);b.Zd();var c=a.S.ak("LEFT",pu.CSS.sg,ru,"Help",function(a){a="true"==a.getAttribute("checked");b.aa(a);b.Zd();this.dispatchEvent({type:a?"M":"N",yz:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");F(b,"f",function(){this.S.mm(c)}.bind(a));a.S.mm(c);a.K[ru]=new mu}
function wu(a){null!=a.K[qu]&&a.K[qu].g();currDialog=new Ym;var b="";0<a.S.qb.length?C(a.S.qb[0].me,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Nk(a.S.qb[0].$h);Im(currDialog,!1);currDialog.Uj(b);Pm(currDialog,null);currDialog.n(a.S.xb);currDialog.aa(!0);currDialog.tr("left","top",0,-12);currDialog.oe("Info. Display");currDialog.kw("xiv-ui-viewboxdialogs-infodialog-hovered");N(currDialog.a(),pu.CSS.MD);N(currDialog.dh[0],pu.CSS.ND);var c=a.S.ak("LEFT",pu.CSS.sg,qu,"Info. Display",
function(a){a="true"==a.getAttribute("checked");currDialog.aa(a);currDialog.tr("left","top",0,-15);this.dispatchEvent({type:a?"M":"N",yz:currDialog})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");F(currDialog,"f",function(){this.S.mm(c)}.bind(a));currDialog.cw();a.K[qu]=currDialog}f.f=function(){delete this.S;null!=this.K&&(C(this.K,function(a){I(a);a.f();a.g()}.bind(this)),sb(this.K))};v("xiv.ui.ViewBoxDialogs.EventType",{tM:"M",sM:"N"});
v("xiv.ui.ViewBoxDialogs.ID_PREFIX",pu.ID_PREFIX);v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",pu.CSS_SUFFIX);v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",su);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",tu);v("xiv.ui.ViewBoxDialogs.createModalDialog",pu.TO);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",pu.prototype.FG);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",pu.prototype.EG);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",pu.prototype.yn);
v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",pu.prototype.OF);v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",pu.prototype.QF);v("xiv.ui.ViewBoxDialogs.prototype.createPostRenderDialogs",pu.prototype.mz);v("xiv.ui.ViewBoxDialogs.prototype.dispsePostRenderDialogs",pu.prototype.VO);v("xiv.ui.ViewBoxDialogs.prototype.setModalDialogOnYes",pu.prototype.CP);v("xiv.ui.ViewBoxDialogs.prototype.showModalDialog",pu.prototype.showModalDialog);
v("xiv.ui.ViewBoxDialogs.prototype.getVisibleDialogElements",pu.prototype.wA);v("xiv.ui.ViewBoxDialogs.prototype.update",pu.prototype.update);v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",pu.prototype.jp);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",pu.prototype.Cq);v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",pu.prototype.f);function W(a,b,c,d){Zc.call(this);this.S=a;this.ia=b;this.Ra=c;this.K=d;this.pd={p:null,c:null};this.kq={x:null,y:null};this.bg={l:!1,m:!1,r:!1};this.xk={up:{},dn:{},ot:{},ov:{}};F(this.K,"M",this.wB.bind(this));a=document.body;this.mb=new Yn;this.mb.zl(a);F(this.mb,"key",this.Xh.bind(this));this.Uk=!1;document.addEventListener("mousemove",this.Cw.bind(this),!1)}w(W,Zc);v("xiv.ui.ViewBoxInteractorHandler",W);
var yu="Crosshairs_"+B(),zu="Settings_"+B(),Au="TwoDPan_"+B(),Bu="TwoDZoom_"+B(),Cu={cd:yu,BN:zu,YN:Au,ZN:Bu};W.CSS={sg:"xiv-ui-viewboxinteractorhandler-generic-toggle",hx:"xiv-ui-viewboxinteractorhandler-generic-dialog",ix:"xiv-ui-viewboxinteractorhandler-generic-zippytree",RD:"xiv-ui-viewboxinteractorhandler-levelsdialog",SD:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered"};
W.CURSOR_CSS={RE:"xiv-ui-viewboxinteractorhandler-zoom-follower",jx:"xiv-ui-viewboxinteractorhandler-viewframe-grab",mx:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",kx:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",lx:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",Ix:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",Jx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};W.ORIENTATION_KEY="Orientation_"+B();f=W.prototype;f.mb=null;f.Wk=null;f.fb=null;f.Zw=!1;
f.Rv=!1;f.hc={};f.lz=function(){this.tz();Du(this);Eu(this);this.pz();this.kz(!1);this.rz();this.sz();this.Su()};function Fu(a){var b=a.S.xb;C(W.CURSOR_CSS,function(a){Ah(b,a)})}function Gu(a,b,c,d){b=b?N:Ah;b(a.S.xb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.S.xb,d)}function Hu(a){Gu(a,!0,W.CURSOR_CSS.jx,W.CURSOR_CSS.mx);Gu(a,!1,W.CURSOR_CSS.kx,W.CURSOR_CSS.lx)}function Iu(a){Gu(a,!1,W.CURSOR_CSS.Jx);Gu(a,!0,W.CURSOR_CSS.Ix)}
f.Cw=function(a){this.kq.x=a.clientX||a.pageX;this.kq.y=a.clientY||a.pageY};
f.WJ=function(a){this.El=a.target;this.pd.p=this.pd.c;this.pd.c=[this.kq.x,this.kq.y];if(null!=this.pd.p){(new Is(this.pd.c[0],this.pd.c[1])).add(new Is(this.pd.p[0],this.pd.p[1]));a=this.pd.c[0]-this.pd.p[0];var b=this.pd.c[1]-this.pd.p[1];this.Uk&&(this.xf.style.visibility="hidden");this.Zw?(this.Uk&&this.Uk&&(R(this.xf),Xh(this.El.Ji,this.xf),this.xf.style.visibility="visible",this.xf.style.left=this.pd.c[0]+20+"px",this.xf.style.top=this.pd.c[1]+"px"),Iu(this),this.bg.l&&Ju(this,a,b)):this.Rv&&
(Hu(this),this.bg.l&&(Gu(this,!1,W.CURSOR_CSS.jx,W.CURSOR_CSS.mx),Gu(this,!0,W.CURSOR_CSS.kx,W.CURSOR_CSS.lx),this.El.ha.Ir([-1*a,-1*b]),this.um()))}};f.Cr=function(){Fu(this);this.El=null;this.Uk&&(this.xf.style.visibility="hidden")};f.Ev=function(a){0==a.button?this.bg.l=!0:1==a.button?this.KL.bg.m=!0:2==a.button&&(this.bg.r=!0)};f.Fv=function(a){0==a.button?this.bg.l=!1:1==a.button?this.KL.bg.m=!1:2==a.button&&(this.bg.r=!1)};
f.Xh=function(a){window.console.log("On key:",a.keyCode,this.hc);if(this.S.Zq())if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Ku(this,this.El,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.S.wu(Au);window.console.log("escape","pan",a,a.getAttribute("checked"));"true"==a.getAttribute("checked").toString()&&this.S.Jc(Au);"true"==this.S.wu(Bu).getAttribute("checked").toString()&&this.S.Jc(Bu);break;case 90:this.S.Jc(Bu);break;case 72:case 80:this.S.Jc(Au);break;case 66:case 76:this.S.Jc(this.hc.levels);
break;case 86:this.S.Jc(this.hc.volumes);break;case 77:this.S.Jc(this.hc.meshes);break;case 65:this.S.Jc(this.hc.annotations);break;case 67:this.S.Jc(yu);break;case 83:this.S.Jc(this.hc[zu]);break;case 191:a.shiftKey&&this.S.Jc(ru);break;case 73:this.S.Jc(qu)}};function Ju(a,b,c){Fu(a);var d=function(){Iu(this);this.El.Em()}.bind(a),e=function(){Gu(this,!0,W.CURSOR_CSS.Jx);Gu(this,!1,W.CURSOR_CSS.Ix);this.El.Fm()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Lu(a);a.um()}f.vx=0;f.wx=0;
f.RC=function(a){this.vx=a.clientX;this.wx=a.clientY;window.console.log("store mouse coords",this.vx,this.wx)};f.Su=function(){Mu(this,function(a,b){this.xk.ov[b]=F(a.Pa(),"mouseover",this.WJ.bind(this));var c=a.Pa().sc;this.xk.ot[b]=F(c,"mouseleave",this.Cr.bind(this));this.xk.dn[b]=F(c,"mousedown",this.Ev.bind(this));this.xk.up[b]=F(c,"mouseup",this.Fv.bind(this))}.bind(this))};function Ku(a,b,c){Mu(a,function(a,b,h){h.la.H(h.la.J()+c)}.bind(a),b.Db())}
function Mu(a,b,c){if(null!=a.ia){var d=a.Ra.qu(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.Vl())};if(r(c)){var h=a.ia.Eq(c);if(null==h)throw Error("Invalid plane: ",h);e(a.ia.Eq(c),c)}else C(a.ia.rc,function(a,b){e(a,b)}.bind(a))}}f.sz=function(){this.S.ak("LEFT",W.CSS.sg,Bu,"2D Zoom",function(a){Fu(this);if(this.Zw=a="true"==a.getAttribute("checked").toString())this.S.Rw(Au),Iu(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.S.Jc(Bu)};
f.rz=function(){this.S.ak("LEFT",W.CSS.sg,Au,"2D Pan",function(a){Fu(this);if(this.Rv=a="true"==a.getAttribute("checked").toString())Hu(this),this.S.Rw(Bu)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.S.Jc(Au)};f.kz=function(a){this.S.ak("LEFT",W.CSS.sg,yu,"Toggle Crosshairs",function(a){this.YC("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.S.Jc(yu)};
f.pz=function(){this.hc[zu]=zu+"_"+B();this.K.yn(this.hc[zu],W.CSS.hx,W.CSS.sg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.fb[zu]=new Ns;this.fb[zu].n();var a=this.fb[zu].a();N(a,W.CSS.ix);this.K.K[this.hc[zu]].a().appendChild(a);this.fb[zu].Ll();a=new Js;a.n();a.jg("Enable 3D Rendering");a.u.ne(!0);this.fb[zu].bf(a.a(),"3D Rendering");F(a,"p",function(a){this.ia.tC("V",a.checked)}.bind(this));return a};
f.um=function(){Mu(this,function(a,b,c,d){Nu(this,b,d)}.bind(this))};
function Ou(a){null!=a.ia&&(Mu(a,function(a,c,d,e){var h=d.la,k=d.Od,l=d.Df;d=d.cd;h[W.ORIENTATION_KEY]=c;k[W.ORIENTATION_KEY]=c;l[W.ORIENTATION_KEY]=c;d[W.ORIENTATION_KEY]=c;Pu(this);Qu(this);Ru(h,e);Nu(this,h[W.ORIENTATION_KEY],e);Su(this,h);null!=a.Pa()&&(F(a.Pa(),"J",function(){Lu(this)}.bind(this)),F(h,"v",function(a){Ru(a.target,e);Nu(this,a.target[W.ORIENTATION_KEY],e);Su(this,a.target)}.bind(this)),F(k,"input",function(a){Tu(this,a.target,e);this.um()}.bind(this)),F(l,"input",function(){a.Pa().GC(l.J()/
100);this.um()}.bind(this)))}.bind(a)),a.ia.op())}
function Uu(a,b){var c=b.split("_")[0];null!=a.fb[c]&&(a.fb[c].Zc(),C(a.Wk[c],function(a){null!=a&&D(a,function(a){switch(c.toLowerCase()){case "levels":a instanceof Jq||null==a.u.k?a.update():a.u.k();break;case "volumes":var d=b.split("_")[0];a instanceof rt?(a.u.checked=a.Mb()[Hr]||!1,null==this.us&&(this.us=[]),-1==this.us.indexOf(a)&&this.us.push(a)):"Show Label Map"==a.Fb.innerHTML&&(a.Mb()[St.HAS_LABEL_MAP_KEY]?a.Mb().labelmap.visible&&!a.u.Sg()&&a.u.ne(!0):(R(a.a()),a.a().style.visibility=
"hidden",a.a().style.height="0px"),this.fb[d].Zc());a.update();break;case "meshes":a instanceof tt&&a.k();break;case "annotations":a instanceof tt&&(window.console.log("ANNOT",a),a.k())}}.bind(this))}.bind(a)))}f.wB=function(a,b){null==a.zz&&null==b||Uu(this,null!=b?b:a.zz)};
f.Qy=function(){var a,b={},c="DEFAULT_"+B();D(this.Wk.levels.all,function(c){levelMax=hist=null;a=c.Pl;folderStr="";D(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});if(c instanceof Jq)b[folderStr].Un=c;else if(c instanceof Js)b[folderStr].eq=c;else if(c instanceof tt){var e=c.Fb.innerHTML;-1<e.indexOf("Window Max")?b[folderStr].kD=c:-1<e.indexOf("Window Min")?b[folderStr].lD=c:-1<e.indexOf("Brightness")?b[folderStr].FF=c:-1<e.indexOf("Contrast")&&(b[folderStr].MF=c)}else b[folderStr].reset=
c}.bind(this));C(b,function(a){a.kD.u.H(a.Un.fA(Jq.LEVEL_CUTOFF));a.Un.update();C(a,function(b){b==a.lD||b==a.kD||b==a.FF||b==a.MF?b[c]=b.u.J():b==a.eq&&(b[c]=b.u.Sg());window.console.log(b,b[c])})});C(b,function(a){F(a.reset,"p",function(){C(a,function(a){a instanceof tt&&(a.ka.value=a[c],a.u.H(a[c]))});a.lD.Mb().windowLow=0;a.eq.u.ne(a.eq[c]);a.Un.Tr(a.eq[c]);window.console.log("\n\n",a.Un.Go);a.Un.update()})})};
function Ru(a,b){if(null!=b){var c=a[W.ORIENTATION_KEY],d="Y"==c||"Z"==c?a.ga()-a.J()-1:a.J()-1;"false"==b.reslicing.toString()&&("transverse"==b[J.ORIENTATION_KEY]&&"Z"==c?d+=2:"coronal"==b[J.ORIENTATION_KEY]&&"Y"==c?d+=2:"sagittal"==b[J.ORIENTATION_KEY]&&"X"==c&&(d+=1));b["index"+a[W.ORIENTATION_KEY]]=d}}function Vu(a,b,c,d,e){var h=a.ia.Eq(b).Pa();a=a.Ra.Sz().pu(b);b=null;null!=a&&(b=a[cr]);null!=b&&("vertical"==c?b.EC(h.sA(d,e)):"horizontal"==c&&b.FC(h.aA(d,e)))}
function Nu(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Vu(a,"Y","vertical",b,!0);Vu(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Vu(a,"X","vertical",b,!1);Vu(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Vu(a,"X","horizontal",b,!1),Vu(a,"Y","horizontal",b,!1)}}function Su(a,b){Mu(a,function(a,b,e){a=e.Od;e=e.la;a.yc(e.ga());a.qd(1);a.H(e.J())}.bind(a),b[W.ORIENTATION_KEY])}
function Lu(a){Mu(a,function(a,c,d){d.Df&&a.Pa()&&(a=a.Pa().yA(),d.Df.J(),d.Df.H(Math.round(100*a)))}.bind(a))}function Tu(a,b,c){null!=c&&Mu(a,function(a,c,h){h.la.H(b.J())}.bind(a),b[W.ORIENTATION_KEY])}function Du(a){Mu(a,function(a,c,d){null!=d.la&&d.la.H(d.la.ga()/2)}.bind(a))}
function Eu(a){Mu(a,function(a,c,d,e){if(null!=e[St.SLICE_TO_RAS_KEY]&&null!=d.la){slider=d.la;orientation=slider[W.ORIENTATION_KEY];a=e.bbox;e=e[St.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.$K[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.NF[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.BF[2]-a[4])/h);slider.H(Math.round(slider.ga()*h)+1)}}.bind(a))}
function Pu(a){var b,c;Mu(a,function(a,e,h,k){null!=h.la&&(c=h.la,b=c[W.ORIENTATION_KEY],null!=k&&(c.yc(a.Pa().kA()),c.qd(1),null!=b&&c.H(k["index"+b]+1)))})}function Qu(a){var b;Mu(a,function(a,d,e,h){null!=e.la&&(b=e.la,playbutton=e.Cj,null!=h&&playbutton.zC(b))})}f.AB=function(){Mu(this,function(a,b,c,d){Tu(this,c.Od,d);Lu(this)}.bind(this));this.um()};
f.Kw=function(a){var b=!1===a?0:1;Mu(this,function(a,d,e){vk(e.la.a(),200,b);vk(e.Od.a(),200,b);vk(e.cd.qg,200,b);vk(e.cd.Xf,200,b);vk(e.Df.a(),200,b)}.bind(this))};f.uI=function(){this.Kw(!1);this.K.jp(qu,!1)};f.rL=function(){this.Kw(!0);this.K.jp(qu,!0)};f.update=function(){this.Ra.pp()};f.YC=function(a){var b=!0==a?"visible":"hidden";Mu(this,function(a,d,e){null!=e.cd&&(e.cd.qg.style.visibility=b,e.cd.Xf.style.visibility=b)}.bind(this))};
f.bD=function(){null!=this.Ra&&null!=this.ia&&Mu(this,function(a,b,c,d){if(null!=c){var e=c.la;c=c.Od;e[W.ORIENTATION_KEY]=b;c[W.ORIENTATION_KEY]=b;null!=a.Pa()&&(Tu(this,c,d),e.k())}}.bind(this))};
f.UC=function(a){a.nC(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{oh:ms,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{oh:us,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{oh:qs,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{oh:ks,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{oh:ns,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{oh:rs,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{oh:ss,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{oh:is,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.oy(c,b.hb);this.Ra.ly(c,b.oh);"Four-Up"==c&&this.Ra.mC(c)}.bind(this));F(a,"item_selected",this.NJ.bind(this))};f.NJ=function(a){this.Ra.bi(a.title);null!=this.K&&null!=this.K.Cq()&&this.K.Cq().jw(a.target.cj.src)};function Wu(a,b){F(a.fb[b].ma,"c",function(a){this.wB(a,this.hc[b])}.bind(a))}
function Xu(a,b){F(b,"p",function(a){D(this.us,function(b){var e=b.Mb();b!==a.target?(b.u.checked=!1,e.visible=!1):(e.visible=!0,this.ia.TB(e))}.bind(this))}.bind(a))}function Yu(a,b){C(a.Wk[b],function(a,d){g(a)&&D(a,function(a){var c=a.Pl||[];"all"!==d&&0<c.length&&c.push(d);this.fb[b].bf(a.a(),c);a instanceof rt&&Xu(this,a)}.bind(this))}.bind(a))}
function Zu(a){a.fb=Qt();a.hc=vb(a.fb);C(a.fb,function(a,c){var d=!1;switch(c){case "volumes":0==this.ia.lu().length&&(d=!0);break;case "meshes":0==this.ia.ku().length&&(d=!0);break;case "annotations":0==this.ia.ju().length&&(d=!0)}d?tb(this.fb,c):(this.fb[c]=new Ns,this.fb[c].n(),this.hc[c]=c+"_"+B(),Yu(this,c),Wu(this,c))}.bind(a))}f.tz=function(){this.Wk=this.ia.Ye;Zu(this);$u(this);Ou(this)};
function $u(a){C(a.fb,function(a,c){var d=!1;C(this.Wk[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.K.yn(this.hc[c],W.CSS.hx,W.CSS.sg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+cb(c)+".png",cb(c),!1,!1);var e=this.fb[c].a();N(e,W.CSS.ix);this.K.K[this.hc[c]].a().appendChild(e);1<this.fb[c].ma.xu().length?this.fb[c].un():(this.fb[c].Ll(),this.fb[c].Zc());"levels"==c&&av(this)}}.bind(a))}
function av(a){var b=a.K.K[a.hc.levels];N(b.a(),W.CSS.RD);b.kw(W.CSS.SD);a.S.Jc(a.hc.levels);D(a.Wk.levels.all,function(a){if(!(a instanceof Jq||a instanceof At)){var b=a.Fb;null!=b&&(b.style.fontSize="9px");a.a().style.height="45px";a.u.a().style.top="28px";a.u.a().style.width="115px";null!=a.u.k&&a.u.k();a instanceof Js&&(b=a.Cl,a.a().style.height=15,a.a().style.outline="none",b.style.top=0,b.style.width=11,b.style.outline="none",b.style.left="calc(100% - 15px)")}}.bind(a));b.tr("right","top",4,
50);D(a.fb.levels.ma.xu(),function(a){a.Pw(10)});switch(a.S.Ab.Fl){case "Four-Up":case "Conventional":case "2D Row":case "2D Widescreen":a.S.Jc(a.hc.levels)}}
f.g=function(){W.d.g.call(this);document.removeEventListener("mousemove",this.Cw.bind(this));document.removeEventListener("mousemove",this.Cw);null!=this.mb&&(this.mb.g(),delete this.mb);null!=this.hc&&sb(this.hc);delete this.hc;null!=this.fb&&(C(this.fb,function(a){a.g()}),sb(this.fb));delete this.fb;sb(this.pd);delete this.pd;C(this.xk,function(a){C(a,function(a){Uc(a);delete a});sb(a)});sb(this.xk);delete this.xk;this.Uk&&(R(this.xf),delete this.xf);delete this.Uk;delete this.Wk;delete this.Zw;
delete this.Rv;delete this.S;delete this.ia;delete this.Ra;delete this.K};v("xiv.ui.ViewBoxInteractorHandler.EventType",{nN:"O",SM:"P",bO:"Q",uM:"R"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",Cu);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",W.ORIENTATION_KEY);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",W.prototype.lz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",W.prototype.sz);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",W.prototype.rz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",W.prototype.kz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",W.prototype.pz);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",W.prototype.um);v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",W.prototype.Qy);v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",W.prototype.AB);
v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",W.prototype.Kw);v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",W.prototype.uI);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",W.prototype.rL);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",W.prototype.update);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",W.prototype.YC);v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",W.prototype.bD);
v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",W.prototype.UC);v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",W.prototype.tz);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",W.prototype.g);function bv(){vc.call(this)}w(bv,vc);v("xiv.utils.ErrorCatcher",bv);
function cv(a){function b(a){a.target.g()}var c;g(a)||(a=[a]);null!=c&&!g(c)&&(c=[c]);var d=new $m;Pm(d,Rm);D(a,function(a){d.Uj(a)});null!=c&&D(c,function(a){d.pt(a)});d.oe("XImgView Error");d.aa(!0);d.a().style.position="fixed";d.a().style.opacity=0;uk(d.a(),400);d.Kh().style.opacity=0;vk(d.Kh(),400,.75);d.a().style.height="250px";a=T(d.a());d.a().style.top="calc(50% - "+a.height/2+"px)";d.a().style.left="calc(50% - "+a.width/2+"px)";Sc(d,Qm,b);Sc(d,"f",b)}
function dv(){var a,b='<a target="_blank" style="color: #5CB8E6"  href=';Zb()?(a="Internet Explorer",b+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">'):Wb("Chrome")||Wb("CriOS")?(a="Chrome",b+='"https://productforums.google.com/forum/#!msg/chrome/CgYesRogD4c/sU1TQsRgnWgJ">'):Wb("Firefox")?(a="Firefox",b+='"https://support.mozilla.org/en-US/questions/984663">'):$b()?(a="Safari",b+='"https://discussions.apple.com/thread/3300585?start=0">'):Yb()&&(a="Opera",b+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">');
cv('<br>It looks like <a target="_blank" style="color: #5CB8E6" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">Experimental-WebGL</a> is disabled.<br><br><br>'+(b+("How to enable WebGL in "+a+".</a>")))}bv.checkForWebGL=function(){var a=Q("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};f=bv.prototype;f.ez=[];f.Dm=null;f.vr=null;f.Mc=null;f.Xt=document.body;f.yv=null;f.sC=function(a){this.yv=a};
f.eC=function(a){this.Xt=a};function ev(a){Ib(a.ez);a.Dm=window.console.log;a.vr=function(){a.Dm.apply(this,arguments);var b="";D(arguments,function(a,d){0<d&&(b+=" ");b+=a});a.ez.push(b)};window.console.log=a.vr}f.vs=function(a){!0===a?(ev(this),window.onerror=this.xv.bind(this)):(window.onerror=void 0,null!=this.Dm&&(window.console.log=this.Dm,this.vr=this.Dm=null))};
f.xv=function(a,b,c){if(null==this.Mc){null!=this.yv&&this.yv();var d="",e="",d="<b>Render Error!</b><br><br>";r(a)&&(e+=a+"<br>");r(b)&&(e+="src: "+b+"<br>",u(c)&&(e+=" line: "+c+"<br>"));this.Mc=new $m;this.Mc.n(this.Xt);Pm(this.Mc,null);this.Mc.Uj(d);this.Mc.pt(e);Im(this.Mc,!0);this.Mc.aa(!0);this.Mc.a().style.opacity=0;this.Mc.cw();this.Mc.Zd();uk(this.Mc.a(),200);Sc(this.Mc,"f",function(a){a.target.g();this.Mc=null}.bind(this))}};f.clear=function(){null!=this.Mc&&(this.Mc.g(),delete this.Mc)};
f.g=function(){bv.d.g.call(this);this.clear();delete this.Dm;delete this.vr;delete this.Xt};
v("xiv.utils.ErrorCatcher.isCompatible",function(){var a=!0,b=ac(),c={Chrome:{ao:Wb("Chrome")||Wb("CriOS"),qo:11},IE:{ao:Zb(),qo:11},Safari:{ao:$b(),qo:5.1},Opera:{ao:Yb(),qo:12},Firefox:{ao:Wb("Firefox"),qo:4}},d=!1;C(c,function(c){c.ao&&!d&&1==Ya(c.qo,b)&&(cv("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>"),a=!1,d=!0)});a&&!bv.checkForWebGL()&&(dv(),
a=!1);return a});v("xiv.utils.ErrorCatcher.checkForWebGL",bv.checkForWebGL);v("xiv.utils.ErrorCatcher.EventType",{ERROR:"S"});v("xiv.utils.ErrorCatcher.prototype.setOnErrorCallback",bv.prototype.sC);v("xiv.utils.ErrorCatcher.prototype.setDialogParent",bv.prototype.eC);v("xiv.utils.ErrorCatcher.prototype.waitForError",bv.prototype.vs);v("xiv.utils.ErrorCatcher.prototype.clear",bv.prototype.clear);v("xiv.utils.ErrorCatcher.prototype.onError",bv.prototype.xv);
v("xiv.utils.ErrorCatcher.prototype.dispose",bv.prototype.g);E&&oc(8);function fv(){V.call(this);this.Jk=Q("div",{id:fv.ID_PREFIX+"_ProgBarHolder_"+B(),"class":fv.CSS.iE});Xh(this.a(),this.Jk);this.Tg=Q("div",{id:fv.ID_PREFIX+"_LabelHolder_"+B(),"class":fv.CSS.QD});Xh(this.a(),this.Tg);this.ph=new vr;this.ph.yb(this.Jk);N(Nh("progress-bar-thumb",this.Jk),fv.CSS.Is)}w(fv,V);v("xiv.ui.ProgressBarPanel",fv);fv.ID_PREFIX="xiv.ui.ProgressBarPanel";fv.CSS_SUFFIX={Is:"thumb",iE:"progbarholder",QD:"labelholder"};f=fv.prototype;f.io="";f.qw=!1;
f.jg=function(a){this.io=a;this.Tg.innerHTML=this.io};f.pw=function(a){this.qw=null!=a&&!1===a?!1:!0;this.H(this.ph.J())};f.H=function(a){this.ph.H(a);this.ph.a().childNodes[0].style.background="rgb(100,149,237)";this.Tg.innerHTML=this.io;this.qw&&(0<this.io.length&&(this.Tg.innerHTML+=" "),this.Tg.innerHTML+=this.ph.J().toString()+"%");Ah(this.Jk,"progress-bar-horizontal")};f.J=function(){return this.ph.J()};
f.f=function(){fv.d.f.call(this);null!=this.ph&&(this.ph.g(),delete this.ph);null!=this.Jk&&(R(this.Jk),delete this.Jk);null!=this.Tg&&(R(this.Tg),delete this.Tg);this.io=this.qw=null};v("xiv.ui.ProgressBarPanel.EventType",{});v("xiv.ui.ProgressBarPanel.ID_PREFIX",fv.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",fv.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",fv.prototype.jg);v("xiv.ui.ProgressBarPanel.prototype.showValue",fv.prototype.pw);
v("xiv.ui.ProgressBarPanel.prototype.setValue",fv.prototype.H);v("xiv.ui.ProgressBarPanel.prototype.getValue",fv.prototype.J);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",fv.prototype.f);function gv(){V.call(this)}w(gv,Ns);v("nrg.ui.ThumbnailGallery",gv);gv.ID_PREFIX="nrg.ui.ThumbnailGallery";gv.CSS_SUFFIX={ED:"dialog",Js:"thumbnail",Ls:"thumbnail-image",TN:"thumbnail-text"};var hv=B();f=gv.prototype;f.is=!1;f.uw=function(a){this.is=a;null!=this.ma&&this.is&&this.ma.ew(iv)};f.n=function(a){gv.d.n.call(this,a);jv(this);this.is&&this.ma.ew(iv)};
function iv(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=$h(a),d=b[hv].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[hv]&&(e=h[hv].toLowerCase(),e=Ka(d,e),0>e)){Zh(b,h);return}a.appendChild(b)}f.An=function(a,b){var c=new Ks;Ch(c.a(),yh(c.a()),this.tj);Ch(c.Se,yh(c.Se),this.Rk);Ch(c.Xa,yh(c.Xa),this.Qk);c.hw(a);c.To(b);return c};f.loop=function(a){C(this.Sb,function(b){a(b)})};f.gw=function(a){this.loop(function(b){Xh(a,b.Je())})};
f.xl=function(a,b){if(!pb(this.Sb,a)){this.Sb=this.Sb?this.Sb:{};this.Sb[a.a().getAttribute("id")]=a;this.ib.pn(a.Je());F(this.ib,"y",this.JJ.bind(this));a.a()[hv]=a.uu().toLowerCase();this.bf(a.a(),b);this.Zc();var c=a.Je();F(c,"mouseenter",function(){this.dispatchEvent({type:"T",Fj:a})}.bind(this));F(c,"mouseleave",function(){this.dispatchEvent({type:"U",Fj:a})}.bind(this))}};f.Ki=function(a,b,c){a=this.An(a,b);this.xl(a,c);kv(this,"image");kv(this,"text");kv(this,"thumbnail");this.Zc();return a};
f.Wo=function(){gv.d.Wo.call(this);F(this.hg,"mouseover",this.RC.bind(this))};f.RC=function(a){this.jv=a.clientX;this.kv=a.clientY};function lv(a){C(a.Sb,function(a){a.xo()});a.bp=null}f.JJ=function(){var a=document.elementFromPoint(this.jv,this.kv);(a=pi(a,null,Ks.Bc))?(a=a.id.replace("HOVERABLE_",""),this.bp!==a&&(lv(this),this.bp=a,this.Sb[this.bp].Br()),this.Sb[this.bp].aw()):lv(this)};
function kv(a,b){var c,d=[],e="";for(e in a.Sb){switch(b){case "thumbnail":d=a.tj;c=a.Sb[e].a();break;case "image":d=a.Qk;c=a.Sb[e].Xa;break;case "text":d=a.Rk,c=a.Sb[e].Se}Ch(c,yh(c),d)}}f.ry=function(a){null!=this.tj||jv(this);this.tj.push(a);kv(this,"thumbnail")};f.uy=function(a){this.Qk.push(a);kv(this,"image")};f.vy=function(a){this.Rk.push(a);kv(this,"text")};f.k=function(a){a&&pk(this.a(),a)};
function jv(a){var b=new Ks;a.tj=yh(b.a());a.tj.push(gv.CSS.Js);a.Qk=yh(b.Xa);a.Qk.push(gv.CSS.Ls);a.Rk=yh(b.Se);a.Rk.push(gv.CSS.Cx);R(b.a());delete b}f.f=function(){gv.d.f.call(this);delete this.is;null!=this.jv&&delete this.jv;null!=this.kv&&delete this.kv;null!=this.Sb&&(this.Cn(this.Sb),delete this.Sb);null!=this.ma&&(I(this.ma),this.ma.g(),delete this.ma);null!=this.tj&&(Ib(this.tj),delete this.tj);null!=this.Qk&&(Ib(this.Qk),delete this.Qk);null!=this.Rk&&(Ib(this.Rk),delete this.Rk);delete this.bp};
v("nrg.ui.ThumbnailGallery.ID_PREFIX",gv.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",gv.CSS_SUFFIX);v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",hv);v("nrg.ui.ThumbnailGallery.thumbnailSorter",iv);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",gv.prototype.uw);v("nrg.ui.ThumbnailGallery.prototype.render",gv.prototype.n);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",gv.prototype.An);v("nrg.ui.ThumbnailGallery.prototype.loop",gv.prototype.loop);
v("nrg.ui.ThumbnailGallery.prototype.setHoverParent",gv.prototype.gw);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",gv.prototype.xl);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",gv.prototype.Ki);v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",gv.prototype.Wo);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",gv.prototype.ry);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",gv.prototype.uy);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",gv.prototype.vy);
v("nrg.ui.ThumbnailGallery.prototype.updateStyle",gv.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",gv.prototype.f);function mv(){V.call(this)}w(mv,V);v("xiv.ui.ViewableGroupMenu",mv);mv.ID_PREFIX="xiv.ui.ViewableGroupMenu";mv.CSS_SUFFIX={tp:"header",Js:"thumbnail",Cx:"thumbnail-text",Ls:"thumbnail-image",zE:"thumbnailgallery",sp:"background"};f=mv.prototype;f.U=null;f.Tc=null;f.Wl=null;
f.n=function(a){mv.d.n.call(this,a);this.Tc=Q("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});N(this.Tc,this.constructor.CSS.sp);null!=this.a().parentNode?Xh(this.a().parentNode,this.Tc):Xh(this.a(),this.Tc);this.Wl=Q("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":mv.CSS.tp});this.Wl.innerHTML="<b> Select View <b>";Xh(this.a(),this.Wl);null!=this.U||this.reset()};f.xq=function(){return this.Tc};f.show=function(){uk(this.a(),cm.cM)};
f.Ki=function(a,b){null!=this.U||this.reset();var c=this.U.Ki(a,b);nv(this,c);return c};f.Yl=function(){xk(this.a(),500);R(this.a())};f.reset=function(){null!=this.U&&(this.U.g(),delete this.U);this.U=new gv;this.U.uw(!0);this.U.n(this.a());N(this.U.a(),mv.CSS.zE);this.U.ry(mv.CSS.Js);this.U.uy(mv.CSS.Ls);this.U.vy(mv.CSS.Cx)};function nv(a,b){F(b,"D",function(){this.dispatchEvent({type:"V",Hw:b})}.bind(a))}
f.f=function(){mv.d.f.call(this);null!=this.Tc&&(R(this.Tc),delete this.Tc);null!=this.Wl&&(R(this.Wl),delete this.Wl);null!=this.U&&(this.U.g(),delete this.U)};v("xiv.ui.ViewableGroupMenu.ID_PREFIX",mv.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{pO:"V"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",mv.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",mv.prototype.n);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",mv.prototype.xq);v("xiv.ui.ViewableGroupMenu.prototype.show",mv.prototype.show);
v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",mv.prototype.Ki);v("xiv.ui.ViewableGroupMenu.prototype.hide",mv.prototype.Yl);v("xiv.ui.ViewableGroupMenu.prototype.reset",mv.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",mv.prototype.f);var ov;function pv(a,b,c,d,e){this.Hg=a;this.Ak=b;this.Ly=c;this.xF=d;this.Ao=e}pv.prototype.getName=function(){return this.Ak};function qv(a){return!a.Ak||"[object Object]"==a.Hg}
function rv(a){var b=[a.Hg?sv(a.Hg)+".":"",a.Ak?sv(tv(a.Ak)):"anonymous",sv(a.xF),a.Ly?" [as "+sv(tv(a.Ly))+"]":""];if(a.Ao)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.Ao.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',sv(a.Ao),"', '",c,"'); return false\">",sv(a.Ao),"</a>")}else b.push(sv(a.Ao));return b.join("")}
var uv=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,vv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,wv=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
xv=/^function ([a-zA-Z_$][\w$]*)/,yv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function zv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(xv),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");r(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new pv("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function Av(a){var b=a.match(uv);if(b)return new pv(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new pv("",e,"",d,h)}return(b=a.match(vv))?new pv("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(wv))?new pv(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(yv))?new pv("",b[1]||"","","",b[2]||
""):null}function tv(a){return ov?ov(a):a}function sv(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Bv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){ov=a});function Cv(a,b){return a==b}function Dv(a,b){return a.toString()===b.toString()}var Ev={String:Cv,Number:Cv,Boolean:Cv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:Dv,Function:Dv};function Fv(a,b,c){return Math.abs(a-b)<=c}var Gv={Number:Fv};
function Hv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function Iv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+Hv(a)+")");return b}function Jv(a,b){return b.length==a+1?b[0]:null}function Kv(a,b,c){return c.length==b+1?c[a]:c[a-1]}function Lv(a,b){b.length==a||b.length==a+1&&r(b[0])||Mv(null,"Incorrect arguments passed to assert function")}
function Tv(a,b){var c="Expected "+Iv(a)+" but was "+Iv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function Uv(a,b){Lv(1,arguments);var c=Jv(1,arguments),d=Kv(1,1,arguments);ia(d)||Mv(c,"Bad argument to assert(boolean)");d||Mv(c,"Call to assert(boolean) with false")}function Vv(a,b){Lv(1,arguments);var c=Jv(1,arguments),d=Kv(1,1,arguments);ia(d)||Mv(c,"Bad argument to assertTrue(boolean)");d||Mv(c,"Call to assertTrue(boolean) with false")}function Wv(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments),h=Tv(d,e);d===e||Mv(Jv(2,arguments),h)}
function Xv(a,b){Lv(1,arguments);var c="Expected not to be "+Iv(null);null!==Kv(1,1,arguments)||Mv(Jv(1,arguments),c)}function Yv(a,b){Lv(1,arguments);var c="Expected not to be "+Iv(void 0);void 0!==Kv(1,1,arguments)||Mv(Jv(1,arguments),c)}
function Zv(a,b,c){function d(a,b,c){for(var q=0;q<h.length;++q){var t=h[q]===a,s=k[q]===b;if(t||s){t&&s||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(q=Hv(a),t=Hv(b),q==t){var s="Array"==q,z=l(q,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(s&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(s?"[%s]":c?".%s":"%s"),a.__iterator__)ja(a.Jl)?a.Jl(b)||e.push("equals() returned false for "+(c||
q)):a.wb?d(a.wb,b.wb,z.replace("%s","map_")):e.push("unable to check "+(c||q)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)s&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||t)));for(y in b)s&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||q));if(s)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+Tv(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=Ev[a])?a(b,c)?"":Tv(b,c):null};d(a,b,"");return 0==e.length?null:Tv(a,b)+"\n   "+e.join("\n   ")}function $v(a,b,c){Lv(2,arguments);var d=Jv(2,arguments)?Jv(2,arguments):"",e=Zv(Kv(1,2,arguments),Kv(2,2,arguments));!e||Mv(d,e)}function aw(a,b,c,d){Lv(3,arguments);var e=Kv(1,3,arguments),h=Kv(2,3,arguments),k=Kv(3,3,arguments);Fv(e,h,k)||Mv(Jv(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function bw(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function cw(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function dw(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function Mv(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new ew(a,b);}
function ew(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=Bv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new pv("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(Av(c[e]));c=d}else c=zv();for(d=c.length-1;c[d]&&qv(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(rv(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,ew):this.stack=Error().stack||""}w(ew,Error);ew.prototype.toString=function(){return this.message};v("fail",function(a){Mv("Call to fail()",a)});v("assert",Uv);
v("assertThrows",function(a,b){Lv(1,arguments);var c=Kv(1,1,arguments),d=Jv(1,arguments);"function"==typeof c||Mv(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&r(e.stacktrace)&&r(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}Mv(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){Lv(1,arguments);var c=Jv(1,arguments),d=Kv(1,1,arguments);"function"==typeof d||Mv(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",Mv(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",Vv);
v("assertFalse",function(a,b){Lv(1,arguments);var c=Jv(1,arguments),d=Kv(1,1,arguments);ia(d)||Mv(c,"Bad argument to assertFalse(boolean)");!d||Mv(c,"Call to assertFalse(boolean) with true")});v("assertEquals",Wv);v("assertNotEquals",function(a,b,c){Lv(2,arguments);var d=Kv(2,2,arguments),e="Expected not to be "+Iv(d);Kv(1,2,arguments)!==d||Mv(Jv(2,arguments),e)});v("assertNull",function(a,b){Lv(1,arguments);var c=Kv(1,1,arguments),d=Tv(null,c);null===c||Mv(Jv(1,arguments),d)});
v("assertNotNull",Xv);v("assertUndefined",function(a,b){Lv(1,arguments);var c=Kv(1,1,arguments),d=Tv(void 0,c);void 0===c||Mv(Jv(1,arguments),d)});v("assertNotUndefined",Yv);v("assertNotNullNorUndefined",function(a,b){Lv(1,arguments);Xv.apply(null,arguments);Yv.apply(null,arguments)});v("assertNonEmptyString",function(a,b){Lv(1,arguments);var c=Kv(1,1,arguments),d="Expected non-empty string but was "+Iv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||Mv(Jv(1,arguments),d)});
v("assertNaN",function(a,b){Lv(1,arguments);isNaN(Kv(1,1,arguments))||Mv(Jv(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){Lv(1,arguments);!isNaN(Kv(1,1,arguments))||Mv(Jv(1,arguments),"Expected not NaN")});v("assertObjectEquals",$v);
v("assertObjectRoughlyEquals",function(a,b,c,d){Lv(3,arguments);var e=Kv(3,3,arguments),h=Jv(3,arguments)?Jv(3,arguments):"",k=Zv(Kv(1,3,arguments),Kv(2,3,arguments),function(a,b,c){return(a=Gv[a])?a(b,c,e)?"":Tv(b,c)+" which was more than "+e+" away":null});!k||Mv(h,k)});v("assertObjectNotEquals",function(a,b,c){Lv(2,arguments);var d=Jv(2,arguments)?Jv(2,arguments):"";Zv(Kv(1,2,arguments),Kv(2,2,arguments))||Mv(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments),h=Jv(2,arguments)?Jv(2,arguments):"",k=Hv(d);"Array"==k||Mv(h,"Expected an array for assertArrayEquals but found a "+k);k=Hv(e);"Array"==k||Mv(h,"Expected an array for assertArrayEquals but found a "+k);$v(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments),h=Jv(2,arguments)?Jv(2,arguments):"";if(d){Wv("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)Wv("mismatch at index "+k+": "+h,d[k],e[k])}else Uv(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){Lv(3,arguments);var e=Kv(1,3,arguments),h=Kv(2,3,arguments),k=Kv(3,3,arguments),l=Jv(3,arguments)?Jv(3,arguments):"";if(e){Wv("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)aw(l,e[n],h[n],k)}else Uv(l,!h)});
v("assertSameElements",function(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments),h=Jv(2,arguments);Vv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ha(d)&&ha(e));d=bw(d);e=bw(e);d.length==e.length||Mv(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=bw(d),l=0;l<e.length;l++){var n=cw(k,e[l]);-1!=n||Mv(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){Lv(1,arguments);Kv(1,1,arguments)||Mv(Jv(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){Lv(1,arguments);Kv(1,1,arguments)&&Mv(Jv(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){Lv(2,arguments);var d=Kv(2,2,arguments),e=dw(Kv(1,2,arguments)),d=dw(d),h=Tv(e,d);e===d||Mv(Jv(2,arguments),h)});
v("assertHashEquals",function(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments),h=Jv(2,arguments),k;for(k in d)k in e||Mv(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||Mv(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||Mv(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",aw);
v("assertContains",function(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments);-1!=cw(e,d)||Mv(Jv(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments);-1==cw(e,d)||Mv(Jv(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){Lv(2,arguments);var d=Kv(1,2,arguments),e=Kv(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||Mv(Jv(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function fw(){V.call(this);this.qb=[];this.Ap={};this.Gb={XN:null,Km:null,tg:null,tD:null,dM:null,uD:null,qE:null,AE:null};this.Gb.Km=Q("div",{id:fw.ID_PREFIX+"_menu_top_left_"+B(),"class":fw.CSS.dE,viewbox:this.a().id});Xh(this.a(),this.Gb.Km);this.xb=Q("div",{id:fw.ID_PREFIX+"_ViewFrame_"+B(),"class":fw.CSS.LE});Xh(this.a(),this.xb);this.Rb=new fv;Xh(this.xb,this.Rb.a());this.Rb.a().style.opacity=0;gw(this.Rb);this.k();this.Su()}w(fw,V);v("xiv.ui.ViewBox",fw);fw.ID_PREFIX="xiv.ui.ViewBox";
fw.CSS_SUFFIX={DM:"hidden",MN:"tabdragger",NN:"tabdragger-handle",NE:"viewlayoutmenu",dE:"menu-top-left",cE:"menu-left",ME:"viewlayouthandler",ON:"ziptabs",PN:"ziptab-bounds",LE:"viewframe",dx:"component-highlight",GE:"viewablegroupmenu",wM:"emptymenubutton"};var hw={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=fw.prototype;f.XI="empty";f.Nd=null;f.Ra=null;f.Ab=null;f.ia=null;f.Rb=null;f.vd=null;f.K=null;f.mh=null;f.ye=null;f.JA=!1;f.ys=!1;f.zm=null;f.Ik=null;f.Am=null;
f.fm=!1;f.js=!1;f.OI=function(){return this.fm};f.Pa=function(){return this.ia};f.jH=function(){return this.Gb};f.dH=function(){return this.XI};f.bI=function(){return this.qb};f.YH=function(){return this.xb};f.bH=function(){return this.Ra};f.cH=function(){return this.Ab};f.$H=function(){return this.vd};f.am=function(){N(this.xb,fw.CSS.dx)};f.Cm=function(){Ah(this.xb,fw.CSS.dx)};f.PH=function(){return this.sj};f.Ku=function(){return null!=this.sj};f.Gt=function(){this.sj=void 0};
f.aG=function(a){this.au=this.au?this.au:[];this.au.push(a)};f.bi=function(a){this.Ab.Ro(a)};f.cK=function(){this.Rb.H(0);this.Rb.pw(!0);iw(this,this.Rb,0);this.am()};function jw(a,b){a.Rb.jg("");a.Rb.pw(!0);a.Rb.H(100*b)}
f.Gv=function(a){if(this.ys)jw(this,.5*a.value+.5);else if(1<this.Am){var b=1/this.Am;if(.96<a.value&&this.Ik!=a.value&&.96>this.Ik&&this.Ik<a.value)this.zm++,jw(this,b*this.zm);else{this.Ik=a.value;var b=1/this.Am,c=b*this.zm+a.value*b;this.Ik<a.value&&jw(this,c+a.value*b)}}else jw(this,a.value)};
f.Dr=function(){this.mh.vs(!1);D(Mh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.fm=this.ys=!1;this.K.mz();this.K.Cq().jw(this.Ab.cj.src);this.ye.lz();this.ye.Qy();var a=[this.Gb.tg,this.Ab.a(),this.Ra.a()],a=Lb(a,this.K.wA()),b=[this.Rb.a()];if("demo"!=cm.MODE){var c=this.ia.Tl();if(!0==c[J.SINGLE_FRAME_SCAN]){this.bi("Transverse");var d=ws(this.Ra);D(d,function(a){-1==a.id.indexOf("ZoomDisplay")&&(a.style.visibility="hidden")});R(this.Ab.a())}else null!=this.qb[0].Db()?this.bi(this.qb[0].Db()):
null!=c[J.ORIENTATION_KEY]&&this.bi(cb(this.ia.Tl()[J.ORIENTATION_KEY]));c[J.SINGLE_FRAME_SCAN]||(a=Lb(a,ws(this.Ra)))}var e=[],h=[],k=[],l=[];D(a,function(){e.push(0);h.push(1)});D(b,function(){k.push(1);l.push(0)});Mk(Lb(a,b),Lb(e,k),Lb(h,l),400,null,null,function(){this.Rb.H(0);gw(this.Rb,0);this.dispatchEvent("X");this.Cm();this.js=!1;this.k();this.Ar()}.bind(this))};f.Cv=function(a){C(this.ia.rc,function(b,c){null!=a.Nw[c]&&(b.Mk(a.Nw[c]),b.k())})};
f.Ar=function(){this.ia&&this.ia.k();null!=this.ye&&this.ye.update();null!=this.ia&&this.ye.AB()};function kw(a,b){a.vd.reset();sb(a.Ap);Hb(a.qb,b)||a.qb.push(b);1==a.qb.length&&a.bi(hw[b.Of]);var c=b.Oc,d=null;1<c.length?(D(c,function(a,b){d=this.vd.Ki(a.wm,a.Gd()||b);this.Ap[ma(d)]=a}.bind(a)),gw(a.Rb,0),iw(a,a.vd,400)):a.load(c[0],!1)}f.TG=function(){return 700};function lw(a,b){xu("Scans with frame counts greater than 700 may crash the Viewer.&nbspAre you sure you want to continue?",a.xb,b)}
function mw(a,b){xu("ViewBox in use.&nbspProceed anyway?",a.xb,b)}function nw(a,b,c){var d=function(){this.load(b,c)}.bind(a),e=b.Oc[0];if(null!=e.vA){var h=700<e.wd[0].Uf().length;if("scans"==e.Of.toLowerCase()&&h&&!a.js)return lw(a,function(){this.js=!0;d()}.bind(a)),!1}return a.Ku()?(mw(a,function(){this.Gt();d()}.bind(a)),!1):!0}
f.load=function(a,b){gw(this.Rb,0);null!=this.mh?(this.mh.clear(),this.mh.vs(!1)):(this.mh=new bv,this.mh.eC(this.xb),this.mh.sC(this.Er.bind(this)));this.dispatchEvent("W");if(!(a instanceof Sl)||nw(this,a,b))if(this.fm=!0,null!=a){if(null!=b?b:1)ow(this),pw(this),this.K=new pu(this),this.Ra=new vs,this.Ra.a().style.opacity=0,Xh(this.xb,this.Ra.a()),N(this.Ra.a(),fw.CSS.ME),F(this.Ra,"C",this.Ar.bind(this)),F(this.Ra,"z",this.Cv.bind(this)),F(this.Ra,"B",this.Dv.bind(this)),F(this.Ra,"A",this.Bv.bind(this)),
this.ia=new St,qw(this),this.ye=new W(this,this.ia,this.Ra,this.K),this.ye.UC(this.Ab),this.JA=!0;gw(this.vd,400);iw(this,this.Rb,0);if(a instanceof Sl)kw(this,a);else{var c;C(this.ia.rc,function(a,b){(c=this.Ra.Tz(b))&&a.ra(c.a())}.bind(this));Sc(this.ia,"r",this.cK.bind(this));Sc(this.ia,"t",this.Dr.bind(this));F(this.ia,"s",this.Gv.bind(this));this.zm=null;"scans"==a.Of.toLowerCase()?rw(this,a):(this.am(),sw(this,a),tw(this,a))}}else this.Er("The data set is empty!")};
function sw(a,b){a.zm=0;a.Ik=0;a.Am=b.wd.length+8;D(b.wd,function(a){null!=a.Rd.labelMapFile&&this.Am++}.bind(a))}
function rw(a,b){iw(a,a.Rb,0);jw(a,0);a.ys=!0;var c=a.qb[a.qb.length-1].rA(),d=b.wd[0].Uf()[0],e="";null!=d?(-1!=d.toLowerCase().indexOf("xiv/sample-data/scans/")?(d=d.split("xiv/sample-data/scans/"),e=d[0]+"xiv/sample-data/scans/"+(d[1].split("/")[0]+".zip")):e=d.split("/files/")[0]+"/files",window.console.log("XImgView Zip Downloading (XHR): "+e),xl(e,function(a){window.console.log("Downloaded: "+e+"!");b.wd[0].fC(a,function(){tw(this,b)}.bind(this),em)}.bind(a),function(a){this.am();0<a.totalSize?
jw(this,a.loaded/a.totalSize*.5):0<c&&jw(this,a.loaded/c*.5)}.bind(a))):a.mh.xv("No readable files in the data set!")}function tw(a,b){a.mh.vs(!0);a.ia.n(b);a.sj=(new Date).getTime()}f.Er=function(){this.fm=!1;this.Cm();gw(this.Rb);ow(this);this.Gt();this.dispatchEvent({type:"Y"})};f.Dv=function(){C(this.ia.rc,function(a){a.k()});this.ye.update()};f.Bv=function(a){var b=a.frames;C(this.ia.rc,function(a,d){null!=b[d]&&(a.Mk(b[d].a()),a.k())}.bind(this));this.ye.update()};
function gw(a,b){if(null!=a){b=u(b)&&0<=b?b:0;var c=function(){a.a().style.visibility="hidden";R(a.a());null!=a.xq&&R(a.Tc)};"hidden"==a.a().style.visibility||0==b?c():(xk(a.a(),b,c),null!=a.xq&&xk(a.Tc,b,c))}}function iw(a,b,c){c=u(c)&&0<=c?c:0;b.a().style.opacity="0";b.a().style.visibility="visible";Xh(a.xb,b.a());0==c?b.a().style.opacity="1":(uk(b.a(),c,function(){}),null!=b.xq&&(Xh(a.xb,b.Tc),uk(b.Tc,c,function(){})))}f.ps="Info. Display;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");
function uw(a,b,c,d){var e=$h(b),h=[],k;D(a.ps,function(){h.push(null)});h[d]=c;D(e,function(a){k=this.ps.indexOf(a.title);h[k]=a}.bind(a));Yh(b);D(h,function(a){null!=a&&b.appendChild(a)})}
f.Vj=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Gb.Km;break;case "LEFT":d=this.Gb.tg;break;case "BOTTOM_LEFT":d=this.Gb.tD;break;case "TOP_RIGHT":d=this.Gb.AE;break;case "RIGHT":d=this.Gb.qE;break;case "BOTTOM_RIGHT":d=this.Gb.uD}u(c)?d.insertBefore(b,d.childNodes[c]):(a=this.ps.indexOf(b.title),0<a?uw(this,d,b,a):Xh(d,b));vw(this)};
f.mm=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?N(a,a.getAttribute(tu)):Ah(a,a.getAttribute(tu));null!=b&&b(a)};f.XC=function(a){return"true"==this.Nd[a].getAttribute("checked").toString()};f.wu=function(a){return this.Nd[a]};f.Jc=function(a){Ln(this.Nd[a])};f.Rw=function(a){g(a)||(a=[a]);D(a,function(a){null!=this.Nd[a]&&this.XC(a)&&Ln(this.Nd[a])}.bind(this))};
f.ak=function(a,b,c,d,e,h){var k=b+"-on",l=Q("img",b);l.id=jj(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(tu,b+"-on");N(l,k);pk(l,{cursor:"pointer"});F(l,"click",function(){this.mm(l,e)}.bind(this));this.Vj(a,l);if(null==this.Nd)this.Nd={};else if(null!=this.Nd[c])throw Error("Invalid identifier for toggle button.  In use.");return this.Nd[c]=l};
function pw(a){a.Gb.tg=Q("div",{id:fw.ID_PREFIX+"_menu_left_"+B(),"class":fw.CSS.cE,viewbox:a.a().id});a.Gb.tg.style.opacity=0;Xh(a.a(),a.Gb.tg);a.Ab=new gp;a.Ab.dC("Select Layout");N(a.Ab.a(),fw.CSS.NE);a.Ab.iB(!0);a.Ab.a().style.opacity=0;a.Ab.ge.style.opacity=0;var b=a.Ab.a();Nb(a.ps,void 0,0,b.title);a.Vj("LEFT",b);a.xb.appendChild(a.Ab.ge)}
function qw(a){a.vd=new mv;a.vd.n(a.xb);Xh(a.xb,a.vd.a());Xh(a.xb,a.vd.Tc);N(a.vd.a(),fw.CSS.GE);F(a.vd,"V",function(a){this.load(this.Ap[ma(a.Hw)],!1)}.bind(a));gw(a.vd)}f.RH=function(){return this.Nd};function vw(a){var b,c,d,e;null!=a.Gb.Km&&(d=a.Gb.Km,e=T(d),b=0,c=e.height);null!=a.Gb.tg&&(d=a.Gb.tg,e=T(d),a=a.v.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.k=function(a){fw.d.k.call(this,a);null!=this.Ra&&this.Ra.k();this.ia&&this.ia.k();null!=this.Ab&&(a=Ci(this.Gb.tg),T(this.Ab.ge),a=a.y-130,this.Ab.jC(0,a),this.Ab.yC(0,a));vw(this);null!=this.K&&this.K.update();null!=this.ye&&this.ye.bD()};
function ow(a){sb(a.Ap);Ib(a.qb);null!=a.Ra&&(I(a.Ra),zc(a.Ra.g()),delete a.Ra);null!=a.K&&a.K.g();null!=a.Ab&&(I(a.Ab),a.Ab.g(),delete a.Ab);null!=a.ia&&(a.ia.g(),delete a.ia);null!=a.vd&&(a.vd.g(),delete a.vd);null!=a.ye&&a.ye.g();null!=a.Nd&&(R(a.Gb.tg),delete a.Gb.tg,C(a.Nd,function(a){I(a);R(a)}),Ib(a.Nd),delete a.Nd)}f.Qh=!1;f.Zq=function(){return this.Qh};f.Su=function(){F(this.a(),"mouseenter",function(){this.Qh=!0}.bind(this));F(this.a(),"mouseleave",function(){this.Qh=!1}.bind(this))};
f.f=function(){fw.d.f.call(this);ow(this);null!=this.Rb&&(this.Rb.g(),delete this.Rb);R(this.xb);I(this.xb);delete this.xb;C(this.Gb,function(a,b){R(a);delete this.Gb[b]}.bind(this));delete this.Gb;delete this.CO;delete this.JA;delete this.ys;delete this.Qh;delete this.zm;delete this.Ik;delete this.Am;delete this.js};v("xiv.ui.ViewBox.EventType",{JE:"W",HE:"X",lN:"Y"});v("xiv.ui.ViewBox.ID_PREFIX",fw.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",fw.CSS_SUFFIX);v("xiv.ui.ViewBox.defaultLayout",hw);
v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",fw.prototype.Pa);v("xiv.ui.ViewBox.prototype.getMenus",fw.prototype.jH);v("xiv.ui.ViewBox.prototype.getLoadState",fw.prototype.dH);v("xiv.ui.ViewBox.prototype.getViewableTrees",fw.prototype.bI);v("xiv.ui.ViewBox.prototype.getViewFrame",fw.prototype.YH);v("xiv.ui.ViewBox.prototype.getLayoutHandler",fw.prototype.bH);v("xiv.ui.ViewBox.prototype.getLayoutMenu",fw.prototype.cH);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",fw.prototype.$H);v("xiv.ui.ViewBox.prototype.highlight",fw.prototype.am);v("xiv.ui.ViewBox.prototype.unhighlight",fw.prototype.Cm);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",fw.prototype.PH);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",fw.prototype.Gt);v("xiv.ui.ViewBox.prototype.doNotHide",fw.prototype.aG);v("xiv.ui.ViewBox.prototype.setLayout",fw.prototype.bi);v("xiv.ui.ViewBox.prototype.load",fw.prototype.load);
v("xiv.ui.ViewBox.prototype.addToMenu",fw.prototype.Vj);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",fw.prototype.mm);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",fw.prototype.XC);v("xiv.ui.ViewBox.prototype.getToggleButton",fw.prototype.wu);v("xiv.ui.ViewBox.prototype.getHighFrameCountThreshold",fw.prototype.TG);v("xiv.ui.ViewBox.prototype.fireToggleButton",fw.prototype.Jc);v("xiv.ui.ViewBox.prototype.untoggle",fw.prototype.Rw);v("xiv.ui.ViewBox.prototype.createToggleButton",fw.prototype.ak);
v("xiv.ui.ViewBox.prototype.getToggleButtons",fw.prototype.RH);v("xiv.ui.ViewBox.prototype.isMouseOver",fw.prototype.Zq);v("xiv.ui.ViewBox.prototype.isRendering",fw.prototype.OI);v("xiv.ui.ViewBox.prototype.isInUse",fw.prototype.Ku);v("xiv.ui.ViewBox.prototype.showInUseDialog",fw.prototype.EP);v("xiv.ui.ViewBox.prototype.updateStyle",fw.prototype.k);v("xiv.ui.ViewBox.prototype.disposeInternal",fw.prototype.f);function ww(){Dn.call(this)}w(ww,Dn);ww.prototype.Tj=function(a,b){var c=new Jn(a,b);c.Oo(this);this.eo.push(c);this.fj&&En(this,c)};function xw(){V.call(this)}w(xw,V);v("xiv.ui.ViewBoxHandler",xw);xw.CSS_SUFFIX={HD:"handle",KE:"viewboxdragclone",wj:"closebutton",bx:"addrowbutton",ax:"addcolumnbutton"};xw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=xw.prototype;f.Ds=5;f.tx=5;f.bl=document.body;f.ij=function(a,b){this.dispatchEvent({type:"aa",tB:a,sF:b})};f.ZK=function(){return this.B.length};f.Kn=function(){var a=[];D(this.B,function(b,c){a.push([]);D(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.B&&D(this.B,function(b,c){D(b,function(d,e){a(d,c,e,this.B.length,b.length)}.bind(this))}.bind(this))};f.Hu=function(a,b){this.B||(this.B=[[]]);var c=0,d=[],e;if(null!=a)c=yw(this,a),this.B[c.Qq].length<this.tx&&(d.push(zw(this)),Nb(this.B[c.Qq],c.RI+1,0,d[0]));else{d=[];e=this.B.length?this.B.length:1;for(c=0;c<e;c++)d.push(zw(this));0===this.B.length?this.B.push([d[0]]):D(this.B,function(a,b){a.push(d[b])})}this.ij(d,void 0===b?!0:b);Aw(this)};
f.QK=function(a){this.B&&(a=void 0===a?!0:a,this.B[0]&&1<this.B[0].length&&D(this.B,function(a){var c=a.length-1;Bw(this,a[c]);a.splice(c,1)}.bind(this)),this.ij(null,a),Aw(this))};function yw(a,b){for(var c=0,d=0,e=a.B.length,h=0,c=0;c<e;c++)for(d=0,h=a.B[c].length;d<h;d++)if(b===a.B[c][d])return{Qq:c,RI:d}}f.Os=function(){for(var a=0,b=0,c=this.B.length,d=0,a=0;a<c;a++)for(b=0,d=this.B[a].length;b<d;b++)if(this.B[a][b].fm)return!0;return!1};
f.insertRow=function(a,b){this.B||(this.B=[[]]);var c=[],d,e;if(null!=a){var h=yw(this,a),c=[];e=this.B[h.Qq].length;if(this.B.length<this.Ds){for(d=0;d<e;d++)c.push(zw(this));Nb(this.B,h.Qq+1,0,c)}}else if(e=this.B[0]&&this.B[0].length?this.B[0].length:1,this.B.length<this.Ds){for(d=0;d<e;d++)c.push(zw(this));this.B.push(c)}this.ij(c,void 0===b?!0:b);Aw(this)};
f.SK=function(a){this.B&&(a=void 0===a?!0:a,1<this.B.length&&(D(this.B[this.B.length-1],function(a){Bw(this,a)}.bind(this)),this.B.splice(this.B.length-1,1)),this.ij(null,a),Aw(this))};f.Hq=function(a){for(var b=0,c=0,d=this.B.length,e=0,b=0;b<d;b++)for(c=0,e=this.B[b].length;c<e;c++)if(a===this.B[b][c].a())return this.B[b][c]};f.WH=function(a,b){return this.B[a][b].a()};f.UH=function(a,b){return this.B[a][b]};f.uA=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.tA=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.DC=function(a){this.bl=a};
function zw(a){var b=new fw;Xh(a.bl,b.a());Cw(a,b);var c=Q("img",{id:xw.ID_PREFIX+"_dragHandle_"+B(),"class":xw.CSS.HD});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.Vj("TOP_LEFT",c,1);a.ek||(a.ek={});a.ek[b.a().id]=c;c.title="Drag / Swap ViewBox";Dw(a,b);Ew(a,b);F(b,"X",a.Lv.bind(a));F(b,"W",a.Mv.bind(a));F(b,"Y",a.Er.bind(a));return b}
function Ew(a,b){var c=Q("img",{id:xw.ID_PREFIX+"_CloseButton_"+B(),"class":xw.CSS.ax,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});rk(c,xw.CSS.ax+"-hovered");F(c,"click",function(){this.Hu(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Vj("TOP_LEFT",c,1);a.iy||(a.iy={});a.iy[b.a().id]=c;c.title="Add ViewBox Column"}
function Dw(a,b){var c=Q("img",{id:xw.ID_PREFIX+"_CloseButton_"+B(),"class":xw.CSS.bx,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});rk(c,xw.CSS.bx+"-hovered");F(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Vj("TOP_LEFT",c,1);a.qy||(a.qy={});a.qy[b.a().id]=c;c.title="Add ViewBox Row"}
function Cw(a,b){var c=Q("img",{id:xw.ID_PREFIX+"_CloseButton_"+B(),"class":xw.CSS.wj,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});rk(c,xw.CSS.wj+"-hovered");F(c,"click",function(){Fw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Vj("TOP_LEFT",c,1);a.tn||(a.tn={});a.tn[b.a().id]=c;c.title="Close ViewBox"}f.Lv=function(a){this.dispatchEvent({type:"$",OE:a.target})};f.Ns=function(a,b){this.loop(function(c){Hb(c.qb,a)&&b(c)})};f.Mv=function(a){this.dispatchEvent({type:"Z",OE:a.target})};
f.Er=function(a){this.dispatchEvent(a)};function Bw(a,b){vk(b.a(),150,0);R(a.ek[b.a().id]);R(a.tn[b.a().id]);b.g()}function Gw(a,b){var c=[],d;Bw(a,b);D(a.B,function(a){d=[];D(a,function(a){a.dk||d.push(a)}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.B=c;a.ij(null,!0);Aw(a)}function Fw(a,b){1!=a.vB()&&(b.Ku()?Gw(a,b):mw(b,function(){Gw(this,b)}.bind(a)))}f.Lu=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.vB=function(){var a=0;this.loop(function(){a++});return a};
f.VH=function(a){for(var b=0,c=0,d=this.B.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.B[b].length;c<e;c++)if(this.B[b][c]===a)return e=b+1===this.B.length,h=c+1===this.B[b].length,e&&h?this.B[0][0]:e&&!h?this.B[0][c+1]:!e&&h?this.B[b+1][0]:this.B[b+1][c+1]};f.Zz=function(){var a;this.loop(function(b){null!=a||null!=b.sj||(a=b)}.bind(this));if(null!=a)return a;var b=this.uA();g(b)?b.sort(function(a,b){return a.sj<b.sj?-1:a.sj>b.sj?1:0}):b=[b];return b[0]};
function Hw(a,b,c){var d=new ek,e=a.wg[b.id],h=a.wg[c.id];b[Iw]=!0;c[Iw]=!0;d.add(new Tj(b,[b.offsetLeft,b.offsetTop],[h.x,h.y],300,sk));d.add(new Tj(c,[c.offsetLeft,c.offsetTop],[e.x,e.y],300,sk));Sc(d,"end",function(){b[Iw]=!1;c[Iw]=!1;Jw(this);for(var a,d,e,h,m=0,q=0,t=this.B.length,s,z;m<t;m++)for(q=this.B[m],s=q.length,q=0;q<s;q++)z=this.B[m][q],this.Lu(z,b)&&(a=m,d=q),this.Lu(z,c)&&(e=m,h=q);u(a)&&u(e)&&(m=this.B[a][d],this.B[a][d]=this.B[e][h],this.B[e][h]=m,m=T(this.B[a][d].a()),t=T(this.B[e][h].a()),
Ni(this.B[e][h].a(),m),Ni(this.B[a][d].a(),t))}.bind(a));d.play()}f.Ft=function(){this.be&&(Fn(this.be),Fn(this.Fh),delete this.be,delete this.Fh)};function Kw(a){a.loop(function(a){null!=a.a()&&(this.be.Tj(this.ek[a.a().id]),this.Fh.Tj(a.a()))}.bind(a))}function Aw(a){a.Ft();a.be=new ww;a.Fh=new ww;Kw(a);var b=a.be,c=a.Fh;b.Gw.push(c);c.br=!0;b.ar=!0;a.be.ra();a.Fh.ra();a.be.Mt=a.Nt.bind(a);F(a.be,"dragstart",a.EJ.bind(a));F(a.be,"dragover",a.wv.bind(a));F(a.be,"dragend",a.vv.bind(a))}f.Nt=function(a){return Lw(Jh(a.getAttribute("viewboxid")))};
f.EJ=function(){null!=this.wg?sb(this.wg):this.wg={};Jw(this)};function Lw(a){var b=document.body;a=a.cloneNode(!1);a.className=xw.CSS.KE;b&&b.appendChild(a);return a}var Iw=B();xw.prototype.wv=function(a){if(a.Hl.element.id!==a.rq.Li.getAttribute("viewboxid")){var b=Jh(a.rq.Li.getAttribute("viewboxid"));a=Jh(a.Hl.element.id);b[Iw]||a[Iw]||Hw(this,b,a)}};function Jw(a){a.loop(function(a){this.wg[a.a().id]=Ci(a.a())}.bind(a))}
xw.prototype.vv=function(a){var b=a.rq.Qa.fk;a=Jh(a.rq.Li.getAttribute("viewboxid"));a=Ki(a);a={left:a.x,top:a.y};var c=Lw(b);Xh(this.bl.parentNode?this.bl.parentNode:this.bl,c);b=mk(b);pk(c,{top:b.top,left:b.left,"z-index":1E4});Mw(c,a).play();Nw(this);this.ij()};function Mw(a,b){var c=new ek;c.add(new Tj(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,sk));F(c,"end",function(){R(a)});return c}function Nw(a){a.loop(function(a){this.ek[a.a().id].style.visibility="visible"}.bind(a))}
xw.prototype.f=function(){xw.d.f.call(this);this.loop(function(a){I(a);R(a.a());a.g()}.bind(this));D(this.B,function(a){Ib(a)});Ib(this.B);delete this.B;this.qq(this.ek);delete this.ek;this.qq(this.tn);delete this.tn;C(this.wg,function(a,b){sb(this.wg[b]);delete this.wg[b]}.bind(this));sb(this.wg);delete this.wg;null!=this.be&&(I(this.be),this.be.g());delete this.be;null!=this.Fh&&(I(this.Fh),this.Fh.g());delete this.Fh;delete this.bl};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",xw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{JE:"Z",HE:"$",oO:"aa"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",xw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",xw.prototype.Ds);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",xw.prototype.tx);v("xiv.ui.ViewBoxHandler.prototype.rowCount",xw.prototype.ZK);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",xw.prototype.Kn);v("xiv.ui.ViewBoxHandler.prototype.loop",xw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",xw.prototype.Hu);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",xw.prototype.QK);v("xiv.ui.ViewBoxHandler.prototype.insertRow",xw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",xw.prototype.SK);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",xw.prototype.Hq);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",xw.prototype.WH);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",xw.prototype.UH);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",xw.prototype.uA);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",xw.prototype.tA);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",xw.prototype.DC);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",xw.prototype.Ns);v("xiv.ui.ViewBoxHandler.prototype.isMatch",xw.prototype.Lu);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",xw.prototype.vB);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",xw.prototype.VH);
v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",xw.prototype.Zz);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxesRendering",xw.prototype.Os);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",xw.prototype.f);function Ow(a){Ks.call(this);this.cC(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.Sw.bind(this));this.Cf=a;Pw(this);this.zn()}w(Ow,Ks);v("xiv.ui.Thumbnail",Ow);Ow.ID_PREFIX="xiv.ui.Thumbnail";Ow.CSS_SUFFIX={};Ow.prototype.Sw=function(){var a=Kh("img",Ks.CSS.ki,this.Je()),a=a[0];a.src=this.Xa.src};Ow.prototype.zn=function(){Ow.d.zn.call(this);N(this.Je(),Ow.Gm)};
function Pw(a){var b="",c=a.Cf.me;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=c.Name)b=c.Name;else if(null!=a.Cf.$h)var d=a.Cf.$h.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");D(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.To(e)}Ow.prototype.ZH=function(){return this.Cf};Ow.prototype.f=function(){Ow.d.f.call(this);this.Cf.g();delete this.Cf};
v("xiv.ui.Thumbnail.ID_PREFIX",Ow.ID_PREFIX);v("xiv.ui.Thumbnail.CSS_SUFFIX",Ow.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.updateHoverable",Ow.prototype.Sw);v("xiv.ui.Thumbnail.prototype.createHoverable",Ow.prototype.zn);v("xiv.ui.Thumbnail.prototype.getViewable",Ow.prototype.ZH);v("xiv.ui.Thumbnail.prototype.disposeInternal",Ow.prototype.f);function Qw(){V.call(this);this.wf=new ww;this.ng=new ww;this.wf.Mt=this.Nt.bind(this);F(this.wf,"dragover",this.wv.bind(this));F(this.wf,"dragend",this.vv.bind(this));F(this.wf,"dragout",this.DJ.bind(this));F(this.ng,"drop",this.FJ.bind(this));var a=this.wf,b=this.ng;a.Gw.push(b);b.br=!0;a.ar=!0;this.ng.ra();this.wf.ra()}w(Qw,gv);v("xiv.ui.ThumbnailGallery",Qw);Qw.ID_PREFIX="xiv.ui.ThumbnailGallery";Qw.CSS_SUFFIX={Ks:"thumbnail-dragging"};var Rw="THUMBNAIL_DRAGGER_"+B(),Sw=Rw+"_FADER"+B();f=Qw.prototype;
f.wf=null;f.ng=null;f.Ki=function(a,b){var c=this.An(a);this.xl(c,b);return c};f.An=function(a){var b=new Ow(a);F(b,"D",function(){this.dispatchEvent({type:"fa",Fj:b})}.bind(this));return b};f.xl=function(a,b){Qw.d.xl.call(this,a,b);var c=a.Je();c&&this.wf.Tj(c)};f.cz=function(){Fn(this.ng)};f.sy=function(a){this.ng.Tj(a)};f.ty=function(a){D(a,function(a){this.sy(a)}.bind(this))};f.NH=function(a){return this.Sb[a.id]};
f.Ft=function(){null!=this.wf&&(Fn(this.wf),this.wf.g());null!=this.ng&&(Fn(this.ng),this.ng.g())};f.Nt=function(a){a=pi(a,"div",Ow.Bc).id.replace("HOVERABLE_","");if(a in this.Sb)return this.Sb[a].setActive(!0,!0),a=this.Sb[a].a().cloneNode(!0),a.setAttribute("id",Rw+a.id),N(a,Qw.CSS.Ks),a};f.wv=function(a){this.dispatchEvent({type:"da",Iw:a.Hl.element})};f.DJ=function(a){this.dispatchEvent({type:"ea",Iw:a.Hl.element})};
f.vv=function(){var a=Mh(Qw.CSS.Ks);D(a,function(a){xk(a,300,function(){R(a)})});null!=a[0]&&this.Sb[a[0].id.replace(Rw,"")].setActive(!1,!0)};f.FJ=function(a){var b=Nh(Qw.CSS.Ks);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);R(b);a.Hl.element&&this.dispatchEvent({type:"ga",Fj:this.Sb[b.id.replace(Rw,"")],JL:a.Hl.element})}};f.f=function(){Qw.d.f.call(this);this.Ft()};
v("xiv.ui.ThumbnailGallery.EventType",{Es:"ba",ZM:"ca",VN:"da",UN:"ea",SN:"fa",WN:"ga"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",Qw.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",Qw.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",Rw);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",Sw);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Qw.prototype.Ki);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",Qw.prototype.An);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",Qw.prototype.xl);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",Qw.prototype.cz);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",Qw.prototype.sy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",Qw.prototype.ty);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",Qw.prototype.NH);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",Qw.prototype.f);function Tw(){var a=ri(Gh());a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()};function Uw(a,b,c,d){Zc.call(this);this.lb=c||Gh();this.Il=a;this.qf=[];this.IL=b?b:Vw;this.eD=!!d;this.df()}w(Uw,Zc);var Vw=0;f=Uw.prototype;
f.df=function(){this.Il.className="goog-tabpane";for(var a=[],b=ai(this.Il);b;)a.push(b),b=ci(b);this.ce=this.lb.w("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.kc=this.lb.w("div","goog-tabpane-cont");this.Il.appendChild(this.kc);b=this.Il;switch(this.IL){case Vw:b.insertBefore(this.ce,this.kc);b.insertBefore(Ww(this),this.kc);bl(b,"goog-tabpane-top");break;case 1:b.appendChild(this.ce);b.appendChild(Ww(this));bl(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.ce,this.kc);bl(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.ce,this.kc);bl(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.ce.tabIndex=0;F(this.ce,this.eD?"mousedown":"click",this.wr,!1,this);F(this.ce,"keydown",this.xr,!1,this);for(var c=0;b=a[c];c++)Xw(this,new Yw(b))};
function Ww(a){var b=Gh(void 0),c=null,d=b.qa;E&&d.createStyleSheet?(c=d.createStyleSheet(),Ui(c)):(d=Lh(b.qa,"head",void 0,void 0)[0],d||(c=Lh(b.qa,"body",void 0,void 0)[0],d=b.w("head"),c.parentNode.insertBefore(d,c)),c=b.w("style"),Ui(c),b.appendChild(d,c));return a.lb.w("div","goog-tabpane-clear")}f.f=function(){Uw.d.f.call(this);Tc(this.ce,this.eD?"mousedown":"click",this.wr,!1,this);Tc(this.ce,"keydown",this.xr,!1,this);delete this.Il;this.kc=this.ce=null};
function Xw(a,b){b.Qa&&b.Qa!=a&&b.Qa instanceof Uw&&Zw(b.Qa,b);var c=a.qf.length;ca(void 0)&&void 0!=c?(c=void 0,a.qf.splice(c,0,b),a.ce.insertBefore(b.Qi,a.ce.childNodes[c])):(a.qf.push(b),a.ce.appendChild(b.Qi));b.Po(a,c);a.$g||(a.$g=b,a.dispatchEvent(new $w("change",a,a.$g)));a.kc.appendChild(b.kc);ax(b,b==a.$g);for(var d=c+1;c=a.qf[d];d++)c.Yn=d}function Zw(a,b){u(b)&&(b=a.qf[b]);a.qf.splice(b.Yn,1);b.Po(null);R(b.Qi);R(b.kc);for(var c,d=0;c=a.qf[d];d++)c.Po(a,d)}
function bx(a,b){if(0<=b&&b<a.qf.length){var c=a.qf[b];!c.isEnabled()||a.$g&&c==a.$g||(ax(a.$g,!1),ax(c,!0),a.$g=c,a.dispatchEvent(new $w("change",a,a.$g)))}}f.Ia=function(){return this.kc||null};f.a=function(){return this.Il||null};f.wr=function(a){for(var b=a.target;b!=this.ce;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);bx(this,c);break}b=b.parentNode}a.preventDefault()};
f.xr=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.$g.Yn-1;bx(this,0>a?this.qf.length-1:a);break;case 39:a=this.$g.Yn+1;bx(this,a>=this.qf.length?0:a);break;case 36:bx(this,0);break;case 35:bx(this,this.qf.length-1)}};function Yw(a,b,c){var d,e;if(r(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=ai(a))d=mi(b),b.parentNode.removeChild(b);e=a}this.lb=c||Gh();this.kc=e||this.lb.w("div");this.Qi=this.lb.w("li",null,d);this.Yn=this.Qa=null;this.Hc=!0}f=Yw.prototype;
f.Gd=function(){return mi(this.Qi)};f.oe=function(a){gi(this.Qi,a)};f.qA=function(){return this.Qi};f.Ia=function(){return this.kc};f.getParent=function(){return this.Qa};f.pc=function(a){this.Hc=a;this.Qi.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Hc};function ax(a,b){a.isEnabled()&&(a.kc.style.display=b?"":"none",a.Qi.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.Po=function(a,b){this.Qa=a;this.Yn=ca(b)?b:null};
function $w(a,b,c){Cc.call(this,a,b);this.page=c}w($w,Cc);function Z(a){V.call(this);if(null!=a){var b=a;if(!r(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==cx.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||dx}w(Z,V);v("nrg.ui.Tabs",Z);var cx=["TOP","BOTTOM","LEFT","RIGHT"],dx=cx[0];Z.ID_PREFIX="nrg.ui.Tabs";Z.CSS_SUFFIX={bc:"tab",oi:"tab-active",Bf:"page",hE:"page-content",vp:"page-active",hb:"icon",Zk:"icon-active",LD:"icon-content",zN:"scrollgallery"};
function ex(a,b,c,d,e){this.vj=!1;this.TITLE=a;this.bc=b;this.hb=c;this.Bf=d;this.oh=e}f=Z.prototype;f.mf=0;f.nm=0;f.Ld=null;f.n=function(a){Z.d.n.call(this,a);this.ok=new Uw(this.a());this.M=[];N(this.a(),Z.Bc)};f.IH=function(){return this.M.length};f.YG=function(){return this.mf};f.wH=function(){return this.nm};f.Fq=function(){var a=[];D(this.M,function(b){a.push(b.bc)});return a};f.Gq=function(){var a=[];D(this.M,function(b){a.push(b.Bf)});return a};
f.JH=function(){var a=[];D(this.M,function(b){a.push(b.hb)});return a};f.pF=function(a){D(a,function(a){this.wl(a)}.bind(this))};f.reset=function(){for(var a=this.M.length;0<a;)Zw(this.ok,a-1),a--;this.WO()};f.Ew=function(a){if(null==this.M)return!1;for(var b=0,c=this.M.length;b<c;b++)if(this.M[b].TITLE==a)return!0;return!1};
f.wl=function(a){this.M=null!=this.M?this.M:[];if(this.Ew(a))throw Error(a+" is an already existing tab!");var b;b=Q("div",{id:"Tab_"+B(),"class":Z.CSS.bc,title:a});Xh(this.a(),b);var c=Q("div",{id:"TabIcon_"+B(),"class":Z.CSS.hb}),d=Q("div",{"class":Z.CSS.LD},a);Xh(c,d);Xh(b,c);d=Q("div",{id:"TabPage_"+B(),"class":Z.CSS.Bf,label:a});pk(d,nk(this.a(),"width"));Xh(this.a().parentNode,d);var e=new Yw(d,a);Xw(this.ok,e);this.M.push(new ex(a,b,c,d,e));fx(this);gx(this);hx(this);this.ck();this.setActive(0);
this.k()};f.AC=function(a,b){this.Ew(a)||this.wl(a);var c;a:if(null!=this.M){c=0;for(var d=this.M.length;c<d;c++)if(this.M[c].TITLE==a){c=this.M[c];break a}c=void 0}else c=!1;b instanceof Ms?(d=b,c.Bf.appendChild(b.a())):(d=new Ms,d.n(c.Bf),d.bf(b));N(d.a(),Z.CSS.hE);this.k()};function fx(a){D(a.M,function(a){I(a.bc)}.bind(a))}function gx(a){D(a.M,function(a,c){F(a.bc,"click",function(){this.ck();this.setActive(c)}.bind(this))}.bind(a))}
function hx(a){D(a.M,function(a,c){ix(this,c);jx(this,c)}.bind(a))}function ix(a,b){F(a.M[b].bc,"mouseover",function(){!0!==this.M[b].vj&&(N(this.M[b].bc,Z.CSS.oi),N(this.M[b].bc,uj(Z.CSS.oi,this.orientation)),N(this.M[b].hb,Z.CSS.Zk))}.bind(a))}function jx(a,b){F(a.M[b].bc,"mouseout",function(){!0!==this.M[b].vj&&(Ah(this.M[b].bc,Z.CSS.oi),Ah(this.M[b].bc,uj(Z.CSS.oi,this.orientation)),Ah(this.M[b].hb,Z.CSS.Zk))}.bind(a))}
f.setActive=function(a){this.M[a].vj=!0;this.nm=this.mf;this.mf=a;bx(this.ok,a);N(this.M[a].bc,Z.CSS.oi);N(this.M[a].bc,uj(Z.CSS.oi,this.orientation));N(this.M[a].Bf,Z.CSS.vp);N(this.M[a].Bf,uj(Z.CSS.vp,this.orientation));N(this.M[a].hb,Z.CSS.Zk);N(this.M[a].hb,uj(Z.CSS.Zk,this.orientation))};
f.wz=function(a){this.M[a].vj=!1;bx(this.ok,0);Ah(this.M[a].bc,Z.CSS.oi);Ah(this.M[a].bc,uj(Z.CSS.oi,this.orientation));Ah(this.M[a].Bf,Z.CSS.vp);Ah(this.M[a].Bf,uj(Z.CSS.vp,this.orientation));Ah(this.M[a].hb,Z.CSS.Zk);Ah(this.M[a].hb,uj(Z.CSS.Zk,this.orientation))};f.ck=function(){D(this.M,function(a,b){this.wz(b)}.bind(this))};
f.k=function(){if(this.a().parentNode){N(this.a(),Z.Bc);N(this.a(),uj(Z.Bc,this.orientation));D(this.M,function(a){N(a.bc,uj(Z.CSS.bc,this.orientation));N(a.hb,uj(Z.CSS.hb,this.orientation));N(a.Bf,uj(Z.CSS.Bf,this.orientation))}.bind(this));switch(this.orientation){case "TOP":kx(this);break;case "BOTTOM":this.JP();break;case "RIGHT":lx(this)}if(0<this.M.length){var a=T(this.M[0].bc);0<a.width&&0<a.height&&(this.Ld=a)}}};
function lx(a){D(a.M,function(a){this.a().parentNode&&pk(a.bc,{height:(100/this.M.length).toString()+"%"})}.bind(a))}function kx(a){var b;D(a.M,function(a,d){this.a().parentNode&&(b=100/this.M.length,pk(a.bc,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function mx(a){D(a.M,function(a){C(a,function(c,d){I(c);c.f?c.g():c.g&&c.g();delete c;delete a[d]});sb(a);delete a});Ib(a.M)}
f.f=function(){Z.d.f.call(this);D(this.Fq(),function(a){I(a)}.bind(this));mx(this);delete this.M;I(this.ok);this.ok.g();delete this.ok;delete this.mf;delete this.nm;delete this.IP;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",cx);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",dx);v("nrg.ui.Tabs.ID_PREFIX",Z.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",Z.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",ex);v("nrg.ui.Tabs.prototype.tabSize",Z.prototype.Ld);v("nrg.ui.Tabs.prototype.render",Z.prototype.n);
v("nrg.ui.Tabs.prototype.getTabCount",Z.prototype.IH);v("nrg.ui.Tabs.prototype.getLastActiveTab",Z.prototype.YG);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",Z.prototype.wH);v("nrg.ui.Tabs.prototype.getTabElements",Z.prototype.Fq);v("nrg.ui.Tabs.prototype.getTabPages",Z.prototype.Gq);v("nrg.ui.Tabs.prototype.getTabIcons",Z.prototype.JH);v("nrg.ui.Tabs.prototype.addTabs",Z.prototype.pF);v("nrg.ui.Tabs.prototype.reset",Z.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",Z.prototype.Ew);
v("nrg.ui.Tabs.prototype.addTab",Z.prototype.wl);v("nrg.ui.Tabs.prototype.setTabPageContents",Z.prototype.AC);v("nrg.ui.Tabs.prototype.setActive",Z.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",Z.prototype.wz);v("nrg.ui.Tabs.prototype.deactivateAll",Z.prototype.ck);v("nrg.ui.Tabs.prototype.updateStyle",Z.prototype.k);v("nrg.ui.Tabs.prototype.disposeInternal",Z.prototype.f);function nx(a){Z.call(this,a)}w(nx,Z);v("nrg.ui.ZipTabs",nx);nx.ID_PREFIX="nrg.ui.ZipTabs";f=nx.prototype;f.n=function(a){nx.d.n.call(this,a);N(this.a(),uj(nx.Bc,this.orientation));this.Cc=new Sq(this.a(),this.orientation);ox(this);a=Mh("goog-tabpane-tabs",this.a());D(a,function(a){a.style.visibility="hidden"})};f.ai=function(a){this.Cc.ai(a);this.k()};f.Q=function(){return this.Cc};
function ox(a){F(a.Cc,"resize",function(a){this.Bh();if(null!=this.Ld){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.Ld.height-this.v.height)?this.ck():this.setActive(this.mf);break;case "LEFT":case "RIGHT":var c=36>=Math.abs(this.Ld.width-this.v.width)&&this.hq;4>=Math.abs(this.Ld.width-this.v.width)||c?this.ck():this.setActive(this.mf)}this.dispatchEvent({type:"resize",size:a.size,Qe:a.Qe})}}.bind(a))}f.hq=!1;
f.Xb=function(a,b,c){this.k();a?(this.setActive(b||0),this.Cc.tf(this.orientation,"MAX",null,c)):(this.ck(),this.Cc.tf(this.orientation,"MIN",null,c))};f.k=function(){nx.d.k.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.Ld&&this.Cc.oC(this.Ld.height);break;case "LEFT":case "RIGHT":null!=this.Ld&&this.Cc.qC(this.Ld.width)}this.Cc.update()};
f.wl=function(a){nx.d.wl.call(this,a);1==this.Fq().length&&this.k();D(this.Fq(),function(a){F(a,"click",function(){if(null!=this.Ld)switch(this.k(),this.Bh(),this.orientation){case "BOTTOM":4>=Math.abs(this.v.height-this.Ld.height)?(this.setActive(this.mf),this.Cc.tf("BOTTOM","MAX",void 0)):this.mf==this.nm&&this.Cc.tf("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.v.height-this.Ld.height)?(this.setActive(this.mf),this.Cc.tf("TOP","MAX",void 0)):this.mf==this.nm&&this.Cc.tf("TOP","MIN",
void 0);break;case "RIGHT":null!=this.Ld&&(4>=Math.abs(this.v.width-this.Ld.width)?(this.hq=!1,this.setActive(this.mf),this.Cc.tf("RIGHT","MAX",void 0)):this.mf==this.nm&&(this.hq=!0,this.Cc.tf("RIGHT","MIN",void 0)))}}.bind(this))}.bind(this));this.ck();this.k()};f.f=function(){nx.d.f.call(this);I(this.Cc);this.Cc.g();delete this.Cc;delete this.hq};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{yD:"ha"});
v("nrg.ui.ZipTabs.ID_PREFIX",nx.ID_PREFIX);v("nrg.ui.ZipTabs.prototype.render",nx.prototype.n);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",nx.prototype.ai);v("nrg.ui.ZipTabs.prototype.getResizable",nx.prototype.Q);v("nrg.ui.ZipTabs.prototype.setExpanded",nx.prototype.Xb);v("nrg.ui.ZipTabs.prototype.updateStyle",nx.prototype.k);v("nrg.ui.ZipTabs.prototype.addTab",nx.prototype.wl);v("nrg.ui.ZipTabs.prototype.disposeInternal",nx.prototype.f);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function px(){V.call(this);this.Wc=px.ModalStates.xj}w(px,V);v("xiv.ui.Modal",px);px.ModalStates={we:"fullscreen",Ze:"popup",As:"fullscreen-popup",xg:"windowed",xj:"demo",DD:"demp-fullscreen"};px.ID_PREFIX="xiv.ui.Modal";px.CSS_SUFFIX={sp:"background",nM:"columnmenu",oN:"rowmenu",oM:"button",pN:"button",jE:"projecttab",kE:"projecttab-bounds",lE:"projecttab-dragger",mE:"projecttab-dragger-handle",cx:"addsubjects"};
function qx(){var a={};C(rx,function(b,c){a[c]=px.ID_PREFIX+"."+cb(b.key)+".Button"});var b=Qk(nb(a)),c={};C(a,function(a,e){c[e]=b[a];var h=uj(a);b[a].className=h});return c}var rx={Yk:{key:"CLOSE",title:"Close XNAT Image Viewer."},we:{key:"FULLSCREEN",title:"Enter full-screen mode."},Ze:{key:"POPUP",title:"Popup to new window."},xg:{key:"WINDOWED",title:"Exit full-screen mode."}};f=px.prototype;f.Vn=29;f.ts=29;f.qr=320;f.rr=320;f.XH=function(){return this.Ca};f.OH=function(){return this.U};
f.yH=function(){return this.ac};f.vH=function(){return this.$.Ze};f.yG=function(){return this.$.Yk};f.OG=function(){return this.$.we};f.n=function(a){px.d.n.call(this,a);this.RA();this.Ca.Hu(null,!1);this.qc(this.Wc)};
f.qc=function(a){null!=this.Wc&&(this.Lr=this.Wc);this.Wc=a;null!=this.Lr&&Ah(this.a(),uj(this.constructor.Bc,this.Lr));N(this.a(),uj(this.constructor.Bc,this.Wc));this.Wc==px.ModalStates.xj?(this.$.we.style.visibility="hidden",this.$.xg.style.visibility="hidden"):this.Wc==px.ModalStates.xg?(this.$.we.style.visibility="visible",this.$.xg.style.visibility="hidden"):this.Wc==px.ModalStates.Ze?(this.$.Ze.style.visibility="hidden",this.$.Yk.style.visibility="hidden",this.$.we.style.visibility="visible",
this.$.xg.style.visibility="hidden"):this.Wc==px.ModalStates.As?(this.$.Ze.style.visibility="hidden",this.$.we.style.visibility="hidden",this.$.xg.style.visibility="visible"):this.Wc==px.ModalStates.we&&(this.$.Ze.style.visibility="visible",this.$.we.style.visibility="hidden",this.$.xg.style.visibility="visible");this.k()};f.Ul=function(){return this.Wc};f.aj=function(){this.U.loop(function(a){a.setActive(!1);this.Ca.loop(function(b){-1<b.qb.indexOf(a.Cf)&&a.setActive(!0)})}.bind(this))};
f.Oy=function(){sx(this);this.Cb=null!=this.Cb?this.Cb:[];this.kb=null!=this.kb?this.kb:new ek;tx(this);ux(this);F(this.kb,"end",this.PJ.bind(this));D(this.Cb,function(a){this.kb.add(a)}.bind(this));this.kb.play();this.aj()};f.PJ=function(){D(this.Cb,function(a){this.kb.remove(a);I(a);a.ae();a.g()}.bind(this));Ib(this.Cb);this.k();vx(this)};function vx(a){a.Ca.loop(function(a){0==a.a().style.opacity&&uk(a.a(),300)})}
function tx(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.Cb.push(new Tj(b,[b.offsetLeft,b.offsetTop],[this.xa.Qb.yg[d][e],this.xa.Qb.Ae[d][e]],300,sk))}.bind(a))}function ux(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.Cb.push(new Uj(b,[b.offsetWidth,b.offsetHeight],[this.xa.Qb.Ij[d][e],this.xa.Qb.Hm[d][e]],300,sk))}.bind(a))}
function sx(a){a.xa=null!=a.xa?a.xa:{};a.Bh();a.xa.hp={};a.xa.hp.Ij=Math.round(T(a.ac.a()).width);a.xa.hp.Hm=Math.round(a.v.height-2*a.ts);a.xa.hp.Ae=Math.round(a.ts);wx(a);xx(a)}function wx(a){a.xa.Qb={};a.xa.Qb.Ij=a.Ca.Kn();a.xa.Qb.Hm=a.Ca.Kn();a.Ca.loop(function(a,c,d,e,h){this.xa.Qb.Ij[c][d]=Math.round((this.v.width-this.xa.hp.Ij-this.Vn)/h-this.Vn);this.xa.Qb.Hm[c][d]=Math.round((this.v.height-(e+1)*this.Vn)/e)}.bind(a))}
function xx(a){a.xa.Qb.yg=a.Ca.Kn();a.xa.Qb.Ae=a.Ca.Kn();a.xa.Qb.xE=a.xa.hp.Ij+a.ts;var b=0;a.Ca.loop(function(a,d,e){b=this.xa.Qb.xE+e*(this.xa.Qb.Ij[d][e]+this.ts);this.xa.Qb.yg[d][e]=b;this.xa.Qb.Ae[d][e]=d*(this.xa.Qb.Hm[d][e]+this.Vn);window.console.log();this.xa.Qb.Ae[d][e]+=this.Vn}.bind(a))}f.k=function(){sx(this);this.ac&&this.ac.k();yx(this);this.aj();this.U.k();this.U.Zc()};
function yx(a){a.Ca&&a.Ca.loop(function(a,c,d){pk(a.a(),{height:this.xa.Qb.Hm[c][d],width:this.xa.Qb.Ij[c][d],left:this.xa.Qb.yg[c][d],top:this.xa.Qb.Ae[c][d]});a.k()}.bind(a))}
f.RA=function(){var a=Q("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=px.CSS.sp;this.a().appendChild(a);this.Fs=Q("div");Xh(this.a(),this.Fs);N(this.Fs,px.CSS.kE);this.ac=new nx("RIGHT");this.ac.n(this.a());N(this.ac.a(),px.CSS.jE);this.U=new Qw;this.U.uw(!0);this.U.gw(this.a());var b;b=b||F;b(this.U,"T",this.nK.bind(this));b(this.U,"U",this.oK.bind(this));b(this.U,"fa",this.hK.bind(this));b(this.U,"da",this.kK.bind(this));b(this.U,"ea",this.jK.bind(this));b(this.U,"ga",this.mK.bind(this));
this.U.n(this.ac.a());this.ac.AC("Project Browser",this.U);this.ac.ai(this.Fs);a=this.ac.Q().nd("RIGHT");N(a,px.CSS.lE);this.ac.Q().Sl("RIGHT").rC(5);Xh(a,Q("div",{id:fw.ID_PREFIX+"_DraggerHandle_"+B(),"class":px.CSS.mE}));F(this.ac,"resize",this.k.bind(this));F(this.ac,"resize_end",this.k.bind(this));this.Ca=new xw;this.Ca.DC(this.a());var c;c=c||F;c(this.Ca,"Z",this.Mv.bind(this));c(this.Ca,"$",this.Lv.bind(this));c(this.Ca,"aa",this.ij.bind(this));F(this.Ca,"Y",this.zK.bind(this));zx(this)};
function zx(a){a.$=qx();C(a.$,function(a){Xh(this.a(),a)}.bind(a));Ax(a);a.$.Yk.innerHTML="<img src="+a.dj+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.$.we.innerHTML="<img src="+a.dj+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.$.xg.innerHTML="<img src="+a.dj+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.$.Ze.innerHTML="<img src="+a.dj+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.gy=function(){this.Ah=Q("div",{id:px.ID_PREFIX+"_addSubjects_"+B(),"class":px.CSS.cx},"+ Load all subjects in project");this.ac.Gq()[0].appendChild(this.Ah);rk(this.Ah,px.CSS.cx+"-hovered");var a=this.ac.Gq()[0],b=$h(a)[0];T(a);T(b);T(this.Ah);b.style.height="calc(100% - 70px)";F(this.Ah,"click",this.wJ.bind(this))};f.wJ=function(){this.dispatchEvent({type:"g"});xk(this.Ah,150,function(){Bx(this);var a=this.ac.Gq()[0];$h(a)[0].setAttribute("style","");this.U.Zc()}.bind(this))};
function Bx(a){null!=a.Ah&&(R(a.Ah),I(a.Ah),delete a.Ah)}f.zK=function(){var a=Mh("xiv-ui-thumbnailgallery-thumbnail-dragging");D(a,function(a){R(a)});this.aj();window.console.log(this.U.ng.Aq());null!=this.U.ng.Aq()&&this.U.wf.Si({XO:!0})};f.BJ=function(){this.Wc===px.ModalStates.we&&Tw()};
f.IJ=function(){var a=this.a();a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();this.Wc===px.ModalStates.Ze?this.qc(px.ModalStates.As):this.qc(px.ModalStates.we);this.k()};f.CK=function(){Tw();this.qc(this.Lr)};function Ax(a){var b;b=b||F;b(a.$.we,"click",a.IJ.bind(a));b(a.$.xg,"click",a.CK.bind(a));b(a.$.Yk,"click",a.BJ.bind(a))}
f.nK=function(a){this.Ca.Ns(a.Fj.Cf,function(a){a.am()})};f.oK=function(a){this.Ca.Ns(a.Fj.Cf,function(a){a.fm||a.Cm()})};f.jK=function(a){this.Ca.Hq(a.Iw).Cm()};f.kK=function(a){this.Ca.Hq(a.Iw).am()};f.hK=function(a){this.Ca.Os()||(this.Ca.Zz().load(a.Fj.Cf),this.aj())};f.mK=function(a){var b=this.Ca.Hq(a.JL);this.Ca.Os()?b.Cm():(b.load(a.Fj.Cf),this.aj())};f.Mv=function(){this.aj()};f.Lv=function(){this.aj()};
f.ij=function(a){null!=a&&null!=a.sF?(a.tB&&D(a.tB,function(a){pk(a.a(),{opacity:0})}),this.Oy()):this.k();this.U.cz();this.U.ty(this.Ca.tA())};f.f=function(){px.d.f.call(this);sb(this.xa);delete this.xa;this.Yt(this.Cb);delete this.Cb;this.pq(this.kb);delete this.kb;this.qq(this.$);delete this.$;null!=this.Ca&&(I(this.Ca),this.Ca.g(),delete this.Ca);I(this.ac);this.ac.g();delete this.ac;I(this.U);this.U.g();delete this.U;Bx(this);delete this.Wc;delete this.Lr};v("xiv.ui.Modal.EventType",px.zM);
v("xiv.ui.Modal.ID_PREFIX",px.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",px.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",px.prototype.XH);v("xiv.ui.Modal.prototype.getThumbnailGallery",px.prototype.OH);v("xiv.ui.Modal.prototype.getProjectTab",px.prototype.yH);v("xiv.ui.Modal.prototype.getPopupButton",px.prototype.vH);v("xiv.ui.Modal.prototype.getCloseButton",px.prototype.yG);v("xiv.ui.Modal.prototype.getFullScreenButton",px.prototype.OG);v("xiv.ui.Modal.prototype.render",px.prototype.n);
v("xiv.ui.Modal.prototype.setState",px.prototype.qc);v("xiv.ui.Modal.prototype.getState",px.prototype.Ul);v("xiv.ui.Modal.prototype.highlightInUseThumbnails",px.prototype.aj);v("xiv.ui.Modal.prototype.animateModal",px.prototype.Oy);v("xiv.ui.Modal.prototype.updateStyle",px.prototype.k);v("xiv.ui.Modal.prototype.initSubComponents",px.prototype.RA);v("xiv.ui.Modal.prototype.addAddSubjectsToProjectTab",px.prototype.gy);v("xiv.ui.Modal.prototype.disposeInternal",px.prototype.f);
window["xiv.ui.Modal"]=px;window["xiv.ui.Modal.ModalStates"]=px.ModalStates;
//# sourceMappingURL=./xiv-min.js.map