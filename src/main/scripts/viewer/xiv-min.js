var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.be=function(){return a.tA?a.tA:a.tA=new a}}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ga(a)}function ha(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function s(a){return"string"==typeof a}function ia(a){return"boolean"==typeof a}function t(a){return"number"==typeof a}function ja(a){return"function"==ga(a)}function ka(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ma(a){return a[oa]||(a[oa]=++pa)}
var oa="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(null,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.hO=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.VL=!0;A.Pd=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.rd=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.yE=0;this.tL=function(){return this.yE++}};function za(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.TC;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Aa);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba;function Ca(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ca);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ca,Error);Ca.prototype.name="CustomError";function Da(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ea(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Fa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ha(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ia(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ja=/(\.\d+)|(\d+)|(\D+)/g;function Ka(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ja),d=b.toLowerCase().match(Ja),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function La(a){if(!Pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ta,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Va,"&#0;"));return a}var Qa=/&/g,Ra=/</g,Sa=/>/g,Ta=/"/g,Ua=/'/g,Va=/\x00/g,Pa=/[\x00&<>"']/;
function Wa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Xa(a){return Array.prototype.join.call(arguments,"")}
function Ya(a,b){for(var c=0,d=Ia(String(a)).split("."),e=Ia(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",m=/(\d*)(\D*)/g,q=/(\d*)(\D*)/g;do{var p=m.exec(l)||["","",""],r=q.exec(n)||["","",""];if(0==p[0].length&&0==r[0].length)break;c=Za(0==p[1].length?0:parseInt(p[1],10),0==r[1].length?0:parseInt(r[1],10))||Za(0==p[2].length,0==r[2].length)||Za(p[2],r[2])}while(0==c)}return c}function Za(a,b){return a<b?-1:a>b?1:0}
var $a=2147483648*Math.random()|0;function B(){return"goog_"+$a++}function ab(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function bb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function cb(a){var b=s(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function db(a,b){b.unshift(a);Ca.call(this,Fa.apply(null,b));b.shift()}w(db,Ca);db.prototype.name="AssertionError";function eb(a,b){throw new db("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var fb="closure_listenable_"+(1E6*Math.random()|0);function gb(a){return!(!a||!a[fb])}var hb=0;function jb(a,b,c,d,e){this.pk=a;this.Cr=null;this.src=b;this.type=c;this.en=!!d;this.Eq=e;this.key=++hb;this.em=this.Qp=!1}function kb(a){a.em=!0;a.pk=null;a.Cr=null;a.src=null;a.Eq=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function lb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function mb(a){var b=0,c;for(c in a)b++;return b}function nb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function pb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function qb(){var a=rb,b;for(b in a)return!1;return!0}function sb(a){for(var b in a)delete a[b]}function tb(a,b){b in a&&delete a[b]}
function ub(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function vb(a){var b={},c;for(c in a)b[c]=a[c];return b}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<wb.length;h++)c=wb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function yb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return yb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var zb=Array.prototype,Ab=zb.indexOf?function(a,b,c){return zb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(s(a))return s(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},D=zb.forEach?function(a,b,c){zb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=s(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Bb=zb.filter?function(a,b,c){return zb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=
0,k=s(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Cb=zb.map?function(a,b,c){return zb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=s(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=b.call(c,h[k],k,a));return e},Db=zb.some?function(a,b,c){return zb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=s(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Eb=zb.every?function(a,b,c){return zb.every.call(a,b,c)}:function(a,
b,c){for(var d=a.length,e=s(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};function Fb(a){var b;a:{b=Gb;for(var c=a.length,d=s(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:s(a)?a.charAt(b):a[b]}function Hb(a,b){return 0<=Ab(a,b)}function Ib(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Jb(a,b){Hb(a,b)||a.push(b)}
function Kb(a,b){var c=Ab(a,b),d;(d=0<=c)&&zb.splice.call(a,c,1);return d}function Lb(a){return zb.concat.apply(zb,arguments)}function Mb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Nb(a,b,c,d){zb.splice.apply(a,Ob(arguments,1))}function Ob(a,b,c){return 2>=arguments.length?zb.slice.call(a,b):zb.slice.call(a,b,c)};function Pb(a){this.src=a;this.Gc={};this.$o=0}f=Pb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.Gc[h];a||(a=this.Gc[h]=[],this.$o++);var k=Qb(a,b,d,e);-1<k?(b=a[k],c||(b.Qp=!1)):(b=new jb(b,this.src,h,!!d,e),b.Qp=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Gc))return!1;var e=this.Gc[a];b=Qb(e,b,c,d);return-1<b?(kb(e[b]),zb.splice.call(e,b,1),0==e.length&&(delete this.Gc[a],this.$o--),!0):!1};
function Rb(a,b){var c=b.type;if(!(c in a.Gc))return!1;var d=Kb(a.Gc[c],b);d&&(kb(b),0==a.Gc[c].length&&(delete a.Gc[c],a.$o--));return d}f.bg=function(a){a=a&&a.toString();var b=0,c;for(c in this.Gc)if(!a||c==a){for(var d=this.Gc[c],e=0;e<d.length;e++)++b,kb(d[e]);delete this.Gc[c];this.$o--}return b};f.Bn=function(a,b,c,d){a=this.Gc[a.toString()];var e=-1;a&&(e=Qb(a,b,c,d));return-1<e?a[e]:null};
f.Fq=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return lb(this.Gc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].en!=b))return!0;return!1})};function Qb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.em&&h.pk==b&&h.en==!!c&&h.Eq==d)return e}return-1};var Sb;a:{var Tb=ba.navigator;if(Tb){var Ub=Tb.userAgent;if(Ub){Sb=Ub;break a}}Sb=""}function Vb(a){return-1!=Sb.indexOf(a)}function Wb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Xb(){return Vb("Opera")||Vb("OPR")}function Yb(){return Vb("Trident")||Vb("MSIE")}function Zb(){return Vb("Safari")&&!Vb("Chrome")&&!Vb("CriOS")&&!Vb("Android")}
function $b(){var a=Sb;if(Yb()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Xb())return a=Wb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Wb(a);return a[2]&&a[2][1]?a[2][1]:""};var ac,bc,cc;function dc(){return ba.navigator||null}var ec=Xb(),E=Yb(),fc=Vb("Gecko")&&-1==Sb.toLowerCase().indexOf("webkit")&&!(Vb("Trident")||Vb("MSIE")),gc=-1!=Sb.toLowerCase().indexOf("webkit"),hc,ic=dc();hc=ic&&ic.platform||"";ac=-1!=hc.indexOf("Mac");bc=-1!=hc.indexOf("Win");cc=-1!=hc.indexOf("Linux");var jc=!!dc()&&-1!=(dc().appVersion||"").indexOf("X11");function kc(){var a=ba.document;return a?a.documentMode:void 0}
var lc=function(){var a="",b;if(ec&&ba.opera)return a=ba.opera.version,ja(a)?a():a;fc?b=/rv\:([^\);]+)(\)|;)/:E?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:gc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Sb))?a[1]:"");return E&&(b=kc(),b>parseFloat(a))?String(b):a}(),mc={};function nc(a){return mc[a]||(mc[a]=0<=Ya(lc,a))}function oc(a){return E&&pc>=a}var qc=ba.document,pc=qc&&E?kc()||("CSS1Compat"==qc.compatMode?parseInt(lc,10):5):void 0;var rc=!E||oc(9),sc=!E||oc(9),tc=E&&!nc("9");!gc||nc("528");fc&&nc("1.9b")||E&&nc("8")||ec&&nc("9.5")||gc&&nc("528");fc&&!nc("8")||E&&nc("9");function uc(){0!=vc&&(wc[ma(this)]=this)}var vc=0,wc={};uc.prototype.Xj=!1;uc.prototype.g=function(){if(!this.Xj&&(this.Xj=!0,this.f(),0!=vc)){var a=ma(this);delete wc[a]}};function yc(a,b){a.jo||(a.jo=[]);a.jo.push(ca(void 0)?ta(b,void 0):b)}uc.prototype.f=function(){if(this.jo)for(;this.jo.length;)this.jo.shift()()};function zc(a){a&&"function"==typeof a.g&&a.g()}function Bc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Bc.apply(null,d):zc(d)}};function Cc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.$f=!1;this.ro=!0}Cc.prototype.f=function(){};Cc.prototype.g=function(){};Cc.prototype.stopPropagation=function(){this.$f=!0};Cc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.ro=!1};function Dc(a){a.preventDefault()};function Ec(a){Ec[" "](a);return a}Ec[" "]=ea;function Fc(a,b){Cc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Fv=!1;this.Dc=null;a&&this.ra(a,b)}w(Fc,Cc);var Gc=[1,4,2];f=Fc.prototype;
f.ra=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(fc){var e;a:{try{Ec(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=gc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=gc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Fv=ac?a.metaKey:a.ctrlKey;this.state=a.state;this.Dc=a;a.defaultPrevented&&this.preventDefault()};function Hc(a){return(rc?0==a.Dc.button:"click"==a.type?!0:!!(a.Dc.button&Gc[0]))&&!(gc&&ac&&a.ctrlKey)}
f.stopPropagation=function(){Fc.d.stopPropagation.call(this);this.Dc.stopPropagation?this.Dc.stopPropagation():this.Dc.cancelBubble=!0};f.preventDefault=function(){Fc.d.preventDefault.call(this);var a=this.Dc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,tc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.TF=function(){return this.Dc};f.f=function(){};var Ic="closure_lm_"+(1E6*Math.random()|0),Jc={},Kc=0;function F(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)F(a,b[h],c,d,e);return null}c=Lc(c);return gb(a)?a.B(b,c,d,e):Mc(a,b,c,!1,d,e)}function Mc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Nc(a);l||(a[Ic]=l=new Pb(a));c=l.add(b,c,d,e,h);if(c.Cr)return c;d=Oc();c.Cr=d;d.src=a;d.pk=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Pc(b.toString()),d);Kc++;return c}
function Oc(){var a=Qc,b=sc?function(c){return a.call(b.src,b.pk,c)}:function(c){c=a.call(b.src,b.pk,c);if(!c)return c};return b}function Rc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Rc(a,b[h],c,d,e);return null}c=Lc(c);return gb(a)?a.Fu(b,c,d,e):Mc(a,b,c,!0,d,e)}function Sc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Sc(a,b[h],c,d,e);else c=Lc(c),gb(a)?a.mb(b,c,d,e):a&&(a=Nc(a))&&(b=a.Bn(b,c,!!d,e))&&Tc(b)}
function Tc(a){if(t(a)||!a||a.em)return!1;var b=a.src;if(gb(b))return Rb(b.Dg,a);var c=a.type,d=a.Cr;b.removeEventListener?b.removeEventListener(c,d,a.en):b.detachEvent&&b.detachEvent(Pc(c),d);Kc--;(c=Nc(b))?(Rb(c,a),0==c.$o&&(c.src=null,b[Ic]=null)):kb(a);return!0}function H(a){if(a)if(gb(a))a.removeAllListeners(void 0);else if(a=Nc(a)){var b=0,c;for(c in a.Gc)for(var d=a.Gc[c].concat(),e=0;e<d.length;++e)Tc(d[e])&&++b}}
function Uc(a,b){if(gb(a))return a.Fq(b,void 0);var c=Nc(a);return!!c&&c.Fq(b,void 0)}function Pc(a){return a in Jc?Jc[a]:Jc[a]="on"+a}function Vc(a,b,c,d){var e=1;if(a=Nc(a))if(b=a.Gc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.en==c&&!h.em&&(e&=!1!==Wc(h,d))}return Boolean(e)}function Wc(a,b){var c=a.pk,d=a.Eq||a.src;a.Qp&&Tc(a);return c.call(d,b)}
function Qc(a,b){if(a.em)return!0;if(!sc){var c=b||da("window.event"),d=new Fc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.$f&&0<=l;l--)d.currentTarget=c[l],e&=Vc(c[l],h,!0,d);for(l=0;!d.$f&&l<c.length;l++)d.currentTarget=c[l],e&=Vc(c[l],h,!1,d)}return e}return Wc(a,new Fc(b,this))}
function Nc(a){a=a[Ic];return a instanceof Pb?a:null}var Xc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Lc(a){return ja(a)?a:a[Xc]||(a[Xc]=function(b){return a.handleEvent(b)})};function Yc(){uc.call(this);this.Dg=new Pb(this);this.JE=this;this.yr=null}w(Yc,uc);Yc.prototype[fb]=!0;f=Yc.prototype;f.Wv=function(a){this.yr=a};f.addEventListener=function(a,b,c,d){F(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Sc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.yr;if(c)for(b=[];c;c=c.yr)b.push(c);var c=this.JE,d=a.type||a;if(s(a))a=new Cc(a,c);else if(a instanceof Cc)a.target=a.target||c;else{var e=a;a=new Cc(d,c);xb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.$f&&0<=k;k--)h=a.currentTarget=b[k],e=Zc(h,d,!0,a)&&e;a.$f||(h=a.currentTarget=c,e=Zc(h,d,!0,a)&&e,a.$f||(e=Zc(h,d,!1,a)&&e));if(b)for(k=0;!a.$f&&k<b.length;k++)h=a.currentTarget=b[k],e=Zc(h,d,!1,a)&&e;return e};
f.f=function(){Yc.d.f.call(this);this.removeAllListeners();this.yr=null};f.B=function(a,b,c,d){return this.Dg.add(String(a),b,!1,c,d)};f.Fu=function(a,b,c,d){return this.Dg.add(String(a),b,!0,c,d)};f.mb=function(a,b,c,d){return this.Dg.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.Dg?this.Dg.bg(a):0};
function Zc(a,b,c,d){b=a.Dg.Gc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.em&&k.en==c){var l=k.pk,n=k.Eq||k.src;k.Qp&&Rb(a.Dg,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.ro}f.Bn=function(a,b,c,d){return this.Dg.Bn(String(a),b,c,d)};f.Fq=function(a,b){return this.Dg.Fq(ca(a)?String(a):void 0,b)};function $c(){Yc.call(this);this.s="base";this.bd=window["X.counter"].tL();this.G=!1}w($c,Yc);$c.prototype.__defineGetter__("classname",function(){return this.s});$c.prototype.__defineGetter__("id",function(){return this.bd});v("X.base",$c);function ad(a,b){$c.call(this);this.s="triplets";this.Gf=Infinity;this.Df=-Infinity;this.Hf=Infinity;this.Ef=-Infinity;this.If=Infinity;this.Ff=-Infinity;this.sp=[0,0,0];this.La=0;this.Qb=new Float32Array(a);null!=b&&(this.Qb=b.Qb.subarray(0,b.Qb.length),this.La=this.Qb.length,this.Gf=b.Gf,this.Df=b.Df,this.Hf=b.Hf,this.Ef=b.Ef,this.If=b.If,this.Ff=b.Ff,this.sp=b.sp.slice())}w(ad,$c);f=ad.prototype;
f.add=function(a,b,c){this.Gf=Math.min(this.Gf,a);this.Df=Math.max(this.Df,a);this.Hf=Math.min(this.Hf,b);this.Ef=Math.max(this.Ef,b);this.If=Math.min(this.If,c);this.Ff=Math.max(this.Ff,c);this.sp=[(this.Gf+this.Df)/2,(this.Hf+this.Ef)/2,(this.If+this.Ff)/2];this.G=!0;this.Qb[this.La++]=a;this.Qb[this.La++]=b;this.Qb[this.La++]=c;return this.La/3};f.resize=function(){if(this.La!=this.Qb.length){var a=new Float32Array(this.La);a.set(this.Qb.subarray(0,this.La));this.Qb=a}};
f.get=function(a){a*=3;return[this.Qb[a],this.Qb[a+1],this.Qb[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Qb=new Float32Array(this.Qb.length);this.G=!0};ad.prototype.__defineGetter__("count",function(){this.resize();return this.Qb.length/3});ad.prototype.__defineGetter__("length",function(){this.resize();return this.Qb.length});v("X.triplets",ad);v("X.triplets.prototype.add",ad.prototype.add);v("X.triplets.prototype.resize",ad.prototype.resize);
v("X.triplets.prototype.get",ad.prototype.get);v("X.triplets.prototype.remove",ad.prototype.remove);v("X.triplets.prototype.clear",ad.prototype.clear);function bd(){$c.call(this);this.s="indexer";this.Xs=[];this.Rd={}}w(bd,$c);bd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.Rd||(this.Rd[b]=this.Xs.length,this.Xs.push(a));return this.Rd[b]};bd.prototype.unique=function(){return this.Xs};function cd(a){$c.call(this);this.s="file";this.Ep=a;this.G=!0}w(cd,$c);function dd(){this.rg=this.ea=null}dd.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.ea=null;else{if(g(a)){if(1==a.length){this.ea=new cd(a[0]);return}this.ea=Cb(a,function(a){var c=new I;c.ea=new cd(a);return c})}else this.ea=new cd(a);this.rg=null}});dd.prototype.__defineGetter__("file",function(){return this.ea?g(this.ea)?this.ea.map(function(a){return a.ea.Ep}):this.ea.Ep:""});
dd.prototype.__defineGetter__("filedata",function(){return g(this.ea)?this.ea.map(function(a){return a.rg}):this.rg});dd.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.rg=null;if(g(a))if(1==a.length)this.rg=a[0];else{var b=this.ea.length,c;for(c=0;c<b;c++)this.ea[c].rg=a[c]}else this.rg=a});function ed(){return null};function fd(a,b,c){return Math.min(Math.max(a,b),c)};function gd(a,b){this.vb={};this.fb=[];this.vh=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Zs(a)}f=gd.prototype;f.Bh=function(){return this.vh};f.gk=function(){hd(this);for(var a=[],b=0;b<this.fb.length;b++)a.push(this.vb[this.fb[b]]);return a};f.An=function(){hd(this);return this.fb.concat()};
f.wt=function(a){for(var b=0;b<this.fb.length;b++){var c=this.fb[b];if(id(this.vb,c)&&this.vb[c]==a)return!0}return!1};f.Bl=function(a,b){if(this===a)return!0;if(this.vh!=a.Bh())return!1;var c=b||kd;hd(this);for(var d,e=0;d=this.fb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function kd(a,b){return a===b}f.Qn=function(){return 0==this.vh};f.clear=function(){this.vb={};this.vh=this.fb.length=0};
f.remove=function(a){return id(this.vb,a)?(delete this.vb[a],this.vh--,this.fb.length>2*this.vh&&hd(this),!0):!1};function hd(a){if(a.vh!=a.fb.length){for(var b=0,c=0;b<a.fb.length;){var d=a.fb[b];id(a.vb,d)&&(a.fb[c++]=d);b++}a.fb.length=c}if(a.vh!=a.fb.length){for(var e={},c=b=0;b<a.fb.length;)d=a.fb[b],id(e,d)||(a.fb[c++]=d,e[d]=1),b++;a.fb.length=c}}f.get=function(a,b){return id(this.vb,a)?this.vb[a]:b};f.set=function(a,b){id(this.vb,a)||(this.vh++,this.fb.push(a));this.vb[a]=b};
f.Zs=function(a){var b;a instanceof gd?(b=a.An(),a=a.gk()):(b=ob(a),a=nb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.An(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new gd(this)};f.yw=function(){for(var a=new gd,b=0;b<this.fb.length;b++){var c=this.fb[b];a.set(this.vb[c],c)}return a};function id(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function ld(){$c.call(this);this.s="colortable";this.Rd=new gd;za(this,new dd)}w(ld,$c);ld.prototype.add=function(a,b,c,d,e,h){if(!(t(a)&&t(c)&&t(d)&&t(e)&&t(h)))throw Error("Invalid color table entry.");this.Rd.set(a,[b,c,d,e,h]);this.G=!0};ld.prototype.get=function(a){return this.Rd.get(a)};v("X.colortable.prototype.get",ld.prototype.get);function md(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}md.prototype.clone=function(){return new md(this.x,this.y,this.z)};md.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};md.prototype.tw=function(){return[this.x,this.y,this.z]};function K(a,b,c){this.x=a;this.y=b;this.z=c}w(K,md);f=K.prototype;f.clone=function(){return new K(this.x,this.y,this.z)};f.Vf=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.xb=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.Vf())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.uc=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.Bl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function nd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function od(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function pd(a,b){return new K(a.x+b.x,a.y+b.y,a.z+b.z)}function qd(a,b){return new K(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.O=K;f=A.O.prototype;f.clone=K.prototype.clone;f.Vf=K.prototype.Vf;f.scale=K.prototype.scale;f.xb=K.prototype.xb;f.add=K.prototype.add;f.uc=K.prototype.uc;f.normalize=function(){var a=this.Vf();return 0==a?this.scale(0):this.scale(1/a)};A.O.Ei=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.O.Vj=qd;A.O.Mt=nd;A.O.$q=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new K(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.O.prototype.__defineGetter__("xx",function(){return this.x});
A.O.prototype.__defineGetter__("yy",function(){return this.y});A.O.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.O);v("X.vector.prototype.clone",A.O.prototype.clone);v("X.vector.prototype.magnitude",A.O.prototype.Vf);v("X.vector.prototype.scale",A.O.prototype.scale);v("X.vector.prototype.invert",A.O.prototype.xb);v("X.vector.prototype.normalize",A.O.prototype.normalize);v("X.vector.prototype.add",A.O.prototype.add);v("X.vector.prototype.subtract",A.O.prototype.uc);
v("X.vector.dot",A.O.Ei);v("X.vector.cross",A.O.Vj);v("X.vector.distance",A.O.Mt);v("X.vector.lerp",A.O.$q);function rd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}rd.prototype.BYTES_PER_ELEMENT=8;rd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};rd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{rd.BYTES_PER_ELEMENT=8}catch(sd){}rd.prototype.BYTES_PER_ELEMENT=rd.prototype.BYTES_PER_ELEMENT;rd.prototype.set=rd.prototype.set;rd.prototype.toString=rd.prototype.toString;v("Float64Array",rd)};function td(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}td.prototype.BYTES_PER_ELEMENT=4;td.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};td.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(td.BYTES_PER_ELEMENT=4,td.prototype.BYTES_PER_ELEMENT=td.prototype.BYTES_PER_ELEMENT,td.prototype.set=td.prototype.set,td.prototype.toString=td.prototype.toString,v("Float32Array",td));function ud(){return new Float32Array(3)}function vd(a,b,c){var d=ud();d[0]=a;d[1]=b;d[2]=c;return d}function wd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function xd(){return new Float32Array(4)}function yd(a,b,c,d){var e=xd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function zd(){return new Float32Array(16)}function Ad(){var a=zd();a[0]=a[5]=a[10]=a[15]=1;return a}function Bd(a,b,c,d,e,h,k,l,n,m,q,p,r,u,z,y,J){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=m;a[9]=q;a[10]=p;a[11]=r;a[12]=u;a[13]=z;a[14]=y;a[15]=J;return a}function Cd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Dd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function L(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Ed(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Fd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Gd(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],m=a[6],q=a[7],p=a[8],r=a[9],u=a[10],z=a[11],y=a[12],J=a[13],T=a[14];a=a[15];var Q=b[0],G=b[1],R=b[2],Z=b[3],W=b[4],ua=b[5],na=b[6],wa=b[7],Ma=b[8],Ga=b[9],Na=b[10],la=b[11],xa=b[12],qa=b[13],Ac=b[14];b=b[15];c[0]=d*Q+l*G+p*R+y*Z;c[1]=e*Q+n*G+r*R+J*Z;c[2]=h*Q+m*G+u*R+T*Z;c[3]=k*Q+q*G+z*R+a*Z;c[4]=d*W+l*ua+p*na+y*wa;c[5]=e*W+n*ua+r*na+J*wa;c[6]=h*W+m*ua+u*na+T*wa;c[7]=k*W+q*ua+z*na+a*wa;c[8]=d*Ma+l*Ga+p*Na+y*la;c[9]=e*Ma+n*Ga+r*Na+J*la;
c[10]=h*Ma+m*Ga+u*Na+T*la;c[11]=k*Ma+q*Ga+z*Na+a*la;c[12]=d*xa+l*qa+p*Ac+y*b;c[13]=e*xa+n*qa+r*Ac+J*b;c[14]=h*xa+m*qa+u*Ac+T*b;c[15]=k*xa+q*qa+z*Ac+a*b;return c}
function Hd(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=a[8],p=a[9],r=a[10],u=a[11],z=a[12],y=a[13],J=a[14],T=a[15],Q=c*l-d*k,G=c*n-e*k,R=c*m-h*k,Z=d*n-e*l,W=d*m-h*l,ua=e*m-h*n,na=q*y-p*z,wa=q*J-r*z,Ma=q*T-u*z,Ga=p*J-r*y,Na=p*T-u*y,la=r*T-u*J,xa=Q*la-G*Na+R*Ga+Z*Ma-W*wa+ua*na;if(0==xa)return!1;xa=1/xa;b[0]=(l*la-n*Na+m*Ga)*xa;b[1]=(-d*la+e*Na-h*Ga)*xa;b[2]=(y*ua-J*W+T*Z)*xa;b[3]=(-p*ua+r*W-u*Z)*xa;b[4]=(-k*la+n*Ma-m*wa)*xa;b[5]=(c*la-e*Ma+h*wa)*xa;b[6]=(-z*ua+J*R-T*G)*xa;b[7]=
(q*ua-r*R+u*G)*xa;b[8]=(k*Na-l*Ma+m*na)*xa;b[9]=(-c*Na+d*Ma-h*na)*xa;b[10]=(z*W-y*R+T*Q)*xa;b[11]=(-q*W+p*R-u*Q)*xa;b[12]=(-k*Ga+l*wa-n*na)*xa;b[13]=(c*Ga-d*wa+e*na)*xa;b[14]=(-z*Z+y*G-J*Q)*xa;b[15]=(q*Z-p*G+r*Q)*xa;return!0}function Id(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Jd(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Kd(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.t={};A.t.JA=function(a,b,c,d){c=c.uc(b);c.normalize();d=A.O.Vj(c,d);d.normalize();var e=A.O.Vj(d,c);e.normalize();c.xb();L(a,0,d.x,d.y,d.z,0);L(a,1,e.x,e.y,e.z,0);L(a,2,c.x,c.y,c.z,0);Kd(a,-b.x,-b.y,-b.z);return a};A.t.Jb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.O((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.t.jL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Fd(a,b,d);Fd(a,c,e);Ed(a,b,e);Ed(a,c,d);return a};A.t.iL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Dd(a,b,d);Dd(a,c,e);Cd(a,b,e);Cd(a,c,d);return a};A.t.Kn=Ad;A.t.clone=function(a){var b=zd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.t.yw=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.t.tF=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],m=a[8],q=a[9],p=a[10],r=a[11],u=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(p*a-r*y)-(b*l-d*h)*(q*a-r*z)+(b*n-e*h)*(q*y-p*z)+(c*l-d*k)*(m*a-r*u)-(c*n-e*k)*(m*y-p*u)+(d*n-e*l)*(m*z-q*u)};A.t.xb=Hd;A.t.Lu=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Bd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.t.wI=function(a,b,c,d,e,h,k){return Bd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.t.xI=function(a,b,c,d,e,h,k){return Bd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.t.multiply=Gd;A.t.RA=Jd;A.t.translate=Kd;A.t.scale=function(a,b,c,d){return Bd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.t.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],m=a[4],q=a[5],p=a[6],r=a[7],u=a[8],z=a[9],y=a[10],J=a[11],T=Math.cos(b),Q=Math.sin(b),G=1-T;b=c*c*G+T;var R=c*d*G+e*Q,Z=c*e*G-d*Q,W=c*d*G-e*Q,ua=d*d*G+T,na=d*e*G+c*Q,wa=c*e*G+d*Q;c=d*e*G-c*Q;e=e*e*G+T;return Bd(a,h*b+m*R+u*Z,k*b+q*R+z*Z,l*b+p*R+y*Z,n*b+r*R+J*Z,h*W+m*ua+u*na,k*W+q*ua+z*na,l*W+p*ua+y*na,n*W+r*ua+J*na,h*wa+m*c+u*e,k*wa+q*c+z*e,l*wa+p*c+y*e,n*wa+r*c+J*e,a[12],a[13],a[14],a[15])};
A.t.Fr=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[4]=c*q+k*p;a[5]=d*q+l*p;a[6]=e*q+n*p;a[7]=h*q+m*p;a[8]=c*-p+k*q;a[9]=d*-p+l*q;a[10]=e*-p+n*q;a[11]=h*-p+m*q;return a};A.t.Gr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*-p;a[1]=d*q+l*-p;a[2]=e*q+n*-p;a[3]=h*q+m*-p;a[8]=c*p+k*q;a[9]=d*p+l*q;a[10]=e*p+n*q;a[11]=h*p+m*q;return a};
A.t.Hr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*p;a[1]=d*q+l*p;a[2]=e*q+n*p;a[3]=h*q+m*p;a[4]=c*-p+k*q;a[5]=d*-p+l*q;a[6]=e*-p+n*q;a[7]=h*-p+m*q;return a};v("X.matrix.identity",A.t.Kn);v("X.matrix.clone",A.t.clone);v("X.matrix.transpose",A.t.yw);v("X.matrix.determinant",A.t.tF);v("X.matrix.invert",A.t.xb);v("X.matrix.multiply",A.t.multiply);v("X.matrix.multiplyByVector",A.t.Jb);v("X.matrix.multiplyByVec4",A.t.RA);
v("X.matrix.makePerspective",A.t.Lu);v("X.matrix.makeFrustum",A.t.wI);v("X.matrix.makeOrtho",A.t.xI);v("X.matrix.makeLookAt",A.t.JA);v("X.matrix.translate",A.t.translate);v("X.matrix.scale",A.t.scale);v("X.matrix.rotate",A.t.rotate);v("X.matrix.rotateX",A.t.Fr);v("X.matrix.rotateY",A.t.Gr);v("X.matrix.rotateZ",A.t.Hr);v("X.matrix.swapRows",A.t.jL);v("X.matrix.swapCols",A.t.iL);function Ld(){$c.call(this);this.s="transform";this.tb=A.t.Kn()}w(Ld,$c);Ld.prototype.__defineGetter__("matrix",function(){return this.tb});Ld.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.tb=a;this.da()});f=Ld.prototype;f.Fr=function(a){if(!t(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Fr(this.tb,a*Math.PI/180);this.da()};
f.Gr=function(a){if(!t(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Gr(this.tb,a*Math.PI/180);this.da()};f.Hr=function(a){if(!t(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Hr(this.tb,a*Math.PI/180);this.da()};f.CC=function(a){if(!t(a))throw Error("Invalid distance.");A.t.translate(this.tb,a,0,0);this.da()};f.DC=function(a){if(!t(a))throw Error("Invalid distance.");A.t.translate(this.tb,0,a,0);this.da()};
f.EC=function(a){if(!t(a))throw Error("Invalid distance.");A.t.translate(this.tb,0,0,a);this.da()};function Md(a,b,c){a.tb[b+4*c]*=-1;a.da()}f.MF=function(){Md(this,0,0)};f.NF=function(){Md(this,1,1)};f.OF=function(){Md(this,2,2)};f.da=function(){this.G=!0};v("X.transform",Ld);v("X.transform.prototype.rotateX",Ld.prototype.Fr);v("X.transform.prototype.rotateY",Ld.prototype.Gr);v("X.transform.prototype.rotateZ",Ld.prototype.Hr);v("X.transform.prototype.translateX",Ld.prototype.CC);
v("X.transform.prototype.translateY",Ld.prototype.DC);v("X.transform.prototype.translateZ",Ld.prototype.EC);v("X.transform.prototype.flipX",Ld.prototype.MF);v("X.transform.prototype.flipY",Ld.prototype.NF);v("X.transform.prototype.flipZ",Ld.prototype.OF);v("X.transform.prototype.modified",Ld.prototype.da);function Od(){$c.call(this);this.s="texture";this.pi=this.Cf=this.ea=null;this.Qs=this.Rs=0;this.yx=!1;za(this,new dd)}w(Od,$c);Od.prototype.__defineSetter__("rawData",function(a){this.pi=a;this.G=!0});Od.prototype.__defineSetter__("rawDataHeight",function(a){this.Qs=a;this.G=!0});Od.prototype.__defineSetter__("rawDataWidth",function(a){this.Rs=a;this.G=!0});Od.prototype.__defineSetter__("grayscale",function(a){this.yx=a;this.G=!0});v("X.texture",Od);function Pd(){this.yd=Qd;this.ac=new Ld;this.Fa=[1,1,1];this.ol=this.Sa=this.zc=this.ca=this.C=null;this.jl=[];this.ib=!0;this.il=this.Om=1;this.al=null;this.Fm=!1;this.Lc=1;this.ad=0;this.Nm=!0}var Qd="TRIANGLES";Pd.prototype.__defineSetter__("type",function(a){return this.yd=a});Pd.prototype.__defineGetter__("type",function(){return this.yd});Pd.prototype.__defineGetter__("texture",function(){this.Sa||(this.Sa=new Od);return this.Sa});Pd.prototype.__defineGetter__("transform",function(){return this.ac});
Pd.prototype.__defineGetter__("points",function(){return this.C});Pd.prototype.__defineSetter__("points",function(a){this.C=a});Pd.prototype.__defineGetter__("normals",function(){return this.ca});Pd.prototype.__defineSetter__("normals",function(a){this.ca=a});Pd.prototype.__defineGetter__("colors",function(){return this.zc});Pd.prototype.__defineSetter__("colors",function(a){this.zc=a});Pd.prototype.__defineGetter__("color",function(){return this.Fa});
Pd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Fa=a;this.G=!0});Pd.prototype.__defineGetter__("opacity",function(){return this.Lc});Pd.prototype.__defineSetter__("opacity",function(a){if(!t(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Lc=a;this.G=!0});Pd.prototype.__defineGetter__("caption",function(){return this.al});
Pd.prototype.__defineSetter__("caption",function(a){this.al=a;this.G=!0});Pd.prototype.__defineGetter__("visible",function(){return this.ib});Pd.prototype.__defineSetter__("visible",function(a){for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.ib=a;this.G=!0});Pd.prototype.__defineGetter__("pointsize",function(){return this.Om});Pd.prototype.__defineSetter__("pointsize",function(a){if(!t(a))throw Error("Invalid point size.");this.Om=a;this.G=!0});
Pd.prototype.__defineGetter__("magicmode",function(){return this.Fm});Pd.prototype.__defineSetter__("magicmode",function(a){if(!ia(a))throw Error("Invalid magic mode setting.");this.Fm=a;this.G=!0});Pd.prototype.__defineGetter__("linewidth",function(){return this.il});Pd.prototype.__defineSetter__("linewidth",function(a){if(!t(a))throw Error("Invalid line width.");this.il=a;this.G=!0});Pd.prototype.__defineGetter__("pickable",function(){return this.Nm});
Pd.prototype.__defineSetter__("pickable",function(a){if(!ia(a))throw Error("Invalid pickable setting.");this.Nm=a;this.G=!0});Pd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.ol});Pd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Rd(){this.Sd=Infinity;this.sb=this.Pb=-Infinity;this.ub=Infinity;this.li=[0,0,0];this.ji=[1,1,1]}Rd.prototype.__defineGetter__("lowerThreshold",function(){return this.sb});Rd.prototype.__defineSetter__("lowerThreshold",function(a){this.sb=a});Rd.prototype.__defineGetter__("upperThreshold",function(){return this.ub});Rd.prototype.__defineSetter__("upperThreshold",function(a){this.ub=a});Rd.prototype.__defineGetter__("min",function(){return this.Sd});Rd.prototype.__defineGetter__("max",function(){return this.Pb});
Rd.prototype.__defineGetter__("minColor",function(){return this.li});Rd.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.li=a});Rd.prototype.__defineGetter__("maxColor",function(){return this.ji});Rd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.ji=a});function Sd(){$c.call(this);this.s="scalars";this.Cm=this.Za=null;this.Lx=!0;this.Fs=0;za(this,new dd);za(this,new Rd);this.li=[0,1,0];this.ji=[1,0,0]}w(Sd,$c);Sd.prototype.__defineGetter__("array",function(){return this.Za});Sd.prototype.__defineSetter__("array",function(a){this.Cm=this.Za=a;this.G=!0});Sd.prototype.__defineGetter__("interpolation",function(){return this.Fs});Sd.prototype.__defineSetter__("interpolation",function(a){this.Fs=a});v("X.scalars",Sd);function Td(a){$c.call(this);this.s="object";this.j=[];this.$a=this.vd=null;za(this,new Pd);null!=a&&this.Sj(a)}w(Td,$c);
Td.prototype.Sj=function(a){this.yd=a.yd;this.ac=new Ld;this.ac.tb=new Float32Array(a.ac.tb);this.Fa=a.Fa.slice();a.C&&(this.C=new ad(a.C.length,a.C));a.ca&&(this.ca=new ad(a.ca.length,a.ca));a.zc&&(this.zc=new ad(a.zc.length,a.zc));this.Sa=a.Sa;this.ol=a.ol;a.ea&&(this.ea=new cd((new String(a.ea.Ep)).toString()));this.Lc=a.Lc;this.j.length=0;var b=a.j;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.j.push(new A[b[d].s](b[d]));this.ib=a.ib;this.Om=a.Om;this.il=a.il;a.al&&(this.al=(new String(a.al)).toString());
this.Fm=a.Fm;this.Nm=a.Nm;this.jl=a.jl.slice();this.G=!0};Td.prototype.__defineGetter__("colortable",function(){this.vd||(this.vd=new ld);return this.vd});Td.prototype.__defineGetter__("scalars",function(){this.$a||(this.$a=new Sd);return this.$a});Td.prototype.__defineGetter__("children",function(){return this.j});Td.prototype.da=function(){var a=new Ud;a.Ma=this;this.dispatchEvent(a)};Td.prototype.remove=function(){var a=new Vd;a.Ma=this;this.dispatchEvent(a)};
function Xd(a,b){if(!(null!=a&&null!=b&&a instanceof Td&&b instanceof Td))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Lc?-1:1==b.Lc?1:null!=a.ad&&null!=b.ad&&a.ad>b.ad?-1:1}v("X.object",Td);v("X.object.prototype.modified",Td.prototype.da);v("X.object.prototype.remove",Td.prototype.remove);function Yd(a){Cc.call(this,a);this.s="event"}w(Yd,Cc);var Zd="pan"+B(),$d="rotate"+B(),ae="zoom"+B(),be="scroll"+B();B();var ce="resetview"+B(),de="windowlevel"+B(),ee="modified"+B(),fe="remove"+B(),ge="progress"+B(),he="hover"+B(),ie="hover_end"+B(),je="computing"+B(),ke="computing_end"+B(),le="computing_progress"+B();function me(){Yd.call(this,de);this.Ks=this.Ys=0}w(me,Yd);function oe(){Yd.call(this,Zd);this.ad=new A.O(0,0,0)}w(oe,Yd);function pe(){Yd.call(this,$d);this.ad=new A.O(0,0,0)}
w(pe,Yd);function qe(){Yd.call(this,ae);this.Bf=this.sg=!1}w(qe,Yd);function re(){Yd.call(this,be);this.Rb=!1}w(re,Yd);function se(){Yd.call(this,he);this.Lp=this.Kp=0}w(se,Yd);function te(){Yd.call(this,ie)}w(te,Yd);function xe(){Yd.call(this,ce)}w(xe,Yd);function Ud(){Yd.call(this,ee);this.ua=this.Ma=null}w(Ud,Yd);function Vd(){Yd.call(this,fe);this.ua=this.Ma=null}w(Vd,Yd);function ye(){Yd.call(this,ge);this.Hj=0}w(ye,Yd);function ze(){Yd.call(this,je);this.Ma=null}w(ze,Yd);
function Ae(){Yd.call(this,le);this.Hj=0}w(Ae,Yd);function Be(){Yd.call(this,ke);this.Ma=null}w(Be,Yd);v("X.event.events.PAN",Zd);v("X.event.events.ROTATE",$d);v("X.event.events.ZOOM",ae);v("X.event.events.SCROLL",be);function Ce(){$c.call(this);this.s="parser";this._data=null;this.La=0;this.BE=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Ap=!0}w(Ce,$c);Ce.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function De(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Ee(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ce.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.La,this.La+=b*c));if(this.BE!=this.Ap)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function Fe(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=yd(0,0,0,1),e=xd();Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,0,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,b[1]-
1,0,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,0,0,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,b[1]-1,0,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,0,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,b[1]-1,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,b[1]-1,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ge(a,b){var c=Ad();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=ud(),h=a[0],k=a[1],l=a[2],n=b[0],m=b[1],q=b[2];e[0]=k*q-l*m;e[1]=l*n-h*q;e[2]=h*m-k*n;wd(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];L(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);L(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);L(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=zd();Hd(c,d);return[c,d]}
function He(a,b,c,d,e,h,k,l,n){var m=new Ie;wd(c,c);for(var q=[],p=[],r=0;6>r;r++)for(var u=Math.floor(r/2),z=(u+1)%3,y=(u+2)%3,J=(4+2*u)%6,T=0;2>T;T++){var Q=(2+T+2*u)%6,G=-(c[u]*(e[r]-a[u])+c[z]*(e[Q]-a[z]))/c[y]+a[y];if(G>=e[J]&&G<=e[J+1]||G<=e[J]&&G>=e[J+1]){var R=[];R[u]=e[r];R[z]=e[Q];R[y]=G;q.push(R)}else R=[],R[u]=e[r],R[z]=e[Q],R[y]=G,p.push(R)}a=vd(0,0,1);a=Ge(c,a);e=a[0];a=a[1];u=[];for(p=0;p<q.length;++p)r=yd(q[p][0],q[p][1],q[p][2],1),z=xd(),Jd(e,r,z),u.push([z[0],z[1],z[2]]);e=vd(1,
0,0);q=ud();Id(a,e,q);p=vd(0,1,0);e=ud();Id(a,p,e);r=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(p=p=0;p<u.length;++p)u[p][0]<r[0]&&(r[0]=u[p][0]),u[p][0]>r[1]&&(r[1]=u[p][0]),u[p][1]<r[2]&&(r[2]=u[p][1]),u[p][1]>r[3]&&(r[3]=u[p][1]),u[p][2]<r[4]&&(r[4]=u[p][2]),u[p][2]>r[5]&&(r[5]=u[p][2]);p=yd(r[0]+(r[1]-r[0])/2,r[2]+(r[3]-r[2])/2,r[4]+(r[5]-r[4])/2,0);u=xd();Gd(a,p,u);z=Math.floor(r[0]);y=Math.ceil(r[1]);z==y&&y++;J=y-z;T=Math.floor(r[2]);
Q=Math.ceil(r[3]);G=Q-T;R=b[0];b=b[1];var p=Math.ceil(J/R),Z=Math.ceil(G/b),W=new Uint8Array(4*p*Z),ua=new Od;ua.Rs=p;ua.Qs=Z;var Z=xd(),na=yd(0,0,r[4],1),wa=zd();Gd(k.sE,a,wa);for(var Ma=Q-1E-7,Ga=y-1E-7,Na=0,la=0,xa=0,qa=T,qa=T;qa<=Ma;qa+=b)for(xa++,la=0,na[1]=qa,p=z;p<=Ga;p+=R){la++;na[0]=p;Jd(wa,na,Z);var Ac=4*Na,ue=Math.floor(Z[2]),ve=Math.floor(Z[1]),we=Math.floor(Z[0]);if(0<=we&&we<k.Ga[0]&&0<=ve&&ve<k.Ga[1]&&0<=ue&&ue<k.Ga[2]){var Wd=h[ue][ve][we],Ph=we=ve=ue=0;n?((Wd=n.get(Wd))||(Wd=[0,.61,
0,0,1]),ue=255*Wd[1],ve=255*Wd[2],we=255*Wd[3],Ph=255*Wd[4]):(ue=ve=we=Wd/k.Pb*255,Ph=255);W[Ac]=ue;W[++Ac]=ve;W[++Ac]=we;W[++Ac]=Ph}else W[Ac]=0,W[++Ac]=0,W[++Ac]=0,W[++Ac]=0;Na++}ua.pi=W;m.Sa=ua;m.HE=r;m.uE=a;m.tE=wa;m.AE=T;m.eO=Q;m.GE=z;m.fO=y;m.Ax=la;m.zx=xa;m.rh=R;m.Ta=J;m.kh=b;m.Ha=G;m.Qa=[u[0],u[1],u[2]];m.dl=[c[0],c[1],c[2]];m.Fp=[q[0],q[1],q[2]];m.Rb=[e[0],e[1],e[2]];m.ib=!1;m.qh=k;m.jh=null==k.qh||l?!0:!1;m.$k=d;m.Ze();m.ib=!1;return m}
function Je(a,b,c,d){var e;e=d.yc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,p=(2+2*n)%6,r=(4+2*n)%6,u=1/c[n]*(e[l]-b[n]);if(Infinity!=u&&-Infinity!=u){var z=b[m]+c[m]*u,u=b[q]+c[q]*u;z>=e[p]&&z<=e[p+1]&&u>=e[r]&&u<=e[r+1]?(p=[],p[n]=e[l],p[m]=z,p[q]=u,h.push(p)):(p=[],p[n]=e[l],p[m]=z,p[q]=u,k.push(p))}}e=[h,k];b=e[0];d.e[a].I=e;e=nd(new K(b[0][0],b[0][1],b[0][2]),new K(b[1][0],b[1][1],b[1][2]));d.e[a].dO=e;h=vd(0,0,1);k=Ge(c,h)[0];l=yd(d.Cs[0],d.Cs[1],d.Cs[2],0);h=
xd();Jd(k,l,h);k=xd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.e[a].xd=[Math.abs(h[0]),Math.abs(h[1])];d.e[a].ml=h[2];d.e[a].Na=k;e=Math.floor(Math.abs(e/h[2]));d.Qm[a]=e+1;d.e[a].ba=e+1;d.e[a].I[0][0][0]>d.e[a].I[0][1][0]?0<k[0]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][0]<d.e[a].I[0][1][0]?0>k[0]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][1]>d.e[a].I[0][1][1]?
0<k[1]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][1]<d.e[a].I[0][1][1]?0>k[1]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][2]>d.e[a].I[0][1][2]?0<k[2]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][2]<d.e[a].I[0][1][2]&&0>k[2]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e);d.e[a].Ns=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Ke(a,b){var c;c=b._data;for(var d=b.Ga,e=b.Pb,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,m=0,q=0,p=0,r=0,p=0;p<d[2];p++){var u=c.subarray(p*l,(p+1)*l),r=0;k[p]=Array(d[1]);h[p]=Array(d[1]);for(q=0;q<d[1];q++)for(k[p][q]=new c.constructor(d[0]),h[p][q]=new c.constructor(d[0]),m=0;m<d[0];m++)n=u[r],k[p][q][m]=n/e*255,h[p][q][m]=n,r++}c=[h,k];b.$b=c[0];b.cO=c[1];A.Pd(a.s+".reslice");b.cb=null!=b.q;b.vd&&(b.Bm=b.vd.Rd);b.SO=[0,0,0];b.ta=[b.ud[0]+(b.ih[0]-1)/2,b.ud[1]+(b.ih[1]-1)/2,b.ud[2]+(b.ih[2]-
1)/2];b.yc=[Math.min(b.ud[0],b.ud[0]+b.ih[0]-1),Math.max(b.ud[0],b.ud[0]+b.ih[0]-1),Math.min(b.ud[1],b.ud[1]+b.ih[1]-1),Math.max(b.ud[1],b.ud[1]+b.ih[1]-1),Math.min(b.ud[2],b.ud[2]+b.ih[2]-1),Math.max(b.ud[2],b.ud[2]+b.ih[2]-1)];b.e=[{},{},{}];c=vd(b.ta[0],b.ta[1],b.ta[2]);b.e[0].Rm=c;d=vd(1,0,0);wd(d,d);b.e[0].D=d;e=[1,0,0];b.e[0].Fa=e;Je(0,c,d,b);b.j[0].j=Array(b.e[0].ba);c[0]=b.e[0].I[0][0][0]+b.e[0].Na[0]*Math.floor(b.e[0].ba/2);c[1]=b.e[0].I[0][0][1]+b.e[0].Na[1]*Math.floor(b.e[0].ba/2);c[2]=
b.e[0].I[0][0][2]+b.e[0].Na[2]*Math.floor(b.e[0].ba/2);c=He(c,b.e[0].xd,b.e[0].D,b.e[0].Fa,b.yc,b.$b,b,b.cb,b.Bm);b.cb&&(c.q=b.q.j[0].j[Math.floor(b.e[0].ba/2)].Sa);b.j[0].j[Math.floor(b.e[0].ba/2)]=c;b.lh=Math.floor(b.e[0].ba/2);b.el=Math.floor(b.e[0].ba/2);c=vd(b.ta[0],b.ta[1],b.ta[2]);b.e[1].Rm=c;d=vd(0,1,0);wd(d,d);b.e[1].D=d;e=[0,1,0];b.e[1].Fa=e;Je(1,c,d,b);b.j[1].j=Array(b.e[1].ba);c[0]=b.e[1].I[0][0][0]+b.e[1].Na[0]*Math.floor(b.e[1].ba/2);c[1]=b.e[1].I[0][0][1]+b.e[1].Na[1]*Math.floor(b.e[1].ba/
2);c[2]=b.e[1].I[0][0][2]+b.e[1].Na[2]*Math.floor(b.e[1].ba/2);c=He(c,b.e[1].xd,b.e[1].D,b.e[1].Fa,b.yc,b.$b,b,b.cb,b.Bm);b.cb&&(c.q=b.q.j[1].j[Math.floor(b.e[1].ba/2)].Sa);b.j[1].j[Math.floor(b.e[1].ba/2)]=c;b.mh=Math.floor(b.e[1].ba/2);b.fl=Math.floor(b.e[1].ba/2);c=vd(b.ta[0],b.ta[1],b.ta[2]);b.e[2].Rm=c;d=vd(0,0,1);wd(d,d);b.e[2].D=d;e=[0,.392,.804];b.e[2].Fa=e;Je(2,c,d,b);b.j[2].j=Array(b.e[2].ba);c[0]=b.e[2].I[0][0][0]+b.e[2].Na[0]*Math.floor(b.e[2].ba/2);c[1]=b.e[2].I[0][0][1]+b.e[2].Na[1]*
Math.floor(b.e[2].ba/2);c[2]=b.e[2].I[0][0][2]+b.e[2].Na[2]*Math.floor(b.e[2].ba/2);c=He(c,b.e[2].xd,b.e[2].D,b.e[2].Fa,b.yc,b.$b,b,b.cb,b.Bm);b.cb&&(c.q=b.q.j[2].j[Math.floor(b.e[2].ba/2)].Sa);b.j[2].j[Math.floor(b.e[2].ba/2)]=c;b.nh=Math.floor(b.e[2].ba/2);b.gl=Math.floor(b.e[2].ba/2);A.rd(a.s+".reslice");return b.$b};function Le(){Ce.call(this);this.s="parserOFF"}w(Le,Ce);
Le.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Ee(h,n,a);n=a+1;return b}n=e;return Ee(h,n,e-1)}A.Pd(this.s+".parse");this._data=c;var e=c.byteLength,h=this.h("uchar",e);c=[];b.C=new ad(e);b.ca=new ad(e);for(var k=b.C,l=b.ca,n=0,m=d(),m=("OFF"===m?d():m).split(" "),q=m[0],m=m[1];q--;){var p=d(),p=p.split(" ");c.push([parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])])}for(;m--;){var p=d(),p=p.split(" "),
r=c[parseInt(p[1],10)],q=c[parseInt(p[2],10)],p=c[parseInt(p[3],10)];k.add(r[0],r[1],r[2]);k.add(q[0],q[1],q[2]);k.add(p[0],p[1],p[2]);r=new K(r[0],r[1],r[2]);p=new K(p[0],p[1],p[2]);q=qd((new K(q[0],q[1],q[2])).uc(r),p.uc(r));q.normalize();l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z)}A.rd(this.s+".parse");c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};v("X.parserOFF",Le);v("X.parserOFF.prototype.parse",Le.prototype.parse);function Ie(a){Td.call(this);this.s="slice";this.Qa=[0,0,0];this.dl=[0,0,1];this.Rb=[0,1,0];this.Fp=[1,0,0];this.Ha=this.Ta=10;this.ol=[0,1,0,0,1,1,1,1,1,0,0,0];this.q=this.qh=null;this.jh=!0;this.$k=[1,1,1];null!=a&&this.Sj(a)}w(Ie,Td);Ie.prototype.Sj=function(a){this.Qa=a.Qa.slice();this.dl=a.dl.slice();this.Rb=a.Rb.slice();this.Ta=a.Ta;this.Ha=a.Ha;this.qh=a.qh;this.q=a.q;this.jh=a.jh;this.$k=a.$k;this.zE=a.zE;Ie.d.Sj.call(this,a)};Ie.prototype.__defineSetter__("height",function(a){this.Ha=a});
Ie.prototype.__defineSetter__("width",function(a){this.Ta=a});Ie.prototype.create=function(){this.Ze()};
Ie.prototype.Ze=function(){var a=(new K(this.dl[0],this.dl[1],this.dl[2])).normalize(),b=new K(this.Rb[0],this.Rb[1],this.Rb[2]),c=new K(this.Fp[0],this.Fp[1],this.Fp[2]),d=new K(this.Qa[0],this.Qa[1],this.Qa[2]),e=pd(c.clone().xb().scale(this.Ta/2),b.clone().xb().scale(this.Ha/2)),h=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=pd(c.clone().xb().scale(this.Ta/2),b.clone().scale(this.Ha/2)),k=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=pd(c.clone().scale(this.Ta/2),b.clone().xb().scale(this.Ha/2)),l=new K(e.x+d.x,e.y+d.y,
e.z+d.z),e=pd(c.clone().scale(this.Ta/2),b.clone().scale(this.Ha/2)),b=new K(e.x+d.x,e.y+d.y,e.z+d.z);this.C=new ad(18);this.ca=new ad(18);this.C.add(h.x,h.y,h.z);this.C.add(k.x,k.y,k.z);this.C.add(l.x,l.y,l.z);this.C.add(l.x,l.y,l.z);this.C.add(b.x,b.y,b.z);this.C.add(k.x,k.y,k.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.ca.add(a.x,a.y,a.z);this.jh&&(a=new Td,a.C=new ad(24),a.ca=new ad(24),a.C.add(h.x,h.y,h.z),
a.C.add(k.x,k.y,k.z),a.C.add(k.x,k.y,k.z),a.C.add(b.x,b.y,b.z),a.C.add(b.x,b.y,b.z),a.C.add(l.x,l.y,l.z),a.C.add(l.x,l.y,l.z),a.C.add(h.x,h.y,h.z),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.ca.add(0,0,0),a.Fa=[this.$k[0],this.$k[1],this.$k[2]],a.yd="LINES",a.il=2,this.j.push(a))};v("X.slice",Ie);v("X.slice.prototype.create",Ie.prototype.create);function I(a){Td.call(this);this.s="volume";this.Qa=[0,0,0];this.Ga=[10,10,10];this.yc=[1,1,1];this.Qm=[10,10,10];this.oh=[1,1,1];this.Cf=[];this.gl=this.nh=this.fl=this.mh=this.el=this.lh=0;this.Sm=new Td;this.Tm=new Td;this.Um=new Td;this.Jp=this.ze=!1;this.Ab=-1;this.Ip=[];this.q=null;this.jh=!0;this.Hb=Infinity;this.Gb=-Infinity;this.Mx=!0;this.Pb=0;this._data=null;za(this,new dd);za(this,new Rd);null!=a&&this.Sj(a)}w(I,Td);
I.prototype.Sj=function(a){this.Qa=a.Qa.slice();this.Ga=a.Ga.slice();this.oh=a.oh.slice();this.lh=a.lh;this.el=a.el;this.mh=a.mh;this.fl=a.fl;this.nh=a.nh;this.gl=a.gl;this.vx=a.vx.slice();this.Sm=new Td(a.Sm);this.Tm=new Td(a.Tm);this.Um=new Td(a.Um);this.Pb=a.Pb;this._data=a._data;this.ze=a.ze;this.Jp=a.Jp;this.Ab=a.Ab;this.q=a.q;this.jh=a.jh;I.d.Sj.call(this,a)};
I.prototype.Ze=function(a){this.j.length=0;this.Sm.j.length=0;this.Tm.j.length=0;this.Um.j.length=0;this.j.push(this.Sm);this.j.push(this.Tm);this.j.push(this.Um);this.ud=a.yf;this.Cs=a.hh;this.ih=a.qd;this.Zk=a.te;this.sE=a.ve;this.Pb=a.max;this._data=a.data;this.G=!0};
I.prototype.da=function(a){a="undefined"!==typeof a?a:!0;if(0<this.j.length){this.ze!=this.Jp&&(this.ze||-1==this.Ab||(this.j[this.Ab].visible=!1),this.G=!0,this.Jp=this.ze);if(!this.ib)return;for(var b=0,b=0;3>b;b++){var c=this.j[b],d=0,e=0;0==b?(d=this.lh,e=this.el,this.el=this.lh):1==b?(d=this.mh,e=this.fl,this.fl=this.mh):2==b&&(d=this.nh,e=this.gl,this.gl=this.nh);if(null==this.j[b].j[parseInt(d,10)]){var h=ud();h[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*parseInt(d,10);h[1]=this.e[b].I[0][0][1]+
this.e[b].Na[1]*parseInt(d,10);h[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*parseInt(d,10);if(this.cb){var k=He(h,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.q.$b,this.q,this.q.cb,this.q.vd.Rd);this.q.j[b].j[parseInt(d,10)]=k;this.q.j[b].da(!0)}h=He(h,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.$b,this,!0,null);this.cb&&(h.q=h.Sa,h.q=this.q.j[b].j[parseInt(d,10)].Sa);c.j[parseInt(d,10)]=h;this.j[b].da(!0)}e=c.j[parseInt(e,10)];this.ze||(e.visible=!1);c=c.j[parseInt(d,10)];c.visible=!0;
c.Lc=1;this.ze&&(c.j[0].ib=!1,b!=this.Ab&&(c.visible=!1,c.Lc=0))}this.ze&&-1!=this.Ab&&Me(this,this.Ab)}a&&I.d.da.call(this)};I.prototype.__defineGetter__("dimensions",function(){return this.Ga});I.prototype.__defineSetter__("dimensions",function(a){this.Ga=a});I.prototype.__defineGetter__("spacing",function(){return this.oh});I.prototype.__defineSetter__("spacing",function(a){this.oh=a});I.prototype.__defineGetter__("bbox",function(){return this.yc});I.prototype.__defineGetter__("range",function(){return this.Qm});
I.prototype.__defineGetter__("dimensionsRAS",function(){return this.vx});I.prototype.__defineGetter__("volumeRendering",function(){return this.ze});I.prototype.__defineSetter__("volumeRendering",function(a){this.ze=a;this.da(!1)});I.prototype.__defineGetter__("visible",function(){return this.ib});I.prototype.__defineSetter__("visible",function(a){if(a)this.ib=a,this.da(!1);else{for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.ib=a;this.G=!0}});
I.prototype.__defineGetter__("center",function(){return this.Qa});I.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.Qa=a});I.prototype.__defineGetter__("volumeRenderingCache",function(){return this.Ip});I.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.Ip=a});I.prototype.__defineGetter__("image",function(){return this.Cf});
I.prototype.__defineGetter__("labelmap",function(){this.q||(this.q=new Ne(this));return this.q});I.prototype.__defineGetter__("indexX",function(){return this.lh});I.prototype.__defineSetter__("indexX",function(a){t(a)&&0<=a&&a<this.Sm.j.length&&(this.lh=a,this.da(!1))});I.prototype.__defineGetter__("indexY",function(){return this.mh});I.prototype.__defineSetter__("indexY",function(a){t(a)&&0<=a&&a<this.Tm.j.length&&(this.mh=a,this.da(!1))});I.prototype.__defineGetter__("indexZ",function(){return this.nh});
I.prototype.__defineSetter__("indexZ",function(a){t(a)&&0<=a&&a<this.Um.j.length&&(this.nh=a,this.da(!1))});I.prototype.__defineGetter__("windowLow",function(){return this.Hb});I.prototype.__defineSetter__("windowLow",function(a){this.Hb=a});I.prototype.__defineGetter__("windowHigh",function(){return this.Gb});I.prototype.__defineSetter__("windowHigh",function(a){this.Gb=a});I.prototype.__defineGetter__("borders",function(){return this.jh});
I.prototype.__defineSetter__("borders",function(a){this.jh=a});I.prototype.__defineGetter__("reslicing",function(){return this.Mx});I.prototype.__defineSetter__("reslicing",function(a){this.Mx=a});I.prototype.__defineSetter__("xNormX",function(a){this.e[0].D[0]=a});I.prototype.__defineGetter__("xNormX",function(){return this.e[0].D[0]});I.prototype.__defineSetter__("xNormY",function(a){this.e[0].D[1]=a});I.prototype.__defineGetter__("xNormY",function(){return this.e[0].D[1]});
I.prototype.__defineSetter__("xNormZ",function(a){this.e[0].D[2]=a});I.prototype.__defineGetter__("xNormZ",function(){return this.e[0].D[2]});I.prototype.__defineSetter__("xColor",function(a){this.e[0].Fa=a});I.prototype.__defineGetter__("xColor",function(){return this.e[0].Fa});I.prototype.__defineSetter__("yNormX",function(a){this.e[1].D[0]=a});I.prototype.__defineGetter__("yNormX",function(){return this.e[1].D[0]});I.prototype.__defineSetter__("yNormY",function(a){this.e[1].D[1]=a});
I.prototype.__defineGetter__("yNormY",function(){return this.e[1].D[1]});I.prototype.__defineSetter__("yNormZ",function(a){this.e[1].D[2]=a});I.prototype.__defineGetter__("yNormZ",function(){return this.e[1].D[2]});I.prototype.__defineSetter__("yColor",function(a){this.e[1].Fa=a});I.prototype.__defineGetter__("yColor",function(){return this.e[1].Fa});I.prototype.__defineSetter__("zNormX",function(a){this.e[2].D[0]=a});I.prototype.__defineGetter__("zNormX",function(){return this.e[2].D[0]});
I.prototype.__defineSetter__("zNormY",function(a){this.e[2].D[1]=a});I.prototype.__defineGetter__("zNormY",function(){return this.e[2].D[1]});I.prototype.__defineSetter__("zNormZ",function(a){this.e[2].D[2]=a});I.prototype.__defineGetter__("zNormZ",function(){return this.e[2].D[2]});I.prototype.__defineSetter__("zColor",function(a){this.e[2].Fa=a});I.prototype.__defineGetter__("zColor",function(){return this.e[2].Fa});
I.prototype.WK=function(a){this.j[a].visible=!1;for(var b=0;b<this.j[a].j.length;b++)"undefined"!=typeof this.j[a].j[b]&&(this.cb&&(this.q.j[a].j[b].remove(),this.q.j[a].j[b]=null),this.j[a].j[b].remove(),this.j[a].j[b]=null);wd(this.e[a].D,this.e[a].D);Je(a,this.e[a].Rm,this.e[a].D,this);this.j[a].j=[];alert("#VOLUME#",this.e[a].ba);this.j[a].j=Array(this.e[a].ba);this.cb&&(b=He(this.e[a].Rm,this.e[a].xd,this.e[a].D,this.e[a].Fa,this.yc,this.q.$b,this.q,this.q.cb,this.q.vd.Rd),this.q.j[a].j=[],this.q.j[a].j=
Array(this.e[a].ba),this.q.j[a].j[Math.floor(this.e[a].ba/2)]=b,this.q.j[a].da());b=He(this.e[a].Rm,this.e[a].xd,this.e[a].D,this.e[a].Fa,this.yc,this.$b,this,!0,null);this.cb&&(b.q=b.Sa,b.q=this.q.j[a].j[Math.floor(this.e[a].ba/2)].Sa);this.j[a].j[Math.floor(this.e[a].ba/2)]=b;0==a?(this.lh=Math.floor(this.e[a].ba/2),this.el=Math.floor(this.e[a].ba/2)):1==a?(this.mh=Math.floor(this.e[a].ba/2),this.fl=Math.floor(this.e[a].ba/2)):(this.nh=Math.floor(this.e[a].ba/2),this.gl=Math.floor(this.e[a].ba/
2));this.j[a].da();this.j[a].j[Math.floor(this.e[a].ba/2)].ib=!0};
function Me(a,b){if(!a.tp)if(!a.ze||!a.G&&b==a.Ab)a.Ab=b;else if(-1==a.Ip.indexOf(b))a.Ip.push(b),a.tp=!0,Oe(a,b),setTimeout(function(){var a=null;0<=this.Ab&&(a=this.j[this.Ab],a.visible=!1);var a=this.j[b],c=a.j.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.cb){var q=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.q.$b,this.q,
this.q.cb,this.q.vd.Rd);this.q.j[b].j[e]=q;this.q.j[b].da(!0)}m=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.$b,this,!0,null);m.j[0].ib=!1;this.cb&&(m.q=m.Sa,m.q=this.q.j[b].j[e].Sa);a.j[e]=m}a.j[e].ib=!0}Pe(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.cb){var q=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.q.$b,
this.q,this.q.cb,this.q.vd.Rd);this.q.j[b].j[e]=q;this.q.j[b].da(!0)}m=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.$b,this,!0,null);m.j[0].ib=!1;this.cb&&(m.q=m.Sa,m.q=this.q.j[b].j[e].Sa);a.j[e]=m}a.j[e].ib=!0}Pe(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.cb){var q=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,
this.q.$b,this.q,this.q.cb,this.q.vd.Rd);this.q.j[b].j[e]=q;this.q.j[b].da(!0)}m=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.$b,this,!0,null);m.j[0].ib=!1;this.cb&&(m.q=m.Sa,m.q=this.q.j[b].j[e].Sa);a.j[e]=m}a.j[e].ib=!0}Pe(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].Na[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].Na[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].Na[2]*e;if(this.cb){var q=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,
this.yc,this.q.$b,this.q,this.q.cb,this.q.vd.Rd);this.q.j[b].j[e]=q;this.q.j[b].da(!0)}m=He(m,this.e[b].xd,this.e[b].D,this.e[b].Fa,this.yc,this.$b,this,!0,null);m.j[0].ib=!1;this.cb&&(m.q=m.Sa,m.q=this.q.j[b].j[e].Sa);a.j[e]=m}a.j[e].ib=!0}Pe(this,1);setTimeout(function(){this.tp&&this.j[b].da(!0);this.Ab=b;this.G=!1;if(this.tp){var a=new Be;a.Ma=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.tp=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.j[a.Ab];
c.visible=!1;var c=a.j[b],d=c.j.length,e;for(e=0;e<d;e++)c.j[e].ib=!0;a.Ab=b;a.G=!1}}function Oe(a,b){var c=new ze;c.Ma=a;a.dispatchEvent(c);a.onComputing(b)}function Pe(a,b){var c=new Ae;c.Hj=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}I.prototype.dv=function(){};I.prototype.fv=function(){};I.prototype.ev=function(){};I.REORIENT_TRANSFORM_KEY="ot_"+B();v("X.volume.REORIENT_TRANSFORM_KEY",I.REORIENT_TRANSFORM_KEY);I.REORIENTED_DIMENSIONS_KEY="otd_"+B();
v("X.volume.REORIENTED_DIMENSIONS_KEY",I.REORIENTED_DIMENSIONS_KEY);I.ORIENTATION_KEY="or_"+B();v("X.volume.ORIENTATION_KEY",I.ORIENTATION_KEY);v("X.volume",I);v("X.volume.prototype.modified",I.prototype.da);v("X.volume.prototype.sliceInfoChanged",I.prototype.WK);v("X.volume.prototype.onComputing",I.prototype.dv);v("X.volume.prototype.onComputingProgress",I.prototype.fv);v("X.volume.prototype.onComputingEnd",I.prototype.ev);function Qe(){Ce.call(this);this.s="parserDCM"}w(Qe,Ce);
Qe.prototype.parse=function(a,b,c){var d;b.eh={};b.eh.$n=0;this.Oh(c,b);if(null==b.ea.length||b.za.length==b.ea.length){b.eh.$n=b.ea.length;d={};c={};for(var e=0;e<b.za.length;e++)d.hasOwnProperty(b.za[e].series_instance_uid)||(d[b.za[e].series_instance_uid]=[],c[b.za[e].series_instance_uid]={}),c[b.za[e].series_instance_uid].hasOwnProperty(b.za[e].sop_instance_uid)||(c[b.za[e].series_instance_uid][b.za[e].sop_instance_uid]=!0,d[b.za[e].series_instance_uid].push(b.za[e]));var e=Object.keys(d)[0],
h=d[e],k=h.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[e][0].dist=0):h[0].image_position_patient[0]!=h[1].image_position_patient[0]||h[0].image_position_patient[1]!=h[1].image_position_patient[1]||h[0].image_position_patient[2]!=h[1].image_position_patient[2]?(l="image_position_patient",d=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),e=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],
h[0].image_orientation_patient[5]),d=qd(d,e),h.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),h.sort(function(a,b){return a.dist-b.dist})):h[0].instance_number!=h[1].instance_number?(l="instance_number",h.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");isNaN(h[0].pixel_spacing[0])&&(h[0].pixel_spacing[0]=1);isNaN(h[0].pixel_spacing[1])&&
(h[0].pixel_spacing[1]=1);if(1<h.length){var e=function(){l="instance_number";h.sort(function(a,b){return a.instance_number-b.instance_number});h.forced_instance_ordering=!0;window.console.log('\n\nNRG WARNING: Slices were found unordered after XTK "image_position_patient" sorting. Forcing "instance_number" reordering.')},n=0;for(d=h.length;n<d-1;n++)if(1!=Math.abs(h[n].instance_number-h[n+1].instance_number)){e();break}}if(1<k)switch(l){case "image_position_patient":var n=h[0].image_position_patient,
m=h[1].image_position_patient;d=m[0]-n[0];var e=m[1]-n[1],q=m[2]-n[2];h[0].pixel_spacing[2]=Math.sqrt(d*d+e*e+q*q);break;case "instance_number":var p=1;if(!0===h.forced_instance_ordering){e=1;d=h.length;for(var n=h[0].image_position_patient,r=!1;e<d;e++)if(m=h[e].image_position_patient,n[0]!=m[0]||n[1]!=m[1]||n[2]!=m[2]){r=!0;break}r&&(window.console.log("\n\nNRG WARNING: Setting pixel_spacing according to image_position_patient even though we're using forced_instance_ordering."),d=m[0]-n[0],e=m[1]-
n[1],q=m[2]-n[2],p=Math.sqrt(d*d+e*e+q*q))}h[0].pixel_spacing[2]=p;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else h[0].pixel_spacing[2]=1;m=1;switch(l){case "image_position_patient":n=h[0].image_position_patient;p=h[k-1].image_position_patient;d=p[0]-n[0];e=p[1]-n[1];q=p[2]-n[2];d=Math.sqrt(d*d+e*e+q*q);m+=Math.round(d/h[0].pixel_spacing[2]);break;case "instance_number":m+=Math.abs(h[k-1].instance_number-h[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+
l)}"false"==b.reslicing.toString()&&(window.console.log('Forcing expexted slices to length of files because volume\'s "reslicing" property is set to false.'),window.console.log("Expected slices:",m),m=k);n=h[0].columns*h[0].rows;d=n*m;p=null;switch(h[0].Oj){case 8:p=new Uint8Array(d);window.console.log("Using a Uint8Array.");break;case 16:p=new Uint16Array(d);window.console.log("Using a Uint16Array.");break;case 32:p=new Uint32Array(d),window.console.log("Using a Uint32Array.");default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.oh=
h[0].pixel_spacing;for(r=0;r<k;r++){var u=h[r].data;d=0;switch(l){case "image_position_patient":d=h[r].image_position_patient[0]-h[0].image_position_patient[0];e=h[r].image_position_patient[1]-h[0].image_position_patient[1];q=h[r].image_position_patient[2]-h[0].image_position_patient[2];d=Math.sqrt(d*d+e*e+q*q)/h[0].pixel_spacing[2];break;case "instance_number":d=h[r].instance_number-h[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(u,Math.round(d)*
n)}c.data=p;b._data=p;b.Ga=[h[0].columns,h[0].rows,m];c.vF=b.Ga;m=De(p);k=m[0];m=m[1];c.min=b.Sd=b.Hb=k;c.max=b.Pb=b.Gb=m;-Infinity==b.sb&&(b.sb=k);Infinity==b.ub&&(b.ub=m);m=h[0].image_position_patient;k=zd();if("false"==b.reslicing.toString())"image_position_patient"==l||h.forced_instance_ordering?(window.console.log('NRG modification: Running an orthogonal transform because the volume\'s "reslicing" property is set to false.'),d=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],
h[0].image_orientation_patient[2]),e=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),d=qd(d,e),d.x=Math.round(d.x),d.y=Math.round(d.y),d.z=Math.round(d.z),L(k,0,-Math.round(h[0].image_orientation_patient[0])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[3])*h[0].pixel_spacing[1],-d.x*h[0].pixel_spacing[2],-m[0]),L(k,1,-Math.round(h[0].image_orientation_patient[1])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[4])*
h[0].pixel_spacing[1],-d.y*h[0].pixel_spacing[2],-m[1]),L(k,2,Math.round(h[0].image_orientation_patient[2])*h[0].pixel_spacing[0],Math.round(h[0].image_orientation_patient[5])*h[0].pixel_spacing[1],d.z*h[0].pixel_spacing[2],m[2]),L(k,3,0,0,0,1),window.console.log("IJKToRAS transform:\n",k),m=zd(),L(m,0,-Math.round(h[0].image_orientation_patient[0]),-Math.round(h[0].image_orientation_patient[3]),-d.x,0),L(m,1,-Math.round(h[0].image_orientation_patient[1]),-Math.round(h[0].image_orientation_patient[4]),
-d.y,0),L(m,2,Math.round(h[0].image_orientation_patient[2]),Math.round(h[0].image_orientation_patient[5]),d.z,0),L(m,3,0,0,0,1),window.console.log("Orthogonal Transform:\n",m),b[I.REORIENT_TRANSFORM_KEY]=m):"instance_number"==l?(L(k,0,-1,0,0,-m[0]),L(k,1,-0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]),L(k,3,0,0,0,1),"false"==b.reslicing.toString()&&(m=zd(),L(m,0,-1,0,0,0),L(m,1,-0,-1,-0,0),L(m,2,0,0,1,0),L(m,3,0,0,0,1),L(m,3,0,0,0,1),b[I.REORIENT_TRANSFORM_KEY]=m)):window.console.log("Unkown ordering mode - returning: "+
l);else switch(l){case "image_position_patient":d=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]);e=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]);d=qd(d,e);L(k,0,-h[0].image_orientation_patient[0]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[3]*h[0].pixel_spacing[1],-d.x*h[0].pixel_spacing[2],-m[0]);L(k,1,-h[0].image_orientation_patient[1]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[4]*
h[0].pixel_spacing[1],-d.y*h[0].pixel_spacing[2],-m[1]);L(k,2,h[0].image_orientation_patient[2]*h[0].pixel_spacing[0],h[0].image_orientation_patient[5]*h[0].pixel_spacing[1],d.z*h[0].pixel_spacing[2],m[2]);L(k,3,0,0,0,1);break;case "instance_number":L(k,0,-1,0,0,-m[0]);L(k,1,-0,-1,-0,-m[1]);L(k,2,0,0,1,m[2]);L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.te=k;c.ve=zd();Hd(c.te,c.ve);d=yd(0,0,0,1);m=xd();Jd(k,d,m);d=yd(1,1,1,1);e=xd();Jd(k,d,e);c.hh=[e[0]-
m[0],e[1]-m[1],e[2]-m[2]];k=Fe(k,[b.Ga[0],b.Ga[1],b.Ga[2]]);c.qd=[k[1]-k[0]+1,k[3]-k[2]+1,k[5]-k[4]+1];c.yf=[k[0],k[2],k[4]];"false"==b.reslicing.toString()&&(k=yd(b.Ga[0],b.Ga[1],b.Ga[2],1),m=xd(),Jd(b[I.REORIENT_TRANSFORM_KEY],k,m),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),b[I.REORIENTED_DIMENSIONS_KEY]=m,m[0]==b.Ga[2]?(b[I.ORIENTATION_KEY]="sagittal",c.qd[0]+=1*h[0].pixel_spacing[2],c.hh[0]=c.qd[0]/(h.length+1)):m[1]==b.Ga[2]?(b[I.ORIENTATION_KEY]="coronal",c.qd[1]+=1*h[0].pixel_spacing[2],
c.yf[1]-=1*h[0].pixel_spacing[2]):(b[I.ORIENTATION_KEY]="transverse",c.qd[2]+=2*h[0].pixel_spacing[2],c.hh[2]=c.qd[2]/(h.length+1),c.yf[2]-=h[0].pixel_spacing[2]),window.console.log("\n\nAssessed volume orientation: "+b[I.ORIENTATION_KEY]+"\nXTK Modifications may be applied to restore acquired properties."));b.Ze(c);b.Cf=Ke(this,b)}c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};
Qe.prototype.de=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Qe.prototype.Oh=function(a,b){this._data=a;if("undefined"==typeof b.za||null==b.za)b.za=[];var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,m=!1,q,p;p=[[18,100],[8,4368],[8,4384]];for(var r,u;e<d.length;){h=d[e++];k=d[e++];l=d[e++];n=d[e++];"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l);m=!1;if(void 0!==h&&void 0!==
k){switch(c.transfer_syntax_uid){case "1.2.840.10008.1.2.1":q="Little Endian Explicit";break;case "1.2.840.10008.1.2.2":q="Big Endian Explicit";break;case "1.2.840.10008.1.2":if(q="Little Endian Implicit","1.2.840.10008.1.2"==c.transfer_syntax_uid)for(r=0,u=p.length;r<u;r++)if(h===p[r][0]&&k===p[r][1]){m=!0;break}}if(m){n="parserDCM.js: Identified "+q+". Skipping DICOM adddress (0x"+h.toString(16)+", 0x"+k.toString(16)+")";window.console.log(n);continue}}switch(h){case 2:switch(k){case 16:l="";for(r=
0;r<n/2;r++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Qe.prototype.de(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Oj=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:l="";for(r=0;r<n/2;r++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);
l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=Qe.prototype.de(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(r=0;r<n/2;r++)k=d[e++],h=k&255,k=(k&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(k);break;case 19:l="";for(r=0;r<n/2;r++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.instance_number=parseInt(l,10);break;case 50:l="";for(r=0;r<n/
2;r++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(r=0;r<n/2;r++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Qe.prototype.de(d,e,l,n)}break;case 65534:switch(k){default:n=
0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(r=0;r<n/2;r++)k=d[e++],h=k&255,k=(k&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(k);break;default:e=Qe.prototype.de(d,e,l,n)}break;case 16:switch(k){case 8720:for(r=0;r<n/2;r++)e++;break;default:e=Qe.prototype.de(d,e,l,n)}break;default:e=Qe.prototype.de(d,e,l,n)}}switch(c.Oj){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=
new Uint32Array(c.columns*c.rows)}this.La=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Oj){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.za.push(c);return b};v("X.parserDCM",Qe);v("X.parserDCM.prototype.parse",Qe.prototype.parse);function Re(){Ce.call(this);this.s="parserVTK"}w(Re,Ce);
Re.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");var d=b.C,e=b.ca,h=new Uint8Array(c),k="";b.C=d=new ad(c.byteLength);b.ca=e=new ad(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Ee(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.Wm=this.Xm=null;this.Bj=[];this.ye=Qd;this.Ms=this.mi=this.gi=this.ni=!1;c=0;for(l=k%8;l--;)Se(this,h[c]),c++;for(l=.125*k^0;l--;)Se(this,h[c]),c++,Se(this,h[c]),c++,Se(this,h[c]),c++,Se(this,h[c]),c++,Se(this,h[c]),c++,Se(this,h[c]),c++,Se(this,h[c]),
c++,Se(this,h[c]),c++;c=this.Xm;var h=this.Wm,k=h.length,n=l=this.Bj.length;do{var m=this.Bj[l-n],q=m.length,p;for(p=0;p<q&&!("LINES"==this.ye&&p+1>=q);p++){var r=parseInt(m[p],10),u=c.get(r);d.add(u[0],u[1],u[2]);var z=r,y=u;"LINES"==this.ye?(z=parseInt(m[p+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.ye&&(0!=p&&p!=q-1||d.add(u[0],u[1],u[2]));r<k?(y=h.get(r),e.add(y[0],y[1],y[2]),"LINES"==this.ye?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.ye&&(0!=p&&p!=q-1||e.add(y[0],
y[1],y[2]))):(z=new K(u[0],u[1],u[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.ye?(z=new K(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.ye&&(0!=p&&p!=q-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.yd=this.ye;A.rd(this.s+".parse");d=new Ud;d.Ma=b;d.ua=a;this.dispatchEvent(d)};
function Se(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.ni=!0;a.gi=!1;a.mi=!1;c=parseInt(c[1],10);a.Xm=new ad(3*c);a.Wm=new ad(3*c);return;case "VERTICES":a.gi=!0;a.ni=!1;a.mi=!1;c=parseInt(c[1],10);if(3<=c)a.ye=Qd;else if(1==c)a.ye="POINTS";else throw Error("This VTK file is not supported!");a.Bj=[];return;case "TRIANGLE_STRIPS":a.gi=!0;a.ni=!1;a.mi=!1;a.ye="TRIANGLE_STRIPS";a.Bj=[];return;case "LINES":a.gi=!0;a.ni=!1;a.mi=!1;a.ye="LINES";a.Bj=
[];return;case "POLYGONS":a.gi=!0;a.ni=!1;a.mi=!1;a.ye="POLYGONS";a.Bj=[];return;case "POINT_DATA":a.mi=!0;a.ni=!1;a.gi=!1;return}if(a.ni)if(1==d||isNaN(parseFloat(e)))a.ni=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.Xm.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Xm.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Xm.add(d,e,c))}else a.gi?1==d||isNaN(parseFloat(e))?a.gi=!1:(c=c.slice(1),a.Bj.push(c)):
a.mi&&("NORMALS"==e?a.Ms=!0:1==d||isNaN(parseFloat(e))?(a.mi=!1,a.Ms=!1):a.Ms&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.Wm.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Wm.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Wm.add(d,e,c))))}v("X.parserVTK",Re);v("X.parserVTK.prototype.parse",Re.prototype.parse);function Te(){Ce.call(this);this.s="parserFSM";this.Ap=!1}w(Te,Ce);
Te.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");this._data=c;var d=b.C,e=b.ca;b.jl=[];var h=b.jl;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var n=new Uint32Array(e),m=new Float32Array(9*c);b.C=d=new ad(9*c);b.ca=e=new ad(9*c);var q;for(q=0;q<c;q++){var p=3*q,r=k[p],u=k[p+1],z=k[p+2];h.push(r);h.push(u);h.push(z);n[r]+=1;n[u]+=1;n[z]+=1;var p=3*r,y=3*u,J=3*z,T=l[p],Q=l[p+1],G=l[p+2],
u=l[y],z=l[y+1],r=l[y+2],R=l[J],Z=l[J+1],W=l[J+2];d.add(T,Q,G);d.add(u,z,r);d.add(R,Z,W);T=new K(T,Q,G);R=new K(R,Z,W);u=(new K(u,z,r)).clone().uc(T);z=R.clone().uc(T);u=qd(u,z).normalize();m[p]+=u.x;m[p+1]+=u.y;m[p+2]+=u.z;m[y]+=u.x;m[y+1]+=u.y;m[y+2]+=u.z;m[J]+=u.x;m[J+1]+=u.y;m[J+2]+=u.z}for(q=0;q<c;q++)p=3*q,r=k[p],u=k[p+1],z=k[p+2],p=3*r,y=3*u,J=3*z,h=new K(m[y],m[y+1],m[y+2]),l=new K(m[J],m[J+1],m[J+2]),p=(new K(m[p],m[p+1],m[p+2])).scale(1/n[r]).normalize(),h=h.scale(1/n[u]).normalize(),l=
l.scale(1/n[z]).normalize(),e.add(p.x,p.y,p.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this._data.byteLength-this.La);k=null;for(p=0;p<c.length;p++)if(99==c[p]&&114==c[p+1]&&97==c[p+2]&&115==c[p+3]){for(e=k=p+9;10!=c[p]&&p<c.length;)e++,p++;k=Ee(c.subarray(k,e)).split(" ");break}k&&(b.ac.CC(parseFloat(k[0])),b.ac.DC(parseFloat(k[1])),b.ac.EC(parseFloat(k[2])));b.yd=Qd;A.rd(this.s+".parse");c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};v("X.parserFSM",Te);
v("X.parserFSM.prototype.parse",Te.prototype.parse);var Ue={nt:function(a,b,c){return Ue.update(a,0,b,c)},update:function(a,b,c,d){var e=Ue.dE,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Ve;
Ve=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Ue.dE=Ve;function We(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,m,q,p,r;for(p=0;p<b;++p)a[p]>c&&(c=a[p]),a[p]<d&&(d=a[p]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(p=0;p<b;++p)if(a[p]===k){m=0;q=l;for(r=0;r<k;++r)m=m<<1|q&1,q>>=1;for(r=m;r<e;r+=n)h[r]=k<<16|p;++l}++k;l<<=1;n<<=1}return[h,c,d]};function Xe(a,b){this.it=[];this.kt=32768;this.Jf=this.bn=this.eb=this.ww=0;this.input=new Uint8Array(a);this.Cy=!1;this.lt=Ye;this.resize=!1;if(b||!(b={}))b.index&&(this.eb=b.index),b.bufferSize&&(this.kt=b.bufferSize),b.bufferType&&(this.lt=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.lt){case Ze:this.kc=32768;this.output=new Uint8Array(32768+this.kt+258);break;case Ye:this.kc=0;this.output=new Uint8Array(this.kt);this.ck=this.HF;this.Ly=this.jF;this.Ft=this.rF;break;default:throw Error("invalid inflate mode");
}}var Ze=0,Ye=1;
Xe.prototype.Ci=function(){for(;!this.Cy;){var a=$e(this,3);a&1&&(this.Cy=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.eb,c=this.output,d=this.kc,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.Jf=this.bn=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.lt){case Ze:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.kc=d,c=this.ck(),d=this.kc;break;case Ye:for(;d+h>c.length;)c=this.ck({pz:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.eb=b+=h;this.kc=
d;this.output=c;break;case 1:this.Ft(af,bf);break;case 2:cf(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.Ly()};
var df=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ef=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),ff=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),gf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),hf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jf=new Uint8Array(288),
kf,lf;kf=0;for(lf=jf.length;kf<lf;++kf)jf[kf]=143>=kf?8:255>=kf?9:279>=kf?7:8;var af=We(jf),nf=new Uint8Array(30),of,pf;of=0;for(pf=nf.length;of<pf;++of)nf[of]=5;var bf=We(nf);function $e(a,b){for(var c=a.bn,d=a.Jf,e=a.input,h=a.eb,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.bn=c>>>b;a.Jf=d-b;a.eb=h;return k}
function qf(a,b){for(var c=a.bn,d=a.Jf,e=a.input,h=a.eb,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.bn=c>>k;a.Jf=d-k;a.eb=h;return e&65535}
function cf(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=qf(this,b),d){case 16:for(d=3+$e(this,2);d--;)c[h++]=e;break;case 17:for(d=3+$e(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+$e(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=$e(a,5)+257,d=$e(a,5)+1,e=$e(a,4)+4,h=new Uint8Array(df.length),k;for(k=0;k<e;++k)h[df[k]]=$e(a,3);e=We(h);h=new Uint8Array(c);k=new Uint8Array(d);a.Ft(We(b.call(a,c,e,h)),We(b.call(a,d,e,k)))}f=Xe.prototype;
f.Ft=function(a,b){var c=this.output,d=this.kc;this.az=a;for(var e=c.length-258,h,k,l;256!==(h=qf(this,a));)if(256>h)d>=e&&(this.kc=d,c=this.ck(),d=this.kc),c[d++]=h;else for(h-=257,l=ef[h],0<ff[h]&&(l+=$e(this,ff[h])),h=qf(this,b),k=gf[h],0<hf[h]&&(k+=$e(this,hf[h])),d>=e&&(this.kc=d,c=this.ck(),d=this.kc);l--;)c[d]=c[d++-k];for(;8<=this.Jf;)this.Jf-=8,this.eb--;this.kc=d};
f.rF=function(a,b){var c=this.output,d=this.kc;this.az=a;for(var e=c.length,h,k,l;256!==(h=qf(this,a));)if(256>h)d>=e&&(c=this.ck(),e=c.length),c[d++]=h;else for(h-=257,l=ef[h],0<ff[h]&&(l+=$e(this,ff[h])),h=qf(this,b),k=gf[h],0<hf[h]&&(k+=$e(this,hf[h])),d+l>e&&(c=this.ck(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.Jf;)this.Jf-=8,this.eb--;this.kc=d};
f.ck=function(){var a=new Uint8Array(this.kc-32768),b=this.kc-32768,c=this.output;a.set(c.subarray(32768,a.length));this.it.push(a);this.ww+=a.length;c.set(c.subarray(b,b+32768));this.kc=32768;return c};
f.HF=function(a){var b=this.input.length/this.eb+1|0,c=this.input,d=this.output;a&&("number"===typeof a.pz&&(b=a.pz),"number"===typeof a.PE&&(b+=a.PE));2>b?(a=(c.length-this.eb)/this.az[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.Ly=function(){var a=0,b=this.output,c=this.it,d,e=new Uint8Array(this.ww+(this.kc-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.kc);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.kc;h<k;++h)e[a++]=b[h];this.it=[];return this.buffer=e};f.jF=function(){var a,b=this.kc;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var rf;for(rf=0;256>rf;++rf)for(var sf=rf,tf=7,sf=sf>>>1;sf;sf>>>=1)--tf;var uf=[],vf;for(vf=0;288>vf;vf++)switch(!0){case 143>=vf:uf.push([vf+48,8]);break;case 255>=vf:uf.push([vf-144+400,9]);break;case 279>=vf:uf.push([vf-256+0,7]);break;case 287>=vf:uf.push([vf-280+192,8]);break;default:throw"invalid literal: "+vf;}
var wf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(wf);function xf(){};function yf(a){this.input=a;this.eb=0;this.member=[]}
yf.prototype.Ci=function(){for(var a=this.input.length;this.eb<a;){var b=new xf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.eb;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=Ue.nt(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Xe(l,{index:d,bufferSize:e});b.data=e=d.Ci();d=d.eb;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(Ue.nt(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Ue.nt(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.eb=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function zf(){Ce.call(this);this.s="parserMGZ";this.Ap=!1}w(zf,Ce);
zf.prototype.parse=function(a,b,c,d){A.Pd(this.s+".parse");d&&(c=(new yf(new Uint8Array(c))).Ci(),c=c.buffer);d=this.Oh(c);var e=[d.Yu,d.Zu,d.$u];b.Ga=e;var h=d.JC;b.oh=h;c=d.min;var k=d.max;b.Sd=b.Hb=c;b.Pb=b.Gb=k;-Infinity==b.sb&&(b.sb=c);Infinity==b.ub&&(b.ub=k);c=zd();L(c,0,d.wf[0][0],d.wf[1][0],d.wf[2][0],0);L(c,1,d.wf[0][1],d.wf[1][1],d.wf[2][1],0);L(c,2,d.wf[0][2],d.wf[1][2],d.wf[2][2],0);L(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],m=0;3>m;++m)e[m]=d.wf[3][m]-(c[m+0]*h[0]*k+
c[m+4]*h[1]*l+c[m+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.te=c;d.ve=zd();Hd(d.te,d.ve);e=yd(0,0,0,1);h=xd();Jd(c,e,h);k=yd(1,1,1,1);e=xd();Jd(c,k,e);c=Fe(c,b.Ga);d.hh=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.qd=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.yf=[c[0],c[2],c[4]];b.Ze(d);A.rd(this.s+".parse");b.Cf=Ke(this,b);d=new Ud;d.Ma=b;d.ua=a;this.dispatchEvent(d)};
zf.prototype.Oh=function(a){this._data=a;a={version:0,gE:0,eE:0,PF:0,fE:0,Yu:0,Zu:0,$u:0,RI:0,type:0,BF:0,rB:0,CM:null,wf:null,JC:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.Yu=this.h("uint");a.Zu=this.h("uint");a.$u=this.h("uint");a.RI=this.h("uint");a.type=this.h("uint");a.BF=this.h("uint");a.rB=this.h("ushort");if(0<a.rB){a.JC=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.wf=b}this.La=
284;b=a.Yu*a.Zu*a.$u;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=De(a.data);a.min=b[0];a.max=b[1];this.La+16<this._data.byteLength&&(a.gE=this.h("float"),a.PF=this.h("float"),a.eE=this.h("float"),a.fE=this.h("float"));return a};v("X.parserMGZ",zf);v("X.parserMGZ.prototype.parse",zf.prototype.parse);function Af(){Ce.call(this);this.s="parserLBL"}w(Af,Ce);
Af.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");var d=b.jl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.h("uchar",c.byteLength),l=k.length,n=!1,m=0;for(c=1;c<l;c++)10==k[c-1]?(m=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Ee(k,m,c),10)),n=!1);k=b.$a.Za?b.$a.Za:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.$a.Za=k;b.$a.Cm=h;b.$a.G=!0;A.rd(this.s+".parse");d=new Ud;d.Ma=b;d.ua=a;this.dispatchEvent(d)};v("X.parserLBL",Af);v("X.parserLBL.prototype.parse",Af.prototype.parse);function Bf(){Ce.call(this);this.s="parserCRV";this.Ap=!1}w(Bf,Ce);
Bf.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");var d=b.jl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.La=3;var e=this.h("uint");this.h("uint");this.h("uint");var h=0,k=0,l=0,n=0,m=0,q=0,p=0,r=0,u=0,z=0,y=0;c=Array(2);var J=Array(2),T=this.h("float",e),Q;for(Q=0;Q<e;Q++){var G=T[Q];0==Q&&(c[0]=J[0]=G);0<=G?(h++,n+=G):(k++,l+=G);u+=G;y++;J[0]=Math.max(G,J[0]);c[0]=Math.min(G,c[0]);T[Q]=G}0!=h&&(m=n/h);0!=k&&(q=l/k);0!=y&&(z=u/y);for(y=u=l=n=0;y<
e;y++)G=T[y],Q=0,0<=G?(Q=Math.pow(G-m,2),n+=Q):(Q=Math.pow(G-q,2),l+=Q),Q=Math.pow(G-z,2),u+=Q;1<h&&(p=Math.sqrt(n/(h-1)));1<k&&(r=Math.sqrt(l/(k-1)));c[1]=q-2.5*r;J[1]=m+2.5*p;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=T[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.$a.Sd=c[1];b.$a.Pb=J[1];-Infinity==b.$a.sb&&(b.$a.sb=c[1]);Infinity==b.$a.ub&&(b.$a.ub=J[1]);b.$a.Za=T;b.$a.Cm=h;b.$a.G=!0;A.rd(this.s+".parse");d=new Ud;d.Ma=b;d.ua=a;this.dispatchEvent(d)};v("X.parserCRV",Bf);
v("X.parserCRV.prototype.parse",Bf.prototype.parse);function Cf(a,b){var c,d;this.input=a;this.eb=0;if(b||!(b={}))b.index&&(this.eb=b.index),b.verify&&(this.yL=b.verify);c=a[this.eb++];d=a[this.eb++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.sB=new Xe(a,{index:this.eb,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Cf.prototype.Ci=function(){var a=this.input,b;b=this.sB.Ci();this.eb=this.sB.eb;if(this.yL){var a=(a[this.eb++]<<24|a[this.eb++]<<16|a[this.eb++]<<8|a[this.eb++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Df(){Ce.call(this);this.s="parserRAW"}w(Df,Ce);
Df.prototype.parse=function(a,b,c,d){A.Pd(this.s+".parse");d&&(c=(new Cf(new Uint8Array(c))).Ci(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=De(d.data);c=e[0];e=e[1];d.min=b.Sd=b.Hb=c;d.max=b.Pb=b.Gb=e;-Infinity==b.sb&&(b.sb=c);Infinity==b.ub&&(b.ub=e);e=Ad();d.te=e;d.ve=Ad();var h=yd(0,0,0,1);c=xd();Jd(e,h,c);var k=yd(1,1,1,1),h=xd();Jd(e,k,h);e=Fe(e,b.Ga);d.hh=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.qd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.yf=[e[0],e[2],e[4]];b.Ze(d);A.rd(this.s+".parse");b.Cf=
Ke(this,b);d=new Ud;d.Ma=b;d.ua=a;this.dispatchEvent(d)};v("X.parserRAW",Df);v("X.parserRAW.prototype.parse",Df.prototype.parse);function Ef(){Ce.call(this);this.s="parserIMAGE"}w(Ef,Ce);Ef.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Rc(h,"load",this.lK.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};Ef.prototype.lK=function(a,b,c){b.Cf=a;b.pi=null;a=new Ud;a.Ma=c;a.ua=b;this.dispatchEvent(a)};v("X.parserIMAGE",Ef);v("X.parserIMAGE.prototype.parse",Ef.prototype.parse);function Ff(){Ce.call(this);this.s="parserLUT"}w(Ff,Ce);
Ff.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Ee(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.rd(this.s+".parse");c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};
v("X.parserLUT",Ff);v("X.parserLUT.prototype.parse",Ff.prototype.parse);function Gf(){Ce.call(this);this.s="parserMRC"}w(Gf,Ce);
Gf.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");c=this.Oh(c);var d=c.min,e=c.max;b.Ga=[c.fo,c.ho,c.io];b.oh=[c.xlen/c.SA,c.QC/c.TA,c.SC/c.UA];b.Sd=b.Hb=d;b.Pb=b.Gb=e;-Infinity==b.sb&&(b.sb=d);Infinity==b.ub&&(b.ub=e);e=zd();L(e,3,0,0,0,1);L(e,0,-1,0,0,c.fo);L(e,1,0,0,-1,c.ho);L(e,2,0,-1,0,c.io);c.te=e;c.ve=zd();Hd(c.te,c.ve);var h=yd(0,0,0,1),d=xd();Jd(e,h,d);var k=yd(1,1,1,1),h=xd();Jd(e,k,h);k=[c.fo,c.ho,c.io];e=Fe(e,k);c.hh=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.qd=[e[1]+e[0]+1,e[3]-e[2]+1,
e[5]-e[4]+1];c.yf=[e[0],e[2],e[4]];b.Ga=k;b.Ze(c);b.Cf=Ke(this,b);A.rd(this.s+".parse");c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};
Gf.prototype.Oh=function(a){this._data=a;a={fo:0,ho:0,io:0,mode:0,LO:0,MO:0,NO:0,SA:0,TA:0,UA:0,xlen:0,QC:0,SC:0,alpha:0,beta:0,gamma:0,yI:0,zI:0,AI:0,gt:0,Op:0,Nj:0,zO:0,next:0,pF:0,extra:null,SI:0,UI:0,extra:null,$H:0,xO:0,XH:0,lens:0,OI:0,QI:0,wL:0,xL:0,oL:null,CL:0,EL:0,FL:0,nO:0,YO:0,AK:0,TI:0,data:null,min:Infinity,max:-Infinity,HO:0,pC:null,XO:null,TO:null,orientation:null,KO:null};this.La=0;a.fo=this.h("sint");a.ho=this.h("sint");a.io=this.h("sint");a.mode=this.h("sint");var b=a.fo*a.ho*a.io;
this.La=1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.La=28;a.SA=this.h("sint");a.TA=this.h("sint");a.UA=this.h("sint");a.xlen=this.h("float");a.QC=this.h("float");a.SC=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.yI=this.h("sint");a.zI=this.h("sint");a.AI=this.h("sint");a.gt=this.h("float");a.Op=this.h("float");a.Nj=this.h("float");a.yO=this.h("sint");a.next=this.h("sint");a.pF=this.h("short");a.SI=this.h("short");a.UI=this.h("short");a.$H=this.h("sint");a.wO=this.h("sint");a.XH=this.h("short");a.lens=this.h("short");a.OI=this.h("short");a.QI=this.h("short");a.wL=this.h("short");a.xL=this.h("short");a.oL=this.h("float",6);this.La=196;a.CL=this.h("float");a.EL=
this.h("float");a.FL=this.h("float");this.La=216;a.AK=this.h("float");a.TI=this.h("sint");a.DO=this.h("schar",10);if(0!=a.next)switch(this.La=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.Nj-(a.Op-a.Nj)?(a.min=a.gt,a.max=a.Nj+(a.Nj-a.gt)):(a.min=a.Nj-(a.Op-a.Nj),a.max=a.Op);return a};v("X.parserMRC",Gf);v("X.parserMRC.prototype.parse",Gf.prototype.parse);function Hf(){Ce.call(this);this.s="parserNRRD"}w(Hf,Ce);
Hf.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ee(c,0,k-2);h=k+1;break}var l,n,m,q,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.mI=!0:!l.match(/^#/)&&(q=l.match(/(.*):(.*)/))&&(n=q[1].trim(),l=q[2].trim(),(m=this.LF[n])?m.call(this,l):this[n]=l);if(!this.mI)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.Ub&&(this.Ub=[new K(1,0,0),new K(0,1,0),new K(0,0,1)],this.hw))for(d=[],q=0;2>=q;q++)d.push(isNaN(this.hw[q])?void 0:this.Ub[q].scale(this.hw[q]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new yf(new Uint8Array(h))).Ci();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.fi(h);q=De(c.data);h=c.min=q[0];q=c.max=q[1];b.Sd=b.Hb=h;b.Pb=b.Gb=q;b.Ga=[this.cw[0],this.cw[1],this.cw[2]];d=
(new K(this.Ub[0][0],this.Ub[0][1],this.Ub[0][2])).Vf();e=(new K(this.Ub[1][0],this.Ub[1][1],this.Ub[1][2])).Vf();k=(new K(this.Ub[2][0],this.Ub[2][1],this.Ub[2][2])).Vf();b.oh=[d,e,k];-Infinity==b.sb&&(b.sb=h);Infinity==b.ub&&(b.ub=q);d=q=1;"left-posterior-superior"==this.pC&&(d=q=-1);h=Ad();L(h,0,q*this.Ub[0][0],q*this.Ub[1][0],q*this.Ub[2][0],q*this.gw[0]);L(h,1,d*this.Ub[0][1],d*this.Ub[1][1],d*this.Ub[2][1],d*this.gw[1]);L(h,2,1*this.Ub[0][2],1*this.Ub[1][2],1*this.Ub[2][2],1*this.gw[2]);L(h,
3,0,0,0,1);c.te=h;c.ve=zd();Hd(c.te,c.ve);d=yd(0,0,0,1);q=xd();Jd(h,d,q);e=yd(1,1,1,1);d=xd();Jd(h,e,d);h=Fe(h,b.Ga);c.hh=[d[0]-q[0],d[1]-q[1],d[2]-q[2]];c.qd=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.yf=[h[0],h[2],h[4]];b.Ze(c);A.rd(this.s+".parse");b.Cf=Ke(this,b);c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};
Hf.prototype.LF={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.fi=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.fi=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.fi=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.fi=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.fi=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.fi=Uint32Array;break;case "float":this.fi=Float32Array;break;case "double":this.fi=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.tO=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Di=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.cw=e},space:function(a){return this.pC=a},"space origin":function(a){return this.gw=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Ub=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.hw=e}};v("X.parserNRRD",Hf);v("X.parserNRRD.prototype.parse",Hf.prototype.parse);function If(){Ce.call(this);this.s="parserSTL"}w(If,Ce);
If.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");this._data=c;var d=b.C,e=b.ca;if("solid"==Ee(this.h("uchar",5))){b.C=d=new ad(c.byteLength);b.ca=e=new ad(c.byteLength);var h=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,m;for(m=0;m<c;m++)if(10==e[m]){if(k||l){var q=Ee(e,n,m).split(" "),l=parseFloat(q[0]),p=parseFloat(q[1]),q=parseFloat(q[2]);k?(d.add(l,p,q),d.add(l,p,q),d.add(l,p,q)):h.add(l,p,q);l=k=!1}}else 32==e[m-1]&&(102==e[m]?(n=m+=13,k=!0):118==e[m]&&(n=m+=7,
l=!0))}else for(this.La=80,h=this.h("uint"),b.C=d=new ad(9*h),b.ca=e=new ad(9*h),c=c=0;c<h;c++)k=this.h("float",12),n=k[0],m=k[1],l=k[2],e.add(n,m,l),e.add(n,m,l),e.add(n,m,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.La+=2;A.rd(this.s+".parse");h=new Ud;h.Ma=b;h.ua=a;this.dispatchEvent(h)};v("X.parserSTL",If);v("X.parserSTL.prototype.parse",If.prototype.parse);function Jf(){Ce.call(this);this.s="parserNII"}w(Jf,Ce);
Jf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new yf(new Uint8Array(d))).Ci(),d=d.buffer);c=this.Oh(d);d=c.min;e=c.max;b.Sd=b.Hb=d;b.Pb=b.Gb=e;-Infinity==b.sb&&(b.sb=d);Infinity==b.ub&&(b.ub=e);d=zd();L(d,3,0,0,0,1);if(0<c.Kv){var e=0,h=c.oB,k=c.pB,l=c.qB,n=1,m=1,q=1,p=c.lB,r=c.mB,u=c.nB,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.Zf[1]&&(n=c.Zf[1]);
0<c.Zf[2]&&(m=c.Zf[2]);0<c.Zf[2]&&(q=c.Zf[3]);0>c.Zf[0]&&(q=-q);L(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*m,2*(h*l+e*k)*q,p);L(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*m,2*(k*l-e*h)*q,r);L(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*m,(e*e+l*l-k*k-h*h)*q,u)}else 0<c.kC?(e=c.qC,h=c.rC,k=c.sC,L(d,0,e[0],e[1],e[2],e[3]),L(d,1,h[0],h[1],h[2],h[3]),L(d,2,k[0],k[1],k[2],k[3])):0==c.Kv?(L(d,0,c.Zf[1],0,0,0),L(d,1,0,c.Zf[2],0,0),L(d,2,0,0,c.Zf[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.te=d;c.ve=zd();Hd(c.te,c.ve);
h=yd(0,0,0,1);e=xd();Jd(d,h,e);k=yd(1,1,1,1);h=xd();Jd(d,k,h);k=[c.Di[1],c.Di[2],c.Di[3]];d=Fe(d,k);c.hh=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.qd=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.yf=[d[0],d[2],d[4]];b.Ga=k;b.Ze(c);b.Cf=Ke(this,b);c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};
Jf.prototype.Oh=function(a){this._data=a;a={VK:0,data_type:null,qF:null,JF:0,IK:0,rK:0,uF:null,Di:null,gI:0,hI:0,iI:0,eI:0,Et:0,dF:0,$K:0,Zf:null,LC:0,HK:0,GK:0,ZK:0,XK:null,DL:null,fF:0,gF:0,YK:0,qL:0,DH:0,EH:0,sF:null,aF:null,Kv:0,kC:0,oB:0,pB:0,qB:0,lB:0,mB:0,nB:0,qC:null,rC:null,sC:null,fI:null,magic:null,data:null,min:Infinity,max:-Infinity};a.VK=this.h("uint");a.data_type=this.h("uchar",10);a.qF=this.h("uchar",18);a.JF=this.h("uint");a.IK=this.h("ushort");a.rK=this.h("uchar");a.uF=this.h("uchar");
a.Di=this.h("ushort",8);a.gI=this.h("float");a.hI=this.h("float");a.iI=this.h("float");a.eI=this.h("ushort");a.Et=this.h("ushort");a.dF=this.h("ushort");a.$K=this.h("ushort");a.Zf=this.h("float",8);a.LC=this.h("float");a.HK=this.h("float");a.GK=this.h("float");a.ZK=this.h("ushort");a.XK=this.h("uchar");a.DL=this.h("uchar");a.fF=this.h("float");a.gF=this.h("float");a.YK=this.h("float");a.qL=this.h("float");a.DH=this.h("uint",1);a.EH=this.h("uint",1);a.sF=this.h("uchar",80);a.aF=this.h("uchar",24);
a.Kv=this.h("ushort");a.kC=this.h("ushort");a.oB=this.h("float");a.pB=this.h("float");a.qB=this.h("float");a.lB=this.h("float");a.mB=this.h("float");a.nB=this.h("float");a.qC=this.h("float",4);a.rC=this.h("float",4);a.sC=this.h("float",4);a.fI=this.h("uchar",16);a.magic=this.h("uchar",4);this.La=parseInt(a.LC,10);var b=a.Di[1]*a.Di[2]*a.Di[3];switch(a.Et){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",
b);break;case 32:a.data=this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.Et);}b=De(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Jf);v("X.parserNII.prototype.parse",Jf.prototype.parse);function Kf(){Ce.call(this);this.s="parserTRK"}w(Kf,Ce);
Kf.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");var d=b.C,e=b.ca,h=b.zc;this._data=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var n=this.h("uint");this.h("uint");var m=
this.h("uint"),q=[],p=[],r=Infinity,u=-Infinity,z=null,y=null,J=null,T=null,e=d=null,Q=this.h("uint",(this._data.byteLength-1E3)/4);this.La=m;for(var G=this.h("float",(this._data.byteLength-1E3)/4),R=0,m=h=0;m<n;m++){for(var Z=Q[R],W=new ad(3*Z),ua=0,na=0;na<Z;na++){var wa=G[R+3*na+na*l+1],Ma=G[R+3*na+na*l+2],Ga=G[R+3*na+na*l+3],wa=wa/k[0],Ma=Ma/k[1],Ga=Ga/k[2];W.add(wa,Ma,Ga);if(0<na)var Na=W.get(na-1),ua=ua+Math.sqrt(Math.pow(wa-Na[0],2)+Math.pow(Ma-Na[1],2)+Math.pow(Ga-Na[2],2));na<Z-1&&(h+=6)}R+=
3*Z+Z*l+1;na=W.Gf;Z=W.Df;wa=W.Hf;Ma=W.Ef;Ga=W.If;Na=W.Ff;if(!z||na<z)z=na;if(!y||Z>y)y=Z;if(!J||wa<J)J=wa;if(!T||Ma>T)T=Ma;if(!d||Ga<d)d=Ga;if(!e||Na>e)e=Na;q.push(W);p.push(ua)}k=(z+y)/2;J=(J+T)/2;l=(d+e)/2;T=new Float32Array(h);b.C=d=new ad(h);b.ca=e=new ad(h);b.zc=h=new ad(h);for(m=z=0;m<n;m++)for(y=q[m],Q=y.count,ua=p[m],r=Math.min(r,ua),u=Math.max(u,ua),na=0;na<Q-1;na++){R=y.get(na);G=y.get(na+1);d.add(R[0],R[1],R[2]);d.add(G[0],G[1],G[2]);var W=R[0]-k,Z=R[1]-J,wa=R[2]-l,Ma=Math.sqrt(W*W+Z*Z+
wa*wa),Ga=G[0]-k,Na=G[1]-J,la=G[2]-l,xa=Math.sqrt(Ga*Ga+Na*Na+la*la);e.add(W/Ma,Z/Ma,wa/Ma);e.add(Ga/xa,Na/xa,la/xa);G=[Math.abs(G[0]-R[0]),Math.abs(G[1]-R[1]),Math.abs(G[2]-R[2])];R=Math.sqrt(G[0]*G[0]+G[1]*G[1]+G[2]*G[2]);G[0]/=R;G[1]/=R;G[2]/=R;h.add(G[0],G[1],G[2]);h.add(G[0],G[1],G[2]);T[z++]=ua;T[z++]=ua;T[z++]=ua;T[z++]=ua;T[z++]=ua;T[z++]=ua}b.yd="LINES";n=new Sd;n.Sd=r;n.Pb=u;n.sb=r;n.ub=u;n.Cm=T;n.Lx=!1;n.G=!0;b.$a=n;r=!1;for(m=0;16>m;m++)if(0!=c[m]){r=!0;break}!1==r&&(c[0]=c[5]=c[10]=c[15]=
1);A.rd(this.s+".parse");A.t.yw(c,b.ac.tb);c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};v("X.parserTRK",Kf);v("X.parserTRK.prototype.parse",Kf.prototype.parse);function Lf(){Ce.call(this);this.s="parserOBJ"}w(Lf,Ce);
Lf.prototype.parse=function(a,b,c){A.Pd(this.s+".parse");this._data=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.C=new ad(c);b.ca=new ad(c);var h=b.C,k=b.ca,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var m=Ee(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==m[0])e.push([parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])]);else if("f"==m[0]){var q=e[parseInt(m[1],10)-1],l=e[parseInt(m[2],10)-1],m=e[parseInt(m[3],10)-1];h.add(q[0],q[1],q[2]);h.add(l[0],l[1],l[2]);h.add(m[0],m[1],m[2]);q=new K(q[0],q[1],
q[2]);m=new K(m[0],m[1],m[2]);l=qd((new K(l[0],l[1],l[2])).uc(q),m.uc(q));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.rd(this.s+".parse");c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};v("X.parserOBJ",Lf);v("X.parserOBJ.prototype.parse",Lf.prototype.parse);function Mf(){$c.call(this);this.s="loader";this.hl=new gd;this.Pm=0}w(Mf,$c);function Nf(a,b){a.Pm+=b/a.hl.Bh()/3;a.Pm=Math.min(1,a.Pm);var c=new ye;c.Hj=a.Pm;a.dispatchEvent(c)}function Of(a){a=a.ea.Ep;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Pf))throw Error("The "+b+" file format is not supported.");return[a,b,Pf[b][0],Pf[b][1],Pf[b][2]]}
Mf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!id(this.hl.vb,a.bd)||this.hl.get(a.bd)){this.hl.set(a.bd,!1);var c=Of(a)[0];if(null!=a.rg)this.parse(null,a,b);else{var d=new XMLHttpRequest;F(d,"abort",this.oz.bind(this,d,a,b));F(d,"error",this.oz.bind(this,d,a,b));F(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Mf.prototype.parse=function(a,b,c){Nf(this,1);setTimeout(function(){var d=Of(b),e=d[3],d=new d[2];Rc(d,ee,this.complete.bind(this));var h=b.rg;null==h&&(h=a.response,b.rg=h);d.parse(b,c,h,e)}.bind(this),100)};Mf.prototype.complete=function(a){Nf(this,1);setTimeout(function(){var b=a.ua,c=a.Ma;b.ea.G=!1;b.G=!0;c.da();this.hl.set(b.bd,!0)}.bind(this),100)};Mf.prototype.oz=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Pf={OBJ:[Lf,null],OFF:[Le,null],STL:[If,null],VTK:[Re,null],TRK:[Kf,null],MRC:[Gf,null],ST:[Gf,null],FSM:[Te,null],INFLATED:[Te,null],SMOOTHWM:[Te,null],SPHERE:[Te,null],PIAL:[Te,null],ORIG:[Te,null],NRRD:[Hf,null],NII:[Jf,null],GZ:[Jf,null],DCM:[Qe,null],DICOM:[Qe,null],"":[Qe,null],CRV:[Bf,null],LABEL:[Af,null],MGH:[zf,!1],MGZ:[zf,!0],RAW:[Df,!1],RZ:[Df,!0],TXT:[Ff,null],LUT:[Ff,null],PNG:[Ef,"png"],JPG:[Ef,"jpeg"],JPEG:[Ef,"jpeg"],GIF:[Ef,"gif"]};function Qf(){Ce.call(this);this.s="parserIMA"}w(Qf,Ce);
Qf.prototype.parse=function(a,b,c){b.eh={};b.eh.$n=0;this.Oh(c,b);if(null==b.ea.length||b.za.length==b.ea.length){b.eh.$n=b.ea.length;var d={};c={};for(var e=0;e<b.za.length;e++)d.hasOwnProperty(b.za[e].series_instance_uid)||(d[b.za[e].series_instance_uid]=[],c[b.za[e].series_instance_uid]={}),c[b.za[e].series_instance_uid].hasOwnProperty(b.za[e].sop_instance_uid)||(c[b.za[e].series_instance_uid][b.za[e].sop_instance_uid]=!0,d[b.za[e].series_instance_uid].push(b.za[e]));var h=Object.keys(d)[0],e=
d[h],k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=qd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],m=d[1]-n[1],q=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+m*m+
q*q);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,p=e[k-1].image_position_patient,h=p[0]-n[0],m=p[1]-n[1],q=p[2]-n[2],h=Math.sqrt(h*h+m*m+q*q),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;p=null;switch(e[0].Oj){case 8:p=new Uint8Array(h);break;case 16:p=new Uint16Array(h);break;case 32:p=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.oh=e[0].pixel_spacing;for(var r=0;r<k;r++){var u=e[r].data,h=0;switch(l){case "image_position_patient":h=e[r].image_position_patient[0]-e[0].image_position_patient[0];m=e[r].image_position_patient[1]-
e[0].image_position_patient[1];q=e[r].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+m*m+q*q)/e[0].pixel_spacing[2];break;case "instance_number":h=e[r].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(u,h*n)}c.data=p;b._data=p;b.Ga=[e[0].columns,e[0].rows,d];c.vF=b.Ga;d=De(p);k=d[0];d=d[1];c.min=b.Sd=b.Hb=k;c.max=b.Pb=b.Gb=d;-Infinity==b.sb&&(b.sb=k);Infinity==b.ub&&(b.ub=d);m=e[0].image_position_patient;
k=zd();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=qd(d,h);L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-m[0]);L(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-m[1]);L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],m[2]);L(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=qd(d,h),L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[0]),L(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[1]),L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,m[2])):(L(k,0,1,0,0,-m[0]),L(k,1,0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]));L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.te=k;c.ve=zd();Hd(c.te,c.ve);l=yd(0,0,0,1);e=xd();Jd(k,l,e);l=yd(1,1,1,1);d=xd();Jd(k,l,d);c.hh=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Fe(k,[b.Ga[0],b.Ga[1],b.Ga[2]]);c.qd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.yf=[e[0],e[2],e[4]];b.Ze(c);b.Cf=Ke(this,b)}c=new Ud;c.Ma=b;c.ua=a;this.dispatchEvent(c)};
Qf.prototype.de=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Qf.prototype.Oh=function(a,b){this._data=a;if("undefined"==typeof b.za||null==b.za)b.za=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,m=[[8,4368],[8,4384]],q=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],q=!1,p=0,r=m.length;p<r;p++)if(h===m[p][0]&&k===m[p][1]){q=!0;break}if(q)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Qf.prototype.de(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Oj=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Qf.prototype.de(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Qf.prototype.de(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Qf.prototype.de(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Qf.prototype.de(d,e,l,n)}break;case 16:switch(k){case 8720:for(p=0;p<n/2;p++)e++;break;default:e=
Qf.prototype.de(d,e,l,n)}break;default:e=Qf.prototype.de(d,e,l,n)}}switch(c.Oj){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.La=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Oj){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.za.push(c);return b};v("X.parserIMA",Qf);
v("X.parserIMA.prototype.parse",Qf.prototype.parse);var Rf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Sf(a){if(Tf){Tf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Sf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Tf=!0,Error();}}return a.match(Rf)}var Tf=gc;function Uf(a,b){Yc.call(this);this.Sf=a||1;this.nm=b||ba;this.jt=ta(this.nL,this);this.Au=ya()}w(Uf,Yc);f=Uf.prototype;f.enabled=!1;f.ma=null;f.setInterval=function(a){this.Sf=a;this.ma&&this.enabled?(this.stop(),this.start()):this.ma&&this.stop()};
f.nL=function(){if(this.enabled){var a=ya()-this.Au;0<a&&a<.8*this.Sf?this.ma=this.nm.setTimeout(this.jt,this.Sf-a):(this.ma&&(this.nm.clearTimeout(this.ma),this.ma=null),this.dispatchEvent(Vf),this.enabled&&(this.ma=this.nm.setTimeout(this.jt,this.Sf),this.Au=ya()))}};f.start=function(){this.enabled=!0;this.ma||(this.ma=this.nm.setTimeout(this.jt,this.Sf),this.Au=ya())};f.stop=function(){this.enabled=!1;this.ma&&(this.nm.clearTimeout(this.ma),this.ma=null)};
f.f=function(){Uf.d.f.call(this);this.stop();delete this.nm};var Vf="tick";function Wf(a,b,c){if(ja(a))c&&(a=ta(a,c));else if(a&&"function"==typeof a.handleEvent)a=ta(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Xf(a){return"function"==typeof a.Bh?a.Bh():ha(a)||s(a)?a.length:mb(a)}function Yf(a){if("function"==typeof a.gk)return a.gk();if(s(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return nb(a)}function Zf(a){if("function"==typeof a.An)return a.An();if("function"!=typeof a.gk){if(ha(a)||s(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return ob(a)}}
function $f(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ha(a)||s(a))D(a,b,void 0);else for(var c=Zf(a),d=Yf(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function ag(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ha(a)||s(a))return Eb(a,b,void 0);for(var c=Zf(a),d=Yf(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function bg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function cg(){}cg.prototype.Fy=null;function dg(a){var b;(b=a.Fy)||(b={},eg(a)&&(b[0]=!0,b[1]=!0),b=a.Fy=b);return b};var fg;function gg(){}w(gg,cg);function hg(a){return(a=eg(a))?new ActiveXObject(a):new XMLHttpRequest}function eg(a){if(!a.pA&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.pA=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.pA}fg=new gg;function ig(a){this.vb=new gd;a&&this.Zs(a)}function jg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ma(a):b.substr(0,1)+a}f=ig.prototype;f.Bh=function(){return this.vb.Bh()};f.add=function(a){this.vb.set(jg(a),a)};f.Zs=function(a){a=Yf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.bg=function(a){a=Yf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.vb.remove(jg(a))};f.clear=function(){this.vb.clear()};f.Qn=function(){return this.vb.Qn()};
f.contains=function(a){a=jg(a);return id(this.vb.vb,a)};f.uA=function(a){var b=new ig;a=Yf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.gk=function(){return this.vb.gk()};f.clone=function(){return new ig(this)};f.Bl=function(a){return this.Bh()==Xf(a)&&kg(this,a)};
function kg(a,b){var c=Xf(b);if(a.Bh()>c)return!1;!(b instanceof ig)&&5<c&&(b=new ig(b));return ag(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.wt?c.wt(a):ha(c)||s(c)?Hb(c,a):pb(c,a)})};function lg(a){var b;b||(b=mg(a||arguments.callee.caller,[]));return b}
function mg(a,b){var c=[];if(Hb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(ng(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=ng(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(mg(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ng(a){if(og[a])return og[a];a=String(a);if(!og[a]){var b=/function ([^\(]+)/.exec(a);og[a]=b?b[1]:"[Anonymous]"}return og[a]}var og={};function pg(a,b,c,d,e){this.reset(a,b,c,d,e)}pg.prototype.mz=null;pg.prototype.lz=null;var qg=0;pg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||qg++;d||ya();this.Yn=a;this.NI=b;delete this.mz;delete this.lz};pg.prototype.PB=function(a){this.Yn=a};function rg(a){this.uk=a;this.kA=this.Ac=this.Yn=this.Pa=null}function sg(a,b){this.name=a;this.value=b}sg.prototype.toString=function(){return this.name};var tg=new sg("SEVERE",1E3),ug=new sg("CONFIG",700),vg=new sg("FINE",500);f=rg.prototype;f.getName=function(){return this.uk};f.getParent=function(){return this.Pa};f.Vt=function(){this.Ac||(this.Ac={});return this.Ac};f.PB=function(a){this.Yn=a};
function wg(a){if(a.Yn)return a.Yn;if(a.Pa)return wg(a.Pa);eb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=wg(this).value)for(ja(b)&&(b=b()),a=this.Lz(a,b,c,rg.prototype.log),b="log:"+a.NI,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.kA)for(var e=0,h=void 0;h=c.kA[e];e++)h(d);b=b.getParent()}};
f.Lz=function(a,b,c,d){a=new pg(a,String(b),this.uk);if(c){a.mz=c;var e;d=d||rg.prototype.Lz;try{var h;var k=da("window.location.href");if(s(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.FO||"Not available"}catch(m){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(q){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+La(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+La(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+La(lg(d)+"-> ")}catch(p){e="Exception trying to expose exception! You win, we lose. "+p}a.lz=e}return a};f.Co=function(a){this.Pa=a};var xg={},yg=null;
function zg(a){yg||(yg=new rg(""),xg[""]=yg,yg.PB(ug));var b;if(!(b=xg[a])){b=new rg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=zg(a.substr(0,c));c.Vt()[d]=b;b.Co(c);xg[a]=b}return b};function Ag(a,b){a&&a.log(vg,b,void 0)};function Bg(a){Yc.call(this);this.headers=new gd;this.js=a||null;this.ri=!1;this.is=this.Aa=null;this.Wn=this.AA=this.Zq="";this.nk=this.qu=this.Iq=this.Pt=!1;this.Xo=0;this.Zr=null;this.zB=Cg;this.ds=this.BL=!1}w(Bg,Yc);var Cg="",Dg=Bg.prototype,Eg=zg("goog.net.XhrIo");Dg.jf=Eg;var Fg=/^https?$/i,Gg=["POST","PUT"],Hg=[];function Ig(a,b){var c=new Bg;Hg.push(c);b&&c.B("complete",b);c.Fu("ready",c.iF);c.send(a,void 0,void 0,void 0)}f=Bg.prototype;f.iF=function(){this.g();Kb(Hg,this)};
f.send=function(a,b,c,d){if(this.Aa)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Zq+"; newUri="+a);b=b?b.toUpperCase():"GET";this.Zq=a;this.Wn="";this.AA=b;this.Pt=!1;this.ri=!0;this.Aa=this.js?hg(this.js):hg(fg);this.is=this.js?dg(this.js):dg(fg);this.Aa.onreadystatechange=ta(this.cB,this);try{Ag(this.jf,Jg(this,"Opening Xhr")),this.qu=!0,this.Aa.open(b,String(a),!0),this.qu=!1}catch(e){Ag(this.jf,Jg(this,"Error opening Xhr: "+e.message));Kg(this,e);return}a=c||"";var h=
this.headers.clone();d&&$f(d,function(a,b){h.set(b,a)});d=Fb(h.An());c=ba.FormData&&a instanceof ba.FormData;!Hb(Gg,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.Aa.setRequestHeader(b,a)},this);this.zB&&(this.Aa.responseType=this.zB);"withCredentials"in this.Aa&&(this.Aa.withCredentials=this.BL);try{Lg(this),0<this.Xo&&(this.ds=Mg(this.Aa),Ag(this.jf,Jg(this,"Will abort after "+this.Xo+"ms if incomplete, xhr2 "+this.ds)),this.ds?(this.Aa.timeout=
this.Xo,this.Aa.ontimeout=ta(this.zC,this)):this.Zr=Wf(this.zC,this.Xo,this)),Ag(this.jf,Jg(this,"Sending request")),this.Iq=!0,this.Aa.send(a),this.Iq=!1}catch(k){Ag(this.jf,Jg(this,"Send error: "+k.message)),Kg(this,k)}};function Mg(a){return E&&nc(9)&&t(a.timeout)&&ca(a.ontimeout)}function Gb(a){return"content-type"==a.toLowerCase()}f.zC=function(){"undefined"!=typeof aa&&this.Aa&&(this.Wn="Timed out after "+this.Xo+"ms, aborting",Ag(this.jf,Jg(this,this.Wn)),this.dispatchEvent("timeout"),this.abort(8))};
function Kg(a,b){a.ri=!1;a.Aa&&(a.nk=!0,a.Aa.abort(),a.nk=!1);a.Wn=b;Ng(a);Og(a)}function Ng(a){a.Pt||(a.Pt=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Aa&&this.ri&&(Ag(this.jf,Jg(this,"Aborting")),this.ri=!1,this.nk=!0,this.Aa.abort(),this.nk=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Og(this))};f.f=function(){this.Aa&&(this.ri&&(this.ri=!1,this.nk=!0,this.Aa.abort(),this.nk=!1),Og(this,!0));Bg.d.f.call(this)};
f.cB=function(){this.Xj||(this.qu||this.Iq||this.nk?Pg(this):this.zJ())};f.zJ=function(){Pg(this)};
function Pg(a){if(a.ri&&"undefined"!=typeof aa)if(a.is[1]&&4==Qg(a)&&2==Rg(a))Ag(a.jf,Jg(a,"Local request error detected and ignored"));else if(a.Iq&&4==Qg(a))Wf(a.cB,0,a);else if(a.dispatchEvent("readystatechange"),4==Qg(a)){Ag(a.jf,Jg(a,"Request complete"));a.ri=!1;try{var b=Rg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Sf(String(a.Zq))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Fg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Qg(a)?a.Aa.statusText:""}catch(n){Ag(a.jf,"Can not get status: "+n.message),l=""}a.Wn=l+" ["+Rg(a)+"]";Ng(a)}}finally{Og(a)}}}
function Og(a,b){if(a.Aa){Lg(a);var c=a.Aa,d=a.is[0]?ea:null;a.Aa=null;a.is=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.jf)&&c.log(tg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Lg(a){a.Aa&&a.ds&&(a.Aa.ontimeout=null);t(a.Zr)&&(ba.clearTimeout(a.Zr),a.Zr=null)}f.Kg=function(){return!!this.Aa};function Qg(a){return a.Aa?a.Aa.readyState:0}function Rg(a){try{return 2<Qg(a)?a.Aa.status:-1}catch(b){return-1}}
function Jg(a,b){return b+" ["+a.AA+" "+a.Zq+" "+Rg(a)+"]"};/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function M(){}v("gxnat",M);M.JPEG_CONVERT_SUFFIX="?format=image/jpeg";M.QF={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};M.qx="?format=zip";M.Ih=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);window.console.log("\n\nGetting XNAT json: '"+a+"'");M.get(a,b,"json")};
M.get=function(a,b,c){Ig(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.Aa?bg(a.Aa.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Aa?a.Aa.responseText:""}catch(h){Ag(a.jf,"Can not get responseText: "+h.message),e=""}b(e)}})};
M.jr=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(M.jr.dI&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(M.jr.dI&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
M.bL=function(a,b){var c=[],d={},e=[],h={};D(a,function(a){h=a;D(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(M.JO);D(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",M.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",M.QF);v("gxnat.ZIP_SUFFIX",M.qx);v("gxnat.jsonGet",M.Ih);v("gxnat.get",M.get);v("gxnat.naturalSort",M.jr);v("gxnat.sortXnatPropertiesArray",M.bL);function Sg(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Tg(this)}w(Sg,uc);v("gxnat.Path",Sg);
function Ug(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Vg(a){for(var b=0,c=Wg.length,b=0;b<c;b++)a(Wg[b],b)}function Xg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Wg=["projects","subjects","experiments",["scans","resources"],"files"];
function Tg(a){var b,c,d,e=!1;Vg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.Gt=Wg[k-1],e=!0);else null!=this[a]||e||(this.Gt=Wg[k-1],e=!0)}.bind(a))}Sg.prototype.pq=function(){null!=this.Gt||Tg(this);return this.Gt};
Sg.prototype.Ph=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=Wg.length,k=0,d=0;d<h;d++){c=Wg[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Sg.prototype.g=function(){Sg.d.g.call(this);sb(this)};v("gxnat.Path.getQueryPrefix",Ug);v("gxnat.Path.forEachXnatLevel",Vg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Sg(a),d=new Sg(b),e=void 0;Vg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",Xg);v("gxnat.Path.xnatLevelOrder",Wg);v("gxnat.Path.prototype.getDeepestLevel",Sg.prototype.pq);v("gxnat.Path.prototype.pathByLevel",Sg.prototype.Ph);v("gxnat.Path.prototype.dispose",Sg.prototype.g);function Yg(a){this.Cd=new Sg(a);this.projects=[];this[Zg]={};this[$g]={};this[ah]={}}w(Yg,uc);v("gxnat.ProjectTree",Yg);function bh(a){this[ch]=s(a)?new Sg(a):a;this[dh]=this[ch].pq();a=Wg.indexOf(this[ch].pq())+1;-1!=a&&(this[eh]=Wg[a],s(this[eh])&&(this[fh]=this[ch].originalUrl+"/"+this[eh],this[this[eh]]=[]))}w(bh,uc);v("gxnat.ProjectTree.TreeNode",bh);bh.prototype.le=function(a){this.Eb=a};bh.prototype.ce=function(){return this.Eb};
bh.prototype.g=function(){bh.d.g.call(this);null!=this[ch]&&this[ch].g();sb(this)};var dh=B(),fh=B(),gh=B(),ch=B(),eh=B(),hh=B(),ih=B(),jh=B(),Zg=B(),$g=B(),ah=B(),kh=["ID","description","name","URI"],lh=["gender","handedness","label","URI"],mh=["label","URI"];function nh(a,b){return Ka(a.ce(),b.ce())}function oh(a){var b="&columns=";D(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=Yg.prototype;
f.uz=function(a){var b=[];C(this.wn(a),function(a,d){"projects"==d?b.push(a[jh].ID):b.push(a[jh].label)});return b};f.vz=function(a){var b=[];C(this.wn(a),function(a){b.push(a[ch].originalUrl)});return b};f.wn=function(a){branch={projects:this.Ld};"experiments"==a[eh]?branch.subjects=a:g(a[eh])&&(branch.subjects=this[$g][a[ch].Ph("subjects")],branch.experiments=a);return branch};f.FA=function(a,b){this.Zn(this.Cd,a,b)};
f.Zn=function(a,b,c){var d=s(a)?new Sg(a):a,e;if(null!=this.Ld){a={projects:this.Ld};if(null!=d.subjects){e=d.Ph("subjects");if(null==this[$g][e]){this.Iu(e,function(a){this.HA(a,function(){null!=b&&b(a);this.Zn(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[$g][e]}if(null!=d.experiments){e=d.Ph("experiments");if(null==this[ah][e]){this.Hu(e,function(a){null!=b&&b(a);this.Zn(d,b,c)}.bind(this));return}a.experiments=this[ah][e]}null!=c&&c(a)}else this.GA(function(a){null!=b&&b(a);this.Zn(d,
b,c)}.bind(this))};f.GA=function(a){if(null==this.Ld){var b=oh(kh),c=this.Cd.prefix+"/projects/"+this.Cd.projects,d;M.Ih(this.Cd.prefix+"/projects",function(b){d=new bh(c);this.projects.push(d);this.Ld=d;this[Zg][d[ch].originalUrl]=d;d[jh]=b[0];d.le(d[jh].name);a(d)}.bind(this),"&ID="+this.Cd.projects+b)}};f.Cn=function(a){return this[$g][a]};f.Il=function(a){return this[ah][a]};
f.HA=function(a,b){var c=a;s(a)?c=this.Cn(a):a instanceof Sg&&(c=this.Cn(a.originalUrl));if(null!=c[jh])b(c);else{var d=this.Cd.prefix+"/subjects",e=oh(lh),e="&ID="+c[ch].subjects+e;M.Ih(d,function(a){c[jh]=a[0];c.le(c[jh].label);b(c)}.bind(this),e)}};
f.IA=function(a,b){if(null==this.Ld[hh]||!0!=this.Ld[hh]){var c=this.Ld[ch].originalUrl+"/subjects",d=oh(lh);window.console.log("load subjects",c,d);var e,h;M.Ih(c,function(c){D(c,function(d){window.console.log(d);h=this.Ld[ch].prefix+"/projects/"+this.Ld[ch].projects+"/subjects/"+d.ID;e=this.Iu(h);null==e[jh]&&(e[jh]=d,e.le(e[jh].label));null!=a&&a(e);this.Ld.subjects.length==c.length&&(this.Ld[hh]=!0,null!=b&&(d=this.Ld.subjects,d.sort(nh),b(d)))}.bind(this))}.bind(this),d)}};
f.Iu=function(a,b){if(null!=this[$g][a])return this[$g][a];subjNode=new bh(a);this.Ld.subjects.push(subjNode);this[$g][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.DA=function(a,b){var c=a;s(a)?c=this.Il(a):a instanceof Sg&&(c=this.Il(a.originalUrl));var d=this.Cd.prefix+"/experiments",e=oh(mh),e="&ID="+c[ch].experiments+e;M.Ih(d,function(a){c[jh]=a[0];c.le(c[jh].label);b(c)}.bind(this),e)};
f.EA=function(a,b,c){var d=a;s(a)?d=this.Cn(a):a instanceof Sg&&(d=this.Cn(a.originalUrl));if(null!=d[hh]&&!0==d[hh])window.console.log("Don't need to reload the experiments of "+d[ch].originalUrl);else{var e=d[ch].originalUrl+"/experiments";M.Ih(e+"?xsiType=xnat:imageSessionData",function(a){D(a,function(k){this.Hu(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[hh]=!0,null!=c&&(e=d.experiments,e.sort(nh),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Hu=function(a,b){null==this[ah][a]&&(exptNode=new bh(a),this.DA(exptNode,function(c){this[$g][c[ch].Ph("subjects")].experiments.push(c);this[ah][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){Yg.d.g.call(this);delete this.Ld;this.Cd.g();delete this.Cd;D(this.projects,function(a){null!=a.subjects&&D(a.subjects,function(a){null!=a.experiments&&D(a.experiments,function(a){a.g()});a.g()});a.g()});sb(this)};v("gxnat.ProjectTree.TreeNode",bh);v("gxnat.ProjectTree.LEVEL_KEY",dh);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",fh);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",gh);v("gxnat.ProjectTree.PATH_KEY",ch);v("gxnat.ProjectTree.NEXTLEVEL_KEY",eh);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",hh);v("gxnat.ProjectTree.ISLOADING_KEY",ih);v("gxnat.ProjectTree.METADATA_KEY",jh);v("gxnat.ProjectTree.PROJ_DIRECT",Zg);v("gxnat.ProjectTree.SUBJ_DIRECT",$g);v("gxnat.ProjectTree.EXPT_DIRECT",ah);v("gxnat.ProjectTree.PROJECT_METADATA",kh);v("gxnat.ProjectTree.SUBJECT_METADATA",lh);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",mh);v("gxnat.ProjectTree.compareNodeTitles",nh);v("gxnat.ProjectTree.getColumnQuery",oh);v("gxnat.ProjectTree.prototype.getBranchTitles",Yg.prototype.uz);v("gxnat.ProjectTree.prototype.getBranchUris",Yg.prototype.vz);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",Yg.prototype.wn);v("gxnat.ProjectTree.prototype.loadInitBranch",Yg.prototype.FA);v("gxnat.ProjectTree.prototype.loadBranch",Yg.prototype.Zn);v("gxnat.ProjectTree.prototype.loadProject",Yg.prototype.GA);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",Yg.prototype.Cn);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",Yg.prototype.Il);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",Yg.prototype.HA);v("gxnat.ProjectTree.prototype.loadSubjects",Yg.prototype.IA);v("gxnat.ProjectTree.prototype.loadSubject",Yg.prototype.Iu);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",Yg.prototype.DA);v("gxnat.ProjectTree.prototype.loadExperiments",Yg.prototype.EA);
v("gxnat.ProjectTree.prototype.loadExperiment",Yg.prototype.Hu);v("gxnat.ProjectTree.prototype.dispose",Yg.prototype.g);function N(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=N.prototype;f.clone=function(){return new N(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function ph(a,b){return new N(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof N?(this.x+=a.x,this.y+=a.y):(this.x+=a,t(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=t(b)?b:a;this.x*=a;this.y*=c;return this};function qh(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=qh.prototype;f.clone=function(){return new qh(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof qh?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof N?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,t(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=t(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function rh(a,b){this.width=a;this.height=b}function sh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=rh.prototype;f.clone=function(){return new rh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.Qn=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=t(b)?b:a;this.width*=a;this.height*=c;return this};function th(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=th.prototype;f.clone=function(){return new th(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.uA=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof th?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function uh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.Mt=function(a){return Math.sqrt(uh(this,a))};f.Qi=function(){return new rh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof N?(this.left+=a.x,this.top+=a.y):(this.left+=a,t(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=t(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function vh(){return gc?"Webkit":fc?"Moz":E?"ms":ec?"O":null};function wh(a){a=a.className;return s(a)&&a.match(/\S+/g)||[]}function O(a,b){var c=wh(a),d=Ob(arguments,1),e=c.length+d.length;xh(c,d);a.className=c.join(" ");return c.length==e}function yh(a,b){var c=wh(a),d=Ob(arguments,1),e=zh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function xh(a,b){for(var c=0;c<b.length;c++)Hb(a,b[c])||a.push(b[c])}function zh(a,b){return Bb(a,function(a){return!Hb(b,a)})}
function Ah(a,b,c){var d=wh(a);s(b)?Kb(d,b):g(b)&&(d=zh(d,b));s(c)&&!Hb(d,c)?d.push(c):g(c)&&xh(d,c);a.className=d.join(" ")};var Bh=!E||oc(9),Ch=!fc&&!E||E&&oc(9)||fc&&nc("1.9.1"),Dh=E&&!nc("9");function Eh(a){return a?new Fh(Gh(a)):Ba||(Ba=new Fh)}function Hh(a){return s(a)?document.getElementById(a):a}function Ih(a,b,c){return Jh(document,a,b,c)}function Kh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Jh(document,"*",a,b)}function Lh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Jh(document,"*",a,b)[0])||null}
function Jh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Hb(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Mh(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Nh?a.setAttribute(Nh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Nh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Oh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new rh(a.clientWidth,a.clientHeight)}function Qh(a){return gc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Rh(a){return a?a.parentWindow||a.defaultView:window}function P(a,b,c){return Sh(document,arguments)}
function Sh(a,b){var c=b[0],d=b[1];if(!Bh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',La(d.name),'"');if(d.type){c.push(' type="',La(d.type),'"');var e={};xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(s(d)?c.className=d:g(d)?c.className=d.join(" "):Mh(c,d));2<b.length&&Th(a,c,b,2);return c}function Th(a,b,c,d){function e(c){c&&b.appendChild(s(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ha(h)||ka(h)&&0<h.nodeType?e(h):D(Uh(h)?Mb(h):h,e)}}
function Vh(a,b){Th(Gh(a),a,arguments,1)}function Wh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Xh(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function S(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function Yh(a){return Ch&&void 0!=a.children?a.children:Bb(a.childNodes,function(a){return 1==a.nodeType})}function Zh(a){return void 0!=a.firstElementChild?a.firstElementChild:$h(a.firstChild)}
function ai(a){return void 0!=a.nextElementSibling?a.nextElementSibling:$h(a.nextSibling)}function $h(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function bi(a){return ka(a)&&1==a.nodeType}function ci(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function di(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var h=[],k=arguments[b];k;)h.unshift(k),k=k.parentNode;d.push(h);e=Math.min(e,h.length)}h=null;for(b=0;b<e;b++){for(var k=d[0][b],l=1;l<c;l++)if(k!=d[l][b])return h;h=k}return h}function Gh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ei(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Wh(a),a.appendChild(Gh(a).createTextNode(String(b)))}var fi={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},gi={IMG:" ",BR:"\n"};function hi(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function ii(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function ji(a){a=a.tabIndex;return t(a)&&0<=a&&32768>a}function ki(a){if(Dh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];li(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Dh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function mi(a){var b=[];li(a,b,!1);return b.join("")}
function li(a,b,c){if(!(a.nodeName in fi))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in gi)b.push(gi[a.nodeName]);else for(a=a.firstChild;a;)li(a,b,c),a=a.nextSibling}function Uh(a){if(a&&"number"==typeof a.length){if(ka(a))return"function"==typeof a.item||"string"==typeof a.item;if(ja(a))return"function"==typeof a.item}return!1}
function ni(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return oi(a,function(a){return(!d||a.nodeName==d)&&(!c||s(a.className)&&Hb(a.className.split(/\s+/),c))})}function oi(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Fh(a){this.pa=a||ba.document||document}f=Fh.prototype;f.M=Eh;function pi(a){return a.pa}f.a=function(a){return s(a)?this.pa.getElementById(a):a};f.TC=Fh.prototype.a;f.v=function(a,b,c){return Sh(this.pa,arguments)};f.createElement=function(a){return this.pa.createElement(a)};
f.createTextNode=function(a){return this.pa.createTextNode(String(a))};function qi(a){return"CSS1Compat"==a.pa.compatMode}function ri(a){a=a.pa;return a.parentWindow||a.defaultView}function si(a){var b=a.pa;a=Qh(b);b=b.parentWindow||b.defaultView;return E&&nc("10")&&b.pageYOffset!=a.scrollTop?new N(a.scrollLeft,a.scrollTop):new N(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.uu=Xh;f.removeNode=S;f.Vt=Yh;f.Cz=Zh;f.contains=ci;
f.Gh=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!ii(a)||ji(a)):ii(a)&&ji(a))&&E?(a=ja(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function ti(a,b,c){s(b)?ui(a,c,b):C(b,va(ui,a))}function ui(a,b,c){a:if(c=ab(c),void 0===a.style[c]){var d=vh()+cb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function vi(a,b){var c=Gh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function wi(a,b){return vi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function xi(a){return wi(a,"position")}
function yi(a,b,c){var d,e=fc&&(ac||jc)&&nc("1.9");b instanceof N?(d=b.x,b=b.y):(d=b,b=c);a.style.left=zi(d,e);a.style.top=zi(b,e)}function Ai(a){return new N(a.offsetLeft,a.offsetTop)}function Bi(a){a=a?Gh(a):document;return!E||oc(9)||qi(Eh(a))?a.documentElement:a.body}
function Ci(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Di(a){if(E&&!oc(8))return a.offsetParent;var b=Gh(a),c=wi(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=wi(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ei(a){for(var b=new qh(0,Infinity,Infinity,0),c=Eh(a),d=c.pa.body,e=c.pa.documentElement,h=Qh(c.pa);a=Di(a);)if(!(E&&0==a.clientWidth||gc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=wi(a,"overflow")){var k=Fi(a),l;l=a;if(fc&&!nc("1.9")){var n=parseFloat(vi(l,"borderLeftWidth"));if(Gi(l))var m=l.offsetWidth-l.clientWidth-n-parseFloat(vi(l,"borderRightWidth")),n=n+m;l=new N(n,parseFloat(vi(l,"borderTopWidth")))}else l=new N(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=Oh(ri(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Fi(a){var b,c=Gh(a),d=wi(a,"position"),e=fc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new N(0,0),k=Bi(c);if(a==k)return h;if(a.getBoundingClientRect)b=Ci(a),a=si(Eh(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(gc&&"fixed"==xi(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(ec||gc&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=Di(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,ec&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}function Hi(a,b){var c=Ii(a),d=Ii(b);return new N(c.x-d.x,c.y-d.y)}
function Ji(a){var b;if(a.getBoundingClientRect)b=Ci(a),b=new N(b.left,b.top);else{b=si(Eh(a));var c=Fi(a);b=new N(c.x-b.x,c.y-b.y)}if(fc&&!nc(12)){b:{c=ab("transform");if(void 0===a.style[c]&&(c=vh()+cb(c),void 0!==a.style[c])){c=(gc?"-webkit":fc?"-moz":E?"-ms":ec?"-o":null)+"-transform";break b}c="transform"}a=(a=wi(a,c)||wi(a,"transform"))?(a=a.match(Ki))?new N(parseFloat(a[1]),parseFloat(a[2])):new N(0,0):new N(0,0);a=new N(b.x+a.x,b.y+a.y)}else a=b;return a}
function Ii(a){if(1==a.nodeType)return Ji(a);var b=ja(a.TF),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Dc.targetTouches&&(c=a.Dc.targetTouches[0]);return new N(c.clientX,c.clientY)}function Li(a,b,c){if(b instanceof rh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Mi(a,b);Ni(a,c)}function zi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ni(a,b){a.style.height=zi(b,!0)}function Mi(a,b){a.style.width=zi(b,!0)}
function Oi(a){var b=Pi;if("none"!=wi(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Pi(a){var b=a.offsetWidth,c=a.offsetHeight,d=gc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new rh(b,c):(a=Ci(a),new rh(a.right-a.left,a.bottom-a.top))}function Qi(a){var b=Fi(a);a=Oi(a);return new th(b.x,b.y,a.width,a.height)}
function Ri(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Si(a,b){a.style.display=b?"":"none"}function Ti(a){E&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Gi(a){return"rtl"==wi(a,"direction")}var Ui=fc?"MozUserSelect":gc?"WebkitUserSelect":null;
function Vi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Ui){if(b=b?"none":"",a.style[Ui]=b,c){a=0;for(var d;d=c[a];a++)d.style[Ui]=b}}else if(E||ec)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Wi(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Xi(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Wi(a,c):0}function Yi(a,b){if(E){var c=Xi(a,b+"Left"),d=Xi(a,b+"Right"),e=Xi(a,b+"Top"),h=Xi(a,b+"Bottom");return new qh(e,d,h,c)}c=vi(a,b+"Left");d=vi(a,b+"Right");e=vi(a,b+"Top");h=vi(a,b+"Bottom");return new qh(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var Zi={thin:2,medium:4,thick:6};
function $i(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Zi?Zi[c]:Wi(a,c)}function aj(a){if(E&&!oc(9)){var b=$i(a,"borderLeft"),c=$i(a,"borderRight"),d=$i(a,"borderTop");a=$i(a,"borderBottom");return new qh(d,c,a,b)}b=vi(a,"borderLeftWidth");c=vi(a,"borderRightWidth");d=vi(a,"borderTopWidth");a=vi(a,"borderBottomWidth");return new qh(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Ki=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function bj(a){uc.call(this);this.Tc=a;this.fb={}}w(bj,uc);var cj=[];f=bj.prototype;f.B=function(a,b,c,d){g(b)||(b&&(cj[0]=b.toString()),b=cj);for(var e=0;e<b.length;e++){var h=F(a,b[e],c||this.handleEvent,d||!1,this.Tc||this);if(!h)break;this.fb[h.key]=h}return this};f.Fu=function(a,b,c,d){return dj(this,a,b,c,d)};function dj(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)dj(a,b,c[k],d,e,h);else{b=Rc(b,c,d||a.handleEvent,e,h||a.Tc||a);if(!b)return a;a.fb[b.key]=b}return a}
f.mb=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.mb(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.Tc||this,c=Lc(c),d=!!d,b=gb(a)?a.Bn(b,c,d,e):a?(a=Nc(a))?a.Bn(b,c,d,e):null:null,b&&(Tc(b),delete this.fb[b.key]);return this};f.bg=function(){C(this.fb,Tc);this.fb={}};f.f=function(){bj.d.f.call(this);this.bg()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function ej(){}fa(ej);ej.prototype.WA=0;function fj(a){Yc.call(this);this.jb=a||Eh();this.Rg=gj;this.ff=null;this.fa=!1;this.o=null;this.Ri=void 0;this.Lf=this.Ac=this.Pa=this.Ru=null;this.MC=!1}w(fj,Yc);fj.prototype.WH=ej.be();var gj=null;
function hj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function ij(a){return a.ff||(a.ff=":"+(a.WH.WA++).toString(36))}function jj(a,b){a.Pa&&a.Pa.Lf&&(tb(a.Pa.Lf,a.ff),ub(a.Pa.Lf,b,a));a.ff=b}f=fj.prototype;f.a=function(){return this.o};
f.bb=function(){this.Ri||(this.Ri=new bj(this));return this.Ri};f.Bo=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Pa&&this.ff&&kj(this.Pa,this.ff)&&this.Pa!=a)throw Error("Unable to set parent component");this.Pa=a;fj.d.Wv.call(this,a)};f.getParent=function(){return this.Pa};f.Wv=function(a){if(this.Pa&&this.Pa!=a)throw Error("Method not supported");fj.d.Wv.call(this,a)};f.M=function(){return this.jb};f.v=function(){this.o=this.jb.createElement("div")};f.n=function(a){this.Qg(a)};
f.Qg=function(a,b){if(this.fa)throw Error("Component already rendered");this.o||this.v();a?a.insertBefore(this.o,b||null):this.jb.pa.body.appendChild(this.o);this.Pa&&!this.Pa.fa||this.ab()};f.wb=function(a){if(this.fa)throw Error("Component already rendered");if(a&&this.Be(a)){this.MC=!0;var b=Gh(a);this.jb&&this.jb.pa==b||(this.jb=Eh(a));this.Xd(a);this.ab()}else throw Error("Invalid element to decorate");};f.Be=function(){return!0};f.Xd=function(a){this.o=a};
f.ab=function(){this.fa=!0;lj(this,function(a){!a.fa&&a.a()&&a.ab()})};f.rc=function(){lj(this,function(a){a.fa&&a.rc()});this.Ri&&this.Ri.bg();this.fa=!1};f.f=function(){this.fa&&this.rc();this.Ri&&(this.Ri.g(),delete this.Ri);lj(this,function(a){a.g()});!this.MC&&this.o&&S(this.o);this.Pa=this.Ru=this.o=this.Lf=this.Ac=null;fj.d.f.call(this)};f.Ym=function(a,b){this.$s(a,mj(this),b)};
f.$s=function(a,b,c){if(a.fa&&(c||!this.fa))throw Error("Component already rendered");if(0>b||b>mj(this))throw Error("Child component index out of bounds");this.Lf&&this.Ac||(this.Lf={},this.Ac=[]);if(a.getParent()==this){var d=ij(a);this.Lf[d]=a;Kb(this.Ac,a)}else ub(this.Lf,ij(a),a);a.Bo(this);Nb(this.Ac,b,0,a);a.fa&&this.fa&&a.getParent()==this?(c=this.Ia(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.o||this.v(),b=nj(this,b+1),a.Qg(this.Ia(),b?b.o:null)):this.fa&&!a.fa&&a.o&&a.o.parentNode&&
1==a.o.parentNode.nodeType&&a.ab()};f.Ia=function(){return this.o};f.He=function(){null==this.Rg&&(this.Rg=Gi(this.fa?this.o:this.jb.pa.body));return this.Rg};f.gm=function(a){if(this.fa)throw Error("Component already rendered");this.Rg=a};function mj(a){return a.Ac?a.Ac.length:0}function kj(a,b){var c;a.Lf&&b?(c=a.Lf,c=(b in c?c[b]:void 0)||null):c=null;return c}function nj(a,b){return a.Ac?a.Ac[b]||null:null}function lj(a,b,c){a.Ac&&D(a.Ac,b,c)}function oj(a,b){return a.Ac&&b?Ab(a.Ac,b):-1}
f.removeChild=function(a,b){if(a){var c=s(a)?a:ij(a);a=kj(this,c);c&&a&&(tb(this.Lf,c),Kb(this.Ac,a),b&&(a.rc(),a.o&&S(a.o)),a.Bo(null))}if(!a)throw Error("Child is not in parent component");return a};v("nrg.string",function(){});function pj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function qj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function rj(a){if(null!=a)return a="array"==ga(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function sj(a){return a.replace(/\W/g,"")}function tj(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function uj(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",pj);v("nrg.string.dirname",qj);v("nrg.string.getFileExtension",rj);v("nrg.string.fileNameMatch",function(a,b){return pj(a)===pj(b)});v("nrg.string.stripNonAlphanumeric",sj);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return sj(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",tj);v("nrg.string.mrmlColorToRgb",uj);function vj(a,b,c){uc.call(this);this.Gu=a;this.Sf=b||0;this.Tc=c;this.hF=ta(this.zF,this)}w(vj,uc);f=vj.prototype;f.ff=0;f.f=function(){vj.d.f.call(this);this.stop();delete this.Gu;delete this.Tc};f.start=function(a){this.stop();this.ff=Wf(this.hF,ca(a)?a:this.Sf)};f.stop=function(){this.Kg()&&ba.clearTimeout(this.ff);this.ff=0};f.Kg=function(){return 0!=this.ff};f.zF=function(){this.ff=0;this.Gu&&this.Gu.call(this.Tc)};var rb={},wj=null;function xj(a){a=ma(a);delete rb[a];qb()&&wj&&wj.stop()}function yj(){wj||(wj=new vj(function(){zj()},20));var a=wj;a.Kg()||a.start()}function zj(){var a=ya();C(rb,function(b){Aj(b,a)});qb()||yj()};function Bj(){Yc.call(this);this.R=Cj;this.endTime=this.startTime=null}w(Bj,Yc);var Cj=0;Bj.prototype.gf=function(){return 1==this.R};Bj.prototype.Mh=function(){this.ec("begin")};Bj.prototype.onEnd=function(){this.ec("end")};Bj.prototype.ec=function(a){this.dispatchEvent(a)};function Dj(a,b,c,d){Bj.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.Oo=a;this.GF=b;this.duration=c;this.Ox=d;this.coords=[];this.Nk=!1}w(Dj,Bj);f=Dj.prototype;f.Hi=function(a){this.Nk=a};f.nf=0;
f.play=function(a){if(a||this.R==Cj)this.nf=0,this.coords=this.Oo;else if(this.gf())return!1;xj(this);this.startTime=a=ya();-1==this.R&&(this.startTime-=this.duration*this.nf);this.endTime=this.startTime+this.duration;this.nf||this.Mh();this.ec("play");-1==this.R&&this.ec("resume");this.R=1;var b=ma(this);b in rb||(rb[b]=this);yj();Aj(this,a);return!0};f.stop=function(a){xj(this);this.R=Cj;a&&(this.nf=1);Ej(this,this.nf);this.ec("stop");this.onEnd()};
f.pause=function(){this.gf()&&(xj(this),this.R=-1,this.ec("pause"))};f.f=function(){this.R==Cj||this.stop(!1);this.ec("destroy");Dj.d.f.call(this)};f.Yd=function(){this.g()};function Aj(a,b){a.nf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.nf&&(a.nf=1);Ej(a,a.nf);1==a.nf?(a.R=Cj,xj(a),a.ec("finish"),a.onEnd()):a.gf()&&a.av()}function Ej(a,b){ja(a.Ox)&&(b=a.Ox(b));a.coords=Array(a.Oo.length);for(var c=0;c<a.Oo.length;c++)a.coords[c]=(a.GF[c]-a.Oo[c])*b+a.Oo[c]}f.av=function(){this.ec("animate")};
f.ec=function(a){this.dispatchEvent(new Fj(a,this))};function Fj(a,b){Cc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.nf=b.nf;this.state=b.R}w(Fj,Cc);var Gj={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Hj(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Ij.test(c))return b.Nl=Jj(c),b.type="hex",b;a:{var d=a.match(Kj);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.Nl=Lj(c),b.type="rgb",b;if(Gj&&(c=Gj[a.toLowerCase()]))return b.Nl=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Mj=/#(.)(.)(.)/;
function Jj(a){if(!Ij.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Mj,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Nj(a){a=Jj(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Lj(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Oj(b.toString(16));c=Oj(c.toString(16));a=Oj(a.toString(16));return"#"+b+c+a}var Ij=/^#(?:[0-9a-f]{3}){1,2}$/i,Kj=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Oj(a){return 1==a.length?"0"+a:a}
function Pj(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Lj([Math.floor(d),Math.floor(e),Math.floor(h)])};function Qj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=xi(a)||(c=Gh(a).documentElement);if(!c)return b;if(fc)var d=aj(c),b=b+d.left;else oc(8)&&(d=aj(c),b-=d.left);return Gi(c)?c.clientWidth-(b+a.offsetWidth):b};function Rj(a,b,c,d,e){Dj.call(this,b,c,d,e);this.element=a}w(Rj,Dj);f=Rj.prototype;f.k=ea;f.He=function(){ca(this.Rg)||(this.Rg=Gi(this.element));return this.Rg};f.av=function(){this.k();Rj.d.av.call(this)};f.onEnd=function(){this.k();Rj.d.onEnd.call(this)};f.Mh=function(){this.k();Rj.d.Mh.call(this)};function Sj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Rj.apply(this,arguments)}w(Sj,Rj);
Sj.prototype.k=function(){var a=this.Nk&&this.He()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Tj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Rj.apply(this,arguments)}w(Tj,Rj);Tj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Uj(a,b,c,d,e){Rj.call(this,a,[b],[c],d,e)}w(Uj,Rj);Uj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Vj(a,b,c,d,e){Rj.call(this,a,[b],[c],d,e)}w(Vj,Rj);Vj.prototype.k=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Wj(a,b,c,d,e){t(b)&&(b=[b]);t(c)&&(c=[c]);Rj.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(Wj,Rj);Wj.prototype.k=function(){Ri(this.element,this.coords[0])};
Wj.prototype.show=function(){this.element.style.display=""};Wj.prototype.Pl=function(){this.element.style.display="none"};function Xj(a,b,c){Wj.call(this,a,1,0,b,c)}w(Xj,Wj);function Yj(a,b,c){Wj.call(this,a,0,1,b,c)}w(Yj,Wj);function Zj(a,b,c){Wj.call(this,a,1,0,b,c)}w(Zj,Wj);Zj.prototype.Mh=function(){this.show();Zj.d.Mh.call(this)};Zj.prototype.onEnd=function(){this.Pl();Zj.d.onEnd.call(this)};function ak(a,b,c){Wj.call(this,a,0,1,b,c)}w(ak,Wj);ak.prototype.Mh=function(){this.show();ak.d.Mh.call(this)};
function bk(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Rj.apply(this,arguments)}w(bk,Rj);bk.prototype.Pr=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};bk.prototype.k=function(){this.Pr()};function ck(){Bj.call(this);this.Kb=[]}w(ck,Bj);ck.prototype.add=function(a){Hb(this.Kb,a)||(this.Kb.push(a),F(a,"finish",this.bv,!1,this))};ck.prototype.remove=function(a){Kb(this.Kb,a)&&Sc(a,"finish",this.bv,!1,this)};ck.prototype.f=function(){D(this.Kb,function(a){a.g()});this.Kb.length=0;ck.d.f.call(this)};function dk(){ck.call(this);this.Rt=0}w(dk,ck);
dk.prototype.play=function(a){if(0==this.Kb.length)return!1;if(a||this.R==Cj)this.Rt=0,this.Mh();else if(this.gf())return!1;this.ec("play");-1==this.R&&this.ec("resume");var b=-1==this.R&&!a;this.startTime=ya();this.endTime=null;this.R=1;D(this.Kb,function(c){b&&-1!=c.R||c.play(a)});return!0};dk.prototype.pause=function(){this.gf()&&(D(this.Kb,function(a){a.gf()&&a.pause()}),this.R=-1,this.ec("pause"))};
dk.prototype.stop=function(a){D(this.Kb,function(b){b.R==Cj||b.stop(a)});this.R=Cj;this.endTime=ya();this.ec("stop");this.onEnd()};dk.prototype.bv=function(){this.Rt++;this.Rt==this.Kb.length&&(this.endTime=ya(),this.R=Cj,this.ec("finish"),this.onEnd())};function ek(){ck.call(this);this.$e=0}w(ek,ck);
ek.prototype.play=function(a){if(0==this.Kb.length)return!1;if(a||this.R==Cj)this.$e<this.Kb.length&&this.Kb[this.$e].R!=Cj&&this.Kb[this.$e].stop(!1),this.$e=0,this.Mh();else if(this.gf())return!1;this.ec("play");-1==this.R&&this.ec("resume");this.startTime=ya();this.endTime=null;this.R=1;this.Kb[this.$e].play(a);return!0};ek.prototype.pause=function(){this.gf()&&(this.Kb[this.$e].pause(),this.R=-1,this.ec("pause"))};
ek.prototype.stop=function(a){this.R=Cj;this.endTime=ya();if(a)for(a=this.$e;a<this.Kb.length;++a){var b=this.Kb[a];b.R==Cj&&b.play();b.R==Cj||b.stop(!0)}else this.$e<this.Kb.length&&this.Kb[this.$e].stop(!1);this.ec("stop");this.onEnd()};ek.prototype.bv=function(){this.gf()&&(this.$e++,this.$e<this.Kb.length?this.Kb[this.$e].play():(this.endTime=ya(),this.R=Cj,this.ec("finish"),this.onEnd()))};v("nrg.convert",function(){});function fk(a){if(!g(a)&&!t(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function gk(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function hk(a){if(!s(a)&&!t(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)}
function ik(a){var b={};C(a,function(a,d){isNaN(a)?s(a)&&(b[d]=a):b[d]=a});return b}function jk(a){var b={};C(a,function(a,d){s(a)?0<a.length&&(b[d]=a):b[d]=a});return b}v("nrg.convert.pct",function(a){if(!t(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",fk);v("nrg.convert.remap1D",gk);v("nrg.convert.toInt",hk);
v("nrg.convert.toFloatArray",function(a){if(!s(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");D(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!ka(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!s(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;D(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",ik);v("nrg.convert.filterZeroLengthStrings",jk);v("nrg.style",function(){});var kk="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function lk(a){return a.getBoundingClientRect()}
function mk(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return hk(a.style[b]);var d=Hi(a,a.parentNode),d={left:hk(a.style.left)||d.x,top:hk(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?Hi(a,a.parentNode):Hi(a,document.body),
d={left:hk(a.style.left)||d.x,top:hk(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c}
function nk(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function ok(a,b){a&&b&&(a.style||(a.style={}),ti(a,b),D("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Da(b[c],"%")&&(a.style[c]=fk(b[c]))}))}var pk="is_hovered_"+B();
function qk(a,b,c,d,e,h){function k(){a[pk]=!1;yh(a,b);null!=h&&h()}function l(){a[pk]=!0;O(a,b);null!=e&&e()}F(a,"mouseenter",l);F(a,"mouseleave",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}v("nrg.style.cssProperties",kk);v("nrg.style.removeClassesThatContain",function(a,b){var c=wh(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)yh(a,d[e])});v("nrg.style.absolutePosition",lk);v("nrg.style.dims",mk);
v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});v("nrg.style.getComputedStyle",function(a,b){if(b&&s(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=kk);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return nk(c)});v("nrg.style.parseIntNumericalProperties",nk);v("nrg.style.setStyle",ok);v("nrg.style.IS_HOVERED",pk);
v("nrg.style.setHoverClass",qk);v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function rk(a){return 1-Math.pow(1-a,3)};function sk(){}v("nrg.fx",sk);function tk(a,b,c){void 0===b&&(b=500);uk(a,b,1,c)}function vk(a,b,c){void 0===b&&(b=500);uk(a,0,0,function(){uk(a,b,1,c)})}function wk(a,b,c){void 0===b&&(b=500);uk(a,b,0,c)}function uk(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var h=new Wj(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);H(h);delete h});h.play()}
function xk(a,b,c){D(a,function(a){a.style.opacity=0});b=t(b)?b:500;c=t(c)?c:250;var d=new Uf(0);d.addEventListener(Vf,function(){elt=a[0];tk(elt,b);1==a.length?(d.stop(),d.g()):(a=Ob(a,1),d.setInterval(c))});d.start()}sk.animGenStyles="left top width height opacity background-color color z-index".split(" ");function yk(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Sj(a,[b.left,b.top],[c.left,c.top],d,rk)}
function zk(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Tj(a,[b.width,b.height],[c.width,c.height],d,rk)}function Ak(a,b,c,d){if("opacity"in b||"opacity"in c)if(D([b,c],function(a){"opacity"in a||(a.opacity=1);t(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Wj(a,b.opacity,c.opacity,d)}
function Bk(a,b,c,d){if("visibility"in b||"visibility"in c)if(D([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new ak(a,d):new Zj(a,d)}
function Ck(a,b,c,d){if("background-color"in b||"background-color"in c){D([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Hj(b["background-color"]),h=Hj(c["background-color"]);if(e.Nl!==h.Nl)return new bk(a,Nj(e),Nj(h),d,rk)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function Dk(a,b){this.ZE=a;this.pL=b}function Ek(a){return jk(ik(a))}
function Fk(a){var b=Oi(a),c=Ai(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Gk(a,b){var c=Fk(a),c=Ek(c),d=Fk(b),e=Ek(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new Dk(c,e)}
function Hk(a,b,c,d){var e=[];D(sk.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(yk(a,b,c,d));break;case "height":e.push(zk(a,b,c,d));break;case "opacity":e.push(Ak(a,b,c,d));break;case "visibility":e.push(Bk(a,b,c,d));break;case "background-color":e.push(Ck(a,b,c,d))}});var h=[];D(e,function(a){null!=a&&h.push(a)});delete e;return h}
function Ik(a,b,c,d){var e=new dk;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Jk(a,b,c){function d(){ok(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;F(a,"mouseover",function(){ok(a,{opacity:b})});F(a,"mouseout",d);d()}v("nrg.fx.fadeIn",tk);v("nrg.fx.fadeInFromZero",vk);v("nrg.fx.fadeOut",wk);
v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);uk(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",uk);v("nrg.fx.animGenStyles",sk.animGenStyles);v("nrg.fx.generateAnim_Slide",yk);v("nrg.fx.generateAnim_Resize",zk);v("nrg.fx.generateAnim_Fade",Ak);v("nrg.fx.generateAnim_RemoveAddFade",Bk);v("nrg.fx.generateAnim_BgColorTrans",Ck);v("nrg.fx.TransitionDims",Dk);v("nrg.fx.filterTransitionStyles",Ek);v("nrg.fx.getTransitionStyles",Fk);
v("nrg.fx.generateTransitionDims",Gk);v("nrg.fx.generateAnimations",Hk);v("nrg.fx.parallelAnimate",Ik);v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new ek;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",Jk);v("nrg.fx.sequentialFadeIn",xk);function Kk(a){return a.slice(a.lastIndexOf("/")+1)}function Lk(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Da(b,"/")?b+d:b+("/"+d);return b};function Mk(){}v("nrg.dom",Mk);function Nk(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!s(b))throw new TypeError("String expected!",b);if(c&&!s(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Ok(e,{src:b?Lk(b,bb(e)+"."+c):""});return d}function Pk(a,b){var c=P("img",{src:b});c.style.gO="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Vh(a,c);c.onclick=c.parentNode.onclick}
function Ok(a,b,c,d){if(!s(a))throw new TypeError("String expected!");if(b&&!ka(b))throw new TypeError("Object expected!");if(null!=c&&!t(c))throw new TypeError("Number expected!");if(null!=d&&!t(d))throw new TypeError("Number expected!");a=Qk("div",a,b?b:{});b&&b.src&&Pk(a,b.src);Jk(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Qk(a,b,c){if(!s(a))throw new TypeError("String expected!",a);if(!s(b))throw new TypeError("String expected!",b);if(c&&!ka(c))throw new TypeError("Object expected!");c=c&&ka(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:bb(b.replace(/\./g,"-").toLowerCase());return P(a,c)}v("nrg.dom.createBasicHoverButtonSet",Nk);v("nrg.dom.createDivChildImage",Pk);v("nrg.dom.createBasicHoverButton",Ok);v("nrg.dom.createUniqueDom",Qk);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Mk.bP(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function U(a){fj.call(this,a);this.Gw();this.o=Qk("div",this.constructor.ID_PREFIX,a);this.Zp();Rk(this)}w(U,fj);v("nrg.ui.Component",U);f=U.prototype;f.Gw=function(){if(this instanceof U){this.constructor.d&&this.constructor.d instanceof U&&U.prototype.Gw.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.wm)||(this.constructor.wm=Sk(this.constructor.ID_PREFIX),this.constructor.wc=this.constructor.wm)}};
function Sk(a){return a.toLowerCase().replace(/\./g,"-")}f.Zp=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)U.prototype.Zp.bind(a)(),a=a.constructor.d;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=vb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=tj(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Rk(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Sk(c.constructor.ID_PREFIX),Jb(b,d),c=c.constructor.d;D(b,function(a){null!=this.a()&&O(this.a(),a)}.bind(a))}f.Ui="";f.MB=function(a){this.Ui=a};f.tG=function(){return this.Ui};f.QE=function(a){null==this.Ro&&(this.Ro=[]);this.Ro.push(a)};
f.th=function(){if(null==this.ja)this.ja=Oi(this.a());else if(this.ja.height!==this.u.height||this.ja.width!==this.u.width)this.ja=this.u;if(null==this.oo)this.oo=Ai(this.a());else if(this.oo.x!==this.aq.x||this.oo.y!==this.aq.y)this.oo=this.aq;this.u=Oi(this.a());this.aq=Ai(this.a())};f.k=function(){this.th()};f.n=function(a){this.fa&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):U.d.n.call(this,a)};f.iz=!1;f.wF=function(){return this.iz};
f.f=function(){U.d.f.call(this);null!=this.Ro&&(D(this.Ro,function(a){H(a);a.g()}),Ib(this.Ro));H(this);H(this.a());S(this.a());this.oo=this.ja=this.aq=this.u=this.Ui=null;this.iz=!0};f.Lt=function(a){null!=a&&(a=g(a)?a:[a],D(a,function(a){H(a);a.g()}),Ib(a))};f.eq=function(a){null!=a&&(H(a),a.g())};f.fq=function(a){C(a,function(b,c){H(b);S(b);delete a[c]});sb(a)};f.qn=function(a){C(a,function(b,c){H(b);b.g();delete a[c]});sb(a)};v("nrg.ui.Component.animationLengths",{cM:150,zM:300,jN:600});
v("nrg.ui.Component.idPrefixToCssClass",Sk);v("nrg.ui.Component.prototype.validateIdPrefix",U.prototype.Gw);v("nrg.ui.Component.prototype.imagePrefix",U.prototype.Ui);v("nrg.ui.Component.prototype.createCssMap",U.prototype.Zp);v("nrg.ui.Component.prototype.setImagePrefix",U.prototype.MB);v("nrg.ui.Component.prototype.getImagePrefix",U.prototype.tG);v("nrg.ui.Component.prototype.addSubComponent",U.prototype.QE);v("nrg.ui.Component.prototype.calcDims",U.prototype.th);
v("nrg.ui.Component.prototype.updateStyle",U.prototype.k);v("nrg.ui.Component.prototype.render",U.prototype.n);v("nrg.ui.Component.prototype.disposeInternalCalled",U.prototype.wF);v("nrg.ui.Component.prototype.disposeAnimations",U.prototype.Lt);v("nrg.ui.Component.prototype.disposeAnimationQueue",U.prototype.eq);v("nrg.ui.Component.prototype.disposeElementMap",U.prototype.fq);v("nrg.ui.Component.prototype.disposeComponentMap",U.prototype.qn);v("nrg.ui.Component.prototype.disposeInternal",U.prototype.f);var Tk;function Uk(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Vk(a,b,c){ha(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Tk||(Tk={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Tk,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Wk(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Xk(a){if(a.classList)return a.classList;a=a.className;return s(a)&&a.match(/\S+/g)||[]}function Yk(a,b){return a.classList?a.classList.contains(b):Hb(Xk(a),b)}function Zk(a,b){a.classList?a.classList.add(b):Yk(a,b)||(a.className+=0<a.className.length?" "+b:b)}function $k(a,b){if(a.classList)D(b,function(b){Zk(a,b)});else{var c={};D(Xk(a),function(a){c[a]=!0});D(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function al(a,b){a.classList?a.classList.remove(b):Yk(a,b)&&(a.className=Bb(Xk(a),function(a){return a!=b}).join(" "))}function bl(a,b){a.classList?D(b,function(b){al(a,b)}):a.className=Bb(Xk(a),function(a){return!Hb(b,a)}).join(" ")}function cl(a,b,c){c?Zk(a,b):al(a,b)};function dl(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!fc;default:return 166>a.keyCode||183<a.keyCode}}
function el(a,b,c,d,e){if(!(E||gc&&nc("525")))return!0;if(ac&&e)return fl(a);if(e&&!d)return!1;t(b)&&(b=gl(b));if(!c&&(17==b||18==b||ac&&91==b))return!1;if(gc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return!(E&&oc(9));case 27:return!gc}return fl(a)}
function fl(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||gc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function gl(a){if(fc)a=hl(a);else if(ac&&gc)a:switch(a){case 93:a=91;break a}return a}
function hl(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function il(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,Uk(a,k.Fg()),Zk(a,"goog-zippy-header"),jl(k,a),a&&k.xA.B(a,"keydown",k.mr))}Yc.call(this);this.jb=e||Eh();this.$j=this.jb.a(a)||null;this.kq=this.jb.a(d||null);this.gc=(this.Cu=ja(b)?b:null)||!b?null:this.jb.a(b);this.Eg=!0==c;this.xA=new bj(this);this.Su=new bj(this);var k=this;h(this.$j);h(this.kq);this.Sb(this.Eg)}w(il,Yc);var kl={Kw:"action",nx:"toggle"};f=il.prototype;f.kk=!0;f.f=function(){il.d.f.call(this);zc(this.xA);zc(this.Su)};
f.Fg=function(){return"tab"};f.Ia=function(){return this.gc};f.toggle=function(){this.Sb(!this.Eg)};f.Sb=function(a){this.gc?Si(this.gc,a):a&&this.Cu&&(this.gc=this.Cu());this.gc&&Zk(this.gc,"goog-zippy-content");this.kq?(Si(this.$j,!a),Si(this.kq,a)):ll(this,a);this.Eg=a;this.dispatchEvent(new ml(kl.nx,this))};function ll(a,b){a.$j&&(cl(a.$j,"goog-zippy-expanded",b),cl(a.$j,"goog-zippy-collapsed",!b),Vk(a.$j,"expanded",b))}
f.Ao=function(a){this.kk!=a&&((this.kk=a)?(jl(this,this.$j),jl(this,this.kq)):this.Su.bg())};function jl(a,b){b&&a.Su.B(b,"click",a.lr)}f.mr=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Cc(kl.Kw,this)),a.preventDefault(),a.stopPropagation()};f.lr=function(){this.toggle();this.dispatchEvent(new Cc(kl.Kw,this))};function ml(a,b){Cc.call(this,a,b)}w(ml,Cc);function nl(a,b,c,d){d=d||Eh();var e=d.v("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.lq=e;this.Ye=null;il.call(this,a,b,c,void 0,d);a=this.Eg;this.lq.style.display=a?"":"none";ll(this,a)}w(nl,il);f=nl.prototype;f.ti=500;f.WE=rk;
f.Sb=function(a){if(this.Eg!=a||this.Ye){"none"==this.lq.style.display&&(this.lq.style.display="");var b=this.Ia().offsetHeight,c=0;this.Ye?(a=this.Eg,H(this.Ye),this.Ye.stop(!1),c=parseInt(this.Ia().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;ll(this,a);this.Ye=new Dj([0,c],[0,a?b:0],this.ti,this.WE);F(this.Ye,["begin","animate","end"],this.WI,!1,this);F(this.Ye,"end",ta(this.XI,this,a));this.Ye.play(!1)}};f.WI=function(a){var b=this.Ia();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.XI=function(a){a&&(this.Ia().style.marginTop="0");H(this.Ye);this.Eg=a;this.Ye=null;a||(this.lq.style.display="none");this.dispatchEvent(new ml(kl.nx,this))};function ol(a,b,c,d){U.call(this);this.Eb=a;this.Bb=P("div",{id:"ZippyHeader_"+a+"_"+B(),"class":ol.CSS.hp});this.Bb[pl]=a.toLowerCase();null!=d?d(b,this.Bb):b.appendChild(this.Bb);this.Fn=P("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":ol.CSS.jD});this.zw();this.Bb.appendChild(this.Fn);this.zh=P("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":ol.CSS.gD},"+");this.Bb.appendChild(this.zh);this.zi=P("div",{id:"ZippyContent_"+a+"_"+B(),"class":ol.CSS.bh});b.appendChild(this.zi);this.Zb=new this.RC(this.Bb,
this.zi,null!=c?c:!1);this.Zb instanceof nl&&(this.Zb.ti=500);this.dL=ma(this);this.Jc={};F(this.Bb,"mouseover",this.hK.bind(this));F(this.Bb,"mouseout",this.gK.bind(this));ql(this)}w(ol,U);v("nrg.ui.ZippyNode",ol);ol.ID_PREFIX="nrg.ui.ZippyNode";var rl={aM:"a",PL:"b",$C:"c"};ol.CSS_SUFFIX={hp:"header",Yw:"header-mouseover",jD:"header-label",gD:"expandicon",Qw:"expandicon-mouseover",bh:"content",bh:"content-sub"};
function sl(a,b,c){var d=a[0];s(d)&&null!=b&&(d=b.Jc[d]);d.Zb.ti=200;1<a.length&&!d.Zb.Eg&&Rc(d,"a",function(){d.Zb.ti=500;sl(Ob(a,1),d,c)});d.Sb(!0);null!=c&&c(d,a)}var pl=B();f=ol.prototype;f.RC=nl;f.zw=function(a){a=null!=a?a:45;var b=this.Fn,c=this.Eb.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.Eb?Wa(this.Eb,a+60):c.length==this.Eb.length?Wa(this.Eb,a):this.Eb;return b};f.ce=function(){return this.Eb};f.MG=function(){return this.Jc};f.oG=function(){return this.Bb};
f.$F=function(){return this.zi};f.pG=function(){return this.Fn};f.BH=function(){return this.Zb};f.Sb=function(a){this.Zb.Sb(a)};f.JK=function(a){this.RC=!0===a?nl:il};function ql(a){F(a.Zb,nb(kl),function(a){null!=this.Zb.Ye?this.dispatchEvent({type:"c"}):a.target.Eg?this.Av():(this.zh.innerHTML="+",ok(this.zh,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"b"}))}.bind(a))}f.Av=function(){this.zh.innerHTML="-";ok(this.zh,{"margin-left":"-1em"});this.dispatchEvent({type:"a"})};
f.hK=function(){O(this.Bb,ol.CSS.Yw);O(this.zh,ol.CSS.Qw)};f.gK=function(){yh(this.Bb,ol.CSS.Yw);yh(this.zh,ol.CSS.Qw)};f.f=function(){ol.d.f.call(this);S(this.Fn);delete this.Fn;S(this.zh);delete this.zh;H(this.Bb);S(this.Bb);delete this.Bb;S(this.zi);delete this.zi;null!=this.Zb&&(this.Zb.g(),H(this.Zb),delete this.Zb);this.qn(this.Jc);delete this.Jc;delete this.dL;delete this.Eb};v("nrg.ui.ZippyNode.ID_PREFIX",ol.ID_PREFIX);v("nrg.ui.ZippyNode.EventType",rl);v("nrg.ui.ZippyNode.CSS_SUFFIX",ol.CSS_SUFFIX);
v("nrg.ui.ZippyNode.NODE_STORT_TAG",pl);v("nrg.ui.ZippyNode.serialExpand",sl);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",ol.prototype.zw);v("nrg.ui.ZippyNode.prototype.getTitle",ol.prototype.ce);v("nrg.ui.ZippyNode.prototype.getNodes",ol.prototype.MG);v("nrg.ui.ZippyNode.prototype.getHeader",ol.prototype.oG);v("nrg.ui.ZippyNode.prototype.getContentHolder",ol.prototype.$F);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",ol.prototype.pG);v("nrg.ui.ZippyNode.prototype.getZippy",ol.prototype.BH);
v("nrg.ui.ZippyNode.prototype.setExpanded",ol.prototype.Sb);v("nrg.ui.ZippyNode.prototype.setAnimated",ol.prototype.JK);v("nrg.ui.ZippyNode.prototype.disposeInternal",ol.prototype.f);M.pd={};M.pd.td=function(){uc.call(this)};w(M.pd.td,uc);v("gxnat.vis.VisNode",M.pd.td);f=M.pd.td.prototype;f.yg="Generic";f.Nr=function(a){this.yg=a};f.WF=function(){return this.yg};f.mm="";f.Ho=function(a){this.mm=a};f.nH=function(){return this.mm};f.Eb=null;f.le=function(a){this.Eb=a};f.ce=function(){return this.Eb};f.g=function(){M.pd.td.d.g.call(this);this.yg&&delete this.yg;this.mm&&delete this.mm;this.Eb&&delete this.Eb};v("gxnat.vis.VisNode.prototype.setCategory",M.pd.td.prototype.Nr);
v("gxnat.vis.VisNode.prototype.getCategory",M.pd.td.prototype.WF);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",M.pd.td.prototype.Ho);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",M.pd.td.prototype.nH);v("gxnat.vis.VisNode.prototype.setTitle",M.pd.td.prototype.le);v("gxnat.vis.VisNode.prototype.getTitle",M.pd.td.prototype.ce);v("gxnat.vis.VisNode.prototype.dispose",M.pd.td.prototype.g);function tl(a){this.qp=new JSZip(a)}w(tl,uc);v("gxnat.Zip",tl);function ul(a,b,c,d){if(!Ea(a,".zip")){if(!Ea(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=M.qx}var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new tl(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}tl.prototype.Hg=function(){return this.qp.files};
tl.prototype.Ku=function(a){C(this.Hg(),function(b){a(b.name,b.asArrayBuffer())}.bind(this))};tl.prototype.g=function(){tl.d.g.call(this);this.Ku(function(a){this.qp.remove(a)}.bind(this));sb(this.qp);delete this.qp};v("gxnat.Zip.prototype.getFiles",tl.prototype.Hg);v("gxnat.Zip.prototype.loopFiles",tl.prototype.Ku);v("gxnat.Zip.getFilesAsZip",ul);v("gxnat.Zip.prototype.dispose",tl.prototype.g);v("gxnat.slicerNode",function(){});
function vl(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function wl(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",vl);v("gxnat.slicerNode.toFloatArray",wl);function xl(){ma(this)}v("gxnat.slicerNode.Node",xl);function yl(a,b){ma(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;D(vl(b),function(b){D(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.pn=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=wl(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=wl(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(yl,xl);v("gxnat.slicerNode.Display",yl);function zl(a,b){yl.call(this,a,b)}w(zl,yl);v("gxnat.slicerNode.Mesh",zl);function Al(a,b){if(a instanceof Al)this.dd=a.tw();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!t(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.dd=Mb(a);else if(a instanceof rh)this.dd=Bl(a.height,a.width);else if(t(a)&&t(b)&&0<a&&0<b)this.dd=Bl(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.md=new rh(this.dd[0].length,this.dd.length)}
function Cl(a,b,c){for(var d=0;d<a.Qi().height;d++)for(var e=0;e<a.Qi().width;e++)b.call(c,a.dd[d][e],d,e,a)}function Dl(a,b){var c=new Al(a.Qi());Cl(a,function(d,e,h){c.dd[e][h]=b.call(void 0,d,e,h,a)});return c}function Bl(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=Al.prototype;f.add=function(a){if(!sh(this.md,a.Qi()))throw Error("Matrix summation is only supported on arrays of equal size");return Dl(this,function(b,c,d){return b+a.dd[c][d]})};
f.Bl=function(a,b){if(this.md.width!=a.md.width||this.md.height!=a.md.height)return!1;for(var c=b||0,d=0;d<this.md.height;d++)for(var e=0;e<this.md.width;e++)if(!(Math.abs(this.dd[d][e]-a.dd[d][e])<=(c||1E-6)))return!1;return!0};f.Qi=function(){return this.md};
f.multiply=function(a){if(a instanceof Al){if(this.md.width!=a.Qi().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return El(this,a)}if(t(a))return Fl(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.uc=function(a){if(!sh(this.md,a.Qi()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return Dl(this,function(b,c,d){return b-a.dd[c][d]})};
f.tw=function(){return this.dd};f.toString=function(){var a=0;Cl(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];D(this.dd,function(c){b.push("[ ");D(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Gl(a,b,c){return 0<=b&&b<a.md.height&&0<=c&&c<a.md.width}
function El(a,b){var c=new Al(a.md.height,b.Qi().width);Cl(c,function(a,e,h){for(var k=a=0;k<this.md.width;k++)a+=(Gl(this,e,k)?this.dd[e][k]:0)*(Gl(b,k,h)?b.dd[k][h]:0);if(!Gl(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.md.height+","+c.md.width+")");c.dd[e][h]=a},a);return c}function Fl(a,b){return Dl(a,function(a){return a*b})};function Hl(a,b,c){yl.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=Dl(new Al(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.dw=new Il(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.Sq=b;this.cs=this.pn?parseInt(this.pn.getAttribute("upperThreshold")):null;this.br=this.pn?parseInt(this.pn.getAttribute("lowerThreshold")):null;this.visible=c}w(Hl,yl);v("gxnat.slicerNode.Volume",Hl);function Il(a,b,c){var d=new Al([[0],[0],[0],[1]]);D([a,b,c],function(a,b){var c=a.multiply(d).tw(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.CK=c;break;case 1:this.lF=c;break;case 2:this.bF=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",Il);function Jl(a,b){ma(this);this.backgroundColor=uj(a);this.Ay=uj(b)}w(Jl,xl);v("gxnat.slicerNode.BackgroundColor",Jl);function Kl(a,b,c,d,e,h,k,l){ma(this);this.element=a;this.Rp=b;this.backgroundColor=c;this.BA=d;this.Zm=e;this.zL=h;this.FI=k;this.KF=l}w(Kl,xl);v("gxnat.slicerNode.SceneView",Kl);function Ll(a){uc.call(this);a instanceof Kl?(this.Zm=a.Zm,this.Rp=a.Rp,this.backgroundColor=a.backgroundColor,this.BA=a.BA):a instanceof Hl?(this.origin=a.origin||[0,0,0],this.cs=a.cs||1E4,this.br=a.br||-1E4,this.Iw=a.Iw||!1,this.Sq=a.Sq||!1,this.dw=a.dw||null,a.Mg&&(this.yA=a.labelMapFile,this.rI=a.colorTableFile)):a instanceof zl&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Ll,uc);v("gxnat.vis.RenderProperties",Ll);Ll.prototype.g=function(){Ll.d.g.call(this);sb(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Ll.prototype.g);function Ml(a){M.pd.td.call(this);this.Nd=a||null}w(Ml,M.pd.td);v("gxnat.vis.Renderable",Ml);Ml.prototype.Yv=function(a){this.Nd=a instanceof Ll?a:new Ll(a)};Ml.prototype.YG=function(){return this.Nd};Ml.prototype.g=function(){Ml.d.g.call(this);this.Nd&&(this.Nd.g(),delete this.Nd)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Ml.prototype.Yv);v("gxnat.vis.Renderable.prototype.getRenderProperties",Ml.prototype.YG);v("gxnat.vis.Renderable.prototype.dispose",Ml.prototype.g);function Nl(a,b){Ml.call(this,b);this.Mi=a||[];null!=b&&this.Yv(b)}w(Nl,Ml);v("gxnat.vis.Viewable",Nl);f=Nl.prototype;f.Ki=null;f.gG=function(){return this.Ki};f.LK=function(a){return this.Ki=a};f.HB=function(a){null!=this.Ki&&sb(this.Ki);this.Ki={};var b=this.Hg();D(b,function(a){this.Ki[a]=null}.bind(this));var c,d,e,h;a.Ku(function(a,l){c=0;for(d=b.length;c<d;c++)if(e=b[c],h="/files/"+a.split("/files/")[1],Ea(e,h)){this.Ki[e]=l;break}}.bind(this));a.g()};f.Hg=function(){return this.Mi};
f.tK=function(a){window.oO.log("REMOVING FILE",a);Kb(this.Mi,a)};f.si=function(a,b){null==this.Mi&&(this.Mi=[]);g(a)||(a=[a]);D(a,function(a){null!=b&&null==b(a)||this.Mi.push(a)}.bind(this))};f.g=function(){Nl.d.g.call(this);this.Mi&&(Ib(this.Mi),delete this.Mi)};v("gxnat.vis.Viewable.prototype.getFileData",Nl.prototype.gG);v("gxnat.vis.Viewable.prototype.setFileData",Nl.prototype.LK);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Nl.prototype.HB);v("gxnat.vis.Viewable.prototype.getFiles",Nl.prototype.Hg);
v("gxnat.vis.Viewable.prototype.removeFile",Nl.prototype.tK);v("gxnat.vis.Viewable.prototype.addFiles",Nl.prototype.si);v("gxnat.vis.Viewable.prototype.dispose",Nl.prototype.g);function Ol(a){Ml.call(this);null!=a?g(a)||(a=[a]):a=[];this.Qd=a}w(Ol,Ml);v("gxnat.vis.ViewableGroup",Ol);Ol.prototype.fy=function(a){return this.Qd.push(a)};Ol.prototype.SF=function(){var a=[];D(this.Qd,function(b){a=Lb(a,b.Hg())});return a};Ol.prototype.AH=function(){return this.Qd};Ol.prototype.g=function(){Ol.d.g.call(this);D(this.Qd,function(a){g(a)?D(a,function(a){a.g()}):a instanceof Nl&&a.g()});delete this.Qd};v("gxnat.vis.ViewableGroup.prototype.addViewable",Ol.prototype.fy);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Ol.prototype.SF);v("gxnat.vis.ViewableGroup.prototype.getViewables",Ol.prototype.AH);v("gxnat.vis.ViewableGroup.prototype.dispose",Ol.prototype.g);function Pl(){M.pd.td.call(this);this.$c=[]}w(Pl,M.pd.td);v("gxnat.vis.ViewableTree",Pl);function Ql(a,b,c){this.qK=a;this.eL=b;this.IF=c}v("gxnat.vis.ViewableTree.metadataCollection",Ql);f=Pl.prototype;f.Br=null;f.jm=null;f.El=null;f.orientation=null;f.Ib=function(){return this.orientation};f.Do=function(a){this.Br=a};f.Fo=function(a){this.jm=a};f.zo=function(a){this.El=a};f.yH=function(){return this.$c};
f.g=function(){Pl.d.g.call(this);null!=this.Br&&(sb(this.Br),delete this.RO);null!=this.jm&&(sb(this.jm),delete this.ZO);null!=this.El&&(sb(this.El),delete this.uO);null!=this.$c&&(D(this.$c,function(a){a.g()}),delete this.$c);null!=this.yC&&Ib(this.yC);delete this.yC;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Ql);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Pl.prototype.Br);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Pl.prototype.jm);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Pl.prototype.El);v("gxnat.vis.ViewableTree.prototype.orientation",Pl.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Pl.prototype.Ib);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Pl.prototype.Do);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Pl.prototype.Fo);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Pl.prototype.zo);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Pl.prototype.yH);
v("gxnat.vis.ViewableTree.prototype.dispose",Pl.prototype.g);function Rl(a,b,c){Pl.call(this);this.Nr(a);null!=c&&null!=b&&(this.tn=c,this.Qh=Xg(this.tn,b.URI,"experiments"),this.kp=new Sg(this.Qh));this.Tn=b;this.ke={}}w(Rl,Pl);v("gxnat.vis.AjaxViewableTree",Rl);var Sl={ID:"Scan ID",Name:"Name",type:"Scan Type"},Tl={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Ul={label:"Session"};function Vl(a,b,c){M.Ih(a,function(a){g(a);D(a,function(a){b(a)});c&&c()})}f=Rl.prototype;f.Ah=null;f.Li=!1;
f.IB=function(a,b){null==this.Ah&&(this.Ah={});this.Ah[a]=b};f.Wz=function(){var a=0;C(this.Ah,function(b,c){a+=this.Bz(c)}.bind(this));return a};f.Bz=function(a){return parseInt(this.Ah[a].Size,10)};f.hG=function(){return this.Ah};f.jG=function(){return this.Li};f.JB=function(a){this.Li=a};f.eG=function(){return this.tn};f.XG=function(){return this.Qh};f.bH=function(){return this.ke};f.aC=function(a){this.ke=a};f.hm=function(){C(Sl,function(a,b){null!=this.Tn[b]&&(this.ke[a]=this.Tn[b])}.bind(this))};
f.Do=function(a){Rl.d.Do.call(this,a)};f.Fo=function(a){Rl.d.Fo.call(this,a);C(Tl,function(a,c){null!=this.jm[c]&&(this.ke[a]=this.jm[c])}.bind(this))};f.zo=function(a){Rl.d.zo.call(this,a);C(Ul,function(a,c){null!=this.El[c]&&(this.ke[a]=this.El[c])}.bind(this))};f.kG=function(){return this.vn};f.cr=function(a){a=a[this.un];if(!Da(a,"/"))return this.Qh+"!"+a};
f.Oi=function(a){if(this.Li)a();else{var b=0,c=0,d="",e;M.Ih(this.Qh+this.mq,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.cr(e))this.IB(d,e),this.si(d,this.Gl);a();this.Li=!0}.bind(this))}};f.Gl=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.fk=function(){};function Wl(a,b,c,d){var e=new Sg(a);Vl(a+"/"+b.prototype.vn,function(a){new b(a,e.Ph("experiments"),c)},d)}
f.g=function(){Rl.d.g.call(this);null!=this.Ah&&(sb(this.Ah),delete this.Ah);delete this.Li;sb(this.ke);delete this.ke;null!=this.Tn&&(sb(this.Tn),delete this.Tn);null!=this.kp&&(this.kp.g(),delete this.kp);delete this.tn;delete this.Qh};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Sl);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Tl);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Ul);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",Vl);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",Wl);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Rl.prototype.Li);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Rl.prototype.IB);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Rl.prototype.Wz);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Rl.prototype.Bz);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Rl.prototype.hG);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Rl.prototype.jG);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Rl.prototype.JB);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Rl.prototype.eG);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Rl.prototype.XG);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Rl.prototype.bH);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Rl.prototype.aC);v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Rl.prototype.hm);
v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Rl.prototype.Do);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Rl.prototype.Fo);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Rl.prototype.zo);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Rl.prototype.kG);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Rl.prototype.cr);v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Rl.prototype.Oi);
v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Rl.prototype.Gl);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Rl.prototype.fk);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Rl.prototype.g);function Xl(a,b,c,d){this.files=a;this.GI=b;this.rw=c;this.Ut=d}v("xiv.sampleData.Sample",Xl);function Yl(){uc.call(this);this.ng=[]}w(Yl,uc);v("xiv.sampleData.SampleCollection",Yl);Yl.prototype.ZG=function(){return this.ng};Yl.prototype.g=function(){Yl.d.g.call(this);D(this.ng,function(a){sb(a)});delete this.ng};v("xiv.sampleData.SampleCollection.Samples",Yl.ng);v("xiv.sampleData.SampleCollection.getSamples",Yl.ZG);v("xiv.sampleData.SampleCollection.dispose",Yl.g);function Zl(){Yl.call(this);this.ng.push(this.Pv)}w(Zl,Yl);v("xiv.sampleData.SlicerScenes",Zl);
Zl.prototype.Pv=new Xl("src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/oneView_brain_2.mrml;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm.nrrd.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/5%3a%20t1_mpr_1mm_p2_pos50-label.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/F.fcsv;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/brain.vtk;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/BrainMesh_Underside.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/Top.png".split(";"),{Name:"Example Slicer Scene",
Type:"Slicer Scene"},"src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
function $l(){}v("xiv",$l);v("xiv.SAMPLE_DATA_PATH","xiv/sample-data");v("xiv.SAMPLE_SCAN_PREFIX","xiv/sample-data/scans/");function am(a,b,c){Rl.call(this,"Scans",a,b);this.ke["Total Frames"]=0;c&&c(this)}w(am,Rl);v("gxnat.vis.Scan",am);var bm="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");f=am.prototype;f.vn="scans";f.mq="/files";f.un="URI";
f.hm=function(){am.d.hm.call(this);if(null!=this.Fk["parameters/orientation"]){var a;a:{switch(this.Fk["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.ke.Orientation=a;this.orientation=this.ke.Orientation}null!=this.Fk["parameters/acqType"]&&(this.ke["Acq. Type"]=this.Fk["parameters/acqType"])};
f.Oi=function(a){this.Li?a():M.Ih(this.kp.originalUrl,function(b){this.Fk=b.items[0].data_fields;this.hm();am.d.Oi.call(this,function(){this.fk();a()}.bind(this))}.bind(this))};f.Gl=function(a){a=am.d.Gl.call(this,a);if(null!=a){for(var b=0,c=bm.length;b<c;b++)if(Ea(a,"."+bm[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.si=function(a){this.Nr("Scans");if(0==this.$c.length){var b=new Ol;b.le("scan");b.Nr("scans");this.$c.push(b)}0==this.$c[0].Qd.length&&this.$c[0].fy(new Nl);this.$c[0].Qd[0].si(a,this.Gl);this.ke["Total Frames"]=this.$c[0].Qd[0].Hg().length};f.cr=function(a){return Xg(this.tn,a[this.un],"experiments")};f.fk=function(a){if(this.$c&&this.$c[0]){var b=this.$c[0].Qd[0].Hg().sort(M.jr);this.Ho(b[Math.floor(b.length/2)]+M.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){am.d.g.call(this);null!=this.Fk&&sb(this.Fk);delete this.Fk};v("gxnat.vis.Scan.acceptableFileTypes",bm);v("gxnat.vis.Scan.prototype.folderQuerySuffix",am.prototype.vn);v("gxnat.vis.Scan.prototype.fileQuerySuffix",am.prototype.mq);v("gxnat.vis.Scan.prototype.fileContentsKey",am.prototype.un);v("gxnat.vis.Scan.prototype.setViewableMetadata",am.prototype.hm);v("gxnat.vis.Scan.prototype.getFileList",am.prototype.Oi);v("gxnat.vis.Scan.prototype.fileFilter",am.prototype.Gl);
v("gxnat.vis.Scan.prototype.addFiles",am.prototype.si);v("gxnat.vis.Scan.prototype.makeFileUrl",am.prototype.cr);v("gxnat.vis.Scan.prototype.getThumbnailImage",am.prototype.fk);v("gxnat.vis.Scan.prototype.dispose",am.prototype.g);function cm(a,b,c){Yc.call(this);this.target=a;this.handle=b||a;this.Du=c||new th(NaN,NaN,NaN,NaN);this.pa=Gh(a);this.qc=new bj(this);yc(this,va(zc,this.qc));F(this.handle,["touchstart","mousedown"],this.No,!1,this)}w(cm,Yc);var dm=E||fc&&nc("1.9.3");f=cm.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.jw=0;f.kw=0;f.wh=0;f.Bd=0;f.Cc=!0;f.Fi=!1;f.oA=0;f.hr=0;f.YH=!1;f.Nk=!1;f.Hi=function(a){this.Nk=a};f.bb=function(){return this.qc};function em(a,b){a.Du=b||new th(NaN,NaN,NaN,NaN)}
f.YB=function(a){this.Ir=a};f.lc=function(a){this.Cc=a};f.f=function(){cm.d.f.call(this);Sc(this.handle,["touchstart","mousedown"],this.No,!1,this);this.qc.bg();dm&&this.pa.releaseCapture();this.handle=this.target=null};function fm(a){ca(a.Rg)||(a.Rg=Gi(a.target));return a.Rg}
f.No=function(a){var b="mousedown"==a.type;if(!this.Cc||this.Fi||b&&!Hc(a))this.dispatchEvent("earlycancel");else{gm(a);if(0==this.oA)if(this.dispatchEvent(new hm("start",this,a.clientX,a.clientY)))this.Fi=!0,a.preventDefault();else return;else a.preventDefault();var b=this.pa,c=b.documentElement,d=!dm;this.qc.B(b,["touchmove","mousemove"],this.PH,d);this.qc.B(b,["touchend","mouseup"],this.Ii,d);dm?(c.setCapture(!1),this.qc.B(c,"losecapture",this.Ii)):this.qc.B(Rh(b),"blur",this.Ii);E&&this.YH&&this.qc.B(b,
"dragstart",Dc);this.Ir&&this.qc.B(this.Ir,"scroll",this.am,d);this.clientX=this.jw=a.clientX;this.clientY=this.kw=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.wh=this.Nk?Qj(this.target):this.target.offsetLeft;this.Bd=this.target.offsetTop;this.Cv=si(Eh(this.pa));this.hr=ya()}};
f.Ii=function(a,b){this.qc.bg();dm&&this.pa.releaseCapture();if(this.Fi){gm(a);this.Fi=!1;var c=im(this,this.wh),d=jm(this,this.Bd);this.dispatchEvent(new hm("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function gm(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.ra(a.Dc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.ra(a.Dc.changedTouches[0],a.currentTarget)}
f.PH=function(a){if(this.Cc){gm(a);var b=(this.Nk&&fm(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Fi){var d=this.jw-this.clientX,e=this.kw-this.clientY;if(d*d+e*e>this.oA)if(this.dispatchEvent(new hm("start",this,a.clientX,a.clientY)))this.Fi=!0;else{this.Xj||this.Ii(a);return}}c=km(this,b,c);b=c.x;c=c.y;this.Fi&&this.dispatchEvent(new hm("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(lm(this,a,b,c),a.preventDefault())}};function km(a,b,c){var d=si(Eh(a.pa));b+=d.x-a.Cv.x;c+=d.y-a.Cv.y;a.Cv=d;a.wh+=b;a.Bd+=c;b=im(a,a.wh);a=jm(a,a.Bd);return new N(b,a)}f.am=function(a){var b=km(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;lm(this,a,b.x,b.y)};function lm(a,b,c,d){a.Ht(c,d);a.dispatchEvent(new hm("drag",a,b.clientX,b.clientY,0,c,d))}
function im(a,b){var c=a.Du,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function jm(a,b){var c=a.Du,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.Ht=function(a,b){this.Nk&&fm(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.Tf=function(){return this.Fi};
function hm(a,b,c,d,e,h,k,l){Cc.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(h)?h:b.wh;this.top=ca(k)?k:b.Bd;this.Ot=b;this.CF=!!l}w(hm,Cc);yb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function mm(){this.Jv="";this.TD=nm;this.gz=null}mm.prototype.zz=function(){return this.gz};mm.prototype.toString=function(){return"SafeHtml{"+this.Jv+"}"};function om(a){if(a instanceof mm&&a.constructor===mm&&a.TD===nm)return a.Jv;eb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}yb("action","cite","data","formaction","href","manifest","poster","src");yb("link","script","style");var nm={};function pm(a,b){var c=new mm;c.Jv=a;c.gz=b;return c}var qm=pm("",0);function rm(a,b){Yc.call(this);this.Tc=new bj(this);this.Rv(a||null);b&&(this.rm=b)}w(rm,Yc);f=rm.prototype;f.o=null;f.$E=!0;f.yy=null;f.zy=null;f.Yl=!1;f.TK=!1;f.zu=-1;f.VH=!1;f.EF=!0;f.rm="toggle_display";f.a=function(){return this.o};f.Rv=function(a){if(this.Yl)throw Error("Can not change this state of the popup while showing.");this.o=a};f.eC=function(a,b){this.im=a;this.Ql=b};f.bb=function(){return this.Tc};f.xa=function(){return this.Yl};
f.aa=function(a){this.im&&this.im.stop();this.Ql&&this.Ql.stop();a?this.bw():this.Rl()};f.je=ea;
f.bw=function(){if(!this.Yl&&this.cv()){if(!this.o)throw Error("Caller must call setElement before trying to show the popup");this.je();var a=Gh(this.o);this.VH&&this.Tc.B(a,"keydown",this.aJ,!0);if(this.$E)if(this.Tc.B(a,"mousedown",this.$A,!0),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.Tc.B(a,"mousedown",this.$A,!0);this.Tc.B(a,"deactivate",this.ZA)}else this.Tc.B(a,"blur",
this.ZA);"toggle_display"==this.rm?(this.o.style.visibility="visible",Si(this.o,!0)):"move_offscreen"==this.rm&&this.je();this.Yl=!0;this.zu=ya();this.im?(Rc(this.im,"end",this.eB,!1,this),this.im.play()):this.eB()}};f.Rl=function(a){if(!this.Yl||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.Tc&&this.Tc.bg();this.Yl=!1;ya();this.Ql?(Rc(this.Ql,"end",va(this.Oy,a),!1,this),this.Ql.play()):this.Oy(a);return!0};
f.Oy=function(a){"toggle_display"==this.rm?this.TK?Wf(this.nA,0,this):this.nA():"move_offscreen"==this.rm&&(this.o.style.top="-10000px");this.kv(a)};f.nA=function(){this.o.style.visibility="hidden";Si(this.o,!1)};f.cv=function(){return this.dispatchEvent("beforeshow")};f.eB=function(){this.dispatchEvent("show")};f.kv=function(a){this.dispatchEvent({type:"hide",target:a})};f.$A=function(a){a=a.target;ci(this.o,a)||sm(this,a)||this.zy&&!ci(this.zy,a)||150>ya()-this.zu||this.Rl(a)};
f.aJ=function(a){27==a.keyCode&&this.Rl(a.target)&&(a.preventDefault(),a.stopPropagation())};f.ZA=function(a){if(this.EF){var b=Gh(this.o);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||ci(this.o,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.zu||this.Rl()}};function sm(a,b){return Db(a.yy||[],function(a){return b===a||ci(a,b)})}f.f=function(){rm.d.f.call(this);this.Tc.g();zc(this.im);zc(this.Ql);delete this.o;delete this.Tc;delete this.yy};function tm(a){Yc.call(this);this.o=a;a=E?"focusout":"blur";this.tI=F(this.o,E?"focusin":"focus",this,!E);this.uI=F(this.o,a,this,!E)}w(tm,Yc);tm.prototype.handleEvent=function(a){var b=new Fc(a.Dc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};tm.prototype.f=function(){tm.d.f.call(this);Tc(this.tI);Tc(this.uI);delete this.o};function um(a,b){fj.call(this,b);this.vL=!!a;this.Xn=null}w(um,fj);f=um.prototype;f.St=null;f.vc=!1;f.Ae=null;f.fd=null;f.gg=null;f.ht=!1;f.U=function(){return"goog-modalpopup"};f.Ni=function(){return this.Ae};f.v=function(){um.d.v.call(this);var a=this.a(),b=Ia(this.U()).split(" ");$k(a,b);hi(a,!0);Si(a,!1);vm(this);wm(this)};
function vm(a){if(a.vL&&!a.fd){var b;b=a.M().v("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.fd=b;a.fd.className=a.U()+"-bg";Si(a.fd,!1);Ri(a.fd,0)}a.Ae||(a.Ae=a.M().v("div",a.U()+"-bg"),Si(a.Ae,!1))}function wm(a){a.gg||(a.gg=a.M().createElement("span"),Si(a.gg,!1),hi(a.gg,!0),a.gg.style.position="absolute")}f.xB=function(){this.ht=!1};f.Be=function(a){return!!a&&"DIV"==a.tagName};
f.Xd=function(a){um.d.Xd.call(this,a);a=Ia(this.U()).split(" ");$k(this.a(),a);vm(this);wm(this);Si(this.a(),!1)};f.ab=function(){this.fd&&Xh(this.fd,this.a());Xh(this.Ae,this.a());um.d.ab.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.gg,a.nextSibling);this.St=new tm(pi(this.M()));this.bb().B(this.St,"focusin",this.fJ);xm(this,!1)};f.rc=function(){this.xa()&&this.aa(!1);zc(this.St);um.d.rc.call(this);S(this.fd);S(this.Ae);S(this.gg)};
f.aa=function(a){a!=this.vc&&(this.Ak&&this.Ak.stop(),this.ul&&this.ul.stop(),this.zk&&this.zk.stop(),this.tl&&this.tl.stop(),this.fa&&xm(this,a),a?this.bw():this.Rl())};function xm(a,b){if(b){a.Ol||(a.Ol=[]);for(var c=a.M(),c=c.Vt(c.pa.body),d=0;d<c.length;d++){var e=c[d];e==a.o||Wk(e,"hidden")||(Vk(e,"hidden",!0),a.Ol.push(e))}}else if(a.Ol){for(d=0;d<a.Ol.length;d++)a.Ol[d].removeAttribute("aria-hidden");a.Ol=null}}f.eC=function(a,b,c,d){this.Ak=a;this.zk=b;this.ul=c;this.tl=d};
f.bw=function(){if(this.dispatchEvent("beforeshow")){try{this.Xn=pi(this.M()).activeElement}catch(a){}this.Nv();this.je();this.bb().B(ri(this.M()),"resize",this.Nv);ym(this,!0);this.focus();this.vc=!0;this.Ak&&this.ul?(Rc(this.Ak,"end",this.ur,!1,this),this.ul.play(),this.Ak.play()):this.ur()}};
f.Rl=function(){if(this.dispatchEvent("beforehide")){this.bb().mb(ri(this.M()),"resize",this.Nv);this.vc=!1;this.zk&&this.tl?(Rc(this.zk,"end",this.nr,!1,this),this.tl.play(),this.zk.play()):this.nr();try{var a=pi(this.M()).body,b=pi(this.M()).activeElement||a;this.Xn&&b==a&&this.Xn!=a&&this.Xn.focus()}catch(c){}this.Xn=null}};function ym(a,b){a.fd&&Si(a.fd,b);a.Ae&&Si(a.Ae,b);Si(a.a(),b);Si(a.gg,b)}f.ur=function(){this.dispatchEvent("show")};f.nr=function(){ym(this,!1);this.dispatchEvent("hide")};
f.xa=function(){return this.vc};f.focus=function(){this.qz()};f.Nv=function(){this.fd&&Si(this.fd,!1);this.Ae&&Si(this.Ae,!1);var a=pi(this.M()),b=Oh(Rh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.fd&&(Si(this.fd,!0),Li(this.fd,c,a));this.Ae&&(Si(this.Ae,!0),Li(this.Ae,c,a))};
f.je=function(){var a=pi(this.M()),b=Rh(a)||window;if("fixed"==xi(this.a()))var c=a=0;else c=si(this.M()),a=c.x,c=c.y;var d=Oi(this.a()),b=Oh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);yi(this.a(),a,c);yi(this.gg,a,c)};f.fJ=function(a){this.ht?this.xB():a.target==this.gg&&Wf(this.qz,0,this)};f.qz=function(){try{E&&pi(this.M()).body.focus(),this.a().focus()}catch(a){}};
f.f=function(){zc(this.Ak);this.Ak=null;zc(this.zk);this.zk=null;zc(this.ul);this.ul=null;zc(this.tl);this.tl=null;um.d.f.call(this)};function zm(a,b,c){um.call(this,b,c);this.Ad=a||"modal-dialog";this.$=Am(Am(new Bm,Cm,!0),Dm,!1,!0)}w(zm,um);f=zm.prototype;f.kz=!0;f.pu=!0;f.Qu=!0;f.hq=!0;f.Pp=.5;f.Eb="";f.Bc=null;f.Ua=null;f.xF=!1;f.nd=null;f.Id=null;f.$r=null;f.ne=null;f.Mf=null;f.Qc=null;f.Iv="dialog";f.U=function(){return this.Ad};f.le=function(a){this.Eb=a;this.Id&&ei(this.Id,a)};f.ce=function(){return this.Eb};f.Hk=function(a){this.Bc=a=pm(a,null);this.Mf&&(this.Mf.innerHTML=om(a))};
f.getContent=function(){return null!=this.Bc?om(this.Bc):""};f.Pi=function(){return this.Iv};f.Ia=function(){this.a()||this.n();return this.Mf};f.Vz=function(){this.a()||this.n();return this.nd};f.Ni=function(){this.a()||this.n();return zm.d.Ni.call(this)};function Em(a,b){a.Pp=b;if(a.a()){var c=a.Ni();c&&Ri(c,a.Pp)}}function Fm(a,b){b!=a.Qu&&Gm(a,b)}function Gm(a,b){a.Qu=b;if(a.fa){var c=a.M(),d=a.Ni(),e=a.fd;b?(e&&c.uu(e,a.a()),c.uu(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.xa()&&xm(a,b)}
f.Qr=function(a){this.hq=a;this.yo(a&&this.fa)};f.yo=function(a){var b=Ia(this.Ad+"-title-draggable").split(" ");this.a()&&(a?$k(this.nd,b):bl(this.nd,b));a&&!this.Ua?(this.Ua=new cm(this.a(),this.nd),$k(this.nd,b),F(this.Ua,"start",this.Rr,!1,this)):!a&&this.Ua&&(this.Ua.g(),this.Ua=null)};
f.v=function(){zm.d.v.call(this);var a=this.a(),b=this.M();this.nd=b.v("div",this.Ad+"-title",this.Id=b.v("span",{className:this.Ad+"-title-text",id:ij(this)},this.Eb),this.ne=b.v("span",this.Ad+"-title-close"));Vh(a,this.nd,this.Mf=b.v("div",this.Ad+"-content"),this.Qc=b.v("div",this.Ad+"-buttons"));Uk(this.Id,"heading");Uk(this.ne,"button");hi(this.ne,!0);Vk(this.ne,"label",Hm);this.$r=this.Id.id;Uk(a,this.Pi());Vk(a,"labelledby",this.$r||"");this.Bc&&(this.Mf.innerHTML=om(this.Bc));Si(this.ne,
this.pu);this.$&&(a=this.$,a.o=this.Qc,a.n());Si(this.Qc,!!this.$);Em(this,this.Pp)};
f.Xd=function(a){zm.d.Xd.call(this,a);a=this.a();var b=this.Ad+"-content";this.Mf=Ih(null,b,a)[0];this.Mf||(this.Mf=this.M().v("div",b),this.Bc&&(this.Mf.innerHTML=om(this.Bc)),a.appendChild(this.Mf));var b=this.Ad+"-title",c=this.Ad+"-title-text",d=this.Ad+"-title-close";(this.nd=Ih(null,b,a)[0])?(this.Id=Ih(null,c,this.nd)[0],this.ne=Ih(null,d,this.nd)[0]):(this.nd=this.M().v("div",b),a.insertBefore(this.nd,this.Mf));this.Id?(this.Eb=ki(this.Id),this.Id.id||(this.Id.id=ij(this))):(this.Id=P("span",
{className:c,id:ij(this)}),this.nd.appendChild(this.Id));this.$r=this.Id.id;Vk(a,"labelledby",this.$r||"");this.ne||(this.ne=this.M().v("span",d),this.nd.appendChild(this.ne));Si(this.ne,this.pu);b=this.Ad+"-buttons";(this.Qc=Ih(null,b,a)[0])?(this.$=new Bm(this.M()),this.$.wb(this.Qc)):(this.Qc=this.M().v("div",b),a.appendChild(this.Qc),this.$&&(a=this.$,a.o=this.Qc,a.n()),Si(this.Qc,!!this.$));Em(this,this.Pp)};
f.ab=function(){zm.d.ab.call(this);this.bb().B(this.a(),"keydown",this.Nh).B(this.a(),"keypress",this.Nh);this.bb().B(this.Qc,"click",this.YI);this.yo(this.hq);this.bb().B(this.ne,"click",this.RJ);var a=this.a();Uk(a,this.Pi());""!==this.Id.id&&Vk(a,"labelledby",this.Id.id);this.Qu||Gm(this,!1)};f.rc=function(){this.xa()&&this.aa(!1);this.yo(!1);zm.d.rc.call(this)};f.aa=function(a){a!=this.xa()&&(this.fa||this.n(),zm.d.aa.call(this,a))};f.ur=function(){zm.d.ur.call(this);this.dispatchEvent(Im)};
f.nr=function(){zm.d.nr.call(this);this.dispatchEvent(Jm);this.xF&&this.g()};f.Rr=function(){var a=pi(this.M()),b=Oh(Rh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=Oi(this.a());"fixed"==xi(this.a())?em(this.Ua,new th(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):em(this.Ua,new th(0,0,c-d.width,a-d.height))};f.RJ=function(){Km(this)};
function Km(a){if(a.pu){var b=a.$,c=b&&b.pt;c?(b=b.get(c),a.dispatchEvent(new Lm(c,b))&&a.aa(!1)):a.aa(!1)}}f.f=function(){this.Qc=this.ne=null;zm.d.f.call(this)};function Mm(a,b){a.$=b;if(a.Qc){if(a.$){var c=a.$;c.o=a.Qc;c.n()}else a.Qc.innerHTML=om(qm);Si(a.Qc,!!a.$)}}f.YI=function(a){a:{for(a=a.target;null!=a&&a!=this.Qc;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.$.get(a);this.dispatchEvent(new Lm(a,b))&&this.aa(!1)}};
f.Nh=function(a){var b=!1,c=!1,d=this.$,e=a.target;if("keydown"==a.type)if(this.kz&&27==a.keyCode){var h=d&&d.pt,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new Lm(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.ht=!0;try{this.gg.focus()}catch(k){}Wf(this.xB,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.ne)Km(this);else if(d){var l=d.It,n;if(n=l)a:{n=d.o.getElementsByTagName("BUTTON");for(var m=
0,q;q=n[m];m++)if(q.name==l||q.id==l){n=q;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new Lm(h,String(d.get(h)))))}else e==this.ne&&32==a.keyCode&&Km(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.aa(!1)};function Lm(a,b){this.type=Nm;this.key=a;this.caption=b}w(Lm,Cc);var Nm="dialogselect",Jm="afterhide",Im="aftershow";function Bm(a){this.jb=a||Eh();gd.call(this)}var Om,Pm;
w(Bm,gd);f=Bm.prototype;f.Ad="goog-buttonset";f.It=null;f.o=null;f.pt=null;f.set=function(a,b,c,d){gd.prototype.set.call(this,a,b);c&&(this.It=a);d&&(this.pt=a);return this};function Am(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.n=function(){if(this.o){this.o.innerHTML=om(qm);var a=Eh(this.o);this.forEach(function(b,c){var d=a.v("button",{name:c},b);c==this.It&&(d.className=this.Ad+"-default");this.o.appendChild(d)},this)}};
f.wb=function(a){if(a&&1==a.nodeType){this.o=a;a=this.o.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=ki(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==Qm);h&&Zk(c,this.Ad+"-default")}}};f.a=function(){return this.o};f.M=function(){return this.jb};var Qm="cancel",Hm="Close",Cm={key:"ok",caption:"OK"},Dm={key:Qm,caption:"Cancel"},Rm={key:"yes",caption:"Yes"},Sm={key:"no",caption:"No"},Tm={key:"save",caption:"Save"},Um={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Om=Am(new Bm,Cm,!0,!0),Am(Am(new Bm,Cm,!0),Dm,!1,!0),Pm=Am(Am(new Bm,Rm,!0),Sm,!1,!0),Am(Am(Am(new Bm,Rm),Sm,!0),Dm,!1,!0),Am(Am(Am(new Bm,Um),Tm),Dm,!0,!0));function Vm(){zm.call(this);this.kz=!1}w(Vm,zm);v("nrg.ui.Dialog",Vm);Vm.ID_PREFIX="nrg.ui.Dialog";Vm.CSS={hx:"nrg-ui-dialog-overlay",gp:"nrg-ui-dialog-background",nj:"nrg-ui-dialog-closebutton",aD:"nrg-ui-dialog-closebutton-image",$D:"nrg-ui-dialog-subtext",Vk:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",bh:"nrg-ui-dialog-content",XC:"nrg-ui-dialog-buttons"};f=Vm.prototype;f.hq=!0;f.Ua=null;f.Bk=null;
f.Vv=function(a){this.om.style.visibility="hidden";this.zg.style.visibility="hidden";null!=a&&qk(this.a(),a,null,null,function(){this.om.style.visibility="visible";this.zg.style.visibility="visible"}.bind(this),function(){this.om.style.visibility="hidden";this.zg.style.visibility="hidden"}.bind(this))};f.ey=function(a){O(this.om,a)};f.NE=function(a){O(this.Bc,a)};f.LE=function(a){O(this.zg.parentNode,a)};f.ME=function(a){O(this.zg,a)};f.Rx=function(a){O(this.Wp,a)};f.KE=function(a){O(this.mt,a)};
function Wm(a){a.Wp=Kh("modal-dialog-title-close",a.a())[0];O(a.Wp,Vm.CSS.nj);a.zg=P("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":Vm.CSS.aD});a.zg.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.Wp.appendChild(a.zg);F(a.zg,"click",function(a){this.aa(!this.xa());this.dispatchEvent({type:"f"});a.stopPropagation()}.bind(a))}f.XE=function(){var a=this.a(),b=Yj(a,600),c=Xj(a,600),d=Yj(a,600),a=Xj(a,600);this.eC(b,c,d,a)};
f.ir=function(a,b,c,d){var e=this.a(),h=Oi(e.parentNode),k=Oi(e);c=null!=c?c:0;"left"==a?e.style.left=0+c+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=0+(null!=d?d:0)+"px")};f.Ce=function(){var a=this.a(),b=Oi(this.a().parentNode);if(null!=this.Ni()){var c=this.Ni();0==c.opacity?S(c):ok(c,{width:b.width,height:b.height,"z-index":199})}var c=Oi(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);yi(a,d,e)};
f.Qr=function(a){this.hq=a;this.yo(a&&this.fa)};f.yo=function(a){var b=Ia(this.U()+"-title-draggable").split(" "),c=this.Vz();this.a()&&(a?$k(c,b):bl(c,b));a&&!this.Ua?(this.Ua=new cm(this.a(),this.nd),$k(c,b),F(this.Ua,"start",this.Rr,!1,this)):!a&&this.Ua&&(this.Ua.g(),this.Ua=null)};f.GC=function(){this.Rr()};
f.Rr=function(){var a=pi(this.M()),b=Rh(a)||window;if(null!=this.a()){var a=Oi(this.a().parentNode),b=Oh(b||window),c=Oi(this.a());"fixed"==xi(this.a())?em(this.Ua,new th(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):em(this.Ua,new th(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))}};f.Tx=function(a){var b=P("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":Vm.CSS.ai});null==this.Ln&&(this.Ln=[]);this.Ln.push(b);this.Ia().appendChild(b);null!=a&&(b.src=a);return b};
f.Lj=function(a){var b=P("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":Vm.CSS.Vk},a);null==this.ij&&(this.ij=[]);this.ij.push(b);b.innerHTML=a||"";this.Ia().appendChild(b);return b};f.at=function(a){var b=P("div",{id:"ErrorSub_"+B(),"class":Vm.CSS.$D});b.innerHTML=a;this.Ia().appendChild(b);return b};f.NG=function(){return this.a()};
f.n=function(a){if(!this.fa)Vm.d.n.call(this,a);else if(null!=a&&this.a().parentNode!=a){Vh(a,this.a());return}O(this.a(),"nrg-ui-dialog");this.om=Kh("modal-dialog-title",this.a())[0];this.Bc=Kh("modal-dialog-content",this.a())[0];this.mt=Kh("modal-dialog-buttons",this.a())[0];this.zg=null;Wm(this);O(this.mt,Vm.CSS.XC);O(this.om,Vm.CSS.TITLE);O(this.Bc,Vm.CSS.bh);Vm.d.Qr.call(this,!1);this.Qr(!0)};
f.aa=function(a){null!=this.a()&&(null==this.Bk&&(this.Bk=Ai(this.a())),this.xa()&&!1==a?(this.Bk=Ai(this.a()),Vm.d.aa.call(this,a)):this.xa()||!0!=a||(Vm.d.aa.call(this,a),yi(this.a(),this.Bk)))};f.Ov=function(){var a;a=this.Ia();a=Oi(a);Li(this.a(),a.width+20,a.height+20)};f.iH=function(){return this.ij};
f.f=function(){Vm.d.f.call(this);delete this.mt;delete this.om;delete this.Bc;delete this.zg;delete this.Wp;null!=this.hB&&(S(this.hB),delete this.hB);null!=this.ij&&(D(this.ij,function(a){S(a);delete a}),delete this.ij);null!=this.Ln&&(D(this.Ln,function(a){S(a);delete a}),delete this.Ln);null!=this.Bk&&(sb(this.Bk),delete this.Bk)};v("nrg.ui.Dialog.ID_PREFIX",Vm.ID_PREFIX);v("nrg.ui.Dialog.EventType",{IM:"d",CLOSED:"e",OL:"f"});v("nrg.ui.Dialog.prototype.setMouseoverClass",Vm.prototype.Vv);
v("nrg.ui.Dialog.prototype.addTitleClass",Vm.prototype.ey);v("nrg.ui.Dialog.prototype.addContentClass",Vm.prototype.NE);v("nrg.ui.Dialog.prototype.addCloseButtonClass",Vm.prototype.LE);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",Vm.prototype.ME);v("nrg.ui.Dialog.prototype.addCloseSpanClass",Vm.prototype.Rx);v("nrg.ui.Dialog.prototype.addButtonsClass",Vm.prototype.KE);v("nrg.ui.Dialog.prototype.applyFadeTransitions",Vm.prototype.XE);v("nrg.ui.Dialog.prototype.moveToCorner",Vm.prototype.ir);
v("nrg.ui.Dialog.prototype.center",Vm.prototype.Ce);v("nrg.ui.Dialog.prototype.setDraggable",Vm.prototype.Qr);v("nrg.ui.Dialog.prototype.updateLimits",Vm.prototype.GC);v("nrg.ui.Dialog.prototype.addImage",Vm.prototype.Tx);v("nrg.ui.Dialog.prototype.addText",Vm.prototype.Lj);v("nrg.ui.Dialog.prototype.addSubText",Vm.prototype.at);v("nrg.ui.Dialog.prototype.getOverlay",Vm.prototype.NG);v("nrg.ui.Dialog.prototype.render",Vm.prototype.n);v("nrg.ui.Dialog.prototype.setVisible",Vm.prototype.aa);
v("nrg.ui.Dialog.prototype.getTextElements",Vm.prototype.iH);v("nrg.ui.Dialog.prototype.resizeToContents",Vm.prototype.Ov);v("nrg.ui.Dialog.prototype.disposeInternal",Vm.prototype.f);function Xm(){Vm.call(this);Mm(this,null)}w(Xm,Vm);v("nrg.ui.ErrorDialog",Xm);Xm.ID_PREFIX="nrg.ui.ErrorDialog";Xm.CSS={hx:"nrg-ui-errordialog",ai:"nrg-ui-errordialog-image",Vk:"nrg-ui-errordialog-text"};Xm.prototype.Cl=null;Xm.prototype.Lj=function(a){Xm.d.Lj.call(this,a);a=this.ij;O(a[a.length-1],Xm.CSS.Vk)};Xm.prototype.n=function(a){Xm.d.n.call(this,a);O(this.a(),Xm.CSS.hx);null==this.Cl&&(this.Cl=this.Tx(serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png"),O(this.Cl,Xm.CSS.ai),this.Ce())};
Xm.prototype.f=function(){Xm.d.f.call(this);null!=this.Cl.parentNode&&S(this.Cl);delete this.Cl};v("nrg.ui.ErrorDialog.ID_PREFIX",Xm.ID_PREFIX);v("nrg.ui.ErrorDialog.CSS",Xm.CSS);v("nrg.ui.ErrorDialog.prototype.addText",Xm.prototype.Lj);v("nrg.ui.ErrorDialog.prototype.disposeInternal",Xm.prototype.f);function Ym(a,b,c,d){ma(this);this.url=a;this.document=b;this.files=d}w(Ym,xl);v("gxnat.slicerNode.Mrml",Ym);function Zm(a,b){ma(this);this.file=a;this.ie=b}w(Zm,xl);v("gxnat.slicerNode.Displayable",Zm);function $m(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function cn(a,b,c){ma(this);this.position=a;this.uL=b;this.focus=c}w(cn,xl);v("gxnat.slicerNode.Camera",cn);function dn(a,b,c,d,e,h){ma(this);this.position=a;this.color=b;this.name=h}w(dn,xl);v("gxnat.slicerNode.Annotations",dn);function en(){ma(this)}w(en,xl);v("gxnat.slicerNode.Layout",en);M.F={};v("gxnat.slicerUtils",M.F);M.F.Rw="/scripts/viewer/xiv/vis/GenericColorTable.txt";M.F.nz=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ea(a[c],".mrml")&&b.push(a[c]);return b};M.F.fu=function(a,b){M.get(a,function(a){b(new $m(a))},"text")};M.F.Oz=function(a,b,c){a=g(a)?a:[a];var d=M.F.nz(a),e=[],h=0;D(d,function(b){M.F.fu(b,function(l){h++;e.push(new Ym(b,l,0,a));h==d.length&&c(e)})})};
M.F.Vy=function(a,b,c){M.F.sz(a,b,function(b){c(new Kl(a,M.F.wz(a),M.F.tz(a),M.F.Jz(a),b,M.F.$z(a),M.F.Nz(a),null))})};M.F.Qz=function(a,b){var c=[],d=[],e=0;D(a,function(a){c=M.F.Rz(a.document);D(c,function(k){M.F.Vy(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};M.F.Az=function(a,b){a=s(a)?M.F.fu(a):a;var c=[];D(a.getElementsByTagName(b),function(a){c.push(a)});return c};M.F.Rz=function(a){return M.F.Az(a,"SceneView")};
M.F.wz=function(a){var b=a.getElementsByTagName("Camera").length-1,c=a.getElementsByTagName("Camera")[b].getAttribute("position"),d=a.getElementsByTagName("Camera")[b].getAttribute("viewUp");a=a.getElementsByTagName("Camera")[b].getAttribute("focalPoint");return new cn(wl(c),wl(d),wl(a))};M.F.Uz=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
M.F.tz=function(a){return new Jl(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};M.F.Jz=function(a){return new en(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
M.F.Zl=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};M.F.iG=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Xa(b,"!",Kk(c),"/",Kk(a))};
M.F.sz=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,m,q="rgb(255,0,0)",p="",r="",u="",z=0,y,J;0==a.length?c(null):(D(a,function(a){k.push(M.F.Zl(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):D(k,function(a){M.get(a,function(a){l++;D(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){m=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
u=n[11];q=[1,0,0];r=p="";z=0;for(len=e.length;z<len;z++)if(y=e[z],p=y.getAttribute("id"),p===n[0].replace("_","")){r=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(J=d[z],p=J.getAttribute("id"),p===r){q=wl(J.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new dn(m,q,0,0,0,u))}});l==k.length&&c(h)},"text")}))};
M.F.$t=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;D(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new Zm(h.getAttribute("fileName"),a));break}});return d};M.F.fG=function(){return null};
M.F.$z=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=M.F.$t(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";D(c,function(a){k=a.ie.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(D(d,function(b){b.getAttribute("id")==k&&(a.pn=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.tt=serverRoot+M.F.Rw:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";D(e,function(a){l=a.ie.getAttribute("attributes").split(";");D(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],D(h,function(b){b.ie.getAttribute("id")==refVol&&(b.Mg=a)}.bind(this)))}.bind(this))});D(h,function(c){c.ag=new Hl(a,c.ie,b);c.Mg&&(c.ag.Mg=c.Mg,delete c.Mg)});return h};M.F.Nz=function(a){var b=M.F.$t(a,"Model","ModelStorage");D(b,function(b){b.ag=new zl(a,b.ie)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",M.F.Rw);
v("gxnat.slicerUtils.extractMrmls",M.F.nz);v("gxnat.slicerUtils.getMrmlAsXml",M.F.fu);v("gxnat.slicerUtils.getMrmlNodes",M.F.Oz);v("gxnat.slicerUtils.createSceneViewProperties",M.F.Vy);v("gxnat.slicerUtils.getSceneViewNodes",M.F.Qz);v("gxnat.slicerUtils.getElementsFromMrml",M.F.Az);v("gxnat.slicerUtils.getSceneViewsFromMrml",M.F.Rz);v("gxnat.slicerUtils.getCameraFromSceneView",M.F.wz);v("gxnat.slicerUtils.getThumbnail",M.F.Uz);v("gxnat.slicerUtils.mrmlColorToRgb",M.F.IO);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",M.F.tz);v("gxnat.slicerUtils.getLayoutFromSceneView",M.F.Jz);v("gxnat.slicerUtils.matchFileToSet",M.F.Zl);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",M.F.iG);v("gxnat.slicerUtils.getAnnotations",M.F.sz);v("gxnat.slicerUtils.getDisplayables",M.F.$t);v("gxnat.slicerUtils.getFibers",M.F.fG);v("gxnat.slicerUtils.getVolumes",M.F.$z);v("gxnat.slicerUtils.getMeshes",M.F.Nz);function fn(a,b,c){this.Lh=[];Rl.call(this,"Slicer Scenes",a,b);c&&c(this)}w(fn,Rl);v("gxnat.vis.Slicer",fn);var gn=["jpeg","jpg","png","gif"];f=fn.prototype;f.vn="resources/Slicer/files";f.mq="?listContents=true";f.un="File Name";f.Oi=function(a){this.Li?hn(this,a):am.d.Oi.call(this,function(){this.fk(function(){this.hm();hn(this,a)}.bind(this))}.bind(this))};function hn(a,b){M.F.Oz(a.Lh,0,function(a){M.F.Qz(a,function(d){this.Qy(d,a,b)}.bind(this))}.bind(a))}
f.Qy=function(a,b,c){this.MI=b;this.FK=a;var d,e,h,k;D(this.FK,function(a){d=[a.zL||[],a.FI||[],a.KF||[]];e=[];D(d,function(a){D(a,function(a){h=M.F.Zl(Kk(a.file),this.Lh);a.ag instanceof Hl&&a.ag.Mg&&(a.ag.labelMapFile=M.F.Zl(a.ag.Mg.file,this.Lh),null!=a.ag.Mg.tt&&null==M.F.Zl(a.ag.Mg.tt,this.Lh)&&(a.ag.colorTableFile=a.ag.Mg.tt));e.push(new Nl(h,a.ag))}.bind(this))}.bind(this));k=new Ol(e);k.Ho(M.F.Zl(M.F.Uz(a.element,this.MI[0].document),this.Lh));k.le(a.element.getAttribute("name"));k.Yv(a);
this.$c.push(k)}.bind(this));c&&c(this)};f.fk=function(a){var b="",c=0,d=this.Lh.length;for(this.thumbnailFiles=[];c<d;c++)b=rj(this.Lh[c]),-1!=gn.indexOf(b)&&this.thumbnailFiles.push(this.Lh[c]);D(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=pj(qj(this.thumbnailFiles[c]))){this.Ho(this.thumbnailFiles[c]);break}a&&a(this)};f.si=function(a){g(a)||(a=[a]);D(a,function(a){this.Lh.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",gn);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",fn.prototype.vn);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",fn.prototype.mq);v("gxnat.vis.Slicer.prototype.fileContentsKey",fn.prototype.un);v("gxnat.vis.Slicer.prototype.getFileList",fn.prototype.Oi);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",fn.prototype.Qy);v("gxnat.vis.Slicer.prototype.getThumbnailImage",fn.prototype.fk);v("gxnat.vis.Slicer.prototype.addFiles",fn.prototype.si);function jn(){Yl.call(this);this.ng.push(this.Pv);this.ng.push(this.DK);this.ng.push(this.EK)}w(jn,Yl);v("xiv.sampleData.Scans",jn);
jn.prototype.Pv=new Xl("src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 1","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample1/Sample1.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
jn.prototype.DK=new Xl("src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 2","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample2/Sample2.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
jn.prototype.EK=new Xl("src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 3","Total Frames":176,Type:"t2_spc_1mm_p2"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample3/Sample3.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function kn(a,b,c,d){uc.call(this);ln();mn();this.pp={h:am,aL:fn};this.Sc=null!=a?a:kn.States.oj;this.HI=b;this.AB=d;this.Dr=Ug(d);this.Ag=this.Ag?this.Ag:[];a="/"!==c[0]?"/"+c:c;-1===this.Ag.indexOf(this.Dr+a)&&this.Ag.push(-1===a.indexOf(this.Dr)?this.Dr+a:a);1==this.Ag.length&&(this.Cd=new Sg(this.Ag[0]))}w(kn,uc);v("xiv.start",kn);kn.ModalStates={se:"fullscreen",Ve:"popup",ms:"fullscreen-popup",pg:"windowed",oj:"demo",eD:"demp-fullscreen"};kn.States={oj:"demo",yM:"live"};
function ln(){Pf.IMA=[Qf,null]}function mn(){document.body.style.overflow="hidden"}f=kn.prototype;f.ls=B();f.ty=300;f.jI=1E3;f.Jq=!1;f.Mq=!1;f.$B=function(){};f.By=function(){nn(this);this.show();this.Sc==kn.States.oj?(S(this.Ra.$.Ve),S(this.Ra.$.Sk),on(this)):(this.Ra.mc(this.HI),pn(this))};f.QK=function(a){this.II=a};function nn(a){a.Ra=new a.II;a.Ra.MB(serverRoot);F(a.Ra,"g",a.mJ.bind(a));window.onresize=function(){null!=this.Ra&&this.Ra.k()}.bind(a)}
f.mJ=function(){this.Md.IA(null,function(a){window.console.log("SUBN JH",a);D(a,function(a){qn(this,a);this.Ra.T.Vc()}.bind(this))}.bind(this))};f.show=function(){this.Ra.a().style.opacity=0;this.Ra.n();this.Sc!==kn.States.oj&&this.Ra.Qx();F(this.Ra.T.oa,"a",this.Av.bind(this));F(this.Ra.$.Ve,"click",this.nF.bind(this));F(this.Ra.$.Sk,"click",this.g.bind(this));this.Ra.Xb.Sb(!0,0,this.jI);vk(this.Ra.a(),this.ty)};
function on(a){var b=a.Ra.T,c={slicer:(new Zl).ng,scan:(new jn).ng},d,e=null;C(c,function(a,b){D(a,function(a){d="scan"==b?new this.pp.h:new this.pp.aL;d.si(a.files);d.JB(!0);d.aC(a.GI);d.Ho(a.rw);rn(this,d,a.Ut);null==e&&(e=a.Ut);D(a.Ut,function(a){Hb(e,a)||e.push(a)})}.bind(this))}.bind(a));a=b.oa.rq(e);var h=[];D(a,function(a){null!=a&&(a.Zb.ti=0,a.Sb(!0),a=a.zi,a.style.opacity=0,h.push(a))});Nb(h,void 0,0,b.oa.a());xk(h,400,200)}
function pn(a){var b=a.Ra.T.oa,c=0;a.Ra.T&&F(a.Ra.T.oa,sn,a.fK.bind(a));a.Md=new Yg(a.Ag[0]);a.Md.FA(function(a){var e=qn(this,a);0==c&&(this.aI=a,this.ru=b.Jc[e[0]],b.xo(e[0]));1==c&&(this.Mq=!0,this.bI=a,this.Nq=this.ru.Jc[e[1]]);2==c&&(this.Jq=!0,this.Kq=a,this.rA=this.Nq.Jc[e[2]],sl([this.ru,this.Nq,this.rA]));c++}.bind(a))}
function tn(a,b){var c=a.Md.wn(b),d=a.Md.uz(b),e=0;C(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}function qn(a,b){var c=a.Md.vz(b),d=tn(a,b);un(a,d,c);return d}function vn(a,b){a.Md.EA(b.originalUrl,null,function(a){if(b.Ph("subjects")==this.Cd.Ph("subjects")&&this.Mq){var d=this.Cd.Ph("experiments");this.Kq=this.Md.Il(d);Kb(a,this.Kq);Nb(a,0,0,this.Kq);this.Mq=!1}D(a,function(a){qn(this,a)}.bind(this))}.bind(a))}
f.Av=function(a){if(null!=a.ie[this.ls])switch(a=new Sg(a.ie[this.ls]),a.pq()){case "subjects":vn(this,a);break;case "experiments":wn(this,a.originalUrl)}};f.Pl=function(a){wk(this.Ra.a(),this.ty,a)};f.g=function(){this.Pl(this.yF.bind(this))};
function wn(a,b){if(null==a.Ju)a.Ju=[];else if(-1<a.Ju.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Md.wn(a.Md.Il(b)),c=new Ql(c.projects[jh],c.subjects[jh],c.experiments[jh]);xn(a,b,function(){this.Ju.push(b);this.Jq&&(this.Jq=!1,C(this.Nq.Jc,function(){}.bind(this)))}.bind(a),c)}f.fK=function(a){var b=a.ie.Zb.ti;a.ie.Zb.ti=0;a.ie.Zb.ti=b};
f.nF=function(){var a=open(this.AB+"/scripts/viewer/xiv/popup.html?"+this.Ag[0],"XImgView","width=1200,height=800");a.focus();var b=this.Ag[0];a.onload=function(){a.EO(b,kn.ModalStates.Ve,serverRoot)}.bind(this);this.g()};function xn(a,b,c,d){yn(a,b,function(a){var b=a.Qh;zn(this,a,b,function(a){rn(this,a)}.bind(this));null!=d&&(this.pb[b].Do(d.qK),this.pb[b].Fo(d.eL),this.pb[b].zo(d.IF))}.bind(a),c)}
function un(a,b,c){var d=a.Ra.T.oa;d.kn(b);zippyNodes=d.rq(b);D(zippyNodes,function(a,b){null==c||null==c[b]||null==a[this.ls]&&(a[this.ls]=c[b])}.bind(a))}function rn(a,b,c){var d=a.Ra.T;null!=d&&(null==c&&null!=a.Md&&(c=tn(a,a.Md.Il(b.tn))),"Scans"!=b.yg&&c.push(b.yg),b.Oi(function(){if(0<b.$c.length){var a=d.Ai(b,c);if("Scans"!=b.yg){var h=d.oa.rq(c);0<c.length&&1<h.length&&d.Sb(c[c.length-1],h[h.length-2])}d.Sv(this.Ra.a());a.Tv(b.mm);a.Cw()}}.bind(a)))}
function zn(a,b,c,d){a.pb=a.pb?a.pb:{};null==a.pb[c]&&(a.pb[c]=b,d(b))}
f.yF=function(){kn.d.g.call(this);document.body.style.overflow="visible";C(this.pb,function(a,b){a.g();delete this.pb[b]}.bind(this));delete this.pb;this.Md&&(this.Md.g(),delete this.Md);delete this.Ag;delete this.AB;delete this.Dr;delete this.vO;null!=this.Cd&&(this.Cd.g(),delete this.Cd);delete this.Jq;delete this.Mq;delete this.aI;delete this.bI;delete this.Kq;delete this.ru;delete this.Nq;delete this.rA;H(this.Ra);this.Ra.g();S(this.Ra.a());delete this.Ra};
function yn(a,b,c,d){var e=mb(a.pp),h=0;C(a.pp,function(a){Wl(b,a,c,function(){h++;h===e&&null!=d&&d()})})}v("xiv.start.States",kn.States);v("xiv.start.loadCustomExtensions",ln);v("xiv.start.adjustDocumentStyle",mn);v("xiv.start.ModalStates",kn.ModalStates);v("xiv.start.checkForWebGL",kn.checkForWebGL);v("xiv.start.isCompatible",kn.kI);v("xiv.start.prototype.setServerRoot",kn.prototype.$B);v("xiv.start.prototype.setModalType",kn.prototype.QK);v("xiv.start.prototype.begin",kn.prototype.By);
v("xiv.start.prototype.show",kn.prototype.show);v("xiv.start.prototype.hide",kn.prototype.Pl);v("xiv.start.prototype.dispose",kn.prototype.g);window["xiv.start.isCompatible"]=kn.kI;window["xiv.start.checkForWebGL"]=kn.checkForWebGL;window["xiv.start.ModalStates"]=kn.ModalStates;kn.prototype.setServerRoot=kn.prototype.$B;kn.prototype.begin=kn.prototype.By;function An(){Yc.call(this);this.Sn=[];this.qw=[];this.vo=[]}w(An,Yc);f=An.prototype;f.Tq=!1;f.Uq=!1;f.Wi=!1;f.wA=function(){return this.Wi};f.YB=function(a){this.Ir=a};f.ra=function(){if(!this.Wi){for(var a,b=0;a=this.Sn[b];b++)Bn(this,a);this.Wi=!0}};function Bn(a,b){a.Tq&&(F(b.element,"mousedown",b.lf,!1,b),a.fw&&Zk(b.element,a.fw));a.Uq&&a.pw&&Zk(b.element,a.pw)}
function Cn(a){for(var b,c=0;b=a.Sn[c];c++){var d=a;d.Tq&&(Sc(b.element,"mousedown",b.lf,!1,b),d.fw&&al(b.element,d.fw));d.Uq&&d.pw&&al(b.element,d.pw);b.g()}a.Sn.length=0}
f.No=function(a,b){if(!this.bf)if(this.bf=b,!1==this.dispatchEvent(new Dn("dragstart",0,this.bf)))this.bf=null;else{var c=b.Bi;this.Zj=this.zt(c);var d=Gh(c);d.body.appendChild(this.Zj);var e=this.Zj,h=Fi(c),c=Yi(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.Ua=new cm(e);this.Ua.YB(this.Ir);F(this.Ua,"drag",this.QA,!1,this);F(this.Ua,"end",this.Ii,!1,this);F(d.body,"selectstart",this.vC);this.lm=[];for(e=0;d=this.qw[e];e++)for(var k,
h=0;k=d.Sn[h];h++)for(var c=d,l=[k.element],n=this.lm,m=0;m<l.length;m++){var q=l[m],p,r=q;p=Fi(r);r=Oi(r);p=new qh(p.y,p.x+r.width,p.y+r.height,p.x);n.push(new En(p,c,k,q));Fn(this,p)}this.Wh||(this.Wh=new qh(0,0,0,0));for(e=0;d=this.vo[e];e++)d.vt=[],d.BB=d.o.scrollLeft,d.CB=d.o.scrollTop,h=Fi(d.o),c=Oi(d.o),d.pc=new qh(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.lm[e];e++)for(h=0;d=this.vo[h];h++)ci(d.o,c.o)&&(d.vt.push(c),c.uo=d);this.Jj=null;for(e=0;d=this.vo[e];e++)F(d.o,"scroll",this.My,
!1,this);this.Ua.No(a);a.preventDefault()}};
f.Ii=function(a){var b=a.CF?null:this.Jj;if(b&&b.Jk){var c=a.clientX;a=a.clientY;var d=si(Eh(this.Zj)),e=c+d.x,d=a+d.y,h;this.So&&(h=this.So(b.Hh,b.pc,e,d));this.dispatchEvent(new Dn("drag",0,this.bf,0,b.Hh,0,c,a));b.Jk.dispatchEvent(new Dn("drop",0,this.bf,0,b.Hh,0,c,a,0,0,h))}this.dispatchEvent(new Dn("dragend",0,this.bf));Sc(this.Ua,"drag",this.QA,!1,this);Sc(this.Ua,"end",this.Ii,!1,this);Sc(Gh(this.bf.Bi).body,"selectstart",this.vC);for(b=0;c=this.vo[b];b++)Sc(c.o,"scroll",this.My,!1,this),c.vt=
[];this.Ua.g();S(this.Zj);delete this.bf;delete this.Zj;delete this.Ua;delete this.lm;delete this.Jj};
f.QA=function(a){var b,c=si(Eh(this.Zj));b=new N(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Jj,h;if(e){this.So&&e.Jk&&(h=this.So(e.Hh,e.pc,c,d));if(e.pc.contains(b)&&h==this.Px)return;e.Jk&&(this.dispatchEvent(new Dn("dragout",0,this.bf,0,e.Hh)),e.Jk.dispatchEvent(new Dn("dragout",0,this.bf,0,e.Hh,0,void 0,void 0,0,0,this.Px)));this.Px=h;this.Jj=null}if(this.Wh.contains(b)){a:{for(var k=0;e=this.lm[k];k++)if(e.pc.contains(b))if(e.uo){if(e.uo.pc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.Jj=b)&&e.Jk)this.So&&(h=this.So(e.Hh,e.pc,c,d)),c=new Dn("dragover",0,this.bf,0,e.Hh),c.fL=h,this.dispatchEvent(c),e.Jk.dispatchEvent(new Dn("dragover",0,this.bf,0,e.Hh,0,a.clientX,a.clientY,0,0,h));else if(!e){this.De||(this.De=new En(this.Wh.clone()));a=this.De.pc;a.top=this.Wh.top;a.right=this.Wh.right;a.bottom=this.Wh.bottom;a.left=this.Wh.left;for(h=0;e=this.lm[h];h++)b=e.pc,e.uo&&(e=e.uo.pc,b=new qh(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.Jj=10<=(a.right-a.left)*(a.bottom-a.top)?this.De:null}}};f.vC=function(){return!1};
f.My=function(a){for(var b=0,c;c=this.vo[b];b++)if(a.target==c.o){var d=c.CB-c.o.scrollTop,e=c.BB-c.o.scrollLeft;c.CB=c.o.scrollTop;c.BB=c.o.scrollLeft;this.De&&this.Jj==this.De&&(0<d?this.De.pc.top+=d:this.De.pc.bottom+=d,0<e?this.De.pc.left+=e:this.De.pc.right+=e);for(var h=0,k;k=c.vt[h];h++)k=k.pc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,Fn(this,k)}this.Ua.am(a)};
f.zt=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=P("table",null,P("tbody",null,b));break a;case "td":case "th":a=P("table",null,P("tbody",null,P("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.DF&&Zk(a,this.DF);return a};f.qq=function(){return this.Ua};
function Fn(a,b){if(1==a.lm.length)a.Wh=new qh(b.top,b.right,b.bottom,b.left);else{var c=a.Wh;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.f=function(){An.d.f.call(this);Cn(this)};function Dn(a,b,c,d,e,h,k,l,n,m,q){Cc.call(this,a);this.gq=c;this.zl=e;this.clientX=k;this.clientY=l;this.fL=q}w(Dn,Cc);Dn.prototype.f=function(){};
function Gn(a,b){Yc.call(this);this.element=Hh(a);this.data=b;this.Pa=null;this.qc=new bj(this);yc(this,va(zc,this.qc));if(!this.element)throw Error("Invalid argument");}w(Gn,Yc);f=Gn.prototype;f.Bi=null;f.lf=function(a){if(Hc(a)){var b=a.target;b&&(this.qc.B(b,"mousemove",this.PA,!1).B(b,"mouseout",this.PA,!1),this.qc.B(Gh(b),"mouseup",this.KI,!0),this.Bi=b,this.iw=new N(a.clientX,a.clientY),a.preventDefault())}};f.Bo=function(a){this.Pa=a};
f.PA=function(a){var b=this.Bi,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.iw.x)+Math.abs(a.clientY-this.iw.y)||b)this.qc.bg(),this.Pa.No(a,this)};f.KI=function(){this.qc.bg();delete this.iw;this.Bi=null};function En(a,b,c,d){this.pc=a;this.Jk=b;this.Hh=c;this.o=d}En.prototype.uo=null;function Hn(a,b){this.type=a;this.currentTarget=this.target=b||null}f=Hn.prototype;f.$f=!1;f.defaultPrevented=!1;f.ro=!0;f.stopPropagation=function(){this.$f=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.ro=!1};
function In(a){a=new Hn("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Ii(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.ro=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.$f;d--){var e=b[d],h=a.type,k=new Fc(a,b[d]);gb(e)?Zc(e,h,!0,k):Vc(e,h,!0,k)}for(d=0;d<b.length&&!a.$f;d++)e=b[d],h=a.type,k=new Fc(a,b[d]),gb(e)?Zc(e,h,!1,k):Vc(e,h,!1,k)};function Jn(a,b){if(!a)throw Error("Invalid class name "+a);if(!ja(b))throw Error("Invalid decorator function "+b);Kn[a]=b}var Ln={},Kn={};function Mn(){}var Nn;fa(Mn);var On={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=Mn.prototype;f.Fg=function(){};f.v=function(a){var b=a.M().v("div",this.ek(a).join(" "),a.getContent());Pn(this,a,b);return b};f.Ia=function(a){return a};f.bk=function(a,b,c){if(a=a.a?a.a():a){var d=[b];E&&!nc("7")&&(d=Qn(Xk(a),b),d.push(b));(c?$k:bl)(a,d)}};f.Be=function(){return!0};
f.wb=function(a,b){b.id&&jj(a,b.id);var c=this.Ia(b);c&&c.firstChild?Rn(a,c.firstChild.nextSibling?Mb(c.childNodes):c.firstChild):a.Bc=null;var d=0,e=this.U(),h=this.U(),k=!1,l=!1,c=!1,n=Mb(Xk(b));D(n,function(a){k||a!=e?l||a!=h?d|=this.gu(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.R=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var m=a.Of;m&&n.push.apply(n,m);if(E&&!nc("7")){var q=Qn(n);0<q.length&&(n.push.apply(n,q),c=!0)}if(!k||!l||m||c)b.className=n.join(" ");Pn(this,a,b);return b};
f.Ul=function(a){a.He()&&this.gm(a.a(),!0);a.isEnabled()&&this.dj(a,a.xa())};function Sn(a,b,c){if(a=c||a.Fg())c=b.getAttribute("role")||null,a!=c&&Uk(b,a)}function Pn(a,b,c){b.xa()||Vk(c,"hidden",!b.xa());b.isEnabled()||a.Yg(c,1,!b.isEnabled());Tn(b,8)&&a.Yg(c,8,!!(b.R&8));Tn(b,16)&&a.Yg(c,16,b.Fh());Tn(b,64)&&a.Yg(c,64,!!(b.R&64))}f.wo=function(a,b){Vi(a,!b,!E&&!ec)};f.gm=function(a,b){this.bk(a,this.U()+"-rtl",b)};f.Gh=function(a){var b;return Tn(a,32)&&(b=a.hc())?ii(b)&&ji(b):!1};
f.dj=function(a,b){var c;if(Tn(a,32)&&(c=a.hc())){if(!b&&a.R&32){try{c.blur()}catch(d){}a.R&32&&a.ik(null)}(ii(c)&&ji(c))!=b&&hi(c,b)}};f.aa=function(a,b){Si(a,b);a&&Vk(a,"hidden",!b)};f.mc=function(a,b,c){var d=a.a();if(d){var e=this.xn(b);e&&this.bk(a,e,c);this.Yg(d,b,c)}};f.Yg=function(a,b,c){Nn||(Nn={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Nn[b];var d=a.getAttribute("role")||null;d&&(d=On[d]||b,b="checked"==b||"selected"==b?d:b);b&&Vk(a,b,c)};
f.Hk=function(a,b){var c=this.Ia(a);if(c&&(Wh(c),b))if(s(b))ei(c,b);else{var d=function(a){if(a){var b=Gh(c);c.appendChild(s(a)?b.createTextNode(a):a)}};g(b)?D(b,d):!ha(b)||"nodeType"in b?d(b):D(Mb(b),d)}};f.hc=function(a){return a.a()};f.U=function(){return"goog-control"};f.ek=function(a){var b=this.U(),c=[b],d=this.U();d!=b&&c.push(d);b=a.Kl();for(d=[];b;){var e=b&-b;d.push(this.xn(e));b&=~e}c.push.apply(c,d);(a=a.Of)&&c.push.apply(c,a);E&&!nc("7")&&c.push.apply(c,Qn(c));return c};
function Qn(a,b){var c=[];b&&(a=a.concat([b]));D([],function(d){!Eb(d,va(Hb,a))||b&&!Hb(d,b)||c.push(d.join("_"))});return c}f.xn=function(a){this.Vp||Un(this);return this.Vp[a]};f.gu=function(a){if(!this.tC){this.Vp||Un(this);var b=this.Vp,c={},d;for(d in b)c[b[d]]=d;this.tC=c}a=parseInt(this.tC[a],10);return isNaN(a)?0:a};function Un(a){var b=a.U();b.replace(/\xa0|\s/g," ");a.Vp={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Vn(a,b){Yc.call(this);a&&this.sl(a,b)}w(Vn,Yc);f=Vn.prototype;f.o=null;f.Vq=null;f.xu=null;f.Wq=null;f.Ie=-1;f.Xi=-1;f.ft=!1;
var Wn={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Xn={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Yn=E||gc&&nc("525"),Zn=ac&&fc;f=Vn.prototype;
f.zq=function(a){gc&&(17==this.Ie&&!a.ctrlKey||18==this.Ie&&!a.altKey||ac&&91==this.Ie&&!a.metaKey)&&(this.Xi=this.Ie=-1);-1==this.Ie&&(a.ctrlKey&&17!=a.keyCode?this.Ie=17:a.altKey&&18!=a.keyCode?this.Ie=18:a.metaKey&&91!=a.keyCode&&(this.Ie=91));Yn&&!el(a.keyCode,this.Ie,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Xi=gl(a.keyCode),Zn&&(this.ft=a.altKey))};f.MH=function(a){this.Xi=this.Ie=-1;this.ft=a.altKey};
f.handleEvent=function(a){var b=a.Dc,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.Xi,d=13!=c&&27!=c?b.keyCode:0):gc&&"keypress"==a.type?(c=this.Xi,d=0<=b.charCode&&63232>b.charCode&&fl(c)?b.charCode:0):ec?(c=this.Xi,d=fl(c)?b.keyCode:0):(c=b.keyCode||this.Xi,d=b.charCode||0,Zn&&(e=this.ft),ac&&63==d&&224==c&&(c=191));var h=c=gl(c),k=b.keyIdentifier;c?63232<=c&&c in Wn?h=Wn[c]:25==c&&a.shiftKey&&(h=9):k&&k in Xn&&(h=Xn[k]);a=h==this.Ie;this.Ie=h;b=new $n(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.o};f.sl=function(a,b){this.Wq&&this.detach();this.o=a;this.Vq=F(this.o,"keypress",this,b);this.xu=F(this.o,"keydown",this.zq,b,this);this.Wq=F(this.o,"keyup",this.MH,b,this)};f.detach=function(){this.Vq&&(Tc(this.Vq),Tc(this.xu),Tc(this.Wq),this.Wq=this.xu=this.Vq=null);this.o=null;this.Xi=this.Ie=-1};f.f=function(){Vn.d.f.call(this);this.detach()};function $n(a,b,c,d){Fc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w($n,Fc);function ao(a,b,c){fj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ma(b);if(d=Ln[d])break;b=b.d?b.d.constructor:null}b=d?ja(d.be)?d.be():new d:null}this.sa=b;this.Bc=ca(a)?a:null}w(ao,fj);f=ao.prototype;f.Bc=null;f.R=0;f.To=39;f.$m=255;f.Po=0;f.vc=!0;f.Of=null;f.kk=!0;f.Np=!1;f.Iv=null;f.Ao=function(a){this.fa&&a!=this.kk&&bo(this,a);this.kk=a};f.hc=function(){return this.sa.hc(this)};f.sq=function(){return this.kb||(this.kb=new Vn)};f.Oa=function(){return this.sa};
f.bk=function(a,b){b?a&&(this.Of?Hb(this.Of,a)||this.Of.push(a):this.Of=[a],this.sa.bk(this,a,!0)):a&&this.Of&&Kb(this.Of,a)&&(0==this.Of.length&&(this.Of=null),this.sa.bk(this,a,!1))};f.v=function(){var a=this.sa.v(this);this.o=a;Sn(this.sa,a,this.Pi());this.Np||this.sa.wo(a,!1);this.xa()||this.sa.aa(a,!1)};f.Pi=function(){return this.Iv};f.Ia=function(){return this.sa.Ia(this.a())};f.Be=function(a){return this.sa.Be(a)};
f.Xd=function(a){this.o=a=this.sa.wb(this,a);Sn(this.sa,a,this.Pi());this.Np||this.sa.wo(a,!1);this.vc="none"!=a.style.display};f.ab=function(){ao.d.ab.call(this);this.sa.Ul(this);if(this.To&-2&&(this.kk&&bo(this,!0),Tn(this,32))){var a=this.hc();if(a){var b=this.sq();b.sl(a);this.bb().B(b,"key",this.Ig).B(a,"focus",this.jk).B(a,"blur",this.ik)}}};
function bo(a,b){var c=a.bb(),d=a.a();b?(c.B(d,"mouseover",a.lk).B(d,"mousedown",a.Jg).B(d,"mouseup",a.Qf).B(d,"mouseout",a.Bq),a.En!=ea&&c.B(d,"contextmenu",a.En),E&&c.B(d,"dblclick",a.bA)):(c.mb(d,"mouseover",a.lk).mb(d,"mousedown",a.Jg).mb(d,"mouseup",a.Qf).mb(d,"mouseout",a.Bq),a.En!=ea&&c.mb(d,"contextmenu",a.En),E&&c.mb(d,"dblclick",a.bA))}f.rc=function(){ao.d.rc.call(this);this.kb&&this.kb.detach();this.xa()&&this.isEnabled()&&this.sa.dj(this,!1)};
f.f=function(){ao.d.f.call(this);this.kb&&(this.kb.g(),delete this.kb);delete this.sa;this.Of=this.Bc=null};f.getContent=function(){return this.Bc};f.Hk=function(a){this.sa.Hk(this.a(),a);this.Bc=a};function Rn(a,b){a.Bc=b}f.oq=function(){var a=this.getContent();if(!a)return"";a=s(a)?a:g(a)?Cb(a,mi).join(""):ki(a);return Ha(a)};f.gm=function(a){ao.d.gm.call(this,a);var b=this.a();b&&this.sa.gm(b,a)};f.wo=function(a){this.Np=a;var b=this.a();b&&this.sa.wo(b,a)};f.xa=function(){return this.vc};
f.aa=function(a,b){if(b||this.vc!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.sa.aa(c,a);this.isEnabled()&&this.sa.dj(this,a);this.vc=a;return!0}return!1};f.isEnabled=function(){return!(this.R&1)};f.lc=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!co(this,1,!a)||(a||(this.setActive(!1),this.dg(!1)),this.xa()&&this.sa.dj(this,a),this.mc(1,!a))};f.dg=function(a){co(this,2,a)&&this.mc(2,a)};f.Kg=function(){return!!(this.R&4)};
f.setActive=function(a){co(this,4,a)&&this.mc(4,a)};f.Eo=function(a){co(this,8,a)&&this.mc(8,a)};f.Fh=function(){return!!(this.R&16)};f.of=function(a){co(this,16,a)&&this.mc(16,a)};f.Tb=function(a){co(this,64,a)&&this.mc(64,a)};f.Kl=function(){return this.R};f.mc=function(a,b){Tn(this,a)&&b!=!!(this.R&a)&&(this.sa.mc(this,a,b),this.R=b?this.R|a:this.R&~a)};function Tn(a,b){return!!(a.To&b)}
f.Yc=function(a,b){if(this.fa&&this.R&a&&!b)throw Error("Component already rendered");!b&&this.R&a&&this.mc(a,!1);this.To=b?this.To|a:this.To&~a};function eo(a,b){return!!(a.$m&b)&&Tn(a,b)}function co(a,b,c){return Tn(a,b)&&!!(a.R&b)!=c&&(!(a.Po&b)||a.dispatchEvent(hj(b,c)))&&!a.Xj}f.lk=function(a){(!a.relatedTarget||!ci(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&eo(this,2)&&this.dg(!0)};
f.Bq=function(a){a.relatedTarget&&ci(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(eo(this,4)&&this.setActive(!1),eo(this,2)&&this.dg(!1))};f.En=ea;f.Jg=function(a){this.isEnabled()&&(eo(this,2)&&this.dg(!0),Hc(a)&&(eo(this,4)&&this.setActive(!0),this.sa.Gh(this)&&this.hc().focus()));!this.Np&&Hc(a)&&a.preventDefault()};f.Qf=function(a){this.isEnabled()&&(eo(this,2)&&this.dg(!0),this.Kg()&&this.yk(a)&&eo(this,4)&&this.setActive(!1))};f.bA=function(a){this.isEnabled()&&this.yk(a)};
f.yk=function(a){eo(this,16)&&this.of(!this.Fh());eo(this,8)&&this.Eo(!0);eo(this,64)&&this.Tb(!(this.R&64));var b=new Cc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Fv=a.Fv);return this.dispatchEvent(b)};f.jk=function(){eo(this,32)&&co(this,32,!0)&&this.mc(32,!0)};f.ik=function(){eo(this,4)&&this.setActive(!1);eo(this,32)&&co(this,32,!1)&&this.mc(32,!1)};
f.Ig=function(a){return this.xa()&&this.isEnabled()&&this.Pf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.Pf=function(a){return 13==a.keyCode&&this.yk(a)};if(!ja(ao))throw Error("Invalid component class "+ao);if(!ja(Mn))throw Error("Invalid renderer class "+Mn);var fo=ma(ao);Ln[fo]=Mn;Jn("goog-control",function(){return new ao(null)});function go(){this.Iy=[]}w(go,Mn);fa(go);function ho(a,b){var c=a.Iy[b];if(!c){switch(b){case 0:c=a.U()+"-highlight";break;case 1:c=a.U()+"-checkbox";break;case 2:c=a.U()+"-content"}a.Iy[b]=c}return c}f=go.prototype;f.Fg=function(){return"menuitem"};f.v=function(a){var b=a.M().v("div",this.ek(a).join(" "),io(this,a.getContent(),a.M()));jo(this,a,b,Tn(a,8)||Tn(a,16));return b};f.Ia=function(a){return a&&a.firstChild};
f.wb=function(a,b){var c=Zh(b),d=ho(this,2);c&&Yk(c,d)||b.appendChild(io(this,b.childNodes,a.M()));Yk(b,"goog-option")&&(a.Or(!0),this.Or(a,b,!0));return go.d.wb.call(this,a,b)};f.Hk=function(a,b){var c=this.Ia(a),d=ko(this,a)?c.firstChild:null;go.d.Hk.call(this,a,b);d&&!ko(this,a)&&c.insertBefore(d,c.firstChild||null)};function io(a,b,c){a=ho(a,2);return c.v("div",a,b)}f.ZB=function(a,b,c){a&&b&&jo(this,a,b,c)};f.Or=function(a,b,c){a&&b&&jo(this,a,b,c)};
function ko(a,b){var c=a.Ia(b);if(c){var c=c.firstChild,d=ho(a,1);return!!c&&bi(c)&&Yk(c,d)}return!1}function jo(a,b,c,d){Sn(a,c,b.Pi());Pn(a,b,c);d!=ko(a,c)&&(cl(c,"goog-option",d),c=a.Ia(c),d?(a=ho(a,1),c.insertBefore(b.M().v("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.xn=function(a){switch(a){case 2:return ho(this,0);case 16:case 8:return"goog-option-selected";default:return go.d.xn.call(this,a)}};
f.gu=function(a){var b=ho(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return go.d.gu.call(this,a)}};f.U=function(){return"goog-menuitem"};function lo(a,b,c,d){ao.call(this,a,d||go.be(),c);this.J(b)}w(lo,ao);f=lo.prototype;f.K=function(){var a=this.Ru;return null!=a?a:this.oq()};f.J=function(a){this.Ru=a};f.Yc=function(a,b){lo.d.Yc.call(this,a,b);switch(a){case 8:this.Fh()&&!b&&this.of(!1);var c=this.a();c&&this.Oa().ZB(this,c,b);break;case 16:(c=this.a())&&this.Oa().Or(this,c,b)}};f.ZB=function(a){this.Yc(8,a)};f.Or=function(a){this.Yc(16,a)};
f.oq=function(){var a=this.getContent();return g(a)?(a=Cb(a,function(a){return bi(a)&&(Yk(a,"goog-menuitem-accel")||Yk(a,"goog-menuitem-mnemonic-separator"))?"":mi(a)}).join(""),Ha(a)):lo.d.oq.call(this)};f.Qf=function(a){var b=this.getParent();if(b){var c=b.gB;b.gB=null;if(b=c&&t(a.clientX))b=new N(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}lo.d.Qf.call(this,a)};f.Pf=function(a){return a.keyCode==this.OA&&this.yk(a)?!0:lo.d.Pf.call(this,a)};f.KG=function(){return this.OA};
Jn("goog-menuitem",function(){return new lo(null)});lo.prototype.Pi=function(){return Tn(this,16)?"menuitemcheckbox":Tn(this,8)?"menuitemradio":lo.d.Pi.call(this)};function mo(a){this.xy=a}fa(mo);f=mo.prototype;f.Fg=function(){return this.xy};function no(a,b){a&&(a.tabIndex=b?0:-1)}f.v=function(a){return a.M().v("div",this.ek(a).join(" "))};f.Ia=function(a){return a};f.Be=function(a){return"DIV"==a.tagName};f.wb=function(a,b){b.id&&jj(a,b.id);var c=this.U(),d=!1,e=Xk(b);e&&D(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.lc(!1):b==c+"-horizontal"?a.Th(oo):b==c+"-vertical"&&a.Th(po))},this);d||Zk(b,c);qo(this,a,this.Ia(b));return b};
function qo(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.Zt(d);h&&(h.o=d,b.isEnabled()||h.lc(!1),b.Ym(h),h.wb(d))}else d.nodeValue&&""!=Ia(d.nodeValue)||c.removeChild(d);d=e}}f.Zt=function(a){a:{var b;a=Xk(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Kn?Kn[b]():null){a=b;break a}a=null}return a};f.Ul=function(a){a=a.a();Vi(a,!0,fc);E&&(a.hideFocus=!0);var b=this.Fg();b&&Uk(a,b)};f.hc=function(a){return a.a()};f.U=function(){return"goog-container"};
f.ek=function(a){var b=this.U(),c=[b,a.Ib()==oo?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function ro(){}w(ro,Mn);fa(ro);ro.prototype.v=function(a){return a.M().v("div",this.U())};ro.prototype.wb=function(a,b){b.id&&jj(a,b.id);if("HR"==b.tagName){var c=b;b=this.v(a);Xh(b,c);S(c)}else Zk(b,this.U());return b};ro.prototype.Hk=function(){};ro.prototype.U=function(){return"goog-menuseparator"};function so(a,b){ao.call(this,null,a||ro.be(),b);this.Yc(1,!1);this.Yc(2,!1);this.Yc(4,!1);this.Yc(32,!1);this.R=1}w(so,ao);so.prototype.ab=function(){so.d.ab.call(this);Uk(this.a(),"separator")};Jn("goog-menuseparator",function(){return new so});function to(a){this.xy=a||"menu"}w(to,mo);fa(to);f=to.prototype;f.Be=function(a){return"UL"==a.tagName||to.d.Be.call(this,a)};f.Zt=function(a){return"HR"==a.tagName?new so:to.d.Zt.call(this,a)};f.Qj=function(a,b){return ci(a.a(),b)};f.U=function(){return"goog-menu"};f.Ul=function(a){to.d.Ul.call(this,a);Vk(a.a(),"haspopup","true")};function uo(a,b,c,d,e,h,k,l,n){var m,q;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==xi(m)||(q=Fi(m),p||(p=(p=Gi(m))&&fc?-m.scrollLeft:!p||E&&nc("8")||"visible"==wi(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,q=ph(q,new N(p,m.scrollTop))))}m=q||new N;q=Qi(a);(p=Ei(a))&&q.uA(new th(p.left,p.top,p.right-p.left,p.bottom-p.top));var p=Eh(a),r=Eh(c);if(p.pa!=r.pa){var u=p.pa.body,r=ri(r),z=new N(0,0),y=Rh(Gh(u)),J=u;do{var T=y==r?Fi(J):Ji(J);z.x+=
T.x;z.y+=T.y}while(y&&y!=r&&(J=y.frameElement)&&(y=y.parent));u=ph(z,Fi(u));E&&!qi(p)&&(u=ph(u,si(p)));q.left+=u.x;q.top+=u.y}a=vo(a,b);b=new N(a&2?q.left+q.width:q.left,a&1?q.top+q.height:q.top);b=ph(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var Q;if(k)if(n)Q=n;else if(Q=Ei(c))Q.top-=m.y,Q.right-=m.x,Q.bottom-=m.y,Q.left-=m.x;return wo(b,c,d,h,Q,k,l)}
function wo(a,b,c,d,e,h,k){a=a.clone();var l=0,n=vo(b,c);c=Oi(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;yi(b,a);sh(c,k)||(e=qi(Eh(Gh(b))),!E||e&&nc("8")?
(b=b.style,fc?b.MozBoxSizing="border-box":gc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=Yi(b,"padding"),b=aj(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function vo(a,b){return(b&4&&Gi(a)?b^2:b)&-5};var xo,yo;yo=xo=!1;var zo=Sb;zo&&(-1!=zo.indexOf("Firefox")||-1!=zo.indexOf("Camino")||(-1!=zo.indexOf("iPhone")||-1!=zo.indexOf("iPod")?xo=!0:-1!=zo.indexOf("iPad")&&(yo=!0)));var Ao=xo,Bo=yo;Jn("goog-menuseparator",function(){return new so});function Co(a,b,c){fj.call(this,c);this.sa=b||mo.be();this.Ea=a||po}w(Co,fj);var oo="horizontal",po="vertical";f=Co.prototype;f.yu=null;f.kb=null;f.sa=null;f.Ea=null;f.vc=!0;f.Cc=!0;f.Tt=!0;f.Ge=-1;f.tc=null;f.Kh=!1;f.SE=!1;f.jK=!0;f.uh=null;f.hc=function(){return this.yu||this.sa.hc(this)};f.sq=function(){return this.kb||(this.kb=new Vn(this.hc()))};f.Oa=function(){return this.sa};f.v=function(){this.o=this.sa.v(this)};f.Ia=function(){return this.sa.Ia(this.a())};f.Be=function(a){return this.sa.Be(a)};
f.Xd=function(a){this.o=this.sa.wb(this,a);"none"==a.style.display&&(this.vc=!1)};f.ab=function(){Co.d.ab.call(this);lj(this,function(a){a.fa&&Do(this,a)},this);var a=this.a();this.sa.Ul(this);this.aa(this.vc,!0);this.bb().B(this,"enter",this.mu).B(this,"highlight",this.nu).B(this,"unhighlight",this.ou).B(this,"open",this.QH).B(this,"close",this.HH).B(a,"mousedown",this.Jg).B(Gh(a),"mouseup",this.JH).B(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.GH);this.Gh()&&Eo(this,!0)};
function Eo(a,b){var c=a.bb(),d=a.hc();b?c.B(d,"focus",a.jk).B(d,"blur",a.ik).B(a.sq(),"key",a.Ig):c.mb(d,"focus",a.jk).mb(d,"blur",a.ik).mb(a.sq(),"key",a.Ig)}f.rc=function(){this.Tg(-1);this.tc&&this.tc.Tb(!1);this.Kh=!1;Co.d.rc.call(this)};f.f=function(){Co.d.f.call(this);this.kb&&(this.kb.g(),this.kb=null);this.sa=this.tc=this.uh=this.yu=null};f.mu=function(){return!0};
f.nu=function(a){var b=oj(this,a.target);if(-1<b&&b!=this.Ge){var c=Fo(this);c&&c.dg(!1);this.Ge=b;c=Fo(this);this.Kh&&c.setActive(!0);this.jK&&this.tc&&c!=this.tc&&(Tn(c,64)?c.Tb(!0):this.tc.Tb(!1))}b=this.a();null!=a.target.a()&&Vk(b,"activedescendant",a.target.a().id)};f.ou=function(a){a.target==Fo(this)&&(this.Ge=-1);this.a().removeAttribute("aria-activedescendant")};f.QH=function(a){(a=a.target)&&a!=this.tc&&a.getParent()==this&&(this.tc&&this.tc.Tb(!1),this.tc=a)};
f.HH=function(a){a.target==this.tc&&(this.tc=null)};f.Jg=function(a){this.Cc&&(this.Kh=!0);var b=this.hc();b&&ii(b)&&ji(b)?b.focus():a.preventDefault()};f.JH=function(){this.Kh=!1};f.GH=function(a){var b;a:{b=a.target;if(this.uh)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.uh){b=this.uh[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Jg(a);break;case "mouseup":b.Qf(a);break;case "mouseover":b.lk(a);break;case "mouseout":b.Bq(a);break;case "contextmenu":b.En(a)}};
f.jk=function(){};f.ik=function(){this.Tg(-1);this.Kh=!1;this.tc&&this.tc.Tb(!1)};f.Ig=function(a){return this.isEnabled()&&this.xa()&&(0!=mj(this)||this.yu)&&this.Pf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.Pf=function(a){var b=Fo(this);if(b&&"function"==typeof b.Ig&&b.Ig(a)||this.tc&&this.tc!=b&&"function"==typeof this.tc.Ig&&this.tc.Ig(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.Gh())this.hc().blur();else return!1;break;case 36:Go(this);break;case 35:Ho(this);break;case 38:if(this.Ea==po)Io(this);else return!1;break;case 37:if(this.Ea==oo)this.He()?Jo(this):Io(this);else return!1;break;case 40:if(this.Ea==po)Jo(this);else return!1;break;case 39:if(this.Ea==
oo)this.He()?Io(this):Jo(this);else return!1;break;default:return!1}return!0};function Do(a,b){var c=b.a(),c=c.id||(c.id=ij(b));a.uh||(a.uh={});a.uh[c]=b}f.Ym=function(a,b){Co.d.Ym.call(this,a,b)};f.$s=function(a,b,c){a.Po|=2;a.Po|=64;!this.Gh()&&this.SE||a.Yc(32,!1);a.Ao(!1);Co.d.$s.call(this,a,b,c);a.fa&&this.fa&&Do(this,a);b<=this.Ge&&this.Ge++};
f.removeChild=function(a,b){if(a=s(a)?kj(this,a):a){var c=oj(this,a);-1!=c&&(c==this.Ge?(a.dg(!1),this.Ge=-1):c<this.Ge&&this.Ge--);(c=a.a())&&c.id&&this.uh&&tb(this.uh,c.id)}a=Co.d.removeChild.call(this,a,b);a.Ao(!0);return a};f.Ib=function(){return this.Ea};f.Th=function(a){if(this.a())throw Error("Component already rendered");this.Ea=a};f.xa=function(){return this.vc};
f.aa=function(a,b){if(b||this.vc!=a&&this.dispatchEvent(a?"show":"hide")){this.vc=a;var c=this.a();c&&(Si(c,a),this.Gh()&&no(this.hc(),this.Cc&&this.vc),b||this.dispatchEvent(this.vc?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Cc};
f.lc=function(a){this.Cc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Cc=!0,lj(this,function(a){a.NC?delete a.NC:a.lc(!0)})):(lj(this,function(a){a.isEnabled()?a.lc(!1):a.NC=!0}),this.Kh=this.Cc=!1),this.Gh()&&no(this.hc(),a&&this.vc))};f.Gh=function(){return this.Tt};f.dj=function(a){a!=this.Tt&&this.fa&&Eo(this,a);this.Tt=a;this.Cc&&this.vc&&no(this.hc(),a)};f.Tg=function(a){(a=nj(this,a))?a.dg(!0):-1<this.Ge&&Fo(this).dg(!1)};f.dg=function(a){this.Tg(oj(this,a))};
function Fo(a){return nj(a,a.Ge)}function Go(a){Ko(a,function(a,c){return(a+1)%c},mj(a)-1)}function Ho(a){Ko(a,function(a,c){a--;return 0>a?c-1:a},0)}function Jo(a){Ko(a,function(a,c){return(a+1)%c},a.Ge)}function Io(a){Ko(a,function(a,c){a--;return 0>a?c-1:a},a.Ge)}function Ko(a,b,c){c=0>c?oj(a,a.tc):c;var d=mj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=nj(a,c);if(h&&a.Gy(h)){a.Tg(c);break}e++;c=b.call(a,c,d)}}f.Gy=function(a){return a.xa()&&a.isEnabled()&&Tn(a,2)};function Lo(){}w(Lo,Mn);fa(Lo);Lo.prototype.U=function(){return"goog-menuheader"};function Mo(a,b,c){ao.call(this,a,c||Lo.be(),b);this.Yc(1,!1);this.Yc(2,!1);this.Yc(4,!1);this.Yc(32,!1);this.R=1}w(Mo,ao);Jn("goog-menuheader",function(){return new Mo(null)});function No(a,b){Co.call(this,po,b||to.be(),a);this.dj(!1)}w(No,Co);f=No.prototype;f.et=!0;f.TE=!1;f.U=function(){return this.Oa().U()};f.Qj=function(a){if(this.Oa().Qj(this,a))return!0;for(var b=0,c=mj(this);b<c;b++){var d=nj(this,b);if("function"==typeof d.Qj&&d.Qj(a))return!0}return!1};f.Kj=function(a){this.Ym(a,!0)};f.Xv=function(a,b){var c=this.xa();c||Si(this.a(),!0);var d=this.a(),e=a,h=b,k=Fi(d);e instanceof N&&(h=e.y,e=e.x);yi(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Si(this.a(),!1)};
f.aa=function(a,b,c){(b=No.d.aa.call(this,a,b))&&a&&this.fa&&this.et&&this.hc().focus();this.gB=a&&c&&t(c.clientX)?new N(c.clientX,c.clientY):null;return b};f.mu=function(a){this.et&&this.hc().focus();return No.d.mu.call(this,a)};f.Gy=function(a){return(this.TE||a.isEnabled())&&a.xa()&&Tn(a,2)};f.Xd=function(a){var b=this.Oa(),c;c=this.M();c=Jh(c.pa,"div",b.U()+"-content",a);for(var d=c.length,e=0;e<d;e++)qo(b,this,c[e]);No.d.Xd.call(this,a)};
f.Pf=function(a){var b=No.d.Pf.call(this,a);b||lj(this,function(c){!b&&c.KG&&c.OA==a.keyCode&&(this.isEnabled()&&this.dg(c),b=c.Ig(a))},this);return b};f.Tg=function(a){No.d.Tg.call(this,a);var b=nj(this,a);if(b){a=this.a();var b=b.a(),c=Fi(b),d=Fi(a),e=aj(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new N(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Oo(){}Oo.prototype.je=function(){};function Po(a,b,c){this.element=a;this.jn=b;this.kK=c}w(Po,Oo);Po.prototype.je=function(a,b,c){uo(this.element,this.jn,a,b,void 0,c,this.kK)};function Qo(a,b,c,d){Po.call(this,a,b);this.Yq=c?5:0;this.Bv=d||void 0}w(Qo,Po);Qo.prototype.wG=function(){return this.Yq};Qo.prototype.je=function(a,b,c,d){var e=uo(this.element,this.jn,a,b,null,c,10,d,this.Bv);if(e&496){var h=Ro(e,this.jn);b=Ro(e,b);e=uo(this.element,h,a,b,null,c,10,d,this.Bv);e&496&&(h=Ro(e,h),b=Ro(e,b),uo(this.element,h,a,b,null,c,this.Yq,d,this.Bv))}};function Ro(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function So(a,b,c,d){Qo.call(this,a,b,c||d);if(c||d)this.Yq=65|(d?32:132)}w(So,Qo);function To(){}w(To,Mn);fa(To);f=To.prototype;f.Fg=function(){return"button"};f.Yg=function(a,b,c){switch(b){case 8:case 16:Vk(a,"pressed",c);break;default:case 64:case 1:To.d.Yg.call(this,a,b,c)}};f.v=function(a){var b=To.d.v.call(this,a);this.Vr(b,a.Dn());var c=a.K();c&&this.J(b,c);Tn(a,16)&&this.Yg(b,16,a.Fh());return b};f.wb=function(a,b){b=To.d.wb.call(this,a,b);var c=this.K(b);a.ig=c;a.vw=this.Dn(b);Tn(a,16)&&this.Yg(b,16,a.Fh());return b};f.K=ea;f.J=ea;f.Dn=function(a){return a.title};
f.Vr=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.xo=function(a,b){var c=a.He(),d=this.U()+"-collapse-left",e=this.U()+"-collapse-right";a.bk(c?e:d,!!(b&1));a.bk(c?d:e,!!(b&2))};f.U=function(){return"goog-button"};function Uo(){}w(Uo,To);fa(Uo);f=Uo.prototype;f.Fg=function(){};f.v=function(a){a.Ao(!1);a.$m&=-256;a.Yc(32,!1);return a.M().v("button",{"class":this.ek(a).join(" "),disabled:!a.isEnabled(),title:a.Dn()||"",value:a.K()||""},a.oq()||"")};f.Be=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.wb=function(a,b){a.Ao(!1);a.$m&=-256;a.Yc(32,!1);if(b.disabled){var c=this.xn(1);Zk(b,c)}return Uo.d.wb.call(this,a,b)};
f.Ul=function(a){a.bb().B(a.a(),"click",a.yk)};f.wo=ea;f.gm=ea;f.Gh=function(a){return a.isEnabled()};f.dj=ea;f.mc=function(a,b,c){Uo.d.mc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.K=function(a){return a.value};f.J=function(a,b){a&&(a.value=b)};f.Yg=ea;function Vo(a,b,c){ao.call(this,a,b||Uo.be(),c)}w(Vo,ao);f=Vo.prototype;f.K=function(){return this.ig};f.J=function(a){this.ig=a;this.Oa().J(this.a(),a)};f.Dn=function(){return this.vw};f.Vr=function(a){this.vw=a;this.Oa().Vr(this.a(),a)};f.xo=function(a){this.Oa().xo(this,a)};f.f=function(){Vo.d.f.call(this);delete this.ig;delete this.vw};f.ab=function(){Vo.d.ab.call(this);if(Tn(this,32)){var a=this.hc();a&&this.bb().B(a,"keyup",this.Pf)}};
f.Pf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.yk(a):32==a.keyCode};Jn("goog-button",function(){return new Vo(null)});function Wo(){}w(Wo,To);fa(Wo);f=Wo.prototype;f.v=function(a){var b={"class":"goog-inline-block "+this.ek(a).join(" ")},b=a.M().v("div",b,this.Yp(a.getContent(),a.M()));this.Vr(b,a.Dn());Pn(this,a,b);return b};f.Fg=function(){return"button"};f.Ia=function(a){return a&&a.firstChild.firstChild};f.Yp=function(a,b){return b.v("div","goog-inline-block "+(this.U()+"-outer-box"),b.v("div","goog-inline-block "+(this.U()+"-inner-box"),a))};f.Be=function(a){return"DIV"==a.tagName};
f.wb=function(a,b){Xo(b,!0);Xo(b,!1);var c;a:{c=a.M().Cz(b);var d=this.U()+"-outer-box";if(c&&Yk(c,d)&&(c=a.M().Cz(c),d=this.U()+"-inner-box",c&&Yk(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Yp(b.childNodes,a.M()));$k(b,["goog-inline-block",this.U()]);return Wo.d.wb.call(this,a,b)};f.U=function(){return"goog-custom-button"};
function Xo(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ia(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Yo(){}w(Yo,Wo);fa(Yo);f=Yo.prototype;f.Ia=function(a){return Yo.d.Ia.call(this,a&&a.firstChild)};f.wb=function(a,b){var c=Ih("*","goog-menu",b)[0];if(c){Si(c,!1);Gh(c).body.appendChild(c);var d=new No;d.wb(c);Zo(a,d)}return Yo.d.wb.call(this,a,b)};f.Yp=function(a,b){return Yo.d.Yp.call(this,[this.createCaption(a,b),b.v("div","goog-inline-block "+(this.U()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.v("div","goog-inline-block "+(this.U()+"-caption"),a)};f.U=function(){return"goog-menu-button"};function $o(a,b,c,d,e){Vo.call(this,a,c||Yo.be(),d);this.Yc(64,!0);this.dr=new So(null,5);b&&Zo(this,b);this.DI=null;this.ma=new Uf(500);!Ao&&!Bo||nc("533.17.9")||(this.Pq=!0);this.EI=e||to.be()}w($o,Vo);f=$o.prototype;f.Pq=!1;f.xK=!1;f.ab=function(){$o.d.ab.call(this);ap(this,!0);this.S&&bp(this,this.S,!0);Vk(this.o,"haspopup",!!this.S)};f.rc=function(){$o.d.rc.call(this);ap(this,!1);if(this.S){this.Tb(!1);this.S.rc();bp(this,this.S,!1);var a=this.S.a();a&&S(a)}};
f.f=function(){$o.d.f.call(this);this.S&&(this.S.g(),delete this.S);delete this.pK;this.ma.g()};f.Jg=function(a){$o.d.Jg.call(this,a);this.Kg()&&(this.Tb(!(this.R&64),a),this.S&&(this.S.Kh=!!(this.R&64)))};f.Qf=function(a){$o.d.Qf.call(this,a);this.S&&!this.Kg()&&(this.S.Kh=!1)};f.yk=function(){this.setActive(!1);return!0};f.IH=function(a){this.S&&this.S.xa()&&!this.Qj(a.target)&&this.Tb(!1)};f.Qj=function(a){return a&&ci(this.a(),a)||this.S&&this.S.Qj(a)||!1};
f.Pf=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.S&&this.S.xa()){var b=this.S.Ig(a);return 27==a.keyCode?(this.Tb(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.Tb(!0,a),!0):!1};f.NH=function(){this.Tb(!1)};f.OH=function(){this.Kg()||this.Tb(!1)};f.ik=function(a){this.Pq||this.Tb(!1);$o.d.ik.call(this,a)};f.eu=function(){this.S||Zo(this,new No(this.M(),this.EI));return this.S||null};
function Zo(a,b){var c=a.S;b!=c&&(c&&(a.Tb(!1),a.fa&&bp(a,c,!1),delete a.S),a.fa&&Vk(a.o,"haspopup",!!b),b&&(a.S=b,b.Bo(a),b.aa(!1),c=a.Pq,(b.et=c)&&b.dj(!0),a.fa&&bp(a,b,!0)))}f.Kj=function(a){this.eu().Ym(a,!0)};f.aa=function(a,b){var c=$o.d.aa.call(this,a,b);c&&!this.xa()&&this.Tb(!1);return c};f.lc=function(a){$o.d.lc.call(this,a);this.isEnabled()||this.Tb(!1)};f.Zv=function(){this.Tb(!0)};f.Gn=function(){this.Tb(!1)};
f.Tb=function(a,b){$o.d.Tb.call(this,a);if(this.S&&!!(this.R&64)==a){if(a){if(!this.S.fa)if(this.xK){var c=ai(this.a());c?this.S.Qg(c.parentNode,c):this.S.n(this.a().parentNode)}else this.S.n();this.KC=Ei(this.a());this.Ey=Qi(this.a());cp(this);this.S.Tg(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.S.Kh=!1;if(c=this.a())Vk(c,"activedescendant",""),Vk(c,"owns","");null!=this.wr&&(this.wr=void 0,(c=this.S.a())&&Li(c,"",""))}this.S.aa(a,!1,b);if(!this.Xj){var c=this.bb(),d=a?c.B:
c.mb;d.call(c,pi(this.M()),"mousedown",this.IH,!0);this.Pq&&d.call(c,this.S,"blur",this.OH);d.call(c,this.ma,Vf,this.QJ);a?this.ma.start():this.ma.stop()}}};function cp(a){if(a.S.fa){var b=a.dr;a.dr.element=a.pK||a.a();var c=a.S.a();a.S.xa()||(c.style.visibility="hidden",Si(c,!0));!a.wr&&a.dr.wG&&a.dr.Yq&32&&(a.wr=Oi(c));b.je(c,b.jn^1,a.DI,a.wr);a.S.xa()||(Si(c,!1),c.style.visibility="visible")}}
f.QJ=function(){var a=Qi(this.a()),b=Ei(this.a()),c=this.Ey;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.KC,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Ey=a,this.KC=b,cp(this))};function bp(a,b,c){var d=a.bb();c=c?d.B:d.mb;c.call(d,b,"action",a.NH);c.call(d,b,"highlight",a.nu);c.call(d,b,"unhighlight",a.ou)}function ap(a,b){var c=a.bb();(b?c.B:c.mb).call(c,a.a(),"keydown",a.LH)}
f.nu=function(a){var b=this.a();if(a=a.target.a()){var c=Wk(a,"activedescendant");a=Gh(a).getElementById(c)||a;a.id||(c=ej.be(),a.id=":"+(c.WA++).toString(36));c="";a&&(c=a.id);Vk(b,"activedescendant",c);Vk(b,"owns",a.id)}};f.LH=function(a){Tn(this,32)&&this.hc()&&this.S&&this.S.xa()&&a.stopPropagation()};f.ou=function(){if(!Fo(this.S)){var a=this.a();Vk(a,"activedescendant","");Vk(a,"owns","")}};Jn("goog-menu-button",function(){return new $o(null)});function dp(){U.call(this);this.ee=P("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":dp.CSS.yD});Vh(this.a(),this.ee);this.mk=P("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":dp.CSS.hb});Vh(this.a(),this.mk);this.S=new No;this.Oc=new dk;this.zd=[];ep(this);this.Gn(void 0,0);this.S.n(this.ee);O(this.S.a(),dp.CSS.xD)}w(dp,U);v("nrg.ui.SlideInMenu",dp);dp.ID_PREFIX="nrg.ui.SlideInMenu";
dp.CSS_SUFFIX={hb:"icon",iM:"icon-hovered",xD:"menu",yD:"menuholder",zD:"menuitem",ex:"menuitem-highlight",AD:"menuitem-icon"};var fp={ps:null,bh:null,hb:null};function gp(a,b,c,d){d=ca(d)?d:200;return[new Yj(a,d),new Sj(a,b,c,d,rk)]}function hp(a,b,c,d){d=ca(d)?d:200;return[new Xj(a,d),new Sj(a,b,c,d,rk)]}f=dp.prototype;f.jc=null;f.jB=null;f.xl=null;f.$l=!1;f.Hn=[-100,-100];f.Mo=[0,0];f.Mu=!0;f.Nu=!1;f.LB=function(a,b){return this.Hn=[a,b]};f.bC=function(a,b){return this.Mo=[a,b]};f.qG=function(){return this.Hn};
f.cH=function(){return this.Mo};f.eu=function(){return this.S};f.FG=function(){return this.ee};f.GG=function(){return this.mk};f.RB=function(a){this.mk.src=a};f.NK=function(a,b){this.jc[a].hb.src=b};f.Gz=function(a){return ob(this.jc).indexOf(a)};f.iu=function(a){return ob(this.jc)[a]};f.bu=function(a){return this.jc[ob(this.jc)[a]]};f.KA=function(a){return this.Mu=a};f.BI=function(a){return this.Nu=a};f.aH=function(){return this.xl};
function ip(a){null!=a.Oc&&(a.Oc.stop(),D(a.zd,function(a){this.Oc.remove(a);a.g()}.bind(a)),Ib(a.zd))}function jp(a,b,c){ip(a);D(g(b)?b:[b],function(a){this.Oc.add(a);this.zd.push(a)}.bind(a));a.ee.style.visibility="visible";Rc(a.Oc,"end",function(){c&&c()}.bind(a));a.Oc.play()}f.Fl=null;f.dq=null;f.FB=function(a){this.dq=a;this.a().title=a};function kp(a){null!=a.Fl&&(ba.clearTimeout(a.Fl),a.Fl=null);a.Fl=Wf(function(){this.Fl=null;this.$l&&(!this.Tu&&this.$l?this.Gn():kp(this))}.bind(a),450)}
f.Tg=function(a){O(this.jc[this.iu(a)].bh,dp.CSS.ex);this.Mu&&(this.mk.src=this.jc[this.iu(a)].hb.src);this.Nu?this.a().title=this.bu(a).ps.getContent():null!=this.dq&&(this.a().title=this.dq)};f.dz=function(){C(this.jc,function(a){yh(a.bh,dp.CSS.ex)}.bind(this))};
f.Xx=function(a,b){null==this.jc&&(this.jc={});a=s(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;D(a,function(a,k){if(this.jc[a])throw Error(a+" is already in use!");c=new lo(a);this.S.Kj(c);d=c.Ia();O(d,dp.CSS.zD);d.title=a;e=P("img",{id:dp.ID_PREFIX+"_MenuItemIcon_"+B(),"class":dp.CSS.AD});e.src=k<=b.length-1?b[k]:null;Vh(d,e);this.jc[a]=vb(fp);this.jc[a].ps=c;this.jc[a].bh=d;this.jc[a].hb=e}.bind(this))};
f.Eo=function(a,b){var c=a;if(s(c)){if(!this.jc[c])throw Error(c+" does not exist!");c=this.Gz(c)}this.jB=this.xl?this.xl:a;this.xl=a;ca(b)&&!b||this.dz();this.Tg(c);this.dispatchEvent({type:"item_selected",index:c,title:this.bu(c).ps.getContent()})};f.Zv=function(a,b){jp(this,gp(this.ee,this.Hn,this.Mo,b),function(){this.$l=!0;null!=a&&a()}.bind(this))};f.Gn=function(a,b){jp(this,hp(this.ee,this.Mo,this.Hn,b),function(){this.$l=!1;this.ee.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function ep(a){F(a.a(),"click",function(){this.$l?this.Gn():this.Zv()}.bind(a));F(a.S,"action",function(a){this.Eo(a.target.getContent())}.bind(a));F(a.ee,"mouseover",function(){this.Tu=!0}.bind(a));F(a.ee,"mouseout",function(){this.Tu=!1;kp(this)}.bind(a))}
f.f=function(){dp.d.f.call(this);delete this.Tu;delete this.Fl;ip(this);Ib(this.zd);delete this.zd;C(this.jc,function(a,b){H(a);S(a);delete this.jc[b]}.bind(this));sb(this.jc);delete this.jc;S(this.ee);delete this.ee;S(this.mk);delete this.mk;H(this.S);this.S.g();this.eq(this.Oc);delete this.Oc;delete this.dq;delete this.jB;delete this.xl;delete this.$l;delete this.Hn;delete this.Mo;delete this.Mu;delete this.Nu};v("nrg.ui.SlideInMenu.ID_PREFIX",dp.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{nM:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",dp.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",fp);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",dp.prototype.LB);v("nrg.ui.SlideInMenu.prototype.setShowPosition",dp.prototype.bC);v("nrg.ui.SlideInMenu.prototype.getHidePosition",dp.prototype.qG);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",dp.prototype.cH);v("nrg.ui.SlideInMenu.prototype.getMenu",dp.prototype.eu);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",dp.prototype.FG);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",dp.prototype.GG);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",dp.prototype.RB);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",dp.prototype.NK);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",dp.prototype.Gz);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",dp.prototype.iu);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",dp.prototype.bu);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",dp.prototype.KA);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",dp.prototype.BI);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",dp.prototype.aH);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",dp.prototype.Tg);v("nrg.ui.SlideInMenu.prototype.deselectAll",dp.prototype.dz);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",dp.prototype.Xx);v("nrg.ui.SlideInMenu.prototype.setSelected",dp.prototype.Eo);v("nrg.ui.SlideInMenu.prototype.showMenu",dp.prototype.Zv);v("nrg.ui.SlideInMenu.prototype.hideMenu",dp.prototype.Gn);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",dp.prototype.FB);v("nrg.ui.SlideInMenu.prototype.disposeInternal",dp.prototype.f);function lp(){U.call(this)}w(lp,U);v("xiv.ui.layouts.interactors.InputController",lp);lp.ID_PREFIX="xiv.ui.layouts.interactors.InputController";lp.CSS_SUFFIX={oD:"inputbox",lM:"inputbox-hovered",Pw:"display"};f=lp.prototype;f.af=null;f.Ja=null;f.cI=!1;f.K=function(){if(null!=this.Ja)return this.Ja.value};f.J=function(a){null!=this.Ja&&(this.Ja.value=a,this.$g())};f.ld=function(a){null!=this.Ja&&(this.Ja.max=a,this.$g())};f.Gd=function(a){null!=this.Ja&&(this.Ja.min=a,this.$g())};f.$g=function(){};
f.aB=function(a){this.Ja.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.Ja.value});this.$g()};
f.n=function(a){lp.d.n.call(this,a);this.af=P("div");this.a().appendChild(this.af);O(this.af,lp.CSS.Pw);this.Ja=P("input");this.Ja.type="number";this.Ja.step=1;this.Ja.min=0;this.Ja.value=0;this.a().appendChild(this.Ja);O(this.Ja,lp.CSS.oD);F(this.Ja,"mouseenter",function(a){a.stopPropagation();this.Ja.style.opacity=1;this.af.style.opacity=0}.bind(this));F(this.Ja,"mouseleave",function(a){a.stopPropagation();this.Ja.style.opacity=0;this.af.style.opacity=1}.bind(this));F(this.Ja,"input",this.aB.bind(this));
this.$g()};f.f=function(){lp.d.f.call(this);delete this.cI;this.Ja&&(H(this.Ja),S(this.Ja),delete this.Ja);this.af&&(H(this.af),S(this.af),delete this.af)};v("xiv.ui.layouts.interactors.InputController.EventType",{kM:"input",Pw:"display"});v("xiv.ui.layouts.interactors.InputController.ID_PREFIX",lp.ID_PREFIX);v("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",lp.CSS_SUFFIX);v("xiv.ui.layouts.interactors.InputController.prototype.displayElt",lp.prototype.af);
v("xiv.ui.layouts.interactors.InputController.prototype.inputBox",lp.prototype.Ja);v("xiv.ui.layouts.interactors.InputController.prototype.getValue",lp.prototype.K);v("xiv.ui.layouts.interactors.InputController.prototype.setValue",lp.prototype.J);v("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",lp.prototype.ld);v("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",lp.prototype.Gd);v("xiv.ui.layouts.interactors.InputController.prototype.updateValue",lp.prototype.$g);
v("xiv.ui.layouts.interactors.InputController.prototype.onInput",lp.prototype.aB);v("xiv.ui.layouts.interactors.InputController.prototype.render",lp.prototype.n);v("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",lp.prototype.f);function mp(){U.call(this)}w(mp,lp);v("xiv.ui.layouts.interactors.FrameDisplay",mp);mp.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";mp.prototype.$g=function(){this.af.innerHTML=this.Ja.value+" / "+this.Ja.max};v("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",mp.ID_PREFIX);v("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",mp.prototype.$g);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function np(a,b,c){this.Te=this.Se=this.Re=0;3==arguments.length?(this.Re=Number(a),this.Se=Number(b),this.Te=Number(c)):a instanceof np?(this.Re=Number(a.x()),this.Se=Number(a.y()),this.Te=Number(a.z())):(this.Re=Number(a[0]),this.Se=Number(a[1]),this.Te=Number(a[2]))}
np.prototype={clone:function(){return new np(this.Re,this.Se,this.Te)},Ei:function(a){return this.Re*a.x()+this.Se*a.y()+this.Te*a.z()},$q:function(a,b){return op(this,pp(qp(a,this),b))},length:function(){return Math.sqrt(this.Ei(this))},Vj:function(a){return new np(this.Se*a.z()-this.Te*a.y(),this.Te*a.x()-this.Re*a.z(),this.Re*a.y()-this.Se*a.x())},x:function(){return this.Re},y:function(){return this.Se},z:function(){return this.Te}};
function rp(a){var b=a.length();return new np(a.Re/b,a.Se/b,a.Te/b)}function pp(a,b){return new np(a.Re*b,a.Se*b,a.Te*b)}function qp(a,b){return new np(a.Re-b.x(),a.Se-b.y(),a.Te-b.z())}function op(a,b){return new np(a.Re+b.x(),a.Se+b.y(),a.Te+b.z())}function sp(a){return new np(-a.Re,-a.Se,-a.Te)};function tp(a,b){this.Gv=new np(a);this.Xc=new np(b)}tp.prototype={clone:function(){return new tp(this.Gv.clone(),this.Xc.clone())},dk:function(){this.Xc=sp(this.Xc)},Me:function(){return this.Gv}};function up(a,b){this.Xc=a;this.ep=b}up.prototype={clone:function(){return new up(this.Xc.clone(),this.ep)},dk:function(){this.Xc=sp(this.Xc);this.ep=-this.ep}};function vp(a,b){this.Zh=a;this.Wr=b;var c=a[0].Me(),d=a[1].Me(),e=a[2].Me(),d=rp(qp(d,c).Vj(qp(e,c)));this.Le=new up(d,d.Ei(c))}vp.prototype={clone:function(){var a=this.Zh.map(function(a){return a.clone()});return new vp(a,this.Wr)},dk:function(){this.Zh.reverse().map(function(a){a.dk()});this.Le.dk()}};
function wp(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.Zh.length;n++){var m=b.Xc.Ei(a.Zh[n].Me())-b.ep,m=-1E-5>m?2:1E-5<m?1:0,k=k|m;l.push(m)}switch(k){case 0:(0<b.Xc.Ei(a.Le.Xc)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.Zh.length;n++){var q=(n+1)%a.Zh.length,m=l[n],p=l[q],k=a.Zh[n],q=a.Zh[q];2!=m&&c.push(k);1!=m&&d.push(2!=m?k.clone():k);3==(m|p)&&(m=(b.ep-b.Xc.Ei(k.Me()))/b.Xc.Ei(qp(q.Me(),k.Me())),m=new tp(k.Gv.$q(q.Me(),m),k.Xc.$q(q.Xc,m)),c.push(m),
d.push(m.clone()))}3<=c.length&&e.push(new vp(c,a.Wr));3<=d.length&&h.push(new vp(d,a.Wr))}};function xp(a){this.ed=this.gd=this.Le=null;this.Db=[];a&&yp(this,a)}xp.prototype={clone:function(){var a=new xp;zp(a,this.Le&&this.Le.clone());Ap(a,this.gd&&this.gd.clone());Bp(a,this.ed&&this.ed.clone());a.Tr(this.Db.map(function(a){return a.clone()}));return a},xb:function(){for(var a=0;a<this.Db.length;a++)this.Db[a].dk();this.Le.dk();this.gd&&this.gd.xb();this.ed&&this.ed.xb();a=this.gd;this.gd=this.ed;this.ed=a},Tr:function(a){this.Db=a}};function Bp(a,b){a.ed=b}function Ap(a,b){a.gd=b}
function zp(a,b){a.Le=b}function yp(a,b){if(b.length){a.Le||(a.Le=b[0].Le.clone());for(var c=[],d=[],e=0;e<b.length;e++)wp(b[e],a.Le,a.Db,a.Db,c,d);c.length&&(a.gd||(a.gd=new xp),yp(a.gd,c));d.length&&(a.ed||(a.ed=new xp),yp(a.ed,d))}}function Cp(a){var b=a.Db.slice();a.gd&&(b=b.concat(Cp(a.gd)));a.ed&&(b=b.concat(Cp(a.ed)));return b}function Dp(a,b){a.Db=Ep(b,a.Db);a.gd&&Dp(a.gd,b);a.ed&&Dp(a.ed,b)}
function Ep(a,b){if(!a.Le)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)wp(b[e],a.Le,c,d,c,d);a.gd&&(c=Ep(a.gd,c));d=a.ed?Ep(a.ed,d):[];return c.concat(d)};function Fp(){this.Db=[]}function Gp(a){var b=new Fp;b.Tr(a);return b}
Fp.prototype={clone:function(){var a=new Fp;a.Tr(this.Db.map(function(a){return a.clone()}));return a},Aw:function(a){var b=new xp(this.clone().Db);a=new xp(a.clone().Db);Dp(b,a);Dp(a,b);a.xb();Dp(a,b);a.xb();yp(b,Cp(a));return Gp(Cp(b))},uc:function(a){var b=new xp(this.clone().Db);a=new xp(a.clone().Db);b.xb();Dp(b,a);Dp(a,b);a.xb();Dp(a,b);a.xb();yp(b,Cp(a));b.xb();return Gp(Cp(b))},vu:function(a){var b=new xp(this.clone().Db);a=new xp(a.clone().Db);b.xb();Dp(a,b);a.xb();Dp(b,a);Dp(a,b);yp(b,Cp(a));
b.xb();return Gp(Cp(b))},inverse:function(){var a=this.clone();a.Db.map(function(a){a.dk()});return a},Tr:function(a){this.Db=a}};function Hp(){}function Ip(a){for(var b=a.C.count,c=[],d=0,d=0;d<b;d+=3){var e=a.C.get(d),h=a.C.get(d+1),k=a.C.get(d+2),l=a.ca.get(d),n=a.ca.get(d+1),m=a.ca.get(d+2),q=a.Fa;a.zc&&0<a.zc.length&&(q=a.zc.get(d));var p=[];p.push(new tp(e,l));p.push(new tp(h,n));p.push(new tp(k,m));c.push(new vp(p,q))}return Gp(c)}
function Jp(a,b){if(!(null!=b&&b instanceof Fp))throw Error("Invalid CSG object.");var c=new bd,d=[];Cb(b.Db,function(a){var b=[],k=a.Wr,b=Cb(a.Zh,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.xE=Cb(c.unique(),function(a){return[a.Me().x(),a.Me().y(),a.Me().z()]});a.wE=Cb(c.unique(),function(a){return[a.Xc.x(),a.Xc.y(),a.Xc.z()]});a.vE=Cb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.C=new ad(9*d.length);
a.ca=new ad(9*d.length);a.zc=new ad(9*d.length);Cb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.xE,n=this.wE,m=this.vE;this.C.add(d[b][0],d[b][1],d[b][2]);this.C.add(d[c][0],d[c][1],d[c][2]);this.C.add(d[a][0],d[a][1],d[a][2]);this.ca.add(n[b][0],n[b][1],n[b][2]);this.ca.add(n[c][0],n[c][1],n[c][2]);this.ca.add(n[a][0],n[a][1],n[a][2]);m[b]&&this.zc.add(m[b][0],m[b][1],m[b][2]);m[c]&&this.zc.add(m[c][0],m[c][1],m[c][2]);m[a]&&this.zc.add(m[a][0],m[a][1],m[a][2])}.bind(a));0==a.zc.La&&(a.zc=null);
a.yd=Qd}Hp.prototype.Aw=function(a){if(null==a||!(a instanceof Fp||a instanceof Td))throw Error("Invalid object.");var b=a;a instanceof Td&&(b=Ip(b));a=new Td;za(a,new Hp);Jp(a,Ip(this).Aw(b));return a};Hp.prototype.uc=function(a){if(null==a||!(a instanceof Fp||a instanceof Td))throw Error("Invalid object.");var b=a;a instanceof Td&&(b=Ip(b));a=new Td;za(a,new Hp);Jp(a,Ip(this).uc(b));return a};
Hp.prototype.vu=function(a){if(null==a||!(a instanceof Fp||a instanceof Td))throw Error("Invalid object.");var b=a;a instanceof Td&&(b=Ip(b));a=new Td;za(a,new Hp);Jp(a,Ip(this).vu(b));return a};Hp.prototype.inverse=function(){var a=new Td;za(a,new Hp);Jp(a,Ip(this).inverse());return a};v("X.constructable",Hp);v("X.constructable.prototype.intersect",Hp.prototype.vu);v("X.constructable.prototype.inverse",Hp.prototype.inverse);v("X.constructable.prototype.subtract",Hp.prototype.uc);
v("X.constructable.prototype.union",Hp.prototype.Aw);function Kp(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new np(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new tp(op(c,pp(e,d)),e))}this.Db=[];a=a||{};var c=new np(a.Ce||[0,0,0]),d=a.Og||1,e=a.za||16;a=a.cL||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new vp(k));return Gp(h)}w(Kp,Fp);function Lp(){Td.call(this);this.s="sphere";this.Qa=[0,0,0];this.Dj=5;this.Nc=32;this.CE=16;za(this,new Hp)}w(Lp,Td);Lp.prototype.__defineGetter__("center",function(){return this.Qa});Lp.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Qa=a});Lp.prototype.__defineGetter__("radius",function(){return this.Dj});Lp.prototype.__defineSetter__("radius",function(a){if(!t(a))throw Error("Invalid radius.");this.Dj=a});
Lp.prototype.da=function(){Jp(this,new Kp({Ce:this.Qa,Og:this.Dj,za:this.Nc,cL:this.CE}));Lp.d.da.call(this)};v("X.sphere",Lp);v("X.sphere.prototype.modified",Lp.prototype.da);function Mp(a,b){Yc.call(this);this.o=a;var c=bi(this.o)?this.o:this.o?this.o.body:null;this.oI=!!c&&Gi(c);this.CA=F(this.o,fc?"DOMMouseScroll":"mousewheel",this,b)}w(Mp,Yc);
Mp.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Dc;if("mousewheel"==a.type){c=1;if(E||gc&&(bc||nc("532.0")))c=40;d=Np(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=Np(-a.wheelDeltaX,c),c=Np(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;t(this.LA)&&(b=fd(b,-this.LA,this.LA));t(this.MA)&&(c=fd(c,-this.MA,this.MA));this.oI&&(b=-b);b=new Op(d,a,b,c);this.dispatchEvent(b)};function Np(a,b){return gc&&(ac||cc)&&0!=a%b?a:a/b}
Mp.prototype.f=function(){Mp.d.f.call(this);Tc(this.CA);this.CA=null};function Op(a,b,c,d){Fc.call(this,b);this.type="mousewheel";this.detail=a;this.wh=c;this.Bd=d}w(Op,Fc);function Pp(){Yc.call(this)}w(Pp,Yc);f=Pp.prototype;f.ig=0;f.Xf=0;f.kf=100;f.Ee=0;f.Vh=1;f.fe=!1;f.tk=!1;f.J=function(a){a=Qp(this,a);this.ig!=a&&(this.ig=a+this.Ee>this.kf?this.kf-this.Ee:a<this.Xf?this.Xf:a,this.fe||this.tk||this.dispatchEvent("change"))};f.K=function(){return Qp(this,this.ig)};f.cj=function(a){a=Qp(this,a);this.Ee!=a&&(this.Ee=0>a?0:this.ig+a>this.kf?this.kf-this.ig:a,this.fe||this.tk||this.dispatchEvent("change"))};
f.cf=function(){var a=this.Ee;return null==this.Vh?a:Math.round(a/this.Vh)*this.Vh};f.Gd=function(a){if(this.Xf!=a){var b=this.fe;this.fe=!0;this.Xf=a;a+this.Ee>this.kf&&(this.Ee=this.kf-this.Xf);a>this.ig&&this.J(a);a>this.kf&&(this.Ee=0,this.ld(a),this.J(a));(this.fe=b)||this.tk||this.dispatchEvent("change")}};f.qa=function(){return Qp(this,this.Xf)};
f.ld=function(a){a=Qp(this,a);if(this.kf!=a){var b=this.fe;this.fe=!0;this.kf=a;a<this.ig+this.Ee&&this.J(a-this.Ee);a<this.Xf&&(this.Ee=0,this.Gd(a),this.J(this.kf));a<this.Xf+this.Ee&&(this.Ee=this.kf-this.Xf);(this.fe=b)||this.tk||this.dispatchEvent("change")}};f.ia=function(){return Qp(this,this.kf)};f.Ch=function(){return this.Vh};f.Ug=function(a){this.Vh!=a&&(this.Vh=a,a=this.fe,this.fe=!0,this.ld(this.ia()),this.cj(this.cf()),this.J(this.K()),(this.fe=a)||this.tk||this.dispatchEvent("change"))};
function Qp(a,b){return null==a.Vh?b:a.Xf+Math.round((b-a.Xf)/a.Vh)*a.Vh};function Rp(a,b){fj.call(this,a);this.ry=null;this.Ka=new Pp;this.qI=b||ed;F(this.Ka,"change",this.gA,!1,this)}w(Rp,fj);f=Rp.prototype;f.Ea="horizontal";f.On=!1;f.LI=!1;f.vg=10;f.er=0;f.vA=!0;f.hr=0;f.FD=1E3;f.Cc=!0;f.Fe=!1;f.v=function(){Rp.d.v.call(this);var a=this.M().v("div",this.U(this.Ea));this.Xd(a)};f.Xd=function(a){Rp.d.Xd.call(this,a);Zk(a,this.U(this.Ea));this.Xy();Uk(this.a(),"slider");Sp(this)};
f.ab=function(){Rp.d.ab.call(this);this.re=new cm(this.na);this.Nf=new cm(this.sc);this.re.Hi(this.Fe);this.Nf.Hi(this.Fe);this.re.Ht=this.Nf.Ht=ea;this.kb=new Vn(this.a());Tp(this,!0);this.a().tabIndex=0;this.Zg()};
function Tp(a,b){b?(a.bb().B(a.re,"beforedrag",a.yq).B(a.Nf,"beforedrag",a.yq).B(a.re,["start","end"],a.Dq).B(a.Nf,["start","end"],a.Dq).B(a.kb,"key",a.zq).B(a.a(),"click",a.Aq).B(a.a(),"mousedown",a.Aq),a.vA&&Up(a,!0)):(a.bb().mb(a.re,"beforedrag",a.yq).mb(a.Nf,"beforedrag",a.yq).mb(a.re,["start","end"],a.Dq).mb(a.Nf,["start","end"],a.Dq).mb(a.kb,"key",a.zq).mb(a.a(),"click",a.Aq).mb(a.a(),"mousedown",a.Aq),a.vA&&Up(a,!1))}f.rc=function(){Rp.d.rc.call(this);Bc(this.re,this.Nf,this.kb,this.sk)};
f.yq=function(a){var b=a.Ot==this.re?this.na:this.sc,c;"vertical"==this.Ea?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.ia()-this.qa())+this.qa()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.ia()-this.qa())+this.qa();c=a.Ot==this.re?Math.min(Math.max(c,this.qa()),this.K()+this.cf()):Math.min(Math.max(c,this.K()),this.ia());Vp(this,b,c)};
f.Dq=function(a){var b="start"==a.type;cl(this.a(),"goog-slider-dragging",b);cl(a.target.handle,"goog-slider-thumb-dragging",b);a=a.Ot==this.re;b?(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j")):(this.dispatchEvent("m"),this.dispatchEvent(a?"i":"k"))};
f.zq=function(a){var b=!0;switch(a.keyCode){case 36:Wp(this,this.qa());break;case 35:Wp(this,this.ia());break;case 33:Xp(this,this.vg);break;case 34:Xp(this,-this.vg);break;case 37:var c=this.Fe&&this.He()?1:-1;Xp(this,a.shiftKey?c*this.vg:c*this.ap);break;case 40:Xp(this,a.shiftKey?-this.vg:-this.ap);break;case 39:c=this.Fe&&this.He()?-1:1;Xp(this,a.shiftKey?c*this.vg:c*this.ap);break;case 38:Xp(this,a.shiftKey?this.vg:this.ap);break;default:b=!1}b&&a.preventDefault()};
f.Aq=function(a){this.a().focus&&this.a().focus();var b=a.target;ci(this.na,b)||ci(this.sc,b)||(b="click"==a.type,b&&ya()<this.hr+this.FD||(b||(this.hr=ya()),this.LI?Wp(this,Yp(this,a)):(this.nw(a),this.rf=Zp(this,Yp(this,a)),this.qA="vertical"==this.Ea?this.Xq<this.rf.offsetTop:this.Xq>$p(this,this.rf)+this.rf.offsetWidth,a=Gh(this.a()),this.bb().B(a,"mouseup",this.lw,!0).B(this.a(),"mousemove",this.nw),this.Vi||(this.Vi=new Uf(200),this.bb().B(this.Vi,Vf,this.hA)),this.hA(),this.Vi.start())))};
f.fA=function(a){Xp(this,(0<a.detail?-1:1)*this.ap);a.preventDefault()};f.hA=function(){var a;if("vertical"==this.Ea){var b=this.Xq,c=this.rf.offsetTop;this.qA?b<c&&(a=aq(this,this.rf)+this.vg):b>c+this.rf.offsetHeight&&(a=aq(this,this.rf)-this.vg)}else b=this.Xq,c=$p(this,this.rf),this.qA?b>c+this.rf.offsetWidth&&(a=aq(this,this.rf)+this.vg):b<c&&(a=aq(this,this.rf)-this.vg);ca(a)&&Vp(this,this.rf,a)};
f.lw=function(){this.Vi&&this.Vi.stop();var a=Gh(this.a());this.bb().mb(a,"mouseup",this.lw,!0).mb(this.a(),"mousemove",this.nw)};function bq(a,b){var c=Hi(b,a.a());return"vertical"==a.Ea?c.y:a.Fe&&a.He()?a.a().clientWidth-c.x:c.x}f.nw=function(a){this.Xq=bq(this,a)};function Yp(a,b){var c=a.qa(),d=a.ia();if("vertical"==a.Ea){var e=a.na.offsetHeight,h=a.a().clientHeight-e,e=bq(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.na.offsetWidth;h=a.a().clientWidth-e;e=bq(a,b)-e/2;return(d-c)*e/h+c}
function aq(a,b){if(b==a.na)return a.Ka.K();if(b==a.sc)return a.Ka.K()+a.Ka.cf();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.Tf=function(){return this.re.Tf()||this.Nf.Tf()};function Xp(a,b){Math.abs(b)<a.Ch()&&(b=(0==b?0:0>b?-1:1)*a.Ch());var c=aq(a,a.na)+b,d=aq(a,a.sc)+b,c=fd(c,a.qa(),a.ia()-a.er),d=fd(d,a.qa()+a.er,a.ia());cq(a,c,d-c)}function Vp(a,b,c){var d=Qp(a.Ka,c);c=b==a.na?d:a.Ka.K();b=b==a.sc?d:a.Ka.K()+a.Ka.cf();c>=a.qa()&&b>=c+a.er&&a.ia()>=b&&cq(a,c,b-c)}
function cq(a,b,c){a.qa()<=b&&b<=a.ia()-c&&a.er<=c&&c<=a.ia()-b&&(b!=a.K()||c!=a.cf())&&(a.Ka.tk=!0,a.Ka.cj(0),a.Ka.J(b),a.Ka.cj(c),a.Ka.tk=!1,a.gA())}f.qa=function(){return this.Ka.qa()};f.Gd=function(a){this.Ka.Gd(a)};f.ia=function(){return this.Ka.ia()};f.ld=function(a){this.Ka.ld(a)};function Zp(a,b){return b<=a.Ka.K()+a.Ka.cf()/2?a.na:a.sc}f.gA=function(){this.Zg();Sp(this);this.dispatchEvent("change")};
f.Zg=function(){if(this.na&&!this.On){var a=dq(this,aq(this,this.na)),b=dq(this,aq(this,this.sc));if("vertical"==this.Ea)this.na.style.top=a.y+"px",this.sc.style.top=b.y+"px",this.Lb&&(a=eq(b.y,a.y,this.na.offsetHeight),this.Lb.style.top=a.offset+"px",this.Lb.style.height=a.size+"px");else{var c=this.Fe&&this.He()?"right":"left";this.na.style[c]=a.x+"px";this.sc.style[c]=b.x+"px";this.Lb&&(a=eq(a.x,b.x,this.na.offsetWidth),this.Lb.style[c]=a.offset+"px",this.Lb.style.width=a.size+"px")}}};
function eq(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function dq(a,b){var c=new N;if(a.na){var d=a.qa(),e=a.ia(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Ea?(d=a.a().clientHeight-a.na.offsetHeight,e=Math.round(e*d),c.x=$p(a,a.na),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.na.offsetWidth)),c.x=d,c.y=a.na.offsetTop)}return c}
function Wp(a,b){b=fd(b,a.qa(),a.ia());a.On&&a.cq.stop(!0);var c=new dk,d,e=Zp(a,b),h=a.K(),k=a.cf(),l=aq(a,e),n=dq(a,l);d=a.Ch();Math.abs(b-l)<d&&(b=fd(l+(b>l?d:-d),a.qa(),a.ia()));Vp(a,e,b);l=dq(a,aq(a,e));d="vertical"==a.Ea?[$p(a,e),l.y]:[l.x,e.offsetTop];n=new Sj(e,[n.x,n.y],d,100);n.Hi(a.Fe);c.add(n);a.Lb&&fq(a,e,h,k,l,c);a.ry&&(e=a.ry.pO(h,b,100),D(e,function(a){c.add(a)}));a.cq=c;a.bb().B(c,"end",a.FF);a.On=!0;c.play(!1)}f.Dd=function(){return this.On};
function fq(a,b,c,d,e,h){var k=dq(a,c),l=dq(a,c+d);c=k;d=l;b==a.na?c=e:d=e;"vertical"==a.Ea?(b=eq(l.y,k.y,a.na.offsetHeight),k=eq(d.y,c.y,a.na.offsetHeight),e=new Sj(a.Lb,[$p(a,a.Lb),b.offset],[$p(a,a.Lb),k.offset],100),b=new Vj(a.Lb,b.size,k.size,100)):(b=eq(k.x,l.x,a.na.offsetWidth),k=eq(c.x,d.x,a.na.offsetWidth),e=new Sj(a.Lb,[b.offset,a.Lb.offsetTop],[k.offset,a.Lb.offsetTop],100),b=new Uj(a.Lb,b.size,k.size,100));e.Hi(a.Fe);b.Hi(a.Fe);h.add(e);h.add(b)}f.FF=function(){this.On=!1};
f.Th=function(a){if(this.Ea!=a){var b=this.U(this.Ea),c=this.U(a);this.Ea=a;this.a()&&(a=this.a(),Yk(a,b)&&(al(a,b),Zk(a,c)),b=this.Fe&&this.He()?"right":"left",this.na.style[b]=this.na.style.top="",this.sc.style[b]=this.sc.style.top="",this.Lb&&(this.Lb.style[b]=this.Lb.style.top="",this.Lb.style.width=this.Lb.style.height=""),this.Zg())}};f.Ib=function(){return this.Ea};
f.f=function(){Rp.d.f.call(this);this.Vi&&this.Vi.g();delete this.Vi;this.cq&&this.cq.g();delete this.cq;delete this.na;delete this.sc;this.Lb&&delete this.Lb;this.Ka.g();delete this.Ka;this.kb&&(this.kb.g(),delete this.kb);this.sk&&(this.sk.g(),delete this.sk);this.re&&(this.re.g(),delete this.re);this.Nf&&(this.Nf.g(),delete this.Nf)};f.ap=1;f.Ch=function(){return this.Ka.Ch()};f.Ug=function(a){this.Ka.Ug(a)};f.K=function(){return this.Ka.K()};f.J=function(a){Vp(this,this.na,a)};f.cf=function(){return this.Ka.cf()};
f.cj=function(a){Vp(this,this.sc,this.Ka.K()+a)};f.aa=function(a){Si(this.a(),a);a&&this.Zg()};function Sp(a){var b=a.a();b&&(Vk(b,"valuemin",a.qa()),Vk(b,"valuemax",a.ia()),Vk(b,"valuenow",a.K()),Vk(b,"valuetext",a.qI(a.K())||""))}function Up(a,b){b?(a.sk||(a.sk=new Mp(a.a())),a.bb().B(a.sk,"mousewheel",a.fA)):a.bb().mb(a.sk,"mousewheel",a.fA)}f.lc=function(a){this.Cc!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Cc=a,Tp(this,a),a||this.lw(),cl(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Cc};function $p(a,b){return a.Fe?Qj(b):b.offsetLeft};function gq(a){Rp.call(this,a);this.Ka.J(this.qa());this.Ka.cj(this.ia()-this.qa())}w(gq,Rp);gq.prototype.U=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};gq.prototype.Tj=function(a){a=this.M().v("div",a);Uk(a,"button");return a};
gq.prototype.Xy=function(){var a=Ih(null,"goog-twothumbslider-value-thumb",this.a())[0],b=Ih(null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Ih(null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.Tj("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.Tj("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.M().v("div","goog-twothumbslider-rangehighlight"),this.M().uu(c,a));this.na=a;this.sc=b;this.Lb=c};function hq(){Td.call(this);this.s="fibers";za(this,new dd)}w(hq,Td);v("X.fibers",hq);function iq(){this.Ek=P("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.wc});ol.call(this,"",this.Ek,!0);O(this.Bb,iq.CSS.SD);this.Bb.style.marginTop="0px"}w(iq,ol);v("nrg.ui.ZippyTree",iq);var sn="o",jq={TL:"n",GD:sn};iq.ID_PREFIX="nrg.ui.ZippyTree";iq.CSS_SUFFIX={SD:"rootnode"};f=iq.prototype;f.qk=1;f.Ji=!1;f.lI=!0;f.Lq=1;f.Qt=0;f.Jr=null;f.uf=null;f.Qv=function(a){this.bz=a};f.Qn=function(){return 0===Yh(this.zi).length};f.Py=function(){this.Zo(function(a){a.Zb.Sb(!1)},this)};
f.gn=function(){this.Py()};f.RF=function(){var a=[];this.Zo(function(b){a.push(b)},this);return a};f.ku=function(){var a=[];C(this.Jc,function(b){a.push(b)});return a};f.Dl=function(){this.Zo(function(a){a.Zb.Sb(!0)},this)};f.Zo=function(a,b){C(b.Jc,function(b){a(b);this.Zo(a,b)}.bind(this))};f.a=function(){return this.Ek};f.Sb=function(a,b){return kq(this,a,b,!0)};
function kq(a,b,c,d){c=null!=c?c:a;if(null!=c.Jc[b]){var e=c.Jc[b],h=e.Zb;null!=h.Ye?Rc(h,d?"a":"b",function(){h.Eg!=d&&e.Sb(d)}):e.Sb(d);return e}}f.xo=function(a,b){return kq(this,a,b,!1)};f.rq=function(a){var b=this,c=[];D(a,function(a){c.push(b.Jc[a]);b=b.Jc[a]}.bind(this));return c};f.Xe=function(a,b){!g(a)||bi(a)?lq(this,a,b):D(a,function(a){this.Xe(a,b)}.bind(this))};function lq(a,b,c){c?(c&&(c=s(c)?[c]:c,c.length>a.qk&&(a.qk=c.length)),a.kn(c,a,b)):Vh(a.Ek,b)}
f.kn=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.zi;if(0==a.length)mq(this,e,c),null!=c&&nq(this,c,d-2);else{0<a.length&&a.length>this.qk&&(this.qk=a.length);if(b.Jc[a[0]])e=b.Jc[a[0]];else{var h=a[0];e.style.opacity=this.Lq;var k=new ol(h,e,!1);b.Bb.parentNode==this.Ek&&2==this.Ek.childNodes.length&&(k.Bb.style.marginTop="5px");k.Bb.style.left="inherit";k.Bb.style.width="inherit";oq(this,k);b.Jc[h]=k;k.Bb.style.opacity=this.Lq;e.style.opacity=1;this.Ji&&pq(this,k.Bb);this.dispatchEvent({type:sn,
ie:k});e=k}nq(this,e.Bb,d-1);this.kn(1<a.length?a.slice(1):[],e,c,d+1)}};function nq(a,b,c){null!=b&&b._maxDepth!=a.qk&&(null==b._maxDepth&&(b._maxDepth=a.qk),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}function oq(a,b){F(b,"a",function(){this.dispatchEvent({type:"a",ie:b})}.bind(a));F(b,"c",function(){this.dispatchEvent({type:"c",ie:b})}.bind(a));F(b,"b",function(){this.dispatchEvent({type:"b",ie:b})}.bind(a))}
function pq(a,b){(new Yj(b,a.Qt)).play()}f.nK=function(){this.Ji&&!this.uf.gf()&&this.uf.play()};f.rL=function(a){this.Lq=(this.Ji=!0===a)?0:1;this.Qt=this.Ji?300:0;this.Ji&&(qq(this),this.Jr=[],this.uf=new dk,F(this.uf,"end",this.Ny.bind(this)))};function mq(a,b,c){null!=c&&(ok(c,{position:"relative"}),c.style.opacity=0,tk(c,400),null!=a.bz?a.bz(b,c):b.appendChild(c),rq(b),a.Ji?pq(a,c,function(){this.dispatchEvent({type:"n"})}.bind(a)):a.dispatchEvent({type:"n"}))}
function rq(a){var b=[],c=[],d=Yh(a),e=d.length;D(d,function(a){Yk(a,ol.CSS.hp)?b.push(a):1==a.childNodes.length&&Yk(a.childNodes[0],ol.CSS.bh)&&c.push(a)});D(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}f.Ny=function(){for(this.uf.g();this.Jr.length;)this.uf.add(this.Jr[0]),zb.splice.call(this.Jr,0,1);F(this.uf,"end",this.Ny.bind(this));this.uf.play()};
function qq(a){null!=a.DB&&(a.Lt(a.DB),delete a.DB);null!=a.uf&&(a.eq(a.uf),delete a.uf)}f.f=function(){iq.d.f.call(this);S(this.Ek);delete this.Ek;qq(this);delete this.qk;delete this.Ji;delete this.lI;delete this.Lq;delete this.Qt};v("nrg.ui.ZippyTree.EventType",jq);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",iq.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",iq.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");
v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Yh(a),d=b[pl].toLowerCase(),e,h,k=c.length,l=0;l<k;l++){if(h=c[l],null!=h[pl]&&(e=h[pl].toLowerCase(),e=Ka(d,e),0>e)){Xh(b,h);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",iq.prototype.Qv);v("nrg.ui.ZippyTree.prototype.isEmpty",iq.prototype.Qn);
v("nrg.ui.ZippyTree.prototype.contractAll",iq.prototype.Py);v("nrg.ui.ZippyTree.prototype.collapseAll",iq.prototype.gn);v("nrg.ui.ZippyTree.prototype.getAllNodes",iq.prototype.RF);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",iq.prototype.ku);v("nrg.ui.ZippyTree.prototype.expandAll",iq.prototype.Dl);v("nrg.ui.ZippyTree.prototype.traverse",iq.prototype.Zo);v("nrg.ui.ZippyTree.prototype.getElement",iq.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",iq.prototype.Sb);
v("nrg.ui.ZippyTree.prototype.setCollapsed",iq.prototype.xo);v("nrg.ui.ZippyTree.prototype.getFolderNodes",iq.prototype.rq);v("nrg.ui.ZippyTree.prototype.addContents",iq.prototype.Xe);v("nrg.ui.ZippyTree.prototype.createBranch",iq.prototype.kn);v("nrg.ui.ZippyTree.prototype.playFx",iq.prototype.nK);v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",iq.prototype.rL);v("nrg.ui.ZippyTree.prototype.disposeInternal",iq.prototype.f);function sq(){}w(sq,Mn);fa(sq);sq.prototype.v=function(a){var b=a.M().v("span",this.ek(a).join(" "));tq(this,b,a.wi);return b};sq.prototype.wb=function(a,b){b=sq.d.wb.call(this,a,b);var c=Xk(b),d=uq;Hb(c,vq(this,wq))?d=wq:Hb(c,vq(this,xq))?d=xq:Hb(c,vq(this,uq))&&(d=uq);a.wi=d;Vk(b,"checked",d==wq?"mixed":d==xq?"true":"false");return b};sq.prototype.Fg=function(){return"checkbox"};
function tq(a,b,c){if(b){var d=vq(a,c);Yk(b,d)||(C(yq,function(a){a=vq(this,a);cl(b,a,a==d)},a),Vk(b,"checked",c==wq?"mixed":c==xq?"true":"false"))}}sq.prototype.U=function(){return"goog-checkbox"};function vq(a,b){var c=a.U();if(b==xq)return c+"-checked";if(b==uq)return c+"-unchecked";if(b==wq)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function zq(a,b,c){c=c||sq.be();ao.call(this,null,c,b);this.wi=ca(a)?a:uq}w(zq,ao);var xq=!0,uq=!1,wq=null,yq={ML:xq,yN:uq,zN:wq};f=zq.prototype;f.yb=null;f.Fh=function(){return this.wi==xq};f.of=function(a){a!=this.wi&&(this.wi=a,tq(this.Oa(),this.a(),this.wi))};f.eg=function(a){this.fa?(this.rc(),this.yb=a,this.ab()):this.yb=a};f.toggle=function(){this.of(this.wi?uq:xq)};
f.ab=function(){zq.d.ab.call(this);if(this.kk){var a=this.bb();this.yb&&a.B(this.yb,"click",this.lu).B(this.yb,"mouseover",this.lk).B(this.yb,"mouseout",this.Bq).B(this.yb,"mousedown",this.Jg).B(this.yb,"mouseup",this.Qf);a.B(this.a(),"click",this.lu)}this.yb&&(this.yb.id||(this.yb.id=ij(this)+".lbl"),Vk(this.a(),"labelledby",this.yb.id))};f.lc=function(a){zq.d.lc.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.lu=function(a){a.stopPropagation();var b=this.wi?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.Pf=function(a){32==a.keyCode&&this.lu(a);return!1};Jn("goog-checkbox",function(){return new zq});function Aq(){Td.call(this);this.s="mesh";za(this,new dd)}w(Aq,Td);v("X.mesh",Aq);function Bq(){U.call(this);this.Wf=[];this.qf=[]}w(Bq,U);v("xiv.ui.ctrl.XtkController",Bq);Bq.ID_PREFIX="xiv.ui.ctrl.XtkController";Bq.CSS_SUFFIX={qD:"label",dD:"component"};var Cq=B();function Dq(){return P("div",{id:"Label_"+B(),"class":Bq.CSS.qD})}function Eq(a){a=g(a.file)?a.file[0]:a.file||a.name;return Kk(a)}function Fq(a,b){b.KB([Eq(a)])}f=Bq.prototype;f.Wi=!1;f.n=function(a){Bq.d.n.call(this,a)};f.eg=function(a){null==this.yb&&(this.yb=Dq(),Vh(this.a(),this.yb));this.yb.innerHTML=a};
f.uG=function(){return this.yb};f.KB=function(a){s(a)&&(a=[a]);this.Hl=a};f.lG=function(){return this.Hl};f.Vg=function(a){this.OC=a};f.Fc=function(){return this.OC};f.bj=function(a){a=this.A=a;this.A instanceof fj?(a=this.A.a(),this.A.fa?this.A.a().parentNode!==this.a()&&this.A.a()!==this.a()&&this.a().appendChild(this.A.a()):this.A.n(this.a())):this.a().appendChild(a);null!=a&&O(a,Bq.CSS.dD)};f.rz=function(){return Lb(this.Wf,this.qf)};f.CG=function(){return this.Wf};f.wA=function(){return this.Wi};
f.MK=function(a){this.Wi=a};f.eH=function(){return this.qf};f.YF=function(){return this.A};f.fc=ea;f.Wd=function(a,b,c){a=new a;a.n();s(b)&&a.eg(b);Vh(this.a(),a.a());null!=c&&F(a,"p",c);return a};f.update=function(){this.A==this?this.k():this.A.k&&this.A.k()};f.k=function(){this.A.k&&this.A!=this&&this.A.k()};f.ct=function(a,b){var c=this.Wd(b,"Color",function(b){a.color=b.color}.bind(this));Fq(a,c);this.qf.push(c);c[Cq]=a;c.update()};
f.my=function(a,b){var c=this.Wd(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});Fq(a,c);this.qf.push(c);c.A.J(1);c.A.k()};f.dt=function(a,b){var c=this.Wd(b,"Visible",function(b){a.visible=b.checked});Fq(a,c);this.qf.push(c);c.A.of(a.visible)};
f.f=function(){Bq.d.f.call(this);this[Cq]=null;delete this.Wi;delete this.OC;D(this.qf,function(a){H(a);a.g()});Ib(this.qf);delete this.qf;D(this.Wf,function(a){H(a);a.g();controller=null});Ib(this.Wf);delete this.Wf;null!=this.A&&(H(this.A),this.A instanceof fj?this.A.g():S(this.A),delete this.A);null!=this.Hl&&(Ib(this.Hl),delete this.Hl);null!=this.yb&&(S(this.yb),delete this.yb)};v("xiv.ui.ctrl.XtkController.ID_PREFIX",Bq.ID_PREFIX);v("xiv.ui.ctrl.XtkController.CSS_SUFFIX",Bq.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkController.EventType",{LL:"p"});v("xiv.ui.ctrl.XtkController.OBJ_KEY",Cq);v("xiv.ui.ctrl.XtkController.createLabel",Dq);v("xiv.ui.ctrl.XtkController.getXObjLabel",Eq);v("xiv.ui.ctrl.XtkController.getObjectCategory",function(a){if(a instanceof Aq)return"Meshes";if(a instanceof I)return"Volumes";if(a instanceof hq)return"Fibers";if(a instanceof Lp)return"Annotations"});v("xiv.ui.ctrl.XtkController.setControllerFolders",Fq);v("xiv.ui.ctrl.XtkController.prototype.render",Bq.prototype.n);
v("xiv.ui.ctrl.XtkController.prototype.setLabel",Bq.prototype.eg);v("xiv.ui.ctrl.XtkController.prototype.getLabel",Bq.prototype.uG);v("xiv.ui.ctrl.XtkController.prototype.setFolders",Bq.prototype.KB);v("xiv.ui.ctrl.XtkController.prototype.getFolders",Bq.prototype.lG);v("xiv.ui.ctrl.XtkController.prototype.setXObj",Bq.prototype.Vg);v("xiv.ui.ctrl.XtkController.prototype.getXObj",Bq.prototype.Fc);v("xiv.ui.ctrl.XtkController.prototype.setComponent",Bq.prototype.bj);
v("xiv.ui.ctrl.XtkController.prototype.getAllControllers",Bq.prototype.rz);v("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",Bq.prototype.CG);v("xiv.ui.ctrl.XtkController.prototype.isInitialized",Bq.prototype.wA);v("xiv.ui.ctrl.XtkController.prototype.setInitialized",Bq.prototype.MK);v("xiv.ui.ctrl.XtkController.prototype.getSubControllers",Bq.prototype.eH);v("xiv.ui.ctrl.XtkController.prototype.getComponent",Bq.prototype.YF);
v("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",Bq.prototype.fc);v("xiv.ui.ctrl.XtkController.prototype.createController",Bq.prototype.Wd);v("xiv.ui.ctrl.XtkController.prototype.update",Bq.prototype.update);v("xiv.ui.ctrl.XtkController.prototype.updateStyle",Bq.prototype.k);v("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",Bq.prototype.ct);v("xiv.ui.ctrl.XtkController.prototype.add_opacity",Bq.prototype.my);v("xiv.ui.ctrl.XtkController.prototype.add_visible",Bq.prototype.dt);
v("xiv.ui.ctrl.XtkController.prototype.disposeInternal",Bq.prototype.f);function Gq(){Bq.call(this)}w(Gq,Bq);v("xiv.ui.ctrl.Histogram",Gq);Gq.ID_PREFIX="xiv.ui.ctrl.Histogram";Gq.CSS_SUFFIX={YC:"canvas",uD:"linecanvas",wD:"max",DD:"min"};Gq.LEVEL_CUTOFF=.999;f=Gq.prototype;f.SH=.95;f.ge=null;f.Zi=null;f.bs=null;f.bo=null;f.hs=null;f.fp=null;f.kF="rgb(40,40,40)";f.jq=!1;
f.n=function(a){Gq.d.n.call(this,a);this.bj(this);this.vi=P("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.YC});this.a().appendChild(this.vi);this.Rj=this.vi.getContext("2d");this.Rj.fillStyle=this.kF;this.Jh=P("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.uD});this.a().appendChild(this.Jh);this.Uf=this.Jh.getContext("2d");this.ao=P("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.wD},"1000");
this.a().appendChild(this.ao);this.co=P("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.DD},"-1000");this.a().appendChild(this.co)};f.Fc=function(){return Gq.d.Fc.call(this)};
function Hq(a){if(null==a.ge){var b=a.Fc(),c=b.max;D(b.image,function(a){D(a,function(a){D(a,function(a){if(null==this.ge){this.ge=[];for(var b=0,b=0;b<=c;b++)this.ge.push(0)}this.ge[parseInt(a)]++;this.bs++}.bind(this))}.bind(this))}.bind(a));if(null!=a.ge){var d;null==a.Zi&&(a.Zi=[],a.bo=0,D(a.ge,function(a){d=a/this.bs;this.Zi.push(d);this.bo=Math.max(this.bo,d)}.bind(a)))}}}
f.jz=function(){if(null!=this.Fc()){var a=Oi(this.vi),b=a.width,a=a.height;this.vi.height=a;this.vi.width=b;this.Jh.height=a;this.Jh.width=b;Hq(this);if(null!=this.ge)for(var b=Math.round(b/this.Fc().windowHigh),b=0<b?b:1,c=this.SH/this.bo,d,e=0,h=this.Zi.length;e<h;e++)d=this.Zi[e]*c*a,this.Rj.fillRect(b*e,a,b,-Math.round(d)),0<d&&!1==this.jq&&(this.jq=!0)}};f.Kz=function(a){if(null!=this.ge)for(var b=0,c=0,d=this.ge.length;c<d;c++)if(b+=this.ge[c],b/this.bs>=a)return c};
f.update=function(){this.jq||this.jz();this.HC();if(null!=this.Fc()){var a=Oi(this.Jh),b=a.width,a=a.height;this.Jh.width=b;var c;c=0==this.hj&&0<this.Uh?Math.round(this.fp/this.Uh*b):Math.round(this.fp/this.hj*b);b=0==this.Uh?0:Math.round(this.hs/this.Uh*b);this.Uf.beginPath();this.Uf.strokeStyle="gray";this.Uf.moveTo(c,a);this.Uf.lineTo(b,0);this.Uf.lineWidth=.5;this.Uf.stroke();b=c+(b-c)/2;this.Uf.moveTo(b,a);this.Uf.lineTo(b,a-20);this.Uf.lineWidth=.5;this.Uf.stroke()}};
f.HC=function(){null!=this.Fc()&&(null==this.hj&&(this.hj=parseInt(this.Fc().windowLow),this.Uh=parseInt(this.Fc().windowHigh),this.hj=isNaN(this.hj)?null:this.hj,this.Uh=isNaN(this.Uh)?null:this.Uh,this.fp=this.hj,this.hs=this.Uh),this.fp=parseInt(this.Fc().windowLow),this.hs=parseInt(this.Fc().windowHigh),this.co.innerHTML=this.fp,this.ao.innerHTML=this.hs)};
f.f=function(){Gq.d.f.call(this);null!=this.ao&&(S(this.ao),delete this.ao);null!=this.co&&(S(this.co),delete this.co);null!=this.vi&&(S(this.vi),delete this.vi);null!=this.Jh&&(S(this.Jh),delete this.Jh);null!=this.ge&&(Ib(this.ge),delete this.ge);null!=this.Zi&&(Ib(this.Zi),delete this.Zi);delete this.jq;delete this.bs;delete this.bo;delete this.Rj;delete this.Uf;delete this.hj;delete this.Uh};v("xiv.ui.ctrl.Histogram.EventType",{});v("xiv.ui.ctrl.Histogram.ID_PREFIX",Gq.ID_PREFIX);
v("xiv.ui.ctrl.Histogram.CSS_SUFFIX",Gq.CSS_SUFFIX);v("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",Gq.LEVEL_CUTOFF);v("xiv.ui.ctrl.Histogram.prototype.render",Gq.prototype.n);v("xiv.ui.ctrl.Histogram.prototype.draw",Gq.prototype.jz);v("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",Gq.prototype.Kz);v("xiv.ui.ctrl.Histogram.prototype.update",Gq.prototype.update);v("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",Gq.prototype.HC);v("xiv.ui.ctrl.Histogram.prototype.disposeInternal",Gq.prototype.f);function Iq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);U.call(this);this.hz=a;this.aj=b;this.cn=null;this.gb=new cm(this.a());this.Sr()}w(Iq,U);v("nrg.ui.ResizeDragger",Iq);Iq.ID_PREFIX="nrg.ui.ResizeDragger";Iq.CSS_SUFFIX={};f=Iq.prototype;f.jg=null;f.Eh=null;f.yl=null;f.sn=null;f.Cg=null;f.yh=null;f.iq=null;f.rn=null;f.offsetX=0;f.VB=function(a){this.offsetX=a};f.offsetY=0;f.RK=function(a){this.offsetY=a};f.Va=null;f.Dh=null;f.ya=null;f.Fd=null;f.va=null;f.bc=null;
f.Dd=!1;f.he=new rh(10,10);f.hd=function(){return this.cn};f.Rh=function(a){this.cn=a};f.qq=function(){return this.gb};f.zz=function(){return this.hz};f.jd=function(){return this.a()};
f.kj=function(){this.Dh=Oi(this.a());this.Va=Ai(this.a());this.jg=-1*this.Dh.height/2+this.offsetY;this.Eh=-1*this.Dh.width/2+this.offsetX;this.gb.Tf()||this.Dd||(this.ya=vb(Ai(this.aj)),this.Fd=vb(Oi(this.aj)),this.ya.left=this.ya.x,this.ya.top=this.ya.y,this.ya.right=this.ya.x+this.Fd.width,this.ya.bottom=this.ya.y+this.Fd.height,this.va=vb(Ai(this.cn)),this.bc=vb(Oi(this.cn)),this.va.left=this.va.x,this.va.top=this.va.y,this.va.right=this.va.x+this.bc.width,this.va.bottom=this.va.y+this.bc.height,
this.xg&&this.xg(this))};f.TB=function(a){return this.he=a};f.Sr=function(){F(this.gb,"start",this.uv.bind(this));F(this.gb,"drag",this.Yf.bind(this));F(this.gb,"end",this.tv.bind(this))};f.uv=function(){this.dispatchEvent({type:"start_resize"})};f.Yf=function(){this.kj();this.dispatchEvent({type:"resize",zK:this.ya,Fd:this.Fd,eF:this.va,bc:this.bc});null!=this.Ne&&this.Ne()};f.tv=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.gb.Tf()||this.Dd||this.kj()};f.ef=function(){};
f.pf=function(a,b,c){this.kj();a=this.ef(a);t(c)&&0===c?ti(this.a(),a.end):Jq(this,a.start,a.end,b,c)};function Jq(a,b,c,d,e){a.gj=new Sj(a.a(),[b.x,b.y],[c.x,c.y],t(e)?e:500,rk);F(a.gj,"begin",function(){this.Dd=!0;this.uv()}.bind(a));F(a.gj,"animate",a.Yf.bind(a));F(a.gj,"end",function(){this.Dd=!1;this.gj.g();H(this.gj);this.gj.Yd();this.gj=null;yi(this.a(),c);this.tv();d&&d()}.bind(a));a.gj.play()}
f.f=function(){delete this.OO;delete this.PO;delete this.Eh;delete this.yl;delete this.sn;delete this.Cg;delete this.yh;delete this.iq;delete this.rn;delete this.Dd;sb(this.he);delete this.he;delete this.aj;delete this.cn;sb(this.Va);delete this.Va;sb(this.Dh);delete this.Dh;sb(this.ya);delete this.ya;sb(this.Fd);delete this.Fd;sb(this.va);delete this.va;sb(this.bc);delete this.bc;S(this.gb.handle);this.gb.handle=null;H(this.gb);this.gb.g();delete this.gb;delete this.hz};
v("nrg.ui.ResizeDragger.EventType",{ss:"resize",QD:"start_resize",PD:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Iq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Iq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Iq.prototype.jg);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Iq.prototype.Eh);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Iq.prototype.yl);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Iq.prototype.sn);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Iq.prototype.Cg);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Iq.prototype.yh);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Iq.prototype.iq);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Iq.prototype.rn);v("nrg.ui.ResizeDragger.prototype.offsetX",Iq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Iq.prototype.VB);v("nrg.ui.ResizeDragger.prototype.offsetY",Iq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Iq.prototype.RK);v("nrg.ui.ResizeDragger.prototype.handlePos",Iq.prototype.Va);v("nrg.ui.ResizeDragger.prototype.handleSize",Iq.prototype.Dh);v("nrg.ui.ResizeDragger.prototype.resizeePos",Iq.prototype.ya);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Iq.prototype.Fd);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Iq.prototype.va);v("nrg.ui.ResizeDragger.prototype.boundarySize",Iq.prototype.bc);v("nrg.ui.ResizeDragger.prototype.isAnimating",Iq.prototype.Dd);
v("nrg.ui.ResizeDragger.prototype.minSize",Iq.prototype.he);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Iq.prototype.hd);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Iq.prototype.Rh);v("nrg.ui.ResizeDragger.prototype.getDragger",Iq.prototype.qq);v("nrg.ui.ResizeDragger.prototype.getDirection",Iq.prototype.zz);v("nrg.ui.ResizeDragger.prototype.getHandle",Iq.prototype.jd);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Iq.prototype.kj);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Iq.prototype.TB);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Iq.prototype.uv);v("nrg.ui.ResizeDragger.prototype.onResize",Iq.prototype.Yf);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Iq.prototype.tv);v("nrg.ui.ResizeDragger.prototype.update",Iq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Iq.prototype.ef);v("nrg.ui.ResizeDragger.prototype.slideToLimits",Iq.prototype.pf);
v("nrg.ui.ResizeDragger.prototype.disposeInternal",Iq.prototype.f);function Kq(a){Iq.call(this,"right",a)}w(Kq,Iq);v("nrg.ui.ResizeDraggerRight",Kq);Kq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Kq.CSS_SUFFIX={};Kq.prototype.xg=function(){this.yl=this.ya.left+this.he.width+this.Eh;this.sn=this.va.right+this.Eh;this.iq=this.sn-this.yl};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Kq.prototype.xg);Kq.prototype.Ne=function(){Mi(this.aj,Math.min(Math.max(this.Fd.width+(this.Dd?this.Va.x-this.ya.right+this.Eh:this.gb.clientX-this.gb.jw),this.he.width),this.bc.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Kq.prototype.Ne);Kq.prototype.update=function(a){this.gb.Tf()||this.Dd||(Kq.d.update.call(this,a),em(this.gb,new th(this.yl,this.ya.y,this.iq,0)),yi(this.a(),this.ya.right+this.Eh,this.ya.y),Ni(this.a(),this.Fd.height))};Kq.prototype.ef=function(a){return{start:new N(this.Va.x,this.Va.y),end:"MIN"==a?new N(this.yl,this.Va.y):new N(this.sn,this.Va.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Kq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Kq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Kq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Kq.prototype.ef);function Lq(a){Iq.call(this,"right",a)}w(Lq,Iq);v("nrg.ui.ResizeDraggerBottom",Lq);Lq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Lq.CSS_SUFFIX={};Lq.prototype.xg=function(){this.Cg=this.ya.top+this.he.height+this.jg;this.yh=this.va.bottom+this.jg;this.rn=this.yh-this.Cg};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Lq.prototype.xg);Lq.prototype.Ne=function(){Ni(this.aj,Math.max(this.Fd.height+(this.Va.y-this.ya.bottom),this.he.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Lq.prototype.Ne);Lq.prototype.update=function(){this.gb.Tf()||this.Dd||(Lq.d.update.call(this),em(this.gb,new th(this.va.x,this.Cg,0,this.yh)),yi(this.a(),this.ya.x,this.ya.bottom+this.jg))};Lq.prototype.ef=function(a){return{start:new N(this.Va.x,this.Va.y),end:"MIN"==a?new N(this.Va.x,this.Cg):new N(this.Va.x,this.yh)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Lq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Lq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Lq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Lq.prototype.ef);function Mq(a){Iq.call(this,"right",a)}w(Mq,Iq);v("nrg.ui.ResizeDraggerTop",Mq);Mq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Mq.CSS_SUFFIX={};Mq.prototype.xg=function(){this.Cg=this.va.top-this.jg;this.yh=this.ya.bottom-this.he.height+this.jg;this.rn=this.yh-this.Cg};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Mq.xg);Mq.prototype.Ne=function(){var a=this.Va.y-this.jg,b=this.Fd.height+(this.Dd?this.ya.y-a:this.gb.kw-this.gb.clientY);this.aj.style.top=a.toString()+"px";Ni(this.aj,Math.max(b,this.he.height))};
Mq.prototype.update=function(){this.gb.Tf()||this.Dd||(Mq.d.update.call(this),em(this.gb,new th(this.va.x,this.Cg,0,this.rn)),yi(this.a(),this.ya.x,this.ya.y+this.jg))};Mq.prototype.ef=function(a){return{start:new N(this.Va.x,this.Va.y),end:"MIN"==a?new N(this.Va.x,this.yh):new N(this.Va.x,this.Cg)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Mq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Mq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Mq.prototype.xg);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Mq.prototype.Ne);v("nrg.ui.ResizeDraggerTop.resizeMethod",Mq.Ne);v("nrg.ui.ResizeDraggerTop.prototype.update",Mq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Mq.prototype.ef);function Nq(a){Iq.call(this,"right",a)}w(Nq,Iq);v("nrg.ui.ResizeDraggerTopRight",Nq);Nq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Nq.CSS_SUFFIX={};Nq.prototype.kj=function(){Nq.d.kj.call(this);this.gb.Tf()||this.Dd||(Kq.prototype.xg.bind(this)(),Mq.prototype.xg.bind(this)())};Nq.prototype.Yf=function(){Nq.d.Yf.call(this);Kq.prototype.Ne.bind(this)();Mq.prototype.Ne.bind(this)()};
Nq.prototype.update=function(a){this.gb.Tf()||this.Dd||(Nq.d.update.call(this,a),em(this.gb,new th(this.va.x+this.Eh,this.va.y+this.jg,this.bc.width,this.bc.height)),yi(this.a(),this.ya.right+this.Eh,this.ya.y+this.jg))};
Nq.prototype.ef=function(a){var b=new N(this.Va.x,this.Va.y),c;"TOP_LEFT"==a?c=new N(this.va.x,this.va.y):"TOP_RIGHT"==a?c=new N(this.va.x+this.bc.width,this.va.y):"BOTTOM_RIGHT"==a?c=new N(this.va.x+this.bc.width,this.va.y+this.bc.height):"BOTTOM_LEFT"==a&&(c=new N(this.va.x,this.va.y+this.bc.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Nq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Nq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Nq.prototype.kj);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Nq.prototype.Yf);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Nq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Nq.prototype.ef);function Oq(a){Iq.call(this,"right",a)}w(Oq,Iq);v("nrg.ui.ResizeDraggerLeft",Oq);Oq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Oq.CSS_SUFFIX={};Oq.prototype.Ne=function(){Mi(this.aj,Math.min(Math.max(this.Fd.width+(this.ya.x-this.Va.x),this.he.width),this.bc.width));yi(this.a(),this.Va.x,this.ya.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Oq.prototype.Ne);
Oq.prototype.update=function(a){this.gb.Tf()||this.Dd||(Oq.d.update.call(this,a),em(this.gb,new th(this.va.x-this.Dh.width,this.va.y,this.bc.width-this.he.width-this.Dh.width,0)),yi(this.a(),this.ya.x-this.Dh.width,this.ya.y))};Oq.prototype.ef=function(a){return{start:new N(this.Va.x,this.Va.y),end:"MIN"==a?new N(this.va.x+this.he.width,this.Va.y):new N(this.va.x+this.bc.width-this.he.width,this.Va.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Oq.ID_PREFIX);v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Oq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerLeft.resizeMethod",Oq.Ne);v("nrg.ui.ResizeDraggerLeft.prototype.update",Oq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Oq.prototype.ef);function Pq(a,b){U.call(this);this.o=Hh(a);this.Od={};this.fr=this.gr=20;this.fm(b||Pq.qO)}w(Pq,U);v("nrg.ui.Resizable",Pq);Pq.ID_PREFIX="nrg.ui.Resizable";Pq.CSS_SUFFIX={IL:"boundary"};var Qq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Rq=["RIGHT","BOTTOM"],Sq=new th(0,0,600,600);f=Pq.prototype;f.KK=function(a,b){this.mO(a);if(0>b)throw Error("Threshold must be greater than zero!");this.iO[a]=b};f.jd=function(a){return this.Od[a].jd()};f.Jl=function(a){return this.Od[a]};
f.nG=function(){var a=[];D(nb(this.Od),function(b){a.push(b.jd())});return a};f.hd=function(){return this.Kf};f.Rh=function(a){this.Kf=a;if(this.Kf.parentNode!==this.o.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.SB=function(a){this.fr=a};f.UB=function(a){this.gr=a};f.IG=function(){return this.fr};f.JG=function(){return this.gr};
f.fm=function(a){a=a||"DEFAULT";s(a)&&(a="ALL"==a.toUpperCase()?Qq:"DEFAULT"==a.toUpperCase()?Rq:[a]);Tq(this);D(a,function(a){if(!s(a))throw Error("String required!");if(!Hb(Qq,a))throw Error("Invalid direction: ",a);this.Yx(a)}.bind(this))};f.qt=function(a){if(!Hb(Qq,a))throw Error("Invalid draggerDir '"+a);};f.RH=function(a){this.qt(a);if(!this.Od[a])throw Error("No ResizeDragger for "+a);};f.pf=function(a,b,c,d){a=a.toUpperCase();this.qt(a);this.update();this.Od[a].pf(b,c,d)};
function Uq(a,b){switch(a){case "TOP":return new Mq(b);case "BOTTOM":return new Lq(b);case "LEFT":return new Oq(b);case "RIGHT":return new Kq(b);case "TOP_RIGHT":return new Nq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.Yx=function(a){if(a in this.Od)throw Error("Resize direction "+a+" already in use.");this.Od[a]=Uq(a,this.o);F(this.Od[a],"start_resize",this.DJ.bind(this));F(this.Od[a],"resize",this.xk.bind(this));F(this.Od[a],"end_resize",this.CJ.bind(this));this.update()};f.update=function(){if(null!=this.Kf){var a=new rh(this.gr,this.fr);C(this.Od,function(b){this.Kf&&this.Kf.parentNode&&Vh(this.Kf.parentNode,b.jd());b.hd()!==this.Kf&&b.Rh(this.Kf);b.TB(a);b.kj();b.update()}.bind(this))}};f.DJ=function(){this.dispatchEvent({type:"resize_start"})};
f.xk=function(a){this.dispatchEvent({type:"resize",zK:a.ya,Fd:a.Fd,eF:a.va,bc:a.bc})};f.CJ=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Tq(a){C(a.Od,function(a){a&&(H(a),a.g())});sb(a.Od)}f.f=function(){Pq.d.f.call(this);Tq(this);delete this.Od;this.Kf&&(S(this.Kf.parentNode),delete this.Kf)};v("nrg.ui.Resizable.EventType",{ss:"resize",QD:"resize_start",PD:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Pq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Pq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Qq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Rq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Sq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",Uq);v("nrg.ui.Resizable.prototype.setBoundThreshold",Pq.prototype.KK);v("nrg.ui.Resizable.prototype.getHandle",Pq.prototype.jd);v("nrg.ui.Resizable.prototype.getResizeDragger",Pq.prototype.Jl);v("nrg.ui.Resizable.prototype.getHandles",Pq.prototype.nG);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Pq.prototype.hd);v("nrg.ui.Resizable.prototype.setBoundaryElement",Pq.prototype.Rh);v("nrg.ui.Resizable.prototype.setMinHeight",Pq.prototype.SB);v("nrg.ui.Resizable.prototype.setMinWidth",Pq.prototype.UB);v("nrg.ui.Resizable.prototype.getMinHeight",Pq.prototype.IG);v("nrg.ui.Resizable.prototype.getMinWidth",Pq.prototype.JG);v("nrg.ui.Resizable.prototype.setResizeDirections",Pq.prototype.fm);v("nrg.ui.Resizable.prototype.checkDirectionValid",Pq.prototype.qt);
v("nrg.ui.Resizable.prototype.hasDragger",Pq.prototype.RH);v("nrg.ui.Resizable.prototype.slideToLimits",Pq.prototype.pf);v("nrg.ui.Resizable.prototype.addResizeDirection",Pq.prototype.Yx);v("nrg.ui.Resizable.prototype.update",Pq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Pq.prototype.f);function Vq(a){U.call(this);this.Eb=a}w(Vq,U);v("xiv.ui.layouts.LayoutFrame",Vq);Vq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Vq.CSS_SUFFIX={};f=Vq.prototype;f.ce=function(){return this.Eb};f.xc=null;f.Q=function(){return this.lp};f.fm=function(a){this.lp=this.lp?this.lp:new Pq(this.a());this.lp.fm(a)};f.f=function(){Vq.d.f.call(this);delete this.Eb};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Vq.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Vq.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Vq.prototype.ce);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Vq.prototype.Q);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Vq.prototype.fm);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Vq.prototype.f);function Wq(){U.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.i={}}w(Wq,U);v("xiv.ui.layouts.Layout",Wq);
var Xq="Slider_"+B(),Yq="FrameDisplay_"+B(),Zq="ZoomDisplay_"+B(),$q="Crosshairs_"+B(),ar="PlayButton_"+B(),br={la:Xq,Kd:Yq,Af:Zq,Zc:$q,tj:ar};Wq.ID_PREFIX="xiv.ui.layouts.Layout";Wq.CSS_SUFFIX={};f=Wq.prototype;f.lb=20;f.Wc=20;f.OK=function(a){this.Wc=a};f.PK=function(a){this.lb=a};f.yG=function(){return this.i};f.cu=function(a){return this.i[a]};f.xG=function(a){window.console.log(a,this.i[a]);var b={};C(br,function(c){b[c]=this.i[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};
f.ce=function(){return this.constructor.TITLE};f.Wx=function(a){this.i=this.i?this.i:{};this.i[a.ce()]=a};f.Bg=function(){this.dispatchEvent({type:"q"})};f.Lv=function(){C(this.zn(),function(a){null!=a.la&&(a.la.g(),delete a.la);null!=a.Zc&&(a.Zc.g(),delete a.Zc);null!=a.Kd&&(a.Kd.g(),delete a.Kd);null!=a.Af&&(a.Af.g(),delete a.Af);null!=a.tj&&(a.tj.g(),delete a.tj)})};
f.cp=function(){C(this.zn(),function(a){null!=a.la&&(a.la.k(),a.la.J(a.la.K()));null!=a.Zc&&a.Zc.k();null!=a.Kd&&a.Kd.k();null!=a.Af&&a.Af.k();null!=a.tj&&a.tj.k()})};f.k=function(){Wq.d.k.call(this);this.Bg()};f.f=function(){Wq.d.f.call(this);delete this.Wc;delete this.lb;this.qn(this.vD);delete this.vD};v("xiv.ui.layouts.Layout.EventType",{ss:"q"});v("xiv.ui.layouts.Layout.INTERACTORS",br);v("xiv.ui.layouts.Layout.ID_PREFIX",Wq.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",Wq.CSS_SUFFIX);
v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Wq.prototype.OK);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Wq.prototype.PK);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Wq.prototype.yG);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Wq.prototype.cu);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Wq.prototype.xG);v("xiv.ui.layouts.Layout.prototype.getTitle",Wq.prototype.ce);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Wq.prototype.Wx);
v("xiv.ui.layouts.Layout.prototype.dispatchResize",Wq.prototype.Bg);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Wq.prototype.Lv);v("xiv.ui.layouts.Layout.prototype.updateInteractors",Wq.prototype.cp);v("xiv.ui.layouts.Layout.prototype.updateStyle",Wq.prototype.k);v("xiv.ui.layouts.Layout.prototype.disposeInternal",Wq.prototype.f);function cr(a){$c.call(this);this.s="interactor";this.xe=a;this.Ls=this.Fx=this.Ex=this.Gx=this.Dx=this.Hx=null;this.Cp=!0;this.qi=this.ki=this.tg=!1;this.Kc=[0,0];this.Gs=new A.O(0,0,0);this.Dm=new A.O(0,0,0);this.zA=0;this.Nx=this.yp=null;this.Us=!1;this.qb={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(cr,$c);cr.prototype.__defineGetter__("config",function(){return this.qb});
cr.prototype.__defineGetter__("leftButtonDown",function(){return this.tg});cr.prototype.__defineGetter__("middleButtonDown",function(){return this.ki});cr.prototype.__defineGetter__("rightButtonDown",function(){return this.qi});
cr.prototype.ra=function(){this.qb.MOUSEWHEEL_ENABLED?(this.Ls=new Mp(this.xe),this.Hx=F(this.Ls,"mousewheel",this.lo.bind(this))):(Tc(this.Hx),this.Ls=null);this.qb.MOUSECLICKS_ENABLED?(this.Dx=F(this.xe,"mousedown",this.qv.bind(this)),this.Gx=F(this.xe,"mouseup",this.rv.bind(this))):(Tc(this.Dx),Tc(this.Gx));this.xe.oncontextmenu=this.qb.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.qb.KEYBOARD_ENABLED?this.Nh.bind(this):null;this.qb.TOUCH_ENABLED?(this.qb.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.FE=F(this.xe,"touchstart",this.ZJ.bind(this)),this.EE=F(this.xe,"touchmove",this.XJ.bind(this)),this.DE=F(this.xe,"touchend",this.TJ.bind(this))):(Tc(this.FE),Tc(this.EE),Tc(this.DE));Tc(this.Ex);Tc(this.Fx);this.Ex=F(this.xe,"mousemove",this.sJ.bind(this));this.Fx=F(this.xe,"mouseout",this.tJ.bind(this))};
cr.prototype.qv=function(a){0==a.button?this.tg=!0:1==a.button?this.ki=!0:2==a.button&&(this.qi=!0);eval("this.onMouseDown("+this.tg+","+this.ki+","+this.qi+")");dr(this);a.preventDefault()};cr.prototype.pJ=function(){};cr.prototype.rv=function(a){0==a.button?this.tg=!1:1==a.button?this.ki=!1:2==a.button&&(this.qi=!1);eval("this.onMouseUp("+this.tg+","+this.ki+","+this.qi+")");dr(this);a.preventDefault()};cr.prototype.__defineGetter__("mousePosition",function(){return this.Kc});f=cr.prototype;
f.vJ=function(){};f.tJ=function(a){this.Cp=!1;this.qb.KEYBOARD_ENABLED&&(window.onkeydown=null);this.qi=this.ki=this.tg=!1;dr(this);this.Gs=new A.O(0,0,0);a.preventDefault()};f.rJ=function(){};f.ZJ=function(a){a.preventDefault();a.ra(a.Dc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Dm=new A.O(a.clientX,a.clientY,0);this.Nx=setTimeout(this.VJ.bind(this,a),500)};f.YJ=function(){};
f.VJ=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new qe;a.sg=!0;a.Bf=this instanceof er;this.dispatchEvent(a);this.Gp=!0};f.UJ=function(){};function fr(a){clearTimeout(a.Nx);if(a.Gp){var b=new qe;b.sg=!1;b.Bf=a instanceof er;a.dispatchEvent(b)}a.Gp=!1}f.TJ=function(a){a.preventDefault();eval("this.onTouchEnd()");fr(this)};f.SJ=function(){};
f.XJ=function(a){a.preventDefault();this.Gp||fr(this);this.touchmoveEvent=a=a.Dc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.O(c[0],c[1],0);var b=c[0]>3*this.xe.clientWidth/4,d=c[0]<this.xe.clientWidth/4,e=c[1]<this.xe.clientHeight/4,c=c[1]>3*this.xe.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Dm.uc(a);this.Dm=a.clone();if(this.Gp)a=new oe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.ad=e,this.dispatchEvent(a);
else if(this instanceof gr&&(b||d))a=new re,a.Rb=0>e.y,this.dispatchEvent(a);else if(this instanceof er||c)e.scale(3),a=new pe,a.ad=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.O(a[0],a[1],0),b=new A.O(b[0],b[1],0),e=od(a,b),b=e-this.zA,this.zA=e,this.Dm.uc(a),this.Dm=a.clone(),10<Math.abs(b)&&(a=new qe,a.sg=0<b,a.Bf=this instanceof er,this.dispatchEvent(a)))};f.WJ=function(){};
f.sJ=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Cp=!0;this.qb.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.Nh.bind(this));a.preventDefault();var b=a.shiftKey;this.Us=b;this.Kc=[a.offsetX,a.offsetY];var c=new A.O(this.Kc[0],this.Kc[1],0);a=this.Gs.uc(c);this.Gs=c.clone();this.qb.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.ki||this.tg||this.qi)&&dr(this),this.yp=setTimeout(function(){dr(this);var a=new se;a.Kp=c.x;a.Lp=
c.y;this.dispatchEvent(a);this.yp=null}.bind(this),300));0!=a.Vf()&&(this.tg&&!b?(b=new pe,a.scale(3),b.ad=a,this.dispatchEvent(b)):this.ki||this.tg&&b?(b=new oe,b.ad=a,this.dispatchEvent(b)):this.qi&&(b=new qe,b.sg=0<a.y,b.Bf=!1,this.dispatchEvent(b)))};function dr(a){a.yp&&clearTimeout(a.yp);a.dispatchEvent(new te)}f.wJ=function(){};f.lo=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");dr(this);a.preventDefault()};f.jJ=function(){};
f.Nh=function(a){if(this.Cp){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");dr(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new oe:b?a=new qe:(a=new pe,this instanceof gr&&(a=new re)),a&&(c=new A.O(0,0,0),37==h?(c.x=5,a.Rb=!1,b&&(a.Rb=!0,a.sg=!0,a.Bf=!1)):39==h?(c.x=-5,a.Rb=!0,b&&(a.sg=!1,a.Bf=!1)):38==h?(c.y=5,a.Rb=!0,b&&(a.sg=!0,a.Bf=!0)):40==h&&(c.y=-5,a.Rb=!1,b&&(a.sg=!1,a.Bf=!0)),a.ad=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new xe,this.dispatchEvent(a))}};v("X.interactor",cr);v("X.interactor.prototype.init",cr.prototype.ra);v("X.interactor.prototype.onMouseDown",cr.prototype.pJ);v("X.interactor.prototype.onMouseUp",cr.prototype.vJ);v("X.interactor.prototype.onMouseMove",cr.prototype.rJ);v("X.interactor.prototype.onMouseWheel",cr.prototype.wJ);v("X.interactor.prototype.onKey",cr.prototype.jJ);v("X.interactor.prototype.onTouchStart",cr.prototype.YJ);v("X.interactor.prototype.onTouchMove",cr.prototype.WJ);
v("X.interactor.prototype.onTouchEnd",cr.prototype.SJ);v("X.interactor.prototype.onTouchHover",cr.prototype.UJ);function gr(a){cr.call(this,a);this.s="interactor2D"}w(gr,cr);gr.prototype.lo=function(a){gr.d.lo.call(this,a);var b=new re;null==a.Bd&&(a.Bd=0);b.Rb=0>a.Bd;this.dispatchEvent(b)};function hr(a,b){if(!t(a)||!t(b))throw Error("A camera needs valid width and height values.");$c.call(this);this.s="camera";this.Cj=new A.O(0,100,0);this.cl=new A.O(0,0,0);this.Rb=new A.O(0,0,1);this.Ta=a;this.Ha=b;this.N=this.ar(this.Cj,this.cl)}w(hr,$c);hr.prototype.observe=function(a){if(!(null!=a&&a instanceof cr))throw Error("Could not observe the interactor.");F(a,$d,this.EJ.bind(this));F(a,Zd,this.yJ.bind(this));F(a,ae,this.iK.bind(this))};
hr.prototype.EJ=function(a){if(!(a instanceof pe))throw Error("Received no valid rotate event.");this.rotate(a.ad)};hr.prototype.iK=function(a){if(!(a instanceof qe))throw Error("Received no valid zoom event.");a.sg?this.um(a.Bf):this.vm(a.Bf)};hr.prototype.yJ=function(a){if(!(a instanceof oe))throw Error("Received no valid pan event.");this.xr(a.ad)};hr.prototype.__defineGetter__("view",function(){return this.N});
hr.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.N=a});hr.prototype.__defineGetter__("position",function(){return[this.Cj.x,this.Cj.y,this.Cj.z]});hr.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.Cj=new A.O(a[0],a[1],a[2]);this.reset()});hr.prototype.__defineGetter__("focus",function(){return[this.cl.x,this.cl.y,this.cl.z]});
hr.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.cl=new A.O(a[0],a[1],a[2]);this.reset()});hr.prototype.__defineGetter__("up",function(){return[this.Rb.x,this.Rb.y,this.Rb.z]});hr.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.Rb=new A.O(a[0],a[1],a[2]);this.reset()});f=hr.prototype;f.reset=function(){this.N=this.ar(this.Cj,this.cl)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.O(a[0],a[1],0);else if(!(a instanceof A.O))throw Error("Invalid distance vector for rotate operation.");return a};f.xr=function(a){if(g(a)&&2==a.length)a=new A.O(a[0],a[1],0);else if(!(a instanceof A.O))throw Error("Invalid distance vector for pan operation.");this.N[12]-=a.x;this.N[13]+=a.y};f.um=function(a){var b=20;null!=a&&!a&&(b=1);this.N[14]+=b};f.vm=function(a){var b=20;null!=a&&!a&&(b=1);this.N[14]-=b};
f.ar=function(a,b){if(!(a instanceof A.O&&b instanceof A.O))throw Error("3D vectors required for calculating the view.");return A.t.Kn()};v("X.camera",hr);v("X.camera.prototype.pan",hr.prototype.xr);v("X.camera.prototype.rotate",hr.prototype.rotate);v("X.camera.prototype.zoomIn",hr.prototype.um);v("X.camera.prototype.zoomOut",hr.prototype.vm);function ir(a){function b(a,b,d){b=b*Math.PI*2;b=op(pp(n,Math.cos(b)),pp(m,Math.sin(b)));a=op(op(c,pp(e,a)),pp(b,h));d=op(pp(b,1-Math.abs(d)),pp(k,d));return new tp(a,d)}this.Db=[];a=a||{};var c=new np(a.start||[0,-1,0]),d=new np(a.end||[0,1,0]),e=qp(d,c),h=a.Og||1;a=a.za||16;for(var k=rp(e),l=.5<Math.abs(k.y()),n=rp((new np(l,!l,0)).Vj(k)),m=rp(n.Vj(k)),l=new tp(c,sp(k)),d=new tp(d,rp(k)),q=[],p=0;p<a;p++){var r=p/a,u=(p+1)/a;q.push(new vp([l,b(0,r,-1),b(0,u,-1)]));q.push(new vp([b(0,u,0),b(0,r,
0),b(1,r,0),b(1,u,0)]));q.push(new vp([d,b(1,u,1),b(1,r,1)]))}return Gp(q)}w(ir,Fp);function jr(){Td.call(this);this.s="cylinder";this.Ws=[-10,-10,-10];this.Es=[10,10,10];this.Dj=10;this.Nc=32;za(this,new Hp)}w(jr,Td);jr.prototype.__defineGetter__("start",function(){return this.Ws});jr.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.Ws=a});jr.prototype.__defineGetter__("end",function(){return this.Es});jr.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.Es=a});
jr.prototype.__defineGetter__("radius",function(){return this.Dj});jr.prototype.__defineSetter__("radius",function(a){if(!t(a))throw Error("Invalid radius.");this.Dj=a});jr.prototype.da=function(){Jp(this,new ir({start:this.Ws,end:this.Es,Og:this.Dj,za:this.Nc}));jr.d.da.call(this)};v("X.cylinder",jr);v("X.cylinder.prototype.modified",jr.prototype.da);function Ne(a){I.call(this);this.s="labelmap";this.qh=a;this.Vs=new Float32Array([-255,-255,-255,-255])}w(Ne,I);Ne.prototype.da=function(){var a=new Ud;a.Ma=this;this.dispatchEvent(a);this.qh.da()};Ne.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.vd)throw Error("No colortable assigned.");b=this.vd.Rd.get(a).slice(1,5)}this.Vs=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Ne);function kr(a){this.Db=[];a=a||{};var b=new np(a.Ce||[0,0,0]),c=a.Og?a.Og.length?a.Og:[a.Og,a.Og,a.Og]:[1,1,1];return Gp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new vp(a[0].map(function(e){e=new np(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new tp(e,new np(a[1]))}))}))}w(kr,Fp);function lr(){Td.call(this);this.s="cube";this.Qa=[0,0,0];this.Js=this.Is=this.Hs=20;this.ol=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];za(this,new Hp)}w(lr,Td);lr.prototype.__defineGetter__("center",function(){return this.Qa});lr.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Qa=a});lr.prototype.__defineGetter__("lengthX",function(){return this.Hs});
lr.prototype.__defineSetter__("lengthX",function(a){if(!t(a))throw Error("Invalid lengthX.");this.Hs=a});lr.prototype.__defineGetter__("lengthY",function(){return this.Is});lr.prototype.__defineSetter__("lengthY",function(a){if(!t(a))throw Error("Invalid lengthY.");this.Is=a});lr.prototype.__defineGetter__("lengthZ",function(){return this.Js});lr.prototype.__defineSetter__("lengthZ",function(a){if(!t(a))throw Error("Invalid lengthZ.");this.Js=a});
lr.prototype.da=function(){Jp(this,new kr({Ce:this.Qa,Og:[this.Hs/2,this.Is/2,this.Js/2]}));lr.d.da.call(this)};v("X.cube",lr);v("X.cube.prototype.modified",lr.prototype.da);function er(a){cr.call(this,a);this.s="interactor3D"}w(er,cr);er.prototype.lo=function(a){er.d.lo.call(this,a);var b=new qe;null==a.Bd&&(a.Bd=0);b.sg=0>a.Bd;b.Bf=!0;this.dispatchEvent(b)};function mr(a){$c.call(this);this.s="array";this.Za=[];this.tx=a}w(mr,$c);function nr(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}mr.prototype.add=function(a){this.Za.push(a);return!0};mr.prototype.remove=function(a){a=this.Za.indexOf(a);-1<a&&this.Za.splice(a,1);return!0};mr.prototype.clear=function(){this.Za.length=0};
function or(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),or(a,b,d),or(a,d,c);b<d;++b)if(0<a.tx(a.Za[b],a.Za[d])){var e=a.Za[b];a.Za[b]=a.Za[d];for(var h=a,k=d,l=c;k+1<l&&0>h.tx(h.Za[k+1],e);){var n=h,m=k+1,q=n.Za[k];n.Za[k]=n.Za[m];n.Za[m]=q;++k}h.Za[k]=e}}mr.prototype.sort=function(){or(this,0,this.Za.length)};function pr(a,b){hr.call(this,a,b);this.s="camera2D"}w(pr,hr);pr.prototype.rotate=function(a){a=pr.d.rotate.call(this,a);var b=new me;0<a.x?b.Ys--:0>a.x&&b.Ys++;0<a.y?b.Ks++:0>a.y&&b.Ks--;this.dispatchEvent(b)};pr.prototype.um=function(a){var b=20;null!=a&&!a&&(b=.02);this.N[14]+=b};pr.prototype.vm=function(a){var b=20;null!=a&&!a&&(b=.02);this.N[14]-=b};
pr.prototype.xr=function(a){if(g(a)&&2==a.length)a=new A.O(a[0],a[1],0);else if(!(a instanceof A.O))throw Error("Invalid distance vector for pan operation.");this.N[12]-=a.x/this.N[14];this.N[13]+=a.y/this.N[14]};function qr(a,b){hr.call(this,a,b);this.s="camera3D";this.wx=45;this.Ps=A.t.Lu(A.t.Kn(),this.wx,a/b,1,1E4)}w(qr,hr);qr.prototype.rotate=function(a){a=qr.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.O(this.N[1],this.N[5],this.N[9]),d=new A.O(this.N[0],this.N[4],this.N[8]);c.normalize();d.normalize();A.t.rotate(this.N,b,c.x,c.y,c.z);A.t.rotate(this.N,a,d.x,d.y,d.z)};qr.prototype.ar=function(a,b){var c=qr.d.ar.call(this,a,b);A.t.JA(c,a,b,this.Rb);return c};
function rr(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.t.multiply(a.Ps,a.N,l);A.t.xb(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.t.RA(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",qr);function sr(a){fj.call(this,a);this.Pg=new Pp;F(this.Pg,"change",this.FH,!1,this)}w(sr,fj);var tr={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=sr.prototype;f.v=function(){this.Pe=this.Tj();var a=tr[this.Ea];this.o=this.M().v("div",a,this.Pe);ur(this);vr(this);wr(this)};f.ab=function(){sr.d.ab.call(this);E&&7>lc&&F(this.a(),"resize",this.Zg,!1,this);this.Zg();var a=this.a();Uk(a,"progressbar");Vk(a,"live","polite")};f.rc=function(){sr.d.rc.call(this);xr(this)};
f.Tj=function(){return this.M().v("div","progress-bar-thumb")};function xr(a){E&&7>lc&&Sc(a.a(),"resize",a.Zg,!1,a)}f.Xd=function(a){sr.d.Xd.call(this,a);Zk(this.a(),tr[this.Ea]);a=Ih(null,"progress-bar-thumb",this.a())[0];a||(a=this.Tj(),this.a().appendChild(a));this.Pe=a};f.K=function(){return this.Pg.K()};f.J=function(a){this.Pg.J(a);this.a()&&ur(this)};function ur(a){Vk(a.a(),"valuenow",a.K())}f.qa=function(){return this.Pg.qa()};f.Gd=function(a){this.Pg.Gd(a);this.a()&&vr(this)};
function vr(a){Vk(a.a(),"valuemin",a.qa())}f.ia=function(){return this.Pg.ia()};f.ld=function(a){this.Pg.ld(a);this.a()&&wr(this)};function wr(a){Vk(a.a(),"valuemax",a.ia())}f.Ea="horizontal";f.FH=function(){this.Zg();this.dispatchEvent("change")};
f.Zg=function(){if(this.Pe){var a=this.qa(),b=this.ia(),a=(this.K()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Ea?E&&7>lc?(this.Pe.style.top=0,this.Pe.style.height="100%",b=this.Pe.offsetHeight,a=Math.round(a*b),this.Pe.style.top=b-a+"px",this.Pe.style.height=a+"px"):(this.Pe.style.top=100-b+"%",this.Pe.style.height=b+"%"):this.Pe.style.width=b+"%"}};
f.Th=function(a){if(this.Ea!=a){var b=tr[this.Ea],c=tr[a];this.Ea=a;if(a=this.a())Yk(a,b)&&(al(a,b),Zk(a,c)),b=this.Pe.style,"vertical"==this.Ea?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.Zg()}};f.Ib=function(){return this.Ea};f.f=function(){xr(this);sr.d.f.call(this);this.Pe=null;this.Pg.g()};f.Ch=function(){return this.Pg.Ch()};f.Ug=function(a){this.Pg.Ug(a)};function yr(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");sr.call(this);this.s="progressbar";this.We=a;this.Os="";this.vp=this.ph=null;this.Aj=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Aj=[c,d,e];this.J(b);this.su()}w(yr,sr);
yr.prototype.su=function(){var a=vi(this.We,"position");if("static"==a||""==a)this.Os=this.We.style.position,this.We.style.position="relative";var a=document.getElementsByTagName("head")[0],b=P("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Aj[0])),d=document.createTextNode(String(this.Aj[1])),e=document.createTextNode(String(this.Aj[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.ph=b;this.n(this.We);a=this.a();a.style.position=
"absolute";a.style.top=(this.We.clientHeight-5)/2+"px";a.style.left=(this.We.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};yr.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;S(this.a());var c=new yr(this.We,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");Zh(d).classList.add("progress-bar-thumb-done");this.vp=c};
yr.prototype.Un=function(){this.ph&&S(this.ph);this.a()&&S(this.a());this.vp&&S(this.vp.a());this.vp=this.ph=null;this.Os&&(this.We.style.position=this.Os)};function zr(){$c.call(this);this.s="renderer";this.ua=window.document.body;this.Ta=this.ua.clientWidth;this.Ha=this.ua.clientHeight;this.Da=this.ha=this.oc=null;this.ug=new mr(Xd);this.cd=[];this.Fb=null;this.Dp=this.Em=this.Bp=!1;this.b=this.oi=this.Ud=null;this.qb={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Bs=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(zr,$c);f=zr.prototype;
f.dv=function(){window.cancelAnimationFrame(this.Bs);this.qb.PROGRESSBAR_ENABLED&&(this.oi=new yr(this.ua,3))};f.ev=function(){this.qb.PROGRESSBAR_ENABLED&&this.oi&&(this.oi.done(),this.rp=Wf(function(){this.rp=null;this.oi&&(this.oi.Un(),this.oi=null);this.Em=this.Dp=!0;this.n()}.bind(this),700))};f.fv=function(a){this.oi&&this.oi.J(100*a.Hj)};f.wk=function(a){this.Ud&&this.Ud.J(100*a.Hj)};f.oJ=function(a){null!=a&&a instanceof Ud&&a.Ma&&this.ah(a.Ma)};
f.AJ=function(a){null!=a&&a instanceof Vd&&a.Ma&&this.remove(a.Ma)};f.lv=function(a){if(!(null!=a&&a instanceof se))throw Error("Invalid hover event.");};f.xk=function(){var a=Hh(this.ua);this.Ta=a.clientWidth;this.Ha=a.clientHeight;a=Hh(this.oc);a.width=this.Ta;a.height=this.Ha;"renderer3D"==this.s&&(this.b.viewport(0,0,this.Ta,this.Ha),this.ha.Ps=A.t.Lu(A.t.Kn(),this.ha.wx,this.oc.width/this.oc.height,1,1E4))};
f.am=function(a){if(!(null!=a&&a instanceof re))throw Error("Invalid scroll event.");};zr.prototype.__defineGetter__("config",function(){return this.qb});zr.prototype.__defineGetter__("interactor",function(){return this.Da});zr.prototype.__defineGetter__("camera",function(){return this.ha});zr.prototype.__defineGetter__("loadingCompleted",function(){return this.Em});zr.prototype.__defineGetter__("container",function(){return this.ua});
zr.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;s(b)&&(b=Hh(a));if(!bi(b))throw Error("Could not find the given container.");this.ua=b});f=zr.prototype;f.qo=function(){this.ha.reset()};function Ar(a){a.qb.PROGRESSBAR_ENABLED&&a.Ud&&!a.rp&&(a.Ud.done(),a.rp=Wf(function(){this.rp=null;this.Ud&&(this.Ud.Un(),this.Ud=null);this.n()}.bind(a),700))}
f.ra=function(a){var b=P("canvas");this.ua.appendChild(b);this.Ta=this.ua.clientWidth;this.Ha=this.ua.clientHeight;b.width=this.Ta;b.height=this.Ha;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.ua.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Fb=new Mf;F(this.Fb,ge,this.wk.bind(this));this.oc=b;this.b=c;b=new er(this.oc);"2d"==a&&(b=new gr(this.oc));b.ra();F(b,ce,this.qo.bind(this));F(b,he,this.lv.bind(this));F(b,be,this.am.bind(this));this.Da=b;b=new qr(this.Ta,this.Ha);"2d"==a&&(b=new pr(this.Ta,this.Ha));b.observe(this.Da);this.ha=b;F(window,"resize",this.xk,!1,this)};f.add=function(a){(a instanceof lr||a instanceof Lp||a instanceof jr)&&a.da();this.cd.push(a);this.ah(a)};
f.remove=function(a){if(!this.oc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&H(a);return!1};f.ah=function(a){if(!this.oc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Uc(a,ee)||F(a,ee,this.oJ.bind(this)),Uc(a,fe)||F(a,fe,this.AJ.bind(this)),Uc(a,je)||F(a,je,this.dv.bind(this)),Uc(a,le)||F(a,le,this.fv.bind(this)),Uc(a,ke)||F(a,ke,this.ev.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.ug.Za,c=b.length,d=0,d=0;d<c;d++)if(b[d].bd==a)return b[d];return null};
f.n=function(){if(!this.oc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.Kx){if(this.Fb.hl.wt(!1)){if(this.qb.PROGRESSBAR_ENABLED&&!this.Ud&&(this.Ud=new yr(this.ua,3)),this.Dp=this.Em=!1,this.Kx=Wf(function(){this.Kx=null;this.n()}.bind(this),100),!this.qb.INTERMEDIATE_RENDERING)return}else if(this.Em||this.Dp||(this.Dp=!0,eval("this.onShowtime()"),this.Em=!0),this.Ud){Ar(this);return}this.Bs=window.requestAnimationFrame(this.n.bind(this));eval("this.onRender()");
this.Qg(!1,!0)}};f.fB=function(){};f.dB=function(){};f.Qg=function(){};f.Yd=function(){window.cancelAnimationFrame(this.Bs);this.Fb&&(delete this.Fb,this.Fb=null);this.Ud&&(this.Ud.Un(),delete this.Ud,this.Ud=null);this.ug.clear();delete this.ug;this.cd.length=0;delete this.cd;delete this.Fb;this.Fb=null;delete this.ha;this.ha=null;delete this.Da;this.Da=null;delete this.b;this.b=null;S(this.oc);delete this.oc;this.oc=null};function Br(){zr.call(this);this.s="renderer2D";this.Mc=null;this.wd=-1;this.Td=[];this.Bx=this.zp=this.xx=this.xp=null;this.ll=this.nl=this.Ej=this.Fj=0;this.Gb=this.Hb=this.ub=this.sb=this.ux=-1;this.Cx=new Float32Array([-255,-255,-255,-255]);this.Jx=!0}w(Br,zr);Br.prototype.vv=function(){};Br.prototype.cK=function(){};Br.prototype.am=function(a){Br.d.am.call(this,a);var b=this.cd[0];if(b){var c="",c=0==this.wd?"indexX":1==this.wd?"indexY":"indexZ";b[c]=a.Rb?b[c]+1:b[c]-1;eval("this.onScroll();")}};
Br.prototype.dK=function(a){var b=this.cd[0];if(b){var c=b.Gb-b.Hb,d=c/2,e=parseInt(c+c/15*-a.Ys,10);a=parseInt(d+d/15*a.Ks,10);c==e&&e++;d==a&&a++;b.Hb-=parseInt(d-a,10);b.Hb-=parseInt(c-e,10);b.Hb=Math.max(b.Hb,b.Sd);b.Gb-=parseInt(d-a,10);b.Gb+=parseInt(c-e,10);b.Gb=Math.min(b.Gb,b.Pb);eval("this.onWindowLevel();")}};Br.prototype.__defineGetter__("orientation",function(){return this.Mc});
Br.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.wd=2):"SAGITTAL"==a?(a="X",this.wd=0):"CORONAL"==a&&(a="Y",this.wd=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Mc=a});Br.prototype.__defineGetter__("radiological",function(){return this.Jx});Br.prototype.__defineSetter__("radiological",function(a){this.Jx=a});f=Br.prototype;
f.ra=function(){if(!this.Mc)throw Error("No 2D orientation set.");Br.d.ra.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.oc.width,this.oc.height);this.xp=P("canvas");this.zp=P("canvas");F(this.ha,de,this.dK.bind(this))};f.xk=function(){Br.d.xk.call(this);Cr(this)};f.qo=function(){Br.d.qo.call(this);Cr(this);var a=this.cd[0];a&&(a.Gb=a.Pb,a.Hb=a.Sd)};
f.ah=function(a){Br.d.ah.call(this,a);var b=!1;this.get(a.bd)&&(b=!0);if(a instanceof I){var c=a.ea,d=a.q,e=a.vd;if(null!=d&&null!=d.ea&&d.ea.G)this.ah(d);else if(null!=e&&null!=e.ea&&e.ea.G)this.Fb.load(e,a);else{if(null!=c&&g(c))if(null!=a.eh){if(a.eh.$n!=c.length||b&&!a.G)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Fb.load(c[b],a);return}else if(null!=c&&c.G){this.Fb.load(a,a);return}c=this.Mc;this.wd="X"==c?0:"Y"==c?1:2;this.Nc=a.j[this.wd].j;e=null;e=0==this.wd?a.indexX:1==this.wd?a.indexY:
a.indexZ;c=a.j[this.wd].j[e].Ax;d=a.j[this.wd].j[e].zx;this.nl=a.j[this.wd].j[e].rh;this.ll=a.j[this.wd].j[e].kh;this.Fj=c;this.Ej=d;e=this.xp;e.width=c;e.height=d;var h=this.zp;h.width=c;h.height=d;this.xx=e.getContext("2d");this.Bx=h.getContext("2d");b||(this.ug.add(a),Cr(this))}}};function Cr(a){var b=Math.min(a.Ta/(a.Fj*a.nl),a.Ha/(a.Ej*a.ll));a.ha.N[14]=b}f.vr=function(){};
f.PC=function(a,b){var c=this.cd[0],d=this.ha.N,e=null,h=this.Fj,k=this.Ej,l=null,n=null;if("Y"==this.Mc)e=this.Nc[parseInt(c.indexY,10)],l=e.rh,n=e.kh,this.Td[0]="red",this.Td[1]="blue";else if("Z"==this.Mc)e=this.Nc[parseInt(c.indexZ,10)],l=e.rh,n=e.kh,this.Td[0]="red",this.Td[1]="green";else{e=this.Nc[parseInt(c.indexX,10)];l=e.kh;n=e.rh;this.Td[0]="green";this.Td[1]="blue";var m=h,h=k,k=m}var q=1*d[12],p=-1*d[13],m=Math.max(d[14],.6),d=[this.Ta/2,this.Ha/2],l=h*l*m,n=k*n*m,r=d[0]-l/2,d=d[1]-n/
2,r=r+q*m,d=d+p*m;return a>r&&a<r+l&&b>d&&b<d+n?(q=(a-r)/l*h,p=(b-d)/n*k,n=e.HE[4],"X"==this.Mc?(m=h-q,q=p,p=m):"Y"==this.Mc?q=h-q:"Z"==this.Mc&&(q=h-q,p=k-p),q=e.GE+q*e.rh,p=e.AE+p*e.kh,q=yd(q,p,n,1),h=zd(),Jd(e.tE,q,h),k=zd(),Jd(e.uE,q,k),e=Math.round((c.e[0].D[0]*k[0]+c.e[0].D[1]*k[1]+c.e[0].D[2]*k[2]+c.e[0].Ns)/c.e[0].ml),e>=c.e[0].ba?e=c.e[0].ba-1:0>e&&(e=0),q=Math.round((c.e[1].D[0]*k[0]+c.e[1].D[1]*k[1]+c.e[1].D[2]*k[2]+c.e[1].Ns)/c.e[1].ml),q>=c.e[1].ba?q=c.e[1].ba-1:0>q&&(q=0),p=Math.round((c.e[2].D[0]*
k[0]+c.e[2].D[1]*k[1]+c.e[2].D[2]*k[2]+c.e[2].Ns)/c.e[2].ml),p>=c.e[2].ba?p=c.e[2].ba-1:0>p&&(p=0),[[e,q,p],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.Qg=function(a,b){Br.d.Qg.call(this,a,b);if(0!=this.ug.Za.length){var c=this.cd[0],d=null,d=0==this.wd?c.indexX:1==this.wd?c.indexY:c.indexZ,e=this.Nc[parseInt(d,10)].Ax,h=this.Nc[parseInt(d,10)].zx;this.nl=this.Nc[parseInt(d,10)].rh;this.ll=this.Nc[parseInt(d,10)].kh;this.Fj=e;this.Ej=h;var k=this.Ta,l=this.Ha,n=this.ha.N;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var m=Math.max(n[14],.1);this.b.setTransform(m,0,0,m,0,0);var q=1*n[12],n=-1*n[13],p=null;c.q&&(p=c.q.Vs);var r=
this.Nc[parseInt(d,10)],u=r.Sa.pi,r=r.q,z=null;r&&(z=r.pi);var y=this.Fj,J=this.Ej,T=this.xx,Q=this.Bx,G=T.getImageData(0,0,y,J),R=Q.getImageData(0,0,y,J),Z=G.data,W=R.data,ua=Z.length,na=c.Pb,wa=c.sb,Ma=c.ub,Ga=c.Hb/na,Na=c.Gb/na;if(this.ux!=d||this.sb!=wa||this.ub!=Ma||this.Hb!=Ga||this.Gb!=Na||p&&!nr(p,this.Cx,0)){var la=this.xp;la.width=e;la.height=h;la=this.zp;la.width=e;la.height=h;e=0;do{var la=[0,0,0,0],h=[0,0,0,0],xa=u[e]/255*na,qa=u[e],qa=(qa/255-Ga)/(Na-Ga),qa=255*qa;xa>=wa&&xa<=Ma&&(la=
new K(c.li[0],c.li[1],c.li[2]),la=(new K(c.ji[0],c.ji[1],c.ji[2])).scale(qa).add(la.scale(255-qa)),la=[Math.floor(la.x),Math.floor(la.y),Math.floor(la.z),255],r&&(-255==p[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:nr(p,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.Mc?(Z[e]=la[0],Z[e+1]=la[1],Z[e+2]=la[2],Z[e+3]=la[3],W[e]=h[0],W[e+1]=h[1],W[e+2]=h[2],W[e+3]=h[3]):"Y"==this.Mc?(qa=Math.floor(e/(4*y)),qa=qa*y*4+(4*(y-1)-(e-qa*y*4)),Z[qa]=la[0],Z[qa+1]=la[1],Z[qa+2]=la[2],Z[qa+3]=la[3],W[qa]=h[0],W[qa+1]=
h[1],W[qa+2]=h[2],W[qa+3]=h[3]):(qa=ua-1-e,Z[qa-3]=la[0],Z[qa-2]=la[1],Z[qa-1]=la[2],Z[qa]=la[3],W[qa-3]=h[0],W[qa-2]=h[1],W[qa-1]=h[2],W[qa]=h[3]);e+=4}while(e<ua);T.putImageData(G,0,0);Q.putImageData(R,0,0);this.ux=d;this.sb=wa;this.ub=Ma;this.Hb=Ga;this.Gb=Na;r&&(this.Cx=p)}this.b.globalAlpha=1;this.b.translate(k/2/m,l/2/m);"X"==this.Mc&&(this.b.rotate(.5*Math.PI),d=q,q=n,n=-d);q=-y*this.nl/2+q;n=-J*this.ll/2+n;this.b.drawImage(this.xp,q,n,y*this.nl,J*this.ll);r&&c.q.ib&&(this.b.globalAlpha=c.q.Lc,
this.b.drawImage(this.zp,q,n,y*this.nl,J*this.ll));this.qb.SLICENAVIGATORS&&this.Da.Cp&&this.Da.Us&&!this.Da.tg&&(q=this.Da.Kc,q=this.PC(q[0],q[1]))&&(c.lh=q[0][0],c.mh=q[0][1],c.nh=q[0][2],c.da(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Da.Kc[0],0),this.b.lineTo(this.Da.Kc[0],this.Da.Kc[1]-10),this.b.moveTo(this.Da.Kc[0],this.Da.Kc[1]+10),this.b.lineTo(this.Da.Kc[0],this.Ha),this.b.strokeStyle=this.Td[0],this.b.stroke(),
this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Da.Kc[1]),this.b.lineTo(this.Da.Kc[0]-10,this.Da.Kc[1]),this.b.moveTo(this.Da.Kc[0]+10,this.Da.Kc[1]+.5),this.b.lineTo(this.Ta,this.Da.Kc[1]),this.b.strokeStyle=this.Td[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+q[2][0].toFixed(2)+", "+q[2][1].toFixed(2)+", "+q[2][2].toFixed(2),0,0),y=r=n="undefined","undefined"!=typeof c.$b[q[1][2].toFixed(0)]&&
"undefined"!=typeof c.$b[q[1][2].toFixed(0)][q[1][1].toFixed(0)]&&(n=c.$b[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],c.cb&&(r=c.q.$b[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],c.q.Bm&&(y=c.q.Bm.get(r),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+q[1][0].toFixed(0)+", "+q[1][1].toFixed(0)+", "+q[1][2].toFixed(0)+")",0,15),c.cb&&this.b.fillText("Labelmap:  "+y+" ("+r+")",0,30))}};v("X.renderer2D",Br);v("X.renderer2D.prototype.init",Br.prototype.ra);
v("X.renderer2D.prototype.add",Br.prototype.add);v("X.renderer2D.prototype.onShowtime",Br.prototype.fB);v("X.renderer2D.prototype.onRender",Br.prototype.dB);v("X.renderer2D.prototype.onScroll",Br.prototype.vv);v("X.renderer2D.prototype.onWindowLevel",Br.prototype.cK);v("X.renderer2D.prototype.get",Br.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",Br.prototype.qo);v("X.renderer2D.prototype.xy2ijk",Br.prototype.PC);v("X.renderer2D.prototype.render",Br.prototype.n);
v("X.renderer2D.prototype.destroy",Br.prototype.Yd);v("X.renderer2D.prototype.onSliceNavigation",Br.prototype.vr);function Dr(){Yc.call(this)}w(Dr,Yc);v("xiv.vis.RenderEngine",Dr);Dr.prototype.ID_PREFIX="xiv.vis.RenderEngine";var Er="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{OM:"r",LM:"s",MM:"t"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",Er);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",Dr.prototype.ID_PREFIX);function Fr(){Br.call(this)}w(Fr,Br);v("xiv.vis.XtkRenderer2D",Fr);f=Fr.prototype;f.Yf=function(){this.xk()};f.vv=function(){this.vr()};f.wk=function(a){Fr.d.wk.call(this,a);this.dispatchEvent({type:"s",value:a.Hj})};f.ra=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;Fr.d.ra.call(this);this.Da.onMouseMove=this.iJ.bind(this);this.Da.config.MOUSEWHEEL_ENABLED=!1;this.Da.config.MOUSECLICKS_ENABLED=!1;this.Da.config.KEYBOARD_ENABLED=!1;this.Da.ra()};f.Ib=function(){return this.Mc};
f.UF=function(){return this.ha};f.LG=function(){return this.Da.mousePosition};f.Qq=function(){};f.iJ=function(){this.dispatchEvent({type:"mouseover",JI:this.Da.JI,SK:this.Da.shiftDown})};f.vr=function(){this.dispatchEvent({type:"u",volume:this.cd[0],lO:this.cd[0]["index"+this.Mc],kO:this.Mc,SK:this.Da.Us})};f.n=function(){this.oc&&this.b?(Fr.d.n.call(this),this.dispatchEvent({type:"t"})):(window.console.log("init"),this.ra(),window.console.log(this.Ll().visible))};f.VF=function(){return this.oc};
f.Ll=function(){return this.cd[0]};f.Pz=function(){if(null!=this.Nc){var a=this.cd[0];if(null!=a[I.REORIENTED_DIMENSIONS_KEY]&&"false"==a.reslicing.toString())switch(this.Ib()){case "X":return a[I.REORIENTED_DIMENSIONS_KEY][0];case "Y":return a[I.REORIENTED_DIMENSIONS_KEY][1];case "Z":return a[I.REORIENTED_DIMENSIONS_KEY][2]}return this.Nc.length}};f.aA=function(){return this.ha.N[14]};f.jC=function(a){this.ha.N[14]=a};function Gr(a){.01>a.ha.N[14]&&(a.ha.N[14]=.01)}
f.um=function(){this.ha.N[14]+=.03;Gr(this)};f.vm=function(){this.ha.N[14]+=-.03;Gr(this)};
function Hr(a,b,c,d){var e=a.cd[0],h=a.ha.N,k=null,l=a.Fj,n=a.Ej,m=null,q=null;if(null!=e){"Y"==a.Mc?(k=a.Nc[parseInt(e.indexY,10)],m=k.rh,q=k.kh,a.Td[0]="red",a.Td[1]="blue"):"Z"==a.Mc?(k=a.Nc[parseInt(e.indexZ,10)],m=k.rh,q=k.kh,a.Td[0]="red",a.Td[1]="green"):(k=a.Nc[parseInt(e.indexX,10)],m=k.kh,q=k.rh,a.Td[0]="green",a.Td[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),p=[a.Ta/2,a.Ha/2],m=l*m*h,q=n*q*h,r=p[0]-m/2,p=p[1]-q/2,r=r+e*h,p=p+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?r+(a.Fj-b)/l*m:r+b/l*m;b=Math.max(0,b);b=Math.min(b,n);return d?p+(a.Ej-b)/n*q:p+b/n*q}}f.Xz=function(a,b){return Hr(this,a,"vertical",b)};f.Fz=function(a,b){return Hr(this,a,"horizontal",b)};f.Yd=function(){Fr.d.Yd.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",Fr.prototype.Yf);v("xiv.vis.XtkRenderer2D.prototype.onScroll",Fr.prototype.vv);v("xiv.vis.XtkRenderer2D.prototype.onProgress",Fr.prototype.wk);
v("xiv.vis.XtkRenderer2D.prototype.init",Fr.prototype.ra);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",Fr.prototype.Ib);v("xiv.vis.XtkRenderer2D.prototype.getCamera",Fr.prototype.UF);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",Fr.prototype.LG);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",Fr.prototype.Qq);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",Fr.prototype.vr);v("xiv.vis.XtkRenderer2D.prototype.render",Fr.prototype.n);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",Fr.prototype.VF);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",Fr.prototype.Ll);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",Fr.prototype.Pz);v("xiv.vis.XtkRenderer2D.prototype.getZoom",Fr.prototype.aA);v("xiv.vis.XtkRenderer2D.prototype.setZoom",Fr.prototype.jC);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",Fr.prototype.um);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",Fr.prototype.vm);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",Fr.prototype.Xz);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",Fr.prototype.Fz);v("xiv.vis.XtkRenderer2D.prototype.destroy",Fr.prototype.Yd);function Ir(){U.call(this)}w(Ir,lp);v("xiv.ui.layouts.interactors.ZoomDisplay",Ir);Ir.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";Ir.prototype.n=function(a){Ir.d.n.call(this,a);this.Ja.min=1};Ir.prototype.$g=function(){this.af.innerHTML="Zoom level:&nbsp"+this.Ja.value+"%"};v("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",Ir.ID_PREFIX);v("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",Ir.prototype.$g);function Jr(a,b){Rp.call(this,a,b);this.Ka.cj(0)}w(Jr,Rp);Jr.prototype.U=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};Jr.prototype.Xy=function(){var a=this.a(),b=Ih(null,"goog-slider-thumb",a)[0];b||(b=this.Tj(),a.appendChild(b));this.na=this.sc=b};Jr.prototype.Tj=function(){var a=this.M().v("div","goog-slider-thumb");Uk(a,"button");return a};function Kr(a){Jr.call(this);this.constructor.wm=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.wc=this.constructor.wm;U.prototype.Zp.bind(this)();null!=a&&this.Th(a)}w(Kr,Jr);v("nrg.ui.Slider",Kr);Kr.ID_PREFIX="nrg.ui.Slider";Kr.CSS_SUFFIX={cE:"track",ox:"track-hovered",us:"thumb",mx:"thumb-hovered"};f=Kr.prototype;f.Xl=!1;f.Uo=!1;f.hL=function(a){this.Uo=a};f.gL=function(a){this.Uo=a};
f.n=function(a){this.o=P("div",{id:Kr.ID_PREFIX+"_Widget_"+B()});this.wb(this.o);a=null!=a?a:document.body;a.appendChild(this.o);this.od=P("div",{id:Kr.ID_PREFIX+"_Track_"+B()});this.o.appendChild(this.od);this.Hc=Lh("goog-slider-thumb",this.o);F(this,"change",this.ZI.bind(this));F(this.Hc,"mouseover",this.HJ.bind(this));F(this.Hc,"mouseout",this.GJ.bind(this));F(this.od,"mouseover",this.aK.bind(this));F(this.od,"mouseout",this.$J.bind(this));F(this,"l",this.MJ.bind(this));F(this,"m",this.JJ.bind(this));
this.Th(this.Ib().toLowerCase())};f.a=function(){return this.o};f.pH=function(){return this.od};f.jH=function(){return this.Hc};f.an=function(a){null==this.sj&&(this.sj={});if(null==this.sj[a.id]){var b=new Mp(a);b.addEventListener("mousewheel",this.xJ,!1,this);this.sj[a.id]=b}};f.cF=function(a){null==this.pj&&(this.pj={});if(null==this.pj[a.id]){var b=new Vn(a);F(b,"key",this.Nh.bind(this));this.pj[a.id]=b}};f.Nh=function(a){window.console.log("KEY",a)};
f.k=function(){var a=this.K(),a=dq(this,a);"horizontal"==this.Ib().toLowerCase()?this.Hc.style.left=a.x.toString()+"px":"vertical"==this.Ib().toLowerCase()&&(this.Hc.style.left=a.y.toString()+"px")};f.Th=function(a){Kr.d.Th.call(this,a);this.fa&&Lr(this,this.Ib().toLowerCase())};function Lr(a,b){function c(a,c){Ah(a,[tj(c,"horizontal"),tj(c,"vertical")],[c,tj(c,b)])}c(a.o,a.constructor.wc);c(a.od,Kr.CSS.cE);c(a.Hc,Kr.CSS.us)}f.Fw=!1;f.Jt=1;f.fC=function(a,b){this.Fw=a;t(b)&&(this.Jt=b)};
f.xJ=function(a){var b=Math.abs(a.Bd)<Math.abs(a.wh)?a.wh:a.Bd;this.Fw?this.J(Math.round(this.K()-b*this.Jt)):this.J(Math.round(this.K()-(0>b?-1:1)));this.dispatchEvent({type:"w"});a.preventDefault()};f.Mp=function(a){this.Wg=this.Wg?this.Wg:[];this.Wg.push(a);Mr(this)};f.bt=function(a){this.Xg=this.Xg?this.Xg:[];this.Xg.push(a);Nr(this)};f.ZI=function(a){a.stopPropagation();this.Xl&&(Or(this),Pr(this));this.Uo||this.dispatchEvent({type:"v",value:this.K(),Pu:this.qa(),Ou:this.ia()});this.Uo=!1};
function Or(a){O(a.Hc,Kr.CSS.mx);null!=a.Wg&&D(a.Wg,function(a){O(this.Hc,a)}.bind(a))}function Pr(a){O(a.od,Kr.CSS.ox);null!=a.Xg&&D(a.Xg,function(a){O(this.od,a)}.bind(a))}function Mr(a){yh(a.Hc,Kr.CSS.mx);null!=a.Wg&&D(a.Wg,function(a){yh(this.Hc,a)}.bind(a))}function Nr(a){yh(a.od,Kr.CSS.ox);null!=a.Xg&&D(a.Xg,function(a){yh(this.od,a)}.bind(a))}f.HJ=function(a){a.stopPropagation();Or(this);Pr(this)};f.aK=function(){Pr(this)};f.GJ=function(){this.Xl||(Mr(this),Nr(this))};
f.$J=function(){this.Xl||Nr(this)};f.MJ=function(){this.Xl=!0};f.JJ=function(){this.Xl=!1;Mr(this);Nr(this)};
f.f=function(){Kr.d.f.call(this);delete this.Uo;null!=this.o&&(H(this),S(this.o),delete this.o);null!=this.Hc&&(H(this.Hc),S(this.Hc),delete this.Hc);null!=this.od&&(H(this.od),S(this.od),delete this.od);null!=this.pj&&(C(this.pj,function(a){H(a);a.g()}),sb(this.pj),delete this.pj);null!=this.sj&&(C(this.sj,function(a){H(a);a.g()}),sb(this.sj),delete this.sj);null!=this.Wg&&(Ib(this.Wg),delete this.Wg);null!=this.Xg&&(Ib(this.Xg),delete this.Xg);delete this.Fw;delete this.Jt;delete this.Xl};
v("nrg.ui.Slider.EventType",{fN:"v",BM:"w"});v("nrg.ui.Slider.ID_PREFIX",Kr.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",Kr.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendSlideEvent",Kr.prototype.hL);v("nrg.ui.Slider.prototype.suspendChangeEvent",Kr.prototype.gL);v("nrg.ui.Slider.prototype.render",Kr.prototype.n);v("nrg.ui.Slider.prototype.getElement",Kr.prototype.a);v("nrg.ui.Slider.prototype.getTrack",Kr.prototype.pH);v("nrg.ui.Slider.prototype.getThumb",Kr.prototype.jH);
v("nrg.ui.Slider.prototype.bindToMouseWheel",Kr.prototype.an);v("nrg.ui.Slider.prototype.bindToArrowKeys",Kr.prototype.cF);v("nrg.ui.Slider.prototype.updateStyle",Kr.prototype.k);v("nrg.ui.Slider.prototype.setOrientation",Kr.prototype.Th);v("nrg.ui.Slider.prototype.setUseDeltaToScroll",Kr.prototype.fC);v("nrg.ui.Slider.prototype.addThumbHoverClass",Kr.prototype.Mp);v("nrg.ui.Slider.prototype.addTrackHoverClass",Kr.prototype.bt);v("nrg.ui.Slider.prototype.disposeInternal",Kr.prototype.f);function Qr(){Kr.call(this)}w(Qr,Kr);v("xiv.ui.layouts.interactors.Slider",Qr);Qr.ID_PREFIX="xiv.ui.layouts.interactors.Slider";Qr.CSS_SUFFIX={};Qr.prototype.n=function(){Qr.d.n.call(this)};Qr.prototype.f=function(){Qr.d.f.call(this)};v("xiv.ui.layouts.interactors.Slider.EventType",{});v("xiv.ui.layouts.interactors.Slider.ID_PREFIX",Qr.ID_PREFIX);v("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",Qr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Slider.prototype.render",Qr.prototype.n);
v("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",Qr.prototype.f);function Rr(){U.call(this)}w(Rr,U);v("xiv.ui.layouts.interactors.Crosshairs",Rr);Rr.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";Rr.CSS_SUFFIX={hM:"horizontal",LN:"vertical"};f=Rr.prototype;f.kg=null;f.Rf=null;f.hC=function(a){null!=a&&(this.kg.style.left=a.toString()+"px")};f.iC=function(a){null!=a&&(this.Rf.style.top=a.toString()+"px")};f.n=function(a){this.kg=Sr(this,"vertical");this.Rf=Sr(this,"horizontal");a.appendChild(this.Rf);a.appendChild(this.kg)};
f.Yo=function(a){a=!1===a?"hidden":"visible";this.kg.style.visibility=a;this.Rf.style.visibility=a};function Sr(a,b){b=b.toLowerCase();if(!pb(Rr.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return P("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.wc+"-"+b.toLowerCase()})}f.f=function(){Rr.d.f.call(this);S(this.kg);delete this.kg;S(this.Rf);delete this.Rf};v("xiv.ui.layouts.interactors.Crosshairs.EventType",{});v("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",Rr.ID_PREFIX);
v("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",Rr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",Rr.prototype.kg);v("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",Rr.prototype.Rf);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",Rr.prototype.hC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",Rr.prototype.iC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.render",Rr.prototype.n);
v("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",Rr.prototype.Yo);v("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",Rr.prototype.f);function Tr(){U.call(this)}w(Tr,U);v("xiv.ui.layouts.interactors.PlayButton",Tr);Tr.ID_PREFIX="xiv.ui.layouts.interactors.PlayButton";Tr.CSS_SUFFIX={ai:"image"};f=Tr.prototype;f.Wa=null;f.Rn=!1;f.W=null;f.ma=null;f.Sf=70;f.n=function(a){Tr.d.n.call(this,a);this.Wa=P("img",{id:"PlayButton_"+B()});O(this.Wa,Tr.CSS.ai);this.a().appendChild(this.Wa);this.Wa.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";F(this.Wa,"click",function(){this.Rn?(this.Rn=!1,this.pause()):(this.Rn=!0,this.play())}.bind(this))};
f.pause=function(){this.Wa.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";null!=this.W&&null!=this.ma&&this.ma.stop()};f.play=function(){this.Wa.src=serverRoot+"/images/viewer/xiv/ui/other/pause.png";null!=this.W&&(null==this.ma&&(this.ma=new Uf),this.ma.setInterval(this.Sf),this.ma.addEventListener(Vf,function(){this.W.K()==this.W.ia()?this.W.J(this.W.qa()):this.W.J(this.W.K()+1)}.bind(this)),this.ma.start())};f.setInterval=function(a){this.Sf=a};f.gf=function(){return this.Rn};
f.cC=function(a){this.W=a};f.f=function(){Tr.d.f.call(this);S(this.Wa);H(this.Wa);delete this.Wa;null!=this.ma&&(H(this.ma),this.ma.g());delete this.W;delete this.Rn;delete this.ma;delete this.Sf};v("xiv.ui.layouts.interactors.PlayButton.ID_PREFIX",Tr.ID_PREFIX);v("xiv.ui.layouts.interactors.PlayButton.prototype.pause",Tr.prototype.pause);v("xiv.ui.layouts.interactors.PlayButton.prototype.play",Tr.prototype.play);v("xiv.ui.layouts.interactors.PlayButton.prototype.isPlaying",Tr.prototype.gf);
v("xiv.ui.layouts.interactors.PlayButton.prototype.setInterval",Tr.prototype.setInterval);v("xiv.ui.layouts.interactors.PlayButton.prototype.setSlider",Tr.prototype.cC);function Ur(a){Wq.call(this);a=null!=a?a:nb(Vr);a=g(a)?a:[a];D(a,function(b,c){a[c]=b.toUpperCase()});Wr(this,a);Xr(this,a);null!=this.i.X&&this.me();null!=this.i.Y&&this.fg();null!=this.i.Z&&this.ej();null!=this.i.V&&this.Ko();this.k()}w(Ur,Wq);v("xiv.ui.layouts.XyzvLayout",Ur);Ur.TITLE="XyzvLayout";Ur.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var Vr={qg:"X",we:"Y",Yk:"Z",np:"V"};
Ur.CSS_SUFFIX={qg:"x",we:"y",Yk:"z",np:"v",la:"slider",ci:"slider-thumb",ts:"slider-thumb-hovered",di:"slider-track",gN:"slider-track-x",hN:"slider-track-y",iN:"slider-track-z",dM:"framenumber"};function Yr(a,b,c,d,e){this.la=a;this.Kd=b;this.Zc=c;this.Af=d;this.tj=e}f=Ur.prototype;f.yB=0;f.Sh=function(a,b){this.i[a].fm(b);var c=this.Uy(a);Vh(this.a(),c);c.style.position="absolute";this.i[a].Q().Rh(c);this.i[a].Q().update()};
f.Uy=function(a){return P("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":tj(this.constructor.wc,a.toLowerCase()+"-resizeboundary")})};function Wr(a,b){if(b.length>mb(Vr))throw Error("Invalid amount of frames "+b+". Must be "+Vr);D(b,function(a){if(!pb(Vr,a))throw Error("Invalid frame title ",a);}.bind(a))}function Xr(a,b){var c="";D(b,function(a,b){c=a.toUpperCase();this.Wx(new Vq(c));Vh(this.a(),this.i[c].a());O(this.i[c].a(),Ur.CSS[b])}.bind(a))}f.sL=function(a){a.Uv(this.zn())};
f.Uv=function(a){this.Je(function(b,c){null!=a[c]&&(b[Xq]=a[c].la,S(a[c].la.a()),b.a().appendChild(a[c].la.a()),b[Yq]=a[c].Kd,S(a[c].Kd.a()),b.a().appendChild(a[c].Kd.a()),b[$q]=a[c].Zc,b.a().appendChild(a[c].Zc.kg),b.a().appendChild(a[c].Zc.Rf))})};f.Ux=function(){this.Lv();Zr(this);$r(this);as(this);bs(this);cs(this)};f.zn=function(){var a={};this.Je(function(b,c){a[c]=new Yr(b[Xq],b[Yq],b[$q],b[Zq],b[ar])});return a};f.Iz=function(a){a=this.i[a];return new Yr(a[Xq],a[Yq],a[$q],a[Zq],a[ar])};
f.Hz=function(a,b){return this.i[a][b]};f.Ez=function(a){return this.i[a]};function Zr(a){var b;a.Je(function(a,d){b=new Kr("horizontal");b.n(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[Xq]=b;Ah(b.a(),null,[Ur.CSS.la]);Ah(b.Hc,null,[Ur.CSS.ci]);Ah(b.od,null,[Ur.CSS.di,tj(Ur.CSS.di,d.toLowerCase())]);b.Mp(Ur.CSS.ts)}.bind(a))}function $r(a){var b;a.Je(function(a){b=new mp;b.n(a.a());a[Yq]=b}.bind(a))}function as(a){var b;a.Je(function(a){b=new Ir;b.n(a.a());a[Zq]=b}.bind(a))}
function cs(a){var b;a.Je(function(a){b=new Tr;b.n(a.a());a[ar]=b}.bind(a))}function bs(a){var b;a.Je(function(a){b=new Rr;a[$q]=b;b.n(a.a());a.a().appendChild(b.Rf);a.a().appendChild(b.kg)}.bind(a))}f.Je=function(a){C(Vr,function(b){b=b.toUpperCase();null!=this.i[b]&&"V"!=b&&a(this.i[b],b)}.bind(this))};f.loop=function(a){C(Vr,function(b){b=b.toUpperCase();a(this.i[b],b)}.bind(this))};f.me=function(){null!=this.constructor.CSS&&O(this.i.X.a(),this.constructor.CSS.qg)};
f.fg=function(){null!=this.constructor.CSS&&O(this.i.Y.a(),this.constructor.CSS.we)};f.mo=function(a){this.th();var b=Oi(this.i.X.a()),c=Oi(this.i.Y.a()),d=Oi(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.u.width)};f.ej=function(){null!=this.constructor.CSS&&O(this.i.Z.a(),this.constructor.CSS.Yk)};f.Ko=function(){null!=this.constructor.CSS&&O(this.i.V.a(),this.constructor.CSS.np)};f.Ke=ea;f.vk=ea;f.pr=ea;f.or=ea;f.pe=ea;f.Qe=ea;f.qe=ea;f.Mk=ea;f.f=function(){Ur.d.f.call(this);delete this.yB};
v("xiv.ui.layouts.XyzvLayout.TITLE",Ur.TITLE);v("xiv.ui.layouts.XyzvLayout.EventType",{});v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",Ur.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",Vr);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",Ur.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",Yr);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",Ur.prototype.yB);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",Ur.prototype.Sh);
v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",Ur.prototype.Uy);v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",Ur.prototype.sL);v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",Ur.prototype.Uv);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",Ur.prototype.Ux);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",Ur.prototype.zn);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",Ur.prototype.Iz);
v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",Ur.prototype.Hz);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",Ur.prototype.Ez);v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",Ur.prototype.Je);v("xiv.ui.layouts.XyzvLayout.prototype.loop",Ur.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",Ur.prototype.me);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",Ur.prototype.fg);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",Ur.prototype.ej);
v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",Ur.prototype.Ko);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",Ur.prototype.Ke);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",Ur.prototype.vk);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",Ur.prototype.pr);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",Ur.prototype.or);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",Ur.prototype.pe);
v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",Ur.prototype.Qe);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",Ur.prototype.qe);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",Ur.prototype.Mk);v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",Ur.prototype.f);function ds(){Ur.call(this,["X","Y","Z"])}w(ds,Ur);v("xiv.ui.layouts.TwoDWidescreen",ds);ds.TITLE="TwoDWidescreen";ds.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";ds.CSS_SUFFIX={qg:"x",we:"y",Yk:"z"};f=ds.prototype;f.me=function(){ds.d.me.call(this);this.Sh("X",["RIGHT"]);F(this.i.X.Q(),"resize",this.Ke.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};f.fg=function(){ds.d.fg.call(this);this.Sh("Y",["BOTTOM"]);F(this.i.Y.Q(),"resize",this.vk.bind(this));F(this.i.Y.Q(),"resize_end",this.k.bind(this))};
f.Ke=function(){this.mo(function(a){var b=a.width,c=Math.max(this.u.width-a.width,this.lb);D(["Y","Z"],function(a){this.i[a].a().style.left=b+"px";this.i[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.Bg()};f.vk=function(){this.mo(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.u.height-c;this.i.Z.a().style.top=c+"px";this.i.Z.a().style.height=d+"px"}.bind(this));this.Bg()};f.k=function(){ds.d.k.call(this);this.so();this.pe();this.qe();this.Qe()};
f.so=function(){if(this.ja.width!==this.u.width||this.ja.height!==this.u.height){var a=1-(this.ja.height-this.u.height)/this.ja.height,b=1-(this.ja.width-this.u.width)/this.ja.width;this.Je(function(c){frameSize=Oi(c.a());c.a().style.width=Math.max(frameSize.width*b,this.lb).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.Wc).toString()+"px"}.bind(this))}};
f.pe=function(){var a=this.i.X;a.a().style.height=this.u.height.toString()+"px";ok(a.Q().hd(),{left:this.lb,width:this.u.width-2*this.lb});var b=a.Q().jd("RIGHT");b.style.left=a.a().style.width;Ni(b,this.u.height);a.Q().update()};f.qe=function(){var a=this.i.Y;a.a().style.left=this.i.X.a().style.width;ok(a.Q().hd(),{top:this.Wc,height:this.u.height-2*this.Wc});var b=a.Q().jd("BOTTOM");b.style.top=a.a().style.height;Mi(b,parseInt(a.a().style.width));a.Q().update()};
f.Qe=function(){var a=this.i.Z;a.a().style.left=this.i.X.a().style.width;a.a().style.top=this.i.Y.a().style.height;a.a().style.height=this.u.height-parseInt(this.i.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",ds.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",ds.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",ds.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",ds.prototype.me);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",ds.prototype.fg);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",ds.prototype.Ke);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",ds.prototype.vk);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",ds.prototype.k);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",ds.prototype.pe);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",ds.prototype.qe);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",ds.prototype.Qe);function es(a){Ur.call(this,a)}w(es,Ur);v("xiv.ui.layouts.SingleFrameLayout",es);es.TITLE="SingleFrameLayout";es.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";es.prototype.so=function(){if(this.ja.width!==this.u.width||this.ja.height!==this.u.height){var a=this.ja.height*(1-(this.ja.height-this.u.height)/this.ja.height),b=this.ja.width*(1-(this.ja.width-this.u.width)/this.ja.width);this.loop(function(c){null!=c&&Li(c.a(),Math.max(b,this.lb),Math.max(a,this.Wc))}.bind(this))}};
es.prototype.k=function(){es.d.k.call(this);this.so()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",es.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",es.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",es.prototype.k);function fs(){Ur.call(this,"V");O(this.i.V.a(),tj(Vq.wc,this.constructor.TITLE))}w(fs,es);v("xiv.ui.layouts.ThreeD",fs);fs.TITLE="ThreeD";fs.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",fs.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",fs.ID_PREFIX);function hs(){Ur.call(this,"X");O(this.i.X.a(),tj(Vq.wc,this.constructor.TITLE.toLowerCase()))}w(hs,es);v("xiv.ui.layouts.Sagittal",hs);hs.TITLE="Sagittal";hs.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",hs.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",hs.ID_PREFIX);function is(){Ur.call(this)}w(is,Ur);v("xiv.ui.layouts.Conventional",is);is.TITLE="Conventional";is.ID_PREFIX="xiv.ui.layouts.Conventional";is.CSS_SUFFIX={qg:"x",we:"y",Yk:"z",np:"v",$N:"v-boundary"};f=is.prototype;f.me=function(){is.d.me.call(this);this.Sh("X",["RIGHT","TOP_RIGHT"]);F(this.i.X.Q(),"resize",this.Ke.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};f.fg=function(){is.d.fg.call(this)};
f.ej=function(){is.d.ej.call(this);this.Sh("Z",["RIGHT","TOP_RIGHT"]);F(this.i.Z.Q(),"resize",this.pr.bind(this));F(this.i.Z.Q(),"resize_end",this.k.bind(this))};f.Ko=function(){is.d.Ko.call(this);this.Sh("V","BOTTOM");F(this.i.V.Q(),"resize",this.or.bind(this));F(this.i.V.Q(),"resize_end",this.k.bind(this))};function js(a,b){a.th();var c=Oi(a.i.X.a()),d=Oi(a.i.Y.a()),e=Oi(a.i.Z.a());b(c,d,e)}
f.Ke=function(){js(this,function(a,b,c){var d=Math.max(this.u.width-a.width-c.width,this.lb),e=c.width,h=this.u.height-a.height;this.lb==d&&(e=Math.max(this.u.width-a.width-b.width,this.lb),yi(this.i.X.a(),e,h));yi(this.i.Z.a(),0,h);Li(this.i.Z.a(),e,a.height);yi(this.i.Y.a(),c.width+a.width,h);Li(this.i.Y.a(),d,a.height);Li(this.i.V.a(),this.u.width,this.u.height-a.height)}.bind(this));this.Bg()};
f.pr=function(){js(this,function(a,b,c){var d=Math.max(this.u.width-c.width-b.width,this.lb),e=b.width,h=this.u.height-c.height;this.lb==d&&(e=Math.max(this.u.width-c.width-a.width,this.lb));yi(this.i.X.a(),c.width,h);Li(this.i.X.a(),d,c.height);yi(this.i.Y.a(),c.width+d,h);Li(this.i.Y.a(),e,b.height);Li(this.i.V.a(),this.u.width,this.u.height-c.height)}.bind(this));this.Bg()};
f.or=function(){this.th();var a=parseInt(this.i.V.a().style.height),b=this.u.height-a;C(this.i,function(c){c!==this.i.V&&ok(c.a(),{top:a,height:b})}.bind(this));this.pe();this.qe();this.Bg()};f.k=function(){is.d.k.call(this);this.Mk();this.Dw();this.Ew();this.pe();this.qe();this.Qe()};f.Dw=function(){var a=parseInt(this.i.V.a().style.height),b=Math.max(this.u.height-a,this.Wc);this.Je(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};
f.Ew=function(){var a,b=1-(this.ja.width-this.u.width)/this.ja.width;this.ja.width!==this.u.width&&this.Je(function(c){a=Oi(c.a());c.a().style.width=Math.max(a.width*b,this.lb).toString()+"px"}.bind(this))};
function ks(a,b){var c=a.i.V.Q().Jl("BOTTOM"),d=a.i[b].Q().hd(),e=Ai(a.i[b].a()),h=Oi(a.i[b].a());yi(d,parseInt(d.style.left),a.Wc);Li(d,a.u.width-3*a.lb,a.u.height-2*a.Wc);d=a.i[b].Q().jd("RIGHT");yi(d,e.x+h.width,e.y);Ni(d,a.u.height-c.Va.y);yi(a.i[b].Q().jd("TOP_RIGHT"),e.x+h.width,e.y);a.i[b].Q().update()}f.pe=function(){this.i.X.a().style.left=this.i.Z.a().style.width;ok(this.i.X.Q().hd(),{left:2*this.lb});ks(this,"X")};
f.qe=function(){this.i.Y.a().style.left=(parseInt(this.i.Z.a().style.width)+parseInt(this.i.X.a().style.width)).toString()+"px"};f.Qe=function(){ok(this.i.Z.Q().hd(),{left:this.lb});ks(this,"Z")};
f.Mk=function(){if(this.ja.width!==this.u.width||this.ja.height!==this.u.height){var a=Oi(this.i.V.a());Li(this.i.V.a(),this.u.width,Math.max(a.height*(1-(this.ja.height-this.u.height)/this.ja.height),this.Wc))}yi(this.i.V.Q().hd(),this.u.width,this.Wc);Li(this.i.V.Q().hd(),this.u.width-3*this.lb,this.u.height-2*this.Wc);a=this.i.V.Q().jd("BOTTOM");yi(a,0,Oi(this.i.V.a()).height);Mi(a,this.u.width);this.i.V.Q().update()};v("xiv.ui.layouts.Conventional.TITLE",is.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",is.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",is.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",is.prototype.me);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",is.prototype.fg);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",is.prototype.ej);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",is.prototype.Ko);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Z",is.prototype.pr);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",is.prototype.Ke);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",is.prototype.or);v("xiv.ui.layouts.Conventional.prototype.updateStyle",is.prototype.k);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",is.prototype.pe);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",is.prototype.qe);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",is.prototype.Qe);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",is.prototype.Mk);function ls(){Ur.call(this,"Z");O(this.i.Z.a(),tj(Vq.wc,this.constructor.TITLE))}w(ls,es);v("xiv.ui.layouts.Transverse",ls);ls.TITLE="Transverse";ls.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",ls.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",ls.ID_PREFIX);function ms(){Ur.call(this)}w(ms,Ur);v("xiv.ui.layouts.FourUp",ms);ms.TITLE="Four-Up";ms.ID_PREFIX="xiv.ui.layouts.FourUp";ms.CSS_SUFFIX={qg:"x",we:"y",Yk:"z",np:"v"};f=ms.prototype;f.me=function(){ms.d.me.call(this);this.Sh("X",["RIGHT","TOP","TOP_RIGHT"]);F(this.i.X.Q(),"resize",this.Ke.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};
f.Ke=function(){var a=Ai(this.i.X.a()),b=Oi(this.i.X.a());yi(this.i.Y.a(),b.width,a.y);Li(this.i.Y.a(),this.u.width-b.width,b.height);yi(this.i.Z.a(),0,0);Li(this.i.Z.a(),b.width,a.y);yi(this.i.V.a(),b.width,0);Li(this.i.V.a(),this.u.width-b.width,a.y);a=this.i.X.Q().Jl("RIGHT").jd();a.style.top="0px";a.style.height=this.u.height.toString()+"px";this.Bg()};f.k=function(){ms.d.k.call(this);this.so();this.Qe();this.Mk();this.pe();this.qe()};
f.so=function(){if(this.ja.width!==this.u.width||this.ja.height!==this.u.height){var a=this.ja.height*(1-(this.ja.height-this.u.height)/this.ja.height)/2,b=this.ja.width*(1-(this.ja.width-this.u.width)/this.ja.width)/2;this.loop(function(c){Li(c.a(),Math.max(b,this.lb),Math.max(a,this.Wc))}.bind(this))}};
f.pe=function(){this.i.X.a().style.top=this.i.Z.a().style.height;yi(this.i.X.Q().hd(),this.lb,this.Wc);Li(this.i.X.Q().hd(),this.u.width-2*this.lb,this.u.height-2*this.Wc);var a=this.i.X.Q().Jl("TOP").jd();a.style.left="0px";a.style.width=this.u.width.toString()+"px";this.i.X.Q().update();a=this.i.X.Q().Jl("RIGHT").jd();a.style.top="0px";a.style.height=this.u.height.toString()+"px"};f.qe=function(){this.i.Y.a().style.left=this.i.Z.a().style.width;this.i.Y.a().style.top=this.i.Z.a().style.height};
f.Qe=function(){};f.Mk=function(){this.i.V.a().style.left=this.i.Z.a().style.width};f.f=function(){ms.d.f.call(this)};v("xiv.ui.layouts.FourUp.TITLE",ms.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",ms.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",ms.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",ms.prototype.me);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",ms.prototype.Ke);v("xiv.ui.layouts.FourUp.prototype.updateStyle",ms.prototype.k);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",ms.prototype.pe);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",ms.prototype.qe);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",ms.prototype.Qe);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",ms.prototype.Mk);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",ms.prototype.f);function ns(){Ur.call(this,["X","Y","Z"])}w(ns,Ur);v("xiv.ui.layouts.TwoDRow",ns);ns.TITLE="TwoDRow";ns.ID_PREFIX="xiv.ui.layouts.TwoDRow";ns.CSS_SUFFIX={qg:"x",we:"y",Yk:"z"};f=ns.prototype;f.me=function(){ns.d.me.call(this);this.Sh("X",["RIGHT"]);F(this.i.X.Q(),"resize",this.Ke.bind(this));F(this.i.X.Q(),"resize_end",this.k.bind(this))};f.fg=function(){ns.d.fg.call(this);this.Sh("Y",["RIGHT"]);F(this.i.Y.Q(),"resize",this.vk.bind(this));F(this.i.Y.Q(),"resize_end",this.k.bind(this))};f.ej=function(){ns.d.ej.call(this)};
f.mo=function(a){this.th();var b=Oi(this.i.X.a()),c=Oi(this.i.Y.a()),d=Oi(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.u.width)};f.Ke=function(){this.mo(function(a,b,c){b=Math.max(this.u.width-a.width-c.width,this.lb);var d=this.u.height-a.height;yi(this.i.Y.a(),a.width,d);Li(this.i.Y.a(),b,a.height);yi(this.i.Z.a(),a.width+b,d);Li(this.i.Z.a(),c.width,a.height)}.bind(this));this.Bg()};
f.vk=function(){this.mo(function(a,b){var c=this.u.height-b.height;yi(this.i.X.a(),0,c);Li(this.i.X.a(),a.width,b.height);yi(this.i.Z.a(),a.width+b.width,c);Li(this.i.Z.a(),this.u.width-a.width-b.width,b.height)}.bind(this));this.Bg()};f.k=function(){ns.d.k.call(this);this.Ew();this.Dw();this.pe();this.qe();this.Qe()};f.Dw=function(){var a=this.u.height.toString()+"px";this.Je(function(b){b.a().style.height=a})};
f.Ew=function(){var a,b=1-(this.ja.width-this.u.width)/this.ja.width;this.ja.width!==this.u.width&&this.Je(function(c){a=Oi(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.lb).toString()+"px"}.bind(this))};function os(a,b){var c=a.i[b].Q().hd(),d=Ai(a.i[b].a()),e=Oi(a.i[b].a());yi(c,parseInt(c.style.left),a.Wc);Li(c,a.u.width-3*a.lb,a.u.height-2*a.Wc);c=a.i[b].Q().jd("RIGHT");yi(c,d.x+e.width,d.y);Ni(c,a.u.height);a.i[b].Q().update()}
f.pe=function(){ok(this.i.X.Q().hd(),{left:this.lb});os(this,"X")};f.qe=function(){this.i.Y.a().style.left=this.i.X.a().style.width;ok(this.i.Y.Q().hd(),{left:2*this.lb});os(this,"Y")};f.Qe=function(){this.i.Z.a().style.left=(parseInt(this.i.X.a().style.width)+parseInt(this.i.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",ns.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",ns.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",ns.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",ns.prototype.me);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",ns.prototype.fg);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",ns.prototype.ej);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",ns.prototype.Ke);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",ns.prototype.vk);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",ns.prototype.k);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",ns.prototype.pe);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",ns.prototype.qe);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",ns.prototype.Qe);function ps(){Ur.call(this,"Y");O(this.i.Y.a(),tj(Vq.wc,this.constructor.TITLE.toLowerCase()))}w(ps,es);v("xiv.ui.layouts.Coronal",ps);ps.TITLE="Coronal";ps.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",ps.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",ps.ID_PREFIX);function qs(){U.call(this);this.constructor.bx={};this.constructor.bx[ms.TITLE]=ms;this.constructor.bx[is.TITLE]=is;this.Uk={};this.$i={};this.Yh={}}w(qs,U);v("xiv.ui.layouts.LayoutHandler",qs);qs.ID_PREFIX="xiv.ui.layouts.LayoutHandler";qs.CSS_SUFFIX={};f=qs.prototype;f.ob=null;f.Ed=null;f.Bu=!1;f.ui=null;f.oe=null;f.uy=!0;f.sI=function(){return this.Bu};f.VE=function(a){this.uy=a};f.xz=function(){return this.ob[this.Rc]};f.yz=function(a){return this.ob[this.Rc].cu(a)};
f.cp=function(){null!=this.Ed&&this.Ed.cp()};f.du=function(){return null!=this.Ed?this.Ed.zn():null};f.EG=function(a){return null!=this.Ed?this.Ed.Iz(a):null};f.DG=function(a){return null!=this.Ed?this.Ed.Ez(a):null};f.Mz=function(a,b){return null!=this.Ed?this.Ed.Hz(a,b):null};f.QB=function(a){this.Ik(a);null!=this.Ed&&this.Ed.Lv();this.ob[a].Ux();this.Ed=this.ob[a]};f.Vx=function(a,b){if(void 0 in this.Uk)throw Error(a+" is an already used layout title!");b&&(this.Uk[a]=b)};
f.Ik=function(a,b){if(!(a in this.Uk))throw Error("Invalid layout: "+a+"!");null==this.ob&&(this.ob={});a in this.ob||(this.ob[a]=new this.Uk[a],F(this.ob[a],"q",this.qr.bind(this)),rs(this.ob[a]),Vh(this.a(),this.ob[a].a()));this.zr=this.Rc;this.Rc=a;this.wC(!1===b?0:500)};function ss(a){var b;C(a.ob[a.Rc].i,function(a,d){b=this.Mz(d,Xq);null!=b&&null==a[ts]&&(b.an(a.a()),a[ts]=!0)}.bind(a))}f.qr=function(){this.dispatchEvent({type:"A"})};
f.wC=function(a){a=t(a)&&0<=a?a:500;this.zr==this.Rc?ss(this):this.zr?this.uy?us(this,a):us(this,0):(vs(this,this.Rc),ws(this,this.Rc))};function xs(a,b,c){D(Yh(b.a()),function(a){null!=this.$i[c]||(this.$i[c]=[]);this.$i[c].push(a)}.bind(a))}function ys(a){C(a.Yh,function(a){Vh(this.a().parentNode,a)}.bind(a))}function zs(a,b){var c=[];C(a.Yh,function(a,e){c=Lb(c,Hk(a,this.ui[e],this.oe[e],b))}.bind(a));return c}
function us(a,b){var c=a.ob[a.Rc].i,d;vs(a,a.Rc);ws(a,a.Rc);null!=a.ui&&sb(a.ui);null!=a.oe&&sb(a.oe);a.ui={};a.oe={};C(a.ob[a.zr].i,function(a,b){d=a.a().cloneNode(!1);this.Yh[b]=d;xs(this,a,b);C(this.$i,function(a,b){D(a,function(a){S(a);null!=this.Yh[b]&&this.Yh[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Gk(a.a(),c[b].a());this.ui[b]=k.ZE;this.oe[b]=k.pL}else this.ui[b]={"z-index":0},this.oe[b]={opacity:0}}.bind(a));ys(a);Ik(zs(a,b),a.nv.bind(a),a.pv.bind(a),a.mv.bind(a))}
f.nv=function(){this.mA();this.Bu=!0;this.dispatchEvent({type:"x",xw:this.Yh})};var ts=B();f=qs.prototype;f.pv=function(){this.dispatchEvent({type:"z",xw:this.Yh})};
f.mv=function(){var a=this.ob[this.Rc].i;C(a,function(a,c){null!=this.$i[c]&&D(this.$i[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.oe[c]&&ok(a.a(),this.oe[c])}.bind(this));this.ob[this.Rc]!==this.Ed&&this.ob[this.Rc].Uv(this.du());As(this);this.Bu=!1;vs(this,this.Rc);ws(this,this.Rc);Bs(this);this.dispatchEvent({type:"y",frames:a});ss(this);this.k()};function ws(a,b){a.ob[b].a().style.opacity=1;a.ob[b].k()}
function vs(a,b){a.ob[b].a().style.visibility="visible";a.ob[b].k()}f.mA=function(){C(this.ob,function(a){a.a().style.visibility="hidden";a.k()}.bind(this))};function As(a){C(a.Yh,function(a){S(a);delete a})}function rs(a){C(a.i,function(a){F(a.a(),"dblclick",function(){})})}f.kJ=function(a){this.QO.push(a)};f.k=function(){qs.d.k.call(this);this.ob[this.Rc].k()};
function Bs(a){null!=a.ui&&(C(a.ui,function(a){sb(a)}),sb(a.oe),delete a.oe);null!=a.oe&&(C(a.oe,function(a){sb(a)}),sb(a.oe),delete a.oe)}f.f=function(){qs.d.f.call(this);Bs(this);delete this.Yh;sb(this.$i);delete this.$i;delete this.Ed;this.qn(this.ob);delete this.ob;sb(this.Uk);delete this.Uk;delete this.Rc;delete this.zr};v("xiv.ui.layouts.LayoutHandler.EventType",{rM:"x",qM:"y",sM:"z",ss:"A"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",qs.ID_PREFIX);
v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",qs.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",ts);v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",qs.prototype.sI);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",qs.prototype.VE);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",qs.prototype.xz);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",qs.prototype.yz);
v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",qs.prototype.cp);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",qs.prototype.du);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",qs.prototype.EG);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",qs.prototype.DG);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",qs.prototype.Mz);v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",qs.prototype.QB);
v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",qs.prototype.Vx);v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",qs.prototype.Ik);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",qs.prototype.wC);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",qs.prototype.mA);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",qs.prototype.kJ);v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",qs.prototype.k);
v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",qs.prototype.f);function Cs(a,b){this.x=a;this.y=b}w(Cs,N);f=Cs.prototype;f.clone=function(){return new Cs(this.x,this.y)};f.Vf=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=N.prototype.scale;f.xb=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.Vf())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.uc=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.Bl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function Ds(){Bq.call(this);this.eg("Display All");this.Tp=P("div",{id:"CheckboxHodler_"+B()});O(this.Tp,Ds.CSS.ZC);this.Pj=new zq(!0);this.Pj.wb(this.Tp);this.bj(this.Pj);F(this.Pj,"change",this.fc.bind(this))}w(Ds,Bq);v("xiv.ui.ctrl.CheckboxController",Ds);Ds.ID_PREFIX="xiv.ui.ctrl.CheckboxController";Ds.CSS_SUFFIX={ZC:"checkboxholder"};Ds.prototype.of=function(a){this.A.of(a);this.fc()};Ds.prototype.fc=function(){this.dispatchEvent({type:"p",checked:this.Pj.Fh()})};
Ds.prototype.f=function(){Ds.d.f.call(this);S(this.Tp);delete this.Tp;H(this.Pj);this.Pj.g();delete this.Pj};v("xiv.ui.ctrl.CheckboxController.ID_PREFIX",Ds.ID_PREFIX);v("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",Ds.CSS_SUFFIX);v("xiv.ui.ctrl.CheckboxController.prototype.setChecked",Ds.prototype.of);v("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",Ds.prototype.fc);v("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",Ds.prototype.f);function Es(){U.call(this);this.Wa=P("img",{id:"nrg.ui.Thumbnail_"+B()});Vh(this.a(),this.Wa);this.Oe=P("div",{id:"DisplayText_"+B()});Vh(this.a(),this.Oe);this.Sr();this.a().className=Es.wc;this.Wa.className=Es.CSS.ai;this.Oe.className=Es.CSS.Vk;Fs(this,!0);this.ko()}w(Es,U);v("nrg.ui.Thumbnail",Es);Es.ID_PREFIX="nrg.ui.Thumbnail";
Es.CSS_SUFFIX={ai:"image",Vk:"text",aN:"selected",ip:"mouseover",ax:"image-mouseover",kx:"text-mouseover",Zw:"highlight",mj:"active",$w:"image-active",jx:"text-active",kD:"hoverclone"};f=Es.prototype;f.Dy=null;f.ic=null;f.Oq=!1;f.sG=function(){return this.Wa};f.EB=function(a,b){this.Dy=a;this.Wa.onerror=function(){this.Wa.onerror="";this.Wa.src=this.Dy;null!=b&&b()}.bind(this)};f.hH=function(){return this.Oe};f.hu=function(){for(var a=this.Oe;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
f.df=function(){return this.ic=this.ic?this.ic:this.a()};f.Kg=function(){return this.Oq};f.Tv=function(a){this.Wa.src=a;this.Wa.className=Es.CSS.ai};f.Go=function(a){this.Oe.innerHTML=a};f.tB=function(){this.ic&&(this.ic.parentNode&&(this.ic=this.ic.parentNode.removeChild(this.ic)),delete this.ic,this.ic=null)};
f.mn=function(a,b){this.tB();Fs(this,!1);this.ic=b?b:this.a().cloneNode(!0);this.ic.setAttribute("id","HOVERABLE_"+this.a().getAttribute("id"));this.ic.style.visibility="hidden";O(this.ic,Es.CSS.kD);Fs(this,!0);a&&a.appendChild(this.ic);this.Sr()};f.setActive=function(a,b){var c=this.a();(this.Oq=a)?(b&&O(c,Es.CSS.Zw),O(c,Es.CSS.mj),O(this.Oe,Es.CSS.jx),O(this.Wa,Es.CSS.$w)):(yh(c,Es.CSS.Zw),yh(c,Es.CSS.mj),yh(this.Oe,Es.CSS.jx),yh(this.Wa,Es.CSS.$w))};f.k=function(a){a&&this.a()&&ok(this.a(),a)};
f.Mv=function(){var a=this.a(),b=this.df();if(b!==a){var c=di(a,b),c=Hi(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;ok(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.rr=function(){var a=this.df();O(a,Es.CSS.ip);O(a.childNodes[1],Es.CSS.kx);O(a.childNodes[0],Es.CSS.ax);a!==this.a()&&this.Mv();this.dispatchEvent("B")};
f.ko=function(){var a=this.df();a&&1<a.childNodes.length&&(yh(a,Es.CSS.ip),yh(a.childNodes[1],Es.CSS.kx),yh(a.childNodes[0],Es.CSS.ax),a.style.visibility=a!==this.a()?"hidden":"visible");this.dispatchEvent("C")};function Fs(a,b){var c=a.df();b?(F(c,"mouseover",a.rr.bind(a)),F(c,"mouseout",a.ko.bind(a))):(Sc(c,"mouseover",a.rr.bind(a)),Sc(c,"mouseout",a.ko.bind(a)))}f.Sr=function(){Uc(this.df(),"D")&&Tc("D");F(this.df(),"click",function(){this.dispatchEvent({type:"D"})}.bind(this))};
f.f=function(){Es.d.f.call(this);H(this);H(this.a());null!=this.ic&&(H(this.ic),S(this.ic),delete this.ic);S(this.Wa);delete this.Wa;S(this.Oe);delete this.Oe;delete this.jO;delete this.Oq};v("nrg.ui.Thumbnail.EventType",{ip:"B",ED:"C",NL:"D"});v("nrg.ui.Thumbnail.ID_PREFIX",Es.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",Es.CSS_SUFFIX);v("nrg.ui.Thumbnail.HOVERABLE_PREFIX","HOVERABLE_");v("nrg.ui.Thumbnail.prototype.getImage",Es.prototype.sG);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",Es.prototype.EB);
v("nrg.ui.Thumbnail.prototype.getTextElement",Es.prototype.hH);v("nrg.ui.Thumbnail.prototype.getText",Es.prototype.hu);v("nrg.ui.Thumbnail.prototype.getHoverable",Es.prototype.df);v("nrg.ui.Thumbnail.prototype.isActive",Es.prototype.Kg);v("nrg.ui.Thumbnail.prototype.setImage",Es.prototype.Tv);v("nrg.ui.Thumbnail.prototype.setText",Es.prototype.Go);v("nrg.ui.Thumbnail.prototype.removeHoverable",Es.prototype.tB);v("nrg.ui.Thumbnail.prototype.createHoverable",Es.prototype.mn);
v("nrg.ui.Thumbnail.prototype.setActive",Es.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",Es.prototype.k);v("nrg.ui.Thumbnail.prototype.repositionHoverable",Es.prototype.Mv);v("nrg.ui.Thumbnail.prototype.onMouseOver",Es.prototype.rr);v("nrg.ui.Thumbnail.prototype.onMouseOut",Es.prototype.ko);v("nrg.ui.Thumbnail.prototype.disposeInternal",Es.prototype.f);function Gs(){U.call(this)}w(Gs,U);v("nrg.ui.ScrollableContainer",Gs);Gs.ID_PREFIX="nrg.ui.ScrollableContainer";Gs.CSS_SUFFIX={VD:"scrollarea",la:"slider",ci:"slider-thumb",di:"slider-track",ts:"slider-thumb-hovered",YD:"slider-track-hovered"};f=Gs.prototype;
f.n=function(a){Gs.d.n.call(this,a);null==this.cg&&(this.cg=P("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":Gs.CSS.VD}),this.a().appendChild(this.cg));this.Ya=new Kr("vertical");this.Ya.n(this.a());F(this.Ya,"v",this.Vc.bind(this));this.Ya.an(this.a());O(this.Ya.a(),Gs.CSS.la);O(this.Ya.Hc,Gs.CSS.ci);O(this.Ya.od,Gs.CSS.di);this.Ya.Mp(Gs.CSS.ts);this.Ya.bt(Gs.CSS.YD);this.k();this.Vc()};f.Xe=function(a){this.fa||this.n();Vh(this.cg,a);this.Vc()};f.a=function(){return this.o};
f.dH=function(){return this.Ya};f.$G=function(){return this.cg};f.k=function(a){a&&ok(this.o,a)};f.Vc=function(){var a=Oi(this.o).height,b=Oi(this.cg).height,c=[this.Ya.qa(),this.Ya.ia()],d=[0,b-a];a<b?(this.Ya.a().style.opacity=1,ok(this.Ya.Hc,{height:a/b*a}),this.Ya.lc(!0),a=this.Ya.ia()-this.Ya.K(),c=gk(a,c,d).remappedVal,ok(this.cg,{top:-c})):(this.Ya.a().style.opacity=0,this.Ya.lc(!1),this.Ya.J(100))};
f.f=function(){Gs.d.f.call(this);null!=this.Ya&&(H(this.Ya),this.Ya.g(),delete this.Ya);null!=this.cg&&(S(this.cg),delete this.cg)};v("nrg.ui.ScrollableContainer.ID_PREFIX",Gs.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",Gs.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",Gs.prototype.n);v("nrg.ui.ScrollableContainer.prototype.addContents",Gs.prototype.Xe);v("nrg.ui.ScrollableContainer.prototype.getElement",Gs.prototype.a);
v("nrg.ui.ScrollableContainer.prototype.getSlider",Gs.prototype.dH);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",Gs.prototype.$G);v("nrg.ui.ScrollableContainer.prototype.updateStyle",Gs.prototype.k);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",Gs.prototype.Vc);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",Gs.prototype.f);function Hs(){U.call(this)}w(Hs,Gs);v("nrg.ui.ScrollableZippyTree",Hs);Hs.ID_PREFIX="nrg.ui.ScrollableZippyTree";Hs.CSS_SUFFIX={qE:"zippytree"};f=Hs.prototype;f.n=function(a){Hs.d.n.call(this,a);this.oa=new iq;O(this.oa.a(),Hs.CSS.qE);this.cg.appendChild(this.oa.a());this.Jo();this.Ya.fC(!0,.3)};f.Xe=function(a,b){this.oa.Xe(a,b);a=g(a)?a:[a];D(a,function(){}.bind(this));this.Ya.an(this.oa.a())};f.Dl=function(){this.oa.Dl()};f.gn=function(){this.oa.gn()};f.Sb=function(a,b){this.oa.Sb(a,b)};f.CH=function(){return this.oa};
f.OE=function(a){this.oa.kn(a);this.Vc()};f.Jo=function(){F(this.oa,"n",this.Vc.bind(this));F(this.oa,"a",this.Vc.bind(this));F(this.oa,"b",this.Vc.bind(this));F(this.oa,rl.GD,this.Vc.bind(this))};f.k=function(a){a&&ok(this.a(),a)};f.f=function(){Hs.d.f.call(this);null!=this.oa&&(H(this.oa),this.oa.g(),delete this.oa)};v("nrg.ui.ScrollableZippyTree.EventType",{});v("nrg.ui.ScrollableZippyTree.ID_PREFIX",Hs.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",Hs.CSS_SUFFIX);
v("nrg.ui.ScrollableZippyTree.prototype.render",Hs.prototype.n);v("nrg.ui.ScrollableZippyTree.prototype.addContents",Hs.prototype.Xe);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",Hs.prototype.Dl);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",Hs.prototype.gn);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",Hs.prototype.Sb);v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",Hs.prototype.CH);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",Hs.prototype.OE);
v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",Hs.prototype.Jo);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",Hs.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",Hs.prototype.f);function Is(){$c.call(this);this.s="shaders";this.Hp="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Hp=a+="}\n";this.wp="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.wp=a+="}\n"}
w(Is,$c);
var Js={IN:"vertexPosition",HN:"vertexNormal",GN:"vertexColor",KN:"vertexTexturePos",JN:"vertexScalar"},Ks={MN:"view",JM:"perspective",KL:"center",GM:"objectTransform",CN:"useObjectColor",EM:"objectColor",EN:"useScalars",ZM:"scalarsReplaceMode",WM:"scalarsMin",TM:"scalarsMax",XM:"scalarsMinColor",UM:"scalarsMaxColor",YM:"scalarsMinThreshold",VM:"scalarsMaxThreshold",SM:"scalarsInterpolation",KM:"pointSize",FM:"objectOpacity",DM:"normal",DN:"usePicking",FN:"useTexture",BN:"useLabelMapTexture",pM:"labelmapOpacity",
oM:"labelmapColor",oN:"textureSampler",pN:"textureSampler2",QN:"volumeLowerThreshold",XN:"volumeUpperThreshold",UN:"volumeScalarMin",SN:"volumeScalarMax",VN:"volumeScalarMinColor",TN:"volumeScalarMaxColor",ZN:"volumeWindowLow",YN:"volumeWindowHigh",WN:"volumeTexture"};
function Ls(a){var b=Object.keys(Ks);if(!Object.keys(Js).every(function(a){a=Js[a];return-1!=this.Hp.search(a)||-1!=this.wp.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Ks[a];return-1!=this.Hp.search(a)||-1!=this.wp.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Ms(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");$c.call(this);this.s="buffer";this.rb=a;this.hi=b;this.ii=c}w(Ms,$c);function Ns(a,b){this.xt=a instanceof N?a:new N(a,b)}w(Ns,Oo);Ns.prototype.je=function(a,b,c,d){uo(Bi(a),0,a,b,this.xt,c,null,d)};function Os(a,b){this.oK=4;this.Hv=b||void 0;rm.call(this,a)}w(Os,rm);Os.prototype.Xv=function(a){this.Hv=a||void 0;this.xa()&&this.je()};Os.prototype.je=function(){if(this.Hv){var a=!this.xa()&&"move_offscreen"!=this.rm,b=this.a();a&&(b.style.visibility="hidden",Si(b,!0));this.Hv.je(b,this.oK,this.GO);a&&Si(b,!1)}};function Ps(a,b,c){this.jb=c||(a?Eh(Hh(a)):Eh());Os.call(this,this.jb.v("div",{style:"position:absolute;display:none;"}));this.Dt=new N(1,1);this.ak=new ig;a&&this.sl(a);null!=b&&this.Go(b)}w(Ps,Os);var Qs=[];f=Ps.prototype;f.Vd=null;f.className="goog-tooltip";f.mC=500;f.TH=0;f.M=function(){return this.jb};f.sl=function(a){a=Hh(a);this.ak.add(a);F(a,"mouseover",this.lk,!1,this);F(a,"mouseout",this.Cq,!1,this);F(a,"mousemove",this.cA,!1,this);F(a,"focus",this.jk,!1,this);F(a,"blur",this.Cq,!1,this)};
f.detach=function(a){if(a)a=Hh(a),Rs(this,a),this.ak.remove(a);else{for(var b=this.ak.gk(),c=0;a=b[c];c++)Rs(this,a);this.ak.clear()}};function Rs(a,b){Sc(b,"mouseover",a.lk,!1,a);Sc(b,"mouseout",a.Cq,!1,a);Sc(b,"mousemove",a.cA,!1,a);Sc(b,"focus",a.jk,!1,a);Sc(b,"blur",a.Cq,!1,a)}f.Go=function(a){ei(this.a(),a)};f.Rv=function(a){var b=this.a();b&&S(b);Ps.d.Rv.call(this,a);a&&(b=this.jb.pa.body,b.insertBefore(a,b.lastChild))};f.hu=function(){return ki(this.a())};
f.Kl=function(){return this.fj?this.xa()?4:1:this.In?3:this.xa()?2:0};f.cv=function(){if(!rm.prototype.cv.call(this))return!1;if(this.anchor)for(var a,b=0;a=Qs[b];b++)ci(a.a(),this.anchor)||a.aa(!1);Jb(Qs,this);a=this.a();a.className=this.className;Ss(this);F(a,"mouseover",this.jA,!1,this);F(a,"mouseout",this.iA,!1,this);Ts(this);return!0};
f.kv=function(){Kb(Qs,this);for(var a=this.a(),b,c=0;b=Qs[c];c++)b.anchor&&ci(a,b.anchor)&&b.aa(!1);this.iB&&Us(this.iB);Sc(a,"mouseover",this.jA,!1,this);Sc(a,"mouseout",this.iA,!1,this);this.anchor=void 0;0==this.Kl()&&(this.Kr=!1);rm.prototype.kv.call(this)};f.NA=function(a,b){this.anchor==a&&this.ak.contains(this.anchor)&&(this.Kr||!this.VO?(this.aa(!1),this.xa()||(this.anchor=a,this.Xv(b||Vs(this,0)),this.aa(!0))):this.anchor=void 0);this.fj=void 0};
f.CI=function(a){this.In=void 0;a==this.anchor&&(null!=this.Vd&&(this.Vd==this.a()||this.ak.contains(this.Vd))||this.Hy&&this.Hy.Vd||this.aa(!1))};function Ws(a,b){var c=si(a.jb);a.Dt.x=b.clientX+c.x;a.Dt.y=b.clientY+c.y}f.lk=function(a){var b=Xs(this,a.target);this.Vd=b;Ss(this);b!=this.anchor&&(this.anchor=b,this.fj||(this.fj=Wf(ta(this.NA,this,b,void 0),this.mC)),Ys(this),Ws(this,a))};function Xs(a,b){try{for(;b&&!a.ak.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.cA=function(a){Ws(this,a);this.Kr=!0};f.jk=function(a){this.Vd=a=Xs(this,a.target);this.Kr=!0;if(this.anchor!=a){this.anchor=a;var b=Vs(this,1);Ss(this);this.fj||(this.fj=Wf(ta(this.NA,this,a,b),this.mC));Ys(this)}};function Vs(a,b){if(0==b){var c=a.Dt.clone();return new Zs(c)}return new $s(a.Vd)}function Ys(a){if(a.anchor)for(var b,c=0;b=Qs[c];c++)ci(b.a(),a.anchor)&&(b.Hy=a,a.iB=b)}
f.Cq=function(a){var b=Xs(this,a.target),c=Xs(this,a.relatedTarget);b!=c&&(b==this.Vd&&(this.Vd=null),Ts(this),this.Kr=!1,!this.xa()||a.relatedTarget&&ci(this.a(),a.relatedTarget)?this.anchor=void 0:Us(this))};f.jA=function(){var a=this.a();this.Vd!=a&&(Ss(this),this.Vd=a)};f.iA=function(a){var b=this.a();this.Vd!=b||a.relatedTarget&&ci(b,a.relatedTarget)||(this.Vd=null,Us(this))};function Ts(a){a.fj&&(ba.clearTimeout(a.fj),a.fj=void 0)}
function Us(a){2==a.Kl()&&(a.In=Wf(ta(a.CI,a,a.anchor),a.TH))}function Ss(a){a.In&&(ba.clearTimeout(a.In),a.In=void 0)}f.f=function(){this.aa(!1);Ts(this);this.detach();this.a()&&S(this.a());this.Vd=null;delete this.jb;Ps.d.f.call(this)};function Zs(a,b){Ns.call(this,a,b)}w(Zs,Ns);Zs.prototype.je=function(a,b,c){b=Bi(a);b=Ei(b);c=c?new qh(c.top+10,c.right,c.bottom,c.left+10):new qh(10,0,0,10);wo(this.xt,a,4,c,b,9)&496&&wo(this.xt,a,4,c,b,5)};function $s(a){Po.call(this,a,3)}w($s,Po);
$s.prototype.je=function(a,b,c){var d=new N(10,0);uo(this.element,this.jn,a,b,d,c,9)&496&&uo(this.element,2,a,1,d,c,5)};function at(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!t(b)||!t(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof cr))throw Error("Invalid interactor.");Ps.call(this);this.s="caption";this.We=a;this.Kp=b;this.Lp=c;this.Da=d;this.ph=null;this.Aj=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Aj=[a];Rc(d,ie,this.Un.bind(this));this.su()}
w(at,Ps);at.prototype.su=function(){var a=vi(this.We,"position");if("static"==a||""==a)this.We.style.position="relative";var a=document.getElementsByTagName("head")[0],b=P("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Aj[0]));a.appendChild(b);b.appendChild(c);this.ph=b;this.Xv(new Ns(this.Kp,this.Lp));this.aa(!0);this.sl(this.We);this.a().classList.add("x-tooltip")};at.prototype.Un=function(){this.aa(!1);this.ph&&S(this.ph);this.a()&&S(this.a());this.ph=null};function bt(){zr.call(this);this.s="renderer3D";this.Im=this.Lm=this.Hm=this.Km=this.Gm=this.Jm=this.Ss=this.Ts=null;this.Qa=[0,0,0];this.Am=[0,0,0];this.Ix=null;this.Ds=new gd;this.Vm=new gd;this.Ij=new gd;this.Mm=new gd;this.bl=new gd;this.kl=new gd;this.Gj=new gd;this.pl=new gd;this.qb={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(bt,zr);bt.prototype.__defineGetter__("config",function(){return this.qb});f=bt.prototype;
f.yK=function(){this.Im=this.Lm=this.Hm=this.Km=this.Gm=this.Jm=null;this.Qa=[0,0,0]};f.lv=function(a){bt.d.lv.call(this,a);var b=a.Kp;a=a.Lp;var c=this.Ev(b,a);if(c=this.get(c))if(c=c.al){var d=Ii(this.ua),b=new at(this.ua,d.x+b+10,d.y+a+10,this.Da);a=pm(c,null);if(b=b.a())b.innerHTML=om(a)}};
f.ra=function(){bt.d.ra.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Ta,this.Ha),this.b.clearColor(this.Am[0],this.Am[1],this.Am[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.qb.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Ta,this.Ha,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Ta,this.Ha);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.Ix=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new Is;ct(this,a)};
function ct(a,b){if(null==a.oc||null==a.b||null==a.ha)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Is))throw Error("Could not add shaders.");Ls(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.wp);a.b.shaderSource(d,b.Hp);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.Ss=e;Object.keys(Js).forEach(function(a){a=Js[a];this.Ds.set(a,this.b.getAttribLocation(this.Ss,a));this.b.enableVertexAttribArray(this.Ds.get(a))}.bind(a));
Object.keys(Ks).forEach(function(a){a=Ks[a];this.Vm.set(a,this.b.getUniformLocation(this.Ss,a))}.bind(a));a.Ts=b}
f.ah=function(a){bt.d.ah.call(this,a);var b=!1;if(null!=a){this.get(a.bd)&&(b=!0);var c=a.bd,d=a.C,e=a.ca,h=a.zc,k=a.Sa,l=a.ea,n=a.ac,m=a.vd,q=a.q,p=a.$a;if(null!=q&&null!=q.ea&&q.ea.G)this.ah(q);else if(null!=q&&q.G&&this.ah(q),null!=m&&null!=m.ea&&m.ea.G)this.Fb.load(m,a);else if(null!=k&&null!=k.ea&&k.ea.G)this.Fb.load(k,a);else{if(null!=l&&g(l))if(null!=a.eh){if(a.eh.$n!=l.length||!a.G)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Fb.load(l[b],a);return}else{if(null!=l&&l.G){this.Fb.load(a,
a);return}if(null!=p&&null!=p.ea&&p.ea.G){this.Fb.load(p,a);return}}if(0<a.j.length)for(l=a.j,m=l.length,q=q=0;q<m;q++)this.ah(l[q]);if(d){for(l=0;this.Bp;)l++,window.console.log("Possible thread lock avoided: "+l);this.Bp=!0;m=a instanceof Ie&&a.qh instanceof Ne;b&&null!=k&&k.G&&(l=this.Gj.get(c),null!=l&&this.b.isBuffer(l.rb)&&this.b.deleteBuffer(l.rb));l=null;if(null!=k)if(!b||k.G){l=a.ol;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
q=!1;k.pi&&(q=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,q);q=this.b.createTexture();q.ZH=k.Cf;this.pl.set(k.bd,q);this.b.bindTexture(this.b.TEXTURE_2D,q);k.pi?(q=this.b.RGBA,k.yx&&(q=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,q,k.Rs,k.Qs,0,q,this.b.UNSIGNED_BYTE,k.pi)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,q.ZH);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);m?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);q=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
q);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new Ms(q,l.length,2);this.Gj.set(c,l);k.G=!1}else l=this.Gj.get(c);Nf(this.Fb,.1);if(m)this.Bp=!1,A.rd(this.s+".update"),Nf(this.Fb,.9);else{if(!b||d.G||n.G){m=n.tb;k=A.t.Jb(m,d.Gf,d.Hf,d.If);m=A.t.Jb(m,d.Df,d.Ef,d.Ff);if(null===this.Jm||k.x<this.Jm)this.Jm=k.x;if(null===this.Gm||m.x>this.Gm)this.Gm=m.x;if(null===this.Km||k.y<this.Km)this.Km=k.y;if(null===this.Hm||m.y>this.Hm)this.Hm=m.y;if(null===this.Lm||k.z<this.Lm)this.Lm=
k.z;if(null===this.Im||m.z>this.Im)this.Im=m.z;this.Qa=[(this.Jm+this.Gm)/2,(this.Km+this.Hm)/2,(this.Lm+this.Im)/2];n.G=!1}b&&d.G&&(n=this.Ij.get(c),null!=n&&this.b.isBuffer(n.rb)&&this.b.deleteBuffer(n.rb));n=null;!b||d.G?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.Qb,this.b.STATIC_DRAW),n=new Ms(n,d.count,3),d.G=!1):n=this.Ij.get(c);Nf(this.Fb,.3);b&&e.G&&(k=this.Ij.get(c),null!=k&&this.b.isBuffer(k.rb)&&this.b.deleteBuffer(k.rb));
k=null;!b||e.G?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.Qb,this.b.STATIC_DRAW),k=new Ms(k,e.count,3),e.G=!1):k=this.Mm.get(c);Nf(this.Fb,.3);b&&h&&h.G&&(e=this.bl.get(c),null!=e&&this.b.isBuffer(e.rb)&&this.b.deleteBuffer(e.rb));e=null;if(h)if(!b||h.G){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.Qb,this.b.STATIC_DRAW);e=new Ms(e,h.count,3);h.G=!1}else e=this.bl.get(c);Nf(this.Fb,.2);b&&p&&p.G&&(h=this.kl.get(c),null!=h&&this.b.isBuffer(h.rb)&&this.b.deleteBuffer(h.rb));h=null;if(p)if(h=p.Cm,!b||p.G){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new Ms(d,h.length,3);p.G=!1}else h=this.kl.get(c);Nf(this.Fb,.1);b||this.ug.add(a);this.Ij.set(c,
n);this.Mm.set(c,k);this.bl.set(c,e);this.Gj.set(c,l);this.kl.set(c,h);this.Bp=a.G=!1}}else a.G=!1}}};f.Ev=function(a,b){if(this.qb.PICKING_ENABLED){this.Qg(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.Ha-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.Qg=function(a,b){bt.d.Qg.call(this,a,b);this.b.viewport(0,0,this.Ta,this.Ha);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.ug.Za,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Ix):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.ha.Ps,h=this.ha.N;this.b.uniformMatrix4fv(this.Vm.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.Vm.get("view"),!1,h);e=this.Qa;this.b.uniform3f(this.Vm.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.cd.length;for(e=0;e<h;++e){var k=this.cd[e];if(k instanceof I){var l=A.t.Jb(this.ha.N,k.ta[0]+k.e[0].D[0],k.ta[1]+k.e[0].D[1],k.ta[2]+k.e[0].D[2]),n=A.t.Jb(this.ha.N,k.ta[0]-k.e[0].D[0],k.ta[1]-k.e[0].D[1],k.ta[2]-k.e[0].D[2]),m=Math.abs(l.z-n.z),l=A.t.Jb(this.ha.N,k.ta[0]+k.e[1].D[0],k.ta[1]+k.e[1].D[1],k.ta[2]+k.e[1].D[2]),n=A.t.Jb(this.ha.N,k.ta[0]-k.e[1].D[0],k.ta[1]-k.e[1].D[1],k.ta[2]+-k.e[1].D[2]),q=Math.abs(l.z-n.z),l=A.t.Jb(this.ha.N,k.ta[0]+k.e[2].D[0],k.ta[1]+k.e[2].D[1],k.ta[2]+
k.e[2].D[2]),n=A.t.Jb(this.ha.N,k.ta[0]-k.e[2].D[0],k.ta[1]-k.e[2].D[1],k.ta[2]-k.e[2].D[2]),l=Math.max(m,q,Math.abs(l.z-n.z));l==m?Me(k,0):l==q?Me(k,1):Me(k,2)}}if(this.qb.ORDERING_ENABLED){m=!1;h=this.cd;k=h.length-1;do if(e=h[k],e instanceof I&&e.ze&&-1!=e.Ab){var m=e.j[e.Ab].j,q=e.Ab,l=A.t.Jb(this.ha.N,e.ta[0]+e.e[q].Na[0],e.ta[1]+e.e[q].Na[1],e.ta[2]+e.e[q].Na[2]),n=A.t.Jb(this.ha.N,e.ta[0]-e.e[q].Na[0],e.ta[1]-e.e[q].Na[1],e.ta[2]-e.e[q].Na[2]),l=l.z-n.z,n=Math.max(e.Zk[e.Ab],Math.max(e.Zk[e.Ab+
4],e.Zk[e.Ab+8])),p=Math.min(e.Zk[e.Ab],Math.min(e.Zk[e.Ab+4],e.Zk[e.Ab+8]));if(0>l*(n+p))for(l=l=0;l<e.Qm[q]-1;l++)m[l]&&(m[l].Lc=e.Lc,m[l].ad=e.e[q].ml*l);else for(l=e.Qm[q]-1;0<=l;l--)m[l]&&(m[l].Lc=e.Lc,m[l].ad=(e.Qm[q]-1)*e.e[q].ml-e.e[q].ml*l);m=!0}while(k--);h=this.ug.Za;k=h.length-1;do e=h[k],!e.ib||1==e.Lc||e instanceof Ie||(m=e,q=e.C.sp,e=A.t.Jb(e.ac.tb,q[0],q[1],q[2]),e=A.t.Jb(this.ha.N,e.x,e.y,e.z),e=A.O.Mt(this.ha.Cj,e),e=Math.round(1E3*e)/1E3,m.ad=e,m=!0);while(k--);m&&this.ug.sort()}if(h=
!a&&null!=b&&b&&this.qb.STATISTICS_ENABLED)var r=0,u=0,z=0,y=0;var e=this.Ds,k=e.get("vertexPosition"),m=e.get("vertexNormal"),q=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.Vm,p=e.get("usePicking"),J=e.get("useObjectColor"),T=e.get("objectColor"),Q=e.get("useScalars"),G=e.get("scalarsReplaceMode"),R=e.get("scalarsMin"),Z=e.get("scalarsMax"),W=e.get("scalarsMinColor"),ua=e.get("scalarsMaxColor"),na=e.get("scalarsInterpolation"),wa=e.get("scalarsMinThreshold"),Ma=
e.get("scalarsMaxThreshold"),Ga=e.get("objectOpacity"),Na=e.get("labelmapOpacity"),la=e.get("labelmapColor"),xa=e.get("useTexture"),qa=e.get("useLabelMapTexture"),Ac=e.get("textureSampler"),ue=e.get("textureSampler2"),ve=e.get("volumeLowerThreshold"),we=e.get("volumeUpperThreshold"),Wd=e.get("volumeScalarMin"),Ph=e.get("volumeScalarMax"),Ev=e.get("volumeWindowLow"),Fv=e.get("volumeWindowHigh"),Gv=e.get("volumeScalarMinColor"),Hv=e.get("volumeScalarMaxColor"),gs=e.get("volumeTexture"),Iv=e.get("objectTransform"),
Jv=e.get("pointSize"),e=d;do{var Oa=c[d-e];if(Oa){var ib=null;Oa instanceof Ie&&Oa.qh&&(ib=Oa.qh);if(Oa.ib&&(!ib||ib.ib)&&(!a||Oa.Nm)){var xc=Oa.bd,Nd=Oa.Fm,jd=this.Ij.get(xc),ne=this.Mm.get(xc),an=this.bl.get(xc),mf=this.kl.get(xc),bn=this.Gj.get(xc);this.b.bindBuffer(this.b.ARRAY_BUFFER,jd.rb);this.b.vertexAttribPointer(k,jd.ii,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,ne.rb);this.b.vertexAttribPointer(m,ne.ii,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(p,!0):this.b.uniform1i(p,!1);
!an||a||Nd?(ne=1,Nd&&!a&&(ne=0),this.b.uniform1i(J,ne),ne=Oa.Fa,a&&(ne=[Math.floor(xc%65025%255)/255,Math.floor(xc%65025/255)/255,Math.floor(xc/65025)/255]),this.b.uniform3f(T,parseFloat(ne[0]),parseFloat(ne[1]),parseFloat(ne[2])),this.b.vertexAttribPointer(q,jd.ii,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(J,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,an.rb),this.b.vertexAttribPointer(q,an.ii,this.b.FLOAT,!1,0,0));!mf||a||Nd?(this.b.uniform1i(Q,!1),this.b.vertexAttribPointer(n,jd.ii,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(Q,!0),this.b.uniform1i(G,Oa.$a.Lx),xc=Oa.$a.li,Nd=Oa.$a.ji,this.b.uniform3f(W,parseFloat(xc[0]),parseFloat(xc[1]),parseFloat(xc[2])),this.b.uniform3f(ua,parseFloat(Nd[0]),parseFloat(Nd[1]),parseFloat(Nd[2])),this.b.uniform1f(wa,parseFloat(Oa.$a.sb)),this.b.uniform1f(Ma,parseFloat(Oa.$a.ub)),this.b.uniform1f(R,parseFloat(Oa.$a.Sd)),this.b.uniform1f(Z,parseFloat(Oa.$a.Pb)),this.b.uniform1i(na,parseInt(Oa.$a.Fs,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,mf.rb),this.b.vertexAttribPointer(n,
mf.ii,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ga,parseFloat(Oa.Lc));Oa.Sa&&bn&&!a?(this.b.uniform1i(xa,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.pl.get(Oa.Sa.bd)),this.b.uniform1i(Ac,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,bn.rb),this.b.vertexAttribPointer(l,bn.ii,this.b.FLOAT,!1,0,0),this.b.uniform1i(gs,!1)):(this.b.uniform1i(xa,!1),this.b.vertexAttribPointer(l,jd.ii,this.b.FLOAT,!1,0,0));ib&&(this.b.uniform1i(gs,!0),this.b.uniform1f(ve,ib.sb),this.b.uniform1f(we,
ib.ub),this.b.uniform1f(Wd,ib.Sd),this.b.uniform1f(Ph,ib.Pb),xc=ib.li,Nd=ib.ji,this.b.uniform3f(Gv,parseFloat(xc[0]),parseFloat(xc[1]),parseFloat(xc[2])),this.b.uniform3f(Hv,parseFloat(Nd[0]),parseFloat(Nd[1]),parseFloat(Nd[2])),this.b.uniform1f(Ev,ib.Hb),this.b.uniform1f(Fv,ib.Gb),mf=ib.q,this.b.uniform1i(qa,!1),ib.ze?this.b.uniform1f(Ga,parseFloat(ib.Lc)):mf&&mf.ib&&(ib=Oa.q.bd,this.b.uniform1i(qa,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.pl.get(ib)),this.b.uniform1i(ue,
1),this.b.uniform1f(Na,mf.Lc),this.b.uniform4fv(la,mf.Vs)));this.b.uniformMatrix4fv(Iv,!1,Oa.ac.tb);ib=1;"POINTS"==Oa.yd&&(ib=Oa.Om);this.b.uniform1f(Jv,ib);ib=-1;Oa.yd==Qd?(ib=this.b.TRIANGLES,h&&(u+=jd.hi/3)):"LINES"==Oa.yd?(this.b.lineWidth(Oa.il),ib=this.b.LINES,h&&(z+=jd.hi/2)):"POINTS"==Oa.yd?(ib=this.b.POINTS,h&&(y+=jd.hi)):"TRIANGLE_STRIPS"==Oa.yd?(ib=this.b.TRIANGLE_STRIP,h&&(u+=jd.hi/3)):"POLYGONS"==Oa.yd&&(ib=0==jd.hi%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(u+=jd.hi/3));h&&(r+=jd.hi);
this.b.drawArrays(ib,0,jd.hi)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+r+" | "),c+="Triangles: "+Math.round(u)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.pl.Bh(),window.console.log(c))}};
f.remove=function(a){bt.d.remove.call(this,a);if(0<a.j.length)for(var b=a.j,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.bd;c=this.Gj.get(b);null!=c&&this.b.isBuffer(c.rb)&&this.b.deleteBuffer(c.rb);a.Sa&&(c=this.pl.get(a.Sa.bd))&&(this.b.deleteTexture(c),this.pl.remove(a.Sa.bd));c=this.Ij.get(b);null!=c&&this.b.isBuffer(c.rb)&&this.b.deleteBuffer(c.rb);c=this.Mm.get(b);null!=c&&this.b.isBuffer(c.rb)&&this.b.deleteBuffer(c.rb);c=this.bl.get(b);null!=c&&this.b.isBuffer(c.rb)&&this.b.deleteBuffer(c.rb);
c=this.kl.get(b);null!=c&&this.b.isBuffer(c.rb)&&this.b.deleteBuffer(c.rb);this.Ij.remove(b);this.Mm.remove(b);this.bl.remove(b);this.Gj.remove(b);this.kl.remove(b);this.ug.remove(a);return!0};f.Yd=function(){this.Ts=null;delete this.Ts;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);bt.d.Yd.call(this)};bt.prototype.__defineGetter__("bgColor",function(){return this.Am});bt.prototype.__defineSetter__("bgColor",function(a){this.Am=a});
bt.prototype.mK=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.Ev(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=rr(this.ha,a/this.Ta*2-1,(this.Ha-b)/this.Ha*2-1,0);a=rr(this.ha,a/this.Ta*2-1,(this.Ha-b)/this.Ha*2-1,1);h[0]+=this.Qa[0];h[1]+=this.Qa[1];h[2]+=this.Qa[2];a[0]+=this.Qa[0];a[1]+=this.Qa[1];a[2]+=this.Qa[2];b=[e.C.Gf,e.C.Hf,e.C.If];var k=[e.C.Df,e.C.Hf,e.C.If],l=[e.C.Df,e.C.Ef,e.C.If],n=[e.C.Gf,e.C.Ef,e.C.If],m=[e.C.Gf,e.C.Ef,e.C.Ff],q=[e.C.Gf,e.C.Hf,
e.C.Ff],p=[e.C.Df,e.C.Ef,e.C.Ff],r=[e.C.Df,e.C.Hf,e.C.Ff];b=[A.t.Jb(e.ac.tb,b[0],b[1],b[2]),A.t.Jb(e.ac.tb,k[0],k[1],k[2]),A.t.Jb(e.ac.tb,l[0],l[1],l[2]),A.t.Jb(e.ac.tb,n[0],n[1],n[2]),A.t.Jb(e.ac.tb,m[0],m[1],m[2]),A.t.Jb(e.ac.tb,q[0],q[1],q[2]),A.t.Jb(e.ac.tb,p[0],p[1],p[2]),A.t.Jb(e.ac.tb,r[0],r[1],r[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],u;for(u in b)u=b[u],k=[Math.min(k[0],u.x),Math.max(k[1],u.x),Math.min(k[2],u.y),Math.max(k[3],u.y),Math.min(k[4],u.z),Math.max(k[5],
u.z)];u=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,r=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(u[l]-h[n]);Infinity!=y&&-Infinity!=y&&(p=h[m]+a[m]*y,y=h[q]+a[q]*y,p>=u[r]&&p<=u[r+1]&&y>=u[z]&&y<=u[z+1]?(r=[],r[n]=u[l],r[m]=p,r[q]=y,b.push(r)):(r=[],r[n]=u[l],r[m]=p,r[q]=y,k.push(r)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(u=0;2>u;u++)b=a[u],k[u]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=u=null;k[0]<k[1]?(u=a[0],b=a[1]):
(u=a[1],b=a[0]);h=Math.sqrt((u[0]-b[0])*(u[0]-b[0])+(u[1]-b[1])*(u[1]-b[1])+(u[2]-b[2])*(u[2]-b[2]));h/=c;a=u;u=[b[0]-u[0],b[1]-u[1],b[2]-u[2]];b=Math.sqrt(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]);k=[u[0]/b,u[1]/b,u[2]/b];l=e.C.Qb;n=l.length;for(u=0;u<h;u+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(m=l[b],q=l[b+1],p=l[b+2],r=new A.O(m,q,p),r=A.t.Jb(e.ac.tb,m,q,p),Math.sqrt((a[0]-r.x)*(a[0]-r.x)+(a[1]-r.y)*(a[1]-r.y)+(a[2]-r.z)*(a[2]-r.z))<=d)return[r.x,r.y,r.z];return null};
v("X.renderer3D",bt);v("X.renderer3D.prototype.init",bt.prototype.ra);v("X.renderer3D.prototype.add",bt.prototype.add);v("X.renderer3D.prototype.onShowtime",bt.prototype.fB);v("X.renderer3D.prototype.onRender",bt.prototype.dB);v("X.renderer3D.prototype.get",bt.prototype.get);v("X.renderer3D.prototype.render",bt.prototype.n);v("X.renderer3D.prototype.destroy",bt.prototype.Yd);v("X.renderer3D.prototype.remove",bt.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",bt.prototype.yK);
v("X.renderer3D.prototype.resetViewAndRender",bt.prototype.qo);v("X.renderer3D.prototype.pick",bt.prototype.Ev);v("X.renderer3D.prototype.pick3d",bt.prototype.mK);function dt(){bt.call(this)}w(dt,bt);v("xiv.vis.XtkRenderer3D",dt);f=dt.prototype;f.Yf=function(){this.xk()};f.wk=function(a){dt.d.wk.call(this,a);this.dispatchEvent({type:"s",value:a.Hj})};f.n=function(){this.oc&&this.b?(dt.d.n.call(this),this.dispatchEvent({type:"t"})):(this.qb.PROGRESSBAR_ENABLED=!1,this.ra())};f.Yd=function(){dt.d.Yd.call(this)};f.remove=function(a){null!=a&&dt.d.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",dt.prototype.Yf);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",dt.prototype.wk);v("xiv.vis.XtkRenderer3D.prototype.render",dt.prototype.n);v("xiv.vis.XtkRenderer3D.prototype.remove",dt.prototype.remove);function et(){Yc.call(this);this.Rk=[]}w(et,Yc);v("xiv.vis.XtkPlane",et);var ft=[-300,300,300];f=et.prototype;f.Vl=!0;f.Xk=null;f.orientation=null;f.po=null;f.Ba=null;f.yi=null;f.Oa=function(){return this.Ba};f.Ib=function(){return this.orientation};f.Mr=function(a){null!=this.Ba&&(null!=a?(this.Sp=a,this.Ba.camera.focus=a.focus,this.Ba.camera.position=a.position,this.Ba.camera.up=a.uL,a instanceof hr&&(this.Ba.camera.view=a.view)):this.Ba.camera.position=ft)};
f.Lr=function(a){this.yi.style.background=null!=a?s(a)?a:null!=a.Ay?"-webkit-linear-gradient(top, "+a.Ay+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.bG=function(){return this.bq};f.ZF=function(){return this.yi};f.Gk=function(a){this.yi=a;null!=this.Ba||this.ra(a);this.Ba.container=a};f.wv=function(a){this.dispatchEvent(a)};
f.ra=function(a){null!=this.Ba&&(H(this.Ba),this.Ba.Yd(),this.Ba=null);if(null==this.Xk)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Ba=new this.Xk;this.Ba.orientation=this.orientation;this.Gk(a||this.yi||document.body);this.Ba.ra();F(this.Ba,"s",function(a){this.dispatchEvent({type:"s",value:a.value})}.bind(this));F(this.Ba,"E",this.wv.bind(this))};f.add=function(a){this.Vl&&(!0==a.isSelectedVolume&&(this.bq=a),this.Rk.push(a),this.Ba.add(a))};f.isEnabled=function(){return this.Vl};
function gt(a){null!=a.vf&&(S(a.vf),delete a.vf)}function ht(a){a.vf=P("div",{id:"DisabledOverlay_"+B()});a.vf.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=P("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.vf.appendChild(c);a.yi.appendChild(a.vf)}
f.lc=function(a){(this.Vl=!1!==a)?wk(this.vf,200,function(){this.vf.style.visibility="hidden";gt(this)}.bind(this)):(null!=this.vf||ht(this),this.vf.style.visibility="visible",tk(this.vf,200,function(){}.bind(this)))};f.restore=function(){this.ra();it(this);null!=this.Sp&&this.Mr(this.Sp);null!=this.Pc&&this.Lr(this.Pc);this.n()};f.vK=function(){D(this.Rk,function(a){null!=a&&this.Ba.remove(a)}.bind(this))};function it(a){D(a.Rk,function(a){this.Ba.add(a)}.bind(a))}f.n=function(){this.Vl&&this.Ba.n()};
f.k=function(){null!=this.Ba&&this.Ba.Yf()};f.g=function(){et.d.g.call(this);null!=this.Ba&&(this.Ba.Yd(),delete this.Ba);gt(this);null!=this.Pc&&delete this.Pc;null!=this.Sp&&delete this.Sp;null!=this.po&&(null!=this.po.g&&(this.po.stop(),this.po.g()),delete this.po);delete this.Vl;delete this.Xk;delete this.yi;delete this.orientation;sb(this.Rk);delete this.bq;delete this.UO};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",ft);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",et.prototype.Xk);v("xiv.vis.XtkPlane.prototype.orientation",et.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",et.prototype.Ba);v("xiv.vis.XtkPlane.prototype.container",et.prototype.yi);v("xiv.vis.XtkPlane.prototype.getRenderer",et.prototype.Oa);v("xiv.vis.XtkPlane.prototype.getOrientation",et.prototype.Ib);v("xiv.vis.XtkPlane.prototype.setCamera",et.prototype.Mr);v("xiv.vis.XtkPlane.prototype.setBackground",et.prototype.Lr);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",et.prototype.bG);v("xiv.vis.XtkPlane.prototype.getContainer",et.prototype.ZF);v("xiv.vis.XtkPlane.prototype.setContainer",et.prototype.Gk);v("xiv.vis.XtkPlane.prototype.init",et.prototype.ra);v("xiv.vis.XtkPlane.prototype.add",et.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",et.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",et.prototype.lc);v("xiv.vis.XtkPlane.prototype.restore",et.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",et.prototype.vK);v("xiv.vis.XtkPlane.prototype.render",et.prototype.n);v("xiv.vis.XtkPlane.prototype.updateStyle",et.prototype.k);v("xiv.vis.XtkPlane.prototype.dispose",et.prototype.g);function jt(){et.call(this);this.orientation="V";this.Xk=dt}w(jt,et);v("xiv.vis.XtkPlane3D",jt);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function kt(a){et.call(this);this.orientation=a;this.Xk=Fr;this.bq=null}w(kt,et);v("xiv.vis.XtkPlane2D",kt);f=kt.prototype;f.Sz=function(){return this.Ba.Sz()};f.Tz=function(){return this.Ba.Tz()};f.Ll=function(){return null!=this.Ba?this.Ba.Ll():null};f.Gk=function(a){kt.d.Gk.call(this,a)};f.g=function(){kt.d.g.call(this);delete this.bq;delete this.AO;delete this.BO};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",kt.prototype.Sz);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",kt.prototype.Tz);v("xiv.vis.XtkPlane2D.prototype.getVolume",kt.prototype.Ll);v("xiv.vis.XtkPlane2D.prototype.setContainer",kt.prototype.Gk);v("xiv.vis.XtkPlane2D.prototype.dispose",kt.prototype.g);function lt(){Bq.call(this);this.bj(P("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));O(this.A,lt.CSS.OD);F(this.A,"change",this.fc.bind(this))}w(lt,Bq);v("xiv.ui.ctrl.RadioButtonController",lt);lt.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";lt.CSS_SUFFIX={OD:"radiobutton"};lt.prototype.fc=function(){this.dispatchEvent({type:"p",checked:this.A.checked})};lt.prototype.f=function(){lt.d.f.call(this)};v("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",lt.ID_PREFIX);
v("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",lt.CSS_SUFFIX);v("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",lt.prototype.fc);v("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",lt.prototype.f);function mt(){Bq.call(this);this.Rk=[]}w(mt,Bq);v("xiv.ui.ctrl.MasterController2D",mt);mt.ID_PREFIX="xiv.ui.ctrl.MasterController2D";mt.CSS_SUFFIX={};mt.prototype.add=function(){};mt.prototype.f=function(){mt.d.f.call(this);Ib(this.Rk);delete this.Rk};v("xiv.ui.ctrl.MasterController2D.ID_PREFIX",mt.ID_PREFIX);v("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",mt.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController2D.prototype.add",mt.prototype.add);v("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",mt.prototype.f);function nt(){Bq.call(this);this.eg("Master Opacity")}w(nt,Bq);v("xiv.ui.ctrl.SliderController",nt);nt.ID_PREFIX="xiv.ui.ctrl.SliderController";nt.CSS_SUFFIX={la:"slider",ci:"slider-thumb",mp:"slider-thumb-hover",di:"slider-track",ix:"slider-track-hover",ys:"value-input"};f=nt.prototype;f.Hw=2;f.Io=function(a){this.Hw=a};f.n=function(a){nt.d.n.call(this,a);this.Bt();this.Ct()};
f.Bt=function(){var a=new Kr;this.bj(a);a.Gd(0);a.ld(1);a.Ug(.01);a.J(1);O(a.a(),nt.CSS.la);O(a.Hc,nt.CSS.ci);O(a.od,nt.CSS.di);a.Mp(nt.CSS.mp);a.bt(nt.CSS.ix);F(this.A,"change",this.fc.bind(this));a.a().style.zIndex=0};f.Ct=function(){this.ga=P("input");this.ga.type="number";O(this.ga,nt.CSS.ys);Vh(this.a(),this.ga);F(this.ga,"input",this.zv.bind(this));this.update()};f.zv=function(){var a=this.A,b=parseFloat(this.ga.value),b=fd(b,a.qa(),a.ia());this.ga.value=b;a.J(b)};f.qH=function(){return this.ga};
f.fc=function(){var a=this.A,b=a.K().toFixed(this.Hw),c=parseInt(this.ga.value);this.ga.value=b;this.dispatchEvent({type:"p",value:b,Pu:a.qa(),Ou:a.ia(),kB:c})};f.update=function(){var a=this.A,b=a.K();a.k();a.J(0);a.J(b);a.Ch()!==this.ga.step&&(this.ga.step=a.Ch());a.qa()!==this.ga.min&&(this.ga.min=a.qa());a.ia()!==this.ga.max&&(this.ga.max=a.ia());a.K()!==this.ga.value&&(this.ga.value=b)};f.f=function(){nt.d.f.call(this);delete this.Hw;null!=this.ga&&(H(this.ga),S(this.ga),delete this.ga)};
v("xiv.ui.ctrl.SliderController.ID_PREFIX",nt.ID_PREFIX);v("xiv.ui.ctrl.SliderController.CSS_SUFFIX",nt.CSS_SUFFIX);v("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",nt.prototype.Io);v("xiv.ui.ctrl.SliderController.prototype.render",nt.prototype.n);v("xiv.ui.ctrl.SliderController.prototype.getValueInput",nt.prototype.qH);v("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",nt.prototype.fc);v("xiv.ui.ctrl.SliderController.prototype.update",nt.prototype.update);
v("xiv.ui.ctrl.SliderController.prototype.disposeInternal",nt.prototype.f);function ot(){Bq.call(this);this.eg("TwoThumb");this.Bt();this.Ct();this.ae=P("input");this.ae.type="number";O(this.ae,ot.CSS.hD);Vh(this.a(),this.ae);F(this.ae,"input",this.eJ.bind(this));pt(this)}w(ot,Bq);v("xiv.ui.ctrl.TwoThumbSliderController",ot);ot.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";ot.CSS_SUFFIX={la:"slider",ci:"slider-thumb",WD:"slider-thumb-extent",XD:"slider-thumb-value",mp:"slider-thumb-hover",di:"slider-track",ix:"slider-track-hover",ys:"value-input",hD:"extent-input"};
f=ot.prototype;f.Bt=function(){this.W=new gq;this.W.v();var a=this.W.a();a.setAttribute("id","ThresholdSlider_"+B());O(a,ot.CSS.la);var b=P("div",{id:"ThwoThumbSlider_track_"+B(),"class":ot.CSS.di});a.appendChild(b);this.bj(this.W);O(this.W.na,ot.CSS.ci);O(this.W.na,ot.CSS.XD);qk(this.W.na,ot.CSS.mp);O(this.W.sc,ot.CSS.ci);O(this.W.sc,ot.CSS.WD);qk(this.W.sc,ot.CSS.mp);F(this.W,"change",this.fc.bind(this))};
f.update=function(){var a=Oi(this.W.na).width,b=this.W.ia()-this.W.qa(),c=Oi(this.W.a()).width-a,a=c*((this.W.K()-this.W.qa())/b),b=c*(this.W.cf()/b);this.W.na.style.left=a.toString()+"px";this.W.sc.style.left=b.toString()+"px";qt(this);pt(this)};function qt(a){a.ga.step=1;a.ga.min=a.W.qa();a.ga.max=a.W.ia();a.ga.value=a.W.K()}function pt(a){a.ae.step=1;a.ae.min=a.W.qa();a.ae.max=a.W.ia();a.ae.value=a.W.cf()+a.W.K()}
f.Ct=function(){this.ga=P("input");this.ga.type="number";O(this.ga,ot.CSS.ys);Vh(this.a(),this.ga);F(this.ga,"input",this.zv.bind(this));qt(this)};f.zv=function(a){window.console.log(a,this.ga);this.W.J(parseInt(this.ga.value))};f.eJ=function(){this.W.cj(parseInt(this.ae.value)-this.W.K())};f.fc=function(){var a=this.W.K(),b=this.W.cf()+a;this.ga.value=a;this.ae.value=b;this.dispatchEvent({type:"p",lower:a,upper:b})};
f.f=function(){ot.d.f.call(this);null!=this.W&&(H(this.W),null==this.W.Ka&&(this.W.Ka=new Pp),this.W.g(),delete this.W);null!=this.ga&&(H(this.ga),S(this.ga),delete this.ga);null!=this.ae&&(H(this.ae),S(this.ae),delete this.ae)};v("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",ot.ID_PREFIX);v("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",ot.CSS_SUFFIX);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",ot.prototype.update);
v("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",ot.prototype.fc);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",ot.prototype.f);function rt(){Bq.call(this);this.lj=[]}w(rt,Bq);v("xiv.ui.ctrl.MasterController3D",rt);rt.ID_PREFIX="xiv.ui.ctrl.MasterController3D";rt.CSS_SUFFIX={};rt.prototype.add=function(a){this.lj.push(a);this.my(a,nt);1==this.lj.length&&Vh(document.body,this.a())};rt.prototype.f=function(){rt.d.f.call(this);Ib(this.lj);delete this.lj};v("xiv.ui.ctrl.MasterController3D.ID_PREFIX",rt.ID_PREFIX);v("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",rt.CSS_SUFFIX);
v("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{PN:"Visible",HM:"Opacity"});v("xiv.ui.ctrl.MasterController3D.prototype.add",rt.prototype.add);v("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",rt.prototype.f);function st(){rt.call(this)}w(st,rt);v("xiv.ui.ctrl.VolumeController3D",st);st.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";st.CSS_SUFFIX={};f=st.prototype;f.qy=function(a){var b=this.Wd(Ds,"Volume Rendering",function(b){a.volumeRendering=b.checked});Fq(a,b);this.qf.push(b);b.A.of(!1)};f.FJ=function(a){null!=this.Vo&&(this.Vo.Fc().lowerThreshold=parseFloat(a.lower),this.Vo.Fc().upperThreshold=parseFloat(a.upper))};f.Vo=null;
f.oy=function(a){var b=this.Wd(ot,"Threshold",this.FJ.bind(this));b.Vg(a);Fq(a,b);this.qf.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1E3,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=1E3,a.upperThreshold=d);var e=b.A;e.Gd(c);e.ld(d);cq(e,d-c);e.J(c);e.Ug(10);e.cj(d-c);a.upperThreshold=d;a.lowerThreshold=c;this.Vo=b};f.add=function(a){st.d.add.call(this,a);this.qy(a);this.oy(a)};f.k=function(){st.d.k.call(this)};f.f=function(){st.d.f.call(this);this.Vo.g()};
v("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",st.ID_PREFIX);v("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",1E3);v("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",st.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",st.prototype.qy);v("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",st.prototype.oy);v("xiv.ui.ctrl.VolumeController3D.prototype.add",st.prototype.add);v("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",st.prototype.k);
v("xiv.ui.ctrl.VolumeController3D.prototype.disposeInternal",st.prototype.f);function tt(){Bq.call(this);this.lj=[]}w(tt,Bq);v("xiv.ui.ctrl.MasterController",tt);tt.ID_PREFIX="xiv.ui.ctrl.MasterController";tt.CSS_SUFFIX={};tt.prototype.add=function(a){this.lj.push(a)};tt.prototype.f=function(){tt.d.f.call(this);Ib(this.lj);delete this.lj};v("xiv.ui.ctrl.MasterController.ID_PREFIX",tt.ID_PREFIX);v("xiv.ui.ctrl.MasterController.CSS_SUFFIX",tt.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController.CONTROLLERS",{});v("xiv.ui.ctrl.MasterController.prototype.add",tt.prototype.add);
v("xiv.ui.ctrl.MasterController.prototype.disposeInternal",tt.prototype.f);function ut(){Bq.call(this);this.wg=new Vo("Reset to Defaults");this.bj(this.wg);this.wg.a().style.fontFamily='Helvetica,"Helvetica neue", Arial, sans-serif';this.wg.a().style.fontSize="10px";this.wg.a().style.width="100%";F(this.wg.a(),"click",this.fc.bind(this))}w(ut,Bq);v("xiv.ui.ctrl.ButtonController",ut);ut.ID_PREFIX="xiv.ui.ctrl.ButtonController";ut.CSS_SUFFIX={};ut.prototype.fc=function(){this.dispatchEvent({type:"p",checked:this.wg.Fh()})};
ut.prototype.f=function(){ut.d.f.call(this);H(this.wg);H(this.wg.a());this.wg.g();delete this.wg};v("xiv.ui.ctrl.ButtonController.ID_PREFIX",ut.ID_PREFIX);v("xiv.ui.ctrl.ButtonController.CSS_SUFFIX",ut.CSS_SUFFIX);v("xiv.ui.ctrl.ButtonController.prototype.dispatchComponentEvent",ut.prototype.fc);v("xiv.ui.ctrl.ButtonController.prototype.disposeInternal",ut.prototype.f);function vt(){tt.call(this)}w(vt,tt);v("xiv.ui.ctrl.LevelsController",vt);vt.ID_PREFIX="xiv.ui.ctrl.LevelsController";vt.CSS_SUFFIX={};f=vt.prototype;f.add=function(a){vt.d.add.call(this,a);var b=this.iy(a),c=this.ly(a),d=this.ky(a),e=this.gy(a,c,d),h=this.hy(a,c,d);this.ny(a);D([c,d,e,h],function(a){F(a.A,"v",function(){b.update()}.bind(this))}.bind(this))};f.ny=function(a){var b=this.Wd(ut,null,function(){}.bind(this));Fq(a,b);this.Wf.push(b);b.Vg(a);return b};
f.iy=function(a){var b=this.Wd(Gq,null,function(){}.bind(this));b.Vg(a);Fq(a,b);this.Wf.push(b);b.update();return b};f.ly=function(a){var b=this.Wd(nt,"Window Min.",function(b){a.windowLow=b.value}.bind(this));b.Vg(a);Fq(a,b);this.Wf.push(b);b.A.ld(1E3);b.A.Gd(0);b.A.J(0);b.A.Ug(1);b.Io(0);b.update();return b};
f.ky=function(a){var b=this.Wd(nt,"Window Max.");b.Vg(a);F(b,"p",function(b){a.windowHigh=b.value}.bind(this));Fq(a,b);this.Wf.push(b);b.A.ld(1E3);b.A.Gd(0);b.A.J(1E3);b.A.Ug(1);b.Io(0);b.update();return b};
f.gy=function(a,b,c){var d=this.Wd(nt,"Brightness");d.Vg(a);F(d,"p",function(d){d=(d.value-d.kB)/(d.Ou-d.Pu);var h=a.windowHigh-a.windowLow;a.windowLow=Math.round(parseInt(a.windowLow)-h*d);a.windowHigh=Math.round(parseInt(a.windowHigh)-h*d);b.A.J(a.windowLow);c.A.J(a.windowHigh)}.bind(this));Fq(a,d);this.Wf.push(d);d.A.ld(150);d.A.Gd(-150);d.A.J(0);d.A.Ug(1);d.Io(0);d.update();return d};
f.hy=function(a,b,c){var d=this.Wd(nt,"Contrast");d.Vg(a);F(d,"p",function(d){d=(d.value-d.kB)/(d.Ou-d.Pu);var h=parseInt(a.windowHigh)-parseInt(a.windowLow),k=parseInt(a.windowHigh)-h*d;a.windowLow=Math.round(parseInt(a.windowLow)+h*d);a.windowHigh=Math.round(k);b.A.J(a.windowLow);c.A.J(a.windowHigh)}.bind(this));Fq(a,d);this.Wf.push(d);d.A.ld(150);d.A.Gd(-150);d.A.J(0);d.A.Ug(1);d.Io(0);d.update();return d};f.f=function(){vt.d.f.call(this)};v("xiv.ui.ctrl.LevelsController.ID_PREFIX",vt.ID_PREFIX);
v("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",vt.CSS_SUFFIX);v("xiv.ui.ctrl.LevelsController.CONTROLLERS",{JL:"Brightness",UL:"Contrast",xM:"Window Min.",wM:"Window Max.",gM:"Histogram"});v("xiv.ui.ctrl.LevelsController.LEVEL_MAX",1E3);v("xiv.ui.ctrl.LevelsController.LEVEL_MIN",0);v("xiv.ui.ctrl.LevelsController.prototype.add",vt.prototype.add);v("xiv.ui.ctrl.LevelsController.prototype.add_histogram",vt.prototype.iy);v("xiv.ui.ctrl.LevelsController.prototype.add_reset",vt.prototype.ny);
v("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",vt.prototype.ly);v("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",vt.prototype.ky);v("xiv.ui.ctrl.LevelsController.prototype.add_brightness",vt.prototype.gy);v("xiv.ui.ctrl.LevelsController.prototype.add_contrast",vt.prototype.hy);v("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",vt.prototype.f);function wt(a){Yc.call(this);this.ma=null;this.o=a;a=E||gc&&!nc("531")&&"TEXTAREA"==a.tagName;this.qc=new bj(this);this.qc.B(this.o,a?["keydown","paste","cut","drop","input"]:"input",this)}w(wt,Yc);
wt.prototype.handleEvent=function(a){if("input"==a.type)E&&nc(10)&&0==a.keyCode&&0==a.charCode||(xt(this),ec&&this.o!=Gh(this.o).activeElement||this.dispatchEvent(yt(a)));else if("keydown"!=a.type||dl(a)){var b="keydown"==a.type?this.o.value:null;E&&229==a.keyCode&&(b=null);var c=yt(a);xt(this);this.ma=Wf(function(){this.ma=null;this.o.value!=b&&this.dispatchEvent(c)},0,this)}};function xt(a){null!=a.ma&&(ba.clearTimeout(a.ma),a.ma=null)}function yt(a){a=new Fc(a.Dc);a.type="input";return a}
wt.prototype.f=function(){wt.d.f.call(this);this.qc.g();xt(this);delete this.o};function zt(a,b,c){fj.call(this,a);At(this,b||"#f00");this.className=c||"goog-hsv-palette";this.pa=pi(this.M())}w(zt,fj);f=zt.prototype;f.Pr=function(a){a!=this.vl&&(At(this,a),Bt(this),this.dispatchEvent("action"))};function At(a,b){var c=Hj(b).Nl,d=Nj(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.Uc=[e,l,d];a.Uc[0]/=360;a.vl=c}
function Ct(a,b,c,d){if(null!=b||null!=c||null!=d)a.Uc[0]=null!=b?b:a.Uc[0],a.Uc[1]=null!=c?c:a.Uc[1],a.Uc[2]=null!=d?d:a.Uc[2],b=[360*a.Uc[0],a.Uc[1],a.Uc[2]],b=Pj(b[0],b[1],b[2]),a.vl=b,Bt(a),a.dispatchEvent("action")}f.Be=function(){return!1};
f.v=function(){var a=this.M(),b=E&&!nc("7")?" "+(this.className+"-noalpha"):"",c=a.v("DIV",this.className+"-hs-backdrop");this.Tl=a.v("DIV",this.className+"-hs-handle");this.Ti=a.v("DIV",this.className+"-hs-image",this.Tl);this.Pk=a.v("DIV",this.className+"-v-image");this.dp=a.v("DIV",this.className+"-v-handle");this.Yr=a.v("DIV",this.className+"-swatch");this.ok=a.v("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.v("label",null,this.ok);this.o=a.v("DIV",this.className+b,
c,this.Ti,this.Pk,this.dp,this.Yr,d)};f.ab=function(){zt.d.ab.call(this);Bt(this);var a=this.bb();a.B(this.a(),"mousedown",this.Jg);this.Nn||(this.Nn=new wt(this.ok));a.B(this.Nn,"input",this.KH)};f.f=function(){zt.d.f.call(this);delete this.Ti;delete this.Tl;delete this.Pk;delete this.dp;delete this.Yr;delete this.ok;this.Nn&&(this.Nn.g(),delete this.Nn);Tc(this.Uu);Tc(this.Vu)};
function Bt(a){if(a.fa){var b=a.Uc[1],c=a.Uc[2],d=a.Ti.offsetWidth*a.Uc[0];a.He()&&(d=a.Ti.offsetWidth-d);var e=Math.ceil(a.Tl.offsetWidth/2),d=d-e,b=a.Ti.offsetHeight*(1-b),b=b-Math.ceil(a.Tl.offsetHeight/2),e=a.Tl,h=a.He();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.Pk.offsetTop-Math.floor(a.dp.offsetHeight/2)+(255-c)/255*a.Pk.offsetHeight;a.dp.style.top=b+"px";Ri(a.Ti,c/255);ti(a.Pk,"background-color",Pj(360*a.Uc[0],a.Uc[1],
255));ti(a.Yr,"background-color",a.vl);ti(a.Yr,"color",127.5<a.Uc[2]?"#000":"#fff");var k;try{k=Hj(a.ok.value).Nl}catch(l){}a.vl!=k&&(a.ok.value=a.vl)}}f.Jg=function(a){if(a.target==this.Pk||a.target==this.dp){var b=Qi(this.Pk);this.eA(b,a);this.Uu=F(this.pa,"mousemove",ta(this.eA,this,b));this.Vu=F(this.pa,"mouseup",this.Qf,!1,this)}else if(a.target==this.Ti||a.target==this.Tl)b=Qi(this.Ti),this.dA(b,a),this.Uu=F(this.pa,"mousemove",ta(this.dA,this,b)),this.Vu=F(this.pa,"mouseup",this.Qf,!1,this)};
f.eA=function(a,b){b.preventDefault();var c=si(this.M()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);Ct(this,null,null,c)};f.dA=function(a,b){b.preventDefault();var c=si(this.M()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;Ct(this,d,c,null)};f.Qf=function(){Tc(this.Uu);Tc(this.Vu)};
f.KH=function(){/^#?[0-9a-f]{6}$/i.test(this.ok.value)&&this.Pr(this.ok.value)};function Dt(){Bq.call(this);this.eg("Color");this.xi=new zt;this.xi.n();F(this.xi,"action",this.fc.bind(this));O(this.xi.a(),this.constructor.CSS.bD);this.hn=P("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":Dt.CSS.cD});Vh(this.hn,this.xi.a());P("div",{id:this.constructor.ID_PREFIX+"_ColorPalette_"+B(),"class":Dt.CSS.ZL});this.a().appendChild(this.hn);this.bj(this.hn)}w(Dt,Bq);v("xiv.ui.ctrl.ColorPaletteController",Dt);Dt.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";
Dt.CSS_SUFFIX={QL:"colorsquare",cD:"colorpaletteholder",bD:"colorpalette",nj:"closebutton"};Dt.prototype.update=function(){var a=Math.floor(255*this[Cq].color[0]),b=Math.floor(255*this[Cq].color[1]),c=Math.floor(255*this[Cq].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.xi.Pr(Lj([a,b,c]))};Dt.prototype.fc=function(a){this.dispatchEvent({type:"p",color:Nj(a.target.vl).map(function(a){return a/255})})};
Dt.prototype.f=function(){Dt.d.f.call(this);H(this.xi);this.xi.g();delete this.xi;S(this.hn);delete this.hn};v("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",Dt.ID_PREFIX);v("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",Dt.CSS_SUFFIX);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ctrl.ColorPaletteController.prototype.update",Dt.prototype.update);
v("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",Dt.prototype.fc);v("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",Dt.prototype.f);function Et(){rt.call(this)}w(Et,rt);v("xiv.ui.ctrl.MeshController3D",Et);Et.ID_PREFIX="xiv.ui.ctrl.MeshController3D";Et.CSS_SUFFIX={};Et.prototype.add=function(a){Et.d.add.call(this,a);this.dt(a,Ds);this.ct(a,Dt)};v("xiv.ui.ctrl.MeshController3D.ID_PREFIX",Et.ID_PREFIX);v("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",Et.CSS_SUFFIX);v("xiv.ui.ctrl.MeshController3D.prototype.add",Et.prototype.add);v("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",Et.prototype.f);function Ft(){rt.call(this)}w(Ft,rt);v("xiv.ui.ctrl.AnnotationsController3D",Ft);Ft.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";Ft.CSS_SUFFIX={};Ft.prototype.add=function(a){Ft.d.add.call(this,a);this.dt(a,Ds);this.ct(a,Dt)};v("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",Ft.ID_PREFIX);v("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",Ft.CSS_SUFFIX);v("xiv.ui.ctrl.AnnotationsController3D.prototype.add",Ft.prototype.add);function Gt(){tt.call(this)}w(Gt,tt);v("xiv.ui.ctrl.VolumeController",Gt);Gt.ID_PREFIX="xiv.ui.ctrl.VolumeController";Gt.CSS_SUFFIX={};Gt.prototype.add=function(a){Gt.d.add.call(this,a);this.py(a);this.jy(a)};Gt.prototype.py=function(a){var b=this.Wd(lt,"Visible",function(){});Fq(a,b);this.qf.push(b);b.Vg(a);b.A.checked=a[Er]||!1};Gt.prototype.jy=function(a){var b=this.Wd(Ds,"Show Label Map",function(b){a.CO.visible=b.checked});Fq(a,b);this.qf.push(b);b.Vg(a);b.A.of(!1)};Gt.prototype.f=function(){Gt.d.f.call(this)};
v("xiv.ui.ctrl.VolumeController.ID_PREFIX",Gt.ID_PREFIX);v("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",Gt.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController.prototype.add",Gt.prototype.add);v("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",Gt.prototype.py);v("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",Gt.prototype.jy);v("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",Gt.prototype.f);function Ht(){U.call(this);C(It(),function(a,b){this[b]=null})}w(Ht,U);v("xiv.ui.ctrl.XtkControllerTree",Ht);function Jt(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.ctrl.XtkControllerTree.ControlSet",Jt);Ht.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";Ht.CSS_SUFFIX={};function It(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=Ht.prototype;f.cx=function(){};f.UC=function(){return this.Gg([this.$h])};f.cx=function(){return this.Gg([this.qj])};f.pE=function(){return this.Gg([this.xj])};
f.rG=function(){};f.Gg=function(a){var b=[];D(g(a)?a:[a],function(a){null!=a&&(b=Lb(b,a.rz()))});return b};f.bp=function(){var a=this.Gg([this.qj,this.yj,this.xj,this.rj,this.$h,this.ns]);D(a,function(a){a.update()}.bind(this))};
f.yt=function(a,b){a instanceof I?(null==this.yj&&(this.qj=new vt,this.yj=new Gt,this.xj=new st),this.qj.add(a,b),this.yj.add(a,b),this.xj.add(a,b)):a instanceof Aq?(null==this.rj&&(this.rj=new Et),this.rj.add(a,b)):a instanceof Lp&&(null==this.$h&&(this.$h=new Ft),this.$h.add(a));this.volumes=new Jt(null,this.Gg([this.xj]),this.Gg([this.yj]));this.annotations=new Jt(null,this.Gg([this.$h]));this.meshes=new Jt(null,this.Gg([this.rj]));this.levels=new Jt(null,null,this.Gg([this.qj]))};
f.f=function(){Ht.d.f.call(this);null!=this.qj&&(this.qj.g(),delete this.qj);null!=this.yj&&(this.yj.g(),delete this.yj);null!=this.px&&(this.px.g(),delete this.px);null!=this.xj&&(this.xj.g(),delete this.xj);null!=this.rj&&(this.rj.g(),delete this.rj);null!=this.$h&&(this.$h.g(),delete this.$h);null!=this.ns&&(this.ns.g(),delete this.ns)};v("xiv.ui.ctrl.XtkControllerTree.ControlSet",Jt);v("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",Ht.ID_PREFIX);v("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",Ht.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",It);v("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",Ht.prototype.cx);v("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",Ht.prototype.UC);v("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",Ht.prototype.pE);v("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",Ht.prototype.rG);v("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",Ht.prototype.Gg);v("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",Ht.prototype.bp);
v("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",Ht.prototype.yt);v("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",Ht.prototype.f);function Kt(){Yc.call(this);this.Ue=null;this.cc={volumes:[],meshes:[],fibers:[],spheres:[]};this.bi=new kt("X");this.uj=new kt("Y");this.vj=new kt("Z");this.Vb=new jt;this.nc={};this.nc[this.bi.Ib()]=this.bi;this.nc[this.uj.Ib()]=this.uj;this.nc[this.vj.Ib()]=this.vj;this.nc[this.Vb.Ib()]=this.Vb;this.Ng=null;this.Ur(this.Vb);Lt(this)}w(Kt,Dr);v("xiv.vis.XtkEngine",Kt);Kt.ID_PREFIX="xiv.vis.XtkEngine";Kt.SLICE_TO_RAS_KEY="sliceToRAS"+B();Kt.HAS_LABEL_MAP_KEY="hasLabelMap";f=Kt.prototype;f.Er=!1;
f.Yt=function(){return this.cc.volumes};f.Xt=function(){return this.cc.meshes};f.Wt=function(){return this.cc.spheres};function Mt(a,b){null!=b.Nd.Zm&&D(b.Nd.Zm,function(a){this.cc.spheres.push(Nt(a))}.bind(a))}f.XB=function(a,b){switch(a.toLowerCase()){case "x":this.bi.lc(b);break;case "y":this.uj.lc(b);break;case "z":this.vj.lc(b);break;case "v":this.Vb.lc(b)}};f.Ur=function(a){this.Ng=a;this.Ng.ra();this.wK=F(this.Ng,"s",this.sv.bind(this))};f.VG=function(){return this.Ng};f.wv=function(a){this.dispatchEvent(a)};
function Lt(a){C(a.nc,function(a){F(a,"F",this.wv.bind(this));F(a,"H",function(){}.bind(this))}.bind(a))}f.bp=function(){this.Ue.bp()};f.aG=function(){return this.Ue};
function Ot(a,b){null!=a.Ue&&(a.Ue.g(),a.Ue=null);a.Ue=new Ht;null!=(b.Nd&&null!=b.Nd.Zm)&&(Mt(a,b),D(a.cc.spheres,function(a){this.Ue.yt(a)}.bind(a)));var c;D(b.Qd,function(a){c=a.Hg();if(null!=c&&(currXObj=Pt(c,a.Ki),renderProps=a.Nd,currXObj))if(this.Ue.yt(currXObj,renderProps),currXObj instanceof I){"scans"==b.yg.toLowerCase()&&(window.console.log("Turning off reslicing for scan"),currXObj.reslicing=!1);a=currXObj;var e=renderProps;null!=e||(e={origin:[0,0,0],cs:1E4,br:-1E4,Sq:!0,Iw:!1});a.origin=
e.origin;a.upperThreshold=e.cs;a.lowerThreshold=e.br;a.volumeRendering=e.Iw;a[Er]=e.Sq;a[Kt.SLICE_TO_RAS_KEY]=e.dw;null!=e.yA?(a.labelmap.file=e.yA,a.labelmap.colortable.file=e.rI,a[Kt.HAS_LABEL_MAP_KEY]=!0):a[Kt.HAS_LABEL_MAP_KEY]=!1;this.cc.volumes.push(currXObj)}else currXObj instanceof Aq?(a=currXObj,e=renderProps,a.color=e.color||[.5,.5,.5],a.opacity=e.opacity||1,this.cc.meshes.push(currXObj)):currXObj instanceof hq&&(Kt.WO(currXObj,renderProps),this.cc.fibers.push(currXObj))}.bind(a))}
f.vB=function(){this.Ur(this.Vb);this.Vb.ra();C(this.cc,function(a,b){"volumes"!==b&&D(a,function(a){this.Vb.add(a)}.bind(this))}.bind(this));Rc(this.Vb.Oa(),"t",function(){this.sr();this.bi.n()}.bind(this));this.Vb.n()};f.uB=function(a){var b=null!=a?a:this.uq();C(this.nc,function(a,d){"v"!=d.toLowerCase()&&(a.ra(),a.add(b),a.n())})};function Qt(a){var b=a.uq();C(a.cc.volumes,function(a){a!==b&&(a.visible=!1)})}
f.wB=function(){var a=this.uq(),b=[],c=[],d=["x","y","z","v"];C(this.cc,function(a,d){currArr="volumes"==d?c:b;D(a,function(a){currArr.push(a)})}.bind(this));D(b,function(a){this.Vb.add(a)}.bind(this));D(c,function(b){b!==a&&(b.visible=!0,this.Vb.add(b))}.bind(this));this.Ng.Oa().onShowtime=function(){Kb(d,this.Ng.Ib().toLowerCase());Rt(this,a)}.bind(this);this.Ng.add(a);this.Ng.n()};
f.n=function(a){this.Er=!1;Ot(this,a);var b=a.Nd;null!=b?(null!=b.backgroundColor&&this.Vb.Lr(a.Nd.backgroundColor),null!=b.Rp&&this.Vb.Mr(a.Nd.Rp)):(this.Vb.Lr(),this.Vb.Mr());if(0<this.cc.volumes.length){a=this.nc;b="";for(b in a)if(a[b].isEnabled()){this.Ur(a[b]);break}this.wB()}else this.Vb.isEnabled()&&this.vB()};function Rt(a,b){var c=mb(a.nc)-1;C(a.nc,function(a){a!=this.Ng&&a.isEnabled()&&(a.add(b),Rc(a.Oa(),"t",function(){c--;0==c&&this.sr()}.bind(this)),a.n())}.bind(a))}
f.uq=function(){if(0!=this.cc.volumes.length){for(var a=0,b=this.cc.volumes.length;a<b;a++){var c=this.cc.volumes[a];if(c[Er])return c}this.cc.volumes[0][Er]=!0;return this.cc.volumes[0]}};f.k=function(){C(this.nc,function(a){a.k()}.bind(this))};f.sv=function(a){this.Er||this.dispatchEvent({type:"s",value:a.value})};f.sr=function(a){Qt(this);Tc(this.wK);this.Er=!0;this.dispatchEvent({type:"t",value:null!=a?a.value:1})};f.PG=function(){return this.bi};f.QG=function(){return this.uj};f.RG=function(){return this.vj};
f.OG=function(){return this.Vb};f.tq=function(a){return this.nc[a]};f.SG=function(){return this.nc};var St=["nrrd","nii","nii.gz","mgh","mgz"],Tt=["dicom","dcm","ima"],Ut=["hdr","img"],Vt=["nii","nii.gz"],Wt=["jpeg","jpg","gif","png","img"],Xt="stl vtk obj fsm inflated smoothwm pial orig".split(" "),Yt=["trk"];function Zt(a){var b=void 0;$t(a)?b=new Aq:au(a)||bu(a)||cu(a)?b=new I:du(a)&&(b=new hq);return b}
function Nt(a){var b=new Lp;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function au(a){return-1<St.indexOf(a)?!0:!1}function cu(a){return-1<Wt.indexOf(a)?!0:!1}function bu(a){return-1<Tt.indexOf(a)?!0:!1}function $t(a){return-1<Xt.indexOf(a)?!0:!1}function du(a){return-1<Yt.indexOf(a)?!0:!1}
function Pt(a,b){function c(a){var b=qj(a);a=pj(a);return b+"/"+a}var d=g(a)?rj(a[0]):rj(a),d=Zt(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];D(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=ob(b),d.filedata=nb(b)):d.file=a;return d}
Kt.prototype.g=function(){Kt.d.g.call(this);null!=this.Ue&&(this.Ue.g(),delete this.Ue);H(this.bi);H(this.uj);H(this.vj);H(this.Vb);delete this.Ng;sb(this.nc);delete this.nc;this.bi.g();delete this.bi;this.uj.g();delete this.uj;this.vj.g();delete this.vj;this.Vb.g();delete this.Vb;C(this.cc,function(a){C(a,function(a){H(a);sb(a)})});sb(this.cc);delete this.cc;delete this.Er};v("xiv.vis.XtkEngine.EventType",{eN:"F",cN:"G",dN:"H",ERROR:"I",bO:"J",tM:"K",uM:"L"});v("xiv.vis.XtkEngine.ID_PREFIX",Kt.ID_PREFIX);
v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",Kt.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",Kt.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",au);v("xiv.vis.XtkEngine.isImage",cu);v("xiv.vis.XtkEngine.isDicom",bu);v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<Ut.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<Vt.indexOf(a)?!0:!1});
v("xiv.vis.XtkEngine.isMesh",$t);v("xiv.vis.XtkEngine.isFiber",du);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",Kt.prototype.Xt);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",Kt.prototype.Wt);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",Kt.prototype.Yt);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",Kt.prototype.XB);v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",Kt.prototype.Ur);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",Kt.prototype.VG);
v("xiv.vis.XtkEngine.prototype.updateControllers",Kt.prototype.bp);v("xiv.vis.XtkEngine.prototype.getControllerTree",Kt.prototype.aG);v("xiv.vis.XtkEngine.prototype.render3dPlane",Kt.prototype.vB);v("xiv.vis.XtkEngine.prototype.render2D",Kt.prototype.uB);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",Kt.prototype.wB);v("xiv.vis.XtkEngine.prototype.render",Kt.prototype.n);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",Kt.prototype.uq);v("xiv.vis.XtkEngine.prototype.updateStyle",Kt.prototype.k);
v("xiv.vis.XtkEngine.prototype.getPlaneX",Kt.prototype.PG);v("xiv.vis.XtkEngine.prototype.getPlaneY",Kt.prototype.QG);v("xiv.vis.XtkEngine.prototype.getPlaneZ",Kt.prototype.RG);v("xiv.vis.XtkEngine.prototype.getPlaneV",Kt.prototype.OG);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",Kt.prototype.tq);v("xiv.vis.XtkEngine.prototype.getPlanes",Kt.prototype.SG);v("xiv.vis.XtkEngine.prototype.dispose",Kt.prototype.g);function eu(a,b,c){Vm.call(this);this.oC=!0===a;this.nC=!0===b;this.lC=!0===c}w(eu,Vm);v("xiv.ui.HelpDialog",eu);eu.ID_PREFIX="xiv.ui.HelpDialog";eu.CSS={fD:"nrg-ui-helpdialog-dialog",Vk:"nrg-ui-helpdialog-text",UD:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",nj:"xiv-ui-helpdialog-closebutton"};eu.LAYOUT_IMAGE_ID=eu.ID_PREFIX+".LayoutImage";
eu.prototype.n=function(a){eu.d.n.call(this,a);O(this.a(),"xiv-ui-helpdialog");this.ym=new Hs;O(this.ym.a(),eu.CSS.UD);this.ym.n(this.a());fu(this);this.ey(eu.CSS.TITLE);this.Rx(eu.CSS.nj)};eu.prototype.OB=function(a){null!=document.getElementById(eu.LAYOUT_IMAGE_ID)&&(document.getElementById(eu.LAYOUT_IMAGE_ID).src=a)};
function fu(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts","<img height=15 width=15 id="+eu.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.oC&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.nC&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.lC&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.le("Help");D([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';
D(a,function(a){c+="<tr>";D(a,function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}S(c);var n=P("div");n.innerHTML=c;this.ym.Xe(n,[d])}.bind(a))}
eu.prototype.f=function(){eu.d.f.call(this);delete this.oC;delete this.nC;delete this.lC;null!=this.ym&&this.ym.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",eu.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",eu.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",eu.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",eu.prototype.n);v("xiv.ui.HelpDialog.prototype.setLayoutButton",eu.prototype.OB);v("xiv.ui.HelpDialog.prototype.disposeInternal",eu.prototype.f);function gu(a,b,c){Vo.call(this,a,b||Wo.be(),c);this.Yc(16,!0)}w(gu,Vo);Jn("goog-toggle-button",function(){return new gu(null)});function hu(a){U.call(this);this.H={};this.P=a}w(hu,U);v("xiv.ui.ViewBoxDialogs",hu);hu.ID_PREFIX="xiv.ui.ViewBoxDialogs";hu.CSS_SUFFIX={lg:"generic-toggle",mD:"infodialog",nD:"infodialog-text",pD:"inusedialog"};var iu="Info_"+B(),ju="Help_"+B(),ku="InUse_"+B(),lu={jM:iu,eM:ju,mM:ku},mu="ToggleClass_"+B();f=hu.prototype;f.dG=function(){return this.H};f.cG=function(a){return this.H[a]};
f.ln=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.P.Uj("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.H[a].aa(b);this.dispatchEvent({type:b?"M":"N",ez:this.H[a],fz:a})}.bind(this),d);null!=this.H[a]&&this.H[a].g();c=new Vm;this.H[a]=c;Fm(c,null!=k?k:!1);Mm(c,null!=l?l:null);c.n(this.P.zb);Em(c,0);this.H[a].Ce();c.le(e);O(c.a(),b);F(c,"f",function(){this.P.bm(n)}.bind(this));F(c,Im,function(){}.bind(this));this.H[a].aa(!0);this.H[a].Ce();this.H[a].Ce(!1);!1===h&&In(this.P.Jd[a])};
f.mF=function(){this.ln(lu.AM,"xiv-ui-viewboxdialogs-meshes-dialog",hu.CSS.lg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.oF=function(){this.ln(lu.RN,"xiv-ui-viewboxdialogs-volumes-dialog",hu.CSS.lg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.Sy=function(){this.H[ku]=new Vm;Mm(this.H[ku],Pm);this.H[ku].n(this.P.zb);this.H[ku].Hk("ViewBox in use.&nbspProceed anyway?");nu(this);ou(this)};
f.NB=function(a,b){Rc(this.H[ku],Nm,function(c){"yes"===c.key&&null!=a&&a(this);"no"===c.key&&null!=b&&b(this)}.bind(this))};f.Lo=function(){window.console.log("SHOW IN USE");O(this.H[ku].a(),hu.CSS.pD);Fm(this.H[ku],!0);this.H[ku].aa(!0);this.H[ku].Ce()};f.update=function(){C(this.H,function(a){a.GC()})};f.Yo=function(a,b){var c=!1===b?0:1;window.console.log(a,this.H[a]);null!=this.H[a].a()&&uk(this.H[a].a(),200,c)};f.au=function(){return this.H[ju]};
function nu(a){null!=a.H[ju]&&a.H[ju].g();var b=new eu(0<a.P.Oa().Yt().length,0<a.P.Oa().Xt().length,0<a.P.Oa().Wt().length);Fm(b,!1);Mm(b,null);b.n(a.P.zb);b.aa(!1);b.Ce();var c=a.P.Uj("LEFT",hu.CSS.lg,ju,"Help",function(a){a="true"==a.getAttribute("checked");b.aa(a);b.Ce();this.dispatchEvent({type:a?"M":"N",ez:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");F(b,"f",function(){this.P.bm(c)}.bind(a));a.P.bm(c);a.H[ju]=new eu}
function ou(a){null!=a.H[iu]&&a.H[iu].g();currDialog=new Vm;var b="";0<a.P.pb.length?C(a.P.pb[0].ke,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Kk(a.P.pb[0].Qh);Fm(currDialog,!1);currDialog.Lj(b);Mm(currDialog,null);currDialog.n(a.P.zb);currDialog.aa(!0);currDialog.ir("left","top",0,-15);currDialog.le("Info. Display");currDialog.Vv("xiv-ui-viewboxdialogs-infodialog-hovered");O(currDialog.a(),hu.CSS.mD);O(currDialog.ij[0],hu.CSS.nD);var c=a.P.Uj("LEFT",hu.CSS.lg,iu,"Info. Display",
function(a){a="true"==a.getAttribute("checked");currDialog.aa(a);currDialog.ir("left","top",0,-15);this.dispatchEvent({type:a?"M":"N",ez:currDialog})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");F(currDialog,"f",function(){this.P.bm(c)}.bind(a));currDialog.Ov();a.H[iu]=currDialog}f.f=function(){delete this.P;null!=this.H&&(C(this.H,function(a){H(a);a.f();a.g()}.bind(this)),sb(this.H))};v("xiv.ui.ViewBoxDialogs.EventType",{XL:"M",WL:"N"});
v("xiv.ui.ViewBoxDialogs.ID_PREFIX",hu.ID_PREFIX);v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",hu.CSS_SUFFIX);v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",lu);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",mu);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",hu.prototype.dG);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",hu.prototype.cG);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",hu.prototype.ln);v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",hu.prototype.mF);
v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",hu.prototype.oF);v("xiv.ui.ViewBoxDialogs.prototype.createDialogs",hu.prototype.Sy);v("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",hu.prototype.NB);v("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",hu.prototype.Lo);v("xiv.ui.ViewBoxDialogs.prototype.update",hu.prototype.update);v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",hu.prototype.Yo);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",hu.prototype.au);
v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",hu.prototype.f);function V(a,b,c,d){Yc.call(this);this.P=a;this.ka=b;this.Xa=c;this.H=d;this.kd={p:null,c:null};this.$p={x:null,y:null};this.lf={l:!1,m:!1,r:!1};this.rk={up:{},dn:{},ot:{},ov:{}};F(this.H,"M",this.YA.bind(this));a=document.body;this.kb=new Vn;this.kb.sl(a);F(this.kb,"key",this.Nh.bind(this));this.Ok=!1;document.addEventListener("mousemove",this.mw.bind(this),!1)}w(V,Yc);v("xiv.ui.ViewBoxInteractorHandler",V);
var pu="Crosshairs_"+B(),qu="Settings_"+B(),ru="TwoDPan_"+B(),su="TwoDZoom_"+B(),tu={Zc:pu,bN:qu,wN:ru,xN:su};V.CSS={lg:"xiv-ui-viewboxinteractorhandler-generic-toggle",Sw:"xiv-ui-viewboxinteractorhandler-generic-dialog",Tw:"xiv-ui-viewboxinteractorhandler-generic-zippytree",sD:"xiv-ui-viewboxinteractorhandler-levelsdialog",tD:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered"};
V.CURSOR_CSS={rE:"xiv-ui-viewboxinteractorhandler-zoom-follower",Uw:"xiv-ui-viewboxinteractorhandler-viewframe-grab",Xw:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",Vw:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",Ww:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",rx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",sx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};V.ORIENTATION_KEY="Orientation_"+B();f=V.prototype;f.kb=null;f.Qk=null;f.nb=null;f.Jw=!1;
f.Dv=!1;f.dc={};f.Ty=function(){this.$y();uu(this);vu(this);this.Wy();this.Ry(!1);this.Yy();this.Zy();this.Eu()};function wu(a){var b=a.P.zb;C(V.CURSOR_CSS,function(a){yh(b,a)})}function xu(a,b,c,d){b=b?O:yh;b(a.P.zb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.P.zb,d)}function yu(a){xu(a,!0,V.CURSOR_CSS.Uw,V.CURSOR_CSS.Xw);xu(a,!1,V.CURSOR_CSS.Vw,V.CURSOR_CSS.Ww)}function zu(a){xu(a,!1,V.CURSOR_CSS.sx);xu(a,!0,V.CURSOR_CSS.rx)}
f.mw=function(a){this.$p.x=a.clientX||a.pageX;this.$p.y=a.clientY||a.pageY};
f.uJ=function(a){this.wl=a.target;this.kd.p=this.kd.c;this.kd.c=[this.$p.x,this.$p.y];if(null!=this.kd.p){(new Cs(this.kd.c[0],this.kd.c[1])).add(new Cs(this.kd.p[0],this.kd.p[1]));a=this.kd.c[0]-this.kd.p[0];var b=this.kd.c[1]-this.kd.p[1];this.Ok&&(this.tf.style.visibility="hidden");this.Jw?(this.Ok&&this.Ok&&(S(this.tf),Vh(this.wl.yi,this.tf),this.tf.style.visibility="visible",this.tf.style.left=this.kd.c[0]+20+"px",this.tf.style.top=this.kd.c[1]+"px"),zu(this),this.lf.l&&Au(this,a,b)):this.Dv&&
(yu(this),window.console.log(this.lf),this.lf.l&&(xu(this,!1,V.CURSOR_CSS.Uw,V.CURSOR_CSS.Xw),xu(this,!0,V.CURSOR_CSS.Vw,V.CURSOR_CSS.Ww),this.wl.ha.xr([-1*a,-1*b]),this.km()))}};f.qJ=function(){wu(this);this.wl=null;this.Ok&&(this.tf.style.visibility="hidden")};f.qv=function(a){0==a.button?this.lf.l=!0:1==a.button?this.mL.lf.m=!0:2==a.button&&(this.lf.r=!0)};f.rv=function(a){0==a.button?this.lf.l=!1:1==a.button?this.mL.lf.m=!1:2==a.button&&(this.lf.r=!1)};
f.Nh=function(a){window.console.log("On key:",a.keyCode,this.dc);if(this.P.Qq())if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Bu(this,this.wl,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.P.ju(ru);window.console.log("escape","pan",a,a.getAttribute("checked"));"true"==a.getAttribute("checked").toString()&&this.P.Ec(ru);"true"==this.P.ju(su).getAttribute("checked").toString()&&this.P.Ec(su);break;case 90:this.P.Ec(su);break;case 72:case 80:this.P.Ec(ru);break;case 66:case 76:this.P.Ec(this.dc.levels);
break;case 86:this.P.Ec(this.dc.volumes);break;case 77:this.P.Ec(this.dc.meshes);break;case 65:this.P.Ec(this.dc.annotations);break;case 67:this.P.Ec(pu);break;case 83:this.P.Ec(this.dc[qu]);break;case 191:a.shiftKey&&this.P.Ec(ju);break;case 73:this.P.Ec(iu)}};function Au(a,b,c){wu(a);var d=function(){zu(this);this.wl.um()}.bind(a),e=function(){xu(this,!0,V.CURSOR_CSS.sx);xu(this,!1,V.CURSOR_CSS.rx);this.wl.vm()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Cu(a);a.km()}f.fx=0;f.gx=0;
f.uC=function(a){this.fx=a.clientX;this.gx=a.clientY;window.console.log("store mouse coords",this.fx,this.gx)};f.Eu=function(){Du(this,function(a,b){this.rk.ov[b]=F(a.Oa(),"mouseover",this.uJ.bind(this));var c=a.Oa().oc;this.rk.ot[b]=F(c,"mouseleave",this.qJ.bind(this));this.rk.dn[b]=F(c,"mousedown",this.qv.bind(this));this.rk.up[b]=F(c,"mouseup",this.rv.bind(this))}.bind(this))};function Bu(a,b,c){Du(a,function(a,b,h){h.la.J(h.la.K()+c)}.bind(a),b.Ib())}
function Du(a,b,c){if(null!=a.ka){var d=a.Xa.du(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.Ll())};if(s(c)){var h=a.ka.tq(c);if(null==h)throw Error("Invalid plane: ",h);e(a.ka.tq(c),c)}else C(a.ka.nc,function(a,b){e(a,b)}.bind(a))}}f.Zy=function(){this.P.Uj("LEFT",V.CSS.lg,su,"2D Zoom",function(a){wu(this);if(this.Jw=a="true"==a.getAttribute("checked").toString())this.P.Bw(ru),zu(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.P.Ec(su)};
f.Yy=function(){this.P.Uj("LEFT",V.CSS.lg,ru,"2D Pan",function(a){wu(this);if(this.Dv=a="true"==a.getAttribute("checked").toString())yu(this),this.P.Bw(su)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.P.Ec(ru)};f.Ry=function(a){this.P.Uj("LEFT",V.CSS.lg,pu,"Toggle Crosshairs",function(a){this.BC("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.P.Ec(pu)};
f.Wy=function(){this.dc[qu]=qu+"_"+B();this.H.ln(this.dc[qu],V.CSS.Sw,V.CSS.lg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.nb[qu]=new Hs;this.nb[qu].n();var a=this.nb[qu].a();O(a,V.CSS.Tw);this.H.H[this.dc[qu]].a().appendChild(a);this.nb[qu].Dl();a=new Ds;a.n();a.eg("Enable 3D Rendering");a.A.of(!0);this.nb[qu].Xe(a.a(),"3D Rendering");F(a,"p",function(a){this.ka.XB("V",a.checked)}.bind(this));return a};
f.km=function(){Du(this,function(a,b,c,d){Eu(this,b,d)}.bind(this))};
function Fu(a){null!=a.ka&&(Du(a,function(a,c,d,e){var h=d.la,k=d.Kd,l=d.Af;d=d.Zc;h[V.ORIENTATION_KEY]=c;k[V.ORIENTATION_KEY]=c;l[V.ORIENTATION_KEY]=c;d[V.ORIENTATION_KEY]=c;Gu(this);Hu(this);Iu(h,e);Eu(this,h[V.ORIENTATION_KEY],e);Ju(this,h);null!=a.Oa()&&(F(a.Oa(),"J",function(){Cu(this)}.bind(this)),F(h,"v",function(a){Iu(a.target,e);Eu(this,a.target[V.ORIENTATION_KEY],e);Ju(this,a.target)}.bind(this)),F(k,"input",function(a){Ku(this,a.target,e);this.km()}.bind(this)),F(l,"input",function(){a.Oa().jC(l.K()/
100);this.km()}.bind(this)))}.bind(a)),a.ka.bp())}
function Lu(a,b){var c=b.split("_")[0];a.nb[c].Vc();C(a.Qk[c],function(a){null!=a&&D(a,function(a){switch(c.toLowerCase()){case "levels":a instanceof Gq||null==a.A.k?a.update():a.A.k();break;case "volumes":var d=b.split("_")[0];a instanceof lt?(a.A.checked=a.Fc()[Er]||!1,null==this.fs&&(this.fs=[]),-1==this.fs.indexOf(a)&&this.fs.push(a)):"Show Label Map"==a.yb.innerHTML&&(a.Fc()[Kt.HAS_LABEL_MAP_KEY]?a.Fc().labelmap.visible&&!a.A.Fh()&&a.A.of(!0):(S(a.a()),a.a().style.visibility="hidden",a.a().style.height=
"0px"),this.nb[d].Vc());a.update();break;case "meshes":a instanceof nt&&(window.console.log("MESH",a),a.k());break;case "annotations":a instanceof nt&&(window.console.log("ANNOT",a),a.k())}}.bind(this))}.bind(a))}f.YA=function(a,b){null==a.fz&&null==b||Lu(this,null!=b?b:a.fz)};
f.wy=function(){var a,b={},c="DEFAULT_"+B();D(this.Qk.levels.all,function(c){levelMax=hist=null;a=c.Hl;folderStr="";D(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});c instanceof Gq?b[folderStr].Gq=c:c instanceof ut?b[folderStr].reset=c:-1<c.yb.innerHTML.indexOf("Window Max")?b[folderStr].AL=c:b[folderStr][ma(c)]=c}.bind(this));C(b,function(a){a.AL.A.J(a.Gq.Kz(Gq.LEVEL_CUTOFF));a.Gq.update();C(a,function(b){b!=a.Gq&&b!=a.reset&&(b[c]=-1<b.yb.innerHTML.indexOf("Window Min")?0:b.A.K())})});
C(b,function(a){F(a.reset,"p",function(){C(a,function(b){b!=a.Gq&&b!=a.reset&&(b.ga.value=b[c],b.A.J(b[c]))})})})};function Iu(a,b){if(null!=b){var c=a[V.ORIENTATION_KEY],d="Y"==c||"Z"==c?a.ia()-a.K()-1:a.K()-1;"false"==b.reslicing.toString()&&("transverse"==b[I.ORIENTATION_KEY]&&"Z"==c?d+=2:"coronal"==b[I.ORIENTATION_KEY]&&"Y"==c?d+=2:"sagittal"==b[I.ORIENTATION_KEY]&&"X"==c&&(d+=1));b["index"+a[V.ORIENTATION_KEY]]=d}}
function Mu(a,b,c,d,e){var h=a.ka.tq(b).Oa();a=a.Xa.xz().cu(b);b=null;null!=a&&(b=a[$q]);null!=b&&("vertical"==c?b.hC(h.Xz(d,e)):"horizontal"==c&&b.iC(h.Fz(d,e)))}function Eu(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Mu(a,"Y","vertical",b,!0);Mu(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Mu(a,"X","vertical",b,!1);Mu(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Mu(a,"X","horizontal",b,!1),Mu(a,"Y","horizontal",b,!1)}}
function Ju(a,b){Du(a,function(a,b,e){a=e.Kd;e=e.la;a.ld(e.ia());a.Gd(1);a.J(e.K())}.bind(a),b[V.ORIENTATION_KEY])}function Cu(a){Du(a,function(a,c,d){d.Af&&a.Oa()&&(a=a.Oa().aA(),d.Af.K(),d.Af.J(Math.round(100*a)))}.bind(a))}function Ku(a,b,c){null!=c&&Du(a,function(a,c,h){h.la.J(b.K())}.bind(a),b[V.ORIENTATION_KEY])}function uu(a){Du(a,function(a,c,d){null!=d.la&&d.la.J(d.la.ia()/2)}.bind(a))}
function vu(a){Du(a,function(a,c,d,e){if(null!=e[Kt.SLICE_TO_RAS_KEY]&&null!=d.la){slider=d.la;orientation=slider[V.ORIENTATION_KEY];a=e.bbox;e=e[Kt.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.CK[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.lF[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.bF[2]-a[4])/h);slider.J(Math.round(slider.ia()*h)+1)}}.bind(a))}
function Gu(a){var b,c;Du(a,function(a,e,h,k){null!=h.la&&(c=h.la,b=c[V.ORIENTATION_KEY],null!=k&&(c.ld(a.Oa().Pz()),c.Gd(1),null!=b&&c.J(k["index"+b]+1)))})}function Hu(a){var b;Du(a,function(a,d,e,h){null!=e.la&&(b=e.la,playbutton=e.tj,null!=h&&playbutton.cC(b))})}f.bB=function(){Du(this,function(a,b,c,d){Ku(this,c.Kd,d);Cu(this)}.bind(this));this.km()};
f.uw=function(a){var b=!1===a?0:1;Du(this,function(a,d,e){uk(e.la.a(),200,b);uk(e.Kd.a(),200,b);uk(e.Zc.kg,200,b);uk(e.Zc.Rf,200,b);uk(e.Af.a(),200,b)}.bind(this))};f.UH=function(){this.uw(!1);this.H.Yo(iu,!1)};f.UK=function(){this.uw(!0);this.H.Yo(iu,!0)};f.update=function(){this.Xa.cp()};f.BC=function(a){var b=!0==a?"visible":"hidden";Du(this,function(a,d,e){null!=e.Zc&&(e.Zc.kg.style.visibility=b,e.Zc.Rf.style.visibility=b)}.bind(this))};
f.FC=function(){null!=this.Xa&&null!=this.ka&&Du(this,function(a,b,c,d){if(null!=c){var e=c.la;c=c.Kd;e[V.ORIENTATION_KEY]=b;c[V.ORIENTATION_KEY]=b;null!=a.Oa()&&(Ku(this,c,d),e.k())}}.bind(this))};
f.xC=function(a){a.RB(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{fh:hs,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{fh:ps,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{fh:ls,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{fh:fs,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{fh:is,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{fh:ms,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{fh:ns,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{fh:ds,hb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.Xx(c,b.hb);this.Xa.Vx(c,b.fh);"Four-Up"==c&&this.Xa.QB(c)}.bind(this));F(a,"item_selected",this.lJ.bind(this))};f.lJ=function(a){this.Xa.Ik(a.title);null!=this.H&&null!=this.H.au()&&this.H.au().OB(a.target.mk.src)};function Nu(a,b){F(a.nb[b].oa,"c",function(a){this.YA(a,this.dc[b])}.bind(a))}
function Ou(a,b){F(b,"p",function(a){D(this.fs,function(b){var e=b.Fc();b!==a.target?(b.A.checked=!1,e.visible=!1):(e.visible=!0,this.ka.uB(e))}.bind(this))}.bind(a))}function Pu(a,b){C(a.Qk[b],function(a,d){g(a)&&D(a,function(a){var c=a.Hl||[];"all"!==d&&0<c.length&&c.push(d);this.nb[b].Xe(a.a(),c);a instanceof lt&&Ou(this,a)}.bind(this))}.bind(a))}
function Qu(a){a.nb=It();a.dc=vb(a.nb);C(a.nb,function(a,c){var d=!1;switch(c){case "volumes":0==this.ka.Yt().length&&(d=!0);break;case "meshes":0==this.ka.Xt().length&&(d=!0);break;case "annotations":0==this.ka.Wt().length&&(d=!0)}d?tb(this.nb,c):(this.nb[c]=new Hs,this.nb[c].n(),this.dc[c]=c+"_"+B(),Pu(this,c),Nu(this,c))}.bind(a))}f.$y=function(){this.Qk=this.ka.Ue;Qu(this);Ru(this);Fu(this)};
function Ru(a){C(a.nb,function(a,c){var d=!1;C(this.Qk[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.H.ln(this.dc[c],V.CSS.Sw,V.CSS.lg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+cb(c)+".png",cb(c),!1,!1);var e=this.nb[c].a();O(e,V.CSS.Tw);this.H.H[this.dc[c]].a().appendChild(e);1<this.nb[c].oa.ku().length?this.nb[c].gn():(this.nb[c].Dl(),this.nb[c].Vc());"levels"==c&&Su(this)}}.bind(a))}
function Su(a){var b=a.H.H[a.dc.levels];O(b.a(),V.CSS.sD);b.Vv(V.CSS.tD);a.P.Ec(a.dc.levels);D(a.Qk.levels.all,function(a){if(!(a instanceof Gq||a instanceof ut)){var b=a.yb;null!=b&&(b.style.fontSize="9px");a.a().style.height="45px";a.A.a().style.top="28px";a.A.a().style.width="115px";null!=a.A.k&&a.A.k()}}.bind(a));b.ir("right","top",4,50);D(a.nb.levels.oa.ku(),function(a){a.zw(10)});switch(a.P.Nb.xl){case "Four-Up":case "Conventional":case "2D Row":case "2D Widescreen":a.P.Ec(a.dc.levels)}}
f.g=function(){V.d.g.call(this);document.removeEventListener("mousemove",this.mw.bind(this));document.removeEventListener("mousemove",this.mw);null!=this.kb&&(this.kb.g(),delete this.kb);null!=this.dc&&sb(this.dc);delete this.dc;null!=this.nb&&(C(this.nb,function(a){a.g()}),sb(this.nb));delete this.nb;sb(this.kd);delete this.kd;C(this.rk,function(a){C(a,function(a){Tc(a);delete a});sb(a)});sb(this.rk);delete this.rk;this.Ok&&(S(this.tf),delete this.tf);delete this.Ok;delete this.Qk;delete this.Jw;
delete this.Dv;delete this.P;delete this.ka;delete this.Xa;delete this.H};v("xiv.ui.ViewBoxInteractorHandler.EventType",{PM:"O",vM:"P",AN:"Q",YL:"R"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",tu);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",V.ORIENTATION_KEY);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",V.prototype.Ty);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",V.prototype.Zy);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",V.prototype.Yy);v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",V.prototype.Ry);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",V.prototype.Wy);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",V.prototype.km);v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",V.prototype.wy);v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",V.prototype.bB);
v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",V.prototype.uw);v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",V.prototype.UH);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",V.prototype.UK);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",V.prototype.update);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",V.prototype.BC);v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",V.prototype.FC);
v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",V.prototype.xC);v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",V.prototype.$y);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",V.prototype.g);function Tu(){uc.call(this)}w(Tu,uc);v("xiv.utils.ErrorCatcher",Tu);
function Uu(a){function b(a){a.target.g()}var c;g(a)||(a=[a]);null!=c&&!g(c)&&(c=[c]);var d=new Xm;Mm(d,Om);D(a,function(a){d.Lj(a)});null!=c&&D(c,function(a){d.at(a)});d.le("XImgView Error");d.aa(!0);d.a().style.position="fixed";d.a().style.opacity=0;tk(d.a(),400);d.Ni().style.opacity=0;uk(d.Ni(),400,.75);d.a().style.height="250px";a=Oi(d.a());d.a().style.top="calc(50% - "+a.height/2+"px)";d.a().style.left="calc(50% - "+a.width/2+"px)";Rc(d,Nm,b);Rc(d,"f",b)}
function Vu(){var a,b='<a target="_blank" style="color: #5CB8E6"  href=';Yb()?(a="Internet Explorer",b+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">'):Vb("Chrome")||Vb("CriOS")?(a="Chrome",b+='"https://productforums.google.com/forum/#!msg/chrome/CgYesRogD4c/sU1TQsRgnWgJ">'):Vb("Firefox")?(a="Firefox",b+='"https://support.mozilla.org/en-US/questions/984663">'):Zb()?(a="Safari",b+='"https://discussions.apple.com/thread/3300585?start=0">'):Xb()&&(a="Opera",b+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">');
Uu('<br>It looks like <a target="_blank" style="color: #5CB8E6" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">Experimental-WebGL</a> is disabled.<br><br><br>'+(b+("How to enable WebGL in "+a+".</a>")))}Tu.checkForWebGL=function(){var a=P("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};f=Tu.prototype;f.ut=[];f.tm=null;f.kr=null;f.Ic=null;f.Kt=document.body;f.jv=null;f.WB=function(a){this.jv=a};
f.GB=function(a){this.Kt=a};function Wu(a){Ib(a.ut);a.tm=window.console.log;a.kr=function(){a.tm.apply(this,arguments);var b="";D(arguments,function(a,d){0<d&&(b+=" ");b+=a});a.ut.push(b)};window.console.log=a.kr}f.gs=function(a){!0===a?(Wu(this),window.onerror=this.iv.bind(this)):(window.onerror=void 0,null!=this.tm&&(window.console.log=this.tm,this.kr=this.tm=null))};
f.iv=function(a,b,c){if(null==this.Ic){null!=this.jv&&this.jv();var d="",e="";-1<this.ut.indexOf("Unknown number of bits allocated - using default: 32 bits")?(d+='XImgView\'s render engine (<a target="_blank" style="color: #5CB8E6" href="https://github.com/xtk/X#readme">XTK</a>) does not yet support big-endian encoded DICOMs :(<br><br>',e+='<a target="_blank" style="color: #5CB8E6" href="http://stackoverflow.com/questions/22356911/xtk-error-while-loading-dicom-files">For more information click here.</a><br><br>Console reference:<br>\'Unknown number of bits allocated - using default: 32 bits\''):
(d="<b>Render Error!</b><br><br>",s(a)&&(e+=a+"<br>"),s(b)&&(e+="src: "+b+"<br>",t(c)&&(e+=" line: "+c+"<br>")));this.Ic=new Xm;this.Ic.n(this.Kt);Mm(this.Ic,null);this.Ic.Lj(d);this.Ic.at(e);Fm(this.Ic,!0);this.Ic.aa(!0);this.Ic.a().style.opacity=0;this.Ic.Ov();this.Ic.Ce();tk(this.Ic.a(),200);Rc(this.Ic,"f",function(a){a.target.g();this.Ic=null}.bind(this))}};f.clear=function(){null!=this.Ic&&(this.Ic.g(),delete this.Ic)};
f.g=function(){Tu.d.g.call(this);this.clear();delete this.tm;delete this.kr;delete this.Kt};
v("xiv.utils.ErrorCatcher.isCompatible",function(){var a=!0,b=$b(),c={Chrome:{Pn:Vb("Chrome")||Vb("CriOS"),eo:11},IE:{Pn:Yb(),eo:11},Safari:{Pn:Zb(),eo:5.1},Opera:{Pn:Xb(),eo:12},Firefox:{Pn:Vb("Firefox"),eo:4}},d=!1;C(c,function(c){c.Pn&&!d&&1==Ya(c.eo,b)&&(Uu("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>"),a=!1,d=!0)});a&&!Tu.checkForWebGL()&&(Vu(),
a=!1);return a});v("xiv.utils.ErrorCatcher.checkForWebGL",Tu.checkForWebGL);v("xiv.utils.ErrorCatcher.EventType",{ERROR:"S"});v("xiv.utils.ErrorCatcher.prototype.setOnErrorCallback",Tu.prototype.WB);v("xiv.utils.ErrorCatcher.prototype.setDialogParent",Tu.prototype.GB);v("xiv.utils.ErrorCatcher.prototype.waitForError",Tu.prototype.gs);v("xiv.utils.ErrorCatcher.prototype.clear",Tu.prototype.clear);v("xiv.utils.ErrorCatcher.prototype.onError",Tu.prototype.iv);
v("xiv.utils.ErrorCatcher.prototype.dispose",Tu.prototype.g);E&&nc(8);function Xu(){U.call(this);this.Dk=P("div",{id:Xu.ID_PREFIX+"_ProgBarHolder_"+B(),"class":Xu.CSS.JD});Vh(this.a(),this.Dk);this.Lg=P("div",{id:Xu.ID_PREFIX+"_LabelHolder_"+B(),"class":Xu.CSS.rD});Vh(this.a(),this.Lg);this.gh=new sr;this.gh.wb(this.Dk);O(Lh("progress-bar-thumb",this.Dk),Xu.CSS.us)}w(Xu,U);v("xiv.ui.ProgressBarPanel",Xu);Xu.ID_PREFIX="xiv.ui.ProgressBarPanel";Xu.CSS_SUFFIX={us:"thumb",JD:"progbarholder",rD:"labelholder"};f=Xu.prototype;f.Vn="";f.aw=!1;
f.eg=function(a){this.Vn=a;this.Lg.innerHTML=this.Vn};f.$v=function(a){this.aw=null!=a&&!1===a?!1:!0;this.J(this.gh.K())};f.J=function(a){this.gh.J(a);this.gh.a().childNodes[0].style.background="rgb(100,149,237)";this.Lg.innerHTML=this.Vn;this.aw&&(0<this.Vn.length&&(this.Lg.innerHTML+=" "),this.Lg.innerHTML+=this.gh.K().toString()+"%");yh(this.Dk,"progress-bar-horizontal")};f.K=function(){return this.gh.K()};
f.f=function(){Xu.d.f.call(this);null!=this.gh&&(this.gh.g(),delete this.gh);null!=this.Dk&&(S(this.Dk),delete this.Dk);null!=this.Lg&&(S(this.Lg),delete this.Lg);this.Vn=this.aw=null};v("xiv.ui.ProgressBarPanel.EventType",{});v("xiv.ui.ProgressBarPanel.ID_PREFIX",Xu.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",Xu.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",Xu.prototype.eg);v("xiv.ui.ProgressBarPanel.prototype.showValue",Xu.prototype.$v);
v("xiv.ui.ProgressBarPanel.prototype.setValue",Xu.prototype.J);v("xiv.ui.ProgressBarPanel.prototype.getValue",Xu.prototype.K);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",Xu.prototype.f);function Yu(){U.call(this)}w(Yu,Hs);v("nrg.ui.ThumbnailGallery",Yu);Yu.ID_PREFIX="nrg.ui.ThumbnailGallery";Yu.CSS_SUFFIX={fD:"dialog",vs:"thumbnail",xs:"thumbnail-image",rN:"thumbnail-text"};var Zu=B();f=Yu.prototype;f.Xr=!1;f.ew=function(a){this.Xr=a;null!=this.oa&&this.Xr&&this.oa.Qv($u)};f.n=function(a){Yu.d.n.call(this,a);av(this);this.Xr&&this.oa.Qv($u)};
function $u(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Yh(a),d=b[Zu].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[Zu]&&(e=h[Zu].toLowerCase(),e=Ka(d,e),0>e)){Xh(b,h);return}a.appendChild(b)}f.nn=function(a,b){var c=new Es;Ah(c.a(),wh(c.a()),this.jj);Ah(c.Oe,wh(c.Oe),this.Lk);Ah(c.Wa,wh(c.Wa),this.Kk);c.Tv(a);c.Go(b);return c};f.loop=function(a){C(this.Ob,function(b){a(b)})};f.Sv=function(a){this.loop(function(b){Vh(a,b.df())})};
f.rl=function(a,b){pb(this.Ob,a)||(this.Ob=this.Ob?this.Ob:{},this.Ob[a.a().getAttribute("id")]=a,this.Ya.an(a.df()),F(this.Ya,"w",this.hJ.bind(this)),a.a()[Zu]=a.hu().toLowerCase(),this.Xe(a.a(),b),this.Vc(),F(a,"B",function(a){this.dispatchEvent({type:"B",wj:a.target})}.bind(this)),F(a,"C",function(a){this.dispatchEvent({type:"C",wj:a.target})}.bind(this)))};f.Ai=function(a,b,c){a=this.nn(a,b);this.rl(a,c);bv(this,"image");bv(this,"text");bv(this,"thumbnail");this.Vc();return a};
f.Jo=function(){Yu.d.Jo.call(this);F(this.cg,"mouseover",this.uC.bind(this))};f.uC=function(a){this.Wu=a.clientX;this.Xu=a.clientY};function cv(a){C(a.Ob,function(a){a.ko()});a.Qo=null}f.hJ=function(){var a=document.elementFromPoint(this.Wu,this.Xu);(a=ni(a,null,Es.wc))?(a=a.id.replace("HOVERABLE_",""),this.Qo!==a&&(cv(this),this.Qo=a,this.Ob[this.Qo].rr()),this.Ob[this.Qo].Mv()):cv(this)};
function bv(a,b){var c,d=[],e="";for(e in a.Ob){switch(b){case "thumbnail":d=a.jj;c=a.Ob[e].a();break;case "image":d=a.Kk;c=a.Ob[e].Wa;break;case "text":d=a.Lk,c=a.Ob[e].Oe}Ah(c,wh(c),d)}}f.$x=function(a){null!=this.jj||av(this);this.jj.push(a);bv(this,"thumbnail")};f.cy=function(a){this.Kk.push(a);bv(this,"image")};f.dy=function(a){this.Lk.push(a);bv(this,"text")};f.k=function(a){a&&ok(this.a(),a)};
function av(a){var b=new Es;a.jj=wh(b.a());a.jj.push(Yu.CSS.vs);a.Kk=wh(b.Wa);a.Kk.push(Yu.CSS.xs);a.Lk=wh(b.Oe);a.Lk.push(Yu.CSS.lx);S(b.a());delete b}f.f=function(){Yu.d.f.call(this);delete this.Xr;null!=this.Wu&&delete this.Wu;null!=this.Xu&&delete this.Xu;null!=this.Ob&&(this.qn(this.Ob),delete this.Ob);null!=this.oa&&(H(this.oa),this.oa.g(),delete this.oa);null!=this.jj&&(Ib(this.jj),delete this.jj);null!=this.Kk&&(Ib(this.Kk),delete this.Kk);null!=this.Lk&&(Ib(this.Lk),delete this.Lk);delete this.Qo};
v("nrg.ui.ThumbnailGallery.ID_PREFIX",Yu.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",Yu.CSS_SUFFIX);v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",Zu);v("nrg.ui.ThumbnailGallery.thumbnailSorter",$u);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",Yu.prototype.ew);v("nrg.ui.ThumbnailGallery.prototype.render",Yu.prototype.n);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",Yu.prototype.nn);v("nrg.ui.ThumbnailGallery.prototype.loop",Yu.prototype.loop);
v("nrg.ui.ThumbnailGallery.prototype.setHoverParent",Yu.prototype.Sv);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",Yu.prototype.rl);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Yu.prototype.Ai);v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",Yu.prototype.Jo);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",Yu.prototype.$x);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",Yu.prototype.cy);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",Yu.prototype.dy);
v("nrg.ui.ThumbnailGallery.prototype.updateStyle",Yu.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",Yu.prototype.f);function dv(){U.call(this)}w(dv,U);v("xiv.ui.ViewableGroupMenu",dv);dv.ID_PREFIX="xiv.ui.ViewableGroupMenu";dv.CSS_SUFFIX={hp:"header",vs:"thumbnail",lx:"thumbnail-text",xs:"thumbnail-image",aE:"thumbnailgallery",gp:"background"};f=dv.prototype;f.T=null;f.Pc=null;f.Ml=null;
f.n=function(a){dv.d.n.call(this,a);this.Pc=P("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});O(this.Pc,this.constructor.CSS.gp);null!=this.a().parentNode?Vh(this.a().parentNode,this.Pc):Vh(this.a(),this.Pc);this.Ml=P("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":dv.CSS.hp});this.Ml.innerHTML="<b> Select View <b>";Vh(this.a(),this.Ml);null!=this.T||this.reset()};f.nq=function(){return this.Pc};f.show=function(){tk(this.a(),$l.GL)};
f.Ai=function(a,b){null!=this.T||this.reset();var c=this.T.Ai(a,b);ev(this,c);return c};f.Pl=function(){wk(this.a(),500);S(this.a())};f.reset=function(){null!=this.T&&(this.T.g(),delete this.T);this.T=new Yu;this.T.ew(!0);this.T.n(this.a());O(this.T.a(),dv.CSS.aE);this.T.$x(dv.CSS.vs);this.T.cy(dv.CSS.xs);this.T.dy(dv.CSS.lx)};function ev(a,b){F(b,"D",function(){this.dispatchEvent({type:"T",rw:b})}.bind(a))}
f.f=function(){dv.d.f.call(this);null!=this.Pc&&(S(this.Pc),delete this.Pc);null!=this.Ml&&(S(this.Ml),delete this.Ml);null!=this.T&&(this.T.g(),delete this.T)};v("xiv.ui.ViewableGroupMenu.ID_PREFIX",dv.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{ON:"T"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",dv.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",dv.prototype.n);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",dv.prototype.nq);v("xiv.ui.ViewableGroupMenu.prototype.show",dv.prototype.show);
v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",dv.prototype.Ai);v("xiv.ui.ViewableGroupMenu.prototype.hide",dv.prototype.Pl);v("xiv.ui.ViewableGroupMenu.prototype.reset",dv.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",dv.prototype.f);var fv;function gv(a,b,c,d,e){this.Rj=a;this.uk=b;this.sy=c;this.YE=d;this.no=e}gv.prototype.getName=function(){return this.uk};function hv(a){return!a.uk||"[object Object]"==a.Rj}
function iv(a){var b=[a.Rj?jv(a.Rj)+".":"",a.uk?jv(kv(a.uk)):"anonymous",jv(a.YE),a.sy?" [as "+jv(kv(a.sy))+"]":""];if(a.no)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.no.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',jv(a.no),"', '",c,"'); return false\">",jv(a.no),"</a>")}else b.push(jv(a.no));return b.join("")}
var lv=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,mv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,nv=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
ov=/^function ([a-zA-Z_$][\w$]*)/,pv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function qv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(ov),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");s(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new gv("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function rv(a){var b=a.match(lv);if(b)return new gv(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new gv("",e,"",d,h)}return(b=a.match(mv))?new gv("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(nv))?new gv(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(pv))?new gv("",b[1]||"","","",b[2]||
""):null}function kv(a){return fv?fv(a):a}function jv(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function sv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){fv=a});function tv(a,b){return a==b}function uv(a,b){return a.toString()===b.toString()}var vv={String:tv,Number:tv,Boolean:tv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:uv,Function:uv};function wv(a,b,c){return Math.abs(a-b)<=c}var xv={Number:wv};
function yv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function zv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+yv(a)+")");return b}function Av(a,b){return b.length==a+1?b[0]:null}function Bv(a,b,c){return c.length==b+1?c[a]:c[a-1]}function Cv(a,b){b.length==a||b.length==a+1&&s(b[0])||Dv(null,"Incorrect arguments passed to assert function")}
function Kv(a,b){var c="Expected "+zv(a)+" but was "+zv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function Lv(a,b){Cv(1,arguments);var c=Av(1,arguments),d=Bv(1,1,arguments);ia(d)||Dv(c,"Bad argument to assert(boolean)");d||Dv(c,"Call to assert(boolean) with false")}function Mv(a,b){Cv(1,arguments);var c=Av(1,arguments),d=Bv(1,1,arguments);ia(d)||Dv(c,"Bad argument to assertTrue(boolean)");d||Dv(c,"Call to assertTrue(boolean) with false")}function Nv(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments),h=Kv(d,e);d===e||Dv(Av(2,arguments),h)}
function Ov(a,b){Cv(1,arguments);var c="Expected not to be "+zv(null);null!==Bv(1,1,arguments)||Dv(Av(1,arguments),c)}function Pv(a,b){Cv(1,arguments);var c="Expected not to be "+zv(void 0);void 0!==Bv(1,1,arguments)||Dv(Av(1,arguments),c)}
function Qv(a,b,c){function d(a,b,c){for(var p=0;p<h.length;++p){var r=h[p]===a,u=k[p]===b;if(r||u){r&&u||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(p=yv(a),r=yv(b),p==r){var u="Array"==p,z=l(p,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(u&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(u?"[%s]":c?".%s":"%s"),a.__iterator__)ja(a.Bl)?a.Bl(b)||e.push("equals() returned false for "+(c||
p)):a.vb?d(a.vb,b.vb,z.replace("%s","map_")):e.push("unable to check "+(c||p)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)u&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||r)));for(y in b)u&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||p));if(u)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+Kv(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=vv[a])?a(b,c)?"":Kv(b,c):null};d(a,b,"");return 0==e.length?null:Kv(a,b)+"\n   "+e.join("\n   ")}function Rv(a,b,c){Cv(2,arguments);var d=Av(2,arguments)?Av(2,arguments):"",e=Qv(Bv(1,2,arguments),Bv(2,2,arguments));!e||Dv(d,e)}function Sv(a,b,c,d){Cv(3,arguments);var e=Bv(1,3,arguments),h=Bv(2,3,arguments),k=Bv(3,3,arguments);wv(e,h,k)||Dv(Av(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function Tv(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function Uv(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function Vv(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function Dv(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new Wv(a,b);}
function Wv(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=sv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new gv("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(rv(c[e]));c=d}else c=qv();for(d=c.length-1;c[d]&&hv(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(iv(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,Wv):this.stack=Error().stack||""}w(Wv,Error);Wv.prototype.toString=function(){return this.message};v("fail",function(a){Dv("Call to fail()",a)});v("assert",Lv);
v("assertThrows",function(a,b){Cv(1,arguments);var c=Bv(1,1,arguments),d=Av(1,arguments);"function"==typeof c||Dv(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&s(e.stacktrace)&&s(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}Dv(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){Cv(1,arguments);var c=Av(1,arguments),d=Bv(1,1,arguments);"function"==typeof d||Dv(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",Dv(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",Mv);
v("assertFalse",function(a,b){Cv(1,arguments);var c=Av(1,arguments),d=Bv(1,1,arguments);ia(d)||Dv(c,"Bad argument to assertFalse(boolean)");!d||Dv(c,"Call to assertFalse(boolean) with true")});v("assertEquals",Nv);v("assertNotEquals",function(a,b,c){Cv(2,arguments);var d=Bv(2,2,arguments),e="Expected not to be "+zv(d);Bv(1,2,arguments)!==d||Dv(Av(2,arguments),e)});v("assertNull",function(a,b){Cv(1,arguments);var c=Bv(1,1,arguments),d=Kv(null,c);null===c||Dv(Av(1,arguments),d)});
v("assertNotNull",Ov);v("assertUndefined",function(a,b){Cv(1,arguments);var c=Bv(1,1,arguments),d=Kv(void 0,c);void 0===c||Dv(Av(1,arguments),d)});v("assertNotUndefined",Pv);v("assertNotNullNorUndefined",function(a,b){Cv(1,arguments);Ov.apply(null,arguments);Pv.apply(null,arguments)});v("assertNonEmptyString",function(a,b){Cv(1,arguments);var c=Bv(1,1,arguments),d="Expected non-empty string but was "+zv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||Dv(Av(1,arguments),d)});
v("assertNaN",function(a,b){Cv(1,arguments);isNaN(Bv(1,1,arguments))||Dv(Av(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){Cv(1,arguments);!isNaN(Bv(1,1,arguments))||Dv(Av(1,arguments),"Expected not NaN")});v("assertObjectEquals",Rv);
v("assertObjectRoughlyEquals",function(a,b,c,d){Cv(3,arguments);var e=Bv(3,3,arguments),h=Av(3,arguments)?Av(3,arguments):"",k=Qv(Bv(1,3,arguments),Bv(2,3,arguments),function(a,b,c){return(a=xv[a])?a(b,c,e)?"":Kv(b,c)+" which was more than "+e+" away":null});!k||Dv(h,k)});v("assertObjectNotEquals",function(a,b,c){Cv(2,arguments);var d=Av(2,arguments)?Av(2,arguments):"";Qv(Bv(1,2,arguments),Bv(2,2,arguments))||Dv(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments),h=Av(2,arguments)?Av(2,arguments):"",k=yv(d);"Array"==k||Dv(h,"Expected an array for assertArrayEquals but found a "+k);k=yv(e);"Array"==k||Dv(h,"Expected an array for assertArrayEquals but found a "+k);Rv(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments),h=Av(2,arguments)?Av(2,arguments):"";if(d){Nv("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)Nv("mismatch at index "+k+": "+h,d[k],e[k])}else Lv(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){Cv(3,arguments);var e=Bv(1,3,arguments),h=Bv(2,3,arguments),k=Bv(3,3,arguments),l=Av(3,arguments)?Av(3,arguments):"";if(e){Nv("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)Sv(l,e[n],h[n],k)}else Lv(l,!h)});
v("assertSameElements",function(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments),h=Av(2,arguments);Mv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ha(d)&&ha(e));d=Tv(d);e=Tv(e);d.length==e.length||Dv(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=Tv(d),l=0;l<e.length;l++){var n=Uv(k,e[l]);-1!=n||Dv(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){Cv(1,arguments);Bv(1,1,arguments)||Dv(Av(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){Cv(1,arguments);Bv(1,1,arguments)&&Dv(Av(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){Cv(2,arguments);var d=Bv(2,2,arguments),e=Vv(Bv(1,2,arguments)),d=Vv(d),h=Kv(e,d);e===d||Dv(Av(2,arguments),h)});
v("assertHashEquals",function(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments),h=Av(2,arguments),k;for(k in d)k in e||Dv(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||Dv(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||Dv(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",Sv);
v("assertContains",function(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments);-1!=Uv(e,d)||Dv(Av(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments);-1==Uv(e,d)||Dv(Av(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){Cv(2,arguments);var d=Bv(1,2,arguments),e=Bv(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||Dv(Av(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function Xv(){U.call(this);this.pb=[];this.op={};this.Cb={vN:null,zm:null,mg:null,VC:null,HL:null,WC:null,RD:null,bE:null};this.Cb.zm=P("div",{id:Xv.ID_PREFIX+"_menu_top_left_"+B(),"class":Xv.CSS.CD,viewbox:this.a().id});Vh(this.a(),this.Cb.zm);this.zb=P("div",{id:Xv.ID_PREFIX+"_ViewFrame_"+B(),"class":Xv.CSS.lE});Vh(this.a(),this.zb);this.Wb=new Xu;Vh(this.zb,this.Wb.a());this.Wb.a().style.opacity=0;Yv(this.Wb);this.k();this.Eu()}w(Xv,U);v("xiv.ui.ViewBox",Xv);Xv.ID_PREFIX="xiv.ui.ViewBox";
Xv.CSS_SUFFIX={fM:"hidden",kN:"tabdragger",lN:"tabdragger-handle",nE:"viewlayoutmenu",CD:"menu-top-left",BD:"menu-left",mE:"viewlayouthandler",mN:"ziptabs",nN:"ziptab-bounds",lE:"viewframe",Ow:"component-highlight",hE:"viewablegroupmenu",$L:"emptymenubutton"};var Zv={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=Xv.prototype;f.vI="empty";f.Jd=null;f.Xa=null;f.Nb=null;f.ka=null;f.Wb=null;f.sd=null;f.H=null;f.dh=null;f.ue=null;f.lA=!1;f.ks=!1;f.pm=null;f.Ck=null;f.qm=null;
f.Wl=!1;f.nI=function(){return this.Wl};f.Oa=function(){return this.ka};f.HG=function(){return this.Cb};f.BG=function(){return this.vI};f.zH=function(){return this.pb};f.vH=function(){return this.zb};f.zG=function(){return this.Xa};f.AG=function(){return this.Nb};f.xH=function(){return this.sd};f.Sl=function(){O(this.zb,Xv.CSS.Ow)};f.sm=function(){yh(this.zb,Xv.CSS.Ow)};f.mH=function(){return this.Xh};f.Ky=function(){this.Xh=void 0};f.AF=function(a){this.Nt=this.Nt?this.Nt:[];this.Nt.push(a)};
f.Ik=function(a){this.Nb.Eo(a)};f.BJ=function(){this.Wb.J(0);this.Wb.$v(!0);$v(this,this.Wb,0);this.Sl()};function aw(a,b){a.Wb.eg("");a.Wb.$v(!0);a.Wb.J(100*b)}f.sv=function(a){if(this.ks)aw(this,.5*a.value+.5);else if(1<this.qm){var b=1/this.qm;if(.96<a.value&&this.Ck!=a.value&&.96>this.Ck&&this.Ck<a.value)this.pm++,aw(this,b*this.pm);else{this.Ck=a.value;var b=1/this.qm,c=b*this.pm+a.value*b;this.Ck<a.value&&aw(this,c+a.value*b)}}else aw(this,a.value)};
function bw(a,b){Wf(function(){Yv(this.Wb,t(void 0)?void 0:500,function(){this.k();null!=b&&b()}.bind(this))}.bind(a),t(800)?800:1E3)}f.sr=function(){this.dh.gs(!1);D(Kh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.H.Sy();this.Wl=this.ks=!1;null!=this.pb[0].Ib()&&this.Ik(this.pb[0].Ib());cw(this);this.ue.Ty();this.ue.wy();bw(this,function(){this.Wb.J(0);this.k();this.qr();this.dispatchEvent("V");this.sm()}.bind(this))};
f.nv=function(a){C(this.ka.nc,function(b,c){null!=a.xw[c]&&(b.Gk(a.xw[c]),b.k())})};f.qr=function(){this.ka&&this.ka.k();null!=this.ue&&this.ue.update();null!=this.ka&&this.ue.bB()};function dw(a,b){a.sd.reset();sb(a.op);Hb(a.pb,b)||a.pb.push(b);1==a.pb.length&&a.Ik(Zv[b.yg]);var c=b.$c,d=null;1<c.length?(D(c,function(a,b){d=this.sd.Ai(a.mm,a.ce()||b);this.op[ma(d)]=a}.bind(a)),Yv(a.Wb,0),$v(a,a.sd,400)):a.load(c[0],!1)}f.Lo=function(){this.H.Lo()};
f.rt=function(a){return null!=this.Xh?(this.Lo(),this.H.NB(a),!0):!1};
f.load=function(a,b){Yv(this.Wb,0);null!=this.dh?(this.dh.clear(),this.dh.gs(!1)):(this.dh=new Tu,this.dh.GB(this.zb),this.dh.WB(this.tr.bind(this)));this.dispatchEvent("U");if(!this.rt(function(){this.Xh=void 0;this.load(a,b)}.bind(this)))if(this.Wl=!0,null!=a){if(b=null!=b?b:!0)ew(this),fw(this),this.H=new hu(this),this.Xa=new qs,this.Xa.a().style.opacity=0,Vh(this.zb,this.Xa.a()),O(this.Xa.a(),Xv.CSS.mE),F(this.Xa,"A",this.qr.bind(this)),F(this.Xa,"x",this.nv.bind(this)),F(this.Xa,"z",this.pv.bind(this)),
F(this.Xa,"y",this.mv.bind(this)),this.ka=new Kt,gw(this),this.ue=new V(this,this.ka,this.Xa,this.H),this.ue.xC(this.Nb),this.lA=!0;Yv(this.sd,400);$v(this,this.Wb,0);if(a instanceof Pl)dw(this,a);else{var c;C(this.ka.nc,function(a,b){(c=this.Xa.yz(b))&&a.ra(c.a())}.bind(this));Rc(this.ka,"r",this.BJ.bind(this));Rc(this.ka,"t",this.sr.bind(this));F(this.ka,"s",this.sv.bind(this));this.pm=null;"scans"==a.yg.toLowerCase()?hw(this,a):(this.Sl(),iw(this,a),jw(this,a))}}else this.tr("The data set is empty!")};
function iw(a,b){a.pm=0;a.Ck=0;a.qm=b.Qd.length+8;D(b.Qd,function(a){null!=a.Nd.labelMapFile&&this.qm++}.bind(a))}
function hw(a,b){$v(a,a.Wb,0);aw(a,0);a.ks=!0;var c=a.pb[a.pb.length-1].Wz(),d=b.Qd[0].Hg()[0],e="";null!=d?(-1!=d.toLowerCase().indexOf("xiv/sample-data/scans/")?(d=d.split("xiv/sample-data/scans/"),e=d[0]+"xiv/sample-data/scans/"+(d[1].split("/")[0]+".zip")):e=d.split("/files/")[0]+"/files",window.console.log("XImgView Zip Downloading (XHR): "+e),ul(e,function(a){b.Qd[0].HB(a);jw(this,b)}.bind(a),function(a){this.Sl();0<a.totalSize?aw(this,a.loaded/a.totalSize*.5):0<c&&aw(this,a.loaded/c*.5)}.bind(a))):
a.dh.iv("No readable files in the data set!")}function jw(a,b){a.dh.gs(!0);a.ka.n(b);a.Xh=(new Date).getTime()}f.tr=function(){this.Wl=!1;this.sm();Yv(this.Wb);ew(this);this.Ky();this.dispatchEvent({type:"W"})};f.pv=function(){C(this.ka.nc,function(a){a.k()});this.ue.update()};f.mv=function(a){var b=a.frames;C(this.ka.nc,function(a,d){null!=b[d]&&(a.Gk(b[d].a()),a.k())}.bind(this));this.ue.update()};
function cw(a){var b=0,b=t(b)?b:500,c=[];D([a.Cb.mg,a.Nb.a(),a.Xa.a()],function(a){c.push(Ak(a,{opacity:0},{opacity:1},b))});Ik(c,null,null,void 0)}function Yv(a,b,c){if(null!=a){b=t(b)&&0<=b?b:0;var d=function(){a.a().style.visibility="hidden";S(a.a());null!=a.nq&&S(a.Pc);c&&c()};"hidden"==a.a().style.visibility||0==b?d():(wk(a.a(),b,d),null!=a.nq&&wk(a.Pc,b,d))}}
function $v(a,b,c){c=t(c)&&0<=c?c:0;b.a().style.opacity="0";b.a().style.visibility="visible";Vh(a.zb,b.a());0==c?b.a().style.opacity="1":(tk(b.a(),c,function(){}),null!=b.nq&&(Vh(a.zb,b.Pc),tk(b.Pc,c,function(){})))}f.as="Info. Display;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");
function kw(a,b,c,d){var e=Yh(b),h=[],k;D(a.as,function(){h.push(null)});h[d]=c;D(e,function(a){k=this.as.indexOf(a.title);h[k]=a}.bind(a));Wh(b);D(h,function(a){null!=a&&b.appendChild(a)})}
f.Mj=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Cb.zm;break;case "LEFT":d=this.Cb.mg;break;case "BOTTOM_LEFT":d=this.Cb.VC;break;case "TOP_RIGHT":d=this.Cb.bE;break;case "RIGHT":d=this.Cb.RD;break;case "BOTTOM_RIGHT":d=this.Cb.WC}t(c)?d.insertBefore(b,d.childNodes[c]):(a=this.as.indexOf(b.title),0<a?kw(this,d,b,a):Vh(d,b));lw(this)};
f.bm=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?O(a,a.getAttribute(mu)):yh(a,a.getAttribute(mu));null!=b&&b(a)};f.AC=function(a){return"true"==this.Jd[a].getAttribute("checked").toString()};f.ju=function(a){return this.Jd[a]};f.Ec=function(a){In(this.Jd[a])};f.Bw=function(a){g(a)||(a=[a]);D(a,function(a){null!=this.Jd[a]&&this.AC(a)&&In(this.Jd[a])}.bind(this))};
f.Uj=function(a,b,c,d,e,h){var k=b+"-on",l=P("img",b);l.id=ij(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(mu,b+"-on");O(l,k);ok(l,{cursor:"pointer"});F(l,"click",function(){this.bm(l,e)}.bind(this));this.Mj(a,l);if(null==this.Jd)this.Jd={};else if(null!=this.Jd[c])throw Error("Invalid identifier for toggle button.  In use.");return this.Jd[c]=l};
function fw(a){a.Cb.mg=P("div",{id:Xv.ID_PREFIX+"_menu_left_"+B(),"class":Xv.CSS.BD,viewbox:a.a().id});a.Cb.mg.style.opacity=0;Vh(a.a(),a.Cb.mg);a.Nb=new dp;a.Nb.FB("Select Layout");O(a.Nb.a(),Xv.CSS.nE);a.Nb.KA(!0);a.Nb.a().style.opacity=0;a.Nb.ee.style.opacity=0;var b=a.Nb.a();Nb(a.as,void 0,0,b.title);a.Mj("LEFT",b);a.zb.appendChild(a.Nb.ee)}
function gw(a){a.sd=new dv;a.sd.n(a.zb);Vh(a.zb,a.sd.a());Vh(a.zb,a.sd.Pc);O(a.sd.a(),Xv.CSS.hE);F(a.sd,"T",function(a){this.load(this.op[ma(a.rw)],!1)}.bind(a));Yv(a.sd)}f.oH=function(){return this.Jd};function lw(a){var b,c,d,e;null!=a.Cb.zm&&(d=a.Cb.zm,e=Oi(d),b=0,c=e.height);null!=a.Cb.mg&&(d=a.Cb.mg,e=Oi(d),a=a.u.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.k=function(a){Xv.d.k.call(this,a);null!=this.Xa&&this.Xa.k();this.ka&&this.ka.k();null!=this.Nb&&(a=Ai(this.Cb.mg),Oi(this.Nb.ee),a=a.y-130,this.Nb.LB(0,a),this.Nb.bC(0,a));lw(this);null!=this.H&&this.H.update();null!=this.ue&&this.ue.FC()};
function ew(a){sb(a.op);Ib(a.pb);null!=a.Xa&&(H(a.Xa),zc(a.Xa.g()),delete a.Xa);null!=a.Nb&&(H(a.Nb),a.Nb.g(),delete a.Nb);null!=a.ka&&(a.ka.g(),delete a.ka);null!=a.sd&&(a.sd.g(),delete a.sd);null!=a.H&&a.H.f();null!=a.ue&&a.ue.g();null!=a.Jd&&(S(a.Cb.mg),delete a.Cb.mg,C(a.Jd,function(a){H(a);S(a)}),Ib(a.Jd),delete a.Jd)}f.Rq=!1;f.Qq=function(){return this.Rq};f.Eu=function(){F(this.a(),"mouseenter",function(){this.Rq=!0}.bind(this));F(this.a(),"mouseleave",function(){this.Rq=!1}.bind(this))};
f.f=function(){Xv.d.f.call(this);ew(this);null!=this.Wb&&(this.Wb.g(),delete this.Wb);S(this.zb);H(this.zb);delete this.zb;C(this.Cb,function(a,b){S(a);delete this.Cb[b]}.bind(this));delete this.Cb;delete this.aO;delete this.lA;delete this.ks;delete this.Rq;delete this.pm;delete this.Ck;delete this.qm};v("xiv.ui.ViewBox.EventType",{jE:"U",iE:"V",NM:"W"});v("xiv.ui.ViewBox.ID_PREFIX",Xv.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",Xv.CSS_SUFFIX);v("xiv.ui.ViewBox.defaultLayout",Zv);
v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",Xv.prototype.Oa);v("xiv.ui.ViewBox.prototype.getMenus",Xv.prototype.HG);v("xiv.ui.ViewBox.prototype.getLoadState",Xv.prototype.BG);v("xiv.ui.ViewBox.prototype.getViewableTrees",Xv.prototype.zH);v("xiv.ui.ViewBox.prototype.getViewFrame",Xv.prototype.vH);v("xiv.ui.ViewBox.prototype.getLayoutHandler",Xv.prototype.zG);v("xiv.ui.ViewBox.prototype.getLayoutMenu",Xv.prototype.AG);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",Xv.prototype.xH);v("xiv.ui.ViewBox.prototype.highlight",Xv.prototype.Sl);v("xiv.ui.ViewBox.prototype.unhighlight",Xv.prototype.sm);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",Xv.prototype.mH);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",Xv.prototype.Ky);v("xiv.ui.ViewBox.prototype.doNotHide",Xv.prototype.AF);v("xiv.ui.ViewBox.prototype.setLayout",Xv.prototype.Ik);v("xiv.ui.ViewBox.prototype.showInUseDialog",Xv.prototype.Lo);
v("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",Xv.prototype.rt);v("xiv.ui.ViewBox.prototype.load",Xv.prototype.load);v("xiv.ui.ViewBox.prototype.addToMenu",Xv.prototype.Mj);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",Xv.prototype.bm);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",Xv.prototype.AC);v("xiv.ui.ViewBox.prototype.getToggleButton",Xv.prototype.ju);v("xiv.ui.ViewBox.prototype.fireToggleButton",Xv.prototype.Ec);v("xiv.ui.ViewBox.prototype.untoggle",Xv.prototype.Bw);
v("xiv.ui.ViewBox.prototype.createToggleButton",Xv.prototype.Uj);v("xiv.ui.ViewBox.prototype.getToggleButtons",Xv.prototype.oH);v("xiv.ui.ViewBox.prototype.isMouseOver",Xv.prototype.Qq);v("xiv.ui.ViewBox.prototype.isRendering",Xv.prototype.nI);v("xiv.ui.ViewBox.prototype.updateStyle",Xv.prototype.k);v("xiv.ui.ViewBox.prototype.disposeInternal",Xv.prototype.f);function mw(){An.call(this)}w(mw,An);mw.prototype.Kj=function(a,b){var c=new Gn(a,b);c.Bo(this);this.Sn.push(c);this.Wi&&Bn(this,c)};function nw(){U.call(this)}w(nw,U);v("xiv.ui.ViewBoxHandler",nw);nw.CSS_SUFFIX={iD:"handle",kE:"viewboxdragclone",nj:"closebutton",Mw:"addrowbutton",Lw:"addcolumnbutton"};nw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=nw.prototype;f.qs=5;f.dx=5;f.Wk=document.body;f.Yi=function(a,b){this.dispatchEvent({type:"Z",VA:a,UE:b})};f.BK=function(){return this.w.length};f.yn=function(){var a=[];D(this.w,function(b,c){a.push([]);D(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.w&&D(this.w,function(b,c){D(b,function(d,e){a(d,c,e,this.w.length,b.length)}.bind(this))}.bind(this))};f.tu=function(a,b){this.w||(this.w=[[]]);var c=0,d=[],e;if(null!=a)c=ow(this,a),this.w[c.Hq].length<this.dx&&(d.push(pw(this)),Nb(this.w[c.Hq],c.pI+1,0,d[0]));else{d=[];e=this.w.length?this.w.length:1;for(c=0;c<e;c++)d.push(pw(this));0===this.w.length?this.w.push([d[0]]):D(this.w,function(a,b){a.push(d[b])})}this.Yi(d,void 0===b?!0:b);qw(this)};
f.sK=function(a){this.w&&(a=void 0===a?!0:a,this.w[0]&&1<this.w[0].length&&D(this.w,function(a){var c=a.length-1;rw(this,a[c]);a.splice(c,1)}.bind(this)),this.Yi(null,a),qw(this))};function ow(a,b){for(var c=0,d=0,e=a.w.length,h=0,c=0;c<e;c++)for(d=0,h=a.w[c].length;d<h;d++)if(b===a.w[c][d])return{Hq:c,pI:d}}f.As=function(){for(var a=0,b=0,c=this.w.length,d=0,a=0;a<c;a++)for(b=0,d=this.w[a].length;b<d;b++)if(this.w[a][b].Wl)return!0;return!1};
f.insertRow=function(a,b){this.w||(this.w=[[]]);var c=[],d,e;if(null!=a){var h=ow(this,a),c=[];e=this.w[h.Hq].length;if(this.w.length<this.qs){for(d=0;d<e;d++)c.push(pw(this));Nb(this.w,h.Hq+1,0,c)}}else if(e=this.w[0]&&this.w[0].length?this.w[0].length:1,this.w.length<this.qs){for(d=0;d<e;d++)c.push(pw(this));this.w.push(c)}this.Yi(c,void 0===b?!0:b);qw(this)};
f.uK=function(a){this.w&&(a=void 0===a?!0:a,1<this.w.length&&(D(this.w[this.w.length-1],function(a){rw(this,a)}.bind(this)),this.w.splice(this.w.length-1,1)),this.Yi(null,a),qw(this))};f.xq=function(a){for(var b=0,c=0,d=this.w.length,e=0,b=0;b<d;b++)for(c=0,e=this.w[b].length;c<e;c++)if(a===this.w[b][c].a())return this.w[b][c]};f.tH=function(a,b){return this.w[a][b].a()};f.rH=function(a,b){return this.w[a][b]};f.Zz=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.Yz=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.gC=function(a){this.Wk=a};
function pw(a){var b=new Xv;Vh(a.Wk,b.a());sw(a,b);var c=P("img",{id:nw.ID_PREFIX+"_dragHandle_"+B(),"class":nw.CSS.iD});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.Mj("TOP_LEFT",c,1);a.Yj||(a.Yj={});a.Yj[b.a().id]=c;c.title="Drag / Swap ViewBox";tw(a,b);uw(a,b);F(b,"V",a.xv.bind(a));F(b,"U",a.yv.bind(a));F(b,"W",a.tr.bind(a));return b}
function uw(a,b){var c=P("img",{id:nw.ID_PREFIX+"_CloseButton_"+B(),"class":nw.CSS.Lw,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});qk(c,nw.CSS.Lw+"-hovered");F(c,"click",function(){this.tu(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Mj("TOP_LEFT",c,1);a.Sx||(a.Sx={});a.Sx[b.a().id]=c;c.title="Add ViewBox Column"}
function tw(a,b){var c=P("img",{id:nw.ID_PREFIX+"_CloseButton_"+B(),"class":nw.CSS.Mw,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});qk(c,nw.CSS.Mw+"-hovered");F(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Mj("TOP_LEFT",c,1);a.Zx||(a.Zx={});a.Zx[b.a().id]=c;c.title="Add ViewBox Row"}
function sw(a,b){var c=P("img",{id:nw.ID_PREFIX+"_CloseButton_"+B(),"class":nw.CSS.nj,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});qk(c,nw.CSS.nj+"-hovered");F(c,"click",function(){vw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Mj("TOP_LEFT",c,1);a.fn||(a.fn={});a.fn[b.a().id]=c;c.title="Close ViewBox"}f.xv=function(a){this.dispatchEvent({type:"Y",oE:a.target})};f.zs=function(a,b){this.loop(function(c){Hb(c.pb,a)&&b(c)})};f.yv=function(a){this.dispatchEvent({type:"X",oE:a.target})};
f.tr=function(a){this.dispatchEvent(a)};function rw(a,b){uk(b.a(),150,0);S(a.Yj[b.a().id]);S(a.fn[b.a().id]);b.g()}function ww(a,b){var c=[],d;rw(a,b);D(a.w,function(a){d=[];D(a,function(a){a.Xj||d.push(a)}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.w=c;a.Yi(null,!0);qw(a)}function vw(a,b){1!=a.XA()&&(b.rt(function(){ww(this,b)}.bind(a))||ww(a,b))}f.wu=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.XA=function(){var a=0;this.loop(function(){a++});return a};
f.sH=function(a){for(var b=0,c=0,d=this.w.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.w[b].length;c<e;c++)if(this.w[b][c]===a)return e=b+1===this.w.length,h=c+1===this.w[b].length,e&&h?this.w[0][0]:e&&!h?this.w[0][c+1]:!e&&h?this.w[b+1][0]:this.w[b+1][c+1]};f.Dz=function(){var a;this.loop(function(b){null!=a||null!=b.Xh||(a=b)}.bind(this));if(null!=a)return a;var b=this.Zz();g(b)?b.sort(function(a,b){return a.Xh<b.Xh?-1:a.Xh>b.Xh?1:0}):b=[b];return b[0]};
function xw(a,b,c){var d=new dk,e=a.og[b.id],h=a.og[c.id];b[yw]=!0;c[yw]=!0;d.add(new Sj(b,[b.offsetLeft,b.offsetTop],[h.x,h.y],300,rk));d.add(new Sj(c,[c.offsetLeft,c.offsetTop],[e.x,e.y],300,rk));Rc(d,"end",function(){window.console.log("SWAP END");b[yw]=!1;c[yw]=!1;zw(this);for(var a,d,e,h,q=0,p=0,r=this.w.length,u,z;q<r;q++)for(p=this.w[q],u=p.length,p=0;p<u;p++)z=this.w[q][p],window.console.log(z.a()),this.wu(z,b)&&(a=q,d=p),this.wu(z,c)&&(e=q,h=p);window.console.log(a,d,e,h);t(a)&&t(e)&&(q=
this.w[a][d],this.w[a][d]=this.w[e][h],this.w[e][h]=q,q=Oi(this.w[a][d].a()),r=Oi(this.w[e][h].a()),Li(this.w[e][h].a(),q),Li(this.w[a][d].a(),r));window.console.log(this.w)}.bind(a));d.play()}f.st=function(){this.Zd&&(Cn(this.Zd),Cn(this.xh),delete this.Zd,delete this.xh)};function Aw(a){a.loop(function(a){null!=a.a()&&(this.Zd.Kj(this.Yj[a.a().id]),this.xh.Kj(a.a()))}.bind(a))}
function qw(a){a.st();a.Zd=new mw;a.xh=new mw;Aw(a);var b=a.Zd,c=a.xh;b.qw.push(c);c.Uq=!0;b.Tq=!0;a.Zd.ra();a.xh.ra();a.Zd.zt=a.At.bind(a);F(a.Zd,"dragstart",a.cJ.bind(a));F(a.Zd,"dragover",a.hv.bind(a));F(a.Zd,"dragend",a.gv.bind(a))}f.At=function(a){return Bw(Hh(a.getAttribute("viewboxid")))};f.cJ=function(){null!=this.og?sb(this.og):this.og={};zw(this)};function Bw(a){var b=document.body;a=a.cloneNode(!1);a.className=nw.CSS.kE;b&&b.appendChild(a);return a}var yw=B();
nw.prototype.hv=function(a){if(a.zl.element.id!==a.gq.Bi.getAttribute("viewboxid")){var b=Hh(a.gq.Bi.getAttribute("viewboxid"));a=Hh(a.zl.element.id);b[yw]||a[yw]||xw(this,b,a)}};function zw(a){a.loop(function(a){this.og[a.a().id]=Ai(a.a())}.bind(a))}
nw.prototype.gv=function(a){var b=a.gq.Pa.Zj;a=Hh(a.gq.Bi.getAttribute("viewboxid"));a=Ii(a);a={left:a.x,top:a.y};var c=Bw(b);Vh(this.Wk.parentNode?this.Wk.parentNode:this.Wk,c);b=lk(b);ok(c,{top:b.top,left:b.left,"z-index":1E4});Cw(c,a).play();Dw(this);this.Yi()};function Cw(a,b){var c=new dk;c.add(new Sj(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,rk));F(c,"end",function(){S(a)});return c}function Dw(a){a.loop(function(a){this.Yj[a.a().id].style.visibility="visible"}.bind(a))}
nw.prototype.f=function(){nw.d.f.call(this);this.loop(function(a){H(a);S(a.a());a.g()}.bind(this));D(this.w,function(a){Ib(a)});Ib(this.w);delete this.w;this.fq(this.Yj);delete this.Yj;this.fq(this.fn);delete this.fn;C(this.og,function(a,b){sb(this.og[b]);delete this.og[b]}.bind(this));sb(this.og);delete this.og;null!=this.Zd&&(H(this.Zd),this.Zd.g());delete this.Zd;null!=this.xh&&(H(this.xh),this.xh.g());delete this.xh;delete this.Wk};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",nw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{jE:"X",iE:"Y",NN:"Z"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",nw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",nw.prototype.qs);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",nw.prototype.dx);v("xiv.ui.ViewBoxHandler.prototype.rowCount",nw.prototype.BK);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",nw.prototype.yn);v("xiv.ui.ViewBoxHandler.prototype.loop",nw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",nw.prototype.tu);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",nw.prototype.sK);v("xiv.ui.ViewBoxHandler.prototype.insertRow",nw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",nw.prototype.uK);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",nw.prototype.xq);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",nw.prototype.tH);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",nw.prototype.rH);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",nw.prototype.Zz);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",nw.prototype.Yz);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",nw.prototype.gC);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",nw.prototype.zs);v("xiv.ui.ViewBoxHandler.prototype.isMatch",nw.prototype.wu);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",nw.prototype.XA);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",nw.prototype.sH);
v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",nw.prototype.Dz);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxesRendering",nw.prototype.As);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",nw.prototype.f);function Ew(a){Es.call(this);this.EB(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.Cw.bind(this));this.zf=a;Fw(this);this.mn()}w(Ew,Es);v("xiv.ui.Thumbnail",Ew);Ew.ID_PREFIX="xiv.ui.Thumbnail";Ew.CSS_SUFFIX={};Ew.prototype.Cw=function(){var a=Ih("img",Es.CSS.ai,this.df()),a=a[0];a.src=this.Wa.src};Ew.prototype.mn=function(){Ew.d.mn.call(this);O(this.df(),Ew.wm)};
function Fw(a){var b="",c=a.zf.ke;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=c.Name)b=c.Name;else if(null!=a.zf.Qh)var d=a.zf.Qh.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");D(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.Go(e)}Ew.prototype.wH=function(){return this.zf};Ew.prototype.f=function(){Ew.d.f.call(this);this.zf.g();delete this.zf};
v("xiv.ui.Thumbnail.ID_PREFIX",Ew.ID_PREFIX);v("xiv.ui.Thumbnail.CSS_SUFFIX",Ew.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.updateHoverable",Ew.prototype.Cw);v("xiv.ui.Thumbnail.prototype.createHoverable",Ew.prototype.mn);v("xiv.ui.Thumbnail.prototype.getViewable",Ew.prototype.wH);v("xiv.ui.Thumbnail.prototype.disposeInternal",Ew.prototype.f);function Gw(){U.call(this);this.sf=new mw;this.hg=new mw;this.sf.zt=this.At.bind(this);F(this.sf,"dragover",this.hv.bind(this));F(this.sf,"dragend",this.gv.bind(this));F(this.sf,"dragout",this.bJ.bind(this));F(this.hg,"drop",this.dJ.bind(this));var a=this.sf,b=this.hg;a.qw.push(b);b.Uq=!0;a.Tq=!0;this.hg.ra();this.sf.ra()}w(Gw,Yu);v("xiv.ui.ThumbnailGallery",Gw);Gw.ID_PREFIX="xiv.ui.ThumbnailGallery";Gw.CSS_SUFFIX={ws:"thumbnail-dragging"};var Hw="THUMBNAIL_DRAGGER_"+B(),Iw=Hw+"_FADER"+B();f=Gw.prototype;
f.sf=null;f.hg=null;f.Ai=function(a,b){var c=this.nn(a);this.rl(c,b);return c};f.nn=function(a){var b=new Ew(a);F(b,"D",function(){this.dispatchEvent({type:"da",wj:b})}.bind(this));return b};f.rl=function(a,b){Gw.d.rl.call(this,a,b);var c=a.df();c&&this.sf.Kj(c)};f.Jy=function(){Cn(this.hg)};f.ay=function(a){this.hg.Kj(a)};f.by=function(a){D(a,function(a){this.ay(a)}.bind(this))};f.kH=function(a){return this.Ob[a.id]};
f.st=function(){null!=this.sf&&(Cn(this.sf),this.sf.g());null!=this.hg&&(Cn(this.hg),this.hg.g())};f.At=function(a){a=ni(a,"div",Ew.wc).id.replace("HOVERABLE_","");if(a in this.Ob)return this.Ob[a].setActive(!0,!0),a=this.Ob[a].a().cloneNode(!0),a.setAttribute("id",Hw+a.id),O(a,Gw.CSS.ws),a};f.hv=function(a){this.dispatchEvent({type:"ba",sw:a.zl.element})};f.bJ=function(a){this.dispatchEvent({type:"ca",sw:a.zl.element})};
f.gv=function(){var a=Kh(Gw.CSS.ws);D(a,function(a){wk(a,300,function(){S(a)})});null!=a[0]&&this.Ob[a[0].id.replace(Hw,"")].setActive(!1,!0)};f.dJ=function(a){var b=Lh(Gw.CSS.ws);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);S(b);a.zl.element&&this.dispatchEvent({type:"ea",wj:this.Ob[b.id.replace(Hw,"")],lL:a.zl.element})}};f.f=function(){Gw.d.f.call(this);this.st()};
v("xiv.ui.ThumbnailGallery.EventType",{ip:"$",ED:"aa",tN:"ba",sN:"ca",qN:"da",uN:"ea"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",Gw.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",Gw.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",Hw);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",Iw);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Gw.prototype.Ai);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",Gw.prototype.nn);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",Gw.prototype.rl);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",Gw.prototype.Jy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",Gw.prototype.ay);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",Gw.prototype.by);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",Gw.prototype.kH);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",Gw.prototype.f);function Jw(){var a=pi(Eh());a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()};function Kw(a,b,c,d){Yc.call(this);this.jb=c||Eh();this.Al=a;this.mf=[];this.kL=b?b:Lw;this.IC=!!d;this.Ze()}w(Kw,Yc);var Lw=0;f=Kw.prototype;
f.Ze=function(){this.Al.className="goog-tabpane";for(var a=[],b=Zh(this.Al);b;)a.push(b),b=ai(b);this.$d=this.jb.v("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.gc=this.jb.v("div","goog-tabpane-cont");this.Al.appendChild(this.gc);b=this.Al;switch(this.kL){case Lw:b.insertBefore(this.$d,this.gc);b.insertBefore(Mw(this),this.gc);Zk(b,"goog-tabpane-top");break;case 1:b.appendChild(this.$d);b.appendChild(Mw(this));Zk(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.$d,this.gc);Zk(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.$d,this.gc);Zk(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.$d.tabIndex=0;F(this.$d,this.IC?"mousedown":"click",this.lr,!1,this);F(this.$d,"keydown",this.mr,!1,this);for(var c=0;b=a[c];c++)Nw(this,new Ow(b))};
function Mw(a){var b=Eh(void 0),c=null,d=b.pa;E&&d.createStyleSheet?(c=d.createStyleSheet(),Ti(c)):(d=Jh(b.pa,"head",void 0,void 0)[0],d||(c=Jh(b.pa,"body",void 0,void 0)[0],d=b.v("head"),c.parentNode.insertBefore(d,c)),c=b.v("style"),Ti(c),b.appendChild(d,c));return a.jb.v("div","goog-tabpane-clear")}f.f=function(){Kw.d.f.call(this);Sc(this.$d,this.IC?"mousedown":"click",this.lr,!1,this);Sc(this.$d,"keydown",this.mr,!1,this);delete this.Al;this.gc=this.$d=null};
function Nw(a,b){b.Pa&&b.Pa!=a&&b.Pa instanceof Kw&&Pw(b.Pa,b);var c=a.mf.length;ca(void 0)&&void 0!=c?(c=void 0,a.mf.splice(c,0,b),a.$d.insertBefore(b.Gi,a.$d.childNodes[c])):(a.mf.push(b),a.$d.appendChild(b.Gi));b.Co(a,c);a.Sg||(a.Sg=b,a.dispatchEvent(new Qw("change",a,a.Sg)));a.gc.appendChild(b.gc);Rw(b,b==a.Sg);for(var d=c+1;c=a.mf[d];d++)c.Mn=d}function Pw(a,b){t(b)&&(b=a.mf[b]);a.mf.splice(b.Mn,1);b.Co(null);S(b.Gi);S(b.gc);for(var c,d=0;c=a.mf[d];d++)c.Co(a,d)}
function Sw(a,b){if(0<=b&&b<a.mf.length){var c=a.mf[b];!c.isEnabled()||a.Sg&&c==a.Sg||(Rw(a.Sg,!1),Rw(c,!0),a.Sg=c,a.dispatchEvent(new Qw("change",a,a.Sg)))}}f.Ia=function(){return this.gc||null};f.a=function(){return this.Al||null};f.lr=function(a){for(var b=a.target;b!=this.$d;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);Sw(this,c);break}b=b.parentNode}a.preventDefault()};
f.mr=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.Sg.Mn-1;Sw(this,0>a?this.mf.length-1:a);break;case 39:a=this.Sg.Mn+1;Sw(this,a>=this.mf.length?0:a);break;case 36:Sw(this,0);break;case 35:Sw(this,this.mf.length-1)}};function Ow(a,b,c){var d,e;if(s(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=Zh(a))d=ki(b),b.parentNode.removeChild(b);e=a}this.jb=c||Eh();this.gc=e||this.jb.v("div");this.Gi=this.jb.v("li",null,d);this.Mn=this.Pa=null;this.Cc=!0}f=Ow.prototype;
f.ce=function(){return ki(this.Gi)};f.le=function(a){ei(this.Gi,a)};f.Vz=function(){return this.Gi};f.Ia=function(){return this.gc};f.getParent=function(){return this.Pa};f.lc=function(a){this.Cc=a;this.Gi.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Cc};function Rw(a,b){a.isEnabled()&&(a.gc.style.display=b?"":"none",a.Gi.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.Co=function(a,b){this.Pa=a;this.Mn=ca(b)?b:null};
function Qw(a,b,c){Cc.call(this,a,b);this.page=c}w(Qw,Cc);function Y(a){U.call(this);if(null!=a){var b=a;if(!s(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==Tw.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||Uw}w(Y,U);v("nrg.ui.Tabs",Y);var Tw=["TOP","BOTTOM","LEFT","RIGHT"],Uw=Tw[0];Y.ID_PREFIX="nrg.ui.Tabs";Y.CSS_SUFFIX={Yb:"tab",ei:"tab-active",xf:"page",HD:"page-content",jp:"page-active",hb:"icon",Tk:"icon-active",lD:"icon-content",$M:"scrollgallery"};
function Vw(a,b,c,d,e){this.mj=!1;this.TITLE=a;this.Yb=b;this.hb=c;this.xf=d;this.fh=e}f=Y.prototype;f.hf=0;f.dm=0;f.Hd=null;f.n=function(a){Y.d.n.call(this,a);this.hk=new Kw(this.a());this.L=[];O(this.a(),Y.wc)};f.fH=function(){return this.L.length};f.vG=function(){return this.hf};f.UG=function(){return this.dm};f.vq=function(){var a=[];D(this.L,function(b){a.push(b.Yb)});return a};f.wq=function(){var a=[];D(this.L,function(b){a.push(b.xf)});return a};
f.gH=function(){var a=[];D(this.L,function(b){a.push(b.hb)});return a};f.RE=function(a){D(a,function(a){this.ql(a)}.bind(this))};f.reset=function(){for(var a=this.L.length;0<a;)Pw(this.hk,a-1),a--;this.rO()};f.ow=function(a){if(null==this.L)return!1;for(var b=0,c=this.L.length;b<c;b++)if(this.L[b].TITLE==a)return!0;return!1};
f.ql=function(a){this.L=null!=this.L?this.L:[];if(this.ow(a))throw Error(a+" is an already existing tab!");var b;b=P("div",{id:"Tab_"+B(),"class":Y.CSS.Yb,title:a});Vh(this.a(),b);var c=P("div",{id:"TabIcon_"+B(),"class":Y.CSS.hb}),d=P("div",{"class":Y.CSS.lD},a);Vh(c,d);Vh(b,c);d=P("div",{id:"TabPage_"+B(),"class":Y.CSS.xf,label:a});ok(d,mk(this.a(),"width"));Vh(this.a().parentNode,d);var e=new Ow(d,a);Nw(this.hk,e);this.L.push(new Vw(a,b,c,d,e));Ww(this);Xw(this);Yw(this);this.Wj();this.setActive(0);
this.k()};f.dC=function(a,b){this.ow(a)||this.ql(a);var c;a:if(null!=this.L){c=0;for(var d=this.L.length;c<d;c++)if(this.L[c].TITLE==a){c=this.L[c];break a}c=void 0}else c=!1;b instanceof Gs?(d=b,c.xf.appendChild(b.a())):(d=new Gs,d.n(c.xf),d.Xe(b));O(d.a(),Y.CSS.HD);this.k()};function Ww(a){D(a.L,function(a){H(a.Yb)}.bind(a))}function Xw(a){D(a.L,function(a,c){F(a.Yb,"click",function(){this.Wj();this.setActive(c)}.bind(this))}.bind(a))}
function Yw(a){D(a.L,function(a,c){Zw(this,c);$w(this,c)}.bind(a))}function Zw(a,b){F(a.L[b].Yb,"mouseover",function(){!0!==this.L[b].mj&&(O(this.L[b].Yb,Y.CSS.ei),O(this.L[b].Yb,tj(Y.CSS.ei,this.orientation)),O(this.L[b].hb,Y.CSS.Tk))}.bind(a))}function $w(a,b){F(a.L[b].Yb,"mouseout",function(){!0!==this.L[b].mj&&(yh(this.L[b].Yb,Y.CSS.ei),yh(this.L[b].Yb,tj(Y.CSS.ei,this.orientation)),yh(this.L[b].hb,Y.CSS.Tk))}.bind(a))}
f.setActive=function(a){this.L[a].mj=!0;this.dm=this.hf;this.hf=a;Sw(this.hk,a);O(this.L[a].Yb,Y.CSS.ei);O(this.L[a].Yb,tj(Y.CSS.ei,this.orientation));O(this.L[a].xf,Y.CSS.jp);O(this.L[a].xf,tj(Y.CSS.jp,this.orientation));O(this.L[a].hb,Y.CSS.Tk);O(this.L[a].hb,tj(Y.CSS.Tk,this.orientation))};
f.cz=function(a){this.L[a].mj=!1;Sw(this.hk,0);yh(this.L[a].Yb,Y.CSS.ei);yh(this.L[a].Yb,tj(Y.CSS.ei,this.orientation));yh(this.L[a].xf,Y.CSS.jp);yh(this.L[a].xf,tj(Y.CSS.jp,this.orientation));yh(this.L[a].hb,Y.CSS.Tk);yh(this.L[a].hb,tj(Y.CSS.Tk,this.orientation))};f.Wj=function(){D(this.L,function(a,b){this.cz(b)}.bind(this))};
f.k=function(){if(this.a().parentNode){O(this.a(),Y.wc);O(this.a(),tj(Y.wc,this.orientation));D(this.L,function(a){O(a.Yb,tj(Y.CSS.Yb,this.orientation));O(a.hb,tj(Y.CSS.hb,this.orientation));O(a.xf,tj(Y.CSS.xf,this.orientation))}.bind(this));switch(this.orientation){case "TOP":ax(this);break;case "BOTTOM":this.aP();break;case "RIGHT":bx(this)}if(0<this.L.length){var a=Oi(this.L[0].Yb);0<a.width&&0<a.height&&(this.Hd=a)}}};
function bx(a){D(a.L,function(a){this.a().parentNode&&ok(a.Yb,{height:(100/this.L.length).toString()+"%"})}.bind(a))}function ax(a){var b;D(a.L,function(a,d){this.a().parentNode&&(b=100/this.L.length,ok(a.Yb,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function cx(a){D(a.L,function(a){C(a,function(c,d){H(c);c.f?c.g():c.g&&c.g();delete c;delete a[d]});sb(a);delete a});Ib(a.L)}
f.f=function(){Y.d.f.call(this);D(this.vq(),function(a){H(a)}.bind(this));cx(this);delete this.L;H(this.hk);this.hk.g();delete this.hk;delete this.hf;delete this.dm;delete this.$O;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",Tw);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",Uw);v("nrg.ui.Tabs.ID_PREFIX",Y.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",Y.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",Vw);v("nrg.ui.Tabs.prototype.tabSize",Y.prototype.Hd);v("nrg.ui.Tabs.prototype.render",Y.prototype.n);
v("nrg.ui.Tabs.prototype.getTabCount",Y.prototype.fH);v("nrg.ui.Tabs.prototype.getLastActiveTab",Y.prototype.vG);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",Y.prototype.UG);v("nrg.ui.Tabs.prototype.getTabElements",Y.prototype.vq);v("nrg.ui.Tabs.prototype.getTabPages",Y.prototype.wq);v("nrg.ui.Tabs.prototype.getTabIcons",Y.prototype.gH);v("nrg.ui.Tabs.prototype.addTabs",Y.prototype.RE);v("nrg.ui.Tabs.prototype.reset",Y.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",Y.prototype.ow);
v("nrg.ui.Tabs.prototype.addTab",Y.prototype.ql);v("nrg.ui.Tabs.prototype.setTabPageContents",Y.prototype.dC);v("nrg.ui.Tabs.prototype.setActive",Y.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",Y.prototype.cz);v("nrg.ui.Tabs.prototype.deactivateAll",Y.prototype.Wj);v("nrg.ui.Tabs.prototype.updateStyle",Y.prototype.k);v("nrg.ui.Tabs.prototype.disposeInternal",Y.prototype.f);function dx(a){Y.call(this,a)}w(dx,Y);v("nrg.ui.ZipTabs",dx);dx.ID_PREFIX="nrg.ui.ZipTabs";f=dx.prototype;f.n=function(a){dx.d.n.call(this,a);O(this.a(),tj(dx.wc,this.orientation));this.xc=new Pq(this.a(),this.orientation);ex(this);a=Kh("goog-tabpane-tabs",this.a());D(a,function(a){a.style.visibility="hidden"})};f.Rh=function(a){this.xc.Rh(a);this.k()};f.Q=function(){return this.xc};
function ex(a){F(a.xc,"resize",function(a){this.th();if(null!=this.Hd){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.Hd.height-this.u.height)?this.Wj():this.setActive(this.hf);break;case "LEFT":case "RIGHT":var c=36>=Math.abs(this.Hd.width-this.u.width)&&this.Xp;4>=Math.abs(this.Hd.width-this.u.width)||c?this.Wj():this.setActive(this.hf)}this.dispatchEvent({type:"resize",size:a.size,Me:a.Me})}}.bind(a))}f.Xp=!1;
f.Sb=function(a,b,c){this.k();a?(this.setActive(b||0),this.xc.pf(this.orientation,"MAX",null,c)):(this.Wj(),this.xc.pf(this.orientation,"MIN",null,c))};f.k=function(){dx.d.k.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.Hd&&this.xc.SB(this.Hd.height);break;case "LEFT":case "RIGHT":null!=this.Hd&&this.xc.UB(this.Hd.width)}this.xc.update()};
f.ql=function(a){dx.d.ql.call(this,a);1==this.vq().length&&this.k();D(this.vq(),function(a){F(a,"click",function(){if(null!=this.Hd)switch(this.k(),this.th(),this.orientation){case "BOTTOM":4>=Math.abs(this.u.height-this.Hd.height)?(this.setActive(this.hf),this.xc.pf("BOTTOM","MAX",void 0)):this.hf==this.dm&&this.xc.pf("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.u.height-this.Hd.height)?(this.setActive(this.hf),this.xc.pf("TOP","MAX",void 0)):this.hf==this.dm&&this.xc.pf("TOP","MIN",
void 0);break;case "RIGHT":null!=this.Hd&&(4>=Math.abs(this.u.width-this.Hd.width)?(this.Xp=!1,this.setActive(this.hf),this.xc.pf("RIGHT","MAX",void 0)):this.hf==this.dm&&(this.Xp=!0,this.xc.pf("RIGHT","MIN",void 0)))}}.bind(this))}.bind(this));this.Wj();this.k()};f.f=function(){dx.d.f.call(this);H(this.xc);this.xc.g();delete this.xc;delete this.Xp};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{$C:"fa"});
v("nrg.ui.ZipTabs.ID_PREFIX",dx.ID_PREFIX);v("nrg.ui.ZipTabs.prototype.render",dx.prototype.n);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",dx.prototype.Rh);v("nrg.ui.ZipTabs.prototype.getResizable",dx.prototype.Q);v("nrg.ui.ZipTabs.prototype.setExpanded",dx.prototype.Sb);v("nrg.ui.ZipTabs.prototype.updateStyle",dx.prototype.k);v("nrg.ui.ZipTabs.prototype.addTab",dx.prototype.ql);v("nrg.ui.ZipTabs.prototype.disposeInternal",dx.prototype.f);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
function fx(){U.call(this);this.Sc=fx.ModalStates.oj}w(fx,U);v("xiv.ui.Modal",fx);fx.ModalStates={se:"fullscreen",Ve:"popup",ms:"fullscreen-popup",pg:"windowed",oj:"demo",eD:"demp-fullscreen"};fx.ID_PREFIX="xiv.ui.Modal";fx.CSS_SUFFIX={gp:"background",RL:"columnmenu",QM:"rowmenu",SL:"button",RM:"button",KD:"projecttab",LD:"projecttab-bounds",MD:"projecttab-dragger",ND:"projecttab-dragger-handle",Nw:"addsubjects"};
function gx(){var a={};C(hx,function(b,c){a[c]=fx.ID_PREFIX+"."+cb(b.key)+".Button"});var b=Nk(nb(a)),c={};C(a,function(a,e){c[e]=b[a];var h=tj(a);b[a].className=h});return c}var hx={Sk:{key:"CLOSE",title:"Close XNAT Image Viewer."},se:{key:"FULLSCREEN",title:"Enter full-screen mode."},Ve:{key:"POPUP",title:"Popup to new window."},pg:{key:"WINDOWED",title:"Exit full-screen mode."}};f=fx.prototype;f.Jn=29;f.es=29;f.fr=320;f.gr=320;f.uH=function(){return this.Ca};f.lH=function(){return this.T};
f.WG=function(){return this.Xb};f.TG=function(){return this.$.Ve};f.XF=function(){return this.$.Sk};f.mG=function(){return this.$.se};f.n=function(a){fx.d.n.call(this,a);this.sA();this.Ca.tu(null,!1);this.mc(this.Sc)};
f.mc=function(a){null!=this.Sc&&(this.Ar=this.Sc);this.Sc=a;null!=this.Ar&&yh(this.a(),tj(this.constructor.wc,this.Ar));O(this.a(),tj(this.constructor.wc,this.Sc));this.Sc==fx.ModalStates.oj?(this.$.se.style.visibility="visible",this.$.pg.style.visibility="hidden"):this.Sc==fx.ModalStates.pg?(this.$.se.style.visibility="visible",this.$.pg.style.visibility="hidden"):this.Sc==fx.ModalStates.Ve?(this.$.Ve.style.visibility="hidden",this.$.Sk.style.visibility="hidden",this.$.se.style.visibility="visible",
this.$.pg.style.visibility="hidden"):this.Sc==fx.ModalStates.ms?(this.$.Ve.style.visibility="hidden",this.$.se.style.visibility="hidden",this.$.pg.style.visibility="visible"):this.Sc==fx.ModalStates.se&&(this.$.Ve.style.visibility="visible",this.$.se.style.visibility="hidden",this.$.pg.style.visibility="visible");this.k()};f.Kl=function(){return this.Sc};f.Si=function(){this.T.loop(function(a){a.setActive(!1);this.Ca.loop(function(b){-1<b.pb.indexOf(a.zf)&&a.setActive(!0)})}.bind(this))};
f.vy=function(){ix(this);this.zd=null!=this.zd?this.zd:[];this.Oc=null!=this.Oc?this.Oc:new dk;jx(this);kx(this);F(this.Oc,"end",this.nJ.bind(this));D(this.zd,function(a){this.Oc.add(a)}.bind(this));this.Oc.play();this.Si()};f.nJ=function(){D(this.zd,function(a){this.Oc.remove(a);H(a);a.Yd();a.g()}.bind(this));Ib(this.zd);this.k();lx(this)};function lx(a){a.Ca.loop(function(a){0==a.a().style.opacity&&tk(a.a(),300)})}
function jx(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.zd.push(new Sj(b,[b.offsetLeft,b.offsetTop],[this.wa.Mb.qg[d][e],this.wa.Mb.we[d][e]],300,rk))}.bind(a))}function kx(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.zd.push(new Tj(b,[b.offsetWidth,b.offsetHeight],[this.wa.Mb.zj[d][e],this.wa.Mb.xm[d][e]],300,rk))}.bind(a))}
function ix(a){a.wa=null!=a.wa?a.wa:{};a.th();a.wa.Wo={};a.wa.Wo.zj=Math.round(Oi(a.Xb.a()).width);a.wa.Wo.xm=Math.round(a.u.height-2*a.es);a.wa.Wo.we=Math.round(a.es);mx(a);nx(a)}function mx(a){a.wa.Mb={};a.wa.Mb.zj=a.Ca.yn();a.wa.Mb.xm=a.Ca.yn();a.Ca.loop(function(a,c,d,e,h){this.wa.Mb.zj[c][d]=Math.round((this.u.width-this.wa.Wo.zj-this.Jn)/h-this.Jn);this.wa.Mb.xm[c][d]=Math.round((this.u.height-(e+1)*this.Jn)/e)}.bind(a))}
function nx(a){a.wa.Mb.qg=a.Ca.yn();a.wa.Mb.we=a.Ca.yn();a.wa.Mb.ZD=a.wa.Wo.zj+a.es;var b=0;a.Ca.loop(function(a,d,e){b=this.wa.Mb.ZD+e*(this.wa.Mb.zj[d][e]+this.es);this.wa.Mb.qg[d][e]=b;this.wa.Mb.we[d][e]=d*(this.wa.Mb.xm[d][e]+this.Jn);window.console.log();this.wa.Mb.we[d][e]+=this.Jn}.bind(a))}f.k=function(){ix(this);this.Xb&&this.Xb.k();ox(this);this.Si();this.T.k();this.T.Vc()};
function ox(a){a.Ca&&a.Ca.loop(function(a,c,d){ok(a.a(),{height:this.wa.Mb.xm[c][d],width:this.wa.Mb.zj[c][d],left:this.wa.Mb.qg[c][d],top:this.wa.Mb.we[c][d]});a.k()}.bind(a))}
f.sA=function(){var a=P("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=fx.CSS.gp;this.a().appendChild(a);this.rs=P("div");Vh(this.a(),this.rs);O(this.rs,fx.CSS.LD);this.Xb=new dx("RIGHT");this.Xb.n(this.a());O(this.Xb.a(),fx.CSS.KD);this.T=new Gw;this.T.ew(!0);this.T.Sv(this.a());var b;b=b||F;b(this.T,"B",this.PJ.bind(this));b(this.T,"C",this.OJ.bind(this));b(this.T,"da",this.IJ.bind(this));b(this.T,"ba",this.LJ.bind(this));b(this.T,"ca",this.KJ.bind(this));b(this.T,"ea",this.NJ.bind(this));
this.T.n(this.Xb.a());this.Xb.dC("Project Browser",this.T);this.Xb.Rh(this.rs);a=this.Xb.Q().jd("RIGHT");O(a,fx.CSS.MD);this.Xb.Q().Jl("RIGHT").VB(5);Vh(a,P("div",{id:Xv.ID_PREFIX+"_DraggerHandle_"+B(),"class":fx.CSS.ND}));F(this.Xb,"resize",this.k.bind(this));F(this.Xb,"resize_end",this.k.bind(this));this.Ca=new nw;this.Ca.gC(this.a());var c;c=c||F;c(this.Ca,"X",this.yv.bind(this));c(this.Ca,"Y",this.xv.bind(this));c(this.Ca,"Z",this.Yi.bind(this));F(this.Ca,"W",this.bK.bind(this));px(this)};
function px(a){a.$=gx();C(a.$,function(a){Vh(this.a(),a)}.bind(a));qx(a);a.$.Sk.innerHTML="<img src="+a.Ui+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.$.se.innerHTML="<img src="+a.Ui+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.$.pg.innerHTML="<img src="+a.Ui+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.$.Ve.innerHTML="<img src="+a.Ui+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.Qx=function(){this.sh=P("div",{id:fx.ID_PREFIX+"_addSubjects_"+B(),"class":fx.CSS.Nw},"+ Load all subjects in project");this.Xb.wq()[0].appendChild(this.sh);qk(this.sh,fx.CSS.Nw+"-hovered");var a=this.Xb.wq()[0],b=Yh(a)[0];Oi(a);Oi(b);Oi(this.sh);b.style.height="calc(100% - 70px)";F(this.sh,"click",this.VI.bind(this))};f.VI=function(){this.dispatchEvent({type:"g"});wk(this.sh,150,function(){rx(this);var a=this.Xb.wq()[0];Yh(a)[0].setAttribute("style","");this.T.Vc()}.bind(this))};
function rx(a){null!=a.sh&&(S(a.sh),H(a.sh),delete a.sh)}f.bK=function(){var a=Kh("xiv-ui-thumbnailgallery-thumbnail-dragging");D(a,function(a){S(a)});this.Si();window.console.log(this.T.hg.qq());null!=this.T.hg.qq()&&this.T.sf.Ii({sO:!0})};f.$I=function(){this.Sc===fx.ModalStates.se&&Jw()};
f.gJ=function(){var a=this.a().parentNode;a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullscreen&&a.requestFullscreen();this.Sc===fx.ModalStates.Ve?this.mc(fx.ModalStates.ms):this.mc(fx.ModalStates.se)};f.eK=function(){Jw();this.mc(this.Ar)};function qx(a){var b;b=b||F;b(a.$.se,"click",a.gJ.bind(a));b(a.$.pg,"click",a.eK.bind(a));b(a.$.Sk,"click",a.$I.bind(a))}
f.PJ=function(a){this.Ca.zs(a.wj.zf,function(a){a.Sl()})};f.OJ=function(a){this.Ca.zs(a.wj.zf,function(a){a.Wl||a.sm()})};f.KJ=function(a){this.Ca.xq(a.sw).sm()};f.LJ=function(a){this.Ca.xq(a.sw).Sl()};f.IJ=function(a){this.Ca.As()||(this.Ca.Dz().load(a.wj.zf),this.Si())};f.NJ=function(a){var b=this.Ca.xq(a.lL);this.Ca.As()?b.sm():(b.load(a.wj.zf),this.Si())};f.yv=function(){this.Si()};f.xv=function(){this.Si()};
f.Yi=function(a){null!=a&&null!=a.UE?(a.VA&&D(a.VA,function(a){ok(a.a(),{opacity:0})}),this.vy()):this.k();this.T.Jy();this.T.by(this.Ca.Yz())};f.f=function(){fx.d.f.call(this);sb(this.wa);delete this.wa;this.Lt(this.zd);delete this.zd;this.eq(this.Oc);delete this.Oc;this.fq(this.$);delete this.$;null!=this.Ca&&(H(this.Ca),this.Ca.g(),delete this.Ca);H(this.Xb);this.Xb.g();delete this.Xb;H(this.T);this.T.g();delete this.T;rx(this);delete this.Sc;delete this.Ar};v("xiv.ui.Modal.EventType",fx.bM);
v("xiv.ui.Modal.ID_PREFIX",fx.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",fx.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",fx.prototype.uH);v("xiv.ui.Modal.prototype.getThumbnailGallery",fx.prototype.lH);v("xiv.ui.Modal.prototype.getProjectTab",fx.prototype.WG);v("xiv.ui.Modal.prototype.getPopupButton",fx.prototype.TG);v("xiv.ui.Modal.prototype.getCloseButton",fx.prototype.XF);v("xiv.ui.Modal.prototype.getFullScreenButton",fx.prototype.mG);v("xiv.ui.Modal.prototype.render",fx.prototype.n);
v("xiv.ui.Modal.prototype.setState",fx.prototype.mc);v("xiv.ui.Modal.prototype.getState",fx.prototype.Kl);v("xiv.ui.Modal.prototype.highlightInUseThumbnails",fx.prototype.Si);v("xiv.ui.Modal.prototype.animateModal",fx.prototype.vy);v("xiv.ui.Modal.prototype.updateStyle",fx.prototype.k);v("xiv.ui.Modal.prototype.initSubComponents",fx.prototype.sA);v("xiv.ui.Modal.prototype.addAddSubjectsToProjectTab",fx.prototype.Qx);v("xiv.ui.Modal.prototype.disposeInternal",fx.prototype.f);
window["xiv.ui.Modal"]=fx;window["xiv.ui.Modal.ModalStates"]=fx.ModalStates;
