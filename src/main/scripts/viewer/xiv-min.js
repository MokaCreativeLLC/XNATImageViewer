var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.Zd=function(){return a.qA?a.qA:a.qA=new a}}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ga(a)}function ha(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ia(a){return"boolean"==typeof a}function u(a){return"number"==typeof a}function ja(a){return"function"==ga(a)}function la(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ma(a){return a[oa]||(a[oa]=++pa)}
var oa="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(null,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.dO=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.RL=!0;A.Md=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.pd=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.uE=0;this.pL=function(){return this.uE++}};function za(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.PC;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Aa);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba;function Ca(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ca);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ca,Error);Ca.prototype.name="CustomError";function Da(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ea(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Fa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ha(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ia(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ja=/(\.\d+)|(\d+)|(\D+)/g;function Ka(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ja),d=b.toLowerCase().match(Ja),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function La(a){if(!Pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ta,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Va,"&#0;"));return a}var Qa=/&/g,Ra=/</g,Sa=/>/g,Ta=/"/g,Ua=/'/g,Va=/\x00/g,Pa=/[\x00&<>"']/;
function Wa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Xa(a){return Array.prototype.join.call(arguments,"")}
function Ya(a,b){for(var c=0,d=Ia(String(a)).split("."),e=Ia(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",m=/(\d*)(\D*)/g,q=/(\d*)(\D*)/g;do{var p=m.exec(l)||["","",""],t=q.exec(n)||["","",""];if(0==p[0].length&&0==t[0].length)break;c=Za(0==p[1].length?0:parseInt(p[1],10),0==t[1].length?0:parseInt(t[1],10))||Za(0==p[2].length,0==t[2].length)||Za(p[2],t[2])}while(0==c)}return c}function Za(a,b){return a<b?-1:a>b?1:0}
var $a=2147483648*Math.random()|0;function B(){return"goog_"+$a++}function ab(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function bb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function cb(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function db(a,b){b.unshift(a);Ca.call(this,Fa.apply(null,b));b.shift()}w(db,Ca);db.prototype.name="AssertionError";function eb(a,b){throw new db("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var fb="closure_listenable_"+(1E6*Math.random()|0);function gb(a){return!(!a||!a[fb])}var hb=0;function jb(a,b,c,d,e){this.mk=a;this.yr=null;this.src=b;this.type=c;this.bn=!!d;this.Aq=e;this.key=++hb;this.bm=this.Np=!1}function kb(a){a.bm=!0;a.mk=null;a.yr=null;a.src=null;a.Aq=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function lb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function mb(a){var b=0,c;for(c in a)b++;return b}function nb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function pb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function qb(){var a=rb,b;for(b in a)return!1;return!0}function sb(a){for(var b in a)delete a[b]}function tb(a,b){b in a&&delete a[b]}
function ub(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function vb(a){var b={},c;for(c in a)b[c]=a[c];return b}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<wb.length;h++)c=wb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function yb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return yb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var zb=Array.prototype,Ab=zb.indexOf?function(a,b,c){return zb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},D=zb.forEach?function(a,b,c){zb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Bb=zb.filter?function(a,b,c){return zb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=
0,k=r(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Cb=zb.map?function(a,b,c){return zb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=r(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=b.call(c,h[k],k,a));return e},Db=zb.some?function(a,b,c){return zb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Eb=zb.every?function(a,b,c){return zb.every.call(a,b,c)}:function(a,
b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};function Fb(a){var b;a:{b=Gb;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function Hb(a,b){return 0<=Ab(a,b)}function Ib(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Jb(a,b){Hb(a,b)||a.push(b)}
function Kb(a,b){var c=Ab(a,b),d;(d=0<=c)&&zb.splice.call(a,c,1);return d}function Lb(a){return zb.concat.apply(zb,arguments)}function Mb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Nb(a,b,c,d){zb.splice.apply(a,Ob(arguments,1))}function Ob(a,b,c){return 2>=arguments.length?zb.slice.call(a,b):zb.slice.call(a,b,c)};function Pb(a){this.src=a;this.Fc={};this.Xo=0}f=Pb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.Fc[h];a||(a=this.Fc[h]=[],this.Xo++);var k=Qb(a,b,d,e);-1<k?(b=a[k],c||(b.Np=!1)):(b=new jb(b,this.src,h,!!d,e),b.Np=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Fc))return!1;var e=this.Fc[a];b=Qb(e,b,c,d);return-1<b?(kb(e[b]),zb.splice.call(e,b,1),0==e.length&&(delete this.Fc[a],this.Xo--),!0):!1};
function Rb(a,b){var c=b.type;if(!(c in a.Fc))return!1;var d=Kb(a.Fc[c],b);d&&(kb(b),0==a.Fc[c].length&&(delete a.Fc[c],a.Xo--));return d}f.Yf=function(a){a=a&&a.toString();var b=0,c;for(c in this.Fc)if(!a||c==a){for(var d=this.Fc[c],e=0;e<d.length;e++)++b,kb(d[e]);delete this.Fc[c];this.Xo--}return b};f.zn=function(a,b,c,d){a=this.Fc[a.toString()];var e=-1;a&&(e=Qb(a,b,c,d));return-1<e?a[e]:null};
f.Bq=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return lb(this.Fc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].bn!=b))return!0;return!1})};function Qb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.bm&&h.mk==b&&h.bn==!!c&&h.Aq==d)return e}return-1};var Sb;a:{var Tb=ba.navigator;if(Tb){var Ub=Tb.userAgent;if(Ub){Sb=Ub;break a}}Sb=""}function Vb(a){return-1!=Sb.indexOf(a)}function Wb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Xb(){return Vb("Opera")||Vb("OPR")}function Yb(){return Vb("Trident")||Vb("MSIE")}function Zb(){return Vb("Safari")&&!Vb("Chrome")&&!Vb("CriOS")&&!Vb("Android")}
function $b(){var a=Sb;if(Yb()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Xb())return a=Wb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Wb(a);return a[2]&&a[2][1]?a[2][1]:""};var ac,bc,cc;function dc(){return ba.navigator||null}var ec=Xb(),E=Yb(),fc=Vb("Gecko")&&-1==Sb.toLowerCase().indexOf("webkit")&&!(Vb("Trident")||Vb("MSIE")),gc=-1!=Sb.toLowerCase().indexOf("webkit"),hc,ic=dc();hc=ic&&ic.platform||"";ac=-1!=hc.indexOf("Mac");bc=-1!=hc.indexOf("Win");cc=-1!=hc.indexOf("Linux");var jc=!!dc()&&-1!=(dc().appVersion||"").indexOf("X11");function kc(){var a=ba.document;return a?a.documentMode:void 0}
var lc=function(){var a="",b;if(ec&&ba.opera)return a=ba.opera.version,ja(a)?a():a;fc?b=/rv\:([^\);]+)(\)|;)/:E?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:gc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Sb))?a[1]:"");return E&&(b=kc(),b>parseFloat(a))?String(b):a}(),mc={};function nc(a){return mc[a]||(mc[a]=0<=Ya(lc,a))}function oc(a){return E&&pc>=a}var qc=ba.document,pc=qc&&E?kc()||("CSS1Compat"==qc.compatMode?parseInt(lc,10):5):void 0;var rc=!E||oc(9),sc=!E||oc(9),tc=E&&!nc("9");!gc||nc("528");fc&&nc("1.9b")||E&&nc("8")||ec&&nc("9.5")||gc&&nc("528");fc&&!nc("8")||E&&nc("9");function uc(){0!=vc&&(wc[ma(this)]=this)}var vc=0,wc={};uc.prototype.Tj=!1;uc.prototype.g=function(){if(!this.Tj&&(this.Tj=!0,this.f(),0!=vc)){var a=ma(this);delete wc[a]}};function yc(a,b){a.fo||(a.fo=[]);a.fo.push(ca(void 0)?ta(b,void 0):b)}uc.prototype.f=function(){if(this.fo)for(;this.fo.length;)this.fo.shift()()};function zc(a){a&&"function"==typeof a.g&&a.g()}function Bc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Bc.apply(null,d):zc(d)}};function Cc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Wf=!1;this.oo=!0}Cc.prototype.f=function(){};Cc.prototype.g=function(){};Cc.prototype.stopPropagation=function(){this.Wf=!0};Cc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.oo=!1};function Dc(a){a.preventDefault()};function Ec(a){Ec[" "](a);return a}Ec[" "]=ea;function Fc(a,b){Cc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Av=!1;this.Cc=null;a&&this.oa(a,b)}w(Fc,Cc);var Gc=[1,4,2];f=Fc.prototype;
f.oa=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(fc){var e;a:{try{Ec(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=gc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=gc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Av=ac?a.metaKey:a.ctrlKey;this.state=a.state;this.Cc=a;a.defaultPrevented&&this.preventDefault()};function Hc(a){return(rc?0==a.Cc.button:"click"==a.type?!0:!!(a.Cc.button&Gc[0]))&&!(gc&&ac&&a.ctrlKey)}
f.stopPropagation=function(){Fc.d.stopPropagation.call(this);this.Cc.stopPropagation?this.Cc.stopPropagation():this.Cc.cancelBubble=!0};f.preventDefault=function(){Fc.d.preventDefault.call(this);var a=this.Cc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,tc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.PF=function(){return this.Cc};f.f=function(){};var Ic="closure_lm_"+(1E6*Math.random()|0),Jc={},Kc=0;function G(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)G(a,b[h],c,d,e);return null}c=Lc(c);return gb(a)?a.B(b,c,d,e):Mc(a,b,c,!1,d,e)}function Mc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Nc(a);l||(a[Ic]=l=new Pb(a));c=l.add(b,c,d,e,h);if(c.yr)return c;d=Oc();c.yr=d;d.src=a;d.mk=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Pc(b.toString()),d);Kc++;return c}
function Oc(){var a=Qc,b=sc?function(c){return a.call(b.src,b.mk,c)}:function(c){c=a.call(b.src,b.mk,c);if(!c)return c};return b}function Rc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Rc(a,b[h],c,d,e);return null}c=Lc(c);return gb(a)?a.Au(b,c,d,e):Mc(a,b,c,!0,d,e)}function Sc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Sc(a,b[h],c,d,e);else c=Lc(c),gb(a)?a.kb(b,c,d,e):a&&(a=Nc(a))&&(b=a.zn(b,c,!!d,e))&&Tc(b)}
function Tc(a){if(u(a)||!a||a.bm)return!1;var b=a.src;if(gb(b))return Rb(b.zg,a);var c=a.type,d=a.yr;b.removeEventListener?b.removeEventListener(c,d,a.bn):b.detachEvent&&b.detachEvent(Pc(c),d);Kc--;(c=Nc(b))?(Rb(c,a),0==c.Xo&&(c.src=null,b[Ic]=null)):kb(a);return!0}function H(a){if(a)if(gb(a))a.removeAllListeners(void 0);else if(a=Nc(a)){var b=0,c;for(c in a.Fc)for(var d=a.Fc[c].concat(),e=0;e<d.length;++e)Tc(d[e])&&++b}}
function Uc(a,b){if(gb(a))return a.Bq(b,void 0);var c=Nc(a);return!!c&&c.Bq(b,void 0)}function Pc(a){return a in Jc?Jc[a]:Jc[a]="on"+a}function Vc(a,b,c,d){var e=1;if(a=Nc(a))if(b=a.Fc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.bn==c&&!h.bm&&(e&=!1!==Wc(h,d))}return Boolean(e)}function Wc(a,b){var c=a.mk,d=a.Aq||a.src;a.Np&&Tc(a);return c.call(d,b)}
function Qc(a,b){if(a.bm)return!0;if(!sc){var c=b||da("window.event"),d=new Fc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.Wf&&0<=l;l--)d.currentTarget=c[l],e&=Vc(c[l],h,!0,d);for(l=0;!d.Wf&&l<c.length;l++)d.currentTarget=c[l],e&=Vc(c[l],h,!1,d)}return e}return Wc(a,new Fc(b,this))}
function Nc(a){a=a[Ic];return a instanceof Pb?a:null}var Xc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Lc(a){return ja(a)?a:a[Xc]||(a[Xc]=function(b){return a.handleEvent(b)})};function Yc(){uc.call(this);this.zg=new Pb(this);this.EE=this;this.ur=null}w(Yc,uc);Yc.prototype[fb]=!0;f=Yc.prototype;f.Rv=function(a){this.ur=a};f.addEventListener=function(a,b,c,d){G(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Sc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.ur;if(c)for(b=[];c;c=c.ur)b.push(c);var c=this.EE,d=a.type||a;if(r(a))a=new Cc(a,c);else if(a instanceof Cc)a.target=a.target||c;else{var e=a;a=new Cc(d,c);xb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.Wf&&0<=k;k--)h=a.currentTarget=b[k],e=Zc(h,d,!0,a)&&e;a.Wf||(h=a.currentTarget=c,e=Zc(h,d,!0,a)&&e,a.Wf||(e=Zc(h,d,!1,a)&&e));if(b)for(k=0;!a.Wf&&k<b.length;k++)h=a.currentTarget=b[k],e=Zc(h,d,!1,a)&&e;return e};
f.f=function(){Yc.d.f.call(this);this.removeAllListeners();this.ur=null};f.B=function(a,b,c,d){return this.zg.add(String(a),b,!1,c,d)};f.Au=function(a,b,c,d){return this.zg.add(String(a),b,!0,c,d)};f.kb=function(a,b,c,d){return this.zg.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.zg?this.zg.Yf(a):0};
function Zc(a,b,c,d){b=a.zg.Fc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.bm&&k.bn==c){var l=k.mk,n=k.Aq||k.src;k.Np&&Rb(a.zg,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.oo}f.zn=function(a,b,c,d){return this.zg.zn(String(a),b,c,d)};f.Bq=function(a,b){return this.zg.Bq(ca(a)?String(a):void 0,b)};function $c(){Yc.call(this);this.s="base";this.ad=window["X.counter"].pL();this.G=!1}w($c,Yc);$c.prototype.__defineGetter__("classname",function(){return this.s});$c.prototype.__defineGetter__("id",function(){return this.ad});v("X.base",$c);function ad(a,b){$c.call(this);this.s="triplets";this.Cf=Infinity;this.zf=-Infinity;this.Df=Infinity;this.Af=-Infinity;this.Ef=Infinity;this.Bf=-Infinity;this.pp=[0,0,0];this.Ja=0;this.Nb=new Float32Array(a);null!=b&&(this.Nb=b.Nb.subarray(0,b.Nb.length),this.Ja=this.Nb.length,this.Cf=b.Cf,this.zf=b.zf,this.Df=b.Df,this.Af=b.Af,this.Ef=b.Ef,this.Bf=b.Bf,this.pp=b.pp.slice())}w(ad,$c);f=ad.prototype;
f.add=function(a,b,c){this.Cf=Math.min(this.Cf,a);this.zf=Math.max(this.zf,a);this.Df=Math.min(this.Df,b);this.Af=Math.max(this.Af,b);this.Ef=Math.min(this.Ef,c);this.Bf=Math.max(this.Bf,c);this.pp=[(this.Cf+this.zf)/2,(this.Df+this.Af)/2,(this.Ef+this.Bf)/2];this.G=!0;this.Nb[this.Ja++]=a;this.Nb[this.Ja++]=b;this.Nb[this.Ja++]=c;return this.Ja/3};f.resize=function(){if(this.Ja!=this.Nb.length){var a=new Float32Array(this.Ja);a.set(this.Nb.subarray(0,this.Ja));this.Nb=a}};
f.get=function(a){a*=3;return[this.Nb[a],this.Nb[a+1],this.Nb[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Nb=new Float32Array(this.Nb.length);this.G=!0};ad.prototype.__defineGetter__("count",function(){this.resize();return this.Nb.length/3});ad.prototype.__defineGetter__("length",function(){this.resize();return this.Nb.length});v("X.triplets",ad);v("X.triplets.prototype.add",ad.prototype.add);v("X.triplets.prototype.resize",ad.prototype.resize);
v("X.triplets.prototype.get",ad.prototype.get);v("X.triplets.prototype.remove",ad.prototype.remove);v("X.triplets.prototype.clear",ad.prototype.clear);function bd(){$c.call(this);this.s="indexer";this.Ss=[];this.Od={}}w(bd,$c);bd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.Od||(this.Od[b]=this.Ss.length,this.Ss.push(a));return this.Od[b]};bd.prototype.unique=function(){return this.Ss};function cd(a){$c.call(this);this.s="file";this.Bp=a;this.G=!0}w(cd,$c);function dd(){this.ng=this.da=null}dd.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.da=null;else{if(g(a)){if(1==a.length){this.da=new cd(a[0]);return}this.da=Cb(a,function(a){var c=new J;c.da=new cd(a);return c})}else this.da=new cd(a);this.ng=null}});dd.prototype.__defineGetter__("file",function(){return this.da?g(this.da)?this.da.map(function(a){return a.da.Bp}):this.da.Bp:""});
dd.prototype.__defineGetter__("filedata",function(){return g(this.da)?this.da.map(function(a){return a.ng}):this.ng});dd.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.ng=null;if(g(a))if(1==a.length)this.ng=a[0];else{var b=this.da.length,c;for(c=0;c<b;c++)this.da[c].ng=a[c]}else this.ng=a});function ed(){return null};function fd(a,b,c){return Math.min(Math.max(a,b),c)};function gd(a,b){this.tb={};this.bb=[];this.ph=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Us(a)}f=gd.prototype;f.vh=function(){return this.ph};f.ck=function(){hd(this);for(var a=[],b=0;b<this.bb.length;b++)a.push(this.tb[this.bb[b]]);return a};f.yn=function(){hd(this);return this.bb.concat()};
f.rt=function(a){for(var b=0;b<this.bb.length;b++){var c=this.bb[b];if(id(this.tb,c)&&this.tb[c]==a)return!0}return!1};f.zl=function(a,b){if(this===a)return!0;if(this.ph!=a.vh())return!1;var c=b||kd;hd(this);for(var d,e=0;d=this.bb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function kd(a,b){return a===b}f.On=function(){return 0==this.ph};f.clear=function(){this.tb={};this.ph=this.bb.length=0};
f.remove=function(a){return id(this.tb,a)?(delete this.tb[a],this.ph--,this.bb.length>2*this.ph&&hd(this),!0):!1};function hd(a){if(a.ph!=a.bb.length){for(var b=0,c=0;b<a.bb.length;){var d=a.bb[b];id(a.tb,d)&&(a.bb[c++]=d);b++}a.bb.length=c}if(a.ph!=a.bb.length){for(var e={},c=b=0;b<a.bb.length;)d=a.bb[b],id(e,d)||(a.bb[c++]=d,e[d]=1),b++;a.bb.length=c}}f.get=function(a,b){return id(this.tb,a)?this.tb[a]:b};f.set=function(a,b){id(this.tb,a)||(this.ph++,this.bb.push(a));this.tb[a]=b};
f.Us=function(a){var b;a instanceof gd?(b=a.yn(),a=a.ck()):(b=ob(a),a=nb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.yn(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new gd(this)};f.tw=function(){for(var a=new gd,b=0;b<this.bb.length;b++){var c=this.bb[b];a.set(this.tb[c],c)}return a};function id(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function ld(){$c.call(this);this.s="colortable";this.Od=new gd;za(this,new dd)}w(ld,$c);ld.prototype.add=function(a,b,c,d,e,h){if(!(u(a)&&u(c)&&u(d)&&u(e)&&u(h)))throw Error("Invalid color table entry.");this.Od.set(a,[b,c,d,e,h]);this.G=!0};ld.prototype.get=function(a){return this.Od.get(a)};v("X.colortable.prototype.get",ld.prototype.get);function md(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}md.prototype.clone=function(){return new md(this.x,this.y,this.z)};md.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};md.prototype.ow=function(){return[this.x,this.y,this.z]};function K(a,b,c){this.x=a;this.y=b;this.z=c}w(K,md);f=K.prototype;f.clone=function(){return new K(this.x,this.y,this.z)};f.Rf=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.vb=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.Rf())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sc=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.zl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function nd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function od(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function pd(a,b){return new K(a.x+b.x,a.y+b.y,a.z+b.z)}function qd(a,b){return new K(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.P=K;f=A.P.prototype;f.clone=K.prototype.clone;f.Rf=K.prototype.Rf;f.scale=K.prototype.scale;f.vb=K.prototype.vb;f.add=K.prototype.add;f.sc=K.prototype.sc;f.normalize=function(){var a=this.Rf();return 0==a?this.scale(0):this.scale(1/a)};A.P.yi=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.P.Rj=qd;A.P.Ht=nd;A.P.Wq=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new K(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.P.prototype.__defineGetter__("xx",function(){return this.x});
A.P.prototype.__defineGetter__("yy",function(){return this.y});A.P.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.P);v("X.vector.prototype.clone",A.P.prototype.clone);v("X.vector.prototype.magnitude",A.P.prototype.Rf);v("X.vector.prototype.scale",A.P.prototype.scale);v("X.vector.prototype.invert",A.P.prototype.vb);v("X.vector.prototype.normalize",A.P.prototype.normalize);v("X.vector.prototype.add",A.P.prototype.add);v("X.vector.prototype.subtract",A.P.prototype.sc);
v("X.vector.dot",A.P.yi);v("X.vector.cross",A.P.Rj);v("X.vector.distance",A.P.Ht);v("X.vector.lerp",A.P.Wq);function rd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}rd.prototype.BYTES_PER_ELEMENT=8;rd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};rd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{rd.BYTES_PER_ELEMENT=8}catch(sd){}rd.prototype.BYTES_PER_ELEMENT=rd.prototype.BYTES_PER_ELEMENT;rd.prototype.set=rd.prototype.set;rd.prototype.toString=rd.prototype.toString;v("Float64Array",rd)};function td(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}td.prototype.BYTES_PER_ELEMENT=4;td.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};td.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(td.BYTES_PER_ELEMENT=4,td.prototype.BYTES_PER_ELEMENT=td.prototype.BYTES_PER_ELEMENT,td.prototype.set=td.prototype.set,td.prototype.toString=td.prototype.toString,v("Float32Array",td));function ud(){return new Float32Array(3)}function vd(a,b,c){var d=ud();d[0]=a;d[1]=b;d[2]=c;return d}function wd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function xd(){return new Float32Array(4)}function yd(a,b,c,d){var e=xd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function zd(){return new Float32Array(16)}function Ad(){var a=zd();a[0]=a[5]=a[10]=a[15]=1;return a}function Bd(a,b,c,d,e,h,k,l,n,m,q,p,t,s,z,y,I){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=m;a[9]=q;a[10]=p;a[11]=t;a[12]=s;a[13]=z;a[14]=y;a[15]=I;return a}function Cd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Dd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function L(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Ed(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Fd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Gd(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],m=a[6],q=a[7],p=a[8],t=a[9],s=a[10],z=a[11],y=a[12],I=a[13],R=a[14];a=a[15];var O=b[0],F=b[1],P=b[2],Y=b[3],U=b[4],ua=b[5],na=b[6],wa=b[7],Ma=b[8],Ga=b[9],Na=b[10],ka=b[11],xa=b[12],qa=b[13],Ac=b[14];b=b[15];c[0]=d*O+l*F+p*P+y*Y;c[1]=e*O+n*F+t*P+I*Y;c[2]=h*O+m*F+s*P+R*Y;c[3]=k*O+q*F+z*P+a*Y;c[4]=d*U+l*ua+p*na+y*wa;c[5]=e*U+n*ua+t*na+I*wa;c[6]=h*U+m*ua+s*na+R*wa;c[7]=k*U+q*ua+z*na+a*wa;c[8]=d*Ma+l*Ga+p*Na+y*ka;c[9]=e*Ma+n*Ga+t*Na+I*ka;
c[10]=h*Ma+m*Ga+s*Na+R*ka;c[11]=k*Ma+q*Ga+z*Na+a*ka;c[12]=d*xa+l*qa+p*Ac+y*b;c[13]=e*xa+n*qa+t*Ac+I*b;c[14]=h*xa+m*qa+s*Ac+R*b;c[15]=k*xa+q*qa+z*Ac+a*b;return c}
function Hd(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=a[8],p=a[9],t=a[10],s=a[11],z=a[12],y=a[13],I=a[14],R=a[15],O=c*l-d*k,F=c*n-e*k,P=c*m-h*k,Y=d*n-e*l,U=d*m-h*l,ua=e*m-h*n,na=q*y-p*z,wa=q*I-t*z,Ma=q*R-s*z,Ga=p*I-t*y,Na=p*R-s*y,ka=t*R-s*I,xa=O*ka-F*Na+P*Ga+Y*Ma-U*wa+ua*na;if(0==xa)return!1;xa=1/xa;b[0]=(l*ka-n*Na+m*Ga)*xa;b[1]=(-d*ka+e*Na-h*Ga)*xa;b[2]=(y*ua-I*U+R*Y)*xa;b[3]=(-p*ua+t*U-s*Y)*xa;b[4]=(-k*ka+n*Ma-m*wa)*xa;b[5]=(c*ka-e*Ma+h*wa)*xa;b[6]=(-z*ua+I*P-R*F)*xa;b[7]=
(q*ua-t*P+s*F)*xa;b[8]=(k*Na-l*Ma+m*na)*xa;b[9]=(-c*Na+d*Ma-h*na)*xa;b[10]=(z*U-y*P+R*O)*xa;b[11]=(-q*U+p*P-s*O)*xa;b[12]=(-k*Ga+l*wa-n*na)*xa;b[13]=(c*Ga-d*wa+e*na)*xa;b[14]=(-z*Y+y*F-I*O)*xa;b[15]=(q*Y-p*F+t*O)*xa;return!0}function Id(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Jd(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Kd(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.t={};A.t.GA=function(a,b,c,d){c=c.sc(b);c.normalize();d=A.P.Rj(c,d);d.normalize();var e=A.P.Rj(d,c);e.normalize();c.vb();L(a,0,d.x,d.y,d.z,0);L(a,1,e.x,e.y,e.z,0);L(a,2,c.x,c.y,c.z,0);Kd(a,-b.x,-b.y,-b.z);return a};A.t.Gb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.P((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.t.fL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Fd(a,b,d);Fd(a,c,e);Ed(a,b,e);Ed(a,c,d);return a};A.t.eL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Dd(a,b,d);Dd(a,c,e);Cd(a,b,e);Cd(a,c,d);return a};A.t.In=Ad;A.t.clone=function(a){var b=zd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.t.tw=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.t.pF=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],m=a[8],q=a[9],p=a[10],t=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(p*a-t*y)-(b*l-d*h)*(q*a-t*z)+(b*n-e*h)*(q*y-p*z)+(c*l-d*k)*(m*a-t*s)-(c*n-e*k)*(m*y-p*s)+(d*n-e*l)*(m*z-q*s)};A.t.vb=Hd;A.t.Gu=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Bd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.t.sI=function(a,b,c,d,e,h,k){return Bd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.t.tI=function(a,b,c,d,e,h,k){return Bd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.t.multiply=Gd;A.t.OA=Jd;A.t.translate=Kd;A.t.scale=function(a,b,c,d){return Bd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.t.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],m=a[4],q=a[5],p=a[6],t=a[7],s=a[8],z=a[9],y=a[10],I=a[11],R=Math.cos(b),O=Math.sin(b),F=1-R;b=c*c*F+R;var P=c*d*F+e*O,Y=c*e*F-d*O,U=c*d*F-e*O,ua=d*d*F+R,na=d*e*F+c*O,wa=c*e*F+d*O;c=d*e*F-c*O;e=e*e*F+R;return Bd(a,h*b+m*P+s*Y,k*b+q*P+z*Y,l*b+p*P+y*Y,n*b+t*P+I*Y,h*U+m*ua+s*na,k*U+q*ua+z*na,l*U+p*ua+y*na,n*U+t*ua+I*na,h*wa+m*c+s*e,k*wa+q*c+z*e,l*wa+p*c+y*e,n*wa+t*c+I*e,a[12],a[13],a[14],a[15])};
A.t.Br=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[4]=c*q+k*p;a[5]=d*q+l*p;a[6]=e*q+n*p;a[7]=h*q+m*p;a[8]=c*-p+k*q;a[9]=d*-p+l*q;a[10]=e*-p+n*q;a[11]=h*-p+m*q;return a};A.t.Cr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*-p;a[1]=d*q+l*-p;a[2]=e*q+n*-p;a[3]=h*q+m*-p;a[8]=c*p+k*q;a[9]=d*p+l*q;a[10]=e*p+n*q;a[11]=h*p+m*q;return a};
A.t.Dr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*p;a[1]=d*q+l*p;a[2]=e*q+n*p;a[3]=h*q+m*p;a[4]=c*-p+k*q;a[5]=d*-p+l*q;a[6]=e*-p+n*q;a[7]=h*-p+m*q;return a};v("X.matrix.identity",A.t.In);v("X.matrix.clone",A.t.clone);v("X.matrix.transpose",A.t.tw);v("X.matrix.determinant",A.t.pF);v("X.matrix.invert",A.t.vb);v("X.matrix.multiply",A.t.multiply);v("X.matrix.multiplyByVector",A.t.Gb);v("X.matrix.multiplyByVec4",A.t.OA);
v("X.matrix.makePerspective",A.t.Gu);v("X.matrix.makeFrustum",A.t.sI);v("X.matrix.makeOrtho",A.t.tI);v("X.matrix.makeLookAt",A.t.GA);v("X.matrix.translate",A.t.translate);v("X.matrix.scale",A.t.scale);v("X.matrix.rotate",A.t.rotate);v("X.matrix.rotateX",A.t.Br);v("X.matrix.rotateY",A.t.Cr);v("X.matrix.rotateZ",A.t.Dr);v("X.matrix.swapRows",A.t.fL);v("X.matrix.swapCols",A.t.eL);function Ld(){$c.call(this);this.s="transform";this.rb=A.t.In()}w(Ld,$c);Ld.prototype.__defineGetter__("matrix",function(){return this.rb});Ld.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.rb=a;this.ca()});f=Ld.prototype;f.Br=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Br(this.rb,a*Math.PI/180);this.ca()};
f.Cr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Cr(this.rb,a*Math.PI/180);this.ca()};f.Dr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.t.Dr(this.rb,a*Math.PI/180);this.ca()};f.yC=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.rb,a,0,0);this.ca()};f.zC=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.rb,0,a,0);this.ca()};
f.AC=function(a){if(!u(a))throw Error("Invalid distance.");A.t.translate(this.rb,0,0,a);this.ca()};function Md(a,b,c){a.rb[b+4*c]*=-1;a.ca()}f.HF=function(){Md(this,0,0)};f.IF=function(){Md(this,1,1)};f.JF=function(){Md(this,2,2)};f.ca=function(){this.G=!0};v("X.transform",Ld);v("X.transform.prototype.rotateX",Ld.prototype.Br);v("X.transform.prototype.rotateY",Ld.prototype.Cr);v("X.transform.prototype.rotateZ",Ld.prototype.Dr);v("X.transform.prototype.translateX",Ld.prototype.yC);
v("X.transform.prototype.translateY",Ld.prototype.zC);v("X.transform.prototype.translateZ",Ld.prototype.AC);v("X.transform.prototype.flipX",Ld.prototype.HF);v("X.transform.prototype.flipY",Ld.prototype.IF);v("X.transform.prototype.flipZ",Ld.prototype.JF);v("X.transform.prototype.modified",Ld.prototype.ca);function Od(){$c.call(this);this.s="texture";this.ji=this.yf=this.da=null;this.Ls=this.Ms=0;this.ux=!1;za(this,new dd)}w(Od,$c);Od.prototype.__defineSetter__("rawData",function(a){this.ji=a;this.G=!0});Od.prototype.__defineSetter__("rawDataHeight",function(a){this.Ls=a;this.G=!0});Od.prototype.__defineSetter__("rawDataWidth",function(a){this.Ms=a;this.G=!0});Od.prototype.__defineSetter__("grayscale",function(a){this.ux=a;this.G=!0});v("X.texture",Od);function Pd(){this.wd=Qd;this.Yb=new Ld;this.Ea=[1,1,1];this.ml=this.Qa=this.xc=this.aa=this.C=null;this.hl=[];this.gb=!0;this.gl=this.Mm=1;this.Zk=null;this.Dm=!1;this.Kc=1;this.$c=0;this.Lm=!0}var Qd="TRIANGLES";Pd.prototype.__defineSetter__("type",function(a){return this.wd=a});Pd.prototype.__defineGetter__("type",function(){return this.wd});Pd.prototype.__defineGetter__("texture",function(){this.Qa||(this.Qa=new Od);return this.Qa});Pd.prototype.__defineGetter__("transform",function(){return this.Yb});
Pd.prototype.__defineGetter__("points",function(){return this.C});Pd.prototype.__defineSetter__("points",function(a){this.C=a});Pd.prototype.__defineGetter__("normals",function(){return this.aa});Pd.prototype.__defineSetter__("normals",function(a){this.aa=a});Pd.prototype.__defineGetter__("colors",function(){return this.xc});Pd.prototype.__defineSetter__("colors",function(a){this.xc=a});Pd.prototype.__defineGetter__("color",function(){return this.Ea});
Pd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Ea=a;this.G=!0});Pd.prototype.__defineGetter__("opacity",function(){return this.Kc});Pd.prototype.__defineSetter__("opacity",function(a){if(!u(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Kc=a;this.G=!0});Pd.prototype.__defineGetter__("caption",function(){return this.Zk});
Pd.prototype.__defineSetter__("caption",function(a){this.Zk=a;this.G=!0});Pd.prototype.__defineGetter__("visible",function(){return this.gb});Pd.prototype.__defineSetter__("visible",function(a){for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.gb=a;this.G=!0});Pd.prototype.__defineGetter__("pointsize",function(){return this.Mm});Pd.prototype.__defineSetter__("pointsize",function(a){if(!u(a))throw Error("Invalid point size.");this.Mm=a;this.G=!0});
Pd.prototype.__defineGetter__("magicmode",function(){return this.Dm});Pd.prototype.__defineSetter__("magicmode",function(a){if(!ia(a))throw Error("Invalid magic mode setting.");this.Dm=a;this.G=!0});Pd.prototype.__defineGetter__("linewidth",function(){return this.gl});Pd.prototype.__defineSetter__("linewidth",function(a){if(!u(a))throw Error("Invalid line width.");this.gl=a;this.G=!0});Pd.prototype.__defineGetter__("pickable",function(){return this.Lm});
Pd.prototype.__defineSetter__("pickable",function(a){if(!ia(a))throw Error("Invalid pickable setting.");this.Lm=a;this.G=!0});Pd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.ml});Pd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Rd(){this.Pd=Infinity;this.qb=this.Mb=-Infinity;this.sb=Infinity;this.fi=[0,0,0];this.di=[1,1,1]}Rd.prototype.__defineGetter__("lowerThreshold",function(){return this.qb});Rd.prototype.__defineSetter__("lowerThreshold",function(a){this.qb=a});Rd.prototype.__defineGetter__("upperThreshold",function(){return this.sb});Rd.prototype.__defineSetter__("upperThreshold",function(a){this.sb=a});Rd.prototype.__defineGetter__("min",function(){return this.Pd});Rd.prototype.__defineGetter__("max",function(){return this.Mb});
Rd.prototype.__defineGetter__("minColor",function(){return this.fi});Rd.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.fi=a});Rd.prototype.__defineGetter__("maxColor",function(){return this.di});Rd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.di=a});function Sd(){$c.call(this);this.s="scalars";this.Am=this.Wa=null;this.Hx=!0;this.As=0;za(this,new dd);za(this,new Rd);this.fi=[0,1,0];this.di=[1,0,0]}w(Sd,$c);Sd.prototype.__defineGetter__("array",function(){return this.Wa});Sd.prototype.__defineSetter__("array",function(a){this.Am=this.Wa=a;this.G=!0});Sd.prototype.__defineGetter__("interpolation",function(){return this.As});Sd.prototype.__defineSetter__("interpolation",function(a){this.As=a});v("X.scalars",Sd);function Td(a){$c.call(this);this.s="object";this.j=[];this.Xa=this.td=null;za(this,new Pd);null!=a&&this.Oj(a)}w(Td,$c);
Td.prototype.Oj=function(a){this.wd=a.wd;this.Yb=new Ld;this.Yb.rb=new Float32Array(a.Yb.rb);this.Ea=a.Ea.slice();a.C&&(this.C=new ad(a.C.length,a.C));a.aa&&(this.aa=new ad(a.aa.length,a.aa));a.xc&&(this.xc=new ad(a.xc.length,a.xc));this.Qa=a.Qa;this.ml=a.ml;a.da&&(this.da=new cd((new String(a.da.Bp)).toString()));this.Kc=a.Kc;this.j.length=0;var b=a.j;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.j.push(new A[b[d].s](b[d]));this.gb=a.gb;this.Mm=a.Mm;this.gl=a.gl;a.Zk&&(this.Zk=(new String(a.Zk)).toString());
this.Dm=a.Dm;this.Lm=a.Lm;this.hl=a.hl.slice();this.G=!0};Td.prototype.__defineGetter__("colortable",function(){this.td||(this.td=new ld);return this.td});Td.prototype.__defineGetter__("scalars",function(){this.Xa||(this.Xa=new Sd);return this.Xa});Td.prototype.__defineGetter__("children",function(){return this.j});Td.prototype.ca=function(){var a=new Ud;a.Ka=this;this.dispatchEvent(a)};Td.prototype.remove=function(){var a=new Vd;a.Ka=this;this.dispatchEvent(a)};
function Xd(a,b){if(!(null!=a&&null!=b&&a instanceof Td&&b instanceof Td))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Kc?-1:1==b.Kc?1:null!=a.$c&&null!=b.$c&&a.$c>b.$c?-1:1}v("X.object",Td);v("X.object.prototype.modified",Td.prototype.ca);v("X.object.prototype.remove",Td.prototype.remove);function Yd(a){Cc.call(this,a);this.s="event"}w(Yd,Cc);var Zd="pan"+B(),$d="rotate"+B(),ae="zoom"+B(),be="scroll"+B();B();var ce="resetview"+B(),de="windowlevel"+B(),ee="modified"+B(),fe="remove"+B(),ge="progress"+B(),he="hover"+B(),ie="hover_end"+B(),je="computing"+B(),ke="computing_end"+B(),le="computing_progress"+B();function ne(){Yd.call(this,de);this.Fs=this.Ts=0}w(ne,Yd);function oe(){Yd.call(this,Zd);this.$c=new A.P(0,0,0)}w(oe,Yd);function pe(){Yd.call(this,$d);this.$c=new A.P(0,0,0)}
w(pe,Yd);function qe(){Yd.call(this,ae);this.xf=this.og=!1}w(qe,Yd);function re(){Yd.call(this,be);this.Ob=!1}w(re,Yd);function se(){Yd.call(this,he);this.Ip=this.Hp=0}w(se,Yd);function we(){Yd.call(this,ie)}w(we,Yd);function xe(){Yd.call(this,ce)}w(xe,Yd);function Ud(){Yd.call(this,ee);this.sa=this.Ka=null}w(Ud,Yd);function Vd(){Yd.call(this,fe);this.sa=this.Ka=null}w(Vd,Yd);function ye(){Yd.call(this,ge);this.Dj=0}w(ye,Yd);function ze(){Yd.call(this,je);this.Ka=null}w(ze,Yd);
function Ae(){Yd.call(this,le);this.Dj=0}w(Ae,Yd);function Be(){Yd.call(this,ke);this.Ka=null}w(Be,Yd);v("X.event.events.PAN",Zd);v("X.event.events.ROTATE",$d);v("X.event.events.ZOOM",ae);v("X.event.events.SCROLL",be);function Ce(){$c.call(this);this.s="parser";this._data=null;this.Ja=0;this.xE=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.xp=!0}w(Ce,$c);Ce.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function De(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Ee(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ce.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.Ja,this.Ja+=b*c));if(this.xE!=this.xp)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function Fe(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=yd(0,0,0,1),e=xd();Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,0,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,b[1]-
1,0,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,0,0,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,b[1]-1,0,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,0,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,b[1]-1,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,b[1]-1,b[2]-1,1);Jd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ge(a,b){var c=Ad();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=ud(),h=a[0],k=a[1],l=a[2],n=b[0],m=b[1],q=b[2];e[0]=k*q-l*m;e[1]=l*n-h*q;e[2]=h*m-k*n;wd(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];L(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);L(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);L(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=zd();Hd(c,d);return[c,d]}
function He(a,b,c,d,e,h,k,l,n){var m=new Ie;wd(c,c);for(var q=[],p=[],t=0;6>t;t++)for(var s=Math.floor(t/2),z=(s+1)%3,y=(s+2)%3,I=(4+2*s)%6,R=0;2>R;R++){var O=(2+R+2*s)%6,F=-(c[s]*(e[t]-a[s])+c[z]*(e[O]-a[z]))/c[y]+a[y];if(F>=e[I]&&F<=e[I+1]||F<=e[I]&&F>=e[I+1]){var P=[];P[s]=e[t];P[z]=e[O];P[y]=F;q.push(P)}else P=[],P[s]=e[t],P[z]=e[O],P[y]=F,p.push(P)}a=vd(0,0,1);a=Ge(c,a);e=a[0];a=a[1];s=[];for(p=0;p<q.length;++p)t=yd(q[p][0],q[p][1],q[p][2],1),z=xd(),Jd(e,t,z),s.push([z[0],z[1],z[2]]);e=vd(1,
0,0);q=ud();Id(a,e,q);p=vd(0,1,0);e=ud();Id(a,p,e);t=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(p=p=0;p<s.length;++p)s[p][0]<t[0]&&(t[0]=s[p][0]),s[p][0]>t[1]&&(t[1]=s[p][0]),s[p][1]<t[2]&&(t[2]=s[p][1]),s[p][1]>t[3]&&(t[3]=s[p][1]),s[p][2]<t[4]&&(t[4]=s[p][2]),s[p][2]>t[5]&&(t[5]=s[p][2]);p=yd(t[0]+(t[1]-t[0])/2,t[2]+(t[3]-t[2])/2,t[4]+(t[5]-t[4])/2,0);s=xd();Gd(a,p,s);z=Math.floor(t[0]);y=Math.ceil(t[1]);z==y&&y++;I=y-z;R=Math.floor(t[2]);
O=Math.ceil(t[3]);F=O-R;P=b[0];b=b[1];var p=Math.ceil(I/P),Y=Math.ceil(F/b),U=new Uint8Array(4*p*Y),ua=new Od;ua.Ms=p;ua.Ls=Y;var Y=xd(),na=yd(0,0,t[4],1),wa=zd();Gd(k.oE,a,wa);for(var Ma=O-1E-7,Ga=y-1E-7,Na=0,ka=0,xa=0,qa=R,qa=R;qa<=Ma;qa+=b)for(xa++,ka=0,na[1]=qa,p=z;p<=Ga;p+=P){ka++;na[0]=p;Jd(wa,na,Y);var Ac=4*Na,te=Math.floor(Y[2]),ue=Math.floor(Y[1]),ve=Math.floor(Y[0]);if(0<=ve&&ve<k.fb[0]&&0<=ue&&ue<k.fb[1]&&0<=te&&te<k.fb[2]){var Wd=h[te][ue][ve],Nh=ve=ue=te=0;n?((Wd=n.get(Wd))||(Wd=[0,.61,
0,0,1]),te=255*Wd[1],ue=255*Wd[2],ve=255*Wd[3],Nh=255*Wd[4]):(te=ue=ve=Wd/k.Mb*255,Nh=255);U[Ac]=te;U[++Ac]=ue;U[++Ac]=ve;U[++Ac]=Nh}else U[Ac]=0,U[++Ac]=0,U[++Ac]=0,U[++Ac]=0;Na++}ua.ji=U;m.Qa=ua;m.DE=t;m.qE=a;m.pE=wa;m.wE=R;m.aO=O;m.CE=z;m.bO=y;m.wx=ka;m.vx=xa;m.lh=P;m.Ra=I;m.eh=b;m.Fa=F;m.Oa=[s[0],s[1],s[2]];m.bl=[c[0],c[1],c[2]];m.Cp=[q[0],q[1],q[2]];m.Ob=[e[0],e[1],e[2]];m.gb=!1;m.kh=k;m.dh=null==k.kh||l?!0:!1;m.Yk=d;m.Xe();m.gb=!1;return m}
function Je(a,b,c,d){var e;e=d.wc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,p=(2+2*n)%6,t=(4+2*n)%6,s=1/c[n]*(e[l]-b[n]);if(Infinity!=s&&-Infinity!=s){var z=b[m]+c[m]*s,s=b[q]+c[q]*s;z>=e[p]&&z<=e[p+1]&&s>=e[t]&&s<=e[t+1]?(p=[],p[n]=e[l],p[m]=z,p[q]=s,h.push(p)):(p=[],p[n]=e[l],p[m]=z,p[q]=s,k.push(p))}}e=[h,k];b=e[0];d.e[a].I=e;e=nd(new K(b[0][0],b[0][1],b[0][2]),new K(b[1][0],b[1][1],b[1][2]));d.e[a].$N=e;h=vd(0,0,1);k=Ge(c,h)[0];l=yd(d.xs[0],d.xs[1],d.xs[2],0);h=
xd();Jd(k,l,h);k=xd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.e[a].vd=[Math.abs(h[0]),Math.abs(h[1])];d.e[a].kl=h[2];d.e[a].La=k;e=Math.floor(Math.abs(e/h[2]));d.Om[a]=e+1;d.e[a].ba=e+1;d.e[a].I[0][0][0]>d.e[a].I[0][1][0]?0<k[0]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][0]<d.e[a].I[0][1][0]?0>k[0]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][1]>d.e[a].I[0][1][1]?
0<k[1]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][1]<d.e[a].I[0][1][1]?0>k[1]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][2]>d.e[a].I[0][1][2]?0<k[2]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e):d.e[a].I[0][0][2]<d.e[a].I[0][1][2]&&0>k[2]&&(e=d.e[a].I[0][0],d.e[a].I[0][0]=d.e[a].I[0][1],d.e[a].I[0][1]=e);d.e[a].Is=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Ke(a,b){var c;c=b._data;for(var d=b.fb,e=b.Mb,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,m=0,q=0,p=0,t=0,p=0;p<d[2];p++){var s=c.subarray(p*l,(p+1)*l),t=0;k[p]=Array(d[1]);h[p]=Array(d[1]);for(q=0;q<d[1];q++)for(k[p][q]=new c.constructor(d[0]),h[p][q]=new c.constructor(d[0]),m=0;m<d[0];m++)n=s[t],k[p][q][m]=n/e*255,h[p][q][m]=n,t++}c=[h,k];b.Xb=c[0];b.ZN=c[1];A.Md(a.s+".reslice");b.$a=null!=b.q;b.td&&(b.zm=b.td.Od);b.OO=[0,0,0];b.ra=[b.sd[0]+(b.bh[0]-1)/2,b.sd[1]+(b.bh[1]-1)/2,b.sd[2]+(b.bh[2]-
1)/2];b.wc=[Math.min(b.sd[0],b.sd[0]+b.bh[0]-1),Math.max(b.sd[0],b.sd[0]+b.bh[0]-1),Math.min(b.sd[1],b.sd[1]+b.bh[1]-1),Math.max(b.sd[1],b.sd[1]+b.bh[1]-1),Math.min(b.sd[2],b.sd[2]+b.bh[2]-1),Math.max(b.sd[2],b.sd[2]+b.bh[2]-1)];b.e=[{},{},{}];c=vd(b.ra[0],b.ra[1],b.ra[2]);b.e[0].Pm=c;d=vd(1,0,0);wd(d,d);b.e[0].D=d;e=[1,0,0];b.e[0].Ea=e;Je(0,c,d,b);b.j[0].j=Array(b.e[0].ba);c[0]=b.e[0].I[0][0][0]+b.e[0].La[0]*Math.floor(b.e[0].ba/2);c[1]=b.e[0].I[0][0][1]+b.e[0].La[1]*Math.floor(b.e[0].ba/2);c[2]=
b.e[0].I[0][0][2]+b.e[0].La[2]*Math.floor(b.e[0].ba/2);c=He(c,b.e[0].vd,b.e[0].D,b.e[0].Ea,b.wc,b.Xb,b,b.$a,b.zm);b.$a&&(c.q=b.q.j[0].j[Math.floor(b.e[0].ba/2)].Qa);b.j[0].j[Math.floor(b.e[0].ba/2)]=c;b.fh=Math.floor(b.e[0].ba/2);b.cl=Math.floor(b.e[0].ba/2);c=vd(b.ra[0],b.ra[1],b.ra[2]);b.e[1].Pm=c;d=vd(0,1,0);wd(d,d);b.e[1].D=d;e=[0,1,0];b.e[1].Ea=e;Je(1,c,d,b);b.j[1].j=Array(b.e[1].ba);c[0]=b.e[1].I[0][0][0]+b.e[1].La[0]*Math.floor(b.e[1].ba/2);c[1]=b.e[1].I[0][0][1]+b.e[1].La[1]*Math.floor(b.e[1].ba/
2);c[2]=b.e[1].I[0][0][2]+b.e[1].La[2]*Math.floor(b.e[1].ba/2);c=He(c,b.e[1].vd,b.e[1].D,b.e[1].Ea,b.wc,b.Xb,b,b.$a,b.zm);b.$a&&(c.q=b.q.j[1].j[Math.floor(b.e[1].ba/2)].Qa);b.j[1].j[Math.floor(b.e[1].ba/2)]=c;b.gh=Math.floor(b.e[1].ba/2);b.dl=Math.floor(b.e[1].ba/2);c=vd(b.ra[0],b.ra[1],b.ra[2]);b.e[2].Pm=c;d=vd(0,0,1);wd(d,d);b.e[2].D=d;e=[0,.392,.804];b.e[2].Ea=e;Je(2,c,d,b);b.j[2].j=Array(b.e[2].ba);c[0]=b.e[2].I[0][0][0]+b.e[2].La[0]*Math.floor(b.e[2].ba/2);c[1]=b.e[2].I[0][0][1]+b.e[2].La[1]*
Math.floor(b.e[2].ba/2);c[2]=b.e[2].I[0][0][2]+b.e[2].La[2]*Math.floor(b.e[2].ba/2);c=He(c,b.e[2].vd,b.e[2].D,b.e[2].Ea,b.wc,b.Xb,b,b.$a,b.zm);b.$a&&(c.q=b.q.j[2].j[Math.floor(b.e[2].ba/2)].Qa);b.j[2].j[Math.floor(b.e[2].ba/2)]=c;b.hh=Math.floor(b.e[2].ba/2);b.el=Math.floor(b.e[2].ba/2);A.pd(a.s+".reslice");return b.Xb};function Le(){Ce.call(this);this.s="parserOFF"}w(Le,Ce);
Le.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Ee(h,n,a);n=a+1;return b}n=e;return Ee(h,n,e-1)}A.Md(this.s+".parse");this._data=c;var e=c.byteLength,h=this.h("uchar",e);c=[];b.C=new ad(e);b.aa=new ad(e);for(var k=b.C,l=b.aa,n=0,m=d(),m=("OFF"===m?d():m).split(" "),q=m[0],m=m[1];q--;){var p=d(),p=p.split(" ");c.push([parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])])}for(;m--;){var p=d(),p=p.split(" "),
t=c[parseInt(p[1],10)],q=c[parseInt(p[2],10)],p=c[parseInt(p[3],10)];k.add(t[0],t[1],t[2]);k.add(q[0],q[1],q[2]);k.add(p[0],p[1],p[2]);t=new K(t[0],t[1],t[2]);p=new K(p[0],p[1],p[2]);q=qd((new K(q[0],q[1],q[2])).sc(t),p.sc(t));q.normalize();l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z)}A.pd(this.s+".parse");c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};v("X.parserOFF",Le);v("X.parserOFF.prototype.parse",Le.prototype.parse);function Me(){Ce.call(this);this.s="parserDCM"}w(Me,Ce);
Me.prototype.parse=function(a,b,c){b.Zg={};b.Zg.Xn=0;this.Ih(c,b);if(null==b.da.length||b.ya.length==b.da.length){b.Zg.Xn=b.da.length;var d={};c={};for(var e=0;e<b.ya.length;e++)d.hasOwnProperty(b.ya[e].series_instance_uid)||(d[b.ya[e].series_instance_uid]=[],c[b.ya[e].series_instance_uid]={}),c[b.ya[e].series_instance_uid].hasOwnProperty(b.ya[e].sop_instance_uid)||(c[b.ya[e].series_instance_uid][b.ya[e].sop_instance_uid]=!0,d[b.ya[e].series_instance_uid].push(b.ya[e]));var e=Object.keys(d)[0],h=
d[e],k=h.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[e][0].dist=0):h[0].image_position_patient[0]!=h[1].image_position_patient[0]||h[0].image_position_patient[1]!=h[1].image_position_patient[1]||h[0].image_position_patient[2]!=h[1].image_position_patient[2]?(l="image_position_patient",e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],
h[0].image_orientation_patient[5]),e=qd(e,d),h.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,e)),h.sort(function(a,b){return a.dist-b.dist})):h[0].instance_number!=h[1].instance_number?(l="instance_number",h.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");e=0;for(d=h.length;e<d;e++)window.console.log("Image Position Patient: (Image ",
e,")",h[e].image_position_patient," Pixel Spacing:",h[e].pixel_spacing);isNaN(h[0].pixel_spacing[0])&&(h[0].pixel_spacing[0]=1);isNaN(h[0].pixel_spacing[1])&&(h[0].pixel_spacing[1]=1);if(1<h.length)for(var e=function(){l="instance_number";h.sort(function(a,b){return a.instance_number-b.instance_number});h.forced_instance_ordering=!0;window.console.log('\n\nNRG WARNING: Slices were found unordered after XTK "image_position_patient" sorting. Forcing "instance_number" reordering.')},n=0,d=h.length;n<
d-1;n++)if(1!=Math.abs(h[n].instance_number-h[n+1].instance_number)){e();break}if(1<k)switch(l){case "image_position_patient":var n=h[0].image_position_patient,m=h[1].image_position_patient,e=m[0]-n[0],d=m[1]-n[1],q=m[2]-n[2];h[0].pixel_spacing[2]=Math.sqrt(e*e+d*d+q*q);window.console.log("\n\nRounding z pixel_spacing from: ",h[0].pixel_spacing[2]);h[0].pixel_spacing[2]=Math.round(h[0].pixel_spacing[2]);window.console.log("to:                              ",h[0].pixel_spacing[2]);break;case "instance_number":var p=
1;if(!0===h.forced_instance_ordering){for(var e=1,d=h.length,n=h[0].image_position_patient,t=!1;e<d;e++)if(m=h[e].image_position_patient,n[0]!=m[0]||n[1]!=m[1]||n[2]!=m[2]){t=!0;break}t&&(window.console.log("\n\nNRG WARNING: Setting pixel_spacing according to image_position_patient even though we're using forced_instance_ordering."),e=m[0]-n[0],d=m[1]-n[1],q=m[2]-n[2],p=Math.round(Math.sqrt(e*e+d*d+q*q)))}h[0].pixel_spacing[2]=p;break;default:window.console.log("Unkown ordering mode - returning: "+
l)}else h[0].pixel_spacing[2]=1;m=1;switch(l){case "image_position_patient":n=h[0].image_position_patient;p=h[k-1].image_position_patient;e=p[0]-n[0];d=p[1]-n[1];q=p[2]-n[2];e=Math.sqrt(e*e+d*d+q*q);m+=Math.round(e/h[0].pixel_spacing[2]);break;case "instance_number":m+=Math.abs(h[k-1].instance_number-h[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}window.console.log("EXPECTED SLICES",m);m=Math.round(m);n=h[0].columns*h[0].rows;e=n*m;p=null;switch(h[0].Kj){case 8:p=
new Uint8Array(e);break;case 16:p=new Uint16Array(e);break;case 32:p=new Uint32Array(e);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.ih=h[0].pixel_spacing;for(t=0;t<k;t++){var s=h[t].data,e=0;switch(l){case "image_position_patient":e=h[t].image_position_patient[0]-h[0].image_position_patient[0];d=h[t].image_position_patient[1]-h[0].image_position_patient[1];q=h[t].image_position_patient[2]-h[0].image_position_patient[2];e=Math.sqrt(e*e+d*d+q*q)/h[0].pixel_spacing[2];
window.console.log("\n\nRounding _distance_position from: ",e);e=Math.round(e);window.console.log("to:                               ",e);break;case "instance_number":e=h[t].instance_number-h[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(s,e*n)}c.data=p;b._data=p;b.fb=[h[0].columns,h[0].rows,m];c.cz=b.fb;window.console.log("OBJ",c.cz);m=De(p);k=m[0];m=m[1];c.min=b.Pd=b.Fb=k;c.max=b.Mb=b.Eb=m;-Infinity==b.qb&&(b.qb=k);Infinity==b.sb&&(b.sb=m);m=h[0].image_position_patient;
k=zd();if("false"==b.reslicing.toString())"image_position_patient"==l||h.forced_instance_ordering?(window.console.log('NRG modification: Running an orthogonal transform because the volume\'s "reslicing" property is set to false.'),e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),e=qd(e,d),window.console.log("HACKING THE ORIGIN before:",
m),m[2]=0,window.console.log("HACKING THE ORIGIN after:",m),e.x=Math.round(e.x),e.y=Math.round(e.y),e.z=Math.round(e.z),L(k,0,-Math.round(h[0].image_orientation_patient[0])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[3])*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]),L(k,1,-Math.round(h[0].image_orientation_patient[1])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[4])*h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]),L(k,2,Math.round(h[0].image_orientation_patient[2])*
h[0].pixel_spacing[0],Math.round(h[0].image_orientation_patient[5])*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]),L(k,3,0,0,0,1)):"instance_number"==l?(L(k,0,-1,0,0,-m[0]),L(k,1,-0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]),L(k,3,0,0,0,1)):window.console.log("Unkown ordering mode - returning: "+l);else switch(l){case "image_position_patient":e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]);d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],
h[0].image_orientation_patient[5]);e=qd(e,d);L(k,0,-h[0].image_orientation_patient[0]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[3]*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]);L(k,1,-h[0].image_orientation_patient[1]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[4]*h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]);L(k,2,h[0].image_orientation_patient[2]*h[0].pixel_spacing[0],h[0].image_orientation_patient[5]*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]);
L(k,3,0,0,0,1);break;case "instance_number":L(k,0,-1,0,0,-m[0]);L(k,1,-0,-1,-0,-m[1]);L(k,2,0,0,1,m[2]);L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.re=k;c.te=zd();Hd(c.re,c.te);e=yd(0,0,0,1);m=xd();Jd(k,e,m);e=yd(1,1,1,1);d=xd();Jd(k,e,d);c.rj=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];k=Fe(k,[b.fb[0],b.fb[1],b.fb[2]]);c.pj=[k[1]-k[0]+1,k[3]-k[2]+1,k[5]-k[4]+1];c.qj=[k[0],k[2],k[4]];b.Xe(c);b.yf=Ke(this,b)}c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};
Me.prototype.ae=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Me.prototype.Ih=function(a,b){this._data=a;if("undefined"==typeof b.ya||null==b.ya)b.ya=[];var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,m=!1,q=!1,p,t;t=[[18,100],[8,4368],[8,4384]];for(var s,z;e<d.length;){h=d[e++];k=d[e++];l=d[e++];n=d[e++];"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l);m=!1;if(void 0!==h&&
void 0!==k){switch(c.transfer_syntax_uid){case "1.2.840.10008.1.2.1":p="Little Endian Explicit";break;case "1.2.840.10008.1.2.2":p="Big Endian Explicit";break;case "1.2.840.10008.1.2":if(p="Little Endian Implicit","1.2.840.10008.1.2"==c.transfer_syntax_uid)for(s=0,z=t.length;s<z;s++)if(h===t[s][0]&&k===t[s][1]){m=!0;break}}q||void 0===p||(window.console.log("\n\nparserDCM: Identified "+p),q=!0);if(m){window.console.log("\t\tSkipping ","(0x"+h.toString(16)+", 0x"+k.toString(16)+")");continue}}switch(h){case 2:switch(k){case 16:l=
"";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Me.prototype.ae(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Kj=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);
l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=Me.prototype.ae(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(k);break;case 19:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<n/
2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Me.prototype.ae(d,e,l,n)}break;case 65534:switch(k){default:n=
0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(k);break;default:e=Me.prototype.ae(d,e,l,n)}break;case 16:switch(k){case 8720:for(s=0;s<n/2;s++)e++;break;default:e=Me.prototype.ae(d,e,l,n)}break;default:e=Me.prototype.ae(d,e,l,n)}}switch(c.Kj){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=
new Uint32Array(c.columns*c.rows)}this.Ja=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Kj){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.ya.push(c);return b};v("X.parserDCM",Me);v("X.parserDCM.prototype.parse",Me.prototype.parse);function Ne(){Ce.call(this);this.s="parserVTK"}w(Ne,Ce);
Ne.prototype.parse=function(a,b,c){A.Md(this.s+".parse");var d=b.C,e=b.aa,h=new Uint8Array(c),k="";b.C=d=new ad(c.byteLength);b.aa=e=new ad(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Ee(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.Um=this.Vm=null;this.xj=[];this.we=Qd;this.Hs=this.gi=this.ai=this.hi=!1;c=0;for(l=k%8;l--;)Oe(this,h[c]),c++;for(l=.125*k^0;l--;)Oe(this,h[c]),c++,Oe(this,h[c]),c++,Oe(this,h[c]),c++,Oe(this,h[c]),c++,Oe(this,h[c]),c++,Oe(this,h[c]),c++,Oe(this,h[c]),
c++,Oe(this,h[c]),c++;c=this.Vm;var h=this.Um,k=h.length,n=l=this.xj.length;do{var m=this.xj[l-n],q=m.length,p;for(p=0;p<q&&!("LINES"==this.we&&p+1>=q);p++){var t=parseInt(m[p],10),s=c.get(t);d.add(s[0],s[1],s[2]);var z=t,y=s;"LINES"==this.we?(z=parseInt(m[p+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.we&&(0!=p&&p!=q-1||d.add(s[0],s[1],s[2]));t<k?(y=h.get(t),e.add(y[0],y[1],y[2]),"LINES"==this.we?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.we&&(0!=p&&p!=q-1||e.add(y[0],
y[1],y[2]))):(z=new K(s[0],s[1],s[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.we?(z=new K(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.we&&(0!=p&&p!=q-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.wd=this.we;A.pd(this.s+".parse");d=new Ud;d.Ka=b;d.sa=a;this.dispatchEvent(d)};
function Oe(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.hi=!0;a.ai=!1;a.gi=!1;c=parseInt(c[1],10);a.Vm=new ad(3*c);a.Um=new ad(3*c);return;case "VERTICES":a.ai=!0;a.hi=!1;a.gi=!1;c=parseInt(c[1],10);if(3<=c)a.we=Qd;else if(1==c)a.we="POINTS";else throw Error("This VTK file is not supported!");a.xj=[];return;case "TRIANGLE_STRIPS":a.ai=!0;a.hi=!1;a.gi=!1;a.we="TRIANGLE_STRIPS";a.xj=[];return;case "LINES":a.ai=!0;a.hi=!1;a.gi=!1;a.we="LINES";a.xj=
[];return;case "POLYGONS":a.ai=!0;a.hi=!1;a.gi=!1;a.we="POLYGONS";a.xj=[];return;case "POINT_DATA":a.gi=!0;a.hi=!1;a.ai=!1;return}if(a.hi)if(1==d||isNaN(parseFloat(e)))a.hi=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.Vm.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Vm.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Vm.add(d,e,c))}else a.ai?1==d||isNaN(parseFloat(e))?a.ai=!1:(c=c.slice(1),a.xj.push(c)):
a.gi&&("NORMALS"==e?a.Hs=!0:1==d||isNaN(parseFloat(e))?(a.gi=!1,a.Hs=!1):a.Hs&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.Um.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Um.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Um.add(d,e,c))))}v("X.parserVTK",Ne);v("X.parserVTK.prototype.parse",Ne.prototype.parse);function Pe(){Ce.call(this);this.s="parserFSM";this.xp=!1}w(Pe,Ce);
Pe.prototype.parse=function(a,b,c){A.Md(this.s+".parse");this._data=c;var d=b.C,e=b.aa;b.hl=[];var h=b.hl;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var n=new Uint32Array(e),m=new Float32Array(9*c);b.C=d=new ad(9*c);b.aa=e=new ad(9*c);var q;for(q=0;q<c;q++){var p=3*q,t=k[p],s=k[p+1],z=k[p+2];h.push(t);h.push(s);h.push(z);n[t]+=1;n[s]+=1;n[z]+=1;var p=3*t,y=3*s,I=3*z,R=l[p],O=l[p+1],F=l[p+2],
s=l[y],z=l[y+1],t=l[y+2],P=l[I],Y=l[I+1],U=l[I+2];d.add(R,O,F);d.add(s,z,t);d.add(P,Y,U);R=new K(R,O,F);P=new K(P,Y,U);s=(new K(s,z,t)).clone().sc(R);z=P.clone().sc(R);s=qd(s,z).normalize();m[p]+=s.x;m[p+1]+=s.y;m[p+2]+=s.z;m[y]+=s.x;m[y+1]+=s.y;m[y+2]+=s.z;m[I]+=s.x;m[I+1]+=s.y;m[I+2]+=s.z}for(q=0;q<c;q++)p=3*q,t=k[p],s=k[p+1],z=k[p+2],p=3*t,y=3*s,I=3*z,h=new K(m[y],m[y+1],m[y+2]),l=new K(m[I],m[I+1],m[I+2]),p=(new K(m[p],m[p+1],m[p+2])).scale(1/n[t]).normalize(),h=h.scale(1/n[s]).normalize(),l=
l.scale(1/n[z]).normalize(),e.add(p.x,p.y,p.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this._data.byteLength-this.Ja);k=null;for(p=0;p<c.length;p++)if(99==c[p]&&114==c[p+1]&&97==c[p+2]&&115==c[p+3]){for(e=k=p+9;10!=c[p]&&p<c.length;)e++,p++;k=Ee(c.subarray(k,e)).split(" ");break}k&&(b.Yb.yC(parseFloat(k[0])),b.Yb.zC(parseFloat(k[1])),b.Yb.AC(parseFloat(k[2])));b.wd=Qd;A.pd(this.s+".parse");c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};v("X.parserFSM",Pe);
v("X.parserFSM.prototype.parse",Pe.prototype.parse);var Qe={it:function(a,b,c){return Qe.update(a,0,b,c)},update:function(a,b,c,d){var e=Qe.$D,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Re;
Re=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Qe.$D=Re;function Se(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,m,q,p,t;for(p=0;p<b;++p)a[p]>c&&(c=a[p]),a[p]<d&&(d=a[p]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(p=0;p<b;++p)if(a[p]===k){m=0;q=l;for(t=0;t<k;++t)m=m<<1|q&1,q>>=1;for(t=m;t<e;t+=n)h[t]=k<<16|p;++l}++k;l<<=1;n<<=1}return[h,c,d]};function Te(a,b){this.dt=[];this.ft=32768;this.Ff=this.$m=this.ab=this.rw=0;this.input=new Uint8Array(a);this.yy=!1;this.gt=Ue;this.resize=!1;if(b||!(b={}))b.index&&(this.ab=b.index),b.bufferSize&&(this.ft=b.bufferSize),b.bufferType&&(this.gt=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.gt){case Ve:this.gc=32768;this.output=new Uint8Array(32768+this.ft+258);break;case Ue:this.gc=0;this.output=new Uint8Array(this.ft);this.Zj=this.CF;this.Hy=this.fF;this.At=this.nF;break;default:throw Error("invalid inflate mode");
}}var Ve=0,Ue=1;
Te.prototype.wi=function(){for(;!this.yy;){var a=We(this,3);a&1&&(this.yy=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.ab,c=this.output,d=this.gc,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.Ff=this.$m=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.gt){case Ve:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.gc=d,c=this.Zj(),d=this.gc;break;case Ue:for(;d+h>c.length;)c=this.Zj({mz:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.ab=b+=h;this.gc=
d;this.output=c;break;case 1:this.At(Xe,Ye);break;case 2:Ze(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.Hy()};
var $e=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),af=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),bf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),cf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),df=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ef=new Uint8Array(288),
ff,gf;ff=0;for(gf=ef.length;ff<gf;++ff)ef[ff]=143>=ff?8:255>=ff?9:279>=ff?7:8;var Xe=Se(ef),hf=new Uint8Array(30),jf,kf;jf=0;for(kf=hf.length;jf<kf;++jf)hf[jf]=5;var Ye=Se(hf);function We(a,b){for(var c=a.$m,d=a.Ff,e=a.input,h=a.ab,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.$m=c>>>b;a.Ff=d-b;a.ab=h;return k}
function mf(a,b){for(var c=a.$m,d=a.Ff,e=a.input,h=a.ab,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.$m=c>>k;a.Ff=d-k;a.ab=h;return e&65535}
function Ze(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=mf(this,b),d){case 16:for(d=3+We(this,2);d--;)c[h++]=e;break;case 17:for(d=3+We(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+We(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=We(a,5)+257,d=We(a,5)+1,e=We(a,4)+4,h=new Uint8Array($e.length),k;for(k=0;k<e;++k)h[$e[k]]=We(a,3);e=Se(h);h=new Uint8Array(c);k=new Uint8Array(d);a.At(Se(b.call(a,c,e,h)),Se(b.call(a,d,e,k)))}f=Te.prototype;
f.At=function(a,b){var c=this.output,d=this.gc;this.Xy=a;for(var e=c.length-258,h,k,l;256!==(h=mf(this,a));)if(256>h)d>=e&&(this.gc=d,c=this.Zj(),d=this.gc),c[d++]=h;else for(h-=257,l=af[h],0<bf[h]&&(l+=We(this,bf[h])),h=mf(this,b),k=cf[h],0<df[h]&&(k+=We(this,df[h])),d>=e&&(this.gc=d,c=this.Zj(),d=this.gc);l--;)c[d]=c[d++-k];for(;8<=this.Ff;)this.Ff-=8,this.ab--;this.gc=d};
f.nF=function(a,b){var c=this.output,d=this.gc;this.Xy=a;for(var e=c.length,h,k,l;256!==(h=mf(this,a));)if(256>h)d>=e&&(c=this.Zj(),e=c.length),c[d++]=h;else for(h-=257,l=af[h],0<bf[h]&&(l+=We(this,bf[h])),h=mf(this,b),k=cf[h],0<df[h]&&(k+=We(this,df[h])),d+l>e&&(c=this.Zj(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.Ff;)this.Ff-=8,this.ab--;this.gc=d};
f.Zj=function(){var a=new Uint8Array(this.gc-32768),b=this.gc-32768,c=this.output;a.set(c.subarray(32768,a.length));this.dt.push(a);this.rw+=a.length;c.set(c.subarray(b,b+32768));this.gc=32768;return c};
f.CF=function(a){var b=this.input.length/this.ab+1|0,c=this.input,d=this.output;a&&("number"===typeof a.mz&&(b=a.mz),"number"===typeof a.LE&&(b+=a.LE));2>b?(a=(c.length-this.ab)/this.Xy[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.Hy=function(){var a=0,b=this.output,c=this.dt,d,e=new Uint8Array(this.rw+(this.gc-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.gc);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.gc;h<k;++h)e[a++]=b[h];this.dt=[];return this.buffer=e};f.fF=function(){var a,b=this.gc;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var nf;for(nf=0;256>nf;++nf)for(var of=nf,pf=7,of=of>>>1;of;of>>>=1)--pf;var qf=[],rf;for(rf=0;288>rf;rf++)switch(!0){case 143>=rf:qf.push([rf+48,8]);break;case 255>=rf:qf.push([rf-144+400,9]);break;case 279>=rf:qf.push([rf-256+0,7]);break;case 287>=rf:qf.push([rf-280+192,8]);break;default:throw"invalid literal: "+rf;}
var sf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(sf);function tf(){};function uf(a){this.input=a;this.ab=0;this.member=[]}
uf.prototype.wi=function(){for(var a=this.input.length;this.ab<a;){var b=new tf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.ab;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=Qe.it(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Te(l,{index:d,bufferSize:e});b.data=e=d.wi();d=d.ab;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(Qe.it(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Qe.it(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.ab=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function vf(){Ce.call(this);this.s="parserMGZ";this.xp=!1}w(vf,Ce);
vf.prototype.parse=function(a,b,c,d){A.Md(this.s+".parse");d&&(c=(new uf(new Uint8Array(c))).wi(),c=c.buffer);d=this.Ih(c);var e=[d.Tu,d.Uu,d.Vu];b.fb=e;var h=d.FC;b.ih=h;c=d.min;var k=d.max;b.Pd=b.Fb=c;b.Mb=b.Eb=k;-Infinity==b.qb&&(b.qb=c);Infinity==b.sb&&(b.sb=k);c=zd();L(c,0,d.tf[0][0],d.tf[1][0],d.tf[2][0],0);L(c,1,d.tf[0][1],d.tf[1][1],d.tf[2][1],0);L(c,2,d.tf[0][2],d.tf[1][2],d.tf[2][2],0);L(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],m=0;3>m;++m)e[m]=d.tf[3][m]-(c[m+0]*h[0]*k+
c[m+4]*h[1]*l+c[m+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.re=c;d.te=zd();Hd(d.re,d.te);e=yd(0,0,0,1);h=xd();Jd(c,e,h);k=yd(1,1,1,1);e=xd();Jd(c,k,e);c=Fe(c,b.fb);d.rj=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.pj=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.qj=[c[0],c[2],c[4]];b.Xe(d);A.pd(this.s+".parse");b.yf=Ke(this,b);d=new Ud;d.Ka=b;d.sa=a;this.dispatchEvent(d)};
vf.prototype.Ih=function(a){this._data=a;a={version:0,cE:0,aE:0,KF:0,bE:0,Tu:0,Uu:0,Vu:0,MI:0,type:0,wF:0,oB:0,yM:null,tf:null,FC:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.Tu=this.h("uint");a.Uu=this.h("uint");a.Vu=this.h("uint");a.MI=this.h("uint");a.type=this.h("uint");a.wF=this.h("uint");a.oB=this.h("ushort");if(0<a.oB){a.FC=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.tf=b}this.Ja=
284;b=a.Tu*a.Uu*a.Vu;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=De(a.data);a.min=b[0];a.max=b[1];this.Ja+16<this._data.byteLength&&(a.cE=this.h("float"),a.KF=this.h("float"),a.aE=this.h("float"),a.bE=this.h("float"));return a};v("X.parserMGZ",vf);v("X.parserMGZ.prototype.parse",vf.prototype.parse);function wf(){Ce.call(this);this.s="parserLBL"}w(wf,Ce);
wf.prototype.parse=function(a,b,c){A.Md(this.s+".parse");var d=b.hl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.h("uchar",c.byteLength),l=k.length,n=!1,m=0;for(c=1;c<l;c++)10==k[c-1]?(m=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Ee(k,m,c),10)),n=!1);k=b.Xa.Wa?b.Xa.Wa:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.Xa.Wa=k;b.Xa.Am=h;b.Xa.G=!0;A.pd(this.s+".parse");d=new Ud;d.Ka=b;d.sa=a;this.dispatchEvent(d)};v("X.parserLBL",wf);v("X.parserLBL.prototype.parse",wf.prototype.parse);function xf(){Ce.call(this);this.s="parserCRV";this.xp=!1}w(xf,Ce);
xf.prototype.parse=function(a,b,c){A.Md(this.s+".parse");var d=b.hl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.Ja=3;var e=this.h("uint");this.h("uint");this.h("uint");var h=0,k=0,l=0,n=0,m=0,q=0,p=0,t=0,s=0,z=0,y=0;c=Array(2);var I=Array(2),R=this.h("float",e),O;for(O=0;O<e;O++){var F=R[O];0==O&&(c[0]=I[0]=F);0<=F?(h++,n+=F):(k++,l+=F);s+=F;y++;I[0]=Math.max(F,I[0]);c[0]=Math.min(F,c[0]);R[O]=F}0!=h&&(m=n/h);0!=k&&(q=l/k);0!=y&&(z=s/y);for(y=s=l=n=0;y<
e;y++)F=R[y],O=0,0<=F?(O=Math.pow(F-m,2),n+=O):(O=Math.pow(F-q,2),l+=O),O=Math.pow(F-z,2),s+=O;1<h&&(p=Math.sqrt(n/(h-1)));1<k&&(t=Math.sqrt(l/(k-1)));c[1]=q-2.5*t;I[1]=m+2.5*p;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=R[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.Xa.Pd=c[1];b.Xa.Mb=I[1];-Infinity==b.Xa.qb&&(b.Xa.qb=c[1]);Infinity==b.Xa.sb&&(b.Xa.sb=I[1]);b.Xa.Wa=R;b.Xa.Am=h;b.Xa.G=!0;A.pd(this.s+".parse");d=new Ud;d.Ka=b;d.sa=a;this.dispatchEvent(d)};v("X.parserCRV",xf);
v("X.parserCRV.prototype.parse",xf.prototype.parse);function yf(a,b){var c,d;this.input=a;this.ab=0;if(b||!(b={}))b.index&&(this.ab=b.index),b.verify&&(this.uL=b.verify);c=a[this.ab++];d=a[this.ab++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.pB=new Te(a,{index:this.ab,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
yf.prototype.wi=function(){var a=this.input,b;b=this.pB.wi();this.ab=this.pB.ab;if(this.uL){var a=(a[this.ab++]<<24|a[this.ab++]<<16|a[this.ab++]<<8|a[this.ab++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function zf(){Ce.call(this);this.s="parserRAW"}w(zf,Ce);
zf.prototype.parse=function(a,b,c,d){A.Md(this.s+".parse");d&&(c=(new yf(new Uint8Array(c))).wi(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=De(d.data);c=e[0];e=e[1];d.min=b.Pd=b.Fb=c;d.max=b.Mb=b.Eb=e;-Infinity==b.qb&&(b.qb=c);Infinity==b.sb&&(b.sb=e);e=Ad();d.re=e;d.te=Ad();var h=yd(0,0,0,1);c=xd();Jd(e,h,c);var k=yd(1,1,1,1),h=xd();Jd(e,k,h);e=Fe(e,b.fb);d.rj=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.pj=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.qj=[e[0],e[2],e[4]];b.Xe(d);A.pd(this.s+".parse");b.yf=
Ke(this,b);d=new Ud;d.Ka=b;d.sa=a;this.dispatchEvent(d)};v("X.parserRAW",zf);v("X.parserRAW.prototype.parse",zf.prototype.parse);function Af(){Ce.call(this);this.s="parserIMAGE"}w(Af,Ce);Af.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Rc(h,"load",this.hK.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};Af.prototype.hK=function(a,b,c){b.yf=a;b.ji=null;a=new Ud;a.Ka=c;a.sa=b;this.dispatchEvent(a)};v("X.parserIMAGE",Af);v("X.parserIMAGE.prototype.parse",Af.prototype.parse);function Bf(){Ce.call(this);this.s="parserLUT"}w(Bf,Ce);
Bf.prototype.parse=function(a,b,c){A.Md(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Ee(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.pd(this.s+".parse");c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};
v("X.parserLUT",Bf);v("X.parserLUT.prototype.parse",Bf.prototype.parse);function Cf(){Ce.call(this);this.s="parserMRC"}w(Cf,Ce);
Cf.prototype.parse=function(a,b,c){A.Md(this.s+".parse");c=this.Ih(c);var d=c.min,e=c.max;b.fb=[c.bo,c.co,c.eo];b.ih=[c.xlen/c.PA,c.MC/c.QA,c.OC/c.RA];b.Pd=b.Fb=d;b.Mb=b.Eb=e;-Infinity==b.qb&&(b.qb=d);Infinity==b.sb&&(b.sb=e);e=zd();L(e,3,0,0,0,1);L(e,0,-1,0,0,c.bo);L(e,1,0,0,-1,c.co);L(e,2,0,-1,0,c.eo);c.re=e;c.te=zd();Hd(c.re,c.te);var h=yd(0,0,0,1),d=xd();Jd(e,h,d);var k=yd(1,1,1,1),h=xd();Jd(e,k,h);k=[c.bo,c.co,c.eo];e=Fe(e,k);c.rj=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.pj=[e[1]+e[0]+1,e[3]-e[2]+1,
e[5]-e[4]+1];c.qj=[e[0],e[2],e[4]];b.fb=k;b.Xe(c);b.yf=Ke(this,b);A.pd(this.s+".parse");c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};
Cf.prototype.Ih=function(a){this._data=a;a={bo:0,co:0,eo:0,mode:0,HO:0,IO:0,JO:0,PA:0,QA:0,RA:0,xlen:0,MC:0,OC:0,alpha:0,beta:0,gamma:0,uI:0,vI:0,wI:0,bt:0,Lp:0,Jj:0,vO:0,next:0,lF:0,extra:null,NI:0,QI:0,extra:null,WH:0,tO:0,TH:0,lens:0,KI:0,LI:0,sL:0,tL:0,kL:null,yL:0,AL:0,BL:0,jO:0,UO:0,wK:0,OI:0,data:null,min:Infinity,max:-Infinity,DO:0,lC:null,TO:null,PO:null,orientation:null,GO:null};this.Ja=0;a.bo=this.h("sint");a.co=this.h("sint");a.eo=this.h("sint");a.mode=this.h("sint");var b=a.bo*a.co*a.eo;
this.Ja=1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.Ja=28;a.PA=this.h("sint");a.QA=this.h("sint");a.RA=this.h("sint");a.xlen=this.h("float");a.MC=this.h("float");a.OC=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.uI=this.h("sint");a.vI=this.h("sint");a.wI=this.h("sint");a.bt=this.h("float");a.Lp=this.h("float");a.Jj=this.h("float");a.uO=this.h("sint");a.next=this.h("sint");a.lF=this.h("short");a.NI=this.h("short");a.QI=this.h("short");a.WH=this.h("sint");a.sO=this.h("sint");a.TH=this.h("short");a.lens=this.h("short");a.KI=this.h("short");a.LI=this.h("short");a.sL=this.h("short");a.tL=this.h("short");a.kL=this.h("float",6);this.Ja=196;a.yL=this.h("float");a.AL=
this.h("float");a.BL=this.h("float");this.Ja=216;a.wK=this.h("float");a.OI=this.h("sint");a.zO=this.h("schar",10);if(0!=a.next)switch(this.Ja=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.Jj-(a.Lp-a.Jj)?(a.min=a.bt,a.max=a.Jj+(a.Jj-a.bt)):(a.min=a.Jj-(a.Lp-a.Jj),a.max=a.Lp);return a};v("X.parserMRC",Cf);v("X.parserMRC.prototype.parse",Cf.prototype.parse);function Df(){Ce.call(this);this.s="parserNRRD"}w(Df,Ce);
Df.prototype.parse=function(a,b,c){A.Md(this.s+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ee(c,0,k-2);h=k+1;break}var l,n,m,q,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.iI=!0:!l.match(/^#/)&&(q=l.match(/(.*):(.*)/))&&(n=q[1].trim(),l=q[2].trim(),(m=this.GF[n])?m.call(this,l):this[n]=l);if(!this.iI)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.Sb&&(this.Sb=[new K(1,0,0),new K(0,1,0),new K(0,0,1)],this.cw))for(d=[],q=0;2>=q;q++)d.push(isNaN(this.cw[q])?void 0:this.Sb[q].scale(this.cw[q]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new uf(new Uint8Array(h))).wi();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.$h(h);q=De(c.data);h=c.min=q[0];q=c.max=q[1];b.Pd=b.Fb=h;b.Mb=b.Eb=q;b.fb=[this.Yv[0],this.Yv[1],this.Yv[2]];d=
(new K(this.Sb[0][0],this.Sb[0][1],this.Sb[0][2])).Rf();e=(new K(this.Sb[1][0],this.Sb[1][1],this.Sb[1][2])).Rf();k=(new K(this.Sb[2][0],this.Sb[2][1],this.Sb[2][2])).Rf();b.ih=[d,e,k];-Infinity==b.qb&&(b.qb=h);Infinity==b.sb&&(b.sb=q);d=q=1;"left-posterior-superior"==this.lC&&(d=q=-1);h=Ad();L(h,0,q*this.Sb[0][0],q*this.Sb[1][0],q*this.Sb[2][0],q*this.bw[0]);L(h,1,d*this.Sb[0][1],d*this.Sb[1][1],d*this.Sb[2][1],d*this.bw[1]);L(h,2,1*this.Sb[0][2],1*this.Sb[1][2],1*this.Sb[2][2],1*this.bw[2]);L(h,
3,0,0,0,1);c.re=h;c.te=zd();Hd(c.re,c.te);d=yd(0,0,0,1);q=xd();Jd(h,d,q);e=yd(1,1,1,1);d=xd();Jd(h,e,d);h=Fe(h,b.fb);c.rj=[d[0]-q[0],d[1]-q[1],d[2]-q[2]];c.pj=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.qj=[h[0],h[2],h[4]];b.Xe(c);A.pd(this.s+".parse");b.yf=Ke(this,b);c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};
Df.prototype.GF={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.$h=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.$h=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.$h=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.$h=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.$h=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.$h=Uint32Array;break;case "float":this.$h=Float32Array;break;case "double":this.$h=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.pO=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.xi=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.Yv=e},space:function(a){return this.lC=a},"space origin":function(a){return this.bw=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Sb=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.cw=e}};v("X.parserNRRD",Df);v("X.parserNRRD.prototype.parse",Df.prototype.parse);function Ef(){Ce.call(this);this.s="parserSTL"}w(Ef,Ce);
Ef.prototype.parse=function(a,b,c){A.Md(this.s+".parse");this._data=c;var d=b.C,e=b.aa;if("solid"==Ee(this.h("uchar",5))){b.C=d=new ad(c.byteLength);b.aa=e=new ad(c.byteLength);var h=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,m;for(m=0;m<c;m++)if(10==e[m]){if(k||l){var q=Ee(e,n,m).split(" "),l=parseFloat(q[0]),p=parseFloat(q[1]),q=parseFloat(q[2]);k?(d.add(l,p,q),d.add(l,p,q),d.add(l,p,q)):h.add(l,p,q);l=k=!1}}else 32==e[m-1]&&(102==e[m]?(n=m+=13,k=!0):118==e[m]&&(n=m+=7,
l=!0))}else for(this.Ja=80,h=this.h("uint"),b.C=d=new ad(9*h),b.aa=e=new ad(9*h),c=c=0;c<h;c++)k=this.h("float",12),n=k[0],m=k[1],l=k[2],e.add(n,m,l),e.add(n,m,l),e.add(n,m,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.Ja+=2;A.pd(this.s+".parse");h=new Ud;h.Ka=b;h.sa=a;this.dispatchEvent(h)};v("X.parserSTL",Ef);v("X.parserSTL.prototype.parse",Ef.prototype.parse);function Ff(){Ce.call(this);this.s="parserNII"}w(Ff,Ce);
Ff.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new uf(new Uint8Array(d))).wi(),d=d.buffer);c=this.Ih(d);d=c.min;e=c.max;b.Pd=b.Fb=d;b.Mb=b.Eb=e;-Infinity==b.qb&&(b.qb=d);Infinity==b.sb&&(b.sb=e);d=zd();L(d,3,0,0,0,1);if(0<c.Fv){var e=0,h=c.lB,k=c.mB,l=c.nB,n=1,m=1,q=1,p=c.iB,t=c.jB,s=c.kB,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.Vf[1]&&(n=c.Vf[1]);
0<c.Vf[2]&&(m=c.Vf[2]);0<c.Vf[2]&&(q=c.Vf[3]);0>c.Vf[0]&&(q=-q);L(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*m,2*(h*l+e*k)*q,p);L(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*m,2*(k*l-e*h)*q,t);L(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*m,(e*e+l*l-k*k-h*h)*q,s)}else 0<c.gC?(e=c.mC,h=c.nC,k=c.oC,L(d,0,e[0],e[1],e[2],e[3]),L(d,1,h[0],h[1],h[2],h[3]),L(d,2,k[0],k[1],k[2],k[3])):0==c.Fv?(L(d,0,c.Vf[1],0,0,0),L(d,1,0,c.Vf[2],0,0),L(d,2,0,0,c.Vf[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.re=d;c.te=zd();Hd(c.re,c.te);
h=yd(0,0,0,1);e=xd();Jd(d,h,e);k=yd(1,1,1,1);h=xd();Jd(d,k,h);k=[c.xi[1],c.xi[2],c.xi[3]];d=Fe(d,k);c.rj=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.pj=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.qj=[d[0],d[2],d[4]];b.fb=k;b.Xe(c);b.yf=Ke(this,b);c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};
Ff.prototype.Ih=function(a){this._data=a;a={RK:0,data_type:null,mF:null,EF:0,EK:0,nK:0,qF:null,xi:null,cI:0,dI:0,eI:0,aI:0,zt:0,$E:0,WK:0,Vf:null,HC:0,DK:0,CK:0,VK:0,TK:null,zL:null,bF:0,cF:0,UK:0,mL:0,zH:0,AH:0,oF:null,XE:null,Fv:0,gC:0,lB:0,mB:0,nB:0,iB:0,jB:0,kB:0,mC:null,nC:null,oC:null,bI:null,magic:null,data:null,min:Infinity,max:-Infinity};a.RK=this.h("uint");a.data_type=this.h("uchar",10);a.mF=this.h("uchar",18);a.EF=this.h("uint");a.EK=this.h("ushort");a.nK=this.h("uchar");a.qF=this.h("uchar");
a.xi=this.h("ushort",8);a.cI=this.h("float");a.dI=this.h("float");a.eI=this.h("float");a.aI=this.h("ushort");a.zt=this.h("ushort");a.$E=this.h("ushort");a.WK=this.h("ushort");a.Vf=this.h("float",8);a.HC=this.h("float");a.DK=this.h("float");a.CK=this.h("float");a.VK=this.h("ushort");a.TK=this.h("uchar");a.zL=this.h("uchar");a.bF=this.h("float");a.cF=this.h("float");a.UK=this.h("float");a.mL=this.h("float");a.zH=this.h("uint",1);a.AH=this.h("uint",1);a.oF=this.h("uchar",80);a.XE=this.h("uchar",24);
a.Fv=this.h("ushort");a.gC=this.h("ushort");a.lB=this.h("float");a.mB=this.h("float");a.nB=this.h("float");a.iB=this.h("float");a.jB=this.h("float");a.kB=this.h("float");a.mC=this.h("float",4);a.nC=this.h("float",4);a.oC=this.h("float",4);a.bI=this.h("uchar",16);a.magic=this.h("uchar",4);this.Ja=parseInt(a.HC,10);var b=a.xi[1]*a.xi[2]*a.xi[3];switch(a.zt){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",
b);break;case 32:a.data=this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.zt);}b=De(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Ff);v("X.parserNII.prototype.parse",Ff.prototype.parse);function Gf(){Ce.call(this);this.s="parserTRK"}w(Gf,Ce);
Gf.prototype.parse=function(a,b,c){A.Md(this.s+".parse");var d=b.C,e=b.aa,h=b.xc;this._data=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var n=this.h("uint");this.h("uint");var m=
this.h("uint"),q=[],p=[],t=Infinity,s=-Infinity,z=null,y=null,I=null,R=null,e=d=null,O=this.h("uint",(this._data.byteLength-1E3)/4);this.Ja=m;for(var F=this.h("float",(this._data.byteLength-1E3)/4),P=0,m=h=0;m<n;m++){for(var Y=O[P],U=new ad(3*Y),ua=0,na=0;na<Y;na++){var wa=F[P+3*na+na*l+1],Ma=F[P+3*na+na*l+2],Ga=F[P+3*na+na*l+3],wa=wa/k[0],Ma=Ma/k[1],Ga=Ga/k[2];U.add(wa,Ma,Ga);if(0<na)var Na=U.get(na-1),ua=ua+Math.sqrt(Math.pow(wa-Na[0],2)+Math.pow(Ma-Na[1],2)+Math.pow(Ga-Na[2],2));na<Y-1&&(h+=6)}P+=
3*Y+Y*l+1;na=U.Cf;Y=U.zf;wa=U.Df;Ma=U.Af;Ga=U.Ef;Na=U.Bf;if(!z||na<z)z=na;if(!y||Y>y)y=Y;if(!I||wa<I)I=wa;if(!R||Ma>R)R=Ma;if(!d||Ga<d)d=Ga;if(!e||Na>e)e=Na;q.push(U);p.push(ua)}k=(z+y)/2;I=(I+R)/2;l=(d+e)/2;R=new Float32Array(h);b.C=d=new ad(h);b.aa=e=new ad(h);b.xc=h=new ad(h);for(m=z=0;m<n;m++)for(y=q[m],O=y.count,ua=p[m],t=Math.min(t,ua),s=Math.max(s,ua),na=0;na<O-1;na++){P=y.get(na);F=y.get(na+1);d.add(P[0],P[1],P[2]);d.add(F[0],F[1],F[2]);var U=P[0]-k,Y=P[1]-I,wa=P[2]-l,Ma=Math.sqrt(U*U+Y*Y+
wa*wa),Ga=F[0]-k,Na=F[1]-I,ka=F[2]-l,xa=Math.sqrt(Ga*Ga+Na*Na+ka*ka);e.add(U/Ma,Y/Ma,wa/Ma);e.add(Ga/xa,Na/xa,ka/xa);F=[Math.abs(F[0]-P[0]),Math.abs(F[1]-P[1]),Math.abs(F[2]-P[2])];P=Math.sqrt(F[0]*F[0]+F[1]*F[1]+F[2]*F[2]);F[0]/=P;F[1]/=P;F[2]/=P;h.add(F[0],F[1],F[2]);h.add(F[0],F[1],F[2]);R[z++]=ua;R[z++]=ua;R[z++]=ua;R[z++]=ua;R[z++]=ua;R[z++]=ua}b.wd="LINES";n=new Sd;n.Pd=t;n.Mb=s;n.qb=t;n.sb=s;n.Am=R;n.Hx=!1;n.G=!0;b.Xa=n;t=!1;for(m=0;16>m;m++)if(0!=c[m]){t=!0;break}!1==t&&(c[0]=c[5]=c[10]=c[15]=
1);A.pd(this.s+".parse");A.t.tw(c,b.Yb.rb);c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};v("X.parserTRK",Gf);v("X.parserTRK.prototype.parse",Gf.prototype.parse);function Hf(){Ce.call(this);this.s="parserOBJ"}w(Hf,Ce);
Hf.prototype.parse=function(a,b,c){A.Md(this.s+".parse");this._data=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.C=new ad(c);b.aa=new ad(c);var h=b.C,k=b.aa,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var m=Ee(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==m[0])e.push([parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])]);else if("f"==m[0]){var q=e[parseInt(m[1],10)-1],l=e[parseInt(m[2],10)-1],m=e[parseInt(m[3],10)-1];h.add(q[0],q[1],q[2]);h.add(l[0],l[1],l[2]);h.add(m[0],m[1],m[2]);q=new K(q[0],q[1],
q[2]);m=new K(m[0],m[1],m[2]);l=qd((new K(l[0],l[1],l[2])).sc(q),m.sc(q));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.pd(this.s+".parse");c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};v("X.parserOBJ",Hf);v("X.parserOBJ.prototype.parse",Hf.prototype.parse);function If(){$c.call(this);this.s="loader";this.fl=new gd;this.Nm=0}w(If,$c);function Jf(a,b){a.Nm+=b/a.fl.vh()/3;a.Nm=Math.min(1,a.Nm);var c=new ye;c.Dj=a.Nm;a.dispatchEvent(c)}function Kf(a){a=a.da.Bp;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Lf))throw Error("The "+b+" file format is not supported.");return[a,b,Lf[b][0],Lf[b][1],Lf[b][2]]}
If.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!id(this.fl.tb,a.ad)||this.fl.get(a.ad)){this.fl.set(a.ad,!1);var c=Kf(a)[0];if(null!=a.ng)this.parse(null,a,b);else{var d=new XMLHttpRequest;G(d,"abort",this.lz.bind(this,d,a,b));G(d,"error",this.lz.bind(this,d,a,b));G(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
If.prototype.parse=function(a,b,c){Jf(this,1);setTimeout(function(){var d=Kf(b),e=d[3],d=new d[2];Rc(d,ee,this.complete.bind(this));var h=b.ng;null==h&&(h=a.response,b.ng=h);d.parse(b,c,h,e)}.bind(this),100)};If.prototype.complete=function(a){Jf(this,1);setTimeout(function(){var b=a.sa,c=a.Ka;b.da.G=!1;b.G=!0;c.ca();this.fl.set(b.ad,!0)}.bind(this),100)};If.prototype.lz=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Lf={OBJ:[Hf,null],OFF:[Le,null],STL:[Ef,null],VTK:[Ne,null],TRK:[Gf,null],MRC:[Cf,null],ST:[Cf,null],FSM:[Pe,null],INFLATED:[Pe,null],SMOOTHWM:[Pe,null],SPHERE:[Pe,null],PIAL:[Pe,null],ORIG:[Pe,null],NRRD:[Df,null],NII:[Ff,null],GZ:[Ff,null],DCM:[Me,null],DICOM:[Me,null],"":[Me,null],CRV:[xf,null],LABEL:[wf,null],MGH:[vf,!1],MGZ:[vf,!0],RAW:[zf,!1],RZ:[zf,!0],TXT:[Bf,null],LUT:[Bf,null],PNG:[Af,"png"],JPG:[Af,"jpeg"],JPEG:[Af,"jpeg"],GIF:[Af,"gif"]};function Mf(){Ce.call(this);this.s="parserIMA"}w(Mf,Ce);
Mf.prototype.parse=function(a,b,c){b.Zg={};b.Zg.Xn=0;this.Ih(c,b);if(null==b.da.length||b.ya.length==b.da.length){b.Zg.Xn=b.da.length;var d={};c={};for(var e=0;e<b.ya.length;e++)d.hasOwnProperty(b.ya[e].series_instance_uid)||(d[b.ya[e].series_instance_uid]=[],c[b.ya[e].series_instance_uid]={}),c[b.ya[e].series_instance_uid].hasOwnProperty(b.ya[e].sop_instance_uid)||(c[b.ya[e].series_instance_uid][b.ya[e].sop_instance_uid]=!0,d[b.ya[e].series_instance_uid].push(b.ya[e]));var h=Object.keys(d)[0],e=
d[h],k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=qd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],m=d[1]-n[1],q=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+m*m+
q*q);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,p=e[k-1].image_position_patient,h=p[0]-n[0],m=p[1]-n[1],q=p[2]-n[2],h=Math.sqrt(h*h+m*m+q*q),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;p=null;switch(e[0].Kj){case 8:p=new Uint8Array(h);break;case 16:p=new Uint16Array(h);break;case 32:p=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.ih=e[0].pixel_spacing;for(var t=0;t<k;t++){var s=e[t].data,h=0;switch(l){case "image_position_patient":h=e[t].image_position_patient[0]-e[0].image_position_patient[0];m=e[t].image_position_patient[1]-
e[0].image_position_patient[1];q=e[t].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+m*m+q*q)/e[0].pixel_spacing[2];break;case "instance_number":h=e[t].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(s,h*n)}c.data=p;b._data=p;b.fb=[e[0].columns,e[0].rows,d];c.cz=b.fb;d=De(p);k=d[0];d=d[1];c.min=b.Pd=b.Fb=k;c.max=b.Mb=b.Eb=d;-Infinity==b.qb&&(b.qb=k);Infinity==b.sb&&(b.sb=d);m=e[0].image_position_patient;
k=zd();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=qd(d,h);L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-m[0]);L(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-m[1]);L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],m[2]);L(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=qd(d,h),L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[0]),L(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[1]),L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,m[2])):(L(k,0,1,0,0,-m[0]),L(k,1,0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]));L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.re=k;c.te=zd();Hd(c.re,c.te);l=yd(0,0,0,1);e=xd();Jd(k,l,e);l=yd(1,1,1,1);d=xd();Jd(k,l,d);c.rj=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Fe(k,[b.fb[0],b.fb[1],b.fb[2]]);c.pj=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.qj=[e[0],e[2],e[4]];b.Xe(c);b.yf=Ke(this,b)}c=new Ud;c.Ka=b;c.sa=a;this.dispatchEvent(c)};
Mf.prototype.ae=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Mf.prototype.Ih=function(a,b){this._data=a;if("undefined"==typeof b.ya||null==b.ya)b.ya=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,m=[[8,4368],[8,4384]],q=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],q=!1,p=0,t=m.length;p<t;p++)if(h===m[p][0]&&k===m[p][1]){q=!0;break}if(q)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Mf.prototype.ae(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Kj=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Mf.prototype.ae(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Mf.prototype.ae(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Mf.prototype.ae(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Mf.prototype.ae(d,e,l,n)}break;case 16:switch(k){case 8720:for(p=0;p<n/2;p++)e++;break;default:e=
Mf.prototype.ae(d,e,l,n)}break;default:e=Mf.prototype.ae(d,e,l,n)}}switch(c.Kj){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Ja=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Kj){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.ya.push(c);return b};v("X.parserIMA",Mf);
v("X.parserIMA.prototype.parse",Mf.prototype.parse);var Nf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Of(a){if(Pf){Pf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Of(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Pf=!0,Error();}}return a.match(Nf)}var Pf=gc;function Qf(a,b){Yc.call(this);this.lk=a||1;this.lm=b||ba;this.et=ta(this.jL,this);this.vu=ya()}w(Qf,Yc);f=Qf.prototype;f.enabled=!1;f.Bb=null;f.setInterval=function(a){this.lk=a;this.Bb&&this.enabled?(this.stop(),this.start()):this.Bb&&this.stop()};
f.jL=function(){if(this.enabled){var a=ya()-this.vu;0<a&&a<.8*this.lk?this.Bb=this.lm.setTimeout(this.et,this.lk-a):(this.Bb&&(this.lm.clearTimeout(this.Bb),this.Bb=null),this.dispatchEvent(Rf),this.enabled&&(this.Bb=this.lm.setTimeout(this.et,this.lk),this.vu=ya()))}};f.start=function(){this.enabled=!0;this.Bb||(this.Bb=this.lm.setTimeout(this.et,this.lk),this.vu=ya())};f.stop=function(){this.enabled=!1;this.Bb&&(this.lm.clearTimeout(this.Bb),this.Bb=null)};
f.f=function(){Qf.d.f.call(this);this.stop();delete this.lm};var Rf="tick";function Sf(a,b,c){if(ja(a))c&&(a=ta(a,c));else if(a&&"function"==typeof a.handleEvent)a=ta(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Tf(a){return"function"==typeof a.vh?a.vh():ha(a)||r(a)?a.length:mb(a)}function Uf(a){if("function"==typeof a.ck)return a.ck();if(r(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return nb(a)}function Vf(a){if("function"==typeof a.yn)return a.yn();if("function"!=typeof a.ck){if(ha(a)||r(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return ob(a)}}
function Wf(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ha(a)||r(a))D(a,b,void 0);else for(var c=Vf(a),d=Uf(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function Xf(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ha(a)||r(a))return Eb(a,b,void 0);for(var c=Vf(a),d=Uf(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function Yf(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function Zf(){}Zf.prototype.By=null;function $f(a){var b;(b=a.By)||(b={},ag(a)&&(b[0]=!0,b[1]=!0),b=a.By=b);return b};var bg;function cg(){}w(cg,Zf);function dg(a){return(a=ag(a))?new ActiveXObject(a):new XMLHttpRequest}function ag(a){if(!a.mA&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.mA=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.mA}bg=new cg;function eg(a){this.tb=new gd;a&&this.Us(a)}function fg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ma(a):b.substr(0,1)+a}f=eg.prototype;f.vh=function(){return this.tb.vh()};f.add=function(a){this.tb.set(fg(a),a)};f.Us=function(a){a=Uf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.Yf=function(a){a=Uf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.tb.remove(fg(a))};f.clear=function(){this.tb.clear()};f.On=function(){return this.tb.On()};
f.contains=function(a){a=fg(a);return id(this.tb.tb,a)};f.rA=function(a){var b=new eg;a=Uf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.ck=function(){return this.tb.ck()};f.clone=function(){return new eg(this)};f.zl=function(a){return this.vh()==Tf(a)&&gg(this,a)};
function gg(a,b){var c=Tf(b);if(a.vh()>c)return!1;!(b instanceof eg)&&5<c&&(b=new eg(b));return Xf(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.rt?c.rt(a):ha(c)||r(c)?Hb(c,a):pb(c,a)})};function hg(a){var b;b||(b=ig(a||arguments.callee.caller,[]));return b}
function ig(a,b){var c=[];if(Hb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(jg(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=jg(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(ig(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function jg(a){if(kg[a])return kg[a];a=String(a);if(!kg[a]){var b=/function ([^\(]+)/.exec(a);kg[a]=b?b[1]:"[Anonymous]"}return kg[a]}var kg={};function lg(a,b,c,d,e){this.reset(a,b,c,d,e)}lg.prototype.jz=null;lg.prototype.iz=null;var mg=0;lg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||mg++;d||ya();this.Vn=a;this.JI=b;delete this.jz;delete this.iz};lg.prototype.MB=function(a){this.Vn=a};function ng(a){this.rk=a;this.hA=this.zc=this.Vn=this.Na=null}function og(a,b){this.name=a;this.value=b}og.prototype.toString=function(){return this.name};var pg=new og("SEVERE",1E3),qg=new og("CONFIG",700),rg=new og("FINE",500);f=ng.prototype;f.getName=function(){return this.rk};f.getParent=function(){return this.Na};f.Qt=function(){this.zc||(this.zc={});return this.zc};f.MB=function(a){this.Vn=a};
function sg(a){if(a.Vn)return a.Vn;if(a.Na)return sg(a.Na);eb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=sg(this).value)for(ja(b)&&(b=b()),a=this.Iz(a,b,c,ng.prototype.log),b="log:"+a.JI,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.hA)for(var e=0,h=void 0;h=c.hA[e];e++)h(d);b=b.getParent()}};
f.Iz=function(a,b,c,d){a=new lg(a,String(b),this.rk);if(c){a.jz=c;var e;d=d||ng.prototype.Iz;try{var h;var k=da("window.location.href");if(r(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.BO||"Not available"}catch(m){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(q){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+La(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+La(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+La(hg(d)+"-> ")}catch(p){e="Exception trying to expose exception! You win, we lose. "+p}a.iz=e}return a};f.zo=function(a){this.Na=a};var tg={},ug=null;
function vg(a){ug||(ug=new ng(""),tg[""]=ug,ug.MB(qg));var b;if(!(b=tg[a])){b=new ng(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=vg(a.substr(0,c));c.Qt()[d]=b;b.zo(c);tg[a]=b}return b};function wg(a,b){a&&a.log(rg,b,void 0)};function xg(a){Yc.call(this);this.headers=new gd;this.es=a||null;this.li=!1;this.ds=this.za=null;this.Tn=this.xA=this.Vq="";this.jk=this.lu=this.Eq=this.Kt=!1;this.Uo=0;this.Vr=null;this.wB=yg;this.$r=this.xL=!1}w(xg,Yc);var yg="",zg=xg.prototype,Ag=vg("goog.net.XhrIo");zg.ef=Ag;var Bg=/^https?$/i,Cg=["POST","PUT"],Dg=[];function Eg(a,b){var c=new xg;Dg.push(c);b&&c.B("complete",b);c.Au("ready",c.eF);c.send(a,void 0,void 0,void 0)}f=xg.prototype;f.eF=function(){this.g();Kb(Dg,this)};
f.send=function(a,b,c,d){if(this.za)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Vq+"; newUri="+a);b=b?b.toUpperCase():"GET";this.Vq=a;this.Tn="";this.xA=b;this.Kt=!1;this.li=!0;this.za=this.es?dg(this.es):dg(bg);this.ds=this.es?$f(this.es):$f(bg);this.za.onreadystatechange=ta(this.$A,this);try{wg(this.ef,Fg(this,"Opening Xhr")),this.lu=!0,this.za.open(b,String(a),!0),this.lu=!1}catch(e){wg(this.ef,Fg(this,"Error opening Xhr: "+e.message));Gg(this,e);return}a=c||"";var h=
this.headers.clone();d&&Wf(d,function(a,b){h.set(b,a)});d=Fb(h.yn());c=ba.FormData&&a instanceof ba.FormData;!Hb(Cg,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.za.setRequestHeader(b,a)},this);this.wB&&(this.za.responseType=this.wB);"withCredentials"in this.za&&(this.za.withCredentials=this.xL);try{Hg(this),0<this.Uo&&(this.$r=Ig(this.za),wg(this.ef,Fg(this,"Will abort after "+this.Uo+"ms if incomplete, xhr2 "+this.$r)),this.$r?(this.za.timeout=
this.Uo,this.za.ontimeout=ta(this.vC,this)):this.Vr=Sf(this.vC,this.Uo,this)),wg(this.ef,Fg(this,"Sending request")),this.Eq=!0,this.za.send(a),this.Eq=!1}catch(k){wg(this.ef,Fg(this,"Send error: "+k.message)),Gg(this,k)}};function Ig(a){return E&&nc(9)&&u(a.timeout)&&ca(a.ontimeout)}function Gb(a){return"content-type"==a.toLowerCase()}f.vC=function(){"undefined"!=typeof aa&&this.za&&(this.Tn="Timed out after "+this.Uo+"ms, aborting",wg(this.ef,Fg(this,this.Tn)),this.dispatchEvent("timeout"),this.abort(8))};
function Gg(a,b){a.li=!1;a.za&&(a.jk=!0,a.za.abort(),a.jk=!1);a.Tn=b;Jg(a);Kg(a)}function Jg(a){a.Kt||(a.Kt=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.za&&this.li&&(wg(this.ef,Fg(this,"Aborting")),this.li=!1,this.jk=!0,this.za.abort(),this.jk=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Kg(this))};f.f=function(){this.za&&(this.li&&(this.li=!1,this.jk=!0,this.za.abort(),this.jk=!1),Kg(this,!0));xg.d.f.call(this)};
f.$A=function(){this.Tj||(this.lu||this.Eq||this.jk?Lg(this):this.vJ())};f.vJ=function(){Lg(this)};
function Lg(a){if(a.li&&"undefined"!=typeof aa)if(a.ds[1]&&4==Mg(a)&&2==Ng(a))wg(a.ef,Fg(a,"Local request error detected and ignored"));else if(a.Eq&&4==Mg(a))Sf(a.$A,0,a);else if(a.dispatchEvent("readystatechange"),4==Mg(a)){wg(a.ef,Fg(a,"Request complete"));a.li=!1;try{var b=Ng(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Of(String(a.Vq))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Bg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Mg(a)?a.za.statusText:""}catch(n){wg(a.ef,"Can not get status: "+n.message),l=""}a.Tn=l+" ["+Ng(a)+"]";Jg(a)}}finally{Kg(a)}}}
function Kg(a,b){if(a.za){Hg(a);var c=a.za,d=a.ds[0]?ea:null;a.za=null;a.ds=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.ef)&&c.log(pg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Hg(a){a.za&&a.$r&&(a.za.ontimeout=null);u(a.Vr)&&(ba.clearTimeout(a.Vr),a.Vr=null)}f.Gg=function(){return!!this.za};function Mg(a){return a.za?a.za.readyState:0}function Ng(a){try{return 2<Mg(a)?a.za.status:-1}catch(b){return-1}}
function Fg(a,b){return b+" ["+a.xA+" "+a.Vq+" "+Ng(a)+"]"};/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function M(){}v("gxnat",M);M.JPEG_CONVERT_SUFFIX="?format=image/jpeg";M.LF={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};M.mx="?format=zip";M.Ch=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);window.console.log("\n\nGetting XNAT json: '"+a+"'");M.get(a,b,"json")};
M.get=function(a,b,c){Eg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.za?Yf(a.za.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.za?a.za.responseText:""}catch(h){wg(a.ef,"Can not get responseText: "+h.message),e=""}b(e)}})};
M.fr=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(M.fr.$H&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(M.fr.$H&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
M.YK=function(a,b){var c=[],d={},e=[],h={};D(a,function(a){h=a;D(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(M.FO);D(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",M.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",M.LF);v("gxnat.ZIP_SUFFIX",M.mx);v("gxnat.jsonGet",M.Ch);v("gxnat.get",M.get);v("gxnat.naturalSort",M.fr);v("gxnat.sortXnatPropertiesArray",M.YK);function Og(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Pg(this)}w(Og,uc);v("gxnat.Path",Og);
function Qg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Rg(a){for(var b=0,c=Sg.length,b=0;b<c;b++)a(Sg[b],b)}function Tg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Sg=["projects","subjects","experiments",["scans","resources"],"files"];
function Pg(a){var b,c,d,e=!1;Rg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.Bt=Sg[k-1],e=!0);else null!=this[a]||e||(this.Bt=Sg[k-1],e=!0)}.bind(a))}Og.prototype.lq=function(){null!=this.Bt||Pg(this);return this.Bt};
Og.prototype.Jh=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=Sg.length,k=0,d=0;d<h;d++){c=Sg[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Og.prototype.g=function(){Og.d.g.call(this);sb(this)};v("gxnat.Path.getQueryPrefix",Qg);v("gxnat.Path.forEachXnatLevel",Rg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Og(a),d=new Og(b),e=void 0;Rg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",Tg);v("gxnat.Path.xnatLevelOrder",Sg);v("gxnat.Path.prototype.getDeepestLevel",Og.prototype.lq);v("gxnat.Path.prototype.pathByLevel",Og.prototype.Jh);v("gxnat.Path.prototype.dispose",Og.prototype.g);function Ug(a){this.Ad=new Og(a);this.projects=[];this[Vg]={};this[Wg]={};this[Xg]={}}w(Ug,uc);v("gxnat.ProjectTree",Ug);function Yg(a){this[Zg]=r(a)?new Og(a):a;this[$g]=this[Zg].lq();a=Sg.indexOf(this[Zg].lq())+1;-1!=a&&(this[ah]=Sg[a],r(this[ah])&&(this[bh]=this[Zg].originalUrl+"/"+this[ah],this[this[ah]]=[]))}w(Yg,uc);v("gxnat.ProjectTree.TreeNode",Yg);Yg.prototype.je=function(a){this.Cb=a};Yg.prototype.$d=function(){return this.Cb};
Yg.prototype.g=function(){Yg.d.g.call(this);null!=this[Zg]&&this[Zg].g();sb(this)};var $g=B(),bh=B(),ch=B(),Zg=B(),ah=B(),dh=B(),eh=B(),fh=B(),Vg=B(),Wg=B(),Xg=B(),gh=["ID","description","name","URI"],hh=["gender","handedness","label","URI"],ih=["label","URI"];function jh(a,b){return Ka(a.$d(),b.$d())}function kh(a){var b="&columns=";D(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=Ug.prototype;
f.rz=function(a){var b=[];C(this.un(a),function(a,d){"projects"==d?b.push(a[fh].ID):b.push(a[fh].label)});return b};f.sz=function(a){var b=[];C(this.un(a),function(a){b.push(a[Zg].originalUrl)});return b};f.un=function(a){branch={projects:this.Id};"experiments"==a[ah]?branch.subjects=a:g(a[ah])&&(branch.subjects=this[Wg][a[Zg].Jh("subjects")],branch.experiments=a);return branch};f.CA=function(a,b){this.Wn(this.Ad,a,b)};
f.Wn=function(a,b,c){var d=r(a)?new Og(a):a,e;if(null!=this.Id){a={projects:this.Id};if(null!=d.subjects){e=d.Jh("subjects");if(null==this[Wg][e]){this.Du(e,function(a){this.EA(a,function(){null!=b&&b(a);this.Wn(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[Wg][e]}if(null!=d.experiments){e=d.Jh("experiments");if(null==this[Xg][e]){this.Cu(e,function(a){null!=b&&b(a);this.Wn(d,b,c)}.bind(this));return}a.experiments=this[Xg][e]}null!=c&&c(a)}else this.DA(function(a){null!=b&&b(a);this.Wn(d,
b,c)}.bind(this))};f.DA=function(a){if(null==this.Id){var b=kh(gh),c=this.Ad.prefix+"/projects/"+this.Ad.projects,d;M.Ch(this.Ad.prefix+"/projects",function(b){d=new Yg(c);this.projects.push(d);this.Id=d;this[Vg][d[Zg].originalUrl]=d;d[fh]=b[0];d.je(d[fh].name);a(d)}.bind(this),"&ID="+this.Ad.projects+b)}};f.An=function(a){return this[Wg][a]};f.Gl=function(a){return this[Xg][a]};
f.EA=function(a,b){var c=a;r(a)?c=this.An(a):a instanceof Og&&(c=this.An(a.originalUrl));if(null!=c[fh])b(c);else{var d=this.Ad.prefix+"/subjects",e=kh(hh),e="&ID="+c[Zg].subjects+e;M.Ch(d,function(a){c[fh]=a[0];c.je(c[fh].label);b(c)}.bind(this),e)}};
f.FA=function(a,b){if(null==this.Id[dh]||!0!=this.Id[dh]){var c=this.Id[Zg].originalUrl+"/subjects",d=kh(hh);window.console.log("load subjects",c,d);var e,h;M.Ch(c,function(c){D(c,function(d){window.console.log(d);h=this.Id[Zg].prefix+"/projects/"+this.Id[Zg].projects+"/subjects/"+d.ID;e=this.Du(h);null==e[fh]&&(e[fh]=d,e.je(e[fh].label));null!=a&&a(e);this.Id.subjects.length==c.length&&(this.Id[dh]=!0,null!=b&&(d=this.Id.subjects,d.sort(jh),b(d)))}.bind(this))}.bind(this),d)}};
f.Du=function(a,b){if(null!=this[Wg][a])return this[Wg][a];subjNode=new Yg(a);this.Id.subjects.push(subjNode);this[Wg][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.AA=function(a,b){var c=a;r(a)?c=this.Gl(a):a instanceof Og&&(c=this.Gl(a.originalUrl));var d=this.Ad.prefix+"/experiments",e=kh(ih),e="&ID="+c[Zg].experiments+e;M.Ch(d,function(a){c[fh]=a[0];c.je(c[fh].label);b(c)}.bind(this),e)};
f.BA=function(a,b,c){var d=a;r(a)?d=this.An(a):a instanceof Og&&(d=this.An(a.originalUrl));if(null!=d[dh]&&!0==d[dh])window.console.log("Don't need to reload the experiments of "+d[Zg].originalUrl);else{var e=d[Zg].originalUrl+"/experiments";M.Ch(e+"?xsiType=xnat:imageSessionData",function(a){D(a,function(k){this.Cu(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[dh]=!0,null!=c&&(e=d.experiments,e.sort(jh),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Cu=function(a,b){null==this[Xg][a]&&(exptNode=new Yg(a),this.AA(exptNode,function(c){this[Wg][c[Zg].Jh("subjects")].experiments.push(c);this[Xg][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){Ug.d.g.call(this);delete this.Id;this.Ad.g();delete this.Ad;D(this.projects,function(a){null!=a.subjects&&D(a.subjects,function(a){null!=a.experiments&&D(a.experiments,function(a){a.g()});a.g()});a.g()});sb(this)};v("gxnat.ProjectTree.TreeNode",Yg);v("gxnat.ProjectTree.LEVEL_KEY",$g);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",bh);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",ch);v("gxnat.ProjectTree.PATH_KEY",Zg);v("gxnat.ProjectTree.NEXTLEVEL_KEY",ah);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",dh);v("gxnat.ProjectTree.ISLOADING_KEY",eh);v("gxnat.ProjectTree.METADATA_KEY",fh);v("gxnat.ProjectTree.PROJ_DIRECT",Vg);v("gxnat.ProjectTree.SUBJ_DIRECT",Wg);v("gxnat.ProjectTree.EXPT_DIRECT",Xg);v("gxnat.ProjectTree.PROJECT_METADATA",gh);v("gxnat.ProjectTree.SUBJECT_METADATA",hh);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",ih);v("gxnat.ProjectTree.compareNodeTitles",jh);v("gxnat.ProjectTree.getColumnQuery",kh);v("gxnat.ProjectTree.prototype.getBranchTitles",Ug.prototype.rz);v("gxnat.ProjectTree.prototype.getBranchUris",Ug.prototype.sz);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",Ug.prototype.un);v("gxnat.ProjectTree.prototype.loadInitBranch",Ug.prototype.CA);v("gxnat.ProjectTree.prototype.loadBranch",Ug.prototype.Wn);v("gxnat.ProjectTree.prototype.loadProject",Ug.prototype.DA);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",Ug.prototype.An);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",Ug.prototype.Gl);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",Ug.prototype.EA);v("gxnat.ProjectTree.prototype.loadSubjects",Ug.prototype.FA);v("gxnat.ProjectTree.prototype.loadSubject",Ug.prototype.Du);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",Ug.prototype.AA);v("gxnat.ProjectTree.prototype.loadExperiments",Ug.prototype.BA);
v("gxnat.ProjectTree.prototype.loadExperiment",Ug.prototype.Cu);v("gxnat.ProjectTree.prototype.dispose",Ug.prototype.g);function N(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=N.prototype;f.clone=function(){return new N(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function lh(a,b){return new N(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof N?(this.x+=a.x,this.y+=a.y):(this.x+=a,u(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.x*=a;this.y*=c;return this};function mh(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=mh.prototype;f.clone=function(){return new mh(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof mh?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof N?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,u(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function nh(a,b){this.width=a;this.height=b}function oh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=nh.prototype;f.clone=function(){return new nh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.On=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=u(b)?b:a;this.width*=a;this.height*=c;return this};function ph(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=ph.prototype;f.clone=function(){return new ph(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.rA=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof ph?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function qh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.Ht=function(a){return Math.sqrt(qh(this,a))};f.Ki=function(){return new nh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof N?(this.left+=a.x,this.top+=a.y):(this.left+=a,u(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function rh(){return gc?"Webkit":fc?"Moz":E?"ms":ec?"O":null};function sh(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function Q(a,b){var c=sh(a),d=Ob(arguments,1),e=c.length+d.length;th(c,d);a.className=c.join(" ");return c.length==e}function uh(a,b){var c=sh(a),d=Ob(arguments,1),e=vh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function th(a,b){for(var c=0;c<b.length;c++)Hb(a,b[c])||a.push(b[c])}function vh(a,b){return Bb(a,function(a){return!Hb(b,a)})}
function wh(a,b,c){var d=sh(a);r(b)?Kb(d,b):g(b)&&(d=vh(d,b));r(c)&&!Hb(d,c)?d.push(c):g(c)&&th(d,c);a.className=d.join(" ")};var xh=!E||oc(9),yh=!fc&&!E||E&&oc(9)||fc&&nc("1.9.1"),zh=E&&!nc("9");function Ah(a){return a?new Bh(Ch(a)):Ba||(Ba=new Bh)}function Dh(a){return r(a)?document.getElementById(a):a}function Eh(a,b,c){return Fh(document,a,b,c)}function Gh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Fh(document,"*",a,b)}function Hh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Fh(document,"*",a,b)[0])||null}
function Fh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Hb(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Ih(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Jh?a.setAttribute(Jh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Jh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Kh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new nh(a.clientWidth,a.clientHeight)}function Lh(a){return gc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Mh(a){return a?a.parentWindow||a.defaultView:window}function S(a,b,c){return Oh(document,arguments)}
function Oh(a,b){var c=b[0],d=b[1];if(!xh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',La(d.name),'"');if(d.type){c.push(' type="',La(d.type),'"');var e={};xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(r(d)?c.className=d:g(d)?c.className=d.join(" "):Ih(c,d));2<b.length&&Ph(a,c,b,2);return c}function Ph(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ha(h)||la(h)&&0<h.nodeType?e(h):D(Qh(h)?Mb(h):h,e)}}
function Rh(a,b){Ph(Ch(a),a,arguments,1)}function Sh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Th(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function T(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function Uh(a){return yh&&void 0!=a.children?a.children:Bb(a.childNodes,function(a){return 1==a.nodeType})}function Vh(a){return void 0!=a.firstElementChild?a.firstElementChild:Wh(a.firstChild)}
function Xh(a){return void 0!=a.nextElementSibling?a.nextElementSibling:Wh(a.nextSibling)}function Wh(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Yh(a){return la(a)&&1==a.nodeType}function Zh(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function $h(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var h=[],k=arguments[b];k;)h.unshift(k),k=k.parentNode;d.push(h);e=Math.min(e,h.length)}h=null;for(b=0;b<e;b++){for(var k=d[0][b],l=1;l<c;l++)if(k!=d[l][b])return h;h=k}return h}function Ch(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ai(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Sh(a),a.appendChild(Ch(a).createTextNode(String(b)))}var bi={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ci={IMG:" ",BR:"\n"};function di(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function ei(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function fi(a){a=a.tabIndex;return u(a)&&0<=a&&32768>a}function gi(a){if(zh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];hi(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");zh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function ii(a){var b=[];hi(a,b,!1);return b.join("")}
function hi(a,b,c){if(!(a.nodeName in bi))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ci)b.push(ci[a.nodeName]);else for(a=a.firstChild;a;)hi(a,b,c),a=a.nextSibling}function Qh(a){if(a&&"number"==typeof a.length){if(la(a))return"function"==typeof a.item||"string"==typeof a.item;if(ja(a))return"function"==typeof a.item}return!1}
function ji(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return ki(a,function(a){return(!d||a.nodeName==d)&&(!c||r(a.className)&&Hb(a.className.split(/\s+/),c))})}function ki(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Bh(a){this.na=a||ba.document||document}f=Bh.prototype;f.M=Ah;function li(a){return a.na}f.a=function(a){return r(a)?this.na.getElementById(a):a};f.PC=Bh.prototype.a;f.v=function(a,b,c){return Oh(this.na,arguments)};f.createElement=function(a){return this.na.createElement(a)};
f.createTextNode=function(a){return this.na.createTextNode(String(a))};function mi(a){return"CSS1Compat"==a.na.compatMode}function ni(a){a=a.na;return a.parentWindow||a.defaultView}function oi(a){var b=a.na;a=Lh(b);b=b.parentWindow||b.defaultView;return E&&nc("10")&&b.pageYOffset!=a.scrollTop?new N(a.scrollLeft,a.scrollTop):new N(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.pu=Th;f.removeNode=T;f.Qt=Uh;f.zz=Vh;f.contains=Zh;
f.Ah=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!ei(a)||fi(a)):ei(a)&&fi(a))&&E?(a=ja(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function pi(a,b,c){r(b)?qi(a,c,b):C(b,va(qi,a))}function qi(a,b,c){a:if(c=ab(c),void 0===a.style[c]){var d=rh()+cb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function ri(a,b){var c=Ch(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function si(a,b){return ri(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function ti(a){return si(a,"position")}
function ui(a,b,c){var d,e=fc&&(ac||jc)&&nc("1.9");b instanceof N?(d=b.x,b=b.y):(d=b,b=c);a.style.left=vi(d,e);a.style.top=vi(b,e)}function wi(a){return new N(a.offsetLeft,a.offsetTop)}function xi(a){a=a?Ch(a):document;return!E||oc(9)||mi(Ah(a))?a.documentElement:a.body}
function yi(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function zi(a){if(E&&!oc(8))return a.offsetParent;var b=Ch(a),c=si(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=si(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ai(a){for(var b=new mh(0,Infinity,Infinity,0),c=Ah(a),d=c.na.body,e=c.na.documentElement,h=Lh(c.na);a=zi(a);)if(!(E&&0==a.clientWidth||gc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=si(a,"overflow")){var k=Bi(a),l;l=a;if(fc&&!nc("1.9")){var n=parseFloat(ri(l,"borderLeftWidth"));if(Ci(l))var m=l.offsetWidth-l.clientWidth-n-parseFloat(ri(l,"borderRightWidth")),n=n+m;l=new N(n,parseFloat(ri(l,"borderTopWidth")))}else l=new N(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=Kh(ni(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Bi(a){var b,c=Ch(a),d=si(a,"position"),e=fc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new N(0,0),k=xi(c);if(a==k)return h;if(a.getBoundingClientRect)b=yi(a),a=oi(Ah(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(gc&&"fixed"==ti(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(ec||gc&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=zi(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,ec&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}function Di(a,b){var c=Ei(a),d=Ei(b);return new N(c.x-d.x,c.y-d.y)}
function Fi(a){var b;if(a.getBoundingClientRect)b=yi(a),b=new N(b.left,b.top);else{b=oi(Ah(a));var c=Bi(a);b=new N(c.x-b.x,c.y-b.y)}if(fc&&!nc(12)){b:{c=ab("transform");if(void 0===a.style[c]&&(c=rh()+cb(c),void 0!==a.style[c])){c=(gc?"-webkit":fc?"-moz":E?"-ms":ec?"-o":null)+"-transform";break b}c="transform"}a=(a=si(a,c)||si(a,"transform"))?(a=a.match(Gi))?new N(parseFloat(a[1]),parseFloat(a[2])):new N(0,0):new N(0,0);a=new N(b.x+a.x,b.y+a.y)}else a=b;return a}
function Ei(a){if(1==a.nodeType)return Fi(a);var b=ja(a.PF),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Cc.targetTouches&&(c=a.Cc.targetTouches[0]);return new N(c.clientX,c.clientY)}function Hi(a,b,c){if(b instanceof nh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Ii(a,b);Ji(a,c)}function vi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ji(a,b){a.style.height=vi(b,!0)}function Ii(a,b){a.style.width=vi(b,!0)}
function Ki(a){var b=Li;if("none"!=si(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Li(a){var b=a.offsetWidth,c=a.offsetHeight,d=gc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new nh(b,c):(a=yi(a),new nh(a.right-a.left,a.bottom-a.top))}function Mi(a){var b=Bi(a);a=Ki(a);return new ph(b.x,b.y,a.width,a.height)}
function Ni(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Oi(a,b){a.style.display=b?"":"none"}function Pi(a){E&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Ci(a){return"rtl"==si(a,"direction")}var Qi=fc?"MozUserSelect":gc?"WebkitUserSelect":null;
function Ri(a,b,c){c=c?null:a.getElementsByTagName("*");if(Qi){if(b=b?"none":"",a.style[Qi]=b,c){a=0;for(var d;d=c[a];a++)d.style[Qi]=b}}else if(E||ec)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Si(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Ti(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Si(a,c):0}function Ui(a,b){if(E){var c=Ti(a,b+"Left"),d=Ti(a,b+"Right"),e=Ti(a,b+"Top"),h=Ti(a,b+"Bottom");return new mh(e,d,h,c)}c=ri(a,b+"Left");d=ri(a,b+"Right");e=ri(a,b+"Top");h=ri(a,b+"Bottom");return new mh(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var Vi={thin:2,medium:4,thick:6};
function Wi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Vi?Vi[c]:Si(a,c)}function Xi(a){if(E&&!oc(9)){var b=Wi(a,"borderLeft"),c=Wi(a,"borderRight"),d=Wi(a,"borderTop");a=Wi(a,"borderBottom");return new mh(d,c,a,b)}b=ri(a,"borderLeftWidth");c=ri(a,"borderRightWidth");d=ri(a,"borderTopWidth");a=ri(a,"borderBottomWidth");return new mh(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Gi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Yi(a){uc.call(this);this.Rc=a;this.bb={}}w(Yi,uc);var Zi=[];f=Yi.prototype;f.B=function(a,b,c,d){g(b)||(b&&(Zi[0]=b.toString()),b=Zi);for(var e=0;e<b.length;e++){var h=G(a,b[e],c||this.handleEvent,d||!1,this.Rc||this);if(!h)break;this.bb[h.key]=h}return this};f.Au=function(a,b,c,d){return $i(this,a,b,c,d)};function $i(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)$i(a,b,c[k],d,e,h);else{b=Rc(b,c,d||a.handleEvent,e,h||a.Rc||a);if(!b)return a;a.bb[b.key]=b}return a}
f.kb=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.kb(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.Rc||this,c=Lc(c),d=!!d,b=gb(a)?a.zn(b,c,d,e):a?(a=Nc(a))?a.zn(b,c,d,e):null:null,b&&(Tc(b),delete this.bb[b.key]);return this};f.Yf=function(){C(this.bb,Tc);this.bb={}};f.f=function(){Yi.d.f.call(this);this.Yf()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function aj(){}fa(aj);aj.prototype.TA=0;function bj(a){Yc.call(this);this.hb=a||Ah();this.Ng=cj;this.cf=null;this.ea=!1;this.o=null;this.Li=void 0;this.Hf=this.zc=this.Na=this.Mu=null;this.IC=!1}w(bj,Yc);bj.prototype.SH=aj.Zd();var cj=null;
function dj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function ej(a){return a.cf||(a.cf=":"+(a.SH.TA++).toString(36))}function fj(a,b){a.Na&&a.Na.Hf&&(tb(a.Na.Hf,a.cf),ub(a.Na.Hf,b,a));a.cf=b}f=bj.prototype;f.a=function(){return this.o};
f.Za=function(){this.Li||(this.Li=new Yi(this));return this.Li};f.yo=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Na&&this.cf&&gj(this.Na,this.cf)&&this.Na!=a)throw Error("Unable to set parent component");this.Na=a;bj.d.Rv.call(this,a)};f.getParent=function(){return this.Na};f.Rv=function(a){if(this.Na&&this.Na!=a)throw Error("Method not supported");bj.d.Rv.call(this,a)};f.M=function(){return this.hb};f.v=function(){this.o=this.hb.createElement("div")};f.n=function(a){this.Mg(a)};
f.Mg=function(a,b){if(this.ea)throw Error("Component already rendered");this.o||this.v();a?a.insertBefore(this.o,b||null):this.hb.na.body.appendChild(this.o);this.Na&&!this.Na.ea||this.Ya()};f.ub=function(a){if(this.ea)throw Error("Component already rendered");if(a&&this.ze(a)){this.IC=!0;var b=Ch(a);this.hb&&this.hb.na==b||(this.hb=Ah(a));this.Ud(a);this.Ya()}else throw Error("Invalid element to decorate");};f.ze=function(){return!0};f.Ud=function(a){this.o=a};
f.Ya=function(){this.ea=!0;hj(this,function(a){!a.ea&&a.a()&&a.Ya()})};f.pc=function(){hj(this,function(a){a.ea&&a.pc()});this.Li&&this.Li.Yf();this.ea=!1};f.f=function(){this.ea&&this.pc();this.Li&&(this.Li.g(),delete this.Li);hj(this,function(a){a.g()});!this.IC&&this.o&&T(this.o);this.Na=this.Mu=this.o=this.Hf=this.zc=null;bj.d.f.call(this)};f.Wm=function(a,b){this.Vs(a,ij(this),b)};
f.Vs=function(a,b,c){if(a.ea&&(c||!this.ea))throw Error("Component already rendered");if(0>b||b>ij(this))throw Error("Child component index out of bounds");this.Hf&&this.zc||(this.Hf={},this.zc=[]);if(a.getParent()==this){var d=ej(a);this.Hf[d]=a;Kb(this.zc,a)}else ub(this.Hf,ej(a),a);a.yo(this);Nb(this.zc,b,0,a);a.ea&&this.ea&&a.getParent()==this?(c=this.Ga(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.o||this.v(),b=jj(this,b+1),a.Mg(this.Ga(),b?b.o:null)):this.ea&&!a.ea&&a.o&&a.o.parentNode&&
1==a.o.parentNode.nodeType&&a.Ya()};f.Ga=function(){return this.o};f.Fe=function(){null==this.Ng&&(this.Ng=Ci(this.ea?this.o:this.hb.na.body));return this.Ng};f.em=function(a){if(this.ea)throw Error("Component already rendered");this.Ng=a};function ij(a){return a.zc?a.zc.length:0}function gj(a,b){var c;a.Hf&&b?(c=a.Hf,c=(b in c?c[b]:void 0)||null):c=null;return c}function jj(a,b){return a.zc?a.zc[b]||null:null}function hj(a,b,c){a.zc&&D(a.zc,b,c)}function kj(a,b){return a.zc&&b?Ab(a.zc,b):-1}
f.removeChild=function(a,b){if(a){var c=r(a)?a:ej(a);a=gj(this,c);c&&a&&(tb(this.Hf,c),Kb(this.zc,a),b&&(a.pc(),a.o&&T(a.o)),a.yo(null))}if(!a)throw Error("Child is not in parent component");return a};v("nrg.string",function(){});function lj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function mj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function nj(a){if(null!=a)return a="array"==ga(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function oj(a){return a.replace(/\W/g,"")}function pj(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function qj(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",lj);v("nrg.string.dirname",mj);v("nrg.string.getFileExtension",nj);v("nrg.string.fileNameMatch",function(a,b){return lj(a)===lj(b)});v("nrg.string.stripNonAlphanumeric",oj);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return oj(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",pj);v("nrg.string.mrmlColorToRgb",qj);function rj(a,b,c){uc.call(this);this.Bu=a;this.lk=b||0;this.Rc=c;this.dF=ta(this.uF,this)}w(rj,uc);f=rj.prototype;f.cf=0;f.f=function(){rj.d.f.call(this);this.stop();delete this.Bu;delete this.Rc};f.start=function(a){this.stop();this.cf=Sf(this.dF,ca(a)?a:this.lk)};f.stop=function(){this.Gg()&&ba.clearTimeout(this.cf);this.cf=0};f.Gg=function(){return 0!=this.cf};f.uF=function(){this.cf=0;this.Bu&&this.Bu.call(this.Rc)};var rb={},sj=null;function tj(a){a=ma(a);delete rb[a];qb()&&sj&&sj.stop()}function uj(){sj||(sj=new rj(function(){vj()},20));var a=sj;a.Gg()||a.start()}function vj(){var a=ya();C(rb,function(b){wj(b,a)});qb()||uj()};function xj(){Yc.call(this);this.N=yj;this.endTime=this.startTime=null}w(xj,Yc);var yj=0;xj.prototype.Gh=function(){this.Qc("begin")};xj.prototype.onEnd=function(){this.Qc("end")};xj.prototype.Qc=function(a){this.dispatchEvent(a)};function zj(a,b,c,d){xj.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.Lo=a;this.BF=b;this.duration=c;this.Kx=d;this.coords=[];this.Kk=!1}w(zj,xj);f=zj.prototype;f.Bi=function(a){this.Kk=a};f.kf=0;
f.play=function(a){if(a||this.N==yj)this.kf=0,this.coords=this.Lo;else if(1==this.N)return!1;tj(this);this.startTime=a=ya();-1==this.N&&(this.startTime-=this.duration*this.kf);this.endTime=this.startTime+this.duration;this.kf||this.Gh();this.Qc("play");-1==this.N&&this.Qc("resume");this.N=1;var b=ma(this);b in rb||(rb[b]=this);uj();wj(this,a);return!0};f.stop=function(a){tj(this);this.N=yj;a&&(this.kf=1);Aj(this,this.kf);this.Qc("stop");this.onEnd()};
f.f=function(){this.N==yj||this.stop(!1);this.Qc("destroy");zj.d.f.call(this)};f.Vd=function(){this.g()};function wj(a,b){a.kf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.kf&&(a.kf=1);Aj(a,a.kf);1==a.kf?(a.N=yj,tj(a),a.Qc("finish"),a.onEnd()):1==a.N&&a.Wu()}function Aj(a,b){ja(a.Kx)&&(b=a.Kx(b));a.coords=Array(a.Lo.length);for(var c=0;c<a.Lo.length;c++)a.coords[c]=(a.BF[c]-a.Lo[c])*b+a.Lo[c]}f.Wu=function(){this.Qc("animate")};f.Qc=function(a){this.dispatchEvent(new Bj(a,this))};
function Bj(a,b){Cc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.kf=b.kf;this.state=b.N}w(Bj,Cc);var Cj={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Dj(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Ej.test(c))return b.Ll=Fj(c),b.type="hex",b;a:{var d=a.match(Gj);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.Ll=Hj(c),b.type="rgb",b;if(Cj&&(c=Cj[a.toLowerCase()]))return b.Ll=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Ij=/#(.)(.)(.)/;
function Fj(a){if(!Ej.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Ij,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Jj(a){a=Fj(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Hj(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Kj(b.toString(16));c=Kj(c.toString(16));a=Kj(a.toString(16));return"#"+b+c+a}var Ej=/^#(?:[0-9a-f]{3}){1,2}$/i,Gj=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Kj(a){return 1==a.length?"0"+a:a}
function Lj(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Hj([Math.floor(d),Math.floor(e),Math.floor(h)])};function Mj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=ti(a)||(c=Ch(a).documentElement);if(!c)return b;if(fc)var d=Xi(c),b=b+d.left;else oc(8)&&(d=Xi(c),b-=d.left);return Ci(c)?c.clientWidth-(b+a.offsetWidth):b};function Nj(a,b,c,d,e){zj.call(this,b,c,d,e);this.element=a}w(Nj,zj);f=Nj.prototype;f.k=ea;f.Fe=function(){ca(this.Ng)||(this.Ng=Ci(this.element));return this.Ng};f.Wu=function(){this.k();Nj.d.Wu.call(this)};f.onEnd=function(){this.k();Nj.d.onEnd.call(this)};f.Gh=function(){this.k();Nj.d.Gh.call(this)};function Oj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Nj.apply(this,arguments)}w(Oj,Nj);
Oj.prototype.k=function(){var a=this.Kk&&this.Fe()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Pj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Nj.apply(this,arguments)}w(Pj,Nj);Pj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Qj(a,b,c,d,e){Nj.call(this,a,[b],[c],d,e)}w(Qj,Nj);Qj.prototype.k=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Rj(a,b,c,d,e){Nj.call(this,a,[b],[c],d,e)}w(Rj,Nj);Rj.prototype.k=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Sj(a,b,c,d,e){u(b)&&(b=[b]);u(c)&&(c=[c]);Nj.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(Sj,Nj);Sj.prototype.k=function(){Ni(this.element,this.coords[0])};
Sj.prototype.show=function(){this.element.style.display=""};Sj.prototype.Nl=function(){this.element.style.display="none"};function Tj(a,b,c){Sj.call(this,a,1,0,b,c)}w(Tj,Sj);function Uj(a,b,c){Sj.call(this,a,0,1,b,c)}w(Uj,Sj);function Vj(a,b,c){Sj.call(this,a,1,0,b,c)}w(Vj,Sj);Vj.prototype.Gh=function(){this.show();Vj.d.Gh.call(this)};Vj.prototype.onEnd=function(){this.Nl();Vj.d.onEnd.call(this)};function Wj(a,b,c){Sj.call(this,a,0,1,b,c)}w(Wj,Sj);Wj.prototype.Gh=function(){this.show();Wj.d.Gh.call(this)};
function Xj(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Nj.apply(this,arguments)}w(Xj,Nj);Xj.prototype.Lr=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};Xj.prototype.k=function(){this.Lr()};function Yj(){xj.call(this);this.hc=[]}w(Yj,xj);Yj.prototype.add=function(a){Hb(this.hc,a)||(this.hc.push(a),G(a,"finish",this.Xu,!1,this))};Yj.prototype.remove=function(a){Kb(this.hc,a)&&Sc(a,"finish",this.Xu,!1,this)};Yj.prototype.f=function(){D(this.hc,function(a){a.g()});this.hc.length=0;Yj.d.f.call(this)};function Zj(){Yj.call(this);this.Mt=0}w(Zj,Yj);
Zj.prototype.play=function(a){if(0==this.hc.length)return!1;if(a||this.N==yj)this.Mt=0,this.Gh();else if(1==this.N)return!1;this.Qc("play");-1==this.N&&this.Qc("resume");var b=-1==this.N&&!a;this.startTime=ya();this.endTime=null;this.N=1;D(this.hc,function(c){b&&-1!=c.N||c.play(a)});return!0};Zj.prototype.stop=function(a){D(this.hc,function(b){b.N==yj||b.stop(a)});this.N=yj;this.endTime=ya();this.Qc("stop");this.onEnd()};
Zj.prototype.Xu=function(){this.Mt++;this.Mt==this.hc.length&&(this.endTime=ya(),this.N=yj,this.Qc("finish"),this.onEnd())};function ak(){Yj.call(this);this.Jf=0}w(ak,Yj);ak.prototype.play=function(a){if(0==this.hc.length)return!1;if(a||this.N==yj)this.Jf<this.hc.length&&this.hc[this.Jf].N!=yj&&this.hc[this.Jf].stop(!1),this.Jf=0,this.Gh();else if(1==this.N)return!1;this.Qc("play");-1==this.N&&this.Qc("resume");this.startTime=ya();this.endTime=null;this.N=1;this.hc[this.Jf].play(a);return!0};
ak.prototype.stop=function(a){this.N=yj;this.endTime=ya();if(a)for(a=this.Jf;a<this.hc.length;++a){var b=this.hc[a];b.N==yj&&b.play();b.N==yj||b.stop(!0)}else this.Jf<this.hc.length&&this.hc[this.Jf].stop(!1);this.Qc("stop");this.onEnd()};ak.prototype.Xu=function(){1==this.N&&(this.Jf++,this.Jf<this.hc.length?this.hc[this.Jf].play():(this.endTime=ya(),this.N=yj,this.Qc("finish"),this.onEnd()))};v("nrg.convert",function(){});function bk(a){if(!g(a)&&!u(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function ck(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function dk(a){if(!r(a)&&!u(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)}
function ek(a){var b={};C(a,function(a,d){isNaN(a)?r(a)&&(b[d]=a):b[d]=a});return b}function fk(a){var b={};C(a,function(a,d){r(a)?0<a.length&&(b[d]=a):b[d]=a});return b}v("nrg.convert.pct",function(a){if(!u(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",bk);v("nrg.convert.remap1D",ck);v("nrg.convert.toInt",dk);
v("nrg.convert.toFloatArray",function(a){if(!r(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");D(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!la(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!r(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;D(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",ek);v("nrg.convert.filterZeroLengthStrings",fk);v("nrg.style",function(){});var gk="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function hk(a){return a.getBoundingClientRect()}
function ik(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return dk(a.style[b]);var d=Di(a,a.parentNode),d={left:dk(a.style.left)||d.x,top:dk(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?Di(a,a.parentNode):Di(a,document.body),
d={left:dk(a.style.left)||d.x,top:dk(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c}
function jk(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function kk(a,b){a&&b&&(a.style||(a.style={}),pi(a,b),D("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Da(b[c],"%")&&(a.style[c]=bk(b[c]))}))}var lk="is_hovered_"+B();
function mk(a,b,c,d,e,h){function k(){a[lk]=!1;uh(a,b);null!=h&&h()}function l(){a[lk]=!0;Q(a,b);null!=e&&e()}G(a,"mouseenter",l);G(a,"mouseleave",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}v("nrg.style.cssProperties",gk);v("nrg.style.removeClassesThatContain",function(a,b){var c=sh(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)uh(a,d[e])});v("nrg.style.absolutePosition",hk);v("nrg.style.dims",ik);
v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});v("nrg.style.getComputedStyle",function(a,b){if(b&&r(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=gk);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return jk(c)});v("nrg.style.parseIntNumericalProperties",jk);v("nrg.style.setStyle",kk);v("nrg.style.IS_HOVERED",lk);
v("nrg.style.setHoverClass",mk);v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function nk(a){return 1-Math.pow(1-a,3)};function ok(){}v("nrg.fx",ok);function pk(a,b,c){void 0===b&&(b=500);qk(a,b,1,c)}function rk(a,b,c){void 0===b&&(b=500);qk(a,0,0,function(){qk(a,b,1,c)})}function sk(a,b,c){void 0===b&&(b=500);qk(a,b,0,c)}function qk(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var h=new Sj(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);H(h);delete h});h.play()}
function tk(a,b,c){D(a,function(a){a.style.opacity=0});b=u(b)?b:500;c=u(c)?c:250;var d=new Qf(0);d.addEventListener(Rf,function(){elt=a[0];pk(elt,b);1==a.length?(d.stop(),d.g()):(a=Ob(a,1),d.setInterval(c))});d.start()}ok.animGenStyles="left top width height opacity background-color color z-index".split(" ");function uk(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Oj(a,[b.left,b.top],[c.left,c.top],d,nk)}
function vk(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Pj(a,[b.width,b.height],[c.width,c.height],d,nk)}function wk(a,b,c,d){if("opacity"in b||"opacity"in c)if(D([b,c],function(a){"opacity"in a||(a.opacity=1);u(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Sj(a,b.opacity,c.opacity,d)}
function xk(a,b,c,d){if("visibility"in b||"visibility"in c)if(D([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new Wj(a,d):new Vj(a,d)}
function yk(a,b,c,d){if("background-color"in b||"background-color"in c){D([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Dj(b["background-color"]),h=Dj(c["background-color"]);if(e.Ll!==h.Ll)return new Xj(a,Jj(e),Jj(h),d,nk)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function zk(a,b){this.VE=a;this.lL=b}function Ak(a){return fk(ek(a))}
function Bk(a){var b=Ki(a),c=wi(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Ck(a,b){var c=Bk(a),c=Ak(c),d=Bk(b),e=Ak(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new zk(c,e)}
function Dk(a,b,c,d){var e=[];D(ok.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(uk(a,b,c,d));break;case "height":e.push(vk(a,b,c,d));break;case "opacity":e.push(wk(a,b,c,d));break;case "visibility":e.push(xk(a,b,c,d));break;case "background-color":e.push(yk(a,b,c,d))}});var h=[];D(e,function(a){null!=a&&h.push(a)});delete e;return h}
function Ek(a,b,c,d){var e=new Zj;D(a,function(a){c&&G(a,"animate",c);e.add(a)});b&&G(e,"begin",b);G(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Fk(a,b,c){function d(){kk(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;G(a,"mouseover",function(){kk(a,{opacity:b})});G(a,"mouseout",d);d()}v("nrg.fx.fadeIn",pk);v("nrg.fx.fadeInFromZero",rk);v("nrg.fx.fadeOut",sk);
v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);qk(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",qk);v("nrg.fx.animGenStyles",ok.animGenStyles);v("nrg.fx.generateAnim_Slide",uk);v("nrg.fx.generateAnim_Resize",vk);v("nrg.fx.generateAnim_Fade",wk);v("nrg.fx.generateAnim_RemoveAddFade",xk);v("nrg.fx.generateAnim_BgColorTrans",yk);v("nrg.fx.TransitionDims",zk);v("nrg.fx.filterTransitionStyles",Ak);v("nrg.fx.getTransitionStyles",Bk);
v("nrg.fx.generateTransitionDims",Ck);v("nrg.fx.generateAnimations",Dk);v("nrg.fx.parallelAnimate",Ek);v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new ak;D(a,function(a){c&&G(a,"animate",c);e.add(a)});b&&G(e,"begin",b);G(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",Fk);v("nrg.fx.sequentialFadeIn",tk);function Gk(a){return a.slice(a.lastIndexOf("/")+1)}function Hk(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Da(b,"/")?b+d:b+("/"+d);return b};function Ik(){}v("nrg.dom",Ik);function Jk(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!r(b))throw new TypeError("String expected!",b);if(c&&!r(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Kk(e,{src:b?Hk(b,bb(e)+"."+c):""});return d}function Lk(a,b){var c=S("img",{src:b});c.style.cO="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Rh(a,c);c.onclick=c.parentNode.onclick}
function Kk(a,b,c,d){if(!r(a))throw new TypeError("String expected!");if(b&&!la(b))throw new TypeError("Object expected!");if(null!=c&&!u(c))throw new TypeError("Number expected!");if(null!=d&&!u(d))throw new TypeError("Number expected!");a=Mk("div",a,b?b:{});b&&b.src&&Lk(a,b.src);Fk(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Mk(a,b,c){if(!r(a))throw new TypeError("String expected!",a);if(!r(b))throw new TypeError("String expected!",b);if(c&&!la(c))throw new TypeError("Object expected!");c=c&&la(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:bb(b.replace(/\./g,"-").toLowerCase());return S(a,c)}v("nrg.dom.createBasicHoverButtonSet",Jk);v("nrg.dom.createDivChildImage",Lk);v("nrg.dom.createBasicHoverButton",Kk);v("nrg.dom.createUniqueDom",Mk);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Ik.YO(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function V(a){bj.call(this,a);this.Bw();this.o=Mk("div",this.constructor.ID_PREFIX,a);this.Wp();Nk(this)}w(V,bj);v("nrg.ui.Component",V);f=V.prototype;f.Bw=function(){if(this instanceof V){this.constructor.d&&this.constructor.d instanceof V&&V.prototype.Bw.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.um)||(this.constructor.um=Ok(this.constructor.ID_PREFIX),this.constructor.uc=this.constructor.um)}};
function Ok(a){return a.toLowerCase().replace(/\./g,"-")}f.Wp=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)V.prototype.Wp.bind(a)(),a=a.constructor.d;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=vb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=pj(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Nk(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Ok(c.constructor.ID_PREFIX),Jb(b,d),c=c.constructor.d;D(b,function(a){null!=this.a()&&Q(this.a(),a)}.bind(a))}f.Oi="";f.JB=function(a){this.Oi=a};f.pG=function(){return this.Oi};f.ME=function(a){null==this.Oo&&(this.Oo=[]);this.Oo.push(a)};
f.nh=function(){if(null==this.ha)this.ha=Ki(this.a());else if(this.ha.height!==this.u.height||this.ha.width!==this.u.width)this.ha=this.u;if(null==this.lo)this.lo=wi(this.a());else if(this.lo.x!==this.Yp.x||this.lo.y!==this.Yp.y)this.lo=this.Yp;this.u=Ki(this.a());this.Yp=wi(this.a())};f.k=function(){this.nh()};f.n=function(a){this.ea&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):V.d.n.call(this,a)};f.fz=!1;f.rF=function(){return this.fz};
f.f=function(){V.d.f.call(this);null!=this.Oo&&(D(this.Oo,function(a){H(a);a.g()}),Ib(this.Oo));H(this);H(this.a());T(this.a());this.lo=this.ha=this.Yp=this.u=this.Oi=null;this.fz=!0};f.Gt=function(a){null!=a&&(a=g(a)?a:[a],D(a,function(a){H(a);a.g()}),Ib(a))};f.bq=function(a){null!=a&&(H(a),a.g())};f.cq=function(a){C(a,function(b,c){H(b);T(b);delete a[c]});sb(a)};f.nn=function(a){C(a,function(b,c){H(b);b.g();delete a[c]});sb(a)};v("nrg.ui.Component.animationLengths",{ZL:150,vM:300,fN:600});
v("nrg.ui.Component.idPrefixToCssClass",Ok);v("nrg.ui.Component.prototype.validateIdPrefix",V.prototype.Bw);v("nrg.ui.Component.prototype.imagePrefix",V.prototype.Oi);v("nrg.ui.Component.prototype.createCssMap",V.prototype.Wp);v("nrg.ui.Component.prototype.setImagePrefix",V.prototype.JB);v("nrg.ui.Component.prototype.getImagePrefix",V.prototype.pG);v("nrg.ui.Component.prototype.addSubComponent",V.prototype.ME);v("nrg.ui.Component.prototype.calcDims",V.prototype.nh);
v("nrg.ui.Component.prototype.updateStyle",V.prototype.k);v("nrg.ui.Component.prototype.render",V.prototype.n);v("nrg.ui.Component.prototype.disposeInternalCalled",V.prototype.rF);v("nrg.ui.Component.prototype.disposeAnimations",V.prototype.Gt);v("nrg.ui.Component.prototype.disposeAnimationQueue",V.prototype.bq);v("nrg.ui.Component.prototype.disposeElementMap",V.prototype.cq);v("nrg.ui.Component.prototype.disposeComponentMap",V.prototype.nn);v("nrg.ui.Component.prototype.disposeInternal",V.prototype.f);var Pk;function Qk(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Rk(a,b,c){ha(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Pk||(Pk={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Pk,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Sk(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Tk(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]}function Uk(a,b){return a.classList?a.classList.contains(b):Hb(Tk(a),b)}function Vk(a,b){a.classList?a.classList.add(b):Uk(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Wk(a,b){if(a.classList)D(b,function(b){Vk(a,b)});else{var c={};D(Tk(a),function(a){c[a]=!0});D(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function Xk(a,b){a.classList?a.classList.remove(b):Uk(a,b)&&(a.className=Bb(Tk(a),function(a){return a!=b}).join(" "))}function Yk(a,b){a.classList?D(b,function(b){Xk(a,b)}):a.className=Bb(Tk(a),function(a){return!Hb(b,a)}).join(" ")}function Zk(a,b,c){c?Vk(a,b):Xk(a,b)};function $k(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!fc;default:return 166>a.keyCode||183<a.keyCode}}
function al(a,b,c,d,e){if(!(E||gc&&nc("525")))return!0;if(ac&&e)return bl(a);if(e&&!d)return!1;u(b)&&(b=cl(b));if(!c&&(17==b||18==b||ac&&91==b))return!1;if(gc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return!(E&&oc(9));case 27:return!gc}return bl(a)}
function bl(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||gc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function cl(a){if(fc)a=dl(a);else if(ac&&gc)a:switch(a){case 93:a=91;break a}return a}
function dl(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function el(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,Qk(a,k.Bg()),Vk(a,"goog-zippy-header"),fl(k,a),a&&k.uA.B(a,"keydown",k.ir))}Yc.call(this);this.hb=e||Ah();this.Wj=this.hb.a(a)||null;this.hq=this.hb.a(d||null);this.cc=(this.xu=ja(b)?b:null)||!b?null:this.hb.a(b);this.Ag=!0==c;this.uA=new Yi(this);this.Nu=new Yi(this);var k=this;h(this.Wj);h(this.hq);this.Qb(this.Ag)}w(el,Yc);var gl={Gw:"action",jx:"toggle"};f=el.prototype;f.gk=!0;f.f=function(){el.d.f.call(this);zc(this.uA);zc(this.Nu)};
f.Bg=function(){return"tab"};f.Ga=function(){return this.cc};f.toggle=function(){this.Qb(!this.Ag)};f.Qb=function(a){this.cc?Oi(this.cc,a):a&&this.xu&&(this.cc=this.xu());this.cc&&Vk(this.cc,"goog-zippy-content");this.hq?(Oi(this.Wj,!a),Oi(this.hq,a)):hl(this,a);this.Ag=a;this.dispatchEvent(new il(gl.jx,this))};function hl(a,b){a.Wj&&(Zk(a.Wj,"goog-zippy-expanded",b),Zk(a.Wj,"goog-zippy-collapsed",!b),Rk(a.Wj,"expanded",b))}
f.xo=function(a){this.gk!=a&&((this.gk=a)?(fl(this,this.Wj),fl(this,this.hq)):this.Nu.Yf())};function fl(a,b){b&&a.Nu.B(b,"click",a.hr)}f.ir=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Cc(gl.Gw,this)),a.preventDefault(),a.stopPropagation()};f.hr=function(){this.toggle();this.dispatchEvent(new Cc(gl.Gw,this))};function il(a,b){Cc.call(this,a,b)}w(il,Cc);function jl(a,b,c,d){d=d||Ah();var e=d.v("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.iq=e;this.Ve=null;el.call(this,a,b,c,void 0,d);a=this.Ag;this.iq.style.display=a?"":"none";hl(this,a)}w(jl,el);f=jl.prototype;f.ni=500;f.SE=nk;
f.Qb=function(a){if(this.Ag!=a||this.Ve){"none"==this.iq.style.display&&(this.iq.style.display="");var b=this.Ga().offsetHeight,c=0;this.Ve?(a=this.Ag,H(this.Ve),this.Ve.stop(!1),c=parseInt(this.Ga().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;hl(this,a);this.Ve=new zj([0,c],[0,a?b:0],this.ni,this.SE);G(this.Ve,["begin","animate","end"],this.SI,!1,this);G(this.Ve,"end",ta(this.TI,this,a));this.Ve.play(!1)}};f.SI=function(a){var b=this.Ga();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.TI=function(a){a&&(this.Ga().style.marginTop="0");H(this.Ve);this.Ag=a;this.Ve=null;a||(this.iq.style.display="none");this.dispatchEvent(new il(gl.jx,this))};function kl(a,b,c,d){V.call(this);this.Cb=a;this.yb=S("div",{id:"ZippyHeader_"+a+"_"+B(),"class":kl.CSS.ep});this.yb[ll]=a.toLowerCase();null!=d?d(b,this.yb):b.appendChild(this.yb);this.Dn=S("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":kl.CSS.fD});this.uw();this.yb.appendChild(this.Dn);this.th=S("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":kl.CSS.cD},"+");this.yb.appendChild(this.th);this.ti=S("div",{id:"ZippyContent_"+a+"_"+B(),"class":kl.CSS.Yg});b.appendChild(this.ti);this.Wb=new this.NC(this.yb,
this.ti,null!=c?c:!1);this.Wb instanceof jl&&(this.Wb.ni=500);this.$K=ma(this);this.Ic={};G(this.yb,"mouseover",this.dK.bind(this));G(this.yb,"mouseout",this.cK.bind(this));ml(this)}w(kl,V);v("nrg.ui.ZippyNode",kl);kl.ID_PREFIX="nrg.ui.ZippyNode";var nl={XL:"a",LL:"b",WC:"c"};kl.CSS_SUFFIX={ep:"header",Uw:"header-mouseover",fD:"header-label",cD:"expandicon",Mw:"expandicon-mouseover",Yg:"content",Yg:"content-sub"};
function ol(a,b,c){var d=a[0];r(d)&&null!=b&&(d=b.Ic[d]);d.Wb.ni=200;1<a.length&&!d.Wb.Ag&&Rc(d,"a",function(){d.Wb.ni=500;ol(Ob(a,1),d,c)});d.Qb(!0);null!=c&&c(d,a)}var ll=B();f=kl.prototype;f.NC=jl;f.uw=function(a){a=null!=a?a:45;var b=this.Dn,c=this.Cb.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.Cb?Wa(this.Cb,a+60):c.length==this.Cb.length?Wa(this.Cb,a):this.Cb;return b};f.$d=function(){return this.Cb};f.IG=function(){return this.Ic};f.kG=function(){return this.yb};
f.WF=function(){return this.ti};f.lG=function(){return this.Dn};f.xH=function(){return this.Wb};f.Qb=function(a){this.Wb.Qb(a)};f.FK=function(a){this.NC=!0===a?jl:el};function ml(a){G(a.Wb,nb(gl),function(a){null!=this.Wb.Ve?this.dispatchEvent({type:"c"}):a.target.Ag?this.vv():(this.th.innerHTML="+",kk(this.th,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"b"}))}.bind(a))}f.vv=function(){this.th.innerHTML="-";kk(this.th,{"margin-left":"-1em"});this.dispatchEvent({type:"a"})};
f.dK=function(){Q(this.yb,kl.CSS.Uw);Q(this.th,kl.CSS.Mw)};f.cK=function(){uh(this.yb,kl.CSS.Uw);uh(this.th,kl.CSS.Mw)};f.f=function(){kl.d.f.call(this);T(this.Dn);delete this.Dn;T(this.th);delete this.th;H(this.yb);T(this.yb);delete this.yb;T(this.ti);delete this.ti;null!=this.Wb&&(this.Wb.g(),H(this.Wb),delete this.Wb);this.nn(this.Ic);delete this.Ic;delete this.$K;delete this.Cb};v("nrg.ui.ZippyNode.ID_PREFIX",kl.ID_PREFIX);v("nrg.ui.ZippyNode.EventType",nl);v("nrg.ui.ZippyNode.CSS_SUFFIX",kl.CSS_SUFFIX);
v("nrg.ui.ZippyNode.NODE_STORT_TAG",ll);v("nrg.ui.ZippyNode.serialExpand",ol);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",kl.prototype.uw);v("nrg.ui.ZippyNode.prototype.getTitle",kl.prototype.$d);v("nrg.ui.ZippyNode.prototype.getNodes",kl.prototype.IG);v("nrg.ui.ZippyNode.prototype.getHeader",kl.prototype.kG);v("nrg.ui.ZippyNode.prototype.getContentHolder",kl.prototype.WF);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",kl.prototype.lG);v("nrg.ui.ZippyNode.prototype.getZippy",kl.prototype.xH);
v("nrg.ui.ZippyNode.prototype.setExpanded",kl.prototype.Qb);v("nrg.ui.ZippyNode.prototype.setAnimated",kl.prototype.FK);v("nrg.ui.ZippyNode.prototype.disposeInternal",kl.prototype.f);M.od={};M.od.rd=function(){uc.call(this)};w(M.od.rd,uc);v("gxnat.vis.VisNode",M.od.rd);f=M.od.rd.prototype;f.ug="Generic";f.Jr=function(a){this.ug=a};f.SF=function(){return this.ug};f.km="";f.Eo=function(a){this.km=a};f.jH=function(){return this.km};f.Cb=null;f.je=function(a){this.Cb=a};f.$d=function(){return this.Cb};f.g=function(){M.od.rd.d.g.call(this);this.ug&&delete this.ug;this.km&&delete this.km;this.Cb&&delete this.Cb};v("gxnat.vis.VisNode.prototype.setCategory",M.od.rd.prototype.Jr);
v("gxnat.vis.VisNode.prototype.getCategory",M.od.rd.prototype.SF);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",M.od.rd.prototype.Eo);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",M.od.rd.prototype.jH);v("gxnat.vis.VisNode.prototype.setTitle",M.od.rd.prototype.je);v("gxnat.vis.VisNode.prototype.getTitle",M.od.rd.prototype.$d);v("gxnat.vis.VisNode.prototype.dispose",M.od.rd.prototype.g);function pl(a){this.np=new JSZip(a)}w(pl,uc);v("gxnat.Zip",pl);function ql(a,b,c,d){if(!Ea(a,".zip")){if(!Ea(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=M.mx}var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new pl(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}pl.prototype.Dg=function(){return this.np.files};
pl.prototype.Fu=function(a){C(this.Dg(),function(b){a(b.name,b.asArrayBuffer())}.bind(this))};pl.prototype.g=function(){pl.d.g.call(this);this.Fu(function(a){this.np.remove(a)}.bind(this));sb(this.np);delete this.np};v("gxnat.Zip.prototype.getFiles",pl.prototype.Dg);v("gxnat.Zip.prototype.loopFiles",pl.prototype.Fu);v("gxnat.Zip.getFilesAsZip",ql);v("gxnat.Zip.prototype.dispose",pl.prototype.g);v("gxnat.slicerNode",function(){});
function rl(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function sl(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",rl);v("gxnat.slicerNode.toFloatArray",sl);function tl(){ma(this)}v("gxnat.slicerNode.Node",tl);function ul(a,b){ma(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;D(rl(b),function(b){D(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.mn=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=sl(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=sl(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(ul,tl);v("gxnat.slicerNode.Display",ul);function vl(a,b){ul.call(this,a,b)}w(vl,ul);v("gxnat.slicerNode.Mesh",vl);function wl(a,b){if(a instanceof wl)this.cd=a.ow();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!u(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.cd=Mb(a);else if(a instanceof nh)this.cd=xl(a.height,a.width);else if(u(a)&&u(b)&&0<a&&0<b)this.cd=xl(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.ld=new nh(this.cd[0].length,this.cd.length)}
function yl(a,b,c){for(var d=0;d<a.Ki().height;d++)for(var e=0;e<a.Ki().width;e++)b.call(c,a.cd[d][e],d,e,a)}function zl(a,b){var c=new wl(a.Ki());yl(a,function(d,e,h){c.cd[e][h]=b.call(void 0,d,e,h,a)});return c}function xl(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=wl.prototype;f.add=function(a){if(!oh(this.ld,a.Ki()))throw Error("Matrix summation is only supported on arrays of equal size");return zl(this,function(b,c,d){return b+a.cd[c][d]})};
f.zl=function(a,b){if(this.ld.width!=a.ld.width||this.ld.height!=a.ld.height)return!1;for(var c=b||0,d=0;d<this.ld.height;d++)for(var e=0;e<this.ld.width;e++)if(!(Math.abs(this.cd[d][e]-a.cd[d][e])<=(c||1E-6)))return!1;return!0};f.Ki=function(){return this.ld};
f.multiply=function(a){if(a instanceof wl){if(this.ld.width!=a.Ki().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return Al(this,a)}if(u(a))return Bl(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.sc=function(a){if(!oh(this.ld,a.Ki()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return zl(this,function(b,c,d){return b-a.cd[c][d]})};
f.ow=function(){return this.cd};f.toString=function(){var a=0;yl(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];D(this.cd,function(c){b.push("[ ");D(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Cl(a,b,c){return 0<=b&&b<a.ld.height&&0<=c&&c<a.ld.width}
function Al(a,b){var c=new wl(a.ld.height,b.Ki().width);yl(c,function(a,e,h){for(var k=a=0;k<this.ld.width;k++)a+=(Cl(this,e,k)?this.cd[e][k]:0)*(Cl(b,k,h)?b.cd[k][h]:0);if(!Cl(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.ld.height+","+c.ld.width+")");c.cd[e][h]=a},a);return c}function Bl(a,b){return zl(a,function(a){return a*b})};function Dl(a,b,c){ul.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=zl(new wl(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.Zv=new El(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.Oq=b;this.Zr=this.mn?parseInt(this.mn.getAttribute("upperThreshold")):null;this.Yq=this.mn?parseInt(this.mn.getAttribute("lowerThreshold")):null;this.visible=c}w(Dl,ul);v("gxnat.slicerNode.Volume",Dl);function El(a,b,c){var d=new wl([[0],[0],[0],[1]]);D([a,b,c],function(a,b){var c=a.multiply(d).ow(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.yK=c;break;case 1:this.hF=c;break;case 2:this.YE=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",El);function Fl(a,b){ma(this);this.backgroundColor=qj(a);this.wy=qj(b)}w(Fl,tl);v("gxnat.slicerNode.BackgroundColor",Fl);function Gl(a,b,c,d,e,h,k,l){ma(this);this.element=a;this.Op=b;this.backgroundColor=c;this.yA=d;this.Xm=e;this.vL=h;this.BI=k;this.FF=l}w(Gl,tl);v("gxnat.slicerNode.SceneView",Gl);function Hl(a){uc.call(this);a instanceof Gl?(this.Xm=a.Xm,this.Op=a.Op,this.backgroundColor=a.backgroundColor,this.yA=a.yA):a instanceof Dl?(this.origin=a.origin||[0,0,0],this.Zr=a.Zr||1E4,this.Yq=a.Yq||-1E4,this.Dw=a.Dw||!1,this.Oq=a.Oq||!1,this.Zv=a.Zv||null,a.Ig&&(this.vA=a.labelMapFile,this.nI=a.colorTableFile)):a instanceof vl&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Hl,uc);v("gxnat.vis.RenderProperties",Hl);Hl.prototype.g=function(){Hl.d.g.call(this);sb(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Hl.prototype.g);function Il(a){M.od.rd.call(this);this.Kd=a||null}w(Il,M.od.rd);v("gxnat.vis.Renderable",Il);Il.prototype.Tv=function(a){this.Kd=a instanceof Hl?a:new Hl(a)};Il.prototype.UG=function(){return this.Kd};Il.prototype.g=function(){Il.d.g.call(this);this.Kd&&(this.Kd.g(),delete this.Kd)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Il.prototype.Tv);v("gxnat.vis.Renderable.prototype.getRenderProperties",Il.prototype.UG);v("gxnat.vis.Renderable.prototype.dispose",Il.prototype.g);function Jl(a,b){Il.call(this,b);this.Gi=a||[];null!=b&&this.Tv(b)}w(Jl,Il);v("gxnat.vis.Viewable",Jl);f=Jl.prototype;f.Ei=null;f.cG=function(){return this.Ei};f.HK=function(a){return this.Ei=a};f.EB=function(a){null!=this.Ei&&sb(this.Ei);this.Ei={};var b=this.Dg();D(b,function(a){this.Ei[a]=null}.bind(this));var c,d,e,h;a.Fu(function(a,l){c=0;for(d=b.length;c<d;c++)if(e=b[c],h="/files/"+a.split("/files/")[1],Ea(e,h)){this.Ei[e]=l;break}}.bind(this));a.g()};f.Dg=function(){return this.Gi};
f.pK=function(a){window.kO.log("REMOVING FILE",a);Kb(this.Gi,a)};f.mi=function(a,b){null==this.Gi&&(this.Gi=[]);g(a)||(a=[a]);D(a,function(a){null!=b&&null==b(a)||this.Gi.push(a)}.bind(this))};f.g=function(){Jl.d.g.call(this);this.Gi&&(Ib(this.Gi),delete this.Gi)};v("gxnat.vis.Viewable.prototype.getFileData",Jl.prototype.cG);v("gxnat.vis.Viewable.prototype.setFileData",Jl.prototype.HK);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Jl.prototype.EB);v("gxnat.vis.Viewable.prototype.getFiles",Jl.prototype.Dg);
v("gxnat.vis.Viewable.prototype.removeFile",Jl.prototype.pK);v("gxnat.vis.Viewable.prototype.addFiles",Jl.prototype.mi);v("gxnat.vis.Viewable.prototype.dispose",Jl.prototype.g);function Kl(a){Il.call(this);null!=a?g(a)||(a=[a]):a=[];this.Nd=a}w(Kl,Il);v("gxnat.vis.ViewableGroup",Kl);Kl.prototype.by=function(a){return this.Nd.push(a)};Kl.prototype.NF=function(){var a=[];D(this.Nd,function(b){a=Lb(a,b.Dg())});return a};Kl.prototype.wH=function(){return this.Nd};Kl.prototype.g=function(){Kl.d.g.call(this);D(this.Nd,function(a){g(a)?D(a,function(a){a.g()}):a instanceof Jl&&a.g()});delete this.Nd};v("gxnat.vis.ViewableGroup.prototype.addViewable",Kl.prototype.by);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Kl.prototype.NF);v("gxnat.vis.ViewableGroup.prototype.getViewables",Kl.prototype.wH);v("gxnat.vis.ViewableGroup.prototype.dispose",Kl.prototype.g);function Ll(){M.od.rd.call(this);this.Zc=[]}w(Ll,M.od.rd);v("gxnat.vis.ViewableTree",Ll);function Ml(a,b,c){this.mK=a;this.aL=b;this.DF=c}v("gxnat.vis.ViewableTree.metadataCollection",Ml);f=Ll.prototype;f.xr=null;f.hm=null;f.Cl=null;f.orientation=null;f.Pb=function(){return this.orientation};f.Ao=function(a){this.xr=a};f.Co=function(a){this.hm=a};f.wo=function(a){this.Cl=a};f.uH=function(){return this.Zc};
f.g=function(){Ll.d.g.call(this);null!=this.xr&&(sb(this.xr),delete this.NO);null!=this.hm&&(sb(this.hm),delete this.VO);null!=this.Cl&&(sb(this.Cl),delete this.qO);null!=this.Zc&&(D(this.Zc,function(a){a.g()}),delete this.Zc);null!=this.uC&&Ib(this.uC);delete this.uC;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Ml);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Ll.prototype.xr);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Ll.prototype.hm);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Ll.prototype.Cl);v("gxnat.vis.ViewableTree.prototype.orientation",Ll.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Ll.prototype.Pb);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Ll.prototype.Ao);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Ll.prototype.Co);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Ll.prototype.wo);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Ll.prototype.uH);
v("gxnat.vis.ViewableTree.prototype.dispose",Ll.prototype.g);function Nl(a,b,c){Ll.call(this);this.Jr(a);null!=c&&null!=b&&(this.rn=c,this.Kh=Tg(this.rn,b.URI,"experiments"),this.hp=new Og(this.Kh));this.Qn=b;this.he={}}w(Nl,Ll);v("gxnat.vis.AjaxViewableTree",Nl);var Ol={ID:"Scan ID",Name:"Name",type:"Scan Type"},Pl={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Ql={label:"Session"};function Rl(a,b,c){M.Ch(a,function(a){g(a);D(a,function(a){b(a)});c&&c()})}f=Nl.prototype;f.uh=null;f.Fi=!1;
f.FB=function(a,b){null==this.uh&&(this.uh={});this.uh[a]=b};f.Tz=function(){var a=0;C(this.uh,function(b,c){a+=this.yz(c)}.bind(this));return a};f.yz=function(a){return parseInt(this.uh[a].Size,10)};f.dG=function(){return this.uh};f.fG=function(){return this.Fi};f.GB=function(a){this.Fi=a};f.aG=function(){return this.rn};f.TG=function(){return this.Kh};f.YG=function(){return this.he};f.YB=function(a){this.he=a};f.fm=function(){C(Ol,function(a,b){null!=this.Qn[b]&&(this.he[a]=this.Qn[b])}.bind(this))};
f.Ao=function(a){Nl.d.Ao.call(this,a)};f.Co=function(a){Nl.d.Co.call(this,a);C(Pl,function(a,c){null!=this.hm[c]&&(this.he[a]=this.hm[c])}.bind(this))};f.wo=function(a){Nl.d.wo.call(this,a);C(Ql,function(a,c){null!=this.Cl[c]&&(this.he[a]=this.Cl[c])}.bind(this))};f.gG=function(){return this.tn};f.Zq=function(a){a=a[this.sn];if(!Da(a,"/"))return this.Kh+"!"+a};
f.Ii=function(a){if(this.Fi)a();else{var b=0,c=0,d="",e;M.Ch(this.Kh+this.jq,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.Zq(e))this.FB(d,e),this.mi(d,this.El);a();this.Fi=!0}.bind(this))}};f.El=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.bk=function(){};function Sl(a,b,c,d){var e=new Og(a);Rl(a+"/"+b.prototype.tn,function(a){new b(a,e.Jh("experiments"),c)},d)}
f.g=function(){Nl.d.g.call(this);null!=this.uh&&(sb(this.uh),delete this.uh);delete this.Fi;sb(this.he);delete this.he;null!=this.Qn&&(sb(this.Qn),delete this.Qn);null!=this.hp&&(this.hp.g(),delete this.hp);delete this.rn;delete this.Kh};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Ol);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Pl);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Ql);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",Rl);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",Sl);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Nl.prototype.Fi);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Nl.prototype.FB);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Nl.prototype.Tz);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Nl.prototype.yz);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Nl.prototype.dG);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Nl.prototype.fG);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Nl.prototype.GB);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Nl.prototype.aG);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Nl.prototype.TG);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Nl.prototype.YG);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Nl.prototype.YB);v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Nl.prototype.fm);
v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Nl.prototype.Ao);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Nl.prototype.Co);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Nl.prototype.wo);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Nl.prototype.gG);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Nl.prototype.Zq);v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Nl.prototype.Ii);
v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Nl.prototype.El);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Nl.prototype.bk);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Nl.prototype.g);function Tl(a,b,c,d){this.files=a;this.CI=b;this.mw=c;this.Pt=d}v("xiv.sampleData.Sample",Tl);function Ul(){uc.call(this);this.jg=[]}w(Ul,uc);v("xiv.sampleData.SampleCollection",Ul);Ul.prototype.VG=function(){return this.jg};Ul.prototype.g=function(){Ul.d.g.call(this);D(this.jg,function(a){sb(a)});delete this.jg};v("xiv.sampleData.SampleCollection.Samples",Ul.jg);v("xiv.sampleData.SampleCollection.getSamples",Ul.VG);v("xiv.sampleData.SampleCollection.dispose",Ul.g);function Vl(){Ul.call(this);this.jg.push(this.Kv)}w(Vl,Ul);v("xiv.sampleData.SlicerScenes",Vl);
Vl.prototype.Kv=new Tl("src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/oneView_brain_2.mrml;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm.nrrd.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/5%3a%20t1_mpr_1mm_p2_pos50-label.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/F.fcsv;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/brain.vtk;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/BrainMesh_Underside.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/Top.png".split(";"),{Name:"Example Slicer Scene",
Type:"Slicer Scene"},"src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
function Wl(){}v("xiv",Wl);v("xiv.SAMPLE_DATA_PATH","xiv/sample-data");v("xiv.SAMPLE_SCAN_PREFIX","xiv/sample-data/scans/");function Xl(a,b,c){Nl.call(this,"Scans",a,b);this.he["Total Frames"]=0;c&&c(this)}w(Xl,Nl);v("gxnat.vis.Scan",Xl);var Yl="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");f=Xl.prototype;f.tn="scans";f.jq="/files";f.sn="URI";
f.fm=function(){Xl.d.fm.call(this);if(null!=this.Ck["parameters/orientation"]){var a;a:{switch(this.Ck["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.he.Orientation=a;this.orientation=this.he.Orientation}null!=this.Ck["parameters/acqType"]&&(this.he["Acq. Type"]=this.Ck["parameters/acqType"])};
f.Ii=function(a){this.Fi?a():M.Ch(this.hp.originalUrl,function(b){this.Ck=b.items[0].data_fields;this.fm();Xl.d.Ii.call(this,function(){this.bk();a()}.bind(this))}.bind(this))};f.El=function(a){a=Xl.d.El.call(this,a);if(null!=a){for(var b=0,c=Yl.length;b<c;b++)if(Ea(a,"."+Yl[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.mi=function(a){this.Jr("Scans");if(0==this.Zc.length){var b=new Kl;b.je("scan");b.Jr("scans");this.Zc.push(b)}0==this.Zc[0].Nd.length&&this.Zc[0].by(new Jl);this.Zc[0].Nd[0].mi(a,this.El);this.he["Total Frames"]=this.Zc[0].Nd[0].Dg().length};f.Zq=function(a){return Tg(this.rn,a[this.sn],"experiments")};f.bk=function(a){if(this.Zc&&this.Zc[0]){var b=this.Zc[0].Nd[0].Dg().sort(M.fr);this.Eo(b[Math.floor(b.length/2)]+M.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){Xl.d.g.call(this);null!=this.Ck&&sb(this.Ck);delete this.Ck};v("gxnat.vis.Scan.acceptableFileTypes",Yl);v("gxnat.vis.Scan.prototype.folderQuerySuffix",Xl.prototype.tn);v("gxnat.vis.Scan.prototype.fileQuerySuffix",Xl.prototype.jq);v("gxnat.vis.Scan.prototype.fileContentsKey",Xl.prototype.sn);v("gxnat.vis.Scan.prototype.setViewableMetadata",Xl.prototype.fm);v("gxnat.vis.Scan.prototype.getFileList",Xl.prototype.Ii);v("gxnat.vis.Scan.prototype.fileFilter",Xl.prototype.El);
v("gxnat.vis.Scan.prototype.addFiles",Xl.prototype.mi);v("gxnat.vis.Scan.prototype.makeFileUrl",Xl.prototype.Zq);v("gxnat.vis.Scan.prototype.getThumbnailImage",Xl.prototype.bk);v("gxnat.vis.Scan.prototype.dispose",Xl.prototype.g);function Zl(a,b,c){Yc.call(this);this.target=a;this.handle=b||a;this.yu=c||new ph(NaN,NaN,NaN,NaN);this.na=Ch(a);this.oc=new Yi(this);yc(this,va(zc,this.oc));G(this.handle,["touchstart","mousedown"],this.Ko,!1,this)}w(Zl,Yc);var $l=E||fc&&nc("1.9.3");f=Zl.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.ew=0;f.fw=0;f.qh=0;f.zd=0;f.Bc=!0;f.zi=!1;f.lA=0;f.dr=0;f.UH=!1;f.Kk=!1;f.Bi=function(a){this.Kk=a};f.Za=function(){return this.oc};function am(a,b){a.yu=b||new ph(NaN,NaN,NaN,NaN)}
f.VB=function(a){this.Er=a};f.ic=function(a){this.Bc=a};f.f=function(){Zl.d.f.call(this);Sc(this.handle,["touchstart","mousedown"],this.Ko,!1,this);this.oc.Yf();$l&&this.na.releaseCapture();this.handle=this.target=null};function bm(a){ca(a.Ng)||(a.Ng=Ci(a.target));return a.Ng}
f.Ko=function(a){var b="mousedown"==a.type;if(!this.Bc||this.zi||b&&!Hc(a))this.dispatchEvent("earlycancel");else{cm(a);if(0==this.lA)if(this.dispatchEvent(new dm("start",this,a.clientX,a.clientY)))this.zi=!0,a.preventDefault();else return;else a.preventDefault();var b=this.na,c=b.documentElement,d=!$l;this.oc.B(b,["touchmove","mousemove"],this.LH,d);this.oc.B(b,["touchend","mouseup"],this.Ci,d);$l?(c.setCapture(!1),this.oc.B(c,"losecapture",this.Ci)):this.oc.B(Mh(b),"blur",this.Ci);E&&this.UH&&this.oc.B(b,
"dragstart",Dc);this.Er&&this.oc.B(this.Er,"scroll",this.Zl,d);this.clientX=this.ew=a.clientX;this.clientY=this.fw=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.qh=this.Kk?Mj(this.target):this.target.offsetLeft;this.zd=this.target.offsetTop;this.xv=oi(Ah(this.na));this.dr=ya()}};
f.Ci=function(a,b){this.oc.Yf();$l&&this.na.releaseCapture();if(this.zi){cm(a);this.zi=!1;var c=em(this,this.qh),d=fm(this,this.zd);this.dispatchEvent(new dm("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function cm(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.oa(a.Cc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.oa(a.Cc.changedTouches[0],a.currentTarget)}
f.LH=function(a){if(this.Bc){cm(a);var b=(this.Kk&&bm(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.zi){var d=this.ew-this.clientX,e=this.fw-this.clientY;if(d*d+e*e>this.lA)if(this.dispatchEvent(new dm("start",this,a.clientX,a.clientY)))this.zi=!0;else{this.Tj||this.Ci(a);return}}c=gm(this,b,c);b=c.x;c=c.y;this.zi&&this.dispatchEvent(new dm("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(hm(this,a,b,c),a.preventDefault())}};function gm(a,b,c){var d=oi(Ah(a.na));b+=d.x-a.xv.x;c+=d.y-a.xv.y;a.xv=d;a.qh+=b;a.zd+=c;b=em(a,a.qh);a=fm(a,a.zd);return new N(b,a)}f.Zl=function(a){var b=gm(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;hm(this,a,b.x,b.y)};function hm(a,b,c,d){a.Ct(c,d);a.dispatchEvent(new dm("drag",a,b.clientX,b.clientY,0,c,d))}
function em(a,b){var c=a.yu,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function fm(a,b){var c=a.yu,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.Ct=function(a,b){this.Kk&&bm(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.Pf=function(){return this.zi};
function dm(a,b,c,d,e,h,k,l){Cc.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(h)?h:b.qh;this.top=ca(k)?k:b.zd;this.Jt=b;this.xF=!!l}w(dm,Cc);yb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function im(){this.Ev="";this.PD=jm;this.dz=null}im.prototype.wz=function(){return this.dz};im.prototype.toString=function(){return"SafeHtml{"+this.Ev+"}"};function km(a){if(a instanceof im&&a.constructor===im&&a.PD===jm)return a.Ev;eb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}yb("action","cite","data","formaction","href","manifest","poster","src");yb("link","script","style");var jm={};function lm(a,b){var c=new im;c.Ev=a;c.dz=b;return c}var mm=lm("",0);function nm(a,b){Yc.call(this);this.Rc=new Yi(this);this.Mv(a||null);b&&(this.pm=b)}w(nm,Yc);f=nm.prototype;f.o=null;f.WE=!0;f.uy=null;f.vy=null;f.Wl=!1;f.PK=!1;f.uu=-1;f.RH=!1;f.zF=!0;f.pm="toggle_display";f.a=function(){return this.o};f.Mv=function(a){if(this.Wl)throw Error("Can not change this state of the popup while showing.");this.o=a};f.aC=function(a,b){this.gm=a;this.Ol=b};f.Za=function(){return this.Rc};f.wa=function(){return this.Wl};
f.$=function(a){this.gm&&this.gm.stop();this.Ol&&this.Ol.stop();a?this.Xv():this.Pl()};f.ge=ea;
f.Xv=function(){if(!this.Wl&&this.Yu()){if(!this.o)throw Error("Caller must call setElement before trying to show the popup");this.ge();var a=Ch(this.o);this.RH&&this.Rc.B(a,"keydown",this.XI,!0);if(this.WE)if(this.Rc.B(a,"mousedown",this.XA,!0),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.Rc.B(a,"mousedown",this.XA,!0);this.Rc.B(a,"deactivate",this.WA)}else this.Rc.B(a,"blur",
this.WA);"toggle_display"==this.pm?(this.o.style.visibility="visible",Oi(this.o,!0)):"move_offscreen"==this.pm&&this.ge();this.Wl=!0;this.uu=ya();this.gm?(Rc(this.gm,"end",this.bB,!1,this),this.gm.play()):this.bB()}};f.Pl=function(a){if(!this.Wl||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.Rc&&this.Rc.Yf();this.Wl=!1;ya();this.Ol?(Rc(this.Ol,"end",va(this.Ky,a),!1,this),this.Ol.play()):this.Ky(a);return!0};
f.Ky=function(a){"toggle_display"==this.pm?this.PK?Sf(this.kA,0,this):this.kA():"move_offscreen"==this.pm&&(this.o.style.top="-10000px");this.fv(a)};f.kA=function(){this.o.style.visibility="hidden";Oi(this.o,!1)};f.Yu=function(){return this.dispatchEvent("beforeshow")};f.bB=function(){this.dispatchEvent("show")};f.fv=function(a){this.dispatchEvent({type:"hide",target:a})};f.XA=function(a){a=a.target;Zh(this.o,a)||om(this,a)||this.vy&&!Zh(this.vy,a)||150>ya()-this.uu||this.Pl(a)};
f.XI=function(a){27==a.keyCode&&this.Pl(a.target)&&(a.preventDefault(),a.stopPropagation())};f.WA=function(a){if(this.zF){var b=Ch(this.o);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||Zh(this.o,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.uu||this.Pl()}};function om(a,b){return Db(a.uy||[],function(a){return b===a||Zh(a,b)})}f.f=function(){nm.d.f.call(this);this.Rc.g();zc(this.gm);zc(this.Ol);delete this.o;delete this.Rc;delete this.uy};function pm(a){Yc.call(this);this.o=a;a=E?"focusout":"blur";this.pI=G(this.o,E?"focusin":"focus",this,!E);this.qI=G(this.o,a,this,!E)}w(pm,Yc);pm.prototype.handleEvent=function(a){var b=new Fc(a.Cc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};pm.prototype.f=function(){pm.d.f.call(this);Tc(this.pI);Tc(this.qI);delete this.o};function qm(a,b){bj.call(this,b);this.rL=!!a;this.Un=null}w(qm,bj);f=qm.prototype;f.Nt=null;f.tc=!1;f.ye=null;f.ed=null;f.cg=null;f.ct=!1;f.U=function(){return"goog-modalpopup"};f.Hi=function(){return this.ye};f.v=function(){qm.d.v.call(this);var a=this.a(),b=Ia(this.U()).split(" ");Wk(a,b);di(a,!0);Oi(a,!1);rm(this);sm(this)};
function rm(a){if(a.rL&&!a.ed){var b;b=a.M().v("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.ed=b;a.ed.className=a.U()+"-bg";Oi(a.ed,!1);Ni(a.ed,0)}a.ye||(a.ye=a.M().v("div",a.U()+"-bg"),Oi(a.ye,!1))}function sm(a){a.cg||(a.cg=a.M().createElement("span"),Oi(a.cg,!1),di(a.cg,!0),a.cg.style.position="absolute")}f.uB=function(){this.ct=!1};f.ze=function(a){return!!a&&"DIV"==a.tagName};
f.Ud=function(a){qm.d.Ud.call(this,a);a=Ia(this.U()).split(" ");Wk(this.a(),a);rm(this);sm(this);Oi(this.a(),!1)};f.Ya=function(){this.ed&&Th(this.ed,this.a());Th(this.ye,this.a());qm.d.Ya.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.cg,a.nextSibling);this.Nt=new pm(li(this.M()));this.Za().B(this.Nt,"focusin",this.bJ);tm(this,!1)};f.pc=function(){this.wa()&&this.$(!1);zc(this.Nt);qm.d.pc.call(this);T(this.ed);T(this.ye);T(this.cg)};
f.$=function(a){a!=this.tc&&(this.xk&&this.xk.stop(),this.sl&&this.sl.stop(),this.wk&&this.wk.stop(),this.rl&&this.rl.stop(),this.ea&&tm(this,a),a?this.Xv():this.Pl())};function tm(a,b){if(b){a.Ml||(a.Ml=[]);for(var c=a.M(),c=c.Qt(c.na.body),d=0;d<c.length;d++){var e=c[d];e==a.o||Sk(e,"hidden")||(Rk(e,"hidden",!0),a.Ml.push(e))}}else if(a.Ml){for(d=0;d<a.Ml.length;d++)a.Ml[d].removeAttribute("aria-hidden");a.Ml=null}}f.aC=function(a,b,c,d){this.xk=a;this.wk=b;this.sl=c;this.rl=d};
f.Xv=function(){if(this.dispatchEvent("beforeshow")){try{this.Un=li(this.M()).activeElement}catch(a){}this.Iv();this.ge();this.Za().B(ni(this.M()),"resize",this.Iv);um(this,!0);this.focus();this.tc=!0;this.xk&&this.sl?(Rc(this.xk,"end",this.qr,!1,this),this.sl.play(),this.xk.play()):this.qr()}};
f.Pl=function(){if(this.dispatchEvent("beforehide")){this.Za().kb(ni(this.M()),"resize",this.Iv);this.tc=!1;this.wk&&this.rl?(Rc(this.wk,"end",this.jr,!1,this),this.rl.play(),this.wk.play()):this.jr();try{var a=li(this.M()).body,b=li(this.M()).activeElement||a;this.Un&&b==a&&this.Un!=a&&this.Un.focus()}catch(c){}this.Un=null}};function um(a,b){a.ed&&Oi(a.ed,b);a.ye&&Oi(a.ye,b);Oi(a.a(),b);Oi(a.cg,b)}f.qr=function(){this.dispatchEvent("show")};f.jr=function(){um(this,!1);this.dispatchEvent("hide")};
f.wa=function(){return this.tc};f.focus=function(){this.nz()};f.Iv=function(){this.ed&&Oi(this.ed,!1);this.ye&&Oi(this.ye,!1);var a=li(this.M()),b=Kh(Mh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.ed&&(Oi(this.ed,!0),Hi(this.ed,c,a));this.ye&&(Oi(this.ye,!0),Hi(this.ye,c,a))};
f.ge=function(){var a=li(this.M()),b=Mh(a)||window;if("fixed"==ti(this.a()))var c=a=0;else c=oi(this.M()),a=c.x,c=c.y;var d=Ki(this.a()),b=Kh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);ui(this.a(),a,c);ui(this.cg,a,c)};f.bJ=function(a){this.ct?this.uB():a.target==this.cg&&Sf(this.nz,0,this)};f.nz=function(){try{E&&li(this.M()).body.focus(),this.a().focus()}catch(a){}};
f.f=function(){zc(this.xk);this.xk=null;zc(this.wk);this.wk=null;zc(this.sl);this.sl=null;zc(this.rl);this.rl=null;qm.d.f.call(this)};function vm(a,b,c){qm.call(this,b,c);this.yd=a||"modal-dialog";this.W=wm(wm(new xm,ym,!0),zm,!1,!0)}w(vm,qm);f=vm.prototype;f.hz=!0;f.ku=!0;f.Lu=!0;f.eq=!0;f.Mp=.5;f.Cb="";f.Ac=null;f.Sa=null;f.sF=!1;f.md=null;f.Fd=null;f.Wr=null;f.le=null;f.If=null;f.Nc=null;f.Dv="dialog";f.U=function(){return this.yd};f.je=function(a){this.Cb=a;this.Fd&&ai(this.Fd,a)};f.$d=function(){return this.Cb};f.Ek=function(a){this.Ac=a=lm(a,null);this.If&&(this.If.innerHTML=km(a))};
f.getContent=function(){return null!=this.Ac?km(this.Ac):""};f.Ji=function(){return this.Dv};f.Ga=function(){this.a()||this.n();return this.If};f.Sz=function(){this.a()||this.n();return this.md};f.Hi=function(){this.a()||this.n();return vm.d.Hi.call(this)};function Am(a,b){a.Mp=b;if(a.a()){var c=a.Hi();c&&Ni(c,a.Mp)}}function Bm(a,b){b!=a.Lu&&Cm(a,b)}function Cm(a,b){a.Lu=b;if(a.ea){var c=a.M(),d=a.Hi(),e=a.ed;b?(e&&c.pu(e,a.a()),c.pu(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.wa()&&tm(a,b)}
f.Mr=function(a){this.eq=a;this.vo(a&&this.ea)};f.vo=function(a){var b=Ia(this.yd+"-title-draggable").split(" ");this.a()&&(a?Wk(this.md,b):Yk(this.md,b));a&&!this.Sa?(this.Sa=new Zl(this.a(),this.md),Wk(this.md,b),G(this.Sa,"start",this.Nr,!1,this)):!a&&this.Sa&&(this.Sa.g(),this.Sa=null)};
f.v=function(){vm.d.v.call(this);var a=this.a(),b=this.M();this.md=b.v("div",this.yd+"-title",this.Fd=b.v("span",{className:this.yd+"-title-text",id:ej(this)},this.Cb),this.le=b.v("span",this.yd+"-title-close"));Rh(a,this.md,this.If=b.v("div",this.yd+"-content"),this.Nc=b.v("div",this.yd+"-buttons"));Qk(this.Fd,"heading");Qk(this.le,"button");di(this.le,!0);Rk(this.le,"label",Dm);this.Wr=this.Fd.id;Qk(a,this.Ji());Rk(a,"labelledby",this.Wr||"");this.Ac&&(this.If.innerHTML=km(this.Ac));Oi(this.le,
this.ku);this.W&&(a=this.W,a.o=this.Nc,a.n());Oi(this.Nc,!!this.W);Am(this,this.Mp)};
f.Ud=function(a){vm.d.Ud.call(this,a);a=this.a();var b=this.yd+"-content";this.If=Eh(null,b,a)[0];this.If||(this.If=this.M().v("div",b),this.Ac&&(this.If.innerHTML=km(this.Ac)),a.appendChild(this.If));var b=this.yd+"-title",c=this.yd+"-title-text",d=this.yd+"-title-close";(this.md=Eh(null,b,a)[0])?(this.Fd=Eh(null,c,this.md)[0],this.le=Eh(null,d,this.md)[0]):(this.md=this.M().v("div",b),a.insertBefore(this.md,this.If));this.Fd?(this.Cb=gi(this.Fd),this.Fd.id||(this.Fd.id=ej(this))):(this.Fd=S("span",
{className:c,id:ej(this)}),this.md.appendChild(this.Fd));this.Wr=this.Fd.id;Rk(a,"labelledby",this.Wr||"");this.le||(this.le=this.M().v("span",d),this.md.appendChild(this.le));Oi(this.le,this.ku);b=this.yd+"-buttons";(this.Nc=Eh(null,b,a)[0])?(this.W=new xm(this.M()),this.W.ub(this.Nc)):(this.Nc=this.M().v("div",b),a.appendChild(this.Nc),this.W&&(a=this.W,a.o=this.Nc,a.n()),Oi(this.Nc,!!this.W));Am(this,this.Mp)};
f.Ya=function(){vm.d.Ya.call(this);this.Za().B(this.a(),"keydown",this.Hh).B(this.a(),"keypress",this.Hh);this.Za().B(this.Nc,"click",this.UI);this.vo(this.eq);this.Za().B(this.le,"click",this.NJ);var a=this.a();Qk(a,this.Ji());""!==this.Fd.id&&Rk(a,"labelledby",this.Fd.id);this.Lu||Cm(this,!1)};f.pc=function(){this.wa()&&this.$(!1);this.vo(!1);vm.d.pc.call(this)};f.$=function(a){a!=this.wa()&&(this.ea||this.n(),vm.d.$.call(this,a))};f.qr=function(){vm.d.qr.call(this);this.dispatchEvent(Em)};
f.jr=function(){vm.d.jr.call(this);this.dispatchEvent(Fm);this.sF&&this.g()};f.Nr=function(){var a=li(this.M()),b=Kh(Mh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=Ki(this.a());"fixed"==ti(this.a())?am(this.Sa,new ph(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):am(this.Sa,new ph(0,0,c-d.width,a-d.height))};f.NJ=function(){Gm(this)};
function Gm(a){if(a.ku){var b=a.W,c=b&&b.jt;c?(b=b.get(c),a.dispatchEvent(new Hm(c,b))&&a.$(!1)):a.$(!1)}}f.f=function(){this.Nc=this.le=null;vm.d.f.call(this)};function Im(a,b){a.W=b;if(a.Nc){if(a.W){var c=a.W;c.o=a.Nc;c.n()}else a.Nc.innerHTML=km(mm);Oi(a.Nc,!!a.W)}}f.UI=function(a){a:{for(a=a.target;null!=a&&a!=this.Nc;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.W.get(a);this.dispatchEvent(new Hm(a,b))&&this.$(!1)}};
f.Hh=function(a){var b=!1,c=!1,d=this.W,e=a.target;if("keydown"==a.type)if(this.hz&&27==a.keyCode){var h=d&&d.jt,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new Hm(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.ct=!0;try{this.cg.focus()}catch(k){}Sf(this.uB,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.le)Gm(this);else if(d){var l=d.Dt,n;if(n=l)a:{n=d.o.getElementsByTagName("BUTTON");for(var m=
0,q;q=n[m];m++)if(q.name==l||q.id==l){n=q;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new Hm(h,String(d.get(h)))))}else e==this.le&&32==a.keyCode&&Gm(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.$(!1)};function Hm(a,b){this.type=Jm;this.key=a;this.caption=b}w(Hm,Cc);var Jm="dialogselect",Fm="afterhide",Em="aftershow";function xm(a){this.hb=a||Ah();gd.call(this)}var Km,Lm;w(xm,gd);
f=xm.prototype;f.yd="goog-buttonset";f.Dt=null;f.o=null;f.jt=null;f.set=function(a,b,c,d){gd.prototype.set.call(this,a,b);c&&(this.Dt=a);d&&(this.jt=a);return this};function wm(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.n=function(){if(this.o){this.o.innerHTML=km(mm);var a=Ah(this.o);this.forEach(function(b,c){var d=a.v("button",{name:c},b);c==this.Dt&&(d.className=this.yd+"-default");this.o.appendChild(d)},this)}};
f.ub=function(a){if(a&&1==a.nodeType){this.o=a;a=this.o.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=gi(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==Mm);h&&Vk(c,this.yd+"-default")}}};f.a=function(){return this.o};f.M=function(){return this.hb};var Mm="cancel",Dm="Close",ym={key:"ok",caption:"OK"},zm={key:Mm,caption:"Cancel"},Nm={key:"yes",caption:"Yes"},Om={key:"no",caption:"No"},Pm={key:"save",caption:"Save"},Qm={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Km=wm(new xm,ym,!0,!0),wm(wm(new xm,ym,!0),zm,!1,!0),Lm=wm(wm(new xm,Nm,!0),Om,!1,!0),wm(wm(wm(new xm,Nm),Om,!0),zm,!1,!0),wm(wm(wm(new xm,Qm),Pm),zm,!0,!0));function Rm(){vm.call(this);this.hz=!1}w(Rm,vm);v("nrg.ui.Dialog",Rm);Rm.ID_PREFIX="nrg.ui.Dialog";Rm.CSS={dx:"nrg-ui-dialog-overlay",dp:"nrg-ui-dialog-background",hj:"nrg-ui-dialog-closebutton",XC:"nrg-ui-dialog-closebutton-image",WD:"nrg-ui-dialog-subtext",Tk:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",Yg:"nrg-ui-dialog-content",TC:"nrg-ui-dialog-buttons"};f=Rm.prototype;f.eq=!0;f.Sa=null;f.yk=null;
f.Qv=function(a){this.mm.style.visibility="hidden";this.vg.style.visibility="hidden";null!=a&&mk(this.a(),a,null,null,function(){this.mm.style.visibility="visible";this.vg.style.visibility="visible"}.bind(this),function(){this.mm.style.visibility="hidden";this.vg.style.visibility="hidden"}.bind(this))};f.ay=function(a){Q(this.mm,a)};f.JE=function(a){Q(this.Ac,a)};f.GE=function(a){Q(this.vg.parentNode,a)};f.HE=function(a){Q(this.vg,a)};f.Nx=function(a){Q(this.Sp,a)};f.FE=function(a){Q(this.ht,a)};
function Sm(a){a.Sp=Gh("modal-dialog-title-close",a.a())[0];Q(a.Sp,Rm.CSS.hj);a.vg=S("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":Rm.CSS.XC});a.vg.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.Sp.appendChild(a.vg);G(a.vg,"click",function(a){this.$(!this.wa());this.dispatchEvent({type:"f"});a.stopPropagation()}.bind(a))}f.TE=function(){var a=this.a(),b=Uj(a,600),c=Tj(a,600),d=Uj(a,600),a=Tj(a,600);this.aC(b,c,d,a)};
f.er=function(a,b,c,d){var e=this.a(),h=Ki(e.parentNode),k=Ki(e);c=null!=c?c:0;"left"==a?e.style.left=0+c+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=0+(null!=d?d:0)+"px")};f.Ae=function(){var a=this.a(),b=Ki(this.a().parentNode);if(null!=this.Hi()){var c=this.Hi();0==c.opacity?T(c):kk(c,{width:b.width,height:b.height,"z-index":199})}var c=Ki(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);ui(a,d,e)};
f.Mr=function(a){this.eq=a;this.vo(a&&this.ea)};f.vo=function(a){var b=Ia(this.U()+"-title-draggable").split(" "),c=this.Sz();this.a()&&(a?Wk(c,b):Yk(c,b));a&&!this.Sa?(this.Sa=new Zl(this.a(),this.md),Wk(c,b),G(this.Sa,"start",this.Nr,!1,this)):!a&&this.Sa&&(this.Sa.g(),this.Sa=null)};f.CC=function(){this.Nr()};
f.Nr=function(){var a=li(this.M()),b=Mh(a)||window;if(null!=this.a()){var a=Ki(this.a().parentNode),b=Kh(b||window),c=Ki(this.a());"fixed"==ti(this.a())?am(this.Sa,new ph(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):am(this.Sa,new ph(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))}};f.Px=function(a){var b=S("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":Rm.CSS.Rk});null==this.Jn&&(this.Jn=[]);this.Jn.push(b);this.Ga().appendChild(b);null!=a&&(b.src=a);return b};
f.Hj=function(a){var b=S("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":Rm.CSS.Tk},a);null==this.cj&&(this.cj=[]);this.cj.push(b);b.innerHTML=a||"";this.Ga().appendChild(b);return b};f.Ws=function(a){var b=S("div",{id:"ErrorSub_"+B(),"class":Rm.CSS.WD});b.innerHTML=a;this.Ga().appendChild(b);return b};f.JG=function(){return this.a()};
f.n=function(a){if(!this.ea)Rm.d.n.call(this,a);else if(null!=a&&this.a().parentNode!=a){Rh(a,this.a());return}Q(this.a(),"nrg-ui-dialog");this.mm=Gh("modal-dialog-title",this.a())[0];this.Ac=Gh("modal-dialog-content",this.a())[0];this.ht=Gh("modal-dialog-buttons",this.a())[0];this.vg=null;Sm(this);Q(this.ht,Rm.CSS.TC);Q(this.mm,Rm.CSS.TITLE);Q(this.Ac,Rm.CSS.Yg);Rm.d.Mr.call(this,!1);this.Mr(!0)};
f.$=function(a){null!=this.a()&&(null==this.yk&&(this.yk=wi(this.a())),this.wa()&&!1==a?(this.yk=wi(this.a()),Rm.d.$.call(this,a)):this.wa()||!0!=a||(Rm.d.$.call(this,a),ui(this.a(),this.yk)))};f.Jv=function(){var a;a=this.Ga();a=Ki(a);Hi(this.a(),a.width+20,a.height+20)};f.eH=function(){return this.cj};
f.f=function(){Rm.d.f.call(this);delete this.ht;delete this.mm;delete this.Ac;delete this.vg;delete this.Sp;null!=this.eB&&(T(this.eB),delete this.eB);null!=this.cj&&(D(this.cj,function(a){T(a);delete a}),delete this.cj);null!=this.Jn&&(D(this.Jn,function(a){T(a);delete a}),delete this.Jn);null!=this.yk&&(sb(this.yk),delete this.yk)};v("nrg.ui.Dialog.ID_PREFIX",Rm.ID_PREFIX);v("nrg.ui.Dialog.EventType",{EM:"d",CLOSED:"e",KL:"f"});v("nrg.ui.Dialog.prototype.setMouseoverClass",Rm.prototype.Qv);
v("nrg.ui.Dialog.prototype.addTitleClass",Rm.prototype.ay);v("nrg.ui.Dialog.prototype.addContentClass",Rm.prototype.JE);v("nrg.ui.Dialog.prototype.addCloseButtonClass",Rm.prototype.GE);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",Rm.prototype.HE);v("nrg.ui.Dialog.prototype.addCloseSpanClass",Rm.prototype.Nx);v("nrg.ui.Dialog.prototype.addButtonsClass",Rm.prototype.FE);v("nrg.ui.Dialog.prototype.applyFadeTransitions",Rm.prototype.TE);v("nrg.ui.Dialog.prototype.moveToCorner",Rm.prototype.er);
v("nrg.ui.Dialog.prototype.center",Rm.prototype.Ae);v("nrg.ui.Dialog.prototype.setDraggable",Rm.prototype.Mr);v("nrg.ui.Dialog.prototype.updateLimits",Rm.prototype.CC);v("nrg.ui.Dialog.prototype.addImage",Rm.prototype.Px);v("nrg.ui.Dialog.prototype.addText",Rm.prototype.Hj);v("nrg.ui.Dialog.prototype.addSubText",Rm.prototype.Ws);v("nrg.ui.Dialog.prototype.getOverlay",Rm.prototype.JG);v("nrg.ui.Dialog.prototype.render",Rm.prototype.n);v("nrg.ui.Dialog.prototype.setVisible",Rm.prototype.$);
v("nrg.ui.Dialog.prototype.getTextElements",Rm.prototype.eH);v("nrg.ui.Dialog.prototype.resizeToContents",Rm.prototype.Jv);v("nrg.ui.Dialog.prototype.disposeInternal",Rm.prototype.f);function Tm(){Rm.call(this);Im(this,null)}w(Tm,Rm);v("nrg.ui.ErrorDialog",Tm);Tm.ID_PREFIX="nrg.ui.ErrorDialog";Tm.CSS={dx:"nrg-ui-errordialog",Rk:"nrg-ui-errordialog-image",Tk:"nrg-ui-errordialog-text"};Tm.prototype.Al=null;Tm.prototype.Hj=function(a){Tm.d.Hj.call(this,a);a=this.cj;Q(a[a.length-1],Tm.CSS.Tk)};Tm.prototype.n=function(a){Tm.d.n.call(this,a);Q(this.a(),Tm.CSS.dx);null==this.Al&&(this.Al=this.Px(serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png"),Q(this.Al,Tm.CSS.Rk),this.Ae())};
Tm.prototype.f=function(){Tm.d.f.call(this);null!=this.Al.parentNode&&T(this.Al);delete this.Al};v("nrg.ui.ErrorDialog.ID_PREFIX",Tm.ID_PREFIX);v("nrg.ui.ErrorDialog.CSS",Tm.CSS);v("nrg.ui.ErrorDialog.prototype.addText",Tm.prototype.Hj);v("nrg.ui.ErrorDialog.prototype.disposeInternal",Tm.prototype.f);function Um(a,b,c,d){ma(this);this.url=a;this.document=b;this.files=d}w(Um,tl);v("gxnat.slicerNode.Mrml",Um);function Vm(a,b){ma(this);this.file=a;this.fe=b}w(Vm,tl);v("gxnat.slicerNode.Displayable",Vm);function Wm(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function Xm(a,b,c){ma(this);this.position=a;this.qL=b;this.focus=c}w(Xm,tl);v("gxnat.slicerNode.Camera",Xm);function Ym(a,b,c,d,e,h){ma(this);this.position=a;this.color=b;this.name=h}w(Ym,tl);v("gxnat.slicerNode.Annotations",Ym);function Zm(){ma(this)}w(Zm,tl);v("gxnat.slicerNode.Layout",Zm);M.F={};v("gxnat.slicerUtils",M.F);M.F.Nw="/scripts/viewer/xiv/vis/GenericColorTable.txt";M.F.kz=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ea(a[c],".mrml")&&b.push(a[c]);return b};M.F.au=function(a,b){M.get(a,function(a){b(new Wm(a))},"text")};M.F.Lz=function(a,b,c){a=g(a)?a:[a];var d=M.F.kz(a),e=[],h=0;D(d,function(b){M.F.au(b,function(l){h++;e.push(new Um(b,l,0,a));h==d.length&&c(e)})})};
M.F.Ry=function(a,b,c){M.F.pz(a,b,function(b){c(new Gl(a,M.F.tz(a),M.F.qz(a),M.F.Gz(a),b,M.F.Xz(a),M.F.Kz(a),null))})};M.F.Nz=function(a,b){var c=[],d=[],e=0;D(a,function(a){c=M.F.Oz(a.document);D(c,function(k){M.F.Ry(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};M.F.xz=function(a,b){a=r(a)?M.F.au(a):a;var c=[];D(a.getElementsByTagName(b),function(a){c.push(a)});return c};M.F.Oz=function(a){return M.F.xz(a,"SceneView")};
M.F.tz=function(a){var b=a.getElementsByTagName("Camera").length-1,c=a.getElementsByTagName("Camera")[b].getAttribute("position"),d=a.getElementsByTagName("Camera")[b].getAttribute("viewUp");a=a.getElementsByTagName("Camera")[b].getAttribute("focalPoint");return new Xm(sl(c),sl(d),sl(a))};M.F.Rz=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
M.F.qz=function(a){return new Fl(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};M.F.Gz=function(a){return new Zm(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
M.F.Xl=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};M.F.eG=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Xa(b,"!",Gk(c),"/",Gk(a))};
M.F.pz=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,m,q="rgb(255,0,0)",p="",t="",s="",z=0,y,I;0==a.length?c(null):(D(a,function(a){k.push(M.F.Xl(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):D(k,function(a){M.get(a,function(a){l++;D(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){m=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
s=n[11];q=[1,0,0];t=p="";z=0;for(len=e.length;z<len;z++)if(y=e[z],p=y.getAttribute("id"),p===n[0].replace("_","")){t=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(I=d[z],p=I.getAttribute("id"),p===t){q=sl(I.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new Ym(m,q,0,0,0,s))}});l==k.length&&c(h)},"text")}))};
M.F.Vt=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;D(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new Vm(h.getAttribute("fileName"),a));break}});return d};M.F.bG=function(){return null};
M.F.Xz=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=M.F.Vt(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";D(c,function(a){k=a.fe.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(D(d,function(b){b.getAttribute("id")==k&&(a.mn=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.nt=serverRoot+M.F.Nw:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";D(e,function(a){l=a.fe.getAttribute("attributes").split(";");D(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],D(h,function(b){b.fe.getAttribute("id")==refVol&&(b.Ig=a)}.bind(this)))}.bind(this))});D(h,function(c){c.Xf=new Dl(a,c.fe,b);c.Ig&&(c.Xf.Ig=c.Ig,delete c.Ig)});return h};M.F.Kz=function(a){var b=M.F.Vt(a,"Model","ModelStorage");D(b,function(b){b.Xf=new vl(a,b.fe)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",M.F.Nw);
v("gxnat.slicerUtils.extractMrmls",M.F.kz);v("gxnat.slicerUtils.getMrmlAsXml",M.F.au);v("gxnat.slicerUtils.getMrmlNodes",M.F.Lz);v("gxnat.slicerUtils.createSceneViewProperties",M.F.Ry);v("gxnat.slicerUtils.getSceneViewNodes",M.F.Nz);v("gxnat.slicerUtils.getElementsFromMrml",M.F.xz);v("gxnat.slicerUtils.getSceneViewsFromMrml",M.F.Oz);v("gxnat.slicerUtils.getCameraFromSceneView",M.F.tz);v("gxnat.slicerUtils.getThumbnail",M.F.Rz);v("gxnat.slicerUtils.mrmlColorToRgb",M.F.EO);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",M.F.qz);v("gxnat.slicerUtils.getLayoutFromSceneView",M.F.Gz);v("gxnat.slicerUtils.matchFileToSet",M.F.Xl);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",M.F.eG);v("gxnat.slicerUtils.getAnnotations",M.F.pz);v("gxnat.slicerUtils.getDisplayables",M.F.Vt);v("gxnat.slicerUtils.getFibers",M.F.bG);v("gxnat.slicerUtils.getVolumes",M.F.Xz);v("gxnat.slicerUtils.getMeshes",M.F.Kz);function bn(a,b,c){this.Fh=[];Nl.call(this,"Slicer Scenes",a,b);c&&c(this)}w(bn,Nl);v("gxnat.vis.Slicer",bn);var cn=["jpeg","jpg","png","gif"];f=bn.prototype;f.tn="resources/Slicer/files";f.jq="?listContents=true";f.sn="File Name";f.Ii=function(a){this.Fi?dn(this,a):Xl.d.Ii.call(this,function(){this.bk(function(){this.fm();dn(this,a)}.bind(this))}.bind(this))};function dn(a,b){M.F.Lz(a.Fh,0,function(a){M.F.Nz(a,function(d){this.My(d,a,b)}.bind(this))}.bind(a))}
f.My=function(a,b,c){this.II=b;this.BK=a;var d,e,h,k;D(this.BK,function(a){d=[a.vL||[],a.BI||[],a.FF||[]];e=[];D(d,function(a){D(a,function(a){h=M.F.Xl(Gk(a.file),this.Fh);a.Xf instanceof Dl&&a.Xf.Ig&&(a.Xf.labelMapFile=M.F.Xl(a.Xf.Ig.file,this.Fh),null!=a.Xf.Ig.nt&&null==M.F.Xl(a.Xf.Ig.nt,this.Fh)&&(a.Xf.colorTableFile=a.Xf.Ig.nt));e.push(new Jl(h,a.Xf))}.bind(this))}.bind(this));k=new Kl(e);k.Eo(M.F.Xl(M.F.Rz(a.element,this.II[0].document),this.Fh));k.je(a.element.getAttribute("name"));k.Tv(a);
this.Zc.push(k)}.bind(this));c&&c(this)};f.bk=function(a){var b="",c=0,d=this.Fh.length;for(this.thumbnailFiles=[];c<d;c++)b=nj(this.Fh[c]),-1!=cn.indexOf(b)&&this.thumbnailFiles.push(this.Fh[c]);D(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=lj(mj(this.thumbnailFiles[c]))){this.Eo(this.thumbnailFiles[c]);break}a&&a(this)};f.mi=function(a){g(a)||(a=[a]);D(a,function(a){this.Fh.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",cn);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",bn.prototype.tn);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",bn.prototype.jq);v("gxnat.vis.Slicer.prototype.fileContentsKey",bn.prototype.sn);v("gxnat.vis.Slicer.prototype.getFileList",bn.prototype.Ii);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",bn.prototype.My);v("gxnat.vis.Slicer.prototype.getThumbnailImage",bn.prototype.bk);v("gxnat.vis.Slicer.prototype.addFiles",bn.prototype.mi);function en(){Ul.call(this);this.jg.push(this.Kv);this.jg.push(this.zK);this.jg.push(this.AK)}w(en,Ul);v("xiv.sampleData.Scans",en);
en.prototype.Kv=new Tl("src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 1","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample1/Sample1.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
en.prototype.zK=new Tl("src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 2","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample2/Sample2.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
en.prototype.AK=new Tl("src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 3","Total Frames":176,Type:"t2_spc_1mm_p2"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample3/Sample3.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function fn(a,b,c,d){uc.call(this);gn();hn();this.mp={h:Xl,XK:bn};this.Pc=null!=a?a:fn.States.ij;this.DI=b;this.xB=d;this.zr=Qg(d);this.wg=this.wg?this.wg:[];a="/"!==c[0]?"/"+c:c;-1===this.wg.indexOf(this.zr+a)&&this.wg.push(-1===a.indexOf(this.zr)?this.zr+a:a);1==this.wg.length&&(this.Ad=new Og(this.wg[0]))}w(fn,uc);v("xiv.start",fn);fn.ModalStates={qe:"fullscreen",Se:"popup",hs:"fullscreen-popup",lg:"windowed",ij:"demo",aD:"demp-fullscreen"};fn.States={ij:"demo",uM:"live"};
function gn(){Lf.IMA=[Mf,null]}function hn(){document.body.style.overflow="hidden"}f=fn.prototype;f.gs=B();f.py=300;f.fI=1E3;f.Fq=!1;f.Iq=!1;f.XB=function(){};f.xy=function(){jn(this);this.show();this.Pc==fn.States.ij?(T(this.Pa.W.Se),T(this.Pa.W.Pk),kn(this)):(this.Pa.jc(this.DI),ln(this))};f.MK=function(a){this.EI=a};function jn(a){a.Pa=new a.EI;a.Pa.JB(serverRoot);G(a.Pa,"g",a.iJ.bind(a));window.onresize=function(){null!=this.Pa&&this.Pa.k()}.bind(a)}
f.iJ=function(){this.Jd.FA(null,function(a){window.console.log("SUBN JH",a);D(a,function(a){mn(this,a);this.Pa.T.Uc()}.bind(this))}.bind(this))};f.show=function(){this.Pa.a().style.opacity=0;this.Pa.n();this.Pc!==fn.States.ij&&this.Pa.Mx();G(this.Pa.T.ma,"a",this.vv.bind(this));G(this.Pa.W.Se,"click",this.jF.bind(this));G(this.Pa.W.Pk,"click",this.g.bind(this));this.Pa.Ub.Qb(!0,0,this.fI);rk(this.Pa.a(),this.py)};
function kn(a){var b=a.Pa.T,c={slicer:(new Vl).jg,scan:(new en).jg},d,e=null;C(c,function(a,b){D(a,function(a){d="scan"==b?new this.mp.h:new this.mp.XK;d.mi(a.files);d.GB(!0);d.YB(a.CI);d.Eo(a.mw);nn(this,d,a.Pt);null==e&&(e=a.Pt);D(a.Pt,function(a){Hb(e,a)||e.push(a)})}.bind(this))}.bind(a));a=b.ma.nq(e);var h=[];D(a,function(a){null!=a&&(a.Wb.ni=0,a.Qb(!0),a=a.ti,a.style.opacity=0,h.push(a))});Nb(h,void 0,0,b.ma.a());tk(h,400,200)}
function ln(a){var b=a.Pa.T.ma,c=0;a.Pa.T&&G(a.Pa.T.ma,on,a.bK.bind(a));a.Jd=new Ug(a.wg[0]);a.Jd.CA(function(a){var e=mn(this,a);0==c&&(this.XH=a,this.mu=b.Ic[e[0]],b.uo(e[0]));1==c&&(this.Iq=!0,this.YH=a,this.Jq=this.mu.Ic[e[1]]);2==c&&(this.Fq=!0,this.Gq=a,this.oA=this.Jq.Ic[e[2]],ol([this.mu,this.Jq,this.oA]));c++}.bind(a))}
function pn(a,b){var c=a.Jd.un(b),d=a.Jd.rz(b),e=0;C(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}function mn(a,b){var c=a.Jd.sz(b),d=pn(a,b);qn(a,d,c);return d}function rn(a,b){a.Jd.BA(b.originalUrl,null,function(a){if(b.Jh("subjects")==this.Ad.Jh("subjects")&&this.Iq){var d=this.Ad.Jh("experiments");this.Gq=this.Jd.Gl(d);Kb(a,this.Gq);Nb(a,0,0,this.Gq);this.Iq=!1}D(a,function(a){mn(this,a)}.bind(this))}.bind(a))}
f.vv=function(a){if(null!=a.fe[this.gs])switch(a=new Og(a.fe[this.gs]),a.lq()){case "subjects":rn(this,a);break;case "experiments":sn(this,a.originalUrl)}};f.Nl=function(a){sk(this.Pa.a(),this.py,a)};f.g=function(){this.Nl(this.tF.bind(this))};
function sn(a,b){if(null==a.Eu)a.Eu=[];else if(-1<a.Eu.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Jd.un(a.Jd.Gl(b)),c=new Ml(c.projects[fh],c.subjects[fh],c.experiments[fh]);tn(a,b,function(){this.Eu.push(b);this.Fq&&(this.Fq=!1,C(this.Jq.Ic,function(){}.bind(this)))}.bind(a),c)}f.bK=function(a){var b=a.fe.Wb.ni;a.fe.Wb.ni=0;a.fe.Wb.ni=b};
f.jF=function(){var a=open(this.xB+"/scripts/viewer/xiv/popup.html?"+this.wg[0],"XImgView","width=1200,height=800");a.focus();var b=this.wg[0];a.onload=function(){a.AO(b,fn.ModalStates.Se,serverRoot)}.bind(this);this.g()};function tn(a,b,c,d){un(a,b,function(a){var b=a.Kh;vn(this,a,b,function(a){nn(this,a)}.bind(this));null!=d&&(this.nb[b].Ao(d.mK),this.nb[b].Co(d.aL),this.nb[b].wo(d.DF))}.bind(a),c)}
function qn(a,b,c){var d=a.Pa.T.ma;d.hn(b);zippyNodes=d.nq(b);D(zippyNodes,function(a,b){null==c||null==c[b]||null==a[this.gs]&&(a[this.gs]=c[b])}.bind(a))}function nn(a,b,c){var d=a.Pa.T;null!=d&&(null==c&&null!=a.Jd&&(c=pn(a,a.Jd.Gl(b.rn))),"Scans"!=b.ug&&c.push(b.ug),b.Ii(function(){if(0<b.Zc.length){var a=d.ui(b,c);if("Scans"!=b.ug){var h=d.ma.nq(c);0<c.length&&1<h.length&&d.Qb(c[c.length-1],h[h.length-2])}d.Nv(this.Pa.a());a.Ov(b.km);a.xw()}}.bind(a)))}
function vn(a,b,c,d){a.nb=a.nb?a.nb:{};null==a.nb[c]&&(a.nb[c]=b,d(b))}
f.tF=function(){fn.d.g.call(this);document.body.style.overflow="visible";C(this.nb,function(a,b){a.g();delete this.nb[b]}.bind(this));delete this.nb;this.Jd&&(this.Jd.g(),delete this.Jd);delete this.wg;delete this.xB;delete this.zr;delete this.rO;null!=this.Ad&&(this.Ad.g(),delete this.Ad);delete this.Fq;delete this.Iq;delete this.XH;delete this.YH;delete this.Gq;delete this.mu;delete this.Jq;delete this.oA;H(this.Pa);this.Pa.g();T(this.Pa.a());delete this.Pa};
function un(a,b,c,d){var e=mb(a.mp),h=0;C(a.mp,function(a){Sl(b,a,c,function(){h++;h===e&&null!=d&&d()})})}v("xiv.start.States",fn.States);v("xiv.start.loadCustomExtensions",gn);v("xiv.start.adjustDocumentStyle",hn);v("xiv.start.ModalStates",fn.ModalStates);v("xiv.start.checkForWebGL",fn.checkForWebGL);v("xiv.start.isCompatible",fn.gI);v("xiv.start.prototype.setServerRoot",fn.prototype.XB);v("xiv.start.prototype.setModalType",fn.prototype.MK);v("xiv.start.prototype.begin",fn.prototype.xy);
v("xiv.start.prototype.show",fn.prototype.show);v("xiv.start.prototype.hide",fn.prototype.Nl);v("xiv.start.prototype.dispose",fn.prototype.g);window["xiv.start.isCompatible"]=fn.gI;window["xiv.start.checkForWebGL"]=fn.checkForWebGL;window["xiv.start.ModalStates"]=fn.ModalStates;fn.prototype.setServerRoot=fn.prototype.XB;fn.prototype.begin=fn.prototype.xy;function wn(){Yc.call(this);this.Pn=[];this.lw=[];this.ro=[]}w(wn,Yc);f=wn.prototype;f.Pq=!1;f.Qq=!1;f.Qi=!1;f.tA=function(){return this.Qi};f.VB=function(a){this.Er=a};f.oa=function(){if(!this.Qi){for(var a,b=0;a=this.Pn[b];b++)xn(this,a);this.Qi=!0}};function xn(a,b){a.Pq&&(G(b.element,"mousedown",b.hf,!1,b),a.aw&&Vk(b.element,a.aw));a.Qq&&a.kw&&Vk(b.element,a.kw)}
function yn(a){for(var b,c=0;b=a.Pn[c];c++){var d=a;d.Pq&&(Sc(b.element,"mousedown",b.hf,!1,b),d.aw&&Xk(b.element,d.aw));d.Qq&&d.kw&&Xk(b.element,d.kw);b.g()}a.Pn.length=0}
f.Ko=function(a,b){if(!this.Ze)if(this.Ze=b,!1==this.dispatchEvent(new zn("dragstart",0,this.Ze)))this.Ze=null;else{var c=b.vi;this.Vj=this.ut(c);var d=Ch(c);d.body.appendChild(this.Vj);var e=this.Vj,h=Bi(c),c=Ui(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.Sa=new Zl(e);this.Sa.VB(this.Er);G(this.Sa,"drag",this.NA,!1,this);G(this.Sa,"end",this.Ci,!1,this);G(d.body,"selectstart",this.rC);this.jm=[];for(e=0;d=this.lw[e];e++)for(var k,
h=0;k=d.Pn[h];h++)for(var c=d,l=[k.element],n=this.jm,m=0;m<l.length;m++){var q=l[m],p,t=q;p=Bi(t);t=Ki(t);p=new mh(p.y,p.x+t.width,p.y+t.height,p.x);n.push(new An(p,c,k,q));Bn(this,p)}this.Qh||(this.Qh=new mh(0,0,0,0));for(e=0;d=this.ro[e];e++)d.qt=[],d.yB=d.o.scrollLeft,d.zB=d.o.scrollTop,h=Bi(d.o),c=Ki(d.o),d.nc=new mh(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.jm[e];e++)for(h=0;d=this.ro[h];h++)Zh(d.o,c.o)&&(d.qt.push(c),c.qo=d);this.Fj=null;for(e=0;d=this.ro[e];e++)G(d.o,"scroll",this.Iy,
!1,this);this.Sa.Ko(a);a.preventDefault()}};
f.Ci=function(a){var b=a.xF?null:this.Fj;if(b&&b.Gk){var c=a.clientX;a=a.clientY;var d=oi(Ah(this.Vj)),e=c+d.x,d=a+d.y,h;this.Po&&(h=this.Po(b.Bh,b.nc,e,d));this.dispatchEvent(new zn("drag",0,this.Ze,0,b.Bh,0,c,a));b.Gk.dispatchEvent(new zn("drop",0,this.Ze,0,b.Bh,0,c,a,0,0,h))}this.dispatchEvent(new zn("dragend",0,this.Ze));Sc(this.Sa,"drag",this.NA,!1,this);Sc(this.Sa,"end",this.Ci,!1,this);Sc(Ch(this.Ze.vi).body,"selectstart",this.rC);for(b=0;c=this.ro[b];b++)Sc(c.o,"scroll",this.Iy,!1,this),c.qt=
[];this.Sa.g();T(this.Vj);delete this.Ze;delete this.Vj;delete this.Sa;delete this.jm;delete this.Fj};
f.NA=function(a){var b,c=oi(Ah(this.Vj));b=new N(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Fj,h;if(e){this.Po&&e.Gk&&(h=this.Po(e.Bh,e.nc,c,d));if(e.nc.contains(b)&&h==this.Lx)return;e.Gk&&(this.dispatchEvent(new zn("dragout",0,this.Ze,0,e.Bh)),e.Gk.dispatchEvent(new zn("dragout",0,this.Ze,0,e.Bh,0,void 0,void 0,0,0,this.Lx)));this.Lx=h;this.Fj=null}if(this.Qh.contains(b)){a:{for(var k=0;e=this.jm[k];k++)if(e.nc.contains(b))if(e.qo){if(e.qo.nc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.Fj=b)&&e.Gk)this.Po&&(h=this.Po(e.Bh,e.nc,c,d)),c=new zn("dragover",0,this.Ze,0,e.Bh),c.bL=h,this.dispatchEvent(c),e.Gk.dispatchEvent(new zn("dragover",0,this.Ze,0,e.Bh,0,a.clientX,a.clientY,0,0,h));else if(!e){this.Be||(this.Be=new An(this.Qh.clone()));a=this.Be.nc;a.top=this.Qh.top;a.right=this.Qh.right;a.bottom=this.Qh.bottom;a.left=this.Qh.left;for(h=0;e=this.jm[h];h++)b=e.nc,e.qo&&(e=e.qo.nc,b=new mh(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.Fj=10<=(a.right-a.left)*(a.bottom-a.top)?this.Be:null}}};f.rC=function(){return!1};
f.Iy=function(a){for(var b=0,c;c=this.ro[b];b++)if(a.target==c.o){var d=c.zB-c.o.scrollTop,e=c.yB-c.o.scrollLeft;c.zB=c.o.scrollTop;c.yB=c.o.scrollLeft;this.Be&&this.Fj==this.Be&&(0<d?this.Be.nc.top+=d:this.Be.nc.bottom+=d,0<e?this.Be.nc.left+=e:this.Be.nc.right+=e);for(var h=0,k;k=c.qt[h];h++)k=k.nc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,Bn(this,k)}this.Sa.Zl(a)};
f.ut=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=S("table",null,S("tbody",null,b));break a;case "td":case "th":a=S("table",null,S("tbody",null,S("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.yF&&Vk(a,this.yF);return a};f.mq=function(){return this.Sa};
function Bn(a,b){if(1==a.jm.length)a.Qh=new mh(b.top,b.right,b.bottom,b.left);else{var c=a.Qh;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.f=function(){wn.d.f.call(this);yn(this)};function zn(a,b,c,d,e,h,k,l,n,m,q){Cc.call(this,a);this.dq=c;this.xl=e;this.clientX=k;this.clientY=l;this.bL=q}w(zn,Cc);zn.prototype.f=function(){};
function Cn(a,b){Yc.call(this);this.element=Dh(a);this.data=b;this.Na=null;this.oc=new Yi(this);yc(this,va(zc,this.oc));if(!this.element)throw Error("Invalid argument");}w(Cn,Yc);f=Cn.prototype;f.vi=null;f.hf=function(a){if(Hc(a)){var b=a.target;b&&(this.oc.B(b,"mousemove",this.MA,!1).B(b,"mouseout",this.MA,!1),this.oc.B(Ch(b),"mouseup",this.GI,!0),this.vi=b,this.dw=new N(a.clientX,a.clientY),a.preventDefault())}};f.yo=function(a){this.Na=a};
f.MA=function(a){var b=this.vi,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.dw.x)+Math.abs(a.clientY-this.dw.y)||b)this.oc.Yf(),this.Na.Ko(a,this)};f.GI=function(){this.oc.Yf();delete this.dw;this.vi=null};function An(a,b,c,d){this.nc=a;this.Gk=b;this.Bh=c;this.o=d}An.prototype.qo=null;function Dn(a,b){this.type=a;this.currentTarget=this.target=b||null}f=Dn.prototype;f.Wf=!1;f.defaultPrevented=!1;f.oo=!0;f.stopPropagation=function(){this.Wf=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.oo=!1};
function En(a){a=new Dn("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Ei(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.oo=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.Wf;d--){var e=b[d],h=a.type,k=new Fc(a,b[d]);gb(e)?Zc(e,h,!0,k):Vc(e,h,!0,k)}for(d=0;d<b.length&&!a.Wf;d++)e=b[d],h=a.type,k=new Fc(a,b[d]),gb(e)?Zc(e,h,!1,k):Vc(e,h,!1,k)};function Fn(a,b){if(!a)throw Error("Invalid class name "+a);if(!ja(b))throw Error("Invalid decorator function "+b);Gn[a]=b}var Hn={},Gn={};function In(){}var Jn;fa(In);var Kn={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=In.prototype;f.Bg=function(){};f.v=function(a){var b=a.M().v("div",this.ak(a).join(" "),a.getContent());Ln(this,a,b);return b};f.Ga=function(a){return a};f.Yj=function(a,b,c){if(a=a.a?a.a():a){var d=[b];E&&!nc("7")&&(d=Mn(Tk(a),b),d.push(b));(c?Wk:Yk)(a,d)}};f.ze=function(){return!0};
f.ub=function(a,b){b.id&&fj(a,b.id);var c=this.Ga(b);c&&c.firstChild?Nn(a,c.firstChild.nextSibling?Mb(c.childNodes):c.firstChild):a.Ac=null;var d=0,e=this.U(),h=this.U(),k=!1,l=!1,c=!1,n=Mb(Tk(b));D(n,function(a){k||a!=e?l||a!=h?d|=this.bu(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.N=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var m=a.Lf;m&&n.push.apply(n,m);if(E&&!nc("7")){var q=Mn(n);0<q.length&&(n.push.apply(n,q),c=!0)}if(!k||!l||m||c)b.className=n.join(" ");Ln(this,a,b);return b};
f.Sl=function(a){a.Fe()&&this.em(a.a(),!0);a.isEnabled()&&this.Yi(a,a.wa())};function On(a,b,c){if(a=c||a.Bg())c=b.getAttribute("role")||null,a!=c&&Qk(b,a)}function Ln(a,b,c){b.wa()||Rk(c,"hidden",!b.wa());b.isEnabled()||a.Ug(c,1,!b.isEnabled());Pn(b,8)&&a.Ug(c,8,!!(b.N&8));Pn(b,16)&&a.Ug(c,16,b.zh());Pn(b,64)&&a.Ug(c,64,!!(b.N&64))}f.so=function(a,b){Ri(a,!b,!E&&!ec)};f.em=function(a,b){this.Yj(a,this.U()+"-rtl",b)};f.Ah=function(a){var b;return Pn(a,32)&&(b=a.dc())?ei(b)&&fi(b):!1};
f.Yi=function(a,b){var c;if(Pn(a,32)&&(c=a.dc())){if(!b&&a.N&32){try{c.blur()}catch(d){}a.N&32&&a.ek(null)}(ei(c)&&fi(c))!=b&&di(c,b)}};f.$=function(a,b){Oi(a,b);a&&Rk(a,"hidden",!b)};f.jc=function(a,b,c){var d=a.a();if(d){var e=this.vn(b);e&&this.Yj(a,e,c);this.Ug(d,b,c)}};f.Ug=function(a,b,c){Jn||(Jn={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Jn[b];var d=a.getAttribute("role")||null;d&&(d=Kn[d]||b,b="checked"==b||"selected"==b?d:b);b&&Rk(a,b,c)};
f.Ek=function(a,b){var c=this.Ga(a);if(c&&(Sh(c),b))if(r(b))ai(c,b);else{var d=function(a){if(a){var b=Ch(c);c.appendChild(r(a)?b.createTextNode(a):a)}};g(b)?D(b,d):!ha(b)||"nodeType"in b?d(b):D(Mb(b),d)}};f.dc=function(a){return a.a()};f.U=function(){return"goog-control"};f.ak=function(a){var b=this.U(),c=[b],d=this.U();d!=b&&c.push(d);b=a.Il();for(d=[];b;){var e=b&-b;d.push(this.vn(e));b&=~e}c.push.apply(c,d);(a=a.Lf)&&c.push.apply(c,a);E&&!nc("7")&&c.push.apply(c,Mn(c));return c};
function Mn(a,b){var c=[];b&&(a=a.concat([b]));D([],function(d){!Eb(d,va(Hb,a))||b&&!Hb(d,b)||c.push(d.join("_"))});return c}f.vn=function(a){this.Rp||Qn(this);return this.Rp[a]};f.bu=function(a){if(!this.pC){this.Rp||Qn(this);var b=this.Rp,c={},d;for(d in b)c[b[d]]=d;this.pC=c}a=parseInt(this.pC[a],10);return isNaN(a)?0:a};function Qn(a){var b=a.U();b.replace(/\xa0|\s/g," ");a.Rp={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Rn(a,b){Yc.call(this);a&&this.ql(a,b)}w(Rn,Yc);f=Rn.prototype;f.o=null;f.Rq=null;f.su=null;f.Sq=null;f.Ge=-1;f.Ri=-1;f.at=!1;
var Sn={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Tn={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Un=E||gc&&nc("525"),Vn=ac&&fc;f=Rn.prototype;
f.vq=function(a){gc&&(17==this.Ge&&!a.ctrlKey||18==this.Ge&&!a.altKey||ac&&91==this.Ge&&!a.metaKey)&&(this.Ri=this.Ge=-1);-1==this.Ge&&(a.ctrlKey&&17!=a.keyCode?this.Ge=17:a.altKey&&18!=a.keyCode?this.Ge=18:a.metaKey&&91!=a.keyCode&&(this.Ge=91));Un&&!al(a.keyCode,this.Ge,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Ri=cl(a.keyCode),Vn&&(this.at=a.altKey))};f.IH=function(a){this.Ri=this.Ge=-1;this.at=a.altKey};
f.handleEvent=function(a){var b=a.Cc,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.Ri,d=13!=c&&27!=c?b.keyCode:0):gc&&"keypress"==a.type?(c=this.Ri,d=0<=b.charCode&&63232>b.charCode&&bl(c)?b.charCode:0):ec?(c=this.Ri,d=bl(c)?b.keyCode:0):(c=b.keyCode||this.Ri,d=b.charCode||0,Vn&&(e=this.at),ac&&63==d&&224==c&&(c=191));var h=c=cl(c),k=b.keyIdentifier;c?63232<=c&&c in Sn?h=Sn[c]:25==c&&a.shiftKey&&(h=9):k&&k in Tn&&(h=Tn[k]);a=h==this.Ge;this.Ge=h;b=new Wn(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.o};f.ql=function(a,b){this.Sq&&this.detach();this.o=a;this.Rq=G(this.o,"keypress",this,b);this.su=G(this.o,"keydown",this.vq,b,this);this.Sq=G(this.o,"keyup",this.IH,b,this)};f.detach=function(){this.Rq&&(Tc(this.Rq),Tc(this.su),Tc(this.Sq),this.Sq=this.su=this.Rq=null);this.o=null;this.Ri=this.Ge=-1};f.f=function(){Rn.d.f.call(this);this.detach()};function Wn(a,b,c,d){Fc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(Wn,Fc);function Xn(a,b,c){bj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ma(b);if(d=Hn[d])break;b=b.d?b.d.constructor:null}b=d?ja(d.Zd)?d.Zd():new d:null}this.pa=b;this.Ac=ca(a)?a:null}w(Xn,bj);f=Xn.prototype;f.Ac=null;f.N=0;f.Qo=39;f.Ym=255;f.Mo=0;f.tc=!0;f.Lf=null;f.gk=!0;f.Kp=!1;f.Dv=null;f.xo=function(a){this.ea&&a!=this.gk&&Yn(this,a);this.gk=a};f.dc=function(){return this.pa.dc(this)};f.oq=function(){return this.ib||(this.ib=new Rn)};f.Ma=function(){return this.pa};
f.Yj=function(a,b){b?a&&(this.Lf?Hb(this.Lf,a)||this.Lf.push(a):this.Lf=[a],this.pa.Yj(this,a,!0)):a&&this.Lf&&Kb(this.Lf,a)&&(0==this.Lf.length&&(this.Lf=null),this.pa.Yj(this,a,!1))};f.v=function(){var a=this.pa.v(this);this.o=a;On(this.pa,a,this.Ji());this.Kp||this.pa.so(a,!1);this.wa()||this.pa.$(a,!1)};f.Ji=function(){return this.Dv};f.Ga=function(){return this.pa.Ga(this.a())};f.ze=function(a){return this.pa.ze(a)};
f.Ud=function(a){this.o=a=this.pa.ub(this,a);On(this.pa,a,this.Ji());this.Kp||this.pa.so(a,!1);this.tc="none"!=a.style.display};f.Ya=function(){Xn.d.Ya.call(this);this.pa.Sl(this);if(this.Qo&-2&&(this.gk&&Yn(this,!0),Pn(this,32))){var a=this.dc();if(a){var b=this.oq();b.ql(a);this.Za().B(b,"key",this.Eg).B(a,"focus",this.fk).B(a,"blur",this.ek)}}};
function Yn(a,b){var c=a.Za(),d=a.a();b?(c.B(d,"mouseover",a.hk).B(d,"mousedown",a.Fg).B(d,"mouseup",a.Nf).B(d,"mouseout",a.xq),a.Cn!=ea&&c.B(d,"contextmenu",a.Cn),E&&c.B(d,"dblclick",a.Zz)):(c.kb(d,"mouseover",a.hk).kb(d,"mousedown",a.Fg).kb(d,"mouseup",a.Nf).kb(d,"mouseout",a.xq),a.Cn!=ea&&c.kb(d,"contextmenu",a.Cn),E&&c.kb(d,"dblclick",a.Zz))}f.pc=function(){Xn.d.pc.call(this);this.ib&&this.ib.detach();this.wa()&&this.isEnabled()&&this.pa.Yi(this,!1)};
f.f=function(){Xn.d.f.call(this);this.ib&&(this.ib.g(),delete this.ib);delete this.pa;this.Lf=this.Ac=null};f.getContent=function(){return this.Ac};f.Ek=function(a){this.pa.Ek(this.a(),a);this.Ac=a};function Nn(a,b){a.Ac=b}f.kq=function(){var a=this.getContent();if(!a)return"";a=r(a)?a:g(a)?Cb(a,ii).join(""):gi(a);return Ha(a)};f.em=function(a){Xn.d.em.call(this,a);var b=this.a();b&&this.pa.em(b,a)};f.so=function(a){this.Kp=a;var b=this.a();b&&this.pa.so(b,a)};f.wa=function(){return this.tc};
f.$=function(a,b){if(b||this.tc!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.pa.$(c,a);this.isEnabled()&&this.pa.Yi(this,a);this.tc=a;return!0}return!1};f.isEnabled=function(){return!(this.N&1)};f.ic=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Zn(this,1,!a)||(a||(this.setActive(!1),this.$f(!1)),this.wa()&&this.pa.Yi(this,a),this.jc(1,!a))};f.$f=function(a){Zn(this,2,a)&&this.jc(2,a)};f.Gg=function(){return!!(this.N&4)};
f.setActive=function(a){Zn(this,4,a)&&this.jc(4,a)};f.Bo=function(a){Zn(this,8,a)&&this.jc(8,a)};f.zh=function(){return!!(this.N&16)};f.lf=function(a){Zn(this,16,a)&&this.jc(16,a)};f.Rb=function(a){Zn(this,64,a)&&this.jc(64,a)};f.Il=function(){return this.N};f.jc=function(a,b){Pn(this,a)&&b!=!!(this.N&a)&&(this.pa.jc(this,a,b),this.N=b?this.N|a:this.N&~a)};function Pn(a,b){return!!(a.Qo&b)}
f.Xc=function(a,b){if(this.ea&&this.N&a&&!b)throw Error("Component already rendered");!b&&this.N&a&&this.jc(a,!1);this.Qo=b?this.Qo|a:this.Qo&~a};function $n(a,b){return!!(a.Ym&b)&&Pn(a,b)}function Zn(a,b,c){return Pn(a,b)&&!!(a.N&b)!=c&&(!(a.Mo&b)||a.dispatchEvent(dj(b,c)))&&!a.Tj}f.hk=function(a){(!a.relatedTarget||!Zh(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&$n(this,2)&&this.$f(!0)};
f.xq=function(a){a.relatedTarget&&Zh(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||($n(this,4)&&this.setActive(!1),$n(this,2)&&this.$f(!1))};f.Cn=ea;f.Fg=function(a){this.isEnabled()&&($n(this,2)&&this.$f(!0),Hc(a)&&($n(this,4)&&this.setActive(!0),this.pa.Ah(this)&&this.dc().focus()));!this.Kp&&Hc(a)&&a.preventDefault()};f.Nf=function(a){this.isEnabled()&&($n(this,2)&&this.$f(!0),this.Gg()&&this.vk(a)&&$n(this,4)&&this.setActive(!1))};f.Zz=function(a){this.isEnabled()&&this.vk(a)};
f.vk=function(a){$n(this,16)&&this.lf(!this.zh());$n(this,8)&&this.Bo(!0);$n(this,64)&&this.Rb(!(this.N&64));var b=new Cc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Av=a.Av);return this.dispatchEvent(b)};f.fk=function(){$n(this,32)&&Zn(this,32,!0)&&this.jc(32,!0)};f.ek=function(){$n(this,4)&&this.setActive(!1);$n(this,32)&&Zn(this,32,!1)&&this.jc(32,!1)};
f.Eg=function(a){return this.wa()&&this.isEnabled()&&this.Mf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.Mf=function(a){return 13==a.keyCode&&this.vk(a)};if(!ja(Xn))throw Error("Invalid component class "+Xn);if(!ja(In))throw Error("Invalid renderer class "+In);var ao=ma(Xn);Hn[ao]=In;Fn("goog-control",function(){return new Xn(null)});function bo(){this.Ey=[]}w(bo,In);fa(bo);function co(a,b){var c=a.Ey[b];if(!c){switch(b){case 0:c=a.U()+"-highlight";break;case 1:c=a.U()+"-checkbox";break;case 2:c=a.U()+"-content"}a.Ey[b]=c}return c}f=bo.prototype;f.Bg=function(){return"menuitem"};f.v=function(a){var b=a.M().v("div",this.ak(a).join(" "),eo(this,a.getContent(),a.M()));fo(this,a,b,Pn(a,8)||Pn(a,16));return b};f.Ga=function(a){return a&&a.firstChild};
f.ub=function(a,b){var c=Vh(b),d=co(this,2);c&&Uk(c,d)||b.appendChild(eo(this,b.childNodes,a.M()));Uk(b,"goog-option")&&(a.Kr(!0),this.Kr(a,b,!0));return bo.d.ub.call(this,a,b)};f.Ek=function(a,b){var c=this.Ga(a),d=go(this,a)?c.firstChild:null;bo.d.Ek.call(this,a,b);d&&!go(this,a)&&c.insertBefore(d,c.firstChild||null)};function eo(a,b,c){a=co(a,2);return c.v("div",a,b)}f.WB=function(a,b,c){a&&b&&fo(this,a,b,c)};f.Kr=function(a,b,c){a&&b&&fo(this,a,b,c)};
function go(a,b){var c=a.Ga(b);if(c){var c=c.firstChild,d=co(a,1);return!!c&&Yh(c)&&Uk(c,d)}return!1}function fo(a,b,c,d){On(a,c,b.Ji());Ln(a,b,c);d!=go(a,c)&&(Zk(c,"goog-option",d),c=a.Ga(c),d?(a=co(a,1),c.insertBefore(b.M().v("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.vn=function(a){switch(a){case 2:return co(this,0);case 16:case 8:return"goog-option-selected";default:return bo.d.vn.call(this,a)}};
f.bu=function(a){var b=co(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return bo.d.bu.call(this,a)}};f.U=function(){return"goog-menuitem"};function ho(a,b,c,d){Xn.call(this,a,d||bo.Zd(),c);this.J(b)}w(ho,Xn);f=ho.prototype;f.K=function(){var a=this.Mu;return null!=a?a:this.kq()};f.J=function(a){this.Mu=a};f.Xc=function(a,b){ho.d.Xc.call(this,a,b);switch(a){case 8:this.zh()&&!b&&this.lf(!1);var c=this.a();c&&this.Ma().WB(this,c,b);break;case 16:(c=this.a())&&this.Ma().Kr(this,c,b)}};f.WB=function(a){this.Xc(8,a)};f.Kr=function(a){this.Xc(16,a)};
f.kq=function(){var a=this.getContent();return g(a)?(a=Cb(a,function(a){return Yh(a)&&(Uk(a,"goog-menuitem-accel")||Uk(a,"goog-menuitem-mnemonic-separator"))?"":ii(a)}).join(""),Ha(a)):ho.d.kq.call(this)};f.Nf=function(a){var b=this.getParent();if(b){var c=b.dB;b.dB=null;if(b=c&&u(a.clientX))b=new N(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}ho.d.Nf.call(this,a)};f.Mf=function(a){return a.keyCode==this.LA&&this.vk(a)?!0:ho.d.Mf.call(this,a)};f.GG=function(){return this.LA};
Fn("goog-menuitem",function(){return new ho(null)});ho.prototype.Ji=function(){return Pn(this,16)?"menuitemcheckbox":Pn(this,8)?"menuitemradio":ho.d.Ji.call(this)};function io(a){this.ty=a}fa(io);f=io.prototype;f.Bg=function(){return this.ty};function jo(a,b){a&&(a.tabIndex=b?0:-1)}f.v=function(a){return a.M().v("div",this.ak(a).join(" "))};f.Ga=function(a){return a};f.ze=function(a){return"DIV"==a.tagName};f.ub=function(a,b){b.id&&fj(a,b.id);var c=this.U(),d=!1,e=Tk(b);e&&D(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.ic(!1):b==c+"-horizontal"?a.Nh(ko):b==c+"-vertical"&&a.Nh(lo))},this);d||Vk(b,c);mo(this,a,this.Ga(b));return b};
function mo(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.Ut(d);h&&(h.o=d,b.isEnabled()||h.ic(!1),b.Wm(h),h.ub(d))}else d.nodeValue&&""!=Ia(d.nodeValue)||c.removeChild(d);d=e}}f.Ut=function(a){a:{var b;a=Tk(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Gn?Gn[b]():null){a=b;break a}a=null}return a};f.Sl=function(a){a=a.a();Ri(a,!0,fc);E&&(a.hideFocus=!0);var b=this.Bg();b&&Qk(a,b)};f.dc=function(a){return a.a()};f.U=function(){return"goog-container"};
f.ak=function(a){var b=this.U(),c=[b,a.Pb()==ko?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function no(){}w(no,In);fa(no);no.prototype.v=function(a){return a.M().v("div",this.U())};no.prototype.ub=function(a,b){b.id&&fj(a,b.id);if("HR"==b.tagName){var c=b;b=this.v(a);Th(b,c);T(c)}else Vk(b,this.U());return b};no.prototype.Ek=function(){};no.prototype.U=function(){return"goog-menuseparator"};function oo(a,b){Xn.call(this,null,a||no.Zd(),b);this.Xc(1,!1);this.Xc(2,!1);this.Xc(4,!1);this.Xc(32,!1);this.N=1}w(oo,Xn);oo.prototype.Ya=function(){oo.d.Ya.call(this);Qk(this.a(),"separator")};Fn("goog-menuseparator",function(){return new oo});function po(a){this.ty=a||"menu"}w(po,io);fa(po);f=po.prototype;f.ze=function(a){return"UL"==a.tagName||po.d.ze.call(this,a)};f.Ut=function(a){return"HR"==a.tagName?new oo:po.d.Ut.call(this,a)};f.Mj=function(a,b){return Zh(a.a(),b)};f.U=function(){return"goog-menu"};f.Sl=function(a){po.d.Sl.call(this,a);Rk(a.a(),"haspopup","true")};function qo(a,b,c,d,e,h,k,l,n){var m,q;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==ti(m)||(q=Bi(m),p||(p=(p=Ci(m))&&fc?-m.scrollLeft:!p||E&&nc("8")||"visible"==si(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,q=lh(q,new N(p,m.scrollTop))))}m=q||new N;q=Mi(a);(p=Ai(a))&&q.rA(new ph(p.left,p.top,p.right-p.left,p.bottom-p.top));var p=Ah(a),t=Ah(c);if(p.na!=t.na){var s=p.na.body,t=ni(t),z=new N(0,0),y=Mh(Ch(s)),I=s;do{var R=y==t?Bi(I):Fi(I);z.x+=
R.x;z.y+=R.y}while(y&&y!=t&&(I=y.frameElement)&&(y=y.parent));s=lh(z,Bi(s));E&&!mi(p)&&(s=lh(s,oi(p)));q.left+=s.x;q.top+=s.y}a=ro(a,b);b=new N(a&2?q.left+q.width:q.left,a&1?q.top+q.height:q.top);b=lh(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var O;if(k)if(n)O=n;else if(O=Ai(c))O.top-=m.y,O.right-=m.x,O.bottom-=m.y,O.left-=m.x;return so(b,c,d,h,O,k,l)}
function so(a,b,c,d,e,h,k){a=a.clone();var l=0,n=ro(b,c);c=Ki(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;ui(b,a);oh(c,k)||(e=mi(Ah(Ch(b))),!E||e&&nc("8")?
(b=b.style,fc?b.MozBoxSizing="border-box":gc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=Ui(b,"padding"),b=Xi(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function ro(a,b){return(b&4&&Ci(a)?b^2:b)&-5};var to,uo;uo=to=!1;var vo=Sb;vo&&(-1!=vo.indexOf("Firefox")||-1!=vo.indexOf("Camino")||(-1!=vo.indexOf("iPhone")||-1!=vo.indexOf("iPod")?to=!0:-1!=vo.indexOf("iPad")&&(uo=!0)));var wo=to,xo=uo;Fn("goog-menuseparator",function(){return new oo});function yo(a,b,c){bj.call(this,c);this.pa=b||io.Zd();this.Da=a||lo}w(yo,bj);var ko="horizontal",lo="vertical";f=yo.prototype;f.tu=null;f.ib=null;f.pa=null;f.Da=null;f.tc=!0;f.Bc=!0;f.Ot=!0;f.Ee=-1;f.rc=null;f.Eh=!1;f.OE=!1;f.fK=!0;f.oh=null;f.dc=function(){return this.tu||this.pa.dc(this)};f.oq=function(){return this.ib||(this.ib=new Rn(this.dc()))};f.Ma=function(){return this.pa};f.v=function(){this.o=this.pa.v(this)};f.Ga=function(){return this.pa.Ga(this.a())};f.ze=function(a){return this.pa.ze(a)};
f.Ud=function(a){this.o=this.pa.ub(this,a);"none"==a.style.display&&(this.tc=!1)};f.Ya=function(){yo.d.Ya.call(this);hj(this,function(a){a.ea&&zo(this,a)},this);var a=this.a();this.pa.Sl(this);this.$(this.tc,!0);this.Za().B(this,"enter",this.hu).B(this,"highlight",this.iu).B(this,"unhighlight",this.ju).B(this,"open",this.MH).B(this,"close",this.DH).B(a,"mousedown",this.Fg).B(Ch(a),"mouseup",this.FH).B(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.CH);this.Ah()&&Ao(this,!0)};
function Ao(a,b){var c=a.Za(),d=a.dc();b?c.B(d,"focus",a.fk).B(d,"blur",a.ek).B(a.oq(),"key",a.Eg):c.kb(d,"focus",a.fk).kb(d,"blur",a.ek).kb(a.oq(),"key",a.Eg)}f.pc=function(){this.Pg(-1);this.rc&&this.rc.Rb(!1);this.Eh=!1;yo.d.pc.call(this)};f.f=function(){yo.d.f.call(this);this.ib&&(this.ib.g(),this.ib=null);this.pa=this.rc=this.oh=this.tu=null};f.hu=function(){return!0};
f.iu=function(a){var b=kj(this,a.target);if(-1<b&&b!=this.Ee){var c=Bo(this);c&&c.$f(!1);this.Ee=b;c=Bo(this);this.Eh&&c.setActive(!0);this.fK&&this.rc&&c!=this.rc&&(Pn(c,64)?c.Rb(!0):this.rc.Rb(!1))}b=this.a();null!=a.target.a()&&Rk(b,"activedescendant",a.target.a().id)};f.ju=function(a){a.target==Bo(this)&&(this.Ee=-1);this.a().removeAttribute("aria-activedescendant")};f.MH=function(a){(a=a.target)&&a!=this.rc&&a.getParent()==this&&(this.rc&&this.rc.Rb(!1),this.rc=a)};
f.DH=function(a){a.target==this.rc&&(this.rc=null)};f.Fg=function(a){this.Bc&&(this.Eh=!0);var b=this.dc();b&&ei(b)&&fi(b)?b.focus():a.preventDefault()};f.FH=function(){this.Eh=!1};f.CH=function(a){var b;a:{b=a.target;if(this.oh)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.oh){b=this.oh[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Fg(a);break;case "mouseup":b.Nf(a);break;case "mouseover":b.hk(a);break;case "mouseout":b.xq(a);break;case "contextmenu":b.Cn(a)}};
f.fk=function(){};f.ek=function(){this.Pg(-1);this.Eh=!1;this.rc&&this.rc.Rb(!1)};f.Eg=function(a){return this.isEnabled()&&this.wa()&&(0!=ij(this)||this.tu)&&this.Mf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.Mf=function(a){var b=Bo(this);if(b&&"function"==typeof b.Eg&&b.Eg(a)||this.rc&&this.rc!=b&&"function"==typeof this.rc.Eg&&this.rc.Eg(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.Ah())this.dc().blur();else return!1;break;case 36:Co(this);break;case 35:Do(this);break;case 38:if(this.Da==lo)Eo(this);else return!1;break;case 37:if(this.Da==ko)this.Fe()?Fo(this):Eo(this);else return!1;break;case 40:if(this.Da==lo)Fo(this);else return!1;break;case 39:if(this.Da==
ko)this.Fe()?Eo(this):Fo(this);else return!1;break;default:return!1}return!0};function zo(a,b){var c=b.a(),c=c.id||(c.id=ej(b));a.oh||(a.oh={});a.oh[c]=b}f.Wm=function(a,b){yo.d.Wm.call(this,a,b)};f.Vs=function(a,b,c){a.Mo|=2;a.Mo|=64;!this.Ah()&&this.OE||a.Xc(32,!1);a.xo(!1);yo.d.Vs.call(this,a,b,c);a.ea&&this.ea&&zo(this,a);b<=this.Ee&&this.Ee++};
f.removeChild=function(a,b){if(a=r(a)?gj(this,a):a){var c=kj(this,a);-1!=c&&(c==this.Ee?(a.$f(!1),this.Ee=-1):c<this.Ee&&this.Ee--);(c=a.a())&&c.id&&this.oh&&tb(this.oh,c.id)}a=yo.d.removeChild.call(this,a,b);a.xo(!0);return a};f.Pb=function(){return this.Da};f.Nh=function(a){if(this.a())throw Error("Component already rendered");this.Da=a};f.wa=function(){return this.tc};
f.$=function(a,b){if(b||this.tc!=a&&this.dispatchEvent(a?"show":"hide")){this.tc=a;var c=this.a();c&&(Oi(c,a),this.Ah()&&jo(this.dc(),this.Bc&&this.tc),b||this.dispatchEvent(this.tc?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Bc};
f.ic=function(a){this.Bc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Bc=!0,hj(this,function(a){a.JC?delete a.JC:a.ic(!0)})):(hj(this,function(a){a.isEnabled()?a.ic(!1):a.JC=!0}),this.Eh=this.Bc=!1),this.Ah()&&jo(this.dc(),a&&this.tc))};f.Ah=function(){return this.Ot};f.Yi=function(a){a!=this.Ot&&this.ea&&Ao(this,a);this.Ot=a;this.Bc&&this.tc&&jo(this.dc(),a)};f.Pg=function(a){(a=jj(this,a))?a.$f(!0):-1<this.Ee&&Bo(this).$f(!1)};f.$f=function(a){this.Pg(kj(this,a))};
function Bo(a){return jj(a,a.Ee)}function Co(a){Go(a,function(a,c){return(a+1)%c},ij(a)-1)}function Do(a){Go(a,function(a,c){a--;return 0>a?c-1:a},0)}function Fo(a){Go(a,function(a,c){return(a+1)%c},a.Ee)}function Eo(a){Go(a,function(a,c){a--;return 0>a?c-1:a},a.Ee)}function Go(a,b,c){c=0>c?kj(a,a.rc):c;var d=ij(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=jj(a,c);if(h&&a.Cy(h)){a.Pg(c);break}e++;c=b.call(a,c,d)}}f.Cy=function(a){return a.wa()&&a.isEnabled()&&Pn(a,2)};function Ho(){}w(Ho,In);fa(Ho);Ho.prototype.U=function(){return"goog-menuheader"};function Io(a,b,c){Xn.call(this,a,c||Ho.Zd(),b);this.Xc(1,!1);this.Xc(2,!1);this.Xc(4,!1);this.Xc(32,!1);this.N=1}w(Io,Xn);Fn("goog-menuheader",function(){return new Io(null)});function Jo(a,b){yo.call(this,lo,b||po.Zd(),a);this.Yi(!1)}w(Jo,yo);f=Jo.prototype;f.$s=!0;f.PE=!1;f.U=function(){return this.Ma().U()};f.Mj=function(a){if(this.Ma().Mj(this,a))return!0;for(var b=0,c=ij(this);b<c;b++){var d=jj(this,b);if("function"==typeof d.Mj&&d.Mj(a))return!0}return!1};f.Gj=function(a){this.Wm(a,!0)};f.Sv=function(a,b){var c=this.wa();c||Oi(this.a(),!0);var d=this.a(),e=a,h=b,k=Bi(d);e instanceof N&&(h=e.y,e=e.x);ui(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Oi(this.a(),!1)};
f.$=function(a,b,c){(b=Jo.d.$.call(this,a,b))&&a&&this.ea&&this.$s&&this.dc().focus();this.dB=a&&c&&u(c.clientX)?new N(c.clientX,c.clientY):null;return b};f.hu=function(a){this.$s&&this.dc().focus();return Jo.d.hu.call(this,a)};f.Cy=function(a){return(this.PE||a.isEnabled())&&a.wa()&&Pn(a,2)};f.Ud=function(a){var b=this.Ma(),c;c=this.M();c=Fh(c.na,"div",b.U()+"-content",a);for(var d=c.length,e=0;e<d;e++)mo(b,this,c[e]);Jo.d.Ud.call(this,a)};
f.Mf=function(a){var b=Jo.d.Mf.call(this,a);b||hj(this,function(c){!b&&c.GG&&c.LA==a.keyCode&&(this.isEnabled()&&this.$f(c),b=c.Eg(a))},this);return b};f.Pg=function(a){Jo.d.Pg.call(this,a);var b=jj(this,a);if(b){a=this.a();var b=b.a(),c=Bi(b),d=Bi(a),e=Xi(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new N(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Ko(){}Ko.prototype.ge=function(){};function Lo(a,b,c){this.element=a;this.gn=b;this.gK=c}w(Lo,Ko);Lo.prototype.ge=function(a,b,c){qo(this.element,this.gn,a,b,void 0,c,this.gK)};function Mo(a,b,c,d){Lo.call(this,a,b);this.Uq=c?5:0;this.wv=d||void 0}w(Mo,Lo);Mo.prototype.sG=function(){return this.Uq};Mo.prototype.ge=function(a,b,c,d){var e=qo(this.element,this.gn,a,b,null,c,10,d,this.wv);if(e&496){var h=No(e,this.gn);b=No(e,b);e=qo(this.element,h,a,b,null,c,10,d,this.wv);e&496&&(h=No(e,h),b=No(e,b),qo(this.element,h,a,b,null,c,this.Uq,d,this.wv))}};function No(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Oo(a,b,c,d){Mo.call(this,a,b,c||d);if(c||d)this.Uq=65|(d?32:132)}w(Oo,Mo);function Po(){}w(Po,In);fa(Po);f=Po.prototype;f.Bg=function(){return"button"};f.Ug=function(a,b,c){switch(b){case 8:case 16:Rk(a,"pressed",c);break;default:case 64:case 1:Po.d.Ug.call(this,a,b,c)}};f.v=function(a){var b=Po.d.v.call(this,a);this.Rr(b,a.Bn());var c=a.K();c&&this.J(b,c);Pn(a,16)&&this.Ug(b,16,a.zh());return b};f.ub=function(a,b){b=Po.d.ub.call(this,a,b);var c=this.K(b);a.eg=c;a.qw=this.Bn(b);Pn(a,16)&&this.Ug(b,16,a.zh());return b};f.K=ea;f.J=ea;f.Bn=function(a){return a.title};
f.Rr=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.uo=function(a,b){var c=a.Fe(),d=this.U()+"-collapse-left",e=this.U()+"-collapse-right";a.Yj(c?e:d,!!(b&1));a.Yj(c?d:e,!!(b&2))};f.U=function(){return"goog-button"};function Qo(){}w(Qo,Po);fa(Qo);f=Qo.prototype;f.Bg=function(){};f.v=function(a){a.xo(!1);a.Ym&=-256;a.Xc(32,!1);return a.M().v("button",{"class":this.ak(a).join(" "),disabled:!a.isEnabled(),title:a.Bn()||"",value:a.K()||""},a.kq()||"")};f.ze=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.ub=function(a,b){a.xo(!1);a.Ym&=-256;a.Xc(32,!1);if(b.disabled){var c=this.vn(1);Vk(b,c)}return Qo.d.ub.call(this,a,b)};
f.Sl=function(a){a.Za().B(a.a(),"click",a.vk)};f.so=ea;f.em=ea;f.Ah=function(a){return a.isEnabled()};f.Yi=ea;f.jc=function(a,b,c){Qo.d.jc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.K=function(a){return a.value};f.J=function(a,b){a&&(a.value=b)};f.Ug=ea;function Ro(a,b,c){Xn.call(this,a,b||Qo.Zd(),c)}w(Ro,Xn);f=Ro.prototype;f.K=function(){return this.eg};f.J=function(a){this.eg=a;this.Ma().J(this.a(),a)};f.Bn=function(){return this.qw};f.Rr=function(a){this.qw=a;this.Ma().Rr(this.a(),a)};f.uo=function(a){this.Ma().uo(this,a)};f.f=function(){Ro.d.f.call(this);delete this.eg;delete this.qw};f.Ya=function(){Ro.d.Ya.call(this);if(Pn(this,32)){var a=this.dc();a&&this.Za().B(a,"keyup",this.Mf)}};
f.Mf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.vk(a):32==a.keyCode};Fn("goog-button",function(){return new Ro(null)});function So(){}w(So,Po);fa(So);f=So.prototype;f.v=function(a){var b={"class":"goog-inline-block "+this.ak(a).join(" ")},b=a.M().v("div",b,this.Vp(a.getContent(),a.M()));this.Rr(b,a.Bn());Ln(this,a,b);return b};f.Bg=function(){return"button"};f.Ga=function(a){return a&&a.firstChild.firstChild};f.Vp=function(a,b){return b.v("div","goog-inline-block "+(this.U()+"-outer-box"),b.v("div","goog-inline-block "+(this.U()+"-inner-box"),a))};f.ze=function(a){return"DIV"==a.tagName};
f.ub=function(a,b){To(b,!0);To(b,!1);var c;a:{c=a.M().zz(b);var d=this.U()+"-outer-box";if(c&&Uk(c,d)&&(c=a.M().zz(c),d=this.U()+"-inner-box",c&&Uk(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Vp(b.childNodes,a.M()));Wk(b,["goog-inline-block",this.U()]);return So.d.ub.call(this,a,b)};f.U=function(){return"goog-custom-button"};
function To(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ia(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Uo(){}w(Uo,So);fa(Uo);f=Uo.prototype;f.Ga=function(a){return Uo.d.Ga.call(this,a&&a.firstChild)};f.ub=function(a,b){var c=Eh("*","goog-menu",b)[0];if(c){Oi(c,!1);Ch(c).body.appendChild(c);var d=new Jo;d.ub(c);Vo(a,d)}return Uo.d.ub.call(this,a,b)};f.Vp=function(a,b){return Uo.d.Vp.call(this,[this.createCaption(a,b),b.v("div","goog-inline-block "+(this.U()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.v("div","goog-inline-block "+(this.U()+"-caption"),a)};f.U=function(){return"goog-menu-button"};function Wo(a,b,c,d,e){Ro.call(this,a,c||Uo.Zd(),d);this.Xc(64,!0);this.$q=new Oo(null,5);b&&Vo(this,b);this.zI=null;this.Bb=new Qf(500);!wo&&!xo||nc("533.17.9")||(this.Lq=!0);this.AI=e||po.Zd()}w(Wo,Ro);f=Wo.prototype;f.Lq=!1;f.tK=!1;f.Ya=function(){Wo.d.Ya.call(this);Xo(this,!0);this.S&&Yo(this,this.S,!0);Rk(this.o,"haspopup",!!this.S)};f.pc=function(){Wo.d.pc.call(this);Xo(this,!1);if(this.S){this.Rb(!1);this.S.pc();Yo(this,this.S,!1);var a=this.S.a();a&&T(a)}};
f.f=function(){Wo.d.f.call(this);this.S&&(this.S.g(),delete this.S);delete this.lK;this.Bb.g()};f.Fg=function(a){Wo.d.Fg.call(this,a);this.Gg()&&(this.Rb(!(this.N&64),a),this.S&&(this.S.Eh=!!(this.N&64)))};f.Nf=function(a){Wo.d.Nf.call(this,a);this.S&&!this.Gg()&&(this.S.Eh=!1)};f.vk=function(){this.setActive(!1);return!0};f.EH=function(a){this.S&&this.S.wa()&&!this.Mj(a.target)&&this.Rb(!1)};f.Mj=function(a){return a&&Zh(this.a(),a)||this.S&&this.S.Mj(a)||!1};
f.Mf=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.S&&this.S.wa()){var b=this.S.Eg(a);return 27==a.keyCode?(this.Rb(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.Rb(!0,a),!0):!1};f.JH=function(){this.Rb(!1)};f.KH=function(){this.Gg()||this.Rb(!1)};f.ek=function(a){this.Lq||this.Rb(!1);Wo.d.ek.call(this,a)};f.$t=function(){this.S||Vo(this,new Jo(this.M(),this.AI));return this.S||null};
function Vo(a,b){var c=a.S;b!=c&&(c&&(a.Rb(!1),a.ea&&Yo(a,c,!1),delete a.S),a.ea&&Rk(a.o,"haspopup",!!b),b&&(a.S=b,b.yo(a),b.$(!1),c=a.Lq,(b.$s=c)&&b.Yi(!0),a.ea&&Yo(a,b,!0)))}f.Gj=function(a){this.$t().Wm(a,!0)};f.$=function(a,b){var c=Wo.d.$.call(this,a,b);c&&!this.wa()&&this.Rb(!1);return c};f.ic=function(a){Wo.d.ic.call(this,a);this.isEnabled()||this.Rb(!1)};f.Uv=function(){this.Rb(!0)};f.En=function(){this.Rb(!1)};
f.Rb=function(a,b){Wo.d.Rb.call(this,a);if(this.S&&!!(this.N&64)==a){if(a){if(!this.S.ea)if(this.tK){var c=Xh(this.a());c?this.S.Mg(c.parentNode,c):this.S.n(this.a().parentNode)}else this.S.n();this.GC=Ai(this.a());this.Ay=Mi(this.a());Zo(this);this.S.Pg(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.S.Eh=!1;if(c=this.a())Rk(c,"activedescendant",""),Rk(c,"owns","");null!=this.sr&&(this.sr=void 0,(c=this.S.a())&&Hi(c,"",""))}this.S.$(a,!1,b);if(!this.Tj){var c=this.Za(),d=a?c.B:
c.kb;d.call(c,li(this.M()),"mousedown",this.EH,!0);this.Lq&&d.call(c,this.S,"blur",this.KH);d.call(c,this.Bb,Rf,this.MJ);a?this.Bb.start():this.Bb.stop()}}};function Zo(a){if(a.S.ea){var b=a.$q;a.$q.element=a.lK||a.a();var c=a.S.a();a.S.wa()||(c.style.visibility="hidden",Oi(c,!0));!a.sr&&a.$q.sG&&a.$q.Uq&32&&(a.sr=Ki(c));b.ge(c,b.gn^1,a.zI,a.sr);a.S.wa()||(Oi(c,!1),c.style.visibility="visible")}}
f.MJ=function(){var a=Mi(this.a()),b=Ai(this.a()),c=this.Ay;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.GC,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Ay=a,this.GC=b,Zo(this))};function Yo(a,b,c){var d=a.Za();c=c?d.B:d.kb;c.call(d,b,"action",a.JH);c.call(d,b,"highlight",a.iu);c.call(d,b,"unhighlight",a.ju)}function Xo(a,b){var c=a.Za();(b?c.B:c.kb).call(c,a.a(),"keydown",a.HH)}
f.iu=function(a){var b=this.a();if(a=a.target.a()){var c=Sk(a,"activedescendant");a=Ch(a).getElementById(c)||a;a.id||(c=aj.Zd(),a.id=":"+(c.TA++).toString(36));c="";a&&(c=a.id);Rk(b,"activedescendant",c);Rk(b,"owns",a.id)}};f.HH=function(a){Pn(this,32)&&this.dc()&&this.S&&this.S.wa()&&a.stopPropagation()};f.ju=function(){if(!Bo(this.S)){var a=this.a();Rk(a,"activedescendant","");Rk(a,"owns","")}};Fn("goog-menu-button",function(){return new Wo(null)});function $o(){V.call(this);this.be=S("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":$o.CSS.uD});Rh(this.a(),this.be);this.ik=S("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":$o.CSS.eb});Rh(this.a(),this.ik);this.S=new Jo;this.Mc=new Zj;this.xd=[];ap(this);this.En(void 0,0);this.S.n(this.be);Q(this.S.a(),$o.CSS.tD)}w($o,V);v("nrg.ui.SlideInMenu",$o);$o.ID_PREFIX="nrg.ui.SlideInMenu";
$o.CSS_SUFFIX={eb:"icon",eM:"icon-hovered",tD:"menu",uD:"menuholder",vD:"menuitem",ax:"menuitem-highlight",wD:"menuitem-icon"};var bp={js:null,Yg:null,eb:null};function cp(a,b,c,d){d=ca(d)?d:200;return[new Uj(a,d),new Oj(a,b,c,d,nk)]}function dp(a,b,c,d){d=ca(d)?d:200;return[new Tj(a,d),new Oj(a,b,c,d,nk)]}f=$o.prototype;f.fc=null;f.gB=null;f.vl=null;f.Yl=!1;f.Fn=[-100,-100];f.Jo=[0,0];f.Hu=!0;f.Iu=!1;f.IB=function(a,b){return this.Fn=[a,b]};f.ZB=function(a,b){return this.Jo=[a,b]};f.mG=function(){return this.Fn};
f.ZG=function(){return this.Jo};f.$t=function(){return this.S};f.BG=function(){return this.be};f.CG=function(){return this.ik};f.OB=function(a){this.ik.src=a};f.JK=function(a,b){this.fc[a].eb.src=b};f.Dz=function(a){return ob(this.fc).indexOf(a)};f.du=function(a){return ob(this.fc)[a]};f.Xt=function(a){return this.fc[ob(this.fc)[a]]};f.HA=function(a){return this.Hu=a};f.xI=function(a){return this.Iu=a};f.XG=function(){return this.vl};
function ep(a){null!=a.Mc&&(a.Mc.stop(),D(a.xd,function(a){this.Mc.remove(a);a.g()}.bind(a)),Ib(a.xd))}function fp(a,b,c){ep(a);D(g(b)?b:[b],function(a){this.Mc.add(a);this.xd.push(a)}.bind(a));a.be.style.visibility="visible";Rc(a.Mc,"end",function(){c&&c()}.bind(a));a.Mc.play()}f.Dl=null;f.aq=null;f.CB=function(a){this.aq=a;this.a().title=a};function gp(a){null!=a.Dl&&(ba.clearTimeout(a.Dl),a.Dl=null);a.Dl=Sf(function(){this.Dl=null;this.Yl&&(!this.Ou&&this.Yl?this.En():gp(this))}.bind(a),450)}
f.Pg=function(a){Q(this.fc[this.du(a)].Yg,$o.CSS.ax);this.Hu&&(this.ik.src=this.fc[this.du(a)].eb.src);this.Iu?this.a().title=this.Xt(a).js.getContent():null!=this.aq&&(this.a().title=this.aq)};f.$y=function(){C(this.fc,function(a){uh(a.Yg,$o.CSS.ax)}.bind(this))};
f.Tx=function(a,b){null==this.fc&&(this.fc={});a=r(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;D(a,function(a,k){if(this.fc[a])throw Error(a+" is already in use!");c=new ho(a);this.S.Gj(c);d=c.Ga();Q(d,$o.CSS.vD);d.title=a;e=S("img",{id:$o.ID_PREFIX+"_MenuItemIcon_"+B(),"class":$o.CSS.wD});e.src=k<=b.length-1?b[k]:null;Rh(d,e);this.fc[a]=vb(bp);this.fc[a].js=c;this.fc[a].Yg=d;this.fc[a].eb=e}.bind(this))};
f.Bo=function(a,b){var c=a;if(r(c)){if(!this.fc[c])throw Error(c+" does not exist!");c=this.Dz(c)}this.gB=this.vl?this.vl:a;this.vl=a;ca(b)&&!b||this.$y();this.Pg(c);this.dispatchEvent({type:"item_selected",index:c,title:this.Xt(c).js.getContent()})};f.Uv=function(a,b){fp(this,cp(this.be,this.Fn,this.Jo,b),function(){this.Yl=!0;null!=a&&a()}.bind(this))};f.En=function(a,b){fp(this,dp(this.be,this.Jo,this.Fn,b),function(){this.Yl=!1;this.be.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function ap(a){G(a.a(),"click",function(){this.Yl?this.En():this.Uv()}.bind(a));G(a.S,"action",function(a){this.Bo(a.target.getContent())}.bind(a));G(a.be,"mouseover",function(){this.Ou=!0}.bind(a));G(a.be,"mouseout",function(){this.Ou=!1;gp(this)}.bind(a))}
f.f=function(){$o.d.f.call(this);delete this.Ou;delete this.Dl;ep(this);Ib(this.xd);delete this.xd;C(this.fc,function(a,b){H(a);T(a);delete this.fc[b]}.bind(this));sb(this.fc);delete this.fc;T(this.be);delete this.be;T(this.ik);delete this.ik;H(this.S);this.S.g();this.bq(this.Mc);delete this.Mc;delete this.aq;delete this.gB;delete this.vl;delete this.Yl;delete this.Fn;delete this.Jo;delete this.Hu;delete this.Iu};v("nrg.ui.SlideInMenu.ID_PREFIX",$o.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{jM:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",$o.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",bp);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",$o.prototype.IB);v("nrg.ui.SlideInMenu.prototype.setShowPosition",$o.prototype.ZB);v("nrg.ui.SlideInMenu.prototype.getHidePosition",$o.prototype.mG);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",$o.prototype.ZG);v("nrg.ui.SlideInMenu.prototype.getMenu",$o.prototype.$t);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",$o.prototype.BG);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",$o.prototype.CG);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",$o.prototype.OB);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",$o.prototype.JK);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",$o.prototype.Dz);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",$o.prototype.du);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",$o.prototype.Xt);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",$o.prototype.HA);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",$o.prototype.xI);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",$o.prototype.XG);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",$o.prototype.Pg);v("nrg.ui.SlideInMenu.prototype.deselectAll",$o.prototype.$y);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",$o.prototype.Tx);v("nrg.ui.SlideInMenu.prototype.setSelected",$o.prototype.Bo);v("nrg.ui.SlideInMenu.prototype.showMenu",$o.prototype.Uv);v("nrg.ui.SlideInMenu.prototype.hideMenu",$o.prototype.En);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",$o.prototype.CB);v("nrg.ui.SlideInMenu.prototype.disposeInternal",$o.prototype.f);function hp(){V.call(this)}w(hp,V);v("xiv.ui.layouts.interactors.InputController",hp);hp.ID_PREFIX="xiv.ui.layouts.interactors.InputController";hp.CSS_SUFFIX={kD:"inputbox",hM:"inputbox-hovered",Lw:"display"};f=hp.prototype;f.Ye=null;f.Ha=null;f.ZH=!1;f.K=function(){if(null!=this.Ha)return this.Ha.value};f.J=function(a){null!=this.Ha&&(this.Ha.value=a,this.Wg())};f.kd=function(a){null!=this.Ha&&(this.Ha.max=a,this.Wg())};f.ie=function(a){null!=this.Ha&&(this.Ha.min=a,this.Wg())};f.Wg=function(){};
f.YA=function(a){this.Ha.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.Ha.value});this.Wg()};
f.n=function(a){hp.d.n.call(this,a);this.Ye=S("div");this.a().appendChild(this.Ye);Q(this.Ye,hp.CSS.Lw);this.Ha=S("input");this.Ha.type="number";this.Ha.step=1;this.Ha.min=0;this.Ha.value=0;this.a().appendChild(this.Ha);Q(this.Ha,hp.CSS.kD);G(this.Ha,"mouseenter",function(a){a.stopPropagation();this.Ha.style.opacity=1;this.Ye.style.opacity=0}.bind(this));G(this.Ha,"mouseleave",function(a){a.stopPropagation();this.Ha.style.opacity=0;this.Ye.style.opacity=1}.bind(this));G(this.Ha,"input",this.YA.bind(this));
this.Wg()};f.f=function(){hp.d.f.call(this);delete this.ZH;this.Ha&&(H(this.Ha),T(this.Ha),delete this.Ha);this.Ye&&(H(this.Ye),T(this.Ye),delete this.Ye)};v("xiv.ui.layouts.interactors.InputController.EventType",{gM:"input",Lw:"display"});v("xiv.ui.layouts.interactors.InputController.ID_PREFIX",hp.ID_PREFIX);v("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",hp.CSS_SUFFIX);v("xiv.ui.layouts.interactors.InputController.prototype.displayElt",hp.prototype.Ye);
v("xiv.ui.layouts.interactors.InputController.prototype.inputBox",hp.prototype.Ha);v("xiv.ui.layouts.interactors.InputController.prototype.getValue",hp.prototype.K);v("xiv.ui.layouts.interactors.InputController.prototype.setValue",hp.prototype.J);v("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",hp.prototype.kd);v("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",hp.prototype.ie);v("xiv.ui.layouts.interactors.InputController.prototype.updateValue",hp.prototype.Wg);
v("xiv.ui.layouts.interactors.InputController.prototype.onInput",hp.prototype.YA);v("xiv.ui.layouts.interactors.InputController.prototype.render",hp.prototype.n);v("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",hp.prototype.f);function ip(){V.call(this)}w(ip,hp);v("xiv.ui.layouts.interactors.FrameDisplay",ip);ip.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";ip.prototype.Wg=function(){this.Ye.innerHTML=this.Ha.value+" / "+this.Ha.max};v("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",ip.ID_PREFIX);v("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",ip.prototype.Wg);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function jp(a,b,c){this.Qe=this.Pe=this.Oe=0;3==arguments.length?(this.Oe=Number(a),this.Pe=Number(b),this.Qe=Number(c)):a instanceof jp?(this.Oe=Number(a.x()),this.Pe=Number(a.y()),this.Qe=Number(a.z())):(this.Oe=Number(a[0]),this.Pe=Number(a[1]),this.Qe=Number(a[2]))}
jp.prototype={clone:function(){return new jp(this.Oe,this.Pe,this.Qe)},yi:function(a){return this.Oe*a.x()+this.Pe*a.y()+this.Qe*a.z()},Wq:function(a,b){return kp(this,lp(mp(a,this),b))},length:function(){return Math.sqrt(this.yi(this))},Rj:function(a){return new jp(this.Pe*a.z()-this.Qe*a.y(),this.Qe*a.x()-this.Oe*a.z(),this.Oe*a.y()-this.Pe*a.x())},x:function(){return this.Oe},y:function(){return this.Pe},z:function(){return this.Qe}};
function np(a){var b=a.length();return new jp(a.Oe/b,a.Pe/b,a.Qe/b)}function lp(a,b){return new jp(a.Oe*b,a.Pe*b,a.Qe*b)}function mp(a,b){return new jp(a.Oe-b.x(),a.Pe-b.y(),a.Qe-b.z())}function kp(a,b){return new jp(a.Oe+b.x(),a.Pe+b.y(),a.Qe+b.z())}function op(a){return new jp(-a.Oe,-a.Pe,-a.Qe)};function pp(a,b){this.Bv=new jp(a);this.Wc=new jp(b)}pp.prototype={clone:function(){return new pp(this.Bv.clone(),this.Wc.clone())},$j:function(){this.Wc=op(this.Wc)},Je:function(){return this.Bv}};function qp(a,b){this.Wc=a;this.bp=b}qp.prototype={clone:function(){return new qp(this.Wc.clone(),this.bp)},$j:function(){this.Wc=op(this.Wc);this.bp=-this.bp}};function rp(a,b){this.Th=a;this.Sr=b;var c=a[0].Je(),d=a[1].Je(),e=a[2].Je(),d=np(mp(d,c).Rj(mp(e,c)));this.Ie=new qp(d,d.yi(c))}rp.prototype={clone:function(){var a=this.Th.map(function(a){return a.clone()});return new rp(a,this.Sr)},$j:function(){this.Th.reverse().map(function(a){a.$j()});this.Ie.$j()}};
function sp(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.Th.length;n++){var m=b.Wc.yi(a.Th[n].Je())-b.bp,m=-1E-5>m?2:1E-5<m?1:0,k=k|m;l.push(m)}switch(k){case 0:(0<b.Wc.yi(a.Ie.Wc)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.Th.length;n++){var q=(n+1)%a.Th.length,m=l[n],p=l[q],k=a.Th[n],q=a.Th[q];2!=m&&c.push(k);1!=m&&d.push(2!=m?k.clone():k);3==(m|p)&&(m=(b.bp-b.Wc.yi(k.Je()))/b.Wc.yi(mp(q.Je(),k.Je())),m=new pp(k.Bv.Wq(q.Je(),m),k.Wc.Wq(q.Wc,m)),c.push(m),
d.push(m.clone()))}3<=c.length&&e.push(new rp(c,a.Sr));3<=d.length&&h.push(new rp(d,a.Sr))}};function tp(a){this.dd=this.fd=this.Ie=null;this.Ab=[];a&&up(this,a)}tp.prototype={clone:function(){var a=new tp;vp(a,this.Ie&&this.Ie.clone());wp(a,this.fd&&this.fd.clone());xp(a,this.dd&&this.dd.clone());a.Pr(this.Ab.map(function(a){return a.clone()}));return a},vb:function(){for(var a=0;a<this.Ab.length;a++)this.Ab[a].$j();this.Ie.$j();this.fd&&this.fd.vb();this.dd&&this.dd.vb();a=this.fd;this.fd=this.dd;this.dd=a},Pr:function(a){this.Ab=a}};function xp(a,b){a.dd=b}function wp(a,b){a.fd=b}
function vp(a,b){a.Ie=b}function up(a,b){if(b.length){a.Ie||(a.Ie=b[0].Ie.clone());for(var c=[],d=[],e=0;e<b.length;e++)sp(b[e],a.Ie,a.Ab,a.Ab,c,d);c.length&&(a.fd||(a.fd=new tp),up(a.fd,c));d.length&&(a.dd||(a.dd=new tp),up(a.dd,d))}}function yp(a){var b=a.Ab.slice();a.fd&&(b=b.concat(yp(a.fd)));a.dd&&(b=b.concat(yp(a.dd)));return b}function zp(a,b){a.Ab=Ap(b,a.Ab);a.fd&&zp(a.fd,b);a.dd&&zp(a.dd,b)}
function Ap(a,b){if(!a.Ie)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)sp(b[e],a.Ie,c,d,c,d);a.fd&&(c=Ap(a.fd,c));d=a.dd?Ap(a.dd,d):[];return c.concat(d)};function Bp(){this.Ab=[]}function Cp(a){var b=new Bp;b.Pr(a);return b}
Bp.prototype={clone:function(){var a=new Bp;a.Pr(this.Ab.map(function(a){return a.clone()}));return a},vw:function(a){var b=new tp(this.clone().Ab);a=new tp(a.clone().Ab);zp(b,a);zp(a,b);a.vb();zp(a,b);a.vb();up(b,yp(a));return Cp(yp(b))},sc:function(a){var b=new tp(this.clone().Ab);a=new tp(a.clone().Ab);b.vb();zp(b,a);zp(a,b);a.vb();zp(a,b);a.vb();up(b,yp(a));b.vb();return Cp(yp(b))},qu:function(a){var b=new tp(this.clone().Ab);a=new tp(a.clone().Ab);b.vb();zp(a,b);a.vb();zp(b,a);zp(a,b);up(b,yp(a));
b.vb();return Cp(yp(b))},inverse:function(){var a=this.clone();a.Ab.map(function(a){a.$j()});return a},Pr:function(a){this.Ab=a}};function Dp(){}function Ep(a){for(var b=a.C.count,c=[],d=0,d=0;d<b;d+=3){var e=a.C.get(d),h=a.C.get(d+1),k=a.C.get(d+2),l=a.aa.get(d),n=a.aa.get(d+1),m=a.aa.get(d+2),q=a.Ea;a.xc&&0<a.xc.length&&(q=a.xc.get(d));var p=[];p.push(new pp(e,l));p.push(new pp(h,n));p.push(new pp(k,m));c.push(new rp(p,q))}return Cp(c)}
function Fp(a,b){if(!(null!=b&&b instanceof Bp))throw Error("Invalid CSG object.");var c=new bd,d=[];Cb(b.Ab,function(a){var b=[],k=a.Sr,b=Cb(a.Th,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.tE=Cb(c.unique(),function(a){return[a.Je().x(),a.Je().y(),a.Je().z()]});a.sE=Cb(c.unique(),function(a){return[a.Wc.x(),a.Wc.y(),a.Wc.z()]});a.rE=Cb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.C=new ad(9*d.length);
a.aa=new ad(9*d.length);a.xc=new ad(9*d.length);Cb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.tE,n=this.sE,m=this.rE;this.C.add(d[b][0],d[b][1],d[b][2]);this.C.add(d[c][0],d[c][1],d[c][2]);this.C.add(d[a][0],d[a][1],d[a][2]);this.aa.add(n[b][0],n[b][1],n[b][2]);this.aa.add(n[c][0],n[c][1],n[c][2]);this.aa.add(n[a][0],n[a][1],n[a][2]);m[b]&&this.xc.add(m[b][0],m[b][1],m[b][2]);m[c]&&this.xc.add(m[c][0],m[c][1],m[c][2]);m[a]&&this.xc.add(m[a][0],m[a][1],m[a][2])}.bind(a));0==a.xc.Ja&&(a.xc=null);
a.wd=Qd}Dp.prototype.vw=function(a){if(null==a||!(a instanceof Bp||a instanceof Td))throw Error("Invalid object.");var b=a;a instanceof Td&&(b=Ep(b));a=new Td;za(a,new Dp);Fp(a,Ep(this).vw(b));return a};Dp.prototype.sc=function(a){if(null==a||!(a instanceof Bp||a instanceof Td))throw Error("Invalid object.");var b=a;a instanceof Td&&(b=Ep(b));a=new Td;za(a,new Dp);Fp(a,Ep(this).sc(b));return a};
Dp.prototype.qu=function(a){if(null==a||!(a instanceof Bp||a instanceof Td))throw Error("Invalid object.");var b=a;a instanceof Td&&(b=Ep(b));a=new Td;za(a,new Dp);Fp(a,Ep(this).qu(b));return a};Dp.prototype.inverse=function(){var a=new Td;za(a,new Dp);Fp(a,Ep(this).inverse());return a};v("X.constructable",Dp);v("X.constructable.prototype.intersect",Dp.prototype.qu);v("X.constructable.prototype.inverse",Dp.prototype.inverse);v("X.constructable.prototype.subtract",Dp.prototype.sc);
v("X.constructable.prototype.union",Dp.prototype.vw);function Gp(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new jp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new pp(kp(c,lp(e,d)),e))}this.Ab=[];a=a||{};var c=new jp(a.Ae||[0,0,0]),d=a.Kg||1,e=a.ya||16;a=a.ZK||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new rp(k));return Cp(h)}w(Gp,Bp);function Hp(){Td.call(this);this.s="sphere";this.Oa=[0,0,0];this.zj=5;this.yc=32;this.yE=16;za(this,new Dp)}w(Hp,Td);Hp.prototype.__defineGetter__("center",function(){return this.Oa});Hp.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Oa=a});Hp.prototype.__defineGetter__("radius",function(){return this.zj});Hp.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.zj=a});
Hp.prototype.ca=function(){Fp(this,new Gp({Ae:this.Oa,Kg:this.zj,ya:this.yc,ZK:this.yE}));Hp.d.ca.call(this)};v("X.sphere",Hp);v("X.sphere.prototype.modified",Hp.prototype.ca);function Ie(a){Td.call(this);this.s="slice";this.Oa=[0,0,0];this.bl=[0,0,1];this.Ob=[0,1,0];this.Cp=[1,0,0];this.Fa=this.Ra=10;this.ml=[0,1,0,0,1,1,1,1,1,0,0,0];this.q=this.kh=null;this.dh=!0;this.Yk=[1,1,1];null!=a&&this.Oj(a)}w(Ie,Td);Ie.prototype.Oj=function(a){this.Oa=a.Oa.slice();this.bl=a.bl.slice();this.Ob=a.Ob.slice();this.Ra=a.Ra;this.Fa=a.Fa;this.kh=a.kh;this.q=a.q;this.dh=a.dh;this.Yk=a.Yk;this.vE=a.vE;Ie.d.Oj.call(this,a)};Ie.prototype.__defineSetter__("height",function(a){this.Fa=a});
Ie.prototype.__defineSetter__("width",function(a){this.Ra=a});Ie.prototype.create=function(){this.Xe()};
Ie.prototype.Xe=function(){var a=(new K(this.bl[0],this.bl[1],this.bl[2])).normalize(),b=new K(this.Ob[0],this.Ob[1],this.Ob[2]),c=new K(this.Cp[0],this.Cp[1],this.Cp[2]),d=new K(this.Oa[0],this.Oa[1],this.Oa[2]),e=pd(c.clone().vb().scale(this.Ra/2),b.clone().vb().scale(this.Fa/2)),h=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=pd(c.clone().vb().scale(this.Ra/2),b.clone().scale(this.Fa/2)),k=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=pd(c.clone().scale(this.Ra/2),b.clone().vb().scale(this.Fa/2)),l=new K(e.x+d.x,e.y+d.y,
e.z+d.z),e=pd(c.clone().scale(this.Ra/2),b.clone().scale(this.Fa/2)),b=new K(e.x+d.x,e.y+d.y,e.z+d.z);this.C=new ad(18);this.aa=new ad(18);this.C.add(h.x,h.y,h.z);this.C.add(k.x,k.y,k.z);this.C.add(l.x,l.y,l.z);this.C.add(l.x,l.y,l.z);this.C.add(b.x,b.y,b.z);this.C.add(k.x,k.y,k.z);this.aa.add(a.x,a.y,a.z);this.aa.add(a.x,a.y,a.z);this.aa.add(a.x,a.y,a.z);this.aa.add(a.x,a.y,a.z);this.aa.add(a.x,a.y,a.z);this.aa.add(a.x,a.y,a.z);this.dh&&(a=new Td,a.C=new ad(24),a.aa=new ad(24),a.C.add(h.x,h.y,h.z),
a.C.add(k.x,k.y,k.z),a.C.add(k.x,k.y,k.z),a.C.add(b.x,b.y,b.z),a.C.add(b.x,b.y,b.z),a.C.add(l.x,l.y,l.z),a.C.add(l.x,l.y,l.z),a.C.add(h.x,h.y,h.z),a.aa.add(0,0,0),a.aa.add(0,0,0),a.aa.add(0,0,0),a.aa.add(0,0,0),a.aa.add(0,0,0),a.aa.add(0,0,0),a.aa.add(0,0,0),a.aa.add(0,0,0),a.Ea=[this.Yk[0],this.Yk[1],this.Yk[2]],a.wd="LINES",a.gl=2,this.j.push(a))};v("X.slice",Ie);v("X.slice.prototype.create",Ie.prototype.create);function J(a){Td.call(this);this.s="volume";this.Oa=[0,0,0];this.fb=[10,10,10];this.wc=[1,1,1];this.Om=[10,10,10];this.ih=[1,1,1];this.yf=[];this.el=this.hh=this.dl=this.gh=this.cl=this.fh=0;this.Qm=new Td;this.Rm=new Td;this.Sm=new Td;this.Gp=this.xe=!1;this.xb=-1;this.Fp=[];this.q=null;this.dh=!0;this.Fb=Infinity;this.Eb=-Infinity;this.Ix=!0;this.Mb=0;this._data=null;za(this,new dd);za(this,new Rd);null!=a&&this.Oj(a)}w(J,Td);
J.prototype.Oj=function(a){this.Oa=a.Oa.slice();this.fb=a.fb.slice();this.ih=a.ih.slice();this.fh=a.fh;this.cl=a.cl;this.gh=a.gh;this.dl=a.dl;this.hh=a.hh;this.el=a.el;this.rx=a.rx.slice();this.Qm=new Td(a.Qm);this.Rm=new Td(a.Rm);this.Sm=new Td(a.Sm);this.Mb=a.Mb;this._data=a._data;this.xe=a.xe;this.Gp=a.Gp;this.xb=a.xb;this.q=a.q;this.dh=a.dh;J.d.Oj.call(this,a)};
J.prototype.Xe=function(a){this.j.length=0;this.Qm.j.length=0;this.Rm.j.length=0;this.Sm.j.length=0;this.j.push(this.Qm);this.j.push(this.Rm);this.j.push(this.Sm);this.sd=a.qj;this.xs=a.rj;this.bh=a.pj;this.Xk=a.re;this.oE=a.te;this.Mb=a.max;this._data=a.data;this.G=!0};
J.prototype.ca=function(a){a="undefined"!==typeof a?a:!0;if(0<this.j.length){this.xe!=this.Gp&&(this.xe||-1==this.xb||(this.j[this.xb].visible=!1),this.G=!0,this.Gp=this.xe);if(!this.gb)return;for(var b=0,b=0;3>b;b++){var c=this.j[b],d=0,e=0;0==b?(d=this.fh,e=this.cl,this.cl=this.fh):1==b?(d=this.gh,e=this.dl,this.dl=this.gh):2==b&&(d=this.hh,e=this.el,this.el=this.hh);if(null==this.j[b].j[parseInt(d,10)]){var h=ud();h[0]=this.e[b].I[0][0][0]+this.e[b].La[0]*parseInt(d,10);h[1]=this.e[b].I[0][0][1]+
this.e[b].La[1]*parseInt(d,10);h[2]=this.e[b].I[0][0][2]+this.e[b].La[2]*parseInt(d,10);if(this.$a){var k=He(h,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.q.Xb,this.q,this.q.$a,this.q.td.Od);this.q.j[b].j[parseInt(d,10)]=k;this.q.j[b].ca(!0)}h=He(h,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.Xb,this,!0,null);this.$a&&(h.q=h.Qa,h.q=this.q.j[b].j[parseInt(d,10)].Qa);c.j[parseInt(d,10)]=h;this.j[b].ca(!0)}e=c.j[parseInt(e,10)];this.xe||(e.visible=!1);c=c.j[parseInt(d,10)];c.visible=!0;
c.Kc=1;this.xe&&(c.j[0].gb=!1,b!=this.xb&&(c.visible=!1,c.Kc=0))}this.xe&&-1!=this.xb&&Ip(this,this.xb)}a&&J.d.ca.call(this)};J.prototype.__defineGetter__("dimensions",function(){return this.fb});J.prototype.__defineSetter__("dimensions",function(a){this.fb=a});J.prototype.__defineGetter__("spacing",function(){return this.ih});J.prototype.__defineSetter__("spacing",function(a){this.ih=a});J.prototype.__defineGetter__("bbox",function(){return this.wc});J.prototype.__defineGetter__("range",function(){return this.Om});
J.prototype.__defineGetter__("dimensionsRAS",function(){return this.rx});J.prototype.__defineGetter__("volumeRendering",function(){return this.xe});J.prototype.__defineSetter__("volumeRendering",function(a){this.xe=a;this.ca(!1)});J.prototype.__defineGetter__("visible",function(){return this.gb});J.prototype.__defineSetter__("visible",function(a){if(a)this.gb=a,this.ca(!1);else{for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.gb=a;this.G=!0}});
J.prototype.__defineGetter__("center",function(){return this.Oa});J.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.Oa=a});J.prototype.__defineGetter__("volumeRenderingCache",function(){return this.Fp});J.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.Fp=a});J.prototype.__defineGetter__("image",function(){return this.yf});
J.prototype.__defineGetter__("labelmap",function(){this.q||(this.q=new Jp(this));return this.q});J.prototype.__defineGetter__("indexX",function(){return this.fh});J.prototype.__defineSetter__("indexX",function(a){u(a)&&0<=a&&a<this.Qm.j.length&&(this.fh=a,this.ca(!1))});J.prototype.__defineGetter__("indexY",function(){return this.gh});J.prototype.__defineSetter__("indexY",function(a){u(a)&&0<=a&&a<this.Rm.j.length&&(this.gh=a,this.ca(!1))});J.prototype.__defineGetter__("indexZ",function(){return this.hh});
J.prototype.__defineSetter__("indexZ",function(a){u(a)&&0<=a&&a<this.Sm.j.length&&(this.hh=a,this.ca(!1))});J.prototype.__defineGetter__("windowLow",function(){return this.Fb});J.prototype.__defineSetter__("windowLow",function(a){this.Fb=a});J.prototype.__defineGetter__("windowHigh",function(){return this.Eb});J.prototype.__defineSetter__("windowHigh",function(a){this.Eb=a});J.prototype.__defineGetter__("borders",function(){return this.dh});
J.prototype.__defineSetter__("borders",function(a){this.dh=a});J.prototype.__defineGetter__("reslicing",function(){return this.Ix});J.prototype.__defineSetter__("reslicing",function(a){this.Ix=a});J.prototype.__defineSetter__("xNormX",function(a){this.e[0].D[0]=a});J.prototype.__defineGetter__("xNormX",function(){return this.e[0].D[0]});J.prototype.__defineSetter__("xNormY",function(a){this.e[0].D[1]=a});J.prototype.__defineGetter__("xNormY",function(){return this.e[0].D[1]});
J.prototype.__defineSetter__("xNormZ",function(a){this.e[0].D[2]=a});J.prototype.__defineGetter__("xNormZ",function(){return this.e[0].D[2]});J.prototype.__defineSetter__("xColor",function(a){this.e[0].Ea=a});J.prototype.__defineGetter__("xColor",function(){return this.e[0].Ea});J.prototype.__defineSetter__("yNormX",function(a){this.e[1].D[0]=a});J.prototype.__defineGetter__("yNormX",function(){return this.e[1].D[0]});J.prototype.__defineSetter__("yNormY",function(a){this.e[1].D[1]=a});
J.prototype.__defineGetter__("yNormY",function(){return this.e[1].D[1]});J.prototype.__defineSetter__("yNormZ",function(a){this.e[1].D[2]=a});J.prototype.__defineGetter__("yNormZ",function(){return this.e[1].D[2]});J.prototype.__defineSetter__("yColor",function(a){this.e[1].Ea=a});J.prototype.__defineGetter__("yColor",function(){return this.e[1].Ea});J.prototype.__defineSetter__("zNormX",function(a){this.e[2].D[0]=a});J.prototype.__defineGetter__("zNormX",function(){return this.e[2].D[0]});
J.prototype.__defineSetter__("zNormY",function(a){this.e[2].D[1]=a});J.prototype.__defineGetter__("zNormY",function(){return this.e[2].D[1]});J.prototype.__defineSetter__("zNormZ",function(a){this.e[2].D[2]=a});J.prototype.__defineGetter__("zNormZ",function(){return this.e[2].D[2]});J.prototype.__defineSetter__("zColor",function(a){this.e[2].Ea=a});J.prototype.__defineGetter__("zColor",function(){return this.e[2].Ea});
J.prototype.SK=function(a){this.j[a].visible=!1;for(var b=0;b<this.j[a].j.length;b++)"undefined"!=typeof this.j[a].j[b]&&(this.$a&&(this.q.j[a].j[b].remove(),this.q.j[a].j[b]=null),this.j[a].j[b].remove(),this.j[a].j[b]=null);wd(this.e[a].D,this.e[a].D);Je(a,this.e[a].Pm,this.e[a].D,this);this.j[a].j=[];this.j[a].j=Array(this.e[a].ba);this.$a&&(b=He(this.e[a].Pm,this.e[a].vd,this.e[a].D,this.e[a].Ea,this.wc,this.q.Xb,this.q,this.q.$a,this.q.td.Od),this.q.j[a].j=[],this.q.j[a].j=Array(this.e[a].ba),
this.q.j[a].j[Math.floor(this.e[a].ba/2)]=b,this.q.j[a].ca());b=He(this.e[a].Pm,this.e[a].vd,this.e[a].D,this.e[a].Ea,this.wc,this.Xb,this,!0,null);this.$a&&(b.q=b.Qa,b.q=this.q.j[a].j[Math.floor(this.e[a].ba/2)].Qa);this.j[a].j[Math.floor(this.e[a].ba/2)]=b;0==a?(this.fh=Math.floor(this.e[a].ba/2),this.cl=Math.floor(this.e[a].ba/2)):1==a?(this.gh=Math.floor(this.e[a].ba/2),this.dl=Math.floor(this.e[a].ba/2)):(this.hh=Math.floor(this.e[a].ba/2),this.el=Math.floor(this.e[a].ba/2));this.j[a].ca();this.j[a].j[Math.floor(this.e[a].ba/
2)].gb=!0};
function Ip(a,b){if(!a.qp)if(!a.xe||!a.G&&b==a.xb)a.xb=b;else if(-1==a.Fp.indexOf(b))a.Fp.push(b),a.qp=!0,Kp(a,b),setTimeout(function(){var a=null;0<=this.xb&&(a=this.j[this.xb],a.visible=!1);var a=this.j[b],c=a.j.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].La[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].La[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].La[2]*e;if(this.$a){var q=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.q.Xb,this.q,
this.q.$a,this.q.td.Od);this.q.j[b].j[e]=q;this.q.j[b].ca(!0)}m=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.Xb,this,!0,null);m.j[0].gb=!1;this.$a&&(m.q=m.Qa,m.q=this.q.j[b].j[e].Qa);a.j[e]=m}a.j[e].gb=!0}Lp(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].La[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].La[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].La[2]*e;if(this.$a){var q=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.q.Xb,
this.q,this.q.$a,this.q.td.Od);this.q.j[b].j[e]=q;this.q.j[b].ca(!0)}m=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.Xb,this,!0,null);m.j[0].gb=!1;this.$a&&(m.q=m.Qa,m.q=this.q.j[b].j[e].Qa);a.j[e]=m}a.j[e].gb=!0}Lp(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].La[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].La[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].La[2]*e;if(this.$a){var q=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,
this.q.Xb,this.q,this.q.$a,this.q.td.Od);this.q.j[b].j[e]=q;this.q.j[b].ca(!0)}m=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.Xb,this,!0,null);m.j[0].gb=!1;this.$a&&(m.q=m.Qa,m.q=this.q.j[b].j[e].Qa);a.j[e]=m}a.j[e].gb=!0}Lp(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.j[e]){var m=ud();m[0]=this.e[b].I[0][0][0]+this.e[b].La[0]*e;m[1]=this.e[b].I[0][0][1]+this.e[b].La[1]*e;m[2]=this.e[b].I[0][0][2]+this.e[b].La[2]*e;if(this.$a){var q=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,
this.wc,this.q.Xb,this.q,this.q.$a,this.q.td.Od);this.q.j[b].j[e]=q;this.q.j[b].ca(!0)}m=He(m,this.e[b].vd,this.e[b].D,this.e[b].Ea,this.wc,this.Xb,this,!0,null);m.j[0].gb=!1;this.$a&&(m.q=m.Qa,m.q=this.q.j[b].j[e].Qa);a.j[e]=m}a.j[e].gb=!0}Lp(this,1);setTimeout(function(){this.qp&&this.j[b].ca(!0);this.xb=b;this.G=!1;if(this.qp){var a=new Be;a.Ka=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.qp=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.j[a.xb];
c.visible=!1;var c=a.j[b],d=c.j.length,e;for(e=0;e<d;e++)c.j[e].gb=!0;a.xb=b;a.G=!1}}function Kp(a,b){var c=new ze;c.Ka=a;a.dispatchEvent(c);a.onComputing(b)}function Lp(a,b){var c=new Ae;c.Dj=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}J.prototype.Zu=function(){};J.prototype.av=function(){};J.prototype.$u=function(){};v("X.volume",J);v("X.volume.prototype.modified",J.prototype.ca);v("X.volume.prototype.sliceInfoChanged",J.prototype.SK);v("X.volume.prototype.onComputing",J.prototype.Zu);
v("X.volume.prototype.onComputingProgress",J.prototype.av);v("X.volume.prototype.onComputingEnd",J.prototype.$u);function Mp(a,b){Yc.call(this);this.o=a;var c=Yh(this.o)?this.o:this.o?this.o.body:null;this.kI=!!c&&Ci(c);this.zA=G(this.o,fc?"DOMMouseScroll":"mousewheel",this,b)}w(Mp,Yc);
Mp.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Cc;if("mousewheel"==a.type){c=1;if(E||gc&&(bc||nc("532.0")))c=40;d=Np(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=Np(-a.wheelDeltaX,c),c=Np(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;u(this.IA)&&(b=fd(b,-this.IA,this.IA));u(this.JA)&&(c=fd(c,-this.JA,this.JA));this.kI&&(b=-b);b=new Op(d,a,b,c);this.dispatchEvent(b)};function Np(a,b){return gc&&(ac||cc)&&0!=a%b?a:a/b}
Mp.prototype.f=function(){Mp.d.f.call(this);Tc(this.zA);this.zA=null};function Op(a,b,c,d){Fc.call(this,b);this.type="mousewheel";this.detail=a;this.qh=c;this.zd=d}w(Op,Fc);function Pp(){Yc.call(this)}w(Pp,Yc);f=Pp.prototype;f.eg=0;f.Tf=0;f.gf=100;f.Ce=0;f.Ph=1;f.ce=!1;f.qk=!1;f.J=function(a){a=Qp(this,a);this.eg!=a&&(this.eg=a+this.Ce>this.gf?this.gf-this.Ce:a<this.Tf?this.Tf:a,this.ce||this.qk||this.dispatchEvent("change"))};f.K=function(){return Qp(this,this.eg)};f.Xi=function(a){a=Qp(this,a);this.Ce!=a&&(this.Ce=0>a?0:this.eg+a>this.gf?this.gf-this.eg:a,this.ce||this.qk||this.dispatchEvent("change"))};
f.$e=function(){var a=this.Ce;return null==this.Ph?a:Math.round(a/this.Ph)*this.Ph};f.ie=function(a){if(this.Tf!=a){var b=this.ce;this.ce=!0;this.Tf=a;a+this.Ce>this.gf&&(this.Ce=this.gf-this.Tf);a>this.eg&&this.J(a);a>this.gf&&(this.Ce=0,this.kd(a),this.J(a));(this.ce=b)||this.qk||this.dispatchEvent("change")}};f.va=function(){return Qp(this,this.Tf)};
f.kd=function(a){a=Qp(this,a);if(this.gf!=a){var b=this.ce;this.ce=!0;this.gf=a;a<this.eg+this.Ce&&this.J(a-this.Ce);a<this.Tf&&(this.Ce=0,this.ie(a),this.J(this.gf));a<this.Tf+this.Ce&&(this.Ce=this.gf-this.Tf);(this.ce=b)||this.qk||this.dispatchEvent("change")}};f.ja=function(){return Qp(this,this.gf)};f.wh=function(){return this.Ph};f.Qg=function(a){this.Ph!=a&&(this.Ph=a,a=this.ce,this.ce=!0,this.kd(this.ja()),this.Xi(this.$e()),this.J(this.K()),(this.ce=a)||this.qk||this.dispatchEvent("change"))};
function Qp(a,b){return null==a.Ph?b:a.Tf+Math.round((b-a.Tf)/a.Ph)*a.Ph};function Rp(a,b){bj.call(this,a);this.ny=null;this.Ia=new Pp;this.mI=b||ed;G(this.Ia,"change",this.dA,!1,this)}w(Rp,bj);f=Rp.prototype;f.Da="horizontal";f.Mn=!1;f.HI=!1;f.rg=10;f.ar=0;f.sA=!0;f.dr=0;f.BD=1E3;f.Bc=!0;f.De=!1;f.v=function(){Rp.d.v.call(this);var a=this.M().v("div",this.U(this.Da));this.Ud(a)};f.Ud=function(a){Rp.d.Ud.call(this,a);Vk(a,this.U(this.Da));this.Ty();Qk(this.a(),"slider");Sp(this)};
f.Ya=function(){Rp.d.Ya.call(this);this.pe=new Zl(this.la);this.Kf=new Zl(this.qc);this.pe.Bi(this.De);this.Kf.Bi(this.De);this.pe.Ct=this.Kf.Ct=ea;this.ib=new Rn(this.a());Tp(this,!0);this.a().tabIndex=0;this.Vg()};
function Tp(a,b){b?(a.Za().B(a.pe,"beforedrag",a.uq).B(a.Kf,"beforedrag",a.uq).B(a.pe,["start","end"],a.zq).B(a.Kf,["start","end"],a.zq).B(a.ib,"key",a.vq).B(a.a(),"click",a.wq).B(a.a(),"mousedown",a.wq),a.sA&&Up(a,!0)):(a.Za().kb(a.pe,"beforedrag",a.uq).kb(a.Kf,"beforedrag",a.uq).kb(a.pe,["start","end"],a.zq).kb(a.Kf,["start","end"],a.zq).kb(a.ib,"key",a.vq).kb(a.a(),"click",a.wq).kb(a.a(),"mousedown",a.wq),a.sA&&Up(a,!1))}f.pc=function(){Rp.d.pc.call(this);Bc(this.pe,this.Kf,this.ib,this.pk)};
f.uq=function(a){var b=a.Jt==this.pe?this.la:this.qc,c;"vertical"==this.Da?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.ja()-this.va())+this.va()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.ja()-this.va())+this.va();c=a.Jt==this.pe?Math.min(Math.max(c,this.va()),this.K()+this.$e()):Math.min(Math.max(c,this.K()),this.ja());Vp(this,b,c)};
f.zq=function(a){var b="start"==a.type;Zk(this.a(),"goog-slider-dragging",b);Zk(a.target.handle,"goog-slider-thumb-dragging",b);a=a.Jt==this.pe;b?(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j")):(this.dispatchEvent("m"),this.dispatchEvent(a?"i":"k"))};
f.vq=function(a){var b=!0;switch(a.keyCode){case 36:Wp(this,this.va());break;case 35:Wp(this,this.ja());break;case 33:Xp(this,this.rg);break;case 34:Xp(this,-this.rg);break;case 37:var c=this.De&&this.Fe()?1:-1;Xp(this,a.shiftKey?c*this.rg:c*this.Yo);break;case 40:Xp(this,a.shiftKey?-this.rg:-this.Yo);break;case 39:c=this.De&&this.Fe()?-1:1;Xp(this,a.shiftKey?c*this.rg:c*this.Yo);break;case 38:Xp(this,a.shiftKey?this.rg:this.Yo);break;default:b=!1}b&&a.preventDefault()};
f.wq=function(a){this.a().focus&&this.a().focus();var b=a.target;Zh(this.la,b)||Zh(this.qc,b)||(b="click"==a.type,b&&ya()<this.dr+this.BD||(b||(this.dr=ya()),this.HI?Wp(this,Yp(this,a)):(this.iw(a),this.of=Zp(this,Yp(this,a)),this.nA="vertical"==this.Da?this.Tq<this.of.offsetTop:this.Tq>$p(this,this.of)+this.of.offsetWidth,a=Ch(this.a()),this.Za().B(a,"mouseup",this.gw,!0).B(this.a(),"mousemove",this.iw),this.Pi||(this.Pi=new Qf(200),this.Za().B(this.Pi,Rf,this.eA)),this.eA(),this.Pi.start())))};
f.cA=function(a){Xp(this,(0<a.detail?-1:1)*this.Yo);a.preventDefault()};f.eA=function(){var a;if("vertical"==this.Da){var b=this.Tq,c=this.of.offsetTop;this.nA?b<c&&(a=aq(this,this.of)+this.rg):b>c+this.of.offsetHeight&&(a=aq(this,this.of)-this.rg)}else b=this.Tq,c=$p(this,this.of),this.nA?b>c+this.of.offsetWidth&&(a=aq(this,this.of)+this.rg):b<c&&(a=aq(this,this.of)-this.rg);ca(a)&&Vp(this,this.of,a)};
f.gw=function(){this.Pi&&this.Pi.stop();var a=Ch(this.a());this.Za().kb(a,"mouseup",this.gw,!0).kb(this.a(),"mousemove",this.iw)};function bq(a,b){var c=Di(b,a.a());return"vertical"==a.Da?c.y:a.De&&a.Fe()?a.a().clientWidth-c.x:c.x}f.iw=function(a){this.Tq=bq(this,a)};function Yp(a,b){var c=a.va(),d=a.ja();if("vertical"==a.Da){var e=a.la.offsetHeight,h=a.a().clientHeight-e,e=bq(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.la.offsetWidth;h=a.a().clientWidth-e;e=bq(a,b)-e/2;return(d-c)*e/h+c}
function aq(a,b){if(b==a.la)return a.Ia.K();if(b==a.qc)return a.Ia.K()+a.Ia.$e();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.Pf=function(){return this.pe.Pf()||this.Kf.Pf()};function Xp(a,b){Math.abs(b)<a.wh()&&(b=(0==b?0:0>b?-1:1)*a.wh());var c=aq(a,a.la)+b,d=aq(a,a.qc)+b,c=fd(c,a.va(),a.ja()-a.ar),d=fd(d,a.va()+a.ar,a.ja());cq(a,c,d-c)}function Vp(a,b,c){var d=Qp(a.Ia,c);c=b==a.la?d:a.Ia.K();b=b==a.qc?d:a.Ia.K()+a.Ia.$e();c>=a.va()&&b>=c+a.ar&&a.ja()>=b&&cq(a,c,b-c)}
function cq(a,b,c){a.va()<=b&&b<=a.ja()-c&&a.ar<=c&&c<=a.ja()-b&&(b!=a.K()||c!=a.$e())&&(a.Ia.qk=!0,a.Ia.Xi(0),a.Ia.J(b),a.Ia.Xi(c),a.Ia.qk=!1,a.dA())}f.va=function(){return this.Ia.va()};f.ie=function(a){this.Ia.ie(a)};f.ja=function(){return this.Ia.ja()};f.kd=function(a){this.Ia.kd(a)};function Zp(a,b){return b<=a.Ia.K()+a.Ia.$e()/2?a.la:a.qc}f.dA=function(){this.Vg();Sp(this);this.dispatchEvent("change")};
f.Vg=function(){if(this.la&&!this.Mn){var a=dq(this,aq(this,this.la)),b=dq(this,aq(this,this.qc));if("vertical"==this.Da)this.la.style.top=a.y+"px",this.qc.style.top=b.y+"px",this.Hb&&(a=eq(b.y,a.y,this.la.offsetHeight),this.Hb.style.top=a.offset+"px",this.Hb.style.height=a.size+"px");else{var c=this.De&&this.Fe()?"right":"left";this.la.style[c]=a.x+"px";this.qc.style[c]=b.x+"px";this.Hb&&(a=eq(a.x,b.x,this.la.offsetWidth),this.Hb.style[c]=a.offset+"px",this.Hb.style.width=a.size+"px")}}};
function eq(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function dq(a,b){var c=new N;if(a.la){var d=a.va(),e=a.ja(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Da?(d=a.a().clientHeight-a.la.offsetHeight,e=Math.round(e*d),c.x=$p(a,a.la),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.la.offsetWidth)),c.x=d,c.y=a.la.offsetTop)}return c}
function Wp(a,b){b=fd(b,a.va(),a.ja());a.Mn&&a.$p.stop(!0);var c=new Zj,d,e=Zp(a,b),h=a.K(),k=a.$e(),l=aq(a,e),n=dq(a,l);d=a.wh();Math.abs(b-l)<d&&(b=fd(l+(b>l?d:-d),a.va(),a.ja()));Vp(a,e,b);l=dq(a,aq(a,e));d="vertical"==a.Da?[$p(a,e),l.y]:[l.x,e.offsetTop];n=new Oj(e,[n.x,n.y],d,100);n.Bi(a.De);c.add(n);a.Hb&&fq(a,e,h,k,l,c);a.ny&&(e=a.ny.lO(h,b,100),D(e,function(a){c.add(a)}));a.$p=c;a.Za().B(c,"end",a.AF);a.Mn=!0;c.play(!1)}f.Bd=function(){return this.Mn};
function fq(a,b,c,d,e,h){var k=dq(a,c),l=dq(a,c+d);c=k;d=l;b==a.la?c=e:d=e;"vertical"==a.Da?(b=eq(l.y,k.y,a.la.offsetHeight),k=eq(d.y,c.y,a.la.offsetHeight),e=new Oj(a.Hb,[$p(a,a.Hb),b.offset],[$p(a,a.Hb),k.offset],100),b=new Rj(a.Hb,b.size,k.size,100)):(b=eq(k.x,l.x,a.la.offsetWidth),k=eq(c.x,d.x,a.la.offsetWidth),e=new Oj(a.Hb,[b.offset,a.Hb.offsetTop],[k.offset,a.Hb.offsetTop],100),b=new Qj(a.Hb,b.size,k.size,100));e.Bi(a.De);b.Bi(a.De);h.add(e);h.add(b)}f.AF=function(){this.Mn=!1};
f.Nh=function(a){if(this.Da!=a){var b=this.U(this.Da),c=this.U(a);this.Da=a;this.a()&&(a=this.a(),Uk(a,b)&&(Xk(a,b),Vk(a,c)),b=this.De&&this.Fe()?"right":"left",this.la.style[b]=this.la.style.top="",this.qc.style[b]=this.qc.style.top="",this.Hb&&(this.Hb.style[b]=this.Hb.style.top="",this.Hb.style.width=this.Hb.style.height=""),this.Vg())}};f.Pb=function(){return this.Da};
f.f=function(){Rp.d.f.call(this);this.Pi&&this.Pi.g();delete this.Pi;this.$p&&this.$p.g();delete this.$p;delete this.la;delete this.qc;this.Hb&&delete this.Hb;this.Ia.g();delete this.Ia;this.ib&&(this.ib.g(),delete this.ib);this.pk&&(this.pk.g(),delete this.pk);this.pe&&(this.pe.g(),delete this.pe);this.Kf&&(this.Kf.g(),delete this.Kf)};f.Yo=1;f.wh=function(){return this.Ia.wh()};f.Qg=function(a){this.Ia.Qg(a)};f.K=function(){return this.Ia.K()};f.J=function(a){Vp(this,this.la,a)};f.$e=function(){return this.Ia.$e()};
f.Xi=function(a){Vp(this,this.qc,this.Ia.K()+a)};f.$=function(a){Oi(this.a(),a);a&&this.Vg()};function Sp(a){var b=a.a();b&&(Rk(b,"valuemin",a.va()),Rk(b,"valuemax",a.ja()),Rk(b,"valuenow",a.K()),Rk(b,"valuetext",a.mI(a.K())||""))}function Up(a,b){b?(a.pk||(a.pk=new Mp(a.a())),a.Za().B(a.pk,"mousewheel",a.cA)):a.Za().kb(a.pk,"mousewheel",a.cA)}f.ic=function(a){this.Bc!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Bc=a,Tp(this,a),a||this.gw(),Zk(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Bc};function $p(a,b){return a.De?Mj(b):b.offsetLeft};function gq(a){Rp.call(this,a);this.Ia.J(this.va());this.Ia.Xi(this.ja()-this.va())}w(gq,Rp);gq.prototype.U=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};gq.prototype.Pj=function(a){a=this.M().v("div",a);Qk(a,"button");return a};
gq.prototype.Ty=function(){var a=Eh(null,"goog-twothumbslider-value-thumb",this.a())[0],b=Eh(null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Eh(null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.Pj("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.Pj("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.M().v("div","goog-twothumbslider-rangehighlight"),this.M().pu(c,a));this.la=a;this.qc=b;this.Hb=c};function hq(){Td.call(this);this.s="fibers";za(this,new dd)}w(hq,Td);v("X.fibers",hq);function iq(){this.Bk=S("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.uc});kl.call(this,"",this.Bk,!0);Q(this.yb,iq.CSS.OD);this.yb.style.marginTop="0px"}w(iq,kl);v("nrg.ui.ZippyTree",iq);var on="o",jq={PL:"n",CD:on};iq.ID_PREFIX="nrg.ui.ZippyTree";iq.CSS_SUFFIX={OD:"rootnode"};f=iq.prototype;f.nk=1;f.Di=!1;f.hI=!0;f.Hq=1;f.Lt=0;f.Fr=null;f.rf=null;f.Lv=function(a){this.Yy=a};f.On=function(){return 0===Uh(this.ti).length};f.Ly=function(){this.Wo(function(a){a.Wb.Qb(!1)},this)};
f.en=function(){this.Ly()};f.MF=function(){var a=[];this.Wo(function(b){a.push(b)},this);return a};f.fu=function(){var a=[];C(this.Ic,function(b){a.push(b)});return a};f.Bl=function(){this.Wo(function(a){a.Wb.Qb(!0)},this)};f.Wo=function(a,b){C(b.Ic,function(b){a(b);this.Wo(a,b)}.bind(this))};f.a=function(){return this.Bk};f.Qb=function(a,b){return kq(this,a,b,!0)};
function kq(a,b,c,d){c=null!=c?c:a;if(null!=c.Ic[b]){var e=c.Ic[b],h=e.Wb;null!=h.Ve?Rc(h,d?"a":"b",function(){h.Ag!=d&&e.Qb(d)}):e.Qb(d);return e}}f.uo=function(a,b){return kq(this,a,b,!1)};f.nq=function(a){var b=this,c=[];D(a,function(a){c.push(b.Ic[a]);b=b.Ic[a]}.bind(this));return c};f.Ue=function(a,b){!g(a)||Yh(a)?lq(this,a,b):D(a,function(a){this.Ue(a,b)}.bind(this))};function lq(a,b,c){c?(c&&(c=r(c)?[c]:c,c.length>a.nk&&(a.nk=c.length)),a.hn(c,a,b)):Rh(a.Bk,b)}
f.hn=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.ti;if(0==a.length)mq(this,e,c),null!=c&&nq(this,c,d-2);else{0<a.length&&a.length>this.nk&&(this.nk=a.length);if(b.Ic[a[0]])e=b.Ic[a[0]];else{var h=a[0];e.style.opacity=this.Hq;var k=new kl(h,e,!1);b.yb.parentNode==this.Bk&&2==this.Bk.childNodes.length&&(k.yb.style.marginTop="5px");k.yb.style.left="inherit";k.yb.style.width="inherit";oq(this,k);b.Ic[h]=k;k.yb.style.opacity=this.Hq;e.style.opacity=1;this.Di&&pq(this,k.yb);this.dispatchEvent({type:on,
fe:k});e=k}nq(this,e.yb,d-1);this.hn(1<a.length?a.slice(1):[],e,c,d+1)}};function nq(a,b,c){null!=b&&b._maxDepth!=a.nk&&(null==b._maxDepth&&(b._maxDepth=a.nk),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}function oq(a,b){G(b,"a",function(){this.dispatchEvent({type:"a",fe:b})}.bind(a));G(b,"c",function(){this.dispatchEvent({type:"c",fe:b})}.bind(a));G(b,"b",function(){this.dispatchEvent({type:"b",fe:b})}.bind(a))}
function pq(a,b){(new Uj(b,a.Lt)).play()}f.jK=function(){this.Di&&1!=this.rf.N&&this.rf.play()};f.nL=function(a){this.Hq=(this.Di=!0===a)?0:1;this.Lt=this.Di?300:0;this.Di&&(qq(this),this.Fr=[],this.rf=new Zj,G(this.rf,"end",this.Jy.bind(this)))};function mq(a,b,c){null!=c&&(kk(c,{position:"relative"}),c.style.opacity=0,pk(c,400),null!=a.Yy?a.Yy(b,c):b.appendChild(c),rq(b),a.Di?pq(a,c,function(){this.dispatchEvent({type:"n"})}.bind(a)):a.dispatchEvent({type:"n"}))}
function rq(a){var b=[],c=[],d=Uh(a),e=d.length;D(d,function(a){Uk(a,kl.CSS.ep)?b.push(a):1==a.childNodes.length&&Uk(a.childNodes[0],kl.CSS.Yg)&&c.push(a)});D(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}f.Jy=function(){for(this.rf.g();this.Fr.length;)this.rf.add(this.Fr[0]),zb.splice.call(this.Fr,0,1);G(this.rf,"end",this.Jy.bind(this));this.rf.play()};
function qq(a){null!=a.AB&&(a.Gt(a.AB),delete a.AB);null!=a.rf&&(a.bq(a.rf),delete a.rf)}f.f=function(){iq.d.f.call(this);T(this.Bk);delete this.Bk;qq(this);delete this.nk;delete this.Di;delete this.hI;delete this.Hq;delete this.Lt};v("nrg.ui.ZippyTree.EventType",jq);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",iq.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",iq.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");
v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Uh(a),d=b[ll].toLowerCase(),e,h,k=c.length,l=0;l<k;l++){if(h=c[l],null!=h[ll]&&(e=h[ll].toLowerCase(),e=Ka(d,e),0>e)){Th(b,h);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",iq.prototype.Lv);v("nrg.ui.ZippyTree.prototype.isEmpty",iq.prototype.On);
v("nrg.ui.ZippyTree.prototype.contractAll",iq.prototype.Ly);v("nrg.ui.ZippyTree.prototype.collapseAll",iq.prototype.en);v("nrg.ui.ZippyTree.prototype.getAllNodes",iq.prototype.MF);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",iq.prototype.fu);v("nrg.ui.ZippyTree.prototype.expandAll",iq.prototype.Bl);v("nrg.ui.ZippyTree.prototype.traverse",iq.prototype.Wo);v("nrg.ui.ZippyTree.prototype.getElement",iq.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",iq.prototype.Qb);
v("nrg.ui.ZippyTree.prototype.setCollapsed",iq.prototype.uo);v("nrg.ui.ZippyTree.prototype.getFolderNodes",iq.prototype.nq);v("nrg.ui.ZippyTree.prototype.addContents",iq.prototype.Ue);v("nrg.ui.ZippyTree.prototype.createBranch",iq.prototype.hn);v("nrg.ui.ZippyTree.prototype.playFx",iq.prototype.jK);v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",iq.prototype.nL);v("nrg.ui.ZippyTree.prototype.disposeInternal",iq.prototype.f);function sq(){}w(sq,In);fa(sq);sq.prototype.v=function(a){var b=a.M().v("span",this.ak(a).join(" "));tq(this,b,a.qi);return b};sq.prototype.ub=function(a,b){b=sq.d.ub.call(this,a,b);var c=Tk(b),d=uq;Hb(c,vq(this,wq))?d=wq:Hb(c,vq(this,xq))?d=xq:Hb(c,vq(this,uq))&&(d=uq);a.qi=d;Rk(b,"checked",d==wq?"mixed":d==xq?"true":"false");return b};sq.prototype.Bg=function(){return"checkbox"};
function tq(a,b,c){if(b){var d=vq(a,c);Uk(b,d)||(C(yq,function(a){a=vq(this,a);Zk(b,a,a==d)},a),Rk(b,"checked",c==wq?"mixed":c==xq?"true":"false"))}}sq.prototype.U=function(){return"goog-checkbox"};function vq(a,b){var c=a.U();if(b==xq)return c+"-checked";if(b==uq)return c+"-unchecked";if(b==wq)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function zq(a,b,c){c=c||sq.Zd();Xn.call(this,null,c,b);this.qi=ca(a)?a:uq}w(zq,Xn);var xq=!0,uq=!1,wq=null,yq={IL:xq,uN:uq,vN:wq};f=zq.prototype;f.wb=null;f.zh=function(){return this.qi==xq};f.lf=function(a){a!=this.qi&&(this.qi=a,tq(this.Ma(),this.a(),this.qi))};f.ag=function(a){this.ea?(this.pc(),this.wb=a,this.Ya()):this.wb=a};f.toggle=function(){this.lf(this.qi?uq:xq)};
f.Ya=function(){zq.d.Ya.call(this);if(this.gk){var a=this.Za();this.wb&&a.B(this.wb,"click",this.gu).B(this.wb,"mouseover",this.hk).B(this.wb,"mouseout",this.xq).B(this.wb,"mousedown",this.Fg).B(this.wb,"mouseup",this.Nf);a.B(this.a(),"click",this.gu)}this.wb&&(this.wb.id||(this.wb.id=ej(this)+".lbl"),Rk(this.a(),"labelledby",this.wb.id))};f.ic=function(a){zq.d.ic.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.gu=function(a){a.stopPropagation();var b=this.qi?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.Mf=function(a){32==a.keyCode&&this.gu(a);return!1};Fn("goog-checkbox",function(){return new zq});function Aq(){Td.call(this);this.s="mesh";za(this,new dd)}w(Aq,Td);v("X.mesh",Aq);function Bq(){V.call(this);this.Sf=[];this.nf=[]}w(Bq,V);v("xiv.ui.ctrl.XtkController",Bq);Bq.ID_PREFIX="xiv.ui.ctrl.XtkController";Bq.CSS_SUFFIX={mD:"label",$C:"component"};var Cq=B();function Dq(){return S("div",{id:"Label_"+B(),"class":Bq.CSS.mD})}function Eq(a){a=g(a.file)?a.file[0]:a.file||a.name;return Gk(a)}function Fq(a,b){b.HB([Eq(a)])}f=Bq.prototype;f.Qi=!1;f.n=function(a){Bq.d.n.call(this,a)};f.ag=function(a){null==this.wb&&(this.wb=Dq(),Rh(this.a(),this.wb));this.wb.innerHTML=a};
f.qG=function(){return this.wb};f.HB=function(a){r(a)&&(a=[a]);this.Fl=a};f.hG=function(){return this.Fl};f.Rg=function(a){this.KC=a};f.Ec=function(){return this.KC};f.Wi=function(a){a=this.A=a;this.A instanceof bj?(a=this.A.a(),this.A.ea?this.A.a().parentNode!==this.a()&&this.A.a()!==this.a()&&this.a().appendChild(this.A.a()):this.A.n(this.a())):this.a().appendChild(a);null!=a&&Q(a,Bq.CSS.$C)};f.oz=function(){return Lb(this.Sf,this.nf)};f.yG=function(){return this.Sf};f.tA=function(){return this.Qi};
f.IK=function(a){this.Qi=a};f.aH=function(){return this.nf};f.UF=function(){return this.A};f.bc=ea;f.Td=function(a,b,c){a=new a;a.n();r(b)&&a.ag(b);Rh(this.a(),a.a());null!=c&&G(a,"p",c);return a};f.update=function(){this.A==this?this.k():this.A.k&&this.A.k()};f.k=function(){this.A.k&&this.A!=this&&this.A.k()};f.Ys=function(a,b){var c=this.Td(b,"Color",function(b){a.color=b.color}.bind(this));Fq(a,c);this.nf.push(c);c[Cq]=a;c.update()};
f.iy=function(a,b){var c=this.Td(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});Fq(a,c);this.nf.push(c);c.A.J(1);c.A.k()};f.Zs=function(a,b){var c=this.Td(b,"Visible",function(b){a.visible=b.checked});Fq(a,c);this.nf.push(c);c.A.lf(a.visible)};
f.f=function(){Bq.d.f.call(this);this[Cq]=null;delete this.Qi;delete this.KC;D(this.nf,function(a){H(a);a.g()});Ib(this.nf);delete this.nf;D(this.Sf,function(a){H(a);a.g();controller=null});Ib(this.Sf);delete this.Sf;null!=this.A&&(H(this.A),this.A instanceof bj?this.A.g():T(this.A),delete this.A);null!=this.Fl&&(Ib(this.Fl),delete this.Fl);null!=this.wb&&(T(this.wb),delete this.wb)};v("xiv.ui.ctrl.XtkController.ID_PREFIX",Bq.ID_PREFIX);v("xiv.ui.ctrl.XtkController.CSS_SUFFIX",Bq.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkController.EventType",{HL:"p"});v("xiv.ui.ctrl.XtkController.OBJ_KEY",Cq);v("xiv.ui.ctrl.XtkController.createLabel",Dq);v("xiv.ui.ctrl.XtkController.getXObjLabel",Eq);v("xiv.ui.ctrl.XtkController.getObjectCategory",function(a){if(a instanceof Aq)return"Meshes";if(a instanceof J)return"Volumes";if(a instanceof hq)return"Fibers";if(a instanceof Hp)return"Annotations"});v("xiv.ui.ctrl.XtkController.setControllerFolders",Fq);v("xiv.ui.ctrl.XtkController.prototype.render",Bq.prototype.n);
v("xiv.ui.ctrl.XtkController.prototype.setLabel",Bq.prototype.ag);v("xiv.ui.ctrl.XtkController.prototype.getLabel",Bq.prototype.qG);v("xiv.ui.ctrl.XtkController.prototype.setFolders",Bq.prototype.HB);v("xiv.ui.ctrl.XtkController.prototype.getFolders",Bq.prototype.hG);v("xiv.ui.ctrl.XtkController.prototype.setXObj",Bq.prototype.Rg);v("xiv.ui.ctrl.XtkController.prototype.getXObj",Bq.prototype.Ec);v("xiv.ui.ctrl.XtkController.prototype.setComponent",Bq.prototype.Wi);
v("xiv.ui.ctrl.XtkController.prototype.getAllControllers",Bq.prototype.oz);v("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",Bq.prototype.yG);v("xiv.ui.ctrl.XtkController.prototype.isInitialized",Bq.prototype.tA);v("xiv.ui.ctrl.XtkController.prototype.setInitialized",Bq.prototype.IK);v("xiv.ui.ctrl.XtkController.prototype.getSubControllers",Bq.prototype.aH);v("xiv.ui.ctrl.XtkController.prototype.getComponent",Bq.prototype.UF);
v("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",Bq.prototype.bc);v("xiv.ui.ctrl.XtkController.prototype.createController",Bq.prototype.Td);v("xiv.ui.ctrl.XtkController.prototype.update",Bq.prototype.update);v("xiv.ui.ctrl.XtkController.prototype.updateStyle",Bq.prototype.k);v("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",Bq.prototype.Ys);v("xiv.ui.ctrl.XtkController.prototype.add_opacity",Bq.prototype.iy);v("xiv.ui.ctrl.XtkController.prototype.add_visible",Bq.prototype.Zs);
v("xiv.ui.ctrl.XtkController.prototype.disposeInternal",Bq.prototype.f);function Gq(){Bq.call(this)}w(Gq,Bq);v("xiv.ui.ctrl.Histogram",Gq);Gq.ID_PREFIX="xiv.ui.ctrl.Histogram";Gq.CSS_SUFFIX={UC:"canvas",qD:"linecanvas",sD:"max",zD:"min"};Gq.LEVEL_CUTOFF=.999;f=Gq.prototype;f.OH=.95;f.de=null;f.Ti=null;f.Yr=null;f.Zn=null;f.cs=null;f.cp=null;f.gF="rgb(40,40,40)";f.gq=!1;
f.n=function(a){Gq.d.n.call(this,a);this.Wi(this);this.pi=S("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.UC});this.a().appendChild(this.pi);this.Nj=this.pi.getContext("2d");this.Nj.fillStyle=this.gF;this.Dh=S("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.qD});this.a().appendChild(this.Dh);this.Qf=this.Dh.getContext("2d");this.Yn=S("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.sD},"1000");
this.a().appendChild(this.Yn);this.$n=S("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.zD},"-1000");this.a().appendChild(this.$n)};f.Ec=function(){return Gq.d.Ec.call(this)};
function Hq(a){if(null==a.de){var b=a.Ec(),c=b.max;D(b.image,function(a){D(a,function(a){D(a,function(a){if(null==this.de){this.de=[];for(var b=0,b=0;b<=c;b++)this.de.push(0)}this.de[parseInt(a)]++;this.Yr++}.bind(this))}.bind(this))}.bind(a));if(null!=a.de){var d;null==a.Ti&&(a.Ti=[],a.Zn=0,D(a.de,function(a){d=a/this.Yr;this.Ti.push(d);this.Zn=Math.max(this.Zn,d)}.bind(a)))}}}
f.gz=function(){if(null!=this.Ec()){var a=Ki(this.pi),b=a.width,a=a.height;this.pi.height=a;this.pi.width=b;this.Dh.height=a;this.Dh.width=b;Hq(this);if(null!=this.de)for(var b=Math.round(b/this.Ec().windowHigh),b=0<b?b:1,c=this.OH/this.Zn,d,e=0,h=this.Ti.length;e<h;e++)d=this.Ti[e]*c*a,this.Nj.fillRect(b*e,a,b,-Math.round(d)),0<d&&!1==this.gq&&(this.gq=!0)}};f.Hz=function(a){if(null!=this.de)for(var b=0,c=0,d=this.de.length;c<d;c++)if(b+=this.de[c],b/this.Yr>=a)return c};
f.update=function(){this.gq||this.gz();this.DC();if(null!=this.Ec()){var a=Ki(this.Dh),b=a.width,a=a.height;this.Dh.width=b;var c;c=0==this.bj&&0<this.Oh?Math.round(this.cp/this.Oh*b):Math.round(this.cp/this.bj*b);b=0==this.Oh?0:Math.round(this.cs/this.Oh*b);this.Qf.beginPath();this.Qf.strokeStyle="gray";this.Qf.moveTo(c,a);this.Qf.lineTo(b,0);this.Qf.lineWidth=.5;this.Qf.stroke();b=c+(b-c)/2;this.Qf.moveTo(b,a);this.Qf.lineTo(b,a-20);this.Qf.lineWidth=.5;this.Qf.stroke()}};
f.DC=function(){null!=this.Ec()&&(null==this.bj&&(this.bj=parseInt(this.Ec().windowLow),this.Oh=parseInt(this.Ec().windowHigh),this.bj=isNaN(this.bj)?null:this.bj,this.Oh=isNaN(this.Oh)?null:this.Oh,this.cp=this.bj,this.cs=this.Oh),this.cp=parseInt(this.Ec().windowLow),this.cs=parseInt(this.Ec().windowHigh),this.$n.innerHTML=this.cp,this.Yn.innerHTML=this.cs)};
f.f=function(){Gq.d.f.call(this);null!=this.Yn&&(T(this.Yn),delete this.Yn);null!=this.$n&&(T(this.$n),delete this.$n);null!=this.pi&&(T(this.pi),delete this.pi);null!=this.Dh&&(T(this.Dh),delete this.Dh);null!=this.de&&(Ib(this.de),delete this.de);null!=this.Ti&&(Ib(this.Ti),delete this.Ti);delete this.gq;delete this.Yr;delete this.Zn;delete this.Nj;delete this.Qf;delete this.bj;delete this.Oh};v("xiv.ui.ctrl.Histogram.EventType",{});v("xiv.ui.ctrl.Histogram.ID_PREFIX",Gq.ID_PREFIX);
v("xiv.ui.ctrl.Histogram.CSS_SUFFIX",Gq.CSS_SUFFIX);v("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",Gq.LEVEL_CUTOFF);v("xiv.ui.ctrl.Histogram.prototype.render",Gq.prototype.n);v("xiv.ui.ctrl.Histogram.prototype.draw",Gq.prototype.gz);v("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",Gq.prototype.Hz);v("xiv.ui.ctrl.Histogram.prototype.update",Gq.prototype.update);v("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",Gq.prototype.DC);v("xiv.ui.ctrl.Histogram.prototype.disposeInternal",Gq.prototype.f);function Iq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);V.call(this);this.ez=a;this.Vi=b;this.an=null;this.cb=new Zl(this.a());this.Or()}w(Iq,V);v("nrg.ui.ResizeDragger",Iq);Iq.ID_PREFIX="nrg.ui.ResizeDragger";Iq.CSS_SUFFIX={};f=Iq.prototype;f.fg=null;f.yh=null;f.wl=null;f.qn=null;f.yg=null;f.sh=null;f.fq=null;f.pn=null;f.offsetX=0;f.SB=function(a){this.offsetX=a};f.offsetY=0;f.NK=function(a){this.offsetY=a};f.Ta=null;f.xh=null;f.xa=null;f.Dd=null;f.ta=null;f.Zb=null;
f.Bd=!1;f.ee=new nh(10,10);f.gd=function(){return this.an};f.Lh=function(a){this.an=a};f.mq=function(){return this.cb};f.wz=function(){return this.ez};f.hd=function(){return this.a()};
f.ej=function(){this.xh=Ki(this.a());this.Ta=wi(this.a());this.fg=-1*this.xh.height/2+this.offsetY;this.yh=-1*this.xh.width/2+this.offsetX;this.cb.Pf()||this.Bd||(this.xa=vb(wi(this.Vi)),this.Dd=vb(Ki(this.Vi)),this.xa.left=this.xa.x,this.xa.top=this.xa.y,this.xa.right=this.xa.x+this.Dd.width,this.xa.bottom=this.xa.y+this.Dd.height,this.ta=vb(wi(this.an)),this.Zb=vb(Ki(this.an)),this.ta.left=this.ta.x,this.ta.top=this.ta.y,this.ta.right=this.ta.x+this.Zb.width,this.ta.bottom=this.ta.y+this.Zb.height,
this.tg&&this.tg(this))};f.QB=function(a){return this.ee=a};f.Or=function(){G(this.cb,"start",this.pv.bind(this));G(this.cb,"drag",this.Uf.bind(this));G(this.cb,"end",this.nv.bind(this))};f.pv=function(){this.dispatchEvent({type:"start_resize"})};f.Uf=function(){this.ej();this.dispatchEvent({type:"resize",vK:this.xa,Dd:this.Dd,aF:this.ta,Zb:this.Zb});null!=this.Ke&&this.Ke()};f.nv=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.cb.Pf()||this.Bd||this.ej()};f.bf=function(){};
f.mf=function(a,b,c){this.ej();a=this.bf(a);u(c)&&0===c?pi(this.a(),a.end):Jq(this,a.start,a.end,b,c)};function Jq(a,b,c,d,e){a.aj=new Oj(a.a(),[b.x,b.y],[c.x,c.y],u(e)?e:500,nk);G(a.aj,"begin",function(){this.Bd=!0;this.pv()}.bind(a));G(a.aj,"animate",a.Uf.bind(a));G(a.aj,"end",function(){this.Bd=!1;this.aj.g();H(this.aj);this.aj.Vd();this.aj=null;ui(this.a(),c);this.nv();d&&d()}.bind(a));a.aj.play()}
f.f=function(){delete this.KO;delete this.LO;delete this.yh;delete this.wl;delete this.qn;delete this.yg;delete this.sh;delete this.fq;delete this.pn;delete this.Bd;sb(this.ee);delete this.ee;delete this.Vi;delete this.an;sb(this.Ta);delete this.Ta;sb(this.xh);delete this.xh;sb(this.xa);delete this.xa;sb(this.Dd);delete this.Dd;sb(this.ta);delete this.ta;sb(this.Zb);delete this.Zb;T(this.cb.handle);this.cb.handle=null;H(this.cb);this.cb.g();delete this.cb;delete this.ez};
v("nrg.ui.ResizeDragger.EventType",{ms:"resize",MD:"start_resize",LD:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Iq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Iq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Iq.prototype.fg);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Iq.prototype.yh);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Iq.prototype.wl);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Iq.prototype.qn);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Iq.prototype.yg);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Iq.prototype.sh);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Iq.prototype.fq);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Iq.prototype.pn);v("nrg.ui.ResizeDragger.prototype.offsetX",Iq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Iq.prototype.SB);v("nrg.ui.ResizeDragger.prototype.offsetY",Iq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Iq.prototype.NK);v("nrg.ui.ResizeDragger.prototype.handlePos",Iq.prototype.Ta);v("nrg.ui.ResizeDragger.prototype.handleSize",Iq.prototype.xh);v("nrg.ui.ResizeDragger.prototype.resizeePos",Iq.prototype.xa);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Iq.prototype.Dd);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Iq.prototype.ta);v("nrg.ui.ResizeDragger.prototype.boundarySize",Iq.prototype.Zb);v("nrg.ui.ResizeDragger.prototype.isAnimating",Iq.prototype.Bd);
v("nrg.ui.ResizeDragger.prototype.minSize",Iq.prototype.ee);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Iq.prototype.gd);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Iq.prototype.Lh);v("nrg.ui.ResizeDragger.prototype.getDragger",Iq.prototype.mq);v("nrg.ui.ResizeDragger.prototype.getDirection",Iq.prototype.wz);v("nrg.ui.ResizeDragger.prototype.getHandle",Iq.prototype.hd);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Iq.prototype.ej);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Iq.prototype.QB);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Iq.prototype.pv);v("nrg.ui.ResizeDragger.prototype.onResize",Iq.prototype.Uf);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Iq.prototype.nv);v("nrg.ui.ResizeDragger.prototype.update",Iq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Iq.prototype.bf);v("nrg.ui.ResizeDragger.prototype.slideToLimits",Iq.prototype.mf);
v("nrg.ui.ResizeDragger.prototype.disposeInternal",Iq.prototype.f);function Kq(a){Iq.call(this,"right",a)}w(Kq,Iq);v("nrg.ui.ResizeDraggerRight",Kq);Kq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Kq.CSS_SUFFIX={};Kq.prototype.tg=function(){this.wl=this.xa.left+this.ee.width+this.yh;this.qn=this.ta.right+this.yh;this.fq=this.qn-this.wl};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Kq.prototype.tg);Kq.prototype.Ke=function(){Ii(this.Vi,Math.min(Math.max(this.Dd.width+(this.Bd?this.Ta.x-this.xa.right+this.yh:this.cb.clientX-this.cb.ew),this.ee.width),this.Zb.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Kq.prototype.Ke);Kq.prototype.update=function(a){this.cb.Pf()||this.Bd||(Kq.d.update.call(this,a),am(this.cb,new ph(this.wl,this.xa.y,this.fq,0)),ui(this.a(),this.xa.right+this.yh,this.xa.y),Ji(this.a(),this.Dd.height))};Kq.prototype.bf=function(a){return{start:new N(this.Ta.x,this.Ta.y),end:"MIN"==a?new N(this.wl,this.Ta.y):new N(this.qn,this.Ta.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Kq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Kq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Kq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Kq.prototype.bf);function Lq(a){Iq.call(this,"right",a)}w(Lq,Iq);v("nrg.ui.ResizeDraggerBottom",Lq);Lq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Lq.CSS_SUFFIX={};Lq.prototype.tg=function(){this.yg=this.xa.top+this.ee.height+this.fg;this.sh=this.ta.bottom+this.fg;this.pn=this.sh-this.yg};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Lq.prototype.tg);Lq.prototype.Ke=function(){Ji(this.Vi,Math.max(this.Dd.height+(this.Ta.y-this.xa.bottom),this.ee.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Lq.prototype.Ke);Lq.prototype.update=function(){this.cb.Pf()||this.Bd||(Lq.d.update.call(this),am(this.cb,new ph(this.ta.x,this.yg,0,this.sh)),ui(this.a(),this.xa.x,this.xa.bottom+this.fg))};Lq.prototype.bf=function(a){return{start:new N(this.Ta.x,this.Ta.y),end:"MIN"==a?new N(this.Ta.x,this.yg):new N(this.Ta.x,this.sh)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Lq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Lq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Lq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Lq.prototype.bf);function Mq(a){Iq.call(this,"right",a)}w(Mq,Iq);v("nrg.ui.ResizeDraggerTop",Mq);Mq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Mq.CSS_SUFFIX={};Mq.prototype.tg=function(){this.yg=this.ta.top-this.fg;this.sh=this.xa.bottom-this.ee.height+this.fg;this.pn=this.sh-this.yg};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Mq.tg);Mq.prototype.Ke=function(){var a=this.Ta.y-this.fg,b=this.Dd.height+(this.Bd?this.xa.y-a:this.cb.fw-this.cb.clientY);this.Vi.style.top=a.toString()+"px";Ji(this.Vi,Math.max(b,this.ee.height))};
Mq.prototype.update=function(){this.cb.Pf()||this.Bd||(Mq.d.update.call(this),am(this.cb,new ph(this.ta.x,this.yg,0,this.pn)),ui(this.a(),this.xa.x,this.xa.y+this.fg))};Mq.prototype.bf=function(a){return{start:new N(this.Ta.x,this.Ta.y),end:"MIN"==a?new N(this.Ta.x,this.sh):new N(this.Ta.x,this.yg)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Mq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Mq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Mq.prototype.tg);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Mq.prototype.Ke);v("nrg.ui.ResizeDraggerTop.resizeMethod",Mq.Ke);v("nrg.ui.ResizeDraggerTop.prototype.update",Mq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Mq.prototype.bf);function Nq(a){Iq.call(this,"right",a)}w(Nq,Iq);v("nrg.ui.ResizeDraggerTopRight",Nq);Nq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Nq.CSS_SUFFIX={};Nq.prototype.ej=function(){Nq.d.ej.call(this);this.cb.Pf()||this.Bd||(Kq.prototype.tg.bind(this)(),Mq.prototype.tg.bind(this)())};Nq.prototype.Uf=function(){Nq.d.Uf.call(this);Kq.prototype.Ke.bind(this)();Mq.prototype.Ke.bind(this)()};
Nq.prototype.update=function(a){this.cb.Pf()||this.Bd||(Nq.d.update.call(this,a),am(this.cb,new ph(this.ta.x+this.yh,this.ta.y+this.fg,this.Zb.width,this.Zb.height)),ui(this.a(),this.xa.right+this.yh,this.xa.y+this.fg))};
Nq.prototype.bf=function(a){var b=new N(this.Ta.x,this.Ta.y),c;"TOP_LEFT"==a?c=new N(this.ta.x,this.ta.y):"TOP_RIGHT"==a?c=new N(this.ta.x+this.Zb.width,this.ta.y):"BOTTOM_RIGHT"==a?c=new N(this.ta.x+this.Zb.width,this.ta.y+this.Zb.height):"BOTTOM_LEFT"==a&&(c=new N(this.ta.x,this.ta.y+this.Zb.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Nq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Nq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Nq.prototype.ej);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Nq.prototype.Uf);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Nq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Nq.prototype.bf);function Oq(a){Iq.call(this,"right",a)}w(Oq,Iq);v("nrg.ui.ResizeDraggerLeft",Oq);Oq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Oq.CSS_SUFFIX={};Oq.prototype.Ke=function(){Ii(this.Vi,Math.min(Math.max(this.Dd.width+(this.xa.x-this.Ta.x),this.ee.width),this.Zb.width));ui(this.a(),this.Ta.x,this.xa.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Oq.prototype.Ke);
Oq.prototype.update=function(a){this.cb.Pf()||this.Bd||(Oq.d.update.call(this,a),am(this.cb,new ph(this.ta.x-this.xh.width,this.ta.y,this.Zb.width-this.ee.width-this.xh.width,0)),ui(this.a(),this.xa.x-this.xh.width,this.xa.y))};Oq.prototype.bf=function(a){return{start:new N(this.Ta.x,this.Ta.y),end:"MIN"==a?new N(this.ta.x+this.ee.width,this.Ta.y):new N(this.ta.x+this.Zb.width-this.ee.width,this.Ta.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Oq.ID_PREFIX);v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Oq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerLeft.resizeMethod",Oq.Ke);v("nrg.ui.ResizeDraggerLeft.prototype.update",Oq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Oq.prototype.bf);function Pq(a,b){V.call(this);this.o=Dh(a);this.Ld={};this.br=this.cr=20;this.dm(b||Pq.mO)}w(Pq,V);v("nrg.ui.Resizable",Pq);Pq.ID_PREFIX="nrg.ui.Resizable";Pq.CSS_SUFFIX={EL:"boundary"};var Qq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Rq=["RIGHT","BOTTOM"],Sq=new ph(0,0,600,600);f=Pq.prototype;f.GK=function(a,b){this.iO(a);if(0>b)throw Error("Threshold must be greater than zero!");this.eO[a]=b};f.hd=function(a){return this.Ld[a].hd()};f.Hl=function(a){return this.Ld[a]};
f.jG=function(){var a=[];D(nb(this.Ld),function(b){a.push(b.hd())});return a};f.gd=function(){return this.Gf};f.Lh=function(a){this.Gf=a;if(this.Gf.parentNode!==this.o.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.PB=function(a){this.br=a};f.RB=function(a){this.cr=a};f.EG=function(){return this.br};f.FG=function(){return this.cr};
f.dm=function(a){a=a||"DEFAULT";r(a)&&(a="ALL"==a.toUpperCase()?Qq:"DEFAULT"==a.toUpperCase()?Rq:[a]);Tq(this);D(a,function(a){if(!r(a))throw Error("String required!");if(!Hb(Qq,a))throw Error("Invalid direction: ",a);this.Ux(a)}.bind(this))};f.kt=function(a){if(!Hb(Qq,a))throw Error("Invalid draggerDir '"+a);};f.NH=function(a){this.kt(a);if(!this.Ld[a])throw Error("No ResizeDragger for "+a);};f.mf=function(a,b,c,d){a=a.toUpperCase();this.kt(a);this.update();this.Ld[a].mf(b,c,d)};
function Uq(a,b){switch(a){case "TOP":return new Mq(b);case "BOTTOM":return new Lq(b);case "LEFT":return new Oq(b);case "RIGHT":return new Kq(b);case "TOP_RIGHT":return new Nq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.Ux=function(a){if(a in this.Ld)throw Error("Resize direction "+a+" already in use.");this.Ld[a]=Uq(a,this.o);G(this.Ld[a],"start_resize",this.zJ.bind(this));G(this.Ld[a],"resize",this.uk.bind(this));G(this.Ld[a],"end_resize",this.yJ.bind(this));this.update()};f.update=function(){if(null!=this.Gf){var a=new nh(this.cr,this.br);C(this.Ld,function(b){this.Gf&&this.Gf.parentNode&&Rh(this.Gf.parentNode,b.hd());b.gd()!==this.Gf&&b.Lh(this.Gf);b.QB(a);b.ej();b.update()}.bind(this))}};f.zJ=function(){this.dispatchEvent({type:"resize_start"})};
f.uk=function(a){this.dispatchEvent({type:"resize",vK:a.xa,Dd:a.Dd,aF:a.ta,Zb:a.Zb})};f.yJ=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Tq(a){C(a.Ld,function(a){a&&(H(a),a.g())});sb(a.Ld)}f.f=function(){Pq.d.f.call(this);Tq(this);delete this.Ld;this.Gf&&(T(this.Gf.parentNode),delete this.Gf)};v("nrg.ui.Resizable.EventType",{ms:"resize",MD:"resize_start",LD:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Pq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Pq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Qq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Rq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Sq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",Uq);v("nrg.ui.Resizable.prototype.setBoundThreshold",Pq.prototype.GK);v("nrg.ui.Resizable.prototype.getHandle",Pq.prototype.hd);v("nrg.ui.Resizable.prototype.getResizeDragger",Pq.prototype.Hl);v("nrg.ui.Resizable.prototype.getHandles",Pq.prototype.jG);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Pq.prototype.gd);v("nrg.ui.Resizable.prototype.setBoundaryElement",Pq.prototype.Lh);v("nrg.ui.Resizable.prototype.setMinHeight",Pq.prototype.PB);v("nrg.ui.Resizable.prototype.setMinWidth",Pq.prototype.RB);v("nrg.ui.Resizable.prototype.getMinHeight",Pq.prototype.EG);v("nrg.ui.Resizable.prototype.getMinWidth",Pq.prototype.FG);v("nrg.ui.Resizable.prototype.setResizeDirections",Pq.prototype.dm);v("nrg.ui.Resizable.prototype.checkDirectionValid",Pq.prototype.kt);
v("nrg.ui.Resizable.prototype.hasDragger",Pq.prototype.NH);v("nrg.ui.Resizable.prototype.slideToLimits",Pq.prototype.mf);v("nrg.ui.Resizable.prototype.addResizeDirection",Pq.prototype.Ux);v("nrg.ui.Resizable.prototype.update",Pq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Pq.prototype.f);function Vq(a){V.call(this);this.Cb=a}w(Vq,V);v("xiv.ui.layouts.LayoutFrame",Vq);Vq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Vq.CSS_SUFFIX={};f=Vq.prototype;f.$d=function(){return this.Cb};f.vc=null;f.R=function(){return this.ip};f.dm=function(a){this.ip=this.ip?this.ip:new Pq(this.a());this.ip.dm(a)};f.f=function(){Vq.d.f.call(this);delete this.Cb};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Vq.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Vq.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Vq.prototype.$d);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Vq.prototype.R);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Vq.prototype.dm);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Vq.prototype.f);function Wq(){V.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.i={}}w(Wq,V);v("xiv.ui.layouts.Layout",Wq);var Xq="Slider_"+B(),Yq="FrameDisplay_"+B(),Zq="ZoomDisplay_"+B(),$q="Crosshairs_"+B(),ar={qa:Xq,Hd:Yq,wf:Zq,Yc:$q};
Wq.ID_PREFIX="xiv.ui.layouts.Layout";Wq.CSS_SUFFIX={};f=Wq.prototype;f.jb=20;f.Vc=20;f.KK=function(a){this.Vc=a};f.LK=function(a){this.jb=a};f.uG=function(){return this.i};f.Yt=function(a){return this.i[a]};f.tG=function(a){window.console.log(a,this.i[a]);var b={};C(ar,function(c){b[c]=this.i[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};f.$d=function(){return this.constructor.TITLE};f.Sx=function(a){this.i=this.i?this.i:{};this.i[a.$d()]=a};f.xg=function(){this.dispatchEvent({type:"q"})};
f.Gv=function(){C(this.xn(),function(a){null!=a.qa&&(a.qa.g(),delete a.qa);null!=a.Yc&&(a.Yc.g(),delete a.Yc);null!=a.Hd&&(a.Hd.g(),delete a.Hd);null!=a.wf&&(a.wf.g(),delete a.wf)})};f.$o=function(){C(this.xn(),function(a){null!=a.qa&&(a.qa.k(),a.qa.J(a.qa.K()));null!=a.Yc&&a.Yc.k();null!=a.Hd&&a.Hd.k();null!=a.wf&&a.wf.k()})};f.k=function(){Wq.d.k.call(this);this.xg()};f.f=function(){Wq.d.f.call(this);delete this.Vc;delete this.jb;this.nn(this.rD);delete this.rD};
v("xiv.ui.layouts.Layout.EventType",{ms:"q"});v("xiv.ui.layouts.Layout.INTERACTORS",ar);v("xiv.ui.layouts.Layout.ID_PREFIX",Wq.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",Wq.CSS_SUFFIX);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Wq.prototype.KK);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Wq.prototype.LK);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Wq.prototype.uG);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Wq.prototype.Yt);
v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Wq.prototype.tG);v("xiv.ui.layouts.Layout.prototype.getTitle",Wq.prototype.$d);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Wq.prototype.Sx);v("xiv.ui.layouts.Layout.prototype.dispatchResize",Wq.prototype.xg);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Wq.prototype.Gv);v("xiv.ui.layouts.Layout.prototype.updateInteractors",Wq.prototype.$o);v("xiv.ui.layouts.Layout.prototype.updateStyle",Wq.prototype.k);
v("xiv.ui.layouts.Layout.prototype.disposeInternal",Wq.prototype.f);function br(a){$c.call(this);this.s="interactor";this.ve=a;this.Gs=this.Bx=this.Ax=this.Cx=this.zx=this.Dx=null;this.zp=!0;this.ki=this.ei=this.pg=!1;this.Jc=[0,0];this.Bs=new A.P(0,0,0);this.Bm=new A.P(0,0,0);this.wA=0;this.Jx=this.vp=null;this.Ps=!1;this.ob={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(br,$c);br.prototype.__defineGetter__("config",function(){return this.ob});
br.prototype.__defineGetter__("leftButtonDown",function(){return this.pg});br.prototype.__defineGetter__("middleButtonDown",function(){return this.ei});br.prototype.__defineGetter__("rightButtonDown",function(){return this.ki});
br.prototype.oa=function(){this.ob.MOUSEWHEEL_ENABLED?(this.Gs=new Mp(this.ve),this.Dx=G(this.Gs,"mousewheel",this.io.bind(this))):(Tc(this.Dx),this.Gs=null);this.ob.MOUSECLICKS_ENABLED?(this.zx=G(this.ve,"mousedown",this.kv.bind(this)),this.Cx=G(this.ve,"mouseup",this.lv.bind(this))):(Tc(this.zx),Tc(this.Cx));this.ve.oncontextmenu=this.ob.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.ob.KEYBOARD_ENABLED?this.Hh.bind(this):null;this.ob.TOUCH_ENABLED?(this.ob.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.BE=G(this.ve,"touchstart",this.VJ.bind(this)),this.AE=G(this.ve,"touchmove",this.TJ.bind(this)),this.zE=G(this.ve,"touchend",this.PJ.bind(this))):(Tc(this.BE),Tc(this.AE),Tc(this.zE));Tc(this.Ax);Tc(this.Bx);this.Ax=G(this.ve,"mousemove",this.oJ.bind(this));this.Bx=G(this.ve,"mouseout",this.pJ.bind(this))};
br.prototype.kv=function(a){0==a.button?this.pg=!0:1==a.button?this.ei=!0:2==a.button&&(this.ki=!0);eval("this.onMouseDown("+this.pg+","+this.ei+","+this.ki+")");cr(this);a.preventDefault()};br.prototype.lJ=function(){};br.prototype.lv=function(a){0==a.button?this.pg=!1:1==a.button?this.ei=!1:2==a.button&&(this.ki=!1);eval("this.onMouseUp("+this.pg+","+this.ei+","+this.ki+")");cr(this);a.preventDefault()};br.prototype.__defineGetter__("mousePosition",function(){return this.Jc});f=br.prototype;
f.rJ=function(){};f.pJ=function(a){this.zp=!1;this.ob.KEYBOARD_ENABLED&&(window.onkeydown=null);this.ki=this.ei=this.pg=!1;cr(this);this.Bs=new A.P(0,0,0);a.preventDefault()};f.nJ=function(){};f.VJ=function(a){a.preventDefault();a.oa(a.Cc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Bm=new A.P(a.clientX,a.clientY,0);this.Jx=setTimeout(this.RJ.bind(this,a),500)};f.UJ=function(){};
f.RJ=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new qe;a.og=!0;a.xf=this instanceof dr;this.dispatchEvent(a);this.Dp=!0};f.QJ=function(){};function er(a){clearTimeout(a.Jx);if(a.Dp){var b=new qe;b.og=!1;b.xf=a instanceof dr;a.dispatchEvent(b)}a.Dp=!1}f.PJ=function(a){a.preventDefault();eval("this.onTouchEnd()");er(this)};f.OJ=function(){};
f.TJ=function(a){a.preventDefault();this.Dp||er(this);this.touchmoveEvent=a=a.Cc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.P(c[0],c[1],0);var b=c[0]>3*this.ve.clientWidth/4,d=c[0]<this.ve.clientWidth/4,e=c[1]<this.ve.clientHeight/4,c=c[1]>3*this.ve.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Bm.sc(a);this.Bm=a.clone();if(this.Dp)a=new oe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.$c=e,this.dispatchEvent(a);
else if(this instanceof fr&&(b||d))a=new re,a.Ob=0>e.y,this.dispatchEvent(a);else if(this instanceof dr||c)e.scale(3),a=new pe,a.$c=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.P(a[0],a[1],0),b=new A.P(b[0],b[1],0),e=od(a,b),b=e-this.wA,this.wA=e,this.Bm.sc(a),this.Bm=a.clone(),10<Math.abs(b)&&(a=new qe,a.og=0<b,a.xf=this instanceof dr,this.dispatchEvent(a)))};f.SJ=function(){};
f.oJ=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.zp=!0;this.ob.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.Hh.bind(this));a.preventDefault();var b=a.shiftKey;this.Ps=b;this.Jc=[a.offsetX,a.offsetY];var c=new A.P(this.Jc[0],this.Jc[1],0);a=this.Bs.sc(c);this.Bs=c.clone();this.ob.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.ei||this.pg||this.ki)&&cr(this),this.vp=setTimeout(function(){cr(this);var a=new se;a.Hp=c.x;a.Ip=
c.y;this.dispatchEvent(a);this.vp=null}.bind(this),300));0!=a.Rf()&&(this.pg&&!b?(b=new pe,a.scale(3),b.$c=a,this.dispatchEvent(b)):this.ei||this.pg&&b?(b=new oe,b.$c=a,this.dispatchEvent(b)):this.ki&&(b=new qe,b.og=0<a.y,b.xf=!1,this.dispatchEvent(b)))};function cr(a){a.vp&&clearTimeout(a.vp);a.dispatchEvent(new we)}f.sJ=function(){};f.io=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");cr(this);a.preventDefault()};f.fJ=function(){};
f.Hh=function(a){if(this.zp){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");cr(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new oe:b?a=new qe:(a=new pe,this instanceof fr&&(a=new re)),a&&(c=new A.P(0,0,0),37==h?(c.x=5,a.Ob=!1,b&&(a.Ob=!0,a.og=!0,a.xf=!1)):39==h?(c.x=-5,a.Ob=!0,b&&(a.og=!1,a.xf=!1)):38==h?(c.y=5,a.Ob=!0,b&&(a.og=!0,a.xf=!0)):40==h&&(c.y=-5,a.Ob=!1,b&&(a.og=!1,a.xf=!0)),a.$c=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new xe,this.dispatchEvent(a))}};v("X.interactor",br);v("X.interactor.prototype.init",br.prototype.oa);v("X.interactor.prototype.onMouseDown",br.prototype.lJ);v("X.interactor.prototype.onMouseUp",br.prototype.rJ);v("X.interactor.prototype.onMouseMove",br.prototype.nJ);v("X.interactor.prototype.onMouseWheel",br.prototype.sJ);v("X.interactor.prototype.onKey",br.prototype.fJ);v("X.interactor.prototype.onTouchStart",br.prototype.UJ);v("X.interactor.prototype.onTouchMove",br.prototype.SJ);
v("X.interactor.prototype.onTouchEnd",br.prototype.OJ);v("X.interactor.prototype.onTouchHover",br.prototype.QJ);function fr(a){br.call(this,a);this.s="interactor2D"}w(fr,br);fr.prototype.io=function(a){fr.d.io.call(this,a);var b=new re;null==a.zd&&(a.zd=0);b.Ob=0>a.zd;this.dispatchEvent(b)};function gr(a,b){if(!u(a)||!u(b))throw Error("A camera needs valid width and height values.");$c.call(this);this.s="camera";this.yj=new A.P(0,100,0);this.al=new A.P(0,0,0);this.Ob=new A.P(0,0,1);this.Ra=a;this.Fa=b;this.O=this.Xq(this.yj,this.al)}w(gr,$c);gr.prototype.observe=function(a){if(!(null!=a&&a instanceof br))throw Error("Could not observe the interactor.");G(a,$d,this.AJ.bind(this));G(a,Zd,this.uJ.bind(this));G(a,ae,this.eK.bind(this))};
gr.prototype.AJ=function(a){if(!(a instanceof pe))throw Error("Received no valid rotate event.");this.rotate(a.$c)};gr.prototype.eK=function(a){if(!(a instanceof qe))throw Error("Received no valid zoom event.");a.og?this.sm(a.xf):this.tm(a.xf)};gr.prototype.uJ=function(a){if(!(a instanceof oe))throw Error("Received no valid pan event.");this.tr(a.$c)};gr.prototype.__defineGetter__("view",function(){return this.O});
gr.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.O=a});gr.prototype.__defineGetter__("position",function(){return[this.yj.x,this.yj.y,this.yj.z]});gr.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.yj=new A.P(a[0],a[1],a[2]);this.reset()});gr.prototype.__defineGetter__("focus",function(){return[this.al.x,this.al.y,this.al.z]});
gr.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.al=new A.P(a[0],a[1],a[2]);this.reset()});gr.prototype.__defineGetter__("up",function(){return[this.Ob.x,this.Ob.y,this.Ob.z]});gr.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.Ob=new A.P(a[0],a[1],a[2]);this.reset()});f=gr.prototype;f.reset=function(){this.O=this.Xq(this.yj,this.al)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.P(a[0],a[1],0);else if(!(a instanceof A.P))throw Error("Invalid distance vector for rotate operation.");return a};f.tr=function(a){if(g(a)&&2==a.length)a=new A.P(a[0],a[1],0);else if(!(a instanceof A.P))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x;this.O[13]+=a.y};f.sm=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]+=b};f.tm=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]-=b};
f.Xq=function(a,b){if(!(a instanceof A.P&&b instanceof A.P))throw Error("3D vectors required for calculating the view.");return A.t.In()};v("X.camera",gr);v("X.camera.prototype.pan",gr.prototype.tr);v("X.camera.prototype.rotate",gr.prototype.rotate);v("X.camera.prototype.zoomIn",gr.prototype.sm);v("X.camera.prototype.zoomOut",gr.prototype.tm);function hr(a){function b(a,b,d){b=b*Math.PI*2;b=kp(lp(n,Math.cos(b)),lp(m,Math.sin(b)));a=kp(kp(c,lp(e,a)),lp(b,h));d=kp(lp(b,1-Math.abs(d)),lp(k,d));return new pp(a,d)}this.Ab=[];a=a||{};var c=new jp(a.start||[0,-1,0]),d=new jp(a.end||[0,1,0]),e=mp(d,c),h=a.Kg||1;a=a.ya||16;for(var k=np(e),l=.5<Math.abs(k.y()),n=np((new jp(l,!l,0)).Rj(k)),m=np(n.Rj(k)),l=new pp(c,op(k)),d=new pp(d,np(k)),q=[],p=0;p<a;p++){var t=p/a,s=(p+1)/a;q.push(new rp([l,b(0,t,-1),b(0,s,-1)]));q.push(new rp([b(0,s,0),b(0,t,
0),b(1,t,0),b(1,s,0)]));q.push(new rp([d,b(1,s,1),b(1,t,1)]))}return Cp(q)}w(hr,Bp);function ir(){Td.call(this);this.s="cylinder";this.Rs=[-10,-10,-10];this.zs=[10,10,10];this.zj=10;this.yc=32;za(this,new Dp)}w(ir,Td);ir.prototype.__defineGetter__("start",function(){return this.Rs});ir.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.Rs=a});ir.prototype.__defineGetter__("end",function(){return this.zs});ir.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.zs=a});
ir.prototype.__defineGetter__("radius",function(){return this.zj});ir.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.zj=a});ir.prototype.ca=function(){Fp(this,new hr({start:this.Rs,end:this.zs,Kg:this.zj,ya:this.yc}));ir.d.ca.call(this)};v("X.cylinder",ir);v("X.cylinder.prototype.modified",ir.prototype.ca);function Jp(a){J.call(this);this.s="labelmap";this.kh=a;this.Qs=new Float32Array([-255,-255,-255,-255])}w(Jp,J);Jp.prototype.ca=function(){var a=new Ud;a.Ka=this;this.dispatchEvent(a);this.kh.ca()};Jp.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.td)throw Error("No colortable assigned.");b=this.td.Od.get(a).slice(1,5)}this.Qs=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Jp);function jr(a){this.Ab=[];a=a||{};var b=new jp(a.Ae||[0,0,0]),c=a.Kg?a.Kg.length?a.Kg:[a.Kg,a.Kg,a.Kg]:[1,1,1];return Cp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new rp(a[0].map(function(e){e=new jp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new pp(e,new jp(a[1]))}))}))}w(jr,Bp);function kr(){Td.call(this);this.s="cube";this.Oa=[0,0,0];this.Es=this.Ds=this.Cs=20;this.ml=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];za(this,new Dp)}w(kr,Td);kr.prototype.__defineGetter__("center",function(){return this.Oa});kr.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Oa=a});kr.prototype.__defineGetter__("lengthX",function(){return this.Cs});
kr.prototype.__defineSetter__("lengthX",function(a){if(!u(a))throw Error("Invalid lengthX.");this.Cs=a});kr.prototype.__defineGetter__("lengthY",function(){return this.Ds});kr.prototype.__defineSetter__("lengthY",function(a){if(!u(a))throw Error("Invalid lengthY.");this.Ds=a});kr.prototype.__defineGetter__("lengthZ",function(){return this.Es});kr.prototype.__defineSetter__("lengthZ",function(a){if(!u(a))throw Error("Invalid lengthZ.");this.Es=a});
kr.prototype.ca=function(){Fp(this,new jr({Ae:this.Oa,Kg:[this.Cs/2,this.Ds/2,this.Es/2]}));kr.d.ca.call(this)};v("X.cube",kr);v("X.cube.prototype.modified",kr.prototype.ca);function dr(a){br.call(this,a);this.s="interactor3D"}w(dr,br);dr.prototype.io=function(a){dr.d.io.call(this,a);var b=new qe;null==a.zd&&(a.zd=0);b.og=0>a.zd;b.xf=!0;this.dispatchEvent(b)};function lr(a){$c.call(this);this.s="array";this.Wa=[];this.px=a}w(lr,$c);function mr(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}lr.prototype.add=function(a){this.Wa.push(a);return!0};lr.prototype.remove=function(a){a=this.Wa.indexOf(a);-1<a&&this.Wa.splice(a,1);return!0};lr.prototype.clear=function(){this.Wa.length=0};
function nr(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),nr(a,b,d),nr(a,d,c);b<d;++b)if(0<a.px(a.Wa[b],a.Wa[d])){var e=a.Wa[b];a.Wa[b]=a.Wa[d];for(var h=a,k=d,l=c;k+1<l&&0>h.px(h.Wa[k+1],e);){var n=h,m=k+1,q=n.Wa[k];n.Wa[k]=n.Wa[m];n.Wa[m]=q;++k}h.Wa[k]=e}}lr.prototype.sort=function(){nr(this,0,this.Wa.length)};function or(a,b){gr.call(this,a,b);this.s="camera2D"}w(or,gr);or.prototype.rotate=function(a){a=or.d.rotate.call(this,a);var b=new ne;0<a.x?b.Ts--:0>a.x&&b.Ts++;0<a.y?b.Fs++:0>a.y&&b.Fs--;this.dispatchEvent(b)};or.prototype.sm=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]+=b};or.prototype.tm=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]-=b};
or.prototype.tr=function(a){if(g(a)&&2==a.length)a=new A.P(a[0],a[1],0);else if(!(a instanceof A.P))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x/this.O[14];this.O[13]+=a.y/this.O[14]};function pr(a,b){gr.call(this,a,b);this.s="camera3D";this.sx=45;this.Ks=A.t.Gu(A.t.In(),this.sx,a/b,1,1E4)}w(pr,gr);pr.prototype.rotate=function(a){a=pr.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.P(this.O[1],this.O[5],this.O[9]),d=new A.P(this.O[0],this.O[4],this.O[8]);c.normalize();d.normalize();A.t.rotate(this.O,b,c.x,c.y,c.z);A.t.rotate(this.O,a,d.x,d.y,d.z)};pr.prototype.Xq=function(a,b){var c=pr.d.Xq.call(this,a,b);A.t.GA(c,a,b,this.Ob);return c};
function qr(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.t.multiply(a.Ks,a.O,l);A.t.vb(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.t.OA(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",pr);function rr(a){bj.call(this,a);this.Lg=new Pp;G(this.Lg,"change",this.BH,!1,this)}w(rr,bj);var sr={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=rr.prototype;f.v=function(){this.Me=this.Pj();var a=sr[this.Da];this.o=this.M().v("div",a,this.Me);tr(this);ur(this);vr(this)};f.Ya=function(){rr.d.Ya.call(this);E&&7>lc&&G(this.a(),"resize",this.Vg,!1,this);this.Vg();var a=this.a();Qk(a,"progressbar");Rk(a,"live","polite")};f.pc=function(){rr.d.pc.call(this);wr(this)};
f.Pj=function(){return this.M().v("div","progress-bar-thumb")};function wr(a){E&&7>lc&&Sc(a.a(),"resize",a.Vg,!1,a)}f.Ud=function(a){rr.d.Ud.call(this,a);Vk(this.a(),sr[this.Da]);a=Eh(null,"progress-bar-thumb",this.a())[0];a||(a=this.Pj(),this.a().appendChild(a));this.Me=a};f.K=function(){return this.Lg.K()};f.J=function(a){this.Lg.J(a);this.a()&&tr(this)};function tr(a){Rk(a.a(),"valuenow",a.K())}f.va=function(){return this.Lg.va()};f.ie=function(a){this.Lg.ie(a);this.a()&&ur(this)};
function ur(a){Rk(a.a(),"valuemin",a.va())}f.ja=function(){return this.Lg.ja()};f.kd=function(a){this.Lg.kd(a);this.a()&&vr(this)};function vr(a){Rk(a.a(),"valuemax",a.ja())}f.Da="horizontal";f.BH=function(){this.Vg();this.dispatchEvent("change")};
f.Vg=function(){if(this.Me){var a=this.va(),b=this.ja(),a=(this.K()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Da?E&&7>lc?(this.Me.style.top=0,this.Me.style.height="100%",b=this.Me.offsetHeight,a=Math.round(a*b),this.Me.style.top=b-a+"px",this.Me.style.height=a+"px"):(this.Me.style.top=100-b+"%",this.Me.style.height=b+"%"):this.Me.style.width=b+"%"}};
f.Nh=function(a){if(this.Da!=a){var b=sr[this.Da],c=sr[a];this.Da=a;if(a=this.a())Uk(a,b)&&(Xk(a,b),Vk(a,c)),b=this.Me.style,"vertical"==this.Da?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.Vg()}};f.Pb=function(){return this.Da};f.f=function(){wr(this);rr.d.f.call(this);this.Me=null;this.Lg.g()};f.wh=function(){return this.Lg.wh()};f.Qg=function(a){this.Lg.Qg(a)};function xr(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");rr.call(this);this.s="progressbar";this.Te=a;this.Js="";this.rp=this.jh=null;this.wj=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.wj=[c,d,e];this.J(b);this.nu()}w(xr,rr);
xr.prototype.nu=function(){var a=ri(this.Te,"position");if("static"==a||""==a)this.Js=this.Te.style.position,this.Te.style.position="relative";var a=document.getElementsByTagName("head")[0],b=S("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.wj[0])),d=document.createTextNode(String(this.wj[1])),e=document.createTextNode(String(this.wj[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.jh=b;this.n(this.Te);a=this.a();a.style.position=
"absolute";a.style.top=(this.Te.clientHeight-5)/2+"px";a.style.left=(this.Te.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};xr.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;T(this.a());var c=new xr(this.Te,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");Vh(d).classList.add("progress-bar-thumb-done");this.rp=c};
xr.prototype.Rn=function(){this.jh&&T(this.jh);this.a()&&T(this.a());this.rp&&T(this.rp.a());this.rp=this.jh=null;this.Js&&(this.Te.style.position=this.Js)};function yr(){$c.call(this);this.s="renderer";this.sa=window.document.body;this.Ra=this.sa.clientWidth;this.Fa=this.sa.clientHeight;this.Ca=this.ga=this.mc=null;this.qg=new lr(Xd);this.bd=[];this.Db=null;this.Ap=this.Cm=this.yp=!1;this.b=this.ii=this.Rd=null;this.ob={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.ws=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(yr,$c);f=yr.prototype;
f.Zu=function(){window.cancelAnimationFrame(this.ws);this.ob.PROGRESSBAR_ENABLED&&(this.ii=new xr(this.sa,3))};f.$u=function(){this.ob.PROGRESSBAR_ENABLED&&this.ii&&(this.ii.done(),this.op=Sf(function(){this.op=null;this.ii&&(this.ii.Rn(),this.ii=null);this.Cm=this.Ap=!0;this.n()}.bind(this),700))};f.av=function(a){this.ii&&this.ii.J(100*a.Dj)};f.tk=function(a){this.Rd&&this.Rd.J(100*a.Dj)};f.kJ=function(a){null!=a&&a instanceof Ud&&a.Ka&&this.Xg(a.Ka)};
f.wJ=function(a){null!=a&&a instanceof Vd&&a.Ka&&this.remove(a.Ka)};f.gv=function(a){if(!(null!=a&&a instanceof se))throw Error("Invalid hover event.");};f.uk=function(){var a=Dh(this.sa);this.Ra=a.clientWidth;this.Fa=a.clientHeight;a=Dh(this.mc);a.width=this.Ra;a.height=this.Fa;"renderer3D"==this.s&&(this.b.viewport(0,0,this.Ra,this.Fa),this.ga.Ks=A.t.Gu(A.t.In(),this.ga.sx,this.mc.width/this.mc.height,1,1E4))};
f.Zl=function(a){if(!(null!=a&&a instanceof re))throw Error("Invalid scroll event.");};yr.prototype.__defineGetter__("config",function(){return this.ob});yr.prototype.__defineGetter__("interactor",function(){return this.Ca});yr.prototype.__defineGetter__("camera",function(){return this.ga});yr.prototype.__defineGetter__("loadingCompleted",function(){return this.Cm});yr.prototype.__defineGetter__("container",function(){return this.sa});
yr.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;r(b)&&(b=Dh(a));if(!Yh(b))throw Error("Could not find the given container.");this.sa=b});f=yr.prototype;f.no=function(){this.ga.reset()};function zr(a){a.ob.PROGRESSBAR_ENABLED&&a.Rd&&!a.op&&(a.Rd.done(),a.op=Sf(function(){this.op=null;this.Rd&&(this.Rd.Rn(),this.Rd=null);this.n()}.bind(a),700))}
f.oa=function(a){var b=S("canvas");this.sa.appendChild(b);this.Ra=this.sa.clientWidth;this.Fa=this.sa.clientHeight;b.width=this.Ra;b.height=this.Fa;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.sa.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Db=new If;G(this.Db,ge,this.tk.bind(this));this.mc=b;this.b=c;b=new dr(this.mc);"2d"==a&&(b=new fr(this.mc));b.oa();G(b,ce,this.no.bind(this));G(b,he,this.gv.bind(this));G(b,be,this.Zl.bind(this));this.Ca=b;b=new pr(this.Ra,this.Fa);"2d"==a&&(b=new or(this.Ra,this.Fa));b.observe(this.Ca);this.ga=b;G(window,"resize",this.uk,!1,this)};f.add=function(a){(a instanceof kr||a instanceof Hp||a instanceof ir)&&a.ca();this.bd.push(a);this.Xg(a)};
f.remove=function(a){if(!this.mc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&H(a);return!1};f.Xg=function(a){if(!this.mc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Uc(a,ee)||G(a,ee,this.kJ.bind(this)),Uc(a,fe)||G(a,fe,this.wJ.bind(this)),Uc(a,je)||G(a,je,this.Zu.bind(this)),Uc(a,le)||G(a,le,this.av.bind(this)),Uc(a,ke)||G(a,ke,this.$u.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.qg.Wa,c=b.length,d=0,d=0;d<c;d++)if(b[d].ad==a)return b[d];return null};
f.n=function(){if(!this.mc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.Gx){if(this.Db.fl.rt(!1)){if(this.ob.PROGRESSBAR_ENABLED&&!this.Rd&&(this.Rd=new xr(this.sa,3)),this.Ap=this.Cm=!1,this.Gx=Sf(function(){this.Gx=null;this.n()}.bind(this),100),!this.ob.INTERMEDIATE_RENDERING)return}else if(this.Cm||this.Ap||(this.Ap=!0,eval("this.onShowtime()"),this.Cm=!0),this.Rd){zr(this);return}this.ws=window.requestAnimationFrame(this.n.bind(this));eval("this.onRender()");
this.Mg(!1,!0)}};f.cB=function(){};f.aB=function(){};f.Mg=function(){};f.Vd=function(){window.cancelAnimationFrame(this.ws);this.Db&&(delete this.Db,this.Db=null);this.Rd&&(this.Rd.Rn(),delete this.Rd,this.Rd=null);this.qg.clear();delete this.qg;this.bd.length=0;delete this.bd;delete this.Db;this.Db=null;delete this.ga;this.ga=null;delete this.Ca;this.Ca=null;delete this.b;this.b=null;T(this.mc);delete this.mc;this.mc=null};function Ar(){yr.call(this);this.s="renderer2D";this.Lc=null;this.ud=-1;this.Qd=[];this.xx=this.wp=this.tx=this.tp=null;this.jl=this.ll=this.Aj=this.Bj=0;this.Eb=this.Fb=this.sb=this.qb=this.qx=-1;this.yx=new Float32Array([-255,-255,-255,-255]);this.Fx=!0}w(Ar,yr);Ar.prototype.qv=function(){};Ar.prototype.ZJ=function(){};Ar.prototype.Zl=function(a){Ar.d.Zl.call(this,a);var b=this.bd[0];if(b){var c="",c=0==this.ud?"indexX":1==this.ud?"indexY":"indexZ";b[c]=a.Ob?b[c]+1:b[c]-1;eval("this.onScroll();")}};
Ar.prototype.$J=function(a){var b=this.bd[0];if(b){var c=b.Eb-b.Fb,d=c/2,e=parseInt(c+c/15*-a.Ts,10);a=parseInt(d+d/15*a.Fs,10);c==e&&e++;d==a&&a++;b.Fb-=parseInt(d-a,10);b.Fb-=parseInt(c-e,10);b.Fb=Math.max(b.Fb,b.Pd);b.Eb-=parseInt(d-a,10);b.Eb+=parseInt(c-e,10);b.Eb=Math.min(b.Eb,b.Mb);eval("this.onWindowLevel();")}};Ar.prototype.__defineGetter__("orientation",function(){return this.Lc});
Ar.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.ud=2):"SAGITTAL"==a?(a="X",this.ud=0):"CORONAL"==a&&(a="Y",this.ud=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Lc=a});Ar.prototype.__defineGetter__("radiological",function(){return this.Fx});Ar.prototype.__defineSetter__("radiological",function(a){this.Fx=a});f=Ar.prototype;
f.oa=function(){if(!this.Lc)throw Error("No 2D orientation set.");Ar.d.oa.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.mc.width,this.mc.height);this.tp=S("canvas");this.wp=S("canvas");G(this.ga,de,this.$J.bind(this))};f.uk=function(){Ar.d.uk.call(this);Br(this)};f.no=function(){Ar.d.no.call(this);Br(this);var a=this.bd[0];a&&(a.Eb=a.Mb,a.Fb=a.Pd)};
f.Xg=function(a){Ar.d.Xg.call(this,a);var b=!1;this.get(a.ad)&&(b=!0);if(a instanceof J){var c=a.da,d=a.q,e=a.td;if(null!=d&&null!=d.da&&d.da.G)this.Xg(d);else if(null!=e&&null!=e.da&&e.da.G)this.Db.load(e,a);else{if(null!=c&&g(c))if(null!=a.Zg){if(a.Zg.Xn!=c.length||b&&!a.G)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Db.load(c[b],a);return}else if(null!=c&&c.G){this.Db.load(a,a);return}c=this.Lc;this.ud="X"==c?0:"Y"==c?1:2;this.yc=a.j[this.ud].j;e=null;e=0==this.ud?a.indexX:1==this.ud?a.indexY:
a.indexZ;c=a.j[this.ud].j[e].wx;d=a.j[this.ud].j[e].vx;this.ll=a.j[this.ud].j[e].lh;this.jl=a.j[this.ud].j[e].eh;this.Bj=c;this.Aj=d;e=this.tp;e.width=c;e.height=d;var h=this.wp;h.width=c;h.height=d;this.tx=e.getContext("2d");this.xx=h.getContext("2d");b||(this.qg.add(a),Br(this))}}};function Br(a){var b=Math.min(a.Ra/(a.Bj*a.ll),a.Fa/(a.Aj*a.jl));a.ga.O[14]=b}f.rr=function(){};
f.LC=function(a,b){var c=this.bd[0],d=this.ga.O,e=null,h=this.Bj,k=this.Aj,l=null,n=null;if("Y"==this.Lc)e=this.yc[parseInt(c.indexY,10)],l=e.lh,n=e.eh,this.Qd[0]="red",this.Qd[1]="blue";else if("Z"==this.Lc)e=this.yc[parseInt(c.indexZ,10)],l=e.lh,n=e.eh,this.Qd[0]="red",this.Qd[1]="green";else{e=this.yc[parseInt(c.indexX,10)];l=e.eh;n=e.lh;this.Qd[0]="green";this.Qd[1]="blue";var m=h,h=k,k=m}var q=1*d[12],p=-1*d[13],m=Math.max(d[14],.6),d=[this.Ra/2,this.Fa/2],l=h*l*m,n=k*n*m,t=d[0]-l/2,d=d[1]-n/
2,t=t+q*m,d=d+p*m;return a>t&&a<t+l&&b>d&&b<d+n?(q=(a-t)/l*h,p=(b-d)/n*k,n=e.DE[4],"X"==this.Lc?(m=h-q,q=p,p=m):"Y"==this.Lc?q=h-q:"Z"==this.Lc&&(q=h-q,p=k-p),q=e.CE+q*e.lh,p=e.wE+p*e.eh,q=yd(q,p,n,1),h=zd(),Jd(e.pE,q,h),k=zd(),Jd(e.qE,q,k),e=Math.round((c.e[0].D[0]*k[0]+c.e[0].D[1]*k[1]+c.e[0].D[2]*k[2]+c.e[0].Is)/c.e[0].kl),e>=c.e[0].ba?e=c.e[0].ba-1:0>e&&(e=0),q=Math.round((c.e[1].D[0]*k[0]+c.e[1].D[1]*k[1]+c.e[1].D[2]*k[2]+c.e[1].Is)/c.e[1].kl),q>=c.e[1].ba?q=c.e[1].ba-1:0>q&&(q=0),p=Math.round((c.e[2].D[0]*
k[0]+c.e[2].D[1]*k[1]+c.e[2].D[2]*k[2]+c.e[2].Is)/c.e[2].kl),p>=c.e[2].ba?p=c.e[2].ba-1:0>p&&(p=0),[[e,q,p],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.Mg=function(a,b){Ar.d.Mg.call(this,a,b);if(0!=this.qg.Wa.length){var c=this.bd[0],d=null,d=0==this.ud?c.indexX:1==this.ud?c.indexY:c.indexZ,e=this.yc[parseInt(d,10)].wx,h=this.yc[parseInt(d,10)].vx;this.ll=this.yc[parseInt(d,10)].lh;this.jl=this.yc[parseInt(d,10)].eh;this.Bj=e;this.Aj=h;var k=this.Ra,l=this.Fa,n=this.ga.O;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var m=Math.max(n[14],.1);this.b.setTransform(m,0,0,m,0,0);var q=1*n[12],n=-1*n[13],p=null;c.q&&(p=c.q.Qs);var t=
this.yc[parseInt(d,10)],s=t.Qa.ji,t=t.q,z=null;t&&(z=t.ji);var y=this.Bj,I=this.Aj,R=this.tx,O=this.xx,F=R.getImageData(0,0,y,I),P=O.getImageData(0,0,y,I),Y=F.data,U=P.data,ua=Y.length,na=c.Mb,wa=c.qb,Ma=c.sb,Ga=c.Fb/na,Na=c.Eb/na;if(this.qx!=d||this.qb!=wa||this.sb!=Ma||this.Fb!=Ga||this.Eb!=Na||p&&!mr(p,this.yx,0)){var ka=this.tp;ka.width=e;ka.height=h;ka=this.wp;ka.width=e;ka.height=h;e=0;do{var ka=[0,0,0,0],h=[0,0,0,0],xa=s[e]/255*na,qa=s[e],qa=(qa/255-Ga)/(Na-Ga),qa=255*qa;xa>=wa&&xa<=Ma&&(ka=
new K(c.fi[0],c.fi[1],c.fi[2]),ka=(new K(c.di[0],c.di[1],c.di[2])).scale(qa).add(ka.scale(255-qa)),ka=[Math.floor(ka.x),Math.floor(ka.y),Math.floor(ka.z),255],t&&(-255==p[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:mr(p,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.Lc?(Y[e]=ka[0],Y[e+1]=ka[1],Y[e+2]=ka[2],Y[e+3]=ka[3],U[e]=h[0],U[e+1]=h[1],U[e+2]=h[2],U[e+3]=h[3]):"Y"==this.Lc?(qa=Math.floor(e/(4*y)),qa=qa*y*4+(4*(y-1)-(e-qa*y*4)),Y[qa]=ka[0],Y[qa+1]=ka[1],Y[qa+2]=ka[2],Y[qa+3]=ka[3],U[qa]=h[0],U[qa+1]=
h[1],U[qa+2]=h[2],U[qa+3]=h[3]):(qa=ua-1-e,Y[qa-3]=ka[0],Y[qa-2]=ka[1],Y[qa-1]=ka[2],Y[qa]=ka[3],U[qa-3]=h[0],U[qa-2]=h[1],U[qa-1]=h[2],U[qa]=h[3]);e+=4}while(e<ua);R.putImageData(F,0,0);O.putImageData(P,0,0);this.qx=d;this.qb=wa;this.sb=Ma;this.Fb=Ga;this.Eb=Na;t&&(this.yx=p)}this.b.globalAlpha=1;this.b.translate(k/2/m,l/2/m);"X"==this.Lc&&(this.b.rotate(.5*Math.PI),d=q,q=n,n=-d);q=-y*this.ll/2+q;n=-I*this.jl/2+n;this.b.drawImage(this.tp,q,n,y*this.ll,I*this.jl);t&&c.q.gb&&(this.b.globalAlpha=c.q.Kc,
this.b.drawImage(this.wp,q,n,y*this.ll,I*this.jl));this.ob.SLICENAVIGATORS&&this.Ca.zp&&this.Ca.Ps&&!this.Ca.pg&&(q=this.Ca.Jc,q=this.LC(q[0],q[1]))&&(c.fh=q[0][0],c.gh=q[0][1],c.hh=q[0][2],c.ca(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Ca.Jc[0],0),this.b.lineTo(this.Ca.Jc[0],this.Ca.Jc[1]-10),this.b.moveTo(this.Ca.Jc[0],this.Ca.Jc[1]+10),this.b.lineTo(this.Ca.Jc[0],this.Fa),this.b.strokeStyle=this.Qd[0],this.b.stroke(),
this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Ca.Jc[1]),this.b.lineTo(this.Ca.Jc[0]-10,this.Ca.Jc[1]),this.b.moveTo(this.Ca.Jc[0]+10,this.Ca.Jc[1]+.5),this.b.lineTo(this.Ra,this.Ca.Jc[1]),this.b.strokeStyle=this.Qd[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+q[2][0].toFixed(2)+", "+q[2][1].toFixed(2)+", "+q[2][2].toFixed(2),0,0),y=t=n="undefined","undefined"!=typeof c.Xb[q[1][2].toFixed(0)]&&
"undefined"!=typeof c.Xb[q[1][2].toFixed(0)][q[1][1].toFixed(0)]&&(n=c.Xb[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],c.$a&&(t=c.q.Xb[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],c.q.zm&&(y=c.q.zm.get(t),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+q[1][0].toFixed(0)+", "+q[1][1].toFixed(0)+", "+q[1][2].toFixed(0)+")",0,15),c.$a&&this.b.fillText("Labelmap:  "+y+" ("+t+")",0,30))}};v("X.renderer2D",Ar);v("X.renderer2D.prototype.init",Ar.prototype.oa);
v("X.renderer2D.prototype.add",Ar.prototype.add);v("X.renderer2D.prototype.onShowtime",Ar.prototype.cB);v("X.renderer2D.prototype.onRender",Ar.prototype.aB);v("X.renderer2D.prototype.onScroll",Ar.prototype.qv);v("X.renderer2D.prototype.onWindowLevel",Ar.prototype.ZJ);v("X.renderer2D.prototype.get",Ar.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",Ar.prototype.no);v("X.renderer2D.prototype.xy2ijk",Ar.prototype.LC);v("X.renderer2D.prototype.render",Ar.prototype.n);
v("X.renderer2D.prototype.destroy",Ar.prototype.Vd);v("X.renderer2D.prototype.onSliceNavigation",Ar.prototype.rr);function Cr(){Yc.call(this)}w(Cr,Yc);v("xiv.vis.RenderEngine",Cr);Cr.prototype.ID_PREFIX="xiv.vis.RenderEngine";var Dr="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{KM:"r",HM:"s",IM:"t"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",Dr);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",Cr.prototype.ID_PREFIX);function Er(){Ar.call(this)}w(Er,Ar);v("xiv.vis.XtkRenderer2D",Er);f=Er.prototype;f.Uf=function(){this.uk()};f.qv=function(){this.rr()};f.tk=function(a){Er.d.tk.call(this,a);this.dispatchEvent({type:"s",value:a.Dj})};f.oa=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;Er.d.oa.call(this);this.Ca.onMouseMove=this.eJ.bind(this);this.Ca.config.MOUSEWHEEL_ENABLED=!1;this.Ca.config.MOUSECLICKS_ENABLED=!1;this.Ca.config.KEYBOARD_ENABLED=!1;this.Ca.oa()};f.Pb=function(){return this.Lc};
f.QF=function(){return this.ga};f.HG=function(){return this.Ca.mousePosition};f.Mq=function(){};f.eJ=function(){this.dispatchEvent({type:"mouseover",FI:this.Ca.FI,OK:this.Ca.shiftDown})};f.rr=function(){this.dispatchEvent({type:"u",volume:this.bd[0],hO:this.bd[0]["index"+this.Lc],gO:this.Lc,OK:this.Ca.Ps})};f.n=function(){this.mc&&this.b?(Er.d.n.call(this),this.dispatchEvent({type:"t"})):(window.console.log("init"),this.oa(),window.console.log(this.Jl().visible))};f.RF=function(){return this.mc};
f.Jl=function(){return this.bd[0]};f.Mz=function(){if(null!=this.yc)return window.console.log("VOLUME",this.yc.length,this.bd[0]),this.yc.length};f.Yz=function(){return this.ga.O[14]};f.fC=function(a){this.ga.O[14]=a};function Fr(a){.01>a.ga.O[14]&&(a.ga.O[14]=.01)}f.sm=function(){this.ga.O[14]+=.03;Fr(this)};f.tm=function(){this.ga.O[14]+=-.03;Fr(this)};
function Gr(a,b,c,d){var e=a.bd[0],h=a.ga.O,k=null,l=a.Bj,n=a.Aj,m=null,q=null;if(null!=e){"Y"==a.Lc?(k=a.yc[parseInt(e.indexY,10)],m=k.lh,q=k.eh,a.Qd[0]="red",a.Qd[1]="blue"):"Z"==a.Lc?(k=a.yc[parseInt(e.indexZ,10)],m=k.lh,q=k.eh,a.Qd[0]="red",a.Qd[1]="green"):(k=a.yc[parseInt(e.indexX,10)],m=k.eh,q=k.lh,a.Qd[0]="green",a.Qd[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),p=[a.Ra/2,a.Fa/2],m=l*m*h,q=n*q*h,t=p[0]-m/2,p=p[1]-q/2,t=t+e*h,p=p+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?t+(a.Bj-b)/l*m:t+b/l*m;b=Math.max(0,b);b=Math.min(b,n);return d?p+(a.Aj-b)/n*q:p+b/n*q}}f.Uz=function(a,b){return Gr(this,a,"vertical",b)};f.Cz=function(a,b){return Gr(this,a,"horizontal",b)};f.Vd=function(){Er.d.Vd.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",Er.prototype.Uf);v("xiv.vis.XtkRenderer2D.prototype.onScroll",Er.prototype.qv);v("xiv.vis.XtkRenderer2D.prototype.onProgress",Er.prototype.tk);
v("xiv.vis.XtkRenderer2D.prototype.init",Er.prototype.oa);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",Er.prototype.Pb);v("xiv.vis.XtkRenderer2D.prototype.getCamera",Er.prototype.QF);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",Er.prototype.HG);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",Er.prototype.Mq);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",Er.prototype.rr);v("xiv.vis.XtkRenderer2D.prototype.render",Er.prototype.n);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",Er.prototype.RF);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",Er.prototype.Jl);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",Er.prototype.Mz);v("xiv.vis.XtkRenderer2D.prototype.getZoom",Er.prototype.Yz);v("xiv.vis.XtkRenderer2D.prototype.setZoom",Er.prototype.fC);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",Er.prototype.sm);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",Er.prototype.tm);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",Er.prototype.Uz);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",Er.prototype.Cz);v("xiv.vis.XtkRenderer2D.prototype.destroy",Er.prototype.Vd);function Hr(){V.call(this)}w(Hr,hp);v("xiv.ui.layouts.interactors.ZoomDisplay",Hr);Hr.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";Hr.prototype.n=function(a){Hr.d.n.call(this,a);this.Ha.min=1};Hr.prototype.Wg=function(){this.Ye.innerHTML="Zoom level:&nbsp"+this.Ha.value+"%"};v("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",Hr.ID_PREFIX);v("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",Hr.prototype.Wg);function Ir(a,b){Rp.call(this,a,b);this.Ia.Xi(0)}w(Ir,Rp);Ir.prototype.U=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};Ir.prototype.Ty=function(){var a=this.a(),b=Eh(null,"goog-slider-thumb",a)[0];b||(b=this.Pj(),a.appendChild(b));this.la=this.qc=b};Ir.prototype.Pj=function(){var a=this.M().v("div","goog-slider-thumb");Qk(a,"button");return a};function Jr(a){Ir.call(this);this.constructor.um=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.uc=this.constructor.um;V.prototype.Wp.bind(this)();null!=a&&this.Nh(a)}w(Jr,Ir);v("nrg.ui.Slider",Jr);Jr.ID_PREFIX="nrg.ui.Slider";Jr.CSS_SUFFIX={ZD:"track",kx:"track-hovered",ps:"thumb",ix:"thumb-hovered"};f=Jr.prototype;f.Vl=!1;f.Ro=!1;f.dL=function(a){this.Ro=a};f.cL=function(a){this.Ro=a};
f.n=function(a){this.o=S("div",{id:Jr.ID_PREFIX+"_Widget_"+B()});this.ub(this.o);a=null!=a?a:document.body;a.appendChild(this.o);this.nd=S("div",{id:Jr.ID_PREFIX+"_Track_"+B()});this.o.appendChild(this.nd);this.Gc=Hh("goog-slider-thumb",this.o);G(this,"change",this.VI.bind(this));G(this.Gc,"mouseover",this.DJ.bind(this));G(this.Gc,"mouseout",this.CJ.bind(this));G(this.nd,"mouseover",this.XJ.bind(this));G(this.nd,"mouseout",this.WJ.bind(this));G(this,"l",this.IJ.bind(this));G(this,"m",this.FJ.bind(this));
this.Nh(this.Pb().toLowerCase())};f.a=function(){return this.o};f.lH=function(){return this.nd};f.fH=function(){return this.Gc};f.Zm=function(a){null==this.mj&&(this.mj={});if(null==this.mj[a.id]){var b=new Mp(a);b.addEventListener("mousewheel",this.tJ,!1,this);this.mj[a.id]=b}};f.ZE=function(a){null==this.jj&&(this.jj={});if(null==this.jj[a.id]){var b=new Rn(a);G(b,"key",this.Hh.bind(this));this.jj[a.id]=b}};f.Hh=function(a){window.console.log("KEY",a)};
f.k=function(){var a=this.K(),a=dq(this,a);"horizontal"==this.Pb().toLowerCase()?this.Gc.style.left=a.x.toString()+"px":"vertical"==this.Pb().toLowerCase()&&(this.Gc.style.left=a.y.toString()+"px")};f.Nh=function(a){Jr.d.Nh.call(this,a);this.ea&&Kr(this,this.Pb().toLowerCase())};function Kr(a,b){function c(a,c){wh(a,[pj(c,"horizontal"),pj(c,"vertical")],[c,pj(c,b)])}c(a.o,a.constructor.uc);c(a.nd,Jr.CSS.ZD);c(a.Gc,Jr.CSS.ps)}f.Aw=!1;f.Et=1;f.bC=function(a,b){this.Aw=a;u(b)&&(this.Et=b)};
f.tJ=function(a){var b=Math.abs(a.zd)<Math.abs(a.qh)?a.qh:a.zd;this.Aw?this.J(Math.round(this.K()-b*this.Et)):this.J(Math.round(this.K()-(0>b?-1:1)));this.dispatchEvent({type:"w"});a.preventDefault()};f.Jp=function(a){this.Sg=this.Sg?this.Sg:[];this.Sg.push(a);Lr(this)};f.Xs=function(a){this.Tg=this.Tg?this.Tg:[];this.Tg.push(a);Mr(this)};f.VI=function(a){a.stopPropagation();this.Vl&&(Nr(this),Or(this));this.Ro||this.dispatchEvent({type:"v",value:this.K(),Ku:this.va(),Ju:this.ja()});this.Ro=!1};
function Nr(a){Q(a.Gc,Jr.CSS.ix);null!=a.Sg&&D(a.Sg,function(a){Q(this.Gc,a)}.bind(a))}function Or(a){Q(a.nd,Jr.CSS.kx);null!=a.Tg&&D(a.Tg,function(a){Q(this.nd,a)}.bind(a))}function Lr(a){uh(a.Gc,Jr.CSS.ix);null!=a.Sg&&D(a.Sg,function(a){uh(this.Gc,a)}.bind(a))}function Mr(a){uh(a.nd,Jr.CSS.kx);null!=a.Tg&&D(a.Tg,function(a){uh(this.nd,a)}.bind(a))}f.DJ=function(a){a.stopPropagation();Nr(this);Or(this)};f.XJ=function(){Or(this)};f.CJ=function(){this.Vl||(Lr(this),Mr(this))};
f.WJ=function(){this.Vl||Mr(this)};f.IJ=function(){this.Vl=!0};f.FJ=function(){this.Vl=!1;Lr(this);Mr(this)};
f.f=function(){Jr.d.f.call(this);delete this.Ro;null!=this.o&&(H(this),T(this.o),delete this.o);null!=this.Gc&&(H(this.Gc),T(this.Gc),delete this.Gc);null!=this.nd&&(H(this.nd),T(this.nd),delete this.nd);null!=this.jj&&(C(this.jj,function(a){H(a);a.g()}),sb(this.jj),delete this.jj);null!=this.mj&&(C(this.mj,function(a){H(a);a.g()}),sb(this.mj),delete this.mj);null!=this.Sg&&(Ib(this.Sg),delete this.Sg);null!=this.Tg&&(Ib(this.Tg),delete this.Tg);delete this.Aw;delete this.Et;delete this.Vl};
v("nrg.ui.Slider.EventType",{bN:"v",xM:"w"});v("nrg.ui.Slider.ID_PREFIX",Jr.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",Jr.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendSlideEvent",Jr.prototype.dL);v("nrg.ui.Slider.prototype.suspendChangeEvent",Jr.prototype.cL);v("nrg.ui.Slider.prototype.render",Jr.prototype.n);v("nrg.ui.Slider.prototype.getElement",Jr.prototype.a);v("nrg.ui.Slider.prototype.getTrack",Jr.prototype.lH);v("nrg.ui.Slider.prototype.getThumb",Jr.prototype.fH);
v("nrg.ui.Slider.prototype.bindToMouseWheel",Jr.prototype.Zm);v("nrg.ui.Slider.prototype.bindToArrowKeys",Jr.prototype.ZE);v("nrg.ui.Slider.prototype.updateStyle",Jr.prototype.k);v("nrg.ui.Slider.prototype.setOrientation",Jr.prototype.Nh);v("nrg.ui.Slider.prototype.setUseDeltaToScroll",Jr.prototype.bC);v("nrg.ui.Slider.prototype.addThumbHoverClass",Jr.prototype.Jp);v("nrg.ui.Slider.prototype.addTrackHoverClass",Jr.prototype.Xs);v("nrg.ui.Slider.prototype.disposeInternal",Jr.prototype.f);function Pr(){Jr.call(this)}w(Pr,Jr);v("xiv.ui.layouts.interactors.Slider",Pr);Pr.ID_PREFIX="xiv.ui.layouts.interactors.Slider";Pr.CSS_SUFFIX={};Pr.prototype.n=function(){Pr.d.n.call(this)};Pr.prototype.f=function(){Pr.d.f.call(this)};v("xiv.ui.layouts.interactors.Slider.EventType",{});v("xiv.ui.layouts.interactors.Slider.ID_PREFIX",Pr.ID_PREFIX);v("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",Pr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Slider.prototype.render",Pr.prototype.n);
v("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",Pr.prototype.f);function Qr(){V.call(this)}w(Qr,V);v("xiv.ui.layouts.interactors.Crosshairs",Qr);Qr.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";Qr.CSS_SUFFIX={dM:"horizontal",HN:"vertical"};f=Qr.prototype;f.gg=null;f.Of=null;f.dC=function(a){null!=a&&(this.gg.style.left=a.toString()+"px")};f.eC=function(a){null!=a&&(this.Of.style.top=a.toString()+"px")};f.n=function(a){this.gg=Rr(this,"vertical");this.Of=Rr(this,"horizontal");a.appendChild(this.Of);a.appendChild(this.gg)};
f.Vo=function(a){a=!1===a?"hidden":"visible";this.gg.style.visibility=a;this.Of.style.visibility=a};function Rr(a,b){b=b.toLowerCase();if(!pb(Qr.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return S("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.uc+"-"+b.toLowerCase()})}f.f=function(){Qr.d.f.call(this);T(this.gg);delete this.gg;T(this.Of);delete this.Of};v("xiv.ui.layouts.interactors.Crosshairs.EventType",{});v("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",Qr.ID_PREFIX);
v("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",Qr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",Qr.prototype.gg);v("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",Qr.prototype.Of);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",Qr.prototype.dC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",Qr.prototype.eC);v("xiv.ui.layouts.interactors.Crosshairs.prototype.render",Qr.prototype.n);
v("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",Qr.prototype.Vo);v("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",Qr.prototype.f);function W(a){Wq.call(this);a=null!=a?a:nb(Sr);a=g(a)?a:[a];D(a,function(b,c){a[c]=b.toUpperCase()});Tr(this,a);Ur(this,a);null!=this.i.X&&this.ke();null!=this.i.Y&&this.bg();null!=this.i.Z&&this.Zi();null!=this.i.V&&this.Ho();this.k()}w(W,Wq);v("xiv.ui.layouts.XyzvLayout",W);W.TITLE="XyzvLayout";W.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var Sr={mg:"X",ue:"Y",Wk:"Z",kp:"V"};
W.CSS_SUFFIX={mg:"x",ue:"y",Wk:"z",kp:"v",qa:"slider",Xh:"slider-thumb",ns:"slider-thumb-hovered",Yh:"slider-track",cN:"slider-track-x",dN:"slider-track-y",eN:"slider-track-z",$L:"framenumber"};function Vr(a,b,c,d){this.qa=a;this.Hd=b;this.Yc=c;this.wf=d}f=W.prototype;f.vB=0;f.Mh=function(a,b){this.i[a].dm(b);var c=this.Qy(a);Rh(this.a(),c);c.style.position="absolute";this.i[a].R().Lh(c);this.i[a].R().update()};
f.Qy=function(a){return S("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":pj(this.constructor.uc,a.toLowerCase()+"-resizeboundary")})};function Tr(a,b){if(b.length>mb(Sr))throw Error("Invalid amount of frames "+b+". Must be "+Sr);D(b,function(a){if(!pb(Sr,a))throw Error("Invalid frame title ",a);}.bind(a))}function Ur(a,b){var c="";D(b,function(a,b){c=a.toUpperCase();this.Sx(new Vq(c));Rh(this.a(),this.i[c].a());Q(this.i[c].a(),W.CSS[b])}.bind(a))}f.oL=function(a){a.Pv(this.xn())};
f.Pv=function(a){this.ff(function(b,c){null!=a[c]&&(b[Xq]=a[c].qa,T(a[c].qa.a()),b.a().appendChild(a[c].qa.a()),b[Yq]=a[c].Hd,T(a[c].Hd.a()),b.a().appendChild(a[c].Hd.a()),b[$q]=a[c].Yc,b.a().appendChild(a[c].Yc.gg),b.a().appendChild(a[c].Yc.Of))})};f.Qx=function(){this.Gv();Wr(this);Xr(this);Yr(this);Zr(this)};f.xn=function(){var a={};this.ff(function(b,c){a[c]=new Vr(b[Xq],b[Yq],b[$q],b[Zq])});return a};f.Fz=function(a){a=this.i[a];return new Vr(a[Xq],a[Yq],a[$q])};f.Ez=function(a,b){return this.i[a][b]};
f.Bz=function(a){return this.i[a]};function Wr(a){var b;a.ff(function(a,d){b=new Jr("horizontal");b.n(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[Xq]=b;wh(b.a(),null,[W.CSS.qa]);wh(b.Gc,null,[W.CSS.Xh]);wh(b.nd,null,[W.CSS.Yh,pj(W.CSS.Yh,d.toLowerCase())]);b.Jp(W.CSS.ns)}.bind(a))}function Xr(a){var b;a.ff(function(a){b=new ip;b.n(a.a());a[Yq]=b}.bind(a))}function Yr(a){var b;a.ff(function(a){b=new Hr;b.n(a.a());a[Zq]=b}.bind(a))}
function Zr(a){var b;a.ff(function(a){b=new Qr;a[$q]=b;b.n(a.a());a.a().appendChild(b.Of);a.a().appendChild(b.gg)}.bind(a))}f.ff=function(a){C(Sr,function(b){b=b.toUpperCase();null!=this.i[b]&&"V"!=b&&a(this.i[b],b)}.bind(this))};f.loop=function(a){C(Sr,function(b){b=b.toUpperCase();a(this.i[b],b)}.bind(this))};f.ke=function(){null!=this.constructor.CSS&&Q(this.i.X.a(),this.constructor.CSS.mg)};f.bg=function(){null!=this.constructor.CSS&&Q(this.i.Y.a(),this.constructor.CSS.ue)};
f.jo=function(a){this.nh();var b=Ki(this.i.X.a()),c=Ki(this.i.Y.a()),d=Ki(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.u.width)};f.Zi=function(){null!=this.constructor.CSS&&Q(this.i.Z.a(),this.constructor.CSS.Wk)};f.Ho=function(){null!=this.constructor.CSS&&Q(this.i.V.a(),this.constructor.CSS.kp)};f.He=ea;f.sk=ea;f.lr=ea;f.kr=ea;f.ne=ea;f.Ne=ea;f.oe=ea;f.Jk=ea;f.f=function(){W.d.f.call(this);delete this.vB};v("xiv.ui.layouts.XyzvLayout.TITLE",W.TITLE);
v("xiv.ui.layouts.XyzvLayout.EventType",{});v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",W.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",Sr);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",W.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",Vr);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",W.prototype.vB);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",W.prototype.Mh);v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",W.prototype.Qy);
v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",W.prototype.oL);v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",W.prototype.Pv);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",W.prototype.Qx);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",W.prototype.xn);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",W.prototype.Fz);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",W.prototype.Ez);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",W.prototype.Bz);
v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",W.prototype.ff);v("xiv.ui.layouts.XyzvLayout.prototype.loop",W.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",W.prototype.ke);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",W.prototype.bg);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",W.prototype.Zi);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",W.prototype.Ho);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",W.prototype.He);
v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",W.prototype.sk);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",W.prototype.lr);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",W.prototype.kr);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",W.prototype.ne);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",W.prototype.Ne);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",W.prototype.oe);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",W.prototype.Jk);
v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",W.prototype.f);function $r(){W.call(this,["X","Y","Z"])}w($r,W);v("xiv.ui.layouts.TwoDWidescreen",$r);$r.TITLE="TwoDWidescreen";$r.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";$r.CSS_SUFFIX={mg:"x",ue:"y",Wk:"z"};f=$r.prototype;f.ke=function(){$r.d.ke.call(this);this.Mh("X",["RIGHT"]);G(this.i.X.R(),"resize",this.He.bind(this));G(this.i.X.R(),"resize_end",this.k.bind(this))};f.bg=function(){$r.d.bg.call(this);this.Mh("Y",["BOTTOM"]);G(this.i.Y.R(),"resize",this.sk.bind(this));G(this.i.Y.R(),"resize_end",this.k.bind(this))};
f.He=function(){this.jo(function(a){var b=a.width,c=Math.max(this.u.width-a.width,this.jb);D(["Y","Z"],function(a){this.i[a].a().style.left=b+"px";this.i[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.xg()};f.sk=function(){this.jo(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.u.height-c;this.i.Z.a().style.top=c+"px";this.i.Z.a().style.height=d+"px"}.bind(this));this.xg()};f.k=function(){$r.d.k.call(this);this.po();this.ne();this.oe();this.Ne()};
f.po=function(){if(this.ha.width!==this.u.width||this.ha.height!==this.u.height){var a=1-(this.ha.height-this.u.height)/this.ha.height,b=1-(this.ha.width-this.u.width)/this.ha.width;this.ff(function(c){frameSize=Ki(c.a());c.a().style.width=Math.max(frameSize.width*b,this.jb).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.Vc).toString()+"px"}.bind(this))}};
f.ne=function(){var a=this.i.X;a.a().style.height=this.u.height.toString()+"px";kk(a.R().gd(),{left:this.jb,width:this.u.width-2*this.jb});var b=a.R().hd("RIGHT");b.style.left=a.a().style.width;Ji(b,this.u.height);a.R().update()};f.oe=function(){var a=this.i.Y;a.a().style.left=this.i.X.a().style.width;kk(a.R().gd(),{top:this.Vc,height:this.u.height-2*this.Vc});var b=a.R().hd("BOTTOM");b.style.top=a.a().style.height;Ii(b,parseInt(a.a().style.width));a.R().update()};
f.Ne=function(){var a=this.i.Z;a.a().style.left=this.i.X.a().style.width;a.a().style.top=this.i.Y.a().style.height;a.a().style.height=this.u.height-parseInt(this.i.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",$r.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",$r.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",$r.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",$r.prototype.ke);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",$r.prototype.bg);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",$r.prototype.He);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",$r.prototype.sk);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",$r.prototype.k);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",$r.prototype.ne);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",$r.prototype.oe);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",$r.prototype.Ne);function as(a){W.call(this,a)}w(as,W);v("xiv.ui.layouts.SingleFrameLayout",as);as.TITLE="SingleFrameLayout";as.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";as.prototype.po=function(){if(this.ha.width!==this.u.width||this.ha.height!==this.u.height){var a=this.ha.height*(1-(this.ha.height-this.u.height)/this.ha.height),b=this.ha.width*(1-(this.ha.width-this.u.width)/this.ha.width);this.loop(function(c){null!=c&&Hi(c.a(),Math.max(b,this.jb),Math.max(a,this.Vc))}.bind(this))}};
as.prototype.k=function(){as.d.k.call(this);this.po()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",as.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",as.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",as.prototype.k);function bs(){W.call(this,"V");Q(this.i.V.a(),pj(Vq.uc,this.constructor.TITLE))}w(bs,as);v("xiv.ui.layouts.ThreeD",bs);bs.TITLE="ThreeD";bs.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",bs.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",bs.ID_PREFIX);function cs(){W.call(this,"X");Q(this.i.X.a(),pj(Vq.uc,this.constructor.TITLE.toLowerCase()))}w(cs,as);v("xiv.ui.layouts.Sagittal",cs);cs.TITLE="Sagittal";cs.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",cs.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",cs.ID_PREFIX);function ds(){W.call(this)}w(ds,W);v("xiv.ui.layouts.Conventional",ds);ds.TITLE="Conventional";ds.ID_PREFIX="xiv.ui.layouts.Conventional";ds.CSS_SUFFIX={mg:"x",ue:"y",Wk:"z",kp:"v",WN:"v-boundary"};f=ds.prototype;f.ke=function(){ds.d.ke.call(this);this.Mh("X",["RIGHT","TOP_RIGHT"]);G(this.i.X.R(),"resize",this.He.bind(this));G(this.i.X.R(),"resize_end",this.k.bind(this))};f.bg=function(){ds.d.bg.call(this)};
f.Zi=function(){ds.d.Zi.call(this);this.Mh("Z",["RIGHT","TOP_RIGHT"]);G(this.i.Z.R(),"resize",this.lr.bind(this));G(this.i.Z.R(),"resize_end",this.k.bind(this))};f.Ho=function(){ds.d.Ho.call(this);this.Mh("V","BOTTOM");G(this.i.V.R(),"resize",this.kr.bind(this));G(this.i.V.R(),"resize_end",this.k.bind(this))};function es(a,b){a.nh();var c=Ki(a.i.X.a()),d=Ki(a.i.Y.a()),e=Ki(a.i.Z.a());b(c,d,e)}
f.He=function(){es(this,function(a,b,c){var d=Math.max(this.u.width-a.width-c.width,this.jb),e=c.width,h=this.u.height-a.height;this.jb==d&&(e=Math.max(this.u.width-a.width-b.width,this.jb),ui(this.i.X.a(),e,h));ui(this.i.Z.a(),0,h);Hi(this.i.Z.a(),e,a.height);ui(this.i.Y.a(),c.width+a.width,h);Hi(this.i.Y.a(),d,a.height);Hi(this.i.V.a(),this.u.width,this.u.height-a.height)}.bind(this));this.xg()};
f.lr=function(){es(this,function(a,b,c){var d=Math.max(this.u.width-c.width-b.width,this.jb),e=b.width,h=this.u.height-c.height;this.jb==d&&(e=Math.max(this.u.width-c.width-a.width,this.jb));ui(this.i.X.a(),c.width,h);Hi(this.i.X.a(),d,c.height);ui(this.i.Y.a(),c.width+d,h);Hi(this.i.Y.a(),e,b.height);Hi(this.i.V.a(),this.u.width,this.u.height-c.height)}.bind(this));this.xg()};
f.kr=function(){this.nh();var a=parseInt(this.i.V.a().style.height),b=this.u.height-a;C(this.i,function(c){c!==this.i.V&&kk(c.a(),{top:a,height:b})}.bind(this));this.ne();this.oe();this.xg()};f.k=function(){ds.d.k.call(this);this.Jk();this.yw();this.zw();this.ne();this.oe();this.Ne()};f.yw=function(){var a=parseInt(this.i.V.a().style.height),b=Math.max(this.u.height-a,this.Vc);this.ff(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};
f.zw=function(){var a,b=1-(this.ha.width-this.u.width)/this.ha.width;this.ha.width!==this.u.width&&this.ff(function(c){a=Ki(c.a());c.a().style.width=Math.max(a.width*b,this.jb).toString()+"px"}.bind(this))};
function gs(a,b){var c=a.i.V.R().Hl("BOTTOM"),d=a.i[b].R().gd(),e=wi(a.i[b].a()),h=Ki(a.i[b].a());ui(d,parseInt(d.style.left),a.Vc);Hi(d,a.u.width-3*a.jb,a.u.height-2*a.Vc);d=a.i[b].R().hd("RIGHT");ui(d,e.x+h.width,e.y);Ji(d,a.u.height-c.Ta.y);ui(a.i[b].R().hd("TOP_RIGHT"),e.x+h.width,e.y);a.i[b].R().update()}f.ne=function(){this.i.X.a().style.left=this.i.Z.a().style.width;kk(this.i.X.R().gd(),{left:2*this.jb});gs(this,"X")};
f.oe=function(){this.i.Y.a().style.left=(parseInt(this.i.Z.a().style.width)+parseInt(this.i.X.a().style.width)).toString()+"px"};f.Ne=function(){kk(this.i.Z.R().gd(),{left:this.jb});gs(this,"Z")};
f.Jk=function(){if(this.ha.width!==this.u.width||this.ha.height!==this.u.height){var a=Ki(this.i.V.a());Hi(this.i.V.a(),this.u.width,Math.max(a.height*(1-(this.ha.height-this.u.height)/this.ha.height),this.Vc))}ui(this.i.V.R().gd(),this.u.width,this.Vc);Hi(this.i.V.R().gd(),this.u.width-3*this.jb,this.u.height-2*this.Vc);a=this.i.V.R().hd("BOTTOM");ui(a,0,Ki(this.i.V.a()).height);Ii(a,this.u.width);this.i.V.R().update()};v("xiv.ui.layouts.Conventional.TITLE",ds.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",ds.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",ds.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",ds.prototype.ke);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",ds.prototype.bg);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",ds.prototype.Zi);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",ds.prototype.Ho);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Z",ds.prototype.lr);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",ds.prototype.He);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",ds.prototype.kr);v("xiv.ui.layouts.Conventional.prototype.updateStyle",ds.prototype.k);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",ds.prototype.ne);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",ds.prototype.oe);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",ds.prototype.Ne);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",ds.prototype.Jk);function hs(){W.call(this,"Z");Q(this.i.Z.a(),pj(Vq.uc,this.constructor.TITLE))}w(hs,as);v("xiv.ui.layouts.Transverse",hs);hs.TITLE="Transverse";hs.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",hs.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",hs.ID_PREFIX);function is(){W.call(this)}w(is,W);v("xiv.ui.layouts.FourUp",is);is.TITLE="Four-Up";is.ID_PREFIX="xiv.ui.layouts.FourUp";is.CSS_SUFFIX={mg:"x",ue:"y",Wk:"z",kp:"v"};f=is.prototype;f.ke=function(){is.d.ke.call(this);this.Mh("X",["RIGHT","TOP","TOP_RIGHT"]);G(this.i.X.R(),"resize",this.He.bind(this));G(this.i.X.R(),"resize_end",this.k.bind(this))};
f.He=function(){var a=wi(this.i.X.a()),b=Ki(this.i.X.a());ui(this.i.Y.a(),b.width,a.y);Hi(this.i.Y.a(),this.u.width-b.width,b.height);ui(this.i.Z.a(),0,0);Hi(this.i.Z.a(),b.width,a.y);ui(this.i.V.a(),b.width,0);Hi(this.i.V.a(),this.u.width-b.width,a.y);a=this.i.X.R().Hl("RIGHT").hd();a.style.top="0px";a.style.height=this.u.height.toString()+"px";this.xg()};f.k=function(){is.d.k.call(this);this.po();this.Ne();this.Jk();this.ne();this.oe()};
f.po=function(){if(this.ha.width!==this.u.width||this.ha.height!==this.u.height){var a=this.ha.height*(1-(this.ha.height-this.u.height)/this.ha.height)/2,b=this.ha.width*(1-(this.ha.width-this.u.width)/this.ha.width)/2;this.loop(function(c){Hi(c.a(),Math.max(b,this.jb),Math.max(a,this.Vc))}.bind(this))}};
f.ne=function(){this.i.X.a().style.top=this.i.Z.a().style.height;ui(this.i.X.R().gd(),this.jb,this.Vc);Hi(this.i.X.R().gd(),this.u.width-2*this.jb,this.u.height-2*this.Vc);var a=this.i.X.R().Hl("TOP").hd();a.style.left="0px";a.style.width=this.u.width.toString()+"px";this.i.X.R().update();a=this.i.X.R().Hl("RIGHT").hd();a.style.top="0px";a.style.height=this.u.height.toString()+"px"};f.oe=function(){this.i.Y.a().style.left=this.i.Z.a().style.width;this.i.Y.a().style.top=this.i.Z.a().style.height};
f.Ne=function(){};f.Jk=function(){this.i.V.a().style.left=this.i.Z.a().style.width};f.f=function(){is.d.f.call(this)};v("xiv.ui.layouts.FourUp.TITLE",is.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",is.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",is.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",is.prototype.ke);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",is.prototype.He);v("xiv.ui.layouts.FourUp.prototype.updateStyle",is.prototype.k);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",is.prototype.ne);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",is.prototype.oe);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",is.prototype.Ne);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",is.prototype.Jk);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",is.prototype.f);function js(){W.call(this,["X","Y","Z"])}w(js,W);v("xiv.ui.layouts.TwoDRow",js);js.TITLE="TwoDRow";js.ID_PREFIX="xiv.ui.layouts.TwoDRow";js.CSS_SUFFIX={mg:"x",ue:"y",Wk:"z"};f=js.prototype;f.ke=function(){js.d.ke.call(this);this.Mh("X",["RIGHT"]);G(this.i.X.R(),"resize",this.He.bind(this));G(this.i.X.R(),"resize_end",this.k.bind(this))};f.bg=function(){js.d.bg.call(this);this.Mh("Y",["RIGHT"]);G(this.i.Y.R(),"resize",this.sk.bind(this));G(this.i.Y.R(),"resize_end",this.k.bind(this))};f.Zi=function(){js.d.Zi.call(this)};
f.jo=function(a){this.nh();var b=Ki(this.i.X.a()),c=Ki(this.i.Y.a()),d=Ki(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.u.width)};f.He=function(){this.jo(function(a,b,c){b=Math.max(this.u.width-a.width-c.width,this.jb);var d=this.u.height-a.height;ui(this.i.Y.a(),a.width,d);Hi(this.i.Y.a(),b,a.height);ui(this.i.Z.a(),a.width+b,d);Hi(this.i.Z.a(),c.width,a.height)}.bind(this));this.xg()};
f.sk=function(){this.jo(function(a,b){var c=this.u.height-b.height;ui(this.i.X.a(),0,c);Hi(this.i.X.a(),a.width,b.height);ui(this.i.Z.a(),a.width+b.width,c);Hi(this.i.Z.a(),this.u.width-a.width-b.width,b.height)}.bind(this));this.xg()};f.k=function(){js.d.k.call(this);this.zw();this.yw();this.ne();this.oe();this.Ne()};f.yw=function(){var a=this.u.height.toString()+"px";this.ff(function(b){b.a().style.height=a})};
f.zw=function(){var a,b=1-(this.ha.width-this.u.width)/this.ha.width;this.ha.width!==this.u.width&&this.ff(function(c){a=Ki(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.jb).toString()+"px"}.bind(this))};function ks(a,b){var c=a.i[b].R().gd(),d=wi(a.i[b].a()),e=Ki(a.i[b].a());ui(c,parseInt(c.style.left),a.Vc);Hi(c,a.u.width-3*a.jb,a.u.height-2*a.Vc);c=a.i[b].R().hd("RIGHT");ui(c,d.x+e.width,d.y);Ji(c,a.u.height);a.i[b].R().update()}
f.ne=function(){kk(this.i.X.R().gd(),{left:this.jb});ks(this,"X")};f.oe=function(){this.i.Y.a().style.left=this.i.X.a().style.width;kk(this.i.Y.R().gd(),{left:2*this.jb});ks(this,"Y")};f.Ne=function(){this.i.Z.a().style.left=(parseInt(this.i.X.a().style.width)+parseInt(this.i.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",js.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",js.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",js.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",js.prototype.ke);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",js.prototype.bg);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",js.prototype.Zi);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",js.prototype.He);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",js.prototype.sk);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",js.prototype.k);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",js.prototype.ne);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",js.prototype.oe);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",js.prototype.Ne);function ls(){W.call(this,"Y");Q(this.i.Y.a(),pj(Vq.uc,this.constructor.TITLE.toLowerCase()))}w(ls,as);v("xiv.ui.layouts.Coronal",ls);ls.TITLE="Coronal";ls.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",ls.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",ls.ID_PREFIX);function ms(){V.call(this);this.constructor.Yw={};this.constructor.Yw[is.TITLE]=is;this.constructor.Yw[ds.TITLE]=ds;this.Sk={};this.Ui={};this.Sh={}}w(ms,V);v("xiv.ui.layouts.LayoutHandler",ms);ms.ID_PREFIX="xiv.ui.layouts.LayoutHandler";ms.CSS_SUFFIX={};f=ms.prototype;f.mb=null;f.Cd=null;f.wu=!1;f.oi=null;f.me=null;f.qy=!0;f.oI=function(){return this.wu};f.RE=function(a){this.qy=a};f.uz=function(){return this.mb[this.Oc]};f.vz=function(a){return this.mb[this.Oc].Yt(a)};
f.$o=function(){null!=this.Cd&&this.Cd.$o()};f.Zt=function(){return null!=this.Cd?this.Cd.xn():null};f.AG=function(a){return null!=this.Cd?this.Cd.Fz(a):null};f.zG=function(a){return null!=this.Cd?this.Cd.Bz(a):null};f.Jz=function(a,b){return null!=this.Cd?this.Cd.Ez(a,b):null};f.NB=function(a){this.Fk(a);null!=this.Cd&&this.Cd.Gv();this.mb[a].Qx();this.Cd=this.mb[a]};f.Rx=function(a,b){if(void 0 in this.Sk)throw Error(a+" is an already used layout title!");b&&(this.Sk[a]=b)};
f.Fk=function(a,b){if(!(a in this.Sk))throw Error("Invalid layout: "+a+"!");null==this.mb&&(this.mb={});a in this.mb||(this.mb[a]=new this.Sk[a],G(this.mb[a],"q",this.mr.bind(this)),ns(this.mb[a]),Rh(this.a(),this.mb[a].a()));this.vr=this.Oc;this.Oc=a;this.sC(!1===b?0:500)};function os(a){var b;C(a.mb[a.Oc].i,function(a,d){b=this.Jz(d,Xq);null!=b&&null==a[ps]&&(b.Zm(a.a()),a[ps]=!0)}.bind(a))}f.mr=function(){this.dispatchEvent({type:"A"})};
f.sC=function(a){a=u(a)&&0<=a?a:500;this.vr==this.Oc?os(this):this.vr?this.qy?qs(this,a):qs(this,0):(rs(this,this.Oc),ss(this,this.Oc))};function ts(a,b,c){D(Uh(b.a()),function(a){null!=this.Ui[c]||(this.Ui[c]=[]);this.Ui[c].push(a)}.bind(a))}function us(a){C(a.Sh,function(a){Rh(this.a().parentNode,a)}.bind(a))}function vs(a,b){var c=[];C(a.Sh,function(a,e){c=Lb(c,Dk(a,this.oi[e],this.me[e],b))}.bind(a));return c}
function qs(a,b){var c=a.mb[a.Oc].i,d;rs(a,a.Oc);ss(a,a.Oc);null!=a.oi&&sb(a.oi);null!=a.me&&sb(a.me);a.oi={};a.me={};C(a.mb[a.vr].i,function(a,b){d=a.a().cloneNode(!1);this.Sh[b]=d;ts(this,a,b);C(this.Ui,function(a,b){D(a,function(a){T(a);null!=this.Sh[b]&&this.Sh[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Ck(a.a(),c[b].a());this.oi[b]=k.VE;this.me[b]=k.lL}else this.oi[b]={"z-index":0},this.me[b]={opacity:0}}.bind(a));us(a);Ek(vs(a,b),a.iv.bind(a),a.jv.bind(a),a.hv.bind(a))}
f.iv=function(){this.jA();this.wu=!0;this.dispatchEvent({type:"x",sw:this.Sh})};var ps=B();f=ms.prototype;f.jv=function(){this.dispatchEvent({type:"z",sw:this.Sh})};
f.hv=function(){var a=this.mb[this.Oc].i;C(a,function(a,c){null!=this.Ui[c]&&D(this.Ui[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.me[c]&&kk(a.a(),this.me[c])}.bind(this));this.mb[this.Oc]!==this.Cd&&this.mb[this.Oc].Pv(this.Zt());ws(this);this.wu=!1;rs(this,this.Oc);ss(this,this.Oc);xs(this);this.dispatchEvent({type:"y",frames:a});os(this);this.k()};function ss(a,b){a.mb[b].a().style.opacity=1;a.mb[b].k()}
function rs(a,b){a.mb[b].a().style.visibility="visible";a.mb[b].k()}f.jA=function(){C(this.mb,function(a){a.a().style.visibility="hidden";a.k()}.bind(this))};function ws(a){C(a.Sh,function(a){T(a);delete a})}function ns(a){C(a.i,function(a){G(a.a(),"dblclick",function(){})})}f.gJ=function(a){this.MO.push(a)};f.k=function(){ms.d.k.call(this);this.mb[this.Oc].k()};
function xs(a){null!=a.oi&&(C(a.oi,function(a){sb(a)}),sb(a.me),delete a.me);null!=a.me&&(C(a.me,function(a){sb(a)}),sb(a.me),delete a.me)}f.f=function(){ms.d.f.call(this);xs(this);delete this.Sh;sb(this.Ui);delete this.Ui;delete this.Cd;this.nn(this.mb);delete this.mb;sb(this.Sk);delete this.Sk;delete this.Oc;delete this.vr};v("xiv.ui.layouts.LayoutHandler.EventType",{nM:"x",mM:"y",oM:"z",ms:"A"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",ms.ID_PREFIX);
v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",ms.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",ps);v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",ms.prototype.oI);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",ms.prototype.RE);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",ms.prototype.uz);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",ms.prototype.vz);
v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",ms.prototype.$o);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",ms.prototype.Zt);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",ms.prototype.AG);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",ms.prototype.zG);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",ms.prototype.Jz);v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",ms.prototype.NB);
v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",ms.prototype.Rx);v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",ms.prototype.Fk);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",ms.prototype.sC);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",ms.prototype.jA);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",ms.prototype.gJ);v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",ms.prototype.k);
v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",ms.prototype.f);function ys(a,b){this.x=a;this.y=b}w(ys,N);f=ys.prototype;f.clone=function(){return new ys(this.x,this.y)};f.Rf=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=N.prototype.scale;f.vb=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.Rf())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sc=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.zl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function zs(){Bq.call(this);this.ag("Display All");this.Qp=S("div",{id:"CheckboxHodler_"+B()});Q(this.Qp,zs.CSS.VC);this.Lj=new zq(!0);this.Lj.ub(this.Qp);this.Wi(this.Lj);G(this.Lj,"change",this.bc.bind(this))}w(zs,Bq);v("xiv.ui.ctrl.CheckboxController",zs);zs.ID_PREFIX="xiv.ui.ctrl.CheckboxController";zs.CSS_SUFFIX={VC:"checkboxholder"};zs.prototype.lf=function(a){this.A.lf(a);this.bc()};zs.prototype.bc=function(){this.dispatchEvent({type:"p",checked:this.Lj.zh()})};
zs.prototype.f=function(){zs.d.f.call(this);T(this.Qp);delete this.Qp;H(this.Lj);this.Lj.g();delete this.Lj};v("xiv.ui.ctrl.CheckboxController.ID_PREFIX",zs.ID_PREFIX);v("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",zs.CSS_SUFFIX);v("xiv.ui.ctrl.CheckboxController.prototype.setChecked",zs.prototype.lf);v("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",zs.prototype.bc);v("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",zs.prototype.f);function As(){V.call(this);this.Tc=S("img",{id:"nrg.ui.Thumbnail_"+B()});Rh(this.a(),this.Tc);this.Le=S("div",{id:"DisplayText_"+B()});Rh(this.a(),this.Le);this.Or();this.a().className=As.uc;this.Tc.className=As.CSS.Rk;this.Le.className=As.CSS.Tk;Bs(this,!0);this.ho()}w(As,V);v("nrg.ui.Thumbnail",As);As.ID_PREFIX="nrg.ui.Thumbnail";
As.CSS_SUFFIX={Rk:"image",Tk:"text",XM:"selected",fp:"mouseover",Xw:"image-mouseover",gx:"text-mouseover",Vw:"highlight",gj:"active",Ww:"image-active",fx:"text-active",gD:"hoverclone"};f=As.prototype;f.zy=null;f.ec=null;f.Kq=!1;f.oG=function(){return this.Tc};f.BB=function(a,b){this.zy=a;this.Tc.onerror=function(){this.Tc.onerror="";this.Tc.src=this.zy;null!=b&&b()}.bind(this)};f.dH=function(){return this.Le};f.cu=function(){for(var a=this.Le;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
f.af=function(){return this.ec=this.ec?this.ec:this.a()};f.Gg=function(){return this.Kq};f.Ov=function(a){this.Tc.src=a;this.Tc.className=As.CSS.Rk};f.Do=function(a){this.Le.innerHTML=a};f.qB=function(){this.ec&&(this.ec.parentNode&&(this.ec=this.ec.parentNode.removeChild(this.ec)),delete this.ec,this.ec=null)};
f.kn=function(a,b){this.qB();Bs(this,!1);this.ec=b?b:this.a().cloneNode(!0);this.ec.setAttribute("id","HOVERABLE_"+this.a().getAttribute("id"));this.ec.style.visibility="hidden";Q(this.ec,As.CSS.gD);Bs(this,!0);a&&a.appendChild(this.ec);this.Or()};f.setActive=function(a,b){var c=this.a();(this.Kq=a)?(b&&Q(c,As.CSS.Vw),Q(c,As.CSS.gj),Q(this.Le,As.CSS.fx),Q(this.Tc,As.CSS.Ww)):(uh(c,As.CSS.Vw),uh(c,As.CSS.gj),uh(this.Le,As.CSS.fx),uh(this.Tc,As.CSS.Ww))};f.k=function(a){a&&this.a()&&kk(this.a(),a)};
f.Hv=function(){var a=this.a(),b=this.af();if(b!==a){var c=$h(a,b),c=Di(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;kk(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.nr=function(){var a=this.af();Q(a,As.CSS.fp);Q(a.childNodes[1],As.CSS.gx);Q(a.childNodes[0],As.CSS.Xw);a!==this.a()&&this.Hv();this.dispatchEvent("B")};
f.ho=function(){var a=this.af();a&&1<a.childNodes.length&&(uh(a,As.CSS.fp),uh(a.childNodes[1],As.CSS.gx),uh(a.childNodes[0],As.CSS.Xw),a.style.visibility=a!==this.a()?"hidden":"visible");this.dispatchEvent("C")};function Bs(a,b){var c=a.af();b?(G(c,"mouseover",a.nr.bind(a)),G(c,"mouseout",a.ho.bind(a))):(Sc(c,"mouseover",a.nr.bind(a)),Sc(c,"mouseout",a.ho.bind(a)))}f.Or=function(){Uc(this.af(),"D")&&Tc("D");G(this.af(),"click",function(){this.dispatchEvent({type:"D"})}.bind(this))};
f.f=function(){As.d.f.call(this);H(this);H(this.a());null!=this.ec&&(H(this.ec),T(this.ec),delete this.ec);T(this.Tc);delete this.Tc;T(this.Le);delete this.Le;delete this.fO;delete this.Kq};v("nrg.ui.Thumbnail.EventType",{fp:"B",AD:"C",JL:"D"});v("nrg.ui.Thumbnail.ID_PREFIX",As.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",As.CSS_SUFFIX);v("nrg.ui.Thumbnail.HOVERABLE_PREFIX","HOVERABLE_");v("nrg.ui.Thumbnail.prototype.getImage",As.prototype.oG);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",As.prototype.BB);
v("nrg.ui.Thumbnail.prototype.getTextElement",As.prototype.dH);v("nrg.ui.Thumbnail.prototype.getText",As.prototype.cu);v("nrg.ui.Thumbnail.prototype.getHoverable",As.prototype.af);v("nrg.ui.Thumbnail.prototype.isActive",As.prototype.Gg);v("nrg.ui.Thumbnail.prototype.setImage",As.prototype.Ov);v("nrg.ui.Thumbnail.prototype.setText",As.prototype.Do);v("nrg.ui.Thumbnail.prototype.removeHoverable",As.prototype.qB);v("nrg.ui.Thumbnail.prototype.createHoverable",As.prototype.kn);
v("nrg.ui.Thumbnail.prototype.setActive",As.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",As.prototype.k);v("nrg.ui.Thumbnail.prototype.repositionHoverable",As.prototype.Hv);v("nrg.ui.Thumbnail.prototype.onMouseOver",As.prototype.nr);v("nrg.ui.Thumbnail.prototype.onMouseOut",As.prototype.ho);v("nrg.ui.Thumbnail.prototype.disposeInternal",As.prototype.f);function Cs(){V.call(this)}w(Cs,V);v("nrg.ui.ScrollableContainer",Cs);Cs.ID_PREFIX="nrg.ui.ScrollableContainer";Cs.CSS_SUFFIX={RD:"scrollarea",qa:"slider",Xh:"slider-thumb",Yh:"slider-track",ns:"slider-thumb-hovered",UD:"slider-track-hovered"};f=Cs.prototype;
f.n=function(a){Cs.d.n.call(this,a);null==this.Zf&&(this.Zf=S("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":Cs.CSS.RD}),this.a().appendChild(this.Zf));this.Va=new Jr("vertical");this.Va.n(this.a());G(this.Va,"v",this.Uc.bind(this));this.Va.Zm(this.a());Q(this.Va.a(),Cs.CSS.qa);Q(this.Va.Gc,Cs.CSS.Xh);Q(this.Va.nd,Cs.CSS.Yh);this.Va.Jp(Cs.CSS.ns);this.Va.Xs(Cs.CSS.UD);this.k();this.Uc()};f.Ue=function(a){this.ea||this.n();Rh(this.Zf,a);this.Uc()};f.a=function(){return this.o};
f.$G=function(){return this.Va};f.WG=function(){return this.Zf};f.k=function(a){a&&kk(this.o,a)};f.Uc=function(){var a=Ki(this.o).height,b=Ki(this.Zf).height,c=[this.Va.va(),this.Va.ja()],d=[0,b-a];a<b?(this.Va.a().style.opacity=1,kk(this.Va.Gc,{height:a/b*a}),this.Va.ic(!0),a=this.Va.ja()-this.Va.K(),c=ck(a,c,d).remappedVal,kk(this.Zf,{top:-c})):(this.Va.a().style.opacity=0,this.Va.ic(!1),this.Va.J(100))};
f.f=function(){Cs.d.f.call(this);null!=this.Va&&(H(this.Va),this.Va.g(),delete this.Va);null!=this.Zf&&(T(this.Zf),delete this.Zf)};v("nrg.ui.ScrollableContainer.ID_PREFIX",Cs.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",Cs.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",Cs.prototype.n);v("nrg.ui.ScrollableContainer.prototype.addContents",Cs.prototype.Ue);v("nrg.ui.ScrollableContainer.prototype.getElement",Cs.prototype.a);
v("nrg.ui.ScrollableContainer.prototype.getSlider",Cs.prototype.$G);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",Cs.prototype.WG);v("nrg.ui.ScrollableContainer.prototype.updateStyle",Cs.prototype.k);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",Cs.prototype.Uc);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",Cs.prototype.f);function Ds(){V.call(this)}w(Ds,Cs);v("nrg.ui.ScrollableZippyTree",Ds);Ds.ID_PREFIX="nrg.ui.ScrollableZippyTree";Ds.CSS_SUFFIX={mE:"zippytree"};f=Ds.prototype;f.n=function(a){Ds.d.n.call(this,a);this.ma=new iq;Q(this.ma.a(),Ds.CSS.mE);this.Zf.appendChild(this.ma.a());this.Go();this.Va.bC(!0,.3)};f.Ue=function(a,b){this.ma.Ue(a,b);a=g(a)?a:[a];D(a,function(){}.bind(this));this.Va.Zm(this.ma.a())};f.Bl=function(){this.ma.Bl()};f.en=function(){this.ma.en()};f.Qb=function(a,b){this.ma.Qb(a,b)};f.yH=function(){return this.ma};
f.KE=function(a){this.ma.hn(a);this.Uc()};f.Go=function(){G(this.ma,"n",this.Uc.bind(this));G(this.ma,"a",this.Uc.bind(this));G(this.ma,"b",this.Uc.bind(this));G(this.ma,nl.CD,this.Uc.bind(this))};f.k=function(a){a&&kk(this.a(),a)};f.f=function(){Ds.d.f.call(this);null!=this.ma&&(H(this.ma),this.ma.g(),delete this.ma)};v("nrg.ui.ScrollableZippyTree.EventType",{});v("nrg.ui.ScrollableZippyTree.ID_PREFIX",Ds.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",Ds.CSS_SUFFIX);
v("nrg.ui.ScrollableZippyTree.prototype.render",Ds.prototype.n);v("nrg.ui.ScrollableZippyTree.prototype.addContents",Ds.prototype.Ue);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",Ds.prototype.Bl);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",Ds.prototype.en);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",Ds.prototype.Qb);v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",Ds.prototype.yH);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",Ds.prototype.KE);
v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",Ds.prototype.Go);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",Ds.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",Ds.prototype.f);function Es(){$c.call(this);this.s="shaders";this.Ep="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Ep=a+="}\n";this.sp="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.sp=a+="}\n"}
w(Es,$c);
var Fs={EN:"vertexPosition",DN:"vertexNormal",CN:"vertexColor",GN:"vertexTexturePos",FN:"vertexScalar"},Gs={IN:"view",FM:"perspective",GL:"center",CM:"objectTransform",yN:"useObjectColor",AM:"objectColor",AN:"useScalars",VM:"scalarsReplaceMode",SM:"scalarsMin",PM:"scalarsMax",TM:"scalarsMinColor",QM:"scalarsMaxColor",UM:"scalarsMinThreshold",RM:"scalarsMaxThreshold",OM:"scalarsInterpolation",GM:"pointSize",BM:"objectOpacity",zM:"normal",zN:"usePicking",BN:"useTexture",xN:"useLabelMapTexture",lM:"labelmapOpacity",
kM:"labelmapColor",kN:"textureSampler",lN:"textureSampler2",MN:"volumeLowerThreshold",TN:"volumeUpperThreshold",QN:"volumeScalarMin",ON:"volumeScalarMax",RN:"volumeScalarMinColor",PN:"volumeScalarMaxColor",VN:"volumeWindowLow",UN:"volumeWindowHigh",SN:"volumeTexture"};
function Hs(a){var b=Object.keys(Gs);if(!Object.keys(Fs).every(function(a){a=Fs[a];return-1!=this.Ep.search(a)||-1!=this.sp.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Gs[a];return-1!=this.Ep.search(a)||-1!=this.sp.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Is(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");$c.call(this);this.s="buffer";this.pb=a;this.bi=b;this.ci=c}w(Is,$c);function Js(a,b){this.st=a instanceof N?a:new N(a,b)}w(Js,Ko);Js.prototype.ge=function(a,b,c,d){qo(xi(a),0,a,b,this.st,c,null,d)};function Ks(a,b){this.kK=4;this.Cv=b||void 0;nm.call(this,a)}w(Ks,nm);Ks.prototype.Sv=function(a){this.Cv=a||void 0;this.wa()&&this.ge()};Ks.prototype.ge=function(){if(this.Cv){var a=!this.wa()&&"move_offscreen"!=this.pm,b=this.a();a&&(b.style.visibility="hidden",Oi(b,!0));this.Cv.ge(b,this.kK,this.CO);a&&Oi(b,!1)}};function Ls(a,b,c){this.hb=c||(a?Ah(Dh(a)):Ah());Ks.call(this,this.hb.v("div",{style:"position:absolute;display:none;"}));this.yt=new N(1,1);this.Xj=new eg;a&&this.ql(a);null!=b&&this.Do(b)}w(Ls,Ks);var Ms=[];f=Ls.prototype;f.Sd=null;f.className="goog-tooltip";f.iC=500;f.PH=0;f.M=function(){return this.hb};f.ql=function(a){a=Dh(a);this.Xj.add(a);G(a,"mouseover",this.hk,!1,this);G(a,"mouseout",this.yq,!1,this);G(a,"mousemove",this.$z,!1,this);G(a,"focus",this.fk,!1,this);G(a,"blur",this.yq,!1,this)};
f.detach=function(a){if(a)a=Dh(a),Ns(this,a),this.Xj.remove(a);else{for(var b=this.Xj.ck(),c=0;a=b[c];c++)Ns(this,a);this.Xj.clear()}};function Ns(a,b){Sc(b,"mouseover",a.hk,!1,a);Sc(b,"mouseout",a.yq,!1,a);Sc(b,"mousemove",a.$z,!1,a);Sc(b,"focus",a.fk,!1,a);Sc(b,"blur",a.yq,!1,a)}f.Do=function(a){ai(this.a(),a)};f.Mv=function(a){var b=this.a();b&&T(b);Ls.d.Mv.call(this,a);a&&(b=this.hb.na.body,b.insertBefore(a,b.lastChild))};f.cu=function(){return gi(this.a())};
f.Il=function(){return this.$i?this.wa()?4:1:this.Gn?3:this.wa()?2:0};f.Yu=function(){if(!nm.prototype.Yu.call(this))return!1;if(this.anchor)for(var a,b=0;a=Ms[b];b++)Zh(a.a(),this.anchor)||a.$(!1);Jb(Ms,this);a=this.a();a.className=this.className;Os(this);G(a,"mouseover",this.gA,!1,this);G(a,"mouseout",this.fA,!1,this);Ps(this);return!0};
f.fv=function(){Kb(Ms,this);for(var a=this.a(),b,c=0;b=Ms[c];c++)b.anchor&&Zh(a,b.anchor)&&b.$(!1);this.fB&&Qs(this.fB);Sc(a,"mouseover",this.gA,!1,this);Sc(a,"mouseout",this.fA,!1,this);this.anchor=void 0;0==this.Il()&&(this.Gr=!1);nm.prototype.fv.call(this)};f.KA=function(a,b){this.anchor==a&&this.Xj.contains(this.anchor)&&(this.Gr||!this.RO?(this.$(!1),this.wa()||(this.anchor=a,this.Sv(b||Rs(this,0)),this.$(!0))):this.anchor=void 0);this.$i=void 0};
f.yI=function(a){this.Gn=void 0;a==this.anchor&&(null!=this.Sd&&(this.Sd==this.a()||this.Xj.contains(this.Sd))||this.Dy&&this.Dy.Sd||this.$(!1))};function Ss(a,b){var c=oi(a.hb);a.yt.x=b.clientX+c.x;a.yt.y=b.clientY+c.y}f.hk=function(a){var b=Ts(this,a.target);this.Sd=b;Os(this);b!=this.anchor&&(this.anchor=b,this.$i||(this.$i=Sf(ta(this.KA,this,b,void 0),this.iC)),Us(this),Ss(this,a))};function Ts(a,b){try{for(;b&&!a.Xj.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.$z=function(a){Ss(this,a);this.Gr=!0};f.fk=function(a){this.Sd=a=Ts(this,a.target);this.Gr=!0;if(this.anchor!=a){this.anchor=a;var b=Rs(this,1);Os(this);this.$i||(this.$i=Sf(ta(this.KA,this,a,b),this.iC));Us(this)}};function Rs(a,b){if(0==b){var c=a.yt.clone();return new Vs(c)}return new Ws(a.Sd)}function Us(a){if(a.anchor)for(var b,c=0;b=Ms[c];c++)Zh(b.a(),a.anchor)&&(b.Dy=a,a.fB=b)}
f.yq=function(a){var b=Ts(this,a.target),c=Ts(this,a.relatedTarget);b!=c&&(b==this.Sd&&(this.Sd=null),Ps(this),this.Gr=!1,!this.wa()||a.relatedTarget&&Zh(this.a(),a.relatedTarget)?this.anchor=void 0:Qs(this))};f.gA=function(){var a=this.a();this.Sd!=a&&(Os(this),this.Sd=a)};f.fA=function(a){var b=this.a();this.Sd!=b||a.relatedTarget&&Zh(b,a.relatedTarget)||(this.Sd=null,Qs(this))};function Ps(a){a.$i&&(ba.clearTimeout(a.$i),a.$i=void 0)}
function Qs(a){2==a.Il()&&(a.Gn=Sf(ta(a.yI,a,a.anchor),a.PH))}function Os(a){a.Gn&&(ba.clearTimeout(a.Gn),a.Gn=void 0)}f.f=function(){this.$(!1);Ps(this);this.detach();this.a()&&T(this.a());this.Sd=null;delete this.hb;Ls.d.f.call(this)};function Vs(a,b){Js.call(this,a,b)}w(Vs,Js);Vs.prototype.ge=function(a,b,c){b=xi(a);b=Ai(b);c=c?new mh(c.top+10,c.right,c.bottom,c.left+10):new mh(10,0,0,10);so(this.st,a,4,c,b,9)&496&&so(this.st,a,4,c,b,5)};function Ws(a){Lo.call(this,a,3)}w(Ws,Lo);
Ws.prototype.ge=function(a,b,c){var d=new N(10,0);qo(this.element,this.gn,a,b,d,c,9)&496&&qo(this.element,2,a,1,d,c,5)};function Xs(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!u(b)||!u(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof br))throw Error("Invalid interactor.");Ls.call(this);this.s="caption";this.Te=a;this.Hp=b;this.Ip=c;this.Ca=d;this.jh=null;this.wj=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.wj=[a];Rc(d,ie,this.Rn.bind(this));this.nu()}
w(Xs,Ls);Xs.prototype.nu=function(){var a=ri(this.Te,"position");if("static"==a||""==a)this.Te.style.position="relative";var a=document.getElementsByTagName("head")[0],b=S("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.wj[0]));a.appendChild(b);b.appendChild(c);this.jh=b;this.Sv(new Js(this.Hp,this.Ip));this.$(!0);this.ql(this.Te);this.a().classList.add("x-tooltip")};Xs.prototype.Rn=function(){this.$(!1);this.jh&&T(this.jh);this.a()&&T(this.a());this.jh=null};function Ys(){yr.call(this);this.s="renderer3D";this.Gm=this.Jm=this.Fm=this.Im=this.Em=this.Hm=this.Ns=this.Os=null;this.Oa=[0,0,0];this.ym=[0,0,0];this.Ex=null;this.ys=new gd;this.Tm=new gd;this.Ej=new gd;this.Km=new gd;this.$k=new gd;this.il=new gd;this.Cj=new gd;this.nl=new gd;this.ob={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(Ys,yr);Ys.prototype.__defineGetter__("config",function(){return this.ob});f=Ys.prototype;
f.uK=function(){this.Gm=this.Jm=this.Fm=this.Im=this.Em=this.Hm=null;this.Oa=[0,0,0]};f.gv=function(a){Ys.d.gv.call(this,a);var b=a.Hp;a=a.Ip;var c=this.zv(b,a);if(c=this.get(c))if(c=c.Zk){var d=Ei(this.sa),b=new Xs(this.sa,d.x+b+10,d.y+a+10,this.Ca);a=lm(c,null);if(b=b.a())b.innerHTML=km(a)}};
f.oa=function(){Ys.d.oa.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Ra,this.Fa),this.b.clearColor(this.ym[0],this.ym[1],this.ym[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.ob.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Ra,this.Fa,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Ra,this.Fa);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.Ex=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new Es;Zs(this,a)};
function Zs(a,b){if(null==a.mc||null==a.b||null==a.ga)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Es))throw Error("Could not add shaders.");Hs(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.sp);a.b.shaderSource(d,b.Ep);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.Ns=e;Object.keys(Fs).forEach(function(a){a=Fs[a];this.ys.set(a,this.b.getAttribLocation(this.Ns,a));this.b.enableVertexAttribArray(this.ys.get(a))}.bind(a));
Object.keys(Gs).forEach(function(a){a=Gs[a];this.Tm.set(a,this.b.getUniformLocation(this.Ns,a))}.bind(a));a.Os=b}
f.Xg=function(a){Ys.d.Xg.call(this,a);var b=!1;if(null!=a){this.get(a.ad)&&(b=!0);var c=a.ad,d=a.C,e=a.aa,h=a.xc,k=a.Qa,l=a.da,n=a.Yb,m=a.td,q=a.q,p=a.Xa;if(null!=q&&null!=q.da&&q.da.G)this.Xg(q);else if(null!=q&&q.G&&this.Xg(q),null!=m&&null!=m.da&&m.da.G)this.Db.load(m,a);else if(null!=k&&null!=k.da&&k.da.G)this.Db.load(k,a);else{if(null!=l&&g(l))if(null!=a.Zg){if(a.Zg.Xn!=l.length||!a.G)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Db.load(l[b],a);return}else{if(null!=l&&l.G){this.Db.load(a,
a);return}if(null!=p&&null!=p.da&&p.da.G){this.Db.load(p,a);return}}if(0<a.j.length)for(l=a.j,m=l.length,q=q=0;q<m;q++)this.Xg(l[q]);if(d){for(l=0;this.yp;)l++,window.console.log("Possible thread lock avoided: "+l);this.yp=!0;m=a instanceof Ie&&a.kh instanceof Jp;b&&null!=k&&k.G&&(l=this.Cj.get(c),null!=l&&this.b.isBuffer(l.pb)&&this.b.deleteBuffer(l.pb));l=null;if(null!=k)if(!b||k.G){l=a.ml;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
q=!1;k.ji&&(q=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,q);q=this.b.createTexture();q.VH=k.yf;this.nl.set(k.ad,q);this.b.bindTexture(this.b.TEXTURE_2D,q);k.ji?(q=this.b.RGBA,k.ux&&(q=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,q,k.Ms,k.Ls,0,q,this.b.UNSIGNED_BYTE,k.ji)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,q.VH);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);m?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);q=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
q);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new Is(q,l.length,2);this.Cj.set(c,l);k.G=!1}else l=this.Cj.get(c);Jf(this.Db,.1);if(m)this.yp=!1,A.pd(this.s+".update"),Jf(this.Db,.9);else{if(!b||d.G||n.G){m=n.rb;k=A.t.Gb(m,d.Cf,d.Df,d.Ef);m=A.t.Gb(m,d.zf,d.Af,d.Bf);if(null===this.Hm||k.x<this.Hm)this.Hm=k.x;if(null===this.Em||m.x>this.Em)this.Em=m.x;if(null===this.Im||k.y<this.Im)this.Im=k.y;if(null===this.Fm||m.y>this.Fm)this.Fm=m.y;if(null===this.Jm||k.z<this.Jm)this.Jm=
k.z;if(null===this.Gm||m.z>this.Gm)this.Gm=m.z;this.Oa=[(this.Hm+this.Em)/2,(this.Im+this.Fm)/2,(this.Jm+this.Gm)/2];n.G=!1}b&&d.G&&(n=this.Ej.get(c),null!=n&&this.b.isBuffer(n.pb)&&this.b.deleteBuffer(n.pb));n=null;!b||d.G?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.Nb,this.b.STATIC_DRAW),n=new Is(n,d.count,3),d.G=!1):n=this.Ej.get(c);Jf(this.Db,.3);b&&e.G&&(k=this.Ej.get(c),null!=k&&this.b.isBuffer(k.pb)&&this.b.deleteBuffer(k.pb));
k=null;!b||e.G?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.Nb,this.b.STATIC_DRAW),k=new Is(k,e.count,3),e.G=!1):k=this.Km.get(c);Jf(this.Db,.3);b&&h&&h.G&&(e=this.$k.get(c),null!=e&&this.b.isBuffer(e.pb)&&this.b.deleteBuffer(e.pb));e=null;if(h)if(!b||h.G){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.Nb,this.b.STATIC_DRAW);e=new Is(e,h.count,3);h.G=!1}else e=this.$k.get(c);Jf(this.Db,.2);b&&p&&p.G&&(h=this.il.get(c),null!=h&&this.b.isBuffer(h.pb)&&this.b.deleteBuffer(h.pb));h=null;if(p)if(h=p.Am,!b||p.G){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new Is(d,h.length,3);p.G=!1}else h=this.il.get(c);Jf(this.Db,.1);b||this.qg.add(a);this.Ej.set(c,
n);this.Km.set(c,k);this.$k.set(c,e);this.Cj.set(c,l);this.il.set(c,h);this.yp=a.G=!1}}else a.G=!1}}};f.zv=function(a,b){if(this.ob.PICKING_ENABLED){this.Mg(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.Fa-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.Mg=function(a,b){Ys.d.Mg.call(this,a,b);this.b.viewport(0,0,this.Ra,this.Fa);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.qg.Wa,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Ex):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.ga.Ks,h=this.ga.O;this.b.uniformMatrix4fv(this.Tm.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.Tm.get("view"),!1,h);e=this.Oa;this.b.uniform3f(this.Tm.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.bd.length;for(e=0;e<h;++e){var k=this.bd[e];if(k instanceof J){var l=A.t.Gb(this.ga.O,k.ra[0]+k.e[0].D[0],k.ra[1]+k.e[0].D[1],k.ra[2]+k.e[0].D[2]),n=A.t.Gb(this.ga.O,k.ra[0]-k.e[0].D[0],k.ra[1]-k.e[0].D[1],k.ra[2]-k.e[0].D[2]),m=Math.abs(l.z-n.z),l=A.t.Gb(this.ga.O,k.ra[0]+k.e[1].D[0],k.ra[1]+k.e[1].D[1],k.ra[2]+k.e[1].D[2]),n=A.t.Gb(this.ga.O,k.ra[0]-k.e[1].D[0],k.ra[1]-k.e[1].D[1],k.ra[2]+-k.e[1].D[2]),q=Math.abs(l.z-n.z),l=A.t.Gb(this.ga.O,k.ra[0]+k.e[2].D[0],k.ra[1]+k.e[2].D[1],k.ra[2]+
k.e[2].D[2]),n=A.t.Gb(this.ga.O,k.ra[0]-k.e[2].D[0],k.ra[1]-k.e[2].D[1],k.ra[2]-k.e[2].D[2]),l=Math.max(m,q,Math.abs(l.z-n.z));l==m?Ip(k,0):l==q?Ip(k,1):Ip(k,2)}}if(this.ob.ORDERING_ENABLED){m=!1;h=this.bd;k=h.length-1;do if(e=h[k],e instanceof J&&e.xe&&-1!=e.xb){var m=e.j[e.xb].j,q=e.xb,l=A.t.Gb(this.ga.O,e.ra[0]+e.e[q].La[0],e.ra[1]+e.e[q].La[1],e.ra[2]+e.e[q].La[2]),n=A.t.Gb(this.ga.O,e.ra[0]-e.e[q].La[0],e.ra[1]-e.e[q].La[1],e.ra[2]-e.e[q].La[2]),l=l.z-n.z,n=Math.max(e.Xk[e.xb],Math.max(e.Xk[e.xb+
4],e.Xk[e.xb+8])),p=Math.min(e.Xk[e.xb],Math.min(e.Xk[e.xb+4],e.Xk[e.xb+8]));if(0>l*(n+p))for(l=l=0;l<e.Om[q]-1;l++)m[l]&&(m[l].Kc=e.Kc,m[l].$c=e.e[q].kl*l);else for(l=e.Om[q]-1;0<=l;l--)m[l]&&(m[l].Kc=e.Kc,m[l].$c=(e.Om[q]-1)*e.e[q].kl-e.e[q].kl*l);m=!0}while(k--);h=this.qg.Wa;k=h.length-1;do e=h[k],!e.gb||1==e.Kc||e instanceof Ie||(m=e,q=e.C.pp,e=A.t.Gb(e.Yb.rb,q[0],q[1],q[2]),e=A.t.Gb(this.ga.O,e.x,e.y,e.z),e=A.P.Ht(this.ga.yj,e),e=Math.round(1E3*e)/1E3,m.$c=e,m=!0);while(k--);m&&this.qg.sort()}if(h=
!a&&null!=b&&b&&this.ob.STATISTICS_ENABLED)var t=0,s=0,z=0,y=0;var e=this.ys,k=e.get("vertexPosition"),m=e.get("vertexNormal"),q=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.Tm,p=e.get("usePicking"),I=e.get("useObjectColor"),R=e.get("objectColor"),O=e.get("useScalars"),F=e.get("scalarsReplaceMode"),P=e.get("scalarsMin"),Y=e.get("scalarsMax"),U=e.get("scalarsMinColor"),ua=e.get("scalarsMaxColor"),na=e.get("scalarsInterpolation"),wa=e.get("scalarsMinThreshold"),Ma=
e.get("scalarsMaxThreshold"),Ga=e.get("objectOpacity"),Na=e.get("labelmapOpacity"),ka=e.get("labelmapColor"),xa=e.get("useTexture"),qa=e.get("useLabelMapTexture"),Ac=e.get("textureSampler"),te=e.get("textureSampler2"),ue=e.get("volumeLowerThreshold"),ve=e.get("volumeUpperThreshold"),Wd=e.get("volumeScalarMin"),Nh=e.get("volumeScalarMax"),Cv=e.get("volumeWindowLow"),Dv=e.get("volumeWindowHigh"),Ev=e.get("volumeScalarMinColor"),Fv=e.get("volumeScalarMaxColor"),fs=e.get("volumeTexture"),Gv=e.get("objectTransform"),
Hv=e.get("pointSize"),e=d;do{var Oa=c[d-e];if(Oa){var ib=null;Oa instanceof Ie&&Oa.kh&&(ib=Oa.kh);if(Oa.gb&&(!ib||ib.gb)&&(!a||Oa.Lm)){var xc=Oa.ad,Nd=Oa.Dm,jd=this.Ej.get(xc),me=this.Km.get(xc),$m=this.$k.get(xc),lf=this.il.get(xc),an=this.Cj.get(xc);this.b.bindBuffer(this.b.ARRAY_BUFFER,jd.pb);this.b.vertexAttribPointer(k,jd.ci,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,me.pb);this.b.vertexAttribPointer(m,me.ci,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(p,!0):this.b.uniform1i(p,!1);
!$m||a||Nd?(me=1,Nd&&!a&&(me=0),this.b.uniform1i(I,me),me=Oa.Ea,a&&(me=[Math.floor(xc%65025%255)/255,Math.floor(xc%65025/255)/255,Math.floor(xc/65025)/255]),this.b.uniform3f(R,parseFloat(me[0]),parseFloat(me[1]),parseFloat(me[2])),this.b.vertexAttribPointer(q,jd.ci,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(I,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,$m.pb),this.b.vertexAttribPointer(q,$m.ci,this.b.FLOAT,!1,0,0));!lf||a||Nd?(this.b.uniform1i(O,!1),this.b.vertexAttribPointer(n,jd.ci,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(O,!0),this.b.uniform1i(F,Oa.Xa.Hx),xc=Oa.Xa.fi,Nd=Oa.Xa.di,this.b.uniform3f(U,parseFloat(xc[0]),parseFloat(xc[1]),parseFloat(xc[2])),this.b.uniform3f(ua,parseFloat(Nd[0]),parseFloat(Nd[1]),parseFloat(Nd[2])),this.b.uniform1f(wa,parseFloat(Oa.Xa.qb)),this.b.uniform1f(Ma,parseFloat(Oa.Xa.sb)),this.b.uniform1f(P,parseFloat(Oa.Xa.Pd)),this.b.uniform1f(Y,parseFloat(Oa.Xa.Mb)),this.b.uniform1i(na,parseInt(Oa.Xa.As,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,lf.pb),this.b.vertexAttribPointer(n,
lf.ci,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ga,parseFloat(Oa.Kc));Oa.Qa&&an&&!a?(this.b.uniform1i(xa,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.nl.get(Oa.Qa.ad)),this.b.uniform1i(Ac,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,an.pb),this.b.vertexAttribPointer(l,an.ci,this.b.FLOAT,!1,0,0),this.b.uniform1i(fs,!1)):(this.b.uniform1i(xa,!1),this.b.vertexAttribPointer(l,jd.ci,this.b.FLOAT,!1,0,0));ib&&(this.b.uniform1i(fs,!0),this.b.uniform1f(ue,ib.qb),this.b.uniform1f(ve,
ib.sb),this.b.uniform1f(Wd,ib.Pd),this.b.uniform1f(Nh,ib.Mb),xc=ib.fi,Nd=ib.di,this.b.uniform3f(Ev,parseFloat(xc[0]),parseFloat(xc[1]),parseFloat(xc[2])),this.b.uniform3f(Fv,parseFloat(Nd[0]),parseFloat(Nd[1]),parseFloat(Nd[2])),this.b.uniform1f(Cv,ib.Fb),this.b.uniform1f(Dv,ib.Eb),lf=ib.q,this.b.uniform1i(qa,!1),ib.xe?this.b.uniform1f(Ga,parseFloat(ib.Kc)):lf&&lf.gb&&(ib=Oa.q.ad,this.b.uniform1i(qa,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.nl.get(ib)),this.b.uniform1i(te,
1),this.b.uniform1f(Na,lf.Kc),this.b.uniform4fv(ka,lf.Qs)));this.b.uniformMatrix4fv(Gv,!1,Oa.Yb.rb);ib=1;"POINTS"==Oa.wd&&(ib=Oa.Mm);this.b.uniform1f(Hv,ib);ib=-1;Oa.wd==Qd?(ib=this.b.TRIANGLES,h&&(s+=jd.bi/3)):"LINES"==Oa.wd?(this.b.lineWidth(Oa.gl),ib=this.b.LINES,h&&(z+=jd.bi/2)):"POINTS"==Oa.wd?(ib=this.b.POINTS,h&&(y+=jd.bi)):"TRIANGLE_STRIPS"==Oa.wd?(ib=this.b.TRIANGLE_STRIP,h&&(s+=jd.bi/3)):"POLYGONS"==Oa.wd&&(ib=0==jd.bi%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(s+=jd.bi/3));h&&(t+=jd.bi);
this.b.drawArrays(ib,0,jd.bi)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+t+" | "),c+="Triangles: "+Math.round(s)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.nl.vh(),window.console.log(c))}};
f.remove=function(a){Ys.d.remove.call(this,a);if(0<a.j.length)for(var b=a.j,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.ad;c=this.Cj.get(b);null!=c&&this.b.isBuffer(c.pb)&&this.b.deleteBuffer(c.pb);a.Qa&&(c=this.nl.get(a.Qa.ad))&&(this.b.deleteTexture(c),this.nl.remove(a.Qa.ad));c=this.Ej.get(b);null!=c&&this.b.isBuffer(c.pb)&&this.b.deleteBuffer(c.pb);c=this.Km.get(b);null!=c&&this.b.isBuffer(c.pb)&&this.b.deleteBuffer(c.pb);c=this.$k.get(b);null!=c&&this.b.isBuffer(c.pb)&&this.b.deleteBuffer(c.pb);
c=this.il.get(b);null!=c&&this.b.isBuffer(c.pb)&&this.b.deleteBuffer(c.pb);this.Ej.remove(b);this.Km.remove(b);this.$k.remove(b);this.Cj.remove(b);this.il.remove(b);this.qg.remove(a);return!0};f.Vd=function(){this.Os=null;delete this.Os;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);Ys.d.Vd.call(this)};Ys.prototype.__defineGetter__("bgColor",function(){return this.ym});Ys.prototype.__defineSetter__("bgColor",function(a){this.ym=a});
Ys.prototype.iK=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.zv(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=qr(this.ga,a/this.Ra*2-1,(this.Fa-b)/this.Fa*2-1,0);a=qr(this.ga,a/this.Ra*2-1,(this.Fa-b)/this.Fa*2-1,1);h[0]+=this.Oa[0];h[1]+=this.Oa[1];h[2]+=this.Oa[2];a[0]+=this.Oa[0];a[1]+=this.Oa[1];a[2]+=this.Oa[2];b=[e.C.Cf,e.C.Df,e.C.Ef];var k=[e.C.zf,e.C.Df,e.C.Ef],l=[e.C.zf,e.C.Af,e.C.Ef],n=[e.C.Cf,e.C.Af,e.C.Ef],m=[e.C.Cf,e.C.Af,e.C.Bf],q=[e.C.Cf,e.C.Df,
e.C.Bf],p=[e.C.zf,e.C.Af,e.C.Bf],t=[e.C.zf,e.C.Df,e.C.Bf];b=[A.t.Gb(e.Yb.rb,b[0],b[1],b[2]),A.t.Gb(e.Yb.rb,k[0],k[1],k[2]),A.t.Gb(e.Yb.rb,l[0],l[1],l[2]),A.t.Gb(e.Yb.rb,n[0],n[1],n[2]),A.t.Gb(e.Yb.rb,m[0],m[1],m[2]),A.t.Gb(e.Yb.rb,q[0],q[1],q[2]),A.t.Gb(e.Yb.rb,p[0],p[1],p[2]),A.t.Gb(e.Yb.rb,t[0],t[1],t[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],k=[Math.min(k[0],s.x),Math.max(k[1],s.x),Math.min(k[2],s.y),Math.max(k[3],s.y),Math.min(k[4],s.z),Math.max(k[5],
s.z)];s=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,t=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(s[l]-h[n]);Infinity!=y&&-Infinity!=y&&(p=h[m]+a[m]*y,y=h[q]+a[q]*y,p>=s[t]&&p<=s[t+1]&&y>=s[z]&&y<=s[z+1]?(t=[],t[n]=s[l],t[m]=p,t[q]=y,b.push(t)):(t=[],t[n]=s[l],t[m]=p,t[q]=y,k.push(t)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(s=0;2>s;s++)b=a[s],k[s]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=s=null;k[0]<k[1]?(s=a[0],b=a[1]):
(s=a[1],b=a[0]);h=Math.sqrt((s[0]-b[0])*(s[0]-b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));h/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k=[s[0]/b,s[1]/b,s[2]/b];l=e.C.Nb;n=l.length;for(s=0;s<h;s+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(m=l[b],q=l[b+1],p=l[b+2],t=new A.P(m,q,p),t=A.t.Gb(e.Yb.rb,m,q,p),Math.sqrt((a[0]-t.x)*(a[0]-t.x)+(a[1]-t.y)*(a[1]-t.y)+(a[2]-t.z)*(a[2]-t.z))<=d)return[t.x,t.y,t.z];return null};
v("X.renderer3D",Ys);v("X.renderer3D.prototype.init",Ys.prototype.oa);v("X.renderer3D.prototype.add",Ys.prototype.add);v("X.renderer3D.prototype.onShowtime",Ys.prototype.cB);v("X.renderer3D.prototype.onRender",Ys.prototype.aB);v("X.renderer3D.prototype.get",Ys.prototype.get);v("X.renderer3D.prototype.render",Ys.prototype.n);v("X.renderer3D.prototype.destroy",Ys.prototype.Vd);v("X.renderer3D.prototype.remove",Ys.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",Ys.prototype.uK);
v("X.renderer3D.prototype.resetViewAndRender",Ys.prototype.no);v("X.renderer3D.prototype.pick",Ys.prototype.zv);v("X.renderer3D.prototype.pick3d",Ys.prototype.iK);function $s(){Ys.call(this)}w($s,Ys);v("xiv.vis.XtkRenderer3D",$s);f=$s.prototype;f.Uf=function(){this.uk()};f.tk=function(a){$s.d.tk.call(this,a);this.dispatchEvent({type:"s",value:a.Dj})};f.n=function(){this.mc&&this.b?($s.d.n.call(this),this.dispatchEvent({type:"t"})):(this.ob.PROGRESSBAR_ENABLED=!1,this.oa())};f.Vd=function(){$s.d.Vd.call(this)};f.remove=function(a){null!=a&&$s.d.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",$s.prototype.Uf);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",$s.prototype.tk);v("xiv.vis.XtkRenderer3D.prototype.render",$s.prototype.n);v("xiv.vis.XtkRenderer3D.prototype.remove",$s.prototype.remove);function at(){Yc.call(this);this.Ok=[]}w(at,Yc);v("xiv.vis.XtkPlane",at);var bt=[-300,300,300];f=at.prototype;f.Tl=!0;f.Vk=null;f.orientation=null;f.mo=null;f.Aa=null;f.si=null;f.Ma=function(){return this.Aa};f.Pb=function(){return this.orientation};f.Ir=function(a){null!=this.Aa&&(null!=a?(this.Pp=a,this.Aa.camera.focus=a.focus,this.Aa.camera.position=a.position,this.Aa.camera.up=a.qL,a instanceof gr&&(this.Aa.camera.view=a.view)):this.Aa.camera.position=bt)};
f.Hr=function(a){this.si.style.background=null!=a?r(a)?a:null!=a.wy?"-webkit-linear-gradient(top, "+a.wy+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.YF=function(){return this.Zp};f.VF=function(){return this.si};f.Dk=function(a){this.si=a;null!=this.Aa||this.oa(a);this.Aa.container=a};f.rv=function(a){this.dispatchEvent(a)};
f.oa=function(a){null!=this.Aa&&(H(this.Aa),this.Aa.Vd(),this.Aa=null);if(null==this.Vk)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Aa=new this.Vk;this.Aa.orientation=this.orientation;this.Dk(a||this.si||document.body);this.Aa.oa();G(this.Aa,"s",function(a){this.dispatchEvent({type:"s",value:a.value})}.bind(this));G(this.Aa,"E",this.rv.bind(this))};f.add=function(a){this.Tl&&(!0==a.isSelectedVolume&&(this.Zp=a),this.Ok.push(a),this.Aa.add(a))};f.isEnabled=function(){return this.Tl};
function ct(a){null!=a.sf&&(T(a.sf),delete a.sf)}function dt(a){a.sf=S("div",{id:"DisabledOverlay_"+B()});a.sf.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=S("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.sf.appendChild(c);a.si.appendChild(a.sf)}
f.ic=function(a){(this.Tl=!1!==a)?sk(this.sf,200,function(){this.sf.style.visibility="hidden";ct(this)}.bind(this)):(null!=this.sf||dt(this),this.sf.style.visibility="visible",pk(this.sf,200,function(){}.bind(this)))};f.restore=function(){this.oa();et(this);null!=this.Pp&&this.Ir(this.Pp);null!=this.We&&this.Hr(this.We);this.n()};f.rK=function(){D(this.Ok,function(a){null!=a&&this.Aa.remove(a)}.bind(this))};function et(a){D(a.Ok,function(a){this.Aa.add(a)}.bind(a))}f.n=function(){this.Tl&&this.Aa.n()};
f.k=function(){null!=this.Aa&&this.Aa.Uf()};f.g=function(){at.d.g.call(this);null!=this.Aa&&(this.Aa.Vd(),delete this.Aa);ct(this);null!=this.We&&delete this.We;null!=this.Pp&&delete this.Pp;null!=this.mo&&(null!=this.mo.g&&(this.mo.stop(),this.mo.g()),delete this.mo);delete this.Tl;delete this.Vk;delete this.si;delete this.orientation;sb(this.Ok);delete this.Zp;delete this.QO};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",bt);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",at.prototype.Vk);v("xiv.vis.XtkPlane.prototype.orientation",at.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",at.prototype.Aa);v("xiv.vis.XtkPlane.prototype.container",at.prototype.si);v("xiv.vis.XtkPlane.prototype.getRenderer",at.prototype.Ma);v("xiv.vis.XtkPlane.prototype.getOrientation",at.prototype.Pb);v("xiv.vis.XtkPlane.prototype.setCamera",at.prototype.Ir);v("xiv.vis.XtkPlane.prototype.setBackground",at.prototype.Hr);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",at.prototype.YF);v("xiv.vis.XtkPlane.prototype.getContainer",at.prototype.VF);v("xiv.vis.XtkPlane.prototype.setContainer",at.prototype.Dk);v("xiv.vis.XtkPlane.prototype.init",at.prototype.oa);v("xiv.vis.XtkPlane.prototype.add",at.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",at.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",at.prototype.ic);v("xiv.vis.XtkPlane.prototype.restore",at.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",at.prototype.rK);v("xiv.vis.XtkPlane.prototype.render",at.prototype.n);v("xiv.vis.XtkPlane.prototype.updateStyle",at.prototype.k);v("xiv.vis.XtkPlane.prototype.dispose",at.prototype.g);function ft(){at.call(this);this.orientation="V";this.Vk=$s}w(ft,at);v("xiv.vis.XtkPlane3D",ft);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function gt(a){at.call(this);this.orientation=a;this.Vk=Er;this.Zp=null}w(gt,at);v("xiv.vis.XtkPlane2D",gt);f=gt.prototype;f.Pz=function(){return this.Aa.Pz()};f.Qz=function(){return this.Aa.Qz()};f.Jl=function(){return null!=this.Aa?this.Aa.Jl():null};f.Dk=function(a){gt.d.Dk.call(this,a)};f.g=function(){gt.d.g.call(this);delete this.Zp;delete this.wO;delete this.xO};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",gt.prototype.Pz);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",gt.prototype.Qz);v("xiv.vis.XtkPlane2D.prototype.getVolume",gt.prototype.Jl);v("xiv.vis.XtkPlane2D.prototype.setContainer",gt.prototype.Dk);v("xiv.vis.XtkPlane2D.prototype.dispose",gt.prototype.g);function ht(){Bq.call(this);this.Wi(S("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));Q(this.A,ht.CSS.KD);G(this.A,"change",this.bc.bind(this))}w(ht,Bq);v("xiv.ui.ctrl.RadioButtonController",ht);ht.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";ht.CSS_SUFFIX={KD:"radiobutton"};ht.prototype.bc=function(){this.dispatchEvent({type:"p",checked:this.A.checked})};ht.prototype.f=function(){ht.d.f.call(this)};v("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",ht.ID_PREFIX);
v("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",ht.CSS_SUFFIX);v("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",ht.prototype.bc);v("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",ht.prototype.f);function it(){Bq.call(this);this.Ok=[]}w(it,Bq);v("xiv.ui.ctrl.MasterController2D",it);it.ID_PREFIX="xiv.ui.ctrl.MasterController2D";it.CSS_SUFFIX={};it.prototype.add=function(){};it.prototype.f=function(){it.d.f.call(this);Ib(this.Ok);delete this.Ok};v("xiv.ui.ctrl.MasterController2D.ID_PREFIX",it.ID_PREFIX);v("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",it.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController2D.prototype.add",it.prototype.add);v("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",it.prototype.f);function jt(){Bq.call(this);this.ag("Master Opacity")}w(jt,Bq);v("xiv.ui.ctrl.SliderController",jt);jt.ID_PREFIX="xiv.ui.ctrl.SliderController";jt.CSS_SUFFIX={qa:"slider",Xh:"slider-thumb",jp:"slider-thumb-hover",Yh:"slider-track",ex:"slider-track-hover",ts:"value-input"};f=jt.prototype;f.Cw=2;f.Fo=function(a){this.Cw=a};f.n=function(a){jt.d.n.call(this,a);this.wt();this.xt()};
f.wt=function(){var a=new Jr;this.Wi(a);a.ie(0);a.kd(1);a.Qg(.01);a.J(1);Q(a.a(),jt.CSS.qa);Q(a.Gc,jt.CSS.Xh);Q(a.nd,jt.CSS.Yh);a.Jp(jt.CSS.jp);a.Xs(jt.CSS.ex);G(this.A,"change",this.bc.bind(this));a.a().style.zIndex=0};f.xt=function(){this.fa=S("input");this.fa.type="number";Q(this.fa,jt.CSS.ts);Rh(this.a(),this.fa);G(this.fa,"input",this.uv.bind(this));this.update()};f.uv=function(){var a=this.A,b=parseFloat(this.fa.value),b=fd(b,a.va(),a.ja());this.fa.value=b;a.J(b)};f.mH=function(){return this.fa};
f.bc=function(){var a=this.A,b=a.K().toFixed(this.Cw),c=parseInt(this.fa.value);this.fa.value=b;this.dispatchEvent({type:"p",value:b,Ku:a.va(),Ju:a.ja(),hB:c})};f.update=function(){var a=this.A,b=a.K();a.k();a.J(0);a.J(b);a.wh()!==this.fa.step&&(this.fa.step=a.wh());a.va()!==this.fa.min&&(this.fa.min=a.va());a.ja()!==this.fa.max&&(this.fa.max=a.ja());a.K()!==this.fa.value&&(this.fa.value=b)};f.f=function(){jt.d.f.call(this);delete this.Cw;null!=this.fa&&(H(this.fa),T(this.fa),delete this.fa)};
v("xiv.ui.ctrl.SliderController.ID_PREFIX",jt.ID_PREFIX);v("xiv.ui.ctrl.SliderController.CSS_SUFFIX",jt.CSS_SUFFIX);v("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",jt.prototype.Fo);v("xiv.ui.ctrl.SliderController.prototype.render",jt.prototype.n);v("xiv.ui.ctrl.SliderController.prototype.getValueInput",jt.prototype.mH);v("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",jt.prototype.bc);v("xiv.ui.ctrl.SliderController.prototype.update",jt.prototype.update);
v("xiv.ui.ctrl.SliderController.prototype.disposeInternal",jt.prototype.f);function kt(){Bq.call(this);this.ag("TwoThumb");this.wt();this.xt();this.Yd=S("input");this.Yd.type="number";Q(this.Yd,kt.CSS.dD);Rh(this.a(),this.Yd);G(this.Yd,"input",this.aJ.bind(this));lt(this)}w(kt,Bq);v("xiv.ui.ctrl.TwoThumbSliderController",kt);kt.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";kt.CSS_SUFFIX={qa:"slider",Xh:"slider-thumb",SD:"slider-thumb-extent",TD:"slider-thumb-value",jp:"slider-thumb-hover",Yh:"slider-track",ex:"slider-track-hover",ts:"value-input",dD:"extent-input"};
f=kt.prototype;f.wt=function(){this.ia=new gq;this.ia.v();var a=this.ia.a();a.setAttribute("id","ThresholdSlider_"+B());Q(a,kt.CSS.qa);var b=S("div",{id:"ThwoThumbSlider_track_"+B(),"class":kt.CSS.Yh});a.appendChild(b);this.Wi(this.ia);Q(this.ia.la,kt.CSS.Xh);Q(this.ia.la,kt.CSS.TD);mk(this.ia.la,kt.CSS.jp);Q(this.ia.qc,kt.CSS.Xh);Q(this.ia.qc,kt.CSS.SD);mk(this.ia.qc,kt.CSS.jp);G(this.ia,"change",this.bc.bind(this))};
f.update=function(){var a=Ki(this.ia.la).width,b=this.ia.ja()-this.ia.va(),c=Ki(this.ia.a()).width-a,a=c*((this.ia.K()-this.ia.va())/b),b=c*(this.ia.$e()/b);this.ia.la.style.left=a.toString()+"px";this.ia.qc.style.left=b.toString()+"px";mt(this);lt(this)};function mt(a){a.fa.step=1;a.fa.min=a.ia.va();a.fa.max=a.ia.ja();a.fa.value=a.ia.K()}function lt(a){a.Yd.step=1;a.Yd.min=a.ia.va();a.Yd.max=a.ia.ja();a.Yd.value=a.ia.$e()+a.ia.K()}
f.xt=function(){this.fa=S("input");this.fa.type="number";Q(this.fa,kt.CSS.ts);Rh(this.a(),this.fa);G(this.fa,"input",this.uv.bind(this));mt(this)};f.uv=function(a){window.console.log(a,this.fa);this.ia.J(parseInt(this.fa.value))};f.aJ=function(){this.ia.Xi(parseInt(this.Yd.value)-this.ia.K())};f.bc=function(){var a=this.ia.K(),b=this.ia.$e()+a;this.fa.value=a;this.Yd.value=b;this.dispatchEvent({type:"p",lower:a,upper:b})};
f.f=function(){kt.d.f.call(this);null!=this.ia&&(H(this.ia),null==this.ia.Ia&&(this.ia.Ia=new Pp),this.ia.g(),delete this.ia);null!=this.fa&&(H(this.fa),T(this.fa),delete this.fa);null!=this.Yd&&(H(this.Yd),T(this.Yd),delete this.Yd)};v("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",kt.ID_PREFIX);v("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",kt.CSS_SUFFIX);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",kt.prototype.update);
v("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",kt.prototype.bc);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",kt.prototype.f);function nt(){Bq.call(this);this.fj=[]}w(nt,Bq);v("xiv.ui.ctrl.MasterController3D",nt);nt.ID_PREFIX="xiv.ui.ctrl.MasterController3D";nt.CSS_SUFFIX={};nt.prototype.add=function(a){this.fj.push(a);this.iy(a,jt);1==this.fj.length&&Rh(document.body,this.a())};nt.prototype.f=function(){nt.d.f.call(this);Ib(this.fj);delete this.fj};v("xiv.ui.ctrl.MasterController3D.ID_PREFIX",nt.ID_PREFIX);v("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",nt.CSS_SUFFIX);
v("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{LN:"Visible",DM:"Opacity"});v("xiv.ui.ctrl.MasterController3D.prototype.add",nt.prototype.add);v("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",nt.prototype.f);function ot(){nt.call(this)}w(ot,nt);v("xiv.ui.ctrl.VolumeController3D",ot);ot.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";ot.CSS_SUFFIX={};f=ot.prototype;f.my=function(a){var b=this.Td(zs,"Volume Rendering",function(b){a.volumeRendering=b.checked});Fq(a,b);this.nf.push(b);b.A.lf(!1)};f.BJ=function(a){null!=this.So&&(this.So.Ec().lowerThreshold=parseFloat(a.lower),this.So.Ec().upperThreshold=parseFloat(a.upper))};f.So=null;
f.ky=function(a){var b=this.Td(kt,"Threshold",this.BJ.bind(this));b.Rg(a);Fq(a,b);this.nf.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1E3,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=1E3,a.upperThreshold=d);var e=b.A;e.ie(c);e.kd(d);cq(e,d-c);e.J(c);e.Qg(10);e.Xi(d-c);a.upperThreshold=d;a.lowerThreshold=c;this.So=b};f.add=function(a){ot.d.add.call(this,a);this.my(a);this.ky(a)};f.k=function(){ot.d.k.call(this)};f.f=function(){ot.d.f.call(this);this.So.g()};
v("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",ot.ID_PREFIX);v("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",1E3);v("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",ot.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",ot.prototype.my);v("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",ot.prototype.ky);v("xiv.ui.ctrl.VolumeController3D.prototype.add",ot.prototype.add);v("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",ot.prototype.k);
v("xiv.ui.ctrl.VolumeController3D.prototype.disposeInternal",ot.prototype.f);function pt(){Bq.call(this);this.fj=[]}w(pt,Bq);v("xiv.ui.ctrl.MasterController",pt);pt.ID_PREFIX="xiv.ui.ctrl.MasterController";pt.CSS_SUFFIX={};pt.prototype.add=function(a){this.fj.push(a)};pt.prototype.f=function(){pt.d.f.call(this);Ib(this.fj);delete this.fj};v("xiv.ui.ctrl.MasterController.ID_PREFIX",pt.ID_PREFIX);v("xiv.ui.ctrl.MasterController.CSS_SUFFIX",pt.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController.CONTROLLERS",{});v("xiv.ui.ctrl.MasterController.prototype.add",pt.prototype.add);
v("xiv.ui.ctrl.MasterController.prototype.disposeInternal",pt.prototype.f);function qt(){Bq.call(this);this.sg=new Ro("Reset to Defaults");this.Wi(this.sg);this.sg.a().style.fontFamily='Helvetica,"Helvetica neue", Arial, sans-serif';this.sg.a().style.fontSize="10px";this.sg.a().style.width="100%";G(this.sg.a(),"click",this.bc.bind(this))}w(qt,Bq);v("xiv.ui.ctrl.ButtonController",qt);qt.ID_PREFIX="xiv.ui.ctrl.ButtonController";qt.CSS_SUFFIX={};qt.prototype.bc=function(){this.dispatchEvent({type:"p",checked:this.sg.zh()})};
qt.prototype.f=function(){qt.d.f.call(this);H(this.sg);H(this.sg.a());this.sg.g();delete this.sg};v("xiv.ui.ctrl.ButtonController.ID_PREFIX",qt.ID_PREFIX);v("xiv.ui.ctrl.ButtonController.CSS_SUFFIX",qt.CSS_SUFFIX);v("xiv.ui.ctrl.ButtonController.prototype.dispatchComponentEvent",qt.prototype.bc);v("xiv.ui.ctrl.ButtonController.prototype.disposeInternal",qt.prototype.f);function rt(){pt.call(this)}w(rt,pt);v("xiv.ui.ctrl.LevelsController",rt);rt.ID_PREFIX="xiv.ui.ctrl.LevelsController";rt.CSS_SUFFIX={};f=rt.prototype;f.add=function(a){rt.d.add.call(this,a);var b=this.ey(a),c=this.hy(a),d=this.gy(a),e=this.cy(a,c,d),h=this.dy(a,c,d);this.jy(a);D([c,d,e,h],function(a){G(a.A,"v",function(){b.update()}.bind(this))}.bind(this))};f.jy=function(a){var b=this.Td(qt,null,function(){}.bind(this));Fq(a,b);this.Sf.push(b);b.Rg(a);return b};
f.ey=function(a){var b=this.Td(Gq,null,function(){}.bind(this));b.Rg(a);Fq(a,b);this.Sf.push(b);b.update();return b};f.hy=function(a){var b=this.Td(jt,"Window Min.",function(b){a.windowLow=b.value}.bind(this));b.Rg(a);Fq(a,b);this.Sf.push(b);b.A.kd(1E3);b.A.ie(0);b.A.J(0);b.A.Qg(1);b.Fo(0);b.update();return b};
f.gy=function(a){var b=this.Td(jt,"Window Max.");b.Rg(a);G(b,"p",function(b){a.windowHigh=b.value}.bind(this));Fq(a,b);this.Sf.push(b);b.A.kd(1E3);b.A.ie(0);b.A.J(1E3);b.A.Qg(1);b.Fo(0);b.update();return b};
f.cy=function(a,b,c){var d=this.Td(jt,"Brightness");d.Rg(a);G(d,"p",function(d){d=(d.value-d.hB)/(d.Ju-d.Ku);var h=a.windowHigh-a.windowLow;a.windowLow=Math.round(parseInt(a.windowLow)-h*d);a.windowHigh=Math.round(parseInt(a.windowHigh)-h*d);b.A.J(a.windowLow);c.A.J(a.windowHigh)}.bind(this));Fq(a,d);this.Sf.push(d);d.A.kd(150);d.A.ie(-150);d.A.J(0);d.A.Qg(1);d.Fo(0);d.update();return d};
f.dy=function(a,b,c){var d=this.Td(jt,"Contrast");d.Rg(a);G(d,"p",function(d){d=(d.value-d.hB)/(d.Ju-d.Ku);var h=parseInt(a.windowHigh)-parseInt(a.windowLow),k=parseInt(a.windowHigh)-h*d;a.windowLow=Math.round(parseInt(a.windowLow)+h*d);a.windowHigh=Math.round(k);b.A.J(a.windowLow);c.A.J(a.windowHigh)}.bind(this));Fq(a,d);this.Sf.push(d);d.A.kd(150);d.A.ie(-150);d.A.J(0);d.A.Qg(1);d.Fo(0);d.update();return d};f.f=function(){rt.d.f.call(this)};v("xiv.ui.ctrl.LevelsController.ID_PREFIX",rt.ID_PREFIX);
v("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",rt.CSS_SUFFIX);v("xiv.ui.ctrl.LevelsController.CONTROLLERS",{FL:"Brightness",QL:"Contrast",tM:"Window Min.",sM:"Window Max.",cM:"Histogram"});v("xiv.ui.ctrl.LevelsController.LEVEL_MAX",1E3);v("xiv.ui.ctrl.LevelsController.LEVEL_MIN",0);v("xiv.ui.ctrl.LevelsController.prototype.add",rt.prototype.add);v("xiv.ui.ctrl.LevelsController.prototype.add_histogram",rt.prototype.ey);v("xiv.ui.ctrl.LevelsController.prototype.add_reset",rt.prototype.jy);
v("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",rt.prototype.hy);v("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",rt.prototype.gy);v("xiv.ui.ctrl.LevelsController.prototype.add_brightness",rt.prototype.cy);v("xiv.ui.ctrl.LevelsController.prototype.add_contrast",rt.prototype.dy);v("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",rt.prototype.f);function st(a){Yc.call(this);this.Bb=null;this.o=a;a=E||gc&&!nc("531")&&"TEXTAREA"==a.tagName;this.oc=new Yi(this);this.oc.B(this.o,a?["keydown","paste","cut","drop","input"]:"input",this)}w(st,Yc);
st.prototype.handleEvent=function(a){if("input"==a.type)E&&nc(10)&&0==a.keyCode&&0==a.charCode||(tt(this),ec&&this.o!=Ch(this.o).activeElement||this.dispatchEvent(ut(a)));else if("keydown"!=a.type||$k(a)){var b="keydown"==a.type?this.o.value:null;E&&229==a.keyCode&&(b=null);var c=ut(a);tt(this);this.Bb=Sf(function(){this.Bb=null;this.o.value!=b&&this.dispatchEvent(c)},0,this)}};function tt(a){null!=a.Bb&&(ba.clearTimeout(a.Bb),a.Bb=null)}function ut(a){a=new Fc(a.Cc);a.type="input";return a}
st.prototype.f=function(){st.d.f.call(this);this.oc.g();tt(this);delete this.o};function vt(a,b,c){bj.call(this,a);wt(this,b||"#f00");this.className=c||"goog-hsv-palette";this.na=li(this.M())}w(vt,bj);f=vt.prototype;f.Lr=function(a){a!=this.tl&&(wt(this,a),xt(this),this.dispatchEvent("action"))};function wt(a,b){var c=Dj(b).Ll,d=Jj(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.Sc=[e,l,d];a.Sc[0]/=360;a.tl=c}
function yt(a,b,c,d){if(null!=b||null!=c||null!=d)a.Sc[0]=null!=b?b:a.Sc[0],a.Sc[1]=null!=c?c:a.Sc[1],a.Sc[2]=null!=d?d:a.Sc[2],b=[360*a.Sc[0],a.Sc[1],a.Sc[2]],b=Lj(b[0],b[1],b[2]),a.tl=b,xt(a),a.dispatchEvent("action")}f.ze=function(){return!1};
f.v=function(){var a=this.M(),b=E&&!nc("7")?" "+(this.className+"-noalpha"):"",c=a.v("DIV",this.className+"-hs-backdrop");this.Rl=a.v("DIV",this.className+"-hs-handle");this.Ni=a.v("DIV",this.className+"-hs-image",this.Rl);this.Mk=a.v("DIV",this.className+"-v-image");this.ap=a.v("DIV",this.className+"-v-handle");this.Ur=a.v("DIV",this.className+"-swatch");this.kk=a.v("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.v("label",null,this.kk);this.o=a.v("DIV",this.className+b,
c,this.Ni,this.Mk,this.ap,this.Ur,d)};f.Ya=function(){vt.d.Ya.call(this);xt(this);var a=this.Za();a.B(this.a(),"mousedown",this.Fg);this.Ln||(this.Ln=new st(this.kk));a.B(this.Ln,"input",this.GH)};f.f=function(){vt.d.f.call(this);delete this.Ni;delete this.Rl;delete this.Mk;delete this.ap;delete this.Ur;delete this.kk;this.Ln&&(this.Ln.g(),delete this.Ln);Tc(this.Pu);Tc(this.Qu)};
function xt(a){if(a.ea){var b=a.Sc[1],c=a.Sc[2],d=a.Ni.offsetWidth*a.Sc[0];a.Fe()&&(d=a.Ni.offsetWidth-d);var e=Math.ceil(a.Rl.offsetWidth/2),d=d-e,b=a.Ni.offsetHeight*(1-b),b=b-Math.ceil(a.Rl.offsetHeight/2),e=a.Rl,h=a.Fe();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.Mk.offsetTop-Math.floor(a.ap.offsetHeight/2)+(255-c)/255*a.Mk.offsetHeight;a.ap.style.top=b+"px";Ni(a.Ni,c/255);pi(a.Mk,"background-color",Lj(360*a.Sc[0],a.Sc[1],
255));pi(a.Ur,"background-color",a.tl);pi(a.Ur,"color",127.5<a.Sc[2]?"#000":"#fff");var k;try{k=Dj(a.kk.value).Ll}catch(l){}a.tl!=k&&(a.kk.value=a.tl)}}f.Fg=function(a){if(a.target==this.Mk||a.target==this.ap){var b=Mi(this.Mk);this.bA(b,a);this.Pu=G(this.na,"mousemove",ta(this.bA,this,b));this.Qu=G(this.na,"mouseup",this.Nf,!1,this)}else if(a.target==this.Ni||a.target==this.Rl)b=Mi(this.Ni),this.aA(b,a),this.Pu=G(this.na,"mousemove",ta(this.aA,this,b)),this.Qu=G(this.na,"mouseup",this.Nf,!1,this)};
f.bA=function(a,b){b.preventDefault();var c=oi(this.M()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);yt(this,null,null,c)};f.aA=function(a,b){b.preventDefault();var c=oi(this.M()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;yt(this,d,c,null)};f.Nf=function(){Tc(this.Pu);Tc(this.Qu)};
f.GH=function(){/^#?[0-9a-f]{6}$/i.test(this.kk.value)&&this.Lr(this.kk.value)};function zt(){Bq.call(this);this.ag("Color");this.ri=new vt;this.ri.n();G(this.ri,"action",this.bc.bind(this));Q(this.ri.a(),this.constructor.CSS.YC);this.fn=S("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":zt.CSS.ZC});Rh(this.fn,this.ri.a());S("div",{id:this.constructor.ID_PREFIX+"_ColorPalette_"+B(),"class":zt.CSS.VL});this.a().appendChild(this.fn);this.Wi(this.fn)}w(zt,Bq);v("xiv.ui.ctrl.ColorPaletteController",zt);zt.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";
zt.CSS_SUFFIX={ML:"colorsquare",ZC:"colorpaletteholder",YC:"colorpalette",hj:"closebutton"};zt.prototype.update=function(){var a=Math.floor(255*this[Cq].color[0]),b=Math.floor(255*this[Cq].color[1]),c=Math.floor(255*this[Cq].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.ri.Lr(Hj([a,b,c]))};zt.prototype.bc=function(a){this.dispatchEvent({type:"p",color:Jj(a.target.tl).map(function(a){return a/255})})};
zt.prototype.f=function(){zt.d.f.call(this);H(this.ri);this.ri.g();delete this.ri;T(this.fn);delete this.fn};v("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",zt.ID_PREFIX);v("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",zt.CSS_SUFFIX);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ctrl.ColorPaletteController.prototype.update",zt.prototype.update);
v("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",zt.prototype.bc);v("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",zt.prototype.f);function At(){nt.call(this)}w(At,nt);v("xiv.ui.ctrl.MeshController3D",At);At.ID_PREFIX="xiv.ui.ctrl.MeshController3D";At.CSS_SUFFIX={};At.prototype.add=function(a){At.d.add.call(this,a);this.Zs(a,zs);this.Ys(a,zt)};v("xiv.ui.ctrl.MeshController3D.ID_PREFIX",At.ID_PREFIX);v("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",At.CSS_SUFFIX);v("xiv.ui.ctrl.MeshController3D.prototype.add",At.prototype.add);v("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",At.prototype.f);function Bt(){nt.call(this)}w(Bt,nt);v("xiv.ui.ctrl.AnnotationsController3D",Bt);Bt.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";Bt.CSS_SUFFIX={};Bt.prototype.add=function(a){Bt.d.add.call(this,a);this.Zs(a,zs);this.Ys(a,zt)};v("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",Bt.ID_PREFIX);v("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",Bt.CSS_SUFFIX);v("xiv.ui.ctrl.AnnotationsController3D.prototype.add",Bt.prototype.add);function Ct(){pt.call(this)}w(Ct,pt);v("xiv.ui.ctrl.VolumeController",Ct);Ct.ID_PREFIX="xiv.ui.ctrl.VolumeController";Ct.CSS_SUFFIX={};Ct.prototype.add=function(a){Ct.d.add.call(this,a);this.ly(a);this.fy(a)};Ct.prototype.ly=function(a){var b=this.Td(ht,"Visible",function(){});Fq(a,b);this.nf.push(b);b.Rg(a);b.A.checked=a[Dr]||!1};Ct.prototype.fy=function(a){var b=this.Td(zs,"Show Label Map",function(b){a.yO.visible=b.checked});Fq(a,b);this.nf.push(b);b.Rg(a);b.A.lf(!1)};Ct.prototype.f=function(){Ct.d.f.call(this)};
v("xiv.ui.ctrl.VolumeController.ID_PREFIX",Ct.ID_PREFIX);v("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",Ct.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController.prototype.add",Ct.prototype.add);v("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",Ct.prototype.ly);v("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",Ct.prototype.fy);v("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",Ct.prototype.f);function Dt(){V.call(this);C(Et(),function(a,b){this[b]=null})}w(Dt,V);v("xiv.ui.ctrl.XtkControllerTree",Dt);function Ft(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.ctrl.XtkControllerTree.ControlSet",Ft);Dt.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";Dt.CSS_SUFFIX={};function Et(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=Dt.prototype;f.Zw=function(){};f.QC=function(){return this.Cg([this.Uh])};f.Zw=function(){return this.Cg([this.kj])};f.lE=function(){return this.Cg([this.tj])};
f.nG=function(){};f.Cg=function(a){var b=[];D(g(a)?a:[a],function(a){null!=a&&(b=Lb(b,a.oz()))});return b};f.Zo=function(){var a=this.Cg([this.kj,this.uj,this.tj,this.lj,this.Uh,this.is]);D(a,function(a){a.update()}.bind(this))};
f.tt=function(a,b){a instanceof J?(null==this.uj&&(this.kj=new rt,this.uj=new Ct,this.tj=new ot),this.kj.add(a,b),this.uj.add(a,b),this.tj.add(a,b)):a instanceof Aq?(null==this.lj&&(this.lj=new At),this.lj.add(a,b)):a instanceof Hp&&(null==this.Uh&&(this.Uh=new Bt),this.Uh.add(a));this.volumes=new Ft(null,this.Cg([this.tj]),this.Cg([this.uj]));this.annotations=new Ft(null,this.Cg([this.Uh]));this.meshes=new Ft(null,this.Cg([this.lj]));this.levels=new Ft(null,null,this.Cg([this.kj]))};
f.f=function(){Dt.d.f.call(this);null!=this.kj&&(this.kj.g(),delete this.kj);null!=this.uj&&(this.uj.g(),delete this.uj);null!=this.lx&&(this.lx.g(),delete this.lx);null!=this.tj&&(this.tj.g(),delete this.tj);null!=this.lj&&(this.lj.g(),delete this.lj);null!=this.Uh&&(this.Uh.g(),delete this.Uh);null!=this.is&&(this.is.g(),delete this.is)};v("xiv.ui.ctrl.XtkControllerTree.ControlSet",Ft);v("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",Dt.ID_PREFIX);v("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",Dt.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",Et);v("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",Dt.prototype.Zw);v("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",Dt.prototype.QC);v("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",Dt.prototype.lE);v("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",Dt.prototype.nG);v("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",Dt.prototype.Cg);v("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",Dt.prototype.Zo);
v("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",Dt.prototype.tt);v("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",Dt.prototype.f);function Gt(){Yc.call(this);this.Re=null;this.$b={volumes:[],meshes:[],fibers:[],spheres:[]};this.Wh=new gt("X");this.nj=new gt("Y");this.oj=new gt("Z");this.Tb=new ft;this.kc={};this.kc[this.Wh.Pb()]=this.Wh;this.kc[this.nj.Pb()]=this.nj;this.kc[this.oj.Pb()]=this.oj;this.kc[this.Tb.Pb()]=this.Tb;this.Jg=null;this.Qr(this.Tb);Ht(this)}w(Gt,Cr);v("xiv.vis.XtkEngine",Gt);Gt.ID_PREFIX="xiv.vis.XtkEngine";Gt.SLICE_TO_RAS_KEY="sliceToRAS"+B();Gt.HAS_LABEL_MAP_KEY="hasLabelMap";f=Gt.prototype;f.Ar=!1;
f.Tt=function(){return this.$b.volumes};f.St=function(){return this.$b.meshes};f.Rt=function(){return this.$b.spheres};function It(a,b){null!=b.Kd.Xm&&D(b.Kd.Xm,function(a){this.$b.spheres.push(Jt(a))}.bind(a))}f.UB=function(a,b){switch(a.toLowerCase()){case "x":this.Wh.ic(b);break;case "y":this.nj.ic(b);break;case "z":this.oj.ic(b);break;case "v":this.Tb.ic(b)}};f.Qr=function(a){this.Jg=a;this.Jg.oa();this.sK=G(this.Jg,"s",this.mv.bind(this))};f.RG=function(){return this.Jg};f.rv=function(a){this.dispatchEvent(a)};
function Ht(a){C(a.kc,function(a){G(a,"F",this.rv.bind(this));G(a,"H",function(){}.bind(this))}.bind(a))}f.Zo=function(){this.Re.Zo()};f.XF=function(){return this.Re};
function Kt(a,b){null!=a.Re&&(a.Re.g(),a.Re=null);a.Re=new Dt;null!=(b.Kd&&null!=b.Kd.Xm)&&(It(a,b),D(a.$b.spheres,function(a){this.Re.tt(a)}.bind(a)));var c;D(b.Nd,function(a){c=a.Dg();if(null!=c&&(currXObj=Lt(c,a.Ei),renderProps=a.Kd,currXObj))if(this.Re.tt(currXObj,renderProps),currXObj instanceof J){"scans"==b.ug.toLowerCase()&&(window.console.log("Turning off reslicing for scan"),currXObj.reslicing=!1);a=currXObj;var e=renderProps;null!=e||(e={origin:[0,0,0],Zr:1E4,Yq:-1E4,Oq:!0,Dw:!1});a.origin=
e.origin;a.upperThreshold=e.Zr;a.lowerThreshold=e.Yq;a.volumeRendering=e.Dw;a[Dr]=e.Oq;a[Gt.SLICE_TO_RAS_KEY]=e.Zv;null!=e.vA?(a.labelmap.file=e.vA,a.labelmap.colortable.file=e.nI,a[Gt.HAS_LABEL_MAP_KEY]=!0):a[Gt.HAS_LABEL_MAP_KEY]=!1;this.$b.volumes.push(currXObj)}else currXObj instanceof Aq?(a=currXObj,e=renderProps,a.color=e.color||[.5,.5,.5],a.opacity=e.opacity||1,this.$b.meshes.push(currXObj)):currXObj instanceof hq&&(Gt.SO(currXObj,renderProps),this.$b.fibers.push(currXObj))}.bind(a))}
f.sB=function(){this.Qr(this.Tb);this.Tb.oa();C(this.$b,function(a,b){"volumes"!==b&&D(a,function(a){this.Tb.add(a)}.bind(this))}.bind(this));Rc(this.Tb.Ma(),"t",function(){this.or();this.Wh.n()}.bind(this));this.Tb.n()};f.rB=function(a){var b=null!=a?a:this.qq();C(this.kc,function(a,d){"v"!=d.toLowerCase()&&(a.oa(),a.add(b),a.n())})};function Mt(a){var b=a.qq();C(a.$b.volumes,function(a){a!==b&&(a.visible=!1)})}
f.tB=function(){var a=this.qq(),b=[],c=[],d=["x","y","z","v"];C(this.$b,function(a,d){currArr="volumes"==d?c:b;D(a,function(a){currArr.push(a)})}.bind(this));D(b,function(a){this.Tb.add(a)}.bind(this));D(c,function(b){b!==a&&(b.visible=!0,this.Tb.add(b))}.bind(this));this.Jg.Ma().onShowtime=function(){Kb(d,this.Jg.Pb().toLowerCase());Nt(this,a)}.bind(this);this.Jg.add(a);this.Jg.n()};
f.n=function(a){this.Ar=!1;Kt(this,a);var b=a.Kd;null!=b?(null!=b.backgroundColor&&this.Tb.Hr(a.Kd.backgroundColor),null!=b.Op&&this.Tb.Ir(a.Kd.Op)):(this.Tb.Hr(),this.Tb.Ir());if(0<this.$b.volumes.length){a=this.kc;b="";for(b in a)if(a[b].isEnabled()){this.Qr(a[b]);break}this.tB()}else this.Tb.isEnabled()&&this.sB()};function Nt(a,b){var c=mb(a.kc)-1;C(a.kc,function(a){a!=this.Jg&&a.isEnabled()&&(a.add(b),Rc(a.Ma(),"t",function(){c--;0==c&&this.or()}.bind(this)),a.n())}.bind(a))}
f.qq=function(){if(0!=this.$b.volumes.length){for(var a=0,b=this.$b.volumes.length;a<b;a++){var c=this.$b.volumes[a];if(c[Dr])return c}this.$b.volumes[0][Dr]=!0;return this.$b.volumes[0]}};f.k=function(){C(this.kc,function(a){a.k()}.bind(this))};f.mv=function(a){this.Ar||this.dispatchEvent({type:"s",value:a.value})};f.or=function(a){Mt(this);Tc(this.sK);this.Ar=!0;this.dispatchEvent({type:"t",value:null!=a?a.value:1})};f.LG=function(){return this.Wh};f.MG=function(){return this.nj};f.NG=function(){return this.oj};
f.KG=function(){return this.Tb};f.pq=function(a){return this.kc[a]};f.OG=function(){return this.kc};var Ot=["nrrd","nii","nii.gz","mgh","mgz"],Pt=["dicom","dcm","ima"],Qt=["hdr","img"],Rt=["nii","nii.gz"],St=["jpeg","jpg","gif","png","img"],Tt="stl vtk obj fsm inflated smoothwm pial orig".split(" "),Ut=["trk"];function Vt(a){var b=void 0;Wt(a)?b=new Aq:Xt(a)||Yt(a)||Zt(a)?b=new J:$t(a)&&(b=new hq);return b}
function Jt(a){var b=new Hp;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function Xt(a){return-1<Ot.indexOf(a)?!0:!1}function Zt(a){return-1<St.indexOf(a)?!0:!1}function Yt(a){return-1<Pt.indexOf(a)?!0:!1}function Wt(a){return-1<Tt.indexOf(a)?!0:!1}function $t(a){return-1<Ut.indexOf(a)?!0:!1}
function Lt(a,b){function c(a){var b=mj(a);a=lj(a);return b+"/"+a}var d=g(a)?nj(a[0]):nj(a),d=Vt(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];D(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=ob(b),d.filedata=nb(b)):d.file=a;return d}
Gt.prototype.g=function(){Gt.d.g.call(this);null!=this.Re&&(this.Re.g(),delete this.Re);H(this.Wh);H(this.nj);H(this.oj);H(this.Tb);delete this.Jg;sb(this.kc);delete this.kc;this.Wh.g();delete this.Wh;this.nj.g();delete this.nj;this.oj.g();delete this.oj;this.Tb.g();delete this.Tb;C(this.$b,function(a){C(a,function(a){H(a);sb(a)})});sb(this.$b);delete this.$b;delete this.Ar};v("xiv.vis.XtkEngine.EventType",{aN:"F",ZM:"G",$M:"H",ERROR:"I",YN:"J",pM:"K",qM:"L"});v("xiv.vis.XtkEngine.ID_PREFIX",Gt.ID_PREFIX);
v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",Gt.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",Gt.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",Xt);v("xiv.vis.XtkEngine.isImage",Zt);v("xiv.vis.XtkEngine.isDicom",Yt);v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<Qt.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<Rt.indexOf(a)?!0:!1});
v("xiv.vis.XtkEngine.isMesh",Wt);v("xiv.vis.XtkEngine.isFiber",$t);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",Gt.prototype.St);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",Gt.prototype.Rt);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",Gt.prototype.Tt);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",Gt.prototype.UB);v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",Gt.prototype.Qr);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",Gt.prototype.RG);
v("xiv.vis.XtkEngine.prototype.updateControllers",Gt.prototype.Zo);v("xiv.vis.XtkEngine.prototype.getControllerTree",Gt.prototype.XF);v("xiv.vis.XtkEngine.prototype.render3dPlane",Gt.prototype.sB);v("xiv.vis.XtkEngine.prototype.render2D",Gt.prototype.rB);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",Gt.prototype.tB);v("xiv.vis.XtkEngine.prototype.render",Gt.prototype.n);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",Gt.prototype.qq);v("xiv.vis.XtkEngine.prototype.updateStyle",Gt.prototype.k);
v("xiv.vis.XtkEngine.prototype.getPlaneX",Gt.prototype.LG);v("xiv.vis.XtkEngine.prototype.getPlaneY",Gt.prototype.MG);v("xiv.vis.XtkEngine.prototype.getPlaneZ",Gt.prototype.NG);v("xiv.vis.XtkEngine.prototype.getPlaneV",Gt.prototype.KG);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",Gt.prototype.pq);v("xiv.vis.XtkEngine.prototype.getPlanes",Gt.prototype.OG);v("xiv.vis.XtkEngine.prototype.dispose",Gt.prototype.g);function au(a,b,c){Rm.call(this);this.kC=!0===a;this.jC=!0===b;this.hC=!0===c}w(au,Rm);v("xiv.ui.HelpDialog",au);au.ID_PREFIX="xiv.ui.HelpDialog";au.CSS={bD:"nrg-ui-helpdialog-dialog",Tk:"nrg-ui-helpdialog-text",QD:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",hj:"xiv-ui-helpdialog-closebutton"};au.LAYOUT_IMAGE_ID=au.ID_PREFIX+".LayoutImage";
au.prototype.n=function(a){au.d.n.call(this,a);Q(this.a(),"xiv-ui-helpdialog");this.wm=new Ds;Q(this.wm.a(),au.CSS.QD);this.wm.n(this.a());bu(this);this.ay(au.CSS.TITLE);this.Nx(au.CSS.hj)};au.prototype.LB=function(a){null!=document.getElementById(au.LAYOUT_IMAGE_ID)&&(document.getElementById(au.LAYOUT_IMAGE_ID).src=a)};
function bu(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts","<img height=15 width=15 id="+au.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.kC&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.jC&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.hC&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.je("Help");D([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';
D(a,function(a){c+="<tr>";D(a,function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}T(c);var n=S("div");n.innerHTML=c;this.wm.Ue(n,[d])}.bind(a))}
au.prototype.f=function(){au.d.f.call(this);delete this.kC;delete this.jC;delete this.hC;null!=this.wm&&this.wm.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",au.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",au.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",au.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",au.prototype.n);v("xiv.ui.HelpDialog.prototype.setLayoutButton",au.prototype.LB);v("xiv.ui.HelpDialog.prototype.disposeInternal",au.prototype.f);function cu(a,b,c){Ro.call(this,a,b||So.Zd(),c);this.Xc(16,!0)}w(cu,Ro);Fn("goog-toggle-button",function(){return new cu(null)});function du(a){V.call(this);this.H={};this.Q=a}w(du,V);v("xiv.ui.ViewBoxDialogs",du);du.ID_PREFIX="xiv.ui.ViewBoxDialogs";du.CSS_SUFFIX={hg:"generic-toggle",iD:"infodialog",jD:"infodialog-text",lD:"inusedialog"};var eu="Info_"+B(),fu="Help_"+B(),gu="InUse_"+B(),hu={fM:eu,aM:fu,iM:gu},iu="ToggleClass_"+B();f=du.prototype;f.$F=function(){return this.H};f.ZF=function(a){return this.H[a]};
f.jn=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.Q.Qj("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.H[a].$(b);this.dispatchEvent({type:b?"M":"N",az:this.H[a],bz:a})}.bind(this),d);null!=this.H[a]&&this.H[a].g();c=new Rm;this.H[a]=c;Bm(c,null!=k?k:!1);Im(c,null!=l?l:null);c.n(this.Q.Ib);Am(c,0);this.H[a].Ae();c.je(e);Q(c.a(),b);G(c,"f",function(){this.Q.$l(n)}.bind(this));G(c,Em,function(){}.bind(this));this.H[a].$(!0);this.H[a].Ae();this.H[a].Ae(!1);!1===h&&En(this.Q.Gd[a])};
f.iF=function(){this.jn(hu.wM,"xiv-ui-viewboxdialogs-meshes-dialog",du.CSS.hg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.kF=function(){this.jn(hu.NN,"xiv-ui-viewboxdialogs-volumes-dialog",du.CSS.hg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.Oy=function(){this.H[gu]=new Rm;Im(this.H[gu],Lm);this.H[gu].n(this.Q.Ib);this.H[gu].Ek("ViewBox in use.&nbspProceed anyway?");ju(this);ku(this)};
f.KB=function(a,b){Rc(this.H[gu],Jm,function(c){"yes"===c.key&&null!=a&&a(this);"no"===c.key&&null!=b&&b(this)}.bind(this))};f.Io=function(){window.console.log("SHOW IN USE");Q(this.H[gu].a(),du.CSS.lD);Bm(this.H[gu],!0);this.H[gu].$(!0);this.H[gu].Ae()};f.update=function(){C(this.H,function(a){a.CC()})};f.Vo=function(a,b){var c=!1===b?0:1;window.console.log(a,this.H[a]);null!=this.H[a].a()&&qk(this.H[a].a(),200,c)};f.Wt=function(){return this.H[fu]};
function ju(a){null!=a.H[fu]&&a.H[fu].g();var b=new au(0<a.Q.Ma().Tt().length,0<a.Q.Ma().St().length,0<a.Q.Ma().Rt().length);Bm(b,!1);Im(b,null);b.n(a.Q.Ib);b.$(!1);b.Ae();var c=a.Q.Qj("LEFT",du.CSS.hg,fu,"Help",function(a){a="true"==a.getAttribute("checked");b.$(a);b.Ae();this.dispatchEvent({type:a?"M":"N",az:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");G(b,"f",function(){this.Q.$l(c)}.bind(a));a.Q.$l(c);a.H[fu]=new au}
function ku(a){null!=a.H[eu]&&a.H[eu].g();currDialog=new Rm;var b="";0<a.Q.nb.length?C(a.Q.nb[0].he,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Gk(a.Q.nb[0].Kh);Bm(currDialog,!1);currDialog.Hj(b);Im(currDialog,null);currDialog.n(a.Q.Ib);currDialog.$(!0);currDialog.er("left","top",0,-15);currDialog.je("Info. Display");currDialog.Qv("xiv-ui-viewboxdialogs-infodialog-hovered");Q(currDialog.a(),du.CSS.iD);Q(currDialog.cj[0],du.CSS.jD);var c=a.Q.Qj("LEFT",du.CSS.hg,eu,"Info. Display",function(a){a=
"true"==a.getAttribute("checked");currDialog.$(a);currDialog.er("left","top",0,-15);this.dispatchEvent({type:a?"M":"N",az:currDialog})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");G(currDialog,"f",function(){this.Q.$l(c)}.bind(a));currDialog.Jv();a.H[eu]=currDialog}f.f=function(){delete this.Q;null!=this.H&&(C(this.H,function(a){H(a);a.f();a.g()}.bind(this)),sb(this.H))};v("xiv.ui.ViewBoxDialogs.EventType",{TL:"M",SL:"N"});v("xiv.ui.ViewBoxDialogs.ID_PREFIX",du.ID_PREFIX);
v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",du.CSS_SUFFIX);v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",hu);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",iu);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",du.prototype.$F);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",du.prototype.ZF);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",du.prototype.jn);v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",du.prototype.iF);v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",du.prototype.kF);
v("xiv.ui.ViewBoxDialogs.prototype.createDialogs",du.prototype.Oy);v("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",du.prototype.KB);v("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",du.prototype.Io);v("xiv.ui.ViewBoxDialogs.prototype.update",du.prototype.update);v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",du.prototype.Vo);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",du.prototype.Wt);v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",du.prototype.f);function lu(a,b,c,d){Yc.call(this);this.Q=a;this.ka=b;this.Ua=c;this.H=d;this.jd={p:null,c:null};this.Xp={x:null,y:null};this.hf={l:!1,m:!1,r:!1};this.ok={up:{},dn:{},ot:{},ov:{}};G(this.H,"M",this.VA.bind(this));a=document.body;this.ib=new Rn;this.ib.ql(a);G(this.ib,"key",this.Hh.bind(this));this.Lk=!1;document.addEventListener("mousemove",this.hw.bind(this),!1)}w(lu,Yc);v("xiv.ui.ViewBoxInteractorHandler",lu);
var mu="Crosshairs_"+B(),nu="Settings_"+B(),ou="TwoDPan_"+B(),pu="TwoDZoom_"+B(),qu={Yc:mu,YM:nu,sN:ou,tN:pu};lu.CSS={hg:"xiv-ui-viewboxinteractorhandler-generic-toggle",Ow:"xiv-ui-viewboxinteractorhandler-generic-dialog",Pw:"xiv-ui-viewboxinteractorhandler-generic-zippytree",oD:"xiv-ui-viewboxinteractorhandler-levelsdialog",pD:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered"};
lu.CURSOR_CSS={nE:"xiv-ui-viewboxinteractorhandler-zoom-follower",Qw:"xiv-ui-viewboxinteractorhandler-viewframe-grab",Tw:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",Rw:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",Sw:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",nx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",ox:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};var ru="Orientation_"+B();f=lu.prototype;f.ib=null;f.Nk=null;f.lb=null;f.Fw=!1;f.yv=!1;f.ac={};
f.Py=function(){this.Wy();su(this);tu(this);this.Sy();this.Ny(!1);this.Uy();this.Vy();this.zu()};function uu(a){var b=a.Q.Ib;C(lu.CURSOR_CSS,function(a){uh(b,a)})}function vu(a,b,c,d){b=b?Q:uh;b(a.Q.Ib,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.Q.Ib,d)}function wu(a){vu(a,!0,lu.CURSOR_CSS.Qw,lu.CURSOR_CSS.Tw);vu(a,!1,lu.CURSOR_CSS.Rw,lu.CURSOR_CSS.Sw)}function xu(a){vu(a,!1,lu.CURSOR_CSS.ox);vu(a,!0,lu.CURSOR_CSS.nx)}
f.hw=function(a){this.Xp.x=a.clientX||a.pageX;this.Xp.y=a.clientY||a.pageY};
f.qJ=function(a){this.ul=a.target;this.jd.p=this.jd.c;this.jd.c=[this.Xp.x,this.Xp.y];if(null!=this.jd.p){(new ys(this.jd.c[0],this.jd.c[1])).add(new ys(this.jd.p[0],this.jd.p[1]));a=this.jd.c[0]-this.jd.p[0];var b=this.jd.c[1]-this.jd.p[1];this.Lk&&(this.qf.style.visibility="hidden");this.Fw?(this.Lk&&this.Lk&&(T(this.qf),Rh(this.ul.si,this.qf),this.qf.style.visibility="visible",this.qf.style.left=this.jd.c[0]+20+"px",this.qf.style.top=this.jd.c[1]+"px"),xu(this),this.hf.l&&yu(this,a,b)):this.yv&&
(wu(this),window.console.log(this.hf),this.hf.l&&(vu(this,!1,lu.CURSOR_CSS.Qw,lu.CURSOR_CSS.Tw),vu(this,!0,lu.CURSOR_CSS.Rw,lu.CURSOR_CSS.Sw),this.ul.ga.tr([-1*a,-1*b]),this.im()))}};f.mJ=function(){uu(this);this.ul=null;this.Lk&&(this.qf.style.visibility="hidden")};f.kv=function(a){0==a.button?this.hf.l=!0:1==a.button?this.iL.hf.m=!0:2==a.button&&(this.hf.r=!0)};f.lv=function(a){0==a.button?this.hf.l=!1:1==a.button?this.iL.hf.m=!1:2==a.button&&(this.hf.r=!1)};
f.Hh=function(a){window.console.log("On key:",a.keyCode,this.ac);if(this.Q.Mq())if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,zu(this,this.ul,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.Q.eu(ou);window.console.log("escape","pan",a,a.getAttribute("checked"));"true"==a.getAttribute("checked").toString()&&this.Q.Dc(ou);"true"==this.Q.eu(pu).getAttribute("checked").toString()&&this.Q.Dc(pu);break;case 90:this.Q.Dc(pu);break;case 72:case 80:this.Q.Dc(ou);break;case 66:case 76:this.Q.Dc(this.ac.levels);
break;case 86:this.Q.Dc(this.ac.volumes);break;case 77:this.Q.Dc(this.ac.meshes);break;case 65:this.Q.Dc(this.ac.annotations);break;case 67:this.Q.Dc(mu);break;case 83:this.Q.Dc(this.ac[nu]);break;case 191:a.shiftKey&&this.Q.Dc(fu);break;case 73:this.Q.Dc(eu)}};function yu(a,b,c){uu(a);var d=function(){xu(this);this.ul.sm()}.bind(a),e=function(){vu(this,!0,lu.CURSOR_CSS.ox);vu(this,!1,lu.CURSOR_CSS.nx);this.ul.tm()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Au(a);a.im()}f.bx=0;
f.cx=0;f.qC=function(a){this.bx=a.clientX;this.cx=a.clientY;window.console.log("store mouse coords",this.bx,this.cx)};f.zu=function(){Bu(this,function(a,b){this.ok.ov[b]=G(a.Ma(),"mouseover",this.qJ.bind(this));var c=a.Ma().mc;this.ok.ot[b]=G(c,"mouseleave",this.mJ.bind(this));this.ok.dn[b]=G(c,"mousedown",this.kv.bind(this));this.ok.up[b]=G(c,"mouseup",this.lv.bind(this))}.bind(this))};function zu(a,b,c){Bu(a,function(a,b,h){h.qa.J(h.qa.K()+c)}.bind(a),b.Pb())}
function Bu(a,b,c){if(null!=a.ka){var d=a.Ua.Zt(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.Jl())};if(r(c)){var h=a.ka.pq(c);if(null==h)throw Error("Invalid plane: ",h);e(a.ka.pq(c),c)}else C(a.ka.kc,function(a,b){e(a,b)}.bind(a))}}f.Vy=function(){this.Q.Qj("LEFT",lu.CSS.hg,pu,"2D Zoom",function(a){uu(this);if(this.Fw=a="true"==a.getAttribute("checked").toString())this.Q.ww(ou),xu(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.Q.Dc(pu)};
f.Uy=function(){this.Q.Qj("LEFT",lu.CSS.hg,ou,"2D Pan",function(a){uu(this);if(this.yv=a="true"==a.getAttribute("checked").toString())wu(this),this.Q.ww(pu)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.Q.Dc(ou)};f.Ny=function(a){this.Q.Qj("LEFT",lu.CSS.hg,mu,"Toggle Crosshairs",function(a){this.xC("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.Q.Dc(mu)};
f.Sy=function(){this.ac[nu]=nu+"_"+B();this.H.jn(this.ac[nu],lu.CSS.Ow,lu.CSS.hg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.lb[nu]=new Ds;this.lb[nu].n();var a=this.lb[nu].a();Q(a,lu.CSS.Pw);this.H.H[this.ac[nu]].a().appendChild(a);this.lb[nu].Bl();a=new zs;a.n();a.ag("Enable 3D Rendering");a.A.lf(!0);this.lb[nu].Ue(a.a(),"3D Rendering");G(a,"p",function(a){this.ka.UB("V",a.checked)}.bind(this));return a};
f.im=function(){Bu(this,function(a,b,c,d){Cu(this,b,d)}.bind(this))};
function Du(a){null!=a.ka&&(Bu(a,function(a,c,d,e){var h=d.qa,k=d.Hd,l=d.wf;d=d.Yc;h[ru]=c;k[ru]=c;l[ru]=c;d[ru]=c;Eu(this);Fu(h,e);Cu(this,h[ru],e);Gu(this,h);null!=a.Ma()&&(G(a.Ma(),"J",function(){Au(this)}.bind(this)),G(h,"v",function(a){Fu(a.target,e);Cu(this,a.target[ru],e);Gu(this,a.target)}.bind(this)),G(k,"input",function(a){Hu(this,a.target,e);this.im()}.bind(this)),G(l,"input",function(){a.Ma().fC(l.K()/100);this.im()}.bind(this)))}.bind(a)),a.ka.Zo())}
function Iu(a,b){var c=b.split("_")[0];a.lb[c].Uc();C(a.Nk[c],function(a){null!=a&&D(a,function(a){switch(c.toLowerCase()){case "levels":a instanceof Gq||null==a.A.k?a.update():a.A.k();break;case "volumes":var d=b.split("_")[0];a instanceof ht?(a.A.checked=a.Ec()[Dr]||!1,null==this.bs&&(this.bs=[]),-1==this.bs.indexOf(a)&&this.bs.push(a)):"Show Label Map"==a.wb.innerHTML&&(a.Ec()[Gt.HAS_LABEL_MAP_KEY]?a.Ec().labelmap.visible&&!a.A.zh()&&a.A.lf(!0):(T(a.a()),a.a().style.visibility="hidden",a.a().style.height=
"0px"),this.lb[d].Uc());a.update();break;case "meshes":a instanceof jt&&(window.console.log("MESH",a),a.k());break;case "annotations":a instanceof jt&&(window.console.log("ANNOT",a),a.k())}}.bind(this))}.bind(a))}f.VA=function(a,b){null==a.bz&&null==b||Iu(this,null!=b?b:a.bz)};
f.sy=function(){var a,b={},c="DEFAULT_"+B();D(this.Nk.levels.all,function(c){levelMax=hist=null;a=c.Fl;folderStr="";D(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});c instanceof Gq?b[folderStr].Cq=c:c instanceof qt?b[folderStr].reset=c:-1<c.wb.innerHTML.indexOf("Window Max")?b[folderStr].wL=c:b[folderStr][ma(c)]=c}.bind(this));C(b,function(a){a.wL.A.J(a.Cq.Hz(Gq.LEVEL_CUTOFF));a.Cq.update();C(a,function(b){b!=a.Cq&&b!=a.reset&&(b[c]=-1<b.wb.innerHTML.indexOf("Window Min")?0:b.A.K())})});
C(b,function(a){G(a.reset,"p",function(){C(a,function(b){b!=a.Cq&&b!=a.reset&&(b.fa.value=b[c],b.A.J(b[c]))})})})};function Fu(a,b){if(null!=b){var c=a[ru],c="Y"==c||"Z"==c?a.ja()-a.K()-1:a.K()-1;b["index"+a[ru]]=c}}function Ju(a,b,c,d,e){var h=a.ka.pq(b).Ma();a=a.Ua.uz().Yt(b);b=null;null!=a&&(b=a[$q]);null!=b&&("vertical"==c?b.dC(h.Uz(d,e)):"horizontal"==c&&b.eC(h.Cz(d,e)))}
function Cu(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Ju(a,"Y","vertical",b,!0);Ju(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Ju(a,"X","vertical",b,!1);Ju(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Ju(a,"X","horizontal",b,!1),Ju(a,"Y","horizontal",b,!1)}}function Gu(a,b){Bu(a,function(a,b,e){a=e.Hd;e=e.qa;a.kd(e.ja());a.J(e.K())}.bind(a),b[ru])}function Au(a){Bu(a,function(a,c,d){d.wf&&a.Ma()&&(a=a.Ma().Yz(),d.wf.K(),d.wf.J(Math.round(100*a)))}.bind(a))}
function Hu(a,b,c){null!=c&&Bu(a,function(a,c,h){h.qa.J(b.K())}.bind(a),b[ru])}function su(a){Bu(a,function(a,c,d){null!=d.qa&&d.qa.J(d.qa.ja()/2)}.bind(a))}
function tu(a){Bu(a,function(a,c,d,e){if(null!=e[Gt.SLICE_TO_RAS_KEY]&&null!=d.qa){slider=d.qa;orientation=slider[ru];a=e.bbox;e=e[Gt.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.yK[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.hF[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.YE[2]-a[4])/h);slider.J(Math.round(slider.ja()*h)+1)}}.bind(a))}
function Eu(a){var b,c;Bu(a,function(a,e,h,k){null!=h.qa&&(c=h.qa,b=c[ru],null!=k&&(c.kd(a.Ma().Mz()),c.ie(1),null!=b&&c.J(k["index"+b]+1)))})}f.ZA=function(){Bu(this,function(a,b,c,d){Hu(this,c.Hd,d);Au(this)}.bind(this));this.im()};f.pw=function(a){var b=!1===a?0:1;Bu(this,function(a,d,e){qk(e.qa.a(),200,b);qk(e.Hd.a(),200,b);qk(e.Yc.gg,200,b);qk(e.Yc.Of,200,b);qk(e.wf.a(),200,b)}.bind(this))};f.QH=function(){this.pw(!1);this.H.Vo(eu,!1)};f.QK=function(){this.pw(!0);this.H.Vo(eu,!0)};f.update=function(){this.Ua.$o()};
f.xC=function(a){var b=!0==a?"visible":"hidden";Bu(this,function(a,d,e){null!=e.Yc&&(e.Yc.gg.style.visibility=b,e.Yc.Of.style.visibility=b)}.bind(this))};f.BC=function(){null!=this.Ua&&null!=this.ka&&Bu(this,function(a,b,c,d){if(null!=c){var e=c.qa;c=c.Hd;e[ru]=b;c[ru]=b;null!=a.Ma()&&(Hu(this,c,d),e.k())}}.bind(this))};
f.tC=function(a){a.OB(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{$g:cs,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{$g:ls,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{$g:hs,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{$g:bs,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{$g:ds,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{$g:is,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{$g:js,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{$g:$r,eb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.Tx(c,b.eb);this.Ua.Rx(c,b.$g);"Four-Up"==c&&this.Ua.NB(c)}.bind(this));G(a,"item_selected",this.hJ.bind(this))};f.hJ=function(a){this.Ua.Fk(a.title);null!=this.H&&null!=this.H.Wt()&&this.H.Wt().LB(a.target.ik.src)};function Ku(a,b){G(a.lb[b].ma,"c",function(a){this.VA(a,this.ac[b])}.bind(a))}
function Lu(a,b){G(b,"p",function(a){D(this.bs,function(b){var e=b.Ec();b!==a.target?(b.A.checked=!1,e.visible=!1):(e.visible=!0,this.ka.rB(e))}.bind(this))}.bind(a))}function Mu(a,b){C(a.Nk[b],function(a,d){g(a)&&D(a,function(a){var c=a.Fl||[];"all"!==d&&0<c.length&&c.push(d);this.lb[b].Ue(a.a(),c);a instanceof ht&&Lu(this,a)}.bind(this))}.bind(a))}
function Nu(a){a.lb=Et();a.ac=vb(a.lb);C(a.lb,function(a,c){var d=!1;switch(c){case "volumes":0==this.ka.Tt().length&&(d=!0);break;case "meshes":0==this.ka.St().length&&(d=!0);break;case "annotations":0==this.ka.Rt().length&&(d=!0)}d?tb(this.lb,c):(this.lb[c]=new Ds,this.lb[c].n(),this.ac[c]=c+"_"+B(),Mu(this,c),Ku(this,c))}.bind(a))}f.Wy=function(){this.Nk=this.ka.Re;Nu(this);Ou(this);Du(this)};
function Ou(a){C(a.lb,function(a,c){var d=!1;C(this.Nk[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.H.jn(this.ac[c],lu.CSS.Ow,lu.CSS.hg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+cb(c)+".png",cb(c),!1,!1);var e=this.lb[c].a();Q(e,lu.CSS.Pw);this.H.H[this.ac[c]].a().appendChild(e);1<this.lb[c].ma.fu().length?this.lb[c].en():(this.lb[c].Bl(),this.lb[c].Uc());"levels"==c&&Pu(this)}}.bind(a))}
function Pu(a){var b=a.H.H[a.ac.levels];Q(b.a(),lu.CSS.oD);b.Qv(lu.CSS.pD);a.Q.Dc(a.ac.levels);D(a.Nk.levels.all,function(a){if(!(a instanceof Gq||a instanceof qt)){var b=a.wb;null!=b&&(b.style.fontSize="9px");a.a().style.height="45px";a.A.a().style.top="28px";a.A.a().style.width="115px";null!=a.A.k&&a.A.k()}}.bind(a));b.er("right","top",4,50);D(a.lb.levels.ma.fu(),function(a){a.uw(10)});switch(a.Q.Kb.vl){case "Four-Up":case "Conventional":case "2D Row":case "2D Widescreen":a.Q.Dc(a.ac.levels)}}
f.g=function(){lu.d.g.call(this);document.removeEventListener("mousemove",this.hw.bind(this));document.removeEventListener("mousemove",this.hw);null!=this.ib&&(this.ib.g(),delete this.ib);null!=this.ac&&sb(this.ac);delete this.ac;null!=this.lb&&(C(this.lb,function(a){a.g()}),sb(this.lb));delete this.lb;sb(this.jd);delete this.jd;C(this.ok,function(a){C(a,function(a){Tc(a);delete a});sb(a)});sb(this.ok);delete this.ok;this.Lk&&(T(this.qf),delete this.qf);delete this.Lk;delete this.Nk;delete this.Fw;
delete this.yv;delete this.Q;delete this.ka;delete this.Ua;delete this.H};v("xiv.ui.ViewBoxInteractorHandler.EventType",{LM:"O",rM:"P",wN:"Q",UL:"R"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",qu);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",ru);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",lu.prototype.Py);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",lu.prototype.Vy);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",lu.prototype.Uy);v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",lu.prototype.Ny);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",lu.prototype.Sy);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",lu.prototype.im);v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",lu.prototype.sy);v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",lu.prototype.ZA);
v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",lu.prototype.pw);v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",lu.prototype.QH);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",lu.prototype.QK);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",lu.prototype.update);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",lu.prototype.xC);v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",lu.prototype.BC);
v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",lu.prototype.tC);v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",lu.prototype.Wy);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",lu.prototype.g);function Qu(){uc.call(this)}w(Qu,uc);v("xiv.utils.ErrorCatcher",Qu);
function Ru(a){function b(a){a.target.g()}var c;g(a)||(a=[a]);null!=c&&!g(c)&&(c=[c]);var d=new Tm;Im(d,Km);D(a,function(a){d.Hj(a)});null!=c&&D(c,function(a){d.Ws(a)});d.je("XImgView Error");d.$(!0);d.a().style.position="fixed";d.a().style.opacity=0;pk(d.a(),400);d.Hi().style.opacity=0;qk(d.Hi(),400,.75);d.a().style.height="250px";a=Ki(d.a());d.a().style.top="calc(50% - "+a.height/2+"px)";d.a().style.left="calc(50% - "+a.width/2+"px)";Rc(d,Jm,b);Rc(d,"f",b)}
function Su(){var a,b='<a target="_blank" style="color: #5CB8E6"  href=';Yb()?(a="Internet Explorer",b+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">'):Vb("Chrome")||Vb("CriOS")?(a="Chrome",b+='"https://productforums.google.com/forum/#!msg/chrome/CgYesRogD4c/sU1TQsRgnWgJ">'):Vb("Firefox")?(a="Firefox",b+='"https://support.mozilla.org/en-US/questions/984663">'):Zb()?(a="Safari",b+='"https://discussions.apple.com/thread/3300585?start=0">'):Xb()&&(a="Opera",b+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">');
Ru('<br>It looks like <a target="_blank" style="color: #5CB8E6" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">Experimental-WebGL</a> is disabled.<br><br><br>'+(b+("How to enable WebGL in "+a+".</a>")))}Qu.checkForWebGL=function(){var a=S("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};f=Qu.prototype;f.pt=[];f.rm=null;f.gr=null;f.Hc=null;f.Ft=document.body;f.ev=null;f.TB=function(a){this.ev=a};
f.DB=function(a){this.Ft=a};function Tu(a){Ib(a.pt);a.rm=window.console.log;a.gr=function(){a.rm.apply(this,arguments);var b="";D(arguments,function(a,d){0<d&&(b+=" ");b+=a});a.pt.push(b)};window.console.log=a.gr}f.Ew=function(a){!0===a?(Tu(this),window.onerror=this.dv.bind(this)):(window.onerror=void 0,null!=this.rm&&(window.console.log=this.rm,this.gr=this.rm=null))};
f.dv=function(a,b,c){if(null==this.Hc){null!=this.ev&&this.ev();var d="",e="";-1<this.pt.indexOf("Unknown number of bits allocated - using default: 32 bits")?(d+='XImgView\'s render engine (<a target="_blank" style="color: #5CB8E6" href="https://github.com/xtk/X#readme">XTK</a>) does not yet support big-endian encoded DICOMs :(<br><br>',e+='<a target="_blank" style="color: #5CB8E6" href="http://stackoverflow.com/questions/22356911/xtk-error-while-loading-dicom-files">For more information click here.</a><br><br>Console reference:<br>\'Unknown number of bits allocated - using default: 32 bits\''):
(d="<b>Render Error!</b><br><br>",r(a)&&(e+=a+"<br>"),r(b)&&(e+="src: "+b+"<br>",u(c)&&(e+=" line: "+c+"<br>")));this.Hc=new Tm;this.Hc.n(this.Ft);Im(this.Hc,null);this.Hc.Hj(d);this.Hc.Ws(e);Bm(this.Hc,!0);this.Hc.$(!0);this.Hc.a().style.opacity=0;this.Hc.Jv();this.Hc.Ae();pk(this.Hc.a(),200);Rc(this.Hc,"f",function(a){a.target.g();this.Hc=null}.bind(this))}};f.clear=function(){null!=this.Hc&&(this.Hc.g(),delete this.Hc)};
f.g=function(){Qu.d.g.call(this);this.clear();delete this.rm;delete this.gr;delete this.Ft};
v("xiv.utils.ErrorCatcher.isCompatible",function(){var a=!0,b=$b(),c={Chrome:{Nn:Vb("Chrome")||Vb("CriOS"),ao:11},IE:{Nn:Yb(),ao:11},Safari:{Nn:Zb(),ao:5.1},Opera:{Nn:Xb(),ao:12},Firefox:{Nn:Vb("Firefox"),ao:4}},d=!1;C(c,function(c){c.Nn&&!d&&1==Ya(c.ao,b)&&(Ru("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>"),a=!1,d=!0)});a&&!Qu.checkForWebGL()&&(Su(),
a=!1);return a});v("xiv.utils.ErrorCatcher.checkForWebGL",Qu.checkForWebGL);v("xiv.utils.ErrorCatcher.EventType",{ERROR:"S"});v("xiv.utils.ErrorCatcher.prototype.setOnErrorCallback",Qu.prototype.TB);v("xiv.utils.ErrorCatcher.prototype.setDialogParent",Qu.prototype.DB);v("xiv.utils.ErrorCatcher.prototype.waitForError",Qu.prototype.Ew);v("xiv.utils.ErrorCatcher.prototype.clear",Qu.prototype.clear);v("xiv.utils.ErrorCatcher.prototype.onError",Qu.prototype.dv);
v("xiv.utils.ErrorCatcher.prototype.dispose",Qu.prototype.g);E&&nc(8);function Uu(){V.call(this);this.Ak=S("div",{id:Uu.ID_PREFIX+"_ProgBarHolder_"+B(),"class":Uu.CSS.ED});Rh(this.a(),this.Ak);this.Hg=S("div",{id:Uu.ID_PREFIX+"_LabelHolder_"+B(),"class":Uu.CSS.nD});Rh(this.a(),this.Hg);this.ah=new rr;this.ah.ub(this.Ak);Q(Hh("progress-bar-thumb",this.Ak),Uu.CSS.ps)}w(Uu,V);v("xiv.ui.ProgressBarPanel",Uu);Uu.ID_PREFIX="xiv.ui.ProgressBarPanel";Uu.CSS_SUFFIX={ps:"thumb",ED:"progbarholder",nD:"labelholder"};f=Uu.prototype;f.Sn="";f.Wv=!1;
f.ag=function(a){this.Sn=a;this.Hg.innerHTML=this.Sn};f.Vv=function(a){this.Wv=null!=a&&!1===a?!1:!0;this.J(this.ah.K())};f.J=function(a){this.ah.J(a);this.ah.a().childNodes[0].style.background="rgb(100,149,237)";this.Hg.innerHTML=this.Sn;this.Wv&&(0<this.Sn.length&&(this.Hg.innerHTML+=" "),this.Hg.innerHTML+=this.ah.K().toString()+"%");uh(this.Ak,"progress-bar-horizontal")};f.K=function(){return this.ah.K()};
f.f=function(){Uu.d.f.call(this);null!=this.ah&&(this.ah.g(),delete this.ah);null!=this.Ak&&(T(this.Ak),delete this.Ak);null!=this.Hg&&(T(this.Hg),delete this.Hg);this.Sn=this.Wv=null};v("xiv.ui.ProgressBarPanel.EventType",{});v("xiv.ui.ProgressBarPanel.ID_PREFIX",Uu.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",Uu.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",Uu.prototype.ag);v("xiv.ui.ProgressBarPanel.prototype.showValue",Uu.prototype.Vv);
v("xiv.ui.ProgressBarPanel.prototype.setValue",Uu.prototype.J);v("xiv.ui.ProgressBarPanel.prototype.getValue",Uu.prototype.K);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",Uu.prototype.f);function Vu(){V.call(this)}w(Vu,Ds);v("nrg.ui.ThumbnailGallery",Vu);Vu.ID_PREFIX="nrg.ui.ThumbnailGallery";Vu.CSS_SUFFIX={bD:"dialog",qs:"thumbnail",ss:"thumbnail-image",nN:"thumbnail-text"};var Wu=B();f=Vu.prototype;f.Tr=!1;f.$v=function(a){this.Tr=a;null!=this.ma&&this.Tr&&this.ma.Lv(Xu)};f.n=function(a){Vu.d.n.call(this,a);Yu(this);this.Tr&&this.ma.Lv(Xu)};
function Xu(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Uh(a),d=b[Wu].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[Wu]&&(e=h[Wu].toLowerCase(),e=Ka(d,e),0>e)){Th(b,h);return}a.appendChild(b)}f.ln=function(a,b){var c=new As;wh(c.a(),sh(c.a()),this.dj);wh(c.Le,sh(c.Le),this.Ik);wh(c.Tc,sh(c.Tc),this.Hk);c.Ov(a);c.Do(b);return c};f.loop=function(a){C(this.Lb,function(b){a(b)})};f.Nv=function(a){this.loop(function(b){Rh(a,b.af())})};
f.pl=function(a,b){pb(this.Lb,a)||(this.Lb=this.Lb?this.Lb:{},this.Lb[a.a().getAttribute("id")]=a,this.Va.Zm(a.af()),G(this.Va,"w",this.dJ.bind(this)),a.a()[Wu]=a.cu().toLowerCase(),this.Ue(a.a(),b),this.Uc(),G(a,"B",function(a){this.dispatchEvent({type:"B",sj:a.target})}.bind(this)),G(a,"C",function(a){this.dispatchEvent({type:"C",sj:a.target})}.bind(this)))};f.ui=function(a,b,c){a=this.ln(a,b);this.pl(a,c);Zu(this,"image");Zu(this,"text");Zu(this,"thumbnail");this.Uc();return a};
f.Go=function(){Vu.d.Go.call(this);G(this.Zf,"mouseover",this.qC.bind(this))};f.qC=function(a){this.Ru=a.clientX;this.Su=a.clientY};function $u(a){C(a.Lb,function(a){a.ho()});a.No=null}f.dJ=function(){var a=document.elementFromPoint(this.Ru,this.Su);(a=ji(a,null,As.uc))?(a=a.id.replace("HOVERABLE_",""),this.No!==a&&($u(this),this.No=a,this.Lb[this.No].nr()),this.Lb[this.No].Hv()):$u(this)};
function Zu(a,b){var c,d=[],e="";for(e in a.Lb){switch(b){case "thumbnail":d=a.dj;c=a.Lb[e].a();break;case "image":d=a.Hk;c=a.Lb[e].Tc;break;case "text":d=a.Ik,c=a.Lb[e].Le}wh(c,sh(c),d)}}f.Wx=function(a){null!=this.dj||Yu(this);this.dj.push(a);Zu(this,"thumbnail")};f.Zx=function(a){this.Hk.push(a);Zu(this,"image")};f.$x=function(a){this.Ik.push(a);Zu(this,"text")};f.k=function(a){a&&kk(this.a(),a)};
function Yu(a){var b=new As;a.dj=sh(b.a());a.dj.push(Vu.CSS.qs);a.Hk=sh(b.Tc);a.Hk.push(Vu.CSS.ss);a.Ik=sh(b.Le);a.Ik.push(Vu.CSS.hx);T(b.a());delete b}f.f=function(){Vu.d.f.call(this);delete this.Tr;null!=this.Ru&&delete this.Ru;null!=this.Su&&delete this.Su;null!=this.Lb&&(this.nn(this.Lb),delete this.Lb);null!=this.ma&&(H(this.ma),this.ma.g(),delete this.ma);null!=this.dj&&(Ib(this.dj),delete this.dj);null!=this.Hk&&(Ib(this.Hk),delete this.Hk);null!=this.Ik&&(Ib(this.Ik),delete this.Ik);delete this.No};
v("nrg.ui.ThumbnailGallery.ID_PREFIX",Vu.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",Vu.CSS_SUFFIX);v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",Wu);v("nrg.ui.ThumbnailGallery.thumbnailSorter",Xu);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",Vu.prototype.$v);v("nrg.ui.ThumbnailGallery.prototype.render",Vu.prototype.n);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",Vu.prototype.ln);v("nrg.ui.ThumbnailGallery.prototype.loop",Vu.prototype.loop);
v("nrg.ui.ThumbnailGallery.prototype.setHoverParent",Vu.prototype.Nv);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",Vu.prototype.pl);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Vu.prototype.ui);v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",Vu.prototype.Go);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",Vu.prototype.Wx);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",Vu.prototype.Zx);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",Vu.prototype.$x);
v("nrg.ui.ThumbnailGallery.prototype.updateStyle",Vu.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",Vu.prototype.f);function av(){V.call(this)}w(av,V);v("xiv.ui.ViewableGroupMenu",av);av.ID_PREFIX="xiv.ui.ViewableGroupMenu";av.CSS_SUFFIX={ep:"header",qs:"thumbnail",hx:"thumbnail-text",ss:"thumbnail-image",XD:"thumbnailgallery",dp:"background"};f=av.prototype;f.T=null;f.We=null;f.Kl=null;
f.n=function(){av.d.n.call(this);this.We=S("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});Q(this.We,this.constructor.CSS.dp);Rh(this.a(),this.We);this.Kl=S("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":av.CSS.ep});this.Kl.innerHTML="<b> Select View <b>";Rh(this.a(),this.Kl);null!=this.T||this.reset()};f.OF=function(){return this.We};f.show=function(){pk(this.a(),Wl.CL)};f.ui=function(a,b){null!=this.T||this.reset();var c=this.T.ui(a,b);bv(this,c);return c};
f.Nl=function(){sk(this.a(),500);T(this.a())};f.reset=function(){null!=this.T&&(this.T.g(),delete this.T);this.T=new Vu;this.T.$v(!0);this.T.n(this.a());Q(this.T.a(),av.CSS.XD);this.T.Wx(av.CSS.qs);this.T.Zx(av.CSS.ss);this.T.$x(av.CSS.hx)};function bv(a,b){G(b,"D",function(){this.dispatchEvent({type:"T",mw:b})}.bind(a))}f.f=function(){av.d.f.call(this);null!=this.We&&(T(this.We),delete this.We);null!=this.Kl&&(T(this.Kl),delete this.Kl);null!=this.T&&(this.T.g(),delete this.T)};
v("xiv.ui.ViewableGroupMenu.ID_PREFIX",av.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{KN:"T"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",av.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",av.prototype.n);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",av.prototype.OF);v("xiv.ui.ViewableGroupMenu.prototype.show",av.prototype.show);v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",av.prototype.ui);v("xiv.ui.ViewableGroupMenu.prototype.hide",av.prototype.Nl);
v("xiv.ui.ViewableGroupMenu.prototype.reset",av.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",av.prototype.f);var cv;function dv(a,b,c,d,e){this.Nj=a;this.rk=b;this.oy=c;this.UE=d;this.ko=e}dv.prototype.getName=function(){return this.rk};function ev(a){return!a.rk||"[object Object]"==a.Nj}
function fv(a){var b=[a.Nj?gv(a.Nj)+".":"",a.rk?gv(hv(a.rk)):"anonymous",gv(a.UE),a.oy?" [as "+gv(hv(a.oy))+"]":""];if(a.ko)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.ko.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',gv(a.ko),"', '",c,"'); return false\">",gv(a.ko),"</a>")}else b.push(gv(a.ko));return b.join("")}
var iv=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,jv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,kv=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
lv=/^function ([a-zA-Z_$][\w$]*)/,mv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function nv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(lv),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");r(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new dv("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function ov(a){var b=a.match(iv);if(b)return new dv(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new dv("",e,"",d,h)}return(b=a.match(jv))?new dv("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(kv))?new dv(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(mv))?new dv("",b[1]||"","","",b[2]||
""):null}function hv(a){return cv?cv(a):a}function gv(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function pv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){cv=a});function qv(a,b){return a==b}function rv(a,b){return a.toString()===b.toString()}var sv={String:qv,Number:qv,Boolean:qv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:rv,Function:rv};function tv(a,b,c){return Math.abs(a-b)<=c}var uv={Number:tv};
function vv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function wv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+vv(a)+")");return b}function xv(a,b){return b.length==a+1?b[0]:null}function yv(a,b,c){return c.length==b+1?c[a]:c[a-1]}function zv(a,b){b.length==a||b.length==a+1&&r(b[0])||Av(null,"Incorrect arguments passed to assert function")}
function Bv(a,b){var c="Expected "+wv(a)+" but was "+wv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function Iv(a,b){zv(1,arguments);var c=xv(1,arguments),d=yv(1,1,arguments);ia(d)||Av(c,"Bad argument to assert(boolean)");d||Av(c,"Call to assert(boolean) with false")}function Jv(a,b){zv(1,arguments);var c=xv(1,arguments),d=yv(1,1,arguments);ia(d)||Av(c,"Bad argument to assertTrue(boolean)");d||Av(c,"Call to assertTrue(boolean) with false")}function Kv(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments),h=Bv(d,e);d===e||Av(xv(2,arguments),h)}
function Lv(a,b){zv(1,arguments);var c="Expected not to be "+wv(null);null!==yv(1,1,arguments)||Av(xv(1,arguments),c)}function Mv(a,b){zv(1,arguments);var c="Expected not to be "+wv(void 0);void 0!==yv(1,1,arguments)||Av(xv(1,arguments),c)}
function Nv(a,b,c){function d(a,b,c){for(var p=0;p<h.length;++p){var t=h[p]===a,s=k[p]===b;if(t||s){t&&s||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(p=vv(a),t=vv(b),p==t){var s="Array"==p,z=l(p,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(s&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(s?"[%s]":c?".%s":"%s"),a.__iterator__)ja(a.zl)?a.zl(b)||e.push("equals() returned false for "+(c||
p)):a.tb?d(a.tb,b.tb,z.replace("%s","map_")):e.push("unable to check "+(c||p)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)s&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||t)));for(y in b)s&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||p));if(s)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+Bv(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=sv[a])?a(b,c)?"":Bv(b,c):null};d(a,b,"");return 0==e.length?null:Bv(a,b)+"\n   "+e.join("\n   ")}function Ov(a,b,c){zv(2,arguments);var d=xv(2,arguments)?xv(2,arguments):"",e=Nv(yv(1,2,arguments),yv(2,2,arguments));!e||Av(d,e)}function Pv(a,b,c,d){zv(3,arguments);var e=yv(1,3,arguments),h=yv(2,3,arguments),k=yv(3,3,arguments);tv(e,h,k)||Av(xv(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function Qv(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function Rv(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function Sv(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function Av(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new Tv(a,b);}
function Tv(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=pv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new dv("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(ov(c[e]));c=d}else c=nv();for(d=c.length-1;c[d]&&ev(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(fv(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,Tv):this.stack=Error().stack||""}w(Tv,Error);Tv.prototype.toString=function(){return this.message};v("fail",function(a){Av("Call to fail()",a)});v("assert",Iv);
v("assertThrows",function(a,b){zv(1,arguments);var c=yv(1,1,arguments),d=xv(1,arguments);"function"==typeof c||Av(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&r(e.stacktrace)&&r(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}Av(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){zv(1,arguments);var c=xv(1,arguments),d=yv(1,1,arguments);"function"==typeof d||Av(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",Av(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",Jv);
v("assertFalse",function(a,b){zv(1,arguments);var c=xv(1,arguments),d=yv(1,1,arguments);ia(d)||Av(c,"Bad argument to assertFalse(boolean)");!d||Av(c,"Call to assertFalse(boolean) with true")});v("assertEquals",Kv);v("assertNotEquals",function(a,b,c){zv(2,arguments);var d=yv(2,2,arguments),e="Expected not to be "+wv(d);yv(1,2,arguments)!==d||Av(xv(2,arguments),e)});v("assertNull",function(a,b){zv(1,arguments);var c=yv(1,1,arguments),d=Bv(null,c);null===c||Av(xv(1,arguments),d)});
v("assertNotNull",Lv);v("assertUndefined",function(a,b){zv(1,arguments);var c=yv(1,1,arguments),d=Bv(void 0,c);void 0===c||Av(xv(1,arguments),d)});v("assertNotUndefined",Mv);v("assertNotNullNorUndefined",function(a,b){zv(1,arguments);Lv.apply(null,arguments);Mv.apply(null,arguments)});v("assertNonEmptyString",function(a,b){zv(1,arguments);var c=yv(1,1,arguments),d="Expected non-empty string but was "+wv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||Av(xv(1,arguments),d)});
v("assertNaN",function(a,b){zv(1,arguments);isNaN(yv(1,1,arguments))||Av(xv(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){zv(1,arguments);!isNaN(yv(1,1,arguments))||Av(xv(1,arguments),"Expected not NaN")});v("assertObjectEquals",Ov);
v("assertObjectRoughlyEquals",function(a,b,c,d){zv(3,arguments);var e=yv(3,3,arguments),h=xv(3,arguments)?xv(3,arguments):"",k=Nv(yv(1,3,arguments),yv(2,3,arguments),function(a,b,c){return(a=uv[a])?a(b,c,e)?"":Bv(b,c)+" which was more than "+e+" away":null});!k||Av(h,k)});v("assertObjectNotEquals",function(a,b,c){zv(2,arguments);var d=xv(2,arguments)?xv(2,arguments):"";Nv(yv(1,2,arguments),yv(2,2,arguments))||Av(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments),h=xv(2,arguments)?xv(2,arguments):"",k=vv(d);"Array"==k||Av(h,"Expected an array for assertArrayEquals but found a "+k);k=vv(e);"Array"==k||Av(h,"Expected an array for assertArrayEquals but found a "+k);Ov(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments),h=xv(2,arguments)?xv(2,arguments):"";if(d){Kv("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)Kv("mismatch at index "+k+": "+h,d[k],e[k])}else Iv(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){zv(3,arguments);var e=yv(1,3,arguments),h=yv(2,3,arguments),k=yv(3,3,arguments),l=xv(3,arguments)?xv(3,arguments):"";if(e){Kv("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)Pv(l,e[n],h[n],k)}else Iv(l,!h)});
v("assertSameElements",function(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments),h=xv(2,arguments);Jv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ha(d)&&ha(e));d=Qv(d);e=Qv(e);d.length==e.length||Av(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=Qv(d),l=0;l<e.length;l++){var n=Rv(k,e[l]);-1!=n||Av(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){zv(1,arguments);yv(1,1,arguments)||Av(xv(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){zv(1,arguments);yv(1,1,arguments)&&Av(xv(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){zv(2,arguments);var d=yv(2,2,arguments),e=Sv(yv(1,2,arguments)),d=Sv(d),h=Bv(e,d);e===d||Av(xv(2,arguments),h)});
v("assertHashEquals",function(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments),h=xv(2,arguments),k;for(k in d)k in e||Av(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||Av(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||Av(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",Pv);
v("assertContains",function(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments);-1!=Rv(e,d)||Av(xv(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments);-1==Rv(e,d)||Av(xv(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){zv(2,arguments);var d=yv(1,2,arguments),e=yv(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||Av(xv(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function Uv(){V.call(this);this.nb=[];this.lp={};this.zb={rN:null,xm:null,ig:null,RC:null,DL:null,SC:null,ND:null,YD:null};this.zb.xm=S("div",{id:Uv.ID_PREFIX+"_menu_top_left_"+B(),"class":Uv.CSS.yD,viewbox:this.a().id});Rh(this.a(),this.zb.xm);this.Ib=S("div",{id:Uv.ID_PREFIX+"_ViewFrame_"+B(),"class":Uv.CSS.hE});Rh(this.a(),this.Ib);this.lc=new Uu;Rh(this.Ib,this.lc.a());this.lc.a().style.opacity=0;this.lc.a().style.zIndex=1E5;Vv(this.lc);this.k();this.zu()}w(Uv,V);v("xiv.ui.ViewBox",Uv);
Uv.ID_PREFIX="xiv.ui.ViewBox";Uv.CSS_SUFFIX={bM:"hidden",gN:"tabdragger",hN:"tabdragger-handle",jE:"viewlayoutmenu",yD:"menu-top-left",xD:"menu-left",iE:"viewlayouthandler",iN:"ziptabs",jN:"ziptab-bounds",hE:"viewframe",Kw:"component-highlight",dE:"viewablegroupmenu",WL:"emptymenubutton"};var Wv={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=Uv.prototype;f.rI="empty";f.Gd=null;f.Ua=null;f.Kb=null;f.ka=null;f.lc=null;f.qd=null;f.H=null;f.Vh=null;f.se=null;f.iA=!1;f.fs=!1;
f.nm=null;f.zk=null;f.om=null;f.Ul=!1;f.jI=function(){return this.Ul};f.Ma=function(){return this.ka};f.DG=function(){return this.zb};f.xG=function(){return this.rI};f.vH=function(){return this.nb};f.rH=function(){return this.Ib};f.vG=function(){return this.Ua};f.wG=function(){return this.Kb};f.tH=function(){return this.qd};f.Ql=function(){Q(this.Ib,Uv.CSS.Kw)};f.qm=function(){uh(this.Ib,Uv.CSS.Kw)};f.iH=function(){return this.Rh};f.Gy=function(){this.Rh=void 0};
f.vF=function(a){this.It=this.It?this.It:[];this.It.push(a)};f.Fk=function(a){this.Kb.Bo(a)};f.xJ=function(){this.lc.J(0);this.lc.Vv(!0);Xv(this.lc,0);this.Ql()};function Yv(a,b){a.lc.ag("");a.lc.Vv(!0);a.lc.J(100*b)}
f.mv=function(a){if(this.fs)Yv(this,.5*a.value+.5);else if(1<this.om){var b=1/this.om;if(.96<a.value&&this.zk!=a.value&&.96>this.zk&&this.zk<a.value)this.nm++,Yv(this,b*this.nm);else{this.zk=a.value;var b=1/this.om,c=b*this.nm+a.value*b;this.zk<a.value&&Yv(this,c+a.value*b)}}else Yv(this,a.value)};function Zv(a,b){Sf(function(){Vv(this.lc,u(void 0)?void 0:500,function(){this.k();null!=b&&b()}.bind(this))}.bind(a),u(800)?800:1E3)}
f.or=function(){this.Vh.Ew(!1);D(Gh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.H.Oy();this.Ul=this.fs=!1;null!=this.nb[0].Pb()&&this.Fk(this.nb[0].Pb());$v(this);this.se.Py();this.se.sy();Zv(this,function(){this.lc.J(0);this.k();this.mr();this.dispatchEvent("V");this.qm()}.bind(this))};f.iv=function(a){C(this.ka.kc,function(b,c){null!=a.sw[c]&&(b.Dk(a.sw[c]),b.k())})};f.mr=function(){this.ka&&this.ka.k();null!=this.se&&this.se.update();null!=this.ka&&this.se.ZA()};
function aw(a,b){a.qd.reset();sb(a.lp);Hb(a.nb,b)||a.nb.push(b);1==a.nb.length&&a.Fk(Wv[b.ug]);var c=b.Zc,d=null;1<c.length?(D(c,function(a,b){d=this.qd.ui(a.km,a.$d()||b);this.lp[ma(d)]=a}.bind(a)),Xv(a.qd,400)):a.load(c[0],!1)}f.Io=function(){this.H.Io()};f.lt=function(a){return null!=this.Rh?(this.Io(),this.H.KB(a),!0):!1};
f.load=function(a,b){null!=this.Vh?(this.Vh.clear(),this.Vh.Ew(!1)):(this.Vh=new Qu,this.Vh.DB(this.Ib),this.Vh.TB(this.pr.bind(this)));this.dispatchEvent("U");if(!this.lt(function(){this.Rh=void 0;this.load(a,b)}.bind(this)))if(this.Ul=!0,null!=a){if(b=null!=b?b:!0)bw(this),cw(this),this.H=new du(this),this.Ua=new ms,this.Ua.a().style.opacity=0,Rh(this.Ib,this.Ua.a()),Q(this.Ua.a(),Uv.CSS.iE),G(this.Ua,"A",this.mr.bind(this)),G(this.Ua,"x",this.iv.bind(this)),G(this.Ua,"z",this.jv.bind(this)),G(this.Ua,
"y",this.hv.bind(this)),this.ka=new Gt,dw(this),this.se=new lu(this,this.ka,this.Ua,this.H),this.se.tC(this.Kb),this.iA=!0;Vv(this.qd,400);Xv(this.lc,0);if(a instanceof Ll)aw(this,a);else{var c;C(this.ka.kc,function(a,b){(c=this.Ua.vz(b))&&a.oa(c.a())}.bind(this));Rc(this.ka,"r",this.xJ.bind(this));Rc(this.ka,"t",this.or.bind(this));G(this.ka,"s",this.mv.bind(this));this.nm=null;"scans"==a.ug.toLowerCase()?ew(this,a):(this.Ql(),fw(this,a),gw(this,a))}}else this.pr("The data set is empty!")};
function fw(a,b){a.nm=0;a.zk=0;a.om=b.Nd.length+8;D(b.Nd,function(a){null!=a.Kd.labelMapFile&&this.om++}.bind(a))}
function ew(a,b){Xv(a.lc,0);Yv(a,0);a.fs=!0;var c=a.nb[a.nb.length-1].Tz(),d=b.Nd[0].Dg()[0],e="";null!=d?(-1!=d.toLowerCase().indexOf("xiv/sample-data/scans/")?(d=d.split("xiv/sample-data/scans/"),e=d[0]+"xiv/sample-data/scans/"+(d[1].split("/")[0]+".zip")):e=d.split("/files/")[0]+"/files",window.console.log("XImgView Zip Downloading (XHR): "+e),ql(e,function(a){b.Nd[0].EB(a);gw(this,b)}.bind(a),function(a){this.Ql();0<a.totalSize?Yv(this,a.loaded/a.totalSize*.5):0<c&&Yv(this,a.loaded/c*.5)}.bind(a))):
a.Vh.dv("No readable files in the data set!")}function gw(a,b){window.console.log("TURNING OFF ERROR CATCHER WAIT FOR ERROR");a.ka.n(b);a.Rh=(new Date).getTime()}f.pr=function(){this.Ul=!1;this.qm();Vv(this.lc);bw(this);this.Gy();this.dispatchEvent({type:"W"})};f.jv=function(){C(this.ka.kc,function(a){a.k()});this.se.update()};f.hv=function(a){var b=a.frames;C(this.ka.kc,function(a,d){null!=b[d]&&(a.Dk(b[d].a()),a.k())}.bind(this));this.se.update()};
function $v(a){var b=0,b=u(b)?b:500,c=[];D([a.zb.ig,a.Kb.a(),a.Ua.a()],function(a){c.push(wk(a,{opacity:0},{opacity:1},b))});Ek(c,null,null,void 0)}function Vv(a,b,c){if(null!=a){b=u(b)&&0<=b?b:0;var d=function(){a.a().style.visibility="hidden";a.a().style.zIndex="-1";c&&c()};"hidden"==a.a().style.visibility||0==b?d():sk(a.a(),b,d)}}
function Xv(a,b){b=u(b)&&0<=b?b:0;a.a().style.opacity="0";a.a().style.zIndex="1000";a.a().style.visibility="visible";0==b?a.a().style.opacity="1":pk(a.a(),b,function(){})}f.Xr="Info. Display;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");function hw(a,b,c,d){var e=Uh(b),h=[],k;D(a.Xr,function(){h.push(null)});h[d]=c;D(e,function(a){k=this.Xr.indexOf(a.title);h[k]=a}.bind(a));Sh(b);D(h,function(a){null!=a&&b.appendChild(a)})}
f.Ij=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.zb.xm;break;case "LEFT":d=this.zb.ig;break;case "BOTTOM_LEFT":d=this.zb.RC;break;case "TOP_RIGHT":d=this.zb.YD;break;case "RIGHT":d=this.zb.ND;break;case "BOTTOM_RIGHT":d=this.zb.SC}u(c)?d.insertBefore(b,d.childNodes[c]):(a=this.Xr.indexOf(b.title),0<a?hw(this,d,b,a):Rh(d,b));iw(this)};
f.$l=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?Q(a,a.getAttribute(iu)):uh(a,a.getAttribute(iu));null!=b&&b(a)};f.wC=function(a){return"true"==this.Gd[a].getAttribute("checked").toString()};f.eu=function(a){return this.Gd[a]};f.Dc=function(a){En(this.Gd[a])};f.ww=function(a){g(a)||(a=[a]);D(a,function(a){null!=this.Gd[a]&&this.wC(a)&&En(this.Gd[a])}.bind(this))};
f.Qj=function(a,b,c,d,e,h){var k=b+"-on",l=S("img",b);l.id=ej(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(iu,b+"-on");Q(l,k);kk(l,{cursor:"pointer"});G(l,"click",function(){this.$l(l,e)}.bind(this));this.Ij(a,l);if(null==this.Gd)this.Gd={};else if(null!=this.Gd[c])throw Error("Invalid identifier for toggle button.  In use.");return this.Gd[c]=l};
function cw(a){a.zb.ig=S("div",{id:Uv.ID_PREFIX+"_menu_left_"+B(),"class":Uv.CSS.xD,viewbox:a.a().id});a.zb.ig.style.opacity=0;Rh(a.a(),a.zb.ig);a.Kb=new $o;a.Kb.CB("Select Layout");Q(a.Kb.a(),Uv.CSS.jE);a.Kb.HA(!0);a.Kb.a().style.opacity=0;a.Kb.be.style.opacity=0;var b=a.Kb.a();Nb(a.Xr,void 0,0,b.title);a.Ij("LEFT",b);a.Ib.appendChild(a.Kb.be)}
function dw(a){a.qd=new av;a.qd.n(a.Ib);Rh(a.Ib,a.qd.a());Rh(a.Ib,a.qd.We);Q(a.qd.a(),Uv.CSS.dE);G(a.qd,"T",function(a){this.load(this.lp[ma(a.mw)],!1)}.bind(a));Vv(a.qd)}f.kH=function(){return this.Gd};function iw(a){var b,c,d,e;null!=a.zb.xm&&(d=a.zb.xm,e=Ki(d),b=0,c=e.height);null!=a.zb.ig&&(d=a.zb.ig,e=Ki(d),a=a.u.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.k=function(a){Uv.d.k.call(this,a);null!=this.Ua&&this.Ua.k();this.ka&&this.ka.k();null!=this.Kb&&(a=wi(this.zb.ig),Ki(this.Kb.be),a=a.y-130,this.Kb.IB(0,a),this.Kb.ZB(0,a));iw(this);null!=this.H&&this.H.update();null!=this.se&&this.se.BC()};
function bw(a){sb(a.lp);Ib(a.nb);null!=a.Ua&&(H(a.Ua),zc(a.Ua.g()),delete a.Ua);null!=a.Kb&&(H(a.Kb),a.Kb.g(),delete a.Kb);null!=a.ka&&(a.ka.g(),delete a.ka);null!=a.qd&&(a.qd.g(),delete a.qd);null!=a.H&&a.H.f();null!=a.se&&a.se.g();null!=a.Gd&&(T(a.zb.ig),delete a.zb.ig,C(a.Gd,function(a){H(a);T(a)}),Ib(a.Gd),delete a.Gd)}f.Nq=!1;f.Mq=function(){return this.Nq};f.zu=function(){G(this.a(),"mouseenter",function(){this.Nq=!0}.bind(this));G(this.a(),"mouseleave",function(){this.Nq=!1}.bind(this))};
f.f=function(){Uv.d.f.call(this);bw(this);null!=this.lc&&(this.lc.g(),delete this.lc);T(this.Ib);H(this.Ib);delete this.Ib;C(this.zb,function(a,b){T(a);delete this.zb[b]}.bind(this));delete this.zb;delete this.XN;delete this.iA;delete this.fs;delete this.Nq;delete this.nm;delete this.zk;delete this.om};v("xiv.ui.ViewBox.EventType",{fE:"U",eE:"V",JM:"W"});v("xiv.ui.ViewBox.ID_PREFIX",Uv.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",Uv.CSS_SUFFIX);v("xiv.ui.ViewBox.defaultLayout",Wv);
v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",Uv.prototype.Ma);v("xiv.ui.ViewBox.prototype.getMenus",Uv.prototype.DG);v("xiv.ui.ViewBox.prototype.getLoadState",Uv.prototype.xG);v("xiv.ui.ViewBox.prototype.getViewableTrees",Uv.prototype.vH);v("xiv.ui.ViewBox.prototype.getViewFrame",Uv.prototype.rH);v("xiv.ui.ViewBox.prototype.getLayoutHandler",Uv.prototype.vG);v("xiv.ui.ViewBox.prototype.getLayoutMenu",Uv.prototype.wG);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",Uv.prototype.tH);v("xiv.ui.ViewBox.prototype.highlight",Uv.prototype.Ql);v("xiv.ui.ViewBox.prototype.unhighlight",Uv.prototype.qm);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",Uv.prototype.iH);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",Uv.prototype.Gy);v("xiv.ui.ViewBox.prototype.doNotHide",Uv.prototype.vF);v("xiv.ui.ViewBox.prototype.setLayout",Uv.prototype.Fk);v("xiv.ui.ViewBox.prototype.showInUseDialog",Uv.prototype.Io);
v("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",Uv.prototype.lt);v("xiv.ui.ViewBox.prototype.load",Uv.prototype.load);v("xiv.ui.ViewBox.prototype.addToMenu",Uv.prototype.Ij);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",Uv.prototype.$l);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",Uv.prototype.wC);v("xiv.ui.ViewBox.prototype.getToggleButton",Uv.prototype.eu);v("xiv.ui.ViewBox.prototype.fireToggleButton",Uv.prototype.Dc);v("xiv.ui.ViewBox.prototype.untoggle",Uv.prototype.ww);
v("xiv.ui.ViewBox.prototype.createToggleButton",Uv.prototype.Qj);v("xiv.ui.ViewBox.prototype.getToggleButtons",Uv.prototype.kH);v("xiv.ui.ViewBox.prototype.isMouseOver",Uv.prototype.Mq);v("xiv.ui.ViewBox.prototype.isRendering",Uv.prototype.jI);v("xiv.ui.ViewBox.prototype.updateStyle",Uv.prototype.k);v("xiv.ui.ViewBox.prototype.disposeInternal",Uv.prototype.f);function jw(){wn.call(this)}w(jw,wn);jw.prototype.Gj=function(a,b){var c=new Cn(a,b);c.yo(this);this.Pn.push(c);this.Qi&&xn(this,c)};function kw(){V.call(this)}w(kw,V);v("xiv.ui.ViewBoxHandler",kw);kw.CSS_SUFFIX={eD:"handle",gE:"viewboxdragclone",hj:"closebutton",Iw:"addrowbutton",Hw:"addcolumnbutton"};kw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=kw.prototype;f.ks=5;f.$w=5;f.Uk=document.body;f.Si=function(a,b){this.dispatchEvent({type:"Z",SA:a,QE:b})};f.xK=function(){return this.w.length};f.wn=function(){var a=[];D(this.w,function(b,c){a.push([]);D(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.w&&D(this.w,function(b,c){D(b,function(d,e){a(d,c,e,this.w.length,b.length)}.bind(this))}.bind(this))};f.ou=function(a,b){this.w||(this.w=[[]]);var c=0,d=[],e;if(null!=a)c=lw(this,a),this.w[c.Dq].length<this.$w&&(d.push(mw(this)),Nb(this.w[c.Dq],c.lI+1,0,d[0]));else{d=[];e=this.w.length?this.w.length:1;for(c=0;c<e;c++)d.push(mw(this));0===this.w.length?this.w.push([d[0]]):D(this.w,function(a,b){a.push(d[b])})}this.Si(d,void 0===b?!0:b);nw(this)};
f.oK=function(a){this.w&&(a=void 0===a?!0:a,this.w[0]&&1<this.w[0].length&&D(this.w,function(a){var c=a.length-1;ow(this,a[c]);a.splice(c,1)}.bind(this)),this.Si(null,a),nw(this))};function lw(a,b){for(var c=0,d=0,e=a.w.length,h=0,c=0;c<e;c++)for(d=0,h=a.w[c].length;d<h;d++)if(b===a.w[c][d])return{Dq:c,lI:d}}f.vs=function(){for(var a=0,b=0,c=this.w.length,d=0,a=0;a<c;a++)for(b=0,d=this.w[a].length;b<d;b++)if(this.w[a][b].Ul)return!0;return!1};
f.insertRow=function(a,b){this.w||(this.w=[[]]);var c=[],d,e;if(null!=a){var h=lw(this,a),c=[];e=this.w[h.Dq].length;if(this.w.length<this.ks){for(d=0;d<e;d++)c.push(mw(this));Nb(this.w,h.Dq+1,0,c)}}else if(e=this.w[0]&&this.w[0].length?this.w[0].length:1,this.w.length<this.ks){for(d=0;d<e;d++)c.push(mw(this));this.w.push(c)}this.Si(c,void 0===b?!0:b);nw(this)};
f.qK=function(a){this.w&&(a=void 0===a?!0:a,1<this.w.length&&(D(this.w[this.w.length-1],function(a){ow(this,a)}.bind(this)),this.w.splice(this.w.length-1,1)),this.Si(null,a),nw(this))};f.tq=function(a){for(var b=0,c=0,d=this.w.length,e=0,b=0;b<d;b++)for(c=0,e=this.w[b].length;c<e;c++)if(a===this.w[b][c].a())return this.w[b][c]};f.pH=function(a,b){return this.w[a][b].a()};f.nH=function(a,b){return this.w[a][b]};f.Wz=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.Vz=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.cC=function(a){this.Uk=a};
function mw(a){var b=new Uv;Rh(a.Uk,b.a());pw(a,b);var c=S("img",{id:kw.ID_PREFIX+"_dragHandle_"+B(),"class":kw.CSS.eD});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.Ij("TOP_LEFT",c,1);a.Uj||(a.Uj={});a.Uj[b.a().id]=c;c.title="Drag / Swap ViewBox";qw(a,b);rw(a,b);G(b,"V",a.sv.bind(a));G(b,"U",a.tv.bind(a));G(b,"W",a.pr.bind(a));return b}
function rw(a,b){var c=S("img",{id:kw.ID_PREFIX+"_CloseButton_"+B(),"class":kw.CSS.Hw,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});mk(c,kw.CSS.Hw+"-hovered");G(c,"click",function(){this.ou(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Ij("TOP_LEFT",c,1);a.Ox||(a.Ox={});a.Ox[b.a().id]=c;c.title="Add ViewBox Column"}
function qw(a,b){var c=S("img",{id:kw.ID_PREFIX+"_CloseButton_"+B(),"class":kw.CSS.Iw,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});mk(c,kw.CSS.Iw+"-hovered");G(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Ij("TOP_LEFT",c,1);a.Vx||(a.Vx={});a.Vx[b.a().id]=c;c.title="Add ViewBox Row"}
function pw(a,b){var c=S("img",{id:kw.ID_PREFIX+"_CloseButton_"+B(),"class":kw.CSS.hj,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});mk(c,kw.CSS.hj+"-hovered");G(c,"click",function(){sw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Ij("TOP_LEFT",c,1);a.cn||(a.cn={});a.cn[b.a().id]=c;c.title="Close ViewBox"}f.sv=function(a){this.dispatchEvent({type:"Y",kE:a.target})};f.us=function(a,b){this.loop(function(c){Hb(c.nb,a)&&b(c)})};f.tv=function(a){this.dispatchEvent({type:"X",kE:a.target})};
f.pr=function(a){this.dispatchEvent(a)};function ow(a,b){qk(b.a(),150,0);T(a.Uj[b.a().id]);T(a.cn[b.a().id]);b.g()}function tw(a,b){var c=[],d;ow(a,b);D(a.w,function(a){d=[];D(a,function(a){a.Tj||d.push(a)}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.w=c;a.Si(null,!0);nw(a)}function sw(a,b){1!=a.UA()&&(b.lt(function(){tw(this,b)}.bind(a))||tw(a,b))}f.ru=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.UA=function(){var a=0;this.loop(function(){a++});return a};
f.oH=function(a){for(var b=0,c=0,d=this.w.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.w[b].length;c<e;c++)if(this.w[b][c]===a)return e=b+1===this.w.length,h=c+1===this.w[b].length,e&&h?this.w[0][0]:e&&!h?this.w[0][c+1]:!e&&h?this.w[b+1][0]:this.w[b+1][c+1]};f.Az=function(){var a;this.loop(function(b){null!=a||null!=b.Rh||(a=b)}.bind(this));if(null!=a)return a;var b=this.Wz();g(b)?b.sort(function(a,b){return a.Rh<b.Rh?-1:a.Rh>b.Rh?1:0}):b=[b];return b[0]};
function uw(a,b,c){var d=new Zj,e=a.kg[b.id],h=a.kg[c.id];b[vw]=!0;c[vw]=!0;d.add(new Oj(b,[b.offsetLeft,b.offsetTop],[h.x,h.y],300,nk));d.add(new Oj(c,[c.offsetLeft,c.offsetTop],[e.x,e.y],300,nk));Rc(d,"end",function(){window.console.log("SWAP END");b[vw]=!1;c[vw]=!1;ww(this);for(var a,d,e,h,q=0,p=0,t=this.w.length,s,z;q<t;q++)for(p=this.w[q],s=p.length,p=0;p<s;p++)z=this.w[q][p],window.console.log(z.a()),this.ru(z,b)&&(a=q,d=p),this.ru(z,c)&&(e=q,h=p);window.console.log(a,d,e,h);u(a)&&u(e)&&(q=
this.w[a][d],this.w[a][d]=this.w[e][h],this.w[e][h]=q,q=Ki(this.w[a][d].a()),t=Ki(this.w[e][h].a()),Hi(this.w[e][h].a(),q),Hi(this.w[a][d].a(),t));window.console.log(this.w)}.bind(a));d.play()}f.mt=function(){this.Wd&&(yn(this.Wd),yn(this.rh),delete this.Wd,delete this.rh)};function xw(a){a.loop(function(a){null!=a.a()&&(this.Wd.Gj(this.Uj[a.a().id]),this.rh.Gj(a.a()))}.bind(a))}
function nw(a){a.mt();a.Wd=new jw;a.rh=new jw;xw(a);var b=a.Wd,c=a.rh;b.lw.push(c);c.Qq=!0;b.Pq=!0;a.Wd.oa();a.rh.oa();a.Wd.ut=a.vt.bind(a);G(a.Wd,"dragstart",a.ZI.bind(a));G(a.Wd,"dragover",a.cv.bind(a));G(a.Wd,"dragend",a.bv.bind(a))}f.vt=function(a){return yw(Dh(a.getAttribute("viewboxid")))};f.ZI=function(){null!=this.kg?sb(this.kg):this.kg={};ww(this)};function yw(a){var b=document.body;a=a.cloneNode(!1);a.className=kw.CSS.gE;b&&b.appendChild(a);return a}var vw=B();
kw.prototype.cv=function(a){if(a.xl.element.id!==a.dq.vi.getAttribute("viewboxid")){var b=Dh(a.dq.vi.getAttribute("viewboxid"));a=Dh(a.xl.element.id);b[vw]||a[vw]||uw(this,b,a)}};function ww(a){a.loop(function(a){this.kg[a.a().id]=wi(a.a())}.bind(a))}
kw.prototype.bv=function(a){var b=a.dq.Na.Vj;a=Dh(a.dq.vi.getAttribute("viewboxid"));a=Ei(a);a={left:a.x,top:a.y};var c=yw(b);Rh(this.Uk.parentNode?this.Uk.parentNode:this.Uk,c);b=hk(b);kk(c,{top:b.top,left:b.left,"z-index":1E4});zw(c,a).play();Aw(this);this.Si()};function zw(a,b){var c=new Zj;c.add(new Oj(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,nk));G(c,"end",function(){T(a)});return c}function Aw(a){a.loop(function(a){this.Uj[a.a().id].style.visibility="visible"}.bind(a))}
kw.prototype.f=function(){kw.d.f.call(this);this.loop(function(a){H(a);T(a.a());a.g()}.bind(this));D(this.w,function(a){Ib(a)});Ib(this.w);delete this.w;this.cq(this.Uj);delete this.Uj;this.cq(this.cn);delete this.cn;C(this.kg,function(a,b){sb(this.kg[b]);delete this.kg[b]}.bind(this));sb(this.kg);delete this.kg;null!=this.Wd&&(H(this.Wd),this.Wd.g());delete this.Wd;null!=this.rh&&(H(this.rh),this.rh.g());delete this.rh;delete this.Uk};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",kw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{fE:"X",eE:"Y",JN:"Z"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",kw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",kw.prototype.ks);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",kw.prototype.$w);v("xiv.ui.ViewBoxHandler.prototype.rowCount",kw.prototype.xK);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",kw.prototype.wn);v("xiv.ui.ViewBoxHandler.prototype.loop",kw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",kw.prototype.ou);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",kw.prototype.oK);v("xiv.ui.ViewBoxHandler.prototype.insertRow",kw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",kw.prototype.qK);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",kw.prototype.tq);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",kw.prototype.pH);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",kw.prototype.nH);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",kw.prototype.Wz);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",kw.prototype.Vz);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",kw.prototype.cC);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",kw.prototype.us);v("xiv.ui.ViewBoxHandler.prototype.isMatch",kw.prototype.ru);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",kw.prototype.UA);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",kw.prototype.oH);
v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",kw.prototype.Az);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxesRendering",kw.prototype.vs);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",kw.prototype.f);function Bw(a){As.call(this);this.BB(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.xw.bind(this));this.vf=a;Cw(this);this.kn()}w(Bw,As);v("xiv.ui.Thumbnail",Bw);Bw.ID_PREFIX="xiv.ui.Thumbnail";Bw.CSS_SUFFIX={};Bw.prototype.xw=function(){var a=Eh("img",As.CSS.Rk,this.af()),a=a[0];a.src=this.Tc.src};Bw.prototype.kn=function(){Bw.d.kn.call(this);Q(this.af(),Bw.um)};
function Cw(a){var b="",c=a.vf.he;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=c.Name)b=c.Name;else if(null!=a.vf.Kh)var d=a.vf.Kh.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");D(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.Do(e)}Bw.prototype.sH=function(){return this.vf};Bw.prototype.f=function(){Bw.d.f.call(this);this.vf.g();delete this.vf};
v("xiv.ui.Thumbnail.ID_PREFIX",Bw.ID_PREFIX);v("xiv.ui.Thumbnail.CSS_SUFFIX",Bw.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.updateHoverable",Bw.prototype.xw);v("xiv.ui.Thumbnail.prototype.createHoverable",Bw.prototype.kn);v("xiv.ui.Thumbnail.prototype.getViewable",Bw.prototype.sH);v("xiv.ui.Thumbnail.prototype.disposeInternal",Bw.prototype.f);function Dw(){V.call(this);this.pf=new jw;this.dg=new jw;this.pf.ut=this.vt.bind(this);G(this.pf,"dragover",this.cv.bind(this));G(this.pf,"dragend",this.bv.bind(this));G(this.pf,"dragout",this.YI.bind(this));G(this.dg,"drop",this.$I.bind(this));var a=this.pf,b=this.dg;a.lw.push(b);b.Qq=!0;a.Pq=!0;this.dg.oa();this.pf.oa()}w(Dw,Vu);v("xiv.ui.ThumbnailGallery",Dw);Dw.ID_PREFIX="xiv.ui.ThumbnailGallery";Dw.CSS_SUFFIX={rs:"thumbnail-dragging"};var Ew="THUMBNAIL_DRAGGER_"+B(),Fw=Ew+"_FADER"+B();f=Dw.prototype;
f.pf=null;f.dg=null;f.ui=function(a,b){var c=this.ln(a);this.pl(c,b);return c};f.ln=function(a){var b=new Bw(a);G(b,"D",function(){this.dispatchEvent({type:"da",sj:b})}.bind(this));return b};f.pl=function(a,b){Dw.d.pl.call(this,a,b);var c=a.af();c&&this.pf.Gj(c)};f.Fy=function(){yn(this.dg)};f.Xx=function(a){this.dg.Gj(a)};f.Yx=function(a){D(a,function(a){this.Xx(a)}.bind(this))};f.gH=function(a){return this.Lb[a.id]};
f.mt=function(){null!=this.pf&&(yn(this.pf),this.pf.g());null!=this.dg&&(yn(this.dg),this.dg.g())};f.vt=function(a){a=ji(a,"div",Bw.uc).id.replace("HOVERABLE_","");if(a in this.Lb)return this.Lb[a].setActive(!0,!0),a=this.Lb[a].a().cloneNode(!0),a.setAttribute("id",Ew+a.id),Q(a,Dw.CSS.rs),a};f.cv=function(a){this.dispatchEvent({type:"ba",nw:a.xl.element})};f.YI=function(a){this.dispatchEvent({type:"ca",nw:a.xl.element})};
f.bv=function(){var a=Gh(Dw.CSS.rs);D(a,function(a){sk(a,300,function(){T(a)})});null!=a[0]&&this.Lb[a[0].id.replace(Ew,"")].setActive(!1,!0)};f.$I=function(a){var b=Hh(Dw.CSS.rs);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);T(b);a.xl.element&&this.dispatchEvent({type:"ea",sj:this.Lb[b.id.replace(Ew,"")],hL:a.xl.element})}};f.f=function(){Dw.d.f.call(this);this.mt()};
v("xiv.ui.ThumbnailGallery.EventType",{fp:"$",AD:"aa",pN:"ba",oN:"ca",mN:"da",qN:"ea"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",Dw.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",Dw.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",Ew);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",Fw);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Dw.prototype.ui);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",Dw.prototype.ln);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",Dw.prototype.pl);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",Dw.prototype.Fy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",Dw.prototype.Xx);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",Dw.prototype.Yx);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",Dw.prototype.gH);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",Dw.prototype.f);function Gw(){var a=li(Ah());a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()};function Hw(a,b,c,d){Yc.call(this);this.hb=c||Ah();this.yl=a;this.jf=[];this.gL=b?b:Iw;this.EC=!!d;this.Xe()}w(Hw,Yc);var Iw=0;f=Hw.prototype;
f.Xe=function(){this.yl.className="goog-tabpane";for(var a=[],b=Vh(this.yl);b;)a.push(b),b=Xh(b);this.Xd=this.hb.v("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.cc=this.hb.v("div","goog-tabpane-cont");this.yl.appendChild(this.cc);b=this.yl;switch(this.gL){case Iw:b.insertBefore(this.Xd,this.cc);b.insertBefore(Jw(this),this.cc);Vk(b,"goog-tabpane-top");break;case 1:b.appendChild(this.Xd);b.appendChild(Jw(this));Vk(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.Xd,this.cc);Vk(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.Xd,this.cc);Vk(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.Xd.tabIndex=0;G(this.Xd,this.EC?"mousedown":"click",this.hr,!1,this);G(this.Xd,"keydown",this.ir,!1,this);for(var c=0;b=a[c];c++)Kw(this,new Lw(b))};
function Jw(a){var b=Ah(void 0),c=null,d=b.na;E&&d.createStyleSheet?(c=d.createStyleSheet(),Pi(c)):(d=Fh(b.na,"head",void 0,void 0)[0],d||(c=Fh(b.na,"body",void 0,void 0)[0],d=b.v("head"),c.parentNode.insertBefore(d,c)),c=b.v("style"),Pi(c),b.appendChild(d,c));return a.hb.v("div","goog-tabpane-clear")}f.f=function(){Hw.d.f.call(this);Sc(this.Xd,this.EC?"mousedown":"click",this.hr,!1,this);Sc(this.Xd,"keydown",this.ir,!1,this);delete this.yl;this.cc=this.Xd=null};
function Kw(a,b){b.Na&&b.Na!=a&&b.Na instanceof Hw&&Mw(b.Na,b);var c=a.jf.length;ca(void 0)&&void 0!=c?(c=void 0,a.jf.splice(c,0,b),a.Xd.insertBefore(b.Ai,a.Xd.childNodes[c])):(a.jf.push(b),a.Xd.appendChild(b.Ai));b.zo(a,c);a.Og||(a.Og=b,a.dispatchEvent(new Nw("change",a,a.Og)));a.cc.appendChild(b.cc);Ow(b,b==a.Og);for(var d=c+1;c=a.jf[d];d++)c.Kn=d}function Mw(a,b){u(b)&&(b=a.jf[b]);a.jf.splice(b.Kn,1);b.zo(null);T(b.Ai);T(b.cc);for(var c,d=0;c=a.jf[d];d++)c.zo(a,d)}
function Pw(a,b){if(0<=b&&b<a.jf.length){var c=a.jf[b];!c.isEnabled()||a.Og&&c==a.Og||(Ow(a.Og,!1),Ow(c,!0),a.Og=c,a.dispatchEvent(new Nw("change",a,a.Og)))}}f.Ga=function(){return this.cc||null};f.a=function(){return this.yl||null};f.hr=function(a){for(var b=a.target;b!=this.Xd;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);Pw(this,c);break}b=b.parentNode}a.preventDefault()};
f.ir=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.Og.Kn-1;Pw(this,0>a?this.jf.length-1:a);break;case 39:a=this.Og.Kn+1;Pw(this,a>=this.jf.length?0:a);break;case 36:Pw(this,0);break;case 35:Pw(this,this.jf.length-1)}};function Lw(a,b,c){var d,e;if(r(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=Vh(a))d=gi(b),b.parentNode.removeChild(b);e=a}this.hb=c||Ah();this.cc=e||this.hb.v("div");this.Ai=this.hb.v("li",null,d);this.Kn=this.Na=null;this.Bc=!0}f=Lw.prototype;
f.$d=function(){return gi(this.Ai)};f.je=function(a){ai(this.Ai,a)};f.Sz=function(){return this.Ai};f.Ga=function(){return this.cc};f.getParent=function(){return this.Na};f.ic=function(a){this.Bc=a;this.Ai.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Bc};function Ow(a,b){a.isEnabled()&&(a.cc.style.display=b?"":"none",a.Ai.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.zo=function(a,b){this.Na=a;this.Kn=ca(b)?b:null};
function Nw(a,b,c){Cc.call(this,a,b);this.page=c}w(Nw,Cc);function Z(a){V.call(this);if(null!=a){var b=a;if(!r(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==Qw.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||Rw}w(Z,V);v("nrg.ui.Tabs",Z);var Qw=["TOP","BOTTOM","LEFT","RIGHT"],Rw=Qw[0];Z.ID_PREFIX="nrg.ui.Tabs";Z.CSS_SUFFIX={Vb:"tab",Zh:"tab-active",uf:"page",DD:"page-content",gp:"page-active",eb:"icon",Qk:"icon-active",hD:"icon-content",WM:"scrollgallery"};
function Sw(a,b,c,d,e){this.gj=!1;this.TITLE=a;this.Vb=b;this.eb=c;this.uf=d;this.$g=e}f=Z.prototype;f.df=0;f.am=0;f.Ed=null;f.n=function(a){Z.d.n.call(this,a);this.dk=new Hw(this.a());this.L=[];Q(this.a(),Z.uc)};f.bH=function(){return this.L.length};f.rG=function(){return this.df};f.QG=function(){return this.am};f.rq=function(){var a=[];D(this.L,function(b){a.push(b.Vb)});return a};f.sq=function(){var a=[];D(this.L,function(b){a.push(b.uf)});return a};
f.cH=function(){var a=[];D(this.L,function(b){a.push(b.eb)});return a};f.NE=function(a){D(a,function(a){this.ol(a)}.bind(this))};f.reset=function(){for(var a=this.L.length;0<a;)Mw(this.dk,a-1),a--;this.nO()};f.jw=function(a){if(null==this.L)return!1;for(var b=0,c=this.L.length;b<c;b++)if(this.L[b].TITLE==a)return!0;return!1};
f.ol=function(a){this.L=null!=this.L?this.L:[];if(this.jw(a))throw Error(a+" is an already existing tab!");var b;b=S("div",{id:"Tab_"+B(),"class":Z.CSS.Vb,title:a});Rh(this.a(),b);var c=S("div",{id:"TabIcon_"+B(),"class":Z.CSS.eb}),d=S("div",{"class":Z.CSS.hD},a);Rh(c,d);Rh(b,c);d=S("div",{id:"TabPage_"+B(),"class":Z.CSS.uf,label:a});kk(d,ik(this.a(),"width"));Rh(this.a().parentNode,d);var e=new Lw(d,a);Kw(this.dk,e);this.L.push(new Sw(a,b,c,d,e));Tw(this);Uw(this);Vw(this);this.Sj();this.setActive(0);
this.k()};f.$B=function(a,b){this.jw(a)||this.ol(a);var c;a:if(null!=this.L){c=0;for(var d=this.L.length;c<d;c++)if(this.L[c].TITLE==a){c=this.L[c];break a}c=void 0}else c=!1;b instanceof Cs?(d=b,c.uf.appendChild(b.a())):(d=new Cs,d.n(c.uf),d.Ue(b));Q(d.a(),Z.CSS.DD);this.k()};function Tw(a){D(a.L,function(a){H(a.Vb)}.bind(a))}function Uw(a){D(a.L,function(a,c){G(a.Vb,"click",function(){this.Sj();this.setActive(c)}.bind(this))}.bind(a))}
function Vw(a){D(a.L,function(a,c){Ww(this,c);Xw(this,c)}.bind(a))}function Ww(a,b){G(a.L[b].Vb,"mouseover",function(){!0!==this.L[b].gj&&(Q(this.L[b].Vb,Z.CSS.Zh),Q(this.L[b].Vb,pj(Z.CSS.Zh,this.orientation)),Q(this.L[b].eb,Z.CSS.Qk))}.bind(a))}function Xw(a,b){G(a.L[b].Vb,"mouseout",function(){!0!==this.L[b].gj&&(uh(this.L[b].Vb,Z.CSS.Zh),uh(this.L[b].Vb,pj(Z.CSS.Zh,this.orientation)),uh(this.L[b].eb,Z.CSS.Qk))}.bind(a))}
f.setActive=function(a){this.L[a].gj=!0;this.am=this.df;this.df=a;Pw(this.dk,a);Q(this.L[a].Vb,Z.CSS.Zh);Q(this.L[a].Vb,pj(Z.CSS.Zh,this.orientation));Q(this.L[a].uf,Z.CSS.gp);Q(this.L[a].uf,pj(Z.CSS.gp,this.orientation));Q(this.L[a].eb,Z.CSS.Qk);Q(this.L[a].eb,pj(Z.CSS.Qk,this.orientation))};
f.Zy=function(a){this.L[a].gj=!1;Pw(this.dk,0);uh(this.L[a].Vb,Z.CSS.Zh);uh(this.L[a].Vb,pj(Z.CSS.Zh,this.orientation));uh(this.L[a].uf,Z.CSS.gp);uh(this.L[a].uf,pj(Z.CSS.gp,this.orientation));uh(this.L[a].eb,Z.CSS.Qk);uh(this.L[a].eb,pj(Z.CSS.Qk,this.orientation))};f.Sj=function(){D(this.L,function(a,b){this.Zy(b)}.bind(this))};
f.k=function(){if(this.a().parentNode){Q(this.a(),Z.uc);Q(this.a(),pj(Z.uc,this.orientation));D(this.L,function(a){Q(a.Vb,pj(Z.CSS.Vb,this.orientation));Q(a.eb,pj(Z.CSS.eb,this.orientation));Q(a.uf,pj(Z.CSS.uf,this.orientation))}.bind(this));switch(this.orientation){case "TOP":Yw(this);break;case "BOTTOM":this.XO();break;case "RIGHT":Zw(this)}if(0<this.L.length){var a=Ki(this.L[0].Vb);0<a.width&&0<a.height&&(this.Ed=a)}}};
function Zw(a){D(a.L,function(a){this.a().parentNode&&kk(a.Vb,{height:(100/this.L.length).toString()+"%"})}.bind(a))}function Yw(a){var b;D(a.L,function(a,d){this.a().parentNode&&(b=100/this.L.length,kk(a.Vb,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function $w(a){D(a.L,function(a){C(a,function(c,d){H(c);c.f?c.g():c.g&&c.g();delete c;delete a[d]});sb(a);delete a});Ib(a.L)}
f.f=function(){Z.d.f.call(this);D(this.rq(),function(a){H(a)}.bind(this));$w(this);delete this.L;H(this.dk);this.dk.g();delete this.dk;delete this.df;delete this.am;delete this.WO;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",Qw);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",Rw);v("nrg.ui.Tabs.ID_PREFIX",Z.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",Z.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",Sw);v("nrg.ui.Tabs.prototype.tabSize",Z.prototype.Ed);v("nrg.ui.Tabs.prototype.render",Z.prototype.n);
v("nrg.ui.Tabs.prototype.getTabCount",Z.prototype.bH);v("nrg.ui.Tabs.prototype.getLastActiveTab",Z.prototype.rG);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",Z.prototype.QG);v("nrg.ui.Tabs.prototype.getTabElements",Z.prototype.rq);v("nrg.ui.Tabs.prototype.getTabPages",Z.prototype.sq);v("nrg.ui.Tabs.prototype.getTabIcons",Z.prototype.cH);v("nrg.ui.Tabs.prototype.addTabs",Z.prototype.NE);v("nrg.ui.Tabs.prototype.reset",Z.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",Z.prototype.jw);
v("nrg.ui.Tabs.prototype.addTab",Z.prototype.ol);v("nrg.ui.Tabs.prototype.setTabPageContents",Z.prototype.$B);v("nrg.ui.Tabs.prototype.setActive",Z.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",Z.prototype.Zy);v("nrg.ui.Tabs.prototype.deactivateAll",Z.prototype.Sj);v("nrg.ui.Tabs.prototype.updateStyle",Z.prototype.k);v("nrg.ui.Tabs.prototype.disposeInternal",Z.prototype.f);function ax(a){Z.call(this,a)}w(ax,Z);v("nrg.ui.ZipTabs",ax);ax.ID_PREFIX="nrg.ui.ZipTabs";f=ax.prototype;f.n=function(a){ax.d.n.call(this,a);Q(this.a(),pj(ax.uc,this.orientation));this.vc=new Pq(this.a(),this.orientation);bx(this);a=Gh("goog-tabpane-tabs",this.a());D(a,function(a){a.style.visibility="hidden"})};f.Lh=function(a){this.vc.Lh(a);this.k()};f.R=function(){return this.vc};
function bx(a){G(a.vc,"resize",function(a){this.nh();if(null!=this.Ed){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.Ed.height-this.u.height)?this.Sj():this.setActive(this.df);break;case "LEFT":case "RIGHT":var c=36>=Math.abs(this.Ed.width-this.u.width)&&this.Tp;4>=Math.abs(this.Ed.width-this.u.width)||c?this.Sj():this.setActive(this.df)}this.dispatchEvent({type:"resize",size:a.size,Je:a.Je})}}.bind(a))}f.Tp=!1;
f.Qb=function(a,b,c){this.k();a?(this.setActive(b||0),this.vc.mf(this.orientation,"MAX",null,c)):(this.Sj(),this.vc.mf(this.orientation,"MIN",null,c))};f.k=function(){ax.d.k.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.Ed&&this.vc.PB(this.Ed.height);break;case "LEFT":case "RIGHT":null!=this.Ed&&this.vc.RB(this.Ed.width)}this.vc.update()};
f.ol=function(a){ax.d.ol.call(this,a);1==this.rq().length&&this.k();D(this.rq(),function(a){G(a,"click",function(){if(null!=this.Ed)switch(this.k(),this.nh(),this.orientation){case "BOTTOM":4>=Math.abs(this.u.height-this.Ed.height)?(this.setActive(this.df),this.vc.mf("BOTTOM","MAX",void 0)):this.df==this.am&&this.vc.mf("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.u.height-this.Ed.height)?(this.setActive(this.df),this.vc.mf("TOP","MAX",void 0)):this.df==this.am&&this.vc.mf("TOP","MIN",
void 0);break;case "RIGHT":null!=this.Ed&&(4>=Math.abs(this.u.width-this.Ed.width)?(this.Tp=!1,this.setActive(this.df),this.vc.mf("RIGHT","MAX",void 0)):this.df==this.am&&(this.Tp=!0,this.vc.mf("RIGHT","MIN",void 0)))}}.bind(this))}.bind(this));this.Sj();this.k()};f.f=function(){ax.d.f.call(this);H(this.vc);this.vc.g();delete this.vc;delete this.Tp};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{WC:"fa"});
v("nrg.ui.ZipTabs.ID_PREFIX",ax.ID_PREFIX);v("nrg.ui.ZipTabs.prototype.render",ax.prototype.n);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",ax.prototype.Lh);v("nrg.ui.ZipTabs.prototype.getResizable",ax.prototype.R);v("nrg.ui.ZipTabs.prototype.setExpanded",ax.prototype.Qb);v("nrg.ui.ZipTabs.prototype.updateStyle",ax.prototype.k);v("nrg.ui.ZipTabs.prototype.addTab",ax.prototype.ol);v("nrg.ui.ZipTabs.prototype.disposeInternal",ax.prototype.f);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
function cx(){V.call(this);this.Pc=cx.ModalStates.ij}w(cx,V);v("xiv.ui.Modal",cx);cx.ModalStates={qe:"fullscreen",Se:"popup",hs:"fullscreen-popup",lg:"windowed",ij:"demo",aD:"demp-fullscreen"};cx.ID_PREFIX="xiv.ui.Modal";cx.CSS_SUFFIX={dp:"background",NL:"columnmenu",MM:"rowmenu",OL:"button",NM:"button",FD:"projecttab",GD:"projecttab-bounds",HD:"projecttab-dragger",JD:"projecttab-dragger-handle",Jw:"addsubjects"};
function dx(){var a={};C(ex,function(b,c){a[c]=cx.ID_PREFIX+"."+cb(b.key)+".Button"});var b=Jk(nb(a)),c={};C(a,function(a,e){c[e]=b[a];var h=pj(a);b[a].className=h});return c}var ex={Pk:{key:"CLOSE",title:"Close XNAT Image Viewer."},qe:{key:"FULLSCREEN",title:"Enter full-screen mode."},Se:{key:"POPUP",title:"Popup to new window."},lg:{key:"WINDOWED",title:"Exit full-screen mode."}};f=cx.prototype;f.Hn=29;f.as=29;f.br=320;f.cr=320;f.qH=function(){return this.Ba};f.hH=function(){return this.T};
f.SG=function(){return this.Ub};f.PG=function(){return this.W.Se};f.TF=function(){return this.W.Pk};f.iG=function(){return this.W.qe};f.n=function(a){cx.d.n.call(this,a);this.pA();this.Ba.ou(null,!1);this.jc(this.Pc)};
f.jc=function(a){null!=this.Pc&&(this.wr=this.Pc);this.Pc=a;null!=this.wr&&uh(this.a(),pj(this.constructor.uc,this.wr));Q(this.a(),pj(this.constructor.uc,this.Pc));this.Pc==cx.ModalStates.ij?(this.W.qe.style.visibility="visible",this.W.lg.style.visibility="hidden"):this.Pc==cx.ModalStates.lg?(this.W.qe.style.visibility="visible",this.W.lg.style.visibility="hidden"):this.Pc==cx.ModalStates.Se?(this.W.Se.style.visibility="hidden",this.W.Pk.style.visibility="hidden",this.W.qe.style.visibility="visible",
this.W.lg.style.visibility="hidden"):this.Pc==cx.ModalStates.hs?(this.W.Se.style.visibility="hidden",this.W.qe.style.visibility="hidden",this.W.lg.style.visibility="visible"):this.Pc==cx.ModalStates.qe&&(this.W.Se.style.visibility="visible",this.W.qe.style.visibility="hidden",this.W.lg.style.visibility="visible");this.k()};f.Il=function(){return this.Pc};f.Mi=function(){this.T.loop(function(a){a.setActive(!1);this.Ba.loop(function(b){-1<b.nb.indexOf(a.vf)&&a.setActive(!0)})}.bind(this))};
f.ry=function(){fx(this);this.xd=null!=this.xd?this.xd:[];this.Mc=null!=this.Mc?this.Mc:new Zj;gx(this);hx(this);G(this.Mc,"end",this.jJ.bind(this));D(this.xd,function(a){this.Mc.add(a)}.bind(this));this.Mc.play();this.Mi()};f.jJ=function(){D(this.xd,function(a){this.Mc.remove(a);H(a);a.Vd();a.g()}.bind(this));Ib(this.xd);this.k();ix(this)};function ix(a){a.Ba.loop(function(a){0==a.a().style.opacity&&pk(a.a(),300)})}
function gx(a){var b=null;a.Ba.loop(function(a,d,e){b=a.a();this.xd.push(new Oj(b,[b.offsetLeft,b.offsetTop],[this.ua.Jb.mg[d][e],this.ua.Jb.ue[d][e]],300,nk))}.bind(a))}function hx(a){var b=null;a.Ba.loop(function(a,d,e){b=a.a();this.xd.push(new Pj(b,[b.offsetWidth,b.offsetHeight],[this.ua.Jb.vj[d][e],this.ua.Jb.vm[d][e]],300,nk))}.bind(a))}
function fx(a){a.ua=null!=a.ua?a.ua:{};a.nh();a.ua.To={};a.ua.To.vj=Math.round(Ki(a.Ub.a()).width);a.ua.To.vm=Math.round(a.u.height-2*a.as);a.ua.To.ue=Math.round(a.as);jx(a);kx(a)}function jx(a){a.ua.Jb={};a.ua.Jb.vj=a.Ba.wn();a.ua.Jb.vm=a.Ba.wn();a.Ba.loop(function(a,c,d,e,h){this.ua.Jb.vj[c][d]=Math.round((this.u.width-this.ua.To.vj-this.Hn)/h-this.Hn);this.ua.Jb.vm[c][d]=Math.round((this.u.height-(e+1)*this.Hn)/e)}.bind(a))}
function kx(a){a.ua.Jb.mg=a.Ba.wn();a.ua.Jb.ue=a.Ba.wn();a.ua.Jb.VD=a.ua.To.vj+a.as;var b=0;a.Ba.loop(function(a,d,e){b=this.ua.Jb.VD+e*(this.ua.Jb.vj[d][e]+this.as);this.ua.Jb.mg[d][e]=b;this.ua.Jb.ue[d][e]=d*(this.ua.Jb.vm[d][e]+this.Hn);window.console.log();this.ua.Jb.ue[d][e]+=this.Hn}.bind(a))}f.k=function(){fx(this);this.Ub&&this.Ub.k();lx(this);this.Mi();this.T.k();this.T.Uc()};
function lx(a){a.Ba&&a.Ba.loop(function(a,c,d){kk(a.a(),{height:this.ua.Jb.vm[c][d],width:this.ua.Jb.vj[c][d],left:this.ua.Jb.mg[c][d],top:this.ua.Jb.ue[c][d]});a.k()}.bind(a))}
f.pA=function(){var a=S("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=cx.CSS.dp;this.a().appendChild(a);this.ls=S("div");Rh(this.a(),this.ls);Q(this.ls,cx.CSS.GD);this.Ub=new ax("RIGHT");this.Ub.n(this.a());Q(this.Ub.a(),cx.CSS.FD);this.T=new Dw;this.T.$v(!0);this.T.Nv(this.a());var b;b=b||G;b(this.T,"B",this.LJ.bind(this));b(this.T,"C",this.KJ.bind(this));b(this.T,"da",this.EJ.bind(this));b(this.T,"ba",this.HJ.bind(this));b(this.T,"ca",this.GJ.bind(this));b(this.T,"ea",this.JJ.bind(this));
this.T.n(this.Ub.a());this.Ub.$B("Project Browser",this.T);this.Ub.Lh(this.ls);a=this.Ub.R().hd("RIGHT");Q(a,cx.CSS.HD);this.Ub.R().Hl("RIGHT").SB(5);Rh(a,S("div",{id:Uv.ID_PREFIX+"_DraggerHandle_"+B(),"class":cx.CSS.JD}));G(this.Ub,"resize",this.k.bind(this));G(this.Ub,"resize_end",this.k.bind(this));this.Ba=new kw;this.Ba.cC(this.a());var c;c=c||G;c(this.Ba,"X",this.tv.bind(this));c(this.Ba,"Y",this.sv.bind(this));c(this.Ba,"Z",this.Si.bind(this));G(this.Ba,"W",this.YJ.bind(this));mx(this)};
function mx(a){a.W=dx();C(a.W,function(a){Rh(this.a(),a)}.bind(a));nx(a);a.W.Pk.innerHTML="<img src="+a.Oi+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.W.qe.innerHTML="<img src="+a.Oi+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.W.lg.innerHTML="<img src="+a.Oi+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.W.Se.innerHTML="<img src="+a.Oi+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.Mx=function(){this.mh=S("div",{id:cx.ID_PREFIX+"_addSubjects_"+B(),"class":cx.CSS.Jw},"+ Load all subjects in project");this.Ub.sq()[0].appendChild(this.mh);mk(this.mh,cx.CSS.Jw+"-hovered");var a=this.Ub.sq()[0],b=Uh(a)[0];Ki(a);Ki(b);Ki(this.mh);b.style.height="calc(100% - 70px)";G(this.mh,"click",this.RI.bind(this))};f.RI=function(){this.dispatchEvent({type:"g"});sk(this.mh,150,function(){ox(this);var a=this.Ub.sq()[0];Uh(a)[0].setAttribute("style","");this.T.Uc()}.bind(this))};
function ox(a){null!=a.mh&&(T(a.mh),H(a.mh),delete a.mh)}f.YJ=function(){var a=Gh("xiv-ui-thumbnailgallery-thumbnail-dragging");D(a,function(a){T(a)});this.Mi();window.console.log(this.T.dg.mq());null!=this.T.dg.mq()&&this.T.pf.Ci({oO:!0})};f.WI=function(){this.Pc===cx.ModalStates.qe&&Gw()};
f.cJ=function(){var a=this.a().parentNode;a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullscreen&&a.requestFullscreen();this.Pc===cx.ModalStates.Se?this.jc(cx.ModalStates.hs):this.jc(cx.ModalStates.qe)};f.aK=function(){Gw();this.jc(this.wr)};function nx(a){var b;b=b||G;b(a.W.qe,"click",a.cJ.bind(a));b(a.W.lg,"click",a.aK.bind(a));b(a.W.Pk,"click",a.WI.bind(a))}
f.LJ=function(a){this.Ba.us(a.sj.vf,function(a){a.Ql()})};f.KJ=function(a){this.Ba.us(a.sj.vf,function(a){a.Ul||a.qm()})};f.GJ=function(a){this.Ba.tq(a.nw).qm()};f.HJ=function(a){this.Ba.tq(a.nw).Ql()};f.EJ=function(a){this.Ba.vs()||(this.Ba.Az().load(a.sj.vf),this.Mi())};f.JJ=function(a){var b=this.Ba.tq(a.hL);this.Ba.vs()?b.qm():(b.load(a.sj.vf),this.Mi())};f.tv=function(){this.Mi()};f.sv=function(){this.Mi()};
f.Si=function(a){null!=a&&null!=a.QE?(a.SA&&D(a.SA,function(a){kk(a.a(),{opacity:0})}),this.ry()):this.k();this.T.Fy();this.T.Yx(this.Ba.Vz())};f.f=function(){cx.d.f.call(this);sb(this.ua);delete this.ua;this.Gt(this.xd);delete this.xd;this.bq(this.Mc);delete this.Mc;this.cq(this.W);delete this.W;null!=this.Ba&&(H(this.Ba),this.Ba.g(),delete this.Ba);H(this.Ub);this.Ub.g();delete this.Ub;H(this.T);this.T.g();delete this.T;ox(this);delete this.Pc;delete this.wr};v("xiv.ui.Modal.EventType",cx.YL);
v("xiv.ui.Modal.ID_PREFIX",cx.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",cx.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",cx.prototype.qH);v("xiv.ui.Modal.prototype.getThumbnailGallery",cx.prototype.hH);v("xiv.ui.Modal.prototype.getProjectTab",cx.prototype.SG);v("xiv.ui.Modal.prototype.getPopupButton",cx.prototype.PG);v("xiv.ui.Modal.prototype.getCloseButton",cx.prototype.TF);v("xiv.ui.Modal.prototype.getFullScreenButton",cx.prototype.iG);v("xiv.ui.Modal.prototype.render",cx.prototype.n);
v("xiv.ui.Modal.prototype.setState",cx.prototype.jc);v("xiv.ui.Modal.prototype.getState",cx.prototype.Il);v("xiv.ui.Modal.prototype.highlightInUseThumbnails",cx.prototype.Mi);v("xiv.ui.Modal.prototype.animateModal",cx.prototype.ry);v("xiv.ui.Modal.prototype.updateStyle",cx.prototype.k);v("xiv.ui.Modal.prototype.initSubComponents",cx.prototype.pA);v("xiv.ui.Modal.prototype.addAddSubjectsToProjectTab",cx.prototype.Mx);v("xiv.ui.Modal.prototype.disposeInternal",cx.prototype.f);
window["xiv.ui.Modal"]=cx;window["xiv.ui.Modal.ModalStates"]=cx.ModalStates;
