var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.Od=function(){return a.Kz?a.Kz:a.Kz=new a}}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ga(a)}function ha(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ia(a){return"boolean"==typeof a}function t(a){return"number"==typeof a}function ka(a){return"function"==ga(a)}function ma(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function na(a){return a[oa]||(a[oa]=++pa)}
var oa="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(null,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.c=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.HN=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.uL=!0;A.Dd=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.hd=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.VD=0;this.TK=function(){return this.VD++}};function za(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.oC;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Aa);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba={},Ca;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Da,Error);Da.prototype.name="CustomError";function Ea(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Fa(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Ha(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ia(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ja(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ka=/(\.\d+)|(\d+)|(\D+)/g;function La(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ka),d=b.toLowerCase().match(Ka),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function Pa(a){if(!Qa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ra,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ua,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Va,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Wa,"&#0;"));return a}var Ra=/&/g,Sa=/</g,Ta=/>/g,Ua=/"/g,Va=/'/g,Wa=/\x00/g,Qa=/[\x00&<>"']/;
function Xa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Ya(a){return Array.prototype.join.call(arguments,"")}
function Za(a,b){for(var c=0,d=Ja(String(a)).split("."),e=Ja(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",m=/(\d*)(\D*)/g,q=/(\d*)(\D*)/g;do{var p=m.exec(l)||["","",""],s=q.exec(n)||["","",""];if(0==p[0].length&&0==s[0].length)break;c=$a(0==p[1].length?0:parseInt(p[1],10),0==s[1].length?0:parseInt(s[1],10))||$a(0==p[2].length,0==s[2].length)||$a(p[2],s[2])}while(0==c)}return c}function $a(a,b){return a<b?-1:a>b?1:0}
var ab=2147483648*Math.random()|0;function B(){return"goog_"+ab++}function bb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function cb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function db(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function eb(a,b){b.unshift(a);Da.call(this,Ha.apply(null,b));b.shift()}w(eb,Da);eb.prototype.name="AssertionError";function fb(a,b){throw new eb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var hb="closure_listenable_"+(1E6*Math.random()|0);function ib(a){return!(!a||!a[hb])}var jb=0;function kb(a,b,c,d,e){this.hk=a;this.ar=null;this.src=b;this.type=c;this.Pm=!!d;this.kq=e;this.key=++jb;this.Ul=this.Cp=!1}function lb(a){a.Ul=!0;a.hk=null;a.ar=null;a.src=null;a.kq=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function mb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function nb(a){var b=0,c;for(c in a)b++;return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function pb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function qb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function rb(){var a=sb,b;for(b in a)return!1;return!0}function tb(a){for(var b in a)delete a[b]}
function ub(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function vb(a){var b={},c;for(c in a)b[c]=a[c];return b}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<wb.length;h++)c=wb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function yb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return yb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var zb=Array.prototype,Ab=zb.indexOf?function(a,b,c){return zb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},D=zb.forEach?function(a,b,c){zb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Bb=zb.filter?function(a,b,c){return zb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=
0,k=r(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Cb=zb.map?function(a,b,c){return zb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=r(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=b.call(c,h[k],k,a));return e},Db=zb.some?function(a,b,c){return zb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Eb=zb.every?function(a,b,c){return zb.every.call(a,b,c)}:function(a,
b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};function Fb(a){var b;a:{b=Gb;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function Hb(a,b){return 0<=Ab(a,b)}function Ib(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Jb(a,b){Hb(a,b)||a.push(b)}
function Kb(a,b){var c=Ab(a,b),d;(d=0<=c)&&zb.splice.call(a,c,1);return d}function Lb(a){return zb.concat.apply(zb,arguments)}function Mb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Nb(a,b,c,d){zb.splice.apply(a,Ob(arguments,1))}function Ob(a,b,c){return 2>=arguments.length?zb.slice.call(a,b):zb.slice.call(a,b,c)};function Pb(a){this.src=a;this.vc={};this.Ho=0}f=Pb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.vc[h];a||(a=this.vc[h]=[],this.Ho++);var k=Qb(a,b,d,e);-1<k?(b=a[k],c||(b.Cp=!1)):(b=new kb(b,this.src,h,!!d,e),b.Cp=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.vc))return!1;var e=this.vc[a];b=Qb(e,b,c,d);return-1<b?(lb(e[b]),zb.splice.call(e,b,1),0==e.length&&(delete this.vc[a],this.Ho--),!0):!1};
function Rb(a,b){var c=b.type;if(!(c in a.vc))return!1;var d=Kb(a.vc[c],b);d&&(lb(b),0==a.vc[c].length&&(delete a.vc[c],a.Ho--));return d}f.Rf=function(a){a=a&&a.toString();var b=0,c;for(c in this.vc)if(!a||c==a){for(var d=this.vc[c],e=0;e<d.length;e++)++b,lb(d[e]);delete this.vc[c];this.Ho--}return b};f.kn=function(a,b,c,d){a=this.vc[a.toString()];var e=-1;a&&(e=Qb(a,b,c,d));return-1<e?a[e]:null};
f.lq=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return mb(this.vc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].Pm!=b))return!0;return!1})};function Qb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.Ul&&h.hk==b&&h.Pm==!!c&&h.kq==d)return e}return-1};var Sb;a:{var Tb=ba.navigator;if(Tb){var Ub=Tb.userAgent;if(Ub){Sb=Ub;break a}}Sb=""}function Vb(a){return-1!=Sb.indexOf(a)}function Wb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Xb(){return Vb("Opera")||Vb("OPR")}function Yb(){return Vb("Trident")||Vb("MSIE")}function Zb(){return Vb("Safari")&&!Vb("Chrome")&&!Vb("CriOS")&&!Vb("Android")}
function $b(){var a=Sb;if(Yb()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Xb())return a=Wb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Wb(a);return a[2]&&a[2][1]?a[2][1]:""};var ac,bc,cc;function dc(){return ba.navigator||null}var ec=Xb(),E=Yb(),fc=Vb("Gecko")&&-1==Sb.toLowerCase().indexOf("webkit")&&!(Vb("Trident")||Vb("MSIE")),gc=-1!=Sb.toLowerCase().indexOf("webkit"),hc,ic=dc();hc=ic&&ic.platform||"";ac=-1!=hc.indexOf("Mac");bc=-1!=hc.indexOf("Win");cc=-1!=hc.indexOf("Linux");var jc=!!dc()&&-1!=(dc().appVersion||"").indexOf("X11");function kc(){var a=ba.document;return a?a.documentMode:void 0}
var lc=function(){var a="",b;if(ec&&ba.opera)return a=ba.opera.version,ka(a)?a():a;fc?b=/rv\:([^\);]+)(\)|;)/:E?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:gc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Sb))?a[1]:"");return E&&(b=kc(),b>parseFloat(a))?String(b):a}(),mc={};function nc(a){return mc[a]||(mc[a]=0<=Za(lc,a))}function oc(a){return E&&pc>=a}var qc=ba.document,pc=qc&&E?kc()||("CSS1Compat"==qc.compatMode?parseInt(lc,10):5):void 0;var rc=!E||oc(9),sc=!E||oc(9),tc=E&&!nc("9");!gc||nc("528");fc&&nc("1.9b")||E&&nc("8")||ec&&nc("9.5")||gc&&nc("528");fc&&!nc("8")||E&&nc("9");function uc(){0!=vc&&(wc[na(this)]=this)}var vc=0,wc={};uc.prototype.Pj=!1;uc.prototype.g=function(){if(!this.Pj&&(this.Pj=!0,this.e(),0!=vc)){var a=na(this);delete wc[a]}};function xc(a,b){a.Sn||(a.Sn=[]);a.Sn.push(ca(void 0)?ta(b,void 0):b)}uc.prototype.e=function(){if(this.Sn)for(;this.Sn.length;)this.Sn.shift()()};function yc(a){a&&"function"==typeof a.g&&a.g()}function Ac(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Ac.apply(null,d):yc(d)}};function Cc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Pf=!1;this.Zn=!0}Cc.prototype.e=function(){};Cc.prototype.g=function(){};Cc.prototype.stopPropagation=function(){this.Pf=!0};Cc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Zn=!1};function Dc(a){a.preventDefault()};function Ec(a){Ec[" "](a);return a}Ec[" "]=ea;function Fc(a,b){Cc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Ru=!1;this.tc=null;a&&this.ia(a,b)}w(Fc,Cc);var Gc=[1,4,2];f=Fc.prototype;
f.ia=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(fc){var e;a:{try{Ec(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=gc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=gc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Ru=ac?a.metaKey:a.ctrlKey;this.state=a.state;this.tc=a;a.defaultPrevented&&this.preventDefault()};function Hc(a){return(rc?0==a.tc.button:"click"==a.type?!0:!!(a.tc.button&Gc[0]))&&!(gc&&ac&&a.ctrlKey)}
f.stopPropagation=function(){Fc.c.stopPropagation.call(this);this.tc.stopPropagation?this.tc.stopPropagation():this.tc.cancelBubble=!0};f.preventDefault=function(){Fc.c.preventDefault.call(this);var a=this.tc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,tc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.tF=function(){return this.tc};f.e=function(){};var Ic="closure_lm_"+(1E6*Math.random()|0),Jc={},Kc=0;function G(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)G(a,b[h],c,d,e);return null}c=Lc(c);return ib(a)?a.r(b,c,d,e):Mc(a,b,c,!1,d,e)}function Mc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Nc(a);l||(a[Ic]=l=new Pb(a));c=l.add(b,c,d,e,h);if(c.ar)return c;d=Oc();c.ar=d;d.src=a;d.hk=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Pc(b.toString()),d);Kc++;return c}
function Oc(){var a=Qc,b=sc?function(c){return a.call(b.src,b.hk,c)}:function(c){c=a.call(b.src,b.hk,c);if(!c)return c};return b}function Rc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Rc(a,b[h],c,d,e);return null}c=Lc(c);return ib(a)?a.Ut(b,c,d,e):Mc(a,b,c,!0,d,e)}function Sc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Sc(a,b[h],c,d,e);else c=Lc(c),ib(a)?a.eb(b,c,d,e):a&&(a=Nc(a))&&(b=a.kn(b,c,!!d,e))&&Tc(b)}
function Tc(a){if(t(a)||!a||a.Ul)return!1;var b=a.src;if(ib(b))return Rb(b.ng,a);var c=a.type,d=a.ar;b.removeEventListener?b.removeEventListener(c,d,a.Pm):b.detachEvent&&b.detachEvent(Pc(c),d);Kc--;(c=Nc(b))?(Rb(c,a),0==c.Ho&&(c.src=null,b[Ic]=null)):lb(a);return!0}function H(a){if(a)if(ib(a))a.removeAllListeners(void 0);else if(a=Nc(a)){var b=0,c;for(c in a.vc)for(var d=a.vc[c].concat(),e=0;e<d.length;++e)Tc(d[e])&&++b}}
function Uc(a,b){if(ib(a))return a.lq(b,void 0);var c=Nc(a);return!!c&&c.lq(b,void 0)}function Pc(a){return a in Jc?Jc[a]:Jc[a]="on"+a}function Vc(a,b,c,d){var e=1;if(a=Nc(a))if(b=a.vc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.Pm==c&&!h.Ul&&(e&=!1!==Wc(h,d))}return Boolean(e)}function Wc(a,b){var c=a.hk,d=a.kq||a.src;a.Cp&&Tc(a);return c.call(d,b)}
function Qc(a,b){if(a.Ul)return!0;if(!sc){var c=b||da("window.event"),d=new Fc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.Pf&&0<=l;l--)d.currentTarget=c[l],e&=Vc(c[l],h,!0,d);for(l=0;!d.Pf&&l<c.length;l++)d.currentTarget=c[l],e&=Vc(c[l],h,!1,d)}return e}return Wc(a,new Fc(b,this))}
function Nc(a){a=a[Ic];return a instanceof Pb?a:null}var Xc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Lc(a){return ka(a)?a:a[Xc]||(a[Xc]=function(b){return a.handleEvent(b)})};function Yc(){uc.call(this);this.ng=new Pb(this);this.eE=this;this.Xq=null}w(Yc,uc);Yc.prototype[hb]=!0;f=Yc.prototype;f.fv=function(a){this.Xq=a};f.addEventListener=function(a,b,c,d){G(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Sc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Xq;if(c)for(b=[];c;c=c.Xq)b.push(c);var c=this.eE,d=a.type||a;if(r(a))a=new Cc(a,c);else if(a instanceof Cc)a.target=a.target||c;else{var e=a;a=new Cc(d,c);xb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.Pf&&0<=k;k--)h=a.currentTarget=b[k],e=Zc(h,d,!0,a)&&e;a.Pf||(h=a.currentTarget=c,e=Zc(h,d,!0,a)&&e,a.Pf||(e=Zc(h,d,!1,a)&&e));if(b)for(k=0;!a.Pf&&k<b.length;k++)h=a.currentTarget=b[k],e=Zc(h,d,!1,a)&&e;return e};
f.e=function(){Yc.c.e.call(this);this.removeAllListeners();this.Xq=null};f.r=function(a,b,c,d){return this.ng.add(String(a),b,!1,c,d)};f.Ut=function(a,b,c,d){return this.ng.add(String(a),b,!0,c,d)};f.eb=function(a,b,c,d){return this.ng.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.ng?this.ng.Rf(a):0};
function Zc(a,b,c,d){b=a.ng.vc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.Ul&&k.Pm==c){var l=k.hk,n=k.kq||k.src;k.Cp&&Rb(a.ng,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.Zn}f.kn=function(a,b,c,d){return this.ng.kn(String(a),b,c,d)};f.lq=function(a,b){return this.ng.lq(ca(a)?String(a):void 0,b)};function $c(){Yc.call(this);this.n="base";this.Sc=window["X.counter"].TK();this.A=!1}w($c,Yc);$c.prototype.__defineGetter__("classname",function(){return this.n});$c.prototype.__defineGetter__("id",function(){return this.Sc});v("X.base",$c);function ad(a,b){$c.call(this);this.n="triplets";this.wf=Infinity;this.tf=-Infinity;this.xf=Infinity;this.uf=-Infinity;this.yf=Infinity;this.vf=-Infinity;this.cp=[0,0,0];this.Da=0;this.Gb=new Float32Array(a);null!=b&&(this.Gb=b.Gb.subarray(0,b.Gb.length),this.Da=this.Gb.length,this.wf=b.wf,this.tf=b.tf,this.xf=b.xf,this.uf=b.uf,this.yf=b.yf,this.vf=b.vf,this.cp=b.cp.slice())}w(ad,$c);f=ad.prototype;
f.add=function(a,b,c){this.wf=Math.min(this.wf,a);this.tf=Math.max(this.tf,a);this.xf=Math.min(this.xf,b);this.uf=Math.max(this.uf,b);this.yf=Math.min(this.yf,c);this.vf=Math.max(this.vf,c);this.cp=[(this.wf+this.tf)/2,(this.xf+this.uf)/2,(this.yf+this.vf)/2];this.A=!0;this.Gb[this.Da++]=a;this.Gb[this.Da++]=b;this.Gb[this.Da++]=c;return this.Da/3};f.resize=function(){if(this.Da!=this.Gb.length){var a=new Float32Array(this.Da);a.set(this.Gb.subarray(0,this.Da));this.Gb=a}};
f.get=function(a){a*=3;return[this.Gb[a],this.Gb[a+1],this.Gb[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Gb=new Float32Array(this.Gb.length);this.A=!0};ad.prototype.__defineGetter__("count",function(){this.resize();return this.Gb.length/3});ad.prototype.__defineGetter__("length",function(){this.resize();return this.Gb.length});v("X.triplets",ad);v("X.triplets.prototype.add",ad.prototype.add);v("X.triplets.prototype.resize",ad.prototype.resize);
v("X.triplets.prototype.get",ad.prototype.get);v("X.triplets.prototype.remove",ad.prototype.remove);v("X.triplets.prototype.clear",ad.prototype.clear);function bd(){$c.call(this);this.n="indexer";this.ts=[];this.Fd={}}w(bd,$c);bd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.Fd||(this.Fd[b]=this.ts.length,this.ts.push(a));return this.Fd[b]};bd.prototype.unique=function(){return this.ts};function cd(a){$c.call(this);this.n="file";this.np=a;this.A=!0}w(cd,$c);function dd(){this.dg=this.W=null}dd.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.W=null;else{if(g(a)){if(1==a.length){this.W=new cd(a[0]);return}this.W=Cb(a,function(a){var c=new J;c.W=new cd(a);return c})}else this.W=new cd(a);this.dg=null}});dd.prototype.__defineGetter__("file",function(){return this.W?g(this.W)?this.W.map(function(a){return a.W.np}):this.W.np:""});
dd.prototype.__defineGetter__("filedata",function(){return g(this.W)?this.W.map(function(a){return a.dg}):this.dg});dd.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.dg=null;if(g(a))if(1==a.length)this.dg=a[0];else{var b=this.W.length,c;for(c=0;c<b;c++)this.W[c].dg=a[c]}else this.dg=a});function ed(){return null};function fd(a,b,c){return Math.min(Math.max(a,b),c)};function gd(a,b){this.mb={};this.Xa=[];this.hh=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.vs(a)}f=gd.prototype;f.oh=function(){return this.hh};f.Zj=function(){hd(this);for(var a=[],b=0;b<this.Xa.length;b++)a.push(this.mb[this.Xa[b]]);return a};f.jn=function(){hd(this);return this.Xa.concat()};
f.Qs=function(a){for(var b=0;b<this.Xa.length;b++){var c=this.Xa[b];if(id(this.mb,c)&&this.mb[c]==a)return!0}return!1};f.sl=function(a,b){if(this===a)return!0;if(this.hh!=a.oh())return!1;var c=b||kd;hd(this);for(var d,e=0;d=this.Xa[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function kd(a,b){return a===b}f.Bn=function(){return 0==this.hh};f.clear=function(){this.mb={};this.hh=this.Xa.length=0};
f.remove=function(a){return id(this.mb,a)?(delete this.mb[a],this.hh--,this.Xa.length>2*this.hh&&hd(this),!0):!1};function hd(a){if(a.hh!=a.Xa.length){for(var b=0,c=0;b<a.Xa.length;){var d=a.Xa[b];id(a.mb,d)&&(a.Xa[c++]=d);b++}a.Xa.length=c}if(a.hh!=a.Xa.length){for(var e={},c=b=0;b<a.Xa.length;)d=a.Xa[b],id(e,d)||(a.Xa[c++]=d,e[d]=1),b++;a.Xa.length=c}}f.get=function(a,b){return id(this.mb,a)?this.mb[a]:b};f.set=function(a,b){id(this.mb,a)||(this.hh++,this.Xa.push(a));this.mb[a]=b};
f.vs=function(a){var b;a instanceof gd?(b=a.jn(),a=a.Zj()):(b=pb(a),a=ob(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.jn(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new gd(this)};f.Hv=function(){for(var a=new gd,b=0;b<this.Xa.length;b++){var c=this.Xa[b];a.set(this.mb[c],c)}return a};function id(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function ld(){$c.call(this);this.n="colortable";this.Fd=new gd;za(this,new dd)}w(ld,$c);ld.prototype.add=function(a,b,c,d,e,h){if(!(t(a)&&t(c)&&t(d)&&t(e)&&t(h)))throw Error("Invalid color table entry.");this.Fd.set(a,[b,c,d,e,h]);this.A=!0};ld.prototype.get=function(a){return this.Fd.get(a)};v("X.colortable.prototype.get",ld.prototype.get);function md(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}md.prototype.clone=function(){return new md(this.x,this.y,this.z)};md.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};md.prototype.Cv=function(){return[this.x,this.y,this.z]};function K(a,b,c){this.x=a;this.y=b;this.z=c}w(K,md);f=K.prototype;f.clone=function(){return new K(this.x,this.y,this.z)};f.Kf=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.pb=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.Kf())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.ic=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.sl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function nd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function od(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function pd(a,b){return new K(a.x+b.x,a.y+b.y,a.z+b.z)}function qd(a,b){return new K(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.K=K;f=A.K.prototype;f.clone=K.prototype.clone;f.Kf=K.prototype.Kf;f.scale=K.prototype.scale;f.pb=K.prototype.pb;f.add=K.prototype.add;f.ic=K.prototype.ic;f.normalize=function(){var a=this.Kf();return 0==a?this.scale(0):this.scale(1/a)};A.K.si=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.K.Nj=qd;A.K.et=nd;A.K.Bq=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new K(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.K.prototype.__defineGetter__("xx",function(){return this.x});
A.K.prototype.__defineGetter__("yy",function(){return this.y});A.K.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.K);v("X.vector.prototype.clone",A.K.prototype.clone);v("X.vector.prototype.magnitude",A.K.prototype.Kf);v("X.vector.prototype.scale",A.K.prototype.scale);v("X.vector.prototype.invert",A.K.prototype.pb);v("X.vector.prototype.normalize",A.K.prototype.normalize);v("X.vector.prototype.add",A.K.prototype.add);v("X.vector.prototype.subtract",A.K.prototype.ic);
v("X.vector.dot",A.K.si);v("X.vector.cross",A.K.Nj);v("X.vector.distance",A.K.et);v("X.vector.lerp",A.K.Bq);function rd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}rd.prototype.BYTES_PER_ELEMENT=8;rd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};rd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{rd.BYTES_PER_ELEMENT=8}catch(sd){}rd.prototype.BYTES_PER_ELEMENT=rd.prototype.BYTES_PER_ELEMENT;rd.prototype.set=rd.prototype.set;rd.prototype.toString=rd.prototype.toString;v("Float64Array",rd)};function td(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}td.prototype.BYTES_PER_ELEMENT=4;td.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};td.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(td.BYTES_PER_ELEMENT=4,td.prototype.BYTES_PER_ELEMENT=td.prototype.BYTES_PER_ELEMENT,td.prototype.set=td.prototype.set,td.prototype.toString=td.prototype.toString,v("Float32Array",td));function ud(){return new Float32Array(3)}function vd(a,b,c){var d=ud();d[0]=a;d[1]=b;d[2]=c;return d}function wd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function xd(){return new Float32Array(4)}function yd(a,b,c,d){var e=xd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function zd(){return new Float32Array(16)}function Ad(){var a=zd();a[0]=a[5]=a[10]=a[15]=1;return a}function Bd(a,b,c,d,e,h,k,l,n,m,q,p,s,u,z,y,I){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=m;a[9]=q;a[10]=p;a[11]=s;a[12]=u;a[13]=z;a[14]=y;a[15]=I;return a}function Cd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Dd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function Ed(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Fd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Gd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Hd(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],m=a[6],q=a[7],p=a[8],s=a[9],u=a[10],z=a[11],y=a[12],I=a[13],R=a[14];a=a[15];var O=b[0],F=b[1],P=b[2],W=b[3],T=b[4],ua=b[5],la=b[6],wa=b[7],Ma=b[8],Ga=b[9],Na=b[10],ja=b[11],xa=b[12],qa=b[13],Bc=b[14];b=b[15];c[0]=d*O+l*F+p*P+y*W;c[1]=e*O+n*F+s*P+I*W;c[2]=h*O+m*F+u*P+R*W;c[3]=k*O+q*F+z*P+a*W;c[4]=d*T+l*ua+p*la+y*wa;c[5]=e*T+n*ua+s*la+I*wa;c[6]=h*T+m*ua+u*la+R*wa;c[7]=k*T+q*ua+z*la+a*wa;c[8]=d*Ma+l*Ga+p*Na+y*ja;c[9]=e*Ma+n*Ga+s*Na+I*ja;
c[10]=h*Ma+m*Ga+u*Na+R*ja;c[11]=k*Ma+q*Ga+z*Na+a*ja;c[12]=d*xa+l*qa+p*Bc+y*b;c[13]=e*xa+n*qa+s*Bc+I*b;c[14]=h*xa+m*qa+u*Bc+R*b;c[15]=k*xa+q*qa+z*Bc+a*b;return c}
function Id(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=a[8],p=a[9],s=a[10],u=a[11],z=a[12],y=a[13],I=a[14],R=a[15],O=c*l-d*k,F=c*n-e*k,P=c*m-h*k,W=d*n-e*l,T=d*m-h*l,ua=e*m-h*n,la=q*y-p*z,wa=q*I-s*z,Ma=q*R-u*z,Ga=p*I-s*y,Na=p*R-u*y,ja=s*R-u*I,xa=O*ja-F*Na+P*Ga+W*Ma-T*wa+ua*la;if(0==xa)return!1;xa=1/xa;b[0]=(l*ja-n*Na+m*Ga)*xa;b[1]=(-d*ja+e*Na-h*Ga)*xa;b[2]=(y*ua-I*T+R*W)*xa;b[3]=(-p*ua+s*T-u*W)*xa;b[4]=(-k*ja+n*Ma-m*wa)*xa;b[5]=(c*ja-e*Ma+h*wa)*xa;b[6]=(-z*ua+I*P-R*F)*xa;b[7]=
(q*ua-s*P+u*F)*xa;b[8]=(k*Na-l*Ma+m*la)*xa;b[9]=(-c*Na+d*Ma-h*la)*xa;b[10]=(z*T-y*P+R*O)*xa;b[11]=(-q*T+p*P-u*O)*xa;b[12]=(-k*Ga+l*wa-n*la)*xa;b[13]=(c*Ga-d*wa+e*la)*xa;b[14]=(-z*W+y*F-I*O)*xa;b[15]=(q*W-p*F+s*O)*xa;return!0}function Jd(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Kd(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Ld(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.o={};A.o.aA=function(a,b,c,d){c=c.ic(b);c.normalize();d=A.K.Nj(c,d);d.normalize();var e=A.K.Nj(d,c);e.normalize();c.pb();Ed(a,0,d.x,d.y,d.z,0);Ed(a,1,e.x,e.y,e.z,0);Ed(a,2,c.x,c.y,c.z,0);Ld(a,-b.x,-b.y,-b.z);return a};A.o.zb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.K((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.o.JK=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Gd(a,b,d);Gd(a,c,e);Fd(a,b,e);Fd(a,c,d);return a};A.o.IK=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Dd(a,b,d);Dd(a,c,e);Cd(a,b,e);Cd(a,c,d);return a};A.o.un=Ad;A.o.clone=function(a){var b=zd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.o.Hv=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.o.RE=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],m=a[8],q=a[9],p=a[10],s=a[11],u=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(p*a-s*y)-(b*l-d*h)*(q*a-s*z)+(b*n-e*h)*(q*y-p*z)+(c*l-d*k)*(m*a-s*u)-(c*n-e*k)*(m*y-p*u)+(d*n-e*l)*(m*z-q*u)};A.o.pb=Id;A.o.$t=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Bd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.o.YH=function(a,b,c,d,e,h,k){return Bd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.o.ZH=function(a,b,c,d,e,h,k){return Bd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.o.multiply=Hd;A.o.kA=Kd;A.o.translate=Ld;A.o.scale=function(a,b,c,d){return Bd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.o.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],m=a[4],q=a[5],p=a[6],s=a[7],u=a[8],z=a[9],y=a[10],I=a[11],R=Math.cos(b),O=Math.sin(b),F=1-R;b=c*c*F+R;var P=c*d*F+e*O,W=c*e*F-d*O,T=c*d*F-e*O,ua=d*d*F+R,la=d*e*F+c*O,wa=c*e*F+d*O;c=d*e*F-c*O;e=e*e*F+R;return Bd(a,h*b+m*P+u*W,k*b+q*P+z*W,l*b+p*P+y*W,n*b+s*P+I*W,h*T+m*ua+u*la,k*T+q*ua+z*la,l*T+p*ua+y*la,n*T+s*ua+I*la,h*wa+m*c+u*e,k*wa+q*c+z*e,l*wa+p*c+y*e,n*wa+s*c+I*e,a[12],a[13],a[14],a[15])};
A.o.dr=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[4]=c*q+k*p;a[5]=d*q+l*p;a[6]=e*q+n*p;a[7]=h*q+m*p;a[8]=c*-p+k*q;a[9]=d*-p+l*q;a[10]=e*-p+n*q;a[11]=h*-p+m*q;return a};A.o.er=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],m=a[11],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*-p;a[1]=d*q+l*-p;a[2]=e*q+n*-p;a[3]=h*q+m*-p;a[8]=c*p+k*q;a[9]=d*p+l*q;a[10]=e*p+n*q;a[11]=h*p+m*q;return a};
A.o.fr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],m=a[7],q=Math.cos(b),p=Math.sin(b);a[0]=c*q+k*p;a[1]=d*q+l*p;a[2]=e*q+n*p;a[3]=h*q+m*p;a[4]=c*-p+k*q;a[5]=d*-p+l*q;a[6]=e*-p+n*q;a[7]=h*-p+m*q;return a};v("X.matrix.identity",A.o.un);v("X.matrix.clone",A.o.clone);v("X.matrix.transpose",A.o.Hv);v("X.matrix.determinant",A.o.RE);v("X.matrix.invert",A.o.pb);v("X.matrix.multiply",A.o.multiply);v("X.matrix.multiplyByVector",A.o.zb);v("X.matrix.multiplyByVec4",A.o.kA);
v("X.matrix.makePerspective",A.o.$t);v("X.matrix.makeFrustum",A.o.YH);v("X.matrix.makeOrtho",A.o.ZH);v("X.matrix.makeLookAt",A.o.aA);v("X.matrix.translate",A.o.translate);v("X.matrix.scale",A.o.scale);v("X.matrix.rotate",A.o.rotate);v("X.matrix.rotateX",A.o.dr);v("X.matrix.rotateY",A.o.er);v("X.matrix.rotateZ",A.o.fr);v("X.matrix.swapRows",A.o.JK);v("X.matrix.swapCols",A.o.IK);function Nd(){$c.call(this);this.n="transform";this.kb=A.o.un()}w(Nd,$c);Nd.prototype.__defineGetter__("matrix",function(){return this.kb});Nd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.kb=a;this.T()});f=Nd.prototype;f.dr=function(a){if(!t(a)||-360>a||360<a)throw Error("Invalid angle.");A.o.dr(this.kb,a*Math.PI/180);this.T()};
f.er=function(a){if(!t(a)||-360>a||360<a)throw Error("Invalid angle.");A.o.er(this.kb,a*Math.PI/180);this.T()};f.fr=function(a){if(!t(a)||-360>a||360<a)throw Error("Invalid angle.");A.o.fr(this.kb,a*Math.PI/180);this.T()};f.XB=function(a){if(!t(a))throw Error("Invalid distance.");A.o.translate(this.kb,a,0,0);this.T()};f.YB=function(a){if(!t(a))throw Error("Invalid distance.");A.o.translate(this.kb,0,a,0);this.T()};
f.ZB=function(a){if(!t(a))throw Error("Invalid distance.");A.o.translate(this.kb,0,0,a);this.T()};function Od(a,b,c){a.kb[b+4*c]*=-1;a.T()}f.lF=function(){Od(this,0,0)};f.mF=function(){Od(this,1,1)};f.nF=function(){Od(this,2,2)};f.T=function(){this.A=!0};v("X.transform",Nd);v("X.transform.prototype.rotateX",Nd.prototype.dr);v("X.transform.prototype.rotateY",Nd.prototype.er);v("X.transform.prototype.rotateZ",Nd.prototype.fr);v("X.transform.prototype.translateX",Nd.prototype.XB);
v("X.transform.prototype.translateY",Nd.prototype.YB);v("X.transform.prototype.translateZ",Nd.prototype.ZB);v("X.transform.prototype.flipX",Nd.prototype.lF);v("X.transform.prototype.flipY",Nd.prototype.mF);v("X.transform.prototype.flipZ",Nd.prototype.nF);v("X.transform.prototype.modified",Nd.prototype.T);function Pd(){$c.call(this);this.n="texture";this.ci=this.sf=this.W=null;this.ls=this.ms=0;this.Kw=!1;za(this,new dd)}w(Pd,$c);Pd.prototype.__defineSetter__("rawData",function(a){this.ci=a;this.A=!0});Pd.prototype.__defineSetter__("rawDataHeight",function(a){this.ls=a;this.A=!0});Pd.prototype.__defineSetter__("rawDataWidth",function(a){this.ms=a;this.A=!0});Pd.prototype.__defineSetter__("grayscale",function(a){this.Kw=a;this.A=!0});v("X.texture",Pd);function Qd(){this.qd=Rd;this.Rb=new Nd;this.ya=[1,1,1];this.hl=this.Ja=this.oc=this.R=this.s=null;this.cl=[];this.ab=!0;this.bl=this.zm=1;this.Uk=null;this.qm=!1;this.yc=1;this.Rc=0;this.ym=!0}var Rd="TRIANGLES";Qd.prototype.__defineSetter__("type",function(a){return this.qd=a});Qd.prototype.__defineGetter__("type",function(){return this.qd});Qd.prototype.__defineGetter__("texture",function(){this.Ja||(this.Ja=new Pd);return this.Ja});Qd.prototype.__defineGetter__("transform",function(){return this.Rb});
Qd.prototype.__defineGetter__("points",function(){return this.s});Qd.prototype.__defineSetter__("points",function(a){this.s=a});Qd.prototype.__defineGetter__("normals",function(){return this.R});Qd.prototype.__defineSetter__("normals",function(a){this.R=a});Qd.prototype.__defineGetter__("colors",function(){return this.oc});Qd.prototype.__defineSetter__("colors",function(a){this.oc=a});Qd.prototype.__defineGetter__("color",function(){return this.ya});
Qd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.ya=a;this.A=!0});Qd.prototype.__defineGetter__("opacity",function(){return this.yc});Qd.prototype.__defineSetter__("opacity",function(a){if(!t(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.yc=a;this.A=!0});Qd.prototype.__defineGetter__("caption",function(){return this.Uk});
Qd.prototype.__defineSetter__("caption",function(a){this.Uk=a;this.A=!0});Qd.prototype.__defineGetter__("visible",function(){return this.ab});Qd.prototype.__defineSetter__("visible",function(a){for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.ab=a;this.A=!0});Qd.prototype.__defineGetter__("pointsize",function(){return this.zm});Qd.prototype.__defineSetter__("pointsize",function(a){if(!t(a))throw Error("Invalid point size.");this.zm=a;this.A=!0});
Qd.prototype.__defineGetter__("magicmode",function(){return this.qm});Qd.prototype.__defineSetter__("magicmode",function(a){if(!ia(a))throw Error("Invalid magic mode setting.");this.qm=a;this.A=!0});Qd.prototype.__defineGetter__("linewidth",function(){return this.bl});Qd.prototype.__defineSetter__("linewidth",function(a){if(!t(a))throw Error("Invalid line width.");this.bl=a;this.A=!0});Qd.prototype.__defineGetter__("pickable",function(){return this.ym});
Qd.prototype.__defineSetter__("pickable",function(a){if(!ia(a))throw Error("Invalid pickable setting.");this.ym=a;this.A=!0});Qd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.hl});Qd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Sd(){this.Gd=Infinity;this.jb=this.Fb=-Infinity;this.lb=Infinity;this.Zh=[0,0,0];this.Xh=[1,1,1]}Sd.prototype.__defineGetter__("lowerThreshold",function(){return this.jb});Sd.prototype.__defineSetter__("lowerThreshold",function(a){this.jb=a});Sd.prototype.__defineGetter__("upperThreshold",function(){return this.lb});Sd.prototype.__defineSetter__("upperThreshold",function(a){this.lb=a});Sd.prototype.__defineGetter__("min",function(){return this.Gd});Sd.prototype.__defineGetter__("max",function(){return this.Fb});
Sd.prototype.__defineGetter__("minColor",function(){return this.Zh});Sd.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.Zh=a});Sd.prototype.__defineGetter__("maxColor",function(){return this.Xh});Sd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.Xh=a});function Td(){$c.call(this);this.n="scalars";this.nm=this.Qa=null;this.Xw=!0;this.as=0;za(this,new dd);za(this,new Sd);this.Zh=[0,1,0];this.Xh=[1,0,0]}w(Td,$c);Td.prototype.__defineGetter__("array",function(){return this.Qa});Td.prototype.__defineSetter__("array",function(a){this.nm=this.Qa=a;this.A=!0});Td.prototype.__defineGetter__("interpolation",function(){return this.as});Td.prototype.__defineSetter__("interpolation",function(a){this.as=a});v("X.scalars",Td);function Vd(a){$c.call(this);this.n="object";this.i=[];this.Ra=this.md=null;za(this,new Qd);null!=a&&this.Kj(a)}w(Vd,$c);
Vd.prototype.Kj=function(a){this.qd=a.qd;this.Rb=new Nd;this.Rb.kb=new Float32Array(a.Rb.kb);this.ya=a.ya.slice();a.s&&(this.s=new ad(a.s.length,a.s));a.R&&(this.R=new ad(a.R.length,a.R));a.oc&&(this.oc=new ad(a.oc.length,a.oc));this.Ja=a.Ja;this.hl=a.hl;a.W&&(this.W=new cd((new String(a.W.np)).toString()));this.yc=a.yc;this.i.length=0;var b=a.i;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.i.push(new A[b[d].n](b[d]));this.ab=a.ab;this.zm=a.zm;this.bl=a.bl;a.Uk&&(this.Uk=(new String(a.Uk)).toString());
this.qm=a.qm;this.ym=a.ym;this.cl=a.cl.slice();this.A=!0};Vd.prototype.__defineGetter__("colortable",function(){this.md||(this.md=new ld);return this.md});Vd.prototype.__defineGetter__("scalars",function(){this.Ra||(this.Ra=new Td);return this.Ra});Vd.prototype.__defineGetter__("children",function(){return this.i});Vd.prototype.T=function(){var a=new Wd;a.Ea=this;this.dispatchEvent(a)};Vd.prototype.remove=function(){var a=new Xd;a.Ea=this;this.dispatchEvent(a)};
function Yd(a,b){if(!(null!=a&&null!=b&&a instanceof Vd&&b instanceof Vd))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.yc?-1:1==b.yc?1:null!=a.Rc&&null!=b.Rc&&a.Rc>b.Rc?-1:1}v("X.object",Vd);v("X.object.prototype.modified",Vd.prototype.T);v("X.object.prototype.remove",Vd.prototype.remove);function Zd(a){Cc.call(this,a);this.n="event"}w(Zd,Cc);function $d(a){return a+"_"+B()}var ae=$d("pan"),be=$d("rotate"),ce=$d("zoom"),de=$d("scroll");$d("render");var ee=$d("resetview"),fe=$d("windowlevel"),ge=$d("modified"),he=$d("remove"),ie=$d("progress"),ke=$d("hover"),le=$d("hover_end"),me=$d("computing"),ne=$d("computing_end"),oe=$d("computing_progress");function pe(){Zd.call(this,fe);this.fs=this.us=0}w(pe,Zd);function qe(){Zd.call(this,ae);this.Rc=new A.K(0,0,0)}w(qe,Zd);
function ue(){Zd.call(this,be);this.Rc=new A.K(0,0,0)}w(ue,Zd);function ve(){Zd.call(this,ce);this.rf=this.eg=!1}w(ve,Zd);function we(){Zd.call(this,de);this.Hb=!1}w(we,Zd);function xe(){Zd.call(this,ke);this.vp=this.tp=0}w(xe,Zd);function ye(){Zd.call(this,le)}w(ye,Zd);function ze(){Zd.call(this,ee)}w(ze,Zd);function Wd(){Zd.call(this,ge);this.na=this.Ea=null}w(Wd,Zd);function Xd(){Zd.call(this,he);this.na=this.Ea=null}w(Xd,Zd);function Ae(){Zd.call(this,ie);this.yj=0}w(Ae,Zd);
function Be(){Zd.call(this,me);this.Ea=null}w(Be,Zd);function Ce(){Zd.call(this,oe);this.yj=0}w(Ce,Zd);function De(){Zd.call(this,ne);this.Ea=null}w(De,Zd);v("X.event.events.PAN",ae);v("X.event.events.ROTATE",be);v("X.event.events.ZOOM",ce);v("X.event.events.SCROLL",de);function Ee(){$c.call(this);this.n="parser";this._data=null;this.Da=0;this.YD=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.jp=!0}w(Ee,$c);Ee.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Fe(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Ge(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ee.prototype.f=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.Da,this.Da+=b*c));if(this.YD!=this.jp)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function He(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=yd(0,0,0,1),e=xd();Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,0,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,b[1]-
1,0,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,0,0,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,b[1]-1,0,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,0,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(0,b[1]-1,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=yd(b[0]-1,b[1]-1,b[2]-1,1);Kd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ie(a,b){var c=Ad();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=ud(),h=a[0],k=a[1],l=a[2],n=b[0],m=b[1],q=b[2];e[0]=k*q-l*m;e[1]=l*n-h*q;e[2]=h*m-k*n;wd(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];Ed(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);Ed(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);Ed(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=zd();Id(c,d);return[c,d]}
function Je(a,b,c,d,e,h,k,l,n){var m=new Ke;wd(c,c);for(var q=[],p=[],s=0;6>s;s++)for(var u=Math.floor(s/2),z=(u+1)%3,y=(u+2)%3,I=(4+2*u)%6,R=0;2>R;R++){var O=(2+R+2*u)%6,F=-(c[u]*(e[s]-a[u])+c[z]*(e[O]-a[z]))/c[y]+a[y];if(F>=e[I]&&F<=e[I+1]||F<=e[I]&&F>=e[I+1]){var P=[];P[u]=e[s];P[z]=e[O];P[y]=F;q.push(P)}else P=[],P[u]=e[s],P[z]=e[O],P[y]=F,p.push(P)}a=vd(0,0,1);a=Ie(c,a);e=a[0];a=a[1];u=[];for(p=0;p<q.length;++p)s=yd(q[p][0],q[p][1],q[p][2],1),z=xd(),Kd(e,s,z),u.push([z[0],z[1],z[2]]);e=vd(1,
0,0);q=ud();Jd(a,e,q);p=vd(0,1,0);e=ud();Jd(a,p,e);s=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(p=p=0;p<u.length;++p)u[p][0]<s[0]&&(s[0]=u[p][0]),u[p][0]>s[1]&&(s[1]=u[p][0]),u[p][1]<s[2]&&(s[2]=u[p][1]),u[p][1]>s[3]&&(s[3]=u[p][1]),u[p][2]<s[4]&&(s[4]=u[p][2]),u[p][2]>s[5]&&(s[5]=u[p][2]);p=yd(s[0]+(s[1]-s[0])/2,s[2]+(s[3]-s[2])/2,s[4]+(s[5]-s[4])/2,0);u=xd();Hd(a,p,u);z=Math.floor(s[0]);y=Math.ceil(s[1]);z==y&&y++;I=y-z;R=Math.floor(s[2]);
O=Math.ceil(s[3]);F=O-R;P=b[0];b=b[1];var p=Math.ceil(I/P),W=Math.ceil(F/b),T=new Uint8Array(4*p*W),ua=new Pd;ua.ms=p;ua.ls=W;var W=xd(),la=yd(0,0,s[4],1),wa=zd();Hd(k.PD,a,wa);for(var Ma=O-1E-7,Ga=y-1E-7,Na=0,ja=0,xa=0,qa=R,qa=R;qa<=Ma;qa+=b)for(xa++,ja=0,la[1]=qa,p=z;p<=Ga;p+=P){ja++;la[0]=p;Kd(wa,la,W);var Bc=4*Na,re=Math.floor(W[2]),se=Math.floor(W[1]),te=Math.floor(W[0]);if(0<=te&&te<k.$a[0]&&0<=se&&se<k.$a[1]&&0<=re&&re<k.$a[2]){var Ud=h[re][se][te],Eh=te=se=re=0;n?((Ud=n.get(Ud))||(Ud=[0,.61,
0,0,1]),re=255*Ud[1],se=255*Ud[2],te=255*Ud[3],Eh=255*Ud[4]):(re=se=te=Ud/k.Fb*255,Eh=255);T[Bc]=re;T[++Bc]=se;T[++Bc]=te;T[++Bc]=Eh}else T[Bc]=0,T[++Bc]=0,T[++Bc]=0,T[++Bc]=0;Na++}ua.ci=T;m.Ja=ua;m.dE=s;m.RD=a;m.QD=wa;m.XD=R;m.EN=O;m.cE=z;m.FN=y;m.Mw=ja;m.Lw=xa;m.ah=P;m.Ka=I;m.Ug=b;m.za=F;m.Ia=[u[0],u[1],u[2]];m.Xk=[c[0],c[1],c[2]];m.op=[q[0],q[1],q[2]];m.Hb=[e[0],e[1],e[2]];m.ab=!1;m.$g=k;m.Tg=null==k.$g||l?!0:!1;m.Tk=d;m.Qe();m.ab=!1;return m}
function Le(a,b,c,d){var e;e=d.nc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,p=(2+2*n)%6,s=(4+2*n)%6,u=1/c[n]*(e[l]-b[n]);if(Infinity!=u&&-Infinity!=u){var z=b[m]+c[m]*u,u=b[q]+c[q]*u;z>=e[p]&&z<=e[p+1]&&u>=e[s]&&u<=e[s+1]?(p=[],p[n]=e[l],p[m]=z,p[q]=u,h.push(p)):(p=[],p[n]=e[l],p[m]=z,p[q]=u,k.push(p))}}e=[h,k];b=e[0];d.d[a].B=e;e=nd(new K(b[0][0],b[0][1],b[0][2]),new K(b[1][0],b[1][1],b[1][2]));d.d[a].DN=e;h=vd(0,0,1);k=Ie(c,h)[0];l=yd(d.Yr[0],d.Yr[1],d.Yr[2],0);h=
xd();Kd(k,l,h);k=xd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.d[a].od=[Math.abs(h[0]),Math.abs(h[1])];d.d[a].fl=h[2];d.d[a].Fa=k;e=Math.floor(Math.abs(e/h[2]));d.Bm[a]=e+1;d.d[a].S=e+1;d.d[a].B[0][0][0]>d.d[a].B[0][1][0]?0<k[0]&&(e=d.d[a].B[0][0],d.d[a].B[0][0]=d.d[a].B[0][1],d.d[a].B[0][1]=e):d.d[a].B[0][0][0]<d.d[a].B[0][1][0]?0>k[0]&&(e=d.d[a].B[0][0],d.d[a].B[0][0]=d.d[a].B[0][1],d.d[a].B[0][1]=e):d.d[a].B[0][0][1]>d.d[a].B[0][1][1]?
0<k[1]&&(e=d.d[a].B[0][0],d.d[a].B[0][0]=d.d[a].B[0][1],d.d[a].B[0][1]=e):d.d[a].B[0][0][1]<d.d[a].B[0][1][1]?0>k[1]&&(e=d.d[a].B[0][0],d.d[a].B[0][0]=d.d[a].B[0][1],d.d[a].B[0][1]=e):d.d[a].B[0][0][2]>d.d[a].B[0][1][2]?0<k[2]&&(e=d.d[a].B[0][0],d.d[a].B[0][0]=d.d[a].B[0][1],d.d[a].B[0][1]=e):d.d[a].B[0][0][2]<d.d[a].B[0][1][2]&&0>k[2]&&(e=d.d[a].B[0][0],d.d[a].B[0][0]=d.d[a].B[0][1],d.d[a].B[0][1]=e);d.d[a].is=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Me(a,b){var c;c=b._data;for(var d=b.$a,e=b.Fb,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,m=0,q=0,p=0,s=0,p=0;p<d[2];p++){var u=c.subarray(p*l,(p+1)*l),s=0;k[p]=Array(d[1]);h[p]=Array(d[1]);for(q=0;q<d[1];q++)for(k[p][q]=new c.constructor(d[0]),h[p][q]=new c.constructor(d[0]),m=0;m<d[0];m++)n=u[s],k[p][q][m]=n/e*255,h[p][q][m]=n,s++}c=[h,k];b.Qb=c[0];b.CN=c[1];A.Dd(a.n+".reslice");b.Va=null!=b.m;b.md&&(b.mm=b.md.Fd);b.vO=[0,0,0];b.ma=[b.ld[0]+(b.Sg[0]-1)/2,b.ld[1]+(b.Sg[1]-1)/2,b.ld[2]+(b.Sg[2]-
1)/2];b.nc=[Math.min(b.ld[0],b.ld[0]+b.Sg[0]-1),Math.max(b.ld[0],b.ld[0]+b.Sg[0]-1),Math.min(b.ld[1],b.ld[1]+b.Sg[1]-1),Math.max(b.ld[1],b.ld[1]+b.Sg[1]-1),Math.min(b.ld[2],b.ld[2]+b.Sg[2]-1),Math.max(b.ld[2],b.ld[2]+b.Sg[2]-1)];b.d=[{},{},{}];c=vd(b.ma[0],b.ma[1],b.ma[2]);b.d[0].Cm=c;d=vd(1,0,0);wd(d,d);b.d[0].v=d;e=[1,0,0];b.d[0].ya=e;Le(0,c,d,b);b.i[0].i=Array(b.d[0].S);c[0]=b.d[0].B[0][0][0]+b.d[0].Fa[0]*Math.floor(b.d[0].S/2);c[1]=b.d[0].B[0][0][1]+b.d[0].Fa[1]*Math.floor(b.d[0].S/2);c[2]=b.d[0].B[0][0][2]+
b.d[0].Fa[2]*Math.floor(b.d[0].S/2);c=Je(c,b.d[0].od,b.d[0].v,b.d[0].ya,b.nc,b.Qb,b,b.Va,b.mm);b.Va&&(c.m=b.m.i[0].i[Math.floor(b.d[0].S/2)].Ja);b.i[0].i[Math.floor(b.d[0].S/2)]=c;b.Vg=Math.floor(b.d[0].S/2);b.Yk=Math.floor(b.d[0].S/2);c=vd(b.ma[0],b.ma[1],b.ma[2]);b.d[1].Cm=c;d=vd(0,1,0);wd(d,d);b.d[1].v=d;e=[0,1,0];b.d[1].ya=e;Le(1,c,d,b);b.i[1].i=Array(b.d[1].S);c[0]=b.d[1].B[0][0][0]+b.d[1].Fa[0]*Math.floor(b.d[1].S/2);c[1]=b.d[1].B[0][0][1]+b.d[1].Fa[1]*Math.floor(b.d[1].S/2);c[2]=b.d[1].B[0][0][2]+
b.d[1].Fa[2]*Math.floor(b.d[1].S/2);c=Je(c,b.d[1].od,b.d[1].v,b.d[1].ya,b.nc,b.Qb,b,b.Va,b.mm);b.Va&&(c.m=b.m.i[1].i[Math.floor(b.d[1].S/2)].Ja);b.i[1].i[Math.floor(b.d[1].S/2)]=c;b.Wg=Math.floor(b.d[1].S/2);b.Zk=Math.floor(b.d[1].S/2);c=vd(b.ma[0],b.ma[1],b.ma[2]);b.d[2].Cm=c;d=vd(0,0,1);wd(d,d);b.d[2].v=d;e=[0,.392,.804];b.d[2].ya=e;Le(2,c,d,b);b.i[2].i=Array(b.d[2].S);c[0]=b.d[2].B[0][0][0]+b.d[2].Fa[0]*Math.floor(b.d[2].S/2);c[1]=b.d[2].B[0][0][1]+b.d[2].Fa[1]*Math.floor(b.d[2].S/2);c[2]=b.d[2].B[0][0][2]+
b.d[2].Fa[2]*Math.floor(b.d[2].S/2);c=Je(c,b.d[2].od,b.d[2].v,b.d[2].ya,b.nc,b.Qb,b,b.Va,b.mm);b.Va&&(c.m=b.m.i[2].i[Math.floor(b.d[2].S/2)].Ja);b.i[2].i[Math.floor(b.d[2].S/2)]=c;b.Xg=Math.floor(b.d[2].S/2);b.$k=Math.floor(b.d[2].S/2);A.hd(a.n+".reslice");return b.Qb};function Ne(){Ee.call(this);this.n="parserOFF"}w(Ne,Ee);
Ne.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Ge(h,n,a);n=a+1;return b}n=e;return Ge(h,n,e-1)}A.Dd(this.n+".parse");this._data=c;var e=c.byteLength,h=this.f("uchar",e);c=[];b.s=new ad(e);b.R=new ad(e);for(var k=b.s,l=b.R,n=0,m=d(),m=("OFF"===m?d():m).split(" "),q=m[0],m=m[1];q--;){var p=d(),p=p.split(" ");c.push([parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])])}for(;m--;){var p=d(),p=p.split(" "),
s=c[parseInt(p[1],10)],q=c[parseInt(p[2],10)],p=c[parseInt(p[3],10)];k.add(s[0],s[1],s[2]);k.add(q[0],q[1],q[2]);k.add(p[0],p[1],p[2]);s=new K(s[0],s[1],s[2]);p=new K(p[0],p[1],p[2]);q=qd((new K(q[0],q[1],q[2])).ic(s),p.ic(s));q.normalize();l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z);l.add(q.x,q.y,q.z)}A.hd(this.n+".parse");c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};v("X.parserOFF",Ne);v("X.parserOFF.prototype.parse",Ne.prototype.parse);function Oe(){Ee.call(this);this.n="parserDCM"}w(Oe,Ee);
Oe.prototype.parse=function(a,b,c){b.Qg={};b.Qg.Kn=0;this.Ah(c,b);if(null==b.W.length||b.ta.length==b.W.length){b.Qg.Kn=b.W.length;var d={};c={};for(var e=0;e<b.ta.length;e++)d.hasOwnProperty(b.ta[e].series_instance_uid)||(d[b.ta[e].series_instance_uid]=[],c[b.ta[e].series_instance_uid]={}),c[b.ta[e].series_instance_uid].hasOwnProperty(b.ta[e].sop_instance_uid)||(c[b.ta[e].series_instance_uid][b.ta[e].sop_instance_uid]=!0,d[b.ta[e].series_instance_uid].push(b.ta[e]));var h=Object.keys(d)[0],e=d[h],
k=e.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],
e[0].image_orientation_patient[5]),d=qd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&
(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],m=d[1]-n[1],q=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+m*m+q*q);break;case "instance_number":e[0].pixel_spacing[2]=1;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,p=e[k-1].image_position_patient,h=p[0]-n[0],m=p[1]-
n[1],q=p[2]-n[2],h=Math.sqrt(h*h+m*m+q*q),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;p=null;switch(e[0].Ej){case 8:p=new Uint8Array(h);break;case 16:p=new Uint16Array(h);break;case 32:p=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Yg=e[0].pixel_spacing;
for(var s=0;s<k;s++){var u=e[s].data,h=0;switch(l){case "image_position_patient":h=e[s].image_position_patient[0]-e[0].image_position_patient[0];m=e[s].image_position_patient[1]-e[0].image_position_patient[1];q=e[s].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+m*m+q*q)/e[0].pixel_spacing[2];break;case "instance_number":h=e[s].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(u,h*n)}c.data=p;b._data=p;b.$a=
[e[0].columns,e[0].rows,d];c.TE=b.$a;d=Fe(p);k=d[0];d=d[1];c.min=b.Gd=b.yb=k;c.max=b.Fb=b.xb=d;-Infinity==b.jb&&(b.jb=k);Infinity==b.lb&&(b.lb=d);m=e[0].image_position_patient;k=zd();switch(l){case "image_position_patient":d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=qd(d,h);Ed(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],
-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-m[0]);Ed(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-m[1]);Ed(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],m[2]);Ed(k,3,0,0,0,1);break;case "instance_number":Ed(k,0,-1,0,0,-m[0]);Ed(k,1,-0,-1,-0,-m[1]);Ed(k,2,0,0,1,m[2]);
Ed(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.ge=k;c.je=zd();Id(c.ge,c.je);l=yd(0,0,0,1);e=xd();Kd(k,l,e);l=yd(1,1,1,1);d=xd();Kd(k,l,d);c.mj=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=He(k,[b.$a[0],b.$a[1],b.$a[2]]);c.kj=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.lj=[e[0],e[2],e[4]];b.Qe(c);b.sf=Me(this,b)}c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};
Oe.prototype.Qd=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Oe.prototype.Ah=function(a,b){this._data=a;if("undefined"==typeof b.ta||null==b.ta)b.ta=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.f("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null;e<d.length;)switch(h=d[e++],k=d[e++],l=d[e++],n=d[e++],"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:for(var m="",h=h=0;h<n/2;h++)l=d[e++],
k=l&255,l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);c.transfer_syntax_uid=m.replace(/\0/g,"");break;default:e=Oe.prototype.Qd(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Ej=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:m="";for(h=0;h<n/2;h++)l=d[e++],k=l&255,l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);m=m.split("\\");c.pixel_spacing=
[parseFloat(m[0]),parseFloat(m[1]),Infinity];break;default:e=Oe.prototype.Qd(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(h=0;h<n/2;h++)l=d[e++],k=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(k),c.series_instance_uid+=String.fromCharCode(l);break;case 19:m="";for(h=0;h<n/2;h++)l=d[e++],k=l&255,l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);c.instance_number=parseInt(m,10);break;case 50:m="";for(h=0;h<n/2;h++)l=d[e++],k=l&255,l=(l&65280)>>
8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);m=m.split("\\");c.image_position_patient=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])];break;case 55:m="";for(h=0;h<n/2;h++)l=d[e++],k=l&255,l=(l&65280)>>8,m+=String.fromCharCode(k),m+=String.fromCharCode(l);m=m.split("\\");c.image_orientation_patient=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4]),parseFloat(m[5])];break;default:e=Oe.prototype.Qd(d,e,l,n)}break;case 65534:switch(k){default:n=0,e+=n/
2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(h=0;h<n/2;h++)l=d[e++],k=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(k),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Oe.prototype.Qd(d,e,l,n)}break;case 16:switch(k){case 8720:for(h=0;h<n/2;h++)e++;break;default:e=Oe.prototype.Qd(d,e,l,n)}break;default:e=Oe.prototype.Qd(d,e,l,n)}switch(c.Ej){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=
new Uint32Array(c.columns*c.rows)}this.Da=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Ej){case 8:d=this.f("uchar",c.columns*c.rows);break;case 16:d=this.f("ushort",c.columns*c.rows);break;case 32:d=this.f("uint",c.columns*c.rows)}c.data=d;b.ta.push(c);return b};v("X.parserDCM",Oe);v("X.parserDCM.prototype.parse",Oe.prototype.parse);function Pe(){Ee.call(this);this.n="parserVTK"}w(Pe,Ee);
Pe.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");var d=b.s,e=b.R,h=new Uint8Array(c),k="";b.s=d=new ad(c.byteLength);b.R=e=new ad(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Ge(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.Hm=this.Im=null;this.sj=[];this.ne=Rd;this.hs=this.$h=this.Uh=this.ai=!1;c=0;for(l=k%8;l--;)Qe(this,h[c]),c++;for(l=.125*k^0;l--;)Qe(this,h[c]),c++,Qe(this,h[c]),c++,Qe(this,h[c]),c++,Qe(this,h[c]),c++,Qe(this,h[c]),c++,Qe(this,h[c]),c++,Qe(this,h[c]),
c++,Qe(this,h[c]),c++;c=this.Im;var h=this.Hm,k=h.length,n=l=this.sj.length;do{var m=this.sj[l-n],q=m.length,p;for(p=0;p<q&&!("LINES"==this.ne&&p+1>=q);p++){var s=parseInt(m[p],10),u=c.get(s);d.add(u[0],u[1],u[2]);var z=s,y=u;"LINES"==this.ne?(z=parseInt(m[p+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.ne&&(0!=p&&p!=q-1||d.add(u[0],u[1],u[2]));s<k?(y=h.get(s),e.add(y[0],y[1],y[2]),"LINES"==this.ne?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.ne&&(0!=p&&p!=q-1||e.add(y[0],
y[1],y[2]))):(z=new K(u[0],u[1],u[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.ne?(z=new K(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.ne&&(0!=p&&p!=q-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.qd=this.ne;A.hd(this.n+".parse");d=new Wd;d.Ea=b;d.na=a;this.dispatchEvent(d)};
function Qe(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.ai=!0;a.Uh=!1;a.$h=!1;c=parseInt(c[1],10);a.Im=new ad(3*c);a.Hm=new ad(3*c);return;case "VERTICES":a.Uh=!0;a.ai=!1;a.$h=!1;c=parseInt(c[1],10);if(3<=c)a.ne=Rd;else if(1==c)a.ne="POINTS";else throw Error("This VTK file is not supported!");a.sj=[];return;case "TRIANGLE_STRIPS":a.Uh=!0;a.ai=!1;a.$h=!1;a.ne="TRIANGLE_STRIPS";a.sj=[];return;case "LINES":a.Uh=!0;a.ai=!1;a.$h=!1;a.ne="LINES";a.sj=
[];return;case "POLYGONS":a.Uh=!0;a.ai=!1;a.$h=!1;a.ne="POLYGONS";a.sj=[];return;case "POINT_DATA":a.$h=!0;a.ai=!1;a.Uh=!1;return}if(a.ai)if(1==d||isNaN(parseFloat(e)))a.ai=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.Im.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Im.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Im.add(d,e,c))}else a.Uh?1==d||isNaN(parseFloat(e))?a.Uh=!1:(c=c.slice(1),a.sj.push(c)):
a.$h&&("NORMALS"==e?a.hs=!0:1==d||isNaN(parseFloat(e))?(a.$h=!1,a.hs=!1):a.hs&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.Hm.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Hm.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Hm.add(d,e,c))))}v("X.parserVTK",Pe);v("X.parserVTK.prototype.parse",Pe.prototype.parse);function Re(){Ee.call(this);this.n="parserFSM";this.jp=!1}w(Re,Ee);
Re.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");this._data=c;var d=b.s,e=b.R;b.cl=[];var h=b.cl;c=0;var k;do k=this.f("uchar"),c++;while(200>c&&10!=k);this.f("uchar");e=this.f("uint");c=this.f("uint");var l=this.f("float",3*e);k=this.f("uint",3*c);var n=new Uint32Array(e),m=new Float32Array(9*c);b.s=d=new ad(9*c);b.R=e=new ad(9*c);var q;for(q=0;q<c;q++){var p=3*q,s=k[p],u=k[p+1],z=k[p+2];h.push(s);h.push(u);h.push(z);n[s]+=1;n[u]+=1;n[z]+=1;var p=3*s,y=3*u,I=3*z,R=l[p],O=l[p+1],F=l[p+2],
u=l[y],z=l[y+1],s=l[y+2],P=l[I],W=l[I+1],T=l[I+2];d.add(R,O,F);d.add(u,z,s);d.add(P,W,T);R=new K(R,O,F);P=new K(P,W,T);u=(new K(u,z,s)).clone().ic(R);z=P.clone().ic(R);u=qd(u,z).normalize();m[p]+=u.x;m[p+1]+=u.y;m[p+2]+=u.z;m[y]+=u.x;m[y+1]+=u.y;m[y+2]+=u.z;m[I]+=u.x;m[I+1]+=u.y;m[I+2]+=u.z}for(q=0;q<c;q++)p=3*q,s=k[p],u=k[p+1],z=k[p+2],p=3*s,y=3*u,I=3*z,h=new K(m[y],m[y+1],m[y+2]),l=new K(m[I],m[I+1],m[I+2]),p=(new K(m[p],m[p+1],m[p+2])).scale(1/n[s]).normalize(),h=h.scale(1/n[u]).normalize(),l=
l.scale(1/n[z]).normalize(),e.add(p.x,p.y,p.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.f("uchar",this._data.byteLength-this.Da);k=null;for(p=0;p<c.length;p++)if(99==c[p]&&114==c[p+1]&&97==c[p+2]&&115==c[p+3]){for(e=k=p+9;10!=c[p]&&p<c.length;)e++,p++;k=Ge(c.subarray(k,e)).split(" ");break}k&&(b.Rb.XB(parseFloat(k[0])),b.Rb.YB(parseFloat(k[1])),b.Rb.ZB(parseFloat(k[2])));b.qd=Rd;A.hd(this.n+".parse");c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};v("X.parserFSM",Re);
v("X.parserFSM.prototype.parse",Re.prototype.parse);var Se={Js:function(a,b,c){return Se.update(a,0,b,c)},update:function(a,b,c,d){var e=Se.zD,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Te;
Te=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Se.zD=Te;function Ue(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,m,q,p,s;for(p=0;p<b;++p)a[p]>c&&(c=a[p]),a[p]<d&&(d=a[p]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(p=0;p<b;++p)if(a[p]===k){m=0;q=l;for(s=0;s<k;++s)m=m<<1|q&1,q>>=1;for(s=m;s<e;s+=n)h[s]=k<<16|p;++l}++k;l<<=1;n<<=1}return[h,c,d]};function Ve(a,b){this.Es=[];this.Gs=32768;this.zf=this.Nm=this.Wa=this.Fv=0;this.input=new Uint8Array(a);this.Nx=!1;this.Hs=We;this.resize=!1;if(b||!(b={}))b.index&&(this.Wa=b.index),b.bufferSize&&(this.Gs=b.bufferSize),b.bufferType&&(this.Hs=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Hs){case Xe:this.Xb=32768;this.output=new Uint8Array(32768+this.Gs+258);break;case We:this.Xb=0;this.output=new Uint8Array(this.Gs);this.Vj=this.gF;this.Vx=this.GE;this.Zs=this.PE;break;default:throw Error("invalid inflate mode");
}}var Xe=0,We=1;
Ve.prototype.qi=function(){for(;!this.Nx;){var a=Ye(this,3);a&1&&(this.Nx=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.Wa,c=this.output,d=this.Xb,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.zf=this.Nm=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.Hs){case Xe:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.Xb=d,c=this.Vj(),d=this.Xb;break;case We:for(;d+h>c.length;)c=this.Vj({Ay:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.Wa=b+=h;this.Xb=
d;this.output=c;break;case 1:this.Zs(Ze,$e);break;case 2:af(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.Vx()};
var bf=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),df=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),ef=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),ff=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gf=new Uint8Array(288),
jf,kf;jf=0;for(kf=gf.length;jf<kf;++jf)gf[jf]=143>=jf?8:255>=jf?9:279>=jf?7:8;var Ze=Ue(gf),lf=new Uint8Array(30),mf,nf;mf=0;for(nf=lf.length;mf<nf;++mf)lf[mf]=5;var $e=Ue(lf);function Ye(a,b){for(var c=a.Nm,d=a.zf,e=a.input,h=a.Wa,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.Nm=c>>>b;a.zf=d-b;a.Wa=h;return k}
function of(a,b){for(var c=a.Nm,d=a.zf,e=a.input,h=a.Wa,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.Nm=c>>k;a.zf=d-k;a.Wa=h;return e&65535}
function af(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=of(this,b),d){case 16:for(d=3+Ye(this,2);d--;)c[h++]=e;break;case 17:for(d=3+Ye(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+Ye(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=Ye(a,5)+257,d=Ye(a,5)+1,e=Ye(a,4)+4,h=new Uint8Array(bf.length),k;for(k=0;k<e;++k)h[bf[k]]=Ye(a,3);e=Ue(h);h=new Uint8Array(c);k=new Uint8Array(d);a.Zs(Ue(b.call(a,c,e,h)),Ue(b.call(a,d,e,k)))}f=Ve.prototype;
f.Zs=function(a,b){var c=this.output,d=this.Xb;this.ky=a;for(var e=c.length-258,h,k,l;256!==(h=of(this,a));)if(256>h)d>=e&&(this.Xb=d,c=this.Vj(),d=this.Xb),c[d++]=h;else for(h-=257,l=cf[h],0<df[h]&&(l+=Ye(this,df[h])),h=of(this,b),k=ef[h],0<ff[h]&&(k+=Ye(this,ff[h])),d>=e&&(this.Xb=d,c=this.Vj(),d=this.Xb);l--;)c[d]=c[d++-k];for(;8<=this.zf;)this.zf-=8,this.Wa--;this.Xb=d};
f.PE=function(a,b){var c=this.output,d=this.Xb;this.ky=a;for(var e=c.length,h,k,l;256!==(h=of(this,a));)if(256>h)d>=e&&(c=this.Vj(),e=c.length),c[d++]=h;else for(h-=257,l=cf[h],0<df[h]&&(l+=Ye(this,df[h])),h=of(this,b),k=ef[h],0<ff[h]&&(k+=Ye(this,ff[h])),d+l>e&&(c=this.Vj(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.zf;)this.zf-=8,this.Wa--;this.Xb=d};
f.Vj=function(){var a=new Uint8Array(this.Xb-32768),b=this.Xb-32768,c=this.output;a.set(c.subarray(32768,a.length));this.Es.push(a);this.Fv+=a.length;c.set(c.subarray(b,b+32768));this.Xb=32768;return c};
f.gF=function(a){var b=this.input.length/this.Wa+1|0,c=this.input,d=this.output;a&&("number"===typeof a.Ay&&(b=a.Ay),"number"===typeof a.kE&&(b+=a.kE));2>b?(a=(c.length-this.Wa)/this.ky[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.Vx=function(){var a=0,b=this.output,c=this.Es,d,e=new Uint8Array(this.Fv+(this.Xb-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.Xb);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.Xb;h<k;++h)e[a++]=b[h];this.Es=[];return this.buffer=e};f.GE=function(){var a,b=this.Xb;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var pf;for(pf=0;256>pf;++pf)for(var qf=pf,rf=7,qf=qf>>>1;qf;qf>>>=1)--rf;var sf=[],tf;for(tf=0;288>tf;tf++)switch(!0){case 143>=tf:sf.push([tf+48,8]);break;case 255>=tf:sf.push([tf-144+400,9]);break;case 279>=tf:sf.push([tf-256+0,7]);break;case 287>=tf:sf.push([tf-280+192,8]);break;default:throw"invalid literal: "+tf;}
var uf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(uf);function vf(){};function wf(a){this.input=a;this.Wa=0;this.member=[]}
wf.prototype.qi=function(){for(var a=this.input.length;this.Wa<a;){var b=new vf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.Wa;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=Se.Js(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Ve(l,{index:d,bufferSize:e});b.data=e=d.qi();d=d.Wa;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(Se.Js(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Se.Js(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.Wa=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function xf(){Ee.call(this);this.n="parserMGZ";this.jp=!1}w(xf,Ee);
xf.prototype.parse=function(a,b,c,d){A.Dd(this.n+".parse");d&&(c=(new wf(new Uint8Array(c))).qi(),c=c.buffer);d=this.Ah(c);var e=[d.mu,d.nu,d.ou];b.$a=e;var h=d.dC;b.Yg=h;c=d.min;var k=d.max;b.Gd=b.yb=c;b.Fb=b.xb=k;-Infinity==b.jb&&(b.jb=c);Infinity==b.lb&&(b.lb=k);c=zd();Ed(c,0,d.mf[0][0],d.mf[1][0],d.mf[2][0],0);Ed(c,1,d.mf[0][1],d.mf[1][1],d.mf[2][1],0);Ed(c,2,d.mf[0][2],d.mf[1][2],d.mf[2][2],0);Ed(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],m=0;3>m;++m)e[m]=d.mf[3][m]-(c[m+0]*h[0]*
k+c[m+4]*h[1]*l+c[m+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.ge=c;d.je=zd();Id(d.ge,d.je);e=yd(0,0,0,1);h=xd();Kd(c,e,h);k=yd(1,1,1,1);e=xd();Kd(c,k,e);c=He(c,b.$a);d.mj=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.kj=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.lj=[c[0],c[2],c[4]];b.Qe(d);A.hd(this.n+".parse");b.sf=Me(this,b);d=new Wd;d.Ea=b;d.na=a;this.dispatchEvent(d)};
xf.prototype.Ah=function(a){this._data=a;a={version:0,CD:0,AD:0,oF:0,BD:0,mu:0,nu:0,ou:0,pI:0,type:0,ZE:0,KA:0,$L:null,mf:null,dC:null,data:null,min:Infinity,max:-Infinity};a.version=this.f("uint");a.mu=this.f("uint");a.nu=this.f("uint");a.ou=this.f("uint");a.pI=this.f("uint");a.type=this.f("uint");a.ZE=this.f("uint");a.KA=this.f("ushort");if(0<a.KA){a.dC=this.f("float",3);var b=[];b.push(this.f("float",3));b.push(this.f("float",3));b.push(this.f("float",3));b.push(this.f("float",3));a.mf=b}this.Da=
284;b=a.mu*a.nu*a.ou;switch(a.type){case 0:a.data=this.f("uchar",b);break;case 1:a.data=this.f("uint",b);break;case 3:a.data=this.f("float",b);break;case 4:a.data=this.f("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Fe(a.data);a.min=b[0];a.max=b[1];this.Da+16<this._data.byteLength&&(a.CD=this.f("float"),a.oF=this.f("float"),a.AD=this.f("float"),a.BD=this.f("float"));return a};v("X.parserMGZ",xf);v("X.parserMGZ.prototype.parse",xf.prototype.parse);function yf(){Ee.call(this);this.n="parserLBL"}w(yf,Ee);
yf.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");var d=b.cl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.f("uchar",c.byteLength),l=k.length,n=!1,m=0;for(c=1;c<l;c++)10==k[c-1]?(m=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Ge(k,m,c),10)),n=!1);k=b.Ra.Qa?b.Ra.Qa:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.Ra.Qa=k;b.Ra.nm=h;b.Ra.A=!0;A.hd(this.n+".parse");d=new Wd;d.Ea=b;d.na=a;this.dispatchEvent(d)};v("X.parserLBL",yf);v("X.parserLBL.prototype.parse",yf.prototype.parse);function zf(){Ee.call(this);this.n="parserCRV";this.jp=!1}w(zf,Ee);
zf.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");var d=b.cl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.Da=3;var e=this.f("uint");this.f("uint");this.f("uint");var h=0,k=0,l=0,n=0,m=0,q=0,p=0,s=0,u=0,z=0,y=0;c=Array(2);var I=Array(2),R=this.f("float",e),O;for(O=0;O<e;O++){var F=R[O];0==O&&(c[0]=I[0]=F);0<=F?(h++,n+=F):(k++,l+=F);u+=F;y++;I[0]=Math.max(F,I[0]);c[0]=Math.min(F,c[0]);R[O]=F}0!=h&&(m=n/h);0!=k&&(q=l/k);0!=y&&(z=u/y);for(y=u=l=n=0;y<
e;y++)F=R[y],O=0,0<=F?(O=Math.pow(F-m,2),n+=O):(O=Math.pow(F-q,2),l+=O),O=Math.pow(F-z,2),u+=O;1<h&&(p=Math.sqrt(n/(h-1)));1<k&&(s=Math.sqrt(l/(k-1)));c[1]=q-2.5*s;I[1]=m+2.5*p;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=R[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.Ra.Gd=c[1];b.Ra.Fb=I[1];-Infinity==b.Ra.jb&&(b.Ra.jb=c[1]);Infinity==b.Ra.lb&&(b.Ra.lb=I[1]);b.Ra.Qa=R;b.Ra.nm=h;b.Ra.A=!0;A.hd(this.n+".parse");d=new Wd;d.Ea=b;d.na=a;this.dispatchEvent(d)};v("X.parserCRV",zf);
v("X.parserCRV.prototype.parse",zf.prototype.parse);function Af(a,b){var c,d;this.input=a;this.Wa=0;if(b||!(b={}))b.index&&(this.Wa=b.index),b.verify&&(this.XK=b.verify);c=a[this.Wa++];d=a[this.Wa++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.LA=new Ve(a,{index:this.Wa,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Af.prototype.qi=function(){var a=this.input,b;b=this.LA.qi();this.Wa=this.LA.Wa;if(this.XK){var a=(a[this.Wa++]<<24|a[this.Wa++]<<16|a[this.Wa++]<<8|a[this.Wa++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Bf(){Ee.call(this);this.n="parserRAW"}w(Bf,Ee);
Bf.prototype.parse=function(a,b,c,d){A.Dd(this.n+".parse");d&&(c=(new Af(new Uint8Array(c))).qi(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Fe(d.data);c=e[0];e=e[1];d.min=b.Gd=b.yb=c;d.max=b.Fb=b.xb=e;-Infinity==b.jb&&(b.jb=c);Infinity==b.lb&&(b.lb=e);e=Ad();d.ge=e;d.je=Ad();var h=yd(0,0,0,1);c=xd();Kd(e,h,c);var k=yd(1,1,1,1),h=xd();Kd(e,k,h);e=He(e,b.$a);d.mj=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.kj=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.lj=[e[0],e[2],e[4]];b.Qe(d);A.hd(this.n+".parse");b.sf=
Me(this,b);d=new Wd;d.Ea=b;d.na=a;this.dispatchEvent(d)};v("X.parserRAW",Bf);v("X.parserRAW.prototype.parse",Bf.prototype.parse);function Cf(){Ee.call(this);this.n="parserIMAGE"}w(Cf,Ee);Cf.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Rc(h,"load",this.OJ.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};Cf.prototype.OJ=function(a,b,c){b.sf=a;b.ci=null;a=new Wd;a.Ea=c;a.na=b;this.dispatchEvent(a)};v("X.parserIMAGE",Cf);v("X.parserIMAGE.prototype.parse",Cf.prototype.parse);function Df(){Ee.call(this);this.n="parserLUT"}w(Df,Ee);
Df.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");this._data=c;c=this.f("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Ge(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.hd(this.n+".parse");c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};
v("X.parserLUT",Df);v("X.parserLUT.prototype.parse",Df.prototype.parse);function Ef(){Ee.call(this);this.n="parserMRC"}w(Ef,Ee);
Ef.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");c=this.Ah(c);var d=c.min,e=c.max;b.$a=[c.Pn,c.Qn,c.Rn];b.Yg=[c.xlen/c.lA,c.lC/c.mA,c.nC/c.nA];b.Gd=b.yb=d;b.Fb=b.xb=e;-Infinity==b.jb&&(b.jb=d);Infinity==b.lb&&(b.lb=e);e=zd();Ed(e,3,0,0,0,1);Ed(e,0,-1,0,0,c.Pn);Ed(e,1,0,0,-1,c.Qn);Ed(e,2,0,-1,0,c.Rn);c.ge=e;c.je=zd();Id(c.ge,c.je);var h=yd(0,0,0,1),d=xd();Kd(e,h,d);var k=yd(1,1,1,1),h=xd();Kd(e,k,h);k=[c.Pn,c.Qn,c.Rn];e=He(e,k);c.mj=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.kj=[e[1]+e[0]+1,e[3]-e[2]+
1,e[5]-e[4]+1];c.lj=[e[0],e[2],e[4]];b.$a=k;b.Qe(c);b.sf=Me(this,b);A.hd(this.n+".parse");c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};
Ef.prototype.Ah=function(a){this._data=a;a={Pn:0,Qn:0,Rn:0,mode:0,nO:0,oO:0,pO:0,lA:0,mA:0,nA:0,xlen:0,lC:0,nC:0,alpha:0,beta:0,gamma:0,$H:0,aI:0,bI:0,Cs:0,zp:0,Dj:0,bO:0,next:0,NE:0,extra:null,qI:0,sI:0,extra:null,zH:0,ZN:0,wH:0,lens:0,nI:0,oI:0,VK:0,WK:0,OK:null,aL:0,cL:0,dL:0,NN:0,CO:0,cK:0,rI:0,data:null,min:Infinity,max:-Infinity,iO:0,IB:null,BO:null,wO:null,orientation:null,mO:null};this.Da=0;a.Pn=this.f("sint");a.Qn=this.f("sint");a.Rn=this.f("sint");a.mode=this.f("sint");var b=a.Pn*a.Qn*a.Rn;
this.Da=1024;switch(a.mode){case 0:a.data=this.f("schar",b);break;case 1:a.data=this.f("sshort",b);break;case 2:a.data=this.f("float",b);break;case 3:a.data=this.f("uint",b);break;case 4:a.data=this.f("double",b);break;case 6:a.data=this.f("ushort",b);break;case 16:a.data=this.f("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.Da=28;a.lA=this.f("sint");a.mA=this.f("sint");a.nA=this.f("sint");a.xlen=this.f("float");a.lC=this.f("float");a.nC=this.f("float");a.alpha=this.f("float");
a.beta=this.f("float");a.gamma=this.f("float");a.$H=this.f("sint");a.aI=this.f("sint");a.bI=this.f("sint");a.Cs=this.f("float");a.zp=this.f("float");a.Dj=this.f("float");a.aO=this.f("sint");a.next=this.f("sint");a.NE=this.f("short");a.qI=this.f("short");a.sI=this.f("short");a.zH=this.f("sint");a.YN=this.f("sint");a.wH=this.f("short");a.lens=this.f("short");a.nI=this.f("short");a.oI=this.f("short");a.VK=this.f("short");a.WK=this.f("short");a.OK=this.f("float",6);this.Da=196;a.aL=this.f("float");a.cL=
this.f("float");a.dL=this.f("float");this.Da=216;a.cK=this.f("float");a.rI=this.f("sint");a.eO=this.f("schar",10);if(0!=a.next)switch(this.Da=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.f("schar",b);break;case 1:a.data=this.f("sshort",b);break;case 2:a.data=this.f("float",b);break;case 3:a.data=this.f("uint",b);break;case 4:a.data=this.f("double",b);break;case 6:a.data=this.f("ushort",b);break;case 16:a.data=this.f("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.Dj-(a.zp-a.Dj)?(a.min=a.Cs,a.max=a.Dj+(a.Dj-a.Cs)):(a.min=a.Dj-(a.zp-a.Dj),a.max=a.zp);return a};v("X.parserMRC",Ef);v("X.parserMRC.prototype.parse",Ef.prototype.parse);function Ff(){Ee.call(this);this.n="parserNRRD"}w(Ff,Ee);
Ff.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");this._data=c;c=this.f("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ge(c,0,k-2);h=k+1;break}var l,n,m,q,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.MH=!0:!l.match(/^#/)&&(q=l.match(/(.*):(.*)/))&&(n=q[1].trim(),l=q[2].trim(),(m=this.kF[n])?m.call(this,l):this[n]=l);if(!this.MH)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.Mb&&(this.Mb=[new K(1,0,0),new K(0,1,0),new K(0,0,1)],this.sv))for(d=[],q=0;2>=q;q++)d.push(isNaN(this.sv[q])?void 0:this.Mb[q].scale(this.sv[q]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new wf(new Uint8Array(h))).qi();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.Th(h);q=Fe(c.data);h=c.min=q[0];q=c.max=q[1];b.Gd=b.yb=h;b.Fb=b.xb=q;b.$a=[this.nv[0],this.nv[1],this.nv[2]];d=
(new K(this.Mb[0][0],this.Mb[0][1],this.Mb[0][2])).Kf();e=(new K(this.Mb[1][0],this.Mb[1][1],this.Mb[1][2])).Kf();k=(new K(this.Mb[2][0],this.Mb[2][1],this.Mb[2][2])).Kf();b.Yg=[d,e,k];-Infinity==b.jb&&(b.jb=h);Infinity==b.lb&&(b.lb=q);d=q=1;"left-posterior-superior"==this.IB&&(d=q=-1);h=Ad();Ed(h,0,q*this.Mb[0][0],q*this.Mb[1][0],q*this.Mb[2][0],q*this.rv[0]);Ed(h,1,d*this.Mb[0][1],d*this.Mb[1][1],d*this.Mb[2][1],d*this.rv[1]);Ed(h,2,1*this.Mb[0][2],1*this.Mb[1][2],1*this.Mb[2][2],1*this.rv[2]);
Ed(h,3,0,0,0,1);c.ge=h;c.je=zd();Id(c.ge,c.je);d=yd(0,0,0,1);q=xd();Kd(h,d,q);e=yd(1,1,1,1);d=xd();Kd(h,e,d);h=He(h,b.$a);c.mj=[d[0]-q[0],d[1]-q[1],d[2]-q[2]];c.kj=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.lj=[h[0],h[2],h[4]];b.Qe(c);A.hd(this.n+".parse");b.sf=Me(this,b);c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};
Ff.prototype.kF={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Th=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Th=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Th=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Th=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Th=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Th=Uint32Array;break;case "float":this.Th=Float32Array;break;case "double":this.Th=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.UN=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.ri=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.nv=e},space:function(a){return this.IB=a},"space origin":function(a){return this.rv=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Mb=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.sv=e}};v("X.parserNRRD",Ff);v("X.parserNRRD.prototype.parse",Ff.prototype.parse);function Gf(){Ee.call(this);this.n="parserSTL"}w(Gf,Ee);
Gf.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");this._data=c;var d=b.s,e=b.R;if("solid"==Ge(this.f("uchar",5))){b.s=d=new ad(c.byteLength);b.R=e=new ad(c.byteLength);var h=d,d=e,e=this.f("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,m;for(m=0;m<c;m++)if(10==e[m]){if(k||l){var q=Ge(e,n,m).split(" "),l=parseFloat(q[0]),p=parseFloat(q[1]),q=parseFloat(q[2]);k?(d.add(l,p,q),d.add(l,p,q),d.add(l,p,q)):h.add(l,p,q);l=k=!1}}else 32==e[m-1]&&(102==e[m]?(n=m+=13,k=!0):118==e[m]&&(n=m+=7,l=
!0))}else for(this.Da=80,h=this.f("uint"),b.s=d=new ad(9*h),b.R=e=new ad(9*h),c=c=0;c<h;c++)k=this.f("float",12),n=k[0],m=k[1],l=k[2],e.add(n,m,l),e.add(n,m,l),e.add(n,m,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.Da+=2;A.hd(this.n+".parse");h=new Wd;h.Ea=b;h.na=a;this.dispatchEvent(h)};v("X.parserSTL",Gf);v("X.parserSTL.prototype.parse",Gf.prototype.parse);function Hf(){Ee.call(this);this.n="parserNII"}w(Hf,Ee);
Hf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new wf(new Uint8Array(d))).qi(),d=d.buffer);c=this.Ah(d);d=c.min;e=c.max;b.Gd=b.yb=d;b.Fb=b.xb=e;-Infinity==b.jb&&(b.jb=d);Infinity==b.lb&&(b.lb=e);d=zd();Ed(d,3,0,0,0,1);if(0<c.Wu){var e=0,h=c.HA,k=c.IA,l=c.JA,n=1,m=1,q=1,p=c.EA,s=c.FA,u=c.GA,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.Of[1]&&(n=c.Of[1]);
0<c.Of[2]&&(m=c.Of[2]);0<c.Of[2]&&(q=c.Of[3]);0>c.Of[0]&&(q=-q);Ed(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*m,2*(h*l+e*k)*q,p);Ed(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*m,2*(k*l-e*h)*q,s);Ed(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*m,(e*e+l*l-k*k-h*h)*q,u)}else 0<c.AB?(e=c.JB,h=c.KB,k=c.LB,Ed(d,0,e[0],e[1],e[2],e[3]),Ed(d,1,h[0],h[1],h[2],h[3]),Ed(d,2,k[0],k[1],k[2],k[3])):0==c.Wu?(Ed(d,0,c.Of[1],0,0,0),Ed(d,1,0,c.Of[2],0,0),Ed(d,2,0,0,c.Of[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.ge=d;c.je=zd();
Id(c.ge,c.je);h=yd(0,0,0,1);e=xd();Kd(d,h,e);k=yd(1,1,1,1);h=xd();Kd(d,k,h);k=[c.ri[1],c.ri[2],c.ri[3]];d=He(d,k);c.mj=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.kj=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.lj=[d[0],d[2],d[4]];b.$a=k;b.Qe(c);b.sf=Me(this,b);c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};
Hf.prototype.Ah=function(a){this._data=a;a={uK:0,data_type:null,OE:null,iF:0,jK:0,UJ:0,SE:null,ri:null,HH:0,IH:0,JH:0,FH:0,Ys:0,zE:0,zK:0,Of:null,fC:0,iK:0,hK:0,yK:0,wK:null,bL:null,BE:0,CE:0,xK:0,QK:0,cH:0,dH:0,QE:null,wE:null,Wu:0,AB:0,HA:0,IA:0,JA:0,EA:0,FA:0,GA:0,JB:null,KB:null,LB:null,GH:null,magic:null,data:null,min:Infinity,max:-Infinity};a.uK=this.f("uint");a.data_type=this.f("uchar",10);a.OE=this.f("uchar",18);a.iF=this.f("uint");a.jK=this.f("ushort");a.UJ=this.f("uchar");a.SE=this.f("uchar");
a.ri=this.f("ushort",8);a.HH=this.f("float");a.IH=this.f("float");a.JH=this.f("float");a.FH=this.f("ushort");a.Ys=this.f("ushort");a.zE=this.f("ushort");a.zK=this.f("ushort");a.Of=this.f("float",8);a.fC=this.f("float");a.iK=this.f("float");a.hK=this.f("float");a.yK=this.f("ushort");a.wK=this.f("uchar");a.bL=this.f("uchar");a.BE=this.f("float");a.CE=this.f("float");a.xK=this.f("float");a.QK=this.f("float");a.cH=this.f("uint",1);a.dH=this.f("uint",1);a.QE=this.f("uchar",80);a.wE=this.f("uchar",24);
a.Wu=this.f("ushort");a.AB=this.f("ushort");a.HA=this.f("float");a.IA=this.f("float");a.JA=this.f("float");a.EA=this.f("float");a.FA=this.f("float");a.GA=this.f("float");a.JB=this.f("float",4);a.KB=this.f("float",4);a.LB=this.f("float",4);a.GH=this.f("uchar",16);a.magic=this.f("uchar",4);this.Da=parseInt(a.fC,10);var b=a.ri[1]*a.ri[2]*a.ri[3];switch(a.Ys){case 2:a.data=this.f("uchar",b);break;case 4:a.data=this.f("sshort",b);break;case 8:a.data=this.f("sint",b);break;case 16:a.data=this.f("float",
b);break;case 32:a.data=this.f("complex",b);break;case 64:a.data=this.f("double",b);break;case 256:a.data=this.f("schar",b);break;case 512:a.data=this.f("ushort",b);break;case 768:a.data=this.f("uint",b);break;default:throw Error("Unsupported NII data type: "+a.Ys);}b=Fe(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Hf);v("X.parserNII.prototype.parse",Hf.prototype.parse);function If(){Ee.call(this);this.n="parserTRK"}w(If,Ee);
If.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");var d=b.s,e=b.R,h=b.oc;this._data=c;this.f("uchar",6);this.f("ushort",3);var k=this.f("float",3);this.f("float",3);var l=this.f("ushort");this.f("uchar",200);this.f("ushort");this.f("uchar",200);c=this.f("float",16);this.f("uchar",444);this.f("uchar",4);this.f("uchar",4);this.f("float",6);this.f("uchar",2);this.f("uchar");this.f("uchar");this.f("uchar");this.f("uchar");this.f("uchar");this.f("uchar");var n=this.f("uint");this.f("uint");var m=
this.f("uint"),q=[],p=[],s=Infinity,u=-Infinity,z=null,y=null,I=null,R=null,e=d=null,O=this.f("uint",(this._data.byteLength-1E3)/4);this.Da=m;for(var F=this.f("float",(this._data.byteLength-1E3)/4),P=0,m=h=0;m<n;m++){for(var W=O[P],T=new ad(3*W),ua=0,la=0;la<W;la++){var wa=F[P+3*la+la*l+1],Ma=F[P+3*la+la*l+2],Ga=F[P+3*la+la*l+3],wa=wa/k[0],Ma=Ma/k[1],Ga=Ga/k[2];T.add(wa,Ma,Ga);if(0<la)var Na=T.get(la-1),ua=ua+Math.sqrt(Math.pow(wa-Na[0],2)+Math.pow(Ma-Na[1],2)+Math.pow(Ga-Na[2],2));la<W-1&&(h+=6)}P+=
3*W+W*l+1;la=T.wf;W=T.tf;wa=T.xf;Ma=T.uf;Ga=T.yf;Na=T.vf;if(!z||la<z)z=la;if(!y||W>y)y=W;if(!I||wa<I)I=wa;if(!R||Ma>R)R=Ma;if(!d||Ga<d)d=Ga;if(!e||Na>e)e=Na;q.push(T);p.push(ua)}k=(z+y)/2;I=(I+R)/2;l=(d+e)/2;R=new Float32Array(h);b.s=d=new ad(h);b.R=e=new ad(h);b.oc=h=new ad(h);for(m=z=0;m<n;m++)for(y=q[m],O=y.count,ua=p[m],s=Math.min(s,ua),u=Math.max(u,ua),la=0;la<O-1;la++){P=y.get(la);F=y.get(la+1);d.add(P[0],P[1],P[2]);d.add(F[0],F[1],F[2]);var T=P[0]-k,W=P[1]-I,wa=P[2]-l,Ma=Math.sqrt(T*T+W*W+
wa*wa),Ga=F[0]-k,Na=F[1]-I,ja=F[2]-l,xa=Math.sqrt(Ga*Ga+Na*Na+ja*ja);e.add(T/Ma,W/Ma,wa/Ma);e.add(Ga/xa,Na/xa,ja/xa);F=[Math.abs(F[0]-P[0]),Math.abs(F[1]-P[1]),Math.abs(F[2]-P[2])];P=Math.sqrt(F[0]*F[0]+F[1]*F[1]+F[2]*F[2]);F[0]/=P;F[1]/=P;F[2]/=P;h.add(F[0],F[1],F[2]);h.add(F[0],F[1],F[2]);R[z++]=ua;R[z++]=ua;R[z++]=ua;R[z++]=ua;R[z++]=ua;R[z++]=ua}b.qd="LINES";n=new Td;n.Gd=s;n.Fb=u;n.jb=s;n.lb=u;n.nm=R;n.Xw=!1;n.A=!0;b.Ra=n;s=!1;for(m=0;16>m;m++)if(0!=c[m]){s=!0;break}!1==s&&(c[0]=c[5]=c[10]=c[15]=
1);A.hd(this.n+".parse");A.o.Hv(c,b.Rb.kb);c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};v("X.parserTRK",If);v("X.parserTRK.prototype.parse",If.prototype.parse);function Jf(){Ee.call(this);this.n="parserOBJ"}w(Jf,Ee);
Jf.prototype.parse=function(a,b,c){A.Dd(this.n+".parse");this._data=c;c=c.byteLength;var d=this.f("uchar",c),e=[];b.s=new ad(c);b.R=new ad(c);var h=b.s,k=b.R,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var m=Ge(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==m[0])e.push([parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])]);else if("f"==m[0]){var q=e[parseInt(m[1],10)-1],l=e[parseInt(m[2],10)-1],m=e[parseInt(m[3],10)-1];h.add(q[0],q[1],q[2]);h.add(l[0],l[1],l[2]);h.add(m[0],m[1],m[2]);q=new K(q[0],q[1],q[2]);
m=new K(m[0],m[1],m[2]);l=qd((new K(l[0],l[1],l[2])).ic(q),m.ic(q));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.hd(this.n+".parse");c=new Wd;c.Ea=b;c.na=a;this.dispatchEvent(c)};v("X.parserOBJ",Jf);v("X.parserOBJ.prototype.parse",Jf.prototype.parse);function Kf(){$c.call(this);this.n="loader";this.al=new gd;this.Am=0}w(Kf,$c);function Lf(a,b){a.Am+=b/a.al.oh()/3;a.Am=Math.min(1,a.Am);var c=new Ae;c.yj=a.Am;a.dispatchEvent(c)}function Mf(a){a=a.W.np;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Nf))throw Error("The "+b+" file format is not supported.");return[a,b,Nf[b][0],Nf[b][1],Nf[b][2]]}
Kf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!id(this.al.mb,a.Sc)||this.al.get(a.Sc)){this.al.set(a.Sc,!1);var c=Mf(a)[0];if(null!=a.dg)this.parse(null,a,b);else{var d=new XMLHttpRequest;G(d,"abort",this.zy.bind(this,d,a,b));G(d,"error",this.zy.bind(this,d,a,b));G(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Kf.prototype.parse=function(a,b,c){Lf(this,1);setTimeout(function(){var d=Mf(b),e=d[3],d=new d[2];Rc(d,ge,this.complete.bind(this));var h=b.dg;null==h&&(h=a.response,b.dg=h);d.parse(b,c,h,e)}.bind(this),100)};Kf.prototype.complete=function(a){Lf(this,1);setTimeout(function(){var b=a.na,c=a.Ea;b.W.A=!1;b.A=!0;c.T();this.al.set(b.Sc,!0)}.bind(this),100)};Kf.prototype.zy=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Nf={OBJ:[Jf,null],OFF:[Ne,null],STL:[Gf,null],VTK:[Pe,null],TRK:[If,null],MRC:[Ef,null],ST:[Ef,null],FSM:[Re,null],INFLATED:[Re,null],SMOOTHWM:[Re,null],SPHERE:[Re,null],PIAL:[Re,null],ORIG:[Re,null],NRRD:[Ff,null],NII:[Hf,null],GZ:[Hf,null],DCM:[Oe,null],DICOM:[Oe,null],"":[Oe,null],CRV:[zf,null],LABEL:[yf,null],MGH:[xf,!1],MGZ:[xf,!0],RAW:[Bf,!1],RZ:[Bf,!0],TXT:[Df,null],LUT:[Df,null],PNG:[Cf,"png"],JPG:[Cf,"jpeg"],JPEG:[Cf,"jpeg"],GIF:[Cf,"gif"]};function Of(){Ee.call(this);this.n="parserIMA"}w(Of,Ee);
Of.prototype.parse=function(a,b,c){b.Qg={};b.Qg.Kn=0;this.Ah(c,b);if(null==b.W.length||b.ta.length==b.W.length){b.Qg.Kn=b.W.length;var d={};c={};for(var e=0;e<b.ta.length;e++)d.hasOwnProperty(b.ta[e].series_instance_uid)||(d[b.ta[e].series_instance_uid]=[],c[b.ta[e].series_instance_uid]={}),c[b.ta[e].series_instance_uid].hasOwnProperty(b.ta[e].sop_instance_uid)||(c[b.ta[e].series_instance_uid][b.ta[e].sop_instance_uid]=!0,d[b.ta[e].series_instance_uid].push(b.ta[e]));var h=Object.keys(d)[0],e=d[h],
k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=qd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],m=d[1]-n[1],q=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+m*m+
q*q);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,p=e[k-1].image_position_patient,h=p[0]-n[0],m=p[1]-n[1],q=p[2]-n[2],h=Math.sqrt(h*h+m*m+q*q),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;p=null;switch(e[0].Ej){case 8:p=new Uint8Array(h);break;case 16:p=new Uint16Array(h);break;case 32:p=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Yg=e[0].pixel_spacing;for(var s=0;s<k;s++){var u=e[s].data,h=0;switch(l){case "image_position_patient":h=e[s].image_position_patient[0]-e[0].image_position_patient[0];m=e[s].image_position_patient[1]-
e[0].image_position_patient[1];q=e[s].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+m*m+q*q)/e[0].pixel_spacing[2];break;case "instance_number":h=e[s].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}p.set(u,h*n)}c.data=p;b._data=p;b.$a=[e[0].columns,e[0].rows,d];c.TE=b.$a;d=Fe(p);k=d[0];d=d[1];c.min=b.Gd=b.yb=k;c.max=b.Fb=b.xb=d;-Infinity==b.jb&&(b.jb=k);Infinity==b.lb&&(b.lb=d);m=e[0].image_position_patient;
k=zd();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=qd(d,h);Ed(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-m[0]);Ed(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-m[1]);Ed(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],m[2]);Ed(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=qd(d,h),Ed(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[0]),Ed(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-m[1]),Ed(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,m[2])):(Ed(k,0,1,0,0,-m[0]),Ed(k,1,0,-1,-0,-m[1]),Ed(k,2,0,0,1,m[2]));Ed(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.ge=k;c.je=zd();Id(c.ge,c.je);l=yd(0,0,0,1);e=xd();Kd(k,l,e);l=yd(1,1,1,1);d=xd();Kd(k,l,d);c.mj=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=He(k,[b.$a[0],b.$a[1],b.$a[2]]);c.kj=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.lj=[e[0],e[2],e[4]];b.Qe(c);b.sf=Me(this,b)}c=new Wd;c.Ea=b;c.na=
a;this.dispatchEvent(c)};Of.prototype.Qd=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Of.prototype.Ah=function(a,b){this._data=a;if("undefined"==typeof b.ta||null==b.ta)b.ta=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.f("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,m=[[8,4368],[8,4384]],q=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],q=!1,p=0,s=m.length;p<s;p++)if(h===m[p][0]&&k===m[p][1]){q=!0;break}if(q)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Of.prototype.Qd(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Ej=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Of.prototype.Qd(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Of.prototype.Qd(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Of.prototype.Qd(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(p=0;p<n/2;p++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Of.prototype.Qd(d,e,l,n)}break;case 16:switch(k){case 8720:for(p=0;p<n/2;p++)e++;break;default:e=
Of.prototype.Qd(d,e,l,n)}break;default:e=Of.prototype.Qd(d,e,l,n)}}switch(c.Ej){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Da=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Ej){case 8:d=this.f("uchar",c.columns*c.rows);break;case 16:d=this.f("ushort",c.columns*c.rows);break;case 32:d=this.f("uint",c.columns*c.rows)}c.data=d;b.ta.push(c);return b};v("X.parserIMA",Of);
v("X.parserIMA.prototype.parse",Of.prototype.parse);var Pf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Qf(a){if(Rf){Rf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Qf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Rf=!0,Error();}}return a.match(Pf)}var Rf=gc;function Sf(a,b){Yc.call(this);this.Ll=a||1;this.bm=b||ba;this.Fs=ta(this.NK,this);this.Qt=ya()}w(Sf,Yc);f=Sf.prototype;f.enabled=!1;f.Lb=null;f.NK=function(){if(this.enabled){var a=ya()-this.Qt;0<a&&a<.8*this.Ll?this.Lb=this.bm.setTimeout(this.Fs,this.Ll-a):(this.Lb&&(this.bm.clearTimeout(this.Lb),this.Lb=null),this.dispatchEvent(Tf),this.enabled&&(this.Lb=this.bm.setTimeout(this.Fs,this.Ll),this.Qt=ya()))}};
f.start=function(){this.enabled=!0;this.Lb||(this.Lb=this.bm.setTimeout(this.Fs,this.Ll),this.Qt=ya())};f.stop=function(){this.enabled=!1;this.Lb&&(this.bm.clearTimeout(this.Lb),this.Lb=null)};f.e=function(){Sf.c.e.call(this);this.stop();delete this.bm};var Tf="tick";function Uf(a,b,c){if(ka(a))c&&(a=ta(a,c));else if(a&&"function"==typeof a.handleEvent)a=ta(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Vf(a){return"function"==typeof a.oh?a.oh():ha(a)||r(a)?a.length:nb(a)}function Wf(a){if("function"==typeof a.Zj)return a.Zj();if(r(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ob(a)}function Xf(a){if("function"==typeof a.jn)return a.jn();if("function"!=typeof a.Zj){if(ha(a)||r(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return pb(a)}}
function Yf(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ha(a)||r(a))D(a,b,void 0);else for(var c=Xf(a),d=Wf(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function Zf(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ha(a)||r(a))return Eb(a,b,void 0);for(var c=Xf(a),d=Wf(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function $f(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function ag(){}ag.prototype.Qx=null;function bg(a){var b;(b=a.Qx)||(b={},cg(a)&&(b[0]=!0,b[1]=!0),b=a.Qx=b);return b};var dg;function eg(){}w(eg,ag);function fg(a){return(a=cg(a))?new ActiveXObject(a):new XMLHttpRequest}function cg(a){if(!a.Gz&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Gz=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.Gz}dg=new eg;function gg(a){this.mb=new gd;a&&this.vs(a)}function hg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}f=gg.prototype;f.oh=function(){return this.mb.oh()};f.add=function(a){this.mb.set(hg(a),a)};f.vs=function(a){a=Wf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.Rf=function(a){a=Wf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.mb.remove(hg(a))};f.clear=function(){this.mb.clear()};f.Bn=function(){return this.mb.Bn()};
f.contains=function(a){a=hg(a);return id(this.mb.mb,a)};f.Lz=function(a){var b=new gg;a=Wf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.Zj=function(){return this.mb.Zj()};f.clone=function(){return new gg(this)};f.sl=function(a){return this.oh()==Vf(a)&&ig(this,a)};
function ig(a,b){var c=Vf(b);if(a.oh()>c)return!1;!(b instanceof gg)&&5<c&&(b=new gg(b));return Zf(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.Qs?c.Qs(a):ha(c)||r(c)?Hb(c,a):qb(c,a)})};function jg(a){var b;b||(b=kg(a||arguments.callee.caller,[]));return b}
function kg(a,b){var c=[];if(Hb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(lg(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=lg(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(kg(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function lg(a){if(mg[a])return mg[a];a=String(a);if(!mg[a]){var b=/function ([^\(]+)/.exec(a);mg[a]=b?b[1]:"[Anonymous]"}return mg[a]}var mg={};function ng(a,b,c,d,e){this.reset(a,b,c,d,e)}ng.prototype.xy=null;ng.prototype.wy=null;var og=0;ng.prototype.reset=function(a,b,c,d,e){"number"==typeof e||og++;d||ya();this.In=a;this.mI=b;delete this.xy;delete this.wy};ng.prototype.gB=function(a){this.In=a};function pg(a){this.nk=a;this.Az=this.pc=this.In=this.Ha=null}function qg(a,b){this.name=a;this.value=b}qg.prototype.toString=function(){return this.name};var rg=new qg("SEVERE",1E3),sg=new qg("CONFIG",700),tg=new qg("FINE",500);f=pg.prototype;f.getName=function(){return this.nk};f.getParent=function(){return this.Ha};f.mt=function(){this.pc||(this.pc={});return this.pc};f.gB=function(a){this.In=a};
function ug(a){if(a.In)return a.In;if(a.Ha)return ug(a.Ha);fb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=ug(this).value)for(ka(b)&&(b=b()),a=this.az(a,b,c,pg.prototype.log),b="log:"+a.mI,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.Az)for(var e=0,h=void 0;h=c.Az[e];e++)h(d);b=b.getParent()}};
f.az=function(a,b,c,d){a=new ng(a,String(b),this.nk);if(c){a.xy=c;var e;d=d||pg.prototype.az;try{var h;var k=da("window.location.href");if(r(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.gO||"Not available"}catch(m){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(q){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+Pa(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Pa(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Pa(jg(d)+"-> ")}catch(p){e="Exception trying to expose exception! You win, we lose. "+p}a.wy=e}return a};f.jo=function(a){this.Ha=a};var vg={},wg=null;
function xg(a){wg||(wg=new pg(""),vg[""]=wg,wg.gB(sg));var b;if(!(b=vg[a])){b=new pg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=xg(a.substr(0,c));c.mt()[d]=b;b.jo(c);vg[a]=b}return b};function yg(a,b){a&&a.log(tg,b,void 0)};function zg(a){Yc.call(this);this.headers=new gd;this.Ir=a||null;this.ei=!1;this.Hr=this.ua=null;this.Gn=this.Sz=this.Aq="";this.fk=this.Gt=this.nq=this.ht=!1;this.Eo=0;this.yr=null;this.SA=Ag;this.Cr=this.$K=!1}w(zg,Yc);var Ag="",Bg=zg.prototype,Cg=xg("goog.net.XhrIo");Bg.Ze=Cg;var Dg=/^https?$/i,Eg=["POST","PUT"],Fg=[];function Gg(a,b){var c=new zg;Fg.push(c);b&&c.r("complete",b);c.Ut("ready",c.EE);c.send(a,void 0,void 0,void 0)}f=zg.prototype;f.EE=function(){this.g();Kb(Fg,this)};
f.send=function(a,b,c,d){if(this.ua)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Aq+"; newUri="+a);b=b?b.toUpperCase():"GET";this.Aq=a;this.Gn="";this.Sz=b;this.ht=!1;this.ei=!0;this.ua=this.Ir?fg(this.Ir):fg(dg);this.Hr=this.Ir?bg(this.Ir):bg(dg);this.ua.onreadystatechange=ta(this.wA,this);try{yg(this.Ze,Hg(this,"Opening Xhr")),this.Gt=!0,this.ua.open(b,String(a),!0),this.Gt=!1}catch(e){yg(this.Ze,Hg(this,"Error opening Xhr: "+e.message));Ig(this,e);return}a=c||"";var h=
this.headers.clone();d&&Yf(d,function(a,b){h.set(b,a)});d=Fb(h.jn());c=ba.FormData&&a instanceof ba.FormData;!Hb(Eg,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.ua.setRequestHeader(b,a)},this);this.SA&&(this.ua.responseType=this.SA);"withCredentials"in this.ua&&(this.ua.withCredentials=this.$K);try{Jg(this),0<this.Eo&&(this.Cr=Kg(this.ua),yg(this.Ze,Hg(this,"Will abort after "+this.Eo+"ms if incomplete, xhr2 "+this.Cr)),this.Cr?(this.ua.timeout=
this.Eo,this.ua.ontimeout=ta(this.UB,this)):this.yr=Uf(this.UB,this.Eo,this)),yg(this.Ze,Hg(this,"Sending request")),this.nq=!0,this.ua.send(a),this.nq=!1}catch(k){yg(this.Ze,Hg(this,"Send error: "+k.message)),Ig(this,k)}};function Kg(a){return E&&nc(9)&&t(a.timeout)&&ca(a.ontimeout)}function Gb(a){return"content-type"==a.toLowerCase()}f.UB=function(){"undefined"!=typeof aa&&this.ua&&(this.Gn="Timed out after "+this.Eo+"ms, aborting",yg(this.Ze,Hg(this,this.Gn)),this.dispatchEvent("timeout"),this.abort(8))};
function Ig(a,b){a.ei=!1;a.ua&&(a.fk=!0,a.ua.abort(),a.fk=!1);a.Gn=b;Lg(a);Mg(a)}function Lg(a){a.ht||(a.ht=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.ua&&this.ei&&(yg(this.Ze,Hg(this,"Aborting")),this.ei=!1,this.fk=!0,this.ua.abort(),this.fk=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Mg(this))};f.e=function(){this.ua&&(this.ei&&(this.ei=!1,this.fk=!0,this.ua.abort(),this.fk=!1),Mg(this,!0));zg.c.e.call(this)};
f.wA=function(){this.Pj||(this.Gt||this.nq||this.fk?Ng(this):this.$I())};f.$I=function(){Ng(this)};
function Ng(a){if(a.ei&&"undefined"!=typeof aa)if(a.Hr[1]&&4==Og(a)&&2==Pg(a))yg(a.Ze,Hg(a,"Local request error detected and ignored"));else if(a.nq&&4==Og(a))Uf(a.wA,0,a);else if(a.dispatchEvent("readystatechange"),4==Og(a)){yg(a.Ze,Hg(a,"Request complete"));a.ei=!1;try{var b=Pg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Qf(String(a.Aq))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Dg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Og(a)?a.ua.statusText:""}catch(n){yg(a.Ze,"Can not get status: "+n.message),l=""}a.Gn=l+" ["+Pg(a)+"]";Lg(a)}}finally{Mg(a)}}}
function Mg(a,b){if(a.ua){Jg(a);var c=a.ua,d=a.Hr[0]?ea:null;a.ua=null;a.Hr=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.Ze)&&c.log(rg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Jg(a){a.ua&&a.Cr&&(a.ua.ontimeout=null);t(a.yr)&&(ba.clearTimeout(a.yr),a.yr=null)}f.tg=function(){return!!this.ua};function Og(a){return a.ua?a.ua.readyState:0}function Pg(a){try{return 2<Og(a)?a.ua.status:-1}catch(b){return-1}}
function Hg(a,b){return b+" ["+a.Sz+" "+a.Aq+" "+Pg(a)+"]"};/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function L(){}v("gxnat",L);L.JPEG_CONVERT_SUFFIX="?format=image/jpeg";L.pF={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};L.Cw="?format=zip";L.uh=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);L.get(a,b,"json")};
L.get=function(a,b,c){Gg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.ua?$f(a.ua.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.ua?a.ua.responseText:""}catch(h){yg(a.Ze,"Can not get responseText: "+h.message),e=""}b(e)}})};
L.Kq=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(L.Kq.EH&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(L.Kq.EH&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
L.BK=function(a,b){var c=[],d={},e=[],h={};D(a,function(a){h=a;D(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(L.lO);D(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",L.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",L.pF);v("gxnat.ZIP_SUFFIX",L.Cw);v("gxnat.jsonGet",L.uh);v("gxnat.get",L.get);v("gxnat.naturalSort",L.Kq);v("gxnat.sortXnatPropertiesArray",L.BK);function Qg(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Rg(this)}w(Qg,uc);v("gxnat.Path",Qg);
function Sg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Tg(a){for(var b=0,c=Ug.length,b=0;b<c;b++)a(Ug[b],b)}function Vg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Ug=["projects","subjects","experiments",["scans","resources"],"files"];
function Rg(a){var b,c,d,e=!1;Tg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.$s=Ug[k-1],e=!0);else null!=this[a]||e||(this.$s=Ug[k-1],e=!0)}.bind(a))}Qg.prototype.Yp=function(){null!=this.$s||Rg(this);return this.$s};
Qg.prototype.Bh=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=Ug.length,k=0,d=0;d<h;d++){c=Ug[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Qg.prototype.g=function(){Qg.c.g.call(this);tb(this)};v("gxnat.Path.getQueryPrefix",Sg);v("gxnat.Path.forEachXnatLevel",Tg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Qg(a),d=new Qg(b),e=void 0;Tg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",Vg);v("gxnat.Path.xnatLevelOrder",Ug);v("gxnat.Path.prototype.getDeepestLevel",Qg.prototype.Yp);v("gxnat.Path.prototype.pathByLevel",Qg.prototype.Bh);v("gxnat.Path.prototype.dispose",Qg.prototype.g);function Wg(a){this.ud=new Qg(a);this.projects=[];this[Xg]={};this[Yg]={};this[Zg]={}}w(Wg,uc);v("gxnat.ProjectTree",Wg);function $g(a){this[ah]=r(a)?new Qg(a):a;this[bh]=this[ah].Yp();a=Ug.indexOf(this[ah].Yp())+1;-1!=a&&(this[ch]=Ug[a],r(this[ch])&&(this[dh]=this[ah].originalUrl+"/"+this[ch],this[this[ch]]=[]))}w($g,uc);v("gxnat.ProjectTree.TreeNode",$g);$g.prototype.Ce=function(a){this.vb=a};$g.prototype.Pd=function(){return this.vb};
$g.prototype.g=function(){$g.c.g.call(this);null!=this[ah]&&this[ah].g();tb(this)};var bh=B(),dh=B(),eh=B(),ah=B(),ch=B(),fh=B(),gh=B(),hh=B(),Xg=B(),Yg=B(),Zg=B(),ih=["ID","description","name","URI"],jh=["gender","handedness","label","URI"],kh=["label","URI"];function lh(a,b){return La(a.Pd(),b.Pd())}function mh(a){var b="&columns=";D(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=Wg.prototype;
f.Gy=function(a){var b=[];C(this.en(a),function(a,d){"projects"==d?b.push(a[hh].ID):b.push(a[hh].label)});return b};f.Hy=function(a){var b=[];C(this.en(a),function(a){b.push(a[ah].originalUrl)});return b};f.en=function(a){branch={projects:this.gd};"experiments"==a[ch]?branch.subjects=a:g(a[ch])&&(branch.subjects=this[Yg][a[ah].Bh("subjects")],branch.experiments=a);return branch};f.Xz=function(a,b){this.Jn(this.ud,a,b)};
f.Jn=function(a,b,c){var d=r(a)?new Qg(a):a,e;if(null!=this.gd){a={projects:this.gd};if(null!=d.subjects){e=d.Bh("subjects");if(null==this[Yg][e]){this.Xt(e,function(a){this.Zz(a,function(){null!=b&&b(a);this.Jn(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[Yg][e]}if(null!=d.experiments){e=d.Bh("experiments");if(null==this[Zg][e]){this.Wt(e,function(a){null!=b&&b(a);this.Jn(d,b,c)}.bind(this));return}a.experiments=this[Zg][e]}null!=c&&c(a)}else this.Yz(function(a){null!=b&&b(a);this.Jn(d,
b,c)}.bind(this))};f.Yz=function(a){if(null==this.gd){var b=mh(ih),c=this.ud.prefix+"/projects/"+this.ud.projects,d;L.uh(this.ud.prefix+"/projects",function(b){d=new $g(c);this.projects.push(d);this.gd=d;this[Xg][d[ah].originalUrl]=d;d[hh]=b[0];d.Ce(d[hh].name);a(d)}.bind(this),"&ID="+this.ud.projects+b)}};f.ln=function(a){return this[Yg][a]};f.yl=function(a){return this[Zg][a]};
f.Zz=function(a,b){var c=a;r(a)?c=this.ln(a):a instanceof Qg&&(c=this.ln(a.originalUrl));if(null!=c[hh])b(c);else{var d=this.ud.prefix+"/subjects",e=mh(jh),e="&ID="+c[ah].subjects+e;L.uh(d,function(a){c[hh]=a[0];c.Ce(c[hh].label);b(c)}.bind(this),e)}};
f.$z=function(a,b){if(null==this.gd[fh]||!0!=this.gd[fh]){var c=this.gd[ah].prefix+"/subjects",d="&project="+this.gd[ah].projects+mh(jh),e,h;L.uh(c,function(c){D(c,function(d){h=this.gd[ah].prefix+"/projects/"+this.gd[ah].projects+"/subjects/"+d.ID;e=this.Xt(h);null==e[hh]&&(e[hh]=d,e.Ce(e[hh].label));null!=a&&a(e);this.gd.subjects.length==c.length&&(this.gd[fh]=!0,null!=b&&(d=this.gd.subjects,d.sort(lh),b(d)))}.bind(this))}.bind(this),d)}};
f.Xt=function(a,b){if(null!=this[Yg][a])return this[Yg][a];subjNode=new $g(a);this.gd.subjects.push(subjNode);this[Yg][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.Vz=function(a,b){var c=a;r(a)?c=this.yl(a):a instanceof Qg&&(c=this.yl(a.originalUrl));var d=this.ud.prefix+"/experiments",e=mh(kh),e="&ID="+c[ah].experiments+e;L.uh(d,function(a){c[hh]=a[0];c.Ce(c[hh].label);b(c)}.bind(this),e)};
f.Wz=function(a,b,c){var d=a;r(a)?d=this.ln(a):a instanceof Qg&&(d=this.ln(a.originalUrl));if(null!=d[fh]&&!0==d[fh])window.console.log("Don't need to reload the experiments of "+d[ah].originalUrl);else{var e=d[ah].originalUrl+"/experiments";L.uh(e+"?xsiType=xnat:imageSessionData",function(a){D(a,function(k){this.Wt(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[fh]=!0,null!=c&&(e=d.experiments,e.sort(lh),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Wt=function(a,b){null==this[Zg][a]&&(exptNode=new $g(a),this.Vz(exptNode,function(c){this[Yg][c[ah].Bh("subjects")].experiments.push(c);this[Zg][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){Wg.c.g.call(this);delete this.gd;this.ud.g();delete this.ud;D(this.projects,function(a){null!=a.subjects&&D(a.subjects,function(a){null!=a.experiments&&D(a.experiments,function(a){a.g()});a.g()});a.g()});tb(this)};v("gxnat.ProjectTree.TreeNode",$g);v("gxnat.ProjectTree.LEVEL_KEY",bh);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",dh);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",eh);v("gxnat.ProjectTree.PATH_KEY",ah);v("gxnat.ProjectTree.NEXTLEVEL_KEY",ch);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",fh);v("gxnat.ProjectTree.ISLOADING_KEY",gh);v("gxnat.ProjectTree.METADATA_KEY",hh);v("gxnat.ProjectTree.PROJ_DIRECT",Xg);v("gxnat.ProjectTree.SUBJ_DIRECT",Yg);v("gxnat.ProjectTree.EXPT_DIRECT",Zg);v("gxnat.ProjectTree.PROJECT_METADATA",ih);v("gxnat.ProjectTree.SUBJECT_METADATA",jh);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",kh);v("gxnat.ProjectTree.compareNodeTitles",lh);v("gxnat.ProjectTree.getColumnQuery",mh);v("gxnat.ProjectTree.prototype.getBranchTitles",Wg.prototype.Gy);v("gxnat.ProjectTree.prototype.getBranchUris",Wg.prototype.Hy);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",Wg.prototype.en);v("gxnat.ProjectTree.prototype.loadInitBranch",Wg.prototype.Xz);v("gxnat.ProjectTree.prototype.loadBranch",Wg.prototype.Jn);v("gxnat.ProjectTree.prototype.loadProject",Wg.prototype.Yz);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",Wg.prototype.ln);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",Wg.prototype.yl);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",Wg.prototype.Zz);v("gxnat.ProjectTree.prototype.loadSubjects",Wg.prototype.$z);v("gxnat.ProjectTree.prototype.loadSubject",Wg.prototype.Xt);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",Wg.prototype.Vz);v("gxnat.ProjectTree.prototype.loadExperiments",Wg.prototype.Wz);
v("gxnat.ProjectTree.prototype.loadExperiment",Wg.prototype.Wt);v("gxnat.ProjectTree.prototype.dispose",Wg.prototype.g);function nh(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function M(a,b){var c=nh(a),d=Ob(arguments,1),e=c.length+d.length;oh(c,d);a.className=c.join(" ");return c.length==e}function ph(a,b){var c=nh(a),d=Ob(arguments,1),e=qh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function oh(a,b){for(var c=0;c<b.length;c++)Hb(a,b[c])||a.push(b[c])}function qh(a,b){return Bb(a,function(a){return!Hb(b,a)})}
function rh(a,b,c){var d=nh(a);r(b)?Kb(d,b):g(b)&&(d=qh(d,b));r(c)&&!Hb(d,c)?d.push(c):g(c)&&oh(d,c);a.className=d.join(" ")};function N(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=N.prototype;f.clone=function(){return new N(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function sh(a,b){return new N(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof N?(this.x+=a.x,this.y+=a.y):(this.x+=a,t(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=t(b)?b:a;this.x*=a;this.y*=c;return this};function th(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=th.prototype;f.clone=function(){return new th(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof th?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof N?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,t(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=t(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function uh(a,b){this.width=a;this.height=b}function vh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=uh.prototype;f.clone=function(){return new uh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.Bn=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=t(b)?b:a;this.width*=a;this.height*=c;return this};function wh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=wh.prototype;f.clone=function(){return new wh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.Lz=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof wh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function xh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.et=function(a){return Math.sqrt(xh(this,a))};f.Ei=function(){return new uh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof N?(this.left+=a.x,this.top+=a.y):(this.left+=a,t(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=t(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function yh(){return gc?"Webkit":fc?"Moz":E?"ms":ec?"O":null};var zh=!E||oc(9),Ah=!fc&&!E||E&&oc(9)||fc&&nc("1.9.1"),Bh=E&&!nc("9");function Ch(a){return a?new Dh(Fh(a)):Ca||(Ca=new Dh)}function Gh(a){return r(a)?document.getElementById(a):a}function Hh(a,b,c){return Ih(document,a,b,c)}function Jh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Ih(document,"*",a,b)}function Kh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Ih(document,"*",a,b)[0])||null}
function Ih(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Hb(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Lh(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Mh?a.setAttribute(Mh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Mh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Nh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new uh(a.clientWidth,a.clientHeight)}function Oh(a){return gc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Ph(a){return a?a.parentWindow||a.defaultView:window}function Q(a,b,c){return Qh(document,arguments)}
function Qh(a,b){var c=b[0],d=b[1];if(!zh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Pa(d.name),'"');if(d.type){c.push(' type="',Pa(d.type),'"');var e={};xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(r(d)?c.className=d:g(d)?c.className=d.join(" "):Lh(c,d));2<b.length&&Rh(a,c,b,2);return c}function Rh(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ha(h)||ma(h)&&0<h.nodeType?e(h):D(Sh(h)?Mb(h):h,e)}}
function Th(a,b){Rh(Fh(a),a,arguments,1)}function Uh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Vh(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function S(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function Wh(a){return Ah&&void 0!=a.children?a.children:Bb(a.childNodes,function(a){return 1==a.nodeType})}function Xh(a){return void 0!=a.firstElementChild?a.firstElementChild:Yh(a.firstChild)}
function Zh(a){return void 0!=a.nextElementSibling?a.nextElementSibling:Yh(a.nextSibling)}function Yh(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function $h(a){return ma(a)&&1==a.nodeType}function ai(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function bi(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var h=[],k=arguments[b];k;)h.unshift(k),k=k.parentNode;d.push(h);e=Math.min(e,h.length)}h=null;for(b=0;b<e;b++){for(var k=d[0][b],l=1;l<c;l++)if(k!=d[l][b])return h;h=k}return h}function Fh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ci(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Uh(a),a.appendChild(Fh(a).createTextNode(String(b)))}var di={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ei={IMG:" ",BR:"\n"};function fi(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function gi(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function hi(a){a=a.tabIndex;return t(a)&&0<=a&&32768>a}function ii(a){if(Bh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];ji(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Bh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function ki(a){var b=[];ji(a,b,!1);return b.join("")}
function ji(a,b,c){if(!(a.nodeName in di))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ei)b.push(ei[a.nodeName]);else for(a=a.firstChild;a;)ji(a,b,c),a=a.nextSibling}function Sh(a){if(a&&"number"==typeof a.length){if(ma(a))return"function"==typeof a.item||"string"==typeof a.item;if(ka(a))return"function"==typeof a.item}return!1}
function li(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return mi(a,function(a){return(!d||a.nodeName==d)&&(!c||r(a.className)&&Hb(a.className.split(/\s+/),c))})}function mi(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Dh(a){this.ha=a||ba.document||document}f=Dh.prototype;f.G=Ch;function ni(a){return a.ha}f.a=function(a){return r(a)?this.ha.getElementById(a):a};f.oC=Dh.prototype.a;f.p=function(a,b,c){return Qh(this.ha,arguments)};f.createElement=function(a){return this.ha.createElement(a)};
f.createTextNode=function(a){return this.ha.createTextNode(String(a))};function oi(a){return"CSS1Compat"==a.ha.compatMode}function pi(a){a=a.ha;return a.parentWindow||a.defaultView}function qi(a){var b=a.ha;a=Oh(b);b=b.parentWindow||b.defaultView;return E&&nc("10")&&b.pageYOffset!=a.scrollTop?new N(a.scrollLeft,a.scrollTop):new N(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.Kt=Vh;f.removeNode=S;f.mt=Wh;f.Sy=Xh;f.contains=ai;
f.sh=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!gi(a)||hi(a)):gi(a)&&hi(a))&&E?(a=ka(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function ri(a,b,c){r(b)?si(a,c,b):C(b,va(si,a))}function si(a,b,c){a:if(c=bb(c),void 0===a.style[c]){var d=yh()+db(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function ti(a,b){var c=Fh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function ui(a,b){return ti(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function vi(a){return ui(a,"position")}
function wi(a,b,c){var d,e=fc&&(ac||jc)&&nc("1.9");b instanceof N?(d=b.x,b=b.y):(d=b,b=c);a.style.left=xi(d,e);a.style.top=xi(b,e)}function yi(a){return new N(a.offsetLeft,a.offsetTop)}function zi(a){a=a?Fh(a):document;return!E||oc(9)||oi(Ch(a))?a.documentElement:a.body}
function Ai(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Bi(a){if(E&&!oc(8))return a.offsetParent;var b=Fh(a),c=ui(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=ui(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ci(a){for(var b=new th(0,Infinity,Infinity,0),c=Ch(a),d=c.ha.body,e=c.ha.documentElement,h=Oh(c.ha);a=Bi(a);)if(!(E&&0==a.clientWidth||gc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=ui(a,"overflow")){var k=Di(a),l;l=a;if(fc&&!nc("1.9")){var n=parseFloat(ti(l,"borderLeftWidth"));if(Ei(l))var m=l.offsetWidth-l.clientWidth-n-parseFloat(ti(l,"borderRightWidth")),n=n+m;l=new N(n,parseFloat(ti(l,"borderTopWidth")))}else l=new N(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=Nh(pi(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Di(a){var b,c=Fh(a),d=ui(a,"position"),e=fc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new N(0,0),k=zi(c);if(a==k)return h;if(a.getBoundingClientRect)b=Ai(a),a=qi(Ch(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(gc&&"fixed"==vi(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(ec||gc&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=Bi(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,ec&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}function Fi(a,b){var c=Gi(a),d=Gi(b);return new N(c.x-d.x,c.y-d.y)}
function Hi(a){var b;if(a.getBoundingClientRect)b=Ai(a),b=new N(b.left,b.top);else{b=qi(Ch(a));var c=Di(a);b=new N(c.x-b.x,c.y-b.y)}if(fc&&!nc(12)){b:{c=bb("transform");if(void 0===a.style[c]&&(c=yh()+db(c),void 0!==a.style[c])){c=(gc?"-webkit":fc?"-moz":E?"-ms":ec?"-o":null)+"-transform";break b}c="transform"}a=(a=ui(a,c)||ui(a,"transform"))?(a=a.match(Ii))?new N(parseFloat(a[1]),parseFloat(a[2])):new N(0,0):new N(0,0);a=new N(b.x+a.x,b.y+a.y)}else a=b;return a}
function Gi(a){if(1==a.nodeType)return Hi(a);var b=ka(a.tF),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.tc.targetTouches&&(c=a.tc.targetTouches[0]);return new N(c.clientX,c.clientY)}function Ji(a,b,c){if(b instanceof uh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Ki(a,b);Li(a,c)}function xi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Li(a,b){a.style.height=xi(b,!0)}function Ki(a,b){a.style.width=xi(b,!0)}
function U(a){var b=Mi;if("none"!=ui(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Mi(a){var b=a.offsetWidth,c=a.offsetHeight,d=gc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new uh(b,c):(a=Ai(a),new uh(a.right-a.left,a.bottom-a.top))}function Ni(a){var b=Di(a);a=U(a);return new wh(b.x,b.y,a.width,a.height)}
function Oi(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Pi(a,b){a.style.display=b?"":"none"}function Qi(a){E&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Ei(a){return"rtl"==ui(a,"direction")}var Ri=fc?"MozUserSelect":gc?"WebkitUserSelect":null;
function Si(a,b,c){c=c?null:a.getElementsByTagName("*");if(Ri){if(b=b?"none":"",a.style[Ri]=b,c){a=0;for(var d;d=c[a];a++)d.style[Ri]=b}}else if(E||ec)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Ti(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Ui(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Ti(a,c):0}function Vi(a,b){if(E){var c=Ui(a,b+"Left"),d=Ui(a,b+"Right"),e=Ui(a,b+"Top"),h=Ui(a,b+"Bottom");return new th(e,d,h,c)}c=ti(a,b+"Left");d=ti(a,b+"Right");e=ti(a,b+"Top");h=ti(a,b+"Bottom");return new th(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var Wi={thin:2,medium:4,thick:6};
function Xi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Wi?Wi[c]:Ti(a,c)}function Yi(a){if(E&&!oc(9)){var b=Xi(a,"borderLeft"),c=Xi(a,"borderRight"),d=Xi(a,"borderTop");a=Xi(a,"borderBottom");return new th(d,c,a,b)}b=ti(a,"borderLeftWidth");c=ti(a,"borderRightWidth");d=ti(a,"borderTopWidth");a=ti(a,"borderBottomWidth");return new th(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Ii=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Zi(a){uc.call(this);this.Hc=a;this.Xa={}}w(Zi,uc);var $i=[];f=Zi.prototype;f.r=function(a,b,c,d){g(b)||(b&&($i[0]=b.toString()),b=$i);for(var e=0;e<b.length;e++){var h=G(a,b[e],c||this.handleEvent,d||!1,this.Hc||this);if(!h)break;this.Xa[h.key]=h}return this};f.Ut=function(a,b,c,d){return aj(this,a,b,c,d)};function aj(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)aj(a,b,c[k],d,e,h);else{b=Rc(b,c,d||a.handleEvent,e,h||a.Hc||a);if(!b)return a;a.Xa[b.key]=b}return a}
f.eb=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.eb(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.Hc||this,c=Lc(c),d=!!d,b=ib(a)?a.kn(b,c,d,e):a?(a=Nc(a))?a.kn(b,c,d,e):null:null,b&&(Tc(b),delete this.Xa[b.key]);return this};f.Rf=function(){C(this.Xa,Tc);this.Xa={}};f.e=function(){Zi.c.e.call(this);this.Rf()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function bj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=vi(a)||(c=Fh(a).documentElement);if(!c)return b;if(fc)var d=Yi(c),b=b+d.left;else oc(8)&&(d=Yi(c),b-=d.left);return Ei(c)?c.clientWidth-(b+a.offsetWidth):b};function cj(a,b,c){Yc.call(this);this.target=a;this.handle=b||a;this.Tt=c||new wh(NaN,NaN,NaN,NaN);this.ha=Fh(a);this.ec=new Zi(this);xc(this,va(yc,this.ec));G(this.handle,["touchstart","mousedown"],this.vo,!1,this)}w(cj,Yc);var dj=E||fc&&nc("1.9.3");f=cj.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.uv=0;f.vv=0;f.ih=0;f.td=0;f.sc=!0;f.ui=!1;f.Fz=0;f.Iq=0;f.xH=!1;f.Fk=!1;f.wi=function(a){this.Fk=a};f.Ua=function(){return this.ec};function ej(a,b){a.Tt=b||new wh(NaN,NaN,NaN,NaN)}
f.oB=function(a){this.gr=a};f.Zb=function(a){this.sc=a};f.e=function(){cj.c.e.call(this);Sc(this.handle,["touchstart","mousedown"],this.vo,!1,this);this.ec.Rf();dj&&this.ha.releaseCapture();this.handle=this.target=null};function fj(a){ca(a.Dg)||(a.Dg=Ei(a.target));return a.Dg}
f.vo=function(a){var b="mousedown"==a.type;if(!this.sc||this.ui||b&&!Hc(a))this.dispatchEvent("earlycancel");else{gj(a);if(0==this.Fz)if(this.dispatchEvent(new hj("start",this,a.clientX,a.clientY)))this.ui=!0,a.preventDefault();else return;else a.preventDefault();var b=this.ha,c=b.documentElement,d=!dj;this.ec.r(b,["touchmove","mousemove"],this.oH,d);this.ec.r(b,["touchend","mouseup"],this.xi,d);dj?(c.setCapture(!1),this.ec.r(c,"losecapture",this.xi)):this.ec.r(Ph(b),"blur",this.xi);E&&this.xH&&this.ec.r(b,
"dragstart",Dc);this.gr&&this.ec.r(this.gr,"scroll",this.Rl,d);this.clientX=this.uv=a.clientX;this.clientY=this.vv=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.ih=this.Fk?bj(this.target):this.target.offsetLeft;this.td=this.target.offsetTop;this.Ou=qi(Ch(this.ha));this.Iq=ya()}};
f.xi=function(a,b){this.ec.Rf();dj&&this.ha.releaseCapture();if(this.ui){gj(a);this.ui=!1;var c=ij(this,this.ih),d=jj(this,this.td);this.dispatchEvent(new hj("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function gj(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.ia(a.tc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.ia(a.tc.changedTouches[0],a.currentTarget)}
f.oH=function(a){if(this.sc){gj(a);var b=(this.Fk&&fj(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.ui){var d=this.uv-this.clientX,e=this.vv-this.clientY;if(d*d+e*e>this.Fz)if(this.dispatchEvent(new hj("start",this,a.clientX,a.clientY)))this.ui=!0;else{this.Pj||this.xi(a);return}}c=kj(this,b,c);b=c.x;c=c.y;this.ui&&this.dispatchEvent(new hj("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(lj(this,a,b,c),a.preventDefault())}};function kj(a,b,c){var d=qi(Ch(a.ha));b+=d.x-a.Ou.x;c+=d.y-a.Ou.y;a.Ou=d;a.ih+=b;a.td+=c;b=ij(a,a.ih);a=jj(a,a.td);return new N(b,a)}f.Rl=function(a){var b=kj(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;lj(this,a,b.x,b.y)};function lj(a,b,c,d){a.at(c,d);a.dispatchEvent(new hj("drag",a,b.clientX,b.clientY,0,c,d))}
function ij(a,b){var c=a.Tt,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function jj(a,b){var c=a.Tt,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.at=function(a,b){this.Fk&&fj(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.Jf=function(){return this.ui};
function hj(a,b,c,d,e,h,k,l){Cc.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(h)?h:b.ih;this.top=ca(k)?k:b.td;this.gt=b;this.aF=!!l}w(hj,Cc);yb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function mj(){this.Vu="";this.pD=nj;this.qy=null}mj.prototype.Oy=function(){return this.qy};mj.prototype.toString=function(){return"SafeHtml{"+this.Vu+"}"};function oj(a){if(a instanceof mj&&a.constructor===mj&&a.pD===nj)return a.Vu;fb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}yb("action","cite","data","formaction","href","manifest","poster","src");yb("link","script","style");var nj={};function pj(a,b){var c=new mj;c.Vu=a;c.qy=b;return c}var qj=pj("",0);function rj(){}fa(rj);rj.prototype.pA=0;function sj(a){Yc.call(this);this.bb=a||Ch();this.Dg=tj;this.Xe=null;this.$=!1;this.l=null;this.Fi=void 0;this.Bf=this.pc=this.Ha=this.fu=null;this.gC=!1}w(sj,Yc);sj.prototype.vH=rj.Od();var tj=null;
function uj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function vj(a){return a.Xe||(a.Xe=":"+(a.vH.pA++).toString(36))}function wj(a,b){if(a.Ha&&a.Ha.Bf){var c=a.Ha.Bf,d=a.Xe;d in c&&delete c[d];ub(a.Ha.Bf,b,a)}a.Xe=b}f=sj.prototype;
f.a=function(){return this.l};f.Ua=function(){this.Fi||(this.Fi=new Zi(this));return this.Fi};f.io=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Ha&&this.Xe&&xj(this.Ha,this.Xe)&&this.Ha!=a)throw Error("Unable to set parent component");this.Ha=a;sj.c.fv.call(this,a)};f.getParent=function(){return this.Ha};f.fv=function(a){if(this.Ha&&this.Ha!=a)throw Error("Method not supported");sj.c.fv.call(this,a)};f.G=function(){return this.bb};f.p=function(){this.l=this.bb.createElement("div")};
f.k=function(a){this.Cg(a)};f.Cg=function(a,b){if(this.$)throw Error("Component already rendered");this.l||this.p();a?a.insertBefore(this.l,b||null):this.bb.ha.body.appendChild(this.l);this.Ha&&!this.Ha.$||this.Sa()};f.ob=function(a){if(this.$)throw Error("Component already rendered");if(a&&this.qe(a)){this.gC=!0;var b=Fh(a);this.bb&&this.bb.ha==b||(this.bb=Ch(a));this.Kd(a);this.Sa()}else throw Error("Invalid element to decorate");};f.qe=function(){return!0};f.Kd=function(a){this.l=a};
f.Sa=function(){this.$=!0;yj(this,function(a){!a.$&&a.a()&&a.Sa()})};f.fc=function(){yj(this,function(a){a.$&&a.fc()});this.Fi&&this.Fi.Rf();this.$=!1};f.e=function(){this.$&&this.fc();this.Fi&&(this.Fi.g(),delete this.Fi);yj(this,function(a){a.g()});!this.gC&&this.l&&S(this.l);this.Ha=this.fu=this.l=this.Bf=this.pc=null;sj.c.e.call(this)};f.Jm=function(a,b){this.ws(a,zj(this),b)};
f.ws=function(a,b,c){if(a.$&&(c||!this.$))throw Error("Component already rendered");if(0>b||b>zj(this))throw Error("Child component index out of bounds");this.Bf&&this.pc||(this.Bf={},this.pc=[]);if(a.getParent()==this){var d=vj(a);this.Bf[d]=a;Kb(this.pc,a)}else ub(this.Bf,vj(a),a);a.io(this);Nb(this.pc,b,0,a);a.$&&this.$&&a.getParent()==this?(c=this.Ta(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.l||this.p(),b=Aj(this,b+1),a.Cg(this.Ta(),b?b.l:null)):this.$&&!a.$&&a.l&&a.l.parentNode&&
1==a.l.parentNode.nodeType&&a.Sa()};f.Ta=function(){return this.l};f.we=function(){null==this.Dg&&(this.Dg=Ei(this.$?this.l:this.bb.ha.body));return this.Dg};f.Wl=function(a){if(this.$)throw Error("Component already rendered");this.Dg=a};function zj(a){return a.pc?a.pc.length:0}function xj(a,b){var c;a.Bf&&b?(c=a.Bf,c=(b in c?c[b]:void 0)||null):c=null;return c}function Aj(a,b){return a.pc?a.pc[b]||null:null}function yj(a,b,c){a.pc&&D(a.pc,b,c)}function Bj(a,b){return a.pc&&b?Ab(a.pc,b):-1}
f.removeChild=function(a,b){if(a){var c=r(a)?a:vj(a);a=xj(this,c);if(c&&a){var d=this.Bf;c in d&&delete d[c];Kb(this.pc,a);b&&(a.fc(),a.l&&S(a.l));a.io(null)}}if(!a)throw Error("Child is not in parent component");return a};function Cj(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!fc;default:return 166>a.keyCode||183<a.keyCode}}
function Dj(a,b,c,d,e){if(!(E||gc&&nc("525")))return!0;if(ac&&e)return Ej(a);if(e&&!d)return!1;t(b)&&(b=Fj(b));if(!c&&(17==b||18==b||ac&&91==b))return!1;if(gc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return!(E&&oc(9));case 27:return!gc}return Ej(a)}
function Ej(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||gc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Fj(a){if(fc)a=Gj(a);else if(ac&&gc)a:switch(a){case 93:a=91;break a}return a}
function Gj(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Hj(a,b){Yc.call(this);this.Hc=new Zi(this);this.av(a||null);b&&(this.em=b)}w(Hj,Yc);f=Hj.prototype;f.l=null;f.vE=!0;f.Jx=null;f.Kx=null;f.Ol=!1;f.tK=!1;f.Pt=-1;f.tH=!1;f.cF=!0;f.em="toggle_display";f.a=function(){return this.l};f.av=function(a){if(this.Ol)throw Error("Can not change this state of the popup while showing.");this.l=a};f.uB=function(a,b){this.Yl=a;this.Gl=b};f.Ua=function(){return this.Hc};f.ra=function(){return this.Ol};
f.U=function(a){this.Yl&&this.Yl.stop();this.Gl&&this.Gl.stop();a?this.mv():this.Hl()};f.Wd=ea;
f.mv=function(){if(!this.Ol&&this.ru()){if(!this.l)throw Error("Caller must call setElement before trying to show the popup");this.Wd();var a=Fh(this.l);this.tH&&this.Hc.r(a,"keydown",this.zI,!0);if(this.vE)if(this.Hc.r(a,"mousedown",this.tA,!0),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.Hc.r(a,"mousedown",this.tA,!0);this.Hc.r(a,"deactivate",this.sA)}else this.Hc.r(a,"blur",
this.sA);"toggle_display"==this.em?(this.l.style.visibility="visible",Pi(this.l,!0)):"move_offscreen"==this.em&&this.Wd();this.Ol=!0;this.Pt=ya();this.Yl?(Rc(this.Yl,"end",this.yA,!1,this),this.Yl.play()):this.yA()}};f.Hl=function(a){if(!this.Ol||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.Hc&&this.Hc.Rf();this.Ol=!1;ya();this.Gl?(Rc(this.Gl,"end",va(this.Yx,a),!1,this),this.Gl.play()):this.Yx(a);return!0};
f.Yx=function(a){"toggle_display"==this.em?this.tK?Uf(this.Ez,0,this):this.Ez():"move_offscreen"==this.em&&(this.l.style.top="-10000px");this.xu(a)};f.Ez=function(){this.l.style.visibility="hidden";Pi(this.l,!1)};f.ru=function(){return this.dispatchEvent("beforeshow")};f.yA=function(){this.dispatchEvent("show")};f.xu=function(a){this.dispatchEvent({type:"hide",target:a})};f.tA=function(a){a=a.target;ai(this.l,a)||Ij(this,a)||this.Kx&&!ai(this.Kx,a)||150>ya()-this.Pt||this.Hl(a)};
f.zI=function(a){27==a.keyCode&&this.Hl(a.target)&&(a.preventDefault(),a.stopPropagation())};f.sA=function(a){if(this.cF){var b=Fh(this.l);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||ai(this.l,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.Pt||this.Hl()}};function Ij(a,b){return Db(a.Jx||[],function(a){return b===a||ai(a,b)})}f.e=function(){Hj.c.e.call(this);this.Hc.g();yc(this.Yl);yc(this.Gl);delete this.l;delete this.Hc;delete this.Jx};function Jj(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]}function Kj(a,b){return a.classList?a.classList.contains(b):Hb(Jj(a),b)}function Lj(a,b){a.classList?a.classList.add(b):Kj(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Mj(a,b){if(a.classList)D(b,function(b){Lj(a,b)});else{var c={};D(Jj(a),function(a){c[a]=!0});D(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function Nj(a,b){a.classList?a.classList.remove(b):Kj(a,b)&&(a.className=Bb(Jj(a),function(a){return a!=b}).join(" "))}function Oj(a,b){a.classList?D(b,function(b){Nj(a,b)}):a.className=Bb(Jj(a),function(a){return!Hb(b,a)}).join(" ")}function Pj(a,b,c){c?Lj(a,b):Nj(a,b)};var Qj;function Rj(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Sj(a,b,c){ha(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Qj||(Qj={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Qj,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Tj(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Uj(a){Yc.call(this);this.l=a;a=E?"focusout":"blur";this.VH=G(this.l,E?"focusin":"focus",this,!E);this.WH=G(this.l,a,this,!E)}w(Uj,Yc);Uj.prototype.handleEvent=function(a){var b=new Fc(a.tc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};Uj.prototype.e=function(){Uj.c.e.call(this);Tc(this.VH);Tc(this.WH);delete this.l};function Vj(a,b){sj.call(this,b);this.UK=!!a;this.Hn=null}w(Vj,sj);f=Vj.prototype;f.kt=null;f.jc=!1;f.pe=null;f.Vc=null;f.Wf=null;f.Ds=!1;f.O=function(){return"goog-modalpopup"};f.xl=function(){return this.pe};f.p=function(){Vj.c.p.call(this);var a=this.a(),b=Ja(this.O()).split(" ");Mj(a,b);fi(a,!0);Pi(a,!1);Wj(this);Xj(this)};
function Wj(a){if(a.UK&&!a.Vc){var b;b=a.G().p("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.Vc=b;a.Vc.className=a.O()+"-bg";Pi(a.Vc,!1);Oi(a.Vc,0)}a.pe||(a.pe=a.G().p("div",a.O()+"-bg"),Pi(a.pe,!1))}function Xj(a){a.Wf||(a.Wf=a.G().createElement("span"),Pi(a.Wf,!1),fi(a.Wf,!0),a.Wf.style.position="absolute")}f.QA=function(){this.Ds=!1};f.qe=function(a){return!!a&&"DIV"==a.tagName};
f.Kd=function(a){Vj.c.Kd.call(this,a);a=Ja(this.O()).split(" ");Mj(this.a(),a);Wj(this);Xj(this);Pi(this.a(),!1)};f.Sa=function(){this.Vc&&Vh(this.Vc,this.a());Vh(this.pe,this.a());Vj.c.Sa.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.Wf,a.nextSibling);this.kt=new Uj(ni(this.G()));this.Ua().r(this.kt,"focusin",this.EI);Yj(this,!1)};f.fc=function(){this.ra()&&this.U(!1);yc(this.kt);Vj.c.fc.call(this);S(this.Vc);S(this.pe);S(this.Wf)};
f.U=function(a){a!=this.jc&&(this.sk&&this.sk.stop(),this.nl&&this.nl.stop(),this.rk&&this.rk.stop(),this.ml&&this.ml.stop(),this.$&&Yj(this,a),a?this.mv():this.Hl())};function Yj(a,b){if(b){a.El||(a.El=[]);for(var c=a.G(),c=c.mt(c.ha.body),d=0;d<c.length;d++){var e=c[d];e==a.l||Tj(e,"hidden")||(Sj(e,"hidden",!0),a.El.push(e))}}else if(a.El){for(d=0;d<a.El.length;d++)a.El[d].removeAttribute("aria-hidden");a.El=null}}f.uB=function(a,b,c,d){this.sk=a;this.rk=b;this.nl=c;this.ml=d};
f.mv=function(){if(this.dispatchEvent("beforeshow")){try{this.Hn=ni(this.G()).activeElement}catch(a){}this.Zu();this.Wd();this.Ua().r(pi(this.G()),"resize",this.Zu);Zj(this,!0);this.focus();this.jc=!0;this.sk&&this.nl?(Rc(this.sk,"end",this.Sq,!1,this),this.nl.play(),this.sk.play()):this.Sq()}};
f.Hl=function(){if(this.dispatchEvent("beforehide")){this.Ua().eb(pi(this.G()),"resize",this.Zu);this.jc=!1;this.rk&&this.ml?(Rc(this.rk,"end",this.Nq,!1,this),this.ml.play(),this.rk.play()):this.Nq();try{var a=ni(this.G()).body,b=ni(this.G()).activeElement||a;this.Hn&&b==a&&this.Hn!=a&&this.Hn.focus()}catch(c){}this.Hn=null}};function Zj(a,b){a.Vc&&Pi(a.Vc,b);a.pe&&Pi(a.pe,b);Pi(a.a(),b);Pi(a.Wf,b)}f.Sq=function(){this.dispatchEvent("show")};f.Nq=function(){Zj(this,!1);this.dispatchEvent("hide")};
f.ra=function(){return this.jc};f.focus=function(){this.By()};f.Zu=function(){this.Vc&&Pi(this.Vc,!1);this.pe&&Pi(this.pe,!1);var a=ni(this.G()),b=Nh(Ph(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.Vc&&(Pi(this.Vc,!0),Ji(this.Vc,c,a));this.pe&&(Pi(this.pe,!0),Ji(this.pe,c,a))};
f.Wd=function(){var a=ni(this.G()),b=Ph(a)||window;if("fixed"==vi(this.a()))var c=a=0;else c=qi(this.G()),a=c.x,c=c.y;var d=U(this.a()),b=Nh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);wi(this.a(),a,c);wi(this.Wf,a,c)};f.EI=function(a){this.Ds?this.QA():a.target==this.Wf&&Uf(this.By,0,this)};f.By=function(){try{E&&ni(this.G()).body.focus(),this.a().focus()}catch(a){}};
f.e=function(){yc(this.sk);this.sk=null;yc(this.rk);this.rk=null;yc(this.nl);this.nl=null;yc(this.ml);this.ml=null;Vj.c.e.call(this)};function ak(a,b,c){Vj.call(this,b,c);this.sd=a||"modal-dialog";this.P=bk(bk(new ck,dk,!0),ek,!1,!0)}w(ak,Vj);f=ak.prototype;f.vy=!0;f.Ft=!0;f.eu=!0;f.Rp=!0;f.Bp=.5;f.vb="";f.qc=null;f.La=null;f.VE=!1;f.ed=null;f.yd=null;f.zr=null;f.ae=null;f.Cf=null;f.Cc=null;f.Uu="dialog";f.O=function(){return this.sd};f.Ce=function(a){this.vb=a;this.yd&&ci(this.yd,a)};f.Pd=function(){return this.vb};f.Si=function(a){this.qc=a=pj(a,null);this.Cf&&(this.Cf.innerHTML=oj(a))};
f.getContent=function(){return null!=this.qc?oj(this.qc):""};f.Di=function(){return this.Uu};f.Ta=function(){this.a()||this.k();return this.Cf};f.kz=function(){this.a()||this.k();return this.ed};f.xl=function(){this.a()||this.k();return ak.c.xl.call(this)};function fk(a,b){a.Bp=b;if(a.a()){var c=a.xl();c&&Oi(c,a.Bp)}}function gk(a,b){b!=a.eu&&hk(a,b)}function hk(a,b){a.eu=b;if(a.$){var c=a.G(),d=a.xl(),e=a.Vc;b?(e&&c.Kt(e,a.a()),c.Kt(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.ra()&&Yj(a,b)}
f.pr=function(a){this.Rp=a;this.eo(a&&this.$)};f.eo=function(a){var b=Ja(this.sd+"-title-draggable").split(" ");this.a()&&(a?Mj(this.ed,b):Oj(this.ed,b));a&&!this.La?(this.La=new cj(this.a(),this.ed),Mj(this.ed,b),G(this.La,"start",this.qr,!1,this)):!a&&this.La&&(this.La.g(),this.La=null)};
f.p=function(){ak.c.p.call(this);var a=this.a(),b=this.G();this.ed=b.p("div",this.sd+"-title",this.yd=b.p("span",{className:this.sd+"-title-text",id:vj(this)},this.vb),this.ae=b.p("span",this.sd+"-title-close"));Th(a,this.ed,this.Cf=b.p("div",this.sd+"-content"),this.Cc=b.p("div",this.sd+"-buttons"));Rj(this.yd,"heading");Rj(this.ae,"button");fi(this.ae,!0);Sj(this.ae,"label",ik);this.zr=this.yd.id;Rj(a,this.Di());Sj(a,"labelledby",this.zr||"");this.qc&&(this.Cf.innerHTML=oj(this.qc));Pi(this.ae,
this.Ft);this.P&&(a=this.P,a.l=this.Cc,a.k());Pi(this.Cc,!!this.P);fk(this,this.Bp)};
f.Kd=function(a){ak.c.Kd.call(this,a);a=this.a();var b=this.sd+"-content";this.Cf=Hh(null,b,a)[0];this.Cf||(this.Cf=this.G().p("div",b),this.qc&&(this.Cf.innerHTML=oj(this.qc)),a.appendChild(this.Cf));var b=this.sd+"-title",c=this.sd+"-title-text",d=this.sd+"-title-close";(this.ed=Hh(null,b,a)[0])?(this.yd=Hh(null,c,this.ed)[0],this.ae=Hh(null,d,this.ed)[0]):(this.ed=this.G().p("div",b),a.insertBefore(this.ed,this.Cf));this.yd?(this.vb=ii(this.yd),this.yd.id||(this.yd.id=vj(this))):(this.yd=Q("span",
{className:c,id:vj(this)}),this.ed.appendChild(this.yd));this.zr=this.yd.id;Sj(a,"labelledby",this.zr||"");this.ae||(this.ae=this.G().p("span",d),this.ed.appendChild(this.ae));Pi(this.ae,this.Ft);b=this.sd+"-buttons";(this.Cc=Hh(null,b,a)[0])?(this.P=new ck(this.G()),this.P.ob(this.Cc)):(this.Cc=this.G().p("div",b),a.appendChild(this.Cc),this.P&&(a=this.P,a.l=this.Cc,a.k()),Pi(this.Cc,!!this.P));fk(this,this.Bp)};
f.Sa=function(){ak.c.Sa.call(this);this.Ua().r(this.a(),"keydown",this.zh).r(this.a(),"keypress",this.zh);this.Ua().r(this.Cc,"click",this.wI);this.eo(this.Rp);this.Ua().r(this.ae,"click",this.rJ);var a=this.a();Rj(a,this.Di());""!==this.yd.id&&Sj(a,"labelledby",this.yd.id);this.eu||hk(this,!1)};f.fc=function(){this.ra()&&this.U(!1);this.eo(!1);ak.c.fc.call(this)};f.U=function(a){a!=this.ra()&&(this.$||this.k(),ak.c.U.call(this,a))};f.Sq=function(){ak.c.Sq.call(this);this.dispatchEvent(jk)};
f.Nq=function(){ak.c.Nq.call(this);this.dispatchEvent(kk);this.VE&&this.g()};f.qr=function(){var a=ni(this.G()),b=Nh(Ph(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=U(this.a());"fixed"==vi(this.a())?ej(this.La,new wh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):ej(this.La,new wh(0,0,c-d.width,a-d.height))};f.rJ=function(){lk(this)};
function lk(a){if(a.Ft){var b=a.P,c=b&&b.Ks;c?(b=b.get(c),a.dispatchEvent(new mk(c,b))&&a.U(!1)):a.U(!1)}}f.e=function(){this.Cc=this.ae=null;ak.c.e.call(this)};function nk(a,b){a.P=b;if(a.Cc){if(a.P){var c=a.P;c.l=a.Cc;c.k()}else a.Cc.innerHTML=oj(qj);Pi(a.Cc,!!a.P)}}f.wI=function(a){a:{for(a=a.target;null!=a&&a!=this.Cc;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.P.get(a);this.dispatchEvent(new mk(a,b))&&this.U(!1)}};
f.zh=function(a){var b=!1,c=!1,d=this.P,e=a.target;if("keydown"==a.type)if(this.vy&&27==a.keyCode){var h=d&&d.Ks,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new mk(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.Ds=!0;try{this.Wf.focus()}catch(k){}Uf(this.QA,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.ae)lk(this);else if(d){var l=d.bt,n;if(n=l)a:{n=d.l.getElementsByTagName("BUTTON");for(var m=
0,q;q=n[m];m++)if(q.name==l||q.id==l){n=q;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new mk(h,String(d.get(h)))))}else e==this.ae&&32==a.keyCode&&lk(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.U(!1)};function mk(a,b){this.type=ok;this.key=a;this.caption=b}w(mk,Cc);var ok="dialogselect",kk="afterhide",jk="aftershow";function ck(a){this.bb=a||Ch();gd.call(this)}var pk;w(ck,gd);
f=ck.prototype;f.sd="goog-buttonset";f.bt=null;f.l=null;f.Ks=null;f.set=function(a,b,c,d){gd.prototype.set.call(this,a,b);c&&(this.bt=a);d&&(this.Ks=a);return this};function bk(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.k=function(){if(this.l){this.l.innerHTML=oj(qj);var a=Ch(this.l);this.forEach(function(b,c){var d=a.p("button",{name:c},b);c==this.bt&&(d.className=this.sd+"-default");this.l.appendChild(d)},this)}};
f.ob=function(a){if(a&&1==a.nodeType){this.l=a;a=this.l.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=ii(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==qk);h&&Lj(c,this.sd+"-default")}}};f.a=function(){return this.l};f.G=function(){return this.bb};var qk="cancel",ik="Close",dk={key:"ok",caption:"OK"},ek={key:qk,caption:"Cancel"},rk={key:"yes",caption:"Yes"},sk={key:"no",caption:"No"},tk={key:"save",caption:"Save"},uk={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(bk(new ck,dk,!0,!0),bk(bk(new ck,dk,!0),ek,!1,!0),pk=bk(bk(new ck,rk,!0),sk,!1,!0),bk(bk(bk(new ck,rk),sk,!0),ek,!1,!0),bk(bk(bk(new ck,uk),tk),ek,!0,!0));v("nrg.string",function(){});function vk(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function wk(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function xk(a){if(null!=a)return a="array"==ga(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function yk(a){return a.replace(/\W/g,"")}function zk(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function Ak(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",vk);v("nrg.string.dirname",wk);v("nrg.string.getFileExtension",xk);v("nrg.string.fileNameMatch",function(a,b){return vk(a)===vk(b)});v("nrg.string.stripNonAlphanumeric",yk);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return yk(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",zk);v("nrg.string.mrmlColorToRgb",Ak);function Bk(a,b,c){uc.call(this);this.Vt=a;this.Ll=b||0;this.Hc=c;this.DE=ta(this.XE,this)}w(Bk,uc);f=Bk.prototype;f.Xe=0;f.e=function(){Bk.c.e.call(this);this.stop();delete this.Vt;delete this.Hc};f.start=function(a){this.stop();this.Xe=Uf(this.DE,ca(a)?a:this.Ll)};f.stop=function(){this.tg()&&ba.clearTimeout(this.Xe);this.Xe=0};f.tg=function(){return 0!=this.Xe};f.XE=function(){this.Xe=0;this.Vt&&this.Vt.call(this.Hc)};var sb={},Ck=null;function Dk(a){a=na(a);delete sb[a];rb()&&Ck&&Ck.stop()}function Ek(){Ck||(Ck=new Bk(function(){Fk()},20));var a=Ck;a.tg()||a.start()}function Fk(){var a=ya();C(sb,function(b){Gk(b,a)});rb()||Ek()};function Hk(){Yc.call(this);this.I=Ik;this.endTime=this.startTime=null}w(Hk,Yc);var Ik=0;Hk.prototype.yh=function(){this.Fc("begin")};Hk.prototype.onEnd=function(){this.Fc("end")};Hk.prototype.Fc=function(a){this.dispatchEvent(a)};function Jk(a,b,c,d){Hk.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.wo=a;this.eF=b;this.duration=c;this.$w=d;this.coords=[];this.Fk=!1}w(Jk,Hk);f=Jk.prototype;f.wi=function(a){this.Fk=a};f.cf=0;
f.play=function(a){if(a||this.I==Ik)this.cf=0,this.coords=this.wo;else if(1==this.I)return!1;Dk(this);this.startTime=a=ya();-1==this.I&&(this.startTime-=this.duration*this.cf);this.endTime=this.startTime+this.duration;this.cf||this.yh();this.Fc("play");-1==this.I&&this.Fc("resume");this.I=1;var b=na(this);b in sb||(sb[b]=this);Ek();Gk(this,a);return!0};f.stop=function(a){Dk(this);this.I=Ik;a&&(this.cf=1);Kk(this,this.cf);this.Fc("stop");this.onEnd()};
f.e=function(){this.I==Ik||this.stop(!1);this.Fc("destroy");Jk.c.e.call(this)};f.Re=function(){this.g()};function Gk(a,b){a.cf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.cf&&(a.cf=1);Kk(a,a.cf);1==a.cf?(a.I=Ik,Dk(a),a.Fc("finish"),a.onEnd()):1==a.I&&a.pu()}function Kk(a,b){ka(a.$w)&&(b=a.$w(b));a.coords=Array(a.wo.length);for(var c=0;c<a.wo.length;c++)a.coords[c]=(a.eF[c]-a.wo[c])*b+a.wo[c]}f.pu=function(){this.Fc("animate")};f.Fc=function(a){this.dispatchEvent(new Lk(a,this))};
function Lk(a,b){Cc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.cf=b.cf;this.state=b.I}w(Lk,Cc);var Mk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Nk(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Ok.test(c))return b.Dl=Pk(c),b.type="hex",b;a:{var d=a.match(Qk);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.Dl=Rk(c),b.type="rgb",b;if(Mk&&(c=Mk[a.toLowerCase()]))return b.Dl=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Sk=/#(.)(.)(.)/;
function Pk(a){if(!Ok.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Sk,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Tk(a){a=Pk(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Rk(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Uk(b.toString(16));c=Uk(c.toString(16));a=Uk(a.toString(16));return"#"+b+c+a}var Ok=/^#(?:[0-9a-f]{3}){1,2}$/i,Qk=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Uk(a){return 1==a.length?"0"+a:a}
function Vk(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Rk([Math.floor(d),Math.floor(e),Math.floor(h)])};function Wk(a,b,c,d,e){Jk.call(this,b,c,d,e);this.element=a}w(Wk,Jk);f=Wk.prototype;f.j=ea;f.we=function(){ca(this.Dg)||(this.Dg=Ei(this.element));return this.Dg};f.pu=function(){this.j();Wk.c.pu.call(this)};f.onEnd=function(){this.j();Wk.c.onEnd.call(this)};f.yh=function(){this.j();Wk.c.yh.call(this)};function Xk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Wk.apply(this,arguments)}w(Xk,Wk);
Xk.prototype.j=function(){var a=this.Fk&&this.we()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Yk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Wk.apply(this,arguments)}w(Yk,Wk);Yk.prototype.j=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Zk(a,b,c,d,e){Wk.call(this,a,[b],[c],d,e)}w(Zk,Wk);Zk.prototype.j=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function $k(a,b,c,d,e){Wk.call(this,a,[b],[c],d,e)}w($k,Wk);$k.prototype.j=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function al(a,b,c,d,e){t(b)&&(b=[b]);t(c)&&(c=[c]);Wk.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(al,Wk);al.prototype.j=function(){Oi(this.element,this.coords[0])};
al.prototype.show=function(){this.element.style.display=""};al.prototype.Fl=function(){this.element.style.display="none"};function bl(a,b,c){al.call(this,a,1,0,b,c)}w(bl,al);function cl(a,b,c){al.call(this,a,0,1,b,c)}w(cl,al);function dl(a,b,c){al.call(this,a,1,0,b,c)}w(dl,al);dl.prototype.yh=function(){this.show();dl.c.yh.call(this)};dl.prototype.onEnd=function(){this.Fl();dl.c.onEnd.call(this)};function el(a,b,c){al.call(this,a,0,1,b,c)}w(el,al);el.prototype.yh=function(){this.show();el.c.yh.call(this)};
function fl(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Wk.apply(this,arguments)}w(fl,Wk);fl.prototype.or=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};fl.prototype.j=function(){this.or()};function gl(){Hk.call(this);this.Yb=[]}w(gl,Hk);gl.prototype.add=function(a){Hb(this.Yb,a)||(this.Yb.push(a),G(a,"finish",this.qu,!1,this))};gl.prototype.remove=function(a){Kb(this.Yb,a)&&Sc(a,"finish",this.qu,!1,this)};gl.prototype.e=function(){D(this.Yb,function(a){a.g()});this.Yb.length=0;gl.c.e.call(this)};function hl(){gl.call(this);this.jt=0}w(hl,gl);
hl.prototype.play=function(a){if(0==this.Yb.length)return!1;if(a||this.I==Ik)this.jt=0,this.yh();else if(1==this.I)return!1;this.Fc("play");-1==this.I&&this.Fc("resume");var b=-1==this.I&&!a;this.startTime=ya();this.endTime=null;this.I=1;D(this.Yb,function(c){b&&-1!=c.I||c.play(a)});return!0};hl.prototype.stop=function(a){D(this.Yb,function(b){b.I==Ik||b.stop(a)});this.I=Ik;this.endTime=ya();this.Fc("stop");this.onEnd()};
hl.prototype.qu=function(){this.jt++;this.jt==this.Yb.length&&(this.endTime=ya(),this.I=Ik,this.Fc("finish"),this.onEnd())};function il(){gl.call(this);this.Df=0}w(il,gl);il.prototype.play=function(a){if(0==this.Yb.length)return!1;if(a||this.I==Ik)this.Df<this.Yb.length&&this.Yb[this.Df].I!=Ik&&this.Yb[this.Df].stop(!1),this.Df=0,this.yh();else if(1==this.I)return!1;this.Fc("play");-1==this.I&&this.Fc("resume");this.startTime=ya();this.endTime=null;this.I=1;this.Yb[this.Df].play(a);return!0};
il.prototype.stop=function(a){this.I=Ik;this.endTime=ya();if(a)for(a=this.Df;a<this.Yb.length;++a){var b=this.Yb[a];b.I==Ik&&b.play();b.I==Ik||b.stop(!0)}else this.Df<this.Yb.length&&this.Yb[this.Df].stop(!1);this.Fc("stop");this.onEnd()};il.prototype.qu=function(){1==this.I&&(this.Df++,this.Df<this.Yb.length?this.Yb[this.Df].play():(this.endTime=ya(),this.I=Ik,this.Fc("finish"),this.onEnd()))};v("nrg.convert",function(){});function jl(a){if(!g(a)&&!t(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function kl(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function ll(a){if(!r(a)&&!t(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)}
function ml(a){var b={};C(a,function(a,d){isNaN(a)?r(a)&&(b[d]=a):b[d]=a});return b}function nl(a){var b={};C(a,function(a,d){r(a)?0<a.length&&(b[d]=a):b[d]=a});return b}v("nrg.convert.pct",function(a){if(!t(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",jl);v("nrg.convert.remap1D",kl);v("nrg.convert.toInt",ll);
v("nrg.convert.toFloatArray",function(a){if(!r(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");D(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!ma(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!r(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;D(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",ml);v("nrg.convert.filterZeroLengthStrings",nl);v("nrg.style",function(){});var ol="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function pl(a){return a.getBoundingClientRect()}
function ql(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return ll(a.style[b]);var d=Fi(a,a.parentNode),d={left:ll(a.style.left)||d.x,top:ll(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?Fi(a,a.parentNode):Fi(a,document.body),
d={left:ll(a.style.left)||d.x,top:ll(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c}
function rl(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function sl(a,b){a&&b&&(a.style||(a.style={}),ri(a,b),D("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Ea(b[c],"%")&&(a.style[c]=jl(b[c]))}))}var tl="is_hovered_"+B();
function ul(a,b,c,d,e,h){function k(){a[tl]=!1;ph(a,b);null!=h&&h()}function l(){a[tl]=!0;M(a,b);null!=e&&e()}G(a,"mouseover",l);G(a,"mouseout",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}v("nrg.style.cssProperties",ol);v("nrg.style.removeClassesThatContain",function(a,b){var c=nh(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)ph(a,d[e])});v("nrg.style.absolutePosition",pl);v("nrg.style.dims",ql);
v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});v("nrg.style.getComputedStyle",function(a,b){if(b&&r(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=ol);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return rl(c)});v("nrg.style.parseIntNumericalProperties",rl);v("nrg.style.setStyle",sl);v("nrg.style.IS_HOVERED",tl);
v("nrg.style.setHoverClass",ul);v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function vl(a){return 1-Math.pow(1-a,3)};function wl(){}v("nrg.fx",wl);function xl(a,b,c){void 0===b&&(b=500);yl(a,b,1,c)}function zl(a,b,c){void 0===b&&(b=500);yl(a,0,0,function(){yl(a,b,1,c)})}function Al(a,b,c){void 0===b&&(b=500);yl(a,b,0,c)}function yl(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var h=new al(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);H(h);delete h});h.play()}wl.animGenStyles="left top width height opacity background-color color z-index".split(" ");
function Bl(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Xk(a,[b.left,b.top],[c.left,c.top],d,vl)}function Cl(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Yk(a,[b.width,b.height],[c.width,c.height],d,vl)}
function Dl(a,b,c,d){if("opacity"in b||"opacity"in c)if(D([b,c],function(a){"opacity"in a||(a.opacity=1);t(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new al(a,b.opacity,c.opacity,d)}function El(a,b,c,d){if("visibility"in b||"visibility"in c)if(D([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new el(a,d):new dl(a,d)}
function Fl(a,b,c,d){if("background-color"in b||"background-color"in c){D([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Nk(b["background-color"]),h=Nk(c["background-color"]);if(e.Dl!==h.Dl)return new fl(a,Tk(e),Tk(h),d,vl)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function Gl(a,b){this.uE=a;this.PK=b}function Hl(a){return nl(ml(a))}
function Il(a){var b=U(a),c=yi(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Jl(a,b){var c=Il(a),c=Hl(c),d=Il(b),e=Hl(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new Gl(c,e)}
function Kl(a,b,c,d){var e=[];D(wl.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(Bl(a,b,c,d));break;case "height":e.push(Cl(a,b,c,d));break;case "opacity":e.push(Dl(a,b,c,d));break;case "visibility":e.push(El(a,b,c,d));break;case "background-color":e.push(Fl(a,b,c,d))}});var h=[];D(e,function(a){null!=a&&h.push(a)});delete e;return h}
function Ll(a,b,c,d){var e=new hl;D(a,function(a){c&&G(a,"animate",c);e.add(a)});b&&G(e,"begin",b);G(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Ml(a,b,c){function d(){sl(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;G(a,"mouseover",function(){sl(a,{opacity:b})});G(a,"mouseout",d);d()}v("nrg.fx.fadeIn",xl);v("nrg.fx.fadeInFromZero",zl);v("nrg.fx.fadeOut",Al);
v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);yl(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",yl);v("nrg.fx.animGenStyles",wl.animGenStyles);v("nrg.fx.generateAnim_Slide",Bl);v("nrg.fx.generateAnim_Resize",Cl);v("nrg.fx.generateAnim_Fade",Dl);v("nrg.fx.generateAnim_RemoveAddFade",El);v("nrg.fx.generateAnim_BgColorTrans",Fl);v("nrg.fx.TransitionDims",Gl);v("nrg.fx.filterTransitionStyles",Hl);v("nrg.fx.getTransitionStyles",Il);
v("nrg.fx.generateTransitionDims",Jl);v("nrg.fx.generateAnimations",Kl);v("nrg.fx.parallelAnimate",Ll);v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new il;D(a,function(a){c&&G(a,"animate",c);e.add(a)});b&&G(e,"begin",b);G(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",Ml);function Nl(a){return a.slice(a.lastIndexOf("/")+1)}function Ol(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Ea(b,"/")?b+d:b+("/"+d);return b};function Pl(){}v("nrg.dom",Pl);function Ql(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!r(b))throw new TypeError("String expected!",b);if(c&&!r(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Rl(e,{src:b?Ol(b,cb(e)+"."+c):""});return d}function Sl(a,b){var c=Q("img",{src:b});c.style.GN="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Th(a,c);c.onclick=c.parentNode.onclick}
function Rl(a,b,c,d){if(!r(a))throw new TypeError("String expected!");if(b&&!ma(b))throw new TypeError("Object expected!");if(null!=c&&!t(c))throw new TypeError("Number expected!");if(null!=d&&!t(d))throw new TypeError("Number expected!");a=Tl("div",a,b?b:{});b&&b.src&&Sl(a,b.src);Ml(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Tl(a,b,c){if(!r(a))throw new TypeError("String expected!",a);if(!r(b))throw new TypeError("String expected!",b);if(c&&!ma(c))throw new TypeError("Object expected!");c=c&&ma(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:cb(b.replace(/\./g,"-").toLowerCase());return Q(a,c)}v("nrg.dom.createBasicHoverButtonSet",Ql);v("nrg.dom.createDivChildImage",Sl);v("nrg.dom.createBasicHoverButton",Rl);v("nrg.dom.createUniqueDom",Tl);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Pl.GO(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function V(a){sj.call(this,a);this.Rv();this.l=Tl("div",this.constructor.ID_PREFIX,a);this.Jp();Ul(this)}w(V,sj);v("nrg.ui.Component",V);f=V.prototype;f.Rv=function(){if(this instanceof V){this.constructor.c&&this.constructor.c instanceof V&&V.prototype.Rv.bind(this.constructor.c)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.hm)||(this.constructor.hm=Vl(this.constructor.ID_PREFIX),this.constructor.kc=this.constructor.hm)}};
function Vl(a){return a.toLowerCase().replace(/\./g,"-")}f.Jp=function(){if(null!=this.constructor.c)for(var a=this.constructor.c;null!=a.constructor.ID_PREFIX;)V.prototype.Jp.bind(a)(),a=a.constructor.c;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=vb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=zk(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Ul(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Vl(c.constructor.ID_PREFIX),Jb(b,d),c=c.constructor.c;D(b,function(a){null!=this.a()&&M(this.a(),a)}.bind(a))}f.Ii="";f.dB=function(a){this.Ii=a};f.UF=function(){return this.Ii};f.lE=function(a){null==this.zo&&(this.zo=[]);this.zo.push(a)};
f.dh=function(){if(null==this.ba)this.ba=U(this.a());else if(this.ba.height!==this.q.height||this.ba.width!==this.q.width)this.ba=this.q;if(null==this.Wn)this.Wn=yi(this.a());else if(this.Wn.x!==this.Kp.x||this.Wn.y!==this.Kp.y)this.Wn=this.Kp;this.q=U(this.a());this.Kp=yi(this.a())};f.j=function(){this.dh()};f.k=function(a){this.$&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):V.c.k.call(this,a)};f.sy=!1;f.UE=function(){return this.sy};
f.e=function(){V.c.e.call(this);null!=this.zo&&(D(this.zo,function(a){H(a);a.g()}),Ib(this.zo));H(this);H(this.a());S(this.a());this.Wn=this.ba=this.Kp=this.q=this.Ii=null;this.sy=!0};f.dt=function(a){null!=a&&(a=g(a)?a:[a],D(a,function(a){H(a);a.g()}),Ib(a))};f.Op=function(a){null!=a&&(H(a),a.g())};f.Pp=function(a){C(a,function(b,c){H(b);S(b);delete a[c]});tb(a)};f.Zm=function(a){C(a,function(b,c){H(b);b.g();delete a[c]});tb(a)};v("nrg.ui.Component.animationLengths",{AL:150,XL:300,GM:600});
v("nrg.ui.Component.idPrefixToCssClass",Vl);v("nrg.ui.Component.prototype.validateIdPrefix",V.prototype.Rv);v("nrg.ui.Component.prototype.imagePrefix",V.prototype.Ii);v("nrg.ui.Component.prototype.createCssMap",V.prototype.Jp);v("nrg.ui.Component.prototype.setImagePrefix",V.prototype.dB);v("nrg.ui.Component.prototype.getImagePrefix",V.prototype.UF);v("nrg.ui.Component.prototype.addSubComponent",V.prototype.lE);v("nrg.ui.Component.prototype.calcDims",V.prototype.dh);
v("nrg.ui.Component.prototype.updateStyle",V.prototype.j);v("nrg.ui.Component.prototype.render",V.prototype.k);v("nrg.ui.Component.prototype.disposeInternalCalled",V.prototype.UE);v("nrg.ui.Component.prototype.disposeAnimations",V.prototype.dt);v("nrg.ui.Component.prototype.disposeAnimationQueue",V.prototype.Op);v("nrg.ui.Component.prototype.disposeElementMap",V.prototype.Pp);v("nrg.ui.Component.prototype.disposeComponentMap",V.prototype.Zm);v("nrg.ui.Component.prototype.disposeInternal",V.prototype.e);function Wl(){ak.call(this);this.vy=!1}w(Wl,ak);v("nrg.ui.Dialog",Wl);Wl.ID_PREFIX="nrg.ui.Dialog";Wl.CSS={sw:"nrg-ui-dialog-overlay",Qo:"nrg-ui-dialog-background",Nh:"nrg-ui-dialog-closebutton",wC:"nrg-ui-dialog-closebutton-image",Ok:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",Pg:"nrg-ui-dialog-content",sC:"nrg-ui-dialog-buttons"};f=Wl.prototype;f.Rp=!0;f.La=null;f.tk=null;
f.ev=function(a){this.dm.style.visibility="hidden";this.Wc.style.visibility="hidden";null!=a&&ul(this.a(),a,null,null,function(){this.dm.style.visibility="visible";this.Wc.style.visibility="visible"}.bind(this),function(){this.dm.style.visibility="hidden";this.Wc.style.visibility="hidden"}.bind(this))};f.qx=function(a){M(this.dm,a)};f.iE=function(a){M(this.qc,a)};f.gE=function(a){M(this.Wc.parentNode,a)};f.hE=function(a){M(this.Wc,a)};f.dx=function(a){M(this.Hp,a)};f.fE=function(a){M(this.Is,a)};
function Xl(a){a.Hp=Jh("modal-dialog-title-close",a.a())[0];M(a.Hp,Wl.CSS.Nh);a.Wc=Q("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":Wl.CSS.wC});a.Wc.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.Hp.appendChild(a.Wc);G(a.Wc,"click",function(a){this.U(!this.ra());this.dispatchEvent({type:"c"});a.stopPropagation()}.bind(a))}f.sE=function(){var a=this.a(),b=cl(a,600),c=bl(a,600),d=cl(a,600),a=bl(a,600);this.uB(b,c,d,a)};
f.Jq=function(a,b,c,d){var e=this.a(),h=U(e.parentNode),k=U(e);c=null!=c?c:0;"left"==a?e.style.left=0+c+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=0+(null!=d?d:0)+"px")};f.fh=function(){var a=this.a(),b=U(this.a().parentNode);if(null!=this.xl()){var c=this.xl();0==c.opacity?S(c):sl(c,{width:b.width,height:b.height,"z-index":199})}var c=U(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);wi(a,d,e)};
f.pr=function(a){this.Rp=a;this.eo(a&&this.$)};f.eo=function(a){var b=Ja(this.O()+"-title-draggable").split(" "),c=this.kz();this.a()&&(a?Mj(c,b):Oj(c,b));a&&!this.La?(this.La=new cj(this.a(),this.ed),Mj(c,b),G(this.La,"start",this.qr,!1,this)):!a&&this.La&&(this.La.g(),this.La=null)};f.aC=function(){this.qr()};
f.qr=function(){var a=ni(this.G()),b=Ph(a)||window;if(null!=this.a()){var a=U(this.a().parentNode),b=Nh(b||window),c=U(this.a());"fixed"==vi(this.a())?ej(this.La,new wh(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):ej(this.La,new wh(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))}};f.wp=function(a){var b=Q("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":Wl.CSS.So});null==this.vn&&(this.vn=[]);this.vn.push(b);this.Vq.appendChild(b);null!=a&&(b.src=a);return b};
f.gi=function(a){var b=Q("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":Wl.CSS.Ok},a);null==this.Hg&&(this.Hg=[]);this.Hg.push(b);b.innerHTML=a||"";this.Si(a);return b};f.mG=function(){return this.a()};
f.k=function(a){Wl.c.k.call(this,a);M(this.a(),"nrg-ui-dialog");this.dm=Jh("modal-dialog-title",this.a())[0];this.qc=Jh("modal-dialog-content",this.a())[0];this.Is=Jh("modal-dialog-buttons",this.a())[0];this.Wc=null;Xl(this);M(this.Is,Wl.CSS.sC);M(this.dm,Wl.CSS.TITLE);M(this.qc,Wl.CSS.Pg);Wl.c.pr.call(this,!1);this.pr(!0)};f.U=function(a){null==this.tk&&(this.tk=yi(this.a()));this.ra()&&!1==a?(this.tk=yi(this.a()),Wl.c.U.call(this,a)):this.ra()||!0!=a||(Wl.c.U.call(this,a),wi(this.a(),this.tk))};
f.IG=function(){return this.Hg};f.e=function(){Wl.c.e.call(this);delete this.Is;delete this.dm;delete this.qc;delete this.Wc;delete this.Hp;null!=this.Vq&&(S(this.Vq),delete this.Vq);null!=this.Hg&&(D(this.Hg,function(a){S(a);delete a}),delete this.Hg);null!=this.vn&&(D(this.vn,function(a){S(a);delete a}),delete this.vn);null!=this.tk&&(tb(this.tk),delete this.tk)};v("nrg.ui.Dialog.ID_PREFIX",Wl.ID_PREFIX);v("nrg.ui.Dialog.EventType",{fM:"a",CLOSED:"b",oL:"c"});
v("nrg.ui.Dialog.prototype.setMouseoverClass",Wl.prototype.ev);v("nrg.ui.Dialog.prototype.addTitleClass",Wl.prototype.qx);v("nrg.ui.Dialog.prototype.addContentClass",Wl.prototype.iE);v("nrg.ui.Dialog.prototype.addCloseButtonClass",Wl.prototype.gE);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",Wl.prototype.hE);v("nrg.ui.Dialog.prototype.addCloseSpanClass",Wl.prototype.dx);v("nrg.ui.Dialog.prototype.addButtonsClass",Wl.prototype.fE);v("nrg.ui.Dialog.prototype.applyFadeTransitions",Wl.prototype.sE);
v("nrg.ui.Dialog.prototype.moveToCorner",Wl.prototype.Jq);v("nrg.ui.Dialog.prototype.center",Wl.prototype.fh);v("nrg.ui.Dialog.prototype.setDraggable",Wl.prototype.pr);v("nrg.ui.Dialog.prototype.updateLimits",Wl.prototype.aC);v("nrg.ui.Dialog.prototype.addImage",Wl.prototype.wp);v("nrg.ui.Dialog.prototype.addText",Wl.prototype.gi);v("nrg.ui.Dialog.prototype.getOverlay",Wl.prototype.mG);v("nrg.ui.Dialog.prototype.render",Wl.prototype.k);v("nrg.ui.Dialog.prototype.setVisible",Wl.prototype.U);
v("nrg.ui.Dialog.prototype.getTextElements",Wl.prototype.IG);v("nrg.ui.Dialog.prototype.disposeInternal",Wl.prototype.e);function Yl(){Wl.call(this);M(this.Vq,Yl.CSS.sw)}w(Yl,Wl);v("nrg.ui.ErrorOverlay",Yl);Yl.ID_PREFIX="nrg.ui.ErrorOverlay";Yl.CSS={sw:"nrg-ui-infooverlay-overlay",Ok:"nrg-ui-infooverlay-text"};Yl.prototype.gi=function(a){Yl.c.gi.call(this,a);a=this.Hg;M(a[a.length-1],Yl.CSS.Ok)};Yl.prototype.e=function(){Yl.c.e.call(this)};v("nrg.ui.ErrorOverlay.ID_PREFIX",Yl.ID_PREFIX);v("nrg.ui.ErrorOverlay.CSS",Yl.CSS);v("nrg.ui.ErrorOverlay.prototype.addText",Yl.prototype.gi);
v("nrg.ui.ErrorOverlay.prototype.disposeInternal",Yl.prototype.e);function Zl(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,Rj(a,k.og()),Lj(a,"goog-zippy-header"),$l(k,a),a&&k.Pz.r(a,"keydown",k.Mq))}Yc.call(this);this.bb=e||Ch();this.Rj=this.bb.a(a)||null;this.Tp=this.bb.a(d||null);this.Tb=(this.St=ka(b)?b:null)||!b?null:this.bb.a(b);this.mh=!0==c;this.Pz=new Zi(this);this.gu=new Zi(this);var k=this;h(this.Rj);h(this.Tp);this.Bb(this.mh)}w(Zl,Yc);var am={Uv:"action",yw:"toggle"};f=Zl.prototype;f.ck=!0;f.e=function(){Zl.c.e.call(this);yc(this.Pz);yc(this.gu)};
f.og=function(){return"tab"};f.Ta=function(){return this.Tb};f.toggle=function(){this.Bb(!this.mh)};f.Bb=function(a){this.Tb?Pi(this.Tb,a):a&&this.St&&(this.Tb=this.St());this.Tb&&Lj(this.Tb,"goog-zippy-content");this.Tp?(Pi(this.Rj,!a),Pi(this.Tp,a)):bm(this,a);this.mh=a;this.dispatchEvent(new cm(am.yw,this))};function bm(a,b){a.Rj&&(Pj(a.Rj,"goog-zippy-expanded",b),Pj(a.Rj,"goog-zippy-collapsed",!b),Sj(a.Rj,"expanded",b))}
f.ho=function(a){this.ck!=a&&((this.ck=a)?($l(this,this.Rj),$l(this,this.Tp)):this.gu.Rf())};function $l(a,b){b&&a.gu.r(b,"click",a.Lq)}f.Mq=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Cc(am.Uv,this)),a.preventDefault(),a.stopPropagation()};f.Lq=function(){this.toggle();this.dispatchEvent(new Cc(am.Uv,this))};function cm(a,b){Cc.call(this,a,b)}w(cm,Cc);function dm(a,b,c,d){d=d||Ch();var e=d.p("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.Vp=e;this.Oe=null;Zl.call(this,a,b,c,void 0,d);a=this.mh;this.Vp.style.display=a?"":"none";bm(this,a)}w(dm,Zl);f=dm.prototype;f.Ap=500;f.rE=vl;
f.Bb=function(a){if(this.mh!=a||this.Oe){"none"==this.Vp.style.display&&(this.Vp.style.display="");var b=this.Ta().offsetHeight,c=0;this.Oe?(a=this.mh,H(this.Oe),this.Oe.stop(!1),c=parseInt(this.Ta().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;bm(this,a);this.Oe=new Jk([0,c],[0,a?b:0],this.Ap,this.rE);G(this.Oe,["begin","animate","end"],this.uI,!1,this);G(this.Oe,"end",ta(this.vI,this,a));this.Oe.play(!1)}};f.uI=function(a){var b=this.Ta();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.vI=function(a){a&&(this.Ta().style.marginTop="0");H(this.Oe);this.mh=a;this.Oe=null;a||(this.Vp.style.display="none");this.dispatchEvent(new cm(am.yw,this))};function em(a,b,c,d){V.call(this);this.vb=a;this.rb=Q("div",{id:"ZippyHeader_"+a+"_"+B(),"class":em.CSS.Ro});this.rb[fm]=a.toLowerCase();null!=d?d(b,this.rb):b.appendChild(this.rb);this.pn=Q("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":em.CSS.HC});this.Iv();this.rb.appendChild(this.pn);this.lh=Q("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":em.CSS.DC},"+");this.rb.appendChild(this.lh);this.Ij=Q("div",{id:"ZippyContent_"+a+"_"+B(),"class":em.CSS.Pg});b.appendChild(this.Ij);this.Ed=new this.mC(this.rb,
this.Ij,null!=c?c:!1);this.DK=na(this);this.ie={};G(this.rb,"mouseover",this.IJ.bind(this));G(this.rb,"mouseout",this.HJ.bind(this));gm(this)}w(em,V);v("nrg.ui.ZippyNode",em);em.ID_PREFIX="nrg.ui.ZippyNode";var hm={zL:"d",pL:"e",vC:"f"};em.CSS_SUFFIX={Ro:"header",hw:"header-mouseover",HC:"header-label",DC:"expandicon",$v:"expandicon-mouseover",Pg:"content",Pg:"content-sub"};var fm=B();f=em.prototype;f.mC=dm;
f.Iv=function(a){a=null!=a?a:45;var b=this.pn,c=this.vb.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.vb?Xa(this.vb,a+60):c.length==this.vb.length?Xa(this.vb,a):this.vb;return b};f.Pd=function(){return this.vb};f.lG=function(){return this.ie};f.PF=function(){return this.rb};f.AF=function(){return this.Ij};f.QF=function(){return this.pn};f.aH=function(){return this.Ed};f.Bb=function(a){this.Ed.Bb(a)};f.kK=function(a){this.mC=!0===a?dm:Zl};
function gm(a){G(a.Ed,ob(am),function(a){null!=this.Ed.Oe?this.dispatchEvent({type:"f"}):a.target.mh?this.Mu():(this.lh.innerHTML="+",sl(this.lh,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"e"}))}.bind(a))}f.Mu=function(){this.lh.innerHTML="-";sl(this.lh,{"margin-left":"-1em"});this.dispatchEvent({type:"d"})};f.IJ=function(){M(this.rb,em.CSS.hw);M(this.lh,em.CSS.$v)};f.HJ=function(){ph(this.rb,em.CSS.hw);ph(this.lh,em.CSS.$v)};
f.e=function(){em.c.e.call(this);S(this.pn);delete this.pn;S(this.lh);delete this.lh;H(this.rb);S(this.rb);delete this.rb;S(this.Ij);delete this.Ij;null!=this.Ed&&(this.Ed.g(),H(this.Ed),delete this.Ed);this.Zm(this.ie);delete this.ie;delete this.DK;delete this.vb};v("nrg.ui.ZippyNode.ID_PREFIX",em.ID_PREFIX);v("nrg.ui.ZippyNode.EventType",hm);v("nrg.ui.ZippyNode.CSS_SUFFIX",em.CSS_SUFFIX);v("nrg.ui.ZippyNode.NODE_STORT_TAG",fm);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",em.prototype.Iv);
v("nrg.ui.ZippyNode.prototype.getTitle",em.prototype.Pd);v("nrg.ui.ZippyNode.prototype.getNodes",em.prototype.lG);v("nrg.ui.ZippyNode.prototype.getHeader",em.prototype.PF);v("nrg.ui.ZippyNode.prototype.getContentHolder",em.prototype.AF);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",em.prototype.QF);v("nrg.ui.ZippyNode.prototype.getZippy",em.prototype.aH);v("nrg.ui.ZippyNode.prototype.setExpanded",em.prototype.Bb);v("nrg.ui.ZippyNode.prototype.setAnimated",em.prototype.kK);
v("nrg.ui.ZippyNode.prototype.disposeInternal",em.prototype.e);L.Oc={};L.Oc.kd=function(){uc.call(this)};w(L.Oc.kd,uc);v("gxnat.vis.VisNode",L.Oc.kd);f=L.Oc.kd.prototype;f.eh="Generic";f.lr=function(a){this.eh=a};f.wF=function(){return this.eh};f.am="";f.oo=function(a){this.am=a};f.NG=function(){return this.am};f.vb=null;f.Ce=function(a){this.vb=a};f.Pd=function(){return this.vb};f.g=function(){L.Oc.kd.c.g.call(this);this.eh&&delete this.eh;this.am&&delete this.am;this.vb&&delete this.vb};v("gxnat.vis.VisNode.prototype.setCategory",L.Oc.kd.prototype.lr);
v("gxnat.vis.VisNode.prototype.getCategory",L.Oc.kd.prototype.wF);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",L.Oc.kd.prototype.oo);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",L.Oc.kd.prototype.NG);v("gxnat.vis.VisNode.prototype.setTitle",L.Oc.kd.prototype.Ce);v("gxnat.vis.VisNode.prototype.getTitle",L.Oc.kd.prototype.Pd);v("gxnat.vis.VisNode.prototype.dispose",L.Oc.kd.prototype.g);function im(a){this.ap=new JSZip(a)}w(im,uc);v("gxnat.Zip",im);function jm(a,b,c,d){if(!Fa(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=L.Cw;var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new im(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}im.prototype.qg=function(){return this.ap.files};
im.prototype.Zt=function(a){C(this.qg(),function(b){a(b.name,b.asArrayBuffer())}.bind(this))};im.prototype.g=function(){im.c.g.call(this);this.Zt(function(a){this.ap.remove(a)}.bind(this));tb(this.ap);delete this.ap};v("gxnat.Zip.prototype.getFiles",im.prototype.qg);v("gxnat.Zip.prototype.loopFiles",im.prototype.Zt);v("gxnat.Zip.getFilesAsZip",jm);v("gxnat.Zip.prototype.dispose",im.prototype.g);v("gxnat.slicerNode",function(){});
function km(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function lm(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",km);v("gxnat.slicerNode.toFloatArray",lm);function mm(){na(this)}v("gxnat.slicerNode.Node",mm);function nm(a,b){na(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;D(km(b),function(b){D(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.Ym=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=lm(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=lm(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(nm,mm);v("gxnat.slicerNode.Display",nm);function om(a,b){nm.call(this,a,b)}w(om,nm);v("gxnat.slicerNode.Mesh",om);function pm(a,b){if(a instanceof pm)this.Tc=a.Cv();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!t(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.Tc=Mb(a);else if(a instanceof uh)this.Tc=qm(a.height,a.width);else if(t(a)&&t(b)&&0<a&&0<b)this.Tc=qm(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.dd=new uh(this.Tc[0].length,this.Tc.length)}
function rm(a,b,c){for(var d=0;d<a.Ei().height;d++)for(var e=0;e<a.Ei().width;e++)b.call(c,a.Tc[d][e],d,e,a)}function sm(a,b){var c=new pm(a.Ei());rm(a,function(d,e,h){c.Tc[e][h]=b.call(void 0,d,e,h,a)});return c}function qm(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=pm.prototype;f.add=function(a){if(!vh(this.dd,a.Ei()))throw Error("Matrix summation is only supported on arrays of equal size");return sm(this,function(b,c,d){return b+a.Tc[c][d]})};
f.sl=function(a,b){if(this.dd.width!=a.dd.width||this.dd.height!=a.dd.height)return!1;for(var c=b||0,d=0;d<this.dd.height;d++)for(var e=0;e<this.dd.width;e++)if(!(Math.abs(this.Tc[d][e]-a.Tc[d][e])<=(c||1E-6)))return!1;return!0};f.Ei=function(){return this.dd};
f.multiply=function(a){if(a instanceof pm){if(this.dd.width!=a.Ei().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return tm(this,a)}if(t(a))return um(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.ic=function(a){if(!vh(this.dd,a.Ei()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return sm(this,function(b,c,d){return b-a.Tc[c][d]})};
f.Cv=function(){return this.Tc};f.toString=function(){var a=0;rm(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];D(this.Tc,function(c){b.push("[ ");D(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function vm(a,b,c){return 0<=b&&b<a.dd.height&&0<=c&&c<a.dd.width}
function tm(a,b){var c=new pm(a.dd.height,b.Ei().width);rm(c,function(a,e,h){for(var k=a=0;k<this.dd.width;k++)a+=(vm(this,e,k)?this.Tc[e][k]:0)*(vm(b,k,h)?b.Tc[k][h]:0);if(!vm(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.dd.height+","+c.dd.width+")");c.Tc[e][h]=a},a);return c}function um(a,b){return sm(a,function(a){return a*b})};function wm(a,b,c){nm.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=sm(new pm(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.ov=new xm(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.tq=b;this.bj=this.Ym?parseInt(this.Ym.getAttribute("upperThreshold")):null;this.ik=this.Ym?parseInt(this.Ym.getAttribute("lowerThreshold")):null;this.visible=c}w(wm,nm);v("gxnat.slicerNode.Volume",wm);function xm(a,b,c){var d=new pm([[0],[0],[0],[1]]);D([a,b,c],function(a,b){var c=a.multiply(d).Cv(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.eK=c;break;case 1:this.JE=c;break;case 2:this.xE=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",xm);function ym(a,b){na(this);this.backgroundColor=Ak(a);this.Lx=Ak(b)}w(ym,mm);v("gxnat.slicerNode.BackgroundColor",ym);function zm(a,b,c,d,e,h,k,l){na(this);this.element=a;this.Dp=b;this.backgroundColor=c;this.Tz=d;this.Km=e;this.YK=h;this.gI=k;this.jF=l}w(zm,mm);v("gxnat.slicerNode.SceneView",zm);function Am(a){uc.call(this);a instanceof zm?(this.Km=a.Km,this.Dp=a.Dp,this.backgroundColor=a.backgroundColor,this.Tz=a.Tz):a instanceof wm?(this.origin=a.origin||[0,0,0],this.bj=a.bj||1E4,this.ik=a.ik||-1E4,this.Er=a.Er||!1,this.tq=a.tq||!1,this.ov=a.ov||null,a.vg&&(this.Qz=a.labelMapFile,this.QH=a.colorTableFile)):a instanceof om&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Am,uc);v("gxnat.vis.RenderProperties",Am);Am.prototype.g=function(){Am.c.g.call(this);tb(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Am.prototype.g);function Bm(a){L.Oc.kd.call(this);this.ke=a||null}w(Bm,L.Oc.kd);v("gxnat.vis.Renderable",Bm);Bm.prototype.hv=function(a){this.ke=a instanceof Am?a:new Am(a)};Bm.prototype.xG=function(){return this.ke};Bm.prototype.g=function(){Bm.c.g.call(this);this.ke&&(this.ke.g(),delete this.ke)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Bm.prototype.hv);v("gxnat.vis.Renderable.prototype.getRenderProperties",Bm.prototype.xG);v("gxnat.vis.Renderable.prototype.dispose",Bm.prototype.g);function Cm(a,b){Bm.call(this,b);this.Bi=a||[];null!=b&&this.hv(b)}w(Cm,Bm);v("gxnat.vis.Viewable",Cm);f=Cm.prototype;f.zi=null;f.HF=function(){return this.zi};f.mK=function(a){return this.zi=a};f.ZA=function(a){null!=this.zi&&tb(this.zi);this.zi={};var b=this.qg();D(b,function(a){this.zi[a]=null}.bind(this));var c,d,e,h;a.Zt(function(a,l){c=0;for(d=b.length;c<d;c++)if(e=b[c],h="/files/"+a.split("/files/")[1],Fa(e,h)){this.zi[e]=l;break}}.bind(this));a.g()};f.qg=function(){return this.Bi};
f.WJ=function(a){window.ON.log("REMOVING FILE",a);Kb(this.Bi,a)};f.fi=function(a,b){null==this.Bi&&(this.Bi=[]);g(a)||(a=[a]);D(a,function(a){null!=b&&null==b(a)||this.Bi.push(a)}.bind(this))};f.g=function(){Cm.c.g.call(this);this.Bi&&(Ib(this.Bi),delete this.Bi)};v("gxnat.vis.Viewable.prototype.getFileData",Cm.prototype.HF);v("gxnat.vis.Viewable.prototype.setFileData",Cm.prototype.mK);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Cm.prototype.ZA);v("gxnat.vis.Viewable.prototype.getFiles",Cm.prototype.qg);
v("gxnat.vis.Viewable.prototype.removeFile",Cm.prototype.WJ);v("gxnat.vis.Viewable.prototype.addFiles",Cm.prototype.fi);v("gxnat.vis.Viewable.prototype.dispose",Cm.prototype.g);function Dm(a){Bm.call(this);null!=a?g(a)||(a=[a]):a=[];this.Le=a}w(Dm,Bm);v("gxnat.vis.ViewableGroup",Dm);Dm.prototype.rx=function(a){return this.Le.push(a)};Dm.prototype.rF=function(){var a=[];D(this.Le,function(b){a=Lb(a,b.qg())});return a};Dm.prototype.$G=function(){return this.Le};Dm.prototype.g=function(){Dm.c.g.call(this);D(this.Le,function(a){g(a)?D(a,function(a){a.g()}):a instanceof Cm&&a.g()});delete this.Le};v("gxnat.vis.ViewableGroup.prototype.addViewable",Dm.prototype.rx);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Dm.prototype.rF);v("gxnat.vis.ViewableGroup.prototype.getViewables",Dm.prototype.$G);v("gxnat.vis.ViewableGroup.prototype.dispose",Dm.prototype.g);function Em(){L.Oc.kd.call(this);this.Qc=[]}w(Em,L.Oc.kd);v("gxnat.vis.ViewableTree",Em);function Fm(a,b,c){this.TJ=a;this.EK=b;this.hF=c}v("gxnat.vis.ViewableTree.metadataCollection",Fm);f=Em.prototype;f.$q=null;f.Zl=null;f.tl=null;f.orientation=null;f.Ib=function(){return this.orientation};f.ko=function(a){this.$q=a};f.mo=function(a){this.Zl=a};f.fo=function(a){this.tl=a};f.YG=function(){return this.Qc};
f.g=function(){Em.c.g.call(this);null!=this.$q&&(tb(this.$q),delete this.uO);null!=this.Zl&&(tb(this.Zl),delete this.DO);null!=this.tl&&(tb(this.tl),delete this.VN);null!=this.Qc&&(D(this.Qc,function(a){a.g()}),delete this.Qc);null!=this.TB&&Ib(this.TB);delete this.TB;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Fm);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Em.prototype.$q);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Em.prototype.Zl);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Em.prototype.tl);v("gxnat.vis.ViewableTree.prototype.orientation",Em.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Em.prototype.Ib);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Em.prototype.ko);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Em.prototype.mo);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Em.prototype.fo);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Em.prototype.YG);
v("gxnat.vis.ViewableTree.prototype.dispose",Em.prototype.g);function Gm(a,b,c){Em.call(this);this.lr(a);null!=c&&null!=b&&(this.bn=c,this.Ch=Vg(this.bn,b.URI,"experiments"),this.Vo=new Qg(this.Ch));this.Dn=b;this.Xd={}}w(Gm,Em);v("gxnat.vis.AjaxViewableTree",Gm);var Hm={ID:"Scan ID",Name:"Name",type:"Scan Type"},Im={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Jm={label:"Session"};function Km(a,b,c){L.uh(a,function(a){g(a);D(a,function(a){b(a)});c&&c()})}f=Gm.prototype;f.nh=null;f.Ai=!1;
f.$A=function(a,b){null==this.nh&&(this.nh={});this.nh[a]=b};f.lz=function(){var a=0;C(this.nh,function(b,c){a+=this.Ry(c)}.bind(this));return a};f.Ry=function(a){return parseInt(this.nh[a].Size,10)};f.IF=function(){return this.nh};f.KF=function(){return this.Ai};f.aB=function(a){this.Ai=a};f.FF=function(){return this.bn};f.wG=function(){return this.Ch};f.BG=function(){return this.Xd};f.rB=function(a){this.Xd=a};f.Xl=function(){C(Hm,function(a,b){null!=this.Dn[b]&&(this.Xd[a]=this.Dn[b])}.bind(this))};
f.ko=function(a){Gm.c.ko.call(this,a)};f.mo=function(a){Gm.c.mo.call(this,a);C(Im,function(a,c){null!=this.Zl[c]&&(this.Xd[a]=this.Zl[c])}.bind(this))};f.fo=function(a){Gm.c.fo.call(this,a);C(Jm,function(a,c){null!=this.tl[c]&&(this.Xd[a]=this.tl[c])}.bind(this))};f.LF=function(){return this.dn};f.Dq=function(a){a=a[this.cn];if(!Ea(a,"/"))return this.Ch+"!"+a};
f.Ci=function(a){if(this.Ai)a();else{var b=0,c=0,d="",e;L.uh(this.Ch+this.Wp,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.Dq(e))this.$A(d,e),this.fi(d,this.vl);a();this.Ai=!0}.bind(this))}};f.vl=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.Yj=function(){};function Lm(a,b,c,d){var e=new Qg(a);Km(a+"/"+b.prototype.dn,function(a){new b(a,e.Bh("experiments"),c)},d)}
f.g=function(){Gm.c.g.call(this);null!=this.nh&&(tb(this.nh),delete this.nh);delete this.Ai;tb(this.Xd);delete this.Xd;null!=this.Dn&&(tb(this.Dn),delete this.Dn);null!=this.Vo&&(this.Vo.g(),delete this.Vo);delete this.bn;delete this.Ch};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Hm);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Im);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Jm);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",Km);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",Lm);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Gm.prototype.Ai);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Gm.prototype.$A);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Gm.prototype.lz);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Gm.prototype.Ry);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Gm.prototype.IF);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Gm.prototype.KF);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Gm.prototype.aB);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Gm.prototype.FF);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Gm.prototype.wG);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Gm.prototype.BG);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Gm.prototype.rB);v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Gm.prototype.Xl);
v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Gm.prototype.ko);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Gm.prototype.mo);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Gm.prototype.fo);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Gm.prototype.LF);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Gm.prototype.Dq);v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Gm.prototype.Ci);
v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Gm.prototype.vl);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Gm.prototype.Yj);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Gm.prototype.g);function Mm(a,b,c){Gm.call(this,"Scans",a,b);this.Xd["Total Frames"]=0;c&&c(this)}w(Mm,Gm);v("gxnat.vis.Scan",Mm);var Nm="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");f=Mm.prototype;f.dn="scans";f.Wp="/files";f.cn="URI";
f.Xl=function(){Mm.c.Xl.call(this);if(null!=this.wk["parameters/orientation"]){var a;a:{switch(this.wk["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.Xd.Orientation=a;this.orientation=this.Xd.Orientation}null!=this.wk["parameters/acqType"]&&(this.Xd["Acq. Type"]=this.wk["parameters/acqType"])};
f.Ci=function(a){this.Ai?a():L.uh(this.Vo.originalUrl,function(b){this.wk=b.items[0].data_fields;this.Xl();Mm.c.Ci.call(this,function(){this.Yj();a()}.bind(this))}.bind(this))};f.vl=function(a){a=Mm.c.vl.call(this,a);if(null!=a){for(var b=0,c=Nm.length;b<c;b++)if(Fa(a,"."+Nm[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.fi=function(a){this.lr("Scans");if(0==this.Qc.length){var b=new Dm;b.Ce("scan");b.lr("scans");this.Qc.push(b)}0==this.Qc[0].Le.length&&this.Qc[0].rx(new Cm);this.Qc[0].Le[0].fi(a,this.vl);this.Xd["Total Frames"]=this.Qc[0].Le[0].qg().length};f.Dq=function(a){return Vg(this.bn,a[this.cn],"experiments")};f.Yj=function(a){if(this.Qc&&this.Qc[0]){var b=this.Qc[0].Le[0].qg().sort(L.Kq);this.oo(b[Math.floor(b.length/2)]+L.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){Mm.c.g.call(this);null!=this.wk&&tb(this.wk);delete this.wk};v("gxnat.vis.Scan.acceptableFileTypes",Nm);v("gxnat.vis.Scan.prototype.folderQuerySuffix",Mm.prototype.dn);v("gxnat.vis.Scan.prototype.fileQuerySuffix",Mm.prototype.Wp);v("gxnat.vis.Scan.prototype.fileContentsKey",Mm.prototype.cn);v("gxnat.vis.Scan.prototype.setViewableMetadata",Mm.prototype.Xl);v("gxnat.vis.Scan.prototype.getFileList",Mm.prototype.Ci);v("gxnat.vis.Scan.prototype.fileFilter",Mm.prototype.vl);
v("gxnat.vis.Scan.prototype.addFiles",Mm.prototype.fi);v("gxnat.vis.Scan.prototype.makeFileUrl",Mm.prototype.Dq);v("gxnat.vis.Scan.prototype.getThumbnailImage",Mm.prototype.Yj);v("gxnat.vis.Scan.prototype.dispose",Mm.prototype.g);function Om(a,b,c,d){na(this);this.url=a;this.document=b;this.files=d}w(Om,mm);v("gxnat.slicerNode.Mrml",Om);function Pm(a,b){na(this);this.file=a;this.Vd=b}w(Pm,mm);v("gxnat.slicerNode.Displayable",Pm);function Qm(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function Rm(a,b,c){na(this);this.position=a;this.Mv=b;this.focus=c}w(Rm,mm);v("gxnat.slicerNode.Camera",Rm);function Sm(a,b,c,d,e,h){na(this);this.position=a;this.color=b;this.name=h}w(Sm,mm);v("gxnat.slicerNode.Annotations",Sm);function Tm(){na(this)}w(Tm,mm);v("gxnat.slicerNode.Layout",Tm);L.w={};v("gxnat.slicerUtils",L.w);L.w.aw="/scripts/viewer/xiv/vis/GenericColorTable.txt";L.w.yy=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Fa(a[c],".mrml")&&b.push(a[c]);return b};L.w.vt=function(a,b){L.get(a,function(a){b(new Qm(a))},"text")};L.w.dz=function(a,b,c){a=g(a)?a:[a];var d=L.w.yy(a),e=[],h=0;D(d,function(b){L.w.vt(b,function(l){h++;e.push(new Om(b,l,0,a));h==d.length&&c(e)})})};
L.w.ey=function(a,b,c){L.w.Ey(a,b,function(b){c(new zm(a,L.w.Iy(a),L.w.Fy(a),L.w.Zy(a),b,L.w.pz(a),L.w.cz(a),null))})};L.w.fz=function(a,b){var c=[],d=[],e=0;D(a,function(a){c=L.w.gz(a.document);D(c,function(k){L.w.ey(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};L.w.Qy=function(a,b){a=r(a)?L.w.vt(a):a;var c=[];D(a.getElementsByTagName(b),function(a){c.push(a)});return c};L.w.gz=function(a){return L.w.Qy(a,"SceneView")};
L.w.Iy=function(a){return new Rm(lm(a.getElementsByTagName("Camera")[0].getAttribute("position")),lm(a.getElementsByTagName("Camera")[0].getAttribute("viewUp")),lm(a.getElementsByTagName("Camera")[0].getAttribute("focalPoint")))};L.w.jz=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
L.w.Fy=function(a){return new ym(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};L.w.Zy=function(a){return new Tm(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
L.w.Pl=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};L.w.JF=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Ya(b,"!",Nl(c),"/",Nl(a))};
L.w.Ey=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,m,q="rgb(255,0,0)",p="",s="",u="",z=0,y,I;0==a.length?c(null):(D(a,function(a){k.push(L.w.Pl(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):D(k,function(a){L.get(a,function(a){l++;D(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){m=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
u=n[11];q=[1,0,0];s=p="";z=0;for(len=e.length;z<len;z++)if(y=e[z],p=y.getAttribute("id"),p===n[0].replace("_","")){s=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(I=d[z],p=I.getAttribute("id"),p===s){q=lm(I.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new Sm(m,q,0,0,0,u))}});l==k.length&&c(h)},"text")}))};
L.w.ot=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;D(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new Pm(h.getAttribute("fileName"),a));break}});return d};L.w.GF=function(){return null};
L.w.pz=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=L.w.ot(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";D(c,function(a){k=a.Vd.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(D(d,function(b){b.getAttribute("id")==k&&(a.Ym=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.Os=serverRoot+L.w.aw:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";D(e,function(a){l=a.Vd.getAttribute("attributes").split(";");D(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],D(h,function(b){b.Vd.getAttribute("id")==refVol&&(b.vg=a)}.bind(this)))}.bind(this))});D(h,function(c){c.Qf=new wm(a,c.Vd,b);c.vg&&(c.Qf.vg=c.vg,delete c.vg)});return h};L.w.cz=function(a){var b=L.w.ot(a,"Model","ModelStorage");D(b,function(b){b.Qf=new om(a,b.Vd)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",L.w.aw);
v("gxnat.slicerUtils.extractMrmls",L.w.yy);v("gxnat.slicerUtils.getMrmlAsXml",L.w.vt);v("gxnat.slicerUtils.getMrmlNodes",L.w.dz);v("gxnat.slicerUtils.createSceneViewProperties",L.w.ey);v("gxnat.slicerUtils.getSceneViewNodes",L.w.fz);v("gxnat.slicerUtils.getElementsFromMrml",L.w.Qy);v("gxnat.slicerUtils.getSceneViewsFromMrml",L.w.gz);v("gxnat.slicerUtils.getCameraFromSceneView",L.w.Iy);v("gxnat.slicerUtils.getThumbnail",L.w.jz);v("gxnat.slicerUtils.mrmlColorToRgb",L.w.kO);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",L.w.Fy);v("gxnat.slicerUtils.getLayoutFromSceneView",L.w.Zy);v("gxnat.slicerUtils.matchFileToSet",L.w.Pl);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",L.w.JF);v("gxnat.slicerUtils.getAnnotations",L.w.Ey);v("gxnat.slicerUtils.getDisplayables",L.w.ot);v("gxnat.slicerUtils.getFibers",L.w.GF);v("gxnat.slicerUtils.getVolumes",L.w.pz);v("gxnat.slicerUtils.getMeshes",L.w.cz);function Um(a,b,c){this.xh=[];Gm.call(this,"Slicer Scenes",a,b);c&&c(this)}w(Um,Gm);v("gxnat.vis.Slicer",Um);var Xm=["jpeg","jpg","png","gif"];f=Um.prototype;f.dn="resources/Slicer/files";f.Wp="?listContents=true";f.cn="File Name";f.Ci=function(a){this.Ai?Ym(this,a):Mm.c.Ci.call(this,function(){this.Yj(function(){this.Xl();Ym(this,a)}.bind(this))}.bind(this))};function Ym(a,b){L.w.dz(a.xh,0,function(a){L.w.fz(a,function(d){this.$x(d,a,b)}.bind(this))}.bind(a))}
f.$x=function(a,b,c){this.lI=b;this.gK=a;var d,e,h,k;D(this.gK,function(a){d=[a.YK||[],a.gI||[],a.jF||[]];e=[];D(d,function(a){D(a,function(a){h=L.w.Pl(Nl(a.file),this.xh);a.Qf instanceof wm&&a.Qf.vg&&(a.Qf.labelMapFile=L.w.Pl(a.Qf.vg.file,this.xh),null!=a.Qf.vg.Os&&null==L.w.Pl(a.Qf.vg.Os,this.xh)&&(a.Qf.colorTableFile=a.Qf.vg.Os));e.push(new Cm(h,a.Qf))}.bind(this))}.bind(this));k=new Dm(e);k.oo(L.w.Pl(L.w.jz(a.element,this.lI[0].document),this.xh));k.Ce(a.element.getAttribute("name"));k.hv(a);
this.Qc.push(k)}.bind(this));c&&c(this)};f.Yj=function(a){var b="",c=0,d=this.xh.length;for(this.thumbnailFiles=[];c<d;c++)b=xk(this.xh[c]),-1!=Xm.indexOf(b)&&this.thumbnailFiles.push(this.xh[c]);D(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=vk(wk(this.thumbnailFiles[c]))){this.oo(this.thumbnailFiles[c]);break}a&&a(this)};f.fi=function(a){g(a)||(a=[a]);D(a,function(a){this.xh.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",Xm);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",Um.prototype.dn);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",Um.prototype.Wp);v("gxnat.vis.Slicer.prototype.fileContentsKey",Um.prototype.cn);v("gxnat.vis.Slicer.prototype.getFileList",Um.prototype.Ci);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",Um.prototype.$x);v("gxnat.vis.Slicer.prototype.getThumbnailImage",Um.prototype.Yj);v("gxnat.vis.Slicer.prototype.addFiles",Um.prototype.fi);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function Zm(){}v("xiv",Zm);function $m(a,b,c,d){uc.call(this);an();bn();this.$o={f:Mm,AK:Um};this.Xc=null!=a?a:$m.States.Lk;this.hI=b;this.TA=d;this.br=Sg(d);this.kg=this.kg?this.kg:[];a="/"!==c[0]?"/"+c:c;-1===this.kg.indexOf(this.br+a)&&this.kg.push(-1===a.indexOf(this.br)?this.br+a:a);1==this.kg.length&&(this.ud=new Qg(this.kg[0]))}w($m,uc);v("xiv.start",$m);$m.ModalStates={fe:"fullscreen",Ke:"popup",Kr:"fullscreen-popup",bg:"windowed",Lk:"demo",BC:"demp-fullscreen"};$m.States={Lk:"demo",WL:"live"};
function an(){Nf.IMA=[Of,null]}function bn(){document.body.style.overflow="hidden"}f=$m.prototype;f.Jr=B();f.Ex=300;f.Mz=1E3;f.oq=!1;f.qq=!1;f.qB=function(){};f.Mx=function(){cn(this);this.show();if(this.Xc==$m.States.Lk){S(this.Oa.P.Ke);S(this.Oa.P.Kk);var a=Uf(function(){delete a;dn(this)}.bind(this),this.Mz)}else this.Oa.$b(this.hI),en(this)};f.rK=function(a){this.iI=a};
function cn(a){a.Oa=new a.iI;a.Oa.dB(serverRoot);G(a.Oa,"g",a.MI.bind(a));window.onresize=function(){null!=this.Oa&&this.Oa.j()}.bind(a)}f.MI=function(){this.Bd.$z(null,function(a){D(a,function(a){fn(this,a);this.Oa.Q.Kc()}.bind(this))}.bind(this))};f.show=function(){this.Oa.a().style.opacity=0;this.Oa.k();G(this.Oa.Q.la,"d",this.Mu.bind(this));G(this.Oa.P.Ke,"click",this.LE.bind(this));G(this.Oa.P.Kk,"click",this.g.bind(this));this.Oa.Ob.Bb(!0,0,this.Mz);zl(this.Oa.a(),this.Ex)};
function dn(a){var b=a.Oa.Q,c={slicer:(new Zm.fK.IM).yG(),scan:(new Zm.fK.HM).yG()},d;C(c,function(a,b){D(a,function(a){d="scan"==b?new this.$o.f:new this.$o.AK;d.fi(a.files);d.aB(!0);d.rB(a.jO);d.oo(a.SB);gn(this,d,a.WN)}.bind(this))}.bind(a));b.la.Uj()}
function en(a){var b=a.Oa.Q.la,c=0;a.Oa.Q&&G(a.Oa.Q.la,hn,a.GJ.bind(a));a.Bd=new Wg(a.kg[0]);a.Bd.Xz(function(a){var e=fn(this,a);0==c&&(this.BH=a,this.Iz=b.Bb(e[0]));1==c&&(this.qq=!0,this.CH=a,this.Ht=b.Bb(e[1],this.Iz));2==c&&(this.oq=!0,this.pq=a,this.AH=b.Bb(e[2],this.Ht));c++}.bind(a))}function jn(a,b){var c=a.Bd.en(b),d=a.Bd.Gy(b),e=0;C(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}
function fn(a,b){var c=a.Bd.Hy(b),d=jn(a,b);kn(a,d,c);return d}function ln(a,b){a.Bd.Wz(b.originalUrl,null,function(a){if(b.Bh("subjects")==this.ud.Bh("subjects")&&this.qq){var d=this.ud.Bh("experiments");this.pq=this.Bd.yl(d);Kb(a,this.pq);Nb(a,0,0,this.pq);this.qq=!1}D(a,function(a){fn(this,a)}.bind(this))}.bind(a))}f.Mu=function(a){if(null!=a.Vd[this.Jr])switch(a=new Qg(a.Vd[this.Jr]),a.Yp()){case "subjects":ln(this,a);break;case "experiments":mn(this,a.originalUrl)}};
f.Fl=function(a){Al(this.Oa.a(),this.Ex,a)};f.g=function(){this.Fl(this.WE.bind(this))};function mn(a,b){if(null==a.Yt)a.Yt=[];else if(-1<a.Yt.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Bd.en(a.Bd.yl(b)),c=new Fm(c.projects[hh],c.subjects[hh],c.experiments[hh]);nn(a,b,function(){this.Yt.push(b);this.oq&&(this.oq=!1,C(this.Ht.ie,function(){}.bind(this)))}.bind(a),c)}f.GJ=function(a){var b=a.Vd.Ed.Ap;a.Vd.Ed.Ap=0;a.Vd.Ed.Ap=b};
f.LE=function(){var a=open(this.TA+"/scripts/viewer/xiv/popup.html?"+this.kg[0],"XImgView","width=1200,height=800");a.focus();var b=this.kg[0];a.onload=function(){a.fO(b,$m.ModalStates.Ke,serverRoot)}.bind(this);this.g()};function nn(a,b,c,d){on(a,b,function(a){var b=a.Ch;pn(this,a,b,function(a){gn(this,a)}.bind(this));null!=d&&(this.gb[b].ko(d.TJ),this.gb[b].mo(d.EK),this.gb[b].fo(d.hF))}.bind(a),c)}
function kn(a,b,c){var d=a.Oa.Q.la;d.Tm(b);zippyNodes=d.pt(b);D(zippyNodes,function(a,b){null==c||null==c[b]||null==a[this.Jr]&&(a[this.Jr]=c[b])}.bind(a))}function gn(a,b,c){var d=a.Oa.Q;null!=d&&(null==c&&null!=a.Bd&&(c=jn(a,a.Bd.yl(b.bn))),"Scans"!=b.eh&&c.push(b.eh),b.Ci(function(){if(0<b.Qc.length){var a=d.ni(b,c);if("Scans"!=b.eh){var h=d.la.pt(c);0<c.length&&1<h.length&&d.Bb(c[c.length-1],h[h.length-2])}d.bv(this.Oa.a());a.cv(b.am);a.Nv()}}.bind(a)))}
function pn(a,b,c,d){a.gb=a.gb?a.gb:{};null==a.gb[c]&&(a.gb[c]=b,d(b))}
f.WE=function(){$m.c.g.call(this);document.body.style.overflow="visible";C(this.gb,function(a,b){a.g();delete this.gb[b]}.bind(this));delete this.gb;this.Bd&&(this.Bd.g(),delete this.Bd);delete this.kg;delete this.TA;delete this.br;delete this.XN;null!=this.ud&&(this.ud.g(),delete this.ud);delete this.oq;delete this.qq;delete this.BH;delete this.CH;delete this.pq;delete this.Iz;delete this.Ht;delete this.AH;H(this.Oa);this.Oa.g();S(this.Oa.a());delete this.Oa};
function on(a,b,c,d){var e=nb(a.$o),h=0;C(a.$o,function(a){Lm(b,a,c,function(){h++;h===e&&null!=d&&d()})})}
function qn(){var a=!0,b=$b(),c={Chrome:{An:Vb("Chrome")||Vb("CriOS"),On:11},IE:{An:Yb(),On:11},Safari:{An:Zb(),On:5.1},Opera:{An:Xb(),On:12},Firefox:{An:Vb("Firefox"),On:4}},d=!1;C(c,function(c){if(c.An&&!d&&1==Za(c.On,b)){c=new Yl;c.bx();c.cx();var h=c.wp();M(h,Yl.CSS.rw);h.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.a().style.position="fixed";c.a().style.height="240px";c.gi("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>");
c.Hg[0].style.top="120px";c.k();c.a().style.opacity=0;zl(c.a(),400);a=!1;d=!0}});a&&!$m.checkForWebGL()&&(rn(),a=!1);return a}
function rn(){var a='<br>It looks like <a style="color: #00FFFF" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">WebGL or Experimental-WebGL</a> is disabled.<br><br>How to enable WebGL in ',b,c=':<br> <a  style="color: #00FFFF" href=';Yb()?(b="Internet Explorer",c+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx</a>'):Vb("Chrome")||Vb("CriOS")?(b="Chrome",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):
Vb("Firefox")?(b="Firefox",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):Zb()?(b="Safari",c+='"https://discussions.apple.com/thread/3300585?start=0">https://discussions.apple.com/thread/3300585?start=0</a>'):Xb()&&(b="Opera",c+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html</a>');a+=b+c;b=new Yl;
b.bx();b.cx();c=b.wp();M(c,Yl.CSS.rw);c.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";b.gi(a);b.Hg[0].style.top="120px";b.k();b.a().style.position="fixed";b.a().style.opacity=0;zl(b.a(),400)}$m.checkForWebGL=function(){var a=Q("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};v("xiv.start.States",$m.States);v("xiv.start.loadCustomExtensions",an);v("xiv.start.adjustDocumentStyle",bn);v("xiv.start.ModalStates",$m.ModalStates);
v("xiv.start.checkForWebGL",$m.checkForWebGL);v("xiv.start.isCompatible",qn);v("xiv.start.prototype.setServerRoot",$m.prototype.qB);v("xiv.start.prototype.setModalType",$m.prototype.rK);v("xiv.start.prototype.begin",$m.prototype.Mx);v("xiv.start.prototype.show",$m.prototype.show);v("xiv.start.prototype.hide",$m.prototype.Fl);v("xiv.start.prototype.dispose",$m.prototype.g);window["xiv.start.isCompatible"]=qn;window["xiv.start.checkForWebGL"]=$m.checkForWebGL;window["xiv.start.ModalStates"]=$m.ModalStates;
$m.prototype.setServerRoot=$m.prototype.qB;$m.prototype.begin=$m.prototype.Mx;function sn(){Yc.call(this);this.Cn=[];this.Av=[];this.bo=[]}w(sn,Yc);f=sn.prototype;f.uq=!1;f.vq=!1;f.Ki=!1;f.Oz=function(){return this.Ki};f.oB=function(a){this.gr=a};f.ia=function(){if(!this.Ki){for(var a,b=0;a=this.Cn[b];b++)tn(this,a);this.Ki=!0}};function tn(a,b){a.uq&&(G(b.element,"mousedown",b.Mf,!1,b),a.qv&&Lj(b.element,a.qv));a.vq&&a.zv&&Lj(b.element,a.zv)}
function un(a){for(var b,c=0;b=a.Cn[c];c++){var d=a;d.uq&&(Sc(b.element,"mousedown",b.Mf,!1,b),d.qv&&Nj(b.element,d.qv));d.vq&&d.zv&&Nj(b.element,d.zv);b.g()}a.Cn.length=0}
f.vo=function(a,b){if(!this.Te)if(this.Te=b,!1==this.dispatchEvent(new vn("dragstart",0,this.Te)))this.Te=null;else{var c=b.pi;this.Qj=this.Ts(c);var d=Fh(c);d.body.appendChild(this.Qj);var e=this.Qj,h=Di(c),c=Vi(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.La=new cj(e);this.La.oB(this.gr);G(this.La,"drag",this.jA,!1,this);G(this.La,"end",this.xi,!1,this);G(d.body,"selectstart",this.OB);this.$l=[];for(e=0;d=this.Av[e];e++)for(var k,
h=0;k=d.Cn[h];h++)for(var c=d,l=[k.element],n=this.$l,m=0;m<l.length;m++){var q=l[m],p,s=q;p=Di(s);s=U(s);p=new th(p.y,p.x+s.width,p.y+s.height,p.x);n.push(new wn(p,c,k,q));xn(this,p)}this.Ih||(this.Ih=new th(0,0,0,0));for(e=0;d=this.bo[e];e++)d.Ps=[],d.UA=d.l.scrollLeft,d.VA=d.l.scrollTop,h=Di(d.l),c=U(d.l),d.dc=new th(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.$l[e];e++)for(h=0;d=this.bo[h];h++)ai(d.l,c.l)&&(d.Ps.push(c),c.ao=d);this.Aj=null;for(e=0;d=this.bo[e];e++)G(d.l,"scroll",this.Wx,
!1,this);this.La.vo(a);a.preventDefault()}};
f.xi=function(a){var b=a.aF?null:this.Aj;if(b&&b.Bk){var c=a.clientX;a=a.clientY;var d=qi(Ch(this.Qj)),e=c+d.x,d=a+d.y,h;this.Ao&&(h=this.Ao(b.th,b.dc,e,d));this.dispatchEvent(new vn("drag",0,this.Te,0,b.th,0,c,a));b.Bk.dispatchEvent(new vn("drop",0,this.Te,0,b.th,0,c,a,0,0,h))}this.dispatchEvent(new vn("dragend",0,this.Te));Sc(this.La,"drag",this.jA,!1,this);Sc(this.La,"end",this.xi,!1,this);Sc(Fh(this.Te.pi).body,"selectstart",this.OB);for(b=0;c=this.bo[b];b++)Sc(c.l,"scroll",this.Wx,!1,this),c.Ps=
[];this.La.g();S(this.Qj);delete this.Te;delete this.Qj;delete this.La;delete this.$l;delete this.Aj};
f.jA=function(a){var b,c=qi(Ch(this.Qj));b=new N(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Aj,h;if(e){this.Ao&&e.Bk&&(h=this.Ao(e.th,e.dc,c,d));if(e.dc.contains(b)&&h==this.ax)return;e.Bk&&(this.dispatchEvent(new vn("dragout",0,this.Te,0,e.th)),e.Bk.dispatchEvent(new vn("dragout",0,this.Te,0,e.th,0,void 0,void 0,0,0,this.ax)));this.ax=h;this.Aj=null}if(this.Ih.contains(b)){a:{for(var k=0;e=this.$l[k];k++)if(e.dc.contains(b))if(e.ao){if(e.ao.dc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.Aj=b)&&e.Bk)this.Ao&&(h=this.Ao(e.th,e.dc,c,d)),c=new vn("dragover",0,this.Te,0,e.th),c.FK=h,this.dispatchEvent(c),e.Bk.dispatchEvent(new vn("dragover",0,this.Te,0,e.th,0,a.clientX,a.clientY,0,0,h));else if(!e){this.se||(this.se=new wn(this.Ih.clone()));a=this.se.dc;a.top=this.Ih.top;a.right=this.Ih.right;a.bottom=this.Ih.bottom;a.left=this.Ih.left;for(h=0;e=this.$l[h];h++)b=e.dc,e.ao&&(e=e.ao.dc,b=new th(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.Aj=10<=(a.right-a.left)*(a.bottom-a.top)?this.se:null}}};f.OB=function(){return!1};
f.Wx=function(a){for(var b=0,c;c=this.bo[b];b++)if(a.target==c.l){var d=c.VA-c.l.scrollTop,e=c.UA-c.l.scrollLeft;c.VA=c.l.scrollTop;c.UA=c.l.scrollLeft;this.se&&this.Aj==this.se&&(0<d?this.se.dc.top+=d:this.se.dc.bottom+=d,0<e?this.se.dc.left+=e:this.se.dc.right+=e);for(var h=0,k;k=c.Ps[h];h++)k=k.dc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,xn(this,k)}this.La.Rl(a)};
f.Ts=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=Q("table",null,Q("tbody",null,b));break a;case "td":case "th":a=Q("table",null,Q("tbody",null,Q("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.bF&&Lj(a,this.bF);return a};f.Py=function(){return this.La};
function xn(a,b){if(1==a.$l.length)a.Ih=new th(b.top,b.right,b.bottom,b.left);else{var c=a.Ih;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.e=function(){sn.c.e.call(this);un(this)};function vn(a,b,c,d,e,h,k,l,n,m,q){Cc.call(this,a);this.Qp=c;this.ql=e;this.clientX=k;this.clientY=l;this.FK=q}w(vn,Cc);vn.prototype.e=function(){};
function yn(a,b){Yc.call(this);this.element=Gh(a);this.data=b;this.Ha=null;this.ec=new Zi(this);xc(this,va(yc,this.ec));if(!this.element)throw Error("Invalid argument");}w(yn,Yc);f=yn.prototype;f.pi=null;f.Mf=function(a){if(Hc(a)){var b=a.target;b&&(this.ec.r(b,"mousemove",this.hA,!1).r(b,"mouseout",this.hA,!1),this.ec.r(Fh(b),"mouseup",this.jI,!0),this.pi=b,this.tv=new N(a.clientX,a.clientY),a.preventDefault())}};f.io=function(a){this.Ha=a};
f.hA=function(a){var b=this.pi,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.tv.x)+Math.abs(a.clientY-this.tv.y)||b)this.ec.Rf(),this.Ha.vo(a,this)};f.jI=function(){this.ec.Rf();delete this.tv;this.pi=null};function wn(a,b,c,d){this.dc=a;this.Bk=b;this.th=c;this.l=d}wn.prototype.ao=null;function zn(a,b){this.type=a;this.currentTarget=this.target=b||null}f=zn.prototype;f.Pf=!1;f.defaultPrevented=!1;f.Zn=!0;f.stopPropagation=function(){this.Pf=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.Zn=!1};
function An(a){a=new zn("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Gi(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.Zn=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.Pf;d--){var e=b[d],h=a.type,k=new Fc(a,b[d]);ib(e)?Zc(e,h,!0,k):Vc(e,h,!0,k)}for(d=0;d<b.length&&!a.Pf;d++)e=b[d],h=a.type,k=new Fc(a,b[d]),ib(e)?Zc(e,h,!1,k):Vc(e,h,!1,k)};function Bn(a,b){if(!a)throw Error("Invalid class name "+a);if(!ka(b))throw Error("Invalid decorator function "+b);Cn[a]=b}var Dn={},Cn={};function En(){}var Fn;fa(En);var Gn={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=En.prototype;f.og=function(){};f.p=function(a){var b=a.G().p("div",this.Xj(a).join(" "),a.getContent());Hn(this,a,b);return b};f.Ta=function(a){return a};f.Tj=function(a,b,c){if(a=a.a?a.a():a){var d=[b];E&&!nc("7")&&(d=In(Jj(a),b),d.push(b));(c?Mj:Oj)(a,d)}};f.qe=function(){return!0};
f.ob=function(a,b){b.id&&wj(a,b.id);var c=this.Ta(b);c&&c.firstChild?Jn(a,c.firstChild.nextSibling?Mb(c.childNodes):c.firstChild):a.qc=null;var d=0,e=this.O(),h=this.O(),k=!1,l=!1,c=!1,n=Mb(Jj(b));D(n,function(a){k||a!=e?l||a!=h?d|=this.wt(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.I=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var m=a.Ff;m&&n.push.apply(n,m);if(E&&!nc("7")){var q=In(n);0<q.length&&(n.push.apply(n,q),c=!0)}if(!k||!l||m||c)b.className=n.join(" ");Hn(this,a,b);return b};
f.Kl=function(a){a.we()&&this.Wl(a.a(),!0);a.isEnabled()&&this.Ui(a,a.ra())};function Kn(a,b,c){if(a=c||a.og())c=b.getAttribute("role")||null,a!=c&&Rj(b,a)}function Hn(a,b,c){b.ra()||Sj(c,"hidden",!b.ra());b.isEnabled()||a.Lg(c,1,!b.isEnabled());Ln(b,8)&&a.Lg(c,8,!!(b.I&8));Ln(b,16)&&a.Lg(c,16,b.Li());Ln(b,64)&&a.Lg(c,64,!!(b.I&64))}f.co=function(a,b){Si(a,!b,!E&&!ec)};f.Wl=function(a,b){this.Tj(a,this.O()+"-rtl",b)};f.sh=function(a){var b;return Ln(a,32)&&(b=a.Ub())?gi(b)&&hi(b):!1};
f.Ui=function(a,b){var c;if(Ln(a,32)&&(c=a.Ub())){if(!b&&a.I&32){try{c.blur()}catch(d){}a.I&32&&a.ak(null)}(gi(c)&&hi(c))!=b&&fi(c,b)}};f.U=function(a,b){Pi(a,b);a&&Sj(a,"hidden",!b)};f.$b=function(a,b,c){var d=a.a();if(d){var e=this.fn(b);e&&this.Tj(a,e,c);this.Lg(d,b,c)}};f.Lg=function(a,b,c){Fn||(Fn={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Fn[b];var d=a.getAttribute("role")||null;d&&(d=Gn[d]||b,b="checked"==b||"selected"==b?d:b);b&&Sj(a,b,c)};
f.Si=function(a,b){var c=this.Ta(a);if(c&&(Uh(c),b))if(r(b))ci(c,b);else{var d=function(a){if(a){var b=Fh(c);c.appendChild(r(a)?b.createTextNode(a):a)}};g(b)?D(b,d):!ha(b)||"nodeType"in b?d(b):D(Mb(b),d)}};f.Ub=function(a){return a.a()};f.O=function(){return"goog-control"};f.Xj=function(a){var b=this.O(),c=[b],d=this.O();d!=b&&c.push(d);b=a.Al();for(d=[];b;){var e=b&-b;d.push(this.fn(e));b&=~e}c.push.apply(c,d);(a=a.Ff)&&c.push.apply(c,a);E&&!nc("7")&&c.push.apply(c,In(c));return c};
function In(a,b){var c=[];b&&(a=a.concat([b]));D([],function(d){!Eb(d,va(Hb,a))||b&&!Hb(d,b)||c.push(d.join("_"))});return c}f.fn=function(a){this.Gp||Mn(this);return this.Gp[a]};f.wt=function(a){if(!this.MB){this.Gp||Mn(this);var b=this.Gp,c={},d;for(d in b)c[b[d]]=d;this.MB=c}a=parseInt(this.MB[a],10);return isNaN(a)?0:a};function Mn(a){var b=a.O();b.replace(/\xa0|\s/g," ");a.Gp={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Nn(a,b){Yc.call(this);a&&this.ll(a,b)}w(Nn,Yc);f=Nn.prototype;f.l=null;f.wq=null;f.Nt=null;f.xq=null;f.xe=-1;f.Mi=-1;f.Bs=!1;
var On={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Pn={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Qn=E||gc&&nc("525"),Rn=ac&&fc;f=Nn.prototype;
f.fq=function(a){gc&&(17==this.xe&&!a.ctrlKey||18==this.xe&&!a.altKey||ac&&91==this.xe&&!a.metaKey)&&(this.Mi=this.xe=-1);-1==this.xe&&(a.ctrlKey&&17!=a.keyCode?this.xe=17:a.altKey&&18!=a.keyCode?this.xe=18:a.metaKey&&91!=a.keyCode&&(this.xe=91));Qn&&!Dj(a.keyCode,this.xe,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Mi=Fj(a.keyCode),Rn&&(this.Bs=a.altKey))};f.lH=function(a){this.Mi=this.xe=-1;this.Bs=a.altKey};
f.handleEvent=function(a){var b=a.tc,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.Mi,d=13!=c&&27!=c?b.keyCode:0):gc&&"keypress"==a.type?(c=this.Mi,d=0<=b.charCode&&63232>b.charCode&&Ej(c)?b.charCode:0):ec?(c=this.Mi,d=Ej(c)?b.keyCode:0):(c=b.keyCode||this.Mi,d=b.charCode||0,Rn&&(e=this.Bs),ac&&63==d&&224==c&&(c=191));var h=c=Fj(c),k=b.keyIdentifier;c?63232<=c&&c in On?h=On[c]:25==c&&a.shiftKey&&(h=9):k&&k in Pn&&(h=Pn[k]);a=h==this.xe;this.xe=h;b=new Sn(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.l};f.ll=function(a,b){this.xq&&this.detach();this.l=a;this.wq=G(this.l,"keypress",this,b);this.Nt=G(this.l,"keydown",this.fq,b,this);this.xq=G(this.l,"keyup",this.lH,b,this)};f.detach=function(){this.wq&&(Tc(this.wq),Tc(this.Nt),Tc(this.xq),this.xq=this.Nt=this.wq=null);this.l=null;this.Mi=this.xe=-1};f.e=function(){Nn.c.e.call(this);this.detach()};function Sn(a,b,c,d){Fc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(Sn,Fc);function Tn(a,b,c){sj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=na(b);if(d=Dn[d])break;b=b.c?b.c.constructor:null}b=d?ka(d.Od)?d.Od():new d:null}this.ja=b;this.qc=ca(a)?a:null}w(Tn,sj);f=Tn.prototype;f.qc=null;f.I=0;f.Bo=39;f.Lm=255;f.xo=0;f.jc=!0;f.Ff=null;f.ck=!0;f.yp=!1;f.Uu=null;f.ho=function(a){this.$&&a!=this.ck&&Un(this,a);this.ck=a};f.Ub=function(){return this.ja.Ub(this)};f.Zp=function(){return this.cb||(this.cb=new Nn)};f.Ga=function(){return this.ja};
f.Tj=function(a,b){b?a&&(this.Ff?Hb(this.Ff,a)||this.Ff.push(a):this.Ff=[a],this.ja.Tj(this,a,!0)):a&&this.Ff&&Kb(this.Ff,a)&&(0==this.Ff.length&&(this.Ff=null),this.ja.Tj(this,a,!1))};f.p=function(){var a=this.ja.p(this);this.l=a;Kn(this.ja,a,this.Di());this.yp||this.ja.co(a,!1);this.ra()||this.ja.U(a,!1)};f.Di=function(){return this.Uu};f.Ta=function(){return this.ja.Ta(this.a())};f.qe=function(a){return this.ja.qe(a)};
f.Kd=function(a){this.l=a=this.ja.ob(this,a);Kn(this.ja,a,this.Di());this.yp||this.ja.co(a,!1);this.jc="none"!=a.style.display};f.Sa=function(){Tn.c.Sa.call(this);this.ja.Kl(this);if(this.Bo&-2&&(this.ck&&Un(this,!0),Ln(this,32))){var a=this.Ub();if(a){var b=this.Zp();b.ll(a);this.Ua().r(b,"key",this.rg).r(a,"focus",this.bk).r(a,"blur",this.ak)}}};
function Un(a,b){var c=a.Ua(),d=a.a();b?(c.r(d,"mouseover",a.dk).r(d,"mousedown",a.sg).r(d,"mouseup",a.Hf).r(d,"mouseout",a.hq),a.nn!=ea&&c.r(d,"contextmenu",a.nn),E&&c.r(d,"dblclick",a.rz)):(c.eb(d,"mouseover",a.dk).eb(d,"mousedown",a.sg).eb(d,"mouseup",a.Hf).eb(d,"mouseout",a.hq),a.nn!=ea&&c.eb(d,"contextmenu",a.nn),E&&c.eb(d,"dblclick",a.rz))}f.fc=function(){Tn.c.fc.call(this);this.cb&&this.cb.detach();this.ra()&&this.isEnabled()&&this.ja.Ui(this,!1)};
f.e=function(){Tn.c.e.call(this);this.cb&&(this.cb.g(),delete this.cb);delete this.ja;this.Ff=this.qc=null};f.getContent=function(){return this.qc};f.Si=function(a){this.ja.Si(this.a(),a);this.qc=a};function Jn(a,b){a.qc=b}f.Xp=function(){var a=this.getContent();if(!a)return"";a=r(a)?a:g(a)?Cb(a,ki).join(""):ii(a);return Ia(a)};f.Wl=function(a){Tn.c.Wl.call(this,a);var b=this.a();b&&this.ja.Wl(b,a)};f.co=function(a){this.yp=a;var b=this.a();b&&this.ja.co(b,a)};f.ra=function(){return this.jc};
f.U=function(a,b){if(b||this.jc!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.ja.U(c,a);this.isEnabled()&&this.ja.Ui(this,a);this.jc=a;return!0}return!1};f.isEnabled=function(){return!(this.I&1)};f.Zb=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Vn(this,1,!a)||(a||(this.setActive(!1),this.Tf(!1)),this.ra()&&this.ja.Ui(this,a),this.$b(1,!a))};f.Tf=function(a){Vn(this,2,a)&&this.$b(2,a)};f.tg=function(){return!!(this.I&4)};
f.setActive=function(a){Vn(this,4,a)&&this.$b(4,a)};f.lo=function(a){Vn(this,8,a)&&this.$b(8,a)};f.Li=function(){return!!(this.I&16)};f.df=function(a){Vn(this,16,a)&&this.$b(16,a)};f.Kb=function(a){Vn(this,64,a)&&this.$b(64,a)};f.Al=function(){return this.I};f.$b=function(a,b){Ln(this,a)&&b!=!!(this.I&a)&&(this.ja.$b(this,a,b),this.I=b?this.I|a:this.I&~a)};function Ln(a,b){return!!(a.Bo&b)}
f.Nc=function(a,b){if(this.$&&this.I&a&&!b)throw Error("Component already rendered");!b&&this.I&a&&this.$b(a,!1);this.Bo=b?this.Bo|a:this.Bo&~a};function Wn(a,b){return!!(a.Lm&b)&&Ln(a,b)}function Vn(a,b,c){return Ln(a,b)&&!!(a.I&b)!=c&&(!(a.xo&b)||a.dispatchEvent(uj(b,c)))&&!a.Pj}f.dk=function(a){(!a.relatedTarget||!ai(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&Wn(this,2)&&this.Tf(!0)};
f.hq=function(a){a.relatedTarget&&ai(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(Wn(this,4)&&this.setActive(!1),Wn(this,2)&&this.Tf(!1))};f.nn=ea;f.sg=function(a){this.isEnabled()&&(Wn(this,2)&&this.Tf(!0),Hc(a)&&(Wn(this,4)&&this.setActive(!0),this.ja.sh(this)&&this.Ub().focus()));!this.yp&&Hc(a)&&a.preventDefault()};f.Hf=function(a){this.isEnabled()&&(Wn(this,2)&&this.Tf(!0),this.tg()&&this.qk(a)&&Wn(this,4)&&this.setActive(!1))};f.rz=function(a){this.isEnabled()&&this.qk(a)};
f.qk=function(a){Wn(this,16)&&this.df(!this.Li());Wn(this,8)&&this.lo(!0);Wn(this,64)&&this.Kb(!(this.I&64));var b=new Cc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Ru=a.Ru);return this.dispatchEvent(b)};f.bk=function(){Wn(this,32)&&Vn(this,32,!0)&&this.$b(32,!0)};f.ak=function(){Wn(this,4)&&this.setActive(!1);Wn(this,32)&&Vn(this,32,!1)&&this.$b(32,!1)};
f.rg=function(a){return this.ra()&&this.isEnabled()&&this.Gf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.Gf=function(a){return 13==a.keyCode&&this.qk(a)};if(!ka(Tn))throw Error("Invalid component class "+Tn);if(!ka(En))throw Error("Invalid renderer class "+En);var Xn=na(Tn);Dn[Xn]=En;Bn("goog-control",function(){return new Tn(null)});function Yn(){this.Tx=[]}w(Yn,En);fa(Yn);function Zn(a,b){var c=a.Tx[b];if(!c){switch(b){case 0:c=a.O()+"-highlight";break;case 1:c=a.O()+"-checkbox";break;case 2:c=a.O()+"-content"}a.Tx[b]=c}return c}f=Yn.prototype;f.og=function(){return"menuitem"};f.p=function(a){var b=a.G().p("div",this.Xj(a).join(" "),$n(this,a.getContent(),a.G()));ao(this,a,b,Ln(a,8)||Ln(a,16));return b};f.Ta=function(a){return a&&a.firstChild};
f.ob=function(a,b){var c=Xh(b),d=Zn(this,2);c&&Kj(c,d)||b.appendChild($n(this,b.childNodes,a.G()));Kj(b,"goog-option")&&(a.mr(!0),this.mr(a,b,!0));return Yn.c.ob.call(this,a,b)};f.Si=function(a,b){var c=this.Ta(a),d=bo(this,a)?c.firstChild:null;Yn.c.Si.call(this,a,b);d&&!bo(this,a)&&c.insertBefore(d,c.firstChild||null)};function $n(a,b,c){a=Zn(a,2);return c.p("div",a,b)}f.pB=function(a,b,c){a&&b&&ao(this,a,b,c)};f.mr=function(a,b,c){a&&b&&ao(this,a,b,c)};
function bo(a,b){var c=a.Ta(b);if(c){var c=c.firstChild,d=Zn(a,1);return!!c&&$h(c)&&Kj(c,d)}return!1}function ao(a,b,c,d){Kn(a,c,b.Di());Hn(a,b,c);d!=bo(a,c)&&(Pj(c,"goog-option",d),c=a.Ta(c),d?(a=Zn(a,1),c.insertBefore(b.G().p("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.fn=function(a){switch(a){case 2:return Zn(this,0);case 16:case 8:return"goog-option-selected";default:return Yn.c.fn.call(this,a)}};
f.wt=function(a){var b=Zn(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return Yn.c.wt.call(this,a)}};f.O=function(){return"goog-menuitem"};function co(a,b,c,d){Tn.call(this,a,d||Yn.Od(),c);this.D(b)}w(co,Tn);f=co.prototype;f.H=function(){var a=this.fu;return null!=a?a:this.Xp()};f.D=function(a){this.fu=a};f.Nc=function(a,b){co.c.Nc.call(this,a,b);switch(a){case 8:this.Li()&&!b&&this.df(!1);var c=this.a();c&&this.Ga().pB(this,c,b);break;case 16:(c=this.a())&&this.Ga().mr(this,c,b)}};f.pB=function(a){this.Nc(8,a)};f.mr=function(a){this.Nc(16,a)};
f.Xp=function(){var a=this.getContent();return g(a)?(a=Cb(a,function(a){return $h(a)&&(Kj(a,"goog-menuitem-accel")||Kj(a,"goog-menuitem-mnemonic-separator"))?"":ki(a)}).join(""),Ia(a)):co.c.Xp.call(this)};f.Hf=function(a){var b=this.getParent();if(b){var c=b.AA;b.AA=null;if(b=c&&t(a.clientX))b=new N(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}co.c.Hf.call(this,a)};f.Gf=function(a){return a.keyCode==this.gA&&this.qk(a)?!0:co.c.Gf.call(this,a)};f.jG=function(){return this.gA};
Bn("goog-menuitem",function(){return new co(null)});co.prototype.Di=function(){return Ln(this,16)?"menuitemcheckbox":Ln(this,8)?"menuitemradio":co.c.Di.call(this)};function eo(a){this.Ix=a}fa(eo);f=eo.prototype;f.og=function(){return this.Ix};function fo(a,b){a&&(a.tabIndex=b?0:-1)}f.p=function(a){return a.G().p("div",this.Xj(a).join(" "))};f.Ta=function(a){return a};f.qe=function(a){return"DIV"==a.tagName};f.ob=function(a,b){b.id&&wj(a,b.id);var c=this.O(),d=!1,e=Jj(b);e&&D(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.Zb(!1):b==c+"-horizontal"?a.Fh(go):b==c+"-vertical"&&a.Fh(ho))},this);d||Lj(b,c);io(this,a,this.Ta(b));return b};
function io(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.nt(d);h&&(h.l=d,b.isEnabled()||h.Zb(!1),b.Jm(h),h.ob(d))}else d.nodeValue&&""!=Ja(d.nodeValue)||c.removeChild(d);d=e}}f.nt=function(a){a:{var b;a=Jj(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Cn?Cn[b]():null){a=b;break a}a=null}return a};f.Kl=function(a){a=a.a();Si(a,!0,fc);E&&(a.hideFocus=!0);var b=this.og();b&&Rj(a,b)};f.Ub=function(a){return a.a()};f.O=function(){return"goog-container"};
f.Xj=function(a){var b=this.O(),c=[b,a.Ib()==go?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function jo(){}w(jo,En);fa(jo);jo.prototype.p=function(a){return a.G().p("div",this.O())};jo.prototype.ob=function(a,b){b.id&&wj(a,b.id);if("HR"==b.tagName){var c=b;b=this.p(a);Vh(b,c);S(c)}else Lj(b,this.O());return b};jo.prototype.Si=function(){};jo.prototype.O=function(){return"goog-menuseparator"};function ko(a,b){Tn.call(this,null,a||jo.Od(),b);this.Nc(1,!1);this.Nc(2,!1);this.Nc(4,!1);this.Nc(32,!1);this.I=1}w(ko,Tn);ko.prototype.Sa=function(){ko.c.Sa.call(this);Rj(this.a(),"separator")};Bn("goog-menuseparator",function(){return new ko});function lo(a){this.Ix=a||"menu"}w(lo,eo);fa(lo);f=lo.prototype;f.qe=function(a){return"UL"==a.tagName||lo.c.qe.call(this,a)};f.nt=function(a){return"HR"==a.tagName?new ko:lo.c.nt.call(this,a)};f.Hj=function(a,b){return ai(a.a(),b)};f.O=function(){return"goog-menu"};f.Kl=function(a){lo.c.Kl.call(this,a);Sj(a.a(),"haspopup","true")};function mo(a,b,c,d,e,h,k,l,n){var m,q;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==vi(m)||(q=Di(m),p||(p=(p=Ei(m))&&fc?-m.scrollLeft:!p||E&&nc("8")||"visible"==ui(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,q=sh(q,new N(p,m.scrollTop))))}m=q||new N;q=Ni(a);(p=Ci(a))&&q.Lz(new wh(p.left,p.top,p.right-p.left,p.bottom-p.top));var p=Ch(a),s=Ch(c);if(p.ha!=s.ha){var u=p.ha.body,s=pi(s),z=new N(0,0),y=Ph(Fh(u)),I=u;do{var R=y==s?Di(I):Hi(I);z.x+=
R.x;z.y+=R.y}while(y&&y!=s&&(I=y.frameElement)&&(y=y.parent));u=sh(z,Di(u));E&&!oi(p)&&(u=sh(u,qi(p)));q.left+=u.x;q.top+=u.y}a=no(a,b);b=new N(a&2?q.left+q.width:q.left,a&1?q.top+q.height:q.top);b=sh(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var O;if(k)if(n)O=n;else if(O=Ci(c))O.top-=m.y,O.right-=m.x,O.bottom-=m.y,O.left-=m.x;return oo(b,c,d,h,O,k,l)}
function oo(a,b,c,d,e,h,k){a=a.clone();var l=0,n=no(b,c);c=U(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;wi(b,a);vh(c,k)||(e=oi(Ch(Fh(b))),!E||e&&nc("8")?
(b=b.style,fc?b.MozBoxSizing="border-box":gc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=Vi(b,"padding"),b=Yi(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function no(a,b){return(b&4&&Ei(a)?b^2:b)&-5};var po,qo;qo=po=!1;var ro=Sb;ro&&(-1!=ro.indexOf("Firefox")||-1!=ro.indexOf("Camino")||(-1!=ro.indexOf("iPhone")||-1!=ro.indexOf("iPod")?po=!0:-1!=ro.indexOf("iPad")&&(qo=!0)));var so=po,to=qo;Bn("goog-menuseparator",function(){return new ko});function uo(a,b,c){sj.call(this,c);this.ja=b||eo.Od();this.xa=a||ho}w(uo,sj);var go="horizontal",ho="vertical";f=uo.prototype;f.Ot=null;f.cb=null;f.ja=null;f.xa=null;f.jc=!0;f.sc=!0;f.lt=!0;f.ve=-1;f.hc=null;f.wh=!1;f.nE=!1;f.KJ=!0;f.gh=null;f.Ub=function(){return this.Ot||this.ja.Ub(this)};f.Zp=function(){return this.cb||(this.cb=new Nn(this.Ub()))};f.Ga=function(){return this.ja};f.p=function(){this.l=this.ja.p(this)};f.Ta=function(){return this.ja.Ta(this.a())};f.qe=function(a){return this.ja.qe(a)};
f.Kd=function(a){this.l=this.ja.ob(this,a);"none"==a.style.display&&(this.jc=!1)};f.Sa=function(){uo.c.Sa.call(this);yj(this,function(a){a.$&&vo(this,a)},this);var a=this.a();this.ja.Kl(this);this.U(this.jc,!0);this.Ua().r(this,"enter",this.Ct).r(this,"highlight",this.Dt).r(this,"unhighlight",this.Et).r(this,"open",this.pH).r(this,"close",this.gH).r(a,"mousedown",this.sg).r(Fh(a),"mouseup",this.iH).r(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.fH);this.sh()&&wo(this,!0)};
function wo(a,b){var c=a.Ua(),d=a.Ub();b?c.r(d,"focus",a.bk).r(d,"blur",a.ak).r(a.Zp(),"key",a.rg):c.eb(d,"focus",a.bk).eb(d,"blur",a.ak).eb(a.Zp(),"key",a.rg)}f.fc=function(){this.Fg(-1);this.hc&&this.hc.Kb(!1);this.wh=!1;uo.c.fc.call(this)};f.e=function(){uo.c.e.call(this);this.cb&&(this.cb.g(),this.cb=null);this.ja=this.hc=this.gh=this.Ot=null};f.Ct=function(){return!0};
f.Dt=function(a){var b=Bj(this,a.target);if(-1<b&&b!=this.ve){var c=xo(this);c&&c.Tf(!1);this.ve=b;c=xo(this);this.wh&&c.setActive(!0);this.KJ&&this.hc&&c!=this.hc&&(Ln(c,64)?c.Kb(!0):this.hc.Kb(!1))}b=this.a();null!=a.target.a()&&Sj(b,"activedescendant",a.target.a().id)};f.Et=function(a){a.target==xo(this)&&(this.ve=-1);this.a().removeAttribute("aria-activedescendant")};f.pH=function(a){(a=a.target)&&a!=this.hc&&a.getParent()==this&&(this.hc&&this.hc.Kb(!1),this.hc=a)};
f.gH=function(a){a.target==this.hc&&(this.hc=null)};f.sg=function(a){this.sc&&(this.wh=!0);var b=this.Ub();b&&gi(b)&&hi(b)?b.focus():a.preventDefault()};f.iH=function(){this.wh=!1};f.fH=function(a){var b;a:{b=a.target;if(this.gh)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.gh){b=this.gh[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.sg(a);break;case "mouseup":b.Hf(a);break;case "mouseover":b.dk(a);break;case "mouseout":b.hq(a);break;case "contextmenu":b.nn(a)}};
f.bk=function(){};f.ak=function(){this.Fg(-1);this.wh=!1;this.hc&&this.hc.Kb(!1)};f.rg=function(a){return this.isEnabled()&&this.ra()&&(0!=zj(this)||this.Ot)&&this.Gf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.Gf=function(a){var b=xo(this);if(b&&"function"==typeof b.rg&&b.rg(a)||this.hc&&this.hc!=b&&"function"==typeof this.hc.rg&&this.hc.rg(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.sh())this.Ub().blur();else return!1;break;case 36:yo(this);break;case 35:zo(this);break;case 38:if(this.xa==ho)Ao(this);else return!1;break;case 37:if(this.xa==go)this.we()?Bo(this):Ao(this);else return!1;break;case 40:if(this.xa==ho)Bo(this);else return!1;break;case 39:if(this.xa==
go)this.we()?Ao(this):Bo(this);else return!1;break;default:return!1}return!0};function vo(a,b){var c=b.a(),c=c.id||(c.id=vj(b));a.gh||(a.gh={});a.gh[c]=b}f.Jm=function(a,b){uo.c.Jm.call(this,a,b)};f.ws=function(a,b,c){a.xo|=2;a.xo|=64;!this.sh()&&this.nE||a.Nc(32,!1);a.ho(!1);uo.c.ws.call(this,a,b,c);a.$&&this.$&&vo(this,a);b<=this.ve&&this.ve++};
f.removeChild=function(a,b){if(a=r(a)?xj(this,a):a){var c=Bj(this,a);-1!=c&&(c==this.ve?(a.Tf(!1),this.ve=-1):c<this.ve&&this.ve--);var d=a.a();d&&d.id&&this.gh&&(c=this.gh,d=d.id,d in c&&delete c[d])}a=uo.c.removeChild.call(this,a,b);a.ho(!0);return a};f.Ib=function(){return this.xa};f.Fh=function(a){if(this.a())throw Error("Component already rendered");this.xa=a};f.ra=function(){return this.jc};
f.U=function(a,b){if(b||this.jc!=a&&this.dispatchEvent(a?"show":"hide")){this.jc=a;var c=this.a();c&&(Pi(c,a),this.sh()&&fo(this.Ub(),this.sc&&this.jc),b||this.dispatchEvent(this.jc?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.sc};
f.Zb=function(a){this.sc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.sc=!0,yj(this,function(a){a.hC?delete a.hC:a.Zb(!0)})):(yj(this,function(a){a.isEnabled()?a.Zb(!1):a.hC=!0}),this.wh=this.sc=!1),this.sh()&&fo(this.Ub(),a&&this.jc))};f.sh=function(){return this.lt};f.Ui=function(a){a!=this.lt&&this.$&&wo(this,a);this.lt=a;this.sc&&this.jc&&fo(this.Ub(),a)};f.Fg=function(a){(a=Aj(this,a))?a.Tf(!0):-1<this.ve&&xo(this).Tf(!1)};f.Tf=function(a){this.Fg(Bj(this,a))};
function xo(a){return Aj(a,a.ve)}function yo(a){Co(a,function(a,c){return(a+1)%c},zj(a)-1)}function zo(a){Co(a,function(a,c){a--;return 0>a?c-1:a},0)}function Bo(a){Co(a,function(a,c){return(a+1)%c},a.ve)}function Ao(a){Co(a,function(a,c){a--;return 0>a?c-1:a},a.ve)}function Co(a,b,c){c=0>c?Bj(a,a.hc):c;var d=zj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=Aj(a,c);if(h&&a.Rx(h)){a.Fg(c);break}e++;c=b.call(a,c,d)}}f.Rx=function(a){return a.ra()&&a.isEnabled()&&Ln(a,2)};function Do(){}w(Do,En);fa(Do);Do.prototype.O=function(){return"goog-menuheader"};function Eo(a,b,c){Tn.call(this,a,c||Do.Od(),b);this.Nc(1,!1);this.Nc(2,!1);this.Nc(4,!1);this.Nc(32,!1);this.I=1}w(Eo,Tn);Bn("goog-menuheader",function(){return new Eo(null)});function Fo(a,b){uo.call(this,ho,b||lo.Od(),a);this.Ui(!1)}w(Fo,uo);f=Fo.prototype;f.As=!0;f.oE=!1;f.O=function(){return this.Ga().O()};f.Hj=function(a){if(this.Ga().Hj(this,a))return!0;for(var b=0,c=zj(this);b<c;b++){var d=Aj(this,b);if("function"==typeof d.Hj&&d.Hj(a))return!0}return!1};f.Bj=function(a){this.Jm(a,!0)};f.gv=function(a,b){var c=this.ra();c||Pi(this.a(),!0);var d=this.a(),e=a,h=b,k=Di(d);e instanceof N&&(h=e.y,e=e.x);wi(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Pi(this.a(),!1)};
f.U=function(a,b,c){(b=Fo.c.U.call(this,a,b))&&a&&this.$&&this.As&&this.Ub().focus();this.AA=a&&c&&t(c.clientX)?new N(c.clientX,c.clientY):null;return b};f.Ct=function(a){this.As&&this.Ub().focus();return Fo.c.Ct.call(this,a)};f.Rx=function(a){return(this.oE||a.isEnabled())&&a.ra()&&Ln(a,2)};f.Kd=function(a){var b=this.Ga(),c;c=this.G();c=Ih(c.ha,"div",b.O()+"-content",a);for(var d=c.length,e=0;e<d;e++)io(b,this,c[e]);Fo.c.Kd.call(this,a)};
f.Gf=function(a){var b=Fo.c.Gf.call(this,a);b||yj(this,function(c){!b&&c.jG&&c.gA==a.keyCode&&(this.isEnabled()&&this.Tf(c),b=c.rg(a))},this);return b};f.Fg=function(a){Fo.c.Fg.call(this,a);var b=Aj(this,a);if(b){a=this.a();var b=b.a(),c=Di(b),d=Di(a),e=Yi(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new N(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Go(){}Go.prototype.Wd=function(){};function Ho(a,b,c){this.element=a;this.Sm=b;this.NJ=c}w(Ho,Go);Ho.prototype.Wd=function(a,b,c){mo(this.element,this.Sm,a,b,void 0,c,this.NJ)};function Io(a,b,c,d){Ho.call(this,a,b);this.zq=c?5:0;this.Nu=d||void 0}w(Io,Ho);Io.prototype.XF=function(){return this.zq};Io.prototype.Wd=function(a,b,c,d){var e=mo(this.element,this.Sm,a,b,null,c,10,d,this.Nu);if(e&496){var h=Jo(e,this.Sm);b=Jo(e,b);e=mo(this.element,h,a,b,null,c,10,d,this.Nu);e&496&&(h=Jo(e,h),b=Jo(e,b),mo(this.element,h,a,b,null,c,this.zq,d,this.Nu))}};function Jo(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Ko(a,b,c,d){Io.call(this,a,b,c||d);if(c||d)this.zq=65|(d?32:132)}w(Ko,Io);function Lo(){}w(Lo,En);fa(Lo);f=Lo.prototype;f.og=function(){return"button"};f.Lg=function(a,b,c){switch(b){case 8:case 16:Sj(a,"pressed",c);break;default:case 64:case 1:Lo.c.Lg.call(this,a,b,c)}};f.p=function(a){var b=Lo.c.p.call(this,a);this.ur(b,a.mn());var c=a.H();c&&this.D(b,c);Ln(a,16)&&this.Lg(b,16,a.Li());return b};f.ob=function(a,b){b=Lo.c.ob.call(this,a,b);var c=this.H(b);a.Xf=c;a.Ev=this.mn(b);Ln(a,16)&&this.Lg(b,16,a.Li());return b};f.H=ea;f.D=ea;f.mn=function(a){return a.title};
f.ur=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.nr=function(a,b){var c=a.we(),d=this.O()+"-collapse-left",e=this.O()+"-collapse-right";a.Tj(c?e:d,!!(b&1));a.Tj(c?d:e,!!(b&2))};f.O=function(){return"goog-button"};function Mo(){}w(Mo,Lo);fa(Mo);f=Mo.prototype;f.og=function(){};f.p=function(a){a.ho(!1);a.Lm&=-256;a.Nc(32,!1);return a.G().p("button",{"class":this.Xj(a).join(" "),disabled:!a.isEnabled(),title:a.mn()||"",value:a.H()||""},a.Xp()||"")};f.qe=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.ob=function(a,b){a.ho(!1);a.Lm&=-256;a.Nc(32,!1);if(b.disabled){var c=this.fn(1);Lj(b,c)}return Mo.c.ob.call(this,a,b)};
f.Kl=function(a){a.Ua().r(a.a(),"click",a.qk)};f.co=ea;f.Wl=ea;f.sh=function(a){return a.isEnabled()};f.Ui=ea;f.$b=function(a,b,c){Mo.c.$b.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.H=function(a){return a.value};f.D=function(a,b){a&&(a.value=b)};f.Lg=ea;function No(a,b,c){Tn.call(this,a,b||Mo.Od(),c)}w(No,Tn);f=No.prototype;f.H=function(){return this.Xf};f.D=function(a){this.Xf=a;this.Ga().D(this.a(),a)};f.mn=function(){return this.Ev};f.ur=function(a){this.Ev=a;this.Ga().ur(this.a(),a)};f.nr=function(a){this.Ga().nr(this,a)};f.e=function(){No.c.e.call(this);delete this.Xf;delete this.Ev};f.Sa=function(){No.c.Sa.call(this);if(Ln(this,32)){var a=this.Ub();a&&this.Ua().r(a,"keyup",this.Gf)}};
f.Gf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.qk(a):32==a.keyCode};Bn("goog-button",function(){return new No(null)});function Oo(){}w(Oo,Lo);fa(Oo);f=Oo.prototype;f.p=function(a){var b={"class":"goog-inline-block "+this.Xj(a).join(" ")},b=a.G().p("div",b,this.Ip(a.getContent(),a.G()));this.ur(b,a.mn());Hn(this,a,b);return b};f.og=function(){return"button"};f.Ta=function(a){return a&&a.firstChild.firstChild};f.Ip=function(a,b){return b.p("div","goog-inline-block "+(this.O()+"-outer-box"),b.p("div","goog-inline-block "+(this.O()+"-inner-box"),a))};f.qe=function(a){return"DIV"==a.tagName};
f.ob=function(a,b){Po(b,!0);Po(b,!1);var c;a:{c=a.G().Sy(b);var d=this.O()+"-outer-box";if(c&&Kj(c,d)&&(c=a.G().Sy(c),d=this.O()+"-inner-box",c&&Kj(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Ip(b.childNodes,a.G()));Mj(b,["goog-inline-block",this.O()]);return Oo.c.ob.call(this,a,b)};f.O=function(){return"goog-custom-button"};
function Po(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ja(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Qo(){}w(Qo,Oo);fa(Qo);f=Qo.prototype;f.Ta=function(a){return Qo.c.Ta.call(this,a&&a.firstChild)};f.ob=function(a,b){var c=Hh("*","goog-menu",b)[0];if(c){Pi(c,!1);Fh(c).body.appendChild(c);var d=new Fo;d.ob(c);Ro(a,d)}return Qo.c.ob.call(this,a,b)};f.Ip=function(a,b){return Qo.c.Ip.call(this,[this.createCaption(a,b),b.p("div","goog-inline-block "+(this.O()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.p("div","goog-inline-block "+(this.O()+"-caption"),a)};f.O=function(){return"goog-menu-button"};function So(a,b,c,d,e){No.call(this,a,c||Qo.Od(),d);this.Nc(64,!0);this.Eq=new Ko(null,5);b&&Ro(this,b);this.eI=null;this.Lb=new Sf(500);!so&&!to||nc("533.17.9")||(this.sq=!0);this.fI=e||lo.Od()}w(So,No);f=So.prototype;f.sq=!1;f.$J=!1;f.Sa=function(){So.c.Sa.call(this);To(this,!0);this.M&&Uo(this,this.M,!0);Sj(this.l,"haspopup",!!this.M)};f.fc=function(){So.c.fc.call(this);To(this,!1);if(this.M){this.Kb(!1);this.M.fc();Uo(this,this.M,!1);var a=this.M.a();a&&S(a)}};
f.e=function(){So.c.e.call(this);this.M&&(this.M.g(),delete this.M);delete this.SJ;this.Lb.g()};f.sg=function(a){So.c.sg.call(this,a);this.tg()&&(this.Kb(!(this.I&64),a),this.M&&(this.M.wh=!!(this.I&64)))};f.Hf=function(a){So.c.Hf.call(this,a);this.M&&!this.tg()&&(this.M.wh=!1)};f.qk=function(){this.setActive(!1);return!0};f.hH=function(a){this.M&&this.M.ra()&&!this.Hj(a.target)&&this.Kb(!1)};f.Hj=function(a){return a&&ai(this.a(),a)||this.M&&this.M.Hj(a)||!1};
f.Gf=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.M&&this.M.ra()){var b=this.M.rg(a);return 27==a.keyCode?(this.Kb(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.Kb(!0,a),!0):!1};f.mH=function(){this.Kb(!1)};f.nH=function(){this.tg()||this.Kb(!1)};f.ak=function(a){this.sq||this.Kb(!1);So.c.ak.call(this,a)};f.ut=function(){this.M||Ro(this,new Fo(this.G(),this.fI));return this.M||null};
function Ro(a,b){var c=a.M;b!=c&&(c&&(a.Kb(!1),a.$&&Uo(a,c,!1),delete a.M),a.$&&Sj(a.l,"haspopup",!!b),b&&(a.M=b,b.io(a),b.U(!1),c=a.sq,(b.As=c)&&b.Ui(!0),a.$&&Uo(a,b,!0)))}f.Bj=function(a){this.ut().Jm(a,!0)};f.U=function(a,b){var c=So.c.U.call(this,a,b);c&&!this.ra()&&this.Kb(!1);return c};f.Zb=function(a){So.c.Zb.call(this,a);this.isEnabled()||this.Kb(!1)};f.jv=function(){this.Kb(!0)};f.qn=function(){this.Kb(!1)};
f.Kb=function(a,b){So.c.Kb.call(this,a);if(this.M&&!!(this.I&64)==a){if(a){if(!this.M.$)if(this.$J){var c=Zh(this.a());c?this.M.Cg(c.parentNode,c):this.M.k(this.a().parentNode)}else this.M.k();this.eC=Ci(this.a());this.Px=Ni(this.a());Vo(this);this.M.Fg(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.M.wh=!1;if(c=this.a())Sj(c,"activedescendant",""),Sj(c,"owns","");null!=this.Uq&&(this.Uq=void 0,(c=this.M.a())&&Ji(c,"",""))}this.M.U(a,!1,b);if(!this.Pj){var c=this.Ua(),d=a?c.r:
c.eb;d.call(c,ni(this.G()),"mousedown",this.hH,!0);this.sq&&d.call(c,this.M,"blur",this.nH);d.call(c,this.Lb,Tf,this.qJ);a?this.Lb.start():this.Lb.stop()}}};function Vo(a){if(a.M.$){var b=a.Eq;a.Eq.element=a.SJ||a.a();var c=a.M.a();a.M.ra()||(c.style.visibility="hidden",Pi(c,!0));!a.Uq&&a.Eq.XF&&a.Eq.zq&32&&(a.Uq=U(c));b.Wd(c,b.Sm^1,a.eI,a.Uq);a.M.ra()||(Pi(c,!1),c.style.visibility="visible")}}
f.qJ=function(){var a=Ni(this.a()),b=Ci(this.a()),c=this.Px;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.eC,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Px=a,this.eC=b,Vo(this))};function Uo(a,b,c){var d=a.Ua();c=c?d.r:d.eb;c.call(d,b,"action",a.mH);c.call(d,b,"highlight",a.Dt);c.call(d,b,"unhighlight",a.Et)}function To(a,b){var c=a.Ua();(b?c.r:c.eb).call(c,a.a(),"keydown",a.kH)}
f.Dt=function(a){var b=this.a();if(a=a.target.a()){var c=Tj(a,"activedescendant");a=Fh(a).getElementById(c)||a;a.id||(c=rj.Od(),a.id=":"+(c.pA++).toString(36));c="";a&&(c=a.id);Sj(b,"activedescendant",c);Sj(b,"owns",a.id)}};f.kH=function(a){Ln(this,32)&&this.Ub()&&this.M&&this.M.ra()&&a.stopPropagation()};f.Et=function(){if(!xo(this.M)){var a=this.a();Sj(a,"activedescendant","");Sj(a,"owns","")}};Bn("goog-menu-button",function(){return new So(null)});function Wo(){V.call(this);this.Rd=Q("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":Wo.CSS.WC});Th(this.a(),this.Rd);this.ek=Q("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":Wo.CSS.Za});Th(this.a(),this.ek);this.M=new Fo;this.Bc=new hl;this.rd=[];Xo(this);this.qn(void 0,0);this.M.k(this.Rd);M(this.M.a(),Wo.CSS.VC)}w(Wo,V);v("nrg.ui.SlideInMenu",Wo);Wo.ID_PREFIX="nrg.ui.SlideInMenu";
Wo.CSS_SUFFIX={Za:"icon",GL:"icon-hovered",VC:"menu",WC:"menuholder",XC:"menuitem",ow:"menuitem-highlight",YC:"menuitem-icon"};var Yo={Mr:null,Pg:null,Za:null};function Zo(a,b,c,d){d=ca(d)?d:200;return[new cl(a,d),new Xk(a,b,c,d,vl)]}function $o(a,b,c,d){d=ca(d)?d:200;return[new bl(a,d),new Xk(a,b,c,d,vl)]}f=Wo.prototype;f.Wb=null;f.CA=null;f.Xm=null;f.Ql=!1;f.rn=[-100,-100];f.uo=[0,0];f.au=!0;f.bu=!1;f.cB=function(a,b){return this.rn=[a,b]};f.sB=function(a,b){return this.uo=[a,b]};f.RF=function(){return this.rn};
f.CG=function(){return this.uo};f.ut=function(){return this.M};f.eG=function(){return this.Rd};f.fG=function(){return this.ek};f.iB=function(a){this.ek.src=a};f.oK=function(a,b){this.Wb[a].Za.src=b};f.Wy=function(a){return pb(this.Wb).indexOf(a)};f.yt=function(a){return pb(this.Wb)[a]};f.rt=function(a){return this.Wb[pb(this.Wb)[a]]};f.bA=function(a){return this.au=a};f.cI=function(a){return this.bu=a};f.AG=function(){return this.Xm};
function ap(a){null!=a.Bc&&(a.Bc.stop(),D(a.rd,function(a){this.Bc.remove(a);a.g()}.bind(a)),Ib(a.rd))}function bp(a,b,c){ap(a);D(g(b)?b:[b],function(a){this.Bc.add(a);this.rd.push(a)}.bind(a));a.Rd.style.visibility="visible";Rc(a.Bc,"end",function(){c&&c()}.bind(a));a.Bc.play()}f.ul=null;f.Np=null;f.YA=function(a){this.Np=a;this.a().title=a};function cp(a){null!=a.ul&&(ba.clearTimeout(a.ul),a.ul=null);a.ul=Uf(function(){this.ul=null;this.Ql&&(!this.hu&&this.Ql?this.qn():cp(this))}.bind(a),450)}
f.Fg=function(a){M(this.Wb[this.yt(a)].Pg,Wo.CSS.ow);this.au&&(this.ek.src=this.Wb[this.yt(a)].Za.src);this.bu?this.a().title=this.rt(a).Mr.getContent():null!=this.Np&&(this.a().title=this.Np)};f.ny=function(){C(this.Wb,function(a){ph(a.Pg,Wo.CSS.ow)}.bind(this))};
f.ix=function(a,b){null==this.Wb&&(this.Wb={});a=r(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;D(a,function(a,k){if(this.Wb[a])throw Error(a+" is already in use!");c=new co(a);this.M.Bj(c);d=c.Ta();M(d,Wo.CSS.XC);d.title=a;e=Q("img",{id:Wo.ID_PREFIX+"_MenuItemIcon_"+B(),"class":Wo.CSS.YC});e.src=k<=b.length-1?b[k]:null;Th(d,e);this.Wb[a]=vb(Yo);this.Wb[a].Mr=c;this.Wb[a].Pg=d;this.Wb[a].Za=e}.bind(this))};
f.lo=function(a,b){var c=a;if(r(c)){if(!this.Wb[c])throw Error(c+" does not exist!");c=this.Wy(c)}this.CA=this.Xm?this.Xm:a;this.Xm=a;ca(b)&&!b||this.ny();this.Fg(c);this.dispatchEvent({type:"item_selected",index:c,title:this.rt(c).Mr.getContent()})};f.jv=function(a,b){bp(this,Zo(this.Rd,this.rn,this.uo,b),function(){this.Ql=!0;null!=a&&a()}.bind(this))};f.qn=function(a,b){bp(this,$o(this.Rd,this.uo,this.rn,b),function(){this.Ql=!1;this.Rd.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function Xo(a){G(a.a(),"click",function(){this.Ql?this.qn():this.jv()}.bind(a));G(a.M,"action",function(a){this.lo(a.target.getContent())}.bind(a));G(a.Rd,"mouseover",function(){this.hu=!0}.bind(a));G(a.Rd,"mouseout",function(){this.hu=!1;cp(this)}.bind(a))}
f.e=function(){Wo.c.e.call(this);delete this.hu;delete this.ul;ap(this);Ib(this.rd);delete this.rd;C(this.Wb,function(a,b){H(a);S(a);delete this.Wb[b]}.bind(this));tb(this.Wb);delete this.Wb;S(this.Rd);delete this.Rd;S(this.ek);delete this.ek;H(this.M);this.M.g();this.Op(this.Bc);delete this.Bc;delete this.Np;delete this.CA;delete this.Xm;delete this.Ql;delete this.rn;delete this.uo;delete this.au;delete this.bu};v("nrg.ui.SlideInMenu.ID_PREFIX",Wo.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{LL:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",Wo.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",Yo);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",Wo.prototype.cB);v("nrg.ui.SlideInMenu.prototype.setShowPosition",Wo.prototype.sB);v("nrg.ui.SlideInMenu.prototype.getHidePosition",Wo.prototype.RF);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",Wo.prototype.CG);v("nrg.ui.SlideInMenu.prototype.getMenu",Wo.prototype.ut);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",Wo.prototype.eG);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",Wo.prototype.fG);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",Wo.prototype.iB);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",Wo.prototype.oK);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",Wo.prototype.Wy);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",Wo.prototype.yt);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",Wo.prototype.rt);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",Wo.prototype.bA);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",Wo.prototype.cI);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",Wo.prototype.AG);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",Wo.prototype.Fg);v("nrg.ui.SlideInMenu.prototype.deselectAll",Wo.prototype.ny);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",Wo.prototype.ix);v("nrg.ui.SlideInMenu.prototype.setSelected",Wo.prototype.lo);v("nrg.ui.SlideInMenu.prototype.showMenu",Wo.prototype.jv);v("nrg.ui.SlideInMenu.prototype.hideMenu",Wo.prototype.qn);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",Wo.prototype.YA);v("nrg.ui.SlideInMenu.prototype.disposeInternal",Wo.prototype.e);Zm.Jv={};Zm.Jv.TH={};Zm.Jv.TH.$N={};function dp(){V.call(this)}w(dp,V);v("xiv.ui.layouts.interactors.InputController",dp);dp.ID_PREFIX="xiv.ui.layouts.interactors.InputController";dp.CSS_SUFFIX={MC:"inputbox",JL:"inputbox-hovered",Zv:"display"};f=dp.prototype;f.Se=null;f.Aa=null;f.DH=!1;f.H=function(){if(null!=this.Aa)return this.Aa.value};f.D=function(a){null!=this.Aa&&(this.Aa.value=a,this.Ng())};f.cd=function(a){null!=this.Aa&&(this.Aa.max=a,this.Ng())};
f.Yd=function(a){null!=this.Aa&&(this.Aa.min=a,this.Ng())};f.Ng=function(){};f.uA=function(a){this.Aa.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.Aa.value});this.Ng()};
f.k=function(a){dp.c.k.call(this,a);this.Se=Q("div");this.a().appendChild(this.Se);M(this.Se,dp.CSS.Zv);this.Aa=Q("input");this.Aa.type="number";this.Aa.step=1;this.Aa.min=0;this.Aa.value=0;this.a().appendChild(this.Aa);M(this.Aa,dp.CSS.MC);G(this.Aa,"mouseenter",function(a){a.stopPropagation();this.Aa.style.opacity=1;this.Se.style.opacity=0}.bind(this));G(this.Aa,"mouseleave",function(a){a.stopPropagation();this.Aa.style.opacity=0;this.Se.style.opacity=1}.bind(this));G(this.Aa,"input",this.uA.bind(this));
this.Ng()};f.e=function(){dp.c.e.call(this);delete this.DH;this.Aa&&(H(this.Aa),S(this.Aa),delete this.Aa);this.Se&&(H(this.Se),S(this.Se),delete this.Se)};v("xiv.ui.layouts.interactors.InputController.EventType",{IL:"input",Zv:"display"});v("xiv.ui.layouts.interactors.InputController.ID_PREFIX",dp.ID_PREFIX);v("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",dp.CSS_SUFFIX);v("xiv.ui.layouts.interactors.InputController.prototype.displayElt",dp.prototype.Se);
v("xiv.ui.layouts.interactors.InputController.prototype.inputBox",dp.prototype.Aa);v("xiv.ui.layouts.interactors.InputController.prototype.getValue",dp.prototype.H);v("xiv.ui.layouts.interactors.InputController.prototype.setValue",dp.prototype.D);v("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",dp.prototype.cd);v("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",dp.prototype.Yd);v("xiv.ui.layouts.interactors.InputController.prototype.updateValue",dp.prototype.Ng);
v("xiv.ui.layouts.interactors.InputController.prototype.onInput",dp.prototype.uA);v("xiv.ui.layouts.interactors.InputController.prototype.render",dp.prototype.k);v("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",dp.prototype.e);function ep(){V.call(this)}w(ep,dp);v("xiv.ui.layouts.interactors.FrameDisplay",ep);ep.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";ep.prototype.Ng=function(){this.Se.innerHTML=this.Aa.value+" / "+this.Aa.max};v("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",ep.ID_PREFIX);v("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",ep.prototype.Ng);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function fp(a,b,c){this.Ie=this.He=this.Ge=0;3==arguments.length?(this.Ge=Number(a),this.He=Number(b),this.Ie=Number(c)):a instanceof fp?(this.Ge=Number(a.x()),this.He=Number(a.y()),this.Ie=Number(a.z())):(this.Ge=Number(a[0]),this.He=Number(a[1]),this.Ie=Number(a[2]))}
fp.prototype={clone:function(){return new fp(this.Ge,this.He,this.Ie)},si:function(a){return this.Ge*a.x()+this.He*a.y()+this.Ie*a.z()},Bq:function(a,b){return gp(this,hp(ip(a,this),b))},length:function(){return Math.sqrt(this.si(this))},Nj:function(a){return new fp(this.He*a.z()-this.Ie*a.y(),this.Ie*a.x()-this.Ge*a.z(),this.Ge*a.y()-this.He*a.x())},x:function(){return this.Ge},y:function(){return this.He},z:function(){return this.Ie}};
function jp(a){var b=a.length();return new fp(a.Ge/b,a.He/b,a.Ie/b)}function hp(a,b){return new fp(a.Ge*b,a.He*b,a.Ie*b)}function ip(a,b){return new fp(a.Ge-b.x(),a.He-b.y(),a.Ie-b.z())}function gp(a,b){return new fp(a.Ge+b.x(),a.He+b.y(),a.Ie+b.z())}function kp(a){return new fp(-a.Ge,-a.He,-a.Ie)};function lp(a,b){this.Su=new fp(a);this.Mc=new fp(b)}lp.prototype={clone:function(){return new lp(this.Su.clone(),this.Mc.clone())},Wj:function(){this.Mc=kp(this.Mc)},Ae:function(){return this.Su}};function mp(a,b){this.Mc=a;this.Oo=b}mp.prototype={clone:function(){return new mp(this.Mc.clone(),this.Oo)},Wj:function(){this.Mc=kp(this.Mc);this.Oo=-this.Oo}};function np(a,b){this.Lh=a;this.vr=b;var c=a[0].Ae(),d=a[1].Ae(),e=a[2].Ae(),d=jp(ip(d,c).Nj(ip(e,c)));this.ze=new mp(d,d.si(c))}np.prototype={clone:function(){var a=this.Lh.map(function(a){return a.clone()});return new np(a,this.vr)},Wj:function(){this.Lh.reverse().map(function(a){a.Wj()});this.ze.Wj()}};
function op(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.Lh.length;n++){var m=b.Mc.si(a.Lh[n].Ae())-b.Oo,m=-1E-5>m?2:1E-5<m?1:0,k=k|m;l.push(m)}switch(k){case 0:(0<b.Mc.si(a.ze.Mc)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.Lh.length;n++){var q=(n+1)%a.Lh.length,m=l[n],p=l[q],k=a.Lh[n],q=a.Lh[q];2!=m&&c.push(k);1!=m&&d.push(2!=m?k.clone():k);3==(m|p)&&(m=(b.Oo-b.Mc.si(k.Ae()))/b.Mc.si(ip(q.Ae(),k.Ae())),m=new lp(k.Su.Bq(q.Ae(),m),k.Mc.Bq(q.Mc,m)),c.push(m),
d.push(m.clone()))}3<=c.length&&e.push(new np(c,a.vr));3<=d.length&&h.push(new np(d,a.vr))}};function pp(a){this.Uc=this.Yc=this.ze=null;this.ub=[];a&&qp(this,a)}pp.prototype={clone:function(){var a=new pp;rp(a,this.ze&&this.ze.clone());sp(a,this.Yc&&this.Yc.clone());tp(a,this.Uc&&this.Uc.clone());a.sr(this.ub.map(function(a){return a.clone()}));return a},pb:function(){for(var a=0;a<this.ub.length;a++)this.ub[a].Wj();this.ze.Wj();this.Yc&&this.Yc.pb();this.Uc&&this.Uc.pb();a=this.Yc;this.Yc=this.Uc;this.Uc=a},sr:function(a){this.ub=a}};function tp(a,b){a.Uc=b}function sp(a,b){a.Yc=b}
function rp(a,b){a.ze=b}function qp(a,b){if(b.length){a.ze||(a.ze=b[0].ze.clone());for(var c=[],d=[],e=0;e<b.length;e++)op(b[e],a.ze,a.ub,a.ub,c,d);c.length&&(a.Yc||(a.Yc=new pp),qp(a.Yc,c));d.length&&(a.Uc||(a.Uc=new pp),qp(a.Uc,d))}}function up(a){var b=a.ub.slice();a.Yc&&(b=b.concat(up(a.Yc)));a.Uc&&(b=b.concat(up(a.Uc)));return b}function vp(a,b){a.ub=wp(b,a.ub);a.Yc&&vp(a.Yc,b);a.Uc&&vp(a.Uc,b)}
function wp(a,b){if(!a.ze)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)op(b[e],a.ze,c,d,c,d);a.Yc&&(c=wp(a.Yc,c));d=a.Uc?wp(a.Uc,d):[];return c.concat(d)};function xp(){this.ub=[]}function yp(a){var b=new xp;b.sr(a);return b}
xp.prototype={clone:function(){var a=new xp;a.sr(this.ub.map(function(a){return a.clone()}));return a},Kv:function(a){var b=new pp(this.clone().ub);a=new pp(a.clone().ub);vp(b,a);vp(a,b);a.pb();vp(a,b);a.pb();qp(b,up(a));return yp(up(b))},ic:function(a){var b=new pp(this.clone().ub);a=new pp(a.clone().ub);b.pb();vp(b,a);vp(a,b);a.pb();vp(a,b);a.pb();qp(b,up(a));b.pb();return yp(up(b))},Lt:function(a){var b=new pp(this.clone().ub);a=new pp(a.clone().ub);b.pb();vp(a,b);a.pb();vp(b,a);vp(a,b);qp(b,up(a));
b.pb();return yp(up(b))},inverse:function(){var a=this.clone();a.ub.map(function(a){a.Wj()});return a},sr:function(a){this.ub=a}};function zp(){}function Ap(a){for(var b=a.s.count,c=[],d=0,d=0;d<b;d+=3){var e=a.s.get(d),h=a.s.get(d+1),k=a.s.get(d+2),l=a.R.get(d),n=a.R.get(d+1),m=a.R.get(d+2),q=a.ya;a.oc&&0<a.oc.length&&(q=a.oc.get(d));var p=[];p.push(new lp(e,l));p.push(new lp(h,n));p.push(new lp(k,m));c.push(new np(p,q))}return yp(c)}
function Bp(a,b){if(!(null!=b&&b instanceof xp))throw Error("Invalid CSG object.");var c=new bd,d=[];Cb(b.ub,function(a){var b=[],k=a.vr,b=Cb(a.Lh,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.UD=Cb(c.unique(),function(a){return[a.Ae().x(),a.Ae().y(),a.Ae().z()]});a.TD=Cb(c.unique(),function(a){return[a.Mc.x(),a.Mc.y(),a.Mc.z()]});a.SD=Cb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.s=new ad(9*d.length);
a.R=new ad(9*d.length);a.oc=new ad(9*d.length);Cb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.UD,n=this.TD,m=this.SD;this.s.add(d[b][0],d[b][1],d[b][2]);this.s.add(d[c][0],d[c][1],d[c][2]);this.s.add(d[a][0],d[a][1],d[a][2]);this.R.add(n[b][0],n[b][1],n[b][2]);this.R.add(n[c][0],n[c][1],n[c][2]);this.R.add(n[a][0],n[a][1],n[a][2]);m[b]&&this.oc.add(m[b][0],m[b][1],m[b][2]);m[c]&&this.oc.add(m[c][0],m[c][1],m[c][2]);m[a]&&this.oc.add(m[a][0],m[a][1],m[a][2])}.bind(a));0==a.oc.Da&&(a.oc=null);
a.qd=Rd}zp.prototype.Kv=function(a){if(null==a||!(a instanceof xp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Ap(b));a=new Vd;za(a,new zp);Bp(a,Ap(this).Kv(b));return a};zp.prototype.ic=function(a){if(null==a||!(a instanceof xp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Ap(b));a=new Vd;za(a,new zp);Bp(a,Ap(this).ic(b));return a};
zp.prototype.Lt=function(a){if(null==a||!(a instanceof xp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Ap(b));a=new Vd;za(a,new zp);Bp(a,Ap(this).Lt(b));return a};zp.prototype.inverse=function(){var a=new Vd;za(a,new zp);Bp(a,Ap(this).inverse());return a};v("X.constructable",zp);v("X.constructable.prototype.intersect",zp.prototype.Lt);v("X.constructable.prototype.inverse",zp.prototype.inverse);v("X.constructable.prototype.subtract",zp.prototype.ic);
v("X.constructable.prototype.union",zp.prototype.Kv);function Cp(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new fp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new lp(gp(c,hp(e,d)),e))}this.ub=[];a=a||{};var c=new fp(a.fh||[0,0,0]),d=a.Ag||1,e=a.ta||16;a=a.CK||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new np(k));return yp(h)}w(Cp,xp);function Dp(){Vd.call(this);this.n="sphere";this.Ia=[0,0,0];this.uj=5;this.Ac=32;this.ZD=16;za(this,new zp)}w(Dp,Vd);Dp.prototype.__defineGetter__("center",function(){return this.Ia});Dp.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Ia=a});Dp.prototype.__defineGetter__("radius",function(){return this.uj});Dp.prototype.__defineSetter__("radius",function(a){if(!t(a))throw Error("Invalid radius.");this.uj=a});
Dp.prototype.T=function(){Bp(this,new Cp({fh:this.Ia,Ag:this.uj,ta:this.Ac,CK:this.ZD}));Dp.c.T.call(this)};v("X.sphere",Dp);v("X.sphere.prototype.modified",Dp.prototype.T);function Ke(a){Vd.call(this);this.n="slice";this.Ia=[0,0,0];this.Xk=[0,0,1];this.Hb=[0,1,0];this.op=[1,0,0];this.za=this.Ka=10;this.hl=[0,1,0,0,1,1,1,1,1,0,0,0];this.m=this.$g=null;this.Tg=!0;this.Tk=[1,1,1];null!=a&&this.Kj(a)}w(Ke,Vd);Ke.prototype.Kj=function(a){this.Ia=a.Ia.slice();this.Xk=a.Xk.slice();this.Hb=a.Hb.slice();this.Ka=a.Ka;this.za=a.za;this.$g=a.$g;this.m=a.m;this.Tg=a.Tg;this.Tk=a.Tk;this.WD=a.WD;Ke.c.Kj.call(this,a)};Ke.prototype.__defineSetter__("height",function(a){this.za=a});
Ke.prototype.__defineSetter__("width",function(a){this.Ka=a});Ke.prototype.create=function(){this.Qe()};
Ke.prototype.Qe=function(){var a=(new K(this.Xk[0],this.Xk[1],this.Xk[2])).normalize(),b=new K(this.Hb[0],this.Hb[1],this.Hb[2]),c=new K(this.op[0],this.op[1],this.op[2]),d=new K(this.Ia[0],this.Ia[1],this.Ia[2]),e=pd(c.clone().pb().scale(this.Ka/2),b.clone().pb().scale(this.za/2)),h=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=pd(c.clone().pb().scale(this.Ka/2),b.clone().scale(this.za/2)),k=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=pd(c.clone().scale(this.Ka/2),b.clone().pb().scale(this.za/2)),l=new K(e.x+d.x,e.y+d.y,
e.z+d.z),e=pd(c.clone().scale(this.Ka/2),b.clone().scale(this.za/2)),b=new K(e.x+d.x,e.y+d.y,e.z+d.z);this.s=new ad(18);this.R=new ad(18);this.s.add(h.x,h.y,h.z);this.s.add(k.x,k.y,k.z);this.s.add(l.x,l.y,l.z);this.s.add(l.x,l.y,l.z);this.s.add(b.x,b.y,b.z);this.s.add(k.x,k.y,k.z);this.R.add(a.x,a.y,a.z);this.R.add(a.x,a.y,a.z);this.R.add(a.x,a.y,a.z);this.R.add(a.x,a.y,a.z);this.R.add(a.x,a.y,a.z);this.R.add(a.x,a.y,a.z);this.Tg&&(a=new Vd,a.s=new ad(24),a.R=new ad(24),a.s.add(h.x,h.y,h.z),a.s.add(k.x,
k.y,k.z),a.s.add(k.x,k.y,k.z),a.s.add(b.x,b.y,b.z),a.s.add(b.x,b.y,b.z),a.s.add(l.x,l.y,l.z),a.s.add(l.x,l.y,l.z),a.s.add(h.x,h.y,h.z),a.R.add(0,0,0),a.R.add(0,0,0),a.R.add(0,0,0),a.R.add(0,0,0),a.R.add(0,0,0),a.R.add(0,0,0),a.R.add(0,0,0),a.R.add(0,0,0),a.ya=[this.Tk[0],this.Tk[1],this.Tk[2]],a.qd="LINES",a.bl=2,this.i.push(a))};v("X.slice",Ke);v("X.slice.prototype.create",Ke.prototype.create);function J(a){Vd.call(this);this.n="volume";this.Ia=[0,0,0];this.$a=[10,10,10];this.nc=[1,1,1];this.Bm=[10,10,10];this.Yg=[1,1,1];this.sf=[];this.$k=this.Xg=this.Zk=this.Wg=this.Yk=this.Vg=0;this.Dm=new Vd;this.Em=new Vd;this.Fm=new Vd;this.sp=this.oe=!1;this.qb=-1;this.rp=[];this.m=null;this.Tg=!0;this.yb=Infinity;this.xb=-Infinity;this.Yw=!0;this.Fb=0;this._data=null;za(this,new dd);za(this,new Sd);null!=a&&this.Kj(a)}w(J,Vd);
J.prototype.Kj=function(a){this.Ia=a.Ia.slice();this.$a=a.$a.slice();this.Yg=a.Yg.slice();this.Vg=a.Vg;this.Yk=a.Yk;this.Wg=a.Wg;this.Zk=a.Zk;this.Xg=a.Xg;this.$k=a.$k;this.Hw=a.Hw.slice();this.Dm=new Vd(a.Dm);this.Em=new Vd(a.Em);this.Fm=new Vd(a.Fm);this.Fb=a.Fb;this._data=a._data;this.oe=a.oe;this.sp=a.sp;this.qb=a.qb;this.m=a.m;this.Tg=a.Tg;J.c.Kj.call(this,a)};
J.prototype.Qe=function(a){this.i.length=0;this.Dm.i.length=0;this.Em.i.length=0;this.Fm.i.length=0;this.i.push(this.Dm);this.i.push(this.Em);this.i.push(this.Fm);this.ld=a.lj;this.Yr=a.mj;this.Sg=a.kj;this.Sk=a.ge;this.PD=a.je;this.Fb=a.max;this._data=a.data;this.A=!0};
J.prototype.T=function(a){a="undefined"!==typeof a?a:!0;if(0<this.i.length){this.oe!=this.sp&&(this.oe||-1==this.qb||(this.i[this.qb].visible=!1),this.A=!0,this.sp=this.oe);if(!this.ab)return;for(var b=0,b=0;3>b;b++){var c=this.i[b],d=0,e=0;0==b?(d=this.Vg,e=this.Yk,this.Yk=this.Vg):1==b?(d=this.Wg,e=this.Zk,this.Zk=this.Wg):2==b&&(d=this.Xg,e=this.$k,this.$k=this.Xg);if(null==this.i[b].i[parseInt(d,10)]){var h=ud();h[0]=this.d[b].B[0][0][0]+this.d[b].Fa[0]*parseInt(d,10);h[1]=this.d[b].B[0][0][1]+
this.d[b].Fa[1]*parseInt(d,10);h[2]=this.d[b].B[0][0][2]+this.d[b].Fa[2]*parseInt(d,10);if(this.Va){var k=Je(h,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.m.Qb,this.m,this.m.Va,this.m.md.Fd);this.m.i[b].i[parseInt(d,10)]=k;this.m.i[b].T(!0)}h=Je(h,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.Qb,this,!0,null);this.Va&&(h.m=h.Ja,h.m=this.m.i[b].i[parseInt(d,10)].Ja);c.i[parseInt(d,10)]=h;this.i[b].T(!0)}e=c.i[parseInt(e,10)];this.oe||(e.visible=!1);c=c.i[parseInt(d,10)];c.visible=!0;c.yc=
1;this.oe&&(c.i[0].ab=!1,b!=this.qb&&(c.visible=!1,c.yc=0))}this.oe&&-1!=this.qb&&Ep(this,this.qb)}a&&J.c.T.call(this)};J.prototype.__defineGetter__("dimensions",function(){return this.$a});J.prototype.__defineSetter__("dimensions",function(a){this.$a=a});J.prototype.__defineGetter__("spacing",function(){return this.Yg});J.prototype.__defineSetter__("spacing",function(a){this.Yg=a});J.prototype.__defineGetter__("bbox",function(){return this.nc});J.prototype.__defineGetter__("range",function(){return this.Bm});
J.prototype.__defineGetter__("dimensionsRAS",function(){return this.Hw});J.prototype.__defineGetter__("volumeRendering",function(){return this.oe});J.prototype.__defineSetter__("volumeRendering",function(a){this.oe=a;this.T(!1)});J.prototype.__defineGetter__("visible",function(){return this.ab});J.prototype.__defineSetter__("visible",function(a){if(a)this.ab=a,this.T(!1);else{for(var b=this.i,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.ab=a;this.A=!0}});J.prototype.__defineGetter__("center",function(){return this.Ia});
J.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.Ia=a});J.prototype.__defineGetter__("volumeRenderingCache",function(){return this.rp});J.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.rp=a});J.prototype.__defineGetter__("image",function(){return this.sf});
J.prototype.__defineGetter__("labelmap",function(){this.m||(this.m=new Fp(this));return this.m});J.prototype.__defineGetter__("indexX",function(){return this.Vg});J.prototype.__defineSetter__("indexX",function(a){t(a)&&0<=a&&a<this.Dm.i.length&&(this.Vg=a,this.T(!1))});J.prototype.__defineGetter__("indexY",function(){return this.Wg});J.prototype.__defineSetter__("indexY",function(a){t(a)&&0<=a&&a<this.Em.i.length&&(this.Wg=a,this.T(!1))});J.prototype.__defineGetter__("indexZ",function(){return this.Xg});
J.prototype.__defineSetter__("indexZ",function(a){t(a)&&0<=a&&a<this.Fm.i.length&&(this.Xg=a,this.T(!1))});J.prototype.__defineGetter__("windowLow",function(){return this.yb});J.prototype.__defineSetter__("windowLow",function(a){this.yb=a});J.prototype.__defineGetter__("windowHigh",function(){return this.xb});J.prototype.__defineSetter__("windowHigh",function(a){this.xb=a});J.prototype.__defineGetter__("borders",function(){return this.Tg});
J.prototype.__defineSetter__("borders",function(a){this.Tg=a});J.prototype.__defineGetter__("reslicing",function(){return this.Yw});J.prototype.__defineSetter__("reslicing",function(a){this.Yw=a});J.prototype.__defineSetter__("xNormX",function(a){this.d[0].v[0]=a});J.prototype.__defineGetter__("xNormX",function(){return this.d[0].v[0]});J.prototype.__defineSetter__("xNormY",function(a){this.d[0].v[1]=a});J.prototype.__defineGetter__("xNormY",function(){return this.d[0].v[1]});
J.prototype.__defineSetter__("xNormZ",function(a){this.d[0].v[2]=a});J.prototype.__defineGetter__("xNormZ",function(){return this.d[0].v[2]});J.prototype.__defineSetter__("xColor",function(a){this.d[0].ya=a});J.prototype.__defineGetter__("xColor",function(){return this.d[0].ya});J.prototype.__defineSetter__("yNormX",function(a){this.d[1].v[0]=a});J.prototype.__defineGetter__("yNormX",function(){return this.d[1].v[0]});J.prototype.__defineSetter__("yNormY",function(a){this.d[1].v[1]=a});
J.prototype.__defineGetter__("yNormY",function(){return this.d[1].v[1]});J.prototype.__defineSetter__("yNormZ",function(a){this.d[1].v[2]=a});J.prototype.__defineGetter__("yNormZ",function(){return this.d[1].v[2]});J.prototype.__defineSetter__("yColor",function(a){this.d[1].ya=a});J.prototype.__defineGetter__("yColor",function(){return this.d[1].ya});J.prototype.__defineSetter__("zNormX",function(a){this.d[2].v[0]=a});J.prototype.__defineGetter__("zNormX",function(){return this.d[2].v[0]});
J.prototype.__defineSetter__("zNormY",function(a){this.d[2].v[1]=a});J.prototype.__defineGetter__("zNormY",function(){return this.d[2].v[1]});J.prototype.__defineSetter__("zNormZ",function(a){this.d[2].v[2]=a});J.prototype.__defineGetter__("zNormZ",function(){return this.d[2].v[2]});J.prototype.__defineSetter__("zColor",function(a){this.d[2].ya=a});J.prototype.__defineGetter__("zColor",function(){return this.d[2].ya});
J.prototype.vK=function(a){this.i[a].visible=!1;for(var b=0;b<this.i[a].i.length;b++)"undefined"!=typeof this.i[a].i[b]&&(this.Va&&(this.m.i[a].i[b].remove(),this.m.i[a].i[b]=null),this.i[a].i[b].remove(),this.i[a].i[b]=null);wd(this.d[a].v,this.d[a].v);Le(a,this.d[a].Cm,this.d[a].v,this);this.i[a].i=[];this.i[a].i=Array(this.d[a].S);this.Va&&(b=Je(this.d[a].Cm,this.d[a].od,this.d[a].v,this.d[a].ya,this.nc,this.m.Qb,this.m,this.m.Va,this.m.md.Fd),this.m.i[a].i=[],this.m.i[a].i=Array(this.d[a].S),
this.m.i[a].i[Math.floor(this.d[a].S/2)]=b,this.m.i[a].T());b=Je(this.d[a].Cm,this.d[a].od,this.d[a].v,this.d[a].ya,this.nc,this.Qb,this,!0,null);this.Va&&(b.m=b.Ja,b.m=this.m.i[a].i[Math.floor(this.d[a].S/2)].Ja);this.i[a].i[Math.floor(this.d[a].S/2)]=b;0==a?(this.Vg=Math.floor(this.d[a].S/2),this.Yk=Math.floor(this.d[a].S/2)):1==a?(this.Wg=Math.floor(this.d[a].S/2),this.Zk=Math.floor(this.d[a].S/2)):(this.Xg=Math.floor(this.d[a].S/2),this.$k=Math.floor(this.d[a].S/2));this.i[a].T();this.i[a].i[Math.floor(this.d[a].S/
2)].ab=!0};
function Ep(a,b){if(!a.dp)if(!a.oe||!a.A&&b==a.qb)a.qb=b;else if(-1==a.rp.indexOf(b))a.rp.push(b),a.dp=!0,Gp(a,b),setTimeout(function(){var a=null;0<=this.qb&&(a=this.i[this.qb],a.visible=!1);var a=this.i[b],c=a.i.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.i[e]){var m=ud();m[0]=this.d[b].B[0][0][0]+this.d[b].Fa[0]*e;m[1]=this.d[b].B[0][0][1]+this.d[b].Fa[1]*e;m[2]=this.d[b].B[0][0][2]+this.d[b].Fa[2]*e;if(this.Va){var q=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.m.Qb,this.m,
this.m.Va,this.m.md.Fd);this.m.i[b].i[e]=q;this.m.i[b].T(!0)}m=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.Qb,this,!0,null);m.i[0].ab=!1;this.Va&&(m.m=m.Ja,m.m=this.m.i[b].i[e].Ja);a.i[e]=m}a.i[e].ab=!0}Hp(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.i[e]){var m=ud();m[0]=this.d[b].B[0][0][0]+this.d[b].Fa[0]*e;m[1]=this.d[b].B[0][0][1]+this.d[b].Fa[1]*e;m[2]=this.d[b].B[0][0][2]+this.d[b].Fa[2]*e;if(this.Va){var q=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.m.Qb,
this.m,this.m.Va,this.m.md.Fd);this.m.i[b].i[e]=q;this.m.i[b].T(!0)}m=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.Qb,this,!0,null);m.i[0].ab=!1;this.Va&&(m.m=m.Ja,m.m=this.m.i[b].i[e].Ja);a.i[e]=m}a.i[e].ab=!0}Hp(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.i[e]){var m=ud();m[0]=this.d[b].B[0][0][0]+this.d[b].Fa[0]*e;m[1]=this.d[b].B[0][0][1]+this.d[b].Fa[1]*e;m[2]=this.d[b].B[0][0][2]+this.d[b].Fa[2]*e;if(this.Va){var q=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,
this.m.Qb,this.m,this.m.Va,this.m.md.Fd);this.m.i[b].i[e]=q;this.m.i[b].T(!0)}m=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.Qb,this,!0,null);m.i[0].ab=!1;this.Va&&(m.m=m.Ja,m.m=this.m.i[b].i[e].Ja);a.i[e]=m}a.i[e].ab=!0}Hp(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.i[e]){var m=ud();m[0]=this.d[b].B[0][0][0]+this.d[b].Fa[0]*e;m[1]=this.d[b].B[0][0][1]+this.d[b].Fa[1]*e;m[2]=this.d[b].B[0][0][2]+this.d[b].Fa[2]*e;if(this.Va){var q=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,
this.nc,this.m.Qb,this.m,this.m.Va,this.m.md.Fd);this.m.i[b].i[e]=q;this.m.i[b].T(!0)}m=Je(m,this.d[b].od,this.d[b].v,this.d[b].ya,this.nc,this.Qb,this,!0,null);m.i[0].ab=!1;this.Va&&(m.m=m.Ja,m.m=this.m.i[b].i[e].Ja);a.i[e]=m}a.i[e].ab=!0}Hp(this,1);setTimeout(function(){this.dp&&this.i[b].T(!0);this.qb=b;this.A=!1;if(this.dp){var a=new De;a.Ea=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.dp=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.i[a.qb];
c.visible=!1;var c=a.i[b],d=c.i.length,e;for(e=0;e<d;e++)c.i[e].ab=!0;a.qb=b;a.A=!1}}function Gp(a,b){var c=new Be;c.Ea=a;a.dispatchEvent(c);a.onComputing(b)}function Hp(a,b){var c=new Ce;c.yj=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}J.prototype.su=function(){};J.prototype.uu=function(){};J.prototype.tu=function(){};v("X.volume",J);v("X.volume.prototype.modified",J.prototype.T);v("X.volume.prototype.sliceInfoChanged",J.prototype.vK);v("X.volume.prototype.onComputing",J.prototype.su);
v("X.volume.prototype.onComputingProgress",J.prototype.uu);v("X.volume.prototype.onComputingEnd",J.prototype.tu);function Ip(a,b){Yc.call(this);this.l=a;var c=$h(this.l)?this.l:this.l?this.l.body:null;this.NH=!!c&&Ei(c);this.Uz=G(this.l,fc?"DOMMouseScroll":"mousewheel",this,b)}w(Ip,Yc);
Ip.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.tc;if("mousewheel"==a.type){c=1;if(E||gc&&(bc||nc("532.0")))c=40;d=Jp(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=Jp(-a.wheelDeltaX,c),c=Jp(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;t(this.cA)&&(b=fd(b,-this.cA,this.cA));t(this.dA)&&(c=fd(c,-this.dA,this.dA));this.NH&&(b=-b);b=new Kp(d,a,b,c);this.dispatchEvent(b)};function Jp(a,b){return gc&&(ac||cc)&&0!=a%b?a:a/b}
Ip.prototype.e=function(){Ip.c.e.call(this);Tc(this.Uz);this.Uz=null};function Kp(a,b,c,d){Fc.call(this,b);this.type="mousewheel";this.detail=a;this.ih=c;this.td=d}w(Kp,Fc);function Lp(){Yc.call(this)}w(Lp,Yc);f=Lp.prototype;f.Xf=0;f.Lf=0;f.af=100;f.te=0;f.Hh=1;f.Sd=!1;f.mk=!1;f.D=function(a){a=Mp(this,a);this.Xf!=a&&(this.Xf=a+this.te>this.af?this.af-this.te:a<this.Lf?this.Lf:a,this.Sd||this.mk||this.dispatchEvent("change"))};f.H=function(){return Mp(this,this.Xf)};f.Ti=function(a){a=Mp(this,a);this.te!=a&&(this.te=0>a?0:this.Xf+a>this.af?this.af-this.Xf:a,this.Sd||this.mk||this.dispatchEvent("change"))};
f.Ue=function(){var a=this.te;return null==this.Hh?a:Math.round(a/this.Hh)*this.Hh};f.Yd=function(a){if(this.Lf!=a){var b=this.Sd;this.Sd=!0;this.Lf=a;a+this.te>this.af&&(this.te=this.af-this.Lf);a>this.Xf&&this.D(a);a>this.af&&(this.te=0,this.cd(a),this.D(a));(this.Sd=b)||this.mk||this.dispatchEvent("change")}};f.qa=function(){return Mp(this,this.Lf)};
f.cd=function(a){a=Mp(this,a);if(this.af!=a){var b=this.Sd;this.Sd=!0;this.af=a;a<this.Xf+this.te&&this.D(a-this.te);a<this.Lf&&(this.te=0,this.Yd(a),this.D(this.af));a<this.Lf+this.te&&(this.te=this.af-this.Lf);(this.Sd=b)||this.mk||this.dispatchEvent("change")}};f.ea=function(){return Mp(this,this.af)};f.ph=function(){return this.Hh};f.Gg=function(a){this.Hh!=a&&(this.Hh=a,a=this.Sd,this.Sd=!0,this.cd(this.ea()),this.Ti(this.Ue()),this.D(this.H()),(this.Sd=a)||this.mk||this.dispatchEvent("change"))};
function Mp(a,b){return null==a.Hh?b:a.Lf+Math.round((b-a.Lf)/a.Hh)*a.Hh};function Np(a,b){sj.call(this,a);this.Cx=null;this.Ba=new Lp;this.PH=b||ed;G(this.Ba,"change",this.wz,!1,this)}w(Np,sj);f=Np.prototype;f.xa="horizontal";f.zn=!1;f.kI=!1;f.hg=10;f.Fq=0;f.Nz=!0;f.Iq=0;f.cD=1E3;f.sc=!0;f.ue=!1;f.p=function(){Np.c.p.call(this);var a=this.G().p("div",this.O(this.xa));this.Kd(a)};f.Kd=function(a){Np.c.Kd.call(this,a);Lj(a,this.O(this.xa));this.gy();Rj(this.a(),"slider");Op(this)};
f.Sa=function(){Np.c.Sa.call(this);this.ee=new cj(this.fa);this.Ef=new cj(this.gc);this.ee.wi(this.ue);this.Ef.wi(this.ue);this.ee.at=this.Ef.at=ea;this.cb=new Nn(this.a());Pp(this,!0);this.a().tabIndex=0;this.Mg()};
function Pp(a,b){b?(a.Ua().r(a.ee,"beforedrag",a.eq).r(a.Ef,"beforedrag",a.eq).r(a.ee,["start","end"],a.jq).r(a.Ef,["start","end"],a.jq).r(a.cb,"key",a.fq).r(a.a(),"click",a.gq).r(a.a(),"mousedown",a.gq),a.Nz&&Qp(a,!0)):(a.Ua().eb(a.ee,"beforedrag",a.eq).eb(a.Ef,"beforedrag",a.eq).eb(a.ee,["start","end"],a.jq).eb(a.Ef,["start","end"],a.jq).eb(a.cb,"key",a.fq).eb(a.a(),"click",a.gq).eb(a.a(),"mousedown",a.gq),a.Nz&&Qp(a,!1))}f.fc=function(){Np.c.fc.call(this);Ac(this.ee,this.Ef,this.cb,this.lk)};
f.eq=function(a){var b=a.gt==this.ee?this.fa:this.gc,c;"vertical"==this.xa?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.ea()-this.qa())+this.qa()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.ea()-this.qa())+this.qa();c=a.gt==this.ee?Math.min(Math.max(c,this.qa()),this.H()+this.Ue()):Math.min(Math.max(c,this.H()),this.ea());Rp(this,b,c)};
f.jq=function(a){var b="start"==a.type;Pj(this.a(),"goog-slider-dragging",b);Pj(a.target.handle,"goog-slider-thumb-dragging",b);a=a.gt==this.ee;b?(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j")):(this.dispatchEvent("m"),this.dispatchEvent(a?"i":"k"))};
f.fq=function(a){var b=!0;switch(a.keyCode){case 36:Sp(this,this.qa());break;case 35:Sp(this,this.ea());break;case 33:Tp(this,this.hg);break;case 34:Tp(this,-this.hg);break;case 37:var c=this.ue&&this.we()?1:-1;Tp(this,a.shiftKey?c*this.hg:c*this.Jo);break;case 40:Tp(this,a.shiftKey?-this.hg:-this.Jo);break;case 39:c=this.ue&&this.we()?-1:1;Tp(this,a.shiftKey?c*this.hg:c*this.Jo);break;case 38:Tp(this,a.shiftKey?this.hg:this.Jo);break;default:b=!1}b&&a.preventDefault()};
f.gq=function(a){this.a().focus&&this.a().focus();var b=a.target;ai(this.fa,b)||ai(this.gc,b)||(b="click"==a.type,b&&ya()<this.Iq+this.cD||(b||(this.Iq=ya()),this.kI?Sp(this,Up(this,a)):(this.xv(a),this.gf=Vp(this,Up(this,a)),this.Hz="vertical"==this.xa?this.yq<this.gf.offsetTop:this.yq>Wp(this,this.gf)+this.gf.offsetWidth,a=Fh(this.a()),this.Ua().r(a,"mouseup",this.wv,!0).r(this.a(),"mousemove",this.xv),this.Ji||(this.Ji=new Sf(200),this.Ua().r(this.Ji,Tf,this.xz)),this.xz(),this.Ji.start())))};
f.vz=function(a){Tp(this,(0<a.detail?-1:1)*this.Jo);a.preventDefault()};f.xz=function(){var a;if("vertical"==this.xa){var b=this.yq,c=this.gf.offsetTop;this.Hz?b<c&&(a=Xp(this,this.gf)+this.hg):b>c+this.gf.offsetHeight&&(a=Xp(this,this.gf)-this.hg)}else b=this.yq,c=Wp(this,this.gf),this.Hz?b>c+this.gf.offsetWidth&&(a=Xp(this,this.gf)+this.hg):b<c&&(a=Xp(this,this.gf)-this.hg);ca(a)&&Rp(this,this.gf,a)};
f.wv=function(){this.Ji&&this.Ji.stop();var a=Fh(this.a());this.Ua().eb(a,"mouseup",this.wv,!0).eb(this.a(),"mousemove",this.xv)};function Yp(a,b){var c=Fi(b,a.a());return"vertical"==a.xa?c.y:a.ue&&a.we()?a.a().clientWidth-c.x:c.x}f.xv=function(a){this.yq=Yp(this,a)};function Up(a,b){var c=a.qa(),d=a.ea();if("vertical"==a.xa){var e=a.fa.offsetHeight,h=a.a().clientHeight-e,e=Yp(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.fa.offsetWidth;h=a.a().clientWidth-e;e=Yp(a,b)-e/2;return(d-c)*e/h+c}
function Xp(a,b){if(b==a.fa)return a.Ba.H();if(b==a.gc)return a.Ba.H()+a.Ba.Ue();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.Jf=function(){return this.ee.Jf()||this.Ef.Jf()};function Tp(a,b){Math.abs(b)<a.ph()&&(b=(0==b?0:0>b?-1:1)*a.ph());var c=Xp(a,a.fa)+b,d=Xp(a,a.gc)+b,c=fd(c,a.qa(),a.ea()-a.Fq),d=fd(d,a.qa()+a.Fq,a.ea());Zp(a,c,d-c)}function Rp(a,b,c){var d=Mp(a.Ba,c);c=b==a.fa?d:a.Ba.H();b=b==a.gc?d:a.Ba.H()+a.Ba.Ue();c>=a.qa()&&b>=c+a.Fq&&a.ea()>=b&&Zp(a,c,b-c)}
function Zp(a,b,c){a.qa()<=b&&b<=a.ea()-c&&a.Fq<=c&&c<=a.ea()-b&&(b!=a.H()||c!=a.Ue())&&(a.Ba.mk=!0,a.Ba.Ti(0),a.Ba.D(b),a.Ba.Ti(c),a.Ba.mk=!1,a.wz())}f.qa=function(){return this.Ba.qa()};f.Yd=function(a){this.Ba.Yd(a)};f.ea=function(){return this.Ba.ea()};f.cd=function(a){this.Ba.cd(a)};function Vp(a,b){return b<=a.Ba.H()+a.Ba.Ue()/2?a.fa:a.gc}f.wz=function(){this.Mg();Op(this);this.dispatchEvent("change")};
f.Mg=function(){if(this.fa&&!this.zn){var a=$p(this,Xp(this,this.fa)),b=$p(this,Xp(this,this.gc));if("vertical"==this.xa)this.fa.style.top=a.y+"px",this.gc.style.top=b.y+"px",this.Ab&&(a=aq(b.y,a.y,this.fa.offsetHeight),this.Ab.style.top=a.offset+"px",this.Ab.style.height=a.size+"px");else{var c=this.ue&&this.we()?"right":"left";this.fa.style[c]=a.x+"px";this.gc.style[c]=b.x+"px";this.Ab&&(a=aq(a.x,b.x,this.fa.offsetWidth),this.Ab.style[c]=a.offset+"px",this.Ab.style.width=a.size+"px")}}};
function aq(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function $p(a,b){var c=new N;if(a.fa){var d=a.qa(),e=a.ea(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.xa?(d=a.a().clientHeight-a.fa.offsetHeight,e=Math.round(e*d),c.x=Wp(a,a.fa),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.fa.offsetWidth)),c.x=d,c.y=a.fa.offsetTop)}return c}
function Sp(a,b){b=fd(b,a.qa(),a.ea());a.zn&&a.Mp.stop(!0);var c=new hl,d,e=Vp(a,b),h=a.H(),k=a.Ue(),l=Xp(a,e),n=$p(a,l);d=a.ph();Math.abs(b-l)<d&&(b=fd(l+(b>l?d:-d),a.qa(),a.ea()));Rp(a,e,b);l=$p(a,Xp(a,e));d="vertical"==a.xa?[Wp(a,e),l.y]:[l.x,e.offsetTop];n=new Xk(e,[n.x,n.y],d,100);n.wi(a.ue);c.add(n);a.Ab&&bq(a,e,h,k,l,c);a.Cx&&(e=a.Cx.PN(h,b,100),D(e,function(a){c.add(a)}));a.Mp=c;a.Ua().r(c,"end",a.dF);a.zn=!0;c.play(!1)}f.vd=function(){return this.zn};
function bq(a,b,c,d,e,h){var k=$p(a,c),l=$p(a,c+d);c=k;d=l;b==a.fa?c=e:d=e;"vertical"==a.xa?(b=aq(l.y,k.y,a.fa.offsetHeight),k=aq(d.y,c.y,a.fa.offsetHeight),e=new Xk(a.Ab,[Wp(a,a.Ab),b.offset],[Wp(a,a.Ab),k.offset],100),b=new $k(a.Ab,b.size,k.size,100)):(b=aq(k.x,l.x,a.fa.offsetWidth),k=aq(c.x,d.x,a.fa.offsetWidth),e=new Xk(a.Ab,[b.offset,a.Ab.offsetTop],[k.offset,a.Ab.offsetTop],100),b=new Zk(a.Ab,b.size,k.size,100));e.wi(a.ue);b.wi(a.ue);h.add(e);h.add(b)}f.dF=function(){this.zn=!1};
f.Fh=function(a){if(this.xa!=a){var b=this.O(this.xa),c=this.O(a);this.xa=a;this.a()&&(a=this.a(),Kj(a,b)&&(Nj(a,b),Lj(a,c)),b=this.ue&&this.we()?"right":"left",this.fa.style[b]=this.fa.style.top="",this.gc.style[b]=this.gc.style.top="",this.Ab&&(this.Ab.style[b]=this.Ab.style.top="",this.Ab.style.width=this.Ab.style.height=""),this.Mg())}};f.Ib=function(){return this.xa};
f.e=function(){Np.c.e.call(this);this.Ji&&this.Ji.g();delete this.Ji;this.Mp&&this.Mp.g();delete this.Mp;delete this.fa;delete this.gc;this.Ab&&delete this.Ab;this.Ba.g();delete this.Ba;this.cb&&(this.cb.g(),delete this.cb);this.lk&&(this.lk.g(),delete this.lk);this.ee&&(this.ee.g(),delete this.ee);this.Ef&&(this.Ef.g(),delete this.Ef)};f.Jo=1;f.ph=function(){return this.Ba.ph()};f.Gg=function(a){this.Ba.Gg(a)};f.H=function(){return this.Ba.H()};f.D=function(a){Rp(this,this.fa,a)};f.Ue=function(){return this.Ba.Ue()};
f.Ti=function(a){Rp(this,this.gc,this.Ba.H()+a)};f.U=function(a){Pi(this.a(),a);a&&this.Mg()};function Op(a){var b=a.a();b&&(Sj(b,"valuemin",a.qa()),Sj(b,"valuemax",a.ea()),Sj(b,"valuenow",a.H()),Sj(b,"valuetext",a.PH(a.H())||""))}function Qp(a,b){b?(a.lk||(a.lk=new Ip(a.a())),a.Ua().r(a.lk,"mousewheel",a.vz)):a.Ua().eb(a.lk,"mousewheel",a.vz)}f.Zb=function(a){this.sc!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.sc=a,Pp(this,a),a||this.wv(),Pj(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.sc};function Wp(a,b){return a.ue?bj(b):b.offsetLeft};function cq(a){Np.call(this,a);this.Ba.D(this.qa());this.Ba.Ti(this.ea()-this.qa())}w(cq,Np);cq.prototype.O=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};cq.prototype.Lj=function(a){a=this.G().p("div",a);Rj(a,"button");return a};
cq.prototype.gy=function(){var a=Hh(null,"goog-twothumbslider-value-thumb",this.a())[0],b=Hh(null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Hh(null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.Lj("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.Lj("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.G().p("div","goog-twothumbslider-rangehighlight"),this.G().Kt(c,a));this.fa=a;this.gc=b;this.Ab=c};function dq(){Vd.call(this);this.n="fibers";za(this,new dd)}w(dq,Vd);v("X.fibers",dq);function eq(){this.vk=Q("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.kc});em.call(this,"",this.vk,!0);M(this.rb,eq.CSS.oD);this.rb.style.marginTop="0px"}w(eq,em);v("nrg.ui.ZippyTree",eq);var hn="o",fq={sL:"n",dD:hn};eq.ID_PREFIX="nrg.ui.ZippyTree";eq.CSS_SUFFIX={oD:"rootnode"};f=eq.prototype;f.jk=1;f.yi=!1;f.KH=!0;f.xn=1;f.it=0;f.hr=null;f.kf=null;f.$u=function(a){this.ly=a};f.Bn=function(){return 0===Wh(this.Ij).length};f.Zx=function(){this.Go(function(a){a.Ed.Bb(!1)},this)};
f.Rm=function(){this.Zx()};f.qF=function(){var a=[];this.Go(function(b){a.push(b)},this);return a};f.At=function(){var a=[];C(this.ie,function(b){a.push(b)});return a};f.Uj=function(){this.Go(function(a){a.Ed.Bb(!0)},this)};f.Go=function(a,b){C(b.ie,function(b){a(b);this.Go(a,b)}.bind(this))};f.a=function(){return this.vk};f.Bb=function(a,b){return gq(this,a,b,!0)};
function gq(a,b,c,d){c=null!=c?c:a;if(null!=c.ie[b]){var e=c.ie[b],h=e.Ed;null!=h.Oe?Rc(h,d?"d":"e",function(){h.mh!=d&&e.Bb(d)}):e.Bb(d);return e}}f.nr=function(a,b){return gq(this,a,b,!1)};f.pt=function(a){var b=this,c=[];D(a,function(a){c.push(b.ie[a]);b=b.ie[a]}.bind(this));return c};f.Ne=function(a,b){!g(a)||$h(a)?hq(this,a,b):D(a,function(a){this.Ne(a,b)}.bind(this))};function hq(a,b,c){c?(c&&(c=r(c)?[c]:c,c.length>a.jk&&(a.jk=c.length)),a.Tm(c,a,b)):Th(a.vk,b)}
f.Tm=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.Ij;if(0==a.length)iq(this,e,c),null!=c&&jq(this,c,d-2);else{0<a.length&&a.length>this.jk&&(this.jk=a.length);if(b.ie[a[0]])e=b.ie[a[0]];else{var h=a[0];e.style.opacity=this.xn;var k=new em(h,e,!1);b.rb.parentNode==this.vk&&2==this.vk.childNodes.length&&(k.rb.style.marginTop="0px");k.rb.style.left="inherit";k.rb.style.width="inherit";kq(this,k);b.ie[h]=k;k.rb.style.opacity=this.xn;e.style.opacity=1;this.yi&&lq(this,k.rb);this.dispatchEvent({type:hn,
Vd:k});e=k}jq(this,e.rb,d-1);this.Tm(1<a.length?a.slice(1):[],e,c,d+1)}};function jq(a,b,c){null!=b&&b._maxDepth!=a.jk&&(null==b._maxDepth&&(b._maxDepth=a.jk),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}function kq(a,b){G(b,"d",function(){this.dispatchEvent({type:"d",Vd:b})}.bind(a));G(b,"f",function(){this.dispatchEvent({type:"f",Vd:b})}.bind(a));G(b,"e",function(){this.dispatchEvent({type:"e",Vd:b})}.bind(a))}
function lq(a,b){(new cl(b,a.it)).play()}f.QJ=function(){this.yi&&1!=this.kf.I&&this.kf.play()};f.RK=function(a){this.xn=(this.yi=!0===a)?0:1;this.it=this.yi?300:0;this.yi&&(mq(this),this.hr=[],this.kf=new hl,G(this.kf,"end",this.Xx.bind(this)))};function iq(a,b,c){c&&(sl(c,{position:"relative"}),c.style.opacity=a.xn,null!=a.ly?a.ly(b,c):b.appendChild(c),nq(b),a.yi?lq(a,c,function(){this.dispatchEvent({type:"n"})}.bind(a)):a.dispatchEvent({type:"n"}))}
function nq(a){var b=[],c=[],d=Wh(a),e=d.length;D(d,function(a){Kj(a,em.CSS.Ro)?b.push(a):1==a.childNodes.length&&Kj(a.childNodes[0],em.CSS.Pg)&&c.push(a)});D(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}f.Xx=function(){for(this.kf.g();this.hr.length;)this.kf.add(this.hr[0]),zb.splice.call(this.hr,0,1);G(this.kf,"end",this.Xx.bind(this));this.kf.play()};
function mq(a){null!=a.WA&&(a.dt(a.WA),delete a.WA);null!=a.kf&&(a.Op(a.kf),delete a.kf)}f.e=function(){eq.c.e.call(this);S(this.vk);delete this.vk;mq(this);delete this.jk;delete this.yi;delete this.KH;delete this.xn;delete this.it};v("nrg.ui.ZippyTree.EventType",fq);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",eq.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",eq.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");
v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Wh(a),d=b[fm].toLowerCase(),e,h,k=c.length,l=0;l<k;l++){if(h=c[l],null!=h[fm]&&(e=h[fm].toLowerCase(),e=La(d,e),0>e)){Vh(b,h);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",eq.prototype.$u);v("nrg.ui.ZippyTree.prototype.isEmpty",eq.prototype.Bn);
v("nrg.ui.ZippyTree.prototype.contractAll",eq.prototype.Zx);v("nrg.ui.ZippyTree.prototype.collapseAll",eq.prototype.Rm);v("nrg.ui.ZippyTree.prototype.getAllNodes",eq.prototype.qF);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",eq.prototype.At);v("nrg.ui.ZippyTree.prototype.expandAll",eq.prototype.Uj);v("nrg.ui.ZippyTree.prototype.traverse",eq.prototype.Go);v("nrg.ui.ZippyTree.prototype.getElement",eq.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",eq.prototype.Bb);
v("nrg.ui.ZippyTree.prototype.setCollapsed",eq.prototype.nr);v("nrg.ui.ZippyTree.prototype.getFolderNodes",eq.prototype.pt);v("nrg.ui.ZippyTree.prototype.addContents",eq.prototype.Ne);v("nrg.ui.ZippyTree.prototype.createBranch",eq.prototype.Tm);v("nrg.ui.ZippyTree.prototype.playFx",eq.prototype.QJ);v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",eq.prototype.RK);v("nrg.ui.ZippyTree.prototype.disposeInternal",eq.prototype.e);function oq(){}w(oq,En);fa(oq);oq.prototype.p=function(a){var b=a.G().p("span",this.Xj(a).join(" "));pq(this,b,a.ji);return b};oq.prototype.ob=function(a,b){b=oq.c.ob.call(this,a,b);var c=Jj(b),d=qq;Hb(c,rq(this,sq))?d=sq:Hb(c,rq(this,tq))?d=tq:Hb(c,rq(this,qq))&&(d=qq);a.ji=d;Sj(b,"checked",d==sq?"mixed":d==tq?"true":"false");return b};oq.prototype.og=function(){return"checkbox"};
function pq(a,b,c){if(b){var d=rq(a,c);Kj(b,d)||(C(uq,function(a){a=rq(this,a);Pj(b,a,a==d)},a),Sj(b,"checked",c==sq?"mixed":c==tq?"true":"false"))}}oq.prototype.O=function(){return"goog-checkbox"};function rq(a,b){var c=a.O();if(b==tq)return c+"-checked";if(b==qq)return c+"-unchecked";if(b==sq)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function vq(a,b,c){c=c||oq.Od();Tn.call(this,null,c,b);this.ji=ca(a)?a:qq}w(vq,Tn);var tq=!0,qq=!1,sq=null,uq={mL:tq,YM:qq,ZM:sq};f=vq.prototype;f.sb=null;f.Li=function(){return this.ji==tq};f.df=function(a){a!=this.ji&&(this.ji=a,pq(this.Ga(),this.a(),this.ji))};f.Uf=function(a){this.$?(this.fc(),this.sb=a,this.Sa()):this.sb=a};f.toggle=function(){this.df(this.ji?qq:tq)};
f.Sa=function(){vq.c.Sa.call(this);if(this.ck){var a=this.Ua();this.sb&&a.r(this.sb,"click",this.Bt).r(this.sb,"mouseover",this.dk).r(this.sb,"mouseout",this.hq).r(this.sb,"mousedown",this.sg).r(this.sb,"mouseup",this.Hf);a.r(this.a(),"click",this.Bt)}this.sb&&(this.sb.id||(this.sb.id=vj(this)+".lbl"),Sj(this.a(),"labelledby",this.sb.id))};f.Zb=function(a){vq.c.Zb.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.Bt=function(a){a.stopPropagation();var b=this.ji?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.Gf=function(a){32==a.keyCode&&this.Bt(a);return!1};Bn("goog-checkbox",function(){return new vq});function wq(){Vd.call(this);this.n="mesh";za(this,new dd)}w(wq,Vd);v("X.mesh",wq);Zm.Jv.QN={};function xq(){V.call(this);this.xg=[];this.ff=[]}w(xq,V);v("xiv.ui.ctrl.XtkController",xq);xq.ID_PREFIX="xiv.ui.ctrl.XtkController";xq.CSS_SUFFIX={OC:"label",AC:"component"};var yq=B();function zq(){return Q("div",{id:"Label_"+B(),"class":xq.CSS.OC})}function Aq(a){a=g(a.file)?a.file[0]:a.file||a.name;return Nl(a)}function Bq(a,b){b.bB([Aq(a)])}f=xq.prototype;f.Ki=!1;f.k=function(a){xq.c.k.call(this,a)};
f.Uf=function(a){null==this.sb&&(this.sb=zq(),Th(this.a(),this.sb));this.sb.innerHTML=a};f.VF=function(){return this.sb};f.bB=function(a){r(a)&&(a=[a]);this.wl=a};f.MF=function(){return this.wl};f.Vi=function(a){this.jC=a};f.ad=function(){return this.jC};f.xk=function(a){a=this.t=a;this.t instanceof sj?(a=this.t.a(),this.t.$?this.t.a().parentNode!==this.a()&&this.t.a()!==this.a()&&this.a().appendChild(this.t.a()):this.t.k(this.a())):this.a().appendChild(a);null!=a&&M(a,xq.CSS.AC)};
f.Dy=function(){return Lb(this.xg,this.ff)};f.bG=function(){return this.xg};f.Oz=function(){return this.Ki};f.nK=function(a){this.Ki=a};f.EG=function(){return this.ff};f.yF=function(){return this.t};f.Gc=ea;f.re=function(a,b,c){a=new a;a.k();r(b)&&a.Uf(b);Th(this.a(),a.a());null!=c&&G(a,"p",c);return a};f.update=function(){this.t==this?this.j():this.t.j&&this.t.j()};f.j=function(){this.t.j&&this.t!=this&&(window.console.log("UPDATE STYLE",this.t),this.t.j())};
f.ys=function(a,b){var c=this.re(b,"Color",function(b){a.color=b.color}.bind(this));Bq(a,c);this.ff.push(c);c[yq]=a;c.update()};f.yx=function(a,b){var c=this.re(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});Bq(a,c);this.ff.push(c);c.t.D(1);c.t.j()};f.zs=function(a,b){var c=this.re(b,"Visible",function(b){a.visible=b.checked});Bq(a,c);this.ff.push(c);c.t.df(a.visible)};
f.e=function(){xq.c.e.call(this);this[yq]=null;delete this.Ki;delete this.jC;D(this.ff,function(a){H(a);a.g()});Ib(this.ff);delete this.ff;D(this.xg,function(a){H(a);a.g();controller=null});Ib(this.xg);delete this.xg;null!=this.t&&(H(this.t),this.t instanceof sj?this.t.g():S(this.t),delete this.t);null!=this.wl&&(Ib(this.wl),delete this.wl);null!=this.sb&&(S(this.sb),delete this.sb)};v("xiv.ui.ctrl.XtkController.ID_PREFIX",xq.ID_PREFIX);v("xiv.ui.ctrl.XtkController.CSS_SUFFIX",xq.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkController.EventType",{lL:"p"});v("xiv.ui.ctrl.XtkController.OBJ_KEY",yq);v("xiv.ui.ctrl.XtkController.createLabel",zq);v("xiv.ui.ctrl.XtkController.getXObjLabel",Aq);v("xiv.ui.ctrl.XtkController.getObjectCategory",function(a){if(a instanceof wq)return"Meshes";if(a instanceof J)return"Volumes";if(a instanceof dq)return"Fibers";if(a instanceof Dp)return"Annotations"});v("xiv.ui.ctrl.XtkController.setControllerFolders",Bq);v("xiv.ui.ctrl.XtkController.prototype.render",xq.prototype.k);
v("xiv.ui.ctrl.XtkController.prototype.setLabel",xq.prototype.Uf);v("xiv.ui.ctrl.XtkController.prototype.getLabel",xq.prototype.VF);v("xiv.ui.ctrl.XtkController.prototype.setFolders",xq.prototype.bB);v("xiv.ui.ctrl.XtkController.prototype.getFolders",xq.prototype.MF);v("xiv.ui.ctrl.XtkController.prototype.setXObj",xq.prototype.Vi);v("xiv.ui.ctrl.XtkController.prototype.getXObj",xq.prototype.ad);v("xiv.ui.ctrl.XtkController.prototype.setComponent",xq.prototype.xk);
v("xiv.ui.ctrl.XtkController.prototype.getAllControllers",xq.prototype.Dy);v("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",xq.prototype.bG);v("xiv.ui.ctrl.XtkController.prototype.isInitialized",xq.prototype.Oz);v("xiv.ui.ctrl.XtkController.prototype.setInitialized",xq.prototype.nK);v("xiv.ui.ctrl.XtkController.prototype.getSubControllers",xq.prototype.EG);v("xiv.ui.ctrl.XtkController.prototype.getComponent",xq.prototype.yF);
v("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",xq.prototype.Gc);v("xiv.ui.ctrl.XtkController.prototype.createController",xq.prototype.re);v("xiv.ui.ctrl.XtkController.prototype.update",xq.prototype.update);v("xiv.ui.ctrl.XtkController.prototype.updateStyle",xq.prototype.j);v("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",xq.prototype.ys);v("xiv.ui.ctrl.XtkController.prototype.add_opacity",xq.prototype.yx);v("xiv.ui.ctrl.XtkController.prototype.add_visible",xq.prototype.zs);
v("xiv.ui.ctrl.XtkController.prototype.disposeInternal",xq.prototype.e);function Cq(){xq.call(this)}w(Cq,xq);v("xiv.ui.ctrl.Histogram",Cq);Cq.ID_PREFIX="xiv.ui.ctrl.Histogram";Cq.CSS_SUFFIX={tC:"canvas",SC:"linecanvas",UC:"max",aD:"min"};Cq.LEVEL_CUTOFF=.999;f=Cq.prototype;f.rH=.95;f.Td=null;f.Pi=null;f.Br=null;f.Mn=null;f.Gr=null;f.Po=null;f.HE="rgb(40,40,40)";
f.k=function(a){Cq.c.k.call(this,a);this.xk(this);this.ii=Q("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.tC});this.a().appendChild(this.ii);this.Jj=this.ii.getContext("2d");this.Jj.fillStyle=this.HE;this.vh=Q("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.SC});this.a().appendChild(this.vh);this.wg=this.vh.getContext("2d");this.Ln=Q("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.UC},"1000");
this.a().appendChild(this.Ln);this.Nn=Q("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.aD},"-1000");this.a().appendChild(this.Nn)};f.ad=function(){return Cq.c.ad.call(this)};
function Dq(a){if(null==a.Td){var b=a.ad(),c=0,d=b.max;D(b.image,function(a){D(a,function(a){D(a,function(a){if(null==this.Td)for(this.Td=[];c<=d;c++)this.Td.push(0);this.Td[parseInt(a)]++;this.Br++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Td){var e;null==a.Pi&&(a.Pi=[],a.Mn=0,D(a.Td,function(a){e=a/this.Br;this.Pi.push(e);this.Mn=Math.max(this.Mn,e)}.bind(a)))}}}
f.ty=function(){if(null!=this.ad()){var a=U(this.ii),b=a.width,a=a.height;this.ii.height=a;this.ii.width=b;this.vh.height=a;this.vh.width=b;Dq(this);if(null!=this.Td)for(var b=Math.round(b/this.ad().iC),b=0<b?b:1,c=this.rH/this.Mn,d,e=0,h=this.Pi.length;e<h;e++)d=this.Pi[e]*c*a,this.Jj.fillRect(b*e,a,b,-Math.round(d))}};f.$y=function(a){if(null!=this.Td)for(var b=0,c=0,d=this.Td.length;c<d;c++)if(b+=this.Td[c],b/this.Br>=a)return c};
f.uy=function(){if(null!=this.ad()){var a=U(this.vh),b=a.width,a=a.height;this.vh.width=b;var c;c=0==this.Zi&&0<this.Gh?Math.round(this.Po/this.Gh*b):Math.round(this.Po/this.Zi*b);b=0==this.Gh?0:Math.round(this.Gr/this.Gh*b);this.wg.strokeStyle="gray";this.wg.moveTo(c,a);this.wg.lineTo(b,0);this.wg.lineWidth=.5;this.wg.stroke();b=c+(b-c)/2;this.wg.moveTo(b,a);this.wg.lineTo(b,a-20);this.wg.lineWidth=.5;this.wg.stroke()}};f.update=function(){this.ty();this.bC();this.uy()};
f.bC=function(){null!=this.ad()&&(null==this.Zi&&(this.Zi=parseInt(this.ad().ZK),this.Gh=parseInt(this.ad().iC),this.Zi=isNaN(this.Zi)?null:this.Zi,this.Gh=isNaN(this.Gh)?null:this.Gh,this.Po=this.Zi,this.Gr=this.Gh),this.Po=parseInt(this.ad().ZK),this.Gr=parseInt(this.ad().iC),this.Nn.innerHTML=this.Po,this.Ln.innerHTML=this.Gr)};
f.e=function(){Cq.c.e.call(this);null!=this.Ln&&(S(this.Ln),delete this.Ln);null!=this.Nn&&(S(this.Nn),delete this.Nn);null!=this.ii&&(S(this.ii),delete this.ii);null!=this.vh&&(S(this.vh),delete this.vh);null!=this.Td&&(Ib(this.Td),delete this.Td);null!=this.Pi&&(Ib(this.Pi),delete this.Pi);delete this.Br;delete this.Mn;delete this.Jj;delete this.wg;delete this.Zi;delete this.Gh};v("xiv.ui.ctrl.Histogram.EventType",{});v("xiv.ui.ctrl.Histogram.ID_PREFIX",Cq.ID_PREFIX);
v("xiv.ui.ctrl.Histogram.CSS_SUFFIX",Cq.CSS_SUFFIX);v("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",Cq.LEVEL_CUTOFF);v("xiv.ui.ctrl.Histogram.prototype.render",Cq.prototype.k);v("xiv.ui.ctrl.Histogram.prototype.draw",Cq.prototype.ty);v("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",Cq.prototype.$y);v("xiv.ui.ctrl.Histogram.prototype.drawLine",Cq.prototype.uy);v("xiv.ui.ctrl.Histogram.prototype.update",Cq.prototype.update);v("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",Cq.prototype.bC);
v("xiv.ui.ctrl.Histogram.prototype.disposeInternal",Cq.prototype.e);function Eq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);V.call(this);this.ry=a;this.Ri=b;this.Om=null;this.Ya=new cj(this.a());this.rr()}w(Eq,V);v("nrg.ui.ResizeDragger",Eq);Eq.ID_PREFIX="nrg.ui.ResizeDragger";Eq.CSS_SUFFIX={};f=Eq.prototype;f.Yf=null;f.rh=null;f.pl=null;f.an=null;f.mg=null;f.kh=null;f.Sp=null;f.$m=null;f.offsetX=0;f.mB=function(a){this.offsetX=a};f.offsetY=0;f.sK=function(a){this.offsetY=a};f.Ma=null;f.qh=null;f.sa=null;f.xd=null;f.oa=null;f.Sb=null;
f.vd=!1;f.Ud=new uh(10,10);f.Zc=function(){return this.Om};f.Dh=function(a){this.Om=a};f.Py=function(){return this.Ya};f.Oy=function(){return this.ry};f.$c=function(){return this.a()};
f.aj=function(){this.qh=U(this.a());this.Ma=yi(this.a());this.Yf=-1*this.qh.height/2+this.offsetY;this.rh=-1*this.qh.width/2+this.offsetX;this.Ya.Jf()||this.vd||(this.sa=vb(yi(this.Ri)),this.xd=vb(U(this.Ri)),this.sa.left=this.sa.x,this.sa.top=this.sa.y,this.sa.right=this.sa.x+this.xd.width,this.sa.bottom=this.sa.y+this.xd.height,this.oa=vb(yi(this.Om)),this.Sb=vb(U(this.Om)),this.oa.left=this.oa.x,this.oa.top=this.oa.y,this.oa.right=this.oa.x+this.Sb.width,this.oa.bottom=this.oa.y+this.Sb.height,
this.ig&&this.ig(this))};f.kB=function(a){return this.Ud=a};f.rr=function(){G(this.Ya,"start",this.Gu.bind(this));G(this.Ya,"drag",this.Nf.bind(this));G(this.Ya,"end",this.Fu.bind(this))};f.Gu=function(){this.dispatchEvent({type:"start_resize"})};f.Nf=function(){this.aj();this.dispatchEvent({type:"resize",bK:this.sa,xd:this.xd,AE:this.oa,Sb:this.Sb});null!=this.Be&&this.Be()};f.Fu=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.Ya.Jf()||this.vd||this.aj()};f.We=function(){};
f.ef=function(a,b,c){this.aj();a=this.We(a);t(c)&&0===c?ri(this.a(),a.end):Fq(this,a.start,a.end,b,c)};function Fq(a,b,c,d,e){a.Yi=new Xk(a.a(),[b.x,b.y],[c.x,c.y],t(e)?e:500,vl);G(a.Yi,"begin",function(){this.vd=!0;this.Gu()}.bind(a));G(a.Yi,"animate",a.Nf.bind(a));G(a.Yi,"end",function(){this.vd=!1;this.Yi.g();H(this.Yi);this.Yi.Re();this.Yi=null;wi(this.a(),c);this.Fu();d&&d()}.bind(a));a.Yi.play()}
f.e=function(){delete this.qO;delete this.rO;delete this.rh;delete this.pl;delete this.an;delete this.mg;delete this.kh;delete this.Sp;delete this.$m;delete this.vd;tb(this.Ud);delete this.Ud;delete this.Ri;delete this.Om;tb(this.Ma);delete this.Ma;tb(this.qh);delete this.qh;tb(this.sa);delete this.sa;tb(this.xd);delete this.xd;tb(this.oa);delete this.oa;tb(this.Sb);delete this.Sb;S(this.Ya.handle);this.Ya.handle=null;H(this.Ya);this.Ya.g();delete this.Ya;delete this.ry};
v("nrg.ui.ResizeDragger.EventType",{Pr:"resize",mD:"start_resize",lD:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Eq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Eq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Eq.prototype.Yf);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Eq.prototype.rh);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Eq.prototype.pl);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Eq.prototype.an);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Eq.prototype.mg);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Eq.prototype.kh);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Eq.prototype.Sp);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Eq.prototype.$m);v("nrg.ui.ResizeDragger.prototype.offsetX",Eq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Eq.prototype.mB);v("nrg.ui.ResizeDragger.prototype.offsetY",Eq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Eq.prototype.sK);v("nrg.ui.ResizeDragger.prototype.handlePos",Eq.prototype.Ma);v("nrg.ui.ResizeDragger.prototype.handleSize",Eq.prototype.qh);v("nrg.ui.ResizeDragger.prototype.resizeePos",Eq.prototype.sa);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Eq.prototype.xd);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Eq.prototype.oa);v("nrg.ui.ResizeDragger.prototype.boundarySize",Eq.prototype.Sb);v("nrg.ui.ResizeDragger.prototype.isAnimating",Eq.prototype.vd);
v("nrg.ui.ResizeDragger.prototype.minSize",Eq.prototype.Ud);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Eq.prototype.Zc);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Eq.prototype.Dh);v("nrg.ui.ResizeDragger.prototype.getDragger",Eq.prototype.Py);v("nrg.ui.ResizeDragger.prototype.getDirection",Eq.prototype.Oy);v("nrg.ui.ResizeDragger.prototype.getHandle",Eq.prototype.$c);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Eq.prototype.aj);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Eq.prototype.kB);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Eq.prototype.Gu);v("nrg.ui.ResizeDragger.prototype.onResize",Eq.prototype.Nf);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Eq.prototype.Fu);v("nrg.ui.ResizeDragger.prototype.update",Eq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Eq.prototype.We);v("nrg.ui.ResizeDragger.prototype.slideToLimits",Eq.prototype.ef);
v("nrg.ui.ResizeDragger.prototype.disposeInternal",Eq.prototype.e);function Gq(a){Eq.call(this,"right",a)}w(Gq,Eq);v("nrg.ui.ResizeDraggerRight",Gq);Gq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Gq.CSS_SUFFIX={};Gq.prototype.ig=function(){this.pl=this.sa.left+this.Ud.width+this.rh;this.an=this.oa.right+this.rh;this.Sp=this.an-this.pl};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Gq.prototype.ig);Gq.prototype.Be=function(){Ki(this.Ri,Math.min(Math.max(this.xd.width+(this.vd?this.Ma.x-this.sa.right+this.rh:this.Ya.clientX-this.Ya.uv),this.Ud.width),this.Sb.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Gq.prototype.Be);Gq.prototype.update=function(a){this.Ya.Jf()||this.vd||(Gq.c.update.call(this,a),ej(this.Ya,new wh(this.pl,this.sa.y,this.Sp,0)),wi(this.a(),this.sa.right+this.rh,this.sa.y),Li(this.a(),this.xd.height))};Gq.prototype.We=function(a){return{start:new N(this.Ma.x,this.Ma.y),end:"MIN"==a?new N(this.pl,this.Ma.y):new N(this.an,this.Ma.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Gq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Gq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Gq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Gq.prototype.We);function Hq(a){Eq.call(this,"right",a)}w(Hq,Eq);v("nrg.ui.ResizeDraggerBottom",Hq);Hq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Hq.CSS_SUFFIX={};Hq.prototype.ig=function(){this.mg=this.sa.top+this.Ud.height+this.Yf;this.kh=this.oa.bottom+this.Yf;this.$m=this.kh-this.mg};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Hq.prototype.ig);Hq.prototype.Be=function(){Li(this.Ri,Math.max(this.xd.height+(this.Ma.y-this.sa.bottom),this.Ud.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Hq.prototype.Be);Hq.prototype.update=function(){this.Ya.Jf()||this.vd||(Hq.c.update.call(this),ej(this.Ya,new wh(this.oa.x,this.mg,0,this.kh)),wi(this.a(),this.sa.x,this.sa.bottom+this.Yf))};Hq.prototype.We=function(a){return{start:new N(this.Ma.x,this.Ma.y),end:"MIN"==a?new N(this.Ma.x,this.mg):new N(this.Ma.x,this.kh)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Hq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Hq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Hq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Hq.prototype.We);function Iq(a){Eq.call(this,"right",a)}w(Iq,Eq);v("nrg.ui.ResizeDraggerTop",Iq);Iq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Iq.CSS_SUFFIX={};Iq.prototype.ig=function(){this.mg=this.oa.top-this.Yf;this.kh=this.sa.bottom-this.Ud.height+this.Yf;this.$m=this.kh-this.mg};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Iq.ig);Iq.prototype.Be=function(){var a=this.Ma.y-this.Yf,b=this.xd.height+(this.vd?this.sa.y-a:this.Ya.vv-this.Ya.clientY);this.Ri.style.top=a.toString()+"px";Li(this.Ri,Math.max(b,this.Ud.height))};
Iq.prototype.update=function(){this.Ya.Jf()||this.vd||(Iq.c.update.call(this),ej(this.Ya,new wh(this.oa.x,this.mg,0,this.$m)),wi(this.a(),this.sa.x,this.sa.y+this.Yf))};Iq.prototype.We=function(a){return{start:new N(this.Ma.x,this.Ma.y),end:"MIN"==a?new N(this.Ma.x,this.kh):new N(this.Ma.x,this.mg)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Iq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Iq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Iq.prototype.ig);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Iq.prototype.Be);v("nrg.ui.ResizeDraggerTop.resizeMethod",Iq.Be);v("nrg.ui.ResizeDraggerTop.prototype.update",Iq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Iq.prototype.We);function Jq(a){Eq.call(this,"right",a)}w(Jq,Eq);v("nrg.ui.ResizeDraggerTopRight",Jq);Jq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Jq.CSS_SUFFIX={};Jq.prototype.aj=function(){Jq.c.aj.call(this);this.Ya.Jf()||this.vd||(Gq.prototype.ig.bind(this)(),Iq.prototype.ig.bind(this)())};Jq.prototype.Nf=function(){Jq.c.Nf.call(this);Gq.prototype.Be.bind(this)();Iq.prototype.Be.bind(this)()};
Jq.prototype.update=function(a){this.Ya.Jf()||this.vd||(Jq.c.update.call(this,a),ej(this.Ya,new wh(this.oa.x+this.rh,this.oa.y+this.Yf,this.Sb.width,this.Sb.height)),wi(this.a(),this.sa.right+this.rh,this.sa.y+this.Yf))};
Jq.prototype.We=function(a){var b=new N(this.Ma.x,this.Ma.y),c;"TOP_LEFT"==a?c=new N(this.oa.x,this.oa.y):"TOP_RIGHT"==a?c=new N(this.oa.x+this.Sb.width,this.oa.y):"BOTTOM_RIGHT"==a?c=new N(this.oa.x+this.Sb.width,this.oa.y+this.Sb.height):"BOTTOM_LEFT"==a&&(c=new N(this.oa.x,this.oa.y+this.Sb.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Jq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Jq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Jq.prototype.aj);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Jq.prototype.Nf);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Jq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Jq.prototype.We);function Kq(a){Eq.call(this,"right",a)}w(Kq,Eq);v("nrg.ui.ResizeDraggerLeft",Kq);Kq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Kq.CSS_SUFFIX={};Kq.prototype.Be=function(){Ki(this.Ri,Math.min(Math.max(this.xd.width+(this.sa.x-this.Ma.x),this.Ud.width),this.Sb.width));wi(this.a(),this.Ma.x,this.sa.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Kq.prototype.Be);
Kq.prototype.update=function(a){this.Ya.Jf()||this.vd||(Kq.c.update.call(this,a),ej(this.Ya,new wh(this.oa.x-this.qh.width,this.oa.y,this.Sb.width-this.Ud.width-this.qh.width,0)),wi(this.a(),this.sa.x-this.qh.width,this.sa.y))};Kq.prototype.We=function(a){return{start:new N(this.Ma.x,this.Ma.y),end:"MIN"==a?new N(this.oa.x+this.Ud.width,this.Ma.y):new N(this.oa.x+this.Sb.width-this.Ud.width,this.Ma.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Kq.ID_PREFIX);v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Kq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerLeft.resizeMethod",Kq.Be);v("nrg.ui.ResizeDraggerLeft.prototype.update",Kq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Kq.prototype.We);function Lq(a,b){V.call(this);this.l=Gh(a);this.Cd={};this.Gq=this.Hq=20;this.Vl(b||Lq.RN)}w(Lq,V);v("nrg.ui.Resizable",Lq);Lq.ID_PREFIX="nrg.ui.Resizable";Lq.CSS_SUFFIX={iL:"boundary"};var Mq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Nq=["RIGHT","BOTTOM"],Oq=new wh(0,0,600,600);f=Lq.prototype;f.lK=function(a,b){this.MN(a);if(0>b)throw Error("Threshold must be greater than zero!");this.IN[a]=b};f.$c=function(a){return this.Cd[a].$c()};f.zl=function(a){return this.Cd[a]};
f.OF=function(){var a=[];D(ob(this.Cd),function(b){a.push(b.$c())});return a};f.Zc=function(){return this.Af};f.Dh=function(a){this.Af=a;if(this.Af.parentNode!==this.l.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.jB=function(a){this.Gq=a};f.lB=function(a){this.Hq=a};f.hG=function(){return this.Gq};f.iG=function(){return this.Hq};
f.Vl=function(a){a=a||"DEFAULT";r(a)&&(a="ALL"==a.toUpperCase()?Mq:"DEFAULT"==a.toUpperCase()?Nq:[a]);Pq(this);D(a,function(a){if(!r(a))throw Error("String required!");if(!Hb(Mq,a))throw Error("Invalid direction: ",a);this.jx(a)}.bind(this))};f.Ls=function(a){if(!Hb(Mq,a))throw Error("Invalid draggerDir '"+a);};f.qH=function(a){this.Ls(a);if(!this.Cd[a])throw Error("No ResizeDragger for "+a);};f.ef=function(a,b,c,d){a=a.toUpperCase();this.Ls(a);this.update();this.Cd[a].ef(b,c,d)};
function Qq(a,b){switch(a){case "TOP":return new Iq(b);case "BOTTOM":return new Hq(b);case "LEFT":return new Kq(b);case "RIGHT":return new Gq(b);case "TOP_RIGHT":return new Jq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.jx=function(a){if(a in this.Cd)throw Error("Resize direction "+a+" already in use.");this.Cd[a]=Qq(a,this.l);G(this.Cd[a],"start_resize",this.dJ.bind(this));G(this.Cd[a],"resize",this.pk.bind(this));G(this.Cd[a],"end_resize",this.cJ.bind(this));this.update()};f.update=function(){if(null!=this.Af){var a=new uh(this.Hq,this.Gq);C(this.Cd,function(b){this.Af&&this.Af.parentNode&&Th(this.Af.parentNode,b.$c());b.Zc()!==this.Af&&b.Dh(this.Af);b.kB(a);b.aj();b.update()}.bind(this))}};f.dJ=function(){this.dispatchEvent({type:"resize_start"})};
f.pk=function(a){this.dispatchEvent({type:"resize",bK:a.sa,xd:a.xd,AE:a.oa,Sb:a.Sb})};f.cJ=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Pq(a){C(a.Cd,function(a){a&&(H(a),a.g())});tb(a.Cd)}f.e=function(){Lq.c.e.call(this);Pq(this);delete this.Cd;this.Af&&(S(this.Af.parentNode),delete this.Af)};v("nrg.ui.Resizable.EventType",{Pr:"resize",mD:"resize_start",lD:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Lq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Lq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Mq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Nq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Oq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",Qq);v("nrg.ui.Resizable.prototype.setBoundThreshold",Lq.prototype.lK);v("nrg.ui.Resizable.prototype.getHandle",Lq.prototype.$c);v("nrg.ui.Resizable.prototype.getResizeDragger",Lq.prototype.zl);v("nrg.ui.Resizable.prototype.getHandles",Lq.prototype.OF);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Lq.prototype.Zc);v("nrg.ui.Resizable.prototype.setBoundaryElement",Lq.prototype.Dh);v("nrg.ui.Resizable.prototype.setMinHeight",Lq.prototype.jB);v("nrg.ui.Resizable.prototype.setMinWidth",Lq.prototype.lB);v("nrg.ui.Resizable.prototype.getMinHeight",Lq.prototype.hG);v("nrg.ui.Resizable.prototype.getMinWidth",Lq.prototype.iG);v("nrg.ui.Resizable.prototype.setResizeDirections",Lq.prototype.Vl);v("nrg.ui.Resizable.prototype.checkDirectionValid",Lq.prototype.Ls);
v("nrg.ui.Resizable.prototype.hasDragger",Lq.prototype.qH);v("nrg.ui.Resizable.prototype.slideToLimits",Lq.prototype.ef);v("nrg.ui.Resizable.prototype.addResizeDirection",Lq.prototype.jx);v("nrg.ui.Resizable.prototype.update",Lq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Lq.prototype.e);function Rq(a){V.call(this);this.vb=a}w(Rq,V);v("xiv.ui.layouts.LayoutFrame",Rq);Rq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Rq.CSS_SUFFIX={};f=Rq.prototype;f.Pd=function(){return this.vb};f.mc=null;f.L=function(){return this.Wo};f.Vl=function(a){this.Wo=this.Wo?this.Wo:new Lq(this.a());this.Wo.Vl(a)};f.e=function(){Rq.c.e.call(this);delete this.vb};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Rq.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Rq.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Rq.prototype.Pd);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Rq.prototype.L);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Rq.prototype.Vl);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Rq.prototype.e);function Sq(){V.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.h={}}w(Sq,V);v("xiv.ui.layouts.Layout",Sq);var Tq="Slider_"+B(),Uq="FrameDisplay_"+B(),Vq="ZoomDisplay_"+B(),Wq="Crosshairs_"+B(),Xq={ka:Tq,Ad:Uq,qf:Vq,Pc:Wq};
Sq.ID_PREFIX="xiv.ui.layouts.Layout";Sq.CSS_SUFFIX={};f=Sq.prototype;f.Jb=20;f.Lc=20;f.pK=function(a){this.Lc=a};f.qK=function(a){this.Jb=a};f.ZF=function(){return this.h};f.st=function(a){return this.h[a]};f.YF=function(a){window.console.log(a,this.h[a]);var b={};C(Xq,function(c){b[c]=this.h[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};f.Pd=function(){return this.constructor.TITLE};f.hx=function(a){this.h=this.h?this.h:{};this.h[a.Pd()]=a};f.lg=function(){this.dispatchEvent({type:"q"})};
f.Xu=function(){C(this.hn(),function(a){null!=a.ka&&(a.ka.g(),delete a.ka);null!=a.Pc&&(a.Pc.g(),delete a.Pc);null!=a.Ad&&(a.Ad.g(),delete a.Ad);null!=a.qf&&(a.qf.g(),delete a.qf)})};f.Lo=function(){C(this.hn(),function(a){null!=a.ka&&(a.ka.j(),a.ka.D(a.ka.H()));null!=a.Pc&&a.Pc.j();null!=a.Ad&&a.Ad.j();null!=a.qf&&a.qf.j()})};f.j=function(){Sq.c.j.call(this);this.lg()};f.e=function(){Sq.c.e.call(this);delete this.Lc;delete this.Jb;this.Zm(this.TC);delete this.TC};
v("xiv.ui.layouts.Layout.EventType",{Pr:"q"});v("xiv.ui.layouts.Layout.INTERACTORS",Xq);v("xiv.ui.layouts.Layout.ID_PREFIX",Sq.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",Sq.CSS_SUFFIX);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Sq.prototype.pK);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Sq.prototype.qK);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Sq.prototype.ZF);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Sq.prototype.st);
v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Sq.prototype.YF);v("xiv.ui.layouts.Layout.prototype.getTitle",Sq.prototype.Pd);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Sq.prototype.hx);v("xiv.ui.layouts.Layout.prototype.dispatchResize",Sq.prototype.lg);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Sq.prototype.Xu);v("xiv.ui.layouts.Layout.prototype.updateInteractors",Sq.prototype.Lo);v("xiv.ui.layouts.Layout.prototype.updateStyle",Sq.prototype.j);
v("xiv.ui.layouts.Layout.prototype.disposeInternal",Sq.prototype.e);function Yq(a){$c.call(this);this.n="interactor";this.me=a;this.gs=this.Rw=this.Qw=this.Sw=this.Pw=this.Tw=null;this.lp=!0;this.di=this.Yh=this.fg=!1;this.xc=[0,0];this.bs=new A.K(0,0,0);this.om=new A.K(0,0,0);this.Rz=0;this.Zw=this.hp=null;this.qs=!1;this.hb={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(Yq,$c);Yq.prototype.__defineGetter__("config",function(){return this.hb});
Yq.prototype.__defineGetter__("leftButtonDown",function(){return this.fg});Yq.prototype.__defineGetter__("middleButtonDown",function(){return this.Yh});Yq.prototype.__defineGetter__("rightButtonDown",function(){return this.di});
Yq.prototype.ia=function(){this.hb.MOUSEWHEEL_ENABLED?(this.gs=new Ip(this.me),this.Tw=G(this.gs,"mousewheel",this.Un.bind(this))):(Tc(this.Tw),this.gs=null);this.hb.MOUSECLICKS_ENABLED?(this.Pw=G(this.me,"mousedown",this.Cu.bind(this)),this.Sw=G(this.me,"mouseup",this.Du.bind(this))):(Tc(this.Pw),Tc(this.Sw));this.me.oncontextmenu=this.hb.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.hb.KEYBOARD_ENABLED?this.zh.bind(this):null;this.hb.TOUCH_ENABLED?(this.hb.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.bE=G(this.me,"touchstart",this.zJ.bind(this)),this.aE=G(this.me,"touchmove",this.xJ.bind(this)),this.$D=G(this.me,"touchend",this.tJ.bind(this))):(Tc(this.bE),Tc(this.aE),Tc(this.$D));Tc(this.Qw);Tc(this.Rw);this.Qw=G(this.me,"mousemove",this.SI.bind(this));this.Rw=G(this.me,"mouseout",this.TI.bind(this))};
Yq.prototype.Cu=function(a){0==a.button?this.fg=!0:1==a.button?this.Yh=!0:2==a.button&&(this.di=!0);eval("this.onMouseDown("+this.fg+","+this.Yh+","+this.di+")");Zq(this);a.preventDefault()};Yq.prototype.QI=function(){};Yq.prototype.Du=function(a){0==a.button?this.fg=!1:1==a.button?this.Yh=!1:2==a.button&&(this.di=!1);eval("this.onMouseUp("+this.fg+","+this.Yh+","+this.di+")");Zq(this);a.preventDefault()};Yq.prototype.__defineGetter__("mousePosition",function(){return this.xc});f=Yq.prototype;
f.WI=function(){};f.TI=function(a){this.lp=!1;this.hb.KEYBOARD_ENABLED&&(window.onkeydown=null);this.di=this.Yh=this.fg=!1;Zq(this);this.bs=new A.K(0,0,0);a.preventDefault()};f.RI=function(){};f.zJ=function(a){a.preventDefault();a.ia(a.tc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.om=new A.K(a.clientX,a.clientY,0);this.Zw=setTimeout(this.vJ.bind(this,a),500)};f.yJ=function(){};
f.vJ=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new ve;a.eg=!0;a.rf=this instanceof $q;this.dispatchEvent(a);this.pp=!0};f.uJ=function(){};function ar(a){clearTimeout(a.Zw);if(a.pp){var b=new ve;b.eg=!1;b.rf=a instanceof $q;a.dispatchEvent(b)}a.pp=!1}f.tJ=function(a){a.preventDefault();eval("this.onTouchEnd()");ar(this)};f.sJ=function(){};
f.xJ=function(a){a.preventDefault();this.pp||ar(this);this.touchmoveEvent=a=a.tc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.K(c[0],c[1],0);var b=c[0]>3*this.me.clientWidth/4,d=c[0]<this.me.clientWidth/4,e=c[1]<this.me.clientHeight/4,c=c[1]>3*this.me.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.om.ic(a);this.om=a.clone();if(this.pp)a=new qe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.Rc=e,this.dispatchEvent(a);
else if(this instanceof br&&(b||d))a=new we,a.Hb=0>e.y,this.dispatchEvent(a);else if(this instanceof $q||c)e.scale(3),a=new ue,a.Rc=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.K(a[0],a[1],0),b=new A.K(b[0],b[1],0),e=od(a,b),b=e-this.Rz,this.Rz=e,this.om.ic(a),this.om=a.clone(),10<Math.abs(b)&&(a=new ve,a.eg=0<b,a.rf=this instanceof $q,this.dispatchEvent(a)))};f.wJ=function(){};
f.SI=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.lp=!0;this.hb.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.zh.bind(this));a.preventDefault();var b=a.shiftKey;this.qs=b;this.xc=[a.offsetX,a.offsetY];var c=new A.K(this.xc[0],this.xc[1],0);a=this.bs.ic(c);this.bs=c.clone();this.hb.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Yh||this.fg||this.di)&&Zq(this),this.hp=setTimeout(function(){Zq(this);var a=new xe;a.tp=c.x;a.vp=
c.y;this.dispatchEvent(a);this.hp=null}.bind(this),300));0!=a.Kf()&&(this.fg&&!b?(b=new ue,a.scale(3),b.Rc=a,this.dispatchEvent(b)):this.Yh||this.fg&&b?(b=new qe,b.Rc=a,this.dispatchEvent(b)):this.di&&(b=new ve,b.eg=0<a.y,b.rf=!1,this.dispatchEvent(b)))};function Zq(a){a.hp&&clearTimeout(a.hp);a.dispatchEvent(new ye)}f.XI=function(){};f.Un=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");Zq(this);a.preventDefault()};f.II=function(){};
f.zh=function(a){if(this.lp){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");Zq(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new qe:b?a=new ve:(a=new ue,this instanceof br&&(a=new we)),a&&(c=new A.K(0,0,0),37==h?(c.x=5,a.Hb=!1,b&&(a.Hb=!0,a.eg=!0,a.rf=!1)):39==h?(c.x=-5,a.Hb=!0,b&&(a.eg=!1,a.rf=!1)):38==h?(c.y=5,a.Hb=!0,b&&(a.eg=!0,a.rf=!0)):40==h&&(c.y=-5,a.Hb=!1,b&&(a.eg=!1,a.rf=!0)),a.Rc=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new ze,this.dispatchEvent(a))}};v("X.interactor",Yq);v("X.interactor.prototype.init",Yq.prototype.ia);v("X.interactor.prototype.onMouseDown",Yq.prototype.QI);v("X.interactor.prototype.onMouseUp",Yq.prototype.WI);v("X.interactor.prototype.onMouseMove",Yq.prototype.RI);v("X.interactor.prototype.onMouseWheel",Yq.prototype.XI);v("X.interactor.prototype.onKey",Yq.prototype.II);v("X.interactor.prototype.onTouchStart",Yq.prototype.yJ);v("X.interactor.prototype.onTouchMove",Yq.prototype.wJ);
v("X.interactor.prototype.onTouchEnd",Yq.prototype.sJ);v("X.interactor.prototype.onTouchHover",Yq.prototype.uJ);function br(a){Yq.call(this,a);this.n="interactor2D"}w(br,Yq);br.prototype.Un=function(a){br.c.Un.call(this,a);var b=new we;null==a.td&&(a.td=0);b.Hb=0>a.td;this.dispatchEvent(b)};function cr(a,b){if(!t(a)||!t(b))throw Error("A camera needs valid width and height values.");$c.call(this);this.n="camera";this.tj=new A.K(0,100,0);this.Wk=new A.K(0,0,0);this.Hb=new A.K(0,0,1);this.Ka=a;this.za=b;this.J=this.Cq(this.tj,this.Wk)}w(cr,$c);cr.prototype.observe=function(a){if(!(null!=a&&a instanceof Yq))throw Error("Could not observe the interactor.");G(a,be,this.eJ.bind(this));G(a,ae,this.ZI.bind(this));G(a,ce,this.JJ.bind(this))};
cr.prototype.eJ=function(a){if(!(a instanceof ue))throw Error("Received no valid rotate event.");this.rotate(a.Rc)};cr.prototype.JJ=function(a){if(!(a instanceof ve))throw Error("Received no valid zoom event.");a.eg?this.fm(a.rf):this.gm(a.rf)};cr.prototype.ZI=function(a){if(!(a instanceof qe))throw Error("Received no valid pan event.");this.Wq(a.Rc)};cr.prototype.__defineGetter__("view",function(){return this.J});
cr.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.J=a});cr.prototype.__defineGetter__("position",function(){return[this.tj.x,this.tj.y,this.tj.z]});cr.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.tj=new A.K(a[0],a[1],a[2]);this.reset()});cr.prototype.__defineGetter__("focus",function(){return[this.Wk.x,this.Wk.y,this.Wk.z]});
cr.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.Wk=new A.K(a[0],a[1],a[2]);this.reset()});cr.prototype.__defineGetter__("up",function(){return[this.Hb.x,this.Hb.y,this.Hb.z]});cr.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.Hb=new A.K(a[0],a[1],a[2]);this.reset()});f=cr.prototype;f.reset=function(){this.J=this.Cq(this.tj,this.Wk)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.K(a[0],a[1],0);else if(!(a instanceof A.K))throw Error("Invalid distance vector for rotate operation.");return a};f.Wq=function(a){if(g(a)&&2==a.length)a=new A.K(a[0],a[1],0);else if(!(a instanceof A.K))throw Error("Invalid distance vector for pan operation.");this.J[12]-=a.x;this.J[13]+=a.y};f.fm=function(a){var b=20;null!=a&&!a&&(b=1);this.J[14]+=b};f.gm=function(a){var b=20;null!=a&&!a&&(b=1);this.J[14]-=b};
f.Cq=function(a,b){if(!(a instanceof A.K&&b instanceof A.K))throw Error("3D vectors required for calculating the view.");return A.o.un()};v("X.camera",cr);v("X.camera.prototype.pan",cr.prototype.Wq);v("X.camera.prototype.rotate",cr.prototype.rotate);v("X.camera.prototype.zoomIn",cr.prototype.fm);v("X.camera.prototype.zoomOut",cr.prototype.gm);function dr(a){function b(a,b,d){b=b*Math.PI*2;b=gp(hp(n,Math.cos(b)),hp(m,Math.sin(b)));a=gp(gp(c,hp(e,a)),hp(b,h));d=gp(hp(b,1-Math.abs(d)),hp(k,d));return new lp(a,d)}this.ub=[];a=a||{};var c=new fp(a.start||[0,-1,0]),d=new fp(a.end||[0,1,0]),e=ip(d,c),h=a.Ag||1;a=a.ta||16;for(var k=jp(e),l=.5<Math.abs(k.y()),n=jp((new fp(l,!l,0)).Nj(k)),m=jp(n.Nj(k)),l=new lp(c,kp(k)),d=new lp(d,jp(k)),q=[],p=0;p<a;p++){var s=p/a,u=(p+1)/a;q.push(new np([l,b(0,s,-1),b(0,u,-1)]));q.push(new np([b(0,u,0),b(0,s,
0),b(1,s,0),b(1,u,0)]));q.push(new np([d,b(1,u,1),b(1,s,1)]))}return yp(q)}w(dr,xp);function er(){Vd.call(this);this.n="cylinder";this.ss=[-10,-10,-10];this.$r=[10,10,10];this.uj=10;this.Ac=32;za(this,new zp)}w(er,Vd);er.prototype.__defineGetter__("start",function(){return this.ss});er.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.ss=a});er.prototype.__defineGetter__("end",function(){return this.$r});er.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.$r=a});
er.prototype.__defineGetter__("radius",function(){return this.uj});er.prototype.__defineSetter__("radius",function(a){if(!t(a))throw Error("Invalid radius.");this.uj=a});er.prototype.T=function(){Bp(this,new dr({start:this.ss,end:this.$r,Ag:this.uj,ta:this.Ac}));er.c.T.call(this)};v("X.cylinder",er);v("X.cylinder.prototype.modified",er.prototype.T);function Fp(a){J.call(this);this.n="labelmap";this.$g=a;this.rs=new Float32Array([-255,-255,-255,-255])}w(Fp,J);Fp.prototype.T=function(){var a=new Wd;a.Ea=this;this.dispatchEvent(a);this.$g.T()};Fp.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.md)throw Error("No colortable assigned.");b=this.md.Fd.get(a).slice(1,5)}this.rs=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Fp);function fr(a){this.ub=[];a=a||{};var b=new fp(a.fh||[0,0,0]),c=a.Ag?a.Ag.length?a.Ag:[a.Ag,a.Ag,a.Ag]:[1,1,1];return yp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new np(a[0].map(function(e){e=new fp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new lp(e,new fp(a[1]))}))}))}w(fr,xp);function gr(){Vd.call(this);this.n="cube";this.Ia=[0,0,0];this.es=this.ds=this.cs=20;this.hl=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];za(this,new zp)}w(gr,Vd);gr.prototype.__defineGetter__("center",function(){return this.Ia});gr.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Ia=a});gr.prototype.__defineGetter__("lengthX",function(){return this.cs});
gr.prototype.__defineSetter__("lengthX",function(a){if(!t(a))throw Error("Invalid lengthX.");this.cs=a});gr.prototype.__defineGetter__("lengthY",function(){return this.ds});gr.prototype.__defineSetter__("lengthY",function(a){if(!t(a))throw Error("Invalid lengthY.");this.ds=a});gr.prototype.__defineGetter__("lengthZ",function(){return this.es});gr.prototype.__defineSetter__("lengthZ",function(a){if(!t(a))throw Error("Invalid lengthZ.");this.es=a});
gr.prototype.T=function(){Bp(this,new fr({fh:this.Ia,Ag:[this.cs/2,this.ds/2,this.es/2]}));gr.c.T.call(this)};v("X.cube",gr);v("X.cube.prototype.modified",gr.prototype.T);function $q(a){Yq.call(this,a);this.n="interactor3D"}w($q,Yq);$q.prototype.Un=function(a){$q.c.Un.call(this,a);var b=new ve;null==a.td&&(a.td=0);b.eg=0>a.td;b.rf=!0;this.dispatchEvent(b)};function hr(a){$c.call(this);this.n="array";this.Qa=[];this.Fw=a}w(hr,$c);function ir(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}hr.prototype.add=function(a){this.Qa.push(a);return!0};hr.prototype.remove=function(a){a=this.Qa.indexOf(a);-1<a&&this.Qa.splice(a,1);return!0};hr.prototype.clear=function(){this.Qa.length=0};
function jr(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),jr(a,b,d),jr(a,d,c);b<d;++b)if(0<a.Fw(a.Qa[b],a.Qa[d])){var e=a.Qa[b];a.Qa[b]=a.Qa[d];for(var h=a,k=d,l=c;k+1<l&&0>h.Fw(h.Qa[k+1],e);){var n=h,m=k+1,q=n.Qa[k];n.Qa[k]=n.Qa[m];n.Qa[m]=q;++k}h.Qa[k]=e}}hr.prototype.sort=function(){jr(this,0,this.Qa.length)};function kr(a,b){cr.call(this,a,b);this.n="camera2D"}w(kr,cr);kr.prototype.rotate=function(a){a=kr.c.rotate.call(this,a);var b=new pe;0<a.x?b.us--:0>a.x&&b.us++;0<a.y?b.fs++:0>a.y&&b.fs--;this.dispatchEvent(b)};kr.prototype.fm=function(a){var b=20;null!=a&&!a&&(b=.02);this.J[14]+=b};kr.prototype.gm=function(a){var b=20;null!=a&&!a&&(b=.02);this.J[14]-=b};
kr.prototype.Wq=function(a){if(g(a)&&2==a.length)a=new A.K(a[0],a[1],0);else if(!(a instanceof A.K))throw Error("Invalid distance vector for pan operation.");this.J[12]-=a.x/this.J[14];this.J[13]+=a.y/this.J[14]};function lr(a,b){cr.call(this,a,b);this.n="camera3D";this.Iw=45;this.ks=A.o.$t(A.o.un(),this.Iw,a/b,1,1E4)}w(lr,cr);lr.prototype.rotate=function(a){a=lr.c.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.K(this.J[1],this.J[5],this.J[9]),d=new A.K(this.J[0],this.J[4],this.J[8]);c.normalize();d.normalize();A.o.rotate(this.J,b,c.x,c.y,c.z);A.o.rotate(this.J,a,d.x,d.y,d.z)};lr.prototype.Cq=function(a,b){var c=lr.c.Cq.call(this,a,b);A.o.aA(c,a,b,this.Hb);return c};
function mr(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.o.multiply(a.ks,a.J,l);A.o.pb(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.o.kA(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",lr);function nr(a){sj.call(this,a);this.Bg=new Lp;G(this.Bg,"change",this.eH,!1,this)}w(nr,sj);var or={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=nr.prototype;f.p=function(){this.Ee=this.Lj();var a=or[this.xa];this.l=this.G().p("div",a,this.Ee);pr(this);qr(this);rr(this)};f.Sa=function(){nr.c.Sa.call(this);E&&7>lc&&G(this.a(),"resize",this.Mg,!1,this);this.Mg();var a=this.a();Rj(a,"progressbar");Sj(a,"live","polite")};f.fc=function(){nr.c.fc.call(this);sr(this)};
f.Lj=function(){return this.G().p("div","progress-bar-thumb")};function sr(a){E&&7>lc&&Sc(a.a(),"resize",a.Mg,!1,a)}f.Kd=function(a){nr.c.Kd.call(this,a);Lj(this.a(),or[this.xa]);a=Hh(null,"progress-bar-thumb",this.a())[0];a||(a=this.Lj(),this.a().appendChild(a));this.Ee=a};f.H=function(){return this.Bg.H()};f.D=function(a){this.Bg.D(a);this.a()&&pr(this)};function pr(a){Sj(a.a(),"valuenow",a.H())}f.qa=function(){return this.Bg.qa()};f.Yd=function(a){this.Bg.Yd(a);this.a()&&qr(this)};
function qr(a){Sj(a.a(),"valuemin",a.qa())}f.ea=function(){return this.Bg.ea()};f.cd=function(a){this.Bg.cd(a);this.a()&&rr(this)};function rr(a){Sj(a.a(),"valuemax",a.ea())}f.xa="horizontal";f.eH=function(){this.Mg();this.dispatchEvent("change")};
f.Mg=function(){if(this.Ee){var a=this.qa(),b=this.ea(),a=(this.H()-a)/(b-a),b=Math.round(100*a);"vertical"==this.xa?E&&7>lc?(this.Ee.style.top=0,this.Ee.style.height="100%",b=this.Ee.offsetHeight,a=Math.round(a*b),this.Ee.style.top=b-a+"px",this.Ee.style.height=a+"px"):(this.Ee.style.top=100-b+"%",this.Ee.style.height=b+"%"):this.Ee.style.width=b+"%"}};
f.Fh=function(a){if(this.xa!=a){var b=or[this.xa],c=or[a];this.xa=a;if(a=this.a())Kj(a,b)&&(Nj(a,b),Lj(a,c)),b=this.Ee.style,"vertical"==this.xa?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.Mg()}};f.Ib=function(){return this.xa};f.e=function(){sr(this);nr.c.e.call(this);this.Ee=null;this.Bg.g()};f.ph=function(){return this.Bg.ph()};f.Gg=function(a){this.Bg.Gg(a)};function tr(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");nr.call(this);this.n="progressbar";this.Me=a;this.js="";this.ep=this.Zg=null;this.rj=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.rj=[c,d,e];this.D(b);this.It()}w(tr,nr);
tr.prototype.It=function(){var a=ti(this.Me,"position");if("static"==a||""==a)this.js=this.Me.style.position,this.Me.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.rj[0])),d=document.createTextNode(String(this.rj[1])),e=document.createTextNode(String(this.rj[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Zg=b;this.k(this.Me);a=this.a();a.style.position=
"absolute";a.style.top=(this.Me.clientHeight-5)/2+"px";a.style.left=(this.Me.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};tr.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;S(this.a());var c=new tr(this.Me,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");Xh(d).classList.add("progress-bar-thumb-done");this.ep=c};
tr.prototype.En=function(){this.Zg&&S(this.Zg);this.a()&&S(this.a());this.ep&&S(this.ep.a());this.ep=this.Zg=null;this.js&&(this.Me.style.position=this.js)};function ur(){$c.call(this);this.n="renderer";this.na=window.document.body;this.Ka=this.na.clientWidth;this.za=this.na.clientHeight;this.wa=this.aa=this.cc=null;this.gg=new hr(Yd);this.pd=[];this.wb=null;this.mp=this.pm=this.kp=!1;this.b=this.bi=this.Id=null;this.hb={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Xr=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(ur,$c);f=ur.prototype;
f.su=function(){window.cancelAnimationFrame(this.Xr);this.hb.PROGRESSBAR_ENABLED&&(this.bi=new tr(this.na,3))};f.tu=function(){this.hb.PROGRESSBAR_ENABLED&&this.bi&&(this.bi.done(),this.bp=Uf(function(){this.bp=null;this.bi&&(this.bi.En(),this.bi=null);this.pm=this.mp=!0;this.k()}.bind(this),700))};f.uu=function(a){this.bi&&this.bi.D(100*a.yj)};f.ok=function(a){this.Id&&this.Id.D(100*a.yj)};f.OI=function(a){null!=a&&a instanceof Wd&&a.Ea&&this.Og(a.Ea)};
f.aJ=function(a){null!=a&&a instanceof Xd&&a.Ea&&this.remove(a.Ea)};f.yu=function(a){if(!(null!=a&&a instanceof xe))throw Error("Invalid hover event.");};f.pk=function(){var a=Gh(this.na);this.Ka=a.clientWidth;this.za=a.clientHeight;a=Gh(this.cc);a.width=this.Ka;a.height=this.za;"renderer3D"==this.n&&(this.b.viewport(0,0,this.Ka,this.za),this.aa.ks=A.o.$t(A.o.un(),this.aa.Iw,this.cc.width/this.cc.height,1,1E4))};
f.Rl=function(a){if(!(null!=a&&a instanceof we))throw Error("Invalid scroll event.");};ur.prototype.__defineGetter__("config",function(){return this.hb});ur.prototype.__defineGetter__("interactor",function(){return this.wa});ur.prototype.__defineGetter__("camera",function(){return this.aa});ur.prototype.__defineGetter__("loadingCompleted",function(){return this.pm});ur.prototype.__defineGetter__("container",function(){return this.na});
ur.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;r(b)&&(b=Gh(a));if(!$h(b))throw Error("Could not find the given container.");this.na=b});f=ur.prototype;f.Yn=function(){this.aa.reset()};function vr(a){a.hb.PROGRESSBAR_ENABLED&&a.Id&&!a.bp&&(a.Id.done(),a.bp=Uf(function(){this.bp=null;this.Id&&(this.Id.En(),this.Id=null);this.k()}.bind(a),700))}
f.ia=function(a){var b=Q("canvas");this.na.appendChild(b);this.Ka=this.na.clientWidth;this.za=this.na.clientHeight;b.width=this.Ka;b.height=this.za;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.na.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.wb=new Kf;G(this.wb,ie,this.ok.bind(this));this.cc=b;this.b=c;b=new $q(this.cc);"2d"==a&&(b=new br(this.cc));b.ia();G(b,ee,this.Yn.bind(this));G(b,ke,this.yu.bind(this));G(b,de,this.Rl.bind(this));this.wa=b;b=new lr(this.Ka,this.za);"2d"==a&&(b=new kr(this.Ka,this.za));b.observe(this.wa);this.aa=b;G(window,"resize",this.pk,!1,this)};f.add=function(a){(a instanceof gr||a instanceof Dp||a instanceof er)&&a.T();this.pd.push(a);this.Og(a)};
f.remove=function(a){if(!this.cc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&H(a);return!1};f.Og=function(a){if(!this.cc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Uc(a,ge)||G(a,ge,this.OI.bind(this)),Uc(a,he)||G(a,he,this.aJ.bind(this)),Uc(a,me)||G(a,me,this.su.bind(this)),Uc(a,oe)||G(a,oe,this.uu.bind(this)),Uc(a,ne)||G(a,ne,this.tu.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.gg.Qa,c=b.length,d=0,d=0;d<c;d++)if(b[d].Sc==a)return b[d];return null};
f.k=function(){if(!this.cc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.Ww){if(this.wb.al.Qs(!1)){if(this.hb.PROGRESSBAR_ENABLED&&!this.Id&&(this.Id=new tr(this.na,3)),this.mp=this.pm=!1,this.Ww=Uf(function(){this.Ww=null;this.k()}.bind(this),100),!this.hb.INTERMEDIATE_RENDERING)return}else if(this.pm||this.mp||(this.mp=!0,eval("this.onShowtime()"),this.pm=!0),this.Id){vr(this);return}this.Xr=window.requestAnimationFrame(this.k.bind(this));eval("this.onRender()");
this.Cg(!1,!0)}};f.zA=function(){};f.xA=function(){};f.Cg=function(){};f.Re=function(){window.cancelAnimationFrame(this.Xr);this.wb&&(delete this.wb,this.wb=null);this.Id&&(this.Id.En(),delete this.Id,this.Id=null);this.gg.clear();delete this.gg;this.pd.length=0;delete this.pd;delete this.wb;this.wb=null;delete this.aa;this.aa=null;delete this.wa;this.wa=null;delete this.b;this.b=null;S(this.cc);delete this.cc;this.cc=null};function wr(){ur.call(this);this.n="renderer2D";this.zc=null;this.nd=-1;this.Hd=[];this.Nw=this.ip=this.Jw=this.gp=null;this.el=this.gl=this.vj=this.wj=0;this.xb=this.yb=this.lb=this.jb=this.Gw=-1;this.Ow=new Float32Array([-255,-255,-255,-255]);this.Vw=!0}w(wr,ur);wr.prototype.Hu=function(){};wr.prototype.DJ=function(){};wr.prototype.Rl=function(a){wr.c.Rl.call(this,a);var b=this.pd[0];if(b){var c="",c=0==this.nd?"indexX":1==this.nd?"indexY":"indexZ";b[c]=a.Hb?b[c]+1:b[c]-1;eval("this.onScroll();")}};
wr.prototype.EJ=function(a){var b=this.pd[0];if(b){var c=b.xb-b.yb,d=c/2,e=parseInt(c+c/15*-a.us,10);a=parseInt(d+d/15*a.fs,10);c==e&&e++;d==a&&a++;b.yb-=parseInt(d-a,10);b.yb-=parseInt(c-e,10);b.yb=Math.max(b.yb,b.Gd);b.xb-=parseInt(d-a,10);b.xb+=parseInt(c-e,10);b.xb=Math.min(b.xb,b.Fb);eval("this.onWindowLevel();")}};wr.prototype.__defineGetter__("orientation",function(){return this.zc});
wr.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.nd=2):"SAGITTAL"==a?(a="X",this.nd=0):"CORONAL"==a&&(a="Y",this.nd=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.zc=a});wr.prototype.__defineGetter__("radiological",function(){return this.Vw});wr.prototype.__defineSetter__("radiological",function(a){this.Vw=a});f=wr.prototype;
f.ia=function(){if(!this.zc)throw Error("No 2D orientation set.");wr.c.ia.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.cc.width,this.cc.height);this.gp=Q("canvas");this.ip=Q("canvas");G(this.aa,fe,this.EJ.bind(this))};f.pk=function(){wr.c.pk.call(this);xr(this)};f.Yn=function(){wr.c.Yn.call(this);xr(this);var a=this.pd[0];a&&(a.xb=a.Fb,a.yb=a.Gd)};
f.Og=function(a){wr.c.Og.call(this,a);var b=!1;this.get(a.Sc)&&(b=!0);if(a instanceof J){var c=a.W,d=a.m,e=a.md;if(null!=d&&null!=d.W&&d.W.A)this.Og(d);else if(null!=e&&null!=e.W&&e.W.A)this.wb.load(e,a);else{if(null!=c&&g(c))if(null!=a.Qg){if(a.Qg.Kn!=c.length||b&&!a.A)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.wb.load(c[b],a);return}else if(null!=c&&c.A){this.wb.load(a,a);return}c=this.zc;this.nd="X"==c?0:"Y"==c?1:2;this.Ac=a.i[this.nd].i;e=null;e=0==this.nd?a.indexX:1==this.nd?a.indexY:a.indexZ;
c=a.i[this.nd].i[e].Mw;d=a.i[this.nd].i[e].Lw;this.gl=a.i[this.nd].i[e].ah;this.el=a.i[this.nd].i[e].Ug;this.wj=c;this.vj=d;e=this.gp;e.width=c;e.height=d;var h=this.ip;h.width=c;h.height=d;this.Jw=e.getContext("2d");this.Nw=h.getContext("2d");b||(this.gg.add(a),xr(this))}}};function xr(a){var b=Math.min(a.Ka/(a.wj*a.gl),a.za/(a.vj*a.el));a.aa.J[14]=b}f.Tq=function(){};
f.kC=function(a,b){var c=this.pd[0],d=this.aa.J,e=null,h=this.wj,k=this.vj,l=null,n=null;if("Y"==this.zc)e=this.Ac[parseInt(c.indexY,10)],l=e.ah,n=e.Ug,this.Hd[0]="red",this.Hd[1]="blue";else if("Z"==this.zc)e=this.Ac[parseInt(c.indexZ,10)],l=e.ah,n=e.Ug,this.Hd[0]="red",this.Hd[1]="green";else{e=this.Ac[parseInt(c.indexX,10)];l=e.Ug;n=e.ah;this.Hd[0]="green";this.Hd[1]="blue";var m=h,h=k,k=m}var q=1*d[12],p=-1*d[13],m=Math.max(d[14],.6),d=[this.Ka/2,this.za/2],l=h*l*m,n=k*n*m,s=d[0]-l/2,d=d[1]-n/
2,s=s+q*m,d=d+p*m;return a>s&&a<s+l&&b>d&&b<d+n?(q=(a-s)/l*h,p=(b-d)/n*k,n=e.dE[4],"X"==this.zc?(m=h-q,q=p,p=m):"Y"==this.zc?q=h-q:"Z"==this.zc&&(q=h-q,p=k-p),q=e.cE+q*e.ah,p=e.XD+p*e.Ug,q=yd(q,p,n,1),h=zd(),Kd(e.QD,q,h),k=zd(),Kd(e.RD,q,k),e=Math.round((c.d[0].v[0]*k[0]+c.d[0].v[1]*k[1]+c.d[0].v[2]*k[2]+c.d[0].is)/c.d[0].fl),e>=c.d[0].S?e=c.d[0].S-1:0>e&&(e=0),q=Math.round((c.d[1].v[0]*k[0]+c.d[1].v[1]*k[1]+c.d[1].v[2]*k[2]+c.d[1].is)/c.d[1].fl),q>=c.d[1].S?q=c.d[1].S-1:0>q&&(q=0),p=Math.round((c.d[2].v[0]*
k[0]+c.d[2].v[1]*k[1]+c.d[2].v[2]*k[2]+c.d[2].is)/c.d[2].fl),p>=c.d[2].S?p=c.d[2].S-1:0>p&&(p=0),[[e,q,p],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.Cg=function(a,b){wr.c.Cg.call(this,a,b);if(0!=this.gg.Qa.length){var c=this.pd[0],d=null,d=0==this.nd?c.indexX:1==this.nd?c.indexY:c.indexZ,e=this.Ac[parseInt(d,10)].Mw,h=this.Ac[parseInt(d,10)].Lw;this.gl=this.Ac[parseInt(d,10)].ah;this.el=this.Ac[parseInt(d,10)].Ug;this.wj=e;this.vj=h;var k=this.Ka,l=this.za,n=this.aa.J;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var m=Math.max(n[14],.1);this.b.setTransform(m,0,0,m,0,0);var q=1*n[12],n=-1*n[13],p=null;c.m&&(p=c.m.rs);var s=
this.Ac[parseInt(d,10)],u=s.Ja.ci,s=s.m,z=null;s&&(z=s.ci);var y=this.wj,I=this.vj,R=this.Jw,O=this.Nw,F=R.getImageData(0,0,y,I),P=O.getImageData(0,0,y,I),W=F.data,T=P.data,ua=W.length,la=c.Fb,wa=c.jb,Ma=c.lb,Ga=c.yb/la,Na=c.xb/la;if(this.Gw!=d||this.jb!=wa||this.lb!=Ma||this.yb!=Ga||this.xb!=Na||p&&!ir(p,this.Ow,0)){var ja=this.gp;ja.width=e;ja.height=h;ja=this.ip;ja.width=e;ja.height=h;e=0;do{var ja=[0,0,0,0],h=[0,0,0,0],xa=u[e]/255*la,qa=u[e],qa=(qa/255-Ga)/(Na-Ga),qa=255*qa;xa>=wa&&xa<=Ma&&(ja=
new K(c.Zh[0],c.Zh[1],c.Zh[2]),ja=(new K(c.Xh[0],c.Xh[1],c.Xh[2])).scale(qa).add(ja.scale(255-qa)),ja=[Math.floor(ja.x),Math.floor(ja.y),Math.floor(ja.z),255],s&&(-255==p[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:ir(p,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.zc?(W[e]=ja[0],W[e+1]=ja[1],W[e+2]=ja[2],W[e+3]=ja[3],T[e]=h[0],T[e+1]=h[1],T[e+2]=h[2],T[e+3]=h[3]):"Y"==this.zc?(qa=Math.floor(e/(4*y)),qa=qa*y*4+(4*(y-1)-(e-qa*y*4)),W[qa]=ja[0],W[qa+1]=ja[1],W[qa+2]=ja[2],W[qa+3]=ja[3],T[qa]=h[0],T[qa+1]=
h[1],T[qa+2]=h[2],T[qa+3]=h[3]):(qa=ua-1-e,W[qa-3]=ja[0],W[qa-2]=ja[1],W[qa-1]=ja[2],W[qa]=ja[3],T[qa-3]=h[0],T[qa-2]=h[1],T[qa-1]=h[2],T[qa]=h[3]);e+=4}while(e<ua);R.putImageData(F,0,0);O.putImageData(P,0,0);this.Gw=d;this.jb=wa;this.lb=Ma;this.yb=Ga;this.xb=Na;s&&(this.Ow=p)}this.b.globalAlpha=1;this.b.translate(k/2/m,l/2/m);"X"==this.zc&&(this.b.rotate(.5*Math.PI),d=q,q=n,n=-d);q=-y*this.gl/2+q;n=-I*this.el/2+n;this.b.drawImage(this.gp,q,n,y*this.gl,I*this.el);s&&c.m.ab&&(this.b.globalAlpha=c.m.yc,
this.b.drawImage(this.ip,q,n,y*this.gl,I*this.el));this.hb.SLICENAVIGATORS&&this.wa.lp&&this.wa.qs&&!this.wa.fg&&(q=this.wa.xc,q=this.kC(q[0],q[1]))&&(c.Vg=q[0][0],c.Wg=q[0][1],c.Xg=q[0][2],c.T(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.wa.xc[0],0),this.b.lineTo(this.wa.xc[0],this.wa.xc[1]-10),this.b.moveTo(this.wa.xc[0],this.wa.xc[1]+10),this.b.lineTo(this.wa.xc[0],this.za),this.b.strokeStyle=this.Hd[0],this.b.stroke(),this.b.closePath(),
this.b.beginPath(),this.b.moveTo(0,this.wa.xc[1]),this.b.lineTo(this.wa.xc[0]-10,this.wa.xc[1]),this.b.moveTo(this.wa.xc[0]+10,this.wa.xc[1]+.5),this.b.lineTo(this.Ka,this.wa.xc[1]),this.b.strokeStyle=this.Hd[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+q[2][0].toFixed(2)+", "+q[2][1].toFixed(2)+", "+q[2][2].toFixed(2),0,0),y=s=n="undefined","undefined"!=typeof c.Qb[q[1][2].toFixed(0)]&&
"undefined"!=typeof c.Qb[q[1][2].toFixed(0)][q[1][1].toFixed(0)]&&(n=c.Qb[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],c.Va&&(s=c.m.Qb[q[1][2].toFixed(0)][q[1][1].toFixed(0)][q[1][0].toFixed(0)],c.m.mm&&(y=c.m.mm.get(s),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+q[1][0].toFixed(0)+", "+q[1][1].toFixed(0)+", "+q[1][2].toFixed(0)+")",0,15),c.Va&&this.b.fillText("Labelmap:  "+y+" ("+s+")",0,30))}};v("X.renderer2D",wr);v("X.renderer2D.prototype.init",wr.prototype.ia);
v("X.renderer2D.prototype.add",wr.prototype.add);v("X.renderer2D.prototype.onShowtime",wr.prototype.zA);v("X.renderer2D.prototype.onRender",wr.prototype.xA);v("X.renderer2D.prototype.onScroll",wr.prototype.Hu);v("X.renderer2D.prototype.onWindowLevel",wr.prototype.DJ);v("X.renderer2D.prototype.get",wr.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",wr.prototype.Yn);v("X.renderer2D.prototype.xy2ijk",wr.prototype.kC);v("X.renderer2D.prototype.render",wr.prototype.k);
v("X.renderer2D.prototype.destroy",wr.prototype.Re);v("X.renderer2D.prototype.onSliceNavigation",wr.prototype.Tq);Zm.Oc={};function yr(){Yc.call(this)}w(yr,Yc);v("xiv.vis.RenderEngine",yr);yr.prototype.ID_PREFIX="xiv.vis.RenderEngine";var zr="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{kM:"r",iM:"s",jM:"t"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",zr);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",yr.prototype.ID_PREFIX);function Ar(){wr.call(this)}w(Ar,wr);v("xiv.vis.XtkRenderer2D",Ar);f=Ar.prototype;f.Nf=function(){this.pk()};f.Hu=function(){this.Tq()};f.ok=function(a){Ar.c.ok.call(this,a);this.dispatchEvent({type:"s",value:a.yj})};f.ia=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;Ar.c.ia.call(this);this.wa.onMouseMove=this.HI.bind(this);this.wa.config.MOUSEWHEEL_ENABLED=!1;this.wa.config.MOUSECLICKS_ENABLED=!1;this.wa.config.KEYBOARD_ENABLED=!1;this.wa.ia()};f.Ib=function(){return this.zc};
f.uF=function(){return this.aa};f.kG=function(){return this.wa.mousePosition};f.LH=function(){};f.HI=function(){this.dispatchEvent({type:"mouseover",iA:this.wa.iA,BB:this.wa.shiftDown})};f.Tq=function(){this.dispatchEvent({type:"u",volume:this.pd[0],LN:this.pd[0]["index"+this.zc],KN:this.zc,BB:this.wa.qs})};f.k=function(){this.cc&&this.b?(Ar.c.k.call(this),this.dispatchEvent({type:"t"})):(window.console.log("init"),this.ia(),window.console.log(this.Bl().visible))};f.vF=function(){return this.cc};
f.Bl=function(){return this.pd[0]};f.ez=function(){if(null!=this.Ac)return this.Ac.length};f.qz=function(){return this.aa.J[14]};f.zB=function(a){this.aa.J[14]=a};function Br(a){.01>a.aa.J[14]&&(a.aa.J[14]=.01)}f.fm=function(){this.aa.J[14]+=.03;Br(this)};f.gm=function(){this.aa.J[14]+=-.03;Br(this)};
function Cr(a,b,c,d){var e=a.pd[0],h=a.aa.J,k=null,l=a.wj,n=a.vj,m=null,q=null;if(null!=e){"Y"==a.zc?(k=a.Ac[parseInt(e.indexY,10)],m=k.ah,q=k.Ug,a.Hd[0]="red",a.Hd[1]="blue"):"Z"==a.zc?(k=a.Ac[parseInt(e.indexZ,10)],m=k.ah,q=k.Ug,a.Hd[0]="red",a.Hd[1]="green"):(k=a.Ac[parseInt(e.indexX,10)],m=k.Ug,q=k.ah,a.Hd[0]="green",a.Hd[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),p=[a.Ka/2,a.za/2],m=l*m*h,q=n*q*h,s=p[0]-m/2,p=p[1]-q/2,s=s+e*h,p=p+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?s+(a.wj-b)/l*m:s+b/l*m;b=Math.max(0,b);b=Math.min(b,n);return d?p+(a.vj-b)/n*q:p+b/n*q}}f.mz=function(a,b){return Cr(this,a,"vertical",b)};f.Vy=function(a,b){return Cr(this,a,"horizontal",b)};f.Re=function(){Ar.c.Re.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",Ar.prototype.Nf);v("xiv.vis.XtkRenderer2D.prototype.onScroll",Ar.prototype.Hu);v("xiv.vis.XtkRenderer2D.prototype.onProgress",Ar.prototype.ok);
v("xiv.vis.XtkRenderer2D.prototype.init",Ar.prototype.ia);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",Ar.prototype.Ib);v("xiv.vis.XtkRenderer2D.prototype.getCamera",Ar.prototype.uF);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",Ar.prototype.kG);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",Ar.prototype.LH);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",Ar.prototype.Tq);v("xiv.vis.XtkRenderer2D.prototype.render",Ar.prototype.k);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",Ar.prototype.vF);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",Ar.prototype.Bl);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",Ar.prototype.ez);v("xiv.vis.XtkRenderer2D.prototype.getZoom",Ar.prototype.qz);v("xiv.vis.XtkRenderer2D.prototype.setZoom",Ar.prototype.zB);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",Ar.prototype.fm);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",Ar.prototype.gm);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",Ar.prototype.mz);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",Ar.prototype.Vy);v("xiv.vis.XtkRenderer2D.prototype.destroy",Ar.prototype.Re);function Dr(){V.call(this)}w(Dr,dp);v("xiv.ui.layouts.interactors.ZoomDisplay",Dr);Dr.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";Dr.prototype.k=function(a){Dr.c.k.call(this,a);this.Aa.min=1};Dr.prototype.Ng=function(){this.Se.innerHTML="Zoom level:&nbsp"+this.Aa.value+"%"};v("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",Dr.ID_PREFIX);v("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",Dr.prototype.Ng);function Er(a,b){Np.call(this,a,b);this.Ba.Ti(0)}w(Er,Np);Er.prototype.O=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};Er.prototype.gy=function(){var a=this.a(),b=Hh(null,"goog-slider-thumb",a)[0];b||(b=this.Lj(),a.appendChild(b));this.fa=this.gc=b};Er.prototype.Lj=function(){var a=this.G().p("div","goog-slider-thumb");Rj(a,"button");return a};function Fr(a){Er.call(this);this.constructor.hm=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.kc=this.constructor.hm;V.prototype.Jp.bind(this)();null!=a&&this.Fh(a)}w(Fr,Er);v("nrg.ui.Slider",Fr);Fr.ID_PREFIX="nrg.ui.Slider";Fr.CSS_SUFFIX={yD:"track",zw:"track-hovered",Rr:"thumb",xw:"thumb-hovered"};f=Fr.prototype;f.Nl=!1;f.Co=!1;f.HK=function(a){this.Co=a};f.GK=function(a){this.Co=a};
f.k=function(a){this.l=Q("div",{id:Fr.ID_PREFIX+"_Widget_"+B()});this.ob(this.l);a=null!=a?a:document.body;a.appendChild(this.l);this.fd=Q("div",{id:Fr.ID_PREFIX+"_Track_"+B()});this.l.appendChild(this.fd);this.wc=Kh("goog-slider-thumb",this.l);G(this,"change",this.xI.bind(this));G(this.wc,"mouseover",this.gJ.bind(this));G(this.wc,"mouseout",this.fJ.bind(this));G(this.fd,"mouseover",this.BJ.bind(this));G(this.fd,"mouseout",this.AJ.bind(this));G(this,"l",this.lJ.bind(this));G(this,"m",this.iJ.bind(this));
this.Fh(this.Ib().toLowerCase())};f.a=function(){return this.l};f.PG=function(){return this.fd};f.JG=function(){return this.wc};f.Mm=function(a){null==this.hj&&(this.hj={});if(null==this.hj[a.id]){var b=new Ip(a);b.addEventListener("mousewheel",this.YI,!1,this);this.hj[a.id]=b}};f.yE=function(a){null==this.ej&&(this.ej={});if(null==this.ej[a.id]){var b=new Nn(a);G(b,"key",this.zh.bind(this));this.ej[a.id]=b}};f.zh=function(a){window.console.log("KEY",a)};
f.j=function(){var a=this.H(),a=$p(this,a);"horizontal"==this.Ib().toLowerCase()?this.wc.style.left=a.x.toString()+"px":"vertical"==this.Ib().toLowerCase()&&(this.wc.style.left=a.y.toString()+"px")};f.Fh=function(a){Fr.c.Fh.call(this,a);this.$&&Gr(this,this.Ib().toLowerCase())};function Gr(a,b){function c(a,c){rh(a,[zk(c,"horizontal"),zk(c,"vertical")],[c,zk(c,b)])}c(a.l,a.constructor.kc);c(a.fd,Fr.CSS.yD);c(a.wc,Fr.CSS.Rr)}f.Qv=!1;f.ct=1;f.vB=function(a,b){this.Qv=a;t(b)&&(this.ct=b)};
f.YI=function(a){var b=Math.abs(a.td)<Math.abs(a.ih)?a.ih:a.td;this.Qv?this.D(Math.round(this.H()-b*this.ct)):this.D(Math.round(this.H()-(0>b?-1:1)));this.dispatchEvent({type:"w"});a.preventDefault()};f.xp=function(a){this.Ig=this.Ig?this.Ig:[];this.Ig.push(a);Hr(this)};f.xs=function(a){this.Kg=this.Kg?this.Kg:[];this.Kg.push(a);Ir(this)};f.xI=function(a){a.stopPropagation();this.Nl&&(Jr(this),Kr(this));this.Co||this.dispatchEvent({type:"v",value:this.H(),du:this.qa(),cu:this.ea()});this.Co=!1};
function Jr(a){M(a.wc,Fr.CSS.xw);null!=a.Ig&&D(a.Ig,function(a){M(this.wc,a)}.bind(a))}function Kr(a){M(a.fd,Fr.CSS.zw);null!=a.Kg&&D(a.Kg,function(a){M(this.fd,a)}.bind(a))}function Hr(a){ph(a.wc,Fr.CSS.xw);null!=a.Ig&&D(a.Ig,function(a){ph(this.wc,a)}.bind(a))}function Ir(a){ph(a.fd,Fr.CSS.zw);null!=a.Kg&&D(a.Kg,function(a){ph(this.fd,a)}.bind(a))}f.gJ=function(a){a.stopPropagation();Jr(this);Kr(this)};f.BJ=function(){Kr(this)};f.fJ=function(){this.Nl||(Hr(this),Ir(this))};
f.AJ=function(){this.Nl||Ir(this)};f.lJ=function(){this.Nl=!0};f.iJ=function(){this.Nl=!1;Hr(this);Ir(this)};
f.e=function(){Fr.c.e.call(this);delete this.Co;null!=this.l&&(H(this),S(this.l),delete this.l);null!=this.wc&&(H(this.wc),S(this.wc),delete this.wc);null!=this.fd&&(H(this.fd),S(this.fd),delete this.fd);null!=this.ej&&(C(this.ej,function(a){H(a);a.g()}),tb(this.ej),delete this.ej);null!=this.hj&&(C(this.hj,function(a){H(a);a.g()}),tb(this.hj),delete this.hj);null!=this.Ig&&(Ib(this.Ig),delete this.Ig);null!=this.Kg&&(Ib(this.Kg),delete this.Kg);delete this.Qv;delete this.ct;delete this.Nl};
v("nrg.ui.Slider.EventType",{CM:"v",ZL:"w"});v("nrg.ui.Slider.ID_PREFIX",Fr.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",Fr.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendSlideEvent",Fr.prototype.HK);v("nrg.ui.Slider.prototype.suspendChangeEvent",Fr.prototype.GK);v("nrg.ui.Slider.prototype.render",Fr.prototype.k);v("nrg.ui.Slider.prototype.getElement",Fr.prototype.a);v("nrg.ui.Slider.prototype.getTrack",Fr.prototype.PG);v("nrg.ui.Slider.prototype.getThumb",Fr.prototype.JG);
v("nrg.ui.Slider.prototype.bindToMouseWheel",Fr.prototype.Mm);v("nrg.ui.Slider.prototype.bindToArrowKeys",Fr.prototype.yE);v("nrg.ui.Slider.prototype.updateStyle",Fr.prototype.j);v("nrg.ui.Slider.prototype.setOrientation",Fr.prototype.Fh);v("nrg.ui.Slider.prototype.setUseDeltaToScroll",Fr.prototype.vB);v("nrg.ui.Slider.prototype.addThumbHoverClass",Fr.prototype.xp);v("nrg.ui.Slider.prototype.addTrackHoverClass",Fr.prototype.xs);v("nrg.ui.Slider.prototype.disposeInternal",Fr.prototype.e);function Lr(){Fr.call(this)}w(Lr,Fr);v("xiv.ui.layouts.interactors.Slider",Lr);Lr.ID_PREFIX="xiv.ui.layouts.interactors.Slider";Lr.CSS_SUFFIX={};Lr.prototype.k=function(){};Lr.prototype.e=function(){Lr.c.e.call(this)};v("xiv.ui.layouts.interactors.Slider.EventType",{});v("xiv.ui.layouts.interactors.Slider.ID_PREFIX",Lr.ID_PREFIX);v("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",Lr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Slider.prototype.render",Lr.prototype.k);
v("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",Lr.prototype.e);function Mr(){V.call(this)}w(Mr,V);v("xiv.ui.layouts.interactors.Crosshairs",Mr);Mr.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";Mr.CSS_SUFFIX={FL:"horizontal",kN:"vertical"};f=Mr.prototype;f.Zf=null;f.If=null;f.xB=function(a){null!=a&&(this.Zf.style.left=a.toString()+"px")};f.yB=function(a){null!=a&&(this.If.style.top=a.toString()+"px")};f.k=function(a){this.Zf=Nr(this,"vertical");this.If=Nr(this,"horizontal");a.appendChild(this.If);a.appendChild(this.Zf)};
f.Fo=function(a){a=!1===a?"hidden":"visible";this.Zf.style.visibility=a;this.If.style.visibility=a};function Nr(a,b){b=b.toLowerCase();if(!qb(Mr.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return Q("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.kc+"-"+b.toLowerCase()})}f.e=function(){Mr.c.e.call(this);S(this.Zf);delete this.Zf;S(this.If);delete this.If};v("xiv.ui.layouts.interactors.Crosshairs.EventType",{});v("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",Mr.ID_PREFIX);
v("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",Mr.CSS_SUFFIX);v("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",Mr.prototype.Zf);v("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",Mr.prototype.If);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",Mr.prototype.xB);v("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",Mr.prototype.yB);v("xiv.ui.layouts.interactors.Crosshairs.prototype.render",Mr.prototype.k);
v("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",Mr.prototype.Fo);v("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",Mr.prototype.e);function Y(a){Sq.call(this);a=null!=a?a:ob(Or);a=g(a)?a:[a];D(a,function(b,c){a[c]=b.toUpperCase()});Pr(this,a);Qr(this,a);null!=this.h.X&&this.Zd();null!=this.h.Y&&this.Vf();null!=this.h.Z&&this.Wi();null!=this.h.V&&this.ro();this.j()}w(Y,Sq);v("xiv.ui.layouts.XyzvLayout",Y);Y.TITLE="XyzvLayout";Y.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var Or={cg:"X",le:"Y",Rk:"Z",Yo:"V"};
Y.CSS_SUFFIX={cg:"x",le:"y",Rk:"z",Yo:"v",ka:"slider",Qh:"slider-thumb",Qr:"slider-thumb-hovered",Rh:"slider-track",DM:"slider-track-x",EM:"slider-track-y",FM:"slider-track-z",BL:"framenumber"};function Rr(a,b,c,d){this.ka=a;this.Ad=b;this.Pc=c;this.qf=d}f=Y.prototype;f.RA=0;f.Eh=function(a,b){this.h[a].Vl(b);var c=this.dy(a);Th(this.a(),c);c.style.position="absolute";this.h[a].L().Dh(c);this.h[a].L().update()};
f.dy=function(a){return Q("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":zk(this.constructor.kc,a.toLowerCase()+"-resizeboundary")})};function Pr(a,b){if(b.length>nb(Or))throw Error("Invalid amount of frames "+b+". Must be "+Or);D(b,function(a){if(!qb(Or,a))throw Error("Invalid frame title ",a);}.bind(a))}function Qr(a,b){var c="";D(b,function(a,b){c=a.toUpperCase();this.hx(new Rq(c));Th(this.a(),this.h[c].a());M(this.h[c].a(),Y.CSS[b])}.bind(a))}f.SK=function(a){a.dv(this.hn())};
f.dv=function(a){this.$e(function(b,c){null!=a[c]&&(b[Tq]=a[c].ka,S(a[c].ka.a()),b.a().appendChild(a[c].ka.a()),b[Uq]=a[c].Ad,S(a[c].Ad.a()),b.a().appendChild(a[c].Ad.a()),b[Wq]=a[c].Pc,b.a().appendChild(a[c].Pc.Zf),b.a().appendChild(a[c].Pc.If))})};f.fx=function(){this.Xu();Sr(this);Tr(this);Ur(this);Vr(this)};f.hn=function(){var a={};this.$e(function(b,c){a[c]=new Rr(b[Tq],b[Uq],b[Wq],b[Vq])});return a};f.Yy=function(a){a=this.h[a];return new Rr(a[Tq],a[Uq],a[Wq])};f.Xy=function(a,b){return this.h[a][b]};
f.Uy=function(a){return this.h[a]};function Sr(a){var b;a.$e(function(a,d){b=new Fr("horizontal");b.k(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[Tq]=b;rh(b.a(),null,[Y.CSS.ka]);rh(b.wc,null,[Y.CSS.Qh]);rh(b.fd,null,[Y.CSS.Rh,zk(Y.CSS.Rh,d.toLowerCase())]);b.xp(Y.CSS.Qr)}.bind(a))}function Tr(a){var b;a.$e(function(a){b=new ep;b.k(a.a());a[Uq]=b}.bind(a))}function Ur(a){var b;a.$e(function(a){b=new Dr;b.k(a.a());a[Vq]=b}.bind(a))}
function Vr(a){var b;a.$e(function(a){b=new Mr;a[Wq]=b;b.k(a.a());a.a().appendChild(b.If);a.a().appendChild(b.Zf)}.bind(a))}f.$e=function(a){C(Or,function(b){b=b.toUpperCase();null!=this.h[b]&&"V"!=b&&a(this.h[b],b)}.bind(this))};f.loop=function(a){C(Or,function(b){b=b.toUpperCase();a(this.h[b],b)}.bind(this))};f.Zd=function(){null!=this.constructor.CSS&&M(this.h.X.a(),this.constructor.CSS.cg)};f.Vf=function(){null!=this.constructor.CSS&&M(this.h.Y.a(),this.constructor.CSS.le)};
f.Oi=function(a){this.dh();var b=U(this.h.X.a()),c=U(this.h.Y.a()),d=U(this.h.Z.a());a(b,c,d,b.width+c.width+d.width-this.q.width)};f.Wi=function(){null!=this.constructor.CSS&&M(this.h.Z.a(),this.constructor.CSS.Rk)};f.ro=function(){null!=this.constructor.CSS&&M(this.h.V.a(),this.constructor.CSS.Yo)};f.ye=ea;f.yg=ea;f.KI=ea;f.Oq=ea;f.ce=ea;f.Fe=ea;f.de=ea;f.Ek=ea;f.e=function(){Y.c.e.call(this);delete this.RA};v("xiv.ui.layouts.XyzvLayout.TITLE",Y.TITLE);v("xiv.ui.layouts.XyzvLayout.EventType",{});
v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",Y.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",Or);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",Y.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",Rr);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",Y.prototype.RA);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",Y.prototype.Eh);v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",Y.prototype.dy);v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",Y.prototype.SK);
v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",Y.prototype.dv);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",Y.prototype.fx);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",Y.prototype.hn);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",Y.prototype.Yy);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",Y.prototype.Xy);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",Y.prototype.Uy);v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",Y.prototype.$e);
v("xiv.ui.layouts.XyzvLayout.prototype.loop",Y.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",Y.prototype.Zd);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",Y.prototype.Vf);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",Y.prototype.Wi);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",Y.prototype.ro);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",Y.prototype.ye);
v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",Y.prototype.yg);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",Y.prototype.KI);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",Y.prototype.Oq);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",Y.prototype.ce);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",Y.prototype.Fe);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",Y.prototype.de);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",Y.prototype.Ek);
v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",Y.prototype.e);function Wr(){Y.call(this,["X","Y","Z"])}w(Wr,Y);v("xiv.ui.layouts.TwoDWidescreen",Wr);Wr.TITLE="TwoDWidescreen";Wr.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";Wr.CSS_SUFFIX={cg:"x",le:"y",Rk:"z"};f=Wr.prototype;f.Zd=function(){Wr.c.Zd.call(this);this.Eh("X",["RIGHT"]);G(this.h.X.L(),"resize",this.ye.bind(this));G(this.h.X.L(),"resize_end",this.j.bind(this))};f.Vf=function(){Wr.c.Vf.call(this);this.Eh("Y",["BOTTOM"]);G(this.h.Y.L(),"resize",this.yg.bind(this));G(this.h.Y.L(),"resize_end",this.j.bind(this))};
f.ye=function(){this.Oi(function(a){var b=a.width,c=Math.max(this.q.width-a.width,this.Jb);D(["Y","Z"],function(a){this.h[a].a().style.left=b+"px";this.h[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.lg()};f.yg=function(){this.Oi(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.q.height-c;this.h.Z.a().style.top=c+"px";this.h.Z.a().style.height=d+"px"}.bind(this));this.lg()};f.j=function(){Wr.c.j.call(this);this.$n();this.ce();this.de();this.Fe()};
f.$n=function(){if(this.ba.width!==this.q.width||this.ba.height!==this.q.height){var a=1-(this.ba.height-this.q.height)/this.ba.height,b=1-(this.ba.width-this.q.width)/this.ba.width;this.$e(function(c){frameSize=U(c.a());c.a().style.width=Math.max(frameSize.width*b,this.Jb).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.Lc).toString()+"px"}.bind(this))}};
f.ce=function(){var a=this.h.X;a.a().style.height=this.q.height.toString()+"px";sl(a.L().Zc(),{left:this.Jb,width:this.q.width-2*this.Jb});var b=a.L().$c("RIGHT");b.style.left=a.a().style.width;Li(b,this.q.height);a.L().update()};f.de=function(){var a=this.h.Y;a.a().style.left=this.h.X.a().style.width;sl(a.L().Zc(),{top:this.Lc,height:this.q.height-2*this.Lc});var b=a.L().$c("BOTTOM");b.style.top=a.a().style.height;Ki(b,parseInt(a.a().style.width));a.L().update()};
f.Fe=function(){var a=this.h.Z;a.a().style.left=this.h.X.a().style.width;a.a().style.top=this.h.Y.a().style.height;a.a().style.height=this.q.height-parseInt(this.h.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",Wr.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",Wr.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",Wr.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",Wr.prototype.Zd);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",Wr.prototype.Vf);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",Wr.prototype.ye);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",Wr.prototype.yg);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",Wr.prototype.j);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",Wr.prototype.ce);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",Wr.prototype.de);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",Wr.prototype.Fe);function Yr(a){Y.call(this,a)}w(Yr,Y);v("xiv.ui.layouts.SingleFrameLayout",Yr);Yr.TITLE="SingleFrameLayout";Yr.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";Yr.prototype.$n=function(){if(this.ba.width!==this.q.width||this.ba.height!==this.q.height){var a=this.ba.height*(1-(this.ba.height-this.q.height)/this.ba.height),b=this.ba.width*(1-(this.ba.width-this.q.width)/this.ba.width);this.loop(function(c){null!=c&&Ji(c.a(),Math.max(b,this.Jb),Math.max(a,this.Lc))}.bind(this))}};
Yr.prototype.j=function(){Yr.c.j.call(this);this.$n()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",Yr.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",Yr.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",Yr.prototype.j);function Zr(){Y.call(this,"V");M(this.h.V.a(),zk(Rq.kc,this.constructor.TITLE))}w(Zr,Yr);v("xiv.ui.layouts.ThreeD",Zr);Zr.TITLE="ThreeD";Zr.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",Zr.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",Zr.ID_PREFIX);function $r(){Y.call(this,"X");M(this.h.X.a(),zk(Rq.kc,this.constructor.TITLE.toLowerCase()))}w($r,Yr);v("xiv.ui.layouts.Sagittal",$r);$r.TITLE="Sagittal";$r.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",$r.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",$r.ID_PREFIX);function as(){Y.call(this)}w(as,Y);v("xiv.ui.layouts.Conventional",as);as.TITLE="Conventional";as.ID_PREFIX="xiv.ui.layouts.Conventional";as.CSS_SUFFIX={cg:"x",le:"y",Rk:"z",Yo:"v",zN:"v-boundary"};f=as.prototype;f.Zd=function(){as.c.Zd.call(this);this.Eh("X",["RIGHT","TOP_RIGHT"]);G(this.h.X.L(),"resize",this.ye.bind(this));G(this.h.X.L(),"resize_end",this.j.bind(this))};
f.Vf=function(){as.c.Vf.call(this);this.Eh("Y",["RIGHT","TOP_RIGHT"]);G(this.h.Y.L(),"resize",this.yg.bind(this));G(this.h.Y.L(),"resize_end",this.j.bind(this))};f.Wi=function(){as.c.Wi.call(this)};f.ro=function(){as.c.ro.call(this);this.Eh("V","BOTTOM");G(this.h.V.L(),"resize",this.Oq.bind(this));G(this.h.V.L(),"resize_end",this.j.bind(this))};f.Oi=function(a){this.dh();var b=U(this.h.X.a()),c=U(this.h.Y.a()),d=U(this.h.Z.a());a(b,c,d,b.width+c.width+d.width-this.q.width)};
f.ye=function(){this.Oi(function(a,b,c){b=Math.max(this.q.width-a.width-c.width,this.Jb);var d=this.q.height-a.height;wi(this.h.Y.a(),a.width,d);Ji(this.h.Y.a(),b,a.height);wi(this.h.Z.a(),a.width+b,d);Ji(this.h.Z.a(),c.width,a.height);Ji(this.h.V.a(),this.q.width,this.q.height-a.height)}.bind(this));this.lg()};
f.yg=function(){this.Oi(function(a,b){var c=this.q.height-b.height;wi(this.h.X.a(),0,c);Ji(this.h.X.a(),a.width,b.height);wi(this.h.Z.a(),a.width+b.width,c);Ji(this.h.Z.a(),this.q.width-a.width-b.width,b.height);Ji(this.h.V.a(),this.q.width,this.q.height-b.height)}.bind(this));this.lg()};f.Oq=function(){this.dh();var a=parseInt(this.h.V.a().style.height),b=this.q.height-a;C(this.h,function(c){c!==this.h.V&&sl(c.a(),{top:a,height:b})}.bind(this));this.ce();this.de();this.lg()};
f.j=function(){as.c.j.call(this);this.Ek();this.Ov();this.Pv();this.ce();this.de();this.Fe()};f.Ov=function(){var a=parseInt(this.h.V.a().style.height),b=Math.max(this.q.height-a,this.Lc);this.$e(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};f.Pv=function(){var a,b=1-(this.ba.width-this.q.width)/this.ba.width;this.ba.width!==this.q.width&&this.$e(function(c){a=U(c.a());c.a().style.width=Math.max(a.width*b,this.Jb).toString()+"px"}.bind(this))};
f.Mo=function(a){var b=this.h.V.L().zl("BOTTOM"),c=this.h[a].L().Zc(),d=yi(this.h[a].a()),e=U(this.h[a].a());wi(c,parseInt(c.style.left),this.Lc);Ji(c,this.q.width-3*this.Jb,this.q.height-2*this.Lc);c=this.h[a].L().$c("RIGHT");wi(c,d.x+e.width,d.y);Li(c,this.q.height-b.Ma.y);wi(this.h[a].L().$c("TOP_RIGHT"),d.x+e.width,d.y);this.h[a].L().update()};f.ce=function(){sl(this.h.X.L().Zc(),{left:this.Jb});this.Mo("X")};
f.de=function(){this.h.Y.a().style.left=this.h.X.a().style.width;sl(this.h.Y.L().Zc(),{left:2*this.Jb});this.Mo("Y")};f.Fe=function(){this.h.Z.a().style.left=(parseInt(this.h.X.a().style.width)+parseInt(this.h.Y.a().style.width)).toString()+"px"};
f.Ek=function(){if(this.ba.width!==this.q.width||this.ba.height!==this.q.height){var a=U(this.h.V.a());Ji(this.h.V.a(),this.q.width,Math.max(a.height*(1-(this.ba.height-this.q.height)/this.ba.height),this.Lc))}wi(this.h.V.L().Zc(),this.q.width,this.Lc);Ji(this.h.V.L().Zc(),this.q.width-3*this.Jb,this.q.height-2*this.Lc);a=this.h.V.L().$c("BOTTOM");wi(a,0,U(this.h.V.a()).height);Ki(a,this.q.width);this.h.V.L().update()};v("xiv.ui.layouts.Conventional.TITLE",as.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",as.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",as.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",as.prototype.Zd);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",as.prototype.Vf);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",as.prototype.Wi);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",as.prototype.ro);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",as.prototype.ye);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y",as.prototype.yg);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",as.prototype.Oq);v("xiv.ui.layouts.Conventional.prototype.updateStyle",as.prototype.j);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",as.prototype.ce);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",as.prototype.de);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",as.prototype.Fe);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",as.prototype.Ek);function bs(){Y.call(this,"Z");M(this.h.Z.a(),zk(Rq.kc,this.constructor.TITLE))}w(bs,Yr);v("xiv.ui.layouts.Transverse",bs);bs.TITLE="Transverse";bs.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",bs.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",bs.ID_PREFIX);function cs(){Y.call(this)}w(cs,Y);v("xiv.ui.layouts.FourUp",cs);cs.TITLE="Four-Up";cs.ID_PREFIX="xiv.ui.layouts.FourUp";cs.CSS_SUFFIX={cg:"x",le:"y",Rk:"z",Yo:"v"};f=cs.prototype;f.Zd=function(){cs.c.Zd.call(this);this.Eh("X",["RIGHT","TOP","TOP_RIGHT"]);G(this.h.X.L(),"resize",this.ye.bind(this));G(this.h.X.L(),"resize_end",this.j.bind(this))};
f.ye=function(){var a=yi(this.h.X.a()),b=U(this.h.X.a());wi(this.h.Y.a(),b.width,a.y);Ji(this.h.Y.a(),this.q.width-b.width,b.height);wi(this.h.Z.a(),0,0);Ji(this.h.Z.a(),b.width,a.y);wi(this.h.V.a(),b.width,0);Ji(this.h.V.a(),this.q.width-b.width,a.y);a=this.h.X.L().zl("RIGHT").$c();a.style.top="0px";a.style.height=this.q.height.toString()+"px";this.lg()};f.j=function(){cs.c.j.call(this);this.$n();this.Fe();this.Ek();this.ce();this.de()};
f.$n=function(){if(this.ba.width!==this.q.width||this.ba.height!==this.q.height){var a=this.ba.height*(1-(this.ba.height-this.q.height)/this.ba.height)/2,b=this.ba.width*(1-(this.ba.width-this.q.width)/this.ba.width)/2;this.loop(function(c){Ji(c.a(),Math.max(b,this.Jb),Math.max(a,this.Lc))}.bind(this))}};
f.ce=function(){this.h.X.a().style.top=this.h.Z.a().style.height;wi(this.h.X.L().Zc(),this.Jb,this.Lc);Ji(this.h.X.L().Zc(),this.q.width-2*this.Jb,this.q.height-2*this.Lc);var a=this.h.X.L().zl("TOP").$c();a.style.left="0px";a.style.width=this.q.width.toString()+"px";this.h.X.L().update();a=this.h.X.L().zl("RIGHT").$c();a.style.top="0px";a.style.height=this.q.height.toString()+"px"};f.de=function(){this.h.Y.a().style.left=this.h.Z.a().style.width;this.h.Y.a().style.top=this.h.Z.a().style.height};
f.Fe=function(){};f.Ek=function(){this.h.V.a().style.left=this.h.Z.a().style.width};f.e=function(){cs.c.e.call(this)};v("xiv.ui.layouts.FourUp.TITLE",cs.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",cs.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",cs.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",cs.prototype.Zd);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",cs.prototype.ye);v("xiv.ui.layouts.FourUp.prototype.updateStyle",cs.prototype.j);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",cs.prototype.ce);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",cs.prototype.de);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",cs.prototype.Fe);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",cs.prototype.Ek);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",cs.prototype.e);function ds(){Y.call(this,["X","Y","Z"])}w(ds,Y);v("xiv.ui.layouts.TwoDRow",ds);ds.TITLE="TwoDRow";ds.ID_PREFIX="xiv.ui.layouts.TwoDRow";ds.CSS_SUFFIX={cg:"x",le:"y",Rk:"z"};f=ds.prototype;f.Zd=function(){ds.c.Zd.call(this);this.Eh("X",["RIGHT"]);G(this.h.X.L(),"resize",this.ye.bind(this));G(this.h.X.L(),"resize_end",this.j.bind(this))};f.Vf=function(){ds.c.Vf.call(this);this.Eh("Y",["RIGHT"]);G(this.h.Y.L(),"resize",this.yg.bind(this));G(this.h.Y.L(),"resize_end",this.j.bind(this))};f.Wi=function(){ds.c.Wi.call(this)};
f.Oi=function(a){this.dh();var b=U(this.h.X.a()),c=U(this.h.Y.a()),d=U(this.h.Z.a());a(b,c,d,b.width+c.width+d.width-this.q.width)};f.ye=function(){this.Oi(function(a,b,c){b=Math.max(this.q.width-a.width-c.width,this.Jb);var d=this.q.height-a.height;wi(this.h.Y.a(),a.width,d);Ji(this.h.Y.a(),b,a.height);wi(this.h.Z.a(),a.width+b,d);Ji(this.h.Z.a(),c.width,a.height)}.bind(this));this.lg()};
f.yg=function(){this.Oi(function(a,b){var c=this.q.height-b.height;wi(this.h.X.a(),0,c);Ji(this.h.X.a(),a.width,b.height);wi(this.h.Z.a(),a.width+b.width,c);Ji(this.h.Z.a(),this.q.width-a.width-b.width,b.height)}.bind(this));this.lg()};f.j=function(){ds.c.j.call(this);this.Pv();this.Ov();this.ce();this.de();this.Fe()};f.Ov=function(){var a=this.q.height.toString()+"px";this.$e(function(b){b.a().style.height=a})};
f.Pv=function(){var a,b=1-(this.ba.width-this.q.width)/this.ba.width;this.ba.width!==this.q.width&&this.$e(function(c){a=U(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.Jb).toString()+"px"}.bind(this))};f.Mo=function(a){var b=this.h[a].L().Zc(),c=yi(this.h[a].a()),d=U(this.h[a].a());wi(b,parseInt(b.style.left),this.Lc);Ji(b,this.q.width-3*this.Jb,this.q.height-2*this.Lc);b=this.h[a].L().$c("RIGHT");wi(b,c.x+d.width,c.y);Li(b,this.q.height);this.h[a].L().update()};
f.ce=function(){sl(this.h.X.L().Zc(),{left:this.Jb});this.Mo("X")};f.de=function(){this.h.Y.a().style.left=this.h.X.a().style.width;sl(this.h.Y.L().Zc(),{left:2*this.Jb});this.Mo("Y")};f.Fe=function(){this.h.Z.a().style.left=(parseInt(this.h.X.a().style.width)+parseInt(this.h.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",ds.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",ds.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",ds.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",ds.prototype.Zd);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",ds.prototype.Vf);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",ds.prototype.Wi);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",ds.prototype.ye);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",ds.prototype.yg);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",ds.prototype.j);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",ds.prototype.ce);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",ds.prototype.de);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",ds.prototype.Fe);function es(){Y.call(this,"Y");M(this.h.Y.a(),zk(Rq.kc,this.constructor.TITLE.toLowerCase()))}w(es,Yr);v("xiv.ui.layouts.Coronal",es);es.TITLE="Coronal";es.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",es.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",es.ID_PREFIX);function fs(){V.call(this);this.constructor.lw={};this.constructor.lw[cs.TITLE]=cs;this.constructor.lw[as.TITLE]=as;this.Nk={};this.Qi={};this.Kh={}}w(fs,V);v("xiv.ui.layouts.LayoutHandler",fs);fs.ID_PREFIX="xiv.ui.layouts.LayoutHandler";fs.CSS_SUFFIX={};f=fs.prototype;f.fb=null;f.wd=null;f.Rt=!1;f.hi=null;f.be=null;f.Fx=!0;f.SH=function(){return this.Rt};f.qE=function(a){this.Fx=a};f.Ky=function(){return this.fb[this.Dc]};f.Ly=function(a){return this.fb[this.Dc].st(a)};
f.Lo=function(){null!=this.wd&&this.wd.Lo()};f.tt=function(){return null!=this.wd?this.wd.hn():null};f.dG=function(a){return null!=this.wd?this.wd.Yy(a):null};f.cG=function(a){return null!=this.wd?this.wd.Uy(a):null};f.bz=function(a,b){return null!=this.wd?this.wd.Xy(a,b):null};f.hB=function(a){this.zk(a);null!=this.wd&&this.wd.Xu();this.fb[a].fx();this.wd=this.fb[a]};f.gx=function(a,b){if(void 0 in this.Nk)throw Error(a+" is an already used layout title!");b&&(this.Nk[a]=b)};
f.zk=function(a,b){if(!(a in this.Nk))throw Error("Invalid layout: "+a+"!");null==this.fb&&(this.fb={});a in this.fb||(this.fb[a]=new this.Nk[a],G(this.fb[a],"q",this.Pq.bind(this)),gs(this.fb[a]),Th(this.a(),this.fb[a].a()));this.Yq=this.Dc;this.Dc=a;this.QB(!1===b?0:500)};function hs(a){var b;C(a.fb[a.Dc].h,function(a,d){b=this.bz(d,Tq);null!=b&&null==a[is]&&(b.Mm(a.a()),a[is]=!0)}.bind(a))}f.Pq=function(){this.dispatchEvent({type:"A"})};
f.QB=function(a){a=t(a)&&0<=a?a:500;this.Yq!=this.Dc&&(this.Yq?this.Fx?js(this,a):js(this,0):(ks(this,this.Dc),ls(this,this.Dc)))};function ms(a,b,c){D(Wh(b.a()),function(a){null!=this.Qi[c]||(this.Qi[c]=[]);this.Qi[c].push(a)}.bind(a))}function ns(a){C(a.Kh,function(a){Th(this.a().parentNode,a)}.bind(a))}function os(a,b){var c=[];C(a.Kh,function(a,e){c=Lb(c,Kl(a,this.hi[e],this.be[e],b))}.bind(a));return c}
function js(a,b){var c=a.fb[a.Dc].h,d;ks(a,a.Dc);ls(a,a.Dc);null!=a.hi&&tb(a.hi);null!=a.be&&tb(a.be);a.hi={};a.be={};C(a.fb[a.Yq].h,function(a,b){d=a.a().cloneNode(!1);this.Kh[b]=d;ms(this,a,b);C(this.Qi,function(a,b){D(a,function(a){S(a);null!=this.Kh[b]&&this.Kh[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Jl(a.a(),c[b].a());this.hi[b]=k.uE;this.be[b]=k.PK}else this.hi[b]={"z-index":0},this.be[b]={opacity:0}}.bind(a));ns(a);Ll(os(a,b),a.Au.bind(a),a.Bu.bind(a),a.zu.bind(a))}
f.Au=function(){this.Cz();this.Rt=!0;this.dispatchEvent({type:"x",Gv:this.Kh})};var is=B();f=fs.prototype;f.Bu=function(){this.dispatchEvent({type:"z",Gv:this.Kh})};
f.zu=function(){var a=this.fb[this.Dc].h;C(a,function(a,c){null!=this.Qi[c]&&D(this.Qi[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.be[c]&&sl(a.a(),this.be[c])}.bind(this));this.fb[this.Dc]!==this.wd&&this.fb[this.Dc].dv(this.tt());ps(this);this.Rt=!1;ks(this,this.Dc);ls(this,this.Dc);qs(this);this.dispatchEvent({type:"y",frames:a});hs(this);this.j()};function ls(a,b){a.fb[b].a().style.opacity=1;a.fb[b].j()}
function ks(a,b){a.fb[b].a().style.visibility="visible";a.fb[b].j()}f.Cz=function(){C(this.fb,function(a){a.a().style.visibility="hidden";a.j()}.bind(this))};function ps(a){C(a.Kh,function(a){S(a);delete a})}function gs(a){C(a.h,function(a){G(a.a(),"dblclick",function(){})})}f.JI=function(a){this.tO.push(a)};f.j=function(){fs.c.j.call(this);this.fb[this.Dc].j()};
function qs(a){null!=a.hi&&(C(a.hi,function(a){tb(a)}),tb(a.be),delete a.be);null!=a.be&&(C(a.be,function(a){tb(a)}),tb(a.be),delete a.be)}f.e=function(){fs.c.e.call(this);qs(this);delete this.Kh;tb(this.Qi);delete this.Qi;delete this.wd;this.Zm(this.fb);delete this.fb;tb(this.Nk);delete this.Nk;delete this.Dc;delete this.Yq};v("xiv.ui.layouts.LayoutHandler.EventType",{PL:"x",OL:"y",QL:"z",Pr:"A"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",fs.ID_PREFIX);
v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",fs.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",is);v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",fs.prototype.SH);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",fs.prototype.qE);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",fs.prototype.Ky);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",fs.prototype.Ly);
v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",fs.prototype.Lo);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",fs.prototype.tt);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",fs.prototype.dG);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",fs.prototype.cG);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",fs.prototype.bz);v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",fs.prototype.hB);
v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",fs.prototype.gx);v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",fs.prototype.zk);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",fs.prototype.QB);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",fs.prototype.Cz);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",fs.prototype.JI);v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",fs.prototype.j);
v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",fs.prototype.e);function rs(a,b){this.x=a;this.y=b}w(rs,N);f=rs.prototype;f.clone=function(){return new rs(this.x,this.y)};f.Kf=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=N.prototype.scale;f.pb=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.Kf())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.ic=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.sl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ss(){xq.call(this);this.Uf("Display All");this.Fp=Q("div",{id:"CheckboxHodler_"+B()});M(this.Fp,ss.CSS.uC);this.Fj=new vq(!0);this.Fj.ob(this.Fp);this.xk(this.Fj);G(this.Fj,"change",this.Gc.bind(this))}w(ss,xq);v("xiv.ui.ctrl.CheckboxController",ss);ss.ID_PREFIX="xiv.ui.ctrl.CheckboxController";ss.CSS_SUFFIX={uC:"checkboxholder"};ss.prototype.df=function(a){this.t.df(a);this.Gc()};ss.prototype.Gc=function(){this.dispatchEvent({type:"p",checked:this.Fj.Li()})};
ss.prototype.e=function(){ss.c.e.call(this);S(this.Fp);delete this.Fp;H(this.Fj);this.Fj.g();delete this.Fj};v("xiv.ui.ctrl.CheckboxController.ID_PREFIX",ss.ID_PREFIX);v("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",ss.CSS_SUFFIX);v("xiv.ui.ctrl.CheckboxController.prototype.setChecked",ss.prototype.df);v("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",ss.prototype.Gc);v("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",ss.prototype.e);function ts(){V.call(this);this.Jc=Q("img",{id:"nrg.ui.Thumbnail_"+B()});Th(this.a(),this.Jc);this.De=Q("div",{id:"DisplayText_"+B()});Th(this.a(),this.De);this.rr();this.a().className=ts.kc;this.Jc.className=ts.CSS.So;this.De.className=ts.CSS.Ok;us(this,!0);this.Tn()}w(ts,V);v("nrg.ui.Thumbnail",ts);ts.ID_PREFIX="nrg.ui.Thumbnail";
ts.CSS_SUFFIX={So:"image",Ok:"text",xM:"selected",To:"mouseover",kw:"image-mouseover",vw:"text-mouseover",iw:"highlight",dj:"active",jw:"image-active",uw:"text-active",IC:"hoverclone"};f=ts.prototype;f.Ox=null;f.Vb=null;f.rq=!1;f.TF=function(){return this.Jc};f.XA=function(a,b){this.Ox=a;this.Jc.onerror=function(){this.Jc.onerror="";this.Jc.src=this.Ox;null!=b&&b()}.bind(this)};f.HG=function(){return this.De};f.xt=function(){for(var a=this.De;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
f.Ve=function(){return this.Vb=this.Vb?this.Vb:this.a()};f.tg=function(){return this.rq};f.cv=function(a){this.Jc.src=a;this.Jc.className=ts.CSS.So};f.no=function(a){this.De.innerHTML=a};f.MA=function(){this.Vb&&(this.Vb.parentNode&&(this.Vb=this.Vb.parentNode.removeChild(this.Vb)),delete this.Vb,this.Vb=null)};
f.Vm=function(a,b){this.MA();us(this,!1);this.Vb=b?b:this.a().cloneNode(!0);this.Vb.setAttribute("id","HOVERABLE_"+this.a().getAttribute("id"));this.Vb.style.visibility="hidden";M(this.Vb,ts.CSS.IC);us(this,!0);a&&a.appendChild(this.Vb);this.rr()};f.setActive=function(a,b){var c=this.a();(this.rq=a)?(b&&M(c,ts.CSS.iw),M(c,ts.CSS.dj),M(this.De,ts.CSS.uw),M(this.Jc,ts.CSS.jw)):(ph(c,ts.CSS.iw),ph(c,ts.CSS.dj),ph(this.De,ts.CSS.uw),ph(this.Jc,ts.CSS.jw))};f.j=function(a){a&&this.a()&&sl(this.a(),a)};
f.Yu=function(){var a=this.a(),b=this.Ve();if(b!==a){var c=bi(a,b),c=Fi(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;sl(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.Qq=function(){var a=this.Ve();M(a,ts.CSS.To);M(a.childNodes[1],ts.CSS.vw);M(a.childNodes[0],ts.CSS.kw);a!==this.a()&&this.Yu();this.dispatchEvent("B")};
f.Tn=function(){var a=this.Ve();a&&1<a.childNodes.length&&(ph(a,ts.CSS.To),ph(a.childNodes[1],ts.CSS.vw),ph(a.childNodes[0],ts.CSS.kw),a.style.visibility=a!==this.a()?"hidden":"visible");this.dispatchEvent("C")};function us(a,b){var c=a.Ve();b?(G(c,"mouseover",a.Qq.bind(a)),G(c,"mouseout",a.Tn.bind(a))):(Sc(c,"mouseover",a.Qq.bind(a)),Sc(c,"mouseout",a.Tn.bind(a)))}f.rr=function(){Uc(this.Ve(),"D")&&Tc("D");G(this.Ve(),"click",function(){this.dispatchEvent({type:"D"})}.bind(this))};
f.e=function(){ts.c.e.call(this);H(this);H(this.a());null!=this.Vb&&(H(this.Vb),S(this.Vb),delete this.Vb);S(this.Jc);delete this.Jc;S(this.De);delete this.De;delete this.JN;delete this.rq};v("nrg.ui.Thumbnail.EventType",{To:"B",bD:"C",nL:"D"});v("nrg.ui.Thumbnail.ID_PREFIX",ts.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",ts.CSS_SUFFIX);v("nrg.ui.Thumbnail.HOVERABLE_PREFIX","HOVERABLE_");v("nrg.ui.Thumbnail.prototype.getImage",ts.prototype.TF);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",ts.prototype.XA);
v("nrg.ui.Thumbnail.prototype.getTextElement",ts.prototype.HG);v("nrg.ui.Thumbnail.prototype.getText",ts.prototype.xt);v("nrg.ui.Thumbnail.prototype.getHoverable",ts.prototype.Ve);v("nrg.ui.Thumbnail.prototype.isActive",ts.prototype.tg);v("nrg.ui.Thumbnail.prototype.setImage",ts.prototype.cv);v("nrg.ui.Thumbnail.prototype.setText",ts.prototype.no);v("nrg.ui.Thumbnail.prototype.removeHoverable",ts.prototype.MA);v("nrg.ui.Thumbnail.prototype.createHoverable",ts.prototype.Vm);
v("nrg.ui.Thumbnail.prototype.setActive",ts.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",ts.prototype.j);v("nrg.ui.Thumbnail.prototype.repositionHoverable",ts.prototype.Yu);v("nrg.ui.Thumbnail.prototype.onMouseOver",ts.prototype.Qq);v("nrg.ui.Thumbnail.prototype.onMouseOut",ts.prototype.Tn);v("nrg.ui.Thumbnail.prototype.disposeInternal",ts.prototype.e);function vs(){V.call(this)}w(vs,V);v("nrg.ui.ScrollableContainer",vs);vs.ID_PREFIX="nrg.ui.ScrollableContainer";vs.CSS_SUFFIX={rD:"scrollarea",ka:"slider",Qh:"slider-thumb",Rh:"slider-track",Qr:"slider-thumb-hovered",uD:"slider-track-hovered"};f=vs.prototype;
f.k=function(a){vs.c.k.call(this,a);null==this.Sf&&(this.Sf=Q("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":vs.CSS.rD}),this.a().appendChild(this.Sf));this.Pa=new Fr("vertical");this.Pa.k(this.a());G(this.Pa,"v",this.Kc.bind(this));this.Pa.Mm(this.a());M(this.Pa.a(),vs.CSS.ka);M(this.Pa.wc,vs.CSS.Qh);M(this.Pa.fd,vs.CSS.Rh);this.Pa.xp(vs.CSS.Qr);this.Pa.xs(vs.CSS.uD);this.j();this.Kc()};f.Ne=function(a){this.$||this.k();Th(this.Sf,a);this.Kc()};f.a=function(){return this.l};
f.DG=function(){return this.Pa};f.zG=function(){return this.Sf};f.j=function(a){a&&sl(this.l,a)};f.Kc=function(){var a=U(this.l).height,b=U(this.Sf).height,c=[this.Pa.qa(),this.Pa.ea()],d=[0,b-a];a<b?(this.Pa.a().style.opacity=1,sl(this.Pa.wc,{height:a/b*a}),this.Pa.Zb(!0),a=this.Pa.ea()-this.Pa.H(),c=kl(a,c,d).remappedVal,sl(this.Sf,{top:-c})):(this.Pa.a().style.opacity=0,this.Pa.Zb(!1),this.Pa.D(100))};
f.e=function(){vs.c.e.call(this);null!=this.Pa&&(H(this.Pa),this.Pa.g(),delete this.Pa);null!=this.Sf&&(S(this.Sf),delete this.Sf)};v("nrg.ui.ScrollableContainer.ID_PREFIX",vs.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",vs.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",vs.prototype.k);v("nrg.ui.ScrollableContainer.prototype.addContents",vs.prototype.Ne);v("nrg.ui.ScrollableContainer.prototype.getElement",vs.prototype.a);
v("nrg.ui.ScrollableContainer.prototype.getSlider",vs.prototype.DG);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",vs.prototype.zG);v("nrg.ui.ScrollableContainer.prototype.updateStyle",vs.prototype.j);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",vs.prototype.Kc);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",vs.prototype.e);function ws(){V.call(this)}w(ws,vs);v("nrg.ui.ScrollableZippyTree",ws);ws.ID_PREFIX="nrg.ui.ScrollableZippyTree";ws.CSS_SUFFIX={ND:"zippytree"};f=ws.prototype;f.k=function(a){ws.c.k.call(this,a);this.la=new eq;M(this.la.a(),ws.CSS.ND);this.Sf.appendChild(this.la.a());this.qo();this.Pa.vB(!0,.3)};f.Ne=function(a,b){this.la.Ne(a,b);a=g(a)?a:[a];D(a,function(){}.bind(this));this.Pa.Mm(this.la.a())};f.Uj=function(){this.la.Uj()};f.Rm=function(){this.la.Rm()};f.Bb=function(a,b){this.la.Bb(a,b)};f.bH=function(){return this.la};
f.jE=function(a){this.la.Tm(a);this.Kc()};f.qo=function(){G(this.la,"n",this.Kc.bind(this));G(this.la,"d",this.Kc.bind(this));G(this.la,"e",this.Kc.bind(this));G(this.la,hm.dD,this.Kc.bind(this))};f.j=function(a){a&&sl(this.a(),a)};f.e=function(){ws.c.e.call(this);null!=this.la&&(H(this.la),this.la.g(),delete this.la)};v("nrg.ui.ScrollableZippyTree.EventType",{});v("nrg.ui.ScrollableZippyTree.ID_PREFIX",ws.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",ws.CSS_SUFFIX);
v("nrg.ui.ScrollableZippyTree.prototype.render",ws.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.addContents",ws.prototype.Ne);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",ws.prototype.Uj);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",ws.prototype.Rm);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",ws.prototype.Bb);v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",ws.prototype.bH);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",ws.prototype.jE);
v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",ws.prototype.qo);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",ws.prototype.j);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",ws.prototype.e);function xs(){$c.call(this);this.n="shaders";this.qp="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.qp=a+="}\n";this.fp="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.fp=a+="}\n"}
w(xs,$c);
var ys={hN:"vertexPosition",gN:"vertexNormal",fN:"vertexColor",jN:"vertexTexturePos",iN:"vertexScalar"},zs={lN:"view",gM:"perspective",kL:"center",dM:"objectTransform",bN:"useObjectColor",bM:"objectColor",dN:"useScalars",vM:"scalarsReplaceMode",sM:"scalarsMin",pM:"scalarsMax",tM:"scalarsMinColor",qM:"scalarsMaxColor",uM:"scalarsMinThreshold",rM:"scalarsMaxThreshold",oM:"scalarsInterpolation",hM:"pointSize",cM:"objectOpacity",aM:"normal",cN:"usePicking",eN:"useTexture",aN:"useLabelMapTexture",NL:"labelmapOpacity",
ML:"labelmapColor",NM:"textureSampler",OM:"textureSampler2",pN:"volumeLowerThreshold",wN:"volumeUpperThreshold",tN:"volumeScalarMin",rN:"volumeScalarMax",uN:"volumeScalarMinColor",sN:"volumeScalarMaxColor",yN:"volumeWindowLow",xN:"volumeWindowHigh",vN:"volumeTexture"};
function As(a){var b=Object.keys(zs);if(!Object.keys(ys).every(function(a){a=ys[a];return-1!=this.qp.search(a)||-1!=this.fp.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=zs[a];return-1!=this.qp.search(a)||-1!=this.fp.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Bs(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");$c.call(this);this.n="buffer";this.ib=a;this.Vh=b;this.Wh=c}w(Bs,$c);function Cs(a,b){this.Rs=a instanceof N?a:new N(a,b)}w(Cs,Go);Cs.prototype.Wd=function(a,b,c,d){mo(zi(a),0,a,b,this.Rs,c,null,d)};function Ds(a,b){this.RJ=4;this.Tu=b||void 0;Hj.call(this,a)}w(Ds,Hj);Ds.prototype.gv=function(a){this.Tu=a||void 0;this.ra()&&this.Wd()};Ds.prototype.Wd=function(){if(this.Tu){var a=!this.ra()&&"move_offscreen"!=this.em,b=this.a();a&&(b.style.visibility="hidden",Pi(b,!0));this.Tu.Wd(b,this.RJ,this.hO);a&&Pi(b,!1)}};function Es(a,b,c){this.bb=c||(a?Ch(Gh(a)):Ch());Ds.call(this,this.bb.p("div",{style:"position:absolute;display:none;"}));this.Xs=new N(1,1);this.Sj=new gg;a&&this.ll(a);null!=b&&this.no(b)}w(Es,Ds);var Fs=[];f=Es.prototype;f.Jd=null;f.className="goog-tooltip";f.EB=500;f.sH=0;f.G=function(){return this.bb};f.ll=function(a){a=Gh(a);this.Sj.add(a);G(a,"mouseover",this.dk,!1,this);G(a,"mouseout",this.iq,!1,this);G(a,"mousemove",this.sz,!1,this);G(a,"focus",this.bk,!1,this);G(a,"blur",this.iq,!1,this)};
f.detach=function(a){if(a)a=Gh(a),Gs(this,a),this.Sj.remove(a);else{for(var b=this.Sj.Zj(),c=0;a=b[c];c++)Gs(this,a);this.Sj.clear()}};function Gs(a,b){Sc(b,"mouseover",a.dk,!1,a);Sc(b,"mouseout",a.iq,!1,a);Sc(b,"mousemove",a.sz,!1,a);Sc(b,"focus",a.bk,!1,a);Sc(b,"blur",a.iq,!1,a)}f.no=function(a){ci(this.a(),a)};f.av=function(a){var b=this.a();b&&S(b);Es.c.av.call(this,a);a&&(b=this.bb.ha.body,b.insertBefore(a,b.lastChild))};f.xt=function(){return ii(this.a())};
f.Al=function(){return this.Xi?this.ra()?4:1:this.sn?3:this.ra()?2:0};f.ru=function(){if(!Hj.prototype.ru.call(this))return!1;if(this.anchor)for(var a,b=0;a=Fs[b];b++)ai(a.a(),this.anchor)||a.U(!1);Jb(Fs,this);a=this.a();a.className=this.className;Hs(this);G(a,"mouseover",this.zz,!1,this);G(a,"mouseout",this.yz,!1,this);Is(this);return!0};
f.xu=function(){Kb(Fs,this);for(var a=this.a(),b,c=0;b=Fs[c];c++)b.anchor&&ai(a,b.anchor)&&b.U(!1);this.BA&&Js(this.BA);Sc(a,"mouseover",this.zz,!1,this);Sc(a,"mouseout",this.yz,!1,this);this.anchor=void 0;0==this.Al()&&(this.ir=!1);Hj.prototype.xu.call(this)};f.eA=function(a,b){this.anchor==a&&this.Sj.contains(this.anchor)&&(this.ir||!this.zO?(this.U(!1),this.ra()||(this.anchor=a,this.gv(b||Ks(this,0)),this.U(!0))):this.anchor=void 0);this.Xi=void 0};
f.dI=function(a){this.sn=void 0;a==this.anchor&&(null!=this.Jd&&(this.Jd==this.a()||this.Sj.contains(this.Jd))||this.Sx&&this.Sx.Jd||this.U(!1))};function Ls(a,b){var c=qi(a.bb);a.Xs.x=b.clientX+c.x;a.Xs.y=b.clientY+c.y}f.dk=function(a){var b=Ms(this,a.target);this.Jd=b;Hs(this);b!=this.anchor&&(this.anchor=b,this.Xi||(this.Xi=Uf(ta(this.eA,this,b,void 0),this.EB)),Ns(this),Ls(this,a))};function Ms(a,b){try{for(;b&&!a.Sj.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.sz=function(a){Ls(this,a);this.ir=!0};f.bk=function(a){this.Jd=a=Ms(this,a.target);this.ir=!0;if(this.anchor!=a){this.anchor=a;var b=Ks(this,1);Hs(this);this.Xi||(this.Xi=Uf(ta(this.eA,this,a,b),this.EB));Ns(this)}};function Ks(a,b){if(0==b){var c=a.Xs.clone();return new Os(c)}return new Ps(a.Jd)}function Ns(a){if(a.anchor)for(var b,c=0;b=Fs[c];c++)ai(b.a(),a.anchor)&&(b.Sx=a,a.BA=b)}
f.iq=function(a){var b=Ms(this,a.target),c=Ms(this,a.relatedTarget);b!=c&&(b==this.Jd&&(this.Jd=null),Is(this),this.ir=!1,!this.ra()||a.relatedTarget&&ai(this.a(),a.relatedTarget)?this.anchor=void 0:Js(this))};f.zz=function(){var a=this.a();this.Jd!=a&&(Hs(this),this.Jd=a)};f.yz=function(a){var b=this.a();this.Jd!=b||a.relatedTarget&&ai(b,a.relatedTarget)||(this.Jd=null,Js(this))};function Is(a){a.Xi&&(ba.clearTimeout(a.Xi),a.Xi=void 0)}
function Js(a){2==a.Al()&&(a.sn=Uf(ta(a.dI,a,a.anchor),a.sH))}function Hs(a){a.sn&&(ba.clearTimeout(a.sn),a.sn=void 0)}f.e=function(){this.U(!1);Is(this);this.detach();this.a()&&S(this.a());this.Jd=null;delete this.bb;Es.c.e.call(this)};function Os(a,b){Cs.call(this,a,b)}w(Os,Cs);Os.prototype.Wd=function(a,b,c){b=zi(a);b=Ci(b);c=c?new th(c.top+10,c.right,c.bottom,c.left+10):new th(10,0,0,10);oo(this.Rs,a,4,c,b,9)&496&&oo(this.Rs,a,4,c,b,5)};function Ps(a){Ho.call(this,a,3)}w(Ps,Ho);
Ps.prototype.Wd=function(a,b,c){var d=new N(10,0);mo(this.element,this.Sm,a,b,d,c,9)&496&&mo(this.element,2,a,1,d,c,5)};function Qs(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!t(b)||!t(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof Yq))throw Error("Invalid interactor.");Es.call(this);this.n="caption";this.Me=a;this.tp=b;this.vp=c;this.wa=d;this.Zg=null;this.rj=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.rj=[a];Rc(d,le,this.En.bind(this));this.It()}
w(Qs,Es);Qs.prototype.It=function(){var a=ti(this.Me,"position");if("static"==a||""==a)this.Me.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.rj[0]));a.appendChild(b);b.appendChild(c);this.Zg=b;this.gv(new Cs(this.tp,this.vp));this.U(!0);this.ll(this.Me);this.a().classList.add("x-tooltip")};Qs.prototype.En=function(){this.U(!1);this.Zg&&S(this.Zg);this.a()&&S(this.a());this.Zg=null};function Rs(){ur.call(this);this.n="renderer3D";this.tm=this.wm=this.sm=this.vm=this.rm=this.um=this.ns=this.ps=null;this.Ia=[0,0,0];this.lm=[0,0,0];this.Uw=null;this.Zr=new gd;this.Gm=new gd;this.zj=new gd;this.xm=new gd;this.Vk=new gd;this.dl=new gd;this.xj=new gd;this.il=new gd;this.hb={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(Rs,ur);Rs.prototype.__defineGetter__("config",function(){return this.hb});f=Rs.prototype;
f.aK=function(){this.tm=this.wm=this.sm=this.vm=this.rm=this.um=null;this.Ia=[0,0,0]};f.yu=function(a){Rs.c.yu.call(this,a);var b=a.tp;a=a.vp;var c=this.Qu(b,a);if(c=this.get(c))if(c=c.Uk){var d=Gi(this.na),b=new Qs(this.na,d.x+b+10,d.y+a+10,this.wa);a=pj(c,null);if(b=b.a())b.innerHTML=oj(a)}};
f.ia=function(){Rs.c.ia.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Ka,this.za),this.b.clearColor(this.lm[0],this.lm[1],this.lm[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.hb.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Ka,this.za,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Ka,this.za);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.Uw=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new xs;Ss(this,a)};
function Ss(a,b){if(null==a.cc||null==a.b||null==a.aa)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof xs))throw Error("Could not add shaders.");As(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.fp);a.b.shaderSource(d,b.qp);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.ns=e;Object.keys(ys).forEach(function(a){a=ys[a];this.Zr.set(a,this.b.getAttribLocation(this.ns,a));this.b.enableVertexAttribArray(this.Zr.get(a))}.bind(a));
Object.keys(zs).forEach(function(a){a=zs[a];this.Gm.set(a,this.b.getUniformLocation(this.ns,a))}.bind(a));a.ps=b}
f.Og=function(a){Rs.c.Og.call(this,a);var b=!1;if(null!=a){this.get(a.Sc)&&(b=!0);var c=a.Sc,d=a.s,e=a.R,h=a.oc,k=a.Ja,l=a.W,n=a.Rb,m=a.md,q=a.m,p=a.Ra;if(null!=q&&null!=q.W&&q.W.A)this.Og(q);else if(null!=q&&q.A&&this.Og(q),null!=m&&null!=m.W&&m.W.A)this.wb.load(m,a);else if(null!=k&&null!=k.W&&k.W.A)this.wb.load(k,a);else{if(null!=l&&g(l))if(null!=a.Qg){if(a.Qg.Kn!=l.length||!a.A)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.wb.load(l[b],a);return}else{if(null!=l&&l.A){this.wb.load(a,a);return}if(null!=
p&&null!=p.W&&p.W.A){this.wb.load(p,a);return}}if(0<a.i.length)for(l=a.i,m=l.length,q=q=0;q<m;q++)this.Og(l[q]);if(d){for(l=0;this.kp;)l++,window.console.log("Possible thread lock avoided: "+l);this.kp=!0;m=a instanceof Ke&&a.$g instanceof Fp;b&&null!=k&&k.A&&(l=this.xj.get(c),null!=l&&this.b.isBuffer(l.ib)&&this.b.deleteBuffer(l.ib));l=null;if(null!=k)if(!b||k.A){l=a.hl;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");q=!1;
k.ci&&(q=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,q);q=this.b.createTexture();q.yH=k.sf;this.il.set(k.Sc,q);this.b.bindTexture(this.b.TEXTURE_2D,q);k.ci?(q=this.b.RGBA,k.Kw&&(q=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,q,k.ms,k.ls,0,q,this.b.UNSIGNED_BYTE,k.ci)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,q.yH);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);m?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);q=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
q);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new Bs(q,l.length,2);this.xj.set(c,l);k.A=!1}else l=this.xj.get(c);Lf(this.wb,.1);if(m)this.kp=!1,A.hd(this.n+".update"),Lf(this.wb,.9);else{if(!b||d.A||n.A){m=n.kb;k=A.o.zb(m,d.wf,d.xf,d.yf);m=A.o.zb(m,d.tf,d.uf,d.vf);if(null===this.um||k.x<this.um)this.um=k.x;if(null===this.rm||m.x>this.rm)this.rm=m.x;if(null===this.vm||k.y<this.vm)this.vm=k.y;if(null===this.sm||m.y>this.sm)this.sm=m.y;if(null===this.wm||k.z<this.wm)this.wm=
k.z;if(null===this.tm||m.z>this.tm)this.tm=m.z;this.Ia=[(this.um+this.rm)/2,(this.vm+this.sm)/2,(this.wm+this.tm)/2];n.A=!1}b&&d.A&&(n=this.zj.get(c),null!=n&&this.b.isBuffer(n.ib)&&this.b.deleteBuffer(n.ib));n=null;!b||d.A?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.Gb,this.b.STATIC_DRAW),n=new Bs(n,d.count,3),d.A=!1):n=this.zj.get(c);Lf(this.wb,.3);b&&e.A&&(k=this.zj.get(c),null!=k&&this.b.isBuffer(k.ib)&&this.b.deleteBuffer(k.ib));
k=null;!b||e.A?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.Gb,this.b.STATIC_DRAW),k=new Bs(k,e.count,3),e.A=!1):k=this.xm.get(c);Lf(this.wb,.3);b&&h&&h.A&&(e=this.Vk.get(c),null!=e&&this.b.isBuffer(e.ib)&&this.b.deleteBuffer(e.ib));e=null;if(h)if(!b||h.A){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.Gb,this.b.STATIC_DRAW);e=new Bs(e,h.count,3);h.A=!1}else e=this.Vk.get(c);Lf(this.wb,.2);b&&p&&p.A&&(h=this.dl.get(c),null!=h&&this.b.isBuffer(h.ib)&&this.b.deleteBuffer(h.ib));h=null;if(p)if(h=p.nm,!b||p.A){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new Bs(d,h.length,3);p.A=!1}else h=this.dl.get(c);Lf(this.wb,.1);b||this.gg.add(a);this.zj.set(c,
n);this.xm.set(c,k);this.Vk.set(c,e);this.xj.set(c,l);this.dl.set(c,h);this.kp=a.A=!1}}else a.A=!1}}};f.Qu=function(a,b){if(this.hb.PICKING_ENABLED){this.Cg(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.za-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.Cg=function(a,b){Rs.c.Cg.call(this,a,b);this.b.viewport(0,0,this.Ka,this.za);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.gg.Qa,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Uw):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.aa.ks,h=this.aa.J;this.b.uniformMatrix4fv(this.Gm.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.Gm.get("view"),!1,h);e=this.Ia;this.b.uniform3f(this.Gm.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.pd.length;for(e=0;e<h;++e){var k=this.pd[e];if(k instanceof J){var l=A.o.zb(this.aa.J,k.ma[0]+k.d[0].v[0],k.ma[1]+k.d[0].v[1],k.ma[2]+k.d[0].v[2]),n=A.o.zb(this.aa.J,k.ma[0]-k.d[0].v[0],k.ma[1]-k.d[0].v[1],k.ma[2]-k.d[0].v[2]),m=Math.abs(l.z-n.z),l=A.o.zb(this.aa.J,k.ma[0]+k.d[1].v[0],k.ma[1]+k.d[1].v[1],k.ma[2]+k.d[1].v[2]),n=A.o.zb(this.aa.J,k.ma[0]-k.d[1].v[0],k.ma[1]-k.d[1].v[1],k.ma[2]+-k.d[1].v[2]),q=Math.abs(l.z-n.z),l=A.o.zb(this.aa.J,k.ma[0]+k.d[2].v[0],k.ma[1]+k.d[2].v[1],k.ma[2]+
k.d[2].v[2]),n=A.o.zb(this.aa.J,k.ma[0]-k.d[2].v[0],k.ma[1]-k.d[2].v[1],k.ma[2]-k.d[2].v[2]),l=Math.max(m,q,Math.abs(l.z-n.z));l==m?Ep(k,0):l==q?Ep(k,1):Ep(k,2)}}if(this.hb.ORDERING_ENABLED){m=!1;h=this.pd;k=h.length-1;do if(e=h[k],e instanceof J&&e.oe&&-1!=e.qb){var m=e.i[e.qb].i,q=e.qb,l=A.o.zb(this.aa.J,e.ma[0]+e.d[q].Fa[0],e.ma[1]+e.d[q].Fa[1],e.ma[2]+e.d[q].Fa[2]),n=A.o.zb(this.aa.J,e.ma[0]-e.d[q].Fa[0],e.ma[1]-e.d[q].Fa[1],e.ma[2]-e.d[q].Fa[2]),l=l.z-n.z,n=Math.max(e.Sk[e.qb],Math.max(e.Sk[e.qb+
4],e.Sk[e.qb+8])),p=Math.min(e.Sk[e.qb],Math.min(e.Sk[e.qb+4],e.Sk[e.qb+8]));if(0>l*(n+p))for(l=l=0;l<e.Bm[q]-1;l++)m[l]&&(m[l].yc=e.yc,m[l].Rc=e.d[q].fl*l);else for(l=e.Bm[q]-1;0<=l;l--)m[l]&&(m[l].yc=e.yc,m[l].Rc=(e.Bm[q]-1)*e.d[q].fl-e.d[q].fl*l);m=!0}while(k--);h=this.gg.Qa;k=h.length-1;do e=h[k],!e.ab||1==e.yc||e instanceof Ke||(m=e,q=e.s.cp,e=A.o.zb(e.Rb.kb,q[0],q[1],q[2]),e=A.o.zb(this.aa.J,e.x,e.y,e.z),e=A.K.et(this.aa.tj,e),e=Math.round(1E3*e)/1E3,m.Rc=e,m=!0);while(k--);m&&this.gg.sort()}if(h=
!a&&null!=b&&b&&this.hb.STATISTICS_ENABLED)var s=0,u=0,z=0,y=0;var e=this.Zr,k=e.get("vertexPosition"),m=e.get("vertexNormal"),q=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.Gm,p=e.get("usePicking"),I=e.get("useObjectColor"),R=e.get("objectColor"),O=e.get("useScalars"),F=e.get("scalarsReplaceMode"),P=e.get("scalarsMin"),W=e.get("scalarsMax"),T=e.get("scalarsMinColor"),ua=e.get("scalarsMaxColor"),la=e.get("scalarsInterpolation"),wa=e.get("scalarsMinThreshold"),Ma=
e.get("scalarsMaxThreshold"),Ga=e.get("objectOpacity"),Na=e.get("labelmapOpacity"),ja=e.get("labelmapColor"),xa=e.get("useTexture"),qa=e.get("useLabelMapTexture"),Bc=e.get("textureSampler"),re=e.get("textureSampler2"),se=e.get("volumeLowerThreshold"),te=e.get("volumeUpperThreshold"),Ud=e.get("volumeScalarMin"),Eh=e.get("volumeScalarMax"),uv=e.get("volumeWindowLow"),vv=e.get("volumeWindowHigh"),wv=e.get("volumeScalarMinColor"),xv=e.get("volumeScalarMaxColor"),Xr=e.get("volumeTexture"),yv=e.get("objectTransform"),
zv=e.get("pointSize"),e=d;do{var Oa=c[d-e];if(Oa){var gb=null;Oa instanceof Ke&&Oa.$g&&(gb=Oa.$g);if(Oa.ab&&(!gb||gb.ab)&&(!a||Oa.ym)){var zc=Oa.Sc,Md=Oa.qm,jd=this.zj.get(zc),je=this.xm.get(zc),Vm=this.Vk.get(zc),hf=this.dl.get(zc),Wm=this.xj.get(zc);this.b.bindBuffer(this.b.ARRAY_BUFFER,jd.ib);this.b.vertexAttribPointer(k,jd.Wh,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,je.ib);this.b.vertexAttribPointer(m,je.Wh,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(p,!0):this.b.uniform1i(p,!1);
!Vm||a||Md?(je=1,Md&&!a&&(je=0),this.b.uniform1i(I,je),je=Oa.ya,a&&(je=[Math.floor(zc%65025%255)/255,Math.floor(zc%65025/255)/255,Math.floor(zc/65025)/255]),this.b.uniform3f(R,parseFloat(je[0]),parseFloat(je[1]),parseFloat(je[2])),this.b.vertexAttribPointer(q,jd.Wh,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(I,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,Vm.ib),this.b.vertexAttribPointer(q,Vm.Wh,this.b.FLOAT,!1,0,0));!hf||a||Md?(this.b.uniform1i(O,!1),this.b.vertexAttribPointer(n,jd.Wh,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(O,!0),this.b.uniform1i(F,Oa.Ra.Xw),zc=Oa.Ra.Zh,Md=Oa.Ra.Xh,this.b.uniform3f(T,parseFloat(zc[0]),parseFloat(zc[1]),parseFloat(zc[2])),this.b.uniform3f(ua,parseFloat(Md[0]),parseFloat(Md[1]),parseFloat(Md[2])),this.b.uniform1f(wa,parseFloat(Oa.Ra.jb)),this.b.uniform1f(Ma,parseFloat(Oa.Ra.lb)),this.b.uniform1f(P,parseFloat(Oa.Ra.Gd)),this.b.uniform1f(W,parseFloat(Oa.Ra.Fb)),this.b.uniform1i(la,parseInt(Oa.Ra.as,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,hf.ib),this.b.vertexAttribPointer(n,
hf.Wh,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ga,parseFloat(Oa.yc));Oa.Ja&&Wm&&!a?(this.b.uniform1i(xa,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.il.get(Oa.Ja.Sc)),this.b.uniform1i(Bc,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,Wm.ib),this.b.vertexAttribPointer(l,Wm.Wh,this.b.FLOAT,!1,0,0),this.b.uniform1i(Xr,!1)):(this.b.uniform1i(xa,!1),this.b.vertexAttribPointer(l,jd.Wh,this.b.FLOAT,!1,0,0));gb&&(this.b.uniform1i(Xr,!0),this.b.uniform1f(se,gb.jb),this.b.uniform1f(te,
gb.lb),this.b.uniform1f(Ud,gb.Gd),this.b.uniform1f(Eh,gb.Fb),zc=gb.Zh,Md=gb.Xh,this.b.uniform3f(wv,parseFloat(zc[0]),parseFloat(zc[1]),parseFloat(zc[2])),this.b.uniform3f(xv,parseFloat(Md[0]),parseFloat(Md[1]),parseFloat(Md[2])),this.b.uniform1f(uv,gb.yb),this.b.uniform1f(vv,gb.xb),hf=gb.m,this.b.uniform1i(qa,!1),gb.oe?this.b.uniform1f(Ga,parseFloat(gb.yc)):hf&&hf.ab&&(gb=Oa.m.Sc,this.b.uniform1i(qa,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.il.get(gb)),this.b.uniform1i(re,
1),this.b.uniform1f(Na,hf.yc),this.b.uniform4fv(ja,hf.rs)));this.b.uniformMatrix4fv(yv,!1,Oa.Rb.kb);gb=1;"POINTS"==Oa.qd&&(gb=Oa.zm);this.b.uniform1f(zv,gb);gb=-1;Oa.qd==Rd?(gb=this.b.TRIANGLES,h&&(u+=jd.Vh/3)):"LINES"==Oa.qd?(this.b.lineWidth(Oa.bl),gb=this.b.LINES,h&&(z+=jd.Vh/2)):"POINTS"==Oa.qd?(gb=this.b.POINTS,h&&(y+=jd.Vh)):"TRIANGLE_STRIPS"==Oa.qd?(gb=this.b.TRIANGLE_STRIP,h&&(u+=jd.Vh/3)):"POLYGONS"==Oa.qd&&(gb=0==jd.Vh%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(u+=jd.Vh/3));h&&(s+=jd.Vh);
this.b.drawArrays(gb,0,jd.Vh)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+s+" | "),c+="Triangles: "+Math.round(u)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.il.oh(),window.console.log(c))}};
f.remove=function(a){Rs.c.remove.call(this,a);if(0<a.i.length)for(var b=a.i,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.Sc;c=this.xj.get(b);null!=c&&this.b.isBuffer(c.ib)&&this.b.deleteBuffer(c.ib);a.Ja&&(c=this.il.get(a.Ja.Sc))&&(this.b.deleteTexture(c),this.il.remove(a.Ja.Sc));c=this.zj.get(b);null!=c&&this.b.isBuffer(c.ib)&&this.b.deleteBuffer(c.ib);c=this.xm.get(b);null!=c&&this.b.isBuffer(c.ib)&&this.b.deleteBuffer(c.ib);c=this.Vk.get(b);null!=c&&this.b.isBuffer(c.ib)&&this.b.deleteBuffer(c.ib);
c=this.dl.get(b);null!=c&&this.b.isBuffer(c.ib)&&this.b.deleteBuffer(c.ib);this.zj.remove(b);this.xm.remove(b);this.Vk.remove(b);this.xj.remove(b);this.dl.remove(b);this.gg.remove(a);return!0};f.Re=function(){this.ps=null;delete this.ps;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);Rs.c.Re.call(this)};Rs.prototype.__defineGetter__("bgColor",function(){return this.lm});Rs.prototype.__defineSetter__("bgColor",function(a){this.lm=a});
Rs.prototype.PJ=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.Qu(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=mr(this.aa,a/this.Ka*2-1,(this.za-b)/this.za*2-1,0);a=mr(this.aa,a/this.Ka*2-1,(this.za-b)/this.za*2-1,1);h[0]+=this.Ia[0];h[1]+=this.Ia[1];h[2]+=this.Ia[2];a[0]+=this.Ia[0];a[1]+=this.Ia[1];a[2]+=this.Ia[2];b=[e.s.wf,e.s.xf,e.s.yf];var k=[e.s.tf,e.s.xf,e.s.yf],l=[e.s.tf,e.s.uf,e.s.yf],n=[e.s.wf,e.s.uf,e.s.yf],m=[e.s.wf,e.s.uf,e.s.vf],q=[e.s.wf,e.s.xf,
e.s.vf],p=[e.s.tf,e.s.uf,e.s.vf],s=[e.s.tf,e.s.xf,e.s.vf];b=[A.o.zb(e.Rb.kb,b[0],b[1],b[2]),A.o.zb(e.Rb.kb,k[0],k[1],k[2]),A.o.zb(e.Rb.kb,l[0],l[1],l[2]),A.o.zb(e.Rb.kb,n[0],n[1],n[2]),A.o.zb(e.Rb.kb,m[0],m[1],m[2]),A.o.zb(e.Rb.kb,q[0],q[1],q[2]),A.o.zb(e.Rb.kb,p[0],p[1],p[2]),A.o.zb(e.Rb.kb,s[0],s[1],s[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],u;for(u in b)u=b[u],k=[Math.min(k[0],u.x),Math.max(k[1],u.x),Math.min(k[2],u.y),Math.max(k[3],u.y),Math.min(k[4],u.z),Math.max(k[5],
u.z)];u=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),m=(n+1)%3,q=(n+2)%3,s=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(u[l]-h[n]);Infinity!=y&&-Infinity!=y&&(p=h[m]+a[m]*y,y=h[q]+a[q]*y,p>=u[s]&&p<=u[s+1]&&y>=u[z]&&y<=u[z+1]?(s=[],s[n]=u[l],s[m]=p,s[q]=y,b.push(s)):(s=[],s[n]=u[l],s[m]=p,s[q]=y,k.push(s)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(u=0;2>u;u++)b=a[u],k[u]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=u=null;k[0]<k[1]?(u=a[0],b=a[1]):
(u=a[1],b=a[0]);h=Math.sqrt((u[0]-b[0])*(u[0]-b[0])+(u[1]-b[1])*(u[1]-b[1])+(u[2]-b[2])*(u[2]-b[2]));h/=c;a=u;u=[b[0]-u[0],b[1]-u[1],b[2]-u[2]];b=Math.sqrt(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]);k=[u[0]/b,u[1]/b,u[2]/b];l=e.s.Gb;n=l.length;for(u=0;u<h;u+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(m=l[b],q=l[b+1],p=l[b+2],s=new A.K(m,q,p),s=A.o.zb(e.Rb.kb,m,q,p),Math.sqrt((a[0]-s.x)*(a[0]-s.x)+(a[1]-s.y)*(a[1]-s.y)+(a[2]-s.z)*(a[2]-s.z))<=d)return[s.x,s.y,s.z];return null};
v("X.renderer3D",Rs);v("X.renderer3D.prototype.init",Rs.prototype.ia);v("X.renderer3D.prototype.add",Rs.prototype.add);v("X.renderer3D.prototype.onShowtime",Rs.prototype.zA);v("X.renderer3D.prototype.onRender",Rs.prototype.xA);v("X.renderer3D.prototype.get",Rs.prototype.get);v("X.renderer3D.prototype.render",Rs.prototype.k);v("X.renderer3D.prototype.destroy",Rs.prototype.Re);v("X.renderer3D.prototype.remove",Rs.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",Rs.prototype.aK);
v("X.renderer3D.prototype.resetViewAndRender",Rs.prototype.Yn);v("X.renderer3D.prototype.pick",Rs.prototype.Qu);v("X.renderer3D.prototype.pick3d",Rs.prototype.PJ);function Ts(){Rs.call(this)}w(Ts,Rs);v("xiv.vis.XtkRenderer3D",Ts);Ts.prototype.Nf=function(){this.pk()};Ts.prototype.ok=function(a){Ts.c.ok.call(this,a);this.dispatchEvent({type:"s",value:a.yj})};Ts.prototype.k=function(){this.cc&&this.b?(Ts.c.k.call(this),this.dispatchEvent({type:"t"})):(this.hb.PROGRESSBAR_ENABLED=!1,this.ia())};Ts.prototype.remove=function(a){null!=a&&Ts.c.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",Ts.prototype.Nf);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",Ts.prototype.ok);v("xiv.vis.XtkRenderer3D.prototype.render",Ts.prototype.k);v("xiv.vis.XtkRenderer3D.prototype.remove",Ts.prototype.remove);function Us(){Yc.call(this);this.Jk=[]}w(Us,Yc);v("xiv.vis.XtkPlane",Us);var Vs=[-300,300,300];f=Us.prototype;f.Ml=!0;f.Qk=null;f.orientation=null;f.Xn=null;f.va=null;f.mi=null;f.Ga=function(){return this.va};f.Ib=function(){return this.orientation};f.kr=function(a){null!=this.va&&(null!=a?(this.Ep=a,this.va.camera.focus=a.focus,this.va.camera.position=a.position,this.va.camera.up=a.Mv,a instanceof cr&&(this.va.camera.view=a.view)):this.va.camera.position=Vs)};
f.jr=function(a){this.mi.style.background=null!=a?r(a)?a:null!=a.Lx?"-webkit-linear-gradient(top, "+a.Lx+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.CF=function(){return this.Lp};f.zF=function(){return this.mi};f.yk=function(a){this.mi=a;null!=this.va||this.ia(a);this.va.container=a};f.Iu=function(a){this.dispatchEvent(a)};
f.ia=function(a){null!=this.va&&(H(this.va),this.va.Re(),this.va=null);if(null==this.Qk)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.va=new this.Qk;this.va.orientation=this.orientation;this.yk(a||this.mi||document.body);this.va.ia();G(this.va,"s",function(a){this.dispatchEvent({type:"s",value:a.value})}.bind(this));G(this.va,"E",this.Iu.bind(this))};f.add=function(a){this.Ml&&(!0==a.isSelectedVolume&&(this.Lp=a),this.Jk.push(a),this.va.add(a))};f.isEnabled=function(){return this.Ml};
function Ws(a){null!=a.lf&&(S(a.lf),delete a.lf)}function Xs(a){a.lf=Q("div",{id:"DisabledOverlay_"+B()});a.lf.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=Q("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.lf.appendChild(c);a.mi.appendChild(a.lf)}
f.Zb=function(a){(this.Ml=!1!==a)?Al(this.lf,200,function(){this.lf.style.visibility="hidden";Ws(this)}.bind(this)):(null!=this.lf||Xs(this),this.lf.style.visibility="visible",xl(this.lf,200,function(){}.bind(this)))};f.restore=function(){this.ia();Ys(this);null!=this.Ep&&this.kr(this.Ep);null!=this.Pe&&this.jr(this.Pe);this.k()};f.YJ=function(){D(this.Jk,function(a){null!=a&&this.va.remove(a)}.bind(this))};function Ys(a){D(a.Jk,function(a){this.va.add(a)}.bind(a))}f.k=function(){this.Ml&&this.va.k()};
f.j=function(){null!=this.va&&this.va.Nf()};f.g=function(){Us.c.g.call(this);null!=this.va&&(this.va.Re(),delete this.va);Ws(this);null!=this.Pe&&delete this.Pe;null!=this.Ep&&delete this.Ep;null!=this.Xn&&(null!=this.Xn.g&&(this.Xn.stop(),this.Xn.g()),delete this.Xn);delete this.Ml;delete this.Qk;delete this.mi;delete this.orientation;delete this.Jk;delete this.Lp;delete this.xO};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",Vs);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",Us.prototype.Qk);v("xiv.vis.XtkPlane.prototype.orientation",Us.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",Us.prototype.va);v("xiv.vis.XtkPlane.prototype.container",Us.prototype.mi);v("xiv.vis.XtkPlane.prototype.getRenderer",Us.prototype.Ga);v("xiv.vis.XtkPlane.prototype.getOrientation",Us.prototype.Ib);v("xiv.vis.XtkPlane.prototype.setCamera",Us.prototype.kr);v("xiv.vis.XtkPlane.prototype.setBackground",Us.prototype.jr);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",Us.prototype.CF);v("xiv.vis.XtkPlane.prototype.getContainer",Us.prototype.zF);v("xiv.vis.XtkPlane.prototype.setContainer",Us.prototype.yk);v("xiv.vis.XtkPlane.prototype.init",Us.prototype.ia);v("xiv.vis.XtkPlane.prototype.add",Us.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",Us.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",Us.prototype.Zb);v("xiv.vis.XtkPlane.prototype.restore",Us.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",Us.prototype.YJ);v("xiv.vis.XtkPlane.prototype.render",Us.prototype.k);v("xiv.vis.XtkPlane.prototype.updateStyle",Us.prototype.j);v("xiv.vis.XtkPlane.prototype.dispose",Us.prototype.g);function Zs(){Us.call(this);this.orientation="V";this.Qk=Ts}w(Zs,Us);v("xiv.vis.XtkPlane3D",Zs);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function $s(a){Us.call(this);this.orientation=a;this.Qk=Ar;this.Lp=null}w($s,Us);v("xiv.vis.XtkPlane2D",$s);f=$s.prototype;f.hz=function(){return this.va.hz()};f.iz=function(){return this.va.iz()};f.Bl=function(){return null!=this.va?this.va.Bl():null};f.yk=function(a){$s.c.yk.call(this,a)};f.g=function(){$s.c.g.call(this);delete this.Lp;delete this.cO;delete this.dO};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",$s.prototype.hz);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",$s.prototype.iz);v("xiv.vis.XtkPlane2D.prototype.getVolume",$s.prototype.Bl);v("xiv.vis.XtkPlane2D.prototype.setContainer",$s.prototype.yk);v("xiv.vis.XtkPlane2D.prototype.dispose",$s.prototype.g);function at(){xq.call(this);this.xk(Q("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));M(this.t,at.CSS.kD);G(this.t,"change",this.Gc.bind(this))}w(at,xq);v("xiv.ui.ctrl.RadioButtonController",at);at.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";at.CSS_SUFFIX={kD:"radiobutton"};at.prototype.Gc=function(){this.dispatchEvent({type:"p",checked:this.t.checked})};at.prototype.e=function(){at.c.e.call(this)};v("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",at.ID_PREFIX);
v("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",at.CSS_SUFFIX);v("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",at.prototype.Gc);v("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",at.prototype.e);function bt(){xq.call(this);this.Jk=[]}w(bt,xq);v("xiv.ui.ctrl.MasterController2D",bt);bt.ID_PREFIX="xiv.ui.ctrl.MasterController2D";bt.CSS_SUFFIX={};bt.prototype.add=function(){};bt.prototype.e=function(){bt.c.e.call(this);Ib(this.Jk);delete this.Jk};v("xiv.ui.ctrl.MasterController2D.ID_PREFIX",bt.ID_PREFIX);v("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",bt.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController2D.prototype.add",bt.prototype.add);v("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",bt.prototype.e);function ct(){xq.call(this);this.Uf("Master Opacity")}w(ct,xq);v("xiv.ui.ctrl.SliderController",ct);ct.ID_PREFIX="xiv.ui.ctrl.SliderController";ct.CSS_SUFFIX={ka:"slider",Qh:"slider-thumb",Xo:"slider-thumb-hover",Rh:"slider-track",tw:"slider-track-hover",Vr:"value-input"};f=ct.prototype;f.Sv=2;f.po=function(a){this.Sv=a};f.k=function(a){ct.c.k.call(this,a);this.Vs();this.Ws()};
f.Vs=function(){var a=new Fr;this.xk(a);a.Yd(0);a.cd(1);a.Gg(.01);a.D(1);M(a.a(),ct.CSS.ka);M(a.wc,ct.CSS.Qh);M(a.fd,ct.CSS.Rh);a.xp(ct.CSS.Xo);a.xs(ct.CSS.tw);G(this.t,"change",this.Gc.bind(this))};f.Ws=function(){this.da=Q("input");this.da.type="number";M(this.da,ct.CSS.Vr);Th(this.a(),this.da);G(this.da,"input",this.Lu.bind(this));this.update()};f.Lu=function(){window.console.log("on value input");var a=this.t,b=parseFloat(this.da.value),b=fd(b,a.qa(),a.ea());this.da.value=b;a.D(b)};f.QG=function(){return this.da};
f.Gc=function(){var a=this.t,b=a.H().toFixed(this.Sv),c=parseInt(this.da.value);this.da.value=b;this.dispatchEvent({type:"p",value:b,du:a.qa(),cu:a.ea(),DA:c})};f.update=function(){var a=this.t,b=a.H();a.j();a.D(0);a.D(b);a.ph()!==this.da.step&&(this.da.step=a.ph());a.qa()!==this.da.min&&(this.da.min=a.qa());a.ea()!==this.da.max&&(this.da.max=a.ea());a.H()!==this.da.value&&(this.da.value=b)};f.e=function(){ct.c.e.call(this);delete this.Sv;null!=this.da&&(H(this.da),S(this.da),delete this.da)};
v("xiv.ui.ctrl.SliderController.ID_PREFIX",ct.ID_PREFIX);v("xiv.ui.ctrl.SliderController.CSS_SUFFIX",ct.CSS_SUFFIX);v("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",ct.prototype.po);v("xiv.ui.ctrl.SliderController.prototype.render",ct.prototype.k);v("xiv.ui.ctrl.SliderController.prototype.getValueInput",ct.prototype.QG);v("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",ct.prototype.Gc);v("xiv.ui.ctrl.SliderController.prototype.update",ct.prototype.update);
v("xiv.ui.ctrl.SliderController.prototype.disposeInternal",ct.prototype.e);function dt(){xq.call(this);this.Uf("TwoThumb");this.Vs();this.Ws();this.Nd=Q("input");this.Nd.type="number";M(this.Nd,dt.CSS.EC);Th(this.a(),this.Nd);G(this.Nd,"input",this.DI.bind(this));et(this)}w(dt,xq);v("xiv.ui.ctrl.TwoThumbSliderController",dt);dt.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";dt.CSS_SUFFIX={ka:"slider",Qh:"slider-thumb",sD:"slider-thumb-extent",tD:"slider-thumb-value",Xo:"slider-thumb-hover",Rh:"slider-track",tw:"slider-track-hover",Vr:"value-input",EC:"extent-input"};
f=dt.prototype;f.Vs=function(){this.ca=new cq;this.ca.p();var a=this.ca.a();a.setAttribute("id","ThresholdSlider_"+B());M(a,dt.CSS.ka);var b=Q("div",{id:"ThwoThumbSlider_track_"+B(),"class":dt.CSS.Rh});a.appendChild(b);this.xk(this.ca);M(this.ca.fa,dt.CSS.Qh);M(this.ca.fa,dt.CSS.tD);ul(this.ca.fa,dt.CSS.Xo);M(this.ca.gc,dt.CSS.Qh);M(this.ca.gc,dt.CSS.sD);ul(this.ca.gc,dt.CSS.Xo);G(this.ca,"change",this.Gc.bind(this))};
f.update=function(){var a=U(this.ca.fa).width,b=this.ca.ea()-this.ca.qa(),c=U(this.ca.a()).width-a,a=c*((this.ca.H()-this.ca.qa())/b),b=c*(this.ca.Ue()/b);this.ca.fa.style.left=a.toString()+"px";this.ca.gc.style.left=b.toString()+"px";ft(this);et(this)};function ft(a){a.da.step=1;a.da.min=a.ca.qa();a.da.max=a.ca.ea();a.da.value=a.ca.H()}function et(a){a.Nd.step=1;a.Nd.min=a.ca.qa();a.Nd.max=a.ca.ea();a.Nd.value=a.ca.Ue()+a.ca.H()}
f.Ws=function(){this.da=Q("input");this.da.type="number";M(this.da,dt.CSS.Vr);Th(this.a(),this.da);G(this.da,"input",this.Lu.bind(this));ft(this)};f.Lu=function(a){window.console.log(a,this.da);this.ca.D(parseInt(this.da.value))};f.DI=function(){this.ca.Ti(parseInt(this.Nd.value)-this.ca.H())};f.Gc=function(){var a=this.ca.H(),b=this.ca.Ue()+a;this.da.value=a;this.Nd.value=b;this.dispatchEvent({type:"p",lower:a,upper:b})};
f.e=function(){dt.c.e.call(this);null!=this.ca&&(H(this.ca),null==this.ca.Ba&&(this.ca.Ba=new Lp),this.ca.g(),delete this.ca);null!=this.da&&(H(this.da),S(this.da),delete this.da);null!=this.Nd&&(H(this.Nd),S(this.Nd),delete this.Nd)};v("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",dt.ID_PREFIX);v("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",dt.CSS_SUFFIX);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",dt.prototype.update);
v("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",dt.prototype.Gc);v("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",dt.prototype.e);function gt(){xq.call(this);this.cj=[]}w(gt,xq);v("xiv.ui.ctrl.MasterController3D",gt);gt.ID_PREFIX="xiv.ui.ctrl.MasterController3D";gt.CSS_SUFFIX={};gt.prototype.add=function(a){this.cj.push(a);this.yx(a,ct);1==this.cj.length&&Th(document.body,this.a())};gt.prototype.e=function(){gt.c.e.call(this);Ib(this.cj);delete this.cj};v("xiv.ui.ctrl.MasterController3D.ID_PREFIX",gt.ID_PREFIX);v("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",gt.CSS_SUFFIX);
v("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{oN:"Visible",eM:"Opacity"});v("xiv.ui.ctrl.MasterController3D.prototype.add",gt.prototype.add);v("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",gt.prototype.e);function ht(){gt.call(this)}w(ht,gt);v("xiv.ui.ctrl.VolumeController3D",ht);ht.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";ht.CSS_SUFFIX={};ht.prototype.Bx=function(a){var b=this.re(ss,"Volume Rendering",function(b){a.Er=b.checked});Bq(a,b);this.ff.push(b);b.t.df(!1)};var it=B();
ht.prototype.zx=function(a){var b=this.re(dt,"Threshold",this.constructor.sO);b[it]=a;Bq(a,b);this.ff.push(b);var c=a.ik,d=a.bj;-Infinity==c&&(c=-1E3,a.ik=c);Infinity==a.bj&&(d=1E3,a.bj=d);b=b.t;b.Yd(c);b.cd(d);Zp(b,d-c);b.D(c);b.Gg(10);b.Ti(d-c);a.bj=d;a.ik=c};ht.prototype.add=function(a){ht.c.add.call(this,a);this.Bx(a);this.zx(a)};ht.prototype.j=function(){ht.c.j.call(this)};v("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",ht.ID_PREFIX);v("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",1E3);
v("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",ht.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController3D.VOLUME_ID",it);v("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",ht.prototype.Bx);v("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",ht.prototype.zx);v("xiv.ui.ctrl.VolumeController3D.prototype.add",ht.prototype.add);v("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",ht.prototype.j);function jt(){xq.call(this);this.cj=[]}w(jt,xq);v("xiv.ui.ctrl.MasterController",jt);jt.ID_PREFIX="xiv.ui.ctrl.MasterController";jt.CSS_SUFFIX={};jt.prototype.add=function(a){this.cj.push(a)};jt.prototype.e=function(){jt.c.e.call(this);Ib(this.cj);delete this.cj};v("xiv.ui.ctrl.MasterController.ID_PREFIX",jt.ID_PREFIX);v("xiv.ui.ctrl.MasterController.CSS_SUFFIX",jt.CSS_SUFFIX);v("xiv.ui.ctrl.MasterController.CONTROLLERS",{});v("xiv.ui.ctrl.MasterController.prototype.add",jt.prototype.add);
v("xiv.ui.ctrl.MasterController.prototype.disposeInternal",jt.prototype.e);function kt(){jt.call(this)}w(kt,jt);v("xiv.ui.ctrl.LevelsController",kt);kt.ID_PREFIX="xiv.ui.ctrl.LevelsController";kt.CSS_SUFFIX={};f=kt.prototype;f.add=function(a){kt.c.add.call(this,a);var b=this.ux(a),c=this.xx(a),d=this.wx(a),e=this.sx(a,c,d);a=this.tx(a,c,d);D([c,d,e,a],function(a){G(a.t,"v",function(){b.update()}.bind(this))}.bind(this))};f.ux=function(a){var b=this.re(Cq,null,function(){}.bind(this));b.Vi(a);Bq(a,b);this.xg.push(b);b.update();return b};
f.xx=function(a){var b=this.re(ct,"Window Min.",function(b){a.windowLow=b.value}.bind(this));b.Vi(a);Bq(a,b);this.xg.push(b);b.t.cd(1E3);b.t.Yd(0);b.t.D(0);b.t.Gg(1);b.po(0);b.update();return b};f.wx=function(a){var b=this.re(ct,"Window Max.");b.Vi(a);G(b,"p",function(b){a.windowHigh=b.value}.bind(this));Bq(a,b);this.xg.push(b);b.t.cd(1E3);b.t.Yd(0);b.t.D(1E3);b.t.Gg(1);b.po(0);b.update();return b};
f.sx=function(a,b,c){var d=this.re(ct,"Brightness");d.Vi(a);G(d,"p",function(d){d=(d.value-d.DA)/(d.cu-d.du);var h=a.windowHigh-a.windowLow;a.windowLow=Math.round(parseInt(a.windowLow)-h*d);a.windowHigh=Math.round(parseInt(a.windowHigh)-h*d);b.t.D(a.windowLow);c.t.D(a.windowHigh)}.bind(this));Bq(a,d);this.xg.push(d);d.t.cd(150);d.t.Yd(-150);d.t.D(0);d.t.Gg(1);d.po(0);d.update();return d};
f.tx=function(a,b,c){var d=this.re(ct,"Contrast");d.Vi(a);G(d,"p",function(d){d=(d.value-d.DA)/(d.cu-d.du);var h=parseInt(a.windowHigh)-parseInt(a.windowLow),k=parseInt(a.windowHigh)-h*d;a.windowLow=Math.round(parseInt(a.windowLow)+h*d);a.windowHigh=Math.round(k);b.t.D(a.windowLow);c.t.D(a.windowHigh)}.bind(this));Bq(a,d);this.xg.push(d);d.t.cd(150);d.t.Yd(-150);d.t.D(0);d.t.Gg(1);d.po(0);d.update();return d};f.e=function(){kt.c.e.call(this)};v("xiv.ui.ctrl.LevelsController.ID_PREFIX",kt.ID_PREFIX);
v("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",kt.CSS_SUFFIX);v("xiv.ui.ctrl.LevelsController.CONTROLLERS",{jL:"Brightness",tL:"Contrast",VL:"Window Min.",UL:"Window Max.",EL:"Histogram"});v("xiv.ui.ctrl.LevelsController.LEVEL_MAX",1E3);v("xiv.ui.ctrl.LevelsController.LEVEL_MIN",0);v("xiv.ui.ctrl.LevelsController.prototype.add",kt.prototype.add);v("xiv.ui.ctrl.LevelsController.prototype.add_histogram",kt.prototype.ux);v("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",kt.prototype.xx);
v("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",kt.prototype.wx);v("xiv.ui.ctrl.LevelsController.prototype.add_brightness",kt.prototype.sx);v("xiv.ui.ctrl.LevelsController.prototype.add_contrast",kt.prototype.tx);v("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",kt.prototype.e);function lt(a){Yc.call(this);this.Lb=null;this.l=a;a=E||gc&&!nc("531")&&"TEXTAREA"==a.tagName;this.ec=new Zi(this);this.ec.r(this.l,a?["keydown","paste","cut","drop","input"]:"input",this)}w(lt,Yc);
lt.prototype.handleEvent=function(a){if("input"==a.type)E&&nc(10)&&0==a.keyCode&&0==a.charCode||(mt(this),ec&&this.l!=Fh(this.l).activeElement||this.dispatchEvent(nt(a)));else if("keydown"!=a.type||Cj(a)){var b="keydown"==a.type?this.l.value:null;E&&229==a.keyCode&&(b=null);var c=nt(a);mt(this);this.Lb=Uf(function(){this.Lb=null;this.l.value!=b&&this.dispatchEvent(c)},0,this)}};function mt(a){null!=a.Lb&&(ba.clearTimeout(a.Lb),a.Lb=null)}function nt(a){a=new Fc(a.tc);a.type="input";return a}
lt.prototype.e=function(){lt.c.e.call(this);this.ec.g();mt(this);delete this.l};function ot(a,b,c){sj.call(this,a);pt(this,b||"#f00");this.className=c||"goog-hsv-palette";this.ha=ni(this.G())}w(ot,sj);f=ot.prototype;f.or=function(a){a!=this.Gj&&(pt(this,a),qt(this),this.dispatchEvent("action"))};function pt(a,b){var c=Nk(b).Dl,d=Tk(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.Ic=[e,l,d];a.Ic[0]/=360;a.Gj=c}
function rt(a,b,c,d){if(null!=b||null!=c||null!=d)a.Ic[0]=null!=b?b:a.Ic[0],a.Ic[1]=null!=c?c:a.Ic[1],a.Ic[2]=null!=d?d:a.Ic[2],b=[360*a.Ic[0],a.Ic[1],a.Ic[2]],b=Vk(b[0],b[1],b[2]),a.Gj=b,qt(a),a.dispatchEvent("action")}f.qe=function(){return!1};
f.p=function(){var a=this.G(),b=E&&!nc("7")?" "+(this.className+"-noalpha"):"",c=a.p("DIV",this.className+"-hs-backdrop");this.Jl=a.p("DIV",this.className+"-hs-handle");this.Hi=a.p("DIV",this.className+"-hs-image",this.Jl);this.Hk=a.p("DIV",this.className+"-v-image");this.No=a.p("DIV",this.className+"-v-handle");this.xr=a.p("DIV",this.className+"-swatch");this.gk=a.p("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.p("label",null,this.gk);this.l=a.p("DIV",this.className+b,
c,this.Hi,this.Hk,this.No,this.xr,d)};f.Sa=function(){ot.c.Sa.call(this);qt(this);var a=this.Ua();a.r(this.a(),"mousedown",this.sg);this.yn||(this.yn=new lt(this.gk));a.r(this.yn,"input",this.jH)};f.e=function(){ot.c.e.call(this);delete this.Hi;delete this.Jl;delete this.Hk;delete this.No;delete this.xr;delete this.gk;this.yn&&(this.yn.g(),delete this.yn);Tc(this.iu);Tc(this.ju)};
function qt(a){if(a.$){var b=a.Ic[1],c=a.Ic[2],d=a.Hi.offsetWidth*a.Ic[0];a.we()&&(d=a.Hi.offsetWidth-d);var e=Math.ceil(a.Jl.offsetWidth/2),d=d-e,b=a.Hi.offsetHeight*(1-b),b=b-Math.ceil(a.Jl.offsetHeight/2),e=a.Jl,h=a.we();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.Hk.offsetTop-Math.floor(a.No.offsetHeight/2)+(255-c)/255*a.Hk.offsetHeight;a.No.style.top=b+"px";Oi(a.Hi,c/255);ri(a.Hk,"background-color",Vk(360*a.Ic[0],a.Ic[1],
255));ri(a.xr,"background-color",a.Gj);ri(a.xr,"color",127.5<a.Ic[2]?"#000":"#fff");var k;try{k=Nk(a.gk.value).Dl}catch(l){}a.Gj!=k&&(a.gk.value=a.Gj)}}f.sg=function(a){if(a.target==this.Hk||a.target==this.No){var b=Ni(this.Hk);this.uz(b,a);this.iu=G(this.ha,"mousemove",ta(this.uz,this,b));this.ju=G(this.ha,"mouseup",this.Hf,!1,this)}else if(a.target==this.Hi||a.target==this.Jl)b=Ni(this.Hi),this.tz(b,a),this.iu=G(this.ha,"mousemove",ta(this.tz,this,b)),this.ju=G(this.ha,"mouseup",this.Hf,!1,this)};
f.uz=function(a,b){b.preventDefault();var c=qi(this.G()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);rt(this,null,null,c)};f.tz=function(a,b){b.preventDefault();var c=qi(this.G()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;rt(this,d,c,null)};f.Hf=function(){Tc(this.iu);Tc(this.ju)};
f.jH=function(){/^#?[0-9a-f]{6}$/i.test(this.gk.value)&&this.or(this.gk.value)};function st(){xq.call(this);this.Uf("Color");this.li=Q("div",{id:this.constructor.ID_PREFIX+"_ColorSquare_"+B(),"class":st.CSS.zC});Th(this.a(),this.li);G(this.li,"click",this.DB.bind(this));this.ki=new ot;this.ki.k();G(this.ki,"action",this.Gc.bind(this));this.xk(this.ki);M(this.ki.a(),this.constructor.CSS.xC);this.jg=Q("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":st.CSS.yC});Th(document.body,this.jg);Th(this.jg,this.ki.a());this.jg.style.visibility="hidden";this.Wc=Q("div",
{id:this.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":st.CSS.Nh});Th(this.jg,this.Wc);G(this.Wc,"click",this.DB.bind(this))}w(st,xq);v("xiv.ui.ctrl.ColorPaletteController",st);st.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";st.CSS_SUFFIX={zC:"colorsquare",yC:"colorpaletteholder",xC:"colorpalette",Nh:"closebutton"};
st.prototype.DB=function(){this.jg.style.visibility="hidden"==this.jg.style.visibility?"visible":"hidden";var a=Di(this.li),b=U(this.li),c=U(this.jg),b=a.x+b.width+20,a=a.y-20,d=parseInt(window.innerHeight);a+c.height>d&&(a-=a+c.height-d);wi(this.jg,b,a)};
st.prototype.update=function(){var a=Math.floor(255*this[yq].color[0]),b=Math.floor(255*this[yq].color[1]),c=Math.floor(255*this[yq].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.t.or(Rk([a,b,c]))};st.prototype.Gc=function(a){this.li.style.backgroundColor=a.target.Gj;this.dispatchEvent({type:"p",color:Tk(a.target.Gj).map(function(a){return a/255})})};
st.prototype.e=function(){st.c.e.call(this);H(this.Wc);S(this.Wc);delete this.Wc;H(this.li);S(this.li);delete this.li;H(this.ki);this.ki.g();delete this.ki;S(this.jg);delete this.jg};v("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",st.ID_PREFIX);v("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",st.CSS_SUFFIX);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ctrl.ColorPaletteController.prototype.update",st.prototype.update);
v("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",st.prototype.Gc);v("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",st.prototype.e);function tt(){gt.call(this)}w(tt,gt);v("xiv.ui.ctrl.MeshController3D",tt);tt.ID_PREFIX="xiv.ui.ctrl.MeshController3D";tt.CSS_SUFFIX={};tt.prototype.add=function(a){tt.c.add.call(this,a);this.zs(a,ss);this.ys(a,st)};v("xiv.ui.ctrl.MeshController3D.ID_PREFIX",tt.ID_PREFIX);v("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",tt.CSS_SUFFIX);v("xiv.ui.ctrl.MeshController3D.prototype.add",tt.prototype.add);v("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",tt.prototype.e);function ut(){gt.call(this)}w(ut,gt);v("xiv.ui.ctrl.AnnotationsController3D",ut);ut.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";ut.CSS_SUFFIX={};ut.prototype.add=function(a){ut.c.add.call(this,a);this.zs(a,ss);this.ys(a,st)};v("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",ut.ID_PREFIX);v("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",ut.CSS_SUFFIX);v("xiv.ui.ctrl.AnnotationsController3D.prototype.add",ut.prototype.add);function vt(){jt.call(this)}w(vt,jt);v("xiv.ui.ctrl.VolumeController",vt);vt.ID_PREFIX="xiv.ui.ctrl.VolumeController";vt.CSS_SUFFIX={};vt.prototype.add=function(a){vt.c.add.call(this,a);this.Ax(a);this.vx(a)};vt.prototype.Ax=function(a){var b=this.re(at,"Visible",function(){});Bq(a,b);this.ff.push(b);b.Vi(a);b.t.checked=a[zr]||!1};vt.prototype.vx=function(a){var b=this.re(ss,"Show Label Map",function(b){a.RH.visible=b.checked});Bq(a,b);this.ff.push(b);b.Vi(a);b.t.df(!1)};vt.prototype.e=function(){vt.c.e.call(this)};
v("xiv.ui.ctrl.VolumeController.ID_PREFIX",vt.ID_PREFIX);v("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",vt.CSS_SUFFIX);v("xiv.ui.ctrl.VolumeController.prototype.add",vt.prototype.add);v("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",vt.prototype.Ax);v("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",vt.prototype.vx);v("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",vt.prototype.e);function wt(){V.call(this);C(xt(),function(a,b){this[b]=null})}w(wt,V);v("xiv.ui.ctrl.XtkControllerTree",wt);function yt(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.ctrl.XtkControllerTree.ControlSet",yt);wt.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";wt.CSS_SUFFIX={};function xt(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=wt.prototype;f.mw=function(){};f.pC=function(){return this.pg([this.Mh])};f.mw=function(){return this.pg([this.fj])};f.MD=function(){return this.pg([this.oj])};
f.SF=function(){};f.pg=function(a){var b=[];D(g(a)?a:[a],function(a){null!=a&&(b=Lb(b,a.Dy()))});return b};f.Ko=function(){var a=this.pg([this.fj,this.pj,this.oj,this.gj,this.Mh,this.Lr]);D(a,function(a){a.update()}.bind(this))};
f.Ss=function(a,b){a instanceof J?(null==this.pj&&(this.fj=new kt,this.pj=new vt,this.oj=new ht),this.fj.add(a,b),this.pj.add(a,b),this.oj.add(a,b)):a instanceof wq?(null==this.gj&&(this.gj=new tt),this.gj.add(a,b)):a instanceof Dp&&(null==this.Mh&&(this.Mh=new ut),this.Mh.add(a));this.volumes=new yt(null,this.pg([this.oj]),this.pg([this.pj]));this.annotations=new yt(null,this.pg([this.Mh]));this.meshes=new yt(null,this.pg([this.gj]));this.levels=new yt(null,null,this.pg([this.fj]))};
f.e=function(){wt.c.e.call(this);null!=this.fj&&(this.fj.g(),delete this.fj);null!=this.pj&&(this.pj.g(),delete this.pj);null!=this.Bw&&(this.Bw.g(),delete this.Bw);null!=this.oj&&(this.oj.g(),delete this.oj);null!=this.gj&&(this.gj.g(),delete this.gj);null!=this.Mh&&(this.Mh.g(),delete this.Mh);null!=this.Lr&&(this.Lr.g(),delete this.Lr)};v("xiv.ui.ctrl.XtkControllerTree.ControlSet",yt);v("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",wt.ID_PREFIX);v("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",wt.CSS_SUFFIX);
v("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",xt);v("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",wt.prototype.mw);v("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",wt.prototype.pC);v("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",wt.prototype.MD);v("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",wt.prototype.SF);v("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",wt.prototype.pg);v("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",wt.prototype.Ko);
v("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",wt.prototype.Ss);v("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",wt.prototype.e);function zt(){Yc.call(this);this.Je=null;this.Ec={volumes:[],meshes:[],fibers:[],spheres:[]};this.Oh=new $s("X");this.ij=new $s("Y");this.jj=new $s("Z");this.Nb=new Zs;this.bc={};this.bc[this.Oh.Ib()]=this.Oh;this.bc[this.ij.Ib()]=this.ij;this.bc[this.jj.Ib()]=this.jj;this.bc[this.Nb.Ib()]=this.Nb;this.zg=null;this.tr(this.Nb);At(this)}w(zt,yr);v("xiv.vis.XtkEngine",zt);zt.ID_PREFIX="xiv.vis.XtkEngine";zt.SLICE_TO_RAS_KEY="sliceToRAS"+B();zt.HAS_LABEL_MAP_KEY="hasLabelMap";f=zt.prototype;f.cr=!1;
f.Ny=function(){return this.Ec.volumes};f.My=function(){return this.Ec.meshes};f.Jy=function(){return this.Ec.spheres};function Bt(a,b){null!=b.ke.Km&&D(b.ke.Km,function(a){this.Ec.spheres.push(Ct(a))}.bind(a))}f.nB=function(a,b){switch(a.toLowerCase()){case "x":this.Oh.Zb(b);break;case "y":this.ij.Zb(b);break;case "z":this.jj.Zb(b);break;case "v":this.Nb.Zb(b)}};f.tr=function(a){this.zg=a;this.zg.ia();this.ZJ=G(this.zg,"s",this.Eu.bind(this))};f.uG=function(){return this.zg};f.Iu=function(a){this.dispatchEvent(a)};
function At(a){C(a.bc,function(a){G(a,"F",this.Iu.bind(this));G(a,"H",function(){}.bind(this))}.bind(a))}f.Ko=function(){this.Je.Ko()};f.BF=function(){return this.Je};
function Dt(a,b){null!=a.Je&&(a.Je.g(),a.Je=null);a.Je=new wt;null!=(b.ke&&null!=b.ke.Km)&&(Bt(a,b),D(a.Ec.spheres,function(a){this.Je.Ss(a)}.bind(a)));var c;D(b.Le,function(a){c=a.qg();if(null!=c&&(currXObj=Et(c,a.zi),renderProps=a.ke,currXObj))if(this.Je.Ss(currXObj,renderProps),currXObj instanceof J){a=currXObj;var b=renderProps;null!=b||(b={origin:[0,0,0],bj:1E4,ik:-1E4,tq:!0,Er:!1});a.origin=b.origin;a.upperThreshold=b.bj;a.lowerThreshold=b.ik;a.volumeRendering=b.Er;a[zr]=b.tq;a[zt.SLICE_TO_RAS_KEY]=
b.ov;null!=b.Qz?(a.labelmap.file=b.Qz,a.labelmap.colortable.file=b.QH,a[zt.HAS_LABEL_MAP_KEY]=!0):a[zt.HAS_LABEL_MAP_KEY]=!1;this.Ec.volumes.push(currXObj);currXObj.reslicing=!1}else currXObj instanceof wq?(a=currXObj,b=renderProps,a.color=b.color||[.5,.5,.5],a.opacity=b.opacity||1,this.Ec.meshes.push(currXObj)):currXObj instanceof dq&&(zt.AO(currXObj,renderProps),this.Ec.fibers.push(currXObj))}.bind(a))}
f.OA=function(){this.tr(this.Nb);this.Nb.ia();C(this.Ec,function(a,b){"volumes"!==b&&D(a,function(a){this.Nb.add(a)}.bind(this))}.bind(this));Rc(this.Nb.Ga(),"t",function(){this.Rq();this.Oh.k()}.bind(this));this.Nb.k()};f.NA=function(a){var b=null!=a?a:this.aq();C(this.bc,function(a,d){"v"!=d.toLowerCase()&&(a.ia(),a.add(b),a.k())})};function Ft(a){var b=a.aq();C(a.Ec.volumes,function(a){a!==b&&(a.visible=!1)})}
f.PA=function(){var a=this.aq(),b=[],c=[],d=["x","y","z","v"];C(this.Ec,function(a,d){currArr="volumes"==d?c:b;D(a,function(a){currArr.push(a)})}.bind(this));D(b,function(a){this.Nb.add(a)}.bind(this));D(c,function(b){b!==a&&(b.visible=!0,this.Nb.add(b))}.bind(this));this.zg.Ga().onShowtime=function(){Kb(d,this.zg.Ib().toLowerCase());Gt(this,a)}.bind(this);this.zg.add(a);this.zg.k()};
f.k=function(a){this.cr=!1;Dt(this,a);var b=a.ke;null!=b?(null!=b.backgroundColor&&this.Nb.jr(a.ke.backgroundColor),null!=b.Dp&&this.Nb.kr(a.ke.Dp)):(this.Nb.jr(),this.Nb.kr());if(0<this.Ec.volumes.length){a=this.bc;b="";for(b in a)if(a[b].isEnabled()){this.tr(a[b]);break}this.PA()}else this.Nb.isEnabled()&&this.OA()};function Gt(a,b){var c=nb(a.bc)-1;C(a.bc,function(a){a!=this.zg&&a.isEnabled()&&(a.add(b),Rc(a.Ga(),"t",function(){c--;0==c&&this.Rq()}.bind(this)),a.k())}.bind(a))}
f.aq=function(){if(0!=this.Ec.volumes.length){for(var a=0,b=this.Ec.volumes.length;a<b;a++){var c=this.Ec.volumes[a];if(c[zr])return c}this.Ec.volumes[0][zr]=!0;return this.Ec.volumes[0]}};f.j=function(){C(this.bc,function(a){a.j()}.bind(this))};f.Eu=function(a){this.cr||this.dispatchEvent({type:"s",value:a.value})};f.Rq=function(a){Ft(this);Tc(this.ZJ);this.cr=!0;this.dispatchEvent({type:"t",value:null!=a?a.value:1})};f.oG=function(){return this.Oh};f.pG=function(){return this.ij};f.qG=function(){return this.jj};
f.nG=function(){return this.Nb};f.$p=function(a){return this.bc[a]};f.rG=function(){return this.bc};f.g=function(){zt.c.g.call(this);null!=this.Je&&(this.Je.g(),delete this.Je);H(this.Oh);H(this.ij);H(this.jj);H(this.Nb);delete this.zg;tb(this.bc);delete this.bc;this.Oh.g();delete this.Oh;this.ij.g();delete this.ij;this.jj.g();delete this.jj;this.Nb.g();delete this.Nb;delete this.cr};
var Ht=["nrrd","nii","nii.gz","mgh","mgz"],It=["dicom","dcm","ima"],Jt=["hdr","img"],Kt=["nii","nii.gz"],Lt=["jpeg","jpg","gif","png","img"],Mt="stl vtk obj fsm inflated smoothwm pial orig".split(" "),Nt=["trk"];function Ot(a){var b=void 0;Pt(a)?b=new wq:Qt(a)||Rt(a)||St(a)?b=new J:Tt(a)&&(b=new dq);return b}function Ct(a){var b=new Dp;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function Qt(a){return-1<Ht.indexOf(a)?!0:!1}
function St(a){return-1<Lt.indexOf(a)?!0:!1}function Rt(a){return-1<It.indexOf(a)?!0:!1}function Pt(a){return-1<Mt.indexOf(a)?!0:!1}function Tt(a){return-1<Nt.indexOf(a)?!0:!1}function Et(a,b){function c(a){var b=wk(a);a=vk(a);return b+"/"+a}var d=g(a)?xk(a[0]):xk(a),d=Ot(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];D(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=pb(b),d.filedata=ob(b)):d.file=a;return d}
v("xiv.vis.XtkEngine.EventType",{BM:"F",zM:"G",AM:"H",ERROR:"I",BN:"J",RL:"K",SL:"L"});v("xiv.vis.XtkEngine.ID_PREFIX",zt.ID_PREFIX);v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",zt.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",zt.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",Qt);v("xiv.vis.XtkEngine.isImage",St);v("xiv.vis.XtkEngine.isDicom",Rt);
v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<Jt.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<Kt.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isMesh",Pt);v("xiv.vis.XtkEngine.isFiber",Tt);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",zt.prototype.My);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",zt.prototype.Jy);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",zt.prototype.Ny);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",zt.prototype.nB);
v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",zt.prototype.tr);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",zt.prototype.uG);v("xiv.vis.XtkEngine.prototype.updateControllers",zt.prototype.Ko);v("xiv.vis.XtkEngine.prototype.getControllerTree",zt.prototype.BF);v("xiv.vis.XtkEngine.prototype.render3dPlane",zt.prototype.OA);v("xiv.vis.XtkEngine.prototype.render2D",zt.prototype.NA);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",zt.prototype.PA);
v("xiv.vis.XtkEngine.prototype.render",zt.prototype.k);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",zt.prototype.aq);v("xiv.vis.XtkEngine.prototype.updateStyle",zt.prototype.j);v("xiv.vis.XtkEngine.prototype.getPlaneX",zt.prototype.oG);v("xiv.vis.XtkEngine.prototype.getPlaneY",zt.prototype.pG);v("xiv.vis.XtkEngine.prototype.getPlaneZ",zt.prototype.qG);v("xiv.vis.XtkEngine.prototype.getPlaneV",zt.prototype.nG);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",zt.prototype.$p);
v("xiv.vis.XtkEngine.prototype.getPlanes",zt.prototype.rG);v("xiv.vis.XtkEngine.prototype.dispose",zt.prototype.g);function Ut(a,b,c){Wl.call(this);this.HB=!0===a;this.GB=!0===b;this.CB=!0===c}w(Ut,Wl);v("xiv.ui.HelpDialog",Ut);Ut.ID_PREFIX="xiv.ui.HelpDialog";Ut.CSS={CC:"nrg-ui-helpdialog-dialog",Ok:"nrg-ui-helpdialog-text",qD:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",Nh:"xiv-ui-helpdialog-closebutton"};Ut.LAYOUT_IMAGE_ID=Ut.ID_PREFIX+".LayoutImage";
Ut.prototype.k=function(a){Ut.c.k.call(this,a);M(this.a(),"xiv-ui-helpdialog");this.jm=new ws;M(this.jm.a(),Ut.CSS.qD);this.jm.k(this.a());Vt(this);this.qx(Ut.CSS.TITLE);this.dx(Ut.CSS.Nh)};Ut.prototype.fB=function(a){null!=document.getElementById(Ut.LAYOUT_IMAGE_ID)&&(document.getElementById(Ut.LAYOUT_IMAGE_ID).src=a)};
function Vt(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts","<img height=15 width=15 id="+Ut.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.HB&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.GB&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.CB&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.Ce("Help");D([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';
D(a,function(a){c+="<tr>";D(a,function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}S(c);var n=Q("div");n.innerHTML=c;this.jm.Ne(n,[d])}.bind(a))}
Ut.prototype.e=function(){Ut.c.e.call(this);delete this.HB;delete this.GB;delete this.CB;null!=this.jm&&this.jm.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",Ut.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",Ut.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",Ut.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",Ut.prototype.k);v("xiv.ui.HelpDialog.prototype.setLayoutButton",Ut.prototype.fB);v("xiv.ui.HelpDialog.prototype.disposeInternal",Ut.prototype.e);function Wt(a,b,c){No.call(this,a,b||Oo.Od(),c);this.Nc(16,!0)}w(Wt,No);Bn("goog-toggle-button",function(){return new Wt(null)});function Xt(a){V.call(this);this.C={};this.N=a}w(Xt,V);v("xiv.ui.ViewBoxDialogs",Xt);Xt.ID_PREFIX="xiv.ui.ViewBoxDialogs";Xt.CSS_SUFFIX={$f:"generic-toggle",KC:"infodialog",LC:"infodialog-text",NC:"inusedialog"};var Yt="Info_"+B(),Zt="Help_"+B(),$t="InUse_"+B(),au={HL:Yt,CL:Zt,KL:$t},bu="ToggleClass_"+B();f=Xt.prototype;f.EF=function(){return this.C};f.DF=function(a){return this.C[a]};
f.Um=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.N.Mj("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.C[a].U(b);this.dispatchEvent({type:b?"M":"N",oy:this.C[a],py:a})}.bind(this),d);null!=this.C[a]&&this.C[a].g();c=new Wl;this.C[a]=c;gk(c,null!=k?k:!1);nk(c,null!=l?l:null);c.k(this.N.Cb);fk(c,0);this.C[a].fh();c.Ce(e);M(c.a(),b);G(c,"c",function(){this.N.Sl(n)}.bind(this));G(c,jk,function(){}.bind(this));!1===h&&An(this.N.zd[a])};
f.KE=function(){this.Um(au.YL,"xiv-ui-viewboxdialogs-meshes-dialog",Xt.CSS.$f,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.ME=function(){this.Um(au.qN,"xiv-ui-viewboxdialogs-volumes-dialog",Xt.CSS.$f,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.by=function(){this.C[$t]=new Wl;nk(this.C[$t],pk);this.C[$t].k(this.N.Cb);this.C[$t].Si("ViewBox in use.&nbspProceed anyway?");cu(this);du(this)};
f.eB=function(a,b){Rc(this.C[$t],ok,function(c){"yes"===c.key&&null!=a&&a(this);"no"===c.key&&null!=b&&b(this)}.bind(this))};f.so=function(){M(this.C[$t].a(),Xt.CSS.NC);gk(this.C[$t],!0);this.C[$t].U(!0);this.C[$t].fh()};f.update=function(){C(this.C,function(a){a.aC()})};f.Fo=function(a,b){var c=!1===b?0:1;window.console.log(a,this.C[a]);null!=this.C[a].a()&&yl(this.C[a].a(),200,c)};f.qt=function(){return this.C[Zt]};
function cu(a){null!=a.C[Zt]&&a.C[Zt].g();var b=new Ut(0<a.N.Ga().Ny().length,0<a.N.Ga().My().length,0<a.N.Ga().Jy().length);gk(b,!1);nk(b,null);b.k(a.N.Cb);b.U(!1);b.fh();var c=a.N.Mj("LEFT",Xt.CSS.$f,Zt,"Help",function(a){a="true"==a.getAttribute("checked");b.U(a);b.fh();this.dispatchEvent({type:a?"M":"N",oy:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");G(b,"c",function(){this.N.Sl(c)}.bind(a));a.N.Sl(c);a.C[Zt]=new Ut}
function du(a){null!=a.C[Yt]&&a.C[Yt].g();currDialog=new Wl;var b="";0<a.N.gb.length?C(a.N.gb[0].Xd,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Nl(a.N.gb[0].Ch);gk(currDialog,!1);currDialog.gi(b);nk(currDialog,null);currDialog.k(a.N.Cb);currDialog.U(!0);currDialog.Jq("left","top",0,-15);currDialog.Ce("Info. Display");currDialog.ev("xiv-ui-viewboxdialogs-infodialog-hovered");M(currDialog.a(),Xt.CSS.KC);M(currDialog.Hg[0],Xt.CSS.LC);var c=a.N.Mj("LEFT",Xt.CSS.$f,Yt,"Info. Display",function(a){a=
"true"==a.getAttribute("checked");currDialog.U(a);currDialog.Jq("left","top",0,-15);this.dispatchEvent({type:a?"M":"N",oy:currDialog})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");G(currDialog,"c",function(){this.N.Sl(c)}.bind(a));a.C[Yt]=currDialog}f.e=function(){delete this.N;null!=this.C&&(C(this.C,function(a){H(a);a.e();a.g()}.bind(this)),tb(this.C))};v("xiv.ui.ViewBoxDialogs.EventType",{wL:"M",vL:"N"});v("xiv.ui.ViewBoxDialogs.ID_PREFIX",Xt.ID_PREFIX);
v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",Xt.CSS_SUFFIX);v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",au);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",bu);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",Xt.prototype.EF);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",Xt.prototype.DF);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",Xt.prototype.Um);v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",Xt.prototype.KE);v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",Xt.prototype.ME);
v("xiv.ui.ViewBoxDialogs.prototype.createDialogs",Xt.prototype.by);v("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",Xt.prototype.eB);v("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",Xt.prototype.so);v("xiv.ui.ViewBoxDialogs.prototype.update",Xt.prototype.update);v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",Xt.prototype.Fo);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",Xt.prototype.qt);v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",Xt.prototype.e);function eu(a,b,c,d){Yc.call(this);this.N=a;this.ga=b;this.Na=c;this.C=d;this.bd={prev:null,oi:null};this.Mf={left:!1,fA:!1,right:!1};this.kk={Mv:{},$E:{},LJ:{},MJ:{}};G(this.C,"M",this.rA.bind(this));a=document.body;this.cb=new Nn;this.cb.ll(a);G(this.cb,"key",this.zh.bind(this));this.Gk=!1}w(eu,Yc);v("xiv.ui.ViewBoxInteractorHandler",eu);var fu="Crosshairs_"+B(),gu="Settings_"+B(),hu="TwoDPan_"+B(),iu="TwoDZoom_"+B(),ju={Pc:fu,yM:gu,WM:hu,XM:iu};
eu.CSS={$f:"xiv-ui-viewboxinteractorhandler-generic-toggle",bw:"xiv-ui-viewboxinteractorhandler-generic-dialog",cw:"xiv-ui-viewboxinteractorhandler-generic-zippytree",QC:"xiv-ui-viewboxinteractorhandler-levelsdialog",RC:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered"};
eu.CURSOR_CSS={OD:"xiv-ui-viewboxinteractorhandler-zoom-follower",dw:"xiv-ui-viewboxinteractorhandler-viewframe-grab",gw:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",ew:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",fw:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",Dw:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",Ew:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};var ku="Orientation_"+B();f=eu.prototype;f.cb=null;f.Ik=null;f.nb=null;f.Tv=!1;f.Pu=!1;f.rc={};
f.cy=function(){this.jy();lu(this);mu(this);this.fy();this.ay(!1);this.hy();this.iy();nu(this)};function ou(a){var b=a.N.Cb;C(eu.CURSOR_CSS,function(a){ph(b,a)})}function pu(a,b,c,d){b=b?M:ph;b(a.N.Cb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.N.Cb,d)}function qu(a){pu(a,!0,eu.CURSOR_CSS.dw,eu.CURSOR_CSS.gw);pu(a,!1,eu.CURSOR_CSS.ew,eu.CURSOR_CSS.fw)}function ru(a){pu(a,!1,eu.CURSOR_CSS.Ew);pu(a,!0,eu.CURSOR_CSS.Dw)}
f.VI=function(a){this.ol=a.target;this.bd.prev=this.bd.oi;this.bd.oi=a.iA;if(null!=this.bd.prev){if(a.BB){if(!this.iv){this.iv=!0;this.Dz();su(this);return}}else this.iv&&(this.FB(),su(this),this.Ak(),this.iv=!1);(new rs(this.bd.oi[0],this.bd.oi[1])).add(new rs(this.bd.prev[0],this.bd.prev[1]));a=this.bd.oi[0]-this.bd.prev[0];var b=this.bd.oi[1]-this.bd.prev[1];this.Gk&&(this.jf.style.visibility="hidden");this.Tv?(this.Gk&&this.Gk&&(S(this.jf),Th(this.ol.mi,this.jf),this.jf.style.visibility="visible",
this.jf.style.left=this.bd.oi[0]+20+"px",this.jf.style.top=this.bd.oi[1]+"px"),ru(this),this.Mf.left&&tu(this,a,b)):this.Pu&&(qu(this),this.Mf.left&&(pu(this,!1,eu.CURSOR_CSS.dw,eu.CURSOR_CSS.gw),pu(this,!0,eu.CURSOR_CSS.ew,eu.CURSOR_CSS.fw),this.ol.aa.Wq([-1*a,-1*b]),this.Ak()))}};f.UI=function(){ou(this);this.ol=null;this.Gk&&(this.jf.style.visibility="hidden")};f.Cu=function(a){0==a.button?this.Mf.left=!0:1==a.button?this.MK.Mf.fA=!0:2==a.button&&(this.Mf.right=!0)};
f.Du=function(a){0==a.button?this.Mf.left=!1:1==a.button?this.MK.Mf.fA=!1:2==a.button&&(this.Mf.right=!1)};
f.zh=function(a){if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,uu(this,this.ol,40==a||37==a?-1:1);else switch(a.keyCode){case 27:"true"==this.N.zt(hu).getAttribute("checked")&&this.N.uc(hu);"true"==this.N.zt(iu).getAttribute("checked")&&this.N.uc(iu);this.N.uc(hu);break;case 90:this.N.uc(iu);break;case 72:case 80:this.N.uc(hu);break;case 66:case 76:this.N.uc(this.rc.levels);break;case 86:this.N.uc(this.rc.volumes);break;case 77:this.N.uc(this.rc.meshes);break;case 65:this.N.uc(this.rc.annotations);
break;case 67:this.N.uc(fu);break;case 83:this.N.uc(this.rc[gu]);break;case 191:a.shiftKey&&this.N.uc(Zt);break;case 73:this.N.uc(Yt)}};function tu(a,b,c){ou(a);var d=function(){ru(this);this.ol.fm()}.bind(a),e=function(){pu(this,!0,eu.CURSOR_CSS.Ew);pu(this,!1,eu.CURSOR_CSS.Dw);this.ol.gm()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();vu(a);a.Ak()}f.pw=0;f.qw=0;f.NB=function(a){this.pw=a.clientX;this.qw=a.clientY;window.console.log("store mouse coords",this.pw,this.qw)};
function nu(a){wu(a,function(a,c){this.kk.MJ[c]=G(a.Ga(),"mouseover",this.VI.bind(this));var d=a.Ga().cc;this.kk.LJ[c]=G(d,"mouseout",this.UI.bind(this));this.kk.$E[c]=G(d,"mousedown",this.Cu.bind(this));this.kk.Mv[c]=G(d,"mouseup",this.Du.bind(this))}.bind(a))}function uu(a,b,c){wu(a,function(a,b,h){h.ka.D(h.ka.H()+c)}.bind(a),b.Ib())}
function wu(a,b,c){if(null!=a.ga){var d=a.Na.tt(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.Bl())};if(r(c)){var h=a.ga.$p(c);if(null==h)throw Error("Invalid plane: ",h);e(a.ga.$p(c),c)}else C(a.ga.bc,function(a,b){e(a,b)}.bind(a))}}f.iy=function(){this.N.Mj("LEFT",eu.CSS.$f,iu,"2D Zoom",function(a){ou(this);if(this.Tv=a="true"==a.getAttribute("checked").toString())this.N.Lv(hu),ru(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.N.uc(iu)};
f.hy=function(){this.N.Mj("LEFT",eu.CSS.$f,hu,"2D Pan",function(a){ou(this);if(this.Pu=a="true"==a.getAttribute("checked").toString())qu(this),this.N.Lv(iu)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.N.uc(hu)};f.ay=function(a){this.N.Mj("LEFT",eu.CSS.$f,fu,"Toggle Crosshairs",function(a){this.WB("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.N.uc(fu)};
f.fy=function(){this.rc[gu]=gu+"_"+B();this.C.Um(this.rc[gu],eu.CSS.bw,eu.CSS.$f,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.nb[gu]=new ws;this.nb[gu].k();var a=this.nb[gu].a();M(a,eu.CSS.cw);this.C.C[this.rc[gu]].a().appendChild(a);this.nb[gu].Uj();a=new ss;a.k();a.Uf("Enable 3D Rendering");a.t.df(!0);this.nb[gu].Ne(a.a(),"3D Rendering");G(a,"p",function(a){this.ga.nB("V",a.checked)}.bind(this));return a};
f.Ak=function(){wu(this,function(a,b,c,d){xu(this,b,d)}.bind(this))};
function yu(a){null!=a.ga&&(wu(a,function(a,c,d,e){var h=d.ka,k=d.Ad,l=d.qf;d=d.Pc;h[ku]=c;k[ku]=c;l[ku]=c;d[ku]=c;su(this,!0);zu(h,e);xu(this,h[ku],e);Au(this,h);null!=a.Ga()&&(G(a.Ga(),"J",function(){vu(this)}.bind(this)),G(h,"v",function(a){zu(a.target,e);xu(this,a.target[ku],e);Au(this,a.target)}.bind(this)),G(k,"input",function(a){Bu(this,a.target,e);this.Ak()}.bind(this)),G(l,"input",function(){a.Ga().zB(l.H()/100);this.Ak()}.bind(this)))}.bind(a)),a.ga.Ko())}
function Cu(a,b){var c=b.split("_")[0];a.nb[c].Kc();C(a.Ik[c],function(a){null!=a&&D(a,function(a){switch(c){case "levels":a instanceof Cq?a.update():a.t.j();break;case "volumes":var d=b.split("_")[0];a instanceof at?(a.t.checked=a.ad()[zr]||!1,null==this.Fr&&(this.Fr=[]),-1==this.Fr.indexOf(a)&&this.Fr.push(a)):"Show Label Map"==a.sb.innerHTML&&(a.ad()[zt.HAS_LABEL_MAP_KEY]?a.ad().RH.visible&&!a.t.Li()&&a.t.df(!0):(S(a.a()),a.a().style.visibility="hidden",a.a().style.height="0px"),this.nb[d].Kc());
a.update()}}.bind(this))}.bind(a))}f.rA=function(a,b){null==a.py&&null==b||Cu(this,null!=b?b:a.py)};f.Hx=function(){window.console.log("Applying auto window/level");var a,b={};D(this.Ik.levels.all,function(c){levelMax=hist=null;a=c.wl;folderStr="";D(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});c instanceof Cq?b[folderStr].uH=c:-1<c.sb.innerHTML.indexOf("Window Max")&&(b[folderStr].UH=c)}.bind(this));C(b,function(a){a.UH.t.D(a.uH.$y(Cq.LEVEL_CUTOFF))})};
function zu(a,b){if(null!=b){var c=a[ku],c="Y"==c||"Z"==c?a.ea()-a.H()-1:a.H()-1;b["index"+a[ku]]=c}}function Du(a,b,c,d,e){var h=a.ga.$p(b).Ga();a=a.Na.Ky().st(b);b=null;null!=a&&(b=a[Wq]);null!=b&&("vertical"==c?b.xB(h.mz(d,e)):"horizontal"==c&&b.yB(h.Vy(d,e)))}
function xu(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Du(a,"Y","vertical",b,!0);Du(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Du(a,"X","vertical",b,!1);Du(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Du(a,"X","horizontal",b,!1),Du(a,"Y","horizontal",b,!1)}}function Au(a,b){wu(a,function(a,b,e){a=e.Ad;e=e.ka;a.cd(e.ea());a.D(e.H())}.bind(a),b[ku])}function vu(a){wu(a,function(a,c,d){d.qf&&a.Ga()&&(a=a.Ga().qz(),d.qf.H(),d.qf.D(Math.round(100*a)))}.bind(a))}
function Bu(a,b,c){null!=c&&wu(a,function(a,c,h){h.ka.D(b.H())}.bind(a),b[ku])}function lu(a){wu(a,function(a,c,d){null!=d.ka&&d.ka.D(d.ka.ea()/2)}.bind(a))}
function mu(a){wu(a,function(a,c,d,e){if(null!=e[zt.SLICE_TO_RAS_KEY]&&null!=d.ka){slider=d.ka;orientation=slider[ku];a=e.bbox;e=e[zt.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.eK[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.JE[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.xE[2]-a[4])/h);slider.D(Math.round(slider.ea()*h)+1)}}.bind(a))}
function su(a,b){var c,d;wu(a,function(a,h,k,l){null!=k.ka&&(d=k.ka,c=d[ku],null!=l&&(!0===b&&(d.cd(a.Ga().ez()),d.Yd(1)),null!=c&&d.D(l["index"+c]+1)))})}f.vA=function(){wu(this,function(a,b,c,d){Bu(this,c.Ad,d);vu(this)}.bind(this));this.Ak()};f.Dv=function(a){var b=!1===a?0:1;wu(this,function(a,d,e){yl(e.ka.a(),200,b);yl(e.Ad.a(),200,b);yl(e.Pc.Zf,200,b);yl(e.Pc.If,200,b);yl(e.qf.a(),200,b)}.bind(this))};f.Dz=function(){this.Dv(!1);this.C.Fo(Yt,!1)};f.FB=function(){this.Dv(!0);this.C.Fo(Yt,!0)};
f.update=function(){this.Na.Lo()};f.WB=function(a){var b=!0==a?"visible":"hidden";wu(this,function(a,d,e){null!=e.Pc&&(e.Pc.Zf.style.visibility=b,e.Pc.If.style.visibility=b)}.bind(this))};f.$B=function(){null!=this.Na&&null!=this.ga&&wu(this,function(a,b,c,d){if(null!=c){var e=c.ka;c=c.Ad;e[ku]=b;c[ku]=b;null!=a.Ga()&&(Bu(this,c,d),e.j())}}.bind(this))};
f.RB=function(a){a.iB(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{Rg:$r,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{Rg:es,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{Rg:bs,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{Rg:Zr,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{Rg:as,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{Rg:cs,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{Rg:ds,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{Rg:Wr,Za:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.ix(c,b.Za);this.Na.gx(c,b.Rg);"Four-Up"==c&&this.Na.hB(c)}.bind(this));G(a,"item_selected",this.LI.bind(this))};f.LI=function(a){this.Na.zk(a.title);null!=this.C&&null!=this.C.qt()&&this.C.qt().fB(a.target.ek.src)};function Eu(a,b){G(a.nb[b].la,"f",function(a){this.rA(a,this.rc[b])}.bind(a))}
function Fu(a,b){G(b,"p",function(a){D(this.Fr,function(b){var e=b.ad();b!==a.target?(b.t.checked=!1,e.visible=!1):(e.visible=!0,this.ga.NA(e))}.bind(this))}.bind(a))}function Gu(a,b){C(a.Ik[b],function(a,d){g(a)&&D(a,function(a){var c=a.wl||[];"all"!==d&&0<c.length&&c.push(d);this.nb[b].Ne(a.a(),c);a instanceof at&&Fu(this,a)}.bind(this))}.bind(a))}function Hu(a){a.nb=xt();a.rc=vb(a.nb);C(a.nb,function(a,c){this.nb[c]=new ws;this.nb[c].k();this.rc[c]=c+"_"+B();Gu(this,c);Eu(this,c)}.bind(a))}
f.jy=function(){this.Ik=this.ga.Je;Hu(this);Iu(this);yu(this)};function Iu(a){C(a.nb,function(a,c){var d=!1;C(this.Ik[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.C.Um(this.rc[c],eu.CSS.bw,eu.CSS.$f,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+db(c)+".png",db(c),!1,!1);var e=this.nb[c].a();M(e,eu.CSS.cw);this.C.C[this.rc[c]].a().appendChild(e);1<this.nb[c].la.At().length?this.nb[c].Rm():(this.nb[c].Uj(),this.nb[c].Kc());"levels"==c&&Ju(this)}}.bind(a))}
function Ju(a){var b=a.C.C[a.rc.levels];M(b.a(),eu.CSS.QC);b.ev(eu.CSS.RC);a.N.uc(a.rc.levels);D(a.Ik.levels.all,function(a){a instanceof Cq||(a.sb.style.fontSize="9px",a.a().style.height="45px",a.t.a().style.top="28px",a.t.a().style.width="115px",a.t.j())}.bind(a));b.Jq("right","top",4,50);D(a.nb.levels.la.At(),function(a){a.Iv(10)})}
f.g=function(){eu.c.g.call(this);null!=this.cb&&(this.cb.g(),delete this.cb);null!=this.rc&&tb(this.rc);delete this.rc;null!=this.nb&&(C(this.nb,function(a){a.g()}),tb(this.nb));delete this.nb;tb(this.bd);delete this.bd;C(this.kk,function(a){C(a,function(a){Tc(a);delete a});tb(a)});tb(this.kk);delete this.kk;this.Gk&&(S(this.jf),delete this.jf);delete this.Gk;delete this.Ik;delete this.Tv;delete this.Pu;delete this.N;delete this.ga;delete this.Na;delete this.C};
v("xiv.ui.ViewBoxInteractorHandler.EventType",{lM:"O",TL:"P",$M:"Q",xL:"R"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",ju);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",ku);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",eu.prototype.cy);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",eu.prototype.iy);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",eu.prototype.hy);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",eu.prototype.ay);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",eu.prototype.fy);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",eu.prototype.Ak);v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",eu.prototype.Hx);v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",eu.prototype.vA);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",eu.prototype.Dv);
v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",eu.prototype.Dz);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",eu.prototype.FB);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",eu.prototype.update);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",eu.prototype.WB);v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",eu.prototype.$B);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",eu.prototype.RB);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",eu.prototype.jy);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",eu.prototype.g);E&&nc(8);function Ku(){V.call(this);this.uk=Q("div",{id:Ku.ID_PREFIX+"_ProgBarHolder_"+B(),"class":Ku.CSS.fD});Th(this.a(),this.uk);this.ug=Q("div",{id:Ku.ID_PREFIX+"_LabelHolder_"+B(),"class":Ku.CSS.PC});Th(this.a(),this.ug);this.Ph=new nr;this.Ph.ob(this.uk);M(Kh("progress-bar-thumb",this.uk),Ku.CSS.Rr)}w(Ku,V);v("xiv.ui.ProgressBarPanel",Ku);Ku.ID_PREFIX="xiv.ui.ProgressBarPanel";Ku.CSS_SUFFIX={Rr:"thumb",fD:"progbarholder",PC:"labelholder"};f=Ku.prototype;f.Fn="";f.lv=!1;
f.Uf=function(a){this.Fn=a;this.ug.innerHTML=this.Fn};f.kv=function(a){this.lv=null!=a&&!1===a?!1:!0;this.D(this.Ph.H())};f.D=function(a){this.Ph.D(a);this.ug.innerHTML=this.Fn;this.lv&&(0<this.Fn.length&&(this.ug.innerHTML+=" "),this.ug.innerHTML+=this.Ph.H().toString()+"%");ph(this.uk,"progress-bar-horizontal")};f.H=function(){return this.Ph.H()};
f.e=function(){Ku.c.e.call(this);null!=this.Ph&&(this.Ph.g(),delete this.Ph);null!=this.uk&&(S(this.uk),delete this.uk);null!=this.ug&&(S(this.ug),delete this.ug);this.Fn=this.lv=null};v("xiv.ui.ProgressBarPanel.EventType",{});v("xiv.ui.ProgressBarPanel.ID_PREFIX",Ku.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",Ku.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",Ku.prototype.Uf);v("xiv.ui.ProgressBarPanel.prototype.showValue",Ku.prototype.kv);
v("xiv.ui.ProgressBarPanel.prototype.setValue",Ku.prototype.D);v("xiv.ui.ProgressBarPanel.prototype.getValue",Ku.prototype.H);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",Ku.prototype.e);function Lu(){V.call(this)}w(Lu,ws);v("nrg.ui.ThumbnailGallery",Lu);Lu.ID_PREFIX="nrg.ui.ThumbnailGallery";Lu.CSS_SUFFIX={CC:"dialog",Sr:"thumbnail",Ur:"thumbnail-image",QM:"thumbnail-text"};var Mu=B();f=Lu.prototype;f.wr=!1;f.pv=function(a){this.wr=a;null!=this.la&&this.wr&&this.la.$u(Nu)};f.k=function(a){Lu.c.k.call(this,a);Ou(this);this.wr&&this.la.$u(Nu)};
function Nu(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Wh(a),d=b[Mu].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[Mu]&&(e=h[Mu].toLowerCase(),e=La(d,e),0>e)){Vh(b,h);return}a.appendChild(b)}f.Wm=function(a,b){var c=new ts;rh(c.a(),nh(c.a()),this.$i);rh(c.De,nh(c.De),this.Dk);rh(c.Jc,nh(c.Jc),this.Ck);c.cv(a);c.no(b);return c};f.loop=function(a){C(this.Eb,function(b){a(b)})};f.bv=function(a){this.loop(function(b){Th(a,b.Ve())})};
f.kl=function(a,b){qb(this.Eb,a)||(this.Eb=this.Eb?this.Eb:{},this.Eb[a.a().getAttribute("id")]=a,this.Pa.Mm(a.Ve()),G(this.Pa,"w",this.GI.bind(this)),a.a()[Mu]=a.xt().toLowerCase(),this.Ne(a.a(),b),this.Kc(),G(a,"B",function(a){this.dispatchEvent({type:"B",nj:a.target})}.bind(this)),G(a,"C",function(a){this.dispatchEvent({type:"C",nj:a.target})}.bind(this)))};f.ni=function(a,b,c){a=this.Wm(a,b);this.kl(a,c);Pu(this,"image");Pu(this,"text");Pu(this,"thumbnail");this.Kc();return a};
f.qo=function(){Lu.c.qo.call(this);G(this.Sf,"mouseover",this.NB.bind(this))};f.NB=function(a){this.ku=a.clientX;this.lu=a.clientY};function Qu(a){C(a.Eb,function(a){a.Tn()});a.yo=null}f.GI=function(){var a=document.elementFromPoint(this.ku,this.lu);(a=li(a,null,ts.kc))?(a=a.id.replace("HOVERABLE_",""),this.yo!==a&&(Qu(this),this.yo=a,this.Eb[this.yo].Qq()),this.Eb[this.yo].Yu()):Qu(this)};
function Pu(a,b){var c,d=[],e="";for(e in a.Eb){switch(b){case "thumbnail":d=a.$i;c=a.Eb[e].a();break;case "image":d=a.Ck;c=a.Eb[e].Jc;break;case "text":d=a.Dk,c=a.Eb[e].De}rh(c,nh(c),d)}}f.lx=function(a){null!=this.$i||Ou(this);this.$i.push(a);Pu(this,"thumbnail")};f.ox=function(a){this.Ck.push(a);Pu(this,"image")};f.px=function(a){this.Dk.push(a);Pu(this,"text")};f.j=function(a){a&&sl(this.a(),a)};
function Ou(a){var b=new ts;a.$i=nh(b.a());a.$i.push(Lu.CSS.Sr);a.Ck=nh(b.Jc);a.Ck.push(Lu.CSS.Ur);a.Dk=nh(b.De);a.Dk.push(Lu.CSS.ww);S(b.a());delete b}f.e=function(){Lu.c.e.call(this);delete this.wr;null!=this.ku&&delete this.ku;null!=this.lu&&delete this.lu;null!=this.Eb&&(this.Zm(this.Eb),delete this.Eb);null!=this.la&&(H(this.la),this.la.g(),delete this.la);null!=this.$i&&(Ib(this.$i),delete this.$i);null!=this.Ck&&(Ib(this.Ck),delete this.Ck);null!=this.Dk&&(Ib(this.Dk),delete this.Dk);delete this.yo};
v("nrg.ui.ThumbnailGallery.ID_PREFIX",Lu.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",Lu.CSS_SUFFIX);v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",Mu);v("nrg.ui.ThumbnailGallery.thumbnailSorter",Nu);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",Lu.prototype.pv);v("nrg.ui.ThumbnailGallery.prototype.render",Lu.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",Lu.prototype.Wm);v("nrg.ui.ThumbnailGallery.prototype.loop",Lu.prototype.loop);
v("nrg.ui.ThumbnailGallery.prototype.setHoverParent",Lu.prototype.bv);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",Lu.prototype.kl);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Lu.prototype.ni);v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",Lu.prototype.qo);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",Lu.prototype.lx);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",Lu.prototype.ox);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",Lu.prototype.px);
v("nrg.ui.ThumbnailGallery.prototype.updateStyle",Lu.prototype.j);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",Lu.prototype.e);function Ru(){V.call(this)}w(Ru,V);v("xiv.ui.ViewableGroupMenu",Ru);Ru.ID_PREFIX="xiv.ui.ViewableGroupMenu";Ru.CSS_SUFFIX={Ro:"header",Sr:"thumbnail",ww:"thumbnail-text",Ur:"thumbnail-image",wD:"thumbnailgallery",Qo:"background"};f=Ru.prototype;f.Q=null;f.Pe=null;f.Cl=null;
f.k=function(){Ru.c.k.call(this);this.Pe=Q("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});M(this.Pe,this.constructor.CSS.Qo);Th(this.a(),this.Pe);this.Cl=Q("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":Ru.CSS.Ro});this.Cl.innerHTML="<b> Select View <b>";Th(this.a(),this.Cl);null!=this.Q||this.reset()};f.sF=function(){return this.Pe};f.show=function(){xl(this.a(),Zm.fL)};f.ni=function(a,b){null!=this.Q||this.reset();var c=this.Q.ni(a,b);Su(this,c);return c};
f.Fl=function(){Al(this.a(),500);S(this.a())};f.reset=function(){null!=this.Q&&(this.Q.g(),delete this.Q);this.Q=new Lu;this.Q.pv(!0);this.Q.k(this.a());M(this.Q.a(),Ru.CSS.wD);this.Q.lx(Ru.CSS.Sr);this.Q.ox(Ru.CSS.Ur);this.Q.px(Ru.CSS.ww)};function Su(a,b){G(b,"D",function(){this.dispatchEvent({type:"S",SB:b})}.bind(a))}f.e=function(){Ru.c.e.call(this);null!=this.Pe&&(S(this.Pe),delete this.Pe);null!=this.Cl&&(S(this.Cl),delete this.Cl);null!=this.Q&&(this.Q.g(),delete this.Q)};
v("xiv.ui.ViewableGroupMenu.ID_PREFIX",Ru.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{nN:"S"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",Ru.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",Ru.prototype.k);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",Ru.prototype.sF);v("xiv.ui.ViewableGroupMenu.prototype.show",Ru.prototype.show);v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",Ru.prototype.ni);v("xiv.ui.ViewableGroupMenu.prototype.hide",Ru.prototype.Fl);
v("xiv.ui.ViewableGroupMenu.prototype.reset",Ru.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",Ru.prototype.e);var Tu;function Uu(a,b,c,d,e){this.Jj=a;this.nk=b;this.Dx=c;this.tE=d;this.Vn=e}Uu.prototype.getName=function(){return this.nk};function Vu(a){return!a.nk||"[object Object]"==a.Jj}
function Wu(a){var b=[a.Jj?Xu(a.Jj)+".":"",a.nk?Xu(Yu(a.nk)):"anonymous",Xu(a.tE),a.Dx?" [as "+Xu(Yu(a.Dx))+"]":""];if(a.Vn)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.Vn.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',Xu(a.Vn),"', '",c,"'); return false\">",Xu(a.Vn),"</a>")}else b.push(Xu(a.Vn));return b.join("")}
var Zu=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,$u=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,av=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
bv=/^function ([a-zA-Z_$][\w$]*)/,cv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function dv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(bv),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");r(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new Uu("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function ev(a){var b=a.match(Zu);if(b)return new Uu(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new Uu("",e,"",d,h)}return(b=a.match($u))?new Uu("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(av))?new Uu(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(cv))?new Uu("",b[1]||"","","",b[2]||
""):null}function Yu(a){return Tu?Tu(a):a}function Xu(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function fv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){Tu=a});function gv(a,b){return a==b}function hv(a,b){return a.toString()===b.toString()}var iv={String:gv,Number:gv,Boolean:gv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:hv,Function:hv};function jv(a,b,c){return Math.abs(a-b)<=c}var kv={Number:jv};
function lv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function mv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+lv(a)+")");return b}function nv(a,b){return b.length==a+1?b[0]:null}function ov(a,b,c){return c.length==b+1?c[a]:c[a-1]}function pv(a,b){b.length==a||b.length==a+1&&r(b[0])||qv(null,"Incorrect arguments passed to assert function")}
function rv(a,b){var c="Expected "+mv(a)+" but was "+mv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function sv(a,b){pv(1,arguments);var c=nv(1,arguments),d=ov(1,1,arguments);ia(d)||qv(c,"Bad argument to assert(boolean)");d||qv(c,"Call to assert(boolean) with false")}function tv(a,b){pv(1,arguments);var c=nv(1,arguments),d=ov(1,1,arguments);ia(d)||qv(c,"Bad argument to assertTrue(boolean)");d||qv(c,"Call to assertTrue(boolean) with false")}function Av(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments),h=rv(d,e);d===e||qv(nv(2,arguments),h)}
function Bv(a,b){pv(1,arguments);var c="Expected not to be "+mv(null);null!==ov(1,1,arguments)||qv(nv(1,arguments),c)}function Cv(a,b){pv(1,arguments);var c="Expected not to be "+mv(void 0);void 0!==ov(1,1,arguments)||qv(nv(1,arguments),c)}
function Dv(a,b,c){function d(a,b,c){for(var p=0;p<h.length;++p){var s=h[p]===a,u=k[p]===b;if(s||u){s&&u||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(p=lv(a),s=lv(b),p==s){var u="Array"==p,z=l(p,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(u&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(u?"[%s]":c?".%s":"%s"),a.__iterator__)ka(a.sl)?a.sl(b)||e.push("equals() returned false for "+(c||
p)):a.mb?d(a.mb,b.mb,z.replace("%s","map_")):e.push("unable to check "+(c||p)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)u&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||s)));for(y in b)u&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||p));if(u)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+rv(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=iv[a])?a(b,c)?"":rv(b,c):null};d(a,b,"");return 0==e.length?null:rv(a,b)+"\n   "+e.join("\n   ")}function Ev(a,b,c){pv(2,arguments);var d=nv(2,arguments)?nv(2,arguments):"",e=Dv(ov(1,2,arguments),ov(2,2,arguments));!e||qv(d,e)}function Fv(a,b,c,d){pv(3,arguments);var e=ov(1,3,arguments),h=ov(2,3,arguments),k=ov(3,3,arguments);jv(e,h,k)||qv(nv(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function Gv(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function Hv(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function Iv(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function qv(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new Jv(a,b);}
function Jv(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=fv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new Uu("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(ev(c[e]));c=d}else c=dv();for(d=c.length-1;c[d]&&Vu(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(Wu(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,Jv):this.stack=Error().stack||""}w(Jv,Error);Jv.prototype.toString=function(){return this.message};v("fail",function(a){qv("Call to fail()",a)});v("assert",sv);
v("assertThrows",function(a,b){pv(1,arguments);var c=ov(1,1,arguments),d=nv(1,arguments);"function"==typeof c||qv(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&r(e.stacktrace)&&r(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}qv(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){pv(1,arguments);var c=nv(1,arguments),d=ov(1,1,arguments);"function"==typeof d||qv(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",qv(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",tv);
v("assertFalse",function(a,b){pv(1,arguments);var c=nv(1,arguments),d=ov(1,1,arguments);ia(d)||qv(c,"Bad argument to assertFalse(boolean)");!d||qv(c,"Call to assertFalse(boolean) with true")});v("assertEquals",Av);v("assertNotEquals",function(a,b,c){pv(2,arguments);var d=ov(2,2,arguments),e="Expected not to be "+mv(d);ov(1,2,arguments)!==d||qv(nv(2,arguments),e)});v("assertNull",function(a,b){pv(1,arguments);var c=ov(1,1,arguments),d=rv(null,c);null===c||qv(nv(1,arguments),d)});
v("assertNotNull",Bv);v("assertUndefined",function(a,b){pv(1,arguments);var c=ov(1,1,arguments),d=rv(void 0,c);void 0===c||qv(nv(1,arguments),d)});v("assertNotUndefined",Cv);v("assertNotNullNorUndefined",function(a,b){pv(1,arguments);Bv.apply(null,arguments);Cv.apply(null,arguments)});v("assertNonEmptyString",function(a,b){pv(1,arguments);var c=ov(1,1,arguments),d="Expected non-empty string but was "+mv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||qv(nv(1,arguments),d)});
v("assertNaN",function(a,b){pv(1,arguments);isNaN(ov(1,1,arguments))||qv(nv(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){pv(1,arguments);!isNaN(ov(1,1,arguments))||qv(nv(1,arguments),"Expected not NaN")});v("assertObjectEquals",Ev);
v("assertObjectRoughlyEquals",function(a,b,c,d){pv(3,arguments);var e=ov(3,3,arguments),h=nv(3,arguments)?nv(3,arguments):"",k=Dv(ov(1,3,arguments),ov(2,3,arguments),function(a,b,c){return(a=kv[a])?a(b,c,e)?"":rv(b,c)+" which was more than "+e+" away":null});!k||qv(h,k)});v("assertObjectNotEquals",function(a,b,c){pv(2,arguments);var d=nv(2,arguments)?nv(2,arguments):"";Dv(ov(1,2,arguments),ov(2,2,arguments))||qv(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments),h=nv(2,arguments)?nv(2,arguments):"",k=lv(d);"Array"==k||qv(h,"Expected an array for assertArrayEquals but found a "+k);k=lv(e);"Array"==k||qv(h,"Expected an array for assertArrayEquals but found a "+k);Ev(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments),h=nv(2,arguments)?nv(2,arguments):"";if(d){Av("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)Av("mismatch at index "+k+": "+h,d[k],e[k])}else sv(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){pv(3,arguments);var e=ov(1,3,arguments),h=ov(2,3,arguments),k=ov(3,3,arguments),l=nv(3,arguments)?nv(3,arguments):"";if(e){Av("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)Fv(l,e[n],h[n],k)}else sv(l,!h)});
v("assertSameElements",function(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments),h=nv(2,arguments);tv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ha(d)&&ha(e));d=Gv(d);e=Gv(e);d.length==e.length||qv(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=Gv(d),l=0;l<e.length;l++){var n=Hv(k,e[l]);-1!=n||qv(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){pv(1,arguments);ov(1,1,arguments)||qv(nv(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){pv(1,arguments);ov(1,1,arguments)&&qv(nv(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){pv(2,arguments);var d=ov(2,2,arguments),e=Iv(ov(1,2,arguments)),d=Iv(d),h=rv(e,d);e===d||qv(nv(2,arguments),h)});
v("assertHashEquals",function(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments),h=nv(2,arguments),k;for(k in d)k in e||qv(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||qv(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||qv(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",Fv);
v("assertContains",function(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments);-1!=Hv(e,d)||qv(nv(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments);-1==Hv(e,d)||qv(nv(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){pv(2,arguments);var d=ov(1,2,arguments),e=ov(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||qv(nv(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function Kv(){V.call(this);this.gb=[];this.Zo={};this.tb={VM:null,km:null,ag:null,qC:null,hL:null,rC:null,nD:null,xD:null};this.tb.km=Q("div",{id:Kv.ID_PREFIX+"_menu_top_left_"+B(),"class":Kv.CSS.$C,viewbox:this.a().id});Th(this.a(),this.tb.km);this.Cb=Q("div",{id:Kv.ID_PREFIX+"_ViewFrame_"+B(),"class":Kv.CSS.JD});Th(this.a(),this.Cb);this.lc=new Ku;Th(this.Cb,this.lc.a());this.lc.a().style.opacity=0;this.lc.a().style.zIndex=1E5;Lv(this.lc);this.j()}w(Kv,V);v("xiv.ui.ViewBox",Kv);
var Mv={GD:"T",ED:"U",FD:"V"};Kv.ID_PREFIX="xiv.ui.ViewBox";Kv.CSS_SUFFIX={DL:"hidden",JM:"tabdragger",KM:"tabdragger-handle",LD:"viewlayoutmenu",$C:"menu-top-left",ZC:"menu-left",KD:"viewlayouthandler",LM:"ziptabs",MM:"ziptab-bounds",JD:"viewframe",Yv:"component-highlight",DD:"viewablegroupmenu",yL:"emptymenubutton"};var Nv={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=Kv.prototype;f.XH="empty";f.zd=null;f.Na=null;f.ac=null;f.ga=null;f.lc=null;f.jd=null;f.C=null;f.he=null;
f.Bz=!1;f.Ga=function(){return this.ga};f.gG=function(){return this.tb};f.aG=function(){return this.XH};f.ZG=function(){return this.gb};f.VG=function(){return this.Cb};f.$F=function(){return this.Na};f.XG=function(){return this.jd};f.Il=function(){M(this.Cb,Kv.CSS.Yv)};f.Io=function(){ph(this.Cb,Kv.CSS.Yv)};f.MG=function(){return this.Jg};f.FE=function(){this.Jg=void 0};f.YE=function(a){this.ft=this.ft?this.ft:[];this.ft.push(a)};f.zk=function(a){this.ac.lo(a)};
f.bJ=function(){this.lc.D(0);this.lc.kv(!0);Ov(this.lc,0);this.Il()};function Pv(a,b){a.lc.Uf("");a.lc.kv(!0);a.lc.D(100*b)}f.Eu=function(a){this.Il();Pv(this,a.value)};function Qv(a,b,c){Uf(function(){Lv(this.lc,500,function(){this.j();null!=c&&c()}.bind(this))}.bind(a),t(b)?b:1E3)}
f.Rq=function(){Rv(this,!1);D(Jh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.C.by();null!=this.gb[0].Ib()&&this.zk(this.gb[0].Ib());Sv(this);this.he.cy();this.he.Hx();Qv(this,800,function(){this.lc.D(0);this.j();this.Pq();this.dispatchEvent("U");this.Io()}.bind(this))};f.Pq=function(){this.ga&&this.ga.j();null!=this.he&&this.he.update();null!=this.ga&&this.he.vA()};
function Tv(a,b){a.jd.reset();tb(a.Zo);Hb(a.gb,b)||a.gb.push(b);1==a.gb.length&&a.zk(Nv[b.eh]);var c=b.Qc,d=null;1<c.length?(D(c,function(a,b){d=this.jd.ni(a.am,a.Pd()||b);this.Zo[na(d)]=a}.bind(a)),Ov(a.jd,400)):a.load(c[0],!1)}f.so=function(){this.C.so()};f.Ms=function(a){return null!=this.Jg?(this.so(),this.C.eB(a),!0):!1};
f.load=function(a,b){this.dispatchEvent("T");if(!this.Ms(function(){this.Jg=void 0;this.load(a,b)}.bind(this)))if(null!=a){if(b=null!=b?b:!0)Uv(this),Vv(this),this.C=new Xt(this),this.Na=new fs,this.Na.a().style.opacity=0,Th(this.Cb,this.Na.a()),M(this.Na.a(),Kv.CSS.KD),G(this.Na,"A",this.Pq.bind(this)),G(this.Na,"x",this.Au.bind(this)),G(this.Na,"z",this.Bu.bind(this)),G(this.Na,"y",this.zu.bind(this)),Wv(this),Xv(this),this.he=new eu(this,this.ga,this.Na,this.C),this.he.RB(this.ac),this.Bz=!0;Lv(this.jd,
400);Ov(this.lc,0);if(a instanceof Em)Tv(this,a);else{var c;C(this.ga.bc,function(a,b){(c=this.Na.Ly(b))&&a.ia(c.a())}.bind(this));Rc(this.ga,"r",this.bJ.bind(this));Rc(this.ga,"t",this.Rq.bind(this));G(this.ga,"s",this.Eu.bind(this));Rv(this,!0);"scans"==a.eh.toLowerCase()?Yv(this,a):(this.ga.k(a),this.Jg=(new Date).getTime())}}else Zv(this,"The data set is empty!")};
function Yv(a,b){Ov(a.lc,0);Pv(a,0);var c=a.gb[a.gb.length-1].lz(),d=b.Le[0].qg()[0].split("/files/")[0]+"/files";window.console.log("XImgView Zip Downloading (XHR): "+d);jm(d,function(a){b.Le[0].ZA(a);this.ga.k(b);this.Jg=(new Date).getTime()}.bind(a),function(a){this.Il();Pv(this,a.loaded/c)}.bind(a))}function Rv(a,b){window.onerror=!0===b?function(a){Zv(this,a)}.bind(a):void 0}
function Zv(a,b){a.Io();Qv(a);Rv(a,!1);Uv(a);b=b.replace("Uncaught Error: ","")||"A render error occured :(<br>";a.dispatchEvent({type:Mv.UM,message:b});var c=new Yl;c.bx();c.cx();var d=c.wp();M(d,Yl.CSS.rw);d.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.gi(b||"");c.k(a.Cb);c.a().style.opacity=0;c.a().style.zIndex=1E3;zl(c.a(),Zm.gL)}f.Au=function(a){C(this.ga.bc,function(b,c){null!=a.Gv[c]&&(b.yk(a.Gv[c]),b.j())})};f.Bu=function(){C(this.ga.bc,function(a){a.j()});this.he.update()};
f.zu=function(a){var b=a.frames;C(this.ga.bc,function(a,d){null!=b[d]&&(a.yk(b[d].a()),a.j())}.bind(this));this.he.update()};function Sv(a){var b=0,b=t(b)?b:500,c=[];D([a.tb.ag,a.ac.a(),a.Na.a()],function(a){c.push(Dl(a,{opacity:0},{opacity:1},b))});Ll(c,null,null,void 0)}function Lv(a,b,c){if(null!=a){b=t(b)&&0<=b?b:0;var d=function(){a.a().style.visibility="hidden";a.a().style.zIndex="-1";c&&c()};"hidden"==a.a().style.visibility||0==b?d():Al(a.a(),b,d)}}
function Ov(a,b){b=t(b)&&0<=b?b:0;a.a().style.opacity="0";a.a().style.zIndex="1000";a.a().style.visibility="visible";0==b?a.a().style.opacity="1":xl(a.a(),b,function(){})}f.Ar="Info. Display;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");function $v(a,b,c,d){var e=Wh(b),h=[],k;D(a.Ar,function(){h.push(null)});h[d]=c;D(e,function(a){k=this.Ar.indexOf(a.title);h[k]=a}.bind(a));Uh(b);D(h,function(a){null!=a&&b.appendChild(a)})}
f.Cj=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.tb.km;break;case "LEFT":d=this.tb.ag;break;case "BOTTOM_LEFT":d=this.tb.qC;break;case "TOP_RIGHT":d=this.tb.xD;break;case "RIGHT":d=this.tb.nD;break;case "BOTTOM_RIGHT":d=this.tb.rC}t(c)?d.insertBefore(b,d.childNodes[c]):(a=this.Ar.indexOf(b.title),0<a?$v(this,d,b,a):Th(d,b));aw(this)};
f.Sl=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?M(a,a.getAttribute(bu)):ph(a,a.getAttribute(bu));null!=b&&b(a)};f.VB=function(a){return"true"==this.zd[a].getAttribute("checked").toString()};f.zt=function(a){return this.zd[a]};f.uc=function(a){An(this.zd[a])};f.Lv=function(a){g(a)||(a=[a]);D(a,function(a){null!=this.zd[a]&&this.VB(a)&&An(this.zd[a])}.bind(this))};
f.Mj=function(a,b,c,d,e,h){var k=b+"-on",l=Q("img",b);l.id=vj(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(bu,b+"-on");M(l,k);sl(l,{cursor:"pointer"});G(l,"click",function(){this.Sl(l,e)}.bind(this));this.Cj(a,l);if(null==this.zd)this.zd={};else if(null!=this.zd[c])throw Error("Invalid identifier for toggle button.  In use.");return this.zd[c]=l};
function Vv(a){a.tb.ag=Q("div",{id:Kv.ID_PREFIX+"_menu_left_"+B(),"class":Kv.CSS.ZC,viewbox:a.a().id});a.tb.ag.style.opacity=0;Th(a.a(),a.tb.ag);a.ac=new Wo;a.ac.YA("Select Layout");M(a.ac.a(),Kv.CSS.LD);a.ac.bA(!0);a.ac.a().style.opacity=0;a.ac.Rd.style.opacity=0;var b=a.ac.a();Nb(a.Ar,void 0,0,b.title);a.Cj("LEFT",b);a.Cb.appendChild(a.ac.Rd)}
function Xv(a){a.jd=new Ru;a.jd.k(a.Cb);Th(a.Cb,a.jd.a());Th(a.Cb,a.jd.Pe);M(a.jd.a(),Kv.CSS.DD);G(a.jd,"S",function(a){this.load(this.Zo[na(a.SB)],!1)}.bind(a));Lv(a.jd)}f.OG=function(){return this.zd};function Wv(a){a.ga=new zt;G(a.ga,"I",function(a){Zv(this,a.message)}.bind(a))}function aw(a){var b,c,d,e;null!=a.tb.km&&(d=a.tb.km,e=U(d),b=0,c=e.height);null!=a.tb.ag&&(d=a.tb.ag,e=U(d),a=a.q.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.j=function(a){Kv.c.j.call(this,a);null!=this.Na&&this.Na.j();this.ga&&this.ga.j();null!=this.ac&&(a=yi(this.tb.ag),U(this.ac.Rd),a=a.y-130,this.ac.cB(0,a),this.ac.sB(0,a));aw(this);null!=this.C&&this.C.update();null!=this.he&&this.he.$B()};
function Uv(a){tb(a.Zo);Ib(a.gb);null!=a.Na&&(H(a.Na),yc(a.Na.g()),delete a.Na);null!=a.ac&&(H(a.ac),a.ac.g(),delete a.ac);null!=a.ga&&(a.ga.g(),delete a.ga);null!=a.jd&&(a.jd.g(),delete a.jd);null!=a.C&&a.C.e();null!=a.he&&a.he.g();null!=a.zd&&(S(a.tb.ag),delete a.tb.ag,C(a.zd,function(a){H(a);S(a)}),Ib(a.zd),delete a.zd)}
f.e=function(){Kv.c.e.call(this);Uv(this);null!=this.lc&&(this.lc.g(),delete this.lc);S(this.Cb);H(this.Cb);delete this.Cb;C(this.tb,function(a,b){S(a);delete this.tb[b]}.bind(this));delete this.tb;delete this.AN;delete this.Bz};v("xiv.ui.ViewBox.EventType",Mv);v("xiv.ui.ViewBox.ID_PREFIX",Kv.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",Kv.CSS_SUFFIX);v("xiv.ui.ViewBox.defaultLayout",Nv);v("xiv.ui.ViewBox.MIN_HOLDER_HEIGHT",200);v("xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT",15);
v("xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH",50);v("xiv.ui.ViewBox.MIN_TAB_H_PCT",.2);v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",Kv.prototype.Ga);v("xiv.ui.ViewBox.prototype.getMenus",Kv.prototype.gG);v("xiv.ui.ViewBox.prototype.getLoadState",Kv.prototype.aG);v("xiv.ui.ViewBox.prototype.getViewableTrees",Kv.prototype.ZG);v("xiv.ui.ViewBox.prototype.getViewFrame",Kv.prototype.VG);v("xiv.ui.ViewBox.prototype.getLayoutHandler",Kv.prototype.$F);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",Kv.prototype.XG);v("xiv.ui.ViewBox.prototype.highlight",Kv.prototype.Il);v("xiv.ui.ViewBox.prototype.unhighlight",Kv.prototype.Io);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",Kv.prototype.MG);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",Kv.prototype.FE);v("xiv.ui.ViewBox.prototype.doNotHide",Kv.prototype.YE);v("xiv.ui.ViewBox.prototype.setLayout",Kv.prototype.zk);v("xiv.ui.ViewBox.prototype.showInUseDialog",Kv.prototype.so);
v("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",Kv.prototype.Ms);v("xiv.ui.ViewBox.prototype.load",Kv.prototype.load);v("xiv.ui.ViewBox.prototype.addToMenu",Kv.prototype.Cj);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",Kv.prototype.Sl);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",Kv.prototype.VB);v("xiv.ui.ViewBox.prototype.getToggleButton",Kv.prototype.zt);v("xiv.ui.ViewBox.prototype.fireToggleButton",Kv.prototype.uc);v("xiv.ui.ViewBox.prototype.untoggle",Kv.prototype.Lv);
v("xiv.ui.ViewBox.prototype.createToggleButton",Kv.prototype.Mj);v("xiv.ui.ViewBox.prototype.getToggleButtons",Kv.prototype.OG);v("xiv.ui.ViewBox.prototype.updateStyle",Kv.prototype.j);v("xiv.ui.ViewBox.prototype.disposeInternal",Kv.prototype.e);function bw(){sn.call(this)}w(bw,sn);bw.prototype.Bj=function(a,b){var c=new yn(a,b);c.io(this);this.Cn.push(c);this.Ki&&tn(this,c)};function cw(){V.call(this)}w(cw,V);v("xiv.ui.ViewBoxHandler",cw);cw.CSS_SUFFIX={GC:"handle",HD:"viewboxdragclone",Nh:"closebutton",Wv:"addrowbutton",Vv:"addcolumnbutton"};cw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=cw.prototype;f.Nr=5;f.nw=5;f.Pk=document.body;f.Ni=function(a,b){this.dispatchEvent({type:"Z",oA:a,pE:b})};f.dK=function(){return this.u.length};f.gn=function(){var a=[];D(this.u,function(b,c){a.push([]);D(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.u&&D(this.u,function(b,c){D(b,function(d,e){a(d,c,e,this.u.length,b.length)}.bind(this))}.bind(this))};f.Jt=function(a,b){this.u||(this.u=[[]]);var c=0,d=[],e;if(null!=a)c=dw(this,a),this.u[c.mq].length<this.nw&&(d.push(ew(this)),Nb(this.u[c.mq],c.OH+1,0,d[0]));else{d=[];e=this.u.length?this.u.length:1;for(c=0;c<e;c++)d.push(ew(this));0===this.u.length?this.u.push([d[0]]):D(this.u,function(a,b){a.push(d[b])})}this.Ni(d,void 0===b?!0:b);fw(this)};
f.VJ=function(a){this.u&&(a=void 0===a?!0:a,this.u[0]&&1<this.u[0].length&&D(this.u,function(a){var c=a.length-1;gw(this,a[c]);a.splice(c,1)}.bind(this)),this.Ni(null,a),fw(this))};function dw(a,b){for(var c=0,d=0,e=a.u.length,h=0,c=0;c<e;c++)for(d=0,h=a.u[c].length;d<h;d++)if(b===a.u[c][d])return{mq:c,OH:d}}
f.insertRow=function(a,b){this.u||(this.u=[[]]);var c=[],d,e;if(null!=a){var h=dw(this,a),c=[];e=this.u[h.mq].length;if(this.u.length<this.Nr){for(d=0;d<e;d++)c.push(ew(this));Nb(this.u,h.mq+1,0,c)}}else if(e=this.u[0]&&this.u[0].length?this.u[0].length:1,this.u.length<this.Nr){for(d=0;d<e;d++)c.push(ew(this));this.u.push(c)}this.Ni(c,void 0===b?!0:b);fw(this)};
f.XJ=function(a){this.u&&(a=void 0===a?!0:a,1<this.u.length&&(D(this.u[this.u.length-1],function(a){gw(this,a)}.bind(this)),this.u.splice(this.u.length-1,1)),this.Ni(null,a),fw(this))};f.dq=function(a){for(var b=0,c=0,d=this.u.length,e=0,b=0;b<d;b++)for(c=0,e=this.u[b].length;c<e;c++)if(a===this.u[b][c].a())return this.u[b][c]};f.TG=function(a,b){return this.u[a][b].a()};f.RG=function(a,b){return this.u[a][b]};f.oz=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.nz=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.wB=function(a){this.Pk=a};
function ew(a){var b=new Kv;Th(a.Pk,b.a());hw(a,b);var c=Q("img",{id:cw.ID_PREFIX+"_dragHandle_"+B(),"class":cw.CSS.GC});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.Cj("TOP_LEFT",c,1);a.ti||(a.ti={});a.ti[b.a().id]=c;c.title="Drag / Swap ViewBox";iw(a,b);jw(a,b);G(b,"U",a.Ju.bind(a));G(b,"T",a.Ku.bind(a));G(b,"V",a.nJ.bind(a));return b}
function jw(a,b){var c=Q("img",{id:cw.ID_PREFIX+"_CloseButton_"+B(),"class":cw.CSS.Vv,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});ul(c,cw.CSS.Vv+"-hovered");G(c,"click",function(){this.Jt(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Cj("TOP_LEFT",c,1);a.ex||(a.ex={});a.ex[b.a().id]=c;c.title="Add ViewBox Column"}
function iw(a,b){var c=Q("img",{id:cw.ID_PREFIX+"_CloseButton_"+B(),"class":cw.CSS.Wv,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});ul(c,cw.CSS.Wv+"-hovered");G(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Cj("TOP_LEFT",c,1);a.kx||(a.kx={});a.kx[b.a().id]=c;c.title="Add ViewBox Row"}
function hw(a,b){var c=Q("img",{id:cw.ID_PREFIX+"_CloseButton_"+B(),"class":cw.CSS.Nh,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});ul(c,cw.CSS.Nh+"-hovered");G(c,"click",function(){kw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.Cj("TOP_LEFT",c,1);a.Qm||(a.Qm={});a.Qm[b.a().id]=c;c.title="Close ViewBox"}f.Ju=function(a){this.dispatchEvent({type:"X",Aw:a.target})};f.Wr=function(a,b){this.loop(function(c){Hb(c.gb,a)&&b(c)})};f.Ku=function(a){this.dispatchEvent({type:"W",Aw:a.target})};
f.nJ=function(a){this.dispatchEvent({type:"Y",Aw:a.target})};function gw(a,b){yl(b.a(),150,0);S(a.ti[b.a().id]);S(a.Qm[b.a().id]);b.g()}function lw(a,b){var c=[],d;gw(a,b);D(a.u,function(a){d=[];D(a,function(a){a.Pj||(window.console.log(a.a()),d.push(a))}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.u=c;a.Ni(null,!0);fw(a)}function kw(a,b){1!=a.qA()&&(b.Ms(function(){lw(this,b)}.bind(a))||lw(a,b))}f.Mt=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};
f.PB=function(a,b){for(var c,d,e,h,k=0,l=0,n=this.u.length,k=0;k<n;k++)for(var m=this.u[k].length,l=0;l<m;l++){var q=this.u[k][l];if(this.Mt(q,a)){c=k;d=l;break}if(this.Mt(q,b)){e=k;h=l;break}}t(c)&&t(e)&&(k=this.u[c][d],this.u[c][d]=this.u[e][h],this.u[e][h]=k,k=U(this.u[c][d].a()),l=U(this.u[e][h].a()),Ji(this.u[e][h].a(),k),Ji(this.u[c][d].a(),l),this.Ni())};f.qA=function(){var a=0;this.loop(function(){a++});return a};
f.SG=function(a){for(var b=0,c=0,d=this.u.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.u[b].length;c<e;c++)if(this.u[b][c]===a)return e=b+1===this.u.length,h=c+1===this.u[b].length,e&&h?this.u[0][0]:e&&!h?this.u[0][c+1]:!e&&h?this.u[b+1][0]:this.u[b+1][c+1]};f.Ty=function(){var a;this.loop(function(b){null!=a||null!=b.Jg||(a=b)}.bind(this));if(null!=a)return a;var b=this.oz();g(b)?b.sort(function(a,b){return a.Jg<b.Jg?-1:a.Jg>b.Jg?1:0}):b=[b];return b[0]};
f.Ns=function(){this.Ld&&(un(this.Ld),un(this.jh),delete this.Ld,delete this.jh)};function mw(a){a.loop(function(a){null!=a.a()&&(this.Ld.Bj(this.ti[a.a().id]),this.jh.Bj(a.a()))}.bind(a))}function fw(a){a.Ns();a.Ld=new bw;a.jh=new bw;mw(a);var b=a.Ld,c=a.jh;b.Av.push(c);c.vq=!0;b.uq=!0;a.Ld.ia();a.jh.ia();a.Ld.Ts=a.Us.bind(a);G(a.Ld,"dragstart",a.BI.bind(a));G(a.Ld,"dragover",a.wu.bind(a));G(a.Ld,"dragend",a.vu.bind(a))}f.Us=function(a){return nw(Gh(a.getAttribute("viewboxid")))};
f.BI=function(){this.of={};this.loop(function(a){this.of[a.a().id]={absolute:pl(a.a()),relative:ql(a.a())};this.ti[a.a().id].style.visibility="hidden"}.bind(this))};function nw(a){var b=document.body;a=a.cloneNode(!1);a.className=cw.CSS.HD;b&&b.appendChild(a);return a}
f.wu=function(a){if(a.ql.element.id!==a.Qp.pi.getAttribute("viewboxid")){var b=Gh(a.Qp.pi.getAttribute("viewboxid"));a=Gh(a.ql.element.id);this.PB(b,a);var c=this.of,d=new hl,e=c[b.id].relative,c=c[a.id].relative;d.add(new Xk(b,[b.offsetLeft,b.offsetTop],[c.left,c.top],300,vl));d.add(new Xk(a,[a.offsetLeft,a.offsetTop],[e.left,e.top],300,vl));d.play();d=this.of[b.id];this.of[b.id]=this.of[a.id];this.of[a.id]=d}};
f.vu=function(a){var b=a.Qp.Ha.Qj;a=Gh(a.Qp.pi.getAttribute("viewboxid"));a=pl(a);var c=nw(b);Th(this.Pk.parentNode?this.Pk.parentNode:this.Pk,c);b=pl(b);sl(c,{top:b.top,left:b.left,"z-index":1E4});ow(c,a).play();pw(this)};function ow(a,b){var c=new hl;c.add(new Xk(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,vl));G(c,"end",function(){S(a)});return c}function pw(a){a.loop(function(a){this.ti[a.a().id].style.visibility="visible"}.bind(a))}
f.e=function(){cw.c.e.call(this);this.loop(function(a){H(a);S(a.a());a.g()}.bind(this));D(this.u,function(a){Ib(a)});Ib(this.u);delete this.u;this.Pp(this.ti);delete this.ti;this.Pp(this.Qm);delete this.Qm;C(this.of,function(a,b){tb(this.of[b]);delete this.of[b]}.bind(this));tb(this.of);delete this.of;null!=this.Ld&&(H(this.Ld),this.Ld.g());delete this.Ld;null!=this.jh&&(H(this.jh),this.jh.g());delete this.jh;delete this.Pk};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",cw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{GD:"W",ED:"X",FD:"Y",mN:"Z"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",cw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",cw.prototype.Nr);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",cw.prototype.nw);v("xiv.ui.ViewBoxHandler.prototype.rowCount",cw.prototype.dK);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",cw.prototype.gn);v("xiv.ui.ViewBoxHandler.prototype.loop",cw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",cw.prototype.Jt);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",cw.prototype.VJ);v("xiv.ui.ViewBoxHandler.prototype.insertRow",cw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",cw.prototype.XJ);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",cw.prototype.dq);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",cw.prototype.TG);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",cw.prototype.RG);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",cw.prototype.oz);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",cw.prototype.nz);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",cw.prototype.wB);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",cw.prototype.Wr);v("xiv.ui.ViewBoxHandler.prototype.isMatch",cw.prototype.Mt);v("xiv.ui.ViewBoxHandler.prototype.swap",cw.prototype.PB);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",cw.prototype.qA);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",cw.prototype.SG);v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",cw.prototype.Ty);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",cw.prototype.e);function qw(a){ts.call(this);this.XA(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.Nv.bind(this));this.pf=a;rw(this);this.Vm()}w(qw,ts);v("xiv.ui.Thumbnail",qw);qw.ID_PREFIX="xiv.ui.Thumbnail";qw.CSS_SUFFIX={};qw.prototype.Nv=function(){var a=Hh("img",ts.CSS.So,this.Ve()),a=a[0];a.src=this.Jc.src};qw.prototype.Vm=function(){qw.c.Vm.call(this);M(this.Ve(),qw.hm)};
function rw(a){var b="",c=a.pf.Xd;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=a.pf.Ch)var d=a.pf.Ch.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");D(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.no(e)}qw.prototype.WG=function(){return this.pf};qw.prototype.e=function(){qw.c.e.call(this);this.pf.g();delete this.pf};v("xiv.ui.Thumbnail.ID_PREFIX",qw.ID_PREFIX);
v("xiv.ui.Thumbnail.CSS_SUFFIX",qw.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.updateHoverable",qw.prototype.Nv);v("xiv.ui.Thumbnail.prototype.createHoverable",qw.prototype.Vm);v("xiv.ui.Thumbnail.prototype.getViewable",qw.prototype.WG);v("xiv.ui.Thumbnail.prototype.disposeInternal",qw.prototype.e);function sw(){V.call(this);this.hf=new bw;this.Jh=new bw;this.hf.Ts=this.Us.bind(this);G(this.hf,"dragover",this.wu.bind(this));G(this.hf,"dragend",this.vu.bind(this));G(this.hf,"dragout",this.AI.bind(this));G(this.Jh,"drop",this.CI.bind(this));var a=this.hf,b=this.Jh;a.Av.push(b);b.vq=!0;a.uq=!0;this.Jh.ia();this.hf.ia()}w(sw,Lu);v("xiv.ui.ThumbnailGallery",sw);sw.ID_PREFIX="xiv.ui.ThumbnailGallery";sw.CSS_SUFFIX={Tr:"thumbnail-dragging"};var tw="THUMBNAIL_DRAGGER_"+B(),uw=tw+"_FADER"+B();f=sw.prototype;
f.hf=null;f.Jh=null;f.ni=function(a,b){var c=this.Wm(a);this.kl(c,b);return c};f.Wm=function(a){var b=new qw(a);G(b,"D",function(){this.dispatchEvent({type:"da",nj:b})}.bind(this));return b};f.kl=function(a,b){sw.c.kl.call(this,a,b);var c=a.Ve();c&&this.hf.Bj(c)};f.Ux=function(){un(this.Jh)};f.mx=function(a){this.Jh.Bj(a)};f.nx=function(a){D(a,function(a){this.mx(a)}.bind(this))};f.KG=function(a){return this.Eb[a.id]};
f.Ns=function(){null!=this.hf&&(un(this.hf),this.hf.g());null!=this.Jh&&(un(this.Jh),this.Jh.g())};f.Us=function(a){a=li(a,"div",qw.kc).id.replace("HOVERABLE_","");if(a in this.Eb)return this.Eb[a].setActive(!0,!0),a=this.Eb[a].a().cloneNode(!0),a.setAttribute("id",tw+a.id),M(a,sw.CSS.Tr),a};f.wu=function(a){this.dispatchEvent({type:"ba",Bv:a.ql.element})};f.AI=function(a){this.dispatchEvent({type:"ca",Bv:a.ql.element})};
f.vu=function(){var a=Jh(sw.CSS.Tr);D(a,function(a){Al(a,300,function(){S(a)})});null!=a[0]&&this.Eb[a[0].id.replace(tw,"")].setActive(!1,!0)};f.CI=function(a){var b=Kh(sw.CSS.Tr);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);S(b);a.ql.element&&this.dispatchEvent({type:"ea",nj:this.Eb[b.id.replace(tw,"")],LK:a.ql.element})}};f.e=function(){sw.c.e.call(this);this.Ns()};
v("xiv.ui.ThumbnailGallery.EventType",{To:"$",bD:"aa",SM:"ba",RM:"ca",PM:"da",TM:"ea"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",sw.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",sw.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",tw);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",uw);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",sw.prototype.ni);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",sw.prototype.Wm);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",sw.prototype.kl);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",sw.prototype.Ux);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",sw.prototype.mx);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",sw.prototype.nx);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",sw.prototype.KG);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",sw.prototype.e);function vw(a,b,c,d){Yc.call(this);this.bb=c||Ch();this.rl=a;this.bf=[];this.KK=b?b:ww;this.cC=!!d;this.Qe()}w(vw,Yc);var ww=0;f=vw.prototype;
f.Qe=function(){this.rl.className="goog-tabpane";for(var a=[],b=Xh(this.rl);b;)a.push(b),b=Zh(b);this.Md=this.bb.p("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.Tb=this.bb.p("div","goog-tabpane-cont");this.rl.appendChild(this.Tb);b=this.rl;switch(this.KK){case ww:b.insertBefore(this.Md,this.Tb);b.insertBefore(xw(this),this.Tb);Lj(b,"goog-tabpane-top");break;case 1:b.appendChild(this.Md);b.appendChild(xw(this));Lj(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.Md,this.Tb);Lj(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.Md,this.Tb);Lj(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.Md.tabIndex=0;G(this.Md,this.cC?"mousedown":"click",this.Lq,!1,this);G(this.Md,"keydown",this.Mq,!1,this);for(var c=0;b=a[c];c++)yw(this,new zw(b))};
function xw(a){var b=Ch(void 0),c=null,d=b.ha;E&&d.createStyleSheet?(c=d.createStyleSheet(),Qi(c)):(d=Ih(b.ha,"head",void 0,void 0)[0],d||(c=Ih(b.ha,"body",void 0,void 0)[0],d=b.p("head"),c.parentNode.insertBefore(d,c)),c=b.p("style"),Qi(c),b.appendChild(d,c));return a.bb.p("div","goog-tabpane-clear")}f.e=function(){vw.c.e.call(this);Sc(this.Md,this.cC?"mousedown":"click",this.Lq,!1,this);Sc(this.Md,"keydown",this.Mq,!1,this);delete this.rl;this.Tb=this.Md=null};
function yw(a,b){b.Ha&&b.Ha!=a&&b.Ha instanceof vw&&Aw(b.Ha,b);var c=a.bf.length;ca(void 0)&&void 0!=c?(c=void 0,a.bf.splice(c,0,b),a.Md.insertBefore(b.vi,a.Md.childNodes[c])):(a.bf.push(b),a.Md.appendChild(b.vi));b.jo(a,c);a.Eg||(a.Eg=b,a.dispatchEvent(new Bw("change",a,a.Eg)));a.Tb.appendChild(b.Tb);Cw(b,b==a.Eg);for(var d=c+1;c=a.bf[d];d++)c.wn=d}function Aw(a,b){t(b)&&(b=a.bf[b]);a.bf.splice(b.wn,1);b.jo(null);S(b.vi);S(b.Tb);for(var c,d=0;c=a.bf[d];d++)c.jo(a,d)}
function Dw(a,b){if(0<=b&&b<a.bf.length){var c=a.bf[b];!c.isEnabled()||a.Eg&&c==a.Eg||(Cw(a.Eg,!1),Cw(c,!0),a.Eg=c,a.dispatchEvent(new Bw("change",a,a.Eg)))}}f.Ta=function(){return this.Tb||null};f.a=function(){return this.rl||null};f.Lq=function(a){for(var b=a.target;b!=this.Md;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);Dw(this,c);break}b=b.parentNode}a.preventDefault()};
f.Mq=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.Eg.wn-1;Dw(this,0>a?this.bf.length-1:a);break;case 39:a=this.Eg.wn+1;Dw(this,a>=this.bf.length?0:a);break;case 36:Dw(this,0);break;case 35:Dw(this,this.bf.length-1)}};function zw(a,b,c){var d,e;if(r(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=Xh(a))d=ii(b),b.parentNode.removeChild(b);e=a}this.bb=c||Ch();this.Tb=e||this.bb.p("div");this.vi=this.bb.p("li",null,d);this.wn=this.Ha=null;this.sc=!0}f=zw.prototype;
f.Pd=function(){return ii(this.vi)};f.Ce=function(a){ci(this.vi,a)};f.kz=function(){return this.vi};f.Ta=function(){return this.Tb};f.getParent=function(){return this.Ha};f.Zb=function(a){this.sc=a;this.vi.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.sc};function Cw(a,b){a.isEnabled()&&(a.Tb.style.display=b?"":"none",a.vi.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.jo=function(a,b){this.Ha=a;this.wn=ca(b)?b:null};
function Bw(a,b,c){Cc.call(this,a,b);this.page=c}w(Bw,Cc);function Z(a){V.call(this);if(null!=a){var b=a;if(!r(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==Ew.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||Fw}w(Z,V);v("nrg.ui.Tabs",Z);var Ew=["TOP","BOTTOM","LEFT","RIGHT"],Fw=Ew[0];Z.ID_PREFIX="nrg.ui.Tabs";Z.CSS_SUFFIX={Pb:"tab",Sh:"tab-active",nf:"page",eD:"page-content",Uo:"page-active",Za:"icon",Mk:"icon-active",JC:"icon-content",wM:"scrollgallery"};
function Gw(a,b,c,d,e){this.dj=!1;this.TITLE=a;this.Pb=b;this.Za=c;this.nf=d;this.Rg=e}f=Z.prototype;f.Ye=0;f.Tl=0;f.$d=null;f.k=function(a){Z.c.k.call(this,a);this.$j=new vw(this.a());this.F=[];M(this.a(),Z.kc)};f.FG=function(){return this.F.length};f.WF=function(){return this.Ye};f.tG=function(){return this.Tl};f.bq=function(){var a=[];D(this.F,function(b){a.push(b.Pb)});return a};f.cq=function(){var a=[];D(this.F,function(b){a.push(b.nf)});return a};
f.GG=function(){var a=[];D(this.F,function(b){a.push(b.Za)});return a};f.mE=function(a){D(a,function(a){this.jl(a)}.bind(this))};f.reset=function(){for(var a=this.F.length;0<a;)Aw(this.$j,a-1),a--;this.SN()};f.yv=function(a){if(null==this.F)return!1;for(var b=0,c=this.F.length;b<c;b++)if(this.F[b].TITLE==a)return!0;return!1};
f.jl=function(a){this.F=null!=this.F?this.F:[];if(this.yv(a))throw Error(a+" is an already existing tab!");var b;b=Q("div",{id:"Tab_"+B(),"class":Z.CSS.Pb,title:a});Th(this.a(),b);var c=Q("div",{id:"TabIcon_"+B(),"class":Z.CSS.Za}),d=Q("div",{"class":Z.CSS.JC},a);Th(c,d);Th(b,c);d=Q("div",{id:"TabPage_"+B(),"class":Z.CSS.nf,label:a});sl(d,ql(this.a(),"width"));Th(this.a().parentNode,d);var e=new zw(d,a);yw(this.$j,e);this.F.push(new Gw(a,b,c,d,e));Hw(this);Iw(this);Jw(this);this.Oj();this.setActive(0);
this.j()};f.tB=function(a,b){this.yv(a)||this.jl(a);var c;a:if(null!=this.F){c=0;for(var d=this.F.length;c<d;c++)if(this.F[c].TITLE==a){c=this.F[c];break a}c=void 0}else c=!1;b instanceof vs?(d=b,c.nf.appendChild(b.a())):(d=new vs,d.k(c.nf),d.Ne(b));M(d.a(),Z.CSS.eD);this.j()};function Hw(a){D(a.F,function(a){H(a.Pb)}.bind(a))}function Iw(a){D(a.F,function(a,c){G(a.Pb,"click",function(){this.Oj();this.setActive(c)}.bind(this))}.bind(a))}
function Jw(a){D(a.F,function(a,c){Kw(this,c);Lw(this,c)}.bind(a))}function Kw(a,b){G(a.F[b].Pb,"mouseover",function(){!0!==this.F[b].dj&&(M(this.F[b].Pb,Z.CSS.Sh),M(this.F[b].Pb,zk(Z.CSS.Sh,this.orientation)),M(this.F[b].Za,Z.CSS.Mk))}.bind(a))}function Lw(a,b){G(a.F[b].Pb,"mouseout",function(){!0!==this.F[b].dj&&(ph(this.F[b].Pb,Z.CSS.Sh),ph(this.F[b].Pb,zk(Z.CSS.Sh,this.orientation)),ph(this.F[b].Za,Z.CSS.Mk))}.bind(a))}
f.setActive=function(a){this.F[a].dj=!0;this.Tl=this.Ye;this.Ye=a;Dw(this.$j,a);M(this.F[a].Pb,Z.CSS.Sh);M(this.F[a].Pb,zk(Z.CSS.Sh,this.orientation));M(this.F[a].nf,Z.CSS.Uo);M(this.F[a].nf,zk(Z.CSS.Uo,this.orientation));M(this.F[a].Za,Z.CSS.Mk);M(this.F[a].Za,zk(Z.CSS.Mk,this.orientation))};
f.my=function(a){this.F[a].dj=!1;Dw(this.$j,0);ph(this.F[a].Pb,Z.CSS.Sh);ph(this.F[a].Pb,zk(Z.CSS.Sh,this.orientation));ph(this.F[a].nf,Z.CSS.Uo);ph(this.F[a].nf,zk(Z.CSS.Uo,this.orientation));ph(this.F[a].Za,Z.CSS.Mk);ph(this.F[a].Za,zk(Z.CSS.Mk,this.orientation))};f.Oj=function(){D(this.F,function(a,b){this.my(b)}.bind(this))};
f.j=function(){if(this.a().parentNode){M(this.a(),Z.kc);M(this.a(),zk(Z.kc,this.orientation));D(this.F,function(a){M(a.Pb,zk(Z.CSS.Pb,this.orientation));M(a.Za,zk(Z.CSS.Za,this.orientation));M(a.nf,zk(Z.CSS.nf,this.orientation))}.bind(this));switch(this.orientation){case "TOP":Mw(this);break;case "BOTTOM":this.FO();break;case "RIGHT":Nw(this)}if(0<this.F.length){var a=U(this.F[0].Pb);0<a.width&&0<a.height&&(this.$d=a)}}};
function Nw(a){D(a.F,function(a){this.a().parentNode&&sl(a.Pb,{height:(100/this.F.length).toString()+"%"})}.bind(a))}function Mw(a){var b;D(a.F,function(a,d){this.a().parentNode&&(b=100/this.F.length,sl(a.Pb,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function Ow(a){D(a.F,function(a){C(a,function(c,d){H(c);c.e?c.g():c.g&&c.g();delete c;delete a[d]});tb(a);delete a});Ib(a.F)}
f.e=function(){Z.c.e.call(this);D(this.bq(),function(a){H(a)}.bind(this));Ow(this);delete this.F;H(this.$j);this.$j.g();delete this.$j;delete this.Ye;delete this.Tl;delete this.EO;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",Ew);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",Fw);v("nrg.ui.Tabs.ID_PREFIX",Z.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",Z.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",Gw);v("nrg.ui.Tabs.prototype.tabSize",Z.prototype.$d);v("nrg.ui.Tabs.prototype.render",Z.prototype.k);
v("nrg.ui.Tabs.prototype.getTabCount",Z.prototype.FG);v("nrg.ui.Tabs.prototype.getLastActiveTab",Z.prototype.WF);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",Z.prototype.tG);v("nrg.ui.Tabs.prototype.getTabElements",Z.prototype.bq);v("nrg.ui.Tabs.prototype.getTabPages",Z.prototype.cq);v("nrg.ui.Tabs.prototype.getTabIcons",Z.prototype.GG);v("nrg.ui.Tabs.prototype.addTabs",Z.prototype.mE);v("nrg.ui.Tabs.prototype.reset",Z.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",Z.prototype.yv);
v("nrg.ui.Tabs.prototype.addTab",Z.prototype.jl);v("nrg.ui.Tabs.prototype.setTabPageContents",Z.prototype.tB);v("nrg.ui.Tabs.prototype.setActive",Z.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",Z.prototype.my);v("nrg.ui.Tabs.prototype.deactivateAll",Z.prototype.Oj);v("nrg.ui.Tabs.prototype.updateStyle",Z.prototype.j);v("nrg.ui.Tabs.prototype.disposeInternal",Z.prototype.e);function Pw(a){Z.call(this,a)}w(Pw,Z);v("nrg.ui.ZipTabs",Pw);Pw.ID_PREFIX="nrg.ui.ZipTabs";f=Pw.prototype;f.k=function(a){Pw.c.k.call(this,a);M(this.a(),zk(Pw.kc,this.orientation));this.mc=new Lq(this.a(),this.orientation);Qw(this)};f.Dh=function(a){this.mc.Dh(a);this.j()};f.L=function(){return this.mc};
function Qw(a){G(a.mc,"resize",function(a){this.dh();if(null!=this.$d){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.$d.height-this.q.height)?this.Oj():this.setActive(this.Ye);break;case "LEFT":case "RIGHT":4>=Math.abs(this.$d.width-this.q.width)?this.Oj():this.setActive(this.Ye)}this.dispatchEvent({type:"resize",size:a.size,Ae:a.Ae})}}.bind(a))}
f.Bb=function(a,b,c){this.j();a?(this.setActive(b||0),this.mc.ef(this.orientation,"MAX",null,c)):(this.Oj(),this.mc.ef(this.orientation,"MIN",null,c))};f.j=function(){Pw.c.j.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.$d&&this.mc.jB(this.$d.height);break;case "LEFT":case "RIGHT":null!=this.$d&&this.mc.lB(this.$d.width)}this.mc.update()};
f.jl=function(a){Pw.c.jl.call(this,a);1==this.bq().length&&this.j();D(this.bq(),function(a){G(a,"click",function(){if(null!=this.$d)switch(this.j(),this.dh(),this.orientation){case "BOTTOM":4>=Math.abs(this.q.height-this.$d.height)?(this.setActive(this.Ye),this.mc.ef("BOTTOM","MAX",void 0)):this.Ye==this.Tl&&this.mc.ef("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.q.height-this.$d.height)?(this.setActive(this.Ye),this.mc.ef("TOP","MAX",void 0)):this.Ye==this.Tl&&this.mc.ef("TOP","MIN",
void 0);break;case "RIGHT":null!=this.$d&&(4>=Math.abs(this.q.width-this.$d.width)?(this.setActive(this.Ye),this.mc.ef("RIGHT","MAX",void 0)):this.Ye==this.Tl&&this.mc.ef("RIGHT","MIN",void 0))}}.bind(this))}.bind(this));this.Oj();this.j()};f.e=function(){Pw.c.e.call(this);H(this.mc);this.mc.g();delete this.mc};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{vC:"fa"});v("nrg.ui.ZipTabs.ID_PREFIX",Pw.ID_PREFIX);
v("nrg.ui.ZipTabs.prototype.render",Pw.prototype.k);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",Pw.prototype.Dh);v("nrg.ui.ZipTabs.prototype.getResizable",Pw.prototype.L);v("nrg.ui.ZipTabs.prototype.setExpanded",Pw.prototype.Bb);v("nrg.ui.ZipTabs.prototype.updateStyle",Pw.prototype.j);v("nrg.ui.ZipTabs.prototype.addTab",Pw.prototype.jl);v("nrg.ui.ZipTabs.prototype.disposeInternal",Pw.prototype.e);/*
 Copyright 2014 Washington Universityf
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
function Rw(){V.call(this);this.Xc=Rw.ModalStates.Lk}w(Rw,V);v("xiv.ui.Modal",Rw);Rw.ModalStates={fe:"fullscreen",Ke:"popup",Kr:"fullscreen-popup",bg:"windowed",Lk:"demo",BC:"demp-fullscreen"};Rw.ID_PREFIX="xiv.ui.Modal";Rw.CSS_SUFFIX={Qo:"background",qL:"columnmenu",mM:"rowmenu",rL:"button",nM:"button",gD:"projecttab",hD:"projecttab-bounds",iD:"projecttab-dragger",jD:"projecttab-dragger-handle",Xv:"addsubjects"};
function Sw(){var a={};C(Tw,function(b,c){a[c]=Rw.ID_PREFIX+"."+db(b.key)+".Button"});var b=Ql(ob(a)),c={};C(a,function(a,e){c[e]=b[a];var h=zk(a);b[a].className=h});return c}var Tw={Kk:{key:"CLOSE",title:"Close XNAT Image Viewer."},fe:{key:"FULLSCREEN",title:"Enter full-screen mode."},Ke:{key:"POPUP",title:"Popup to new window."},bg:{key:"WINDOWED",title:"Exit full-screen mode."}};f=Rw.prototype;f.tn=29;f.Dr=29;f.Gq=320;f.Hq=320;f.UG=function(){return this.Ca};f.LG=function(){return this.Q};
f.vG=function(){return this.Ob};f.sG=function(){return this.P.Ke};f.xF=function(){return this.P.Kk};f.NF=function(){return this.P.fe};f.k=function(a){Rw.c.k.call(this,a);this.Jz();this.Ca.Jt(null,!1);this.$b(this.Xc)};
f.$b=function(a){null!=this.Xc&&(this.Zq=this.Xc);this.Xc=a;null!=this.Zq&&ph(this.a(),zk(this.constructor.kc,this.Zq));M(this.a(),zk(this.constructor.kc,this.Xc));this.Xc==Rw.ModalStates.Lk?(this.P.fe.style.visibility="visible",this.P.bg.style.visibility="hidden"):this.Xc==Rw.ModalStates.bg?(this.P.fe.style.visibility="visible",this.P.bg.style.visibility="hidden"):this.Xc==Rw.ModalStates.Ke?(this.P.Ke.style.visibility="hidden",this.P.Kk.style.visibility="hidden",this.P.fe.style.visibility="visible",
this.P.bg.style.visibility="hidden"):this.Xc==Rw.ModalStates.Kr?(this.P.Ke.style.visibility="hidden",this.P.fe.style.visibility="hidden",this.P.bg.style.visibility="visible"):this.Xc==Rw.ModalStates.fe&&(this.P.Ke.style.visibility="visible",this.P.fe.style.visibility="hidden",this.P.bg.style.visibility="visible");this.j()};f.Al=function(){return this.Xc};f.Gi=function(){this.Q.loop(function(a){a.setActive(!1);this.Ca.loop(function(b){-1<b.gb.indexOf(a.pf)&&a.setActive(!0)})}.bind(this))};
f.Gx=function(){Uw(this);this.rd=null!=this.rd?this.rd:[];this.Bc=null!=this.Bc?this.Bc:new hl;Vw(this);Ww(this);G(this.Bc,"end",this.NI.bind(this));D(this.rd,function(a){this.Bc.add(a)}.bind(this));this.Bc.play();this.Gi()};f.NI=function(){D(this.rd,function(a){this.Bc.remove(a);H(a);a.Re();a.g()}.bind(this));Ib(this.rd);this.j();Xw(this)};function Xw(a){a.Ca.loop(function(a){0==a.a().style.opacity&&xl(a.a(),300)})}
function Vw(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.rd.push(new Xk(b,[b.offsetLeft,b.offsetTop],[this.pa.Db.cg[d][e],this.pa.Db.le[d][e]],300,vl))}.bind(a))}function Ww(a){var b=null;a.Ca.loop(function(a,d,e){b=a.a();this.rd.push(new Yk(b,[b.offsetWidth,b.offsetHeight],[this.pa.Db.qj[d][e],this.pa.Db.im[d][e]],300,vl))}.bind(a))}
function Uw(a){a.pa=null!=a.pa?a.pa:{};a.dh();a.pa.Do={};a.pa.Do.qj=Math.round(U(a.Ob.a()).width);a.pa.Do.im=Math.round(a.q.height-2*a.Dr);a.pa.Do.le=Math.round(a.Dr);Yw(a);Zw(a)}function Yw(a){a.pa.Db={};a.pa.Db.qj=a.Ca.gn();a.pa.Db.im=a.Ca.gn();a.Ca.loop(function(a,c,d,e,h){this.pa.Db.qj[c][d]=Math.round((this.q.width-this.pa.Do.qj-this.tn)/h-this.tn);this.pa.Db.im[c][d]=Math.round((this.q.height-(e+1)*this.tn)/e)}.bind(a))}
function Zw(a){a.pa.Db.cg=a.Ca.gn();a.pa.Db.le=a.Ca.gn();a.pa.Db.vD=a.pa.Do.qj+a.Dr;var b=0;a.Ca.loop(function(a,d,e){b=this.pa.Db.vD+e*(this.pa.Db.qj[d][e]+this.Dr);this.pa.Db.cg[d][e]=b;this.pa.Db.le[d][e]=d*(this.pa.Db.im[d][e]+this.tn);window.console.log();this.pa.Db.le[d][e]+=this.tn}.bind(a))}f.j=function(){Uw(this);this.Ob&&this.Ob.j();$w(this);this.Gi();this.Q.j();this.Q.Kc()};
function $w(a){a.Ca&&a.Ca.loop(function(a,c,d){sl(a.a(),{height:this.pa.Db.im[c][d],width:this.pa.Db.qj[c][d],left:this.pa.Db.cg[c][d],top:this.pa.Db.le[c][d]});a.j()}.bind(a))}
f.Jz=function(){var a=Q("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=Rw.CSS.Qo;this.a().appendChild(a);this.Or=Q("div");Th(this.a(),this.Or);M(this.Or,Rw.CSS.hD);this.Ob=new Pw("RIGHT");this.Ob.k(this.a());M(this.Ob.a(),Rw.CSS.gD);this.Q=new sw;this.Q.pv(!0);this.Q.bv(this.a());var b;b=b||G;b(this.Q,"B",this.pJ.bind(this));b(this.Q,"C",this.oJ.bind(this));b(this.Q,"da",this.hJ.bind(this));b(this.Q,"ba",this.kJ.bind(this));b(this.Q,"ca",this.jJ.bind(this));b(this.Q,"ea",this.mJ.bind(this));
this.Q.k(this.Ob.a());this.Ob.tB("Project Browser",this.Q);this.Ob.Dh(this.Or);a=this.Ob.L().$c("RIGHT");M(a,Rw.CSS.iD);this.Ob.L().zl("RIGHT").mB(5);Th(a,Q("div",{id:Kv.ID_PREFIX+"_DraggerHandle_"+B(),"class":Rw.CSS.jD}));G(this.Ob,"resize",this.j.bind(this));G(this.Ob,"resize_end",this.j.bind(this));this.bh=Q("div",{id:Rw.ID_PREFIX+"_addSubjects_"+B(),"class":Rw.CSS.Xv},"+ Load all subjects in project");this.Ob.cq()[0].appendChild(this.bh);ul(this.bh,Rw.CSS.Xv+"-hovered");a=this.Ob.cq()[0];b=Wh(a)[0];
U(a);U(b);U(this.bh);b.style.height="calc(100% - 70px)";G(this.bh,"click",this.tI.bind(this));this.Ca=new cw;this.Ca.wB(this.a());var c;c=c||G;c(this.Ca,"W",this.Ku.bind(this));c(this.Ca,"X",this.Ju.bind(this));c(this.Ca,"Z",this.Ni.bind(this));G(this.Ca,"Y",this.CJ.bind(this));ax(this)};
function ax(a){a.P=Sw();C(a.P,function(a){Th(this.a(),a)}.bind(a));bx(a);a.P.Kk.innerHTML="<img src="+a.Ii+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.P.fe.innerHTML="<img src="+a.Ii+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.P.bg.innerHTML="<img src="+a.Ii+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.P.Ke.innerHTML="<img src="+a.Ii+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.tI=function(){this.dispatchEvent({type:Zm.FC.eL});Al(this.bh,150,function(){cx(this);var a=this.Ob.cq()[0];Wh(a)[0].setAttribute("style","");this.Q.Kc()}.bind(this))};function cx(a){null!=a.bh&&(S(a.bh),H(a.bh),delete a.bh)}f.CJ=function(){var a=Jh("xiv-ui-thumbnailgallery-thumbnail-dragging");D(a,function(a){S(a)});this.Gi();this.Q.hf.xi({TN:!0})};f.yI=function(){this.Xc===Rw.ModalStates.fe&&Ba.Cy.fF()};
f.FI=function(){Ba.Cy.yO(this.a().parentNode);this.Xc===Rw.ModalStates.Ke?this.$b(Rw.ModalStates.Kr):this.$b(Rw.ModalStates.fe)};f.FJ=function(){Ba.Cy.fF();this.$b(this.Zq)};function bx(a){var b;b=b||G;b(a.P.fe,"click",a.FI.bind(a));b(a.P.bg,"click",a.FJ.bind(a));b(a.P.Kk,"click",a.yI.bind(a))}f.pJ=function(a){this.Ca.Wr(a.nj.pf,function(a){a.Il()})};f.oJ=function(a){this.Ca.Wr(a.nj.pf,function(a){a.Io()})};f.jJ=function(a){this.Ca.dq(a.Bv).Io()};f.kJ=function(a){this.Ca.dq(a.Bv).Il()};
f.hJ=function(a){this.Ca.Ty().load(a.nj.pf);this.Gi()};f.mJ=function(a){this.Ca.dq(a.LK).load(a.nj.pf);this.Gi()};f.Ku=function(){this.Gi()};f.Ju=function(){this.Gi()};f.Ni=function(a){null!=a&&null!=a.pE?(a.oA&&D(a.oA,function(a){sl(a.a(),{opacity:0})}),this.Gx()):this.j();this.Q.Ux();this.Q.nx(this.Ca.nz())};
f.e=function(){Rw.c.e.call(this);tb(this.pa);delete this.pa;this.dt(this.rd);delete this.rd;this.Op(this.Bc);delete this.Bc;this.Pp(this.P);delete this.P;null!=this.Ca&&(H(this.Ca),this.Ca.g(),delete this.Ca);H(this.Ob);this.Ob.g();delete this.Ob;H(this.Q);this.Q.g();delete this.Q;cx(this);delete this.Xc;delete this.Zq};v("xiv.ui.Modal.EventType",Rw.FC);v("xiv.ui.Modal.ID_PREFIX",Rw.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",Rw.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",Rw.prototype.UG);
v("xiv.ui.Modal.prototype.getThumbnailGallery",Rw.prototype.LG);v("xiv.ui.Modal.prototype.getProjectTab",Rw.prototype.vG);v("xiv.ui.Modal.prototype.getPopupButton",Rw.prototype.sG);v("xiv.ui.Modal.prototype.getCloseButton",Rw.prototype.xF);v("xiv.ui.Modal.prototype.getFullScreenButton",Rw.prototype.NF);v("xiv.ui.Modal.prototype.render",Rw.prototype.k);v("xiv.ui.Modal.prototype.setState",Rw.prototype.$b);v("xiv.ui.Modal.prototype.getState",Rw.prototype.Al);
v("xiv.ui.Modal.prototype.highlightInUseThumbnails",Rw.prototype.Gi);v("xiv.ui.Modal.prototype.animateModal",Rw.prototype.Gx);v("xiv.ui.Modal.prototype.updateStyle",Rw.prototype.j);v("xiv.ui.Modal.prototype.initSubComponents",Rw.prototype.Jz);v("xiv.ui.Modal.prototype.disposeInternal",Rw.prototype.e);window["xiv.ui.Modal"]=Rw;window["xiv.ui.Modal.ModalStates"]=Rw.ModalStates;
