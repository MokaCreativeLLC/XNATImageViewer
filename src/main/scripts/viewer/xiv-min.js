var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.le=function(){return a.CA?a.CA:a.CA=new a}}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ga(a)}function ha(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ia(a){return"boolean"==typeof a}function u(a){return"number"==typeof a}function ja(a){return"function"==ga(a)}function la(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ma(a){return a[oa]||(a[oa]=++pa)}
var oa="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(null,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var wa=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ZO=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.AM=!0;A.ae=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.Bd=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.SE=0;this.bM=function(){return this.SE++}};function za(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.gD;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Aa);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba;function Ca(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ca);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ca,Error);Ca.prototype.name="CustomError";function Da(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ea(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Fa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ga(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ia(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ja=/(\.\d+)|(\d+)|(\D+)/g;function Ka(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ja),d=b.toLowerCase().match(Ja),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function La(a){if(!Ma.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Na,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ta,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Va,"&#0;"));return a}var Na=/&/g,Ra=/</g,Sa=/>/g,Ta=/"/g,Ua=/'/g,Va=/\x00/g,Ma=/[\x00&<>"']/;
function Wa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Xa(a){return Array.prototype.join.call(arguments,"")}
function Ya(a,b){for(var c=0,d=Ia(String(a)).split("."),e=Ia(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",p=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var q=p.exec(l)||["","",""],t=m.exec(n)||["","",""];if(0==q[0].length&&0==t[0].length)break;c=Za(0==q[1].length?0:parseInt(q[1],10),0==t[1].length?0:parseInt(t[1],10))||Za(0==q[2].length,0==t[2].length)||Za(q[2],t[2])}while(0==c)}return c}function Za(a,b){return a<b?-1:a>b?1:0}
var $a=2147483648*Math.random()|0;function B(){return"goog_"+$a++}function ab(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function bb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function cb(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function db(a,b){b.unshift(a);Ca.call(this,Fa.apply(null,b));b.shift()}w(db,Ca);db.prototype.name="AssertionError";function eb(a,b){throw new db("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var fb="closure_listenable_"+(1E6*Math.random()|0);function gb(a){return!(!a||!a[fb])}var hb=0;function ib(a,b,c,d,e){this.Hk=a;this.Or=null;this.src=b;this.type=c;this.rn=!!d;this.Pq=e;this.key=++hb;this.rm=this.$p=!1}function jb(a){a.rm=!0;a.Hk=null;a.Or=null;a.src=null;a.Pq=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function kb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function mb(a){var b=0,c;for(c in a)b++;return b}function nb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function pb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function qb(){var a=rb,b;for(b in a)return!1;return!0}function sb(a){for(var b in a)delete a[b]}function tb(a,b){b in a&&delete a[b]}
function ub(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function vb(a){var b={},c;for(c in a)b[c]=a[c];return b}var wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<wb.length;h++)c=wb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function yb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return yb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var zb=Array.prototype,Ab=zb.indexOf?function(a,b,c){return zb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Bb=zb.lastIndexOf?function(a,b,c){return zb.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(r(a))return r(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},D=zb.forEach?function(a,b,c){zb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Cb=zb.filter?function(a,b,c){return zb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=0,k=r(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Db=zb.map?function(a,b,c){return zb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=r(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=
b.call(c,h[k],k,a));return e},Eb=zb.some?function(a,b,c){return zb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Fb=zb.every?function(a,b,c){return zb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};
function Gb(a){var b;a:{b=Hb;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function Ib(a,b){return 0<=Ab(a,b)}function Jb(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Kb(a,b){Ib(a,b)||a.push(b)}function Lb(a,b){var c=Ab(a,b),d;(d=0<=c)&&zb.splice.call(a,c,1);return d}function Mb(a){return zb.concat.apply(zb,arguments)}
function Nb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ob(a,b,c,d){zb.splice.apply(a,Pb(arguments,1))}function Pb(a,b,c){return 2>=arguments.length?zb.slice.call(a,b):zb.slice.call(a,b,c)}function Qb(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b};function Rb(a){this.src=a;this.Oc={};this.kp=0}f=Rb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.Oc[h];a||(a=this.Oc[h]=[],this.kp++);var k=Sb(a,b,d,e);-1<k?(b=a[k],c||(b.$p=!1)):(b=new ib(b,this.src,h,!!d,e),b.$p=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Oc))return!1;var e=this.Oc[a];b=Sb(e,b,c,d);return-1<b?(jb(e[b]),zb.splice.call(e,b,1),0==e.length&&(delete this.Oc[a],this.kp--),!0):!1};
function Tb(a,b){var c=b.type;if(!(c in a.Oc))return!1;var d=Lb(a.Oc[c],b);d&&(jb(b),0==a.Oc[c].length&&(delete a.Oc[c],a.kp--));return d}f.tg=function(a){a=a&&a.toString();var b=0,c;for(c in this.Oc)if(!a||c==a){for(var d=this.Oc[c],e=0;e<d.length;e++)++b,jb(d[e]);delete this.Oc[c];this.kp--}return b};f.Nn=function(a,b,c,d){a=this.Oc[a.toString()];var e=-1;a&&(e=Sb(a,b,c,d));return-1<e?a[e]:null};
f.Qq=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return kb(this.Oc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].rn!=b))return!0;return!1})};function Sb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.rm&&h.Hk==b&&h.rn==!!c&&h.Pq==d)return e}return-1};var Ub;a:{var Vb=ba.navigator;if(Vb){var Wb=Vb.userAgent;if(Wb){Ub=Wb;break a}}Ub=""}function Xb(a){return-1!=Ub.indexOf(a)}function Yb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function Zb(){return Xb("Opera")||Xb("OPR")}function $b(){return Xb("Trident")||Xb("MSIE")}function ac(){return Xb("Safari")&&!Xb("Chrome")&&!Xb("CriOS")&&!Xb("Android")}
function bc(){var a=Ub;if($b()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(Zb())return a=Yb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Yb(a);return a[2]&&a[2][1]?a[2][1]:""};var cc,dc,ec;function fc(){return ba.navigator||null}var gc=Zb(),E=$b(),hc=Xb("Gecko")&&-1==Ub.toLowerCase().indexOf("webkit")&&!(Xb("Trident")||Xb("MSIE")),ic=-1!=Ub.toLowerCase().indexOf("webkit"),jc,kc=fc();jc=kc&&kc.platform||"";cc=-1!=jc.indexOf("Mac");dc=-1!=jc.indexOf("Win");ec=-1!=jc.indexOf("Linux");var lc=!!fc()&&-1!=(fc().appVersion||"").indexOf("X11");function mc(){var a=ba.document;return a?a.documentMode:void 0}
var nc=function(){var a="",b;if(gc&&ba.opera)return a=ba.opera.version,ja(a)?a():a;hc?b=/rv\:([^\);]+)(\)|;)/:E?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:ic&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Ub))?a[1]:"");return E&&(b=mc(),b>parseFloat(a))?String(b):a}(),oc={};function pc(a){return oc[a]||(oc[a]=0<=Ya(nc,a))}function qc(a){return E&&rc>=a}var sc=ba.document,rc=sc&&E?mc()||("CSS1Compat"==sc.compatMode?parseInt(nc,10):5):void 0;var tc=!E||qc(9),uc=!E||qc(9),vc=E&&!pc("9");!ic||pc("528");hc&&pc("1.9b")||E&&pc("8")||gc&&pc("9.5")||ic&&pc("528");hc&&!pc("8")||E&&pc("9");function wc(){0!=xc&&(yc[ma(this)]=this)}var xc=0,yc={};wc.prototype.ok=!1;wc.prototype.g=function(){if(!this.ok&&(this.ok=!0,this.f(),0!=xc)){var a=ma(this);delete yc[a]}};function zc(a,b){a.qo||(a.qo=[]);a.qo.push(ca(void 0)?ta(b,void 0):b)}wc.prototype.f=function(){if(this.qo)for(;this.qo.length;)this.qo.shift()()};function Ac(a){a&&"function"==typeof a.g&&a.g()}function Cc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Cc.apply(null,d):Ac(d)}};function Ec(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.rg=!1;this.Co=!0}Ec.prototype.f=function(){};Ec.prototype.g=function(){};Ec.prototype.stopPropagation=function(){this.rg=!0};Ec.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Co=!1};function Fc(a){a.preventDefault()};function Gc(a){Gc[" "](a);return a}Gc[" "]=ea;function Hc(a,b){Ec.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Mv=!1;this.Nc=null;a&&this.sa(a,b)}w(Hc,Ec);var Ic=[1,4,2];f=Hc.prototype;
f.sa=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(hc){var e;a:{try{Gc(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=ic||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=ic||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Mv=cc?a.metaKey:a.ctrlKey;this.state=a.state;this.Nc=a;a.defaultPrevented&&this.preventDefault()};function Jc(a){return(tc?0==a.Nc.button:"click"==a.type?!0:!!(a.Nc.button&Ic[0]))&&!(ic&&cc&&a.ctrlKey)}
f.stopPropagation=function(){Hc.d.stopPropagation.call(this);this.Nc.stopPropagation?this.Nc.stopPropagation():this.Nc.cancelBubble=!0};f.preventDefault=function(){Hc.d.preventDefault.call(this);var a=this.Nc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,vc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.kG=function(){return this.Nc};f.f=function(){};var Kc="closure_lm_"+(1E6*Math.random()|0),Lc={},Mc=0;function F(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)F(a,b[h],c,d,e);return null}c=Nc(c);return gb(a)?a.D(b,c,d,e):Oc(a,b,c,!1,d,e)}function Oc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Pc(a);l||(a[Kc]=l=new Rb(a));c=l.add(b,c,d,e,h);if(c.Or)return c;d=Qc();c.Or=d;d.src=a;d.Hk=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Rc(b.toString()),d);Mc++;return c}
function Qc(){var a=Sc,b=uc?function(c){return a.call(b.src,b.Hk,c)}:function(c){c=a.call(b.src,b.Hk,c);if(!c)return c};return b}function Tc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Tc(a,b[h],c,d,e);return null}c=Nc(c);return gb(a)?a.Su(b,c,d,e):Oc(a,b,c,!0,d,e)}function Uc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Uc(a,b[h],c,d,e);else c=Nc(c),gb(a)?a.rb(b,c,d,e):a&&(a=Pc(a))&&(b=a.Nn(b,c,!!d,e))&&Vc(b)}
function Vc(a){if(u(a)||!a||a.rm)return!1;var b=a.src;if(gb(b))return Tb(b.Xg,a);var c=a.type,d=a.Or;b.removeEventListener?b.removeEventListener(c,d,a.rn):b.detachEvent&&b.detachEvent(Rc(c),d);Mc--;(c=Pc(b))?(Tb(c,a),0==c.kp&&(c.src=null,b[Kc]=null)):jb(a);return!0}function I(a){if(a)if(gb(a))a.removeAllListeners(void 0);else if(a=Pc(a)){var b=0,c;for(c in a.Oc)for(var d=a.Oc[c].concat(),e=0;e<d.length;++e)Vc(d[e])&&++b}}
function Wc(a,b){if(gb(a))return a.Qq(b,void 0);var c=Pc(a);return!!c&&c.Qq(b,void 0)}function Rc(a){return a in Lc?Lc[a]:Lc[a]="on"+a}function Xc(a,b,c,d){var e=1;if(a=Pc(a))if(b=a.Oc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.rn==c&&!h.rm&&(e&=!1!==Yc(h,d))}return Boolean(e)}function Yc(a,b){var c=a.Hk,d=a.Pq||a.src;a.$p&&Vc(a);return c.call(d,b)}
function Sc(a,b){if(a.rm)return!0;if(!uc){var c=b||da("window.event"),d=new Hc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.rg&&0<=l;l--)d.currentTarget=c[l],e&=Xc(c[l],h,!0,d);for(l=0;!d.rg&&l<c.length;l++)d.currentTarget=c[l],e&=Xc(c[l],h,!1,d)}return e}return Yc(a,new Hc(b,this))}
function Pc(a){a=a[Kc];return a instanceof Rb?a:null}var Zc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Nc(a){return ja(a)?a:a[Zc]||(a[Zc]=function(b){return a.handleEvent(b)})};function $c(){wc.call(this);this.Xg=new Rb(this);this.bF=this;this.Kr=null}w($c,wc);$c.prototype[fb]=!0;f=$c.prototype;f.dw=function(a){this.Kr=a};f.addEventListener=function(a,b,c,d){F(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Kr;if(c)for(b=[];c;c=c.Kr)b.push(c);var c=this.bF,d=a.type||a;if(r(a))a=new Ec(a,c);else if(a instanceof Ec)a.target=a.target||c;else{var e=a;a=new Ec(d,c);xb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.rg&&0<=k;k--)h=a.currentTarget=b[k],e=ad(h,d,!0,a)&&e;a.rg||(h=a.currentTarget=c,e=ad(h,d,!0,a)&&e,a.rg||(e=ad(h,d,!1,a)&&e));if(b)for(k=0;!a.rg&&k<b.length;k++)h=a.currentTarget=b[k],e=ad(h,d,!1,a)&&e;return e};
f.f=function(){$c.d.f.call(this);this.removeAllListeners();this.Kr=null};f.D=function(a,b,c,d){return this.Xg.add(String(a),b,!1,c,d)};f.Su=function(a,b,c,d){return this.Xg.add(String(a),b,!0,c,d)};f.rb=function(a,b,c,d){return this.Xg.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.Xg?this.Xg.tg(a):0};
function ad(a,b,c,d){b=a.Xg.Oc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.rm&&k.rn==c){var l=k.Hk,n=k.Pq||k.src;k.$p&&Tb(a.Xg,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.Co}f.Nn=function(a,b,c,d){return this.Xg.Nn(String(a),b,c,d)};f.Qq=function(a,b){return this.Xg.Qq(ca(a)?String(a):void 0,b)};function bd(){$c.call(this);this.u="base";this.nd=window["X.counter"].bM();this.J=!1}w(bd,$c);bd.prototype.__defineGetter__("classname",function(){return this.u});bd.prototype.__defineGetter__("id",function(){return this.nd});v("X.base",bd);function cd(a,b){bd.call(this);this.u="triplets";this.Sf=Infinity;this.Pf=-Infinity;this.Tf=Infinity;this.Qf=-Infinity;this.Uf=Infinity;this.Rf=-Infinity;this.Bp=[0,0,0];this.Na=0;this.cc=new Float32Array(a);null!=b&&(this.cc=b.cc.subarray(0,b.cc.length),this.Na=this.cc.length,this.Sf=b.Sf,this.Pf=b.Pf,this.Tf=b.Tf,this.Qf=b.Qf,this.Uf=b.Uf,this.Rf=b.Rf,this.Bp=b.Bp.slice())}w(cd,bd);f=cd.prototype;
f.add=function(a,b,c){this.Sf=Math.min(this.Sf,a);this.Pf=Math.max(this.Pf,a);this.Tf=Math.min(this.Tf,b);this.Qf=Math.max(this.Qf,b);this.Uf=Math.min(this.Uf,c);this.Rf=Math.max(this.Rf,c);this.Bp=[(this.Sf+this.Pf)/2,(this.Tf+this.Qf)/2,(this.Uf+this.Rf)/2];this.J=!0;this.cc[this.Na++]=a;this.cc[this.Na++]=b;this.cc[this.Na++]=c;return this.Na/3};f.resize=function(){if(this.Na!=this.cc.length){var a=new Float32Array(this.Na);a.set(this.cc.subarray(0,this.Na));this.cc=a}};
f.get=function(a){a*=3;return[this.cc[a],this.cc[a+1],this.cc[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.cc=new Float32Array(this.cc.length);this.J=!0};cd.prototype.__defineGetter__("count",function(){this.resize();return this.cc.length/3});cd.prototype.__defineGetter__("length",function(){this.resize();return this.cc.length});v("X.triplets",cd);v("X.triplets.prototype.add",cd.prototype.add);v("X.triplets.prototype.resize",cd.prototype.resize);
v("X.triplets.prototype.get",cd.prototype.get);v("X.triplets.prototype.remove",cd.prototype.remove);v("X.triplets.prototype.clear",cd.prototype.clear);function dd(){bd.call(this);this.u="indexer";this.it=[];this.be={}}w(dd,bd);dd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.be||(this.be[b]=this.it.length,this.it.push(a));return this.be[b]};dd.prototype.unique=function(){return this.it};function ed(a){bd.call(this);this.u="file";this.Mp=a;this.J=!0}w(ed,bd);function fd(){this.Ng=this.ia=null}fd.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.ia=null;else{if(g(a)){if(1==a.length){this.ia=new ed(a[0]);return}this.ia=Db(a,function(a){var c=new J;c.ia=new ed(a);return c})}else this.ia=new ed(a);this.Ng=null}});fd.prototype.__defineGetter__("file",function(){return this.ia?g(this.ia)?this.ia.map(function(a){return a.ia.Mp}):this.ia.Mp:""});
fd.prototype.__defineGetter__("filedata",function(){return g(this.ia)?this.ia.map(function(a){return a.Ng}):this.Ng});fd.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.Ng=null;if(g(a))if(1==a.length)this.Ng=a[0];else{var b=this.ia.length,c;for(c=0;c<b;c++)this.ia[c].Ng=a[c]}else this.Ng=a});function gd(){return null};function hd(a,b,c){return Math.min(Math.max(a,b),c)};function id(a,b){this.Ab={};this.kb=[];this.Qh=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.kt(a)}f=id.prototype;f.dg=function(){return this.Qh};f.Xh=function(){kd(this);for(var a=[],b=0;b<this.kb.length;b++)a.push(this.Ab[this.kb[b]]);return a};f.Mn=function(){kd(this);return this.kb.concat()};
f.Ht=function(a){for(var b=0;b<this.kb.length;b++){var c=this.kb[b];if(ld(this.Ab,c)&&this.Ab[c]==a)return!0}return!1};f.Rl=function(a,b){if(this===a)return!0;if(this.Qh!=a.dg())return!1;var c=b||md;kd(this);for(var d,e=0;d=this.kb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function md(a,b){return a===b}f.jm=function(){return 0==this.Qh};f.clear=function(){this.Ab={};this.Qh=this.kb.length=0};
f.remove=function(a){return ld(this.Ab,a)?(delete this.Ab[a],this.Qh--,this.kb.length>2*this.Qh&&kd(this),!0):!1};function kd(a){if(a.Qh!=a.kb.length){for(var b=0,c=0;b<a.kb.length;){var d=a.kb[b];ld(a.Ab,d)&&(a.kb[c++]=d);b++}a.kb.length=c}if(a.Qh!=a.kb.length){for(var e={},c=b=0;b<a.kb.length;)d=a.kb[b],ld(e,d)||(a.kb[c++]=d,e[d]=1),b++;a.kb.length=c}}f.get=function(a,b){return ld(this.Ab,a)?this.Ab[a]:b};f.set=function(a,b){ld(this.Ab,a)||(this.Qh++,this.kb.push(a));this.Ab[a]=b};
f.kt=function(a){var b;a instanceof id?(b=a.Mn(),a=a.Xh()):(b=ob(a),a=nb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.Mn(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new id(this)};f.Hw=function(){for(var a=new id,b=0;b<this.kb.length;b++){var c=this.kb[b];a.set(this.Ab[c],c)}return a};function ld(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function nd(){bd.call(this);this.u="colortable";this.be=new id;za(this,new fd)}w(nd,bd);nd.prototype.add=function(a,b,c,d,e,h){if(!(u(a)&&u(c)&&u(d)&&u(e)&&u(h)))throw Error("Invalid color table entry.");this.be.set(a,[b,c,d,e,h]);this.J=!0};nd.prototype.get=function(a){return this.be.get(a)};v("X.colortable.prototype.get",nd.prototype.get);function od(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}od.prototype.clone=function(){return new od(this.x,this.y,this.z)};od.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};od.prototype.Cw=function(){return[this.x,this.y,this.z]};function K(a,b,c){this.x=a;this.y=b;this.z=c}w(K,od);f=K.prototype;f.clone=function(){return new K(this.x,this.y,this.z)};f.ng=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.Db=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.ng())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.Ec=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.Rl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function pd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function qd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function rd(a,b){return new K(a.x+b.x,a.y+b.y,a.z+b.z)}function sd(a,b){return new K(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.Q=K;f=A.Q.prototype;f.clone=K.prototype.clone;f.ng=K.prototype.ng;f.scale=K.prototype.scale;f.Db=K.prototype.Db;f.add=K.prototype.add;f.Ec=K.prototype.Ec;f.normalize=function(){var a=this.ng();return 0==a?this.scale(0):this.scale(1/a)};A.Q.Yi=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.Q.mk=sd;A.Q.Yt=pd;A.Q.kr=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new K(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.Q.prototype.__defineGetter__("xx",function(){return this.x});
A.Q.prototype.__defineGetter__("yy",function(){return this.y});A.Q.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.Q);v("X.vector.prototype.clone",A.Q.prototype.clone);v("X.vector.prototype.magnitude",A.Q.prototype.ng);v("X.vector.prototype.scale",A.Q.prototype.scale);v("X.vector.prototype.invert",A.Q.prototype.Db);v("X.vector.prototype.normalize",A.Q.prototype.normalize);v("X.vector.prototype.add",A.Q.prototype.add);v("X.vector.prototype.subtract",A.Q.prototype.Ec);
v("X.vector.dot",A.Q.Yi);v("X.vector.cross",A.Q.mk);v("X.vector.distance",A.Q.Yt);v("X.vector.lerp",A.Q.kr);function td(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}td.prototype.BYTES_PER_ELEMENT=8;td.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};td.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{td.BYTES_PER_ELEMENT=8}catch(ud){}td.prototype.BYTES_PER_ELEMENT=td.prototype.BYTES_PER_ELEMENT;td.prototype.set=td.prototype.set;td.prototype.toString=td.prototype.toString;v("Float64Array",td)};function vd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}vd.prototype.BYTES_PER_ELEMENT=4;vd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};vd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(vd.BYTES_PER_ELEMENT=4,vd.prototype.BYTES_PER_ELEMENT=vd.prototype.BYTES_PER_ELEMENT,vd.prototype.set=vd.prototype.set,vd.prototype.toString=vd.prototype.toString,v("Float32Array",vd));function wd(){return new Float32Array(3)}function xd(a,b,c){var d=wd();d[0]=a;d[1]=b;d[2]=c;return d}function yd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function zd(){return new Float32Array(4)}function Ad(a,b,c,d){var e=zd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Bd(){return new Float32Array(16)}function Cd(){var a=Bd();a[0]=a[5]=a[10]=a[15]=1;return a}function Dd(a,b,c,d,e,h,k,l,n,p,m,q,t,s,z,y,H){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=p;a[9]=m;a[10]=q;a[11]=t;a[12]=s;a[13]=z;a[14]=y;a[15]=H;return a}function Ed(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Fd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function L(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Gd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Hd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Id(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],p=a[6],m=a[7],q=a[8],t=a[9],s=a[10],z=a[11],y=a[12],H=a[13],O=a[14];a=a[15];var N=b[0],G=b[1],S=b[2],Z=b[3],V=b[4],va=b[5],na=b[6],xa=b[7],Oa=b[8],Ha=b[9],Pa=b[10],ka=b[11],ya=b[12],qa=b[13],Dc=b[14];b=b[15];c[0]=d*N+l*G+q*S+y*Z;c[1]=e*N+n*G+t*S+H*Z;c[2]=h*N+p*G+s*S+O*Z;c[3]=k*N+m*G+z*S+a*Z;c[4]=d*V+l*va+q*na+y*xa;c[5]=e*V+n*va+t*na+H*xa;c[6]=h*V+p*va+s*na+O*xa;c[7]=k*V+m*va+z*na+a*xa;c[8]=d*Oa+l*Ha+q*Pa+y*ka;c[9]=e*Oa+n*Ha+t*Pa+H*ka;
c[10]=h*Oa+p*Ha+s*Pa+O*ka;c[11]=k*Oa+m*Ha+z*Pa+a*ka;c[12]=d*ya+l*qa+q*Dc+y*b;c[13]=e*ya+n*qa+t*Dc+H*b;c[14]=h*ya+p*qa+s*Dc+O*b;c[15]=k*ya+m*qa+z*Dc+a*b;return c}
function Jd(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=a[8],q=a[9],t=a[10],s=a[11],z=a[12],y=a[13],H=a[14],O=a[15],N=c*l-d*k,G=c*n-e*k,S=c*p-h*k,Z=d*n-e*l,V=d*p-h*l,va=e*p-h*n,na=m*y-q*z,xa=m*H-t*z,Oa=m*O-s*z,Ha=q*H-t*y,Pa=q*O-s*y,ka=t*O-s*H,ya=N*ka-G*Pa+S*Ha+Z*Oa-V*xa+va*na;if(0==ya)return!1;ya=1/ya;b[0]=(l*ka-n*Pa+p*Ha)*ya;b[1]=(-d*ka+e*Pa-h*Ha)*ya;b[2]=(y*va-H*V+O*Z)*ya;b[3]=(-q*va+t*V-s*Z)*ya;b[4]=(-k*ka+n*Oa-p*xa)*ya;b[5]=(c*ka-e*Oa+h*xa)*ya;b[6]=(-z*va+H*S-O*G)*ya;b[7]=
(m*va-t*S+s*G)*ya;b[8]=(k*Pa-l*Oa+p*na)*ya;b[9]=(-c*Pa+d*Oa-h*na)*ya;b[10]=(z*V-y*S+O*N)*ya;b[11]=(-m*V+q*S-s*N)*ya;b[12]=(-k*Ha+l*xa-n*na)*ya;b[13]=(c*Ha-d*xa+e*na)*ya;b[14]=(-z*Z+y*G-H*N)*ya;b[15]=(m*Z-q*G+t*N)*ya;return!0}function Kd(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Ld(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Md(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.v={};A.v.SA=function(a,b,c,d){c=c.Ec(b);c.normalize();d=A.Q.mk(c,d);d.normalize();var e=A.Q.mk(d,c);e.normalize();c.Db();L(a,0,d.x,d.y,d.z,0);L(a,1,e.x,e.y,e.z,0);L(a,2,c.x,c.y,c.z,0);Md(a,-b.x,-b.y,-b.z);return a};A.v.Vb=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.Q((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.v.RL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Hd(a,b,d);Hd(a,c,e);Gd(a,b,e);Gd(a,c,d);return a};A.v.QL=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Fd(a,b,d);Fd(a,c,e);Ed(a,b,e);Ed(a,c,d);return a};A.v.Vn=Cd;A.v.clone=function(a){var b=Bd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.v.Hw=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.v.MF=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],p=a[8],m=a[9],q=a[10],t=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(q*a-t*y)-(b*l-d*h)*(m*a-t*z)+(b*n-e*h)*(m*y-q*z)+(c*l-d*k)*(p*a-t*s)-(c*n-e*k)*(p*y-q*s)+(d*n-e*l)*(p*z-m*s)};A.v.Db=Jd;A.v.Yu=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Dd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.v.bJ=function(a,b,c,d,e,h,k){return Dd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.v.cJ=function(a,b,c,d,e,h,k){return Dd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.v.multiply=Id;A.v.bB=Ld;A.v.translate=Md;A.v.scale=function(a,b,c,d){return Dd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.v.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],p=a[4],m=a[5],q=a[6],t=a[7],s=a[8],z=a[9],y=a[10],H=a[11],O=Math.cos(b),N=Math.sin(b),G=1-O;b=c*c*G+O;var S=c*d*G+e*N,Z=c*e*G-d*N,V=c*d*G-e*N,va=d*d*G+O,na=d*e*G+c*N,xa=c*e*G+d*N;c=d*e*G-c*N;e=e*e*G+O;return Dd(a,h*b+p*S+s*Z,k*b+m*S+z*Z,l*b+q*S+y*Z,n*b+t*S+H*Z,h*V+p*va+s*na,k*V+m*va+z*na,l*V+q*va+y*na,n*V+t*va+H*na,h*xa+p*c+s*e,k*xa+m*c+z*e,l*xa+q*c+y*e,n*xa+t*c+H*e,a[12],a[13],a[14],a[15])};
A.v.Rr=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[4]=c*m+k*q;a[5]=d*m+l*q;a[6]=e*m+n*q;a[7]=h*m+p*q;a[8]=c*-q+k*m;a[9]=d*-q+l*m;a[10]=e*-q+n*m;a[11]=h*-q+p*m;return a};A.v.Sr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*-q;a[1]=d*m+l*-q;a[2]=e*m+n*-q;a[3]=h*m+p*-q;a[8]=c*q+k*m;a[9]=d*q+l*m;a[10]=e*q+n*m;a[11]=h*q+p*m;return a};
A.v.Tr=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*q;a[1]=d*m+l*q;a[2]=e*m+n*q;a[3]=h*m+p*q;a[4]=c*-q+k*m;a[5]=d*-q+l*m;a[6]=e*-q+n*m;a[7]=h*-q+p*m;return a};v("X.matrix.identity",A.v.Vn);v("X.matrix.clone",A.v.clone);v("X.matrix.transpose",A.v.Hw);v("X.matrix.determinant",A.v.MF);v("X.matrix.invert",A.v.Db);v("X.matrix.multiply",A.v.multiply);v("X.matrix.multiplyByVector",A.v.Vb);v("X.matrix.multiplyByVec4",A.v.bB);
v("X.matrix.makePerspective",A.v.Yu);v("X.matrix.makeFrustum",A.v.bJ);v("X.matrix.makeOrtho",A.v.cJ);v("X.matrix.makeLookAt",A.v.SA);v("X.matrix.translate",A.v.translate);v("X.matrix.scale",A.v.scale);v("X.matrix.rotate",A.v.rotate);v("X.matrix.rotateX",A.v.Rr);v("X.matrix.rotateY",A.v.Sr);v("X.matrix.rotateZ",A.v.Tr);v("X.matrix.swapRows",A.v.RL);v("X.matrix.swapCols",A.v.QL);function Nd(){bd.call(this);this.u="transform";this.xb=A.v.Vn()}w(Nd,bd);Nd.prototype.__defineGetter__("matrix",function(){return this.xb});Nd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.xb=a;this.ha()});f=Nd.prototype;f.Rr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.Rr(this.xb,a*Math.PI/180);this.ha()};
f.Sr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.Sr(this.xb,a*Math.PI/180);this.ha()};f.Tr=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.Tr(this.xb,a*Math.PI/180);this.ha()};f.SC=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.xb,a,0,0);this.ha()};f.TC=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.xb,0,a,0);this.ha()};
f.UC=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.xb,0,0,a);this.ha()};function Od(a,b,c){a.xb[b+4*c]*=-1;a.ha()}f.eG=function(){Od(this,0,0)};f.fG=function(){Od(this,1,1)};f.gG=function(){Od(this,2,2)};f.ha=function(){this.J=!0};v("X.transform",Nd);v("X.transform.prototype.rotateX",Nd.prototype.Rr);v("X.transform.prototype.rotateY",Nd.prototype.Sr);v("X.transform.prototype.rotateZ",Nd.prototype.Tr);v("X.transform.prototype.translateX",Nd.prototype.SC);
v("X.transform.prototype.translateY",Nd.prototype.TC);v("X.transform.prototype.translateZ",Nd.prototype.UC);v("X.transform.prototype.flipX",Nd.prototype.eG);v("X.transform.prototype.flipY",Nd.prototype.fG);v("X.transform.prototype.flipZ",Nd.prototype.gG);v("X.transform.prototype.modified",Nd.prototype.ha);function Pd(){bd.call(this);this.u="texture";this.Hi=this.Of=this.ia=null;this.bt=this.ct=0;this.Cx=!1;za(this,new fd)}w(Pd,bd);Pd.prototype.__defineSetter__("rawData",function(a){this.Hi=a;this.J=!0});Pd.prototype.__defineSetter__("rawDataHeight",function(a){this.bt=a;this.J=!0});Pd.prototype.__defineSetter__("rawDataWidth",function(a){this.ct=a;this.J=!0});Pd.prototype.__defineSetter__("grayscale",function(a){this.Cx=a;this.J=!0});v("X.texture",Pd);function Rd(){this.Jd=Sd;this.jc=new Nd;this.Ia=[1,1,1];this.Dl=this.Ya=this.Kc=this.da=this.G=null;this.yl=[];this.nb=!0;this.xl=this.$m=1;this.pl=null;this.Rm=!1;this.Vc=1;this.md=0;this.Zm=!0}var Sd="TRIANGLES";Rd.prototype.__defineSetter__("type",function(a){return this.Jd=a});Rd.prototype.__defineGetter__("type",function(){return this.Jd});Rd.prototype.__defineGetter__("texture",function(){this.Ya||(this.Ya=new Pd);return this.Ya});Rd.prototype.__defineGetter__("transform",function(){return this.jc});
Rd.prototype.__defineGetter__("points",function(){return this.G});Rd.prototype.__defineSetter__("points",function(a){this.G=a});Rd.prototype.__defineGetter__("normals",function(){return this.da});Rd.prototype.__defineSetter__("normals",function(a){this.da=a});Rd.prototype.__defineGetter__("colors",function(){return this.Kc});Rd.prototype.__defineSetter__("colors",function(a){this.Kc=a});Rd.prototype.__defineGetter__("color",function(){return this.Ia});
Rd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Ia=a;this.J=!0});Rd.prototype.__defineGetter__("opacity",function(){return this.Vc});Rd.prototype.__defineSetter__("opacity",function(a){if(!u(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Vc=a;this.J=!0});Rd.prototype.__defineGetter__("caption",function(){return this.pl});
Rd.prototype.__defineSetter__("caption",function(a){this.pl=a;this.J=!0});Rd.prototype.__defineGetter__("visible",function(){return this.nb});Rd.prototype.__defineSetter__("visible",function(a){for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.nb=a;this.J=!0});Rd.prototype.__defineGetter__("pointsize",function(){return this.$m});Rd.prototype.__defineSetter__("pointsize",function(a){if(!u(a))throw Error("Invalid point size.");this.$m=a;this.J=!0});
Rd.prototype.__defineGetter__("magicmode",function(){return this.Rm});Rd.prototype.__defineSetter__("magicmode",function(a){if(!ia(a))throw Error("Invalid magic mode setting.");this.Rm=a;this.J=!0});Rd.prototype.__defineGetter__("linewidth",function(){return this.xl});Rd.prototype.__defineSetter__("linewidth",function(a){if(!u(a))throw Error("Invalid line width.");this.xl=a;this.J=!0});Rd.prototype.__defineGetter__("pickable",function(){return this.Zm});
Rd.prototype.__defineSetter__("pickable",function(a){if(!ia(a))throw Error("Invalid pickable setting.");this.Zm=a;this.J=!0});Rd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.Dl});Rd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Td(){this.ce=Infinity;this.wb=this.bc=-Infinity;this.yb=Infinity;this.Di=[0,0,0];this.Bi=[1,1,1]}Td.prototype.__defineGetter__("lowerThreshold",function(){return this.wb});Td.prototype.__defineSetter__("lowerThreshold",function(a){this.wb=a});Td.prototype.__defineGetter__("upperThreshold",function(){return this.yb});Td.prototype.__defineSetter__("upperThreshold",function(a){this.yb=a});Td.prototype.__defineGetter__("min",function(){return this.ce});Td.prototype.__defineGetter__("max",function(){return this.bc});
Td.prototype.__defineGetter__("minColor",function(){return this.Di});Td.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.Di=a});Td.prototype.__defineGetter__("maxColor",function(){return this.Bi});Td.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.Bi=a});function Ud(){bd.call(this);this.u="scalars";this.Om=this.cb=null;this.Px=!0;this.Rs=0;za(this,new fd);za(this,new Td);this.Di=[0,1,0];this.Bi=[1,0,0]}w(Ud,bd);Ud.prototype.__defineGetter__("array",function(){return this.cb});Ud.prototype.__defineSetter__("array",function(a){this.Om=this.cb=a;this.J=!0});Ud.prototype.__defineGetter__("interpolation",function(){return this.Rs});Ud.prototype.__defineSetter__("interpolation",function(a){this.Rs=a});v("X.scalars",Ud);function Vd(a){bd.call(this);this.u="object";this.j=[];this.eb=this.Gd=null;za(this,new Rd);null!=a&&this.jk(a)}w(Vd,bd);
Vd.prototype.jk=function(a){this.Jd=a.Jd;this.jc=new Nd;this.jc.xb=new Float32Array(a.jc.xb);this.Ia=a.Ia.slice();a.G&&(this.G=new cd(a.G.length,a.G));a.da&&(this.da=new cd(a.da.length,a.da));a.Kc&&(this.Kc=new cd(a.Kc.length,a.Kc));this.Ya=a.Ya;this.Dl=a.Dl;a.ia&&(this.ia=new ed((new String(a.ia.Mp)).toString()));this.Vc=a.Vc;this.j.length=0;var b=a.j;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.j.push(new A[b[d].u](b[d]));this.nb=a.nb;this.$m=a.$m;this.xl=a.xl;a.pl&&(this.pl=(new String(a.pl)).toString());
this.Rm=a.Rm;this.Zm=a.Zm;this.yl=a.yl.slice();this.J=!0};Vd.prototype.__defineGetter__("colortable",function(){this.Gd||(this.Gd=new nd);return this.Gd});Vd.prototype.__defineGetter__("scalars",function(){this.eb||(this.eb=new Ud);return this.eb});Vd.prototype.__defineGetter__("children",function(){return this.j});Vd.prototype.ha=function(){var a=new Wd;a.Oa=this;this.dispatchEvent(a)};Vd.prototype.remove=function(){var a=new Xd;a.Oa=this;this.dispatchEvent(a)};
function Yd(a,b){if(!(null!=a&&null!=b&&a instanceof Vd&&b instanceof Vd))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Vc?-1:1==b.Vc?1:null!=a.md&&null!=b.md&&a.md>b.md?-1:1}v("X.object",Vd);v("X.object.prototype.modified",Vd.prototype.ha);v("X.object.prototype.remove",Vd.prototype.remove);function Zd(a){Ec.call(this,a);this.u="event"}w(Zd,Ec);var ae="pan"+B(),be="rotate"+B(),ce="zoom"+B(),de="scroll"+B();B();var ee="resetview"+B(),fe="windowlevel"+B(),ge="modified"+B(),he="remove"+B(),ie="progress"+B(),je="hover"+B(),ke="hover_end"+B(),le="computing"+B(),me="computing_end"+B(),ne="computing_progress"+B();function oe(){Zd.call(this,fe);this.Ws=this.jt=0}w(oe,Zd);function pe(){Zd.call(this,ae);this.md=new A.Q(0,0,0)}w(pe,Zd);function qe(){Zd.call(this,be);this.md=new A.Q(0,0,0)}
w(qe,Zd);function re(){Zd.call(this,ce);this.Nf=this.Og=!1}w(re,Zd);function te(){Zd.call(this,de);this.dc=!1}w(te,Zd);function ue(){Zd.call(this,je);this.Tp=this.Sp=0}w(ue,Zd);function ve(){Zd.call(this,ke)}w(ve,Zd);function we(){Zd.call(this,ee)}w(we,Zd);function Wd(){Zd.call(this,ge);this.wa=this.Oa=null}w(Wd,Zd);function Xd(){Zd.call(this,he);this.wa=this.Oa=null}w(Xd,Zd);function xe(){Zd.call(this,ie);this.$j=0}w(xe,Zd);function ye(){Zd.call(this,le);this.Oa=null}w(ye,Zd);
function Ce(){Zd.call(this,ne);this.$j=0}w(Ce,Zd);function De(){Zd.call(this,me);this.Oa=null}w(De,Zd);v("X.event.events.PAN",ae);v("X.event.events.ROTATE",be);v("X.event.events.ZOOM",ce);v("X.event.events.SCROLL",de);function Ee(){bd.call(this);this.u="parser";this._data=null;this.Na=0;this.VE=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Ip=!0}w(Ee,bd);Ee.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Fe(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Ge(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ee.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.Na,this.Na+=b*c));if(this.VE!=this.Ip)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function He(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Ad(0,0,0,1),e=zd();Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,0,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,b[1]-
1,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,0,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,b[1]-1,0,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,0,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(0,b[1]-1,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Ad(b[0]-1,b[1]-1,b[2]-1,1);Ld(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ie(a,b){var c=Cd();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=wd(),h=a[0],k=a[1],l=a[2],n=b[0],p=b[1],m=b[2];e[0]=k*m-l*p;e[1]=l*n-h*m;e[2]=h*p-k*n;yd(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];L(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);L(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);L(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=Bd();Jd(c,d);return[c,d]}
function Je(a,b,c,d,e,h,k,l,n){var p=new Ke;yd(c,c);for(var m=[],q=[],t=0;6>t;t++)for(var s=Math.floor(t/2),z=(s+1)%3,y=(s+2)%3,H=(4+2*s)%6,O=0;2>O;O++){var N=(2+O+2*s)%6,G=-(c[s]*(e[t]-a[s])+c[z]*(e[N]-a[z]))/c[y]+a[y];if(G>=e[H]&&G<=e[H+1]||G<=e[H]&&G>=e[H+1]){var S=[];S[s]=e[t];S[z]=e[N];S[y]=G;m.push(S)}else S=[],S[s]=e[t],S[z]=e[N],S[y]=G,q.push(S)}a=xd(0,0,1);a=Ie(c,a);e=a[0];a=a[1];s=[];for(q=0;q<m.length;++q)t=Ad(m[q][0],m[q][1],m[q][2],1),z=zd(),Ld(e,t,z),s.push([z[0],z[1],z[2]]);e=xd(1,
0,0);m=wd();Kd(a,e,m);q=xd(0,1,0);e=wd();Kd(a,q,e);t=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(q=q=0;q<s.length;++q)s[q][0]<t[0]&&(t[0]=s[q][0]),s[q][0]>t[1]&&(t[1]=s[q][0]),s[q][1]<t[2]&&(t[2]=s[q][1]),s[q][1]>t[3]&&(t[3]=s[q][1]),s[q][2]<t[4]&&(t[4]=s[q][2]),s[q][2]>t[5]&&(t[5]=s[q][2]);q=Ad(t[0]+(t[1]-t[0])/2,t[2]+(t[3]-t[2])/2,t[4]+(t[5]-t[4])/2,0);s=zd();Id(a,q,s);z=Math.floor(t[0]);y=Math.ceil(t[1]);z==y&&y++;H=y-z;O=Math.floor(t[2]);
N=Math.ceil(t[3]);G=N-O;S=b[0];b=b[1];var q=Math.ceil(H/S),Z=Math.ceil(G/b),V=new Uint8Array(4*q*Z),va=new Pd;va.ct=q;va.bt=Z;var Z=zd(),na=Ad(0,0,t[4],1),xa=Bd();Id(k.ME,a,xa);for(var Oa=N-1E-7,Ha=y-1E-7,Pa=0,ka=0,ya=0,qa=O,qa=O;qa<=Oa;qa+=b)for(ya++,ka=0,na[1]=qa,q=z;q<=Ha;q+=S){ka++;na[0]=q;Ld(xa,na,Z);var Dc=4*Pa,ze=Math.floor(Z[2]),Ae=Math.floor(Z[1]),Be=Math.floor(Z[0]);if(0<=Be&&Be<k.Ea[0]&&0<=Ae&&Ae<k.Ea[1]&&0<=ze&&ze<k.Ea[2]){var $d=h[ze][Ae][Be],Qh=Be=Ae=ze=0;n?(($d=n.get($d))||($d=[0,.61,
0,0,1]),ze=255*$d[1],Ae=255*$d[2],Be=255*$d[3],Qh=255*$d[4]):(ze=Ae=Be=$d/k.bc*255,Qh=255);V[Dc]=ze;V[++Dc]=Ae;V[++Dc]=Be;V[++Dc]=Qh}else V[Dc]=0,V[++Dc]=0,V[++Dc]=0,V[++Dc]=0;Pa++}va.Hi=V;p.Ya=va;p.aF=t;p.OE=a;p.NE=xa;p.UE=O;p.VO=N;p.$E=z;p.WO=y;p.Ex=ka;p.Dx=ya;p.Lh=S;p.Za=H;p.Eh=b;p.Ja=G;p.Va=[s[0],s[1],s[2]];p.sl=[c[0],c[1],c[2]];p.Np=[m[0],m[1],m[2]];p.dc=[e[0],e[1],e[2]];p.nb=!1;p.Kh=k;p.Dh=null==k.Kh||l?!0:!1;p.ol=d;p.pf();p.nb=!1;return p}
function Le(a,b,c,d){var e;e=d.Jc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,q=(2+2*n)%6,t=(4+2*n)%6,s=1/c[n]*(e[l]-b[n]);if(Infinity!=s&&-Infinity!=s){var z=b[p]+c[p]*s,s=b[m]+c[m]*s;z>=e[q]&&z<=e[q+1]&&s>=e[t]&&s<=e[t+1]?(q=[],q[n]=e[l],q[p]=z,q[m]=s,h.push(q)):(q=[],q[n]=e[l],q[p]=z,q[m]=s,k.push(q))}}e=[h,k];b=e[0];d.e[a].K=e;e=pd(new K(b[0][0],b[0][1],b[0][2]),new K(b[1][0],b[1][1],b[1][2]));d.e[a].UO=e;h=xd(0,0,1);k=Ie(c,h)[0];l=Ad(d.Os[0],d.Os[1],d.Os[2],0);h=
zd();Ld(k,l,h);k=zd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.e[a].Id=[Math.abs(h[0]),Math.abs(h[1])];d.e[a].Bl=h[2];d.e[a].Pa=k;e=Math.floor(Math.abs(e/h[2]));d.bn[a]=e+1;d.e[a].ca=e+1;d.e[a].K[0][0][0]>d.e[a].K[0][1][0]?0<k[0]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][0]<d.e[a].K[0][1][0]?0>k[0]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][1]>d.e[a].K[0][1][1]?
0<k[1]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][1]<d.e[a].K[0][1][1]?0>k[1]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][2]>d.e[a].K[0][1][2]?0<k[2]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][2]<d.e[a].K[0][1][2]&&0>k[2]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e);d.e[a].Zs=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Me(a,b){var c;c=b._data;for(var d=b.Ea,e=b.bc,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,p=0,m=0,q=0,t=0,q=0;q<d[2];q++){var s=c.subarray(q*l,(q+1)*l),t=0;k[q]=Array(d[1]);h[q]=Array(d[1]);for(m=0;m<d[1];m++)for(k[q][m]=new c.constructor(d[0]),h[q][m]=new c.constructor(d[0]),p=0;p<d[0];p++)n=s[t],k[q][m][p]=n/e*255,h[q][m][p]=n,t++}c=[h,k];b.ic=c[0];b.TO=c[1];A.ae(a.u+".reslice");b.hb=null!=b.t;b.Gd&&(b.Nm=b.Gd.be);b.OP=[0,0,0];b.va=[b.Fd[0]+(b.Ch[0]-1)/2,b.Fd[1]+(b.Ch[1]-1)/2,b.Fd[2]+(b.Ch[2]-
1)/2];b.Jc=[Math.min(b.Fd[0],b.Fd[0]+b.Ch[0]-1),Math.max(b.Fd[0],b.Fd[0]+b.Ch[0]-1),Math.min(b.Fd[1],b.Fd[1]+b.Ch[1]-1),Math.max(b.Fd[1],b.Fd[1]+b.Ch[1]-1),Math.min(b.Fd[2],b.Fd[2]+b.Ch[2]-1),Math.max(b.Fd[2],b.Fd[2]+b.Ch[2]-1)];b.e=[{},{},{}];c=xd(b.va[0],b.va[1],b.va[2]);b.e[0].cn=c;d=xd(1,0,0);yd(d,d);b.e[0].H=d;e=[1,0,0];b.e[0].Ia=e;Le(0,c,d,b);b.j[0].j=Array(b.e[0].ca);c[0]=b.e[0].K[0][0][0]+b.e[0].Pa[0]*Math.floor(b.e[0].ca/2);c[1]=b.e[0].K[0][0][1]+b.e[0].Pa[1]*Math.floor(b.e[0].ca/2);c[2]=
b.e[0].K[0][0][2]+b.e[0].Pa[2]*Math.floor(b.e[0].ca/2);c=Je(c,b.e[0].Id,b.e[0].H,b.e[0].Ia,b.Jc,b.ic,b,b.hb,b.Nm);b.hb&&(c.t=b.t.j[0].j[Math.floor(b.e[0].ca/2)].Ya);b.j[0].j[Math.floor(b.e[0].ca/2)]=c;b.Fh=Math.floor(b.e[0].ca/2);b.tl=Math.floor(b.e[0].ca/2);c=xd(b.va[0],b.va[1],b.va[2]);b.e[1].cn=c;d=xd(0,1,0);yd(d,d);b.e[1].H=d;e=[0,1,0];b.e[1].Ia=e;Le(1,c,d,b);b.j[1].j=Array(b.e[1].ca);c[0]=b.e[1].K[0][0][0]+b.e[1].Pa[0]*Math.floor(b.e[1].ca/2);c[1]=b.e[1].K[0][0][1]+b.e[1].Pa[1]*Math.floor(b.e[1].ca/
2);c[2]=b.e[1].K[0][0][2]+b.e[1].Pa[2]*Math.floor(b.e[1].ca/2);c=Je(c,b.e[1].Id,b.e[1].H,b.e[1].Ia,b.Jc,b.ic,b,b.hb,b.Nm);b.hb&&(c.t=b.t.j[1].j[Math.floor(b.e[1].ca/2)].Ya);b.j[1].j[Math.floor(b.e[1].ca/2)]=c;b.Gh=Math.floor(b.e[1].ca/2);b.ul=Math.floor(b.e[1].ca/2);c=xd(b.va[0],b.va[1],b.va[2]);b.e[2].cn=c;d=xd(0,0,1);yd(d,d);b.e[2].H=d;e=[0,.392,.804];b.e[2].Ia=e;Le(2,c,d,b);b.j[2].j=Array(b.e[2].ca);c[0]=b.e[2].K[0][0][0]+b.e[2].Pa[0]*Math.floor(b.e[2].ca/2);c[1]=b.e[2].K[0][0][1]+b.e[2].Pa[1]*
Math.floor(b.e[2].ca/2);c[2]=b.e[2].K[0][0][2]+b.e[2].Pa[2]*Math.floor(b.e[2].ca/2);c=Je(c,b.e[2].Id,b.e[2].H,b.e[2].Ia,b.Jc,b.ic,b,b.hb,b.Nm);b.hb&&(c.t=b.t.j[2].j[Math.floor(b.e[2].ca/2)].Ya);b.j[2].j[Math.floor(b.e[2].ca/2)]=c;b.Hh=Math.floor(b.e[2].ca/2);b.vl=Math.floor(b.e[2].ca/2);A.Bd(a.u+".reslice");return b.ic};function Ne(){Ee.call(this);this.u="parserOFF"}w(Ne,Ee);
Ne.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Ge(h,n,a);n=a+1;return b}n=e;return Ge(h,n,e-1)}A.ae(this.u+".parse");this._data=c;var e=c.byteLength,h=this.h("uchar",e);c=[];b.G=new cd(e);b.da=new cd(e);for(var k=b.G,l=b.da,n=0,p=d(),p=("OFF"===p?d():p).split(" "),m=p[0],p=p[1];m--;){var q=d(),q=q.split(" ");c.push([parseFloat(q[0]),parseFloat(q[1]),parseFloat(q[2])])}for(;p--;){var q=d(),q=q.split(" "),
t=c[parseInt(q[1],10)],m=c[parseInt(q[2],10)],q=c[parseInt(q[3],10)];k.add(t[0],t[1],t[2]);k.add(m[0],m[1],m[2]);k.add(q[0],q[1],q[2]);t=new K(t[0],t[1],t[2]);q=new K(q[0],q[1],q[2]);m=sd((new K(m[0],m[1],m[2])).Ec(t),q.Ec(t));m.normalize();l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z)}A.Bd(this.u+".parse");c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};v("X.parserOFF",Ne);v("X.parserOFF.prototype.parse",Ne.prototype.parse);function Ke(a){Vd.call(this);this.u="slice";this.Va=[0,0,0];this.sl=[0,0,1];this.dc=[0,1,0];this.Np=[1,0,0];this.Ja=this.Za=10;this.Dl=[0,1,0,0,1,1,1,1,1,0,0,0];this.t=this.Kh=null;this.Dh=!0;this.ol=[1,1,1];null!=a&&this.jk(a)}w(Ke,Vd);Ke.prototype.jk=function(a){this.Va=a.Va.slice();this.sl=a.sl.slice();this.dc=a.dc.slice();this.Za=a.Za;this.Ja=a.Ja;this.Kh=a.Kh;this.t=a.t;this.Dh=a.Dh;this.ol=a.ol;this.TE=a.TE;Ke.d.jk.call(this,a)};Ke.prototype.__defineSetter__("height",function(a){this.Ja=a});
Ke.prototype.__defineSetter__("width",function(a){this.Za=a});Ke.prototype.create=function(){this.pf()};
Ke.prototype.pf=function(){var a=(new K(this.sl[0],this.sl[1],this.sl[2])).normalize(),b=new K(this.dc[0],this.dc[1],this.dc[2]),c=new K(this.Np[0],this.Np[1],this.Np[2]),d=new K(this.Va[0],this.Va[1],this.Va[2]),e=rd(c.clone().Db().scale(this.Za/2),b.clone().Db().scale(this.Ja/2)),h=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=rd(c.clone().Db().scale(this.Za/2),b.clone().scale(this.Ja/2)),k=new K(e.x+d.x,e.y+d.y,e.z+d.z),e=rd(c.clone().scale(this.Za/2),b.clone().Db().scale(this.Ja/2)),l=new K(e.x+d.x,e.y+d.y,
e.z+d.z),e=rd(c.clone().scale(this.Za/2),b.clone().scale(this.Ja/2)),b=new K(e.x+d.x,e.y+d.y,e.z+d.z);this.G=new cd(18);this.da=new cd(18);this.G.add(h.x,h.y,h.z);this.G.add(k.x,k.y,k.z);this.G.add(l.x,l.y,l.z);this.G.add(l.x,l.y,l.z);this.G.add(b.x,b.y,b.z);this.G.add(k.x,k.y,k.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.da.add(a.x,a.y,a.z);this.Dh&&(a=new Vd,a.G=new cd(24),a.da=new cd(24),a.G.add(h.x,h.y,h.z),
a.G.add(k.x,k.y,k.z),a.G.add(k.x,k.y,k.z),a.G.add(b.x,b.y,b.z),a.G.add(b.x,b.y,b.z),a.G.add(l.x,l.y,l.z),a.G.add(l.x,l.y,l.z),a.G.add(h.x,h.y,h.z),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.da.add(0,0,0),a.Ia=[this.ol[0],this.ol[1],this.ol[2]],a.Jd="LINES",a.xl=2,this.j.push(a))};v("X.slice",Ke);v("X.slice.prototype.create",Ke.prototype.create);function J(a){Vd.call(this);this.u="volume";this.Va=[0,0,0];this.Ea=[10,10,10];this.Jc=[1,1,1];this.bn=[10,10,10];this.Ih=[1,1,1];this.Of=[];this.vl=this.Hh=this.ul=this.Gh=this.tl=this.Fh=0;this.en=new Vd;this.fn=new Vd;this.gn=new Vd;this.Rp=this.Ke=!1;this.Gb=-1;this.Qp=[];this.t=null;this.Dh=!0;this.Rb=Infinity;this.Qb=-Infinity;this.Qx=!0;this.bc=0;this._data=null;za(this,new fd);za(this,new Td);null!=a&&this.jk(a)}w(J,Vd);
J.prototype.jk=function(a){this.Va=a.Va.slice();this.Ea=a.Ea.slice();this.Ih=a.Ih.slice();this.Fh=a.Fh;this.tl=a.tl;this.Gh=a.Gh;this.ul=a.ul;this.Hh=a.Hh;this.vl=a.vl;this.zx=a.zx.slice();this.en=new Vd(a.en);this.fn=new Vd(a.fn);this.gn=new Vd(a.gn);this.bc=a.bc;this._data=a._data;this.Ke=a.Ke;this.Rp=a.Rp;this.Gb=a.Gb;this.t=a.t;this.Dh=a.Dh;J.d.jk.call(this,a)};
J.prototype.pf=function(a){this.j.length=0;this.en.j.length=0;this.fn.j.length=0;this.gn.j.length=0;this.j.push(this.en);this.j.push(this.fn);this.j.push(this.gn);this.Fd=a.jf;this.Os=a.Hg;this.Ch=a.ld;this.nl=a.Ee;this.ME=a.Ge;this.bc=a.max;this._data=a.data;this.J=!0};
J.prototype.ha=function(a){a="undefined"!==typeof a?a:!0;if(0<this.j.length){this.Ke!=this.Rp&&(this.Ke||-1==this.Gb||(this.j[this.Gb].visible=!1),this.J=!0,this.Rp=this.Ke);if(!this.nb)return;for(var b=0,b=0;3>b;b++){var c=this.j[b],d=0,e=0;0==b?(d=this.Fh,e=this.tl,this.tl=this.Fh):1==b?(d=this.Gh,e=this.ul,this.ul=this.Gh):2==b&&(d=this.Hh,e=this.vl,this.vl=this.Hh);if(null==this.j[b].j[parseInt(d,10)]){var h=wd();h[0]=this.e[b].K[0][0][0]+this.e[b].Pa[0]*parseInt(d,10);h[1]=this.e[b].K[0][0][1]+
this.e[b].Pa[1]*parseInt(d,10);h[2]=this.e[b].K[0][0][2]+this.e[b].Pa[2]*parseInt(d,10);if(this.hb){var k=Je(h,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.t.ic,this.t,this.t.hb,this.t.Gd.be);this.t.j[b].j[parseInt(d,10)]=k;this.t.j[b].ha(!0)}h=Je(h,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.ic,this,!0,null);this.hb&&(h.t=h.Ya,h.t=this.t.j[b].j[parseInt(d,10)].Ya);c.j[parseInt(d,10)]=h;this.j[b].ha(!0)}e=c.j[parseInt(e,10)];this.Ke||(e.visible=!1);c=c.j[parseInt(d,10)];c.visible=!0;
c.Vc=1;this.Ke&&(c.j[0].nb=!1,b!=this.Gb&&(c.visible=!1,c.Vc=0))}this.Ke&&-1!=this.Gb&&Oe(this,this.Gb)}a&&J.d.ha.call(this)};J.prototype.__defineGetter__("dimensions",function(){return this.Ea});J.prototype.__defineSetter__("dimensions",function(a){this.Ea=a});J.prototype.__defineGetter__("spacing",function(){return this.Ih});J.prototype.__defineSetter__("spacing",function(a){this.Ih=a});J.prototype.__defineGetter__("bbox",function(){return this.Jc});J.prototype.__defineGetter__("range",function(){return this.bn});
J.prototype.__defineGetter__("dimensionsRAS",function(){return this.zx});J.prototype.__defineGetter__("volumeRendering",function(){return this.Ke});J.prototype.__defineSetter__("volumeRendering",function(a){this.Ke=a;this.ha(!1)});J.prototype.__defineGetter__("visible",function(){return this.nb});J.prototype.__defineSetter__("visible",function(a){if(a)this.nb=a,this.ha(!1);else{for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.nb=a;this.J=!0}});
J.prototype.__defineGetter__("center",function(){return this.Va});J.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.Va=a});J.prototype.__defineGetter__("volumeRenderingCache",function(){return this.Qp});J.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.Qp=a});J.prototype.__defineGetter__("image",function(){return this.Of});
J.prototype.__defineGetter__("labelmap",function(){this.t||(this.t=new Pe(this));return this.t});J.prototype.__defineGetter__("indexX",function(){return this.Fh});J.prototype.__defineSetter__("indexX",function(a){u(a)&&0<=a&&a<this.en.j.length&&(this.Fh=a,this.ha(!1))});J.prototype.__defineGetter__("indexY",function(){return this.Gh});J.prototype.__defineSetter__("indexY",function(a){u(a)&&0<=a&&a<this.fn.j.length&&(this.Gh=a,this.ha(!1))});J.prototype.__defineGetter__("indexZ",function(){return this.Hh});
J.prototype.__defineSetter__("indexZ",function(a){u(a)&&0<=a&&a<this.gn.j.length&&(this.Hh=a,this.ha(!1))});J.prototype.__defineGetter__("windowLow",function(){return this.Rb});J.prototype.__defineSetter__("windowLow",function(a){this.Rb=a});J.prototype.__defineGetter__("windowHigh",function(){return this.Qb});J.prototype.__defineSetter__("windowHigh",function(a){this.Qb=a});J.prototype.__defineGetter__("borders",function(){return this.Dh});
J.prototype.__defineSetter__("borders",function(a){this.Dh=a});J.prototype.__defineGetter__("reslicing",function(){return this.Qx});J.prototype.__defineSetter__("reslicing",function(a){this.Qx=a});J.prototype.__defineSetter__("xNormX",function(a){this.e[0].H[0]=a});J.prototype.__defineGetter__("xNormX",function(){return this.e[0].H[0]});J.prototype.__defineSetter__("xNormY",function(a){this.e[0].H[1]=a});J.prototype.__defineGetter__("xNormY",function(){return this.e[0].H[1]});
J.prototype.__defineSetter__("xNormZ",function(a){this.e[0].H[2]=a});J.prototype.__defineGetter__("xNormZ",function(){return this.e[0].H[2]});J.prototype.__defineSetter__("xColor",function(a){this.e[0].Ia=a});J.prototype.__defineGetter__("xColor",function(){return this.e[0].Ia});J.prototype.__defineSetter__("yNormX",function(a){this.e[1].H[0]=a});J.prototype.__defineGetter__("yNormX",function(){return this.e[1].H[0]});J.prototype.__defineSetter__("yNormY",function(a){this.e[1].H[1]=a});
J.prototype.__defineGetter__("yNormY",function(){return this.e[1].H[1]});J.prototype.__defineSetter__("yNormZ",function(a){this.e[1].H[2]=a});J.prototype.__defineGetter__("yNormZ",function(){return this.e[1].H[2]});J.prototype.__defineSetter__("yColor",function(a){this.e[1].Ia=a});J.prototype.__defineGetter__("yColor",function(){return this.e[1].Ia});J.prototype.__defineSetter__("zNormX",function(a){this.e[2].H[0]=a});J.prototype.__defineGetter__("zNormX",function(){return this.e[2].H[0]});
J.prototype.__defineSetter__("zNormY",function(a){this.e[2].H[1]=a});J.prototype.__defineGetter__("zNormY",function(){return this.e[2].H[1]});J.prototype.__defineSetter__("zNormZ",function(a){this.e[2].H[2]=a});J.prototype.__defineGetter__("zNormZ",function(){return this.e[2].H[2]});J.prototype.__defineSetter__("zColor",function(a){this.e[2].Ia=a});J.prototype.__defineGetter__("zColor",function(){return this.e[2].Ia});
J.prototype.FL=function(a){this.j[a].visible=!1;for(var b=0;b<this.j[a].j.length;b++)"undefined"!=typeof this.j[a].j[b]&&(this.hb&&(this.t.j[a].j[b].remove(),this.t.j[a].j[b]=null),this.j[a].j[b].remove(),this.j[a].j[b]=null);yd(this.e[a].H,this.e[a].H);Le(a,this.e[a].cn,this.e[a].H,this);this.j[a].j=[];alert("#VOLUME#",this.e[a].ca);this.j[a].j=Array(this.e[a].ca);this.hb&&(b=Je(this.e[a].cn,this.e[a].Id,this.e[a].H,this.e[a].Ia,this.Jc,this.t.ic,this.t,this.t.hb,this.t.Gd.be),this.t.j[a].j=[],this.t.j[a].j=
Array(this.e[a].ca),this.t.j[a].j[Math.floor(this.e[a].ca/2)]=b,this.t.j[a].ha());b=Je(this.e[a].cn,this.e[a].Id,this.e[a].H,this.e[a].Ia,this.Jc,this.ic,this,!0,null);this.hb&&(b.t=b.Ya,b.t=this.t.j[a].j[Math.floor(this.e[a].ca/2)].Ya);this.j[a].j[Math.floor(this.e[a].ca/2)]=b;0==a?(this.Fh=Math.floor(this.e[a].ca/2),this.tl=Math.floor(this.e[a].ca/2)):1==a?(this.Gh=Math.floor(this.e[a].ca/2),this.ul=Math.floor(this.e[a].ca/2)):(this.Hh=Math.floor(this.e[a].ca/2),this.vl=Math.floor(this.e[a].ca/
2));this.j[a].ha();this.j[a].j[Math.floor(this.e[a].ca/2)].nb=!0};
function Oe(a,b){if(!a.Cp)if(!a.Ke||!a.J&&b==a.Gb)a.Gb=b;else if(-1==a.Qp.indexOf(b))a.Qp.push(b),a.Cp=!0,Qe(a,b),setTimeout(function(){var a=null;0<=this.Gb&&(a=this.j[this.Gb],a.visible=!1);var a=this.j[b],c=a.j.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.j[e]){var p=wd();p[0]=this.e[b].K[0][0][0]+this.e[b].Pa[0]*e;p[1]=this.e[b].K[0][0][1]+this.e[b].Pa[1]*e;p[2]=this.e[b].K[0][0][2]+this.e[b].Pa[2]*e;if(this.hb){var m=Je(p,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.t.ic,this.t,
this.t.hb,this.t.Gd.be);this.t.j[b].j[e]=m;this.t.j[b].ha(!0)}p=Je(p,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.ic,this,!0,null);p.j[0].nb=!1;this.hb&&(p.t=p.Ya,p.t=this.t.j[b].j[e].Ya);a.j[e]=p}a.j[e].nb=!0}Re(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].K[0][0][0]+this.e[b].Pa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Pa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Pa[2]*e;if(this.hb){var p=Je(m,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.t.ic,
this.t,this.t.hb,this.t.Gd.be);this.t.j[b].j[e]=p;this.t.j[b].ha(!0)}m=Je(m,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.ic,this,!0,null);m.j[0].nb=!1;this.hb&&(m.t=m.Ya,m.t=this.t.j[b].j[e].Ya);a.j[e]=m}a.j[e].nb=!0}Re(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].K[0][0][0]+this.e[b].Pa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Pa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Pa[2]*e;if(this.hb){var p=Je(m,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,
this.t.ic,this.t,this.t.hb,this.t.Gd.be);this.t.j[b].j[e]=p;this.t.j[b].ha(!0)}m=Je(m,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.ic,this,!0,null);m.j[0].nb=!1;this.hb&&(m.t=m.Ya,m.t=this.t.j[b].j[e].Ya);a.j[e]=m}a.j[e].nb=!0}Re(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.j[e]){var m=wd();m[0]=this.e[b].K[0][0][0]+this.e[b].Pa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Pa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Pa[2]*e;if(this.hb){var p=Je(m,this.e[b].Id,this.e[b].H,this.e[b].Ia,
this.Jc,this.t.ic,this.t,this.t.hb,this.t.Gd.be);this.t.j[b].j[e]=p;this.t.j[b].ha(!0)}m=Je(m,this.e[b].Id,this.e[b].H,this.e[b].Ia,this.Jc,this.ic,this,!0,null);m.j[0].nb=!1;this.hb&&(m.t=m.Ya,m.t=this.t.j[b].j[e].Ya);a.j[e]=m}a.j[e].nb=!0}Re(this,1);setTimeout(function(){this.Cp&&this.j[b].ha(!0);this.Gb=b;this.J=!1;if(this.Cp){var a=new De;a.Oa=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Cp=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.j[a.Gb];
c.visible=!1;var c=a.j[b],d=c.j.length,e;for(e=0;e<d;e++)c.j[e].nb=!0;a.Gb=b;a.J=!1}}function Qe(a,b){var c=new ye;c.Oa=a;a.dispatchEvent(c);a.onComputing(b)}function Re(a,b){var c=new Ce;c.$j=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}J.prototype.mv=function(){};J.prototype.pv=function(){};J.prototype.nv=function(){};J.REORIENT_TRANSFORM_KEY="ot_"+B();v("X.volume.REORIENT_TRANSFORM_KEY",J.REORIENT_TRANSFORM_KEY);J.REORIENTED_DIMENSIONS_KEY="otd_"+B();
v("X.volume.REORIENTED_DIMENSIONS_KEY",J.REORIENTED_DIMENSIONS_KEY);J.ORIENTATION_KEY="or_"+B();v("X.volume.ORIENTATION_KEY",J.ORIENTATION_KEY);J.SINGLE_FRAME_SCAN="sf_"+B();v("X.volume.SINGLE_FRAME_SCAN",J.SINGLE_FRAME_SCAN);v("X.volume",J);v("X.volume.prototype.modified",J.prototype.ha);v("X.volume.prototype.sliceInfoChanged",J.prototype.FL);v("X.volume.prototype.onComputing",J.prototype.mv);v("X.volume.prototype.onComputingProgress",J.prototype.pv);v("X.volume.prototype.onComputingEnd",J.prototype.nv);function Se(){Ee.call(this);this.u="parserDCM"}w(Se,Ee);
Se.prototype.parse=function(a,b,c){b.yh={};b.yh.lo=0;this.hi(c,b);if(null==b.ia.length||b.Aa.length==b.ia.length){b.yh.lo=b.ia.length;var d={};c={};for(var e=0;e<b.Aa.length;e++)d.hasOwnProperty(b.Aa[e].series_instance_uid)||(d[b.Aa[e].series_instance_uid]=[],c[b.Aa[e].series_instance_uid]={}),c[b.Aa[e].series_instance_uid].hasOwnProperty(b.Aa[e].sop_instance_uid)||(c[b.Aa[e].series_instance_uid][b.Aa[e].sop_instance_uid]=!0,d[b.Aa[e].series_instance_uid].push(b.Aa[e]));var e=Object.keys(d)[0],h=
d[e],k=h.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[e][0].dist=0):h[0].image_position_patient[0]!=h[1].image_position_patient[0]||h[0].image_position_patient[1]!=h[1].image_position_patient[1]||h[0].image_position_patient[2]!=h[1].image_position_patient[2]?(l="image_position_patient",e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],
h[0].image_orientation_patient[5]),e=sd(e,d),h.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,e)),h.sort(function(a,b){return a.dist-b.dist})):h[0].instance_number!=h[1].instance_number?(window.console.log("Ordering by instance number"),l="instance_number",h.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");if("image_position_patient"==
l&&5>k)if(e=0,d=function(){window.console.log('Warning: Although series was initially ordered by "image_position_patient", positional overlaps were found.\nSwitching to "instance_number" ordering as a result.');l="instance_number"},1==k)d(),b[J.SINGLE_FRAME_SCAN]=!0;else for(;e<k-1;e++).01>h[e].dist-h[e+1].dist&&(d(),h.sort(function(a,b){return a.instance_number-b.instance_number}));for(var e=0,n=h.length;e<n;e++);isNaN(h[0].pixel_spacing[0])&&(h[0].pixel_spacing[0]=1);isNaN(h[0].pixel_spacing[1])&&
(h[0].pixel_spacing[1]=1);if(1<h.length)for(var e=function(){l="instance_number";h.sort(function(a,b){return a.instance_number-b.instance_number});h.forced_instance_ordering=!0;window.console.log('Warning: Slices were found unordered after XTK "image_position_patient" sorting. Forcing "instance_number" reordering.');for(var a=0,b=!1;a<n-1;a++)if(0==Math.abs(h[a].instance_number-h[a+1].instance_number)){b=!0;break}if(b)for(window.console.log('Warning: After forcing "instance_number" ordering overlaps were found. Rewriting "instance_number" data for every slice.'),
a=0;a<n;a++)h[a].instance_number=a},p=0,n=h.length;p<n-1;p++)if(1!=Math.abs(h[p].instance_number-h[p+1].instance_number)){e();break}if(1<k)switch(l){case "image_position_patient":var d=h[0].image_position_patient,m=h[1].image_position_patient,e=m[0]-d[0],q=m[1]-d[1],t=m[2]-d[2];h[0].pixel_spacing[2]=Math.sqrt(e*e+q*q+t*t);break;case "instance_number":var s=1;if(!0===h.forced_instance_ordering){for(var e=1,n=h.length,d=h[0].image_position_patient,z=!1;e<n;e++)if(m=h[e].image_position_patient,d[0]!=
m[0]||d[1]!=m[1]||d[2]!=m[2]){z=!0;break}z&&(window.console.log('Warning: Setting pixel_spacing according to "image_position_patient" even though "forced_instance_ordering" is used.'),e=m[0]-d[0],q=m[1]-d[1],t=m[2]-d[2],s=Math.sqrt(e*e+q*q+t*t))}h[0].pixel_spacing[2]=s;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else h[0].pixel_spacing[2]=1;m=1;switch(l){case "image_position_patient":d=h[0].image_position_patient;s=h[k-1].image_position_patient;e=s[0]-d[0];q=s[1]-d[1];
t=s[2]-d[2];q=Math.sqrt(e*e+q*q+t*t);m+=Math.round(q/h[0].pixel_spacing[2]);break;case "instance_number":m+=Math.abs(h[k-1].instance_number-h[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}"false"==b.reslicing.toString()&&(window.console.log('Forcing expexted slices to length of files because volume\'s "reslicing" property is set to false.'),window.console.log("Expected slices:",m),m=k,window.console.log("Ordering:",l));for(var d=h[0].columns*h[0].rows,
y=d*m,s=!1,e=0,n=h.length,H=z=0;e<n;e++)h[e].columns>H&&(H=h[e].columns),h[e].rows>z&&(z=h[e].rows);H*z>d&&(d=H*z,y=d*m,s=!0,window.console.log("Warning: Dimensional inequalities found in image sizes."));var O=null;window.console.log(h[0].Ni);switch(h[0].Ni){case 8:O=new Uint8Array(y);window.console.log("Using a Uint8Array.");break;case 16:O=new Uint16Array(y);window.console.log("Using a Uint16Array.");break;case 32:O=new Uint32Array(y),window.console.log("Using a Uint32Array.");default:window.console.log("Unknown number of bits allocated - using default: 32 bits"),
O=new Uint32Array(y)}b.Ih=h[0].pixel_spacing;for(y=0;y<k;y++){var N=h[y].data,q=0;switch(l){case "image_position_patient":e=h[y].image_position_patient[0]-h[0].image_position_patient[0];q=h[y].image_position_patient[1]-h[0].image_position_patient[1];t=h[y].image_position_patient[2]-h[0].image_position_patient[2];q=Math.sqrt(e*e+q*q+t*t)/h[0].pixel_spacing[2];break;case "instance_number":q=h[y].instance_number-h[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+
l)}if(s){for(var p=h[y].columns,e=h[y].rows,t=0,G=Qb(z*H),S=Math.round((H-p)/2),Z=p+S,p=Math.round((z-e)/2),V=e+p,e=p;e<V;e++)for(p=S;p<Z;p++)G[H*e+p]=N[t],t++;N=G}O.set(N,Math.round(q)*d)}c.data=O;b._data=O;b.Ea=[h[0].columns,h[0].rows,m];s&&(b.Ea=[H,z,m]);c.OF=b.Ea;m=Fe(O);k=m[0];m=m[1];c.min=b.ce=b.Rb=k;c.max=b.bc=b.Qb=m;b.wb!=k&&(b.wb=k);b.yb!=m&&(b.yb=m);m=h[0].image_position_patient;k=Bd();if("false"==b.reslicing.toString())"image_position_patient"==l||h.forced_instance_ordering?(window.console.log('NRG modification: Running an orthogonal transform because the volume\'s "reslicing" property is set to false.'),
e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),e=sd(e,d),e.x=Math.round(e.x),e.y=Math.round(e.y),e.z=Math.round(e.z),L(k,0,-Math.round(h[0].image_orientation_patient[0])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[3])*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]),L(k,1,-Math.round(h[0].image_orientation_patient[1])*
h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[4])*h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]),L(k,2,Math.round(h[0].image_orientation_patient[2])*h[0].pixel_spacing[0],Math.round(h[0].image_orientation_patient[5])*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]),L(k,3,0,0,0,1),window.console.log("IJKToRAS transform:\n",k),m=Bd(),L(m,0,-Math.round(h[0].image_orientation_patient[0]),-Math.round(h[0].image_orientation_patient[3]),-e.x,0),L(m,1,-Math.round(h[0].image_orientation_patient[1]),
-Math.round(h[0].image_orientation_patient[4]),-e.y,0),L(m,2,Math.round(h[0].image_orientation_patient[2]),Math.round(h[0].image_orientation_patient[5]),e.z,0),L(m,3,0,0,0,1),b[J.REORIENT_TRANSFORM_KEY]=m,window.console.log("Orthogonal Transform:\n",m)):"instance_number"==l?(L(k,0,-1,0,0,-m[0]),L(k,1,-0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]),L(k,3,0,0,0,1),m=Bd(),L(m,0,-1,0,0,0),L(m,1,-0,-1,-0,0),L(m,2,0,0,1,0),L(m,3,0,0,0,1),L(m,3,0,0,0,1),b[J.REORIENT_TRANSFORM_KEY]=m):window.console.log("Unkown ordering mode - returning: "+
l);else switch(l){case "image_position_patient":e=new K(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]);d=new K(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]);e=sd(e,d);L(k,0,-h[0].image_orientation_patient[0]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[3]*h[0].pixel_spacing[1],-e.x*h[0].pixel_spacing[2],-m[0]);L(k,1,-h[0].image_orientation_patient[1]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[4]*
h[0].pixel_spacing[1],-e.y*h[0].pixel_spacing[2],-m[1]);L(k,2,h[0].image_orientation_patient[2]*h[0].pixel_spacing[0],h[0].image_orientation_patient[5]*h[0].pixel_spacing[1],e.z*h[0].pixel_spacing[2],m[2]);L(k,3,0,0,0,1);break;case "instance_number":L(k,0,-1,0,0,-m[0]);L(k,1,-0,-1,-0,-m[1]);L(k,2,0,0,1,m[2]);L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Ee=k;c.Ge=Bd();Jd(c.Ee,c.Ge);e=Ad(0,0,0,1);m=zd();Ld(k,e,m);e=Ad(1,1,1,1);d=zd();Ld(k,e,d);c.Hg=[d[0]-
m[0],d[1]-m[1],d[2]-m[2]];k=He(k,[b.Ea[0],b.Ea[1],b.Ea[2]]);c.ld=[k[1]-k[0]+1,k[3]-k[2]+1,k[5]-k[4]+1];c.jf=[k[0],k[2],k[4]];"false"==b.reslicing.toString()&&(k=Ad(b.Ea[0],b.Ea[1],b.Ea[2],1),m=zd(),Ld(b[J.REORIENT_TRANSFORM_KEY],k,m),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),b[J.REORIENTED_DIMENSIONS_KEY]=m,m[0]==b.Ea[2]?(b[J.ORIENTATION_KEY]="sagittal",c.ld[0]+=1*h[0].pixel_spacing[2],c.Hg[0]=c.ld[0]/(h.length+1)):m[1]==b.Ea[2]?(b[J.ORIENTATION_KEY]="coronal",c.ld[1]+=1*h[0].pixel_spacing[2],
c.jf[1]-=1*h[0].pixel_spacing[2]):(b[J.ORIENTATION_KEY]="transverse",c.ld[2]+=2*h[0].pixel_spacing[2],c.Hg[2]=c.ld[2]/(h.length+1),c.jf[2]-=h[0].pixel_spacing[2]),window.console.log("Assessed volume orientation: "+b[J.ORIENTATION_KEY]+"\nXTK Modifications may be applied to restore acquired properties."),window.console.log("_transformedDims",m),window.console.log("RASSpacing",c.Hg),window.console.log("RASDimensions",c.ld),window.console.log("RASOrigin",c.jf));b.pf(c);b.Of=Me(this,b)}c=new Wd;c.Oa=
b;c.wa=a;this.dispatchEvent(c)};Se.prototype.ne=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Se.prototype.hi=function(a,b){this._data=a;if("undefined"==typeof b.Aa||null==b.Aa)b.Aa=[];var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=!1,m,q,t;q=[[8,4416],[9,30576],[136,512]];t=[[18,100],[35,4224],[64,629],[8,4368],[8,4384],[136,512]];for(var s,z;e<d.length;){h=d[e++];k=d[e++];l=d[e++];n=d[e++];"1.2.840.10008.1.2"==
c.transfer_syntax_uid&&0==n&&(n=l);p=!1;if(void 0!==h&&void 0!==k){switch(c.transfer_syntax_uid){case "1.2.840.10008.1.2.1":m="Little Endian Explicit";s=0;for(z=q.length;s<z;s++)if(h===q[s][0]&&k===q[s][1]){p=!0;break}break;case "1.2.840.10008.1.2.2":m="Big Endian Explicit";break;case "1.2.840.10008.1.2":for(m="Little Endian Implicit",s=0,z=t.length;s<z;s++)if(h===t[s][0]&&k===t[s][1]){p=!0;break}}if(p){n="parserDCM.js: Identified "+m+". Skipping DICOM adddress (0x"+h.toString(16)+", 0x"+k.toString(16)+
")"+h+" "+k;window.console.log(n);if(8==h&&4416==k||9==h&&30576==k)for(n=0;;){_newTagGroup=d[e++];_newTagGroup.toString(16);s=parseInt(_newTagGroup.toString(16),10)-parseInt(h.toString(16),10);if(3>s&&0<s)if(_newTagElement=d[e++],_newTagGroup.toString(16),_newTagElement.toString(16),10==parseInt(_newTagElement.toString(16),10)){e--;e--;break}else e--;n++}continue}}switch(h){case 2:switch(k){case 16:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);
c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Se.prototype.ne(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Ni=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=
Se.prototype.ne(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(k);break;case 19:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=
l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Se.prototype.ne(d,e,l,n)}break;case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";
for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(k);break;default:e=Se.prototype.ne(d,e,l,n)}break;case 16:switch(k){case 8720:for(s=0;s<n/2;s++)e++;break;default:e=Se.prototype.ne(d,e,l,n)}break;default:e=Se.prototype.ne(d,e,l,n)}}switch(c.Ni){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Na=this._data.byteLength-
c.columns*c.rows*2;d=null;switch(c.Ni){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.Aa.push(c);return b};v("X.parserDCM",Se);v("X.parserDCM.prototype.parse",Se.prototype.parse);function Te(){Ee.call(this);this.u="parserVTK"}w(Te,Ee);
Te.prototype.parse=function(a,b,c){A.ae(this.u+".parse");var d=b.G,e=b.da,h=new Uint8Array(c),k="";b.G=d=new cd(c.byteLength);b.da=e=new cd(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Ge(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.jn=this.kn=null;this.Uj=[];this.Je=Sd;this.Ys=this.Ei=this.yi=this.Fi=!1;c=0;for(l=k%8;l--;)Ue(this,h[c]),c++;for(l=.125*k^0;l--;)Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),c++,Ue(this,h[c]),
c++,Ue(this,h[c]),c++;c=this.kn;var h=this.jn,k=h.length,n=l=this.Uj.length;do{var p=this.Uj[l-n],m=p.length,q;for(q=0;q<m&&!("LINES"==this.Je&&q+1>=m);q++){var t=parseInt(p[q],10),s=c.get(t);d.add(s[0],s[1],s[2]);var z=t,y=s;"LINES"==this.Je?(z=parseInt(p[q+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.Je&&(0!=q&&q!=m-1||d.add(s[0],s[1],s[2]));t<k?(y=h.get(t),e.add(y[0],y[1],y[2]),"LINES"==this.Je?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.Je&&(0!=q&&q!=m-1||e.add(y[0],
y[1],y[2]))):(z=new K(s[0],s[1],s[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.Je?(z=new K(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.Je&&(0!=q&&q!=m-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.Jd=this.Je;A.Bd(this.u+".parse");d=new Wd;d.Oa=b;d.wa=a;this.dispatchEvent(d)};
function Ue(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Fi=!0;a.yi=!1;a.Ei=!1;c=parseInt(c[1],10);a.kn=new cd(3*c);a.jn=new cd(3*c);return;case "VERTICES":a.yi=!0;a.Fi=!1;a.Ei=!1;c=parseInt(c[1],10);if(3<=c)a.Je=Sd;else if(1==c)a.Je="POINTS";else throw Error("This VTK file is not supported!");a.Uj=[];return;case "TRIANGLE_STRIPS":a.yi=!0;a.Fi=!1;a.Ei=!1;a.Je="TRIANGLE_STRIPS";a.Uj=[];return;case "LINES":a.yi=!0;a.Fi=!1;a.Ei=!1;a.Je="LINES";a.Uj=
[];return;case "POLYGONS":a.yi=!0;a.Fi=!1;a.Ei=!1;a.Je="POLYGONS";a.Uj=[];return;case "POINT_DATA":a.Ei=!0;a.Fi=!1;a.yi=!1;return}if(a.Fi)if(1==d||isNaN(parseFloat(e)))a.Fi=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.kn.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.kn.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.kn.add(d,e,c))}else a.yi?1==d||isNaN(parseFloat(e))?a.yi=!1:(c=c.slice(1),a.Uj.push(c)):
a.Ei&&("NORMALS"==e?a.Ys=!0:1==d||isNaN(parseFloat(e))?(a.Ei=!1,a.Ys=!1):a.Ys&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.jn.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.jn.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.jn.add(d,e,c))))}v("X.parserVTK",Te);v("X.parserVTK.prototype.parse",Te.prototype.parse);function Ve(){Ee.call(this);this.u="parserFSM";this.Ip=!1}w(Ve,Ee);
Ve.prototype.parse=function(a,b,c){A.ae(this.u+".parse");this._data=c;var d=b.G,e=b.da;b.yl=[];var h=b.yl;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var n=new Uint32Array(e),p=new Float32Array(9*c);b.G=d=new cd(9*c);b.da=e=new cd(9*c);var m;for(m=0;m<c;m++){var q=3*m,t=k[q],s=k[q+1],z=k[q+2];h.push(t);h.push(s);h.push(z);n[t]+=1;n[s]+=1;n[z]+=1;var q=3*t,y=3*s,H=3*z,O=l[q],N=l[q+1],G=l[q+2],
s=l[y],z=l[y+1],t=l[y+2],S=l[H],Z=l[H+1],V=l[H+2];d.add(O,N,G);d.add(s,z,t);d.add(S,Z,V);O=new K(O,N,G);S=new K(S,Z,V);s=(new K(s,z,t)).clone().Ec(O);z=S.clone().Ec(O);s=sd(s,z).normalize();p[q]+=s.x;p[q+1]+=s.y;p[q+2]+=s.z;p[y]+=s.x;p[y+1]+=s.y;p[y+2]+=s.z;p[H]+=s.x;p[H+1]+=s.y;p[H+2]+=s.z}for(m=0;m<c;m++)q=3*m,t=k[q],s=k[q+1],z=k[q+2],q=3*t,y=3*s,H=3*z,h=new K(p[y],p[y+1],p[y+2]),l=new K(p[H],p[H+1],p[H+2]),q=(new K(p[q],p[q+1],p[q+2])).scale(1/n[t]).normalize(),h=h.scale(1/n[s]).normalize(),l=
l.scale(1/n[z]).normalize(),e.add(q.x,q.y,q.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this._data.byteLength-this.Na);k=null;for(q=0;q<c.length;q++)if(99==c[q]&&114==c[q+1]&&97==c[q+2]&&115==c[q+3]){for(e=k=q+9;10!=c[q]&&q<c.length;)e++,q++;k=Ge(c.subarray(k,e)).split(" ");break}k&&(b.jc.SC(parseFloat(k[0])),b.jc.TC(parseFloat(k[1])),b.jc.UC(parseFloat(k[2])));b.Jd=Sd;A.Bd(this.u+".parse");c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};v("X.parserFSM",Ve);
v("X.parserFSM.prototype.parse",Ve.prototype.parse);var We={zt:function(a,b,c){return We.update(a,0,b,c)},update:function(a,b,c,d){var e=We.tE,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Xe;
Xe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);We.tE=Xe;function Ye(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,p,m,q,t;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(q=0;q<b;++q)if(a[q]===k){p=0;m=l;for(t=0;t<k;++t)p=p<<1|m&1,m>>=1;for(t=p;t<e;t+=n)h[t]=k<<16|q;++l}++k;l<<=1;n<<=1}return[h,c,d]};function Ze(a,b){this.ut=[];this.wt=32768;this.Vf=this.pn=this.jb=this.Fw=0;this.input=new Uint8Array(a);this.Cy=!1;this.xt=$e;this.resize=!1;if(b||!(b={}))b.index&&(this.jb=b.index),b.bufferSize&&(this.wt=b.bufferSize),b.bufferType&&(this.xt=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.xt){case af:this.tc=32768;this.output=new Uint8Array(32768+this.wt+258);break;case $e:this.tc=0;this.output=new Uint8Array(this.wt);this.uk=this.$F;this.Ly=this.CF;this.Qt=this.KF;break;default:throw Error("invalid inflate mode");
}}var af=0,$e=1;
Ze.prototype.Wi=function(){for(;!this.Cy;){var a=bf(this,3);a&1&&(this.Cy=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.jb,c=this.output,d=this.tc,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.Vf=this.pn=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.xt){case af:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.tc=d,c=this.uk(),d=this.tc;break;case $e:for(;d+h>c.length;)c=this.uk({sz:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.jb=b+=h;this.tc=
d;this.output=c;break;case 1:this.Qt(cf,df);break;case 2:ef(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.Ly()};
var ff=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),hf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),jf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),kf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lf=new Uint8Array(288),
mf,nf;mf=0;for(nf=lf.length;mf<nf;++mf)lf[mf]=143>=mf?8:255>=mf?9:279>=mf?7:8;var cf=Ye(lf),of=new Uint8Array(30),pf,rf;pf=0;for(rf=of.length;pf<rf;++pf)of[pf]=5;var df=Ye(of);function bf(a,b){for(var c=a.pn,d=a.Vf,e=a.input,h=a.jb,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.pn=c>>>b;a.Vf=d-b;a.jb=h;return k}
function sf(a,b){for(var c=a.pn,d=a.Vf,e=a.input,h=a.jb,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.pn=c>>k;a.Vf=d-k;a.jb=h;return e&65535}
function ef(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=sf(this,b),d){case 16:for(d=3+bf(this,2);d--;)c[h++]=e;break;case 17:for(d=3+bf(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+bf(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=bf(a,5)+257,d=bf(a,5)+1,e=bf(a,4)+4,h=new Uint8Array(ff.length),k;for(k=0;k<e;++k)h[ff[k]]=bf(a,3);e=Ye(h);h=new Uint8Array(c);k=new Uint8Array(d);a.Qt(Ye(b.call(a,c,e,h)),Ye(b.call(a,d,e,k)))}f=Ze.prototype;
f.Qt=function(a,b){var c=this.output,d=this.tc;this.bz=a;for(var e=c.length-258,h,k,l;256!==(h=sf(this,a));)if(256>h)d>=e&&(this.tc=d,c=this.uk(),d=this.tc),c[d++]=h;else for(h-=257,l=gf[h],0<hf[h]&&(l+=bf(this,hf[h])),h=sf(this,b),k=jf[h],0<kf[h]&&(k+=bf(this,kf[h])),d>=e&&(this.tc=d,c=this.uk(),d=this.tc);l--;)c[d]=c[d++-k];for(;8<=this.Vf;)this.Vf-=8,this.jb--;this.tc=d};
f.KF=function(a,b){var c=this.output,d=this.tc;this.bz=a;for(var e=c.length,h,k,l;256!==(h=sf(this,a));)if(256>h)d>=e&&(c=this.uk(),e=c.length),c[d++]=h;else for(h-=257,l=gf[h],0<hf[h]&&(l+=bf(this,hf[h])),h=sf(this,b),k=jf[h],0<kf[h]&&(k+=bf(this,kf[h])),d+l>e&&(c=this.uk(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.Vf;)this.Vf-=8,this.jb--;this.tc=d};
f.uk=function(){var a=new Uint8Array(this.tc-32768),b=this.tc-32768,c=this.output;a.set(c.subarray(32768,a.length));this.ut.push(a);this.Fw+=a.length;c.set(c.subarray(b,b+32768));this.tc=32768;return c};
f.$F=function(a){var b=this.input.length/this.jb+1|0,c=this.input,d=this.output;a&&("number"===typeof a.sz&&(b=a.sz),"number"===typeof a.hF&&(b+=a.hF));2>b?(a=(c.length-this.jb)/this.bz[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.Ly=function(){var a=0,b=this.output,c=this.ut,d,e=new Uint8Array(this.Fw+(this.tc-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.tc);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.tc;h<k;++h)e[a++]=b[h];this.ut=[];return this.buffer=e};f.CF=function(){var a,b=this.tc;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var tf;for(tf=0;256>tf;++tf)for(var uf=tf,vf=7,uf=uf>>>1;uf;uf>>>=1)--vf;var wf=[],xf;for(xf=0;288>xf;xf++)switch(!0){case 143>=xf:wf.push([xf+48,8]);break;case 255>=xf:wf.push([xf-144+400,9]);break;case 279>=xf:wf.push([xf-256+0,7]);break;case 287>=xf:wf.push([xf-280+192,8]);break;default:throw"invalid literal: "+xf;}
var yf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(yf);function zf(){};function Af(a){this.input=a;this.jb=0;this.member=[]}
Af.prototype.Wi=function(){for(var a=this.input.length;this.jb<a;){var b=new zf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.jb;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=We.zt(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Ze(l,{index:d,bufferSize:e});b.data=e=d.Wi();d=d.jb;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(We.zt(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+We.zt(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.jb=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function Bf(){Ee.call(this);this.u="parserMGZ";this.Ip=!1}w(Bf,Ee);
Bf.prototype.parse=function(a,b,c,d){A.ae(this.u+".parse");d&&(c=(new Af(new Uint8Array(c))).Wi(),c=c.buffer);d=this.hi(c);var e=[d.gv,d.hv,d.iv];b.Ea=e;var h=d.YC;b.Ih=h;c=d.min;var k=d.max;b.ce=b.Rb=c;b.bc=b.Qb=k;-Infinity==b.wb&&(b.wb=c);Infinity==b.yb&&(b.yb=k);c=Bd();L(c,0,d.Lf[0][0],d.Lf[1][0],d.Lf[2][0],0);L(c,1,d.Lf[0][1],d.Lf[1][1],d.Lf[2][1],0);L(c,2,d.Lf[0][2],d.Lf[1][2],d.Lf[2][2],0);L(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.Lf[3][p]-(c[p+0]*h[0]*k+
c[p+4]*h[1]*l+c[p+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.Ee=c;d.Ge=Bd();Jd(d.Ee,d.Ge);e=Ad(0,0,0,1);h=zd();Ld(c,e,h);k=Ad(1,1,1,1);e=zd();Ld(c,k,e);c=He(c,b.Ea);d.Hg=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.ld=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.jf=[c[0],c[2],c[4]];b.pf(d);A.Bd(this.u+".parse");b.Of=Me(this,b);d=new Wd;d.Oa=b;d.wa=a;this.dispatchEvent(d)};
Bf.prototype.hi=function(a){this._data=a;a={version:0,wE:0,uE:0,hG:0,vE:0,gv:0,hv:0,iv:0,xJ:0,type:0,TF:0,CB:0,nN:null,Lf:null,YC:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.gv=this.h("uint");a.hv=this.h("uint");a.iv=this.h("uint");a.xJ=this.h("uint");a.type=this.h("uint");a.TF=this.h("uint");a.CB=this.h("ushort");if(0<a.CB){a.YC=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.Lf=b}this.Na=
284;b=a.gv*a.hv*a.iv;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Fe(a.data);a.min=b[0];a.max=b[1];this.Na+16<this._data.byteLength&&(a.wE=this.h("float"),a.hG=this.h("float"),a.uE=this.h("float"),a.vE=this.h("float"));return a};v("X.parserMGZ",Bf);v("X.parserMGZ.prototype.parse",Bf.prototype.parse);function Cf(){Ee.call(this);this.u="parserLBL"}w(Cf,Ee);
Cf.prototype.parse=function(a,b,c){A.ae(this.u+".parse");var d=b.yl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.h("uchar",c.byteLength),l=k.length,n=!1,p=0;for(c=1;c<l;c++)10==k[c-1]?(p=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Ge(k,p,c),10)),n=!1);k=b.eb.cb?b.eb.cb:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.eb.cb=k;b.eb.Om=h;b.eb.J=!0;A.Bd(this.u+".parse");d=new Wd;d.Oa=b;d.wa=a;this.dispatchEvent(d)};v("X.parserLBL",Cf);v("X.parserLBL.prototype.parse",Cf.prototype.parse);function Df(){Ee.call(this);this.u="parserCRV";this.Ip=!1}w(Df,Ee);
Df.prototype.parse=function(a,b,c){A.ae(this.u+".parse");var d=b.yl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.Na=3;var e=this.h("uint");this.h("uint");this.h("uint");var h=0,k=0,l=0,n=0,p=0,m=0,q=0,t=0,s=0,z=0,y=0;c=Array(2);var H=Array(2),O=this.h("float",e),N;for(N=0;N<e;N++){var G=O[N];0==N&&(c[0]=H[0]=G);0<=G?(h++,n+=G):(k++,l+=G);s+=G;y++;H[0]=Math.max(G,H[0]);c[0]=Math.min(G,c[0]);O[N]=G}0!=h&&(p=n/h);0!=k&&(m=l/k);0!=y&&(z=s/y);for(y=s=l=n=0;y<
e;y++)G=O[y],N=0,0<=G?(N=Math.pow(G-p,2),n+=N):(N=Math.pow(G-m,2),l+=N),N=Math.pow(G-z,2),s+=N;1<h&&(q=Math.sqrt(n/(h-1)));1<k&&(t=Math.sqrt(l/(k-1)));c[1]=m-2.5*t;H[1]=p+2.5*q;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=O[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.eb.ce=c[1];b.eb.bc=H[1];-Infinity==b.eb.wb&&(b.eb.wb=c[1]);Infinity==b.eb.yb&&(b.eb.yb=H[1]);b.eb.cb=O;b.eb.Om=h;b.eb.J=!0;A.Bd(this.u+".parse");d=new Wd;d.Oa=b;d.wa=a;this.dispatchEvent(d)};v("X.parserCRV",Df);
v("X.parserCRV.prototype.parse",Df.prototype.parse);function Ef(a,b){var c,d;this.input=a;this.jb=0;if(b||!(b={}))b.index&&(this.jb=b.index),b.verify&&(this.gM=b.verify);c=a[this.jb++];d=a[this.jb++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.DB=new Ze(a,{index:this.jb,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Ef.prototype.Wi=function(){var a=this.input,b;b=this.DB.Wi();this.jb=this.DB.jb;if(this.gM){var a=(a[this.jb++]<<24|a[this.jb++]<<16|a[this.jb++]<<8|a[this.jb++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Ff(){Ee.call(this);this.u="parserRAW"}w(Ff,Ee);
Ff.prototype.parse=function(a,b,c,d){A.ae(this.u+".parse");d&&(c=(new Ef(new Uint8Array(c))).Wi(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Fe(d.data);c=e[0];e=e[1];d.min=b.ce=b.Rb=c;d.max=b.bc=b.Qb=e;-Infinity==b.wb&&(b.wb=c);Infinity==b.yb&&(b.yb=e);e=Cd();d.Ee=e;d.Ge=Cd();var h=Ad(0,0,0,1);c=zd();Ld(e,h,c);var k=Ad(1,1,1,1),h=zd();Ld(e,k,h);e=He(e,b.Ea);d.Hg=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.ld=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.jf=[e[0],e[2],e[4]];b.pf(d);A.Bd(this.u+".parse");b.Of=
Me(this,b);d=new Wd;d.Oa=b;d.wa=a;this.dispatchEvent(d)};v("X.parserRAW",Ff);v("X.parserRAW.prototype.parse",Ff.prototype.parse);function Gf(){Ee.call(this);this.u="parserIMAGE"}w(Gf,Ee);Gf.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Tc(h,"load",this.UK.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};Gf.prototype.UK=function(a,b,c){b.Of=a;b.Hi=null;a=new Wd;a.Oa=c;a.wa=b;this.dispatchEvent(a)};v("X.parserIMAGE",Gf);v("X.parserIMAGE.prototype.parse",Gf.prototype.parse);function Hf(){Ee.call(this);this.u="parserLUT"}w(Hf,Ee);
Hf.prototype.parse=function(a,b,c){A.ae(this.u+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Ge(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.Bd(this.u+".parse");c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};
v("X.parserLUT",Hf);v("X.parserLUT.prototype.parse",Hf.prototype.parse);function If(){Ee.call(this);this.u="parserMRC"}w(If,Ee);
If.prototype.parse=function(a,b,c){A.ae(this.u+".parse");c=this.hi(c);var d=c.min,e=c.max;b.Ea=[c.no,c.oo,c.po];b.Ih=[c.xlen/c.cB,c.dD/c.dB,c.fD/c.eB];b.ce=b.Rb=d;b.bc=b.Qb=e;-Infinity==b.wb&&(b.wb=d);Infinity==b.yb&&(b.yb=e);e=Bd();L(e,3,0,0,0,1);L(e,0,-1,0,0,c.no);L(e,1,0,0,-1,c.oo);L(e,2,0,-1,0,c.po);c.Ee=e;c.Ge=Bd();Jd(c.Ee,c.Ge);var h=Ad(0,0,0,1),d=zd();Ld(e,h,d);var k=Ad(1,1,1,1),h=zd();Ld(e,k,h);k=[c.no,c.oo,c.po];e=He(e,k);c.Hg=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.ld=[e[1]+e[0]+1,e[3]-e[2]+1,
e[5]-e[4]+1];c.jf=[e[0],e[2],e[4]];b.Ea=k;b.pf(c);b.Of=Me(this,b);A.Bd(this.u+".parse");c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};
If.prototype.hi=function(a){this._data=a;a={no:0,oo:0,po:0,mode:0,GP:0,HP:0,IP:0,cB:0,dB:0,eB:0,xlen:0,dD:0,fD:0,alpha:0,beta:0,gamma:0,dJ:0,eJ:0,fJ:0,st:0,Xp:0,fk:0,uP:0,next:0,IF:0,extra:null,yJ:0,AJ:0,extra:null,CI:0,sP:0,zI:0,lens:0,vJ:0,wJ:0,eM:0,fM:0,XL:null,jM:0,lM:0,mM:0,fP:0,WP:0,iL:0,zJ:0,data:null,min:Infinity,max:-Infinity,CP:0,CC:null,VP:null,PP:null,orientation:null,FP:null};this.Na=0;a.no=this.h("sint");a.oo=this.h("sint");a.po=this.h("sint");a.mode=this.h("sint");var b=a.no*a.oo*a.po;
this.Na=1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.Na=28;a.cB=this.h("sint");a.dB=this.h("sint");a.eB=this.h("sint");a.xlen=this.h("float");a.dD=this.h("float");a.fD=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.dJ=this.h("sint");a.eJ=this.h("sint");a.fJ=this.h("sint");a.st=this.h("float");a.Xp=this.h("float");a.fk=this.h("float");a.tP=this.h("sint");a.next=this.h("sint");a.IF=this.h("short");a.yJ=this.h("short");a.AJ=this.h("short");a.CI=this.h("sint");a.rP=this.h("sint");a.zI=this.h("short");a.lens=this.h("short");a.vJ=this.h("short");a.wJ=this.h("short");a.eM=this.h("short");a.fM=this.h("short");a.XL=this.h("float",6);this.Na=196;a.jM=this.h("float");a.lM=
this.h("float");a.mM=this.h("float");this.Na=216;a.iL=this.h("float");a.zJ=this.h("sint");a.xP=this.h("schar",10);if(0!=a.next)switch(this.Na=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.fk-(a.Xp-a.fk)?(a.min=a.st,a.max=a.fk+(a.fk-a.st)):(a.min=a.fk-(a.Xp-a.fk),a.max=a.Xp);return a};v("X.parserMRC",If);v("X.parserMRC.prototype.parse",If.prototype.parse);function Jf(){Ee.call(this);this.u="parserNRRD"}w(Jf,Ee);
Jf.prototype.parse=function(a,b,c){A.ae(this.u+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ge(c,0,k-2);h=k+1;break}var l,n,p,m,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.QI=!0:!l.match(/^#/)&&(m=l.match(/(.*):(.*)/))&&(n=m[1].trim(),l=m[2].trim(),(p=this.dG[n])?p.call(this,l):this[n]=l);if(!this.QI)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.gc&&(this.gc=[new K(1,0,0),new K(0,1,0),new K(0,0,1)],this.pw))for(d=[],m=0;2>=m;m++)d.push(isNaN(this.pw[m])?void 0:this.gc[m].scale(this.pw[m]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new Af(new Uint8Array(h))).Wi();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.xi(h);m=Fe(c.data);h=c.min=m[0];m=c.max=m[1];b.ce=b.Rb=h;b.bc=b.Qb=m;b.Ea=[this.kw[0],this.kw[1],this.kw[2]];d=
(new K(this.gc[0][0],this.gc[0][1],this.gc[0][2])).ng();e=(new K(this.gc[1][0],this.gc[1][1],this.gc[1][2])).ng();k=(new K(this.gc[2][0],this.gc[2][1],this.gc[2][2])).ng();b.Ih=[d,e,k];-Infinity==b.wb&&(b.wb=h);Infinity==b.yb&&(b.yb=m);d=m=1;"left-posterior-superior"==this.CC&&(d=m=-1);h=Cd();L(h,0,m*this.gc[0][0],m*this.gc[1][0],m*this.gc[2][0],m*this.ow[0]);L(h,1,d*this.gc[0][1],d*this.gc[1][1],d*this.gc[2][1],d*this.ow[1]);L(h,2,1*this.gc[0][2],1*this.gc[1][2],1*this.gc[2][2],1*this.ow[2]);L(h,
3,0,0,0,1);c.Ee=h;c.Ge=Bd();Jd(c.Ee,c.Ge);d=Ad(0,0,0,1);m=zd();Ld(h,d,m);e=Ad(1,1,1,1);d=zd();Ld(h,e,d);h=He(h,b.Ea);c.Hg=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];c.ld=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.jf=[h[0],h[2],h[4]];b.pf(c);A.Bd(this.u+".parse");b.Of=Me(this,b);c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};
Jf.prototype.dG={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.xi=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.xi=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.xi=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.xi=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.xi=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.xi=Uint32Array;break;case "float":this.xi=Float32Array;break;case "double":this.xi=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.nP=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Xi=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.kw=e},space:function(a){return this.CC=a},"space origin":function(a){return this.ow=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.gc=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.pw=e}};v("X.parserNRRD",Jf);v("X.parserNRRD.prototype.parse",Jf.prototype.parse);function Kf(){Ee.call(this);this.u="parserSTL"}w(Kf,Ee);
Kf.prototype.parse=function(a,b,c){A.ae(this.u+".parse");this._data=c;var d=b.G,e=b.da;if("solid"==Ge(this.h("uchar",5))){b.G=d=new cd(c.byteLength);b.da=e=new cd(c.byteLength);var h=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,p;for(p=0;p<c;p++)if(10==e[p]){if(k||l){var m=Ge(e,n,p).split(" "),l=parseFloat(m[0]),q=parseFloat(m[1]),m=parseFloat(m[2]);k?(d.add(l,q,m),d.add(l,q,m),d.add(l,q,m)):h.add(l,q,m);l=k=!1}}else 32==e[p-1]&&(102==e[p]?(n=p+=13,k=!0):118==e[p]&&(n=p+=7,
l=!0))}else for(this.Na=80,h=this.h("uint"),b.G=d=new cd(9*h),b.da=e=new cd(9*h),c=c=0;c<h;c++)k=this.h("float",12),n=k[0],p=k[1],l=k[2],e.add(n,p,l),e.add(n,p,l),e.add(n,p,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.Na+=2;A.Bd(this.u+".parse");h=new Wd;h.Oa=b;h.wa=a;this.dispatchEvent(h)};v("X.parserSTL",Kf);v("X.parserSTL.prototype.parse",Kf.prototype.parse);function Lf(){Ee.call(this);this.u="parserNII"}w(Lf,Ee);
Lf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new Af(new Uint8Array(d))).Wi(),d=d.buffer);c=this.hi(d);d=c.min;e=c.max;b.ce=b.Rb=d;b.bc=b.Qb=e;-Infinity==b.wb&&(b.wb=d);Infinity==b.yb&&(b.yb=e);d=Bd();L(d,3,0,0,0,1);if(0<c.Rv){var e=0,h=c.zB,k=c.AB,l=c.BB,n=1,p=1,m=1,q=c.wB,t=c.xB,s=c.yB,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.qg[1]&&(n=c.qg[1]);
0<c.qg[2]&&(p=c.qg[2]);0<c.qg[2]&&(m=c.qg[3]);0>c.qg[0]&&(m=-m);L(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*p,2*(h*l+e*k)*m,q);L(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*p,2*(k*l-e*h)*m,t);L(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*p,(e*e+l*l-k*k-h*h)*m,s)}else 0<c.wC?(e=c.DC,h=c.EC,k=c.FC,L(d,0,e[0],e[1],e[2],e[3]),L(d,1,h[0],h[1],h[2],h[3]),L(d,2,k[0],k[1],k[2],k[3])):0==c.Rv?(L(d,0,c.qg[1],0,0,0),L(d,1,0,c.qg[2],0,0),L(d,2,0,0,c.qg[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.Ee=d;c.Ge=Bd();Jd(c.Ee,c.Ge);
h=Ad(0,0,0,1);e=zd();Ld(d,h,e);k=Ad(1,1,1,1);h=zd();Ld(d,k,h);k=[c.Xi[1],c.Xi[2],c.Xi[3]];d=He(d,k);c.Hg=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.ld=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.jf=[d[0],d[2],d[4]];b.Ea=k;b.pf(c);b.Of=Me(this,b);c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};
Lf.prototype.hi=function(a){this._data=a;a={EL:0,data_type:null,JF:null,bG:0,qL:0,$K:0,NF:null,Xi:null,JI:0,KI:0,LI:0,HI:0,Pt:0,wF:0,JL:0,qg:null,$C:0,pL:0,oL:0,IL:0,GL:null,kM:null,yF:0,zF:0,HL:0,ZL:0,eI:0,fI:0,LF:null,tF:null,Rv:0,wC:0,zB:0,AB:0,BB:0,wB:0,xB:0,yB:0,DC:null,EC:null,FC:null,II:null,magic:null,data:null,min:Infinity,max:-Infinity};a.EL=this.h("uint");a.data_type=this.h("uchar",10);a.JF=this.h("uchar",18);a.bG=this.h("uint");a.qL=this.h("ushort");a.$K=this.h("uchar");a.NF=this.h("uchar");
a.Xi=this.h("ushort",8);a.JI=this.h("float");a.KI=this.h("float");a.LI=this.h("float");a.HI=this.h("ushort");a.Pt=this.h("ushort");a.wF=this.h("ushort");a.JL=this.h("ushort");a.qg=this.h("float",8);a.$C=this.h("float");a.pL=this.h("float");a.oL=this.h("float");a.IL=this.h("ushort");a.GL=this.h("uchar");a.kM=this.h("uchar");a.yF=this.h("float");a.zF=this.h("float");a.HL=this.h("float");a.ZL=this.h("float");a.eI=this.h("uint",1);a.fI=this.h("uint",1);a.LF=this.h("uchar",80);a.tF=this.h("uchar",24);
a.Rv=this.h("ushort");a.wC=this.h("ushort");a.zB=this.h("float");a.AB=this.h("float");a.BB=this.h("float");a.wB=this.h("float");a.xB=this.h("float");a.yB=this.h("float");a.DC=this.h("float",4);a.EC=this.h("float",4);a.FC=this.h("float",4);a.II=this.h("uchar",16);a.magic=this.h("uchar",4);this.Na=parseInt(a.$C,10);var b=a.Xi[1]*a.Xi[2]*a.Xi[3];switch(a.Pt){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",
b);break;case 32:a.data=this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.Pt);}b=Fe(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Lf);v("X.parserNII.prototype.parse",Lf.prototype.parse);function Mf(){Ee.call(this);this.u="parserTRK"}w(Mf,Ee);
Mf.prototype.parse=function(a,b,c){A.ae(this.u+".parse");var d=b.G,e=b.da,h=b.Kc;this._data=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var n=this.h("uint");this.h("uint");var p=
this.h("uint"),m=[],q=[],t=Infinity,s=-Infinity,z=null,y=null,H=null,O=null,e=d=null,N=this.h("uint",(this._data.byteLength-1E3)/4);this.Na=p;for(var G=this.h("float",(this._data.byteLength-1E3)/4),S=0,p=h=0;p<n;p++){for(var Z=N[S],V=new cd(3*Z),va=0,na=0;na<Z;na++){var xa=G[S+3*na+na*l+1],Oa=G[S+3*na+na*l+2],Ha=G[S+3*na+na*l+3],xa=xa/k[0],Oa=Oa/k[1],Ha=Ha/k[2];V.add(xa,Oa,Ha);if(0<na)var Pa=V.get(na-1),va=va+Math.sqrt(Math.pow(xa-Pa[0],2)+Math.pow(Oa-Pa[1],2)+Math.pow(Ha-Pa[2],2));na<Z-1&&(h+=6)}S+=
3*Z+Z*l+1;na=V.Sf;Z=V.Pf;xa=V.Tf;Oa=V.Qf;Ha=V.Uf;Pa=V.Rf;if(!z||na<z)z=na;if(!y||Z>y)y=Z;if(!H||xa<H)H=xa;if(!O||Oa>O)O=Oa;if(!d||Ha<d)d=Ha;if(!e||Pa>e)e=Pa;m.push(V);q.push(va)}k=(z+y)/2;H=(H+O)/2;l=(d+e)/2;O=new Float32Array(h);b.G=d=new cd(h);b.da=e=new cd(h);b.Kc=h=new cd(h);for(p=z=0;p<n;p++)for(y=m[p],N=y.count,va=q[p],t=Math.min(t,va),s=Math.max(s,va),na=0;na<N-1;na++){S=y.get(na);G=y.get(na+1);d.add(S[0],S[1],S[2]);d.add(G[0],G[1],G[2]);var V=S[0]-k,Z=S[1]-H,xa=S[2]-l,Oa=Math.sqrt(V*V+Z*Z+
xa*xa),Ha=G[0]-k,Pa=G[1]-H,ka=G[2]-l,ya=Math.sqrt(Ha*Ha+Pa*Pa+ka*ka);e.add(V/Oa,Z/Oa,xa/Oa);e.add(Ha/ya,Pa/ya,ka/ya);G=[Math.abs(G[0]-S[0]),Math.abs(G[1]-S[1]),Math.abs(G[2]-S[2])];S=Math.sqrt(G[0]*G[0]+G[1]*G[1]+G[2]*G[2]);G[0]/=S;G[1]/=S;G[2]/=S;h.add(G[0],G[1],G[2]);h.add(G[0],G[1],G[2]);O[z++]=va;O[z++]=va;O[z++]=va;O[z++]=va;O[z++]=va;O[z++]=va}b.Jd="LINES";n=new Ud;n.ce=t;n.bc=s;n.wb=t;n.yb=s;n.Om=O;n.Px=!1;n.J=!0;b.eb=n;t=!1;for(p=0;16>p;p++)if(0!=c[p]){t=!0;break}!1==t&&(c[0]=c[5]=c[10]=c[15]=
1);A.Bd(this.u+".parse");A.v.Hw(c,b.jc.xb);c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};v("X.parserTRK",Mf);v("X.parserTRK.prototype.parse",Mf.prototype.parse);function Nf(){Ee.call(this);this.u="parserOBJ"}w(Nf,Ee);
Nf.prototype.parse=function(a,b,c){A.ae(this.u+".parse");this._data=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.G=new cd(c);b.da=new cd(c);var h=b.G,k=b.da,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var p=Ge(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var m=e[parseInt(p[1],10)-1],l=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];h.add(m[0],m[1],m[2]);h.add(l[0],l[1],l[2]);h.add(p[0],p[1],p[2]);m=new K(m[0],m[1],
m[2]);p=new K(p[0],p[1],p[2]);l=sd((new K(l[0],l[1],l[2])).Ec(m),p.Ec(m));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.Bd(this.u+".parse");c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};v("X.parserOBJ",Nf);v("X.parserOBJ.prototype.parse",Nf.prototype.parse);function Of(){bd.call(this);this.u="loader";this.wl=new id;this.an=0}w(Of,bd);function Pf(a,b){a.an+=b/a.wl.dg()/3;a.an=Math.min(1,a.an);var c=new xe;c.$j=a.an;a.dispatchEvent(c)}function Qf(a){a=a.ia.Mp;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Rf))throw Error("The "+b+" file format is not supported.");return[a,b,Rf[b][0],Rf[b][1],Rf[b][2]]}
Of.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!ld(this.wl.Ab,a.nd)||this.wl.get(a.nd)){this.wl.set(a.nd,!1);var c=Qf(a)[0];if(null!=a.Ng)this.parse(null,a,b);else{var d=new XMLHttpRequest;F(d,"abort",this.rz.bind(this,d,a,b));F(d,"error",this.rz.bind(this,d,a,b));F(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Of.prototype.parse=function(a,b,c){Pf(this,1);setTimeout(function(){var d=Qf(b),e=d[3],d=new d[2];Tc(d,ge,this.complete.bind(this));var h=b.Ng;null==h&&(h=a.response,b.Ng=h);d.parse(b,c,h,e)}.bind(this),100)};Of.prototype.complete=function(a){Pf(this,1);setTimeout(function(){var b=a.wa,c=a.Oa;b.ia.J=!1;b.J=!0;c.ha();this.wl.set(b.nd,!0)}.bind(this),100)};Of.prototype.rz=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Rf={OBJ:[Nf,null],OFF:[Ne,null],STL:[Kf,null],VTK:[Te,null],TRK:[Mf,null],MRC:[If,null],ST:[If,null],FSM:[Ve,null],INFLATED:[Ve,null],SMOOTHWM:[Ve,null],SPHERE:[Ve,null],PIAL:[Ve,null],ORIG:[Ve,null],NRRD:[Jf,null],NII:[Lf,null],GZ:[Lf,null],DCM:[Se,null],DICOM:[Se,null],"":[Se,null],CRV:[Df,null],LABEL:[Cf,null],MGH:[Bf,!1],MGZ:[Bf,!0],RAW:[Ff,!1],RZ:[Ff,!0],TXT:[Hf,null],LUT:[Hf,null],PNG:[Gf,"png"],JPG:[Gf,"jpeg"],JPEG:[Gf,"jpeg"],GIF:[Gf,"gif"]};function Sf(){Ee.call(this);this.u="parserIMA"}w(Sf,Ee);
Sf.prototype.parse=function(a,b,c){b.yh={};b.yh.lo=0;this.hi(c,b);if(null==b.ia.length||b.Aa.length==b.ia.length){b.yh.lo=b.ia.length;var d={};c={};for(var e=0;e<b.Aa.length;e++)d.hasOwnProperty(b.Aa[e].series_instance_uid)||(d[b.Aa[e].series_instance_uid]=[],c[b.Aa[e].series_instance_uid]={}),c[b.Aa[e].series_instance_uid].hasOwnProperty(b.Aa[e].sop_instance_uid)||(c[b.Aa[e].series_instance_uid][b.Aa[e].sop_instance_uid]=!0,d[b.Aa[e].series_instance_uid].push(b.Aa[e]));var h=Object.keys(d)[0],e=
d[h],k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=sd(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],p=d[1]-n[1],m=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+p*p+
m*m);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,q=e[k-1].image_position_patient,h=q[0]-n[0],p=q[1]-n[1],m=q[2]-n[2],h=Math.sqrt(h*h+p*p+m*m),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;q=null;switch(e[0].Ni){case 8:q=new Uint8Array(h);break;case 16:q=new Uint16Array(h);break;case 32:q=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Ih=e[0].pixel_spacing;for(var t=0;t<k;t++){var s=e[t].data,h=0;switch(l){case "image_position_patient":h=e[t].image_position_patient[0]-e[0].image_position_patient[0];p=e[t].image_position_patient[1]-
e[0].image_position_patient[1];m=e[t].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+p*p+m*m)/e[0].pixel_spacing[2];break;case "instance_number":h=e[t].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}q.set(s,h*n)}c.data=q;b._data=q;b.Ea=[e[0].columns,e[0].rows,d];c.OF=b.Ea;d=Fe(q);k=d[0];d=d[1];c.min=b.ce=b.Rb=k;c.max=b.bc=b.Qb=d;-Infinity==b.wb&&(b.wb=k);Infinity==b.yb&&(b.yb=d);p=e[0].image_position_patient;
k=Bd();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new K(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=sd(d,h);L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);L(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);L(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new K(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new K(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=sd(d,h),L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),L(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(L(k,0,1,0,0,-p[0]),L(k,1,0,-1,-0,-p[1]),L(k,2,0,0,1,p[2]));L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Ee=k;c.Ge=Bd();Jd(c.Ee,c.Ge);l=Ad(0,0,0,1);e=zd();Ld(k,l,e);l=Ad(1,1,1,1);d=zd();Ld(k,l,d);c.Hg=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=He(k,[b.Ea[0],b.Ea[1],b.Ea[2]]);c.ld=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.jf=[e[0],e[2],e[4]];b.pf(c);b.Of=Me(this,b)}c=new Wd;c.Oa=b;c.wa=a;this.dispatchEvent(c)};
Sf.prototype.ne=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Sf.prototype.hi=function(a,b){this._data=a;if("undefined"==typeof b.Aa||null==b.Aa)b.Aa=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=[[8,4368],[8,4384]],m=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],m=!1,q=0,t=p.length;q<t;q++)if(h===p[q][0]&&k===p[q][1]){m=!0;break}if(m)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Sf.prototype.ne(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.Ni=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Sf.prototype.ne(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Sf.prototype.ne(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Sf.prototype.ne(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Sf.prototype.ne(d,e,l,n)}break;case 16:switch(k){case 8720:for(q=0;q<n/2;q++)e++;break;default:e=
Sf.prototype.ne(d,e,l,n)}break;default:e=Sf.prototype.ne(d,e,l,n)}}switch(c.Ni){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Na=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.Ni){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.Aa.push(c);return b};v("X.parserIMA",Sf);
v("X.parserIMA.prototype.parse",Sf.prototype.parse);var Tf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Uf(a){if(Vf){Vf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Uf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Vf=!0,Error();}}return a.match(Tf)}var Vf=ic;function Wf(a,b){$c.call(this);this.kg=a||1;this.Am=b||ba;this.vt=ta(this.WL,this);this.Ou=wa()}w(Wf,$c);f=Wf.prototype;f.enabled=!1;f.ea=null;f.setInterval=function(a){this.kg=a;this.ea&&this.enabled?(this.stop(),this.start()):this.ea&&this.stop()};
f.WL=function(){if(this.enabled){var a=wa()-this.Ou;0<a&&a<.8*this.kg?this.ea=this.Am.setTimeout(this.vt,this.kg-a):(this.ea&&(this.Am.clearTimeout(this.ea),this.ea=null),this.dispatchEvent(Xf),this.enabled&&(this.ea=this.Am.setTimeout(this.vt,this.kg),this.Ou=wa()))}};f.start=function(){this.enabled=!0;this.ea||(this.ea=this.Am.setTimeout(this.vt,this.kg),this.Ou=wa())};f.stop=function(){this.enabled=!1;this.ea&&(this.Am.clearTimeout(this.ea),this.ea=null)};
f.f=function(){Wf.d.f.call(this);this.stop();delete this.Am};var Xf="tick";function Yf(a,b,c){if(ja(a))c&&(a=ta(a,c));else if(a&&"function"==typeof a.handleEvent)a=ta(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Zf(a){return"function"==typeof a.dg?a.dg():ha(a)||r(a)?a.length:mb(a)}function $f(a){if("function"==typeof a.Xh)return a.Xh();if(r(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return nb(a)}function ag(a){if("function"==typeof a.Mn)return a.Mn();if("function"!=typeof a.Xh){if(ha(a)||r(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return ob(a)}}
function bg(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ha(a)||r(a))D(a,b,void 0);else for(var c=ag(a),d=$f(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function cg(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ha(a)||r(a))return Fb(a,b,void 0);for(var c=ag(a),d=$f(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function dg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function eg(){}eg.prototype.Fy=null;function fg(a){var b;(b=a.Fy)||(b={},gg(a)&&(b[0]=!0,b[1]=!0),b=a.Fy=b);return b};var hg;function ig(){}w(ig,eg);function jg(a){return(a=gg(a))?new ActiveXObject(a):new XMLHttpRequest}function gg(a){if(!a.yA&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.yA=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.yA}hg=new ig;function kg(a){this.Ab=new id;a&&this.kt(a)}function lg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ma(a):b.substr(0,1)+a}f=kg.prototype;f.dg=function(){return this.Ab.dg()};f.add=function(a){this.Ab.set(lg(a),a)};f.kt=function(a){a=$f(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.tg=function(a){a=$f(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.Ab.remove(lg(a))};f.clear=function(){this.Ab.clear()};f.jm=function(){return this.Ab.jm()};
f.contains=function(a){a=lg(a);return ld(this.Ab.Ab,a)};f.DA=function(a){var b=new kg;a=$f(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.Xh=function(){return this.Ab.Xh()};f.clone=function(){return new kg(this)};f.Rl=function(a){return this.dg()==Zf(a)&&mg(this,a)};
function mg(a,b){var c=Zf(b);if(a.dg()>c)return!1;!(b instanceof kg)&&5<c&&(b=new kg(b));return cg(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.Ht?c.Ht(a):ha(c)||r(c)?Ib(c,a):pb(c,a)})};function ng(a){var b;b||(b=og(a||arguments.callee.caller,[]));return b}
function og(a,b){var c=[];if(Ib(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pg(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=pg(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(og(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pg(a){if(qg[a])return qg[a];a=String(a);if(!qg[a]){var b=/function ([^\(]+)/.exec(a);qg[a]=b?b[1]:"[Anonymous]"}return qg[a]}var qg={};function rg(a,b,c,d,e){this.reset(a,b,c,d,e)}rg.prototype.pz=null;rg.prototype.oz=null;var sg=0;rg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||sg++;d||wa();this.jo=a;this.uJ=b;delete this.pz;delete this.oz};rg.prototype.ZB=function(a){this.jo=a};function tg(a){this.Mk=a;this.tA=this.Lc=this.jo=this.Sa=null}function ug(a,b){this.name=a;this.value=b}ug.prototype.toString=function(){return this.name};var vg=new ug("SEVERE",1E3),wg=new ug("CONFIG",700),xg=new ug("FINE",500);f=tg.prototype;f.getName=function(){return this.Mk};f.getParent=function(){return this.Sa};f.gu=function(){this.Lc||(this.Lc={});return this.Lc};f.ZB=function(a){this.jo=a};
function yg(a){if(a.jo)return a.jo;if(a.Sa)return yg(a.Sa);eb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=yg(this).value)for(ja(b)&&(b=b()),a=this.Qz(a,b,c,tg.prototype.log),b="log:"+a.uJ,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.tA)for(var e=0,h=void 0;h=c.tA[e];e++)h(d);b=b.getParent()}};
f.Qz=function(a,b,c,d){a=new rg(a,String(b),this.Mk);if(c){a.pz=c;var e;d=d||tg.prototype.Qz;try{var h;var k=da("window.location.href");if(r(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.AP||"Not available"}catch(p){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(m){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+La(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+La(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+La(ng(d)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}a.oz=e}return a};f.Oo=function(a){this.Sa=a};var zg={},Ag=null;
function Bg(a){Ag||(Ag=new tg(""),zg[""]=Ag,Ag.ZB(wg));var b;if(!(b=zg[a])){b=new tg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Bg(a.substr(0,c));c.gu()[d]=b;b.Oo(c);zg[a]=b}return b};function Cg(a,b){a&&a.log(xg,b,void 0)};function Dg(a){$c.call(this);this.headers=new id;this.ys=a||null;this.Ji=!1;this.xs=this.Ba=null;this.ho=this.JA=this.jr="";this.Fk=this.Du=this.Sq=this.au=!1;this.gp=0;this.ns=null;this.KB=Eg;this.ts=this.iM=!1}w(Dg,$c);var Eg="",Fg=Dg.prototype,Gg=Bg("goog.net.XhrIo");Fg.wf=Gg;var Hg=/^https?$/i,Ig=["POST","PUT"],Jg=[];function Kg(a,b){var c=new Dg;Jg.push(c);b&&c.D("complete",b);c.Su("ready",c.BF);c.send(a,void 0,void 0,void 0)}f=Dg.prototype;f.BF=function(){this.g();Lb(Jg,this)};
f.send=function(a,b,c,d){if(this.Ba)throw Error("[goog.net.XhrIo] Object is active with another request="+this.jr+"; newUri="+a);b=b?b.toUpperCase():"GET";this.jr=a;this.ho="";this.JA=b;this.au=!1;this.Ji=!0;this.Ba=this.ys?jg(this.ys):jg(hg);this.xs=this.ys?fg(this.ys):fg(hg);this.Ba.onreadystatechange=ta(this.nB,this);try{Cg(this.wf,Lg(this,"Opening Xhr")),this.Du=!0,this.Ba.open(b,String(a),!0),this.Du=!1}catch(e){Cg(this.wf,Lg(this,"Error opening Xhr: "+e.message));Mg(this,e);return}a=c||"";var h=
this.headers.clone();d&&bg(d,function(a,b){h.set(b,a)});d=Gb(h.Mn());c=ba.FormData&&a instanceof ba.FormData;!Ib(Ig,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.Ba.setRequestHeader(b,a)},this);this.KB&&(this.Ba.responseType=this.KB);"withCredentials"in this.Ba&&(this.Ba.withCredentials=this.iM);try{Ng(this),0<this.gp&&(this.ts=Og(this.Ba),Cg(this.wf,Lg(this,"Will abort after "+this.gp+"ms if incomplete, xhr2 "+this.ts)),this.ts?(this.Ba.timeout=
this.gp,this.Ba.ontimeout=ta(this.OC,this)):this.ns=Yf(this.OC,this.gp,this)),Cg(this.wf,Lg(this,"Sending request")),this.Sq=!0,this.Ba.send(a),this.Sq=!1}catch(k){Cg(this.wf,Lg(this,"Send error: "+k.message)),Mg(this,k)}};function Og(a){return E&&pc(9)&&u(a.timeout)&&ca(a.ontimeout)}function Hb(a){return"content-type"==a.toLowerCase()}f.OC=function(){"undefined"!=typeof aa&&this.Ba&&(this.ho="Timed out after "+this.gp+"ms, aborting",Cg(this.wf,Lg(this,this.ho)),this.dispatchEvent("timeout"),this.abort(8))};
function Mg(a,b){a.Ji=!1;a.Ba&&(a.Fk=!0,a.Ba.abort(),a.Fk=!1);a.ho=b;Pg(a);Qg(a)}function Pg(a){a.au||(a.au=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Ba&&this.Ji&&(Cg(this.wf,Lg(this,"Aborting")),this.Ji=!1,this.Fk=!0,this.Ba.abort(),this.Fk=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Qg(this))};f.f=function(){this.Ba&&(this.Ji&&(this.Ji=!1,this.Fk=!0,this.Ba.abort(),this.Fk=!1),Qg(this,!0));Dg.d.f.call(this)};
f.nB=function(){this.ok||(this.Du||this.Sq||this.Fk?Rg(this):this.jK())};f.jK=function(){Rg(this)};
function Rg(a){if(a.Ji&&"undefined"!=typeof aa)if(a.xs[1]&&4==Sg(a)&&2==Tg(a))Cg(a.wf,Lg(a,"Local request error detected and ignored"));else if(a.Sq&&4==Sg(a))Yf(a.nB,0,a);else if(a.dispatchEvent("readystatechange"),4==Sg(a)){Cg(a.wf,Lg(a,"Request complete"));a.Ji=!1;try{var b=Tg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Uf(String(a.jr))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Hg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Sg(a)?a.Ba.statusText:""}catch(n){Cg(a.wf,"Can not get status: "+n.message),l=""}a.ho=l+" ["+Tg(a)+"]";Pg(a)}}finally{Qg(a)}}}
function Qg(a,b){if(a.Ba){Ng(a);var c=a.Ba,d=a.xs[0]?ea:null;a.Ba=null;a.xs=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.wf)&&c.log(vg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ng(a){a.Ba&&a.ts&&(a.Ba.ontimeout=null);u(a.ns)&&(ba.clearTimeout(a.ns),a.ns=null)}f.dh=function(){return!!this.Ba};function Sg(a){return a.Ba?a.Ba.readyState:0}function Tg(a){try{return 2<Sg(a)?a.Ba.status:-1}catch(b){return-1}}
function Lg(a,b){return b+" ["+a.JA+" "+a.jr+" "+Tg(a)+"]"};/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function M(){}v("gxnat",M);M.JPEG_CONVERT_SUFFIX="?format=image/jpeg";M.iG={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};M.ux="?format=zip";M.bi=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);M.get(a,b,"json")};
M.get=function(a,b,c){Kg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.Ba?dg(a.Ba.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Ba?a.Ba.responseText:""}catch(h){Cg(a.wf,"Can not get responseText: "+h.message),e=""}b(e)}})};
M.xr=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(M.xr.GI&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(M.xr.GI&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
M.LL=function(a,b){var c=[],d={},e=[],h={};D(a,function(a){h=a;D(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(M.EP);D(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",M.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",M.iG);v("gxnat.ZIP_SUFFIX",M.ux);v("gxnat.jsonGet",M.bi);v("gxnat.get",M.get);v("gxnat.naturalSort",M.xr);v("gxnat.sortXnatPropertiesArray",M.LL);function Ug(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Vg(this)}w(Ug,wc);v("gxnat.Path",Ug);
function Wg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Xg(a){for(var b=0,c=Yg.length,b=0;b<c;b++)a(Yg[b],b)}function Zg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Yg=["projects","subjects","experiments",["scans","resources"],"files"];
function Vg(a){var b,c,d,e=!1;Xg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.Rt=Yg[k-1],e=!0);else null!=this[a]||e||(this.Rt=Yg[k-1],e=!0)}.bind(a))}Ug.prototype.xq=function(){null!=this.Rt||Vg(this);return this.Rt};
Ug.prototype.ii=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=Yg.length,k=0,d=0;d<h;d++){c=Yg[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Ug.prototype.g=function(){Ug.d.g.call(this);sb(this)};v("gxnat.Path.getQueryPrefix",Wg);v("gxnat.Path.forEachXnatLevel",Xg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Ug(a),d=new Ug(b),e=void 0;Xg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",Zg);v("gxnat.Path.xnatLevelOrder",Yg);v("gxnat.Path.prototype.getDeepestLevel",Ug.prototype.xq);v("gxnat.Path.prototype.pathByLevel",Ug.prototype.ii);v("gxnat.Path.prototype.dispose",Ug.prototype.g);function $g(a){this.Qd=new Ug(a);this.projects=[];this[ah]={};this[bh]={};this[ch]={}}w($g,wc);v("gxnat.ProjectTree",$g);function dh(a){this[eh]=r(a)?new Ug(a):a;this[fh]=this[eh].xq();a=Yg.indexOf(this[eh].xq())+1;-1!=a&&(this[gh]=Yg[a],r(this[gh])&&(this[hh]=this[eh].originalUrl+"/"+this[gh],this[this[gh]]=[]))}w(dh,wc);v("gxnat.ProjectTree.TreeNode",dh);dh.prototype.we=function(a){this.Mb=a};dh.prototype.Pd=function(){return this.Mb};
dh.prototype.g=function(){dh.d.g.call(this);null!=this[eh]&&this[eh].g();sb(this)};var fh=B(),hh=B(),ih=B(),eh=B(),gh=B(),jh=B(),kh=B(),lh=B(),ah=B(),bh=B(),ch=B(),mh=["ID","description","name","URI"],nh=["gender","handedness","label","URI"],oh=["label","URI"];function ph(a,b){return Ka(a.Pd(),b.Pd())}function qh(a){var b="&columns=";D(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=$g.prototype;
f.yz=function(a){var b=[];C(this.Jn(a),function(a,d){"projects"==d?b.push(a[lh].ID):b.push(a[lh].label)});return b};f.zz=function(a){var b=[];C(this.Jn(a),function(a){b.push(a[eh].originalUrl)});return b};f.Jn=function(a){branch={projects:this.Xd};"experiments"==a[gh]?branch.subjects=a:g(a[gh])&&(branch.subjects=this[bh][a[eh].ii("subjects")],branch.experiments=a);return branch};f.OA=function(a,b){this.ko(this.Qd,a,b)};
f.ko=function(a,b,c){var d=r(a)?new Ug(a):a,e;if(null!=this.Xd){a={projects:this.Xd};if(null!=d.subjects){e=d.ii("subjects");if(null==this[bh][e]){this.Vu(e,function(a){this.QA(a,function(){null!=b&&b(a);this.ko(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[bh][e]}if(null!=d.experiments){e=d.ii("experiments");if(null==this[ch][e]){this.Uu(e,function(a){null!=b&&b(a);this.ko(d,b,c)}.bind(this));return}a.experiments=this[ch][e]}null!=c&&c(a)}else this.PA(function(a){null!=b&&b(a);this.ko(d,
b,c)}.bind(this))};f.PA=function(a){if(null==this.Xd){var b=qh(mh),c=this.Qd.prefix+"/projects/"+this.Qd.projects,d;M.bi(this.Qd.prefix+"/projects",function(b){d=new dh(c);this.projects.push(d);this.Xd=d;this[ah][d[eh].originalUrl]=d;d[lh]=b[0];d.we(d[lh].name);a(d)}.bind(this),"&ID="+this.Qd.projects+b)}};f.On=function(a){return this[bh][a]};f.Xl=function(a){return this[ch][a]};
f.QA=function(a,b){var c=a;r(a)?c=this.On(a):a instanceof Ug&&(c=this.On(a.originalUrl));if(null!=c[lh])b(c);else{var d=this.Qd.prefix+"/subjects",e=qh(nh),e="&ID="+c[eh].subjects+e;M.bi(d,function(a){c[lh]=a[0];c.we(c[lh].label);b(c)}.bind(this),e)}};
f.RA=function(a,b){if(null==this.Xd[jh]||!0!=this.Xd[jh]){var c=this.Xd[eh].originalUrl+"/subjects",d=qh(nh);window.console.log("load subjects",c,d);var e,h;M.bi(c,function(c){D(c,function(d){h=this.Xd[eh].prefix+"/projects/"+this.Xd[eh].projects+"/subjects/"+d.ID;e=this.Vu(h);null==e[lh]&&(e[lh]=d,e.we(e[lh].label));null!=a&&a(e);this.Xd.subjects.length==c.length&&(this.Xd[jh]=!0,null!=b&&(d=this.Xd.subjects,d.sort(ph),b(d)))}.bind(this))}.bind(this),d)}};
f.Vu=function(a,b){if(null!=this[bh][a])return this[bh][a];subjNode=new dh(a);this.Xd.subjects.push(subjNode);this[bh][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.MA=function(a,b){var c=a;r(a)?c=this.Xl(a):a instanceof Ug&&(c=this.Xl(a.originalUrl));var d=this.Qd.prefix+"/experiments",e=qh(oh),e="&ID="+c[eh].experiments+e;M.bi(d,function(a){c[lh]=a[0];c.we(c[lh].label);b(c)}.bind(this),e)};
f.NA=function(a,b,c){var d=a;r(a)?d=this.On(a):a instanceof Ug&&(d=this.On(a.originalUrl));if(null!=d[jh]&&!0==d[jh])window.console.log("Don't need to reload the experiments of "+d[eh].originalUrl);else{var e=d[eh].originalUrl+"/experiments";M.bi(e+"?xsiType=xnat:imageSessionData",function(a){D(a,function(k){this.Uu(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[jh]=!0,null!=c&&(e=d.experiments,e.sort(ph),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Uu=function(a,b){null==this[ch][a]&&(exptNode=new dh(a),this.MA(exptNode,function(c){this[bh][c[eh].ii("subjects")].experiments.push(c);this[ch][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){$g.d.g.call(this);delete this.Xd;this.Qd.g();delete this.Qd;D(this.projects,function(a){null!=a.subjects&&D(a.subjects,function(a){null!=a.experiments&&D(a.experiments,function(a){a.g()});a.g()});a.g()});sb(this)};v("gxnat.ProjectTree.TreeNode",dh);v("gxnat.ProjectTree.LEVEL_KEY",fh);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",hh);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",ih);v("gxnat.ProjectTree.PATH_KEY",eh);v("gxnat.ProjectTree.NEXTLEVEL_KEY",gh);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",jh);v("gxnat.ProjectTree.ISLOADING_KEY",kh);v("gxnat.ProjectTree.METADATA_KEY",lh);v("gxnat.ProjectTree.PROJ_DIRECT",ah);v("gxnat.ProjectTree.SUBJ_DIRECT",bh);v("gxnat.ProjectTree.EXPT_DIRECT",ch);v("gxnat.ProjectTree.PROJECT_METADATA",mh);v("gxnat.ProjectTree.SUBJECT_METADATA",nh);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",oh);v("gxnat.ProjectTree.compareNodeTitles",ph);v("gxnat.ProjectTree.getColumnQuery",qh);v("gxnat.ProjectTree.prototype.getBranchTitles",$g.prototype.yz);v("gxnat.ProjectTree.prototype.getBranchUris",$g.prototype.zz);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",$g.prototype.Jn);v("gxnat.ProjectTree.prototype.loadInitBranch",$g.prototype.OA);v("gxnat.ProjectTree.prototype.loadBranch",$g.prototype.ko);v("gxnat.ProjectTree.prototype.loadProject",$g.prototype.PA);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",$g.prototype.On);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",$g.prototype.Xl);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",$g.prototype.QA);v("gxnat.ProjectTree.prototype.loadSubjects",$g.prototype.RA);v("gxnat.ProjectTree.prototype.loadSubject",$g.prototype.Vu);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",$g.prototype.MA);v("gxnat.ProjectTree.prototype.loadExperiments",$g.prototype.NA);
v("gxnat.ProjectTree.prototype.loadExperiment",$g.prototype.Uu);v("gxnat.ProjectTree.prototype.dispose",$g.prototype.g);function rh(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=rh.prototype;f.clone=function(){return new rh(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function sh(a,b){return new rh(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof rh?(this.x+=a.x,this.y+=a.y):(this.x+=a,u(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.x*=a;this.y*=c;return this};function th(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=th.prototype;f.clone=function(){return new th(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof th?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof rh?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,u(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function uh(a,b){this.width=a;this.height=b}function vh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=uh.prototype;f.clone=function(){return new uh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.jm=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=u(b)?b:a;this.width*=a;this.height*=c;return this};function wh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=wh.prototype;f.clone=function(){return new wh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.DA=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof wh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function xh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.Yt=function(a){return Math.sqrt(xh(this,a))};f.hj=function(){return new uh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof rh?(this.left+=a.x,this.top+=a.y):(this.left+=a,u(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function yh(){return ic?"Webkit":hc?"Moz":E?"ms":gc?"O":null}function zh(a,b){if(b&&a in b)return a;var c=yh();return c?(c=c.toLowerCase(),c+=cb(a),!ca(b)||c in b?c:null):null};function Ah(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function P(a,b){var c=Ah(a),d=Pb(arguments,1),e=c.length+d.length;Bh(c,d);a.className=c.join(" ");return c.length==e}function Ch(a,b){var c=Ah(a),d=Pb(arguments,1),e=Dh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Bh(a,b){for(var c=0;c<b.length;c++)Ib(a,b[c])||a.push(b[c])}function Dh(a,b){return Cb(a,function(a){return!Ib(b,a)})}
function Eh(a,b,c){var d=Ah(a);r(b)?Lb(d,b):g(b)&&(d=Dh(d,b));r(c)&&!Ib(d,c)?d.push(c):g(c)&&Bh(d,c);a.className=d.join(" ")};var Fh=!E||qc(9),Gh=!hc&&!E||E&&qc(9)||hc&&pc("1.9.1"),Hh=E&&!pc("9");function Ih(a){return a?new Jh(Kh(a)):Ba||(Ba=new Jh)}function Lh(a){return r(a)?document.getElementById(a):a}function Mh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Nh(document,"*",a,b)}function Oh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Nh(document,"*",a,b)[0])||null}
function Nh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Ib(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Ph(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Rh?a.setAttribute(Rh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Rh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Sh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new uh(a.clientWidth,a.clientHeight)}function Th(a){return ic||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Uh(a){return a?a.parentWindow||a.defaultView:window}function Q(a,b,c){return Vh(document,arguments)}
function Vh(a,b){var c=b[0],d=b[1];if(!Fh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',La(d.name),'"');if(d.type){c.push(' type="',La(d.type),'"');var e={};xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(r(d)?c.className=d:g(d)?c.className=d.join(" "):Ph(c,d));2<b.length&&Wh(a,c,b,2);return c}function Wh(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ha(h)||la(h)&&0<h.nodeType?e(h):D(Xh(h)?Nb(h):h,e)}}
function Yh(a,b){Wh(Kh(a),a,arguments,1)}function Zh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function $h(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function ai(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function R(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function bi(a){return Gh&&void 0!=a.children?a.children:Cb(a.childNodes,function(a){return 1==a.nodeType})}function ci(a){return void 0!=a.firstElementChild?a.firstElementChild:di(a.firstChild)}
function ei(a){return void 0!=a.nextElementSibling?a.nextElementSibling:di(a.nextSibling)}function di(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function fi(a){return la(a)&&1==a.nodeType}function gi(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Kh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function hi(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Zh(a),a.appendChild(Kh(a).createTextNode(String(b)))}var ii={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ji={IMG:" ",BR:"\n"};function ki(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function li(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function mi(a){a=a.tabIndex;return u(a)&&0<=a&&32768>a}function ni(a){if(Hh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];oi(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Hh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function pi(a){var b=[];oi(a,b,!1);return b.join("")}
function oi(a,b,c){if(!(a.nodeName in ii))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ji)b.push(ji[a.nodeName]);else for(a=a.firstChild;a;)oi(a,b,c),a=a.nextSibling}function Xh(a){if(a&&"number"==typeof a.length){if(la(a))return"function"==typeof a.item||"string"==typeof a.item;if(ja(a))return"function"==typeof a.item}return!1}
function qi(a){var b=ri.Rc;return si(a,function(a){return"DIV"==a.nodeName&&(!b||r(a.className)&&Ib(a.className.split(/\s+/),b))})}function si(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Jh(a){this.ja=a||ba.document||document}f=Jh.prototype;f.N=Ih;function ti(a){return a.ja}f.a=function(a){return r(a)?this.ja.getElementById(a):a};f.gD=Jh.prototype.a;f.B=function(a,b,c){return Vh(this.ja,arguments)};f.createElement=function(a){return this.ja.createElement(a)};
f.createTextNode=function(a){return this.ja.createTextNode(String(a))};function ui(a){return"CSS1Compat"==a.ja.compatMode}function vi(a){a=a.ja;return a.parentWindow||a.defaultView}function wi(a){var b=a.ja;a=Th(b);b=b.parentWindow||b.defaultView;return E&&pc("10")&&b.pageYOffset!=a.scrollTop?new rh(a.scrollLeft,a.scrollTop):new rh(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.Hu=$h;f.removeNode=R;f.gu=bi;f.Hz=ci;f.contains=gi;
f.$h=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!li(a)||mi(a)):li(a)&&mi(a))&&E?(a=ja(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function xi(a,b,c){r(b)?yi(a,c,b):C(b,ua(yi,a))}function yi(a,b,c){a:if(c=ab(c),void 0===a.style[c]){var d=yh()+cb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function zi(a,b){var c=Kh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function Ai(a,b){return zi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Bi(a){return Ai(a,"position")}
function Ci(a,b,c){var d,e=hc&&(cc||lc)&&pc("1.9");b instanceof rh?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Di(d,e);a.style.top=Di(b,e)}function Ei(a){return new rh(a.offsetLeft,a.offsetTop)}function Fi(a){a=a?Kh(a):document;return!E||qc(9)||ui(Ih(a))?a.documentElement:a.body}
function Gi(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Hi(a){if(E&&!qc(8))return a.offsetParent;var b=Kh(a),c=Ai(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ai(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ii(a){for(var b=new th(0,Infinity,Infinity,0),c=Ih(a),d=c.ja.body,e=c.ja.documentElement,h=Th(c.ja);a=Hi(a);)if(!(E&&0==a.clientWidth||ic&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=Ai(a,"overflow")){var k=Ji(a),l;l=a;if(hc&&!pc("1.9")){var n=parseFloat(zi(l,"borderLeftWidth"));if(Ki(l))var p=l.offsetWidth-l.clientWidth-n-parseFloat(zi(l,"borderRightWidth")),n=n+p;l=new rh(n,parseFloat(zi(l,"borderTopWidth")))}else l=new rh(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=Sh(vi(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Ji(a){var b,c=Kh(a),d=Ai(a,"position"),e=hc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new rh(0,0),k=Fi(c);if(a==k)return h;if(a.getBoundingClientRect)b=Gi(a),a=wi(Ih(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(ic&&"fixed"==Bi(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(gc||ic&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=Hi(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,gc&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}
function Li(a){var b;if(a.getBoundingClientRect)b=Gi(a),b=new rh(b.left,b.top);else{b=wi(Ih(a));var c=Ji(a);b=new rh(c.x-b.x,c.y-b.y)}if(hc&&!pc(12)){b:{c=ab("transform");if(void 0===a.style[c]&&(c=yh()+cb(c),void 0!==a.style[c])){c=(ic?"-webkit":hc?"-moz":E?"-ms":gc?"-o":null)+"-transform";break b}c="transform"}a=(a=Ai(a,c)||Ai(a,"transform"))?(a=a.match(Mi))?new rh(parseFloat(a[1]),parseFloat(a[2])):new rh(0,0):new rh(0,0);a=new rh(b.x+a.x,b.y+a.y)}else a=b;return a}
function Ni(a){if(1==a.nodeType)return Li(a);var b=ja(a.kG),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Nc.targetTouches&&(c=a.Nc.targetTouches[0]);return new rh(c.clientX,c.clientY)}function Oi(a,b,c){if(b instanceof uh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Pi(a,b);Qi(a,c)}function Di(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Qi(a,b){a.style.height=Di(b,!0)}function Pi(a,b){a.style.width=Di(b,!0)}
function T(a){var b=Ri;if("none"!=Ai(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Ri(a){var b=a.offsetWidth,c=a.offsetHeight,d=ic&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new uh(b,c):(a=Gi(a),new uh(a.right-a.left,a.bottom-a.top))}function Si(a){var b=Ji(a);a=T(a);return new wh(b.x,b.y,a.width,a.height)}
function Ti(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Ui(a,b){a.style.display=b?"":"none"}function Vi(a){E&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Ki(a){return"rtl"==Ai(a,"direction")}var Wi=hc?"MozUserSelect":ic?"WebkitUserSelect":null;
function Xi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Wi){if(b=b?"none":"",a.style[Wi]=b,c){a=0;for(var d;d=c[a];a++)d.style[Wi]=b}}else if(E||gc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Yi(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Zi(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Yi(a,c):0}function $i(a,b){if(E){var c=Zi(a,b+"Left"),d=Zi(a,b+"Right"),e=Zi(a,b+"Top"),h=Zi(a,b+"Bottom");return new th(e,d,h,c)}c=zi(a,b+"Left");d=zi(a,b+"Right");e=zi(a,b+"Top");h=zi(a,b+"Bottom");return new th(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var aj={thin:2,medium:4,thick:6};
function bj(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in aj?aj[c]:Yi(a,c)}function cj(a){if(E&&!qc(9)){var b=bj(a,"borderLeft"),c=bj(a,"borderRight"),d=bj(a,"borderTop");a=bj(a,"borderBottom");return new th(d,c,a,b)}b=zi(a,"borderLeftWidth");c=zi(a,"borderRightWidth");d=zi(a,"borderTopWidth");a=zi(a,"borderBottomWidth");return new th(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Mi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function dj(a){wc.call(this);this.ed=a;this.kb={}}w(dj,wc);var ej=[];f=dj.prototype;f.D=function(a,b,c,d){g(b)||(b&&(ej[0]=b.toString()),b=ej);for(var e=0;e<b.length;e++){var h=F(a,b[e],c||this.handleEvent,d||!1,this.ed||this);if(!h)break;this.kb[h.key]=h}return this};f.Su=function(a,b,c,d){return fj(this,a,b,c,d)};function fj(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)fj(a,b,c[k],d,e,h);else{b=Tc(b,c,d||a.handleEvent,e,h||a.ed||a);if(!b)return a;a.kb[b.key]=b}return a}
f.rb=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.rb(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.ed||this,c=Nc(c),d=!!d,b=gb(a)?a.Nn(b,c,d,e):a?(a=Pc(a))?a.Nn(b,c,d,e):null:null,b&&(Vc(b),delete this.kb[b.key]);return this};f.tg=function(){C(this.kb,Vc);this.kb={}};f.f=function(){dj.d.f.call(this);this.tg()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function gj(){}fa(gj);gj.prototype.gB=0;function hj(a){$c.call(this);this.ob=a||Ih();this.mh=ij;this.tf=null;this.la=!1;this.q=null;this.ij=void 0;this.Yf=this.Lc=this.Sa=this.bv=null;this.aD=!1}w(hj,$c);hj.prototype.yI=gj.le();var ij=null;
function jj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function kj(a){return a.tf||(a.tf=":"+(a.yI.gB++).toString(36))}function lj(a,b){a.Sa&&a.Sa.Yf&&(tb(a.Sa.Yf,a.tf),ub(a.Sa.Yf,b,a));a.tf=b}f=hj.prototype;f.a=function(){return this.q};
f.gb=function(){this.ij||(this.ij=new dj(this));return this.ij};f.No=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.Sa&&this.tf&&mj(this.Sa,this.tf)&&this.Sa!=a)throw Error("Unable to set parent component");this.Sa=a;hj.d.dw.call(this,a)};f.getParent=function(){return this.Sa};f.dw=function(a){if(this.Sa&&this.Sa!=a)throw Error("Method not supported");hj.d.dw.call(this,a)};f.N=function(){return this.ob};f.B=function(){this.q=this.ob.createElement("div")};f.k=function(a){this.lh(a)};
f.lh=function(a,b){if(this.la)throw Error("Component already rendered");this.q||this.B();a?a.insertBefore(this.q,b||null):this.ob.ja.body.appendChild(this.q);this.Sa&&!this.Sa.la||this.fb()};f.Cb=function(a){if(this.la)throw Error("Component already rendered");if(a&&this.Me(a)){this.aD=!0;var b=Kh(a);this.ob&&this.ob.ja==b||(this.ob=Ih(a));this.he(a);this.fb()}else throw Error("Invalid element to decorate");};f.Me=function(){return!0};f.he=function(a){this.q=a};
f.fb=function(){this.la=!0;nj(this,function(a){!a.la&&a.a()&&a.fb()})};f.Ac=function(){nj(this,function(a){a.la&&a.Ac()});this.ij&&this.ij.tg();this.la=!1};f.f=function(){this.la&&this.Ac();this.ij&&(this.ij.g(),delete this.ij);nj(this,function(a){a.g()});!this.aD&&this.q&&R(this.q);this.Sa=this.bv=this.q=this.Yf=this.Lc=null;hj.d.f.call(this)};f.ln=function(a,b){this.lt(a,oj(this),b)};
f.lt=function(a,b,c){if(a.la&&(c||!this.la))throw Error("Component already rendered");if(0>b||b>oj(this))throw Error("Child component index out of bounds");this.Yf&&this.Lc||(this.Yf={},this.Lc=[]);if(a.getParent()==this){var d=kj(a);this.Yf[d]=a;Lb(this.Lc,a)}else ub(this.Yf,kj(a),a);a.No(this);Ob(this.Lc,b,0,a);a.la&&this.la&&a.getParent()==this?(c=this.Ka(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.q||this.B(),b=pj(this,b+1),a.lh(this.Ka(),b?b.q:null)):this.la&&!a.la&&a.q&&a.q.parentNode&&
1==a.q.parentNode.nodeType&&a.fb()};f.Ka=function(){return this.q};f.Se=function(){null==this.mh&&(this.mh=Ki(this.la?this.q:this.ob.ja.body));return this.mh};f.tm=function(a){if(this.la)throw Error("Component already rendered");this.mh=a};function oj(a){return a.Lc?a.Lc.length:0}function mj(a,b){var c;a.Yf&&b?(c=a.Yf,c=(b in c?c[b]:void 0)||null):c=null;return c}function pj(a,b){return a.Lc?a.Lc[b]||null:null}function nj(a,b,c){a.Lc&&D(a.Lc,b,c)}function qj(a,b){return a.Lc&&b?Ab(a.Lc,b):-1}
f.removeChild=function(a,b){if(a){var c=r(a)?a:kj(a);a=mj(this,c);c&&a&&(tb(this.Yf,c),Lb(this.Lc,a),b&&(a.Ac(),a.q&&R(a.q)),a.No(null))}if(!a)throw Error("Child is not in parent component");return a};v("nrg.string",function(){});function rj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function sj(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function tj(a){if(null!=a)return a="array"==ga(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function uj(a){return a.replace(/\W/g,"")}function vj(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function wj(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",rj);v("nrg.string.dirname",sj);v("nrg.string.getFileExtension",tj);v("nrg.string.fileNameMatch",function(a,b){return rj(a)===rj(b)});v("nrg.string.stripNonAlphanumeric",uj);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return uj(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",vj);v("nrg.string.mrmlColorToRgb",wj);function xj(a,b,c){wc.call(this);this.Tu=a;this.kg=b||0;this.ed=c;this.AF=ta(this.RF,this)}w(xj,wc);f=xj.prototype;f.tf=0;f.f=function(){xj.d.f.call(this);this.stop();delete this.Tu;delete this.ed};f.start=function(a){this.stop();this.tf=Yf(this.AF,ca(a)?a:this.kg)};f.stop=function(){this.dh()&&ba.clearTimeout(this.tf);this.tf=0};f.dh=function(){return 0!=this.tf};f.RF=function(){this.tf=0;this.Tu&&this.Tu.call(this.ed)};var rb={},yj=null;function zj(a){a=ma(a);delete rb[a];qb()&&yj&&yj.stop()}function Aj(){yj||(yj=new xj(function(){Bj()},20));var a=yj;a.dh()||a.start()}function Bj(){var a=wa();C(rb,function(b){Cj(b,a)});qb()||Aj()};function Dj(){$c.call(this);this.R=Ej;this.endTime=this.startTime=null}w(Dj,$c);var Ej=0;Dj.prototype.uf=function(){return 1==this.R};Dj.prototype.fi=function(){this.nc("begin")};Dj.prototype.onEnd=function(){this.nc("end")};Dj.prototype.nc=function(a){this.dispatchEvent(a)};function Fj(a,b,c,d){Dj.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.Zo=a;this.YF=b;this.duration=c;this.Sx=d;this.coords=[];this.cl=!1}w(Fj,Dj);f=Fj.prototype;f.aj=function(a){this.cl=a};f.zf=0;
f.play=function(a){if(a||this.R==Ej)this.zf=0,this.coords=this.Zo;else if(this.uf())return!1;zj(this);this.startTime=a=wa();-1==this.R&&(this.startTime-=this.duration*this.zf);this.endTime=this.startTime+this.duration;this.zf||this.fi();this.nc("play");-1==this.R&&this.nc("resume");this.R=1;var b=ma(this);b in rb||(rb[b]=this);Aj();Cj(this,a);return!0};f.stop=function(a){zj(this);this.R=Ej;a&&(this.zf=1);Gj(this,this.zf);this.nc("stop");this.onEnd()};
f.pause=function(){this.uf()&&(zj(this),this.R=-1,this.nc("pause"))};f.f=function(){this.R==Ej||this.stop(!1);this.nc("destroy");Fj.d.f.call(this)};f.ie=function(){this.g()};function Cj(a,b){a.zf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.zf&&(a.zf=1);Gj(a,a.zf);1==a.zf?(a.R=Ej,zj(a),a.nc("finish"),a.onEnd()):a.uf()&&a.jv()}function Gj(a,b){ja(a.Sx)&&(b=a.Sx(b));a.coords=Array(a.Zo.length);for(var c=0;c<a.Zo.length;c++)a.coords[c]=(a.YF[c]-a.Zo[c])*b+a.Zo[c]}f.jv=function(){this.nc("animate")};
f.nc=function(a){this.dispatchEvent(new Hj(a,this))};function Hj(a,b){Ec.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.zf=b.zf;this.state=b.R}w(Hj,Ec);var Ij={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Jj(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Kj.test(c))return b.jj=Lj(c),b.type="hex",b;a:{var d=a.match(Mj);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.jj=Nj(c),b.type="rgb",b;if(Ij&&(c=Ij[a.toLowerCase()]))return b.jj=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Oj=/#(.)(.)(.)/;
function Lj(a){if(!Kj.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Oj,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Pj(a){a=Lj(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Nj(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Qj(b.toString(16));c=Qj(c.toString(16));a=Qj(a.toString(16));return"#"+b+c+a}var Kj=/^#(?:[0-9a-f]{3}){1,2}$/i,Mj=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Qj(a){return 1==a.length?"0"+a:a}
function Rj(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Nj([Math.floor(d),Math.floor(e),Math.floor(h)])};function Sj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=Bi(a)||(c=Kh(a).documentElement);if(!c)return b;if(hc)var d=cj(c),b=b+d.left;else qc(8)&&(d=cj(c),b-=d.left);return Ki(c)?c.clientWidth-(b+a.offsetWidth):b};function Tj(a,b,c,d,e){Fj.call(this,b,c,d,e);this.element=a}w(Tj,Fj);f=Tj.prototype;f.o=ea;f.Se=function(){ca(this.mh)||(this.mh=Ki(this.element));return this.mh};f.jv=function(){this.o();Tj.d.jv.call(this)};f.onEnd=function(){this.o();Tj.d.onEnd.call(this)};f.fi=function(){this.o();Tj.d.fi.call(this)};function Uj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Tj.apply(this,arguments)}w(Uj,Tj);
Uj.prototype.o=function(){var a=this.cl&&this.Se()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Vj(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Tj.apply(this,arguments)}w(Vj,Tj);Vj.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Wj(a,b,c,d,e){Tj.call(this,a,[b],[c],d,e)}w(Wj,Tj);Wj.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Xj(a,b,c,d,e){Tj.call(this,a,[b],[c],d,e)}w(Xj,Tj);Xj.prototype.o=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Yj(a,b,c,d,e){u(b)&&(b=[b]);u(c)&&(c=[c]);Tj.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(Yj,Tj);Yj.prototype.o=function(){Ti(this.element,this.coords[0])};
Yj.prototype.show=function(){this.element.style.display=""};Yj.prototype.em=function(){this.element.style.display="none"};function Zj(a,b,c){Yj.call(this,a,1,0,b,c)}w(Zj,Yj);function ak(a,b,c){Yj.call(this,a,0,1,b,c)}w(ak,Yj);function bk(a,b,c){Yj.call(this,a,1,0,b,c)}w(bk,Yj);bk.prototype.fi=function(){this.show();bk.d.fi.call(this)};bk.prototype.onEnd=function(){this.em();bk.d.onEnd.call(this)};function ck(a,b,c){Yj.call(this,a,0,1,b,c)}w(ck,Yj);ck.prototype.fi=function(){this.show();ck.d.fi.call(this)};
function dk(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Tj.apply(this,arguments)}w(dk,Tj);dk.prototype.bs=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};dk.prototype.o=function(){this.bs()};function ek(){Dj.call(this);this.Wb=[]}w(ek,Dj);ek.prototype.add=function(a){Ib(this.Wb,a)||(this.Wb.push(a),F(a,"finish",this.kv,!1,this))};ek.prototype.remove=function(a){Lb(this.Wb,a)&&Uc(a,"finish",this.kv,!1,this)};ek.prototype.f=function(){D(this.Wb,function(a){a.g()});this.Wb.length=0;ek.d.f.call(this)};function fk(){ek.call(this);this.cu=0}w(fk,ek);
fk.prototype.play=function(a){if(0==this.Wb.length)return!1;if(a||this.R==Ej)this.cu=0,this.fi();else if(this.uf())return!1;this.nc("play");-1==this.R&&this.nc("resume");var b=-1==this.R&&!a;this.startTime=wa();this.endTime=null;this.R=1;D(this.Wb,function(c){b&&-1!=c.R||c.play(a)});return!0};fk.prototype.pause=function(){this.uf()&&(D(this.Wb,function(a){a.uf()&&a.pause()}),this.R=-1,this.nc("pause"))};
fk.prototype.stop=function(a){D(this.Wb,function(b){b.R==Ej||b.stop(a)});this.R=Ej;this.endTime=wa();this.nc("stop");this.onEnd()};fk.prototype.kv=function(){this.cu++;this.cu==this.Wb.length&&(this.endTime=wa(),this.R=Ej,this.nc("finish"),this.onEnd())};function gk(){ek.call(this);this.qf=0}w(gk,ek);
gk.prototype.play=function(a){if(0==this.Wb.length)return!1;if(a||this.R==Ej)this.qf<this.Wb.length&&this.Wb[this.qf].R!=Ej&&this.Wb[this.qf].stop(!1),this.qf=0,this.fi();else if(this.uf())return!1;this.nc("play");-1==this.R&&this.nc("resume");this.startTime=wa();this.endTime=null;this.R=1;this.Wb[this.qf].play(a);return!0};gk.prototype.pause=function(){this.uf()&&(this.Wb[this.qf].pause(),this.R=-1,this.nc("pause"))};
gk.prototype.stop=function(a){this.R=Ej;this.endTime=wa();if(a)for(a=this.qf;a<this.Wb.length;++a){var b=this.Wb[a];b.R==Ej&&b.play();b.R==Ej||b.stop(!0)}else this.qf<this.Wb.length&&this.Wb[this.qf].stop(!1);this.nc("stop");this.onEnd()};gk.prototype.kv=function(){this.uf()&&(this.qf++,this.qf<this.Wb.length?this.Wb[this.qf].play():(this.endTime=wa(),this.R=Ej,this.nc("finish"),this.onEnd()))};v("nrg.convert",function(){});function hk(a){if(!g(a)&&!u(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function ik(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function jk(a){var b={};C(a,function(a,d){isNaN(a)?r(a)&&(b[d]=a):b[d]=a});return b}function kk(a){var b={};C(a,function(a,d){r(a)?0<a.length&&(b[d]=a):b[d]=a});return b}
v("nrg.convert.pct",function(a){if(!u(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",hk);v("nrg.convert.remap1D",ik);v("nrg.convert.toInt",function(a){if(!r(a)&&!u(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)});
v("nrg.convert.toFloatArray",function(a){if(!r(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");D(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!la(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!r(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;D(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",jk);v("nrg.convert.filterZeroLengthStrings",kk);v("nrg.style",function(){});var lk="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function mk(a){return a.getBoundingClientRect()}function nk(a){var b=Ei(a);a=T(a);this.te=b;this.size=a;this.left=this.x=b.x;this.width=a.width;this.right=b.x+a.width;this.top=this.y=b.y;this.height=a.height;this.bottom=b.y+a.height}
function ok(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function pk(a,b){a&&b&&(a.style||(a.style={}),xi(a,b),D("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Da(b[c],"%")&&(a.style[c]=hk(b[c]))}))}var qk="is_hovered_"+B();
function rk(a,b,c,d,e,h){function k(){a[qk]=!1;Ch(a,b);null!=h&&h()}function l(){a[qk]=!0;P(a,b);null!=e&&e()}F(a,"mouseenter",l);F(a,"mouseleave",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}function sk(a,b,c){var d=new nk(a);d.right>c&&(d.left=c-d.width);d.left<b&&(d.left=b);a.style.left=d.left.toString()+"px";return new nk(a)}v("nrg.style.cssProperties",lk);
v("nrg.style.removeClassesThatContain",function(a,b){var c=Ah(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)Ch(a,d[e])});v("nrg.style.absolutePosition",mk);v("nrg.style.dims",nk);v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});
v("nrg.style.getComputedStyle",function(a,b){if(b&&r(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=lk);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return ok(c)});v("nrg.style.parseIntNumericalProperties",ok);v("nrg.style.setStyle",pk);v("nrg.style.constrainHorizontally",sk);v("nrg.style.IS_HOVERED",qk);v("nrg.style.setHoverClass",rk);
v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function tk(a){return 1-Math.pow(1-a,3)};function uk(){}v("nrg.fx",uk);function vk(a,b,c){void 0===b&&(b=500);wk(a,b,1,c)}function xk(a,b,c){void 0===b&&(b=500);wk(a,0,0,function(){wk(a,b,1,c)})}function yk(a,b,c){void 0===b&&(b=500);wk(a,b,0,c)}function wk(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:a.style.opacity=1);var h=new Yj(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);I(h);delete h});h.play()}
function zk(a,b,c){D(a,function(a){a.style.opacity=0});b=u(b)?b:500;c=u(c)?c:250;var d=new Wf(0);d.addEventListener(Xf,function(){elt=a[0];vk(elt,b);1==a.length?(d.stop(),d.g()):(a=Pb(a,1),d.setInterval(c))});d.start()}uk.animGenStyles="left top width height opacity background-color color z-index".split(" ");function Ak(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Uj(a,[b.left,b.top],[c.left,c.top],d,tk)}
function Bk(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Vj(a,[b.width,b.height],[c.width,c.height],d,tk)}function Ck(a,b,c,d){if("opacity"in b||"opacity"in c)if(D([b,c],function(a){"opacity"in a||(a.opacity=1);u(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Yj(a,b.opacity,c.opacity,d)}
function Dk(a,b,c,d){if("visibility"in b||"visibility"in c)if(D([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new ck(a,d):new bk(a,d)}
function Ek(a,b,c,d){if("background-color"in b||"background-color"in c){D([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Jj(b["background-color"]),h=Jj(c["background-color"]);if(e.jj!==h.jj)return new dk(a,Pj(e.jj),Pj(h.jj),d,tk)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function Fk(a,b){this.rF=a;this.YL=b}function Gk(a){return kk(jk(a))}
function Hk(a){var b=T(a),c=Ei(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function Ik(a,b){var c=Hk(a),c=Gk(c),d=Hk(b),e=Gk(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new Fk(c,e)}
function Jk(a,b,c,d){var e=[];D(uk.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(Ak(a,b,c,d));break;case "height":e.push(Bk(a,b,c,d));break;case "opacity":e.push(Ck(a,b,c,d));break;case "visibility":e.push(Dk(a,b,c,d));break;case "background-color":e.push(Ek(a,b,c,d))}});var h=[];D(e,function(a){null!=a&&h.push(a)});delete e;return h}
function Kk(a,b,c,d){var e=new fk;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function Lk(a,b,c){function d(){pk(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;F(a,"mouseover",function(){pk(a,{opacity:b})});F(a,"mouseout",d);d()}
function Mk(a,b,c,d,e,h,k){if(!g(b)){var l=[];D(a,function(){l.push(b)});b=l}g(c)||(l=[],D(a,function(){l.push(c)}),c=l);d=u(d)?d:500;var n=[];D(a,function(a,e){n.push(Ck(a,{opacity:b[e]},{opacity:c[e]},d))});Kk(n,e,h,k)}v("nrg.fx.fadeIn",vk);v("nrg.fx.fadeInFromZero",xk);v("nrg.fx.fadeOut",yk);v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);wk(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",wk);v("nrg.fx.animGenStyles",uk.animGenStyles);
v("nrg.fx.generateAnim_Slide",Ak);v("nrg.fx.generateAnim_Resize",Bk);v("nrg.fx.generateAnim_Fade",Ck);v("nrg.fx.generateAnim_RemoveAddFade",Dk);v("nrg.fx.generateAnim_BgColorTrans",Ek);v("nrg.fx.TransitionDims",Fk);v("nrg.fx.filterTransitionStyles",Gk);v("nrg.fx.getTransitionStyles",Hk);v("nrg.fx.generateTransitionDims",Ik);v("nrg.fx.getAnimationDims",function(a){var b=T(a),c=Ei(a);return{"background-color":Ai(a,"backgroundColor"),width:b.width,left:c.x,top:c.y,height:b.height}});
v("nrg.fx.generateAnimations",Jk);v("nrg.fx.parallelAnimate",Kk);v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new gk;D(a,function(a){c&&F(a,"animate",c);e.add(a)});b&&F(e,"begin",b);F(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",Lk);v("nrg.fx.sequentialFadeIn",zk);v("nrg.fx.parallelFade",Mk);function Nk(a){return a.slice(a.lastIndexOf("/")+1)}function Ok(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Da(b,"/")?b+d:b+("/"+d);return b};function Pk(){}v("nrg.dom",Pk);function Qk(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!r(b))throw new TypeError("String expected!",b);if(c&&!r(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Rk(e,{src:b?Ok(b,bb(e)+"."+c):""});return d}function Sk(a,b){var c=Q("img",{src:b});c.style.YO="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Yh(a,c);c.onclick=c.parentNode.onclick}
function Rk(a,b,c,d){if(!r(a))throw new TypeError("String expected!");if(b&&!la(b))throw new TypeError("Object expected!");if(null!=c&&!u(c))throw new TypeError("Number expected!");if(null!=d&&!u(d))throw new TypeError("Number expected!");a=Tk("div",a,b?b:{});b&&b.src&&Sk(a,b.src);Lk(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Tk(a,b,c){if(!r(a))throw new TypeError("String expected!",a);if(!r(b))throw new TypeError("String expected!",b);if(c&&!la(c))throw new TypeError("Object expected!");c=c&&la(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:bb(b.replace(/\./g,"-").toLowerCase());return Q(a,c)}v("nrg.dom.createBasicHoverButtonSet",Qk);v("nrg.dom.createDivChildImage",Sk);v("nrg.dom.createBasicHoverButton",Rk);v("nrg.dom.createUniqueDom",Tk);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Pk.bQ(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function U(a){hj.call(this,a);this.Ow();this.q=Tk("div",this.constructor.ID_PREFIX,a);this.gq();Uk(this)}w(U,hj);v("nrg.ui.Component",U);f=U.prototype;f.Ow=function(){if(this instanceof U){this.constructor.d&&this.constructor.d instanceof U&&U.prototype.Ow.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.qp)||(this.constructor.qp=Vk(this.constructor.ID_PREFIX),this.constructor.Rc=this.constructor.qp)}};
function Vk(a){return a.toLowerCase().replace(/\./g,"-")}f.gq=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)U.prototype.gq.bind(a)(),a=a.constructor.d;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=vb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=vj(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Uk(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Vk(c.constructor.ID_PREFIX),Kb(b,d),c=c.constructor.d;D(b,function(a){null!=this.a()&&P(this.a(),a)}.bind(a))}f.oj="";f.YB=function(a){this.oj=a};f.TG=function(){return this.oj};f.iF=function(a){null==this.ap&&(this.ap=[]);this.ap.push(a)};
f.Nh=function(){if(null==this.pa)this.pa=T(this.a());else if(this.pa.height!==this.A.height||this.pa.width!==this.A.width)this.pa=this.A;if(null==this.zo)this.zo=Ei(this.a());else if(this.zo.x!==this.iq.x||this.zo.y!==this.iq.y)this.zo=this.iq;this.A=T(this.a());this.iq=Ei(this.a())};f.o=function(){this.Nh()};f.k=function(a){this.la&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):U.d.k.call(this,a)};f.jz=!1;f.PF=function(){return this.jz};
f.f=function(){U.d.f.call(this);null!=this.ap&&(D(this.ap,function(a){I(a);a.g()}),Jb(this.ap));I(this);I(this.a());R(this.a());this.zo=this.pa=this.iq=this.A=this.oj=null;this.jz=!0};f.Wt=function(a){null!=a&&(a=g(a)?a:[a],D(a,function(a){I(a);a.g()}),Jb(a))};f.nq=function(a){null!=a&&(I(a),a.g())};f.oq=function(a){C(a,function(b,c){I(b);R(b);delete a[c]});sb(a)};f.Cn=function(a){C(a,function(b,c){I(b);b.g();delete a[c]});sb(a)};v("nrg.ui.Component.animationLengths",{JM:150,iN:300,XN:600});
v("nrg.ui.Component.idPrefixToCssClass",Vk);v("nrg.ui.Component.prototype.validateIdPrefix",U.prototype.Ow);v("nrg.ui.Component.prototype.imagePrefix",U.prototype.oj);v("nrg.ui.Component.prototype.createCssMap",U.prototype.gq);v("nrg.ui.Component.prototype.setImagePrefix",U.prototype.YB);v("nrg.ui.Component.prototype.getImagePrefix",U.prototype.TG);v("nrg.ui.Component.prototype.addSubComponent",U.prototype.iF);v("nrg.ui.Component.prototype.calcDims",U.prototype.Nh);
v("nrg.ui.Component.prototype.updateStyle",U.prototype.o);v("nrg.ui.Component.prototype.render",U.prototype.k);v("nrg.ui.Component.prototype.disposeInternalCalled",U.prototype.PF);v("nrg.ui.Component.prototype.disposeAnimations",U.prototype.Wt);v("nrg.ui.Component.prototype.disposeAnimationQueue",U.prototype.nq);v("nrg.ui.Component.prototype.disposeElementMap",U.prototype.oq);v("nrg.ui.Component.prototype.disposeComponentMap",U.prototype.Cn);v("nrg.ui.Component.prototype.disposeInternal",U.prototype.f);var Wk;function Xk(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Yk(a,b,c){ha(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Wk||(Wk={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Wk,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Zk(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function $k(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]}function al(a,b){return a.classList?a.classList.contains(b):Ib($k(a),b)}function bl(a,b){a.classList?a.classList.add(b):al(a,b)||(a.className+=0<a.className.length?" "+b:b)}function cl(a,b){if(a.classList)D(b,function(b){bl(a,b)});else{var c={};D($k(a),function(a){c[a]=!0});D(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function dl(a,b){a.classList?a.classList.remove(b):al(a,b)&&(a.className=Cb($k(a),function(a){return a!=b}).join(" "))}function el(a,b){a.classList?D(b,function(b){dl(a,b)}):a.className=Cb($k(a),function(a){return!Ib(b,a)}).join(" ")}function fl(a,b,c){c?bl(a,b):dl(a,b)};function gl(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!hc;default:return 166>a.keyCode||183<a.keyCode}}
function hl(a,b,c,d,e){if(!(E||ic&&pc("525")))return!0;if(cc&&e)return il(a);if(e&&!d)return!1;u(b)&&(b=jl(b));if(!c&&(17==b||18==b||cc&&91==b))return!1;if(ic&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return!(E&&qc(9));case 27:return!ic}return il(a)}
function il(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||ic&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function jl(a){if(hc)a=kl(a);else if(cc&&ic)a:switch(a){case 93:a=91;break a}return a}
function kl(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function ll(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,Xk(a,k.Zg()),bl(a,"goog-zippy-header"),ml(k,a),a&&k.GA.D(a,"keydown",k.Ar))}$c.call(this);this.ob=e||Ih();this.rk=this.ob.a(a)||null;this.sq=this.ob.a(d||null);this.pc=(this.Qu=ja(b)?b:null)||!b?null:this.ob.a(b);this.ag=!0==c;this.GA=new dj(this);this.cv=new dj(this);var k=this;h(this.rk);h(this.sq);this.ec(this.ag)}w(ll,$c);var nl={Rw:"action",sx:"toggle"};f=ll.prototype;f.Dk=!0;f.f=function(){ll.d.f.call(this);Ac(this.GA);Ac(this.cv)};
f.Zg=function(){return"tab"};f.Ka=function(){return this.pc};f.toggle=function(){this.ec(!this.ag)};f.ec=function(a){this.pc?Ui(this.pc,a):a&&this.Qu&&(this.pc=this.Qu());this.pc&&bl(this.pc,"goog-zippy-content");this.sq?(Ui(this.rk,!a),Ui(this.sq,a)):ol(this,a);this.ag=a;this.dispatchEvent(new pl(nl.sx,this))};function ol(a,b){a.rk&&(fl(a.rk,"goog-zippy-expanded",b),fl(a.rk,"goog-zippy-collapsed",!b),Yk(a.rk,"expanded",b))}
f.Mo=function(a){this.Dk!=a&&((this.Dk=a)?(ml(this,this.rk),ml(this,this.sq)):this.cv.tg())};function ml(a,b){b&&a.cv.D(b,"click",a.zr)}f.Ar=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Ec(nl.Rw,this)),a.preventDefault(),a.stopPropagation()};f.zr=function(){this.toggle();this.dispatchEvent(new Ec(nl.Rw,this))};function pl(a,b){Ec.call(this,a,b)}w(pl,Ec);function ql(a,b,c,d){d=d||Ih();var e=d.B("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.tq=e;this.nf=null;ll.call(this,a,b,c,void 0,d);a=this.ag;this.tq.style.display=a?"":"none";ol(this,a)}w(ql,ll);f=ql.prototype;f.Li=500;f.oF=tk;
f.ec=function(a){if(this.ag!=a||this.nf){"none"==this.tq.style.display&&(this.tq.style.display="");var b=this.Ka().offsetHeight,c=0;this.nf?(a=this.ag,I(this.nf),this.nf.stop(!1),c=parseInt(this.Ka().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;ol(this,a);this.nf=new Fj([0,c],[0,a?b:0],this.Li,this.oF);F(this.nf,["begin","animate","end"],this.CJ,!1,this);F(this.nf,"end",ta(this.DJ,this,a));this.nf.play(!1)}};f.CJ=function(a){var b=this.Ka();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.DJ=function(a){a&&(this.Ka().style.marginTop="0");I(this.nf);this.ag=a;this.nf=null;a||(this.tq.style.display="none");this.dispatchEvent(new pl(nl.sx,this))};function rl(a,b,c,d){U.call(this);this.Mb=a;this.Hb=Q("div",{id:"ZippyHeader_"+a+"_"+B(),"class":rl.CSS.rp});this.Hb[sl]=a.toLowerCase();null!=d?d(b,this.Hb):b.appendChild(this.Hb);this.am=Q("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":rl.CSS.BD});this.Iw();this.Hb.appendChild(this.am);this.Yg=Q("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":rl.CSS.yD},"+");this.Hb.appendChild(this.Yg);this.of=Q("div",{id:"ZippyContent_"+a+"_"+B(),"class":rl.CSS.wh});b.appendChild(this.of);this.ac=new this.eD(this.Hb,
this.of,null!=c?c:!1);this.ac instanceof ql&&(this.ac.Li=500);this.NL=ma(this);this.Gc={};F(this.Hb,"mouseover",this.QK.bind(this));F(this.Hb,"mouseout",this.PK.bind(this));tl(this)}w(rl,U);v("nrg.ui.ZippyNode",rl);rl.ID_PREFIX="nrg.ui.ZippyNode";var ul={GM:"a",uM:"b",oD:"c"};rl.CSS_SUFFIX={rp:"header",dx:"header-mouseover",BD:"header-label",yD:"expandicon",Ww:"expandicon-mouseover",wh:"content",wh:"content-sub",KD:"loading-holder",MD:"loading-text",LD:"loading-image"};
function vl(a,b,c){var d=a[0];r(d)&&null!=b&&(d=b.Gc[d]);d.ac.Li=200;1<a.length&&!d.ac.ag&&Tc(d,"a",function(){d.ac.Li=500;vl(Pb(a,1),d,c)});d.ec(!0);null!=c&&c(d,a)}var sl=B();f=rl.prototype;f.eD=ql;f.Iw=function(a){a=null!=a?a:45;var b=this.am,c=this.Mb.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.Mb?Wa(this.Mb,a+60):c.length==this.Mb.length?Wa(this.Mb,a):this.Mb;return b};f.qe=null;f.Au=function(){return null!=this.qe};f.mr=!1;f.aJ=function(){return this.mr};
f.Tv=function(a,b){var c=function(){R(this.qe);this.qe=null}.bind(this);a?(this.mr=!0,wk(this.qe,500,0,function(){c();null!=b&&b()},1)):c()};f.ay=function(){if(null==this.qe){this.qe=Q("div",{id:"LoadingHolder_"+B()});P(this.qe,rl.CSS.KD);var a=Q("div");P(a,rl.CSS.MD);a.innerHTML="Loading...";var b=Q("img");P(b,rl.CSS.LD);b.src=serverRoot+"/images/viewer/xiv/ui/other/loading.gif";Yh(this.qe,a);Yh(this.qe,b);Yh(this.of,this.qe);this.qe.style.opacity=0;vk(this.qe,300);this.mr=!1}};f.Pd=function(){return this.Mb};
f.nH=function(){return this.Gc};f.CL=function(a){this.Yg.style.visibility=!0==a?"visible":"hidden"};f.NG=function(){return this.Hb};f.tG=function(){return this.of};f.OG=function(){return this.am};f.cI=function(){return this.ac};f.ec=function(a){this.ac.ec(a)};f.rL=function(a){this.eD=!0===a?ql:ll};
function tl(a){F(a.ac,nb(nl),function(a){null!=this.ac.nf?this.dispatchEvent({type:"c"}):a.target.ag?this.Hv():(this.Yg.innerHTML="+",pk(this.Yg,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"b"}))}.bind(a))}f.Hv=function(){this.Yg.innerHTML="-";pk(this.Yg,{"margin-left":"-1em"});this.dispatchEvent({type:"a"})};f.QK=function(){P(this.Hb,rl.CSS.dx);P(this.Yg,rl.CSS.Ww)};f.PK=function(){Ch(this.Hb,rl.CSS.dx);Ch(this.Yg,rl.CSS.Ww)};
f.f=function(){rl.d.f.call(this);R(this.am);delete this.am;R(this.Yg);delete this.Yg;I(this.Hb);R(this.Hb);delete this.Hb;R(this.of);delete this.of;null!=this.ac&&(this.ac.g(),I(this.ac),delete this.ac);null!=this.qe&&(this.Tv(),delete this.qe);this.Cn(this.Gc);delete this.Gc;delete this.NL;delete this.Mb};v("nrg.ui.ZippyNode.ID_PREFIX",rl.ID_PREFIX);v("nrg.ui.ZippyNode.EventType",ul);v("nrg.ui.ZippyNode.CSS_SUFFIX",rl.CSS_SUFFIX);v("nrg.ui.ZippyNode.NODE_STORT_TAG",sl);
v("nrg.ui.ZippyNode.serialExpand",vl);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",rl.prototype.Iw);v("nrg.ui.ZippyNode.prototype.getTitle",rl.prototype.Pd);v("nrg.ui.ZippyNode.prototype.addLoadingImage",rl.prototype.XO);v("nrg.ui.ZippyNode.prototype.getNodes",rl.prototype.nH);v("nrg.ui.ZippyNode.prototype.getHeader",rl.prototype.NG);v("nrg.ui.ZippyNode.prototype.getContentHolder",rl.prototype.tG);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",rl.prototype.OG);
v("nrg.ui.ZippyNode.prototype.showExpandIcon",rl.prototype.CL);v("nrg.ui.ZippyNode.prototype.getZippy",rl.prototype.cI);v("nrg.ui.ZippyNode.prototype.setExpanded",rl.prototype.ec);v("nrg.ui.ZippyNode.prototype.setAnimated",rl.prototype.rL);v("nrg.ui.ZippyNode.prototype.hasLoadingIndicator",rl.prototype.Au);v("nrg.ui.ZippyNode.prototype.addLoadingIndicator",rl.prototype.ay);v("nrg.ui.ZippyNode.prototype.removeLoadingIndicator",rl.prototype.Tv);
v("nrg.ui.ZippyNode.prototype.loadingIndicatorRemoving",rl.prototype.aJ);v("nrg.ui.ZippyNode.prototype.disposeInternal",rl.prototype.f);M.zd={};M.zd.Ed=function(){wc.call(this)};w(M.zd.Ed,wc);v("gxnat.vis.VisNode",M.zd.Ed);f=M.zd.Ed.prototype;f.Xf="Generic";f.$r=function(a){this.Xf=a};f.oG=function(){return this.Xf};f.zm="";f.To=function(a){this.zm=a};f.PH=function(){return this.zm};f.Mb=null;f.we=function(a){this.Mb=a};f.Pd=function(){return this.Mb};f.g=function(){M.zd.Ed.d.g.call(this);this.Xf&&delete this.Xf;this.zm&&delete this.zm;this.Mb&&delete this.Mb};v("gxnat.vis.VisNode.prototype.setCategory",M.zd.Ed.prototype.$r);
v("gxnat.vis.VisNode.prototype.getCategory",M.zd.Ed.prototype.oG);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",M.zd.Ed.prototype.To);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",M.zd.Ed.prototype.PH);v("gxnat.vis.VisNode.prototype.setTitle",M.zd.Ed.prototype.we);v("gxnat.vis.VisNode.prototype.getTitle",M.zd.Ed.prototype.Pd);v("gxnat.vis.VisNode.prototype.dispose",M.zd.Ed.prototype.g);function wl(a){this.zp=new JSZip(a)}w(wl,wc);v("gxnat.Zip",wl);function xl(a,b,c,d){if(!Ea(a,".zip")){if(!Ea(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=M.ux}var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new wl(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}wl.prototype.fg=function(){return this.zp.files};
wl.prototype.Xu=function(a,b){var c=0,d=this.fg(),e=mb(d);C(d,function(d){d.asArrayBuffer();a(d.name,d.asArrayBuffer());c==e-1&&null!=b&&b();c++}.bind(this))};wl.prototype.g=function(){wl.d.g.call(this);this.Xu(function(a){this.zp.remove(a)}.bind(this));sb(this.zp);delete this.zp};v("gxnat.Zip.prototype.getFiles",wl.prototype.fg);v("gxnat.Zip.prototype.loopFiles",wl.prototype.Xu);v("gxnat.Zip.getFilesAsZip",xl);v("gxnat.Zip.prototype.dispose",wl.prototype.g);v("gxnat.slicerNode",function(){});
function yl(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function zl(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",yl);v("gxnat.slicerNode.toFloatArray",zl);function Al(){ma(this)}v("gxnat.slicerNode.Node",Al);function Bl(a,b){ma(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;D(yl(b),function(b){D(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.Bn=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=zl(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=zl(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(Bl,Al);v("gxnat.slicerNode.Display",Bl);function Cl(a,b){Bl.call(this,a,b)}w(Cl,Bl);v("gxnat.slicerNode.Mesh",Cl);function Dl(a,b){if(a instanceof Dl)this.pd=a.Cw();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!u(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.pd=Nb(a);else if(a instanceof uh)this.pd=El(a.height,a.width);else if(u(a)&&u(b)&&0<a&&0<b)this.pd=El(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.xd=new uh(this.pd[0].length,this.pd.length)}
function Fl(a,b,c){for(var d=0;d<a.hj().height;d++)for(var e=0;e<a.hj().width;e++)b.call(c,a.pd[d][e],d,e,a)}function Gl(a,b){var c=new Dl(a.hj());Fl(a,function(d,e,h){c.pd[e][h]=b.call(void 0,d,e,h,a)});return c}function El(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=Dl.prototype;f.add=function(a){if(!vh(this.xd,a.hj()))throw Error("Matrix summation is only supported on arrays of equal size");return Gl(this,function(b,c,d){return b+a.pd[c][d]})};
f.Rl=function(a,b){if(this.xd.width!=a.xd.width||this.xd.height!=a.xd.height)return!1;for(var c=b||0,d=0;d<this.xd.height;d++)for(var e=0;e<this.xd.width;e++)if(!(Math.abs(this.pd[d][e]-a.pd[d][e])<=(c||1E-6)))return!1;return!0};f.hj=function(){return this.xd};
f.multiply=function(a){if(a instanceof Dl){if(this.xd.width!=a.hj().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return Hl(this,a)}if(u(a))return Il(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.Ec=function(a){if(!vh(this.xd,a.hj()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return Gl(this,function(b,c,d){return b-a.pd[c][d]})};
f.Cw=function(){return this.pd};f.toString=function(){var a=0;Fl(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];D(this.pd,function(c){b.push("[ ");D(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Jl(a,b,c){return 0<=b&&b<a.xd.height&&0<=c&&c<a.xd.width}
function Hl(a,b){var c=new Dl(a.xd.height,b.hj().width);Fl(c,function(a,e,h){for(var k=a=0;k<this.xd.width;k++)a+=(Jl(this,e,k)?this.pd[e][k]:0)*(Jl(b,k,h)?b.pd[k][h]:0);if(!Jl(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.xd.height+","+c.xd.width+")");c.pd[e][h]=a},a);return c}function Il(a,b){return Gl(a,function(a){return a*b})};function Kl(a,b,c){Bl.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=Gl(new Dl(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.lw=new Ll(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.br=b;this.ss=this.Bn?parseInt(this.Bn.getAttribute("upperThreshold")):null;this.or=this.Bn?parseInt(this.Bn.getAttribute("lowerThreshold")):null;this.visible=c}w(Kl,Bl);v("gxnat.slicerNode.Volume",Kl);function Ll(a,b,c){var d=new Dl([[0],[0],[0],[1]]);D([a,b,c],function(a,b){var c=a.multiply(d).Cw(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.kL=c;break;case 1:this.EF=c;break;case 2:this.uF=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",Ll);function Ml(a,b){ma(this);this.backgroundColor=wj(a);this.Ay=wj(b)}w(Ml,Al);v("gxnat.slicerNode.BackgroundColor",Ml);function Nl(a,b,c,d,e,h,k,l){ma(this);this.element=a;this.aq=b;this.backgroundColor=c;this.KA=d;this.mn=e;this.hM=h;this.lJ=k;this.cG=l}w(Nl,Al);v("gxnat.slicerNode.SceneView",Nl);function Ol(a){wc.call(this);a instanceof Nl?(this.mn=a.mn,this.aq=a.aq,this.backgroundColor=a.backgroundColor,this.KA=a.KA):a instanceof Kl?(this.origin=a.origin||[0,0,0],this.ss=a.ss||1E4,this.or=a.or||-1E4,this.Pw=a.Pw||!1,this.br=a.br||!1,this.lw=a.lw||null,a.gh&&(this.HA=a.labelMapFile,this.WI=a.colorTableFile)):a instanceof Cl&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Ol,wc);v("gxnat.vis.RenderProperties",Ol);Ol.prototype.g=function(){Ol.d.g.call(this);sb(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Ol.prototype.g);function Pl(a){M.zd.Ed.call(this);this.Zd=a||null}w(Pl,M.zd.Ed);v("gxnat.vis.Renderable",Pl);Pl.prototype.fw=function(a){this.Zd=a instanceof Ol?a:new Ol(a)};Pl.prototype.zH=function(){return this.Zd};Pl.prototype.g=function(){Pl.d.g.call(this);this.Zd&&(this.Zd.g(),delete this.Zd)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Pl.prototype.fw);v("gxnat.vis.Renderable.prototype.getRenderProperties",Pl.prototype.zH);v("gxnat.vis.Renderable.prototype.dispose",Pl.prototype.g);function Ql(a,b){Pl.call(this,b);this.ej=a||[];null!=b&&this.fw(b)}w(Ql,Pl);v("gxnat.vis.Viewable",Ql);f=Ql.prototype;f.Uh=null;f.FG=function(){return this.Uh};f.tL=function(a){return this.Uh=a};
f.TB=function(a,b,c){null!=this.Uh&&sb(this.Uh);this.Uh={};var d=this.fg();D(d,function(a){this.Uh[a]=null}.bind(this));var e,h,k;a.Xu(function(a,b){p=0;for(m=d.length;p<m;p++)if(k=a.split("/"),h=k[k.length-1],"."!=h[0]&&(e=d[p],Ea(e,h)))if(null!=c)for(var p=0,m=c.length;p<m;p++)Ea(e,c[p])&&(this.Uh[e]=b,p=m);else{this.Uh[e]=b;break}}.bind(this),b);a.g()};f.fg=function(){return this.ej};f.bL=function(a){window.gP.log("REMOVING FILE",a);Lb(this.ej,a)};
f.Ki=function(a,b){null==this.ej&&(this.ej=[]);g(a)||(a=[a]);D(a,function(a){null!=b&&null==b(a)||this.ej.push(a)}.bind(this))};f.g=function(){Ql.d.g.call(this);this.ej&&(Jb(this.ej),delete this.ej)};v("gxnat.vis.Viewable.prototype.getFileData",Ql.prototype.FG);v("gxnat.vis.Viewable.prototype.setFileData",Ql.prototype.tL);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Ql.prototype.TB);v("gxnat.vis.Viewable.prototype.getFiles",Ql.prototype.fg);v("gxnat.vis.Viewable.prototype.removeFile",Ql.prototype.bL);
v("gxnat.vis.Viewable.prototype.addFiles",Ql.prototype.Ki);v("gxnat.vis.Viewable.prototype.dispose",Ql.prototype.g);function Rl(a){Pl.call(this);null!=a?g(a)||(a=[a]):a=[];this.Dd=a}w(Rl,Pl);v("gxnat.vis.ViewableGroup",Rl);Rl.prototype.ky=function(a){return this.Dd.push(a)};Rl.prototype.jG=function(){var a=[];D(this.Dd,function(b){a=Mb(a,b.fg())});return a};Rl.prototype.fA=function(){return this.Dd};Rl.prototype.g=function(){Rl.d.g.call(this);D(this.Dd,function(a){g(a)?D(a,function(a){a.g()}):a instanceof Ql&&a.g()});delete this.Dd};v("gxnat.vis.ViewableGroup.prototype.addViewable",Rl.prototype.ky);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Rl.prototype.jG);v("gxnat.vis.ViewableGroup.prototype.getViewables",Rl.prototype.fA);v("gxnat.vis.ViewableGroup.prototype.dispose",Rl.prototype.g);function Sl(){M.zd.Ed.call(this);this.Tc=[]}w(Sl,M.zd.Ed);v("gxnat.vis.ViewableTree",Sl);function Tl(a,b,c){this.ZK=a;this.OL=b;this.aG=c}v("gxnat.vis.ViewableTree.metadataCollection",Tl);f=Sl.prototype;f.Nr=null;f.wm=null;f.Ul=null;f.orientation=null;f.Tb=function(){return this.orientation};f.Po=function(a){this.Nr=a};f.Ro=function(a){this.wm=a};f.Lo=function(a){this.Ul=a};f.$H=function(){return this.Tc};
f.g=function(){Sl.d.g.call(this);null!=this.Nr&&(sb(this.Nr),delete this.NP);null!=this.wm&&(sb(this.wm),delete this.YP);null!=this.Ul&&(sb(this.Ul),delete this.oP);null!=this.Tc&&(D(this.Tc,function(a){a.g()}),delete this.Tc);null!=this.NC&&Jb(this.NC);delete this.NC;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Tl);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Sl.prototype.Nr);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Sl.prototype.wm);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Sl.prototype.Ul);v("gxnat.vis.ViewableTree.prototype.orientation",Sl.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Sl.prototype.Tb);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Sl.prototype.Po);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Sl.prototype.Ro);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Sl.prototype.Lo);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Sl.prototype.$H);
v("gxnat.vis.ViewableTree.prototype.dispose",Sl.prototype.g);function Ul(a,b,c){Sl.call(this);this.$r(a);null!=c&&null!=b&&(this.Fn=c,this.ji=Zg(this.Fn,b.URI,"experiments"),this.tp=new Ug(this.ji));this.co=b;this.ve={}}w(Ul,Sl);v("gxnat.vis.AjaxViewableTree",Ul);var Vl={ID:"Scan ID",Name:"Name",type:"Scan Type"},Wl={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Xl={label:"Session"};function Yl(a,b,c){M.bi(a,function(a){g(a);D(a,function(a){b(a)});c&&c()})}f=Ul.prototype;f.Vh=null;f.dj=!1;
f.UB=function(a,b){null==this.Vh&&(this.Vh={});this.Vh[a]=b};f.bA=function(){var a=0;C(this.Vh,function(b,c){a+=this.Gz(c)}.bind(this));return a};f.Gz=function(a){return parseInt(this.Vh[a].Size,10)};f.GG=function(){return this.Vh};f.IG=function(){return this.dj};f.VB=function(a){this.dj=a};f.CG=function(){return this.Fn};f.yH=function(){return this.ji};f.DH=function(){return this.ve};f.kC=function(a){this.ve=a};f.um=function(){C(Vl,function(a,b){null!=this.co[b]&&(this.ve[a]=this.co[b])}.bind(this))};
f.Po=function(a){Ul.d.Po.call(this,a)};f.Ro=function(a){Ul.d.Ro.call(this,a);C(Wl,function(a,c){null!=this.wm[c]&&(this.ve[a]=this.wm[c])}.bind(this))};f.Lo=function(a){Ul.d.Lo.call(this,a);C(Xl,function(a,c){null!=this.Ul[c]&&(this.ve[a]=this.Ul[c])}.bind(this))};f.JG=function(){return this.Hn};f.pr=function(a){a=a[this.Gn];if(!Da(a,"/"))return this.ji+"!"+a};
f.fj=function(a){if(this.dj)a();else{var b=0,c=0,d="",e;M.bi(this.ji+this.uq,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.pr(e))this.UB(d,e),this.Ki(d,this.Wl);a();this.dj=!0}.bind(this))}};f.Wl=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.zk=function(){};function Zl(a,b,c,d){var e=new Ug(a);Yl(a+"/"+b.prototype.Hn,function(a){new b(a,e.ii("experiments"),c)},d)}
f.g=function(){Ul.d.g.call(this);null!=this.Vh&&(sb(this.Vh),delete this.Vh);delete this.dj;sb(this.ve);delete this.ve;null!=this.co&&(sb(this.co),delete this.co);null!=this.tp&&(this.tp.g(),delete this.tp);delete this.Fn;delete this.ji};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Vl);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Wl);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Xl);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",Yl);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",Zl);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Ul.prototype.dj);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Ul.prototype.UB);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Ul.prototype.bA);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Ul.prototype.Gz);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Ul.prototype.GG);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Ul.prototype.IG);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Ul.prototype.VB);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Ul.prototype.CG);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Ul.prototype.yH);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Ul.prototype.DH);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Ul.prototype.kC);v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Ul.prototype.um);
v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Ul.prototype.Po);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Ul.prototype.Ro);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Ul.prototype.Lo);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Ul.prototype.JG);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Ul.prototype.pr);v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Ul.prototype.fj);
v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Ul.prototype.Wl);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Ul.prototype.zk);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Ul.prototype.g);function $l(a,b,c,d){this.files=a;this.mJ=b;this.zw=c;this.fu=d}v("xiv.sampleData.Sample",$l);function am(){wc.call(this);this.Jg=[]}w(am,wc);v("xiv.sampleData.SampleCollection",am);am.prototype.AH=function(){return this.Jg};am.prototype.g=function(){am.d.g.call(this);D(this.Jg,function(a){sb(a)});delete this.Jg};v("xiv.sampleData.SampleCollection.Samples",am.Jg);v("xiv.sampleData.SampleCollection.getSamples",am.AH);v("xiv.sampleData.SampleCollection.dispose",am.g);function bm(){am.call(this);this.Jg.push(this.Wv)}w(bm,am);v("xiv.sampleData.SlicerScenes",bm);
bm.prototype.Wv=new $l("src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/oneView_brain_2.mrml;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm.nrrd.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/5%3a%20t1_mpr_1mm_p2_pos50-label.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/F.fcsv;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/brain.vtk;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/BrainMesh_Underside.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/Top.png".split(";"),{Name:"Example Slicer Scene",
Type:"Slicer Scene"},"src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function cm(){}v("xiv",cm);cm.MODE="live";v("xiv.SAMPLE_DATA_PATH","xiv/sample-data");v("xiv.SAMPLE_SCAN_PREFIX","xiv/sample-data/scans/");function dm(a,b,c){Ul.call(this,"Scans",a,b);this.ve["Total Frames"]=0;c&&c(this)}w(dm,Ul);v("gxnat.vis.Scan",dm);var em=["dcm","dicom"];f=dm.prototype;f.Hn="scans";f.uq="/files";f.Gn="URI";
f.um=function(){dm.d.um.call(this);if(null!=this.Wk["parameters/orientation"]){var a;a:{switch(this.Wk["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.ve.Orientation=a;this.orientation=this.ve.Orientation}null!=this.Wk["parameters/acqType"]&&(this.ve["Acq. Type"]=this.Wk["parameters/acqType"])};
f.fj=function(a){this.dj?a():M.bi(this.tp.originalUrl,function(b){this.Wk=b.items[0].data_fields;this.um();dm.d.fj.call(this,function(){this.zk();a()}.bind(this))}.bind(this))};f.Wl=function(a){a=dm.d.Wl.call(this,a);if(null!=a){for(var b=0,c=em.length;b<c;b++)if(Ea(a,"."+em[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};
f.Ki=function(a){this.$r("Scans");if(0==this.Tc.length){var b=new Rl;b.we("scan");b.$r("scans");this.Tc.push(b)}0==this.Tc[0].Dd.length&&this.Tc[0].ky(new Ql);this.Tc[0].Dd[0].Ki(a,this.Wl);this.ve["Total Frames"]=this.Tc[0].Dd[0].fg().length};f.pr=function(a){return Zg(this.Fn,a[this.Gn],"experiments")};f.zk=function(a){if(this.Tc&&this.Tc[0]){var b=this.Tc[0].Dd[0].fg().sort(M.xr);this.To(b[Math.floor(b.length/2)]+M.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};
f.g=function(){dm.d.g.call(this);null!=this.Wk&&sb(this.Wk);delete this.Wk};v("gxnat.vis.Scan.acceptableFileTypes",em);v("gxnat.vis.Scan.prototype.folderQuerySuffix",dm.prototype.Hn);v("gxnat.vis.Scan.prototype.fileQuerySuffix",dm.prototype.uq);v("gxnat.vis.Scan.prototype.fileContentsKey",dm.prototype.Gn);v("gxnat.vis.Scan.prototype.setViewableMetadata",dm.prototype.um);v("gxnat.vis.Scan.prototype.getFileList",dm.prototype.fj);v("gxnat.vis.Scan.prototype.fileFilter",dm.prototype.Wl);
v("gxnat.vis.Scan.prototype.addFiles",dm.prototype.Ki);v("gxnat.vis.Scan.prototype.makeFileUrl",dm.prototype.pr);v("gxnat.vis.Scan.prototype.getThumbnailImage",dm.prototype.zk);v("gxnat.vis.Scan.prototype.dispose",dm.prototype.g);function fm(a,b,c){$c.call(this);this.target=a;this.handle=b||a;this.lr=c||new wh(NaN,NaN,NaN,NaN);this.ja=Kh(a);this.zc=new dj(this);zc(this,ua(Ac,this.zc));F(this.handle,["touchstart","mousedown"],this.Yo,!1,this)}w(fm,$c);var gm=E||hc&&pc("1.9.3");f=fm.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.rw=0;f.sw=0;f.Rh=0;f.Md=0;f.Sb=!0;f.Zi=!1;f.xA=0;f.vr=0;f.AI=!1;f.cl=!1;f.aj=function(a){this.cl=a};f.gb=function(){return this.zc};function hm(a,b){a.lr=b||new wh(NaN,NaN,NaN,NaN)}
f.hC=function(a){this.Vr=a};f.Kb=function(a){this.Sb=a};f.f=function(){fm.d.f.call(this);Uc(this.handle,["touchstart","mousedown"],this.Yo,!1,this);this.zc.tg();gm&&this.ja.releaseCapture();this.handle=this.target=null};function im(a){ca(a.mh)||(a.mh=Ki(a.target));return a.mh}
f.Yo=function(a){var b="mousedown"==a.type;if(!this.Sb||this.Zi||b&&!Jc(a))this.dispatchEvent("earlycancel");else{jm(a);if(0==this.xA)if(this.dispatchEvent(new km("start",this,a.clientX,a.clientY)))this.Zi=!0,a.preventDefault();else return;else a.preventDefault();var b=this.ja,c=b.documentElement,d=!gm;this.zc.D(b,["touchmove","mousemove"],this.qI,d);this.zc.D(b,["touchend","mouseup"],this.bj,d);gm?(c.setCapture(!1),this.zc.D(c,"losecapture",this.bj)):this.zc.D(Uh(b),"blur",this.bj);E&&this.AI&&this.zc.D(b,
"dragstart",Fc);this.Vr&&this.zc.D(this.Vr,"scroll",this.pm,d);this.clientX=this.rw=a.clientX;this.clientY=this.sw=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Rh=this.cl?Sj(this.target):this.target.offsetLeft;this.Md=this.target.offsetTop;this.Jv=wi(Ih(this.ja));this.vr=wa()}};
f.bj=function(a,b){this.zc.tg();gm&&this.ja.releaseCapture();if(this.Zi){jm(a);this.Zi=!1;var c=lm(this,this.Rh),d=mm(this,this.Md);this.dispatchEvent(new km("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function jm(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.sa(a.Nc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.sa(a.Nc.changedTouches[0],a.currentTarget)}
f.qI=function(a){if(this.Sb){jm(a);var b=(this.cl&&im(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Zi){var d=this.rw-this.clientX,e=this.sw-this.clientY;if(d*d+e*e>this.xA)if(this.dispatchEvent(new km("start",this,a.clientX,a.clientY)))this.Zi=!0;else{this.ok||this.bj(a);return}}c=nm(this,b,c);b=c.x;c=c.y;this.Zi&&this.dispatchEvent(new km("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(om(this,a,b,c),a.preventDefault())}};function nm(a,b,c){var d=wi(Ih(a.ja));b+=d.x-a.Jv.x;c+=d.y-a.Jv.y;a.Jv=d;a.Rh+=b;a.Md+=c;b=lm(a,a.Rh);a=mm(a,a.Md);return new rh(b,a)}f.pm=function(a){var b=nm(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;om(this,a,b.x,b.y)};function om(a,b,c,d){a.St(c,d);a.dispatchEvent(new km("drag",a,b.clientX,b.clientY,0,c,d))}
function lm(a,b){var c=a.lr,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function mm(a,b){var c=a.lr,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.St=function(a,b){this.cl&&im(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.lg=function(){return this.Zi};
function km(a,b,c,d,e,h,k,l){Ec.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(h)?h:b.Rh;this.top=ca(k)?k:b.Md;this.$t=b;this.UF=!!l}w(km,Ec);yb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function pm(){this.Qv="";this.jE=qm;this.hz=null}pm.prototype.Dz=function(){return this.hz};pm.prototype.toString=function(){return"SafeHtml{"+this.Qv+"}"};function rm(a){if(a instanceof pm&&a.constructor===pm&&a.jE===qm)return a.Qv;eb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}yb("action","cite","data","formaction","href","manifest","poster","src");yb("link","script","style");var qm={};function sm(a,b){var c=new pm;c.Qv=a;c.hz=b;return c}var tm=sm("",0);function um(a,b){$c.call(this);this.ed=new dj(this);this.Zv(a||null);b&&(this.Dm=b)}w(um,$c);f=um.prototype;f.q=null;f.sF=!0;f.yy=null;f.zy=null;f.mm=!1;f.BL=!1;f.Nu=-1;f.vI=!1;f.WF=!0;f.Dm="toggle_display";f.a=function(){return this.q};f.Zv=function(a){if(this.mm)throw Error("Can not change this state of the popup while showing.");this.q=a};f.oC=function(a,b){this.vm=a;this.fm=b};f.gb=function(){return this.ed};f.ta=function(){return this.mm};
f.ba=function(a){this.vm&&this.vm.stop();this.fm&&this.fm.stop();a?this.jw():this.gm()};f.ue=ea;
f.jw=function(){if(!this.mm&&this.lv()){if(!this.q)throw Error("Caller must call setElement before trying to show the popup");this.ue();var a=Kh(this.q);this.vI&&this.ed.D(a,"keydown",this.JJ,!0);if(this.sF)if(this.ed.D(a,"mousedown",this.kB,!0),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.ed.D(a,"mousedown",this.kB,!0);this.ed.D(a,"deactivate",this.jB)}else this.ed.D(a,"blur",
this.jB);"toggle_display"==this.Dm?(this.q.style.visibility="visible",Ui(this.q,!0)):"move_offscreen"==this.Dm&&this.ue();this.mm=!0;this.Nu=wa();this.vm?(Tc(this.vm,"end",this.pB,!1,this),this.vm.play()):this.pB()}};f.gm=function(a){if(!this.mm||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.ed&&this.ed.tg();this.mm=!1;wa();this.fm?(Tc(this.fm,"end",ua(this.Py,a),!1,this),this.fm.play()):this.Py(a);return!0};
f.Py=function(a){"toggle_display"==this.Dm?this.BL?Yf(this.wA,0,this):this.wA():"move_offscreen"==this.Dm&&(this.q.style.top="-10000px");this.uv(a)};f.wA=function(){this.q.style.visibility="hidden";Ui(this.q,!1)};f.lv=function(){return this.dispatchEvent("beforeshow")};f.pB=function(){this.dispatchEvent("show")};f.uv=function(a){this.dispatchEvent({type:"hide",target:a})};f.kB=function(a){a=a.target;gi(this.q,a)||vm(this,a)||this.zy&&!gi(this.zy,a)||150>wa()-this.Nu||this.gm(a)};
f.JJ=function(a){27==a.keyCode&&this.gm(a.target)&&(a.preventDefault(),a.stopPropagation())};f.jB=function(a){if(this.WF){var b=Kh(this.q);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||gi(this.q,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>wa()-this.Nu||this.gm()}};function vm(a,b){return Eb(a.yy||[],function(a){return b===a||gi(a,b)})}f.f=function(){um.d.f.call(this);this.ed.g();Ac(this.vm);Ac(this.fm);delete this.q;delete this.ed;delete this.yy};function wm(a){$c.call(this);this.q=a;a=E?"focusout":"blur";this.YI=F(this.q,E?"focusin":"focus",this,!E);this.ZI=F(this.q,a,this,!E)}w(wm,$c);wm.prototype.handleEvent=function(a){var b=new Hc(a.Nc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};wm.prototype.f=function(){wm.d.f.call(this);Vc(this.YI);Vc(this.ZI);delete this.q};function xm(a,b){hj.call(this,b);this.dM=!!a;this.io=null}w(xm,hj);f=xm.prototype;f.du=null;f.Fc=!1;f.Le=null;f.qd=null;f.yg=null;f.tt=!1;f.U=function(){return"goog-modalpopup"};f.Wh=function(){return this.Le};f.B=function(){xm.d.B.call(this);var a=this.a(),b=Ia(this.U()).split(" ");cl(a,b);ki(a,!0);Ui(a,!1);ym(this);zm(this)};
function ym(a){if(a.dM&&!a.qd){var b;b=a.N().B("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.qd=b;a.qd.className=a.U()+"-bg";Ui(a.qd,!1);Ti(a.qd,0)}a.Le||(a.Le=a.N().B("div",a.U()+"-bg"),Ui(a.Le,!1))}function zm(a){a.yg||(a.yg=a.N().createElement("span"),Ui(a.yg,!1),ki(a.yg,!0),a.yg.style.position="absolute")}f.IB=function(){this.tt=!1};f.Me=function(a){return!!a&&"DIV"==a.tagName};
f.he=function(a){xm.d.he.call(this,a);a=Ia(this.U()).split(" ");cl(this.a(),a);ym(this);zm(this);Ui(this.a(),!1)};f.fb=function(){this.qd&&$h(this.qd,this.a());$h(this.Le,this.a());xm.d.fb.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.yg,a.nextSibling);this.du=new wm(ti(this.N()));this.gb().D(this.du,"focusin",this.OJ);Am(this,!1)};f.Ac=function(){this.ta()&&this.ba(!1);Ac(this.du);xm.d.Ac.call(this);R(this.qd);R(this.Le);R(this.yg)};
f.ba=function(a){a!=this.Fc&&(this.Sk&&this.Sk.stop(),this.Jl&&this.Jl.stop(),this.Rk&&this.Rk.stop(),this.Il&&this.Il.stop(),this.la&&Am(this,a),a?this.jw():this.gm())};function Am(a,b){if(b){a.dm||(a.dm=[]);for(var c=a.N(),c=c.gu(c.ja.body),d=0;d<c.length;d++){var e=c[d];e==a.q||Zk(e,"hidden")||(Yk(e,"hidden",!0),a.dm.push(e))}}else if(a.dm){for(d=0;d<a.dm.length;d++)a.dm[d].removeAttribute("aria-hidden");a.dm=null}}f.oC=function(a,b,c,d){this.Sk=a;this.Rk=b;this.Jl=c;this.Il=d};
f.jw=function(){if(this.dispatchEvent("beforeshow")){try{this.io=ti(this.N()).activeElement}catch(a){}this.Uv();this.ue();this.gb().D(vi(this.N()),"resize",this.Uv);Bm(this,!0);this.focus();this.Fc=!0;this.Sk&&this.Jl?(Tc(this.Sk,"end",this.Gr,!1,this),this.Jl.play(),this.Sk.play()):this.Gr()}};
f.gm=function(){if(this.dispatchEvent("beforehide")){this.gb().rb(vi(this.N()),"resize",this.Uv);this.Fc=!1;this.Rk&&this.Il?(Tc(this.Rk,"end",this.ro,!1,this),this.Il.play(),this.Rk.play()):this.ro();try{var a=ti(this.N()).body,b=ti(this.N()).activeElement||a;this.io&&b==a&&this.io!=a&&this.io.focus()}catch(c){}this.io=null}};function Bm(a,b){a.qd&&Ui(a.qd,b);a.Le&&Ui(a.Le,b);Ui(a.a(),b);Ui(a.yg,b)}f.Gr=function(){this.dispatchEvent("show")};f.ro=function(){Bm(this,!1);this.dispatchEvent("hide")};
f.ta=function(){return this.Fc};f.focus=function(){this.tz()};f.Uv=function(){this.qd&&Ui(this.qd,!1);this.Le&&Ui(this.Le,!1);var a=ti(this.N()),b=Sh(Uh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.qd&&(Ui(this.qd,!0),Oi(this.qd,c,a));this.Le&&(Ui(this.Le,!0),Oi(this.Le,c,a))};
f.ue=function(){var a=ti(this.N()),b=Uh(a)||window;if("fixed"==Bi(this.a()))var c=a=0;else c=wi(this.N()),a=c.x,c=c.y;var d=T(this.a()),b=Sh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);Ci(this.a(),a,c);Ci(this.yg,a,c)};f.OJ=function(a){this.tt?this.IB():a.target==this.yg&&Yf(this.tz,0,this)};f.tz=function(){try{E&&ti(this.N()).body.focus(),this.a().focus()}catch(a){}};
f.f=function(){Ac(this.Sk);this.Sk=null;Ac(this.Rk);this.Rk=null;Ac(this.Jl);this.Jl=null;Ac(this.Il);this.Il=null;xm.d.f.call(this)};function Cm(a,b,c){xm.call(this,b,c);this.Ld=a||"modal-dialog";this.aa=Dm(Dm(new Em,Fm,!0),Gm,!1,!0)}w(Cm,xm);f=Cm.prototype;f.mz=!0;f.Bu=!0;f.av=!0;f.qq=!0;f.Yp=.5;f.Mb="";f.Mc=null;f.Qa=null;f.Xt=!1;f.yd=null;f.Vd=null;f.ps=null;f.ye=null;f.$f=null;f.$c=null;f.Pv="dialog";f.U=function(){return this.Ld};f.we=function(a){this.Mb=a;this.Vd&&hi(this.Vd,a)};f.Pd=function(){return this.Mb};f.Yk=function(a){this.Mc=a=sm(a,null);this.$f&&(this.$f.innerHTML=rm(a))};
f.getContent=function(){return null!=this.Mc?rm(this.Mc):""};f.gj=function(){return this.Pv};f.Ka=function(){this.a()||this.k();return this.$f};f.Hq=function(){this.a()||this.k();return this.yd};f.Wh=function(){this.a()||this.k();return Cm.d.Wh.call(this)};function Hm(a,b){a.Yp=b;if(a.a()){var c=a.Wh();c&&Ti(c,a.Yp)}}function Im(a,b){b!=a.av&&Jm(a,b)}function Jm(a,b){a.av=b;if(a.la){var c=a.N(),d=a.Wh(),e=a.qd;b?(e&&c.Hu(e,a.a()),c.Hu(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.ta()&&Am(a,b)}
f.cs=function(a){this.qq=a;this.Ko(a&&this.la)};f.Ko=function(a){var b=Ia(this.Ld+"-title-draggable").split(" ");this.a()&&(a?cl(this.yd,b):el(this.yd,b));a&&!this.Qa?(this.Qa=new fm(this.a(),this.yd),cl(this.yd,b),F(this.Qa,"start",this.ds,!1,this)):!a&&this.Qa&&(this.Qa.g(),this.Qa=null)};
f.B=function(){Cm.d.B.call(this);var a=this.a(),b=this.N();this.yd=b.B("div",this.Ld+"-title",this.Vd=b.B("span",{className:this.Ld+"-title-text",id:kj(this)},this.Mb),this.ye=b.B("span",this.Ld+"-title-close"));Yh(a,this.yd,this.$f=b.B("div",this.Ld+"-content"),this.$c=b.B("div",this.Ld+"-buttons"));Xk(this.Vd,"heading");Xk(this.ye,"button");ki(this.ye,!0);Yk(this.ye,"label",Km);this.ps=this.Vd.id;Xk(a,this.gj());Yk(a,"labelledby",this.ps||"");this.Mc&&(this.$f.innerHTML=rm(this.Mc));Ui(this.ye,
this.Bu);this.aa&&(a=this.aa,a.q=this.$c,a.k());Ui(this.$c,!!this.aa);Hm(this,this.Yp)};
f.he=function(a){Cm.d.he.call(this,a);a=this.a();var b=this.Ld+"-content";this.$f=Nh(document,null,b,a)[0];this.$f||(this.$f=this.N().B("div",b),this.Mc&&(this.$f.innerHTML=rm(this.Mc)),a.appendChild(this.$f));var b=this.Ld+"-title",c=this.Ld+"-title-text",d=this.Ld+"-title-close";(this.yd=Nh(document,null,b,a)[0])?(this.Vd=Nh(document,null,c,this.yd)[0],this.ye=Nh(document,null,d,this.yd)[0]):(this.yd=this.N().B("div",b),a.insertBefore(this.yd,this.$f));this.Vd?(this.Mb=ni(this.Vd),this.Vd.id||(this.Vd.id=
kj(this))):(this.Vd=Q("span",{className:c,id:kj(this)}),this.yd.appendChild(this.Vd));this.ps=this.Vd.id;Yk(a,"labelledby",this.ps||"");this.ye||(this.ye=this.N().B("span",d),this.yd.appendChild(this.ye));Ui(this.ye,this.Bu);b=this.Ld+"-buttons";(this.$c=Nh(document,null,b,a)[0])?(this.aa=new Em(this.N()),this.aa.Cb(this.$c)):(this.$c=this.N().B("div",b),a.appendChild(this.$c),this.aa&&(a=this.aa,a.q=this.$c,a.k()),Ui(this.$c,!!this.aa));Hm(this,this.Yp)};
f.fb=function(){Cm.d.fb.call(this);this.gb().D(this.a(),"keydown",this.gi).D(this.a(),"keypress",this.gi);this.gb().D(this.$c,"click",this.FJ);this.Ko(this.qq);this.gb().D(this.ye,"click",this.AK);var a=this.a();Xk(a,this.gj());""!==this.Vd.id&&Yk(a,"labelledby",this.Vd.id);this.av||Jm(this,!1)};f.Ac=function(){this.ta()&&this.ba(!1);this.Ko(!1);Cm.d.Ac.call(this)};f.ba=function(a){a!=this.ta()&&(this.la||this.k(),Cm.d.ba.call(this,a))};f.Gr=function(){Cm.d.Gr.call(this);this.dispatchEvent(Lm)};
f.ro=function(){Cm.d.ro.call(this);this.dispatchEvent(Mm);this.Xt&&this.g()};f.ds=function(){var a=ti(this.N()),b=Sh(Uh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=T(this.a());"fixed"==Bi(this.a())?hm(this.Qa,new wh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):hm(this.Qa,new wh(0,0,c-d.width,a-d.height))};f.AK=function(){Nm(this)};
function Nm(a){if(a.Bu){var b=a.aa,c=b&&b.At;c?(b=b.get(c),a.dispatchEvent(new Om(c,b))&&a.ba(!1)):a.ba(!1)}}f.f=function(){this.$c=this.ye=null;Cm.d.f.call(this)};function Pm(a,b){a.aa=b;if(a.$c){if(a.aa){var c=a.aa;c.q=a.$c;c.k()}else a.$c.innerHTML=rm(tm);Ui(a.$c,!!a.aa)}}f.FJ=function(a){a:{for(a=a.target;null!=a&&a!=this.$c;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.aa.get(a);this.dispatchEvent(new Om(a,b))&&this.ba(!1)}};
f.gi=function(a){var b=!1,c=!1,d=this.aa,e=a.target;if("keydown"==a.type)if(this.mz&&27==a.keyCode){var h=d&&d.At,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new Om(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.tt=!0;try{this.yg.focus()}catch(k){}Yf(this.IB,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.ye)Nm(this);else if(d){var l=d.Tt,n;if(n=l)a:{n=d.q.getElementsByTagName("BUTTON");for(var p=
0,m;m=n[p];p++)if(m.name==l||m.id==l){n=m;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new Om(h,String(d.get(h)))))}else e==this.ye&&32==a.keyCode&&Nm(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.ba(!1)};function Om(a,b){this.type=Qm;this.key=a;this.caption=b}w(Om,Ec);var Qm="dialogselect",Mm="afterhide",Lm="aftershow";function Em(a){this.ob=a||Ih();id.call(this)}var Rm,Sm;
w(Em,id);f=Em.prototype;f.Ld="goog-buttonset";f.Tt=null;f.q=null;f.At=null;f.set=function(a,b,c,d){id.prototype.set.call(this,a,b);c&&(this.Tt=a);d&&(this.At=a);return this};function Dm(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.k=function(){if(this.q){this.q.innerHTML=rm(tm);var a=Ih(this.q);this.forEach(function(b,c){var d=a.B("button",{name:c},b);c==this.Tt&&(d.className=this.Ld+"-default");this.q.appendChild(d)},this)}};
f.Cb=function(a){if(a&&1==a.nodeType){this.q=a;a=this.q.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=ni(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==Tm);h&&bl(c,this.Ld+"-default")}}};f.a=function(){return this.q};f.N=function(){return this.ob};var Tm="cancel",Km="Close",Fm={key:"ok",caption:"OK"},Gm={key:Tm,caption:"Cancel"},Um={key:"yes",caption:"Yes"},Vm={key:"no",caption:"No"},Wm={key:"save",caption:"Save"},Xm={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Rm=Dm(new Em,Fm,!0,!0),Dm(Dm(new Em,Fm,!0),Gm,!1,!0),Sm=Dm(Dm(new Em,Um,!0),Vm,!1,!0),Dm(Dm(Dm(new Em,Um),Vm,!0),Gm,!1,!0),Dm(Dm(Dm(new Em,Xm),Wm),Gm,!0,!0));function Ym(){Cm.call(this);this.mz=!1}w(Ym,Cm);v("nrg.ui.Dialog",Ym);Ym.ID_PREFIX="nrg.ui.Dialog";Ym.CSS={nx:"nrg-ui-dialog-overlay",pp:"nrg-ui-dialog-background",Hj:"nrg-ui-dialog-closebutton",rD:"nrg-ui-dialog-closebutton-image",pE:"nrg-ui-dialog-subtext",jl:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",wh:"nrg-ui-dialog-content",kD:"nrg-ui-dialog-buttons"};f=Ym.prototype;f.qq=!0;f.Qa=null;f.Tk=null;f.jy=function(a){P(this.Bw,a)};f.fF=function(a){P(this.Mc,a)};
f.dF=function(a){P(this.hk.parentNode,a)};f.eF=function(a){P(this.hk,a)};f.Vx=function(a){P(this.dq,a)};f.cF=function(a){P(this.yt,a)};function Zm(a){a.dq=Mh("modal-dialog-title-close",a.a())[0];P(a.dq,Ym.CSS.Hj);a.hk=Q("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":Ym.CSS.rD});a.hk.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.dq.appendChild(a.hk);F(a.hk,"click",function(a){this.ba(!this.ta());this.dispatchEvent({type:"f"});a.stopPropagation()}.bind(a))}
f.pF=function(){var a=this.a(),b=ak(a,600),c=Zj(a,600),d=ak(a,600),a=Zj(a,600);this.oC(b,c,d,a)};f.wr=function(a,b,c,d){var e=this.a(),h=T(e.parentNode),k=T(e);c=null!=c?c:0;"left"==a?e.style.left=0+c+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=0+(null!=d?d:0)+"px")};
f.Ne=function(){var a=this.a(),b=T(this.a().parentNode);if(null!=this.Wh()){var c=this.Wh();0==c.opacity?R(c):pk(c,{width:b.width,height:b.height,"z-index":199})}var c=T(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);Ci(a,d,e)};f.cs=function(a){this.qq=a;this.Ko(a&&this.la)};
f.Ko=function(a){var b=Ia(this.U()+"-title-draggable").split(" "),c=this.Hq();this.a()&&(a?cl(c,b):el(c,b));a&&!this.Qa?(this.Qa=new fm(this.a(),this.yd),cl(c,b),F(this.Qa,"start",this.ds,!1,this)):!a&&this.Qa&&(this.Qa.g(),this.Qa=null)};f.WC=function(){this.ds()};f.Ez=function(){return null!=this.Qa?this.Qa.lr:null};
f.ds=function(){var a=ti(this.N()),b=Uh(a)||window;if(null!=this.a()){var a=T(this.a().parentNode),b=Sh(b||window),c=T(this.a());"fixed"==Bi(this.a())?hm(this.Qa,new wh(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):hm(this.Qa,new wh(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))}};f.Xx=function(a){var b=Q("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":Ym.CSS.Jj});null==this.Wn&&(this.Wn=[]);this.Wn.push(b);this.Ka().appendChild(b);null!=a&&(b.src=a);return b};
f.dk=function(a){var b=Q("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":Ym.CSS.jl},a);null==this.rh&&(this.rh=[]);this.rh.push(b);b.innerHTML=a||"";this.Ka().appendChild(b);return b};f.mt=function(a){var b=Q("div",{id:"ErrorSub_"+B(),"class":Ym.CSS.pE});b.innerHTML=a;this.Ka().appendChild(b);return b};f.oH=function(){return this.a()};
f.k=function(a){if(!this.la)Ym.d.k.call(this,a);else if(null!=a&&this.a().parentNode!=a){Yh(a,this.a());return}P(this.a(),"nrg-ui-dialog");this.Bw=Mh("modal-dialog-title",this.a())[0];this.Mc=Mh("modal-dialog-content",this.a())[0];this.yt=Mh("modal-dialog-buttons",this.a())[0];this.hk=null;Zm(this);P(this.yt,Ym.CSS.kD);P(this.Bw,Ym.CSS.TITLE);P(this.Mc,Ym.CSS.wh);Ym.d.cs.call(this,!1);this.cs(!0)};
f.ba=function(a,b){!0==b&&Ym.d.ba.call(this,a);null!=this.a()&&(null==this.Tk&&(this.Tk=Ei(this.a())),this.ta()&&!1==a?(this.Tk=Ei(this.a()),yk(this.a(),200,function(){this.ba(a,!0)}.bind(this))):this.ta()||!0!=a||(Ym.d.ba.call(this,a),Ci(this.a(),this.Tk),this.a().style.opacity=0,vk(this.a(),200)))};
f.Vv=function(){var a=this.a(),b=this.Ka(),c=0,d=0,e=0,h=0,k=a.style.overflow;a.style.overflow="visible";null!=this.rh&&D(this.rh,function(a){e=a.scrollWidth;h=a.scrollHeight;c=e>c?e:c;d=h>d?h:d;Oi(a,e,h)});null!=k?a.style.overflow=k:a.style.removeProperty("overflow");Oi(b,c,d);b=T(b);Oi(a,b.width+20,b.height+20)};f.KH=function(){return this.rh};f.wI=function(){};
f.f=function(){Ym.d.f.call(this);delete this.yt;delete this.Bw;delete this.Mc;delete this.hk;delete this.dq;null!=this.sB&&(R(this.sB),delete this.sB);null!=this.rh&&(D(this.rh,function(a){R(a);delete a}),delete this.rh);null!=this.Wn&&(D(this.Wn,function(a){R(a);delete a}),delete this.Wn);null!=this.Tk&&(sb(this.Tk),delete this.Tk)};v("nrg.ui.Dialog.ID_PREFIX",Ym.ID_PREFIX);v("nrg.ui.Dialog.EventType",{tN:"d",CLOSED:"e",tM:"f"});v("nrg.ui.Dialog.prototype.addTitleClass",Ym.prototype.jy);
v("nrg.ui.Dialog.prototype.addContentClass",Ym.prototype.fF);v("nrg.ui.Dialog.prototype.addCloseButtonClass",Ym.prototype.dF);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",Ym.prototype.eF);v("nrg.ui.Dialog.prototype.addCloseSpanClass",Ym.prototype.Vx);v("nrg.ui.Dialog.prototype.addButtonsClass",Ym.prototype.cF);v("nrg.ui.Dialog.prototype.applyFadeTransitions",Ym.prototype.pF);v("nrg.ui.Dialog.prototype.moveToCorner",Ym.prototype.wr);v("nrg.ui.Dialog.prototype.center",Ym.prototype.Ne);
v("nrg.ui.Dialog.prototype.hideWindowOnHover",Ym.prototype.wI);v("nrg.ui.Dialog.prototype.setDraggable",Ym.prototype.cs);v("nrg.ui.Dialog.prototype.updateLimits",Ym.prototype.WC);v("nrg.ui.Dialog.prototype.addImage",Ym.prototype.Xx);v("nrg.ui.Dialog.prototype.addText",Ym.prototype.dk);v("nrg.ui.Dialog.prototype.addSubText",Ym.prototype.mt);v("nrg.ui.Dialog.prototype.getOverlay",Ym.prototype.oH);v("nrg.ui.Dialog.prototype.render",Ym.prototype.k);v("nrg.ui.Dialog.prototype.setVisible",Ym.prototype.ba);
v("nrg.ui.Dialog.prototype.getTextElements",Ym.prototype.KH);v("nrg.ui.Dialog.prototype.resizeToContents",Ym.prototype.Vv);v("nrg.ui.Dialog.prototype.getDraggerLimits",Ym.prototype.Ez);v("nrg.ui.Dialog.prototype.disposeInternal",Ym.prototype.f);function bn(){Ym.call(this);Pm(this,null)}w(bn,Ym);v("nrg.ui.ErrorDialog",bn);bn.ID_PREFIX="nrg.ui.ErrorDialog";bn.CSS={nx:"nrg-ui-errordialog",Jj:"nrg-ui-errordialog-image",jl:"nrg-ui-errordialog-text"};bn.prototype.Sl=null;bn.prototype.dk=function(a){bn.d.dk.call(this,a);a=this.rh;P(a[a.length-1],bn.CSS.jl)};bn.prototype.k=function(a){bn.d.k.call(this,a);P(this.a(),bn.CSS.nx);null==this.Sl&&(this.Sl=this.Xx(serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png"),P(this.Sl,bn.CSS.Jj),this.Ne())};
bn.prototype.f=function(){bn.d.f.call(this);null!=this.Sl.parentNode&&R(this.Sl);delete this.Sl};v("nrg.ui.ErrorDialog.ID_PREFIX",bn.ID_PREFIX);v("nrg.ui.ErrorDialog.CSS",bn.CSS);v("nrg.ui.ErrorDialog.prototype.addText",bn.prototype.dk);v("nrg.ui.ErrorDialog.prototype.disposeInternal",bn.prototype.f);function cn(a,b,c,d){ma(this);this.url=a;this.document=b;this.files=d}w(cn,Al);v("gxnat.slicerNode.Mrml",cn);function dn(a,b){ma(this);this.file=a;this.se=b}w(dn,Al);v("gxnat.slicerNode.Displayable",dn);function en(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function fn(a,b,c){ma(this);this.position=a;this.cM=b;this.focus=c}w(fn,Al);v("gxnat.slicerNode.Camera",fn);function gn(a,b,c,d,e,h){ma(this);this.position=a;this.color=b;this.name=h}w(gn,Al);v("gxnat.slicerNode.Annotations",gn);function hn(){ma(this)}w(hn,Al);v("gxnat.slicerNode.Layout",hn);M.I={};v("gxnat.slicerUtils",M.I);M.I.Xw="/scripts/viewer/xiv/vis/GenericColorTable.txt";M.I.qz=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ea(a[c],".mrml")&&b.push(a[c]);return b};M.I.pu=function(a,b){M.get(a,function(a){b(new en(a))},"text")};M.I.Tz=function(a,b,c){a=g(a)?a:[a];var d=M.I.qz(a),e=[],h=0;D(d,function(b){M.I.pu(b,function(l){h++;e.push(new cn(b,l,0,a));h==d.length&&c(e)})})};
M.I.Wy=function(a,b,c){M.I.wz(a,b,function(b){c(new Nl(a,M.I.Az(a),M.I.xz(a),M.I.Oz(a),b,M.I.iA(a),M.I.Sz(a),null))})};M.I.Xz=function(a,b){var c=[],d=[],e=0;D(a,function(a){c=M.I.Yz(a.document);D(c,function(k){M.I.Wy(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};M.I.Fz=function(a,b){a=r(a)?M.I.pu(a):a;var c=[];D(a.getElementsByTagName(b),function(a){c.push(a)});return c};M.I.Yz=function(a){return M.I.Fz(a,"SceneView")};
M.I.Az=function(a){var b=a.getElementsByTagName("Camera").length-1,c=a.getElementsByTagName("Camera")[b].getAttribute("position"),d=a.getElementsByTagName("Camera")[b].getAttribute("viewUp");a=a.getElementsByTagName("Camera")[b].getAttribute("focalPoint");return new fn(zl(c),zl(d),zl(a))};M.I.aA=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
M.I.xz=function(a){return new Ml(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};M.I.Oz=function(a){return new hn(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
M.I.nm=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};M.I.HG=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Xa(b,"!",Nk(c),"/",Nk(a))};
M.I.wz=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,p,m="rgb(255,0,0)",q="",t="",s="",z=0,y,H;0==a.length?c(null):(D(a,function(a){k.push(M.I.nm(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):D(k,function(a){M.get(a,function(a){l++;D(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){p=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
s=n[11];m=[1,0,0];t=q="";z=0;for(len=e.length;z<len;z++)if(y=e[z],q=y.getAttribute("id"),q===n[0].replace("_","")){t=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(H=d[z],q=H.getAttribute("id"),q===t){m=zl(H.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new gn(p,m,0,0,0,s))}});l==k.length&&c(h)},"text")}))};
M.I.lu=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;D(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new dn(h.getAttribute("fileName"),a));break}});return d};M.I.EG=function(){return null};
M.I.iA=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=M.I.lu(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";D(c,function(a){k=a.se.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(D(d,function(b){b.getAttribute("id")==k&&(a.Bn=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.Ft=serverRoot+M.I.Xw:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";D(e,function(a){l=a.se.getAttribute("attributes").split(";");D(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],D(h,function(b){b.se.getAttribute("id")==refVol&&(b.gh=a)}.bind(this)))}.bind(this))});D(h,function(c){c.sg=new Kl(a,c.se,b);c.gh&&(c.sg.gh=c.gh,delete c.gh)});return h};M.I.Sz=function(a){var b=M.I.lu(a,"Model","ModelStorage");D(b,function(b){b.sg=new Cl(a,b.se)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",M.I.Xw);
v("gxnat.slicerUtils.extractMrmls",M.I.qz);v("gxnat.slicerUtils.getMrmlAsXml",M.I.pu);v("gxnat.slicerUtils.getMrmlNodes",M.I.Tz);v("gxnat.slicerUtils.createSceneViewProperties",M.I.Wy);v("gxnat.slicerUtils.getSceneViewNodes",M.I.Xz);v("gxnat.slicerUtils.getElementsFromMrml",M.I.Fz);v("gxnat.slicerUtils.getSceneViewsFromMrml",M.I.Yz);v("gxnat.slicerUtils.getCameraFromSceneView",M.I.Az);v("gxnat.slicerUtils.getThumbnail",M.I.aA);v("gxnat.slicerUtils.mrmlColorToRgb",M.I.DP);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",M.I.xz);v("gxnat.slicerUtils.getLayoutFromSceneView",M.I.Oz);v("gxnat.slicerUtils.matchFileToSet",M.I.nm);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",M.I.HG);v("gxnat.slicerUtils.getAnnotations",M.I.wz);v("gxnat.slicerUtils.getDisplayables",M.I.lu);v("gxnat.slicerUtils.getFibers",M.I.EG);v("gxnat.slicerUtils.getVolumes",M.I.iA);v("gxnat.slicerUtils.getMeshes",M.I.Sz);function jn(a,b,c){this.ei=[];Ul.call(this,"Slicer Scenes",a,b);c&&c(this)}w(jn,Ul);v("gxnat.vis.Slicer",jn);var kn=["jpeg","jpg","png","gif"];f=jn.prototype;f.Hn="resources/Slicer/files";f.uq="?listContents=true";f.Gn="File Name";f.fj=function(a){this.dj?ln(this,a):dm.d.fj.call(this,function(){this.zk(function(){this.um();ln(this,a)}.bind(this))}.bind(this))};function ln(a,b){M.I.Tz(a.ei,0,function(a){M.I.Xz(a,function(d){this.Ry(d,a,b)}.bind(this))}.bind(a))}
f.Ry=function(a,b,c){this.tJ=b;this.nL=a;var d,e,h,k;D(this.nL,function(a){d=[a.hM||[],a.lJ||[],a.cG||[]];e=[];D(d,function(a){D(a,function(a){h=M.I.nm(Nk(a.file),this.ei);a.sg instanceof Kl&&a.sg.gh&&(a.sg.labelMapFile=M.I.nm(a.sg.gh.file,this.ei),null!=a.sg.gh.Ft&&null==M.I.nm(a.sg.gh.Ft,this.ei)&&(a.sg.colorTableFile=a.sg.gh.Ft));e.push(new Ql(h,a.sg))}.bind(this))}.bind(this));k=new Rl(e);k.To(M.I.nm(M.I.aA(a.element,this.tJ[0].document),this.ei));k.we(a.element.getAttribute("name"));k.fw(a);
this.Tc.push(k)}.bind(this));c&&c(this)};f.zk=function(a){var b="",c=0,d=this.ei.length;for(this.thumbnailFiles=[];c<d;c++)b=tj(this.ei[c]),-1!=kn.indexOf(b)&&this.thumbnailFiles.push(this.ei[c]);D(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=rj(sj(this.thumbnailFiles[c]))){this.To(this.thumbnailFiles[c]);break}a&&a(this)};f.Ki=function(a){g(a)||(a=[a]);D(a,function(a){this.ei.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",kn);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",jn.prototype.Hn);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",jn.prototype.uq);v("gxnat.vis.Slicer.prototype.fileContentsKey",jn.prototype.Gn);v("gxnat.vis.Slicer.prototype.getFileList",jn.prototype.fj);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",jn.prototype.Ry);v("gxnat.vis.Slicer.prototype.getThumbnailImage",jn.prototype.zk);v("gxnat.vis.Slicer.prototype.addFiles",jn.prototype.Ki);function mn(){am.call(this);this.Jg.push(this.Wv);this.Jg.push(this.lL);this.Jg.push(this.mL)}w(mn,am);v("xiv.sampleData.Scans",mn);
mn.prototype.Wv=new $l("src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 1","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample1/Sample1.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
mn.prototype.lL=new $l("src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 2","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample2/Sample2.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
mn.prototype.mL=new $l("src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 3","Total Frames":176,Type:"t2_spc_1mm_p2"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample3/Sample3.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function nn(a,b,c,d){wc.call(this);on();pn();this.yp={h:dm,KL:jn};this.cd=null!=a?a:nn.States.Ij;this.oJ=b;this.LB=d;this.Pr=Wg(d);this.Ug=this.Ug?this.Ug:[];a="/"!==c[0]?"/"+c:c;-1===this.Ug.indexOf(this.Pr+a)&&this.Ug.push(-1===a.indexOf(this.Pr)?this.Pr+a:a);1==this.Ug.length&&(this.Qd=new Ug(this.Ug[0]))}w(nn,wc);v("xiv.start",nn);nn.ModalStates={De:"fullscreen",hf:"popup",Bs:"fullscreen-popup",Lg:"windowed",Ij:"demo",vD:"demp-fullscreen"};nn.States={Ij:"demo",hN:"live"};
function on(){Rf.IMA=[Sf,null]}function pn(){document.body.style.overflow="hidden"}f=nn.prototype;f.As=B();f.ty=300;f.MI=1E3;f.Tq=!1;f.Wq=!1;f.jC=function(){};f.By=function(){qn(this);this.show();this.cd==nn.States.Ij?(cm.MODE="demo",R(this.bb.aa.hf),R(this.bb.aa.gl),rn(this)):(this.bb.uc(this.oJ),sn(this))};f.yL=function(a){this.pJ=a};function qn(a){a.bb=new a.pJ;a.bb.YB(serverRoot);F(a.bb,"g",a.XJ.bind(a));window.onresize=function(){null!=this.bb&&this.bb.o()}.bind(a)}
f.XJ=function(){this.Yd.RA(null,function(a){D(a,function(a){tn(this,a);this.bb.W.Pc()}.bind(this))}.bind(this))};f.show=function(){this.bb.a().style.opacity=0;this.bb.k();this.cd!==nn.States.Ij&&this.bb.Ux();F(this.bb.W.oa,"a",this.Hv.bind(this));F(this.bb.aa.hf,"click",this.GF.bind(this));F(this.bb.aa.gl,"click",this.g.bind(this));this.bb.Ob.ec(!0,0,this.MI);xk(this.bb.a(),this.ty)};
function rn(a){var b=a.bb.W,c={slicer:(new bm).Jg,scan:(new mn).Jg},d,e=null;C(c,function(a,b){D(a,function(a){d="scan"==b?new this.yp.h:new this.yp.KL;d.Ki(a.files);d.VB(!0);d.kC(a.mJ);d.To(a.zw);un(this,d,a.fu);null==e&&(e=a.fu);D(a.fu,function(a){Ib(e,a)||e.push(a)})}.bind(this))}.bind(a));a=b.oa.zq(e);var h=[];D(a,function(a){null!=a&&(a.ac.Li=0,a.ec(!0),a=a.of,a.style.opacity=0,h.push(a))});b.oa.a().style.opacity=1;Ob(h,void 0,0,b.oa.a());zk(h,400,200)}
function sn(a){var b=a.bb.W.oa,c=0;a.bb.W&&F(a.bb.W.oa,vn,a.OK.bind(a));a.Yd=new $g(a.Ug[0]);a.Yd.OA(function(a){var e=tn(this,a);0==c&&(this.DI=a,this.Eu=b.Gc[e[0]],b.Ho(e[0]));1==c&&(this.Wq=!0,this.EI=a,this.Xq=this.Eu.Gc[e[1]]);2==c&&(this.Tq=!0,this.Uq=a,this.AA=this.Xq.Gc[e[2]],vl([this.Eu,this.Xq,this.AA]));c++}.bind(a))}
function wn(a,b){var c=a.Yd.Jn(b),d=a.Yd.yz(b),e=0;C(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}function tn(a,b){var c=a.Yd.zz(b),d=wn(a,b);xn(a,d,c);return d}function yn(a,b){a.Yd.NA(b.originalUrl,null,function(a){if(b.ii("subjects")==this.Qd.ii("subjects")&&this.Wq){var d=this.Qd.ii("experiments");this.Uq=this.Yd.Xl(d);Lb(a,this.Uq);Ob(a,0,0,this.Uq);this.Wq=!1}D(a,function(a){tn(this,a)}.bind(this))}.bind(a))}
f.Hv=function(a){if(null!=a.se[this.As])switch(a=new Ug(a.se[this.As]),a.xq()){case "subjects":yn(this,a);break;case "experiments":zn(this,a.originalUrl)}};f.em=function(a){yk(this.bb.a(),this.ty,a)};f.g=function(){this.em(this.QF.bind(this))};
function zn(a,b){if(null==a.Wu)a.Wu=[];else if(-1<a.Wu.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Yd.Jn(a.Yd.Xl(b)),c=new Tl(c.projects[lh],c.subjects[lh],c.experiments[lh]);An(a,b,function(){this.Wu.push(b);this.Tq&&(this.Tq=!1,C(this.Xq.Gc,function(){}.bind(this)))}.bind(a),c)}f.OK=function(a){var b=a.se.ac.Li;a.se.ac.Li=0;a.se.ac.Li=b};
f.GF=function(){var a=open(this.LB+"/scripts/viewer/xiv/popup.html?"+this.Ug[0],"XImgView","width=1200,height=800");a.focus();var b=this.Ug[0];a.onload=function(){a.yP(b,nn.ModalStates.hf,serverRoot)}.bind(this);this.g()};function An(a,b,c,d){Bn(a,b,function(a){var b=a.ji;Cn(this,a,b,function(a){un(this,a)}.bind(this));null!=d&&(this.tb[b].Po(d.ZK),this.tb[b].Ro(d.OL),this.tb[b].Lo(d.aG))}.bind(a),c)}
function xn(a,b,c){var d=a.bb.W.oa;d.xn(b);zippyNodes=d.zq(b);D(zippyNodes,function(a,b){-1<a.Pd().toLowerCase().indexOf("experiments")&&!a.Au()&&Tc(a,"a",function(){a.ay()});null==c||null==c[b]||null==a[this.As]&&(a[this.As]=c[b])}.bind(a))}
function un(a,b,c){var d=a.bb.W;null!=d&&(null==c&&null!=a.Yd&&(c=wn(a,a.Yd.Xl(b.Fn))),"Scans"!=b.Xf&&c.push(b.Xf),b.fj(function(){if(0<b.Tc.length){var a=d.Ui(b,c);if("Scans"!=b.Xf){var h=d.oa.zq(c);0<c.length&&1<h.length&&d.ec(c[c.length-1],h[h.length-2])}a.aw(b.zm)}}.bind(a)))}function Cn(a,b,c,d){a.tb=a.tb?a.tb:{};null==a.tb[c]&&(a.tb[c]=b,d(b))}
f.QF=function(){nn.d.g.call(this);document.body.style.overflow="visible";C(this.tb,function(a,b){a.g();delete this.tb[b]}.bind(this));delete this.tb;this.Yd&&(this.Yd.g(),delete this.Yd);delete this.Ug;delete this.LB;delete this.Pr;delete this.qP;null!=this.Qd&&(this.Qd.g(),delete this.Qd);delete this.Tq;delete this.Wq;delete this.DI;delete this.EI;delete this.Uq;delete this.Eu;delete this.Xq;delete this.AA;I(this.bb);this.bb.g();R(this.bb.a());delete this.bb};
function Bn(a,b,c,d){var e=mb(a.yp),h=0;C(a.yp,function(a){Zl(b,a,c,function(){h++;h===e&&null!=d&&d()})})}v("xiv.start.States",nn.States);v("xiv.start.loadCustomExtensions",on);v("xiv.start.adjustDocumentStyle",pn);v("xiv.start.ModalStates",nn.ModalStates);v("xiv.start.checkForWebGL",nn.checkForWebGL);v("xiv.start.isCompatible",nn.NI);v("xiv.start.prototype.setServerRoot",nn.prototype.jC);v("xiv.start.prototype.setModalType",nn.prototype.yL);v("xiv.start.prototype.begin",nn.prototype.By);
v("xiv.start.prototype.show",nn.prototype.show);v("xiv.start.prototype.hide",nn.prototype.em);v("xiv.start.prototype.dispose",nn.prototype.g);window["xiv.start.isCompatible"]=nn.NI;window["xiv.start.checkForWebGL"]=nn.checkForWebGL;window["xiv.start.ModalStates"]=nn.ModalStates;nn.prototype.setServerRoot=nn.prototype.jC;nn.prototype.begin=nn.prototype.By;function Dn(){$c.call(this);this.bo=[];this.yw=[];this.Fo=[]}w(Dn,$c);f=Dn.prototype;f.dr=!1;f.er=!1;f.qj=!1;f.FA=function(){return this.qj};f.hC=function(a){this.Vr=a};f.sa=function(){if(!this.qj){for(var a,b=0;a=this.bo[b];b++)En(this,a);this.qj=!0}};function En(a,b){a.dr&&(F(b.element,"mousedown",b.pg,!1,b),a.nw&&bl(b.element,a.nw));a.er&&a.xw&&bl(b.element,a.xw)}
function Fn(a){for(var b,c=0;b=a.bo[c];c++){var d=a;d.dr&&(Uc(b.element,"mousedown",b.pg,!1,b),d.nw&&dl(b.element,d.nw));d.er&&d.xw&&dl(b.element,d.xw);b.g()}a.bo.length=0}
f.Yo=function(a,b){if(!this.rf)if(this.rf=b,!1==this.dispatchEvent(new Gn("dragstart",0,this.rf)))this.rf=null;else{var c=b.Vi;this.qk=this.Kt(c);var d=Kh(c);d.body.appendChild(this.qk);var e=this.qk,h=Ji(c),c=$i(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.Qa=new fm(e);this.Qa.hC(this.Vr);F(this.Qa,"drag",this.aB,!1,this);F(this.Qa,"end",this.bj,!1,this);F(d.body,"selectstart",this.JC);this.ym=[];for(e=0;d=this.yw[e];e++)for(var k,
h=0;k=d.bo[h];h++)for(var c=d,l=[k.element],n=this.ym,p=0;p<l.length;p++){var m=l[p],q,t=m;q=Ji(t);t=T(t);q=new th(q.y,q.x+t.width,q.y+t.height,q.x);n.push(new Hn(q,c,k,m));In(this,q)}this.qi||(this.qi=new th(0,0,0,0));for(e=0;d=this.Fo[e];e++)d.Gt=[],d.MB=d.q.scrollLeft,d.NB=d.q.scrollTop,h=Ji(d.q),c=T(d.q),d.xc=new th(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.ym[e];e++)for(h=0;d=this.Fo[h];h++)gi(d.q,c.q)&&(d.Gt.push(c),c.Eo=d);this.bk=null;for(e=0;d=this.Fo[e];e++)F(d.q,"scroll",this.Ny,
!1,this);this.Qa.Yo(a);a.preventDefault()}};
f.bj=function(a){var b=a.UF?null:this.bk;if(b&&b.Zk){var c=a.clientX;a=a.clientY;var d=wi(Ih(this.qk)),e=c+d.x,d=a+d.y,h;this.bp&&(h=this.bp(b.ai,b.xc,e,d));this.dispatchEvent(new Gn("drag",0,this.rf,0,b.ai,0,c,a));b.Zk.dispatchEvent(new Gn("drop",0,this.rf,0,b.ai,0,c,a,0,0,h))}this.dispatchEvent(new Gn("dragend",0,this.rf));Uc(this.Qa,"drag",this.aB,!1,this);Uc(this.Qa,"end",this.bj,!1,this);Uc(Kh(this.rf.Vi).body,"selectstart",this.JC);for(b=0;c=this.Fo[b];b++)Uc(c.q,"scroll",this.Ny,!1,this),c.Gt=
[];this.Qa.g();R(this.qk);delete this.rf;delete this.qk;delete this.Qa;delete this.ym;delete this.bk};
f.aB=function(a){var b,c=wi(Ih(this.qk));b=new rh(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.bk,h;if(e){this.bp&&e.Zk&&(h=this.bp(e.ai,e.xc,c,d));if(e.xc.contains(b)&&h==this.Tx)return;e.Zk&&(this.dispatchEvent(new Gn("dragout",0,this.rf,0,e.ai)),e.Zk.dispatchEvent(new Gn("dragout",0,this.rf,0,e.ai,0,void 0,void 0,0,0,this.Tx)));this.Tx=h;this.bk=null}if(this.qi.contains(b)){a:{for(var k=0;e=this.ym[k];k++)if(e.xc.contains(b))if(e.Eo){if(e.Eo.xc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.bk=b)&&e.Zk)this.bp&&(h=this.bp(e.ai,e.xc,c,d)),c=new Gn("dragover",0,this.rf,0,e.ai),c.PL=h,this.dispatchEvent(c),e.Zk.dispatchEvent(new Gn("dragover",0,this.rf,0,e.ai,0,a.clientX,a.clientY,0,0,h));else if(!e){this.Oe||(this.Oe=new Hn(this.qi.clone()));a=this.Oe.xc;a.top=this.qi.top;a.right=this.qi.right;a.bottom=this.qi.bottom;a.left=this.qi.left;for(h=0;e=this.ym[h];h++)b=e.xc,e.Eo&&(e=e.Eo.xc,b=new th(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.bk=10<=(a.right-a.left)*(a.bottom-a.top)?this.Oe:null}}};f.JC=function(){return!1};
f.Ny=function(a){for(var b=0,c;c=this.Fo[b];b++)if(a.target==c.q){var d=c.NB-c.q.scrollTop,e=c.MB-c.q.scrollLeft;c.NB=c.q.scrollTop;c.MB=c.q.scrollLeft;this.Oe&&this.bk==this.Oe&&(0<d?this.Oe.xc.top+=d:this.Oe.xc.bottom+=d,0<e?this.Oe.xc.left+=e:this.Oe.xc.right+=e);for(var h=0,k;k=c.Gt[h];h++)k=k.xc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,In(this,k)}this.Qa.pm(a)};
f.Kt=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=Q("table",null,Q("tbody",null,b));break a;case "td":case "th":a=Q("table",null,Q("tbody",null,Q("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.VF&&bl(a,this.VF);return a};f.yq=function(){return this.Qa};
function In(a,b){if(1==a.ym.length)a.qi=new th(b.top,b.right,b.bottom,b.left);else{var c=a.qi;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.f=function(){Dn.d.f.call(this);Fn(this)};function Gn(a,b,c,d,e,h,k,l,n,p,m){Ec.call(this,a);this.pq=c;this.Ol=e;this.clientX=k;this.clientY=l;this.PL=m}w(Gn,Ec);Gn.prototype.f=function(){};
function Jn(a,b){$c.call(this);this.element=Lh(a);this.data=b;this.Sa=null;this.zc=new dj(this);zc(this,ua(Ac,this.zc));if(!this.element)throw Error("Invalid argument");}w(Jn,$c);f=Jn.prototype;f.Vi=null;f.pg=function(a){if(Jc(a)){var b=a.target;b&&(this.zc.D(b,"mousemove",this.YA,!1).D(b,"mouseout",this.YA,!1),this.zc.D(Kh(b),"mouseup",this.rJ,!0),this.Vi=b,this.qw=new rh(a.clientX,a.clientY),a.preventDefault())}};f.No=function(a){this.Sa=a};
f.YA=function(a){var b=this.Vi,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.qw.x)+Math.abs(a.clientY-this.qw.y)||b)this.zc.tg(),this.Sa.Yo(a,this)};f.rJ=function(){this.zc.tg();delete this.qw;this.Vi=null};function Hn(a,b,c,d){this.xc=a;this.Zk=b;this.ai=c;this.q=d}Hn.prototype.Eo=null;function Kn(a,b){this.type=a;this.currentTarget=this.target=b||null}f=Kn.prototype;f.rg=!1;f.defaultPrevented=!1;f.Co=!0;f.stopPropagation=function(){this.rg=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.Co=!1};
function Ln(a){a=new Kn("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Ni(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.Co=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.rg;d--){var e=b[d],h=a.type,k=new Hc(a,b[d]);gb(e)?ad(e,h,!0,k):Xc(e,h,!0,k)}for(d=0;d<b.length&&!a.rg;d++)e=b[d],h=a.type,k=new Hc(a,b[d]),gb(e)?ad(e,h,!1,k):Xc(e,h,!1,k)};function Mn(a,b){if(!a)throw Error("Invalid class name "+a);if(!ja(b))throw Error("Invalid decorator function "+b);Nn[a]=b}var On={},Nn={};function Pn(){}var Qn;fa(Pn);var Rn={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=Pn.prototype;f.Zg=function(){};f.B=function(a){var b=a.N().B("div",this.wk(a).join(" "),a.getContent());Sn(this,a,b);return b};f.Ka=function(a){return a};f.tk=function(a,b,c){if(a=a.a?a.a():a){var d=[b];E&&!pc("7")&&(d=Tn($k(a),b),d.push(b));(c?cl:el)(a,d)}};f.Me=function(){return!0};
f.Cb=function(a,b){b.id&&lj(a,b.id);var c=this.Ka(b);c&&c.firstChild?Un(a,c.firstChild.nextSibling?Nb(c.childNodes):c.firstChild):a.Mc=null;var d=0,e=this.U(),h=this.U(),k=!1,l=!1,c=!1,n=Nb($k(b));D(n,function(a){k||a!=e?l||a!=h?d|=this.qu(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.R=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var p=a.cg;p&&n.push.apply(n,p);if(E&&!pc("7")){var m=Tn(n);0<m.length&&(n.push.apply(n,m),c=!0)}if(!k||!l||p||c)b.className=n.join(" ");Sn(this,a,b);return b};
f.im=function(a){a.Se()&&this.tm(a.a(),!0);a.isEnabled()&&this.xj(a,a.ta())};function Vn(a,b,c){if(a=c||a.Zg())c=b.getAttribute("role")||null,a!=c&&Xk(b,a)}function Sn(a,b,c){b.ta()||Yk(c,"hidden",!b.ta());b.isEnabled()||a.th(c,1,!b.isEnabled());Wn(b,8)&&a.th(c,8,!!(b.R&8));Wn(b,16)&&a.th(c,16,b.eh());Wn(b,64)&&a.th(c,64,!!(b.R&64))}f.Go=function(a,b){Xi(a,!b,!E&&!gc)};f.tm=function(a,b){this.tk(a,this.U()+"-rtl",b)};f.$h=function(a){var b;return Wn(a,32)&&(b=a.rc())?li(b)&&mi(b):!1};
f.xj=function(a,b){var c;if(Wn(a,32)&&(c=a.rc())){if(!b&&a.R&32){try{c.blur()}catch(d){}a.R&32&&a.Bk(null)}(li(c)&&mi(c))!=b&&ki(c,b)}};f.ba=function(a,b){Ui(a,b);a&&Yk(a,"hidden",!b)};f.uc=function(a,b,c){var d=a.a();if(d){var e=this.Kn(b);e&&this.tk(a,e,c);this.th(d,b,c)}};f.th=function(a,b,c){Qn||(Qn={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Qn[b];var d=a.getAttribute("role")||null;d&&(d=Rn[d]||b,b="checked"==b||"selected"==b?d:b);b&&Yk(a,b,c)};
f.Yk=function(a,b){var c=this.Ka(a);if(c&&(Zh(c),b))if(r(b))hi(c,b);else{var d=function(a){if(a){var b=Kh(c);c.appendChild(r(a)?b.createTextNode(a):a)}};g(b)?D(b,d):!ha(b)||"nodeType"in b?d(b):D(Nb(b),d)}};f.rc=function(a){return a.a()};f.U=function(){return"goog-control"};f.wk=function(a){var b=this.U(),c=[b],d=this.U();d!=b&&c.push(d);b=a.Zl();for(d=[];b;){var e=b&-b;d.push(this.Kn(e));b&=~e}c.push.apply(c,d);(a=a.cg)&&c.push.apply(c,a);E&&!pc("7")&&c.push.apply(c,Tn(c));return c};
function Tn(a,b){var c=[];b&&(a=a.concat([b]));D([],function(d){!Fb(d,ua(Ib,a))||b&&!Ib(d,b)||c.push(d.join("_"))});return c}f.Kn=function(a){this.cq||Xn(this);return this.cq[a]};f.qu=function(a){if(!this.GC){this.cq||Xn(this);var b=this.cq,c={},d;for(d in b)c[b[d]]=d;this.GC=c}a=parseInt(this.GC[a],10);return isNaN(a)?0:a};function Xn(a){var b=a.U();b.replace(/\xa0|\s/g," ");a.cq={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Yn(a,b){$c.call(this);a&&this.Hl(a,b)}w(Yn,$c);f=Yn.prototype;f.q=null;f.fr=null;f.Lu=null;f.gr=null;f.Te=-1;f.rj=-1;f.rt=!1;
var Zn={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},$n={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},ao=E||ic&&pc("525"),bo=cc&&hc;f=Yn.prototype;
f.Kq=function(a){ic&&(17==this.Te&&!a.ctrlKey||18==this.Te&&!a.altKey||cc&&91==this.Te&&!a.metaKey)&&(this.rj=this.Te=-1);-1==this.Te&&(a.ctrlKey&&17!=a.keyCode?this.Te=17:a.altKey&&18!=a.keyCode?this.Te=18:a.metaKey&&91!=a.keyCode&&(this.Te=91));ao&&!hl(a.keyCode,this.Te,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.rj=jl(a.keyCode),bo&&(this.rt=a.altKey))};f.nI=function(a){this.rj=this.Te=-1;this.rt=a.altKey};
f.handleEvent=function(a){var b=a.Nc,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.rj,d=13!=c&&27!=c?b.keyCode:0):ic&&"keypress"==a.type?(c=this.rj,d=0<=b.charCode&&63232>b.charCode&&il(c)?b.charCode:0):gc?(c=this.rj,d=il(c)?b.keyCode:0):(c=b.keyCode||this.rj,d=b.charCode||0,bo&&(e=this.rt),cc&&63==d&&224==c&&(c=191));var h=c=jl(c),k=b.keyIdentifier;c?63232<=c&&c in Zn?h=Zn[c]:25==c&&a.shiftKey&&(h=9):k&&k in $n&&(h=$n[k]);a=h==this.Te;this.Te=h;b=new co(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.q};f.Hl=function(a,b){this.gr&&this.detach();this.q=a;this.fr=F(this.q,"keypress",this,b);this.Lu=F(this.q,"keydown",this.Kq,b,this);this.gr=F(this.q,"keyup",this.nI,b,this)};f.detach=function(){this.fr&&(Vc(this.fr),Vc(this.Lu),Vc(this.gr),this.gr=this.Lu=this.fr=null);this.q=null;this.rj=this.Te=-1};f.f=function(){Yn.d.f.call(this);this.detach()};function co(a,b,c,d){Hc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(co,Hc);function eo(a,b,c){hj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ma(b);if(d=On[d])break;b=b.d?b.d.constructor:null}b=d?ja(d.le)?d.le():new d:null}this.ua=b;this.Mc=ca(a)?a:null}w(eo,hj);f=eo.prototype;f.Mc=null;f.R=0;f.cp=39;f.nn=255;f.$o=0;f.Fc=!0;f.cg=null;f.Dk=!0;f.Wp=!1;f.Pv=null;f.Mo=function(a){this.la&&a!=this.Dk&&fo(this,a);this.Dk=a};f.rc=function(){return this.ua.rc(this)};f.Cq=function(){return this.pb||(this.pb=new Yn)};f.Ra=function(){return this.ua};
f.tk=function(a,b){b?a&&(this.cg?Ib(this.cg,a)||this.cg.push(a):this.cg=[a],this.ua.tk(this,a,!0)):a&&this.cg&&Lb(this.cg,a)&&(0==this.cg.length&&(this.cg=null),this.ua.tk(this,a,!1))};f.B=function(){var a=this.ua.B(this);this.q=a;Vn(this.ua,a,this.gj());this.Wp||this.ua.Go(a,!1);this.ta()||this.ua.ba(a,!1)};f.gj=function(){return this.Pv};f.Ka=function(){return this.ua.Ka(this.a())};f.Me=function(a){return this.ua.Me(a)};
f.he=function(a){this.q=a=this.ua.Cb(this,a);Vn(this.ua,a,this.gj());this.Wp||this.ua.Go(a,!1);this.Fc="none"!=a.style.display};f.fb=function(){eo.d.fb.call(this);this.ua.im(this);if(this.cp&-2&&(this.Dk&&fo(this,!0),Wn(this,32))){var a=this.rc();if(a){var b=this.Cq();b.Hl(a);this.gb().D(b,"key",this.ah).D(a,"focus",this.Ck).D(a,"blur",this.Bk)}}};
function fo(a,b){var c=a.gb(),d=a.a();b?(c.D(d,"mouseover",a.Ek).D(d,"mousedown",a.bh).D(d,"mouseup",a.hg).D(d,"mouseout",a.Mq),a.Qn!=ea&&c.D(d,"contextmenu",a.Qn),E&&c.D(d,"dblclick",a.kA)):(c.rb(d,"mouseover",a.Ek).rb(d,"mousedown",a.bh).rb(d,"mouseup",a.hg).rb(d,"mouseout",a.Mq),a.Qn!=ea&&c.rb(d,"contextmenu",a.Qn),E&&c.rb(d,"dblclick",a.kA))}f.Ac=function(){eo.d.Ac.call(this);this.pb&&this.pb.detach();this.ta()&&this.isEnabled()&&this.ua.xj(this,!1)};
f.f=function(){eo.d.f.call(this);this.pb&&(this.pb.g(),delete this.pb);delete this.ua;this.cg=this.Mc=null};f.getContent=function(){return this.Mc};f.Yk=function(a){this.ua.Yk(this.a(),a);this.Mc=a};function Un(a,b){a.Mc=b}f.wq=function(){var a=this.getContent();if(!a)return"";a=r(a)?a:g(a)?Db(a,pi).join(""):ni(a);return Ga(a)};f.tm=function(a){eo.d.tm.call(this,a);var b=this.a();b&&this.ua.tm(b,a)};f.Go=function(a){this.Wp=a;var b=this.a();b&&this.ua.Go(b,a)};f.ta=function(){return this.Fc};
f.ba=function(a,b){if(b||this.Fc!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.ua.ba(c,a);this.isEnabled()&&this.ua.xj(this,a);this.Fc=a;return!0}return!1};f.isEnabled=function(){return!(this.R&1)};f.Kb=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!go(this,1,!a)||(a||(this.setActive(!1),this.vg(!1)),this.ta()&&this.ua.xj(this,a),this.uc(1,!a))};f.vg=function(a){go(this,2,a)&&this.uc(2,a)};f.dh=function(){return!!(this.R&4)};
f.setActive=function(a){go(this,4,a)&&this.uc(4,a)};f.Qo=function(a){go(this,8,a)&&this.uc(8,a)};f.eh=function(){return!!(this.R&16)};f.Td=function(a){go(this,16,a)&&this.uc(16,a)};f.fc=function(a){go(this,64,a)&&this.uc(64,a)};f.Zl=function(){return this.R};f.uc=function(a,b){Wn(this,a)&&b!=!!(this.R&a)&&(this.ua.uc(this,a,b),this.R=b?this.R|a:this.R&~a)};function Wn(a,b){return!!(a.cp&b)}
f.jd=function(a,b){if(this.la&&this.R&a&&!b)throw Error("Component already rendered");!b&&this.R&a&&this.uc(a,!1);this.cp=b?this.cp|a:this.cp&~a};function ho(a,b){return!!(a.nn&b)&&Wn(a,b)}function go(a,b,c){return Wn(a,b)&&!!(a.R&b)!=c&&(!(a.$o&b)||a.dispatchEvent(jj(b,c)))&&!a.ok}f.Ek=function(a){(!a.relatedTarget||!gi(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&ho(this,2)&&this.vg(!0)};
f.Mq=function(a){a.relatedTarget&&gi(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(ho(this,4)&&this.setActive(!1),ho(this,2)&&this.vg(!1))};f.Qn=ea;f.bh=function(a){this.isEnabled()&&(ho(this,2)&&this.vg(!0),Jc(a)&&(ho(this,4)&&this.setActive(!0),this.ua.$h(this)&&this.rc().focus()));!this.Wp&&Jc(a)&&a.preventDefault()};f.hg=function(a){this.isEnabled()&&(ho(this,2)&&this.vg(!0),this.dh()&&this.Qk(a)&&ho(this,4)&&this.setActive(!1))};f.kA=function(a){this.isEnabled()&&this.Qk(a)};
f.Qk=function(a){ho(this,16)&&this.Td(!this.eh());ho(this,8)&&this.Qo(!0);ho(this,64)&&this.fc(!(this.R&64));var b=new Ec("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Mv=a.Mv);return this.dispatchEvent(b)};f.Ck=function(){ho(this,32)&&go(this,32,!0)&&this.uc(32,!0)};f.Bk=function(){ho(this,4)&&this.setActive(!1);ho(this,32)&&go(this,32,!1)&&this.uc(32,!1)};
f.ah=function(a){return this.ta()&&this.isEnabled()&&this.gg(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.gg=function(a){return 13==a.keyCode&&this.Qk(a)};if(!ja(eo))throw Error("Invalid component class "+eo);if(!ja(Pn))throw Error("Invalid renderer class "+Pn);var io=ma(eo);On[io]=Pn;Mn("goog-control",function(){return new eo(null)});function jo(){this.Iy=[]}w(jo,Pn);fa(jo);function ko(a,b){var c=a.Iy[b];if(!c){switch(b){case 0:c=a.U()+"-highlight";break;case 1:c=a.U()+"-checkbox";break;case 2:c=a.U()+"-content"}a.Iy[b]=c}return c}f=jo.prototype;f.Zg=function(){return"menuitem"};f.B=function(a){var b=a.N().B("div",this.wk(a).join(" "),lo(this,a.getContent(),a.N()));mo(this,a,b,Wn(a,8)||Wn(a,16));return b};f.Ka=function(a){return a&&a.firstChild};
f.Cb=function(a,b){var c=ci(b),d=ko(this,2);c&&al(c,d)||b.appendChild(lo(this,b.childNodes,a.N()));al(b,"goog-option")&&(a.as(!0),this.as(a,b,!0));return jo.d.Cb.call(this,a,b)};f.Yk=function(a,b){var c=this.Ka(a),d=no(this,a)?c.firstChild:null;jo.d.Yk.call(this,a,b);d&&!no(this,a)&&c.insertBefore(d,c.firstChild||null)};function lo(a,b,c){a=ko(a,2);return c.B("div",a,b)}f.iC=function(a,b,c){a&&b&&mo(this,a,b,c)};f.as=function(a,b,c){a&&b&&mo(this,a,b,c)};
function no(a,b){var c=a.Ka(b);if(c){var c=c.firstChild,d=ko(a,1);return!!c&&fi(c)&&al(c,d)}return!1}function mo(a,b,c,d){Vn(a,c,b.gj());Sn(a,b,c);d!=no(a,c)&&(fl(c,"goog-option",d),c=a.Ka(c),d?(a=ko(a,1),c.insertBefore(b.N().B("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.Kn=function(a){switch(a){case 2:return ko(this,0);case 16:case 8:return"goog-option-selected";default:return jo.d.Kn.call(this,a)}};
f.qu=function(a){var b=ko(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return jo.d.qu.call(this,a)}};f.U=function(){return"goog-menuitem"};function oo(a,b,c,d){eo.call(this,a,d||jo.le(),c);this.C(b)}w(oo,eo);f=oo.prototype;f.w=function(){var a=this.bv;return null!=a?a:this.wq()};f.C=function(a){this.bv=a};f.jd=function(a,b){oo.d.jd.call(this,a,b);switch(a){case 8:this.eh()&&!b&&this.Td(!1);var c=this.a();c&&this.Ra().iC(this,c,b);break;case 16:(c=this.a())&&this.Ra().as(this,c,b)}};f.iC=function(a){this.jd(8,a)};f.as=function(a){this.jd(16,a)};
f.wq=function(){var a=this.getContent();return g(a)?(a=Db(a,function(a){return fi(a)&&(al(a,"goog-menuitem-accel")||al(a,"goog-menuitem-mnemonic-separator"))?"":pi(a)}).join(""),Ga(a)):oo.d.wq.call(this)};f.hg=function(a){var b=this.getParent();if(b){var c=b.rB;b.rB=null;if(b=c&&u(a.clientX))b=new rh(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}oo.d.hg.call(this,a)};f.gg=function(a){return a.keyCode==this.XA&&this.Qk(a)?!0:oo.d.gg.call(this,a)};f.lH=function(){return this.XA};
Mn("goog-menuitem",function(){return new oo(null)});oo.prototype.gj=function(){return Wn(this,16)?"menuitemcheckbox":Wn(this,8)?"menuitemradio":oo.d.gj.call(this)};function po(a){this.xy=a}fa(po);f=po.prototype;f.Zg=function(){return this.xy};function qo(a,b){a&&(a.tabIndex=b?0:-1)}f.B=function(a){return a.N().B("div",this.wk(a).join(" "))};f.Ka=function(a){return a};f.Me=function(a){return"DIV"==a.tagName};f.Cb=function(a,b){b.id&&lj(a,b.id);var c=this.U(),d=!1,e=$k(b);e&&D(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.Kb(!1):b==c+"-horizontal"?a.ni(ro):b==c+"-vertical"&&a.ni(so))},this);d||bl(b,c);to(this,a,this.Ka(b));return b};
function to(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.ku(d);h&&(h.q=d,b.isEnabled()||h.Kb(!1),b.ln(h),h.Cb(d))}else d.nodeValue&&""!=Ia(d.nodeValue)||c.removeChild(d);d=e}}f.ku=function(a){a:{var b;a=$k(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Nn?Nn[b]():null){a=b;break a}a=null}return a};f.im=function(a){a=a.a();Xi(a,!0,hc);E&&(a.hideFocus=!0);var b=this.Zg();b&&Xk(a,b)};f.rc=function(a){return a.a()};f.U=function(){return"goog-container"};
f.wk=function(a){var b=this.U(),c=[b,a.Tb()==ro?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function uo(){}w(uo,Pn);fa(uo);uo.prototype.B=function(a){return a.N().B("div",this.U())};uo.prototype.Cb=function(a,b){b.id&&lj(a,b.id);if("HR"==b.tagName){var c=b;b=this.B(a);$h(b,c);R(c)}else bl(b,this.U());return b};uo.prototype.Yk=function(){};uo.prototype.U=function(){return"goog-menuseparator"};function vo(a,b){eo.call(this,null,a||uo.le(),b);this.jd(1,!1);this.jd(2,!1);this.jd(4,!1);this.jd(32,!1);this.R=1}w(vo,eo);vo.prototype.fb=function(){vo.d.fb.call(this);Xk(this.a(),"separator")};Mn("goog-menuseparator",function(){return new vo});function wo(a){this.xy=a||"menu"}w(wo,po);fa(wo);f=wo.prototype;f.Me=function(a){return"UL"==a.tagName||wo.d.Me.call(this,a)};f.ku=function(a){return"HR"==a.tagName?new vo:wo.d.ku.call(this,a)};f.ik=function(a,b){return gi(a.a(),b)};f.U=function(){return"goog-menu"};f.im=function(a){wo.d.im.call(this,a);Yk(a.a(),"haspopup","true")};function xo(a,b,c,d,e,h,k,l,n){var p,m;if(p=c.offsetParent){var q="HTML"==p.tagName||"BODY"==p.tagName;q&&"static"==Bi(p)||(m=Ji(p),q||(q=(q=Ki(p))&&hc?-p.scrollLeft:!q||E&&pc("8")||"visible"==Ai(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,m=sh(m,new rh(q,p.scrollTop))))}p=m||new rh;m=Si(a);(q=Ii(a))&&m.DA(new wh(q.left,q.top,q.right-q.left,q.bottom-q.top));var q=Ih(a),t=Ih(c);if(q.ja!=t.ja){var s=q.ja.body,t=vi(t),z=new rh(0,0),y=Uh(Kh(s)),H=s;do{var O=y==t?Ji(H):Li(H);z.x+=
O.x;z.y+=O.y}while(y&&y!=t&&(H=y.frameElement)&&(y=y.parent));s=sh(z,Ji(s));E&&!ui(q)&&(s=sh(s,wi(q)));m.left+=s.x;m.top+=s.y}a=yo(a,b);b=new rh(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);b=sh(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var N;if(k)if(n)N=n;else if(N=Ii(c))N.top-=p.y,N.right-=p.x,N.bottom-=p.y,N.left-=p.x;return zo(b,c,d,h,N,k,l)}
function zo(a,b,c,d,e,h,k){a=a.clone();var l=0,n=yo(b,c);c=T(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;Ci(b,a);vh(c,k)||(e=ui(Ih(Kh(b))),!E||e&&pc("8")?
(b=b.style,hc?b.MozBoxSizing="border-box":ic?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=$i(b,"padding"),b=cj(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function yo(a,b){return(b&4&&Ki(a)?b^2:b)&-5};var Ao,Bo;Bo=Ao=!1;var Co=Ub;Co&&(-1!=Co.indexOf("Firefox")||-1!=Co.indexOf("Camino")||(-1!=Co.indexOf("iPhone")||-1!=Co.indexOf("iPod")?Ao=!0:-1!=Co.indexOf("iPad")&&(Bo=!0)));var Do=Ao,Eo=Bo;Mn("goog-menuseparator",function(){return new vo});function Fo(a,b,c){hj.call(this,c);this.ua=b||po.le();this.Ha=a||so}w(Fo,hj);var ro="horizontal",so="vertical";f=Fo.prototype;f.Mu=null;f.pb=null;f.ua=null;f.Ha=null;f.Fc=!0;f.Sb=!0;f.eu=!0;f.Re=-1;f.Cc=null;f.di=!1;f.kF=!1;f.SK=!0;f.Ph=null;f.rc=function(){return this.Mu||this.ua.rc(this)};f.Cq=function(){return this.pb||(this.pb=new Yn(this.rc()))};f.Ra=function(){return this.ua};f.B=function(){this.q=this.ua.B(this)};f.Ka=function(){return this.ua.Ka(this.a())};f.Me=function(a){return this.ua.Me(a)};
f.he=function(a){this.q=this.ua.Cb(this,a);"none"==a.style.display&&(this.Fc=!1)};f.fb=function(){Fo.d.fb.call(this);nj(this,function(a){a.la&&Go(this,a)},this);var a=this.a();this.ua.im(this);this.ba(this.Fc,!0);this.gb().D(this,"enter",this.xu).D(this,"highlight",this.yu).D(this,"unhighlight",this.zu).D(this,"open",this.rI).D(this,"close",this.iI).D(a,"mousedown",this.bh).D(Kh(a),"mouseup",this.kI).D(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.hI);this.$h()&&Ho(this,!0)};
function Ho(a,b){var c=a.gb(),d=a.rc();b?c.D(d,"focus",a.Ck).D(d,"blur",a.Bk).D(a.Cq(),"key",a.ah):c.rb(d,"focus",a.Ck).rb(d,"blur",a.Bk).rb(a.Cq(),"key",a.ah)}f.Ac=function(){this.oh(-1);this.Cc&&this.Cc.fc(!1);this.di=!1;Fo.d.Ac.call(this)};f.f=function(){Fo.d.f.call(this);this.pb&&(this.pb.g(),this.pb=null);this.ua=this.Cc=this.Ph=this.Mu=null};f.xu=function(){return!0};
f.yu=function(a){var b=qj(this,a.target);if(-1<b&&b!=this.Re){var c=Io(this);c&&c.vg(!1);this.Re=b;c=Io(this);this.di&&c.setActive(!0);this.SK&&this.Cc&&c!=this.Cc&&(Wn(c,64)?c.fc(!0):this.Cc.fc(!1))}b=this.a();null!=a.target.a()&&Yk(b,"activedescendant",a.target.a().id)};f.zu=function(a){a.target==Io(this)&&(this.Re=-1);this.a().removeAttribute("aria-activedescendant")};f.rI=function(a){(a=a.target)&&a!=this.Cc&&a.getParent()==this&&(this.Cc&&this.Cc.fc(!1),this.Cc=a)};
f.iI=function(a){a.target==this.Cc&&(this.Cc=null)};f.bh=function(a){this.Sb&&(this.di=!0);var b=this.rc();b&&li(b)&&mi(b)?b.focus():a.preventDefault()};f.kI=function(){this.di=!1};f.hI=function(a){var b;a:{b=a.target;if(this.Ph)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.Ph){b=this.Ph[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.bh(a);break;case "mouseup":b.hg(a);break;case "mouseover":b.Ek(a);break;case "mouseout":b.Mq(a);break;case "contextmenu":b.Qn(a)}};
f.Ck=function(){};f.Bk=function(){this.oh(-1);this.di=!1;this.Cc&&this.Cc.fc(!1)};f.ah=function(a){return this.isEnabled()&&this.ta()&&(0!=oj(this)||this.Mu)&&this.gg(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.gg=function(a){var b=Io(this);if(b&&"function"==typeof b.ah&&b.ah(a)||this.Cc&&this.Cc!=b&&"function"==typeof this.Cc.ah&&this.Cc.ah(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.$h())this.rc().blur();else return!1;break;case 36:Jo(this);break;case 35:Ko(this);break;case 38:if(this.Ha==so)Lo(this);else return!1;break;case 37:if(this.Ha==ro)this.Se()?Mo(this):Lo(this);else return!1;break;case 40:if(this.Ha==so)Mo(this);else return!1;break;case 39:if(this.Ha==
ro)this.Se()?Lo(this):Mo(this);else return!1;break;default:return!1}return!0};function Go(a,b){var c=b.a(),c=c.id||(c.id=kj(b));a.Ph||(a.Ph={});a.Ph[c]=b}f.ln=function(a,b){Fo.d.ln.call(this,a,b)};f.lt=function(a,b,c){a.$o|=2;a.$o|=64;!this.$h()&&this.kF||a.jd(32,!1);a.Mo(!1);Fo.d.lt.call(this,a,b,c);a.la&&this.la&&Go(this,a);b<=this.Re&&this.Re++};
f.removeChild=function(a,b){if(a=r(a)?mj(this,a):a){var c=qj(this,a);-1!=c&&(c==this.Re?(a.vg(!1),this.Re=-1):c<this.Re&&this.Re--);(c=a.a())&&c.id&&this.Ph&&tb(this.Ph,c.id)}a=Fo.d.removeChild.call(this,a,b);a.Mo(!0);return a};f.Tb=function(){return this.Ha};f.ni=function(a){if(this.a())throw Error("Component already rendered");this.Ha=a};f.ta=function(){return this.Fc};
f.ba=function(a,b){if(b||this.Fc!=a&&this.dispatchEvent(a?"show":"hide")){this.Fc=a;var c=this.a();c&&(Ui(c,a),this.$h()&&qo(this.rc(),this.Sb&&this.Fc),b||this.dispatchEvent(this.Fc?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Sb};
f.Kb=function(a){this.Sb!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Sb=!0,nj(this,function(a){a.bD?delete a.bD:a.Kb(!0)})):(nj(this,function(a){a.isEnabled()?a.Kb(!1):a.bD=!0}),this.di=this.Sb=!1),this.$h()&&qo(this.rc(),a&&this.Fc))};f.$h=function(){return this.eu};f.xj=function(a){a!=this.eu&&this.la&&Ho(this,a);this.eu=a;this.Sb&&this.Fc&&qo(this.rc(),a)};f.oh=function(a){(a=pj(this,a))?a.vg(!0):-1<this.Re&&Io(this).vg(!1)};f.vg=function(a){this.oh(qj(this,a))};
function Io(a){return pj(a,a.Re)}function Jo(a){No(a,function(a,c){return(a+1)%c},oj(a)-1)}function Ko(a){No(a,function(a,c){a--;return 0>a?c-1:a},0)}function Mo(a){No(a,function(a,c){return(a+1)%c},a.Re)}function Lo(a){No(a,function(a,c){a--;return 0>a?c-1:a},a.Re)}function No(a,b,c){c=0>c?qj(a,a.Cc):c;var d=oj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=pj(a,c);if(h&&a.Gy(h)){a.oh(c);break}e++;c=b.call(a,c,d)}}f.Gy=function(a){return a.ta()&&a.isEnabled()&&Wn(a,2)};function Oo(){}w(Oo,Pn);fa(Oo);Oo.prototype.U=function(){return"goog-menuheader"};function Po(a,b,c){eo.call(this,a,c||Oo.le(),b);this.jd(1,!1);this.jd(2,!1);this.jd(4,!1);this.jd(32,!1);this.R=1}w(Po,eo);Mn("goog-menuheader",function(){return new Po(null)});function Qo(a,b){Fo.call(this,so,b||wo.le(),a);this.xj(!1)}w(Qo,Fo);f=Qo.prototype;f.qt=!0;f.lF=!1;f.U=function(){return this.Ra().U()};f.ik=function(a){if(this.Ra().ik(this,a))return!0;for(var b=0,c=oj(this);b<c;b++){var d=pj(this,b);if("function"==typeof d.ik&&d.ik(a))return!0}return!1};f.ck=function(a){this.ln(a,!0)};f.ew=function(a,b){var c=this.ta();c||Ui(this.a(),!0);var d=this.a(),e=a,h=b,k=Ji(d);e instanceof rh&&(h=e.y,e=e.x);Ci(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Ui(this.a(),!1)};
f.ba=function(a,b,c){(b=Qo.d.ba.call(this,a,b))&&a&&this.la&&this.qt&&this.rc().focus();this.rB=a&&c&&u(c.clientX)?new rh(c.clientX,c.clientY):null;return b};f.xu=function(a){this.qt&&this.rc().focus();return Qo.d.xu.call(this,a)};f.Gy=function(a){return(this.lF||a.isEnabled())&&a.ta()&&Wn(a,2)};f.he=function(a){var b=this.Ra(),c;c=this.N();c=Nh(c.ja,"div",b.U()+"-content",a);for(var d=c.length,e=0;e<d;e++)to(b,this,c[e]);Qo.d.he.call(this,a)};
f.gg=function(a){var b=Qo.d.gg.call(this,a);b||nj(this,function(c){!b&&c.lH&&c.XA==a.keyCode&&(this.isEnabled()&&this.vg(c),b=c.ah(a))},this);return b};f.oh=function(a){Qo.d.oh.call(this,a);var b=pj(this,a);if(b){a=this.a();var b=b.a(),c=Ji(b),d=Ji(a),e=cj(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new rh(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Ro(){}Ro.prototype.ue=function(){};function So(a,b,c){this.element=a;this.wn=b;this.TK=c}w(So,Ro);So.prototype.ue=function(a,b,c){xo(this.element,this.wn,a,b,void 0,c,this.TK)};function To(a,b,c,d){So.call(this,a,b);this.ir=c?5:0;this.Iv=d||void 0}w(To,So);To.prototype.XG=function(){return this.ir};To.prototype.ue=function(a,b,c,d){var e=xo(this.element,this.wn,a,b,null,c,10,d,this.Iv);if(e&496){var h=Uo(e,this.wn);b=Uo(e,b);e=xo(this.element,h,a,b,null,c,10,d,this.Iv);e&496&&(h=Uo(e,h),b=Uo(e,b),xo(this.element,h,a,b,null,c,this.ir,d,this.Iv))}};function Uo(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Vo(a,b,c,d){To.call(this,a,b,c||d);if(c||d)this.ir=65|(d?32:132)}w(Vo,To);function Wo(){}w(Wo,Pn);fa(Wo);f=Wo.prototype;f.Zg=function(){return"button"};f.th=function(a,b,c){switch(b){case 8:case 16:Yk(a,"pressed",c);break;default:case 64:case 1:Wo.d.th.call(this,a,b,c)}};f.B=function(a){var b=Wo.d.B.call(this,a);this.gs(b,a.Pn());var c=a.w();c&&this.C(b,c);Wn(a,16)&&this.th(b,16,a.eh());return b};f.Cb=function(a,b){b=Wo.d.Cb.call(this,a,b);var c=this.w(b);a.Cg=c;a.Ew=this.Pn(b);Wn(a,16)&&this.th(b,16,a.eh());return b};f.w=ea;f.C=ea;f.Pn=function(a){return a.title};
f.gs=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.Ho=function(a,b){var c=a.Se(),d=this.U()+"-collapse-left",e=this.U()+"-collapse-right";a.tk(c?e:d,!!(b&1));a.tk(c?d:e,!!(b&2))};f.U=function(){return"goog-button"};function Xo(){}w(Xo,Wo);fa(Xo);f=Xo.prototype;f.Zg=function(){};f.B=function(a){a.Mo(!1);a.nn&=-256;a.jd(32,!1);return a.N().B("button",{"class":this.wk(a).join(" "),disabled:!a.isEnabled(),title:a.Pn()||"",value:a.w()||""},a.wq()||"")};f.Me=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.Cb=function(a,b){a.Mo(!1);a.nn&=-256;a.jd(32,!1);if(b.disabled){var c=this.Kn(1);bl(b,c)}return Xo.d.Cb.call(this,a,b)};
f.im=function(a){a.gb().D(a.a(),"click",a.Qk)};f.Go=ea;f.tm=ea;f.$h=function(a){return a.isEnabled()};f.xj=ea;f.uc=function(a,b,c){Xo.d.uc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.w=function(a){return a.value};f.C=function(a,b){a&&(a.value=b)};f.th=ea;function Yo(a,b,c){eo.call(this,a,b||Xo.le(),c)}w(Yo,eo);f=Yo.prototype;f.w=function(){return this.Cg};f.C=function(a){this.Cg=a;this.Ra().C(this.a(),a)};f.Pn=function(){return this.Ew};f.gs=function(a){this.Ew=a;this.Ra().gs(this.a(),a)};f.Ho=function(a){this.Ra().Ho(this,a)};f.f=function(){Yo.d.f.call(this);delete this.Cg;delete this.Ew};f.fb=function(){Yo.d.fb.call(this);if(Wn(this,32)){var a=this.rc();a&&this.gb().D(a,"keyup",this.gg)}};
f.gg=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Qk(a):32==a.keyCode};Mn("goog-button",function(){return new Yo(null)});function Zo(){}w(Zo,Wo);fa(Zo);f=Zo.prototype;f.B=function(a){var b={"class":"goog-inline-block "+this.wk(a).join(" ")},b=a.N().B("div",b,this.fq(a.getContent(),a.N()));this.gs(b,a.Pn());Sn(this,a,b);return b};f.Zg=function(){return"button"};f.Ka=function(a){return a&&a.firstChild.firstChild};f.fq=function(a,b){return b.B("div","goog-inline-block "+(this.U()+"-outer-box"),b.B("div","goog-inline-block "+(this.U()+"-inner-box"),a))};f.Me=function(a){return"DIV"==a.tagName};
f.Cb=function(a,b){$o(b,!0);$o(b,!1);var c;a:{c=a.N().Hz(b);var d=this.U()+"-outer-box";if(c&&al(c,d)&&(c=a.N().Hz(c),d=this.U()+"-inner-box",c&&al(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.fq(b.childNodes,a.N()));cl(b,["goog-inline-block",this.U()]);return Zo.d.Cb.call(this,a,b)};f.U=function(){return"goog-custom-button"};
function $o(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ia(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function ap(){}w(ap,Zo);fa(ap);f=ap.prototype;f.Ka=function(a){return ap.d.Ka.call(this,a&&a.firstChild)};f.Cb=function(a,b){var c=Nh(document,"*","goog-menu",b)[0];if(c){Ui(c,!1);Kh(c).body.appendChild(c);var d=new Qo;d.Cb(c);bp(a,d)}return ap.d.Cb.call(this,a,b)};f.fq=function(a,b){return ap.d.fq.call(this,[this.createCaption(a,b),b.B("div","goog-inline-block "+(this.U()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.B("div","goog-inline-block "+(this.U()+"-caption"),a)};
f.U=function(){return"goog-menu-button"};function cp(a,b,c,d,e){Yo.call(this,a,c||ap.le(),d);this.jd(64,!0);this.rr=new Vo(null,5);b&&bp(this,b);this.jJ=null;this.ea=new Wf(500);!Do&&!Eo||pc("533.17.9")||(this.Zq=!0);this.kJ=e||wo.le()}w(cp,Yo);f=cp.prototype;f.Zq=!1;f.fL=!1;f.fb=function(){cp.d.fb.call(this);dp(this,!0);this.T&&ep(this,this.T,!0);Yk(this.q,"haspopup",!!this.T)};f.Ac=function(){cp.d.Ac.call(this);dp(this,!1);if(this.T){this.fc(!1);this.T.Ac();ep(this,this.T,!1);var a=this.T.a();a&&R(a)}};
f.f=function(){cp.d.f.call(this);this.T&&(this.T.g(),delete this.T);delete this.YK;this.ea.g()};f.bh=function(a){cp.d.bh.call(this,a);this.dh()&&(this.fc(!(this.R&64),a),this.T&&(this.T.di=!!(this.R&64)))};f.hg=function(a){cp.d.hg.call(this,a);this.T&&!this.dh()&&(this.T.di=!1)};f.Qk=function(){this.setActive(!1);return!0};f.jI=function(a){this.T&&this.T.ta()&&!this.ik(a.target)&&this.fc(!1)};f.ik=function(a){return a&&gi(this.a(),a)||this.T&&this.T.ik(a)||!1};
f.gg=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.T&&this.T.ta()){var b=this.T.ah(a);return 27==a.keyCode?(this.fc(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.fc(!0,a),!0):!1};f.oI=function(){this.fc(!1)};f.pI=function(){this.dh()||this.fc(!1)};f.Bk=function(a){this.Zq||this.fc(!1);cp.d.Bk.call(this,a)};f.ou=function(){this.T||bp(this,new Qo(this.N(),this.kJ));return this.T||null};
function bp(a,b){var c=a.T;b!=c&&(c&&(a.fc(!1),a.la&&ep(a,c,!1),delete a.T),a.la&&Yk(a.q,"haspopup",!!b),b&&(a.T=b,b.No(a),b.ba(!1),c=a.Zq,(b.qt=c)&&b.xj(!0),a.la&&ep(a,b,!0)))}f.ck=function(a){this.ou().ln(a,!0)};f.ba=function(a,b){var c=cp.d.ba.call(this,a,b);c&&!this.ta()&&this.fc(!1);return c};f.Kb=function(a){cp.d.Kb.call(this,a);this.isEnabled()||this.fc(!1)};f.gw=function(){this.fc(!0)};f.Rn=function(){this.fc(!1)};
f.fc=function(a,b){cp.d.fc.call(this,a);if(this.T&&!!(this.R&64)==a){if(a){if(!this.T.la)if(this.fL){var c=ei(this.a());c?this.T.lh(c.parentNode,c):this.T.k(this.a().parentNode)}else this.T.k();this.ZC=Ii(this.a());this.Ey=Si(this.a());fp(this);this.T.oh(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.T.di=!1;if(c=this.a())Yk(c,"activedescendant",""),Yk(c,"owns","");null!=this.Ir&&(this.Ir=void 0,(c=this.T.a())&&Oi(c,"",""))}this.T.ba(a,!1,b);if(!this.ok){var c=this.gb(),d=a?c.D:
c.rb;d.call(c,ti(this.N()),"mousedown",this.jI,!0);this.Zq&&d.call(c,this.T,"blur",this.pI);d.call(c,this.ea,Xf,this.zK);a?this.ea.start():this.ea.stop()}}};function fp(a){if(a.T.la){var b=a.rr;a.rr.element=a.YK||a.a();var c=a.T.a();a.T.ta()||(c.style.visibility="hidden",Ui(c,!0));!a.Ir&&a.rr.XG&&a.rr.ir&32&&(a.Ir=T(c));b.ue(c,b.wn^1,a.jJ,a.Ir);a.T.ta()||(Ui(c,!1),c.style.visibility="visible")}}
f.zK=function(){var a=Si(this.a()),b=Ii(this.a()),c=this.Ey;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.ZC,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Ey=a,this.ZC=b,fp(this))};function ep(a,b,c){var d=a.gb();c=c?d.D:d.rb;c.call(d,b,"action",a.oI);c.call(d,b,"highlight",a.yu);c.call(d,b,"unhighlight",a.zu)}function dp(a,b){var c=a.gb();(b?c.D:c.rb).call(c,a.a(),"keydown",a.mI)}
f.yu=function(a){var b=this.a();if(a=a.target.a()){var c=Zk(a,"activedescendant");a=Kh(a).getElementById(c)||a;a.id||(c=gj.le(),a.id=":"+(c.gB++).toString(36));c="";a&&(c=a.id);Yk(b,"activedescendant",c);Yk(b,"owns",a.id)}};f.mI=function(a){Wn(this,32)&&this.rc()&&this.T&&this.T.ta()&&a.stopPropagation()};f.zu=function(){if(!Io(this.T)){var a=this.a();Yk(a,"activedescendant","");Yk(a,"owns","")}};Mn("goog-menu-button",function(){return new cp(null)});function gp(){U.call(this);this.oe=Q("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":gp.CSS.QD});Yh(this.a(),this.oe);this.nj=Q("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":gp.CSS.mb});Yh(this.a(),this.nj);this.T=new Qo;this.Yc=new fk;this.Kd=[];hp(this);this.Rn(void 0,0);this.T.k(this.oe);P(this.T.a(),gp.CSS.PD)}w(gp,U);v("nrg.ui.SlideInMenu",gp);gp.ID_PREFIX="nrg.ui.SlideInMenu";
gp.CSS_SUFFIX={mb:"icon",OM:"icon-hovered",PD:"menu",QD:"menuholder",RD:"menuitem",kx:"menuitem-highlight",SD:"menuitem-icon"};var ip={Ds:null,wh:null,mb:null};function jp(a,b,c,d){d=ca(d)?d:200;return[new ak(a,d),new Uj(a,b,c,d,tk)]}function kp(a,b,c,d){d=ca(d)?d:200;return[new Zj(a,d),new Uj(a,b,c,d,tk)]}f=gp.prototype;f.sc=null;f.uB=null;f.An=null;f.om=!1;f.Sn=[-100,-100];f.Wo=[0,0];f.Zu=!0;f.$u=!1;f.XB=function(a,b){return this.Sn=[a,b]};f.lC=function(a,b){return this.Wo=[a,b]};f.PG=function(){return this.Sn};
f.EH=function(){return this.Wo};f.ou=function(){return this.T};f.gH=function(){return this.oe};f.hH=function(){return this.nj};f.aC=function(a){this.nj.src=a};f.vL=function(a,b){this.sc[a].mb.src=b};f.Lz=function(a){return ob(this.sc).indexOf(a)};f.su=function(a){return ob(this.sc)[a]};f.mu=function(a){return this.sc[ob(this.sc)[a]]};f.TA=function(a){return this.Zu=a};f.gJ=function(a){return this.$u=a};f.CH=function(){return this.An};
function lp(a){null!=a.Yc&&(a.Yc.stop(),D(a.Kd,function(a){this.Yc.remove(a);a.g()}.bind(a)),Jb(a.Kd))}function mp(a,b,c){lp(a);D(g(b)?b:[b],function(a){this.Yc.add(a);this.Kd.push(a)}.bind(a));a.oe.style.visibility="visible";Tc(a.Yc,"end",function(){c&&c()}.bind(a));a.Yc.play()}f.Vl=null;f.lq=null;f.QB=function(a){this.lq=a;this.a().title=a};function np(a){null!=a.Vl&&(ba.clearTimeout(a.Vl),a.Vl=null);a.Vl=Yf(function(){this.Vl=null;this.om&&(!this.dv&&this.om?this.Rn():np(this))}.bind(a),450)}
f.oh=function(a){P(this.sc[this.su(a)].wh,gp.CSS.kx);this.Zu&&(this.nj.src=this.sc[this.su(a)].mb.src);this.$u?this.a().title=this.mu(a).Ds.getContent():null!=this.lq&&(this.a().title=this.lq)};f.ez=function(){C(this.sc,function(a){Ch(a.wh,gp.CSS.kx)}.bind(this))};
f.by=function(a,b){null==this.sc&&(this.sc={});a=r(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;D(a,function(a,k){if(this.sc[a])throw Error(a+" is already in use!");c=new oo(a);this.T.ck(c);d=c.Ka();P(d,gp.CSS.RD);d.title=a;e=Q("img",{id:gp.ID_PREFIX+"_MenuItemIcon_"+B(),"class":gp.CSS.SD});e.src=k<=b.length-1?b[k]:null;Yh(d,e);this.sc[a]=vb(ip);this.sc[a].Ds=c;this.sc[a].wh=d;this.sc[a].mb=e}.bind(this))};
f.Qo=function(a,b){var c=a;if(r(c)){if(!this.sc[c])throw Error(c+" does not exist!");c=this.Lz(c)}this.uB=this.An?this.An:a;this.An=a;ca(b)&&!b||this.ez();this.oh(c);this.dispatchEvent({type:"item_selected",index:c,title:this.mu(c).Ds.getContent()})};f.gw=function(a,b){mp(this,jp(this.oe,this.Sn,this.Wo,b),function(){this.om=!0;null!=a&&a()}.bind(this))};f.Rn=function(a,b){mp(this,kp(this.oe,this.Wo,this.Sn,b),function(){this.om=!1;this.oe.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function hp(a){F(a.a(),"click",function(){this.om?this.Rn():this.gw()}.bind(a));F(a.T,"action",function(a){this.Qo(a.target.getContent())}.bind(a));F(a.oe,"mouseover",function(){this.dv=!0}.bind(a));F(a.oe,"mouseout",function(){this.dv=!1;np(this)}.bind(a))}
f.f=function(){gp.d.f.call(this);delete this.dv;delete this.Vl;lp(this);Jb(this.Kd);delete this.Kd;C(this.sc,function(a,b){I(a);R(a);delete this.sc[b]}.bind(this));sb(this.sc);delete this.sc;R(this.oe);delete this.oe;R(this.nj);delete this.nj;I(this.T);this.T.g();this.nq(this.Yc);delete this.Yc;delete this.lq;delete this.uB;delete this.An;delete this.om;delete this.Sn;delete this.Wo;delete this.Zu;delete this.$u};v("nrg.ui.SlideInMenu.ID_PREFIX",gp.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{TM:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",gp.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",ip);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",gp.prototype.XB);v("nrg.ui.SlideInMenu.prototype.setShowPosition",gp.prototype.lC);v("nrg.ui.SlideInMenu.prototype.getHidePosition",gp.prototype.PG);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",gp.prototype.EH);v("nrg.ui.SlideInMenu.prototype.getMenu",gp.prototype.ou);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",gp.prototype.gH);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",gp.prototype.hH);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",gp.prototype.aC);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",gp.prototype.vL);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",gp.prototype.Lz);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",gp.prototype.su);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",gp.prototype.mu);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",gp.prototype.TA);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",gp.prototype.gJ);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",gp.prototype.CH);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",gp.prototype.oh);v("nrg.ui.SlideInMenu.prototype.deselectAll",gp.prototype.ez);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",gp.prototype.by);v("nrg.ui.SlideInMenu.prototype.setSelected",gp.prototype.Qo);v("nrg.ui.SlideInMenu.prototype.showMenu",gp.prototype.gw);v("nrg.ui.SlideInMenu.prototype.hideMenu",gp.prototype.Rn);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",gp.prototype.QB);v("nrg.ui.SlideInMenu.prototype.disposeInternal",gp.prototype.f);function op(){U.call(this)}w(op,U);v("nrg.ui.HoverInput",op);op.ID_PREFIX="nrg.ui.HoverInput";op.CSS_SUFFIX={FD:"inputbox",SM:"inputbox-hovered",Vw:"display"};f=op.prototype;f.yc=null;f.ga=null;f.FI=!1;f.Sb=!0;f.Kb=function(a){this.Sb=a};f.C=function(a){null!=this.ga&&(this.ga.value=a,this.Ag())};f.w=function(){if(null!=this.ga)return this.ga.value};f.Eb=function(a){null!=this.ga&&(this.ga.max=a,this.Ag())};f.S=function(){if(null!=this.ga)return this.ga.max};
f.Lb=function(a){null!=this.ga&&(this.ga.min=a,this.Ag())};f.ka=function(){if(null!=this.ga)return this.ga.min};f.Dc=function(a){null!=this.ga&&(this.ga.step=a,this.Ag())};f.Od=function(){if(null!=this.ga)return this.ga.step};f.UG=function(){return this.ga};f.BG=function(){return this.yc};f.sy="right";f.SB=function(a){a=a.toLowerCase();if("right"==a||"left"==a)this.sy=a;else throw Error("Invalid alignment: "+a);};
f.Vp=function(){this.yc.style.left="right"==this.sy?"calc(100% - "+T(this.yc).width.toString()+"px)":"0px"};f.Ag=function(){this.yc.innerHTML=this.ga.value;this.Vp()};f.lB=function(a){this.Sb&&(this.ga.value=parseInt(a.target.value),this.dispatchEvent({type:"h",value:this.ga.value}),this.Ag())};
f.k=function(a){op.d.k.call(this,a);this.yc=Q("div");this.a().appendChild(this.yc);P(this.yc,op.CSS.Vw);this.ga=Q("input");this.ga.type="number";this.ga.step=1;this.ga.min=0;this.ga.value=0;this.a().appendChild(this.ga);P(this.ga,op.CSS.FD);F(this.ga,"input",this.lB.bind(this));this.Ag()};f.f=function(){op.d.f.call(this);delete this.FI;delete this.Sb;this.ga&&(I(this.ga),R(this.ga),delete this.ga);this.yc&&(I(this.yc),R(this.yc),delete this.yc)};v("nrg.ui.HoverInput.EventType",{RM:"h",Vw:"i"});
v("nrg.ui.HoverInput.ID_PREFIX",op.ID_PREFIX);v("nrg.ui.HoverInput.CSS_SUFFIX",op.CSS_SUFFIX);v("nrg.ui.HoverInput.prototype.displayElt",op.prototype.yc);v("nrg.ui.HoverInput.prototype.inputBox",op.prototype.ga);v("nrg.ui.HoverInput.prototype.alignDisplayElement",op.prototype.Vp);v("nrg.ui.HoverInput.prototype.setDisplayAlignment",op.prototype.SB);v("nrg.ui.HoverInput.prototype.getValue",op.prototype.w);v("nrg.ui.HoverInput.prototype.setValue",op.prototype.C);
v("nrg.ui.HoverInput.prototype.setStep",op.prototype.Dc);v("nrg.ui.HoverInput.prototype.getStep",op.prototype.Od);v("nrg.ui.HoverInput.prototype.setMaximum",op.prototype.Eb);v("nrg.ui.HoverInput.prototype.getMaximum",op.prototype.S);v("nrg.ui.HoverInput.prototype.setMinimum",op.prototype.Lb);v("nrg.ui.HoverInput.prototype.getMinimum",op.prototype.ka);v("nrg.ui.HoverInput.prototype.updateValue",op.prototype.Ag);v("nrg.ui.HoverInput.prototype.onInput",op.prototype.lB);
v("nrg.ui.HoverInput.prototype.getInputElement",op.prototype.UG);v("nrg.ui.HoverInput.prototype.getDisplayElement",op.prototype.BG);v("nrg.ui.HoverInput.prototype.render",op.prototype.k);v("nrg.ui.HoverInput.prototype.disposeInternal",op.prototype.f);function pp(a,b){$c.call(this);this.q=a;var c=fi(this.q)?this.q:this.q?this.q.body:null;this.SI=!!c&&Ki(c);this.LA=F(this.q,hc?"DOMMouseScroll":"mousewheel",this,b)}w(pp,$c);
pp.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Nc;if("mousewheel"==a.type){c=1;if(E||ic&&(dc||pc("532.0")))c=40;d=qp(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=qp(-a.wheelDeltaX,c),c=qp(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;u(this.UA)&&(b=hd(b,-this.UA,this.UA));u(this.VA)&&(c=hd(c,-this.VA,this.VA));this.SI&&(b=-b);b=new rp(d,a,b,c);this.dispatchEvent(b)};function qp(a,b){return ic&&(cc||ec)&&0!=a%b?a:a/b}
pp.prototype.f=function(){pp.d.f.call(this);Vc(this.LA);this.LA=null};function rp(a,b,c,d){Hc.call(this,b);this.type="mousewheel";this.detail=a;this.Rh=c;this.Md=d}w(rp,Hc);function sp(a){bd.call(this);this.u="interactor";this.Ie=a;this.Xs=this.Jx=this.Ix=this.Kx=this.Hx=this.Lx=null;this.Kp=!0;this.Ii=this.Ci=this.Pg=!1;this.Uc=[0,0];this.Ss=new A.Q(0,0,0);this.Pm=new A.Q(0,0,0);this.IA=0;this.Rx=this.Gp=null;this.ft=!1;this.ub={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(sp,bd);sp.prototype.__defineGetter__("config",function(){return this.ub});
sp.prototype.__defineGetter__("leftButtonDown",function(){return this.Pg});sp.prototype.__defineGetter__("middleButtonDown",function(){return this.Ci});sp.prototype.__defineGetter__("rightButtonDown",function(){return this.Ii});
sp.prototype.sa=function(){this.ub.MOUSEWHEEL_ENABLED?(this.Xs=new pp(this.Ie),this.Lx=F(this.Xs,"mousewheel",this.so.bind(this))):(Vc(this.Lx),this.Xs=null);this.ub.MOUSECLICKS_ENABLED?(this.Hx=F(this.Ie,"mousedown",this.zv.bind(this)),this.Kx=F(this.Ie,"mouseup",this.Av.bind(this))):(Vc(this.Hx),Vc(this.Kx));this.Ie.oncontextmenu=this.ub.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.ub.KEYBOARD_ENABLED?this.gi.bind(this):null;this.ub.TOUCH_ENABLED?(this.ub.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.ZE=F(this.Ie,"touchstart",this.IK.bind(this)),this.YE=F(this.Ie,"touchmove",this.GK.bind(this)),this.XE=F(this.Ie,"touchend",this.CK.bind(this))):(Vc(this.ZE),Vc(this.YE),Vc(this.XE));Vc(this.Ix);Vc(this.Jx);this.Ix=F(this.Ie,"mousemove",this.cK.bind(this));this.Jx=F(this.Ie,"mouseout",this.dK.bind(this))};
sp.prototype.zv=function(a){0==a.button?this.Pg=!0:1==a.button?this.Ci=!0:2==a.button&&(this.Ii=!0);eval("this.onMouseDown("+this.Pg+","+this.Ci+","+this.Ii+")");tp(this);a.preventDefault()};sp.prototype.$J=function(){};sp.prototype.Av=function(a){0==a.button?this.Pg=!1:1==a.button?this.Ci=!1:2==a.button&&(this.Ii=!1);eval("this.onMouseUp("+this.Pg+","+this.Ci+","+this.Ii+")");tp(this);a.preventDefault()};sp.prototype.__defineGetter__("mousePosition",function(){return this.Uc});f=sp.prototype;
f.fK=function(){};f.dK=function(a){this.Kp=!1;this.ub.KEYBOARD_ENABLED&&(window.onkeydown=null);this.Ii=this.Ci=this.Pg=!1;tp(this);this.Ss=new A.Q(0,0,0);a.preventDefault()};f.bK=function(){};f.IK=function(a){a.preventDefault();a.sa(a.Nc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Pm=new A.Q(a.clientX,a.clientY,0);this.Rx=setTimeout(this.EK.bind(this,a),500)};f.HK=function(){};
f.EK=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new re;a.Og=!0;a.Nf=this instanceof up;this.dispatchEvent(a);this.Op=!0};f.DK=function(){};function vp(a){clearTimeout(a.Rx);if(a.Op){var b=new re;b.Og=!1;b.Nf=a instanceof up;a.dispatchEvent(b)}a.Op=!1}f.CK=function(a){a.preventDefault();eval("this.onTouchEnd()");vp(this)};f.BK=function(){};
f.GK=function(a){a.preventDefault();this.Op||vp(this);this.touchmoveEvent=a=a.Nc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.Q(c[0],c[1],0);var b=c[0]>3*this.Ie.clientWidth/4,d=c[0]<this.Ie.clientWidth/4,e=c[1]<this.Ie.clientHeight/4,c=c[1]>3*this.Ie.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Pm.Ec(a);this.Pm=a.clone();if(this.Op)a=new pe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.md=e,this.dispatchEvent(a);
else if(this instanceof wp&&(b||d))a=new te,a.dc=0>e.y,this.dispatchEvent(a);else if(this instanceof up||c)e.scale(3),a=new qe,a.md=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.Q(a[0],a[1],0),b=new A.Q(b[0],b[1],0),e=qd(a,b),b=e-this.IA,this.IA=e,this.Pm.Ec(a),this.Pm=a.clone(),10<Math.abs(b)&&(a=new re,a.Og=0<b,a.Nf=this instanceof up,this.dispatchEvent(a)))};f.FK=function(){};
f.cK=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Kp=!0;this.ub.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.gi.bind(this));a.preventDefault();var b=a.shiftKey;this.ft=b;this.Uc=[a.offsetX,a.offsetY];var c=new A.Q(this.Uc[0],this.Uc[1],0);a=this.Ss.Ec(c);this.Ss=c.clone();this.ub.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Ci||this.Pg||this.Ii)&&tp(this),this.Gp=setTimeout(function(){tp(this);var a=new ue;a.Sp=c.x;a.Tp=
c.y;this.dispatchEvent(a);this.Gp=null}.bind(this),300));0!=a.ng()&&(this.Pg&&!b?(b=new qe,a.scale(3),b.md=a,this.dispatchEvent(b)):this.Ci||this.Pg&&b?(b=new pe,b.md=a,this.dispatchEvent(b)):this.Ii&&(b=new re,b.Og=0<a.y,b.Nf=!1,this.dispatchEvent(b)))};function tp(a){a.Gp&&clearTimeout(a.Gp);a.dispatchEvent(new ve)}f.gK=function(){};f.so=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");tp(this);a.preventDefault()};f.SJ=function(){};
f.gi=function(a){if(this.Kp){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");tp(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new pe:b?a=new re:(a=new qe,this instanceof wp&&(a=new te)),a&&(c=new A.Q(0,0,0),37==h?(c.x=5,a.dc=!1,b&&(a.dc=!0,a.Og=!0,a.Nf=!1)):39==h?(c.x=-5,a.dc=!0,b&&(a.Og=!1,a.Nf=!1)):38==h?(c.y=5,a.dc=!0,b&&(a.Og=!0,a.Nf=!0)):40==h&&(c.y=-5,a.dc=!1,b&&(a.Og=!1,a.Nf=!0)),a.md=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new we,this.dispatchEvent(a))}};v("X.interactor",sp);v("X.interactor.prototype.init",sp.prototype.sa);v("X.interactor.prototype.onMouseDown",sp.prototype.$J);v("X.interactor.prototype.onMouseUp",sp.prototype.fK);v("X.interactor.prototype.onMouseMove",sp.prototype.bK);v("X.interactor.prototype.onMouseWheel",sp.prototype.gK);v("X.interactor.prototype.onKey",sp.prototype.SJ);v("X.interactor.prototype.onTouchStart",sp.prototype.HK);v("X.interactor.prototype.onTouchMove",sp.prototype.FK);
v("X.interactor.prototype.onTouchEnd",sp.prototype.BK);v("X.interactor.prototype.onTouchHover",sp.prototype.DK);function wp(a){sp.call(this,a);this.u="interactor2D"}w(wp,sp);wp.prototype.so=function(a){wp.d.so.call(this,a);var b=new te;null==a.Md&&(a.Md=0);b.dc=0>a.Md;this.dispatchEvent(b)};function xp(a,b){if(!u(a)||!u(b))throw Error("A camera needs valid width and height values.");bd.call(this);this.u="camera";this.Vj=new A.Q(0,100,0);this.rl=new A.Q(0,0,0);this.dc=new A.Q(0,0,1);this.Za=a;this.Ja=b;this.O=this.nr(this.Vj,this.rl)}w(xp,bd);xp.prototype.observe=function(a){if(!(null!=a&&a instanceof sp))throw Error("Could not observe the interactor.");F(a,be,this.pK.bind(this));F(a,ae,this.iK.bind(this));F(a,ce,this.RK.bind(this))};
xp.prototype.pK=function(a){if(!(a instanceof qe))throw Error("Received no valid rotate event.");this.rotate(a.md)};xp.prototype.RK=function(a){if(!(a instanceof re))throw Error("Received no valid zoom event.");a.Og?this.Gm(a.Nf):this.Hm(a.Nf)};xp.prototype.iK=function(a){if(!(a instanceof pe))throw Error("Received no valid pan event.");this.Jr(a.md)};xp.prototype.__defineGetter__("view",function(){return this.O});
xp.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.O=a});xp.prototype.__defineGetter__("position",function(){return[this.Vj.x,this.Vj.y,this.Vj.z]});xp.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.Vj=new A.Q(a[0],a[1],a[2]);this.reset()});xp.prototype.__defineGetter__("focus",function(){return[this.rl.x,this.rl.y,this.rl.z]});
xp.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.rl=new A.Q(a[0],a[1],a[2]);this.reset()});xp.prototype.__defineGetter__("up",function(){return[this.dc.x,this.dc.y,this.dc.z]});xp.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.dc=new A.Q(a[0],a[1],a[2]);this.reset()});f=xp.prototype;f.reset=function(){this.O=this.nr(this.Vj,this.rl)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.Q(a[0],a[1],0);else if(!(a instanceof A.Q))throw Error("Invalid distance vector for rotate operation.");return a};f.Jr=function(a){if(g(a)&&2==a.length)a=new A.Q(a[0],a[1],0);else if(!(a instanceof A.Q))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x;this.O[13]+=a.y};f.Gm=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]+=b};f.Hm=function(a){var b=20;null!=a&&!a&&(b=1);this.O[14]-=b};
f.nr=function(a,b){if(!(a instanceof A.Q&&b instanceof A.Q))throw Error("3D vectors required for calculating the view.");return A.v.Vn()};v("X.camera",xp);v("X.camera.prototype.pan",xp.prototype.Jr);v("X.camera.prototype.rotate",xp.prototype.rotate);v("X.camera.prototype.zoomIn",xp.prototype.Gm);v("X.camera.prototype.zoomOut",xp.prototype.Hm);function yp(a,b,c){this.ef=this.df=this.cf=0;3==arguments.length?(this.cf=Number(a),this.df=Number(b),this.ef=Number(c)):a instanceof yp?(this.cf=Number(a.x()),this.df=Number(a.y()),this.ef=Number(a.z())):(this.cf=Number(a[0]),this.df=Number(a[1]),this.ef=Number(a[2]))}
yp.prototype={clone:function(){return new yp(this.cf,this.df,this.ef)},Yi:function(a){return this.cf*a.x()+this.df*a.y()+this.ef*a.z()},kr:function(a,b){return zp(this,Ap(Bp(a,this),b))},length:function(){return Math.sqrt(this.Yi(this))},mk:function(a){return new yp(this.df*a.z()-this.ef*a.y(),this.ef*a.x()-this.cf*a.z(),this.cf*a.y()-this.df*a.x())},x:function(){return this.cf},y:function(){return this.df},z:function(){return this.ef}};
function Cp(a){var b=a.length();return new yp(a.cf/b,a.df/b,a.ef/b)}function Ap(a,b){return new yp(a.cf*b,a.df*b,a.ef*b)}function Bp(a,b){return new yp(a.cf-b.x(),a.df-b.y(),a.ef-b.z())}function zp(a,b){return new yp(a.cf+b.x(),a.df+b.y(),a.ef+b.z())}function Dp(a){return new yp(-a.cf,-a.df,-a.ef)};function Ep(a,b){this.Nv=new yp(a);this.hd=new yp(b)}Ep.prototype={clone:function(){return new Ep(this.Nv.clone(),this.hd.clone())},vk:function(){this.hd=Dp(this.hd)},te:function(){return this.Nv}};function Fp(a,b){this.hd=a;this.op=b}Fp.prototype={clone:function(){return new Fp(this.hd.clone(),this.op)},vk:function(){this.hd=Dp(this.hd);this.op=-this.op}};function Gp(a,b){this.si=a;this.hs=b;var c=a[0].te(),d=a[1].te(),e=a[2].te(),d=Cp(Bp(d,c).mk(Bp(e,c)));this.Ye=new Fp(d,d.Yi(c))}Gp.prototype={clone:function(){var a=this.si.map(function(a){return a.clone()});return new Gp(a,this.hs)},vk:function(){this.si.reverse().map(function(a){a.vk()});this.Ye.vk()}};
function Hp(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.si.length;n++){var p=b.hd.Yi(a.si[n].te())-b.op,p=-1E-5>p?2:1E-5<p?1:0,k=k|p;l.push(p)}switch(k){case 0:(0<b.hd.Yi(a.Ye.hd)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.si.length;n++){var m=(n+1)%a.si.length,p=l[n],q=l[m],k=a.si[n],m=a.si[m];2!=p&&c.push(k);1!=p&&d.push(2!=p?k.clone():k);3==(p|q)&&(p=(b.op-b.hd.Yi(k.te()))/b.hd.Yi(Bp(m.te(),k.te())),p=new Ep(k.Nv.kr(m.te(),p),k.hd.kr(m.hd,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new Gp(c,a.hs));3<=d.length&&h.push(new Gp(d,a.hs))}};function Ip(a){this.$a=this.Wa=this.Ye=null;this.Jb=[];a&&Jp(this,a)}Ip.prototype={clone:function(){var a=new Ip;Kp(a,this.Ye&&this.Ye.clone());Lp(a,this.Wa&&this.Wa.clone());Mp(a,this.$a&&this.$a.clone());a.es(this.Jb.map(function(a){return a.clone()}));return a},Db:function(){for(var a=0;a<this.Jb.length;a++)this.Jb[a].vk();this.Ye.vk();this.Wa&&this.Wa.Db();this.$a&&this.$a.Db();a=this.Wa;this.Wa=this.$a;this.$a=a},es:function(a){this.Jb=a}};function Mp(a,b){a.$a=b}function Lp(a,b){a.Wa=b}
function Kp(a,b){a.Ye=b}function Jp(a,b){if(b.length){a.Ye||(a.Ye=b[0].Ye.clone());for(var c=[],d=[],e=0;e<b.length;e++)Hp(b[e],a.Ye,a.Jb,a.Jb,c,d);c.length&&(a.Wa||(a.Wa=new Ip),Jp(a.Wa,c));d.length&&(a.$a||(a.$a=new Ip),Jp(a.$a,d))}}function Np(a){var b=a.Jb.slice();a.Wa&&(b=b.concat(Np(a.Wa)));a.$a&&(b=b.concat(Np(a.$a)));return b}function Op(a,b){a.Jb=Pp(b,a.Jb);a.Wa&&Op(a.Wa,b);a.$a&&Op(a.$a,b)}
function Pp(a,b){if(!a.Ye)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Hp(b[e],a.Ye,c,d,c,d);a.Wa&&(c=Pp(a.Wa,c));d=a.$a?Pp(a.$a,d):[];return c.concat(d)};function Qp(){this.Jb=[]}function Rp(a){var b=new Qp;b.es(a);return b}
Qp.prototype={clone:function(){var a=new Qp;a.es(this.Jb.map(function(a){return a.clone()}));return a},Jw:function(a){var b=new Ip(this.clone().Jb);a=new Ip(a.clone().Jb);Op(b,a);Op(a,b);a.Db();Op(a,b);a.Db();Jp(b,Np(a));return Rp(Np(b))},Ec:function(a){var b=new Ip(this.clone().Jb);a=new Ip(a.clone().Jb);b.Db();Op(b,a);Op(a,b);a.Db();Op(a,b);a.Db();Jp(b,Np(a));b.Db();return Rp(Np(b))},Iu:function(a){var b=new Ip(this.clone().Jb);a=new Ip(a.clone().Jb);b.Db();Op(a,b);a.Db();Op(b,a);Op(a,b);Jp(b,Np(a));
b.Db();return Rp(Np(b))},inverse:function(){var a=this.clone();a.Jb.map(function(a){a.vk()});return a},es:function(a){this.Jb=a}};function Sp(){}function Tp(a){for(var b=a.G.count,c=[],d=0,d=0;d<b;d+=3){var e=a.G.get(d),h=a.G.get(d+1),k=a.G.get(d+2),l=a.da.get(d),n=a.da.get(d+1),p=a.da.get(d+2),m=a.Ia;a.Kc&&0<a.Kc.length&&(m=a.Kc.get(d));var q=[];q.push(new Ep(e,l));q.push(new Ep(h,n));q.push(new Ep(k,p));c.push(new Gp(q,m))}return Rp(c)}
function Up(a,b){if(!(null!=b&&b instanceof Qp))throw Error("Invalid CSG object.");var c=new dd,d=[];Db(b.Jb,function(a){var b=[],k=a.hs,b=Db(a.si,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.RE=Db(c.unique(),function(a){return[a.te().x(),a.te().y(),a.te().z()]});a.QE=Db(c.unique(),function(a){return[a.hd.x(),a.hd.y(),a.hd.z()]});a.PE=Db(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.G=new cd(9*d.length);
a.da=new cd(9*d.length);a.Kc=new cd(9*d.length);Db(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.RE,n=this.QE,p=this.PE;this.G.add(d[b][0],d[b][1],d[b][2]);this.G.add(d[c][0],d[c][1],d[c][2]);this.G.add(d[a][0],d[a][1],d[a][2]);this.da.add(n[b][0],n[b][1],n[b][2]);this.da.add(n[c][0],n[c][1],n[c][2]);this.da.add(n[a][0],n[a][1],n[a][2]);p[b]&&this.Kc.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Kc.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Kc.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Kc.Na&&(a.Kc=null);
a.Jd=Sd}Sp.prototype.Jw=function(a){if(null==a||!(a instanceof Qp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Tp(b));a=new Vd;za(a,new Sp);Up(a,Tp(this).Jw(b));return a};Sp.prototype.Ec=function(a){if(null==a||!(a instanceof Qp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Tp(b));a=new Vd;za(a,new Sp);Up(a,Tp(this).Ec(b));return a};
Sp.prototype.Iu=function(a){if(null==a||!(a instanceof Qp||a instanceof Vd))throw Error("Invalid object.");var b=a;a instanceof Vd&&(b=Tp(b));a=new Vd;za(a,new Sp);Up(a,Tp(this).Iu(b));return a};Sp.prototype.inverse=function(){var a=new Vd;za(a,new Sp);Up(a,Tp(this).inverse());return a};v("X.constructable",Sp);v("X.constructable.prototype.intersect",Sp.prototype.Iu);v("X.constructable.prototype.inverse",Sp.prototype.inverse);v("X.constructable.prototype.subtract",Sp.prototype.Ec);
v("X.constructable.prototype.union",Sp.prototype.Jw);function Vp(a){function b(a,b,d){b=b*Math.PI*2;b=zp(Ap(n,Math.cos(b)),Ap(p,Math.sin(b)));a=zp(zp(c,Ap(e,a)),Ap(b,h));d=zp(Ap(b,1-Math.abs(d)),Ap(k,d));return new Ep(a,d)}this.Jb=[];a=a||{};var c=new yp(a.start||[0,-1,0]),d=new yp(a.end||[0,1,0]),e=Bp(d,c),h=a.jh||1;a=a.Aa||16;for(var k=Cp(e),l=.5<Math.abs(k.y()),n=Cp((new yp(l,!l,0)).mk(k)),p=Cp(n.mk(k)),l=new Ep(c,Dp(k)),d=new Ep(d,Cp(k)),m=[],q=0;q<a;q++){var t=q/a,s=(q+1)/a;m.push(new Gp([l,b(0,t,-1),b(0,s,-1)]));m.push(new Gp([b(0,s,0),b(0,t,
0),b(1,t,0),b(1,s,0)]));m.push(new Gp([d,b(1,s,1),b(1,t,1)]))}return Rp(m)}w(Vp,Qp);function Wp(){Vd.call(this);this.u="cylinder";this.ht=[-10,-10,-10];this.Qs=[10,10,10];this.Wj=10;this.Xc=32;za(this,new Sp)}w(Wp,Vd);Wp.prototype.__defineGetter__("start",function(){return this.ht});Wp.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.ht=a});Wp.prototype.__defineGetter__("end",function(){return this.Qs});Wp.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.Qs=a});
Wp.prototype.__defineGetter__("radius",function(){return this.Wj});Wp.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Wj=a});Wp.prototype.ha=function(){Up(this,new Vp({start:this.ht,end:this.Qs,jh:this.Wj,Aa:this.Xc}));Wp.d.ha.call(this)};v("X.cylinder",Wp);v("X.cylinder.prototype.modified",Wp.prototype.ha);function Xp(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new yp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new Ep(zp(c,Ap(e,d)),e))}this.Jb=[];a=a||{};var c=new yp(a.Ne||[0,0,0]),d=a.jh||1,e=a.Aa||16;a=a.ML||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new Gp(k));return Rp(h)}w(Xp,Qp);function Yp(){Vd.call(this);this.u="sphere";this.Va=[0,0,0];this.Wj=5;this.Xc=32;this.WE=16;za(this,new Sp)}w(Yp,Vd);Yp.prototype.__defineGetter__("center",function(){return this.Va});Yp.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Va=a});Yp.prototype.__defineGetter__("radius",function(){return this.Wj});Yp.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.Wj=a});
Yp.prototype.ha=function(){Up(this,new Xp({Ne:this.Va,jh:this.Wj,Aa:this.Xc,ML:this.WE}));Yp.d.ha.call(this)};v("X.sphere",Yp);v("X.sphere.prototype.modified",Yp.prototype.ha);function Pe(a){J.call(this);this.u="labelmap";this.Kh=a;this.gt=new Float32Array([-255,-255,-255,-255])}w(Pe,J);Pe.prototype.ha=function(){var a=new Wd;a.Oa=this;this.dispatchEvent(a);this.Kh.ha()};Pe.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.Gd)throw Error("No colortable assigned.");b=this.Gd.be.get(a).slice(1,5)}this.gt=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Pe);function Zp(a){this.Jb=[];a=a||{};var b=new yp(a.Ne||[0,0,0]),c=a.jh?a.jh.length?a.jh:[a.jh,a.jh,a.jh]:[1,1,1];return Rp([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Gp(a[0].map(function(e){e=new yp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new Ep(e,new yp(a[1]))}))}))}w(Zp,Qp);function $p(){Vd.call(this);this.u="cube";this.Va=[0,0,0];this.Vs=this.Us=this.Ts=20;this.Dl=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];za(this,new Sp)}w($p,Vd);$p.prototype.__defineGetter__("center",function(){return this.Va});$p.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.Va=a});$p.prototype.__defineGetter__("lengthX",function(){return this.Ts});
$p.prototype.__defineSetter__("lengthX",function(a){if(!u(a))throw Error("Invalid lengthX.");this.Ts=a});$p.prototype.__defineGetter__("lengthY",function(){return this.Us});$p.prototype.__defineSetter__("lengthY",function(a){if(!u(a))throw Error("Invalid lengthY.");this.Us=a});$p.prototype.__defineGetter__("lengthZ",function(){return this.Vs});$p.prototype.__defineSetter__("lengthZ",function(a){if(!u(a))throw Error("Invalid lengthZ.");this.Vs=a});
$p.prototype.ha=function(){Up(this,new Zp({Ne:this.Va,jh:[this.Ts/2,this.Us/2,this.Vs/2]}));$p.d.ha.call(this)};v("X.cube",$p);v("X.cube.prototype.modified",$p.prototype.ha);function up(a){sp.call(this,a);this.u="interactor3D"}w(up,sp);up.prototype.so=function(a){up.d.so.call(this,a);var b=new re;null==a.Md&&(a.Md=0);b.Og=0>a.Md;b.Nf=!0;this.dispatchEvent(b)};function aq(a){bd.call(this);this.u="array";this.cb=[];this.xx=a}w(aq,bd);function bq(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}aq.prototype.add=function(a){this.cb.push(a);return!0};aq.prototype.remove=function(a){a=this.cb.indexOf(a);-1<a&&this.cb.splice(a,1);return!0};aq.prototype.clear=function(){this.cb.length=0};
function cq(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),cq(a,b,d),cq(a,d,c);b<d;++b)if(0<a.xx(a.cb[b],a.cb[d])){var e=a.cb[b];a.cb[b]=a.cb[d];for(var h=a,k=d,l=c;k+1<l&&0>h.xx(h.cb[k+1],e);){var n=h,p=k+1,m=n.cb[k];n.cb[k]=n.cb[p];n.cb[p]=m;++k}h.cb[k]=e}}aq.prototype.sort=function(){cq(this,0,this.cb.length)};function dq(a,b){xp.call(this,a,b);this.u="camera2D"}w(dq,xp);dq.prototype.rotate=function(a){a=dq.d.rotate.call(this,a);var b=new oe;0<a.x?b.jt--:0>a.x&&b.jt++;0<a.y?b.Ws++:0>a.y&&b.Ws--;this.dispatchEvent(b)};dq.prototype.Gm=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]+=b};dq.prototype.Hm=function(a){var b=20;null!=a&&!a&&(b=.02);this.O[14]-=b};
dq.prototype.Jr=function(a){if(g(a)&&2==a.length)a=new A.Q(a[0],a[1],0);else if(!(a instanceof A.Q))throw Error("Invalid distance vector for pan operation.");this.O[12]-=a.x/this.O[14];this.O[13]+=a.y/this.O[14]};function eq(a,b){xp.call(this,a,b);this.u="camera3D";this.Ax=45;this.at=A.v.Yu(A.v.Vn(),this.Ax,a/b,1,1E4)}w(eq,xp);eq.prototype.rotate=function(a){a=eq.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.Q(this.O[1],this.O[5],this.O[9]),d=new A.Q(this.O[0],this.O[4],this.O[8]);c.normalize();d.normalize();A.v.rotate(this.O,b,c.x,c.y,c.z);A.v.rotate(this.O,a,d.x,d.y,d.z)};eq.prototype.nr=function(a,b){var c=eq.d.nr.call(this,a,b);A.v.SA(c,a,b,this.dc);return c};
function fq(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.v.multiply(a.at,a.O,l);A.v.Db(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.v.bB(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",eq);function gq(){$c.call(this)}w(gq,$c);f=gq.prototype;f.Cg=0;f.og=0;f.xf=100;f.Pe=0;f.oi=1;f.pe=!1;f.Lk=!1;f.C=function(a){a=hq(this,a);this.Cg!=a&&(this.Cg=a+this.Pe>this.xf?this.xf-this.Pe:a<this.og?this.og:a,this.pe||this.Lk||this.dispatchEvent("change"))};f.w=function(){return hq(this,this.Cg)};f.Af=function(a){a=hq(this,a);this.Pe!=a&&(this.Pe=0>a?0:this.Cg+a>this.xf?this.xf-this.Cg:a,this.pe||this.Lk||this.dispatchEvent("change"))};
f.td=function(){var a=this.Pe;return null==this.oi?a:Math.round(a/this.oi)*this.oi};f.Lb=function(a){if(this.og!=a){var b=this.pe;this.pe=!0;this.og=a;a+this.Pe>this.xf&&(this.Pe=this.xf-this.og);a>this.Cg&&this.C(a);a>this.xf&&(this.Pe=0,this.Eb(a),this.C(a));(this.pe=b)||this.Lk||this.dispatchEvent("change")}};f.ka=function(){return hq(this,this.og)};
f.Eb=function(a){a=hq(this,a);if(this.xf!=a){var b=this.pe;this.pe=!0;this.xf=a;a<this.Cg+this.Pe&&this.C(a-this.Pe);a<this.og&&(this.Pe=0,this.Lb(a),this.C(this.xf));a<this.og+this.Pe&&(this.Pe=this.xf-this.og);(this.pe=b)||this.Lk||this.dispatchEvent("change")}};f.S=function(){return hq(this,this.xf)};f.Od=function(){return this.oi};f.Dc=function(a){this.oi!=a&&(this.oi=a,a=this.pe,this.pe=!0,this.Eb(this.S()),this.Af(this.td()),this.C(this.w()),(this.pe=a)||this.Lk||this.dispatchEvent("change"))};
function hq(a,b){return null==a.oi?b:a.og+Math.round((b-a.og)/a.oi)*a.oi};function iq(a){hj.call(this,a);this.kh=new gq;F(this.kh,"change",this.vu,!1,this)}w(iq,hj);var jq={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=iq.prototype;f.B=function(){this.af=this.kk();var a=jq[this.Ha];this.q=this.N().B("div",a,this.af);kq(this);lq(this);mq(this)};f.fb=function(){iq.d.fb.call(this);E&&7>nc&&F(this.a(),"resize",this.uh,!1,this);this.uh();var a=this.a();Xk(a,"progressbar");Yk(a,"live","polite")};f.Ac=function(){iq.d.Ac.call(this);nq(this)};
f.kk=function(){return this.N().B("div","progress-bar-thumb")};function nq(a){E&&7>nc&&Uc(a.a(),"resize",a.uh,!1,a)}f.he=function(a){iq.d.he.call(this,a);bl(this.a(),jq[this.Ha]);a=Nh(document,null,"progress-bar-thumb",this.a())[0];a||(a=this.kk(),this.a().appendChild(a));this.af=a};f.w=function(){return this.kh.w()};f.C=function(a){this.kh.C(a);this.a()&&kq(this)};function kq(a){Yk(a.a(),"valuenow",a.w())}f.ka=function(){return this.kh.ka()};f.Lb=function(a){this.kh.Lb(a);this.a()&&lq(this)};
function lq(a){Yk(a.a(),"valuemin",a.ka())}f.S=function(){return this.kh.S()};f.Eb=function(a){this.kh.Eb(a);this.a()&&mq(this)};function mq(a){Yk(a.a(),"valuemax",a.S())}f.Ha="horizontal";f.vu=function(){this.uh();this.dispatchEvent("change")};
f.uh=function(){if(this.af){var a=this.ka(),b=this.S(),a=(this.w()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Ha?E&&7>nc?(this.af.style.top=0,this.af.style.height="100%",b=this.af.offsetHeight,a=Math.round(a*b),this.af.style.top=b-a+"px",this.af.style.height=a+"px"):(this.af.style.top=100-b+"%",this.af.style.height=b+"%"):this.af.style.width=b+"%"}};
f.ni=function(a){if(this.Ha!=a){var b=jq[this.Ha],c=jq[a];this.Ha=a;if(a=this.a())al(a,b)&&(dl(a,b),bl(a,c)),b=this.af.style,"vertical"==this.Ha?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.uh()}};f.Tb=function(){return this.Ha};f.f=function(){nq(this);iq.d.f.call(this);this.af=null;this.kh.g()};f.Od=function(){return this.kh.Od()};f.Dc=function(a){this.kh.Dc(a)};function oq(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");iq.call(this);this.u="progressbar";this.lf=a;this.$s="";this.Dp=this.Jh=null;this.Tj=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Tj=[c,d,e];this.C(b);this.Fu()}w(oq,iq);
oq.prototype.Fu=function(){var a=zi(this.lf,"position");if("static"==a||""==a)this.$s=this.lf.style.position,this.lf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Tj[0])),d=document.createTextNode(String(this.Tj[1])),e=document.createTextNode(String(this.Tj[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Jh=b;this.k(this.lf);a=this.a();a.style.position=
"absolute";a.style.top=(this.lf.clientHeight-5)/2+"px";a.style.left=(this.lf.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};oq.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;R(this.a());var c=new oq(this.lf,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");ci(d).classList.add("progress-bar-thumb-done");this.Dp=c};
oq.prototype.eo=function(){this.Jh&&R(this.Jh);this.a()&&R(this.a());this.Dp&&R(this.Dp.a());this.Dp=this.Jh=null;this.$s&&(this.lf.style.position=this.$s)};function pq(){bd.call(this);this.u="renderer";this.wa=window.document.body;this.Za=this.wa.clientWidth;this.Ja=this.wa.clientHeight;this.Fa=this.na=this.wc=null;this.Qg=new aq(Yd);this.od=[];this.Pb=null;this.Lp=this.Qm=this.Jp=!1;this.b=this.Gi=this.ee=null;this.ub={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Ns=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(pq,bd);f=pq.prototype;
f.mv=function(){window.cancelAnimationFrame(this.Ns);this.ub.PROGRESSBAR_ENABLED&&(this.Gi=new oq(this.wa,3))};f.nv=function(){this.ub.PROGRESSBAR_ENABLED&&this.Gi&&(this.Gi.done(),this.Ap=Yf(function(){this.Ap=null;this.Gi&&(this.Gi.eo(),this.Gi=null);this.Qm=this.Lp=!0;this.k()}.bind(this),700))};f.pv=function(a){this.Gi&&this.Gi.C(100*a.$j)};f.Ok=function(a){this.ee&&this.ee.C(100*a.$j)};f.ZJ=function(a){null!=a&&a instanceof Wd&&a.Oa&&this.vh(a.Oa)};
f.kK=function(a){null!=a&&a instanceof Xd&&a.Oa&&this.remove(a.Oa)};f.vv=function(a){if(!(null!=a&&a instanceof ue))throw Error("Invalid hover event.");};f.Pk=function(){var a=Lh(this.wa);this.Za=a.clientWidth;this.Ja=a.clientHeight;a=Lh(this.wc);null!=a&&(a.width=this.Za,a.height=this.Ja,"renderer3D"==this.u&&(this.b.viewport(0,0,this.Za,this.Ja),this.na.at=A.v.Yu(A.v.Vn(),this.na.Ax,this.wc.width/this.wc.height,1,1E4)))};
f.pm=function(a){if(!(null!=a&&a instanceof te))throw Error("Invalid scroll event.");};pq.prototype.__defineGetter__("config",function(){return this.ub});pq.prototype.__defineGetter__("interactor",function(){return this.Fa});pq.prototype.__defineGetter__("camera",function(){return this.na});pq.prototype.__defineGetter__("loadingCompleted",function(){return this.Qm});pq.prototype.__defineGetter__("container",function(){return this.wa});
pq.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;r(b)&&(b=Lh(a));if(!fi(b))throw Error("Could not find the given container.");this.wa=b});f=pq.prototype;f.Bo=function(){this.na.reset()};function qq(a){a.ub.PROGRESSBAR_ENABLED&&a.ee&&!a.Ap&&(a.ee.done(),a.Ap=Yf(function(){this.Ap=null;this.ee&&(this.ee.eo(),this.ee=null);this.k()}.bind(a),700))}
f.sa=function(a){var b=Q("canvas");this.wa.appendChild(b);this.Za=this.wa.clientWidth;this.Ja=this.wa.clientHeight;b.width=this.Za;b.height=this.Ja;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.wa.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Pb=new Of;F(this.Pb,ie,this.Ok.bind(this));this.wc=b;this.b=c;b=new up(this.wc);"2d"==a&&(b=new wp(this.wc));b.sa();F(b,ee,this.Bo.bind(this));F(b,je,this.vv.bind(this));F(b,de,this.pm.bind(this));this.Fa=b;b=new eq(this.Za,this.Ja);"2d"==a&&(b=new dq(this.Za,this.Ja));b.observe(this.Fa);this.na=b;F(window,"resize",this.Pk,!1,this)};f.add=function(a){(a instanceof $p||a instanceof Yp||a instanceof Wp)&&a.ha();this.od.push(a);this.vh(a)};
f.remove=function(a){if(!this.wc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&I(a);return!1};f.vh=function(a){if(!this.wc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Wc(a,ge)||F(a,ge,this.ZJ.bind(this)),Wc(a,he)||F(a,he,this.kK.bind(this)),Wc(a,le)||F(a,le,this.mv.bind(this)),Wc(a,ne)||F(a,ne,this.pv.bind(this)),Wc(a,me)||F(a,me,this.nv.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.Qg.cb,c=b.length,d=0,d=0;d<c;d++)if(b[d].nd==a)return b[d];return null};
f.k=function(){if(!this.wc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.Ox){if(this.Pb.wl.Ht(!1)){if(this.ub.PROGRESSBAR_ENABLED&&!this.ee&&(this.ee=new oq(this.wa,3)),this.Lp=this.Qm=!1,this.Ox=Yf(function(){this.Ox=null;this.k()}.bind(this),100),!this.ub.INTERMEDIATE_RENDERING)return}else if(this.Qm||this.Lp||(this.Lp=!0,eval("this.onShowtime()"),this.Qm=!0),this.ee){qq(this);return}this.Ns=window.requestAnimationFrame(this.k.bind(this));eval("this.onRender()");
this.lh(!1,!0)}};f.qB=function(){};f.oB=function(){};f.lh=function(){};f.ie=function(){window.cancelAnimationFrame(this.Ns);this.Pb&&(delete this.Pb,this.Pb=null);this.ee&&(this.ee.eo(),delete this.ee,this.ee=null);this.Qg.clear();delete this.Qg;this.od.length=0;delete this.od;delete this.Pb;this.Pb=null;delete this.na;this.na=null;delete this.Fa;this.Fa=null;delete this.b;this.b=null;R(this.wc);delete this.wc;this.wc=null};function rq(){pq.call(this);this.u="renderer2D";this.Wc=null;this.Hd=-1;this.de=[];this.Fx=this.Hp=this.Bx=this.Fp=null;this.Al=this.Cl=this.Xj=this.Yj=0;this.Qb=this.Rb=this.yb=this.wb=this.yx=-1;this.Gx=new Float32Array([-255,-255,-255,-255]);this.Nx=!0}w(rq,pq);rq.prototype.Dv=function(){};rq.prototype.LK=function(){};rq.prototype.pm=function(a){rq.d.pm.call(this,a);var b=this.od[0];if(b){var c="",c=0==this.Hd?"indexX":1==this.Hd?"indexY":"indexZ";b[c]=a.dc?b[c]+1:b[c]-1;eval("this.onScroll();")}};
rq.prototype.MK=function(a){var b=this.od[0];if(b){var c=b.Qb-b.Rb,d=c/2,e=parseInt(c+c/15*-a.jt,10);a=parseInt(d+d/15*a.Ws,10);c==e&&e++;d==a&&a++;b.Rb-=parseInt(d-a,10);b.Rb-=parseInt(c-e,10);b.Rb=Math.max(b.Rb,b.ce);b.Qb-=parseInt(d-a,10);b.Qb+=parseInt(c-e,10);b.Qb=Math.min(b.Qb,b.bc);eval("this.onWindowLevel();")}};rq.prototype.__defineGetter__("orientation",function(){return this.Wc});
rq.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.Hd=2):"SAGITTAL"==a?(a="X",this.Hd=0):"CORONAL"==a&&(a="Y",this.Hd=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Wc=a});rq.prototype.__defineGetter__("radiological",function(){return this.Nx});rq.prototype.__defineSetter__("radiological",function(a){this.Nx=a});f=rq.prototype;
f.sa=function(){if(!this.Wc)throw Error("No 2D orientation set.");rq.d.sa.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.wc.width,this.wc.height);this.Fp=Q("canvas");this.Hp=Q("canvas");F(this.na,fe,this.MK.bind(this))};f.Pk=function(){rq.d.Pk.call(this);sq(this)};f.Bo=function(){rq.d.Bo.call(this);sq(this);var a=this.od[0];a&&(a.Qb=a.bc,a.Rb=a.ce)};
f.vh=function(a){rq.d.vh.call(this,a);var b=!1;this.get(a.nd)&&(b=!0);if(a instanceof J){var c=a.ia,d=a.t,e=a.Gd;if(null!=d&&null!=d.ia&&d.ia.J)this.vh(d);else if(null!=e&&null!=e.ia&&e.ia.J)this.Pb.load(e,a);else{if(null!=c&&g(c))if(null!=a.yh){if(a.yh.lo!=c.length||b&&!a.J)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Pb.load(c[b],a);return}else if(null!=c&&c.J){this.Pb.load(a,a);return}c=this.Wc;this.Hd="X"==c?0:"Y"==c?1:2;this.Xc=a.j[this.Hd].j;e=null;e=0==this.Hd?a.indexX:1==this.Hd?a.indexY:
a.indexZ;c=a.j[this.Hd].j[e].Ex;d=a.j[this.Hd].j[e].Dx;this.Cl=a.j[this.Hd].j[e].Lh;this.Al=a.j[this.Hd].j[e].Eh;this.Yj=c;this.Xj=d;e=this.Fp;e.width=c;e.height=d;var h=this.Hp;h.width=c;h.height=d;this.Bx=e.getContext("2d");this.Fx=h.getContext("2d");b||(this.Qg.add(a),sq(this))}}};function sq(a){var b=Math.min(a.Za/(a.Yj*a.Cl),a.Ja/(a.Xj*a.Al));null!=a.na&&(a.na.O[14]=b)}f.Hr=function(){};
f.cD=function(a,b){var c=this.od[0],d=this.na.O,e=null,h=this.Yj,k=this.Xj,l=null,n=null;if("Y"==this.Wc)e=this.Xc[parseInt(c.indexY,10)],l=e.Lh,n=e.Eh,this.de[0]="red",this.de[1]="blue";else if("Z"==this.Wc)e=this.Xc[parseInt(c.indexZ,10)],l=e.Lh,n=e.Eh,this.de[0]="red",this.de[1]="green";else{e=this.Xc[parseInt(c.indexX,10)];l=e.Eh;n=e.Lh;this.de[0]="green";this.de[1]="blue";var p=h,h=k,k=p}var m=1*d[12],q=-1*d[13],p=Math.max(d[14],.6),d=[this.Za/2,this.Ja/2],l=h*l*p,n=k*n*p,t=d[0]-l/2,d=d[1]-n/
2,t=t+m*p,d=d+q*p;return a>t&&a<t+l&&b>d&&b<d+n?(m=(a-t)/l*h,q=(b-d)/n*k,n=e.aF[4],"X"==this.Wc?(p=h-m,m=q,q=p):"Y"==this.Wc?m=h-m:"Z"==this.Wc&&(m=h-m,q=k-q),m=e.$E+m*e.Lh,q=e.UE+q*e.Eh,m=Ad(m,q,n,1),h=Bd(),Ld(e.NE,m,h),k=Bd(),Ld(e.OE,m,k),e=Math.round((c.e[0].H[0]*k[0]+c.e[0].H[1]*k[1]+c.e[0].H[2]*k[2]+c.e[0].Zs)/c.e[0].Bl),e>=c.e[0].ca?e=c.e[0].ca-1:0>e&&(e=0),m=Math.round((c.e[1].H[0]*k[0]+c.e[1].H[1]*k[1]+c.e[1].H[2]*k[2]+c.e[1].Zs)/c.e[1].Bl),m>=c.e[1].ca?m=c.e[1].ca-1:0>m&&(m=0),q=Math.round((c.e[2].H[0]*
k[0]+c.e[2].H[1]*k[1]+c.e[2].H[2]*k[2]+c.e[2].Zs)/c.e[2].Bl),q>=c.e[2].ca?q=c.e[2].ca-1:0>q&&(q=0),[[e,m,q],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.lh=function(a,b){rq.d.lh.call(this,a,b);if(0!=this.Qg.cb.length){var c=this.od[0],d=null,d=0==this.Hd?c.indexX:1==this.Hd?c.indexY:c.indexZ,e=this.Xc[parseInt(d,10)].Ex,h=this.Xc[parseInt(d,10)].Dx;this.Cl=this.Xc[parseInt(d,10)].Lh;this.Al=this.Xc[parseInt(d,10)].Eh;this.Yj=e;this.Xj=h;var k=this.Za,l=this.Ja,n=this.na.O;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var p=Math.max(n[14],.1);this.b.setTransform(p,0,0,p,0,0);var m=1*n[12],n=-1*n[13],q=null;c.t&&(q=c.t.gt);var t=
this.Xc[parseInt(d,10)],s=t.Ya.Hi,t=t.t,z=null;t&&(z=t.Hi);var y=this.Yj,H=this.Xj,O=this.Bx,N=this.Fx,G=O.getImageData(0,0,y,H),S=N.getImageData(0,0,y,H),Z=G.data,V=S.data,va=Z.length,na=c.bc,xa=c.wb,Oa=c.yb,Ha=c.Rb/na,Pa=c.Qb/na;if(this.yx!=d||this.wb!=xa||this.yb!=Oa||this.Rb!=Ha||this.Qb!=Pa||q&&!bq(q,this.Gx,0)){var ka=this.Fp;ka.width=e;ka.height=h;ka=this.Hp;ka.width=e;ka.height=h;e=0;do{var ka=[0,0,0,0],h=[0,0,0,0],ya=s[e]/255*na,qa=s[e],qa=(qa/255-Ha)/(Pa-Ha),qa=255*qa;ya>=xa&&ya<=Oa&&(ka=
new K(c.Di[0],c.Di[1],c.Di[2]),ka=(new K(c.Bi[0],c.Bi[1],c.Bi[2])).scale(qa).add(ka.scale(255-qa)),ka=[Math.floor(ka.x),Math.floor(ka.y),Math.floor(ka.z),255],t&&(-255==q[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:bq(q,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.Wc?(Z[e]=ka[0],Z[e+1]=ka[1],Z[e+2]=ka[2],Z[e+3]=ka[3],V[e]=h[0],V[e+1]=h[1],V[e+2]=h[2],V[e+3]=h[3]):"Y"==this.Wc?(qa=Math.floor(e/(4*y)),qa=qa*y*4+(4*(y-1)-(e-qa*y*4)),Z[qa]=ka[0],Z[qa+1]=ka[1],Z[qa+2]=ka[2],Z[qa+3]=ka[3],V[qa]=h[0],V[qa+1]=
h[1],V[qa+2]=h[2],V[qa+3]=h[3]):(qa=va-1-e,Z[qa-3]=ka[0],Z[qa-2]=ka[1],Z[qa-1]=ka[2],Z[qa]=ka[3],V[qa-3]=h[0],V[qa-2]=h[1],V[qa-1]=h[2],V[qa]=h[3]);e+=4}while(e<va);O.putImageData(G,0,0);N.putImageData(S,0,0);this.yx=d;this.wb=xa;this.yb=Oa;this.Rb=Ha;this.Qb=Pa;t&&(this.Gx=q)}this.b.globalAlpha=1;this.b.translate(k/2/p,l/2/p);"X"==this.Wc&&(this.b.rotate(.5*Math.PI),d=m,m=n,n=-d);m=-y*this.Cl/2+m;n=-H*this.Al/2+n;this.b.drawImage(this.Fp,m,n,y*this.Cl,H*this.Al);t&&c.t.nb&&(this.b.globalAlpha=c.t.Vc,
this.b.drawImage(this.Hp,m,n,y*this.Cl,H*this.Al));this.ub.SLICENAVIGATORS&&this.Fa.Kp&&this.Fa.ft&&!this.Fa.Pg&&(m=this.Fa.Uc,m=this.cD(m[0],m[1]))&&(c.Fh=m[0][0],c.Gh=m[0][1],c.Hh=m[0][2],c.ha(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Fa.Uc[0],0),this.b.lineTo(this.Fa.Uc[0],this.Fa.Uc[1]-10),this.b.moveTo(this.Fa.Uc[0],this.Fa.Uc[1]+10),this.b.lineTo(this.Fa.Uc[0],this.Ja),this.b.strokeStyle=this.de[0],this.b.stroke(),
this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Fa.Uc[1]),this.b.lineTo(this.Fa.Uc[0]-10,this.Fa.Uc[1]),this.b.moveTo(this.Fa.Uc[0]+10,this.Fa.Uc[1]+.5),this.b.lineTo(this.Za,this.Fa.Uc[1]),this.b.strokeStyle=this.de[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+m[2][0].toFixed(2)+", "+m[2][1].toFixed(2)+", "+m[2][2].toFixed(2),0,0),y=t=n="undefined","undefined"!=typeof c.ic[m[1][2].toFixed(0)]&&
"undefined"!=typeof c.ic[m[1][2].toFixed(0)][m[1][1].toFixed(0)]&&(n=c.ic[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.hb&&(t=c.t.ic[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.t.Nm&&(y=c.t.Nm.get(t),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+m[1][0].toFixed(0)+", "+m[1][1].toFixed(0)+", "+m[1][2].toFixed(0)+")",0,15),c.hb&&this.b.fillText("Labelmap:  "+y+" ("+t+")",0,30))}};v("X.renderer2D",rq);v("X.renderer2D.prototype.init",rq.prototype.sa);
v("X.renderer2D.prototype.add",rq.prototype.add);v("X.renderer2D.prototype.onShowtime",rq.prototype.qB);v("X.renderer2D.prototype.onRender",rq.prototype.oB);v("X.renderer2D.prototype.onScroll",rq.prototype.Dv);v("X.renderer2D.prototype.onWindowLevel",rq.prototype.LK);v("X.renderer2D.prototype.get",rq.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",rq.prototype.Bo);v("X.renderer2D.prototype.xy2ijk",rq.prototype.cD);v("X.renderer2D.prototype.render",rq.prototype.k);
v("X.renderer2D.prototype.destroy",rq.prototype.ie);v("X.renderer2D.prototype.onSliceNavigation",rq.prototype.Hr);function tq(){$c.call(this)}w(tq,$c);v("xiv.vis.RenderEngine",tq);tq.prototype.ID_PREFIX="xiv.vis.RenderEngine";var uq="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{zN:"j",wN:"k",xN:"l"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",uq);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",tq.prototype.ID_PREFIX);function vq(){rq.call(this)}w(vq,rq);v("xiv.vis.XtkRenderer2D",vq);f=vq.prototype;f.Xe=function(){this.Pk()};f.Dv=function(){this.Hr()};f.Ok=function(a){vq.d.Ok.call(this,a);this.dispatchEvent({type:"k",value:a.$j})};f.sa=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;vq.d.sa.call(this);this.Fa.onMouseMove=this.RJ.bind(this);this.Fa.config.MOUSEWHEEL_ENABLED=!1;this.Fa.config.MOUSECLICKS_ENABLED=!1;this.Fa.config.KEYBOARD_ENABLED=!1;this.Fa.sa()};f.Tb=function(){return this.Wc};
f.mG=function(){return this.na};f.mH=function(){return this.Fa.mousePosition};f.$q=function(){};f.RJ=function(){this.dispatchEvent({type:"mouseover",qJ:this.Fa.qJ,AL:this.Fa.shiftDown})};f.Hr=function(){this.dispatchEvent({type:"m",volume:this.od[0],dP:this.od[0]["index"+this.Wc],cP:this.Wc,AL:this.Fa.ft})};f.k=function(){this.wc&&this.b?(vq.d.k.call(this),this.dispatchEvent({type:"l"})):(window.console.log("init"),this.sa(),window.console.log(this.$l().visible))};f.nG=function(){return this.wc};
f.$l=function(){return this.od[0]};f.Vz=function(){if(null!=this.Xc){var a=this.od[0];if(null!=a[J.REORIENTED_DIMENSIONS_KEY]&&"false"==a.reslicing.toString())switch(this.Tb()){case "X":return a[J.REORIENTED_DIMENSIONS_KEY][0];case "Y":return a[J.REORIENTED_DIMENSIONS_KEY][1];case "Z":return a[J.REORIENTED_DIMENSIONS_KEY][2]}return this.Xc.length}};f.jA=function(){return this.na.O[14]};f.tC=function(a){this.na.O[14]=a};function wq(a){.01>a.na.O[14]&&(a.na.O[14]=.01)}
f.Gm=function(){this.na.O[14]+=.03;wq(this)};f.Hm=function(){this.na.O[14]+=-.03;wq(this)};
function xq(a,b,c,d){var e=a.od[0],h=a.na.O,k=null,l=a.Yj,n=a.Xj,p=null,m=null;if(null!=e){"Y"==a.Wc?(k=a.Xc[parseInt(e.indexY,10)],p=k.Lh,m=k.Eh,a.de[0]="red",a.de[1]="blue"):"Z"==a.Wc?(k=a.Xc[parseInt(e.indexZ,10)],p=k.Lh,m=k.Eh,a.de[0]="red",a.de[1]="green"):(k=a.Xc[parseInt(e.indexX,10)],p=k.Eh,m=k.Lh,a.de[0]="green",a.de[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),q=[a.Za/2,a.Ja/2],p=l*p*h,m=n*m*h,t=q[0]-p/2,q=q[1]-m/2,t=t+e*h,q=q+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?t+(a.Yj-b)/l*p:t+b/l*p;b=Math.max(0,b);b=Math.min(b,n);return d?q+(a.Xj-b)/n*m:q+b/n*m}}f.cA=function(a,b){return xq(this,a,"vertical",b)};f.Kz=function(a,b){return xq(this,a,"horizontal",b)};f.ie=function(){vq.d.ie.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",vq.prototype.Xe);v("xiv.vis.XtkRenderer2D.prototype.onScroll",vq.prototype.Dv);v("xiv.vis.XtkRenderer2D.prototype.onProgress",vq.prototype.Ok);
v("xiv.vis.XtkRenderer2D.prototype.init",vq.prototype.sa);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",vq.prototype.Tb);v("xiv.vis.XtkRenderer2D.prototype.getCamera",vq.prototype.mG);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",vq.prototype.mH);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",vq.prototype.$q);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",vq.prototype.Hr);v("xiv.vis.XtkRenderer2D.prototype.render",vq.prototype.k);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",vq.prototype.nG);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",vq.prototype.$l);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",vq.prototype.Vz);v("xiv.vis.XtkRenderer2D.prototype.getZoom",vq.prototype.jA);v("xiv.vis.XtkRenderer2D.prototype.setZoom",vq.prototype.tC);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",vq.prototype.Gm);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",vq.prototype.Hm);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",vq.prototype.cA);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",vq.prototype.Kz);v("xiv.vis.XtkRenderer2D.prototype.destroy",vq.prototype.ie);function yq(){U.call(this)}w(yq,op);v("xiv.ui.ZoomDisplay",yq);yq.ID_PREFIX="xiv.ui.ZoomDisplay";yq.prototype.k=function(a){yq.d.k.call(this,a);this.ga.min=1;P(this.yc,"xiv-ui-framedisplay-text");P(this.ga,"xiv-ui-framedisplay-text")};yq.prototype.Ag=function(){this.yc.innerHTML="Zoom:&nbsp"+this.ga.value+"%";this.Vp()};v("xiv.ui.ZoomDisplay.ID_PREFIX",yq.ID_PREFIX);v("xiv.ui.ZoomDisplay.prototype.updateValue",yq.prototype.Ag);v("xiv.ui.ZoomDisplay.prototype.render",yq.prototype.k);function zq(){U.call(this)}w(zq,op);v("xiv.ui.FrameDisplay",zq);zq.ID_PREFIX="xiv.ui.FrameDisplay";zq.prototype.k=function(a){zq.d.k.call(this,a);P(this.yc,"xiv-ui-framedisplay-text");P(this.ga,"xiv-ui-framedisplay-text")};zq.prototype.Ag=function(){this.yc.innerHTML=this.ga.value+" / "+this.ga.max;this.Vp()};v("xiv.ui.FrameDisplay.ID_PREFIX",zq.ID_PREFIX);v("xiv.ui.FrameDisplay.prototype.updateValue",zq.prototype.Ag);v("xiv.ui.FrameDisplay.prototype.render",zq.prototype.k);function Aq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);U.call(this);this.iz=a;this.vj=b;this.qn=null;this.lb=new fm(this.a());this.$v()}w(Aq,U);v("nrg.ui.ResizeDragger",Aq);Aq.ID_PREFIX="nrg.ui.ResizeDragger";Aq.CSS_SUFFIX={};f=Aq.prototype;f.Dg=null;f.Zh=null;f.Nl=null;f.En=null;f.Wg=null;f.Th=null;f.rq=null;f.Dn=null;f.offsetX=0;f.eC=function(a){this.offsetX=a};f.offsetY=0;f.zL=function(a){this.offsetY=a};f.ab=null;f.Yh=null;f.za=null;f.Sd=null;f.xa=null;f.kc=null;
f.Rd=!1;f.re=new uh(10,10);f.sd=function(){return this.qn};f.ki=function(a){this.qn=a};f.yq=function(){return this.lb};f.Dz=function(){return this.iz};f.ud=function(){return this.a()};
f.Dj=function(){this.Yh=T(this.a());this.ab=Ei(this.a());this.Dg=-1*this.Yh.height/2+this.offsetY;this.Zh=-1*this.Yh.width/2+this.offsetX;this.lb.lg()||this.Rd||(this.za=vb(Ei(this.vj)),this.Sd=vb(T(this.vj)),this.za.left=this.za.x,this.za.top=this.za.y,this.za.right=this.za.x+this.Sd.width,this.za.bottom=this.za.y+this.Sd.height,this.xa=vb(Ei(this.qn)),this.kc=vb(T(this.qn)),this.xa.left=this.xa.x,this.xa.top=this.xa.y,this.xa.right=this.xa.x+this.kc.width,this.xa.bottom=this.xa.y+this.kc.height,
this.Sg&&this.Sg(this))};f.cC=function(a){return this.re=a};f.$v=function(){F(this.lb,"start",this.Cv.bind(this));F(this.lb,"drag",this.Xe.bind(this));F(this.lb,"end",this.uo.bind(this))};f.Cv=function(){this.dispatchEvent({type:"start_resize"})};f.Xe=function(){this.Dj();this.dispatchEvent({type:"resize",hL:this.za,Sd:this.Sd,xF:this.xa,kc:this.kc});null!=this.Ze&&this.Ze()};f.uo=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.lb.lg()||this.Rd||this.Dj()};f.sf=function(){};
f.Cf=function(a,b,c){this.Dj();a=this.sf(a);u(c)&&0===c?(Ci(this.a(),a.end),this.Xe(),this.uo()):Bq(this,a.start,a.end,b,c)};f.HC=function(){null!=this.ph&&(this.ph.stop(),this.Xe(),this.uo())};function Bq(a,b,c,d,e){a.ph=new Uj(a.a(),[b.x,b.y],[c.x,c.y],u(e)?e:500,tk);F(a.ph,"begin",function(){this.Rd=!0;this.Cv()}.bind(a));F(a.ph,"animate",a.Xe.bind(a));F(a.ph,"end",function(){this.Rd=!1;this.ph.g();I(this.ph);this.ph.ie();this.ph=null;Ci(this.a(),c);this.uo();d&&d()}.bind(a));a.ph.play()}
f.f=function(){delete this.JP;delete this.KP;delete this.Zh;delete this.Nl;delete this.En;delete this.Wg;delete this.Th;delete this.rq;delete this.Dn;delete this.Rd;sb(this.re);delete this.re;delete this.vj;delete this.qn;sb(this.ab);delete this.ab;sb(this.Yh);delete this.Yh;sb(this.za);delete this.za;sb(this.Sd);delete this.Sd;sb(this.xa);delete this.xa;sb(this.kc);delete this.kc;R(this.lb.handle);this.lb.handle=null;I(this.lb);this.lb.g();delete this.lb;delete this.iz};
v("nrg.ui.ResizeDragger.EventType",{Gs:"resize",gE:"start_resize",fE:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Aq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Aq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Aq.prototype.Dg);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Aq.prototype.Zh);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Aq.prototype.Nl);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Aq.prototype.En);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Aq.prototype.Wg);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Aq.prototype.Th);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Aq.prototype.rq);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Aq.prototype.Dn);v("nrg.ui.ResizeDragger.prototype.offsetX",Aq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Aq.prototype.eC);v("nrg.ui.ResizeDragger.prototype.offsetY",Aq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Aq.prototype.zL);v("nrg.ui.ResizeDragger.prototype.handlePos",Aq.prototype.ab);v("nrg.ui.ResizeDragger.prototype.handleSize",Aq.prototype.Yh);v("nrg.ui.ResizeDragger.prototype.resizeePos",Aq.prototype.za);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Aq.prototype.Sd);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Aq.prototype.xa);v("nrg.ui.ResizeDragger.prototype.boundarySize",Aq.prototype.kc);v("nrg.ui.ResizeDragger.prototype.isAnimating",Aq.prototype.Rd);
v("nrg.ui.ResizeDragger.prototype.minSize",Aq.prototype.re);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Aq.prototype.sd);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Aq.prototype.ki);v("nrg.ui.ResizeDragger.prototype.getDragger",Aq.prototype.yq);v("nrg.ui.ResizeDragger.prototype.getDirection",Aq.prototype.Dz);v("nrg.ui.ResizeDragger.prototype.getHandle",Aq.prototype.ud);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Aq.prototype.Dj);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Aq.prototype.cC);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Aq.prototype.Cv);v("nrg.ui.ResizeDragger.prototype.onResize",Aq.prototype.Xe);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Aq.prototype.uo);v("nrg.ui.ResizeDragger.prototype.update",Aq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Aq.prototype.sf);v("nrg.ui.ResizeDragger.prototype.stopSlideAnimation",Aq.prototype.HC);
v("nrg.ui.ResizeDragger.prototype.slideToLimits",Aq.prototype.Cf);v("nrg.ui.ResizeDragger.prototype.disposeInternal",Aq.prototype.f);function Cq(a){Aq.call(this,"right",a)}w(Cq,Aq);v("nrg.ui.ResizeDraggerRight",Cq);Cq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Cq.CSS_SUFFIX={};Cq.prototype.Sg=function(){this.Nl=this.za.left+this.re.width+this.Zh;this.En=this.xa.right+this.Zh;this.rq=this.En-this.Nl};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Cq.prototype.Sg);Cq.prototype.Ze=function(){Pi(this.vj,Math.min(Math.max(this.Sd.width+(this.Rd?this.ab.x-this.za.right+this.Zh:this.lb.clientX-this.lb.rw),this.re.width),this.kc.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Cq.prototype.Ze);Cq.prototype.update=function(a){this.lb.lg()||this.Rd||(Cq.d.update.call(this,a),hm(this.lb,new wh(this.Nl,this.za.y,this.rq,0)),Ci(this.a(),this.za.right+this.Zh,this.za.y),Qi(this.a(),this.Sd.height))};Cq.prototype.sf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.Nl,this.ab.y):new rh(this.En,this.ab.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Cq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Cq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Cq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Cq.prototype.sf);function Dq(a){Aq.call(this,"right",a)}w(Dq,Aq);v("nrg.ui.ResizeDraggerBottom",Dq);Dq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Dq.CSS_SUFFIX={};Dq.prototype.Sg=function(){this.Wg=this.za.top+this.re.height+this.Dg;this.Th=this.xa.bottom+this.Dg;this.Dn=this.Th-this.Wg};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Dq.prototype.Sg);Dq.prototype.Ze=function(){Qi(this.vj,Math.max(this.Sd.height+(this.ab.y-this.za.bottom),this.re.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Dq.prototype.Ze);Dq.prototype.update=function(){this.lb.lg()||this.Rd||(Dq.d.update.call(this),hm(this.lb,new wh(this.xa.x,this.Wg,0,this.Th)),Ci(this.a(),this.za.x,this.za.bottom+this.Dg))};Dq.prototype.sf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.ab.x,this.Wg):new rh(this.ab.x,this.Th)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Dq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Dq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Dq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Dq.prototype.sf);function Eq(a){Aq.call(this,"right",a)}w(Eq,Aq);v("nrg.ui.ResizeDraggerTop",Eq);Eq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Eq.CSS_SUFFIX={};Eq.prototype.Sg=function(){this.Wg=this.xa.top-this.Dg;this.Th=this.za.bottom-this.re.height+this.Dg;this.Dn=this.Th-this.Wg};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Eq.Sg);Eq.prototype.Ze=function(){var a=this.ab.y-this.Dg,b=this.Sd.height+(this.Rd?this.za.y-a:this.lb.sw-this.lb.clientY);this.vj.style.top=a.toString()+"px";Qi(this.vj,Math.max(b,this.re.height))};
Eq.prototype.update=function(){this.lb.lg()||this.Rd||(Eq.d.update.call(this),hm(this.lb,new wh(this.xa.x,this.Wg,0,this.Dn)),Ci(this.a(),this.za.x,this.za.y+this.Dg))};Eq.prototype.sf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.ab.x,this.Th):new rh(this.ab.x,this.Wg)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Eq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Eq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Eq.prototype.Sg);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Eq.prototype.Ze);v("nrg.ui.ResizeDraggerTop.resizeMethod",Eq.Ze);v("nrg.ui.ResizeDraggerTop.prototype.update",Eq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Eq.prototype.sf);function Fq(a){Aq.call(this,"right",a)}w(Fq,Aq);v("nrg.ui.ResizeDraggerTopRight",Fq);Fq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Fq.CSS_SUFFIX={};Fq.prototype.Dj=function(){Fq.d.Dj.call(this);this.lb.lg()||this.Rd||(Cq.prototype.Sg.bind(this)(),Eq.prototype.Sg.bind(this)())};Fq.prototype.Xe=function(){Fq.d.Xe.call(this);Cq.prototype.Ze.bind(this)();Eq.prototype.Ze.bind(this)()};
Fq.prototype.update=function(a){this.lb.lg()||this.Rd||(Fq.d.update.call(this,a),hm(this.lb,new wh(this.xa.x+this.Zh,this.xa.y+this.Dg,this.kc.width,this.kc.height)),Ci(this.a(),this.za.right+this.Zh,this.za.y+this.Dg))};
Fq.prototype.sf=function(a){var b=new rh(this.ab.x,this.ab.y),c;"TOP_LEFT"==a?c=new rh(this.xa.x,this.xa.y):"TOP_RIGHT"==a?c=new rh(this.xa.x+this.kc.width,this.xa.y):"BOTTOM_RIGHT"==a?c=new rh(this.xa.x+this.kc.width,this.xa.y+this.kc.height):"BOTTOM_LEFT"==a&&(c=new rh(this.xa.x,this.xa.y+this.kc.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Fq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Fq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Fq.prototype.Dj);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Fq.prototype.Xe);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Fq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Fq.prototype.sf);function Gq(a){Aq.call(this,"right",a)}w(Gq,Aq);v("nrg.ui.ResizeDraggerLeft",Gq);Gq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Gq.CSS_SUFFIX={};Gq.prototype.Ze=function(){Pi(this.vj,Math.min(Math.max(this.Sd.width+(this.za.x-this.ab.x),this.re.width),this.kc.width));Ci(this.a(),this.ab.x,this.za.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Gq.prototype.Ze);
Gq.prototype.update=function(a){this.lb.lg()||this.Rd||(Gq.d.update.call(this,a),hm(this.lb,new wh(this.xa.x-this.Yh.width,this.xa.y,this.kc.width-this.re.width-this.Yh.width,0)),Ci(this.a(),this.za.x-this.Yh.width,this.za.y))};Gq.prototype.sf=function(a){return{start:new rh(this.ab.x,this.ab.y),end:"MIN"==a?new rh(this.xa.x+this.re.width,this.ab.y):new rh(this.xa.x+this.kc.width-this.re.width,this.ab.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Gq.ID_PREFIX);
v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Gq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerLeft.resizeMethod",Gq.Ze);v("nrg.ui.ResizeDraggerLeft.prototype.update",Gq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Gq.prototype.sf);function Hq(a,b){U.call(this);this.q=Lh(a);this.$d={};this.tr=this.ur=20;this.sm(b||Hq.jP)}w(Hq,U);v("nrg.ui.Resizable",Hq);Hq.ID_PREFIX="nrg.ui.Resizable";Hq.CSS_SUFFIX={pM:"boundary"};var Iq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Jq=["RIGHT","BOTTOM"],Kq=new wh(0,0,600,600);f=Hq.prototype;f.sL=function(a,b){this.eP(a);if(0>b)throw Error("Threshold must be greater than zero!");this.$O[a]=b};f.ud=function(a){return this.$d[a].ud()};f.xk=function(a){return this.$d[a]};
f.MG=function(){var a=[];D(nb(this.$d),function(b){a.push(b.ud())});return a};f.sd=function(){return this.Wf};f.ki=function(a){this.Wf=a;if(this.Wf.parentNode!==this.q.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.bC=function(a){this.tr=a};f.dC=function(a){this.ur=a};f.jH=function(){return this.tr};f.kH=function(){return this.ur};
f.sm=function(a){a=a||"DEFAULT";r(a)&&(a="ALL"==a.toUpperCase()?Iq:"DEFAULT"==a.toUpperCase()?Jq:[a]);Lq(this);D(a,function(a){if(!r(a))throw Error("String required!");if(!Ib(Iq,a))throw Error("Invalid direction: ",a);this.cy(a)}.bind(this))};f.Bt=function(a){if(!Ib(Iq,a))throw Error("Invalid draggerDir '"+a);};f.sI=function(a){this.Bt(a);if(!this.$d[a])throw Error("No ResizeDragger for "+a);};f.Cf=function(a,b,c,d){a=a.toUpperCase();this.Bt(a);this.update();this.$d[a].Cf(b,c,d)};
function Mq(a,b){switch(a){case "TOP":return new Eq(b);case "BOTTOM":return new Dq(b);case "LEFT":return new Gq(b);case "RIGHT":return new Cq(b);case "TOP_RIGHT":return new Fq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.cy=function(a){if(a in this.$d)throw Error("Resize direction "+a+" already in use.");this.$d[a]=Mq(a,this.q);F(this.$d[a],"start_resize",this.oK.bind(this));F(this.$d[a],"resize",this.Pk.bind(this));F(this.$d[a],"end_resize",this.nK.bind(this));this.update()};f.update=function(){if(null!=this.Wf){var a=new uh(this.ur,this.tr);C(this.$d,function(b){this.Wf&&this.Wf.parentNode&&Yh(this.Wf.parentNode,b.ud());b.sd()!==this.Wf&&b.ki(this.Wf);b.cC(a);b.Dj();b.update()}.bind(this))}};f.oK=function(){this.dispatchEvent({type:"resize_start"})};
f.Pk=function(a){this.dispatchEvent({type:"resize",hL:a.za,Sd:a.Sd,xF:a.xa,kc:a.kc})};f.nK=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Lq(a){C(a.$d,function(a){a&&(I(a),a.g())});sb(a.$d)}f.f=function(){Hq.d.f.call(this);Lq(this);delete this.$d;this.Wf&&(R(this.Wf.parentNode),delete this.Wf)};v("nrg.ui.Resizable.EventType",{Gs:"resize",gE:"resize_start",fE:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Hq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Hq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Iq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Jq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Kq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",Mq);v("nrg.ui.Resizable.prototype.setBoundThreshold",Hq.prototype.sL);v("nrg.ui.Resizable.prototype.getHandle",Hq.prototype.ud);v("nrg.ui.Resizable.prototype.getResizeDragger",Hq.prototype.xk);v("nrg.ui.Resizable.prototype.getHandles",Hq.prototype.MG);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Hq.prototype.sd);v("nrg.ui.Resizable.prototype.setBoundaryElement",Hq.prototype.ki);v("nrg.ui.Resizable.prototype.setMinHeight",Hq.prototype.bC);v("nrg.ui.Resizable.prototype.setMinWidth",Hq.prototype.dC);v("nrg.ui.Resizable.prototype.getMinHeight",Hq.prototype.jH);v("nrg.ui.Resizable.prototype.getMinWidth",Hq.prototype.kH);v("nrg.ui.Resizable.prototype.setResizeDirections",Hq.prototype.sm);v("nrg.ui.Resizable.prototype.checkDirectionValid",Hq.prototype.Bt);
v("nrg.ui.Resizable.prototype.hasDragger",Hq.prototype.sI);v("nrg.ui.Resizable.prototype.slideToLimits",Hq.prototype.Cf);v("nrg.ui.Resizable.prototype.addResizeDirection",Hq.prototype.cy);v("nrg.ui.Resizable.prototype.update",Hq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Hq.prototype.f);function Nq(a){U.call(this);this.Mb=a}w(Nq,U);v("xiv.ui.layouts.LayoutFrame",Nq);Nq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Nq.CSS_SUFFIX={};f=Nq.prototype;f.Pd=function(){return this.Mb};f.Hc=null;f.P=function(){return this.vp};f.sm=function(a){this.vp=this.vp?this.vp:new Hq(this.a());this.vp.sm(a)};f.f=function(){Nq.d.f.call(this);delete this.Mb};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Nq.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Nq.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Nq.prototype.Pd);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Nq.prototype.P);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Nq.prototype.sm);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Nq.prototype.f);function Oq(){U.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.i={}}w(Oq,U);v("xiv.ui.layouts.Layout",Oq);
var Pq="Slider_"+B(),Qq="FrameDisplay_"+B(),Rq="ZoomDisplay_"+B(),Sq="Crosshairs_"+B(),Tq="PlayButton_"+B(),Uq={qa:Pq,Ad:Qq,kf:Rq,kd:Sq,Nj:Tq};Oq.ID_PREFIX="xiv.ui.layouts.Layout";Oq.CSS_SUFFIX={};f=Oq.prototype;f.qb=20;f.gd=20;f.wL=function(a){this.gd=a};f.xL=function(a){this.qb=a};f.ZG=function(){return this.i};f.nu=function(a){return this.i[a]};f.YG=function(a){window.console.log(a,this.i[a]);var b={};C(Uq,function(c){b[c]=this.i[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};
f.Pd=function(){return this.constructor.TITLE};f.$x=function(a){this.i=this.i?this.i:{};this.i[a.Pd()]=a};f.Vg=function(){this.dispatchEvent({type:"n"})};f.Sv=function(){C(this.Yl(),function(a){null!=a.qa&&(a.qa.g(),delete a.qa);null!=a.kd&&(a.kd.g(),delete a.kd);null!=a.Ad&&(a.Ad.g(),delete a.Ad);null!=a.kf&&(a.kf.g(),delete a.kf);null!=a.Nj&&(a.Nj.g(),delete a.Nj)})};
f.mp=function(){C(this.Yl(),function(a){null!=a.qa&&(a.qa.o(),a.qa.C(a.qa.w()));null!=a.kd&&a.kd.o();null!=a.Ad&&a.Ad.o();null!=a.kf&&a.kf.o();null!=a.Nj&&a.Nj.o()})};f.o=function(){Oq.d.o.call(this);this.Vg()};f.f=function(){Oq.d.f.call(this);delete this.gd;delete this.qb;this.Cn(this.ND);delete this.ND};v("xiv.ui.layouts.Layout.EventType",{Gs:"n"});v("xiv.ui.layouts.Layout.INTERACTORS",Uq);v("xiv.ui.layouts.Layout.ID_PREFIX",Oq.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",Oq.CSS_SUFFIX);
v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Oq.prototype.wL);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Oq.prototype.xL);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Oq.prototype.ZG);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Oq.prototype.nu);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Oq.prototype.YG);v("xiv.ui.layouts.Layout.prototype.getTitle",Oq.prototype.Pd);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Oq.prototype.$x);
v("xiv.ui.layouts.Layout.prototype.dispatchResize",Oq.prototype.Vg);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Oq.prototype.Sv);v("xiv.ui.layouts.Layout.prototype.updateInteractors",Oq.prototype.mp);v("xiv.ui.layouts.Layout.prototype.updateStyle",Oq.prototype.o);v("xiv.ui.layouts.Layout.prototype.disposeInternal",Oq.prototype.f);function Vq(){U.call(this)}w(Vq,U);v("xiv.ui.Crosshairs",Vq);Vq.ID_PREFIX="xiv.ui.Crosshairs";Vq.CSS_SUFFIX={NM:"horizontal",BO:"vertical"};f=Vq.prototype;f.Eg=null;f.jg=null;f.rC=function(a){null!=a&&(this.Eg.style.left=a.toString()+"px")};f.sC=function(a){null!=a&&(this.jg.style.top=a.toString()+"px")};f.k=function(a){this.Eg=Wq(this,"vertical");this.jg=Wq(this,"horizontal");a.appendChild(this.jg);a.appendChild(this.Eg)};
f.hp=function(a){a=!1===a?"hidden":"visible";this.Eg.style.visibility=a;this.jg.style.visibility=a};function Wq(a,b){b=b.toLowerCase();if(!pb(Vq.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return Q("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.Rc+"-"+b.toLowerCase()})}f.f=function(){Vq.d.f.call(this);R(this.Eg);delete this.Eg;R(this.jg);delete this.jg};v("xiv.ui.Crosshairs.EventType",{});v("xiv.ui.Crosshairs.ID_PREFIX",Vq.ID_PREFIX);
v("xiv.ui.Crosshairs.CSS_SUFFIX",Vq.CSS_SUFFIX);v("xiv.ui.Crosshairs.prototype.vertical",Vq.prototype.Eg);v("xiv.ui.Crosshairs.prototype.horizontal",Vq.prototype.jg);v("xiv.ui.Crosshairs.prototype.setX",Vq.prototype.rC);v("xiv.ui.Crosshairs.prototype.setY",Vq.prototype.sC);v("xiv.ui.Crosshairs.prototype.render",Vq.prototype.k);v("xiv.ui.Crosshairs.prototype.toggleVisible",Vq.prototype.hp);v("xiv.ui.Crosshairs.prototype.disposeInternal",Vq.prototype.f);function Xq(a,b){hj.call(this,a);this.qy=null;this.La=new gq;this.VI=b||gd;F(this.La,"change",this.pA,!1,this)}w(Xq,hj);f=Xq.prototype;f.Ha="horizontal";f.Zn=!1;f.sJ=!1;f.Rg=10;f.sr=0;f.EA=!0;f.vr=0;f.XD=1E3;f.Sb=!0;f.Qe=!1;f.B=function(){Xq.d.B.call(this);var a=this.N().B("div",this.U(this.Ha));this.he(a)};f.he=function(a){Xq.d.he.call(this,a);bl(a,this.U(this.Ha));this.Yy();Xk(this.a(),"slider");Yq(this)};
f.fb=function(){Xq.d.fb.call(this);this.Ce=new fm(this.ra);this.bg=new fm(this.qc);this.Ce.aj(this.Qe);this.bg.aj(this.Qe);this.Ce.St=this.bg.St=ea;this.pb=new Yn(this.a());Zq(this,!0);this.a().tabIndex=0;this.uh()};
function Zq(a,b){b?(a.gb().D(a.Ce,"beforedrag",a.Jq).D(a.bg,"beforedrag",a.Jq).D(a.Ce,["start","end"],a.Oq).D(a.bg,["start","end"],a.Oq).D(a.pb,"key",a.Kq).D(a.a(),"click",a.Lq).D(a.a(),"mousedown",a.Lq),a.EA&&$q(a,!0)):(a.gb().rb(a.Ce,"beforedrag",a.Jq).rb(a.bg,"beforedrag",a.Jq).rb(a.Ce,["start","end"],a.Oq).rb(a.bg,["start","end"],a.Oq).rb(a.pb,"key",a.Kq).rb(a.a(),"click",a.Lq).rb(a.a(),"mousedown",a.Lq),a.EA&&$q(a,!1))}f.Ac=function(){Xq.d.Ac.call(this);Cc(this.Ce,this.bg,this.pb,this.Kk)};
f.Jq=function(a){var b=a.$t==this.Ce?this.ra:this.qc,c;"vertical"==this.Ha?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.S()-this.ka())+this.ka()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.S()-this.ka())+this.ka();c=a.$t==this.Ce?Math.min(Math.max(c,this.ka()),this.w()+this.td()):Math.min(Math.max(c,this.w()),this.S());ar(this,b,c)};
f.Oq=function(a){var b="start"==a.type;fl(this.a(),"goog-slider-dragging",b);fl(a.target.handle,"goog-slider-thumb-dragging",b);a=a.$t==this.Ce;b?(this.dispatchEvent("s"),this.dispatchEvent(a?"o":"q")):(this.dispatchEvent("t"),this.dispatchEvent(a?"p":"r"))};
f.Kq=function(a){var b=!0;switch(a.keyCode){case 36:br(this,this.ka());break;case 35:br(this,this.S());break;case 33:cr(this,this.Rg);break;case 34:cr(this,-this.Rg);break;case 37:var c=this.Qe&&this.Se()?1:-1;cr(this,a.shiftKey?c*this.Rg:c*this.lp);break;case 40:cr(this,a.shiftKey?-this.Rg:-this.lp);break;case 39:c=this.Qe&&this.Se()?-1:1;cr(this,a.shiftKey?c*this.Rg:c*this.lp);break;case 38:cr(this,a.shiftKey?this.Rg:this.lp);break;default:b=!1}b&&a.preventDefault()};
f.Lq=function(a){this.a().focus&&this.a().focus();var b=a.target;gi(this.ra,b)||gi(this.qc,b)||(b="click"==a.type,b&&wa()<this.vr+this.XD||(b||(this.vr=wa()),this.sJ?br(this,dr(this,a)):(this.vw(a),this.Ef=er(this,dr(this,a)),this.zA="vertical"==this.Ha?this.hr<this.Ef.offsetTop:this.hr>fr(this,this.Ef)+this.Ef.offsetWidth,a=Kh(this.a()),this.gb().D(a,"mouseup",this.tw,!0).D(this.a(),"mousemove",this.vw),this.pj||(this.pj=new Wf(200),this.gb().D(this.pj,Xf,this.qA)),this.qA(),this.pj.start())))};
f.oA=function(a){cr(this,(0<a.detail?-1:1)*this.lp);a.preventDefault()};f.qA=function(){var a;if("vertical"==this.Ha){var b=this.hr,c=this.Ef.offsetTop;this.zA?b<c&&(a=gr(this,this.Ef)+this.Rg):b>c+this.Ef.offsetHeight&&(a=gr(this,this.Ef)-this.Rg)}else b=this.hr,c=fr(this,this.Ef),this.zA?b>c+this.Ef.offsetWidth&&(a=gr(this,this.Ef)+this.Rg):b<c&&(a=gr(this,this.Ef)-this.Rg);ca(a)&&ar(this,this.Ef,a)};
f.tw=function(){this.pj&&this.pj.stop();var a=Kh(this.a());this.gb().rb(a,"mouseup",this.tw,!0).rb(this.a(),"mousemove",this.vw)};function hr(a,b){var c,d=a.a();c=Ni(b);d=Ni(d);c=new rh(c.x-d.x,c.y-d.y);return"vertical"==a.Ha?c.y:a.Qe&&a.Se()?a.a().clientWidth-c.x:c.x}f.vw=function(a){this.hr=hr(this,a)};
function dr(a,b){var c=a.ka(),d=a.S();if("vertical"==a.Ha){var e=a.ra.offsetHeight,h=a.a().clientHeight-e,e=hr(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.ra.offsetWidth;h=a.a().clientWidth-e;e=hr(a,b)-e/2;return(d-c)*e/h+c}function gr(a,b){if(b==a.ra)return a.La.w();if(b==a.qc)return a.La.w()+a.La.td();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.lg=function(){return this.Ce.lg()||this.bg.lg()};
function cr(a,b){Math.abs(b)<a.Od()&&(b=(0==b?0:0>b?-1:1)*a.Od());var c=gr(a,a.ra)+b,d=gr(a,a.qc)+b,c=hd(c,a.ka(),a.S()-a.sr),d=hd(d,a.ka()+a.sr,a.S());a.yj(c,d-c)}function ar(a,b,c){var d=hq(a.La,c);c=b==a.ra?d:a.La.w();b=b==a.qc?d:a.La.w()+a.La.td();c>=a.ka()&&b>=c+a.sr&&a.S()>=b&&a.yj(c,b-c)}f.yj=function(a,b){this.ka()<=a&&a<=this.S()-b&&this.sr<=b&&b<=this.S()-a&&(a!=this.w()||b!=this.td())&&(this.La.Lk=!0,this.La.Af(0),this.La.C(a),this.La.Af(b),this.La.Lk=!1,this.pA())};f.ka=function(){return this.La.ka()};
f.Lb=function(a){this.La.Lb(a)};f.S=function(){return this.La.S()};f.Eb=function(a){this.La.Eb(a)};function er(a,b){return b<=a.La.w()+a.La.td()/2?a.ra:a.qc}f.pA=function(){this.uh();Yq(this);this.dispatchEvent("change")};
f.uh=function(){if(this.ra&&!this.Zn){var a=ir(this,gr(this,this.ra)),b=ir(this,gr(this,this.qc));if("vertical"==this.Ha)this.ra.style.top=a.y+"px",this.qc.style.top=b.y+"px",this.Xb&&(a=jr(b.y,a.y,this.ra.offsetHeight),this.Xb.style.top=a.offset+"px",this.Xb.style.height=a.size+"px");else{var c=this.Qe&&this.Se()?"right":"left";this.ra.style[c]=a.x+"px";this.qc.style[c]=b.x+"px";this.Xb&&(a=jr(a.x,b.x,this.ra.offsetWidth),this.Xb.style[c]=a.offset+"px",this.Xb.style.width=a.size+"px")}}};
function jr(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function ir(a,b){var c=new rh;if(a.ra){var d=a.ka(),e=a.S(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Ha?(d=a.a().clientHeight-a.ra.offsetHeight,e=Math.round(e*d),c.x=fr(a,a.ra),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.ra.offsetWidth)),c.x=d,c.y=a.ra.offsetTop)}return c}
function br(a,b){b=hd(b,a.ka(),a.S());a.Zn&&a.kq.stop(!0);var c=new fk,d,e=er(a,b),h=a.w(),k=a.td(),l=gr(a,e),n=ir(a,l);d=a.Od();Math.abs(b-l)<d&&(b=hd(l+(b>l?d:-d),a.ka(),a.S()));ar(a,e,b);l=ir(a,gr(a,e));d="vertical"==a.Ha?[fr(a,e),l.y]:[l.x,e.offsetTop];n=new Uj(e,[n.x,n.y],d,100);n.aj(a.Qe);c.add(n);a.Xb&&kr(a,e,h,k,l,c);a.qy&&(e=a.qy.hP(h,b,100),D(e,function(a){c.add(a)}));a.kq=c;a.gb().D(c,"end",a.XF);a.Zn=!0;c.play(!1)}f.Rd=function(){return this.Zn};
function kr(a,b,c,d,e,h){var k=ir(a,c),l=ir(a,c+d);c=k;d=l;b==a.ra?c=e:d=e;"vertical"==a.Ha?(b=jr(l.y,k.y,a.ra.offsetHeight),k=jr(d.y,c.y,a.ra.offsetHeight),e=new Uj(a.Xb,[fr(a,a.Xb),b.offset],[fr(a,a.Xb),k.offset],100),b=new Xj(a.Xb,b.size,k.size,100)):(b=jr(k.x,l.x,a.ra.offsetWidth),k=jr(c.x,d.x,a.ra.offsetWidth),e=new Uj(a.Xb,[b.offset,a.Xb.offsetTop],[k.offset,a.Xb.offsetTop],100),b=new Wj(a.Xb,b.size,k.size,100));e.aj(a.Qe);b.aj(a.Qe);h.add(e);h.add(b)}f.XF=function(){this.Zn=!1};
f.ni=function(a){if(this.Ha!=a){var b=this.U(this.Ha),c=this.U(a);this.Ha=a;this.a()&&(a=this.a(),al(a,b)&&(dl(a,b),bl(a,c)),b=this.Qe&&this.Se()?"right":"left",this.ra.style[b]=this.ra.style.top="",this.qc.style[b]=this.qc.style.top="",this.Xb&&(this.Xb.style[b]=this.Xb.style.top="",this.Xb.style.width=this.Xb.style.height=""),this.uh())}};f.Tb=function(){return this.Ha};
f.f=function(){Xq.d.f.call(this);this.pj&&this.pj.g();delete this.pj;this.kq&&this.kq.g();delete this.kq;delete this.ra;delete this.qc;this.Xb&&delete this.Xb;this.La.g();delete this.La;this.pb&&(this.pb.g(),delete this.pb);this.Kk&&(this.Kk.g(),delete this.Kk);this.Ce&&(this.Ce.g(),delete this.Ce);this.bg&&(this.bg.g(),delete this.bg)};f.lp=1;f.Od=function(){return this.La.Od()};f.Dc=function(a){this.La.Dc(a)};f.w=function(){return this.La.w()};f.C=function(a){ar(this,this.ra,a)};f.td=function(){return this.La.td()};
f.Af=function(a){ar(this,this.qc,this.La.w()+a)};f.ba=function(a){Ui(this.a(),a);a&&this.uh()};function Yq(a){var b=a.a();b&&(Yk(b,"valuemin",a.ka()),Yk(b,"valuemax",a.S()),Yk(b,"valuenow",a.w()),Yk(b,"valuetext",a.VI(a.w())||""))}function $q(a,b){b?(a.Kk||(a.Kk=new pp(a.a())),a.gb().D(a.Kk,"mousewheel",a.oA)):a.gb().rb(a.Kk,"mousewheel",a.oA)}f.Kb=function(a){this.Sb!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Sb=a,Zq(this,a),a||this.tw(),fl(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Sb};function fr(a,b){return a.Qe?Sj(b):b.offsetLeft};function lr(a,b){Xq.call(this,a,b);this.La.Af(0)}w(lr,Xq);lr.prototype.U=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};lr.prototype.Yy=function(){var a=this.a(),b=Nh(document,null,"goog-slider-thumb",a)[0];b||(b=this.kk(),a.appendChild(b));this.ra=this.qc=b};lr.prototype.kk=function(){var a=this.N().B("div","goog-slider-thumb");Xk(a,"button");return a};function mr(){U.call(this)}w(mr,U);v("xiv.ui.PlayButton",mr);mr.ID_PREFIX="xiv.ui.PlayButton";mr.CSS_SUFFIX={Jj:"image"};f=mr.prototype;f.ib=null;f.ao=!1;f.qh=null;f.ea=null;f.kg=70;f.k=function(a){mr.d.k.call(this,a);this.ib=Q("img",{id:"PlayButton_"+B()});P(this.ib,mr.CSS.Jj);this.a().appendChild(this.ib);this.ib.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";F(this.ib,"click",function(){this.ao?(this.ao=!1,this.pause()):(this.ao=!0,this.play())}.bind(this))};
f.pause=function(){this.ib.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";null!=this.qh&&null!=this.ea&&this.ea.stop()};f.play=function(){this.ib.src=serverRoot+"/images/viewer/xiv/ui/other/pause.png";null!=this.qh&&(null==this.ea&&(this.ea=new Wf),this.ea.setInterval(this.kg),this.ea.addEventListener(Xf,function(){this.qh.w()==this.qh.S()?this.qh.C(this.qh.ka()):this.qh.C(this.qh.w()+1)}.bind(this)),this.ea.start())};f.setInterval=function(a){this.kg=a};f.uf=function(){return this.ao};
f.mC=function(a){this.qh=a};f.f=function(){mr.d.f.call(this);R(this.ib);I(this.ib);delete this.ib;null!=this.ea&&(I(this.ea),this.ea.g());delete this.qh;delete this.ao;delete this.ea;delete this.kg};v("xiv.ui.PlayButton.ID_PREFIX",mr.ID_PREFIX);v("xiv.ui.PlayButton.prototype.pause",mr.prototype.pause);v("xiv.ui.PlayButton.prototype.play",mr.prototype.play);v("xiv.ui.PlayButton.prototype.isPlaying",mr.prototype.uf);v("xiv.ui.PlayButton.prototype.setInterval",mr.prototype.setInterval);
v("xiv.ui.PlayButton.prototype.setSlider",mr.prototype.mC);function nr(){this.Wa=[];this.$a=[]}f=nr.prototype;f.dg=function(){return this.Wa.length+this.$a.length};f.jm=function(){return 0==this.Wa.length&&0==this.$a.length};f.clear=function(){this.Wa=[];this.$a=[]};f.contains=function(a){return Ib(this.Wa,a)||Ib(this.$a,a)};f.remove=function(a){var b=Bb(this.Wa,a);if(0>b)return Lb(this.$a,a);zb.splice.call(this.Wa,b,1);return!0};
f.Xh=function(){for(var a=[],b=this.Wa.length-1;0<=b;--b)a.push(this.Wa[b]);for(var c=this.$a.length,b=0;b<c;++b)a.push(this.$a[b]);return a};function or(a){lr.call(this);this.constructor.qp=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.Rc=this.constructor.qp;U.prototype.gq.bind(this)();null!=a&&this.ni(a)}w(or,lr);v("nrg.ui.Slider",or);or.ID_PREFIX="nrg.ui.Slider";or.CSS_SUFFIX={sE:"track",lO:"track-hovered",Hs:"thumb",jO:"thumb-hovered"};f=or.prototype;f.cr=!1;f.js=!1;f.TI=function(){return this.cr};f.pi=function(a){this.js=a};
f.k=function(a){this.q=Q("div",{id:or.ID_PREFIX+"_Widget_"+B()});this.Cb(this.q);a=null!=a?a:document.body;a.appendChild(this.q);this.sh=Q("div",{id:or.ID_PREFIX+"_Track_"+B()});this.q.appendChild(this.sh);this.Ff=Oh("goog-slider-thumb",this.q);F(this,"change",this.GJ.bind(this));F(this,"s",this.vK.bind(this));F(this,"t",this.sK.bind(this));this.ni(this.Tb().toLowerCase())};f.a=function(){return this.q};f.RH=function(){return this.sh};f.LH=function(){return this.Ff};
f.Zp=function(a){null==this.Mj&&(this.Mj={});if(null==this.Mj[a.id]){var b=new pp(a);b.addEventListener("mousewheel",this.hK,!1,this);this.Mj[a.id]=b}};f.vF=function(a){null==this.Kj&&(this.Kj={});if(null==this.Kj[a.id]){var b=new Yn(a);F(b,"key",this.gi.bind(this));this.Kj[a.id]=b}};f.gi=function(){};f.o=function(){var a=this.w(),a=ir(this,a);"horizontal"==this.Tb().toLowerCase()?this.Ff.style.left=a.x.toString()+"px":"vertical"==this.Tb().toLowerCase()&&(this.Ff.style.left=a.y.toString()+"px")};
f.ni=function(a){or.d.ni.call(this,a);this.la&&pr(this,this.Tb().toLowerCase())};function pr(a,b){function c(a,c){Eh(a,[vj(c,"horizontal"),vj(c,"vertical")],[c,vj(c,b)])}c(a.q,a.constructor.Rc);c(a.sh,or.CSS.sE);c(a.Ff,or.CSS.Hs)}f.Nw=!1;f.Ut=1;f.pC=function(a,b){this.Nw=a;u(b)&&(this.Ut=b)};f.hK=function(a){var b=Math.abs(a.Md)<Math.abs(a.Rh)?a.Rh:a.Md;this.Nw?this.C(Math.round(this.w()-b*this.Ut)):this.C(Math.round(this.w()-(0>b?-1:1)));this.dispatchEvent({type:"v"});a.preventDefault()};f.Bg=null;
f.Wz=function(){if(null!=this.Bg){var a=this.Bg.Xh();if(0<a.length)return a[0]}};f.GJ=function(a){a.stopPropagation();null==this.Bg&&(this.Bg=new nr);2>this.Bg.dg()?(a=this.w(),this.Bg.$a.push(a)):(a=this.w(),this.Bg.$a.push(a),a=this.Bg,0==a.Wa.length&&(a.Wa=a.$a,a.Wa.reverse(),a.$a=[]),a.Wa.pop());this.js||this.dispatchEvent({type:"u",value:this.w(),nJ:this.ka(),hJ:this.S()});this.js=!1};f.vK=function(){this.cr=!0};f.sK=function(){this.cr=!1};
f.f=function(){or.d.f.call(this);delete this.js;null!=this.q&&(I(this),R(this.q),delete this.q);null!=this.Ff&&(I(this.Ff),R(this.Ff),delete this.Ff);null!=this.sh&&(I(this.sh),R(this.sh),delete this.sh);null!=this.Kj&&(C(this.Kj,function(a){I(a);a.g()}),sb(this.Kj),delete this.Kj);null!=this.Mj&&(C(this.Mj,function(a){I(a);a.g()}),sb(this.Mj),delete this.Mj);null!=this.MC&&(Jb(this.MC),delete this.MC);null!=this.RC&&(Jb(this.RC),delete this.RC);null!=this.Bg&&(sb(this.Bg),delete this.Bg);delete this.Nw;
delete this.Ut;delete this.cr};v("nrg.ui.Slider.EventType",{mD:"u",mN:"v"});v("nrg.ui.Slider.ID_PREFIX",or.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",or.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendChangeEvent",or.prototype.pi);v("nrg.ui.Slider.prototype.render",or.prototype.k);v("nrg.ui.Slider.prototype.isSliding",or.prototype.TI);v("nrg.ui.Slider.prototype.getPreviousValue",or.prototype.Wz);v("nrg.ui.Slider.prototype.getElement",or.prototype.a);v("nrg.ui.Slider.prototype.getTrack",or.prototype.RH);
v("nrg.ui.Slider.prototype.getThumb",or.prototype.LH);v("nrg.ui.Slider.prototype.bindToMouseWheel",or.prototype.Zp);v("nrg.ui.Slider.prototype.bindToArrowKeys",or.prototype.vF);v("nrg.ui.Slider.prototype.updateStyle",or.prototype.o);v("nrg.ui.Slider.prototype.setOrientation",or.prototype.ni);v("nrg.ui.Slider.prototype.setUseDeltaToScroll",or.prototype.pC);v("nrg.ui.Slider.prototype.disposeInternal",or.prototype.f);function qr(){or.call(this)}w(qr,or);v("xiv.ui.FrameSlider",qr);qr.ID_PREFIX="xiv.ui.FrameSlider";qr.CSS_SUFFIX={};qr.prototype.k=function(){qr.d.k.call(this)};qr.prototype.f=function(){qr.d.f.call(this)};v("xiv.ui.FrameSlider.EventType",{});v("xiv.ui.FrameSlider.ID_PREFIX",qr.ID_PREFIX);v("xiv.ui.FrameSlider.CSS_SUFFIX",qr.CSS_SUFFIX);v("xiv.ui.FrameSlider.prototype.render",qr.prototype.k);v("xiv.ui.FrameSlider.prototype.disposeInternal",qr.prototype.f);function rr(a){Oq.call(this);a=null!=a?a:nb(sr);a=g(a)?a:[a];D(a,function(b,c){a[c]=b.toUpperCase()});tr(this,a);ur(this,a);null!=this.i.X&&this.xe();null!=this.i.Y&&this.xg();null!=this.i.Z&&this.zj();null!=this.i.V&&this.Vo();this.o()}w(rr,Oq);v("xiv.ui.layouts.XyzvLayout",rr);rr.TITLE="XyzvLayout";rr.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var sr={Mg:"X",He:"Y",ml:"Z",wp:"V"};
rr.CSS_SUFFIX={Mg:"x",He:"y",ml:"z",wp:"v",qa:"slider",Ig:"slider-thumb",nE:"slider-thumb-hovered",Bh:"slider-track",UN:"slider-track-x",VN:"slider-track-y",WN:"slider-track-z",KM:"framenumber"};function vr(a,b,c,d,e){this.qa=a;this.Ad=b;this.kd=c;this.kf=d;this.Nj=e}f=rr.prototype;f.JB=0;f.mi=function(a,b){this.i[a].sm(b);var c=this.Vy(a);Yh(this.a(),c);c.style.position="absolute";this.i[a].P().ki(c);this.i[a].P().update()};
f.Vy=function(a){return Q("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":vj(this.constructor.Rc,a.toLowerCase()+"-resizeboundary")})};function tr(a,b){if(b.length>mb(sr))throw Error("Invalid amount of frames "+b+". Must be "+sr);D(b,function(a){if(!pb(sr,a))throw Error("Invalid frame title ",a);}.bind(a))}function ur(a,b){var c="";D(b,function(a,b){c=a.toUpperCase();this.$x(new Nq(c));Yh(this.a(),this.i[c].a());P(this.i[c].a(),rr.CSS[b])}.bind(a))}f.aM=function(a){a.bw(this.Yl())};
f.bw=function(a){this.Ue(function(b,c){null!=a[c]&&(b[Pq]=a[c].qa,R(a[c].qa.a()),b.a().appendChild(a[c].qa.a()),b[Qq]=a[c].Ad,R(a[c].Ad.a()),b.a().appendChild(a[c].Ad.a()),b[Sq]=a[c].kd,b.a().appendChild(a[c].kd.Eg),b.a().appendChild(a[c].kd.jg))})};f.Yx=function(){this.Sv();wr(this);xr(this);yr(this);zr(this);Ar(this)};f.Yl=function(){var a={};this.Ue(function(b,c){a[c]=new vr(b[Pq],b[Qq],b[Sq],b[Rq],b[Tq])});return a};f.Nz=function(a){a=this.i[a];return new vr(a[Pq],a[Qq],a[Sq],a[Rq],a[Tq])};
f.Mz=function(a,b){return this.i[a][b]};f.Jz=function(a){return this.i[a]};function wr(a){var b;a.Ue(function(a,d){b=new or("horizontal");b.k(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[Pq]=b;Eh(b.a(),null,[rr.CSS.qa]);Eh(b.Ff,null,[rr.CSS.Ig]);Eh(b.sh,null,[rr.CSS.Bh,vj(rr.CSS.Bh,d.toLowerCase())])}.bind(a))}function xr(a){var b;a.Ue(function(a){b=new zq;b.k(a.a());a[Qq]=b}.bind(a))}function yr(a){var b;a.Ue(function(a){b=new yq;b.k(a.a());a[Rq]=b}.bind(a))}
function Ar(a){var b;a.Ue(function(a){b=new mr;b.k(a.a());a[Tq]=b}.bind(a))}function zr(a){var b;a.Ue(function(a){b=new Vq;a[Sq]=b;b.k(a.a());a.a().appendChild(b.jg);a.a().appendChild(b.Eg)}.bind(a))}f.Ue=function(a){C(sr,function(b){b=b.toUpperCase();null!=this.i[b]&&"V"!=b&&a(this.i[b],b)}.bind(this))};f.loop=function(a){C(sr,function(b){b=b.toUpperCase();a(this.i[b],b)}.bind(this))};f.xe=function(){null!=this.constructor.CSS&&P(this.i.X.a(),this.constructor.CSS.Mg)};
f.xg=function(){null!=this.constructor.CSS&&P(this.i.Y.a(),this.constructor.CSS.He)};f.wo=function(a){this.Nh();var b=T(this.i.X.a()),c=T(this.i.Y.a()),d=T(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.A.width)};f.zj=function(){null!=this.constructor.CSS&&P(this.i.Z.a(),this.constructor.CSS.ml)};f.Vo=function(){null!=this.constructor.CSS&&P(this.i.V.a(),this.constructor.CSS.wp)};f.We=ea;f.Nk=ea;f.Cr=ea;f.Br=ea;f.Ae=ea;f.bf=ea;f.Be=ea;f.bl=ea;f.f=function(){rr.d.f.call(this);delete this.JB};
v("xiv.ui.layouts.XyzvLayout.TITLE",rr.TITLE);v("xiv.ui.layouts.XyzvLayout.EventType",{});v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",rr.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",sr);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",rr.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",vr);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",rr.prototype.JB);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",rr.prototype.mi);
v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",rr.prototype.Vy);v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",rr.prototype.aM);v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",rr.prototype.bw);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",rr.prototype.Yx);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",rr.prototype.Yl);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",rr.prototype.Nz);
v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",rr.prototype.Mz);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",rr.prototype.Jz);v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",rr.prototype.Ue);v("xiv.ui.layouts.XyzvLayout.prototype.loop",rr.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",rr.prototype.xe);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",rr.prototype.xg);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",rr.prototype.zj);
v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",rr.prototype.Vo);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",rr.prototype.We);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",rr.prototype.Nk);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",rr.prototype.Cr);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",rr.prototype.Br);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",rr.prototype.Ae);
v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",rr.prototype.bf);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",rr.prototype.Be);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",rr.prototype.bl);v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",rr.prototype.f);function Br(){rr.call(this,["X","Y","Z"])}w(Br,rr);v("xiv.ui.layouts.TwoDWidescreen",Br);Br.TITLE="TwoDWidescreen";Br.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";Br.CSS_SUFFIX={Mg:"x",He:"y",ml:"z"};f=Br.prototype;f.xe=function(){Br.d.xe.call(this);this.mi("X",["RIGHT"]);F(this.i.X.P(),"resize",this.We.bind(this));F(this.i.X.P(),"resize_end",this.o.bind(this))};f.xg=function(){Br.d.xg.call(this);this.mi("Y",["BOTTOM"]);F(this.i.Y.P(),"resize",this.Nk.bind(this));F(this.i.Y.P(),"resize_end",this.o.bind(this))};
f.We=function(){this.wo(function(a){var b=a.width,c=Math.max(this.A.width-a.width,this.qb);D(["Y","Z"],function(a){this.i[a].a().style.left=b+"px";this.i[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.Vg()};f.Nk=function(){this.wo(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.A.height-c;this.i.Z.a().style.top=c+"px";this.i.Z.a().style.height=d+"px"}.bind(this));this.Vg()};f.o=function(){Br.d.o.call(this);this.Do();this.Ae();this.Be();this.bf()};
f.Do=function(){if(this.pa.width!==this.A.width||this.pa.height!==this.A.height){var a=1-(this.pa.height-this.A.height)/this.pa.height,b=1-(this.pa.width-this.A.width)/this.pa.width;this.Ue(function(c){frameSize=T(c.a());c.a().style.width=Math.max(frameSize.width*b,this.qb).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.gd).toString()+"px"}.bind(this))}};
f.Ae=function(){var a=this.i.X;a.a().style.height=this.A.height.toString()+"px";pk(a.P().sd(),{left:this.qb,width:this.A.width-2*this.qb});var b=a.P().ud("RIGHT");b.style.left=a.a().style.width;Qi(b,this.A.height);a.P().update()};f.Be=function(){var a=this.i.Y;a.a().style.left=this.i.X.a().style.width;pk(a.P().sd(),{top:this.gd,height:this.A.height-2*this.gd});var b=a.P().ud("BOTTOM");b.style.top=a.a().style.height;Pi(b,parseInt(a.a().style.width));a.P().update()};
f.bf=function(){var a=this.i.Z;a.a().style.left=this.i.X.a().style.width;a.a().style.top=this.i.Y.a().style.height;a.a().style.height=this.A.height-parseInt(this.i.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",Br.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",Br.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",Br.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",Br.prototype.xe);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",Br.prototype.xg);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",Br.prototype.We);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",Br.prototype.Nk);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",Br.prototype.o);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",Br.prototype.Ae);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",Br.prototype.Be);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",Br.prototype.bf);function Cr(a){rr.call(this,a)}w(Cr,rr);v("xiv.ui.layouts.SingleFrameLayout",Cr);Cr.TITLE="SingleFrameLayout";Cr.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";Cr.prototype.Do=function(){if(this.pa.width!==this.A.width||this.pa.height!==this.A.height){var a=this.pa.height*(1-(this.pa.height-this.A.height)/this.pa.height),b=this.pa.width*(1-(this.pa.width-this.A.width)/this.pa.width);this.loop(function(c){null!=c&&Oi(c.a(),Math.max(b,this.qb),Math.max(a,this.gd))}.bind(this))}};
Cr.prototype.o=function(){Cr.d.o.call(this);this.Do()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",Cr.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",Cr.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",Cr.prototype.o);function Dr(){rr.call(this,"V");P(this.i.V.a(),vj(Nq.Rc,this.constructor.TITLE))}w(Dr,Cr);v("xiv.ui.layouts.ThreeD",Dr);Dr.TITLE="ThreeD";Dr.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",Dr.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",Dr.ID_PREFIX);function Er(){rr.call(this,"X");P(this.i.X.a(),vj(Nq.Rc,this.constructor.TITLE.toLowerCase()))}w(Er,Cr);v("xiv.ui.layouts.Sagittal",Er);Er.TITLE="Sagittal";Er.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",Er.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",Er.ID_PREFIX);function Fr(){rr.call(this)}w(Fr,rr);v("xiv.ui.layouts.Conventional",Fr);Fr.TITLE="Conventional";Fr.ID_PREFIX="xiv.ui.layouts.Conventional";Fr.CSS_SUFFIX={Mg:"x",He:"y",ml:"z",wp:"v",QO:"v-boundary"};f=Fr.prototype;f.xe=function(){Fr.d.xe.call(this);this.mi("X",["RIGHT","TOP_RIGHT"]);F(this.i.X.P(),"resize",this.We.bind(this));F(this.i.X.P(),"resize_end",this.o.bind(this))};f.xg=function(){Fr.d.xg.call(this)};
f.zj=function(){Fr.d.zj.call(this);this.mi("Z",["RIGHT","TOP_RIGHT"]);F(this.i.Z.P(),"resize",this.Cr.bind(this));F(this.i.Z.P(),"resize_end",this.o.bind(this))};f.Vo=function(){Fr.d.Vo.call(this);this.mi("V","BOTTOM");F(this.i.V.P(),"resize",this.Br.bind(this));F(this.i.V.P(),"resize_end",this.o.bind(this))};function Gr(a,b){a.Nh();var c=T(a.i.X.a()),d=T(a.i.Y.a()),e=T(a.i.Z.a());b(c,d,e)}
f.We=function(){Gr(this,function(a,b,c){var d=Math.max(this.A.width-a.width-c.width,this.qb),e=c.width,h=this.A.height-a.height;this.qb==d&&(e=Math.max(this.A.width-a.width-b.width,this.qb),Ci(this.i.X.a(),e,h));Ci(this.i.Z.a(),0,h);Oi(this.i.Z.a(),e,a.height);Ci(this.i.Y.a(),c.width+a.width,h);Oi(this.i.Y.a(),d,a.height);Oi(this.i.V.a(),this.A.width,this.A.height-a.height)}.bind(this));this.Vg()};
f.Cr=function(){Gr(this,function(a,b,c){var d=Math.max(this.A.width-c.width-b.width,this.qb),e=b.width,h=this.A.height-c.height;this.qb==d&&(e=Math.max(this.A.width-c.width-a.width,this.qb));Ci(this.i.X.a(),c.width,h);Oi(this.i.X.a(),d,c.height);Ci(this.i.Y.a(),c.width+d,h);Oi(this.i.Y.a(),e,b.height);Oi(this.i.V.a(),this.A.width,this.A.height-c.height)}.bind(this));this.Vg()};
f.Br=function(){this.Nh();var a=parseInt(this.i.V.a().style.height),b=this.A.height-a;C(this.i,function(c){c!==this.i.V&&pk(c.a(),{top:a,height:b})}.bind(this));this.Ae();this.Be();this.Vg()};f.o=function(){Fr.d.o.call(this);this.bl();this.Lw();this.Mw();this.Ae();this.Be();this.bf()};f.Lw=function(){var a=parseInt(this.i.V.a().style.height),b=Math.max(this.A.height-a,this.gd);this.Ue(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};
f.Mw=function(){var a,b=1-(this.pa.width-this.A.width)/this.pa.width;this.pa.width!==this.A.width&&this.Ue(function(c){a=T(c.a());c.a().style.width=Math.max(a.width*b,this.qb).toString()+"px"}.bind(this))};
function Hr(a,b){var c=a.i.V.P().xk("BOTTOM"),d=a.i[b].P().sd(),e=Ei(a.i[b].a()),h=T(a.i[b].a());Ci(d,parseInt(d.style.left),a.gd);Oi(d,a.A.width-3*a.qb,a.A.height-2*a.gd);d=a.i[b].P().ud("RIGHT");Ci(d,e.x+h.width,e.y);Qi(d,a.A.height-c.ab.y);Ci(a.i[b].P().ud("TOP_RIGHT"),e.x+h.width,e.y);a.i[b].P().update()}f.Ae=function(){this.i.X.a().style.left=this.i.Z.a().style.width;pk(this.i.X.P().sd(),{left:2*this.qb});Hr(this,"X")};
f.Be=function(){this.i.Y.a().style.left=(parseInt(this.i.Z.a().style.width)+parseInt(this.i.X.a().style.width)).toString()+"px"};f.bf=function(){pk(this.i.Z.P().sd(),{left:this.qb});Hr(this,"Z")};
f.bl=function(){if(this.pa.width!==this.A.width||this.pa.height!==this.A.height){var a=T(this.i.V.a());Oi(this.i.V.a(),this.A.width,Math.max(a.height*(1-(this.pa.height-this.A.height)/this.pa.height),this.gd))}Ci(this.i.V.P().sd(),this.A.width,this.gd);Oi(this.i.V.P().sd(),this.A.width-3*this.qb,this.A.height-2*this.gd);a=this.i.V.P().ud("BOTTOM");Ci(a,0,T(this.i.V.a()).height);Pi(a,this.A.width);this.i.V.P().update()};v("xiv.ui.layouts.Conventional.TITLE",Fr.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",Fr.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",Fr.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",Fr.prototype.xe);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",Fr.prototype.xg);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",Fr.prototype.zj);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",Fr.prototype.Vo);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Z",Fr.prototype.Cr);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",Fr.prototype.We);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",Fr.prototype.Br);v("xiv.ui.layouts.Conventional.prototype.updateStyle",Fr.prototype.o);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",Fr.prototype.Ae);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",Fr.prototype.Be);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",Fr.prototype.bf);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",Fr.prototype.bl);function Ir(){rr.call(this,"Z");P(this.i.Z.a(),vj(Nq.Rc,this.constructor.TITLE))}w(Ir,Cr);v("xiv.ui.layouts.Transverse",Ir);Ir.TITLE="Transverse";Ir.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",Ir.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",Ir.ID_PREFIX);function Jr(){rr.call(this)}w(Jr,rr);v("xiv.ui.layouts.FourUp",Jr);Jr.TITLE="Four-Up";Jr.ID_PREFIX="xiv.ui.layouts.FourUp";Jr.CSS_SUFFIX={Mg:"x",He:"y",ml:"z",wp:"v"};f=Jr.prototype;f.xe=function(){Jr.d.xe.call(this);this.mi("X",["RIGHT","TOP","TOP_RIGHT"]);F(this.i.X.P(),"resize",this.We.bind(this));F(this.i.X.P(),"resize_end",this.o.bind(this))};
f.We=function(){var a=Ei(this.i.X.a()),b=T(this.i.X.a());Ci(this.i.Y.a(),b.width,a.y);Oi(this.i.Y.a(),this.A.width-b.width,b.height);Ci(this.i.Z.a(),0,0);Oi(this.i.Z.a(),b.width,a.y);Ci(this.i.V.a(),b.width,0);Oi(this.i.V.a(),this.A.width-b.width,a.y);a=this.i.X.P().xk("RIGHT").ud();a.style.top="0px";a.style.height=this.A.height.toString()+"px";this.Vg()};f.o=function(){Jr.d.o.call(this);this.Do();this.bf();this.bl();this.Ae();this.Be()};
f.Do=function(){if(this.pa.width!==this.A.width||this.pa.height!==this.A.height){var a=this.pa.height*(1-(this.pa.height-this.A.height)/this.pa.height)/2,b=this.pa.width*(1-(this.pa.width-this.A.width)/this.pa.width)/2;this.loop(function(c){Oi(c.a(),Math.max(b,this.qb),Math.max(a,this.gd))}.bind(this))}};
f.Ae=function(){this.i.X.a().style.top=this.i.Z.a().style.height;Ci(this.i.X.P().sd(),this.qb,this.gd);Oi(this.i.X.P().sd(),this.A.width-2*this.qb,this.A.height-2*this.gd);var a=this.i.X.P().xk("TOP").ud();a.style.left="0px";a.style.width=this.A.width.toString()+"px";this.i.X.P().update();a=this.i.X.P().xk("RIGHT").ud();a.style.top="0px";a.style.height=this.A.height.toString()+"px"};f.Be=function(){this.i.Y.a().style.left=this.i.Z.a().style.width;this.i.Y.a().style.top=this.i.Z.a().style.height};
f.bf=function(){};f.bl=function(){this.i.V.a().style.left=this.i.Z.a().style.width};f.f=function(){Jr.d.f.call(this)};v("xiv.ui.layouts.FourUp.TITLE",Jr.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",Jr.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",Jr.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",Jr.prototype.xe);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",Jr.prototype.We);v("xiv.ui.layouts.FourUp.prototype.updateStyle",Jr.prototype.o);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",Jr.prototype.Ae);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",Jr.prototype.Be);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",Jr.prototype.bf);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",Jr.prototype.bl);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",Jr.prototype.f);function Kr(){rr.call(this,["X","Y","Z"])}w(Kr,rr);v("xiv.ui.layouts.TwoDRow",Kr);Kr.TITLE="TwoDRow";Kr.ID_PREFIX="xiv.ui.layouts.TwoDRow";Kr.CSS_SUFFIX={Mg:"x",He:"y",ml:"z"};f=Kr.prototype;f.xe=function(){Kr.d.xe.call(this);this.mi("X",["RIGHT"]);F(this.i.X.P(),"resize",this.We.bind(this));F(this.i.X.P(),"resize_end",this.o.bind(this))};f.xg=function(){Kr.d.xg.call(this);this.mi("Y",["RIGHT"]);F(this.i.Y.P(),"resize",this.Nk.bind(this));F(this.i.Y.P(),"resize_end",this.o.bind(this))};f.zj=function(){Kr.d.zj.call(this)};
f.wo=function(a){this.Nh();var b=T(this.i.X.a()),c=T(this.i.Y.a()),d=T(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.A.width)};f.We=function(){this.wo(function(a,b,c){b=Math.max(this.A.width-a.width-c.width,this.qb);var d=this.A.height-a.height;Ci(this.i.Y.a(),a.width,d);Oi(this.i.Y.a(),b,a.height);Ci(this.i.Z.a(),a.width+b,d);Oi(this.i.Z.a(),c.width,a.height)}.bind(this));this.Vg()};
f.Nk=function(){this.wo(function(a,b){var c=this.A.height-b.height;Ci(this.i.X.a(),0,c);Oi(this.i.X.a(),a.width,b.height);Ci(this.i.Z.a(),a.width+b.width,c);Oi(this.i.Z.a(),this.A.width-a.width-b.width,b.height)}.bind(this));this.Vg()};f.o=function(){Kr.d.o.call(this);this.Mw();this.Lw();this.Ae();this.Be();this.bf()};f.Lw=function(){var a=this.A.height.toString()+"px";this.Ue(function(b){b.a().style.height=a})};
f.Mw=function(){var a,b=1-(this.pa.width-this.A.width)/this.pa.width;this.pa.width!==this.A.width&&this.Ue(function(c){a=T(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.qb).toString()+"px"}.bind(this))};function Lr(a,b){var c=a.i[b].P().sd(),d=Ei(a.i[b].a()),e=T(a.i[b].a());Ci(c,parseInt(c.style.left),a.gd);Oi(c,a.A.width-3*a.qb,a.A.height-2*a.gd);c=a.i[b].P().ud("RIGHT");Ci(c,d.x+e.width,d.y);Qi(c,a.A.height);a.i[b].P().update()}
f.Ae=function(){pk(this.i.X.P().sd(),{left:this.qb});Lr(this,"X")};f.Be=function(){this.i.Y.a().style.left=this.i.X.a().style.width;pk(this.i.Y.P().sd(),{left:2*this.qb});Lr(this,"Y")};f.bf=function(){this.i.Z.a().style.left=(parseInt(this.i.X.a().style.width)+parseInt(this.i.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",Kr.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",Kr.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",Kr.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",Kr.prototype.xe);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",Kr.prototype.xg);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",Kr.prototype.zj);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",Kr.prototype.We);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",Kr.prototype.Nk);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",Kr.prototype.o);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",Kr.prototype.Ae);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",Kr.prototype.Be);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",Kr.prototype.bf);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function Mr(){rr.call(this,"Y");P(this.i.Y.a(),vj(Nq.Rc,this.constructor.TITLE.toLowerCase()))}w(Mr,Cr);v("xiv.ui.layouts.Coronal",Mr);Mr.TITLE="Coronal";Mr.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",Mr.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",Mr.ID_PREFIX);function Nr(){U.call(this);this.constructor.hx={};this.constructor.hx[Jr.TITLE]=Jr;this.constructor.hx[Fr.TITLE]=Fr;this.il={};this.tj={};this.ri={}}w(Nr,U);v("xiv.ui.layouts.LayoutHandler",Nr);Nr.ID_PREFIX="xiv.ui.layouts.LayoutHandler";Nr.CSS_SUFFIX={};f=Nr.prototype;f.sb=null;f.vd=null;f.Pu=!1;f.Mi=null;f.ze=null;f.uy=!0;f.XI=function(){return this.Pu};f.nF=function(a){this.uy=a};f.Bz=function(){return this.sb[this.bd]};f.Cz=function(a){return this.sb[this.bd].nu(a)};
f.mp=function(){null!=this.vd&&this.vd.mp()};f.Dq=function(){return null!=this.vd?this.vd.Yl():null};function Or(a){var b=[];a=a.vd.Yl();C(a,function(a){C(a,function(a){b.push(a.a())})});return b}f.fH=function(a){return null!=this.vd?this.vd.Nz(a):null};f.eH=function(a){return null!=this.vd?this.vd.Jz(a):null};f.Rz=function(a,b){return null!=this.vd?this.vd.Mz(a,b):null};f.$B=function(a){this.li(a);null!=this.vd&&this.vd.Sv();this.sb[a].Yx();this.vd=this.sb[a]};
f.Zx=function(a,b){if(void 0 in this.il)throw Error(a+" is an already used layout title!");b&&(this.il[a]=b)};f.li=function(a,b){if(!(a in this.il))throw Error("Invalid layout: "+a+"!");null==this.sb&&(this.sb={});a in this.sb||(this.sb[a]=new this.il[a],F(this.sb[a],"n",this.Dr.bind(this)),Pr(this.sb[a]),Yh(this.a(),this.sb[a].a()));this.Lr=this.bd;this.bd=a;this.KC(!1===b?0:500)};
function Qr(a){var b;C(a.sb[a.bd].i,function(a,d){b=this.Rz(d,Pq);null!=b&&null==a[Rr]&&(b.Zp(a.a()),a[Rr]=!0)}.bind(a))}f.Dr=function(){this.dispatchEvent({type:"z"})};f.KC=function(a){a=u(a)&&0<=a?a:500;this.Lr==this.bd?Qr(this):this.Lr?this.uy?Sr(this,a):Sr(this,0):(Tr(this,this.bd),Ur(this,this.bd))};function Vr(a,b,c){D(bi(b.a()),function(a){null!=this.tj[c]||(this.tj[c]=[]);this.tj[c].push(a)}.bind(a))}function Wr(a){C(a.ri,function(a){Yh(this.a().parentNode,a)}.bind(a))}
function Xr(a,b){var c=[];C(a.ri,function(a,e){c=Mb(c,Jk(a,this.Mi[e],this.ze[e],b))}.bind(a));return c}
function Sr(a,b){var c=a.sb[a.bd].i,d;Tr(a,a.bd);Ur(a,a.bd);null!=a.Mi&&sb(a.Mi);null!=a.ze&&sb(a.ze);a.Mi={};a.ze={};C(a.sb[a.Lr].i,function(a,b){d=a.a().cloneNode(!1);this.ri[b]=d;Vr(this,a,b);C(this.tj,function(a,b){D(a,function(a){R(a);null!=this.ri[b]&&this.ri[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=Ik(a.a(),c[b].a());this.Mi[b]=k.rF;this.ze[b]=k.YL}else this.Mi[b]={"z-index":0},this.ze[b]={opacity:0}}.bind(a));Wr(a);Kk(Xr(a,b),a.xv.bind(a),a.yv.bind(a),a.wv.bind(a))}
f.xv=function(){this.vA();this.Pu=!0;this.dispatchEvent({type:"w",Gw:this.ri})};var Rr=B();f=Nr.prototype;f.yv=function(){this.dispatchEvent({type:"y",Gw:this.ri})};
f.wv=function(){var a=this.sb[this.bd].i;C(a,function(a,c){null!=this.tj[c]&&D(this.tj[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.ze[c]&&pk(a.a(),this.ze[c])}.bind(this));this.sb[this.bd]!==this.vd&&this.sb[this.bd].bw(this.Dq());Yr(this);this.Pu=!1;Tr(this,this.bd);Ur(this,this.bd);Zr(this);this.dispatchEvent({type:"x",frames:a});Qr(this);this.o()};function Ur(a,b){a.sb[b].a().style.opacity=1;a.sb[b].o()}
function Tr(a,b){a.sb[b].a().style.visibility="visible";a.sb[b].o()}f.vA=function(){C(this.sb,function(a){a.a().style.visibility="hidden";a.o()}.bind(this))};function Yr(a){C(a.ri,function(a){R(a);delete a})}function Pr(a){C(a.i,function(a){F(a.a(),"dblclick",function(){})})}f.TJ=function(a){this.LP.push(a)};f.o=function(){Nr.d.o.call(this);this.sb[this.bd].o()};
function Zr(a){null!=a.Mi&&(C(a.Mi,function(a){sb(a)}),sb(a.ze),delete a.ze);null!=a.ze&&(C(a.ze,function(a){sb(a)}),sb(a.ze),delete a.ze)}f.f=function(){Nr.d.f.call(this);Zr(this);delete this.ri;sb(this.tj);delete this.tj;delete this.vd;this.Cn(this.sb);delete this.sb;sb(this.il);delete this.il;delete this.bd;delete this.Lr};v("xiv.ui.layouts.LayoutHandler.EventType",{XM:"w",WM:"x",YM:"y",Gs:"z"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",Nr.ID_PREFIX);
v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",Nr.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",Rr);v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",Nr.prototype.XI);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",Nr.prototype.nF);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",Nr.prototype.Bz);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",Nr.prototype.Cz);
v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",Nr.prototype.mp);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",Nr.prototype.Dq);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsElements",Nr.prototype.pP);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",Nr.prototype.fH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",Nr.prototype.eH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",Nr.prototype.Rz);
v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",Nr.prototype.$B);v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",Nr.prototype.Zx);v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",Nr.prototype.li);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",Nr.prototype.KC);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",Nr.prototype.vA);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",Nr.prototype.TJ);
v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",Nr.prototype.o);v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",Nr.prototype.f);function $r(a,b){this.x=a;this.y=b}w($r,rh);f=$r.prototype;f.clone=function(){return new $r(this.x,this.y)};f.ng=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=rh.prototype.scale;f.Db=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.ng())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.Ec=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.Rl=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ri(){U.call(this);this.ib=Q("img",{id:"nrg.ui.Thumbnail_"+B()});Yh(this.a(),this.ib);this.$e=Q("div",{id:"DisplayText_"+B()});Yh(this.a(),this.$e);this.$v();this.a().className=ri.Rc;this.ib.className=ri.CSS.Jj;this.$e.className=ri.CSS.jl}w(ri,U);v("nrg.ui.Thumbnail",ri);ri.ID_PREFIX="nrg.ui.Thumbnail";ri.CSS_SUFFIX={Jj:"image",jl:"text",MN:"selected",WD:"mouseover",PM:"image-mouseover",dO:"text-mouseover",ex:"highlight",Gj:"active",fx:"image-active",qx:"text-active"};f=ri.prototype;
f.Dy=null;f.Yq=!1;f.SG=function(){return this.ib};f.PB=function(a){this.Dy=a;this.ib.onerror=function(){this.ib.onerror="";this.ib.src=this.Dy}.bind(this)};f.JH=function(){return this.$e};f.ru=function(){for(var a=this.$e;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};
f.vB=function(a,b){null!=a||(a=500);var c=0;null==this.ea&&(this.ea=new Wf);this.ea.setInterval(50);this.ea.addEventListener(Xf,function(){c+=50;this.a().style.opacity=c/50%2;c>=a&&(this.ea.stop(),this.ea.g(),delete this.ea,this.a().style.opacity=1,null!=b&&b())}.bind(this));this.ea.start()};f.dh=function(){return this.Yq};f.aw=function(a){this.ib.src=a;this.ib.className=ri.CSS.Jj};f.So=function(a){this.$e.innerHTML=a};
f.setActive=function(a,b){var c=this.a();(this.Yq=a)?(b&&P(c,ri.CSS.ex),P(c,ri.CSS.Gj),P(this.$e,ri.CSS.qx),P(this.ib,ri.CSS.fx)):(Ch(c,ri.CSS.ex),Ch(c,ri.CSS.Gj),Ch(this.$e,ri.CSS.qx),Ch(this.ib,ri.CSS.fx))};f.o=function(a){a&&this.a()&&pk(this.a(),a)};f.$v=function(){Wc(this.a(),"A")&&Vc("A");F(this.a(),"click",function(){this.dispatchEvent({type:"A"})}.bind(this))};f.f=function(){ri.d.f.call(this);I(this);I(this.a());R(this.ib);delete this.ib;R(this.$e);delete this.$e;delete this.bP;delete this.Yq};
v("nrg.ui.Thumbnail.EventType",{sM:"A"});v("nrg.ui.Thumbnail.ID_PREFIX",ri.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",ri.CSS_SUFFIX);v("nrg.ui.Thumbnail.prototype.getImage",ri.prototype.SG);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",ri.prototype.PB);v("nrg.ui.Thumbnail.prototype.getTextElement",ri.prototype.JH);v("nrg.ui.Thumbnail.prototype.getText",ri.prototype.ru);v("nrg.ui.Thumbnail.prototype.isActive",ri.prototype.dh);v("nrg.ui.Thumbnail.prototype.setImage",ri.prototype.aw);
v("nrg.ui.Thumbnail.prototype.setText",ri.prototype.So);v("nrg.ui.Thumbnail.prototype.setActive",ri.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",ri.prototype.o);v("nrg.ui.Thumbnail.prototype.pulse",ri.prototype.vB);v("nrg.ui.Thumbnail.prototype.disposeInternal",ri.prototype.f);function as(){this.Vk=Q("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.Rc});rl.call(this,"",this.Vk,!0);P(this.Hb,as.CSS.iE);this.of.style.marginTop="-4px";this.Hb.style.marginTop="0px"}w(as,rl);v("nrg.ui.ZippyTree",as);var vn="C",bs={zM:"B",YD:vn};as.ID_PREFIX="nrg.ui.ZippyTree";as.CSS_SUFFIX={iE:"rootnode"};f=as.prototype;f.Ik=1;f.cj=!1;f.OI=!0;f.Vq=1;f.bu=0;f.Wr=null;f.If=null;f.Yv=function(a){this.cz=a};f.jm=function(){return 0===bi(this.of).length};
f.Qy=function(){this.jp(function(a){a.ac.ec(!1)},this)};f.un=function(){this.Qy()};f.vz=function(){var a=[];this.jp(function(b){a.push(b)},this);return a};f.uu=function(){var a=[];C(this.Gc,function(b){a.push(b)});return a};function cs(a,b,c,d){c==d?a.ms.push(b):C(b.Gc,function(a){cs(this,a,c+1,d)}.bind(a))}f.Uz=function(a){this.ms=[];cs(this,this,0,a);a=Nb(this.ms);Jb(this.ms);delete this.ms;return a};f.Tl=function(){this.jp(function(a){a.ac.ec(!0)},this)};
f.jp=function(a,b){C(b.Gc,function(b){a(b);this.jp(a,b)}.bind(this))};f.a=function(){return this.Vk};f.ec=function(a,b){return ds(this,a,b,!0)};function ds(a,b,c,d){c=null!=c?c:a;if(null!=c.Gc[b]){var e=c.Gc[b],h=e.ac;null!=h.nf?Tc(h,d?"a":"b",function(){h.ag!=d&&e.ec(d)}):e.ec(d);return e}}f.Ho=function(a,b){return ds(this,a,b,!1)};f.zq=function(a){var b=this,c=[];D(a,function(a){c.push(b.Gc[a]);b=b.Gc[a]}.bind(this));return c};
f.mf=function(a,b){!g(a)||fi(a)?es(this,a,b):D(a,function(a){this.mf(a,b)}.bind(this))};function es(a,b,c){c?(c&&(c=r(c)?[c]:c,c.length>a.Ik&&(a.Ik=c.length)),a.xn(c,a,b)):Yh(a.Vk,b)}
f.xn=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.of;if(0==a.length)fs(this,b,c),null!=c&&gs(this,c,d-2);else{0<a.length&&a.length>this.Ik&&(this.Ik=a.length);if(b.Gc[a[0]])e=b.Gc[a[0]];else{var h=a[0];e.style.opacity=this.Vq;var k=new rl(h,e,!1);b.Hb.parentNode==this.Vk&&2==this.Vk.childNodes.length&&(k.Hb.style.marginTop="5px");k.Hb.style.left="inherit";k.Hb.style.width="inherit";is(this,k);b.Gc[h]=k;k.Hb.style.opacity=this.Vq;e.style.opacity=1;this.cj&&js(this,k.Hb);this.dispatchEvent({type:vn,
se:k});e=k}gs(this,e.Hb,d-1);this.xn(1<a.length?a.slice(1):[],e,c,d+1)}};function gs(a,b,c){null!=b&&b._maxDepth!=a.Ik&&(null==b._maxDepth&&(b._maxDepth=a.Ik),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}
f.Ur=function(a,b,c,d){b=null!=b?b:0;D(this.vz(),function(e){F(e,"c",function(){timer=new Wf;timer.setInterval(10);timer.addEventListener(Xf,function(){a.style.height=(T(this.a()).height+b).toString()+"px";null!=c&&c()}.bind(this));timer.start();Tc(e,e.ac.ag?"b":"a",function(){timer.stop();delete timer;null!=c&&c();null!=d&&d()}.bind(this))}.bind(this))}.bind(this))};
function is(a,b){F(b,"a",function(){this.dispatchEvent({type:"a",se:b})}.bind(a));F(b,"c",function(){this.dispatchEvent({type:"c",se:b})}.bind(a));F(b,"b",function(){this.dispatchEvent({type:"b",se:b})}.bind(a))}function js(a,b){(new ak(b,a.bu)).play()}f.WK=function(){this.cj&&!this.If.uf()&&this.If.play()};f.$L=function(a){this.Vq=(this.cj=!0===a)?0:1;this.bu=this.cj?300:0;this.cj&&(ks(this),this.Wr=[],this.If=new fk,F(this.If,"end",this.Oy.bind(this)))};
function fs(a,b,c){if(null!=c){var d=b.of;a=function(){pk(c,{position:"relative"});c.style.opacity=0;vk(c,300);null!=this.cz?this.cz(d,c):d.appendChild(c);ls(d);this.cj?js(this,c,function(){this.dispatchEvent({type:"B"})}.bind(this)):this.dispatchEvent({type:"B"})}.bind(a);b.Au()&&!b.mr&&b.Tv(!0);a()}}
function ls(a){var b=[],c=[],d=bi(a),e=d.length;D(d,function(a){al(a,rl.CSS.rp)?b.push(a):1==a.childNodes.length&&al(a.childNodes[0],rl.CSS.wh)&&c.push(a)});D(b,function(b,d){ai(a,b,e);ai(a,c[d],e+1)})}f.Oy=function(){for(this.If.g();this.Wr.length;)this.If.add(this.Wr[0]),zb.splice.call(this.Wr,0,1);F(this.If,"end",this.Oy.bind(this));this.If.play()};function ks(a){null!=a.OB&&(a.Wt(a.OB),delete a.OB);null!=a.If&&(a.nq(a.If),delete a.If)}
f.f=function(){as.d.f.call(this);R(this.Vk);delete this.Vk;ks(this);delete this.Ik;delete this.cj;delete this.OI;delete this.Vq;delete this.bu};v("nrg.ui.ZippyTree.EventType",bs);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",as.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",as.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");
v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=bi(a),d=b[sl].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[sl]&&(e=h[sl].toLowerCase(),e=Ka(d,e),0>e)){$h(b,h);return}a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",as.prototype.Yv);v("nrg.ui.ZippyTree.prototype.isEmpty",as.prototype.jm);v("nrg.ui.ZippyTree.prototype.contractAll",as.prototype.Qy);v("nrg.ui.ZippyTree.prototype.collapseAll",as.prototype.un);
v("nrg.ui.ZippyTree.prototype.getAllNodes",as.prototype.vz);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",as.prototype.uu);v("nrg.ui.ZippyTree.prototype.getNodesByLevel",as.prototype.Uz);v("nrg.ui.ZippyTree.prototype.expandAll",as.prototype.Tl);v("nrg.ui.ZippyTree.prototype.traverse",as.prototype.jp);v("nrg.ui.ZippyTree.prototype.getElement",as.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",as.prototype.ec);v("nrg.ui.ZippyTree.prototype.setCollapsed",as.prototype.Ho);
v("nrg.ui.ZippyTree.prototype.getFolderNodes",as.prototype.zq);v("nrg.ui.ZippyTree.prototype.addContents",as.prototype.mf);v("nrg.ui.ZippyTree.prototype.createBranch",as.prototype.xn);v("nrg.ui.ZippyTree.prototype.scaleElementOnChange",as.prototype.Ur);v("nrg.ui.ZippyTree.prototype.playFx",as.prototype.WK);v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",as.prototype.$L);v("nrg.ui.ZippyTree.prototype.disposeInternal",as.prototype.f);function ms(){U.call(this)}w(ms,U);v("nrg.ui.ScrollableContainer",ms);ms.ID_PREFIX="nrg.ui.ScrollableContainer";ms.CSS_SUFFIX={lE:"scrollarea",qa:"slider",Ig:"slider-thumb",Bh:"slider-track",nE:"slider-thumb-hovered",TN:"slider-track-hovered"};f=ms.prototype;
f.k=function(a){ms.d.k.call(this,a);null==this.ug&&(this.ug=Q("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":ms.CSS.lE}),this.a().appendChild(this.ug));this.Bb=new or("vertical");this.Bb.k(this.a());F(this.Bb,"u",this.Pc.bind(this));this.Bb.Zp(this.a());P(this.Bb.a(),ms.CSS.qa);P(this.Bb.Ff,ms.CSS.Ig);P(this.Bb.sh,ms.CSS.Bh);this.o();this.Pc()};f.mf=function(a){this.la||this.k();Yh(this.ug,a);this.Pc()};f.a=function(){return this.q};f.FH=function(){return this.Bb};f.BH=function(){return this.ug};
f.o=function(a){a&&pk(this.q,a)};f.Pc=function(){var a=T(this.q).height,b=T(this.ug).height,c=[this.Bb.ka(),this.Bb.S()],d=[0,b-a],e=this.Bb.Ff;a<b?(this.Bb.a().style.opacity=1,a=Math.round(a/b*a),e.style.height=a.toString()+"px",this.Bb.Kb(!0),e=this.Bb.S()-this.Bb.w(),c=ik(e,c,d).remappedVal,this.ug.style.top=(-c).toString()+"px"):(this.Bb.a().style.opacity=0,this.Bb.Kb(!1),this.Bb.C(100))};
f.f=function(){ms.d.f.call(this);null!=this.Bb&&(I(this.Bb),this.Bb.g(),delete this.Bb);null!=this.ug&&(R(this.ug),delete this.ug)};v("nrg.ui.ScrollableContainer.ID_PREFIX",ms.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",ms.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",ms.prototype.k);v("nrg.ui.ScrollableContainer.prototype.addContents",ms.prototype.mf);v("nrg.ui.ScrollableContainer.prototype.getElement",ms.prototype.a);
v("nrg.ui.ScrollableContainer.prototype.getSlider",ms.prototype.FH);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",ms.prototype.BH);v("nrg.ui.ScrollableContainer.prototype.updateStyle",ms.prototype.o);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",ms.prototype.Pc);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",ms.prototype.f);function ns(){U.call(this)}w(ns,ms);v("nrg.ui.ScrollableZippyTree",ns);ns.ID_PREFIX="nrg.ui.ScrollableZippyTree";ns.CSS_SUFFIX={KE:"zippytree"};f=ns.prototype;f.k=function(a){ns.d.k.call(this,a);this.oa=new as;P(this.oa.a(),ns.CSS.KE);this.ug.appendChild(this.oa.a());this.Uo();this.Bb.pC(!0,.3)};f.mf=function(a,b){this.oa.mf(a,b);g(a);this.Bb.Zp(this.oa.a())};f.Tl=function(){this.oa.Tl()};f.Ur=function(a,b,c,d){this.oa.Ur(a,b,function(){null!=c&&c();this.Pc()}.bind(this),function(){null!=d&&d()}.bind(this))};
f.un=function(){this.oa.un()};f.ec=function(a,b){this.oa.ec(a,b)};f.dI=function(){return this.oa};f.gF=function(a){this.oa.xn(a);this.Pc()};f.Uo=function(){F(this.oa,"B",this.Pc.bind(this));F(this.oa,"a",this.Pc.bind(this));F(this.oa,"b",this.Pc.bind(this));F(this.oa,ul.YD,this.Pc.bind(this))};f.o=function(a){a&&pk(this.a(),a)};f.f=function(){ns.d.f.call(this);null!=this.oa&&(I(this.oa),this.oa.g(),delete this.oa)};v("nrg.ui.ScrollableZippyTree.EventType",{});
v("nrg.ui.ScrollableZippyTree.ID_PREFIX",ns.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",ns.CSS_SUFFIX);v("nrg.ui.ScrollableZippyTree.prototype.render",ns.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.addContents",ns.prototype.mf);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",ns.prototype.Tl);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",ns.prototype.un);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",ns.prototype.ec);
v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",ns.prototype.dI);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",ns.prototype.gF);v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",ns.prototype.Uo);v("nrg.ui.ScrollableZippyTree.prototype.scaleElementOnChange",ns.prototype.Ur);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",ns.prototype.o);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",ns.prototype.f);function os(a){Xq.call(this,a);this.La.C(this.ka());this.La.Af(this.S()-this.ka())}w(os,Xq);os.prototype.U=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};os.prototype.kk=function(a){a=this.N().B("div",a);Xk(a,"button");return a};
os.prototype.Yy=function(){var a=Nh(document,null,"goog-twothumbslider-value-thumb",this.a())[0],b=Nh(document,null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Nh(document,null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.kk("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.kk("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.N().B("div","goog-twothumbslider-rangehighlight"),this.N().Hu(c,a));this.ra=a;this.qc=b;this.Xb=c};function ps(){Vd.call(this);this.u="fibers";za(this,new fd)}w(ps,Vd);v("X.fibers",ps);function qs(){}w(qs,Pn);fa(qs);qs.prototype.B=function(a){var b=a.N().B("span",this.wk(a).join(" "));rs(this,b,a.Qi);return b};qs.prototype.Cb=function(a,b){b=qs.d.Cb.call(this,a,b);var c=$k(b),d=ss;Ib(c,ts(this,us))?d=us:Ib(c,ts(this,vs))?d=vs:Ib(c,ts(this,ss))&&(d=ss);a.Qi=d;Yk(b,"checked",d==us?"mixed":d==vs?"true":"false");return b};qs.prototype.Zg=function(){return"checkbox"};
function rs(a,b,c){if(b){var d=ts(a,c);al(b,d)||(C(ws,function(a){a=ts(this,a);fl(b,a,a==d)},a),Yk(b,"checked",c==us?"mixed":c==vs?"true":"false"))}}qs.prototype.U=function(){return"goog-checkbox"};function ts(a,b){var c=a.U();if(b==vs)return c+"-checked";if(b==ss)return c+"-unchecked";if(b==us)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function xs(a,b,c){c=c||qs.le();eo.call(this,null,c,b);this.Qi=ca(a)?a:ss}w(xs,eo);var vs=!0,ss=!1,us=null,ws={rM:vs,oO:ss,pO:us};f=xs.prototype;f.zb=null;f.eh=function(){return this.Qi==vs};f.Td=function(a){a!=this.Qi&&(this.Qi=a,rs(this.Ra(),this.a(),this.Qi))};f.Bf=function(a){this.la?(this.Ac(),this.zb=a,this.fb()):this.zb=a};f.toggle=function(){this.Td(this.Qi?ss:vs)};
f.fb=function(){xs.d.fb.call(this);if(this.Dk){var a=this.gb();this.zb&&a.D(this.zb,"click",this.wu).D(this.zb,"mouseover",this.Ek).D(this.zb,"mouseout",this.Mq).D(this.zb,"mousedown",this.bh).D(this.zb,"mouseup",this.hg);a.D(this.a(),"click",this.wu)}this.zb&&(this.zb.id||(this.zb.id=kj(this)+".lbl"),Yk(this.a(),"labelledby",this.zb.id))};f.Kb=function(a){xs.d.Kb.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.wu=function(a){a.stopPropagation();var b=this.Qi?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.gg=function(a){32==a.keyCode&&this.wu(a);return!1};Mn("goog-checkbox",function(){return new xs});function ys(){Vd.call(this);this.u="mesh";za(this,new fd)}w(ys,Vd);v("X.mesh",ys);function zs(){U.call(this);this.Ve=[];this.Df=[]}w(zs,U);v("xiv.ui.XtkController",zs);zs.ID_PREFIX="xiv.ui.XtkController";zs.CSS_SUFFIX={GD:"label",uD:"component"};var As=B();function Bs(){return Q("div",{id:"Label_"+B(),"class":zs.CSS.GD})}function Cs(a){a=g(a.file)?a.file[0]:a.file||a.name;return Nk(a)}function Ds(a,b){b.WB([Cs(a)])}f=zs.prototype;f.qj=!1;f.k=function(a){zs.d.k.call(this,a)};f.Bf=function(a){null==this.zb&&(this.zb=Bs(),Yh(this.a(),this.zb));this.zb.innerHTML=a};f.VG=function(){return this.zb};
f.Io=function(a){this.defaultValue=a};f.xG=function(){return this.defaultValue};f.WB=function(a){r(a)&&(a=[a]);this.In=a};f.KG=function(){return this.In};f.wg=function(a){this.Ua=a};f.me=function(){return this.Ua};function Es(a){this.min=parseInt(a.min);this.max=parseInt(a.max);this.hh=parseInt(a.windowLow);this.kj=parseInt(a.windowHigh)}f.eg=function(){return new Es(this.Ua)};
f.wj=function(a){a=this.fa=a;this.fa instanceof hj?(a=this.fa.a(),this.fa.la?this.fa.a().parentNode!==this.a()&&this.fa.a()!==this.a()&&this.a().appendChild(this.fa.a()):this.fa.k(this.a())):this.a().appendChild(a);null!=a&&P(a,zs.CSS.uD)};f.uz=function(){return Mb(this.Ve,this.Df)};f.dH=function(){return this.Ve};f.FA=function(){return this.qj};f.uL=function(a){this.qj=a};f.GH=function(){return this.Df};f.rG=function(){return this.fa};f.oc=ea;
f.rd=function(a,b,c){a=new a;a.k();r(b)&&a.Bf(b);Yh(this.a(),a.a());null!=c&&F(a,"D",c);return a};f.refresh=function(){};f.nt=function(a,b){var c=this.rd(b,"Color",function(b){a.color=b.color}.bind(this));Ds(a,c);this.Df.push(c);c[As]=a;c.refresh()};f.my=function(a,b){var c=this.rd(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});Ds(a,c);this.Df.push(c);c.fa.C(1);c.fa.o()};f.pt=function(a,b){var c=this.rd(b,"Visible",function(b){a.visible=b.checked});Ds(a,c);this.Df.push(c);c.fa.Td(a.visible)};
f.f=function(){zs.d.f.call(this);this[As]=null;delete this.qj;delete this.Ua;D(this.Df,function(a){I(a);a.g()});Jb(this.Df);delete this.Df;D(this.Ve,function(a){I(a);a.g();controller=null});Jb(this.Ve);delete this.Ve;null!=this.fa&&(I(this.fa),this.fa instanceof hj?this.fa.g():R(this.fa),delete this.fa);null!=this.In&&(Jb(this.In),delete this.In);null!=this.zb&&(R(this.zb),delete this.zb);delete this.defaultValue};v("xiv.ui.XtkController.ID_PREFIX",zs.ID_PREFIX);
v("xiv.ui.XtkController.CSS_SUFFIX",zs.CSS_SUFFIX);v("xiv.ui.XtkController.EventType",{mD:"D"});v("xiv.ui.XtkController.OBJ_KEY",As);v("xiv.ui.XtkController.CurrentLevels",Es);v("xiv.ui.XtkController.createLabel",Bs);v("xiv.ui.XtkController.getXObjLabel",Cs);v("xiv.ui.XtkController.getObjectCategory",function(a){if(a instanceof ys)return"Meshes";if(a instanceof J)return"Volumes";if(a instanceof ps)return"Fibers";if(a instanceof Yp)return"Annotations"});
v("xiv.ui.XtkController.setControllerFolders",Ds);v("xiv.ui.XtkController.prototype.render",zs.prototype.k);v("xiv.ui.XtkController.prototype.setLabel",zs.prototype.Bf);v("xiv.ui.XtkController.prototype.getLabel",zs.prototype.VG);v("xiv.ui.XtkController.prototype.setDefaultValue",zs.prototype.Io);v("xiv.ui.XtkController.prototype.getDefaultValue",zs.prototype.xG);v("xiv.ui.XtkController.prototype.setFolders",zs.prototype.WB);v("xiv.ui.XtkController.prototype.getFolders",zs.prototype.KG);
v("xiv.ui.XtkController.prototype.setXObj",zs.prototype.wg);v("xiv.ui.XtkController.prototype.getXObj",zs.prototype.me);v("xiv.ui.XtkController.prototype.setComponent",zs.prototype.wj);v("xiv.ui.XtkController.prototype.getAllControllers",zs.prototype.uz);v("xiv.ui.XtkController.prototype.getMasterControllers",zs.prototype.dH);v("xiv.ui.XtkController.prototype.isInitialized",zs.prototype.FA);v("xiv.ui.XtkController.prototype.setInitialized",zs.prototype.uL);
v("xiv.ui.XtkController.prototype.getCurrentLevels",zs.prototype.eg);v("xiv.ui.XtkController.prototype.getSubControllers",zs.prototype.GH);v("xiv.ui.XtkController.prototype.getComponent",zs.prototype.rG);v("xiv.ui.XtkController.prototype.dispatchComponentEvent",zs.prototype.oc);v("xiv.ui.XtkController.prototype.createController",zs.prototype.rd);v("xiv.ui.XtkController.prototype.refresh",zs.prototype.refresh);v("xiv.ui.XtkController.prototype.add_colorPalette",zs.prototype.nt);
v("xiv.ui.XtkController.prototype.add_opacity",zs.prototype.my);v("xiv.ui.XtkController.prototype.add_visible",zs.prototype.pt);v("xiv.ui.XtkController.prototype.disposeInternal",zs.prototype.f);function Fs(){zs.call(this);this.wj(Q("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));P(this.fa,Fs.CSS.eE);F(this.fa,"change",this.oc.bind(this))}w(Fs,zs);v("xiv.ui.RadioButtonController",Fs);Fs.ID_PREFIX="xiv.ui.RadioButtonController";Fs.CSS_SUFFIX={eE:"radiobutton"};Fs.prototype.oc=function(){this.dispatchEvent({type:"D",checked:this.fa.checked})};Fs.prototype.f=function(){Fs.d.f.call(this)};v("xiv.ui.RadioButtonController.ID_PREFIX",Fs.ID_PREFIX);
v("xiv.ui.RadioButtonController.CSS_SUFFIX",Fs.CSS_SUFFIX);v("xiv.ui.RadioButtonController.prototype.dispatchComponentEvent",Fs.prototype.oc);v("xiv.ui.RadioButtonController.prototype.disposeInternal",Fs.prototype.f);function Gs(){zs.call(this);this.Bf("Display All");this.sn=Q("div",{id:"CheckboxHodler_"+B()});P(this.sn,Gs.CSS.nD);this.gk=new xs(!0);this.gk.Cb(this.sn);this.wj(this.gk);F(this.gk,"change",this.oc.bind(this))}w(Gs,zs);v("xiv.ui.CheckboxController",Gs);Gs.ID_PREFIX="xiv.ui.CheckboxController";Gs.CSS_SUFFIX={nD:"checkboxholder"};f=Gs.prototype;f.refresh=function(){this.Td(this.fa.eh())};f.Td=function(a){this.fa.Td(a);this.oc()};f.oc=function(){this.dispatchEvent({type:"D",checked:this.gk.eh()})};
f.pG=function(){return this.sn};f.f=function(){Gs.d.f.call(this);R(this.sn);delete this.sn;I(this.gk);this.gk.g();delete this.gk};v("xiv.ui.CheckboxController.ID_PREFIX",Gs.ID_PREFIX);v("xiv.ui.CheckboxController.CSS_SUFFIX",Gs.CSS_SUFFIX);v("xiv.ui.CheckboxController.prototype.setChecked",Gs.prototype.Td);v("xiv.ui.CheckboxController.prototype.refresh",Gs.prototype.refresh);v("xiv.ui.CheckboxController.prototype.getCheckboxHolder",Gs.prototype.pG);
v("xiv.ui.CheckboxController.prototype.dispatchComponentEvent",Gs.prototype.oc);v("xiv.ui.CheckboxController.prototype.disposeInternal",Gs.prototype.f);function Hs(){bd.call(this);this.u="shaders";this.Pp="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Pp=a+="}\n";this.Ep="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Ep=a+="}\n"}
w(Hs,bd);
var Is={yO:"vertexPosition",xO:"vertexNormal",wO:"vertexColor",AO:"vertexTexturePos",zO:"vertexScalar"},Js={CO:"view",uN:"perspective",qM:"center",rN:"objectTransform",sO:"useObjectColor",pN:"objectColor",uO:"useScalars",KN:"scalarsReplaceMode",HN:"scalarsMin",EN:"scalarsMax",IN:"scalarsMinColor",FN:"scalarsMaxColor",JN:"scalarsMinThreshold",GN:"scalarsMaxThreshold",DN:"scalarsInterpolation",vN:"pointSize",qN:"objectOpacity",oN:"normal",tO:"usePicking",vO:"useTexture",rO:"useLabelMapTexture",VM:"labelmapOpacity",
UM:"labelmapColor",bO:"textureSampler",cO:"textureSampler2",GO:"volumeLowerThreshold",NO:"volumeUpperThreshold",KO:"volumeScalarMin",IO:"volumeScalarMax",LO:"volumeScalarMinColor",JO:"volumeScalarMaxColor",PO:"volumeWindowLow",OO:"volumeWindowHigh",MO:"volumeTexture"};
function Ks(a){var b=Object.keys(Js);if(!Object.keys(Is).every(function(a){a=Is[a];return-1!=this.Pp.search(a)||-1!=this.Ep.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Js[a];return-1!=this.Pp.search(a)||-1!=this.Ep.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Ls(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");bd.call(this);this.u="buffer";this.vb=a;this.zi=b;this.Ai=c}w(Ls,bd);function Ms(a,b){this.It=a instanceof rh?a:new rh(a,b)}w(Ms,Ro);Ms.prototype.ue=function(a,b,c,d){xo(Fi(a),0,a,b,this.It,c,null,d)};function Ns(a,b){this.XK=4;this.Ov=b||void 0;um.call(this,a)}w(Ns,um);Ns.prototype.ew=function(a){this.Ov=a||void 0;this.ta()&&this.ue()};Ns.prototype.ue=function(){if(this.Ov){var a=!this.ta()&&"move_offscreen"!=this.Dm,b=this.a();a&&(b.style.visibility="hidden",Ui(b,!0));this.Ov.ue(b,this.XK,this.BP);a&&Ui(b,!1)}};function Os(a,b,c){this.ob=c||(a?Ih(Lh(a)):Ih());Ns.call(this,this.ob.B("div",{style:"position:absolute;display:none;"}));this.Ot=new rh(1,1);this.sk=new kg;a&&this.Hl(a);null!=b&&this.So(b)}w(Os,Ns);var Ps=[];f=Os.prototype;f.fe=null;f.className="goog-tooltip";f.zC=500;f.tI=0;f.N=function(){return this.ob};f.Hl=function(a){a=Lh(a);this.sk.add(a);F(a,"mouseover",this.Ek,!1,this);F(a,"mouseout",this.Nq,!1,this);F(a,"mousemove",this.lA,!1,this);F(a,"focus",this.Ck,!1,this);F(a,"blur",this.Nq,!1,this)};
f.detach=function(a){if(a)a=Lh(a),Qs(this,a),this.sk.remove(a);else{for(var b=this.sk.Xh(),c=0;a=b[c];c++)Qs(this,a);this.sk.clear()}};function Qs(a,b){Uc(b,"mouseover",a.Ek,!1,a);Uc(b,"mouseout",a.Nq,!1,a);Uc(b,"mousemove",a.lA,!1,a);Uc(b,"focus",a.Ck,!1,a);Uc(b,"blur",a.Nq,!1,a)}f.So=function(a){hi(this.a(),a)};f.Zv=function(a){var b=this.a();b&&R(b);Os.d.Zv.call(this,a);a&&(b=this.ob.ja.body,b.insertBefore(a,b.lastChild))};f.ru=function(){return ni(this.a())};
f.Zl=function(){return this.Aj?this.ta()?4:1:this.Tn?3:this.ta()?2:0};f.lv=function(){if(!um.prototype.lv.call(this))return!1;if(this.anchor)for(var a,b=0;a=Ps[b];b++)gi(a.a(),this.anchor)||a.ba(!1);Kb(Ps,this);a=this.a();a.className=this.className;Rs(this);F(a,"mouseover",this.sA,!1,this);F(a,"mouseout",this.rA,!1,this);Ss(this);return!0};
f.uv=function(){Lb(Ps,this);for(var a=this.a(),b,c=0;b=Ps[c];c++)b.anchor&&gi(a,b.anchor)&&b.ba(!1);this.tB&&Ts(this.tB);Uc(a,"mouseover",this.sA,!1,this);Uc(a,"mouseout",this.rA,!1,this);this.anchor=void 0;0==this.Zl()&&(this.Xr=!1);um.prototype.uv.call(this)};f.WA=function(a,b){this.anchor==a&&this.sk.contains(this.anchor)&&(this.Xr||!this.RP?(this.ba(!1),this.ta()||(this.anchor=a,this.ew(b||Us(this,0)),this.ba(!0))):this.anchor=void 0);this.Aj=void 0};
f.iJ=function(a){this.Tn=void 0;a==this.anchor&&(null!=this.fe&&(this.fe==this.a()||this.sk.contains(this.fe))||this.Hy&&this.Hy.fe||this.ba(!1))};function Vs(a,b){var c=wi(a.ob);a.Ot.x=b.clientX+c.x;a.Ot.y=b.clientY+c.y}f.Ek=function(a){var b=Ws(this,a.target);this.fe=b;Rs(this);b!=this.anchor&&(this.anchor=b,this.Aj||(this.Aj=Yf(ta(this.WA,this,b,void 0),this.zC)),Xs(this),Vs(this,a))};function Ws(a,b){try{for(;b&&!a.sk.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.lA=function(a){Vs(this,a);this.Xr=!0};f.Ck=function(a){this.fe=a=Ws(this,a.target);this.Xr=!0;if(this.anchor!=a){this.anchor=a;var b=Us(this,1);Rs(this);this.Aj||(this.Aj=Yf(ta(this.WA,this,a,b),this.zC));Xs(this)}};function Us(a,b){if(0==b){var c=a.Ot.clone();return new Ys(c)}return new Zs(a.fe)}function Xs(a){if(a.anchor)for(var b,c=0;b=Ps[c];c++)gi(b.a(),a.anchor)&&(b.Hy=a,a.tB=b)}
f.Nq=function(a){var b=Ws(this,a.target),c=Ws(this,a.relatedTarget);b!=c&&(b==this.fe&&(this.fe=null),Ss(this),this.Xr=!1,!this.ta()||a.relatedTarget&&gi(this.a(),a.relatedTarget)?this.anchor=void 0:Ts(this))};f.sA=function(){var a=this.a();this.fe!=a&&(Rs(this),this.fe=a)};f.rA=function(a){var b=this.a();this.fe!=b||a.relatedTarget&&gi(b,a.relatedTarget)||(this.fe=null,Ts(this))};function Ss(a){a.Aj&&(ba.clearTimeout(a.Aj),a.Aj=void 0)}
function Ts(a){2==a.Zl()&&(a.Tn=Yf(ta(a.iJ,a,a.anchor),a.tI))}function Rs(a){a.Tn&&(ba.clearTimeout(a.Tn),a.Tn=void 0)}f.f=function(){this.ba(!1);Ss(this);this.detach();this.a()&&R(this.a());this.fe=null;delete this.ob;Os.d.f.call(this)};function Ys(a,b){Ms.call(this,a,b)}w(Ys,Ms);Ys.prototype.ue=function(a,b,c){b=Fi(a);b=Ii(b);c=c?new th(c.top+10,c.right,c.bottom,c.left+10):new th(10,0,0,10);zo(this.It,a,4,c,b,9)&496&&zo(this.It,a,4,c,b,5)};function Zs(a){So.call(this,a,3)}w(Zs,So);
Zs.prototype.ue=function(a,b,c){var d=new rh(10,0);xo(this.element,this.wn,a,b,d,c,9)&496&&xo(this.element,2,a,1,d,c,5)};function $s(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!u(b)||!u(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof sp))throw Error("Invalid interactor.");Os.call(this);this.u="caption";this.lf=a;this.Sp=b;this.Tp=c;this.Fa=d;this.Jh=null;this.Tj=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Tj=[a];Tc(d,ke,this.eo.bind(this));this.Fu()}
w($s,Os);$s.prototype.Fu=function(){var a=zi(this.lf,"position");if("static"==a||""==a)this.lf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Tj[0]));a.appendChild(b);b.appendChild(c);this.Jh=b;this.ew(new Ms(this.Sp,this.Tp));this.ba(!0);this.Hl(this.lf);this.a().classList.add("x-tooltip")};$s.prototype.eo=function(){this.ba(!1);this.Jh&&R(this.Jh);this.a()&&R(this.a());this.Jh=null};function at(){pq.call(this);this.u="renderer3D";this.Um=this.Xm=this.Tm=this.Wm=this.Sm=this.Vm=this.dt=this.et=null;this.Va=[0,0,0];this.Mm=[0,0,0];this.Mx=null;this.Ps=new id;this.hn=new id;this.ak=new id;this.Ym=new id;this.ql=new id;this.zl=new id;this.Zj=new id;this.El=new id;this.ub={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(at,pq);at.prototype.__defineGetter__("config",function(){return this.ub});f=at.prototype;
f.gL=function(){this.Um=this.Xm=this.Tm=this.Wm=this.Sm=this.Vm=null;this.Va=[0,0,0]};f.vv=function(a){at.d.vv.call(this,a);var b=a.Sp;a=a.Tp;var c=this.Lv(b,a);if(c=this.get(c))if(c=c.pl){var d=Ni(this.wa),b=new $s(this.wa,d.x+b+10,d.y+a+10,this.Fa);a=sm(c,null);if(b=b.a())b.innerHTML=rm(a)}};
f.sa=function(){at.d.sa.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.Za,this.Ja),this.b.clearColor(this.Mm[0],this.Mm[1],this.Mm[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.ub.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.Za,this.Ja,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.Za,this.Ja);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.Mx=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new Hs;bt(this,a)};
function bt(a,b){if(null==a.wc||null==a.b||null==a.na)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Hs))throw Error("Could not add shaders.");Ks(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.Ep);a.b.shaderSource(d,b.Pp);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.dt=e;Object.keys(Is).forEach(function(a){a=Is[a];this.Ps.set(a,this.b.getAttribLocation(this.dt,a));this.b.enableVertexAttribArray(this.Ps.get(a))}.bind(a));
Object.keys(Js).forEach(function(a){a=Js[a];this.hn.set(a,this.b.getUniformLocation(this.dt,a))}.bind(a));a.et=b}
f.vh=function(a){at.d.vh.call(this,a);var b=!1;if(null!=a){this.get(a.nd)&&(b=!0);var c=a.nd,d=a.G,e=a.da,h=a.Kc,k=a.Ya,l=a.ia,n=a.jc,p=a.Gd,m=a.t,q=a.eb;if(null!=m&&null!=m.ia&&m.ia.J)this.vh(m);else if(null!=m&&m.J&&this.vh(m),null!=p&&null!=p.ia&&p.ia.J)this.Pb.load(p,a);else if(null!=k&&null!=k.ia&&k.ia.J)this.Pb.load(k,a);else{if(null!=l&&g(l))if(null!=a.yh){if(a.yh.lo!=l.length||!a.J)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Pb.load(l[b],a);return}else{if(null!=l&&l.J){this.Pb.load(a,
a);return}if(null!=q&&null!=q.ia&&q.ia.J){this.Pb.load(q,a);return}}if(0<a.j.length)for(l=a.j,p=l.length,m=m=0;m<p;m++)this.vh(l[m]);if(d){for(l=0;this.Jp;)l++,window.console.log("Possible thread lock avoided: "+l);this.Jp=!0;p=a instanceof Ke&&a.Kh instanceof Pe;b&&null!=k&&k.J&&(l=this.Zj.get(c),null!=l&&this.b.isBuffer(l.vb)&&this.b.deleteBuffer(l.vb));l=null;if(null!=k)if(!b||k.J){l=a.Dl;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
m=!1;k.Hi&&(m=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,m);m=this.b.createTexture();m.BI=k.Of;this.El.set(k.nd,m);this.b.bindTexture(this.b.TEXTURE_2D,m);k.Hi?(m=this.b.RGBA,k.Cx&&(m=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,m,k.ct,k.bt,0,m,this.b.UNSIGNED_BYTE,k.Hi)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,m.BI);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);p?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);m=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
m);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new Ls(m,l.length,2);this.Zj.set(c,l);k.J=!1}else l=this.Zj.get(c);Pf(this.Pb,.1);if(p)this.Jp=!1,A.Bd(this.u+".update"),Pf(this.Pb,.9);else{if(!b||d.J||n.J){p=n.xb;k=A.v.Vb(p,d.Sf,d.Tf,d.Uf);p=A.v.Vb(p,d.Pf,d.Qf,d.Rf);if(null===this.Vm||k.x<this.Vm)this.Vm=k.x;if(null===this.Sm||p.x>this.Sm)this.Sm=p.x;if(null===this.Wm||k.y<this.Wm)this.Wm=k.y;if(null===this.Tm||p.y>this.Tm)this.Tm=p.y;if(null===this.Xm||k.z<this.Xm)this.Xm=
k.z;if(null===this.Um||p.z>this.Um)this.Um=p.z;this.Va=[(this.Vm+this.Sm)/2,(this.Wm+this.Tm)/2,(this.Xm+this.Um)/2];n.J=!1}b&&d.J&&(n=this.ak.get(c),null!=n&&this.b.isBuffer(n.vb)&&this.b.deleteBuffer(n.vb));n=null;!b||d.J?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.cc,this.b.STATIC_DRAW),n=new Ls(n,d.count,3),d.J=!1):n=this.ak.get(c);Pf(this.Pb,.3);b&&e.J&&(k=this.ak.get(c),null!=k&&this.b.isBuffer(k.vb)&&this.b.deleteBuffer(k.vb));
k=null;!b||e.J?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.cc,this.b.STATIC_DRAW),k=new Ls(k,e.count,3),e.J=!1):k=this.Ym.get(c);Pf(this.Pb,.3);b&&h&&h.J&&(e=this.ql.get(c),null!=e&&this.b.isBuffer(e.vb)&&this.b.deleteBuffer(e.vb));e=null;if(h)if(!b||h.J){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.cc,this.b.STATIC_DRAW);e=new Ls(e,h.count,3);h.J=!1}else e=this.ql.get(c);Pf(this.Pb,.2);b&&q&&q.J&&(h=this.zl.get(c),null!=h&&this.b.isBuffer(h.vb)&&this.b.deleteBuffer(h.vb));h=null;if(q)if(h=q.Om,!b||q.J){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new Ls(d,h.length,3);q.J=!1}else h=this.zl.get(c);Pf(this.Pb,.1);b||this.Qg.add(a);this.ak.set(c,
n);this.Ym.set(c,k);this.ql.set(c,e);this.Zj.set(c,l);this.zl.set(c,h);this.Jp=a.J=!1}}else a.J=!1}}};f.Lv=function(a,b){if(this.ub.PICKING_ENABLED){this.lh(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.Ja-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.lh=function(a,b){at.d.lh.call(this,a,b);this.b.viewport(0,0,this.Za,this.Ja);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.Qg.cb,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Mx):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.na.at,h=this.na.O;this.b.uniformMatrix4fv(this.hn.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.hn.get("view"),!1,h);e=this.Va;this.b.uniform3f(this.hn.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.od.length;for(e=0;e<h;++e){var k=this.od[e];if(k instanceof J){var l=A.v.Vb(this.na.O,k.va[0]+k.e[0].H[0],k.va[1]+k.e[0].H[1],k.va[2]+k.e[0].H[2]),n=A.v.Vb(this.na.O,k.va[0]-k.e[0].H[0],k.va[1]-k.e[0].H[1],k.va[2]-k.e[0].H[2]),p=Math.abs(l.z-n.z),l=A.v.Vb(this.na.O,k.va[0]+k.e[1].H[0],k.va[1]+k.e[1].H[1],k.va[2]+k.e[1].H[2]),n=A.v.Vb(this.na.O,k.va[0]-k.e[1].H[0],k.va[1]-k.e[1].H[1],k.va[2]+-k.e[1].H[2]),m=Math.abs(l.z-n.z),l=A.v.Vb(this.na.O,k.va[0]+k.e[2].H[0],k.va[1]+k.e[2].H[1],k.va[2]+
k.e[2].H[2]),n=A.v.Vb(this.na.O,k.va[0]-k.e[2].H[0],k.va[1]-k.e[2].H[1],k.va[2]-k.e[2].H[2]),l=Math.max(p,m,Math.abs(l.z-n.z));l==p?Oe(k,0):l==m?Oe(k,1):Oe(k,2)}}if(this.ub.ORDERING_ENABLED){p=!1;h=this.od;k=h.length-1;do if(e=h[k],e instanceof J&&e.Ke&&-1!=e.Gb){var p=e.j[e.Gb].j,m=e.Gb,l=A.v.Vb(this.na.O,e.va[0]+e.e[m].Pa[0],e.va[1]+e.e[m].Pa[1],e.va[2]+e.e[m].Pa[2]),n=A.v.Vb(this.na.O,e.va[0]-e.e[m].Pa[0],e.va[1]-e.e[m].Pa[1],e.va[2]-e.e[m].Pa[2]),l=l.z-n.z,n=Math.max(e.nl[e.Gb],Math.max(e.nl[e.Gb+
4],e.nl[e.Gb+8])),q=Math.min(e.nl[e.Gb],Math.min(e.nl[e.Gb+4],e.nl[e.Gb+8]));if(0>l*(n+q))for(l=l=0;l<e.bn[m]-1;l++)p[l]&&(p[l].Vc=e.Vc,p[l].md=e.e[m].Bl*l);else for(l=e.bn[m]-1;0<=l;l--)p[l]&&(p[l].Vc=e.Vc,p[l].md=(e.bn[m]-1)*e.e[m].Bl-e.e[m].Bl*l);p=!0}while(k--);h=this.Qg.cb;k=h.length-1;do e=h[k],!e.nb||1==e.Vc||e instanceof Ke||(p=e,m=e.G.Bp,e=A.v.Vb(e.jc.xb,m[0],m[1],m[2]),e=A.v.Vb(this.na.O,e.x,e.y,e.z),e=A.Q.Yt(this.na.Vj,e),e=Math.round(1E3*e)/1E3,p.md=e,p=!0);while(k--);p&&this.Qg.sort()}if(h=
!a&&null!=b&&b&&this.ub.STATISTICS_ENABLED)var t=0,s=0,z=0,y=0;var e=this.Ps,k=e.get("vertexPosition"),p=e.get("vertexNormal"),m=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.hn,q=e.get("usePicking"),H=e.get("useObjectColor"),O=e.get("objectColor"),N=e.get("useScalars"),G=e.get("scalarsReplaceMode"),S=e.get("scalarsMin"),Z=e.get("scalarsMax"),V=e.get("scalarsMinColor"),va=e.get("scalarsMaxColor"),na=e.get("scalarsInterpolation"),xa=e.get("scalarsMinThreshold"),Oa=
e.get("scalarsMaxThreshold"),Ha=e.get("objectOpacity"),Pa=e.get("labelmapOpacity"),ka=e.get("labelmapColor"),ya=e.get("useTexture"),qa=e.get("useLabelMapTexture"),Dc=e.get("textureSampler"),ze=e.get("textureSampler2"),Ae=e.get("volumeLowerThreshold"),Be=e.get("volumeUpperThreshold"),$d=e.get("volumeScalarMin"),Qh=e.get("volumeScalarMax"),Nv=e.get("volumeWindowLow"),Ov=e.get("volumeWindowHigh"),Pv=e.get("volumeScalarMinColor"),Qv=e.get("volumeScalarMaxColor"),hs=e.get("volumeTexture"),Rv=e.get("objectTransform"),
Sv=e.get("pointSize"),e=d;do{var Qa=c[d-e];if(Qa){var lb=null;Qa instanceof Ke&&Qa.Kh&&(lb=Qa.Kh);if(Qa.nb&&(!lb||lb.nb)&&(!a||Qa.Zm)){var Bc=Qa.nd,Qd=Qa.Rm,jd=this.ak.get(Bc),se=this.Ym.get(Bc),$m=this.ql.get(Bc),qf=this.zl.get(Bc),an=this.Zj.get(Bc);this.b.bindBuffer(this.b.ARRAY_BUFFER,jd.vb);this.b.vertexAttribPointer(k,jd.Ai,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,se.vb);this.b.vertexAttribPointer(p,se.Ai,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(q,!0):this.b.uniform1i(q,!1);
!$m||a||Qd?(se=1,Qd&&!a&&(se=0),this.b.uniform1i(H,se),se=Qa.Ia,a&&(se=[Math.floor(Bc%65025%255)/255,Math.floor(Bc%65025/255)/255,Math.floor(Bc/65025)/255]),this.b.uniform3f(O,parseFloat(se[0]),parseFloat(se[1]),parseFloat(se[2])),this.b.vertexAttribPointer(m,jd.Ai,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(H,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,$m.vb),this.b.vertexAttribPointer(m,$m.Ai,this.b.FLOAT,!1,0,0));!qf||a||Qd?(this.b.uniform1i(N,!1),this.b.vertexAttribPointer(n,jd.Ai,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(N,!0),this.b.uniform1i(G,Qa.eb.Px),Bc=Qa.eb.Di,Qd=Qa.eb.Bi,this.b.uniform3f(V,parseFloat(Bc[0]),parseFloat(Bc[1]),parseFloat(Bc[2])),this.b.uniform3f(va,parseFloat(Qd[0]),parseFloat(Qd[1]),parseFloat(Qd[2])),this.b.uniform1f(xa,parseFloat(Qa.eb.wb)),this.b.uniform1f(Oa,parseFloat(Qa.eb.yb)),this.b.uniform1f(S,parseFloat(Qa.eb.ce)),this.b.uniform1f(Z,parseFloat(Qa.eb.bc)),this.b.uniform1i(na,parseInt(Qa.eb.Rs,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,qf.vb),this.b.vertexAttribPointer(n,
qf.Ai,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ha,parseFloat(Qa.Vc));Qa.Ya&&an&&!a?(this.b.uniform1i(ya,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.El.get(Qa.Ya.nd)),this.b.uniform1i(Dc,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,an.vb),this.b.vertexAttribPointer(l,an.Ai,this.b.FLOAT,!1,0,0),this.b.uniform1i(hs,!1)):(this.b.uniform1i(ya,!1),this.b.vertexAttribPointer(l,jd.Ai,this.b.FLOAT,!1,0,0));lb&&(this.b.uniform1i(hs,!0),this.b.uniform1f(Ae,lb.wb),this.b.uniform1f(Be,
lb.yb),this.b.uniform1f($d,lb.ce),this.b.uniform1f(Qh,lb.bc),Bc=lb.Di,Qd=lb.Bi,this.b.uniform3f(Pv,parseFloat(Bc[0]),parseFloat(Bc[1]),parseFloat(Bc[2])),this.b.uniform3f(Qv,parseFloat(Qd[0]),parseFloat(Qd[1]),parseFloat(Qd[2])),this.b.uniform1f(Nv,lb.Rb),this.b.uniform1f(Ov,lb.Qb),qf=lb.t,this.b.uniform1i(qa,!1),lb.Ke?this.b.uniform1f(Ha,parseFloat(lb.Vc)):qf&&qf.nb&&(lb=Qa.t.nd,this.b.uniform1i(qa,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.El.get(lb)),this.b.uniform1i(ze,
1),this.b.uniform1f(Pa,qf.Vc),this.b.uniform4fv(ka,qf.gt)));this.b.uniformMatrix4fv(Rv,!1,Qa.jc.xb);lb=1;"POINTS"==Qa.Jd&&(lb=Qa.$m);this.b.uniform1f(Sv,lb);lb=-1;Qa.Jd==Sd?(lb=this.b.TRIANGLES,h&&(s+=jd.zi/3)):"LINES"==Qa.Jd?(this.b.lineWidth(Qa.xl),lb=this.b.LINES,h&&(z+=jd.zi/2)):"POINTS"==Qa.Jd?(lb=this.b.POINTS,h&&(y+=jd.zi)):"TRIANGLE_STRIPS"==Qa.Jd?(lb=this.b.TRIANGLE_STRIP,h&&(s+=jd.zi/3)):"POLYGONS"==Qa.Jd&&(lb=0==jd.zi%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(s+=jd.zi/3));h&&(t+=jd.zi);
this.b.drawArrays(lb,0,jd.zi)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+t+" | "),c+="Triangles: "+Math.round(s)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.El.dg(),window.console.log(c))}};
f.remove=function(a){at.d.remove.call(this,a);if(0<a.j.length)for(var b=a.j,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.nd;c=this.Zj.get(b);null!=c&&this.b.isBuffer(c.vb)&&this.b.deleteBuffer(c.vb);a.Ya&&(c=this.El.get(a.Ya.nd))&&(this.b.deleteTexture(c),this.El.remove(a.Ya.nd));c=this.ak.get(b);null!=c&&this.b.isBuffer(c.vb)&&this.b.deleteBuffer(c.vb);c=this.Ym.get(b);null!=c&&this.b.isBuffer(c.vb)&&this.b.deleteBuffer(c.vb);c=this.ql.get(b);null!=c&&this.b.isBuffer(c.vb)&&this.b.deleteBuffer(c.vb);
c=this.zl.get(b);null!=c&&this.b.isBuffer(c.vb)&&this.b.deleteBuffer(c.vb);this.ak.remove(b);this.Ym.remove(b);this.ql.remove(b);this.Zj.remove(b);this.zl.remove(b);this.Qg.remove(a);return!0};f.ie=function(){this.et=null;delete this.et;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);at.d.ie.call(this)};at.prototype.__defineGetter__("bgColor",function(){return this.Mm});at.prototype.__defineSetter__("bgColor",function(a){this.Mm=a});
at.prototype.VK=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.Lv(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=fq(this.na,a/this.Za*2-1,(this.Ja-b)/this.Ja*2-1,0);a=fq(this.na,a/this.Za*2-1,(this.Ja-b)/this.Ja*2-1,1);h[0]+=this.Va[0];h[1]+=this.Va[1];h[2]+=this.Va[2];a[0]+=this.Va[0];a[1]+=this.Va[1];a[2]+=this.Va[2];b=[e.G.Sf,e.G.Tf,e.G.Uf];var k=[e.G.Pf,e.G.Tf,e.G.Uf],l=[e.G.Pf,e.G.Qf,e.G.Uf],n=[e.G.Sf,e.G.Qf,e.G.Uf],p=[e.G.Sf,e.G.Qf,e.G.Rf],m=[e.G.Sf,e.G.Tf,
e.G.Rf],q=[e.G.Pf,e.G.Qf,e.G.Rf],t=[e.G.Pf,e.G.Tf,e.G.Rf];b=[A.v.Vb(e.jc.xb,b[0],b[1],b[2]),A.v.Vb(e.jc.xb,k[0],k[1],k[2]),A.v.Vb(e.jc.xb,l[0],l[1],l[2]),A.v.Vb(e.jc.xb,n[0],n[1],n[2]),A.v.Vb(e.jc.xb,p[0],p[1],p[2]),A.v.Vb(e.jc.xb,m[0],m[1],m[2]),A.v.Vb(e.jc.xb,q[0],q[1],q[2]),A.v.Vb(e.jc.xb,t[0],t[1],t[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],k=[Math.min(k[0],s.x),Math.max(k[1],s.x),Math.min(k[2],s.y),Math.max(k[3],s.y),Math.min(k[4],s.z),Math.max(k[5],
s.z)];s=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,t=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(s[l]-h[n]);Infinity!=y&&-Infinity!=y&&(q=h[p]+a[p]*y,y=h[m]+a[m]*y,q>=s[t]&&q<=s[t+1]&&y>=s[z]&&y<=s[z+1]?(t=[],t[n]=s[l],t[p]=q,t[m]=y,b.push(t)):(t=[],t[n]=s[l],t[p]=q,t[m]=y,k.push(t)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(s=0;2>s;s++)b=a[s],k[s]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=s=null;k[0]<k[1]?(s=a[0],b=a[1]):
(s=a[1],b=a[0]);h=Math.sqrt((s[0]-b[0])*(s[0]-b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));h/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k=[s[0]/b,s[1]/b,s[2]/b];l=e.G.cc;n=l.length;for(s=0;s<h;s+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(p=l[b],m=l[b+1],q=l[b+2],t=new A.Q(p,m,q),t=A.v.Vb(e.jc.xb,p,m,q),Math.sqrt((a[0]-t.x)*(a[0]-t.x)+(a[1]-t.y)*(a[1]-t.y)+(a[2]-t.z)*(a[2]-t.z))<=d)return[t.x,t.y,t.z];return null};
v("X.renderer3D",at);v("X.renderer3D.prototype.init",at.prototype.sa);v("X.renderer3D.prototype.add",at.prototype.add);v("X.renderer3D.prototype.onShowtime",at.prototype.qB);v("X.renderer3D.prototype.onRender",at.prototype.oB);v("X.renderer3D.prototype.get",at.prototype.get);v("X.renderer3D.prototype.render",at.prototype.k);v("X.renderer3D.prototype.destroy",at.prototype.ie);v("X.renderer3D.prototype.remove",at.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",at.prototype.gL);
v("X.renderer3D.prototype.resetViewAndRender",at.prototype.Bo);v("X.renderer3D.prototype.pick",at.prototype.Lv);v("X.renderer3D.prototype.pick3d",at.prototype.VK);function ct(){at.call(this)}w(ct,at);v("xiv.vis.XtkRenderer3D",ct);f=ct.prototype;f.Xe=function(){this.Pk()};f.Ok=function(a){ct.d.Ok.call(this,a);this.dispatchEvent({type:"k",value:a.$j})};f.k=function(){this.wc&&this.b?(ct.d.k.call(this),this.dispatchEvent({type:"l"})):(this.ub.PROGRESSBAR_ENABLED=!1,this.sa())};f.ie=function(){ct.d.ie.call(this)};f.remove=function(a){null!=a&&ct.d.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",ct.prototype.Xe);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",ct.prototype.Ok);v("xiv.vis.XtkRenderer3D.prototype.render",ct.prototype.k);v("xiv.vis.XtkRenderer3D.prototype.remove",ct.prototype.remove);function dt(){$c.call(this);this.fl=[]}w(dt,$c);v("xiv.vis.XtkPlane",dt);var et=[-300,300,300];f=dt.prototype;f.km=!0;f.ll=null;f.orientation=null;f.Ao=null;f.Ca=null;f.Si=null;f.Ra=function(){return this.Ca};f.Tb=function(){return this.orientation};f.Zr=function(a){null!=this.Ca&&(null!=a?(this.bq=a,this.Ca.camera.focus=a.focus,this.Ca.camera.position=a.position,this.Ca.camera.up=a.cM,a instanceof xp&&(this.Ca.camera.view=a.view)):this.Ca.camera.position=et)};
f.Yr=function(a){this.Si.style.background=null!=a?r(a)?a:null!=a.Ay?"-webkit-linear-gradient(top, "+a.Ay+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.wG=function(){return this.jq};f.sG=function(){return this.Si};f.Xk=function(a){this.Si=a;null!=this.Ca||this.sa(a);this.Ca.container=a};f.Ev=function(a){this.dispatchEvent(a)};
f.sa=function(a){null!=this.Ca&&(I(this.Ca),this.Ca.ie(),this.Ca=null);if(null==this.ll)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Ca=new this.ll;this.Ca.orientation=this.orientation;this.Xk(a||this.Si||document.body);this.Ca.sa();F(this.Ca,"k",function(a){this.dispatchEvent({type:"k",value:a.value})}.bind(this));F(this.Ca,"E",this.Ev.bind(this))};f.add=function(a){this.km&&(!0==a.isSelectedVolume&&(this.jq=a),this.fl.push(a),this.Ca.add(a))};f.isEnabled=function(){return this.km};
function ft(a){null!=a.Jf&&(R(a.Jf),delete a.Jf)}function gt(a){a.Jf=Q("div",{id:"DisabledOverlay_"+B()});a.Jf.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=Q("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.Jf.appendChild(c);a.Si.appendChild(a.Jf)}
f.Kb=function(a){(this.km=!1!==a)?yk(this.Jf,200,function(){this.Jf.style.visibility="hidden";ft(this)}.bind(this)):(null!=this.Jf||gt(this),this.Jf.style.visibility="visible",vk(this.Jf,200,function(){}.bind(this)))};f.restore=function(){this.sa();ht(this);null!=this.bq&&this.Zr(this.bq);null!=this.Zc&&this.Yr(this.Zc);this.k()};f.dL=function(){D(this.fl,function(a){null!=a&&this.Ca.remove(a)}.bind(this))};function ht(a){D(a.fl,function(a){this.Ca.add(a)}.bind(a))}f.k=function(){this.km&&this.Ca.k()};
f.o=function(){null!=this.Ca&&this.Ca.Xe()};f.g=function(){dt.d.g.call(this);null!=this.Ca&&(this.Ca.ie(),delete this.Ca);ft(this);null!=this.Zc&&delete this.Zc;null!=this.bq&&delete this.bq;null!=this.Ao&&(null!=this.Ao.g&&(this.Ao.stop(),this.Ao.g()),delete this.Ao);delete this.km;delete this.ll;delete this.Si;delete this.orientation;sb(this.fl);delete this.jq;delete this.QP};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",et);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",dt.prototype.ll);v("xiv.vis.XtkPlane.prototype.orientation",dt.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",dt.prototype.Ca);v("xiv.vis.XtkPlane.prototype.container",dt.prototype.Si);v("xiv.vis.XtkPlane.prototype.getRenderer",dt.prototype.Ra);v("xiv.vis.XtkPlane.prototype.getOrientation",dt.prototype.Tb);v("xiv.vis.XtkPlane.prototype.setCamera",dt.prototype.Zr);v("xiv.vis.XtkPlane.prototype.setBackground",dt.prototype.Yr);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",dt.prototype.wG);v("xiv.vis.XtkPlane.prototype.getContainer",dt.prototype.sG);v("xiv.vis.XtkPlane.prototype.setContainer",dt.prototype.Xk);v("xiv.vis.XtkPlane.prototype.init",dt.prototype.sa);v("xiv.vis.XtkPlane.prototype.add",dt.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",dt.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",dt.prototype.Kb);v("xiv.vis.XtkPlane.prototype.restore",dt.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",dt.prototype.dL);v("xiv.vis.XtkPlane.prototype.render",dt.prototype.k);v("xiv.vis.XtkPlane.prototype.updateStyle",dt.prototype.o);v("xiv.vis.XtkPlane.prototype.dispose",dt.prototype.g);function it(){dt.call(this);this.orientation="V";this.ll=ct}w(it,dt);v("xiv.vis.XtkPlane3D",it);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function jt(a){$c.call(this);this.ea=null;this.q=a;a=E||ic&&!pc("531")&&"TEXTAREA"==a.tagName;this.zc=new dj(this);this.zc.D(this.q,a?["keydown","paste","cut","drop","input"]:"input",this)}w(jt,$c);
jt.prototype.handleEvent=function(a){if("input"==a.type)E&&pc(10)&&0==a.keyCode&&0==a.charCode||(kt(this),gc&&this.q!=Kh(this.q).activeElement||this.dispatchEvent(lt(a)));else if("keydown"!=a.type||gl(a)){var b="keydown"==a.type?this.q.value:null;E&&229==a.keyCode&&(b=null);var c=lt(a);kt(this);this.ea=Yf(function(){this.ea=null;this.q.value!=b&&this.dispatchEvent(c)},0,this)}};function kt(a){null!=a.ea&&(ba.clearTimeout(a.ea),a.ea=null)}function lt(a){a=new Hc(a.Nc);a.type="input";return a}
jt.prototype.f=function(){jt.d.f.call(this);this.zc.g();kt(this);delete this.q};function mt(a,b,c){hj.call(this,a);nt(this,b||"#f00");this.className=c||"goog-hsv-palette";this.ja=ti(this.N())}w(mt,hj);f=mt.prototype;f.bs=function(a){a!=this.Kl&&(nt(this,a),ot(this),this.dispatchEvent("action"))};function nt(a,b){var c=Jj(b).jj,d=Pj(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.fd=[e,l,d];a.fd[0]/=360;a.Kl=c}
function pt(a,b,c,d){if(null!=b||null!=c||null!=d)a.fd[0]=null!=b?b:a.fd[0],a.fd[1]=null!=c?c:a.fd[1],a.fd[2]=null!=d?d:a.fd[2],b=[360*a.fd[0],a.fd[1],a.fd[2]],b=Rj(b[0],b[1],b[2]),a.Kl=b,ot(a),a.dispatchEvent("action")}f.Me=function(){return!1};
f.B=function(){var a=this.N(),b=E&&!pc("7")?" "+(this.className+"-noalpha"):"",c=a.B("DIV",this.className+"-hs-backdrop");this.hm=a.B("DIV",this.className+"-hs-handle");this.mj=a.B("DIV",this.className+"-hs-image",this.hm);this.el=a.B("DIV",this.className+"-v-image");this.np=a.B("DIV",this.className+"-v-handle");this.ls=a.B("DIV",this.className+"-swatch");this.Gk=a.B("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.B("label",null,this.Gk);this.q=a.B("DIV",this.className+b,
c,this.mj,this.el,this.np,this.ls,d)};f.fb=function(){mt.d.fb.call(this);ot(this);var a=this.gb();a.D(this.a(),"mousedown",this.bh);this.Yn||(this.Yn=new jt(this.Gk));a.D(this.Yn,"input",this.lI)};f.f=function(){mt.d.f.call(this);delete this.mj;delete this.hm;delete this.el;delete this.np;delete this.ls;delete this.Gk;this.Yn&&(this.Yn.g(),delete this.Yn);Vc(this.ev);Vc(this.fv)};
function ot(a){if(a.la){var b=a.fd[1],c=a.fd[2],d=a.mj.offsetWidth*a.fd[0];a.Se()&&(d=a.mj.offsetWidth-d);var e=Math.ceil(a.hm.offsetWidth/2),d=d-e,b=a.mj.offsetHeight*(1-b),b=b-Math.ceil(a.hm.offsetHeight/2),e=a.hm,h=a.Se();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.el.offsetTop-Math.floor(a.np.offsetHeight/2)+(255-c)/255*a.el.offsetHeight;a.np.style.top=b+"px";Ti(a.mj,c/255);xi(a.el,"background-color",Rj(360*a.fd[0],a.fd[1],
255));xi(a.ls,"background-color",a.Kl);xi(a.ls,"color",127.5<a.fd[2]?"#000":"#fff");var k;try{k=Jj(a.Gk.value).jj}catch(l){}a.Kl!=k&&(a.Gk.value=a.Kl)}}f.bh=function(a){if(a.target==this.el||a.target==this.np){var b=Si(this.el);this.nA(b,a);this.ev=F(this.ja,"mousemove",ta(this.nA,this,b));this.fv=F(this.ja,"mouseup",this.hg,!1,this)}else if(a.target==this.mj||a.target==this.hm)b=Si(this.mj),this.mA(b,a),this.ev=F(this.ja,"mousemove",ta(this.mA,this,b)),this.fv=F(this.ja,"mouseup",this.hg,!1,this)};
f.nA=function(a,b){b.preventDefault();var c=wi(this.N()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);pt(this,null,null,c)};f.mA=function(a,b){b.preventDefault();var c=wi(this.N()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;pt(this,d,c,null)};f.hg=function(){Vc(this.ev);Vc(this.fv)};
f.lI=function(){/^#?[0-9a-f]{6}$/i.test(this.Gk.value)&&this.bs(this.Gk.value)};function qt(){zs.call(this);this.Bf("Color");this.Ri=new mt;this.Ri.k();F(this.Ri,"action",this.oc.bind(this));P(this.Ri.a(),this.constructor.CSS.sD);this.vn=Q("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":qt.CSS.tD});Yh(this.vn,this.Ri.a());Q("div",{id:this.constructor.ID_PREFIX+"_ColorPalette_"+B(),"class":qt.CSS.EM});this.a().appendChild(this.vn);this.wj(this.vn)}w(qt,zs);v("xiv.ui.ColorPaletteController",qt);qt.ID_PREFIX="xiv.ui.ColorPaletteController";
qt.CSS_SUFFIX={vM:"colorsquare",tD:"colorpaletteholder",sD:"colorpalette",Hj:"closebutton"};qt.prototype.refresh=function(){var a=Math.floor(255*this[As].color[0]),b=Math.floor(255*this[As].color[1]),c=Math.floor(255*this[As].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.Ri.bs(Nj([a,b,c]))};qt.prototype.oc=function(a){this.dispatchEvent({type:"D",color:Pj(a.target.Kl).map(function(a){return a/255})})};
qt.prototype.f=function(){qt.d.f.call(this);I(this.Ri);this.Ri.g();delete this.Ri;R(this.vn);delete this.vn};v("xiv.ui.ColorPaletteController.ID_PREFIX",qt.ID_PREFIX);v("xiv.ui.ColorPaletteController.CSS_SUFFIX",qt.CSS_SUFFIX);v("xiv.ui.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ColorPaletteController.prototype.refresh",qt.prototype.refresh);v("xiv.ui.ColorPaletteController.prototype.dispatchComponentEvent",qt.prototype.oc);
v("xiv.ui.ColorPaletteController.prototype.disposeInternal",qt.prototype.f);function rt(){zs.call(this);this.Bf("Slider")}w(rt,zs);v("xiv.ui.SliderBase",rt);rt.ID_PREFIX="xiv.ui.SliderBase";rt.CSS_SUFFIX={qa:"slider",Ig:"slider-thumb",px:"slider-thumb-hover",Bh:"slider-track",SN:"slider-track-hover",xE:"valueinput",zE:"valueinput-display",yE:"valueinput-box"};f=rt.prototype;f.mq=2;f.Ta=null;f.s=null;f.Jo=function(a){this.mq=a};f.k=function(a){rt.d.k.call(this,a);this.Nt();this.Ta=this.Mt(this.JK.bind(this))};
f.Nt=function(){this.s=new or;this.wj(this.s);this.s.Lb(0);this.s.Eb(1);this.s.Dc(.01);this.s.C(1);P(this.s.a(),rt.CSS.qa);P(this.s.Ff,rt.CSS.Ig);P(this.s.sh,rt.CSS.Bh);F(this.s,"u",this.oc.bind(this));this.s.a().style.zIndex=0};f.Mt=function(a){var b=new op;b.k(this.a());P(b.a(),rt.CSS.xE);P(b.yc,rt.CSS.zE);P(b.ga,rt.CSS.yE);F(b,"h",a);return b};f.JK=function(a){window.console.log("INPUT",a);a=parseFloat(this.Ta.w());a=hd(a,this.s.ka(),this.s.S());this.Ta.C(a);this.s.C(a)};f.SH=function(){return this.Ta};
f.C=function(a){this.s.C(a);this.Ta.Kb(!1);this.Ta.C(a);this.Ta.Kb(!0)};f.Eb=function(a){null!=this.Ta&&this.Ta.Eb(a);this.s.Eb(a);this.refresh()};f.Dc=function(a){null!=this.Ta&&this.Ta.Dc(a);this.s.Dc(a);this.refresh()};f.Lb=function(a){null!=this.Ta&&this.Ta.Lb(a);this.s.Lb(a);this.refresh()};f.w=function(){return this.s.w()};f.S=function(){return this.s.S()};f.Od=function(){return this.s.Od()};f.ka=function(){return this.s.ka()};
f.oc=function(){var a=this.s.w().toFixed(this.mq),b=this.s.Wz();null!=this.Ta&&this.Ta.C(a);this.dispatchEvent({type:"D",value:a,nJ:this.s.ka(),hJ:this.s.S(),MP:b})};f.dp=function(a){null!=a&&(this.s.Od()!==a.Od()&&a.Dc(this.s.Od()),this.s.ka()!==a.ka()&&a.Lb(this.s.ka()),this.s.S()!==a.S()&&a.Eb(this.s.S()),this.s.w()!==a.w()&&a.C(this.s.w()))};f.refresh=function(){var a=this.s.w();this.s instanceof U&&this.s.o();this.s.C(0);this.s.C(a);this.dp(this.Ta)};
f.f=function(){rt.d.f.call(this);delete this.mq;null!=this.s&&(this.s.g(),delete this.s);null!=this.Ta&&(this.Ta.g(),delete this.Ta)};v("xiv.ui.SliderBase.ID_PREFIX",rt.ID_PREFIX);v("xiv.ui.SliderBase.CSS_SUFFIX",rt.CSS_SUFFIX);v("xiv.ui.SliderBase.prototype.slider",rt.prototype.s);v("xiv.ui.SliderBase.prototype.displayDecimals",rt.prototype.mq);v("xiv.ui.SliderBase.prototype.valueInput",rt.prototype.Ta);v("xiv.ui.SliderBase.prototype.createSlider",rt.prototype.Nt);
v("xiv.ui.SliderBase.prototype.createInputBox",rt.prototype.Mt);v("xiv.ui.SliderBase.prototype.dispatchComponentEvent",rt.prototype.oc);v("xiv.ui.SliderBase.prototype.syncInputToSlider",rt.prototype.dp);v("xiv.ui.SliderBase.prototype.setDisplayDecimals",rt.prototype.Jo);v("xiv.ui.SliderBase.prototype.render",rt.prototype.k);v("xiv.ui.SliderBase.prototype.getValueInput",rt.prototype.SH);v("xiv.ui.SliderBase.prototype.setValue",rt.prototype.C);v("xiv.ui.SliderBase.prototype.setStep",rt.prototype.Dc);
v("xiv.ui.SliderBase.prototype.setMaximum",rt.prototype.Eb);v("xiv.ui.SliderBase.prototype.setMinumum",rt.prototype.Lb);v("xiv.ui.SliderBase.prototype.getValue",rt.prototype.w);v("xiv.ui.SliderBase.prototype.getStep",rt.prototype.Od);v("xiv.ui.SliderBase.prototype.getMaximum",rt.prototype.S);v("xiv.ui.SliderBase.prototype.getMinumum",rt.prototype.ka);v("xiv.ui.SliderBase.prototype.refresh",rt.prototype.refresh);v("xiv.ui.SliderBase.prototype.disposeInternal",rt.prototype.f);function st(){rt.call(this);this.Bf("Master Opacity")}w(st,rt);v("xiv.ui.SliderController",st);st.ID_PREFIX="xiv.ui.SliderController";v("xiv.ui.SliderController.ID_PREFIX",st.ID_PREFIX);function tt(){rt.call(this);this.Bf("TwoThumb")}w(tt,rt);v("xiv.ui.TwoThumbSliderController",tt);tt.ID_PREFIX="xiv.ui.TwoThumbSliderController";tt.CSS_SUFFIX={qa:"slider",Bh:"slider-track",Ig:"slider-thumb",mE:"slider-thumb-extent",HM:"extent-input"};f=tt.prototype;f.Nd=null;f.k=function(a){tt.d.k.call(this,a);this.Ta.SB("left");this.Nd=this.Mt(this.NJ.bind(this))};f.DG=function(){return this.Nd};
f.Nt=function(){this.s=new os;this.s.B();var a=this.s.a();a.setAttribute("id","ThresholdSlider_"+B());P(a,rt.CSS.qa);P(a,tt.CSS.qa);var b=Q("div",{id:"ThwoThumbSlider_track_"+B(),"class":rt.CSS.Bh});a.appendChild(b);P(b,tt.CSS.Bh);this.wj(this.s);P(this.s.ra,rt.CSS.Ig);P(this.s.ra,tt.CSS.Ig);P(this.s.ra,tt.CSS.RN);rk(this.s.ra,rt.CSS.px);P(this.s.qc,rt.CSS.Ig);P(this.s.qc,tt.CSS.Ig);P(this.s.qc,tt.CSS.mE);rk(this.s.qc,rt.CSS.px);F(this.s,"change",this.oc.bind(this))};
f.refresh=function(){tt.d.refresh.call(this);null!=this.Nd&&this.dp(this.Nd);var a=this.me(),b=parseInt(a.min),c=parseInt(a.max);if(null!=a){if(b!=this.s.ka()||c!=this.s.S())this.s.Lb(b),this.s.Eb(c),this.s.yj(c-b),this.s.C(b),this.s.Dc(1);b=T(this.s.ra).width;a=this.s.S()-this.s.ka();c=T(this.s.a()).width-b;b=c*((this.s.w()-this.s.ka())/a);a=c*(this.s.td()/a);this.s.ra.style.left=b.toString()+"px";this.s.qc.style.left=a.toString()+"px"}};
f.dp=function(a){tt.d.dp.call(this,a);null!=this.Nd&&a==this.Nd&&this.Nd.C(this.s.td()+this.s.w())};f.yj=function(a,b){this.s.yj(a,b)};f.Af=function(a){this.s.Af(a)};f.td=function(){return this.s.td()};f.NJ=function(){var a=parseInt(this.Nd.w());this.s.Af(a-this.s.w())};f.oc=function(){var a=this.s.w(),b=this.s.td()+a;this.Ta.C(a);this.Nd.C(b);this.dispatchEvent({type:"D",lower:a,upper:b})};
f.f=function(){null!=this.s&&(I(this.s),null==this.s.La&&(this.s.La=new gq),this.s.g(),delete this.s);tt.d.f.call(this);null!=this.Nd&&(this.Nd.g(),delete this.Nd)};v("xiv.ui.TwoThumbSliderController.ID_PREFIX",tt.ID_PREFIX);v("xiv.ui.TwoThumbSliderController.CSS_SUFFIX",tt.CSS_SUFFIX);v("xiv.ui.TwoThumbSliderController.prototype.refresh",tt.prototype.refresh);v("xiv.ui.TwoThumbSliderController.prototype.extentInput",tt.prototype.Nd);v("xiv.ui.TwoThumbSliderController.prototype.getExtentInput",tt.prototype.DG);
v("xiv.ui.TwoThumbSliderController.prototype.setValueAndExtent",tt.prototype.yj);v("xiv.ui.TwoThumbSliderController.prototype.setExtent",tt.prototype.Af);v("xiv.ui.TwoThumbSliderController.prototype.getExtent",tt.prototype.td);v("xiv.ui.TwoThumbSliderController.prototype.dispatchComponentEvent",tt.prototype.oc);v("xiv.ui.TwoThumbSliderController.prototype.disposeInternal",tt.prototype.f);function ut(){zs.call(this);this.Fj=[]}w(ut,zs);v("xiv.ui.MasterController3D",ut);ut.ID_PREFIX="xiv.ui.MasterController3D";ut.CSS_SUFFIX={};ut.prototype.add=function(a){this.Fj.push(a);this.my(a,st);1==this.Fj.length&&Yh(document.body,this.a())};ut.prototype.f=function(){ut.d.f.call(this);Jb(this.Fj);delete this.Fj};v("xiv.ui.MasterController3D.ID_PREFIX",ut.ID_PREFIX);v("xiv.ui.MasterController3D.CSS_SUFFIX",ut.CSS_SUFFIX);v("xiv.ui.MasterController3D.CONTROLLERS",{FO:"Visible",sN:"Opacity"});
v("xiv.ui.MasterController3D.prototype.add",ut.prototype.add);v("xiv.ui.MasterController3D.prototype.disposeInternal",ut.prototype.f);function vt(){ut.call(this)}w(vt,ut);v("xiv.ui.AnnotationsController3D",vt);vt.ID_PREFIX="xiv.ui.AnnotationsController3D";vt.CSS_SUFFIX={};vt.prototype.add=function(a){vt.d.add.call(this,a);this.pt(a,Gs);this.nt(a,qt)};v("xiv.ui.AnnotationsController3D.ID_PREFIX",vt.ID_PREFIX);v("xiv.ui.AnnotationsController3D.CSS_SUFFIX",vt.CSS_SUFFIX);v("xiv.ui.AnnotationsController3D.prototype.add",vt.prototype.add);function wt(){zs.call(this);this.fl=[]}w(wt,zs);v("xiv.ui.MasterController2D",wt);wt.ID_PREFIX="xiv.ui.MasterController2D";wt.CSS_SUFFIX={};wt.prototype.add=function(){};wt.prototype.f=function(){wt.d.f.call(this);Jb(this.fl);delete this.fl};v("xiv.ui.MasterController2D.ID_PREFIX",wt.ID_PREFIX);v("xiv.ui.MasterController2D.CSS_SUFFIX",wt.CSS_SUFFIX);v("xiv.ui.MasterController2D.prototype.add",wt.prototype.add);v("xiv.ui.MasterController2D.prototype.disposeInternal",wt.prototype.f);function xt(){ut.call(this)}w(xt,ut);v("xiv.ui.VolumeController3D",xt);xt.ID_PREFIX="xiv.ui.VolumeController3D";xt.CSS_SUFFIX={};f=xt.prototype;f.py=function(a){var b=this.rd(Gs,"Volume Rendering",function(b){a.volumeRendering=b.checked});Ds(a,b);this.Df.push(b);b.fa.Td(!1)};f.qK=function(a){null!=this.ep&&(this.ep.me().lowerThreshold=parseFloat(a.lower),this.ep.me().upperThreshold=parseFloat(a.upper))};f.ep=null;
f.ny=function(a){var b=this.rd(tt,"Threshold",this.qK.bind(this));b.wg(a);Ds(a,b);this.Df.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1E4,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=1E4,a.upperThreshold=d);var e=b.fa;e.Lb(c);e.Eb(d);e.yj(d-c);e.C(c);e.Dc(1);e.Af(d-c);a.upperThreshold=d;a.lowerThreshold=c;e.a().style.top="8px";b.Ta.a().style.top="-1px";b.Nd.a().style.top="-1px";b.Ta.a().style.left="calc(100% - 112px)";b.Ta.yc.style.textAlign="left";b.Ta.ga.style.textAlign=
"left";this.ep=b};f.add=function(a){xt.d.add.call(this,a);this.py(a);this.ny(a)};f.o=function(){xt.d.o.call(this)};f.f=function(){xt.d.f.call(this);this.ep.g()};v("xiv.ui.VolumeController3D.ID_PREFIX",xt.ID_PREFIX);v("xiv.ui.VolumeController3D.DEFAULT_THRESHOLD",1E4);v("xiv.ui.VolumeController3D.CSS_SUFFIX",xt.CSS_SUFFIX);v("xiv.ui.VolumeController3D.prototype.add_volumeRendering",xt.prototype.py);v("xiv.ui.VolumeController3D.prototype.add_threshold",xt.prototype.ny);
v("xiv.ui.VolumeController3D.prototype.add",xt.prototype.add);v("xiv.ui.VolumeController3D.prototype.updateStyle",xt.prototype.o);v("xiv.ui.VolumeController3D.prototype.disposeInternal",xt.prototype.f);function yt(){ut.call(this)}w(yt,ut);v("xiv.ui.MeshController3D",yt);yt.ID_PREFIX="xiv.ui.MeshController3D";yt.CSS_SUFFIX={};yt.prototype.add=function(a){yt.d.add.call(this,a);this.pt(a,Gs);this.nt(a,qt)};v("xiv.ui.MeshController3D.ID_PREFIX",yt.ID_PREFIX);v("xiv.ui.MeshController3D.CSS_SUFFIX",yt.CSS_SUFFIX);v("xiv.ui.MeshController3D.prototype.add",yt.prototype.add);v("xiv.ui.MeshController3D.prototype.disposeInternal",yt.prototype.f);function zt(){zs.call(this)}w(zt,zs);v("xiv.ui.Histogram",zt);zt.ID_PREFIX="xiv.ui.Histogram";zt.CSS_SUFFIX={lD:"canvas",JD:"linecanvas",OD:"max",VD:"min",pD:"clipmax",qD:"clipmin"};zt.LEVEL_CUTOFF=.999;f=zt.prototype;f.Ga=null;f.Qc=null;f.ip=null;f.rs=null;f.qr=null;f.DF="rgb(40,40,40)";f.Bc=[null,null];f.Zf=[null,null];f.xI="rgb(90,90,90)";f.Im=[0,1E3];f.ad=[0,1E3];f.Et=!1;f.vC=function(a,b){this.Im[0]=a;this.Im[1]=b};
f.Xv=function(a,b){if(this.Et)this.ad[0]=a,this.ad[1]=b;else{var c=this.eg();this.ad[0]=c.min;this.ad[1]=c.max}};f.uC=function(a,b){this.vC(a,b);this.Xv(a,b)};
f.k=function(a){zt.d.k.call(this,a);this.wj(this);this.Oh=Q("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.lD});this.a().appendChild(this.Oh);this.Ti=this.Oh.getContext("2d");this.Ti.fillStyle=this.DF;this.ci=Q("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.JD});this.a().appendChild(this.ci);this.mg=this.ci.getContext("2d");this.Bc[0]=Q("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.VD},"-1000");
this.a().appendChild(this.Bc[0]);this.Bc[1]=Q("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.OD},"1000");this.a().appendChild(this.Bc[1]);this.Zf[0]=Q("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.qD},"-1000");this.a().appendChild(this.Zf[0]);this.Zf[1]=Q("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.pD},"1000");this.a().appendChild(this.Zf[1])};f.me=function(){return zt.d.me.call(this)};
f.Ky=function(a){this.Et=a;!1==a&&this.Xv(null,null)};function At(a){if(null==a.Ga){var b=a.me(),c=b.max;D(b.image,function(a){D(a,function(a){D(a,function(a){if(null==this.Ga){this.Ga=[];for(var b=0,b=0;b<=c;b++)this.Ga.push(0)}this.Ga[parseInt(a)]++;this.rs++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Ga){var d,e=0;a.ip=Qb(a.Ga.length);null==a.Qc&&(a.Qc=[],a.qr=0,D(a.Ga,function(a,b){d=a/this.rs;this.Qc.push(d);e+=d;this.ip[b]=e;this.qr=Math.max(this.qr,d)}.bind(a)))}}}
f.kz=function(){if(null!=this.me()){var a=T(this.Oh),b=a.width,a=a.height;if(0!=b&&0!=a&&(this.Oh.height=a,this.Oh.width=b,this.ci.height=a,this.ci.width=b,At(this),null!=this.Ga)){for(var c=0,d=this.Im[0];d<this.Im[1]+1;d++)this.Qc[d]>c&&(c=this.Qc[d]);for(var e=[],d=this.ad[0];d<this.ad[1]+1;d++)e.push(this.Qc[d]/c);for(var b=(b-0)/(this.ad[1]-this.ad[0]),c=1>b?1:Math.round(b),h=0,k=0,l=e.length,d=0;d<l;d++)h=Math.round(a*e[d]),k=Math.round(d*b),isNaN(h)||null==h||(this.Ti.fillStyle=this.xI,this.Ti.fillRect(c*
k,a,c,-h))}}};f.hA=function(){var a=Math.round(.1*this.Qc.length),b=Math.round(.9*this.Qc.length),c,d=0;for(c=1;c<a;c++)this.Qc[c]>d&&(d=c);var e=this.Qc[d],h=d;for(c=d+1;c<a;c++)this.Qc[c]<e&&(h=c,e=this.Qc[c]);d=this.Qc[a];e=0;for(c=a+1;c<b;c++)this.Qc[c]<d&&(e=c,d=this.Qc[c]);return[h,e]};f.Pz=function(a){if(null!=this.Ga)for(var b=0,c=0,d=this.Ga.length;c<d;c++)if(b+=this.Ga[c],b/this.rs>=a)return c};
f.lz=function(){if(null!=this.me()){var a=T(this.ci),b=a.width,a=a.height;this.ci.width=b;var c=this.eg(),d=(b-0)/(this.ad[1]-this.ad[0]),e=-1*this.ad[0]*d,h=c.hh*d+e,c=c.kj*d+e,k=this.ad[0]*d+e,d=this.ad[1]*d+e,l=(a-0)/(c-h),e=-1*h*l,n=k*l+e,e=d*l+e;this.Bc[0].style.width="auto";this.Bc[1].style.width="auto";var p=new nk(this.a()),l=p.left,p=p.right;this.Bc[0].style.left=h.toString()+"px";h=sk(this.Bc[0],l,p);this.Bc[1].style.left=c.toString()+"px";var m=sk(this.Bc[1],l,p);h.right+5>m.left&&(this.Bc[0].innerHTML+=
", "+this.Bc[1].innerHTML,this.Bc[1].innerHTML="",sk(this.Bc[0],l,p));h=new nk(this.Oh);this.Zf[0].style.left=h.left.toString()+"px";this.Zf[1].style.left=(h.right-T(this.Zf[1]).width).toString()+"px";this.mg.beginPath();this.mg.strokeStyle="black";this.mg.moveTo(k,a-n);this.mg.lineTo(d,a-e);this.mg.lineWidth=.5;this.mg.stroke();0<c&&c<b&&(this.mg.moveTo(c,a),this.mg.lineTo(c,a-15),this.mg.lineWidth=.5,this.mg.stroke())}};
f.refresh=function(){if(null!=this.me()){var a=this.eg();this.Bc[0].innerHTML="Min: "+a.hh;this.Bc[1].innerHTML="Max: "+a.kj;this.Zf[0].innerHTML=this.ad[0];this.Zf[1].innerHTML=this.ad[1]}this.kz();this.lz()};
f.f=function(){zt.d.f.call(this);this.Bc=[null,null];delete this.Bc;this.Zf=[null,null];delete this.Zf;null!=this.Oh&&(R(this.Oh),delete this.Oh);null!=this.ci&&(R(this.ci),delete this.ci);null!=this.Ga&&(Jb(this.Ga),delete this.Ga);null!=this.Qc&&(Jb(this.Qc),delete this.Qc);null!=this.ip&&(Jb(this.ip),delete this.ip);delete this.rs;delete this.qr;delete this.Ti;delete this.mg;Jb(this.Im);delete this.Im;Jb(this.ad);delete this.ad;delete this.Et};v("xiv.ui.Histogram.EventType",{});
v("xiv.ui.Histogram.ID_PREFIX",zt.ID_PREFIX);v("xiv.ui.Histogram.CSS_SUFFIX",zt.CSS_SUFFIX);v("xiv.ui.Histogram.LEVEL_CUTOFF",zt.LEVEL_CUTOFF);v("xiv.ui.Histogram.prototype.render",zt.prototype.k);v("xiv.ui.Histogram.prototype.draw",zt.prototype.kz);v("xiv.ui.Histogram.prototype.drawLine",zt.prototype.lz);v("xiv.ui.Histogram.prototype.clipToZoom",zt.prototype.Ky);v("xiv.ui.Histogram.prototype.setZoomRange",zt.prototype.vC);v("xiv.ui.Histogram.prototype.setClipRange",zt.prototype.Xv);
v("xiv.ui.Histogram.prototype.setZoomAndClipRange",zt.prototype.uC);v("xiv.ui.Histogram.prototype.getLevelByPixelThreshold",zt.prototype.Pz);v("xiv.ui.Histogram.prototype.getVisiblePixelRange",zt.prototype.hA);v("xiv.ui.Histogram.prototype.refresh",zt.prototype.refresh);v("xiv.ui.Histogram.prototype.disposeInternal",zt.prototype.f);function Bt(){zs.call(this);this.Pi=new Yo("Reset");this.wj(this.Pi);P(this.Pi.a(),"xiv-ui-buttoncontroller-element");F(this.Pi.a(),"click",this.oc.bind(this))}w(Bt,zs);v("xiv.ui.ButtonController",Bt);Bt.ID_PREFIX="xiv.ui.ButtonController";Bt.CSS_SUFFIX={};Bt.prototype.oc=function(){this.dispatchEvent({type:"D",checked:this.Pi.eh()})};Bt.prototype.f=function(){Bt.d.f.call(this);I(this.Pi);I(this.Pi.a());this.Pi.g();delete this.Pi};v("xiv.ui.ButtonController.ID_PREFIX",Bt.ID_PREFIX);
v("xiv.ui.ButtonController.CSS_SUFFIX",Bt.CSS_SUFFIX);v("xiv.ui.ButtonController.prototype.dispatchComponentEvent",Bt.prototype.oc);v("xiv.ui.ButtonController.prototype.disposeInternal",Bt.prototype.f);function Ct(){zs.call(this);this.Fj=[]}w(Ct,zs);v("xiv.ui.MasterController",Ct);Ct.ID_PREFIX="xiv.ui.MasterController";Ct.CSS_SUFFIX={};Ct.prototype.add=function(a){this.Fj.push(a)};Ct.prototype.f=function(){Ct.d.f.call(this);Jb(this.Fj);delete this.Fj};v("xiv.ui.MasterController.ID_PREFIX",Ct.ID_PREFIX);v("xiv.ui.MasterController.CSS_SUFFIX",Ct.CSS_SUFFIX);v("xiv.ui.MasterController.CONTROLLERS",{});v("xiv.ui.MasterController.prototype.add",Ct.prototype.add);
v("xiv.ui.MasterController.prototype.disposeInternal",Ct.prototype.f);function Dt(){Ct.call(this);this.n={min:null,max:null,Oi:null,Tg:null,ig:null,Ub:null,reset:null,cQ:null,ge:null,Xo:[]}}w(Dt,Ct);v("xiv.ui.LevelsController",Dt);Dt.ID_PREFIX="xiv.ui.LevelsController";Dt.CSS_SUFFIX={};f=Dt.prototype;f.Ua=null;f.uG=function(){return this.n};function Et(a){var b=a.n.ig.hA();a.n.Ub.yj(b[0],b[1]-b[0])}
f.add=function(a){Dt.d.add.call(this,a);this.Ua=a;a=this.rd(tt,"Zoom Range",this.QJ.bind(this));a.wg(this.Ua);Ds(this.Ua,a);this.Ve.push(a);a.Ta.ga.style.textAlign="left";a.Ta.yc.style.textAlign="left";this.n.Ub=a;Ft(this);Gt(this);Ht(this);this.n.min=this.rd(st,"Minimum",this.WJ.bind(this));this.n.min.wg(this.Ua);Ds(this.Ua,this.n.min);this.Ve.push(this.n.min);this.n.min.Eb(1E3);this.n.min.Lb(0);this.n.min.C(0);this.n.min.Dc(1);this.n.min.Jo(0);this.n.min.Io(this.Ua.min);this.n.min.refresh();a=this.rd(st,
"Maximum",this.UJ.bind(this));a.wg(this.Ua);Ds(this.Ua,a);this.Ve.push(a);a.Eb(1E3);a.Lb(0);a.C(1E3);a.Dc(1);a.Jo(0);a.Io(this.Ua.max);a.refresh();this.n.max=a;a=this.rd(st,"Brightness",this.EJ.bind(this));a.wg(this.Ua);Ds(this.Ua,a);this.Ve.push(a);a.Eb(100);a.Lb(0);a.C(0);a.Dc(1);a.Jo(0);a.refresh();this.n.Oi=a;a=this.rd(st,"Contrast",this.IJ.bind(this));a.wg(this.Ua);Ds(this.Ua,a);this.Ve.push(a);a.Eb(100);a.Lb(0);a.C(0);a.Dc(1);a.Jo(0);a.refresh();this.n.Tg=a;a=this.rd(Bt,null,this.mK.bind(this));
Ds(this.Ua,a);this.Ve.push(a);a.wg(this.Ua);this.n.reset=a;this.n.Xo.push(this.n.min);this.n.Xo.push(this.n.max);this.n.Xo.push(this.n.Oi);this.n.Xo.push(this.n.Tg);It(this)};
function It(a){D(a.n.Xo,function(a){P(a.zb,"xiv-ui-levelscontroller-sliderlabel");P(a.a(),"xiv-ui-levelscontroller-slidercontroller");P(a.fa.a(),"xiv-ui-levelscontroller-slider");P(a.Ta.a(),"xiv-ui-levelscontroller-slidervalue");a.fa.o()}.bind(a));P(a.n.Ub.zb,"xiv-ui-levelscontroller-twothumbsliderlabel");P(a.n.Ub.zb,"xiv-ui-levelscontroller-sliderlabel");P(a.n.Ub.a(),"xiv-ui-levelscontroller-twothumbslidercontroller");P(a.n.Ub.fa.a(),"xiv-ui-levelscontroller-twothumbslider");P(a.n.Ub.Ta.a(),"xiv-ui-levelscontroller-twothumbslidervalue");
P(a.n.Ub.Nd.a(),"xiv-ui-levelscontroller-twothumbsliderextent")}f.mK=function(){D([this.n.min,this.n.max],function(a){a.C(a.defaultValue);a.refresh();this.n.ge.Td(!1)}.bind(this));Et(this)};function Ht(a){a.n.ge=a.rd(Gs,"Clip X-Axis to Zoom");Ds(a.Ua,a.n.ge);a.Ve.push(a.n.ge);a.n.ge.fa.a().style.left="calc(100% - 15px)";a.n.ge.zb.style.fontSize="10px";F(a.n.ge,"D",function(a){null!=this.n.ig&&null!=this.n.Ub&&(this.n.ig.Ky("true"==a.checked.toString()),this.n.Ub.refresh())}.bind(a))}
function Gt(a){var b=a.rd(zt,null,function(){}.bind(a));b.wg(a.Ua);Ds(a.Ua,b);a.Ve.push(b);b.refresh();a.n.ig=b}f.QJ=function(){null!=this.n.ig&&(this.n.ig.uC(this.n.Ub.w(),this.n.Ub.td()+this.n.Ub.w()),this.n.ig.refresh())};function Jt(a){var b=a.n.min.eg();D([a.n.max,a.n.min],function(a,d){a.Eb(b.max);a.Lb(b.min);a.C(0==d?b.max:b.min)});Ft(a);a.n.ig.refresh()}
function Ft(a){if(null!=a.n.min){var b=a.n.min.eg();a.n.Ub.Lb(b.min);a.n.Ub.Eb(b.max);a.n.Ub.C(b.min);a.n.Ub.Dc(1);a.n.Ub.Af(b.max-b.min)}}f.WJ=function(){null!=this.n.max&&null!=this.n.min&&(this.n.min.ka()!=this.Ua.min&&Jt(this),this.Ua.windowLow=this.n.min.w(),Kt(this,this.n.min))};f.UJ=function(){null!=this.n.max&&null!=this.n.min&&(this.n.max.S()!=this.Ua.max&&Infinity!=this.Ua.max&&Jt(this),this.Ua.windowHigh=this.n.max.w(),Kt(this,this.n.max))};
function Kt(a,b){switch(b){case a.n.min:a.n.min.w()>=a.n.max.w()&&a.n.max.C(a.n.min.w()+1);case a.n.max:a.n.max.w()<=a.n.min.w()&&a.n.min.C(a.n.max.w()-1);var c=a.n.Oi.fa;c.pi(!0);var d=a.n.min.eg(),d=Math.round((1-(d.hh+(d.kj-d.hh)/2-d.min)/(d.max-d.min))*c.S());a.n.Oi.C(d);c.pi(!1);c=a.n.Tg.fa;c.pi(!0);var d=a.n.min.eg(),e=a.n.Tg.S()/2,h=(d.max-d.min)/(d.kj-d.hh)*e;h>e&&(h=a.n.Tg.S()-(d.kj-d.hh)/(d.max-d.min)*e);d=Math.round(h);a.n.Tg.C(d);c.pi(!1);case a.n.Oi:case a.n.Tg:c=a.n.min.fa,d=a.n.max.fa,
e=a.n.min.eg(),c.pi(!0),d.pi(!0),a.n.min.C(e.hh,!0),a.n.max.C(e.kj,!0),d.pi(!1),c.pi(!1)}a.n.ig.refresh()}f.refresh=function(){null!=this.n.ge&&this.n.ge.refresh()};f.EJ=function(){if(null!=this.n.Oi){var a=this.n.min.eg(),b=this.n.Oi.fa,b=a.min+(a.max-a.min)*((b.S()-b.w())/b.S()),c=a.kj-a.hh,a=Math.round(b-c/2),b=Math.round(b+c/2);Lt(this,a,b);Kt(this,this.n.Oi)}};
f.IJ=function(){if(null!=this.n.Tg){var a=this.n.min.eg(),b=this.n.Tg.fa,c,d=a.hh+(a.kj-a.hh)/2,a=a.max-a.min;c=b.S()/2;c=b.w()<=c?b.w()/c:c/(b.S()-b.w());0<c&&(b=Math.round(d-.5*a/c),d=Math.round(d+.5*a/c),Lt(this,b,d));Kt(this,this.n.Tg)}};function Lt(a,b,c){b==c&&(b=c-1);a.Ua.windowLow=b;a.Ua.windowHigh=c}f.f=function(){sb(this.n);delete this.Ua;Dt.d.f.call(this)};v("xiv.ui.LevelsController.ID_PREFIX",Dt.ID_PREFIX);v("xiv.ui.LevelsController.CSS_SUFFIX",Dt.CSS_SUFFIX);
v("xiv.ui.LevelsController.updateAll",Dt.$P);v("xiv.ui.LevelsController.prototype.add",Dt.prototype.add);v("xiv.ui.LevelsController.prototype.getControllerSet",Dt.prototype.uG);v("xiv.ui.LevelsController.prototype.disposeInternal",Dt.prototype.f);function Mt(){Ct.call(this)}w(Mt,Ct);v("xiv.ui.VolumeController",Mt);Mt.ID_PREFIX="xiv.ui.VolumeController";Mt.CSS_SUFFIX={};Mt.prototype.add=function(a){Mt.d.add.call(this,a);this.oy(a);this.ly(a)};Mt.prototype.oy=function(a){var b=this.rd(Fs,"Visible",function(){});Ds(a,b);this.Df.push(b);b.wg(a);b.fa.checked=a[uq]||!1};Mt.prototype.ly=function(a){var b=this.rd(Gs,"Show Label Map",function(b){a.labelmap.visible=b.checked});Ds(a,b);this.Df.push(b);b.wg(a);b.fa.Td(!1)};Mt.prototype.f=function(){Mt.d.f.call(this)};
v("xiv.ui.VolumeController.ID_PREFIX",Mt.ID_PREFIX);v("xiv.ui.VolumeController.CSS_SUFFIX",Mt.CSS_SUFFIX);v("xiv.ui.VolumeController.prototype.add",Mt.prototype.add);v("xiv.ui.VolumeController.prototype.add_visibleRadio",Mt.prototype.oy);v("xiv.ui.VolumeController.prototype.add_labelMapToggle",Mt.prototype.ly);v("xiv.ui.VolumeController.prototype.disposeInternal",Mt.prototype.f);function Nt(){U.call(this);C(Ot(),function(a,b){this[b]=null})}w(Nt,U);v("xiv.ui.XtkControllerTree",Nt);function Pt(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.XtkControllerTree.ControlSet",Pt);Nt.ID_PREFIX="xiv.ui.XtkControllerTree";Nt.CSS_SUFFIX={};function Ot(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=Nt.prototype;f.ix=function(){};f.hD=function(){return this.$g([this.ti])};f.ix=function(){return this.$g([this.Kf])};f.JE=function(){return this.$g([this.Qj])};
f.RG=function(){};f.$g=function(a){var b=[];D(g(a)?a:[a],function(a){null!=a&&(b=Mb(b,a.uz()))});return b};f.bH=function(){return this.Kf};f.refresh=function(){var a=this.$g([this.Kf,this.Rj,this.Qj,this.Lj,this.ti,this.Cs]);D(a,function(a){a.refresh()}.bind(this))};
f.Jt=function(a,b){a instanceof J?(null==this.Rj&&(this.Kf=new Dt,this.Rj=new Mt,this.Qj=new xt),this.Kf.add(a,b),this.Rj.add(a,b),this.Qj.add(a,b)):a instanceof ys?(null==this.Lj&&(this.Lj=new yt),this.Lj.add(a,b)):a instanceof Yp&&(null==this.ti&&(this.ti=new vt),this.ti.add(a));this.volumes=new Pt(null,this.$g([this.Qj]),this.$g([this.Rj]));this.annotations=new Pt(null,this.$g([this.ti]));this.meshes=new Pt(null,this.$g([this.Lj]));this.levels=new Pt(null,null,this.$g([this.Kf]))};
f.f=function(){Nt.d.f.call(this);null!=this.Kf&&(this.Kf.g(),delete this.Kf);null!=this.Rj&&(this.Rj.g(),delete this.Rj);null!=this.tx&&(this.tx.g(),delete this.tx);null!=this.Qj&&(this.Qj.g(),delete this.Qj);null!=this.Lj&&(this.Lj.g(),delete this.Lj);null!=this.ti&&(this.ti.g(),delete this.ti);null!=this.Cs&&(this.Cs.g(),delete this.Cs)};v("xiv.ui.XtkControllerTree.ControlSet",Pt);v("xiv.ui.XtkControllerTree.ID_PREFIX",Nt.ID_PREFIX);v("xiv.ui.XtkControllerTree.CSS_SUFFIX",Nt.CSS_SUFFIX);
v("xiv.ui.XtkControllerTree.getEmptyPropertiesObject",Ot);v("xiv.ui.XtkControllerTree.prototype.Levels",Nt.prototype.ix);v("xiv.ui.XtkControllerTree.prototype.Annotations",Nt.prototype.hD);v("xiv.ui.XtkControllerTree.prototype.Volumes3D",Nt.prototype.JE);v("xiv.ui.XtkControllerTree.prototype.getHistograms",Nt.prototype.RG);v("xiv.ui.XtkControllerTree.prototype.getControllers",Nt.prototype.$g);v("xiv.ui.XtkControllerTree.prototype.getLevelsController",Nt.prototype.bH);
v("xiv.ui.XtkControllerTree.prototype.refresh",Nt.prototype.refresh);v("xiv.ui.XtkControllerTree.prototype.createControllers",Nt.prototype.Jt);v("xiv.ui.XtkControllerTree.prototype.disposeInternal",Nt.prototype.f);function Qt(a){dt.call(this);this.orientation=a;this.ll=vq;this.jq=null}w(Qt,dt);v("xiv.vis.XtkPlane2D",Qt);f=Qt.prototype;f.Zz=function(){return this.Ca.Zz()};f.$z=function(){return this.Ca.$z()};f.$l=function(){return null!=this.Ca?this.Ca.$l():null};f.Xk=function(a){Qt.d.Xk.call(this,a)};f.g=function(){Qt.d.g.call(this);delete this.jq;delete this.vP;delete this.wP};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",Qt.prototype.Zz);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",Qt.prototype.$z);v("xiv.vis.XtkPlane2D.prototype.getVolume",Qt.prototype.$l);v("xiv.vis.XtkPlane2D.prototype.setContainer",Qt.prototype.Xk);v("xiv.vis.XtkPlane2D.prototype.dispose",Qt.prototype.g);function Rt(){$c.call(this);this.ff=null;this.lc={volumes:[],meshes:[],fibers:[],spheres:[]};this.ui=new Qt("X");this.Oj=new Qt("Y");this.Pj=new Qt("Z");this.hc=new it;this.vc={};this.vc[this.ui.Tb()]=this.ui;this.vc[this.Oj.Tb()]=this.Oj;this.vc[this.Pj.Tb()]=this.Pj;this.vc[this.hc.Tb()]=this.hc;this.ih=null;this.fs(this.hc);St(this)}w(Rt,tq);v("xiv.vis.XtkEngine",Rt);Rt.ID_PREFIX="xiv.vis.XtkEngine";Rt.SLICE_TO_RAS_KEY="sliceToRAS"+B();Rt.HAS_LABEL_MAP_KEY="hasLabelMap";f=Rt.prototype;f.Qr=!1;
f.ju=function(){return this.lc.volumes};f.iu=function(){return this.lc.meshes};f.hu=function(){return this.lc.spheres};function Tt(a,b){null!=b.Zd.mn&&D(b.Zd.mn,function(a){this.lc.spheres.push(Ut(a))}.bind(a))}f.gC=function(a,b){switch(a.toLowerCase()){case "x":this.ui.Kb(b);break;case "y":this.Oj.Kb(b);break;case "z":this.Pj.Kb(b);break;case "v":this.hc.Kb(b)}};f.fs=function(a){this.ih=a;this.ih.sa();this.eL=F(this.ih,"k",this.Bv.bind(this))};f.wH=function(){return this.ih};f.Ev=function(a){this.dispatchEvent(a)};
function St(a){C(a.vc,function(a){F(a,"F",this.Ev.bind(this));F(a,"H",function(){}.bind(this))}.bind(a))}f.EB=function(){this.ff.refresh()};f.vG=function(){return this.ff};
function Vt(a,b){null!=a.ff&&(a.ff.g(),a.ff=null);a.ff=new Nt;null!=(b.Zd&&null!=b.Zd.mn)&&(Tt(a,b),D(a.lc.spheres,function(a){this.ff.Jt(a)}.bind(a)));var c;D(b.Dd,function(a){c=a.fg();if(null!=c&&(currXObj=Wt(c,a.Uh),renderProps=a.Zd,currXObj))if(this.ff.Jt(currXObj,renderProps),currXObj instanceof J){"scans"==b.Xf.toLowerCase()&&(window.console.log("Turning off reslicing for scan"),currXObj.reslicing=!1);a=currXObj;var e=renderProps;null!=e||(e={origin:[0,0,0],ss:1E4,or:-1E4,br:!0,Pw:!1});a.origin=
e.origin;a.upperThreshold=e.ss;a.lowerThreshold=e.or;a.volumeRendering=e.Pw;a[uq]=e.br;a[Rt.SLICE_TO_RAS_KEY]=e.lw;null!=e.HA?(a.labelmap.file=e.HA,a.labelmap.colortable.file=e.WI,a[Rt.HAS_LABEL_MAP_KEY]=!0):a[Rt.HAS_LABEL_MAP_KEY]=!1;this.lc.volumes.push(currXObj)}else currXObj instanceof ys?(a=currXObj,e=renderProps,a.color=e.color||[.5,.5,.5],a.opacity=e.opacity||1,this.lc.meshes.push(currXObj)):currXObj instanceof ps&&(Rt.TP(currXObj,renderProps),this.lc.fibers.push(currXObj))}.bind(a))}
f.GB=function(){this.fs(this.hc);this.hc.sa();C(this.lc,function(a,b){"volumes"!==b&&D(a,function(a){this.hc.add(a)}.bind(this))}.bind(this));Tc(this.hc.Ra(),"l",function(){this.Er();this.ui.k()}.bind(this));this.hc.k()};f.FB=function(a){var b=null!=a?a:this.yk();C(this.vc,function(a,d){"v"!=d.toLowerCase()&&(a.sa(),a.add(b),a.k())})};function Xt(a){var b=a.yk();C(a.lc.volumes,function(a){a!==b&&(a.visible=!1)})}
f.HB=function(){var a=this.yk(),b=[],c=[],d=["x","y","z","v"];C(this.lc,function(a,d){currArr="volumes"==d?c:b;D(a,function(a){currArr.push(a)})}.bind(this));D(b,function(a){this.hc.add(a)}.bind(this));D(c,function(b){b!==a&&(b.visible=!0,this.hc.add(b))}.bind(this));this.ih.Ra().onShowtime=function(){Lb(d,this.ih.Tb().toLowerCase());Yt(this,a)}.bind(this);this.ih.add(a);this.ih.k()};
f.k=function(a){this.Qr=!1;Vt(this,a);var b=a.Zd;null!=b?(null!=b.backgroundColor&&this.hc.Yr(a.Zd.backgroundColor),null!=b.aq&&this.hc.Zr(a.Zd.aq)):(this.hc.Yr(),this.hc.Zr());if(0<this.lc.volumes.length){a=this.vc;b="";for(b in a)if(a[b].isEnabled()){this.fs(a[b]);break}this.HB()}else this.hc.isEnabled()&&this.GB()};function Yt(a,b){var c=mb(a.vc)-1;C(a.vc,function(a){a!=this.ih&&a.isEnabled()&&(a.add(b),Tc(a.Ra(),"l",function(){c--;0==c&&this.Er()}.bind(this)),a.k())}.bind(a))}
f.yk=function(){if(0!=this.lc.volumes.length){for(var a=0,b=this.lc.volumes.length;a<b;a++){var c=this.lc.volumes[a];if(c[uq])return c}this.lc.volumes[0][uq]=!0;return this.lc.volumes[0]}};f.o=function(){C(this.vc,function(a){a.o()}.bind(this))};f.Bv=function(a){this.Qr||this.dispatchEvent({type:"k",value:a.value})};f.Er=function(a){Xt(this);Vc(this.eL);this.Qr=!0;this.dispatchEvent({type:"l",value:null!=a?a.value:1})};f.qH=function(){return this.ui};f.rH=function(){return this.Oj};f.sH=function(){return this.Pj};
f.pH=function(){return this.hc};f.Eq=function(a){return this.vc[a]};f.tH=function(){return this.vc};var Zt=["nrrd","nii","nii.gz","mgh","mgz"],$t=["dicom","dcm","ima"],au=["hdr","img"],bu=["nii","nii.gz"],cu=["jpeg","jpg","gif","png","img"],du="stl vtk obj fsm inflated smoothwm pial orig".split(" "),eu=["trk"];function fu(a){var b=void 0;gu(a)?b=new ys:hu(a)||iu(a)||ju(a)?b=new J:ku(a)&&(b=new ps);return b}
function Ut(a){var b=new Yp;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function hu(a){return-1<Zt.indexOf(a)?!0:!1}function ju(a){return-1<cu.indexOf(a)?!0:!1}function iu(a){return-1<$t.indexOf(a)?!0:!1}function gu(a){return-1<du.indexOf(a)?!0:!1}function ku(a){return-1<eu.indexOf(a)?!0:!1}
function Wt(a,b){function c(a){var b=sj(a);a=rj(a);return b+"/"+a}var d=g(a)?tj(a[0]):tj(a),d=fu(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];D(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=ob(b),d.filedata=nb(b)):d.file=a;return d}
Rt.prototype.g=function(){Rt.d.g.call(this);null!=this.ff&&(this.ff.g(),delete this.ff);I(this.ui);I(this.Oj);I(this.Pj);I(this.hc);delete this.ih;sb(this.vc);delete this.vc;this.ui.g();delete this.ui;this.Oj.g();delete this.Oj;this.Pj.g();delete this.Pj;this.hc.g();delete this.hc;C(this.lc,function(a){C(a,function(a){I(a);sb(a)})});sb(this.lc);delete this.lc;delete this.Qr};v("xiv.vis.XtkEngine.EventType",{QN:"F",ON:"G",PN:"H",ERROR:"I",SO:"J",ZM:"K",$M:"L"});v("xiv.vis.XtkEngine.ID_PREFIX",Rt.ID_PREFIX);
v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",Rt.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",Rt.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",hu);v("xiv.vis.XtkEngine.isImage",ju);v("xiv.vis.XtkEngine.isDicom",iu);v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<au.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<bu.indexOf(a)?!0:!1});
v("xiv.vis.XtkEngine.isMesh",gu);v("xiv.vis.XtkEngine.isFiber",ku);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",Rt.prototype.iu);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",Rt.prototype.hu);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",Rt.prototype.ju);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",Rt.prototype.gC);v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",Rt.prototype.fs);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",Rt.prototype.wH);
v("xiv.vis.XtkEngine.prototype.refreshControllers",Rt.prototype.EB);v("xiv.vis.XtkEngine.prototype.getControllerTree",Rt.prototype.vG);v("xiv.vis.XtkEngine.prototype.render3dPlane",Rt.prototype.GB);v("xiv.vis.XtkEngine.prototype.render2D",Rt.prototype.FB);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",Rt.prototype.HB);v("xiv.vis.XtkEngine.prototype.render",Rt.prototype.k);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",Rt.prototype.yk);v("xiv.vis.XtkEngine.prototype.updateStyle",Rt.prototype.o);
v("xiv.vis.XtkEngine.prototype.getPlaneX",Rt.prototype.qH);v("xiv.vis.XtkEngine.prototype.getPlaneY",Rt.prototype.rH);v("xiv.vis.XtkEngine.prototype.getPlaneZ",Rt.prototype.sH);v("xiv.vis.XtkEngine.prototype.getPlaneV",Rt.prototype.pH);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",Rt.prototype.Eq);v("xiv.vis.XtkEngine.prototype.getPlanes",Rt.prototype.tH);v("xiv.vis.XtkEngine.prototype.dispose",Rt.prototype.g);function lu(a,b,c){Ym.call(this);this.BC=!0===a;this.AC=!0===b;this.xC=!0===c}w(lu,Ym);v("xiv.ui.HelpDialog",lu);lu.ID_PREFIX="xiv.ui.HelpDialog";lu.CSS={wD:"nrg-ui-helpdialog-dialog",jl:"nrg-ui-helpdialog-text",kE:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",Hj:"xiv-ui-helpdialog-closebutton"};lu.LAYOUT_IMAGE_ID=lu.ID_PREFIX+".LayoutImage";
lu.prototype.k=function(a){lu.d.k.call(this,a);P(this.a(),"xiv-ui-helpdialog");this.Km=new ns;P(this.Km.a(),lu.CSS.kE);this.Km.k(this.a());mu(this);this.jy(lu.CSS.TITLE);this.Vx(lu.CSS.Hj)};lu.prototype.cw=function(a){null!=document.getElementById(lu.LAYOUT_IMAGE_ID)&&(document.getElementById(lu.LAYOUT_IMAGE_ID).src=a)};
function mu(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts"," ","<img height=15 width=15 id="+lu.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.BC&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.AC&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.xC&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.we("Help");D([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="black">';
D(a,function(a){c+="<tr>";D(a,function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}R(c);var n=Q("div");n.innerHTML=c;this.Km.mf(n,[d])}.bind(a))}
lu.prototype.f=function(){lu.d.f.call(this);delete this.BC;delete this.AC;delete this.xC;null!=this.Km&&this.Km.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",lu.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",lu.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",lu.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",lu.prototype.k);v("xiv.ui.HelpDialog.prototype.setLayoutButton",lu.prototype.cw);v("xiv.ui.HelpDialog.prototype.disposeInternal",lu.prototype.f);function nu(a,b,c){Yo.call(this,a,b||Zo.le(),c);this.jd(16,!0)}w(nu,Yo);Mn("goog-toggle-button",function(){return new nu(null)});function ou(a){U.call(this);this.L={};this.$=a}w(ou,U);v("xiv.ui.ViewBoxDialogs",ou);ou.ID_PREFIX="xiv.ui.ViewBoxDialogs";ou.CSS_SUFFIX={Fg:"generic-toggle",DD:"infodialog",ED:"infodialog-text",kN:"modaldialog"};var pu="Info_"+B(),qu="Help_"+B(),ru={QM:pu,LM:qu},su="ToggleClass_"+B();f=ou.prototype;f.AG=function(){return this.L};f.yG=function(a){return this.L[a]};
f.yn=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.$.lk("LEFT",c,a,e,function(b){var c=this.L[a];b="true"==b.getAttribute("checked");c.ba(b);this.dispatchEvent({type:b?"M":"N",fz:this.L[a],gz:a});tu(this,c)}.bind(this),d);null!=this.L[a]&&this.L[a].g();c=new Ym;this.L[a]=c;Im(c,null!=k?k:!1);Pm(c,null!=l?l:null);c.k(this.$.Fb);Hm(c,0);this.L[a].Ne();c.we(e);P(c.a(),b);F(c,"f",function(){this.$.vo(n)}.bind(this));F(c,Lm,function(){}.bind(this));this.L[a].ba(!0);this.L[a].Ne();this.L[a].Ne(!1);
!1===h&&Ln(this.$.Wd[a])};f.FF=function(){this.yn(ru.jN,"xiv-ui-viewboxdialogs-meshes-dialog",ou.CSS.Fg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.HF=function(){this.yn(ru.HO,"xiv-ui-viewboxdialogs-volumes-dialog",ou.CSS.Fg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.Uy=function(){uu(this);vu(this)};
function wu(a,b,c){var d=new Ym;Pm(d,Sm);d.k(null!=b?b:document.body);d.Yk(a);P(d.a(),"nrg-ui-dialogs-yesnomodal");Im(d,!0);var e=d.a(),h=d.Wh();Tc(d,Qm,function(a){var b=e.cloneNode(!0);b.style.opacity=1;b.style.display="inline";Yh(e.parentNode,b);var n=h.cloneNode(!0);n.style.opacity=.7;n.style.display="inline";Yh(e.parentNode,n);b.style.zIndex=2E9;n.style.zIndex=2E9;Mk([b,n],1,0,null,null,function(){R(b);delete b;R(n);delete n});"yes"===a.key.toLowerCase()&&null!=c&&c();d.Xt=!0;d.ro()});d.ba(!0);
d.Ne(!0);d.Xt=!1;e.style.opacity=0;e.style.zIndex=2E9;h.style.opacity=0;h.style.zIndex=2E9;vk(e,150);wk(h,150,.7)}f.gA=function(){var a=[];C(this.L,function(b){b.ta()&&a.push(b.a())});return a};f.showModalDialog=function(a){if(null==this.L[a])throw Error("Invalid dialog key: ",a);this.L[a].ba(!0);this.L[a].Ne()};
function tu(a,b){C(null!=b?[b]:a.L,function(a){if(null!=a&&!ja(a)){var b=a.Ez(),e;if(null!=b){for(e in b)if(isNaN(b[e])&&!ja(b[e]))return;e=T(a.a());var h=Ei(a.a()),k=h.y+e.height,l=b.top+b.height,n=h.x,p=h.y;h.x+e.width>b.left+b.width&&(n=b.left+b.width-e.width);0>n&&(n=0);k>l&&(p=b.top+b.height-e.height);-15>p&&(p=-15);Ci(a.a(),n,p)}}})}f.update=function(){C(this.L,function(a){a.WC();tu(this,a)}.bind(this))};
f.hp=function(a,b){var c=!1===b?0:1;window.console.log(a,this.L[a]);null!=this.L[a].a()&&wk(this.L[a].a(),200,c)};f.Aq=function(){return this.L[qu]};
function uu(a){null!=a.L[qu]&&a.L[qu].g();var b=new lu(0<a.$.Ra().ju().length,0<a.$.Ra().iu().length,0<a.$.Ra().hu().length);Im(b,!1);Pm(b,null);b.k(a.$.Fb);b.ba(!1);b.Ne();var c=a.$.lk("LEFT",ou.CSS.Fg,qu,"Help",function(a){a="true"==a.getAttribute("checked");b.ba(a);this.dispatchEvent({type:a?"M":"N",fz:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");F(b,"f",function(){this.$.vo(c)}.bind(a));a.$.vo(c);a.L[qu]=new lu}
function vu(a){null!=a.L[pu]&&a.L[pu].g();currDialog=new Ym;P(currDialog.Hq(),"xiv-ui-viewboxdialogs-infodialog-title");var b="";0<a.$.tb.length?C(a.$.tb[0].ve,function(a,d){null!=a&&0<a.length&&(b+=d+": "+a+"<br>")}):b=Nk(a.$.tb[0].ji);Im(currDialog,!1);currDialog.dk(b);Pm(currDialog,null);currDialog.k(a.$.Fb);currDialog.ba(!0);currDialog.wr("left","top",0,-12);currDialog.we("Info.");P(currDialog.a(),ou.CSS.DD);P(currDialog.rh[0],ou.CSS.ED);a.$.lk("LEFT",ou.CSS.Fg,pu,"Info.",function(a){a="true"==
a.getAttribute("checked");currDialog.ba(a);currDialog.wr("left","top",0,-15);this.dispatchEvent({type:a?"M":"N",fz:currDialog});this.$.yC(a)}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");currDialog.Vv();a.L[pu]=currDialog}f.f=function(){delete this.$;null!=this.L&&(C(this.L,function(a){I(a);a.f();a.g()}.bind(this)),sb(this.L))};v("xiv.ui.ViewBoxDialogs.EventType",{CM:"M",BM:"N"});v("xiv.ui.ViewBoxDialogs.ID_PREFIX",ou.ID_PREFIX);v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",ou.CSS_SUFFIX);
v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",ru);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",su);v("xiv.ui.ViewBoxDialogs.createModalDialog",ou.iP);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",ou.prototype.AG);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",ou.prototype.yG);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",ou.prototype.yn);v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",ou.prototype.FF);v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",ou.prototype.HF);
v("xiv.ui.ViewBoxDialogs.prototype.createPostRenderDialogs",ou.prototype.Uy);v("xiv.ui.ViewBoxDialogs.prototype.dispsePostRenderDialogs",ou.prototype.kP);v("xiv.ui.ViewBoxDialogs.prototype.setModalDialogOnYes",ou.prototype.SP);v("xiv.ui.ViewBoxDialogs.prototype.showModalDialog",ou.prototype.showModalDialog);v("xiv.ui.ViewBoxDialogs.prototype.getVisibleDialogElements",ou.prototype.gA);v("xiv.ui.ViewBoxDialogs.prototype.update",ou.prototype.update);
v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",ou.prototype.hp);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",ou.prototype.Aq);v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",ou.prototype.f);function W(a,b,c,d){$c.call(this);this.$=a;this.ma=b;this.Ma=c;this.L=d;this.wd={p:null,c:null};this.hq={x:null,y:null};this.pg={l:!1,m:!1,r:!1};this.Jk={up:{},dn:{},ot:{},ov:{}};F(this.L,"M",this.iB.bind(this));a=document.body;this.pb=new Yn;this.pb.Hl(a);F(this.pb,"key",this.gi.bind(this));this.dl=!1;document.addEventListener("mousemove",this.uw.bind(this),!1)}w(W,$c);v("xiv.ui.ViewBoxInteractorHandler",W);
var xu="Crosshairs_"+B(),yu="Settings_"+B(),zu="TwoDPan_"+B(),Au="TwoDZoom_"+B(),Bu={kd:xu,NN:yu,mO:zu,nO:Au};
W.CSS={Fg:"xiv-ui-viewboxinteractorhandler-generic-toggle",Yw:"xiv-ui-viewboxinteractorhandler-generic-dialog",Zw:"xiv-ui-viewboxinteractorhandler-generic-zippytree",gx:"xiv-ui-viewboxinteractorhandler-levelsdialog",dN:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered",eN:"xiv-ui-viewboxinteractorhandler-levels-slider",fN:"xiv-ui-viewboxinteractorhandler-levels-slidercontroller",gN:"xiv-ui-viewboxinteractorhandler-levels-sliderlabel",cN:"xiv-ui-viewboxinteractorhandler-levels-checkboxholder",
bN:"xiv-ui-viewboxinteractorhandler-levels-checkboxcontroller"};W.CURSOR_CSS={LE:"xiv-ui-viewboxinteractorhandler-zoom-follower",$w:"xiv-ui-viewboxinteractorhandler-viewframe-grab",cx:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",ax:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",bx:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",vx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",wx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};
W.ORIENTATION_KEY="Orientation_"+B();f=W.prototype;f.pb=null;f.Ej=null;f.Ga=null;f.Xa=null;f.Qw=!1;f.Kv=!1;f.mc={};f.zG=function(a){return this.mc[a]};f.Ty=function(){this.az();Cu(this);Du(this);this.Xy();this.Sy(!1);this.Zy();this.$y();this.Ru()};function Eu(a){var b=a.$.Fb;C(W.CURSOR_CSS,function(a){Ch(b,a)})}function Fu(a,b,c,d){b=b?P:Ch;b(a.$.Fb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.$.Fb,d)}
function Gu(a){Fu(a,!0,W.CURSOR_CSS.$w,W.CURSOR_CSS.cx);Fu(a,!1,W.CURSOR_CSS.ax,W.CURSOR_CSS.bx)}function Hu(a){Fu(a,!1,W.CURSOR_CSS.wx);Fu(a,!0,W.CURSOR_CSS.vx)}f.uw=function(a){this.hq.x=a.clientX||a.pageX;this.hq.y=a.clientY||a.pageY};
f.eK=function(a){this.Ll=a.target;this.wd.p=this.wd.c;this.wd.c=[this.hq.x,this.hq.y];if(null!=this.wd.p){(new $r(this.wd.c[0],this.wd.c[1])).add(new $r(this.wd.p[0],this.wd.p[1]));a=this.wd.c[0]-this.wd.p[0];var b=this.wd.c[1]-this.wd.p[1];this.dl&&(this.Hf.style.visibility="hidden");this.Qw?(this.dl&&this.dl&&(R(this.Hf),Yh(this.Ll.Si,this.Hf),this.Hf.style.visibility="visible",this.Hf.style.left=this.wd.c[0]+20+"px",this.Hf.style.top=this.wd.c[1]+"px"),Hu(this),this.pg.l&&Iu(this,a,b)):this.Kv&&
(Gu(this),this.pg.l&&(Fu(this,!1,W.CURSOR_CSS.$w,W.CURSOR_CSS.cx),Fu(this,!0,W.CURSOR_CSS.ax,W.CURSOR_CSS.bx),this.Ll.na.Jr([-1*a,-1*b]),this.xm()))}};f.aK=function(){Eu(this);this.Ll=null;this.dl&&(this.Hf.style.visibility="hidden")};f.zv=function(a){0==a.button?this.pg.l=!0:1==a.button?this.VL.pg.m=!0:2==a.button&&(this.pg.r=!0)};f.Av=function(a){0==a.button?this.pg.l=!1:1==a.button?this.VL.pg.m=!1:2==a.button&&(this.pg.r=!1)};
f.gi=function(a){window.console.log("On key:",a.keyCode,this.mc);if(this.$.$q())if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Ju(this,this.Ll,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.$.tu(zu);window.console.log("escape","pan",a,a.getAttribute("checked"));"true"==a.getAttribute("checked").toString()&&this.$.dd(zu);"true"==this.$.tu(Au).getAttribute("checked").toString()&&this.$.dd(Au);break;case 90:this.$.dd(Au);break;case 72:case 80:this.$.dd(zu);break;case 66:case 76:this.$.dd(this.mc.levels);
break;case 86:this.$.dd(this.mc.volumes);break;case 77:this.$.dd(this.mc.meshes);break;case 65:this.$.dd(this.mc.annotations);break;case 67:this.$.dd(xu);break;case 83:this.$.dd(this.mc[yu]);break;case 191:a.shiftKey&&this.$.dd(qu);break;case 73:this.$.dd(pu)}};function Iu(a,b,c){Eu(a);var d=function(){Hu(this);this.Ll.Gm()}.bind(a),e=function(){Fu(this,!0,W.CURSOR_CSS.wx);Fu(this,!1,W.CURSOR_CSS.vx);this.Ll.Hm()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Ku(a);a.xm()}f.lx=0;f.mx=0;
f.IC=function(a){this.lx=a.clientX;this.mx=a.clientY;window.console.log("store mouse coords",this.lx,this.mx)};f.Ru=function(){Lu(this,function(a,b){this.Jk.ov[b]=F(a.Ra(),"mouseover",this.eK.bind(this));var c=a.Ra().wc;this.Jk.ot[b]=F(c,"mouseleave",this.aK.bind(this));this.Jk.dn[b]=F(c,"mousedown",this.zv.bind(this));this.Jk.up[b]=F(c,"mouseup",this.Av.bind(this))}.bind(this))};function Ju(a,b,c){Lu(a,function(a,b,h){h.qa.C(h.qa.w()+c)}.bind(a),b.Tb())}
function Lu(a,b,c){if(null!=a.ma){var d=a.Ma.Dq(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.$l())};if(r(c)){var h=a.ma.Eq(c);if(null==h)throw Error("Invalid plane: ",h);e(a.ma.Eq(c),c)}else C(a.ma.vc,function(a,b){e(a,b)}.bind(a))}}f.$y=function(){this.$.lk("LEFT",W.CSS.Fg,Au,"2D Zoom",function(a){Eu(this);if(this.Qw=a="true"==a.getAttribute("checked").toString())this.$.Kw(zu),Hu(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.$.dd(Au)};
f.Zy=function(){this.$.lk("LEFT",W.CSS.Fg,zu,"2D Pan",function(a){Eu(this);if(this.Kv=a="true"==a.getAttribute("checked").toString())Gu(this),this.$.Kw(Au)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.$.dd(zu)};f.Sy=function(a){this.$.lk("LEFT",W.CSS.Fg,xu,"Toggle Crosshairs",function(a){this.QC("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.$.dd(xu)};
f.Xy=function(){this.mc[yu]=yu+"_"+B();this.L.yn(this.mc[yu],W.CSS.Yw,W.CSS.Fg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.Xa[yu]=new ns;this.Xa[yu].k();var a=this.Xa[yu].a();P(a,W.CSS.Zw);this.L.L[this.mc[yu]].a().appendChild(a);this.Xa[yu].Tl();a=new Gs;a.k();a.Bf("Enable 3D Rendering");a.fa.Td(!0);this.Xa[yu].mf(a.a(),"3D Rendering");F(a,"D",function(a){this.ma.gC("V",a.checked)}.bind(this));return a};
f.xm=function(){Lu(this,function(a,b,c,d){Mu(this,b,d)}.bind(this))};
function Nu(a){null!=a.ma&&(Lu(a,function(a,c,d,e){var h=d.qa,k=d.Ad,l=d.kf;d=d.kd;h[W.ORIENTATION_KEY]=c;k[W.ORIENTATION_KEY]=c;l[W.ORIENTATION_KEY]=c;d[W.ORIENTATION_KEY]=c;Ou(this);Pu(this);Qu(h,e);Mu(this,h[W.ORIENTATION_KEY],e);Ru(this,h);null!=a.Ra()&&(F(a.Ra(),"J",function(){Ku(this)}.bind(this)),F(h,"u",function(a){Qu(a.target,e);Mu(this,a.target[W.ORIENTATION_KEY],e);Ru(this,a.target)}.bind(this)),F(k,"h",function(a){Su(this,a.target,e);this.xm()}.bind(this)),F(l,"h",function(){a.Ra().tC(l.w()/
100);this.xm()}.bind(this)))}.bind(a)),a.ma.EB())}
function Tu(a,b){var c=b.split("_")[0];null!=a.Xa[c]&&(a.Xa[c].Pc(),a.Ej.Kf.refresh(),C(a.Ej[c],function(a){null!=a&&D(a,function(a){switch(c.toLowerCase()){case "volumes":var d=b.split("_")[0];a instanceof Fs?(a.fa.checked=a.me()[uq]||!1,null==this.vs&&(this.vs=[]),-1==this.vs.indexOf(a)&&this.vs.push(a)):"Show Label Map"==a.zb.innerHTML&&(a.me()[Rt.HAS_LABEL_MAP_KEY]?a.me().labelmap.visible&&!a.fa.eh()&&a.fa.Td(!0):(R(a.a()),a.a().style.visibility="hidden",a.a().style.height="0px"),this.Xa[d].Pc());
a.refresh();break;case "meshes":a instanceof st&&a.o();break;case "annotations":a instanceof st&&(window.console.log("ANNOT",a),a.o())}}.bind(this))}.bind(a)))}f.iB=function(a,b){null==a.gz&&null==b||Tu(this,null!=b?b:a.gz)};f.wy=function(){var a=this.Ga.ig.Pz(zt.LEVEL_CUTOFF);this.Ga.max.Io(a);this.Ga.min.Io(0);this.Ga.min.C(0);this.Ga.max.C(a);Et(this.Ej.Kf);this.Ga.ig.refresh();this.L.L[this.mc.levels]};
function Qu(a,b){if(null!=b){var c=a[W.ORIENTATION_KEY],d="Y"==c||"Z"==c?a.S()-a.w()-1:a.w()-1;"false"==b.reslicing.toString()&&("transverse"==b[J.ORIENTATION_KEY]&&"Z"==c?d+=2:"coronal"==b[J.ORIENTATION_KEY]&&"Y"==c?d+=2:"sagittal"==b[J.ORIENTATION_KEY]&&"X"==c&&(d+=1));b["index"+a[W.ORIENTATION_KEY]]=d}}function Uu(a,b,c,d,e){var h=a.ma.Eq(b).Ra();a=a.Ma.Bz().nu(b);b=null;null!=a&&(b=a[Sq]);null!=b&&("vertical"==c?b.rC(h.cA(d,e)):"horizontal"==c&&b.sC(h.Kz(d,e)))}
function Mu(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Uu(a,"Y","vertical",b,!0);Uu(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Uu(a,"X","vertical",b,!1);Uu(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Uu(a,"X","horizontal",b,!1),Uu(a,"Y","horizontal",b,!1)}}function Ru(a,b){Lu(a,function(a,b,e){a=e.Ad;e=e.qa;a.Eb(e.S());a.Lb(1);a.C(e.w())}.bind(a),b[W.ORIENTATION_KEY])}function Ku(a){Lu(a,function(a,c,d){d.kf&&a.Ra()&&(a=a.Ra().jA(),d.kf.w(),d.kf.C(Math.round(100*a)))}.bind(a))}
function Su(a,b,c){null!=c&&Lu(a,function(a,c,h){h.qa.C(b.w())}.bind(a),b[W.ORIENTATION_KEY])}function Cu(a){Lu(a,function(a,c,d){null!=d.qa&&d.qa.C(d.qa.S()/2)}.bind(a))}
function Du(a){Lu(a,function(a,c,d,e){if(null!=e[Rt.SLICE_TO_RAS_KEY]&&null!=d.qa){slider=d.qa;orientation=slider[W.ORIENTATION_KEY];a=e.bbox;e=e[Rt.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.kL[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.EF[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.uF[2]-a[4])/h);slider.C(Math.round(slider.S()*h)+1)}}.bind(a))}
function Ou(a){var b,c;Lu(a,function(a,e,h,k){null!=h.qa&&(c=h.qa,b=c[W.ORIENTATION_KEY],null!=k&&(c.Eb(a.Ra().Vz()),c.Lb(1),null!=b&&c.C(k["index"+b]+1)))})}function Pu(a){var b;Lu(a,function(a,d,e,h){null!=e.qa&&(b=e.qa,playbutton=e.Nj,null!=h&&playbutton.mC(b))})}f.mB=function(){Lu(this,function(a,b,c,d){Su(this,c.Ad,d);Ku(this)}.bind(this));this.xm()};
f.Dw=function(a){var b=!1===a?0:1;Lu(this,function(a,d,e){wk(e.qa.a(),200,b);wk(e.Ad.a(),200,b);wk(e.kd.Eg,200,b);wk(e.kd.jg,200,b);wk(e.kf.a(),200,b)}.bind(this))};f.uI=function(){this.Dw(!1);this.L.hp(pu,!1)};f.DL=function(){this.Dw(!0);this.L.hp(pu,!0)};f.update=function(){this.Ma.mp()};f.QC=function(a){var b=!0==a?"visible":"hidden";Lu(this,function(a,d,e){null!=e.kd&&(e.kd.Eg.style.visibility=b,e.kd.jg.style.visibility=b)}.bind(this))};
f.VC=function(){null!=this.Ma&&null!=this.ma&&Lu(this,function(a,b,c,d){if(null!=c){var e=c.qa;c=c.Ad;e[W.ORIENTATION_KEY]=b;c[W.ORIENTATION_KEY]=b;null!=a.Ra()&&(Su(this,c,d),e.o())}}.bind(this))};
f.LC=function(a){a.aC(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{zh:Er,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{zh:Mr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{zh:Ir,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{zh:Dr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{zh:Fr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{zh:Jr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{zh:Kr,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{zh:Br,mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.by(c,b.mb);this.Ma.Zx(c,b.zh);"Four-Up"==c&&this.Ma.$B(c)}.bind(this));F(a,"item_selected",this.VJ.bind(this))};f.VJ=function(a){this.Ma.li(a.title);null!=this.L&&null!=this.L.Aq()&&this.L.Aq().cw(a.target.nj.src)};function Vu(a,b){F(a.Xa[b].oa,"c",function(a){this.iB(a,this.mc[b])}.bind(a))}
function Wu(a,b){F(b,"D",function(a){D(this.vs,function(b){var e=b.me();b!==a.target?(b.fa.checked=!1,e.visible=!1):(e.visible=!0,this.ma.FB(e))}.bind(this))}.bind(a))}function Xu(a,b){C(a.Ej[b],function(a,d){g(a)&&D(a,function(a){var c=a.In||[];"all"!==d&&0<c.length&&c.push(d);this.Xa[b].mf(a.a(),c);a instanceof Fs&&Wu(this,a)}.bind(this))}.bind(a))}
function Yu(a){a.Xa=Ot();a.mc=vb(a.Xa);C(a.Xa,function(a,c){var d=!1;switch(c){case "volumes":0==this.ma.ju().length&&(d=!0);break;case "meshes":0==this.ma.iu().length&&(d=!0);break;case "annotations":0==this.ma.hu().length&&(d=!0)}d?tb(this.Xa,c):(this.Xa[c]=new ns,this.Xa[c].k(),this.mc[c]=c+"_"+B(),Xu(this,c),Vu(this,c))}.bind(a))}f.az=function(){this.Ej=this.ma.ff;this.Ga=this.Ej.Kf.n;Yu(this);Zu(this);Nu(this)};
function Zu(a){C(a.Xa,function(a,c){var d=!1;C(this.Ej[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.L.yn(this.mc[c],W.CSS.Yw,W.CSS.Fg,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+cb(c)+".png",cb(c),!1,!1);var e=this.Xa[c].a();P(e,W.CSS.Zw);this.L.L[this.mc[c]].a().appendChild(e);1<this.Xa[c].oa.uu().length?this.Xa[c].un():(this.Xa[c].Tl(),this.Xa[c].Pc());"levels"==c&&$u(this)}}.bind(a))}
function $u(a){var b=a.L.L[a.mc.levels],c=a.Xa.levels.oa,d=b.a();P(d,W.CSS.gx);P(b.Hq(),W.CSS.gx+"-title");a.Xa.levels.Bb.a().style.visibility="hidden";b.wr("right","top",4,50);D(c.uu(),function(a){a.am.style.fontSize="10px";a.Iw(25)});var b=a.Xa.levels.oa.Uz(1)[0],c=Q("div",{id:"HistDetails_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails"}),e=Q("div",{id:"HistDetailsFade_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails-fadebottom"});d.appendChild(e);d=Q("div",{id:"HistDetauls_"+
B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails-expandbutton"},"Histogram...");c.appendChild(d);c.appendChild(a.Ga.Ub.a());c.appendChild(a.Ga.ge.a());ai(b.of,c,1);F(c,"mouseenter",function(){e.style.opacity=0;e.style.visibility="visible";vk(e,220)});F(c,"mouseleave",function(){yk(e,220,function(){e.style.visibility="hidden"})});a.Ga.Ub.a().style.width="85%";a.Ga.Ub.a().style.left="1%";a.Ga.Ub.a().style.top="20px";a.Ga.ge.a().style.width="90%";a.Ga.ge.a().style.left="10px";a.Ga.ge.a().style.top=
"25px";a.Ga.ge.Td(!1)}
f.g=function(){W.d.g.call(this);document.removeEventListener("mousemove",this.uw.bind(this));document.removeEventListener("mousemove",this.uw);null!=this.pb&&(this.pb.g(),delete this.pb);null!=this.mc&&sb(this.mc);delete this.mc;null!=this.Xa&&(C(this.Xa,function(a){a.g()}),sb(this.Xa));delete this.Xa;sb(this.wd);delete this.wd;C(this.Jk,function(a){C(a,function(a){Vc(a);delete a});sb(a)});sb(this.Jk);delete this.Jk;this.dl&&(R(this.Hf),delete this.Hf);delete this.dl;delete this.Ej;delete this.Qw;
delete this.Kv;delete this.$;delete this.ma;delete this.Ma;delete this.L;delete this.zP};v("xiv.ui.ViewBoxInteractorHandler.EventType",{AN:"O",aN:"P",qO:"Q",DM:"R"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",Bu);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",W.ORIENTATION_KEY);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",W.prototype.Ty);v("xiv.ui.ViewBoxInteractorHandler.prototype.getDialogKey",W.prototype.zG);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",W.prototype.$y);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",W.prototype.Zy);v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",W.prototype.Sy);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",W.prototype.Xy);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",W.prototype.xm);v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",W.prototype.wy);
v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",W.prototype.mB);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",W.prototype.Dw);v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",W.prototype.uI);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",W.prototype.DL);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",W.prototype.update);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",W.prototype.QC);
v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",W.prototype.VC);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",W.prototype.LC);v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",W.prototype.az);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",W.prototype.g);function av(){wc.call(this)}w(av,wc);v("xiv.utils.ErrorCatcher",av);
function bv(a){function b(a){a.target.g()}var c;g(a)||(a=[a]);null!=c&&!g(c)&&(c=[c]);var d=new bn;Pm(d,Rm);D(a,function(a){d.dk(a)});null!=c&&D(c,function(a){d.mt(a)});d.we("XImgView Error");d.ba(!0);d.a().style.position="fixed";d.a().style.opacity=0;vk(d.a(),400);d.Wh().style.opacity=0;wk(d.Wh(),400,.75);d.a().style.height="250px";a=T(d.a());d.a().style.top="calc(50% - "+a.height/2+"px)";d.a().style.left="calc(50% - "+a.width/2+"px)";Tc(d,Qm,b);Tc(d,"f",b)}
function cv(){var a,b='<a target="_blank" style="color: #5CB8E6"  href=';$b()?(a="Internet Explorer",b+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">'):Xb("Chrome")||Xb("CriOS")?(a="Chrome",b+='"https://productforums.google.com/forum/#!msg/chrome/CgYesRogD4c/sU1TQsRgnWgJ">'):Xb("Firefox")?(a="Firefox",b+='"https://support.mozilla.org/en-US/questions/984663">'):ac()?(a="Safari",b+='"https://discussions.apple.com/thread/3300585?start=0">'):Zb()&&(a="Opera",b+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">');
bv('<br>It looks like <a target="_blank" style="color: #5CB8E6" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">Experimental-WebGL</a> is disabled.<br><br><br>'+(b+("How to enable WebGL in "+a+".</a>")))}av.checkForWebGL=function(){var a=Q("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};f=av.prototype;f.My=[];f.Fm=null;f.yr=null;f.Sc=null;f.Vt=document.body;f.tv=null;f.fC=function(a){this.tv=a};
f.RB=function(a){this.Vt=a};function dv(a){Jb(a.My);a.Fm=window.console.log;a.yr=function(){a.Fm.apply(this,arguments);var b="";D(arguments,function(a,d){0<d&&(b+=" ");b+=a});a.My.push(b)};window.console.log=a.yr}f.ws=function(a){!0===a?(dv(this),window.onerror=this.sv.bind(this)):(window.onerror=void 0,null!=this.Fm&&(window.console.log=this.Fm,this.yr=this.Fm=null))};
f.sv=function(a,b,c){if(null==this.Sc){null!=this.tv&&this.tv();var d="",e="",d="<b>Render Error!</b><br><br>";r(a)&&(e+=a+"<br>");r(b)&&(e+="src: "+b+"<br>",u(c)&&(e+=" line: "+c+"<br>"));this.Sc=new bn;this.Sc.k(this.Vt);Pm(this.Sc,null);this.Sc.dk(d);this.Sc.mt(e);Im(this.Sc,!0);this.Sc.ba(!0);this.Sc.a().style.opacity=0;this.Sc.Vv();this.Sc.Ne();vk(this.Sc.a(),200);Tc(this.Sc,"f",function(a){a.target.g();this.Sc=null}.bind(this))}};f.clear=function(){null!=this.Sc&&(this.Sc.g(),delete this.Sc)};
f.g=function(){av.d.g.call(this);this.clear();delete this.Fm;delete this.yr;delete this.Vt};
v("xiv.utils.ErrorCatcher.isCompatible",function(){var a=!0,b=bc(),c={Chrome:{$n:Xb("Chrome")||Xb("CriOS"),mo:11},IE:{$n:$b(),mo:11},Safari:{$n:ac(),mo:5.1},Opera:{$n:Zb(),mo:12},Firefox:{$n:Xb("Firefox"),mo:4}},d=!1;C(c,function(c){c.$n&&!d&&1==Ya(c.mo,b)&&(bv("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>"),a=!1,d=!0)});a&&!av.checkForWebGL()&&(cv(),
a=!1);return a});v("xiv.utils.ErrorCatcher.checkForWebGL",av.checkForWebGL);v("xiv.utils.ErrorCatcher.EventType",{ERROR:"S"});v("xiv.utils.ErrorCatcher.prototype.setOnErrorCallback",av.prototype.fC);v("xiv.utils.ErrorCatcher.prototype.setDialogParent",av.prototype.RB);v("xiv.utils.ErrorCatcher.prototype.waitForError",av.prototype.ws);v("xiv.utils.ErrorCatcher.prototype.clear",av.prototype.clear);v("xiv.utils.ErrorCatcher.prototype.onError",av.prototype.sv);
v("xiv.utils.ErrorCatcher.prototype.dispose",av.prototype.g);E&&pc(8);function ev(){U.call(this);this.uj=Q("div",{id:ev.ID_PREFIX+"_ProgBarHolder_"+B(),"class":ev.CSS.$D});Yh(this.a(),this.uj);this.fh=Q("div",{id:ev.ID_PREFIX+"_LabelHolder_"+B(),"class":ev.CSS.HD});Yh(this.a(),this.fh);this.Ah=new iq;this.Ah.Cb(this.uj);P(Oh("progress-bar-thumb",this.uj),ev.CSS.Hs);this.Ql=Q("div",{id:ev.ID_PREFIX+"_EndNode_"+B(),"class":ev.CSS.xD});Yh(this.uj,this.Ql);this.gI=Q("div",{id:ev.ID_PREFIX+"_GlowNode_"+B(),"class":ev.CSS.zD});Yh(this.Ql,this.gI)}w(ev,U);
v("xiv.ui.ProgressBarPanel",ev);ev.ID_PREFIX="xiv.ui.ProgressBarPanel";ev.CSS_SUFFIX={Hs:"thumb",$D:"progbarholder",ox:"progressbar",HD:"labelholder",xD:"endnode",zD:"glownode"};f=ev.prototype;f.fo="";f.iw=!1;f.Bf=function(a){this.fo=a;this.fh.innerHTML=this.fo};f.hw=function(a){this.iw=null!=a&&!1===a?!1:!0;this.C(this.Ah.w())};
f.C=function(a){this.Ah.C(a);a=this.Ah.a().childNodes[0];var b=ev.CSS.ox;Ib(Ah(a),b)||P(a,ev.CSS.ox);this.Ql.style.left="calc("+a.style.width+" - 1px)";this.fh.innerHTML=this.fo;this.iw&&(0<this.fo.length&&(this.fh.innerHTML+=" "),this.fh.innerHTML+=this.Ah.w().toString()+"%");Ch(this.uj,"progress-bar-horizontal")};f.w=function(){return this.Ah.w()};
f.f=function(){ev.d.f.call(this);null!=this.Ah&&(this.Ah.g(),delete this.Ah);null!=this.uj&&(R(this.uj),delete this.uj);null!=this.fh&&(R(this.fh),delete this.fh);null!=this.Ql&&(R(this.Ql),delete this.Ql);this.fo=this.iw=null};v("xiv.ui.ProgressBarPanel.EventType",{});v("xiv.ui.ProgressBarPanel.ID_PREFIX",ev.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",ev.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",ev.prototype.Bf);v("xiv.ui.ProgressBarPanel.prototype.showValue",ev.prototype.hw);
v("xiv.ui.ProgressBarPanel.prototype.setValue",ev.prototype.C);v("xiv.ui.ProgressBarPanel.prototype.getValue",ev.prototype.w);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",ev.prototype.f);function fv(){U.call(this)}w(fv,ns);v("nrg.ui.ThumbnailGallery",fv);fv.ID_PREFIX="nrg.ui.ThumbnailGallery";fv.CSS_SUFFIX={wD:"dialog",Is:"thumbnail",Ks:"thumbnail-image",fO:"thumbnail-text"};var gv=B();f=fv.prototype;f.is=!1;f.mw=function(a){this.is=a;null!=this.oa&&this.is&&this.oa.Yv(hv)};f.k=function(a){fv.d.k.call(this,a);iv(this);this.is&&this.oa.Yv(hv)};
function hv(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=bi(a),d=b[gv].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[gv]&&(e=h[gv].toLowerCase(),e=Ka(d,e),0>e)){$h(b,h);return}a.appendChild(b)}f.zn=function(a,b){var c=new ri;Eh(c.a(),Ah(c.a()),this.Cj);Eh(c.$e,Ah(c.$e),this.al);Eh(c.ib,Ah(c.ib),this.$k);c.aw(a);c.So(b);return c};f.loop=function(a){C(this.Ic,function(b){a(b)})};
f.Gl=function(a,b){if(!pb(this.Ic,a)){this.Ic=this.Ic?this.Ic:{};this.Ic[a.a().getAttribute("id")]=a;a.a()[gv]=a.ru().toLowerCase();this.mf(a.a(),b);this.Pc();var c=a.a();F(c,"mouseenter",function(){this.dispatchEvent({type:"T",wi:a})}.bind(this));F(c,"mouseleave",function(){this.dispatchEvent({type:"U",wi:a})}.bind(this))}};f.Ui=function(a,b,c){a=this.zn(a,b);this.Gl(a,c);jv(this,"image");jv(this,"text");jv(this,"thumbnail");this.Pc();return a};
f.Uo=function(){fv.d.Uo.call(this);F(this.ug,"mouseover",this.IC.bind(this))};f.IC=function(a){this.ZA=a.clientX;this.$A=a.clientY};function jv(a,b){var c,d=[],e="";for(e in a.Ic){switch(b){case "thumbnail":d=a.Cj;c=a.Ic[e].a();break;case "image":d=a.$k;c=a.Ic[e].ib;break;case "text":d=a.al,c=a.Ic[e].$e}Eh(c,Ah(c),d)}}f.ey=function(a){null!=this.Cj||iv(this);this.Cj.push(a);jv(this,"thumbnail")};f.hy=function(a){this.$k.push(a);jv(this,"image")};f.iy=function(a){this.al.push(a);jv(this,"text")};
f.o=function(a){a&&pk(this.a(),a)};function iv(a){var b=new ri;a.Cj=Ah(b.a());a.Cj.push(fv.CSS.Is);a.$k=Ah(b.ib);a.$k.push(fv.CSS.Ks);a.al=Ah(b.$e);a.al.push(fv.CSS.rx);R(b.a());delete b}
f.f=function(){fv.d.f.call(this);delete this.is;null!=this.ZA&&delete this.ZA;null!=this.$A&&delete this.$A;null!=this.Ic&&(this.Cn(this.Ic),delete this.Ic);null!=this.oa&&(I(this.oa),this.oa.g(),delete this.oa);null!=this.Cj&&(Jb(this.Cj),delete this.Cj);null!=this.$k&&(Jb(this.$k),delete this.$k);null!=this.al&&(Jb(this.al),delete this.al);delete this.XP};v("nrg.ui.ThumbnailGallery.ID_PREFIX",fv.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",fv.CSS_SUFFIX);
v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",gv);v("nrg.ui.ThumbnailGallery.thumbnailSorter",hv);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",fv.prototype.mw);v("nrg.ui.ThumbnailGallery.prototype.render",fv.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",fv.prototype.zn);v("nrg.ui.ThumbnailGallery.prototype.loop",fv.prototype.loop);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",fv.prototype.Gl);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",fv.prototype.Ui);
v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",fv.prototype.Uo);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",fv.prototype.ey);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",fv.prototype.hy);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",fv.prototype.iy);v("nrg.ui.ThumbnailGallery.prototype.updateStyle",fv.prototype.o);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",fv.prototype.f);function kv(){U.call(this)}w(kv,U);v("xiv.ui.ViewableGroupMenu",kv);kv.ID_PREFIX="xiv.ui.ViewableGroupMenu";kv.CSS_SUFFIX={rp:"header",Is:"thumbnail",rx:"thumbnail-text",Ks:"thumbnail-image",qE:"thumbnailgallery",pp:"background"};f=kv.prototype;f.W=null;f.Zc=null;f.bm=null;
f.k=function(a){kv.d.k.call(this,a);this.Zc=Q("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});P(this.Zc,this.constructor.CSS.pp);null!=this.a().parentNode?Yh(this.a().parentNode,this.Zc):Yh(this.a(),this.Zc);this.bm=Q("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":kv.CSS.rp});this.bm.innerHTML="<b> Select View <b>";Yh(this.a(),this.bm);null!=this.W||this.reset()};f.vq=function(){return this.Zc};f.show=function(){vk(this.a(),cm.nM)};
f.Ui=function(a,b){null!=this.W||this.reset();var c=this.W.Ui(a,b);lv(this,c);return c};f.em=function(){yk(this.a(),500);R(this.a())};f.reset=function(){null!=this.W&&(this.W.g(),delete this.W);this.W=new fv;this.W.mw(!0);this.W.k(this.a());P(this.W.a(),kv.CSS.qE);this.W.ey(kv.CSS.Is);this.W.hy(kv.CSS.Ks);this.W.iy(kv.CSS.rx)};function lv(a,b){F(b,"A",function(){this.dispatchEvent({type:"V",zw:b})}.bind(a))}
f.f=function(){kv.d.f.call(this);null!=this.Zc&&(R(this.Zc),delete this.Zc);null!=this.bm&&(R(this.bm),delete this.bm);null!=this.W&&(this.W.g(),delete this.W)};v("xiv.ui.ViewableGroupMenu.ID_PREFIX",kv.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{EO:"V"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",kv.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",kv.prototype.k);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",kv.prototype.vq);v("xiv.ui.ViewableGroupMenu.prototype.show",kv.prototype.show);
v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",kv.prototype.Ui);v("xiv.ui.ViewableGroupMenu.prototype.hide",kv.prototype.em);v("xiv.ui.ViewableGroupMenu.prototype.reset",kv.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",kv.prototype.f);var mv;function nv(a,b,c,d,e){this.Ti=a;this.Mk=b;this.ry=c;this.qF=d;this.yo=e}nv.prototype.getName=function(){return this.Mk};function ov(a){return!a.Mk||"[object Object]"==a.Ti}
function pv(a){var b=[a.Ti?qv(a.Ti)+".":"",a.Mk?qv(rv(a.Mk)):"anonymous",qv(a.qF),a.ry?" [as "+qv(rv(a.ry))+"]":""];if(a.yo)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.yo.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',qv(a.yo),"', '",c,"'); return false\">",qv(a.yo),"</a>")}else b.push(qv(a.yo));return b.join("")}
var sv=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,tv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,uv=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
vv=/^function ([a-zA-Z_$][\w$]*)/,wv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function xv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(vv),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");r(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new nv("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function yv(a){var b=a.match(sv);if(b)return new nv(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new nv("",e,"",d,h)}return(b=a.match(tv))?new nv("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(uv))?new nv(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(wv))?new nv("",b[1]||"","","",b[2]||
""):null}function rv(a){return mv?mv(a):a}function qv(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function zv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){mv=a});function Av(a,b){return a==b}function Bv(a,b){return a.toString()===b.toString()}var Cv={String:Av,Number:Av,Boolean:Av,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:Bv,Function:Bv};function Dv(a,b,c){return Math.abs(a-b)<=c}var Ev={Number:Dv};
function Fv(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function Gv(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+Fv(a)+")");return b}function Hv(a,b){return b.length==a+1?b[0]:null}function Iv(a,b,c){return c.length==b+1?c[a]:c[a-1]}function Jv(a,b){b.length==a||b.length==a+1&&r(b[0])||Kv(null,"Incorrect arguments passed to assert function")}
function Lv(a,b){var c="Expected "+Gv(a)+" but was "+Gv(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function Mv(a,b){Jv(1,arguments);var c=Hv(1,arguments),d=Iv(1,1,arguments);ia(d)||Kv(c,"Bad argument to assert(boolean)");d||Kv(c,"Call to assert(boolean) with false")}function Tv(a,b){Jv(1,arguments);var c=Hv(1,arguments),d=Iv(1,1,arguments);ia(d)||Kv(c,"Bad argument to assertTrue(boolean)");d||Kv(c,"Call to assertTrue(boolean) with false")}function Uv(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments),h=Lv(d,e);d===e||Kv(Hv(2,arguments),h)}
function Vv(a,b){Jv(1,arguments);var c="Expected not to be "+Gv(null);null!==Iv(1,1,arguments)||Kv(Hv(1,arguments),c)}function Wv(a,b){Jv(1,arguments);var c="Expected not to be "+Gv(void 0);void 0!==Iv(1,1,arguments)||Kv(Hv(1,arguments),c)}
function Xv(a,b,c){function d(a,b,c){for(var q=0;q<h.length;++q){var t=h[q]===a,s=k[q]===b;if(t||s){t&&s||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(q=Fv(a),t=Fv(b),q==t){var s="Array"==q,z=l(q,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(s&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(s?"[%s]":c?".%s":"%s"),a.__iterator__)ja(a.Rl)?a.Rl(b)||e.push("equals() returned false for "+(c||
q)):a.Ab?d(a.Ab,b.Ab,z.replace("%s","map_")):e.push("unable to check "+(c||q)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)s&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||t)));for(y in b)s&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||q));if(s)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+Lv(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=Cv[a])?a(b,c)?"":Lv(b,c):null};d(a,b,"");return 0==e.length?null:Lv(a,b)+"\n   "+e.join("\n   ")}function Yv(a,b,c){Jv(2,arguments);var d=Hv(2,arguments)?Hv(2,arguments):"",e=Xv(Iv(1,2,arguments),Iv(2,2,arguments));!e||Kv(d,e)}function Zv(a,b,c,d){Jv(3,arguments);var e=Iv(1,3,arguments),h=Iv(2,3,arguments),k=Iv(3,3,arguments);Dv(e,h,k)||Kv(Hv(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function $v(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function aw(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function bw(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function Kv(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new cw(a,b);}
function cw(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=zv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new nv("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(yv(c[e]));c=d}else c=xv();for(d=c.length-1;c[d]&&ov(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(pv(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,cw):this.stack=Error().stack||""}w(cw,Error);cw.prototype.toString=function(){return this.message};v("fail",function(a){Kv("Call to fail()",a)});v("assert",Mv);
v("assertThrows",function(a,b){Jv(1,arguments);var c=Iv(1,1,arguments),d=Hv(1,arguments);"function"==typeof c||Kv(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&r(e.stacktrace)&&r(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}Kv(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){Jv(1,arguments);var c=Hv(1,arguments),d=Iv(1,1,arguments);"function"==typeof d||Kv(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",Kv(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",Tv);
v("assertFalse",function(a,b){Jv(1,arguments);var c=Hv(1,arguments),d=Iv(1,1,arguments);ia(d)||Kv(c,"Bad argument to assertFalse(boolean)");!d||Kv(c,"Call to assertFalse(boolean) with true")});v("assertEquals",Uv);v("assertNotEquals",function(a,b,c){Jv(2,arguments);var d=Iv(2,2,arguments),e="Expected not to be "+Gv(d);Iv(1,2,arguments)!==d||Kv(Hv(2,arguments),e)});v("assertNull",function(a,b){Jv(1,arguments);var c=Iv(1,1,arguments),d=Lv(null,c);null===c||Kv(Hv(1,arguments),d)});
v("assertNotNull",Vv);v("assertUndefined",function(a,b){Jv(1,arguments);var c=Iv(1,1,arguments),d=Lv(void 0,c);void 0===c||Kv(Hv(1,arguments),d)});v("assertNotUndefined",Wv);v("assertNotNullNorUndefined",function(a,b){Jv(1,arguments);Vv.apply(null,arguments);Wv.apply(null,arguments)});v("assertNonEmptyString",function(a,b){Jv(1,arguments);var c=Iv(1,1,arguments),d="Expected non-empty string but was "+Gv(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||Kv(Hv(1,arguments),d)});
v("assertNaN",function(a,b){Jv(1,arguments);isNaN(Iv(1,1,arguments))||Kv(Hv(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){Jv(1,arguments);!isNaN(Iv(1,1,arguments))||Kv(Hv(1,arguments),"Expected not NaN")});v("assertObjectEquals",Yv);
v("assertObjectRoughlyEquals",function(a,b,c,d){Jv(3,arguments);var e=Iv(3,3,arguments),h=Hv(3,arguments)?Hv(3,arguments):"",k=Xv(Iv(1,3,arguments),Iv(2,3,arguments),function(a,b,c){return(a=Ev[a])?a(b,c,e)?"":Lv(b,c)+" which was more than "+e+" away":null});!k||Kv(h,k)});v("assertObjectNotEquals",function(a,b,c){Jv(2,arguments);var d=Hv(2,arguments)?Hv(2,arguments):"";Xv(Iv(1,2,arguments),Iv(2,2,arguments))||Kv(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments),h=Hv(2,arguments)?Hv(2,arguments):"",k=Fv(d);"Array"==k||Kv(h,"Expected an array for assertArrayEquals but found a "+k);k=Fv(e);"Array"==k||Kv(h,"Expected an array for assertArrayEquals but found a "+k);Yv(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments),h=Hv(2,arguments)?Hv(2,arguments):"";if(d){Uv("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)Uv("mismatch at index "+k+": "+h,d[k],e[k])}else Mv(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){Jv(3,arguments);var e=Iv(1,3,arguments),h=Iv(2,3,arguments),k=Iv(3,3,arguments),l=Hv(3,arguments)?Hv(3,arguments):"";if(e){Uv("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)Zv(l,e[n],h[n],k)}else Mv(l,!h)});
v("assertSameElements",function(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments),h=Hv(2,arguments);Tv("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ha(d)&&ha(e));d=$v(d);e=$v(e);d.length==e.length||Kv(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=$v(d),l=0;l<e.length;l++){var n=aw(k,e[l]);-1!=n||Kv(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){Jv(1,arguments);Iv(1,1,arguments)||Kv(Hv(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){Jv(1,arguments);Iv(1,1,arguments)&&Kv(Hv(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){Jv(2,arguments);var d=Iv(2,2,arguments),e=bw(Iv(1,2,arguments)),d=bw(d),h=Lv(e,d);e===d||Kv(Hv(2,arguments),h)});
v("assertHashEquals",function(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments),h=Hv(2,arguments),k;for(k in d)k in e||Kv(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||Kv(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||Kv(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",Zv);
v("assertContains",function(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments);-1!=aw(e,d)||Kv(Hv(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments);-1==aw(e,d)||Kv(Hv(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){Jv(2,arguments);var d=Iv(1,2,arguments),e=Iv(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||Kv(Hv(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function dw(){U.call(this);this.tb=[];this.xp={};this.Ib={kO:null,Lm:null,Gg:null,iD:null,oM:null,jD:null,hE:null,rE:null};this.Ib.Lm=Q("div",{id:dw.ID_PREFIX+"_menu_top_left_"+B(),"class":dw.CSS.UD,viewbox:this.a().id});Yh(this.a(),this.Ib.Lm);this.Fb=Q("div",{id:dw.ID_PREFIX+"_ViewFrame_"+B(),"class":dw.CSS.EE});Yh(this.a(),this.Fb);this.Zb=new ev;Yh(this.Fb,this.Zb.a());this.Zb.a().style.opacity=0;ew(this.Zb);this.o();this.Ru()}w(dw,U);v("xiv.ui.ViewBox",dw);dw.ID_PREFIX="xiv.ui.ViewBox";
dw.CSS_SUFFIX={MM:"hidden",YN:"tabdragger",ZN:"tabdragger-handle",GE:"viewlayoutmenu",UD:"menu-top-left",TD:"menu-left",FE:"viewlayouthandler",$N:"ziptabs",aO:"ziptab-bounds",EE:"viewframe",yM:"component-highlight",AE:"viewablegroupmenu",FM:"emptymenubutton"};var fw={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=dw.prototype;f.$I="empty";f.Wd=null;f.Ma=null;f.Nb=null;f.ma=null;f.Zb=null;f.Cd=null;f.L=null;f.xh=null;f.Fe=null;f.uA=!1;f.zs=!1;f.Bm=null;f.Uk=null;f.Cm=null;
f.lm=!1;f.ks=!1;f.RI=function(){return this.lm};f.Ra=function(){return this.ma};f.iH=function(){return this.Ib};f.cH=function(){return this.$I};f.aI=function(){return this.tb};f.XH=function(){return this.Fb};f.$G=function(){return this.Ma};f.aH=function(){return this.Nb};f.ZH=function(){return this.Cd};
function gw(a,b){var c=new Wf,d=0;null!=b||(b=function(a){return a});c.setInterval(20);F(c,Xf,function(){d+=20;str="0px 0px 0px 1px rgba(255,255,255,"+b(d/200)+")";this.Fb.style.aP=str;200<d&&(c.stop(),c.g(),delete c)}.bind(a));c.start()}f.Cu=function(){gw(this)};f.Em=function(){gw(this,function(a){return 1-a})};f.OH=function(){return this.Bj};f.Ju=function(){return null!=this.Bj};f.Dt=function(){this.Bj=void 0};f.SF=function(a){this.Zt=this.Zt?this.Zt:[];this.Zt.push(a)};f.li=function(a){this.Nb.Qo(a)};
f.lK=function(){this.Zb.C(0);this.Zb.hw(!0);hw(this,this.Zb,0)};function iw(a,b){a.Zb.Bf("");a.Zb.hw(!0);a.Zb.C(100*b)}f.Bv=function(a){if(this.zs)iw(this,.5*a.value+.5);else if(1<this.Cm){var b=1/this.Cm;if(.96<a.value&&this.Uk!=a.value&&.96>this.Uk&&this.Uk<a.value)this.Bm++,iw(this,b*this.Bm);else{this.Uk=a.value;var b=1/this.Cm,c=b*this.Bm+a.value*b;this.Uk<a.value&&iw(this,c+a.value*b)}}else iw(this,a.value)};
function jw(a){var b=a.ma.yk();!0==b[J.SINGLE_FRAME_SCAN]?(a.li("Transverse"),b=Or(a.Ma),D(b,function(a){-1==a.id.indexOf("ZoomDisplay")&&(a.style.visibility="hidden")}),R(a.Nb.a())):null!=a.tb[0].Tb()?a.li(a.tb[0].Tb()):null!=b[J.ORIENTATION_KEY]&&a.li(cb(a.ma.yk()[J.ORIENTATION_KEY]))}
f.Er=function(){this.xh.ws(!1);D(Mh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.lm=this.zs=!1;this.L.Uy();this.L.Aq().cw(this.Nb.nj.src);this.Fe.Ty();this.Fe.wy();var a=[this.Ib.Gg,this.Nb.a(),this.Ma.a()],a=Mb(a,this.L.gA()),b=[];b.push(this.Zb.a());"demo"==cm.MODE?this.dd(pu):(jw(this),this.ma.yk()[J.SINGLE_FRAME_SCAN]||(a=Mb(a,Or(this.Ma))));var c=[],d=[],e=[],h=[];D(a,function(){c.push(0);d.push(1)});D(b,function(){e.push(1);h.push(0)});Mk(Mb(a,b),Mb(c,e),Mb(d,h),400,null,null,
function(){this.Zb.C(0);ew(this.Zb,0);this.dispatchEvent("X");this.Em();this.ks=!1;this.o();this.Dr()}.bind(this))};f.xv=function(a){C(this.ma.vc,function(b,c){null!=a.Gw[c]&&(b.Xk(a.Gw[c]),b.o())})};f.Dr=function(){this.ma&&this.ma.o();null!=this.Fe&&this.Fe.update();null!=this.ma&&this.Fe.mB()};
function kw(a,b){a.Cd.reset();sb(a.xp);Ib(a.tb,b)||a.tb.push(b);1==a.tb.length&&a.li(fw[b.Xf]);var c=b.Tc,d=null;1<c.length?(D(c,function(a,b){d=this.Cd.Ui(a.zm,a.Pd()||b);this.xp[ma(d)]=a}.bind(a)),ew(a.Zb,0),hw(a,a.Cd,400)):a.load(c[0],!1)}f.QG=function(){return 700};function lw(a,b){wu("Scans with frame counts greater than 700 may crash the Viewer.&nbspAre you sure you want to continue?",a.Fb,b)}function mw(a,b){wu("ViewBox in use.&nbspProceed anyway?",a.Fb,b)}
function nw(a,b,c){var d=function(){this.load(b,c)}.bind(a),e=b.Tc[0];if(null!=e.fA){var h=700<e.Dd[0].fg().length;if("scans"==e.Xf.toLowerCase()&&h&&!a.ks)return lw(a,function(){this.ks=!0;d()}.bind(a)),!1}return a.Ju()?(mw(a,function(){this.Dt();d()}.bind(a)),!1):!0}
f.load=function(a,b){ew(this.Zb,0);null!=this.xh?(this.xh.clear(),this.xh.ws(!1)):(this.xh=new av,this.xh.RB(this.Fb),this.xh.fC(this.Fr.bind(this)));this.dispatchEvent("W");if(!(a instanceof Sl)||nw(this,a,b))if(this.lm=!0,null!=a){if(null!=b?b:1)ow(this),pw(this),this.L=new ou(this),this.Ma=new Nr,this.Ma.a().style.opacity=0,Yh(this.Fb,this.Ma.a()),P(this.Ma.a(),dw.CSS.FE),F(this.Ma,"z",this.Dr.bind(this)),F(this.Ma,"w",this.xv.bind(this)),F(this.Ma,"y",this.yv.bind(this)),F(this.Ma,"x",this.wv.bind(this)),
this.ma=new Rt,qw(this),this.Fe=new W(this,this.ma,this.Ma,this.L),this.Fe.LC(this.Nb),this.uA=!0;ew(this.Cd,400);hw(this,this.Zb,0);if(a instanceof Sl)kw(this,a);else{var c;C(this.ma.vc,function(a,b){(c=this.Ma.Cz(b))&&a.sa(c.a())}.bind(this));Tc(this.ma,"j",this.lK.bind(this));Tc(this.ma,"l",this.Er.bind(this));F(this.ma,"k",this.Bv.bind(this));this.Bm=null;"scans"==a.Xf.toLowerCase()?rw(this,a):(sw(this,a),tw(this,a))}}else this.Fr("The data set is empty!")};
function sw(a,b){a.Bm=0;a.Uk=0;a.Cm=b.Dd.length+8;D(b.Dd,function(a){null!=a.Zd.labelMapFile&&this.Cm++}.bind(a))}
function rw(a,b){hw(a,a.Zb,0);iw(a,0);a.zs=!0;var c=a.tb[a.tb.length-1].bA(),d=b.Dd[0].fg()[0],e="";null!=d?(-1!=d.toLowerCase().indexOf("xiv/sample-data/scans/")?(d=d.split("xiv/sample-data/scans/"),e=d[0]+"xiv/sample-data/scans/"+(d[1].split("/")[0]+".zip")):e=d.split("/files/")[0]+"/files",window.console.log("XImgView Zip Downloading (XHR): "+e),xl(e,function(a){window.console.log("Downloaded: "+e+"!");b.Dd[0].TB(a,function(){tw(this,b)}.bind(this),em)}.bind(a),function(a){0<a.totalSize?iw(this,
a.loaded/a.totalSize*.5):0<c&&iw(this,a.loaded/c*.5)}.bind(a))):a.xh.sv("No readable files in the data set!")}function tw(a,b){a.xh.ws(!0);a.ma.k(b);a.Bj=(new Date).getTime()}f.Fr=function(){this.lm=!1;this.Em();ew(this.Zb);ow(this);this.Dt();this.dispatchEvent({type:"Y"})};f.yv=function(){C(this.ma.vc,function(a){a.o()});this.Fe.update()};f.wv=function(a){var b=a.frames;C(this.ma.vc,function(a,d){null!=b[d]&&(a.Xk(b[d].a()),a.o())}.bind(this));this.Fe.update()};
function ew(a,b){if(null!=a){b=u(b)&&0<=b?b:0;var c=function(){a.a().style.visibility="hidden";R(a.a());null!=a.vq&&R(a.Zc)};"hidden"==a.a().style.visibility||0==b?c():(yk(a.a(),b,c),null!=a.vq&&yk(a.Zc,b,c))}}function hw(a,b,c){c=u(c)&&0<=c?c:0;b.a().style.opacity="0";b.a().style.visibility="visible";Yh(a.Fb,b.a());0==c?b.a().style.opacity="1":(vk(b.a(),c,function(){}),null!=b.vq&&(Yh(a.Fb,b.Zc),vk(b.Zc,c,function(){})))}f.qs="Info.;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");
function uw(a,b,c,d){var e=bi(b),h=[],k;D(a.qs,function(){h.push(null)});h[d]=c;D(e,function(a){k=this.qs.indexOf(a.title);h[k]=a}.bind(a));Zh(b);D(h,function(a){null!=a&&b.appendChild(a)})}
f.ek=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Ib.Lm;break;case "LEFT":d=this.Ib.Gg;break;case "BOTTOM_LEFT":d=this.Ib.iD;break;case "TOP_RIGHT":d=this.Ib.rE;break;case "RIGHT":d=this.Ib.hE;break;case "BOTTOM_RIGHT":d=this.Ib.jD}u(c)?d.insertBefore(b,d.childNodes[c]):(a=this.qs.indexOf(b.title),0<a?uw(this,d,b,a):Yh(d,b));vw(this)};
f.vo=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?wk(a,200,1,null,.5):wk(a,200,.5);null!=b&&b(a)};f.PC=function(a){return"true"==this.Wd[a].getAttribute("checked").toString()};f.tu=function(a){return this.Wd[a]};f.dd=function(a){Ln(this.Wd[a])};f.Kw=function(a){g(a)||(a=[a]);D(a,function(a){null!=this.Wd[a]&&this.PC(a)&&Ln(this.Wd[a])}.bind(this))};
f.yC=function(a){var b=this.Ma.Dq();C(b,function(b){D([b.kf.a(),b.Ad.a()],function(b){a?(b.style.visibility="visible",b.style.opacity=0,vk(b,200)):yk(b,200,function(){b.style.visibility="hidden"})})})};
f.lk=function(a,b,c,d,e,h){var k=b+"-on",l=Q("img",b);l.id=kj(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(su,b+"-on");P(l,k);pk(l,{cursor:"pointer"});F(l,"click",function(){this.vo(l,e)}.bind(this));this.ek(a,l);if(null==this.Wd)this.Wd={};else if(null!=this.Wd[c])throw Error("Invalid identifier for toggle button.  In use.");return this.Wd[c]=l};
function pw(a){a.Ib.Gg=Q("div",{id:dw.ID_PREFIX+"_menu_left_"+B(),"class":dw.CSS.TD,viewbox:a.a().id});a.Ib.Gg.style.opacity=0;Yh(a.a(),a.Ib.Gg);a.Nb=new gp;a.Nb.QB("Select Layout");P(a.Nb.a(),dw.CSS.GE);a.Nb.TA(!0);a.Nb.a().style.opacity=0;a.Nb.oe.style.opacity=0;var b=a.Nb.a();Ob(a.qs,void 0,0,b.title);a.ek("LEFT",b);a.Fb.appendChild(a.Nb.oe)}
function qw(a){a.Cd=new kv;a.Cd.k(a.Fb);Yh(a.Fb,a.Cd.a());Yh(a.Fb,a.Cd.Zc);P(a.Cd.a(),dw.CSS.AE);F(a.Cd,"V",function(a){this.load(this.xp[ma(a.zw)],!1)}.bind(a));ew(a.Cd)}f.QH=function(){return this.Wd};function vw(a){var b,c,d,e;null!=a.Ib.Lm&&(d=a.Ib.Lm,e=T(d),b=0,c=e.height);null!=a.Ib.Gg&&(d=a.Ib.Gg,e=T(d),a=a.A.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.o=function(a){dw.d.o.call(this,a);null!=this.Ma&&this.Ma.o();this.ma&&this.ma.o();null!=this.Nb&&(a=Ei(this.Ib.Gg),T(this.Nb.oe),a=a.y-130,this.Nb.XB(0,a),this.Nb.lC(0,a));vw(this);null!=this.L&&this.L.update();null!=this.Fe&&this.Fe.VC()};
function ow(a){sb(a.xp);Jb(a.tb);null!=a.Ma&&(I(a.Ma),Ac(a.Ma.g()),delete a.Ma);null!=a.L&&a.L.g();null!=a.Nb&&(I(a.Nb),a.Nb.g(),delete a.Nb);null!=a.ma&&(a.ma.g(),delete a.ma);null!=a.Cd&&(a.Cd.g(),delete a.Cd);null!=a.Fe&&a.Fe.g();null!=a.Wd&&(R(a.Ib.Gg),delete a.Ib.Gg,C(a.Wd,function(a){I(a);R(a)}),Jb(a.Wd),delete a.Wd)}f.ar=!1;f.$q=function(){return this.ar};f.Ru=function(){F(this.a(),"mouseenter",function(){this.ar=!0}.bind(this));F(this.a(),"mouseleave",function(){this.ar=!1}.bind(this))};
f.f=function(){dw.d.f.call(this);ow(this);null!=this.Zb&&(this.Zb.g(),delete this.Zb);R(this.Fb);I(this.Fb);delete this.Fb;C(this.Ib,function(a,b){R(a);delete this.Ib[b]}.bind(this));delete this.Ib;delete this.RO;delete this.uA;delete this.zs;delete this.ar;delete this.Bm;delete this.Uk;delete this.Cm;delete this.ks};v("xiv.ui.ViewBox.EventType",{CE:"W",BE:"X",yN:"Y"});v("xiv.ui.ViewBox.ID_PREFIX",dw.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",dw.CSS_SUFFIX);v("xiv.ui.ViewBox.defaultLayout",fw);
v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",dw.prototype.Ra);v("xiv.ui.ViewBox.prototype.getMenus",dw.prototype.iH);v("xiv.ui.ViewBox.prototype.getLoadState",dw.prototype.cH);v("xiv.ui.ViewBox.prototype.getViewableTrees",dw.prototype.aI);v("xiv.ui.ViewBox.prototype.getViewFrame",dw.prototype.XH);v("xiv.ui.ViewBox.prototype.getLayoutHandler",dw.prototype.$G);v("xiv.ui.ViewBox.prototype.getLayoutMenu",dw.prototype.aH);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",dw.prototype.ZH);v("xiv.ui.ViewBox.prototype.highlight",dw.prototype.Cu);v("xiv.ui.ViewBox.prototype.unhighlight",dw.prototype.Em);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",dw.prototype.OH);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",dw.prototype.Dt);v("xiv.ui.ViewBox.prototype.doNotHide",dw.prototype.SF);v("xiv.ui.ViewBox.prototype.setLayout",dw.prototype.li);v("xiv.ui.ViewBox.prototype.showCornerInteractors",dw.prototype.yC);
v("xiv.ui.ViewBox.prototype.load",dw.prototype.load);v("xiv.ui.ViewBox.prototype.addToMenu",dw.prototype.ek);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",dw.prototype.vo);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",dw.prototype.PC);v("xiv.ui.ViewBox.prototype.getToggleButton",dw.prototype.tu);v("xiv.ui.ViewBox.prototype.getHighFrameCountThreshold",dw.prototype.QG);v("xiv.ui.ViewBox.prototype.fireToggleButton",dw.prototype.dd);v("xiv.ui.ViewBox.prototype.untoggle",dw.prototype.Kw);
v("xiv.ui.ViewBox.prototype.createToggleButton",dw.prototype.lk);v("xiv.ui.ViewBox.prototype.getToggleButtons",dw.prototype.QH);v("xiv.ui.ViewBox.prototype.isMouseOver",dw.prototype.$q);v("xiv.ui.ViewBox.prototype.isRendering",dw.prototype.RI);v("xiv.ui.ViewBox.prototype.isInUse",dw.prototype.Ju);v("xiv.ui.ViewBox.prototype.showInUseDialog",dw.prototype.UP);v("xiv.ui.ViewBox.prototype.updateStyle",dw.prototype.o);v("xiv.ui.ViewBox.prototype.disposeInternal",dw.prototype.f);function ww(){Dn.call(this)}w(ww,Dn);ww.prototype.ck=function(a,b){var c=new Jn(a,b);c.No(this);this.bo.push(c);this.qj&&En(this,c)};function xw(){U.call(this)}w(xw,U);v("xiv.ui.ViewBoxHandler",xw);xw.CSS_SUFFIX={AD:"handle",DE:"viewboxdragclone",Hj:"closebutton",Tw:"addrowbutton",Sw:"addcolumnbutton"};xw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=xw.prototype;f.Es=5;f.jx=5;f.kl=document.body;f.sj=function(a,b){this.dispatchEvent({type:"aa",fB:a,mF:b})};f.jL=function(){return this.F.length};f.Ln=function(){var a=[];D(this.F,function(b,c){a.push([]);D(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.F&&D(this.F,function(b,c){D(b,function(d,e){a(d,c,e,this.F.length,b.length)}.bind(this))}.bind(this))};f.Gu=function(a,b){this.F||(this.F=[[]]);var c=0,d=[],e;if(null!=a)c=yw(this,a),this.F[c.Rq].length<this.jx&&(d.push(zw(this)),Ob(this.F[c.Rq],c.UI+1,0,d[0]));else{d=[];e=this.F.length?this.F.length:1;for(c=0;c<e;c++)d.push(zw(this));0===this.F.length?this.F.push([d[0]]):D(this.F,function(a,b){a.push(d[b])})}this.sj(d,void 0===b?!0:b);Aw(this)};
f.aL=function(a){this.F&&(a=void 0===a?!0:a,this.F[0]&&1<this.F[0].length&&D(this.F,function(a){var c=a.length-1;Bw(this,a[c]);a.splice(c,1)}.bind(this)),this.sj(null,a),Aw(this))};function yw(a,b){for(var c=0,d=0,e=a.F.length,h=0,c=0;c<e;c++)for(d=0,h=a.F[c].length;d<h;d++)if(b===a.F[c][d])return{Rq:c,UI:d}}f.Ms=function(){for(var a=0,b=0,c=this.F.length,d=0,a=0;a<c;a++)for(b=0,d=this.F[a].length;b<d;b++)if(this.F[a][b].lm)return!0;return!1};
f.insertRow=function(a,b){this.F||(this.F=[[]]);var c=[],d,e;if(null!=a){var h=yw(this,a),c=[];e=this.F[h.Rq].length;if(this.F.length<this.Es){for(d=0;d<e;d++)c.push(zw(this));Ob(this.F,h.Rq+1,0,c)}}else if(e=this.F[0]&&this.F[0].length?this.F[0].length:1,this.F.length<this.Es){for(d=0;d<e;d++)c.push(zw(this));this.F.push(c)}this.sj(c,void 0===b?!0:b);Aw(this)};
f.cL=function(a){this.F&&(a=void 0===a?!0:a,1<this.F.length&&(D(this.F[this.F.length-1],function(a){Bw(this,a)}.bind(this)),this.F.splice(this.F.length-1,1)),this.sj(null,a),Aw(this))};f.Iq=function(a){for(var b=0,c=0,d=this.F.length,e=0,b=0;b<d;b++)for(c=0,e=this.F[b].length;c<e;c++)if(a===this.F[b][c].a())return this.F[b][c]};f.VH=function(a,b){return this.F[a][b].a()};f.TH=function(a,b){return this.F[a][b]};f.eA=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.dA=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.qC=function(a){this.kl=a};
function zw(a){var b=new dw;Yh(a.kl,b.a());Cw(a,b);var c=Q("img",{id:xw.ID_PREFIX+"_dragHandle_"+B(),"class":xw.CSS.AD});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.ek("TOP_LEFT",c,1);a.pk||(a.pk={});a.pk[b.a().id]=c;c.title="Drag / Swap ViewBox";Dw(a,b);Ew(a,b);F(b,"X",a.Fv.bind(a));F(b,"W",a.Gv.bind(a));F(b,"Y",a.Fr.bind(a));return b}
function Ew(a,b){var c=Q("img",{id:xw.ID_PREFIX+"_CloseButton_"+B(),"class":xw.CSS.Sw,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});rk(c,xw.CSS.Sw+"-hovered");F(c,"click",function(){this.Gu(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.ek("TOP_LEFT",c,1);a.Wx||(a.Wx={});a.Wx[b.a().id]=c;c.title="Add ViewBox Column"}
function Dw(a,b){var c=Q("img",{id:xw.ID_PREFIX+"_CloseButton_"+B(),"class":xw.CSS.Tw,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});rk(c,xw.CSS.Tw+"-hovered");F(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.ek("TOP_LEFT",c,1);a.dy||(a.dy={});a.dy[b.a().id]=c;c.title="Add ViewBox Row"}
function Cw(a,b){var c=Q("img",{id:xw.ID_PREFIX+"_CloseButton_"+B(),"class":xw.CSS.Hj,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});rk(c,xw.CSS.Hj+"-hovered");F(c,"click",function(){Fw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.ek("TOP_LEFT",c,1);a.tn||(a.tn={});a.tn[b.a().id]=c;c.title="Close ViewBox"}f.Fv=function(a){this.dispatchEvent({type:"$",HE:a.target})};f.Ls=function(a,b){this.loop(function(c){Ib(c.tb,a)&&b(c)})};f.Gv=function(a){this.dispatchEvent({type:"Z",HE:a.target})};
f.Fr=function(a){this.dispatchEvent(a)};function Bw(a,b){wk(b.a(),150,0);R(a.pk[b.a().id]);R(a.tn[b.a().id]);b.g()}function Gw(a,b){var c=[],d;Bw(a,b);D(a.F,function(a){d=[];D(a,function(a){a.ok||d.push(a)}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.F=c;a.sj(null,!0);Aw(a)}function Fw(a,b){1!=a.hB()&&(b.Ju()?Gw(a,b):mw(b,function(){Gw(this,b)}.bind(a)))}f.Ku=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.hB=function(){var a=0;this.loop(function(){a++});return a};
f.UH=function(a){for(var b=0,c=0,d=this.F.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.F[b].length;c<e;c++)if(this.F[b][c]===a)return e=b+1===this.F.length,h=c+1===this.F[b].length,e&&h?this.F[0][0]:e&&!h?this.F[0][c+1]:!e&&h?this.F[b+1][0]:this.F[b+1][c+1]};f.Iz=function(){var a;this.loop(function(b){null!=a||null!=b.Bj||(a=b)}.bind(this));if(null!=a)return a;var b=this.eA();g(b)?b.sort(function(a,b){return a.Bj<b.Bj?-1:a.Bj>b.Bj?1:0}):b=[b];return b[0]};
function Hw(a,b,c){var d=new fk,e=a.Kg[b.id],h=a.Kg[c.id];b[Iw]=!0;c[Iw]=!0;d.add(new Uj(b,[b.offsetLeft,b.offsetTop],[h.x,h.y],300,tk));d.add(new Uj(c,[c.offsetLeft,c.offsetTop],[e.x,e.y],300,tk));Tc(d,"end",function(){b[Iw]=!1;c[Iw]=!1;Jw(this);for(var a,d,e,h,m=0,q=0,t=this.F.length,s,z;m<t;m++)for(q=this.F[m],s=q.length,q=0;q<s;q++)z=this.F[m][q],this.Ku(z,b)&&(a=m,d=q),this.Ku(z,c)&&(e=m,h=q);u(a)&&u(e)&&(m=this.F[a][d],this.F[a][d]=this.F[e][h],this.F[e][h]=m,m=T(this.F[a][d].a()),t=T(this.F[e][h].a()),
Oi(this.F[e][h].a(),m),Oi(this.F[a][d].a(),t))}.bind(a));d.play()}f.Ct=function(){this.je&&(Fn(this.je),Fn(this.Sh),delete this.je,delete this.Sh)};function Kw(a){a.loop(function(a){null!=a.a()&&(this.je.ck(this.pk[a.a().id]),this.Sh.ck(a.a()))}.bind(a))}function Aw(a){a.Ct();a.je=new ww;a.Sh=new ww;Kw(a);var b=a.je,c=a.Sh;b.yw.push(c);c.er=!0;b.dr=!0;a.je.sa();a.Sh.sa();a.je.Kt=a.Lt.bind(a);F(a.je,"dragstart",a.LJ.bind(a));F(a.je,"dragover",a.rv.bind(a));F(a.je,"dragend",a.qv.bind(a))}f.Lt=function(a){return Lw(Lh(a.getAttribute("viewboxid")))};
f.LJ=function(){null!=this.Kg?sb(this.Kg):this.Kg={};Jw(this)};function Lw(a){var b=document.body;a=a.cloneNode(!1);a.className=xw.CSS.DE;b&&b.appendChild(a);return a}var Iw=B();xw.prototype.rv=function(a){if(a.Ol.element.id!==a.pq.Vi.getAttribute("viewboxid")){var b=Lh(a.pq.Vi.getAttribute("viewboxid"));a=Lh(a.Ol.element.id);b[Iw]||a[Iw]||Hw(this,b,a)}};function Jw(a){a.loop(function(a){this.Kg[a.a().id]=Ei(a.a())}.bind(a))}
xw.prototype.qv=function(a){var b=a.pq.Sa.qk;a=Lh(a.pq.Vi.getAttribute("viewboxid"));a=Ni(a);a={left:a.x,top:a.y};var c=Lw(b);Yh(this.kl.parentNode?this.kl.parentNode:this.kl,c);b=mk(b);pk(c,{top:b.top,left:b.left,"z-index":1E4});Mw(c,a).play();Nw(this);this.sj()};function Mw(a,b){var c=new fk;c.add(new Uj(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,tk));F(c,"end",function(){R(a)});return c}function Nw(a){a.loop(function(a){this.pk[a.a().id].style.visibility="visible"}.bind(a))}
xw.prototype.f=function(){xw.d.f.call(this);this.loop(function(a){I(a);R(a.a());a.g()}.bind(this));D(this.F,function(a){Jb(a)});Jb(this.F);delete this.F;this.oq(this.pk);delete this.pk;this.oq(this.tn);delete this.tn;C(this.Kg,function(a,b){sb(this.Kg[b]);delete this.Kg[b]}.bind(this));sb(this.Kg);delete this.Kg;null!=this.je&&(I(this.je),this.je.g());delete this.je;null!=this.Sh&&(I(this.Sh),this.Sh.g());delete this.Sh;delete this.kl};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",xw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{CE:"Z",BE:"$",DO:"aa"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",xw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",xw.prototype.Es);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",xw.prototype.jx);v("xiv.ui.ViewBoxHandler.prototype.rowCount",xw.prototype.jL);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",xw.prototype.Ln);v("xiv.ui.ViewBoxHandler.prototype.loop",xw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",xw.prototype.Gu);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",xw.prototype.aL);v("xiv.ui.ViewBoxHandler.prototype.insertRow",xw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",xw.prototype.cL);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",xw.prototype.Iq);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",xw.prototype.VH);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",xw.prototype.TH);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",xw.prototype.eA);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",xw.prototype.dA);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",xw.prototype.qC);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",xw.prototype.Ls);v("xiv.ui.ViewBoxHandler.prototype.isMatch",xw.prototype.Ku);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",xw.prototype.hB);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",xw.prototype.UH);
v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",xw.prototype.Iz);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxesRendering",xw.prototype.Ms);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",xw.prototype.f);function Ow(a){var b=Pw;return function(){var c=this||ba,c=c[Qw]||(c[Qw]={}),d=b(ma(a),arguments);return c.hasOwnProperty(d)?c[d]:c[d]=a.apply(this,arguments)}}var Qw="closure_memoize_cache_";function Pw(a,b){for(var c=[a],d=b.length-1;0<=d;--d)c.push(typeof b[d],b[d]);return c.join("\x0B")};function Rw(a){$c.call(this);this.Ml=a||Ih();if(this.nz=this.lG())this.ZF=F(this.Ml.ja,this.nz,ta(this.vu,this))}w(Rw,$c);f=Rw.prototype;f.lG=Ow(function(){var a=this.isSupported(),b="hidden"!=this.Bq();return a?b?((yh()||"")+"visibilitychange").toLowerCase():"visibilitychange":null});f.Bq=Ow(function(){return zh("hidden",this.Ml.ja)});f.bI=Ow(function(){return zh("visibilityState",this.Ml.ja)});f.isSupported=function(){return!!this.Bq()};
f.vu=function(){var a=this.isSupported()?this.Ml.ja[this.bI()]:null,a=new Sw(!!this.Ml.ja[this.Bq()],a);this.dispatchEvent(a)};f.f=function(){Vc(this.ZF);Rw.d.f.call(this)};function Sw(a,b){Ec.call(this,"visibilitychange");this.hidden=a;this.visibilityState=b}w(Sw,Ec);function Tw(a){ri.call(this);this.PB(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png");this.Mf=a;Uw(this)}w(Tw,ri);v("xiv.ui.Thumbnail",Tw);Tw.ID_PREFIX="xiv.ui.Thumbnail";Tw.CSS_SUFFIX={};
function Uw(a){var b="",c=a.Mf.ve;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=c.Name)b=c.Name;else if(null!=a.Mf.ji)var d=a.Mf.ji.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");D(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.So(e)}Tw.prototype.YH=function(){return this.Mf};Tw.prototype.f=function(){Tw.d.f.call(this);this.Mf.g();delete this.Mf};
v("xiv.ui.Thumbnail.ID_PREFIX",Tw.ID_PREFIX);v("xiv.ui.Thumbnail.CSS_SUFFIX",Tw.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.getViewable",Tw.prototype.YH);v("xiv.ui.Thumbnail.prototype.disposeInternal",Tw.prototype.f);function Vw(){U.call(this);this.Gf=new ww;this.zg=new ww;this.Gf.Kt=this.Lt.bind(this);F(this.Gf,"dragover",this.rv.bind(this));F(this.Gf,"dragend",this.qv.bind(this));F(this.Gf,"dragout",this.KJ.bind(this));F(this.zg,"drop",this.MJ.bind(this));var a=this.Gf,b=this.zg;a.yw.push(b);b.er=!0;a.dr=!0;this.zg.sa();this.Gf.sa()}w(Vw,fv);v("xiv.ui.ThumbnailGallery",Vw);Vw.ID_PREFIX="xiv.ui.ThumbnailGallery";Vw.CSS_SUFFIX={Js:"thumbnail-dragging"};var Ww="THUMBNAIL_DRAGGER_"+B(),Xw=Ww+"_FADER"+B();f=Vw.prototype;
f.Gf=null;f.zg=null;f.Ui=function(a,b){var c=this.zn(a);this.Gl(c,b);return c};f.zn=function(a){var b=new Tw(a);F(b,"A",function(){this.dispatchEvent({type:"fa",wi:b})}.bind(this));return b};f.Gl=function(a,b){Vw.d.Gl.call(this,a,b);var c=a.a();c&&this.Gf.ck(c)};f.Jy=function(){Fn(this.zg)};f.fy=function(a){this.zg.ck(a)};f.gy=function(a){D(a,function(a){this.fy(a)}.bind(this))};f.MH=function(a){return this.Ic[a.id]};
f.Ct=function(){null!=this.Gf&&(Fn(this.Gf),this.Gf.g());null!=this.zg&&(Fn(this.zg),this.zg.g())};f.Lt=function(a){a=qi(a).id;if(a in this.Ic)return this.Ic[a].setActive(!0,!0),a=this.Ic[a].a().cloneNode(!0),a.setAttribute("id",Ww+a.id),P(a,Vw.CSS.Js),a};f.rv=function(a){this.dispatchEvent({type:"da",Aw:a.Ol.element})};f.KJ=function(a){this.dispatchEvent({type:"ea",Aw:a.Ol.element})};
f.qv=function(){var a=Mh(Vw.CSS.Js);D(a,function(a){yk(a,300,function(){R(a)})});null!=a[0]&&this.Ic[a[0].id.replace(Ww,"")].setActive(!1,!0)};f.MJ=function(a){var b=Oh(Vw.CSS.Js);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);R(b);a.Ol.element&&this.dispatchEvent({type:"ga",wi:this.Ic[b.id.replace(Ww,"")],UL:a.Ol.element})}};f.f=function(){Vw.d.f.call(this);this.Ct()};
v("xiv.ui.ThumbnailGallery.EventType",{WD:"ba",lN:"ca",hO:"da",gO:"ea",eO:"fa",iO:"ga"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",Vw.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",Vw.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",Ww);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",Xw);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",Vw.prototype.Ui);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",Vw.prototype.zn);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",Vw.prototype.Gl);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",Vw.prototype.Jy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",Vw.prototype.fy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",Vw.prototype.gy);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",Vw.prototype.MH);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",Vw.prototype.f);function Yw(){var a=ti(Ih());a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()};function Zw(a,b,c,d){$c.call(this);this.ob=c||Ih();this.Pl=a;this.yf=[];this.SL=b?b:$w;this.XC=!!d;this.pf()}w(Zw,$c);var $w=0;f=Zw.prototype;
f.pf=function(){this.Pl.className="goog-tabpane";for(var a=[],b=ci(this.Pl);b;)a.push(b),b=ei(b);this.ke=this.ob.B("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.pc=this.ob.B("div","goog-tabpane-cont");this.Pl.appendChild(this.pc);b=this.Pl;switch(this.SL){case $w:b.insertBefore(this.ke,this.pc);b.insertBefore(ax(this),this.pc);bl(b,"goog-tabpane-top");break;case 1:b.appendChild(this.ke);b.appendChild(ax(this));bl(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.ke,this.pc);bl(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.ke,this.pc);bl(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.ke.tabIndex=0;F(this.ke,this.XC?"mousedown":"click",this.zr,!1,this);F(this.ke,"keydown",this.Ar,!1,this);for(var c=0;b=a[c];c++)bx(this,new cx(b))};
function ax(a){var b=Ih(void 0),c=null,d=b.ja;E&&d.createStyleSheet?(c=d.createStyleSheet(),Vi(c)):(d=Nh(b.ja,"head",void 0,void 0)[0],d||(c=Nh(b.ja,"body",void 0,void 0)[0],d=b.B("head"),c.parentNode.insertBefore(d,c)),c=b.B("style"),Vi(c),b.appendChild(d,c));return a.ob.B("div","goog-tabpane-clear")}f.f=function(){Zw.d.f.call(this);Uc(this.ke,this.XC?"mousedown":"click",this.zr,!1,this);Uc(this.ke,"keydown",this.Ar,!1,this);delete this.Pl;this.pc=this.ke=null};
function bx(a,b){b.Sa&&b.Sa!=a&&b.Sa instanceof Zw&&dx(b.Sa,b);var c=a.yf.length;ca(void 0)&&void 0!=c?(c=void 0,a.yf.splice(c,0,b),a.ke.insertBefore(b.$i,a.ke.childNodes[c])):(a.yf.push(b),a.ke.appendChild(b.$i));b.Oo(a,c);a.nh||(a.nh=b,a.dispatchEvent(new ex("change",a,a.nh)));a.pc.appendChild(b.pc);fx(b,b==a.nh);for(var d=c+1;c=a.yf[d];d++)c.Xn=d}function dx(a,b){u(b)&&(b=a.yf[b]);a.yf.splice(b.Xn,1);b.Oo(null);R(b.$i);R(b.pc);for(var c,d=0;c=a.yf[d];d++)c.Oo(a,d)}
function gx(a,b){if(0<=b&&b<a.yf.length){var c=a.yf[b];!c.isEnabled()||a.nh&&c==a.nh||(fx(a.nh,!1),fx(c,!0),a.nh=c,a.dispatchEvent(new ex("change",a,a.nh)))}}f.Ka=function(){return this.pc||null};f.a=function(){return this.Pl||null};f.zr=function(a){for(var b=a.target;b!=this.ke;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);gx(this,c);break}b=b.parentNode}a.preventDefault()};
f.Ar=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.nh.Xn-1;gx(this,0>a?this.yf.length-1:a);break;case 39:a=this.nh.Xn+1;gx(this,a>=this.yf.length?0:a);break;case 36:gx(this,0);break;case 35:gx(this,this.yf.length-1)}};function cx(a,b,c){var d,e;if(r(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=ci(a))d=ni(b),b.parentNode.removeChild(b);e=a}this.ob=c||Ih();this.pc=e||this.ob.B("div");this.$i=this.ob.B("li",null,d);this.Xn=this.Sa=null;this.Sb=!0}f=cx.prototype;
f.Pd=function(){return ni(this.$i)};f.we=function(a){hi(this.$i,a)};f.Hq=function(){return this.$i};f.Ka=function(){return this.pc};f.getParent=function(){return this.Sa};f.Kb=function(a){this.Sb=a;this.$i.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Sb};function fx(a,b){a.isEnabled()&&(a.pc.style.display=b?"":"none",a.$i.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.Oo=function(a,b){this.Sa=a;this.Xn=ca(b)?b:null};
function ex(a,b,c){Ec.call(this,a,b);this.page=c}w(ex,Ec);function Y(a){U.call(this);if(null!=a){var b=a;if(!r(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==hx.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||ix}w(Y,U);v("nrg.ui.Tabs",Y);var hx=["TOP","BOTTOM","LEFT","RIGHT"],ix=hx[0];Y.ID_PREFIX="nrg.ui.Tabs";Y.CSS_SUFFIX={$b:"tab",vi:"tab-active",gf:"page",ZD:"page-content",sp:"page-active",mb:"icon",hl:"icon-active",CD:"icon-content",LN:"scrollgallery"};
function jx(a,b,c,d,e){this.Gj=!1;this.TITLE=a;this.$b=b;this.mb=c;this.gf=d;this.zh=e}f=Y.prototype;f.vf=0;f.qm=0;f.Ud=null;f.k=function(a){Y.d.k.call(this,a);this.Ak=new Zw(this.a());this.M=[];P(this.a(),Y.Rc)};f.HH=function(){return this.M.length};f.WG=function(){return this.vf};f.vH=function(){return this.qm};f.Fq=function(){var a=[];D(this.M,function(b){a.push(b.$b)});return a};f.Gq=function(){var a=[];D(this.M,function(b){a.push(b.gf)});return a};
f.IH=function(){var a=[];D(this.M,function(b){a.push(b.mb)});return a};f.jF=function(a){D(a,function(a){this.Fl(a)}.bind(this))};f.reset=function(){for(var a=this.M.length;0<a;)dx(this.Ak,a-1),a--;this.lP()};f.ww=function(a){if(null==this.M)return!1;for(var b=0,c=this.M.length;b<c;b++)if(this.M[b].TITLE==a)return!0;return!1};
f.Fl=function(a){this.M=null!=this.M?this.M:[];if(this.ww(a))throw Error(a+" is an already existing tab!");var b;b=Q("div",{id:"Tab_"+B(),"class":Y.CSS.$b,title:a});Yh(this.a(),b);var c=Q("div",{id:"TabIcon_"+B(),"class":Y.CSS.mb}),d=Q("div",{"class":Y.CSS.CD},a);Yh(c,d);Yh(b,c);d=Q("div",{id:"TabPage_"+B(),"class":Y.CSS.gf,label:a});Yh(this.a().parentNode,d);var e=new cx(d,a);bx(this.Ak,e);this.M.push(new jx(a,b,c,d,e));kx(this);lx(this);mx(this);this.nk();this.setActive(0);this.o()};
f.nC=function(a,b){this.ww(a)||this.Fl(a);var c;a:if(null!=this.M){c=0;for(var d=this.M.length;c<d;c++)if(this.M[c].TITLE==a){c=this.M[c];break a}c=void 0}else c=!1;b instanceof ms?(d=b,c.gf.appendChild(b.a())):(d=new ms,d.k(c.gf),d.mf(b));P(d.a(),Y.CSS.ZD);this.o()};function kx(a){D(a.M,function(a){I(a.$b)}.bind(a))}function lx(a){D(a.M,function(a,c){F(a.$b,"click",function(){this.nk();this.setActive(c)}.bind(this))}.bind(a))}function mx(a){D(a.M,function(a,c){nx(this,c);ox(this,c)}.bind(a))}
function nx(a,b){F(a.M[b].$b,"mouseover",function(){!0!==this.M[b].Gj&&(P(this.M[b].$b,Y.CSS.vi),P(this.M[b].$b,vj(Y.CSS.vi,this.orientation)),P(this.M[b].mb,Y.CSS.hl))}.bind(a))}function ox(a,b){F(a.M[b].$b,"mouseout",function(){!0!==this.M[b].Gj&&(Ch(this.M[b].$b,Y.CSS.vi),Ch(this.M[b].$b,vj(Y.CSS.vi,this.orientation)),Ch(this.M[b].mb,Y.CSS.hl))}.bind(a))}
f.setActive=function(a){this.M[a].Gj=!0;this.qm=this.vf;this.vf=a;gx(this.Ak,a);P(this.M[a].$b,Y.CSS.vi);P(this.M[a].$b,vj(Y.CSS.vi,this.orientation));P(this.M[a].gf,Y.CSS.sp);P(this.M[a].gf,vj(Y.CSS.sp,this.orientation));P(this.M[a].mb,Y.CSS.hl);P(this.M[a].mb,vj(Y.CSS.hl,this.orientation))};
f.dz=function(a){this.M[a].Gj=!1;gx(this.Ak,0);Ch(this.M[a].$b,Y.CSS.vi);Ch(this.M[a].$b,vj(Y.CSS.vi,this.orientation));Ch(this.M[a].gf,Y.CSS.sp);Ch(this.M[a].gf,vj(Y.CSS.sp,this.orientation));Ch(this.M[a].mb,Y.CSS.hl);Ch(this.M[a].mb,vj(Y.CSS.hl,this.orientation))};f.nk=function(){D(this.M,function(a,b){this.dz(b)}.bind(this))};
f.o=function(){if(this.a().parentNode){P(this.a(),Y.Rc);P(this.a(),vj(Y.Rc,this.orientation));D(this.M,function(a){P(a.$b,vj(Y.CSS.$b,this.orientation));P(a.mb,vj(Y.CSS.mb,this.orientation));P(a.gf,vj(Y.CSS.gf,this.orientation))}.bind(this));switch(this.orientation){case "TOP":px(this);break;case "BOTTOM":this.aQ();break;case "RIGHT":qx(this)}if(0<this.M.length){var a=T(this.M[0].$b);0<a.width&&0<a.height&&(this.Ud=a)}}};
function qx(a){D(a.M,function(a){this.a().parentNode&&(pk(a.$b,{height:(100/this.M.length).toString()+"%"}),a.gf.style.width="calc(100% - "+T(a.$b).width+"px)")}.bind(a))}function px(a){var b;D(a.M,function(a,d){this.a().parentNode&&(b=100/this.M.length,pk(a.$b,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function rx(a){D(a.M,function(a){C(a,function(c,d){I(c);c.f?c.g():c.g&&c.g();delete c;delete a[d]});sb(a);delete a});Jb(a.M)}
f.f=function(){Y.d.f.call(this);D(this.Fq(),function(a){I(a)}.bind(this));rx(this);delete this.M;I(this.Ak);this.Ak.g();delete this.Ak;delete this.vf;delete this.qm;delete this.ZP;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",hx);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",ix);v("nrg.ui.Tabs.ID_PREFIX",Y.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",Y.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",jx);v("nrg.ui.Tabs.prototype.tabSize",Y.prototype.Ud);v("nrg.ui.Tabs.prototype.render",Y.prototype.k);
v("nrg.ui.Tabs.prototype.getTabCount",Y.prototype.HH);v("nrg.ui.Tabs.prototype.getLastActiveTab",Y.prototype.WG);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",Y.prototype.vH);v("nrg.ui.Tabs.prototype.getTabElements",Y.prototype.Fq);v("nrg.ui.Tabs.prototype.getTabPages",Y.prototype.Gq);v("nrg.ui.Tabs.prototype.getTabIcons",Y.prototype.IH);v("nrg.ui.Tabs.prototype.addTabs",Y.prototype.jF);v("nrg.ui.Tabs.prototype.reset",Y.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",Y.prototype.ww);
v("nrg.ui.Tabs.prototype.addTab",Y.prototype.Fl);v("nrg.ui.Tabs.prototype.setTabPageContents",Y.prototype.nC);v("nrg.ui.Tabs.prototype.setActive",Y.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",Y.prototype.dz);v("nrg.ui.Tabs.prototype.deactivateAll",Y.prototype.nk);v("nrg.ui.Tabs.prototype.updateStyle",Y.prototype.o);v("nrg.ui.Tabs.prototype.disposeInternal",Y.prototype.f);function sx(a){Y.call(this,a)}w(sx,Y);v("nrg.ui.ZipTabs",sx);sx.ID_PREFIX="nrg.ui.ZipTabs";f=sx.prototype;f.k=function(a){sx.d.k.call(this,a);P(this.a(),vj(sx.Rc,this.orientation));this.Hc=new Hq(this.a(),this.orientation);tx(this);a=Mh("goog-tabpane-tabs",this.a());D(a,function(a){a.style.visibility="hidden"})};f.ki=function(a){this.Hc.ki(a);this.o()};f.P=function(){return this.Hc};
function tx(a){F(a.Hc,"resize",function(a){this.Nh();if(null!=this.Ud){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.Ud.height-this.A.height)?this.nk():this.setActive(this.vf);break;case "LEFT":case "RIGHT":var c=36>=Math.abs(this.Ud.width-this.A.width)&&this.eq;4>=Math.abs(this.Ud.width-this.A.width)||c?this.nk():this.setActive(this.vf)}this.dispatchEvent({type:"resize",size:a.size,te:a.te})}}.bind(a))}f.eq=!1;
f.ec=function(a,b,c){this.o();a?(this.setActive(b||0),this.Hc.Cf(this.orientation,"MAX",null,c)):(this.nk(),this.Hc.Cf(this.orientation,"MIN",null,c))};f.o=function(){sx.d.o.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.Ud&&this.Hc.bC(this.Ud.height);break;case "LEFT":case "RIGHT":null!=this.Ud&&this.Hc.dC(this.Ud.width)}this.Hc.update()};
f.Fl=function(a){sx.d.Fl.call(this,a);1==this.Fq().length&&this.o();D(this.Fq(),function(a){F(a,"click",function(){if(null!=this.Ud)switch(this.o(),this.Nh(),this.orientation){case "BOTTOM":4>=Math.abs(this.A.height-this.Ud.height)?(this.setActive(this.vf),this.Hc.Cf("BOTTOM","MAX",void 0)):this.vf==this.qm&&this.Hc.Cf("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.A.height-this.Ud.height)?(this.setActive(this.vf),this.Hc.Cf("TOP","MAX",void 0)):this.vf==this.qm&&this.Hc.Cf("TOP","MIN",
void 0);break;case "RIGHT":null!=this.Ud&&(4>=Math.abs(this.A.width-this.Ud.width)?(this.eq=!1,this.setActive(this.vf),this.Hc.Cf("RIGHT","MAX",void 0)):this.vf==this.qm&&(this.eq=!0,this.Hc.Cf("RIGHT","MIN",void 0)))}}.bind(this))}.bind(this));this.nk();this.o()};f.f=function(){sx.d.f.call(this);I(this.Hc);this.Hc.g();delete this.Hc;delete this.eq};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{oD:"ha"});
v("nrg.ui.ZipTabs.ID_PREFIX",sx.ID_PREFIX);v("nrg.ui.ZipTabs.prototype.render",sx.prototype.k);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",sx.prototype.ki);v("nrg.ui.ZipTabs.prototype.getResizable",sx.prototype.P);v("nrg.ui.ZipTabs.prototype.setExpanded",sx.prototype.ec);v("nrg.ui.ZipTabs.prototype.updateStyle",sx.prototype.o);v("nrg.ui.ZipTabs.prototype.addTab",sx.prototype.Fl);v("nrg.ui.ZipTabs.prototype.disposeInternal",sx.prototype.f);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function ux(){U.call(this);this.cd=ux.ModalStates.Ij}w(ux,U);v("xiv.ui.Modal",ux);ux.ModalStates={De:"fullscreen",hf:"popup",Bs:"fullscreen-popup",Lg:"windowed",Ij:"demo",vD:"demp-fullscreen"};ux.ID_PREFIX="xiv.ui.Modal";ux.CSS_SUFFIX={pp:"background",wM:"columnmenu",BN:"rowmenu",xM:"button",CN:"button",aE:"projecttab",bE:"projecttab-bounds",cE:"projecttab-dragger",dE:"projecttab-dragger-handle",Uw:"addsubjects"};
function vx(){var a={};C(wx,function(b,c){a[c]=ux.ID_PREFIX+"."+cb(b.key)+".Button"});var b=Qk(nb(a)),c={};C(a,function(a,e){c[e]=b[a];var h=vj(a);b[a].className=h});return c}var wx={gl:{key:"CLOSE",title:"Close XNAT Image Viewer."},De:{key:"FULLSCREEN",title:"Enter full-screen mode."},hf:{key:"POPUP",title:"Popup to new window."},Lg:{key:"WINDOWED",title:"Exit full-screen mode."}};f=ux.prototype;f.Un=29;f.us=29;f.tr=320;f.ur=320;f.xo=null;f.WH=function(){return this.Da};f.NH=function(){return this.W};
f.xH=function(){return this.Ob};f.uH=function(){return this.aa.hf};f.qG=function(){return this.aa.gl};f.LG=function(){return this.aa.De};f.k=function(a){ux.d.k.call(this,a);this.BA();this.Da.Gu(null,!1);this.uc(this.cd)};
f.uc=function(a){null!=this.cd&&(this.Mr=this.cd);this.cd=a;null!=this.Mr&&Ch(this.a(),vj(this.constructor.Rc,this.Mr));P(this.a(),vj(this.constructor.Rc,this.cd));this.cd==ux.ModalStates.Ij?(this.aa.De.style.visibility="hidden",this.aa.Lg.style.visibility="hidden"):this.cd==ux.ModalStates.Lg?(this.aa.De.style.visibility="visible",this.aa.Lg.style.visibility="hidden"):this.cd==ux.ModalStates.hf?(this.aa.hf.style.visibility="hidden",this.aa.gl.style.visibility="hidden",this.aa.De.style.visibility=
"visible",this.aa.Lg.style.visibility="hidden"):this.cd==ux.ModalStates.Bs?(this.aa.hf.style.visibility="hidden",this.aa.De.style.visibility="hidden",this.aa.Lg.style.visibility="visible"):this.cd==ux.ModalStates.De&&(this.aa.hf.style.visibility="visible",this.aa.De.style.visibility="hidden",this.aa.Lg.style.visibility="visible");this.o()};f.Zl=function(){return this.cd};f.lj=function(){this.W.loop(function(a){a.setActive(!1);this.Da.loop(function(b){-1<b.tb.indexOf(a.Mf)&&a.setActive(!0)})}.bind(this))};
f.vy=function(){xx(this);this.Kd=null!=this.Kd?this.Kd:[];this.Yc=null!=this.Yc?this.Yc:new fk;yx(this);zx(this);F(this.Yc,"end",this.YJ.bind(this));D(this.Kd,function(a){this.Yc.add(a)}.bind(this));this.Yc.play();this.lj()};f.YJ=function(){D(this.Kd,function(a){this.Yc.remove(a);I(a);a.ie();a.g()}.bind(this));Jb(this.Kd);this.o();Ax(this)};function Ax(a){a.Da.loop(function(a){0==a.a().style.opacity&&vk(a.a(),300)})}
function yx(a){var b=null;a.Da.loop(function(a,d,e){b=a.a();this.Kd.push(new Uj(b,[b.offsetLeft,b.offsetTop],[this.ya.Yb.Mg[d][e],this.ya.Yb.He[d][e]],300,tk))}.bind(a))}function zx(a){var b=null;a.Da.loop(function(a,d,e){b=a.a();this.Kd.push(new Vj(b,[b.offsetWidth,b.offsetHeight],[this.ya.Yb.Sj[d][e],this.ya.Yb.Jm[d][e]],300,tk))}.bind(a))}
function xx(a){a.ya=null!=a.ya?a.ya:{};a.Nh();a.ya.fp={};a.ya.fp.Sj=Math.round(T(a.Ob.a()).width);a.ya.fp.Jm=Math.round(a.A.height-2*a.us);a.ya.fp.He=Math.round(a.us);Bx(a);Cx(a)}function Bx(a){a.ya.Yb={};a.ya.Yb.Sj=a.Da.Ln();a.ya.Yb.Jm=a.Da.Ln();a.Da.loop(function(a,c,d,e,h){this.ya.Yb.Sj[c][d]=Math.round((this.A.width-this.ya.fp.Sj-this.Un)/h-this.Un);this.ya.Yb.Jm[c][d]=Math.round((this.A.height-(e+1)*this.Un)/e)}.bind(a))}
function Cx(a){a.ya.Yb.Mg=a.Da.Ln();a.ya.Yb.He=a.Da.Ln();a.ya.Yb.oE=a.ya.fp.Sj+a.us;var b=0;a.Da.loop(function(a,d,e){b=this.ya.Yb.oE+e*(this.ya.Yb.Sj[d][e]+this.us);this.ya.Yb.Mg[d][e]=b;this.ya.Yb.He[d][e]=d*(this.ya.Yb.Jm[d][e]+this.Un);window.console.log();this.ya.Yb.He[d][e]+=this.Un}.bind(a))}f.o=function(){xx(this);this.Ob&&this.Ob.o();Dx(this);this.lj();this.W.o();this.W.Pc()};
function Dx(a){a.Da&&a.Da.loop(function(a,c,d){pk(a.a(),{height:this.ya.Yb.Jm[c][d],width:this.ya.Yb.Sj[c][d],left:this.ya.Yb.Mg[c][d],top:this.ya.Yb.He[c][d]});a.o()}.bind(a))}
f.BA=function(){var a=Q("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=ux.CSS.pp;this.a().appendChild(a);this.Fs=Q("div");Yh(this.a(),this.Fs);P(this.Fs,ux.CSS.bE);this.Ob=new sx("RIGHT");this.Ob.k(this.a());P(this.Ob.a(),ux.CSS.aE);this.W=new Vw;this.W.mw(!0);var b;b=b||F;b(this.W,"T",this.xK.bind(this));b(this.W,"U",this.yK.bind(this));b(this.W,"fa",this.rK.bind(this));b(this.W,"da",this.uK.bind(this));b(this.W,"ea",this.tK.bind(this));b(this.W,"ga",this.wK.bind(this));this.W.k(this.Ob.a());
this.Ob.nC("Project Browser",this.W);this.Ob.ki(this.Fs);a=this.Ob.P().ud("RIGHT");P(a,ux.CSS.cE);this.Ob.P().xk("RIGHT").eC(5);Yh(a,Q("div",{id:dw.ID_PREFIX+"_DraggerHandle_"+B(),"class":ux.CSS.dE}));this.xo=new Rw;F(this.Ob,"resize",this.TL.bind(this));F(this.Ob,"resize",this.o.bind(this));F(this.Ob,"resize_end",this.o.bind(this));this.Da=new xw;this.Da.qC(this.a());var c;c=c||F;c(this.Da,"Z",this.Gv.bind(this));c(this.Da,"$",this.Fv.bind(this));c(this.Da,"aa",this.sj.bind(this));F(this.Da,"Y",
this.KK.bind(this));Ex(this)};function Ex(a){a.aa=vx();C(a.aa,function(a){Yh(this.a(),a)}.bind(a));Fx(a);a.aa.gl.innerHTML="<img src="+a.oj+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.aa.De.innerHTML="<img src="+a.oj+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.aa.Lg.innerHTML="<img src="+a.oj+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.aa.hf.innerHTML="<img src="+a.oj+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.Ux=function(){this.Mh=Q("div",{id:ux.ID_PREFIX+"_addSubjects_"+B(),"class":ux.CSS.Uw},"+ Load all subjects in project");this.Ob.Gq()[0].appendChild(this.Mh);rk(this.Mh,ux.CSS.Uw+"-hovered");var a=this.Ob.Gq()[0],b=bi(a)[0];T(a);T(b);T(this.Mh);b.style.height="calc(100% - 70px)";F(this.Mh,"click",this.BJ.bind(this))};f.BJ=function(){this.dispatchEvent({type:"g"});yk(this.Mh,150,function(){Gx(this);var a=this.Ob.Gq()[0];bi(a)[0].setAttribute("style","");this.W.Pc()}.bind(this))};
function Gx(a){null!=a.Mh&&(R(a.Mh),I(a.Mh),delete a.Mh)}f.TL=function(){var a=this.xo;a.Ml.ja[a.Bq()]&&this.Ob.P().xk("RIGHT").HC()};f.KK=function(){var a=Mh("xiv-ui-thumbnailgallery-thumbnail-dragging");D(a,function(a){R(a)});this.lj();window.console.log(this.W.zg.yq());null!=this.W.zg.yq()&&this.W.Gf.bj({mP:!0})};f.HJ=function(){this.cd===ux.ModalStates.De&&Yw()};
f.PJ=function(){var a=this.a();a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();this.cd===ux.ModalStates.hf?this.uc(ux.ModalStates.Bs):this.uc(ux.ModalStates.De);this.o()};f.NK=function(){Yw();this.uc(this.Mr)};function Fx(a){var b;b=b||F;b(a.aa.De,"click",a.PJ.bind(a));b(a.aa.Lg,"click",a.NK.bind(a));b(a.aa.gl,"click",a.HJ.bind(a))}
f.xK=function(a){this.Da.Ls(a.wi.Mf,function(a){a.Cu()})};f.yK=function(a){this.Da.Ls(a.wi.Mf,function(a){a.lm||a.Em()})};f.tK=function(a){this.Da.Iq(a.Aw).Em()};f.uK=function(a){this.Da.Iq(a.Aw).Cu()};f.rK=function(a){this.Da.Ms()||a.wi.vB(300,function(){this.Da.Iz().load(a.wi.Mf);this.lj()}.bind(this))};f.wK=function(a){var b=this.Da.Iq(a.UL);this.Da.Ms()?b.Em():(b.load(a.wi.Mf),this.lj())};f.Gv=function(){this.lj()};f.Fv=function(){this.lj()};
f.sj=function(a){null!=a&&null!=a.mF?(a.fB&&D(a.fB,function(a){pk(a.a(),{opacity:0})}),this.vy()):this.o();this.W.Jy();this.W.gy(this.Da.dA())};f.f=function(){ux.d.f.call(this);sb(this.ya);delete this.ya;this.Wt(this.Kd);delete this.Kd;this.nq(this.Yc);delete this.Yc;this.oq(this.aa);delete this.aa;null!=this.Da&&(I(this.Da),this.Da.g(),delete this.Da);I(this.Ob);this.Ob.g();delete this.Ob;I(this.W);this.W.g();delete this.W;Gx(this);null!=this.xo&&(this.xo.g(),delete this.xo);delete this.cd;delete this.Mr};
v("xiv.ui.Modal.EventType",ux.IM);v("xiv.ui.Modal.ID_PREFIX",ux.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",ux.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",ux.prototype.WH);v("xiv.ui.Modal.prototype.getThumbnailGallery",ux.prototype.NH);v("xiv.ui.Modal.prototype.getProjectTab",ux.prototype.xH);v("xiv.ui.Modal.prototype.getPopupButton",ux.prototype.uH);v("xiv.ui.Modal.prototype.getCloseButton",ux.prototype.qG);v("xiv.ui.Modal.prototype.getFullScreenButton",ux.prototype.LG);
v("xiv.ui.Modal.prototype.render",ux.prototype.k);v("xiv.ui.Modal.prototype.setState",ux.prototype.uc);v("xiv.ui.Modal.prototype.getState",ux.prototype.Zl);v("xiv.ui.Modal.prototype.highlightInUseThumbnails",ux.prototype.lj);v("xiv.ui.Modal.prototype.animateModal",ux.prototype.vy);v("xiv.ui.Modal.prototype.updateStyle",ux.prototype.o);v("xiv.ui.Modal.prototype.initSubComponents",ux.prototype.BA);v("xiv.ui.Modal.prototype.addAddSubjectsToProjectTab",ux.prototype.Ux);
v("xiv.ui.Modal.prototype.disposeInternal",ux.prototype.f);window["xiv.ui.Modal"]=ux;window["xiv.ui.Modal.ModalStates"]=ux.ModalStates;
//# sourceMappingURL=./xiv-min.js.map