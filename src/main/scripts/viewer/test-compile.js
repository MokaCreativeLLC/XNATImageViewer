var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.Ef=function(){return a.LF?a.LF:a.LF=new a}}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return"array"==ha(a)}function ja(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ka(a){return"string"==typeof a}function la(a){return"boolean"==typeof a}function ma(a){return"number"==typeof a}function na(a){return"function"==ha(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function pa(a){return a[qa]||(a[qa]=++sa)}
var qa="closure_uid_"+(1E9*Math.random()>>>0),sa=0;function ta(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function wa(a,b,c){wa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ta:va;return wa.apply(null,arguments)}function xa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function h(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function m(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.aW=function(a,c,g){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var n=n||{};n.nT=!0;n.pf=function(a){eval("X.DEV === undefined")||window.console.time(a)};n.Pe=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.uK=0;this.ES=function(){return this.uK++}};function za(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.HI;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),g=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+g)},g);a=c+g;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),g=new Uint8Array(d),k=a,l=0;k<c;++k,++l)g[l]=e[k];return d});h("$",Aa);
h("Function.prototype.bind",Function.prototype.bind);h("window.requestAnimationFrame",window.requestAnimationFrame);h("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba={},Ca;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}m(Da,Error);Da.prototype.name="CustomError";var Fa={};function Ga(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ha(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Ia(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ja(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ka(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var La=/(\.\d+)|(\d+)|(\D+)/g;function Na(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(La),d=b.toLowerCase().match(La),e=Math.min(c.length,d.length),g=0;g<e;g++){var k=c[g],l=d[g];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function Oa(a){if(!Pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ra,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Sa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ta,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ua,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Va,"&#0;"));return a}var Qa=/&/g,Ra=/</g,Sa=/>/g,Ta=/"/g,Ua=/'/g,Va=/\x00/g,Pa=/[\x00&<>"']/;
function Wa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Xa(a){return Array.prototype.join.call(arguments,"")}
function Ya(a,b){for(var c=0,d=Ka(String(a)).split("."),e=Ka(String(b)).split("."),g=Math.max(d.length,e.length),k=0;0==c&&k<g;k++){var l=d[k]||"",q=e[k]||"",p=/(\d*)(\D*)/g,s=/(\d*)(\D*)/g;do{var r=p.exec(l)||["","",""],u=s.exec(q)||["","",""];if(0==r[0].length&&0==u[0].length)break;c=$a(0==r[1].length?0:parseInt(r[1],10),0==u[1].length?0:parseInt(u[1],10))||$a(0==r[2].length,0==u[2].length)||$a(r[2],u[2])}while(0==c)}return c}function $a(a,b){return a<b?-1:a>b?1:0}
var ab=2147483648*Math.random()|0;function t(){return"goog_"+ab++}function bb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function cb(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function db(a){var b=ka(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function fb(a,b){b.unshift(a);Da.call(this,Ia.apply(null,b));b.shift()}m(fb,Da);fb.prototype.name="AssertionError";function gb(a,b){throw new fb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var hb="closure_listenable_"+(1E6*Math.random()|0);function ib(a){return!(!a||!a[hb])}var jb=0;function kb(a,b,c,d,e){this.bn=a;this.bv=null;this.src=b;this.type=c;this.qq=!!d;this.gu=e;this.key=++jb;this.ip=this.xt=!1}function lb(a){a.ip=!0;a.bn=null;a.bv=null;a.src=null;a.gu=null};function w(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function mb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function nb(a){var b=0,c;for(c in a)b++;return b}function ob(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function pb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function qb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function rb(){var a=tb,b;for(b in a)return!1;return!0}function ub(a){for(var b in a)delete a[b]}function vb(a,b){b in a&&delete a[b]}
function wb(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function xb(a){var b={},c;for(c in a)b[c]=a[c];return b}var yb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ab(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<yb.length;g++)c=yb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function Bb(a){var b=arguments.length;if(1==b&&ia(arguments[0]))return Bb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var Cb=Array.prototype,Db=Cb.indexOf?function(a,b,c){return Cb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ka(a))return ka(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},A=Cb.forEach?function(a,b,c){Cb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},Eb=Cb.filter?function(a,b,c){return Cb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],
g=0,k=ka(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var q=k[l];b.call(c,q,l,a)&&(e[g++]=q)}return e},Gb=Cb.map?function(a,b,c){return Cb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=ka(a)?a.split(""):a,k=0;k<d;k++)k in g&&(e[k]=b.call(c,g[k],k,a));return e},Hb=Cb.some?function(a,b,c){return Cb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1},Ib=Cb.every?function(a,b,c){return Cb.every.call(a,b,
c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return!1;return!0};function Jb(a){var b;a:{b=Kb;for(var c=a.length,d=ka(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:ka(a)?a.charAt(b):a[b]}function Lb(a,b){return 0<=Db(a,b)}function Mb(a){if(!ia(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Nb(a,b){Lb(a,b)||a.push(b)}
function Ob(a,b){var c=Db(a,b),d;(d=0<=c)&&Cb.splice.call(a,c,1);return d}function Pb(a){return Cb.concat.apply(Cb,arguments)}function Qb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Sb(a,b,c,d){Cb.splice.apply(a,Tb(arguments,1))}function Tb(a,b,c){return 2>=arguments.length?Cb.slice.call(a,b):Cb.slice.call(a,b,c)};function Ub(a){this.src=a;this.Pd={};this.ns=0}f=Ub.prototype;f.add=function(a,b,c,d,e){var g=a.toString();a=this.Pd[g];a||(a=this.Pd[g]=[],this.ns++);var k=Vb(a,b,d,e);-1<k?(b=a[k],c||(b.xt=!1)):(b=new kb(b,this.src,g,!!d,e),b.xt=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Pd))return!1;var e=this.Pd[a];b=Vb(e,b,c,d);return-1<b?(lb(e[b]),Cb.splice.call(e,b,1),0==e.length&&(delete this.Pd[a],this.ns--),!0):!1};
function Wb(a,b){var c=b.type;if(!(c in a.Pd))return!1;var d=Ob(a.Pd[c],b);d&&(lb(b),0==a.Pd[c].length&&(delete a.Pd[c],a.ns--));return d}f.eh=function(a){a=a&&a.toString();var b=0,c;for(c in this.Pd)if(!a||c==a){for(var d=this.Pd[c],e=0;e<d.length;e++)++b,lb(d[e]);delete this.Pd[c];this.ns--}return b};f.Pq=function(a,b,c,d){a=this.Pd[a.toString()];var e=-1;a&&(e=Vb(a,b,c,d));return-1<e?a[e]:null};
f.hu=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return mb(this.Pd,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].qq!=b))return!0;return!1})};function Vb(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e];if(!g.ip&&g.bn==b&&g.qq==!!c&&g.gu==d)return e}return-1};var Xb;a:{var Yb=ba.navigator;if(Yb){var Zb=Yb.userAgent;if(Zb){Xb=Zb;break a}}Xb=""}function $b(a){return-1!=Xb.indexOf(a)}function ac(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function bc(){return $b("Opera")||$b("OPR")}function cc(){return $b("Trident")||$b("MSIE")}function dc(){return $b("Safari")&&!$b("Chrome")&&!$b("CriOS")&&!$b("Android")}
function ec(){var a=Xb;if(cc()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(bc())return a=ac(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=ac(a);return a[2]&&a[2][1]?a[2][1]:""};var fc,gc,hc;function ic(){return ba.navigator||null}var jc=bc(),kc=cc(),lc=$b("Gecko")&&-1==Xb.toLowerCase().indexOf("webkit")&&!($b("Trident")||$b("MSIE")),mc=-1!=Xb.toLowerCase().indexOf("webkit"),nc,oc=ic();nc=oc&&oc.platform||"";fc=-1!=nc.indexOf("Mac");gc=-1!=nc.indexOf("Win");hc=-1!=nc.indexOf("Linux");var pc=!!ic()&&-1!=(ic().appVersion||"").indexOf("X11");function qc(){var a=ba.document;return a?a.documentMode:void 0}
var rc=function(){var a="",b;if(jc&&ba.opera)return a=ba.opera.version,na(a)?a():a;lc?b=/rv\:([^\);]+)(\)|;)/:kc?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:mc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Xb))?a[1]:"");return kc&&(b=qc(),b>parseFloat(a))?String(b):a}(),sc={};function uc(a){return sc[a]||(sc[a]=0<=Ya(rc,a))}function vc(a){return kc&&wc>=a}var xc=ba.document,wc=xc&&kc?qc()||("CSS1Compat"==xc.compatMode?parseInt(rc,10):5):void 0;var yc=!kc||vc(9),zc=!kc||vc(9),Ac=kc&&!uc("9");!mc||uc("528");lc&&uc("1.9b")||kc&&uc("8")||jc&&uc("9.5")||mc&&uc("528");lc&&!uc("8")||kc&&uc("9");function Bc(){0!=Cc&&(Dc[pa(this)]=this)}var Cc=0,Dc={};Bc.prototype.Gm=!1;Bc.prototype.i=function(){if(!this.Gm&&(this.Gm=!0,this.g(),0!=Cc)){var a=pa(this);delete Dc[a]}};function Ec(a,b){a.yr||(a.yr=[]);a.yr.push(ca(void 0)?wa(b,void 0):b)}Bc.prototype.g=function(){if(this.yr)for(;this.yr.length;)this.yr.shift()()};function Fc(a){a&&"function"==typeof a.i&&a.i()}function Gc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?Gc.apply(null,d):Fc(d)}};function Hc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.bi=!1;this.Gr=!0}Hc.prototype.g=function(){};Hc.prototype.i=function(){};Hc.prototype.stopPropagation=function(){this.bi=!0};Hc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Gr=!1};function Ic(a){a.preventDefault()};function Jc(a){Jc[" "](a);return a}Jc[" "]=ea;function Kc(a,b){Hc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Kz=!1;this.Nd=null;a&&this.Ja(a,b)}m(Kc,Hc);var Lc=[1,4,2];f=Kc.prototype;
f.Ja=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(lc){var e;a:{try{Jc(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=mc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=mc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Kz=fc?a.metaKey:a.ctrlKey;this.state=a.state;this.Nd=a;a.defaultPrevented&&this.preventDefault()};function Mc(a){return(yc?0==a.Nd.button:"click"==a.type?!0:!!(a.Nd.button&Lc[0]))&&!(mc&&fc&&a.ctrlKey)}
f.stopPropagation=function(){Kc.d.stopPropagation.call(this);this.Nd.stopPropagation?this.Nd.stopPropagation():this.Nd.cancelBubble=!0};f.preventDefault=function(){Kc.d.preventDefault.call(this);var a=this.Nd;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ac)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.zM=function(){return this.Nd};f.g=function(){};var Nc="closure_lm_"+(1E6*Math.random()|0),Oc={},Pc=0;function C(a,b,c,d,e){if(ia(b)){for(var g=0;g<b.length;g++)C(a,b[g],c,d,e);return null}c=Qc(c);return ib(a)?a.F(b,c,d,e):Rc(a,b,c,!1,d,e)}function Rc(a,b,c,d,e,g){if(!b)throw Error("Invalid event type");var k=!!e,l=Tc(a);l||(a[Nc]=l=new Ub(a));c=l.add(b,c,d,e,g);if(c.bv)return c;d=Uc();c.bv=d;d.src=a;d.bn=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Vc(b.toString()),d);Pc++;return c}
function Uc(){var a=Wc,b=zc?function(c){return a.call(b.src,b.bn,c)}:function(c){c=a.call(b.src,b.bn,c);if(!c)return c};return b}function Xc(a,b,c,d,e){if(ia(b)){for(var g=0;g<b.length;g++)Xc(a,b[g],c,d,e);return null}c=Qc(c);return ib(a)?a.Fy(b,c,d,e):Rc(a,b,c,!0,d,e)}function Yc(a,b,c,d,e){if(ia(b))for(var g=0;g<b.length;g++)Yc(a,b[g],c,d,e);else c=Qc(c),ib(a)?a.Ub(b,c,d,e):a&&(a=Tc(a))&&(b=a.Pq(b,c,!!d,e))&&Zc(b)}
function Zc(a){if(ma(a)||!a||a.ip)return!1;var b=a.src;if(ib(b))return Wb(b.Mg,a);var c=a.type,d=a.bv;b.removeEventListener?b.removeEventListener(c,d,a.qq):b.detachEvent&&b.detachEvent(Vc(c),d);Pc--;(c=Tc(b))?(Wb(c,a),0==c.ns&&(c.src=null,b[Nc]=null)):lb(a);return!0}function $c(a){if(a)if(ib(a))a.Mg&&a.Mg.eh(void 0);else if(a=Tc(a)){var b=0,c;for(c in a.Pd)for(var d=a.Pd[c].concat(),e=0;e<d.length;++e)Zc(d[e])&&++b}}
function ad(a,b){if(ib(a))return a.hu(b,void 0);var c=Tc(a);return!!c&&c.hu(b,void 0)}function Vc(a){return a in Oc?Oc[a]:Oc[a]="on"+a}function bd(a,b,c,d){var e=1;if(a=Tc(a))if(b=a.Pd[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var g=b[a];g&&g.qq==c&&!g.ip&&(e&=!1!==cd(g,d))}return Boolean(e)}function cd(a,b){var c=a.bn,d=a.gu||a.src;a.xt&&Zc(a);return c.call(d,b)}
function Wc(a,b){if(a.ip)return!0;if(!zc){var c=b||da("window.event"),d=new Kc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var g=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){g=!0}if(g||void 0==c.returnValue)c.returnValue=!0}c=[];for(g=d.currentTarget;g;g=g.parentNode)c.push(g);for(var g=a.type,l=c.length-1;!d.bi&&0<=l;l--)d.currentTarget=c[l],e&=bd(c[l],g,!0,d);for(l=0;!d.bi&&l<c.length;l++)d.currentTarget=c[l],e&=bd(c[l],g,!1,d)}return e}return cd(a,new Kc(b,this))}
function Tc(a){a=a[Nc];return a instanceof Ub?a:null}var dd="__closure_events_fn_"+(1E9*Math.random()>>>0);function Qc(a){return na(a)?a:a[dd]||(a[dd]=function(b){return a.handleEvent(b)})};function ed(){Bc.call(this);this.Mg=new Ub(this);this.IK=this;this.Yu=null}m(ed,Bc);ed.prototype[hb]=!0;f=ed.prototype;f.aA=function(a){this.Yu=a};f.addEventListener=function(a,b,c,d){C(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Yc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Yu;if(c)for(b=[];c;c=c.Yu)b.push(c);var c=this.IK,d=a.type||a;if(ka(a))a=new Hc(a,c);else if(a instanceof Hc)a.target=a.target||c;else{var e=a;a=new Hc(d,c);Ab(a,e)}var e=!0,g;if(b)for(var k=b.length-1;!a.bi&&0<=k;k--)g=a.currentTarget=b[k],e=fd(g,d,!0,a)&&e;a.bi||(g=a.currentTarget=c,e=fd(g,d,!0,a)&&e,a.bi||(e=fd(g,d,!1,a)&&e));if(b)for(k=0;!a.bi&&k<b.length;k++)g=a.currentTarget=b[k],e=fd(g,d,!1,a)&&e;return e};
f.g=function(){ed.d.g.call(this);this.Mg&&this.Mg.eh(void 0);this.Yu=null};f.F=function(a,b,c,d){return this.Mg.add(String(a),b,!1,c,d)};f.Fy=function(a,b,c,d){return this.Mg.add(String(a),b,!0,c,d)};f.Ub=function(a,b,c,d){return this.Mg.remove(String(a),b,c,d)};function fd(a,b,c,d){b=a.Mg.Pd[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,g=0;g<b.length;++g){var k=b[g];if(k&&!k.ip&&k.qq==c){var l=k.bn,q=k.gu||k.src;k.xt&&Wb(a.Mg,k);e=!1!==l.call(q,d)&&e}}return e&&!1!=d.Gr}
f.Pq=function(a,b,c,d){return this.Mg.Pq(String(a),b,c,d)};f.hu=function(a,b){return this.Mg.hu(ca(a)?String(a):void 0,b)};function gd(){ed.call(this);this.r="base";this.qe=window["X.counter"].ES();this.Q=!1}m(gd,ed);gd.prototype.__defineGetter__("classname",function(){return this.r});gd.prototype.__defineGetter__("id",function(){return this.qe});h("X.base",gd);function hd(a,b){gd.call(this);this.r="triplets";this.Bh=Infinity;this.yh=-Infinity;this.Ch=Infinity;this.zh=-Infinity;this.Dh=Infinity;this.Ah=-Infinity;this.Xs=[0,0,0];this.fb=0;this.Nc=new Float32Array(a);null!=b&&(this.Nc=b.Nc.subarray(0,b.Nc.length),this.fb=this.Nc.length,this.Bh=b.Bh,this.yh=b.yh,this.Ch=b.Ch,this.zh=b.zh,this.Dh=b.Dh,this.Ah=b.Ah,this.Xs=b.Xs.slice())}m(hd,gd);f=hd.prototype;
f.add=function(a,b,c){this.Bh=Math.min(this.Bh,a);this.yh=Math.max(this.yh,a);this.Ch=Math.min(this.Ch,b);this.zh=Math.max(this.zh,b);this.Dh=Math.min(this.Dh,c);this.Ah=Math.max(this.Ah,c);this.Xs=[(this.Bh+this.yh)/2,(this.Ch+this.zh)/2,(this.Dh+this.Ah)/2];this.Q=!0;this.Nc[this.fb++]=a;this.Nc[this.fb++]=b;this.Nc[this.fb++]=c;return this.fb/3};f.resize=function(){if(this.fb!=this.Nc.length){var a=new Float32Array(this.fb);a.set(this.Nc.subarray(0,this.fb));this.Nc=a}};
f.get=function(a){a*=3;return[this.Nc[a],this.Nc[a+1],this.Nc[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Nc=new Float32Array(this.Nc.length);this.Q=!0};hd.prototype.__defineGetter__("count",function(){this.resize();return this.Nc.length/3});hd.prototype.__defineGetter__("length",function(){this.resize();return this.Nc.length});h("X.triplets",hd);h("X.triplets.prototype.add",hd.prototype.add);h("X.triplets.prototype.resize",hd.prototype.resize);
h("X.triplets.prototype.get",hd.prototype.get);h("X.triplets.prototype.remove",hd.prototype.remove);h("X.triplets.prototype.clear",hd.prototype.clear);function id(){gd.call(this);this.r="indexer";this.Ew=[];this.sf={}}m(id,gd);id.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.sf||(this.sf[b]=this.Ew.length,this.Ew.push(a));return this.sf[b]};id.prototype.unique=function(){return this.Ew};function jd(a){gd.call(this);this.r="file";this.ht=a;this.Q=!0}m(jd,gd);function ld(){this.ti=this.va=null}ld.prototype.__defineSetter__("file",function(a){if(null==a||ia(a)&&0==a.length)this.va=null;else{if(ia(a)){if(1==a.length){this.va=new jd(a[0]);return}this.va=Gb(a,function(a){var c=new F;c.va=new jd(a);return c})}else this.va=new jd(a);this.ti=null}});ld.prototype.__defineGetter__("file",function(){return this.va?ia(this.va)?this.va.map(function(a){return a.va.ht}):this.va.ht:""});
ld.prototype.__defineGetter__("filedata",function(){return ia(this.va)?this.va.map(function(a){return a.ti}):this.ti});ld.prototype.__defineSetter__("filedata",function(a){if(null==a||ia(a)&&0==a.length)this.ti=null;if(ia(a))if(1==a.length)this.ti=a[0];else{var b=this.va.length,c;for(c=0;c<b;c++)this.va[c].ti=a[c]}else this.ti=a});function md(){return null};function nd(a,b,c){return Math.min(Math.max(a,b),c)};function od(a,b){this.gc={};this.Jb=[];this.Ej=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Hw(a)}f=od.prototype;f.Kj=function(){return this.Ej};f.Tm=function(){pd(this);for(var a=[],b=0;b<this.Jb.length;b++)a.push(this.gc[this.Jb[b]]);return a};f.Oq=function(){pd(this);return this.Jb.concat()};
f.kx=function(a){for(var b=0;b<this.Jb.length;b++){var c=this.Jb[b];if(qd(this.gc,c)&&this.gc[c]==a)return!0}return!1};f.Ao=function(a,b){if(this===a)return!0;if(this.Ej!=a.Kj())return!1;var c=b||rd;pd(this);for(var d,e=0;d=this.Jb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function rd(a,b){return a===b}f.er=function(){return 0==this.Ej};f.clear=function(){this.gc={};this.Ej=this.Jb.length=0};
f.remove=function(a){return qd(this.gc,a)?(delete this.gc[a],this.Ej--,this.Jb.length>2*this.Ej&&pd(this),!0):!1};function pd(a){if(a.Ej!=a.Jb.length){for(var b=0,c=0;b<a.Jb.length;){var d=a.Jb[b];qd(a.gc,d)&&(a.Jb[c++]=d);b++}a.Jb.length=c}if(a.Ej!=a.Jb.length){for(var e={},c=b=0;b<a.Jb.length;)d=a.Jb[b],qd(e,d)||(a.Jb[c++]=d,e[d]=1),b++;a.Jb.length=c}}f.get=function(a,b){return qd(this.gc,a)?this.gc[a]:b};f.set=function(a,b){qd(this.gc,a)||(this.Ej++,this.Jb.push(a));this.gc[a]=b};
f.Hw=function(a){var b;a instanceof od?(b=a.Oq(),a=a.Tm()):(b=pb(a),a=ob(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.Oq(),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};f.clone=function(){return new od(this)};f.CA=function(){for(var a=new od,b=0;b<this.Jb.length;b++){var c=this.Jb[b];a.set(this.gc[c],c)}return a};function qd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function sd(){gd.call(this);this.r="colortable";this.sf=new od;za(this,new ld)}m(sd,gd);sd.prototype.add=function(a,b,c,d,e,g){if(!(ma(a)&&ma(c)&&ma(d)&&ma(e)&&ma(g)))throw Error("Invalid color table entry.");this.sf.set(a,[b,c,d,e,g]);this.Q=!0};sd.prototype.get=function(a){return this.sf.get(a)};h("X.colortable.prototype.get",sd.prototype.get);function td(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}td.prototype.clone=function(){return new td(this.x,this.y,this.z)};td.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};td.prototype.xA=function(){return[this.x,this.y,this.z]};function ud(a,b,c){this.x=a;this.y=b;this.z=c}m(ud,td);f=ud.prototype;f.clone=function(){return new ud(this.x,this.y,this.z)};f.Xh=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.kc=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.Xh())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.zd=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.Ao=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function vd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function wd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function xd(a,b){return new ud(a.x+b.x,a.y+b.y,a.z+b.z)}function yd(a,b){return new ud(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};n.da=ud;f=n.da.prototype;f.clone=ud.prototype.clone;f.Xh=ud.prototype.Xh;f.scale=ud.prototype.scale;f.kc=ud.prototype.kc;f.add=ud.prototype.add;f.zd=ud.prototype.zd;f.normalize=function(){var a=this.Xh();return 0==a?this.scale(0):this.scale(1/a)};n.da.Xk=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};n.da.Em=yd;n.da.Dx=vd;n.da.Au=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new ud(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};n.da.prototype.__defineGetter__("xx",function(){return this.x});
n.da.prototype.__defineGetter__("yy",function(){return this.y});n.da.prototype.__defineGetter__("zz",function(){return this.z});h("X.vector",n.da);h("X.vector.prototype.clone",n.da.prototype.clone);h("X.vector.prototype.magnitude",n.da.prototype.Xh);h("X.vector.prototype.scale",n.da.prototype.scale);h("X.vector.prototype.invert",n.da.prototype.kc);h("X.vector.prototype.normalize",n.da.prototype.normalize);h("X.vector.prototype.add",n.da.prototype.add);h("X.vector.prototype.subtract",n.da.prototype.zd);
h("X.vector.dot",n.da.Xk);h("X.vector.cross",n.da.Em);h("X.vector.distance",n.da.Dx);h("X.vector.lerp",n.da.Au);function zd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}zd.prototype.BYTES_PER_ELEMENT=8;zd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};zd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{zd.BYTES_PER_ELEMENT=8}catch(Ad){}zd.prototype.BYTES_PER_ELEMENT=zd.prototype.BYTES_PER_ELEMENT;zd.prototype.set=zd.prototype.set;zd.prototype.toString=zd.prototype.toString;h("Float64Array",zd)};function Bd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Bd.prototype.BYTES_PER_ELEMENT=4;Bd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Bd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(Bd.BYTES_PER_ELEMENT=4,Bd.prototype.BYTES_PER_ELEMENT=Bd.prototype.BYTES_PER_ELEMENT,Bd.prototype.set=Bd.prototype.set,Bd.prototype.toString=Bd.prototype.toString,h("Float32Array",Bd));function Cd(){return new Float32Array(3)}function Dd(a,b,c){var d=Cd();d[0]=a;d[1]=b;d[2]=c;return d}function Ed(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function Fd(){return new Float32Array(4)}function Gd(a,b,c,d){var e=Fd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Hd(){return new Float32Array(16)}function Id(){var a=Hd();a[0]=a[5]=a[10]=a[15]=1;return a}function Jd(a,b,c,d,e,g,k,l,q,p,s,r,u,v,D,B,I){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=g;a[5]=k;a[6]=l;a[7]=q;a[8]=p;a[9]=s;a[10]=r;a[11]=u;a[12]=v;a[13]=D;a[14]=B;a[15]=I;return a}function Kd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Ld(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function Md(a,b,c,d,e,g){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=g}
function Nd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Od(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Pd(a,b,c){var d=a[0],e=a[1],g=a[2],k=a[3],l=a[4],q=a[5],p=a[6],s=a[7],r=a[8],u=a[9],v=a[10],D=a[11],B=a[12],I=a[13],G=a[14];a=a[15];var Q=b[0],M=b[1],L=b[2],J=b[3],H=b[4],O=b[5],N=b[6],Y=b[7],K=b[8],y=b[9],z=b[10],ga=b[11],Z=b[12],E=b[13],W=b[14];b=b[15];c[0]=d*Q+l*M+r*L+B*J;c[1]=e*Q+q*M+u*L+I*J;c[2]=g*Q+p*M+v*L+G*J;c[3]=k*Q+s*M+D*L+a*J;c[4]=d*H+l*O+r*N+B*Y;c[5]=e*H+q*O+u*N+I*Y;c[6]=g*H+p*O+v*N+G*Y;c[7]=k*H+s*O+D*N+a*Y;c[8]=d*K+l*y+r*z+B*ga;c[9]=e*K+q*y+u*z+I*ga;c[10]=g*K+p*y+v*z+G*ga;c[11]=
k*K+s*y+D*z+a*ga;c[12]=d*Z+l*E+r*W+B*b;c[13]=e*Z+q*E+u*W+I*b;c[14]=g*Z+p*E+v*W+G*b;c[15]=k*Z+s*E+D*W+a*b;return c}
function Qd(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],k=a[4],l=a[5],q=a[6],p=a[7],s=a[8],r=a[9],u=a[10],v=a[11],D=a[12],B=a[13],I=a[14],G=a[15],Q=c*l-d*k,M=c*q-e*k,L=c*p-g*k,J=d*q-e*l,H=d*p-g*l,O=e*p-g*q,N=s*B-r*D,Y=s*I-u*D,K=s*G-v*D,y=r*I-u*B,z=r*G-v*B,ga=u*G-v*I,Z=Q*ga-M*z+L*y+J*K-H*Y+O*N;if(0==Z)return!1;Z=1/Z;b[0]=(l*ga-q*z+p*y)*Z;b[1]=(-d*ga+e*z-g*y)*Z;b[2]=(B*O-I*H+G*J)*Z;b[3]=(-r*O+u*H-v*J)*Z;b[4]=(-k*ga+q*K-p*Y)*Z;b[5]=(c*ga-e*K+g*Y)*Z;b[6]=(-D*O+I*L-G*M)*Z;b[7]=(s*O-u*L+v*M)*Z;b[8]=(k*z-l*K+p*
N)*Z;b[9]=(-c*z+d*K-g*N)*Z;b[10]=(D*H-B*L+G*Q)*Z;b[11]=(-s*H+r*L-v*Q)*Z;b[12]=(-k*y+l*Y-q*N)*Z;b[13]=(c*y-d*Y+e*N)*Z;b[14]=(-D*J+B*M-I*Q)*Z;b[15]=(s*J-r*M+u*Q)*Z;return!0}function Rd(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Sd(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+g*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+g*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+g*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+g*a[11]+b*a[15];return c}function Td(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],g=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=g;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);n.w={};n.w.dG=function(a,b,c,d){c=c.zd(b);c.normalize();d=n.da.Em(c,d);d.normalize();var e=n.da.Em(d,c);e.normalize();c.kc();Md(a,0,d.x,d.y,d.z,0);Md(a,1,e.x,e.y,e.z,0);Md(a,2,c.x,c.y,c.z,0);Td(a,-b.x,-b.y,-b.z);return a};n.w.Ec=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new n.da((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
n.w.tS=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Od(a,b,d);Od(a,c,e);Nd(a,b,e);Nd(a,c,d);return a};n.w.sS=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Ld(a,b,d);Ld(a,c,e);Kd(a,b,e);Kd(a,c,d);return a};n.w.Yq=Id;n.w.clone=function(a){var b=Hd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
n.w.CA=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],g=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=g;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
n.w.LL=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],k=a[5],l=a[6],q=a[7],p=a[8],s=a[9],r=a[10],u=a[11],v=a[12],D=a[13],B=a[14];a=a[15];return(b*k-c*g)*(r*a-u*B)-(b*l-d*g)*(s*a-u*D)+(b*q-e*g)*(s*B-r*D)+(c*l-d*k)*(p*a-u*v)-(c*q-e*k)*(p*B-r*v)+(d*q-e*l)*(p*D-s*v)};n.w.kc=Qd;n.w.My=function(a,b,c,d,e){var g=b/2;b=e-d;var k=Math.sin(g);if(0==b||0==k||0==c)return a;g=Math.cos(g)/k;return Jd(a,g/c,0,0,0,0,g,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
n.w.iP=function(a,b,c,d,e,g,k){return Jd(a,2*g/(c-b),0,0,0,0,2*g/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+g)/(k-g),-1,0,0,-(2*k*g)/(k-g),0)};n.w.jP=function(a,b,c,d,e,g,k){return Jd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-g),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+g)/(k-g),1)};n.w.multiply=Pd;n.w.oG=Sd;n.w.translate=Td;n.w.scale=function(a,b,c,d){return Jd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
n.w.rotate=function(a,b,c,d,e){var g=a[0],k=a[1],l=a[2],q=a[3],p=a[4],s=a[5],r=a[6],u=a[7],v=a[8],D=a[9],B=a[10],I=a[11],G=Math.cos(b),Q=Math.sin(b),M=1-G;b=c*c*M+G;var L=c*d*M+e*Q,J=c*e*M-d*Q,H=c*d*M-e*Q,O=d*d*M+G,N=d*e*M+c*Q,Y=c*e*M+d*Q;c=d*e*M-c*Q;e=e*e*M+G;return Jd(a,g*b+p*L+v*J,k*b+s*L+D*J,l*b+r*L+B*J,q*b+u*L+I*J,g*H+p*O+v*N,k*H+s*O+D*N,l*H+r*O+B*N,q*H+u*O+I*N,g*Y+p*c+v*e,k*Y+s*c+D*e,l*Y+r*c+B*e,q*Y+u*c+I*e,a[12],a[13],a[14],a[15])};
n.w.fv=function(a,b){var c=a[4],d=a[5],e=a[6],g=a[7],k=a[8],l=a[9],q=a[10],p=a[11],s=Math.cos(b),r=Math.sin(b);a[4]=c*s+k*r;a[5]=d*s+l*r;a[6]=e*s+q*r;a[7]=g*s+p*r;a[8]=c*-r+k*s;a[9]=d*-r+l*s;a[10]=e*-r+q*s;a[11]=g*-r+p*s;return a};n.w.gv=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],k=a[8],l=a[9],q=a[10],p=a[11],s=Math.cos(b),r=Math.sin(b);a[0]=c*s+k*-r;a[1]=d*s+l*-r;a[2]=e*s+q*-r;a[3]=g*s+p*-r;a[8]=c*r+k*s;a[9]=d*r+l*s;a[10]=e*r+q*s;a[11]=g*r+p*s;return a};
n.w.hv=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],k=a[4],l=a[5],q=a[6],p=a[7],s=Math.cos(b),r=Math.sin(b);a[0]=c*s+k*r;a[1]=d*s+l*r;a[2]=e*s+q*r;a[3]=g*s+p*r;a[4]=c*-r+k*s;a[5]=d*-r+l*s;a[6]=e*-r+q*s;a[7]=g*-r+p*s;return a};h("X.matrix.identity",n.w.Yq);h("X.matrix.clone",n.w.clone);h("X.matrix.transpose",n.w.CA);h("X.matrix.determinant",n.w.LL);h("X.matrix.invert",n.w.kc);h("X.matrix.multiply",n.w.multiply);h("X.matrix.multiplyByVector",n.w.Ec);h("X.matrix.multiplyByVec4",n.w.oG);
h("X.matrix.makePerspective",n.w.My);h("X.matrix.makeFrustum",n.w.iP);h("X.matrix.makeOrtho",n.w.jP);h("X.matrix.makeLookAt",n.w.dG);h("X.matrix.translate",n.w.translate);h("X.matrix.scale",n.w.scale);h("X.matrix.rotate",n.w.rotate);h("X.matrix.rotateX",n.w.fv);h("X.matrix.rotateY",n.w.gv);h("X.matrix.rotateZ",n.w.hv);h("X.matrix.swapRows",n.w.tS);h("X.matrix.swapCols",n.w.sS);function Ud(){gd.call(this);this.r="transform";this.dc=n.w.Yq()}m(Ud,gd);Ud.prototype.__defineGetter__("matrix",function(){return this.dc});Ud.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.dc=a;this.ua()});f=Ud.prototype;f.fv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.w.fv(this.dc,a*Math.PI/180);this.ua()};
f.gv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.w.gv(this.dc,a*Math.PI/180);this.ua()};f.hv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.w.hv(this.dc,a*Math.PI/180);this.ua()};f.mI=function(a){if(!ma(a))throw Error("Invalid distance.");n.w.translate(this.dc,a,0,0);this.ua()};f.nI=function(a){if(!ma(a))throw Error("Invalid distance.");n.w.translate(this.dc,0,a,0);this.ua()};
f.oI=function(a){if(!ma(a))throw Error("Invalid distance.");n.w.translate(this.dc,0,0,a);this.ua()};function Vd(a,b,c){a.dc[b+4*c]*=-1;a.ua()}f.pM=function(){Vd(this,0,0)};f.qM=function(){Vd(this,1,1)};f.rM=function(){Vd(this,2,2)};f.ua=function(){this.Q=!0};h("X.transform",Ud);h("X.transform.prototype.rotateX",Ud.prototype.fv);h("X.transform.prototype.rotateY",Ud.prototype.gv);h("X.transform.prototype.rotateZ",Ud.prototype.hv);h("X.transform.prototype.translateX",Ud.prototype.mI);
h("X.transform.prototype.translateY",Ud.prototype.nI);h("X.transform.prototype.translateZ",Ud.prototype.oI);h("X.transform.prototype.flipX",Ud.prototype.pM);h("X.transform.prototype.flipY",Ud.prototype.qM);h("X.transform.prototype.flipZ",Ud.prototype.rM);h("X.transform.prototype.modified",Ud.prototype.ua);function Wd(){gd.call(this);this.r="texture";this.Gk=this.xh=this.va=null;this.yw=this.zw=0;this.TB=!1;za(this,new ld)}m(Wd,gd);Wd.prototype.__defineSetter__("rawData",function(a){this.Gk=a;this.Q=!0});Wd.prototype.__defineSetter__("rawDataHeight",function(a){this.yw=a;this.Q=!0});Wd.prototype.__defineSetter__("rawDataWidth",function(a){this.zw=a;this.Q=!0});Wd.prototype.__defineSetter__("grayscale",function(a){this.TB=a;this.Q=!0});h("X.texture",Wd);function Xd(){this.Xe=Yd;this.bd=new Ud;this.$a=[1,1,1];this.jo=this.rb=this.Jd=this.ra=this.G=null;this.co=[];this.Rb=!0;this.bo=this.$p=1;this.Un=null;this.Qp=!1;this.Wd=1;this.pe=0;this.Zp=!0}var Yd="TRIANGLES";Xd.prototype.__defineSetter__("type",function(a){return this.Xe=a});Xd.prototype.__defineGetter__("type",function(){return this.Xe});Xd.prototype.__defineGetter__("texture",function(){this.rb||(this.rb=new Wd);return this.rb});Xd.prototype.__defineGetter__("transform",function(){return this.bd});
Xd.prototype.__defineGetter__("points",function(){return this.G});Xd.prototype.__defineSetter__("points",function(a){this.G=a});Xd.prototype.__defineGetter__("normals",function(){return this.ra});Xd.prototype.__defineSetter__("normals",function(a){this.ra=a});Xd.prototype.__defineGetter__("colors",function(){return this.Jd});Xd.prototype.__defineSetter__("colors",function(a){this.Jd=a});Xd.prototype.__defineGetter__("color",function(){return this.$a});
Xd.prototype.__defineSetter__("color",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.k,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.$a=a;this.Q=!0});Xd.prototype.__defineGetter__("opacity",function(){return this.Wd});Xd.prototype.__defineSetter__("opacity",function(a){if(!ma(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.k,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.Wd=a;this.Q=!0});Xd.prototype.__defineGetter__("caption",function(){return this.Un});
Xd.prototype.__defineSetter__("caption",function(a){this.Un=a;this.Q=!0});Xd.prototype.__defineGetter__("visible",function(){return this.Rb});Xd.prototype.__defineSetter__("visible",function(a){for(var b=this.k,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.Rb=a;this.Q=!0});Xd.prototype.__defineGetter__("pointsize",function(){return this.$p});Xd.prototype.__defineSetter__("pointsize",function(a){if(!ma(a))throw Error("Invalid point size.");this.$p=a;this.Q=!0});
Xd.prototype.__defineGetter__("magicmode",function(){return this.Qp});Xd.prototype.__defineSetter__("magicmode",function(a){if(!la(a))throw Error("Invalid magic mode setting.");this.Qp=a;this.Q=!0});Xd.prototype.__defineGetter__("linewidth",function(){return this.bo});Xd.prototype.__defineSetter__("linewidth",function(a){if(!ma(a))throw Error("Invalid line width.");this.bo=a;this.Q=!0});Xd.prototype.__defineGetter__("pickable",function(){return this.Zp});
Xd.prototype.__defineSetter__("pickable",function(a){if(!la(a))throw Error("Invalid pickable setting.");this.Zp=a;this.Q=!0});Xd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.jo});Xd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Zd(){this.tf=Infinity;this.cc=this.Mc=-Infinity;this.ec=Infinity;this.Ck=[0,0,0];this.Ak=[1,1,1]}Zd.prototype.__defineGetter__("lowerThreshold",function(){return this.cc});Zd.prototype.__defineSetter__("lowerThreshold",function(a){this.cc=a});Zd.prototype.__defineGetter__("upperThreshold",function(){return this.ec});Zd.prototype.__defineSetter__("upperThreshold",function(a){this.ec=a});Zd.prototype.__defineGetter__("min",function(){return this.tf});Zd.prototype.__defineGetter__("max",function(){return this.Mc});
Zd.prototype.__defineGetter__("minColor",function(){return this.Ck});Zd.prototype.__defineSetter__("minColor",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid min. color.");this.Ck=a});Zd.prototype.__defineGetter__("maxColor",function(){return this.Ak});Zd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid max. color.");this.Ak=a});function $d(){gd.call(this);this.r="scalars";this.Np=this.Bb=null;this.fC=!0;this.nw=0;za(this,new ld);za(this,new Zd);this.Ck=[0,1,0];this.Ak=[1,0,0]}m($d,gd);$d.prototype.__defineGetter__("array",function(){return this.Bb});$d.prototype.__defineSetter__("array",function(a){this.Np=this.Bb=a;this.Q=!0});$d.prototype.__defineGetter__("interpolation",function(){return this.nw});$d.prototype.__defineSetter__("interpolation",function(a){this.nw=a});h("X.scalars",$d);function ae(a){gd.call(this);this.r="object";this.k=[];this.Cb=this.Te=null;za(this,new Xd);null!=a&&this.Bm(a)}m(ae,gd);
ae.prototype.Bm=function(a){this.Xe=a.Xe;this.bd=new Ud;this.bd.dc=new Float32Array(a.bd.dc);this.$a=a.$a.slice();a.G&&(this.G=new hd(a.G.length,a.G));a.ra&&(this.ra=new hd(a.ra.length,a.ra));a.Jd&&(this.Jd=new hd(a.Jd.length,a.Jd));this.rb=a.rb;this.jo=a.jo;a.va&&(this.va=new jd((new String(a.va.ht)).toString()));this.Wd=a.Wd;this.k.length=0;var b=a.k;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.k.push(new n[b[d].r](b[d]));this.Rb=a.Rb;this.$p=a.$p;this.bo=a.bo;a.Un&&(this.Un=(new String(a.Un)).toString());
this.Qp=a.Qp;this.Zp=a.Zp;this.co=a.co.slice();this.Q=!0};ae.prototype.__defineGetter__("colortable",function(){this.Te||(this.Te=new sd);return this.Te});ae.prototype.__defineGetter__("scalars",function(){this.Cb||(this.Cb=new $d);return this.Cb});ae.prototype.__defineGetter__("children",function(){return this.k});ae.prototype.ua=function(){var a=new be;a.gb=this;this.dispatchEvent(a)};ae.prototype.remove=function(){var a=new ce;a.gb=this;this.dispatchEvent(a)};
function de(a,b){if(!(null!=a&&null!=b&&a instanceof ae&&b instanceof ae))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.Wd?-1:1==b.Wd?1:null!=a.pe&&null!=b.pe&&a.pe>b.pe?-1:1}h("X.object",ae);h("X.object.prototype.modified",ae.prototype.ua);h("X.object.prototype.remove",ae.prototype.remove);function fe(a){Hc.call(this,a);this.r="event"}m(fe,Hc);function ge(a){return a+"_"+t()}var he=ge("pan"),ie=ge("rotate"),je=ge("zoom"),ke=ge("scroll");ge("render");var le=ge("resetview"),me=ge("windowlevel"),ne=ge("modified"),oe=ge("remove"),pe=ge("progress"),qe=ge("hover"),re=ge("hover_end"),se=ge("computing"),te=ge("computing_end"),ue=ge("computing_progress");function ve(){fe.call(this,me);this.sw=this.Fw=0}m(ve,fe);function we(){fe.call(this,he);this.pe=new n.da(0,0,0)}m(we,fe);
function xe(){fe.call(this,ie);this.pe=new n.da(0,0,0)}m(xe,fe);function ye(){fe.call(this,je);this.wh=this.ui=!1}m(ye,fe);function ze(){fe.call(this,ke);this.Oc=!1}m(ze,fe);function Ae(){fe.call(this,qe);this.pt=this.ot=0}m(Ae,fe);function Be(){fe.call(this,re)}m(Be,fe);function Ce(){fe.call(this,le)}m(Ce,fe);function be(){fe.call(this,ne);this.Pa=this.gb=null}m(be,fe);function ce(){fe.call(this,oe);this.Pa=this.gb=null}m(ce,fe);function De(){fe.call(this,pe);this.qm=0}m(De,fe);
function Ee(){fe.call(this,se);this.gb=null}m(Ee,fe);function Fe(){fe.call(this,ue);this.qm=0}m(Fe,fe);function Ge(){fe.call(this,te);this.gb=null}m(Ge,fe);h("X.event.events.PAN",he);h("X.event.events.ROTATE",ie);h("X.event.events.ZOOM",je);h("X.event.events.SCROLL",ke);function He(){gd.call(this);this.r="parser";this.ma=null;this.fb=0;this.xK=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.dt=!0}m(He,gd);He.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Ie(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var g=a[e],b=Math.min(b,g),c=Math.max(c,g);return[b,c]}
function Je(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
He.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this.ma.slice(this.fb,this.fb+=b*c));if(this.xK!=this.dt)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),g=0;g<d.byteLength;g+=
c)for(var k=g+c-1,l=g;k>l;k--,l++){var q=e[l];e[l]=e[k];e[k]=q}return 1==b?d[0]:d};
function Ke(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Gd(0,0,0,1),e=Fd();Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(0,0,b[2]-1,1);Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(0,b[1]-
1,0,1);Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,0,0,1);Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,b[1]-1,0,1);Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,0,b[2]-1,1);Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(0,b[1]-1,b[2]-1,1);Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,b[1]-1,b[2]-1,1);Sd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Le(a,b){var c=Id();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=Cd(),g=a[0],k=a[1],l=a[2],q=b[0],p=b[1],s=b[2];e[0]=k*s-l*p;e[1]=l*q-g*s;e[2]=g*p-k*q;Ed(e,e);g=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];Md(c,0,g*g+k*k-l*l-d*d,2*(k*l-g*d),2*(k*d+g*l),0);Md(c,1,2*(k*l+g*d),g*g+l*l-k*k-d*d,2*(l*d-g*k),0);Md(c,2,2*(k*d-g*l),2*(l*d+g*k),g*g+d*d-l*l-k*k,0)}d=Hd();Qd(c,d);return[c,d]}
function Me(a,b,c,d,e,g,k,l,q){var p=new Ne;Ed(c,c);for(var s=[],r=[],u=0;6>u;u++)for(var v=Math.floor(u/2),D=(v+1)%3,B=(v+2)%3,I=(4+2*v)%6,G=0;2>G;G++){var Q=(2+G+2*v)%6,M=-(c[v]*(e[u]-a[v])+c[D]*(e[Q]-a[D]))/c[B]+a[B];if(M>=e[I]&&M<=e[I+1]||M<=e[I]&&M>=e[I+1]){var L=[];L[v]=e[u];L[D]=e[Q];L[B]=M;s.push(L)}else L=[],L[v]=e[u],L[D]=e[Q],L[B]=M,r.push(L)}a=Dd(0,0,1);a=Le(c,a);e=a[0];a=a[1];v=[];for(r=0;r<s.length;++r)u=Gd(s[r][0],s[r][1],s[r][2],1),D=Fd(),Sd(e,u,D),v.push([D[0],D[1],D[2]]);e=Dd(1,
0,0);s=Cd();Rd(a,e,s);r=Dd(0,1,0);e=Cd();Rd(a,r,e);u=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(r=r=0;r<v.length;++r)v[r][0]<u[0]&&(u[0]=v[r][0]),v[r][0]>u[1]&&(u[1]=v[r][0]),v[r][1]<u[2]&&(u[2]=v[r][1]),v[r][1]>u[3]&&(u[3]=v[r][1]),v[r][2]<u[4]&&(u[4]=v[r][2]),v[r][2]>u[5]&&(u[5]=v[r][2]);r=Gd(u[0]+(u[1]-u[0])/2,u[2]+(u[3]-u[2])/2,u[4]+(u[5]-u[4])/2,0);v=Fd();Pd(a,r,v);D=Math.floor(u[0]);B=Math.ceil(u[1]);D==B&&B++;I=B-D;G=Math.floor(u[2]);
Q=Math.ceil(u[3]);M=Q-G;L=b[0];b=b[1];var r=Math.ceil(I/L),J=Math.ceil(M/b),H=new Uint8Array(4*r*J),O=new Wd;O.zw=r;O.yw=J;var J=Fd(),N=Gd(0,0,u[4],1),Y=Hd();Pd(k.oK,a,Y);for(var K=Q-1E-7,y=B-1E-7,z=0,ga=0,Z=0,E=G,E=G;E<=K;E+=b)for(Z++,ga=0,N[1]=E,r=D;r<=y;r+=L){ga++;N[0]=r;Sd(Y,N,J);var W=4*z,eb=Math.floor(J[2]),ra=Math.floor(J[1]),Ea=Math.floor(J[0]);if(0<=Ea&&Ea<k.Qb[0]&&0<=ra&&ra<k.Qb[1]&&0<=eb&&eb<k.Qb[2]){var ua=g[eb][ra][Ea],sb=Ea=ra=eb=0;q?((ua=q.get(ua))||(ua=[0,.61,0,0,1]),eb=255*ua[1],
ra=255*ua[2],Ea=255*ua[3],sb=255*ua[4]):(eb=ra=Ea=ua/k.Mc*255,sb=255);H[W]=eb;H[++W]=ra;H[++W]=Ea;H[++W]=sb}else H[W]=0,H[++W]=0,H[++W]=0,H[++W]=0;z++}O.Gk=H;p.rb=O;p.HK=u;p.qK=a;p.pK=Y;p.wK=G;p.VV=Q;p.GK=D;p.WV=B;p.VB=ga;p.UB=Z;p.vj=L;p.sb=I;p.oj=b;p.ab=M;p.nb=[v[0],v[1],v[2]];p.Xn=[c[0],c[1],c[2]];p.it=[s[0],s[1],s[2]];p.Oc=[e[0],e[1],e[2]];p.Rb=!1;p.uj=k;p.nj=null==k.uj||l?!0:!1;p.Tn=d;p.Jg();p.Rb=!1;return p}
function Oe(a,b,c,d){var e;e=d.Id;for(var g=[],k=[],l=0;6>l;l++){var q=Math.floor(l/2),p=(q+1)%3,s=(q+2)%3,r=(2+2*q)%6,u=(4+2*q)%6,v=1/c[q]*(e[l]-b[q]);if(Infinity!=v&&-Infinity!=v){var D=b[p]+c[p]*v,v=b[s]+c[s]*v;D>=e[r]&&D<=e[r+1]&&v>=e[u]&&v<=e[u+1]?(r=[],r[q]=e[l],r[p]=D,r[s]=v,g.push(r)):(r=[],r[q]=e[l],r[p]=D,r[s]=v,k.push(r))}}e=[g,k];b=e[0];d.e[a].R=e;e=vd(new ud(b[0][0],b[0][1],b[0][2]),new ud(b[1][0],b[1][1],b[1][2]));d.e[a].UV=e;g=Dd(0,0,1);k=Le(c,g)[0];l=Gd(d.kw[0],d.kw[1],d.kw[2],0);
g=Fd();Sd(k,l,g);k=Fd();l=g[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(g[0])&&(g[0]=.5);.5>Math.abs(g[1])&&(g[1]=.5);d.e[a].Ve=[Math.abs(g[0]),Math.abs(g[1])];d.e[a].ho=g[2];d.e[a].hb=k;e=Math.floor(Math.abs(e/g[2]));d.bq[a]=e+1;d.e[a].ta=e+1;d.e[a].R[0][0][0]>d.e[a].R[0][1][0]?0<k[0]&&(e=d.e[a].R[0][0],d.e[a].R[0][0]=d.e[a].R[0][1],d.e[a].R[0][1]=e):d.e[a].R[0][0][0]<d.e[a].R[0][1][0]?0>k[0]&&(e=d.e[a].R[0][0],d.e[a].R[0][0]=d.e[a].R[0][1],d.e[a].R[0][1]=e):d.e[a].R[0][0][1]>
d.e[a].R[0][1][1]?0<k[1]&&(e=d.e[a].R[0][0],d.e[a].R[0][0]=d.e[a].R[0][1],d.e[a].R[0][1]=e):d.e[a].R[0][0][1]<d.e[a].R[0][1][1]?0>k[1]&&(e=d.e[a].R[0][0],d.e[a].R[0][0]=d.e[a].R[0][1],d.e[a].R[0][1]=e):d.e[a].R[0][0][2]>d.e[a].R[0][1][2]?0<k[2]&&(e=d.e[a].R[0][0],d.e[a].R[0][0]=d.e[a].R[0][1],d.e[a].R[0][1]=e):d.e[a].R[0][0][2]<d.e[a].R[0][1][2]&&0>k[2]&&(e=d.e[a].R[0][0],d.e[a].R[0][0]=d.e[a].R[0][1],d.e[a].R[0][1]=e);d.e[a].vw=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Pe(a,b){var c;c=b.ma;for(var d=b.Qb,e=b.Mc,g=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],q=0,p=0,s=0,r=0,u=0,r=0;r<d[2];r++){var v=c.subarray(r*l,(r+1)*l),u=0;k[r]=Array(d[1]);g[r]=Array(d[1]);for(s=0;s<d[1];s++)for(k[r][s]=new c.constructor(d[0]),g[r][s]=new c.constructor(d[0]),p=0;p<d[0];p++)q=v[u],k[r][s][p]=q/e*255,g[r][s][p]=q,u++}c=[g,k];b.ad=c[0];b.TV=c[1];n.pf(a.r+".reslice");b.Gb=null!=b.p;b.Te&&(b.Mp=b.Te.sf);b.gX=[0,0,0];b.Oa=[b.Se[0]+(b.mj[0]-1)/2,b.Se[1]+(b.mj[1]-1)/2,b.Se[2]+(b.mj[2]-
1)/2];b.Id=[Math.min(b.Se[0],b.Se[0]+b.mj[0]-1),Math.max(b.Se[0],b.Se[0]+b.mj[0]-1),Math.min(b.Se[1],b.Se[1]+b.mj[1]-1),Math.max(b.Se[1],b.Se[1]+b.mj[1]-1),Math.min(b.Se[2],b.Se[2]+b.mj[2]-1),Math.max(b.Se[2],b.Se[2]+b.mj[2]-1)];b.e=[{},{},{}];c=Dd(b.Oa[0],b.Oa[1],b.Oa[2]);b.e[0].cq=c;d=Dd(1,0,0);Ed(d,d);b.e[0].N=d;e=[1,0,0];b.e[0].$a=e;Oe(0,c,d,b);b.k[0].k=Array(b.e[0].ta);c[0]=b.e[0].R[0][0][0]+b.e[0].hb[0]*Math.floor(b.e[0].ta/2);c[1]=b.e[0].R[0][0][1]+b.e[0].hb[1]*Math.floor(b.e[0].ta/2);c[2]=
b.e[0].R[0][0][2]+b.e[0].hb[2]*Math.floor(b.e[0].ta/2);c=Me(c,b.e[0].Ve,b.e[0].N,b.e[0].$a,b.Id,b.ad,b,b.Gb,b.Mp);b.Gb&&(c.p=b.p.k[0].k[Math.floor(b.e[0].ta/2)].rb);b.k[0].k[Math.floor(b.e[0].ta/2)]=c;b.pj=Math.floor(b.e[0].ta/2);b.Yn=Math.floor(b.e[0].ta/2);c=Dd(b.Oa[0],b.Oa[1],b.Oa[2]);b.e[1].cq=c;d=Dd(0,1,0);Ed(d,d);b.e[1].N=d;e=[0,1,0];b.e[1].$a=e;Oe(1,c,d,b);b.k[1].k=Array(b.e[1].ta);c[0]=b.e[1].R[0][0][0]+b.e[1].hb[0]*Math.floor(b.e[1].ta/2);c[1]=b.e[1].R[0][0][1]+b.e[1].hb[1]*Math.floor(b.e[1].ta/
2);c[2]=b.e[1].R[0][0][2]+b.e[1].hb[2]*Math.floor(b.e[1].ta/2);c=Me(c,b.e[1].Ve,b.e[1].N,b.e[1].$a,b.Id,b.ad,b,b.Gb,b.Mp);b.Gb&&(c.p=b.p.k[1].k[Math.floor(b.e[1].ta/2)].rb);b.k[1].k[Math.floor(b.e[1].ta/2)]=c;b.qj=Math.floor(b.e[1].ta/2);b.Zn=Math.floor(b.e[1].ta/2);c=Dd(b.Oa[0],b.Oa[1],b.Oa[2]);b.e[2].cq=c;d=Dd(0,0,1);Ed(d,d);b.e[2].N=d;e=[0,.392,.804];b.e[2].$a=e;Oe(2,c,d,b);b.k[2].k=Array(b.e[2].ta);c[0]=b.e[2].R[0][0][0]+b.e[2].hb[0]*Math.floor(b.e[2].ta/2);c[1]=b.e[2].R[0][0][1]+b.e[2].hb[1]*
Math.floor(b.e[2].ta/2);c[2]=b.e[2].R[0][0][2]+b.e[2].hb[2]*Math.floor(b.e[2].ta/2);c=Me(c,b.e[2].Ve,b.e[2].N,b.e[2].$a,b.Id,b.ad,b,b.Gb,b.Mp);b.Gb&&(c.p=b.p.k[2].k[Math.floor(b.e[2].ta/2)].rb);b.k[2].k[Math.floor(b.e[2].ta/2)]=c;b.rj=Math.floor(b.e[2].ta/2);b.$n=Math.floor(b.e[2].ta/2);n.Pe(a.r+".reslice");return b.ad};function Qe(){He.call(this);this.r="parserOFF"}m(Qe,He);
Qe.prototype.parse=function(a,b,c){function d(){if(q===e)throw Error("End of file reached unexpectedly.");for(var a=q;a<e;++a)if(10===g[a]){var b=Je(g,q,a);q=a+1;return b}q=e;return Je(g,q,e-1)}n.pf(this.r+".parse");this.ma=c;var e=c.byteLength,g=this.h("uchar",e);c=[];b.G=new hd(e);b.ra=new hd(e);for(var k=b.G,l=b.ra,q=0,p=d(),p=("OFF"===p?d():p).split(" "),s=p[0],p=p[1];s--;){var r=d(),r=r.split(" ");c.push([parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2])])}for(;p--;){var r=d(),r=r.split(" "),
u=c[parseInt(r[1],10)],s=c[parseInt(r[2],10)],r=c[parseInt(r[3],10)];k.add(u[0],u[1],u[2]);k.add(s[0],s[1],s[2]);k.add(r[0],r[1],r[2]);u=new ud(u[0],u[1],u[2]);r=new ud(r[0],r[1],r[2]);s=yd((new ud(s[0],s[1],s[2])).zd(u),r.zd(u));s.normalize();l.add(s.x,s.y,s.z);l.add(s.x,s.y,s.z);l.add(s.x,s.y,s.z)}n.Pe(this.r+".parse");c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};h("X.parserOFF",Qe);h("X.parserOFF.prototype.parse",Qe.prototype.parse);function Re(){He.call(this);this.r="parserDCM"}m(Re,He);
Re.prototype.parse=function(a,b,c){b.jj={};b.jj.or=0;this.$j(c,b);if(null==b.va.length||b.Ua.length==b.va.length){b.jj.or=b.va.length;var d={};c={};for(var e=0;e<b.Ua.length;e++)d.hasOwnProperty(b.Ua[e].series_instance_uid)||(d[b.Ua[e].series_instance_uid]=[],c[b.Ua[e].series_instance_uid]={}),c[b.Ua[e].series_instance_uid].hasOwnProperty(b.Ua[e].sop_instance_uid)||(c[b.Ua[e].series_instance_uid][b.Ua[e].sop_instance_uid]=!0,d[b.Ua[e].series_instance_uid].push(b.Ua[e]));var g=Object.keys(d)[0],e=
d[g],k=e.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new ud(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],
e[0].image_orientation_patient[5]),d=yd(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&
(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var q=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-q[0],p=d[1]-q[1],s=d[2]-q[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+p*p+s*s);break;case "instance_number":e[0].pixel_spacing[2]=1;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var q=e[0].image_position_patient,r=e[k-1].image_position_patient,g=r[0]-q[0],p=r[1]-
q[1],s=r[2]-q[2],g=Math.sqrt(g*g+p*p+s*s),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}q=e[0].columns*e[0].rows;g=q*d;r=null;switch(e[0].wm){case 8:r=new Uint8Array(g);break;case 16:r=new Uint16Array(g);break;case 32:r=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.sj=e[0].pixel_spacing;
for(var u=0;u<k;u++){var v=e[u].data,g=0;switch(l){case "image_position_patient":g=e[u].image_position_patient[0]-e[0].image_position_patient[0];p=e[u].image_position_patient[1]-e[0].image_position_patient[1];s=e[u].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+p*p+s*s)/e[0].pixel_spacing[2];break;case "instance_number":g=e[u].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}r.set(v,g*q)}c.data=r;b.ma=r;b.Qb=[e[0].columns,
e[0].rows,d];c.NL=b.Qb;d=Ie(r);k=d[0];d=d[1];c.min=b.tf=b.Ac=k;c.max=b.Mc=b.zc=d;-Infinity==b.cc&&(b.cc=k);Infinity==b.ec&&(b.ec=d);p=e[0].image_position_patient;k=Hd();switch(l){case "image_position_patient":d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new ud(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=yd(d,g);Md(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],
-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);Md(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);Md(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);Md(k,3,0,0,0,1);break;case "instance_number":Md(k,0,-1,0,0,-p[0]);Md(k,1,-0,-1,-0,-p[1]);Md(k,2,0,0,1,p[2]);
Md(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Xf=k;c.Zf=Hd();Qd(c.Xf,c.Zf);l=Gd(0,0,0,1);e=Fd();Sd(k,l,e);l=Gd(1,1,1,1);d=Fd();Sd(k,l,d);c.dm=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Ke(k,[b.Qb[0],b.Qb[1],b.Qb[2]]);c.am=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.bm=[e[0],e[2],e[4]];b.Jg(c);b.xh=Pe(this,b)}c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};
Re.prototype.Ff=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Re.prototype.$j=function(a,b){this.ma=a;if("undefined"==typeof b.Ua||null==b.Ua)b.Ua=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this.ma.byteLength),e=66,g=null,k=null,l=null,q=null;e<d.length;)switch(g=d[e++],k=d[e++],l=d[e++],q=d[e++],"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==q&&(q=l),g){case 2:switch(k){case 16:for(var p="",g=g=0;g<q/2;g++)l=d[e++],k=l&255,
l=(l&65280)>>8,p+=String.fromCharCode(k),p+=String.fromCharCode(l);c.transfer_syntax_uid=p.replace(/\0/g,"");break;default:e=Re.prototype.Ff(d,e,l,q)}break;case 40:switch(k){case 16:c.rows=d[e];e+=q/2;break;case 17:c.columns=d[e];e+=q/2;break;case 256:c.wm=d[e];e+=q/2;break;case 257:c.bits_stored=d[e];e+=q/2;break;case 2:c.number_of_images=d[e];e+=q/2;break;case 48:p="";for(g=0;g<q/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,p+=String.fromCharCode(k),p+=String.fromCharCode(l);p=p.split("\\");c.pixel_spacing=
[parseFloat(p[0]),parseFloat(p[1]),Infinity];break;default:e=Re.prototype.Ff(d,e,l,q)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(g=0;g<q/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(k),c.series_instance_uid+=String.fromCharCode(l);break;case 19:p="";for(g=0;g<q/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,p+=String.fromCharCode(k),p+=String.fromCharCode(l);c.instance_number=parseInt(p,10);break;case 50:p="";for(g=0;g<q/2;g++)l=d[e++],k=l&255,l=(l&65280)>>
8,p+=String.fromCharCode(k),p+=String.fromCharCode(l);p=p.split("\\");c.image_position_patient=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])];break;case 55:p="";for(g=0;g<q/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,p+=String.fromCharCode(k),p+=String.fromCharCode(l);p=p.split("\\");c.image_orientation_patient=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]),parseFloat(p[4]),parseFloat(p[5])];break;default:e=Re.prototype.Ff(d,e,l,q)}break;case 65534:switch(k){default:q=0,e+=q/
2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(g=0;g<q/2;g++)l=d[e++],k=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(k),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Re.prototype.Ff(d,e,l,q)}break;case 16:switch(k){case 8720:for(g=0;g<q/2;g++)e++;break;default:e=Re.prototype.Ff(d,e,l,q)}break;default:e=Re.prototype.Ff(d,e,l,q)}switch(c.wm){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=
new Uint32Array(c.columns*c.rows)}this.fb=this.ma.byteLength-c.columns*c.rows*2;d=null;switch(c.wm){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.Ua.push(c);return b};h("X.parserDCM",Re);h("X.parserDCM.prototype.parse",Re.prototype.parse);function Se(){He.call(this);this.r="parserVTK"}m(Se,He);
Se.prototype.parse=function(a,b,c){n.pf(this.r+".parse");var d=b.G,e=b.ra,g=new Uint8Array(c),k="";b.G=d=new hd(c.byteLength);b.ra=e=new hd(c.byteLength);c=0;for(var l=g.length;c<l;c+=32768)k+=Je(g,c,Math.min(c+32768,l));g=k.split("\n");k=g.length;this.hq=this.iq=null;this.km=[];this.eg=Yd;this.uw=this.Dk=this.xk=this.Ek=!1;c=0;for(l=k%8;l--;)Te(this,g[c]),c++;for(l=.125*k^0;l--;)Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),
c++,Te(this,g[c]),c++;c=this.iq;var g=this.hq,k=g.length,q=l=this.km.length;do{var p=this.km[l-q],s=p.length,r;for(r=0;r<s&&!("LINES"==this.eg&&r+1>=s);r++){var u=parseInt(p[r],10),v=c.get(u);d.add(v[0],v[1],v[2]);var D=u,B=v;"LINES"==this.eg?(D=parseInt(p[r+1],10),B=c.get(D),d.add(B[0],B[1],B[2])):"TRIANGLE_STRIPS"==this.eg&&(0!=r&&r!=s-1||d.add(v[0],v[1],v[2]));u<k?(B=g.get(u),e.add(B[0],B[1],B[2]),"LINES"==this.eg?(D=g.get(D),e.add(D[0],D[1],D[2])):"TRIANGLE_STRIPS"==this.eg&&(0!=r&&r!=s-1||e.add(B[0],
B[1],B[2]))):(D=new ud(v[0],v[1],v[2]),D.normalize(),e.add(D.x,D.y,D.z),"LINES"==this.eg?(D=new ud(B[0],B[1],B[2]),D.normalize(),e.add(D.x,D.y,D.z)):"TRIANGLE_STRIPS"==this.eg&&(0!=r&&r!=s-1||e.add(D.x,D.y,D.z)))}q--}while(0<q);b.Xe=this.eg;n.Pe(this.r+".parse");d=new be;d.gb=b;d.Pa=a;this.dispatchEvent(d)};
function Te(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Ek=!0;a.xk=!1;a.Dk=!1;c=parseInt(c[1],10);a.iq=new hd(3*c);a.hq=new hd(3*c);return;case "VERTICES":a.xk=!0;a.Ek=!1;a.Dk=!1;c=parseInt(c[1],10);if(3<=c)a.eg=Yd;else if(1==c)a.eg="POINTS";else throw Error("This VTK file is not supported!");a.km=[];return;case "TRIANGLE_STRIPS":a.xk=!0;a.Ek=!1;a.Dk=!1;a.eg="TRIANGLE_STRIPS";a.km=[];return;case "LINES":a.xk=!0;a.Ek=!1;a.Dk=!1;a.eg="LINES";a.km=
[];return;case "POLYGONS":a.xk=!0;a.Ek=!1;a.Dk=!1;a.eg="POLYGONS";a.km=[];return;case "POINT_DATA":a.Dk=!0;a.Ek=!1;a.xk=!1;return}if(a.Ek)if(1==d||isNaN(parseFloat(e)))a.Ek=!1;else{if(3<=d){var e=parseFloat(c[0]),g=parseFloat(c[1]),k=parseFloat(c[2]);a.iq.add(e,g,k)}6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),k=parseFloat(c[5]),a.iq.add(e,g,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.iq.add(d,e,c))}else a.xk?1==d||isNaN(parseFloat(e))?a.xk=!1:(c=c.slice(1),a.km.push(c)):
a.Dk&&("NORMALS"==e?a.uw=!0:1==d||isNaN(parseFloat(e))?(a.Dk=!1,a.uw=!1):a.uw&&(3<=d&&(e=parseFloat(c[0]),g=parseFloat(c[1]),k=parseFloat(c[2]),a.hq.add(e,g,k)),6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),k=parseFloat(c[5]),a.hq.add(e,g,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.hq.add(d,e,c))))}h("X.parserVTK",Se);h("X.parserVTK.prototype.parse",Se.prototype.parse);function Ue(){He.call(this);this.r="parserFSM";this.dt=!1}m(Ue,He);
Ue.prototype.parse=function(a,b,c){n.pf(this.r+".parse");this.ma=c;var d=b.G,e=b.ra;b.co=[];var g=b.co;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var q=new Uint32Array(e),p=new Float32Array(9*c);b.G=d=new hd(9*c);b.ra=e=new hd(9*c);var s;for(s=0;s<c;s++){var r=3*s,u=k[r],v=k[r+1],D=k[r+2];g.push(u);g.push(v);g.push(D);q[u]+=1;q[v]+=1;q[D]+=1;var r=3*u,B=3*v,I=3*D,G=l[r],Q=l[r+1],M=l[r+2],v=
l[B],D=l[B+1],u=l[B+2],L=l[I],J=l[I+1],H=l[I+2];d.add(G,Q,M);d.add(v,D,u);d.add(L,J,H);G=new ud(G,Q,M);L=new ud(L,J,H);v=(new ud(v,D,u)).clone().zd(G);D=L.clone().zd(G);v=yd(v,D).normalize();p[r]+=v.x;p[r+1]+=v.y;p[r+2]+=v.z;p[B]+=v.x;p[B+1]+=v.y;p[B+2]+=v.z;p[I]+=v.x;p[I+1]+=v.y;p[I+2]+=v.z}for(s=0;s<c;s++)r=3*s,u=k[r],v=k[r+1],D=k[r+2],r=3*u,B=3*v,I=3*D,g=new ud(p[B],p[B+1],p[B+2]),l=new ud(p[I],p[I+1],p[I+2]),r=(new ud(p[r],p[r+1],p[r+2])).scale(1/q[u]).normalize(),g=g.scale(1/q[v]).normalize(),
l=l.scale(1/q[D]).normalize(),e.add(r.x,r.y,r.z),e.add(g.x,g.y,g.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this.ma.byteLength-this.fb);k=null;for(r=0;r<c.length;r++)if(99==c[r]&&114==c[r+1]&&97==c[r+2]&&115==c[r+3]){for(e=k=r+9;10!=c[r]&&r<c.length;)e++,r++;k=Je(c.subarray(k,e)).split(" ");break}k&&(b.bd.mI(parseFloat(k[0])),b.bd.nI(parseFloat(k[1])),b.bd.oI(parseFloat(k[2])));b.Xe=Yd;n.Pe(this.r+".parse");c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};h("X.parserFSM",Ue);
h("X.parserFSM.prototype.parse",Ue.prototype.parse);var Ve={Yw:function(a,b,c){return Ve.update(a,0,b,c)},update:function(a,b,c,d){var e=Ve.ZJ,g="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(g=d&7;g--;++c)b=b>>>8^e[(b^a[c])&255];for(g=d>>3;g--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},We;
We=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Ve.ZJ=We;function Xe(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,g,k,l,q,p,s,r,u;for(r=0;r<b;++r)a[r]>c&&(c=a[r]),a[r]<d&&(d=a[r]);e=1<<c;g=new Uint32Array(e);k=1;l=0;for(q=2;k<=c;){for(r=0;r<b;++r)if(a[r]===k){p=0;s=l;for(u=0;u<k;++u)p=p<<1|s&1,s>>=1;for(u=p;u<e;u+=q)g[u]=k<<16|r;++l}++k;l<<=1;q<<=1}return[g,c,d]};function Ye(a,b){this.Sw=[];this.Uw=32768;this.Hh=this.oq=this.Ib=this.AA=0;this.input=new Uint8Array(a);this.ZC=!1;this.Vw=Ze;this.resize=!1;if(b||!(b={}))b.index&&(this.Ib=b.index),b.bufferSize&&(this.Uw=b.bufferSize),b.bufferType&&(this.Vw=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Vw){case $e:this.jd=32768;this.jb=new Uint8Array(32768+this.Uw+258);break;case Ze:this.jd=0;this.jb=new Uint8Array(this.Uw);this.Om=this.cM;this.mD=this.sL;this.vx=this.FL;break;default:throw Error("invalid inflate mode");
}}var $e=0,Ze=1;
Ye.prototype.Vk=function(){for(;!this.ZC;){var a=af(this,3);a&1&&(this.ZC=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.Ib,c=this.jb,d=this.jd,e=void 0,g=void 0,k=void 0,l=c.length,e=void 0;this.Hh=this.oq=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");g=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");g|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=e;
e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(g===~k)throw Error("invalid uncompressed block header: length verify");if(b+g>a.length)throw Error("input buffer is broken");switch(this.Vw){case $e:for(;d+g>c.length;)e=l-d,g-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.jd=d,c=this.Om(),d=this.jd;break;case Ze:for(;d+g>c.length;)c=this.Om({nE:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+g),d);d+=g;this.Ib=b+=g;this.jd=
d;this.jb=c;break;case 1:this.vx(bf,cf);break;case 2:df(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.mD()};
var ef=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ff=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),gf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),hf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),jf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),kf=new Uint8Array(288),
lf,mf;lf=0;for(mf=kf.length;lf<mf;++lf)kf[lf]=143>=lf?8:255>=lf?9:279>=lf?7:8;var bf=Xe(kf),nf=new Uint8Array(30),of,pf;of=0;for(pf=nf.length;of<pf;++of)nf[of]=5;var cf=Xe(nf);function af(a,b){for(var c=a.oq,d=a.Hh,e=a.input,g=a.Ib,k;d<b;){k=e[g++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.oq=c>>>b;a.Hh=d-b;a.Ib=g;return k}
function qf(a,b){for(var c=a.oq,d=a.Hh,e=a.input,g=a.Ib,k=b[0],l=b[1],q;d<l;){q=e[g++];if(void 0===q)throw Error("input buffer is broken");c|=q<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.oq=c>>k;a.Hh=d-k;a.Ib=g;return e&65535}
function df(a){function b(a,b,c){var d,e,g;for(g=0;g<a;)switch(d=qf(this,b),d){case 16:for(d=3+af(this,2);d--;)c[g++]=e;break;case 17:for(d=3+af(this,3);d--;)c[g++]=0;e=0;break;case 18:for(d=11+af(this,7);d--;)c[g++]=0;e=0;break;default:e=c[g++]=d}return c}var c=af(a,5)+257,d=af(a,5)+1,e=af(a,4)+4,g=new Uint8Array(ef.length),k;for(k=0;k<e;++k)g[ef[k]]=af(a,3);e=Xe(g);g=new Uint8Array(c);k=new Uint8Array(d);a.vx(Xe(b.call(a,c,e,g)),Xe(b.call(a,d,e,k)))}f=Ye.prototype;
f.vx=function(a,b){var c=this.jb,d=this.jd;this.JD=a;for(var e=c.length-258,g,k,l;256!==(g=qf(this,a));)if(256>g)d>=e&&(this.jd=d,c=this.Om(),d=this.jd),c[d++]=g;else for(g-=257,l=ff[g],0<gf[g]&&(l+=af(this,gf[g])),g=qf(this,b),k=hf[g],0<jf[g]&&(k+=af(this,jf[g])),d>=e&&(this.jd=d,c=this.Om(),d=this.jd);l--;)c[d]=c[d++-k];for(;8<=this.Hh;)this.Hh-=8,this.Ib--;this.jd=d};
f.FL=function(a,b){var c=this.jb,d=this.jd;this.JD=a;for(var e=c.length,g,k,l;256!==(g=qf(this,a));)if(256>g)d>=e&&(c=this.Om(),e=c.length),c[d++]=g;else for(g-=257,l=ff[g],0<gf[g]&&(l+=af(this,gf[g])),g=qf(this,b),k=hf[g],0<jf[g]&&(k+=af(this,jf[g])),d+l>e&&(c=this.Om(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.Hh;)this.Hh-=8,this.Ib--;this.jd=d};
f.Om=function(){var a=new Uint8Array(this.jd-32768),b=this.jd-32768,c=this.jb;a.set(c.subarray(32768,a.length));this.Sw.push(a);this.AA+=a.length;c.set(c.subarray(b,b+32768));this.jd=32768;return c};f.cM=function(a){var b=this.input.length/this.Ib+1|0,c=this.input,d=this.jb;a&&("number"===typeof a.nE&&(b=a.nE),"number"===typeof a.LK&&(b+=a.LK));2>b?(a=(c.length-this.Ib)/this.JD[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.jb=a};
f.mD=function(){var a=0,b=this.jb,c=this.Sw,d,e=new Uint8Array(this.AA+(this.jd-32768)),g,k,l,q;if(0===c.length)return this.jb.subarray(32768,this.jd);g=0;for(k=c.length;g<k;++g)for(d=c[g],l=0,q=d.length;l<q;++l)e[a++]=d[l];g=32768;for(k=this.jd;g<k;++g)e[a++]=b[g];this.Sw=[];return this.buffer=e};f.sL=function(){var a,b=this.jd;this.resize?(a=new Uint8Array(b),a.set(this.jb.subarray(0,b))):a=this.jb.subarray(0,b);return this.buffer=a};new Uint8Array(256);var rf;for(rf=0;256>rf;++rf)for(var sf=rf,tf=7,sf=sf>>>1;sf;sf>>>=1)--tf;var uf=[],vf;for(vf=0;288>vf;vf++)switch(!0){case 143>=vf:uf.push([vf+48,8]);break;case 255>=vf:uf.push([vf-144+400,9]);break;case 279>=vf:uf.push([vf-256+0,7]);break;case 287>=vf:uf.push([vf-280+192,8]);break;default:throw"invalid literal: "+vf;}
var wf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(wf);function xf(){};function yf(a){this.input=a;this.Ib=0;this.member=[]}
yf.prototype.Vk=function(){for(var a=this.input.length;this.Ib<a;){var b=new xf,c=void 0,d=void 0,e=void 0,g=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.Ib;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(g=0;0<(c=l[d++]);)k[g++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(g=0;0<(c=l[d++]);)k[g++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=Ve.Yw(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new Ye(l,{index:d,bufferSize:e});b.data=e=d.Vk();d=d.Ib;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(Ve.Yw(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Ve.Yw(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.Ib=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function zf(){He.call(this);this.r="parserMGZ";this.dt=!1}m(zf,He);
zf.prototype.parse=function(a,b,c,d){n.pf(this.r+".parse");d&&(c=(new yf(new Uint8Array(c))).Vk(),c=c.buffer);d=this.$j(c);var e=[d.dz,d.ez,d.fz];b.Qb=e;var g=d.wI;b.sj=g;c=d.min;var k=d.max;b.tf=b.Ac=c;b.Mc=b.zc=k;-Infinity==b.cc&&(b.cc=c);Infinity==b.ec&&(b.ec=k);c=Hd();Md(c,0,d.ph[0][0],d.ph[1][0],d.ph[2][0],0);Md(c,1,d.ph[0][1],d.ph[1][1],d.ph[2][1],0);Md(c,2,d.ph[0][2],d.ph[1][2],d.ph[2][2],0);Md(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,q=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.ph[3][p]-(c[p+0]*g[0]*
k+c[p+4]*g[1]*l+c[p+8]*g[2]*q);g=e[1];k=e[2];c[12]=e[0];c[13]=g;c[14]=k;c[15]=1;d.Xf=c;d.Zf=Hd();Qd(d.Xf,d.Zf);e=Gd(0,0,0,1);g=Fd();Sd(c,e,g);k=Gd(1,1,1,1);e=Fd();Sd(c,k,e);c=Ke(c,b.Qb);d.dm=[e[0]-g[0],e[1]-g[1],e[2]-g[2]];d.am=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.bm=[c[0],c[2],c[4]];b.Jg(d);n.Pe(this.r+".parse");b.xh=Pe(this,b);d=new be;d.gb=b;d.Pa=a;this.dispatchEvent(d)};
zf.prototype.$j=function(a){this.ma=a;a={version:0,bK:0,$J:0,sM:0,aK:0,dz:0,ez:0,fz:0,BP:0,type:0,UL:0,VG:0,WT:null,ph:null,wI:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.dz=this.h("uint");a.ez=this.h("uint");a.fz=this.h("uint");a.BP=this.h("uint");a.type=this.h("uint");a.UL=this.h("uint");a.VG=this.h("ushort");if(0<a.VG){a.wI=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.ph=b}this.fb=
284;b=a.dz*a.ez*a.fz;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Ie(a.data);a.min=b[0];a.max=b[1];this.fb+16<this.ma.byteLength&&(a.bK=this.h("float"),a.sM=this.h("float"),a.$J=this.h("float"),a.aK=this.h("float"));return a};h("X.parserMGZ",zf);h("X.parserMGZ.prototype.parse",zf.prototype.parse);function Af(){He.call(this);this.r="parserLBL"}m(Af,He);
Af.prototype.parse=function(a,b,c){n.pf(this.r+".parse");var d=b.co,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this.ma=c;var g=[],k=this.h("uchar",c.byteLength),l=k.length,q=!1,p=0;for(c=1;c<l;c++)10==k[c-1]?(p=c,q=!0):q&&32==k[c]&&(g.push(parseInt(Je(k,p,c),10)),q=!1);k=b.Cb.Bb?b.Cb.Bb:new Float32Array(e);l=g.length;for(c=0;c<l;c++)k[g[c]]=1;g=new Float32Array(3*e);for(c=l=0;c<e;c++){q=d[c];if(q>e)throw Error("Could not find scalar for vertex.");q=k[q];g[l++]=q;g[l++]=
q;g[l++]=q}b.Cb.Bb=k;b.Cb.Np=g;b.Cb.Q=!0;n.Pe(this.r+".parse");d=new be;d.gb=b;d.Pa=a;this.dispatchEvent(d)};h("X.parserLBL",Af);h("X.parserLBL.prototype.parse",Af.prototype.parse);function Bf(){He.call(this);this.r="parserCRV";this.dt=!1}m(Bf,He);
Bf.prototype.parse=function(a,b,c){n.pf(this.r+".parse");var d=b.co;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this.ma=c;this.fb=3;var e=this.h("uint");this.h("uint");this.h("uint");var g=0,k=0,l=0,q=0,p=0,s=0,r=0,u=0,v=0,D=0,B=0;c=Array(2);var I=Array(2),G=this.h("float",e),Q;for(Q=0;Q<e;Q++){var M=G[Q];0==Q&&(c[0]=I[0]=M);0<=M?(g++,q+=M):(k++,l+=M);v+=M;B++;I[0]=Math.max(M,I[0]);c[0]=Math.min(M,c[0]);G[Q]=M}0!=g&&(p=q/g);0!=k&&(s=l/k);0!=B&&(D=v/B);for(B=v=l=q=0;B<e;B++)M=
G[B],Q=0,0<=M?(Q=Math.pow(M-p,2),q+=Q):(Q=Math.pow(M-s,2),l+=Q),Q=Math.pow(M-D,2),v+=Q;1<g&&(r=Math.sqrt(q/(g-1)));1<k&&(u=Math.sqrt(l/(k-1)));c[1]=s-2.5*u;I[1]=p+2.5*r;e=d.length;g=new Float32Array(3*e);for(B=0;B<e;B++)k=G[d[B]],l=3*B,g[l]=k,g[l+1]=k,g[l+2]=k;b.Cb.tf=c[1];b.Cb.Mc=I[1];-Infinity==b.Cb.cc&&(b.Cb.cc=c[1]);Infinity==b.Cb.ec&&(b.Cb.ec=I[1]);b.Cb.Bb=G;b.Cb.Np=g;b.Cb.Q=!0;n.Pe(this.r+".parse");d=new be;d.gb=b;d.Pa=a;this.dispatchEvent(d)};h("X.parserCRV",Bf);
h("X.parserCRV.prototype.parse",Bf.prototype.parse);function Cf(a,b){var c,d;this.input=a;this.Ib=0;if(b||!(b={}))b.index&&(this.Ib=b.index),b.verify&&(this.KS=b.verify);c=a[this.Ib++];d=a[this.Ib++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.WG=new Ye(a,{index:this.Ib,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Cf.prototype.Vk=function(){var a=this.input,b;b=this.WG.Vk();this.Ib=this.WG.Ib;if(this.KS){var a=(a[this.Ib++]<<24|a[this.Ib++]<<16|a[this.Ib++]<<8|a[this.Ib++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var g=c.length,k,l=0;0<g;){k=1024<g?1024:g;g-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Df(){He.call(this);this.r="parserRAW"}m(Df,He);
Df.prototype.parse=function(a,b,c,d){n.pf(this.r+".parse");d&&(c=(new Cf(new Uint8Array(c))).Vk(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Ie(d.data);c=e[0];e=e[1];d.min=b.tf=b.Ac=c;d.max=b.Mc=b.zc=e;-Infinity==b.cc&&(b.cc=c);Infinity==b.ec&&(b.ec=e);e=Id();d.Xf=e;d.Zf=Id();var g=Gd(0,0,0,1);c=Fd();Sd(e,g,c);var k=Gd(1,1,1,1),g=Fd();Sd(e,k,g);e=Ke(e,b.Qb);d.dm=[g[0]-c[0],g[1]-c[1],g[2]-c[2]];d.am=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.bm=[e[0],e[2],e[4]];b.Jg(d);n.Pe(this.r+".parse");b.xh=
Pe(this,b);d=new be;d.gb=b;d.Pa=a;this.dispatchEvent(d)};h("X.parserRAW",Df);h("X.parserRAW.prototype.parse",Df.prototype.parse);function Ef(){He.call(this);this.r="parserIMAGE"}m(Ef,He);Ef.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),g=e.length,k=Array(g);g--;)k[g]=String.fromCharCode(e[g]);e=window.btoa(k.join(""));g=new Image;Xc(g,"load",this.aR.bind(this,g,a,b,c,d));g.src="data:image/"+d+";base64,"+e};Ef.prototype.aR=function(a,b,c){b.xh=a;b.Gk=null;a=new be;a.gb=c;a.Pa=b;this.dispatchEvent(a)};h("X.parserIMAGE",Ef);h("X.parserIMAGE.prototype.parse",Ef.prototype.parse);function Ff(){He.call(this);this.r="parserLUT"}m(Ff,He);
Ff.prototype.parse=function(a,b,c){n.pf(this.r+".parse");this.ma=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,g;for(g=0;g<d;g++)if(10==c[g]){var k=Je(c,e,g),e=g+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}n.Pe(this.r+".parse");c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};
h("X.parserLUT",Ff);h("X.parserLUT.prototype.parse",Ff.prototype.parse);function Gf(){He.call(this);this.r="parserMRC"}m(Gf,He);
Gf.prototype.parse=function(a,b,c){n.pf(this.r+".parse");c=this.$j(c);var d=c.min,e=c.max;b.Qb=[c.ur,c.vr,c.wr];b.sj=[c.xlen/c.pG,c.EI/c.qG,c.GI/c.rG];b.tf=b.Ac=d;b.Mc=b.zc=e;-Infinity==b.cc&&(b.cc=d);Infinity==b.ec&&(b.ec=e);e=Hd();Md(e,3,0,0,0,1);Md(e,0,-1,0,0,c.ur);Md(e,1,0,0,-1,c.vr);Md(e,2,0,-1,0,c.wr);c.Xf=e;c.Zf=Hd();Qd(c.Xf,c.Zf);var g=Gd(0,0,0,1),d=Fd();Sd(e,g,d);var k=Gd(1,1,1,1),g=Fd();Sd(e,k,g);k=[c.ur,c.vr,c.wr];e=Ke(e,k);c.dm=[g[0]-d[0],g[1]-d[1],g[2]-d[2]];c.am=[e[1]+e[0]+1,e[3]-e[2]+
1,e[5]-e[4]+1];c.bm=[e[0],e[2],e[4]];b.Qb=k;b.Jg(c);b.xh=Pe(this,b);n.Pe(this.r+".parse");c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};
Gf.prototype.$j=function(a){this.ma=a;a={ur:0,vr:0,wr:0,mode:0,$W:0,aX:0,bX:0,pG:0,qG:0,rG:0,xlen:0,EI:0,GI:0,alpha:0,beta:0,gamma:0,kP:0,lP:0,mP:0,Pw:0,ut:0,vm:0,PW:0,next:0,DL:0,ib:null,DP:0,FP:0,ib:null,HO:0,IW:0,FO:0,Od:0,zP:0,AP:0,IS:0,JS:0,yS:null,OS:0,QS:0,VS:0,jW:0,pX:0,KR:0,EP:0,data:null,min:Infinity,max:-Infinity,WW:0,TH:null,oX:null,hX:null,orientation:null,ZW:null};this.fb=0;a.ur=this.h("sint");a.vr=this.h("sint");a.wr=this.h("sint");a.mode=this.h("sint");var b=a.ur*a.vr*a.wr;this.fb=
1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.fb=28;a.pG=this.h("sint");a.qG=this.h("sint");a.rG=this.h("sint");a.xlen=this.h("float");a.EI=this.h("float");a.GI=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.kP=this.h("sint");a.lP=this.h("sint");a.mP=this.h("sint");a.Pw=this.h("float");a.ut=this.h("float");a.vm=this.h("float");a.OW=this.h("sint");a.next=this.h("sint");a.DL=this.h("short");a.DP=this.h("short");a.FP=this.h("short");a.HO=this.h("sint");a.HW=this.h("sint");a.FO=this.h("short");a.Od=this.h("short");a.zP=this.h("short");a.AP=this.h("short");a.IS=this.h("short");a.JS=this.h("short");a.yS=this.h("float",6);this.fb=196;a.OS=this.h("float");a.QS=
this.h("float");a.VS=this.h("float");this.fb=216;a.KR=this.h("float");a.EP=this.h("sint");a.SW=this.h("schar",10);if(0!=a.next)switch(this.fb=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.vm-(a.ut-a.vm)?(a.min=a.Pw,a.max=a.vm+(a.vm-a.Pw)):(a.min=a.vm-(a.ut-a.vm),a.max=a.ut);return a};h("X.parserMRC",Gf);h("X.parserMRC.prototype.parse",Gf.prototype.parse);function Hf(){He.call(this);this.r="parserNRRD"}m(Hf,He);
Hf.prototype.parse=function(a,b,c){n.pf(this.r+".parse");this.ma=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,g=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Je(c,0,k-2);g=k+1;break}var l,q,p,s,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.ZO=!0:!l.match(/^#/)&&(s=l.match(/(.*):(.*)/))&&(q=s[1].trim(),l=s[2].trim(),(p=this.kM[q])?p.call(this,l):this[q]=l);if(!this.ZO)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.Vc&&(this.Vc=[new ud(1,0,0),new ud(0,1,0),new ud(0,0,1)],this.mA))for(d=[],s=0;2>=s;s++)d.push(isNaN(this.mA[s])?void 0:this.Vc[s].scale(this.mA[s]));g=c.subarray(g);if("gzip"==this.encoding||"gz"==this.encoding)g=(new yf(new Uint8Array(g))).Vk();g=g.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.wk(g);s=Ie(c.data);g=c.min=s[0];s=c.max=s[1];b.tf=b.Ac=g;b.Mc=b.zc=s;b.Qb=[this.iA[0],this.iA[1],this.iA[2]];
d=(new ud(this.Vc[0][0],this.Vc[0][1],this.Vc[0][2])).Xh();e=(new ud(this.Vc[1][0],this.Vc[1][1],this.Vc[1][2])).Xh();k=(new ud(this.Vc[2][0],this.Vc[2][1],this.Vc[2][2])).Xh();b.sj=[d,e,k];-Infinity==b.cc&&(b.cc=g);Infinity==b.ec&&(b.ec=s);d=s=1;"left-posterior-superior"==this.TH&&(d=s=-1);g=Id();Md(g,0,s*this.Vc[0][0],s*this.Vc[1][0],s*this.Vc[2][0],s*this.lA[0]);Md(g,1,d*this.Vc[0][1],d*this.Vc[1][1],d*this.Vc[2][1],d*this.lA[1]);Md(g,2,1*this.Vc[0][2],1*this.Vc[1][2],1*this.Vc[2][2],1*this.lA[2]);
Md(g,3,0,0,0,1);c.Xf=g;c.Zf=Hd();Qd(c.Xf,c.Zf);d=Gd(0,0,0,1);s=Fd();Sd(g,d,s);e=Gd(1,1,1,1);d=Fd();Sd(g,e,d);g=Ke(g,b.Qb);c.dm=[d[0]-s[0],d[1]-s[1],d[2]-s[2]];c.am=[g[1]-g[0]+1,g[3]-g[2]+1,g[5]-g[4]+1];c.bm=[g[0],g[2],g[4]];b.Jg(c);n.Pe(this.r+".parse");b.xh=Pe(this,b);c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};
Hf.prototype.kM={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.wk=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.wk=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.wk=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.wk=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.wk=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.wk=Uint32Array;break;case "float":this.wk=Float32Array;break;case "double":this.wk=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.xW=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Wk=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.iA=e},space:function(a){return this.TH=a},"space origin":function(a){return this.lA=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Vc=function(){var a,g,k;k=[];a=0;for(g=c.length;a<g;a++)d=c[a],k.push(function(){var a,c,e,g;e=d.slice(1,-1).split(/,/);g=[];a=0;for(c=e.length;a<c;a++)b=e[a],g.push(parseFloat(b));return g}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.mA=e}};h("X.parserNRRD",Hf);h("X.parserNRRD.prototype.parse",Hf.prototype.parse);function If(){He.call(this);this.r="parserSTL"}m(If,He);
If.prototype.parse=function(a,b,c){n.pf(this.r+".parse");this.ma=c;var d=b.G,e=b.ra;if("solid"==Je(this.h("uchar",5))){b.G=d=new hd(c.byteLength);b.ra=e=new hd(c.byteLength);var g=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,q=0,p;for(p=0;p<c;p++)if(10==e[p]){if(k||l){var s=Je(e,q,p).split(" "),l=parseFloat(s[0]),r=parseFloat(s[1]),s=parseFloat(s[2]);k?(d.add(l,r,s),d.add(l,r,s),d.add(l,r,s)):g.add(l,r,s);l=k=!1}}else 32==e[p-1]&&(102==e[p]?(q=p+=13,k=!0):118==e[p]&&(q=p+=7,l=!0))}else for(this.fb=
80,g=this.h("uint"),b.G=d=new hd(9*g),b.ra=e=new hd(9*g),c=c=0;c<g;c++)k=this.h("float",12),q=k[0],p=k[1],l=k[2],e.add(q,p,l),e.add(q,p,l),e.add(q,p,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.fb+=2;n.Pe(this.r+".parse");g=new be;g.gb=b;g.Pa=a;this.dispatchEvent(g)};h("X.parserSTL",If);h("X.parserSTL.prototype.parse",If.prototype.parse);function Jf(){He.call(this);this.r="parserNII"}m(Jf,He);
Jf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new yf(new Uint8Array(d))).Vk(),d=d.buffer);c=this.$j(d);d=c.min;e=c.max;b.tf=b.Ac=d;b.Mc=b.zc=e;-Infinity==b.cc&&(b.cc=d);Infinity==b.ec&&(b.ec=e);d=Hd();Md(d,3,0,0,0,1);if(0<c.Qz){var e=0,g=c.SG,k=c.TG,l=c.UG,q=1,p=1,s=1,r=c.PG,u=c.QG,v=c.RG,e=1-(g*g+k*k+l*l);1E-7>e?(e=1/Math.sqrt(g*g+k*k+l*l),g*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.ai[1]&&(q=c.ai[1]);
0<c.ai[2]&&(p=c.ai[2]);0<c.ai[2]&&(s=c.ai[3]);0>c.ai[0]&&(s=-s);Md(d,0,(e*e+g*g-k*k-l*l)*q,2*(g*k-e*l)*p,2*(g*l+e*k)*s,r);Md(d,1,2*(g*k+e*l)*q,(e*e+k*k-g*g-l*l)*p,2*(k*l-e*g)*s,u);Md(d,2,2*(g*l-e*k)*q,2*(k*l+e*g)*p,(e*e+l*l-k*k-g*g)*s,v)}else 0<c.NH?(e=c.VH,g=c.WH,k=c.XH,Md(d,0,e[0],e[1],e[2],e[3]),Md(d,1,g[0],g[1],g[2],g[3]),Md(d,2,k[0],k[1],k[2],k[3])):0==c.Qz?(Md(d,0,c.ai[1],0,0,0),Md(d,1,0,c.ai[2],0,0),Md(d,2,0,0,c.ai[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.Xf=d;c.Zf=Hd();
Qd(c.Xf,c.Zf);g=Gd(0,0,0,1);e=Fd();Sd(d,g,e);k=Gd(1,1,1,1);g=Fd();Sd(d,k,g);k=[c.Wk[1],c.Wk[2],c.Wk[3]];d=Ke(d,k);c.dm=[g[0]-e[0],g[1]-e[1],g[2]-e[2]];c.am=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.bm=[d[0],d[2],d[4]];b.Qb=k;b.Jg(c);b.xh=Pe(this,b);c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};
Jf.prototype.$j=function(a){this.ma=a;a={cS:0,uo:null,EL:null,eM:0,SR:0,wR:0,ML:null,Wk:null,TO:0,UO:0,VO:0,RO:0,tx:0,fL:0,hS:0,ai:null,zI:0,QR:0,PR:0,gS:0,eS:null,PS:null,lL:0,mL:0,fS:0,AS:0,jO:0,kO:0,KL:null,bL:null,Qz:0,NH:0,SG:0,TG:0,UG:0,PG:0,QG:0,RG:0,VH:null,WH:null,XH:null,SO:null,Zo:null,data:null,min:Infinity,max:-Infinity};a.cS=this.h("uint");a.uo=this.h("uchar",10);a.EL=this.h("uchar",18);a.eM=this.h("uint");a.SR=this.h("ushort");a.wR=this.h("uchar");a.ML=this.h("uchar");a.Wk=this.h("ushort",
8);a.TO=this.h("float");a.UO=this.h("float");a.VO=this.h("float");a.RO=this.h("ushort");a.tx=this.h("ushort");a.fL=this.h("ushort");a.hS=this.h("ushort");a.ai=this.h("float",8);a.zI=this.h("float");a.QR=this.h("float");a.PR=this.h("float");a.gS=this.h("ushort");a.eS=this.h("uchar");a.PS=this.h("uchar");a.lL=this.h("float");a.mL=this.h("float");a.fS=this.h("float");a.AS=this.h("float");a.jO=this.h("uint",1);a.kO=this.h("uint",1);a.KL=this.h("uchar",80);a.bL=this.h("uchar",24);a.Qz=this.h("ushort");
a.NH=this.h("ushort");a.SG=this.h("float");a.TG=this.h("float");a.UG=this.h("float");a.PG=this.h("float");a.QG=this.h("float");a.RG=this.h("float");a.VH=this.h("float",4);a.WH=this.h("float",4);a.XH=this.h("float",4);a.SO=this.h("uchar",16);a.Zo=this.h("uchar",4);this.fb=parseInt(a.zI,10);var b=a.Wk[1]*a.Wk[2]*a.Wk[3];switch(a.tx){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",b);break;case 32:a.data=
this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.tx);}b=Ie(a.data);a.min=b[0];a.max=b[1];return a};h("X.parserNII",Jf);h("X.parserNII.prototype.parse",Jf.prototype.parse);function Kf(){He.call(this);this.r="parserTRK"}m(Kf,He);
Kf.prototype.parse=function(a,b,c){n.pf(this.r+".parse");var d=b.G,e=b.ra,g=b.Jd;this.ma=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var q=this.h("uint");this.h("uint");var p=
this.h("uint"),s=[],r=[],u=Infinity,v=-Infinity,D=null,B=null,I=null,G=null,e=d=null,Q=this.h("uint",(this.ma.byteLength-1E3)/4);this.fb=p;for(var M=this.h("float",(this.ma.byteLength-1E3)/4),L=0,p=g=0;p<q;p++){for(var J=Q[L],H=new hd(3*J),O=0,N=0;N<J;N++){var Y=M[L+3*N+N*l+1],K=M[L+3*N+N*l+2],y=M[L+3*N+N*l+3],Y=Y/k[0],K=K/k[1],y=y/k[2];H.add(Y,K,y);if(0<N)var z=H.get(N-1),O=O+Math.sqrt(Math.pow(Y-z[0],2)+Math.pow(K-z[1],2)+Math.pow(y-z[2],2));N<J-1&&(g+=6)}L+=3*J+J*l+1;N=H.Bh;J=H.yh;Y=H.Ch;K=H.zh;
y=H.Dh;z=H.Ah;if(!D||N<D)D=N;if(!B||J>B)B=J;if(!I||Y<I)I=Y;if(!G||K>G)G=K;if(!d||y<d)d=y;if(!e||z>e)e=z;s.push(H);r.push(O)}k=(D+B)/2;I=(I+G)/2;l=(d+e)/2;G=new Float32Array(g);b.G=d=new hd(g);b.ra=e=new hd(g);b.Jd=g=new hd(g);for(p=D=0;p<q;p++)for(B=s[p],Q=B.count,O=r[p],u=Math.min(u,O),v=Math.max(v,O),N=0;N<Q-1;N++){L=B.get(N);M=B.get(N+1);d.add(L[0],L[1],L[2]);d.add(M[0],M[1],M[2]);var H=L[0]-k,J=L[1]-I,Y=L[2]-l,K=Math.sqrt(H*H+J*J+Y*Y),y=M[0]-k,z=M[1]-I,ga=M[2]-l,Z=Math.sqrt(y*y+z*z+ga*ga);e.add(H/
K,J/K,Y/K);e.add(y/Z,z/Z,ga/Z);M=[Math.abs(M[0]-L[0]),Math.abs(M[1]-L[1]),Math.abs(M[2]-L[2])];L=Math.sqrt(M[0]*M[0]+M[1]*M[1]+M[2]*M[2]);M[0]/=L;M[1]/=L;M[2]/=L;g.add(M[0],M[1],M[2]);g.add(M[0],M[1],M[2]);G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O}b.Xe="LINES";q=new $d;q.tf=u;q.Mc=v;q.cc=u;q.ec=v;q.Np=G;q.fC=!1;q.Q=!0;b.Cb=q;u=!1;for(p=0;16>p;p++)if(0!=c[p]){u=!0;break}!1==u&&(c[0]=c[5]=c[10]=c[15]=1);n.Pe(this.r+".parse");n.w.CA(c,b.bd.dc);c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};
h("X.parserTRK",Kf);h("X.parserTRK.prototype.parse",Kf.prototype.parse);function Lf(){He.call(this);this.r="parserOBJ"}m(Lf,He);
Lf.prototype.parse=function(a,b,c){n.pf(this.r+".parse");this.ma=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.G=new hd(c);b.ra=new hd(c);var g=b.G,k=b.ra,l=0,q;for(q=0;q<c;++q)if(10==d[q]){var p=Je(d,l,q).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var s=e[parseInt(p[1],10)-1],l=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];g.add(s[0],s[1],s[2]);g.add(l[0],l[1],l[2]);g.add(p[0],p[1],p[2]);s=new ud(s[0],s[1],s[2]);
p=new ud(p[0],p[1],p[2]);l=yd((new ud(l[0],l[1],l[2])).zd(s),p.zd(s));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=q+1}n.Pe(this.r+".parse");c=new be;c.gb=b;c.Pa=a;this.dispatchEvent(c)};h("X.parserOBJ",Lf);h("X.parserOBJ.prototype.parse",Lf.prototype.parse);function Mf(){gd.call(this);this.r="loader";this.ao=new od;this.aq=0}m(Mf,gd);function Nf(a,b){a.aq+=b/a.ao.Kj()/3;a.aq=Math.min(1,a.aq);var c=new De;c.qm=a.aq;a.dispatchEvent(c)}function Of(a){a=a.va.ht;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Pf))throw Error("The "+b+" file format is not supported.");return[a,b,Pf[b][0],Pf[b][1],Pf[b][2]]}
Mf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!qd(this.ao.gc,a.qe)||this.ao.get(a.qe)){this.ao.set(a.qe,!1);var c=Of(a)[0];if(null!=a.ti)this.parse(null,a,b);else{var d=new XMLHttpRequest;C(d,"abort",this.gE.bind(this,d,a,b));C(d,"error",this.gE.bind(this,d,a,b));C(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Mf.prototype.parse=function(a,b,c){Nf(this,1);setTimeout(function(){var d=Of(b),e=d[3],d=new d[2];Xc(d,ne,this.complete.bind(this));var g=b.ti;null==g&&(g=a.response,b.ti=g);d.parse(b,c,g,e)}.bind(this),100)};Mf.prototype.complete=function(a){Nf(this,1);setTimeout(function(){var b=a.Pa,c=a.gb;b.va.Q=!1;b.Q=!0;c.ua();this.ao.set(b.qe,!0)}.bind(this),100)};Mf.prototype.gE=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Pf={OBJ:[Lf,null],OFF:[Qe,null],STL:[If,null],VTK:[Se,null],TRK:[Kf,null],MRC:[Gf,null],ST:[Gf,null],FSM:[Ue,null],INFLATED:[Ue,null],SMOOTHWM:[Ue,null],SPHERE:[Ue,null],PIAL:[Ue,null],ORIG:[Ue,null],NRRD:[Hf,null],NII:[Jf,null],GZ:[Jf,null],DCM:[Re,null],DICOM:[Re,null],"":[Re,null],CRV:[Bf,null],LABEL:[Af,null],MGH:[zf,!1],MGZ:[zf,!0],RAW:[Df,!1],RZ:[Df,!0],TXT:[Ff,null],LUT:[Ff,null],PNG:[Ef,"png"],JPG:[Ef,"jpeg"],JPEG:[Ef,"jpeg"],GIF:[Ef,"gif"]};function Qf(){He.call(this);this.r="parserIMA"}m(Qf,He);
Qf.prototype.parse=function(a,b,c){b.jj={};b.jj.or=0;this.$j(c,b);if(null==b.va.length||b.Ua.length==b.va.length){b.jj.or=b.va.length;var d={};c={};for(var e=0;e<b.Ua.length;e++)d.hasOwnProperty(b.Ua[e].series_instance_uid)||(d[b.Ua[e].series_instance_uid]=[],c[b.Ua[e].series_instance_uid]={}),c[b.Ua[e].series_instance_uid].hasOwnProperty(b.Ua[e].sop_instance_uid)||(c[b.Ua[e].series_instance_uid][b.Ua[e].sop_instance_uid]=!0,d[b.Ua[e].series_instance_uid].push(b.Ua[e]));var g=Object.keys(d)[0],e=
d[g],k=e.length;c={};console.log("FIRST IMAGE",e,d,g);var l="image_position_patient";1==k?(l="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new ud(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=yd(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var q=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-q[0],p=d[1]-q[1],s=d[2]-q[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+p*p+
s*s);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var q=e[0].image_position_patient,r=e[k-1].image_position_patient,g=r[0]-q[0],p=r[1]-q[1],s=r[2]-q[2],g=Math.sqrt(g*g+p*p+s*s),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}q=e[0].columns*e[0].rows;g=q*d;r=null;switch(e[0].wm){case 8:r=new Uint8Array(g);break;case 16:r=new Uint16Array(g);break;case 32:r=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.sj=e[0].pixel_spacing;for(var u=0;u<k;u++){var v=e[u].data,g=0;switch(l){case "image_position_patient":g=e[u].image_position_patient[0]-e[0].image_position_patient[0];p=e[u].image_position_patient[1]-
e[0].image_position_patient[1];s=e[u].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+p*p+s*s)/e[0].pixel_spacing[2];break;case "instance_number":g=e[u].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}r.set(v,g*q)}c.data=r;b.ma=r;b.Qb=[e[0].columns,e[0].rows,d];c.NL=b.Qb;d=Ie(r);k=d[0];d=d[1];c.min=b.tf=b.Ac=k;c.max=b.Mc=b.zc=d;-Infinity==b.cc&&(b.cc=k);Infinity==b.ec&&(b.ec=d);p=e[0].image_position_patient;k=Hd();
switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new ud(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=yd(d,g);Md(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);Md(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);Md(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);Md(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new ud(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=yd(d,g),Md(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),Md(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),Md(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(Md(k,0,1,0,0,-p[0]),Md(k,1,0,-1,-0,-p[1]),Md(k,2,0,0,1,p[2]));Md(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Xf=k;c.Zf=Hd();Qd(c.Xf,c.Zf);l=Gd(0,0,0,1);e=Fd();Sd(k,l,e);l=Gd(1,1,1,1);d=Fd();Sd(k,l,d);c.dm=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Ke(k,[b.Qb[0],b.Qb[1],b.Qb[2]]);c.am=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.bm=[e[0],e[2],e[4]];b.Jg(c);b.xh=Pe(this,b)}c=new be;c.gb=b;c.Pa=
a;this.dispatchEvent(c)};Qf.prototype.Ff=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Qf.prototype.$j=function(a,b){this.ma=a;if("undefined"==typeof b.Ua||null==b.Ua)b.Ua=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this.ma.byteLength),e=66,g=null,k=null,l=null,q=null,p=[[8,4368],[8,4384]],s=!1;e<d.length;){for(var g=d[e++],k=d[e++],l=d[e++],q=d[e++],s=!1,r=0,u=p.length;r<u;r++)if(g===p[r][0]&&k===p[r][1]){s=!0;break}if(s)window.console.log("Skipping ",
"("+g.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==q&&(q=l),g){case 2:switch(k){case 16:k="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Qf.prototype.Ff(d,e,l,q)}break;case 40:switch(k){case 16:c.rows=d[e];e+=q/2;break;case 17:c.columns=d[e];e+=q/2;break;case 256:c.wm=d[e];e+=q/2;break;case 257:c.bits_stored=d[e];e+=q/2;break;case 2:c.number_of_images=
d[e];e+=q/2;break;case 48:k="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Qf.prototype.Ff(d,e,l,q)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(g),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,k+=String.fromCharCode(g),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Qf.prototype.Ff(d,e,l,q)}break;case 24:switch(k){case 36:c.sequence_name="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(g),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(g),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Qf.prototype.Ff(d,e,l,q);break}case 65534:switch(k){default:q=0,e+=q/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(r=0;r<q/2;r++)l=d[e++],g=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(g),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Qf.prototype.Ff(d,e,l,q)}break;case 16:switch(k){case 8720:for(r=0;r<q/2;r++)e++;break;default:e=
Qf.prototype.Ff(d,e,l,q)}break;default:e=Qf.prototype.Ff(d,e,l,q)}}switch(c.wm){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.fb=this.ma.byteLength-c.columns*c.rows*2;d=null;switch(c.wm){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.Ua.push(c);return b};h("X.parserIMA",Qf);
h("X.parserIMA.prototype.parse",Qf.prototype.parse);var Rf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Sf=mc;function Tf(a,b){if(Sf){Sf=!1;var c=ba.location;if(c){var d=c.href;if(d&&(d=(d=Tf(3,d))&&decodeURIComponent(d))&&d!=c.hostname)throw Sf=!0,Error();}}return b.match(Rf)[a]||null};function Uf(a,b){ed.call(this);this.To=a||1;this.rp=b||ba;this.Tw=wa(this.xS,this);this.By=ya()}m(Uf,ed);f=Uf.prototype;f.enabled=!1;f.Uc=null;f.xS=function(){if(this.enabled){var a=ya()-this.By;0<a&&a<.8*this.To?this.Uc=this.rp.setTimeout(this.Tw,this.To-a):(this.Uc&&(this.rp.clearTimeout(this.Uc),this.Uc=null),this.dispatchEvent(Vf),this.enabled&&(this.Uc=this.rp.setTimeout(this.Tw,this.To),this.By=ya()))}};
f.start=function(){this.enabled=!0;this.Uc||(this.Uc=this.rp.setTimeout(this.Tw,this.To),this.By=ya())};f.stop=function(){this.enabled=!1;this.Uc&&(this.rp.clearTimeout(this.Uc),this.Uc=null)};f.g=function(){Uf.d.g.call(this);this.stop();delete this.rp};var Vf="tick";function Wf(a,b,c){if(na(a))c&&(a=wa(a,c));else if(a&&"function"==typeof a.handleEvent)a=wa(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Xf(a){return"function"==typeof a.Kj?a.Kj():ja(a)||ka(a)?a.length:nb(a)}function Yf(a){if("function"==typeof a.Tm)return a.Tm();if(ka(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ob(a)}function Zf(a){if("function"==typeof a.Oq)return a.Oq();if("function"!=typeof a.Tm){if(ja(a)||ka(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return pb(a)}}
function $f(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ja(a)||ka(a))A(a,b,void 0);else for(var c=Zf(a),d=Yf(a),e=d.length,g=0;g<e;g++)b.call(void 0,d[g],c&&c[g],a)}function ag(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ja(a)||ka(a))return Ib(a,b,void 0);for(var c=Zf(a),d=Yf(a),e=d.length,g=0;g<e;g++)if(!b.call(void 0,d[g],c&&c[g],a))return!1;return!0};function bg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function cg(){}cg.prototype.dD=null;function dg(a){var b;(b=a.dD)||(b={},eg(a)&&(b[0]=!0,b[1]=!0),b=a.dD=b);return b};var fg;function gg(){}m(gg,cg);function hg(a){return(a=eg(a))?new ActiveXObject(a):new XMLHttpRequest}function eg(a){if(!a.FF&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.FF=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.FF}fg=new gg;function ig(a){this.gc=new od;a&&this.Hw(a)}function jg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+pa(a):b.substr(0,1)+a}f=ig.prototype;f.Kj=function(){return this.gc.Kj()};f.add=function(a){this.gc.set(jg(a),a)};f.Hw=function(a){a=Yf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.eh=function(a){a=Yf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.gc.remove(jg(a))};f.clear=function(){this.gc.clear()};f.er=function(){return this.gc.er()};
f.contains=function(a){a=jg(a);return qd(this.gc.gc,a)};f.MF=function(a){var b=new ig;a=Yf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.Tm=function(){return this.gc.Tm()};f.clone=function(){return new ig(this)};f.Ao=function(a){return this.Kj()==Xf(a)&&kg(this,a)};
function kg(a,b){var c=Xf(b);if(a.Kj()>c)return!1;!(b instanceof ig)&&5<c&&(b=new ig(b));return ag(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.kx?c.kx(a):ja(c)||ka(c)?Lb(c,a):qb(c,a)})};function lg(a){var b;b||(b=mg(a||arguments.callee.caller,[]));return b}
function mg(a,b){var c=[];if(Lb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(ng(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=ng(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(mg(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ng(a){if(og[a])return og[a];a=String(a);if(!og[a]){var b=/function ([^\(]+)/.exec(a);og[a]=b?b[1]:"[Anonymous]"}return og[a]}var og={};function pg(a,b,c,d,e){this.reset(a,b,c,d,e)}pg.prototype.eE=null;pg.prototype.dE=null;var qg=0;pg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||qg++;d||ya();this.lr=a;this.yP=b;delete this.eE;delete this.dE};pg.prototype.sH=function(a){this.lr=a};function rg(a){this.gn=a;this.xF=this.Kd=this.lr=this.kb=null}function sg(a,b){this.name=a;this.value=b}sg.prototype.toString=function(){return this.name};var tg=new sg("SEVERE",1E3),ug=new sg("CONFIG",700),vg=new sg("FINE",500);f=rg.prototype;f.getName=function(){return this.gn};f.getParent=function(){return this.kb};f.Sx=function(){this.Kd||(this.Kd={});return this.Kd};f.sH=function(a){this.lr=a};
function wg(a){if(a.lr)return a.lr;if(a.kb)return wg(a.kb);gb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=wg(this).value)for(na(b)&&(b=b()),a=this.TE(a,b,c,rg.prototype.log),b="log:"+a.yP,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.xF)for(var e=0,g=void 0;g=c.xF[e];e++)g(d);b=b.getParent()}};
f.TE=function(a,b,c,d){a=new pg(a,String(b),this.gn);if(c){a.eE=c;var e;d=d||rg.prototype.TE;try{var g;var k=da("window.location.href");if(ka(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,q;b=!1;try{l=c.lineNumber||c.UW||"Not available"}catch(p){l="Not available",b=!0}try{q=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(s){q="Not available",b=!0}g=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:q,stack:c.stack||"Not available"}}e="Message: "+Oa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Oa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Oa(lg(d)+"-> ")}catch(r){e="Exception trying to expose exception! You win, we lose. "+r}a.dE=e}return a};f.Dt=function(a,b){this.log(ug,a,b)};f.Pr=function(a){this.kb=a};var xg={},yg=null;
function zg(a){yg||(yg=new rg(""),xg[""]=yg,yg.sH(ug));var b;if(!(b=xg[a])){b=new rg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=zg(a.substr(0,c));c.Sx()[d]=b;b.Pr(c);xg[a]=b}return b};function Ag(a,b){a&&a.log(vg,b,void 0)};function Bg(a){ed.call(this);this.headers=new od;this.Kv=a||null;this.Jk=!1;this.Jv=this.Va=null;this.jr=this.UF=this.zu="";this.$m=this.qy=this.ku=this.Hx=!1;this.js=0;this.Bv=null;this.dH=Cg;this.Fv=this.MS=!1}m(Bg,ed);var Cg="",Dg=Bg.prototype,Eg=zg("goog.net.XhrIo");Dg.Vg=Eg;var Fg=/^https?$/i,Gg=["POST","PUT"],Hg=[];function Ig(a,b){var c=new Bg;Hg.push(c);b&&c.F("complete",b);c.Fy("ready",c.pL);c.send(a,void 0,void 0,void 0)}f=Bg.prototype;f.pL=function(){this.i();Ob(Hg,this)};
f.send=function(a,b,c,d){if(this.Va)throw Error("[goog.net.XhrIo] Object is active with another request="+this.zu+"; newUri="+a);b=b?b.toUpperCase():"GET";this.zu=a;this.jr="";this.UF=b;this.Hx=!1;this.Jk=!0;this.Va=this.Kv?hg(this.Kv):hg(fg);this.Jv=this.Kv?dg(this.Kv):dg(fg);this.Va.onreadystatechange=wa(this.EG,this);try{Ag(this.Vg,Jg(this,"Opening Xhr")),this.qy=!0,this.Va.open(b,String(a),!0),this.qy=!1}catch(e){Ag(this.Vg,Jg(this,"Error opening Xhr: "+e.message));Kg(this,e);return}a=c||"";var g=
this.headers.clone();d&&$f(d,function(a,b){g.set(b,a)});d=Jb(g.Oq());c=ba.FormData&&a instanceof ba.FormData;!Lb(Gg,b)||d||c||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");g.forEach(function(a,b){this.Va.setRequestHeader(b,a)},this);this.dH&&(this.Va.responseType=this.dH);"withCredentials"in this.Va&&(this.Va.withCredentials=this.MS);try{Lg(this),0<this.js&&(this.Fv=Mg(this.Va),Ag(this.Vg,Jg(this,"Will abort after "+this.js+"ms if incomplete, xhr2 "+this.Fv)),this.Fv?(this.Va.timeout=
this.js,this.Va.ontimeout=wa(this.jI,this)):this.Bv=Wf(this.jI,this.js,this)),Ag(this.Vg,Jg(this,"Sending request")),this.ku=!0,this.Va.send(a),this.ku=!1}catch(k){Ag(this.Vg,Jg(this,"Send error: "+k.message)),Kg(this,k)}};function Mg(a){return kc&&uc(9)&&ma(a.timeout)&&ca(a.ontimeout)}function Kb(a){return"content-type"==a.toLowerCase()}f.jI=function(){"undefined"!=typeof aa&&this.Va&&(this.jr="Timed out after "+this.js+"ms, aborting",Ag(this.Vg,Jg(this,this.jr)),this.dispatchEvent("timeout"),this.abort(8))};
function Kg(a,b){a.Jk=!1;a.Va&&(a.$m=!0,a.Va.abort(),a.$m=!1);a.jr=b;Ng(a);Og(a)}function Ng(a){a.Hx||(a.Hx=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Va&&this.Jk&&(Ag(this.Vg,Jg(this,"Aborting")),this.Jk=!1,this.$m=!0,this.Va.abort(),this.$m=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Og(this))};f.g=function(){this.Va&&(this.Jk&&(this.Jk=!1,this.$m=!0,this.Va.abort(),this.$m=!1),Og(this,!0));Bg.d.g.call(this)};
f.EG=function(){this.Gm||(this.qy||this.ku||this.$m?Pg(this):this.lQ())};f.lQ=function(){Pg(this)};
function Pg(a){if(a.Jk&&"undefined"!=typeof aa)if(a.Jv[1]&&4==Qg(a)&&2==Rg(a))Ag(a.Vg,Jg(a,"Local request error detected and ignored"));else if(a.ku&&4==Qg(a))Wf(a.EG,0,a);else if(a.dispatchEvent("readystatechange"),4==Qg(a)){Ag(a.Vg,Jg(a,"Request complete"));a.Jk=!1;try{var b=Rg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var g=Tf(1,String(a.zu));if(!g&&self.location)var k=self.location.protocol,g=k.substr(0,
k.length-1);e=!Fg.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Qg(a)?a.Va.statusText:""}catch(q){Ag(a.Vg,"Can not get status: "+q.message),l=""}a.jr=l+" ["+Rg(a)+"]";Ng(a)}}finally{Og(a)}}}function Og(a,b){if(a.Va){Lg(a);var c=a.Va,d=a.Jv[0]?ea:null;a.Va=null;a.Jv=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.Vg)&&c.log(tg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}
function Lg(a){a.Va&&a.Fv&&(a.Va.ontimeout=null);ma(a.Bv)&&(ba.clearTimeout(a.Bv),a.Bv=null)}f.Li=function(){return!!this.Va};function Qg(a){return a.Va?a.Va.readyState:0}function Rg(a){try{return 2<Qg(a)?a.Va.status:-1}catch(b){return-1}}function Jg(a,b){return b+" ["+a.UF+" "+a.zu+" "+Rg(a)+"]"};/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function P(){}h("gxnat",P);P.JPEG_CONVERT_SUFFIX="?format=image/jpeg";P.tM={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};P.KB="?format=zip";P.Rj=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);P.get(a,b,"json")};
P.get=function(a,b,c){Ig(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.Va?bg(a.Va.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Va?a.Va.responseText:""}catch(g){Ag(a.Vg,"Can not get responseText: "+g.message),e=""}b(e)}})};
P.Ku=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,g=/^0x[0-9a-f]+$/i,k=/^0/,l=(P.Ku.QO&&(""+a).toLowerCase()||""+a).replace(d,"")||"",q=(P.Ku.QO&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=q.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(g))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(q.match(g))||l&&q.match(e)&&Date.parse(q)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(q=Math.max(d.length,c.length);l<q;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;g=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(g))return isNaN(e)?1:-1;typeof e!==typeof g&&(e+="",g+="");if(e<g)return-1;if(e>g)return 1}return 0};
P.jS=function(a,b){var c=[],d={},e=[],g={};A(a,function(a){g=a;A(b,function(a){g=g[a]});g=g.toLowerCase();c.push(g);d[g]=a});c=c.sort(P.sG);A(c,function(a){e.push(d[a])});return e};h("gxnat.JPEG_CONVERT_SUFFIX",P.JPEG_CONVERT_SUFFIX);h("gxnat.folderAbbrev",P.tM);h("gxnat.ZIP_SUFFIX",P.KB);h("gxnat.jsonGet",P.Rj);h("gxnat.get",P.get);h("gxnat.naturalSort",P.Ku);h("gxnat.sortXnatPropertiesArray",P.jS);function Sg(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}this.mE()}m(Sg,Bc);h("gxnat.Path",Sg);
function Tg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Ug(a){for(var b=0,c=Vg.length,b=0;b<c;b++)a(Vg[b],b)}function Wg(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var Vg=["projects","subjects","experiments",["scans","resources"],"files"];
Sg.prototype.mE=function(){var a,b,c,d=!1;Ug(function(e,g){if(ia(e))for(a=0,b=e.length;a<b;a++)c=e[a],null!=this[c]||d||(this.wx=Vg[g-1],d=!0);else null!=this[e]||d||(this.wx=Vg[g-1],d=!0)}.bind(this))};Sg.prototype.Tt=function(){null!=this.wx||this.mE;return this.wx};
Sg.prototype.ak=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,g=Vg.length,k=0,d=0;d<g;d++){c=Vg[d];if(ia(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Sg.prototype.i=function(){Sg.d.i.call(this);ub(this)};h("gxnat.Path.getQueryPrefix",Tg);h("gxnat.Path.forEachXnatLevel",Ug);
h("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Sg(a),d=new Sg(b),e=void 0;Ug(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});h("gxnat.Path.graftUrl",Wg);h("gxnat.Path.xnatLevelOrder",Vg);h("gxnat.Path.prototype.getDeepestLevel",Sg.prototype.Tt);h("gxnat.Path.prototype.pathByLevel",Sg.prototype.ak);h("gxnat.Path.prototype.dispose",Sg.prototype.i);function Xg(a){this.bf=new Sg(a);this.projects=[];this[Yg]={};this[Zg]={};this[$g]={}}m(Xg,Bc);h("gxnat.ProjectTree",Xg);function ah(a){this[bh]=ka(a)?new Sg(a):a;this[ch]=this[bh].Tt();a=Vg.indexOf(this[bh].Tt())+1;-1!=a&&(this[dh]=Vg[a],ka(this[dh])&&(this[eh]=this[bh].originalUrl+"/"+this[dh],this[this[dh]]=[]))}m(ah,Bc);h("gxnat.ProjectTree.TreeNode",ah);ah.prototype.gh=function(a){this.me=a};ah.prototype.ng=function(){return this.me};
ah.prototype.i=function(){ah.d.i.call(this);null!=this[bh]&&this[bh].i();ub(this)};var ch=t(),eh=t(),fh=t(),bh=t(),dh=t(),gh=t(),hh=t(),ih=t(),Yg=t(),Zg=t(),$g=t(),jh=["ID","description","name","URI"],kh=["gender","handedness","label","URI"],lh=["label","URI"];function mh(a,b){return Na(a.ng(),b.ng())}function nh(a){var b="&columns=";A(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=Xg.prototype;
f.zE=function(a){var b=[];w(this.Kq(a),function(a,d){"projects"==d?b.push(a[ih].ID):b.push(a[ih].label)});return b};f.AE=function(a){var b=[];w(this.Kq(a),function(a){b.push(a[bh].originalUrl)});return b};f.Kq=function(a){branch={projects:this.Me};"experiments"==a[dh]?branch.subjects=a:ia(a[dh])&&(branch.subjects=this[Zg][a[bh].ak("subjects")],branch.experiments=a);return branch};f.$F=function(a,b){this.nr(this.bf,a,b)};
f.nr=function(a,b,c){var d=ka(a)?new Sg(a):a,e;if(null!=this.Me){a={projects:this.Me};if(null!=d.subjects){e=d.ak("subjects");if(null==this[Zg][e]){this.Iy(e,function(a){this.bG(a,function(){null!=b&&b(a);this.nr(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[Zg][e]}if(null!=d.experiments){e=d.ak("experiments");if(null==this[$g][e]){this.Hy(e,function(a){null!=b&&b(a);this.nr(d,b,c)}.bind(this));return}a.experiments=this[$g][e]}null!=c&&c(a)}else this.aG(function(a){null!=b&&b(a);this.nr(d,
b,c)}.bind(this))};f.aG=function(a){if(null==this.Me){var b=nh(jh),c=this.bf.prefix+"/projects/"+this.bf.projects,d;P.Rj(this.bf.prefix+"/projects",function(b){d=new ah(c);this.projects.push(d);this.Me=d;this[Yg][d[bh].originalUrl]=d;d[ih]=b[0];d.gh(d[ih].name);a(d)}.bind(this),"&ID="+this.bf.projects+b)}};f.Qq=function(a){return this[Zg][a]};f.Go=function(a){return this[$g][a]};
f.bG=function(a,b){var c=a;ka(a)?c=this.Qq(a):a instanceof Sg&&(c=this.Qq(a.originalUrl));if(null!=c[ih])b(c);else{var d=this.bf.prefix+"/subjects",e=nh(kh),e="&ID="+c[bh].subjects+e;P.Rj(d,function(a){c[ih]=a[0];c.gh(c[ih].label);b(c)}.bind(this),e)}};
f.cG=function(a,b){if(null==this.Me[gh]||!0!=this.Me[gh]){var c=this.Me[bh].prefix+"/subjects",d="&project="+this.Me[bh].projects+nh(kh),e,g;P.Rj(c,function(c){A(c,function(d){g=this.Me[bh].prefix+"/projects/"+this.Me[bh].projects+"/subjects/"+d.ID;e=this.Iy(g);null==e[ih]&&(e[ih]=d,e.gh(e[ih].label));null!=a&&a(e);this.Me.subjects.length==c.length&&(this.Me[gh]=!0,null!=b&&(d=this.Me.subjects,d.sort(mh),b(d)))}.bind(this))}.bind(this),d)}};
f.Iy=function(a,b){if(null!=this[Zg][a])return this[Zg][a];subjNode=new ah(a);this.Me.subjects.push(subjNode);this[Zg][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.YF=function(a,b){var c=a;ka(a)?c=this.Go(a):a instanceof Sg&&(c=this.Go(a.originalUrl));var d=this.bf.prefix+"/experiments",e=nh(lh),e="&ID="+c[bh].experiments+e;P.Rj(d,function(a){c[ih]=a[0];c.gh(c[ih].label);b(c)}.bind(this),e)};
f.ZF=function(a,b,c){var d=a;ka(a)?d=this.Qq(a):a instanceof Sg&&(d=this.Qq(a.originalUrl));if(null!=d[gh]&&!0==d[gh])window.console.log("Don't need to reload the experiments of "+d[bh].originalUrl);else{var e=d[bh].originalUrl+"/experiments";P.Rj(e+"?xsiType=xnat:imageSessionData",function(a){A(a,function(k){this.Hy(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[gh]=!0,null!=c&&(e=d.experiments,e.sort(mh),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Hy=function(a,b){null==this[$g][a]&&(exptNode=new ah(a),this.YF(exptNode,function(c){this[Zg][c[bh].ak("subjects")].experiments.push(c);this[$g][a]=c;null!=b&&b(c)}.bind(this)))};f.i=function(){Xg.d.i.call(this);delete this.Me;this.bf.i();delete this.bf;A(this.projects,function(a){null!=a.subjects&&A(a.subjects,function(a){null!=a.experiments&&A(a.experiments,function(a){a.i()});a.i()});a.i()});ub(this)};h("gxnat.ProjectTree.TreeNode",ah);h("gxnat.ProjectTree.LEVEL_KEY",ch);
h("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",eh);h("gxnat.ProjectTree.NEXTLEVELJSON_KEY",fh);h("gxnat.ProjectTree.PATH_KEY",bh);h("gxnat.ProjectTree.NEXTLEVEL_KEY",dh);h("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",gh);h("gxnat.ProjectTree.ISLOADING_KEY",hh);h("gxnat.ProjectTree.METADATA_KEY",ih);h("gxnat.ProjectTree.PROJ_DIRECT",Yg);h("gxnat.ProjectTree.SUBJ_DIRECT",Zg);h("gxnat.ProjectTree.EXPT_DIRECT",$g);h("gxnat.ProjectTree.PROJECT_METADATA",jh);h("gxnat.ProjectTree.SUBJECT_METADATA",kh);
h("gxnat.ProjectTree.EXPERIMENT_METADATA",lh);h("gxnat.ProjectTree.compareNodeTitles",mh);h("gxnat.ProjectTree.getColumnQuery",nh);h("gxnat.ProjectTree.prototype.getBranchTitles",Xg.prototype.zE);h("gxnat.ProjectTree.prototype.getBranchUris",Xg.prototype.AE);h("gxnat.ProjectTree.prototype.getBranchFromEndNode",Xg.prototype.Kq);h("gxnat.ProjectTree.prototype.loadInitBranch",Xg.prototype.$F);h("gxnat.ProjectTree.prototype.loadBranch",Xg.prototype.nr);h("gxnat.ProjectTree.prototype.loadProject",Xg.prototype.aG);
h("gxnat.ProjectTree.prototype.getSubjectNodeByUri",Xg.prototype.Qq);h("gxnat.ProjectTree.prototype.getExperimentNodeByUri",Xg.prototype.Go);h("gxnat.ProjectTree.prototype.loadSubjectMetadata",Xg.prototype.bG);h("gxnat.ProjectTree.prototype.loadSubjects",Xg.prototype.cG);h("gxnat.ProjectTree.prototype.loadSubject",Xg.prototype.Iy);h("gxnat.ProjectTree.prototype.loadExperimentMetadata",Xg.prototype.YF);h("gxnat.ProjectTree.prototype.loadExperiments",Xg.prototype.ZF);
h("gxnat.ProjectTree.prototype.loadExperiment",Xg.prototype.Hy);h("gxnat.ProjectTree.prototype.dispose",Xg.prototype.i);function oh(a){a=a.className;return ka(a)&&a.match(/\S+/g)||[]}function R(a,b){var c=oh(a),d=Tb(arguments,1),e=c.length+d.length;ph(c,d);a.className=c.join(" ");return c.length==e}function qh(a,b){var c=oh(a),d=Tb(arguments,1),e=rh(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function ph(a,b){for(var c=0;c<b.length;c++)Lb(a,b[c])||a.push(b[c])}function rh(a,b){return Eb(a,function(a){return!Lb(b,a)})}
function sh(a,b,c){var d=oh(a);ka(b)?Ob(d,b):ia(b)&&(d=rh(d,b));ka(c)&&!Lb(d,c)?d.push(c):ia(c)&&ph(d,c);a.className=d.join(" ")};function th(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=th.prototype;f.clone=function(){return new th(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function uh(a,b){return new th(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof th?(this.x+=a.x,this.y+=a.y):(this.x+=a,ma(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=ma(b)?b:a;this.x*=a;this.y*=c;return this};function vh(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=vh.prototype;f.clone=function(){return new vh(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof vh?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof th?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,ma(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=ma(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function wh(a,b){this.width=a;this.height=b}function xh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=wh.prototype;f.clone=function(){return new wh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.er=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=ma(b)?b:a;this.width*=a;this.height*=c;return this};function yh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=yh.prototype;f.clone=function(){return new yh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.MF=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof yh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function zh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.Dx=function(a){return Math.sqrt(zh(this,a))};f.jl=function(){return new wh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof th?(this.left+=a.x,this.top+=a.y):(this.left+=a,ma(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=ma(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function Ah(){return mc?"Webkit":lc?"Moz":kc?"ms":jc?"O":null};var Bh=!kc||vc(9),Ch=!lc&&!kc||kc&&vc(9)||lc&&uc("1.9.1"),Dh=kc&&!uc("9");function Eh(a){return a?new Fh(Gh(a)):Ca||(Ca=new Fh)}function Hh(a){return ka(a)?document.getElementById(a):a}function Ih(a,b,c){return Jh(document,a,b,c)}function Kh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Jh(document,"*",a,b)}function Lh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Jh(document,"*",a,b)[0])||null}
function Jh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,g=0,k;k=a[g];g++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(g=e=0;k=a[g];g++)b=k.className,"function"==typeof b.split&&Lb(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Mh(a,b){w(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Nh?a.setAttribute(Nh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Nh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Oh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new wh(a.clientWidth,a.clientHeight)}function Ph(a){return mc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Qh(a){return a?a.parentWindow||a.defaultView:window}function Rh(a,b,c){return Sh(document,arguments)}
function Sh(a,b){var c=b[0],d=b[1];if(!Bh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Oa(d.name),'"');if(d.type){c.push(' type="',Oa(d.type),'"');var e={};Ab(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ka(d)?c.className=d:ia(d)?c.className=d.join(" "):Mh(c,d));2<b.length&&Th(a,c,b,2);return c}
function Th(a,b,c,d){function e(c){c&&b.appendChild(ka(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];!ja(g)||oa(g)&&0<g.nodeType?e(g):A(Uh(g)?Qb(g):g,e)}}function Vh(a,b){Th(Gh(a),a,arguments,1)}function Wh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Xh(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function S(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function Yh(a){return Ch&&void 0!=a.children?a.children:Eb(a.childNodes,function(a){return 1==a.nodeType})}function Zh(a){return void 0!=a.firstElementChild?a.firstElementChild:$h(a.firstChild)}function ai(a){return void 0!=a.nextElementSibling?a.nextElementSibling:$h(a.nextSibling)}function $h(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function bi(a){return oa(a)&&1==a.nodeType}
function ci(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function di(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var g=[],k=arguments[b];k;)g.unshift(k),k=k.parentNode;d.push(g);e=Math.min(e,g.length)}g=null;for(b=0;b<e;b++){for(var k=d[0][b],l=1;l<c;l++)if(k!=d[l][b])return g;g=k}return g}function Gh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ei(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Wh(a),a.appendChild(Gh(a).createTextNode(String(b)))}var fi={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},gi={IMG:" ",BR:"\n"};function hi(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function ii(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function ji(a){a=a.tabIndex;return ma(a)&&0<=a&&32768>a}function ki(a){if(Dh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];li(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Dh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function mi(a){var b=[];li(a,b,!1);return b.join("")}
function li(a,b,c){if(!(a.nodeName in fi))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in gi)b.push(gi[a.nodeName]);else for(a=a.firstChild;a;)li(a,b,c),a=a.nextSibling}function Uh(a){if(a&&"number"==typeof a.length){if(oa(a))return"function"==typeof a.item||"string"==typeof a.item;if(na(a))return"function"==typeof a.item}return!1}
function ni(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return oi(a,function(a){return(!d||a.nodeName==d)&&(!c||ka(a.className)&&Lb(a.className.split(/\s+/),c))})}function oi(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Fh(a){this.Ia=a||ba.document||document}f=Fh.prototype;f.W=Eh;function pi(a){return a.Ia}f.a=function(a){return ka(a)?this.Ia.getElementById(a):a};f.HI=Fh.prototype.a;f.D=function(a,b,c){return Sh(this.Ia,arguments)};f.createElement=function(a){return this.Ia.createElement(a)};
f.createTextNode=function(a){return this.Ia.createTextNode(String(a))};function qi(a){return"CSS1Compat"==a.Ia.compatMode}function ri(a){a=a.Ia;return a.parentWindow||a.defaultView}function si(a){var b=a.Ia;a=Ph(b);b=b.parentWindow||b.defaultView;return kc&&uc("10")&&b.pageYOffset!=a.scrollTop?new th(a.scrollLeft,a.scrollTop):new th(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.append=Vh;f.uy=Xh;f.removeNode=S;f.Sx=Yh;f.KE=Zh;f.contains=ci;
f.Pj=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!ii(a)||ji(a)):ii(a)&&ji(a))&&kc?(a=na(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function ti(a,b,c){ka(b)?ui(a,c,b):w(b,xa(ui,a))}function ui(a,b,c){a:if(c=bb(c),void 0===a.style[c]){var d=Ah()+db(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function vi(a,b){var c=Gh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function wi(a,b){return vi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function xi(a){return wi(a,"position")}
function yi(a,b,c){var d,e=lc&&(fc||pc)&&uc("1.9");b instanceof th?(d=b.x,b=b.y):(d=b,b=c);a.style.left=zi(d,e);a.style.top=zi(b,e)}function Ai(a){return new th(a.offsetLeft,a.offsetTop)}function Bi(a){a=a?Gh(a):document;return!kc||vc(9)||qi(Eh(a))?a.documentElement:a.body}
function Ci(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}kc&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Di(a){if(kc&&!vc(8))return a.offsetParent;var b=Gh(a),c=wi(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=wi(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ei(a){for(var b=new vh(0,Infinity,Infinity,0),c=Eh(a),d=c.Ia.body,e=c.Ia.documentElement,g=Ph(c.Ia);a=Di(a);)if(!(kc&&0==a.clientWidth||mc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=wi(a,"overflow")){var k=Fi(a),l;l=a;if(lc&&!uc("1.9")){var q=parseFloat(vi(l,"borderLeftWidth"));if(Gi(l))var p=l.offsetWidth-l.clientWidth-q-parseFloat(vi(l,"borderRightWidth")),q=q+p;l=new th(q,parseFloat(vi(l,"borderTopWidth")))}else l=new th(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=Oh(ri(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Fi(a){var b,c=Gh(a),d=wi(a,"position"),e=lc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new th(0,0),k=Bi(c);if(a==k)return g;if(a.getBoundingClientRect)b=Ci(a),a=si(Eh(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);
if(mc&&"fixed"==xi(b)){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(jc||mc&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Di(b))&&b!=c.body&&b!=k;)g.x-=b.scrollLeft,jc&&"TR"==b.tagName||(g.y-=b.scrollTop)}return g}function Hi(a,b){var c=Ii(a),d=Ii(b);return new th(c.x-d.x,c.y-d.y)}
function Ji(a){var b;if(a.getBoundingClientRect)b=Ci(a),b=new th(b.left,b.top);else{b=si(Eh(a));var c=Fi(a);b=new th(c.x-b.x,c.y-b.y)}if(lc&&!uc(12)){b:{c=bb("transform");if(void 0===a.style[c]&&(c=Ah()+db(c),void 0!==a.style[c])){c=(mc?"-webkit":lc?"-moz":kc?"-ms":jc?"-o":null)+"-transform";break b}c="transform"}a=(a=wi(a,c)||wi(a,"transform"))?(a=a.match(Li))?new th(parseFloat(a[1]),parseFloat(a[2])):new th(0,0):new th(0,0);a=new th(b.x+a.x,b.y+a.y)}else a=b;return a}
function Ii(a){if(1==a.nodeType)return Ji(a);var b=na(a.zM),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Nd.targetTouches&&(c=a.Nd.targetTouches[0]);return new th(c.clientX,c.clientY)}function Mi(a,b,c){if(b instanceof wh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Ni(a,b);Oi(a,c)}function zi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Oi(a,b){a.style.height=zi(b,!0)}function Ni(a,b){a.style.width=zi(b,!0)}
function Pi(a){var b=Qi;if("none"!=wi(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,g=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=g;c.visibility=e;return a}function Qi(a){var b=a.offsetWidth,c=a.offsetHeight,d=mc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new wh(b,c):(a=Ci(a),new wh(a.right-a.left,a.bottom-a.top))}function Ri(a){var b=Fi(a);a=Pi(a);return new yh(b.x,b.y,a.width,a.height)}
function Si(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Ti(a,b){a.style.display=b?"":"none"}function Ui(a){kc&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Gi(a){return"rtl"==wi(a,"direction")}var Vi=lc?"MozUserSelect":mc?"WebkitUserSelect":null;
function Wi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Vi){if(b=b?"none":"",a.style[Vi]=b,c){a=0;for(var d;d=c[a];a++)d.style[Vi]=b}}else if(kc||jc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Xi(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Yi(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Xi(a,c):0}function Zi(a,b){if(kc){var c=Yi(a,b+"Left"),d=Yi(a,b+"Right"),e=Yi(a,b+"Top"),g=Yi(a,b+"Bottom");return new vh(e,d,g,c)}c=vi(a,b+"Left");d=vi(a,b+"Right");e=vi(a,b+"Top");g=vi(a,b+"Bottom");return new vh(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var $i={thin:2,medium:4,thick:6};
function aj(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in $i?$i[c]:Xi(a,c)}function bj(a){if(kc&&!vc(9)){var b=aj(a,"borderLeft"),c=aj(a,"borderRight"),d=aj(a,"borderTop");a=aj(a,"borderBottom");return new vh(d,c,a,b)}b=vi(a,"borderLeftWidth");c=vi(a,"borderRightWidth");d=vi(a,"borderTopWidth");a=vi(a,"borderBottomWidth");return new vh(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Li=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function cj(a){Bc.call(this);this.ge=a;this.Jb={}}m(cj,Bc);var dj=[];f=cj.prototype;f.F=function(a,b,c,d){ia(b)||(b&&(dj[0]=b.toString()),b=dj);for(var e=0;e<b.length;e++){var g=C(a,b[e],c||this.handleEvent,d||!1,this.ge||this);if(!g)break;this.Jb[g.key]=g}return this};f.Fy=function(a,b,c,d){return ej(this,a,b,c,d)};function ej(a,b,c,d,e,g){if(ia(c))for(var k=0;k<c.length;k++)ej(a,b,c[k],d,e,g);else{b=Xc(b,c,d||a.handleEvent,e,g||a.ge||a);if(!b)return a;a.Jb[b.key]=b}return a}
f.Ub=function(a,b,c,d,e){if(ia(b))for(var g=0;g<b.length;g++)this.Ub(a,b[g],c,d,e);else c=c||this.handleEvent,e=e||this.ge||this,c=Qc(c),d=!!d,b=ib(a)?a.Pq(b,c,d,e):a?(a=Tc(a))?a.Pq(b,c,d,e):null:null,b&&(Zc(b),delete this.Jb[b.key]);return this};f.eh=function(){w(this.Jb,Zc);this.Jb={}};f.g=function(){cj.d.g.call(this);this.eh()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function fj(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=xi(a)||(c=Gh(a).documentElement);if(!c)return b;if(lc)var d=bj(c),b=b+d.left;else vc(8)&&(d=bj(c),b-=d.left);return Gi(c)?c.clientWidth-(b+a.offsetWidth):b};function gj(a,b,c){ed.call(this);this.target=a;this.handle=b||a;this.Ey=c||new yh(NaN,NaN,NaN,NaN);this.Ia=Gh(a);this.vd=new cj(this);Ec(this,xa(Fc,this.vd));C(this.handle,["touchstart","mousedown"],this.as,!1,this)}m(gj,ed);var hj=kc||lc&&uc("1.9.3");f=gj.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.oA=0;f.pA=0;f.Fj=0;f.af=0;f.Md=!0;f.Zk=!1;f.EF=0;f.Iu=0;f.GO=!1;f.zn=!1;f.al=function(a){this.zn=a};f.Fb=function(){return this.vd};function ij(a,b){a.Ey=b||new yh(NaN,NaN,NaN,NaN)}
f.BH=function(a){this.iv=a};f.ld=function(a){this.Md=a};f.g=function(){gj.d.g.call(this);Yc(this.handle,["touchstart","mousedown"],this.as,!1,this);this.vd.eh();hj&&this.Ia.releaseCapture();this.handle=this.target=null};function jj(a){ca(a.Ui)||(a.Ui=Gi(a.target));return a.Ui}
f.as=function(a){var b="mousedown"==a.type;if(!this.Md||this.Zk||b&&!Mc(a))this.dispatchEvent("earlycancel");else{kj(a);if(0==this.EF)if(this.dispatchEvent(new lj("start",this,a.clientX,a.clientY)))this.Zk=!0,a.preventDefault();else return;else a.preventDefault();var b=this.Ia,c=b.documentElement,d=!hj;this.vd.F(b,["touchmove","mousemove"],this.wO,d);this.vd.F(b,["touchend","mouseup"],this.bl,d);hj?(c.setCapture(!1),this.vd.F(c,"losecapture",this.bl)):this.vd.F(Qh(b),"blur",this.bl);kc&&this.GO&&
this.vd.F(b,"dragstart",Ic);this.iv&&this.vd.F(this.iv,"scroll",this.fp,d);this.clientX=this.oA=a.clientX;this.clientY=this.pA=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Fj=this.zn?fj(this.target):this.target.offsetLeft;this.af=this.target.offsetTop;this.Gz=si(Eh(this.Ia));this.Iu=ya()}};
f.bl=function(a,b){this.vd.eh();hj&&this.Ia.releaseCapture();if(this.Zk){kj(a);this.Zk=!1;var c=mj(this,this.Fj),d=nj(this,this.af);this.dispatchEvent(new lj("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function kj(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.Ja(a.Nd.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.Ja(a.Nd.changedTouches[0],a.currentTarget)}
f.wO=function(a){if(this.Md){kj(a);var b=(this.zn&&jj(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Zk){var d=this.oA-this.clientX,e=this.pA-this.clientY;if(d*d+e*e>this.EF)if(this.dispatchEvent(new lj("start",this,a.clientX,a.clientY)))this.Zk=!0;else{this.Gm||this.bl(a);return}}c=oj(this,b,c);b=c.x;c=c.y;this.Zk&&this.dispatchEvent(new lj("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(pj(this,a,b,c),a.preventDefault())}};function oj(a,b,c){var d=si(Eh(a.Ia));b+=d.x-a.Gz.x;c+=d.y-a.Gz.y;a.Gz=d;a.Fj+=b;a.af+=c;b=mj(a,a.Fj);a=nj(a,a.af);return new th(b,a)}f.fp=function(a){var b=oj(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;pj(this,a,b.x,b.y)};function pj(a,b,c,d){a.xx(c,d);a.dispatchEvent(new lj("drag",a,b.clientX,b.clientY,0,c,d))}
function mj(a,b){var c=a.Ey,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function nj(a,b){var c=a.Ey,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.xx=function(a,b){this.zn&&jj(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.Wh=function(){return this.Zk};
function lj(a,b,c,d,e,g,k,l){Hc.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(g)?g:b.Fj;this.top=ca(k)?k:b.af;this.Fx=b;this.WL=!!l}m(lj,Hc);Bb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function qj(){this.Pz="";this.NJ=rj;this.SD=null}qj.prototype.EE=function(){return this.SD};qj.prototype.toString=function(){return"SafeHtml{"+this.Pz+"}"};function sj(a){if(a instanceof qj&&a.constructor===qj&&a.NJ===rj)return a.Pz;gb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}Bb("action","cite","data","formaction","href","manifest","poster","src");Bb("link","script","style");var rj={};function tj(a,b){var c=new qj;c.Pz=a;c.SD=b;return c}var uj=tj("",0);function vj(){}fa(vj);vj.prototype.vG=0;function wj(a){ed.call(this);this.Sb=a||Eh();this.Ui=xj;this.Rg=null;this.ya=!1;this.o=null;this.ll=void 0;this.Kh=this.Kd=this.kb=this.Vy=null;this.AI=!1}m(wj,ed);wj.prototype.EO=vj.Ef();var xj=null;
function yj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function zj(a){return a.Rg||(a.Rg=":"+(a.EO.vG++).toString(36))}function Aj(a,b){a.kb&&a.kb.Kh&&(vb(a.kb.Kh,a.Rg),wb(a.kb.Kh,b,a));a.Rg=b}f=wj.prototype;f.a=function(){return this.o};
f.Fb=function(){this.ll||(this.ll=new cj(this));return this.ll};f.Or=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.kb&&this.Rg&&Bj(this.kb,this.Rg)&&this.kb!=a)throw Error("Unable to set parent component");this.kb=a;wj.d.aA.call(this,a)};f.getParent=function(){return this.kb};f.aA=function(a){if(this.kb&&this.kb!=a)throw Error("Method not supported");wj.d.aA.call(this,a)};f.W=function(){return this.Sb};f.D=function(){this.o=this.Sb.createElement("div")};f.n=function(a){this.Ti(a)};
f.Ti=function(a,b){if(this.ya)throw Error("Component already rendered");this.o||this.D();a?a.insertBefore(this.o,b||null):this.Sb.Ia.body.appendChild(this.o);this.kb&&!this.kb.ya||this.Db()};f.jc=function(a){if(this.ya)throw Error("Component already rendered");if(a&&this.hg(a)){this.AI=!0;var b=Gh(a);this.Sb&&this.Sb.Ia==b||(this.Sb=Eh(a));this.yf(a);this.Db()}else throw Error("Invalid element to decorate");};f.hg=function(){return!0};f.yf=function(a){this.o=a};
f.Db=function(){this.ya=!0;Cj(this,function(a){!a.ya&&a.a()&&a.Db()})};f.wd=function(){Cj(this,function(a){a.ya&&a.wd()});this.ll&&this.ll.eh();this.ya=!1};f.g=function(){this.ya&&this.wd();this.ll&&(this.ll.i(),delete this.ll);Cj(this,function(a){a.i()});!this.AI&&this.o&&S(this.o);this.kb=this.Vy=this.o=this.Kh=this.Kd=null;wj.d.g.call(this)};f.jq=function(a,b){this.Iw(a,Dj(this),b)};
f.Iw=function(a,b,c){if(a.ya&&(c||!this.ya))throw Error("Component already rendered");if(0>b||b>Dj(this))throw Error("Child component index out of bounds");this.Kh&&this.Kd||(this.Kh={},this.Kd=[]);if(a.getParent()==this){var d=zj(a);this.Kh[d]=a;Ob(this.Kd,a)}else wb(this.Kh,zj(a),a);a.Or(this);Sb(this.Kd,b,0,a);a.ya&&this.ya&&a.getParent()==this?(c=this.Eb(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.o||this.D(),b=Ej(this,b+1),a.Ti(this.Eb(),b?b.o:null)):this.ya&&!a.ya&&a.o&&a.o.parentNode&&
1==a.o.parentNode.nodeType&&a.Db()};f.Eb=function(){return this.o};f.qg=function(){null==this.Ui&&(this.Ui=Gi(this.ya?this.o:this.Sb.Ia.body));return this.Ui};f.kp=function(a){if(this.ya)throw Error("Component already rendered");this.Ui=a};function Dj(a){return a.Kd?a.Kd.length:0}function Bj(a,b){var c;a.Kh&&b?(c=a.Kh,c=(b in c?c[b]:void 0)||null):c=null;return c}function Ej(a,b){return a.Kd?a.Kd[b]||null:null}function Cj(a,b,c){a.Kd&&A(a.Kd,b,c)}function Fj(a,b){return a.Kd&&b?Db(a.Kd,b):-1}
f.removeChild=function(a,b){if(a){var c=ka(a)?a:zj(a);a=Bj(this,c);c&&a&&(vb(this.Kh,c),Ob(this.Kd,a),b&&(a.wd(),a.o&&S(a.o)),a.Or(null))}if(!a)throw Error("Child is not in parent component");return a};function Gj(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!lc;default:return 166>a.keyCode||183<a.keyCode}}
function Hj(a,b,c,d,e){if(!(kc||mc&&uc("525")))return!0;if(fc&&e)return Ij(a);if(e&&!d)return!1;ma(b)&&(b=Jj(b));if(!c&&(17==b||18==b||fc&&91==b))return!1;if(mc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(kc&&d&&b==a)return!1;switch(a){case 13:return!(kc&&vc(9));case 27:return!mc}return Ij(a)}
function Ij(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||mc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Jj(a){if(lc)a=Kj(a);else if(fc&&mc)a:switch(a){case 93:a=91;break a}return a}
function Kj(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Lj(a,b){ed.call(this);this.ge=new cj(this);this.Xz(a||null);b&&(this.up=b)}m(Lj,ed);f=Lj.prototype;f.o=null;f.aL=!0;f.VC=null;f.WC=null;f.Wo=!1;f.bS=!1;f.Ay=-1;f.CO=!1;f.ZL=!0;f.up="toggle_display";f.a=function(){return this.o};f.Xz=function(a){if(this.Wo)throw Error("Can not change this state of the popup while showing.");this.o=a};f.HH=function(a,b){this.mp=a;this.Oo=b};f.Fb=function(){return this.ge};f.bb=function(){return this.Wo};
f.wa=function(a){this.mp&&this.mp.stop();this.Oo&&this.Oo.stop();a?this.hA():this.Po()};f.ef=ea;
f.hA=function(){if(!this.Wo&&this.iz()){if(!this.o)throw Error("Caller must call setElement before trying to show the popup");this.ef();var a=Gh(this.o);this.CO&&this.ge.F(a,"keydown",this.NP,!0);if(this.aL)if(this.ge.F(a,"mousedown",this.AG,!0),kc){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.ge.F(a,"mousedown",this.AG,!0);this.ge.F(a,"deactivate",this.zG)}else this.ge.F(a,"blur",
this.zG);"toggle_display"==this.up?(this.o.style.visibility="visible",Ti(this.o,!0)):"move_offscreen"==this.up&&this.ef();this.Wo=!0;this.Ay=ya();this.mp?(Xc(this.mp,"end",this.GG,!1,this),this.mp.play()):this.GG()}};f.Po=function(a){if(!this.Wo||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.ge&&this.ge.eh();this.Wo=!1;ya();this.Oo?(Xc(this.Oo,"end",xa(this.pD,a),!1,this),this.Oo.play()):this.pD(a);return!0};
f.pD=function(a){"toggle_display"==this.up?this.bS?Wf(this.DF,0,this):this.DF():"move_offscreen"==this.up&&(this.o.style.top="-10000px");this.oz(a)};f.DF=function(){this.o.style.visibility="hidden";Ti(this.o,!1)};f.iz=function(){return this.dispatchEvent("beforeshow")};f.GG=function(){this.dispatchEvent("show")};f.oz=function(a){this.dispatchEvent({type:"hide",target:a})};f.AG=function(a){a=a.target;ci(this.o,a)||Mj(this,a)||this.WC&&!ci(this.WC,a)||150>ya()-this.Ay||this.Po(a)};
f.NP=function(a){27==a.keyCode&&this.Po(a.target)&&(a.preventDefault(),a.stopPropagation())};f.zG=function(a){if(this.ZL){var b=Gh(this.o);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||ci(this.o,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.Ay||this.Po()}};function Mj(a,b){return Hb(a.VC||[],function(a){return b===a||ci(a,b)})}f.g=function(){Lj.d.g.call(this);this.ge.i();Fc(this.mp);Fc(this.Oo);delete this.o;delete this.ge;delete this.VC};function Nj(a){if(a.classList)return a.classList;a=a.className;return ka(a)&&a.match(/\S+/g)||[]}function Oj(a,b){return a.classList?a.classList.contains(b):Lb(Nj(a),b)}function Pj(a,b){a.classList?a.classList.add(b):Oj(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Qj(a,b){if(a.classList)A(b,function(b){Pj(a,b)});else{var c={};A(Nj(a),function(a){c[a]=!0});A(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function Rj(a,b){a.classList?a.classList.remove(b):Oj(a,b)&&(a.className=Eb(Nj(a),function(a){return a!=b}).join(" "))}function Sj(a,b){a.classList?A(b,function(b){Rj(a,b)}):a.className=Eb(Nj(a),function(a){return!Lb(b,a)}).join(" ")}function Tj(a,b,c){c?Pj(a,b):Rj(a,b)};var Uj;function Vj(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Wj(a,b,c){ja(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Uj||(Uj={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Uj,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Xj(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Yj(a){ed.call(this);this.o=a;a=kc?"focusout":"blur";this.fP=C(this.o,kc?"focusin":"focus",this,!kc);this.gP=C(this.o,a,this,!kc)}m(Yj,ed);Yj.prototype.handleEvent=function(a){var b=new Kc(a.Nd);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};Yj.prototype.g=function(){Yj.d.g.call(this);Zc(this.fP);Zc(this.gP);delete this.o};function Zj(a,b){wj.call(this,b);this.FS=!!a;this.kr=null}m(Zj,wj);f=Zj.prototype;f.Px=null;f.Ad=!1;f.gg=null;f.se=null;f.ii=null;f.Qw=!1;f.ja=function(){return"goog-modalpopup"};f.Fo=function(){return this.gg};f.D=function(){Zj.d.D.call(this);var a=this.a(),b=Ka(this.ja()).split(" ");Qj(a,b);hi(a,!0);Ti(a,!1);ak(this);bk(this)};
function ak(a){if(a.FS&&!a.se){var b;b=a.W().D("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.se=b;a.se.className=a.ja()+"-bg";Ti(a.se,!1);Si(a.se,0)}a.gg||(a.gg=a.W().D("div",a.ja()+"-bg"),Ti(a.gg,!1))}function bk(a){a.ii||(a.ii=a.W().createElement("span"),Ti(a.ii,!1),hi(a.ii,!0),a.ii.style.position="absolute")}f.bH=function(){this.Qw=!1};f.hg=function(a){return!!a&&"DIV"==a.tagName};
f.yf=function(a){Zj.d.yf.call(this,a);a=Ka(this.ja()).split(" ");Qj(this.a(),a);ak(this);bk(this);Ti(this.a(),!1)};f.Db=function(){this.se&&Xh(this.se,this.a());Xh(this.gg,this.a());Zj.d.Db.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.ii,a.nextSibling);this.Px=new Yj(pi(this.W()));this.Fb().F(this.Px,"focusin",this.SP);ck(this,!1)};f.wd=function(){this.bb()&&this.wa(!1);Fc(this.Px);Zj.d.wd.call(this);S(this.se);S(this.gg);S(this.ii)};
f.wa=function(a){a!=this.Ad&&(this.mn&&this.mn.stop(),this.po&&this.po.stop(),this.ln&&this.ln.stop(),this.oo&&this.oo.stop(),this.ya&&ck(this,a),a?this.hA():this.Po())};function ck(a,b){if(b){a.Mo||(a.Mo=[]);for(var c=a.W(),c=c.Sx(c.Ia.body),d=0;d<c.length;d++){var e=c[d];e==a.o||Xj(e,"hidden")||(Wj(e,"hidden",!0),a.Mo.push(e))}}else if(a.Mo){for(d=0;d<a.Mo.length;d++)a.Mo[d].removeAttribute("aria-hidden");a.Mo=null}}f.HH=function(a,b,c,d){this.mn=a;this.ln=b;this.po=c;this.oo=d};
f.hA=function(){if(this.dispatchEvent("beforeshow")){try{this.kr=pi(this.W()).activeElement}catch(a){}this.Uz();this.ef();this.Fb().F(ri(this.W()),"resize",this.Uz);dk(this,!0);this.focus();this.Ad=!0;this.mn&&this.po?(Xc(this.mn,"end",this.Tu,!1,this),this.po.play(),this.mn.play()):this.Tu()}};
f.Po=function(){if(this.dispatchEvent("beforehide")){this.Fb().Ub(ri(this.W()),"resize",this.Uz);this.Ad=!1;this.ln&&this.oo?(Xc(this.ln,"end",this.Ou,!1,this),this.oo.play(),this.ln.play()):this.Ou();try{var a=pi(this.W()).body,b=pi(this.W()).activeElement||a;this.kr&&b==a&&this.kr!=a&&this.kr.focus()}catch(c){}this.kr=null}};function dk(a,b){a.se&&Ti(a.se,b);a.gg&&Ti(a.gg,b);Ti(a.a(),b);Ti(a.ii,b)}f.Tu=function(){this.dispatchEvent("show")};f.Ou=function(){dk(this,!1);this.dispatchEvent("hide")};
f.bb=function(){return this.Ad};f.focus=function(){this.oE()};f.Uz=function(){this.se&&Ti(this.se,!1);this.gg&&Ti(this.gg,!1);var a=pi(this.W()),b=Oh(Qh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.se&&(Ti(this.se,!0),Mi(this.se,c,a));this.gg&&(Ti(this.gg,!0),Mi(this.gg,c,a))};
f.ef=function(){var a=pi(this.W()),b=Qh(a)||window;if("fixed"==xi(this.a()))var c=a=0;else c=si(this.W()),a=c.x,c=c.y;var d=Pi(this.a()),b=Oh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);yi(this.a(),a,c);yi(this.ii,a,c)};f.SP=function(a){this.Qw?this.bH():a.target==this.ii&&Wf(this.oE,0,this)};f.oE=function(){try{kc&&pi(this.W()).body.focus(),this.a().focus()}catch(a){}};
f.g=function(){Fc(this.mn);this.mn=null;Fc(this.ln);this.ln=null;Fc(this.po);this.po=null;Fc(this.oo);this.oo=null;Zj.d.g.call(this)};function ek(a,b,c){Zj.call(this,b,c);this.$e=a||"modal-dialog";this.ka=fk(fk(new gk,hk,!0),ik,!1,!0)}m(ek,Zj);f=ek.prototype;f.cE=!0;f.ly=!0;f.Uy=!0;f.Nt=!0;f.wt=.5;f.me="";f.Ld=null;f.tb=null;f.QL=!1;f.He=null;f.hf=null;f.Cv=null;f.Of=null;f.Mh=null;f.be=null;f.Nz="dialog";f.ja=function(){return this.$e};f.gh=function(a){this.me=a;this.hf&&ei(this.hf,a)};f.ng=function(){return this.me};f.Cl=function(a){this.Ld=a=tj(a,null);this.Mh&&(this.Mh.innerHTML=sj(a))};
f.Df=function(){return null!=this.Ld?sj(this.Ld):""};f.il=function(){return this.Nz};f.Eb=function(){this.a()||this.n();return this.Mh};f.dF=function(){this.a()||this.n();return this.He};f.Fo=function(){this.a()||this.n();return ek.d.Fo.call(this)};function jk(a,b){a.wt=b;if(a.a()){var c=a.Fo();c&&Si(c,a.wt)}}function kk(a,b){b!=a.Uy&&lk(a,b)}function lk(a,b){a.Uy=b;if(a.ya){var c=a.W(),d=a.Fo(),e=a.se;b?(e&&c.uy(e,a.a()),c.uy(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.bb()&&ck(a,b)}
f.rv=function(a){this.Nt=a;this.Lr(a&&this.ya)};f.Lr=function(a){var b=Ka(this.$e+"-title-draggable").split(" ");this.a()&&(a?Qj(this.He,b):Sj(this.He,b));a&&!this.tb?(this.tb=new gj(this.a(),this.He),Qj(this.He,b),C(this.tb,"start",this.sv,!1,this)):!a&&this.tb&&(this.tb.i(),this.tb=null)};
f.D=function(){ek.d.D.call(this);var a=this.a(),b=this.W();this.He=b.D("div",this.$e+"-title",this.hf=b.D("span",{className:this.$e+"-title-text",id:zj(this)},this.me),this.Of=b.D("span",this.$e+"-title-close"));Vh(a,this.He,this.Mh=b.D("div",this.$e+"-content"),this.be=b.D("div",this.$e+"-buttons"));Vj(this.hf,"heading");Vj(this.Of,"button");hi(this.Of,!0);Wj(this.Of,"label",mk);this.Cv=this.hf.id;Vj(a,this.il());Wj(a,"labelledby",this.Cv||"");this.Ld&&(this.Mh.innerHTML=sj(this.Ld));Ti(this.Of,
this.ly);this.ka&&(a=this.ka,a.o=this.be,a.n());Ti(this.be,!!this.ka);jk(this,this.wt)};
f.yf=function(a){ek.d.yf.call(this,a);a=this.a();var b=this.$e+"-content";this.Mh=Ih(null,b,a)[0];this.Mh||(this.Mh=this.W().D("div",b),this.Ld&&(this.Mh.innerHTML=sj(this.Ld)),a.appendChild(this.Mh));var b=this.$e+"-title",c=this.$e+"-title-text",d=this.$e+"-title-close";(this.He=Ih(null,b,a)[0])?(this.hf=Ih(null,c,this.He)[0],this.Of=Ih(null,d,this.He)[0]):(this.He=this.W().D("div",b),a.insertBefore(this.He,this.Mh));this.hf?(this.me=ki(this.hf),this.hf.id||(this.hf.id=zj(this))):(this.hf=Rh("span",
{className:c,id:zj(this)}),this.He.appendChild(this.hf));this.Cv=this.hf.id;Wj(a,"labelledby",this.Cv||"");this.Of||(this.Of=this.W().D("span",d),this.He.appendChild(this.Of));Ti(this.Of,this.ly);b=this.$e+"-buttons";(this.be=Ih(null,b,a)[0])?(this.ka=new gk(this.W()),this.ka.jc(this.be)):(this.be=this.W().D("div",b),a.appendChild(this.be),this.ka&&(a=this.ka,a.o=this.be,a.n()),Ti(this.be,!!this.ka));jk(this,this.wt)};
f.Db=function(){ek.d.Db.call(this);this.Fb().F(this.a(),"keydown",this.Yj).F(this.a(),"keypress",this.Yj);this.Fb().F(this.be,"click",this.KP);this.Lr(this.Nt);this.Fb().F(this.Of,"click",this.EQ);var a=this.a();Vj(a,this.il());""!==this.hf.id&&Wj(a,"labelledby",this.hf.id);this.Uy||lk(this,!1)};f.wd=function(){this.bb()&&this.wa(!1);this.Lr(!1);ek.d.wd.call(this)};f.wa=function(a){a!=this.bb()&&(this.ya||this.n(),ek.d.wa.call(this,a))};f.Tu=function(){ek.d.Tu.call(this);this.dispatchEvent(nk)};
f.Ou=function(){ek.d.Ou.call(this);this.dispatchEvent(ok);this.QL&&this.i()};f.sv=function(){var a=pi(this.W()),b=Oh(Qh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=Pi(this.a());"fixed"==xi(this.a())?ij(this.tb,new yh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):ij(this.tb,new yh(0,0,c-d.width,a-d.height))};f.EQ=function(){pk(this)};
function pk(a){if(a.ly){var b=a.ka,c=b&&b.Zw;c?(b=b.get(c),a.dispatchEvent(new qk(c,b))&&a.wa(!1)):a.wa(!1)}}f.g=function(){this.be=this.Of=null;ek.d.g.call(this)};function rk(a,b){a.ka=b;if(a.be){if(a.ka){var c=a.ka;c.o=a.be;c.n()}else a.be.innerHTML=sj(uj);Ti(a.be,!!a.ka)}}f.KP=function(a){a:{for(a=a.target;null!=a&&a!=this.be;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.ka.get(a);this.dispatchEvent(new qk(a,b))&&this.wa(!1)}};
f.Yj=function(a){var b=!1,c=!1,d=this.ka,e=a.target;if("keydown"==a.type)if(this.cE&&27==a.keyCode){var g=d&&d.Zw,e="SELECT"==e.tagName&&!e.disabled;g&&!e?(c=!0,b=d.get(g),b=this.dispatchEvent(new qk(g,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.Qw=!0;try{this.ii.focus()}catch(k){}Wf(this.bH,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)g=e.name;else if(e==this.Of)pk(this);else if(d){var l=d.yx,q;if(q=l)a:{q=d.o.getElementsByTagName("BUTTON");for(var p=
0,s;s=q[p];p++)if(s.name==l||s.id==l){q=s;break a}q=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!q||q.disabled||e||(g=l)}g&&d&&(c=!0,b=this.dispatchEvent(new qk(g,String(d.get(g)))))}else e==this.Of&&32==a.keyCode&&pk(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.wa(!1)};function qk(a,b){this.type=sk;this.key=a;this.caption=b}m(qk,Hc);var sk="dialogselect",ok="afterhide",nk="aftershow";function gk(a){this.Sb=a||Eh();od.call(this)}var tk;m(gk,od);
f=gk.prototype;f.$e="goog-buttonset";f.yx=null;f.o=null;f.Zw=null;f.set=function(a,b,c,d){od.prototype.set.call(this,a,b);c&&(this.yx=a);d&&(this.Zw=a);return this};function fk(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.n=function(){if(this.o){this.o.innerHTML=sj(uj);var a=Eh(this.o);this.forEach(function(b,c){var d=a.D("button",{name:c},b);c==this.yx&&(d.className=this.$e+"-default");this.o.appendChild(d)},this)}};
f.jc=function(a){if(a&&1==a.nodeType){this.o=a;a=this.o.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=ki(c)||c.value,d){var g=0==b;this.set(d,e,g,c.name==uk);g&&Pj(c,this.$e+"-default")}}};f.a=function(){return this.o};f.W=function(){return this.Sb};var uk="cancel",mk="Close",hk={key:"ok",caption:"OK"},ik={key:uk,caption:"Cancel"},vk={key:"yes",caption:"Yes"},wk={key:"no",caption:"No"},xk={key:"save",caption:"Save"},yk={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(fk(new gk,hk,!0,!0),fk(fk(new gk,hk,!0),ik,!1,!0),tk=fk(fk(new gk,vk,!0),wk,!1,!0),fk(fk(fk(new gk,vk),wk,!0),ik,!1,!0),fk(fk(fk(new gk,yk),xk),ik,!0,!0));function zk(){}h("nrg.string",zk);zk.mq=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")};zk.dirname=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")};zk.Ut=function(a){if(null!=a)return a="array"==ha(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()};zk.mM=function(a,b){return zk.mq(a)===zk.mq(b)};zk.bI=function(a){return a.replace(/\W/g,"")};zk.nS=function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")};
zk.eN=function(a){return zk.bI(a).replace(/[0-9]/g,"")};zk.GR=function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)};zk.DS=function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a};zk.Kb=function(a,b){return a.toLowerCase().replace(/\.|_/g,"-")+"-"+b.toLowerCase().replace(/\.|_/g,"-")};h("nrg.string.basename",zk.mq);
h("nrg.string.dirname",zk.dirname);h("nrg.string.getFileExtension",zk.Ut);h("nrg.string.fileNameMatch",zk.mM);h("nrg.string.stripNonAlphanumeric",zk.bI);h("nrg.string.stripIllegal",zk.nS);h("nrg.string.getLettersOnly",zk.eN);h("nrg.string.replaceIllegal",zk.GR);h("nrg.string.truncateString",zk.DS);h("nrg.string.makeCssName",zk.Kb);function Ak(a,b,c){Bc.call(this);this.Gy=a;this.To=b||0;this.ge=c;this.nL=wa(this.SL,this)}m(Ak,Bc);f=Ak.prototype;f.Rg=0;f.g=function(){Ak.d.g.call(this);this.stop();delete this.Gy;delete this.ge};f.start=function(a){this.stop();this.Rg=Wf(this.nL,ca(a)?a:this.To)};f.stop=function(){this.Li()&&ba.clearTimeout(this.Rg);this.Rg=0};f.Li=function(){return 0!=this.Rg};f.SL=function(){this.Rg=0;this.Gy&&this.Gy.call(this.ge)};var tb={},Bk=null;function Ck(a){a=pa(a);delete tb[a];rb()&&Bk&&Bk.stop()}function Dk(){Bk||(Bk=new Ak(function(){Ek()},20));var a=Bk;a.Li()||a.start()}function Ek(){var a=ya();w(tb,function(b){Fk(b,a)});rb()||Dk()};function Gk(){ed.call(this);this.ba=Hk;this.endTime=this.startTime=null}m(Gk,ed);var Hk=0;Gk.prototype.Xj=function(){this.ee("begin")};Gk.prototype.De=function(){this.ee("end")};Gk.prototype.ee=function(a){this.dispatchEvent(a)};function Ik(a,b,c,d){Gk.call(this);if(!ia(a)||!ia(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.bs=a;this.aM=b;this.duration=c;this.iC=d;this.coords=[];this.zn=!1}m(Ik,Gk);f=Ik.prototype;f.al=function(a){this.zn=a};f.bh=0;
f.play=function(a){if(a||this.ba==Hk)this.bh=0,this.coords=this.bs;else if(1==this.ba)return!1;Ck(this);this.startTime=a=ya();-1==this.ba&&(this.startTime-=this.duration*this.bh);this.endTime=this.startTime+this.duration;this.bh||this.Xj();this.ee("play");-1==this.ba&&this.ee("resume");this.ba=1;var b=pa(this);b in tb||(tb[b]=this);Dk();Fk(this,a);return!0};f.stop=function(a){Ck(this);this.ba=Hk;a&&(this.bh=1);Jk(this,this.bh);this.ee("stop");this.De()};
f.g=function(){this.ba==Hk||this.stop(!1);this.ee("destroy");Ik.d.g.call(this)};f.Kg=function(){this.i()};function Fk(a,b){a.bh=(b-a.startTime)/(a.endTime-a.startTime);1<=a.bh&&(a.bh=1);Jk(a,a.bh);1==a.bh?(a.ba=Hk,Ck(a),a.ee("finish"),a.De()):1==a.ba&&a.gz()}function Jk(a,b){na(a.iC)&&(b=a.iC(b));a.coords=Array(a.bs.length);for(var c=0;c<a.bs.length;c++)a.coords[c]=(a.aM[c]-a.bs[c])*b+a.bs[c]}f.gz=function(){this.ee("animate")};f.ee=function(a){this.dispatchEvent(new Kk(a,this))};
function Kk(a,b){Hc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.bh=b.bh;this.state=b.ba}m(Kk,Hc);var Lk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Mk(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Nk.test(c))return b.Lo=Ok(c),b.type="hex",b;a:{var d=a.match(Pk);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.Lo=Qk(c),b.type="rgb",b;if(Lk&&(c=Lk[a.toLowerCase()]))return b.Lo=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Rk=/#(.)(.)(.)/;
function Ok(a){if(!Nk.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Rk,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Sk(a){a=Ok(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Qk(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Vk(b.toString(16));c=Vk(c.toString(16));a=Vk(a.toString(16));return"#"+b+c+a}var Nk=/^#(?:[0-9a-f]{3}){1,2}$/i,Pk=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Vk(a){return 1==a.length?"0"+a:a}
function Wk(a,b,c){var d=0,e=0,g=0;if(0==b)g=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var q=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=q;e=c;g=a;break;case 2:d=a;e=c;g=b;break;case 3:d=a;e=q;g=c;break;case 4:d=b;e=a;g=c;break;case 5:d=c;e=a;g=q;break;case 6:case 0:d=c,e=b,g=a}}return[Math.floor(d),Math.floor(e),Math.floor(g)]};function Xk(a,b,c,d,e){Ik.call(this,b,c,d,e);this.element=a}m(Xk,Ik);f=Xk.prototype;f.m=ea;f.qg=function(){ca(this.Ui)||(this.Ui=Gi(this.element));return this.Ui};f.gz=function(){this.m();Xk.d.gz.call(this)};f.De=function(){this.m();Xk.d.De.call(this)};f.Xj=function(){this.m();Xk.d.Xj.call(this)};function Yk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Xk.apply(this,arguments)}m(Yk,Xk);
Yk.prototype.m=function(){var a=this.zn&&this.qg()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Zk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Xk.apply(this,arguments)}m(Zk,Xk);Zk.prototype.m=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function $k(a,b,c,d,e){Xk.call(this,a,[b],[c],d,e)}m($k,Xk);$k.prototype.m=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function al(a,b,c,d,e){Xk.call(this,a,[b],[c],d,e)}m(al,Xk);al.prototype.m=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function bl(a,b,c,d,e){ma(b)&&(b=[b]);ma(c)&&(c=[c]);Xk.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}m(bl,Xk);bl.prototype.m=function(){Si(this.element,this.coords[0])};
bl.prototype.show=function(){this.element.style.display=""};bl.prototype.No=function(){this.element.style.display="none"};function cl(a,b,c){bl.call(this,a,1,0,b,c)}m(cl,bl);function dl(a,b,c){bl.call(this,a,0,1,b,c)}m(dl,bl);function el(a,b,c){bl.call(this,a,1,0,b,c)}m(el,bl);el.prototype.Xj=function(){this.show();el.d.Xj.call(this)};el.prototype.De=function(){this.No();el.d.De.call(this)};function fl(a,b,c){bl.call(this,a,0,1,b,c)}m(fl,bl);fl.prototype.Xj=function(){this.show();fl.d.Xj.call(this)};
function gl(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Xk.apply(this,arguments)}m(gl,Xk);gl.prototype.qv=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};gl.prototype.m=function(){this.qv()};function hl(){Gk.call(this);this.kd=[]}m(hl,Gk);hl.prototype.add=function(a){Lb(this.kd,a)||(this.kd.push(a),C(a,"finish",this.hz,!1,this))};hl.prototype.remove=function(a){Ob(this.kd,a)&&Yc(a,"finish",this.hz,!1,this)};hl.prototype.g=function(){A(this.kd,function(a){a.i()});this.kd.length=0;hl.d.g.call(this)};function il(){hl.call(this);this.Nx=0}m(il,hl);
il.prototype.play=function(a){if(0==this.kd.length)return!1;if(a||this.ba==Hk)this.Nx=0,this.Xj();else if(1==this.ba)return!1;this.ee("play");-1==this.ba&&this.ee("resume");var b=-1==this.ba&&!a;this.startTime=ya();this.endTime=null;this.ba=1;A(this.kd,function(c){b&&-1!=c.ba||c.play(a)});return!0};il.prototype.stop=function(a){A(this.kd,function(b){b.ba==Hk||b.stop(a)});this.ba=Hk;this.endTime=ya();this.ee("stop");this.De()};
il.prototype.hz=function(){this.Nx++;this.Nx==this.kd.length&&(this.endTime=ya(),this.ba=Hk,this.ee("finish"),this.De())};function jl(){hl.call(this);this.Nh=0}m(jl,hl);jl.prototype.play=function(a){if(0==this.kd.length)return!1;if(a||this.ba==Hk)this.Nh<this.kd.length&&this.kd[this.Nh].ba!=Hk&&this.kd[this.Nh].stop(!1),this.Nh=0,this.Xj();else if(1==this.ba)return!1;this.ee("play");-1==this.ba&&this.ee("resume");this.startTime=ya();this.endTime=null;this.ba=1;this.kd[this.Nh].play(a);return!0};
jl.prototype.stop=function(a){this.ba=Hk;this.endTime=ya();if(a)for(a=this.Nh;a<this.kd.length;++a){var b=this.kd[a];b.ba==Hk&&b.play();b.ba==Hk||b.stop(!0)}else this.Nh<this.kd.length&&this.kd[this.Nh].stop(!1);this.ee("stop");this.De()};jl.prototype.hz=function(){1==this.ba&&(this.Nh++,this.Nh<this.kd.length?this.kd[this.Nh].play():(this.endTime=ya(),this.ba=Hk,this.ee("finish"),this.De()))};function kl(){}h("nrg.convert",kl);kl.cR=function(a){if(!ma(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"};kl.OG=function(a){if(!ia(a)&&!ma(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}};
kl.XG=function(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}};kl.tp=function(a){if(!ka(a)&&!ma(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)};
kl.jk=function(a){if(!ka(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");A(a,function(a,d){b[d]=parseFloat(a,10)});return b};kl.GP=function(a){if(!oa(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b};kl.JR=function(a){if(!ka(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a};
kl.VK=function(a,b){if(!ia(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;A(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"};kl.jE=function(a){var b={};w(a,function(a,d){isNaN(a)?ka(a)&&(b[d]=a):b[d]=a});return b};kl.kE=function(a){var b={};w(a,function(a,d){ka(a)?0<a.length&&(b[d]=a):b[d]=a});return b};h("nrg.convert.pct",kl.cR);h("nrg.convert.px",kl.OG);h("nrg.convert.remap1D",kl.XG);h("nrg.convert.toInt",kl.tp);
h("nrg.convert.toFloatArray",kl.jk);h("nrg.convert.objectToArray",kl.GP);h("nrg.convert.rgbToArray",kl.JR);h("nrg.convert.arrayToRgb",kl.VK);h("nrg.convert.filterNaN",kl.jE);h("nrg.convert.filterZeroLengthStrings",kl.kE);function ll(){}h("nrg.style",ll);ll.HD="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
ll.yR=function(a,b){var c=oh(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)qh(a,d[e])};ll.qt=function(a){return a.getBoundingClientRect()};
ll.Ax=function(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return kl.tp(a.style[b]);var d=Hi(a,a.parentNode),d={left:kl.tp(a.style.left)||d.x,top:kl.tp(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?Hi(a,a.parentNode):
Hi(a,document.body),d={left:kl.tp(a.style.left)||d.x,top:kl.tp(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c};ll.KN=function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}};
ll.getComputedStyle=function(a,b){if(b&&ka(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=ll.HD);for(var c={},d=window.getComputedStyle(a,null),e=0,g=b.length,e=0;e<g;e++)c[b[e]]=d.getPropertyValue(b[e]);return ll.KG(c)};
ll.KG=function(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a};ll.pb=function(a,b){a&&b&&(a.style||(a.style={}),ti(a,b),A("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Ga(b[c],"%")&&(a.style[c]=kl.OG(b[c]))}))};ll.Tv="is_hovered_"+t();
ll.Fl=function(a,b,c,d,e,g){function k(){a[ll.Tv]=!1;qh(a,b);null!=g&&g()}function l(){a[ll.Tv]=!0;R(a,b);null!=e&&e()}C(a,"mouseover",l);C(a,"mouseout",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))};ll.uW=function(a,b,c,d){var e=Rh("div",{id:"tempEndStateElt"+Fa.FW()});a.parentNode.appendChild(e);e.className=b;c&&c(a,e);b=ll.getComputedStyle(a,d);d=ll.getComputedStyle(e,d);a.parentNode.removeChild(e);delete e;return{start:b,end:d}};
ll.yN=function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}};h("nrg.style.cssProperties",ll.HD);h("nrg.style.removeClassesThatContain",ll.yR);h("nrg.style.absolutePosition",ll.qt);h("nrg.style.dims",ll.Ax);h("nrg.style.getStyleSheet",ll.KN);h("nrg.style.getComputedStyle",ll.getComputedStyle);h("nrg.style.parseIntNumericalProperties",ll.KG);h("nrg.style.setStyle",ll.pb);h("nrg.style.IS_HOVERED",ll.Tv);
h("nrg.style.setHoverClass",ll.Fl);h("nrg.style.getPositionRelativeToAncestor",ll.yN);function ml(a){return 1-Math.pow(1-a,3)};function T(){}h("nrg.fx",T);T.Gq=function(a,b,c){void 0===b&&(b=500);T.lg(a,b,1,c)};T.Hq=function(a,b,c){void 0===b&&(b=500);T.lg(a,0,0,function(){T.lg(a,b,1,c)})};T.Pm=function(a,b,c){void 0===b&&(b=500);T.lg(a,b,0,c)};T.jM=function(a,b,c){void 0===b&&(b=500);T.lg(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})};
T.lg=function(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var g=new bl(a,e,c,b);d&&g.addEventListener("end",function(a){d(a);$c(g);delete g});g.play()};T.animGenStyles="left top width height opacity background-color color z-index".split(" ");
T.tE=function(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Yk(a,[b.left,b.top],[c.left,c.top],d,ml)};T.sE=function(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Zk(a,[b.width,b.height],[c.width,c.height],d,ml)};
T.Rx=function(a,b,c,d){if("opacity"in b||"opacity"in c)if(A([b,c],function(a){"opacity"in a||(a.opacity=1);ma(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new bl(a,b.opacity,c.opacity,d)};T.rE=function(a,b,c,d){if("visibility"in b||"visibility"in c)if(A([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new fl(a,d):new el(a,d)};
T.qE=function(a,b,c,d){if("background-color"in b||"background-color"in c){A([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=Mk(b["background-color"]),g=Mk(c["background-color"]);if(e.Lo!==g.Lo)return new gl(a,Sk(e),Sk(g),d,ml)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}};T.HB=function(a,b){this.ZK=a;this.zS=b};T.Mx=function(a){return kl.kE(kl.jE(a))};
T.gy=function(a){var b=Pi(a),c=Ai(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}};T.vE=function(a,b){var c=T.gy(a),c=T.Mx(c),d=T.gy(b),e=T.Mx(d);w(c,function(a,b){null!=e[b]||(e[b]=a)});return new T.HB(c,e)};
T.uE=function(a,b,c,d){var e=[];A(T.animGenStyles,function(g){if(null!=b&&null!=c)switch(g){case "left":e.push(T.tE(a,b,c,d));break;case "height":e.push(T.sE(a,b,c,d));break;case "opacity":e.push(T.Rx(a,b,c,d));break;case "visibility":e.push(T.rE(a,b,c,d));break;case "background-color":e.push(T.qE(a,b,c,d))}});var g=[];A(e,function(a){null!=a&&g.push(a)});delete e;return g};
T.Iz=function(a,b,c,d){var e=new il;A(a,function(a){c&&C(a,"animate",c);e.add(a)});b&&C(e,"begin",b);C(e,"end",function(){d&&d();e.i();e=null;delete e});e.play()};T.RR=function(a,b,c,d){var e=new jl;A(a,function(a){c&&C(a,"animate",c);e.add(a)});b&&C(e,"begin",b);C(e,"end",function(){d&&d();e.i();e=null;delete e});e.play()};T.iH=function(a,b,c){function d(){ll.pb(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;C(a,"mouseover",function(){ll.pb(a,{opacity:b})});C(a,"mouseout",d);d()};
h("nrg.fx.fadeIn",T.Gq);h("nrg.fx.fadeInFromZero",T.Hq);h("nrg.fx.fadeOut",T.Pm);h("nrg.fx.fadeOutAndRemove",T.jM);h("nrg.fx.fadeTo",T.lg);h("nrg.fx.animGenStyles",T.animGenStyles);h("nrg.fx.generateAnim_Slide",T.tE);h("nrg.fx.generateAnim_Resize",T.sE);h("nrg.fx.generateAnim_Fade",T.Rx);h("nrg.fx.generateAnim_RemoveAddFade",T.rE);h("nrg.fx.generateAnim_BgColorTrans",T.qE);h("nrg.fx.TransitionDims",T.HB);h("nrg.fx.filterTransitionStyles",T.Mx);h("nrg.fx.getTransitionStyles",T.gy);
h("nrg.fx.generateTransitionDims",T.vE);h("nrg.fx.generateAnimations",T.uE);h("nrg.fx.parallelAnimate",T.Iz);h("nrg.fx.serialAnimate",T.RR);h("nrg.fx.setBasicHoverStates",T.iH);function nl(a){return a.slice(a.lastIndexOf("/")+1)}function ol(a){a=nl(a).replace(/\.+/g,".");var b=a.lastIndexOf(".");return 0>=b?"":a.substr(b+1)}function pl(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Ga(b,"/")?b+d:b+("/"+d);return b};function ql(){}h("nrg.dom",ql);ql.tD=function(a,b,c){if(!ia(a))throw new TypeError("Array expected!",a);if(b&&!ka(b))throw new TypeError("String expected!",b);if(c&&!ka(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",g=0,g=0;for(len=a.length;g<len;g++)e=a[g],d[e]=ql.sD(e,{src:b?pl(b,cb(e)+"."+c):""});return d};ql.wD=function(a,b){var c=Rh("img",{src:b});c.style.$V="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Vh(a,c);c.onclick=c.parentNode.onclick};
ql.sD=function(a,b,c,d){if(!ka(a))throw new TypeError("String expected!");if(b&&!oa(b))throw new TypeError("Object expected!");if(null!=c&&!ma(c))throw new TypeError("Number expected!");if(null!=d&&!ma(d))throw new TypeError("Number expected!");a=ql.qx("div",a,b?b:{});b&&b.src&&ql.wD(a,b.src);T.iH(a,void 0===c?1:c,void 0===d?.5:d);return a};
ql.qx=function(a,b,c){if(!ka(a))throw new TypeError("String expected!",a);if(!ka(b))throw new TypeError("String expected!",b);if(c&&!oa(c))throw new TypeError("Object expected!");c=c&&oa(c)?c:{};c.id=c.id?c.id:b+"_"+t();c["class"]=c["class"]?c["class"]:cb(b.replace(/\./g,"-").toLowerCase());return Rh(a,c)};ql.stopPropagation=function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()};
ql.oL=function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&ql.AX(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";};ql.oR=function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b};h("nrg.dom.createBasicHoverButtonSet",ql.tD);h("nrg.dom.createDivChildImage",ql.wD);h("nrg.dom.createBasicHoverButton",ql.sD);
h("nrg.dom.createUniqueDom",ql.qx);h("nrg.dom.stopPropagation",ql.stopPropagation);h("nrg.dom.checkForExtraneousArgs",ql.oL);h("nrg.dom.readCSS",ql.oR);U.K=function(a){wj.call(this,a);this.LA();this.o=ql.qx("div",this.constructor.ID_PREFIX,a);this.Ft();rl(this)};m(U.K,wj);h("nrg.ui.Component",U.K);
U.K.prototype.LA=function(){if(this instanceof U.K){this.constructor.d&&this.constructor.d instanceof U.K&&U.K.prototype.LA.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.En)||(this.constructor.En=U.K.py(this.constructor.ID_PREFIX),this.constructor.Bd=this.constructor.En)}};U.K.py=function(a){return a.toLowerCase().replace(/\./g,"-")};f=U.K.prototype;
f.Ft=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)U.K.prototype.Ft.bind(a)(),a=a.constructor.d;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=xb(this.constructor.CSS_SUFFIX),w(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=zk.Kb(this.constructor.ID_PREFIX,a)}.bind(this)))};
function rl(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=U.K.py(c.constructor.ID_PREFIX),Nb(b,d),c=c.constructor.d;A(b,function(a){null!=this.a()&&R(this.a(),a)}.bind(a))}f.rl="";f.pH=function(a){this.rl=a};f.YM=function(){return this.rl};f.MK=function(a){null==this.es&&(this.es=[]);this.es.push(a)};
f.yj=function(){if(null==this.Aa)this.Aa=Pi(this.a());else if(this.Aa.height!==this.B.height||this.Aa.width!==this.B.width)this.Aa=this.B;if(null==this.Dr)this.Dr=Ai(this.a());else if(this.Dr.x!==this.Gt.x||this.Dr.y!==this.Gt.y)this.Dr=this.Gt;this.B=Pi(this.a());this.Gt=Ai(this.a())};f.m=function(){this.yj()};f.n=function(a){this.ya&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):U.K.d.n.call(this,a)};f.YD=!1;f.PL=function(){return this.YD};
f.g=function(){U.K.d.g.call(this);null!=this.es&&(A(this.es,function(a){$c(a);a.i()}),Mb(this.es));$c(this);$c(this.a());S(this.a());this.Dr=this.Aa=this.Gt=this.B=this.rl=null;this.YD=!0};h("nrg.ui.Component.animationLengths",{tT:150,QT:300,BU:600});h("nrg.ui.Component.idPrefixToCssClass",U.K.py);h("nrg.ui.Component.prototype.validateIdPrefix",U.K.prototype.LA);h("nrg.ui.Component.prototype.imagePrefix",U.K.prototype.rl);h("nrg.ui.Component.prototype.createCssMap",U.K.prototype.Ft);
h("nrg.ui.Component.prototype.setImagePrefix",U.K.prototype.pH);h("nrg.ui.Component.prototype.getImagePrefix",U.K.prototype.YM);h("nrg.ui.Component.prototype.addSubComponent",U.K.prototype.MK);h("nrg.ui.Component.prototype.calcDims",U.K.prototype.yj);h("nrg.ui.Component.prototype.updateStyle",U.K.prototype.m);h("nrg.ui.Component.prototype.render",U.K.prototype.n);h("nrg.ui.Component.prototype.disposeInternalCalled",U.K.prototype.PL);h("nrg.ui.Component.prototype.disposeInternal",U.K.prototype.g);U.qa=function(){ek.call(this);this.cE=!1};m(U.qa,ek);h("nrg.ui.Dialog",U.qa);U.qa.ID_PREFIX="nrg.ui.Dialog";U.qa.CSS={wB:"nrg-ui-dialog-overlay",ys:"nrg-ui-dialog-background",pk:"nrg-ui-dialog-closebutton",OI:"nrg-ui-dialog-closebutton-image",Mn:"nrg-ui-dialog-text",Ob:"nrg-ui-dialog-title",ij:"nrg-ui-dialog-content",KI:"nrg-ui-dialog-buttons"};f=U.qa.prototype;
f.yH=function(a){this.sp.style.visibility="hidden";this.ue.style.visibility="hidden";null!=a&&ll.Fl(this.a(),a,null,null,function(){this.sp.style.visibility="visible";this.ue.style.visibility="visible"}.bind(this),function(){this.sp.style.visibility="hidden";this.ue.style.visibility="hidden"}.bind(this))};f.Jw=function(a){R(this.sp,a)};f.qC=function(a){R(this.Ld,a)};f.mC=function(a){R(this.ue.parentNode,a)};f.nC=function(a){R(this.ue,a)};f.oC=function(a){R(this.Ct,a)};f.JK=function(a){R(this.Ww,a)};
function sl(a){a.Ct=Kh("modal-dialog-title-close",a.a())[0];R(a.Ct,U.qa.CSS.pk);a.ue=Rh("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+t(),"class":U.qa.CSS.OI});a.ue.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.Ct.appendChild(a.ue);C(a.ue,"click",function(a){this.wa(!this.bb());this.dispatchEvent({type:"c"});a.stopPropagation()}.bind(a))}f.TK=function(){var a=this.a(),b=dl(a,600),c=cl(a,600),d=dl(a,600),a=cl(a,600);this.HH(b,c,d,a)};
f.cz=function(a,b){var c=this.a();"left"==a&&(c.style.left="0px");"top"==b&&(c.style.top="0px")};f.zi=function(){var a=this.a(),b=Pi(this.a().parentNode);if(null!=this.Fo()){var c=this.Fo();0==c.opacity?S(c):ll.pb(c,{width:b.width,height:b.height,"z-index":199})}var c=Pi(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);yi(a,d,e)};f.Nt=!0;f.tb=null;f.rv=function(a){this.Nt=a;this.Lr(a&&this.ya)};
f.Lr=function(a){var b=Ka(this.ja()+"-title-draggable").split(" "),c=this.dF();this.a()&&(a?Qj(c,b):Sj(c,b));a&&!this.tb?(this.tb=new gj(this.a(),this.He),Qj(c,b),C(this.tb,"start",this.sv,!1,this)):!a&&this.tb&&(this.tb.i(),this.tb=null)};f.sI=function(){this.sv()};
f.sv=function(){var a=pi(this.W()),b=Qh(a)||window,a=Pi(this.a().parentNode),b=Oh(b||window),c=Pi(this.a());"fixed"==xi(this.a())?ij(this.tb,new yh(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):ij(this.tb,new yh(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))};f.rt=function(a){var b=Rh("img",{id:this.constructor.ID_PREFIX+"_Image_"+t(),"class":U.qa.CSS.Cs});null==this.Zq&&(this.Zq=[]);this.Zq.push(b);this.Wu.appendChild(b);null!=a&&(b.src=a);return b};
f.Lk=function(a){var b=Rh("div",{id:this.constructor.ID_PREFIX+"_Text_"+t(),"class":U.qa.CSS.Mn},a);null==this.Zi&&(this.Zi=[]);this.Zi.push(b);b.innerHTML=a||"";this.Cl(a);return b};f.rN=function(){return this.a()};
f.n=function(a){U.qa.d.n.call(this,a);R(this.a(),"nrg-ui-dialog");this.sp=Kh("modal-dialog-title",this.a())[0];this.Ld=Kh("modal-dialog-content",this.a())[0];this.Ww=Kh("modal-dialog-buttons",this.a())[0];this.ue=null;sl(this);R(this.Ww,U.qa.CSS.KI);R(this.sp,U.qa.CSS.Ob);R(this.Ld,U.qa.CSS.ij);U.qa.d.rv.call(this,!1);this.rv(!0)};f.wa=function(a){U.qa.d.wa.call(this,a)};f.PN=function(){return this.Zi};
f.g=function(){U.qa.d.g.call(this);delete this.Ww;delete this.sp;delete this.Ld;delete this.ue;delete this.Ct;null!=this.Wu&&(S(this.Wu),delete this.Wu);null!=this.Zi&&(A(this.Zi,function(a){S(a);delete a}),delete this.Zi);null!=this.Zq&&(A(this.Zq,function(a){S(a);delete a}),delete this.Zq)};h("nrg.ui.Dialog.ID_PREFIX",U.qa.ID_PREFIX);h("nrg.ui.Dialog.EventType",{bU:"a",CLOSED:"b",fT:"c"});h("nrg.ui.Dialog.prototype.setMouseoverClass",U.qa.prototype.yH);
h("nrg.ui.Dialog.prototype.addTitleClass",U.qa.prototype.Jw);h("nrg.ui.Dialog.prototype.addContentClass",U.qa.prototype.qC);h("nrg.ui.Dialog.prototype.addCloseButtonClass",U.qa.prototype.mC);h("nrg.ui.Dialog.prototype.addCloseButtonImageClass",U.qa.prototype.nC);h("nrg.ui.Dialog.prototype.addCloseSpanClass",U.qa.prototype.oC);h("nrg.ui.Dialog.prototype.addButtonsClass",U.qa.prototype.JK);h("nrg.ui.Dialog.prototype.applyFadeTransitions",U.qa.prototype.TK);h("nrg.ui.Dialog.prototype.moveToCorner",U.qa.prototype.cz);
h("nrg.ui.Dialog.prototype.center",U.qa.prototype.zi);h("nrg.ui.Dialog.prototype.setDraggable",U.qa.prototype.rv);h("nrg.ui.Dialog.prototype.updateLimits",U.qa.prototype.sI);h("nrg.ui.Dialog.prototype.addImage",U.qa.prototype.rt);h("nrg.ui.Dialog.prototype.addText",U.qa.prototype.Lk);h("nrg.ui.Dialog.prototype.getOverlay",U.qa.prototype.rN);h("nrg.ui.Dialog.prototype.render",U.qa.prototype.n);h("nrg.ui.Dialog.prototype.setVisible",U.qa.prototype.wa);h("nrg.ui.Dialog.prototype.getTextElements",U.qa.prototype.PN);
h("nrg.ui.Dialog.prototype.disposeInternal",U.qa.prototype.g);U.qd=function(){U.qa.call(this);R(this.Wu,U.qd.CSS.wB)};m(U.qd,U.qa);h("nrg.ui.ErrorOverlay",U.qd);U.qd.ID_PREFIX="nrg.ui.ErrorOverlay";U.qd.CSS={wB:"nrg-ui-infooverlay-overlay",Mn:"nrg-ui-infooverlay-text"};U.qd.prototype.Lk=function(a){U.qd.d.Lk.call(this,a);a=this.Zi;R(a[a.length-1],U.qd.CSS.Mn)};U.qd.prototype.g=function(){U.qd.d.g.call(this)};h("nrg.ui.ErrorOverlay.ID_PREFIX",U.qd.ID_PREFIX);h("nrg.ui.ErrorOverlay.prototype.addText",U.qd.prototype.Lk);
h("nrg.ui.ErrorOverlay.prototype.disposeInternal",U.qd.prototype.g);function tl(a,b,c,d,e){function g(a){a&&(a.tabIndex=0,Vj(a,k.Fi()),Pj(a,"goog-zippy-header"),ul(k,a),a&&k.SF.F(a,"keydown",k.Nu))}ed.call(this);this.Sb=e||Eh();this.Km=this.Sb.a(a)||null;this.Pt=this.Sb.a(d||null);this.ed=(this.Dy=na(b)?b:null)||!b?null:this.Sb.a(b);this.cl=!0==c;this.SF=new cj(this);this.Wy=new cj(this);var k=this;g(this.Km);g(this.Pt);this.Sc(this.cl)}m(tl,ed);var vl={PA:"action",FB:"toggle"};f=tl.prototype;f.Xm=!0;f.g=function(){tl.d.g.call(this);Fc(this.SF);Fc(this.Wy)};
f.Fi=function(){return"tab"};f.Eb=function(){return this.ed};f.toggle=function(){this.Sc(!this.cl)};f.Sc=function(a){this.ed?Ti(this.ed,a):a&&this.Dy&&(this.ed=this.Dy());this.ed&&Pj(this.ed,"goog-zippy-content");this.Pt?(Ti(this.Km,!a),Ti(this.Pt,a)):wl(this,a);this.cl=a;this.dispatchEvent(new xl(vl.FB,this))};function wl(a,b){a.Km&&(Tj(a.Km,"goog-zippy-expanded",b),Tj(a.Km,"goog-zippy-collapsed",!b),Wj(a.Km,"expanded",b))}
f.Nr=function(a){this.Xm!=a&&((this.Xm=a)?(ul(this,this.Km),ul(this,this.Pt)):this.Wy.eh())};function ul(a,b){b&&a.Wy.F(b,"click",a.Mu)}f.Nu=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Hc(vl.PA,this)),a.preventDefault(),a.stopPropagation()};f.Mu=function(){this.toggle();this.dispatchEvent(new Hc(vl.PA,this))};function xl(a,b){Hc.call(this,a,b)}m(xl,Hc);function yl(a,b,c,d){d=d||Eh();var e=d.D("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.Qt=e;this.Eh=null;tl.call(this,a,b,c,void 0,d);a=this.cl;this.Qt.style.display=a?"":"none";wl(this,a)}m(yl,tl);f=yl.prototype;f.vt=500;f.SK=ml;
f.Sc=function(a){if(this.cl!=a||this.Eh){"none"==this.Qt.style.display&&(this.Qt.style.display="");var b=this.Eb().offsetHeight,c=0;this.Eh?(a=this.cl,$c(this.Eh),this.Eh.stop(!1),c=parseInt(this.Eb().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;wl(this,a);this.Eh=new Ik([0,c],[0,a?b:0],this.vt,this.SK);C(this.Eh,["begin","animate","end"],this.IP,!1,this);C(this.Eh,"end",wa(this.JP,this,a));this.Eh.play(!1)}};f.IP=function(a){var b=this.Eb();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.JP=function(a){a&&(this.Eb().style.marginTop="0");$c(this.Eh);this.cl=a;this.Eh=null;a||(this.Qt.style.display="none");this.dispatchEvent(new xl(vl.FB,this))};var U={};h("nrg.ui",U);U.XD=function(a){null!=a&&(a=ia(a)?a:[a],A(a,function(a){$c(a);a.i()}),Mb(a))};U.Bx=function(a){null!=a&&($c(a),a.i())};U.Cx=function(a){w(a,function(b,c){$c(b);S(b);delete a[c]});ub(a)};U.Kt=function(a){w(a,function(b,c){$c(b);b.i();delete a[c]});ub(a)};U.Ya=function(a,b,c,d){U.K.call(this);this.me=a;this.Bc=U.Ya.CL(a);this.Bc[U.Ya.Hs]=a.toLowerCase();null!=d?d(b,this.Bc):b.appendChild(this.Bc);this.oy=U.Ya.BL(a);this.Bc.appendChild(this.oy);this.Ij=U.Ya.AL(a);this.Bc.appendChild(this.Ij);this.so=U.Ya.zL(a);b.appendChild(this.so);this.rf=new this.US(this.Bc,this.so,null!=c?c:!1);this.lS=pa(this);this.lf={};C(this.Bc,"mouseover",this.VQ.bind(this));C(this.Bc,"mouseout",this.UQ.bind(this));zl(this)};m(U.Ya,U.K);h("nrg.ui.ZippyNode",U.Ya);
U.Ya.ID_PREFIX="nrg.ui.ZippyNode";var Al={};U.Ya.CSS_SUFFIX={As:"header",jB:"header-mouseover",bJ:"header-label",ZI:"expandicon",aB:"expandicon-mouseover",ij:"content",ij:"content-sub"};U.Ya.BL=function(a){var b=Rh("div",{id:"ZippyHeaderLabel_"+a+"_"+t(),"class":U.Ya.CSS.bJ}),c=a.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<a?Wa(a,105):c.length==a.length?Wa(a,45):a;return b};U.Ya.AL=function(a){return Rh("div",{id:"ZippyExpandIcon_"+a+"_"+t(),"class":U.Ya.CSS.ZI},"+")};
U.Ya.zL=function(a){return Rh("div",{id:"ZippyContent_"+a+"_"+t(),"class":U.Ya.CSS.ij})};U.Ya.CL=function(a){return Rh("div",{id:"ZippyHeader_"+a+"_"+t(),"class":U.Ya.CSS.As})};U.Ya.Hs=t();f=U.Ya.prototype;f.US=yl;f.ng=function(){return this.me};f.Sc=function(a){this.rf.Sc(a)};function zl(a){C(a.rf,ob(vl),function(a){null!=this.rf.Eh?this.dispatchEvent({type:"f"}):a.target.cl?this.Ez():(this.Ij.innerHTML="+",ll.pb(this.Ij,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"e"}))}.bind(a))}
f.Ez=function(){this.Ij.innerHTML="-";ll.pb(this.Ij,{"margin-left":"-1em"});this.dispatchEvent({type:"d"})};f.VQ=function(){R(this.Bc,U.Ya.CSS.jB);R(this.Ij,U.Ya.CSS.aB)};f.UQ=function(){qh(this.Bc,U.Ya.CSS.jB);qh(this.Ij,U.Ya.CSS.aB)};f.g=function(){U.Ya.d.g.call(this);S(this.oy);delete this.oy;S(this.Ij);delete this.Ij;$c(this.Bc);S(this.Bc);delete this.Bc;S(this.so);delete this.so;null!=this.rf&&(this.rf.i(),$c(this.rf),delete this.rf);U.Kt(this.lf);delete this.lf;delete this.lS;delete this.me};function Bl(){ed.call(this);this.fr=[];this.uA=[];this.Jr=[]}m(Bl,ed);f=Bl.prototype;f.qu=!1;f.ru=!1;f.tl=!1;f.PF=function(){return this.tl};f.BH=function(a){this.iv=a};f.Ja=function(){if(!this.tl){for(var a,b=0;a=this.fr[b];b++)Cl(this,a);this.tl=!0}};function Cl(a,b){a.qu&&(C(b.element,"mousedown",b.Zh,!1,b),a.kA&&Pj(b.element,a.kA));a.ru&&a.tA&&Pj(b.element,a.tA)}
function Dl(a){for(var b,c=0;b=a.fr[c];c++){var d=a;d.qu&&(Yc(b.element,"mousedown",b.Zh,!1,b),d.kA&&Rj(b.element,d.kA));d.ru&&d.tA&&Rj(b.element,d.tA);b.i()}a.fr.length=0}
f.as=function(a,b){if(!this.Lg)if(this.Lg=b,!1==this.dispatchEvent(new El("dragstart",0,this.Lg)))this.Lg=null;else{var c=b.Uk;this.Im=this.nx(c);var d=Gh(c);d.body.appendChild(this.Im);var e=this.Im,g=Fi(c),c=Zi(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.tb=new gj(e);this.tb.BH(this.iv);C(this.tb,"drag",this.nG,!1,this);C(this.tb,"end",this.bl,!1,this);C(d.body,"selectstart",this.cI);this.pp=[];for(e=0;d=this.uA[e];e++)for(var k,
g=0;k=d.fr[g];g++)for(var c=d,l=[k.element],q=this.pp,p=0;p<l.length;p++){var s=l[p],r,u=s;r=Fi(u);u=Pi(u);r=new vh(r.y,r.x+u.width,r.y+u.height,r.x);q.push(new Fl(r,c,k,s));Gl(this,r)}this.hk||(this.hk=new vh(0,0,0,0));for(e=0;d=this.Jr[e];e++)d.jx=[],d.fH=d.o.scrollLeft,d.gH=d.o.scrollTop,g=Fi(d.o),c=Pi(d.o),d.ud=new vh(g.y,g.x+c.width,g.y+c.height,g.x);for(e=0;c=this.pp[e];e++)for(g=0;d=this.Jr[g];g++)ci(d.o,c.o)&&(d.jx.push(c),c.Ir=d);this.sm=null;for(e=0;d=this.Jr[e];e++)C(d.o,"scroll",this.nD,
!1,this);this.tb.as(a);a.preventDefault()}};
f.bl=function(a){var b=a.WL?null:this.sm;if(b&&b.un){var c=a.clientX;a=a.clientY;var d=si(Eh(this.Im)),e=c+d.x,d=a+d.y,g;this.fs&&(g=this.fs(b.Qj,b.ud,e,d));this.dispatchEvent(new El("drag",0,this.Lg,0,b.Qj,0,c,a));b.un.dispatchEvent(new El("drop",0,this.Lg,0,b.Qj,0,c,a,0,0,g))}this.dispatchEvent(new El("dragend",0,this.Lg));Yc(this.tb,"drag",this.nG,!1,this);Yc(this.tb,"end",this.bl,!1,this);Yc(Gh(this.Lg.Uk).body,"selectstart",this.cI);for(b=0;c=this.Jr[b];b++)Yc(c.o,"scroll",this.nD,!1,this),c.jx=
[];this.tb.i();S(this.Im);delete this.Lg;delete this.Im;delete this.tb;delete this.pp;delete this.sm};
f.nG=function(a){var b,c=si(Eh(this.Im));b=new th(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.sm,g;if(e){this.fs&&e.un&&(g=this.fs(e.Qj,e.ud,c,d));if(e.ud.contains(b)&&g==this.jC)return;e.un&&(this.dispatchEvent(new El("dragout",0,this.Lg,0,e.Qj)),e.un.dispatchEvent(new El("dragout",0,this.Lg,0,e.Qj,0,void 0,void 0,0,0,this.jC)));this.jC=g;this.sm=null}if(this.hk.contains(b)){a:{for(var k=0;e=this.pp[k];k++)if(e.ud.contains(b))if(e.Ir){if(e.Ir.ud.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.sm=b)&&e.un)this.fs&&(g=this.fs(e.Qj,e.ud,c,d)),c=new El("dragover",0,this.Lg,0,e.Qj),c.pS=g,this.dispatchEvent(c),e.un.dispatchEvent(new El("dragover",0,this.Lg,0,e.Qj,0,a.clientX,a.clientY,0,0,g));else if(!e){this.jg||(this.jg=new Fl(this.hk.clone()));a=this.jg.ud;a.top=this.hk.top;a.right=this.hk.right;a.bottom=this.hk.bottom;a.left=this.hk.left;for(g=0;e=this.pp[g];g++)b=e.ud,e.Ir&&(e=e.Ir.ud,b=new vh(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.sm=10<=(a.right-a.left)*(a.bottom-a.top)?this.jg:null}}};f.cI=function(){return!1};
f.nD=function(a){for(var b=0,c;c=this.Jr[b];b++)if(a.target==c.o){var d=c.gH-c.o.scrollTop,e=c.fH-c.o.scrollLeft;c.gH=c.o.scrollTop;c.fH=c.o.scrollLeft;this.jg&&this.sm==this.jg&&(0<d?this.jg.ud.top+=d:this.jg.ud.bottom+=d,0<e?this.jg.ud.left+=e:this.jg.ud.right+=e);for(var g=0,k;k=c.jx[g];g++)k=k.ud,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,Gl(this,k)}this.tb.fp(a)};
f.nx=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=Rh("table",null,Rh("tbody",null,b));break a;case "td":case "th":a=Rh("table",null,Rh("tbody",null,Rh("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.XL&&Pj(a,this.XL);return a};f.GE=function(){return this.tb};
function Gl(a,b){if(1==a.pp.length)a.hk=new vh(b.top,b.right,b.bottom,b.left);else{var c=a.hk;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.g=function(){Bl.d.g.call(this);Dl(this)};function El(a,b,c,d,e,g,k,l,q,p,s){Hc.call(this,a);this.Mt=c;this.yo=e;this.clientX=k;this.clientY=l;this.pS=s}m(El,Hc);El.prototype.g=function(){};
function Hl(a,b){ed.call(this);this.element=Hh(a);this.data=b;this.kb=null;this.vd=new cj(this);Ec(this,xa(Fc,this.vd));if(!this.element)throw Error("Invalid argument");}m(Hl,ed);f=Hl.prototype;f.Uk=null;f.Zh=function(a){if(Mc(a)){var b=a.target;b&&(this.vd.F(b,"mousemove",this.mG,!1).F(b,"mouseout",this.mG,!1),this.vd.F(Gh(b),"mouseup",this.vP,!0),this.Uk=b,this.nA=new th(a.clientX,a.clientY),a.preventDefault())}};f.Or=function(a){this.kb=a};
f.mG=function(a){var b=this.Uk,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.nA.x)+Math.abs(a.clientY-this.nA.y)||b)this.vd.eh(),this.kb.as(a,this)};f.vP=function(){this.vd.eh();delete this.nA;this.Uk=null};function Fl(a,b,c,d){this.ud=a;this.un=b;this.Qj=c;this.o=d}Fl.prototype.Ir=null;function Il(a,b){this.type=a;this.currentTarget=this.target=b||null}f=Il.prototype;f.bi=!1;f.defaultPrevented=!1;f.Gr=!0;f.stopPropagation=function(){this.bi=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.Gr=!1};
function Jl(a){a=new Il("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Ii(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.Gr=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.bi;d--){var e=b[d],g=a.type,k=new Kc(a,b[d]);ib(e)?fd(e,g,!0,k):bd(e,g,!0,k)}for(d=0;d<b.length&&!a.bi;d++)e=b[d],g=a.type,k=new Kc(a,b[d]),ib(e)?fd(e,g,!1,k):bd(e,g,!1,k)};function Kl(a,b){if(!a)throw Error("Invalid class name "+a);if(!na(b))throw Error("Invalid decorator function "+b);Ll[a]=b}var Ml={},Ll={};function Nl(){}var Ol;fa(Nl);var Pl={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=Nl.prototype;f.Fi=function(){};f.D=function(a){var b=a.W().D("div",this.Rm(a).join(" "),a.Df());Ql(this,a,b);return b};f.Eb=function(a){return a};f.Mm=function(a,b,c){if(a=a.a?a.a():a){var d=[b];kc&&!uc("7")&&(d=Rl(Nj(a),b),d.push(b));(c?Qj:Sj)(a,d)}};f.hg=function(){return!0};
f.jc=function(a,b){b.id&&Aj(a,b.id);var c=this.Eb(b);c&&c.firstChild?Sl(a,c.firstChild.nextSibling?Qb(c.childNodes):c.firstChild):a.Ld=null;var d=0,e=this.ja(),g=this.ja(),k=!1,l=!1,c=!1,q=Qb(Nj(b));A(q,function(a){k||a!=e?l||a!=g?d|=this.cy(a):l=!0:(k=!0,g==e&&(l=!0))},this);a.ba=d;k||(q.push(e),g==e&&(l=!0));l||q.push(g);var p=a.Rh;p&&q.push.apply(q,p);if(kc&&!uc("7")){var s=Rl(q);0<s.length&&(q.push.apply(q,s),c=!0)}if(!k||!l||p||c)b.className=q.join(" ");Ql(this,a,b);return b};
f.So=function(a){a.qg()&&this.kp(a.a(),!0);a.isEnabled()&&this.El(a,a.bb())};function Tl(a,b,c){if(a=c||a.Fi())c=b.getAttribute("role")||null,a!=c&&Vj(b,a)}function Ql(a,b,c){b.bb()||Wj(c,"hidden",!b.bb());b.isEnabled()||a.dj(c,1,!b.isEnabled());Ul(b,8)&&a.dj(c,8,!!(b.ba&8));Ul(b,16)&&a.dj(c,16,b.vl());Ul(b,64)&&a.dj(c,64,!!(b.ba&64))}f.Kr=function(a,b){Wi(a,!b,!kc&&!jc)};f.kp=function(a,b){this.Mm(a,this.ja()+"-rtl",b)};f.Pj=function(a){var b;return Ul(a,32)&&(b=a.fd())?ii(b)&&ji(b):!1};
f.El=function(a,b){var c;if(Ul(a,32)&&(c=a.fd())){if(!b&&a.ba&32){try{c.blur()}catch(d){}a.ba&32&&a.Vm(null)}(ii(c)&&ji(c))!=b&&hi(c,b)}};f.wa=function(a,b){Ti(a,b);a&&Wj(a,"hidden",!b)};f.md=function(a,b,c){var d=a.a();if(d){var e=this.Lq(b);e&&this.Mm(a,e,c);this.dj(d,b,c)}};f.dj=function(a,b,c){Ol||(Ol={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Ol[b];var d=a.getAttribute("role")||null;d&&(d=Pl[d]||b,b="checked"==b||"selected"==b?d:b);b&&Wj(a,b,c)};
f.Cl=function(a,b){var c=this.Eb(a);if(c&&(Wh(c),b))if(ka(b))ei(c,b);else{var d=function(a){if(a){var b=Gh(c);c.appendChild(ka(a)?b.createTextNode(a):a)}};ia(b)?A(b,d):!ja(b)||"nodeType"in b?d(b):A(Qb(b),d)}};f.fd=function(a){return a.a()};f.ja=function(){return"goog-control"};f.Rm=function(a){var b=this.ja(),c=[b],d=this.ja();d!=b&&c.push(d);b=a.Io();for(d=[];b;){var e=b&-b;d.push(this.Lq(e));b&=~e}c.push.apply(c,d);(a=a.Rh)&&c.push.apply(c,a);kc&&!uc("7")&&c.push.apply(c,Rl(c));return c};
function Rl(a,b){var c=[];b&&(a=a.concat([b]));A([],function(d){!Ib(d,xa(Lb,a))||b&&!Lb(d,b)||c.push(d.join("_"))});return c}f.Lq=function(a){this.Bt||Vl(this);return this.Bt[a]};f.cy=function(a){if(!this.YH){this.Bt||Vl(this);var b=this.Bt,c={},d;for(d in b)c[b[d]]=d;this.YH=c}a=parseInt(this.YH[a],10);return isNaN(a)?0:a};function Vl(a){var b=a.ja();b.replace(/\xa0|\s/g," ");a.Bt={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Wl(a,b){ed.call(this);a&&this.no(a,b)}m(Wl,ed);f=Wl.prototype;f.o=null;f.su=null;f.xy=null;f.tu=null;f.rg=-1;f.wl=-1;f.Ow=!1;
var Xl={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Yl={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Zl=kc||mc&&uc("525"),$l=fc&&lc;f=Wl.prototype;
f.bu=function(a){mc&&(17==this.rg&&!a.ctrlKey||18==this.rg&&!a.altKey||fc&&91==this.rg&&!a.metaKey)&&(this.wl=this.rg=-1);-1==this.rg&&(a.ctrlKey&&17!=a.keyCode?this.rg=17:a.altKey&&18!=a.keyCode?this.rg=18:a.metaKey&&91!=a.keyCode&&(this.rg=91));Zl&&!Hj(a.keyCode,this.rg,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.wl=Jj(a.keyCode),$l&&(this.Ow=a.altKey))};f.tO=function(a){this.wl=this.rg=-1;this.Ow=a.altKey};
f.handleEvent=function(a){var b=a.Nd,c,d,e=b.altKey;kc&&"keypress"==a.type?(c=this.wl,d=13!=c&&27!=c?b.keyCode:0):mc&&"keypress"==a.type?(c=this.wl,d=0<=b.charCode&&63232>b.charCode&&Ij(c)?b.charCode:0):jc?(c=this.wl,d=Ij(c)?b.keyCode:0):(c=b.keyCode||this.wl,d=b.charCode||0,$l&&(e=this.Ow),fc&&63==d&&224==c&&(c=191));var g=c=Jj(c),k=b.keyIdentifier;c?63232<=c&&c in Xl?g=Xl[c]:25==c&&a.shiftKey&&(g=9):k&&k in Yl&&(g=Yl[k]);a=g==this.rg;this.rg=g;b=new am(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.o};f.no=function(a,b){this.tu&&this.detach();this.o=a;this.su=C(this.o,"keypress",this,b);this.xy=C(this.o,"keydown",this.bu,b,this);this.tu=C(this.o,"keyup",this.tO,b,this)};f.detach=function(){this.su&&(Zc(this.su),Zc(this.xy),Zc(this.tu),this.tu=this.xy=this.su=null);this.o=null;this.wl=this.rg=-1};f.g=function(){Wl.d.g.call(this);this.detach()};function am(a,b,c,d){Kc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}m(am,Kc);function bm(a,b,c){wj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=pa(b);if(d=Ml[d])break;b=b.d?b.d.constructor:null}b=d?na(d.Ef)?d.Ef():new d:null}this.La=b;this.Ld=ca(a)?a:null}m(bm,wj);f=bm.prototype;f.Ld=null;f.ba=0;f.gs=39;f.lq=255;f.cs=0;f.Ad=!0;f.Rh=null;f.Xm=!0;f.tt=!1;f.Nz=null;f.Nr=function(a){this.ya&&a!=this.Xm&&cm(this,a);this.Xm=a};f.fd=function(){return this.La.fd(this)};f.Vt=function(){return this.Tb||(this.Tb=new Wl)};f.fc=function(){return this.La};
f.Mm=function(a,b){b?a&&(this.Rh?Lb(this.Rh,a)||this.Rh.push(a):this.Rh=[a],this.La.Mm(this,a,!0)):a&&this.Rh&&Ob(this.Rh,a)&&(0==this.Rh.length&&(this.Rh=null),this.La.Mm(this,a,!1))};f.D=function(){var a=this.La.D(this);this.o=a;Tl(this.La,a,this.il());this.tt||this.La.Kr(a,!1);this.bb()||this.La.wa(a,!1)};f.il=function(){return this.Nz};f.Eb=function(){return this.La.Eb(this.a())};f.hg=function(a){return this.La.hg(a)};
f.yf=function(a){this.o=a=this.La.jc(this,a);Tl(this.La,a,this.il());this.tt||this.La.Kr(a,!1);this.Ad="none"!=a.style.display};f.Db=function(){bm.d.Db.call(this);this.La.So(this);if(this.gs&-2&&(this.Xm&&cm(this,!0),Ul(this,32))){var a=this.fd();if(a){var b=this.Vt();b.no(a);this.Fb().F(b,"key",this.Ii).F(a,"focus",this.Wm).F(a,"blur",this.Vm)}}};
function cm(a,b){var c=a.Fb(),d=a.a();b?(c.F(d,"mouseover",a.Ym).F(d,"mousedown",a.Ji).F(d,"mouseup",a.Uh).F(d,"mouseout",a.du),a.Tq!=ea&&c.F(d,"contextmenu",a.Tq),kc&&c.F(d,"dblclick",a.oF)):(c.Ub(d,"mouseover",a.Ym).Ub(d,"mousedown",a.Ji).Ub(d,"mouseup",a.Uh).Ub(d,"mouseout",a.du),a.Tq!=ea&&c.Ub(d,"contextmenu",a.Tq),kc&&c.Ub(d,"dblclick",a.oF))}f.wd=function(){bm.d.wd.call(this);this.Tb&&this.Tb.detach();this.bb()&&this.isEnabled()&&this.La.El(this,!1)};
f.g=function(){bm.d.g.call(this);this.Tb&&(this.Tb.i(),delete this.Tb);delete this.La;this.Rh=this.Ld=null};f.Df=function(){return this.Ld};f.Cl=function(a){this.La.Cl(this.a(),a);this.Ld=a};function Sl(a,b){a.Ld=b}f.St=function(){var a=this.Df();if(!a)return"";a=ka(a)?a:ia(a)?Gb(a,mi).join(""):ki(a);return Ja(a)};f.kp=function(a){bm.d.kp.call(this,a);var b=this.a();b&&this.La.kp(b,a)};f.Kr=function(a){this.tt=a;var b=this.a();b&&this.La.Kr(b,a)};f.bb=function(){return this.Ad};
f.wa=function(a,b){if(b||this.Ad!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.La.wa(c,a);this.isEnabled()&&this.La.El(this,a);this.Ad=a;return!0}return!1};f.isEnabled=function(){return!(this.ba&1)};f.ld=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!dm(this,1,!a)||(a||(this.setActive(!1),this.fi(!1)),this.bb()&&this.La.El(this,a),this.md(1,!a))};f.fi=function(a){dm(this,2,a)&&this.md(2,a)};f.Li=function(){return!!(this.ba&4)};
f.setActive=function(a){dm(this,4,a)&&this.md(4,a)};f.Rr=function(a){dm(this,8,a)&&this.md(8,a)};f.vl=function(){return!!(this.ba&16)};f.fh=function(a){dm(this,16,a)&&this.md(16,a)};f.Tc=function(a){dm(this,64,a)&&this.md(64,a)};f.Io=function(){return this.ba};f.md=function(a,b){Ul(this,a)&&b!=!!(this.ba&a)&&(this.La.md(this,a,b),this.ba=b?this.ba|a:this.ba&~a)};function Ul(a,b){return!!(a.gs&b)}
f.le=function(a,b){if(this.ya&&this.ba&a&&!b)throw Error("Component already rendered");!b&&this.ba&a&&this.md(a,!1);this.gs=b?this.gs|a:this.gs&~a};function em(a,b){return!!(a.lq&b)&&Ul(a,b)}function dm(a,b,c){return Ul(a,b)&&!!(a.ba&b)!=c&&(!(a.cs&b)||a.dispatchEvent(yj(b,c)))&&!a.Gm}f.Ym=function(a){(!a.relatedTarget||!ci(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&em(this,2)&&this.fi(!0)};
f.du=function(a){a.relatedTarget&&ci(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(em(this,4)&&this.setActive(!1),em(this,2)&&this.fi(!1))};f.Tq=ea;f.Ji=function(a){this.isEnabled()&&(em(this,2)&&this.fi(!0),Mc(a)&&(em(this,4)&&this.setActive(!0),this.La.Pj(this)&&this.fd().focus()));!this.tt&&Mc(a)&&a.preventDefault()};f.Uh=function(a){this.isEnabled()&&(em(this,2)&&this.fi(!0),this.Li()&&this.kn(a)&&em(this,4)&&this.setActive(!1))};f.oF=function(a){this.isEnabled()&&this.kn(a)};
f.kn=function(a){em(this,16)&&this.fh(!this.vl());em(this,8)&&this.Rr(!0);em(this,64)&&this.Tc(!(this.ba&64));var b=new Hc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Kz=a.Kz);return this.dispatchEvent(b)};f.Wm=function(){em(this,32)&&dm(this,32,!0)&&this.md(32,!0)};f.Vm=function(){em(this,4)&&this.setActive(!1);em(this,32)&&dm(this,32,!1)&&this.md(32,!1)};
f.Ii=function(a){return this.bb()&&this.isEnabled()&&this.Th(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.Th=function(a){return 13==a.keyCode&&this.kn(a)};if(!na(bm))throw Error("Invalid component class "+bm);if(!na(Nl))throw Error("Invalid renderer class "+Nl);var fm=pa(bm);Ml[fm]=Nl;Kl("goog-control",function(){return new bm(null)});function gm(){this.kD=[]}m(gm,Nl);fa(gm);function hm(a,b){var c=a.kD[b];if(!c){switch(b){case 0:c=a.ja()+"-highlight";break;case 1:c=a.ja()+"-checkbox";break;case 2:c=a.ja()+"-content"}a.kD[b]=c}return c}f=gm.prototype;f.Fi=function(){return"menuitem"};f.D=function(a){var b=a.W().D("div",this.Rm(a).join(" "),im(this,a.Df(),a.W()));jm(this,a,b,Ul(a,8)||Ul(a,16));return b};f.Eb=function(a){return a&&a.firstChild};
f.jc=function(a,b){var c=Zh(b),d=hm(this,2);c&&Oj(c,d)||b.appendChild(im(this,b.childNodes,a.W()));Oj(b,"goog-option")&&(a.ov(!0),this.ov(a,b,!0));return gm.d.jc.call(this,a,b)};f.Cl=function(a,b){var c=this.Eb(a),d=km(this,a)?c.firstChild:null;gm.d.Cl.call(this,a,b);d&&!km(this,a)&&c.insertBefore(d,c.firstChild||null)};function im(a,b,c){a=hm(a,2);return c.D("div",a,b)}f.CH=function(a,b,c){a&&b&&jm(this,a,b,c)};f.ov=function(a,b,c){a&&b&&jm(this,a,b,c)};
function km(a,b){var c=a.Eb(b);if(c){var c=c.firstChild,d=hm(a,1);return!!c&&bi(c)&&Oj(c,d)}return!1}function jm(a,b,c,d){Tl(a,c,b.il());Ql(a,b,c);d!=km(a,c)&&(Tj(c,"goog-option",d),c=a.Eb(c),d?(a=hm(a,1),c.insertBefore(b.W().D("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.Lq=function(a){switch(a){case 2:return hm(this,0);case 16:case 8:return"goog-option-selected";default:return gm.d.Lq.call(this,a)}};
f.cy=function(a){var b=hm(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return gm.d.cy.call(this,a)}};f.ja=function(){return"goog-menuitem"};function lm(a,b,c,d){bm.call(this,a,d||gm.Ef(),c);this.S(b)}m(lm,bm);f=lm.prototype;f.$=function(){var a=this.Vy;return null!=a?a:this.St()};f.S=function(a){this.Vy=a};f.le=function(a,b){lm.d.le.call(this,a,b);switch(a){case 8:this.vl()&&!b&&this.fh(!1);var c=this.a();c&&this.fc().CH(this,c,b);break;case 16:(c=this.a())&&this.fc().ov(this,c,b)}};f.CH=function(a){this.le(8,a)};f.ov=function(a){this.le(16,a)};
f.St=function(){var a=this.Df();return ia(a)?(a=Gb(a,function(a){return bi(a)&&(Oj(a,"goog-menuitem-accel")||Oj(a,"goog-menuitem-mnemonic-separator"))?"":mi(a)}).join(""),Ja(a)):lm.d.St.call(this)};f.Uh=function(a){var b=this.getParent();if(b){var c=b.HG;b.HG=null;if(b=c&&ma(a.clientX))b=new th(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}lm.d.Uh.call(this,a)};f.Th=function(a){return a.keyCode==this.lG&&this.kn(a)?!0:lm.d.Th.call(this,a)};f.oN=function(){return this.lG};
Kl("goog-menuitem",function(){return new lm(null)});lm.prototype.il=function(){return Ul(this,16)?"menuitemcheckbox":Ul(this,8)?"menuitemradio":lm.d.il.call(this)};function mm(a){this.TC=a}fa(mm);f=mm.prototype;f.Fi=function(){return this.TC};function nm(a,b){a&&(a.tabIndex=b?0:-1)}f.D=function(a){return a.W().D("div",this.Rm(a).join(" "))};f.Eb=function(a){return a};f.hg=function(a){return"DIV"==a.tagName};f.jc=function(a,b){b.id&&Aj(a,b.id);var c=this.ja(),d=!1,e=Nj(b);e&&A(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.ld(!1):b==c+"-horizontal"?a.ek(om):b==c+"-vertical"&&a.ek(pm))},this);d||Pj(b,c);qm(this,a,this.Eb(b));return b};
function qm(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var g=a.Ux(d);g&&(g.o=d,b.isEnabled()||g.ld(!1),b.jq(g),g.jc(d))}else d.nodeValue&&""!=Ka(d.nodeValue)||c.removeChild(d);d=e}}f.Ux=function(a){a:{var b;a=Nj(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Ll?Ll[b]():null){a=b;break a}a=null}return a};f.So=function(a){a=a.a();Wi(a,!0,lc);kc&&(a.hideFocus=!0);var b=this.Fi();b&&Vj(a,b)};f.fd=function(a){return a.a()};f.ja=function(){return"goog-container"};
f.Rm=function(a){var b=this.ja(),c=[b,a.Qc()==om?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function rm(){}m(rm,Nl);fa(rm);rm.prototype.D=function(a){return a.W().D("div",this.ja())};rm.prototype.jc=function(a,b){b.id&&Aj(a,b.id);if("HR"==b.tagName){var c=b;b=this.D(a);Xh(b,c);S(c)}else Pj(b,this.ja());return b};rm.prototype.Cl=function(){};rm.prototype.ja=function(){return"goog-menuseparator"};function sm(a,b){bm.call(this,null,a||rm.Ef(),b);this.le(1,!1);this.le(2,!1);this.le(4,!1);this.le(32,!1);this.ba=1}m(sm,bm);sm.prototype.Db=function(){sm.d.Db.call(this);Vj(this.a(),"separator")};Kl("goog-menuseparator",function(){return new sm});function tm(a){this.TC=a||"menu"}m(tm,mm);fa(tm);f=tm.prototype;f.hg=function(a){return"UL"==a.tagName||tm.d.hg.call(this,a)};f.Ux=function(a){return"HR"==a.tagName?new sm:tm.d.Ux.call(this,a)};f.zm=function(a,b){return ci(a.a(),b)};f.ja=function(){return"goog-menu"};f.So=function(a){tm.d.So.call(this,a);Wj(a.a(),"haspopup","true")};function um(a,b,c,d,e,g,k,l,q){var p,s;if(p=c.offsetParent){var r="HTML"==p.tagName||"BODY"==p.tagName;r&&"static"==xi(p)||(s=Fi(p),r||(r=(r=Gi(p))&&lc?-p.scrollLeft:!r||kc&&uc("8")||"visible"==wi(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,s=uh(s,new th(r,p.scrollTop))))}p=s||new th;s=Ri(a);(r=Ei(a))&&s.MF(new yh(r.left,r.top,r.right-r.left,r.bottom-r.top));var r=Eh(a),u=Eh(c);if(r.Ia!=u.Ia){var v=r.Ia.body,u=ri(u),D=new th(0,0),B=Qh(Gh(v)),I=v;do{var G=B==u?Fi(I):Ji(I);
D.x+=G.x;D.y+=G.y}while(B&&B!=u&&(I=B.frameElement)&&(B=B.parent));v=uh(D,Fi(v));kc&&!qi(r)&&(v=uh(v,si(r)));s.left+=v.x;s.top+=v.y}a=vm(a,b);b=new th(a&2?s.left+s.width:s.left,a&1?s.top+s.height:s.top);b=uh(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var Q;if(k)if(q)Q=q;else if(Q=Ei(c))Q.top-=p.y,Q.right-=p.x,Q.bottom-=p.y,Q.left-=p.x;return wm(b,c,d,g,Q,k,l)}
function wm(a,b,c,d,e,g,k){a=a.clone();var l=0,q=vm(b,c);c=Pi(b);k=k?k.clone():c.clone();if(d||0!=q)q&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),q&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(g&&(e?(l=a,d=0,65==(g&65)&&(l.x<e.left||l.x>=e.right)&&(g&=-2),132==(g&132)&&(l.y<e.top||l.y>=e.bottom)&&(g&=-5),l.x<e.left&&g&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&g&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&g&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),g&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&g&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&g&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&g&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&g&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),g&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;yi(b,a);xh(c,k)||(e=qi(Eh(Gh(b))),!kc||e&&uc("8")?
(b=b.style,lc?b.MozBoxSizing="border-box":mc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=Zi(b,"padding"),b=bj(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function vm(a,b){return(b&4&&Gi(a)?b^2:b)&-5};var xm,ym;ym=xm=!1;var zm=Xb;zm&&(-1!=zm.indexOf("Firefox")||-1!=zm.indexOf("Camino")||(-1!=zm.indexOf("iPhone")||-1!=zm.indexOf("iPod")?xm=!0:-1!=zm.indexOf("iPad")&&(ym=!0)));var Am=xm,Bm=ym;Kl("goog-menuseparator",function(){return new sm});function Cm(a,b,c){wj.call(this,c);this.La=b||mm.Ef();this.Za=a||pm}m(Cm,wj);var om="horizontal",pm="vertical";f=Cm.prototype;f.yy=null;f.Tb=null;f.La=null;f.Za=null;f.Ad=!0;f.Md=!0;f.Qx=!0;f.og=-1;f.yd=null;f.Vj=!1;f.OK=!1;f.XQ=!0;f.Bj=null;f.fd=function(){return this.yy||this.La.fd(this)};f.Vt=function(){return this.Tb||(this.Tb=new Wl(this.fd()))};f.fc=function(){return this.La};f.D=function(){this.o=this.La.D(this)};f.Eb=function(){return this.La.Eb(this.a())};f.hg=function(a){return this.La.hg(a)};
f.yf=function(a){this.o=this.La.jc(this,a);"none"==a.style.display&&(this.Ad=!1)};f.Db=function(){Cm.d.Db.call(this);Cj(this,function(a){a.ya&&Dm(this,a)},this);var a=this.a();this.La.So(this);this.wa(this.Ad,!0);this.Fb().F(this,"enter",this.iy).F(this,"highlight",this.jy).F(this,"unhighlight",this.ky).F(this,"open",this.xO).F(this,"close",this.oO).F(a,"mousedown",this.Ji).F(Gh(a),"mouseup",this.qO).F(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.nO);this.Pj()&&Em(this,!0)};
function Em(a,b){var c=a.Fb(),d=a.fd();b?c.F(d,"focus",a.Wm).F(d,"blur",a.Vm).F(a.Vt(),"key",a.Ii):c.Ub(d,"focus",a.Wm).Ub(d,"blur",a.Vm).Ub(a.Vt(),"key",a.Ii)}f.wd=function(){this.Wi(-1);this.yd&&this.yd.Tc(!1);this.Vj=!1;Cm.d.wd.call(this)};f.g=function(){Cm.d.g.call(this);this.Tb&&(this.Tb.i(),this.Tb=null);this.La=this.yd=this.Bj=this.yy=null};f.iy=function(){return!0};
f.jy=function(a){var b=Fj(this,a.target);if(-1<b&&b!=this.og){var c=Fm(this);c&&c.fi(!1);this.og=b;c=Fm(this);this.Vj&&c.setActive(!0);this.XQ&&this.yd&&c!=this.yd&&(Ul(c,64)?c.Tc(!0):this.yd.Tc(!1))}b=this.a();null!=a.target.a()&&Wj(b,"activedescendant",a.target.a().id)};f.ky=function(a){a.target==Fm(this)&&(this.og=-1);this.a().removeAttribute("aria-activedescendant")};f.xO=function(a){(a=a.target)&&a!=this.yd&&a.getParent()==this&&(this.yd&&this.yd.Tc(!1),this.yd=a)};
f.oO=function(a){a.target==this.yd&&(this.yd=null)};f.Ji=function(a){this.Md&&(this.Vj=!0);var b=this.fd();b&&ii(b)&&ji(b)?b.focus():a.preventDefault()};f.qO=function(){this.Vj=!1};f.nO=function(a){var b;a:{b=a.target;if(this.Bj)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.Bj){b=this.Bj[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Ji(a);break;case "mouseup":b.Uh(a);break;case "mouseover":b.Ym(a);break;case "mouseout":b.du(a);break;case "contextmenu":b.Tq(a)}};
f.Wm=function(){};f.Vm=function(){this.Wi(-1);this.Vj=!1;this.yd&&this.yd.Tc(!1)};f.Ii=function(a){return this.isEnabled()&&this.bb()&&(0!=Dj(this)||this.yy)&&this.Th(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.Th=function(a){var b=Fm(this);if(b&&"function"==typeof b.Ii&&b.Ii(a)||this.yd&&this.yd!=b&&"function"==typeof this.yd.Ii&&this.yd.Ii(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.Pj())this.fd().blur();else return!1;break;case 36:Gm(this);break;case 35:Hm(this);break;case 38:if(this.Za==pm)Im(this);else return!1;break;case 37:if(this.Za==om)this.qg()?Jm(this):Im(this);else return!1;break;case 40:if(this.Za==pm)Jm(this);else return!1;break;case 39:if(this.Za==
om)this.qg()?Im(this):Jm(this);else return!1;break;default:return!1}return!0};function Dm(a,b){var c=b.a(),c=c.id||(c.id=zj(b));a.Bj||(a.Bj={});a.Bj[c]=b}f.jq=function(a,b){Cm.d.jq.call(this,a,b)};f.Iw=function(a,b,c){a.cs|=2;a.cs|=64;!this.Pj()&&this.OK||a.le(32,!1);a.Nr(!1);Cm.d.Iw.call(this,a,b,c);a.ya&&this.ya&&Dm(this,a);b<=this.og&&this.og++};
f.removeChild=function(a,b){if(a=ka(a)?Bj(this,a):a){var c=Fj(this,a);-1!=c&&(c==this.og?(a.fi(!1),this.og=-1):c<this.og&&this.og--);(c=a.a())&&c.id&&this.Bj&&vb(this.Bj,c.id)}a=Cm.d.removeChild.call(this,a,b);a.Nr(!0);return a};f.Qc=function(){return this.Za};f.ek=function(a){if(this.a())throw Error("Component already rendered");this.Za=a};f.bb=function(){return this.Ad};
f.wa=function(a,b){if(b||this.Ad!=a&&this.dispatchEvent(a?"show":"hide")){this.Ad=a;var c=this.a();c&&(Ti(c,a),this.Pj()&&nm(this.fd(),this.Md&&this.Ad),b||this.dispatchEvent(this.Ad?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Md};
f.ld=function(a){this.Md!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Md=!0,Cj(this,function(a){a.BI?delete a.BI:a.ld(!0)})):(Cj(this,function(a){a.isEnabled()?a.ld(!1):a.BI=!0}),this.Vj=this.Md=!1),this.Pj()&&nm(this.fd(),a&&this.Ad))};f.Pj=function(){return this.Qx};f.El=function(a){a!=this.Qx&&this.ya&&Em(this,a);this.Qx=a;this.Md&&this.Ad&&nm(this.fd(),a)};f.Wi=function(a){(a=Ej(this,a))?a.fi(!0):-1<this.og&&Fm(this).fi(!1)};f.fi=function(a){this.Wi(Fj(this,a))};
function Fm(a){return Ej(a,a.og)}function Gm(a){Km(a,function(a,c){return(a+1)%c},Dj(a)-1)}function Hm(a){Km(a,function(a,c){a--;return 0>a?c-1:a},0)}function Jm(a){Km(a,function(a,c){return(a+1)%c},a.og)}function Im(a){Km(a,function(a,c){a--;return 0>a?c-1:a},a.og)}function Km(a,b,c){c=0>c?Fj(a,a.yd):c;var d=Dj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var g=Ej(a,c);if(g&&a.eD(g)){a.Wi(c);break}e++;c=b.call(a,c,d)}}f.eD=function(a){return a.bb()&&a.isEnabled()&&Ul(a,2)};function Lm(){}m(Lm,Nl);fa(Lm);Lm.prototype.ja=function(){return"goog-menuheader"};function Mm(a,b,c){bm.call(this,a,c||Lm.Ef(),b);this.le(1,!1);this.le(2,!1);this.le(4,!1);this.le(32,!1);this.ba=1}m(Mm,bm);Kl("goog-menuheader",function(){return new Mm(null)});function Nm(a,b){Cm.call(this,pm,b||tm.Ef(),a);this.El(!1)}m(Nm,Cm);f=Nm.prototype;f.Nw=!0;f.PK=!1;f.ja=function(){return this.fc().ja()};f.zm=function(a){if(this.fc().zm(this,a))return!0;for(var b=0,c=Dj(this);b<c;b++){var d=Ej(this,b);if("function"==typeof d.zm&&d.zm(a))return!0}return!1};f.tm=function(a){this.jq(a,!0)};
f.bA=function(a,b){var c=this.bb();c||Ti(this.a(),!0);var d=this.a(),e=a,g=b,k=Fi(d);e instanceof th&&(g=e.y,e=e.x);yi(d,d.offsetLeft+(e-k.x),d.offsetTop+(g-k.y));c||Ti(this.a(),!1)};f.wa=function(a,b,c){(b=Nm.d.wa.call(this,a,b))&&a&&this.ya&&this.Nw&&this.fd().focus();this.HG=a&&c&&ma(c.clientX)?new th(c.clientX,c.clientY):null;return b};f.iy=function(a){this.Nw&&this.fd().focus();return Nm.d.iy.call(this,a)};f.eD=function(a){return(this.PK||a.isEnabled())&&a.bb()&&Ul(a,2)};
f.yf=function(a){var b=this.fc(),c;c=this.W();c=Jh(c.Ia,"div",b.ja()+"-content",a);for(var d=c.length,e=0;e<d;e++)qm(b,this,c[e]);Nm.d.yf.call(this,a)};f.Th=function(a){var b=Nm.d.Th.call(this,a);b||Cj(this,function(c){!b&&c.oN&&c.lG==a.keyCode&&(this.isEnabled()&&this.fi(c),b=c.Ii(a))},this);return b};
f.Wi=function(a){Nm.d.Wi.call(this,a);var b=Ej(this,a);if(b){a=this.a();var b=b.a(),c=Fi(b),d=Fi(a),e=bj(a),g=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(g,Math.max(g-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new th(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function Om(){}Om.prototype.ef=function(){};function Pm(a,b,c){this.element=a;this.tq=b;this.$Q=c}m(Pm,Om);Pm.prototype.ef=function(a,b,c){um(this.element,this.tq,a,b,void 0,c,this.$Q)};function Qm(a,b,c,d){Pm.call(this,a,b);this.yu=c?5:0;this.Fz=d||void 0}m(Qm,Pm);Qm.prototype.aN=function(){return this.yu};Qm.prototype.ef=function(a,b,c,d){var e=um(this.element,this.tq,a,b,null,c,10,d,this.Fz);if(e&496){var g=Rm(e,this.tq);b=Rm(e,b);e=um(this.element,g,a,b,null,c,10,d,this.Fz);e&496&&(g=Rm(e,g),b=Rm(e,b),um(this.element,g,a,b,null,c,this.yu,d,this.Fz))}};function Rm(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Sm(a,b,c,d){Qm.call(this,a,b,c||d);if(c||d)this.yu=65|(d?32:132)}m(Sm,Qm);function Tm(){}m(Tm,Nl);fa(Tm);f=Tm.prototype;f.Fi=function(){return"button"};f.dj=function(a,b,c){switch(b){case 8:case 16:Wj(a,"pressed",c);break;default:case 64:case 1:Tm.d.dj.call(this,a,b,c)}};f.D=function(a){var b=Tm.d.D.call(this,a);this.wv(b,a.Rq());var c=a.$();c&&this.S(b,c);Ul(a,16)&&this.dj(b,16,a.vl());return b};f.jc=function(a,b){b=Tm.d.jc.call(this,a,b);var c=this.$(b);a.ji=c;a.zA=this.Rq(b);Ul(a,16)&&this.dj(b,16,a.vl());return b};f.$=ea;f.S=ea;f.Rq=function(a){return a.title};
f.wv=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.pv=function(a,b){var c=a.qg(),d=this.ja()+"-collapse-left",e=this.ja()+"-collapse-right";a.Mm(c?e:d,!!(b&1));a.Mm(c?d:e,!!(b&2))};f.ja=function(){return"goog-button"};function Um(){}m(Um,Tm);fa(Um);f=Um.prototype;f.Fi=function(){};f.D=function(a){a.Nr(!1);a.lq&=-256;a.le(32,!1);return a.W().D("button",{"class":this.Rm(a).join(" "),disabled:!a.isEnabled(),title:a.Rq()||"",value:a.$()||""},a.St()||"")};f.hg=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.jc=function(a,b){a.Nr(!1);a.lq&=-256;a.le(32,!1);if(b.disabled){var c=this.Lq(1);Pj(b,c)}return Um.d.jc.call(this,a,b)};
f.So=function(a){a.Fb().F(a.a(),"click",a.kn)};f.Kr=ea;f.kp=ea;f.Pj=function(a){return a.isEnabled()};f.El=ea;f.md=function(a,b,c){Um.d.md.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.$=function(a){return a.value};f.S=function(a,b){a&&(a.value=b)};f.dj=ea;function Vm(a,b,c){bm.call(this,a,b||Um.Ef(),c)}m(Vm,bm);f=Vm.prototype;f.$=function(){return this.ji};f.S=function(a){this.ji=a;this.fc().S(this.a(),a)};f.Rq=function(){return this.zA};f.wv=function(a){this.zA=a;this.fc().wv(this.a(),a)};f.pv=function(a){this.fc().pv(this,a)};f.g=function(){Vm.d.g.call(this);delete this.ji;delete this.zA};f.Db=function(){Vm.d.Db.call(this);if(Ul(this,32)){var a=this.fd();a&&this.Fb().F(a,"keyup",this.Th)}};
f.Th=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.kn(a):32==a.keyCode};Kl("goog-button",function(){return new Vm(null)});function Wm(){}m(Wm,Tm);fa(Wm);f=Wm.prototype;f.D=function(a){var b={"class":"goog-inline-block "+this.Rm(a).join(" ")},b=a.W().D("div",b,this.Et(a.Df(),a.W()));this.wv(b,a.Rq());Ql(this,a,b);return b};f.Fi=function(){return"button"};f.Eb=function(a){return a&&a.firstChild.firstChild};f.Et=function(a,b){return b.D("div","goog-inline-block "+(this.ja()+"-outer-box"),b.D("div","goog-inline-block "+(this.ja()+"-inner-box"),a))};f.hg=function(a){return"DIV"==a.tagName};
f.jc=function(a,b){Xm(b,!0);Xm(b,!1);var c;a:{c=a.W().KE(b);var d=this.ja()+"-outer-box";if(c&&Oj(c,d)&&(c=a.W().KE(c),d=this.ja()+"-inner-box",c&&Oj(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Et(b.childNodes,a.W()));Qj(b,["goog-inline-block",this.ja()]);return Wm.d.jc.call(this,a,b)};f.ja=function(){return"goog-custom-button"};
function Xm(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ka(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Ym(){}m(Ym,Wm);fa(Ym);f=Ym.prototype;f.Eb=function(a){return Ym.d.Eb.call(this,a&&a.firstChild)};f.jc=function(a,b){var c=Ih("*","goog-menu",b)[0];if(c){Ti(c,!1);Gh(c).body.appendChild(c);var d=new Nm;d.jc(c);Zm(a,d)}return Ym.d.jc.call(this,a,b)};f.Et=function(a,b){return Ym.d.Et.call(this,[this.createCaption(a,b),b.D("div","goog-inline-block "+(this.ja()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.D("div","goog-inline-block "+(this.ja()+"-caption"),a)};f.ja=function(){return"goog-menu-button"};function $m(a,b,c,d,e){Vm.call(this,a,c||Ym.Ef(),d);this.le(64,!0);this.Eu=new Sm(null,5);b&&Zm(this,b);this.sP=null;this.Uc=new Uf(500);!Am&&!Bm||uc("533.17.9")||(this.pu=!0);this.tP=e||tm.Ef()}m($m,Vm);f=$m.prototype;f.pu=!1;f.FR=!1;f.Db=function(){$m.d.Db.call(this);an(this,!0);this.ga&&bn(this,this.ga,!0);Wj(this.o,"haspopup",!!this.ga)};f.wd=function(){$m.d.wd.call(this);an(this,!1);if(this.ga){this.Tc(!1);this.ga.wd();bn(this,this.ga,!1);var a=this.ga.a();a&&S(a)}};
f.g=function(){$m.d.g.call(this);this.ga&&(this.ga.i(),delete this.ga);delete this.gR;this.Uc.i()};f.Ji=function(a){$m.d.Ji.call(this,a);this.Li()&&(this.Tc(!(this.ba&64),a),this.ga&&(this.ga.Vj=!!(this.ba&64)))};f.Uh=function(a){$m.d.Uh.call(this,a);this.ga&&!this.Li()&&(this.ga.Vj=!1)};f.kn=function(){this.setActive(!1);return!0};f.pO=function(a){this.ga&&this.ga.bb()&&!this.zm(a.target)&&this.Tc(!1)};f.zm=function(a){return a&&ci(this.a(),a)||this.ga&&this.ga.zm(a)||!1};
f.Th=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.ga&&this.ga.bb()){var b=this.ga.Ii(a);return 27==a.keyCode?(this.Tc(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.Tc(!0,a),!0):!1};f.uO=function(){this.Tc(!1)};f.vO=function(){this.Li()||this.Tc(!1)};f.Vm=function(a){this.pu||this.Tc(!1);$m.d.Vm.call(this,a)};f.ay=function(){this.ga||Zm(this,new Nm(this.W(),this.tP));return this.ga||null};
function Zm(a,b){var c=a.ga;b!=c&&(c&&(a.Tc(!1),a.ya&&bn(a,c,!1),delete a.ga),a.ya&&Wj(a.o,"haspopup",!!b),b&&(a.ga=b,b.Or(a),b.wa(!1),c=a.pu,(b.Nw=c)&&b.El(!0),a.ya&&bn(a,b,!0)))}f.tm=function(a){this.ay().jq(a,!0)};f.wa=function(a,b){var c=$m.d.wa.call(this,a,b);c&&!this.bb()&&this.Tc(!1);return c};f.ld=function(a){$m.d.ld.call(this,a);this.isEnabled()||this.Tc(!1)};f.eA=function(){this.Tc(!0)};f.Uq=function(){this.Tc(!1)};
f.Tc=function(a,b){$m.d.Tc.call(this,a);if(this.ga&&!!(this.ba&64)==a){if(a){if(!this.ga.ya)if(this.FR){var c=ai(this.a());c?this.ga.Ti(c.parentNode,c):this.ga.n(this.a().parentNode)}else this.ga.n();this.xI=Ei(this.a());this.cD=Ri(this.a());cn(this);this.ga.Wi(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.ga.Vj=!1;if(c=this.a())Wj(c,"activedescendant",""),Wj(c,"owns","");null!=this.Vu&&(this.Vu=void 0,(c=this.ga.a())&&Mi(c,"",""))}this.ga.wa(a,!1,b);if(!this.Gm){var c=this.Fb(),
d=a?c.F:c.Ub;d.call(c,pi(this.W()),"mousedown",this.pO,!0);this.pu&&d.call(c,this.ga,"blur",this.vO);d.call(c,this.Uc,Vf,this.DQ);a?this.Uc.start():this.Uc.stop()}}};function cn(a){if(a.ga.ya){var b=a.Eu;a.Eu.element=a.gR||a.a();var c=a.ga.a();a.ga.bb()||(c.style.visibility="hidden",Ti(c,!0));!a.Vu&&a.Eu.aN&&a.Eu.yu&32&&(a.Vu=Pi(c));b.ef(c,b.tq^1,a.sP,a.Vu);a.ga.bb()||(Ti(c,!1),c.style.visibility="visible")}}
f.DQ=function(){var a=Ri(this.a()),b=Ei(this.a()),c;c=this.cD;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.xI,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.cD=a,this.xI=b,cn(this))};function bn(a,b,c){var d=a.Fb();c=c?d.F:d.Ub;c.call(d,b,"action",a.uO);c.call(d,b,"highlight",a.jy);c.call(d,b,"unhighlight",a.ky)}function an(a,b){var c=a.Fb();(b?c.F:c.Ub).call(c,a.a(),"keydown",a.sO)}
f.jy=function(a){var b=this.a();if(a=a.target.a()){var c=Xj(a,"activedescendant");a=Gh(a).getElementById(c)||a;a.id||(c=vj.Ef(),a.id=":"+(c.vG++).toString(36));c="";a&&(c=a.id);Wj(b,"activedescendant",c);Wj(b,"owns",a.id)}};f.sO=function(a){Ul(this,32)&&this.fd()&&this.ga&&this.ga.bb()&&a.stopPropagation()};f.ky=function(){if(!Fm(this.ga)){var a=this.a();Wj(a,"activedescendant","");Wj(a,"owns","")}};Kl("goog-menu-button",function(){return new $m(null)});function dn(){U.K.call(this);this.pg=Rh("div",{id:this.constructor.ID_PREFIX+"_Holder_"+t(),"class":dn.CSS.pJ});Vh(this.a(),this.pg);this.Zm=Rh("img",{id:this.constructor.ID_PREFIX+"_Icon_"+t(),"class":dn.CSS.Mb});Vh(this.a(),this.Zm);this.ga=new Nm;this.Zd=new il;this.Ye=[];en(this);this.Uq(void 0,0);this.ga.n(this.pg);R(this.ga.a(),dn.CSS.oJ)}m(dn,U.K);h("nrg.ui.SlideInMenu",dn);dn.ID_PREFIX="nrg.ui.SlideInMenu";
dn.CSS_SUFFIX={Mb:"icon",zT:"icon-hovered",oJ:"menu",pJ:"menuholder",qJ:"menuitem",sB:"menuitem-highlight",rJ:"menuitem-icon"};var fn={Uv:null,ij:null,Mb:null};function gn(a,b,c,d){d=ca(d)?d:500;return[new dl(a,d),new Yk(a,b,c,d,ml)]}function hn(a,b,c,d){d=ca(d)?d:700;return[new cl(a,d),new Yk(a,b,c,d,ml)]}f=dn.prototype;f.hd=null;f.LG=null;f.yq=null;f.dp=!1;f.Vq=[-100,-100];f.Zr=[0,0];f.Ny=!0;f.Oy=!0;f.oH=function(a,b){return this.Vq=[a,b]};f.FH=function(a,b){return this.Zr=[a,b]};f.VM=function(){return this.Vq};
f.IN=function(){return this.Zr};f.ay=function(){return this.ga};f.jN=function(){return this.pg};f.kN=function(){return this.Zm};f.uH=function(a){this.Zm.src=a};f.WR=function(a,b){this.hd[a].Mb.src=b};f.OE=function(a){return pb(this.hd).indexOf(a)};f.ey=function(a){return pb(this.hd)[a]};f.Yx=function(a){return this.hd[pb(this.hd)[a]]};f.eG=function(a){return this.Ny=a};f.fG=function(a){return this.Oy=a};f.GN=function(){return this.yq};
function jn(a){null!=a.Zd&&(a.Zd.stop(),A(a.Ye,function(a){this.Zd.remove(a);a.i()}.bind(a)),Mb(a.Ye))}function kn(a,b,c){jn(a);A(ia(b)?b:[b],function(a){this.Zd.add(a);this.Ye.push(a)}.bind(a));a.pg.style.visibility="visible";Xc(a.Zd,"end",function(){c&&c()}.bind(a));a.Zd.play()}f.Co=null;function ln(a){null!=a.Co&&(ba.clearTimeout(a.Co),a.Co=null);a.Co=Wf(function(){this.Co=null;this.dp&&(!this.Xy&&this.dp?this.Uq():ln(this))}.bind(a),450)}
f.Wi=function(a){R(this.hd[this.ey(a)].ij,dn.CSS.sB);this.Ny&&(this.Zm.src=this.hd[this.ey(a)].Mb.src);this.Oy&&(this.a().title=this.Yx(a).Uv.Df())};f.OD=function(){w(this.hd,function(a){qh(a.ij,dn.CSS.sB)}.bind(this))};
f.uC=function(a,b){null==this.hd&&(this.hd={});a=ka(a)?[a]:a;b=b||[];b=ia(b)?b:[b];var c=null,d=null,e=null;A(a,function(a,k){if(this.hd[a])throw Error(a+" is already in use!");c=new lm(a);this.ga.tm(c);d=c.Eb();R(d,dn.CSS.qJ);d.title=a;e=Rh("img",{id:dn.ID_PREFIX+"_MenuItemIcon_"+t(),"class":dn.CSS.rJ});e.src=k<=b.length-1?b[k]:null;Vh(d,e);this.hd[a]=xb(fn);this.hd[a].Uv=c;this.hd[a].ij=d;this.hd[a].Mb=e}.bind(this))};
f.Rr=function(a,b){var c=a;if(ka(c)){if(!this.hd[c])throw Error(c+" does not exist!");c=this.OE(c)}this.LG=this.yq?this.yq:a;this.yq=a;ca(b)&&!b||this.OD();this.Wi(c);this.dispatchEvent({type:"item_selected",index:c,title:this.Yx(c).Uv.Df()})};f.eA=function(a,b){kn(this,gn(this.pg,this.Vq,this.Zr,b),function(){this.dp=!0;null!=a&&a()}.bind(this))};f.Uq=function(a,b){kn(this,hn(this.pg,this.Zr,this.Vq,b),function(){this.dp=!1;this.pg.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function en(a){C(a.a(),"click",function(){this.dp?this.Uq():this.eA()}.bind(a));C(a.ga,"action",function(a){this.Rr(a.target.Df())}.bind(a));C(a.pg,"mouseover",function(){this.Xy=!0}.bind(a));C(a.pg,"mouseout",function(){this.Xy=!1;ln(this)}.bind(a))}
f.g=function(){dn.d.g.call(this);delete this.Xy;delete this.Co;jn(this);Mb(this.Ye);delete this.Ye;w(this.hd,function(a,b){$c(a);S(a);delete this.hd[b]}.bind(this));ub(this.hd);delete this.hd;S(this.pg);delete this.pg;S(this.Zm);delete this.Zm;$c(this.ga);this.ga.i();U.Bx(this.Zd);delete this.Zd;delete this.LG;delete this.yq;delete this.dp;delete this.Vq;delete this.Zr;delete this.Ny;delete this.Oy};h("nrg.ui.SlideInMenu.ID_PREFIX",dn.ID_PREFIX);h("nrg.ui.SlideInMenu.EventType",{ET:"item_selected"});
h("nrg.ui.SlideInMenu.CSS_SUFFIX",dn.CSS_SUFFIX);h("nrg.ui.SlideInMenu.menuItemCollection",fn);h("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);h("nrg.ui.SlideInMenu.ANIM_LEN_IN",500);h("nrg.ui.SlideInMenu.ANIM_LEN_OUT",700);h("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1500);h("nrg.ui.SlideInMenu.prototype.setHidePosition",dn.prototype.oH);h("nrg.ui.SlideInMenu.prototype.setShowPosition",dn.prototype.FH);h("nrg.ui.SlideInMenu.prototype.getHidePosition",dn.prototype.VM);
h("nrg.ui.SlideInMenu.prototype.getShowPosition",dn.prototype.IN);h("nrg.ui.SlideInMenu.prototype.getMenu",dn.prototype.ay);h("nrg.ui.SlideInMenu.prototype.getMenuHolder",dn.prototype.jN);h("nrg.ui.SlideInMenu.prototype.getMenuIcon",dn.prototype.kN);h("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",dn.prototype.uH);h("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",dn.prototype.WR);h("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",dn.prototype.OE);
h("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",dn.prototype.ey);h("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",dn.prototype.Yx);h("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",dn.prototype.eG);h("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",dn.prototype.fG);h("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",dn.prototype.GN);h("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",dn.prototype.Wi);h("nrg.ui.SlideInMenu.prototype.deselectAll",dn.prototype.OD);
h("nrg.ui.SlideInMenu.prototype.addMenuItem",dn.prototype.uC);h("nrg.ui.SlideInMenu.prototype.setSelected",dn.prototype.Rr);h("nrg.ui.SlideInMenu.prototype.showMenu",dn.prototype.eA);h("nrg.ui.SlideInMenu.prototype.hideMenu",dn.prototype.Uq);h("nrg.ui.SlideInMenu.prototype.disposeInternal",dn.prototype.g);V.f={};V.f.H={};V.f.H.mc=function(){U.K.call(this)};m(V.f.H.mc,U.K);h("xiv.ui.layouts.interactors.InputController",V.f.H.mc);V.f.H.mc.ID_PREFIX="xiv.ui.layouts.interactors.InputController";V.f.H.mc.CSS_SUFFIX={gJ:"inputbox",CT:"inputbox-hovered",$A:"display"};f=V.f.H.mc.prototype;f.Ph=null;f.ob=null;f.PO=!1;f.$=function(){if(null!=this.ob)return this.ob.value};f.S=function(a){null!=this.ob&&(this.ob.value=a,this.fj())};f.Fe=function(a){null!=this.ob&&(this.ob.max=a,this.fj())};
f.Lf=function(a){null!=this.ob&&(this.ob.min=a,this.fj())};f.fj=function(){};f.BG=function(a){this.ob.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.ob.value});this.fj()};
f.n=function(a){V.f.H.mc.d.n.call(this,a);this.Ph=Rh("div");this.a().appendChild(this.Ph);R(this.Ph,V.f.H.mc.CSS.$A);this.ob=Rh("input");this.ob.type="number";this.ob.step=1;this.ob.min=0;this.ob.value=0;this.a().appendChild(this.ob);R(this.ob,V.f.H.mc.CSS.gJ);C(this.ob,"mouseenter",function(a){a.stopPropagation();this.ob.style.opacity=1;this.Ph.style.opacity=0}.bind(this));C(this.ob,"mouseleave",function(a){a.stopPropagation();this.ob.style.opacity=0;this.Ph.style.opacity=1}.bind(this));C(this.ob,
"input",this.BG.bind(this));this.fj()};f.g=function(){V.f.H.mc.d.g.call(this);delete this.PO;this.ob&&($c(this.ob),S(this.ob),delete this.ob);this.Ph&&($c(this.Ph),S(this.Ph),delete this.Ph)};h("xiv.ui.layouts.interactors.InputController.EventType",{BT:"input",$A:"display"});h("xiv.ui.layouts.interactors.InputController.ID_PREFIX",V.f.H.mc.ID_PREFIX);h("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",V.f.H.mc.CSS_SUFFIX);h("xiv.ui.layouts.interactors.InputController.prototype.getValue",V.f.H.mc.prototype.$);
h("xiv.ui.layouts.interactors.InputController.prototype.setValue",V.f.H.mc.prototype.S);h("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",V.f.H.mc.prototype.Fe);h("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",V.f.H.mc.prototype.Lf);h("xiv.ui.layouts.interactors.InputController.prototype.updateValue",V.f.H.mc.prototype.fj);h("xiv.ui.layouts.interactors.InputController.prototype.onInput",V.f.H.mc.prototype.BG);
h("xiv.ui.layouts.interactors.InputController.prototype.render",V.f.H.mc.prototype.n);h("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",V.f.H.mc.prototype.g);V.f.H.Tl=function(){V.f.H.mc.call(this)};m(V.f.H.Tl,V.f.H.mc);h("xiv.ui.layouts.interactors.FrameDisplay",V.f.H.Tl);V.f.H.Tl.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";V.f.H.Tl.prototype.fj=function(){this.Ph.innerHTML=this.ob.value+" / "+this.ob.max};h("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",V.f.H.Tl.ID_PREFIX);h("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",V.f.H.Tl.prototype.fj);function mn(){}h("nrg.array",mn);mn.sG=function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,g,k;g=(k=a.charAt(c++)).charCodeAt(0);)g=46==g||48<=g&&57>=g,g!==e&&(b[++d]="",e=g),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var g=Number(d[x]),k=Number(e[x]);return g==d[x]&&k==e[x]?g-k:d[x]>e[x]?1:-1}return d.length-e.length};h("nrg.array.naturalCompare",mn.sG);function nn(a,b,c){this.Bg=this.Ag=this.zg=0;3==arguments.length?(this.zg=Number(a),this.Ag=Number(b),this.Bg=Number(c)):a instanceof nn?(this.zg=Number(a.x()),this.Ag=Number(a.y()),this.Bg=Number(a.z())):(this.zg=Number(a[0]),this.Ag=Number(a[1]),this.Bg=Number(a[2]))}
nn.prototype={clone:function(){return new nn(this.zg,this.Ag,this.Bg)},Xk:function(a){return this.zg*a.x()+this.Ag*a.y()+this.Bg*a.z()},Au:function(a,b){return on(this,pn(qn(a,this),b))},length:function(){return Math.sqrt(this.Xk(this))},Em:function(a){return new nn(this.Ag*a.z()-this.Bg*a.y(),this.Bg*a.x()-this.zg*a.z(),this.zg*a.y()-this.Ag*a.x())},x:function(){return this.zg},y:function(){return this.Ag},z:function(){return this.Bg}};
function rn(a){var b=a.length();return new nn(a.zg/b,a.Ag/b,a.Bg/b)}function pn(a,b){return new nn(a.zg*b,a.Ag*b,a.Bg*b)}function qn(a,b){return new nn(a.zg-b.x(),a.Ag-b.y(),a.Bg-b.z())}function on(a,b){return new nn(a.zg+b.x(),a.Ag+b.y(),a.Bg+b.z())}function sn(a){return new nn(-a.zg,-a.Ag,-a.Bg)};function tn(a,b){this.Lz=new nn(a);this.ke=new nn(b)}tn.prototype={clone:function(){return new tn(this.Lz.clone(),this.ke.clone())},Qm:function(){this.ke=sn(this.ke)},ug:function(){return this.Lz}};function un(a,b){this.ke=a;this.vs=b}un.prototype={clone:function(){return new un(this.ke.clone(),this.vs)},Qm:function(){this.ke=sn(this.ke);this.vs=-this.vs}};function vn(a,b){this.lk=a;this.xv=b;var c=a[0].ug(),d=a[1].ug(),e=a[2].ug(),d=rn(qn(d,c).Em(qn(e,c)));this.tg=new un(d,d.Xk(c))}vn.prototype={clone:function(){var a=this.lk.map(function(a){return a.clone()});return new vn(a,this.xv)},Qm:function(){this.lk.reverse().map(function(a){a.Qm()});this.tg.Qm()}};
function wn(a,b,c,d,e,g){for(var k=0,l=[],q=0;q<a.lk.length;q++){var p=b.ke.Xk(a.lk[q].ug())-b.vs,p=-1E-5>p?2:1E-5<p?1:0,k=k|p;l.push(p)}switch(k){case 0:(0<b.ke.Xk(a.tg.ke)?c:d).push(a);break;case 1:e.push(a);break;case 2:g.push(a);break;case 3:c=[];d=[];for(q=0;q<a.lk.length;q++){var s=(q+1)%a.lk.length,p=l[q],r=l[s],k=a.lk[q],s=a.lk[s];2!=p&&c.push(k);1!=p&&d.push(2!=p?k.clone():k);3==(p|r)&&(p=(b.vs-b.ke.Xk(k.ug()))/b.ke.Xk(qn(s.ug(),k.ug())),p=new tn(k.Lz.Au(s.ug(),p),k.ke.Au(s.ke,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new vn(c,a.xv));3<=d.length&&g.push(new vn(d,a.xv))}};function xn(a){this.$d=this.xe=this.tg=null;this.sc=[];a&&yn(this,a)}xn.prototype={clone:function(){var a=new xn;zn(a,this.tg&&this.tg.clone());An(a,this.xe&&this.xe.clone());Bn(a,this.$d&&this.$d.clone());a.uv(this.sc.map(function(a){return a.clone()}));return a},kc:function(){for(var a=0;a<this.sc.length;a++)this.sc[a].Qm();this.tg.Qm();this.xe&&this.xe.kc();this.$d&&this.$d.kc();a=this.xe;this.xe=this.$d;this.$d=a},back:function(){return this.$d},uv:function(a){this.sc=a}};
function Bn(a,b){a.$d=b}function An(a,b){a.xe=b}function zn(a,b){a.tg=b}function yn(a,b){if(b.length){a.tg||(a.tg=b[0].tg.clone());for(var c=[],d=[],e=0;e<b.length;e++)wn(b[e],a.tg,a.sc,a.sc,c,d);c.length&&(a.xe||(a.xe=new xn),yn(a.xe,c));d.length&&(a.$d||(a.$d=new xn),yn(a.$d,d))}}function Cn(a){var b=a.sc.slice();a.xe&&(b=b.concat(Cn(a.xe)));a.$d&&(b=b.concat(Cn(a.$d)));return b}function Dn(a,b){a.sc=En(b,a.sc);a.xe&&Dn(a.xe,b);a.$d&&Dn(a.$d,b)}
function En(a,b){if(!a.tg)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)wn(b[e],a.tg,c,d,c,d);a.xe&&(c=En(a.xe,c));d=a.$d?En(a.$d,d):[];return c.concat(d)};function Fn(){this.sc=[]}function Gn(a){var b=new Fn;b.uv(a);return b}
Fn.prototype={clone:function(){var a=new Fn;a.uv(this.sc.map(function(a){return a.clone()}));return a},EA:function(a){var b=new xn(this.clone().sc);a=new xn(a.clone().sc);Dn(b,a);Dn(a,b);a.kc();Dn(a,b);a.kc();yn(b,Cn(a));return Gn(Cn(b))},zd:function(a){var b=new xn(this.clone().sc);a=new xn(a.clone().sc);b.kc();Dn(b,a);Dn(a,b);a.kc();Dn(a,b);a.kc();yn(b,Cn(a));b.kc();return Gn(Cn(b))},vy:function(a){var b=new xn(this.clone().sc);a=new xn(a.clone().sc);b.kc();Dn(a,b);a.kc();Dn(b,a);Dn(a,b);yn(b,Cn(a));
b.kc();return Gn(Cn(b))},inverse:function(){var a=this.clone();a.sc.map(function(a){a.Qm()});return a},uv:function(a){this.sc=a}};function Hn(){}function In(a){for(var b=a.G.count,c=[],d=0,d=0;d<b;d+=3){var e=a.G.get(d),g=a.G.get(d+1),k=a.G.get(d+2),l=a.ra.get(d),q=a.ra.get(d+1),p=a.ra.get(d+2),s=a.$a;a.Jd&&0<a.Jd.length&&(s=a.Jd.get(d));var r=[];r.push(new tn(e,l));r.push(new tn(g,q));r.push(new tn(k,p));c.push(new vn(r,s))}return Gn(c)}
function Jn(a,b){if(!(null!=b&&b instanceof Fn))throw Error("Invalid CSG object.");var c=new id,d=[];Gb(b.sc,function(a){var b=[],k=a.xv,b=Gb(a.lk,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.tK=Gb(c.unique(),function(a){return[a.ug().x(),a.ug().y(),a.ug().z()]});a.sK=Gb(c.unique(),function(a){return[a.ke.x(),a.ke.y(),a.ke.z()]});a.rK=Gb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.G=new hd(9*d.length);
a.ra=new hd(9*d.length);a.Jd=new hd(9*d.length);Gb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.tK,q=this.sK,p=this.rK;this.G.add(d[b][0],d[b][1],d[b][2]);this.G.add(d[c][0],d[c][1],d[c][2]);this.G.add(d[a][0],d[a][1],d[a][2]);this.ra.add(q[b][0],q[b][1],q[b][2]);this.ra.add(q[c][0],q[c][1],q[c][2]);this.ra.add(q[a][0],q[a][1],q[a][2]);p[b]&&this.Jd.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Jd.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Jd.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Jd.fb&&(a.Jd=null);
a.Xe=Yd}Hn.prototype.EA=function(a){if(null==a||!(a instanceof Fn||a instanceof ae))throw Error("Invalid object.");var b=a;a instanceof ae&&(b=In(b));a=new ae;za(a,new Hn);Jn(a,In(this).EA(b));return a};Hn.prototype.zd=function(a){if(null==a||!(a instanceof Fn||a instanceof ae))throw Error("Invalid object.");var b=a;a instanceof ae&&(b=In(b));a=new ae;za(a,new Hn);Jn(a,In(this).zd(b));return a};
Hn.prototype.vy=function(a){if(null==a||!(a instanceof Fn||a instanceof ae))throw Error("Invalid object.");var b=a;a instanceof ae&&(b=In(b));a=new ae;za(a,new Hn);Jn(a,In(this).vy(b));return a};Hn.prototype.inverse=function(){var a=new ae;za(a,new Hn);Jn(a,In(this).inverse());return a};h("X.constructable",Hn);h("X.constructable.prototype.intersect",Hn.prototype.vy);h("X.constructable.prototype.inverse",Hn.prototype.inverse);h("X.constructable.prototype.subtract",Hn.prototype.zd);
h("X.constructable.prototype.union",Hn.prototype.EA);function Kn(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new nn(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new tn(on(c,pn(e,d)),e))}this.sc=[];a=a||{};var c=new nn(a.zi||[0,0,0]),d=a.di||1,e=a.Ua||16;a=a.kS||8;for(var g=[],k=[],l=0;l<e;l++)for(var q=0;q<a;q++)k=[],b(l/e,q/a),0<q&&b((l+1)/e,q/a),q<a-1&&b((l+1)/e,(q+1)/a),b(l/e,(q+1)/a),g.push(new vn(k));return Gn(g)}m(Kn,Fn);function Ln(){ae.call(this);this.r="sphere";this.nb=[0,0,0];this.mm=5;this.Yd=32;this.yK=16;za(this,new Hn)}m(Ln,ae);Ln.prototype.__defineGetter__("center",function(){return this.nb});Ln.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center");this.nb=a});Ln.prototype.__defineGetter__("radius",function(){return this.mm});Ln.prototype.__defineSetter__("radius",function(a){if(!ma(a))throw Error("Invalid radius.");this.mm=a});
Ln.prototype.ua=function(){Jn(this,new Kn({zi:this.nb,di:this.mm,Ua:this.Yd,kS:this.yK}));Ln.d.ua.call(this)};h("X.sphere",Ln);h("X.sphere.prototype.modified",Ln.prototype.ua);function Ne(a){ae.call(this);this.r="slice";this.nb=[0,0,0];this.Xn=[0,0,1];this.Oc=[0,1,0];this.it=[1,0,0];this.ab=this.sb=10;this.jo=[0,1,0,0,1,1,1,1,1,0,0,0];this.p=this.uj=null;this.nj=!0;this.Tn=[1,1,1];null!=a&&this.Bm(a)}m(Ne,ae);Ne.prototype.Bm=function(a){this.nb=a.nb.slice();this.Xn=a.Xn.slice();this.Oc=a.Oc.slice();this.sb=a.sb;this.ab=a.ab;this.uj=a.uj;this.p=a.p;this.nj=a.nj;this.Tn=a.Tn;this.vK=a.vK;Ne.d.Bm.call(this,a)};Ne.prototype.__defineSetter__("height",function(a){this.ab=a});
Ne.prototype.__defineSetter__("width",function(a){this.sb=a});Ne.prototype.create=function(){this.Jg()};
Ne.prototype.Jg=function(){var a=(new ud(this.Xn[0],this.Xn[1],this.Xn[2])).normalize(),b=new ud(this.Oc[0],this.Oc[1],this.Oc[2]),c=new ud(this.it[0],this.it[1],this.it[2]),d=new ud(this.nb[0],this.nb[1],this.nb[2]),e=xd(c.clone().kc().scale(this.sb/2),b.clone().kc().scale(this.ab/2)),g=new ud(e.x+d.x,e.y+d.y,e.z+d.z),e=xd(c.clone().kc().scale(this.sb/2),b.clone().scale(this.ab/2)),k=new ud(e.x+d.x,e.y+d.y,e.z+d.z),e=xd(c.clone().scale(this.sb/2),b.clone().kc().scale(this.ab/2)),l=new ud(e.x+d.x,
e.y+d.y,e.z+d.z),e=xd(c.clone().scale(this.sb/2),b.clone().scale(this.ab/2)),b=new ud(e.x+d.x,e.y+d.y,e.z+d.z);this.G=new hd(18);this.ra=new hd(18);this.G.add(g.x,g.y,g.z);this.G.add(k.x,k.y,k.z);this.G.add(l.x,l.y,l.z);this.G.add(l.x,l.y,l.z);this.G.add(b.x,b.y,b.z);this.G.add(k.x,k.y,k.z);this.ra.add(a.x,a.y,a.z);this.ra.add(a.x,a.y,a.z);this.ra.add(a.x,a.y,a.z);this.ra.add(a.x,a.y,a.z);this.ra.add(a.x,a.y,a.z);this.ra.add(a.x,a.y,a.z);this.nj&&(a=new ae,a.G=new hd(24),a.ra=new hd(24),a.G.add(g.x,
g.y,g.z),a.G.add(k.x,k.y,k.z),a.G.add(k.x,k.y,k.z),a.G.add(b.x,b.y,b.z),a.G.add(b.x,b.y,b.z),a.G.add(l.x,l.y,l.z),a.G.add(l.x,l.y,l.z),a.G.add(g.x,g.y,g.z),a.ra.add(0,0,0),a.ra.add(0,0,0),a.ra.add(0,0,0),a.ra.add(0,0,0),a.ra.add(0,0,0),a.ra.add(0,0,0),a.ra.add(0,0,0),a.ra.add(0,0,0),a.$a=[this.Tn[0],this.Tn[1],this.Tn[2]],a.Xe="LINES",a.bo=2,this.k.push(a))};h("X.slice",Ne);h("X.slice.prototype.create",Ne.prototype.create);function F(a){ae.call(this);this.r="volume";this.nb=[0,0,0];this.Qb=[10,10,10];this.Id=[1,1,1];this.bq=[10,10,10];this.sj=[1,1,1];this.xh=[];this.$n=this.rj=this.Zn=this.qj=this.Yn=this.pj=0;this.dq=new ae;this.eq=new ae;this.fq=new ae;this.nt=this.fg=!1;this.pc=-1;this.mt=[];this.p=null;this.nj=!0;this.Ac=Infinity;this.zc=-Infinity;this.gC=!0;this.Mc=0;this.ma=null;za(this,new ld);za(this,new Zd);null!=a&&this.Bm(a)}m(F,ae);
F.prototype.Bm=function(a){this.nb=a.nb.slice();this.Qb=a.Qb.slice();this.sj=a.sj.slice();this.pj=a.pj;this.Yn=a.Yn;this.qj=a.qj;this.Zn=a.Zn;this.rj=a.rj;this.$n=a.$n;this.QB=a.QB.slice();this.dq=new ae(a.dq);this.eq=new ae(a.eq);this.fq=new ae(a.fq);this.Mc=a.Mc;this.ma=a.ma;this.fg=a.fg;this.nt=a.nt;this.pc=a.pc;this.p=a.p;this.nj=a.nj;F.d.Bm.call(this,a)};
F.prototype.Jg=function(a){this.k.length=0;this.dq.k.length=0;this.eq.k.length=0;this.fq.k.length=0;this.k.push(this.dq);this.k.push(this.eq);this.k.push(this.fq);this.Se=a.bm;this.kw=a.dm;this.mj=a.am;this.Sn=a.Xf;this.oK=a.Zf;this.Mc=a.max;this.ma=a.data;this.Q=!0};
F.prototype.ua=function(a){a="undefined"!==typeof a?a:!0;if(0<this.k.length){this.fg!=this.nt&&(this.fg||-1==this.pc||(this.k[this.pc].visible=!1),this.Q=!0,this.nt=this.fg);if(!this.Rb)return;for(var b=0,b=0;3>b;b++){var c=this.k[b],d=0,e=0;0==b?(d=this.pj,e=this.Yn,this.Yn=this.pj):1==b?(d=this.qj,e=this.Zn,this.Zn=this.qj):2==b&&(d=this.rj,e=this.$n,this.$n=this.rj);if(null==this.k[b].k[parseInt(d,10)]){var g=Cd();g[0]=this.e[b].R[0][0][0]+this.e[b].hb[0]*parseInt(d,10);g[1]=this.e[b].R[0][0][1]+
this.e[b].hb[1]*parseInt(d,10);g[2]=this.e[b].R[0][0][2]+this.e[b].hb[2]*parseInt(d,10);if(this.Gb){var k=Me(g,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.p.ad,this.p,this.p.Gb,this.p.Te.sf);this.p.k[b].k[parseInt(d,10)]=k;this.p.k[b].ua(!0)}g=Me(g,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.ad,this,!0,null);this.Gb&&(g.p=g.rb,g.p=this.p.k[b].k[parseInt(d,10)].rb);c.k[parseInt(d,10)]=g;this.k[b].ua(!0)}e=c.k[parseInt(e,10)];this.fg||(e.visible=!1);c=c.k[parseInt(d,10)];c.visible=!0;
c.Wd=1;this.fg&&(c.k[0].Rb=!1,b!=this.pc&&(c.visible=!1,c.Wd=0))}this.fg&&-1!=this.pc&&Mn(this,this.pc)}a&&F.d.ua.call(this)};F.prototype.__defineGetter__("dimensions",function(){return this.Qb});F.prototype.__defineSetter__("dimensions",function(a){this.Qb=a});F.prototype.__defineGetter__("spacing",function(){return this.sj});F.prototype.__defineSetter__("spacing",function(a){this.sj=a});F.prototype.__defineGetter__("bbox",function(){return this.Id});F.prototype.__defineGetter__("range",function(){return this.bq});
F.prototype.__defineGetter__("dimensionsRAS",function(){return this.QB});F.prototype.__defineGetter__("volumeRendering",function(){return this.fg});F.prototype.__defineSetter__("volumeRendering",function(a){this.fg=a;this.ua(!1)});F.prototype.__defineGetter__("visible",function(){return this.Rb});F.prototype.__defineSetter__("visible",function(a){if(a)this.Rb=a,this.ua(!1);else{for(var b=this.k,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Rb=a;this.Q=!0}});
F.prototype.__defineGetter__("center",function(){return this.nb});F.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center.");this.nb=a});F.prototype.__defineGetter__("volumeRenderingCache",function(){return this.mt});F.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&ia(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.mt=a});F.prototype.__defineGetter__("image",function(){return this.xh});
F.prototype.__defineGetter__("labelmap",function(){this.p||(this.p=new Nn(this));return this.p});F.prototype.__defineGetter__("indexX",function(){return this.pj});F.prototype.__defineSetter__("indexX",function(a){ma(a)&&0<=a&&a<this.dq.k.length&&(this.pj=a,this.ua(!1))});F.prototype.__defineGetter__("indexY",function(){return this.qj});F.prototype.__defineSetter__("indexY",function(a){ma(a)&&0<=a&&a<this.eq.k.length&&(this.qj=a,this.ua(!1))});F.prototype.__defineGetter__("indexZ",function(){return this.rj});
F.prototype.__defineSetter__("indexZ",function(a){ma(a)&&0<=a&&a<this.fq.k.length&&(this.rj=a,this.ua(!1))});F.prototype.__defineGetter__("windowLow",function(){return this.Ac});F.prototype.__defineSetter__("windowLow",function(a){this.Ac=a});F.prototype.__defineGetter__("windowHigh",function(){return this.zc});F.prototype.__defineSetter__("windowHigh",function(a){this.zc=a});F.prototype.__defineGetter__("borders",function(){return this.nj});
F.prototype.__defineSetter__("borders",function(a){this.nj=a});F.prototype.__defineGetter__("reslicing",function(){return this.gC});F.prototype.__defineSetter__("reslicing",function(a){this.gC=a});F.prototype.__defineSetter__("xNormX",function(a){this.e[0].N[0]=a});F.prototype.__defineGetter__("xNormX",function(){return this.e[0].N[0]});F.prototype.__defineSetter__("xNormY",function(a){this.e[0].N[1]=a});F.prototype.__defineGetter__("xNormY",function(){return this.e[0].N[1]});
F.prototype.__defineSetter__("xNormZ",function(a){this.e[0].N[2]=a});F.prototype.__defineGetter__("xNormZ",function(){return this.e[0].N[2]});F.prototype.__defineSetter__("xColor",function(a){this.e[0].$a=a});F.prototype.__defineGetter__("xColor",function(){return this.e[0].$a});F.prototype.__defineSetter__("yNormX",function(a){this.e[1].N[0]=a});F.prototype.__defineGetter__("yNormX",function(){return this.e[1].N[0]});F.prototype.__defineSetter__("yNormY",function(a){this.e[1].N[1]=a});
F.prototype.__defineGetter__("yNormY",function(){return this.e[1].N[1]});F.prototype.__defineSetter__("yNormZ",function(a){this.e[1].N[2]=a});F.prototype.__defineGetter__("yNormZ",function(){return this.e[1].N[2]});F.prototype.__defineSetter__("yColor",function(a){this.e[1].$a=a});F.prototype.__defineGetter__("yColor",function(){return this.e[1].$a});F.prototype.__defineSetter__("zNormX",function(a){this.e[2].N[0]=a});F.prototype.__defineGetter__("zNormX",function(){return this.e[2].N[0]});
F.prototype.__defineSetter__("zNormY",function(a){this.e[2].N[1]=a});F.prototype.__defineGetter__("zNormY",function(){return this.e[2].N[1]});F.prototype.__defineSetter__("zNormZ",function(a){this.e[2].N[2]=a});F.prototype.__defineGetter__("zNormZ",function(){return this.e[2].N[2]});F.prototype.__defineSetter__("zColor",function(a){this.e[2].$a=a});F.prototype.__defineGetter__("zColor",function(){return this.e[2].$a});
F.prototype.dS=function(a){this.k[a].visible=!1;for(var b=0;b<this.k[a].k.length;b++)"undefined"!=typeof this.k[a].k[b]&&(this.Gb&&(this.p.k[a].k[b].remove(),this.p.k[a].k[b]=null),this.k[a].k[b].remove(),this.k[a].k[b]=null);Ed(this.e[a].N,this.e[a].N);Oe(a,this.e[a].cq,this.e[a].N,this);this.k[a].k=[];this.k[a].k=Array(this.e[a].ta);this.Gb&&(b=Me(this.e[a].cq,this.e[a].Ve,this.e[a].N,this.e[a].$a,this.Id,this.p.ad,this.p,this.p.Gb,this.p.Te.sf),this.p.k[a].k=[],this.p.k[a].k=Array(this.e[a].ta),
this.p.k[a].k[Math.floor(this.e[a].ta/2)]=b,this.p.k[a].ua());b=Me(this.e[a].cq,this.e[a].Ve,this.e[a].N,this.e[a].$a,this.Id,this.ad,this,!0,null);this.Gb&&(b.p=b.rb,b.p=this.p.k[a].k[Math.floor(this.e[a].ta/2)].rb);this.k[a].k[Math.floor(this.e[a].ta/2)]=b;0==a?(this.pj=Math.floor(this.e[a].ta/2),this.Yn=Math.floor(this.e[a].ta/2)):1==a?(this.qj=Math.floor(this.e[a].ta/2),this.Zn=Math.floor(this.e[a].ta/2)):(this.rj=Math.floor(this.e[a].ta/2),this.$n=Math.floor(this.e[a].ta/2));this.k[a].ua();this.k[a].k[Math.floor(this.e[a].ta/
2)].Rb=!0};
function Mn(a,b){if(!a.Ys)if(!a.fg||!a.Q&&b==a.pc)a.pc=b;else if(-1==a.mt.indexOf(b))a.mt.push(b),a.Ys=!0,On(a,b),setTimeout(function(){var a=null;0<=this.pc&&(a=this.k[this.pc],a.visible=!1);var a=this.k[b],c=a.k.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.k[e]){var p=Cd();p[0]=this.e[b].R[0][0][0]+this.e[b].hb[0]*e;p[1]=this.e[b].R[0][0][1]+this.e[b].hb[1]*e;p[2]=this.e[b].R[0][0][2]+this.e[b].hb[2]*e;if(this.Gb){var s=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.p.ad,this.p,
this.p.Gb,this.p.Te.sf);this.p.k[b].k[e]=s;this.p.k[b].ua(!0)}p=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.ad,this,!0,null);p.k[0].Rb=!1;this.Gb&&(p.p=p.rb,p.p=this.p.k[b].k[e].rb);a.k[e]=p}a.k[e].Rb=!0}Pn(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.k[e]){var p=Cd();p[0]=this.e[b].R[0][0][0]+this.e[b].hb[0]*e;p[1]=this.e[b].R[0][0][1]+this.e[b].hb[1]*e;p[2]=this.e[b].R[0][0][2]+this.e[b].hb[2]*e;if(this.Gb){var s=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.p.ad,
this.p,this.p.Gb,this.p.Te.sf);this.p.k[b].k[e]=s;this.p.k[b].ua(!0)}p=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.ad,this,!0,null);p.k[0].Rb=!1;this.Gb&&(p.p=p.rb,p.p=this.p.k[b].k[e].rb);a.k[e]=p}a.k[e].Rb=!0}Pn(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.k[e]){var p=Cd();p[0]=this.e[b].R[0][0][0]+this.e[b].hb[0]*e;p[1]=this.e[b].R[0][0][1]+this.e[b].hb[1]*e;p[2]=this.e[b].R[0][0][2]+this.e[b].hb[2]*e;if(this.Gb){var r=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,
this.p.ad,this.p,this.p.Gb,this.p.Te.sf);this.p.k[b].k[e]=r;this.p.k[b].ua(!0)}p=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.ad,this,!0,null);p.k[0].Rb=!1;this.Gb&&(p.p=p.rb,p.p=this.p.k[b].k[e].rb);a.k[e]=p}a.k[e].Rb=!0}Pn(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.k[e]){var p=Cd();p[0]=this.e[b].R[0][0][0]+this.e[b].hb[0]*e;p[1]=this.e[b].R[0][0][1]+this.e[b].hb[1]*e;p[2]=this.e[b].R[0][0][2]+this.e[b].hb[2]*e;if(this.Gb){var r=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,
this.Id,this.p.ad,this.p,this.p.Gb,this.p.Te.sf);this.p.k[b].k[e]=r;this.p.k[b].ua(!0)}p=Me(p,this.e[b].Ve,this.e[b].N,this.e[b].$a,this.Id,this.ad,this,!0,null);p.k[0].Rb=!1;this.Gb&&(p.p=p.rb,p.p=this.p.k[b].k[e].rb);a.k[e]=p}a.k[e].Rb=!0}Pn(this,1);setTimeout(function(){this.Ys&&this.k[b].ua(!0);this.pc=b;this.Q=!1;if(this.Ys){var a=new Ge;a.gb=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Ys=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.k[a.pc];
c.visible=!1;var c=a.k[b],d=c.k.length,e;for(e=0;e<d;e++)c.k[e].Rb=!0;a.pc=b;a.Q=!1}}function On(a,b){var c=new Ee;c.gb=a;a.dispatchEvent(c);a.onComputing(b)}function Pn(a,b){var c=new Fe;c.qm=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}F.prototype.jz=function(){};F.prototype.lz=function(){};F.prototype.kz=function(){};h("X.volume",F);h("X.volume.prototype.modified",F.prototype.ua);h("X.volume.prototype.sliceInfoChanged",F.prototype.dS);h("X.volume.prototype.onComputing",F.prototype.jz);
h("X.volume.prototype.onComputingProgress",F.prototype.lz);h("X.volume.prototype.onComputingEnd",F.prototype.kz);function Qn(a,b){ed.call(this);this.o=a;var c=bi(this.o)?this.o:this.o?this.o.body:null;this.$O=!!c&&Gi(c);this.XF=C(this.o,lc?"DOMMouseScroll":"mousewheel",this,b)}m(Qn,ed);
Qn.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Nd;if("mousewheel"==a.type){c=1;if(kc||mc&&(gc||uc("532.0")))c=40;d=Rn(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=Rn(-a.wheelDeltaX,c),c=Rn(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;ma(this.gG)&&(b=nd(b,-this.gG,this.gG));ma(this.hG)&&(c=nd(c,-this.hG,this.hG));this.$O&&(b=-b);b=new Sn(d,a,b,c);this.dispatchEvent(b)};function Rn(a,b){return mc&&(fc||hc)&&0!=a%b?a:a/b}
Qn.prototype.g=function(){Qn.d.g.call(this);Zc(this.XF);this.XF=null};function Sn(a,b,c,d){Kc.call(this,b);this.type="mousewheel";this.detail=a;this.Fj=c;this.af=d}m(Sn,Kc);function Tn(){ed.call(this)}m(Tn,ed);f=Tn.prototype;f.ji=0;f.Yh=0;f.Xg=100;f.kg=0;f.gk=1;f.Gf=!1;f.fn=!1;f.S=function(a){a=Un(this,a);this.ji!=a&&(this.ji=a+this.kg>this.Xg?this.Xg-this.kg:a<this.Yh?this.Yh:a,this.Gf||this.fn||this.dispatchEvent("change"))};f.$=function(){return Un(this,this.ji)};f.Dl=function(a){a=Un(this,a);this.kg!=a&&(this.kg=0>a?0:this.ji+a>this.Xg?this.Xg-this.ji:a,this.Gf||this.fn||this.dispatchEvent("change"))};
f.Ng=function(){var a=this.kg;return null==this.gk?a:Math.round(a/this.gk)*this.gk};f.Lf=function(a){if(this.Yh!=a){var b=this.Gf;this.Gf=!0;this.Yh=a;a+this.kg>this.Xg&&(this.kg=this.Xg-this.Yh);a>this.ji&&this.S(a);a>this.Xg&&(this.kg=0,this.Fe(a),this.S(a));(this.Gf=b)||this.fn||this.dispatchEvent("change")}};f.Sa=function(){return Un(this,this.Yh)};
f.Fe=function(a){a=Un(this,a);if(this.Xg!=a){var b=this.Gf;this.Gf=!0;this.Xg=a;a<this.ji+this.kg&&this.S(a-this.kg);a<this.Yh&&(this.kg=0,this.Lf(a),this.S(this.Xg));a<this.Yh+this.kg&&(this.kg=this.Xg-this.Yh);(this.Gf=b)||this.fn||this.dispatchEvent("change")}};f.Da=function(){return Un(this,this.Xg)};f.Lj=function(){return this.gk};f.Xi=function(a){this.gk!=a&&(this.gk=a,a=this.Gf,this.Gf=!0,this.Fe(this.Da()),this.Dl(this.Ng()),this.S(this.$()),(this.Gf=a)||this.fn||this.dispatchEvent("change"))};
function Un(a,b){return null==a.gk?b:a.Yh+Math.round((b-a.Yh)/a.gk)*a.gk};function Vn(a,b){wj.call(this,a);this.NC=null;this.cb=new Tn;this.bP=b||md;C(this.cb,"change",this.tF,!1,this)}m(Vn,wj);f=Vn.prototype;f.Za="horizontal";f.cr=!1;f.wP=!1;f.yi=10;f.Fu=0;f.OF=!0;f.Iu=0;f.yJ=1E3;f.Md=!0;f.mg=!1;f.D=function(){Vn.d.D.call(this);var a=this.W().D("div",this.ja(this.Za));this.yf(a)};f.yf=function(a){Vn.d.yf.call(this,a);Pj(a,this.ja(this.Za));this.DD();Vj(this.a(),"slider");Wn(this)};
f.Db=function(){Vn.d.Db.call(this);this.Sf=new gj(this.Ha);this.Qh=new gj(this.xd);this.Sf.al(this.mg);this.Qh.al(this.mg);this.Sf.xx=this.Qh.xx=ea;this.Tb=new Wl(this.a());Xn(this,!0);this.a().tabIndex=0;this.ej()};
function Xn(a,b){b?(a.Fb().F(a.Sf,"beforedrag",a.au).F(a.Qh,"beforedrag",a.au).F(a.Sf,["start","end"],a.fu).F(a.Qh,["start","end"],a.fu).F(a.Tb,"key",a.bu).F(a.a(),"click",a.cu).F(a.a(),"mousedown",a.cu),a.OF&&Yn(a,!0)):(a.Fb().Ub(a.Sf,"beforedrag",a.au).Ub(a.Qh,"beforedrag",a.au).Ub(a.Sf,["start","end"],a.fu).Ub(a.Qh,["start","end"],a.fu).Ub(a.Tb,"key",a.bu).Ub(a.a(),"click",a.cu).Ub(a.a(),"mousedown",a.cu),a.OF&&Yn(a,!1))}f.wd=function(){Vn.d.wd.call(this);Gc(this.Sf,this.Qh,this.Tb,this.en)};
f.au=function(a){var b=a.Fx==this.Sf?this.Ha:this.xd,c;"vertical"==this.Za?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.Da()-this.Sa())+this.Sa()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.Da()-this.Sa())+this.Sa();c=a.Fx==this.Sf?Math.min(Math.max(c,this.Sa()),this.$()+this.Ng()):Math.min(Math.max(c,this.$()),this.Da());Zn(this,b,c)};
f.fu=function(a){var b="start"==a.type;Tj(this.a(),"goog-slider-dragging",b);Tj(a.target.handle,"goog-slider-thumb-dragging",b);a=a.Fx==this.Sf;b?(this.dispatchEvent("k"),this.dispatchEvent(a?"g":"i")):(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j"))};
f.bu=function(a){var b=!0;switch(a.keyCode){case 36:$n(this,this.Sa());break;case 35:$n(this,this.Da());break;case 33:ao(this,this.yi);break;case 34:ao(this,-this.yi);break;case 37:var c=this.mg&&this.qg()?1:-1;ao(this,a.shiftKey?c*this.yi:c*this.qs);break;case 40:ao(this,a.shiftKey?-this.yi:-this.qs);break;case 39:c=this.mg&&this.qg()?-1:1;ao(this,a.shiftKey?c*this.yi:c*this.qs);break;case 38:ao(this,a.shiftKey?this.yi:this.qs);break;default:b=!1}b&&a.preventDefault()};
f.cu=function(a){this.a().focus&&this.a().focus();var b=a.target;ci(this.Ha,b)||ci(this.xd,b)||(b="click"==a.type,b&&ya()<this.Iu+this.yJ||(b||(this.Iu=ya()),this.wP?$n(this,bo(this,a)):(this.rA(a),this.jh=co(this,bo(this,a)),this.HF="vertical"==this.Za?this.xu<this.jh.offsetTop:this.xu>eo(this,this.jh)+this.jh.offsetWidth,a=Gh(this.a()),this.Fb().F(a,"mouseup",this.qA,!0).F(this.a(),"mousemove",this.rA),this.sl||(this.sl=new Uf(200),this.Fb().F(this.sl,Vf,this.uF)),this.uF(),this.sl.start())))};
f.sF=function(a){ao(this,(0<a.detail?-1:1)*this.qs);a.preventDefault()};f.uF=function(){var a;if("vertical"==this.Za){var b=this.xu,c=this.jh.offsetTop;this.HF?b<c&&(a=fo(this,this.jh)+this.yi):b>c+this.jh.offsetHeight&&(a=fo(this,this.jh)-this.yi)}else b=this.xu,c=eo(this,this.jh),this.HF?b>c+this.jh.offsetWidth&&(a=fo(this,this.jh)+this.yi):b<c&&(a=fo(this,this.jh)-this.yi);ca(a)&&Zn(this,this.jh,a)};
f.qA=function(){this.sl&&this.sl.stop();var a=Gh(this.a());this.Fb().Ub(a,"mouseup",this.qA,!0).Ub(this.a(),"mousemove",this.rA)};function go(a,b){var c=Hi(b,a.a());return"vertical"==a.Za?c.y:a.mg&&a.qg()?a.a().clientWidth-c.x:c.x}f.rA=function(a){this.xu=go(this,a)};function bo(a,b){var c=a.Sa(),d=a.Da();if("vertical"==a.Za){var e=a.Ha.offsetHeight,g=a.a().clientHeight-e,e=go(a,b)-e/2;return(d-c)*(g-e)/g+c}e=a.Ha.offsetWidth;g=a.a().clientWidth-e;e=go(a,b)-e/2;return(d-c)*e/g+c}
function fo(a,b){if(b==a.Ha)return a.cb.$();if(b==a.xd)return a.cb.$()+a.cb.Ng();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.Wh=function(){return this.Sf.Wh()||this.Qh.Wh()};function ao(a,b){Math.abs(b)<a.Lj()&&(b=(0==b?0:0>b?-1:1)*a.Lj());var c=fo(a,a.Ha)+b,d=fo(a,a.xd)+b,c=nd(c,a.Sa(),a.Da()-a.Fu),d=nd(d,a.Sa()+a.Fu,a.Da());ho(a,c,d-c)}function Zn(a,b,c){var d=Un(a.cb,c);c=b==a.Ha?d:a.cb.$();b=b==a.xd?d:a.cb.$()+a.cb.Ng();c>=a.Sa()&&b>=c+a.Fu&&a.Da()>=b&&ho(a,c,b-c)}
function ho(a,b,c){a.Sa()<=b&&b<=a.Da()-c&&a.Fu<=c&&c<=a.Da()-b&&(b!=a.$()||c!=a.Ng())&&(a.cb.fn=!0,a.cb.Dl(0),a.cb.S(b),a.cb.Dl(c),a.cb.fn=!1,a.tF())}f.Sa=function(){return this.cb.Sa()};f.Lf=function(a){this.cb.Lf(a)};f.Da=function(){return this.cb.Da()};f.Fe=function(a){this.cb.Fe(a)};function co(a,b){return b<=a.cb.$()+a.cb.Ng()/2?a.Ha:a.xd}f.tF=function(){this.ej();Wn(this);this.dispatchEvent("change")};
f.ej=function(){if(this.Ha&&!this.cr){var a=io(this,fo(this,this.Ha)),b=io(this,fo(this,this.xd));if("vertical"==this.Za)this.Ha.style.top=a.y+"px",this.xd.style.top=b.y+"px",this.Gc&&(a=jo(b.y,a.y,this.Ha.offsetHeight),this.Gc.style.top=a.offset+"px",this.Gc.style.height=a.size+"px");else{var c=this.mg&&this.qg()?"right":"left";this.Ha.style[c]=a.x+"px";this.xd.style[c]=b.x+"px";this.Gc&&(a=jo(a.x,b.x,this.Ha.offsetWidth),this.Gc.style[c]=a.offset+"px",this.Gc.style.width=a.size+"px")}}};
function jo(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function io(a,b){var c=new th;if(a.Ha){var d=a.Sa(),e=a.Da(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Za?(d=a.a().clientHeight-a.Ha.offsetHeight,e=Math.round(e*d),c.x=eo(a,a.Ha),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.Ha.offsetWidth)),c.x=d,c.y=a.Ha.offsetTop)}return c}
function $n(a,b){b=nd(b,a.Sa(),a.Da());a.cr&&a.It.stop(!0);var c=new il,d,e=co(a,b),g=a.$(),k=a.Ng(),l=fo(a,e),q=io(a,l);d=a.Lj();Math.abs(b-l)<d&&(b=nd(l+(b>l?d:-d),a.Sa(),a.Da()));Zn(a,e,b);l=io(a,fo(a,e));d="vertical"==a.Za?[eo(a,e),l.y]:[l.x,e.offsetTop];q=new Yk(e,[q.x,q.y],d,100);q.al(a.mg);c.add(q);a.Gc&&ko(a,e,g,k,l,c);a.NC&&(e=a.NC.mW(g,b,100),A(e,function(a){c.add(a)}));a.It=c;a.Fb().F(c,"end",a.$L);a.cr=!0;c.play(!1)}f.cf=function(){return this.cr};
function ko(a,b,c,d,e,g){var k=io(a,c),l=io(a,c+d);c=k;d=l;b==a.Ha?c=e:d=e;"vertical"==a.Za?(b=jo(l.y,k.y,a.Ha.offsetHeight),k=jo(d.y,c.y,a.Ha.offsetHeight),e=new Yk(a.Gc,[eo(a,a.Gc),b.offset],[eo(a,a.Gc),k.offset],100),b=new al(a.Gc,b.size,k.size,100)):(b=jo(k.x,l.x,a.Ha.offsetWidth),k=jo(c.x,d.x,a.Ha.offsetWidth),e=new Yk(a.Gc,[b.offset,a.Gc.offsetTop],[k.offset,a.Gc.offsetTop],100),b=new $k(a.Gc,b.size,k.size,100));e.al(a.mg);b.al(a.mg);g.add(e);g.add(b)}f.$L=function(){this.cr=!1};
f.ek=function(a){if(this.Za!=a){var b=this.ja(this.Za),c=this.ja(a);this.Za=a;this.a()&&(a=this.a(),Oj(a,b)&&(Rj(a,b),Pj(a,c)),b=this.mg&&this.qg()?"right":"left",this.Ha.style[b]=this.Ha.style.top="",this.xd.style[b]=this.xd.style.top="",this.Gc&&(this.Gc.style[b]=this.Gc.style.top="",this.Gc.style.width=this.Gc.style.height=""),this.ej())}};f.Qc=function(){return this.Za};
f.g=function(){Vn.d.g.call(this);this.sl&&this.sl.i();delete this.sl;this.It&&this.It.i();delete this.It;delete this.Ha;delete this.xd;this.Gc&&delete this.Gc;this.cb.i();delete this.cb;this.Tb&&(this.Tb.i(),delete this.Tb);this.en&&(this.en.i(),delete this.en);this.Sf&&(this.Sf.i(),delete this.Sf);this.Qh&&(this.Qh.i(),delete this.Qh)};f.qs=1;f.Lj=function(){return this.cb.Lj()};f.Xi=function(a){this.cb.Xi(a)};f.$=function(){return this.cb.$()};f.S=function(a){Zn(this,this.Ha,a)};f.Ng=function(){return this.cb.Ng()};
f.Dl=function(a){Zn(this,this.xd,this.cb.$()+a)};f.wa=function(a){Ti(this.a(),a);a&&this.ej()};function Wn(a){var b=a.a();b&&(Wj(b,"valuemin",a.Sa()),Wj(b,"valuemax",a.Da()),Wj(b,"valuenow",a.$()),Wj(b,"valuetext",a.bP(a.$())||""))}function Yn(a,b){b?(a.en||(a.en=new Qn(a.a())),a.Fb().F(a.en,"mousewheel",a.sF)):a.Fb().Ub(a.en,"mousewheel",a.sF)}f.ld=function(a){this.Md!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Md=a,Xn(this,a),a||this.qA(),Tj(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Md};function eo(a,b){return a.mg?fj(b):b.offsetLeft};function lo(a){Vn.call(this,a);this.cb.S(this.Sa());this.cb.Dl(this.Da()-this.Sa())}m(lo,Vn);lo.prototype.ja=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};lo.prototype.Cm=function(a){a=this.W().D("div",a);Vj(a,"button");return a};
lo.prototype.DD=function(){var a=Ih(null,"goog-twothumbslider-value-thumb",this.a())[0],b=Ih(null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Ih(null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.Cm("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.Cm("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.W().D("div","goog-twothumbslider-rangehighlight"),this.W().uy(c,a));this.Ha=a;this.xd=b;this.Gc=c};function mo(){ae.call(this);this.r="fibers";za(this,new ld)}m(mo,ae);h("X.fibers",mo);U.v=function(){this.on=Rh("div",{id:this.constructor.ID_PREFIX+"_"+t(),"class":this.constructor.Bd});U.Ya.call(this,"",this.on,!0);R(this.Bc,U.v.CSS.MJ);this.Bc.style.marginTop="0px"};m(U.v,U.Ya);h("nrg.ui.ZippyTree",U.v);U.v.Sv=5;U.v.ID_PREFIX="nrg.ui.ZippyTree";U.v.CSS_SUFFIX={MJ:"rootnode"};U.v.bB=300;U.v.Yv="_nodeDepth";U.v.Ds="_maxDepth";f=U.v.prototype;f.cn=1;f.dl=!1;f.WO=!0;f.ar=1;f.Jx=0;f.jv=null;f.nh=null;f.Wz=function(a){this.KD=a};f.er=function(){return 0===Yh(this.so).length};
f.qD=function(){this.ms(function(a){a.rf.Sc(!1)},this)};f.sq=function(){this.qD()};f.wM=function(){var a=[];this.ms(function(b){a.push(b)},this);return a};f.eF=function(){var a=[];w(this.lf,function(b){a.push(b)});return a};f.Nm=function(){this.ms(function(a){a.rf.Sc(!0)},this)};f.ms=function(a,b){w(b.lf,function(b){a(b);this.ms(a,b)}.bind(this))};f.a=function(){return this.on};f.Sc=function(a,b){b=null!=b?b:this;if(null!=b.lf[a]){var c=b.lf[a];c.rf.Sc(!0);return c}};
f.pv=function(a,b){b=null!=b?b:this;if(null!=b.lf[a]){var c=b.lf[a];c.rf.Sc(!1);return c}};f.Wx=function(a){var b=this,c=[];A(a,function(a){c.push(b.lf[a]);b=b.lf[a]}.bind(this));return c};f.Gg=function(a,b){!ia(a)||bi(a)?no(this,a,b):A(a,function(a){this.Gg(a,b)}.bind(this))};function no(a,b,c){c?(c&&(c=ka(c)?[c]:c,c.length>a.cn&&(a.cn=c.length)),a.uq(c,a,b)):Vh(a.on,b)}
f.uq=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.so;if(0==a.length)oo(this,e,c),null!=c&&po(this,c,d-2);else{0<a.length&&a.length>this.cn&&(this.cn=a.length);if(b.lf[a[0]])e=b.lf[a[0]];else{var g=a[0];e.style.opacity=this.ar;var k=new U.Ya(g,e,!1);b.Bc.parentNode==this.on&&2==this.on.childNodes.length&&(k.Bc.style.marginTop="0px");k.Bc.style.left="inherit";k.Bc.style.width="inherit";qo(this,k);b.lf[g]=k;k.Bc.style.opacity=this.ar;e.style.opacity=1;this.dl&&ro(this,k.Bc);this.dispatchEvent({type:"n",
Jf:k});e=k}po(this,e.Bc,d-1);this.uq(1<a.length?a.slice(1):[],e,c,d+1)}};function po(a,b,c){b[U.v.Ds]!=a.cn&&(null==b[U.v.Ds]&&(b[U.v.Ds]=a.cn),c=0>c?0:c,null!=b[U.v.Yv]||(b[U.v.Yv]=c),b.style.width=(100-c*U.v.Sv).toString()+"%",b.style.left=(c*U.v.Sv).toString()+"%")}function qo(a,b){C(b,"d",function(){this.dispatchEvent({type:"d",Jf:b})}.bind(a));C(b,"f",function(){this.dispatchEvent({type:"f",Jf:b})}.bind(a));C(b,"e",function(){this.dispatchEvent({type:"e",Jf:b})}.bind(a))}
function ro(a,b){(new dl(b,a.Jx)).play()}f.eR=function(){this.dl&&1!=this.nh.ba&&this.nh.play()};f.BS=function(a){this.ar=(this.dl=!0===a)?0:1;this.Jx=this.dl?U.v.bB:0;this.dl&&(so(this),this.jv=[],this.nh=new il,C(this.nh,"end",this.oD.bind(this)))};
U.v.uM=function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Yh(a),d=b[U.Ya.Hs].toLowerCase(),e,g,k=c.length,l=0;l<k;l++){if(g=c[l],null!=g[U.Ya.Hs]&&(e=g[U.Ya.Hs].toLowerCase(),e=Na(d,e),0>e)){Xh(b,g);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)};
function oo(a,b,c){c&&(ll.pb(c,{position:"relative"}),c.style.opacity=a.ar,null!=a.KD?a.KD(b,c):b.appendChild(c),to(b),a.dl?ro(a,c,function(){this.dispatchEvent({type:"m"})}.bind(a)):a.dispatchEvent({type:"m"}))}function to(a){var b=[],c=[],d=Yh(a),e=d.length;A(d,function(a){Oj(a,U.Ya.CSS.As)?b.push(a):1==a.childNodes.length&&Oj(a.childNodes[0],U.Ya.CSS.ij)&&c.push(a)});A(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}
U.v.prototype.oD=function(){for(this.nh.i();this.jv.length;)this.nh.add(this.jv[0]),Cb.splice.call(this.jv,0,1);C(this.nh,"end",this.oD.bind(this));this.nh.play()};function so(a){null!=a.hH&&(U.XD(a.hH),delete a.hH);null!=a.nh&&(U.Bx(a.nh),delete a.nh)}U.v.prototype.g=function(){U.v.d.g.call(this);S(this.on);this.on;so(this);delete this.cn;delete this.dl;delete this.WO;delete this.ar;delete this.Jx};h("nrg.ui.ZippyTree.EventType",{iT:"m",BJ:"n"});h("nrg.ui.ZippyTree.INDENT_PCT",U.v.Sv);
h("nrg.ui.ZippyTree.ID_PREFIX",U.v.ID_PREFIX);h("nrg.ui.ZippyTree.CSS_SUFFIX",U.v.CSS_SUFFIX);h("nrg.ui.ZippyTree.FADE_TIME",U.v.bB);h("nrg.ui.ZippyTree.NODE_DEPTH_KEY",U.v.Yv);h("nrg.ui.ZippyTree.MAX_DEPTH_KEY",U.v.Ds);h("nrg.ui.ZippyTree.folderSorter",U.v.uM);h("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",U.v.prototype.Wz);h("nrg.ui.ZippyTree.prototype.isEmpty",U.v.prototype.er);h("nrg.ui.ZippyTree.prototype.contractAll",U.v.prototype.qD);h("nrg.ui.ZippyTree.prototype.collapseAll",U.v.prototype.sq);
h("nrg.ui.ZippyTree.prototype.getAllNodes",U.v.prototype.wM);h("nrg.ui.ZippyTree.prototype.getTopLevelNodes",U.v.prototype.eF);h("nrg.ui.ZippyTree.prototype.expandAll",U.v.prototype.Nm);h("nrg.ui.ZippyTree.prototype.traverse",U.v.prototype.ms);h("nrg.ui.ZippyTree.prototype.getElement",U.v.prototype.a);h("nrg.ui.ZippyTree.prototype.setExpanded",U.v.prototype.Sc);h("nrg.ui.ZippyTree.prototype.setCollapsed",U.v.prototype.pv);h("nrg.ui.ZippyTree.prototype.getFolderNodes",U.v.prototype.Wx);
h("nrg.ui.ZippyTree.prototype.addContents",U.v.prototype.Gg);h("nrg.ui.ZippyTree.prototype.createBranch",U.v.prototype.uq);h("nrg.ui.ZippyTree.prototype.playFx",U.v.prototype.eR);h("nrg.ui.ZippyTree.prototype.toggleFadeInFx",U.v.prototype.BS);h("nrg.ui.ZippyTree.prototype.disposeInternal",U.v.prototype.g);function uo(){}m(uo,Nl);fa(uo);uo.prototype.D=function(a){var b=a.W().D("span",this.Rm(a).join(" "));vo(this,b,a.Ok);return b};uo.prototype.jc=function(a,b){b=uo.d.jc.call(this,a,b);var c=Nj(b),d=wo;Lb(c,xo(this,yo))?d=yo:Lb(c,xo(this,zo))?d=zo:Lb(c,xo(this,wo))&&(d=wo);a.Ok=d;Wj(b,"checked",d==yo?"mixed":d==zo?"true":"false");return b};uo.prototype.Fi=function(){return"checkbox"};
function vo(a,b,c){if(b){var d=xo(a,c);Oj(b,d)||(w(Ao,function(a){a=xo(this,a);Tj(b,a,a==d)},a),Wj(b,"checked",c==yo?"mixed":c==zo?"true":"false"))}}uo.prototype.ja=function(){return"goog-checkbox"};function xo(a,b){var c=a.ja();if(b==zo)return c+"-checked";if(b==wo)return c+"-unchecked";if(b==yo)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function Bo(a,b,c){c=c||uo.Ef();bm.call(this,null,c,b);this.Ok=ca(a)?a:wo}m(Bo,bm);var zo=!0,wo=!1,yo=null,Ao={cT:zo,SU:wo,TU:yo};f=Bo.prototype;f.Dc=null;f.vl=function(){return this.Ok==zo};f.fh=function(a){a!=this.Ok&&(this.Ok=a,vo(this.fc(),this.a(),this.Ok))};f.gi=function(a){this.ya?(this.wd(),this.Dc=a,this.Db()):this.Dc=a};f.toggle=function(){this.fh(this.Ok?wo:zo)};
f.Db=function(){Bo.d.Db.call(this);if(this.Xm){var a=this.Fb();this.Dc&&a.F(this.Dc,"click",this.hy).F(this.Dc,"mouseover",this.Ym).F(this.Dc,"mouseout",this.du).F(this.Dc,"mousedown",this.Ji).F(this.Dc,"mouseup",this.Uh);a.F(this.a(),"click",this.hy)}this.Dc&&(this.Dc.id||(this.Dc.id=zj(this)+".lbl"),Wj(this.a(),"labelledby",this.Dc.id))};f.ld=function(a){Bo.d.ld.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.hy=function(a){a.stopPropagation();var b=this.Ok?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.Th=function(a){32==a.keyCode&&this.hy(a);return!1};Kl("goog-checkbox",function(){return new Bo});function Co(){ae.call(this);this.r="mesh";za(this,new ld)}m(Co,ae);h("X.mesh",Co);V.b={};V.b.u=function(){U.K.call(this);this.Pi=[];this.ih=[]};m(V.b.u,U.K);h("xiv.ui.ctrl.XtkController",V.b.u);V.b.u.ID_PREFIX="xiv.ui.ctrl.XtkController";V.b.u.CSS_SUFFIX={iJ:"label",TI:"component"};V.b.u.Ln=t();V.b.u.yD=function(){return Rh("div",{id:"Label_"+t(),"class":V.b.u.CSS.iJ})};V.b.u.kF=function(a){a=ia(a.file)?a.file[0]:a.file||a.name;return nl(a)};
V.b.u.qN=function(a){if(a instanceof Co)return"Meshes";if(a instanceof F)return"Volumes";if(a instanceof mo)return"Fibers";if(a instanceof Ln)return"Annotations"};V.b.u.vg=function(a,b){b.nH([V.b.u.kF(a)])};f=V.b.u.prototype;f.tl=!1;f.n=function(a){V.b.u.d.n.call(this,a)};f.gi=function(a){null==this.Dc&&(this.Dc=V.b.u.yD(),Vh(this.a(),this.Dc));this.Dc.innerHTML=a};f.ZM=function(){return this.Dc};f.nH=function(a){ka(a)&&(a=[a]);this.Eo=a};f.SM=function(){return this.Eo};f.Hl=function(a){this.Je=a};
f.hO=function(){return this.Je};f.qn=function(a){a=this.L=a;this.L instanceof wj?(a=this.L.a(),this.L.ya?this.L.a().parentNode!==this.a()&&this.L.a()!==this.a()&&this.a().appendChild(this.L.a()):this.L.n(this.a())):this.a().appendChild(a);null!=a&&R(a,V.b.u.CSS.TI)};f.wE=function(){return Pb(this.Pi,this.ih)};f.gN=function(){return this.Pi};f.PF=function(){return this.tl};f.VR=function(a){this.tl=a};f.LN=function(){return this.ih};f.EM=function(){return this.L};f.fe=ea;
f.ig=function(a,b,c){a=new a;a.n();a.gi(b);Vh(this.a(),a.a());null!=c&&C(a,"o",c);return a};f.update=function(){this.L==this?this.m():this.L.m&&this.L.m()};f.m=function(){this.L.m&&this.L!=this&&(window.console.log("UPDATE STYLE",this.L),this.L.m())};f.Lw=function(a,b){var c=this.ig(b,"Color",function(b){a.color=b.color}.bind(this));V.b.u.vg(a,c);this.ih.push(c);c[V.b.u.Ln]=a;c.update()};
f.JC=function(a,b){var c=this.ig(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});V.b.u.vg(a,c);this.ih.push(c);c.L.S(1);c.L.m()};f.Mw=function(a,b){var c=this.ig(b,"Visible",function(b){a.visible=b.checked});V.b.u.vg(a,c);this.ih.push(c);c.L.fh(a.visible)};
f.g=function(){V.b.u.d.g.call(this);this[V.b.u.Ln]=null;delete this.tl;delete this.Je;A(this.ih,function(a){$c(a);a.i()});Mb(this.ih);delete this.ih;A(this.Pi,function(a){$c(a);a.i();controller=null});Mb(this.Pi);delete this.Pi;null!=this.L&&($c(this.L),this.L instanceof wj?this.L.i():S(this.L),delete this.L);null!=this.Eo&&(Mb(this.Eo),delete this.Eo);null!=this.Dc&&(S(this.Dc),delete this.Dc)};h("xiv.ui.ctrl.XtkController.ID_PREFIX",V.b.u.ID_PREFIX);h("xiv.ui.ctrl.XtkController.CSS_SUFFIX",V.b.u.CSS_SUFFIX);
h("xiv.ui.ctrl.XtkController.EventType",{bT:"o"});h("xiv.ui.ctrl.XtkController.OBJ_KEY",V.b.u.Ln);h("xiv.ui.ctrl.XtkController.createLabel",V.b.u.yD);h("xiv.ui.ctrl.XtkController.getXObjLabel",V.b.u.kF);h("xiv.ui.ctrl.XtkController.getObjectCategory",V.b.u.qN);h("xiv.ui.ctrl.XtkController.setControllerFolders",V.b.u.vg);h("xiv.ui.ctrl.XtkController.prototype.render",V.b.u.prototype.n);h("xiv.ui.ctrl.XtkController.prototype.setLabel",V.b.u.prototype.gi);
h("xiv.ui.ctrl.XtkController.prototype.getLabel",V.b.u.prototype.ZM);h("xiv.ui.ctrl.XtkController.prototype.setFolders",V.b.u.prototype.nH);h("xiv.ui.ctrl.XtkController.prototype.getFolders",V.b.u.prototype.SM);h("xiv.ui.ctrl.XtkController.prototype.setXObj",V.b.u.prototype.Hl);h("xiv.ui.ctrl.XtkController.prototype.getXObj",V.b.u.prototype.hO);h("xiv.ui.ctrl.XtkController.prototype.setComponent",V.b.u.prototype.qn);h("xiv.ui.ctrl.XtkController.prototype.getAllControllers",V.b.u.prototype.wE);
h("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",V.b.u.prototype.gN);h("xiv.ui.ctrl.XtkController.prototype.isInitialized",V.b.u.prototype.PF);h("xiv.ui.ctrl.XtkController.prototype.setInitialized",V.b.u.prototype.VR);h("xiv.ui.ctrl.XtkController.prototype.getSubControllers",V.b.u.prototype.LN);h("xiv.ui.ctrl.XtkController.prototype.getComponent",V.b.u.prototype.EM);h("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",V.b.u.prototype.fe);
h("xiv.ui.ctrl.XtkController.prototype.createController",V.b.u.prototype.ig);h("xiv.ui.ctrl.XtkController.prototype.update",V.b.u.prototype.update);h("xiv.ui.ctrl.XtkController.prototype.updateStyle",V.b.u.prototype.m);h("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",V.b.u.prototype.Lw);h("xiv.ui.ctrl.XtkController.prototype.add_opacity",V.b.u.prototype.JC);h("xiv.ui.ctrl.XtkController.prototype.add_visible",V.b.u.prototype.Mw);h("xiv.ui.ctrl.XtkController.prototype.disposeInternal",V.b.u.prototype.g);V.b.vc=function(){V.b.u.call(this)};m(V.b.vc,V.b.u);h("xiv.ui.ctrl.Histogram",V.b.vc);V.b.vc.ID_PREFIX="xiv.ui.ctrl.Histogram";V.b.vc.CSS_SUFFIX={MI:"canvas",kJ:"linecanvas",mJ:"max",uJ:"min"};V.b.vc.LEVEL_CUTOFF=.99;f=V.b.vc.prototype;f.AO=.95;f.Hf=null;f.zl=null;f.Dv=null;f.qr=null;f.Iv=null;f.ws=null;f.tL="rgb(40,40,40)";
f.n=function(a){V.b.vc.d.n.call(this,a);this.qn(this);this.Nk=Rh("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+t(),"class":this.constructor.CSS.MI});this.a().appendChild(this.Nk);this.Am=this.Nk.getContext("2d");this.Am.fillStyle=this.tL;this.Uj=Rh("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+t(),"class":this.constructor.CSS.kJ});this.a().appendChild(this.Uj);this.Oi=this.Uj.getContext("2d");this.pr=Rh("div",{id:this.constructor.ID_PREFIX+"_Max_"+t(),"class":this.constructor.CSS.mJ},
"1000");this.a().appendChild(this.pr);this.rr=Rh("div",{id:this.constructor.ID_PREFIX+"_Min_"+t(),"class":this.constructor.CSS.uJ},"-1000");this.a().appendChild(this.rr)};
function Do(a){if(null==a.Hf){var b=0,c=a.Je.max;A(a.Je.GF,function(a){A(a,function(a){A(a,function(a){if(null==this.Hf)for(this.Hf=[];b<=c;b++)this.Hf.push(0);this.Hf[parseInt(a)]++;this.Dv++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Hf){var d;null==a.zl&&(a.zl=[],a.qr=0,A(a.Hf,function(a){d=a/this.Dv;this.zl.push(d);this.qr=Math.max(this.qr,d)}.bind(a)))}}}
f.$D=function(){if(null!=this.Je){var a=Pi(this.Nk),b=a.width,a=a.height;this.Nk.height=a;this.Nk.width=b;this.Uj.height=a;this.Uj.width=b;Do(this);if(null!=this.Hf)for(var b=Math.round(b/this.Je.ni),b=0<b?b:1,c=this.AO/this.qr,d,e=0,g=this.zl.length;e<g;e++)d=this.zl[e]*c*a,this.Am.fillRect(b*e,a,b,-Math.round(d))}};f.SE=function(a){if(null!=this.Hf)for(var b=0,c=0,d=this.Hf.length;c<d;c++)if(b+=this.Hf[c],b/this.Dv>=a)return c};
f.aE=function(){if(null!=this.Je){var a=Pi(this.Uj),b=a.width,a=a.height;this.Uj.width=b;var c;c=0==this.Ll&&0<this.fk?Math.round(this.ws/this.fk*b):Math.round(this.ws/this.Ll*b);b=0==this.fk?0:Math.round(this.Iv/this.fk*b);this.Oi.strokeStyle="gray";this.Oi.moveTo(c,a);this.Oi.lineTo(b,0);this.Oi.lineWidth=.5;this.Oi.stroke();b=c+(b-c)/2;this.Oi.moveTo(b,a);this.Oi.lineTo(b,a-20);this.Oi.lineWidth=.5;this.Oi.stroke()}};f.update=function(){this.$D();this.tI();this.aE()};
f.tI=function(){null!=this.Je&&(null==this.Ll&&(this.Ll=parseInt(this.Je.hj),this.fk=parseInt(this.Je.ni),this.Ll=isNaN(this.Ll)?null:this.Ll,this.fk=isNaN(this.fk)?null:this.fk,this.ws=this.Ll,this.Iv=this.fk),this.ws=parseInt(this.Je.hj),this.Iv=parseInt(this.Je.ni),this.rr.innerHTML=this.ws,this.pr.innerHTML=this.Iv)};
f.g=function(){V.b.vc.d.g.call(this);null!=this.pr&&(S(this.pr),delete this.pr);null!=this.rr&&(S(this.rr),delete this.rr);null!=this.Nk&&(S(this.Nk),delete this.Nk);null!=this.Uj&&(S(this.Uj),delete this.Uj);null!=this.Hf&&(Mb(this.Hf),delete this.Hf);null!=this.zl&&(Mb(this.zl),delete this.zl);delete this.Dv;delete this.qr;delete this.Am;delete this.Oi;delete this.Ll;delete this.fk};h("xiv.ui.ctrl.Histogram.EventType",{});h("xiv.ui.ctrl.Histogram.ID_PREFIX",V.b.vc.ID_PREFIX);
h("xiv.ui.ctrl.Histogram.CSS_SUFFIX",V.b.vc.CSS_SUFFIX);h("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",V.b.vc.LEVEL_CUTOFF);h("xiv.ui.ctrl.Histogram.prototype.render",V.b.vc.prototype.n);h("xiv.ui.ctrl.Histogram.prototype.draw",V.b.vc.prototype.$D);h("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",V.b.vc.prototype.SE);h("xiv.ui.ctrl.Histogram.prototype.drawLine",V.b.vc.prototype.aE);h("xiv.ui.ctrl.Histogram.prototype.update",V.b.vc.prototype.update);
h("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",V.b.vc.prototype.tI);h("xiv.ui.ctrl.Histogram.prototype.disposeInternal",V.b.vc.prototype.g);U.T=function(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);U.K.call(this);this.TD=a;this.Bl=b;this.pq=null;this.Lb=new gj(this.a());this.tv()};m(U.T,U.K);h("nrg.ui.ResizeDragger",U.T);U.T.ID_PREFIX="nrg.ui.ResizeDragger";U.T.CSS_SUFFIX={};U.T.zp=500;f=U.T.prototype;f.ki=null;f.Oj=null;f.xo=null;f.Cq=null;f.Ei=null;f.Hj=null;f.Ot=null;f.Bq=null;f.offsetX=0;f.zH=function(a){this.offsetX=a};f.offsetY=0;f.$R=function(a){this.offsetY=a};f.ub=null;f.Mj=null;f.Ta=null;f.gf=null;
f.Qa=null;f.dd=null;f.cf=!1;f.If=new wh(10,10);f.ye=function(){return this.pq};f.ck=function(a){this.pq=a};f.GE=function(){return this.Lb};f.EE=function(){return this.TD};f.ze=function(){return this.a()};
f.Pl=function(){this.Mj=Pi(this.a());this.ub=Ai(this.a());this.ki=-1*this.Mj.height/2+this.offsetY;this.Oj=-1*this.Mj.width/2+this.offsetX;this.Lb.Wh()||this.cf||(this.Ta=xb(Ai(this.Bl)),this.gf=xb(Pi(this.Bl)),this.Ta.left=this.Ta.x,this.Ta.top=this.Ta.y,this.Ta.right=this.Ta.x+this.gf.width,this.Ta.bottom=this.Ta.y+this.gf.height,this.Qa=xb(Ai(this.pq)),this.dd=xb(Pi(this.pq)),this.Qa.left=this.Qa.x,this.Qa.top=this.Qa.y,this.Qa.right=this.Qa.x+this.dd.width,this.Qa.bottom=this.Qa.y+this.dd.height,
this.constructor.Ig&&this.constructor.Ig.bind(this)())};f.wH=function(a){return this.If=a};f.tv=function(){C(this.Lb,"start",this.xz.bind(this));C(this.Lb,"drag",this.$h.bind(this));C(this.Lb,"end",this.wz.bind(this))};f.xz=function(){this.dispatchEvent({type:"start_resize"})};f.$h=function(){this.Pl();this.dispatchEvent({type:"resize",IR:this.Ta,gf:this.gf,hL:this.Qa,dd:this.dd});null!=this.constructor.ff&&this.constructor.ff.bind(this)()};f.wz=function(){this.dispatchEvent({type:"end_resize"})};
f.update=function(){this.Lb.Wh()||this.cf||this.Pl()};f.Pg=function(){};f.hh=function(a,b,c){this.Pl();a=this.Pg(a);ma(c)&&0===c?ti(this.a(),a.end):Eo(this,a.start,a.end,b,c)};function Eo(a,b,c,d,e){a.Kl=new Yk(a.a(),[b.x,b.y],[c.x,c.y],ma(e)?e:U.T.zp,ml);C(a.Kl,"begin",function(){this.cf=!0;this.xz()}.bind(a));C(a.Kl,"animate",a.$h.bind(a));C(a.Kl,"end",function(){this.cf=!1;this.Kl.i();$c(this.Kl);this.Kl.Kg();this.Kl=null;yi(this.a(),c);this.wz();d&&d()}.bind(a));a.Kl.play()}
f.g=function(){delete this.cX;delete this.dX;delete this.Oj;delete this.xo;delete this.Cq;delete this.Ei;delete this.Hj;delete this.Ot;delete this.Bq;delete this.cf;ub(this.If);delete this.If;delete this.Bl;delete this.pq;ub(this.ub);delete this.ub;ub(this.Mj);delete this.Mj;ub(this.Ta);delete this.Ta;ub(this.gf);delete this.gf;ub(this.Qa);delete this.Qa;ub(this.dd);delete this.dd;S(this.Lb.handle);this.Lb.handle=null;$c(this.Lb);this.Lb.i();delete this.Lb;delete this.TD};
h("nrg.ui.ResizeDragger.EventType",{aw:"resize",KJ:"start_resize",JJ:"end_resize"});h("nrg.ui.ResizeDragger.ID_PREFIX",U.T.ID_PREFIX);h("nrg.ui.ResizeDragger.CSS_SUFFIX",U.T.CSS_SUFFIX);h("nrg.ui.ResizeDragger.ANIM_MED",U.T.zp);h("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",U.T.prototype.ki);h("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",U.T.prototype.Oj);h("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",U.T.prototype.xo);h("nrg.ui.ResizeDragger.prototype.draggerLimitRight",U.T.prototype.Cq);
h("nrg.ui.ResizeDragger.prototype.draggerLimitTop",U.T.prototype.Ei);h("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",U.T.prototype.Hj);h("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",U.T.prototype.Ot);h("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",U.T.prototype.Bq);h("nrg.ui.ResizeDragger.prototype.offsetX",U.T.prototype.offsetX);h("nrg.ui.ResizeDragger.prototype.setOffsetX",U.T.prototype.zH);h("nrg.ui.ResizeDragger.prototype.offsetY",U.T.prototype.offsetY);
h("nrg.ui.ResizeDragger.prototype.setOffsetY",U.T.prototype.$R);h("nrg.ui.ResizeDragger.prototype.handlePos",U.T.prototype.ub);h("nrg.ui.ResizeDragger.prototype.handleSize",U.T.prototype.Mj);h("nrg.ui.ResizeDragger.prototype.resizeePos",U.T.prototype.Ta);h("nrg.ui.ResizeDragger.prototype.resizeeSize",U.T.prototype.gf);h("nrg.ui.ResizeDragger.prototype.boundaryPos",U.T.prototype.Qa);h("nrg.ui.ResizeDragger.prototype.boundarySize",U.T.prototype.dd);h("nrg.ui.ResizeDragger.prototype.isAnimating",U.T.prototype.cf);
h("nrg.ui.ResizeDragger.prototype.minSize",U.T.prototype.If);h("nrg.ui.ResizeDragger.prototype.getBoundaryElement",U.T.prototype.ye);h("nrg.ui.ResizeDragger.prototype.setBoundaryElement",U.T.prototype.ck);h("nrg.ui.ResizeDragger.prototype.getDragger",U.T.prototype.GE);h("nrg.ui.ResizeDragger.prototype.getDirection",U.T.prototype.EE);h("nrg.ui.ResizeDragger.prototype.getHandle",U.T.prototype.ze);h("nrg.ui.ResizeDragger.prototype.updateTrackingValues",U.T.prototype.Pl);
h("nrg.ui.ResizeDragger.prototype.setMinSize",U.T.prototype.wH);h("nrg.ui.ResizeDragger.prototype.onResizeStart",U.T.prototype.xz);h("nrg.ui.ResizeDragger.prototype.onResize",U.T.prototype.$h);h("nrg.ui.ResizeDragger.prototype.onResizeEnd",U.T.prototype.wz);h("nrg.ui.ResizeDragger.prototype.update",U.T.prototype.update);h("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",U.T.prototype.Pg);h("nrg.ui.ResizeDragger.prototype.slideToLimits",U.T.prototype.hh);
h("nrg.ui.ResizeDragger.prototype.disposeInternal",U.T.prototype.g);U.Yc=function(a){U.T.call(this,"right",a)};m(U.Yc,U.T);h("nrg.ui.ResizeDraggerRight",U.Yc);U.Yc.ID_PREFIX="nrg.ui.ResizeDraggerRight";U.Yc.CSS_SUFFIX={};U.Yc.Ig=function(){this.xo=this.Ta.left+this.If.width+this.Oj;this.Cq=this.Qa.right+this.Oj;this.Ot=this.Cq-this.xo};h("nrg.ui.ResizeDraggerRight.calculateDraggerLimits",U.Yc.Ig);U.Yc.ff=function(){Ni(this.Bl,Math.min(Math.max(this.gf.width+(this.cf?this.ub.x-this.Ta.right+this.Oj:this.Lb.clientX-this.Lb.oA),this.If.width),this.dd.width))};
h("nrg.ui.ResizeDraggerRight.resizeMethod",U.Yc.ff);U.Yc.prototype.update=function(a){this.Lb.Wh()||this.cf||(U.Yc.d.update.call(this,a),ij(this.Lb,new yh(this.xo,this.Ta.y,this.Ot,0)),yi(this.a(),this.Ta.right+this.Oj,this.Ta.y),Oi(this.a(),this.gf.height))};U.Yc.prototype.Pg=function(a){return{start:new th(this.ub.x,this.ub.y),end:"MIN"==a?new th(this.xo,this.ub.y):new th(this.Cq,this.ub.y)}};h("nrg.ui.ResizeDraggerRight.ID_PREFIX",U.Yc.ID_PREFIX);h("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",U.Yc.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerRight.calculateDraggerLimits",U.Yc.Ig);h("nrg.ui.ResizeDraggerRight.resizeMethod",U.Yc.ff);h("nrg.ui.ResizeDraggerRight.prototype.update",U.Yc.prototype.update);h("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",U.Yc.prototype.Pg);U.Oe=function(a){U.T.call(this,"right",a)};m(U.Oe,U.T);h("nrg.ui.ResizeDraggerLeft",U.Oe);U.Oe.ID_PREFIX="nrg.ui.ResizeDraggerLeft";U.Oe.CSS_SUFFIX={};U.Oe.ff=function(){Ni(this.Bl,Math.min(Math.max(this.gf.width+(this.Ta.x-this.ub.x),this.If.width),this.dd.width));yi(this.a(),this.ub.x,this.Ta.y)};h("nrg.ui.ResizeDraggerLeft.resizeMethod",U.Oe.ff);
U.Oe.prototype.update=function(a){this.Lb.Wh()||this.cf||(U.Oe.d.update.call(this,a),ij(this.Lb,new yh(this.Qa.x-this.Mj.width,this.Qa.y,this.dd.width-this.If.width-this.Mj.width,0)),yi(this.a(),this.Ta.x-this.Mj.width,this.Ta.y))};U.Oe.prototype.Pg=function(a){return{start:new th(this.ub.x,this.ub.y),end:"MIN"==a?new th(this.Qa.x+this.If.width,this.ub.y):new th(this.Qa.x+this.dd.width-this.If.width,this.ub.y)}};h("nrg.ui.ResizeDraggerLeft.ID_PREFIX",U.Oe.ID_PREFIX);
h("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",U.Oe.CSS_SUFFIX);h("nrg.ui.ResizeDraggerLeft.resizeMethod",U.Oe.ff);h("nrg.ui.ResizeDraggerLeft.prototype.update",U.Oe.prototype.update);h("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",U.Oe.prototype.Pg);U.Zc=function(a){U.T.call(this,"right",a)};m(U.Zc,U.T);h("nrg.ui.ResizeDraggerTop",U.Zc);U.Zc.ID_PREFIX="nrg.ui.ResizeDraggerTop";U.Zc.CSS_SUFFIX={};U.Zc.Ig=function(){this.Ei=this.Qa.top-this.ki;this.Hj=this.Ta.bottom-this.If.height+this.ki;this.Bq=this.Hj-this.Ei};h("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",U.Zc.Ig);U.Zc.ff=function(){var a=this.ub.y-this.ki,b=this.gf.height+(this.cf?this.Ta.y-a:this.Lb.pA-this.Lb.clientY);this.Bl.style.top=a.toString()+"px";Oi(this.Bl,Math.max(b,this.If.height))};
h("nrg.ui.ResizeDraggerTop.resizeMethod",U.Zc.ff);U.Zc.prototype.update=function(){this.Lb.Wh()||this.cf||(U.Zc.d.update.call(this),ij(this.Lb,new yh(this.Qa.x,this.Ei,0,this.Bq)),yi(this.a(),this.Ta.x,this.Ta.y+this.ki))};U.Zc.prototype.Pg=function(a){return{start:new th(this.ub.x,this.ub.y),end:"MIN"==a?new th(this.ub.x,this.Hj):new th(this.ub.x,this.Ei)}};h("nrg.ui.ResizeDraggerTop.ID_PREFIX",U.Zc.ID_PREFIX);h("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",U.Zc.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",U.Zc.Ig);h("nrg.ui.ResizeDraggerTop.resizeMethod",U.Zc.ff);h("nrg.ui.ResizeDraggerTop.prototype.update",U.Zc.prototype.update);h("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",U.Zc.prototype.Pg);U.Gd=function(a){U.T.call(this,"right",a)};m(U.Gd,U.T);h("nrg.ui.ResizeDraggerTopRight",U.Gd);U.Gd.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";U.Gd.CSS_SUFFIX={};U.Gd.prototype.Pl=function(){U.Gd.d.Pl.call(this);this.Lb.Wh()||this.cf||(U.Yc.Ig.bind(this)(),U.Zc.Ig.bind(this)())};U.Gd.prototype.$h=function(){U.Gd.d.$h.call(this);U.Yc.ff.bind(this)();U.Zc.ff.bind(this)()};
U.Gd.prototype.update=function(a){this.Lb.Wh()||this.cf||(U.Gd.d.update.call(this,a),ij(this.Lb,new yh(this.Qa.x+this.Oj,this.Qa.y+this.ki,this.dd.width,this.dd.height)),yi(this.a(),this.Ta.right+this.Oj,this.Ta.y+this.ki))};
U.Gd.prototype.Pg=function(a){var b=new th(this.ub.x,this.ub.y),c;"TOP_LEFT"==a?c=new th(this.Qa.x,this.Qa.y):"TOP_RIGHT"==a?c=new th(this.Qa.x+this.dd.width,this.Qa.y):"BOTTOM_RIGHT"==a?c=new th(this.Qa.x+this.dd.width,this.Qa.y+this.dd.height):"BOTTOM_LEFT"==a&&(c=new th(this.Qa.x,this.Qa.y+this.dd.height));return{start:b,end:c}};h("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",U.Gd.ID_PREFIX);h("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",U.Gd.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",U.Gd.prototype.Pl);h("nrg.ui.ResizeDraggerTopRight.prototype.onResize",U.Gd.prototype.$h);h("nrg.ui.ResizeDraggerTopRight.prototype.update",U.Gd.prototype.update);h("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",U.Gd.prototype.Pg);U.Fd=function(a){U.T.call(this,"right",a)};m(U.Fd,U.T);h("nrg.ui.ResizeDraggerBottom",U.Fd);U.Fd.ID_PREFIX="nrg.ui.ResizeDraggerBottom";U.Fd.CSS_SUFFIX={};U.Fd.Ig=function(){this.Ei=this.Ta.top+this.If.height+this.ki;this.Hj=this.Qa.bottom+this.ki;this.Bq=this.Hj-this.Ei};h("nrg.ui.ResizeDraggerBottom.calculateDraggerLimits",U.Fd.Ig);U.Fd.ff=function(){Oi(this.Bl,Math.max(this.gf.height+(this.ub.y-this.Ta.bottom),this.If.height))};h("nrg.ui.ResizeDraggerBottom.resizeMethod",U.Fd.ff);
U.Fd.prototype.update=function(){this.Lb.Wh()||this.cf||(U.Fd.d.update.call(this),ij(this.Lb,new yh(this.Qa.x,this.Ei,0,this.Hj)),yi(this.a(),this.Ta.x,this.Ta.bottom+this.ki))};U.Fd.prototype.Pg=function(a){return{start:new th(this.ub.x,this.ub.y),end:"MIN"==a?new th(this.ub.x,this.Ei):new th(this.ub.x,this.Hj)}};h("nrg.ui.ResizeDraggerBottom.ID_PREFIX",U.Fd.ID_PREFIX);h("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",U.Fd.CSS_SUFFIX);h("nrg.ui.ResizeDraggerBottom.calculateDraggerLimits",U.Fd.Ig);
h("nrg.ui.ResizeDraggerBottom.resizeMethod",U.Fd.ff);h("nrg.ui.ResizeDraggerBottom.prototype.update",U.Fd.prototype.update);h("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",U.Fd.prototype.Pg);U.ia=function(a,b){U.K.call(this);this.o=Hh(a);this.nf={};this.jp(b||U.ia.oW)};m(U.ia,U.K);h("nrg.ui.Resizable",U.ia);U.ia.ID_PREFIX="nrg.ui.Resizable";U.ia.CSS_SUFFIX={ZS:"boundary"};U.ia.zs="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" ");U.ia.WA=["RIGHT","BOTTOM"];U.ia.VI=new yh(0,0,600,600);U.ia.XA=20;U.ia.YA=20;this.gL={TOP:4,LEFT:4,RIGHT:4,BOTTOM:4};f=U.ia.prototype;
f.TR=function(a,b){this.iW(a);if(0>b)throw Error("Threshold must be greater than zero!");this.gL[a]=b};f.Hu=U.ia.YA;f.Gu=U.ia.XA;f.ze=function(a){return this.nf[a].ze()};f.Ho=function(a){return this.nf[a]};f.UM=function(){var a=[];A(ob(this.nf),function(b){a.push(b.ze())});return a};f.ye=function(){return this.Jh};f.ck=function(a){this.Jh=a;if(this.Jh.parentNode!==this.o.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};
f.vH=function(a){this.Gu=a};f.xH=function(a){this.Hu=a};f.mN=function(){return this.Gu};f.nN=function(){return this.Hu};f.jp=function(a){a=a||"DEFAULT";ka(a)&&(a="ALL"==a.toUpperCase()?U.ia.zs:"DEFAULT"==a.toUpperCase()?U.ia.WA:[a]);Fo(this);A(a,function(a){if(!ka(a))throw Error("String required!");if(!Lb(U.ia.zs,a))throw Error("Invalid direction: ",a);this.vC(a)}.bind(this))};f.ax=function(a){if(!Lb(U.ia.zs,a))throw Error("Invalid draggerDir '"+a);};
f.zO=function(a){this.ax(a);if(!this.nf[a])throw Error("No ResizeDragger for "+a);};f.hh=function(a,b,c,d){a=a.toUpperCase();this.ax(a);this.update();this.nf[a].hh(b,c,d)};
U.ia.AD=function(a,b){switch(a){case "TOP":return new U.Zc(b);case "BOTTOM":return new U.Fd(b);case "LEFT":return new U.Oe(b);case "RIGHT":return new U.Yc(b);case "TOP_RIGHT":return new U.Gd(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}};f=U.ia.prototype;
f.vC=function(a){if(a in this.nf)throw Error("Resize direction "+a+" already in use.");this.nf[a]=U.ia.AD(a,this.o);C(this.nf[a],"start_resize",this.pQ.bind(this));C(this.nf[a],"resize",this.jn.bind(this));C(this.nf[a],"end_resize",this.oQ.bind(this));this.update()};f.update=function(){if(null!=this.Jh){var a=new wh(this.Hu,this.Gu);w(this.nf,function(b){this.Jh&&this.Jh.parentNode&&Vh(this.Jh.parentNode,b.ze());b.ye()!==this.Jh&&b.ck(this.Jh);b.wH(a);b.Pl();b.update()}.bind(this))}};f.pQ=function(){this.dispatchEvent({type:"resize_start"})};
f.jn=function(a){this.dispatchEvent({type:"resize",IR:a.Ta,gf:a.gf,hL:a.Qa,dd:a.dd})};f.oQ=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Fo(a){w(a.nf,function(a){a&&($c(a),a.i())});ub(a.nf)}f.g=function(){U.ia.d.g.call(this);Fo(this);delete this.nf;this.Jh&&(S(this.Jh.parentNode),delete this.Jh)};h("nrg.ui.Resizable.EventType",{aw:"resize",KJ:"resize_start",JJ:"resize_end"});h("nrg.ui.Resizable.ID_PREFIX",U.ia.ID_PREFIX);h("nrg.ui.Resizable.CSS_SUFFIX",U.ia.CSS_SUFFIX);
h("nrg.ui.Resizable.DIRECTIONS",U.ia.zs);h("nrg.ui.Resizable.DEFAULT_DIRECTIONS",U.ia.WA);h("nrg.ui.Resizable.DEFAULT_LIMITS",U.ia.VI);h("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",U.ia.XA);h("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",U.ia.YA);h("nrg.ui.Resizable.createResizeDragger",U.ia.AD);h("nrg.ui.Resizable.prototype.setBoundThreshold",U.ia.prototype.TR);h("nrg.ui.Resizable.prototype.getHandle",U.ia.prototype.ze);h("nrg.ui.Resizable.prototype.getResizeDragger",U.ia.prototype.Ho);
h("nrg.ui.Resizable.prototype.getHandles",U.ia.prototype.UM);h("nrg.ui.Resizable.prototype.getBoundaryElement",U.ia.prototype.ye);h("nrg.ui.Resizable.prototype.setBoundaryElement",U.ia.prototype.ck);h("nrg.ui.Resizable.prototype.setMinHeight",U.ia.prototype.vH);h("nrg.ui.Resizable.prototype.setMinWidth",U.ia.prototype.xH);h("nrg.ui.Resizable.prototype.getMinHeight",U.ia.prototype.mN);h("nrg.ui.Resizable.prototype.getMinWidth",U.ia.prototype.nN);h("nrg.ui.Resizable.prototype.setResizeDirections",U.ia.prototype.jp);
h("nrg.ui.Resizable.prototype.checkDirectionValid",U.ia.prototype.ax);h("nrg.ui.Resizable.prototype.hasDragger",U.ia.prototype.zO);h("nrg.ui.Resizable.prototype.slideToLimits",U.ia.prototype.hh);h("nrg.ui.Resizable.prototype.addResizeDirection",U.ia.prototype.vC);h("nrg.ui.Resizable.prototype.update",U.ia.prototype.update);h("nrg.ui.Resizable.prototype.disposeInternal",U.ia.prototype.g);function Go(a){U.K.call(this);this.me=a}m(Go,U.K);h("xiv.ui.layouts.LayoutFrame",Go);Go.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Go.CSS_SUFFIX={};f=Go.prototype;f.ng=function(){return this.me};f.Ed=null;f.ea=function(){return this.Ks};f.jp=function(a){this.Ks=this.Ks?this.Ks:new U.ia(this.a());this.Ks.jp(a)};f.g=function(){Go.d.g.call(this);delete this.me};h("xiv.ui.layouts.LayoutFrame.EventType",{});h("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Go.ID_PREFIX);h("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Go.CSS_SUFFIX);
h("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Go.prototype.ng);h("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Go.prototype.ea);h("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Go.prototype.jp);h("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Go.prototype.g);function Ho(){if(!this.constructor.Ob)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");U.K.call(this);this.j={}}m(Ho,U.K);h("xiv.ui.layouts.Layout",Ho);var Io="Slider_"+t(),Jo="FrameDisplay_"+t(),Ko="ZoomDisplay_"+t(),Lo="Crosshairs_"+t(),Mo={Na:Io,kf:Jo,vh:Ko,od:Lo};Ho.ID_PREFIX="xiv.ui.layouts.Layout";Ho.CSS_SUFFIX={};f=Ho.prototype;
f.Rc=20;f.je=20;f.XR=function(a){this.je=a};f.YR=function(a){this.Rc=a};f.cN=function(){return this.j};f.Zx=function(a){return this.j[a]};f.bN=function(a){window.console.log(a,this.j[a]);var b={};w(Mo,function(c){b[c]=this.j[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};f.ng=function(){return this.constructor.Ob};f.tC=function(a){this.j=this.j?this.j:{};this.j[a.ng()]=a};f.Di=function(){this.dispatchEvent({type:"p"})};
f.Sz=function(){w(this.Nq(),function(a){null!=a.Na&&(a.Na.i(),delete a.Na);null!=a.od&&(a.od.i(),delete a.od);null!=a.kf&&(a.kf.i(),delete a.kf);null!=a.vh&&(a.vh.i(),delete a.vh)})};f.ss=function(){w(this.Nq(),function(a){null!=a.Na&&(a.Na.m(),a.Na.S(a.Na.$()));null!=a.od&&a.od.m();null!=a.kf&&a.kf.m();null!=a.vh&&a.vh.m()})};f.m=function(){Ho.d.m.call(this);this.Di()};f.g=function(){Ho.d.g.call(this);delete this.je;delete this.Rc;U.Kt(this.lJ);delete this.lJ};
h("xiv.ui.layouts.Layout.EventType",{aw:"p"});h("xiv.ui.layouts.Layout.INTERACTORS",Mo);h("xiv.ui.layouts.Layout.ID_PREFIX",Ho.ID_PREFIX);h("xiv.ui.layouts.Layout.CSS_SUFFIX",Ho.CSS_SUFFIX);h("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Ho.prototype.XR);h("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Ho.prototype.YR);h("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Ho.prototype.cN);h("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Ho.prototype.Zx);
h("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Ho.prototype.bN);h("xiv.ui.layouts.Layout.prototype.getTitle",Ho.prototype.ng);h("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Ho.prototype.tC);h("xiv.ui.layouts.Layout.prototype.dispatchResize",Ho.prototype.Di);h("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Ho.prototype.Sz);h("xiv.ui.layouts.Layout.prototype.updateInteractors",Ho.prototype.ss);h("xiv.ui.layouts.Layout.prototype.updateStyle",Ho.prototype.m);
h("xiv.ui.layouts.Layout.prototype.disposeInternal",Ho.prototype.g);V.f.H.im=function(){V.f.H.mc.call(this)};m(V.f.H.im,V.f.H.mc);h("xiv.ui.layouts.interactors.ZoomDisplay",V.f.H.im);V.f.H.im.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";V.f.H.im.prototype.fj=function(){this.Ph.innerHTML="Zoom level:&nbsp"+this.ob.value+"%"};h("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",V.f.H.im.ID_PREFIX);h("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",V.f.H.im.prototype.fj);function No(a,b){Vn.call(this,a,b);this.cb.Dl(0)}m(No,Vn);No.prototype.ja=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};No.prototype.DD=function(){var a=this.a(),b=Ih(null,"goog-slider-thumb",a)[0];b||(b=this.Cm(),a.appendChild(b));this.Ha=this.xd=b};No.prototype.Cm=function(){var a=this.W().D("div","goog-slider-thumb");Vj(a,"button");return a};U.A=function(a){No.call(this);this.constructor.En=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.Bd=this.constructor.En;U.K.prototype.Ft.bind(this)();null!=a&&this.ek(a)};m(U.A,No);h("nrg.ui.Slider",U.A);U.A.ID_PREFIX="nrg.ui.Slider";U.A.CSS_SUFFIX={YJ:"track",GB:"track-hovered",cw:"thumb",EB:"thumb-hovered"};f=U.A.prototype;f.Vo=!1;f.hs=!1;f.rS=function(a){this.hs=a};f.qS=function(a){this.hs=a};
f.n=function(a){this.o=Rh("div",{id:U.A.ID_PREFIX+"_Widget_"+t()});this.jc(this.o);a=null!=a?a:document.body;a.appendChild(this.o);this.Ie=Rh("div",{id:U.A.ID_PREFIX+"_Track_"+t()});this.o.appendChild(this.Ie);this.Rd=Lh("goog-slider-thumb",this.o);C(this,"change",this.LP.bind(this));C(this.Rd,"mouseover",this.tQ.bind(this));C(this.Rd,"mouseout",this.sQ.bind(this));C(this.Ie,"mouseover",this.OQ.bind(this));C(this.Ie,"mouseout",this.NQ.bind(this));C(this,"k",this.yQ.bind(this));C(this,"l",this.vQ.bind(this));
this.ek(this.Qc().toLowerCase())};f.a=function(){return this.o};f.WN=function(){return this.Ie};f.QN=function(){return this.Rd};f.nq=function(a){null==this.Yl&&(this.Yl={});if(null==this.Yl[a.id]){var b=new Qn(a);b.addEventListener("mousewheel",this.jQ,!1,this);this.Yl[a.id]=b}};f.dL=function(a){null==this.Ul&&(this.Ul={});if(null==this.Ul[a.id]){var b=new Wl(a);C(b,"key",this.Yj.bind(this));this.Ul[a.id]=b}};f.Yj=function(a){window.console.log("KEY",a)};
f.m=function(){var a=this.$(),a=io(this,a);"horizontal"==this.Qc().toLowerCase()?this.Rd.style.left=a.x.toString()+"px":"vertical"==this.Qc().toLowerCase()&&(this.Rd.style.left=a.y.toString()+"px")};f.ek=function(a){U.A.d.ek.call(this,a);this.ya&&Oo(this,this.Qc().toLowerCase())};function Oo(a,b){function c(a,c){sh(a,[zk.Kb(c,"horizontal"),zk.Kb(c,"vertical")],[c,zk.Kb(c,b)])}c(a.o,a.constructor.Bd);c(a.Ie,U.A.CSS.YJ);c(a.Rd,U.A.CSS.cw)}f.JA=!1;f.zx=1;
f.IH=function(a,b){this.JA=a;ma(b)&&(this.zx=b)};f.jQ=function(a){var b=Math.abs(a.af)<Math.abs(a.Fj)?a.Fj:a.af;this.JA?this.S(Math.round(this.$()-b*this.zx)):this.S(Math.round(this.$()-(0>b?-1:1)));this.dispatchEvent({type:"r"});a.preventDefault()};f.st=function(a){this.$i=this.$i?this.$i:[];this.$i.push(a);Po(this)};f.Kw=function(a){this.cj=this.cj?this.cj:[];this.cj.push(a);Qo(this)};
f.LP=function(a){a.stopPropagation();this.Vo&&(Ro(this),So(this));this.hs||this.dispatchEvent({type:"q",value:this.$(),Ty:this.Sa(),Qy:this.Da()});this.hs=!1};function Ro(a){R(a.Rd,U.A.CSS.EB);null!=a.$i&&A(a.$i,function(a){R(this.Rd,a)}.bind(a))}function So(a){R(a.Ie,U.A.CSS.GB);null!=a.cj&&A(a.cj,function(a){R(this.Ie,a)}.bind(a))}function Po(a){qh(a.Rd,U.A.CSS.EB);null!=a.$i&&A(a.$i,function(a){qh(this.Rd,a)}.bind(a))}
function Qo(a){qh(a.Ie,U.A.CSS.GB);null!=a.cj&&A(a.cj,function(a){qh(this.Ie,a)}.bind(a))}f.tQ=function(a){a.stopPropagation();Ro(this);So(this)};f.OQ=function(){So(this)};f.sQ=function(){this.Vo||(Po(this),Qo(this))};f.NQ=function(){this.Vo||Qo(this)};f.yQ=function(){this.Vo=!0};f.vQ=function(){this.Vo=!1;Po(this);Qo(this)};
f.g=function(){U.A.d.g.call(this);delete this.hs;null!=this.o&&($c(this),S(this.o),delete this.o);null!=this.Rd&&($c(this.Rd),S(this.Rd),delete this.Rd);null!=this.Ie&&($c(this.Ie),S(this.Ie),delete this.Ie);null!=this.Ul&&(w(this.Ul,function(a){$c(a);a.i()}),ub(this.Ul),delete this.Ul);null!=this.Yl&&(w(this.Yl,function(a){$c(a);a.i()}),ub(this.Yl),delete this.Yl);null!=this.$i&&(Mb(this.$i),delete this.$i);null!=this.cj&&(Mb(this.cj),delete this.cj);delete this.JA;delete this.zx;delete this.Vo};
h("nrg.ui.Slider.EventType",{xU:"q",UT:"r"});h("nrg.ui.Slider.ID_PREFIX",U.A.ID_PREFIX);h("nrg.ui.Slider.CSS_SUFFIX",U.A.CSS_SUFFIX);h("nrg.ui.Slider.prototype.suspendSlideEvent",U.A.prototype.rS);h("nrg.ui.Slider.prototype.suspendChangeEvent",U.A.prototype.qS);h("nrg.ui.Slider.prototype.render",U.A.prototype.n);h("nrg.ui.Slider.prototype.getElement",U.A.prototype.a);h("nrg.ui.Slider.prototype.getTrack",U.A.prototype.WN);h("nrg.ui.Slider.prototype.getThumb",U.A.prototype.QN);
h("nrg.ui.Slider.prototype.bindToMouseWheel",U.A.prototype.nq);h("nrg.ui.Slider.prototype.bindToArrowKeys",U.A.prototype.dL);h("nrg.ui.Slider.prototype.updateStyle",U.A.prototype.m);h("nrg.ui.Slider.prototype.setOrientation",U.A.prototype.ek);h("nrg.ui.Slider.prototype.setUseDeltaToScroll",U.A.prototype.IH);h("nrg.ui.Slider.prototype.addThumbHoverClass",U.A.prototype.st);h("nrg.ui.Slider.prototype.addTrackHoverClass",U.A.prototype.Kw);h("nrg.ui.Slider.prototype.disposeInternal",U.A.prototype.g);V.f.H.A=function(){U.A.call(this)};m(V.f.H.A,U.A);h("xiv.ui.layouts.interactors.Slider",V.f.H.A);V.f.H.A.ID_PREFIX="xiv.ui.layouts.interactors.Slider";V.f.H.A.CSS_SUFFIX={};V.f.H.A.prototype.n=function(){};V.f.H.A.prototype.g=function(){V.f.H.A.d.g.call(this)};h("xiv.ui.layouts.interactors.Slider.EventType",{});h("xiv.ui.layouts.interactors.Slider.ID_PREFIX",V.f.H.A.ID_PREFIX);h("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",V.f.H.A.CSS_SUFFIX);
h("xiv.ui.layouts.interactors.Slider.prototype.render",V.f.H.A.prototype.n);h("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",V.f.H.A.prototype.g);V.f.H.Sd=function(){U.K.call(this)};m(V.f.H.Sd,U.K);h("xiv.ui.layouts.interactors.Crosshairs",V.f.H.Sd);V.f.H.Sd.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";V.f.H.Sd.CSS_SUFFIX={yT:"horizontal",eV:"vertical"};f=V.f.H.Sd.prototype;f.li=null;f.Vh=null;f.KH=function(a){null!=a&&(this.li.style.left=a.toString()+"px")};f.LH=function(a){null!=a&&(this.Vh.style.top=a.toString()+"px")};f.n=function(a){this.li=To(this,"vertical");this.Vh=To(this,"horizontal");a.appendChild(this.Vh);a.appendChild(this.li)};
f.ls=function(a){a=!1===a?"hidden":"visible";this.li.style.visibility=a;this.Vh.style.visibility=a};function To(a,b){b=b.toLowerCase();if(!qb(V.f.H.Sd.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return Rh("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+t(),"class":a.constructor.Bd+"-"+b.toLowerCase()})}f.g=function(){V.f.H.Sd.d.g.call(this);S(this.li);delete this.li;S(this.Vh);delete this.Vh};h("xiv.ui.layouts.interactors.Crosshairs.EventType",{});
h("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",V.f.H.Sd.ID_PREFIX);h("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",V.f.H.Sd.CSS_SUFFIX);h("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",V.f.H.Sd.prototype.li);h("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",V.f.H.Sd.prototype.Vh);h("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",V.f.H.Sd.prototype.KH);h("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",V.f.H.Sd.prototype.LH);
h("xiv.ui.layouts.interactors.Crosshairs.prototype.render",V.f.H.Sd.prototype.n);h("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",V.f.H.Sd.prototype.ls);h("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",V.f.H.Sd.prototype.g);function Uo(a){Ho.call(this);a=null!=a?a:ob(Vo);a=ia(a)?a:[a];A(a,function(b,c){a[c]=b.toUpperCase()});Wo(this,a);Xo(this,a);null!=this.j.X&&this.Mf();null!=this.j.Y&&this.hi();null!=this.j.Z&&this.Il();null!=this.j.V&&this.Xr();this.m()}m(Uo,Ho);h("xiv.ui.layouts.XyzvLayout",Uo);Uo.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var Vo={si:"X",cg:"Y",Rn:"Z",Os:"V"};
Uo.CSS_SUFFIX={si:"x",cg:"y",Rn:"z",Os:"v",Na:"slider",sk:"slider-thumb",bw:"slider-thumb-hovered",tk:"slider-track",yU:"slider-track-x",zU:"slider-track-y",AU:"slider-track-z",uT:"framenumber"};function Yo(a,b,c,d){this.Na=a;this.kf=b;this.od=c;this.vh=d}f=Uo.prototype;f.cH=0;f.dk=function(a,b){this.j[a].jp(b);var c=this.zD(a);Vh(this.a(),c);c.style.position="absolute";this.j[a].ea().ck(c);this.j[a].ea().update()};
f.zD=function(a){return Rh("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+t(),"class":zk.Kb(this.constructor.Bd,a.toLowerCase()+"-resizeboundary")})};function Wo(a,b){if(b.length>nb(Vo))throw Error("Invalid amount of frames "+b+". Must be "+Vo);A(b,function(a){if(!qb(Vo,a))throw Error("Invalid frame title ",a);}.bind(a))}function Xo(a,b){var c="";A(b,function(a,b){c=a.toUpperCase();this.tC(new Go(c));Vh(this.a(),this.j[c].a());R(this.j[c].a(),Uo.CSS[b])}.bind(a))}f.CS=function(a){a.$z(this.Nq())};
f.$z=function(a){this.Wg(function(b,c){null!=a[c]&&(b[Io]=a[c].Na,S(a[c].Na.a()),b.a().appendChild(a[c].Na.a()),b[Jo]=a[c].kf,S(a[c].kf.a()),b.a().appendChild(a[c].kf.a()),b[Lo]=a[c].od,b.a().appendChild(a[c].od.li),b.a().appendChild(a[c].od.Vh))})};f.rC=function(){this.Sz();Zo(this);$o(this);ap(this);bp(this)};f.Nq=function(){var a={};this.Wg(function(b,c){a[c]=new Yo(b[Io],b[Jo],b[Lo],b[Ko])});return a};f.QE=function(a){a=this.j[a];return new Yo(a[Io],a[Jo],a[Lo])};f.PE=function(a,b){return this.j[a][b]};
f.ME=function(a){return this.j[a]};function Zo(a){var b;a.Wg(function(a,d){b=new U.A("horizontal");b.n(a.a());b.a().id=d+"_LayoutFrameSlider_"+t();a[Io]=b;sh(b.a(),null,[Uo.CSS.Na]);sh(b.Rd,null,[Uo.CSS.sk]);sh(b.Ie,null,[Uo.CSS.tk,zk.Kb(Uo.CSS.tk,d.toLowerCase())]);b.st(Uo.CSS.bw)}.bind(a))}function $o(a){var b;a.Wg(function(a){b=new V.f.H.Tl;b.n(a.a());a[Jo]=b}.bind(a))}function ap(a){var b;a.Wg(function(a){b=new V.f.H.im;b.n(a.a());a[Ko]=b}.bind(a))}
function bp(a){var b;a.Wg(function(a){b=new V.f.H.Sd;a[Lo]=b;b.n(a.a());a.a().appendChild(b.Vh);a.a().appendChild(b.li)}.bind(a))}f.Wg=function(a){w(Vo,function(b){b=b.toUpperCase();null!=this.j[b]&&"V"!=b&&a(this.j[b],b)}.bind(this))};f.loop=function(a){w(Vo,function(b){b=b.toUpperCase();a(this.j[b],b)}.bind(this))};f.Mf=function(){null!=this.constructor.CSS&&R(this.j.X.a(),this.constructor.CSS.si)};f.hi=function(){null!=this.constructor.CSS&&R(this.j.Y.a(),this.constructor.CSS.cg)};
f.yl=function(a){this.yj();var b=Pi(this.j.X.a()),c=Pi(this.j.Y.a()),d=Pi(this.j.Z.a());a(b,c,d,b.width+c.width+d.width-this.B.width)};f.Il=function(){null!=this.constructor.CSS&&R(this.j.Z.a(),this.constructor.CSS.Rn)};f.Xr=function(){null!=this.constructor.CSS&&R(this.j.V.a(),this.constructor.CSS.Os)};f.sg=ea;f.Qi=ea;f.YP=ea;f.Pu=ea;f.Qf=ea;f.yg=ea;f.Rf=ea;f.xn=ea;f.g=function(){Uo.d.g.call(this);delete this.cH};h("xiv.ui.layouts.XyzvLayout.TITLE","XyzvLayout");
h("xiv.ui.layouts.XyzvLayout.EventType",{});h("xiv.ui.layouts.XyzvLayout.ID_PREFIX",Uo.ID_PREFIX);h("xiv.ui.layouts.XyzvLayout.FRAMES",Vo);h("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",Uo.CSS_SUFFIX);h("xiv.ui.layouts.XyzvLayout.InteractorSet",Yo);h("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",Uo.prototype.cH);h("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",Uo.prototype.dk);h("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",Uo.prototype.zD);
h("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",Uo.prototype.CS);h("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",Uo.prototype.$z);h("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",Uo.prototype.rC);h("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",Uo.prototype.Nq);h("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",Uo.prototype.QE);h("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",Uo.prototype.PE);
h("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",Uo.prototype.ME);h("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",Uo.prototype.Wg);h("xiv.ui.layouts.XyzvLayout.prototype.loop",Uo.prototype.loop);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",Uo.prototype.Mf);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",Uo.prototype.hi);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",Uo.prototype.Il);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",Uo.prototype.Xr);
h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",Uo.prototype.sg);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",Uo.prototype.Qi);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",Uo.prototype.YP);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",Uo.prototype.Pu);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",Uo.prototype.Qf);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",Uo.prototype.yg);
h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",Uo.prototype.Rf);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",Uo.prototype.xn);h("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",Uo.prototype.g);V.f.Kc=function(){Uo.call(this,["X","Y","Z"])};m(V.f.Kc,Uo);h("xiv.ui.layouts.TwoDWidescreen",V.f.Kc);V.f.Kc.Ob="TwoDWidescreen";V.f.Kc.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";V.f.Kc.CSS_SUFFIX={si:"x",cg:"y",Rn:"z"};f=V.f.Kc.prototype;f.Mf=function(){V.f.Kc.d.Mf.call(this);this.dk("X",["RIGHT"]);C(this.j.X.ea(),"resize",this.sg.bind(this));C(this.j.X.ea(),"resize_end",this.m.bind(this))};
f.hi=function(){V.f.Kc.d.hi.call(this);this.dk("Y",["BOTTOM"]);C(this.j.Y.ea(),"resize",this.Qi.bind(this));C(this.j.Y.ea(),"resize_end",this.m.bind(this))};f.sg=function(){this.yl(function(a){var b=a.width,c=Math.max(this.B.width-a.width,this.Rc);A(["Y","Z"],function(a){this.j[a].a().style.left=b+"px";this.j[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.Di()};
f.Qi=function(){this.yl(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.B.height-c;this.j.Z.a().style.top=c+"px";this.j.Z.a().style.height=d+"px"}.bind(this));this.Di()};f.m=function(){V.f.Kc.d.m.call(this);this.Hr();this.Qf();this.Rf();this.yg()};
f.Hr=function(){if(this.Aa.width!==this.B.width||this.Aa.height!==this.B.height){var a=1-(this.Aa.height-this.B.height)/this.Aa.height,b=1-(this.Aa.width-this.B.width)/this.Aa.width;this.Wg(function(c){frameSize=Pi(c.a());c.a().style.width=Math.max(frameSize.width*b,this.Rc).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.je).toString()+"px"}.bind(this))}};
f.Qf=function(){var a=this.j.X;a.a().style.height=this.B.height.toString()+"px";ll.pb(a.ea().ye(),{left:this.Rc,width:this.B.width-2*this.Rc});var b=a.ea().ze("RIGHT");b.style.left=a.a().style.width;Oi(b,this.B.height);a.ea().update()};f.Rf=function(){var a=this.j.Y;a.a().style.left=this.j.X.a().style.width;ll.pb(a.ea().ye(),{top:this.je,height:this.B.height-2*this.je});var b=a.ea().ze("BOTTOM");b.style.top=a.a().style.height;Ni(b,parseInt(a.a().style.width));a.ea().update()};
f.yg=function(){var a=this.j.Z;a.a().style.left=this.j.X.a().style.width;a.a().style.top=this.j.Y.a().style.height;a.a().style.height=this.B.height-parseInt(this.j.Y.a().style.height)+NaN};h("xiv.ui.layouts.TwoDWidescreen.TITLE",V.f.Kc.Ob);h("xiv.ui.layouts.TwoDWidescreen.EventType",{});h("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",V.f.Kc.ID_PREFIX);h("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",V.f.Kc.CSS_SUFFIX);h("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",V.f.Kc.prototype.Mf);
h("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",V.f.Kc.prototype.hi);h("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",V.f.Kc.prototype.sg);h("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",V.f.Kc.prototype.Qi);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",V.f.Kc.prototype.m);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",V.f.Kc.prototype.Qf);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",V.f.Kc.prototype.Rf);
h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",V.f.Kc.prototype.yg);V.f.Hd=function(a){Uo.call(this,a)};m(V.f.Hd,Uo);h("xiv.ui.layouts.SingleFrameLayout",V.f.Hd);V.f.Hd.Ob="SingleFrameLayout";V.f.Hd.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";V.f.Hd.prototype.Hr=function(){if(this.Aa.width!==this.B.width||this.Aa.height!==this.B.height){var a=this.Aa.height*(1-(this.Aa.height-this.B.height)/this.Aa.height),b=this.Aa.width*(1-(this.Aa.width-this.B.width)/this.Aa.width);this.loop(function(c){null!=c&&Mi(c.a(),Math.max(b,this.Rc),Math.max(a,this.je))}.bind(this))}};
V.f.Hd.prototype.m=function(){V.f.Hd.d.m.call(this);this.Hr()};h("xiv.ui.layouts.SingleFrameLayout.TITLE",V.f.Hd.Ob);h("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",V.f.Hd.ID_PREFIX);h("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",V.f.Hd.prototype.m);function cp(){V.f.Hd.call(this,"V");R(this.j.V.a(),zk.Kb(Go.Bd,this.constructor.Ob))}m(cp,V.f.Hd);h("xiv.ui.layouts.ThreeD",cp);cp.ID_PREFIX="xiv.ui.layouts.ThreeD";h("xiv.ui.layouts.ThreeD.TITLE","ThreeD");h("xiv.ui.layouts.ThreeD.ID_PREFIX",cp.ID_PREFIX);function dp(){V.f.Hd.call(this,"X");R(this.j.X.a(),zk.Kb(Go.Bd,this.constructor.Ob.toLowerCase()))}m(dp,V.f.Hd);h("xiv.ui.layouts.Sagittal",dp);dp.ID_PREFIX="xiv.ui.layouts.Sagittal";h("xiv.ui.layouts.Sagittal.TITLE","Sagittal");h("xiv.ui.layouts.Sagittal.ID_PREFIX",dp.ID_PREFIX);V.f.lb=function(){Uo.call(this)};m(V.f.lb,Uo);h("xiv.ui.layouts.Conventional",V.f.lb);V.f.lb.Ob="Conventional";V.f.lb.ID_PREFIX="xiv.ui.layouts.Conventional";V.f.lb.CSS_SUFFIX={si:"x",cg:"y",Rn:"z",Os:"v",tV:"v-boundary"};f=V.f.lb.prototype;f.Mf=function(){V.f.lb.d.Mf.call(this);this.dk("X",["RIGHT","TOP_RIGHT"]);C(this.j.X.ea(),"resize",this.sg.bind(this));C(this.j.X.ea(),"resize_end",this.m.bind(this))};
f.hi=function(){V.f.lb.d.hi.call(this);this.dk("Y",["RIGHT","TOP_RIGHT"]);C(this.j.Y.ea(),"resize",this.Qi.bind(this));C(this.j.Y.ea(),"resize_end",this.m.bind(this))};f.Il=function(){V.f.lb.d.Il.call(this)};f.Xr=function(){V.f.lb.d.Xr.call(this);this.dk("V","BOTTOM");C(this.j.V.ea(),"resize",this.Pu.bind(this));C(this.j.V.ea(),"resize_end",this.m.bind(this))};f.yl=function(a){this.yj();var b=Pi(this.j.X.a()),c=Pi(this.j.Y.a()),d=Pi(this.j.Z.a());a(b,c,d,b.width+c.width+d.width-this.B.width)};
f.sg=function(){this.yl(function(a,b,c){b=Math.max(this.B.width-a.width-c.width,this.Rc);var d=this.B.height-a.height;yi(this.j.Y.a(),a.width,d);Mi(this.j.Y.a(),b,a.height);yi(this.j.Z.a(),a.width+b,d);Mi(this.j.Z.a(),c.width,a.height);Mi(this.j.V.a(),this.B.width,this.B.height-a.height)}.bind(this));this.Di()};
f.Qi=function(){this.yl(function(a,b){var c=this.B.height-b.height;yi(this.j.X.a(),0,c);Mi(this.j.X.a(),a.width,b.height);yi(this.j.Z.a(),a.width+b.width,c);Mi(this.j.Z.a(),this.B.width-a.width-b.width,b.height);Mi(this.j.V.a(),this.B.width,this.B.height-b.height)}.bind(this));this.Di()};f.Pu=function(){this.yj();var a=parseInt(this.j.V.a().style.height),b=this.B.height-a;w(this.j,function(c){c!==this.j.V&&ll.pb(c.a(),{top:a,height:b})}.bind(this));this.Qf();this.Rf();this.Di()};
f.m=function(){V.f.lb.d.m.call(this);this.xn();this.HA();this.IA();this.Qf();this.Rf();this.yg()};f.HA=function(){var a=parseInt(this.j.V.a().style.height),b=Math.max(this.B.height-a,this.je);this.Wg(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};f.IA=function(){var a,b=1-(this.Aa.width-this.B.width)/this.Aa.width;this.Aa.width!==this.B.width&&this.Wg(function(c){a=Pi(c.a());c.a().style.width=Math.max(a.width*b,this.Rc).toString()+"px"}.bind(this))};
f.ts=function(a){var b=this.j.V.ea().Ho("BOTTOM"),c=this.j[a].ea().ye(),d=Ai(this.j[a].a()),e=Pi(this.j[a].a());yi(c,parseInt(c.style.left),this.je);Mi(c,this.B.width-3*this.Rc,this.B.height-2*this.je);c=this.j[a].ea().ze("RIGHT");yi(c,d.x+e.width,d.y);Oi(c,this.B.height-b.ub.y);yi(this.j[a].ea().ze("TOP_RIGHT"),d.x+e.width,d.y);this.j[a].ea().update()};f.Qf=function(){ll.pb(this.j.X.ea().ye(),{left:this.Rc});this.ts("X")};
f.Rf=function(){this.j.Y.a().style.left=this.j.X.a().style.width;ll.pb(this.j.Y.ea().ye(),{left:2*this.Rc});this.ts("Y")};f.yg=function(){this.j.Z.a().style.left=(parseInt(this.j.X.a().style.width)+parseInt(this.j.Y.a().style.width)).toString()+"px"};
f.xn=function(){if(this.Aa.width!==this.B.width||this.Aa.height!==this.B.height){var a=Pi(this.j.V.a());Mi(this.j.V.a(),this.B.width,Math.max(a.height*(1-(this.Aa.height-this.B.height)/this.Aa.height),this.je))}yi(this.j.V.ea().ye(),this.B.width,this.je);Mi(this.j.V.ea().ye(),this.B.width-3*this.Rc,this.B.height-2*this.je);a=this.j.V.ea().ze("BOTTOM");yi(a,0,Pi(this.j.V.a()).height);Ni(a,this.B.width);this.j.V.ea().update()};h("xiv.ui.layouts.Conventional.TITLE",V.f.lb.Ob);
h("xiv.ui.layouts.Conventional.EventType",{});h("xiv.ui.layouts.Conventional.ID_PREFIX",V.f.lb.ID_PREFIX);h("xiv.ui.layouts.Conventional.CSS_SUFFIX",V.f.lb.CSS_SUFFIX);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",V.f.lb.prototype.Mf);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",V.f.lb.prototype.hi);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",V.f.lb.prototype.Il);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",V.f.lb.prototype.Xr);
h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",V.f.lb.prototype.sg);h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y",V.f.lb.prototype.Qi);h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",V.f.lb.prototype.Pu);h("xiv.ui.layouts.Conventional.prototype.updateStyle",V.f.lb.prototype.m);h("xiv.ui.layouts.Conventional.prototype.updateStyle_X",V.f.lb.prototype.Qf);h("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",V.f.lb.prototype.Rf);
h("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",V.f.lb.prototype.yg);h("xiv.ui.layouts.Conventional.prototype.updateStyle_V",V.f.lb.prototype.xn);function ep(){V.f.Hd.call(this,"Z");R(this.j.Z.a(),zk.Kb(Go.Bd,this.constructor.Ob))}m(ep,V.f.Hd);h("xiv.ui.layouts.Transverse",ep);ep.ID_PREFIX="xiv.ui.layouts.Transverse";h("xiv.ui.layouts.Transverse.TITLE","Transverse");h("xiv.ui.layouts.Transverse.ID_PREFIX",ep.ID_PREFIX);V.f.lc=function(){Uo.call(this)};m(V.f.lc,Uo);h("xiv.ui.layouts.FourUp",V.f.lc);V.f.lc.Ob="Four-Up";V.f.lc.ID_PREFIX="xiv.ui.layouts.FourUp";V.f.lc.CSS_SUFFIX={si:"x",cg:"y",Rn:"z",Os:"v"};f=V.f.lc.prototype;f.Mf=function(){V.f.lc.d.Mf.call(this);this.dk("X",["RIGHT","TOP","TOP_RIGHT"]);C(this.j.X.ea(),"resize",this.sg.bind(this));C(this.j.X.ea(),"resize_end",this.m.bind(this))};
f.sg=function(){var a=Ai(this.j.X.a()),b=Pi(this.j.X.a());yi(this.j.Y.a(),b.width,a.y);Mi(this.j.Y.a(),this.B.width-b.width,b.height);yi(this.j.Z.a(),0,0);Mi(this.j.Z.a(),b.width,a.y);yi(this.j.V.a(),b.width,0);Mi(this.j.V.a(),this.B.width-b.width,a.y);a=this.j.X.ea().Ho("RIGHT").ze();a.style.top="0px";a.style.height=this.B.height.toString()+"px";this.Di()};f.m=function(){V.f.lc.d.m.call(this);this.Hr();this.yg();this.xn();this.Qf();this.Rf()};
f.Hr=function(){if(this.Aa.width!==this.B.width||this.Aa.height!==this.B.height){var a=this.Aa.height*(1-(this.Aa.height-this.B.height)/this.Aa.height)/2,b=this.Aa.width*(1-(this.Aa.width-this.B.width)/this.Aa.width)/2;this.loop(function(c){Mi(c.a(),Math.max(b,this.Rc),Math.max(a,this.je))}.bind(this))}};
f.Qf=function(){this.j.X.a().style.top=this.j.Z.a().style.height;yi(this.j.X.ea().ye(),this.Rc,this.je);Mi(this.j.X.ea().ye(),this.B.width-2*this.Rc,this.B.height-2*this.je);var a=this.j.X.ea().Ho("TOP").ze();a.style.left="0px";a.style.width=this.B.width.toString()+"px";this.j.X.ea().update();a=this.j.X.ea().Ho("RIGHT").ze();a.style.top="0px";a.style.height=this.B.height.toString()+"px"};f.Rf=function(){this.j.Y.a().style.left=this.j.Z.a().style.width;this.j.Y.a().style.top=this.j.Z.a().style.height};
f.yg=function(){};f.xn=function(){this.j.V.a().style.left=this.j.Z.a().style.width};f.g=function(){V.f.lc.d.g.call(this)};h("xiv.ui.layouts.FourUp.TITLE",V.f.lc.Ob);h("xiv.ui.layouts.FourUp.EventType",{});h("xiv.ui.layouts.FourUp.ID_PREFIX",V.f.lc.ID_PREFIX);h("xiv.ui.layouts.FourUp.CSS_SUFFIX",V.f.lc.CSS_SUFFIX);h("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",V.f.lc.prototype.Mf);h("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",V.f.lc.prototype.sg);
h("xiv.ui.layouts.FourUp.prototype.updateStyle",V.f.lc.prototype.m);h("xiv.ui.layouts.FourUp.prototype.updateStyle_X",V.f.lc.prototype.Qf);h("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",V.f.lc.prototype.Rf);h("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",V.f.lc.prototype.yg);h("xiv.ui.layouts.FourUp.prototype.updateStyle_V",V.f.lc.prototype.xn);h("xiv.ui.layouts.FourUp.prototype.disposeInternal",V.f.lc.prototype.g);V.f.nc=function(){Uo.call(this,["X","Y","Z"])};m(V.f.nc,Uo);h("xiv.ui.layouts.TwoDRow",V.f.nc);V.f.nc.Ob="TwoDRow";V.f.nc.ID_PREFIX="xiv.ui.layouts.TwoDRow";V.f.nc.CSS_SUFFIX={si:"x",cg:"y",Rn:"z"};f=V.f.nc.prototype;f.Mf=function(){V.f.nc.d.Mf.call(this);this.dk("X",["RIGHT"]);C(this.j.X.ea(),"resize",this.sg.bind(this));C(this.j.X.ea(),"resize_end",this.m.bind(this))};
f.hi=function(){V.f.nc.d.hi.call(this);this.dk("Y",["RIGHT"]);C(this.j.Y.ea(),"resize",this.Qi.bind(this));C(this.j.Y.ea(),"resize_end",this.m.bind(this))};f.Il=function(){V.f.nc.d.Il.call(this)};f.yl=function(a){this.yj();var b=Pi(this.j.X.a()),c=Pi(this.j.Y.a()),d=Pi(this.j.Z.a());a(b,c,d,b.width+c.width+d.width-this.B.width)};
f.sg=function(){this.yl(function(a,b,c){b=Math.max(this.B.width-a.width-c.width,this.Rc);var d=this.B.height-a.height;yi(this.j.Y.a(),a.width,d);Mi(this.j.Y.a(),b,a.height);yi(this.j.Z.a(),a.width+b,d);Mi(this.j.Z.a(),c.width,a.height)}.bind(this));this.Di()};
f.Qi=function(){this.yl(function(a,b){var c=this.B.height-b.height;yi(this.j.X.a(),0,c);Mi(this.j.X.a(),a.width,b.height);yi(this.j.Z.a(),a.width+b.width,c);Mi(this.j.Z.a(),this.B.width-a.width-b.width,b.height);Mi(this.j.V.a(),this.B.width,this.B.height-b.height)}.bind(this));this.Di()};f.m=function(){V.f.nc.d.m.call(this);this.IA();this.HA();this.Qf();this.Rf();this.yg()};f.HA=function(){var a=this.B.height.toString()+"px";this.Wg(function(b){b.a().style.height=a})};
f.IA=function(){var a,b=1-(this.Aa.width-this.B.width)/this.Aa.width;this.Aa.width!==this.B.width&&this.Wg(function(c){a=Pi(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.Rc).toString()+"px"}.bind(this))};f.ts=function(a){var b=this.j[a].ea().ye(),c=Ai(this.j[a].a()),d=Pi(this.j[a].a());yi(b,parseInt(b.style.left),this.je);Mi(b,this.B.width-3*this.Rc,this.B.height-2*this.je);b=this.j[a].ea().ze("RIGHT");yi(b,c.x+d.width,c.y);Oi(b,this.B.height);this.j[a].ea().update()};
f.Qf=function(){ll.pb(this.j.X.ea().ye(),{left:this.Rc});this.ts("X")};f.Rf=function(){this.j.Y.a().style.left=this.j.X.a().style.width;ll.pb(this.j.Y.ea().ye(),{left:2*this.Rc});this.ts("Y")};f.yg=function(){this.j.Z.a().style.left=(parseInt(this.j.X.a().style.width)+parseInt(this.j.Y.a().style.width)).toString()+"px"};h("xiv.ui.layouts.TwoDRow.TITLE",V.f.nc.Ob);h("xiv.ui.layouts.TwoDRow.EventType",{});h("xiv.ui.layouts.TwoDRow.ID_PREFIX",V.f.nc.ID_PREFIX);h("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",V.f.nc.CSS_SUFFIX);
h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",V.f.nc.prototype.Mf);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",V.f.nc.prototype.hi);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",V.f.nc.prototype.Il);h("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",V.f.nc.prototype.sg);h("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",V.f.nc.prototype.Qi);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle",V.f.nc.prototype.m);
h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",V.f.nc.prototype.Qf);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",V.f.nc.prototype.Rf);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",V.f.nc.prototype.yg);V.f.Sl=function(){V.f.Hd.call(this,"Y");R(this.j.Y.a(),zk.Kb(Go.Bd,this.constructor.Ob.toLowerCase()))};m(V.f.Sl,V.f.Hd);h("xiv.ui.layouts.Coronal",V.f.Sl);V.f.Sl.Ob="Coronal";V.f.Sl.ID_PREFIX="xiv.ui.layouts.Coronal";h("xiv.ui.layouts.Coronal.TITLE",V.f.Sl.Ob);h("xiv.ui.layouts.Coronal.ID_PREFIX",V.f.Sl.ID_PREFIX);function fp(){U.K.call(this);this.constructor.pB={};this.constructor.pB[V.f.lc.Ob]=V.f.lc;this.constructor.pB[V.f.lb.Ob]=V.f.lb;this.Jn={};this.Al={};this.kk={}}m(fp,U.K);h("xiv.ui.layouts.LayoutHandler",fp);fp.ID_PREFIX="xiv.ui.layouts.LayoutHandler";fp.CSS_SUFFIX={};f=fp.prototype;f.Yb=null;f.df=null;f.Cy=!1;f.Mk=null;f.Pf=null;f.QC=!0;f.dP=function(){return this.Cy};f.RK=function(a){this.QC=a};f.CE=function(){return this.Yb[this.ce]};f.DE=function(a){return this.Yb[this.ce].Zx(a)};
f.ss=function(){null!=this.df&&this.df.ss()};f.$x=function(){return null!=this.df?this.df.Nq():null};f.iN=function(a){return null!=this.df?this.df.QE(a):null};f.hN=function(a){return null!=this.df?this.df.ME(a):null};f.UE=function(a,b){return null!=this.df?this.df.PE(a,b):null};f.tH=function(a){this.sn(a);null!=this.df&&this.df.Sz();this.Yb[a].rC();this.df=this.Yb[a]};f.sC=function(a,b){if(void 0 in this.Jn)throw Error(a+" is an already used layout title!");b&&(this.Jn[a]=b)};
f.sn=function(a,b){if(!(a in this.Jn))throw Error("Invalid layout: "+a+"!");null==this.Yb&&(this.Yb={});a in this.Yb||(this.Yb[a]=new this.Jn[a],C(this.Yb[a],"p",this.Qu.bind(this)),gp(this.Yb[a]),Vh(this.a(),this.Yb[a].a()));this.Zu=this.ce;this.ce=a;this.eI(!1===b?0:500)};function hp(a){var b;w(a.Yb[a.ce].j,function(a,d){b=this.UE(d,Io);null!=b&&null==a[ip]&&(b.nq(a.a()),a[ip]=!0)}.bind(a))}f.Qu=function(){this.dispatchEvent({type:"v"})};
f.eI=function(a){a=ma(a)&&0<=a?a:500;this.Zu!=this.ce&&(this.Zu?this.QC?jp(this,a):jp(this,0):(kp(this,this.ce),lp(this,this.ce)))};function np(a,b,c){A(Yh(b.a()),function(a){null!=this.Al[c]||(this.Al[c]=[]);this.Al[c].push(a)}.bind(a))}function op(a){w(a.kk,function(a){Vh(this.a().parentNode,a)}.bind(a))}function pp(a,b){var c=[];w(a.kk,function(a,e){c=Pb(c,T.uE(a,this.Mk[e],this.Pf[e],b))}.bind(a));return c}
function jp(a,b){var c=a.Yb[a.ce].j,d;kp(a,a.ce);lp(a,a.ce);null!=a.Mk&&ub(a.Mk);null!=a.Pf&&ub(a.Pf);a.Mk={};a.Pf={};w(a.Yb[a.Zu].j,function(a,b){d=a.a().cloneNode(!1);this.kk[b]=d;np(this,a,b);w(this.Al,function(a,b){A(a,function(a){S(a);null!=this.kk[b]&&this.kk[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=T.vE(a.a(),c[b].a());this.Mk[b]=k.ZK;this.Pf[b]=k.zS}else this.Mk[b]={"z-index":0},this.Pf[b]={opacity:0}}.bind(a));op(a);T.Iz(pp(a,b),a.rz.bind(a),a.sz.bind(a),a.qz.bind(a))}
f.rz=function(){this.BF();this.Cy=!0;this.dispatchEvent({type:"s",BA:this.kk})};var ip=t();f=fp.prototype;f.sz=function(){this.dispatchEvent({type:"u",BA:this.kk})};
f.qz=function(){var a=this.Yb[this.ce].j;w(a,function(a,c){null!=this.Al[c]&&A(this.Al[c],function(c){a.a().appendChild(c)})}.bind(this));w(a,function(a,c){null!=this.Pf[c]&&ll.pb(a.a(),this.Pf[c])}.bind(this));this.Yb[this.ce]!==this.df&&this.Yb[this.ce].$z(this.$x());qp(this);this.Cy=!1;kp(this,this.ce);lp(this,this.ce);rp(this);this.dispatchEvent({type:"t",frames:a});hp(this);this.m()};function lp(a,b){a.Yb[b].a().style.opacity=1;a.Yb[b].m()}
function kp(a,b){a.Yb[b].a().style.visibility="visible";a.Yb[b].m()}f.BF=function(){w(this.Yb,function(a){a.a().style.visibility="hidden";a.m()}.bind(this))};function qp(a){w(a.kk,function(a){S(a);delete a})}function gp(a){w(a.j,function(a){C(a.a(),"dblclick",function(){})})}f.XP=function(a){this.eX.push(a)};f.m=function(){fp.d.m.call(this);this.Yb[this.ce].m()};
function rp(a){null!=a.Mk&&(w(a.Mk,function(a){ub(a)}),ub(a.Pf),delete a.Pf);null!=a.Pf&&(w(a.Pf,function(a){ub(a)}),ub(a.Pf),delete a.Pf)}f.g=function(){fp.d.g.call(this);rp(this);delete this.kk;ub(this.Al);delete this.Al;delete this.df;U.Kt(this.Yb);delete this.Yb;ub(this.Jn);delete this.Jn;delete this.ce;delete this.Zu};h("xiv.ui.layouts.LayoutHandler.EventType",{KT:"s",JT:"t",LT:"u",aw:"v"});h("xiv.ui.layouts.LayoutHandler.ID_PREFIX",fp.ID_PREFIX);h("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",fp.CSS_SUFFIX);
h("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);h("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",ip);h("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",fp.prototype.dP);h("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",fp.prototype.RK);h("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",fp.prototype.CE);h("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",fp.prototype.DE);h("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",fp.prototype.ss);
h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",fp.prototype.$x);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",fp.prototype.iN);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",fp.prototype.hN);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",fp.prototype.UE);h("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",fp.prototype.tH);h("xiv.ui.layouts.LayoutHandler.prototype.addLayout",fp.prototype.sC);
h("xiv.ui.layouts.LayoutHandler.prototype.setLayout",fp.prototype.sn);h("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",fp.prototype.eI);h("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",fp.prototype.BF);h("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",fp.prototype.XP);h("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",fp.prototype.m);h("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",fp.prototype.g);function sp(a,b){this.x=a;this.y=b}m(sp,th);f=sp.prototype;f.clone=function(){return new sp(this.x,this.y)};f.Xh=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=th.prototype.scale;f.kc=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.Xh())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.zd=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.Ao=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};V.b.pd=function(){V.b.u.call(this);this.gi("Display All");this.At=Rh("div",{id:"CheckboxHodler_"+t()});R(this.At,V.b.pd.CSS.NI);this.xm=new Bo(!0);this.xm.jc(this.At);this.qn(this.xm);C(this.xm,"change",this.fe.bind(this))};m(V.b.pd,V.b.u);h("xiv.ui.ctrl.CheckboxController",V.b.pd);V.b.pd.ID_PREFIX="xiv.ui.ctrl.CheckboxController";V.b.pd.CSS_SUFFIX={NI:"checkboxholder"};V.b.pd.prototype.fh=function(a){this.L.fh(a);this.fe()};V.b.pd.prototype.fe=function(){this.dispatchEvent({type:"o",checked:this.xm.vl()})};
V.b.pd.prototype.g=function(){V.b.pd.d.g.call(this);S(this.At);delete this.At;$c(this.xm);this.xm.i();delete this.xm};h("xiv.ui.ctrl.CheckboxController.ID_PREFIX",V.b.pd.ID_PREFIX);h("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",V.b.pd.CSS_SUFFIX);h("xiv.ui.ctrl.CheckboxController.prototype.setChecked",V.b.pd.prototype.fh);h("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",V.b.pd.prototype.fe);h("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",V.b.pd.prototype.g);U.q=function(){U.K.call(this);this.ie=Rh("img",{id:"nrg.ui.Thumbnail_"+t()});Vh(this.a(),this.ie);this.wg=Rh("div",{id:"DisplayText_"+t()});Vh(this.a(),this.wg);this.tv();this.a().className=U.q.Bd;this.ie.className=U.q.CSS.Cs;this.wg.className=U.q.CSS.Mn;tp(this,!0);this.zr()};m(U.q,U.K);h("nrg.ui.Thumbnail",U.q);U.q.ID_PREFIX="nrg.ui.Thumbnail";
U.q.CSS_SUFFIX={Cs:"image",Mn:"text",tU:"selected",Fs:"mouseover",mB:"image-mouseover",CB:"text-mouseover",kB:"highlight",Rl:"active",lB:"image-active",BB:"text-active",cJ:"hoverclone"};U.q.Bs="HOVERABLE_";f=U.q.prototype;f.bD=null;f.gd=null;f.ou=!1;f.XM=function(){return this.ie};f.jH=function(a,b){this.bD=a;this.ie.onerror=function(){this.ie.onerror="";this.ie.src=this.bD;null!=b&&b()}.bind(this)};f.ON=function(){return this.wg};
f.dy=function(){for(var a=this.wg;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};f.Og=function(){return this.gd=this.gd?this.gd:this.a()};f.Li=function(){return this.ou};f.Zz=function(a){this.ie.src=a;this.ie.className=U.q.CSS.Cs};f.Tr=function(a){this.wg.innerHTML=a};f.YG=function(){this.gd&&(this.gd.parentNode&&(this.gd=this.gd.parentNode.removeChild(this.gd)),delete this.gd,this.gd=null)};
f.vq=function(a,b){this.YG();tp(this,!1);this.gd=b?b:this.a().cloneNode(!0);this.gd.setAttribute("id",U.q.Bs+this.a().getAttribute("id"));this.gd.style.visibility="hidden";R(this.gd,U.q.CSS.cJ);tp(this,!0);a&&a.appendChild(this.gd);this.tv()};f.setActive=function(a,b){var c=this.a();(this.ou=a)?(b&&R(c,U.q.CSS.kB),R(c,U.q.CSS.Rl),R(this.wg,U.q.CSS.BB),R(this.ie,U.q.CSS.lB)):(qh(c,U.q.CSS.kB),qh(c,U.q.CSS.Rl),qh(this.wg,U.q.CSS.BB),qh(this.ie,U.q.CSS.lB))};
f.m=function(a){a&&this.a()&&ll.pb(this.a(),a)};f.Tz=function(){var a=this.a(),b=this.Og();if(b!==a){var c=di(a,b),c=Hi(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;ll.pb(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.Ru=function(){var a=this.Og();R(a,U.q.CSS.Fs);R(a.childNodes[1],U.q.CSS.CB);R(a.childNodes[0],U.q.CSS.mB);a!==this.a()&&this.Tz();this.dispatchEvent("w")};
f.zr=function(){var a=this.Og();a&&1<a.childNodes.length&&(qh(a,U.q.CSS.Fs),qh(a.childNodes[1],U.q.CSS.CB),qh(a.childNodes[0],U.q.CSS.mB),a.style.visibility=a!==this.a()?"hidden":"visible");this.dispatchEvent("x")};function tp(a,b){var c=a.Og();b?(C(c,"mouseover",a.Ru.bind(a)),C(c,"mouseout",a.zr.bind(a))):(Yc(c,"mouseover",a.Ru.bind(a)),Yc(c,"mouseout",a.zr.bind(a)))}f.tv=function(){ad(this.Og(),"y")&&Zc("y");C(this.Og(),"click",function(){this.dispatchEvent({type:"y"})}.bind(this))};
f.g=function(){U.q.d.g.call(this);$c(this);$c(this.a());null!=this.gd&&($c(this.gd),S(this.gd),delete this.gd);S(this.ie);delete this.ie;S(this.wg);delete this.wg;delete this.dW;delete this.ou};h("nrg.ui.Thumbnail.EventType",{Fs:"w",xJ:"x",dT:"y"});h("nrg.ui.Thumbnail.ID_PREFIX",U.q.ID_PREFIX);h("nrg.ui.Thumbnail.CSS_SUFFIX",U.q.CSS_SUFFIX);h("nrg.ui.Thumbnail.HOVERABLE_PREFIX",U.q.Bs);h("nrg.ui.Thumbnail.prototype.getImage",U.q.prototype.XM);h("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",U.q.prototype.jH);
h("nrg.ui.Thumbnail.prototype.getTextElement",U.q.prototype.ON);h("nrg.ui.Thumbnail.prototype.getText",U.q.prototype.dy);h("nrg.ui.Thumbnail.prototype.getHoverable",U.q.prototype.Og);h("nrg.ui.Thumbnail.prototype.isActive",U.q.prototype.Li);h("nrg.ui.Thumbnail.prototype.setImage",U.q.prototype.Zz);h("nrg.ui.Thumbnail.prototype.setText",U.q.prototype.Tr);h("nrg.ui.Thumbnail.prototype.removeHoverable",U.q.prototype.YG);h("nrg.ui.Thumbnail.prototype.createHoverable",U.q.prototype.vq);
h("nrg.ui.Thumbnail.prototype.setActive",U.q.prototype.setActive);h("nrg.ui.Thumbnail.prototype.updateStyle",U.q.prototype.m);h("nrg.ui.Thumbnail.prototype.repositionHoverable",U.q.prototype.Tz);h("nrg.ui.Thumbnail.prototype.onMouseOver",U.q.prototype.Ru);h("nrg.ui.Thumbnail.prototype.onMouseOut",U.q.prototype.zr);h("nrg.ui.Thumbnail.prototype.disposeInternal",U.q.prototype.g);U.mb=function(){U.K.call(this)};m(U.mb,U.K);h("nrg.ui.ScrollableContainer",U.mb);U.mb.ID_PREFIX="nrg.ui.ScrollableContainer";U.mb.CSS_SUFFIX={RJ:"scrollarea",Na:"slider",sk:"slider-thumb",tk:"slider-track",bw:"slider-thumb-hovered",UJ:"slider-track-hovered"};U.mb.nJ=30;f=U.mb.prototype;
f.n=function(a){U.mb.d.n.call(this,a);null==this.ei&&(this.ei=Rh("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+t(),"class":U.mb.CSS.RJ}),this.a().appendChild(this.ei));this.A=new U.A("vertical");this.A.n(this.a());C(this.A,"q",this.Be.bind(this));this.A.nq(this.a());R(this.A.a(),U.mb.CSS.Na);R(this.A.Rd,U.mb.CSS.sk);R(this.A.Ie,U.mb.CSS.tk);this.A.st(U.mb.CSS.bw);this.A.Kw(U.mb.CSS.UJ);this.m();this.Be()};f.Gg=function(a){this.ya||this.n();Vh(this.ei,a);this.Be()};f.a=function(){return this.o};
f.JN=function(){return this.A};f.FN=function(){return this.ei};f.m=function(a){a&&ll.pb(this.o,a)};f.Be=function(){var a=Pi(this.o).height,b=Pi(this.ei).height,c=[this.A.Sa(),this.A.Da()],d=[0,b-a];a<b?(this.A.a().style.opacity=1,ll.pb(this.A.Rd,{height:a/b*a}),this.A.ld(!0),a=this.A.Da()-this.A.$(),c=kl.XG(a,c,d).remappedVal,ll.pb(this.ei,{top:-c})):(this.A.a().style.opacity=0,this.A.ld(!1),this.A.S(100))};
f.g=function(){U.mb.d.g.call(this);null!=this.A&&($c(this.A),this.A.i(),delete this.A);null!=this.ei&&(S(this.ei),delete this.ei)};h("nrg.ui.ScrollableContainer.ID_PREFIX",U.mb.ID_PREFIX);h("nrg.ui.ScrollableContainer.CSS_SUFFIX",U.mb.CSS_SUFFIX);h("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",U.mb.nJ);h("nrg.ui.ScrollableContainer.prototype.render",U.mb.prototype.n);h("nrg.ui.ScrollableContainer.prototype.addContents",U.mb.prototype.Gg);h("nrg.ui.ScrollableContainer.prototype.getElement",U.mb.prototype.a);
h("nrg.ui.ScrollableContainer.prototype.getSlider",U.mb.prototype.JN);h("nrg.ui.ScrollableContainer.prototype.getScrollArea",U.mb.prototype.FN);h("nrg.ui.ScrollableContainer.prototype.updateStyle",U.mb.prototype.m);h("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",U.mb.prototype.Be);h("nrg.ui.ScrollableContainer.prototype.disposeInternal",U.mb.prototype.g);U.$b=function(){U.mb.call(this)};m(U.$b,U.mb);h("nrg.ui.ScrollableZippyTree",U.$b);U.$b.ID_PREFIX="nrg.ui.ScrollableZippyTree";U.$b.CSS_SUFFIX={mK:"zippytree"};f=U.$b.prototype;f.n=function(a){U.$b.d.n.call(this,a);this.v=new U.v;R(this.v.a(),U.$b.CSS.mK);this.ei.appendChild(this.v.a());this.Wr();this.A.IH(!0,.3)};f.Gg=function(a,b){this.v.Gg(a,b);a=ia(a)?a:[a];A(a,function(){}.bind(this));this.A.nq(this.v.a())};f.Nm=function(){this.v.Nm()};f.sq=function(){this.v.sq()};
f.Sc=function(a,b){this.v.Sc(a,b)};f.iO=function(){return this.v};f.KK=function(a){this.v.uq(a);this.Be()};f.Wr=function(){C(this.v,"m",this.Be.bind(this));C(this.v,"d",this.Be.bind(this));C(this.v,"e",this.Be.bind(this));C(this.v,Al.BJ,this.Be.bind(this))};f.m=function(a){a&&ll.pb(this.a(),a)};f.g=function(){U.$b.d.g.call(this);null!=this.v&&($c(this.v),this.v.i(),delete this.v)};h("nrg.ui.ScrollableZippyTree.EventType",{});h("nrg.ui.ScrollableZippyTree.ID_PREFIX",U.$b.ID_PREFIX);
h("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",U.$b.CSS_SUFFIX);h("nrg.ui.ScrollableZippyTree.prototype.render",U.$b.prototype.n);h("nrg.ui.ScrollableZippyTree.prototype.addContents",U.$b.prototype.Gg);h("nrg.ui.ScrollableZippyTree.prototype.expandAll",U.$b.prototype.Nm);h("nrg.ui.ScrollableZippyTree.prototype.collapseAll",U.$b.prototype.sq);h("nrg.ui.ScrollableZippyTree.prototype.setExpanded",U.$b.prototype.Sc);h("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",U.$b.prototype.iO);
h("nrg.ui.ScrollableZippyTree.prototype.addFolders",U.$b.prototype.KK);h("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",U.$b.prototype.Wr);h("nrg.ui.ScrollableZippyTree.prototype.updateStyle",U.$b.prototype.m);h("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",U.$b.prototype.g);function up(a){gd.call(this);this.r="interactor";this.dg=a;this.tw=this.$B=this.ZB=this.aC=this.YB=this.bC=null;this.ft=!0;this.Hk=this.Bk=this.vi=!1;this.Vd=[0,0];this.ow=new n.da(0,0,0);this.Op=new n.da(0,0,0);this.TF=0;this.hC=this.bt=null;this.jt=!1;this.hc={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}m(up,gd);up.prototype.__defineGetter__("config",function(){return this.hc});
up.prototype.__defineGetter__("leftButtonDown",function(){return this.vi});up.prototype.__defineGetter__("middleButtonDown",function(){return this.Bk});up.prototype.__defineGetter__("rightButtonDown",function(){return this.Hk});
up.prototype.Ja=function(){this.hc.MOUSEWHEEL_ENABLED?(this.tw=new Qn(this.dg),this.bC=C(this.tw,"mousewheel",this.Ar.bind(this))):(Zc(this.bC),this.tw=null);this.hc.MOUSECLICKS_ENABLED?(this.YB=C(this.dg,"mousedown",this.tz.bind(this)),this.aC=C(this.dg,"mouseup",this.uz.bind(this))):(Zc(this.YB),Zc(this.aC));this.dg.oncontextmenu=this.hc.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.hc.KEYBOARD_ENABLED?this.Yj.bind(this):null;this.hc.TOUCH_ENABLED?(this.hc.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.BK=C(this.dg,"touchstart",this.MQ.bind(this)),this.AK=C(this.dg,"touchmove",this.KQ.bind(this)),this.zK=C(this.dg,"touchend",this.GQ.bind(this))):(Zc(this.BK),Zc(this.AK),Zc(this.zK));Zc(this.ZB);Zc(this.$B);this.ZB=C(this.dg,"mousemove",this.dQ.bind(this));this.$B=C(this.dg,"mouseout",this.eQ.bind(this))};
up.prototype.tz=function(a){0==a.button?this.vi=!0:1==a.button?this.Bk=!0:2==a.button&&(this.Hk=!0);eval("this.onMouseDown("+this.vi+","+this.Bk+","+this.Hk+")");vp(this);a.preventDefault()};up.prototype.cQ=function(){};up.prototype.uz=function(a){0==a.button?this.vi=!1:1==a.button?this.Bk=!1:2==a.button&&(this.Hk=!1);eval("this.onMouseUp("+this.vi+","+this.Bk+","+this.Hk+")");vp(this);a.preventDefault()};up.prototype.__defineGetter__("mousePosition",function(){return this.Vd});f=up.prototype;
f.hQ=function(){};f.eQ=function(a){this.ft=!1;this.hc.KEYBOARD_ENABLED&&(window.onkeydown=null);this.Hk=this.Bk=this.vi=!1;vp(this);this.ow=new n.da(0,0,0);a.preventDefault()};f.DG=function(){};f.MQ=function(a){a.preventDefault();a.Ja(a.Nd.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Op=new n.da(a.clientX,a.clientY,0);this.hC=setTimeout(this.IQ.bind(this,a),500)};f.LQ=function(){};
f.IQ=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new ye;a.ui=!0;a.wh=this instanceof wp;this.dispatchEvent(a);this.kt=!0};f.HQ=function(){};function xp(a){clearTimeout(a.hC);if(a.kt){var b=new ye;b.ui=!1;b.wh=a instanceof wp;a.dispatchEvent(b)}a.kt=!1}f.GQ=function(a){a.preventDefault();eval("this.onTouchEnd()");xp(this)};f.FQ=function(){};
f.KQ=function(a){a.preventDefault();this.kt||xp(this);this.touchmoveEvent=a=a.Nd;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new n.da(c[0],c[1],0);var b=c[0]>3*this.dg.clientWidth/4,d=c[0]<this.dg.clientWidth/4,e=c[1]<this.dg.clientHeight/4,c=c[1]>3*this.dg.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Op.zd(a);this.Op=a.clone();if(this.kt)a=new we,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.pe=e,this.dispatchEvent(a);
else if(this instanceof yp&&(b||d))a=new ze,a.Oc=0>e.y,this.dispatchEvent(a);else if(this instanceof wp||c)e.scale(3),a=new xe,a.pe=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new n.da(a[0],a[1],0),b=new n.da(b[0],b[1],0),e=wd(a,b),b=e-this.TF,this.TF=e,this.Op.zd(a),this.Op=a.clone(),10<Math.abs(b)&&(a=new ye,a.ui=0<b,a.wh=this instanceof wp,this.dispatchEvent(a)))};f.JQ=function(){};
f.dQ=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.ft=!0;this.hc.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.Yj.bind(this));a.preventDefault();var b=a.shiftKey;this.jt=b;this.Vd=[a.offsetX,a.offsetY];var c=new n.da(this.Vd[0],this.Vd[1],0);a=this.ow.zd(c);this.ow=c.clone();this.hc.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Bk||this.vi||this.Hk)&&vp(this),this.bt=setTimeout(function(){vp(this);var a=new Ae;a.ot=c.x;a.pt=
c.y;this.dispatchEvent(a);this.bt=null}.bind(this),300));0!=a.Xh()&&(this.vi&&!b?(b=new xe,a.scale(3),b.pe=a,this.dispatchEvent(b)):this.Bk||this.vi&&b?(b=new we,b.pe=a,this.dispatchEvent(b)):this.Hk&&(b=new ye,b.ui=0<a.y,b.wh=!1,this.dispatchEvent(b)))};function vp(a){a.bt&&clearTimeout(a.bt);a.dispatchEvent(new Be)}f.iQ=function(){};f.Ar=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");vp(this);a.preventDefault()};f.WP=function(){};
f.Yj=function(a){if(this.ft){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");vp(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,g=a.keyCode;82!=g||b||c||d||e?37<=g&&40>=g&&(a.preventDefault(),e?a=new we:b?a=new ye:(a=new xe,this instanceof yp&&(a=new ze)),a&&(c=new n.da(0,0,0),37==g?(c.x=5,a.Oc=!1,b&&(a.Oc=!0,a.ui=!0,a.wh=!1)):39==g?(c.x=-5,a.Oc=!0,b&&(a.ui=!1,a.wh=!1)):38==g?(c.y=5,a.Oc=!0,b&&(a.ui=!0,a.wh=!0)):40==g&&(c.y=-5,a.Oc=!1,b&&(a.ui=!1,a.wh=!0)),a.pe=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new Ce,this.dispatchEvent(a))}};h("X.interactor",up);h("X.interactor.prototype.init",up.prototype.Ja);h("X.interactor.prototype.onMouseDown",up.prototype.cQ);h("X.interactor.prototype.onMouseUp",up.prototype.hQ);h("X.interactor.prototype.onMouseMove",up.prototype.DG);h("X.interactor.prototype.onMouseWheel",up.prototype.iQ);h("X.interactor.prototype.onKey",up.prototype.WP);h("X.interactor.prototype.onTouchStart",up.prototype.LQ);h("X.interactor.prototype.onTouchMove",up.prototype.JQ);
h("X.interactor.prototype.onTouchEnd",up.prototype.FQ);h("X.interactor.prototype.onTouchHover",up.prototype.HQ);function yp(a){up.call(this,a);this.r="interactor2D"}m(yp,up);yp.prototype.Ar=function(a){yp.d.Ar.call(this,a);var b=new ze;null==a.af&&(a.af=0);b.Oc=0>a.af;this.dispatchEvent(b)};function zp(a,b){if(!ma(a)||!ma(b))throw Error("A camera needs valid width and height values.");gd.call(this);this.r="camera";this.lm=new n.da(0,100,0);this.Wn=new n.da(0,0,0);this.Oc=new n.da(0,0,1);this.sb=a;this.ab=b;this.fa=this.Cu(this.lm,this.Wn)}m(zp,gd);zp.prototype.observe=function(a){if(!(null!=a&&a instanceof up))throw Error("Could not observe the interactor.");C(a,ie,this.qQ.bind(this));C(a,he,this.kQ.bind(this));C(a,je,this.WQ.bind(this))};
zp.prototype.qQ=function(a){if(!(a instanceof xe))throw Error("Received no valid rotate event.");this.rotate(a.pe)};zp.prototype.WQ=function(a){if(!(a instanceof ye))throw Error("Received no valid zoom event.");a.ui?this.xp(a.wh):this.yp(a.wh)};zp.prototype.kQ=function(a){if(!(a instanceof we))throw Error("Received no valid pan event.");this.Xu(a.pe)};zp.prototype.__defineGetter__("view",function(){return this.fa});
zp.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.fa=a});zp.prototype.__defineGetter__("position",function(){return[this.lm.x,this.lm.y,this.lm.z]});zp.prototype.__defineSetter__("position",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid position.");this.lm=new n.da(a[0],a[1],a[2]);this.reset()});zp.prototype.__defineGetter__("focus",function(){return[this.Wn.x,this.Wn.y,this.Wn.z]});
zp.prototype.__defineSetter__("focus",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid focus");this.Wn=new n.da(a[0],a[1],a[2]);this.reset()});zp.prototype.__defineGetter__("up",function(){return[this.Oc.x,this.Oc.y,this.Oc.z]});zp.prototype.__defineSetter__("up",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid up vector.");this.Oc=new n.da(a[0],a[1],a[2]);this.reset()});f=zp.prototype;f.reset=function(){this.fa=this.Cu(this.lm,this.Wn)};
f.rotate=function(a){if(ia(a)&&2==a.length)a=new n.da(a[0],a[1],0);else if(!(a instanceof n.da))throw Error("Invalid distance vector for rotate operation.");return a};f.Xu=function(a){if(ia(a)&&2==a.length)a=new n.da(a[0],a[1],0);else if(!(a instanceof n.da))throw Error("Invalid distance vector for pan operation.");this.fa[12]-=a.x;this.fa[13]+=a.y};f.xp=function(a){var b=20;null!=a&&!a&&(b=1);this.fa[14]+=b};f.yp=function(a){var b=20;null!=a&&!a&&(b=1);this.fa[14]-=b};
f.Cu=function(a,b){if(!(a instanceof n.da&&b instanceof n.da))throw Error("3D vectors required for calculating the view.");return n.w.Yq()};h("X.camera",zp);h("X.camera.prototype.pan",zp.prototype.Xu);h("X.camera.prototype.rotate",zp.prototype.rotate);h("X.camera.prototype.zoomIn",zp.prototype.xp);h("X.camera.prototype.zoomOut",zp.prototype.yp);function Ap(a){function b(a,b,d){b=b*Math.PI*2;b=on(pn(q,Math.cos(b)),pn(p,Math.sin(b)));a=on(on(c,pn(e,a)),pn(b,g));d=on(pn(b,1-Math.abs(d)),pn(k,d));return new tn(a,d)}this.sc=[];a=a||{};var c=new nn(a.start||[0,-1,0]),d=new nn(a.end||[0,1,0]),e=qn(d,c),g=a.di||1;a=a.Ua||16;for(var k=rn(e),l=.5<Math.abs(k.y()),q=rn((new nn(l,!l,0)).Em(k)),p=rn(q.Em(k)),l=new tn(c,sn(k)),d=new tn(d,rn(k)),s=[],r=0;r<a;r++){var u=r/a,v=(r+1)/a;s.push(new vn([l,b(0,u,-1),b(0,v,-1)]));s.push(new vn([b(0,v,0),b(0,u,
0),b(1,u,0),b(1,v,0)]));s.push(new vn([d,b(1,v,1),b(1,u,1)]))}return Gn(s)}m(Ap,Fn);function Bp(){ae.call(this);this.r="cylinder";this.Dw=[-10,-10,-10];this.mw=[10,10,10];this.mm=10;this.Yd=32;za(this,new Hn)}m(Bp,ae);Bp.prototype.__defineGetter__("start",function(){return this.Dw});Bp.prototype.__defineSetter__("start",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid start");this.Dw=a});Bp.prototype.__defineGetter__("end",function(){return this.mw});
Bp.prototype.__defineSetter__("end",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid end");this.mw=a});Bp.prototype.__defineGetter__("radius",function(){return this.mm});Bp.prototype.__defineSetter__("radius",function(a){if(!ma(a))throw Error("Invalid radius.");this.mm=a});Bp.prototype.ua=function(){Jn(this,new Ap({start:this.Dw,end:this.mw,di:this.mm,Ua:this.Yd}));Bp.d.ua.call(this)};h("X.cylinder",Bp);h("X.cylinder.prototype.modified",Bp.prototype.ua);function Nn(a){F.call(this);this.r="labelmap";this.uj=a;this.Cw=new Float32Array([-255,-255,-255,-255])}m(Nn,F);Nn.prototype.ua=function(){var a=new be;a.gb=this;this.dispatchEvent(a);this.uj.ua()};Nn.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(ia(a)&&4==a.length)b=a;else{if(!this.Te)throw Error("No colortable assigned.");b=this.Te.sf.get(a).slice(1,5)}this.Cw=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
h("X.labelmap",Nn);function Cp(a){this.sc=[];a=a||{};var b=new nn(a.zi||[0,0,0]),c=a.di?a.di.length?a.di:[a.di,a.di,a.di]:[1,1,1];return Gn([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new vn(a[0].map(function(e){e=new nn(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new tn(e,new nn(a[1]))}))}))}m(Cp,Fn);function Dp(){ae.call(this);this.r="cube";this.nb=[0,0,0];this.rw=this.qw=this.pw=20;this.jo=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];za(this,new Hn)}m(Dp,ae);Dp.prototype.__defineGetter__("center",function(){return this.nb});Dp.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center");this.nb=a});Dp.prototype.__defineGetter__("lengthX",function(){return this.pw});
Dp.prototype.__defineSetter__("lengthX",function(a){if(!ma(a))throw Error("Invalid lengthX.");this.pw=a});Dp.prototype.__defineGetter__("lengthY",function(){return this.qw});Dp.prototype.__defineSetter__("lengthY",function(a){if(!ma(a))throw Error("Invalid lengthY.");this.qw=a});Dp.prototype.__defineGetter__("lengthZ",function(){return this.rw});Dp.prototype.__defineSetter__("lengthZ",function(a){if(!ma(a))throw Error("Invalid lengthZ.");this.rw=a});
Dp.prototype.ua=function(){Jn(this,new Cp({zi:this.nb,di:[this.pw/2,this.qw/2,this.rw/2]}));Dp.d.ua.call(this)};h("X.cube",Dp);h("X.cube.prototype.modified",Dp.prototype.ua);function wp(a){up.call(this,a);this.r="interactor3D"}m(wp,up);wp.prototype.Ar=function(a){wp.d.Ar.call(this,a);var b=new ye;null==a.af&&(a.af=0);b.ui=0>a.af;b.wh=!0;this.dispatchEvent(b)};function Ep(a){gd.call(this);this.r="array";this.Bb=[];this.OB=a}m(Ep,gd);function Fp(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}Ep.prototype.add=function(a){this.Bb.push(a);return!0};Ep.prototype.remove=function(a){a=this.Bb.indexOf(a);-1<a&&this.Bb.splice(a,1);return!0};Ep.prototype.clear=function(){this.Bb.length=0};
function Gp(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),Gp(a,b,d),Gp(a,d,c);b<d;++b)if(0<a.OB(a.Bb[b],a.Bb[d])){var e=a.Bb[b];a.Bb[b]=a.Bb[d];for(var g=a,k=d,l=c;k+1<l&&0>g.OB(g.Bb[k+1],e);){var q=g,p=k+1,s=q.Bb[k];q.Bb[k]=q.Bb[p];q.Bb[p]=s;++k}g.Bb[k]=e}}Ep.prototype.sort=function(){Gp(this,0,this.Bb.length)};function Hp(a,b){zp.call(this,a,b);this.r="camera2D"}m(Hp,zp);Hp.prototype.rotate=function(a){a=Hp.d.rotate.call(this,a);var b=new ve;0<a.x?b.Fw--:0>a.x&&b.Fw++;0<a.y?b.sw++:0>a.y&&b.sw--;this.dispatchEvent(b)};Hp.prototype.xp=function(a){var b=20;null!=a&&!a&&(b=.02);this.fa[14]+=b};Hp.prototype.yp=function(a){var b=20;null!=a&&!a&&(b=.02);this.fa[14]-=b};
Hp.prototype.Xu=function(a){if(ia(a)&&2==a.length)a=new n.da(a[0],a[1],0);else if(!(a instanceof n.da))throw Error("Invalid distance vector for pan operation.");this.fa[12]-=a.x/this.fa[14];this.fa[13]+=a.y/this.fa[14]};function Ip(a,b){zp.call(this,a,b);this.r="camera3D";this.RB=45;this.xw=n.w.My(n.w.Yq(),this.RB,a/b,1,1E4)}m(Ip,zp);Ip.prototype.rotate=function(a){a=Ip.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new n.da(this.fa[1],this.fa[5],this.fa[9]),d=new n.da(this.fa[0],this.fa[4],this.fa[8]);c.normalize();d.normalize();n.w.rotate(this.fa,b,c.x,c.y,c.z);n.w.rotate(this.fa,a,d.x,d.y,d.z)};Ip.prototype.Cu=function(a,b){var c=Ip.d.Cu.call(this,a,b);n.w.dG(c,a,b,this.Oc);return c};
function Jp(a,b,c,d){var e=new Float32Array(4),g=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);n.w.multiply(a.xw,a.fa,l);n.w.kc(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;n.w.oG(k,e,g);g[3]=1/g[3];g[0]*=g[3];g[1]*=g[3];g[2]*=g[3];return g}h("X.camera3D",Ip);function Kp(a){wj.call(this,a);this.Si=new Tn;C(this.Si,"change",this.mO,!1,this)}m(Kp,wj);var Lp={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=Kp.prototype;f.D=function(){this.xg=this.Cm();var a=Lp[this.Za];this.o=this.W().D("div",a,this.xg);Mp(this);Np(this);Op(this)};f.Db=function(){Kp.d.Db.call(this);kc&&7>rc&&C(this.a(),"resize",this.ej,!1,this);this.ej();var a=this.a();Vj(a,"progressbar");Wj(a,"live","polite")};f.wd=function(){Kp.d.wd.call(this);Pp(this)};
f.Cm=function(){return this.W().D("div","progress-bar-thumb")};function Pp(a){kc&&7>rc&&Yc(a.a(),"resize",a.ej,!1,a)}f.yf=function(a){Kp.d.yf.call(this,a);Pj(this.a(),Lp[this.Za]);a=Ih(null,"progress-bar-thumb",this.a())[0];a||(a=this.Cm(),this.a().appendChild(a));this.xg=a};f.$=function(){return this.Si.$()};f.S=function(a){this.Si.S(a);this.a()&&Mp(this)};function Mp(a){Wj(a.a(),"valuenow",a.$())}f.Sa=function(){return this.Si.Sa()};f.Lf=function(a){this.Si.Lf(a);this.a()&&Np(this)};
function Np(a){Wj(a.a(),"valuemin",a.Sa())}f.Da=function(){return this.Si.Da()};f.Fe=function(a){this.Si.Fe(a);this.a()&&Op(this)};function Op(a){Wj(a.a(),"valuemax",a.Da())}f.Za="horizontal";f.mO=function(){this.ej();this.dispatchEvent("change")};
f.ej=function(){if(this.xg){var a=this.Sa(),b=this.Da(),a=(this.$()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Za?kc&&7>rc?(this.xg.style.top=0,this.xg.style.height="100%",b=this.xg.offsetHeight,a=Math.round(a*b),this.xg.style.top=b-a+"px",this.xg.style.height=a+"px"):(this.xg.style.top=100-b+"%",this.xg.style.height=b+"%"):this.xg.style.width=b+"%"}};
f.ek=function(a){if(this.Za!=a){var b=Lp[this.Za],c=Lp[a];this.Za=a;if(a=this.a())Oj(a,b)&&(Rj(a,b),Pj(a,c)),b=this.xg.style,"vertical"==this.Za?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.ej()}};f.Qc=function(){return this.Za};f.g=function(){Pp(this);Kp.d.g.call(this);this.xg=null;this.Si.i()};f.Lj=function(){return this.Si.Lj()};f.Xi=function(a){this.Si.Xi(a)};function Qp(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");Kp.call(this);this.r="progressbar";this.Fg=a;this.ww="";this.Zs=this.tj=null;this.jm=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.jm=[c,d,e];this.S(b);this.sy()}m(Qp,Kp);
Qp.prototype.sy=function(){var a=vi(this.Fg,"position");if("static"==a||""==a)this.ww=this.Fg.style.position,this.Fg.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Rh("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.jm[0])),d=document.createTextNode(String(this.jm[1])),e=document.createTextNode(String(this.jm[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.tj=b;this.n(this.Fg);a=this.a();a.style.position=
"absolute";a.style.top=(this.Fg.clientHeight-5)/2+"px";a.style.left=(this.Fg.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};Qp.prototype.wo=function(){var a=this.a().style.top,b=this.a().style.left;S(this.a());var c=new Qp(this.Fg,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");Zh(d).classList.add("progress-bar-thumb-done");this.Zs=c};
Qp.prototype.hr=function(){this.tj&&S(this.tj);this.a()&&S(this.a());this.Zs&&S(this.Zs.a());this.Zs=this.tj=null;this.ww&&(this.Fg.style.position=this.ww)};function Rp(){gd.call(this);this.r="renderer";this.Pa=window.document.body;this.sb=this.Pa.clientWidth;this.ab=this.Pa.clientHeight;this.oc=this.Ea=this.td=null;this.wi=new Ep(de);this.We=[];this.yc=null;this.gt=this.Pp=this.et=!1;this.c=this.Fk=this.vf=null;this.hc={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.jw=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}m(Rp,gd);f=Rp.prototype;
f.jz=function(){window.cancelAnimationFrame(this.jw);this.hc.PROGRESSBAR_ENABLED&&(this.Fk=new Qp(this.Pa,3))};f.kz=function(){this.hc.PROGRESSBAR_ENABLED&&this.Fk&&(this.Fk.wo(),this.Ws=Wf(function(){this.Ws=null;this.Fk&&(this.Fk.hr(),this.Fk=null);this.Pp=this.gt=!0;this.n()}.bind(this),700))};f.lz=function(a){this.Fk&&this.Fk.S(100*a.qm)};f.hn=function(a){this.vf&&this.vf.S(100*a.qm)};f.bQ=function(a){null!=a&&a instanceof be&&a.gb&&this.gj(a.gb)};
f.mQ=function(a){null!=a&&a instanceof ce&&a.gb&&this.remove(a.gb)};f.pz=function(a){if(!(null!=a&&a instanceof Ae))throw Error("Invalid hover event.");};f.jn=function(){var a=Hh(this.Pa);this.sb=a.clientWidth;this.ab=a.clientHeight;a=Hh(this.td);a.width=this.sb;a.height=this.ab;"renderer3D"==this.r&&(this.c.viewport(0,0,this.sb,this.ab),this.Ea.xw=n.w.My(n.w.Yq(),this.Ea.RB,this.td.width/this.td.height,1,1E4))};
f.fp=function(a){if(!(null!=a&&a instanceof ze))throw Error("Invalid scroll event.");};Rp.prototype.__defineGetter__("config",function(){return this.hc});Rp.prototype.__defineGetter__("interactor",function(){return this.oc});Rp.prototype.__defineGetter__("camera",function(){return this.Ea});Rp.prototype.__defineGetter__("loadingCompleted",function(){return this.Pp});Rp.prototype.__defineGetter__("container",function(){return this.Pa});
Rp.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;ka(b)&&(b=Hh(a));if(!bi(b))throw Error("Could not find the given container.");this.Pa=b});f=Rp.prototype;f.Fr=function(){this.Ea.reset()};function Sp(a){a.hc.PROGRESSBAR_ENABLED&&a.vf&&!a.Ws&&(a.vf.wo(),a.Ws=Wf(function(){this.Ws=null;this.vf&&(this.vf.hr(),this.vf=null);this.n()}.bind(a),700))}
f.Ja=function(a){var b=Rh("canvas");this.Pa.appendChild(b);this.sb=this.Pa.clientWidth;this.ab=this.Pa.clientHeight;b.width=this.sb;b.height=this.ab;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.Pa.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.yc=new Mf;C(this.yc,pe,this.hn.bind(this));this.td=b;this.c=c;b=new wp(this.td);"2d"==a&&(b=new yp(this.td));b.Ja();C(b,le,this.Fr.bind(this));C(b,qe,this.pz.bind(this));C(b,ke,this.fp.bind(this));this.oc=b;b=new Ip(this.sb,this.ab);"2d"==a&&(b=new Hp(this.sb,this.ab));b.observe(this.oc);this.Ea=b;C(window,"resize",this.jn,!1,this)};f.add=function(a){(a instanceof Dp||a instanceof Ln||a instanceof Bp)&&a.ua();this.We.push(a);this.gj(a)};
f.remove=function(a){if(!this.td||!this.c)throw Error("The renderer was not initialized properly.");null!=a&&$c(a);return!1};f.gj=function(a){if(!this.td||!this.c)throw Error("The renderer was not initialized properly.");null!=a&&(ad(a,ne)||C(a,ne,this.bQ.bind(this)),ad(a,oe)||C(a,oe,this.mQ.bind(this)),ad(a,se)||C(a,se,this.jz.bind(this)),ad(a,ue)||C(a,ue,this.lz.bind(this)),ad(a,te)||C(a,te,this.kz.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.wi.Bb,c=b.length,d=0,d=0;d<c;d++)if(b[d].qe==a)return b[d];return null};
f.n=function(){if(!this.td||!this.c)throw Error("The renderer was not initialized properly.");if(null==this.eC){if(this.yc.ao.kx(!1)){if(this.hc.PROGRESSBAR_ENABLED&&!this.vf&&(this.vf=new Qp(this.Pa,3)),this.gt=this.Pp=!1,this.eC=Wf(function(){this.eC=null;this.n()}.bind(this),100),!this.hc.INTERMEDIATE_RENDERING)return}else if(this.Pp||this.gt||(this.gt=!0,eval("this.onShowtime()"),this.Pp=!0),this.vf){Sp(this);return}this.jw=window.requestAnimationFrame(this.n.bind(this));eval("this.onRender()");
this.Ti(!1,!0)}};f.zz=function(){};f.FG=function(){};f.Ti=function(){};f.Kg=function(){window.cancelAnimationFrame(this.jw);this.yc&&(delete this.yc,this.yc=null);this.vf&&(this.vf.hr(),delete this.vf,this.vf=null);this.wi.clear();delete this.wi;this.We.length=0;delete this.We;delete this.yc;this.yc=null;delete this.Ea;this.Ea=null;delete this.oc;this.oc=null;delete this.c;this.c=null;S(this.td);delete this.td;this.td=null};function Tp(){Rp.call(this);this.r="renderer2D";this.Xd=null;this.Ue=-1;this.uf=[];this.WB=this.ct=this.SB=this.at=null;this.fo=this.io=this.nm=this.om=0;this.zc=this.Ac=this.ec=this.cc=this.PB=-1;this.XB=new Float32Array([-255,-255,-255,-255]);this.dC=!0}m(Tp,Rp);Tp.prototype.yz=function(){};Tp.prototype.QQ=function(){};Tp.prototype.fp=function(a){Tp.d.fp.call(this,a);var b=this.We[0];if(b){var c="",c=0==this.Ue?"indexX":1==this.Ue?"indexY":"indexZ";b[c]=a.Oc?b[c]+1:b[c]-1;eval("this.onScroll();")}};
Tp.prototype.RQ=function(a){var b=this.We[0];if(b){var c=b.zc-b.Ac,d=c/2,e=parseInt(c+c/15*-a.Fw,10);a=parseInt(d+d/15*a.sw,10);c==e&&e++;d==a&&a++;b.Ac-=parseInt(d-a,10);b.Ac-=parseInt(c-e,10);b.Ac=Math.max(b.Ac,b.tf);b.zc-=parseInt(d-a,10);b.zc+=parseInt(c-e,10);b.zc=Math.min(b.zc,b.Mc);eval("this.onWindowLevel();")}};Tp.prototype.__defineGetter__("orientation",function(){return this.Xd});
Tp.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.Ue=2):"SAGITTAL"==a?(a="X",this.Ue=0):"CORONAL"==a&&(a="Y",this.Ue=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.Xd=a});Tp.prototype.__defineGetter__("radiological",function(){return this.dC});Tp.prototype.__defineSetter__("radiological",function(a){this.dC=a});f=Tp.prototype;
f.Ja=function(){if(!this.Xd)throw Error("No 2D orientation set.");Tp.d.Ja.call(this,"2d");this.c.fillStyle="rgba(50,50,50,0)";this.c.fillRect(0,0,this.td.width,this.td.height);this.at=Rh("canvas");this.ct=Rh("canvas");C(this.Ea,me,this.RQ.bind(this))};f.jn=function(){Tp.d.jn.call(this);Up(this)};f.Fr=function(){Tp.d.Fr.call(this);Up(this);var a=this.We[0];a&&(a.zc=a.Mc,a.Ac=a.tf)};
f.gj=function(a){Tp.d.gj.call(this,a);var b=!1;this.get(a.qe)&&(b=!0);if(a instanceof F){var c=a.va,d=a.p,e=a.Te;if(null!=d&&null!=d.va&&d.va.Q)this.gj(d);else if(null!=e&&null!=e.va&&e.va.Q)this.yc.load(e,a);else{if(null!=c&&ia(c))if(null!=a.jj){if(a.jj.or!=c.length||b&&!a.Q)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.yc.load(c[b],a);return}else if(null!=c&&c.Q){this.yc.load(a,a);return}c=this.Xd;this.Ue="X"==c?0:"Y"==c?1:2;this.Yd=a.k[this.Ue].k;e=null;e=0==this.Ue?a.indexX:1==this.Ue?a.indexY:
a.indexZ;c=a.k[this.Ue].k[e].VB;d=a.k[this.Ue].k[e].UB;this.io=a.k[this.Ue].k[e].vj;this.fo=a.k[this.Ue].k[e].oj;this.om=c;this.nm=d;e=this.at;e.width=c;e.height=d;var g=this.ct;g.width=c;g.height=d;this.SB=e.getContext("2d");this.WB=g.getContext("2d");b||(this.wi.add(a),Up(this))}}};function Up(a){var b=Math.min(a.sb/(a.om*a.io),a.ab/(a.nm*a.fo));a.Ea.fa[14]=b}f.Uu=function(){};
f.DI=function(a,b){var c=this.We[0],d=this.Ea.fa,e=null,g=this.om,k=this.nm,l=null,q=null;if("Y"==this.Xd)e=this.Yd[parseInt(c.indexY,10)],l=e.vj,q=e.oj,this.uf[0]="red",this.uf[1]="blue";else if("Z"==this.Xd)e=this.Yd[parseInt(c.indexZ,10)],l=e.vj,q=e.oj,this.uf[0]="red",this.uf[1]="green";else{e=this.Yd[parseInt(c.indexX,10)];l=e.oj;q=e.vj;this.uf[0]="green";this.uf[1]="blue";var p=g,g=k,k=p}var s=1*d[12],r=-1*d[13],p=Math.max(d[14],.6),d=[this.sb/2,this.ab/2],l=g*l*p,q=k*q*p,u=d[0]-l/2,d=d[1]-
q/2,u=u+s*p,d=d+r*p;return a>u&&a<u+l&&b>d&&b<d+q?(s=(a-u)/l*g,r=(b-d)/q*k,q=e.HK[4],"X"==this.Xd?(p=g-s,s=r,r=p):"Y"==this.Xd?s=g-s:"Z"==this.Xd&&(s=g-s,r=k-r),s=e.GK+s*e.vj,r=e.wK+r*e.oj,s=Gd(s,r,q,1),g=Hd(),Sd(e.pK,s,g),k=Hd(),Sd(e.qK,s,k),e=Math.round((c.e[0].N[0]*k[0]+c.e[0].N[1]*k[1]+c.e[0].N[2]*k[2]+c.e[0].vw)/c.e[0].ho),e>=c.e[0].ta?e=c.e[0].ta-1:0>e&&(e=0),s=Math.round((c.e[1].N[0]*k[0]+c.e[1].N[1]*k[1]+c.e[1].N[2]*k[2]+c.e[1].vw)/c.e[1].ho),s>=c.e[1].ta?s=c.e[1].ta-1:0>s&&(s=0),r=Math.round((c.e[2].N[0]*
k[0]+c.e[2].N[1]*k[1]+c.e[2].N[2]*k[2]+c.e[2].vw)/c.e[2].ho),r>=c.e[2].ta?r=c.e[2].ta-1:0>r&&(r=0),[[e,s,r],[g[0],g[1],g[2]],[k[0],k[1],k[2]]]):null};
f.Ti=function(a,b){Tp.d.Ti.call(this,a,b);if(0!=this.wi.Bb.length){var c=this.We[0],d=null,d=0==this.Ue?c.indexX:1==this.Ue?c.indexY:c.indexZ,e=this.Yd[parseInt(d,10)].VB,g=this.Yd[parseInt(d,10)].UB;this.io=this.Yd[parseInt(d,10)].vj;this.fo=this.Yd[parseInt(d,10)].oj;this.om=e;this.nm=g;var k=this.sb,l=this.ab,q=this.Ea.fa;this.c.save();this.c.clearRect(-k,-l,2*k,2*l);this.c.restore();var p=Math.max(q[14],.1);this.c.setTransform(p,0,0,p,0,0);var s=1*q[12],q=-1*q[13],r=null;c.p&&(r=c.p.Cw);var u=
this.Yd[parseInt(d,10)],v=u.rb.Gk,u=u.p,D=null;u&&(D=u.Gk);var B=this.om,I=this.nm,G=this.SB,Q=this.WB,M=G.getImageData(0,0,B,I),L=Q.getImageData(0,0,B,I),J=M.data,H=L.data,O=J.length,N=c.Mc,Y=c.cc,K=c.ec,y=c.Ac/N,z=c.zc/N;if(this.PB!=d||this.cc!=Y||this.ec!=K||this.Ac!=y||this.zc!=z||r&&!Fp(r,this.XB,0)){var ga=this.at;ga.width=e;ga.height=g;ga=this.ct;ga.width=e;ga.height=g;e=0;do{var ga=[0,0,0,0],g=[0,0,0,0],Z=v[e]/255*N,E=v[e],E=(E/255-y)/(z-y),E=255*E;Z>=Y&&Z<=K&&(ga=new ud(c.Ck[0],c.Ck[1],c.Ck[2]),
ga=(new ud(c.Ak[0],c.Ak[1],c.Ak[2])).scale(E).add(ga.scale(255-E)),ga=[Math.floor(ga.x),Math.floor(ga.y),Math.floor(ga.z),255],u&&(-255==r[3]?g=[D[e],D[e+1],D[e+2],D[e+3]]:Fp(r,D,e)&&(g=[D[e],D[e+1],D[e+2],D[e+3]])));"X"==this.Xd?(J[e]=ga[0],J[e+1]=ga[1],J[e+2]=ga[2],J[e+3]=ga[3],H[e]=g[0],H[e+1]=g[1],H[e+2]=g[2],H[e+3]=g[3]):"Y"==this.Xd?(E=Math.floor(e/(4*B)),E=E*B*4+(4*(B-1)-(e-E*B*4)),J[E]=ga[0],J[E+1]=ga[1],J[E+2]=ga[2],J[E+3]=ga[3],H[E]=g[0],H[E+1]=g[1],H[E+2]=g[2],H[E+3]=g[3]):(E=O-1-e,J[E-
3]=ga[0],J[E-2]=ga[1],J[E-1]=ga[2],J[E]=ga[3],H[E-3]=g[0],H[E-2]=g[1],H[E-1]=g[2],H[E]=g[3]);e+=4}while(e<O);G.putImageData(M,0,0);Q.putImageData(L,0,0);this.PB=d;this.cc=Y;this.ec=K;this.Ac=y;this.zc=z;u&&(this.XB=r)}this.c.globalAlpha=1;this.c.translate(k/2/p,l/2/p);"X"==this.Xd&&(this.c.rotate(.5*Math.PI),d=s,s=q,q=-d);s=-B*this.io/2+s;q=-I*this.fo/2+q;this.c.drawImage(this.at,s,q,B*this.io,I*this.fo);u&&c.p.Rb&&(this.c.globalAlpha=c.p.Wd,this.c.drawImage(this.ct,s,q,B*this.io,I*this.fo));this.hc.SLICENAVIGATORS&&
this.oc.ft&&this.oc.jt&&!this.oc.vi&&(s=this.oc.Vd,s=this.DI(s[0],s[1]))&&(c.pj=s[0][0],c.qj=s[0][1],c.rj=s[0][2],c.ua(!1),this.onSliceNavigation(),this.c.setTransform(1,0,0,1,0,0),this.c.lineWidth=1,this.c.beginPath(),this.c.moveTo(this.oc.Vd[0],0),this.c.lineTo(this.oc.Vd[0],this.oc.Vd[1]-10),this.c.moveTo(this.oc.Vd[0],this.oc.Vd[1]+10),this.c.lineTo(this.oc.Vd[0],this.ab),this.c.strokeStyle=this.uf[0],this.c.stroke(),this.c.closePath(),this.c.beginPath(),this.c.moveTo(0,this.oc.Vd[1]),this.c.lineTo(this.oc.Vd[0]-
10,this.oc.Vd[1]),this.c.moveTo(this.oc.Vd[0]+10,this.oc.Vd[1]+.5),this.c.lineTo(this.sb,this.oc.Vd[1]),this.c.strokeStyle=this.uf[1],this.c.stroke(),this.c.closePath(),this.c.font="10pt Arial",this.c.textAlign="left",this.c.textBaseline="top",this.c.fillStyle="white",this.c.fillText("RAS: "+s[2][0].toFixed(2)+", "+s[2][1].toFixed(2)+", "+s[2][2].toFixed(2),0,0),B=u=q="undefined","undefined"!=typeof c.ad[s[1][2].toFixed(0)]&&"undefined"!=typeof c.ad[s[1][2].toFixed(0)][s[1][1].toFixed(0)]&&(q=c.ad[s[1][2].toFixed(0)][s[1][1].toFixed(0)][s[1][0].toFixed(0)],
c.Gb&&(u=c.p.ad[s[1][2].toFixed(0)][s[1][1].toFixed(0)][s[1][0].toFixed(0)],c.p.Mp&&(B=c.p.Mp.get(u),"undefined"!=typeof B&&(B=B[0])))),this.c.fillText("Background:  "+q+" ("+s[1][0].toFixed(0)+", "+s[1][1].toFixed(0)+", "+s[1][2].toFixed(0)+")",0,15),c.Gb&&this.c.fillText("Labelmap:  "+B+" ("+u+")",0,30))}};h("X.renderer2D",Tp);h("X.renderer2D.prototype.init",Tp.prototype.Ja);h("X.renderer2D.prototype.add",Tp.prototype.add);h("X.renderer2D.prototype.onShowtime",Tp.prototype.zz);
h("X.renderer2D.prototype.onRender",Tp.prototype.FG);h("X.renderer2D.prototype.onScroll",Tp.prototype.yz);h("X.renderer2D.prototype.onWindowLevel",Tp.prototype.QQ);h("X.renderer2D.prototype.get",Tp.prototype.get);h("X.renderer2D.prototype.resetViewAndRender",Tp.prototype.Fr);h("X.renderer2D.prototype.xy2ijk",Tp.prototype.DI);h("X.renderer2D.prototype.render",Tp.prototype.n);h("X.renderer2D.prototype.destroy",Tp.prototype.Kg);h("X.renderer2D.prototype.onSliceNavigation",Tp.prototype.Uu);function Vp(){ed.call(this)}m(Vp,ed);h("xiv.vis.RenderEngine",Vp);Vp.prototype.ID_PREFIX="xiv.vis.RenderEngine";var Wp="isSelectedVolume"+t();h("xiv.vis.RenderEngine.EventType",{gU:"z",eU:"A",fU:"B"});h("xiv.vis.RenderEngine.SELECTED_VOL_KEY",Wp);h("xiv.vis.RenderEngine.prototype.ID_PREFIX",Vp.prototype.ID_PREFIX);P.s={};h("gxnat.slicerNode",P.s);
P.s.FE=function(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";
break;case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b};P.s.jk=function(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})};h("gxnat.slicerNode.getDisplayNodeTypes",P.s.FE);h("gxnat.slicerNode.toFloatArray",P.s.jk);P.s.Node=function(){pa(this)};h("gxnat.slicerNode.Node",P.s.Node);P.s.Cp=function(a,b){P.s.Node.call(this);this.backgroundColor=this.constructor.Ju(a);this.XC=this.constructor.Ju(b)};m(P.s.Cp,P.s.Node);h("gxnat.slicerNode.BackgroundColor",P.s.Cp);P.s.Cp.Ju=function(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"};h("gxnat.slicerNode.BackgroundColor.mrmlColorToRgb",P.s.Cp.Ju);function Xp(){ed.call(this);this.Cn=[]}m(Xp,ed);h("xiv.vis.XtkPlane",Xp);f=Xp.prototype;f.Uo=!0;f.Qn=null;f.orientation=null;f.Er=null;f.Wa=null;f.Dj=null;f.fc=function(){return this.Wa};f.Qc=function(){return this.orientation};f.mv=function(a){null!=this.Wa&&(null!=a?(this.yt=a,this.Wa.zj.focus=a.focus,this.Wa.zj.position=a.position,this.Wa.zj.Ev=a.Ev,a instanceof zp&&(this.Wa.zj.view=a.view)):this.Wa.zj.position=this.constructor.lT)};
f.lv=function(a){this.Dj.style.background=null!=a?ka(a)?a:null!=a.XC?"-webkit-linear-gradient(top, "+a.XC+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.HM=function(){return this.Ht};f.FM=function(){return this.Dj};f.rn=function(a){this.Dj=a;null!=this.Wa||this.Ja(a);this.Wa.Dj=a};f.Az=function(a){this.dispatchEvent(a)};
f.Ja=function(a){null!=this.Wa&&($c(this.Wa),this.Wa.Kg(),this.Wa=null);if(null==this.Qn)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Wa=new this.Qn;this.Wa.orientation=this.orientation;this.rn(a||this.Dj||document.body);this.Wa.Ja();C(this.Wa,"A",function(a){this.dispatchEvent({type:"A",value:a.value})}.bind(this));C(this.Wa,"C",this.Az.bind(this))};f.add=function(a){this.Uo&&(!0==a.isSelectedVolume&&(this.Ht=a),this.Cn.push(a),this.Wa.add(a))};f.isEnabled=function(){return this.Uo};
function Yp(a){null!=a.oh&&(S(a.oh),delete a.oh)}function Zp(a){a.oh=Rh("div",{id:"DisabledOverlay_"+t()});a.oh.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=Rh("div",{id:"DisabledOverlay_"+t()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.oh.appendChild(c);a.Dj.appendChild(a.oh)}
f.ld=function(a){(this.Uo=!1!==a)?T.Pm(this.oh,200,function(){this.oh.style.visibility="hidden";Yp(this)}.bind(this)):(null!=this.oh||Zp(this),this.oh.style.visibility="visible",T.Gq(this.oh,200,function(){}.bind(this)))};f.restore=function(){window.console.log("\n\nrestore");this.Ja();$p(this);null!=this.yt&&this.mv(this.yt);null!=this.Hg&&this.lv(this.Hg);this.n()};f.DR=function(){A(this.Cn,function(a){null!=a&&this.Wa.remove(a)}.bind(this))};
function $p(a){A(a.Cn,function(a){window.console.log("adding",a);this.Wa.add(a)}.bind(a))}f.n=function(){this.Uo?this.Wa.n():window.console.log("Plane"+this.orientation+" is switched off.")};f.m=function(){null!=this.Wa&&this.Wa.$h()};
f.i=function(){Xp.d.i.call(this);null!=this.Wa&&(this.Wa.Kg(),delete this.Wa);Yp(this);null!=this.Hg&&delete this.Hg;null!=this.yt&&delete this.yt;null!=this.Er&&(null!=this.Er.i&&(this.Er.stop(),this.Er.i()),delete this.Er);delete this.Uo;delete this.Qn;delete this.Dj;delete this.orientation;delete this.Cn;delete this.Ht;delete this.iX};h("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",[-300,300,300]);h("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");h("xiv.vis.XtkPlane.prototype.XRenderer",Xp.prototype.Qn);
h("xiv.vis.XtkPlane.prototype.orientation",Xp.prototype.orientation);h("xiv.vis.XtkPlane.prototype.Renderer",Xp.prototype.Wa);h("xiv.vis.XtkPlane.prototype.container",Xp.prototype.Dj);h("xiv.vis.XtkPlane.prototype.getRenderer",Xp.prototype.fc);h("xiv.vis.XtkPlane.prototype.getOrientation",Xp.prototype.Qc);h("xiv.vis.XtkPlane.prototype.setCamera",Xp.prototype.mv);h("xiv.vis.XtkPlane.prototype.setBackground",Xp.prototype.lv);h("xiv.vis.XtkPlane.prototype.getCurrentVolume",Xp.prototype.HM);
h("xiv.vis.XtkPlane.prototype.getContainer",Xp.prototype.FM);h("xiv.vis.XtkPlane.prototype.setContainer",Xp.prototype.rn);h("xiv.vis.XtkPlane.prototype.init",Xp.prototype.Ja);h("xiv.vis.XtkPlane.prototype.add",Xp.prototype.add);h("xiv.vis.XtkPlane.prototype.isEnabled",Xp.prototype.isEnabled);h("xiv.vis.XtkPlane.prototype.setEnabled",Xp.prototype.ld);h("xiv.vis.XtkPlane.prototype.restore",Xp.prototype.restore);h("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",Xp.prototype.DR);
h("xiv.vis.XtkPlane.prototype.render",Xp.prototype.n);h("xiv.vis.XtkPlane.prototype.updateStyle",Xp.prototype.m);h("xiv.vis.XtkPlane.prototype.dispose",Xp.prototype.i);function aq(a,b){if(a instanceof aq)this.re=a.xA();else{var c;if(c=ja(a))a:{for(var d=c=0;d<a.length;d++){if(!ja(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!ma(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.re=Qb(a);else if(a instanceof wh)this.re=bq(a.height,a.width);else if(ma(a)&&ma(b)&&0<a&&0<b)this.re=bq(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.Ge=new wh(this.re[0].length,this.re.length)}
function cq(a,b,c){for(var d=0;d<a.jl().height;d++)for(var e=0;e<a.jl().width;e++)b.call(c,a.re[d][e],d,e,a)}function dq(a,b){var c=new aq(a.jl());cq(a,function(d,e,g){c.re[e][g]=b.call(void 0,d,e,g,a)});return c}function bq(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=aq.prototype;f.add=function(a){if(!xh(this.Ge,a.jl()))throw Error("Matrix summation is only supported on arrays of equal size");return dq(this,function(b,c,d){return b+a.re[c][d]})};
f.Ao=function(a,b){if(this.Ge.width!=a.Ge.width||this.Ge.height!=a.Ge.height)return!1;for(var c=b||0,d=0;d<this.Ge.height;d++)for(var e=0;e<this.Ge.width;e++)if(!(Math.abs(this.re[d][e]-a.re[d][e])<=(c||1E-6)))return!1;return!0};f.jl=function(){return this.Ge};
f.multiply=function(a){if(a instanceof aq){if(this.Ge.width!=a.jl().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return eq(this,a)}if(ma(a))return fq(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.zd=function(a){if(!xh(this.Ge,a.jl()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return dq(this,function(b,c,d){return b-a.re[c][d]})};
f.xA=function(){return this.re};f.toString=function(){var a=0;cq(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];A(this.re,function(c){b.push("[ ");A(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function gq(a,b,c){return 0<=b&&b<a.Ge.height&&0<=c&&c<a.Ge.width}
function eq(a,b){var c=new aq(a.Ge.height,b.jl().width);cq(c,function(a,e,g){for(var k=a=0;k<this.Ge.width;k++)a+=(gq(this,e,k)?this.re[e][k]:0)*(gq(b,k,g)?b.re[k][g]:0);if(!gq(c,e,g))throw Error("Index out of bounds when setting matrix value, ("+e+","+g+") in size ("+c.Ge.height+","+c.Ge.width+")");c.re[e][g]=a},a);return c}function fq(a,b){return dq(a,function(a){return a*b})};function hq(){Tp.call(this)}m(hq,Tp);h("xiv.vis.XtkRenderer2D",hq);f=hq.prototype;f.$h=function(){this.jn()};f.yz=function(){this.Uu()};f.hn=function(a){hq.d.hn.call(this,a);this.dispatchEvent({type:"A",value:a.qm})};f.Ja=function(){this.Dt.PROGRESSBAR_ENABLED=!1;hq.d.Ja.call(this);this.ul.DG=this.VP.bind(this);this.ul.Dt.VT=!1;this.ul.Dt.TT=!1;this.ul.Dt.GT=!1;this.ul.Ja()};f.Qc=function(){return this.Xd};f.AM=function(){return this.Ea};f.pN=function(){return this.ul.Zy};f.YO=function(){};
f.VP=function(){this.dispatchEvent({type:"mouseover",Zy:this.ul.Zy,OH:this.ul.jt})};f.Uu=function(){this.dispatchEvent({type:"D",volume:this.We[0],fW:this.We[0]["index"+this.Xd],eW:this.Xd,OH:this.ul.jt})};f.n=function(){this.td&&this.c?(hq.d.n.call(this),this.dispatchEvent({type:"B"})):this.Ja()};f.BM=function(){return this.td};f.Sq=function(){return this.We[0]};f.XE=function(){if(null!=this.Yd)return this.Yd.length};f.lF=function(){return this.Ea.fa[14]};f.MH=function(a){this.Ea.fa[14]=a};
f.xp=function(){this.Ea.fa[14]+=.03};f.yp=function(){this.Ea.fa[14]+=-.03};
function iq(a,b,c,d){var e=a.We[0],g=a.Ea.fa,k=null,l=a.om,q=a.nm,p=null,s=null;if(null!=e){"Y"==a.Xd?(k=a.Yd[parseInt(e.indexY,10)],p=k.vj,s=k.oj,a.uf[0]="red",a.uf[1]="blue"):"Z"==a.Xd?(k=a.Yd[parseInt(e.indexZ,10)],p=k.vj,s=k.oj,a.uf[0]="red",a.uf[1]="green"):(k=a.Yd[parseInt(e.indexX,10)],p=k.oj,s=k.vj,a.uf[0]="green",a.uf[1]="blue",e=l,l=q,q=e);var e=1*g[12],k=-1*g[13],g=Math.max(g[14],.6),r=[a.sb/2,a.ab/2],p=l*p*g,s=q*s*g,u=r[0]-p/2,r=r[1]-s/2,u=u+e*g,r=r+k*g;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?u+(a.om-b)/l*p:u+b/l*p;b=Math.max(0,b);b=Math.min(b,q);return d?r+(a.nm-b)/q*s:r+b/q*s}}f.gF=function(a,b){return iq(this,a,"vertical",b)};f.NE=function(a,b){return iq(this,a,"horizontal",b)};f.Kg=function(){hq.d.Kg.call(this)};h("xiv.vis.XtkRenderer2D.prototype.onResize",hq.prototype.$h);h("xiv.vis.XtkRenderer2D.prototype.onScroll",hq.prototype.yz);h("xiv.vis.XtkRenderer2D.prototype.onProgress",hq.prototype.hn);h("xiv.vis.XtkRenderer2D.prototype.init",hq.prototype.Ja);
h("xiv.vis.XtkRenderer2D.prototype.getOrientation",hq.prototype.Qc);h("xiv.vis.XtkRenderer2D.prototype.getCamera",hq.prototype.AM);h("xiv.vis.XtkRenderer2D.prototype.getMousePosition",hq.prototype.pN);h("xiv.vis.XtkRenderer2D.prototype.isMouseOver",hq.prototype.YO);h("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",hq.prototype.Uu);h("xiv.vis.XtkRenderer2D.prototype.render",hq.prototype.n);h("xiv.vis.XtkRenderer2D.prototype.getCanvas",hq.prototype.BM);
h("xiv.vis.XtkRenderer2D.prototype.getVolume",hq.prototype.Sq);h("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",hq.prototype.XE);h("xiv.vis.XtkRenderer2D.prototype.getZoom",hq.prototype.lF);h("xiv.vis.XtkRenderer2D.prototype.setZoom",hq.prototype.MH);h("xiv.vis.XtkRenderer2D.prototype.zoomIn",hq.prototype.xp);h("xiv.vis.XtkRenderer2D.prototype.zoomOut",hq.prototype.yp);h("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",hq.prototype.gF);
h("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",hq.prototype.NE);h("xiv.vis.XtkRenderer2D.prototype.destroy",hq.prototype.Kg);function jq(a){Xp.call(this);this.orientation=a;this.Qn=hq;this.Ht=null}m(jq,Xp);h("xiv.vis.XtkPlane2D",jq);f=jq.prototype;f.aF=function(){return this.Wa.aF()};f.bF=function(){return this.Wa.bF()};f.Sq=function(){return null!=this.Wa?this.Wa.Sq():null};f.rn=function(a){jq.d.rn.call(this,a)};f.i=function(){jq.d.i.call(this);delete this.Ht;delete this.QW;delete this.RW};h("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",jq.prototype.aF);
h("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",jq.prototype.bF);h("xiv.vis.XtkPlane2D.prototype.getVolume",jq.prototype.Sq);h("xiv.vis.XtkPlane2D.prototype.setContainer",jq.prototype.rn);h("xiv.vis.XtkPlane2D.prototype.dispose",jq.prototype.i);P.s.Hn=function(a,b){P.s.Node.call(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;A(P.s.FE(b),function(b){A(a.getElementsByTagName(b),function(a){d.push(a)})});for(var g=0,k=d.length;g<k;g++)if(-1<c.indexOf(d[g].getAttribute("id"))){e=d[g];break}this.Aq=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=P.s.jk(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=P.s.jk(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")};
m(P.s.Hn,P.s.Node);h("gxnat.slicerNode.Display",P.s.Hn);P.s.Gs=function(a,b){P.s.Hn.call(this,a,b)};m(P.s.Gs,P.s.Hn);h("gxnat.slicerNode.Mesh",P.s.Gs);P.s.vk=function(a,b,c){P.s.Hn.call(this,a,b);for(var d=0,e,g,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=dq(new aq(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:g=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.$r=new P.s.vk.$r(k,l,g);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,g=a.length;d<g&&!(c="true"===a[d].getAttribute("sliceVisibility")||
!1);d++);this.RF=b;this.yn=this.Aq?parseInt(this.Aq.getAttribute("upperThreshold")):null;this.Yo=this.Aq?parseInt(this.Aq.getAttribute("lowerThreshold")):null;this.visible=c};m(P.s.vk,P.s.Hn);h("gxnat.slicerNode.Volume",P.s.vk);P.s.vk.$r=function(a,b,c){var d=new aq([[0],[0],[0],[1]]);A([a,b,c],function(a,b){var c=a.multiply(d).xA(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.MR=c;break;case 1:this.uL=c;break;case 2:this.cL=c}}.bind(this))};h("gxnat.slicerNode.Volume.sliceToRAS",P.s.vk.$r);P.s.Ms=function(a,b,c,d,e,g,k,l){P.s.Node.call(this);this.element=a;this.zj=b;this.backgroundColor=c;this.VF=d;this.kq=e;this.mk=g;this.Ry=k;this.Kx=l};m(P.s.Ms,P.s.Node);h("gxnat.slicerNode.SceneView",P.s.Ms);P.l={};P.l.em=function(a){Bc.call(this);a instanceof P.s.Ms?(this.kq=a.kq,this.zj=a.zj,this.backgroundColor=a.backgroundColor,this.VF=a.VF):a instanceof P.s.vk?(this.origin=a.origin||[0,0,0],this.yn=a.yn||1E4,this.Yo=a.Yo||-1E4,this.yI=a.yI||!1,this.RF=a.RF||!1,this.$r=a.$r||null):a instanceof P.s.Gs&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)};m(P.l.em,Bc);h("gxnat.vis.RenderProperties",P.l.em);P.l.em.prototype.i=function(){P.l.em.d.i.call(this);ub(this)};
h("gxnat.vis.RenderProperties.prototype.dispose",P.l.em.prototype.i);var kq={};
function lq(){return function b(c,d,e){function g(l,p){if(!d[l]){if(!c[l]){var s="function"==typeof require&&require;if(!p&&s)return s(l,!0);if(k)return k(l,!0);throw Error("Cannot find module '"+l+"'");}s=d[l]={qc:{}};c[l][0].call(s.qc,function(b){var d=c[l][1][b];return g(d?d:b)},s,s.qc,b,c,d,e)}return d[l].qc}for(var k="function"==typeof require&&require,l=0;l<e.length;l++)g(e[l]);return g}({1:[function(b,c,d){d.Gx=function(b){for(var c="",d,l,q,p,s,r,u=0;u<b.length;)d=b.charCodeAt(u++),l=b.charCodeAt(u++),
q=b.charCodeAt(u++),p=d>>2,d=(d&3)<<4|l>>4,s=(l&15)<<2|q>>6,r=q&63,isNaN(l)?s=r=64:isNaN(q)&&(r=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r);return c};d.ux=function(b){var c="",d,l,q,p,s,r=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,
"");r<b.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(r++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(r++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(r++)),d=d<<2|l>>4,l=(l&15)<<4|p>>2,q=(p&3)<<6|s,c+=String.fromCharCode(d),64!=p&&(c+=String.fromCharCode(l)),64!=s&&(c+=
String.fromCharCode(q));return c}},{}],2:[function(b,c){function d(){this.crc32=this.lh=this.Lh=0;this.qo=this.Rk=null}d.prototype={Df:function(){return null},Tx:function(){return null}};c.qc=d},{}],3:[function(b,c,d){d.CU={Zo:"\x00\x00",hx:function(b){return b},pI:function(b){return b},ix:null,qI:null};d.mT=b("./flate")},{"./flate":6}],4:[function(b,c){function d(){this.data=null;this.index=this.length=0}var e=b("./utils");d.prototype={cx:function(b){this.iD(this.index+b)},iD:function(b){if(this.length<
b||0>b)throw Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?");},Gl:function(b){this.iD(b);this.index=b},SH:function(b){this.Gl(this.index+b)},Xw:function(){},sa:function(b){var c=0,d;this.cx(b);for(d=this.index+b-1;d>=this.index;d--)c=(c<<8)+this.Xw(d);this.index+=b;return c},dh:function(b){return e.nd("string",this.dv(b))},dv:function(){},wu:function(){},rR:function(){var b=this.sa(4);return new Date((b>>25&127)+1980,(b>>21&15)-1,b>>16&31,b>>11&31,
b>>5&63,(b&31)<<1)}};c.qc=d},{"./utils":14}],5:[function(b,c,d){d.Gh=!1;d.xi=!1;d.dir=!1;d.Oh=null;d.ro=null},{}],6:[function(b,c,d){c="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;var e=b("pako");d.qI=c?"uint8array":"array";d.ix=c?"uint8array":"array";d.Zo="\b\x00";d.hx=function(b){return e.IL(b)};d.pI=function(b){return e.LO(b)}},{pako:19}],7:[function(b,c){function d(b,c){if(!(this instanceof d))return new d(b,c);this.files={};this.root="";
b&&this.load(b,c);this.clone=function(){var b=new d,c;for(c in this)"function"!==typeof this[c]&&(b[c]=this[c]);return b}}d.prototype.files=void 0;d.prototype.remove=void 0;d.prototype=b("./object");d.prototype.load=b("./load");d.uX=b("./support");d.pW=b("./defaults");d.zX=b("./utils");d.Gh=b("./base64");d.kW=b("./compressions");c.qc=d},{"./base64":1,"./compressions":3,"./defaults":5,"./load":8,"./object":9,"./support":12,"./utils":14}],8:[function(b,c){var d=b("./base64"),e=b("./zipEntries");c.qc=
function(b,c){var l,q,p;c=c||{};c.Gh&&(b=d.ux(b));l=(new e(b,c)).files;for(q=0;q<l.length;q++)p=l[q],this.file(p.fileName,p.Ci,{xi:!0,IG:!0,Oh:p.Oh,dir:p.dir});return this}},{"./base64":1,"./zipEntries":15}],9:[function(b,c){function d(b){this.data=new Uint8Array(b);this.index=0}function e(){this.data=[]}function g(b){"/"!=b.slice(-1)&&(b+="/");this.files[b]||k.call(this,b,null,{dir:!0});return this.files[b]}function k(b,c,d){var e,k=b;"/"==k.slice(-1)&&(k=k.substring(0,k.length-1));e=k.lastIndexOf("/");
e=0<e?k.substring(0,e):"";k=v.kl(c);e&&g.call(this,e);d=d||{};!0!==d.Gh||null!==d.xi&&void 0!==d.xi||(d.xi=!0);d=l(d,B);d.Oh=d.Oh||new Date;null!==d.ro&&(d.ro=d.ro.toUpperCase());if(d.dir||null===c||"undefined"===typeof c)d.Gh=!1,d.xi=!1,c=null;else if("string"===k)d.xi&&!d.Gh&&!0!==d.IG&&(c=v.aI(c));else{d.Gh=!1;d.xi=!0;if(!(k||c instanceof Q))throw Error("The data of '"+b+"' is in an unsupported format !");"arraybuffer"===k&&(c=v.nd("uint8array",c))}c=new p(b,c,d);return this.files[b]=c}function l(){var b=
{},c,d;for(c=0;c<arguments.length;c++)for(d in arguments[c])arguments[c].hasOwnProperty(d)&&"undefined"===typeof b[d]&&(b[d]=arguments[c][d]);return b}function q(b,c){var d="",e;for(e=0;e<c;e++)d+=String.fromCharCode(b&255),b>>>=8;return d}function p(b,c,d){this.name=b;this.ma=c;this.options=d}function s(b){var c=r(b);if("string"===v.kl(c)){if(!b.options.xi){if(L)return L.Gx(c);if(u.Lu)return M(c,"utf-8")}return b.YK()}return c}function r(b){if(b.ma instanceof Q&&(b.ma=b.ma.Df(),b.options.xi=!0,b.options.Gh=
!1,"uint8array"===v.kl(b.ma))){var c=b.ma;b.ma=new Uint8Array(c.length);0!==c.length&&b.ma.set(c,0)}return b.ma}var u=b("./support"),v=b("./utils"),D=b("./signature"),B=b("./defaults"),I=b("./base64"),G=b("./compressions"),Q=b("./compressedObject"),M=b("./nodeBuffer"),L,J;u.DA&&"function"===typeof TextEncoder&&"function"===typeof TextDecoder&&(L=new TextEncoder("utf-8"),J=new TextDecoder("utf-8"));p.prototype={YK:function(){var b;b=r(this);null===b||"undefined"===typeof b?b="":(this.options.Gh&&(b=
I.ux(b)),b=v.nd("string",b),this.options.xi||(b=H.vI(b)));return b},$K:function(){var b=s(this);return v.nd("uint8array",b)},XK:function(){return this.$K().buffer}};e.prototype={append:function(b){b=v.nd("string",b);this.data.push(b)},lE:function(){return this.data.join("")}};d.prototype={append:function(b){0!==b.length&&(b=v.nd("uint8array",b),this.data.set(b,this.index),this.index+=b.length)},lE:function(){return this.data}};var H={load:function(){throw Error("Load method is not defined. Is the file jszip-load.js included ?");
},filter:function(b){var c=[],d,e,g;for(d in this.files)this.files.hasOwnProperty(d)&&(e=this.files[d],g=new p(e.name,e.ma,l(e.options)),e=d.slice(this.root.length,d.length),d.slice(0,this.root.length)===this.root&&b(e,g)&&c.push(g));return c},file:function(b,c,d){if(1===arguments.length){if(v.QF(b)){var e=b;return this.filter(function(b,c){return!c.options.dir&&e.test(b)})}return this.filter(function(c,d){return!d.options.dir&&c===b})[0]||null}b=this.root+b;k.call(this,b,c,d);return this},BW:function(b){if(!b)return this;
if(v.QF(b))return this.filter(function(c,d){return d.options.dir&&b.test(c)});var c=g.call(this,this.root+b),d=this.clone();d.root=c.name;return d},remove:function(b){b=this.root+b;var c=this.files[b];c||("/"!=b.slice(-1)&&(b+="/"),c=this.files[b]);if(c)if(c.options.dir)for(var c=this.filter(function(c,d){return d.name.slice(0,b.length)===b}),d=0;d<c.length;d++)delete this.files[c[d].name];else delete this.files[b];return this},EW:function(b){b=l(b||{},{Gh:!0,ro:"STORE",type:"base64"});v.dx(b.type);
var c=[],g=0,k=0,y;for(y in this.files)if(this.files.hasOwnProperty(y)){var p=this.files[y],r=p.options.ro||b.ro.toUpperCase(),L=G[r];if(!L)throw Error(r+" is not a valid compression method !");var r=p,u=new Q,B=void 0;if(r.ma instanceof Q)u.lh=r.ma.lh,u.crc32=r.ma.crc32,0===u.lh||r.options.dir?(L=G.STORE,u.qo="",u.crc32=0):r.ma.Rk===L.Zo?u.qo=r.ma.Tx():(B=r.ma.Df(),u.qo=L.hx(v.nd(L.ix,B)));else{B=s(r);if(!B||0===B.length||r.options.dir)L=G.STORE,B="";u.lh=B.length;u.crc32=this.crc32(B);u.qo=L.hx(v.nd(L.ix,
B))}u.Lh=u.qo.length;u.Rk=L.Zo;var L=r=u,u=g,B=this.vI(p.name),M=B!==p.name,J=p.options,H=void 0,ua=void 0,sb="",zb="",H=J.Oh.getHours(),H=H<<6,H=H|J.Oh.getMinutes(),H=H<<5,H=H|J.Oh.getSeconds()/2,ua=J.Oh.getFullYear()-1980,ua=ua<<4,ua=ua|J.Oh.getMonth()+1,ua=ua<<5,ua=ua|J.Oh.getDate();M&&(zb=q(1,1)+q(this.crc32(B),4)+B,sb+="up"+q(zb.length,2)+zb);J="";J+="\n\x00";J+=M?"\x00\b":"\x00\x00";J+=L.Rk;J+=q(H,2);J+=q(ua,2);J+=q(L.crc32,4);J+=q(L.Lh,4);J+=q(L.lh,4);J+=q(B.length,2);J+=q(sb.length,2);p={iE:D.oB+
J+B+sb,RD:D.UA+"\u0014\x00"+J+"\x00\x00\x00\x00\x00\x00"+(!0===p.options.dir?"\u0010\x00\x00\x00":"\x00\x00\x00\x00")+q(u,4)+B+sb,rL:L};g+=p.iE.length+r.Lh;k+=p.RD.length;c.push(p)}y="";y=D.Mv+"\x00\x00\x00\x00"+q(c.length,2)+q(c.length,2)+q(k,4)+q(g,4)+"\x00\x00";r=b.type.toLowerCase();g="uint8array"===r||"arraybuffer"===r||"blob"===r||"nodebuffer"===r?new d(g+k+y.length):new e;for(k=0;k<c.length;k++)g.append(c[k].iE),g.append(c[k].rL.qo);for(k=0;k<c.length;k++)g.append(c[k].RD);g.append(y);c=g.lE();
switch(b.type.toLowerCase()){case "uint8array":case "arraybuffer":case "nodebuffer":return v.nd(b.type.toLowerCase(),c);case "blob":return v.UC(v.nd("arraybuffer",c));case "base64":return b.Gh?I.Gx(c):c;default:return c}},crc32:function(b,c){if("undefined"===typeof b||!b.length)return 0;var d="string"!==v.kl(b),e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,
4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,
31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,
1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,
1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,
2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,
3272380065,1510334235,755167117];"undefined"==typeof c&&(c=0);var g=0,g=g=0;c^=-1;for(var k=0,l=b.length;k<l;k++)g=d?b[k]:b.charCodeAt(k),g=(c^g)&255,g=e[g],c=c>>>8^g;return c^-1},vI:function(b){if(L)return v.nd("string",L.Gx(b));if(u.Lu)return v.nd("string",M(b,"utf-8"));for(var c=[],d=0,e=0;e<b.length;e++){var g=b.charCodeAt(e);128>g?c[d++]=String.fromCharCode(g):(127<g&&2048>g?c[d++]=String.fromCharCode(g>>6|192):(c[d++]=String.fromCharCode(g>>12|224),c[d++]=String.fromCharCode(g>>6&63|128)),c[d++]=
String.fromCharCode(g&63|128))}return c.join("")},KA:function(b){var c=[],d=0,e="string"!==v.kl(b),g=0,k=0,l=0,q=0;if(J)return J.ux(v.nd("uint8array",b));if(u.Lu)return v.nd("nodebuffer",b).toString("utf-8");for(;g<b.length;)k=e?b[g]:b.charCodeAt(g),128>k?(c[d++]=String.fromCharCode(k),g++):191<k&&224>k?(l=e?b[g+1]:b.charCodeAt(g+1),c[d++]=String.fromCharCode((k&31)<<6|l&63),g+=2):(l=e?b[g+1]:b.charCodeAt(g+1),q=e?b[g+2]:b.charCodeAt(g+2),c[d++]=String.fromCharCode((k&15)<<12|(l&63)<<6|q&63),g+=3);
return c.join("")}};c.qc=H},{"./base64":1,"./compressedObject":2,"./compressions":3,"./defaults":5,"./nodeBuffer":17,"./signature":10,"./support":12,"./utils":14}],10:[function(b,c,d){d.oB="PK\u0003\u0004";d.UA="PK\u0001\u0002";d.Mv="PK\u0005\u0006";d.JB="PK\u0006\u0007";d.lK="PK\u0006\u0006";d.kT="PK\u0007\b"},{}],11:[function(b,c){function d(b,c){this.data=b;c||(this.data=g.aI(this.data));this.length=this.data.length;this.index=0}var e=b("./dataReader"),g=b("./utils");d.prototype=new e;d.prototype.Xw=
function(b){return this.data.charCodeAt(b)};d.prototype.wu=function(b){return this.data.lastIndexOf(b)};d.prototype.dv=function(b){this.cx(b);var c=this.data.slice(this.index,this.index+b);this.index+=b;return c};c.qc=d},{"./dataReader":4,"./utils":14}],12:[function(b,c,d){b=b("__browserify_process");"use strict";d.Gh=!0;d.ZV=!0;d.qX=!0;d.WK="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array;d.Lu=!b.iL;d.DA="undefined"!==typeof Uint8Array;if("undefined"===typeof ArrayBuffer)d.Rw=!1;
else{b=new ArrayBuffer(0);try{d.Rw=0===(new Blob([b],{type:"application/zip"})).size}catch(e){try{var g=new (window.BlobBuilder||window.WebKitBlobBuilder||window.AJ||window.zJ);g.append(b);d.Rw=0===g.getBlob("application/zip").size}catch(k){d.Rw=!1}}}},{__browserify_process:18}],13:[function(b,c){function d(b){b&&(this.data=b,this.length=this.data.length,this.index=0)}var e=b("./dataReader");d.prototype=new e;d.prototype.Xw=function(b){return this.data[b]};d.prototype.wu=function(b){var c=b.charCodeAt(0),
d=b.charCodeAt(1),e=b.charCodeAt(2);b=b.charCodeAt(3);for(var p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===d&&this.data[p+2]===e&&this.data[p+3]===b)return p;return-1};d.prototype.dv=function(b){this.cx(b);var c=this.data.subarray(this.index,this.index+b);this.index+=b;return c};c.qc=d},{"./dataReader":4}],14:[function(b,c,d){function e(b){return b}function g(b,c){for(var d=0;d<b.length;++d)c[d]=b.charCodeAt(d)&255;return c}function k(b){var c=65536,e=[],g=b.length,k=d.kl(b),l=0,
q=!0;try{switch(k){case "uint8array":new Uint8Array(0);break;case "nodebuffer":s(0)}}catch(p){q=!1}if(!q){c="";for(e=0;e<b.length;e++)c+=String.fromCharCode(b[e]);return c}for(;l<g&&1<c;)try{"array"===k||"nodebuffer"===k?e.push(String.fromCharCode.apply(null,b.slice(l,Math.min(l+c,g)))):e.push(String.fromCharCode.apply(null,b.subarray(l,Math.min(l+c,g)))),l+=c}catch(r){c=Math.floor(c/2)}return e.join("")}function l(b,c){for(var d=0;d<b.length;d++)c[d]=b[d];return c}var q=b("./support"),p=b("./compressions"),
s=b("./nodeBuffer");d.aI=function(b){for(var c="",d=0;d<b.length;d++)c+=String.fromCharCode(b.charCodeAt(d)&255);return c};d.sX=function(b){return d.nd("uint8array",b)};d.wX=function(b){return d.nd("string",b)};d.rX=function(b){b=d.nd("arraybuffer",b);return d.UC(b)};d.UC=function(b){d.dx("blob");try{return new Blob([b],{type:"application/zip"})}catch(c){try{var e=new (window.BlobBuilder||window.WebKitBlobBuilder||window.AJ||window.zJ);e.append(b);return e.getBlob("application/zip")}catch(g){throw Error("Bug : can't construct the Blob.");
}}};var r={};r.string={string:e,array:function(b){return g(b,Array(b.length))},arraybuffer:function(b){return r.string.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:function(b){return g(b,s(b.length))}};r.array={string:k,array:e,arraybuffer:function(b){return(new Uint8Array(b)).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s(b)}};r.arraybuffer={string:function(b){return k(new Uint8Array(b))},array:function(b){return l(new Uint8Array(b),
Array(b.byteLength))},arraybuffer:e,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s(new Uint8Array(b))}};r.uint8array={string:k,array:function(b){return l(b,Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:e,nodebuffer:function(b){return s(b)}};r.nodebuffer={string:k,array:function(b){return l(b,Array(b.length))},arraybuffer:function(b){return r.nodebuffer.uint8array(b).buffer},uint8array:function(b){return l(b,new Uint8Array(b.length))},nodebuffer:e};
d.nd=function(b,c){c||(c="");if(!b)return c;d.dx(b);var e=d.kl(c);return r[e][b](c)};d.kl=function(b){if("string"===typeof b)return"string";if("[object Array]"===Object.prototype.toString.call(b))return"array";if(q.Lu&&s.test(b))return"nodebuffer";if(q.DA&&b instanceof Uint8Array)return"uint8array";if(q.WK&&b instanceof ArrayBuffer)return"arraybuffer"};d.dx=function(b){if(!q[b.toLowerCase()])throw Error(b+" is not supported by this browser");};d.Es=65535;d.Kn=-1;d.Oz=function(b){var c="",d,e;for(e=
0;e<(b||"").length;e++)d=b.charCodeAt(e),c+="\\x"+(16>d?"0":"")+d.toString(16).toUpperCase();return c};d.nM=function(b){for(var c in p)if(p.hasOwnProperty(c)&&p[c].Zo===b)return p[c];return null};d.QF=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)}},{"./compressions":3,"./nodeBuffer":17,"./support":12}],15:[function(b,c){function d(b,c){this.files=[];this.Bu=c;b&&this.load(b)}var e=b("./stringReader"),g=b("./nodeBufferReader"),k=b("./uint8ArrayReader"),l=b("./utils"),q=b("./signature"),
p=b("./zipEntry"),s=b("./support");d.prototype={zt:function(b){var c=this.Ka.dh(4);if(c!==b)throw Error("Corrupted zip or bug : unexpected signature ("+l.Oz(c)+", expected "+l.Oz(b)+")");},lR:function(){this.UD=this.Ka.sa(2);this.WD=this.Ka.sa(2);this.gD=this.Ka.sa(2);this.fD=this.Ka.sa(2);this.hD=this.Ka.sa(4);this.$w=this.Ka.sa(4);this.TS=this.Ka.sa(2);this.Ka.dh(this.TS)},mR:function(){this.RS=this.Ka.sa(8);this.Ka.dh(2);this.Ka.sa(2);this.UD=this.Ka.sa(4);this.WD=this.Ka.sa(4);this.gD=this.Ka.sa(8);
this.fD=this.Ka.sa(8);this.hD=this.Ka.sa(8);this.$w=this.Ka.sa(8);this.SS={};for(var b=this.RS-44,c,d,e;0<b;)c=this.Ka.sa(2),d=this.Ka.sa(4),e=this.Ka.dh(d),this.SS[c]={id:c,length:d,value:e}},nR:function(){this.Ka.sa(4);this.xR=this.Ka.sa(8);this.OL=this.Ka.sa(4);if(1<this.OL)throw Error("Multi-volumes zip are not supported");},uR:function(){var b,c;for(b=0;b<this.files.length;b++)c=this.files[b],this.Ka.Gl(c.Ky),this.zt(q.oB),c.vR(this.Ka),c.yO()},pR:function(){var b;for(this.Ka.Gl(this.$w);this.Ka.dh(4)===
q.UA;)b=new p({FI:this.FI},this.Bu),b.qR(this.Ka),this.files.push(b)},sR:function(){var b=this.Ka.wu(q.Mv);if(-1===b)throw Error("Corrupted zip : can't find end of central directory");this.Ka.Gl(b);this.zt(q.Mv);this.lR();if(this.UD===l.Es||this.WD===l.Es||this.gD===l.Es||this.fD===l.Es||this.hD===l.Kn||this.$w===l.Kn){this.FI=!0;b=this.Ka.wu(q.JB);if(-1===b)throw Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.Ka.Gl(b);this.zt(q.JB);this.nR();this.Ka.Gl(this.xR);
this.zt(q.lK);this.mR()}},jR:function(b){var c=l.kl(b);this.Ka="string"!==c||s.DA?"nodebuffer"===c?new g(b):new k(l.nd("uint8array",b)):new e(b,this.Bu.IG)},load:function(b){this.jR(b);this.sR();this.pR();this.uR()}};c.qc=d},{"./nodeBufferReader":17,"./signature":10,"./stringReader":11,"./support":12,"./uint8ArrayReader":13,"./utils":14,"./zipEntry":16}],16:[function(b,c){function d(b,c){this.options=b;this.Bu=c}var e=b("./stringReader"),g=b("./utils"),k=b("./compressedObject"),l=b("./object");d.prototype=
{XO:function(){return 1===(this.$C&1)},GS:function(){return 2048===(this.$C&2048)},hR:function(b,c,d){return function(){var e=b.index;b.Gl(c);var g=b.dv(d);b.Gl(e);return g}},iR:function(b,c,d,e,k){return function(){var b=g.nd(e.qI,this.Tx()),b=e.pI(b);if(b.length!==k)throw Error("Bug : uncompressed data size mismatch");return b}},vR:function(b){var c;b.SH(22);this.Lx=b.sa(2);c=b.sa(2);this.fileName=b.dh(this.Lx);b.SH(c);if(-1==this.Lh||-1==this.lh)throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");
c=g.nM(this.Rk);if(null===c)throw Error("Corrupted zip : compression "+g.Oz(this.Rk)+" unknown (inner file : "+this.fileName+")");this.Ci=new k;this.Ci.Lh=this.Lh;this.Ci.lh=this.lh;this.Ci.crc32=this.crc32;this.Ci.Rk=this.Rk;this.Ci.Tx=this.hR(b,b.index,this.Lh,c);this.Ci.Df=this.iR(b,b.index,this.Lh,c,this.lh);if(this.Bu.hW&&(this.Ci=g.nd("string",this.Ci.Df()),l.crc32(this.Ci)!==this.crc32))throw Error("Corrupted zip : CRC32 mismatch");},qR:function(b){b.dh(2);b.sa(2);this.$C=b.sa(2);this.Rk=b.dh(2);
this.Oh=b.rR();this.crc32=b.sa(4);this.Lh=b.sa(4);this.lh=b.sa(4);this.Lx=b.sa(2);this.gM=b.sa(2);this.lM=b.sa(2);this.VD=b.sa(2);b.sa(2);this.fM=b.sa(4);this.Ky=b.sa(4);if(this.XO())throw Error("Encrypted zip are not supported");this.fileName=b.dh(this.Lx);this.tR(b);this.bR(b);this.hE=b.dh(this.lM);this.dir=this.fM&16?!0:!1},bR:function(){if(this.Fq[1]){var b=new e(this.Fq[1].value);this.lh===g.Kn&&(this.lh=b.sa(8));this.Lh===g.Kn&&(this.Lh=b.sa(8));this.Ky===g.Kn&&(this.Ky=b.sa(8));this.VD===g.Kn&&
(this.VD=b.sa(4))}},tR:function(b){var c=b.index,d,e,g;for(this.Fq=this.Fq||{};b.index<c+this.gM;)d=b.sa(2),e=b.sa(2),g=b.dh(e),this.Fq[d]={id:d,length:e,value:g}},yO:function(){if(this.GS())this.fileName=l.KA(this.fileName),this.hE=l.KA(this.hE);else{var b=this.oM();null!==b&&(this.fileName=b)}},oM:function(){var b=this.Fq[28789];if(b){var c=new e(b.value);return 1!==c.sa(1)||l.crc32(this.fileName)!==c.sa(4)?null:l.KA(c.dh(b.length-5))}return null}};c.qc=d},{"./compressedObject":2,"./object":9,"./stringReader":11,
"./utils":14}],17:[function(){},{}],18:[function(b,c){var d=c.qc={};d.YW=function(){if("undefined"!==typeof window&&window.setImmediate)return function(b){return window.setImmediate(b)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var b=[];window.addEventListener("message",function(c){var d=c.source;d!==window&&null!==d||"process-tick"!==c.data||(c.stopPropagation(),0<b.length&&b.shift()())},!0);return function(c){b.push(c);window.postMessage("process-tick","*")}}return function(b){setTimeout(b,
0)}}();d.title="browser";d.iL=!0;d.yW={};d.YV=[];d.cW=function(){throw Error("process.binding is not supported");};d.nW=function(){return"/"};d.gW=function(){throw Error("process.chdir is not supported");}},{}],19:[function(b,c){var d=b("./lib/utils/common").assign,e=b("./lib/deflate"),g=b("./lib/inflate"),k=b("./lib/zlib/constants"),l={};d(l,e,g,k);c.qc=l},{"./lib/deflate":20,"./lib/inflate":21,"./lib/utils/common":22,"./lib/zlib/constants":25}],20:[function(b,c,d){function e(b){b=this.options=l.assign({Ae:-1,
method:8,ex:16384,Vb:15,rP:8,Yi:0,ks:""},b||{});b.Rz&&0<b.Vb?b.Vb=-b.Vb:b.nF&&0<b.Vb&&16>b.Vb&&(b.Vb+=16);this.Dq=0;this.Ga="";this.ended=!1;this.Cj=[];this.za=new s;this.za.na=0;var c=k.HL(this.za,b.Ae,b.method,b.Vb,b.rP,b.Yi);if(0!==c)throw Error(p[c]);b.ny&&k.JL(this.za,b.ny)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.Dq)throw d.Ga;return d.result}var k=b("./zlib/deflate.js"),l=b("./utils/common"),q=b("./utils/strings"),p=b("./zlib/messages"),s=b("./zlib/zstream");e.prototype.push=function(b,
c){var d=this.za,e=this.options.ex,g,p;if(this.ended)return!1;p=c===~~c?c:!0===c?4:0;d.input="string"===typeof b?q.mS(b):b;d.Yg=0;d.ic=d.input.length;do{0===d.na&&(d.jb=new l.pi(e),d.Fc=0,d.na=e);g=k.ND(d,p);if(1!==g&&0!==g)return this.De(g),this.ended=!0,!1;if(0===d.na||0===d.ic&&4===p)"string"===this.options.ks?this.xr(q.jL(l.yv(d.jb,d.Fc))):this.xr(l.yv(d.jb,d.Fc))}while((0<d.ic||0===d.na)&&1!==g);return 4===p?(g=k.GL(this.za),this.De(g),this.ended=!0,0===g):!0};e.prototype.xr=function(b){this.Cj.push(b)};
e.prototype.De=function(b){0===b&&(this.result="string"===this.options.ks?this.Cj.join(""):l.Ox(this.Cj));this.Cj=[];this.Dq=b;this.Ga=this.za.Ga};d.rT=e;d.ND=g;d.IL=function(b){var c;c=c||{};c.Rz=!0;return g(b,c)};d.nF=function(b,c){c=c||{};c.nF=!0;return g(b,c)}},{"./utils/common":22,"./utils/strings":23,"./zlib/deflate.js":27,"./zlib/messages":32,"./zlib/zstream":34}],21:[function(b,c,d){function e(b){var c=this.options=l.assign({ex:16384,Vb:0,ks:""},b||{});c.Rz&&0<=c.Vb&&16>c.Vb&&(c.Vb=-c.Vb,
0===c.Vb&&(c.Vb=-15));!(0<=c.Vb&&16>c.Vb)||b&&b.Vb||(c.Vb+=32);15<c.Vb&&48>c.Vb&&0===(c.Vb&15)&&(c.Vb|=15);this.Dq=0;this.Ga="";this.ended=!1;this.Cj=[];this.za=new r;this.za.na=0;b=k.KO(this.za,c.Vb);if(b!==p.Ts)throw Error(s[b]);this.ny=new u;k.JO(this.za,this.ny)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.Dq)throw d.Ga;return d.result}var k=b("./zlib/inflate.js"),l=b("./utils/common"),q=b("./utils/strings"),p=b("./zlib/constants"),s=b("./zlib/messages"),r=b("./zlib/zstream"),u=b("./zlib/gzheader");
e.prototype.push=function(b,c){var d=this.za,e=this.options.ex,g,s,r,L,u;if(this.ended)return!1;s=c===~~c?c:!0===c?p.Ss:p.NB;d.input="string"===typeof b?q.eL(b):b;d.Yg=0;d.ic=d.input.length;do{0===d.na&&(d.jb=new l.pi(e),d.Fc=0,d.na=e);g=k.IF(d,p.NB);if(g!==p.Us&&g!==p.Ts)return this.De(g),this.ended=!0,!1;d.Fc&&(0===d.na||g===p.Us||0===d.ic&&s===p.Ss)&&("string"===this.options.ks?(r=q.HS(d.jb,d.Fc),L=d.Fc-r,u=q.kL(d.jb,r),d.Fc=L,d.na=e-L,L&&l.Fh(d.jb,d.jb,r,L,0),this.xr(u)):this.xr(l.yv(d.jb,d.Fc)))}while((0<
d.ic||0===d.na)&&g!==p.Us);g===p.Us&&(s=p.Ss);return s===p.Ss?(g=k.IO(this.za),this.De(g),this.ended=!0,g===p.Ts):!0};e.prototype.xr=function(b){this.Cj.push(b)};e.prototype.De=function(b){b===p.Ts&&(this.result="string"===this.options.ks?this.Cj.join(""):l.Ox(this.Cj));this.Cj=[];this.Dq=b;this.Ga=this.za.Ga};d.FT=e;d.IF=g;d.LO=function(b){var c;c=c||{};c.Rz=!0;return g(b,c)};d.xX=g},{"./utils/common":22,"./utils/strings":23,"./zlib/constants":25,"./zlib/gzheader":28,"./zlib/inflate.js":30,"./zlib/messages":32,
"./zlib/zstream":34}],22:[function(b,c,d){b="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(b){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!==typeof d)throw new TypeError(d+"must be non-object");for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}}return b};d.yv=function(b,c){if(b.length===c)return b;if(b.subarray)return b.subarray(0,c);b.length=c;return b};var e={Fh:function(b,c,d,e,
g){if(c.subarray&&b.subarray)b.set(c.subarray(d,d+e),g);else for(var r=0;r<e;r++)b[g+r]=c[d+r]},Ox:function(b){var c,d,e,g,r;c=e=0;for(d=b.length;c<d;c++)e+=b[c].length;r=new Uint8Array(e);c=e=0;for(d=b.length;c<d;c++)g=b[c],r.set(g,e),e+=g.length;return r}},g={Fh:function(b,c,d,e,g){for(var r=0;r<e;r++)b[g+r]=c[d+r]},Ox:function(b){return[].concat.apply([],b)}};d.aS=function(b){b?(d.pi=Uint8Array,d.Vf=Uint16Array,d.Dp=Int32Array,d.assign(d,e)):(d.pi=Array,d.Vf=Array,d.Dp=Array,d.assign(d,g))};d.aS(b)},
{}],23:[function(b,c,d){var e=b("./common"),g=new e.pi(256);for(b=0;256>b;b++)g[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;g[254]=g[254]=1;d.mS=function(b){var c,d,g,s,r,u=b.length,v=0;for(s=0;s<u;s++)d=b.charCodeAt(s),55296===(d&64512)&&s+1<u&&(g=b.charCodeAt(s+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+(g-56320),s++)),v+=128>d?1:2048>d?2:65536>d?3:4;c=new e.pi(v);for(s=r=0;r<v;s++)d=b.charCodeAt(s),55296===(d&64512)&&s+1<u&&(g=b.charCodeAt(s+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+
(g-56320),s++)),128>d?c[r++]=d:(2048>d?c[r++]=192|d>>>6:(65536>d?c[r++]=224|d>>>12:(c[r++]=240|d>>>18,c[r++]=128|d>>>12&63),c[r++]=128|d>>>6&63),c[r++]=128|d&63);return c};d.jL=function(b){if(65537>b.length)return String.fromCharCode.apply(null,b);for(var c="",d=0,e=b.length;d<e;d++)c+=String.fromCharCode(b[d]);return c};d.eL=function(b){for(var c=new e.pi(b.length),d=0,g=c.length;d<g;d++)c[d]=b.charCodeAt(d);return c};d.kL=function(b,c){var d,p,s,r,u=c||b.length,v=Array(2*u);for(d=p=0;d<u;)if(s=
b[d++],128>s)v[p++]=s;else if(r=g[s],4<r)v[p++]=65533,d+=r-1;else{for(s&=2===r?31:3===r?15:7;1<r&&d<u;)s=s<<6|b[d++]&63,r--;1<r?v[p++]=65533:65536>s?v[p++]=s:(s-=65536,v[p++]=55296|s>>10&1023,v[p++]=56320|s&1023)}return String.fromCharCode.apply(null,e.yv(v,p))};d.HS=function(b,c){var d;c=c||b.length;c>b.length&&(c=b.length);for(d=c-1;0<=d&&128===(b[d]&192);)d--;return 0>d||0===d?c:d+g[b[d]]>c?d:c}},{"./common":22}],24:[function(b,c){c.qc=function(b,c,g,k){var l=b&65535|0;b=b>>>16&65535|0;for(var q=
0;0!==g;){q=2E3<g?2E3:g;g-=q;do l=l+c[k++]|0,b=b+l|0;while(--q);l%=65521;b%=65521}return l|b<<16|0}},{}],25:[function(b,c){c.qc={NB:0,MV:1,PV:2,IV:3,Ss:4,zV:5,RV:6,Ts:0,Us:1,KV:2,FV:-1,OV:-2,BV:-3,AV:-5,LV:0,xV:1,wV:9,CV:-1,GV:1,JV:2,NV:3,HV:4,DV:0,yV:0,QV:1,SV:2,EV:8}},{}],26:[function(b,c){var d=function(){for(var b,c=[],d=0;256>d;d++){b=d;for(var l=0;8>l;l++)b=b&1?3988292384^b>>>1:b>>>1;c[d]=b}return c}();c.qc=function(b,c,k,l){k=l+k;for(b^=-1;l<k;l++)b=b>>>8^d[(b^c[l])&255];return b^-1}},{}],
27:[function(b,c,d){function e(b,c,d,e,g){this.lO=b;this.oP=c;this.CP=d;this.nP=e;this.vM=g}function g(b,c){b.Ga=Y[c];return c}function k(b){for(var c=b.length;0<=--c;)b[c]=0}function l(b){var c=b.state,d=c.pa;d>b.na&&(d=b.na);0!==d&&(J.Fh(b.jb,c.rc,c.Cr,d,b.Fc),b.Fc+=d,c.Cr+=d,b.Ol+=d,b.na-=d,c.pa-=d,0===c.pa&&(c.Cr=0))}function q(b,c){H.DK(b,0<=b.Ih?b.Ih:-1,b.I-b.Ih,c);b.Ih=b.I;l(b.za)}function p(b,c){b.rc[b.pa++]=c}function s(b,c){b.rc[b.pa++]=c>>>8&255;b.rc[b.pa++]=c&255}function r(b,c){var d=
b.iG,e=b.I,g,k=b.ah,l=b.wG,p=b.I>b.mi-262?b.I-(b.mi-262):0,q=b.window,s=b.Bn,r=b.Ee,L=b.I+258,u=q[e+k-1],v=q[e+k];b.ah>=b.mF&&(d>>=2);l>b.ha&&(l=b.ha);do if(g=c,q[g+k]===v&&q[g+k-1]===u&&q[g]===q[e]&&q[++g]===q[e+1]){e+=2;for(g++;q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&e<L;);g=258-(L-e);e=L-258;if(g>k){b.bp=c;k=g;if(g>=l)break;u=q[e+k-1];v=q[e+k]}}while((c=r[c&s])>p&&0!==--d);return k<=b.ha?k:b.ha}function u(b){var c=
b.mi,d,e,g,k;do{k=b.CI-b.ha-b.I;if(b.I>=c+(c-262)){J.Fh(b.window,b.window,c,c,0);b.bp-=c;b.I-=c;b.Ih-=c;d=e=b.iu;do g=b.head[--d],b.head[d]=g>=c?g-c:0;while(--e);d=e=c;do g=b.Ee[--d],b.Ee[d]=g>=c?g-c:0;while(--e);k+=c}if(0===b.za.ic)break;d=b.za;e=b.window;g=b.I+b.ha;var l=d.ic;l>k&&(l=k);0===l?e=0:(d.ic-=l,J.Fh(e,d.input,d.Yg,l,g),1===d.state.Wb?d.xa=O(d.xa,e,l,g):2===d.state.Wb&&(d.xa=N(d.xa,e,l,g)),d.Yg+=l,d.bj+=l,e=l);b.ha+=e;if(3<=b.ha+b.Sg)for(k=b.I-b.Sg,b.Hb=b.window[k],b.Hb=(b.Hb<<b.nl^b.window[k+
1])&b.ml;b.Sg&&!(b.Hb=(b.Hb<<b.nl^b.window[k+3-1])&b.ml,b.Ee[k&b.Bn]=b.head[b.Hb],b.head[b.Hb]=k,k++,b.Sg--,3>b.ha+b.Sg););}while(262>b.ha&&0!==b.za.ic)}function v(b,c){for(var d;;){if(262>b.ha){u(b);if(262>b.ha&&0===c)return 1;if(0===b.ha)break}d=0;3<=b.ha&&(b.Hb=(b.Hb<<b.nl^b.window[b.I+3-1])&b.ml,d=b.Ee[b.I&b.Bn]=b.head[b.Hb],b.head[b.Hb]=b.I);0!==d&&b.I-d<=b.mi-262&&(b.vb=r(b,d));if(3<=b.vb)if(d=H.Ik(b,b.I-b.bp,b.vb-3),b.ha-=b.vb,b.vb<=b.Py&&3<=b.ha){b.vb--;do b.I++,b.Hb=(b.Hb<<b.nl^b.window[b.I+
3-1])&b.ml,b.Ee[b.I&b.Bn]=b.head[b.Hb],b.head[b.Hb]=b.I;while(0!==--b.vb);b.I++}else b.I+=b.vb,b.vb=0,b.Hb=b.window[b.I],b.Hb=(b.Hb<<b.nl^b.window[b.I+1])&b.ml;else d=H.Ik(b,0,b.window[b.I]),b.ha--,b.I++;if(d&&(q(b,!1),0===b.za.na))return 1}b.Sg=2>b.I?b.I:2;return 4===c?(q(b,!0),0===b.za.na?3:4):b.Ug&&(q(b,!1),0===b.za.na)?1:2}function D(b,c){for(var d,e;;){if(262>b.ha){u(b);if(262>b.ha&&0===c)return 1;if(0===b.ha)break}d=0;3<=b.ha&&(b.Hb=(b.Hb<<b.nl^b.window[b.I+3-1])&b.ml,d=b.Ee[b.I&b.Bn]=b.head[b.Hb],
b.head[b.Hb]=b.I);b.ah=b.vb;b.MG=b.bp;b.vb=2;0!==d&&b.ah<b.Py&&b.I-d<=b.mi-262&&(b.vb=r(b,d),5>=b.vb&&(1===b.Yi||3===b.vb&&4096<b.I-b.bp)&&(b.vb=2));if(3<=b.ah&&b.vb<=b.ah){e=b.I+b.ha-3;d=H.Ik(b,b.I-1-b.MG,b.ah-3);b.ha-=b.ah-1;b.ah-=2;do++b.I<=e&&(b.Hb=(b.Hb<<b.nl^b.window[b.I+3-1])&b.ml,b.Ee[b.I&b.Bn]=b.head[b.Hb],b.head[b.Hb]=b.I);while(0!==--b.ah);b.ap=0;b.vb=2;b.I++;if(d&&(q(b,!1),0===b.za.na))return 1}else if(b.ap){if((d=H.Ik(b,0,b.window[b.I-1]))&&q(b,!1),b.I++,b.ha--,0===b.za.na)return 1}else b.ap=
1,b.I++,b.ha--}b.ap&&(H.Ik(b,0,b.window[b.I-1]),b.ap=0);b.Sg=2>b.I?b.I:2;return 4===c?(q(b,!0),0===b.za.na?3:4):b.Ug&&(q(b,!1),0===b.za.na)?1:2}function B(b,c){for(var d,e,g,k=b.window;;){if(258>=b.ha){u(b);if(258>=b.ha&&0===c)return 1;if(0===b.ha)break}b.vb=0;if(3<=b.ha&&0<b.I&&(e=b.I-1,d=k[e],d===k[++e]&&d===k[++e]&&d===k[++e])){for(g=b.I+258;d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&d===k[++e]&&e<g;);b.vb=258-(g-e);b.vb>b.ha&&(b.vb=b.ha)}3<=b.vb?(d=H.Ik(b,
1,b.vb-3),b.ha-=b.vb,b.I+=b.vb,b.vb=0):(d=H.Ik(b,0,b.window[b.I]),b.ha--,b.I++);if(d&&(q(b,!1),0===b.za.na))return 1}b.Sg=0;return 4===c?(q(b,!0),0===b.za.na?3:4):b.Ug&&(q(b,!1),0===b.za.na)?1:2}function I(b,c){for(var d;;){if(0===b.ha&&(u(b),0===b.ha)){if(0===c)return 1;break}b.vb=0;d=H.Ik(b,0,b.window[b.I]);b.ha--;b.I++;if(d&&(q(b,!1),0===b.za.na))return 1}b.Sg=0;return 4===c?(q(b,!0),0===b.za.na?3:4):b.Ug&&(q(b,!1),0===b.za.na)?1:2}function G(){this.za=null;this.status=0;this.rc=null;this.Wb=this.pa=
this.Cr=this.$g=0;this.Fa=null;this.Sh=0;this.method=8;this.Xo=-1;this.Bn=this.NA=this.mi=0;this.window=null;this.CI=0;this.head=this.Ee=null;this.wG=this.mF=this.Yi=this.Ae=this.Py=this.iG=this.ah=this.ha=this.bp=this.I=this.ap=this.MG=this.vb=this.Ih=this.nl=this.ml=this.my=this.iu=this.Hb=0;this.Af=new J.Vf(1146);this.Jm=new J.Vf(122);this.te=new J.Vf(78);k(this.Af);k(this.Jm);k(this.te);this.aD=this.Jt=this.uu=null;this.xj=new J.Vf(16);this.Cc=new J.Vf(573);k(this.Cc);this.Ko=this.Nj=0;this.depth=
new J.Vf(573);k(this.depth);this.ae=this.Ze=this.Sg=this.matches=this.np=this.Zj=this.zq=this.Ug=this.mr=this.zy=0}function Q(b){var c;if(!b||!b.state)return g(b,-2);b.bj=b.Ol=0;b.uo=2;c=b.state;c.pa=0;c.Cr=0;0>c.Wb&&(c.Wb=-c.Wb);c.status=c.Wb?42:113;b.xa=2===c.Wb?0:1;c.Xo=0;H.EK(c);return 0}function M(b){var c=Q(b);0===c&&(b=b.state,b.CI=2*b.mi,k(b.head),b.Py=K[b.Ae].oP,b.mF=K[b.Ae].lO,b.wG=K[b.Ae].CP,b.iG=K[b.Ae].nP,b.I=0,b.Ih=0,b.ha=0,b.Sg=0,b.vb=b.ah=2,b.ap=0,b.Hb=0);return c}function L(b,c,d,
e,k,l){if(!b)return-2;var p=1;-1===c&&(c=6);0>e?(p=0,e=-e):15<e&&(p=2,e-=16);if(1>k||9<k||8!==d||8>e||15<e||0>c||9<c||0>l||4<l)return g(b,-2);8===e&&(e=9);var q=new G;b.state=q;q.za=b;q.Wb=p;q.Fa=null;q.NA=e;q.mi=1<<q.NA;q.Bn=q.mi-1;q.my=k+7;q.iu=1<<q.my;q.ml=q.iu-1;q.nl=~~((q.my+3-1)/3);q.window=new J.pi(2*q.mi);q.head=new J.Vf(q.iu);q.Ee=new J.Vf(q.mi);q.mr=1<<k+6;q.$g=4*q.mr;q.rc=new J.pi(q.$g);q.zq=q.mr>>1;q.zy=3*q.mr;q.Ae=c;q.Yi=l;q.method=d;return M(b)}var J=b("../utils/common"),H=b("./trees"),
O=b("./adler32"),N=b("./crc32"),Y=b("./messages"),K;K=[new e(0,0,0,0,function(b,c){var d=65535;for(d>b.$g-5&&(d=b.$g-5);;){if(1>=b.ha){u(b);if(0===b.ha&&0===c)return 1;if(0===b.ha)break}b.I+=b.ha;b.ha=0;var e=b.Ih+d;if(0===b.I||b.I>=e)if(b.ha=b.I-e,b.I=e,q(b,!1),0===b.za.na)return 1;if(b.I-b.Ih>=b.mi-262&&(q(b,!1),0===b.za.na))return 1}b.Sg=0;if(4===c)return q(b,!0),0===b.za.na?3:4;b.I>b.Ih&&q(b,!1);return 1}),new e(4,4,8,4,v),new e(4,5,16,8,v),new e(4,6,32,32,v),new e(4,4,16,16,D),new e(8,16,32,
32,D),new e(8,16,128,128,D),new e(8,32,128,256,D),new e(32,128,258,1024,D),new e(32,258,258,4096,D)];d.rW=function(b,c){return L(b,c,8,15,8,0)};d.HL=L;d.sW=M;d.tW=Q;d.JL=function(b,c){b&&b.state&&2===b.state.Wb&&(b.state.Fa=c)};d.ND=function(b,c){var d,e,q,r;if(!b||!b.state||5<c||0>c)return b?g(b,-2):-2;e=b.state;if(!b.jb||!b.input&&0!==b.ic||666===e.status&&4!==c)return g(b,0===b.na?-5:-2);e.za=b;d=e.Xo;e.Xo=c;42===e.status&&(2===e.Wb?(b.xa=0,p(e,31),p(e,139),p(e,8),e.Fa?(p(e,(e.Fa.text?1:0)+(e.Fa.Ki?
2:0)+(e.Fa.ib?4:0)+(e.Fa.name?8:0)+(e.Fa.comment?16:0)),p(e,e.Fa.time&255),p(e,e.Fa.time>>8&255),p(e,e.Fa.time>>16&255),p(e,e.Fa.time>>24&255),p(e,9===e.Ae?2:2<=e.Yi||2>e.Ae?4:0),p(e,e.Fa.os&255),e.Fa.ib&&e.Fa.ib.length&&(p(e,e.Fa.ib.length&255),p(e,e.Fa.ib.length>>8&255)),e.Fa.Ki&&(b.xa=N(b.xa,e.rc,e.pa,0)),e.Sh=0,e.status=69):(p(e,0),p(e,0),p(e,0),p(e,0),p(e,0),p(e,9===e.Ae?2:2<=e.Yi||2>e.Ae?4:0),p(e,3),e.status=113)):(q=8+(e.NA-8<<4)<<8,r=-1,r=2<=e.Yi||2>e.Ae?0:6>e.Ae?1:6===e.Ae?2:3,q|=r<<6,0!==
e.I&&(q|=32),e.status=113,s(e,q+(31-q%31)),0!==e.I&&(s(e,b.xa>>>16),s(e,b.xa&65535)),b.xa=1));if(69===e.status)if(e.Fa.ib){for(q=e.pa;e.Sh<(e.Fa.ib.length&65535)&&(e.pa!==e.$g||(e.Fa.Ki&&e.pa>q&&(b.xa=N(b.xa,e.rc,e.pa-q,q)),l(b),q=e.pa,e.pa!==e.$g));)p(e,e.Fa.ib[e.Sh]&255),e.Sh++;e.Fa.Ki&&e.pa>q&&(b.xa=N(b.xa,e.rc,e.pa-q,q));e.Sh===e.Fa.ib.length&&(e.Sh=0,e.status=73)}else e.status=73;if(73===e.status)if(e.Fa.name){q=e.pa;do{if(e.pa===e.$g&&(e.Fa.Ki&&e.pa>q&&(b.xa=N(b.xa,e.rc,e.pa-q,q)),l(b),q=e.pa,
e.pa===e.$g)){r=1;break}r=e.Sh<e.Fa.name.length?e.Fa.name.charCodeAt(e.Sh++)&255:0;p(e,r)}while(0!==r);e.Fa.Ki&&e.pa>q&&(b.xa=N(b.xa,e.rc,e.pa-q,q));0===r&&(e.Sh=0,e.status=91)}else e.status=91;if(91===e.status)if(e.Fa.comment){q=e.pa;do{if(e.pa===e.$g&&(e.Fa.Ki&&e.pa>q&&(b.xa=N(b.xa,e.rc,e.pa-q,q)),l(b),q=e.pa,e.pa===e.$g)){r=1;break}r=e.Sh<e.Fa.comment.length?e.Fa.comment.charCodeAt(e.Sh++)&255:0;p(e,r)}while(0!==r);e.Fa.Ki&&e.pa>q&&(b.xa=N(b.xa,e.rc,e.pa-q,q));0===r&&(e.status=103)}else e.status=
103;103===e.status&&(e.Fa.Ki?(e.pa+2>e.$g&&l(b),e.pa+2<=e.$g&&(p(e,b.xa&255),p(e,b.xa>>8&255),b.xa=0,e.status=113)):e.status=113);if(0!==e.pa){if(l(b),0===b.na)return e.Xo=-1,0}else if(0===b.ic&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return g(b,-5);if(666===e.status&&0!==b.ic)return g(b,-5);if(0!==b.ic||0!==e.ha||0!==c&&666!==e.status){d=2===e.Yi?I(e,c):3===e.Yi?B(e,c):K[e.Ae].vM(e,c);if(3===d||4===d)e.status=666;if(1===d||3===d)return 0===b.na&&(e.Xo=-1),0;if(2===d&&(1===c?H.CK(e):5!==c&&(H.FK(e,
0,0,!1),3===c&&(k(e.head),0===e.ha&&(e.I=0,e.Ih=0,e.Sg=0))),l(b),0===b.na))return e.Xo=-1,0}if(4!==c)return 0;if(0>=e.Wb)return 1;2===e.Wb?(p(e,b.xa&255),p(e,b.xa>>8&255),p(e,b.xa>>16&255),p(e,b.xa>>24&255),p(e,b.bj&255),p(e,b.bj>>8&255),p(e,b.bj>>16&255),p(e,b.bj>>24&255)):(s(e,b.xa>>>16),s(e,b.xa&65535));l(b);0<e.Wb&&(e.Wb=-e.Wb);return 0!==e.pa?0:1};d.GL=function(b){var c;if(!b||!b.state)return-2;c=b.state.status;if(42!==c&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c)return g(b,-2);b.state=
null;return 113===c?g(b,-3):0};d.qW="pako deflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./messages":32,"./trees":33}],28:[function(b,c){c.qc=function(){this.os=this.NS=this.time=this.text=0;this.ib=null;this.Ix=0;this.comment=this.name="";this.Ki=0;this.wo=!1}},{}],29:[function(b,c){c.qc=function(b,c){var g,k,l,q,p,s,r,u,v,D,B,I,G,Q,M,L,J,H,O,N,Y,K,y,z;g=b.state;k=b.Yg;y=b.input;l=k+(b.ic-5);q=b.Fc;z=b.jb;p=q-(c-b.na);s=q+(b.na-257);r=g.Lt;u=g.Uf;v=g.nk;D=g.Tf;
B=g.window;I=g.pl;G=g.cd;Q=g.Tj;M=g.Hm;L=(1<<g.Ni)-1;J=(1<<g.vo)-1;a:do b:for(15>G&&(I+=y[k++]<<G,G+=8,I+=y[k++]<<G,G+=8),H=Q[I&L];;){O=H>>>24;I>>>=O;G-=O;O=H>>>16&255;if(0===O)z[q++]=H&65535;else if(O&16){N=H&65535;if(O&=15)G<O&&(I+=y[k++]<<G,G+=8),N+=I&(1<<O)-1,I>>>=O,G-=O;15>G&&(I+=y[k++]<<G,G+=8,I+=y[k++]<<G,G+=8);H=M[I&J];c:for(;;){O=H>>>24;I>>>=O;G-=O;O=H>>>16&255;if(O&16){H&=65535;O&=15;G<O&&(I+=y[k++]<<G,G+=8,G<O&&(I+=y[k++]<<G,G+=8));H+=I&(1<<O)-1;if(H>r){b.Ga="invalid distance too far back";
g.mode=30;break a}I>>>=O;G-=O;O=q-p;if(H>O){O=H-O;if(O>v&&g.Vz){b.Ga="invalid distance too far back";g.mode=30;break a}Y=0;K=B;if(0===D){if(Y+=u-O,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}}else if(D<O){if(Y+=u+D-O,O-=D,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=0;if(D<N){O=D;N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}}}else if(Y+=D-O,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}for(;2<N;)z[q++]=K[Y++],z[q++]=K[Y++],z[q++]=K[Y++],N-=3;N&&(z[q++]=K[Y++],1<N&&(z[q++]=K[Y++]))}else{Y=q-H;do z[q++]=
z[Y++],z[q++]=z[Y++],z[q++]=z[Y++],N-=3;while(2<N);N&&(z[q++]=z[Y++],1<N&&(z[q++]=z[Y++]))}}else if(0===(O&64)){H=M[(H&65535)+(I&(1<<O)-1)];continue c}else{b.Ga="invalid distance code";g.mode=30;break a}break}}else if(0===(O&64)){H=Q[(H&65535)+(I&(1<<O)-1)];continue b}else{O&32?g.mode=12:(b.Ga="invalid literal/length code",g.mode=30);break a}break}while(k<l&&q<s);N=G>>3;k-=N;G-=N<<3;b.Yg=k;b.Fc=q;b.ic=k<l?5+(l-k):5-(k-l);b.na=q<s?257+(s-q):257-(q-s);g.pl=I&(1<<G)-1;g.cd=G}},{}],30:[function(b,c,d){function e(b){return(b>>>
24&255)+(b>>>8&65280)+((b&65280)<<8)+((b&255)<<24)}function g(){this.mode=0;this.vu=!1;this.Wb=0;this.AF=!1;this.total=this.check=this.Lt=this.Pc=0;this.head=null;this.Tf=this.nk=this.Uf=this.wp=0;this.window=null;this.ib=this.offset=this.length=this.cd=this.pl=0;this.Hm=this.Tj=null;this.Qg=this.tr=this.ep=this.tG=this.vo=this.Ni=0;this.next=null;this.Od=new s.Vf(320);this.xs=new s.Vf(288);this.ZD=this.WF=null;this.LS=this.back=this.Vz=0}function k(b){var c;if(!b||!b.state)return-2;c=b.state;b.bj=
b.Ol=c.total=0;b.Ga="";c.Wb&&(b.xa=c.Wb&1);c.mode=1;c.vu=0;c.AF=0;c.Lt=32768;c.head=null;c.pl=0;c.cd=0;c.Tj=c.WF=new s.Dp(852);c.Hm=c.ZD=new s.Dp(592);c.Vz=1;c.back=-1;return 0}function l(b){var c;if(!b||!b.state)return-2;c=b.state;c.Uf=0;c.nk=0;c.Tf=0;return k(b)}function q(b,c){var d,e;if(!b||!b.state)return-2;e=b.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==e.window&&e.wp!==c&&(e.window=null);e.Wb=d;e.wp=c;return l(b)}function p(b,c){var d;if(!b)return-2;d=
new g;b.state=d;d.window=null;d=q(b,c);0!==d&&(b.state=null);return d}var s=b("../utils/common"),r=b("./adler32"),u=b("./crc32"),v=b("./inffast"),D=b("./inftrees"),B=!0,I,G;d.LW=l;d.MW=q;d.NW=k;d.KW=function(b){return p(b,15)};d.KO=p;d.IF=function(b,c){var d,g,k,l,q,p,K,y,z,ga,Z,E,W,eb;E=0;var ra,Ea,ua,sb,zb,Fb=new s.pi(4),Ki=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.jb||!b.input&&0!==b.ic)return-2;d=b.state;12===d.mode&&(d.mode=13);q=b.Fc;k=b.jb;K=b.na;l=b.Yg;g=b.input;
p=b.ic;y=d.pl;z=d.cd;ga=p;Z=K;zb=0;a:for(;;)switch(d.mode){case 1:if(0===d.Wb){d.mode=13;break}for(;16>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}if(d.Wb&2&&35615===y){d.check=0;Fb[0]=y&255;Fb[1]=y>>>8&255;d.check=u(d.check,Fb,2,0);z=y=0;d.mode=2;break}d.Pc=0;d.head&&(d.head.wo=!1);if(!(d.Wb&1)||(((y&255)<<8)+(y>>8))%31){b.Ga="incorrect header check";d.mode=30;break}if(8!==(y&15)){b.Ga="unknown compression method";d.mode=30;break}y>>>=4;z-=4;W=(y&15)+8;if(0===d.wp)d.wp=W;else if(W>d.wp){b.Ga="invalid window size";
d.mode=30;break}d.Lt=1<<W;b.xa=d.check=1;d.mode=y&512?10:12;z=y=0;break;case 2:for(;16>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.Pc=y;if(8!==(d.Pc&255)){b.Ga="unknown compression method";d.mode=30;break}if(d.Pc&57344){b.Ga="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=y>>8&1);d.Pc&512&&(Fb[0]=y&255,Fb[1]=y>>>8&255,d.check=u(d.check,Fb,2,0));z=y=0;d.mode=3;case 3:for(;32>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.head&&(d.head.time=y);d.Pc&512&&(Fb[0]=y&255,Fb[1]=y>>>8&255,Fb[2]=
y>>>16&255,Fb[3]=y>>>24&255,d.check=u(d.check,Fb,4,0));z=y=0;d.mode=4;case 4:for(;16>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.head&&(d.head.NS=y&255,d.head.os=y>>8);d.Pc&512&&(Fb[0]=y&255,Fb[1]=y>>>8&255,d.check=u(d.check,Fb,2,0));z=y=0;d.mode=5;case 5:if(d.Pc&1024){for(;16>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.length=y;d.head&&(d.head.Ix=y);d.Pc&512&&(Fb[0]=y&255,Fb[1]=y>>>8&255,d.check=u(d.check,Fb,2,0));z=y=0}else d.head&&(d.head.ib=null);d.mode=6;case 6:if(d.Pc&1024&&(E=d.length,E>
p&&(E=p),E&&(d.head&&(W=d.head.Ix-d.length,d.head.ib||(d.head.ib=Array(d.head.Ix)),s.Fh(d.head.ib,g,l,E,W)),d.Pc&512&&(d.check=u(d.check,g,E,l)),p-=E,l+=E,d.length-=E),d.length))break a;d.length=0;d.mode=7;case 7:if(d.Pc&2048){if(0===p)break a;E=0;do W=g[l+E++],d.head&&W&&65536>d.length&&(d.head.name+=String.fromCharCode(W));while(W&&E<p);d.Pc&512&&(d.check=u(d.check,g,E,l));p-=E;l+=E;if(W)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(d.Pc&4096){if(0===p)break a;E=0;do W=g[l+
E++],d.head&&W&&65536>d.length&&(d.head.comment+=String.fromCharCode(W));while(W&&E<p);d.Pc&512&&(d.check=u(d.check,g,E,l));p-=E;l+=E;if(W)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(d.Pc&512){for(;16>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}if(y!==(d.check&65535)){b.Ga="header crc mismatch";d.mode=30;break}z=y=0}d.head&&(d.head.Ki=d.Pc>>9&1,d.head.wo=!0);b.xa=d.check=0;d.mode=12;break;case 10:for(;32>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}b.xa=d.check=e(y);z=y=0;d.mode=11;
case 11:if(0===d.AF)return b.Fc=q,b.na=K,b.Yg=l,b.ic=p,d.pl=y,d.cd=z,2;b.xa=d.check=1;d.mode=12;case 12:if(5===c||6===c)break a;case 13:if(d.vu){y>>>=z&7;z-=z&7;d.mode=27;break}for(;3>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.vu=y&1;y>>>=1;z-=1;switch(y&3){case 0:d.mode=14;break;case 1:E=d;if(B){W=void 0;I=new s.Dp(512);G=new s.Dp(32);for(W=0;144>W;)E.Od[W++]=8;for(;256>W;)E.Od[W++]=9;for(;280>W;)E.Od[W++]=7;for(;288>W;)E.Od[W++]=8;D(1,E.Od,0,288,I,0,E.xs,{cd:9});for(W=0;32>W;)E.Od[W++]=5;D(2,
E.Od,0,32,G,0,E.xs,{cd:5});B=!1}E.Tj=I;E.Ni=9;E.Hm=G;E.vo=5;d.mode=20;if(6===c){y>>>=2;z-=2;break a}break;case 2:d.mode=17;break;case 3:b.Ga="invalid block type",d.mode=30}y>>>=2;z-=2;break;case 14:y>>>=z&7;for(z-=z&7;32>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}if((y&65535)!==(y>>>16^65535)){b.Ga="invalid stored block lengths";d.mode=30;break}d.length=y&65535;z=y=0;d.mode=15;if(6===c)break a;case 15:d.mode=16;case 16:if(E=d.length){E>p&&(E=p);E>K&&(E=K);if(0===E)break a;s.Fh(k,g,l,E,q);p-=E;l+=
E;K-=E;q+=E;d.length-=E;break}d.mode=12;break;case 17:for(;14>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.ep=(y&31)+257;y>>>=5;z-=5;d.tr=(y&31)+1;y>>>=5;z-=5;d.tG=(y&15)+4;y>>>=4;z-=4;if(286<d.ep||30<d.tr){b.Ga="too many length or distance symbols";d.mode=30;break}d.Qg=0;d.mode=18;case 18:for(;d.Qg<d.tG;){for(;3>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.Od[Ki[d.Qg++]]=y&7;y>>>=3;z-=3}for(;19>d.Qg;)d.Od[Ki[d.Qg++]]=0;d.Tj=d.WF;d.Ni=7;E={cd:d.Ni};zb=D(0,d.Od,0,19,d.Tj,0,d.xs,E);d.Ni=E.cd;if(zb){b.Ga=
"invalid code lengths set";d.mode=30;break}d.Qg=0;d.mode=19;case 19:for(;d.Qg<d.ep+d.tr;){for(;;){E=d.Tj[y&(1<<d.Ni)-1];ra=E>>>24;Ea=E>>>16&255;ua=E&65535;if(ra<=z)break;if(0===p)break a;p--;y+=g[l++]<<z;z+=8}if(16>ua)y>>>=ra,z-=ra,d.Od[d.Qg++]=ua;else{if(16===ua){for(E=ra+2;z<E;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}y>>>=ra;z-=ra;if(0===d.Qg){b.Ga="invalid bit length repeat";d.mode=30;break}W=d.Od[d.Qg-1];E=3+(y&3);y>>>=2;z-=2}else if(17===ua){for(E=ra+3;z<E;){if(0===p)break a;p--;y+=g[l++]<<z;
z+=8}y>>>=ra;z-=ra;W=0;E=3+(y&7);y>>>=3;z-=3}else{for(E=ra+7;z<E;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}y>>>=ra;z-=ra;W=0;E=11+(y&127);y>>>=7;z-=7}if(d.Qg+E>d.ep+d.tr){b.Ga="invalid bit length repeat";d.mode=30;break}for(;E--;)d.Od[d.Qg++]=W}}if(30===d.mode)break;if(0===d.Od[256]){b.Ga="invalid code -- missing end-of-block";d.mode=30;break}d.Ni=9;E={cd:d.Ni};zb=D(1,d.Od,0,d.ep,d.Tj,0,d.xs,E);d.Ni=E.cd;if(zb){b.Ga="invalid literal/lengths set";d.mode=30;break}d.vo=6;d.Hm=d.ZD;E={cd:d.vo};zb=D(2,
d.Od,d.ep,d.tr,d.Hm,0,d.xs,E);d.vo=E.cd;if(zb){b.Ga="invalid distances set";d.mode=30;break}d.mode=20;if(6===c)break a;case 20:d.mode=21;case 21:if(6<=p&&258<=K){b.Fc=q;b.na=K;b.Yg=l;b.ic=p;d.pl=y;d.cd=z;v(b,Z);q=b.Fc;k=b.jb;K=b.na;l=b.Yg;g=b.input;p=b.ic;y=d.pl;z=d.cd;12===d.mode&&(d.back=-1);break}for(d.back=0;;){E=d.Tj[y&(1<<d.Ni)-1];ra=E>>>24;Ea=E>>>16&255;ua=E&65535;if(ra<=z)break;if(0===p)break a;p--;y+=g[l++]<<z;z+=8}if(Ea&&0===(Ea&240)){W=ra;eb=Ea;for(sb=ua;;){E=d.Tj[sb+((y&(1<<W+eb)-1)>>
W)];ra=E>>>24;Ea=E>>>16&255;ua=E&65535;if(W+ra<=z)break;if(0===p)break a;p--;y+=g[l++]<<z;z+=8}y>>>=W;z-=W;d.back+=W}y>>>=ra;z-=ra;d.back+=ra;d.length=ua;if(0===Ea){d.mode=26;break}if(Ea&32){d.back=-1;d.mode=12;break}if(Ea&64){b.Ga="invalid literal/length code";d.mode=30;break}d.ib=Ea&15;d.mode=22;case 22:if(d.ib){for(E=d.ib;z<E;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.length+=y&(1<<d.ib)-1;y>>>=d.ib;z-=d.ib;d.back+=d.ib}d.LS=d.length;d.mode=23;case 23:for(;;){E=d.Hm[y&(1<<d.vo)-1];ra=E>>>24;Ea=
E>>>16&255;ua=E&65535;if(ra<=z)break;if(0===p)break a;p--;y+=g[l++]<<z;z+=8}if(0===(Ea&240)){W=ra;eb=Ea;for(sb=ua;;){E=d.Hm[sb+((y&(1<<W+eb)-1)>>W)];ra=E>>>24;Ea=E>>>16&255;ua=E&65535;if(W+ra<=z)break;if(0===p)break a;p--;y+=g[l++]<<z;z+=8}y>>>=W;z-=W;d.back+=W}y>>>=ra;z-=ra;d.back+=ra;if(Ea&64){b.Ga="invalid distance code";d.mode=30;break}d.offset=ua;d.ib=Ea&15;d.mode=24;case 24:if(d.ib){for(E=d.ib;z<E;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}d.offset+=y&(1<<d.ib)-1;y>>>=d.ib;z-=d.ib;d.back+=d.ib}if(d.offset>
d.Lt){b.Ga="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===K)break a;E=Z-K;if(d.offset>E){E=d.offset-E;if(E>d.nk&&d.Vz){b.Ga="invalid distance too far back";d.mode=30;break}E>d.Tf?(E-=d.Tf,W=d.Uf-E):W=d.Tf-E;E>d.length&&(E=d.length);eb=d.window}else eb=k,W=q-d.offset,E=d.length;E>K&&(E=K);K-=E;d.length-=E;do k[q++]=eb[W++];while(--E);0===d.length&&(d.mode=21);break;case 26:if(0===K)break a;k[q++]=d.length;K--;d.mode=21;break;case 27:if(d.Wb){for(;32>z;){if(0===p)break a;p--;
y|=g[l++]<<z;z+=8}Z-=K;b.Ol+=Z;d.total+=Z;Z&&(b.xa=d.check=d.Pc?u(d.check,k,Z,q-Z):r(d.check,k,Z,q-Z));Z=K;if((d.Pc?y:e(y))!==d.check){b.Ga="incorrect data check";d.mode=30;break}z=y=0}d.mode=28;case 28:if(d.Wb&&d.Pc){for(;32>z;){if(0===p)break a;p--;y+=g[l++]<<z;z+=8}if(y!==(d.total&4294967295)){b.Ga="incorrect length check";d.mode=30;break}z=y=0}d.mode=29;case 29:zb=1;break a;case 30:zb=-3;break a;case 31:return-4;default:return-2}b.Fc=q;b.na=K;b.Yg=l;b.ic=p;d.pl=y;d.cd=z;if(g=d.Uf||Z!==b.na&&30>
d.mode&&(27>d.mode||4!==c))g=b.jb,l=b.Fc,q=Z-b.na,K=b.state,null===K.window&&(K.Uf=1<<K.wp,K.Tf=0,K.nk=0,K.window=new s.pi(K.Uf)),q>=K.Uf?(s.Fh(K.window,g,l-K.Uf,K.Uf,0),K.Tf=0,K.nk=K.Uf):(p=K.Uf-K.Tf,p>q&&(p=q),s.Fh(K.window,g,l-q,p,K.Tf),(q-=p)?(s.Fh(K.window,g,l-q,q,0),K.Tf=q,K.nk=K.Uf):(K.Tf+=p,K.Tf===K.Uf&&(K.Tf=0),K.nk<K.Uf&&(K.nk+=p))),g=0;if(g)return d.mode=31,-4;ga-=b.ic;Z-=b.na;b.bj+=ga;b.Ol+=Z;d.total+=Z;d.Wb&&Z&&(b.xa=d.check=d.Pc?u(d.check,k,Z,b.Fc-Z):r(d.check,k,Z,b.Fc-Z));b.uo=d.cd+
(d.vu?64:0)+(12===d.mode?128:0)+(20===d.mode||15===d.mode?256:0);(0===ga&&0===Z||4===c)&&0===zb&&(zb=-5);return zb};d.IO=function(b){if(!b||!b.state)return-2;var c=b.state;c.window&&(c.window=null);b.state=null;return 0};d.JO=function(b,c){var d;b&&b.state&&(d=b.state,0!==(d.Wb&2)&&(d.head=c,c.wo=!1))};d.JW="pako inflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./inffast":29,"./inftrees":31}],31:[function(b,c){var d=b("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,
15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.qc=function(b,c,s,r,u,v,D,B){for(var I=B.cd,G=0,Q=0,M=0,L=0,J=0,H=0,O=0,N=0,Y=0,K=0,y,z,ga=null,Z=0,E,W=new d.Vf(16),
H=new d.Vf(16),eb=null,ra=0,Ea,ua,sb,G=0;15>=G;G++)W[G]=0;for(Q=0;Q<r;Q++)W[c[s+Q]]++;J=I;for(L=15;1<=L&&0===W[L];L--);J>L&&(J=L);if(0===L)return u[v++]=20971520,u[v++]=20971520,B.cd=1,0;for(M=1;M<L&&0===W[M];M++);J<M&&(J=M);for(G=N=1;15>=G;G++)if(N<<=1,N-=W[G],0>N)return-1;if(0<N&&(0===b||1!==L))return-1;H[1]=0;for(G=1;15>G;G++)H[G+1]=H[G]+W[G];for(Q=0;Q<r;Q++)0!==c[s+Q]&&(D[H[c[s+Q]]++]=Q);switch(b){case 0:ga=eb=D;E=19;break;case 1:ga=e;Z-=257;eb=g;ra-=257;E=256;break;default:ga=k,eb=l,E=-1}Q=K=
0;G=M;I=v;H=J;O=0;z=-1;Y=1<<J;r=Y-1;if(1===b&&852<Y||2===b&&592<Y)return 1;for(var zb=0;;){zb++;Ea=G-O;D[Q]<E?(ua=0,sb=D[Q]):D[Q]>E?(ua=eb[ra+D[Q]],sb=ga[Z+D[Q]]):(ua=96,sb=0);N=1<<G-O;M=y=1<<H;do y-=N,u[I+(K>>O)+y]=Ea<<24|ua<<16|sb|0;while(0!==y);for(N=1<<G-1;K&N;)N>>=1;0!==N?(K&=N-1,K+=N):K=0;Q++;if(0===--W[G]){if(G===L)break;G=c[s+D[Q]]}if(G>J&&(K&r)!==z){0===O&&(O=J);I+=M;H=G-O;for(N=1<<H;H+O<L;){N-=W[H+O];if(0>=N)break;H++;N<<=1}Y+=1<<H;if(1===b&&852<Y||2===b&&592<Y)return 1;z=K&r;u[z]=J<<24|
H<<16|I-v|0}}0!==K&&(u[I+K]=G-O<<24|4194304);B.cd=J;return 0}},{"../utils/common":22}],32:[function(b,c){c.qc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],33:[function(b,c,d){function e(b,c){this.bE=b;this.cp=0;this.Ml=c}function g(b,c,d,e,g){this.ZH=b;this.iM=c;this.hM=d;this.YL=e;this.pP=g;this.zF=b&&b.length}function k(b){for(var c=b.length;0<=--c;)b[c]=0}function l(b,
c){b.rc[b.pa++]=c&255;b.rc[b.pa++]=c>>>8&255}function q(b,c,d){b.ae>16-d?(b.Ze|=c<<b.ae&65535,l(b,b.Ze),b.Ze=c>>16-b.ae,b.ae+=d-16):(b.Ze|=c<<b.ae&65535,b.ae+=d)}function p(b,c,d){q(b,d[2*c],d[2*c+1])}function s(b,c){var d=0;do d|=b&1,b>>>=1,d<<=1;while(0<--c);return d>>>1}function r(b,c,d){var e=Array(16),g=0,k;for(k=1;15>=k;k++)e[k]=g=g+d[k-1]<<1;for(d=0;d<=c;d++)g=b[2*d+1],0!==g&&(b[2*d]=s(e[g]++,g))}function u(b){var c;for(c=0;286>c;c++)b.Af[2*c]=0;for(c=0;30>c;c++)b.Jm[2*c]=0;for(c=0;19>c;c++)b.te[2*
c]=0;b.Af[512]=1;b.Zj=b.np=0;b.Ug=b.matches=0}function v(b){8<b.ae?l(b,b.Ze):0<b.ae&&(b.rc[b.pa++]=b.Ze);b.Ze=0;b.ae=0}function D(b,c,d,e){var g=2*c,k=2*d;return b[g]<b[k]||b[g]===b[k]&&e[c]<=e[d]}function B(b,c,d){for(var e=b.Cc[d],g=d<<1;g<=b.Nj;){g<b.Nj&&D(c,b.Cc[g+1],b.Cc[g],b.depth)&&g++;if(D(c,e,b.Cc[g],b.depth))break;b.Cc[d]=b.Cc[g];d=g;g<<=1}b.Cc[d]=e}function I(b,c,d){var e,g,k=0,l,r;if(0!==b.Ug){do e=b.rc[b.zq+2*k]<<8|b.rc[b.zq+2*k+1],g=b.rc[b.zy+k],k++,0===e?p(b,g,c):(l=Z[g],p(b,l+256+
1,c),r=O[l],0!==r&&(g-=E[l],q(b,g,r)),e--,l=256>e?ga[e]:ga[256+(e>>>7)],p(b,l,d),r=N[l],0!==r&&(e-=W[l],q(b,e,r)));while(k<b.Ug)}p(b,256,c)}function G(b,c){var d=c.bE,e=c.Ml.ZH,g=c.Ml.zF,k=c.Ml.YL,l,p=-1,q;b.Nj=0;b.Ko=573;for(l=0;l<k;l++)0!==d[2*l]?(b.Cc[++b.Nj]=p=l,b.depth[l]=0):d[2*l+1]=0;for(;2>b.Nj;)q=b.Cc[++b.Nj]=2>p?++p:0,d[2*q]=1,b.depth[q]=0,b.Zj--,g&&(b.np-=e[2*q+1]);c.cp=p;for(l=b.Nj>>1;1<=l;l--)B(b,d,l);q=k;do l=b.Cc[1],b.Cc[1]=b.Cc[b.Nj--],B(b,d,1),e=b.Cc[1],b.Cc[--b.Ko]=l,b.Cc[--b.Ko]=
e,d[2*q]=d[2*l]+d[2*e],b.depth[q]=(b.depth[l]>=b.depth[e]?b.depth[l]:b.depth[e])+1,d[2*l+1]=d[2*e+1]=q,b.Cc[1]=q++,B(b,d,1);while(2<=b.Nj);b.Cc[--b.Ko]=b.Cc[1];l=c.bE;q=c.cp;for(var s=c.Ml.ZH,u=c.Ml.zF,v=c.Ml.iM,z=c.Ml.hM,y=c.Ml.pP,D,E,G=0,k=0;15>=k;k++)b.xj[k]=0;l[2*b.Cc[b.Ko]+1]=0;for(e=b.Ko+1;573>e;e++)g=b.Cc[e],k=l[2*l[2*g+1]+1]+1,k>y&&(k=y,G++),l[2*g+1]=k,g>q||(b.xj[k]++,D=0,g>=z&&(D=v[g-z]),E=l[2*g],b.Zj+=E*(k+D),u&&(b.np+=E*(s[2*g+1]+D)));if(0!==G){do{for(k=y-1;0===b.xj[k];)k--;b.xj[k]--;b.xj[k+
1]+=2;b.xj[y]--;G-=2}while(0<G);for(k=y;0!==k;k--)for(g=b.xj[k];0!==g;)s=b.Cc[--e],s>q||(l[2*s+1]!==k&&(b.Zj+=(k-l[2*s+1])*l[2*s],l[2*s+1]=k),g--)}r(d,p,b.xj)}function Q(b,c,d){var e,g=-1,k,l=c[1],p=0,q=7,r=4;0===l&&(q=138,r=3);c[2*(d+1)+1]=65535;for(e=0;e<=d;e++)k=l,l=c[2*(e+1)+1],++p<q&&k===l||(p<r?b.te[2*k]+=p:0!==k?(k!==g&&b.te[2*k]++,b.te[32]++):10>=p?b.te[34]++:b.te[36]++,p=0,g=k,0===l?(q=138,r=3):k===l?(q=6,r=3):(q=7,r=4))}function M(b,c,d){var e,g=-1,k,l=c[1],r=0,s=7,u=4;0===l&&(s=138,u=3);
for(e=0;e<=d;e++)if(k=l,l=c[2*(e+1)+1],!(++r<s&&k===l)){if(r<u){do p(b,k,b.te);while(0!==--r)}else 0!==k?(k!==g&&(p(b,k,b.te),r--),p(b,16,b.te),q(b,r-3,2)):10>=r?(p(b,17,b.te),q(b,r-3,3)):(p(b,18,b.te),q(b,r-11,7));r=0;g=k;0===l?(s=138,u=3):k===l?(s=6,u=3):(s=7,u=4)}}function L(b){var c=4093624447,d;for(d=0;31>=d;d++,c>>>=1)if(c&1&&0!==b.Af[2*d])return 0;if(0!==b.Af[18]||0!==b.Af[20]||0!==b.Af[26])return 1;for(d=32;256>d;d++)if(0!==b.Af[2*d])return 1;return 0}function J(b,c,d,e){q(b,0+(e?1:0),3);
v(b);l(b,d);l(b,~d);H.Fh(b.rc,b.window,c,d,b.pa);b.pa+=d}var H=b("../utils/common"),O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],y=Array(576);k(y);var z=Array(60);k(z);var ga=Array(512);k(ga);var Z=Array(256);k(Z);var E=Array(29);k(E);var W=Array(30);k(W);var eb,ra,Ea,ua=!1;d.EK=function(b){if(!ua){var c,d,k,l=Array(16);
for(k=d=0;28>k;k++)for(E[k]=d,c=0;c<1<<O[k];c++)Z[d++]=k;Z[d-1]=k;for(k=d=0;16>k;k++)for(W[k]=d,c=0;c<1<<N[k];c++)ga[d++]=k;for(d>>=7;30>k;k++)for(W[k]=d<<7,c=0;c<1<<N[k]-7;c++)ga[256+d++]=k;for(c=0;15>=c;c++)l[c]=0;for(c=0;143>=c;)y[2*c+1]=8,c++,l[8]++;for(;255>=c;)y[2*c+1]=9,c++,l[9]++;for(;279>=c;)y[2*c+1]=7,c++,l[7]++;for(;287>=c;)y[2*c+1]=8,c++,l[8]++;r(y,287,l);for(c=0;30>c;c++)z[2*c+1]=5,z[2*c]=s(c,5);eb=new g(y,O,257,286,15);ra=new g(z,N,0,30,15);Ea=new g([],Y,0,19,7);ua=!0}b.uu=new e(b.Af,
eb);b.Jt=new e(b.Jm,ra);b.aD=new e(b.te,Ea);b.Ze=0;b.ae=0;u(b)};d.FK=J;d.DK=function(b,c,d,e){var g,k,l=0;if(0<b.Ae){2===b.za.uo&&(b.za.uo=L(b));G(b,b.uu);G(b,b.Jt);Q(b,b.Af,b.uu.cp);Q(b,b.Jm,b.Jt.cp);G(b,b.aD);for(l=18;3<=l&&0===b.te[2*K[l]+1];l--);b.Zj+=3*(l+1)+14;g=b.Zj+3+7>>>3;k=b.np+3+7>>>3;k<=g&&(g=k)}else g=k=d+5;if(d+4<=g&&-1!==c)J(b,c,d,e);else if(4===b.Yi||k===g)q(b,2+(e?1:0),3),I(b,y,z);else{q(b,4+(e?1:0),3);c=b.uu.cp+1;d=b.Jt.cp+1;l+=1;q(b,c-257,5);q(b,d-1,5);q(b,l-4,4);for(g=0;g<l;g++)q(b,
b.te[2*K[g]+1],3);M(b,b.Af,c-1);M(b,b.Jm,d-1);I(b,b.Af,b.Jm)}u(b);e&&v(b)};d.Ik=function(b,c,d){b.rc[b.zq+2*b.Ug]=c>>>8&255;b.rc[b.zq+2*b.Ug+1]=c&255;b.rc[b.zy+b.Ug]=d&255;b.Ug++;0===c?b.Af[2*d]++:(b.matches++,c--,b.Af[2*(Z[d]+256+1)]++,b.Jm[2*(256>c?ga[c]:ga[256+(c>>>7)])]++);return b.Ug===b.mr-1};d.CK=function(b){q(b,2,3);p(b,256,y);16===b.ae?(l(b,b.Ze),b.Ze=0,b.ae=0):8<=b.ae&&(b.rc[b.pa++]=b.Ze&255,b.Ze>>=8,b.ae-=8)}},{"../utils/common":22}],34:[function(b,c){c.qc=function(){this.input=null;this.bj=
this.ic=this.Yg=0;this.jb=null;this.Ol=this.na=this.Fc=0;this.Ga="";this.state=null;this.uo=2;this.xa=0}},{}]},{},[7])(7)}"object"==typeof exports?module.qc=lq():"function"==typeof define&&define.XV?define(lq):"undefined"!=typeof window?window.nB=lq():"undefined"!=typeof global?global.nB=lq():"undefined"!=typeof self&&(self.nB=lq());!0;h("JSZip");h("ZipObject");function mq(a){this.Vs=new kq(a)}m(mq,Bc);h("gxnat.Zip",mq);function nq(a,b,c,d){if(!Ha(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=P.KB;var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new mq(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}mq.prototype.Hi=function(){return this.Vs.files};
mq.prototype.Ly=function(a){w(this.Hi(),function(b){a(b.name,b.XK())}.bind(this))};mq.prototype.i=function(){mq.d.i.call(this);this.Ly(function(a){this.Vs.remove(a)}.bind(this));ub(this.Vs);delete this.Vs};h("gxnat.Zip.prototype.getFiles",mq.prototype.Hi);h("gxnat.Zip.prototype.loopFiles",mq.prototype.Ly);h("gxnat.Zip.getFilesAsZip",nq);h("gxnat.Zip.prototype.dispose",mq.prototype.i);P.l.Re=function(){Bc.call(this)};m(P.l.Re,Bc);h("gxnat.vis.VisNode",P.l.Re);f=P.l.Re.prototype;f.Aj="Generic";f.nv=function(a){this.Aj=a};f.CM=function(){return this.Aj};f.qp="";f.Ur=function(a){this.qp=a};f.UN=function(){return this.qp};f.me=null;f.gh=function(a){this.me=a};f.ng=function(){return this.me};f.i=function(){P.l.Re.d.i.call(this);this.Aj&&delete this.Aj;this.qp&&delete this.qp;this.me&&delete this.me};h("gxnat.vis.VisNode.prototype.setCategory",P.l.Re.prototype.nv);
h("gxnat.vis.VisNode.prototype.getCategory",P.l.Re.prototype.CM);h("gxnat.vis.VisNode.prototype.setThumbnailUrl",P.l.Re.prototype.Ur);h("gxnat.vis.VisNode.prototype.getThumbnailUrl",P.l.Re.prototype.UN);h("gxnat.vis.VisNode.prototype.setTitle",P.l.Re.prototype.gh);h("gxnat.vis.VisNode.prototype.getTitle",P.l.Re.prototype.ng);h("gxnat.vis.VisNode.prototype.dispose",P.l.Re.prototype.i);P.l.ag=function(a){P.l.Re.call(this);this.$f=a||null};m(P.l.ag,P.l.Re);h("gxnat.vis.Renderable",P.l.ag);P.l.ag.prototype.cA=function(a){this.$f=a instanceof P.l.em?a:new P.l.em(a)};P.l.ag.prototype.DN=function(){return this.$f};P.l.ag.prototype.i=function(){P.l.ag.d.i.call(this);this.$f&&(this.$f.i(),delete this.$f)};h("gxnat.vis.Renderable.prototype.setRenderProperties",P.l.ag.prototype.cA);h("gxnat.vis.Renderable.prototype.getRenderProperties",P.l.ag.prototype.DN);
h("gxnat.vis.Renderable.prototype.dispose",P.l.ag.prototype.i);P.l.qf=function(a,b){P.l.ag.call(this,b);this.gl=a||[];null!=b&&this.cA(b)};m(P.l.qf,P.l.ag);h("gxnat.vis.Viewable",P.l.qf);f=P.l.qf.prototype;f.el=null;f.NM=function(){return this.el};f.UR=function(a){return this.el=a};f.kH=function(a){null!=this.el&&ub(this.el);this.el={};var b=this.Hi();A(b,function(a){this.el[a]=null}.bind(this));var c,d,e,g;a.Ly(function(a,l){c=0;for(d=b.length;c<d;c++)if(e=b[c],g="/files/"+a.split("/files/")[1],Ha(e,g)){this.el[e]=l;break}}.bind(this));a.i()};f.Hi=function(){return this.gl};
f.AR=function(a){window.lW.log("REMOVING FILE",a);Ob(this.gl,a)};f.Kk=function(a,b){null==this.gl&&(this.gl=[]);ia(a)||(a=[a]);A(a,function(a){null!=b&&null==b(a)||this.gl.push(a)}.bind(this))};f.i=function(){P.l.qf.d.i.call(this);this.gl&&(Mb(this.gl),delete this.gl)};h("gxnat.vis.Viewable.prototype.getFileData",P.l.qf.prototype.NM);h("gxnat.vis.Viewable.prototype.setFileData",P.l.qf.prototype.UR);h("gxnat.vis.Viewable.prototype.setFileDataFromZip",P.l.qf.prototype.kH);
h("gxnat.vis.Viewable.prototype.getFiles",P.l.qf.prototype.Hi);h("gxnat.vis.Viewable.prototype.removeFile",P.l.qf.prototype.AR);h("gxnat.vis.Viewable.prototype.addFiles",P.l.qf.prototype.Kk);h("gxnat.vis.Viewable.prototype.dispose",P.l.qf.prototype.i);P.l.bg=function(a){P.l.ag.call(this);null!=a?ia(a)||(a=[a]):a=[];this.Eg=a};m(P.l.bg,P.l.ag);h("gxnat.vis.ViewableGroup",P.l.bg);P.l.bg.prototype.CC=function(a){return this.Eg.push(a)};P.l.bg.prototype.xM=function(){var a=[];A(this.Eg,function(b){a=Pb(a,b.Hi())});return a};P.l.bg.prototype.gO=function(){return this.Eg};P.l.bg.prototype.i=function(){P.l.bg.d.i.call(this);A(this.Eg,function(a){ia(a)?A(a,function(a){a.i()}):a instanceof P.l.qf&&a.i()});delete this.Eg};
h("gxnat.vis.ViewableGroup.prototype.addViewable",P.l.bg.prototype.CC);h("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",P.l.bg.prototype.xM);h("gxnat.vis.ViewableGroup.prototype.getViewables",P.l.bg.prototype.gO);h("gxnat.vis.ViewableGroup.prototype.dispose",P.l.bg.prototype.i);V.b.Ne=function(){V.b.u.call(this);this.qn(Rh("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+t(),type:"radio"}));R(this.L,V.b.Ne.CSS.IJ);C(this.L,"change",this.fe.bind(this))};m(V.b.Ne,V.b.u);h("xiv.ui.ctrl.RadioButtonController",V.b.Ne);V.b.Ne.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";V.b.Ne.CSS_SUFFIX={IJ:"radiobutton"};V.b.Ne.prototype.fe=function(){this.dispatchEvent({type:"o",checked:this.L.checked})};V.b.Ne.prototype.g=function(){V.b.Ne.d.g.call(this)};
h("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",V.b.Ne.ID_PREFIX);h("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",V.b.Ne.CSS_SUFFIX);h("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",V.b.Ne.prototype.fe);h("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",V.b.Ne.prototype.g);V.b.qh=function(){V.b.u.call(this);this.Cn=[]};m(V.b.qh,V.b.u);h("xiv.ui.ctrl.MasterController2D",V.b.qh);V.b.qh.ID_PREFIX="xiv.ui.ctrl.MasterController2D";V.b.qh.CSS_SUFFIX={};V.b.qh.prototype.add=function(){};V.b.qh.prototype.g=function(){V.b.qh.d.g.call(this);Mb(this.Cn);delete this.Cn};h("xiv.ui.ctrl.MasterController2D.ID_PREFIX",V.b.qh.ID_PREFIX);h("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",V.b.qh.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController2D.prototype.add",V.b.qh.prototype.add);
h("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",V.b.qh.prototype.g);V.b.Nb=function(){V.b.u.call(this);this.gi("Master Opacity")};m(V.b.Nb,V.b.u);h("xiv.ui.ctrl.SliderController",V.b.Nb);V.b.Nb.ID_PREFIX="xiv.ui.ctrl.SliderController";V.b.Nb.CSS_SUFFIX={Na:"slider",sk:"slider-thumb",Ls:"slider-thumb-hover",tk:"slider-track",AB:"slider-track-hover",hw:"value-input"};f=V.b.Nb.prototype;f.MA=2;f.Vr=function(a){this.MA=a};f.n=function(a){V.b.Nb.d.n.call(this,a);this.px();this.rx()};
f.px=function(){var a=new U.A;this.qn(a);a.Lf(0);a.Fe(1);a.Xi(.01);a.S(1);R(a.a(),V.b.Nb.CSS.Na);R(a.Rd,V.b.Nb.CSS.sk);R(a.Ie,V.b.Nb.CSS.tk);a.st(V.b.Nb.CSS.Ls);a.Kw(V.b.Nb.CSS.AB);C(this.L,"change",this.fe.bind(this))};f.rx=function(){this.Ca=Rh("input");this.Ca.type="number";R(this.Ca,V.b.Nb.CSS.hw);Vh(this.a(),this.Ca);C(this.Ca,"input",this.Dz.bind(this));this.update()};
f.Dz=function(){window.console.log("on value input");var a=this.L,b=parseFloat(this.Ca.value),b=nd(b,a.Sa(),a.Da());this.Ca.value=b;a.S(b)};f.XN=function(){return this.Ca};f.fe=function(){var a=this.L,b=a.$().toFixed(this.MA),c=parseInt(this.Ca.value);this.Ca.value=b;this.dispatchEvent({type:"o",value:b,Ty:a.Sa(),Qy:a.Da(),NG:c})};
f.update=function(){var a=this.L,b=a.$();a.m();a.S(0);a.S(b);a.Lj()!==this.Ca.step&&(this.Ca.step=a.Lj());a.Sa()!==this.Ca.min&&(this.Ca.min=a.Sa());a.Da()!==this.Ca.max&&(this.Ca.max=a.Da());a.$()!==this.Ca.value&&(this.Ca.value=b)};f.g=function(){V.b.Nb.d.g.call(this);delete this.MA;null!=this.Ca&&($c(this.Ca),S(this.Ca),delete this.Ca)};h("xiv.ui.ctrl.SliderController.ID_PREFIX",V.b.Nb.ID_PREFIX);h("xiv.ui.ctrl.SliderController.CSS_SUFFIX",V.b.Nb.CSS_SUFFIX);
h("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",V.b.Nb.prototype.Vr);h("xiv.ui.ctrl.SliderController.prototype.render",V.b.Nb.prototype.n);h("xiv.ui.ctrl.SliderController.prototype.getValueInput",V.b.Nb.prototype.XN);h("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",V.b.Nb.prototype.fe);h("xiv.ui.ctrl.SliderController.prototype.update",V.b.Nb.prototype.update);h("xiv.ui.ctrl.SliderController.prototype.disposeInternal",V.b.Nb.prototype.g);V.b.wc=function(){V.b.u.call(this);this.gi("TwoThumb");this.px();this.rx();this.Cf=Rh("input");this.Cf.type="number";R(this.Cf,V.b.wc.CSS.$I);Vh(this.a(),this.Cf);C(this.Cf,"input",this.RP.bind(this));oq(this)};m(V.b.wc,V.b.u);h("xiv.ui.ctrl.TwoThumbSliderController",V.b.wc);V.b.wc.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";
V.b.wc.CSS_SUFFIX={Na:"slider",sk:"slider-thumb",SJ:"slider-thumb-extent",TJ:"slider-thumb-value",Ls:"slider-thumb-hover",tk:"slider-track",AB:"slider-track-hover",hw:"value-input",$I:"extent-input"};f=V.b.wc.prototype;
f.px=function(){this.Ba=new lo;this.Ba.D();var a=this.Ba.a();a.setAttribute("id","ThresholdSlider_"+t());R(a,V.b.wc.CSS.Na);var b=Rh("div",{id:"ThwoThumbSlider_track_"+t(),"class":V.b.wc.CSS.tk});a.appendChild(b);this.qn(this.Ba);R(this.Ba.Ha,V.b.wc.CSS.sk);R(this.Ba.Ha,V.b.wc.CSS.TJ);ll.Fl(this.Ba.Ha,V.b.wc.CSS.Ls);R(this.Ba.xd,V.b.wc.CSS.sk);R(this.Ba.xd,V.b.wc.CSS.SJ);ll.Fl(this.Ba.xd,V.b.wc.CSS.Ls);C(this.Ba,"change",this.fe.bind(this))};
f.update=function(){var a=Pi(this.Ba.Ha).width,b=this.Ba.Da()-this.Ba.Sa(),c=Pi(this.Ba.a()).width-a,a=c*((this.Ba.$()-this.Ba.Sa())/b),b=c*(this.Ba.Ng()/b);this.Ba.Ha.style.left=a.toString()+"px";this.Ba.xd.style.left=b.toString()+"px";pq(this);oq(this)};function pq(a){a.Ca.step=1;a.Ca.min=a.Ba.Sa();a.Ca.max=a.Ba.Da();a.Ca.value=a.Ba.$()}function oq(a){a.Cf.step=1;a.Cf.min=a.Ba.Sa();a.Cf.max=a.Ba.Da();a.Cf.value=a.Ba.Ng()+a.Ba.$()}
f.rx=function(){this.Ca=Rh("input");this.Ca.type="number";R(this.Ca,V.b.wc.CSS.hw);Vh(this.a(),this.Ca);C(this.Ca,"input",this.Dz.bind(this));pq(this)};f.Dz=function(a){window.console.log(a,this.Ca);this.Ba.S(parseInt(this.Ca.value))};f.RP=function(){this.Ba.Dl(parseInt(this.Cf.value)-this.Ba.$())};f.fe=function(){var a=this.Ba.$(),b=this.Ba.Ng()+a;this.Ca.value=a;this.Cf.value=b;this.dispatchEvent({type:"o",lower:a,upper:b})};
f.g=function(){V.b.wc.d.g.call(this);null!=this.Ba&&($c(this.Ba),null==this.Ba.cb&&(this.Ba.cb=new Tn),this.Ba.i(),delete this.Ba);null!=this.Ca&&($c(this.Ca),S(this.Ca),delete this.Ca);null!=this.Cf&&($c(this.Cf),S(this.Cf),delete this.Cf)};h("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",V.b.wc.ID_PREFIX);h("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",V.b.wc.CSS_SUFFIX);h("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",V.b.wc.prototype.update);
h("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",V.b.wc.prototype.fe);h("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",V.b.wc.prototype.g);V.b.Td=function(){V.b.u.call(this);this.Ql=[]};m(V.b.Td,V.b.u);h("xiv.ui.ctrl.MasterController3D",V.b.Td);V.b.Td.ID_PREFIX="xiv.ui.ctrl.MasterController3D";V.b.Td.CSS_SUFFIX={};V.b.Td.prototype.add=function(a){this.Ql.push(a);this.JC(a,V.b.Nb);1==this.Ql.length&&Vh(document.body,this.a())};V.b.Td.prototype.g=function(){V.b.Td.d.g.call(this);Mb(this.Ql);delete this.Ql};h("xiv.ui.ctrl.MasterController3D.ID_PREFIX",V.b.Td.ID_PREFIX);h("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",V.b.Td.CSS_SUFFIX);
h("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{iV:"Visible",aU:"Opacity"});h("xiv.ui.ctrl.MasterController3D.prototype.add",V.b.Td.prototype.add);h("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",V.b.Td.prototype.g);V.b.zb=function(){V.b.Td.call(this)};m(V.b.zb,V.b.Td);h("xiv.ui.ctrl.VolumeController3D",V.b.zb);V.b.zb.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";V.b.zb.Ov=1E3;V.b.zb.CSS_SUFFIX={};V.b.zb.prototype.MC=function(a){var b=this.ig(V.b.pd,"Volume Rendering",function(b){a.yI=b.checked});V.b.u.vg(a,b);this.ih.push(b);b.L.fh(!1)};V.b.zb.rQ=function(a){a.target[V.b.zb.Ps].Yo=parseFloat(a.lower);a.target[V.b.zb.Ps].yn=parseFloat(a.upper)};V.b.zb.Ps=t();
V.b.zb.prototype.KC=function(a){var b=this.ig(V.b.wc,"Threshold",this.constructor.rQ);b[V.b.zb.Ps]=a;V.b.u.vg(a,b);this.ih.push(b);var c=a.Yo,d=a.yn;-Infinity==c&&(c=-1*V.b.zb.Ov,a.Yo=c);Infinity==a.yn&&(d=V.b.zb.Ov,a.yn=d);b=b.L;b.Lf(c);b.Fe(d);ho(b,d-c);b.S(c);b.Xi(10);b.Dl(d-c);a.yn=d;a.Yo=c};V.b.zb.prototype.add=function(a){V.b.zb.d.add.call(this,a);this.MC(a);this.KC(a)};V.b.zb.prototype.m=function(){V.b.zb.d.m.call(this)};h("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",V.b.zb.ID_PREFIX);
h("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",V.b.zb.Ov);h("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",V.b.zb.CSS_SUFFIX);h("xiv.ui.ctrl.VolumeController3D.VOLUME_ID",V.b.zb.Ps);h("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",V.b.zb.prototype.MC);h("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",V.b.zb.prototype.KC);h("xiv.ui.ctrl.VolumeController3D.prototype.add",V.b.zb.prototype.add);h("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",V.b.zb.prototype.m);V.b.Ke=function(){V.b.u.call(this);this.Ql=[]};m(V.b.Ke,V.b.u);h("xiv.ui.ctrl.MasterController",V.b.Ke);V.b.Ke.ID_PREFIX="xiv.ui.ctrl.MasterController";V.b.Ke.CSS_SUFFIX={};V.b.Ke.prototype.add=function(a){this.Ql.push(a)};V.b.Ke.prototype.g=function(){V.b.Ke.d.g.call(this);Mb(this.Ql);delete this.Ql};h("xiv.ui.ctrl.MasterController.ID_PREFIX",V.b.Ke.ID_PREFIX);h("xiv.ui.ctrl.MasterController.CSS_SUFFIX",V.b.Ke.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController.CONTROLLERS",{});
h("xiv.ui.ctrl.MasterController.prototype.add",V.b.Ke.prototype.add);h("xiv.ui.ctrl.MasterController.prototype.disposeInternal",V.b.Ke.prototype.g);V.b.xb=function(){V.b.Ke.call(this)};m(V.b.xb,V.b.Ke);h("xiv.ui.ctrl.LevelsController",V.b.xb);V.b.xb.ID_PREFIX="xiv.ui.ctrl.LevelsController";V.b.xb.CSS_SUFFIX={};V.b.xb.Hp=1E3;V.b.xb.Ip=0;f=V.b.xb.prototype;f.add=function(a){V.b.xb.d.add.call(this,a);var b=this.FC(a),c=this.IC(a),d=this.HC(a),e=this.DC(a,c,d);a=this.EC(a,c,d);A([c,d,e,a],function(a){C(a.L,"q",function(){b.update()}.bind(this))}.bind(this))};
f.FC=function(a){var b=this.ig(V.b.vc,"Histogram",function(){}.bind(this));b.Hl(a);V.b.u.vg(a,b);this.Pi.push(b);b.update();return b};f.IC=function(a){var b=this.ig(V.b.Nb,"Level Min.",function(b){a.hj=b.value}.bind(this));b.Hl(a);V.b.u.vg(a,b);this.Pi.push(b);b.L.Fe(V.b.xb.Hp);b.L.Lf(V.b.xb.Ip);b.L.S(V.b.xb.Ip);b.L.Xi(1);b.Vr(0);b.update();return b};
f.HC=function(a){var b=this.ig(V.b.Nb,"Level Max.");b.Hl(a);C(b,"o",function(b){a.ni=b.value}.bind(this));V.b.u.vg(a,b);this.Pi.push(b);b.L.Fe(V.b.xb.Hp);b.L.Lf(V.b.xb.Ip);b.L.S(V.b.xb.Hp);b.L.Xi(1);b.Vr(0);b.update();return b};
f.DC=function(a,b,c){var d=this.ig(V.b.Nb,"Brightness");d.Hl(a);C(d,"o",function(d){d=(d.value-d.NG)/(d.Qy-d.Ty);var g=a.ni-a.hj;a.hj=Math.round(parseInt(a.hj)-g*d);a.ni=Math.round(parseInt(a.ni)-g*d);b.L.S(a.hj);c.L.S(a.ni)}.bind(this));V.b.u.vg(a,d);this.Pi.push(d);d.L.Fe(150);d.L.Lf(-150);d.L.S(0);d.L.Xi(1);d.Vr(0);d.update();return d};
f.EC=function(a,b,c){var d=this.ig(V.b.Nb,"Contrast");d.Hl(a);C(d,"o",function(d){d=(d.value-d.NG)/(d.Qy-d.Ty);var g=parseInt(a.ni)-parseInt(a.hj),k=parseInt(a.ni)-g*d;a.hj=Math.round(parseInt(a.hj)+g*d);a.ni=Math.round(k);b.L.S(a.hj);c.L.S(a.ni)}.bind(this));V.b.u.vg(a,d);this.Pi.push(d);d.L.Fe(150);d.L.Lf(-150);d.L.S(0);d.L.Xi(1);d.Vr(0);d.update();return d};f.g=function(){V.b.xb.d.g.call(this)};h("xiv.ui.ctrl.LevelsController.ID_PREFIX",V.b.xb.ID_PREFIX);
h("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",V.b.xb.CSS_SUFFIX);h("xiv.ui.ctrl.LevelsController.CONTROLLERS",{$S:"Brightness",jT:"Contrast",Ip:"Level Min.",Hp:"Level Max.",xT:"Histogram"});h("xiv.ui.ctrl.LevelsController.LEVEL_MAX",V.b.xb.Hp);h("xiv.ui.ctrl.LevelsController.LEVEL_MIN",V.b.xb.Ip);h("xiv.ui.ctrl.LevelsController.prototype.add",V.b.xb.prototype.add);h("xiv.ui.ctrl.LevelsController.prototype.add_histogram",V.b.xb.prototype.FC);h("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",V.b.xb.prototype.IC);
h("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",V.b.xb.prototype.HC);h("xiv.ui.ctrl.LevelsController.prototype.add_brightness",V.b.xb.prototype.DC);h("xiv.ui.ctrl.LevelsController.prototype.add_contrast",V.b.xb.prototype.EC);h("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",V.b.xb.prototype.g);function qq(a){ed.call(this);this.Uc=null;this.o=a;a=kc||mc&&!uc("531")&&"TEXTAREA"==a.tagName;this.vd=new cj(this);this.vd.F(this.o,a?["keydown","paste","cut","drop","input"]:"input",this)}m(qq,ed);
qq.prototype.handleEvent=function(a){if("input"==a.type)kc&&uc(10)&&0==a.keyCode&&0==a.charCode||(rq(this),jc&&this.o!=Gh(this.o).activeElement||this.dispatchEvent(sq(a)));else if("keydown"!=a.type||Gj(a)){var b="keydown"==a.type?this.o.value:null;kc&&229==a.keyCode&&(b=null);var c=sq(a);rq(this);this.Uc=Wf(function(){this.Uc=null;this.o.value!=b&&this.dispatchEvent(c)},0,this)}};function rq(a){null!=a.Uc&&(ba.clearTimeout(a.Uc),a.Uc=null)}function sq(a){a=new Kc(a.Nd);a.type="input";return a}
qq.prototype.g=function(){qq.d.g.call(this);this.vd.i();rq(this);delete this.o};function tq(a,b,c){wj.call(this,a);uq(this,b||"#f00");this.className=c||"goog-hsv-palette";this.Ia=pi(this.W())}m(tq,wj);f=tq.prototype;f.qv=function(a){a!=this.ym&&(uq(this,a),vq(this),this.dispatchEvent("action"))};function uq(a,b){var c=Mk(b).Lo,d=Sk(c),e=d[0],g=d[1],k=d[2],d=Math.max(Math.max(e,g),k),l=Math.min(Math.min(e,g),k);if(l==d)l=e=0;else{var q=d-l,l=q/d,e=60*(e==d?(g-k)/q:g==d?2+(k-e)/q:4+(e-g)/q);0>e&&(e+=360);360<e&&(e-=360)}a.he=[e,l,d];a.he[0]/=360;a.ym=c}
function wq(a,b,c,d){if(null!=b||null!=c||null!=d)a.he[0]=null!=b?b:a.he[0],a.he[1]=null!=c?c:a.he[1],a.he[2]=null!=d?d:a.he[2],b=[360*a.he[0],a.he[1],a.he[2]],b=Qk(Wk(b[0],b[1],b[2])),a.ym=b,vq(a),a.dispatchEvent("action")}f.hg=function(){return!1};
f.D=function(){var a=this.W(),b=kc&&!uc("7")?" "+(this.className+"-noalpha"):"",c=a.D("DIV",this.className+"-hs-backdrop");this.Ro=a.D("DIV",this.className+"-hs-handle");this.ql=a.D("DIV",this.className+"-hs-image",this.Ro);this.An=a.D("DIV",this.className+"-v-image");this.us=a.D("DIV",this.className+"-v-handle");this.Av=a.D("DIV",this.className+"-swatch");this.an=a.D("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.D("label",null,this.an);this.o=a.D("DIV",this.className+b,
c,this.ql,this.An,this.us,this.Av,d)};f.Db=function(){tq.d.Db.call(this);vq(this);var a=this.Fb();a.F(this.a(),"mousedown",this.Ji);this.br||(this.br=new qq(this.an));a.F(this.br,"input",this.rO)};f.g=function(){tq.d.g.call(this);delete this.ql;delete this.Ro;delete this.An;delete this.us;delete this.Av;delete this.an;this.br&&(this.br.i(),delete this.br);Zc(this.Yy);Zc(this.$y)};
function vq(a){if(a.ya){var b=a.he[1],c=a.he[2],d=a.ql.offsetWidth*a.he[0];a.qg()&&(d=a.ql.offsetWidth-d);var e=Math.ceil(a.Ro.offsetWidth/2),d=d-e,b=a.ql.offsetHeight*(1-b),b=b-Math.ceil(a.Ro.offsetHeight/2),e=a.Ro,g=a.qg();null!==b&&(e.style.top=b+"px");g?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.An.offsetTop-Math.floor(a.us.offsetHeight/2)+(255-c)/255*a.An.offsetHeight;a.us.style.top=b+"px";Si(a.ql,c/255);ti(a.An,"background-color",Qk(Wk(360*a.he[0],a.he[1],
255)));ti(a.Av,"background-color",a.ym);ti(a.Av,"color",127.5<a.he[2]?"#000":"#fff");var k;try{k=Mk(a.an.value).Lo}catch(l){}a.ym!=k&&(a.an.value=a.ym)}}f.Ji=function(a){if(a.target==this.An||a.target==this.us){var b=Ri(this.An);this.rF(b,a);this.Yy=C(this.Ia,"mousemove",wa(this.rF,this,b));this.$y=C(this.Ia,"mouseup",this.Uh,!1,this)}else if(a.target==this.ql||a.target==this.Ro)b=Ri(this.ql),this.qF(b,a),this.Yy=C(this.Ia,"mousemove",wa(this.qF,this,b)),this.$y=C(this.Ia,"mouseup",this.Uh,!1,this)};
f.rF=function(a,b){b.preventDefault();var c=si(this.W()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);wq(this,null,null,c)};f.qF=function(a,b){b.preventDefault();var c=si(this.W()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;wq(this,d,c,null)};f.Uh=function(){Zc(this.Yy);Zc(this.$y)};
f.rO=function(){/^#?[0-9a-f]{6}$/i.test(this.an.value)&&this.qv(this.an.value)};V.b.Xb=function(){V.b.u.call(this);this.gi("Color");this.Qk=Rh("div",{id:this.constructor.ID_PREFIX+"_ColorSquare_"+t(),"class":V.b.Xb.CSS.SI});Vh(this.a(),this.Qk);C(this.Qk,"click",this.PH.bind(this));this.Pk=new tq;this.Pk.n();C(this.Pk,"action",this.fe.bind(this));this.qn(this.Pk);R(this.Pk.a(),this.constructor.CSS.QI);this.Ai=Rh("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+t(),"class":V.b.Xb.CSS.RI});Vh(document.body,this.Ai);Vh(this.Ai,this.Pk.a());this.Ai.style.visibility="hidden";
this.ue=Rh("div",{id:this.constructor.ID_PREFIX+"_CloseButton_"+t(),"class":V.b.Xb.CSS.pk});Vh(this.Ai,this.ue);C(this.ue,"click",this.PH.bind(this))};m(V.b.Xb,V.b.u);h("xiv.ui.ctrl.ColorPaletteController",V.b.Xb);V.b.Xb.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";V.b.Xb.CSS_SUFFIX={SI:"colorsquare",RI:"colorpaletteholder",QI:"colorpalette",pk:"closebutton"};V.b.Xb.xB=20;V.b.Xb.yB=20;
V.b.Xb.prototype.PH=function(){this.Ai.style.visibility="hidden"==this.Ai.style.visibility?"visible":"hidden";var a=Fi(this.Qk),b=Pi(this.Qk),c=Pi(this.Ai),b=a.x+b.width+V.b.Xb.xB,a=a.y-V.b.Xb.yB,d=parseInt(window.innerHeight);a+c.height>d&&(a-=a+c.height-d);yi(this.Ai,b,a)};
V.b.Xb.prototype.update=function(){var a=Math.floor(255*this[V.b.u.Ln].color[0]),b=Math.floor(255*this[V.b.u.Ln].color[1]),c=Math.floor(255*this[V.b.u.Ln].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.L.qv(Qk([a,b,c]))};V.b.Xb.prototype.fe=function(a){this.Qk.style.backgroundColor=a.target.ym;this.dispatchEvent({type:"o",color:Sk(a.target.ym).map(function(a){return a/255})})};
V.b.Xb.prototype.g=function(){V.b.Xb.d.g.call(this);$c(this.ue);S(this.ue);delete this.ue;$c(this.Qk);S(this.Qk);delete this.Qk;$c(this.Pk);this.Pk.i();delete this.Pk;S(this.Ai);delete this.Ai};h("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",V.b.Xb.ID_PREFIX);h("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",V.b.Xb.CSS_SUFFIX);h("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",V.b.Xb.xB);h("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",V.b.Xb.yB);
h("xiv.ui.ctrl.ColorPaletteController.prototype.update",V.b.Xb.prototype.update);h("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",V.b.Xb.prototype.fe);h("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",V.b.Xb.prototype.g);V.b.rh=function(){V.b.Td.call(this)};m(V.b.rh,V.b.Td);h("xiv.ui.ctrl.MeshController3D",V.b.rh);V.b.rh.ID_PREFIX="xiv.ui.ctrl.MeshController3D";V.b.rh.CSS_SUFFIX={};V.b.rh.prototype.add=function(a){V.b.rh.d.add.call(this,a);this.Mw(a,V.b.pd);this.Lw(a,V.b.Xb)};h("xiv.ui.ctrl.MeshController3D.ID_PREFIX",V.b.rh.ID_PREFIX);h("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",V.b.rh.CSS_SUFFIX);h("xiv.ui.ctrl.MeshController3D.prototype.add",V.b.rh.prototype.add);
h("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",V.b.rh.prototype.g);V.b.oi=function(){V.b.Td.call(this)};m(V.b.oi,V.b.Td);h("xiv.ui.ctrl.AnnotationsController3D",V.b.oi);V.b.oi.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";V.b.oi.CSS_SUFFIX={};V.b.oi.prototype.add=function(a){V.b.oi.d.add.call(this,a);this.Mw(a,V.b.pd);this.Lw(a,V.b.Xb)};h("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",V.b.oi.ID_PREFIX);h("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",V.b.oi.CSS_SUFFIX);h("xiv.ui.ctrl.AnnotationsController3D.prototype.add",V.b.oi.prototype.add);V.b.Ud=function(){V.b.Ke.call(this)};m(V.b.Ud,V.b.Ke);h("xiv.ui.ctrl.VolumeController",V.b.Ud);V.b.Ud.ID_PREFIX="xiv.ui.ctrl.VolumeController";V.b.Ud.CSS_SUFFIX={};V.b.Ud.prototype.add=function(a){V.b.Ud.d.add.call(this,a);this.LC(a);this.GC(a)};V.b.Ud.prototype.LC=function(a){var b=this.ig(V.b.Ne,"Visible",function(){});V.b.u.vg(a,b);this.ih.push(b);b.Hl(a);b.L.checked=a[Wp]||!1};
V.b.Ud.prototype.GC=function(a){var b=this.ig(V.b.pd,"Show Label Map",function(b){a.cP.visible=b.checked});V.b.u.vg(a,b);this.ih.push(b);b.Hl(a);b.L.fh(!1)};V.b.Ud.prototype.g=function(){V.b.Ud.d.g.call(this);window.console.log("need to implement dispose methods for VolumeController")};h("xiv.ui.ctrl.VolumeController.ID_PREFIX",V.b.Ud.ID_PREFIX);h("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",V.b.Ud.CSS_SUFFIX);h("xiv.ui.ctrl.VolumeController.prototype.add",V.b.Ud.prototype.add);
h("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",V.b.Ud.prototype.LC);h("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",V.b.Ud.prototype.GC);h("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",V.b.Ud.prototype.g);V.b.Pb=function(){U.K.call(this);w({volumes:null,annotations:null,meshes:null,levels:null},function(a,b){this[b]=null})};m(V.b.Pb,U.K);h("xiv.ui.ctrl.XtkControllerTree",V.b.Pb);V.b.Pb.Fn=function(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null};h("xiv.ui.ctrl.XtkControllerTree.ControlSet",V.b.Pb.Fn);V.b.Pb.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";V.b.Pb.CSS_SUFFIX={};V.b.Pb.KM=function(){return{volumes:null,annotations:null,meshes:null,levels:null}};f=V.b.Pb.prototype;f.qB=function(){};
f.Ap=function(){return this.Gi([this.ok])};f.qB=function(){return this.Gi([this.Wl])};f.kK=function(){return this.Gi([this.fm])};f.WM=function(){};f.Gi=function(a){var b=[];A(ia(a)?a:[a],function(a){null!=a&&(b=Pb(b,a.wE()))});return b};f.rs=function(){var a=this.Gi([this.Wl,this.gm,this.fm,this.Xl,this.ok,this.Rv]);A(a,function(a){a.update()}.bind(this))};
f.mx=function(a,b){a instanceof F?(null==this.gm&&(this.Wl=new V.b.xb,this.gm=new V.b.Ud,this.fm=new V.b.zb),this.Wl.add(a,b),this.gm.add(a,b),this.fm.add(a,b)):a instanceof Co?(null==this.Xl&&(this.Xl=new V.b.rh),this.Xl.add(a,b)):a instanceof Ln&&(null==this.ok&&(this.ok=new V.b.oi),this.ok.add(a));this.volumes=new V.b.Pb.Fn(null,this.Gi([this.fm]),this.Gi([this.gm]));this.annotations=new V.b.Pb.Fn(null,this.Gi([this.ok]));this.meshes=new V.b.Pb.Fn(null,this.Gi([this.Xl]));this.levels=new V.b.Pb.Fn(null,
null,this.Gi([this.Wl]))};f.g=function(){V.b.Pb.d.g.call(this);null!=this.Wl&&(this.Wl.i(),delete this.Wl);null!=this.gm&&(this.gm.i(),delete this.gm);null!=this.IB&&(this.IB.i(),delete this.IB);null!=this.fm&&(this.fm.i(),delete this.fm);null!=this.Xl&&(this.Xl.i(),delete this.Xl);null!=this.ok&&(this.ok.i(),delete this.ok);null!=this.Rv&&(this.Rv.i(),delete this.Rv)};h("xiv.ui.ctrl.XtkControllerTree.ControlSet",V.b.Pb.Fn);h("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",V.b.Pb.ID_PREFIX);
h("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",V.b.Pb.CSS_SUFFIX);h("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",V.b.Pb.KM);h("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",V.b.Pb.prototype.qB);h("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",V.b.Pb.prototype.Ap);h("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",V.b.Pb.prototype.kK);h("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",V.b.Pb.prototype.WM);h("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",V.b.Pb.prototype.Gi);
h("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",V.b.Pb.prototype.rs);h("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",V.b.Pb.prototype.mx);h("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",V.b.Pb.prototype.g);function xq(){gd.call(this);this.r="shaders";this.lt="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.lt=a+="}\n";this.$s="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.$s=a+="}\n"}
m(xq,gd);
var yq={bV:"vertexPosition",aV:"vertexNormal",$U:"vertexColor",dV:"vertexTexturePos",cV:"vertexScalar"},zq={fV:"view",cU:"perspective",aT:"center",$T:"objectTransform",WU:"useObjectColor",YT:"objectColor",YU:"useScalars",rU:"scalarsReplaceMode",oU:"scalarsMin",lU:"scalarsMax",pU:"scalarsMinColor",mU:"scalarsMaxColor",qU:"scalarsMinThreshold",nU:"scalarsMaxThreshold",kU:"scalarsInterpolation",dU:"pointSize",ZT:"objectOpacity",XT:"normal",XU:"usePicking",ZU:"useTexture",VU:"useLabelMapTexture",IT:"labelmapOpacity",
HT:"labelmapColor",JU:"textureSampler",KU:"textureSampler2",jV:"volumeLowerThreshold",qV:"volumeUpperThreshold",nV:"volumeScalarMin",lV:"volumeScalarMax",oV:"volumeScalarMinColor",mV:"volumeScalarMaxColor",sV:"volumeWindowLow",rV:"volumeWindowHigh",pV:"volumeTexture"};
function Aq(a){var b=Object.keys(zq);if(!Object.keys(yq).every(function(a){a=yq[a];return-1!=this.lt.search(a)||-1!=this.$s.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=zq[a];return-1!=this.lt.search(a)||-1!=this.$s.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Bq(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");gd.call(this);this.r="buffer";this.bc=a;this.yk=b;this.zk=c}m(Bq,gd);function Cq(a,b){this.lx=a instanceof th?a:new th(a,b)}m(Cq,Om);Cq.prototype.ef=function(a,b,c,d){um(Bi(a),0,a,b,this.lx,c,null,d)};function Dq(a,b){this.fR=4;this.Mz=b||void 0;Lj.call(this,a)}m(Dq,Lj);Dq.prototype.bA=function(a){this.Mz=a||void 0;this.bb()&&this.ef()};Dq.prototype.ef=function(){if(this.Mz){var a=!this.bb()&&"move_offscreen"!=this.up,b=this.a();a&&(b.style.visibility="hidden",Ti(b,!0));this.Mz.ef(b,this.fR,this.VW);a&&Ti(b,!1)}};function Eq(a,b,c){this.Sb=c||(a?Eh(Hh(a)):Eh());Dq.call(this,this.Sb.D("div",{style:"position:absolute;display:none;"}));this.sx=new th(1,1);this.Lm=new ig;a&&this.no(a);null!=b&&this.Tr(b)}m(Eq,Dq);var Fq=[];f=Eq.prototype;f.wf=null;f.className="goog-tooltip";f.QH=500;f.BO=0;f.W=function(){return this.Sb};f.no=function(a){a=Hh(a);this.Lm.add(a);C(a,"mouseover",this.Ym,!1,this);C(a,"mouseout",this.eu,!1,this);C(a,"mousemove",this.pF,!1,this);C(a,"focus",this.Wm,!1,this);C(a,"blur",this.eu,!1,this)};
f.detach=function(a){if(a)a=Hh(a),Gq(this,a),this.Lm.remove(a);else{for(var b=this.Lm.Tm(),c=0;a=b[c];c++)Gq(this,a);this.Lm.clear()}};function Gq(a,b){Yc(b,"mouseover",a.Ym,!1,a);Yc(b,"mouseout",a.eu,!1,a);Yc(b,"mousemove",a.pF,!1,a);Yc(b,"focus",a.Wm,!1,a);Yc(b,"blur",a.eu,!1,a)}f.Tr=function(a){ei(this.a(),a)};f.Xz=function(a){var b=this.a();b&&S(b);Eq.d.Xz.call(this,a);a&&(b=this.Sb.Ia.body,b.insertBefore(a,b.lastChild))};f.dy=function(){return ki(this.a())};
f.Io=function(){return this.Jl?this.bb()?4:1:this.Wq?3:this.bb()?2:0};f.iz=function(){if(!Lj.prototype.iz.call(this))return!1;if(this.anchor)for(var a,b=0;a=Fq[b];b++)ci(a.a(),this.anchor)||a.wa(!1);Nb(Fq,this);a=this.a();a.className=this.className;Hq(this);C(a,"mouseover",this.wF,!1,this);C(a,"mouseout",this.vF,!1,this);Iq(this);return!0};
f.oz=function(){Ob(Fq,this);for(var a=this.a(),b,c=0;b=Fq[c];c++)b.anchor&&ci(a,b.anchor)&&b.wa(!1);this.JG&&Jq(this.JG);Yc(a,"mouseover",this.wF,!1,this);Yc(a,"mouseout",this.vF,!1,this);this.anchor=void 0;0==this.Io()&&(this.kv=!1);Lj.prototype.oz.call(this)};f.jG=function(a,b){this.anchor==a&&this.Lm.contains(this.anchor)&&(this.kv||!this.kX?(this.wa(!1),this.bb()||(this.anchor=a,this.bA(b||Kq(this,0)),this.wa(!0))):this.anchor=void 0);this.Jl=void 0};
f.qP=function(a){this.Wq=void 0;a==this.anchor&&(null!=this.wf&&(this.wf==this.a()||this.Lm.contains(this.wf))||this.jD&&this.jD.wf||this.wa(!1))};function Lq(a,b){var c=si(a.Sb);a.sx.x=b.clientX+c.x;a.sx.y=b.clientY+c.y}f.Ym=function(a){var b=Mq(this,a.target);this.wf=b;Hq(this);b!=this.anchor&&(this.anchor=b,this.Jl||(this.Jl=Wf(wa(this.jG,this,b,void 0),this.QH)),Nq(this),Lq(this,a))};function Mq(a,b){try{for(;b&&!a.Lm.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.pF=function(a){Lq(this,a);this.kv=!0};f.Wm=function(a){this.wf=a=Mq(this,a.target);this.kv=!0;if(this.anchor!=a){this.anchor=a;var b=Kq(this,1);Hq(this);this.Jl||(this.Jl=Wf(wa(this.jG,this,a,b),this.QH));Nq(this)}};function Kq(a,b){if(0==b){var c=a.sx.clone();return new Oq(c)}return new Pq(a.wf)}function Nq(a){if(a.anchor)for(var b,c=0;b=Fq[c];c++)ci(b.a(),a.anchor)&&(b.jD=a,a.JG=b)}
f.eu=function(a){var b=Mq(this,a.target),c=Mq(this,a.relatedTarget);b!=c&&(b==this.wf&&(this.wf=null),Iq(this),this.kv=!1,!this.bb()||a.relatedTarget&&ci(this.a(),a.relatedTarget)?this.anchor=void 0:Jq(this))};f.wF=function(){var a=this.a();this.wf!=a&&(Hq(this),this.wf=a)};f.vF=function(a){var b=this.a();this.wf!=b||a.relatedTarget&&ci(b,a.relatedTarget)||(this.wf=null,Jq(this))};function Iq(a){a.Jl&&(ba.clearTimeout(a.Jl),a.Jl=void 0)}
function Jq(a){2==a.Io()&&(a.Wq=Wf(wa(a.qP,a,a.anchor),a.BO))}function Hq(a){a.Wq&&(ba.clearTimeout(a.Wq),a.Wq=void 0)}f.g=function(){this.wa(!1);Iq(this);this.detach();this.a()&&S(this.a());this.wf=null;delete this.Sb;Eq.d.g.call(this)};function Oq(a,b){Cq.call(this,a,b)}m(Oq,Cq);Oq.prototype.ef=function(a,b,c){b=Bi(a);b=Ei(b);c=c?new vh(c.top+10,c.right,c.bottom,c.left+10):new vh(10,0,0,10);wm(this.lx,a,4,c,b,9)&496&&wm(this.lx,a,4,c,b,5)};function Pq(a){Pm.call(this,a,3)}m(Pq,Pm);
Pq.prototype.ef=function(a,b,c){var d=new th(10,0);um(this.element,this.tq,a,b,d,c,9)&496&&um(this.element,2,a,1,d,c,5)};function Qq(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!ma(b)||!ma(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof up))throw Error("Invalid interactor.");Eq.call(this);this.r="caption";this.Fg=a;this.ot=b;this.pt=c;this.oc=d;this.tj=null;this.jm=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.jm=[a];Xc(d,re,this.hr.bind(this));this.sy()}
m(Qq,Eq);Qq.prototype.sy=function(){var a=vi(this.Fg,"position");if("static"==a||""==a)this.Fg.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Rh("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.jm[0]));a.appendChild(b);b.appendChild(c);this.tj=b;this.bA(new Cq(this.ot,this.pt));this.wa(!0);this.no(this.Fg);this.a().classList.add("x-tooltip")};Qq.prototype.hr=function(){this.wa(!1);this.tj&&S(this.tj);this.a()&&S(this.a());this.tj=null};function Rq(){Rp.call(this);this.r="renderer3D";this.Tp=this.Xp=this.Sp=this.Wp=this.Rp=this.Vp=this.Aw=this.Bw=null;this.nb=[0,0,0];this.Lp=[0,0,0];this.cC=null;this.lw=new od;this.gq=new od;this.rm=new od;this.Yp=new od;this.Vn=new od;this.eo=new od;this.pm=new od;this.ko=new od;this.hc={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}m(Rq,Rp);Rq.prototype.__defineGetter__("config",function(){return this.hc});f=Rq.prototype;
f.HR=function(){this.Tp=this.Xp=this.Sp=this.Wp=this.Rp=this.Vp=null;this.nb=[0,0,0]};f.pz=function(a){Rq.d.pz.call(this,a);var b=a.ot;a=a.pt;var c=this.Jz(b,a);if(c=this.get(c))if(c=c.Un){var d=Ii(this.Pa),b=new Qq(this.Pa,d.x+b+10,d.y+a+10,this.oc);a=tj(c,null);if(b=b.a())b.innerHTML=sj(a)}};
f.Ja=function(){Rq.d.Ja.call(this,"experimental-webgl");try{if(this.c.viewport(0,0,this.sb,this.ab),this.c.clearColor(this.Lp[0],this.Lp[1],this.Lp[2],0),this.c.enable(this.c.BLEND),this.c.blendEquation(this.c.FUNC_ADD),this.c.blendFunc(this.c.SRC_ALPHA,this.c.ONE_MINUS_SRC_ALPHA),this.c.enable(this.c.DEPTH_TEST),this.c.depthFunc(this.c.LEQUAL),this.c.clear(this.c.COLOR_BUFFER_BIT|this.c.DEPTH_BUFFER_BIT),this.hc.PICKING_ENABLED){var a=this.c.createFramebuffer(),b=this.c.createRenderbuffer(),c=this.c.createTexture();
this.c.bindTexture(this.c.TEXTURE_2D,c);this.c.texImage2D(this.c.TEXTURE_2D,0,this.c.RGB,this.sb,this.ab,0,this.c.RGB,this.c.UNSIGNED_BYTE,null);this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_WRAP_S,this.c.CLAMP_TO_EDGE);this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_WRAP_T,this.c.CLAMP_TO_EDGE);this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MAG_FILTER,this.c.NEAREST);this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MIN_FILTER,this.c.NEAREST);this.c.bindFramebuffer(this.c.FRAMEBUFFER,
a);this.c.bindRenderbuffer(this.c.RENDERBUFFER,b);this.c.renderbufferStorage(this.c.RENDERBUFFER,this.c.DEPTH_COMPONENT16,this.sb,this.ab);this.c.bindRenderbuffer(this.c.RENDERBUFFER,null);this.c.framebufferTexture2D(this.c.FRAMEBUFFER,this.c.COLOR_ATTACHMENT0,this.c.TEXTURE_2D,c,0);this.c.framebufferRenderbuffer(this.c.FRAMEBUFFER,this.c.DEPTH_ATTACHMENT,this.c.RENDERBUFFER,b);this.c.bindFramebuffer(this.c.FRAMEBUFFER,null);this.cC=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new xq;Sq(this,a)};
function Sq(a,b){if(null==a.td||null==a.c||null==a.Ea)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof xq))throw Error("Could not add shaders.");Aq(b);var c=a.c.createShader(a.c.FRAGMENT_SHADER),d=a.c.createShader(a.c.VERTEX_SHADER);a.c.shaderSource(c,b.$s);a.c.shaderSource(d,b.lt);a.c.compileShader(c);a.c.compileShader(d);if(!a.c.getShaderParameter(c,a.c.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.c.getShaderInfoLog(c));if(!a.c.getShaderParameter(d,
a.c.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.c.getShaderInfoLog(d));var e=a.c.createProgram();a.c.attachShader(e,d);a.c.attachShader(e,c);a.c.linkProgram(e);if(!a.c.getProgramParameter(e,a.c.LINK_STATUS))throw Error("Could not create shader program!\n"+a.c.getShaderInfoLog(c)+"\n"+a.c.getShaderInfoLog(d)+"\n"+a.c.getProgramInfoLog(e));a.c.useProgram(e);a.Aw=e;Object.keys(yq).forEach(function(a){a=yq[a];this.lw.set(a,this.c.getAttribLocation(this.Aw,a));this.c.enableVertexAttribArray(this.lw.get(a))}.bind(a));
Object.keys(zq).forEach(function(a){a=zq[a];this.gq.set(a,this.c.getUniformLocation(this.Aw,a))}.bind(a));a.Bw=b}
f.gj=function(a){Rq.d.gj.call(this,a);var b=!1;if(null!=a){this.get(a.qe)&&(b=!0);var c=a.qe,d=a.G,e=a.ra,g=a.Jd,k=a.rb,l=a.va,q=a.bd,p=a.Te,s=a.p,r=a.Cb;if(null!=s&&null!=s.va&&s.va.Q)this.gj(s);else if(null!=s&&s.Q&&this.gj(s),null!=p&&null!=p.va&&p.va.Q)this.yc.load(p,a);else if(null!=k&&null!=k.va&&k.va.Q)this.yc.load(k,a);else{if(null!=l&&ia(l))if(null!=a.jj){if(a.jj.or!=l.length||!a.Q)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.yc.load(l[b],a);return}else{if(null!=l&&l.Q){this.yc.load(a,
a);return}if(null!=r&&null!=r.va&&r.va.Q){this.yc.load(r,a);return}}if(0<a.k.length)for(l=a.k,p=l.length,s=s=0;s<p;s++)this.gj(l[s]);if(d){for(l=0;this.et;)l++,window.console.log("Possible thread lock avoided: "+l);this.et=!0;p=a instanceof Ne&&a.uj instanceof Nn;b&&null!=k&&k.Q&&(l=this.pm.get(c),null!=l&&this.c.isBuffer(l.bc)&&this.c.deleteBuffer(l.bc));l=null;if(null!=k)if(!b||k.Q){l=a.jo;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
s=!1;k.Gk&&(s=!0);this.c.pixelStorei(this.c.UNPACK_FLIP_Y_WEBGL,s);s=this.c.createTexture();s.GF=k.xh;this.ko.set(k.qe,s);this.c.bindTexture(this.c.TEXTURE_2D,s);k.Gk?(s=this.c.RGBA,k.TB&&(s=this.c.LUMINANCE,this.c.pixelStorei(this.c.UNPACK_ALIGNMENT,1)),this.c.texImage2D(this.c.TEXTURE_2D,0,s,k.zw,k.yw,0,s,this.c.UNSIGNED_BYTE,k.Gk)):this.c.texImage2D(this.c.TEXTURE_2D,0,this.c.RGBA,this.c.RGBA,this.c.UNSIGNED_BYTE,s.GF);this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_WRAP_S,this.c.CLAMP_TO_EDGE);
this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_WRAP_T,this.c.CLAMP_TO_EDGE);p?(this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MAG_FILTER,this.c.NEAREST),this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MIN_FILTER,this.c.NEAREST)):(this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MAG_FILTER,this.c.LINEAR),this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MIN_FILTER,this.c.LINEAR));this.c.bindTexture(this.c.TEXTURE_2D,null);s=this.c.createBuffer();this.c.bindBuffer(this.c.ARRAY_BUFFER,
s);this.c.bufferData(this.c.ARRAY_BUFFER,new Float32Array(l),this.c.STATIC_DRAW);l=new Bq(s,l.length,2);this.pm.set(c,l);k.Q=!1}else l=this.pm.get(c);Nf(this.yc,.1);if(p)this.et=!1,n.Pe(this.r+".update"),Nf(this.yc,.9);else{if(!b||d.Q||q.Q){p=q.dc;k=n.w.Ec(p,d.Bh,d.Ch,d.Dh);p=n.w.Ec(p,d.yh,d.zh,d.Ah);if(null===this.Vp||k.x<this.Vp)this.Vp=k.x;if(null===this.Rp||p.x>this.Rp)this.Rp=p.x;if(null===this.Wp||k.y<this.Wp)this.Wp=k.y;if(null===this.Sp||p.y>this.Sp)this.Sp=p.y;if(null===this.Xp||k.z<this.Xp)this.Xp=
k.z;if(null===this.Tp||p.z>this.Tp)this.Tp=p.z;this.nb=[(this.Vp+this.Rp)/2,(this.Wp+this.Sp)/2,(this.Xp+this.Tp)/2];q.Q=!1}b&&d.Q&&(q=this.rm.get(c),null!=q&&this.c.isBuffer(q.bc)&&this.c.deleteBuffer(q.bc));q=null;!b||d.Q?(q=this.c.createBuffer(),d.resize(),this.c.bindBuffer(this.c.ARRAY_BUFFER,q),this.c.bufferData(this.c.ARRAY_BUFFER,d.Nc,this.c.STATIC_DRAW),q=new Bq(q,d.count,3),d.Q=!1):q=this.rm.get(c);Nf(this.yc,.3);b&&e.Q&&(k=this.rm.get(c),null!=k&&this.c.isBuffer(k.bc)&&this.c.deleteBuffer(k.bc));
k=null;!b||e.Q?(k=this.c.createBuffer(),e.resize(),this.c.bindBuffer(this.c.ARRAY_BUFFER,k),this.c.bufferData(this.c.ARRAY_BUFFER,e.Nc,this.c.STATIC_DRAW),k=new Bq(k,e.count,3),e.Q=!1):k=this.Yp.get(c);Nf(this.yc,.3);b&&g&&g.Q&&(e=this.Vn.get(c),null!=e&&this.c.isBuffer(e.bc)&&this.c.deleteBuffer(e.bc));e=null;if(g)if(!b||g.Q){if(g.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.c.createBuffer();g.resize();this.c.bindBuffer(this.c.ARRAY_BUFFER,e);this.c.bufferData(this.c.ARRAY_BUFFER,
g.Nc,this.c.STATIC_DRAW);e=new Bq(e,g.count,3);g.Q=!1}else e=this.Vn.get(c);Nf(this.yc,.2);b&&r&&r.Q&&(g=this.eo.get(c),null!=g&&this.c.isBuffer(g.bc)&&this.c.deleteBuffer(g.bc));g=null;if(r)if(g=r.Np,!b||r.Q){if(g.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.c.createBuffer();this.c.bindBuffer(this.c.ARRAY_BUFFER,d);this.c.bufferData(this.c.ARRAY_BUFFER,g,this.c.STATIC_DRAW);g=new Bq(d,g.length,3);r.Q=!1}else g=this.eo.get(c);Nf(this.yc,.1);b||this.wi.add(a);this.rm.set(c,
q);this.Yp.set(c,k);this.Vn.set(c,e);this.pm.set(c,l);this.eo.set(c,g);this.et=a.Q=!1}}else a.Q=!1}}};f.Jz=function(a,b){if(this.hc.PICKING_ENABLED){this.Ti(!0,!1);var c=new Uint8Array(4);this.c.readPixels(a,this.ab-b,1,1,this.c.RGBA,this.c.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.Ti=function(a,b){Rq.d.Ti.call(this,a,b);this.c.viewport(0,0,this.sb,this.ab);this.c.clear(this.c.COLOR_BUFFER_BIT|this.c.DEPTH_BUFFER_BIT);var c=this.wi.Bb,d=c.length;if(0!=d){a?this.c.bindFramebuffer(this.c.FRAMEBUFFER,this.cC):this.c.bindFramebuffer(this.c.FRAMEBUFFER,null);var e=this.Ea.xw,g=this.Ea.fa;this.c.uniformMatrix4fv(this.gq.get("perspective"),!1,e);this.c.uniformMatrix4fv(this.gq.get("view"),!1,g);e=this.nb;this.c.uniform3f(this.gq.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
g=this.We.length;for(e=0;e<g;++e){var k=this.We[e];if(k instanceof F){var l=n.w.Ec(this.Ea.fa,k.Oa[0]+k.e[0].N[0],k.Oa[1]+k.e[0].N[1],k.Oa[2]+k.e[0].N[2]),q=n.w.Ec(this.Ea.fa,k.Oa[0]-k.e[0].N[0],k.Oa[1]-k.e[0].N[1],k.Oa[2]-k.e[0].N[2]),p=Math.abs(l.z-q.z),l=n.w.Ec(this.Ea.fa,k.Oa[0]+k.e[1].N[0],k.Oa[1]+k.e[1].N[1],k.Oa[2]+k.e[1].N[2]),q=n.w.Ec(this.Ea.fa,k.Oa[0]-k.e[1].N[0],k.Oa[1]-k.e[1].N[1],k.Oa[2]+-k.e[1].N[2]),s=Math.abs(l.z-q.z),l=n.w.Ec(this.Ea.fa,k.Oa[0]+k.e[2].N[0],k.Oa[1]+k.e[2].N[1],k.Oa[2]+
k.e[2].N[2]),q=n.w.Ec(this.Ea.fa,k.Oa[0]-k.e[2].N[0],k.Oa[1]-k.e[2].N[1],k.Oa[2]-k.e[2].N[2]),l=Math.max(p,s,Math.abs(l.z-q.z));l==p?Mn(k,0):l==s?Mn(k,1):Mn(k,2)}}if(this.hc.ORDERING_ENABLED){p=!1;g=this.We;k=g.length-1;do if(e=g[k],e instanceof F&&e.fg&&-1!=e.pc){var p=e.k[e.pc].k,s=e.pc,l=n.w.Ec(this.Ea.fa,e.Oa[0]+e.e[s].hb[0],e.Oa[1]+e.e[s].hb[1],e.Oa[2]+e.e[s].hb[2]),q=n.w.Ec(this.Ea.fa,e.Oa[0]-e.e[s].hb[0],e.Oa[1]-e.e[s].hb[1],e.Oa[2]-e.e[s].hb[2]),l=l.z-q.z,q=Math.max(e.Sn[e.pc],Math.max(e.Sn[e.pc+
4],e.Sn[e.pc+8])),r=Math.min(e.Sn[e.pc],Math.min(e.Sn[e.pc+4],e.Sn[e.pc+8]));if(0>l*(q+r))for(l=l=0;l<e.bq[s]-1;l++)p[l]&&(p[l].Wd=e.Wd,p[l].pe=e.e[s].ho*l);else for(l=e.bq[s]-1;0<=l;l--)p[l]&&(p[l].Wd=e.Wd,p[l].pe=(e.bq[s]-1)*e.e[s].ho-e.e[s].ho*l);p=!0}while(k--);g=this.wi.Bb;k=g.length-1;do e=g[k],!e.Rb||1==e.Wd||e instanceof Ne||(p=e,s=e.G.Xs,e=n.w.Ec(e.bd.dc,s[0],s[1],s[2]),e=n.w.Ec(this.Ea.fa,e.x,e.y,e.z),e=n.da.Dx(this.Ea.lm,e),e=Math.round(1E3*e)/1E3,p.pe=e,p=!0);while(k--);p&&this.wi.sort()}if(g=
!a&&null!=b&&b&&this.hc.STATISTICS_ENABLED)var u=0,v=0,D=0,B=0;var e=this.lw,k=e.get("vertexPosition"),p=e.get("vertexNormal"),s=e.get("vertexColor"),l=e.get("vertexTexturePos"),q=e.get("vertexScalar"),e=this.gq,r=e.get("usePicking"),I=e.get("useObjectColor"),G=e.get("objectColor"),Q=e.get("useScalars"),M=e.get("scalarsReplaceMode"),L=e.get("scalarsMin"),J=e.get("scalarsMax"),H=e.get("scalarsMinColor"),O=e.get("scalarsMaxColor"),N=e.get("scalarsInterpolation"),Y=e.get("scalarsMinThreshold"),K=e.get("scalarsMaxThreshold"),
y=e.get("objectOpacity"),z=e.get("labelmapOpacity"),ga=e.get("labelmapColor"),Z=e.get("useTexture"),E=e.get("useLabelMapTexture"),W=e.get("textureSampler"),eb=e.get("textureSampler2"),ra=e.get("volumeLowerThreshold"),Ea=e.get("volumeUpperThreshold"),ua=e.get("volumeScalarMin"),sb=e.get("volumeScalarMax"),zb=e.get("volumeWindowLow"),Fb=e.get("volumeWindowHigh"),Ki=e.get("volumeScalarMinColor"),Ks=e.get("volumeScalarMaxColor"),mp=e.get("volumeTexture"),Ls=e.get("objectTransform"),Ms=e.get("pointSize"),
e=d;do{var Ma=c[d-e];if(Ma){var Za=null;Ma instanceof Ne&&Ma.uj&&(Za=Ma.uj);if(Ma.Rb&&(!Za||Za.Rb)&&(!a||Ma.Zp)){var Rb=Ma.qe,Sc=Ma.Qp,tc=this.rm.get(Rb),kd=this.Yp.get(Rb),Tk=this.Vn.get(Rb),ee=this.eo.get(Rb),Uk=this.pm.get(Rb);this.c.bindBuffer(this.c.ARRAY_BUFFER,tc.bc);this.c.vertexAttribPointer(k,tc.zk,this.c.FLOAT,!1,0,0);this.c.bindBuffer(this.c.ARRAY_BUFFER,kd.bc);this.c.vertexAttribPointer(p,kd.zk,this.c.FLOAT,!1,0,0);a?this.c.uniform1i(r,!0):this.c.uniform1i(r,!1);!Tk||a||Sc?(kd=1,Sc&&
!a&&(kd=0),this.c.uniform1i(I,kd),kd=Ma.$a,a&&(kd=[Math.floor(Rb%65025%255)/255,Math.floor(Rb%65025/255)/255,Math.floor(Rb/65025)/255]),this.c.uniform3f(G,parseFloat(kd[0]),parseFloat(kd[1]),parseFloat(kd[2])),this.c.vertexAttribPointer(s,tc.zk,this.c.FLOAT,!1,0,0)):(this.c.uniform1i(I,!1),this.c.bindBuffer(this.c.ARRAY_BUFFER,Tk.bc),this.c.vertexAttribPointer(s,Tk.zk,this.c.FLOAT,!1,0,0));!ee||a||Sc?(this.c.uniform1i(Q,!1),this.c.vertexAttribPointer(q,tc.zk,this.c.FLOAT,!1,0,0)):(this.c.uniform1i(Q,
!0),this.c.uniform1i(M,Ma.Cb.fC),Rb=Ma.Cb.Ck,Sc=Ma.Cb.Ak,this.c.uniform3f(H,parseFloat(Rb[0]),parseFloat(Rb[1]),parseFloat(Rb[2])),this.c.uniform3f(O,parseFloat(Sc[0]),parseFloat(Sc[1]),parseFloat(Sc[2])),this.c.uniform1f(Y,parseFloat(Ma.Cb.cc)),this.c.uniform1f(K,parseFloat(Ma.Cb.ec)),this.c.uniform1f(L,parseFloat(Ma.Cb.tf)),this.c.uniform1f(J,parseFloat(Ma.Cb.Mc)),this.c.uniform1i(N,parseInt(Ma.Cb.nw,10)),this.c.bindBuffer(this.c.ARRAY_BUFFER,ee.bc),this.c.vertexAttribPointer(q,ee.zk,this.c.FLOAT,
!1,0,0));this.c.uniform1f(y,parseFloat(Ma.Wd));Ma.rb&&Uk&&!a?(this.c.uniform1i(Z,!0),this.c.activeTexture(this.c.TEXTURE0),this.c.bindTexture(this.c.TEXTURE_2D,this.ko.get(Ma.rb.qe)),this.c.uniform1i(W,0),this.c.bindBuffer(this.c.ARRAY_BUFFER,Uk.bc),this.c.vertexAttribPointer(l,Uk.zk,this.c.FLOAT,!1,0,0),this.c.uniform1i(mp,!1)):(this.c.uniform1i(Z,!1),this.c.vertexAttribPointer(l,tc.zk,this.c.FLOAT,!1,0,0));Za&&(this.c.uniform1i(mp,!0),this.c.uniform1f(ra,Za.cc),this.c.uniform1f(Ea,Za.ec),this.c.uniform1f(ua,
Za.tf),this.c.uniform1f(sb,Za.Mc),Rb=Za.Ck,Sc=Za.Ak,this.c.uniform3f(Ki,parseFloat(Rb[0]),parseFloat(Rb[1]),parseFloat(Rb[2])),this.c.uniform3f(Ks,parseFloat(Sc[0]),parseFloat(Sc[1]),parseFloat(Sc[2])),this.c.uniform1f(zb,Za.Ac),this.c.uniform1f(Fb,Za.zc),ee=Za.p,this.c.uniform1i(E,!1),Za.fg?this.c.uniform1f(y,parseFloat(Za.Wd)):ee&&ee.Rb&&(Za=Ma.p.qe,this.c.uniform1i(E,!0),this.c.activeTexture(this.c.TEXTURE1),this.c.bindTexture(this.c.TEXTURE_2D,this.ko.get(Za)),this.c.uniform1i(eb,1),this.c.uniform1f(z,
ee.Wd),this.c.uniform4fv(ga,ee.Cw)));this.c.uniformMatrix4fv(Ls,!1,Ma.bd.dc);Za=1;"POINTS"==Ma.Xe&&(Za=Ma.$p);this.c.uniform1f(Ms,Za);Za=-1;Ma.Xe==Yd?(Za=this.c.TRIANGLES,g&&(v+=tc.yk/3)):"LINES"==Ma.Xe?(this.c.lineWidth(Ma.bo),Za=this.c.LINES,g&&(D+=tc.yk/2)):"POINTS"==Ma.Xe?(Za=this.c.POINTS,g&&(B+=tc.yk)):"TRIANGLE_STRIPS"==Ma.Xe?(Za=this.c.TRIANGLE_STRIP,g&&(v+=tc.yk/3)):"POLYGONS"==Ma.Xe&&(Za=0==tc.yk%3?this.c.TRIANGLES:this.c.TRIANGLE_FAN,g&&(v+=tc.yk/3));g&&(u+=tc.yk);this.c.drawArrays(Za,
0,tc.yk)}}}while(--e);g&&(c="Objects: "+d+" | "+("Vertices: "+u+" | "),c+="Triangles: "+Math.round(v)+" | ",c+="Lines: "+D+" | ",c+="Points: "+B+" | ",c+="Textures: "+this.ko.Kj(),window.console.log(c))}};
f.remove=function(a){Rq.d.remove.call(this,a);if(0<a.k.length)for(var b=a.k,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.qe;c=this.pm.get(b);null!=c&&this.c.isBuffer(c.bc)&&this.c.deleteBuffer(c.bc);a.rb&&(c=this.ko.get(a.rb.qe))&&(this.c.deleteTexture(c),this.ko.remove(a.rb.qe));c=this.rm.get(b);null!=c&&this.c.isBuffer(c.bc)&&this.c.deleteBuffer(c.bc);c=this.Yp.get(b);null!=c&&this.c.isBuffer(c.bc)&&this.c.deleteBuffer(c.bc);c=this.Vn.get(b);null!=c&&this.c.isBuffer(c.bc)&&this.c.deleteBuffer(c.bc);
c=this.eo.get(b);null!=c&&this.c.isBuffer(c.bc)&&this.c.deleteBuffer(c.bc);this.rm.remove(b);this.Yp.remove(b);this.Vn.remove(b);this.pm.remove(b);this.eo.remove(b);this.wi.remove(a);return!0};f.Kg=function(){this.Bw=null;delete this.Bw;this.c.clear(this.c.COLOR_BUFFER_BIT|this.c.DEPTH_BUFFER_BIT);Rq.d.Kg.call(this)};Rq.prototype.__defineGetter__("bgColor",function(){return this.Lp});Rq.prototype.__defineSetter__("bgColor",function(a){this.Lp=a});
Rq.prototype.dR=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.Jz(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var g=Jp(this.Ea,a/this.sb*2-1,(this.ab-b)/this.ab*2-1,0);a=Jp(this.Ea,a/this.sb*2-1,(this.ab-b)/this.ab*2-1,1);g[0]+=this.nb[0];g[1]+=this.nb[1];g[2]+=this.nb[2];a[0]+=this.nb[0];a[1]+=this.nb[1];a[2]+=this.nb[2];b=[e.G.Bh,e.G.Ch,e.G.Dh];var k=[e.G.yh,e.G.Ch,e.G.Dh],l=[e.G.yh,e.G.zh,e.G.Dh],q=[e.G.Bh,e.G.zh,e.G.Dh],p=[e.G.Bh,e.G.zh,e.G.Ah],s=[e.G.Bh,e.G.Ch,
e.G.Ah],r=[e.G.yh,e.G.zh,e.G.Ah],u=[e.G.yh,e.G.Ch,e.G.Ah];b=[n.w.Ec(e.bd.dc,b[0],b[1],b[2]),n.w.Ec(e.bd.dc,k[0],k[1],k[2]),n.w.Ec(e.bd.dc,l[0],l[1],l[2]),n.w.Ec(e.bd.dc,q[0],q[1],q[2]),n.w.Ec(e.bd.dc,p[0],p[1],p[2]),n.w.Ec(e.bd.dc,s[0],s[1],s[2]),n.w.Ec(e.bd.dc,r[0],r[1],r[2]),n.w.Ec(e.bd.dc,u[0],u[1],u[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],v;for(v in b)v=b[v],k=[Math.min(k[0],v.x),Math.max(k[1],v.x),Math.min(k[2],v.y),Math.max(k[3],v.y),Math.min(k[4],v.z),Math.max(k[5],
v.z)];v=k;b=[];k=[];for(l=0;6>l;l++){var q=Math.floor(l/2),p=(q+1)%3,s=(q+2)%3,u=(2+2*q)%6,D=(4+2*q)%6,B=1/a[q]*(v[l]-g[q]);Infinity!=B&&-Infinity!=B&&(r=g[p]+a[p]*B,B=g[s]+a[s]*B,r>=v[u]&&r<=v[u+1]&&B>=v[D]&&B<=v[D+1]?(u=[],u[q]=v[l],u[p]=r,u[s]=B,b.push(u)):(u=[],u[q]=v[l],u[p]=r,u[s]=B,k.push(u)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(v=0;2>v;v++)b=a[v],k[v]=Math.sqrt((b[0]-g[0])*(b[0]-g[0])+(b[1]-g[1])*(b[1]-g[1])+(b[2]-g[2])*(b[2]-g[2]));g=b=v=null;k[0]<k[1]?(v=a[0],b=a[1]):
(v=a[1],b=a[0]);g=Math.sqrt((v[0]-b[0])*(v[0]-b[0])+(v[1]-b[1])*(v[1]-b[1])+(v[2]-b[2])*(v[2]-b[2]));g/=c;a=v;v=[b[0]-v[0],b[1]-v[1],b[2]-v[2]];b=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);k=[v[0]/b,v[1]/b,v[2]/b];l=e.G.Nc;q=l.length;for(v=0;v<g;v+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<q;b+=3)if(p=l[b],s=l[b+1],r=l[b+2],u=new n.da(p,s,r),u=n.w.Ec(e.bd.dc,p,s,r),Math.sqrt((a[0]-u.x)*(a[0]-u.x)+(a[1]-u.y)*(a[1]-u.y)+(a[2]-u.z)*(a[2]-u.z))<=d)return[u.x,u.y,u.z];return null};
h("X.renderer3D",Rq);h("X.renderer3D.prototype.init",Rq.prototype.Ja);h("X.renderer3D.prototype.add",Rq.prototype.add);h("X.renderer3D.prototype.onShowtime",Rq.prototype.zz);h("X.renderer3D.prototype.onRender",Rq.prototype.FG);h("X.renderer3D.prototype.get",Rq.prototype.get);h("X.renderer3D.prototype.render",Rq.prototype.n);h("X.renderer3D.prototype.destroy",Rq.prototype.Kg);h("X.renderer3D.prototype.remove",Rq.prototype.remove);h("X.renderer3D.prototype.resetBoundingBox",Rq.prototype.HR);
h("X.renderer3D.prototype.resetViewAndRender",Rq.prototype.Fr);h("X.renderer3D.prototype.pick",Rq.prototype.Jz);h("X.renderer3D.prototype.pick3d",Rq.prototype.dR);function Tq(){Rq.call(this)}m(Tq,Rq);h("xiv.vis.XtkRenderer3D",Tq);Tq.prototype.$h=function(){this.jn()};Tq.prototype.hn=function(a){Tq.d.hn.call(this,a);this.dispatchEvent({type:"A",value:a.qm})};Tq.prototype.n=function(){this.td&&this.c?(Tq.d.n.call(this),this.dispatchEvent({type:"B"})):this.Ja()};Tq.prototype.remove=function(a){null!=a&&Tq.d.remove.call(this,a)};h("xiv.vis.XtkRenderer3D.prototype.onResize",Tq.prototype.$h);h("xiv.vis.XtkRenderer3D.prototype.onProgress",Tq.prototype.hn);
h("xiv.vis.XtkRenderer3D.prototype.render",Tq.prototype.n);h("xiv.vis.XtkRenderer3D.prototype.remove",Tq.prototype.remove);function Uq(){Xp.call(this);this.orientation="V";this.Qn=Tq}m(Uq,Xp);h("xiv.vis.XtkPlane3D",Uq);h("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);P.s.Ap=function(a,b,c,d,e,g){P.s.Node.call(this);this.position=a;this.color=b;this.name=g};m(P.s.Ap,P.s.Node);h("gxnat.slicerNode.Annotations",P.s.Ap);function Vq(){ed.call(this);this.Cg=null;this.xf={mk:[],Ry:[],Kx:[],UH:[]};this.qk=new jq("X");this.Zl=new jq("Y");this.$l=new jq("Z");this.Wc=new Uq;this.rd={};this.rd[this.qk.Qc()]=this.qk;this.rd[this.Zl.Qc()]=this.Zl;this.rd[this.$l.Qc()]=this.$l;this.rd[this.Wc.Qc()]=this.Wc;this.Ri=null;this.vv(this.Wc);Wq(this)}m(Vq,Vp);h("xiv.vis.XtkEngine",Vq);Vq.ID_PREFIX="xiv.vis.XtkEngine";Vq.SLICE_TO_RAS_KEY="sliceToRAS"+t();Vq.HAS_LABEL_MAP_KEY="hasLabelMap";f=Vq.prototype;f.ev=!1;
function Xq(a,b){null!=b.$f.kq&&A(b.$f.kq,function(a){this.xf.UH.push(Yq(a))}.bind(a))}f.AH=function(a,b){switch(a.toLowerCase()){case "x":this.qk.ld(b);break;case "y":this.Zl.ld(b);break;case "z":this.$l.ld(b);break;case "v":this.Wc.ld(b)}};f.vv=function(a){this.Ri=a;this.Ri.Ja();this.ER=C(this.Ri,"A",this.vz.bind(this))};f.AN=function(){return this.Ri};f.Az=function(a){this.dispatchEvent(a)};
function Wq(a){w(a.rd,function(a){C(a,"E",this.Az.bind(this));C(a,"G",function(){}.bind(this))}.bind(a))}f.rs=function(){this.Cg.rs()};f.GM=function(){return this.Cg};
function Zq(a,b){null!=a.Cg&&(a.Cg.i(),a.Cg=null);a.Cg=new V.b.Pb;null!=(b.$f&&null!=b.$f.kq)&&(Xq(a,b),A(a.xf.UH,function(a){this.Cg.mx(a)}.bind(a)));var c;A(b.Eg,function(a){c=a.Hi();null!=c&&(currXObj=$q(c,a.el),renderProps=a.$f,currXObj&&(this.Cg.mx(currXObj,renderProps),currXObj instanceof F?(this.constructor.nX(currXObj,renderProps),this.xf.mk.push(currXObj)):currXObj instanceof Co?(this.constructor.mX(currXObj,renderProps),this.xf.Ry.push(currXObj)):currXObj instanceof mo&&(this.constructor.lX(currXObj,
renderProps),this.xf.Kx.push(currXObj))))}.bind(a))}f.$G=function(){this.vv(this.Wc);this.Wc.Ja();w(this.xf,function(a,b){"volumes"!==b&&A(a,function(a){this.Wc.add(a)}.bind(this))}.bind(this));Xc(this.Wc.fc(),"B",function(){this.Su();this.qk.n()}.bind(this));this.Wc.n()};f.ZG=function(a){var b=null!=a?a:this.Xt();w(this.rd,function(a,d){"v"!=d.toLowerCase()&&(a.Ja(),a.add(b),a.n())})};function ar(a){var b=a.Xt();w(a.xf.volumes,function(a){a!==b&&(a.visible=!1)})}
f.aH=function(){var a=this.Xt(),b=[],c=[],d=["x","y","z","v"];w(this.xf,function(a,d){currArr="volumes"==d?c:b;A(a,function(a){currArr.push(a)})}.bind(this));A(b,function(a){this.Wc.add(a)}.bind(this));A(c,function(b){b!==a&&(b.visible=!0,this.Wc.add(b))}.bind(this));this.Ri.fc().zz=function(){Ob(d,this.Ri.Qc().toLowerCase());br(this,a)}.bind(this);this.Ri.add(a);this.Ri.n()};
f.n=function(a){this.ev=!1;Zq(this,a);var b=a.$f;null!=b?(null!=b.backgroundColor&&this.Wc.lv(a.$f.backgroundColor),null!=b.zj&&this.Wc.mv(a.$f.zj)):(this.Wc.lv(),this.Wc.mv());if(0<this.xf.mk.length){a=this.rd;b="";for(b in a)if(a[b].isEnabled()){this.vv(a[b]);break}this.aH()}else this.Wc.isEnabled()&&this.$G()};function br(a,b){var c=nb(a.rd)-1;w(a.rd,function(a){a!=this.Ri&&a.isEnabled()&&(a.add(b),Xc(a.fc(),"B",function(){c--;0==c&&this.Su()}.bind(this)),a.n())}.bind(a))}
f.Xt=function(){if(0!=this.xf.mk.length){for(var a=0,b=this.xf.mk.length;a<b;a++){var c=this.xf.mk[a];if(c[Wp])return c}this.xf.mk[0][Wp]=!0;return this.xf.mk[0]}};f.m=function(){w(this.rd,function(a){a.m()}.bind(this))};f.vz=function(a){this.ev||this.dispatchEvent({type:"A",value:a.value})};f.Su=function(a){ar(this);Zc(this.ER);this.ev=!0;this.dispatchEvent({type:"B",value:null!=a?a.value:1})};f.tN=function(){return this.qk};f.uN=function(){return this.Zl};f.vN=function(){return this.$l};f.sN=function(){return this.Wc};
f.Wt=function(a){return this.rd[a]};f.wN=function(){return this.rd};f.i=function(){Vq.d.i.call(this);null!=this.Cg&&(this.Cg.i(),delete this.Cg);$c(this.qk);$c(this.Zl);$c(this.$l);$c(this.Wc);delete this.Ri;ub(this.rd);delete this.rd;this.qk.i();delete this.qk;this.Zl.i();delete this.Zl;this.$l.i();delete this.$l;this.Wc.i();delete this.Wc;delete this.ev};
var cr=["nrrd","nii","nii.gz","mgh","mgz"],dr=["dicom","dcm","ima"],er=["hdr","img"],fr=["nii","nii.gz"],gr=["jpeg","jpg","gif","png","img"],hr="stl vtk obj fsm inflated smoothwm pial orig".split(" "),ir=["trk"];function jr(a){var b=void 0;kr(a)?b=new Co:lr(a)||mr(a)||nr(a)?b=new F:or(a)&&(b=new mo);return b}function Yq(a,b){var c=new Ln;c.zi=a.position;c.caption=a.name;c.name=a.name;c.di=void 0===b?3:b;c.color=[.85,0,0];return c}function lr(a){return-1<cr.indexOf(a)?!0:!1}
function nr(a){return-1<gr.indexOf(a)?!0:!1}function mr(a){return-1<dr.indexOf(a)?!0:!1}function kr(a){return-1<hr.indexOf(a)?!0:!1}function or(a){return-1<ir.indexOf(a)?!0:!1}var pr={fibers:[],volumes:[],dicoms:[],analyze:[],nifti:[],meshes:[],annotations:[],images:[]};
function $q(a,b){function c(a){var b=zk.dirname(a);a=zk.mq(a);return b+"/"+a}var d=ia(a)?zk.Ut(a[0]):zk.Ut(a),d=jr(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(ia(a)){var e=[];A(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=pb(b),d.AW=ob(b)):d.file=a;return d}h("xiv.vis.XtkEngine.EventType",{wU:"E",uU:"F",vU:"G",ERROR:"H",vV:"I",MT:"J",NT:"K"});h("xiv.vis.XtkEngine.ID_PREFIX",Vq.ID_PREFIX);
h("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});h("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",Vq.SLICE_TO_RAS_KEY);h("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",Vq.HAS_LABEL_MAP_KEY);h("xiv.vis.XtkEngine.generateXtkObjectFromExtension",jr);h("xiv.vis.XtkEngine.createAnnotation",Yq);h("xiv.vis.XtkEngine.isVolume",lr);h("xiv.vis.XtkEngine.isImage",nr);h("xiv.vis.XtkEngine.isDicom",mr);h("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<er.indexOf(a)?!0:!1});
h("xiv.vis.XtkEngine.isNifti",function(a){return-1<fr.indexOf(a)?!0:!1});h("xiv.vis.XtkEngine.isMesh",kr);h("xiv.vis.XtkEngine.isFiber",or);h("xiv.vis.XtkEngine.ViewablesObject",pr);
h("xiv.vis.XtkEngine.getViewables",function(a){var b=xb(pr);ia(a)||(a=[a]);for(var c="",d="",e=0,g=a.length;e<g;e++)c=nl(a[e]).toLowerCase(),d=ol(c),0==c.lastIndexOf(".",0)||("mrml"===d?b.slicer.push(a[e]):lr(d)?b.volumes.push(a[e]):mr(d)?b.dicoms.push(a[e]):kr(d)?b.meshes.push(a[e]):or(d)?b.fibers.push(a[e]):nr(d)&&b.images.push(a[e]));window.console.log("VIEWABLE TYPES",b);w(b,function(a,c){a.length||vb(b,c)});return b});h("xiv.vis.XtkEngine.createXObject",$q);
h("xiv.vis.XtkEngine.prototype.setPlaneEnabled",Vq.prototype.AH);h("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",Vq.prototype.vv);h("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",Vq.prototype.AN);h("xiv.vis.XtkEngine.prototype.updateControllers",Vq.prototype.rs);h("xiv.vis.XtkEngine.prototype.getControllerTree",Vq.prototype.GM);h("xiv.vis.XtkEngine.prototype.render3dPlane",Vq.prototype.$G);h("xiv.vis.XtkEngine.prototype.render2D",Vq.prototype.ZG);
h("xiv.vis.XtkEngine.prototype.renderAllPlanes",Vq.prototype.aH);h("xiv.vis.XtkEngine.prototype.render",Vq.prototype.n);h("xiv.vis.XtkEngine.prototype.getSelectedVolume",Vq.prototype.Xt);h("xiv.vis.XtkEngine.prototype.updateStyle",Vq.prototype.m);h("xiv.vis.XtkEngine.prototype.getPlaneX",Vq.prototype.tN);h("xiv.vis.XtkEngine.prototype.getPlaneY",Vq.prototype.uN);h("xiv.vis.XtkEngine.prototype.getPlaneZ",Vq.prototype.vN);h("xiv.vis.XtkEngine.prototype.getPlaneV",Vq.prototype.sN);
h("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",Vq.prototype.Wt);h("xiv.vis.XtkEngine.prototype.getPlanes",Vq.prototype.wN);h("xiv.vis.XtkEngine.prototype.dispose",Vq.prototype.i);V.Ic=function(){U.qa.call(this)};m(V.Ic,U.qa);h("xiv.ui.HelpDialog",V.Ic);V.Ic.ID_PREFIX="xiv.ui.HelpDialog";V.Ic.CSS={XI:"nrg-ui-helpdialog-dialog",Mn:"nrg-ui-helpdialog-text",QJ:"xiv-ui-helpdialog-scrollablezippytree",Ob:"xiv-ui-helpdialog-title",pk:"xiv-ui-helpdialog-closebutton"};V.Ic.LAYOUT_IMAGE_ID=V.Ic.ID_PREFIX+".LayoutImage";
V.Ic.prototype.n=function(a){V.Ic.d.n.call(this,a);R(this.a(),"xiv-ui-helpdialog");this.Jp=new U.$b;R(this.Jp.a(),this.constructor.CSS.QJ);this.Jp.n(this.a());qr(this);this.Jw(this.constructor.CSS.Ob);this.oC(this.constructor.CSS.pk)};V.Ic.prototype.rH=function(a){null!=document.getElementById(V.Ic.LAYOUT_IMAGE_ID)&&(document.getElementById(V.Ic.LAYOUT_IMAGE_ID).src=a)};
function qr(a){var b=[["Change Layouts","<img height=15 width=15 id="+V.Ic.LAYOUT_IMAGE_ID+"></img>"],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>'],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],
["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+
'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>'],["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>'],["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']],c=[["Add ViewBox Row",
'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Remove ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removerow.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Remove ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removecolumn.png"></img>'],
["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.gh("Help");A([[["Slice-scroll","shift + mousemove","2D panels"],["Resize","left-click + drag","panel borders"]],b,c],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';A(a,function(a){c+="<tr>";A(a,
function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",k;currText=b+1;switch(currText){case 1:k="Image Manipulation";break;case 2:k="Toggles";break;case 3:k="Modal"}S(c);var l=Rh("div");l.innerHTML=c;this.Jp.Gg(l,[k])}.bind(a))}V.Ic.prototype.g=function(){V.Ic.d.g.call(this);null!=this.Jp&&this.Jp.i()};
h("xiv.ui.HelpDialog.EventType",{});h("xiv.ui.HelpDialog.ID_PREFIX",V.Ic.ID_PREFIX);h("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",V.Ic.LAYOUT_IMAGE_ID);h("xiv.ui.HelpDialog.CSS_SUFFIX",V.Ic.CSS_SUFFIX);h("xiv.ui.HelpDialog.prototype.render",V.Ic.prototype.n);h("xiv.ui.HelpDialog.prototype.setLayoutButton",V.Ic.prototype.rH);h("xiv.ui.HelpDialog.prototype.disposeInternal",V.Ic.prototype.g);function rr(a,b,c){Vm.call(this,a,b||Wm.Ef(),c);this.le(16,!0)}m(rr,Vm);Kl("goog-toggle-button",function(){return new rr(null)});V.Xa=function(a){U.K.call(this);this.t={};this.oa=a};m(V.Xa,U.K);h("xiv.ui.ViewBoxDialogs",V.Xa);V.Xa.ID_PREFIX="xiv.ui.ViewBoxDialogs";V.Xa.CSS_SUFFIX={qi:"generic-toggle",eJ:"infodialog",fJ:"infodialog-text",hJ:"inusedialog"};var sr="Info_"+t(),tr="Help_"+t(),ur="InUse_"+t(),vr={AT:sr,vT:tr,DT:ur};V.Xa.Ns="ToggleClass_"+t();f=V.Xa.prototype;f.JM=function(){return this.t};f.IM=function(a){return this.t[a]};
f.xq=function(a,b,c,d,e,g,k,l){e=null!=e?e:"";var q=this.oa.Dm("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.t[a].wa(b);this.t[a].zi();this.dispatchEvent({type:b?"L":"M",PD:this.t[a],QD:a})}.bind(this),d);null!=this.t[a]&&this.t[a].i();c=new U.qa;this.t[a]=c;kk(c,null!=k?k:!1);rk(c,null!=l?l:null);c.n(this.oa.tc);jk(c,0);c.ef();c.gh(e);R(c.a(),b);C(c,"c",function(){this.oa.gp(q)}.bind(this));C(c,nk,function(){}.bind(this));!1===g&&Jl(this.oa.jf[a])};
f.wL=function(){this.xq(vr.RT,"xiv-ui-viewboxdialogs-meshes-dialog",V.Xa.CSS.qi,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.yL=function(){this.xq(vr.kV,"xiv-ui-viewboxdialogs-volumes-dialog",V.Xa.CSS.qi,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.vD=function(){this.t[ur]=new U.qa;rk(this.t[ur],tk);this.t[ur].n(this.oa.tc);this.t[ur].Cl("ViewBox in use.&nbspProceed anyway?");wr(this);xr(this)};
f.qH=function(a,b){Xc(this.t[ur],sk,function(c){"yes"===c.key&&null!=a&&a(this);"no"===c.key&&null!=b&&b(this)}.bind(this))};f.Yr=function(){R(this.t[ur].a(),V.Xa.CSS.hJ);kk(this.t[ur],!0);this.t[ur].wa(!0);this.t[ur].zi()};f.update=function(){w(this.t,function(a){a.sI()})};f.ls=function(a,b){var c=!1===b?0:1;window.console.log(a,this.t[a]);null!=this.t[a].a()&&T.lg(this.t[a].a(),200,c)};f.Xx=function(){return this.t[tr]};
function wr(a){null!=a.t[tr]&&a.t[tr].i();a.t[tr]=new V.Ic;kk(a.t[tr],!1);rk(a.t[tr],null);a.t[tr].n(a.oa.tc);a.t[tr].wa(!1);a.t[tr].zi();var b=a.oa.Dm("LEFT",V.Xa.CSS.qi,tr,"Help",function(a){a="true"==a.getAttribute("checked");this.t[tr].wa(a);this.t[tr].zi();this.dispatchEvent({type:a?"L":"M",PD:this.t[tr]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");C(a.t[tr],"c",function(){this.oa.gp(b)}.bind(a));a.oa.gp(b)}
function xr(a){null!=a.t[sr]&&a.t[sr].i();a.t[sr]=new U.qa;var b="";0<a.oa.ac.length?w(a.oa.ac[0].Kf,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=nl(a.oa.ac[0].bk);kk(a.t[sr],!1);a.t[sr].Lk(b);rk(a.t[sr],null);a.t[sr].n(a.oa.tc);a.t[sr].wa(!0);a.t[sr].cz("left","top");a.t[sr].qC("xiv-ui-viewboxdialogs-infodialog-content");a.t[sr].yH("xiv-ui-viewboxdialogs-infodialog-hovered");R(a.t[sr].a(),V.Xa.CSS.eJ);R(a.t[sr].Zi[0],V.Xa.CSS.fJ);a.t[sr].Jw("xiv-ui-viewboxdialogs-infodialog-title");
a.t[sr].mC("xiv-ui-viewboxdialogs-infodialog-closebutton");a.t[sr].nC("xiv-ui-viewboxdialogs-infodialog-closebutton-image");var c=a.oa.Dm("LEFT",V.Xa.CSS.qi,sr,"Info. Display",function(a){a="true"==a.getAttribute("checked");this.t[sr].wa(a);this.t[sr].cz("left","top");this.dispatchEvent({type:a?"L":"M",PD:this.t[sr]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");C(a.t[sr],"c",function(){this.oa.gp(c)}.bind(a))}
f.g=function(){delete this.oa;null!=this.t&&(w(this.t,function(a){$c(a);a.g();a.i()}.bind(this)),ub(this.t))};h("xiv.ui.ViewBoxDialogs.EventType",{pT:"L",oT:"M"});h("xiv.ui.ViewBoxDialogs.ID_PREFIX",V.Xa.ID_PREFIX);h("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",V.Xa.CSS_SUFFIX);h("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",vr);h("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",V.Xa.Ns);h("xiv.ui.ViewBoxDialogs.prototype.getDialogs",V.Xa.prototype.JM);h("xiv.ui.ViewBoxDialogs.prototype.getDialog",V.Xa.prototype.IM);
h("xiv.ui.ViewBoxDialogs.prototype.createToggleableDialog",V.Xa.prototype.xq);h("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",V.Xa.prototype.wL);h("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",V.Xa.prototype.yL);h("xiv.ui.ViewBoxDialogs.prototype.createDialogs",V.Xa.prototype.vD);h("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",V.Xa.prototype.qH);h("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",V.Xa.prototype.Yr);h("xiv.ui.ViewBoxDialogs.prototype.update",V.Xa.prototype.update);
h("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",V.Xa.prototype.ls);h("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",V.Xa.prototype.Xx);h("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",V.Xa.prototype.g);V.qb=function(a,b,c,d){ed.call(this);this.oa=a;this.Ma=b;this.wb=c;this.t=d;this.Ce={Ee:null,Tk:null};this.Zh={left:!1,kG:!1,right:!1};this.dn={Ev:{},VL:{},YQ:{},ZQ:{}};C(this.t,"L",this.yG.bind(this));a=document.body;this.Tb=new Wl;this.Tb.no(a);C(this.Tb,"key",this.Yj.bind(this));this.mh=Rh("div",{id:"mousefollower"});R(this.mh,this.constructor.CURSOR_CSS.nK);this.mh.innerHTML="Zoom In (drag up)<br>Zoom Out (drag down)<br>";Vh(this.oa.tc,this.mh)};m(V.qb,ed);
h("xiv.ui.ViewBoxInteractorHandler",V.qb);var yr="Crosshairs_"+t(),zr="Settings_"+t(),Ar="TwoDPan_"+t(),Br="TwoDZoom_"+t(),Cr={od:yr,zB:zr,Nn:Ar,On:Br};V.qb.CSS={qi:"xiv-ui-viewboxinteractorhandler-generic-toggle",dB:"xiv-ui-viewboxinteractorhandler-generic-dialog",eB:"xiv-ui-viewboxinteractorhandler-generic-zippytree"};
V.qb.CURSOR_CSS={nK:"xiv-ui-viewboxinteractorhandler-zoom-follower",fB:"xiv-ui-viewboxinteractorhandler-viewframe-grab",iB:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",gB:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",hB:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",LB:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",MB:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};V.qb.Le="Orientation_"+t();V.qb.Ep="_";f=V.qb.prototype;f.Tb=null;f.vp=null;f.uc=null;
f.OA=!1;f.Hz=!1;f.de={};f.xD=function(){this.GD();Dr(this);Er(this);this.CD();this.uD(!1);this.ED();this.FD();Fr(this)};function Gr(a){var b=a.oa.tc;w(a.constructor.CURSOR_CSS,function(a){qh(b,a)})}function Hr(a,b,c,d){b=b?R:qh;b(a.oa.tc,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.oa.tc,d)}function Ir(a){Hr(a,!0,a.constructor.CURSOR_CSS.fB,a.constructor.CURSOR_CSS.iB);Hr(a,!1,a.constructor.CURSOR_CSS.gB,a.constructor.CURSOR_CSS.hB)}
function Jr(a){Hr(a,!1,a.constructor.CURSOR_CSS.MB);Hr(a,!0,a.constructor.CURSOR_CSS.LB)}
f.gQ=function(a){this.to=a.target;this.Ce.Ee=this.Ce.Tk;this.Ce.Tk=a.Zy;if(null!=this.Ce.Ee){if(a.OH){if(!this.dA){this.dA=!0;this.CF();Kr(this);return}}else this.dA&&(this.RH(),Kr(this),this.tn(),this.dA=!1);(new sp(this.Ce.Tk[0],this.Ce.Tk[1])).add(new sp(this.Ce.Ee[0],this.Ce.Ee[1]));a=this.Ce.Tk[0]-this.Ce.Ee[0];var b=this.Ce.Tk[1]-this.Ce.Ee[1];this.mh.style.visibility="hidden";this.OA?(S(this.mh),Vh(this.to.Dj,this.mh),this.mh.style.visibility="visible",this.mh.style.left=this.Ce.Tk[0]+20+"px",
this.mh.style.top=this.Ce.Tk[1]+"px",Jr(this),this.Zh.left&&Lr(this,a,b)):this.Hz&&(Ir(this),this.Zh.left&&(Hr(this,!1,this.constructor.CURSOR_CSS.fB,this.constructor.CURSOR_CSS.iB),Hr(this,!0,this.constructor.CURSOR_CSS.gB,this.constructor.CURSOR_CSS.hB),this.to.Ea.Xu([-1*a,-1*b]),this.tn()))}};f.fQ=function(){Gr(this);this.to=null;this.mh.style.visibility="hidden"};f.tz=function(a){0==a.button?this.Zh.left=!0:1==a.button?this.wS.Zh.kG=!0:2==a.button&&(this.Zh.right=!0)};
f.uz=function(a){0==a.button?this.Zh.left=!1:1==a.button?this.wS.Zh.kG=!1:2==a.button&&(this.Zh.right=!1)};
f.Yj=function(a){window.console.log("On key:",a.keyCode,this.de);if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Mr(this,this.to,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.oa.fy(this.constructor.ne.Nn);"true"==a.getAttribute("checked")&&this.oa.we(this.constructor.ne.Nn);var b=this.oa.fy(this.constructor.ne.On);"true"==b.getAttribute("checked")&&this.oa.we(this.constructor.ne.On);window.console.log(a.getAttribute("checked"),b.getAttribute("checked"),"true"==a.checked,"true"==b.checked);
break;case 90:this.oa.we(this.constructor.ne.On);break;case 72:case 80:this.oa.we(this.constructor.ne.Nn);break;case 66:case 76:this.oa.we(this.de.levels);break;case 86:this.oa.we(this.de.volumes);break;case 77:this.oa.we(this.de.meshes);break;case 65:this.oa.we(this.de.annotations);break;case 67:this.oa.we(this.constructor.ne.od);break;case 83:this.oa.we(this.de[this.constructor.ne.zB]);break;case 191:a.shiftKey&&this.oa.we(tr);break;case 73:this.oa.we(sr)}};
function Lr(a,b,c){Gr(a);var d=function(){Jr(this);this.to.xp()}.bind(a),e=function(){Hr(this,!0,this.constructor.CURSOR_CSS.MB);Hr(this,!1,this.constructor.CURSOR_CSS.LB);this.to.yp()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Nr(a);a.tn()}f.tB=0;f.uB=0;f.$H=function(a){this.tB=a.clientX;this.uB=a.clientY;window.console.log("store mouse coords",this.tB,this.uB)};
function Fr(a){Or(a,function(a,c){this.dn.ZQ[c]=C(a.fc(),"mouseover",this.gQ.bind(this));var d=a.fc().td;this.dn.YQ[c]=C(d,"mouseout",this.fQ.bind(this));this.dn.VL[c]=C(d,"mousedown",this.tz.bind(this));this.dn.Ev[c]=C(d,"mouseup",this.uz.bind(this))}.bind(a))}function Mr(a,b,c){Or(a,function(a,b,g){g.Na.S(g.Na.$()+c)}.bind(a),b.Qc())}
function Or(a,b,c){if(null!=a.Ma){var d=a.wb.$x(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.Sq())};if(ka(c)){var g=a.Ma.Wt(c);if(null==g)throw Error("Invalid plane: ",g);e(a.Ma.Wt(c),c)}else w(a.Ma.rd,function(a,b){e(a,b)}.bind(a))}}
f.FD=function(){this.oa.Dm("LEFT",this.constructor.CSS.qi,this.constructor.ne.On,"2D Zoom",function(a){Gr(this);if(this.OA=a="true"==a.getAttribute("checked").toString())this.oa.FA(this.constructor.ne.Nn),Jr(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.oa.we(this.constructor.ne.On)};
f.ED=function(){this.oa.Dm("LEFT",this.constructor.CSS.qi,this.constructor.ne.Nn,"2D Pan",function(a){Gr(this);if(this.Hz=a="true"==a.getAttribute("checked").toString())Ir(this),this.oa.FA(this.constructor.ne.On)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.oa.we(this.constructor.ne.Nn)};
f.uD=function(a){this.oa.Dm("LEFT",this.constructor.CSS.qi,this.constructor.ne.od,"Toggle Crosshairs",function(a){this.lI("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.oa.we(this.constructor.ne.od)};
f.CD=function(){var a=this.constructor.ne.zB;this.de[a]=a+this.constructor.Ep+t();this.t.xq(this.de[a],this.constructor.CSS.dB,this.constructor.CSS.qi,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.uc[a]=new U.$b;this.uc[a].n();var b=this.uc[a].a();R(b,this.constructor.CSS.eB);this.t.t[this.de[a]].a().appendChild(b);this.uc[a].Nm();b=new V.b.pd;b.n();b.gi("Enable 3D Rendering");b.L.fh(!0);this.uc[a].Gg(b.a(),"3D Rendering");C(b,"o",function(a){this.Ma.AH("V",
a.checked)}.bind(this));return b};f.tn=function(){Or(this,function(a,b,c,d){Pr(this,b,d)}.bind(this))};
function Qr(a){null!=a.Ma&&(Or(a,function(a,c,d,e){var g=d.Na,k=d.kf,l=d.vh;d=d.od;g[this.constructor.Le]=c;k[this.constructor.Le]=c;l[this.constructor.Le]=c;d[this.constructor.Le]=c;Kr(this,!0);Rr(this,g,e);Pr(this,g[this.constructor.Le],e);Sr(this,g);null!=a.fc()&&(C(a.fc(),"I",function(){Nr(this)}.bind(this)),C(g,"q",function(a){Rr(this,a.target,e);Pr(this,a.target[this.constructor.Le],e);Sr(this,a.target)}.bind(this)),C(k,"input",function(a){Tr(this,a.target,e);this.tn()}.bind(this)),C(l,"input",
function(){a.fc().MH(l.$()/100);this.tn()}.bind(this)))}.bind(a)),a.Ma.rs())}
function Ur(a,b){var c=b.split(a.constructor.Ep)[0];a.uc[c].Be();w(a.vp[c],function(a){null!=a&&A(a,function(a){switch(c){case "levels":a instanceof V.b.vc?a.update():a.L.m();break;case "volumes":var d=b.split(this.constructor.Ep)[0];a instanceof V.b.Ne?(a.L.checked=a.Je[Wp]||!1,null==this.Hv&&(this.Hv=[]),-1==this.Hv.indexOf(a)&&this.Hv.push(a)):"Show Label Map"==a.Dc.innerHTML&&(a.Je[Vq.HAS_LABEL_MAP_KEY]?a.Je.cP.visible&&!a.L.vl()&&a.L.fh(!0):(S(a.a()),a.a().style.visibility="hidden",a.a().style.height=
"0px"),this.uc[d].Be());a.update()}}.bind(this))}.bind(a))}f.yG=function(a,b){null==a.QD&&null==b||Ur(this,null!=b?b:a.QD)};f.SC=function(){window.console.log("Applying auto window/level");var a,b={};A(this.vp.levels.all,function(c){levelMax=hist=null;a=c.Eo;folderStr="";A(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});c instanceof V.b.vc?b[folderStr].DO=c:-1<c.Dc.innerHTML.indexOf("Level Max")&&(b[folderStr].eP=c)}.bind(this));w(b,function(a){a.eP.L.S(a.DO.SE(V.b.vc.LEVEL_CUTOFF))})};
function Rr(a,b,c){if(null!=c){var d=b[a.constructor.Le],d="Y"==d||"Z"==d?b.Da()-b.$()-1:b.$()-1;c["index"+b[a.constructor.Le]]=d}}function Vr(a,b,c,d,e){var g=a.Ma.Wt(b).fc();a=a.wb.CE().Zx(b);b=null;null!=a&&(b=a[Lo]);null!=b&&("vertical"==c?b.KH(g.gF(d,e)):"horizontal"==c&&b.LH(g.NE(d,e)))}
function Pr(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Vr(a,"Y","vertical",b,!0);Vr(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Vr(a,"X","vertical",b,!1);Vr(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Vr(a,"X","horizontal",b,!1),Vr(a,"Y","horizontal",b,!1)}}function Sr(a,b){Or(a,function(a,b,e){a=e.kf;e=e.Na;a.Fe(e.Da());a.S(e.$())}.bind(a),b[a.constructor.Le])}function Nr(a){Or(a,function(a,c,d){d.vh&&a.fc()&&(a=a.fc().lF(),d.vh.$(),d.vh.S(Math.round(100*a)))}.bind(a))}
function Tr(a,b,c){null!=c&&Or(a,function(a,c,g){g.Na.S(b.$())}.bind(a),b[a.constructor.Le])}function Dr(a){Or(a,function(a,c,d){null!=d.Na&&d.Na.S(d.Na.Da()/2)}.bind(a))}
function Er(a){Or(a,function(a,c,d,e){if(null!=e[Vq.SLICE_TO_RAS_KEY]&&null!=d.Na){slider=d.Na;orientation=slider[this.constructor.Le];a=e.bW;e=e[Vq.SLICE_TO_RAS_KEY];var g;"X"==orientation?(g=a[1]-a[0],g=(e.MR[0]-a[0])/g):"Y"==orientation?(g=a[3]-a[2],g=(e.uL[1]-a[2])/g):"Z"==orientation&&(g=a[5]-a[4],g=(e.cL[2]-a[4])/g);slider.S(Math.round(slider.Da()*g)+1)}}.bind(a))}
function Kr(a,b){var c,d;Or(a,function(a,g,k,l){null!=k.Na&&(d=k.Na,c=d[this.constructor.Le],null!=l&&(!0===b&&(d.Fe(a.fc().XE()),d.Lf(1)),d.S(l["index"+c]+1)))})}f.CG=function(){Or(this,function(a,b,c,d){Tr(this,c.kf,d);Nr(this)}.bind(this));this.tn()};f.yA=function(a){var b=!1===a?0:1;Or(this,function(a,d,e){T.lg(e.Na.a(),200,b);T.lg(e.kf.a(),200,b);T.lg(e.od.li,200,b);T.lg(e.od.Vh,200,b);T.lg(e.vh.a(),200,b)}.bind(this))};f.CF=function(){this.yA(!1);this.t.ls(sr,!1)};
f.RH=function(){this.yA(!0);this.t.ls(sr,!0)};f.update=function(){this.wb.ss()};f.lI=function(a){var b=!0==a?"visible":"hidden";Or(this,function(a,d,e){null!=e.od&&(e.od.li.style.visibility=b,e.od.Vh.style.visibility=b)}.bind(this))};f.rI=function(){null!=this.wb&&null!=this.Ma&&Or(this,function(a,b,c,d){if(null!=c){var e=c.Na;c=c.kf;e[this.constructor.Le]=b;c[this.constructor.Le]=b;null!=a.fc()&&(Tr(this,c,d),e.m())}}.bind(this))};
f.fI=function(a){a.uH(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");w({Sagittal:{kj:dp,Mb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{kj:V.f.Sl,Mb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{kj:ep,Mb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{kj:cp,Mb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{kj:V.f.lb,Mb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{kj:V.f.lc,Mb:serverRoot+
"/images/viewer/xiv/ui/Layouts/four-up.png"},"2D Row":{kj:V.f.nc,Mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{kj:V.f.Kc,Mb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.uC(c,b.Mb);this.wb.sC(c,b.kj);"Four-Up"==c&&this.wb.tH(c)}.bind(this));C(a,"item_selected",this.ZP.bind(this))};f.ZP=function(a){this.wb.sn(a.title);null!=this.t&&null!=this.t.Xx()&&this.t.Xx().rH(a.target.Zm.src)};
function Wr(a,b){C(a.uc[b].v,"f",function(a){this.yG(a,this.de[b])}.bind(a))}function Xr(a,b){C(b,"o",function(a){A(this.Hv,function(b){var e=b.Je;b!==a.target?(b.L.checked=!1,e.visible=!1):(e.visible=!0,this.Ma.ZG(e))}.bind(this))}.bind(a))}function Yr(a,b){w(a.vp[b],function(a,d){ia(a)&&A(a,function(a){var c=a.Eo||[];"all"!==d&&0<c.length&&c.push(d);this.uc[b].Gg(a.a(),c);a instanceof V.b.Ne&&Xr(this,a)}.bind(this))}.bind(a))}
function Zr(a){a.uc={volumes:null,annotations:null,meshes:null,levels:null};a.de=xb(a.uc);w(a.uc,function(a,c){this.uc[c]=new U.$b;this.uc[c].n();this.de[c]=c+this.constructor.Ep+t();Yr(this,c);Wr(this,c)}.bind(a))}f.GD=function(){this.vp=this.Ma.Cg;Zr(this);$r(this);Qr(this)};
function $r(a){w(a.uc,function(a,c){var d=!1;w(this.vp[c],function(a){null!=a&&ia(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.t.xq(this.de[c],this.constructor.CSS.dB,this.constructor.CSS.qi,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+db(c)+".png",db(c),!1,!1);var e=this.uc[c].a();R(e,this.constructor.CSS.eB);this.t.t[this.de[c]].a().appendChild(e);1<this.uc[c].v.eF().length?this.uc[c].sq():this.uc[c].Nm()}}.bind(a))}
f.i=function(){V.qb.d.i.call(this);null!=this.Tb&&(window.console.log("disposing key handler"),this.Tb.i(),delete this.Tb);null!=this.de&&ub(this.de);delete this.de;null!=this.uc&&(w(this.uc,function(a){a.i()}),ub(this.uc));delete this.uc;ub(this.Ce);delete this.Ce;w(this.dn,function(a){w(a,function(a){Zc(a);delete a});ub(a)});ub(this.dn);delete this.dn;S(this.mh);delete this.mh;delete this.vp;delete this.OA;delete this.Hz;delete this.oa;delete this.Ma;delete this.wb;delete this.t};
h("xiv.ui.ViewBoxInteractorHandler.EventType",{hU:"N",OT:"O",UU:"P",qT:"Q"});h("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",Cr);h("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",V.qb.Le);h("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT",V.qb.Ep);h("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",V.qb.prototype.xD);h("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",V.qb.prototype.FD);h("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",V.qb.prototype.ED);
h("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",V.qb.prototype.uD);h("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",V.qb.prototype.CD);h("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",V.qb.prototype.tn);h("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",V.qb.prototype.SC);h("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",V.qb.prototype.CG);h("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",V.qb.prototype.yA);
h("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",V.qb.prototype.CF);h("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",V.qb.prototype.RH);h("xiv.ui.ViewBoxInteractorHandler.prototype.update",V.qb.prototype.update);h("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",V.qb.prototype.lI);h("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",V.qb.prototype.rI);h("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",V.qb.prototype.fI);
h("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",V.qb.prototype.GD);h("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",V.qb.prototype.i);kc&&uc(8);P.l.Lc=function(){P.l.Re.call(this);this.oe=[]};m(P.l.Lc,P.l.Re);h("gxnat.vis.ViewableTree",P.l.Lc);P.l.Lc.Sy=function(a,b,c){this.kR=a;this.oS=b;this.dM=c};h("gxnat.vis.ViewableTree.metadataCollection",P.l.Lc.Sy);f=P.l.Lc.prototype;f.av=null;f.op=null;f.Bo=null;f.orientation=null;f.Qc=function(){return this.orientation};f.Qr=function(a){this.av=a};f.Sr=function(a){this.op=a};f.Mr=function(a){this.Bo=a};f.eO=function(){return this.oe};
f.i=function(){P.l.Lc.d.i.call(this);null!=this.av&&(ub(this.av),delete this.fX);null!=this.op&&(ub(this.op),delete this.tX);null!=this.Bo&&(ub(this.Bo),delete this.zW);null!=this.oe&&(A(this.oe,function(a){a.i()}),delete this.oe);null!=this.iI&&Mb(this.iI);delete this.iI;delete this.orientation};h("gxnat.vis.ViewableTree.metadataCollection",P.l.Lc.Sy);h("gxnat.vis.ViewableTree.prototype.projectMetadata",P.l.Lc.prototype.av);h("gxnat.vis.ViewableTree.prototype.subjectMetadata",P.l.Lc.prototype.op);
h("gxnat.vis.ViewableTree.prototype.experimentMetadata",P.l.Lc.prototype.Bo);h("gxnat.vis.ViewableTree.prototype.orientation",P.l.Lc.prototype.orientation);h("gxnat.vis.ViewableTree.prototype.getOrientation",P.l.Lc.prototype.Qc);h("gxnat.vis.ViewableTree.prototype.setProjectMetadata",P.l.Lc.prototype.Qr);h("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",P.l.Lc.prototype.Sr);h("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",P.l.Lc.prototype.Mr);
h("gxnat.vis.ViewableTree.prototype.getViewableGroups",P.l.Lc.prototype.eO);h("gxnat.vis.ViewableTree.prototype.dispose",P.l.Lc.prototype.i);V.sd=function(){U.K.call(this);this.nn=Rh("div",{id:V.sd.ID_PREFIX+"_ProgBarHolder_"+t(),"class":V.sd.CSS.DJ});Vh(this.a(),this.nn);this.Mi=Rh("div",{id:V.sd.ID_PREFIX+"_LabelHolder_"+t(),"class":V.sd.CSS.jJ});Vh(this.a(),this.Mi);this.rk=new Kp;this.rk.jc(this.nn);R(Lh("progress-bar-thumb",this.nn),V.sd.CSS.cw)};m(V.sd,U.K);h("xiv.ui.ProgressBarPanel",V.sd);V.sd.ID_PREFIX="xiv.ui.ProgressBarPanel";V.sd.CSS_SUFFIX={cw:"thumb",DJ:"progbarholder",jJ:"labelholder"};f=V.sd.prototype;f.ir="";f.gA=!1;
f.gi=function(a){this.ir=a;this.Mi.innerHTML=this.ir};f.fA=function(a){this.gA=null!=a&&!1===a?!1:!0;this.S(this.rk.$())};f.S=function(a){this.rk.S(a);this.Mi.innerHTML=this.ir;this.gA&&(0<this.ir.length&&(this.Mi.innerHTML+=" "),this.Mi.innerHTML+=this.rk.$().toString()+"%");qh(this.nn,"progress-bar-horizontal")};f.$=function(){return this.rk.$()};
f.g=function(){V.sd.d.g.call(this);null!=this.rk&&(this.rk.i(),delete this.rk);null!=this.nn&&(S(this.nn),delete this.nn);null!=this.Mi&&(S(this.Mi),delete this.Mi);this.ir=this.gA=null};h("xiv.ui.ProgressBarPanel.EventType",{});h("xiv.ui.ProgressBarPanel.ID_PREFIX",V.sd.ID_PREFIX);h("xiv.ui.ProgressBarPanel.CSS_SUFFIX",V.sd.CSS_SUFFIX);h("xiv.ui.ProgressBarPanel.prototype.setLabel",V.sd.prototype.gi);h("xiv.ui.ProgressBarPanel.prototype.showValue",V.sd.prototype.fA);
h("xiv.ui.ProgressBarPanel.prototype.setValue",V.sd.prototype.S);h("xiv.ui.ProgressBarPanel.prototype.getValue",V.sd.prototype.$);h("xiv.ui.ProgressBarPanel.prototype.disposeInternal",V.sd.prototype.g);U.C=function(){U.$b.call(this)};m(U.C,U.$b);h("nrg.ui.ThumbnailGallery",U.C);U.C.ID_PREFIX="nrg.ui.ThumbnailGallery";U.C.CSS_SUFFIX={XI:"dialog",dw:"thumbnail",fw:"thumbnail-image",MU:"thumbnail-text"};U.C.Kp=t();U.C.prototype.zv=!1;U.C.prototype.jA=function(a){this.zv=a;null!=this.v&&this.zv&&this.v.Wz(U.C.vA)};U.C.prototype.n=function(a){U.C.d.n.call(this,a);as(this);this.zv&&this.v.Wz(U.C.vA)};
U.C.vA=function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Yh(a),d=b[U.C.Kp].toLowerCase(),e,g,k=c.length,l=0;l<k;l++)if(g=c[l],null!=g[U.C.Kp]&&(e=g[U.C.Kp].toLowerCase(),e=Na(d,e),0>e)){Xh(b,g);return}a.appendChild(b)};f=U.C.prototype;f.wq=function(a,b){var c=new U.q;sh(c.a(),oh(c.a()),this.Nl);sh(c.wg,oh(c.wg),this.wn);sh(c.ie,oh(c.ie),this.vn);c.Zz(a);c.Tr(b);return c};f.loop=function(a){w(this.Jc,function(b){a(b)})};f.Yz=function(a){this.loop(function(b){Vh(a,b.Og())})};
f.mo=function(a,b){qb(this.Jc,a)||(this.Jc=this.Jc?this.Jc:{},this.Jc[a.a().getAttribute("id")]=a,this.A.nq(a.Og()),C(this.A,"r",this.UP.bind(this)),a.a()[U.C.Kp]=a.dy().toLowerCase(),this.Gg(a.a(),b),this.Be(),C(a,"w",function(a){this.dispatchEvent({type:"w",q:a.target})}.bind(this)),C(a,"x",function(a){this.dispatchEvent({type:"x",q:a.target})}.bind(this)))};f.Sk=function(a,b,c){a=this.wq(a,b);this.mo(a,c);bs(this,"image");bs(this,"text");bs(this,"thumbnail");this.Be();return a};
f.Wr=function(){U.C.d.Wr.call(this);C(this.ei,"mouseover",this.$H.bind(this))};f.$H=function(a){this.az=a.clientX;this.bz=a.clientY};function cs(a){w(a.Jc,function(a){a.zr()});a.ds=null}f.UP=function(){var a=document.elementFromPoint(this.az,this.bz);(a=ni(a,null,U.q.Bd))?(a=a.id.replace(U.q.Bs,""),this.ds!==a&&(cs(this),this.ds=a,this.Jc[this.ds].Ru()),this.Jc[this.ds].Tz()):cs(this)};
function bs(a,b){var c,d=[],e="";for(e in a.Jc){switch(b){case "thumbnail":d=a.Nl;c=a.Jc[e].a();break;case "image":d=a.vn;c=a.Jc[e].ie;break;case "text":d=a.wn,c=a.Jc[e].wg}sh(c,oh(c),d)}}f.xC=function(a){null!=this.Nl||as(this);this.Nl.push(a);bs(this,"thumbnail")};f.AC=function(a){this.vn.push(a);bs(this,"image")};f.BC=function(a){this.wn.push(a);bs(this,"text")};f.m=function(a){a&&ll.pb(this.a(),a)};
function as(a){var b=new U.q;a.Nl=oh(b.a());a.Nl.push(U.C.CSS.dw);a.vn=oh(b.ie);a.vn.push(U.C.CSS.fw);a.wn=oh(b.wg);a.wn.push(U.C.CSS.DB);S(b.a());delete b}f.g=function(){U.C.d.g.call(this);delete this.zv;null!=this.az&&delete this.az;null!=this.bz&&delete this.bz;null!=this.Jc&&(U.Kt(this.Jc),delete this.Jc);null!=this.v&&($c(this.v),this.v.i(),delete this.v);null!=this.Nl&&(Mb(this.Nl),delete this.Nl);null!=this.vn&&(Mb(this.vn),delete this.vn);null!=this.wn&&(Mb(this.wn),delete this.wn);delete this.ds};
h("nrg.ui.ThumbnailGallery.ID_PREFIX",U.C.ID_PREFIX);h("nrg.ui.ThumbnailGallery.CSS_SUFFIX",U.C.CSS_SUFFIX);h("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",U.C.Kp);h("nrg.ui.ThumbnailGallery.thumbnailSorter",U.C.vA);h("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",U.C.prototype.jA);h("nrg.ui.ThumbnailGallery.prototype.render",U.C.prototype.n);h("nrg.ui.ThumbnailGallery.prototype.createThumbnail",U.C.prototype.wq);h("nrg.ui.ThumbnailGallery.prototype.loop",U.C.prototype.loop);
h("nrg.ui.ThumbnailGallery.prototype.setHoverParent",U.C.prototype.Yz);h("nrg.ui.ThumbnailGallery.prototype.addThumbnail",U.C.prototype.mo);h("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",U.C.prototype.Sk);h("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",U.C.prototype.Wr);h("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",U.C.prototype.xC);h("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",U.C.prototype.AC);
h("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",U.C.prototype.BC);h("nrg.ui.ThumbnailGallery.prototype.updateStyle",U.C.prototype.m);h("nrg.ui.ThumbnailGallery.prototype.disposeInternal",U.C.prototype.g);V.xc=function(){U.K.call(this)};m(V.xc,U.K);h("xiv.ui.ViewableGroupMenu",V.xc);V.xc.ID_PREFIX="xiv.ui.ViewableGroupMenu";V.xc.CSS_SUFFIX={As:"header",dw:"thumbnail",DB:"thumbnail-text",fw:"thumbnail-image",WJ:"thumbnailgallery",ys:"background"};f=V.xc.prototype;f.la=null;f.Hg=null;f.Jo=null;
f.n=function(){V.xc.d.n.call(this);this.Hg=Rh("div",{id:this.constructor.ID_PREFIX+"_Background_"+t()});R(this.Hg,this.constructor.CSS.ys);Vh(this.a(),this.Hg);this.Jo=Rh("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+t(),"class":V.xc.CSS.As});this.Jo.innerHTML="<b> Select View <b>";Vh(this.a(),this.Jo);null!=this.la||this.reset()};f.yM=function(){return this.Hg};f.show=function(){T.Gq(this.a(),ds.WS)};f.Sk=function(a,b){null!=this.la||this.reset();var c=this.la.Sk(a,b);es(this,c);return c};
f.No=function(){T.Pm(this.a(),500);S(this.a())};f.reset=function(){null!=this.la&&(this.la.i(),delete this.la);this.la=new U.C;this.la.jA(!0);this.la.n(this.a());R(this.la.a(),V.xc.CSS.WJ);this.la.xC(V.xc.CSS.dw);this.la.AC(V.xc.CSS.fw);this.la.BC(V.xc.CSS.DB)};function es(a,b){C(b,"y",function(){this.dispatchEvent({type:"R",gI:b})}.bind(a))}f.g=function(){V.xc.d.g.call(this);null!=this.Hg&&(S(this.Hg),delete this.Hg);null!=this.Jo&&(S(this.Jo),delete this.Jo);null!=this.la&&(this.la.i(),delete this.la)};
h("xiv.ui.ViewableGroupMenu.ID_PREFIX",V.xc.ID_PREFIX);h("xiv.ui.ViewableGroupMenu.EventType",{hV:"R"});h("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",V.xc.CSS_SUFFIX);h("xiv.ui.ViewableGroupMenu.prototype.render",V.xc.prototype.n);h("xiv.ui.ViewableGroupMenu.prototype.getBackground",V.xc.prototype.yM);h("xiv.ui.ViewableGroupMenu.prototype.show",V.xc.prototype.show);h("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",V.xc.prototype.Sk);h("xiv.ui.ViewableGroupMenu.prototype.hide",V.xc.prototype.No);
h("xiv.ui.ViewableGroupMenu.prototype.reset",V.xc.prototype.reset);h("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",V.xc.prototype.g);var fs;function gs(a,b,c,d,e){this.Am=a;this.gn=b;this.OC=c;this.UK=d;this.Br=e}gs.prototype.getName=function(){return this.gn};function hs(a){return!a.gn||"[object Object]"==a.Am}
function is(a){var b=[a.Am?js(a.Am)+".":"",a.gn?js(ks(a.gn)):"anonymous",js(a.UK),a.OC?" [as "+js(ks(a.OC))+"]":""];if(a.Br)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.Br.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',js(a.Br),"', '",c,"'); return false\">",js(a.Br),"</a>")}else b.push(js(a.Br));return b.join("")}
var ls=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,ms=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,ns=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
os=/^function ([a-zA-Z_$][\w$]*)/,ps=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function qs(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(os),d=d?d[1]:"",e=["("];if(b.arguments)for(var g=0;g<b.arguments.length;g++){var k=b.arguments[g];0<g&&e.push(", ");ka(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new gs("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function rs(a){var b=a.match(ls);if(b)return new gs(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var g="";0<=c&&c+1<d&&(g=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new gs("",e,"",d,g)}return(b=a.match(ms))?new gs("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(ns))?new gs(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(ps))?new gs("",b[1]||"","","",b[2]||
""):null}function ks(a){return fs?fs(a):a}function js(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function ss(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}h("setDeobfuscateFunctionName",function(a){fs=a});function ts(a,b){return a==b}function us(a,b){return a.toString()===b.toString()}var vs={String:ts,Number:ts,Boolean:ts,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:us,Function:us};function ws(a,b,c){return Math.abs(a-b)<=c}var xs={Number:ws};
function ys(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function zs(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+ys(a)+")");return b}function As(a,b){return b.length==a+1?b[0]:null}function Bs(a,b,c){return c.length==b+1?c[a]:c[a-1]}function Cs(a,b){b.length==a||b.length==a+1&&ka(b[0])||Ds(null,"Incorrect arguments passed to assert function")}
function Es(a,b){var c="Expected "+zs(a)+" but was "+zs(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var g=0;g<d&&a.charAt(a.length-g-1)==b.charAt(b.length-g-1);)g++;e+g>d&&(g=0);if(2<e||2<g)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(g-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function Fs(a,b){Cs(1,arguments);var c=As(1,arguments),d=Bs(1,1,arguments);la(d)||Ds(c,"Bad argument to assert(boolean)");d||Ds(c,"Call to assert(boolean) with false")}function Gs(a,b){Cs(1,arguments);var c=As(1,arguments),d=Bs(1,1,arguments);la(d)||Ds(c,"Bad argument to assertTrue(boolean)");d||Ds(c,"Call to assertTrue(boolean) with false")}function Hs(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments),g=Es(d,e);d===e||Ds(As(2,arguments),g)}
function Is(a,b){Cs(1,arguments);var c="Expected not to be "+zs(null);null!==Bs(1,1,arguments)||Ds(As(1,arguments),c)}function Js(a,b){Cs(1,arguments);var c="Expected not to be "+zs(void 0);void 0!==Bs(1,1,arguments)||Ds(As(1,arguments),c)}
function Ns(a,b,c){function d(a,b,c){for(var r=0;r<g.length;++r){var u=g[r]===a,v=k[r]===b;if(u||v){u&&v||e.push("Asymmetric cycle detected at "+c);return}}g.push(a);k.push(b);if(a!==b)if(r=ys(a),u=ys(b),r==u){var v="Array"==r,D=l(r,a,b);if(null!=D)""!=D&&e.push(c+": "+D);else if(v&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(D=c+(v?"[%s]":c?".%s":"%s"),a.__iterator__)na(a.Ao)?a.Ao(b)||e.push("equals() returned false for "+(c||
r)):a.gc?d(a.gc,b.gc,D.replace("%s","map_")):e.push("unable to check "+(c||r)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var B in a)v&&(B|0)==B||(B in b?d(a[B],b[B],D.replace("%s",B)):e.push("property "+B+" not present in actual "+(c||u)));for(B in b)v&&(B|0)==B||B in a||e.push("property "+B+" not present in expected "+(c||r));if(v)for(B=0;B<a.length;B++)d(a[B],b[B],D.replace("%s",String(B)))}}else e.push(c+" "+Es(a,b));g.pop();k.pop()}
var e=[],g=[],k=[],l=c||function(a,b,c){return(a=vs[a])?a(b,c)?"":Es(b,c):null};d(a,b,"");return 0==e.length?null:Es(a,b)+"\n   "+e.join("\n   ")}function Os(a,b,c){Cs(2,arguments);var d=As(2,arguments)?As(2,arguments):"",e=Ns(Bs(1,2,arguments),Bs(2,2,arguments));!e||Ds(d,e)}function Ps(a,b,c,d){Cs(3,arguments);var e=Bs(1,3,arguments),g=Bs(2,3,arguments),k=Bs(3,3,arguments);ws(e,g,k)||Ds(As(3,arguments),"Expected "+e+", but got "+g+" which was more than "+k+" away")}
function Qs(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function Rs(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function Ss(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function Ds(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new Ts(a,b);}
function Ts(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=ss();if(c){if(ia(c))for(var d=[],e=0;e<c.length;e++){var g=c[e],k=g.getFunctionName()||"unknown",l=g.getFileName(),g=l?l+":"+g.getLineNumber()+":"+g.getColumnNumber():"unknown";d.push(new gs("",k,"","",g))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(rs(c[e]));c=d}else c=qs();for(d=c.length-1;c[d]&&hs(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}g=[];for(k=e+1;k<=
d;k++)g.push("> "),c[k]?g.push(is(c[k])):g.push("(unknown)"),g.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,Ts):this.stack=Error().stack||""}m(Ts,Error);Ts.prototype.toString=function(){return this.message};h("fail",function(a){Ds("Call to fail()",a)});h("assert",Fs);
h("assertThrows",function(a,b){Cs(1,arguments);var c=Bs(1,1,arguments),d=As(1,arguments);"function"==typeof c||Ds(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&ka(e.stacktrace)&&ka(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}Ds(d,"No exception thrown from function passed to assertThrows")});
h("assertNotThrows",function(a,b){Cs(1,arguments);var c=As(1,arguments),d=Bs(1,1,arguments);"function"==typeof d||Ds(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",Ds(c,e.stack||e.stacktrace||e.toString())}});h("assertTrue",Gs);
h("assertFalse",function(a,b){Cs(1,arguments);var c=As(1,arguments),d=Bs(1,1,arguments);la(d)||Ds(c,"Bad argument to assertFalse(boolean)");!d||Ds(c,"Call to assertFalse(boolean) with true")});h("assertEquals",Hs);h("assertNotEquals",function(a,b,c){Cs(2,arguments);var d=Bs(2,2,arguments),e="Expected not to be "+zs(d);Bs(1,2,arguments)!==d||Ds(As(2,arguments),e)});h("assertNull",function(a,b){Cs(1,arguments);var c=Bs(1,1,arguments),d=Es(null,c);null===c||Ds(As(1,arguments),d)});
h("assertNotNull",Is);h("assertUndefined",function(a,b){Cs(1,arguments);var c=Bs(1,1,arguments),d=Es(void 0,c);void 0===c||Ds(As(1,arguments),d)});h("assertNotUndefined",Js);h("assertNotNullNorUndefined",function(a,b){Cs(1,arguments);Is.apply(null,arguments);Js.apply(null,arguments)});h("assertNonEmptyString",function(a,b){Cs(1,arguments);var c=Bs(1,1,arguments),d="Expected non-empty string but was "+zs(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||Ds(As(1,arguments),d)});
h("assertNaN",function(a,b){Cs(1,arguments);isNaN(Bs(1,1,arguments))||Ds(As(1,arguments),"Expected NaN")});h("assertNotNaN",function(a,b){Cs(1,arguments);!isNaN(Bs(1,1,arguments))||Ds(As(1,arguments),"Expected not NaN")});h("assertObjectEquals",Os);
h("assertObjectRoughlyEquals",function(a,b,c,d){Cs(3,arguments);var e=Bs(3,3,arguments),g=As(3,arguments)?As(3,arguments):"",k=Ns(Bs(1,3,arguments),Bs(2,3,arguments),function(a,b,c){return(a=xs[a])?a(b,c,e)?"":Es(b,c)+" which was more than "+e+" away":null});!k||Ds(g,k)});h("assertObjectNotEquals",function(a,b,c){Cs(2,arguments);var d=As(2,arguments)?As(2,arguments):"";Ns(Bs(1,2,arguments),Bs(2,2,arguments))||Ds(d,"Objects should not be equal")});
h("assertArrayEquals",function(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments),g=As(2,arguments)?As(2,arguments):"",k=ys(d);"Array"==k||Ds(g,"Expected an array for assertArrayEquals but found a "+k);k=ys(e);"Array"==k||Ds(g,"Expected an array for assertArrayEquals but found a "+k);Os(g,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
h("assertElementsEquals",function(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments),g=As(2,arguments)?As(2,arguments):"";if(d){Hs("length mismatch: "+g,d.length,e.length);for(var k=0;k<d.length;++k)Hs("mismatch at index "+k+": "+g,d[k],e[k])}else Fs(g,!e)});
h("assertElementsRoughlyEqual",function(a,b,c,d){Cs(3,arguments);var e=Bs(1,3,arguments),g=Bs(2,3,arguments),k=Bs(3,3,arguments),l=As(3,arguments)?As(3,arguments):"";if(e){Hs("length mismatch: "+l,e.length,g.length);for(var q=0;q<e.length;++q)Ps(l,e[q],g[q],k)}else Fs(l,!g)});
h("assertSameElements",function(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments),g=As(2,arguments);Gs("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ja(d)&&ja(e));d=Qs(d);e=Qs(e);d.length==e.length||Ds(g,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=Qs(d),l=0;l<e.length;l++){var q=Rs(k,e[l]);-1!=q||Ds(g,"Expected ["+d+"], got ["+e+"]");k.splice(q,1)}});
h("assertEvaluatesToTrue",function(a,b){Cs(1,arguments);Bs(1,1,arguments)||Ds(As(1,arguments),"Expected to evaluate to true")});h("assertEvaluatesToFalse",function(a,b){Cs(1,arguments);Bs(1,1,arguments)&&Ds(As(1,arguments),"Expected to evaluate to false")});h("assertHTMLEquals",function(a,b,c){Cs(2,arguments);var d=Bs(2,2,arguments),e=Ss(Bs(1,2,arguments)),d=Ss(d),g=Es(e,d);e===d||Ds(As(2,arguments),g)});
h("assertHashEquals",function(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments),g=As(2,arguments),k;for(k in d)k in e||Ds(g,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||Ds(g,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||Ds(g,"Actual hash had key "+k+" that was not expected")});h("assertRoughlyEquals",Ps);
h("assertContains",function(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments);-1!=Rs(e,d)||Ds(As(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});h("assertNotContains",function(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments);-1==Rs(e,d)||Ds(As(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
h("assertRegExp",function(a,b,c){Cs(2,arguments);var d=Bs(1,2,arguments),e=Bs(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||Ds(As(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});V.O=function(){U.K.call(this);this.ac=[];this.Qs={};this.Qd={RU:null,gw:null,Vl:null,II:null,YS:null,JI:null,LJ:null,XJ:null};this.Qd.gw=Rh("div",{id:V.O.ID_PREFIX+"_menu_top_left_"+t(),"class":V.O.CSS.tJ,viewbox:this.a().id});Vh(this.a(),this.Qd.gw);this.tc=Rh("div",{id:V.O.ID_PREFIX+"_ViewFrame_"+t(),"class":V.O.CSS.hK});Vh(this.a(),this.tc);this.Dd=new V.sd;Vh(this.tc,this.Dd.a());this.Dd.a().style.opacity=0;this.Dd.a().style.zIndex=1E5;Us(this.Dd);this.m()};m(V.O,U.K);h("xiv.ui.ViewBox",V.O);
var Vs={fK:"S",dK:"T",eK:"U"};V.O.ID_PREFIX="xiv.ui.ViewBox";V.O.CSS_SUFFIX={wT:"hidden",FU:"tabdragger",GU:"tabdragger-handle",jK:"viewlayoutmenu",tJ:"menu-top-left",sJ:"menu-left",iK:"viewlayouthandler",HU:"ziptabs",IU:"ziptab-bounds",hK:"viewframe",VA:"component-highlight",cK:"viewablegroupmenu"};V.O.MD={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};V.O.vJ=200;V.O.OJ=15;V.O.PJ=50;V.O.wJ=.2;f=V.O.prototype;f.hP="empty";f.jf=null;f.wb=null;f.Cd=null;f.Ma=null;f.Dd=null;
f.Qe=null;f.t=null;f.Yf=null;f.yF=!1;f.lN=function(){return this.Qd};f.fN=function(){return this.hP};f.fO=function(){return this.ac};f.bO=function(){return this.tc};f.dN=function(){return this.wb};f.dO=function(){return this.Qe};f.Qo=function(){R(this.tc,V.O.CSS.VA)};f.ps=function(){qh(this.tc,V.O.CSS.VA)};f.TN=function(){return this.aj};f.qL=function(){this.aj=void 0};f.TL=function(a){this.Ex=this.Ex?this.Ex:[];this.Ex.push(a)};f.sn=function(a){this.Cd.Rr(a)};
f.nQ=function(){this.Dd.S(0);this.Dd.fA(!0);Ws(this.Dd,0);this.Qo()};function Xs(a,b){a.Dd.gi("");a.Dd.fA(!0);a.Dd.S(100*b)}f.vz=function(a){this.Qo();Xs(this,a.value)};V.O.UI=function(){};function Ys(a,b,c){Wf(function(){Us(this.Dd,500,function(){this.m();null!=c&&c()}.bind(this))}.bind(a),ma(b)?b:1E3)}f=V.O.prototype;
f.Su=function(){Zs(this,!1);A(Kh("xtk-progress-bar"),function(a){a.visibility="hidden"});null!=this.ac[0].Qc()&&this.sn(this.ac[0].Qc());this.t.vD();$s(this);this.Yf.xD();this.Yf.SC();Ys(this,800,function(){this.Dd.S(0);this.m();this.Qu();this.dispatchEvent("T");this.ps()}.bind(this))};f.Qu=function(){this.Ma&&this.Ma.m();null!=this.Yf&&this.Yf.update();null!=this.Ma&&this.Yf.CG()};
function at(a,b){a.Qe.reset();ub(a.Qs);Lb(a.ac,b)||a.ac.push(b);1==a.ac.length&&a.sn(V.O.MD[b.Aj]);var c=b.oe,d=null;1<c.length?(A(c,function(a,b){d=this.Qe.Sk(a.qp,a.ng()||b);this.Qs[pa(d)]=a}.bind(a)),Ws(a.Qe,400)):a.load(c[0],!1)}f.Yr=function(){this.t.Yr()};f.bx=function(a){return null!=this.aj?(this.Yr(),this.t.qH(a),!0):!1};
f.load=function(a,b){this.dispatchEvent("S");if(!this.bx(function(){this.aj=void 0;this.load(a,b)}.bind(this)))if(null!=a){if(b=null!=b?b:!0)bt(this),this.Qd.Vl=Rh("div",{id:V.O.ID_PREFIX+"_menu_left_"+t(),"class":V.O.CSS.sJ,viewbox:this.a().id}),this.Qd.Vl.style.opacity=0,Vh(this.a(),this.Qd.Vl),this.Cd=new dn,this.um("LEFT",this.Cd.a()),R(this.Cd.a(),V.O.CSS.jK),this.Cd.eG(!0),this.Cd.fG(!0),this.Cd.a().style.opacity=0,this.Cd.pg.style.opacity=0,this.tc.appendChild(this.Cd.pg),this.t=new V.Xa(this),
this.wb=new fp,this.wb.a().style.opacity=0,Vh(this.tc,this.wb.a()),R(this.wb.a(),V.O.CSS.iK),C(this.wb,"v",this.Qu.bind(this)),C(this.wb,"s",this.rz.bind(this)),C(this.wb,"u",this.sz.bind(this)),C(this.wb,"t",this.qz.bind(this)),ct(this),dt(this),this.Yf=new V.qb(this,this.Ma,this.wb,this.t),this.Yf.fI(this.Cd),this.yF=!0;Us(this.Qe,400);Ws(this.Dd,0);if(a instanceof P.l.Lc)at(this,a);else{var c;w(this.Ma.rd,function(a,b){(c=this.wb.DE(b))&&a.Ja(c.a())}.bind(this));Xc(this.Ma,"z",this.nQ.bind(this));
Xc(this.Ma,"B",this.Su.bind(this));C(this.Ma,"A",this.vz.bind(this));Zs(this,!0);"scans"==a.Aj.toLowerCase()?et(this,a):(this.Ma.n(a),this.aj=(new Date).getTime())}}else ft(this,"The data set is empty!")};function et(a,b){Ws(a.Dd,0);Xs(a,0);var c=a.ac[a.ac.length-1].fF();nq(b.Eg[0].Hi()[0].split("/files/")[0]+"/files",function(a){b.Eg[0].kH(a);this.Ma.n(b);this.aj=(new Date).getTime()}.bind(a),function(a){this.Qo();Xs(this,a.loaded/c)}.bind(a))}
function Zs(a,b){window.onerror=!0===b?function(a){ft(this,a)}.bind(a):void 0}function ft(a,b){a.ps();Ys(a);Zs(a,!1);bt(a);b=b.replace("Uncaught Error: ","")||"A render error occured :(<br>";a.dispatchEvent({type:Vs.QU,message:b});var c=new U.qd;c.kC();c.lC();var d=c.rt();R(d,U.qd.CSS.vB);d.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.Lk(b||"");c.n(a.tc);c.a().style.opacity=0;c.a().style.zIndex=1E3;T.Hq(c.a(),ds.XS)}
f.rz=function(a){w(this.Ma.rd,function(b,c){null!=a.BA[c]&&(b.rn(a.BA[c]),b.m())})};f.sz=function(){w(this.Ma.rd,function(a){a.m()});this.Yf.update()};f.qz=function(a){var b=a.frames;w(this.Ma.rd,function(a,d){null!=b[d]&&(a.rn(b[d].a()),a.m())}.bind(this));this.Yf.update()};function $s(a){var b=0,b=ma(b)?b:500,c=[];A([a.Qd.Vl,a.Cd.a(),a.wb.a()],function(a){c.push(T.Rx(a,{opacity:0},{opacity:1},b))});T.Iz(c,null,null,void 0)}
function Us(a,b,c){if(null!=a){b=ma(b)&&0<=b?b:0;var d=function(){a.a().style.visibility="hidden";a.a().style.zIndex="-1";c&&c()};"hidden"==a.a().style.visibility||0==b?d():T.Pm(a.a(),b,d)}}function Ws(a,b){b=ma(b)&&0<=b?b:0;a.a().style.opacity="0";a.a().style.zIndex="1000";a.a().style.visibility="visible";0==b?a.a().style.opacity="1":T.Gq(a.a(),b,function(){})}
f.um=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Qd.gw;break;case "LEFT":d=this.Qd.Vl;break;case "BOTTOM_LEFT":d=this.Qd.II;break;case "TOP_RIGHT":d=this.Qd.XJ;break;case "RIGHT":d=this.Qd.LJ;break;case "BOTTOM_RIGHT":d=this.Qd.JI}ma(c)?d.insertBefore(b,d.childNodes[c]):Vh(d,b)};
f.gp=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?R(a,a.getAttribute(V.Xa.Ns)):qh(a,a.getAttribute(V.Xa.Ns));null!=b&&b(a)};f.kI=function(a){return"true"==this.jf[a].getAttribute("checked").toString()};f.fy=function(a){return this.jf[a]};f.we=function(a){Jl(this.jf[a])};f.FA=function(a){ia(a)||(a=[a]);A(a,function(a){null!=this.jf[a]&&this.kI(a)&&Jl(this.jf[a])}.bind(this))};
f.Dm=function(a,b,c,d,e,g){var k=b+"-on",l=Rh("img",b);l.id=zj(this)+".IconButton_";l.title=d;null!=g&&(l.src=g);l.setAttribute("checked","true");l.setAttribute(V.Xa.Ns,b+"-on");R(l,k);ll.pb(l,{cursor:"pointer"});C(l,"click",function(){this.gp(l,e)}.bind(this));this.um(a,l);if(null==this.jf)this.jf={};else if(null!=this.jf[c])throw Error("Invalid identifier for toggle button.  In use.");return this.jf[c]=l};
function dt(a){a.Qe=new V.xc;a.Qe.n(a.tc);Vh(a.tc,a.Qe.a());Vh(a.tc,a.Qe.Hg);R(a.Qe.a(),V.O.CSS.cK);C(a.Qe,"R",function(a){this.load(this.Qs[pa(a.gI)],!1)}.bind(a));Us(a.Qe)}f.VN=function(){return this.jf};function ct(a){a.Ma=new Vq;C(a.Ma,"H",function(a){ft(this,a.message)}.bind(a))}
f.m=function(a){V.O.d.m.call(this,a);null!=this.wb&&this.wb.m();this.Ma&&this.Ma.m();null!=this.Cd&&(a=Pi(this.tc),this.Cd.oH(-100,a.height/2-130),this.Cd.FH(0,a.height/2-130));null!=this.t&&this.t.update();null!=this.Yf&&this.Yf.rI()};
function bt(a){ub(a.Qs);Mb(a.ac);null!=a.wb&&($c(a.wb),Fc(a.wb.i()),delete a.wb);null!=a.Cd&&($c(a.Cd),a.Cd.i(),delete a.Cd);null!=a.Ma&&(a.Ma.i(),delete a.Ma);null!=a.Qe&&(a.Qe.i(),delete a.Qe);null!=a.t&&a.t.g();null!=a.Yf&&a.Yf.i();null!=a.jf&&(S(a.Qd.Vl),delete a.Qd.Vl,w(a.jf,function(a){$c(a);S(a)}),Mb(a.jf),delete a.jf)}
f.g=function(){V.O.d.g.call(this);bt(this);null!=this.Dd&&(this.Dd.i(),delete this.Dd);S(this.tc);$c(this.tc);delete this.tc;w(this.Qd,function(a,b){S(a);delete this.Qd[b]}.bind(this));delete this.Qd;delete this.uV;delete this.yF};h("xiv.ui.ViewBox.EventType",Vs);h("xiv.ui.ViewBox.ID_PREFIX",V.O.ID_PREFIX);h("xiv.ui.ViewBox.CSS_SUFFIX",V.O.CSS_SUFFIX);h("xiv.ui.ViewBox.defaultLayout",V.O.MD);h("xiv.ui.ViewBox.MIN_HOLDER_HEIGHT",V.O.vJ);h("xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT",V.O.OJ);
h("xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH",V.O.PJ);h("xiv.ui.ViewBox.MIN_TAB_H_PCT",V.O.wJ);h("xiv.ui.ViewBox.ControllersSet",V.O.UI);h("xiv.ui.ViewBox.prototype.getMenus",V.O.prototype.lN);h("xiv.ui.ViewBox.prototype.getLoadState",V.O.prototype.fN);h("xiv.ui.ViewBox.prototype.getViewableTrees",V.O.prototype.fO);h("xiv.ui.ViewBox.prototype.getViewFrame",V.O.prototype.bO);h("xiv.ui.ViewBox.prototype.getLayoutHandler",V.O.prototype.dN);h("xiv.ui.ViewBox.prototype.getViewableGroupMenu",V.O.prototype.dO);
h("xiv.ui.ViewBox.prototype.highlight",V.O.prototype.Qo);h("xiv.ui.ViewBox.prototype.unhighlight",V.O.prototype.ps);h("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",V.O.prototype.TN);h("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",V.O.prototype.qL);h("xiv.ui.ViewBox.prototype.doNotHide",V.O.prototype.TL);h("xiv.ui.ViewBox.prototype.setLayout",V.O.prototype.sn);h("xiv.ui.ViewBox.prototype.showInUseDialog",V.O.prototype.Yr);h("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",V.O.prototype.bx);
h("xiv.ui.ViewBox.prototype.load",V.O.prototype.load);h("xiv.ui.ViewBox.prototype.addToMenu",V.O.prototype.um);h("xiv.ui.ViewBox.prototype.onToggleButtonClicked",V.O.prototype.gp);h("xiv.ui.ViewBox.prototype.toggleButtonChecked",V.O.prototype.kI);h("xiv.ui.ViewBox.prototype.getToggleButton",V.O.prototype.fy);h("xiv.ui.ViewBox.prototype.fireToggleButton",V.O.prototype.we);h("xiv.ui.ViewBox.prototype.untoggle",V.O.prototype.FA);h("xiv.ui.ViewBox.prototype.createToggleButton",V.O.prototype.Dm);
h("xiv.ui.ViewBox.prototype.getToggleButtons",V.O.prototype.VN);h("xiv.ui.ViewBox.prototype.updateStyle",V.O.prototype.m);h("xiv.ui.ViewBox.prototype.disposeInternal",V.O.prototype.g);function gt(){Bl.call(this)}m(gt,Bl);gt.prototype.tm=function(a,b){var c=new Hl(a,b);c.Or(this);this.fr.push(c);this.tl&&Cl(this,c)};V.aa=function(){U.K.call(this)};m(V.aa,U.K);h("xiv.ui.ViewBoxHandler",V.aa);V.aa.CSS_SUFFIX={aJ:"handle",gK:"viewboxdragclone",pk:"closebutton",RA:"addrowbutton",QA:"addcolumnbutton"};V.aa.lj="viewboxid";V.aa.ID_PREFIX="xiv.ui.ViewBoxHandler";f=V.aa.prototype;f.Wv=5;f.rB=5;f.Pn=document.body;f.xl=function(a,b){this.dispatchEvent({type:"Y",uG:a,QK:b})};f.LR=function(){return this.J.length};f.Mq=function(){var a=[];A(this.J,function(b,c){a.push([]);A(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.J&&A(this.J,function(b,c){A(b,function(d,e){a(d,c,e,this.J.length,b.length)}.bind(this))}.bind(this))};f.ty=function(a,b){this.J||(this.J=[[]]);var c=0,d=[],e;if(null!=a)c=ht(this,a),this.J[c.ju].length<this.rB&&(d.push(it(this)),Sb(this.J[c.ju],c.aP+1,0,d[0]));else{d=[];e=this.J.length?this.J.length:1;for(c=0;c<e;c++)d.push(it(this));0===this.J.length?this.J.push([d[0]]):A(this.J,function(a,b){a.push(d[b])})}this.xl(d,void 0===b?!0:b);jt(this)};
f.zR=function(a){this.J&&(a=void 0===a?!0:a,this.J[0]&&1<this.J[0].length&&A(this.J,function(a){var c=a.length-1;kt(this,a[c]);a.splice(c,1)}.bind(this)),this.xl(null,a),jt(this))};function ht(a,b){for(var c=0,d=0,e=a.J.length,g=0,c=0;c<e;c++)for(d=0,g=a.J[c].length;d<g;d++)if(b===a.J[c][d])return{ju:c,aP:d}}
f.insertRow=function(a,b){this.J||(this.J=[[]]);var c=[],d,e;if(null!=a){var g=ht(this,a),c=[];e=this.J[g.ju].length;if(this.J.length<this.Wv){for(d=0;d<e;d++)c.push(it(this));Sb(this.J,g.ju+1,0,c)}}else if(e=this.J[0]&&this.J[0].length?this.J[0].length:1,this.J.length<this.Wv){for(d=0;d<e;d++)c.push(it(this));this.J.push(c)}this.xl(c,void 0===b?!0:b);jt(this)};
f.CR=function(a){this.J&&(a=void 0===a?!0:a,1<this.J.length&&(A(this.J[this.J.length-1],function(a){kt(this,a)}.bind(this)),this.J.splice(this.J.length-1,1)),this.xl(null,a),jt(this))};f.$t=function(a){for(var b=0,c=0,d=this.J.length,e=0,b=0;b<d;b++)for(c=0,e=this.J[b].length;c<e;c++)if(a===this.J[b][c].a())return this.J[b][c]};f.$N=function(a,b){return this.J[a][b].a()};f.YN=function(a,b){return this.J[a][b]};f.iF=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.hF=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.JH=function(a){this.Pn=a};
function it(a){var b=new V.O;Vh(a.Pn,b.a());lt(a,b);var c=Rh("img",{id:V.aa.ID_PREFIX+"_dragHandle_"+t(),"class":V.aa.CSS.aJ});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute(V.aa.lj,b.a().id);b.um("TOP_LEFT",c,1);a.Yk||(a.Yk={});a.Yk[b.a().id]=c;c.title="Drag and drop view box to swap.";mt(a,b);nt(a,b);C(b,"T",a.Bz.bind(a));C(b,"S",a.Cz.bind(a));C(b,"U",a.AQ.bind(a));return b}
function nt(a,b){var c=Rh("img",{id:V.aa.ID_PREFIX+"_CloseButton_"+t(),"class":V.aa.CSS.QA,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});ll.Fl(c,V.aa.CSS.QA+"-hovered");C(c,"click",function(){this.ty(b)}.bind(a));c.setAttribute(V.aa.lj,b.a().id);b.um("TOP_LEFT",c,1);a.pC||(a.pC={});a.pC[b.a().id]=c;c.title="Add ViewBox Column."}
function mt(a,b){var c=Rh("img",{id:V.aa.ID_PREFIX+"_CloseButton_"+t(),"class":V.aa.CSS.RA,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});ll.Fl(c,V.aa.CSS.RA+"-hovered");C(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute(V.aa.lj,b.a().id);b.um("TOP_LEFT",c,1);a.wC||(a.wC={});a.wC[b.a().id]=c;c.title="Close ViewBox."}
function lt(a,b){var c=Rh("img",{id:V.aa.ID_PREFIX+"_CloseButton_"+t(),"class":V.aa.CSS.pk,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});ll.Fl(c,V.aa.CSS.pk+"-hovered");C(c,"click",function(){ot(this,b)}.bind(a));c.setAttribute(V.aa.lj,b.a().id);b.um("TOP_LEFT",c,1);a.rq||(a.rq={});a.rq[b.a().id]=c;c.title="Close ViewBox."}f.Bz=function(a){this.dispatchEvent({type:"W",O:a.target})};f.iw=function(a,b){this.loop(function(c){Lb(c.ac,a)&&b(c)})};
f.Cz=function(a){this.dispatchEvent({type:"V",O:a.target})};f.AQ=function(a){this.dispatchEvent({type:"X",O:a.target})};function kt(a,b){T.lg(b.a(),150,0);S(a.Yk[b.a().id]);S(a.rq[b.a().id]);b.i()}function pt(a,b){var c=[],d;kt(a,b);A(a.J,function(a){d=[];A(a,function(a){a.Gm||(window.console.log(a.a()),d.push(a))}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.J=c;a.xl(null,!0);jt(a)}function ot(a,b){1!=a.xG()&&(b.bx(function(){pt(this,b)}.bind(a))||pt(a,b))}
f.wy=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.dI=function(a,b){for(var c,d,e,g,k=0,l=0,q=this.J.length,k=0;k<q;k++)for(var p=this.J[k].length,l=0;l<p;l++){var s=this.J[k][l];if(this.wy(s,a)){c=k;d=l;break}if(this.wy(s,b)){e=k;g=l;break}}ma(c)&&ma(e)&&(k=this.J[c][d],this.J[c][d]=this.J[e][g],this.J[e][g]=k,k=Pi(this.J[c][d].a()),l=Pi(this.J[e][g].a()),Mi(this.J[e][g].a(),k),Mi(this.J[c][d].a(),l),this.xl())};f.xG=function(){var a=0;this.loop(function(){a++});return a};
f.ZN=function(a){for(var b=0,c=0,d=this.J.length,e=0,g=e=0,b=0;b<d;b++)for(c=0,e=this.J[b].length;c<e;c++)if(this.J[b][c]===a)return e=b+1===this.J.length,g=c+1===this.J[b].length,e&&g?this.J[0][0]:e&&!g?this.J[0][c+1]:!e&&g?this.J[b+1][0]:this.J[b+1][c+1]};f.LE=function(){var a;this.loop(function(b){null!=a||null!=b.aj||(a=b)}.bind(this));if(null!=a)return a;var b=this.iF();ia(b)?b.sort(function(a,b){return a.aj<b.aj?-1:a.aj>b.aj?1:0}):b=[b];return b[0]};
f.fx=function(){this.zf&&(Dl(this.zf),Dl(this.Gj),delete this.zf,delete this.Gj)};function qt(a){a.loop(function(a){null!=a.a()&&(this.zf.tm(this.Yk[a.a().id]),this.Gj.tm(a.a()))}.bind(a))}function jt(a){a.fx();a.zf=new gt;a.Gj=new gt;qt(a);var b=a.zf,c=a.Gj;b.uA.push(c);c.ru=!0;b.qu=!0;a.zf.Ja();a.Gj.Ja();a.zf.nx=a.ox.bind(a);C(a.zf,"dragstart",a.PP.bind(a));C(a.zf,"dragover",a.nz.bind(a));C(a.zf,"dragend",a.mz.bind(a))}f.ox=function(a){return rt(Hh(a.getAttribute(V.aa.lj)))};
f.PP=function(){this.th={};this.loop(function(a){this.th[a.a().id]={absolute:ll.qt(a.a()),relative:ll.Ax(a.a())};this.Yk[a.a().id].style.visibility="hidden"}.bind(this))};function rt(a){var b=document.body;a=a.cloneNode(!1);a.className=V.aa.CSS.gK;b&&b.appendChild(a);return a}
f.nz=function(a){if(a.yo.element.id!==a.Mt.Uk.getAttribute(V.aa.lj)){var b=Hh(a.Mt.Uk.getAttribute(V.aa.lj));a=Hh(a.yo.element.id);this.dI(b,a);var c=this.th,d=new il,e=c[b.id].relative,c=c[a.id].relative;d.add(new Yk(b,[b.offsetLeft,b.offsetTop],[c.left,c.top],300,ml));d.add(new Yk(a,[a.offsetLeft,a.offsetTop],[e.left,e.top],300,ml));d.play();d=this.th[b.id];this.th[b.id]=this.th[a.id];this.th[a.id]=d}};
f.mz=function(a){var b=a.Mt.kb.Im;a=Hh(a.Mt.Uk.getAttribute(V.aa.lj));a=ll.qt(a);var c=rt(b);Vh(this.Pn.parentNode?this.Pn.parentNode:this.Pn,c);b=ll.qt(b);ll.pb(c,{top:b.top,left:b.left,"z-index":1E4});st(c,a).play();tt(this)};function st(a,b){var c=new il;c.add(new Yk(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,ml));C(c,"end",function(){S(a)});return c}function tt(a){a.loop(function(a){this.Yk[a.a().id].style.visibility="visible"}.bind(a))}
f.g=function(){V.aa.d.g.call(this);this.loop(function(a){$c(a);S(a.a());a.i()}.bind(this));A(this.J,function(a){Mb(a)});Mb(this.J);delete this.J;U.Cx(this.Yk);delete this.Yk;U.Cx(this.rq);delete this.rq;w(this.th,function(a,b){ub(this.th[b]);delete this.th[b]}.bind(this));ub(this.th);delete this.th;null!=this.zf&&($c(this.zf),this.zf.i());delete this.zf;null!=this.Gj&&($c(this.Gj),this.Gj.i());delete this.Gj;delete this.Pn};h("xiv.ui.ViewBoxHandler.CSS_SUFFIX",V.aa.CSS_SUFFIX);
h("xiv.ui.ViewBoxHandler.EventType",{fK:"V",dK:"W",eK:"X",gV:"Y"});h("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR",V.aa.lj);h("xiv.ui.ViewBoxHandler.ID_PREFIX",V.aa.ID_PREFIX);h("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",V.aa.prototype.Wv);h("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",V.aa.prototype.rB);h("xiv.ui.ViewBoxHandler.prototype.rowCount",V.aa.prototype.LR);h("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",V.aa.prototype.Mq);h("xiv.ui.ViewBoxHandler.prototype.loop",V.aa.prototype.loop);
h("xiv.ui.ViewBoxHandler.prototype.insertColumn",V.aa.prototype.ty);h("xiv.ui.ViewBoxHandler.prototype.removeColumn",V.aa.prototype.zR);h("xiv.ui.ViewBoxHandler.prototype.insertRow",V.aa.prototype.insertRow);h("xiv.ui.ViewBoxHandler.prototype.removeRow",V.aa.prototype.CR);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",V.aa.prototype.$t);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",V.aa.prototype.$N);h("xiv.ui.ViewBoxHandler.prototype.getViewBox",V.aa.prototype.YN);
h("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",V.aa.prototype.iF);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",V.aa.prototype.hF);h("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",V.aa.prototype.JH);h("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",V.aa.prototype.iw);h("xiv.ui.ViewBoxHandler.prototype.isMatch",V.aa.prototype.wy);h("xiv.ui.ViewBoxHandler.prototype.swap",V.aa.prototype.dI);h("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",V.aa.prototype.xG);
h("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",V.aa.prototype.ZN);h("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",V.aa.prototype.LE);h("xiv.ui.ViewBoxHandler.prototype.disposeInternal",V.aa.prototype.g);function V(){}h("xiv.ui",V);V.q=function(a){U.q.call(this);this.jH(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.GA.bind(this));this.uh=a;ut(this);this.vq()};m(V.q,U.q);h("xiv.ui.Thumbnail",V.q);V.q.ID_PREFIX="xiv.ui.Thumbnail";V.q.CSS_SUFFIX={};V.q.prototype.GA=function(){var a=Ih("img",U.q.CSS.Cs,this.Og()),a=a[0];a.src=this.ie.src};V.q.prototype.vq=function(){V.q.d.vq.call(this);R(this.Og(),V.q.En)};
function ut(a){var b="",c=a.uh.Kf;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=a.uh.bk)var d=a.uh.bk.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");A(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.Tr(e)}V.q.prototype.cO=function(){return this.uh};V.q.prototype.g=function(){V.q.d.g.call(this);this.uh.i();delete this.uh};h("xiv.ui.Thumbnail.ID_PREFIX",V.q.ID_PREFIX);
h("xiv.ui.Thumbnail.CSS_SUFFIX",V.q.CSS_SUFFIX);h("xiv.ui.Thumbnail.prototype.updateHoverable",V.q.prototype.GA);h("xiv.ui.Thumbnail.prototype.createHoverable",V.q.prototype.vq);h("xiv.ui.Thumbnail.prototype.getViewable",V.q.prototype.cO);h("xiv.ui.Thumbnail.prototype.disposeInternal",V.q.prototype.g);V.C=function(){U.C.call(this);this.kh=new gt;this.ik=new gt;this.kh.nx=this.ox.bind(this);C(this.kh,"dragover",this.nz.bind(this));C(this.kh,"dragend",this.mz.bind(this));C(this.kh,"dragout",this.OP.bind(this));C(this.ik,"drop",this.QP.bind(this));var a=this.kh,b=this.ik;a.uA.push(b);b.ru=!0;a.qu=!0;this.ik.Ja();this.kh.Ja()};m(V.C,U.C);h("xiv.ui.ThumbnailGallery",V.C);V.C.ID_PREFIX="xiv.ui.ThumbnailGallery";V.C.CSS_SUFFIX={ew:"thumbnail-dragging"};V.C.zp=300;V.C.Fp="THUMBNAIL_DRAGGER_"+t();
V.C.YI=V.C.Fp+"_FADER"+t();f=V.C.prototype;f.kh=null;f.ik=null;f.Sk=function(a,b){var c=this.wq(a);this.mo(c,b);return c};f.wq=function(a){var b=new V.q(a);C(b,"y",function(){this.dispatchEvent({type:"ca",q:b})}.bind(this));return b};f.mo=function(a,b){V.C.d.mo.call(this,a,b);var c=a.Og();c&&this.kh.tm(c)};f.lD=function(){Dl(this.ik)};f.yC=function(a){this.ik.tm(a)};f.zC=function(a){A(a,function(a){this.yC(a)}.bind(this))};f.RN=function(a){return this.Jc[a.id]};
f.fx=function(){null!=this.kh&&(Dl(this.kh),this.kh.i());null!=this.ik&&(Dl(this.ik),this.ik.i())};f.ox=function(a){a=ni(a,"div",V.q.Bd).id.replace(U.q.Bs,"");if(a in this.Jc)return this.Jc[a].setActive(!0,!0),a=this.Jc[a].a().cloneNode(!0),a.setAttribute("id",V.C.Fp+a.id),R(a,V.C.CSS.ew),a};f.nz=function(a){this.dispatchEvent({type:"aa",wA:a.yo.element})};f.OP=function(a){this.dispatchEvent({type:"ba",wA:a.yo.element})};
f.mz=function(){var a=Kh(V.C.CSS.ew);A(a,function(a){T.Pm(a,V.C.zp,function(){S(a)})});null!=a[0]&&this.Jc[a[0].id.replace(V.C.Fp,"")].setActive(!1,!0)};f.QP=function(a){var b=Lh(V.C.CSS.ew);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);S(b);a.yo.element&&this.dispatchEvent({type:"da",q:this.Jc[b.id.replace(V.C.Fp,"")],vS:a.yo.element})}};f.g=function(){V.C.d.g.call(this);this.fx()};
h("xiv.ui.ThumbnailGallery.EventType",{Fs:"Z",xJ:"$",OU:"aa",NU:"ba",LU:"ca",PU:"da"});h("xiv.ui.ThumbnailGallery.ID_PREFIX",V.C.ID_PREFIX);h("xiv.ui.ThumbnailGallery.CSS_SUFFIX",V.C.CSS_SUFFIX);h("xiv.ui.ThumbnailGallery.ANIM_MED",V.C.zp);h("xiv.ui.ThumbnailGallery.DRAGGER_ID",V.C.Fp);h("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",V.C.YI);h("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",V.C.prototype.Sk);h("xiv.ui.ThumbnailGallery.prototype.createThumbnail",V.C.prototype.wq);
h("xiv.ui.ThumbnailGallery.prototype.addThumbnail",V.C.prototype.mo);h("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",V.C.prototype.lD);h("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",V.C.prototype.yC);h("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",V.C.prototype.zC);h("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",V.C.prototype.RN);h("xiv.ui.ThumbnailGallery.prototype.disposeInternal",V.C.prototype.g);function vt(a,b,c,d){ed.call(this);this.Sb=c||Eh();this.zo=a;this.Zg=[];this.uS=b?b:wt;this.uI=!!d;this.Jg()}m(vt,ed);var wt=0;f=vt.prototype;
f.Jg=function(){this.zo.className="goog-tabpane";for(var a=[],b=Zh(this.zo);b;)a.push(b),b=ai(b);this.Bf=this.Sb.D("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.ed=this.Sb.D("div","goog-tabpane-cont");this.zo.appendChild(this.ed);b=this.zo;switch(this.uS){case wt:b.insertBefore(this.Bf,this.ed);b.insertBefore(xt(this),this.ed);Pj(b,"goog-tabpane-top");break;case 1:b.appendChild(this.Bf);b.appendChild(xt(this));Pj(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.Bf,this.ed);Pj(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.Bf,this.ed);Pj(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.Bf.tabIndex=0;C(this.Bf,this.uI?"mousedown":"click",this.Mu,!1,this);C(this.Bf,"keydown",this.Nu,!1,this);for(var c=0;b=a[c];c++)yt(this,new zt(b))};
function xt(a){var b=Eh(void 0),c=null,d=b.Ia;kc&&d.createStyleSheet?(c=d.createStyleSheet(),Ui(c)):(d=Jh(b.Ia,"head",void 0,void 0)[0],d||(c=Jh(b.Ia,"body",void 0,void 0)[0],d=b.D("head"),c.parentNode.insertBefore(d,c)),c=b.D("style"),Ui(c),b.appendChild(d,c));return a.Sb.D("div","goog-tabpane-clear")}f.g=function(){vt.d.g.call(this);Yc(this.Bf,this.uI?"mousedown":"click",this.Mu,!1,this);Yc(this.Bf,"keydown",this.Nu,!1,this);delete this.zo;this.ed=this.Bf=null};
function yt(a,b){b.kb&&b.kb!=a&&b.kb instanceof vt&&At(b.kb,b);var c=a.Zg.length;ca(void 0)&&void 0!=c?(c=void 0,a.Zg.splice(c,0,b),a.Bf.insertBefore(b.$k,a.Bf.childNodes[c])):(a.Zg.push(b),a.Bf.appendChild(b.$k));b.Pr(a,c);a.Vi||(a.Vi=b,a.dispatchEvent(new Bt("change",a,a.Vi)));a.ed.appendChild(b.ed);Ct(b,b==a.Vi);for(var d=c+1;c=a.Zg[d];d++)c.$q=d}function At(a,b){ma(b)&&(b=a.Zg[b]);a.Zg.splice(b.$q,1);b.Pr(null);S(b.$k);S(b.ed);for(var c,d=0;c=a.Zg[d];d++)c.Pr(a,d)}
function Dt(a,b){if(0<=b&&b<a.Zg.length){var c=a.Zg[b];!c.isEnabled()||a.Vi&&c==a.Vi||(Ct(a.Vi,!1),Ct(c,!0),a.Vi=c,a.dispatchEvent(new Bt("change",a,a.Vi)))}}f.Eb=function(){return this.ed||null};f.a=function(){return this.zo||null};f.Mu=function(a){for(var b=a.target;b!=this.Bf;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);Dt(this,c);break}b=b.parentNode}a.preventDefault()};
f.Nu=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.Vi.$q-1;Dt(this,0>a?this.Zg.length-1:a);break;case 39:a=this.Vi.$q+1;Dt(this,a>=this.Zg.length?0:a);break;case 36:Dt(this,0);break;case 35:Dt(this,this.Zg.length-1)}};function zt(a,b,c){var d,e;if(ka(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=Zh(a))d=ki(b),b.parentNode.removeChild(b);e=a}this.Sb=c||Eh();this.ed=e||this.Sb.D("div");this.$k=this.Sb.D("li",null,d);this.$q=this.kb=null;this.Md=!0}f=zt.prototype;
f.ng=function(){return ki(this.$k)};f.gh=function(a){ei(this.$k,a)};f.dF=function(){return this.$k};f.Eb=function(){return this.ed};f.getParent=function(){return this.kb};f.ld=function(a){this.Md=a;this.$k.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Md};function Ct(a,b){a.isEnabled()&&(a.ed.style.display=b?"":"none",a.$k.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.Pr=function(a,b){this.kb=a;this.$q=ca(b)?b:null};
function Bt(a,b,c){Hc.call(this,a,b);this.page=c}m(Bt,Hc);U.M=function(a){U.K.call(this);if(null!=a){var b=a;if(!ka(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==U.M.Zv.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||U.M.ZA};m(U.M,U.K);h("nrg.ui.Tabs",U.M);U.M.Zv=["TOP","BOTTOM","LEFT","RIGHT"];U.M.ZA=U.M.Zv[0];U.M.ID_PREFIX="nrg.ui.Tabs";U.M.CSS_SUFFIX={$c:"tab",uk:"tab-active",sh:"page",CJ:"page-content",Is:"page-active",Mb:"icon",In:"icon-active",dJ:"icon-content",sU:"scrollgallery"};
function Et(a,b,c,d,e){this.Rl=!1;this.Ob=a;this.$c=b;this.Mb=c;this.sh=d;this.kj=e}f=U.M.prototype;f.Tg=0;f.hp=0;f.Nf=null;f.n=function(a){U.M.d.n.call(this,a);this.Um=new vt(this.a());this.U=[];R(this.a(),U.M.Bd)};f.MN=function(){return this.U.length};f.$M=function(){return this.Tg};f.zN=function(){return this.hp};f.Yt=function(){var a=[];A(this.U,function(b){a.push(b.$c)});return a};f.Zt=function(){var a=[];A(this.U,function(b){a.push(b.sh)});return a};
f.NN=function(){var a=[];A(this.U,function(b){a.push(b.Mb)});return a};f.NK=function(a){A(a,function(a){this.lo(a)}.bind(this))};f.reset=function(){for(var a=this.U.length;0<a;)At(this.Um,a-1),a--;this.vW()};f.sA=function(a){if(null==this.U)return!1;for(var b=0,c=this.U.length;b<c;b++)if(this.U[b].Ob==a)return!0;return!1};
f.lo=function(a){this.U=null!=this.U?this.U:[];if(this.sA(a))throw Error(a+" is an already existing tab!");var b;b=Rh("div",{id:"Tab_"+t(),"class":U.M.CSS.$c,title:a});Vh(this.a(),b);var c=Rh("div",{id:"TabIcon_"+t(),"class":U.M.CSS.Mb}),d=Rh("div",{"class":U.M.CSS.dJ},a);Vh(c,d);Vh(b,c);d=Rh("div",{id:"TabPage_"+t(),"class":U.M.CSS.sh,label:a});ll.pb(d,ll.Ax(this.a(),"width"));Vh(this.a().parentNode,d);var e=new zt(d,a);yt(this.Um,e);this.U.push(new Et(a,b,c,d,e));Ft(this);Gt(this);Ht(this);this.Fm();
this.setActive(0);this.m()};f.GH=function(a,b){this.sA(a)||this.lo(a);var c;a:if(null!=this.U){c=0;for(var d=this.U.length;c<d;c++)if(this.U[c].Ob==a){c=this.U[c];break a}c=void 0}else c=!1;b instanceof U.mb?(d=b,c.sh.appendChild(b.a())):(d=new U.mb,d.n(c.sh),d.Gg(b));R(d.a(),U.M.CSS.CJ);this.m()};function Ft(a){A(a.U,function(a){$c(a.$c)}.bind(a))}function Gt(a){A(a.U,function(a,c){C(a.$c,"click",function(){this.Fm();this.setActive(c)}.bind(this))}.bind(a))}
function Ht(a){A(a.U,function(a,c){It(this,c);Jt(this,c)}.bind(a))}function It(a,b){C(a.U[b].$c,"mouseover",function(){!0!==this.U[b].Rl&&(R(this.U[b].$c,U.M.CSS.uk),R(this.U[b].$c,zk.Kb(U.M.CSS.uk,this.orientation)),R(this.U[b].Mb,U.M.CSS.In))}.bind(a))}function Jt(a,b){C(a.U[b].$c,"mouseout",function(){!0!==this.U[b].Rl&&(qh(this.U[b].$c,U.M.CSS.uk),qh(this.U[b].$c,zk.Kb(U.M.CSS.uk,this.orientation)),qh(this.U[b].Mb,U.M.CSS.In))}.bind(a))}
f.setActive=function(a){this.U[a].Rl=!0;this.hp=this.Tg;this.Tg=a;Dt(this.Um,a);R(this.U[a].$c,U.M.CSS.uk);R(this.U[a].$c,zk.Kb(U.M.CSS.uk,this.orientation));R(this.U[a].sh,U.M.CSS.Is);R(this.U[a].sh,zk.Kb(U.M.CSS.Is,this.orientation));R(this.U[a].Mb,U.M.CSS.In);R(this.U[a].Mb,zk.Kb(U.M.CSS.In,this.orientation))};
f.LD=function(a){this.U[a].Rl=!1;Dt(this.Um,1);qh(this.U[a].$c,U.M.CSS.uk);qh(this.U[a].$c,zk.Kb(U.M.CSS.uk,this.orientation));qh(this.U[a].sh,U.M.CSS.Is);qh(this.U[a].sh,zk.Kb(U.M.CSS.Is,this.orientation));qh(this.U[a].Mb,U.M.CSS.In);qh(this.U[a].Mb,zk.Kb(U.M.CSS.In,this.orientation))};f.Fm=function(){A(this.U,function(a,b){this.LD(b)}.bind(this))};
f.m=function(){if(this.a().parentNode){R(this.a(),U.M.Bd);R(this.a(),zk.Kb(U.M.Bd,this.orientation));A(this.U,function(a){R(a.$c,zk.Kb(U.M.CSS.$c,this.orientation));R(a.Mb,zk.Kb(U.M.CSS.Mb,this.orientation));R(a.sh,zk.Kb(U.M.CSS.sh,this.orientation))}.bind(this));switch(this.orientation){case "TOP":Kt(this);break;case "BOTTOM":this.yX();break;case "RIGHT":Lt(this)}if(0<this.U.length){var a=Pi(this.U[0].$c);0<a.width&&0<a.height&&(this.Nf=a)}}};
function Lt(a){A(a.U,function(a){this.a().parentNode&&ll.pb(a.$c,{height:(100/this.U.length).toString()+"%"})}.bind(a))}function Kt(a){var b;A(a.U,function(a,d){this.a().parentNode&&(b=100/this.U.length,ll.pb(a.$c,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function Mt(a){A(a.U,function(a){w(a,function(c,d){$c(c);c.g?c.i():c.i&&c.i();delete c;delete a[d]});ub(a);delete a});Mb(a.U)}
f.g=function(){U.M.d.g.call(this);A(this.Yt(),function(a){$c(a)}.bind(this));Mt(this);delete this.U;$c(this.Um);this.Um.i();delete this.Um;delete this.Tg;delete this.hp;delete this.vX;delete this.orientation};h("nrg.ui.Tabs.ORIENTATIONS",U.M.Zv);h("nrg.ui.Tabs.DEFAULT_ORIENTATION",U.M.ZA);h("nrg.ui.Tabs.ID_PREFIX",U.M.ID_PREFIX);h("nrg.ui.Tabs.CSS_SUFFIX",U.M.CSS_SUFFIX);h("nrg.ui.Tabs.TabItemCollection",Et);h("nrg.ui.Tabs.prototype.tabSize",U.M.prototype.Nf);h("nrg.ui.Tabs.prototype.render",U.M.prototype.n);
h("nrg.ui.Tabs.prototype.getTabCount",U.M.prototype.MN);h("nrg.ui.Tabs.prototype.getLastActiveTab",U.M.prototype.$M);h("nrg.ui.Tabs.prototype.getPreviousActiveTab",U.M.prototype.zN);h("nrg.ui.Tabs.prototype.getTabElements",U.M.prototype.Yt);h("nrg.ui.Tabs.prototype.getTabPages",U.M.prototype.Zt);h("nrg.ui.Tabs.prototype.getTabIcons",U.M.prototype.NN);h("nrg.ui.Tabs.prototype.addTabs",U.M.prototype.NK);h("nrg.ui.Tabs.prototype.reset",U.M.prototype.reset);h("nrg.ui.Tabs.prototype.tabExists",U.M.prototype.sA);
h("nrg.ui.Tabs.prototype.addTab",U.M.prototype.lo);h("nrg.ui.Tabs.prototype.setTabPageContents",U.M.prototype.GH);h("nrg.ui.Tabs.prototype.setActive",U.M.prototype.setActive);h("nrg.ui.Tabs.prototype.deactivate",U.M.prototype.LD);h("nrg.ui.Tabs.prototype.deactivateAll",U.M.prototype.Fm);h("nrg.ui.Tabs.prototype.updateStyle",U.M.prototype.m);h("nrg.ui.Tabs.prototype.disposeInternal",U.M.prototype.g);U.Ab=function(a){U.M.call(this,a)};m(U.Ab,U.M);h("nrg.ui.ZipTabs",U.Ab);U.Ab.TA=4;U.Ab.Bp=4;U.Ab.ID_PREFIX="nrg.ui.ZipTabs";f=U.Ab.prototype;f.n=function(a){U.Ab.d.n.call(this,a);R(this.a(),zk.Kb(U.Ab.Bd,this.orientation));this.Ed=new U.ia(this.a(),this.orientation);Nt(this)};f.ck=function(a){this.Ed.ck(a);this.m()};f.ea=function(){return this.Ed};
function Nt(a){C(a.Ed,"resize",function(a){this.yj();if(null!=this.Nf){switch(this.orientation){case "BOTTOM":case "TOP":Math.abs(this.Nf.height-this.B.height)<=U.Ab.TA?this.Fm():this.setActive(this.Tg);break;case "LEFT":case "RIGHT":Math.abs(this.Nf.width-this.B.width)<=U.Ab.Bp?this.Fm():this.setActive(this.Tg)}this.dispatchEvent({type:"resize",size:a.size,ug:a.ug})}}.bind(a))}
f.Sc=function(a,b,c){this.m();a?(this.setActive(b||0),this.Ed.hh(this.orientation,"MAX",null,c)):(this.Fm(),this.Ed.hh(this.orientation,"MIN",null,c))};f.m=function(){U.Ab.d.m.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.Nf&&this.Ed.vH(this.Nf.height);break;case "LEFT":case "RIGHT":null!=this.Nf&&this.Ed.xH(this.Nf.width)}this.Ed.update()};
f.lo=function(a){U.Ab.d.lo.call(this,a);1==this.Yt().length&&this.m();A(this.Yt(),function(a){C(a,"click",function(){if(null!=this.Nf)switch(this.m(),this.yj(),this.orientation){case "BOTTOM":Math.abs(this.B.height-this.Nf.height)<=U.Ab.Bp?(this.setActive(this.Tg),this.Ed.hh("BOTTOM","MAX",void 0)):this.Tg==this.hp&&this.Ed.hh("BOTTOM","MIN",void 0);break;case "TOP":Math.abs(this.B.height-this.Nf.height)<=U.Ab.Bp?(this.setActive(this.Tg),this.Ed.hh("TOP","MAX",void 0)):this.Tg==this.hp&&this.Ed.hh("TOP",
"MIN",void 0);break;case "RIGHT":null!=this.Nf&&(Math.abs(this.B.width-this.Nf.width)<=U.Ab.Bp?(this.setActive(this.Tg),this.Ed.hh("RIGHT","MAX",void 0)):this.Tg==this.hp&&this.Ed.hh("RIGHT","MIN",void 0))}}.bind(this))}.bind(this));this.Fm();this.m()};f.g=function(){U.Ab.d.g.call(this);$c(this.Ed);this.Ed.i();delete this.Ed};h("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",U.Ab.TA);h("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",U.Ab.Bp);h("nrg.ui.ZipTabs.EventType",{eT:"ea"});h("nrg.ui.ZipTabs.ID_PREFIX",U.Ab.ID_PREFIX);
h("nrg.ui.ZipTabs.prototype.render",U.Ab.prototype.n);h("nrg.ui.ZipTabs.prototype.setBoundaryElement",U.Ab.prototype.ck);h("nrg.ui.ZipTabs.prototype.getResizable",U.Ab.prototype.ea);h("nrg.ui.ZipTabs.prototype.setExpanded",U.Ab.prototype.Sc);h("nrg.ui.ZipTabs.prototype.updateStyle",U.Ab.prototype.m);h("nrg.ui.ZipTabs.prototype.addTab",U.Ab.prototype.lo);h("nrg.ui.ZipTabs.prototype.disposeInternal",U.Ab.prototype.g);/*
 Copyright 2014 Washington Universityf
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
V.ca=function(){U.K.call(this);this.ve=V.ca.ModalStates.Gn};m(V.ca,U.K);h("xiv.ui.Modal",V.ca);V.ca.ModalStates={Wf:"fullscreen",Dg:"popup",Qv:"fullscreen-popup",ri:"windowed",Gn:"demo",WI:"demp-fullscreen"};V.ca.ID_PREFIX="xiv.ui.Modal";V.ca.CSS_SUFFIX={ys:"background",gT:"columnmenu",iU:"rowmenu",hT:"button",jU:"button",EJ:"projecttab",FJ:"projecttab-bounds",GJ:"projecttab-dragger",HJ:"projecttab-dragger-handle",SA:"addsubjects"};
V.ca.vL=function(){var a={};w(V.ca.LI,function(b,c){c=b.key;a[c]=V.ca.ID_PREFIX+"."+db(c)+"Button"});var b=ql.tD(ob(a)),c={};w(a,function(a,e){c[e]=b[a];var g=zk.Kb(V.ca.En,e.toLowerCase()+"-button");b[a].className=g});return c};V.ca.LI={Dn:{key:"CLOSE",title:"Close XNAT Image Viewer."},Wf:{key:"FULLSCREEN",title:"Enter full-screen mode."},Dg:{key:"POPUP",title:"Popup to new window."},ri:{key:"WINDOWED",title:"Exit full-screen mode."}};f=V.ca.prototype;f.Xq=29;f.Gv=29;f.Gu=320;f.Hu=320;f.aO=function(){return this.eb};
f.SN=function(){return this.la};f.BN=function(){return this.Xc};f.xN=function(){return this.ka.Dg};f.DM=function(){return this.ka.Dn};f.TM=function(){return this.ka.Wf};f.n=function(a){V.ca.d.n.call(this,a);this.KF();this.eb.ty(null,!1);this.md(this.ve)};
f.md=function(a){null!=this.ve&&(this.$u=this.ve);this.ve=a;null!=this.$u&&qh(this.a(),zk.Kb(this.constructor.Bd,this.$u));R(this.a(),zk.Kb(this.constructor.Bd,this.ve));this.ve==V.ca.ModalStates.Gn?(this.ka.Wf.style.visibility="visible",this.ka.ri.style.visibility="hidden"):this.ve==V.ca.ModalStates.ri?(this.ka.Wf.style.visibility="visible",this.ka.ri.style.visibility="hidden"):this.ve==V.ca.ModalStates.Dg?(this.ka.Dg.style.visibility="hidden",this.ka.Dn.style.visibility="hidden",this.ka.Wf.style.visibility=
"visible",this.ka.ri.style.visibility="hidden"):this.ve==V.ca.ModalStates.Qv?(this.ka.Dg.style.visibility="hidden",this.ka.Wf.style.visibility="hidden",this.ka.ri.style.visibility="visible"):this.ve==V.ca.ModalStates.Wf&&(this.ka.Dg.style.visibility="visible",this.ka.Wf.style.visibility="hidden",this.ka.ri.style.visibility="visible");this.m()};f.Io=function(){return this.ve};f.ol=function(){this.la.loop(function(a){a.setActive(!1);this.eb.loop(function(b){-1<b.ac.indexOf(a.uh)&&a.setActive(!0)})}.bind(this))};
f.RC=function(){Ot(this);this.Ye=null!=this.Ye?this.Ye:[];this.Zd=null!=this.Zd?this.Zd:new il;Pt(this);Qt(this);C(this.Zd,"end",this.aQ.bind(this));A(this.Ye,function(a){this.Zd.add(a)}.bind(this));this.Zd.play();this.ol()};f.aQ=function(){A(this.Ye,function(a){this.Zd.remove(a);$c(a);a.Kg();a.i()}.bind(this));Mb(this.Ye);this.m();Rt(this)};function Rt(a){a.eb.loop(function(a){0==a.a().style.opacity&&T.Gq(a.a(),300)})}
function Pt(a){var b=null;a.eb.loop(function(a,d,e){b=a.a();this.Ye.push(new Yk(b,[b.offsetLeft,b.offsetTop],[this.Ra.Hc.si[d][e],this.Ra.Hc.cg[d][e]],300,ml))}.bind(a))}function Qt(a){var b=null;a.eb.loop(function(a,d,e){b=a.a();this.Ye.push(new Zk(b,[b.offsetWidth,b.offsetHeight],[this.Ra.Hc.hm[d][e],this.Ra.Hc.Gp[d][e]],300,ml))}.bind(a))}
function Ot(a){a.Ra=null!=a.Ra?a.Ra:{};a.yj();a.Ra.is={};a.Ra.is.hm=Math.round(Pi(a.Xc.a()).width);a.Ra.is.Gp=Math.round(a.B.height-2*a.Gv);a.Ra.is.cg=Math.round(a.Gv);St(a);Tt(a)}function St(a){a.Ra.Hc={};a.Ra.Hc.hm=a.eb.Mq();a.Ra.Hc.Gp=a.eb.Mq();a.eb.loop(function(a,c,d,e,g){this.Ra.Hc.hm[c][d]=Math.round((this.B.width-this.Ra.is.hm-this.Xq)/g-this.Xq);this.Ra.Hc.Gp[c][d]=Math.round((this.B.height-(e+1)*this.Xq)/e)}.bind(a))}
function Tt(a){a.Ra.Hc.si=a.eb.Mq();a.Ra.Hc.cg=a.eb.Mq();a.Ra.Hc.VJ=a.Ra.is.hm+a.Gv;var b=0;a.eb.loop(function(a,d,e){b=this.Ra.Hc.VJ+e*(this.Ra.Hc.hm[d][e]+this.Gv);this.Ra.Hc.si[d][e]=b;this.Ra.Hc.cg[d][e]=d*(this.Ra.Hc.Gp[d][e]+this.Xq);window.console.log();this.Ra.Hc.cg[d][e]+=this.Xq}.bind(a))}f.m=function(){Ot(this);this.Xc&&this.Xc.m();Ut(this);this.ol();this.la.m();this.la.Be()};
function Ut(a){a.eb&&a.eb.loop(function(a,c,d){ll.pb(a.a(),{height:this.Ra.Hc.Gp[c][d],width:this.Ra.Hc.hm[c][d],left:this.Ra.Hc.si[c][d],top:this.Ra.Hc.cg[c][d]});a.m()}.bind(a))}
f.KF=function(){var a=Rh("div");a.id=this.constructor.ID_PREFIX+"_Background_"+t();a.className=V.ca.CSS.ys;this.a().appendChild(a);this.$v=Rh("div");Vh(this.a(),this.$v);R(this.$v,V.ca.CSS.FJ);this.Xc=new U.Ab("RIGHT");this.Xc.n(this.a());R(this.Xc.a(),V.ca.CSS.EJ);this.la=new V.C;this.la.jA(!0);this.la.Yz(this.a());var b;b=b||C;b(this.la,"w",this.CQ.bind(this));b(this.la,"x",this.BQ.bind(this));b(this.la,"ca",this.uQ.bind(this));b(this.la,"aa",this.xQ.bind(this));b(this.la,"ba",this.wQ.bind(this));
b(this.la,"da",this.zQ.bind(this));this.la.n(this.Xc.a());this.Xc.GH("Project Browser",this.la);this.Xc.ck(this.$v);a=this.Xc.ea().ze("RIGHT");R(a,V.ca.CSS.GJ);this.Xc.ea().Ho("RIGHT").zH(5);Vh(a,Rh("div",{id:V.O.ID_PREFIX+"_DraggerHandle_"+t(),"class":V.ca.CSS.HJ}));C(this.Xc,"resize",this.m.bind(this));C(this.Xc,"resize_end",this.m.bind(this));this.wj=Rh("div",{id:V.ca.ID_PREFIX+"_addSubjects_"+t(),"class":V.ca.CSS.SA},"+ Load all subjects in project");this.Xc.Zt()[0].appendChild(this.wj);ll.Fl(this.wj,
V.ca.CSS.SA+"-hovered");a=this.Xc.Zt()[0];b=Yh(a)[0];Pi(a);Pi(b);Pi(this.wj);b.style.height="calc(100% - 70px)";C(this.wj,"click",this.HP.bind(this));this.eb=new V.aa;this.eb.JH(this.a());var c;c=c||C;c(this.eb,"V",this.Cz.bind(this));c(this.eb,"W",this.Bz.bind(this));c(this.eb,"Y",this.xl.bind(this));C(this.eb,"X",this.PQ.bind(this));Vt(this)};
function Vt(a){a.ka=V.ca.vL();w(a.ka,function(a){Vh(this.a(),a)}.bind(a));Wt(a);a.ka.Dn.innerHTML="<img src="+a.rl+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.ka.Wf.innerHTML="<img src="+a.rl+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.ka.ri.innerHTML="<img src="+a.rl+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.ka.Dg.innerHTML="<img src="+a.rl+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.HP=function(){this.dispatchEvent({type:Xt});T.Pm(this.wj,150,function(){Yt(this);var a=this.Xc.Zt()[0];Yh(a)[0].setAttribute("style","");this.la.Be()}.bind(this))};function Yt(a){null!=a.wj&&(S(a.wj),$c(a.wj),delete a.wj)}f.PQ=function(){var a=Kh("xiv-ui-thumbnailgallery-thumbnail-dragging");A(a,function(a){S(a)});this.ol();this.la.kh.bl({wW:!0})};f.MP=function(){this.ve===V.ca.ModalStates.Wf&&Ba.pE.bM()};
f.TP=function(){Ba.pE.jX(this.a().parentNode);this.ve===V.ca.ModalStates.Dg?this.md(V.ca.ModalStates.Qv):this.md(V.ca.ModalStates.Wf)};f.SQ=function(){Ba.pE.bM();this.md(this.$u)};function Wt(a){var b;b=b||C;b(a.ka.Wf,"click",a.TP.bind(a));b(a.ka.ri,"click",a.SQ.bind(a));b(a.ka.Dn,"click",a.MP.bind(a))}f.CQ=function(a){this.eb.iw(a.q.uh,function(a){a.Qo()})};f.BQ=function(a){this.eb.iw(a.q.uh,function(a){a.ps()})};f.wQ=function(a){this.eb.$t(a.wA).ps()};f.xQ=function(a){this.eb.$t(a.wA).Qo()};
f.uQ=function(a){this.eb.LE().load(a.q.uh);this.ol()};f.zQ=function(a){this.eb.$t(a.vS).load(a.q.uh);this.ol()};f.Cz=function(){this.ol()};f.Bz=function(){this.ol()};f.xl=function(a){null!=a&&null!=a.QK?(a.uG&&A(a.uG,function(a){ll.pb(a.a(),{opacity:0})}),this.RC()):this.m();this.la.lD();this.la.zC(this.eb.hF())};
f.g=function(){V.ca.d.g.call(this);ub(this.Ra);delete this.Ra;U.XD(this.Ye);delete this.Ye;U.Bx(this.Zd);delete this.Zd;U.Cx(this.ka);delete this.ka;null!=this.eb&&($c(this.eb),this.eb.i(),delete this.eb);$c(this.Xc);this.Xc.i();delete this.Xc;$c(this.la);this.la.i();delete this.la;Yt(this);delete this.ve;delete this.$u};h("xiv.ui.Modal.EventType",V.ca.sT);h("xiv.ui.Modal.ID_PREFIX",V.ca.ID_PREFIX);h("xiv.ui.Modal.CSS_SUFFIX",V.ca.CSS_SUFFIX);h("xiv.ui.Modal.prototype.getViewBoxHandler",V.ca.prototype.aO);
h("xiv.ui.Modal.prototype.getThumbnailGallery",V.ca.prototype.SN);h("xiv.ui.Modal.prototype.getProjectTab",V.ca.prototype.BN);h("xiv.ui.Modal.prototype.getPopupButton",V.ca.prototype.xN);h("xiv.ui.Modal.prototype.getCloseButton",V.ca.prototype.DM);h("xiv.ui.Modal.prototype.getFullScreenButton",V.ca.prototype.TM);h("xiv.ui.Modal.prototype.render",V.ca.prototype.n);h("xiv.ui.Modal.prototype.setState",V.ca.prototype.md);h("xiv.ui.Modal.prototype.getState",V.ca.prototype.Io);
h("xiv.ui.Modal.prototype.highlightInUseThumbnails",V.ca.prototype.ol);h("xiv.ui.Modal.prototype.animateModal",V.ca.prototype.RC);h("xiv.ui.Modal.prototype.updateStyle",V.ca.prototype.m);h("xiv.ui.Modal.prototype.initSubComponents",V.ca.prototype.KF);h("xiv.ui.Modal.prototype.disposeInternal",V.ca.prototype.g);window["xiv.ui.Modal"]=V.ca;window["xiv.ui.Modal.ModalStates"]=V.ca.ModalStates;function Zt(a,b,c){P.l.Lc.call(this);this.nv(a);null!=c&&null!=b&&(this.Eq=c,this.bk=Wg(this.Eq,b.URI,"experiments"),this.Js=new Sg(this.bk));this.gr=b;this.Kf={}}m(Zt,P.l.Lc);h("gxnat.vis.AjaxViewableTree",Zt);var $t={ID:"Scan ID",Name:"Name",type:"Scan Type"},au={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},bu={label:"Session"};function cu(a,b,c){P.Rj(a,function(a){ia(a);A(a,function(a){b(a)});c&&c()})}f=Zt.prototype;f.Jj=null;f.fl=!1;
f.lH=function(a,b){null==this.Jj&&(this.Jj={});this.Jj[a]=b};f.fF=function(){var a=0;w(this.Jj,function(b,c){a+=this.JE(c)}.bind(this));return a};f.JE=function(a){return parseInt(this.Jj[a].Size,10)};f.OM=function(){return this.Jj};f.QM=function(){return this.fl};f.mH=function(a){this.fl=a};f.LM=function(){return this.Eq};f.CN=function(){return this.bk};f.HN=function(){return this.Kf};f.EH=function(a){this.Kf=a};f.lp=function(){w($t,function(a,b){null!=this.gr[b]&&(this.Kf[a]=this.gr[b])}.bind(this))};
f.Qr=function(a){Zt.d.Qr.call(this,a)};f.Sr=function(a){Zt.d.Sr.call(this,a);w(au,function(a,c){null!=this.op[c]&&(this.Kf[a]=this.op[c])}.bind(this))};f.Mr=function(a){Zt.d.Mr.call(this,a);w(bu,function(a,c){null!=this.Bo[c]&&(this.Kf[a]=this.Bo[c])}.bind(this))};f.RM=function(){return this.Jq};f.Du=function(a){a=a[this.Iq];if(!Ga(a,"/"))return this.bk+"!"+a};
f.hl=function(a){if(this.fl)a();else{var b=0,c=0,d="",e;P.Rj(this.bk+this.Rt,function(g){for(c=g.length;b<c;b++)if(e=g[b],d=this.Du(e))this.lH(d,e),this.Kk(d,this.Do);a();this.fl=!0}.bind(this))}};f.Do=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.Sm=function(){};function du(a,b,c,d){var e=new Sg(a);cu(a+"/"+b.prototype.Jq,function(a){new b(a,e.ak("experiments"),c)},d)}
f.i=function(){Zt.d.i.call(this);null!=this.Jj&&(ub(this.Jj),delete this.Jj);delete this.fl;ub(this.Kf);delete this.Kf;null!=this.gr&&(ub(this.gr),delete this.gr);null!=this.Js&&(this.Js.i(),delete this.Js);delete this.Eq;delete this.bk};h("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",$t);h("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",au);h("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",bu);h("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");h("gxnat.vis.AjaxViewableTree.loopFolderContents",cu);
h("gxnat.vis.AjaxViewableTree.getViewableTrees",du);h("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Zt.prototype.fl);h("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Zt.prototype.lH);h("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Zt.prototype.fF);h("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Zt.prototype.JE);h("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Zt.prototype.OM);h("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Zt.prototype.QM);
h("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Zt.prototype.mH);h("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Zt.prototype.LM);h("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Zt.prototype.CN);h("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Zt.prototype.HN);h("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Zt.prototype.EH);h("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Zt.prototype.lp);
h("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Zt.prototype.Qr);h("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Zt.prototype.Sr);h("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Zt.prototype.Mr);h("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Zt.prototype.RM);h("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Zt.prototype.Du);h("gxnat.vis.AjaxViewableTree.prototype.getFileList",Zt.prototype.hl);
h("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Zt.prototype.Do);h("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Zt.prototype.Sm);h("gxnat.vis.AjaxViewableTree.prototype.dispose",Zt.prototype.i);P.l.Zb=function(a,b,c){Zt.call(this,"Scans",a,b);this.Kf["Total Frames"]=0;c&&c(this)};m(P.l.Zb,Zt);h("gxnat.vis.Scan",P.l.Zb);P.l.Zb.Gw="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");P.l.Zb.YE=function(a){switch(a){case "Sag":return"Sagittal";case "Cor":return"Coronal";case "Tra":return"Transverse"}};f=P.l.Zb.prototype;f.Jq="scans";f.Rt="/files";f.Iq="URI";
f.lp=function(){P.l.Zb.d.lp.call(this);null!=this.pn["parameters/orientation"]&&(this.Kf.Orientation=this.constructor.YE(this.pn["parameters/orientation"]),this.orientation=this.Kf.Orientation);null!=this.pn["parameters/acqType"]&&(this.Kf["Acq. Type"]=this.pn["parameters/acqType"])};f.hl=function(a){this.fl?a():P.Rj(this.Js.originalUrl,function(b){this.pn=b.items[0].data_fields;this.lp();P.l.Zb.d.hl.call(this,function(){this.Sm();a()}.bind(this))}.bind(this))};
f.Do=function(a){a=P.l.Zb.d.Do.call(this,a);if(null!=a){for(var b=0,c=P.l.Zb.Gw.length;b<c;b++)if(Ha(a,"."+P.l.Zb.Gw[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};f.Kk=function(a){this.nv("Scans");if(0==this.oe.length){var b=new P.l.bg;b.gh("scan");b.nv("scans");this.oe.push(b)}0==this.oe[0].Eg.length&&this.oe[0].CC(new P.l.qf);this.oe[0].Eg[0].Kk(a,this.Do);this.Kf["Total Frames"]=this.oe[0].Eg[0].Hi().length};f.Du=function(a){return Wg(this.Eq,a[this.Iq],"experiments")};
f.Sm=function(a){if(this.oe&&this.oe[0]){var b=this.oe[0].Eg[0].Hi().sort(P.Ku);this.Ur(b[Math.floor(b.length/2)]+P.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};f.i=function(){P.l.Zb.d.i.call(this);null!=this.pn&&ub(this.pn);delete this.pn};h("gxnat.vis.Scan.acceptableFileTypes",P.l.Zb.Gw);h("gxnat.vis.Scan.getOrientationFromAbbreviation",P.l.Zb.YE);h("gxnat.vis.Scan.prototype.folderQuerySuffix",P.l.Zb.prototype.Jq);h("gxnat.vis.Scan.prototype.fileQuerySuffix",P.l.Zb.prototype.Rt);
h("gxnat.vis.Scan.prototype.fileContentsKey",P.l.Zb.prototype.Iq);h("gxnat.vis.Scan.prototype.setViewableMetadata",P.l.Zb.prototype.lp);h("gxnat.vis.Scan.prototype.getFileList",P.l.Zb.prototype.hl);h("gxnat.vis.Scan.prototype.fileFilter",P.l.Zb.prototype.Do);h("gxnat.vis.Scan.prototype.addFiles",P.l.Zb.prototype.Kk);h("gxnat.vis.Scan.prototype.makeFileUrl",P.l.Zb.prototype.Du);h("gxnat.vis.Scan.prototype.getThumbnailImage",P.l.Zb.prototype.Sm);h("gxnat.vis.Scan.prototype.dispose",P.l.Zb.prototype.i);P.s.Xv=function(a,b,c,d){P.s.Node.call(this);this.url=a;this.document=b;this.files=d};m(P.s.Xv,P.s.Node);h("gxnat.slicerNode.Mrml",P.s.Xv);P.s.Pv=function(a,b){P.s.Node.call(this);this.file=a;this.Jf=b};m(P.s.Pv,P.s.Node);h("gxnat.slicerNode.Displayable",P.s.Pv);function eu(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};P.s.Nv=function(a,b,c){P.s.Node.call(this);this.position=a;this.Ev=b;this.focus=c};m(P.s.Nv,P.s.Node);h("gxnat.slicerNode.Camera",P.s.Nv);P.s.Vv=function(){P.s.Node.call(this)};m(P.s.Vv,P.s.Node);h("gxnat.slicerNode.Layout",P.s.Vv);P.P={};h("gxnat.slicerUtils",P.P);P.P.cB="/scripts/viewer/xiv/vis/GenericColorTable.txt";P.P.fE=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ha(a[c],".mrml")&&b.push(a[c]);return b};P.P.by=function(a,b){P.get(a,function(a){b(new eu(a))},"text")};P.P.WE=function(a,b,c){a=ia(a)?a:[a];var d=P.P.fE(a),e=[],g=0;A(d,function(b){P.P.by(b,function(l){g++;e.push(new P.s.Xv(b,l,0,a));g==d.length&&c(e)})})};
P.P.BD=function(a,b,c){P.P.xE(a,b,function(b){c(new P.s.Ms(a,P.P.BE(a),P.P.yE(a),P.P.RE(a),b,P.P.jF(a),P.P.VE(a),null))})};P.P.ZE=function(a,b){var c=[],d=[],e=0;A(a,function(a){c=P.P.$E(a.document);A(c,function(k){P.P.BD(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};P.P.HE=function(a,b){a=ka(a)?P.P.by(a):a;var c=[];A(a.getElementsByTagName(b),function(a){c.push(a)});return c};P.P.$E=function(a){return P.P.HE(a,"SceneView")};
P.P.BE=function(a){return new P.s.Nv(P.s.jk(a.getElementsByTagName("Camera")[0].getAttribute("position")),P.s.jk(a.getElementsByTagName("Camera")[0].getAttribute("viewUp")),P.s.jk(a.getElementsByTagName("Camera")[0].getAttribute("focalPoint")))};P.P.cF=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,g=d.length;e<g;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
P.P.yE=function(a){return new P.s.Cp(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};P.P.RE=function(a){return new P.s.Vv(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
P.P.$o=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",g="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),g=decodeURIComponent(a.toLowerCase()),-1<g.indexOf("%")&&(g=decodeURIComponent(g)),e.indexOf(g)==e.length-g.length)return b[c].replace(/%/g,"%25")};P.P.PM=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Xa(b,"!",nl(c),"/",nl(a))};
P.P.xE=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var g=[],k=[],l=0,q,p,s="rgb(255,0,0)",r="",u="",v="",D="",B=0,I,G;0==a.length?c(null):(A(a,function(a){k.push(P.P.$o(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):A(k,function(a){P.get(a,function(a){l++;A(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(q=a.split(/,/),1!=q.length)){p=[parseFloat(q[1]),parseFloat(q[2]),parseFloat(q[3])];
D=q[11];s=[1,0,0];v=u=r="";B=0;len=e.length;for(I;B<len;B++)if(I=e[B],r=I.getAttribute("id"),r===q[0].replace("_","")){v=r;u=I.getAttribute("displayNodeRef");break}len=d.length;G;for(B=0;B<len;B++)if(G=d[B],r=G.getAttribute("id"),r===u){s=P.s.jk(G.getAttribute("color")).map(function(a){return parseFloat(a)});break}g.push(new P.s.Ap(p,s,q,v,u,D))}});l==k.length&&c(g)},"text")}))};
P.P.Vx=function(a,b,c){var d=[],e=a.getElementsByTagName(c),g=null,k=0,l=e.length;A(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(g=e[k],g.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new P.s.Pv(g.getAttribute("fileName"),a));break}});return d};P.P.MM=function(){return null};
P.P.jF=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=P.P.Vx(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],g=[],k="";A(c,function(a){k=a.Jf.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(A(d,function(b){b.getAttribute("id")==k&&(a.Aq=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.gx=serverRoot+P.P.cB:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):g.push(a)});var l="";A(e,function(a){l=a.Jf.getAttribute("attributes").split(";");A(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],A(g,function(b){b.Jf.getAttribute("id")==refVol&&(b.Sj=a)}.bind(this)))}.bind(this))});A(g,function(c){c.ci=new P.s.vk(a,c.Jf,b);c.Sj&&(c.ci.Sj=c.Sj,delete c.Sj)});return g};P.P.VE=function(a){var b=P.P.Vx(a,"Model","ModelStorage");A(b,function(b){b.ci=new P.s.Gs(a,b.Jf)});return b};h("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",P.P.cB);
h("gxnat.slicerUtils.extractMrmls",P.P.fE);h("gxnat.slicerUtils.getMrmlAsXml",P.P.by);h("gxnat.slicerUtils.getMrmlNodes",P.P.WE);h("gxnat.slicerUtils.createSceneViewProperties",P.P.BD);h("gxnat.slicerUtils.getSceneViewNodes",P.P.ZE);h("gxnat.slicerUtils.getElementsFromMrml",P.P.HE);h("gxnat.slicerUtils.getSceneViewsFromMrml",P.P.$E);h("gxnat.slicerUtils.getCameraFromSceneView",P.P.BE);h("gxnat.slicerUtils.getThumbnail",P.P.cF);h("gxnat.slicerUtils.mrmlColorToRgb",P.P.Ju);
h("gxnat.slicerUtils.getBackgroundColorFromSceneView",P.P.yE);h("gxnat.slicerUtils.getLayoutFromSceneView",P.P.RE);h("gxnat.slicerUtils.matchFileToSet",P.P.$o);h("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",P.P.PM);h("gxnat.slicerUtils.getAnnotations",P.P.xE);h("gxnat.slicerUtils.getDisplayables",P.P.Vx);h("gxnat.slicerUtils.getFibers",P.P.MM);h("gxnat.slicerUtils.getVolumes",P.P.jF);h("gxnat.slicerUtils.getMeshes",P.P.VE);P.l.of=function(a,b,c){this.Wj=[];Zt.call(this,"Slicer Scenes",a,b);c&&c(this)};m(P.l.of,Zt);h("gxnat.vis.Slicer",P.l.of);P.l.of.hI=["jpeg","jpg","png","gif"];f=P.l.of.prototype;f.Jq="resources/Slicer/files";f.Rt="?listContents=true";f.Iq="File Name";f.hl=function(a){this.fl?fu(this,a):P.l.Zb.d.hl.call(this,function(){this.Sm(function(){this.lp();fu(this,a)}.bind(this))}.bind(this))};function fu(a,b){P.P.WE(a.Wj,0,function(a){P.P.ZE(a,function(d){this.rD(d,a,b)}.bind(this))}.bind(a))}
f.rD=function(a,b,c){this.xP=b;this.OR=a;var d,e,g,k;A(this.OR,function(a){d=[a.mk||[],a.Ry||[],a.Kx||[]];e=[];A(d,function(a){A(a,function(a){g=P.P.$o(nl(a.file),this.Wj);a.ci instanceof P.s.vk&&a.ci.Sj&&(a.ci.labelMapFile=P.P.$o(a.ci.Sj.file,this.Wj),null!=a.ci.Sj.gx&&null==P.P.$o(a.ci.Sj.gx,this.Wj)&&(a.ci.colorTableFile=a.ci.Sj.gx));e.push(new P.l.qf(g,a.ci))}.bind(this))}.bind(this));k=new P.l.bg(e);k.Ur(P.P.$o(P.P.cF(a.element,this.xP[0].document),this.Wj));k.gh(a.element.getAttribute("name"));
k.cA(a);this.oe.push(k)}.bind(this));c&&c(this)};f.Sm=function(a){var b="",c=0,d=this.Wj.length;for(this.thumbnailFiles=[];c<d;c++)b=zk.Ut(this.Wj[c]),-1!=P.l.of.hI.indexOf(b)&&this.thumbnailFiles.push(this.Wj[c]);A(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=zk.mq(zk.dirname(this.thumbnailFiles[c]))){this.Ur(this.thumbnailFiles[c]);break}a&&a(this)};
f.Kk=function(a){ia(a)||(a=[a]);A(a,function(a){this.Wj.push(a)}.bind(this))};h("gxnat.vis.Slicer.thumbnailExtensions",P.l.of.hI);h("gxnat.vis.Slicer.prototype.folderQuerySuffix",P.l.of.prototype.Jq);h("gxnat.vis.Slicer.prototype.fileQuerySuffix",P.l.of.prototype.Rt);h("gxnat.vis.Slicer.prototype.fileContentsKey",P.l.of.prototype.Iq);h("gxnat.vis.Slicer.prototype.getFileList",P.l.of.prototype.hl);h("gxnat.vis.Slicer.prototype.convertToViewableGroups",P.l.of.prototype.rD);
h("gxnat.vis.Slicer.prototype.getThumbnailImage",P.l.of.prototype.Sm);h("gxnat.vis.Slicer.prototype.addFiles",P.l.of.prototype.Kk);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function ds(a,b,c,d){Bc.call(this);gu();hu();this.Rs={h:P.l.Zb,iS:P.l.of};this.ve=null!=a?a:ds.States.Gn;this.uP=b;this.eH=d;this.cv=Tg(d);this.Bi=this.Bi?this.Bi:[];a="/"!==c[0]?"/"+c:c;-1===this.Bi.indexOf(this.cv+a)&&this.Bi.push(-1===a.indexOf(this.cv)?this.cv+a:a);1==this.Bi.length&&(this.bf=new Sg(this.Bi[0]))}m(ds,Bc);h("xiv",ds);var Xt="fa";ds.ModalStates={Wf:"fullscreen",Dg:"popup",Qv:"fullscreen-popup",ri:"windowed",Gn:"demo",WI:"demp-fullscreen"};ds.States={Gn:"demo",PT:"live"};
function gu(){Pf.IMA=[Qf,null]}function hu(){document.body.style.overflow="hidden"}f=ds.prototype;f.Lv=t();f.PC=300;f.NF=1E3;f.lu=!1;f.nu=!1;f.DH=function(){};f.YC=function(){iu(this);this.show();if(this.ve==ds.States.Gn){S(this.yb.ka.Dg);S(this.yb.ka.Dn);var a=Wf(function(){delete a;ju(this)}.bind(this),this.NF)}else this.yb.md(this.uP),ku(this)};f.ZR=function(){};
function iu(a){a.yb=new V.ca;a.yb.pH(serverRoot);C(a.yb,Xt,a.$P.bind(a));window.onresize=function(){null!=this.yb&&this.yb.m()}.bind(a)}f.$P=function(){this.mf.cG(null,function(a){A(a,function(a){lu(this,a);this.yb.la.Be()}.bind(this))}.bind(this))};f.show=function(){this.yb.a().style.opacity=0;this.yb.n();C(this.yb.la.v,"d",this.Ez.bind(this));C(this.yb.ka.Dg,"click",this.xL.bind(this));C(this.yb.ka.Dn,"click",this.i.bind(this));this.yb.Xc.Sc(!0,0,this.NF);T.Hq(this.yb.a(),this.PC)};
function ju(a){var b=a.yb.la,c={slicer:(new ds.NR.EU).EN(),scan:(new ds.NR.DU).EN()},d;w(c,function(a,b){A(a,function(a){d="scan"==b?new this.Rs.h:new this.Rs.iS;d.Kk(a.files);d.mH(!0);d.EH(a.XW);d.Ur(a.gI);mu(this,d,a.DW)}.bind(this))}.bind(a));b.v.Nm()}
function ku(a){var b=a.yb.la.v,c=0;a.yb.la&&C(a.yb.la.v,"n",a.TQ.bind(a));a.mf=new Xg(a.Bi[0]);a.mf.$F(function(a){var e=lu(this,a);0==c&&(this.NO=a,this.JF=b.Sc(e[0]));1==c&&(this.nu=!0,this.OO=a,this.ry=b.Sc(e[1],this.JF));2==c&&(this.lu=!0,this.mu=a,this.MO=b.Sc(e[2],this.ry));c++}.bind(a))}function nu(a,b){var c=a.mf.Kq(b),d=a.mf.zE(b),e=0;w(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}
function lu(a,b){var c=a.mf.AE(b),d=nu(a,b);ou(a,d,c);return d}function pu(a,b){a.mf.ZF(b.originalUrl,null,function(a){if(b.ak("subjects")==this.bf.ak("subjects")&&this.nu){var d=this.bf.ak("experiments");this.mu=this.mf.Go(d);Ob(a,this.mu);Sb(a,0,0,this.mu);this.nu=!1}A(a,function(a){lu(this,a)}.bind(this))}.bind(a))}f.Ez=function(a){if(null!=a.Jf[this.Lv])switch(a=new Sg(a.Jf[this.Lv]),a.Tt()){case "subjects":pu(this,a);break;case "experiments":qu(this,a.originalUrl)}};
f.No=function(a){T.Pm(this.yb.a(),this.PC,a)};f.i=function(){this.No(this.RL.bind(this))};function qu(a,b){if(null==a.Jy)a.Jy=[];else if(-1<a.Jy.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.mf.Kq(a.mf.Go(b)),c=new P.l.Lc.Sy(c.projects[ih],c.subjects[ih],c.experiments[ih]);ru(a,b,function(){this.Jy.push(b);this.lu&&(this.lu=!1,w(this.ry.lf,function(){}.bind(this)))}.bind(a),c)}f.TQ=function(a){var b=a.Jf.rf.vt;a.Jf.rf.vt=0;a.Jf.rf.vt=b};
f.xL=function(){var a=open(this.eH+"/scripts/viewer/xiv/popup.html?"+this.Bi[0],"XImgView","width=1200,height=800");a.focus();var b=this.Bi[0];a.onload=function(){a.TW(b,ds.ModalStates.Dg,serverRoot)}.bind(this);this.i()};function ru(a,b,c,d){su(a,b,function(a){var b=a.bk;tu(this,a,b,function(a){mu(this,a)}.bind(this));null!=d&&(this.ac[b].Qr(d.kR),this.ac[b].Sr(d.oS),this.ac[b].Mr(d.dM))}.bind(a),c)}
function ou(a,b,c){var d=a.yb.la.v;d.uq(b);zippyNodes=d.Wx(b);A(zippyNodes,function(a,b){null==c||null==c[b]||null==a[this.Lv]&&(a[this.Lv]=c[b])}.bind(a))}function mu(a,b,c){var d=a.yb.la;null!=d&&(null==c&&null!=a.mf&&(c=nu(a,a.mf.Go(b.Eq))),"Scans"!=b.Aj&&c.push(b.Aj),b.hl(function(){if(0<b.oe.length){var a=d.Sk(b,c);if("Scans"!=b.Aj){var g=d.v.Wx(c);0<c.length&&1<g.length&&d.Sc(c[c.length-1],g[g.length-2])}d.Yz(this.yb.a());a.Zz(b.qp);a.GA()}}.bind(a)))}
function tu(a,b,c,d){a.ac=a.ac?a.ac:{};null==a.ac[c]&&(a.ac[c]=b,d(b))}
f.RL=function(){ds.d.i.call(this);document.body.style.overflow="visible";w(this.ac,function(a,b){a.i();delete this.ac[b]}.bind(this));delete this.ac;this.mf&&(this.mf.i(),delete this.mf);delete this.Bi;delete this.eH;delete this.cv;delete this.GW;null!=this.bf&&(this.bf.i(),delete this.bf);delete this.lu;delete this.nu;delete this.NO;delete this.OO;delete this.mu;delete this.JF;delete this.ry;delete this.MO;$c(this.yb);this.yb.i();S(this.yb.a());delete this.yb};
function su(a,b,c,d){var e=nb(a.Rs),g=0;w(a.Rs,function(a){du(b,a,c,function(){g++;g===e&&null!=d&&d()})})}
function uu(){var a=!0,b=ec(),c={Chrome:{dr:$b("Chrome")||$b("CriOS"),sr:11},IE:{dr:cc(),sr:11},Safari:{dr:dc(),sr:5.1},Opera:{dr:bc(),sr:12},Firefox:{dr:$b("Firefox"),sr:4}},d=!1;w(c,function(c){if(c.dr&&!d&&1==Ya(c.sr,b)){c=new U.qd;c.kC();c.lC();var g=c.rt();R(g,U.qd.CSS.vB);g.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.a().style.position="fixed";c.a().style.height="240px";c.Lk("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>");
c.Zi[0].style.top="120px";c.n();c.a().style.opacity=0;T.Hq(c.a(),400);a=!1;d=!0}});a&&!ds.checkForWebGL()&&(vu(),a=!1);return a}
function vu(){var a='<br>It looks like <a style="color: #00FFFF" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">WebGL or Experimental-WebGL</a> is disabled.<br><br>How to enable WebGL in ',b,c=':<br> <a  style="color: #00FFFF" href=';cc()?(b="Internet Explorer",c+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx</a>'):$b("Chrome")||$b("CriOS")?(b="Chrome",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):
$b("Firefox")?(b="Firefox",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):dc()?(b="Safari",c+='"https://discussions.apple.com/thread/3300585?start=0">https://discussions.apple.com/thread/3300585?start=0</a>'):bc()&&(b="Opera",c+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html</a>');a+=b+c;b=new U.qd;
b.kC();b.lC();c=b.rt();R(c,U.qd.CSS.vB);c.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";b.Lk(a);b.Zi[0].style.top="120px";b.n();b.a().style.position="fixed";b.a().style.opacity=0;T.Hq(b.a(),400)}ds.checkForWebGL=function(){var a=Rh("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};h("xiv.States",ds.States);h("xiv.loadCustomExtensions",gu);h("xiv.adjustDocumentStyle",hu);h("xiv.ModalStates",ds.ModalStates);
h("xiv.checkForWebGL",ds.checkForWebGL);h("xiv.isCompatible",uu);h("xiv.prototype.setServerRoot",ds.prototype.DH);h("xiv.prototype.setModalType",ds.prototype.ZR);h("xiv.prototype.begin",ds.prototype.YC);h("xiv.prototype.show",ds.prototype.show);h("xiv.prototype.hide",ds.prototype.No);h("xiv.prototype.dispose",ds.prototype.i);window["xiv.isCompatible"]=uu;window["xiv.checkForWebGL"]=ds.checkForWebGL;window["xiv.ModalStates"]=ds.ModalStates;ds.prototype.setServerRoot=ds.prototype.DH;
ds.prototype.begin=ds.prototype.YC;
