var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.qf=function(){return a.XG?a.XG:a.XG=new a}}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return"array"==ha(a)}function ja(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ka(a){return"string"==typeof a}function la(a){return"boolean"==typeof a}function ma(a){return"number"==typeof a}function na(a){return"function"==ha(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function pa(a){return a[ra]||(a[ra]=++ta)}
var ra="closure_uid_"+(1E9*Math.random()>>>0),ta=0;function ua(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function wa(a,b,c){wa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua:va;return wa.apply(null,arguments)}function xa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function h(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function k(a,b){function c(){}c.prototype=b.prototype;a.g=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.IX=function(a,c,g){var l=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,l)}};var n=n||{};n.VU=!0;n.Ef=function(a){eval("X.DEV === undefined")||window.console.time(a)};n.cf=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.NL=0;this.mU=function(){return this.NL++}};function za(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.XJ;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),g=Math.max(0,16-(c-a)),l=window.setTimeout(function(){b(c+g)},g);a=c+g;return l});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),g=new Uint8Array(d),l=a,m=0;l<c;++l,++m)g[m]=e[l];return d});h("$",Aa);
h("Function.prototype.bind",Function.prototype.bind);h("window.requestAnimationFrame",window.requestAnimationFrame);h("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba={},Da;function Ea(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ea);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}k(Ea,Error);Ea.prototype.name="CustomError";var Fa={};function Ga(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ha(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Ja(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ka(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function La(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ma=/(\.\d+)|(\d+)|(\D+)/g;function Na(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ma),d=b.toLowerCase().match(Ma),e=Math.min(c.length,d.length),g=0;g<e;g++){var l=c[g],m=d[g];if(l!=m)return c=parseInt(l,10),!isNaN(c)&&(d=parseInt(m,10),!isNaN(d)&&c-d)?c-d:l<m?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function Oa(a){if(!Pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ua,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Va,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Wa,"&#0;"));return a}var Qa=/&/g,Sa=/</g,Ta=/>/g,Ua=/"/g,Va=/'/g,Wa=/\x00/g,Pa=/[\x00&<>"']/;
function Ya(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Za(a){return Array.prototype.join.call(arguments,"")}
function $a(a,b){for(var c=0,d=La(String(a)).split("."),e=La(String(b)).split("."),g=Math.max(d.length,e.length),l=0;0==c&&l<g;l++){var m=d[l]||"",q=e[l]||"",p=/(\d*)(\D*)/g,t=/(\d*)(\D*)/g;do{var s=p.exec(m)||["","",""],u=t.exec(q)||["","",""];if(0==s[0].length&&0==u[0].length)break;c=ab(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||ab(0==s[2].length,0==u[2].length)||ab(s[2],u[2])}while(0==c)}return c}function ab(a,b){return a<b?-1:a>b?1:0}
var bb=2147483648*Math.random()|0;function r(){return"goog_"+bb++}function cb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function db(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function eb(a){var b=ka(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function fb(a,b){b.unshift(a);Ea.call(this,Ja.apply(null,b));b.shift()}k(fb,Ea);fb.prototype.name="AssertionError";function gb(a,b){throw new fb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var hb="closure_listenable_"+(1E6*Math.random()|0);function ib(a){return!(!a||!a[hb])}var kb=0;function lb(a,b,c,d,e){this.Hn=a;this.Mv=null;this.src=b;this.type=c;this.Yq=!!d;this.Qu=e;this.key=++kb;this.Mp=this.gu=!1}function mb(a){a.Mp=!0;a.Hn=null;a.Mv=null;a.src=null;a.Qu=null};function w(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function nb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function pb(a){var b=0,c;for(c in a)b++;return b}function qb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function rb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function sb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function ub(){var a=vb,b;for(b in a)return!1;return!0}function wb(a){for(var b in a)delete a[b]}function xb(a,b){b in a&&delete a[b]}
function yb(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function zb(a){var b={},c;for(c in a)b[c]=a[c];return b}var Ab="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Ab.length;g++)c=Ab[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function Db(a){var b=arguments.length;if(1==b&&ia(arguments[0]))return Db.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var Eb=Array.prototype,Fb=Eb.indexOf?function(a,b,c){return Eb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ka(a))return ka(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},A=Eb.forEach?function(a,b,c){Eb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},Gb=Eb.filter?function(a,b,c){return Eb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],
g=0,l=ka(a)?a.split(""):a,m=0;m<d;m++)if(m in l){var q=l[m];b.call(c,q,m,a)&&(e[g++]=q)}return e},Hb=Eb.map?function(a,b,c){return Eb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=ka(a)?a.split(""):a,l=0;l<d;l++)l in g&&(e[l]=b.call(c,g[l],l,a));return e},Ib=Eb.some?function(a,b,c){return Eb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1},Jb=Eb.every?function(a,b,c){return Eb.every.call(a,b,
c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return!1;return!0};function Kb(a){var b;a:{b=Lb;for(var c=a.length,d=ka(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:ka(a)?a.charAt(b):a[b]}function Mb(a,b){return 0<=Fb(a,b)}function Nb(a){if(!ia(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ob(a,b){Mb(a,b)||a.push(b)}
function Pb(a,b){var c=Fb(a,b),d;(d=0<=c)&&Eb.splice.call(a,c,1);return d}function Qb(a){return Eb.concat.apply(Eb,arguments)}function Rb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Sb(a,b,c,d){Eb.splice.apply(a,Tb(arguments,1))}function Tb(a,b,c){return 2>=arguments.length?Eb.slice.call(a,b):Eb.slice.call(a,b,c)};function Ub(a){this.src=a;this.$d={};this.Vs=0}f=Ub.prototype;f.add=function(a,b,c,d,e){var g=a.toString();a=this.$d[g];a||(a=this.$d[g]=[],this.Vs++);var l=Vb(a,b,d,e);-1<l?(b=a[l],c||(b.gu=!1)):(b=new lb(b,this.src,g,!!d,e),b.gu=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.$d))return!1;var e=this.$d[a];b=Vb(e,b,c,d);return-1<b?(mb(e[b]),Eb.splice.call(e,b,1),0==e.length&&(delete this.$d[a],this.Vs--),!0):!1};
function Wb(a,b){var c=b.type;if(!(c in a.$d))return!1;var d=Pb(a.$d[c],b);d&&(mb(b),0==a.$d[c].length&&(delete a.$d[c],a.Vs--));return d}f.vh=function(a){a=a&&a.toString();var b=0,c;for(c in this.$d)if(!a||c==a){for(var d=this.$d[c],e=0;e<d.length;e++)++b,mb(d[e]);delete this.$d[c];this.Vs--}return b};f.xr=function(a,b,c,d){a=this.$d[a.toString()];var e=-1;a&&(e=Vb(a,b,c,d));return-1<e?a[e]:null};
f.Ru=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return nb(this.$d,function(a){for(var l=0;l<a.length;++l)if(!(c&&a[l].type!=d||e&&a[l].Yq!=b))return!0;return!1})};function Vb(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e];if(!g.Mp&&g.Hn==b&&g.Yq==!!c&&g.Qu==d)return e}return-1};var Xb;a:{var Yb=ba.navigator;if(Yb){var Zb=Yb.userAgent;if(Zb){Xb=Zb;break a}}Xb=""}function $b(a){return-1!=Xb.indexOf(a)}function ac(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function bc(){return $b("Opera")||$b("OPR")}function cc(){return $b("Trident")||$b("MSIE")}function dc(){return $b("Safari")&&!$b("Chrome")&&!$b("CriOS")&&!$b("Android")}function fc(){return $b("Chrome")||$b("CriOS")}
function gc(){var a=Xb;if(cc()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(bc())return a=ac(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=ac(a);return a[2]&&a[2][1]?a[2][1]:""};var hc,ic,jc;function kc(){return ba.navigator||null}var lc=bc(),mc=cc(),nc=$b("Gecko")&&-1==Xb.toLowerCase().indexOf("webkit")&&!($b("Trident")||$b("MSIE")),oc=-1!=Xb.toLowerCase().indexOf("webkit"),pc,qc=kc();pc=qc&&qc.platform||"";hc=-1!=pc.indexOf("Mac");ic=-1!=pc.indexOf("Win");jc=-1!=pc.indexOf("Linux");var rc=!!kc()&&-1!=(kc().appVersion||"").indexOf("X11");function sc(){var a=ba.document;return a?a.documentMode:void 0}
var tc=function(){var a="",b;if(lc&&ba.opera)return a=ba.opera.version,na(a)?a():a;nc?b=/rv\:([^\);]+)(\)|;)/:mc?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:oc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Xb))?a[1]:"");return mc&&(b=sc(),b>parseFloat(a))?String(b):a}(),uc={};function vc(a){return uc[a]||(uc[a]=0<=$a(tc,a))}function wc(a){return mc&&xc>=a}var yc=ba.document,xc=yc&&mc?sc()||("CSS1Compat"==yc.compatMode?parseInt(tc,10):5):void 0;var zc=!mc||wc(9),Ac=!mc||wc(9),Bc=mc&&!vc("9");!oc||vc("528");nc&&vc("1.9b")||mc&&vc("8")||lc&&vc("9.5")||oc&&vc("528");nc&&!vc("8")||mc&&vc("9");function Cc(){0!=Ec&&(Fc[pa(this)]=this)}var Ec=0,Fc={};Cc.prototype.ln=!1;Cc.prototype.k=function(){if(!this.ln&&(this.ln=!0,this.i(),0!=Ec)){var a=pa(this);delete Fc[a]}};function Gc(a,b){a.fs||(a.fs=[]);a.fs.push(ca(void 0)?wa(b,void 0):b)}Cc.prototype.i=function(){if(this.fs)for(;this.fs.length;)this.fs.shift()()};function Hc(a){a&&"function"==typeof a.k&&a.k()}function Ic(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?Ic.apply(null,d):Hc(d)}};function Jc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.ti=!1;this.ns=!0}Jc.prototype.i=function(){};Jc.prototype.k=function(){};Jc.prototype.stopPropagation=function(){this.ti=!0};Jc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.ns=!1};function Kc(a){a.preventDefault()};function Lc(a){Lc[" "](a);return a}Lc[" "]=ea;function Mc(a,b){Jc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.FA=!1;this.Yd=null;a&&this.Ta(a,b)}k(Mc,Jc);var Nc=[1,4,2];f=Mc.prototype;
f.Ta=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(nc){var e;a:{try{Lc(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=oc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=oc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.FA=hc?a.metaKey:a.ctrlKey;this.state=a.state;this.Yd=a;a.defaultPrevented&&this.preventDefault()};function Oc(a){return(zc?0==a.Yd.button:"click"==a.type?!0:!!(a.Yd.button&Nc[0]))&&!(oc&&hc&&a.ctrlKey)}
f.stopPropagation=function(){Mc.g.stopPropagation.call(this);this.Yd.stopPropagation?this.Yd.stopPropagation():this.Yd.cancelBubble=!0};f.preventDefault=function(){Mc.g.preventDefault.call(this);var a=this.Yd;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Bc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.XN=function(){return this.Yd};f.i=function(){};var Pc="closure_lm_"+(1E6*Math.random()|0),Qc={},Rc=0;function C(a,b,c,d,e){if(ia(b)){for(var g=0;g<b.length;g++)C(a,b[g],c,d,e);return null}c=Sc(c);return ib(a)?a.I(b,c,d,e):Tc(a,b,c,!1,d,e)}function Tc(a,b,c,d,e,g){if(!b)throw Error("Invalid event type");var l=!!e,m=Uc(a);m||(a[Pc]=m=new Ub(a));c=m.add(b,c,d,e,g);if(c.Mv)return c;d=Wc();c.Mv=d;d.src=a;d.Hn=c;a.addEventListener?a.addEventListener(b.toString(),d,l):a.attachEvent(Xc(b.toString()),d);Rc++;return c}
function Wc(){var a=Yc,b=Ac?function(c){return a.call(b.src,b.Hn,c)}:function(c){c=a.call(b.src,b.Hn,c);if(!c)return c};return b}function Zc(a,b,c,d,e){if(ia(b)){for(var g=0;g<b.length;g++)Zc(a,b[g],c,d,e);return null}c=Sc(c);return ib(a)?a.Az(b,c,d,e):Tc(a,b,c,!0,d,e)}function $c(a,b,c,d,e){if(ia(b))for(var g=0;g<b.length;g++)$c(a,b[g],c,d,e);else c=Sc(c),ib(a)?a.gc(b,c,d,e):a&&(a=Uc(a))&&(b=a.xr(b,c,!!d,e))&&ad(b)}
function ad(a){if(ma(a)||!a||a.Mp)return!1;var b=a.src;if(ib(b))return Wb(b.dh,a);var c=a.type,d=a.Mv;b.removeEventListener?b.removeEventListener(c,d,a.Yq):b.detachEvent&&b.detachEvent(Xc(c),d);Rc--;(c=Uc(b))?(Wb(c,a),0==c.Vs&&(c.src=null,b[Pc]=null)):mb(a);return!0}function bd(a){if(a)if(ib(a))a.dh&&a.dh.vh(void 0);else if(a=Uc(a)){var b=0,c;for(c in a.$d)for(var d=a.$d[c].concat(),e=0;e<d.length;++e)ad(d[e])&&++b}}
function cd(a,b){if(ib(a))return a.Ru(b,void 0);var c=Uc(a);return!!c&&c.Ru(b,void 0)}function Xc(a){return a in Qc?Qc[a]:Qc[a]="on"+a}function dd(a,b,c,d){var e=1;if(a=Uc(a))if(b=a.$d[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var g=b[a];g&&g.Yq==c&&!g.Mp&&(e&=!1!==ed(g,d))}return Boolean(e)}function ed(a,b){var c=a.Hn,d=a.Qu||a.src;a.gu&&ad(a);return c.call(d,b)}
function Yc(a,b){if(a.Mp)return!0;if(!Ac){var c=b||da("window.event"),d=new Mc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var g=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(l){g=!0}if(g||void 0==c.returnValue)c.returnValue=!0}c=[];for(g=d.currentTarget;g;g=g.parentNode)c.push(g);for(var g=a.type,m=c.length-1;!d.ti&&0<=m;m--)d.currentTarget=c[m],e&=dd(c[m],g,!0,d);for(m=0;!d.ti&&m<c.length;m++)d.currentTarget=c[m],e&=dd(c[m],g,!1,d)}return e}return ed(a,new Mc(b,this))}
function Uc(a){a=a[Pc];return a instanceof Ub?a:null}var fd="__closure_events_fn_"+(1E9*Math.random()>>>0);function Sc(a){return na(a)?a:a[fd]||(a[fd]=function(b){return a.handleEvent(b)})};function gd(){Cc.call(this);this.dh=new Ub(this);this.aM=this;this.Iv=null}k(gd,Cc);gd.prototype[hb]=!0;f=gd.prototype;f.WA=function(a){this.Iv=a};f.addEventListener=function(a,b,c,d){C(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){$c(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Iv;if(c)for(b=[];c;c=c.Iv)b.push(c);var c=this.aM,d=a.type||a;if(ka(a))a=new Jc(a,c);else if(a instanceof Jc)a.target=a.target||c;else{var e=a;a=new Jc(d,c);Bb(a,e)}var e=!0,g;if(b)for(var l=b.length-1;!a.ti&&0<=l;l--)g=a.currentTarget=b[l],e=hd(g,d,!0,a)&&e;a.ti||(g=a.currentTarget=c,e=hd(g,d,!0,a)&&e,a.ti||(e=hd(g,d,!1,a)&&e));if(b)for(l=0;!a.ti&&l<b.length;l++)g=a.currentTarget=b[l],e=hd(g,d,!1,a)&&e;return e};
f.i=function(){gd.g.i.call(this);this.dh&&this.dh.vh(void 0);this.Iv=null};f.I=function(a,b,c,d){return this.dh.add(String(a),b,!1,c,d)};f.Az=function(a,b,c,d){return this.dh.add(String(a),b,!0,c,d)};f.gc=function(a,b,c,d){return this.dh.remove(String(a),b,c,d)};function hd(a,b,c,d){b=a.dh.$d[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,g=0;g<b.length;++g){var l=b[g];if(l&&!l.Mp&&l.Yq==c){var m=l.Hn,q=l.Qu||l.src;l.gu&&Wb(a.dh,l);e=!1!==m.call(q,d)&&e}}return e&&!1!=d.ns}
f.xr=function(a,b,c,d){return this.dh.xr(String(a),b,c,d)};f.Ru=function(a,b){return this.dh.Ru(ca(a)?String(a):void 0,b)};function id(){gd.call(this);this.t="base";this.Fe=window["X.counter"].mU();this.T=!1}k(id,gd);id.prototype.__defineGetter__("classname",function(){return this.t});id.prototype.__defineGetter__("id",function(){return this.Fe});h("X.base",id);function jd(a,b){id.call(this);this.t="triplets";this.Sh=Infinity;this.Ph=-Infinity;this.Th=Infinity;this.Qh=-Infinity;this.Uh=Infinity;this.Rh=-Infinity;this.Gt=[0,0,0];this.pb=0;this.Xc=new Float32Array(a);null!=b&&(this.Xc=b.Xc.subarray(0,b.Xc.length),this.pb=this.Xc.length,this.Sh=b.Sh,this.Ph=b.Ph,this.Th=b.Th,this.Qh=b.Qh,this.Uh=b.Uh,this.Rh=b.Rh,this.Gt=b.Gt.slice())}k(jd,id);f=jd.prototype;
f.add=function(a,b,c){this.Sh=Math.min(this.Sh,a);this.Ph=Math.max(this.Ph,a);this.Th=Math.min(this.Th,b);this.Qh=Math.max(this.Qh,b);this.Uh=Math.min(this.Uh,c);this.Rh=Math.max(this.Rh,c);this.Gt=[(this.Sh+this.Ph)/2,(this.Th+this.Qh)/2,(this.Uh+this.Rh)/2];this.T=!0;this.Xc[this.pb++]=a;this.Xc[this.pb++]=b;this.Xc[this.pb++]=c;return this.pb/3};f.resize=function(){if(this.pb!=this.Xc.length){var a=new Float32Array(this.pb);a.set(this.Xc.subarray(0,this.pb));this.Xc=a}};
f.get=function(a){a*=3;return[this.Xc[a],this.Xc[a+1],this.Xc[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Xc=new Float32Array(this.Xc.length);this.T=!0};jd.prototype.__defineGetter__("count",function(){this.resize();return this.Xc.length/3});jd.prototype.__defineGetter__("length",function(){this.resize();return this.Xc.length});h("X.triplets",jd);h("X.triplets.prototype.add",jd.prototype.add);h("X.triplets.prototype.resize",jd.prototype.resize);
h("X.triplets.prototype.get",jd.prototype.get);h("X.triplets.prototype.remove",jd.prototype.remove);h("X.triplets.prototype.clear",jd.prototype.clear);function kd(){id.call(this);this.t="indexer";this.rx=[];this.If={}}k(kd,id);kd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.If||(this.If[b]=this.rx.length,this.rx.push(a));return this.If[b]};kd.prototype.unique=function(){return this.rx};function ld(a){id.call(this);this.t="file";this.Rt=a;this.T=!0}k(ld,id);function md(){this.Li=this.Ca=null}md.prototype.__defineSetter__("file",function(a){if(null==a||ia(a)&&0==a.length)this.Ca=null;else{if(ia(a)){if(1==a.length){this.Ca=new ld(a[0]);return}this.Ca=Hb(a,function(a){var c=new F;c.Ca=new ld(a);return c})}else this.Ca=new ld(a);this.Li=null}});md.prototype.__defineGetter__("file",function(){return this.Ca?ia(this.Ca)?this.Ca.map(function(a){return a.Ca.Rt}):this.Ca.Rt:""});
md.prototype.__defineGetter__("filedata",function(){return ia(this.Ca)?this.Ca.map(function(a){return a.Li}):this.Li});md.prototype.__defineSetter__("filedata",function(a){if(null==a||ia(a)&&0==a.length)this.Li=null;if(ia(a))if(1==a.length)this.Li=a[0];else{var b=this.Ca.length,c;for(c=0;c<b;c++)this.Ca[c].Li=a[c]}else this.Li=a});function nd(){return null};function od(a,b,c){return Math.min(Math.max(a,b),c)};function pd(a,b){this.rc={};this.Vb=[];this.Zj=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.ux(a)}f=pd.prototype;f.ek=function(){return this.Zj};f.yn=function(){qd(this);for(var a=[],b=0;b<this.Vb.length;b++)a.push(this.rc[this.Vb[b]]);return a};f.wr=function(){qd(this);return this.Vb.concat()};
f.Zx=function(a){for(var b=0;b<this.Vb.length;b++){var c=this.Vb[b];if(rd(this.rc,c)&&this.rc[c]==a)return!0}return!1};f.ep=function(a,b){if(this===a)return!0;if(this.Zj!=a.ek())return!1;var c=b||sd;qd(this);for(var d,e=0;d=this.Vb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function sd(a,b){return a===b}f.Mr=function(){return 0==this.Zj};f.clear=function(){this.rc={};this.Zj=this.Vb.length=0};
f.remove=function(a){return rd(this.rc,a)?(delete this.rc[a],this.Zj--,this.Vb.length>2*this.Zj&&qd(this),!0):!1};function qd(a){if(a.Zj!=a.Vb.length){for(var b=0,c=0;b<a.Vb.length;){var d=a.Vb[b];rd(a.rc,d)&&(a.Vb[c++]=d);b++}a.Vb.length=c}if(a.Zj!=a.Vb.length){for(var e={},c=b=0;b<a.Vb.length;)d=a.Vb[b],rd(e,d)||(a.Vb[c++]=d,e[d]=1),b++;a.Vb.length=c}}f.get=function(a,b){return rd(this.rc,a)?this.rc[a]:b};f.set=function(a,b){rd(this.rc,a)||(this.Zj++,this.Vb.push(a));this.rc[a]=b};
f.ux=function(a){var b;a instanceof pd?(b=a.wr(),a=a.yn()):(b=rb(a),a=qb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.wr(),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};f.clone=function(){return new pd(this)};f.wB=function(){for(var a=new pd,b=0;b<this.Vb.length;b++){var c=this.Vb[b];a.set(this.rc[c],c)}return a};function rd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function td(){id.call(this);this.t="colortable";this.If=new pd;za(this,new md)}k(td,id);td.prototype.add=function(a,b,c,d,e,g){if(!(ma(a)&&ma(c)&&ma(d)&&ma(e)&&ma(g)))throw Error("Invalid color table entry.");this.If.set(a,[b,c,d,e,g]);this.T=!0};td.prototype.get=function(a){return this.If.get(a)};h("X.colortable.prototype.get",td.prototype.get);function ud(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}ud.prototype.clone=function(){return new ud(this.x,this.y,this.z)};ud.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};ud.prototype.sB=function(){return[this.x,this.y,this.z]};function vd(a,b,c){this.x=a;this.y=b;this.z=c}k(vd,ud);f=vd.prototype;f.clone=function(){return new vd(this.x,this.y,this.z)};f.oi=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.uc=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.oi())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.Ld=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.ep=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function wd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function xd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function yd(a,b){return new vd(a.x+b.x,a.y+b.y,a.z+b.z)}function zd(a,b){return new vd(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};n.ha=vd;f=n.ha.prototype;f.clone=vd.prototype.clone;f.oi=vd.prototype.oi;f.scale=vd.prototype.scale;f.uc=vd.prototype.uc;f.add=vd.prototype.add;f.Ld=vd.prototype.Ld;f.normalize=function(){var a=this.oi();return 0==a?this.scale(0):this.scale(1/a)};n.ha.ul=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};n.ha.jn=zd;n.ha.ry=wd;n.ha.kv=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new vd(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};n.ha.prototype.__defineGetter__("xx",function(){return this.x});
n.ha.prototype.__defineGetter__("yy",function(){return this.y});n.ha.prototype.__defineGetter__("zz",function(){return this.z});h("X.vector",n.ha);h("X.vector.prototype.clone",n.ha.prototype.clone);h("X.vector.prototype.magnitude",n.ha.prototype.oi);h("X.vector.prototype.scale",n.ha.prototype.scale);h("X.vector.prototype.invert",n.ha.prototype.uc);h("X.vector.prototype.normalize",n.ha.prototype.normalize);h("X.vector.prototype.add",n.ha.prototype.add);h("X.vector.prototype.subtract",n.ha.prototype.Ld);
h("X.vector.dot",n.ha.ul);h("X.vector.cross",n.ha.jn);h("X.vector.distance",n.ha.ry);h("X.vector.lerp",n.ha.kv);function Ad(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Ad.prototype.BYTES_PER_ELEMENT=8;Ad.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Ad.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{Ad.BYTES_PER_ELEMENT=8}catch(Bd){}Ad.prototype.BYTES_PER_ELEMENT=Ad.prototype.BYTES_PER_ELEMENT;Ad.prototype.set=Ad.prototype.set;Ad.prototype.toString=Ad.prototype.toString;h("Float64Array",Ad)};function Cd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Cd.prototype.BYTES_PER_ELEMENT=4;Cd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Cd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(Cd.BYTES_PER_ELEMENT=4,Cd.prototype.BYTES_PER_ELEMENT=Cd.prototype.BYTES_PER_ELEMENT,Cd.prototype.set=Cd.prototype.set,Cd.prototype.toString=Cd.prototype.toString,h("Float32Array",Cd));function Dd(){return new Float32Array(3)}function Ed(a,b,c){var d=Dd();d[0]=a;d[1]=b;d[2]=c;return d}function Fd(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function Gd(){return new Float32Array(4)}function Hd(a,b,c,d){var e=Gd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Id(){return new Float32Array(16)}function Jd(){var a=Id();a[0]=a[5]=a[10]=a[15]=1;return a}function Kd(a,b,c,d,e,g,l,m,q,p,t,s,u,v,D,B,I){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=g;a[5]=l;a[6]=m;a[7]=q;a[8]=p;a[9]=t;a[10]=s;a[11]=u;a[12]=v;a[13]=D;a[14]=B;a[15]=I;return a}function Ld(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Nd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function Od(a,b,c,d,e,g){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=g}
function Pd(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Qd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Rd(a,b,c){var d=a[0],e=a[1],g=a[2],l=a[3],m=a[4],q=a[5],p=a[6],t=a[7],s=a[8],u=a[9],v=a[10],D=a[11],B=a[12],I=a[13],G=a[14];a=a[15];var Q=b[0],M=b[1],L=b[2],J=b[3],H=b[4],O=b[5],N=b[6],Y=b[7],K=b[8],y=b[9],z=b[10],ga=b[11],Z=b[12],E=b[13],W=b[14];b=b[15];c[0]=d*Q+m*M+s*L+B*J;c[1]=e*Q+q*M+u*L+I*J;c[2]=g*Q+p*M+v*L+G*J;c[3]=l*Q+t*M+D*L+a*J;c[4]=d*H+m*O+s*N+B*Y;c[5]=e*H+q*O+u*N+I*Y;c[6]=g*H+p*O+v*N+G*Y;c[7]=l*H+t*O+D*N+a*Y;c[8]=d*K+m*y+s*z+B*ga;c[9]=e*K+q*y+u*z+I*ga;c[10]=g*K+p*y+v*z+G*ga;c[11]=
l*K+t*y+D*z+a*ga;c[12]=d*Z+m*E+s*W+B*b;c[13]=e*Z+q*E+u*W+I*b;c[14]=g*Z+p*E+v*W+G*b;c[15]=l*Z+t*E+D*W+a*b;return c}
function Sd(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],l=a[4],m=a[5],q=a[6],p=a[7],t=a[8],s=a[9],u=a[10],v=a[11],D=a[12],B=a[13],I=a[14],G=a[15],Q=c*m-d*l,M=c*q-e*l,L=c*p-g*l,J=d*q-e*m,H=d*p-g*m,O=e*p-g*q,N=t*B-s*D,Y=t*I-u*D,K=t*G-v*D,y=s*I-u*B,z=s*G-v*B,ga=u*G-v*I,Z=Q*ga-M*z+L*y+J*K-H*Y+O*N;if(0==Z)return!1;Z=1/Z;b[0]=(m*ga-q*z+p*y)*Z;b[1]=(-d*ga+e*z-g*y)*Z;b[2]=(B*O-I*H+G*J)*Z;b[3]=(-s*O+u*H-v*J)*Z;b[4]=(-l*ga+q*K-p*Y)*Z;b[5]=(c*ga-e*K+g*Y)*Z;b[6]=(-D*O+I*L-G*M)*Z;b[7]=(t*O-u*L+v*M)*Z;b[8]=(l*z-m*K+p*
N)*Z;b[9]=(-c*z+d*K-g*N)*Z;b[10]=(D*H-B*L+G*Q)*Z;b[11]=(-t*H+s*L-v*Q)*Z;b[12]=(-l*y+m*Y-q*N)*Z;b[13]=(c*y-d*Y+e*N)*Z;b[14]=(-D*J+B*M-I*Q)*Z;b[15]=(t*J-s*M+u*Q)*Z;return!0}function Td(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Ud(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+g*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+g*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+g*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+g*a[11]+b*a[15];return c}function Vd(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],g=a[2]*b+a[6]*c+a[10]*d+a[14],l=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=g;a[15]=l;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);n.B={};n.B.sH=function(a,b,c,d){c=c.Ld(b);c.normalize();d=n.ha.jn(c,d);d.normalize();var e=n.ha.jn(d,c);e.normalize();c.uc();Od(a,0,d.x,d.y,d.z,0);Od(a,1,e.x,e.y,e.z,0);Od(a,2,c.x,c.y,c.z,0);Vd(a,-b.x,-b.y,-b.z);return a};n.B.Oc=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new n.ha((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
n.B.bU=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Qd(a,b,d);Qd(a,c,e);Pd(a,b,e);Pd(a,c,d);return a};n.B.aU=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Nd(a,b,d);Nd(a,c,e);Ld(a,b,e);Ld(a,c,d);return a};n.B.Fr=Jd;n.B.clone=function(a){var b=Id();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
n.B.wB=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],g=a[6],l=a[7],m=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=g;b[11]=a[14];b[12]=e;b[13]=l;b[14]=m}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
n.B.gN=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],l=a[5],m=a[6],q=a[7],p=a[8],t=a[9],s=a[10],u=a[11],v=a[12],D=a[13],B=a[14];a=a[15];return(b*l-c*g)*(s*a-u*B)-(b*m-d*g)*(t*a-u*D)+(b*q-e*g)*(t*B-s*D)+(c*m-d*l)*(p*a-u*v)-(c*q-e*l)*(p*B-s*v)+(d*q-e*m)*(p*D-t*v)};n.B.uc=Sd;n.B.Hz=function(a,b,c,d,e){var g=b/2;b=e-d;var l=Math.sin(g);if(0==b||0==l||0==c)return a;g=Math.cos(g)/l;return Kd(a,g/c,0,0,0,0,g,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
n.B.IQ=function(a,b,c,d,e,g,l){return Kd(a,2*g/(c-b),0,0,0,0,2*g/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(l+g)/(l-g),-1,0,0,-(2*l*g)/(l-g),0)};n.B.JQ=function(a,b,c,d,e,g,l){return Kd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(l-g),0,-(c+b)/(c-b),-(e+d)/(e-d),-(l+g)/(l-g),1)};n.B.multiply=Rd;n.B.EH=Ud;n.B.translate=Vd;n.B.scale=function(a,b,c,d){return Kd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
n.B.rotate=function(a,b,c,d,e){var g=a[0],l=a[1],m=a[2],q=a[3],p=a[4],t=a[5],s=a[6],u=a[7],v=a[8],D=a[9],B=a[10],I=a[11],G=Math.cos(b),Q=Math.sin(b),M=1-G;b=c*c*M+G;var L=c*d*M+e*Q,J=c*e*M-d*Q,H=c*d*M-e*Q,O=d*d*M+G,N=d*e*M+c*Q,Y=c*e*M+d*Q;c=d*e*M-c*Q;e=e*e*M+G;return Kd(a,g*b+p*L+v*J,l*b+t*L+D*J,m*b+s*L+B*J,q*b+u*L+I*J,g*H+p*O+v*N,l*H+t*O+D*N,m*H+s*O+B*N,q*H+u*O+I*N,g*Y+p*c+v*e,l*Y+t*c+D*e,m*Y+s*c+B*e,q*Y+u*c+I*e,a[12],a[13],a[14],a[15])};
n.B.Qv=function(a,b){var c=a[4],d=a[5],e=a[6],g=a[7],l=a[8],m=a[9],q=a[10],p=a[11],t=Math.cos(b),s=Math.sin(b);a[4]=c*t+l*s;a[5]=d*t+m*s;a[6]=e*t+q*s;a[7]=g*t+p*s;a[8]=c*-s+l*t;a[9]=d*-s+m*t;a[10]=e*-s+q*t;a[11]=g*-s+p*t;return a};n.B.Rv=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],l=a[8],m=a[9],q=a[10],p=a[11],t=Math.cos(b),s=Math.sin(b);a[0]=c*t+l*-s;a[1]=d*t+m*-s;a[2]=e*t+q*-s;a[3]=g*t+p*-s;a[8]=c*s+l*t;a[9]=d*s+m*t;a[10]=e*s+q*t;a[11]=g*s+p*t;return a};
n.B.Sv=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],l=a[4],m=a[5],q=a[6],p=a[7],t=Math.cos(b),s=Math.sin(b);a[0]=c*t+l*s;a[1]=d*t+m*s;a[2]=e*t+q*s;a[3]=g*t+p*s;a[4]=c*-s+l*t;a[5]=d*-s+m*t;a[6]=e*-s+q*t;a[7]=g*-s+p*t;return a};h("X.matrix.identity",n.B.Fr);h("X.matrix.clone",n.B.clone);h("X.matrix.transpose",n.B.wB);h("X.matrix.determinant",n.B.gN);h("X.matrix.invert",n.B.uc);h("X.matrix.multiply",n.B.multiply);h("X.matrix.multiplyByVector",n.B.Oc);h("X.matrix.multiplyByVec4",n.B.EH);
h("X.matrix.makePerspective",n.B.Hz);h("X.matrix.makeFrustum",n.B.IQ);h("X.matrix.makeOrtho",n.B.JQ);h("X.matrix.makeLookAt",n.B.sH);h("X.matrix.translate",n.B.translate);h("X.matrix.scale",n.B.scale);h("X.matrix.rotate",n.B.rotate);h("X.matrix.rotateX",n.B.Qv);h("X.matrix.rotateY",n.B.Rv);h("X.matrix.rotateZ",n.B.Sv);h("X.matrix.swapRows",n.B.bU);h("X.matrix.swapCols",n.B.aU);function Wd(){id.call(this);this.t="transform";this.pc=n.B.Fr()}k(Wd,id);Wd.prototype.__defineGetter__("matrix",function(){return this.pc});Wd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.pc=a;this.Ba()});f=Wd.prototype;f.Qv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.B.Qv(this.pc,a*Math.PI/180);this.Ba()};
f.Rv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.B.Rv(this.pc,a*Math.PI/180);this.Ba()};f.Sv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.B.Sv(this.pc,a*Math.PI/180);this.Ba()};f.DJ=function(a){if(!ma(a))throw Error("Invalid distance.");n.B.translate(this.pc,a,0,0);this.Ba()};f.EJ=function(a){if(!ma(a))throw Error("Invalid distance.");n.B.translate(this.pc,0,a,0);this.Ba()};
f.FJ=function(a){if(!ma(a))throw Error("Invalid distance.");n.B.translate(this.pc,0,0,a);this.Ba()};function Xd(a,b,c){a.pc[b+4*c]*=-1;a.Ba()}f.NN=function(){Xd(this,0,0)};f.ON=function(){Xd(this,1,1)};f.PN=function(){Xd(this,2,2)};f.Ba=function(){this.T=!0};h("X.transform",Wd);h("X.transform.prototype.rotateX",Wd.prototype.Qv);h("X.transform.prototype.rotateY",Wd.prototype.Rv);h("X.transform.prototype.rotateZ",Wd.prototype.Sv);h("X.transform.prototype.translateX",Wd.prototype.DJ);
h("X.transform.prototype.translateY",Wd.prototype.EJ);h("X.transform.prototype.translateZ",Wd.prototype.FJ);h("X.transform.prototype.flipX",Wd.prototype.NN);h("X.transform.prototype.flipY",Wd.prototype.ON);h("X.transform.prototype.flipZ",Wd.prototype.PN);h("X.transform.prototype.modified",Wd.prototype.Ba);function Yd(){id.call(this);this.t="texture";this.dl=this.Oh=this.Ca=null;this.lx=this.mx=0;this.ZC=!1;za(this,new md)}k(Yd,id);Yd.prototype.__defineSetter__("rawData",function(a){this.dl=a;this.T=!0});Yd.prototype.__defineSetter__("rawDataHeight",function(a){this.lx=a;this.T=!0});Yd.prototype.__defineSetter__("rawDataWidth",function(a){this.mx=a;this.T=!0});Yd.prototype.__defineSetter__("grayscale",function(a){this.ZC=a;this.T=!0});h("X.texture",Yd);function Zd(){this.lf=$d;this.pd=new Wd;this.kb=[1,1,1];this.Oo=this.Cb=this.Ud=this.ya=this.J=null;this.Jo=[];this.bc=!0;this.Io=this.Hq=1;this.Ao=null;this.yq=!1;this.je=1;this.Ee=0;this.Gq=!0}var $d="TRIANGLES";Zd.prototype.__defineSetter__("type",function(a){return this.lf=a});Zd.prototype.__defineGetter__("type",function(){return this.lf});Zd.prototype.__defineGetter__("texture",function(){this.Cb||(this.Cb=new Yd);return this.Cb});Zd.prototype.__defineGetter__("transform",function(){return this.pd});
Zd.prototype.__defineGetter__("points",function(){return this.J});Zd.prototype.__defineSetter__("points",function(a){this.J=a});Zd.prototype.__defineGetter__("normals",function(){return this.ya});Zd.prototype.__defineSetter__("normals",function(a){this.ya=a});Zd.prototype.__defineGetter__("colors",function(){return this.Ud});Zd.prototype.__defineSetter__("colors",function(a){this.Ud=a});Zd.prototype.__defineGetter__("color",function(){return this.kb});
Zd.prototype.__defineSetter__("color",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.kb=a;this.T=!0});Zd.prototype.__defineGetter__("opacity",function(){return this.je});Zd.prototype.__defineSetter__("opacity",function(a){if(!ma(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.je=a;this.T=!0});Zd.prototype.__defineGetter__("caption",function(){return this.Ao});
Zd.prototype.__defineSetter__("caption",function(a){this.Ao=a;this.T=!0});Zd.prototype.__defineGetter__("visible",function(){return this.bc});Zd.prototype.__defineSetter__("visible",function(a){for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.bc=a;this.T=!0});Zd.prototype.__defineGetter__("pointsize",function(){return this.Hq});Zd.prototype.__defineSetter__("pointsize",function(a){if(!ma(a))throw Error("Invalid point size.");this.Hq=a;this.T=!0});
Zd.prototype.__defineGetter__("magicmode",function(){return this.yq});Zd.prototype.__defineSetter__("magicmode",function(a){if(!la(a))throw Error("Invalid magic mode setting.");this.yq=a;this.T=!0});Zd.prototype.__defineGetter__("linewidth",function(){return this.Io});Zd.prototype.__defineSetter__("linewidth",function(a){if(!ma(a))throw Error("Invalid line width.");this.Io=a;this.T=!0});Zd.prototype.__defineGetter__("pickable",function(){return this.Gq});
Zd.prototype.__defineSetter__("pickable",function(a){if(!la(a))throw Error("Invalid pickable setting.");this.Gq=a;this.T=!0});Zd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.Oo});Zd.prototype.__defineSetter__("textureCoordinateMap",function(){});function ae(){this.Jf=Infinity;this.oc=this.Wc=-Infinity;this.qc=Infinity;this.$k=[0,0,0];this.Yk=[1,1,1]}ae.prototype.__defineGetter__("lowerThreshold",function(){return this.oc});ae.prototype.__defineSetter__("lowerThreshold",function(a){this.oc=a});ae.prototype.__defineGetter__("upperThreshold",function(){return this.qc});ae.prototype.__defineSetter__("upperThreshold",function(a){this.qc=a});ae.prototype.__defineGetter__("min",function(){return this.Jf});ae.prototype.__defineGetter__("max",function(){return this.Wc});
ae.prototype.__defineGetter__("minColor",function(){return this.$k});ae.prototype.__defineSetter__("minColor",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid min. color.");this.$k=a});ae.prototype.__defineGetter__("maxColor",function(){return this.Yk});ae.prototype.__defineSetter__("maxColor",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid max. color.");this.Yk=a});function be(){id.call(this);this.t="scalars";this.vq=this.Nb=null;this.lD=!0;this.ax=0;za(this,new md);za(this,new ae);this.$k=[0,1,0];this.Yk=[1,0,0]}k(be,id);be.prototype.__defineGetter__("array",function(){return this.Nb});be.prototype.__defineSetter__("array",function(a){this.vq=this.Nb=a;this.T=!0});be.prototype.__defineGetter__("interpolation",function(){return this.ax});be.prototype.__defineSetter__("interpolation",function(a){this.ax=a});h("X.scalars",be);function ce(a){id.call(this);this.t="object";this.m=[];this.Ob=this.gf=null;za(this,new Zd);null!=a&&this.fn(a)}k(ce,id);
ce.prototype.fn=function(a){this.lf=a.lf;this.pd=new Wd;this.pd.pc=new Float32Array(a.pd.pc);this.kb=a.kb.slice();a.J&&(this.J=new jd(a.J.length,a.J));a.ya&&(this.ya=new jd(a.ya.length,a.ya));a.Ud&&(this.Ud=new jd(a.Ud.length,a.Ud));this.Cb=a.Cb;this.Oo=a.Oo;a.Ca&&(this.Ca=new ld((new String(a.Ca.Rt)).toString()));this.je=a.je;this.m.length=0;var b=a.m;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.m.push(new n[b[d].t](b[d]));this.bc=a.bc;this.Hq=a.Hq;this.Io=a.Io;a.Ao&&(this.Ao=(new String(a.Ao)).toString());
this.yq=a.yq;this.Gq=a.Gq;this.Jo=a.Jo.slice();this.T=!0};ce.prototype.__defineGetter__("colortable",function(){this.gf||(this.gf=new td);return this.gf});ce.prototype.__defineGetter__("scalars",function(){this.Ob||(this.Ob=new be);return this.Ob});ce.prototype.__defineGetter__("children",function(){return this.m});ce.prototype.Ba=function(){var a=new de;a.qb=this;this.dispatchEvent(a)};ce.prototype.remove=function(){var a=new ee;a.qb=this;this.dispatchEvent(a)};
function fe(a,b){if(!(null!=a&&null!=b&&a instanceof ce&&b instanceof ce))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.je?-1:1==b.je?1:null!=a.Ee&&null!=b.Ee&&a.Ee>b.Ee?-1:1}h("X.object",ce);h("X.object.prototype.modified",ce.prototype.Ba);h("X.object.prototype.remove",ce.prototype.remove);function ge(a){Jc.call(this,a);this.t="event"}k(ge,Jc);function he(a){return a+"_"+r()}var ie=he("pan"),je=he("rotate"),ke=he("zoom"),le=he("scroll");he("render");var me=he("resetview"),ne=he("windowlevel"),oe=he("modified"),pe=he("remove"),qe=he("progress"),re=he("hover"),se=he("hover_end"),te=he("computing"),ue=he("computing_end"),ve=he("computing_progress");function we(){ge.call(this,ne);this.fx=this.sx=0}k(we,ge);function xe(){ge.call(this,ie);this.Ee=new n.ha(0,0,0)}k(xe,ge);
function ye(){ge.call(this,je);this.Ee=new n.ha(0,0,0)}k(ye,ge);function ze(){ge.call(this,ke);this.Nh=this.Mi=!1}k(ze,ge);function Ae(){ge.call(this,le);this.Yc=!1}k(Ae,ge);function Be(){ge.call(this,re);this.Zt=this.Yt=0}k(Be,ge);function Ce(){ge.call(this,se)}k(Ce,ge);function De(){ge.call(this,me)}k(De,ge);function de(){ge.call(this,oe);this.Za=this.qb=null}k(de,ge);function ee(){ge.call(this,pe);this.Za=this.qb=null}k(ee,ge);function Ee(){ge.call(this,qe);this.Vm=0}k(Ee,ge);
function Fe(){ge.call(this,te);this.qb=null}k(Fe,ge);function Ge(){ge.call(this,ve);this.Vm=0}k(Ge,ge);function He(){ge.call(this,ue);this.qb=null}k(He,ge);h("X.event.events.PAN",ie);h("X.event.events.ROTATE",je);h("X.event.events.ZOOM",ke);h("X.event.events.SCROLL",le);function Ie(){id.call(this);this.t="parser";this.ta=null;this.pb=0;this.QL=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Nt=!0}k(Ie,id);Ie.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Je(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var g=a[e],b=Math.min(b,g),c=Math.max(c,g);return[b,c]}
function Ke(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ie.prototype.j=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this.ta.slice(this.pb,this.pb+=b*c));if(this.QL!=this.Nt)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),g=0;g<d.byteLength;g+=
c)for(var l=g+c-1,m=g;l>m;l--,m++){var q=e[m];e[m]=e[l];e[l]=q}return 1==b?d[0]:d};
function Le(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Hd(0,0,0,1),e=Gd();Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Hd(0,0,b[2]-1,1);Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Hd(0,b[1]-
1,0,1);Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Hd(b[0]-1,0,0,1);Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Hd(b[0]-1,b[1]-1,0,1);Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Hd(b[0]-1,0,b[2]-1,1);Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Hd(0,b[1]-1,b[2]-1,1);Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Hd(b[0]-1,b[1]-1,b[2]-1,1);Ud(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Me(a,b){var c=Jd();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=Dd(),g=a[0],l=a[1],m=a[2],q=b[0],p=b[1],t=b[2];e[0]=l*t-m*p;e[1]=m*q-g*t;e[2]=g*p-l*q;Fd(e,e);g=Math.cos(d/2);l=Math.sin(d/2)*e[0];m=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];Od(c,0,g*g+l*l-m*m-d*d,2*(l*m-g*d),2*(l*d+g*m),0);Od(c,1,2*(l*m+g*d),g*g+m*m-l*l-d*d,2*(m*d-g*l),0);Od(c,2,2*(l*d-g*m),2*(m*d+g*l),g*g+d*d-m*m-l*l,0)}d=Id();Sd(c,d);return[c,d]}
function Ne(a,b,c,d,e,g,l,m,q){var p=new Oe;Fd(c,c);for(var t=[],s=[],u=0;6>u;u++)for(var v=Math.floor(u/2),D=(v+1)%3,B=(v+2)%3,I=(4+2*v)%6,G=0;2>G;G++){var Q=(2+G+2*v)%6,M=-(c[v]*(e[u]-a[v])+c[D]*(e[Q]-a[D]))/c[B]+a[B];if(M>=e[I]&&M<=e[I+1]||M<=e[I]&&M>=e[I+1]){var L=[];L[v]=e[u];L[D]=e[Q];L[B]=M;t.push(L)}else L=[],L[v]=e[u],L[D]=e[Q],L[B]=M,s.push(L)}a=Ed(0,0,1);a=Me(c,a);e=a[0];a=a[1];v=[];for(s=0;s<t.length;++s)u=Hd(t[s][0],t[s][1],t[s][2],1),D=Gd(),Ud(e,u,D),v.push([D[0],D[1],D[2]]);e=Ed(1,
0,0);t=Dd();Td(a,e,t);s=Ed(0,1,0);e=Dd();Td(a,s,e);u=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(s=s=0;s<v.length;++s)v[s][0]<u[0]&&(u[0]=v[s][0]),v[s][0]>u[1]&&(u[1]=v[s][0]),v[s][1]<u[2]&&(u[2]=v[s][1]),v[s][1]>u[3]&&(u[3]=v[s][1]),v[s][2]<u[4]&&(u[4]=v[s][2]),v[s][2]>u[5]&&(u[5]=v[s][2]);s=Hd(u[0]+(u[1]-u[0])/2,u[2]+(u[3]-u[2])/2,u[4]+(u[5]-u[4])/2,0);v=Gd();Rd(a,s,v);D=Math.floor(u[0]);B=Math.ceil(u[1]);D==B&&B++;I=B-D;G=Math.floor(u[2]);
Q=Math.ceil(u[3]);M=Q-G;L=b[0];b=b[1];var s=Math.ceil(I/L),J=Math.ceil(M/b),H=new Uint8Array(4*s*J),O=new Yd;O.mx=s;O.lx=J;var J=Gd(),N=Hd(0,0,u[4],1),Y=Id();Rd(l.HL,a,Y);for(var K=Q-1E-7,y=B-1E-7,z=0,ga=0,Z=0,E=G,E=G;E<=K;E+=b)for(Z++,ga=0,N[1]=E,s=D;s<=y;s+=L){ga++;N[0]=s;Ud(Y,N,J);var W=4*z,Xa=Math.floor(J[2]),qa=Math.floor(J[1]),Ca=Math.floor(J[0]);if(0<=Ca&&Ca<l.ac[0]&&0<=qa&&qa<l.ac[1]&&0<=Xa&&Xa<l.ac[2]){var sa=g[Xa][qa][Ca],jb=Ca=qa=Xa=0;q?((sa=q.get(sa))||(sa=[0,.61,0,0,1]),Xa=255*sa[1],
qa=255*sa[2],Ca=255*sa[3],jb=255*sa[4]):(Xa=qa=Ca=sa/l.Wc*255,jb=255);H[W]=Xa;H[++W]=qa;H[++W]=Ca;H[++W]=jb}else H[W]=0,H[++W]=0,H[++W]=0,H[++W]=0;z++}O.dl=H;p.Cb=O;p.$L=u;p.JL=a;p.IL=Y;p.PL=G;p.CX=Q;p.ZL=D;p.DX=B;p.aD=ga;p.$C=Z;p.Qj=L;p.Db=I;p.Jj=b;p.lb=M;p.xb=[v[0],v[1],v[2]];p.Do=[c[0],c[1],c[2]];p.St=[t[0],t[1],t[2]];p.Yc=[e[0],e[1],e[2]];p.bc=!1;p.Pj=l;p.Ij=null==l.Pj||m?!0:!1;p.zo=d;p.$g();p.bc=!1;return p}
function Pe(a,b,c,d){var e;e=d.Td;for(var g=[],l=[],m=0;6>m;m++){var q=Math.floor(m/2),p=(q+1)%3,t=(q+2)%3,s=(2+2*q)%6,u=(4+2*q)%6,v=1/c[q]*(e[m]-b[q]);if(Infinity!=v&&-Infinity!=v){var D=b[p]+c[p]*v,v=b[t]+c[t]*v;D>=e[s]&&D<=e[s+1]&&v>=e[u]&&v<=e[u+1]?(s=[],s[q]=e[m],s[p]=D,s[t]=v,g.push(s)):(s=[],s[q]=e[m],s[p]=D,s[t]=v,l.push(s))}}e=[g,l];b=e[0];d.h[a].U=e;e=wd(new vd(b[0][0],b[0][1],b[0][2]),new vd(b[1][0],b[1][1],b[1][2]));d.h[a].BX=e;g=Ed(0,0,1);l=Me(c,g)[0];m=Hd(d.Yw[0],d.Yw[1],d.Yw[2],0);
g=Gd();Ud(l,m,g);l=Gd();m=g[2];l[0]=c[0]*m;l[1]=c[1]*m;l[2]=c[2]*m;l[3]=c[3]*m;.5>Math.abs(g[0])&&(g[0]=.5);.5>Math.abs(g[1])&&(g[1]=.5);d.h[a].jf=[Math.abs(g[0]),Math.abs(g[1])];d.h[a].Mo=g[2];d.h[a].rb=l;e=Math.floor(Math.abs(e/g[2]));d.Jq[a]=e+1;d.h[a].Aa=e+1;d.h[a].U[0][0][0]>d.h[a].U[0][1][0]?0<l[0]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][0]<d.h[a].U[0][1][0]?0>l[0]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][1]>
d.h[a].U[0][1][1]?0<l[1]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][1]<d.h[a].U[0][1][1]?0>l[1]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][2]>d.h[a].U[0][1][2]?0<l[2]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][2]<d.h[a].U[0][1][2]&&0>l[2]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e);d.h[a].ix=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Qe(a,b){var c;c=b.ta;for(var d=b.ac,e=b.Wc,g=Array(d[2]),l=Array(d[2]),m=d[1]*d[0],q=0,p=0,t=0,s=0,u=0,s=0;s<d[2];s++){var v=c.subarray(s*m,(s+1)*m),u=0;l[s]=Array(d[1]);g[s]=Array(d[1]);for(t=0;t<d[1];t++)for(l[s][t]=new c.constructor(d[0]),g[s][t]=new c.constructor(d[0]),p=0;p<d[0];p++)q=v[u],l[s][t][p]=q/e*255,g[s][t][p]=q,u++}c=[g,l];b.od=c[0];b.AX=c[1];n.Ef(a.t+".reslice");b.Sb=null!=b.r;b.gf&&(b.uq=b.gf.If);b.OY=[0,0,0];b.Ya=[b.ff[0]+(b.Hj[0]-1)/2,b.ff[1]+(b.Hj[1]-1)/2,b.ff[2]+(b.Hj[2]-
1)/2];b.Td=[Math.min(b.ff[0],b.ff[0]+b.Hj[0]-1),Math.max(b.ff[0],b.ff[0]+b.Hj[0]-1),Math.min(b.ff[1],b.ff[1]+b.Hj[1]-1),Math.max(b.ff[1],b.ff[1]+b.Hj[1]-1),Math.min(b.ff[2],b.ff[2]+b.Hj[2]-1),Math.max(b.ff[2],b.ff[2]+b.Hj[2]-1)];b.h=[{},{},{}];c=Ed(b.Ya[0],b.Ya[1],b.Ya[2]);b.h[0].Kq=c;d=Ed(1,0,0);Fd(d,d);b.h[0].P=d;e=[1,0,0];b.h[0].kb=e;Pe(0,c,d,b);b.m[0].m=Array(b.h[0].Aa);c[0]=b.h[0].U[0][0][0]+b.h[0].rb[0]*Math.floor(b.h[0].Aa/2);c[1]=b.h[0].U[0][0][1]+b.h[0].rb[1]*Math.floor(b.h[0].Aa/2);c[2]=
b.h[0].U[0][0][2]+b.h[0].rb[2]*Math.floor(b.h[0].Aa/2);c=Ne(c,b.h[0].jf,b.h[0].P,b.h[0].kb,b.Td,b.od,b,b.Sb,b.uq);b.Sb&&(c.r=b.r.m[0].m[Math.floor(b.h[0].Aa/2)].Cb);b.m[0].m[Math.floor(b.h[0].Aa/2)]=c;b.Kj=Math.floor(b.h[0].Aa/2);b.Eo=Math.floor(b.h[0].Aa/2);c=Ed(b.Ya[0],b.Ya[1],b.Ya[2]);b.h[1].Kq=c;d=Ed(0,1,0);Fd(d,d);b.h[1].P=d;e=[0,1,0];b.h[1].kb=e;Pe(1,c,d,b);b.m[1].m=Array(b.h[1].Aa);c[0]=b.h[1].U[0][0][0]+b.h[1].rb[0]*Math.floor(b.h[1].Aa/2);c[1]=b.h[1].U[0][0][1]+b.h[1].rb[1]*Math.floor(b.h[1].Aa/
2);c[2]=b.h[1].U[0][0][2]+b.h[1].rb[2]*Math.floor(b.h[1].Aa/2);c=Ne(c,b.h[1].jf,b.h[1].P,b.h[1].kb,b.Td,b.od,b,b.Sb,b.uq);b.Sb&&(c.r=b.r.m[1].m[Math.floor(b.h[1].Aa/2)].Cb);b.m[1].m[Math.floor(b.h[1].Aa/2)]=c;b.Lj=Math.floor(b.h[1].Aa/2);b.Fo=Math.floor(b.h[1].Aa/2);c=Ed(b.Ya[0],b.Ya[1],b.Ya[2]);b.h[2].Kq=c;d=Ed(0,0,1);Fd(d,d);b.h[2].P=d;e=[0,.392,.804];b.h[2].kb=e;Pe(2,c,d,b);b.m[2].m=Array(b.h[2].Aa);c[0]=b.h[2].U[0][0][0]+b.h[2].rb[0]*Math.floor(b.h[2].Aa/2);c[1]=b.h[2].U[0][0][1]+b.h[2].rb[1]*
Math.floor(b.h[2].Aa/2);c[2]=b.h[2].U[0][0][2]+b.h[2].rb[2]*Math.floor(b.h[2].Aa/2);c=Ne(c,b.h[2].jf,b.h[2].P,b.h[2].kb,b.Td,b.od,b,b.Sb,b.uq);b.Sb&&(c.r=b.r.m[2].m[Math.floor(b.h[2].Aa/2)].Cb);b.m[2].m[Math.floor(b.h[2].Aa/2)]=c;b.Mj=Math.floor(b.h[2].Aa/2);b.Go=Math.floor(b.h[2].Aa/2);n.cf(a.t+".reslice");return b.od};function Re(){Ie.call(this);this.t="parserOFF"}k(Re,Ie);
Re.prototype.parse=function(a,b,c){function d(){if(q===e)throw Error("End of file reached unexpectedly.");for(var a=q;a<e;++a)if(10===g[a]){var b=Ke(g,q,a);q=a+1;return b}q=e;return Ke(g,q,e-1)}n.Ef(this.t+".parse");this.ta=c;var e=c.byteLength,g=this.j("uchar",e);c=[];b.J=new jd(e);b.ya=new jd(e);for(var l=b.J,m=b.ya,q=0,p=d(),p=("OFF"===p?d():p).split(" "),t=p[0],p=p[1];t--;){var s=d(),s=s.split(" ");c.push([parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2])])}for(;p--;){var s=d(),s=s.split(" "),
u=c[parseInt(s[1],10)],t=c[parseInt(s[2],10)],s=c[parseInt(s[3],10)];l.add(u[0],u[1],u[2]);l.add(t[0],t[1],t[2]);l.add(s[0],s[1],s[2]);u=new vd(u[0],u[1],u[2]);s=new vd(s[0],s[1],s[2]);t=zd((new vd(t[0],t[1],t[2])).Ld(u),s.Ld(u));t.normalize();m.add(t.x,t.y,t.z);m.add(t.x,t.y,t.z);m.add(t.x,t.y,t.z)}n.cf(this.t+".parse");c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};h("X.parserOFF",Re);h("X.parserOFF.prototype.parse",Re.prototype.parse);function Se(){Ie.call(this);this.t="parserDCM"}k(Se,Ie);
Se.prototype.parse=function(a,b,c){b.Dj={};b.Dj.Wr=0;this.wk(c,b);if(null==b.Ca.length||b.eb.length==b.Ca.length){b.Dj.Wr=b.Ca.length;var d={};c={};for(var e=0;e<b.eb.length;e++)d.hasOwnProperty(b.eb[e].series_instance_uid)||(d[b.eb[e].series_instance_uid]=[],c[b.eb[e].series_instance_uid]={}),c[b.eb[e].series_instance_uid].hasOwnProperty(b.eb[e].sop_instance_uid)||(c[b.eb[e].series_instance_uid][b.eb[e].sop_instance_uid]=!0,d[b.eb[e].series_instance_uid].push(b.eb[e]));var g=Object.keys(d)[0],e=
d[g],l=e.length;c={};var m="image_position_patient";1==l?(m="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(m="image_position_patient",d=new vd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new vd(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],
e[0].image_orientation_patient[5]),d=zd(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(m="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&
(e[0].pixel_spacing[1]=1);if(1<l)switch(m){case "image_position_patient":var q=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-q[0],p=d[1]-q[1],t=d[2]-q[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+p*p+t*t);break;case "instance_number":e[0].pixel_spacing[2]=1;break;default:window.console.log("Unkown ordering mode - returning: "+m)}else e[0].pixel_spacing[2]=1;d=1;switch(m){case "image_position_patient":var q=e[0].image_position_patient,s=e[l-1].image_position_patient,g=s[0]-q[0],p=s[1]-
q[1],t=s[2]-q[2],g=Math.sqrt(g*g+p*p+t*t),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[l-1].instance_number-e[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+m)}q=e[0].columns*e[0].rows;g=q*d;s=null;switch(e[0].an){case 8:s=new Uint8Array(g);break;case 16:s=new Uint16Array(g);break;case 32:s=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Nj=e[0].pixel_spacing;
for(var u=0;u<l;u++){var v=e[u].data,g=0;switch(m){case "image_position_patient":g=e[u].image_position_patient[0]-e[0].image_position_patient[0];p=e[u].image_position_patient[1]-e[0].image_position_patient[1];t=e[u].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+p*p+t*t)/e[0].pixel_spacing[2];break;case "instance_number":g=e[u].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+m)}s.set(v,g*q)}c.data=s;b.ta=s;b.ac=[e[0].columns,
e[0].rows,d];c.jN=b.ac;d=Je(s);l=d[0];d=d[1];c.min=b.Jf=b.Kc=l;c.max=b.Wc=b.Jc=d;-Infinity==b.oc&&(b.oc=l);Infinity==b.qc&&(b.qc=d);p=e[0].image_position_patient;l=Id();switch(m){case "image_position_patient":d=new vd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new vd(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=zd(d,g);Od(l,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],
-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);Od(l,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);Od(l,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);Od(l,3,0,0,0,1);break;case "instance_number":Od(l,0,-1,0,0,-p[0]);Od(l,1,-0,-1,-0,-p[1]);Od(l,2,0,0,1,p[2]);
Od(l,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+m)}c.kg=l;c.mg=Id();Sd(c.kg,c.mg);m=Hd(0,0,0,1);e=Gd();Ud(l,m,e);m=Hd(1,1,1,1);d=Gd();Ud(l,m,d);c.Fm=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Le(l,[b.ac[0],b.ac[1],b.ac[2]]);c.Dm=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.Em=[e[0],e[2],e[4]];b.$g(c);b.Oh=Qe(this,b)}c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};
Se.prototype.Uf=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Se.prototype.wk=function(a,b){this.ta=a;if("undefined"==typeof b.eb||null==b.eb)b.eb=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.j("ushort",this.ta.byteLength),e=66,g=null,l=null,m=null,q=null;e<d.length;)switch(g=d[e++],l=d[e++],m=d[e++],q=d[e++],"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==q&&(q=m),g){case 2:switch(l){case 16:for(var p="",g=g=0;g<q/2;g++)m=d[e++],l=m&255,
m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);c.transfer_syntax_uid=p.replace(/\0/g,"");break;default:e=Se.prototype.Uf(d,e,m,q)}break;case 40:switch(l){case 16:c.rows=d[e];e+=q/2;break;case 17:c.columns=d[e];e+=q/2;break;case 256:c.an=d[e];e+=q/2;break;case 257:c.bits_stored=d[e];e+=q/2;break;case 2:c.number_of_images=d[e];e+=q/2;break;case 48:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);p=p.split("\\");c.pixel_spacing=
[parseFloat(p[0]),parseFloat(p[1]),Infinity];break;default:e=Se.prototype.Uf(d,e,m,q)}break;case 32:switch(l){case 14:c.series_instance_uid="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,c.series_instance_uid+=String.fromCharCode(l),c.series_instance_uid+=String.fromCharCode(m);break;case 19:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);c.instance_number=parseInt(p,10);break;case 50:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>
8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);p=p.split("\\");c.image_position_patient=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])];break;case 55:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);p=p.split("\\");c.image_orientation_patient=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]),parseFloat(p[4]),parseFloat(p[5])];break;default:e=Se.prototype.Uf(d,e,m,q)}break;case 65534:switch(l){default:q=0,e+=q/
2}break;case 8:switch(l){case 24:c.sop_instance_uid="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,c.sop_instance_uid+=String.fromCharCode(l),c.sop_instance_uid+=String.fromCharCode(m);break;default:e=Se.prototype.Uf(d,e,m,q)}break;case 16:switch(l){case 8720:for(g=0;g<q/2;g++)e++;break;default:e=Se.prototype.Uf(d,e,m,q)}break;default:e=Se.prototype.Uf(d,e,m,q)}switch(c.an){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=
new Uint32Array(c.columns*c.rows)}this.pb=this.ta.byteLength-c.columns*c.rows*2;d=null;switch(c.an){case 8:d=this.j("uchar",c.columns*c.rows);break;case 16:d=this.j("ushort",c.columns*c.rows);break;case 32:d=this.j("uint",c.columns*c.rows)}c.data=d;b.eb.push(c);return b};h("X.parserDCM",Se);h("X.parserDCM.prototype.parse",Se.prototype.parse);function Te(){Ie.call(this);this.t="parserVTK"}k(Te,Ie);
Te.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.J,e=b.ya,g=new Uint8Array(c),l="";b.J=d=new jd(c.byteLength);b.ya=e=new jd(c.byteLength);c=0;for(var m=g.length;c<m;c+=32768)l+=Ke(g,c,Math.min(c+32768,m));g=l.split("\n");l=g.length;this.Pq=this.Qq=null;this.Pm=[];this.vg=$d;this.hx=this.al=this.Vk=this.bl=!1;c=0;for(m=l%8;m--;)Ue(this,g[c]),c++;for(m=.125*l^0;m--;)Ue(this,g[c]),c++,Ue(this,g[c]),c++,Ue(this,g[c]),c++,Ue(this,g[c]),c++,Ue(this,g[c]),c++,Ue(this,g[c]),c++,Ue(this,g[c]),
c++,Ue(this,g[c]),c++;c=this.Qq;var g=this.Pq,l=g.length,q=m=this.Pm.length;do{var p=this.Pm[m-q],t=p.length,s;for(s=0;s<t&&!("LINES"==this.vg&&s+1>=t);s++){var u=parseInt(p[s],10),v=c.get(u);d.add(v[0],v[1],v[2]);var D=u,B=v;"LINES"==this.vg?(D=parseInt(p[s+1],10),B=c.get(D),d.add(B[0],B[1],B[2])):"TRIANGLE_STRIPS"==this.vg&&(0!=s&&s!=t-1||d.add(v[0],v[1],v[2]));u<l?(B=g.get(u),e.add(B[0],B[1],B[2]),"LINES"==this.vg?(D=g.get(D),e.add(D[0],D[1],D[2])):"TRIANGLE_STRIPS"==this.vg&&(0!=s&&s!=t-1||e.add(B[0],
B[1],B[2]))):(D=new vd(v[0],v[1],v[2]),D.normalize(),e.add(D.x,D.y,D.z),"LINES"==this.vg?(D=new vd(B[0],B[1],B[2]),D.normalize(),e.add(D.x,D.y,D.z)):"TRIANGLE_STRIPS"==this.vg&&(0!=s&&s!=t-1||e.add(D.x,D.y,D.z)))}q--}while(0<q);b.lf=this.vg;n.cf(this.t+".parse");d=new de;d.qb=b;d.Za=a;this.dispatchEvent(d)};
function Ue(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.bl=!0;a.Vk=!1;a.al=!1;c=parseInt(c[1],10);a.Qq=new jd(3*c);a.Pq=new jd(3*c);return;case "VERTICES":a.Vk=!0;a.bl=!1;a.al=!1;c=parseInt(c[1],10);if(3<=c)a.vg=$d;else if(1==c)a.vg="POINTS";else throw Error("This VTK file is not supported!");a.Pm=[];return;case "TRIANGLE_STRIPS":a.Vk=!0;a.bl=!1;a.al=!1;a.vg="TRIANGLE_STRIPS";a.Pm=[];return;case "LINES":a.Vk=!0;a.bl=!1;a.al=!1;a.vg="LINES";a.Pm=
[];return;case "POLYGONS":a.Vk=!0;a.bl=!1;a.al=!1;a.vg="POLYGONS";a.Pm=[];return;case "POINT_DATA":a.al=!0;a.bl=!1;a.Vk=!1;return}if(a.bl)if(1==d||isNaN(parseFloat(e)))a.bl=!1;else{if(3<=d){var e=parseFloat(c[0]),g=parseFloat(c[1]),l=parseFloat(c[2]);a.Qq.add(e,g,l)}6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),l=parseFloat(c[5]),a.Qq.add(e,g,l));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Qq.add(d,e,c))}else a.Vk?1==d||isNaN(parseFloat(e))?a.Vk=!1:(c=c.slice(1),a.Pm.push(c)):
a.al&&("NORMALS"==e?a.hx=!0:1==d||isNaN(parseFloat(e))?(a.al=!1,a.hx=!1):a.hx&&(3<=d&&(e=parseFloat(c[0]),g=parseFloat(c[1]),l=parseFloat(c[2]),a.Pq.add(e,g,l)),6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),l=parseFloat(c[5]),a.Pq.add(e,g,l)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Pq.add(d,e,c))))}h("X.parserVTK",Te);h("X.parserVTK.prototype.parse",Te.prototype.parse);function Ve(){Ie.call(this);this.t="parserFSM";this.Nt=!1}k(Ve,Ie);
Ve.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;var d=b.J,e=b.ya;b.Jo=[];var g=b.Jo;c=0;var l;do l=this.j("uchar"),c++;while(200>c&&10!=l);this.j("uchar");e=this.j("uint");c=this.j("uint");var m=this.j("float",3*e);l=this.j("uint",3*c);var q=new Uint32Array(e),p=new Float32Array(9*c);b.J=d=new jd(9*c);b.ya=e=new jd(9*c);var t;for(t=0;t<c;t++){var s=3*t,u=l[s],v=l[s+1],D=l[s+2];g.push(u);g.push(v);g.push(D);q[u]+=1;q[v]+=1;q[D]+=1;var s=3*u,B=3*v,I=3*D,G=m[s],Q=m[s+1],M=m[s+2],v=
m[B],D=m[B+1],u=m[B+2],L=m[I],J=m[I+1],H=m[I+2];d.add(G,Q,M);d.add(v,D,u);d.add(L,J,H);G=new vd(G,Q,M);L=new vd(L,J,H);v=(new vd(v,D,u)).clone().Ld(G);D=L.clone().Ld(G);v=zd(v,D).normalize();p[s]+=v.x;p[s+1]+=v.y;p[s+2]+=v.z;p[B]+=v.x;p[B+1]+=v.y;p[B+2]+=v.z;p[I]+=v.x;p[I+1]+=v.y;p[I+2]+=v.z}for(t=0;t<c;t++)s=3*t,u=l[s],v=l[s+1],D=l[s+2],s=3*u,B=3*v,I=3*D,g=new vd(p[B],p[B+1],p[B+2]),m=new vd(p[I],p[I+1],p[I+2]),s=(new vd(p[s],p[s+1],p[s+2])).scale(1/q[u]).normalize(),g=g.scale(1/q[v]).normalize(),
m=m.scale(1/q[D]).normalize(),e.add(s.x,s.y,s.z),e.add(g.x,g.y,g.z),e.add(m.x,m.y,m.z);c=this.j("uchar",this.ta.byteLength-this.pb);l=null;for(s=0;s<c.length;s++)if(99==c[s]&&114==c[s+1]&&97==c[s+2]&&115==c[s+3]){for(e=l=s+9;10!=c[s]&&s<c.length;)e++,s++;l=Ke(c.subarray(l,e)).split(" ");break}l&&(b.pd.DJ(parseFloat(l[0])),b.pd.EJ(parseFloat(l[1])),b.pd.FJ(parseFloat(l[2])));b.lf=$d;n.cf(this.t+".parse");c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};h("X.parserFSM",Ve);
h("X.parserFSM.prototype.parse",Ve.prototype.parse);var We={Lx:function(a,b,c){return We.update(a,0,b,c)},update:function(a,b,c,d){var e=We.rL,g="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(g=d&7;g--;++c)b=b>>>8^e[(b^a[c])&255];for(g=d>>3;g--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Xe;
Xe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);We.rL=Xe;function Ye(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,g,l,m,q,p,t,s,u;for(s=0;s<b;++s)a[s]>c&&(c=a[s]),a[s]<d&&(d=a[s]);e=1<<c;g=new Uint32Array(e);l=1;m=0;for(q=2;l<=c;){for(s=0;s<b;++s)if(a[s]===l){p=0;t=m;for(u=0;u<l;++u)p=p<<1|t&1,t>>=1;for(u=p;u<e;u+=q)g[u]=l<<16|s;++m}++l;m<<=1;q<<=1}return[g,c,d]};function Ze(a,b){this.Fx=[];this.Hx=32768;this.Yh=this.Wq=this.Ub=this.uB=0;this.input=new Uint8Array(a);this.gE=!1;this.Ix=$e;this.resize=!1;if(b||!(b={}))b.index&&(this.Ub=b.index),b.bufferSize&&(this.Hx=b.bufferSize),b.bufferType&&(this.Ix=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Ix){case af:this.vd=32768;this.tb=new Uint8Array(32768+this.Hx+258);break;case $e:this.vd=0;this.tb=new Uint8Array(this.Hx);this.tn=this.zN;this.uE=this.MM;this.jy=this.aN;break;default:throw Error("invalid inflate mode");
}}var af=0,$e=1;
Ze.prototype.sl=function(){for(;!this.gE;){var a=bf(this,3);a&1&&(this.gE=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.Ub,c=this.tb,d=this.vd,e=void 0,g=void 0,l=void 0,m=c.length,e=void 0;this.Yh=this.Wq=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");g=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");g|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");l=e;
e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");l|=e<<8;if(g===~l)throw Error("invalid uncompressed block header: length verify");if(b+g>a.length)throw Error("input buffer is broken");switch(this.Ix){case af:for(;d+g>c.length;)e=m-d,g-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.vd=d,c=this.tn(),d=this.vd;break;case $e:for(;d+g>c.length;)c=this.tn({xF:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+g),d);d+=g;this.Ub=b+=g;this.vd=
d;this.tb=c;break;case 1:this.jy(cf,df);break;case 2:ef(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.uE()};
var ff=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),hf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),jf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),kf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lf=new Uint8Array(288),
mf,nf;mf=0;for(nf=lf.length;mf<nf;++mf)lf[mf]=143>=mf?8:255>=mf?9:279>=mf?7:8;var cf=Ye(lf),of=new Uint8Array(30),pf,qf;pf=0;for(qf=of.length;pf<qf;++pf)of[pf]=5;var df=Ye(of);function bf(a,b){for(var c=a.Wq,d=a.Yh,e=a.input,g=a.Ub,l;d<b;){l=e[g++];if(void 0===l)throw Error("input buffer is broken");c|=l<<d;d+=8}l=c&(1<<b)-1;a.Wq=c>>>b;a.Yh=d-b;a.Ub=g;return l}
function rf(a,b){for(var c=a.Wq,d=a.Yh,e=a.input,g=a.Ub,l=b[0],m=b[1],q;d<m;){q=e[g++];if(void 0===q)throw Error("input buffer is broken");c|=q<<d;d+=8}e=l[c&(1<<m)-1];l=e>>>16;a.Wq=c>>l;a.Yh=d-l;a.Ub=g;return e&65535}
function ef(a){function b(a,b,c){var d,e,g;for(g=0;g<a;)switch(d=rf(this,b),d){case 16:for(d=3+bf(this,2);d--;)c[g++]=e;break;case 17:for(d=3+bf(this,3);d--;)c[g++]=0;e=0;break;case 18:for(d=11+bf(this,7);d--;)c[g++]=0;e=0;break;default:e=c[g++]=d}return c}var c=bf(a,5)+257,d=bf(a,5)+1,e=bf(a,4)+4,g=new Uint8Array(ff.length),l;for(l=0;l<e;++l)g[ff[l]]=bf(a,3);e=Ye(g);g=new Uint8Array(c);l=new Uint8Array(d);a.jy(Ye(b.call(a,c,e,g)),Ye(b.call(a,d,e,l)))}f=Ze.prototype;
f.jy=function(a,b){var c=this.tb,d=this.vd;this.TE=a;for(var e=c.length-258,g,l,m;256!==(g=rf(this,a));)if(256>g)d>=e&&(this.vd=d,c=this.tn(),d=this.vd),c[d++]=g;else for(g-=257,m=gf[g],0<hf[g]&&(m+=bf(this,hf[g])),g=rf(this,b),l=jf[g],0<kf[g]&&(l+=bf(this,kf[g])),d>=e&&(this.vd=d,c=this.tn(),d=this.vd);m--;)c[d]=c[d++-l];for(;8<=this.Yh;)this.Yh-=8,this.Ub--;this.vd=d};
f.aN=function(a,b){var c=this.tb,d=this.vd;this.TE=a;for(var e=c.length,g,l,m;256!==(g=rf(this,a));)if(256>g)d>=e&&(c=this.tn(),e=c.length),c[d++]=g;else for(g-=257,m=gf[g],0<hf[g]&&(m+=bf(this,hf[g])),g=rf(this,b),l=jf[g],0<kf[g]&&(l+=bf(this,kf[g])),d+m>e&&(c=this.tn(),e=c.length);m--;)c[d]=c[d++-l];for(;8<=this.Yh;)this.Yh-=8,this.Ub--;this.vd=d};
f.tn=function(){var a=new Uint8Array(this.vd-32768),b=this.vd-32768,c=this.tb;a.set(c.subarray(32768,a.length));this.Fx.push(a);this.uB+=a.length;c.set(c.subarray(b,b+32768));this.vd=32768;return c};f.zN=function(a){var b=this.input.length/this.Ub+1|0,c=this.input,d=this.tb;a&&("number"===typeof a.xF&&(b=a.xF),"number"===typeof a.dM&&(b+=a.dM));2>b?(a=(c.length-this.Ub)/this.TE[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.tb=a};
f.uE=function(){var a=0,b=this.tb,c=this.Fx,d,e=new Uint8Array(this.uB+(this.vd-32768)),g,l,m,q;if(0===c.length)return this.tb.subarray(32768,this.vd);g=0;for(l=c.length;g<l;++g)for(d=c[g],m=0,q=d.length;m<q;++m)e[a++]=d[m];g=32768;for(l=this.vd;g<l;++g)e[a++]=b[g];this.Fx=[];return this.buffer=e};f.MM=function(){var a,b=this.vd;this.resize?(a=new Uint8Array(b),a.set(this.tb.subarray(0,b))):a=this.tb.subarray(0,b);return this.buffer=a};new Uint8Array(256);var sf;for(sf=0;256>sf;++sf)for(var tf=sf,uf=7,tf=tf>>>1;tf;tf>>>=1)--uf;var vf=[],wf;for(wf=0;288>wf;wf++)switch(!0){case 143>=wf:vf.push([wf+48,8]);break;case 255>=wf:vf.push([wf-144+400,9]);break;case 279>=wf:vf.push([wf-256+0,7]);break;case 287>=wf:vf.push([wf-280+192,8]);break;default:throw"invalid literal: "+wf;}
var xf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(xf);function yf(){};function zf(a){this.input=a;this.Ub=0;this.member=[]}
zf.prototype.sl=function(){for(var a=this.input.length;this.Ub<a;){var b=new yf,c=void 0,d=void 0,e=void 0,g=c=e=void 0,l=void 0,c=c=void 0,m=this.input,d=this.Ub;b.id1=m[d++];b.id2=m[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=m[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=m[d++];c=m[d++]|m[d++]<<8|m[d++]<<16|m[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=m[d++];b.os=m[d++];0<(b.flg&4)&&(b.xlen=m[d++]|m[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){l=[];for(g=0;0<(c=m[d++]);)l[g++]=String.fromCharCode(c);b.name=l.join("")}if(0<(b.flg&16)){l=[];for(g=0;0<(c=m[d++]);)l[g++]=String.fromCharCode(c);b.comment=l.join("")}if(0<(b.flg&2)&&(b.crc16=We.Lx(m,0,d)&65535,b.crc16!==(m[d++]|m[d++]<<8)))throw Error("invalid header crc16");c=m[m.length-4]|m[m.length-3]<<8|m[m.length-2]<<16|m[m.length-1]<<24;m.length-d-4-4<512*c&&(e=c);d=new Ze(m,{index:d,bufferSize:e});b.data=e=d.sl();d=d.Ub;b.crc32=c=(m[d++]|m[d++]<<8|m[d++]<<16|
m[d++]<<24)>>>0;if(We.Lx(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+We.Lx(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(m[d++]|m[d++]<<8|m[d++]<<16|m[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.Ub=d}a=this.member;b=e=d=0;for(m=a.length;b<m;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<m;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function Af(){Ie.call(this);this.t="parserMGZ";this.Nt=!1}k(Af,Ie);
Af.prototype.parse=function(a,b,c,d){n.Ef(this.t+".parse");d&&(c=(new zf(new Uint8Array(c))).sl(),c=c.buffer);d=this.wk(c);var e=[d.Zz,d.$z,d.aA];b.ac=e;var g=d.NJ;b.Nj=g;c=d.min;var l=d.max;b.Jf=b.Kc=c;b.Wc=b.Jc=l;-Infinity==b.oc&&(b.oc=c);Infinity==b.qc&&(b.qc=l);c=Id();Od(c,0,d.Fh[0][0],d.Fh[1][0],d.Fh[2][0],0);Od(c,1,d.Fh[0][1],d.Fh[1][1],d.Fh[2][1],0);Od(c,2,d.Fh[0][2],d.Fh[1][2],d.Fh[2][2],0);Od(c,3,0,0,0,1);for(var l=e[0]/2,m=e[1]/2,q=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.Fh[3][p]-(c[p+0]*g[0]*
l+c[p+4]*g[1]*m+c[p+8]*g[2]*q);g=e[1];l=e[2];c[12]=e[0];c[13]=g;c[14]=l;c[15]=1;d.kg=c;d.mg=Id();Sd(d.kg,d.mg);e=Hd(0,0,0,1);g=Gd();Ud(c,e,g);l=Hd(1,1,1,1);e=Gd();Ud(c,l,e);c=Le(c,b.ac);d.Fm=[e[0]-g[0],e[1]-g[1],e[2]-g[2]];d.Dm=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.Em=[c[0],c[2],c[4]];b.$g(d);n.cf(this.t+".parse");b.Oh=Qe(this,b);d=new de;d.qb=b;d.Za=a;this.dispatchEvent(d)};
Af.prototype.wk=function(a){this.ta=a;a={version:0,uL:0,sL:0,QN:0,tL:0,Zz:0,$z:0,aA:0,bR:0,type:0,qN:0,kI:0,CV:null,Fh:null,NJ:null,data:null,min:Infinity,max:-Infinity};a.version=this.j("uint");a.Zz=this.j("uint");a.$z=this.j("uint");a.aA=this.j("uint");a.bR=this.j("uint");a.type=this.j("uint");a.qN=this.j("uint");a.kI=this.j("ushort");if(0<a.kI){a.NJ=this.j("float",3);var b=[];b.push(this.j("float",3));b.push(this.j("float",3));b.push(this.j("float",3));b.push(this.j("float",3));a.Fh=b}this.pb=
284;b=a.Zz*a.$z*a.aA;switch(a.type){case 0:a.data=this.j("uchar",b);break;case 1:a.data=this.j("uint",b);break;case 3:a.data=this.j("float",b);break;case 4:a.data=this.j("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Je(a.data);a.min=b[0];a.max=b[1];this.pb+16<this.ta.byteLength&&(a.uL=this.j("float"),a.QN=this.j("float"),a.sL=this.j("float"),a.tL=this.j("float"));return a};h("X.parserMGZ",Af);h("X.parserMGZ.prototype.parse",Af.prototype.parse);function Bf(){Ie.call(this);this.t="parserLBL"}k(Bf,Ie);
Bf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.Jo,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this.ta=c;var g=[],l=this.j("uchar",c.byteLength),m=l.length,q=!1,p=0;for(c=1;c<m;c++)10==l[c-1]?(p=c,q=!0):q&&32==l[c]&&(g.push(parseInt(Ke(l,p,c),10)),q=!1);l=b.Ob.Nb?b.Ob.Nb:new Float32Array(e);m=g.length;for(c=0;c<m;c++)l[g[c]]=1;g=new Float32Array(3*e);for(c=m=0;c<e;c++){q=d[c];if(q>e)throw Error("Could not find scalar for vertex.");q=l[q];g[m++]=q;g[m++]=
q;g[m++]=q}b.Ob.Nb=l;b.Ob.vq=g;b.Ob.T=!0;n.cf(this.t+".parse");d=new de;d.qb=b;d.Za=a;this.dispatchEvent(d)};h("X.parserLBL",Bf);h("X.parserLBL.prototype.parse",Bf.prototype.parse);function Cf(){Ie.call(this);this.t="parserCRV";this.Nt=!1}k(Cf,Ie);
Cf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.Jo;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this.ta=c;this.pb=3;var e=this.j("uint");this.j("uint");this.j("uint");var g=0,l=0,m=0,q=0,p=0,t=0,s=0,u=0,v=0,D=0,B=0;c=Array(2);var I=Array(2),G=this.j("float",e),Q;for(Q=0;Q<e;Q++){var M=G[Q];0==Q&&(c[0]=I[0]=M);0<=M?(g++,q+=M):(l++,m+=M);v+=M;B++;I[0]=Math.max(M,I[0]);c[0]=Math.min(M,c[0]);G[Q]=M}0!=g&&(p=q/g);0!=l&&(t=m/l);0!=B&&(D=v/B);for(B=v=m=q=0;B<e;B++)M=
G[B],Q=0,0<=M?(Q=Math.pow(M-p,2),q+=Q):(Q=Math.pow(M-t,2),m+=Q),Q=Math.pow(M-D,2),v+=Q;1<g&&(s=Math.sqrt(q/(g-1)));1<l&&(u=Math.sqrt(m/(l-1)));c[1]=t-2.5*u;I[1]=p+2.5*s;e=d.length;g=new Float32Array(3*e);for(B=0;B<e;B++)l=G[d[B]],m=3*B,g[m]=l,g[m+1]=l,g[m+2]=l;b.Ob.Jf=c[1];b.Ob.Wc=I[1];-Infinity==b.Ob.oc&&(b.Ob.oc=c[1]);Infinity==b.Ob.qc&&(b.Ob.qc=I[1]);b.Ob.Nb=G;b.Ob.vq=g;b.Ob.T=!0;n.cf(this.t+".parse");d=new de;d.qb=b;d.Za=a;this.dispatchEvent(d)};h("X.parserCRV",Cf);
h("X.parserCRV.prototype.parse",Cf.prototype.parse);function Df(a,b){var c,d;this.input=a;this.Ub=0;if(b||!(b={}))b.index&&(this.Ub=b.index),b.verify&&(this.sU=b.verify);c=a[this.Ub++];d=a[this.Ub++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.lI=new Ze(a,{index:this.Ub,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Df.prototype.sl=function(){var a=this.input,b;b=this.lI.sl();this.Ub=this.lI.Ub;if(this.sU){var a=(a[this.Ub++]<<24|a[this.Ub++]<<16|a[this.Ub++]<<8|a[this.Ub++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var g=c.length,l,m=0;0<g;){l=1024<g?1024:g;g-=l;do d+=c[m++],e+=d;while(--l);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Ef(){Ie.call(this);this.t="parserRAW"}k(Ef,Ie);
Ef.prototype.parse=function(a,b,c,d){n.Ef(this.t+".parse");d&&(c=(new Df(new Uint8Array(c))).sl(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Je(d.data);c=e[0];e=e[1];d.min=b.Jf=b.Kc=c;d.max=b.Wc=b.Jc=e;-Infinity==b.oc&&(b.oc=c);Infinity==b.qc&&(b.qc=e);e=Jd();d.kg=e;d.mg=Jd();var g=Hd(0,0,0,1);c=Gd();Ud(e,g,c);var l=Hd(1,1,1,1),g=Gd();Ud(e,l,g);e=Le(e,b.ac);d.Fm=[g[0]-c[0],g[1]-c[1],g[2]-c[2]];d.Dm=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.Em=[e[0],e[2],e[4]];b.$g(d);n.cf(this.t+".parse");b.Oh=
Qe(this,b);d=new de;d.qb=b;d.Za=a;this.dispatchEvent(d)};h("X.parserRAW",Ef);h("X.parserRAW.prototype.parse",Ef.prototype.parse);function Ff(){Ie.call(this);this.t="parserIMAGE"}k(Ff,Ie);Ff.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),g=e.length,l=Array(g);g--;)l[g]=String.fromCharCode(e[g]);e=window.btoa(l.join(""));g=new Image;Zc(g,"load",this.FS.bind(this,g,a,b,c,d));g.src="data:image/"+d+";base64,"+e};Ff.prototype.FS=function(a,b,c){b.Oh=a;b.dl=null;a=new de;a.qb=c;a.Za=b;this.dispatchEvent(a)};h("X.parserIMAGE",Ff);h("X.parserIMAGE.prototype.parse",Ff.prototype.parse);function Gf(){Ie.call(this);this.t="parserLUT"}k(Gf,Ie);
Gf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;c=this.j("uchar",c.byteLength);var d=c.length,e=0,g;for(g=0;g<d;g++)if(10==c[g]){var l=Ke(c,e,g),e=g+1,l=l.replace(/^\s+|\s+$/g,"");"#"!=l[0]&&(l=l.split(" "),l=l.filter(function(a){return""!=a}),6==l.length&&(l[2]=parseInt(l[2],10)/255,l[3]=parseInt(l[3],10)/255,l[4]=parseInt(l[4],10)/255,l[5]=parseInt(l[5],10)/255,a.add(parseInt(l[0],10),l[1],l[2],l[3],l[4],l[5],10)))}n.cf(this.t+".parse");c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};
h("X.parserLUT",Gf);h("X.parserLUT.prototype.parse",Gf.prototype.parse);function Hf(){Ie.call(this);this.t="parserMRC"}k(Hf,Ie);
Hf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");c=this.wk(c);var d=c.min,e=c.max;b.ac=[c.bs,c.cs,c.ds];b.Nj=[c.xlen/c.FH,c.UJ/c.GH,c.WJ/c.HH];b.Jf=b.Kc=d;b.Wc=b.Jc=e;-Infinity==b.oc&&(b.oc=d);Infinity==b.qc&&(b.qc=e);e=Id();Od(e,3,0,0,0,1);Od(e,0,-1,0,0,c.bs);Od(e,1,0,0,-1,c.cs);Od(e,2,0,-1,0,c.ds);c.kg=e;c.mg=Id();Sd(c.kg,c.mg);var g=Hd(0,0,0,1),d=Gd();Ud(e,g,d);var l=Hd(1,1,1,1),g=Gd();Ud(e,l,g);l=[c.bs,c.cs,c.ds];e=Le(e,l);c.Fm=[g[0]-d[0],g[1]-d[1],g[2]-d[2]];c.Dm=[e[1]+e[0]+1,e[3]-e[2]+
1,e[5]-e[4]+1];c.Em=[e[0],e[2],e[4]];b.ac=l;b.$g(c);b.Oh=Qe(this,b);n.cf(this.t+".parse");c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};
Hf.prototype.wk=function(a){this.ta=a;a={bs:0,cs:0,ds:0,mode:0,HY:0,IY:0,JY:0,FH:0,GH:0,HH:0,xlen:0,UJ:0,WJ:0,alpha:0,beta:0,gamma:0,KQ:0,LQ:0,MQ:0,Cx:0,du:0,$m:0,wY:0,next:0,ZM:0,sb:null,eR:0,gR:0,sb:null,eQ:0,pY:0,bQ:0,Zd:0,$Q:0,aR:0,qU:0,rU:0,gU:null,xU:0,zU:0,EU:0,RX:0,VY:0,oT:0,fR:0,data:null,min:Infinity,max:-Infinity,DY:0,jJ:null,UY:null,PY:null,orientation:null,GY:null};this.pb=0;a.bs=this.j("sint");a.cs=this.j("sint");a.ds=this.j("sint");a.mode=this.j("sint");var b=a.bs*a.cs*a.ds;this.pb=
1024;switch(a.mode){case 0:a.data=this.j("schar",b);break;case 1:a.data=this.j("sshort",b);break;case 2:a.data=this.j("float",b);break;case 3:a.data=this.j("uint",b);break;case 4:a.data=this.j("double",b);break;case 6:a.data=this.j("ushort",b);break;case 16:a.data=this.j("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.pb=28;a.FH=this.j("sint");a.GH=this.j("sint");a.HH=this.j("sint");a.xlen=this.j("float");a.UJ=this.j("float");a.WJ=this.j("float");a.alpha=this.j("float");
a.beta=this.j("float");a.gamma=this.j("float");a.KQ=this.j("sint");a.LQ=this.j("sint");a.MQ=this.j("sint");a.Cx=this.j("float");a.du=this.j("float");a.$m=this.j("float");a.vY=this.j("sint");a.next=this.j("sint");a.ZM=this.j("short");a.eR=this.j("short");a.gR=this.j("short");a.eQ=this.j("sint");a.oY=this.j("sint");a.bQ=this.j("short");a.Zd=this.j("short");a.$Q=this.j("short");a.aR=this.j("short");a.qU=this.j("short");a.rU=this.j("short");a.gU=this.j("float",6);this.pb=196;a.xU=this.j("float");a.zU=
this.j("float");a.EU=this.j("float");this.pb=216;a.oT=this.j("float");a.fR=this.j("sint");a.zY=this.j("schar",10);if(0!=a.next)switch(this.pb=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.j("schar",b);break;case 1:a.data=this.j("sshort",b);break;case 2:a.data=this.j("float",b);break;case 3:a.data=this.j("uint",b);break;case 4:a.data=this.j("double",b);break;case 6:a.data=this.j("ushort",b);break;case 16:a.data=this.j("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.$m-(a.du-a.$m)?(a.min=a.Cx,a.max=a.$m+(a.$m-a.Cx)):(a.min=a.$m-(a.du-a.$m),a.max=a.du);return a};h("X.parserMRC",Hf);h("X.parserMRC.prototype.parse",Hf.prototype.parse);function If(){Ie.call(this);this.t="parserNRRD"}k(If,Ie);
If.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;c=this.j("uchar",c.byteLength);var d=c.length,e=null,g=0,l;for(l=1;l<d;l++)if(10==c[l-1]&&10==c[l]){e=Ke(c,0,l-2);g=l+1;break}var m,q,p,t,d=e.split(/\r?\n/),e=0;for(l=d.length;e<l;e++)m=d[e],m.match(/NRRD\d+/)?this.yQ=!0:!m.match(/^#/)&&(t=m.match(/(.*):(.*)/))&&(q=t[1].trim(),m=t[2].trim(),(p=this.IN[q])?p.call(this,m):this[q]=m);if(!this.yQ)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.fd&&(this.fd=[new vd(1,0,0),new vd(0,1,0),new vd(0,0,1)],this.hB))for(d=[],t=0;2>=t;t++)d.push(isNaN(this.hB[t])?void 0:this.fd[t].scale(this.hB[t]));g=c.subarray(g);if("gzip"==this.encoding||"gz"==this.encoding)g=(new zf(new Uint8Array(g))).sl();g=g.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.Uk(g);t=Je(c.data);g=c.min=t[0];t=c.max=t[1];b.Jf=b.Kc=g;b.Wc=b.Jc=t;b.ac=[this.dB[0],this.dB[1],this.dB[2]];
d=(new vd(this.fd[0][0],this.fd[0][1],this.fd[0][2])).oi();e=(new vd(this.fd[1][0],this.fd[1][1],this.fd[1][2])).oi();l=(new vd(this.fd[2][0],this.fd[2][1],this.fd[2][2])).oi();b.Nj=[d,e,l];-Infinity==b.oc&&(b.oc=g);Infinity==b.qc&&(b.qc=t);d=t=1;"left-posterior-superior"==this.jJ&&(d=t=-1);g=Jd();Od(g,0,t*this.fd[0][0],t*this.fd[1][0],t*this.fd[2][0],t*this.gB[0]);Od(g,1,d*this.fd[0][1],d*this.fd[1][1],d*this.fd[2][1],d*this.gB[1]);Od(g,2,1*this.fd[0][2],1*this.fd[1][2],1*this.fd[2][2],1*this.gB[2]);
Od(g,3,0,0,0,1);c.kg=g;c.mg=Id();Sd(c.kg,c.mg);d=Hd(0,0,0,1);t=Gd();Ud(g,d,t);e=Hd(1,1,1,1);d=Gd();Ud(g,e,d);g=Le(g,b.ac);c.Fm=[d[0]-t[0],d[1]-t[1],d[2]-t[2]];c.Dm=[g[1]-g[0]+1,g[3]-g[2]+1,g[5]-g[4]+1];c.Em=[g[0],g[2],g[4]];b.$g(c);n.cf(this.t+".parse");b.Oh=Qe(this,b);c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};
If.prototype.IN={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Uk=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Uk=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Uk=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Uk=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Uk=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Uk=Uint32Array;break;case "float":this.Uk=Float32Array;break;case "double":this.Uk=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.fY=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.tl=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.dB=e},space:function(a){return this.jJ=a},"space origin":function(a){return this.gB=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.fd=function(){var a,g,l;l=[];a=0;for(g=c.length;a<g;a++)d=c[a],l.push(function(){var a,c,e,g;e=d.slice(1,-1).split(/,/);g=[];a=0;for(c=e.length;a<c;a++)b=e[a],g.push(parseFloat(b));return g}());return l}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.hB=e}};h("X.parserNRRD",If);h("X.parserNRRD.prototype.parse",If.prototype.parse);function Jf(){Ie.call(this);this.t="parserSTL"}k(Jf,Ie);
Jf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;var d=b.J,e=b.ya;if("solid"==Ke(this.j("uchar",5))){b.J=d=new jd(c.byteLength);b.ya=e=new jd(c.byteLength);var g=d,d=e,e=this.j("uchar",c.byteLength-5);c=e.length;var l=!1,m=!1,q=0,p;for(p=0;p<c;p++)if(10==e[p]){if(l||m){var t=Ke(e,q,p).split(" "),m=parseFloat(t[0]),s=parseFloat(t[1]),t=parseFloat(t[2]);l?(d.add(m,s,t),d.add(m,s,t),d.add(m,s,t)):g.add(m,s,t);m=l=!1}}else 32==e[p-1]&&(102==e[p]?(q=p+=13,l=!0):118==e[p]&&(q=p+=7,m=!0))}else for(this.pb=
80,g=this.j("uint"),b.J=d=new jd(9*g),b.ya=e=new jd(9*g),c=c=0;c<g;c++)l=this.j("float",12),q=l[0],p=l[1],m=l[2],e.add(q,p,m),e.add(q,p,m),e.add(q,p,m),d.add(l[3],l[4],l[5]),d.add(l[6],l[7],l[8]),d.add(l[9],l[10],l[11]),this.pb+=2;n.cf(this.t+".parse");g=new de;g.qb=b;g.Za=a;this.dispatchEvent(g)};h("X.parserSTL",Jf);h("X.parserSTL.prototype.parse",Jf.prototype.parse);function Kf(){Ie.call(this);this.t="parserNII"}k(Kf,Ie);
Kf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new zf(new Uint8Array(d))).sl(),d=d.buffer);c=this.wk(d);d=c.min;e=c.max;b.Jf=b.Kc=d;b.Wc=b.Jc=e;-Infinity==b.oc&&(b.oc=d);Infinity==b.qc&&(b.qc=e);d=Id();Od(d,3,0,0,0,1);if(0<c.LA){var e=0,g=c.hI,l=c.iI,m=c.jI,q=1,p=1,t=1,s=c.eI,u=c.fI,v=c.gI,e=1-(g*g+l*l+m*m);1E-7>e?(e=1/Math.sqrt(g*g+l*l+m*m),g*=e,l*=e,m*=e,e=0):e=Math.sqrt(e);0<c.si[1]&&(q=c.si[1]);
0<c.si[2]&&(p=c.si[2]);0<c.si[2]&&(t=c.si[3]);0>c.si[0]&&(t=-t);Od(d,0,(e*e+g*g-l*l-m*m)*q,2*(g*l-e*m)*p,2*(g*m+e*l)*t,s);Od(d,1,2*(g*l+e*m)*q,(e*e+l*l-g*g-m*m)*p,2*(l*m-e*g)*t,u);Od(d,2,2*(g*m-e*l)*q,2*(l*m+e*g)*p,(e*e+m*m-l*l-g*g)*t,v)}else 0<c.dJ?(e=c.lJ,g=c.mJ,l=c.nJ,Od(d,0,e[0],e[1],e[2],e[3]),Od(d,1,g[0],g[1],g[2],g[3]),Od(d,2,l[0],l[1],l[2],l[3])):0==c.LA?(Od(d,0,c.si[1],0,0,0),Od(d,1,0,c.si[2],0,0),Od(d,2,0,0,c.si[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.kg=d;c.mg=Id();
Sd(c.kg,c.mg);g=Hd(0,0,0,1);e=Gd();Ud(d,g,e);l=Hd(1,1,1,1);g=Gd();Ud(d,l,g);l=[c.tl[1],c.tl[2],c.tl[3]];d=Le(d,l);c.Fm=[g[0]-e[0],g[1]-e[1],g[2]-e[2]];c.Dm=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.Em=[d[0],d[2],d[4]];b.ac=l;b.$g(c);b.Oh=Qe(this,b);c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};
Kf.prototype.wk=function(a){this.ta=a;a={KT:0,Zo:null,$M:null,BN:0,wT:0,aT:0,iN:null,tl:null,qQ:0,rQ:0,sQ:0,oQ:0,hy:0,zM:0,PT:0,si:null,PJ:0,uT:0,tT:0,OT:0,MT:null,yU:null,FM:0,GM:0,NT:0,iU:0,GP:0,HP:0,fN:null,vM:null,LA:0,dJ:0,hI:0,iI:0,jI:0,eI:0,fI:0,gI:0,lJ:null,mJ:null,nJ:null,pQ:null,Cp:null,data:null,min:Infinity,max:-Infinity};a.KT=this.j("uint");a.Zo=this.j("uchar",10);a.$M=this.j("uchar",18);a.BN=this.j("uint");a.wT=this.j("ushort");a.aT=this.j("uchar");a.iN=this.j("uchar");a.tl=this.j("ushort",
8);a.qQ=this.j("float");a.rQ=this.j("float");a.sQ=this.j("float");a.oQ=this.j("ushort");a.hy=this.j("ushort");a.zM=this.j("ushort");a.PT=this.j("ushort");a.si=this.j("float",8);a.PJ=this.j("float");a.uT=this.j("float");a.tT=this.j("float");a.OT=this.j("ushort");a.MT=this.j("uchar");a.yU=this.j("uchar");a.FM=this.j("float");a.GM=this.j("float");a.NT=this.j("float");a.iU=this.j("float");a.GP=this.j("uint",1);a.HP=this.j("uint",1);a.fN=this.j("uchar",80);a.vM=this.j("uchar",24);a.LA=this.j("ushort");
a.dJ=this.j("ushort");a.hI=this.j("float");a.iI=this.j("float");a.jI=this.j("float");a.eI=this.j("float");a.fI=this.j("float");a.gI=this.j("float");a.lJ=this.j("float",4);a.mJ=this.j("float",4);a.nJ=this.j("float",4);a.pQ=this.j("uchar",16);a.Cp=this.j("uchar",4);this.pb=parseInt(a.PJ,10);var b=a.tl[1]*a.tl[2]*a.tl[3];switch(a.hy){case 2:a.data=this.j("uchar",b);break;case 4:a.data=this.j("sshort",b);break;case 8:a.data=this.j("sint",b);break;case 16:a.data=this.j("float",b);break;case 32:a.data=
this.j("complex",b);break;case 64:a.data=this.j("double",b);break;case 256:a.data=this.j("schar",b);break;case 512:a.data=this.j("ushort",b);break;case 768:a.data=this.j("uint",b);break;default:throw Error("Unsupported NII data type: "+a.hy);}b=Je(a.data);a.min=b[0];a.max=b[1];return a};h("X.parserNII",Kf);h("X.parserNII.prototype.parse",Kf.prototype.parse);function Lf(){Ie.call(this);this.t="parserTRK"}k(Lf,Ie);
Lf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.J,e=b.ya,g=b.Ud;this.ta=c;this.j("uchar",6);this.j("ushort",3);var l=this.j("float",3);this.j("float",3);var m=this.j("ushort");this.j("uchar",200);this.j("ushort");this.j("uchar",200);c=this.j("float",16);this.j("uchar",444);this.j("uchar",4);this.j("uchar",4);this.j("float",6);this.j("uchar",2);this.j("uchar");this.j("uchar");this.j("uchar");this.j("uchar");this.j("uchar");this.j("uchar");var q=this.j("uint");this.j("uint");var p=
this.j("uint"),t=[],s=[],u=Infinity,v=-Infinity,D=null,B=null,I=null,G=null,e=d=null,Q=this.j("uint",(this.ta.byteLength-1E3)/4);this.pb=p;for(var M=this.j("float",(this.ta.byteLength-1E3)/4),L=0,p=g=0;p<q;p++){for(var J=Q[L],H=new jd(3*J),O=0,N=0;N<J;N++){var Y=M[L+3*N+N*m+1],K=M[L+3*N+N*m+2],y=M[L+3*N+N*m+3],Y=Y/l[0],K=K/l[1],y=y/l[2];H.add(Y,K,y);if(0<N)var z=H.get(N-1),O=O+Math.sqrt(Math.pow(Y-z[0],2)+Math.pow(K-z[1],2)+Math.pow(y-z[2],2));N<J-1&&(g+=6)}L+=3*J+J*m+1;N=H.Sh;J=H.Ph;Y=H.Th;K=H.Qh;
y=H.Uh;z=H.Rh;if(!D||N<D)D=N;if(!B||J>B)B=J;if(!I||Y<I)I=Y;if(!G||K>G)G=K;if(!d||y<d)d=y;if(!e||z>e)e=z;t.push(H);s.push(O)}l=(D+B)/2;I=(I+G)/2;m=(d+e)/2;G=new Float32Array(g);b.J=d=new jd(g);b.ya=e=new jd(g);b.Ud=g=new jd(g);for(p=D=0;p<q;p++)for(B=t[p],Q=B.count,O=s[p],u=Math.min(u,O),v=Math.max(v,O),N=0;N<Q-1;N++){L=B.get(N);M=B.get(N+1);d.add(L[0],L[1],L[2]);d.add(M[0],M[1],M[2]);var H=L[0]-l,J=L[1]-I,Y=L[2]-m,K=Math.sqrt(H*H+J*J+Y*Y),y=M[0]-l,z=M[1]-I,ga=M[2]-m,Z=Math.sqrt(y*y+z*z+ga*ga);e.add(H/
K,J/K,Y/K);e.add(y/Z,z/Z,ga/Z);M=[Math.abs(M[0]-L[0]),Math.abs(M[1]-L[1]),Math.abs(M[2]-L[2])];L=Math.sqrt(M[0]*M[0]+M[1]*M[1]+M[2]*M[2]);M[0]/=L;M[1]/=L;M[2]/=L;g.add(M[0],M[1],M[2]);g.add(M[0],M[1],M[2]);G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O}b.lf="LINES";q=new be;q.Jf=u;q.Wc=v;q.oc=u;q.qc=v;q.vq=G;q.lD=!1;q.T=!0;b.Ob=q;u=!1;for(p=0;16>p;p++)if(0!=c[p]){u=!0;break}!1==u&&(c[0]=c[5]=c[10]=c[15]=1);n.cf(this.t+".parse");n.B.wB(c,b.pd.pc);c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};
h("X.parserTRK",Lf);h("X.parserTRK.prototype.parse",Lf.prototype.parse);function Mf(){Ie.call(this);this.t="parserOBJ"}k(Mf,Ie);
Mf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;c=c.byteLength;var d=this.j("uchar",c),e=[];b.J=new jd(c);b.ya=new jd(c);var g=b.J,l=b.ya,m=0,q;for(q=0;q<c;++q)if(10==d[q]){var p=Ke(d,m,q).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var t=e[parseInt(p[1],10)-1],m=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];g.add(t[0],t[1],t[2]);g.add(m[0],m[1],m[2]);g.add(p[0],p[1],p[2]);t=new vd(t[0],t[1],t[2]);
p=new vd(p[0],p[1],p[2]);m=zd((new vd(m[0],m[1],m[2])).Ld(t),p.Ld(t));m.normalize();l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z)}m=q+1}n.cf(this.t+".parse");c=new de;c.qb=b;c.Za=a;this.dispatchEvent(c)};h("X.parserOBJ",Mf);h("X.parserOBJ.prototype.parse",Mf.prototype.parse);function Nf(){id.call(this);this.t="loader";this.Ho=new pd;this.Iq=0}k(Nf,id);function Of(a,b){a.Iq+=b/a.Ho.ek()/3;a.Iq=Math.min(1,a.Iq);var c=new Ee;c.Vm=a.Iq;a.dispatchEvent(c)}function Pf(a){a=a.Ca.Rt;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Qf))throw Error("The "+b+" file format is not supported.");return[a,b,Qf[b][0],Qf[b][1],Qf[b][2]]}
Nf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!rd(this.Ho.rc,a.Fe)||this.Ho.get(a.Fe)){this.Ho.set(a.Fe,!1);var c=Pf(a)[0];if(null!=a.Li)this.parse(null,a,b);else{var d=new XMLHttpRequest;C(d,"abort",this.qF.bind(this,d,a,b));C(d,"error",this.qF.bind(this,d,a,b));C(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Nf.prototype.parse=function(a,b,c){Of(this,1);setTimeout(function(){var d=Pf(b),e=d[3],d=new d[2];Zc(d,oe,this.complete.bind(this));var g=b.Li;null==g&&(g=a.response,b.Li=g);d.parse(b,c,g,e)}.bind(this),100)};Nf.prototype.complete=function(a){Of(this,1);setTimeout(function(){var b=a.Za,c=a.qb;b.Ca.T=!1;b.T=!0;c.Ba();this.Ho.set(b.Fe,!0)}.bind(this),100)};Nf.prototype.qF=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Qf={OBJ:[Mf,null],OFF:[Re,null],STL:[Jf,null],VTK:[Te,null],TRK:[Lf,null],MRC:[Hf,null],ST:[Hf,null],FSM:[Ve,null],INFLATED:[Ve,null],SMOOTHWM:[Ve,null],SPHERE:[Ve,null],PIAL:[Ve,null],ORIG:[Ve,null],NRRD:[If,null],NII:[Kf,null],GZ:[Kf,null],DCM:[Se,null],DICOM:[Se,null],"":[Se,null],CRV:[Cf,null],LABEL:[Bf,null],MGH:[Af,!1],MGZ:[Af,!0],RAW:[Ef,!1],RZ:[Ef,!0],TXT:[Gf,null],LUT:[Gf,null],PNG:[Ff,"png"],JPG:[Ff,"jpeg"],JPEG:[Ff,"jpeg"],GIF:[Ff,"gif"]};function Rf(){Ie.call(this);this.t="parserIMA"}k(Rf,Ie);
Rf.prototype.parse=function(a,b,c){b.Dj={};b.Dj.Wr=0;this.wk(c,b);if(null==b.Ca.length||b.eb.length==b.Ca.length){b.Dj.Wr=b.Ca.length;var d={};c={};for(var e=0;e<b.eb.length;e++)d.hasOwnProperty(b.eb[e].series_instance_uid)||(d[b.eb[e].series_instance_uid]=[],c[b.eb[e].series_instance_uid]={}),c[b.eb[e].series_instance_uid].hasOwnProperty(b.eb[e].sop_instance_uid)||(c[b.eb[e].series_instance_uid][b.eb[e].sop_instance_uid]=!0,d[b.eb[e].series_instance_uid].push(b.eb[e]));var g=Object.keys(d)[0],e=
d[g],l=e.length;c={};console.log("FIRST IMAGE",e,d,g);var m="image_position_patient";1==l?(m="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(m="image_position_patient",d=new vd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new vd(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=zd(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(m="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),m="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<l)switch(m){case "image_position_patient":var q=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-q[0],p=d[1]-q[1],t=d[2]-q[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+p*p+
t*t);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+m)}else e[0].pixel_spacing[2]=1;d=1;switch(m){case "image_position_patient":var q=e[0].image_position_patient,s=e[l-1].image_position_patient,g=s[0]-q[0],p=s[1]-q[1],t=s[2]-q[2],g=Math.sqrt(g*g+p*p+t*t),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[l-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+m)}q=e[0].columns*e[0].rows;g=q*d;s=null;switch(e[0].an){case 8:s=new Uint8Array(g);break;case 16:s=new Uint16Array(g);break;case 32:s=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Nj=e[0].pixel_spacing;for(var u=0;u<l;u++){var v=e[u].data,g=0;switch(m){case "image_position_patient":g=e[u].image_position_patient[0]-e[0].image_position_patient[0];p=e[u].image_position_patient[1]-
e[0].image_position_patient[1];t=e[u].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+p*p+t*t)/e[0].pixel_spacing[2];break;case "instance_number":g=e[u].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+m)}s.set(v,g*q)}c.data=s;b.ta=s;b.ac=[e[0].columns,e[0].rows,d];c.jN=b.ac;d=Je(s);l=d[0];d=d[1];c.min=b.Jf=b.Kc=l;c.max=b.Wc=b.Jc=d;-Infinity==b.oc&&(b.oc=l);Infinity==b.qc&&(b.qc=d);p=e[0].image_position_patient;l=Id();
switch(m){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new vd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new vd(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=zd(d,g);Od(l,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);Od(l,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);Od(l,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);Od(l,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new vd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new vd(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=zd(d,g),Od(l,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),Od(l,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),Od(l,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(Od(l,0,1,0,0,-p[0]),Od(l,1,0,-1,-0,-p[1]),Od(l,2,0,0,1,p[2]));Od(l,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+m)}c.kg=l;c.mg=Id();Sd(c.kg,c.mg);m=Hd(0,0,0,1);e=Gd();Ud(l,m,e);m=Hd(1,1,1,1);d=Gd();Ud(l,m,d);c.Fm=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Le(l,[b.ac[0],b.ac[1],b.ac[2]]);c.Dm=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.Em=[e[0],e[2],e[4]];b.$g(c);b.Oh=Qe(this,b)}c=new de;c.qb=b;c.Za=
a;this.dispatchEvent(c)};Rf.prototype.Uf=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Rf.prototype.wk=function(a,b){this.ta=a;if("undefined"==typeof b.eb||null==b.eb)b.eb=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.j("ushort",this.ta.byteLength),e=66,g=null,l=null,m=null,q=null,p=[[8,4368],[8,4384]],t=!1;e<d.length;){for(var g=d[e++],l=d[e++],m=d[e++],q=d[e++],t=!1,s=0,u=p.length;s<u;s++)if(g===p[s][0]&&l===p[s][1]){t=!0;break}if(t)window.console.log("Skipping ",
"("+g.toString(16)+","+l.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==q&&(q=m),g){case 2:switch(l){case 16:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Rf.prototype.Uf(d,e,m,q)}break;case 40:switch(l){case 16:c.rows=d[e];e+=q/2;break;case 17:c.columns=d[e];e+=q/2;break;case 256:c.an=d[e];e+=q/2;break;case 257:c.bits_stored=d[e];e+=q/2;break;case 2:c.number_of_images=
d[e];e+=q/2;break;case 48:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=Rf.prototype.Uf(d,e,m,q)}break;case 32:switch(l){case 14:c.series_instance_uid="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.series_instance_uid+=String.fromCharCode(g),c.series_instance_uid+=String.fromCharCode(m);break;case 19:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,
m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);l=l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),
parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Rf.prototype.Uf(d,e,m,q)}break;case 24:switch(l){case 36:c.sequence_name="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.sequence_name+=String.fromCharCode(g),c.sequence_name+=String.fromCharCode(m);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.slice_thickness+=
String.fromCharCode(g),c.slice_thickness+=String.fromCharCode(m);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Rf.prototype.Uf(d,e,m,q);break}case 65534:switch(l){default:q=0,e+=q/2}break;case 8:switch(l){case 24:c.sop_instance_uid="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.sop_instance_uid+=String.fromCharCode(g),c.sop_instance_uid+=String.fromCharCode(m);break;default:e=Rf.prototype.Uf(d,e,m,q)}break;case 16:switch(l){case 8720:for(s=0;s<q/2;s++)e++;break;default:e=
Rf.prototype.Uf(d,e,m,q)}break;default:e=Rf.prototype.Uf(d,e,m,q)}}switch(c.an){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.pb=this.ta.byteLength-c.columns*c.rows*2;d=null;switch(c.an){case 8:d=this.j("uchar",c.columns*c.rows);break;case 16:d=this.j("ushort",c.columns*c.rows);break;case 32:d=this.j("uint",c.columns*c.rows)}c.data=d;b.eb.push(c);return b};h("X.parserIMA",Rf);
h("X.parserIMA.prototype.parse",Rf.prototype.parse);var Sf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Tf=oc;function Uf(a,b){if(Tf){Tf=!1;var c=ba.location;if(c){var d=c.href;if(d&&(d=(d=Uf(3,d))&&decodeURIComponent(d))&&d!=c.hostname)throw Tf=!0,Error();}}return b.match(Sf)[a]||null};function Vf(a,b){gd.call(this);this.xp=a||1;this.Xp=b||ba;this.Gx=wa(this.fU,this);this.wz=ya()}k(Vf,gd);f=Vf.prototype;f.enabled=!1;f.ed=null;f.fU=function(){if(this.enabled){var a=ya()-this.wz;0<a&&a<.8*this.xp?this.ed=this.Xp.setTimeout(this.Gx,this.xp-a):(this.ed&&(this.Xp.clearTimeout(this.ed),this.ed=null),this.dispatchEvent(Wf),this.enabled&&(this.ed=this.Xp.setTimeout(this.Gx,this.xp),this.wz=ya()))}};
f.start=function(){this.enabled=!0;this.ed||(this.ed=this.Xp.setTimeout(this.Gx,this.xp),this.wz=ya())};f.stop=function(){this.enabled=!1;this.ed&&(this.Xp.clearTimeout(this.ed),this.ed=null)};f.i=function(){Vf.g.i.call(this);this.stop();delete this.Xp};var Wf="tick";function Xf(a,b,c){if(na(a))c&&(a=wa(a,c));else if(a&&"function"==typeof a.handleEvent)a=wa(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Yf(a){return"function"==typeof a.ek?a.ek():ja(a)||ka(a)?a.length:pb(a)}function Zf(a){if("function"==typeof a.yn)return a.yn();if(ka(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return qb(a)}function $f(a){if("function"==typeof a.wr)return a.wr();if("function"!=typeof a.yn){if(ja(a)||ka(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return rb(a)}}
function ag(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ja(a)||ka(a))A(a,b,void 0);else for(var c=$f(a),d=Zf(a),e=d.length,g=0;g<e;g++)b.call(void 0,d[g],c&&c[g],a)}function bg(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ja(a)||ka(a))return Jb(a,b,void 0);for(var c=$f(a),d=Zf(a),e=d.length,g=0;g<e;g++)if(!b.call(void 0,d[g],c&&c[g],a))return!1;return!0};function cg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function dg(){}dg.prototype.lE=null;function eg(a){var b;(b=a.lE)||(b={},fg(a)&&(b[0]=!0,b[1]=!0),b=a.lE=b);return b};var gg;function hg(){}k(hg,dg);function ig(a){return(a=fg(a))?new ActiveXObject(a):new XMLHttpRequest}function fg(a){if(!a.RG&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.RG=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.RG}gg=new hg;function jg(a){this.rc=new pd;a&&this.ux(a)}function kg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+pa(a):b.substr(0,1)+a}f=jg.prototype;f.ek=function(){return this.rc.ek()};f.add=function(a){this.rc.set(kg(a),a)};f.ux=function(a){a=Zf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.vh=function(a){a=Zf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.rc.remove(kg(a))};f.clear=function(){this.rc.clear()};f.Mr=function(){return this.rc.Mr()};
f.contains=function(a){a=kg(a);return rd(this.rc.rc,a)};f.YG=function(a){var b=new jg;a=Zf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.yn=function(){return this.rc.yn()};f.clone=function(){return new jg(this)};f.ep=function(a){return this.ek()==Yf(a)&&lg(this,a)};
function lg(a,b){var c=Yf(b);if(a.ek()>c)return!1;!(b instanceof jg)&&5<c&&(b=new jg(b));return bg(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.Zx?c.Zx(a):ja(c)||ka(c)?Mb(c,a):sb(c,a)})};function mg(a){var b;b||(b=ng(a||arguments.callee.caller,[]));return b}
function ng(a,b){var c=[];if(Mb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(og(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=og(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(ng(a.caller,b))}catch(l){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function og(a){if(pg[a])return pg[a];a=String(a);if(!pg[a]){var b=/function ([^\(]+)/.exec(a);pg[a]=b?b[1]:"[Anonymous]"}return pg[a]}var pg={};function qg(a,b,c,d,e){this.reset(a,b,c,d,e)}qg.prototype.oF=null;qg.prototype.nF=null;var rg=0;qg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||rg++;d||ya();this.Tr=a;this.ZQ=b;delete this.oF;delete this.nF};qg.prototype.II=function(a){this.Tr=a};function sg(a){this.Mn=a;this.JG=this.Vd=this.Tr=this.ub=null}function tg(a,b){this.name=a;this.value=b}tg.prototype.toString=function(){return this.name};var ug=new tg("SEVERE",1E3),vg=new tg("CONFIG",700),wg=new tg("FINE",500);f=sg.prototype;f.getName=function(){return this.Mn};f.getParent=function(){return this.ub};f.Hy=function(){this.Vd||(this.Vd={});return this.Vd};f.II=function(a){this.Tr=a};
function xg(a){if(a.Tr)return a.Tr;if(a.ub)return xg(a.ub);gb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=xg(this).value)for(na(b)&&(b=b()),a=this.dG(a,b,c,sg.prototype.log),b="log:"+a.ZQ,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.JG)for(var e=0,g=void 0;g=c.JG[e];e++)g(d);b=b.getParent()}};
f.dG=function(a,b,c,d){a=new qg(a,String(b),this.Mn);if(c){a.oF=c;var e;d=d||sg.prototype.dG;try{var g;var l=da("window.location.href");if(ka(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:l,stack:"Not available"};else{var m,q;b=!1;try{m=c.lineNumber||c.BY||"Not available"}catch(p){m="Not available",b=!0}try{q=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||l}catch(t){q="Not available",b=!0}g=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:m,fileName:q,stack:c.stack||"Not available"}}e="Message: "+Oa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Oa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Oa(mg(d)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}a.nF=e}return a};f.mu=function(a,b){this.log(vg,a,b)};f.xs=function(a){this.ub=a};var yg={},zg=null;
function Ag(a){zg||(zg=new sg(""),yg[""]=zg,zg.II(vg));var b;if(!(b=yg[a])){b=new sg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Ag(a.substr(0,c));c.Hy()[d]=b;b.xs(c);yg[a]=b}return b};function Bg(a,b){a&&a.log(wg,b,void 0)};function Cg(a){gd.call(this);this.headers=new pd;this.uw=a||null;this.gl=!1;this.tw=this.fb=null;this.Rr=this.gH=this.jv="";this.Fn=this.fz=this.Uu=this.vy=!1;this.Qs=0;this.lw=null;this.tI=Dg;this.pw=this.vU=!1}k(Cg,gd);var Dg="",Eg=Cg.prototype,Fg=Ag("goog.net.XhrIo");Eg.mh=Fg;var Gg=/^https?$/i,Hg=["POST","PUT"],Ig=[];function Jg(a,b){var c=new Cg;Ig.push(c);b&&c.I("complete",b);c.Az("ready",c.JM);c.send(a,void 0,void 0,void 0)}f=Cg.prototype;f.JM=function(){this.k();Pb(Ig,this)};
f.send=function(a,b,c,d){if(this.fb)throw Error("[goog.net.XhrIo] Object is active with another request="+this.jv+"; newUri="+a);b=b?b.toUpperCase():"GET";this.jv=a;this.Rr="";this.gH=b;this.vy=!1;this.gl=!0;this.fb=this.uw?ig(this.uw):ig(gg);this.tw=this.uw?eg(this.uw):eg(gg);this.fb.onreadystatechange=wa(this.UH,this);try{Bg(this.mh,Kg(this,"Opening Xhr")),this.fz=!0,this.fb.open(b,String(a),!0),this.fz=!1}catch(e){Bg(this.mh,Kg(this,"Error opening Xhr: "+e.message));Lg(this,e);return}a=c||"";var g=
this.headers.clone();d&&ag(d,function(a,b){g.set(b,a)});d=Kb(g.wr());c=ba.FormData&&a instanceof ba.FormData;!Mb(Hg,b)||d||c||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");g.forEach(function(a,b){this.fb.setRequestHeader(b,a)},this);this.tI&&(this.fb.responseType=this.tI);"withCredentials"in this.fb&&(this.fb.withCredentials=this.vU);try{Mg(this),0<this.Qs&&(this.pw=Ng(this.fb),Bg(this.mh,Kg(this,"Will abort after "+this.Qs+"ms if incomplete, xhr2 "+this.pw)),this.pw?(this.fb.timeout=
this.Qs,this.fb.ontimeout=wa(this.AJ,this)):this.lw=Xf(this.AJ,this.Qs,this)),Bg(this.mh,Kg(this,"Sending request")),this.Uu=!0,this.fb.send(a),this.Uu=!1}catch(l){Bg(this.mh,Kg(this,"Send error: "+l.message)),Lg(this,l)}};function Ng(a){return mc&&vc(9)&&ma(a.timeout)&&ca(a.ontimeout)}function Lb(a){return"content-type"==a.toLowerCase()}f.AJ=function(){"undefined"!=typeof aa&&this.fb&&(this.Rr="Timed out after "+this.Qs+"ms, aborting",Bg(this.mh,Kg(this,this.Rr)),this.dispatchEvent("timeout"),this.abort(8))};
function Lg(a,b){a.gl=!1;a.fb&&(a.Fn=!0,a.fb.abort(),a.Fn=!1);a.Rr=b;Og(a);Pg(a)}function Og(a){a.vy||(a.vy=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.fb&&this.gl&&(Bg(this.mh,Kg(this,"Aborting")),this.gl=!1,this.Fn=!0,this.fb.abort(),this.Fn=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pg(this))};f.i=function(){this.fb&&(this.gl&&(this.gl=!1,this.Fn=!0,this.fb.abort(),this.Fn=!1),Pg(this,!0));Cg.g.i.call(this)};
f.UH=function(){this.ln||(this.fz||this.Uu||this.Fn?Qg(this):this.PR())};f.PR=function(){Qg(this)};
function Qg(a){if(a.gl&&"undefined"!=typeof aa)if(a.tw[1]&&4==Rg(a)&&2==Sg(a))Bg(a.mh,Kg(a,"Local request error detected and ignored"));else if(a.Uu&&4==Rg(a))Xf(a.UH,0,a);else if(a.dispatchEvent("readystatechange"),4==Rg(a)){Bg(a.mh,Kg(a,"Request complete"));a.gl=!1;try{var b=Sg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var g=Uf(1,String(a.jv));if(!g&&self.location)var l=self.location.protocol,g=l.substr(0,
l.length-1);e=!Gg.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var m;try{m=2<Rg(a)?a.fb.statusText:""}catch(q){Bg(a.mh,"Can not get status: "+q.message),m=""}a.Rr=m+" ["+Sg(a)+"]";Og(a)}}finally{Pg(a)}}}function Pg(a,b){if(a.fb){Mg(a);var c=a.fb,d=a.tw[0]?ea:null;a.fb=null;a.tw=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.mh)&&c.log(ug,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}
function Mg(a){a.fb&&a.pw&&(a.fb.ontimeout=null);ma(a.lw)&&(ba.clearTimeout(a.lw),a.lw=null)}f.cj=function(){return!!this.fb};function Rg(a){return a.fb?a.fb.readyState:0}function Sg(a){try{return 2<Rg(a)?a.fb.status:-1}catch(b){return-1}}function Kg(a,b){return b+" ["+a.gH+" "+a.jv+" "+Sg(a)+"]"};/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function P(){}h("gxnat",P);P.JPEG_CONVERT_SUFFIX="?format=image/jpeg";P.RN={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};P.QC="?format=zip";P.nk=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);P.get(a,b,"json")};
P.get=function(a,b,c){Jg(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.fb?cg(a.fb.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.fb?a.fb.responseText:""}catch(g){Bg(a.mh,"Can not get responseText: "+g.message),e=""}b(e)}})};
P.uv=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,g=/^0x[0-9a-f]+$/i,l=/^0/,m=(P.uv.nQ&&(""+a).toLowerCase()||""+a).replace(d,"")||"",q=(P.uv.nQ&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=m.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=q.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),m=parseInt(m.match(g))||1!=d.length&&m.match(e)&&Date.parse(m);if(e=parseInt(q.match(g))||m&&q.match(e)&&Date.parse(q)||null){if(m<e)return-1;if(m>e)return 1}m=0;for(q=Math.max(d.length,c.length);m<q;m++){e=!(d[m]||"").match(l)&&parseFloat(d[m])||d[m]||0;g=!(c[m]||"").match(l)&&parseFloat(c[m])||c[m]||0;if(isNaN(e)!==isNaN(g))return isNaN(e)?1:-1;typeof e!==typeof g&&(e+="",g+="");if(e<g)return-1;if(e>g)return 1}return 0};
P.RT=function(a,b){var c=[],d={},e=[],g={};A(a,function(a){g=a;A(b,function(a){g=g[a]});g=g.toLowerCase();c.push(g);d[g]=a});c=c.sort(P.IH);A(c,function(a){e.push(d[a])});return e};h("gxnat.JPEG_CONVERT_SUFFIX",P.JPEG_CONVERT_SUFFIX);h("gxnat.folderAbbrev",P.RN);h("gxnat.ZIP_SUFFIX",P.QC);h("gxnat.jsonGet",P.nk);h("gxnat.get",P.get);h("gxnat.naturalSort",P.uv);h("gxnat.sortXnatPropertiesArray",P.RT);P.ma=function(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}this.wF()};k(P.ma,Cc);h("gxnat.Path",P.ma);
P.ma.jG=function(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a};P.ma.Fy=function(a){for(var b=0,c=P.ma.Lk.length,b=0;b<c;b++)a(P.ma.Lk[b],b)};P.ma.fO=function(a,b){var c=new P.ma(a),d=new P.ma(b),e=void 0;P.ma.Fy(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e};P.ma.Xy=function(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]};
P.ma.Lk=["projects","subjects","experiments",["scans","resources"],"files"];P.ma.prototype.wF=function(){var a,b,c,d=!1;P.ma.Fy(function(e,g){if(ia(e))for(a=0,b=e.length;a<b;a++)c=e[a],null!=this[c]||d||(this.ky=P.ma.Lk[g-1],d=!0);else null!=this[e]||d||(this.ky=P.ma.Lk[g-1],d=!0)}.bind(this))};P.ma.prototype.Cu=function(){null!=this.ky||this.wF;return this.ky};
P.ma.prototype.xk=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,g=P.ma.Lk.length,l=0,d=0;d<g;d++){c=P.ma.Lk[d];if(ia(c))for(l=c.length,e=0;e<l;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};P.ma.prototype.k=function(){P.ma.g.k.call(this);wb(this)};h("gxnat.Path.getQueryPrefix",P.ma.jG);h("gxnat.Path.forEachXnatLevel",P.ma.Fy);
h("gxnat.Path.getDeepestSharedXnatLevel",P.ma.fO);h("gxnat.Path.graftUrl",P.ma.Xy);h("gxnat.Path.xnatLevelOrder",P.ma.Lk);h("gxnat.Path.prototype.getDeepestLevel",P.ma.prototype.Cu);h("gxnat.Path.prototype.pathByLevel",P.ma.prototype.xk);h("gxnat.Path.prototype.dispose",P.ma.prototype.k);P.n=function(a){this.rf=new P.ma(a);this.projects=[];this[P.n.Kw]={};this[P.n.Ji]={};this[P.n.sm]={}};k(P.n,Cc);h("gxnat.ProjectTree",P.n);function Tg(a){this[P.n.Cd]=ka(a)?new P.ma(a):a;this[P.n.oC]=this[P.n.Cd].Cu();a=P.ma.Lk.indexOf(this[P.n.Cd].Cu())+1;-1!=a&&(this[P.n.Am]=P.ma.Lk[a],ka(this[P.n.Am])&&(this[P.n.wC]=this[P.n.Cd].originalUrl+"/"+this[P.n.Am],this[this[P.n.Am]]=[]))}k(Tg,Cc);h("gxnat.ProjectTree.TreeNode",Tg);Tg.prototype.xh=function(a){this.Ae=a};Tg.prototype.Eg=function(){return this.Ae};
Tg.prototype.k=function(){Tg.g.k.call(this);null!=this[P.n.Cd]&&this[P.n.Cd].k();wb(this)};P.n.oC=r();P.n.wC=r();P.n.TK=r();P.n.Cd=r();P.n.Am=r();P.n.zm=r();P.n.yK=r();P.n.Be=r();P.n.Kw=r();P.n.Ji=r();P.n.sm=r();P.n.BC=["ID","description","name","URI"];P.n.Pw=["gender","handedness","label","URI"];P.n.ZB=["label","URI"];P.n.Vx=function(a,b){return Na(a.Eg(),b.Eg())};P.n.tr=function(a){var b="&columns=";A(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b};f=P.n.prototype;
f.KF=function(a){var b=[];w(this.rr(a),function(a,d){"projects"==d?b.push(a[P.n.Be].ID):b.push(a[P.n.Be].label)});return b};f.LF=function(a){var b=[];w(this.rr(a),function(a){b.push(a[P.n.Cd].originalUrl)});return b};f.rr=function(a){branch={projects:this.$e};"experiments"==a[P.n.Am]?branch.subjects=a:ia(a[P.n.Am])&&(branch.subjects=this[P.n.Ji][a[P.n.Cd].xk("subjects")],branch.experiments=a);return branch};f.nH=function(a,b){this.Vr(this.rf,a,b)};
f.Vr=function(a,b,c){var d=ka(a)?new P.ma(a):a,e;if(null!=this.$e){a={projects:this.$e};if(null!=d.subjects){e=d.xk("subjects");if(null==this[P.n.Ji][e]){this.Dz(e,function(a){this.pH(a,function(){null!=b&&b(a);this.Vr(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[P.n.Ji][e]}if(null!=d.experiments){e=d.xk("experiments");if(null==this[P.n.sm][e]){this.Cz(e,function(a){null!=b&&b(a);this.Vr(d,b,c)}.bind(this));return}a.experiments=this[P.n.sm][e]}null!=c&&c(a)}else this.oH(function(a){null!=
b&&b(a);this.Vr(d,b,c)}.bind(this))};f.oH=function(a){if(null==this.$e){var b=P.n.tr(P.n.BC),c=this.rf.prefix+"/projects/"+this.rf.projects,d;P.nk(this.rf.prefix+"/projects",function(b){d=new Tg(c);this.projects.push(d);this.$e=d;this[P.n.Kw][d[P.n.Cd].originalUrl]=d;d[P.n.Be]=b[0];d.xh(d[P.n.Be].name);a(d)}.bind(this),"&ID="+this.rf.projects+b)}};f.yr=function(a){return this[P.n.Ji][a]};f.kp=function(a){return this[P.n.sm][a]};
f.pH=function(a,b){var c=a;ka(a)?c=this.yr(a):a instanceof P.ma&&(c=this.yr(a.originalUrl));if(null!=c[P.n.Be])b(c);else{var d=this.rf.prefix+"/subjects",e=P.n.tr(P.n.Pw),e="&ID="+c[P.n.Cd].subjects+e;P.nk(d,function(a){c[P.n.Be]=a[0];c.xh(c[P.n.Be].label);b(c)}.bind(this),e)}};
f.qH=function(a,b){if(null==this.$e[P.n.zm]||!0!=this.$e[P.n.zm]){var c=this.$e[P.n.Cd].prefix+"/subjects",d="&project="+this.$e[P.n.Cd].projects+P.n.tr(P.n.Pw),e,g;P.nk(c,function(c){A(c,function(d){g=this.$e[P.n.Cd].prefix+"/projects/"+this.$e[P.n.Cd].projects+"/subjects/"+d.ID;e=this.Dz(g);null==e[P.n.Be]&&(e[P.n.Be]=d,e.xh(e[P.n.Be].label));null!=a&&a(e);this.$e.subjects.length==c.length&&(this.$e[P.n.zm]=!0,null!=b&&(d=this.$e.subjects,d.sort(P.n.Vx),b(d)))}.bind(this))}.bind(this),d)}};
f.Dz=function(a,b){if(null!=this[P.n.Ji][a])return this[P.n.Ji][a];subjNode=new Tg(a);this.$e.subjects.push(subjNode);this[P.n.Ji][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.lH=function(a,b){var c=a;ka(a)?c=this.kp(a):a instanceof P.ma&&(c=this.kp(a.originalUrl));var d=this.rf.prefix+"/experiments",e=P.n.tr(P.n.ZB),e="&ID="+c[P.n.Cd].experiments+e;P.nk(d,function(a){c[P.n.Be]=a[0];c.xh(c[P.n.Be].label);b(c)}.bind(this),e)};
f.mH=function(a,b,c){var d=a;ka(a)?d=this.yr(a):a instanceof P.ma&&(d=this.yr(a.originalUrl));if(null!=d[P.n.zm]&&!0==d[P.n.zm])window.console.log("Don't need to reload the experiments of "+d[P.n.Cd].originalUrl);else{var e=d[P.n.Cd].originalUrl+"/experiments";P.nk(e+"?xsiType=xnat:imageSessionData",function(a){A(a,function(l){this.Cz(e+"/"+l.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[P.n.zm]=!0,null!=c&&(e=d.experiments,e.sort(P.n.Vx),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Cz=function(a,b){null==this[P.n.sm][a]&&(exptNode=new Tg(a),this.lH(exptNode,function(c){this[P.n.Ji][c[P.n.Cd].xk("subjects")].experiments.push(c);this[P.n.sm][a]=c;null!=b&&b(c)}.bind(this)))};f.k=function(){P.n.g.k.call(this);delete this.$e;this.rf.k();delete this.rf;A(this.projects,function(a){null!=a.subjects&&A(a.subjects,function(a){null!=a.experiments&&A(a.experiments,function(a){a.k()});a.k()});a.k()});wb(this)};h("gxnat.ProjectTree.TreeNode",Tg);h("gxnat.ProjectTree.LEVEL_KEY",P.n.oC);
h("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",P.n.wC);h("gxnat.ProjectTree.NEXTLEVELJSON_KEY",P.n.TK);h("gxnat.ProjectTree.PATH_KEY",P.n.Cd);h("gxnat.ProjectTree.NEXTLEVEL_KEY",P.n.Am);h("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",P.n.zm);h("gxnat.ProjectTree.ISLOADING_KEY",P.n.yK);h("gxnat.ProjectTree.METADATA_KEY",P.n.Be);h("gxnat.ProjectTree.PROJ_DIRECT",P.n.Kw);h("gxnat.ProjectTree.SUBJ_DIRECT",P.n.Ji);h("gxnat.ProjectTree.EXPT_DIRECT",P.n.sm);h("gxnat.ProjectTree.PROJECT_METADATA",P.n.BC);
h("gxnat.ProjectTree.SUBJECT_METADATA",P.n.Pw);h("gxnat.ProjectTree.EXPERIMENT_METADATA",P.n.ZB);h("gxnat.ProjectTree.compareNodeTitles",P.n.Vx);h("gxnat.ProjectTree.getColumnQuery",P.n.tr);h("gxnat.ProjectTree.prototype.getBranchTitles",P.n.prototype.KF);h("gxnat.ProjectTree.prototype.getBranchUris",P.n.prototype.LF);h("gxnat.ProjectTree.prototype.getBranchFromEndNode",P.n.prototype.rr);h("gxnat.ProjectTree.prototype.loadInitBranch",P.n.prototype.nH);h("gxnat.ProjectTree.prototype.loadBranch",P.n.prototype.Vr);
h("gxnat.ProjectTree.prototype.loadProject",P.n.prototype.oH);h("gxnat.ProjectTree.prototype.getSubjectNodeByUri",P.n.prototype.yr);h("gxnat.ProjectTree.prototype.getExperimentNodeByUri",P.n.prototype.kp);h("gxnat.ProjectTree.prototype.loadSubjectMetadata",P.n.prototype.pH);h("gxnat.ProjectTree.prototype.loadSubjects",P.n.prototype.qH);h("gxnat.ProjectTree.prototype.loadSubject",P.n.prototype.Dz);h("gxnat.ProjectTree.prototype.loadExperimentMetadata",P.n.prototype.lH);
h("gxnat.ProjectTree.prototype.loadExperiments",P.n.prototype.mH);h("gxnat.ProjectTree.prototype.loadExperiment",P.n.prototype.Cz);h("gxnat.ProjectTree.prototype.dispose",P.n.prototype.k);function Ug(a){a=a.className;return ka(a)&&a.match(/\S+/g)||[]}function R(a,b){var c=Ug(a),d=Tb(arguments,1),e=c.length+d.length;Vg(c,d);a.className=c.join(" ");return c.length==e}function Wg(a,b){var c=Ug(a),d=Tb(arguments,1),e=Xg(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Vg(a,b){for(var c=0;c<b.length;c++)Mb(a,b[c])||a.push(b[c])}function Xg(a,b){return Gb(a,function(a){return!Mb(b,a)})}
function Yg(a,b,c){var d=Ug(a);ka(b)?Pb(d,b):ia(b)&&(d=Xg(d,b));ka(c)&&!Mb(d,c)?d.push(c):ia(c)&&Vg(d,c);a.className=d.join(" ")};function Zg(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=Zg.prototype;f.clone=function(){return new Zg(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function $g(a,b){return new Zg(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof Zg?(this.x+=a.x,this.y+=a.y):(this.x+=a,ma(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=ma(b)?b:a;this.x*=a;this.y*=c;return this};function ah(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=ah.prototype;f.clone=function(){return new ah(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof ah?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof Zg?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,ma(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=ma(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function bh(a,b){this.width=a;this.height=b}function ch(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=bh.prototype;f.clone=function(){return new bh(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.Mr=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=ma(b)?b:a;this.width*=a;this.height*=c;return this};function dh(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=dh.prototype;f.clone=function(){return new dh(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.YG=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof dh?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function eh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.ry=function(a){return Math.sqrt(eh(this,a))};f.Hl=function(){return new bh(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof Zg?(this.left+=a.x,this.top+=a.y):(this.left+=a,ma(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=ma(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function fh(){return oc?"Webkit":nc?"Moz":mc?"ms":lc?"O":null};var gh=!mc||wc(9),hh=!nc&&!mc||mc&&wc(9)||nc&&vc("1.9.1"),ih=mc&&!vc("9");function jh(a){return a?new kh(lh(a)):Da||(Da=new kh)}function mh(a){return ka(a)?document.getElementById(a):a}function nh(a,b,c){return oh(document,a,b,c)}function ph(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):oh(document,"*",a,b)}function qh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):oh(document,"*",a,b)[0])||null}
function oh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,g=0,l;l=a[g];g++)b==l.nodeName&&(d[e++]=l);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(g=e=0;l=a[g];g++)b=l.className,"function"==typeof b.split&&Mb(b.split(/\s+/),c)&&(d[e++]=l);d.length=e;return d}return a}
function rh(a,b){w(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in sh?a.setAttribute(sh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var sh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function th(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new bh(a.clientWidth,a.clientHeight)}function uh(a){return oc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function vh(a){return a?a.parentWindow||a.defaultView:window}function wh(a,b,c){return xh(document,arguments)}
function xh(a,b){var c=b[0],d=b[1];if(!gh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Oa(d.name),'"');if(d.type){c.push(' type="',Oa(d.type),'"');var e={};Bb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ka(d)?c.className=d:ia(d)?c.className=d.join(" "):rh(c,d));2<b.length&&yh(a,c,b,2);return c}
function yh(a,b,c,d){function e(c){c&&b.appendChild(ka(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];!ja(g)||oa(g)&&0<g.nodeType?e(g):A(zh(g)?Rb(g):g,e)}}function Ah(a,b){yh(lh(a),a,arguments,1)}function Bh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Ch(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function S(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function Dh(a){return hh&&void 0!=a.children?a.children:Gb(a.childNodes,function(a){return 1==a.nodeType})}function Eh(a){return void 0!=a.firstElementChild?a.firstElementChild:Fh(a.firstChild)}function Gh(a){return void 0!=a.nextElementSibling?a.nextElementSibling:Fh(a.nextSibling)}function Fh(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Hh(a){return oa(a)&&1==a.nodeType}
function Ih(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function Jh(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var g=[],l=arguments[b];l;)g.unshift(l),l=l.parentNode;d.push(g);e=Math.min(e,g.length)}g=null;for(b=0;b<e;b++){for(var l=d[0][b],m=1;m<c;m++)if(l!=d[m][b])return g;g=l}return g}function lh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Kh(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Bh(a),a.appendChild(lh(a).createTextNode(String(b)))}var Lh={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Mh={IMG:" ",BR:"\n"};function Nh(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function Oh(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function Ph(a){a=a.tabIndex;return ma(a)&&0<=a&&32768>a}function Qh(a){if(ih&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Rh(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");ih||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Sh(a){var b=[];Rh(a,b,!1);return b.join("")}
function Rh(a,b,c){if(!(a.nodeName in Lh))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Mh)b.push(Mh[a.nodeName]);else for(a=a.firstChild;a;)Rh(a,b,c),a=a.nextSibling}function zh(a){if(a&&"number"==typeof a.length){if(oa(a))return"function"==typeof a.item||"string"==typeof a.item;if(na(a))return"function"==typeof a.item}return!1}
function Th(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return Uh(a,function(a){return(!d||a.nodeName==d)&&(!c||ka(a.className)&&Mb(a.className.split(/\s+/),c))})}function Uh(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function kh(a){this.Sa=a||ba.document||document}f=kh.prototype;f.da=jh;function Vh(a){return a.Sa}f.b=function(a){return ka(a)?this.Sa.getElementById(a):a};f.XJ=kh.prototype.b;f.C=function(a,b,c){return xh(this.Sa,arguments)};f.createElement=function(a){return this.Sa.createElement(a)};
f.createTextNode=function(a){return this.Sa.createTextNode(String(a))};function Wh(a){return"CSS1Compat"==a.Sa.compatMode}function Xh(a){a=a.Sa;return a.parentWindow||a.defaultView}function Yh(a){var b=a.Sa;a=uh(b);b=b.parentWindow||b.defaultView;return mc&&vc("10")&&b.pageYOffset!=a.scrollTop?new Zg(a.scrollLeft,a.scrollTop):new Zg(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.append=Ah;f.jz=Ch;f.removeNode=S;f.Hy=Dh;f.VF=Eh;f.contains=Ih;
f.lk=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!Oh(a)||Ph(a)):Oh(a)&&Ph(a))&&mc?(a=na(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function Zh(a,b,c){ka(b)?$h(a,c,b):w(b,xa($h,a))}function $h(a,b,c){a:if(c=cb(c),void 0===a.style[c]){var d=fh()+eb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function ai(a,b){var c=lh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function bi(a,b){return ai(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function ci(a){return bi(a,"position")}
function di(a,b,c){var d,e=nc&&(hc||rc)&&vc("1.9");b instanceof Zg?(d=b.x,b=b.y):(d=b,b=c);a.style.left=ei(d,e);a.style.top=ei(b,e)}function fi(a){return new Zg(a.offsetLeft,a.offsetTop)}function gi(a){a=a?lh(a):document;return!mc||wc(9)||Wh(jh(a))?a.documentElement:a.body}
function hi(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}mc&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function ii(a){if(mc&&!wc(8))return a.offsetParent;var b=lh(a),c=bi(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=bi(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function ji(a){for(var b=new ah(0,Infinity,Infinity,0),c=jh(a),d=c.Sa.body,e=c.Sa.documentElement,g=uh(c.Sa);a=ii(a);)if(!(mc&&0==a.clientWidth||oc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=bi(a,"overflow")){var l=li(a),m;m=a;if(nc&&!vc("1.9")){var q=parseFloat(ai(m,"borderLeftWidth"));if(mi(m))var p=m.offsetWidth-m.clientWidth-q-parseFloat(ai(m,"borderRightWidth")),q=q+p;m=new Zg(q,parseFloat(ai(m,"borderTopWidth")))}else m=new Zg(m.clientLeft,m.clientTop);l.x+=m.x;l.y+=m.y;b.top=Math.max(b.top,
l.y);b.right=Math.min(b.right,l.x+a.clientWidth);b.bottom=Math.min(b.bottom,l.y+a.clientHeight);b.left=Math.max(b.left,l.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=th(Xh(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function li(a){var b,c=lh(a),d=bi(a,"position"),e=nc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Zg(0,0),l=gi(c);if(a==l)return g;if(a.getBoundingClientRect)b=hi(a),a=Yh(jh(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(l),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);
if(oc&&"fixed"==ci(b)){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(lc||oc&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=ii(b))&&b!=c.body&&b!=l;)g.x-=b.scrollLeft,lc&&"TR"==b.tagName||(g.y-=b.scrollTop)}return g}function ni(a,b){var c=oi(a),d=oi(b);return new Zg(c.x-d.x,c.y-d.y)}
function pi(a){var b;if(a.getBoundingClientRect)b=hi(a),b=new Zg(b.left,b.top);else{b=Yh(jh(a));var c=li(a);b=new Zg(c.x-b.x,c.y-b.y)}if(nc&&!vc(12)){b:{c=cb("transform");if(void 0===a.style[c]&&(c=fh()+eb(c),void 0!==a.style[c])){c=(oc?"-webkit":nc?"-moz":mc?"-ms":lc?"-o":null)+"-transform";break b}c="transform"}a=(a=bi(a,c)||bi(a,"transform"))?(a=a.match(qi))?new Zg(parseFloat(a[1]),parseFloat(a[2])):new Zg(0,0):new Zg(0,0);a=new Zg(b.x+a.x,b.y+a.y)}else a=b;return a}
function oi(a){if(1==a.nodeType)return pi(a);var b=na(a.XN),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Yd.targetTouches&&(c=a.Yd.targetTouches[0]);return new Zg(c.clientX,c.clientY)}function ri(a,b,c){if(b instanceof bh)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");si(a,b);ti(a,c)}function ei(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function ti(a,b){a.style.height=ei(b,!0)}function si(a,b){a.style.width=ei(b,!0)}
function ui(a){var b=vi;if("none"!=bi(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,g=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=g;c.visibility=e;return a}function vi(a){var b=a.offsetWidth,c=a.offsetHeight,d=oc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new bh(b,c):(a=hi(a),new bh(a.right-a.left,a.bottom-a.top))}function wi(a){var b=li(a);a=ui(a);return new dh(b.x,b.y,a.width,a.height)}
function xi(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function yi(a,b){a.style.display=b?"":"none"}function zi(a){mc&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function mi(a){return"rtl"==bi(a,"direction")}var Ai=nc?"MozUserSelect":oc?"WebkitUserSelect":null;
function Bi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Ai){if(b=b?"none":"",a.style[Ai]=b,c){a=0;for(var d;d=c[a];a++)d.style[Ai]=b}}else if(mc||lc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Ci(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Di(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Ci(a,c):0}function Ei(a,b){if(mc){var c=Di(a,b+"Left"),d=Di(a,b+"Right"),e=Di(a,b+"Top"),g=Di(a,b+"Bottom");return new ah(e,d,g,c)}c=ai(a,b+"Left");d=ai(a,b+"Right");e=ai(a,b+"Top");g=ai(a,b+"Bottom");return new ah(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var Fi={thin:2,medium:4,thick:6};
function Gi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Fi?Fi[c]:Ci(a,c)}function Hi(a){if(mc&&!wc(9)){var b=Gi(a,"borderLeft"),c=Gi(a,"borderRight"),d=Gi(a,"borderTop");a=Gi(a,"borderBottom");return new ah(d,c,a,b)}b=ai(a,"borderLeftWidth");c=ai(a,"borderRightWidth");d=ai(a,"borderTopWidth");a=ai(a,"borderBottomWidth");return new ah(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var qi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Ii(a){Cc.call(this);this.ve=a;this.Vb={}}k(Ii,Cc);var Ji=[];f=Ii.prototype;f.I=function(a,b,c,d){ia(b)||(b&&(Ji[0]=b.toString()),b=Ji);for(var e=0;e<b.length;e++){var g=C(a,b[e],c||this.handleEvent,d||!1,this.ve||this);if(!g)break;this.Vb[g.key]=g}return this};f.Az=function(a,b,c,d){return Ki(this,a,b,c,d)};function Ki(a,b,c,d,e,g){if(ia(c))for(var l=0;l<c.length;l++)Ki(a,b,c[l],d,e,g);else{b=Zc(b,c,d||a.handleEvent,e,g||a.ve||a);if(!b)return a;a.Vb[b.key]=b}return a}
f.gc=function(a,b,c,d,e){if(ia(b))for(var g=0;g<b.length;g++)this.gc(a,b[g],c,d,e);else c=c||this.handleEvent,e=e||this.ve||this,c=Sc(c),d=!!d,b=ib(a)?a.xr(b,c,d,e):a?(a=Uc(a))?a.xr(b,c,d,e):null:null,b&&(ad(b),delete this.Vb[b.key]);return this};f.vh=function(){w(this.Vb,ad);this.Vb={}};f.i=function(){Ii.g.i.call(this);this.vh()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Li(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=ci(a)||(c=lh(a).documentElement);if(!c)return b;if(nc)var d=Hi(c),b=b+d.left;else wc(8)&&(d=Hi(c),b-=d.left);return mi(c)?c.clientWidth-(b+a.offsetWidth):b};function Mi(a,b,c){gd.call(this);this.target=a;this.handle=b||a;this.zz=c||new dh(NaN,NaN,NaN,NaN);this.Sa=lh(a);this.Hd=new Ii(this);Gc(this,xa(Hc,this.Hd));C(this.handle,["touchstart","mousedown"],this.Is,!1,this)}k(Mi,gd);var Ni=mc||nc&&vc("1.9.3");f=Mi.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.jB=0;f.kB=0;f.$j=0;f.pf=0;f.Xd=!0;f.wl=!1;f.QG=0;f.sv=0;f.cQ=!1;f.eo=!1;f.yl=function(a){this.eo=a};f.Rb=function(){return this.Hd};function Oi(a,b){a.zz=b||new dh(NaN,NaN,NaN,NaN)}
f.SI=function(a){this.Tv=a};f.xd=function(a){this.Xd=a};f.i=function(){Mi.g.i.call(this);$c(this.handle,["touchstart","mousedown"],this.Is,!1,this);this.Hd.vh();Ni&&this.Sa.releaseCapture();this.handle=this.target=null};function Pi(a){ca(a.mj)||(a.mj=mi(a.target));return a.mj}
f.Is=function(a){var b="mousedown"==a.type;if(!this.Xd||this.wl||b&&!Oc(a))this.dispatchEvent("earlycancel");else{Qi(a);if(0==this.QG)if(this.dispatchEvent(new Ri("start",this,a.clientX,a.clientY)))this.wl=!0,a.preventDefault();else return;else a.preventDefault();var b=this.Sa,c=b.documentElement,d=!Ni;this.Hd.I(b,["touchmove","mousemove"],this.TP,d);this.Hd.I(b,["touchend","mouseup"],this.zl,d);Ni?(c.setCapture(!1),this.Hd.I(c,"losecapture",this.zl)):this.Hd.I(vh(b),"blur",this.zl);mc&&this.cQ&&
this.Hd.I(b,"dragstart",Kc);this.Tv&&this.Hd.I(this.Tv,"scroll",this.Jp,d);this.clientX=this.jB=a.clientX;this.clientY=this.kB=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.$j=this.eo?Li(this.target):this.target.offsetLeft;this.pf=this.target.offsetTop;this.BA=Yh(jh(this.Sa));this.sv=ya()}};
f.zl=function(a,b){this.Hd.vh();Ni&&this.Sa.releaseCapture();if(this.wl){Qi(a);this.wl=!1;var c=Si(this,this.$j),d=Ti(this,this.pf);this.dispatchEvent(new Ri("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function Qi(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.Ta(a.Yd.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.Ta(a.Yd.changedTouches[0],a.currentTarget)}
f.TP=function(a){if(this.Xd){Qi(a);var b=(this.eo&&Pi(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.wl){var d=this.jB-this.clientX,e=this.kB-this.clientY;if(d*d+e*e>this.QG)if(this.dispatchEvent(new Ri("start",this,a.clientX,a.clientY)))this.wl=!0;else{this.ln||this.zl(a);return}}c=Ui(this,b,c);b=c.x;c=c.y;this.wl&&this.dispatchEvent(new Ri("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(Vi(this,a,b,c),a.preventDefault())}};function Ui(a,b,c){var d=Yh(jh(a.Sa));b+=d.x-a.BA.x;c+=d.y-a.BA.y;a.BA=d;a.$j+=b;a.pf+=c;b=Si(a,a.$j);a=Ti(a,a.pf);return new Zg(b,a)}f.Jp=function(a){var b=Ui(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Vi(this,a,b.x,b.y)};function Vi(a,b,c,d){a.ly(c,d);a.dispatchEvent(new Ri("drag",a,b.clientX,b.clientY,0,c,d))}
function Si(a,b){var c=a.zz,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function Ti(a,b){var c=a.zz,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.ly=function(a,b){this.eo&&Pi(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.ni=function(){return this.wl};
function Ri(a,b,c,d,e,g,l,m){Jc.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(g)?g:b.$j;this.top=ca(l)?l:b.pf;this.ty=b;this.sN=!!m}k(Ri,Jc);Db("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function Wi(){this.KA="";this.fL=Xi;this.bF=null}Wi.prototype.PF=function(){return this.bF};Wi.prototype.toString=function(){return"SafeHtml{"+this.KA+"}"};function Yi(a){if(a instanceof Wi&&a.constructor===Wi&&a.fL===Xi)return a.KA;gb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}Db("action","cite","data","formaction","href","manifest","poster","src");Db("link","script","style");var Xi={};function Zi(a,b){var c=new Wi;c.KA=a;c.bF=b;return c}var $i=Zi("",0);function aj(){}fa(aj);aj.prototype.LH=0;function bj(a){gd.call(this);this.dc=a||jh();this.mj=cj;this.ih=null;this.Fa=!1;this.q=null;this.Jl=void 0;this.ai=this.Vd=this.ub=this.Qz=null;this.QJ=!1}k(bj,gd);bj.prototype.aQ=aj.qf();var cj=null;
function dj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function ej(a){return a.ih||(a.ih=":"+(a.aQ.LH++).toString(36))}function fj(a,b){a.ub&&a.ub.ai&&(xb(a.ub.ai,a.ih),yb(a.ub.ai,b,a));a.ih=b}f=bj.prototype;f.b=function(){return this.q};
f.Rb=function(){this.Jl||(this.Jl=new Ii(this));return this.Jl};f.ws=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.ub&&this.ih&&gj(this.ub,this.ih)&&this.ub!=a)throw Error("Unable to set parent component");this.ub=a;bj.g.WA.call(this,a)};f.getParent=function(){return this.ub};f.WA=function(a){if(this.ub&&this.ub!=a)throw Error("Method not supported");bj.g.WA.call(this,a)};f.da=function(){return this.dc};f.C=function(){this.q=this.dc.createElement("div")};f.p=function(a){this.lj(a)};
f.lj=function(a,b){if(this.Fa)throw Error("Component already rendered");this.q||this.C();a?a.insertBefore(this.q,b||null):this.dc.Sa.body.appendChild(this.q);this.ub&&!this.ub.Fa||this.Pb()};f.cc=function(a){if(this.Fa)throw Error("Component already rendered");if(a&&this.yg(a)){this.QJ=!0;var b=lh(a);this.dc&&this.dc.Sa==b||(this.dc=jh(a));this.Of(a);this.Pb()}else throw Error("Invalid element to decorate");};f.yg=function(){return!0};f.Of=function(a){this.q=a};
f.Pb=function(){this.Fa=!0;hj(this,function(a){!a.Fa&&a.b()&&a.Pb()})};f.Id=function(){hj(this,function(a){a.Fa&&a.Id()});this.Jl&&this.Jl.vh();this.Fa=!1};f.i=function(){this.Fa&&this.Id();this.Jl&&(this.Jl.k(),delete this.Jl);hj(this,function(a){a.k()});!this.QJ&&this.q&&S(this.q);this.ub=this.Qz=this.q=this.ai=this.Vd=null;bj.g.i.call(this)};f.Rq=function(a,b){this.vx(a,ij(this),b)};
f.vx=function(a,b,c){if(a.Fa&&(c||!this.Fa))throw Error("Component already rendered");if(0>b||b>ij(this))throw Error("Child component index out of bounds");this.ai&&this.Vd||(this.ai={},this.Vd=[]);if(a.getParent()==this){var d=ej(a);this.ai[d]=a;Pb(this.Vd,a)}else yb(this.ai,ej(a),a);a.ws(this);Sb(this.Vd,b,0,a);a.Fa&&this.Fa&&a.getParent()==this?(c=this.Qb(),c.insertBefore(a.b(),c.childNodes[b]||null)):c?(this.q||this.C(),b=jj(this,b+1),a.lj(this.Qb(),b?b.q:null)):this.Fa&&!a.Fa&&a.q&&a.q.parentNode&&
1==a.q.parentNode.nodeType&&a.Pb()};f.Qb=function(){return this.q};f.Hg=function(){null==this.mj&&(this.mj=mi(this.Fa?this.q:this.dc.Sa.body));return this.mj};f.Op=function(a){if(this.Fa)throw Error("Component already rendered");this.mj=a};function ij(a){return a.Vd?a.Vd.length:0}function gj(a,b){var c;a.ai&&b?(c=a.ai,c=(b in c?c[b]:void 0)||null):c=null;return c}function jj(a,b){return a.Vd?a.Vd[b]||null:null}function hj(a,b,c){a.Vd&&A(a.Vd,b,c)}function kj(a,b){return a.Vd&&b?Fb(a.Vd,b):-1}
f.removeChild=function(a,b){if(a){var c=ka(a)?a:ej(a);a=gj(this,c);c&&a&&(xb(this.ai,c),Pb(this.Vd,a),b&&(a.Id(),a.q&&S(a.q)),a.ws(null))}if(!a)throw Error("Child is not in parent component");return a};function lj(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!nc;default:return 166>a.keyCode||183<a.keyCode}}
function mj(a,b,c,d,e){if(!(mc||oc&&vc("525")))return!0;if(hc&&e)return nj(a);if(e&&!d)return!1;ma(b)&&(b=oj(b));if(!c&&(17==b||18==b||hc&&91==b))return!1;if(oc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(mc&&d&&b==a)return!1;switch(a){case 13:return!(mc&&wc(9));case 27:return!oc}return nj(a)}
function nj(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||oc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function oj(a){if(nc)a=pj(a);else if(hc&&oc)a:switch(a){case 93:a=91;break a}return a}
function pj(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function qj(a,b){gd.call(this);this.ve=new Ii(this);this.SA(a||null);b&&(this.$p=b)}k(qj,gd);f=qj.prototype;f.q=null;f.uM=!0;f.cE=null;f.dE=null;f.Ap=!1;f.JT=!1;f.vz=-1;f.ZP=!1;f.vN=!0;f.$p="toggle_display";f.b=function(){return this.q};f.SA=function(a){if(this.Ap)throw Error("Can not change this state of the popup while showing.");this.q=a};f.YI=function(a,b){this.Qp=a;this.sp=b};f.Rb=function(){return this.ve};f.mb=function(){return this.Ap};
f.Da=function(a){this.Qp&&this.Qp.stop();this.sp&&this.sp.stop();a?this.cB():this.tp()};f.uf=ea;
f.cB=function(){if(!this.Ap&&this.dA()){if(!this.q)throw Error("Caller must call setElement before trying to show the popup");this.uf();var a=lh(this.q);this.ZP&&this.ve.I(a,"keydown",this.oR,!0);if(this.uM)if(this.ve.I(a,"mousedown",this.QH,!0),mc){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.ve.I(a,"mousedown",this.QH,!0);this.ve.I(a,"deactivate",this.PH)}else this.ve.I(a,"blur",
this.PH);"toggle_display"==this.$p?(this.q.style.visibility="visible",yi(this.q,!0)):"move_offscreen"==this.$p&&this.uf();this.Ap=!0;this.vz=ya();this.Qp?(Zc(this.Qp,"end",this.WH,!1,this),this.Qp.play()):this.WH()}};f.tp=function(a){if(!this.Ap||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.ve&&this.ve.vh();this.Ap=!1;ya();this.sp?(Zc(this.sp,"end",xa(this.xE,a),!1,this),this.sp.play()):this.xE(a);return!0};
f.xE=function(a){"toggle_display"==this.$p?this.JT?Xf(this.PG,0,this):this.PG():"move_offscreen"==this.$p&&(this.q.style.top="-10000px");this.jA(a)};f.PG=function(){this.q.style.visibility="hidden";yi(this.q,!1)};f.dA=function(){return this.dispatchEvent("beforeshow")};f.WH=function(){this.dispatchEvent("show")};f.jA=function(a){this.dispatchEvent({type:"hide",target:a})};f.QH=function(a){a=a.target;Ih(this.q,a)||rj(this,a)||this.dE&&!Ih(this.dE,a)||150>ya()-this.vz||this.tp(a)};
f.oR=function(a){27==a.keyCode&&this.tp(a.target)&&(a.preventDefault(),a.stopPropagation())};f.PH=function(a){if(this.vN){var b=lh(this.q);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||Ih(this.q,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.vz||this.tp()}};function rj(a,b){return Ib(a.cE||[],function(a){return b===a||Ih(a,b)})}f.i=function(){qj.g.i.call(this);this.ve.k();Hc(this.Qp);Hc(this.sp);delete this.q;delete this.ve;delete this.cE};function sj(a){if(a.classList)return a.classList;a=a.className;return ka(a)&&a.match(/\S+/g)||[]}function tj(a,b){return a.classList?a.classList.contains(b):Mb(sj(a),b)}function uj(a,b){a.classList?a.classList.add(b):tj(a,b)||(a.className+=0<a.className.length?" "+b:b)}function vj(a,b){if(a.classList)A(b,function(b){uj(a,b)});else{var c={};A(sj(a),function(a){c[a]=!0});A(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function wj(a,b){a.classList?a.classList.remove(b):tj(a,b)&&(a.className=Gb(sj(a),function(a){return a!=b}).join(" "))}function xj(a,b){a.classList?A(b,function(b){wj(a,b)}):a.className=Gb(sj(a),function(a){return!Mb(b,a)}).join(" ")}function yj(a,b,c){c?uj(a,b):wj(a,b)};var zj;function Aj(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Bj(a,b,c){ja(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(zj||(zj={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=zj,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Cj(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Dj(a){gd.call(this);this.q=a;a=mc?"focusout":"blur";this.FQ=C(this.q,mc?"focusin":"focus",this,!mc);this.GQ=C(this.q,a,this,!mc)}k(Dj,gd);Dj.prototype.handleEvent=function(a){var b=new Mc(a.Yd);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};Dj.prototype.i=function(){Dj.g.i.call(this);ad(this.FQ);ad(this.GQ);delete this.q};function Ej(a,b){bj.call(this,b);this.nU=!!a;this.Sr=null}k(Ej,bj);f=Ej.prototype;f.Dy=null;f.Md=!1;f.xg=null;f.He=null;f.Ai=null;f.Dx=!1;f.oa=function(){return"goog-modalpopup"};f.jp=function(){return this.xg};f.C=function(){Ej.g.C.call(this);var a=this.b(),b=La(this.oa()).split(" ");vj(a,b);Nh(a,!0);yi(a,!1);Fj(this);Gj(this)};
function Fj(a){if(a.nU&&!a.He){var b;b=a.da().C("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.He=b;a.He.className=a.oa()+"-bg";yi(a.He,!1);xi(a.He,0)}a.xg||(a.xg=a.da().C("div",a.oa()+"-bg"),yi(a.xg,!1))}function Gj(a){a.Ai||(a.Ai=a.da().createElement("span"),yi(a.Ai,!1),Nh(a.Ai,!0),a.Ai.style.position="absolute")}f.rI=function(){this.Dx=!1};f.yg=function(a){return!!a&&"DIV"==a.tagName};
f.Of=function(a){Ej.g.Of.call(this,a);a=La(this.oa()).split(" ");vj(this.b(),a);Fj(this);Gj(this);yi(this.b(),!1)};f.Pb=function(){this.He&&Ch(this.He,this.b());Ch(this.xg,this.b());Ej.g.Pb.call(this);var a=this.b();a.parentNode&&a.parentNode.insertBefore(this.Ai,a.nextSibling);this.Dy=new Dj(Vh(this.da()));this.Rb().I(this.Dy,"focusin",this.tR);Hj(this,!1)};f.Id=function(){this.mb()&&this.Da(!1);Hc(this.Dy);Ej.g.Id.call(this);S(this.He);S(this.xg);S(this.Ai)};
f.Da=function(a){a!=this.Md&&(this.Rn&&this.Rn.stop(),this.Uo&&this.Uo.stop(),this.Qn&&this.Qn.stop(),this.To&&this.To.stop(),this.Fa&&Hj(this,a),a?this.cB():this.tp())};function Hj(a,b){if(b){a.qp||(a.qp=[]);for(var c=a.da(),c=c.Hy(c.Sa.body),d=0;d<c.length;d++){var e=c[d];e==a.q||Cj(e,"hidden")||(Bj(e,"hidden",!0),a.qp.push(e))}}else if(a.qp){for(d=0;d<a.qp.length;d++)a.qp[d].removeAttribute("aria-hidden");a.qp=null}}f.YI=function(a,b,c,d){this.Rn=a;this.Qn=b;this.Uo=c;this.To=d};
f.cB=function(){if(this.dispatchEvent("beforeshow")){try{this.Sr=Vh(this.da()).activeElement}catch(a){}this.PA();this.uf();this.Rb().I(Xh(this.da()),"resize",this.PA);Ij(this,!0);this.focus();this.Md=!0;this.Rn&&this.Uo?(Zc(this.Rn,"end",this.Dv,!1,this),this.Uo.play(),this.Rn.play()):this.Dv()}};
f.tp=function(){if(this.dispatchEvent("beforehide")){this.Rb().gc(Xh(this.da()),"resize",this.PA);this.Md=!1;this.Qn&&this.To?(Zc(this.Qn,"end",this.yv,!1,this),this.To.play(),this.Qn.play()):this.yv();try{var a=Vh(this.da()).body,b=Vh(this.da()).activeElement||a;this.Sr&&b==a&&this.Sr!=a&&this.Sr.focus()}catch(c){}this.Sr=null}};function Ij(a,b){a.He&&yi(a.He,b);a.xg&&yi(a.xg,b);yi(a.b(),b);yi(a.Ai,b)}f.Dv=function(){this.dispatchEvent("show")};f.yv=function(){Ij(this,!1);this.dispatchEvent("hide")};
f.mb=function(){return this.Md};f.focus=function(){this.yF()};f.PA=function(){this.He&&yi(this.He,!1);this.xg&&yi(this.xg,!1);var a=Vh(this.da()),b=th(vh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.He&&(yi(this.He,!0),ri(this.He,c,a));this.xg&&(yi(this.xg,!0),ri(this.xg,c,a))};
f.uf=function(){var a=Vh(this.da()),b=vh(a)||window;if("fixed"==ci(this.b()))var c=a=0;else c=Yh(this.da()),a=c.x,c=c.y;var d=ui(this.b()),b=th(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);di(this.b(),a,c);di(this.Ai,a,c)};f.tR=function(a){this.Dx?this.rI():a.target==this.Ai&&Xf(this.yF,0,this)};f.yF=function(){try{mc&&Vh(this.da()).body.focus(),this.b().focus()}catch(a){}};
f.i=function(){Hc(this.Rn);this.Rn=null;Hc(this.Qn);this.Qn=null;Hc(this.Uo);this.Uo=null;Hc(this.To);this.To=null;Ej.g.i.call(this)};function Jj(a,b,c){Ej.call(this,b,c);this.of=a||"modal-dialog";this.ra=Kj(Kj(new Lj,Mj,!0),Nj,!1,!0)}k(Jj,Ej);f=Jj.prototype;f.mF=!0;f.bz=!0;f.Pz=!0;f.wu=!0;f.fu=.5;f.Ae="";f.Wd=null;f.Eb=null;f.mN=!1;f.Ve=null;f.xf=null;f.mw=null;f.cg=null;f.ci=null;f.pe=null;f.IA="dialog";f.oa=function(){return this.of};f.xh=function(a){this.Ae=a;this.xf&&Kh(this.xf,a)};f.Eg=function(){return this.Ae};f.$l=function(a){this.Wd=a=Zi(a,null);this.ci&&(this.ci.innerHTML=Yi(a))};
f.Tf=function(){return null!=this.Wd?Yi(this.Wd):""};f.Gl=function(){return this.IA};f.Qb=function(){this.b()||this.p();return this.ci};f.pG=function(){this.b()||this.p();return this.Ve};f.jp=function(){this.b()||this.p();return Jj.g.jp.call(this)};function Oj(a,b){a.fu=b;if(a.b()){var c=a.jp();c&&xi(c,a.fu)}}function Pj(a,b){b!=a.Pz&&Qj(a,b)}function Qj(a,b){a.Pz=b;if(a.Fa){var c=a.da(),d=a.jp(),e=a.He;b?(e&&c.jz(e,a.b()),c.jz(d,a.b())):(c.removeNode(e),c.removeNode(d))}a.mb()&&Hj(a,b)}
f.bw=function(a){this.wu=a;this.ts(a&&this.Fa)};f.ts=function(a){var b=La(this.of+"-title-draggable").split(" ");this.b()&&(a?vj(this.Ve,b):xj(this.Ve,b));a&&!this.Eb?(this.Eb=new Mi(this.b(),this.Ve),vj(this.Ve,b),C(this.Eb,"start",this.cw,!1,this)):!a&&this.Eb&&(this.Eb.k(),this.Eb=null)};
f.C=function(){Jj.g.C.call(this);var a=this.b(),b=this.da();this.Ve=b.C("div",this.of+"-title",this.xf=b.C("span",{className:this.of+"-title-text",id:ej(this)},this.Ae),this.cg=b.C("span",this.of+"-title-close"));Ah(a,this.Ve,this.ci=b.C("div",this.of+"-content"),this.pe=b.C("div",this.of+"-buttons"));Aj(this.xf,"heading");Aj(this.cg,"button");Nh(this.cg,!0);Bj(this.cg,"label",Rj);this.mw=this.xf.id;Aj(a,this.Gl());Bj(a,"labelledby",this.mw||"");this.Wd&&(this.ci.innerHTML=Yi(this.Wd));yi(this.cg,
this.bz);this.ra&&(a=this.ra,a.q=this.pe,a.p());yi(this.pe,!!this.ra);Oj(this,this.fu)};
f.Of=function(a){Jj.g.Of.call(this,a);a=this.b();var b=this.of+"-content";this.ci=nh(null,b,a)[0];this.ci||(this.ci=this.da().C("div",b),this.Wd&&(this.ci.innerHTML=Yi(this.Wd)),a.appendChild(this.ci));var b=this.of+"-title",c=this.of+"-title-text",d=this.of+"-title-close";(this.Ve=nh(null,b,a)[0])?(this.xf=nh(null,c,this.Ve)[0],this.cg=nh(null,d,this.Ve)[0]):(this.Ve=this.da().C("div",b),a.insertBefore(this.Ve,this.ci));this.xf?(this.Ae=Qh(this.xf),this.xf.id||(this.xf.id=ej(this))):(this.xf=wh("span",
{className:c,id:ej(this)}),this.Ve.appendChild(this.xf));this.mw=this.xf.id;Bj(a,"labelledby",this.mw||"");this.cg||(this.cg=this.da().C("span",d),this.Ve.appendChild(this.cg));yi(this.cg,this.bz);b=this.of+"-buttons";(this.pe=nh(null,b,a)[0])?(this.ra=new Lj(this.da()),this.ra.cc(this.pe)):(this.pe=this.da().C("div",b),a.appendChild(this.pe),this.ra&&(a=this.ra,a.q=this.pe,a.p()),yi(this.pe,!!this.ra));Oj(this,this.fu)};
f.Pb=function(){Jj.g.Pb.call(this);this.Rb().I(this.b(),"keydown",this.uk).I(this.b(),"keypress",this.uk);this.Rb().I(this.pe,"click",this.lR);this.ts(this.wu);this.Rb().I(this.cg,"click",this.hS);var a=this.b();Aj(a,this.Gl());""!==this.xf.id&&Bj(a,"labelledby",this.xf.id);this.Pz||Qj(this,!1)};f.Id=function(){this.mb()&&this.Da(!1);this.ts(!1);Jj.g.Id.call(this)};f.Da=function(a){a!=this.mb()&&(this.Fa||this.p(),Jj.g.Da.call(this,a))};f.Dv=function(){Jj.g.Dv.call(this);this.dispatchEvent(Sj)};
f.yv=function(){Jj.g.yv.call(this);this.dispatchEvent(Tj);this.mN&&this.k()};f.cw=function(){var a=Vh(this.da()),b=th(vh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=ui(this.b());"fixed"==ci(this.b())?Oi(this.Eb,new dh(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):Oi(this.Eb,new dh(0,0,c-d.width,a-d.height))};f.hS=function(){Uj(this)};
function Uj(a){if(a.bz){var b=a.ra,c=b&&b.Mx;c?(b=b.get(c),a.dispatchEvent(new Vj(c,b))&&a.Da(!1)):a.Da(!1)}}f.i=function(){this.pe=this.cg=null;Jj.g.i.call(this)};function Wj(a,b){a.ra=b;if(a.pe){if(a.ra){var c=a.ra;c.q=a.pe;c.p()}else a.pe.innerHTML=Yi($i);yi(a.pe,!!a.ra)}}f.lR=function(a){a:{for(a=a.target;null!=a&&a!=this.pe;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.ra.get(a);this.dispatchEvent(new Vj(a,b))&&this.Da(!1)}};
f.uk=function(a){var b=!1,c=!1,d=this.ra,e=a.target;if("keydown"==a.type)if(this.mF&&27==a.keyCode){var g=d&&d.Mx,e="SELECT"==e.tagName&&!e.disabled;g&&!e?(c=!0,b=d.get(g),b=this.dispatchEvent(new Vj(g,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.b()){this.Dx=!0;try{this.Ai.focus()}catch(l){}Xf(this.rI,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)g=e.name;else if(e==this.cg)Uj(this);else if(d){var m=d.my,q;if(q=m)a:{q=d.q.getElementsByTagName("BUTTON");for(var p=
0,t;t=q[p];p++)if(t.name==m||t.id==m){q=t;break a}q=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!q||q.disabled||e||(g=m)}g&&d&&(c=!0,b=this.dispatchEvent(new Vj(g,String(d.get(g)))))}else e==this.cg&&32==a.keyCode&&Uj(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.Da(!1)};function Vj(a,b){this.type=Xj;this.key=a;this.caption=b}k(Vj,Jc);var Xj="dialogselect",Tj="afterhide",Sj="aftershow";function Lj(a){this.dc=a||jh();pd.call(this)}var Yj;k(Lj,pd);
f=Lj.prototype;f.of="goog-buttonset";f.my=null;f.q=null;f.Mx=null;f.set=function(a,b,c,d){pd.prototype.set.call(this,a,b);c&&(this.my=a);d&&(this.Mx=a);return this};function Kj(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.p=function(){if(this.q){this.q.innerHTML=Yi($i);var a=jh(this.q);this.forEach(function(b,c){var d=a.C("button",{name:c},b);c==this.my&&(d.className=this.of+"-default");this.q.appendChild(d)},this)}};
f.cc=function(a){if(a&&1==a.nodeType){this.q=a;a=this.q.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=Qh(c)||c.value,d){var g=0==b;this.set(d,e,g,c.name==Zj);g&&uj(c,this.of+"-default")}}};f.b=function(){return this.q};f.da=function(){return this.dc};var Zj="cancel",Rj="Close",Mj={key:"ok",caption:"OK"},Nj={key:Zj,caption:"Cancel"},ak={key:"yes",caption:"Yes"},bk={key:"no",caption:"No"},ck={key:"save",caption:"Save"},dk={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Kj(new Lj,Mj,!0,!0),Kj(Kj(new Lj,Mj,!0),Nj,!1,!0),Yj=Kj(Kj(new Lj,ak,!0),bk,!1,!0),Kj(Kj(Kj(new Lj,ak),bk,!0),Nj,!1,!0),Kj(Kj(Kj(new Lj,dk),ck),Nj,!0,!0));function ek(){}h("nrg.string",ek);ek.Uq=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")};ek.dirname=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")};ek.Du=function(a){if(null!=a)return a="array"==ha(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()};ek.KN=function(a,b){return ek.Uq(a)===ek.Uq(b)};ek.sJ=function(a){return a.replace(/\W/g,"")};ek.WT=function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")};
ek.DO=function(a){return ek.sJ(a).replace(/[0-9]/g,"")};ek.jT=function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)};ek.lU=function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a};ek.Wb=function(a,b){return a.toLowerCase().replace(/\.|_/g,"-")+"-"+b.toLowerCase().replace(/\.|_/g,"-")};h("nrg.string.basename",ek.Uq);
h("nrg.string.dirname",ek.dirname);h("nrg.string.getFileExtension",ek.Du);h("nrg.string.fileNameMatch",ek.KN);h("nrg.string.stripNonAlphanumeric",ek.sJ);h("nrg.string.stripIllegal",ek.WT);h("nrg.string.getLettersOnly",ek.DO);h("nrg.string.replaceIllegal",ek.jT);h("nrg.string.truncateString",ek.lU);h("nrg.string.makeCssName",ek.Wb);function fk(a,b,c){Cc.call(this);this.Bz=a;this.xp=b||0;this.ve=c;this.HM=wa(this.oN,this)}k(fk,Cc);f=fk.prototype;f.ih=0;f.i=function(){fk.g.i.call(this);this.stop();delete this.Bz;delete this.ve};f.start=function(a){this.stop();this.ih=Xf(this.HM,ca(a)?a:this.xp)};f.stop=function(){this.cj()&&ba.clearTimeout(this.ih);this.ih=0};f.cj=function(){return 0!=this.ih};f.oN=function(){this.ih=0;this.Bz&&this.Bz.call(this.ve)};var vb={},gk=null;function hk(a){a=pa(a);delete vb[a];ub()&&gk&&gk.stop()}function ik(){gk||(gk=new fk(function(){jk()},20));var a=gk;a.cj()||a.start()}function jk(){var a=ya();w(vb,function(b){kk(b,a)});ub()||ik()};function lk(){gd.call(this);this.fa=mk;this.endTime=this.startTime=null}k(lk,gd);var mk=0;lk.prototype.tk=function(){this.te("begin")};lk.prototype.Re=function(){this.te("end")};lk.prototype.te=function(a){this.dispatchEvent(a)};function pk(a,b,c,d){lk.call(this);if(!ia(a)||!ia(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.Js=a;this.xN=b;this.duration=c;this.oD=d;this.coords=[];this.eo=!1}k(pk,lk);f=pk.prototype;f.yl=function(a){this.eo=a};f.th=0;
f.play=function(a){if(a||this.fa==mk)this.th=0,this.coords=this.Js;else if(1==this.fa)return!1;hk(this);this.startTime=a=ya();-1==this.fa&&(this.startTime-=this.duration*this.th);this.endTime=this.startTime+this.duration;this.th||this.tk();this.te("play");-1==this.fa&&this.te("resume");this.fa=1;var b=pa(this);b in vb||(vb[b]=this);ik();kk(this,a);return!0};f.stop=function(a){hk(this);this.fa=mk;a&&(this.th=1);qk(this,this.th);this.te("stop");this.Re()};
f.i=function(){this.fa==mk||this.stop(!1);this.te("destroy");pk.g.i.call(this)};f.ah=function(){this.k()};function kk(a,b){a.th=(b-a.startTime)/(a.endTime-a.startTime);1<=a.th&&(a.th=1);qk(a,a.th);1==a.th?(a.fa=mk,hk(a),a.te("finish"),a.Re()):1==a.fa&&a.bA()}function qk(a,b){na(a.oD)&&(b=a.oD(b));a.coords=Array(a.Js.length);for(var c=0;c<a.Js.length;c++)a.coords[c]=(a.xN[c]-a.Js[c])*b+a.Js[c]}f.bA=function(){this.te("animate")};f.te=function(a){this.dispatchEvent(new rk(a,this))};
function rk(a,b){Jc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.th=b.th;this.state=b.fa}k(rk,Jc);var sk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function tk(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(uk.test(c))return b.pp=vk(c),b.type="hex",b;a:{var d=a.match(wk);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.pp=xk(c),b.type="rgb",b;if(sk&&(c=sk[a.toLowerCase()]))return b.pp=c,b.type="named",b;throw Error(a+" is not a valid color string");}var yk=/#(.)(.)(.)/;
function vk(a){if(!uk.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(yk,"#$1$1$2$2$3$3"));return a.toLowerCase()}function zk(a){a=vk(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function xk(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Ak(b.toString(16));c=Ak(c.toString(16));a=Ak(a.toString(16));return"#"+b+c+a}var uk=/^#(?:[0-9a-f]{3}){1,2}$/i,wk=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Ak(a){return 1==a.length?"0"+a:a}
function Bk(a,b,c){var d=0,e=0,g=0;if(0==b)g=e=d=c;else{var l=Math.floor(a/60),m=a/60-l;a=c*(1-b);var q=c*(1-b*m);b=c*(1-b*(1-m));switch(l){case 1:d=q;e=c;g=a;break;case 2:d=a;e=c;g=b;break;case 3:d=a;e=q;g=c;break;case 4:d=b;e=a;g=c;break;case 5:d=c;e=a;g=q;break;case 6:case 0:d=c,e=b,g=a}}return[Math.floor(d),Math.floor(e),Math.floor(g)]};function Ck(a,b,c,d,e){pk.call(this,b,c,d,e);this.element=a}k(Ck,pk);f=Ck.prototype;f.o=ea;f.Hg=function(){ca(this.mj)||(this.mj=mi(this.element));return this.mj};f.bA=function(){this.o();Ck.g.bA.call(this)};f.Re=function(){this.o();Ck.g.Re.call(this)};f.tk=function(){this.o();Ck.g.tk.call(this)};function Dk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Ck.apply(this,arguments)}k(Dk,Ck);
Dk.prototype.o=function(){var a=this.eo&&this.Hg()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Ek(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Ck.apply(this,arguments)}k(Ek,Ck);Ek.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Fk(a,b,c,d,e){Ck.call(this,a,[b],[c],d,e)}k(Fk,Ck);Fk.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Gk(a,b,c,d,e){Ck.call(this,a,[b],[c],d,e)}k(Gk,Ck);Gk.prototype.o=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Hk(a,b,c,d,e){ma(b)&&(b=[b]);ma(c)&&(c=[c]);Ck.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}k(Hk,Ck);Hk.prototype.o=function(){xi(this.element,this.coords[0])};
Hk.prototype.show=function(){this.element.style.display=""};Hk.prototype.rp=function(){this.element.style.display="none"};function Ik(a,b,c){Hk.call(this,a,1,0,b,c)}k(Ik,Hk);function Jk(a,b,c){Hk.call(this,a,0,1,b,c)}k(Jk,Hk);function Kk(a,b,c){Hk.call(this,a,1,0,b,c)}k(Kk,Hk);Kk.prototype.tk=function(){this.show();Kk.g.tk.call(this)};Kk.prototype.Re=function(){this.rp();Kk.g.Re.call(this)};function Lk(a,b,c){Hk.call(this,a,0,1,b,c)}k(Lk,Hk);Lk.prototype.tk=function(){this.show();Lk.g.tk.call(this)};
function Mk(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Ck.apply(this,arguments)}k(Mk,Ck);Mk.prototype.aw=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};Mk.prototype.o=function(){this.aw()};function Nk(){lk.call(this);this.wd=[]}k(Nk,lk);Nk.prototype.add=function(a){Mb(this.wd,a)||(this.wd.push(a),C(a,"finish",this.cA,!1,this))};Nk.prototype.remove=function(a){Pb(this.wd,a)&&$c(a,"finish",this.cA,!1,this)};Nk.prototype.i=function(){A(this.wd,function(a){a.k()});this.wd.length=0;Nk.g.i.call(this)};function Ok(){Nk.call(this);this.By=0}k(Ok,Nk);
Ok.prototype.play=function(a){if(0==this.wd.length)return!1;if(a||this.fa==mk)this.By=0,this.tk();else if(1==this.fa)return!1;this.te("play");-1==this.fa&&this.te("resume");var b=-1==this.fa&&!a;this.startTime=ya();this.endTime=null;this.fa=1;A(this.wd,function(c){b&&-1!=c.fa||c.play(a)});return!0};Ok.prototype.stop=function(a){A(this.wd,function(b){b.fa==mk||b.stop(a)});this.fa=mk;this.endTime=ya();this.te("stop");this.Re()};
Ok.prototype.cA=function(){this.By++;this.By==this.wd.length&&(this.endTime=ya(),this.fa=mk,this.te("finish"),this.Re())};function Pk(){Nk.call(this);this.di=0}k(Pk,Nk);Pk.prototype.play=function(a){if(0==this.wd.length)return!1;if(a||this.fa==mk)this.di<this.wd.length&&this.wd[this.di].fa!=mk&&this.wd[this.di].stop(!1),this.di=0,this.tk();else if(1==this.fa)return!1;this.te("play");-1==this.fa&&this.te("resume");this.startTime=ya();this.endTime=null;this.fa=1;this.wd[this.di].play(a);return!0};
Pk.prototype.stop=function(a){this.fa=mk;this.endTime=ya();if(a)for(a=this.di;a<this.wd.length;++a){var b=this.wd[a];b.fa==mk&&b.play();b.fa==mk||b.stop(!0)}else this.di<this.wd.length&&this.wd[this.di].stop(!1);this.te("stop");this.Re()};Pk.prototype.cA=function(){1==this.fa&&(this.di++,this.di<this.wd.length?this.wd[this.di].play():(this.endTime=ya(),this.fa=mk,this.te("finish"),this.Re()))};function Qk(){}h("nrg.convert",Qk);Qk.HS=function(a){if(!ma(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"};Qk.dI=function(a){if(!ia(a)&&!ma(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}};
Qk.mI=function(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}};Qk.Zp=function(a){if(!ka(a)&&!ma(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)};
Qk.Gk=function(a){if(!ka(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");A(a,function(a,d){b[d]=parseFloat(a,10)});return b};Qk.hR=function(a){if(!oa(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b};Qk.nT=function(a){if(!ka(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a};
Qk.oM=function(a,b){if(!ia(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;A(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"};Qk.tF=function(a){var b={};w(a,function(a,d){isNaN(a)?ka(a)&&(b[d]=a):b[d]=a});return b};Qk.uF=function(a){var b={};w(a,function(a,d){ka(a)?0<a.length&&(b[d]=a):b[d]=a});return b};h("nrg.convert.pct",Qk.HS);h("nrg.convert.px",Qk.dI);h("nrg.convert.remap1D",Qk.mI);h("nrg.convert.toInt",Qk.Zp);
h("nrg.convert.toFloatArray",Qk.Gk);h("nrg.convert.objectToArray",Qk.hR);h("nrg.convert.rgbToArray",Qk.nT);h("nrg.convert.arrayToRgb",Qk.oM);h("nrg.convert.filterNaN",Qk.tF);h("nrg.convert.filterZeroLengthStrings",Qk.uF);function Rk(){}h("nrg.style",Rk);Rk.SE="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
Rk.cT=function(a,b){var c=Ug(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)Wg(a,d[e])};Rk.$t=function(a){return a.getBoundingClientRect()};
Rk.oy=function(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return Qk.Zp(a.style[b]);var d=ni(a,a.parentNode),d={left:Qk.Zp(a.style.left)||d.x,top:Qk.Zp(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?ni(a,a.parentNode):
ni(a,document.body),d={left:Qk.Zp(a.style.left)||d.x,top:Qk.Zp(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c};Rk.iP=function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}};
Rk.getComputedStyle=function(a,b){if(b&&ka(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=Rk.SE);for(var c={},d=window.getComputedStyle(a,null),e=0,g=b.length,e=0;e<g;e++)c[b[e]]=d.getPropertyValue(b[e]);return Rk.$H(c)};
Rk.$H=function(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a};Rk.zb=function(a,b){a&&b&&(a.style||(a.style={}),Zh(a,b),A("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Ga(b[c],"%")&&(a.style[c]=Qk.dI(b[c]))}))};Rk.Ew="is_hovered_"+r();
Rk.dm=function(a,b,c,d,e,g){function l(){a[Rk.Ew]=!1;Wg(a,b);null!=g&&g()}function m(){a[Rk.Ew]=!0;R(a,b);null!=e&&e()}C(a,"mouseover",m);C(a,"mouseout",l);c&&(c=void 0!==d?c.bind(d):c,c(m,l))};Rk.cY=function(a,b,c,d){var e=wh("div",{id:"tempEndStateElt"+Fa.mY()});a.parentNode.appendChild(e);e.className=b;c&&c(a,e);b=Rk.getComputedStyle(a,d);d=Rk.getComputedStyle(e,d);a.parentNode.removeChild(e);delete e;return{start:b,end:d}};
Rk.XO=function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}};h("nrg.style.cssProperties",Rk.SE);h("nrg.style.removeClassesThatContain",Rk.cT);h("nrg.style.absolutePosition",Rk.$t);h("nrg.style.dims",Rk.oy);h("nrg.style.getStyleSheet",Rk.iP);h("nrg.style.getComputedStyle",Rk.getComputedStyle);h("nrg.style.parseIntNumericalProperties",Rk.$H);h("nrg.style.setStyle",Rk.zb);h("nrg.style.IS_HOVERED",Rk.Ew);
h("nrg.style.setHoverClass",Rk.dm);h("nrg.style.getPositionRelativeToAncestor",Rk.XO);function Sk(a){return 1-Math.pow(1-a,3)};function T(){}h("nrg.fx",T);T.nr=function(a,b,c){void 0===b&&(b=500);T.Cg(a,b,1,c)};T.or=function(a,b,c){void 0===b&&(b=500);T.Cg(a,0,0,function(){T.Cg(a,b,1,c)})};T.un=function(a,b,c){void 0===b&&(b=500);T.Cg(a,b,0,c)};T.GN=function(a,b,c){void 0===b&&(b=500);T.Cg(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})};
T.Cg=function(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var g=new Hk(a,e,c,b);d&&g.addEventListener("end",function(a){d(a);bd(g);delete g});g.play()};T.animGenStyles="left top width height opacity background-color color z-index".split(" ");
T.DF=function(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Dk(a,[b.left,b.top],[c.left,c.top],d,Sk)};T.CF=function(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Ek(a,[b.width,b.height],[c.width,c.height],d,Sk)};
T.Gy=function(a,b,c,d){if("opacity"in b||"opacity"in c)if(A([b,c],function(a){"opacity"in a||(a.opacity=1);ma(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Hk(a,b.opacity,c.opacity,d)};T.BF=function(a,b,c,d){if("visibility"in b||"visibility"in c)if(A([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new Lk(a,d):new Kk(a,d)};
T.AF=function(a,b,c,d){if("background-color"in b||"background-color"in c){A([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=tk(b["background-color"]),g=tk(c["background-color"]);if(e.pp!==g.pp)return new Mk(a,zk(e),zk(g),d,Sk)}catch(l){window.console.log("Skipping color transition anim: ",l.message)}}};T.LC=function(a,b){this.sM=a;this.hU=b};T.Ay=function(a){return Qk.uF(Qk.tF(a))};
T.Wy=function(a){var b=ui(a),c=fi(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}};T.FF=function(a,b){var c=T.Wy(a),c=T.Ay(c),d=T.Wy(b),e=T.Ay(d);w(c,function(a,b){null!=e[b]||(e[b]=a)});return new T.LC(c,e)};
T.EF=function(a,b,c,d){var e=[];A(T.animGenStyles,function(g){if(null!=b&&null!=c)switch(g){case "left":e.push(T.DF(a,b,c,d));break;case "height":e.push(T.CF(a,b,c,d));break;case "opacity":e.push(T.Gy(a,b,c,d));break;case "visibility":e.push(T.BF(a,b,c,d));break;case "background-color":e.push(T.AF(a,b,c,d))}});var g=[];A(e,function(a){null!=a&&g.push(a)});delete e;return g};
T.DA=function(a,b,c,d){var e=new Ok;A(a,function(a){c&&C(a,"animate",c);e.add(a)});b&&C(e,"begin",b);C(e,"end",function(){d&&d();e.k();e=null;delete e});e.play()};T.vT=function(a,b,c,d){var e=new Pk;A(a,function(a){c&&C(a,"animate",c);e.add(a)});b&&C(e,"begin",b);C(e,"end",function(){d&&d();e.k();e=null;delete e});e.play()};T.yI=function(a,b,c){function d(){Rk.zb(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;C(a,"mouseover",function(){Rk.zb(a,{opacity:b})});C(a,"mouseout",d);d()};
h("nrg.fx.fadeIn",T.nr);h("nrg.fx.fadeInFromZero",T.or);h("nrg.fx.fadeOut",T.un);h("nrg.fx.fadeOutAndRemove",T.GN);h("nrg.fx.fadeTo",T.Cg);h("nrg.fx.animGenStyles",T.animGenStyles);h("nrg.fx.generateAnim_Slide",T.DF);h("nrg.fx.generateAnim_Resize",T.CF);h("nrg.fx.generateAnim_Fade",T.Gy);h("nrg.fx.generateAnim_RemoveAddFade",T.BF);h("nrg.fx.generateAnim_BgColorTrans",T.AF);h("nrg.fx.TransitionDims",T.LC);h("nrg.fx.filterTransitionStyles",T.Ay);h("nrg.fx.getTransitionStyles",T.Wy);
h("nrg.fx.generateTransitionDims",T.FF);h("nrg.fx.generateAnimations",T.EF);h("nrg.fx.parallelAnimate",T.DA);h("nrg.fx.serialAnimate",T.vT);h("nrg.fx.setBasicHoverStates",T.yI);function Tk(a){return a.slice(a.lastIndexOf("/")+1)}function Uk(a){a=Tk(a).replace(/\.+/g,".");var b=a.lastIndexOf(".");return 0>=b?"":a.substr(b+1)}function Vk(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Ga(b,"/")?b+d:b+("/"+d);return b};function Wk(){}h("nrg.dom",Wk);Wk.CE=function(a,b,c){if(!ia(a))throw new TypeError("Array expected!",a);if(b&&!ka(b))throw new TypeError("String expected!",b);if(c&&!ka(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",g=0,g=0;for(len=a.length;g<len;g++)e=a[g],d[e]=Wk.BE(e,{src:b?Vk(b,db(e)+"."+c):""});return d};Wk.FE=function(a,b){var c=wh("img",{src:b});c.style.HX="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";Ah(a,c);c.onclick=c.parentNode.onclick};
Wk.BE=function(a,b,c,d){if(!ka(a))throw new TypeError("String expected!");if(b&&!oa(b))throw new TypeError("Object expected!");if(null!=c&&!ma(c))throw new TypeError("Number expected!");if(null!=d&&!ma(d))throw new TypeError("Number expected!");a=Wk.ey("div",a,b?b:{});b&&b.src&&Wk.FE(a,b.src);T.yI(a,void 0===c?1:c,void 0===d?.5:d);return a};
Wk.ey=function(a,b,c){if(!ka(a))throw new TypeError("String expected!",a);if(!ka(b))throw new TypeError("String expected!",b);if(c&&!oa(c))throw new TypeError("Object expected!");c=c&&oa(c)?c:{};c.id=c.id?c.id:b+"_"+r();c["class"]=c["class"]?c["class"]:db(b.replace(/\./g,"-").toLowerCase());return wh(a,c)};Wk.stopPropagation=function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()};
Wk.IM=function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Wk.fZ(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";};Wk.TS=function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b};h("nrg.dom.createBasicHoverButtonSet",Wk.CE);h("nrg.dom.createDivChildImage",Wk.FE);h("nrg.dom.createBasicHoverButton",Wk.BE);
h("nrg.dom.createUniqueDom",Wk.ey);h("nrg.dom.stopPropagation",Wk.stopPropagation);h("nrg.dom.checkForExtraneousArgs",Wk.IM);h("nrg.dom.readCSS",Wk.TS);U.S=function(a){bj.call(this,a);this.FB();this.q=Wk.ey("div",this.constructor.ID_PREFIX,a);this.ou();Xk(this)};k(U.S,bj);h("nrg.ui.Component",U.S);f=U.S.prototype;
f.FB=function(){if(this instanceof U.S){this.constructor.g&&this.constructor.g instanceof U.S&&U.S.prototype.FB.bind(this.constructor.g)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.jo)||(this.constructor.jo=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-"),this.constructor.gd=this.constructor.jo)}};
f.ou=function(){if(null!=this.constructor.g)for(var a=this.constructor.g;null!=a.constructor.ID_PREFIX;)U.S.prototype.ou.bind(a)(),a=a.constructor.g;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=zb(this.constructor.CSS_SUFFIX),w(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=ek.Wb(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Xk(a){for(var b=[],c=a;c instanceof U.S;)Ob(b,a.constructor.gd),c=c.constructor.g;A(b,function(a){null!=c.b()&&R(c.b(),a)})}f.Pl="";f.FI=function(a){this.Pl=a};f.wO=function(){return this.Pl};f.eM=function(a){null==this.Ls&&(this.Ls=[]);this.Ls.push(a)};
f.Tj=function(){if(null==this.Ha)this.Ha=ui(this.b());else if(this.Ha.height!==this.F.height||this.Ha.width!==this.F.width)this.Ha=this.F;if(null==this.ks)this.ks=fi(this.b());else if(this.ks.x!==this.pu.x||this.ks.y!==this.pu.y)this.ks=this.pu;this.F=ui(this.b());this.pu=fi(this.b())};f.o=function(){this.Tj()};f.p=function(a){this.Fa&&this.b().parentNode!==a&&null!=a?a.appendChild(this.b()):U.S.g.p.call(this,a)};f.hF=!1;f.lN=function(){return this.hF};
f.i=function(){U.S.g.i.call(this);null!=this.Ls&&(A(this.Ls,function(a){bd(a);a.k()}),Nb(this.Ls));bd(this);bd(this.b());S(this.b());this.ks=this.Ha=this.pu=this.F=this.Pl=null;this.hF=!0};h("nrg.ui.Component.animationLengths",{aV:150,xV:300,hW:600});h("nrg.ui.Component.prototype.validateIdPrefix",U.S.prototype.FB);h("nrg.ui.Component.prototype.imagePrefix",U.S.prototype.Pl);h("nrg.ui.Component.prototype.createCssMap",U.S.prototype.ou);h("nrg.ui.Component.prototype.setImagePrefix",U.S.prototype.FI);
h("nrg.ui.Component.prototype.getImagePrefix",U.S.prototype.wO);h("nrg.ui.Component.prototype.addSubComponent",U.S.prototype.eM);h("nrg.ui.Component.prototype.calcDims",U.S.prototype.Tj);h("nrg.ui.Component.prototype.updateStyle",U.S.prototype.o);h("nrg.ui.Component.prototype.render",U.S.prototype.p);h("nrg.ui.Component.prototype.disposeInternalCalled",U.S.prototype.lN);h("nrg.ui.Component.prototype.disposeInternal",U.S.prototype.i);U.xa=function(){Jj.call(this);this.mF=!1};k(U.xa,Jj);h("nrg.ui.Dialog",U.xa);U.xa.ID_PREFIX="nrg.ui.Dialog";U.xa.CSS={yC:"nrg-ui-dialog-overlay",gt:"nrg-ui-dialog-background",Nk:"nrg-ui-dialog-closebutton",eK:"nrg-ui-dialog-closebutton-image",so:"nrg-ui-dialog-text",Ra:"nrg-ui-dialog-title",Cj:"nrg-ui-dialog-content",aK:"nrg-ui-dialog-buttons"};f=U.xa.prototype;
f.OI=function(a){this.Yp.style.visibility="hidden";this.Je.style.visibility="hidden";null!=a&&Rk.dm(this.b(),a,null,null,function(){this.Yp.style.visibility="visible";this.Je.style.visibility="visible"}.bind(this),function(){this.Yp.style.visibility="hidden";this.Je.style.visibility="hidden"}.bind(this))};f.wx=function(a){R(this.Yp,a)};f.wD=function(a){R(this.Wd,a)};f.sD=function(a){R(this.Je.parentNode,a)};f.tD=function(a){R(this.Je,a)};f.uD=function(a){R(this.lu,a)};f.bM=function(a){R(this.Jx,a)};
function Yk(a){a.lu=ph("modal-dialog-title-close",a.b())[0];R(a.lu,U.xa.CSS.Nk);a.Je=wh("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+r(),"class":U.xa.CSS.eK});a.Je.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.lu.appendChild(a.Je);C(a.Je,"click",function(a){this.Da(!this.mb());this.dispatchEvent({type:"c"});a.stopPropagation()}.bind(a))}f.mM=function(){var a=this.b(),b=Jk(a,600),c=Ik(a,600),d=Jk(a,600),a=Ik(a,600);this.YI(b,c,d,a)};
f.Yz=function(a,b){var c=this.b();"left"==a&&(c.style.left="0px");"top"==b&&(c.style.top="0px")};f.Ri=function(){var a=this.b(),b=ui(this.b().parentNode);if(null!=this.jp()){var c=this.jp();0==c.opacity?S(c):Rk.zb(c,{width:b.width,height:b.height,"z-index":199})}var c=ui(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);di(a,d,e)};f.wu=!0;f.Eb=null;f.bw=function(a){this.wu=a;this.ts(a&&this.Fa)};
f.ts=function(a){var b=La(this.oa()+"-title-draggable").split(" "),c=this.pG();this.b()&&(a?vj(c,b):xj(c,b));a&&!this.Eb?(this.Eb=new Mi(this.b(),this.Ve),vj(c,b),C(this.Eb,"start",this.cw,!1,this)):!a&&this.Eb&&(this.Eb.k(),this.Eb=null)};f.JJ=function(){this.cw()};
f.cw=function(){var a=Vh(this.da()),b=vh(a)||window,a=ui(this.b().parentNode),b=th(b||window),c=ui(this.b());"fixed"==ci(this.b())?Oi(this.Eb,new dh(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):Oi(this.Eb,new dh(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))};f.au=function(a){var b=wh("img",{id:this.constructor.ID_PREFIX+"_Image_"+r(),"class":U.xa.CSS.lt});null==this.Gr&&(this.Gr=[]);this.Gr.push(b);this.Gv.appendChild(b);null!=a&&(b.src=a);return b};
f.il=function(a){var b=wh("div",{id:this.constructor.ID_PREFIX+"_Text_"+r(),"class":U.xa.CSS.so},a);null==this.rj&&(this.rj=[]);this.rj.push(b);b.innerHTML=a||"";this.$l(a);return b};f.QO=function(){return this.b()};
f.p=function(a){U.xa.g.p.call(this,a);R(this.b(),"nrg-ui-dialog");this.Yp=ph("modal-dialog-title",this.b())[0];this.Wd=ph("modal-dialog-content",this.b())[0];this.Jx=ph("modal-dialog-buttons",this.b())[0];this.Je=null;Yk(this);R(this.Jx,U.xa.CSS.aK);R(this.Yp,U.xa.CSS.Ra);R(this.Wd,U.xa.CSS.Cj);U.xa.g.bw.call(this,!1);this.bw(!0)};f.Da=function(a){U.xa.g.Da.call(this,a)};f.nP=function(){return this.rj};
f.i=function(){U.xa.g.i.call(this);delete this.Jx;delete this.Yp;delete this.Wd;delete this.Je;delete this.lu;null!=this.Gv&&(S(this.Gv),delete this.Gv);null!=this.rj&&(A(this.rj,function(a){S(a);delete a}),delete this.rj);null!=this.Gr&&(A(this.Gr,function(a){S(a);delete a}),delete this.Gr)};h("nrg.ui.Dialog.ID_PREFIX",U.xa.ID_PREFIX);h("nrg.ui.Dialog.EventType",{IV:"a",CLOSED:"b",OU:"c"});h("nrg.ui.Dialog.prototype.setMouseoverClass",U.xa.prototype.OI);
h("nrg.ui.Dialog.prototype.addTitleClass",U.xa.prototype.wx);h("nrg.ui.Dialog.prototype.addContentClass",U.xa.prototype.wD);h("nrg.ui.Dialog.prototype.addCloseButtonClass",U.xa.prototype.sD);h("nrg.ui.Dialog.prototype.addCloseButtonImageClass",U.xa.prototype.tD);h("nrg.ui.Dialog.prototype.addCloseSpanClass",U.xa.prototype.uD);h("nrg.ui.Dialog.prototype.addButtonsClass",U.xa.prototype.bM);h("nrg.ui.Dialog.prototype.applyFadeTransitions",U.xa.prototype.mM);h("nrg.ui.Dialog.prototype.moveToCorner",U.xa.prototype.Yz);
h("nrg.ui.Dialog.prototype.center",U.xa.prototype.Ri);h("nrg.ui.Dialog.prototype.setDraggable",U.xa.prototype.bw);h("nrg.ui.Dialog.prototype.updateLimits",U.xa.prototype.JJ);h("nrg.ui.Dialog.prototype.addImage",U.xa.prototype.au);h("nrg.ui.Dialog.prototype.addText",U.xa.prototype.il);h("nrg.ui.Dialog.prototype.getOverlay",U.xa.prototype.QO);h("nrg.ui.Dialog.prototype.render",U.xa.prototype.p);h("nrg.ui.Dialog.prototype.setVisible",U.xa.prototype.Da);h("nrg.ui.Dialog.prototype.getTextElements",U.xa.prototype.nP);
h("nrg.ui.Dialog.prototype.disposeInternal",U.xa.prototype.i);U.Bd=function(){U.xa.call(this);R(this.Gv,U.Bd.CSS.yC)};k(U.Bd,U.xa);h("nrg.ui.ErrorOverlay",U.Bd);U.Bd.ID_PREFIX="nrg.ui.ErrorOverlay";U.Bd.CSS={yC:"nrg-ui-infooverlay-overlay",so:"nrg-ui-infooverlay-text"};U.Bd.prototype.il=function(a){U.Bd.g.il.call(this,a);a=this.rj;R(a[a.length-1],U.Bd.CSS.so)};U.Bd.prototype.i=function(){U.Bd.g.i.call(this)};h("nrg.ui.ErrorOverlay.ID_PREFIX",U.Bd.ID_PREFIX);h("nrg.ui.ErrorOverlay.prototype.addText",U.Bd.prototype.il);
h("nrg.ui.ErrorOverlay.prototype.disposeInternal",U.Bd.prototype.i);function Zk(a,b,c,d,e){function g(a){a&&(a.tabIndex=0,Aj(a,l.ii()),uj(a,"goog-zippy-header"),$k(l,a),a&&l.dH.I(a,"keydown",l.xv))}gd.call(this);this.dc=e||jh();this.pn=this.dc.b(a)||null;this.yu=this.dc.b(d||null);this.sd=(this.yz=na(b)?b:null)||!b?null:this.dc.b(b);this.Al=!0==c;this.dH=new Ii(this);this.Rz=new Ii(this);var l=this;g(this.pn);g(this.yu);this.bd(this.Al)}k(Zk,gd);var al={JB:"action",JC:"toggle"};f=Zk.prototype;f.Cn=!0;f.i=function(){Zk.g.i.call(this);Hc(this.dH);Hc(this.Rz)};
f.ii=function(){return"tab"};f.Qb=function(){return this.sd};f.toggle=function(){this.bd(!this.Al)};f.bd=function(a){this.sd?yi(this.sd,a):a&&this.yz&&(this.sd=this.yz());this.sd&&uj(this.sd,"goog-zippy-content");this.yu?(yi(this.pn,!a),yi(this.yu,a)):bl(this,a);this.Al=a;this.dispatchEvent(new cl(al.JC,this))};function bl(a,b){a.pn&&(yj(a.pn,"goog-zippy-expanded",b),yj(a.pn,"goog-zippy-collapsed",!b),Bj(a.pn,"expanded",b))}
f.vs=function(a){this.Cn!=a&&((this.Cn=a)?($k(this,this.pn),$k(this,this.yu)):this.Rz.vh())};function $k(a,b){b&&a.Rz.I(b,"click",a.wv)}f.xv=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Jc(al.JB,this)),a.preventDefault(),a.stopPropagation()};f.wv=function(){this.toggle();this.dispatchEvent(new Jc(al.JB,this))};function cl(a,b){Jc.call(this,a,b)}k(cl,Jc);function dl(a,b,c,d){d=d||jh();var e=d.C("div",{style:"overflow:hidden"});b=d.b(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.zu=e;this.Vh=null;Zk.call(this,a,b,c,void 0,d);a=this.Al;this.zu.style.display=a?"":"none";bl(this,a)}k(dl,Zk);f=dl.prototype;f.eu=500;f.lM=Sk;
f.bd=function(a){if(this.Al!=a||this.Vh){"none"==this.zu.style.display&&(this.zu.style.display="");var b=this.Qb().offsetHeight,c=0;this.Vh?(a=this.Al,bd(this.Vh),this.Vh.stop(!1),c=parseInt(this.Qb().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;bl(this,a);this.Vh=new pk([0,c],[0,a?b:0],this.eu,this.lM);C(this.Vh,["begin","animate","end"],this.jR,!1,this);C(this.Vh,"end",wa(this.kR,this,a));this.Vh.play(!1)}};f.jR=function(a){var b=this.Qb();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.kR=function(a){a&&(this.Qb().style.marginTop="0");bd(this.Vh);this.Al=a;this.Vh=null;a||(this.zu.style.display="none");this.dispatchEvent(new cl(al.JC,this))};function U(){}h("nrg.ui",U);U.gF=function(a){null!=a&&(a=ia(a)?a:[a],A(a,function(a){bd(a);a.k()}),Nb(a))};U.py=function(a){null!=a&&(bd(a),a.k())};U.qy=function(a){w(a,function(b,c){bd(b);S(b);delete a[c]});wb(a)};U.tu=function(a){w(a,function(b,c){bd(b);b.k();delete a[c]});wb(a)};U.ib=function(a,b,c,d){U.S.call(this);this.Ae=a;this.Lc=U.ib.YM(a);this.Lc[U.ib.rt]=a.toLowerCase();null!=d?d(b,this.Lc):b.appendChild(this.Lc);this.ez=U.ib.XM(a);this.Lc.appendChild(this.ez);this.ck=U.ib.WM(a);this.Lc.appendChild(this.ck);this.Xo=U.ib.VM(a);b.appendChild(this.Xo);this.Hf=new this.DU(this.Lc,this.Xo,null!=c?c:!1);this.UT=pa(this);this.Af={};C(this.Lc,"mouseover",this.zS.bind(this));C(this.Lc,"mouseout",this.yS.bind(this));el(this)};k(U.ib,U.S);h("nrg.ui.ZippyNode",U.ib);
U.ib.ID_PREFIX="nrg.ui.ZippyNode";var fl={};U.ib.CSS_SUFFIX={jt:"header",jC:"header-mouseover",rK:"header-label",oK:"expandicon",XB:"expandicon-mouseover",Cj:"content",Cj:"content-sub"};U.ib.XM=function(a){var b=wh("div",{id:"ZippyHeaderLabel_"+a+"_"+r(),"class":U.ib.CSS.rK}),c=a.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<a?Ya(a,105):c.length==a.length?Ya(a,45):a;return b};U.ib.WM=function(a){return wh("div",{id:"ZippyExpandIcon_"+a+"_"+r(),"class":U.ib.CSS.oK},"+")};
U.ib.VM=function(a){return wh("div",{id:"ZippyContent_"+a+"_"+r(),"class":U.ib.CSS.Cj})};U.ib.YM=function(a){return wh("div",{id:"ZippyHeader_"+a+"_"+r(),"class":U.ib.CSS.jt})};U.ib.rt=r();f=U.ib.prototype;f.DU=dl;f.Eg=function(){return this.Ae};f.bd=function(a){this.Hf.bd(a)};function el(a){C(a.Hf,qb(al),function(a){null!=this.Hf.Vh?this.dispatchEvent({type:"f"}):a.target.Al?this.zA():(this.ck.innerHTML="+",Rk.zb(this.ck,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"e"}))}.bind(a))}
f.zA=function(){this.ck.innerHTML="-";Rk.zb(this.ck,{"margin-left":"-1em"});this.dispatchEvent({type:"d"})};f.zS=function(){R(this.Lc,U.ib.CSS.jC);R(this.ck,U.ib.CSS.XB)};f.yS=function(){Wg(this.Lc,U.ib.CSS.jC);Wg(this.ck,U.ib.CSS.XB)};f.i=function(){U.ib.g.i.call(this);S(this.ez);delete this.ez;S(this.ck);delete this.ck;bd(this.Lc);S(this.Lc);delete this.Lc;S(this.Xo);delete this.Xo;null!=this.Hf&&(this.Hf.k(),bd(this.Hf),delete this.Hf);U.tu(this.Af);delete this.Af;delete this.UT;delete this.Ae};function gl(){gd.call(this);this.Nr=[];this.pB=[];this.rs=[]}k(gl,gd);f=gl.prototype;f.av=!1;f.bv=!1;f.Rl=!1;f.bH=function(){return this.Rl};f.SI=function(a){this.Tv=a};f.Ta=function(){if(!this.Rl){for(var a,b=0;a=this.Nr[b];b++)hl(this,a);this.Rl=!0}};function hl(a,b){a.av&&(C(b.element,"mousedown",b.qi,!1,b),a.fB&&uj(b.element,a.fB));a.bv&&a.oB&&uj(b.element,a.oB)}
function il(a){for(var b,c=0;b=a.Nr[c];c++){var d=a;d.av&&($c(b.element,"mousedown",b.qi,!1,b),d.fB&&wj(b.element,d.fB));d.bv&&d.oB&&wj(b.element,d.oB);b.k()}a.Nr.length=0}
f.Is=function(a,b){if(!this.bh)if(this.bh=b,!1==this.dispatchEvent(new jl("dragstart",0,this.bh)))this.bh=null;else{var c=b.rl;this.nn=this.by(c);var d=lh(c);d.body.appendChild(this.nn);var e=this.nn,g=li(c),c=Ei(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.Eb=new Mi(e);this.Eb.SI(this.Tv);C(this.Eb,"drag",this.DH,!1,this);C(this.Eb,"end",this.zl,!1,this);C(d.body,"selectstart",this.tJ);this.Vp=[];for(e=0;d=this.pB[e];e++)for(var l,
g=0;l=d.Nr[g];g++)for(var c=d,m=[l.element],q=this.Vp,p=0;p<m.length;p++){var t=m[p],s,u=t;s=li(u);u=ui(u);s=new ah(s.y,s.x+u.width,s.y+u.height,s.x);q.push(new kl(s,c,l,t));ll(this,s)}this.Ek||(this.Ek=new ah(0,0,0,0));for(e=0;d=this.rs[e];e++)d.Yx=[],d.vI=d.q.scrollLeft,d.wI=d.q.scrollTop,g=li(d.q),c=ui(d.q),d.Gd=new ah(g.y,g.x+c.width,g.y+c.height,g.x);for(e=0;c=this.Vp[e];e++)for(g=0;d=this.rs[g];g++)Ih(d.q,c.q)&&(d.Yx.push(c),c.qs=d);this.Xm=null;for(e=0;d=this.rs[e];e++)C(d.q,"scroll",this.vE,
!1,this);this.Eb.Is(a);a.preventDefault()}};
f.zl=function(a){var b=a.sN?null:this.Xm;if(b&&b.$n){var c=a.clientX;a=a.clientY;var d=Yh(jh(this.nn)),e=c+d.x,d=a+d.y,g;this.Ms&&(g=this.Ms(b.mk,b.Gd,e,d));this.dispatchEvent(new jl("drag",0,this.bh,0,b.mk,0,c,a));b.$n.dispatchEvent(new jl("drop",0,this.bh,0,b.mk,0,c,a,0,0,g))}this.dispatchEvent(new jl("dragend",0,this.bh));$c(this.Eb,"drag",this.DH,!1,this);$c(this.Eb,"end",this.zl,!1,this);$c(lh(this.bh.rl).body,"selectstart",this.tJ);for(b=0;c=this.rs[b];b++)$c(c.q,"scroll",this.vE,!1,this),c.Yx=
[];this.Eb.k();S(this.nn);delete this.bh;delete this.nn;delete this.Eb;delete this.Vp;delete this.Xm};
f.DH=function(a){var b,c=Yh(jh(this.nn));b=new Zg(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Xm,g;if(e){this.Ms&&e.$n&&(g=this.Ms(e.mk,e.Gd,c,d));if(e.Gd.contains(b)&&g==this.pD)return;e.$n&&(this.dispatchEvent(new jl("dragout",0,this.bh,0,e.mk)),e.$n.dispatchEvent(new jl("dragout",0,this.bh,0,e.mk,0,void 0,void 0,0,0,this.pD)));this.pD=g;this.Xm=null}if(this.Ek.contains(b)){a:{for(var l=0;e=this.Vp[l];l++)if(e.Gd.contains(b))if(e.qs){if(e.qs.Gd.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.Xm=b)&&e.$n)this.Ms&&(g=this.Ms(e.mk,e.Gd,c,d)),c=new jl("dragover",0,this.bh,0,e.mk),c.YT=g,this.dispatchEvent(c),e.$n.dispatchEvent(new jl("dragover",0,this.bh,0,e.mk,0,a.clientX,a.clientY,0,0,g));else if(!e){this.Ag||(this.Ag=new kl(this.Ek.clone()));a=this.Ag.Gd;a.top=this.Ek.top;a.right=this.Ek.right;a.bottom=this.Ek.bottom;a.left=this.Ek.left;for(g=0;e=this.Vp[g];g++)b=e.Gd,e.qs&&(e=e.qs.Gd,b=new ah(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),l=null,d>=b.bottom?l=b.bottom>a.top?b.bottom:a.top:d<b.top&&(l=b.top<a.bottom?b.top:a.bottom),null===e||null===l||(Math.abs(e-c)>Math.abs(l-d)?l=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==l&&(l<=d?a.top=l:a.bottom=l);this.Xm=10<=(a.right-a.left)*(a.bottom-a.top)?this.Ag:null}}};f.tJ=function(){return!1};
f.vE=function(a){for(var b=0,c;c=this.rs[b];b++)if(a.target==c.q){var d=c.wI-c.q.scrollTop,e=c.vI-c.q.scrollLeft;c.wI=c.q.scrollTop;c.vI=c.q.scrollLeft;this.Ag&&this.Xm==this.Ag&&(0<d?this.Ag.Gd.top+=d:this.Ag.Gd.bottom+=d,0<e?this.Ag.Gd.left+=e:this.Ag.Gd.right+=e);for(var g=0,l;l=c.Yx[g];g++)l=l.Gd,l.top+=d,l.left+=e,l.bottom+=d,l.right+=e,ll(this,l)}this.Eb.Jp(a)};
f.by=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=wh("table",null,wh("tbody",null,b));break a;case "td":case "th":a=wh("table",null,wh("tbody",null,wh("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.tN&&uj(a,this.tN);return a};f.RF=function(){return this.Eb};
function ll(a,b){if(1==a.Vp.length)a.Ek=new ah(b.top,b.right,b.bottom,b.left);else{var c=a.Ek;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.i=function(){gl.g.i.call(this);il(this)};function jl(a,b,c,d,e,g,l,m,q,p,t){Jc.call(this,a);this.vu=c;this.cp=e;this.clientX=l;this.clientY=m;this.YT=t}k(jl,Jc);jl.prototype.i=function(){};
function ml(a,b){gd.call(this);this.element=mh(a);this.data=b;this.ub=null;this.Hd=new Ii(this);Gc(this,xa(Hc,this.Hd));if(!this.element)throw Error("Invalid argument");}k(ml,gd);f=ml.prototype;f.rl=null;f.qi=function(a){if(Oc(a)){var b=a.target;b&&(this.Hd.I(b,"mousemove",this.CH,!1).I(b,"mouseout",this.CH,!1),this.Hd.I(lh(b),"mouseup",this.WQ,!0),this.rl=b,this.iB=new Zg(a.clientX,a.clientY),a.preventDefault())}};f.ws=function(a){this.ub=a};
f.CH=function(a){var b=this.rl,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.iB.x)+Math.abs(a.clientY-this.iB.y)||b)this.Hd.vh(),this.ub.Is(a,this)};f.WQ=function(){this.Hd.vh();delete this.iB;this.rl=null};function kl(a,b,c,d){this.Gd=a;this.$n=b;this.mk=c;this.q=d}kl.prototype.qs=null;function nl(a,b){this.type=a;this.currentTarget=this.target=b||null}f=nl.prototype;f.ti=!1;f.defaultPrevented=!1;f.ns=!0;f.stopPropagation=function(){this.ti=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.ns=!1};
function ol(a){a=new nl("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=oi(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.ns=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.ti;d--){var e=b[d],g=a.type,l=new Mc(a,b[d]);ib(e)?hd(e,g,!0,l):dd(e,g,!0,l)}for(d=0;d<b.length&&!a.ti;d++)e=b[d],g=a.type,l=new Mc(a,b[d]),ib(e)?hd(e,g,!1,l):dd(e,g,!1,l)};function pl(a,b){if(!a)throw Error("Invalid class name "+a);if(!na(b))throw Error("Invalid decorator function "+b);ql[a]=b}var rl={},ql={};function sl(){}var tl;fa(sl);var ul={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=sl.prototype;f.ii=function(){};f.C=function(a){var b=a.da().C("div",this.wn(a).join(" "),a.Tf());vl(this,a,b);return b};f.Qb=function(a){return a};f.rn=function(a,b,c){if(a=a.b?a.b():a){var d=[b];mc&&!vc("7")&&(d=wl(sj(a),b),d.push(b));(c?vj:xj)(a,d)}};f.yg=function(){return!0};
f.cc=function(a,b){b.id&&fj(a,b.id);var c=this.Qb(b);c&&c.firstChild?xl(a,c.firstChild.nextSibling?Rb(c.childNodes):c.firstChild):a.Wd=null;var d=0,e=this.oa(),g=this.oa(),l=!1,m=!1,c=!1,q=Rb(sj(b));A(q,function(a){l||a!=e?m||a!=g?d|=this.Sy(a):m=!0:(l=!0,g==e&&(m=!0))},this);a.fa=d;l||(q.push(e),g==e&&(m=!0));m||q.push(g);var p=a.hi;p&&q.push.apply(q,p);if(mc&&!vc("7")){var t=wl(q);0<t.length&&(q.push.apply(q,t),c=!0)}if(!l||!m||p||c)b.className=q.join(" ");vl(this,a,b);return b};
f.wp=function(a){a.Hg()&&this.Op(a.b(),!0);a.isEnabled()&&this.bm(a,a.mb())};function yl(a,b,c){if(a=c||a.ii())c=b.getAttribute("role")||null,a!=c&&Aj(b,a)}function vl(a,b,c){b.mb()||Bj(c,"hidden",!b.mb());b.isEnabled()||a.wj(c,1,!b.isEnabled());zl(b,8)&&a.wj(c,8,!!(b.fa&8));zl(b,16)&&a.wj(c,16,b.Tl());zl(b,64)&&a.wj(c,64,!!(b.fa&64))}f.ss=function(a,b){Bi(a,!b,!mc&&!lc)};f.Op=function(a,b){this.rn(a,this.oa()+"-rtl",b)};f.lk=function(a){var b;return zl(a,32)&&(b=a.td())?Oh(b)&&Ph(b):!1};
f.bm=function(a,b){var c;if(zl(a,32)&&(c=a.td())){if(!b&&a.fa&32){try{c.blur()}catch(d){}a.fa&32&&a.An(null)}(Oh(c)&&Ph(c))!=b&&Nh(c,b)}};f.Da=function(a,b){yi(a,b);a&&Bj(a,"hidden",!b)};f.dd=function(a,b,c){var d=a.b();if(d){var e=this.sr(b);e&&this.rn(a,e,c);this.wj(d,b,c)}};f.wj=function(a,b,c){tl||(tl={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=tl[b];var d=a.getAttribute("role")||null;d&&(d=ul[d]||b,b="checked"==b||"selected"==b?d:b);b&&Bj(a,b,c)};
f.$l=function(a,b){var c=this.Qb(a);if(c&&(Bh(c),b))if(ka(b))Kh(c,b);else{var d=function(a){if(a){var b=lh(c);c.appendChild(ka(a)?b.createTextNode(a):a)}};ia(b)?A(b,d):!ja(b)||"nodeType"in b?d(b):A(Rb(b),d)}};f.td=function(a){return a.b()};f.oa=function(){return"goog-control"};f.wn=function(a){var b=this.oa(),c=[b],d=this.oa();d!=b&&c.push(d);b=a.mp();for(d=[];b;){var e=b&-b;d.push(this.sr(e));b&=~e}c.push.apply(c,d);(a=a.hi)&&c.push.apply(c,a);mc&&!vc("7")&&c.push.apply(c,wl(c));return c};
function wl(a,b){var c=[];b&&(a=a.concat([b]));A([],function(d){!Jb(d,xa(Mb,a))||b&&!Mb(d,b)||c.push(d.join("_"))});return c}f.sr=function(a){this.ku||Al(this);return this.ku[a]};f.Sy=function(a){if(!this.oJ){this.ku||Al(this);var b=this.ku,c={},d;for(d in b)c[b[d]]=d;this.oJ=c}a=parseInt(this.oJ[a],10);return isNaN(a)?0:a};function Al(a){var b=a.oa();b.replace(/\xa0|\s/g," ");a.ku={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Bl(a,b){gd.call(this);a&&this.So(a,b)}k(Bl,gd);f=Bl.prototype;f.q=null;f.cv=null;f.rz=null;f.dv=null;f.Ig=-1;f.Ul=-1;f.Bx=!1;
var Cl={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Dl={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},El=mc||oc&&vc("525"),Fl=hc&&nc;f=Bl.prototype;
f.Lu=function(a){oc&&(17==this.Ig&&!a.ctrlKey||18==this.Ig&&!a.altKey||hc&&91==this.Ig&&!a.metaKey)&&(this.Ul=this.Ig=-1);-1==this.Ig&&(a.ctrlKey&&17!=a.keyCode?this.Ig=17:a.altKey&&18!=a.keyCode?this.Ig=18:a.metaKey&&91!=a.keyCode&&(this.Ig=91));El&&!mj(a.keyCode,this.Ig,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Ul=oj(a.keyCode),Fl&&(this.Bx=a.altKey))};f.QP=function(a){this.Ul=this.Ig=-1;this.Bx=a.altKey};
f.handleEvent=function(a){var b=a.Yd,c,d,e=b.altKey;mc&&"keypress"==a.type?(c=this.Ul,d=13!=c&&27!=c?b.keyCode:0):oc&&"keypress"==a.type?(c=this.Ul,d=0<=b.charCode&&63232>b.charCode&&nj(c)?b.charCode:0):lc?(c=this.Ul,d=nj(c)?b.keyCode:0):(c=b.keyCode||this.Ul,d=b.charCode||0,Fl&&(e=this.Bx),hc&&63==d&&224==c&&(c=191));var g=c=oj(c),l=b.keyIdentifier;c?63232<=c&&c in Cl?g=Cl[c]:25==c&&a.shiftKey&&(g=9):l&&l in Dl&&(g=Dl[l]);a=g==this.Ig;this.Ig=g;b=new Gl(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.b=function(){return this.q};f.So=function(a,b){this.dv&&this.detach();this.q=a;this.cv=C(this.q,"keypress",this,b);this.rz=C(this.q,"keydown",this.Lu,b,this);this.dv=C(this.q,"keyup",this.QP,b,this)};f.detach=function(){this.cv&&(ad(this.cv),ad(this.rz),ad(this.dv),this.dv=this.rz=this.cv=null);this.q=null;this.Ul=this.Ig=-1};f.i=function(){Bl.g.i.call(this);this.detach()};function Gl(a,b,c,d){Mc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}k(Gl,Mc);function Hl(a,b,c){bj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=pa(b);if(d=rl[d])break;b=b.g?b.g.constructor:null}b=d?na(d.qf)?d.qf():new d:null}this.Va=b;this.Wd=ca(a)?a:null}k(Hl,bj);f=Hl.prototype;f.Wd=null;f.fa=0;f.Ns=39;f.Tq=255;f.Yn=0;f.Md=!0;f.hi=null;f.Cn=!0;f.cu=!1;f.IA=null;f.vs=function(a){this.Fa&&a!=this.Cn&&Il(this,a);this.Cn=a};f.td=function(){return this.Va.td(this)};f.Eu=function(){return this.fc||(this.fc=new Bl)};f.ec=function(){return this.Va};
f.rn=function(a,b){b?a&&(this.hi?Mb(this.hi,a)||this.hi.push(a):this.hi=[a],this.Va.rn(this,a,!0)):a&&this.hi&&Pb(this.hi,a)&&(0==this.hi.length&&(this.hi=null),this.Va.rn(this,a,!1))};f.C=function(){var a=this.Va.C(this);this.q=a;yl(this.Va,a,this.Gl());this.cu||this.Va.ss(a,!1);this.mb()||this.Va.Da(a,!1)};f.Gl=function(){return this.IA};f.Qb=function(){return this.Va.Qb(this.b())};f.yg=function(a){return this.Va.yg(a)};
f.Of=function(a){this.q=a=this.Va.cc(this,a);yl(this.Va,a,this.Gl());this.cu||this.Va.ss(a,!1);this.Md="none"!=a.style.display};f.Pb=function(){Hl.g.Pb.call(this);this.Va.wp(this);if(this.Ns&-2&&(this.Cn&&Il(this,!0),zl(this,32))){var a=this.td();if(a){var b=this.Eu();b.So(a);this.Rb().I(b,"key",this.$i).I(a,"focus",this.Bn).I(a,"blur",this.An)}}};
function Il(a,b){var c=a.Rb(),d=a.b();b?(c.I(d,"mouseover",a.Dn).I(d,"mousedown",a.aj).I(d,"mouseup",a.li).I(d,"mouseout",a.Nu),a.Ar!=ea&&c.I(d,"contextmenu",a.Ar),mc&&c.I(d,"dblclick",a.AG)):(c.gc(d,"mouseover",a.Dn).gc(d,"mousedown",a.aj).gc(d,"mouseup",a.li).gc(d,"mouseout",a.Nu),a.Ar!=ea&&c.gc(d,"contextmenu",a.Ar),mc&&c.gc(d,"dblclick",a.AG))}f.Id=function(){Hl.g.Id.call(this);this.fc&&this.fc.detach();this.mb()&&this.isEnabled()&&this.Va.bm(this,!1)};
f.i=function(){Hl.g.i.call(this);this.fc&&(this.fc.k(),delete this.fc);delete this.Va;this.hi=this.Wd=null};f.Tf=function(){return this.Wd};f.$l=function(a){this.Va.$l(this.b(),a);this.Wd=a};function xl(a,b){a.Wd=b}f.Bu=function(){var a=this.Tf();if(!a)return"";a=ka(a)?a:ia(a)?Hb(a,Sh).join(""):Qh(a);return Ka(a)};f.Op=function(a){Hl.g.Op.call(this,a);var b=this.b();b&&this.Va.Op(b,a)};f.ss=function(a){this.cu=a;var b=this.b();b&&this.Va.ss(b,a)};f.mb=function(){return this.Md};
f.Da=function(a,b){if(b||this.Md!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.Va.Da(c,a);this.isEnabled()&&this.Va.bm(this,a);this.Md=a;return!0}return!1};f.isEnabled=function(){return!(this.fa&1)};f.xd=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Jl(this,1,!a)||(a||(this.setActive(!1),this.xi(!1)),this.mb()&&this.Va.bm(this,a),this.dd(1,!a))};f.xi=function(a){Jl(this,2,a)&&this.dd(2,a)};f.cj=function(){return!!(this.fa&4)};
f.setActive=function(a){Jl(this,4,a)&&this.dd(4,a)};f.zs=function(a){Jl(this,8,a)&&this.dd(8,a)};f.Tl=function(){return!!(this.fa&16)};f.wh=function(a){Jl(this,16,a)&&this.dd(16,a)};f.cd=function(a){Jl(this,64,a)&&this.dd(64,a)};f.mp=function(){return this.fa};f.dd=function(a,b){zl(this,a)&&b!=!!(this.fa&a)&&(this.Va.dd(this,a,b),this.fa=b?this.fa|a:this.fa&~a)};function zl(a,b){return!!(a.Ns&b)}
f.ce=function(a,b){if(this.Fa&&this.fa&a&&!b)throw Error("Component already rendered");!b&&this.fa&a&&this.dd(a,!1);this.Ns=b?this.Ns|a:this.Ns&~a};function Kl(a,b){return!!(a.Tq&b)&&zl(a,b)}function Jl(a,b,c){return zl(a,b)&&!!(a.fa&b)!=c&&(!(a.Yn&b)||a.dispatchEvent(dj(b,c)))&&!a.ln}f.Dn=function(a){(!a.relatedTarget||!Ih(this.b(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&Kl(this,2)&&this.xi(!0)};
f.Nu=function(a){a.relatedTarget&&Ih(this.b(),a.relatedTarget)||!this.dispatchEvent("leave")||(Kl(this,4)&&this.setActive(!1),Kl(this,2)&&this.xi(!1))};f.Ar=ea;f.aj=function(a){this.isEnabled()&&(Kl(this,2)&&this.xi(!0),Oc(a)&&(Kl(this,4)&&this.setActive(!0),this.Va.lk(this)&&this.td().focus()));!this.cu&&Oc(a)&&a.preventDefault()};f.li=function(a){this.isEnabled()&&(Kl(this,2)&&this.xi(!0),this.cj()&&this.Pn(a)&&Kl(this,4)&&this.setActive(!1))};f.AG=function(a){this.isEnabled()&&this.Pn(a)};
f.Pn=function(a){Kl(this,16)&&this.wh(!this.Tl());Kl(this,8)&&this.zs(!0);Kl(this,64)&&this.cd(!(this.fa&64));var b=new Jc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.FA=a.FA);return this.dispatchEvent(b)};f.Bn=function(){Kl(this,32)&&Jl(this,32,!0)&&this.dd(32,!0)};f.An=function(){Kl(this,4)&&this.setActive(!1);Kl(this,32)&&Jl(this,32,!1)&&this.dd(32,!1)};
f.$i=function(a){return this.mb()&&this.isEnabled()&&this.ki(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.ki=function(a){return 13==a.keyCode&&this.Pn(a)};if(!na(Hl))throw Error("Invalid component class "+Hl);if(!na(sl))throw Error("Invalid renderer class "+sl);var Ll=pa(Hl);rl[Ll]=sl;pl("goog-control",function(){return new Hl(null)});function Ml(){this.sE=[]}k(Ml,sl);fa(Ml);function Nl(a,b){var c=a.sE[b];if(!c){switch(b){case 0:c=a.oa()+"-highlight";break;case 1:c=a.oa()+"-checkbox";break;case 2:c=a.oa()+"-content"}a.sE[b]=c}return c}f=Ml.prototype;f.ii=function(){return"menuitem"};f.C=function(a){var b=a.da().C("div",this.wn(a).join(" "),Ol(this,a.Tf(),a.da()));Pl(this,a,b,zl(a,8)||zl(a,16));return b};f.Qb=function(a){return a&&a.firstChild};
f.cc=function(a,b){var c=Eh(b),d=Nl(this,2);c&&tj(c,d)||b.appendChild(Ol(this,b.childNodes,a.da()));tj(b,"goog-option")&&(a.Zv(!0),this.Zv(a,b,!0));return Ml.g.cc.call(this,a,b)};f.$l=function(a,b){var c=this.Qb(a),d=Ql(this,a)?c.firstChild:null;Ml.g.$l.call(this,a,b);d&&!Ql(this,a)&&c.insertBefore(d,c.firstChild||null)};function Ol(a,b,c){a=Nl(a,2);return c.C("div",a,b)}f.TI=function(a,b,c){a&&b&&Pl(this,a,b,c)};f.Zv=function(a,b,c){a&&b&&Pl(this,a,b,c)};
function Ql(a,b){var c=a.Qb(b);if(c){var c=c.firstChild,d=Nl(a,1);return!!c&&Hh(c)&&tj(c,d)}return!1}function Pl(a,b,c,d){yl(a,c,b.Gl());vl(a,b,c);d!=Ql(a,c)&&(yj(c,"goog-option",d),c=a.Qb(c),d?(a=Nl(a,1),c.insertBefore(b.da().C("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.sr=function(a){switch(a){case 2:return Nl(this,0);case 16:case 8:return"goog-option-selected";default:return Ml.g.sr.call(this,a)}};
f.Sy=function(a){var b=Nl(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return Ml.g.Sy.call(this,a)}};f.oa=function(){return"goog-menuitem"};function Rl(a,b,c,d){Hl.call(this,a,d||Ml.qf(),c);this.aa(b)}k(Rl,Hl);f=Rl.prototype;f.ea=function(){var a=this.Qz;return null!=a?a:this.Bu()};f.aa=function(a){this.Qz=a};f.ce=function(a,b){Rl.g.ce.call(this,a,b);switch(a){case 8:this.Tl()&&!b&&this.wh(!1);var c=this.b();c&&this.ec().TI(this,c,b);break;case 16:(c=this.b())&&this.ec().Zv(this,c,b)}};f.TI=function(a){this.ce(8,a)};f.Zv=function(a){this.ce(16,a)};
f.Bu=function(){var a=this.Tf();return ia(a)?(a=Hb(a,function(a){return Hh(a)&&(tj(a,"goog-menuitem-accel")||tj(a,"goog-menuitem-mnemonic-separator"))?"":Sh(a)}).join(""),Ka(a)):Rl.g.Bu.call(this)};f.li=function(a){var b=this.getParent();if(b){var c=b.XH;b.XH=null;if(b=c&&ma(a.clientX))b=new Zg(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}Rl.g.li.call(this,a)};f.ki=function(a){return a.keyCode==this.BH&&this.Pn(a)?!0:Rl.g.ki.call(this,a)};f.NO=function(){return this.BH};
pl("goog-menuitem",function(){return new Rl(null)});Rl.prototype.Gl=function(){return zl(this,16)?"menuitemcheckbox":zl(this,8)?"menuitemradio":Rl.g.Gl.call(this)};function Sl(a){this.aE=a}fa(Sl);f=Sl.prototype;f.ii=function(){return this.aE};function Tl(a,b){a&&(a.tabIndex=b?0:-1)}f.C=function(a){return a.da().C("div",this.wn(a).join(" "))};f.Qb=function(a){return a};f.yg=function(a){return"DIV"==a.tagName};f.cc=function(a,b){b.id&&fj(a,b.id);var c=this.oa(),d=!1,e=sj(b);e&&A(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.xd(!1):b==c+"-horizontal"?a.Bk(Ul):b==c+"-vertical"&&a.Bk(Vl))},this);d||uj(b,c);Wl(this,a,this.Qb(b));return b};
function Wl(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var g=a.Jy(d);g&&(g.q=d,b.isEnabled()||g.xd(!1),b.Rq(g),g.cc(d))}else d.nodeValue&&""!=La(d.nodeValue)||c.removeChild(d);d=e}}f.Jy=function(a){a:{var b;a=sj(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in ql?ql[b]():null){a=b;break a}a=null}return a};f.wp=function(a){a=a.b();Bi(a,!0,nc);mc&&(a.hideFocus=!0);var b=this.ii();b&&Aj(a,b)};f.td=function(a){return a.b()};f.oa=function(){return"goog-container"};
f.wn=function(a){var b=this.oa(),c=[b,a.$c()==Ul?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function Xl(){}k(Xl,sl);fa(Xl);Xl.prototype.C=function(a){return a.da().C("div",this.oa())};Xl.prototype.cc=function(a,b){b.id&&fj(a,b.id);if("HR"==b.tagName){var c=b;b=this.C(a);Ch(b,c);S(c)}else uj(b,this.oa());return b};Xl.prototype.$l=function(){};Xl.prototype.oa=function(){return"goog-menuseparator"};function Yl(a,b){Hl.call(this,null,a||Xl.qf(),b);this.ce(1,!1);this.ce(2,!1);this.ce(4,!1);this.ce(32,!1);this.fa=1}k(Yl,Hl);Yl.prototype.Pb=function(){Yl.g.Pb.call(this);Aj(this.b(),"separator")};pl("goog-menuseparator",function(){return new Yl});function Zl(a){this.aE=a||"menu"}k(Zl,Sl);fa(Zl);f=Zl.prototype;f.yg=function(a){return"UL"==a.tagName||Zl.g.yg.call(this,a)};f.Jy=function(a){return"HR"==a.tagName?new Yl:Zl.g.Jy.call(this,a)};f.dn=function(a,b){return Ih(a.b(),b)};f.oa=function(){return"goog-menu"};f.wp=function(a){Zl.g.wp.call(this,a);Bj(a.b(),"haspopup","true")};function $l(a,b,c,d,e,g,l,m,q){var p,t;if(p=c.offsetParent){var s="HTML"==p.tagName||"BODY"==p.tagName;s&&"static"==ci(p)||(t=li(p),s||(s=(s=mi(p))&&nc?-p.scrollLeft:!s||mc&&vc("8")||"visible"==bi(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,t=$g(t,new Zg(s,p.scrollTop))))}p=t||new Zg;t=wi(a);(s=ji(a))&&t.YG(new dh(s.left,s.top,s.right-s.left,s.bottom-s.top));var s=jh(a),u=jh(c);if(s.Sa!=u.Sa){var v=s.Sa.body,u=Xh(u),D=new Zg(0,0),B=vh(lh(v)),I=v;do{var G=B==u?li(I):pi(I);
D.x+=G.x;D.y+=G.y}while(B&&B!=u&&(I=B.frameElement)&&(B=B.parent));v=$g(D,li(v));mc&&!Wh(s)&&(v=$g(v,Yh(s)));t.left+=v.x;t.top+=v.y}a=am(a,b);b=new Zg(a&2?t.left+t.width:t.left,a&1?t.top+t.height:t.top);b=$g(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var Q;if(l)if(q)Q=q;else if(Q=ji(c))Q.top-=p.y,Q.right-=p.x,Q.bottom-=p.y,Q.left-=p.x;return bm(b,c,d,g,Q,l,m)}
function bm(a,b,c,d,e,g,l){a=a.clone();var m=0,q=am(b,c);c=ui(b);l=l?l.clone():c.clone();if(d||0!=q)q&2?a.x-=l.width+(d?d.right:0):d&&(a.x+=d.left),q&1?a.y-=l.height+(d?d.bottom:0):d&&(a.y+=d.top);if(g&&(e?(m=a,d=0,65==(g&65)&&(m.x<e.left||m.x>=e.right)&&(g&=-2),132==(g&132)&&(m.y<e.top||m.y>=e.bottom)&&(g&=-5),m.x<e.left&&g&1&&(m.x=e.left,d|=1),m.x<e.left&&m.x+l.width>e.right&&g&16&&(l.width=Math.max(l.width-(m.x+l.width-e.right),0),d|=4),m.x+l.width>e.right&&g&1&&(m.x=Math.max(e.right-l.width,e.left),
d|=1),g&2&&(d=d|(m.x<e.left?16:0)|(m.x+l.width>e.right?32:0)),m.y<e.top&&g&4&&(m.y=e.top,d|=2),m.y<=e.top&&m.y+l.height<e.bottom&&g&32&&(l.height=Math.max(l.height-(e.top-m.y),0),m.y=e.top,d|=8),m.y>=e.top&&m.y+l.height>e.bottom&&g&32&&(l.height=Math.max(l.height-(m.y+l.height-e.bottom),0),d|=8),m.y+l.height>e.bottom&&g&4&&(m.y=Math.max(e.bottom-l.height,e.top),d|=2),g&8&&(d=d|(m.y<e.top?64:0)|(m.y+l.height>e.bottom?128:0)),m=d):m=256,m&496))return m;di(b,a);ch(c,l)||(e=Wh(jh(lh(b))),!mc||e&&vc("8")?
(b=b.style,nc?b.MozBoxSizing="border-box":oc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(l.width,0)+"px",b.height=Math.max(l.height,0)+"px"):(a=b.style,e?(e=Ei(b,"padding"),b=Hi(b),a.pixelWidth=l.width-b.left-e.left-e.right-b.right,a.pixelHeight=l.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=l.width,a.pixelHeight=l.height)));return m}function am(a,b){return(b&4&&mi(a)?b^2:b)&-5};var cm,dm;dm=cm=!1;var em=Xb;em&&(-1!=em.indexOf("Firefox")||-1!=em.indexOf("Camino")||(-1!=em.indexOf("iPhone")||-1!=em.indexOf("iPod")?cm=!0:-1!=em.indexOf("iPad")&&(dm=!0)));var fm=cm,gm=dm;pl("goog-menuseparator",function(){return new Yl});function hm(a,b,c){bj.call(this,c);this.Va=b||Sl.qf();this.jb=a||Vl}k(hm,bj);var Ul="horizontal",Vl="vertical";f=hm.prototype;f.sz=null;f.fc=null;f.Va=null;f.jb=null;f.Md=!0;f.Xd=!0;f.Ey=!0;f.Fg=-1;f.Kd=null;f.rk=!1;f.gM=!1;f.BS=!0;f.Wj=null;f.td=function(){return this.sz||this.Va.td(this)};f.Eu=function(){return this.fc||(this.fc=new Bl(this.td()))};f.ec=function(){return this.Va};f.C=function(){this.q=this.Va.C(this)};f.Qb=function(){return this.Va.Qb(this.b())};f.yg=function(a){return this.Va.yg(a)};
f.Of=function(a){this.q=this.Va.cc(this,a);"none"==a.style.display&&(this.Md=!1)};f.Pb=function(){hm.g.Pb.call(this);hj(this,function(a){a.Fa&&im(this,a)},this);var a=this.b();this.Va.wp(this);this.Da(this.Md,!0);this.Rb().I(this,"enter",this.Zy).I(this,"highlight",this.$y).I(this,"unhighlight",this.az).I(this,"open",this.UP).I(this,"close",this.LP).I(a,"mousedown",this.aj).I(lh(a),"mouseup",this.NP).I(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.KP);this.lk()&&jm(this,!0)};
function jm(a,b){var c=a.Rb(),d=a.td();b?c.I(d,"focus",a.Bn).I(d,"blur",a.An).I(a.Eu(),"key",a.$i):c.gc(d,"focus",a.Bn).gc(d,"blur",a.An).gc(a.Eu(),"key",a.$i)}f.Id=function(){this.oj(-1);this.Kd&&this.Kd.cd(!1);this.rk=!1;hm.g.Id.call(this)};f.i=function(){hm.g.i.call(this);this.fc&&(this.fc.k(),this.fc=null);this.Va=this.Kd=this.Wj=this.sz=null};f.Zy=function(){return!0};
f.$y=function(a){var b=kj(this,a.target);if(-1<b&&b!=this.Fg){var c=km(this);c&&c.xi(!1);this.Fg=b;c=km(this);this.rk&&c.setActive(!0);this.BS&&this.Kd&&c!=this.Kd&&(zl(c,64)?c.cd(!0):this.Kd.cd(!1))}b=this.b();null!=a.target.b()&&Bj(b,"activedescendant",a.target.b().id)};f.az=function(a){a.target==km(this)&&(this.Fg=-1);this.b().removeAttribute("aria-activedescendant")};f.UP=function(a){(a=a.target)&&a!=this.Kd&&a.getParent()==this&&(this.Kd&&this.Kd.cd(!1),this.Kd=a)};
f.LP=function(a){a.target==this.Kd&&(this.Kd=null)};f.aj=function(a){this.Xd&&(this.rk=!0);var b=this.td();b&&Oh(b)&&Ph(b)?b.focus():a.preventDefault()};f.NP=function(){this.rk=!1};f.KP=function(a){var b;a:{b=a.target;if(this.Wj)for(var c=this.b();b&&b!==c;){var d=b.id;if(d in this.Wj){b=this.Wj[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.aj(a);break;case "mouseup":b.li(a);break;case "mouseover":b.Dn(a);break;case "mouseout":b.Nu(a);break;case "contextmenu":b.Ar(a)}};
f.Bn=function(){};f.An=function(){this.oj(-1);this.rk=!1;this.Kd&&this.Kd.cd(!1)};f.$i=function(a){return this.isEnabled()&&this.mb()&&(0!=ij(this)||this.sz)&&this.ki(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.ki=function(a){var b=km(this);if(b&&"function"==typeof b.$i&&b.$i(a)||this.Kd&&this.Kd!=b&&"function"==typeof this.Kd.$i&&this.Kd.$i(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.lk())this.td().blur();else return!1;break;case 36:lm(this);break;case 35:mm(this);break;case 38:if(this.jb==Vl)nm(this);else return!1;break;case 37:if(this.jb==Ul)this.Hg()?om(this):nm(this);else return!1;break;case 40:if(this.jb==Vl)om(this);else return!1;break;case 39:if(this.jb==
Ul)this.Hg()?nm(this):om(this);else return!1;break;default:return!1}return!0};function im(a,b){var c=b.b(),c=c.id||(c.id=ej(b));a.Wj||(a.Wj={});a.Wj[c]=b}f.Rq=function(a,b){hm.g.Rq.call(this,a,b)};f.vx=function(a,b,c){a.Yn|=2;a.Yn|=64;!this.lk()&&this.gM||a.ce(32,!1);a.vs(!1);hm.g.vx.call(this,a,b,c);a.Fa&&this.Fa&&im(this,a);b<=this.Fg&&this.Fg++};
f.removeChild=function(a,b){if(a=ka(a)?gj(this,a):a){var c=kj(this,a);-1!=c&&(c==this.Fg?(a.xi(!1),this.Fg=-1):c<this.Fg&&this.Fg--);(c=a.b())&&c.id&&this.Wj&&xb(this.Wj,c.id)}a=hm.g.removeChild.call(this,a,b);a.vs(!0);return a};f.$c=function(){return this.jb};f.Bk=function(a){if(this.b())throw Error("Component already rendered");this.jb=a};f.mb=function(){return this.Md};
f.Da=function(a,b){if(b||this.Md!=a&&this.dispatchEvent(a?"show":"hide")){this.Md=a;var c=this.b();c&&(yi(c,a),this.lk()&&Tl(this.td(),this.Xd&&this.Md),b||this.dispatchEvent(this.Md?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Xd};
f.xd=function(a){this.Xd!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Xd=!0,hj(this,function(a){a.RJ?delete a.RJ:a.xd(!0)})):(hj(this,function(a){a.isEnabled()?a.xd(!1):a.RJ=!0}),this.rk=this.Xd=!1),this.lk()&&Tl(this.td(),a&&this.Md))};f.lk=function(){return this.Ey};f.bm=function(a){a!=this.Ey&&this.Fa&&jm(this,a);this.Ey=a;this.Xd&&this.Md&&Tl(this.td(),a)};f.oj=function(a){(a=jj(this,a))?a.xi(!0):-1<this.Fg&&km(this).xi(!1)};f.xi=function(a){this.oj(kj(this,a))};
function km(a){return jj(a,a.Fg)}function lm(a){pm(a,function(a,c){return(a+1)%c},ij(a)-1)}function mm(a){pm(a,function(a,c){a--;return 0>a?c-1:a},0)}function om(a){pm(a,function(a,c){return(a+1)%c},a.Fg)}function nm(a){pm(a,function(a,c){a--;return 0>a?c-1:a},a.Fg)}function pm(a,b,c){c=0>c?kj(a,a.Kd):c;var d=ij(a);c=b.call(a,c,d);for(var e=0;e<=d;){var g=jj(a,c);if(g&&a.mE(g)){a.oj(c);break}e++;c=b.call(a,c,d)}}f.mE=function(a){return a.mb()&&a.isEnabled()&&zl(a,2)};function qm(){}k(qm,sl);fa(qm);qm.prototype.oa=function(){return"goog-menuheader"};function rm(a,b,c){Hl.call(this,a,c||qm.qf(),b);this.ce(1,!1);this.ce(2,!1);this.ce(4,!1);this.ce(32,!1);this.fa=1}k(rm,Hl);pl("goog-menuheader",function(){return new rm(null)});function sm(a,b){hm.call(this,Vl,b||Zl.qf(),a);this.bm(!1)}k(sm,hm);f=sm.prototype;f.Ax=!0;f.hM=!1;f.oa=function(){return this.ec().oa()};f.dn=function(a){if(this.ec().dn(this,a))return!0;for(var b=0,c=ij(this);b<c;b++){var d=jj(this,b);if("function"==typeof d.dn&&d.dn(a))return!0}return!1};f.Ym=function(a){this.Rq(a,!0)};
f.XA=function(a,b){var c=this.mb();c||yi(this.b(),!0);var d=this.b(),e=a,g=b,l=li(d);e instanceof Zg&&(g=e.y,e=e.x);di(d,d.offsetLeft+(e-l.x),d.offsetTop+(g-l.y));c||yi(this.b(),!1)};f.Da=function(a,b,c){(b=sm.g.Da.call(this,a,b))&&a&&this.Fa&&this.Ax&&this.td().focus();this.XH=a&&c&&ma(c.clientX)?new Zg(c.clientX,c.clientY):null;return b};f.Zy=function(a){this.Ax&&this.td().focus();return sm.g.Zy.call(this,a)};f.mE=function(a){return(this.hM||a.isEnabled())&&a.mb()&&zl(a,2)};
f.Of=function(a){var b=this.ec(),c;c=this.da();c=oh(c.Sa,"div",b.oa()+"-content",a);for(var d=c.length,e=0;e<d;e++)Wl(b,this,c[e]);sm.g.Of.call(this,a)};f.ki=function(a){var b=sm.g.ki.call(this,a);b||hj(this,function(c){!b&&c.NO&&c.BH==a.keyCode&&(this.isEnabled()&&this.xi(c),b=c.$i(a))},this);return b};
f.oj=function(a){sm.g.oj.call(this,a);var b=jj(this,a);if(b){a=this.b();var b=b.b(),c=li(b),d=li(a),e=Hi(a),g=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,l=a.scrollTop,e=e+Math.min(g,Math.max(g-(a.clientWidth-b.offsetWidth),0)),l=l+Math.min(c,Math.max(c-d,0)),b=new Zg(e,l);a.scrollLeft=b.x;a.scrollTop=b.y}};function tm(){}tm.prototype.uf=function(){};function um(a,b,c){this.element=a;this.ar=b;this.ES=c}k(um,tm);um.prototype.uf=function(a,b,c){$l(this.element,this.ar,a,b,void 0,c,this.ES)};function vm(a,b,c,d){um.call(this,a,b);this.iv=c?5:0;this.AA=d||void 0}k(vm,um);vm.prototype.zO=function(){return this.iv};vm.prototype.uf=function(a,b,c,d){var e=$l(this.element,this.ar,a,b,null,c,10,d,this.AA);if(e&496){var g=wm(e,this.ar);b=wm(e,b);e=$l(this.element,g,a,b,null,c,10,d,this.AA);e&496&&(g=wm(e,g),b=wm(e,b),$l(this.element,g,a,b,null,c,this.iv,d,this.AA))}};function wm(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function xm(a,b,c,d){vm.call(this,a,b,c||d);if(c||d)this.iv=65|(d?32:132)}k(xm,vm);function ym(){}k(ym,sl);fa(ym);f=ym.prototype;f.ii=function(){return"button"};f.wj=function(a,b,c){switch(b){case 8:case 16:Bj(a,"pressed",c);break;default:case 64:case 1:ym.g.wj.call(this,a,b,c)}};f.C=function(a){var b=ym.g.C.call(this,a);this.fm(b,a.gk());var c=a.ea();c&&this.aa(b,c);zl(a,16)&&this.wj(b,16,a.Tl());return b};f.cc=function(a,b){b=ym.g.cc.call(this,a,b);var c=this.ea(b);a.Bi=c;a.gw(this.gk(b));zl(a,16)&&this.wj(b,16,a.Tl());return b};f.ea=ea;f.aa=ea;f.gk=function(a){return a.title};
f.fm=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.$v=function(a,b){var c=a.Hg(),d=this.oa()+"-collapse-left",e=this.oa()+"-collapse-right";a.rn(c?e:d,!!(b&1));a.rn(c?d:e,!!(b&2))};f.oa=function(){return"goog-button"};function zm(){}k(zm,ym);fa(zm);f=zm.prototype;f.ii=function(){};f.C=function(a){a.vs(!1);a.Tq&=-256;a.ce(32,!1);return a.da().C("button",{"class":this.wn(a).join(" "),disabled:!a.isEnabled(),title:a.gk()||"",value:a.ea()||""},a.Bu()||"")};f.yg=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.cc=function(a,b){a.vs(!1);a.Tq&=-256;a.ce(32,!1);if(b.disabled){var c=this.sr(1);uj(b,c)}return zm.g.cc.call(this,a,b)};
f.wp=function(a){a.Rb().I(a.b(),"click",a.Pn)};f.ss=ea;f.Op=ea;f.lk=function(a){return a.isEnabled()};f.bm=ea;f.dd=function(a,b,c){zm.g.dd.call(this,a,b,c);(a=a.b())&&1==b&&(a.disabled=c)};f.ea=function(a){return a.value};f.aa=function(a,b){a&&(a.value=b)};f.wj=ea;function Am(a,b,c){Hl.call(this,a,b||zm.qf(),c)}k(Am,Hl);f=Am.prototype;f.ea=function(){return this.Bi};f.aa=function(a){this.Bi=a;this.ec().aa(this.b(),a)};f.gk=function(){return this.Ts};f.fm=function(a){this.Ts=a;this.ec().fm(this.b(),a)};f.gw=function(a){this.Ts=a};f.$v=function(a){this.ec().$v(this,a)};f.i=function(){Am.g.i.call(this);delete this.Bi;delete this.Ts};f.Pb=function(){Am.g.Pb.call(this);if(zl(this,32)){var a=this.td();a&&this.Rb().I(a,"keyup",this.ki)}};
f.ki=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Pn(a):32==a.keyCode};pl("goog-button",function(){return new Am(null)});function Bm(){}k(Bm,ym);fa(Bm);f=Bm.prototype;f.C=function(a){var b={"class":"goog-inline-block "+this.wn(a).join(" ")},b=a.da().C("div",b,this.nu(a.Tf(),a.da()));this.fm(b,a.gk());vl(this,a,b);return b};f.ii=function(){return"button"};f.Qb=function(a){return a&&a.firstChild.firstChild};f.nu=function(a,b){return b.C("div","goog-inline-block "+(this.oa()+"-outer-box"),b.C("div","goog-inline-block "+(this.oa()+"-inner-box"),a))};f.yg=function(a){return"DIV"==a.tagName};
f.cc=function(a,b){Cm(b,!0);Cm(b,!1);var c;a:{c=a.da().VF(b);var d=this.oa()+"-outer-box";if(c&&tj(c,d)&&(c=a.da().VF(c),d=this.oa()+"-inner-box",c&&tj(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.nu(b.childNodes,a.da()));vj(b,["goog-inline-block",this.oa()]);return Bm.g.cc.call(this,a,b)};f.oa=function(){return"goog-custom-button"};
function Cm(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==La(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Dm(){}k(Dm,Bm);fa(Dm);f=Dm.prototype;f.Qb=function(a){return Dm.g.Qb.call(this,a&&a.firstChild)};f.cc=function(a,b){var c=nh("*","goog-menu",b)[0];if(c){yi(c,!1);lh(c).body.appendChild(c);var d=new sm;d.cc(c);Em(a,d)}return Dm.g.cc.call(this,a,b)};f.nu=function(a,b){return Dm.g.nu.call(this,[this.createCaption(a,b),b.C("div","goog-inline-block "+(this.oa()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.C("div","goog-inline-block "+(this.oa()+"-caption"),a)};f.oa=function(){return"goog-menu-button"};function Fm(a,b,c,d,e){Am.call(this,a,c||Dm.qf(),d);this.ce(64,!0);this.ov=new xm(null,5);b&&Em(this,b);this.SQ=null;this.ed=new Vf(500);!fm&&!gm||vc("533.17.9")||(this.Zu=!0);this.TQ=e||Zl.qf()}k(Fm,Am);f=Fm.prototype;f.Zu=!1;f.iT=!1;f.Pb=function(){Fm.g.Pb.call(this);Gm(this,!0);this.ka&&Hm(this,this.ka,!0);Bj(this.q,"haspopup",!!this.ka)};f.Id=function(){Fm.g.Id.call(this);Gm(this,!1);if(this.ka){this.cd(!1);this.ka.Id();Hm(this,this.ka,!1);var a=this.ka.b();a&&S(a)}};
f.i=function(){Fm.g.i.call(this);this.ka&&(this.ka.k(),delete this.ka);delete this.LS;this.ed.k()};f.aj=function(a){Fm.g.aj.call(this,a);this.cj()&&(this.cd(!(this.fa&64),a),this.ka&&(this.ka.rk=!!(this.fa&64)))};f.li=function(a){Fm.g.li.call(this,a);this.ka&&!this.cj()&&(this.ka.rk=!1)};f.Pn=function(){this.setActive(!1);return!0};f.MP=function(a){this.ka&&this.ka.mb()&&!this.dn(a.target)&&this.cd(!1)};f.dn=function(a){return a&&Ih(this.b(),a)||this.ka&&this.ka.dn(a)||!1};
f.ki=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.ka&&this.ka.mb()){var b=this.ka.$i(a);return 27==a.keyCode?(this.cd(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.cd(!0,a),!0):!1};f.RP=function(){this.cd(!1)};f.SP=function(){this.cj()||this.cd(!1)};f.An=function(a){this.Zu||this.cd(!1);Fm.g.An.call(this,a)};f.Qy=function(){this.ka||Em(this,new sm(this.da(),this.TQ));return this.ka||null};
function Em(a,b){var c=a.ka;b!=c&&(c&&(a.cd(!1),a.Fa&&Hm(a,c,!1),delete a.ka),a.Fa&&Bj(a.q,"haspopup",!!b),b&&(a.ka=b,b.ws(a),b.Da(!1),c=a.Zu,(b.Ax=c)&&b.bm(!0),a.Fa&&Hm(a,b,!0)))}f.Ym=function(a){this.Qy().Rq(a,!0)};f.Da=function(a,b){var c=Fm.g.Da.call(this,a,b);c&&!this.mb()&&this.cd(!1);return c};f.xd=function(a){Fm.g.xd.call(this,a);this.isEnabled()||this.cd(!1)};f.$A=function(){this.cd(!0)};f.Br=function(){this.cd(!1)};
f.cd=function(a,b){Fm.g.cd.call(this,a);if(this.ka&&!!(this.fa&64)==a){if(a){if(!this.ka.Fa)if(this.iT){var c=Gh(this.b());c?this.ka.lj(c.parentNode,c):this.ka.p(this.b().parentNode)}else this.ka.p();this.OJ=ji(this.b());this.kE=wi(this.b());Im(this);this.ka.oj(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.ka.rk=!1;if(c=this.b())Bj(c,"activedescendant",""),Bj(c,"owns","");null!=this.Fv&&(this.Fv=void 0,(c=this.ka.b())&&ri(c,"",""))}this.ka.Da(a,!1,b);if(!this.ln){var c=this.Rb(),
d=a?c.I:c.gc;d.call(c,Vh(this.da()),"mousedown",this.MP,!0);this.Zu&&d.call(c,this.ka,"blur",this.SP);d.call(c,this.ed,Wf,this.gS);a?this.ed.start():this.ed.stop()}}};function Im(a){if(a.ka.Fa){var b=a.ov;a.ov.element=a.LS||a.b();var c=a.ka.b();a.ka.mb()||(c.style.visibility="hidden",yi(c,!0));!a.Fv&&a.ov.zO&&a.ov.iv&32&&(a.Fv=ui(c));b.uf(c,b.ar^1,a.SQ,a.Fv);a.ka.mb()||(yi(c,!1),c.style.visibility="visible")}}
f.gS=function(){var a=wi(this.b()),b=ji(this.b()),c;c=this.kE;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.OJ,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.kE=a,this.OJ=b,Im(this))};function Hm(a,b,c){var d=a.Rb();c=c?d.I:d.gc;c.call(d,b,"action",a.RP);c.call(d,b,"highlight",a.$y);c.call(d,b,"unhighlight",a.az)}function Gm(a,b){var c=a.Rb();(b?c.I:c.gc).call(c,a.b(),"keydown",a.PP)}
f.$y=function(a){var b=this.b();if(a=a.target.b()){var c=Cj(a,"activedescendant");a=lh(a).getElementById(c)||a;a.id||(c=aj.qf(),a.id=":"+(c.LH++).toString(36));c="";a&&(c=a.id);Bj(b,"activedescendant",c);Bj(b,"owns",a.id)}};f.PP=function(a){zl(this,32)&&this.td()&&this.ka&&this.ka.mb()&&a.stopPropagation()};f.az=function(){if(!km(this.ka)){var a=this.b();Bj(a,"activedescendant","");Bj(a,"owns","")}};pl("goog-menu-button",function(){return new Fm(null)});U.W=function(){U.S.call(this);this.ae={};this.Gg=wh("div",{id:this.constructor.ID_PREFIX+"_Holder_"+r(),"class":U.W.CSS.GK});Ah(this.b(),this.Gg);this.En=wh("img",{id:this.constructor.ID_PREFIX+"_Icon_"+r(),"class":U.W.CSS.Yb});Ah(this.b(),this.En);this.ka=new sm;this.me=new Ok;this.mf=[];Jm(this);this.Br(void 0,0);this.ka.p(this.Gg);R(this.ka.b(),U.W.CSS.FK)};k(U.W,U.S);h("nrg.ui.SlideInMenu",U.W);U.W.ID_PREFIX="nrg.ui.SlideInMenu";
U.W.CSS_SUFFIX={Yb:"icon",gV:"icon-hovered",FK:"menu",GK:"menuholder",HK:"menuitem",tC:"menuitem-highlight",IK:"menuitem-icon"};U.W.zH={Fw:null,Cj:null,Yb:null};U.W.$B=450;U.W.NB=500;U.W.ww=700;U.W.PK=U.W.ww+800;U.W.PM=function(a,b,c,d){d=ca(d)?d:U.W.NB;return[new Jk(a,d),new Dk(a,b,c,d,Sk)]};U.W.QM=function(a,b,c,d){d=ca(d)?d:U.W.ww;return[new Ik(a,d),new Dk(a,b,c,d,Sk)]};f=U.W.prototype;f.aI=void 0;f.fr=void 0;f.Hp=!1;f.Cr=[-100,-100];f.Hs=[0,0];f.Iz=!0;f.Jz=!0;
f.EI=function(a,b){return this.Cr=[a,b]};f.WI=function(a,b){return this.Hs=[a,b]};f.tO=function(){return this.Cr};f.gP=function(){return this.Hs};f.Qy=function(){return this.ka};f.IO=function(){return this.Gg};f.JO=function(){return this.En};f.KI=function(a){this.En.src=a};f.AT=function(a,b){this.ae[a].Yb.src=b};f.ZF=function(a){return rb(this.ae).indexOf(a)};f.Uy=function(a){return rb(this.ae)[a]};f.Ny=function(a){return this.ae[rb(this.ae)[a]]};f.tH=function(a){return this.Iz=a};
f.uH=function(a){return this.Jz=a};f.eP=function(){return this.fr};function Km(a){null!=a.me&&(a.me.stop(),A(a.mf,function(a){this.me.remove(a);a.k()}.bind(a)),Nb(a.mf))}function Lm(a,b,c){Km(a);A(ia(b)?b:[b],function(a){this.me.add(a);this.mf.push(a)}.bind(a));a.Gg.style.visibility="visible";Zc(a.me,"end",function(){c&&c()}.bind(a));a.me.play()}f.gp=null;
function Mm(a){null!=a.gp&&(ba.clearTimeout(a.gp),a.gp=null);a.gp=Xf(function(){this.gp=null;this.Hp&&(!this.Sz&&this.Hp?this.Br():Mm(this))}.bind(a),U.W.$B)}f.oj=function(a){R(this.ae[this.Uy(a)].Cj,U.W.CSS.tC);this.Iz&&(this.En.src=this.ae[this.Uy(a)].Yb.src);this.Jz&&(this.b().title=this.Ny(a).Fw.Tf())};f.YE=function(){w(this.ae,function(a){Wg(a.Cj,U.W.CSS.tC)}.bind(this))};
f.AD=function(a,b){a=ka(a)?[a]:a;b=b||[];b=ia(b)?b:[b];var c=null,d=null,e=null;A(a,function(a,l){if(this.ae[a])throw Error(a+" is already in use!");c=new Rl(a);this.ka.Ym(c);d=c.Qb();R(d,U.W.CSS.HK);d.title=a;e=wh("img",{id:U.W.ID_PREFIX+"_MenuItemIcon_"+r(),"class":U.W.CSS.IK});e.src=l<=b.length-1?b[l]:null;Ah(d,e);this.ae[a]=zb(U.W.zH);this.ae[a].Fw=c;this.ae[a].Cj=d;this.ae[a].Yb=e}.bind(this))};
f.zs=function(a,b){var c=a;if(ka(c)){if(!this.ae[c])throw Error(c+" does not exist!");c=this.ZF(c)}this.aI=this.fr?this.fr:a;this.fr=a;ca(b)&&!b||this.YE();this.oj(c);this.dispatchEvent({type:"item_selected",index:c,title:this.Ny(c).Fw.Tf()})};f.$A=function(a,b){Lm(this,U.W.PM(this.Gg,this.Cr,this.Hs,b),function(){this.Hp=!0;null!=a&&a()}.bind(this))};f.Br=function(a,b){Lm(this,U.W.QM(this.Gg,this.Hs,this.Cr,b),function(){this.Hp=!1;this.Gg.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function Jm(a){C(a.b(),"click",function(){this.Hp?this.Br():this.$A()}.bind(a));C(a.ka,"action",function(a){this.zs(a.target.Tf())}.bind(a));C(a.Gg,"mouseover",function(){this.Sz=!0}.bind(a));C(a.Gg,"mouseout",function(){this.Sz=!1;Mm(this)}.bind(a))}
f.i=function(){U.W.g.i.call(this);delete this.Sz;delete this.gp;Km(this);Nb(this.mf);delete this.mf;w(this.ae,function(a,b){bd(a);S(a);delete this.ae[b]}.bind(this));wb(this.ae);delete this.ae;S(this.Gg);delete this.Gg;S(this.En);delete this.En;bd(this.ka);this.ka.k();delete this.ka;U.py(this.me);delete this.me;delete this.aI;delete this.fr;delete this.Hp;delete this.Cr;delete this.Hs;delete this.Iz;delete this.Jz};h("nrg.ui.SlideInMenu.ID_PREFIX",U.W.ID_PREFIX);h("nrg.ui.SlideInMenu.EventType",{lV:"item_selected"});
h("nrg.ui.SlideInMenu.CSS_SUFFIX",U.W.CSS_SUFFIX);h("nrg.ui.SlideInMenu.menuItemCollection",U.W.zH);h("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",U.W.$B);h("nrg.ui.SlideInMenu.ANIM_LEN_IN",U.W.NB);h("nrg.ui.SlideInMenu.ANIM_LEN_OUT",U.W.ww);h("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",U.W.PK);h("nrg.ui.SlideInMenu.prototype.setHidePosition",U.W.prototype.EI);h("nrg.ui.SlideInMenu.prototype.setShowPosition",U.W.prototype.WI);h("nrg.ui.SlideInMenu.prototype.getHidePosition",U.W.prototype.tO);
h("nrg.ui.SlideInMenu.prototype.getShowPosition",U.W.prototype.gP);h("nrg.ui.SlideInMenu.prototype.getMenu",U.W.prototype.Qy);h("nrg.ui.SlideInMenu.prototype.getMenuHolder",U.W.prototype.IO);h("nrg.ui.SlideInMenu.prototype.getMenuIcon",U.W.prototype.JO);h("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",U.W.prototype.KI);h("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",U.W.prototype.AT);h("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",U.W.prototype.ZF);
h("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",U.W.prototype.Uy);h("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",U.W.prototype.Ny);h("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",U.W.prototype.tH);h("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",U.W.prototype.uH);h("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",U.W.prototype.eP);h("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",U.W.prototype.oj);h("nrg.ui.SlideInMenu.prototype.deselectAll",U.W.prototype.YE);
h("nrg.ui.SlideInMenu.prototype.addMenuItem",U.W.prototype.AD);h("nrg.ui.SlideInMenu.prototype.setSelected",U.W.prototype.zs);h("nrg.ui.SlideInMenu.prototype.showMenu",U.W.prototype.$A);h("nrg.ui.SlideInMenu.prototype.hideMenu",U.W.prototype.Br);h("nrg.ui.SlideInMenu.prototype.disposeInternal",U.W.prototype.i);V.a={};V.a.e={};V.a.e.K={};V.a.e.K.wc=function(){U.S.call(this)};k(V.a.e.K.wc,U.S);h("xiv.ui.layouts.interactors.InputController",V.a.e.K.wc);V.a.e.K.wc.ID_PREFIX="xiv.ui.layouts.interactors.InputController";V.a.e.K.wc.CSS_SUFFIX={wK:"inputbox",jV:"inputbox-hovered",WB:"display"};f=V.a.e.K.wc.prototype;f.fi=null;f.yb=null;f.mQ=!1;f.ea=function(){if(null!=this.yb)return this.yb.value};f.aa=function(a){null!=this.yb&&(this.yb.value=a,this.yj())};f.Te=function(a){null!=this.yb&&(this.yb.max=a,this.yj())};
f.$f=function(a){null!=this.yb&&(this.yb.min=a,this.yj())};f.yj=function(){};f.RH=function(a){this.yb.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.yb.value});this.yj()};
f.p=function(a){V.a.e.K.wc.g.p.call(this,a);this.fi=wh("div");this.b().appendChild(this.fi);R(this.fi,V.a.e.K.wc.CSS.WB);this.yb=wh("input");this.yb.type="number";this.yb.step=1;this.yb.min=0;this.yb.value=0;this.b().appendChild(this.yb);R(this.yb,V.a.e.K.wc.CSS.wK);C(this.yb,"mouseenter",function(a){a.stopPropagation();this.yb.style.opacity=1;this.fi.style.opacity=0}.bind(this));C(this.yb,"mouseleave",function(a){a.stopPropagation();this.yb.style.opacity=0;this.fi.style.opacity=1}.bind(this));C(this.yb,
"input",this.RH.bind(this));this.yj()};f.i=function(){V.a.e.K.wc.g.i.call(this);delete this.mQ;this.yb&&(bd(this.yb),S(this.yb),delete this.yb);this.fi&&(bd(this.fi),S(this.fi),delete this.fi)};h("xiv.ui.layouts.interactors.InputController.EventType",{iV:"input",WB:"display"});h("xiv.ui.layouts.interactors.InputController.ID_PREFIX",V.a.e.K.wc.ID_PREFIX);h("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",V.a.e.K.wc.CSS_SUFFIX);
h("xiv.ui.layouts.interactors.InputController.prototype.getValue",V.a.e.K.wc.prototype.ea);h("xiv.ui.layouts.interactors.InputController.prototype.setValue",V.a.e.K.wc.prototype.aa);h("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",V.a.e.K.wc.prototype.Te);h("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",V.a.e.K.wc.prototype.$f);h("xiv.ui.layouts.interactors.InputController.prototype.updateValue",V.a.e.K.wc.prototype.yj);
h("xiv.ui.layouts.interactors.InputController.prototype.onInput",V.a.e.K.wc.prototype.RH);h("xiv.ui.layouts.interactors.InputController.prototype.render",V.a.e.K.wc.prototype.p);h("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",V.a.e.K.wc.prototype.i);V.a.e.K.tm=function(){V.a.e.K.wc.call(this)};k(V.a.e.K.tm,V.a.e.K.wc);h("xiv.ui.layouts.interactors.FrameDisplay",V.a.e.K.tm);V.a.e.K.tm.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";V.a.e.K.tm.prototype.yj=function(){this.fi.innerHTML=this.yb.value+" / "+this.yb.max};h("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",V.a.e.K.tm.ID_PREFIX);h("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",V.a.e.K.tm.prototype.yj);function Nm(){}h("nrg.array",Nm);Nm.IH=function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,g,l;g=(l=a.charAt(c++)).charCodeAt(0);)g=46==g||48<=g&&57>=g,g!==e&&(b[++d]="",e=g),b[d]+=l;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var g=Number(d[x]),l=Number(e[x]);return g==d[x]&&l==e[x]?g-l:d[x]>e[x]?1:-1}return d.length-e.length};h("nrg.array.naturalCompare",Nm.IH);function Om(a,b,c){this.Sg=this.Rg=this.Qg=0;3==arguments.length?(this.Qg=Number(a),this.Rg=Number(b),this.Sg=Number(c)):a instanceof Om?(this.Qg=Number(a.x()),this.Rg=Number(a.y()),this.Sg=Number(a.z())):(this.Qg=Number(a[0]),this.Rg=Number(a[1]),this.Sg=Number(a[2]))}
Om.prototype={clone:function(){return new Om(this.Qg,this.Rg,this.Sg)},ul:function(a){return this.Qg*a.x()+this.Rg*a.y()+this.Sg*a.z()},kv:function(a,b){return Pm(this,Qm(Rm(a,this),b))},length:function(){return Math.sqrt(this.ul(this))},jn:function(a){return new Om(this.Rg*a.z()-this.Sg*a.y(),this.Sg*a.x()-this.Qg*a.z(),this.Qg*a.y()-this.Rg*a.x())},x:function(){return this.Qg},y:function(){return this.Rg},z:function(){return this.Sg}};
function Sm(a){var b=a.length();return new Om(a.Qg/b,a.Rg/b,a.Sg/b)}function Qm(a,b){return new Om(a.Qg*b,a.Rg*b,a.Sg*b)}function Rm(a,b){return new Om(a.Qg-b.x(),a.Rg-b.y(),a.Sg-b.z())}function Pm(a,b){return new Om(a.Qg+b.x(),a.Rg+b.y(),a.Sg+b.z())}function Tm(a){return new Om(-a.Qg,-a.Rg,-a.Sg)};function Um(a,b){this.GA=new Om(a);this.ze=new Om(b)}Um.prototype={clone:function(){return new Um(this.GA.clone(),this.ze.clone())},vn:function(){this.ze=Tm(this.ze)},Lg:function(){return this.GA}};function Vm(a,b){this.ze=a;this.ct=b}Vm.prototype={clone:function(){return new Vm(this.ze.clone(),this.ct)},vn:function(){this.ze=Tm(this.ze);this.ct=-this.ct}};function Wm(a,b){this.Ik=a;this.hw=b;var c=a[0].Lg(),d=a[1].Lg(),e=a[2].Lg(),d=Sm(Rm(d,c).jn(Rm(e,c)));this.Kg=new Vm(d,d.ul(c))}Wm.prototype={clone:function(){var a=this.Ik.map(function(a){return a.clone()});return new Wm(a,this.hw)},vn:function(){this.Ik.reverse().map(function(a){a.vn()});this.Kg.vn()}};
function Xm(a,b,c,d,e,g){for(var l=0,m=[],q=0;q<a.Ik.length;q++){var p=b.ze.ul(a.Ik[q].Lg())-b.ct,p=-1E-5>p?2:1E-5<p?1:0,l=l|p;m.push(p)}switch(l){case 0:(0<b.ze.ul(a.Kg.ze)?c:d).push(a);break;case 1:e.push(a);break;case 2:g.push(a);break;case 3:c=[];d=[];for(q=0;q<a.Ik.length;q++){var t=(q+1)%a.Ik.length,p=m[q],s=m[t],l=a.Ik[q],t=a.Ik[t];2!=p&&c.push(l);1!=p&&d.push(2!=p?l.clone():l);3==(p|s)&&(p=(b.ct-b.ze.ul(l.Lg()))/b.ze.ul(Rm(t.Lg(),l.Lg())),p=new Um(l.GA.kv(t.Lg(),p),l.ze.kv(t.ze,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new Wm(c,a.hw));3<=d.length&&g.push(new Wm(d,a.hw))}};function Ym(a){this.ne=this.Le=this.Kg=null;this.Cc=[];a&&Zm(this,a)}Ym.prototype={clone:function(){var a=new Ym;$m(a,this.Kg&&this.Kg.clone());an(a,this.Le&&this.Le.clone());bn(a,this.ne&&this.ne.clone());a.ew(this.Cc.map(function(a){return a.clone()}));return a},uc:function(){for(var a=0;a<this.Cc.length;a++)this.Cc[a].vn();this.Kg.vn();this.Le&&this.Le.uc();this.ne&&this.ne.uc();a=this.Le;this.Le=this.ne;this.ne=a},back:function(){return this.ne},ew:function(a){this.Cc=a}};
function bn(a,b){a.ne=b}function an(a,b){a.Le=b}function $m(a,b){a.Kg=b}function Zm(a,b){if(b.length){a.Kg||(a.Kg=b[0].Kg.clone());for(var c=[],d=[],e=0;e<b.length;e++)Xm(b[e],a.Kg,a.Cc,a.Cc,c,d);c.length&&(a.Le||(a.Le=new Ym),Zm(a.Le,c));d.length&&(a.ne||(a.ne=new Ym),Zm(a.ne,d))}}function cn(a){var b=a.Cc.slice();a.Le&&(b=b.concat(cn(a.Le)));a.ne&&(b=b.concat(cn(a.ne)));return b}function dn(a,b){a.Cc=en(b,a.Cc);a.Le&&dn(a.Le,b);a.ne&&dn(a.ne,b)}
function en(a,b){if(!a.Kg)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Xm(b[e],a.Kg,c,d,c,d);a.Le&&(c=en(a.Le,c));d=a.ne?en(a.ne,d):[];return c.concat(d)};function fn(){this.Cc=[]}function gn(a){var b=new fn;b.ew(a);return b}
fn.prototype={clone:function(){var a=new fn;a.ew(this.Cc.map(function(a){return a.clone()}));return a},yB:function(a){var b=new Ym(this.clone().Cc);a=new Ym(a.clone().Cc);dn(b,a);dn(a,b);a.uc();dn(a,b);a.uc();Zm(b,cn(a));return gn(cn(b))},Ld:function(a){var b=new Ym(this.clone().Cc);a=new Ym(a.clone().Cc);b.uc();dn(b,a);dn(a,b);a.uc();dn(a,b);a.uc();Zm(b,cn(a));b.uc();return gn(cn(b))},kz:function(a){var b=new Ym(this.clone().Cc);a=new Ym(a.clone().Cc);b.uc();dn(a,b);a.uc();dn(b,a);dn(a,b);Zm(b,cn(a));
b.uc();return gn(cn(b))},inverse:function(){var a=this.clone();a.Cc.map(function(a){a.vn()});return a},ew:function(a){this.Cc=a}};function hn(){}function jn(a){for(var b=a.J.count,c=[],d=0,d=0;d<b;d+=3){var e=a.J.get(d),g=a.J.get(d+1),l=a.J.get(d+2),m=a.ya.get(d),q=a.ya.get(d+1),p=a.ya.get(d+2),t=a.kb;a.Ud&&0<a.Ud.length&&(t=a.Ud.get(d));var s=[];s.push(new Um(e,m));s.push(new Um(g,q));s.push(new Um(l,p));c.push(new Wm(s,t))}return gn(c)}
function kn(a,b){if(!(null!=b&&b instanceof fn))throw Error("Invalid CSG object.");var c=new kd,d=[];Hb(b.Cc,function(a){var b=[],l=a.hw,b=Hb(a.Ik,function(a){a.color=l;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.ML=Hb(c.unique(),function(a){return[a.Lg().x(),a.Lg().y(),a.Lg().z()]});a.LL=Hb(c.unique(),function(a){return[a.ze.x(),a.ze.y(),a.ze.z()]});a.KL=Hb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.J=new jd(9*d.length);
a.ya=new jd(9*d.length);a.Ud=new jd(9*d.length);Hb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.ML,q=this.LL,p=this.KL;this.J.add(d[b][0],d[b][1],d[b][2]);this.J.add(d[c][0],d[c][1],d[c][2]);this.J.add(d[a][0],d[a][1],d[a][2]);this.ya.add(q[b][0],q[b][1],q[b][2]);this.ya.add(q[c][0],q[c][1],q[c][2]);this.ya.add(q[a][0],q[a][1],q[a][2]);p[b]&&this.Ud.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Ud.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Ud.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Ud.pb&&(a.Ud=null);
a.lf=$d}hn.prototype.yB=function(a){if(null==a||!(a instanceof fn||a instanceof ce))throw Error("Invalid object.");var b=a;a instanceof ce&&(b=jn(b));a=new ce;za(a,new hn);kn(a,jn(this).yB(b));return a};hn.prototype.Ld=function(a){if(null==a||!(a instanceof fn||a instanceof ce))throw Error("Invalid object.");var b=a;a instanceof ce&&(b=jn(b));a=new ce;za(a,new hn);kn(a,jn(this).Ld(b));return a};
hn.prototype.kz=function(a){if(null==a||!(a instanceof fn||a instanceof ce))throw Error("Invalid object.");var b=a;a instanceof ce&&(b=jn(b));a=new ce;za(a,new hn);kn(a,jn(this).kz(b));return a};hn.prototype.inverse=function(){var a=new ce;za(a,new hn);kn(a,jn(this).inverse());return a};h("X.constructable",hn);h("X.constructable.prototype.intersect",hn.prototype.kz);h("X.constructable.prototype.inverse",hn.prototype.inverse);h("X.constructable.prototype.subtract",hn.prototype.Ld);
h("X.constructable.prototype.union",hn.prototype.yB);function ln(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new Om(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));l.push(new Um(Pm(c,Qm(e,d)),e))}this.Cc=[];a=a||{};var c=new Om(a.Ri||[0,0,0]),d=a.vi||1,e=a.eb||16;a=a.TT||8;for(var g=[],l=[],m=0;m<e;m++)for(var q=0;q<a;q++)l=[],b(m/e,q/a),0<q&&b((m+1)/e,q/a),q<a-1&&b((m+1)/e,(q+1)/a),b(m/e,(q+1)/a),g.push(new Wm(l));return gn(g)}k(ln,fn);function mn(){ce.call(this);this.t="sphere";this.xb=[0,0,0];this.Rm=5;this.le=32;this.RL=16;za(this,new hn)}k(mn,ce);mn.prototype.__defineGetter__("center",function(){return this.xb});mn.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center");this.xb=a});mn.prototype.__defineGetter__("radius",function(){return this.Rm});mn.prototype.__defineSetter__("radius",function(a){if(!ma(a))throw Error("Invalid radius.");this.Rm=a});
mn.prototype.Ba=function(){kn(this,new ln({Ri:this.xb,vi:this.Rm,eb:this.le,TT:this.RL}));mn.g.Ba.call(this)};h("X.sphere",mn);h("X.sphere.prototype.modified",mn.prototype.Ba);function Oe(a){ce.call(this);this.t="slice";this.xb=[0,0,0];this.Do=[0,0,1];this.Yc=[0,1,0];this.St=[1,0,0];this.lb=this.Db=10;this.Oo=[0,1,0,0,1,1,1,1,1,0,0,0];this.r=this.Pj=null;this.Ij=!0;this.zo=[1,1,1];null!=a&&this.fn(a)}k(Oe,ce);Oe.prototype.fn=function(a){this.xb=a.xb.slice();this.Do=a.Do.slice();this.Yc=a.Yc.slice();this.Db=a.Db;this.lb=a.lb;this.Pj=a.Pj;this.r=a.r;this.Ij=a.Ij;this.zo=a.zo;this.OL=a.OL;Oe.g.fn.call(this,a)};Oe.prototype.__defineSetter__("height",function(a){this.lb=a});
Oe.prototype.__defineSetter__("width",function(a){this.Db=a});Oe.prototype.create=function(){this.$g()};
Oe.prototype.$g=function(){var a=(new vd(this.Do[0],this.Do[1],this.Do[2])).normalize(),b=new vd(this.Yc[0],this.Yc[1],this.Yc[2]),c=new vd(this.St[0],this.St[1],this.St[2]),d=new vd(this.xb[0],this.xb[1],this.xb[2]),e=yd(c.clone().uc().scale(this.Db/2),b.clone().uc().scale(this.lb/2)),g=new vd(e.x+d.x,e.y+d.y,e.z+d.z),e=yd(c.clone().uc().scale(this.Db/2),b.clone().scale(this.lb/2)),l=new vd(e.x+d.x,e.y+d.y,e.z+d.z),e=yd(c.clone().scale(this.Db/2),b.clone().uc().scale(this.lb/2)),m=new vd(e.x+d.x,
e.y+d.y,e.z+d.z),e=yd(c.clone().scale(this.Db/2),b.clone().scale(this.lb/2)),b=new vd(e.x+d.x,e.y+d.y,e.z+d.z);this.J=new jd(18);this.ya=new jd(18);this.J.add(g.x,g.y,g.z);this.J.add(l.x,l.y,l.z);this.J.add(m.x,m.y,m.z);this.J.add(m.x,m.y,m.z);this.J.add(b.x,b.y,b.z);this.J.add(l.x,l.y,l.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.Ij&&(a=new ce,a.J=new jd(24),a.ya=new jd(24),a.J.add(g.x,
g.y,g.z),a.J.add(l.x,l.y,l.z),a.J.add(l.x,l.y,l.z),a.J.add(b.x,b.y,b.z),a.J.add(b.x,b.y,b.z),a.J.add(m.x,m.y,m.z),a.J.add(m.x,m.y,m.z),a.J.add(g.x,g.y,g.z),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.kb=[this.zo[0],this.zo[1],this.zo[2]],a.lf="LINES",a.Io=2,this.m.push(a))};h("X.slice",Oe);h("X.slice.prototype.create",Oe.prototype.create);function F(a){ce.call(this);this.t="volume";this.xb=[0,0,0];this.ac=[10,10,10];this.Td=[1,1,1];this.Jq=[10,10,10];this.Nj=[1,1,1];this.Oh=[];this.Go=this.Mj=this.Fo=this.Lj=this.Eo=this.Kj=0;this.Lq=new ce;this.Mq=new ce;this.Nq=new ce;this.Xt=this.wg=!1;this.zc=-1;this.Wt=[];this.r=null;this.Ij=!0;this.Kc=Infinity;this.Jc=-Infinity;this.mD=!0;this.Wc=0;this.ta=null;za(this,new md);za(this,new ae);null!=a&&this.fn(a)}k(F,ce);
F.prototype.fn=function(a){this.xb=a.xb.slice();this.ac=a.ac.slice();this.Nj=a.Nj.slice();this.Kj=a.Kj;this.Eo=a.Eo;this.Lj=a.Lj;this.Fo=a.Fo;this.Mj=a.Mj;this.Go=a.Go;this.WC=a.WC.slice();this.Lq=new ce(a.Lq);this.Mq=new ce(a.Mq);this.Nq=new ce(a.Nq);this.Wc=a.Wc;this.ta=a.ta;this.wg=a.wg;this.Xt=a.Xt;this.zc=a.zc;this.r=a.r;this.Ij=a.Ij;F.g.fn.call(this,a)};
F.prototype.$g=function(a){this.m.length=0;this.Lq.m.length=0;this.Mq.m.length=0;this.Nq.m.length=0;this.m.push(this.Lq);this.m.push(this.Mq);this.m.push(this.Nq);this.ff=a.Em;this.Yw=a.Fm;this.Hj=a.Dm;this.yo=a.kg;this.HL=a.mg;this.Wc=a.max;this.ta=a.data;this.T=!0};
F.prototype.Ba=function(a){a="undefined"!==typeof a?a:!0;if(0<this.m.length){this.wg!=this.Xt&&(this.wg||-1==this.zc||(this.m[this.zc].visible=!1),this.T=!0,this.Xt=this.wg);if(!this.bc)return;for(var b=0,b=0;3>b;b++){var c=this.m[b],d=0,e=0;0==b?(d=this.Kj,e=this.Eo,this.Eo=this.Kj):1==b?(d=this.Lj,e=this.Fo,this.Fo=this.Lj):2==b&&(d=this.Mj,e=this.Go,this.Go=this.Mj);if(null==this.m[b].m[parseInt(d,10)]){var g=Dd();g[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*parseInt(d,10);g[1]=this.h[b].U[0][0][1]+
this.h[b].rb[1]*parseInt(d,10);g[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*parseInt(d,10);if(this.Sb){var l=Ne(g,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.r.od,this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[parseInt(d,10)]=l;this.r.m[b].Ba(!0)}g=Ne(g,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);this.Sb&&(g.r=g.Cb,g.r=this.r.m[b].m[parseInt(d,10)].Cb);c.m[parseInt(d,10)]=g;this.m[b].Ba(!0)}e=c.m[parseInt(e,10)];this.wg||(e.visible=!1);c=c.m[parseInt(d,10)];c.visible=!0;
c.je=1;this.wg&&(c.m[0].bc=!1,b!=this.zc&&(c.visible=!1,c.je=0))}this.wg&&-1!=this.zc&&nn(this,this.zc)}a&&F.g.Ba.call(this)};F.prototype.__defineGetter__("dimensions",function(){return this.ac});F.prototype.__defineSetter__("dimensions",function(a){this.ac=a});F.prototype.__defineGetter__("spacing",function(){return this.Nj});F.prototype.__defineSetter__("spacing",function(a){this.Nj=a});F.prototype.__defineGetter__("bbox",function(){return this.Td});F.prototype.__defineGetter__("range",function(){return this.Jq});
F.prototype.__defineGetter__("dimensionsRAS",function(){return this.WC});F.prototype.__defineGetter__("volumeRendering",function(){return this.wg});F.prototype.__defineSetter__("volumeRendering",function(a){this.wg=a;this.Ba(!1)});F.prototype.__defineGetter__("visible",function(){return this.bc});F.prototype.__defineSetter__("visible",function(a){if(a)this.bc=a,this.Ba(!1);else{for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.bc=a;this.T=!0}});
F.prototype.__defineGetter__("center",function(){return this.xb});F.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center.");this.xb=a});F.prototype.__defineGetter__("volumeRenderingCache",function(){return this.Wt});F.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&ia(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.Wt=a});F.prototype.__defineGetter__("image",function(){return this.Oh});
F.prototype.__defineGetter__("labelmap",function(){this.r||(this.r=new on(this));return this.r});F.prototype.__defineGetter__("indexX",function(){return this.Kj});F.prototype.__defineSetter__("indexX",function(a){ma(a)&&0<=a&&a<this.Lq.m.length&&(this.Kj=a,this.Ba(!1))});F.prototype.__defineGetter__("indexY",function(){return this.Lj});F.prototype.__defineSetter__("indexY",function(a){ma(a)&&0<=a&&a<this.Mq.m.length&&(this.Lj=a,this.Ba(!1))});F.prototype.__defineGetter__("indexZ",function(){return this.Mj});
F.prototype.__defineSetter__("indexZ",function(a){ma(a)&&0<=a&&a<this.Nq.m.length&&(this.Mj=a,this.Ba(!1))});F.prototype.__defineGetter__("windowLow",function(){return this.Kc});F.prototype.__defineSetter__("windowLow",function(a){this.Kc=a});F.prototype.__defineGetter__("windowHigh",function(){return this.Jc});F.prototype.__defineSetter__("windowHigh",function(a){this.Jc=a});F.prototype.__defineGetter__("borders",function(){return this.Ij});
F.prototype.__defineSetter__("borders",function(a){this.Ij=a});F.prototype.__defineGetter__("reslicing",function(){return this.mD});F.prototype.__defineSetter__("reslicing",function(a){this.mD=a});F.prototype.__defineSetter__("xNormX",function(a){this.h[0].P[0]=a});F.prototype.__defineGetter__("xNormX",function(){return this.h[0].P[0]});F.prototype.__defineSetter__("xNormY",function(a){this.h[0].P[1]=a});F.prototype.__defineGetter__("xNormY",function(){return this.h[0].P[1]});
F.prototype.__defineSetter__("xNormZ",function(a){this.h[0].P[2]=a});F.prototype.__defineGetter__("xNormZ",function(){return this.h[0].P[2]});F.prototype.__defineSetter__("xColor",function(a){this.h[0].kb=a});F.prototype.__defineGetter__("xColor",function(){return this.h[0].kb});F.prototype.__defineSetter__("yNormX",function(a){this.h[1].P[0]=a});F.prototype.__defineGetter__("yNormX",function(){return this.h[1].P[0]});F.prototype.__defineSetter__("yNormY",function(a){this.h[1].P[1]=a});
F.prototype.__defineGetter__("yNormY",function(){return this.h[1].P[1]});F.prototype.__defineSetter__("yNormZ",function(a){this.h[1].P[2]=a});F.prototype.__defineGetter__("yNormZ",function(){return this.h[1].P[2]});F.prototype.__defineSetter__("yColor",function(a){this.h[1].kb=a});F.prototype.__defineGetter__("yColor",function(){return this.h[1].kb});F.prototype.__defineSetter__("zNormX",function(a){this.h[2].P[0]=a});F.prototype.__defineGetter__("zNormX",function(){return this.h[2].P[0]});
F.prototype.__defineSetter__("zNormY",function(a){this.h[2].P[1]=a});F.prototype.__defineGetter__("zNormY",function(){return this.h[2].P[1]});F.prototype.__defineSetter__("zNormZ",function(a){this.h[2].P[2]=a});F.prototype.__defineGetter__("zNormZ",function(){return this.h[2].P[2]});F.prototype.__defineSetter__("zColor",function(a){this.h[2].kb=a});F.prototype.__defineGetter__("zColor",function(){return this.h[2].kb});
F.prototype.LT=function(a){this.m[a].visible=!1;for(var b=0;b<this.m[a].m.length;b++)"undefined"!=typeof this.m[a].m[b]&&(this.Sb&&(this.r.m[a].m[b].remove(),this.r.m[a].m[b]=null),this.m[a].m[b].remove(),this.m[a].m[b]=null);Fd(this.h[a].P,this.h[a].P);Pe(a,this.h[a].Kq,this.h[a].P,this);this.m[a].m=[];this.m[a].m=Array(this.h[a].Aa);this.Sb&&(b=Ne(this.h[a].Kq,this.h[a].jf,this.h[a].P,this.h[a].kb,this.Td,this.r.od,this.r,this.r.Sb,this.r.gf.If),this.r.m[a].m=[],this.r.m[a].m=Array(this.h[a].Aa),
this.r.m[a].m[Math.floor(this.h[a].Aa/2)]=b,this.r.m[a].Ba());b=Ne(this.h[a].Kq,this.h[a].jf,this.h[a].P,this.h[a].kb,this.Td,this.od,this,!0,null);this.Sb&&(b.r=b.Cb,b.r=this.r.m[a].m[Math.floor(this.h[a].Aa/2)].Cb);this.m[a].m[Math.floor(this.h[a].Aa/2)]=b;0==a?(this.Kj=Math.floor(this.h[a].Aa/2),this.Eo=Math.floor(this.h[a].Aa/2)):1==a?(this.Lj=Math.floor(this.h[a].Aa/2),this.Fo=Math.floor(this.h[a].Aa/2)):(this.Mj=Math.floor(this.h[a].Aa/2),this.Go=Math.floor(this.h[a].Aa/2));this.m[a].Ba();this.m[a].m[Math.floor(this.h[a].Aa/
2)].bc=!0};
function nn(a,b){if(!a.Ht)if(!a.wg||!a.T&&b==a.zc)a.zc=b;else if(-1==a.Wt.indexOf(b))a.Wt.push(b),a.Ht=!0,pn(a,b),setTimeout(function(){var a=null;0<=this.zc&&(a=this.m[this.zc],a.visible=!1);var a=this.m[b],c=a.m.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.m[e]){var p=Dd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var t=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.r.od,this.r,
this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=t;this.r.m[b].Ba(!0)}p=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}qn(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.m[e]){var p=Dd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var t=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.r.od,
this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=t;this.r.m[b].Ba(!0)}p=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}qn(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.m[e]){var p=Dd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var s=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,
this.r.od,this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=s;this.r.m[b].Ba(!0)}p=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}qn(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.m[e]){var p=Dd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var s=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,
this.Td,this.r.od,this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=s;this.r.m[b].Ba(!0)}p=Ne(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}qn(this,1);setTimeout(function(){this.Ht&&this.m[b].Ba(!0);this.zc=b;this.T=!1;if(this.Ht){var a=new He;a.qb=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Ht=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.m[a.zc];
c.visible=!1;var c=a.m[b],d=c.m.length,e;for(e=0;e<d;e++)c.m[e].bc=!0;a.zc=b;a.T=!1}}function pn(a,b){var c=new Fe;c.qb=a;a.dispatchEvent(c);a.onComputing(b)}function qn(a,b){var c=new Ge;c.Vm=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}F.prototype.eA=function(){};F.prototype.gA=function(){};F.prototype.fA=function(){};h("X.volume",F);h("X.volume.prototype.modified",F.prototype.Ba);h("X.volume.prototype.sliceInfoChanged",F.prototype.LT);h("X.volume.prototype.onComputing",F.prototype.eA);
h("X.volume.prototype.onComputingProgress",F.prototype.gA);h("X.volume.prototype.onComputingEnd",F.prototype.fA);function rn(a,b){gd.call(this);this.q=a;var c=Hh(this.q)?this.q:this.q?this.q.body:null;this.zQ=!!c&&mi(c);this.jH=C(this.q,nc?"DOMMouseScroll":"mousewheel",this,b)}k(rn,gd);
rn.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Yd;if("mousewheel"==a.type){c=1;if(mc||oc&&(ic||vc("532.0")))c=40;d=sn(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=sn(-a.wheelDeltaX,c),c=sn(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;ma(this.vH)&&(b=od(b,-this.vH,this.vH));ma(this.wH)&&(c=od(c,-this.wH,this.wH));this.zQ&&(b=-b);b=new tn(d,a,b,c);this.dispatchEvent(b)};function sn(a,b){return oc&&(hc||jc)&&0!=a%b?a:a/b}
rn.prototype.i=function(){rn.g.i.call(this);ad(this.jH);this.jH=null};function tn(a,b,c,d){Mc.call(this,b);this.type="mousewheel";this.detail=a;this.$j=c;this.pf=d}k(tn,Mc);function un(){gd.call(this)}k(un,gd);f=un.prototype;f.Bi=0;f.pi=0;f.oh=100;f.Bg=0;f.Dk=1;f.Vf=!1;f.Ln=!1;f.aa=function(a){a=vn(this,a);this.Bi!=a&&(this.Bi=a+this.Bg>this.oh?this.oh-this.Bg:a<this.pi?this.pi:a,this.Vf||this.Ln||this.dispatchEvent("change"))};f.ea=function(){return vn(this,this.Bi)};f.am=function(a){a=vn(this,a);this.Bg!=a&&(this.Bg=0>a?0:this.Bi+a>this.oh?this.oh-this.Bi:a,this.Vf||this.Ln||this.dispatchEvent("change"))};
f.eh=function(){var a=this.Bg;return null==this.Dk?a:Math.round(a/this.Dk)*this.Dk};f.$f=function(a){if(this.pi!=a){var b=this.Vf;this.Vf=!0;this.pi=a;a+this.Bg>this.oh&&(this.Bg=this.oh-this.pi);a>this.Bi&&this.aa(a);a>this.oh&&(this.Bg=0,this.Te(a),this.aa(a));(this.Vf=b)||this.Ln||this.dispatchEvent("change")}};f.bb=function(){return vn(this,this.pi)};
f.Te=function(a){a=vn(this,a);if(this.oh!=a){var b=this.Vf;this.Vf=!0;this.oh=a;a<this.Bi+this.Bg&&this.aa(a-this.Bg);a<this.pi&&(this.Bg=0,this.$f(a),this.aa(this.oh));a<this.pi+this.Bg&&(this.Bg=this.oh-this.pi);(this.Vf=b)||this.Ln||this.dispatchEvent("change")}};f.La=function(){return vn(this,this.oh)};f.fk=function(){return this.Dk};f.pj=function(a){this.Dk!=a&&(this.Dk=a,a=this.Vf,this.Vf=!0,this.Te(this.La()),this.am(this.eh()),this.aa(this.ea()),(this.Vf=a)||this.Ln||this.dispatchEvent("change"))};
function vn(a,b){return null==a.Dk?b:a.pi+Math.round((b-a.pi)/a.Dk)*a.Dk};function wn(a,b){bj.call(this,a);this.UD=null;this.nb=new un;this.BQ=b||nd;C(this.nb,"change",this.FG,!1,this)}k(wn,bj);f=wn.prototype;f.jb="horizontal";f.Kr=!1;f.XQ=!1;f.Qi=10;f.pv=0;f.aH=!0;f.sv=0;f.QK=1E3;f.Xd=!0;f.Dg=!1;f.C=function(){wn.g.C.call(this);var a=this.da().C("div",this.oa(this.jb));this.Of(a)};f.Of=function(a){wn.g.Of.call(this,a);uj(a,this.oa(this.jb));this.NE();Aj(this.b(),"slider");xn(this)};
f.Pb=function(){wn.g.Pb.call(this);this.gg=new Mi(this.Qa);this.gi=new Mi(this.Jd);this.gg.yl(this.Dg);this.gi.yl(this.Dg);this.gg.ly=this.gi.ly=ea;this.fc=new Bl(this.b());yn(this,!0);this.b().tabIndex=0;this.xj()};
function yn(a,b){b?(a.Rb().I(a.gg,"beforedrag",a.Ku).I(a.gi,"beforedrag",a.Ku).I(a.gg,["start","end"],a.Pu).I(a.gi,["start","end"],a.Pu).I(a.fc,"key",a.Lu).I(a.b(),"click",a.Mu).I(a.b(),"mousedown",a.Mu),a.aH&&zn(a,!0)):(a.Rb().gc(a.gg,"beforedrag",a.Ku).gc(a.gi,"beforedrag",a.Ku).gc(a.gg,["start","end"],a.Pu).gc(a.gi,["start","end"],a.Pu).gc(a.fc,"key",a.Lu).gc(a.b(),"click",a.Mu).gc(a.b(),"mousedown",a.Mu),a.aH&&zn(a,!1))}f.Id=function(){wn.g.Id.call(this);Ic(this.gg,this.gi,this.fc,this.Kn)};
f.Ku=function(a){var b=a.ty==this.gg?this.Qa:this.Jd,c;"vertical"==this.jb?(c=this.b().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.La()-this.bb())+this.bb()):c=a.left/(this.b().clientWidth-b.offsetWidth)*(this.La()-this.bb())+this.bb();c=a.ty==this.gg?Math.min(Math.max(c,this.bb()),this.ea()+this.eh()):Math.min(Math.max(c,this.ea()),this.La());An(this,b,c)};
f.Pu=function(a){var b="start"==a.type;yj(this.b(),"goog-slider-dragging",b);yj(a.target.handle,"goog-slider-thumb-dragging",b);a=a.ty==this.gg;b?(this.dispatchEvent("k"),this.dispatchEvent(a?"g":"i")):(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j"))};
f.Lu=function(a){var b=!0;switch(a.keyCode){case 36:Bn(this,this.bb());break;case 35:Bn(this,this.La());break;case 33:Cn(this,this.Qi);break;case 34:Cn(this,-this.Qi);break;case 37:var c=this.Dg&&this.Hg()?1:-1;Cn(this,a.shiftKey?c*this.Qi:c*this.Xs);break;case 40:Cn(this,a.shiftKey?-this.Qi:-this.Xs);break;case 39:c=this.Dg&&this.Hg()?-1:1;Cn(this,a.shiftKey?c*this.Qi:c*this.Xs);break;case 38:Cn(this,a.shiftKey?this.Qi:this.Xs);break;default:b=!1}b&&a.preventDefault()};
f.Mu=function(a){this.b().focus&&this.b().focus();var b=a.target;Ih(this.Qa,b)||Ih(this.Jd,b)||(b="click"==a.type,b&&ya()<this.sv+this.QK||(b||(this.sv=ya()),this.XQ?Bn(this,Dn(this,a)):(this.mB(a),this.Ah=En(this,Dn(this,a)),this.TG="vertical"==this.jb?this.hv<this.Ah.offsetTop:this.hv>Fn(this,this.Ah)+this.Ah.offsetWidth,a=lh(this.b()),this.Rb().I(a,"mouseup",this.lB,!0).I(this.b(),"mousemove",this.mB),this.Ql||(this.Ql=new Vf(200),this.Rb().I(this.Ql,Wf,this.GG)),this.GG(),this.Ql.start())))};
f.EG=function(a){Cn(this,(0<a.detail?-1:1)*this.Xs);a.preventDefault()};f.GG=function(){var a;if("vertical"==this.jb){var b=this.hv,c=this.Ah.offsetTop;this.TG?b<c&&(a=Gn(this,this.Ah)+this.Qi):b>c+this.Ah.offsetHeight&&(a=Gn(this,this.Ah)-this.Qi)}else b=this.hv,c=Fn(this,this.Ah),this.TG?b>c+this.Ah.offsetWidth&&(a=Gn(this,this.Ah)+this.Qi):b<c&&(a=Gn(this,this.Ah)-this.Qi);ca(a)&&An(this,this.Ah,a)};
f.lB=function(){this.Ql&&this.Ql.stop();var a=lh(this.b());this.Rb().gc(a,"mouseup",this.lB,!0).gc(this.b(),"mousemove",this.mB)};function Hn(a,b){var c=ni(b,a.b());return"vertical"==a.jb?c.y:a.Dg&&a.Hg()?a.b().clientWidth-c.x:c.x}f.mB=function(a){this.hv=Hn(this,a)};function Dn(a,b){var c=a.bb(),d=a.La();if("vertical"==a.jb){var e=a.Qa.offsetHeight,g=a.b().clientHeight-e,e=Hn(a,b)-e/2;return(d-c)*(g-e)/g+c}e=a.Qa.offsetWidth;g=a.b().clientWidth-e;e=Hn(a,b)-e/2;return(d-c)*e/g+c}
function Gn(a,b){if(b==a.Qa)return a.nb.ea();if(b==a.Jd)return a.nb.ea()+a.nb.eh();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.ni=function(){return this.gg.ni()||this.gi.ni()};function Cn(a,b){Math.abs(b)<a.fk()&&(b=(0==b?0:0>b?-1:1)*a.fk());var c=Gn(a,a.Qa)+b,d=Gn(a,a.Jd)+b,c=od(c,a.bb(),a.La()-a.pv),d=od(d,a.bb()+a.pv,a.La());In(a,c,d-c)}
function An(a,b,c){var d=vn(a.nb,c);c=b==a.Qa?d:a.nb.ea();b=b==a.Jd?d:a.nb.ea()+a.nb.eh();c>=a.bb()&&b>=c+a.pv&&a.La()>=b&&In(a,c,b-c)}function In(a,b,c){a.bb()<=b&&b<=a.La()-c&&a.pv<=c&&c<=a.La()-b&&(b!=a.ea()||c!=a.eh())&&(a.nb.Ln=!0,a.nb.am(0),a.nb.aa(b),a.nb.am(c),a.nb.Ln=!1,a.FG())}f.bb=function(){return this.nb.bb()};f.$f=function(a){this.nb.$f(a)};f.La=function(){return this.nb.La()};f.Te=function(a){this.nb.Te(a)};function En(a,b){return b<=a.nb.ea()+a.nb.eh()/2?a.Qa:a.Jd}
f.FG=function(){this.xj();xn(this);this.dispatchEvent("change")};
f.xj=function(){if(this.Qa&&!this.Kr){var a=Jn(this,Gn(this,this.Qa)),b=Jn(this,Gn(this,this.Jd));if("vertical"==this.jb)this.Qa.style.top=a.y+"px",this.Jd.style.top=b.y+"px",this.Qc&&(a=Kn(b.y,a.y,this.Qa.offsetHeight),this.Qc.style.top=a.offset+"px",this.Qc.style.height=a.size+"px");else{var c=this.Dg&&this.Hg()?"right":"left";this.Qa.style[c]=a.x+"px";this.Jd.style[c]=b.x+"px";this.Qc&&(a=Kn(a.x,b.x,this.Qa.offsetWidth),this.Qc.style[c]=a.offset+"px",this.Qc.style.width=a.size+"px")}}};
function Kn(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function Jn(a,b){var c=new Zg;if(a.Qa){var d=a.bb(),e=a.La(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.jb?(d=a.b().clientHeight-a.Qa.offsetHeight,e=Math.round(e*d),c.x=Fn(a,a.Qa),c.y=d-e):(d=Math.round(e*(a.b().clientWidth-a.Qa.offsetWidth)),c.x=d,c.y=a.Qa.offsetTop)}return c}
function Bn(a,b){b=od(b,a.bb(),a.La());a.Kr&&a.ru.stop(!0);var c=new Ok,d,e=En(a,b),g=a.ea(),l=a.eh(),m=Gn(a,e),q=Jn(a,m);d=a.fk();Math.abs(b-m)<d&&(b=od(m+(b>m?d:-d),a.bb(),a.La()));An(a,e,b);m=Jn(a,Gn(a,e));d="vertical"==a.jb?[Fn(a,e),m.y]:[m.x,e.offsetTop];q=new Dk(e,[q.x,q.y],d,100);q.yl(a.Dg);c.add(q);a.Qc&&Ln(a,e,g,l,m,c);a.UD&&(e=a.UD.VX(g,b,100),A(e,function(a){c.add(a)}));a.ru=c;a.Rb().I(c,"end",a.wN);a.Kr=!0;c.play(!1)}f.sf=function(){return this.Kr};
function Ln(a,b,c,d,e,g){var l=Jn(a,c),m=Jn(a,c+d);c=l;d=m;b==a.Qa?c=e:d=e;"vertical"==a.jb?(b=Kn(m.y,l.y,a.Qa.offsetHeight),l=Kn(d.y,c.y,a.Qa.offsetHeight),e=new Dk(a.Qc,[Fn(a,a.Qc),b.offset],[Fn(a,a.Qc),l.offset],100),b=new Gk(a.Qc,b.size,l.size,100)):(b=Kn(l.x,m.x,a.Qa.offsetWidth),l=Kn(c.x,d.x,a.Qa.offsetWidth),e=new Dk(a.Qc,[b.offset,a.Qc.offsetTop],[l.offset,a.Qc.offsetTop],100),b=new Fk(a.Qc,b.size,l.size,100));e.yl(a.Dg);b.yl(a.Dg);g.add(e);g.add(b)}f.wN=function(){this.Kr=!1};
f.Bk=function(a){if(this.jb!=a){var b=this.oa(this.jb),c=this.oa(a);this.jb=a;this.b()&&(a=this.b(),tj(a,b)&&(wj(a,b),uj(a,c)),b=this.Dg&&this.Hg()?"right":"left",this.Qa.style[b]=this.Qa.style.top="",this.Jd.style[b]=this.Jd.style.top="",this.Qc&&(this.Qc.style[b]=this.Qc.style.top="",this.Qc.style.width=this.Qc.style.height=""),this.xj())}};f.$c=function(){return this.jb};
f.i=function(){wn.g.i.call(this);this.Ql&&this.Ql.k();delete this.Ql;this.ru&&this.ru.k();delete this.ru;delete this.Qa;delete this.Jd;this.Qc&&delete this.Qc;this.nb.k();delete this.nb;this.fc&&(this.fc.k(),delete this.fc);this.Kn&&(this.Kn.k(),delete this.Kn);this.gg&&(this.gg.k(),delete this.gg);this.gi&&(this.gi.k(),delete this.gi)};f.Xs=1;f.fk=function(){return this.nb.fk()};f.pj=function(a){this.nb.pj(a)};f.ea=function(){return this.nb.ea()};f.aa=function(a){An(this,this.Qa,a)};f.eh=function(){return this.nb.eh()};
f.am=function(a){An(this,this.Jd,this.nb.ea()+a)};f.Da=function(a){yi(this.b(),a);a&&this.xj()};function xn(a){var b=a.b();b&&(Bj(b,"valuemin",a.bb()),Bj(b,"valuemax",a.La()),Bj(b,"valuenow",a.ea()),Bj(b,"valuetext",a.BQ(a.ea())||""))}function zn(a,b){b?(a.Kn||(a.Kn=new rn(a.b())),a.Rb().I(a.Kn,"mousewheel",a.EG)):a.Rb().gc(a.Kn,"mousewheel",a.EG)}f.xd=function(a){this.Xd!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Xd=a,yn(this,a),a||this.lB(),yj(this.b(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Xd};function Fn(a,b){return a.Dg?Li(b):b.offsetLeft};function Mn(a){wn.call(this,a);this.nb.aa(this.bb());this.nb.am(this.La()-this.bb())}k(Mn,wn);Mn.prototype.oa=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};Mn.prototype.gn=function(a){a=this.da().C("div",a);Aj(a,"button");return a};
Mn.prototype.NE=function(){var a=nh(null,"goog-twothumbslider-value-thumb",this.b())[0],b=nh(null,"goog-twothumbslider-extent-thumb",this.b())[0],c=nh(null,"goog-twothumbslider-rangehighlight",this.b())[0];a||(a=this.gn("goog-twothumbslider-value-thumb"),this.b().appendChild(a));b||(b=this.gn("goog-twothumbslider-extent-thumb"),this.b().appendChild(b));c||(c=this.da().C("div","goog-twothumbslider-rangehighlight"),this.da().jz(c,a));this.Qa=a;this.Jd=b;this.Qc=c};function Nn(){ce.call(this);this.t="fibers";za(this,new md)}k(Nn,ce);h("X.fibers",Nn);U.A=function(){this.Tn=wh("div",{id:this.constructor.ID_PREFIX+"_"+r(),"class":this.constructor.gd});U.ib.call(this,"",this.Tn,!0);R(this.Lc,U.A.CSS.eL);this.Lc.style.marginTop="0px"};k(U.A,U.ib);h("nrg.ui.ZippyTree",U.A);U.A.Dw=5;U.A.ID_PREFIX="nrg.ui.ZippyTree";U.A.CSS_SUFFIX={eL:"rootnode"};U.A.aC=300;U.A.Iw="_nodeDepth";U.A.nt="_maxDepth";f=U.A.prototype;f.In=1;f.Bl=!1;f.uQ=!0;f.Ir=1;f.xy=0;f.Uv=null;f.Eh=null;f.RA=function(a){this.UE=a};f.Mr=function(){return 0===Dh(this.Xo).length};
f.yE=function(){this.Us(function(a){a.Hf.bd(!1)},this)};f.$q=function(){this.yE()};f.UN=function(){var a=[];this.Us(function(b){a.push(b)},this);return a};f.qG=function(){var a=[];w(this.Af,function(b){a.push(b)});return a};f.sn=function(){this.Us(function(a){a.Hf.bd(!0)},this)};f.Us=function(a,b){w(b.Af,function(b){a(b);this.Us(a,b)}.bind(this))};f.b=function(){return this.Tn};f.bd=function(a,b){b=null!=b?b:this;if(null!=b.Af[a]){var c=b.Af[a];c.Hf.bd(!0);return c}};
f.$v=function(a,b){b=null!=b?b:this;if(null!=b.Af[a]){var c=b.Af[a];c.Hf.bd(!1);return c}};f.Ly=function(a){var b=this,c=[];A(a,function(a){c.push(b.Af[a]);b=b.Af[a]}.bind(this));return c};f.Xg=function(a,b){!ia(a)||Hh(a)?On(this,a,b):A(a,function(a){this.Xg(a,b)}.bind(this))};function On(a,b,c){c?(c&&(c=ka(c)?[c]:c,c.length>a.In&&(a.In=c.length)),a.br(c,a,b)):Ah(a.Tn,b)}
f.br=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.Xo;if(0==a.length)Pn(this,e,c),null!=c&&Qn(this,c,d-2);else{0<a.length&&a.length>this.In&&(this.In=a.length);if(b.Af[a[0]])e=b.Af[a[0]];else{var g=a[0];e.style.opacity=this.Ir;var l=new U.ib(g,e,!1);b.Lc.parentNode==this.Tn&&2==this.Tn.childNodes.length&&(l.Lc.style.marginTop="0px");l.Lc.style.left="inherit";l.Lc.style.width="inherit";Rn(this,l);b.Af[g]=l;l.Lc.style.opacity=this.Ir;e.style.opacity=1;this.Bl&&Sn(this,l.Lc);this.dispatchEvent({type:"n",
Yf:l});e=l}Qn(this,e.Lc,d-1);this.br(1<a.length?a.slice(1):[],e,c,d+1)}};function Qn(a,b,c){b[U.A.nt]!=a.In&&(null==b[U.A.nt]&&(b[U.A.nt]=a.In),c=0>c?0:c,null!=b[U.A.Iw]||(b[U.A.Iw]=c),b.style.width=(100-c*U.A.Dw).toString()+"%",b.style.left=(c*U.A.Dw).toString()+"%")}function Rn(a,b){C(b,"d",function(){this.dispatchEvent({type:"d",Yf:b})}.bind(a));C(b,"f",function(){this.dispatchEvent({type:"f",Yf:b})}.bind(a));C(b,"e",function(){this.dispatchEvent({type:"e",Yf:b})}.bind(a))}
function Sn(a,b){(new Jk(b,a.xy)).play()}f.JS=function(){this.Bl&&1!=this.Eh.fa&&this.Eh.play()};f.jU=function(a){this.Ir=(this.Bl=!0===a)?0:1;this.xy=this.Bl?U.A.aC:0;this.Bl&&(Tn(this),this.Uv=[],this.Eh=new Ok,C(this.Eh,"end",this.wE.bind(this)))};
U.A.SN=function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Dh(a),d=b[U.ib.rt].toLowerCase(),e,g,l=c.length,m=0;m<l;m++){if(g=c[m],null!=g[U.ib.rt]&&(e=g[U.ib.rt].toLowerCase(),e=Na(d,e),0>e)){Ch(b,g);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)};
function Pn(a,b,c){c&&(Rk.zb(c,{position:"relative"}),c.style.opacity=a.Ir,null!=a.UE?a.UE(b,c):b.appendChild(c),Un(b),a.Bl?Sn(a,c,function(){this.dispatchEvent({type:"m"})}.bind(a)):a.dispatchEvent({type:"m"}))}function Un(a){var b=[],c=[],d=Dh(a),e=d.length;A(d,function(a){tj(a,U.ib.CSS.jt)?b.push(a):1==a.childNodes.length&&tj(a.childNodes[0],U.ib.CSS.Cj)&&c.push(a)});A(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}
U.A.prototype.wE=function(){for(this.Eh.k();this.Uv.length;)this.Eh.add(this.Uv[0]),Eb.splice.call(this.Uv,0,1);C(this.Eh,"end",this.wE.bind(this));this.Eh.play()};function Tn(a){null!=a.xI&&(U.gF(a.xI),delete a.xI);null!=a.Eh&&(U.py(a.Eh),delete a.Eh)}U.A.prototype.i=function(){U.A.g.i.call(this);S(this.Tn);this.Tn;Tn(this);delete this.In;delete this.Bl;delete this.uQ;delete this.Ir;delete this.xy};h("nrg.ui.ZippyTree.EventType",{RU:"m",UK:"n"});h("nrg.ui.ZippyTree.INDENT_PCT",U.A.Dw);
h("nrg.ui.ZippyTree.ID_PREFIX",U.A.ID_PREFIX);h("nrg.ui.ZippyTree.CSS_SUFFIX",U.A.CSS_SUFFIX);h("nrg.ui.ZippyTree.FADE_TIME",U.A.aC);h("nrg.ui.ZippyTree.NODE_DEPTH_KEY",U.A.Iw);h("nrg.ui.ZippyTree.MAX_DEPTH_KEY",U.A.nt);h("nrg.ui.ZippyTree.folderSorter",U.A.SN);h("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",U.A.prototype.RA);h("nrg.ui.ZippyTree.prototype.isEmpty",U.A.prototype.Mr);h("nrg.ui.ZippyTree.prototype.contractAll",U.A.prototype.yE);h("nrg.ui.ZippyTree.prototype.collapseAll",U.A.prototype.$q);
h("nrg.ui.ZippyTree.prototype.getAllNodes",U.A.prototype.UN);h("nrg.ui.ZippyTree.prototype.getTopLevelNodes",U.A.prototype.qG);h("nrg.ui.ZippyTree.prototype.expandAll",U.A.prototype.sn);h("nrg.ui.ZippyTree.prototype.traverse",U.A.prototype.Us);h("nrg.ui.ZippyTree.prototype.getElement",U.A.prototype.b);h("nrg.ui.ZippyTree.prototype.setExpanded",U.A.prototype.bd);h("nrg.ui.ZippyTree.prototype.setCollapsed",U.A.prototype.$v);h("nrg.ui.ZippyTree.prototype.getFolderNodes",U.A.prototype.Ly);
h("nrg.ui.ZippyTree.prototype.addContents",U.A.prototype.Xg);h("nrg.ui.ZippyTree.prototype.createBranch",U.A.prototype.br);h("nrg.ui.ZippyTree.prototype.playFx",U.A.prototype.JS);h("nrg.ui.ZippyTree.prototype.toggleFadeInFx",U.A.prototype.jU);h("nrg.ui.ZippyTree.prototype.disposeInternal",U.A.prototype.i);function Vn(){}k(Vn,sl);fa(Vn);Vn.prototype.C=function(a){var b=a.da().C("span",this.wn(a).join(" "));Wn(this,b,a.ll);return b};Vn.prototype.cc=function(a,b){b=Vn.g.cc.call(this,a,b);var c=sj(b),d=Xn;Mb(c,Yn(this,Zn))?d=Zn:Mb(c,Yn(this,$n))?d=$n:Mb(c,Yn(this,Xn))&&(d=Xn);a.ll=d;Bj(b,"checked",d==Zn?"mixed":d==$n?"true":"false");return b};Vn.prototype.ii=function(){return"checkbox"};
function Wn(a,b,c){if(b){var d=Yn(a,c);tj(b,d)||(w(ao,function(a){a=Yn(this,a);yj(b,a,a==d)},a),Bj(b,"checked",c==Zn?"mixed":c==$n?"true":"false"))}}Vn.prototype.oa=function(){return"goog-checkbox"};function Yn(a,b){var c=a.oa();if(b==$n)return c+"-checked";if(b==Xn)return c+"-unchecked";if(b==Zn)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function bo(a,b,c){c=c||Vn.qf();Hl.call(this,null,c,b);this.ll=ca(a)?a:Xn}k(bo,Hl);var $n=!0,Xn=!1,Zn=null,ao={LU:$n,yW:Xn,zW:Zn};f=bo.prototype;f.Nc=null;f.Tl=function(){return this.ll==$n};f.wh=function(a){a!=this.ll&&(this.ll=a,Wn(this.ec(),this.b(),this.ll))};f.yi=function(a){this.Fa?(this.Id(),this.Nc=a,this.Pb()):this.Nc=a};f.toggle=function(){this.wh(this.ll?Xn:$n)};
f.Pb=function(){bo.g.Pb.call(this);if(this.Cn){var a=this.Rb();this.Nc&&a.I(this.Nc,"click",this.Yy).I(this.Nc,"mouseover",this.Dn).I(this.Nc,"mouseout",this.Nu).I(this.Nc,"mousedown",this.aj).I(this.Nc,"mouseup",this.li);a.I(this.b(),"click",this.Yy)}this.Nc&&(this.Nc.id||(this.Nc.id=ej(this)+".lbl"),Bj(this.b(),"labelledby",this.Nc.id))};f.xd=function(a){bo.g.xd.call(this,a);if(a=this.b())a.tabIndex=this.isEnabled()?0:-1};
f.Yy=function(a){a.stopPropagation();var b=this.ll?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.ki=function(a){32==a.keyCode&&this.Yy(a);return!1};pl("goog-checkbox",function(){return new bo});function co(){ce.call(this);this.t="mesh";za(this,new md)}k(co,ce);h("X.mesh",co);V.a.c={};V.a.c.w=function(){U.S.call(this);this.hj=[];this.zh=[]};k(V.a.c.w,U.S);h("xiv.ui.ctrl.XtkController",V.a.c.w);V.a.c.w.ID_PREFIX="xiv.ui.ctrl.XtkController";V.a.c.w.CSS_SUFFIX={zK:"label",iK:"component"};V.a.c.w.qo=r();V.a.c.w.HE=function(){return wh("div",{id:"Label_"+r(),"class":V.a.c.w.CSS.zK})};V.a.c.w.wG=function(a){a=ia(a.file)?a.file[0]:a.file||a.name;return Tk(a)};
V.a.c.w.PO=function(a){if(a instanceof co)return"Meshes";if(a instanceof F)return"Volumes";if(a instanceof Nn)return"Fibers";if(a instanceof mn)return"Annotations"};V.a.c.w.Mg=function(a,b){b.DI([V.a.c.w.wG(a)])};f=V.a.c.w.prototype;f.Rl=!1;f.p=function(a){V.a.c.w.g.p.call(this,a)};f.yi=function(a){null==this.Nc&&(this.Nc=V.a.c.w.HE(),Ah(this.b(),this.Nc));this.Nc.innerHTML=a};f.xO=function(){return this.Nc};f.DI=function(a){ka(a)&&(a=[a]);this.ip=a};f.qO=function(){return this.ip};
f.gm=function(a){this.Xe=a};f.EP=function(){return this.Xe};f.Vn=function(a){a=this.O=a;this.O instanceof bj?(a=this.O.b(),this.O.Fa?this.O.b().parentNode!==this.b()&&this.O.b()!==this.b()&&this.b().appendChild(this.O.b()):this.O.p(this.b())):this.b().appendChild(a);null!=a&&R(a,V.a.c.w.CSS.iK)};f.HF=function(){return Qb(this.hj,this.zh)};f.FO=function(){return this.hj};f.bH=function(){return this.Rl};f.zT=function(a){this.Rl=a};f.jP=function(){return this.zh};f.bO=function(){return this.O};
f.ue=ea;f.zg=function(a,b,c){a=new a;a.p();a.yi(b);Ah(this.b(),a.b());null!=c&&C(a,"o",c);return a};f.update=function(){this.O==this?this.o():this.O.o&&this.O.o()};f.o=function(){this.O.o&&this.O!=this&&(window.console.log("UPDATE STYLE",this.O),this.O.o())};f.yx=function(a,b){var c=this.zg(b,"Color",function(b){a.color=b.color}.bind(this));V.a.c.w.Mg(a,c);this.zh.push(c);c[V.a.c.w.qo]=a;c.update()};
f.QD=function(a,b){var c=this.zg(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});V.a.c.w.Mg(a,c);this.zh.push(c);c.O.aa(1);c.O.o()};f.zx=function(a,b){var c=this.zg(b,"Visible",function(b){a.visible=b.checked});V.a.c.w.Mg(a,c);this.zh.push(c);c.O.wh(a.visible)};
f.i=function(){V.a.c.w.g.i.call(this);this[V.a.c.w.qo]=null;delete this.Rl;delete this.Xe;A(this.zh,function(a){bd(a);a.k()});Nb(this.zh);delete this.zh;A(this.hj,function(a){bd(a);a.k();controller=null});Nb(this.hj);delete this.hj;null!=this.O&&(bd(this.O),this.O instanceof bj?this.O.k():S(this.O),delete this.O);null!=this.ip&&(Nb(this.ip),delete this.ip);null!=this.Nc&&(S(this.Nc),delete this.Nc)};h("xiv.ui.ctrl.XtkController.ID_PREFIX",V.a.c.w.ID_PREFIX);
h("xiv.ui.ctrl.XtkController.CSS_SUFFIX",V.a.c.w.CSS_SUFFIX);h("xiv.ui.ctrl.XtkController.EventType",{KU:"o"});h("xiv.ui.ctrl.XtkController.OBJ_KEY",V.a.c.w.qo);h("xiv.ui.ctrl.XtkController.createLabel",V.a.c.w.HE);h("xiv.ui.ctrl.XtkController.getXObjLabel",V.a.c.w.wG);h("xiv.ui.ctrl.XtkController.getObjectCategory",V.a.c.w.PO);h("xiv.ui.ctrl.XtkController.setControllerFolders",V.a.c.w.Mg);h("xiv.ui.ctrl.XtkController.prototype.render",V.a.c.w.prototype.p);
h("xiv.ui.ctrl.XtkController.prototype.setLabel",V.a.c.w.prototype.yi);h("xiv.ui.ctrl.XtkController.prototype.getLabel",V.a.c.w.prototype.xO);h("xiv.ui.ctrl.XtkController.prototype.setFolders",V.a.c.w.prototype.DI);h("xiv.ui.ctrl.XtkController.prototype.getFolders",V.a.c.w.prototype.qO);h("xiv.ui.ctrl.XtkController.prototype.setXObj",V.a.c.w.prototype.gm);h("xiv.ui.ctrl.XtkController.prototype.getXObj",V.a.c.w.prototype.EP);h("xiv.ui.ctrl.XtkController.prototype.setComponent",V.a.c.w.prototype.Vn);
h("xiv.ui.ctrl.XtkController.prototype.getAllControllers",V.a.c.w.prototype.HF);h("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",V.a.c.w.prototype.FO);h("xiv.ui.ctrl.XtkController.prototype.isInitialized",V.a.c.w.prototype.bH);h("xiv.ui.ctrl.XtkController.prototype.setInitialized",V.a.c.w.prototype.zT);h("xiv.ui.ctrl.XtkController.prototype.getSubControllers",V.a.c.w.prototype.jP);h("xiv.ui.ctrl.XtkController.prototype.getComponent",V.a.c.w.prototype.bO);
h("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",V.a.c.w.prototype.ue);h("xiv.ui.ctrl.XtkController.prototype.createController",V.a.c.w.prototype.zg);h("xiv.ui.ctrl.XtkController.prototype.update",V.a.c.w.prototype.update);h("xiv.ui.ctrl.XtkController.prototype.updateStyle",V.a.c.w.prototype.o);h("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",V.a.c.w.prototype.yx);h("xiv.ui.ctrl.XtkController.prototype.add_opacity",V.a.c.w.prototype.QD);
h("xiv.ui.ctrl.XtkController.prototype.add_visible",V.a.c.w.prototype.zx);h("xiv.ui.ctrl.XtkController.prototype.disposeInternal",V.a.c.w.prototype.i);V.a.c.Fc=function(){V.a.c.w.call(this)};k(V.a.c.Fc,V.a.c.w);h("xiv.ui.ctrl.Histogram",V.a.c.Fc);V.a.c.Fc.ID_PREFIX="xiv.ui.ctrl.Histogram";V.a.c.Fc.CSS_SUFFIX={cK:"canvas",BK:"linecanvas",DK:"max",LK:"min"};V.a.c.Fc.LEVEL_CUTOFF=.99;f=V.a.c.Fc.prototype;f.XP=.95;f.Wf=null;f.Xl=null;f.nw=null;f.Yr=null;f.sw=null;f.dt=null;f.NM="rgb(40,40,40)";
f.p=function(a){V.a.c.Fc.g.p.call(this,a);this.Vn(this);this.kl=wh("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+r(),"class":this.constructor.CSS.cK});this.b().appendChild(this.kl);this.en=this.kl.getContext("2d");this.en.fillStyle=this.NM;this.pk=wh("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+r(),"class":this.constructor.CSS.BK});this.b().appendChild(this.pk);this.gj=this.pk.getContext("2d");this.Xr=wh("div",{id:this.constructor.ID_PREFIX+"_Max_"+r(),"class":this.constructor.CSS.DK},
"1000");this.b().appendChild(this.Xr);this.Zr=wh("div",{id:this.constructor.ID_PREFIX+"_Min_"+r(),"class":this.constructor.CSS.LK},"-1000");this.b().appendChild(this.Zr)};
function eo(a){if(null==a.Wf){var b=0,c=a.Xe.max;A(a.Xe.SG,function(a){A(a,function(a){A(a,function(a){if(null==this.Wf)for(this.Wf=[];b<=c;b++)this.Wf.push(0);this.Wf[parseInt(a)]++;this.nw++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Wf){var d;null==a.Xl&&(a.Xl=[],a.Yr=0,A(a.Wf,function(a){d=a/this.nw;this.Xl.push(d);this.Yr=Math.max(this.Yr,d)}.bind(a)))}}}
f.jF=function(){if(null!=this.Xe){var a=ui(this.kl),b=a.width,a=a.height;this.kl.height=a;this.kl.width=b;this.pk.height=a;this.pk.width=b;eo(this);if(null!=this.Wf)for(var b=Math.round(b/this.Xe.Fi),b=0<b?b:1,c=this.XP/this.Yr,d,e=0,g=this.Xl.length;e<g;e++)d=this.Xl[e]*c*a,this.en.fillRect(b*e,a,b,-Math.round(d))}};f.cG=function(a){if(null!=this.Wf)for(var b=0,c=0,d=this.Wf.length;c<d;c++)if(b+=this.Wf[c],b/this.nw>=a)return c};
f.kF=function(){if(null!=this.Xe){var a=ui(this.pk),b=a.width,a=a.height;this.pk.width=b;var c;c=0==this.km&&0<this.Ck?Math.round(this.dt/this.Ck*b):Math.round(this.dt/this.km*b);b=0==this.Ck?0:Math.round(this.sw/this.Ck*b);this.gj.strokeStyle="gray";this.gj.moveTo(c,a);this.gj.lineTo(b,0);this.gj.lineWidth=.5;this.gj.stroke();b=c+(b-c)/2;this.gj.moveTo(b,a);this.gj.lineTo(b,a-20);this.gj.lineWidth=.5;this.gj.stroke()}};f.update=function(){this.jF();this.KJ();this.kF()};
f.KJ=function(){null!=this.Xe&&(null==this.km&&(this.km=parseInt(this.Xe.Bj),this.Ck=parseInt(this.Xe.Fi),this.km=isNaN(this.km)?null:this.km,this.Ck=isNaN(this.Ck)?null:this.Ck,this.dt=this.km,this.sw=this.Ck),this.dt=parseInt(this.Xe.Bj),this.sw=parseInt(this.Xe.Fi),this.Zr.innerHTML=this.dt,this.Xr.innerHTML=this.sw)};
f.i=function(){V.a.c.Fc.g.i.call(this);null!=this.Xr&&(S(this.Xr),delete this.Xr);null!=this.Zr&&(S(this.Zr),delete this.Zr);null!=this.kl&&(S(this.kl),delete this.kl);null!=this.pk&&(S(this.pk),delete this.pk);null!=this.Wf&&(Nb(this.Wf),delete this.Wf);null!=this.Xl&&(Nb(this.Xl),delete this.Xl);delete this.nw;delete this.Yr;delete this.en;delete this.gj;delete this.km;delete this.Ck};h("xiv.ui.ctrl.Histogram.EventType",{});h("xiv.ui.ctrl.Histogram.ID_PREFIX",V.a.c.Fc.ID_PREFIX);
h("xiv.ui.ctrl.Histogram.CSS_SUFFIX",V.a.c.Fc.CSS_SUFFIX);h("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",V.a.c.Fc.LEVEL_CUTOFF);h("xiv.ui.ctrl.Histogram.prototype.render",V.a.c.Fc.prototype.p);h("xiv.ui.ctrl.Histogram.prototype.draw",V.a.c.Fc.prototype.jF);h("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",V.a.c.Fc.prototype.cG);h("xiv.ui.ctrl.Histogram.prototype.drawLine",V.a.c.Fc.prototype.kF);h("xiv.ui.ctrl.Histogram.prototype.update",V.a.c.Fc.prototype.update);
h("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",V.a.c.Fc.prototype.KJ);h("xiv.ui.ctrl.Histogram.prototype.disposeInternal",V.a.c.Fc.prototype.i);U.ba=function(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);U.S.call(this);this.cF=a;this.Zl=b;this.Xq=null;this.Xb=new Mi(this.b());this.dw()};k(U.ba,U.S);h("nrg.ui.ResizeDragger",U.ba);U.ba.ID_PREFIX="nrg.ui.ResizeDragger";U.ba.CSS_SUFFIX={};U.ba.eq=500;f=U.ba.prototype;f.Ci=null;f.kk=null;f.bp=null;f.jr=null;f.Wi=null;f.bk=null;f.xu=null;f.ir=null;f.offsetX=0;f.QI=function(a){this.offsetX=a};f.offsetY=0;f.ET=function(a){this.offsetY=a};f.Fb=null;f.ik=null;f.cb=null;
f.wf=null;f.$a=null;f.rd=null;f.sf=!1;f.Xf=new bh(10,10);f.Me=function(){return this.Xq};f.zk=function(a){this.Xq=a};f.RF=function(){return this.Xb};f.PF=function(){return this.cF};f.Ne=function(){return this.b()};
f.om=function(){this.ik=ui(this.b());this.Fb=fi(this.b());this.Ci=-1*this.ik.height/2+this.offsetY;this.kk=-1*this.ik.width/2+this.offsetX;this.Xb.ni()||this.sf||(this.cb=zb(fi(this.Zl)),this.wf=zb(ui(this.Zl)),this.cb.left=this.cb.x,this.cb.top=this.cb.y,this.cb.right=this.cb.x+this.wf.width,this.cb.bottom=this.cb.y+this.wf.height,this.$a=zb(fi(this.Xq)),this.rd=zb(ui(this.Xq)),this.$a.left=this.$a.x,this.$a.top=this.$a.y,this.$a.right=this.$a.x+this.rd.width,this.$a.bottom=this.$a.y+this.rd.height,
this.constructor.Zg&&this.constructor.Zg.bind(this)())};f.MI=function(a){return this.Xf=a};f.dw=function(){C(this.Xb,"start",this.sA.bind(this));C(this.Xb,"drag",this.ri.bind(this));C(this.Xb,"end",this.rA.bind(this))};f.sA=function(){this.dispatchEvent({type:"start_resize"})};f.ri=function(){this.om();this.dispatchEvent({type:"resize",lT:this.cb,wf:this.wf,BM:this.$a,rd:this.rd});null!=this.constructor.vf&&this.constructor.vf.bind(this)()};f.rA=function(){this.dispatchEvent({type:"end_resize"})};
f.update=function(){this.Xb.ni()||this.sf||this.om()};f.gh=function(){};f.yh=function(a,b,c){this.om();a=this.gh(a);ma(c)&&0===c?Zh(this.b(),a.end):fo(this,a.start,a.end,b,c)};function fo(a,b,c,d,e){a.jm=new Dk(a.b(),[b.x,b.y],[c.x,c.y],ma(e)?e:U.ba.eq,Sk);C(a.jm,"begin",function(){this.sf=!0;this.sA()}.bind(a));C(a.jm,"animate",a.ri.bind(a));C(a.jm,"end",function(){this.sf=!1;this.jm.k();bd(this.jm);this.jm.ah();this.jm=null;di(this.b(),c);this.rA();d&&d()}.bind(a));a.jm.play()}
f.i=function(){delete this.KY;delete this.LY;delete this.kk;delete this.bp;delete this.jr;delete this.Wi;delete this.bk;delete this.xu;delete this.ir;delete this.sf;wb(this.Xf);delete this.Xf;delete this.Zl;delete this.Xq;wb(this.Fb);delete this.Fb;wb(this.ik);delete this.ik;wb(this.cb);delete this.cb;wb(this.wf);delete this.wf;wb(this.$a);delete this.$a;wb(this.rd);delete this.rd;S(this.Xb.handle);this.Xb.handle=null;bd(this.Xb);this.Xb.k();delete this.Xb;delete this.cF};
h("nrg.ui.ResizeDragger.EventType",{Mw:"resize",cL:"start_resize",bL:"end_resize"});h("nrg.ui.ResizeDragger.ID_PREFIX",U.ba.ID_PREFIX);h("nrg.ui.ResizeDragger.CSS_SUFFIX",U.ba.CSS_SUFFIX);h("nrg.ui.ResizeDragger.ANIM_MED",U.ba.eq);h("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",U.ba.prototype.Ci);h("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",U.ba.prototype.kk);h("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",U.ba.prototype.bp);h("nrg.ui.ResizeDragger.prototype.draggerLimitRight",U.ba.prototype.jr);
h("nrg.ui.ResizeDragger.prototype.draggerLimitTop",U.ba.prototype.Wi);h("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",U.ba.prototype.bk);h("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",U.ba.prototype.xu);h("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",U.ba.prototype.ir);h("nrg.ui.ResizeDragger.prototype.offsetX",U.ba.prototype.offsetX);h("nrg.ui.ResizeDragger.prototype.setOffsetX",U.ba.prototype.QI);h("nrg.ui.ResizeDragger.prototype.offsetY",U.ba.prototype.offsetY);
h("nrg.ui.ResizeDragger.prototype.setOffsetY",U.ba.prototype.ET);h("nrg.ui.ResizeDragger.prototype.handlePos",U.ba.prototype.Fb);h("nrg.ui.ResizeDragger.prototype.handleSize",U.ba.prototype.ik);h("nrg.ui.ResizeDragger.prototype.resizeePos",U.ba.prototype.cb);h("nrg.ui.ResizeDragger.prototype.resizeeSize",U.ba.prototype.wf);h("nrg.ui.ResizeDragger.prototype.boundaryPos",U.ba.prototype.$a);h("nrg.ui.ResizeDragger.prototype.boundarySize",U.ba.prototype.rd);
h("nrg.ui.ResizeDragger.prototype.isAnimating",U.ba.prototype.sf);h("nrg.ui.ResizeDragger.prototype.minSize",U.ba.prototype.Xf);h("nrg.ui.ResizeDragger.prototype.getBoundaryElement",U.ba.prototype.Me);h("nrg.ui.ResizeDragger.prototype.setBoundaryElement",U.ba.prototype.zk);h("nrg.ui.ResizeDragger.prototype.getDragger",U.ba.prototype.RF);h("nrg.ui.ResizeDragger.prototype.getDirection",U.ba.prototype.PF);h("nrg.ui.ResizeDragger.prototype.getHandle",U.ba.prototype.Ne);
h("nrg.ui.ResizeDragger.prototype.updateTrackingValues",U.ba.prototype.om);h("nrg.ui.ResizeDragger.prototype.setMinSize",U.ba.prototype.MI);h("nrg.ui.ResizeDragger.prototype.onResizeStart",U.ba.prototype.sA);h("nrg.ui.ResizeDragger.prototype.onResize",U.ba.prototype.ri);h("nrg.ui.ResizeDragger.prototype.onResizeEnd",U.ba.prototype.rA);h("nrg.ui.ResizeDragger.prototype.update",U.ba.prototype.update);h("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",U.ba.prototype.gh);
h("nrg.ui.ResizeDragger.prototype.slideToLimits",U.ba.prototype.yh);h("nrg.ui.ResizeDragger.prototype.disposeInternal",U.ba.prototype.i);U.kd=function(a){U.ba.call(this,"right",a)};k(U.kd,U.ba);h("nrg.ui.ResizeDraggerRight",U.kd);U.kd.ID_PREFIX="nrg.ui.ResizeDraggerRight";U.kd.CSS_SUFFIX={};U.kd.Zg=function(){this.bp=this.cb.left+this.Xf.width+this.kk;this.jr=this.$a.right+this.kk;this.xu=this.jr-this.bp};h("nrg.ui.ResizeDraggerRight.calculateDraggerLimits",U.kd.Zg);U.kd.vf=function(){si(this.Zl,Math.min(Math.max(this.wf.width+(this.sf?this.Fb.x-this.cb.right+this.kk:this.Xb.clientX-this.Xb.jB),this.Xf.width),this.rd.width))};
h("nrg.ui.ResizeDraggerRight.resizeMethod",U.kd.vf);U.kd.prototype.update=function(a){this.Xb.ni()||this.sf||(U.kd.g.update.call(this,a),Oi(this.Xb,new dh(this.bp,this.cb.y,this.xu,0)),di(this.b(),this.cb.right+this.kk,this.cb.y),ti(this.b(),this.wf.height))};U.kd.prototype.gh=function(a){return{start:new Zg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Zg(this.bp,this.Fb.y):new Zg(this.jr,this.Fb.y)}};h("nrg.ui.ResizeDraggerRight.ID_PREFIX",U.kd.ID_PREFIX);h("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",U.kd.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerRight.calculateDraggerLimits",U.kd.Zg);h("nrg.ui.ResizeDraggerRight.resizeMethod",U.kd.vf);h("nrg.ui.ResizeDraggerRight.prototype.update",U.kd.prototype.update);h("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",U.kd.prototype.gh);U.bf=function(a){U.ba.call(this,"right",a)};k(U.bf,U.ba);h("nrg.ui.ResizeDraggerLeft",U.bf);U.bf.ID_PREFIX="nrg.ui.ResizeDraggerLeft";U.bf.CSS_SUFFIX={};U.bf.vf=function(){si(this.Zl,Math.min(Math.max(this.wf.width+(this.cb.x-this.Fb.x),this.Xf.width),this.rd.width));di(this.b(),this.Fb.x,this.cb.y)};h("nrg.ui.ResizeDraggerLeft.resizeMethod",U.bf.vf);
U.bf.prototype.update=function(a){this.Xb.ni()||this.sf||(U.bf.g.update.call(this,a),Oi(this.Xb,new dh(this.$a.x-this.ik.width,this.$a.y,this.rd.width-this.Xf.width-this.ik.width,0)),di(this.b(),this.cb.x-this.ik.width,this.cb.y))};U.bf.prototype.gh=function(a){return{start:new Zg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Zg(this.$a.x+this.Xf.width,this.Fb.y):new Zg(this.$a.x+this.rd.width-this.Xf.width,this.Fb.y)}};h("nrg.ui.ResizeDraggerLeft.ID_PREFIX",U.bf.ID_PREFIX);
h("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",U.bf.CSS_SUFFIX);h("nrg.ui.ResizeDraggerLeft.resizeMethod",U.bf.vf);h("nrg.ui.ResizeDraggerLeft.prototype.update",U.bf.prototype.update);h("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",U.bf.prototype.gh);U.ld=function(a){U.ba.call(this,"right",a)};k(U.ld,U.ba);h("nrg.ui.ResizeDraggerTop",U.ld);U.ld.ID_PREFIX="nrg.ui.ResizeDraggerTop";U.ld.CSS_SUFFIX={};U.ld.Zg=function(){this.Wi=this.$a.top-this.Ci;this.bk=this.cb.bottom-this.Xf.height+this.Ci;this.ir=this.bk-this.Wi};h("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",U.ld.Zg);U.ld.vf=function(){var a=this.Fb.y-this.Ci,b=this.wf.height+(this.sf?this.cb.y-a:this.Xb.kB-this.Xb.clientY);this.Zl.style.top=a.toString()+"px";ti(this.Zl,Math.max(b,this.Xf.height))};
h("nrg.ui.ResizeDraggerTop.resizeMethod",U.ld.vf);U.ld.prototype.update=function(){this.Xb.ni()||this.sf||(U.ld.g.update.call(this),Oi(this.Xb,new dh(this.$a.x,this.Wi,0,this.ir)),di(this.b(),this.cb.x,this.cb.y+this.Ci))};U.ld.prototype.gh=function(a){return{start:new Zg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Zg(this.Fb.x,this.bk):new Zg(this.Fb.x,this.Wi)}};h("nrg.ui.ResizeDraggerTop.ID_PREFIX",U.ld.ID_PREFIX);h("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",U.ld.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",U.ld.Zg);h("nrg.ui.ResizeDraggerTop.resizeMethod",U.ld.vf);h("nrg.ui.ResizeDraggerTop.prototype.update",U.ld.prototype.update);h("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",U.ld.prototype.gh);U.Rd=function(a){U.ba.call(this,"right",a)};k(U.Rd,U.ba);h("nrg.ui.ResizeDraggerTopRight",U.Rd);U.Rd.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";U.Rd.CSS_SUFFIX={};U.Rd.prototype.om=function(){U.Rd.g.om.call(this);this.Xb.ni()||this.sf||(U.kd.Zg.bind(this)(),U.ld.Zg.bind(this)())};U.Rd.prototype.ri=function(){U.Rd.g.ri.call(this);U.kd.vf.bind(this)();U.ld.vf.bind(this)()};
U.Rd.prototype.update=function(a){this.Xb.ni()||this.sf||(U.Rd.g.update.call(this,a),Oi(this.Xb,new dh(this.$a.x+this.kk,this.$a.y+this.Ci,this.rd.width,this.rd.height)),di(this.b(),this.cb.right+this.kk,this.cb.y+this.Ci))};
U.Rd.prototype.gh=function(a){var b=new Zg(this.Fb.x,this.Fb.y),c;"TOP_LEFT"==a?c=new Zg(this.$a.x,this.$a.y):"TOP_RIGHT"==a?c=new Zg(this.$a.x+this.rd.width,this.$a.y):"BOTTOM_RIGHT"==a?c=new Zg(this.$a.x+this.rd.width,this.$a.y+this.rd.height):"BOTTOM_LEFT"==a&&(c=new Zg(this.$a.x,this.$a.y+this.rd.height));return{start:b,end:c}};h("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",U.Rd.ID_PREFIX);h("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",U.Rd.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",U.Rd.prototype.om);h("nrg.ui.ResizeDraggerTopRight.prototype.onResize",U.Rd.prototype.ri);h("nrg.ui.ResizeDraggerTopRight.prototype.update",U.Rd.prototype.update);h("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",U.Rd.prototype.gh);U.Qd=function(a){U.ba.call(this,"right",a)};k(U.Qd,U.ba);h("nrg.ui.ResizeDraggerBottom",U.Qd);U.Qd.ID_PREFIX="nrg.ui.ResizeDraggerBottom";U.Qd.CSS_SUFFIX={};U.Qd.Zg=function(){this.Wi=this.cb.top+this.Xf.height+this.Ci;this.bk=this.$a.bottom+this.Ci;this.ir=this.bk-this.Wi};h("nrg.ui.ResizeDraggerBottom.calculateDraggerLimits",U.Qd.Zg);U.Qd.vf=function(){ti(this.Zl,Math.max(this.wf.height+(this.Fb.y-this.cb.bottom),this.Xf.height))};h("nrg.ui.ResizeDraggerBottom.resizeMethod",U.Qd.vf);
U.Qd.prototype.update=function(){this.Xb.ni()||this.sf||(U.Qd.g.update.call(this),Oi(this.Xb,new dh(this.$a.x,this.Wi,0,this.bk)),di(this.b(),this.cb.x,this.cb.bottom+this.Ci))};U.Qd.prototype.gh=function(a){return{start:new Zg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Zg(this.Fb.x,this.Wi):new Zg(this.Fb.x,this.bk)}};h("nrg.ui.ResizeDraggerBottom.ID_PREFIX",U.Qd.ID_PREFIX);h("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",U.Qd.CSS_SUFFIX);h("nrg.ui.ResizeDraggerBottom.calculateDraggerLimits",U.Qd.Zg);
h("nrg.ui.ResizeDraggerBottom.resizeMethod",U.Qd.vf);h("nrg.ui.ResizeDraggerBottom.prototype.update",U.Qd.prototype.update);h("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",U.Qd.prototype.gh);U.qa=function(a,b){U.S.call(this);this.q=mh(a);this.Cf={};this.Np(b||U.qa.XX)};k(U.qa,U.S);h("nrg.ui.Resizable",U.qa);U.qa.ID_PREFIX="nrg.ui.Resizable";U.qa.CSS_SUFFIX={HU:"boundary"};U.qa.it="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" ");U.qa.SB=["RIGHT","BOTTOM"];U.qa.kK=new dh(0,0,600,600);U.qa.TB=20;U.qa.UB=20;this.AM={TOP:4,LEFT:4,RIGHT:4,BOTTOM:4};f=U.qa.prototype;
f.xT=function(a,b){this.QX(a);if(0>b)throw Error("Threshold must be greater than zero!");this.AM[a]=b};f.rv=U.qa.UB;f.qv=U.qa.TB;f.Ne=function(a){return this.Cf[a].Ne()};f.lp=function(a){return this.Cf[a]};f.sO=function(){var a=[];A(qb(this.Cf),function(b){a.push(b.Ne())});return a};f.Me=function(){return this.$h};f.zk=function(a){this.$h=a;if(this.$h.parentNode!==this.q.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};
f.LI=function(a){this.qv=a};f.NI=function(a){this.rv=a};f.LO=function(){return this.qv};f.MO=function(){return this.rv};f.Np=function(a){a=a||"DEFAULT";ka(a)&&(a="ALL"==a.toUpperCase()?U.qa.it:"DEFAULT"==a.toUpperCase()?U.qa.SB:[a]);go(this);A(a,function(a){if(!ka(a))throw Error("String required!");if(!Mb(U.qa.it,a))throw Error("Invalid direction: ",a);this.BD(a)}.bind(this))};f.Ox=function(a){if(!Mb(U.qa.it,a))throw Error("Invalid draggerDir '"+a);};
f.WP=function(a){this.Ox(a);if(!this.Cf[a])throw Error("No ResizeDragger for "+a);};f.yh=function(a,b,c,d){a=a.toUpperCase();this.Ox(a);this.update();this.Cf[a].yh(b,c,d)};
U.qa.KE=function(a,b){switch(a){case "TOP":return new U.ld(b);case "BOTTOM":return new U.Qd(b);case "LEFT":return new U.bf(b);case "RIGHT":return new U.kd(b);case "TOP_RIGHT":return new U.Rd(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}};f=U.qa.prototype;
f.BD=function(a){if(a in this.Cf)throw Error("Resize direction "+a+" already in use.");this.Cf[a]=U.qa.KE(a,this.q);C(this.Cf[a],"start_resize",this.TR.bind(this));C(this.Cf[a],"resize",this.On.bind(this));C(this.Cf[a],"end_resize",this.SR.bind(this));this.update()};f.update=function(){if(null!=this.$h){var a=new bh(this.rv,this.qv);w(this.Cf,function(b){this.$h&&this.$h.parentNode&&Ah(this.$h.parentNode,b.Ne());b.Me()!==this.$h&&b.zk(this.$h);b.MI(a);b.om();b.update()}.bind(this))}};f.TR=function(){this.dispatchEvent({type:"resize_start"})};
f.On=function(a){this.dispatchEvent({type:"resize",lT:a.cb,wf:a.wf,BM:a.$a,rd:a.rd})};f.SR=function(){this.update();this.dispatchEvent({type:"resize_end"})};function go(a){w(a.Cf,function(a){a&&(bd(a),a.k())});wb(a.Cf)}f.i=function(){U.qa.g.i.call(this);go(this);delete this.Cf;this.$h&&(S(this.$h.parentNode),delete this.$h)};h("nrg.ui.Resizable.EventType",{Mw:"resize",cL:"resize_start",bL:"resize_end"});h("nrg.ui.Resizable.ID_PREFIX",U.qa.ID_PREFIX);h("nrg.ui.Resizable.CSS_SUFFIX",U.qa.CSS_SUFFIX);
h("nrg.ui.Resizable.DIRECTIONS",U.qa.it);h("nrg.ui.Resizable.DEFAULT_DIRECTIONS",U.qa.SB);h("nrg.ui.Resizable.DEFAULT_LIMITS",U.qa.kK);h("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",U.qa.TB);h("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",U.qa.UB);h("nrg.ui.Resizable.createResizeDragger",U.qa.KE);h("nrg.ui.Resizable.prototype.setBoundThreshold",U.qa.prototype.xT);h("nrg.ui.Resizable.prototype.getHandle",U.qa.prototype.Ne);h("nrg.ui.Resizable.prototype.getResizeDragger",U.qa.prototype.lp);
h("nrg.ui.Resizable.prototype.getHandles",U.qa.prototype.sO);h("nrg.ui.Resizable.prototype.getBoundaryElement",U.qa.prototype.Me);h("nrg.ui.Resizable.prototype.setBoundaryElement",U.qa.prototype.zk);h("nrg.ui.Resizable.prototype.setMinHeight",U.qa.prototype.LI);h("nrg.ui.Resizable.prototype.setMinWidth",U.qa.prototype.NI);h("nrg.ui.Resizable.prototype.getMinHeight",U.qa.prototype.LO);h("nrg.ui.Resizable.prototype.getMinWidth",U.qa.prototype.MO);h("nrg.ui.Resizable.prototype.setResizeDirections",U.qa.prototype.Np);
h("nrg.ui.Resizable.prototype.checkDirectionValid",U.qa.prototype.Ox);h("nrg.ui.Resizable.prototype.hasDragger",U.qa.prototype.WP);h("nrg.ui.Resizable.prototype.slideToLimits",U.qa.prototype.yh);h("nrg.ui.Resizable.prototype.addResizeDirection",U.qa.prototype.BD);h("nrg.ui.Resizable.prototype.update",U.qa.prototype.update);h("nrg.ui.Resizable.prototype.disposeInternal",U.qa.prototype.i);V.a.e.fe=function(a){U.S.call(this);this.Ae=a};k(V.a.e.fe,U.S);h("xiv.ui.layouts.LayoutFrame",V.a.e.fe);V.a.e.fe.ID_PREFIX="xiv.ui.layouts.LayoutFrame";V.a.e.fe.CSS_SUFFIX={};f=V.a.e.fe.prototype;f.Eg=function(){return this.Ae};f.Pd=null;f.ja=function(){return this.tt};f.Np=function(a){this.tt=this.tt?this.tt:new U.qa(this.b());this.tt.Np(a)};f.i=function(){V.a.e.fe.g.i.call(this);delete this.Ae};h("xiv.ui.layouts.LayoutFrame.EventType",{});h("xiv.ui.layouts.LayoutFrame.ID_PREFIX",V.a.e.fe.ID_PREFIX);
h("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",V.a.e.fe.CSS_SUFFIX);h("xiv.ui.layouts.LayoutFrame.prototype.getTitle",V.a.e.fe.prototype.Eg);h("xiv.ui.layouts.LayoutFrame.prototype.getResizable",V.a.e.fe.prototype.ja);h("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",V.a.e.fe.prototype.Np);h("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",V.a.e.fe.prototype.i);V.a.e.Hb=function(){if(!this.constructor.Ra)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");U.S.call(this);this.l={}};k(V.a.e.Hb,U.S);h("xiv.ui.layouts.Layout",V.a.e.Hb);var ho="Slider_"+r(),io="FrameDisplay_"+r(),jo="ZoomDisplay_"+r(),ko="Crosshairs_"+r(),lo={Xa:ho,zf:io,Mh:jo,zd:ko};V.a.e.Hb.ID_PREFIX="xiv.ui.layouts.Layout";
V.a.e.Hb.CSS_SUFFIX={};f=V.a.e.Hb.prototype;f.ad=20;f.ye=20;f.BT=function(a){this.ye=a};f.CT=function(a){this.ad=a};f.BO=function(){return this.l};f.Oy=function(a){return this.l[a]};f.AO=function(a){window.console.log(a,this.l[a]);var b={};w(lo,function(c){b[c]=this.l[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};f.Eg=function(){return this.constructor.Ra};f.zD=function(a){this.l=this.l?this.l:{};this.l[a.Eg()]=a};f.Vi=function(){this.dispatchEvent({type:"p"})};
f.NA=function(){w(this.vr(),function(a){null!=a.Xa&&(a.Xa.k(),delete a.Xa);null!=a.zd&&(a.zd.k(),delete a.zd);null!=a.zf&&(a.zf.k(),delete a.zf);null!=a.Mh&&(a.Mh.k(),delete a.Mh)})};f.Zs=function(){w(this.vr(),function(a){null!=a.Xa&&(a.Xa.o(),a.Xa.aa(a.Xa.ea()));null!=a.zd&&a.zd.o();null!=a.zf&&a.zf.o();null!=a.Mh&&a.Mh.o()})};f.o=function(){V.a.e.Hb.g.o.call(this);this.Vi()};f.i=function(){V.a.e.Hb.g.i.call(this);delete this.ye;delete this.ad;U.tu(this.CK);delete this.CK};
h("xiv.ui.layouts.Layout.EventType",{Mw:"p"});h("xiv.ui.layouts.Layout.INTERACTORS",lo);h("xiv.ui.layouts.Layout.ID_PREFIX",V.a.e.Hb.ID_PREFIX);h("xiv.ui.layouts.Layout.CSS_SUFFIX",V.a.e.Hb.CSS_SUFFIX);h("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",V.a.e.Hb.prototype.BT);h("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",V.a.e.Hb.prototype.CT);h("xiv.ui.layouts.Layout.prototype.getLayoutFrames",V.a.e.Hb.prototype.BO);h("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",V.a.e.Hb.prototype.Oy);
h("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",V.a.e.Hb.prototype.AO);h("xiv.ui.layouts.Layout.prototype.getTitle",V.a.e.Hb.prototype.Eg);h("xiv.ui.layouts.Layout.prototype.addLayoutFrame",V.a.e.Hb.prototype.zD);h("xiv.ui.layouts.Layout.prototype.dispatchResize",V.a.e.Hb.prototype.Vi);h("xiv.ui.layouts.Layout.prototype.removeAllInteractors",V.a.e.Hb.prototype.NA);h("xiv.ui.layouts.Layout.prototype.updateInteractors",V.a.e.Hb.prototype.Zs);
h("xiv.ui.layouts.Layout.prototype.updateStyle",V.a.e.Hb.prototype.o);h("xiv.ui.layouts.Layout.prototype.disposeInternal",V.a.e.Hb.prototype.i);V.a.e.K.Nm=function(){V.a.e.K.wc.call(this)};k(V.a.e.K.Nm,V.a.e.K.wc);h("xiv.ui.layouts.interactors.ZoomDisplay",V.a.e.K.Nm);V.a.e.K.Nm.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";V.a.e.K.Nm.prototype.yj=function(){this.fi.innerHTML="Zoom level:&nbsp"+this.yb.value+"%"};h("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",V.a.e.K.Nm.ID_PREFIX);h("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",V.a.e.K.Nm.prototype.yj);function mo(a,b){wn.call(this,a,b);this.nb.am(0)}k(mo,wn);mo.prototype.oa=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};mo.prototype.NE=function(){var a=this.b(),b=nh(null,"goog-slider-thumb",a)[0];b||(b=this.gn(),a.appendChild(b));this.Qa=this.Jd=b};mo.prototype.gn=function(){var a=this.da().C("div","goog-slider-thumb");Aj(a,"button");return a};U.D=function(a){mo.call(this);this.constructor.jo=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.gd=this.constructor.jo;U.S.prototype.ou.bind(this)();null!=a&&this.Bk(a)};k(U.D,mo);h("nrg.ui.Slider",U.D);U.D.ID_PREFIX="nrg.ui.Slider";U.D.CSS_SUFFIX={qL:"track",KC:"track-hovered",Qw:"thumb",IC:"thumb-hovered"};f=U.D.prototype;f.zp=!1;f.Os=!1;f.$T=function(a){this.Os=a};f.ZT=function(a){this.Os=a};
f.p=function(a){this.q=wh("div",{id:U.D.ID_PREFIX+"_Widget_"+r()});this.cc(this.q);a=null!=a?a:document.body;a.appendChild(this.q);this.We=wh("div",{id:U.D.ID_PREFIX+"_Track_"+r()});this.q.appendChild(this.We);this.de=qh("goog-slider-thumb",this.q);C(this,"change",this.mR.bind(this));C(this.de,"mouseover",this.XR.bind(this));C(this.de,"mouseout",this.WR.bind(this));C(this.We,"mouseover",this.rS.bind(this));C(this.We,"mouseout",this.qS.bind(this));C(this,"k",this.bS.bind(this));C(this,"l",this.ZR.bind(this));
this.Bk(this.$c().toLowerCase())};f.b=function(){return this.q};f.uP=function(){return this.We};f.oP=function(){return this.de};f.Vq=function(a){null==this.ym&&(this.ym={});if(null==this.ym[a.id]){var b=new rn(a);b.addEventListener("mousewheel",this.MR,!1,this);this.ym[a.id]=b}};f.xM=function(a){null==this.um&&(this.um={});if(null==this.um[a.id]){var b=new Bl(a);C(b,"key",this.uk.bind(this));this.um[a.id]=b}};f.uk=function(a){window.console.log("KEY",a)};
f.o=function(){var a=this.ea(),a=Jn(this,a);"horizontal"==this.$c().toLowerCase()?this.de.style.left=a.x.toString()+"px":"vertical"==this.$c().toLowerCase()&&(this.de.style.left=a.y.toString()+"px")};f.Bk=function(a){U.D.g.Bk.call(this,a);this.Fa&&no(this,this.$c().toLowerCase())};function no(a,b){function c(a,c){Yg(a,[ek.Wb(c,"horizontal"),ek.Wb(c,"vertical")],[c,ek.Wb(c,b)])}c(a.q,a.constructor.gd);c(a.We,U.D.CSS.qL);c(a.de,U.D.CSS.Qw)}f.DB=!1;f.ny=1;
f.ZI=function(a,b){this.DB=a;ma(b)&&(this.ny=b)};f.MR=function(a){var b=Math.abs(a.pf)<Math.abs(a.$j)?a.$j:a.pf;this.DB?this.aa(Math.round(this.ea()-b*this.ny)):this.aa(Math.round(this.ea()-(0>b?-1:1)));this.dispatchEvent({type:"r"});a.preventDefault()};f.bu=function(a){this.sj=this.sj?this.sj:[];this.sj.push(a);oo(this)};f.xx=function(a){this.vj=this.vj?this.vj:[];this.vj.push(a);po(this)};
f.mR=function(a){a.stopPropagation();this.zp&&(qo(this),ro(this));this.Os||this.dispatchEvent({type:"q",value:this.ea(),Oz:this.bb(),Lz:this.La()});this.Os=!1};function qo(a){R(a.de,U.D.CSS.IC);null!=a.sj&&A(a.sj,function(a){R(this.de,a)}.bind(a))}function ro(a){R(a.We,U.D.CSS.KC);null!=a.vj&&A(a.vj,function(a){R(this.We,a)}.bind(a))}function oo(a){Wg(a.de,U.D.CSS.IC);null!=a.sj&&A(a.sj,function(a){Wg(this.de,a)}.bind(a))}
function po(a){Wg(a.We,U.D.CSS.KC);null!=a.vj&&A(a.vj,function(a){Wg(this.We,a)}.bind(a))}f.XR=function(a){a.stopPropagation();qo(this);ro(this)};f.rS=function(){ro(this)};f.WR=function(){this.zp||(oo(this),po(this))};f.qS=function(){this.zp||po(this)};f.bS=function(){this.zp=!0};f.ZR=function(){this.zp=!1;oo(this);po(this)};
f.i=function(){U.D.g.i.call(this);delete this.Os;null!=this.q&&(bd(this),S(this.q),delete this.q);null!=this.de&&(bd(this.de),S(this.de),delete this.de);null!=this.We&&(bd(this.We),S(this.We),delete this.We);null!=this.um&&(w(this.um,function(a){bd(a);a.k()}),wb(this.um),delete this.um);null!=this.ym&&(w(this.ym,function(a){bd(a);a.k()}),wb(this.ym),delete this.ym);null!=this.sj&&(Nb(this.sj),delete this.sj);null!=this.vj&&(Nb(this.vj),delete this.vj);delete this.DB;delete this.ny;delete this.zp};
h("nrg.ui.Slider.EventType",{dW:"q",AV:"r"});h("nrg.ui.Slider.ID_PREFIX",U.D.ID_PREFIX);h("nrg.ui.Slider.CSS_SUFFIX",U.D.CSS_SUFFIX);h("nrg.ui.Slider.prototype.suspendSlideEvent",U.D.prototype.$T);h("nrg.ui.Slider.prototype.suspendChangeEvent",U.D.prototype.ZT);h("nrg.ui.Slider.prototype.render",U.D.prototype.p);h("nrg.ui.Slider.prototype.getElement",U.D.prototype.b);h("nrg.ui.Slider.prototype.getTrack",U.D.prototype.uP);h("nrg.ui.Slider.prototype.getThumb",U.D.prototype.oP);
h("nrg.ui.Slider.prototype.bindToMouseWheel",U.D.prototype.Vq);h("nrg.ui.Slider.prototype.bindToArrowKeys",U.D.prototype.xM);h("nrg.ui.Slider.prototype.updateStyle",U.D.prototype.o);h("nrg.ui.Slider.prototype.setOrientation",U.D.prototype.Bk);h("nrg.ui.Slider.prototype.setUseDeltaToScroll",U.D.prototype.ZI);h("nrg.ui.Slider.prototype.addThumbHoverClass",U.D.prototype.bu);h("nrg.ui.Slider.prototype.addTrackHoverClass",U.D.prototype.xx);h("nrg.ui.Slider.prototype.disposeInternal",U.D.prototype.i);V.a.e.K.D=function(){U.D.call(this)};k(V.a.e.K.D,U.D);h("xiv.ui.layouts.interactors.Slider",V.a.e.K.D);V.a.e.K.D.ID_PREFIX="xiv.ui.layouts.interactors.Slider";V.a.e.K.D.CSS_SUFFIX={};V.a.e.K.D.prototype.p=function(){};V.a.e.K.D.prototype.i=function(){V.a.e.K.D.g.i.call(this)};h("xiv.ui.layouts.interactors.Slider.EventType",{});h("xiv.ui.layouts.interactors.Slider.ID_PREFIX",V.a.e.K.D.ID_PREFIX);h("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",V.a.e.K.D.CSS_SUFFIX);
h("xiv.ui.layouts.interactors.Slider.prototype.render",V.a.e.K.D.prototype.p);h("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",V.a.e.K.D.prototype.i);V.a.e.K.ee=function(){U.S.call(this)};k(V.a.e.K.ee,U.S);h("xiv.ui.layouts.interactors.Crosshairs",V.a.e.K.ee);V.a.e.K.ee.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";V.a.e.K.ee.CSS_SUFFIX={fV:"horizontal",MW:"vertical"};f=V.a.e.K.ee.prototype;f.Di=null;f.mi=null;f.aJ=function(a){null!=a&&(this.Di.style.left=a.toString()+"px")};f.bJ=function(a){null!=a&&(this.mi.style.top=a.toString()+"px")};f.p=function(a){this.Di=so(this,"vertical");this.mi=so(this,"horizontal");a.appendChild(this.mi);a.appendChild(this.Di)};
f.Ss=function(a){a=!1===a?"hidden":"visible";this.Di.style.visibility=a;this.mi.style.visibility=a};function so(a,b){b=b.toLowerCase();if(!sb(V.a.e.K.ee.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return wh("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+r(),"class":a.constructor.gd+"-"+b.toLowerCase()})}f.i=function(){V.a.e.K.ee.g.i.call(this);S(this.Di);delete this.Di;S(this.mi);delete this.mi};h("xiv.ui.layouts.interactors.Crosshairs.EventType",{});
h("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",V.a.e.K.ee.ID_PREFIX);h("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",V.a.e.K.ee.CSS_SUFFIX);h("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",V.a.e.K.ee.prototype.Di);h("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",V.a.e.K.ee.prototype.mi);h("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",V.a.e.K.ee.prototype.aJ);h("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",V.a.e.K.ee.prototype.bJ);
h("xiv.ui.layouts.interactors.Crosshairs.prototype.render",V.a.e.K.ee.prototype.p);h("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",V.a.e.K.ee.prototype.Ss);h("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",V.a.e.K.ee.prototype.i);V.a.e.$=function(a){V.a.e.Hb.call(this);a=null!=a?a:qb(to);a=ia(a)?a:[a];A(a,function(b,c){a[c]=b.toUpperCase()});uo(this,a);wo(this,a);null!=this.l.X&&this.ag();null!=this.l.Y&&this.zi();null!=this.l.Z&&this.hm();null!=this.l.V&&this.Fs();this.o()};k(V.a.e.$,V.a.e.Hb);h("xiv.ui.layouts.XyzvLayout",V.a.e.$);V.a.e.$.Ra="XyzvLayout";V.a.e.$.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var to={Ki:"X",sg:"Y",xo:"Z",xt:"V"};
V.a.e.$.CSS_SUFFIX={Ki:"x",sg:"y",xo:"z",xt:"v",Xa:"slider",Qk:"slider-thumb",Ow:"slider-thumb-hovered",Rk:"slider-track",eW:"slider-track-x",fW:"slider-track-y",gW:"slider-track-z",bV:"framenumber"};V.a.e.$.mt=function(a,b,c,d){this.Xa=a;this.zf=b;this.zd=c;this.Mh=d};h("xiv.ui.layouts.XyzvLayout.InteractorSet",V.a.e.$.mt);f=V.a.e.$.prototype;f.sI=0;f.Ak=function(a,b){this.l[a].Np(b);var c=this.JE(a);Ah(this.b(),c);c.style.position="absolute";this.l[a].ja().zk(c);this.l[a].ja().update()};
f.JE=function(a){return wh("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+r(),"class":ek.Wb(this.constructor.gd,a.toLowerCase()+"-resizeboundary")})};function uo(a,b){if(b.length>pb(to))throw Error("Invalid amount of frames "+b+". Must be "+to);A(b,function(a){if(!sb(to,a))throw Error("Invalid frame title ",a);}.bind(a))}function wo(a,b){var c="";A(b,function(a,b){c=a.toUpperCase();this.zD(new V.a.e.fe(c));Ah(this.b(),this.l[c].b());R(this.l[c].b(),V.a.e.$.CSS[b])}.bind(a))}f.kU=function(a){a.VA(this.vr())};
f.VA=function(a){this.nh(function(b,c){null!=a[c]&&(b[ho]=a[c].Xa,S(a[c].Xa.b()),b.b().appendChild(a[c].Xa.b()),b[io]=a[c].zf,S(a[c].zf.b()),b.b().appendChild(a[c].zf.b()),b[ko]=a[c].zd,b.b().appendChild(a[c].zd.Di),b.b().appendChild(a[c].zd.mi))})};f.xD=function(){this.NA();xo(this);yo(this);zo(this);Ao(this)};f.vr=function(){var a={};this.nh(function(b,c){a[c]=new V.a.e.$.mt(b[ho],b[io],b[ko],b[jo])});return a};f.aG=function(a){a=this.l[a];return new V.a.e.$.mt(a[ho],a[io],a[ko])};
f.$F=function(a,b){return this.l[a][b]};f.XF=function(a){return this.l[a]};function xo(a){var b;a.nh(function(a,d){b=new U.D("horizontal");b.p(a.b());b.b().id=d+"_LayoutFrameSlider_"+r();a[ho]=b;Yg(b.b(),null,[V.a.e.$.CSS.Xa]);Yg(b.de,null,[V.a.e.$.CSS.Qk]);Yg(b.We,null,[V.a.e.$.CSS.Rk,ek.Wb(V.a.e.$.CSS.Rk,d.toLowerCase())]);b.bu(V.a.e.$.CSS.Ow)}.bind(a))}function yo(a){var b;a.nh(function(a){b=new V.a.e.K.tm;b.p(a.b());a[io]=b}.bind(a))}
function zo(a){var b;a.nh(function(a){b=new V.a.e.K.Nm;b.p(a.b());a[jo]=b}.bind(a))}function Ao(a){var b;a.nh(function(a){b=new V.a.e.K.ee;a[ko]=b;b.p(a.b());a.b().appendChild(b.mi);a.b().appendChild(b.Di)}.bind(a))}f.nh=function(a){w(to,function(b){b=b.toUpperCase();null!=this.l[b]&&"V"!=b&&a(this.l[b],b)}.bind(this))};f.loop=function(a){w(to,function(b){b=b.toUpperCase();a(this.l[b],b)}.bind(this))};f.ag=function(){null!=this.constructor.CSS&&R(this.l.X.b(),this.constructor.CSS.Ki)};
f.zi=function(){null!=this.constructor.CSS&&R(this.l.Y.b(),this.constructor.CSS.sg)};f.Wl=function(a){this.Tj();var b=ui(this.l.X.b()),c=ui(this.l.Y.b()),d=ui(this.l.Z.b());a(b,c,d,b.width+c.width+d.width-this.F.width)};f.hm=function(){null!=this.constructor.CSS&&R(this.l.Z.b(),this.constructor.CSS.xo)};f.Fs=function(){null!=this.constructor.CSS&&R(this.l.V.b(),this.constructor.CSS.xt)};f.Jg=ea;f.ij=ea;f.zR=ea;f.zv=ea;f.eg=ea;f.Pg=ea;f.fg=ea;f.co=ea;f.i=function(){V.a.e.$.g.i.call(this);delete this.sI};
h("xiv.ui.layouts.XyzvLayout.TITLE",V.a.e.$.Ra);h("xiv.ui.layouts.XyzvLayout.EventType",{});h("xiv.ui.layouts.XyzvLayout.ID_PREFIX",V.a.e.$.ID_PREFIX);h("xiv.ui.layouts.XyzvLayout.FRAMES",to);h("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",V.a.e.$.CSS_SUFFIX);h("xiv.ui.layouts.XyzvLayout.InteractorSet",V.a.e.$.mt);h("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",V.a.e.$.prototype.sI);h("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",V.a.e.$.prototype.Ak);
h("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",V.a.e.$.prototype.JE);h("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",V.a.e.$.prototype.kU);h("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",V.a.e.$.prototype.VA);h("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",V.a.e.$.prototype.xD);h("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",V.a.e.$.prototype.vr);h("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",V.a.e.$.prototype.aG);
h("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",V.a.e.$.prototype.$F);h("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",V.a.e.$.prototype.XF);h("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",V.a.e.$.prototype.nh);h("xiv.ui.layouts.XyzvLayout.prototype.loop",V.a.e.$.prototype.loop);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",V.a.e.$.prototype.ag);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",V.a.e.$.prototype.zi);
h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",V.a.e.$.prototype.hm);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",V.a.e.$.prototype.Fs);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",V.a.e.$.prototype.Jg);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",V.a.e.$.prototype.ij);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",V.a.e.$.prototype.zR);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",V.a.e.$.prototype.zv);
h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",V.a.e.$.prototype.eg);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",V.a.e.$.prototype.Pg);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",V.a.e.$.prototype.fg);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",V.a.e.$.prototype.co);h("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",V.a.e.$.prototype.i);V.a.e.Uc=function(){V.a.e.$.call(this,["X","Y","Z"])};k(V.a.e.Uc,V.a.e.$);h("xiv.ui.layouts.TwoDWidescreen",V.a.e.Uc);V.a.e.Uc.Ra="TwoDWidescreen";V.a.e.Uc.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";V.a.e.Uc.CSS_SUFFIX={Ki:"x",sg:"y",xo:"z"};f=V.a.e.Uc.prototype;f.ag=function(){V.a.e.Uc.g.ag.call(this);this.Ak("X",["RIGHT"]);C(this.l.X.ja(),"resize",this.Jg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.zi=function(){V.a.e.Uc.g.zi.call(this);this.Ak("Y",["BOTTOM"]);C(this.l.Y.ja(),"resize",this.ij.bind(this));C(this.l.Y.ja(),"resize_end",this.o.bind(this))};f.Jg=function(){this.Wl(function(a){var b=a.width,c=Math.max(this.F.width-a.width,this.ad);A(["Y","Z"],function(a){this.l[a].b().style.left=b+"px";this.l[a].b().style.width=c+"px"}.bind(this))}.bind(this));this.Vi()};
f.ij=function(){this.Wl(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.F.height-c;this.l.Z.b().style.top=c+"px";this.l.Z.b().style.height=d+"px"}.bind(this));this.Vi()};f.o=function(){V.a.e.Uc.g.o.call(this);this.ps();this.eg();this.fg();this.Pg()};
f.ps=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=1-(this.Ha.height-this.F.height)/this.Ha.height,b=1-(this.Ha.width-this.F.width)/this.Ha.width;this.nh(function(c){frameSize=ui(c.b());c.b().style.width=Math.max(frameSize.width*b,this.ad).toString()+"px";c.b().style.height=Math.max(frameSize.height*a,this.ye).toString()+"px"}.bind(this))}};
f.eg=function(){var a=this.l.X;a.b().style.height=this.F.height.toString()+"px";Rk.zb(a.ja().Me(),{left:this.ad,width:this.F.width-2*this.ad});var b=a.ja().Ne("RIGHT");b.style.left=a.b().style.width;ti(b,this.F.height);a.ja().update()};f.fg=function(){var a=this.l.Y;a.b().style.left=this.l.X.b().style.width;Rk.zb(a.ja().Me(),{top:this.ye,height:this.F.height-2*this.ye});var b=a.ja().Ne("BOTTOM");b.style.top=a.b().style.height;si(b,parseInt(a.b().style.width));a.ja().update()};
f.Pg=function(){var a=this.l.Z;a.b().style.left=this.l.X.b().style.width;a.b().style.top=this.l.Y.b().style.height;a.b().style.height=this.F.height-parseInt(this.l.Y.b().style.height)+NaN};h("xiv.ui.layouts.TwoDWidescreen.TITLE",V.a.e.Uc.Ra);h("xiv.ui.layouts.TwoDWidescreen.EventType",{});h("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",V.a.e.Uc.ID_PREFIX);h("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",V.a.e.Uc.CSS_SUFFIX);h("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",V.a.e.Uc.prototype.ag);
h("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",V.a.e.Uc.prototype.zi);h("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",V.a.e.Uc.prototype.Jg);h("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",V.a.e.Uc.prototype.ij);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",V.a.e.Uc.prototype.o);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",V.a.e.Uc.prototype.eg);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",V.a.e.Uc.prototype.fg);
h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",V.a.e.Uc.prototype.Pg);V.a.e.Sd=function(a){V.a.e.$.call(this,a)};k(V.a.e.Sd,V.a.e.$);h("xiv.ui.layouts.SingleFrameLayout",V.a.e.Sd);V.a.e.Sd.Ra="SingleFrameLayout";V.a.e.Sd.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";V.a.e.Sd.prototype.ps=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=this.Ha.height*(1-(this.Ha.height-this.F.height)/this.Ha.height),b=this.Ha.width*(1-(this.Ha.width-this.F.width)/this.Ha.width);this.loop(function(c){null!=c&&ri(c.b(),Math.max(b,this.ad),Math.max(a,this.ye))}.bind(this))}};
V.a.e.Sd.prototype.o=function(){V.a.e.Sd.g.o.call(this);this.ps()};h("xiv.ui.layouts.SingleFrameLayout.TITLE",V.a.e.Sd.Ra);h("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",V.a.e.Sd.ID_PREFIX);h("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",V.a.e.Sd.prototype.o);V.a.e.Im=function(){V.a.e.Sd.call(this,"V");R(this.l.V.b(),ek.Wb(V.a.e.fe.gd,this.constructor.Ra))};k(V.a.e.Im,V.a.e.Sd);h("xiv.ui.layouts.ThreeD",V.a.e.Im);V.a.e.Im.Ra="ThreeD";V.a.e.Im.ID_PREFIX="xiv.ui.layouts.ThreeD";h("xiv.ui.layouts.ThreeD.TITLE",V.a.e.Im.Ra);h("xiv.ui.layouts.ThreeD.ID_PREFIX",V.a.e.Im.ID_PREFIX);V.a.e.Hm=function(){V.a.e.Sd.call(this,"X");R(this.l.X.b(),ek.Wb(V.a.e.fe.gd,this.constructor.Ra.toLowerCase()))};k(V.a.e.Hm,V.a.e.Sd);h("xiv.ui.layouts.Sagittal",V.a.e.Hm);V.a.e.Hm.Ra="Sagittal";V.a.e.Hm.ID_PREFIX="xiv.ui.layouts.Sagittal";h("xiv.ui.layouts.Sagittal.TITLE",V.a.e.Hm.Ra);h("xiv.ui.layouts.Sagittal.ID_PREFIX",V.a.e.Hm.ID_PREFIX);V.a.e.vb=function(){V.a.e.$.call(this)};k(V.a.e.vb,V.a.e.$);h("xiv.ui.layouts.Conventional",V.a.e.vb);V.a.e.vb.Ra="Conventional";V.a.e.vb.ID_PREFIX="xiv.ui.layouts.Conventional";V.a.e.vb.CSS_SUFFIX={Ki:"x",sg:"y",xo:"z",xt:"v",aX:"v-boundary"};f=V.a.e.vb.prototype;f.ag=function(){V.a.e.vb.g.ag.call(this);this.Ak("X",["RIGHT","TOP_RIGHT"]);C(this.l.X.ja(),"resize",this.Jg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.zi=function(){V.a.e.vb.g.zi.call(this);this.Ak("Y",["RIGHT","TOP_RIGHT"]);C(this.l.Y.ja(),"resize",this.ij.bind(this));C(this.l.Y.ja(),"resize_end",this.o.bind(this))};f.hm=function(){V.a.e.vb.g.hm.call(this)};f.Fs=function(){V.a.e.vb.g.Fs.call(this);this.Ak("V","BOTTOM");C(this.l.V.ja(),"resize",this.zv.bind(this));C(this.l.V.ja(),"resize_end",this.o.bind(this))};f.Wl=function(a){this.Tj();var b=ui(this.l.X.b()),c=ui(this.l.Y.b()),d=ui(this.l.Z.b());a(b,c,d,b.width+c.width+d.width-this.F.width)};
f.Jg=function(){this.Wl(function(a,b,c){b=Math.max(this.F.width-a.width-c.width,this.ad);var d=this.F.height-a.height;di(this.l.Y.b(),a.width,d);ri(this.l.Y.b(),b,a.height);di(this.l.Z.b(),a.width+b,d);ri(this.l.Z.b(),c.width,a.height);ri(this.l.V.b(),this.F.width,this.F.height-a.height)}.bind(this));this.Vi()};
f.ij=function(){this.Wl(function(a,b){var c=this.F.height-b.height;di(this.l.X.b(),0,c);ri(this.l.X.b(),a.width,b.height);di(this.l.Z.b(),a.width+b.width,c);ri(this.l.Z.b(),this.F.width-a.width-b.width,b.height);ri(this.l.V.b(),this.F.width,this.F.height-b.height)}.bind(this));this.Vi()};f.zv=function(){this.Tj();var a=parseInt(this.l.V.b().style.height),b=this.F.height-a;w(this.l,function(c){c!==this.l.V&&Rk.zb(c.b(),{top:a,height:b})}.bind(this));this.eg();this.fg();this.Vi()};
f.o=function(){V.a.e.vb.g.o.call(this);this.co();this.BB();this.CB();this.eg();this.fg();this.Pg()};f.BB=function(){var a=parseInt(this.l.V.b().style.height),b=Math.max(this.F.height-a,this.ye);this.nh(function(c){c.b().style.top=a+"px";c.b().style.height=b+"px"})};f.CB=function(){var a,b=1-(this.Ha.width-this.F.width)/this.Ha.width;this.Ha.width!==this.F.width&&this.nh(function(c){a=ui(c.b());c.b().style.width=Math.max(a.width*b,this.ad).toString()+"px"}.bind(this))};
f.$s=function(a){var b=this.l.V.ja().lp("BOTTOM"),c=this.l[a].ja().Me(),d=fi(this.l[a].b()),e=ui(this.l[a].b());di(c,parseInt(c.style.left),this.ye);ri(c,this.F.width-3*this.ad,this.F.height-2*this.ye);c=this.l[a].ja().Ne("RIGHT");di(c,d.x+e.width,d.y);ti(c,this.F.height-b.Fb.y);di(this.l[a].ja().Ne("TOP_RIGHT"),d.x+e.width,d.y);this.l[a].ja().update()};f.eg=function(){Rk.zb(this.l.X.ja().Me(),{left:this.ad});this.$s("X")};
f.fg=function(){this.l.Y.b().style.left=this.l.X.b().style.width;Rk.zb(this.l.Y.ja().Me(),{left:2*this.ad});this.$s("Y")};f.Pg=function(){this.l.Z.b().style.left=(parseInt(this.l.X.b().style.width)+parseInt(this.l.Y.b().style.width)).toString()+"px"};
f.co=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=ui(this.l.V.b());ri(this.l.V.b(),this.F.width,Math.max(a.height*(1-(this.Ha.height-this.F.height)/this.Ha.height),this.ye))}di(this.l.V.ja().Me(),this.F.width,this.ye);ri(this.l.V.ja().Me(),this.F.width-3*this.ad,this.F.height-2*this.ye);a=this.l.V.ja().Ne("BOTTOM");di(a,0,ui(this.l.V.b()).height);si(a,this.F.width);this.l.V.ja().update()};h("xiv.ui.layouts.Conventional.TITLE",V.a.e.vb.Ra);
h("xiv.ui.layouts.Conventional.EventType",{});h("xiv.ui.layouts.Conventional.ID_PREFIX",V.a.e.vb.ID_PREFIX);h("xiv.ui.layouts.Conventional.CSS_SUFFIX",V.a.e.vb.CSS_SUFFIX);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",V.a.e.vb.prototype.ag);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",V.a.e.vb.prototype.zi);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",V.a.e.vb.prototype.hm);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",V.a.e.vb.prototype.Fs);
h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",V.a.e.vb.prototype.Jg);h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y",V.a.e.vb.prototype.ij);h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",V.a.e.vb.prototype.zv);h("xiv.ui.layouts.Conventional.prototype.updateStyle",V.a.e.vb.prototype.o);h("xiv.ui.layouts.Conventional.prototype.updateStyle_X",V.a.e.vb.prototype.eg);h("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",V.a.e.vb.prototype.fg);
h("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",V.a.e.vb.prototype.Pg);h("xiv.ui.layouts.Conventional.prototype.updateStyle_V",V.a.e.vb.prototype.co);V.a.e.Jm=function(){V.a.e.Sd.call(this,"Z");R(this.l.Z.b(),ek.Wb(V.a.e.fe.gd,this.constructor.Ra))};k(V.a.e.Jm,V.a.e.Sd);h("xiv.ui.layouts.Transverse",V.a.e.Jm);V.a.e.Jm.Ra="Transverse";V.a.e.Jm.ID_PREFIX="xiv.ui.layouts.Transverse";h("xiv.ui.layouts.Transverse.TITLE",V.a.e.Jm.Ra);h("xiv.ui.layouts.Transverse.ID_PREFIX",V.a.e.Jm.ID_PREFIX);V.a.e.vc=function(){V.a.e.$.call(this)};k(V.a.e.vc,V.a.e.$);h("xiv.ui.layouts.FourUp",V.a.e.vc);V.a.e.vc.Ra="Four-Up";V.a.e.vc.ID_PREFIX="xiv.ui.layouts.FourUp";V.a.e.vc.CSS_SUFFIX={Ki:"x",sg:"y",xo:"z",xt:"v"};f=V.a.e.vc.prototype;f.ag=function(){V.a.e.vc.g.ag.call(this);this.Ak("X",["RIGHT","TOP","TOP_RIGHT"]);C(this.l.X.ja(),"resize",this.Jg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.Jg=function(){var a=fi(this.l.X.b()),b=ui(this.l.X.b());di(this.l.Y.b(),b.width,a.y);ri(this.l.Y.b(),this.F.width-b.width,b.height);di(this.l.Z.b(),0,0);ri(this.l.Z.b(),b.width,a.y);di(this.l.V.b(),b.width,0);ri(this.l.V.b(),this.F.width-b.width,a.y);a=this.l.X.ja().lp("RIGHT").Ne();a.style.top="0px";a.style.height=this.F.height.toString()+"px";this.Vi()};f.o=function(){V.a.e.vc.g.o.call(this);this.ps();this.Pg();this.co();this.eg();this.fg()};
f.ps=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=this.Ha.height*(1-(this.Ha.height-this.F.height)/this.Ha.height)/2,b=this.Ha.width*(1-(this.Ha.width-this.F.width)/this.Ha.width)/2;this.loop(function(c){ri(c.b(),Math.max(b,this.ad),Math.max(a,this.ye))}.bind(this))}};
f.eg=function(){this.l.X.b().style.top=this.l.Z.b().style.height;di(this.l.X.ja().Me(),this.ad,this.ye);ri(this.l.X.ja().Me(),this.F.width-2*this.ad,this.F.height-2*this.ye);var a=this.l.X.ja().lp("TOP").Ne();a.style.left="0px";a.style.width=this.F.width.toString()+"px";this.l.X.ja().update();a=this.l.X.ja().lp("RIGHT").Ne();a.style.top="0px";a.style.height=this.F.height.toString()+"px"};f.fg=function(){this.l.Y.b().style.left=this.l.Z.b().style.width;this.l.Y.b().style.top=this.l.Z.b().style.height};
f.Pg=function(){};f.co=function(){this.l.V.b().style.left=this.l.Z.b().style.width};f.i=function(){V.a.e.vc.g.i.call(this)};h("xiv.ui.layouts.FourUp.TITLE",V.a.e.vc.Ra);h("xiv.ui.layouts.FourUp.EventType",{});h("xiv.ui.layouts.FourUp.ID_PREFIX",V.a.e.vc.ID_PREFIX);h("xiv.ui.layouts.FourUp.CSS_SUFFIX",V.a.e.vc.CSS_SUFFIX);h("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",V.a.e.vc.prototype.ag);h("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",V.a.e.vc.prototype.Jg);
h("xiv.ui.layouts.FourUp.prototype.updateStyle",V.a.e.vc.prototype.o);h("xiv.ui.layouts.FourUp.prototype.updateStyle_X",V.a.e.vc.prototype.eg);h("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",V.a.e.vc.prototype.fg);h("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",V.a.e.vc.prototype.Pg);h("xiv.ui.layouts.FourUp.prototype.updateStyle_V",V.a.e.vc.prototype.co);h("xiv.ui.layouts.FourUp.prototype.disposeInternal",V.a.e.vc.prototype.i);V.a.e.xc=function(){V.a.e.$.call(this,["X","Y","Z"])};k(V.a.e.xc,V.a.e.$);h("xiv.ui.layouts.TwoDRow",V.a.e.xc);V.a.e.xc.Ra="TwoDRow";V.a.e.xc.ID_PREFIX="xiv.ui.layouts.TwoDRow";V.a.e.xc.CSS_SUFFIX={Ki:"x",sg:"y",xo:"z"};f=V.a.e.xc.prototype;f.ag=function(){V.a.e.xc.g.ag.call(this);this.Ak("X",["RIGHT"]);C(this.l.X.ja(),"resize",this.Jg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.zi=function(){V.a.e.xc.g.zi.call(this);this.Ak("Y",["RIGHT"]);C(this.l.Y.ja(),"resize",this.ij.bind(this));C(this.l.Y.ja(),"resize_end",this.o.bind(this))};f.hm=function(){V.a.e.xc.g.hm.call(this)};f.Wl=function(a){this.Tj();var b=ui(this.l.X.b()),c=ui(this.l.Y.b()),d=ui(this.l.Z.b());a(b,c,d,b.width+c.width+d.width-this.F.width)};
f.Jg=function(){this.Wl(function(a,b,c){b=Math.max(this.F.width-a.width-c.width,this.ad);var d=this.F.height-a.height;di(this.l.Y.b(),a.width,d);ri(this.l.Y.b(),b,a.height);di(this.l.Z.b(),a.width+b,d);ri(this.l.Z.b(),c.width,a.height)}.bind(this));this.Vi()};
f.ij=function(){this.Wl(function(a,b){var c=this.F.height-b.height;di(this.l.X.b(),0,c);ri(this.l.X.b(),a.width,b.height);di(this.l.Z.b(),a.width+b.width,c);ri(this.l.Z.b(),this.F.width-a.width-b.width,b.height);ri(this.l.V.b(),this.F.width,this.F.height-b.height)}.bind(this));this.Vi()};f.o=function(){V.a.e.xc.g.o.call(this);this.CB();this.BB();this.eg();this.fg();this.Pg()};f.BB=function(){var a=this.F.height.toString()+"px";this.nh(function(b){b.b().style.height=a})};
f.CB=function(){var a,b=1-(this.Ha.width-this.F.width)/this.Ha.width;this.Ha.width!==this.F.width&&this.nh(function(c){a=ui(c.b());newWidth=c.b().style.width=Math.max(a.width*b,this.ad).toString()+"px"}.bind(this))};f.$s=function(a){var b=this.l[a].ja().Me(),c=fi(this.l[a].b()),d=ui(this.l[a].b());di(b,parseInt(b.style.left),this.ye);ri(b,this.F.width-3*this.ad,this.F.height-2*this.ye);b=this.l[a].ja().Ne("RIGHT");di(b,c.x+d.width,c.y);ti(b,this.F.height);this.l[a].ja().update()};
f.eg=function(){Rk.zb(this.l.X.ja().Me(),{left:this.ad});this.$s("X")};f.fg=function(){this.l.Y.b().style.left=this.l.X.b().style.width;Rk.zb(this.l.Y.ja().Me(),{left:2*this.ad});this.$s("Y")};f.Pg=function(){this.l.Z.b().style.left=(parseInt(this.l.X.b().style.width)+parseInt(this.l.Y.b().style.width)).toString()+"px"};h("xiv.ui.layouts.TwoDRow.TITLE",V.a.e.xc.Ra);h("xiv.ui.layouts.TwoDRow.EventType",{});h("xiv.ui.layouts.TwoDRow.ID_PREFIX",V.a.e.xc.ID_PREFIX);
h("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",V.a.e.xc.CSS_SUFFIX);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",V.a.e.xc.prototype.ag);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",V.a.e.xc.prototype.zi);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",V.a.e.xc.prototype.hm);h("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",V.a.e.xc.prototype.Jg);h("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",V.a.e.xc.prototype.ij);
h("xiv.ui.layouts.TwoDRow.prototype.updateStyle",V.a.e.xc.prototype.o);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",V.a.e.xc.prototype.eg);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",V.a.e.xc.prototype.fg);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",V.a.e.xc.prototype.Pg);V.a.e.rm=function(){V.a.e.Sd.call(this,"Y");R(this.l.Y.b(),ek.Wb(V.a.e.fe.gd,this.constructor.Ra.toLowerCase()))};k(V.a.e.rm,V.a.e.Sd);h("xiv.ui.layouts.Coronal",V.a.e.rm);V.a.e.rm.Ra="Coronal";V.a.e.rm.ID_PREFIX="xiv.ui.layouts.Coronal";h("xiv.ui.layouts.Coronal.TITLE",V.a.e.rm.Ra);h("xiv.ui.layouts.Coronal.ID_PREFIX",V.a.e.rm.ID_PREFIX);V.a.e.Ka=function(){U.S.call(this);this.constructor.qC={};this.constructor.qC[V.a.e.vc.Ra]=V.a.e.vc;this.constructor.qC[V.a.e.vb.Ra]=V.a.e.vb;this.oo={};this.Yl={};this.Hk={}};k(V.a.e.Ka,U.S);h("xiv.ui.layouts.LayoutHandler",V.a.e.Ka);V.a.e.Ka.ID_PREFIX="xiv.ui.layouts.LayoutHandler";V.a.e.Ka.CSS_SUFFIX={};V.a.e.Ka.ft=500;f=V.a.e.Ka.prototype;f.kc=null;f.tf=null;f.xz=!1;f.jl=null;f.dg=null;f.YD=!0;f.DQ=function(){return this.xz};f.kM=function(a){this.YD=a};f.NF=function(){return this.kc[this.qe]};
f.OF=function(a){return this.kc[this.qe].Oy(a)};f.Zs=function(){null!=this.tf&&this.tf.Zs()};f.Py=function(){return null!=this.tf?this.tf.vr():null};f.HO=function(a){return null!=this.tf?this.tf.aG(a):null};f.GO=function(a){return null!=this.tf?this.tf.XF(a):null};f.eG=function(a,b){return null!=this.tf?this.tf.$F(a,b):null};f.JI=function(a){this.Xn(a);null!=this.tf&&this.tf.NA();this.kc[a].xD();this.tf=this.kc[a]};
f.yD=function(a,b){if(void 0 in this.oo)throw Error(a+" is an already used layout title!");b&&(this.oo[a]=b)};f.Xn=function(a,b){if(!(a in this.oo))throw Error("Invalid layout: "+a+"!");null==this.kc&&(this.kc={});a in this.kc||(this.kc[a]=new this.oo[a],C(this.kc[a],"p",this.Av.bind(this)),Bo(this.kc[a]),Ah(this.b(),this.kc[a].b()));this.Jv=this.qe;this.qe=a;this.vJ(!1===b?0:V.a.e.Ka.ft)};
function Co(a){var b;w(a.kc[a.qe].l,function(a,d){b=this.eG(d,ho);null!=b&&null==a[V.a.e.Ka.Nw]&&(b.Vq(a.b()),a[V.a.e.Ka.Nw]=!0)}.bind(a))}f.Av=function(){this.dispatchEvent({type:"v"})};f.vJ=function(a){a=ma(a)&&0<=a?a:V.a.e.Ka.ft;this.Jv!=this.qe&&(this.Jv?this.YD?Do(this,a):Do(this,0):(Eo(this,this.qe),Fo(this,this.qe)))};function Go(a,b,c){A(Dh(b.b()),function(a){null!=this.Yl[c]||(this.Yl[c]=[]);this.Yl[c].push(a)}.bind(a))}
function Ho(a){w(a.Hk,function(a){Ah(this.b().parentNode,a)}.bind(a))}function Io(a,b){var c=[];w(a.Hk,function(a,e){c=Qb(c,T.EF(a,this.jl[e],this.dg[e],b))}.bind(a));return c}
function Do(a,b){var c=a.kc[a.qe].l,d;Eo(a,a.qe);Fo(a,a.qe);null!=a.jl&&wb(a.jl);null!=a.dg&&wb(a.dg);a.jl={};a.dg={};w(a.kc[a.Jv].l,function(a,b){d=a.b().cloneNode(!1);this.Hk[b]=d;Go(this,a,b);w(this.Yl,function(a,b){A(a,function(a){S(a);null!=this.Hk[b]&&this.Hk[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var l=T.FF(a.b(),c[b].b());this.jl[b]=l.sM;this.dg[b]=l.hU}else this.jl[b]={"z-index":0},this.dg[b]={opacity:0}}.bind(a));Ho(a);T.DA(Io(a,b),a.mA.bind(a),a.nA.bind(a),a.lA.bind(a))}
f.mA=function(){this.NG();this.xz=!0;this.dispatchEvent({type:"s",vB:this.Hk})};V.a.e.Ka.Nw=r();f=V.a.e.Ka.prototype;f.nA=function(){this.dispatchEvent({type:"u",vB:this.Hk})};
f.lA=function(){var a=this.kc[this.qe].l;w(a,function(a,c){null!=this.Yl[c]&&A(this.Yl[c],function(c){a.b().appendChild(c)})}.bind(this));w(a,function(a,c){null!=this.dg[c]&&Rk.zb(a.b(),this.dg[c])}.bind(this));this.kc[this.qe]!==this.tf&&this.kc[this.qe].VA(this.Py());Jo(this);this.xz=!1;Eo(this,this.qe);Fo(this,this.qe);Ko(this);this.dispatchEvent({type:"t",frames:a});Co(this);this.o()};function Fo(a,b){a.kc[b].b().style.opacity=1;a.kc[b].o()}
function Eo(a,b){a.kc[b].b().style.visibility="visible";a.kc[b].o()}f.NG=function(){w(this.kc,function(a){a.b().style.visibility="hidden";a.o()}.bind(this))};function Jo(a){w(a.Hk,function(a){S(a);delete a})}function Bo(a){w(a.l,function(a){C(a.b(),"dblclick",function(){})})}f.yR=function(a){this.MY.push(a)};f.o=function(){V.a.e.Ka.g.o.call(this);this.kc[this.qe].o()};
function Ko(a){null!=a.jl&&(w(a.jl,function(a){wb(a)}),wb(a.dg),delete a.dg);null!=a.dg&&(w(a.dg,function(a){wb(a)}),wb(a.dg),delete a.dg)}f.i=function(){V.a.e.Ka.g.i.call(this);Ko(this);delete this.Hk;wb(this.Yl);delete this.Yl;delete this.tf;U.tu(this.kc);delete this.kc;wb(this.oo);delete this.oo;delete this.qe;delete this.Jv};h("xiv.ui.layouts.LayoutHandler.EventType",{rV:"s",qV:"t",sV:"u",Mw:"v"});h("xiv.ui.layouts.LayoutHandler.ID_PREFIX",V.a.e.Ka.ID_PREFIX);
h("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",V.a.e.Ka.CSS_SUFFIX);h("xiv.ui.layouts.LayoutHandler.ANIM_TIME",V.a.e.Ka.ft);h("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",V.a.e.Ka.Nw);h("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",V.a.e.Ka.prototype.DQ);h("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",V.a.e.Ka.prototype.kM);h("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",V.a.e.Ka.prototype.NF);h("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",V.a.e.Ka.prototype.OF);
h("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",V.a.e.Ka.prototype.Zs);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",V.a.e.Ka.prototype.Py);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",V.a.e.Ka.prototype.HO);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",V.a.e.Ka.prototype.GO);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",V.a.e.Ka.prototype.eG);
h("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",V.a.e.Ka.prototype.JI);h("xiv.ui.layouts.LayoutHandler.prototype.addLayout",V.a.e.Ka.prototype.yD);h("xiv.ui.layouts.LayoutHandler.prototype.setLayout",V.a.e.Ka.prototype.Xn);h("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",V.a.e.Ka.prototype.vJ);h("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",V.a.e.Ka.prototype.NG);h("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",V.a.e.Ka.prototype.yR);
h("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",V.a.e.Ka.prototype.o);h("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",V.a.e.Ka.prototype.i);function Lo(a,b){this.x=a;this.y=b}k(Lo,Zg);f=Lo.prototype;f.clone=function(){return new Lo(this.x,this.y)};f.oi=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=Zg.prototype.scale;f.uc=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.oi())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.Ld=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.ep=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};V.a.c.Ad=function(){V.a.c.w.call(this);this.yi("Display All");this.ju=wh("div",{id:"CheckboxHodler_"+r()});R(this.ju,V.a.c.Ad.CSS.dK);this.bn=new bo(!0);this.bn.cc(this.ju);this.Vn(this.bn);C(this.bn,"change",this.ue.bind(this))};k(V.a.c.Ad,V.a.c.w);h("xiv.ui.ctrl.CheckboxController",V.a.c.Ad);V.a.c.Ad.ID_PREFIX="xiv.ui.ctrl.CheckboxController";V.a.c.Ad.CSS_SUFFIX={dK:"checkboxholder"};V.a.c.Ad.prototype.wh=function(a){this.O.wh(a);this.ue()};
V.a.c.Ad.prototype.ue=function(){this.dispatchEvent({type:"o",checked:this.bn.Tl()})};V.a.c.Ad.prototype.i=function(){V.a.c.Ad.g.i.call(this);S(this.ju);delete this.ju;bd(this.bn);this.bn.k();delete this.bn};h("xiv.ui.ctrl.CheckboxController.ID_PREFIX",V.a.c.Ad.ID_PREFIX);h("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",V.a.c.Ad.CSS_SUFFIX);h("xiv.ui.ctrl.CheckboxController.prototype.setChecked",V.a.c.Ad.prototype.wh);h("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",V.a.c.Ad.prototype.ue);
h("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",V.a.c.Ad.prototype.i);U.s=function(){U.S.call(this);this.xe=wh("img",{id:"nrg.ui.Thumbnail_"+r()});Ah(this.b(),this.xe);this.Ng=wh("div",{id:"DisplayText_"+r()});Ah(this.b(),this.Ng);this.dw();this.b().className=U.s.gd;this.xe.className=U.s.CSS.lt;this.Ng.className=U.s.CSS.so;Mo(this,!0);this.gs()};k(U.s,U.S);h("nrg.ui.Thumbnail",U.s);U.s.ID_PREFIX="nrg.ui.Thumbnail";
U.s.CSS_SUFFIX={lt:"image",so:"text",$V:"selected",pt:"mouseover",mC:"image-mouseover",GC:"text-mouseover",kC:"highlight",qm:"active",lC:"image-active",FC:"text-active",sK:"hoverclone"};U.s.kt="HOVERABLE_";f=U.s.prototype;f.jE=null;f.ud=null;f.Yu=!1;f.vO=function(){return this.xe};f.zI=function(a,b){this.jE=a;this.xe.onerror=function(){this.xe.onerror="";this.xe.src=this.jE;null!=b&&b()}.bind(this)};f.mP=function(){return this.Ng};
f.Ty=function(){for(var a=this.Ng;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};f.fh=function(){return this.ud=this.ud?this.ud:this.b()};f.cj=function(){return this.Yu};f.UA=function(a){this.xe.src=a;this.xe.className=U.s.CSS.lt};f.Bs=function(a){this.Ng.innerHTML=a};f.nI=function(){this.ud&&(this.ud.parentNode&&(this.ud=this.ud.parentNode.removeChild(this.ud)),delete this.ud,this.ud=null)};
f.cr=function(a,b){this.nI();Mo(this,!1);this.ud=b?b:this.b().cloneNode(!0);this.ud.setAttribute("id",U.s.kt+this.b().getAttribute("id"));this.ud.style.visibility="hidden";R(this.ud,U.s.CSS.sK);Mo(this,!0);a&&a.appendChild(this.ud);this.dw()};f.setActive=function(a,b){var c=this.b();(this.Yu=a)?(b&&R(c,U.s.CSS.kC),R(c,U.s.CSS.qm),R(this.Ng,U.s.CSS.FC),R(this.xe,U.s.CSS.lC)):(Wg(c,U.s.CSS.kC),Wg(c,U.s.CSS.qm),Wg(this.Ng,U.s.CSS.FC),Wg(this.xe,U.s.CSS.lC))};
f.o=function(a){a&&this.b()&&Rk.zb(this.b(),a)};f.OA=function(){var a=this.b(),b=this.fh();if(b!==a){var c=Jh(a,b),c=ni(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;Rk.zb(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.Bv=function(){var a=this.fh();R(a,U.s.CSS.pt);R(a.childNodes[1],U.s.CSS.GC);R(a.childNodes[0],U.s.CSS.mC);a!==this.b()&&this.OA();this.dispatchEvent("w")};
f.gs=function(){var a=this.fh();a&&1<a.childNodes.length&&(Wg(a,U.s.CSS.pt),Wg(a.childNodes[1],U.s.CSS.GC),Wg(a.childNodes[0],U.s.CSS.mC),a.style.visibility=a!==this.b()?"hidden":"visible");this.dispatchEvent("x")};function Mo(a,b){var c=a.fh();b?(C(c,"mouseover",a.Bv.bind(a)),C(c,"mouseout",a.gs.bind(a))):($c(c,"mouseover",a.Bv.bind(a)),$c(c,"mouseout",a.gs.bind(a)))}f.dw=function(){cd(this.fh(),"y")&&ad("y");C(this.fh(),"click",function(){this.dispatchEvent({type:"y"})}.bind(this))};
f.i=function(){U.s.g.i.call(this);bd(this);bd(this.b());null!=this.ud&&(bd(this.ud),S(this.ud),delete this.ud);S(this.xe);delete this.xe;S(this.Ng);delete this.Ng;delete this.LX;delete this.Yu};h("nrg.ui.Thumbnail.EventType",{pt:"w",OK:"x",MU:"y"});h("nrg.ui.Thumbnail.ID_PREFIX",U.s.ID_PREFIX);h("nrg.ui.Thumbnail.CSS_SUFFIX",U.s.CSS_SUFFIX);h("nrg.ui.Thumbnail.HOVERABLE_PREFIX",U.s.kt);h("nrg.ui.Thumbnail.prototype.getImage",U.s.prototype.vO);h("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",U.s.prototype.zI);
h("nrg.ui.Thumbnail.prototype.getTextElement",U.s.prototype.mP);h("nrg.ui.Thumbnail.prototype.getText",U.s.prototype.Ty);h("nrg.ui.Thumbnail.prototype.getHoverable",U.s.prototype.fh);h("nrg.ui.Thumbnail.prototype.isActive",U.s.prototype.cj);h("nrg.ui.Thumbnail.prototype.setImage",U.s.prototype.UA);h("nrg.ui.Thumbnail.prototype.setText",U.s.prototype.Bs);h("nrg.ui.Thumbnail.prototype.removeHoverable",U.s.prototype.nI);h("nrg.ui.Thumbnail.prototype.createHoverable",U.s.prototype.cr);
h("nrg.ui.Thumbnail.prototype.setActive",U.s.prototype.setActive);h("nrg.ui.Thumbnail.prototype.updateStyle",U.s.prototype.o);h("nrg.ui.Thumbnail.prototype.repositionHoverable",U.s.prototype.OA);h("nrg.ui.Thumbnail.prototype.onMouseOver",U.s.prototype.Bv);h("nrg.ui.Thumbnail.prototype.onMouseOut",U.s.prototype.gs);h("nrg.ui.Thumbnail.prototype.disposeInternal",U.s.prototype.i);U.wb=function(){U.S.call(this)};k(U.wb,U.S);h("nrg.ui.ScrollableContainer",U.wb);U.wb.ID_PREFIX="nrg.ui.ScrollableContainer";U.wb.CSS_SUFFIX={jL:"scrollarea",Xa:"slider",Qk:"slider-thumb",Rk:"slider-track",Ow:"slider-thumb-hovered",mL:"slider-track-hovered"};U.wb.EK=30;f=U.wb.prototype;
f.p=function(a){U.wb.g.p.call(this,a);null==this.wi&&(this.wi=wh("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+r(),"class":U.wb.CSS.jL}),this.b().appendChild(this.wi));this.D=new U.D("vertical");this.D.p(this.b());C(this.D,"q",this.Pe.bind(this));this.D.Vq(this.b());R(this.D.b(),U.wb.CSS.Xa);R(this.D.de,U.wb.CSS.Qk);R(this.D.We,U.wb.CSS.Rk);this.D.bu(U.wb.CSS.Ow);this.D.xx(U.wb.CSS.mL);this.o();this.Pe()};f.Xg=function(a){this.Fa||this.p();Ah(this.wi,a);this.Pe()};f.b=function(){return this.q};
f.hP=function(){return this.D};f.dP=function(){return this.wi};f.o=function(a){a&&Rk.zb(this.q,a)};f.Pe=function(){var a=ui(this.q).height,b=ui(this.wi).height,c=[this.D.bb(),this.D.La()],d=[0,b-a];a<b?(this.D.b().style.opacity=1,Rk.zb(this.D.de,{height:a/b*a}),this.D.xd(!0),a=this.D.La()-this.D.ea(),c=Qk.mI(a,c,d).remappedVal,Rk.zb(this.wi,{top:-c})):(this.D.b().style.opacity=0,this.D.xd(!1),this.D.aa(100))};
f.i=function(){U.wb.g.i.call(this);null!=this.D&&(bd(this.D),this.D.k(),delete this.D);null!=this.wi&&(S(this.wi),delete this.wi)};h("nrg.ui.ScrollableContainer.ID_PREFIX",U.wb.ID_PREFIX);h("nrg.ui.ScrollableContainer.CSS_SUFFIX",U.wb.CSS_SUFFIX);h("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",U.wb.EK);h("nrg.ui.ScrollableContainer.prototype.render",U.wb.prototype.p);h("nrg.ui.ScrollableContainer.prototype.addContents",U.wb.prototype.Xg);h("nrg.ui.ScrollableContainer.prototype.getElement",U.wb.prototype.b);
h("nrg.ui.ScrollableContainer.prototype.getSlider",U.wb.prototype.hP);h("nrg.ui.ScrollableContainer.prototype.getScrollArea",U.wb.prototype.dP);h("nrg.ui.ScrollableContainer.prototype.updateStyle",U.wb.prototype.o);h("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",U.wb.prototype.Pe);h("nrg.ui.ScrollableContainer.prototype.disposeInternal",U.wb.prototype.i);U.mc=function(){U.wb.call(this)};k(U.mc,U.wb);h("nrg.ui.ScrollableZippyTree",U.mc);U.mc.ID_PREFIX="nrg.ui.ScrollableZippyTree";U.mc.CSS_SUFFIX={FL:"zippytree"};f=U.mc.prototype;f.p=function(a){U.mc.g.p.call(this,a);this.A=new U.A;R(this.A.b(),U.mc.CSS.FL);this.wi.appendChild(this.A.b());this.Es();this.D.ZI(!0,.3)};f.Xg=function(a,b){this.A.Xg(a,b);a=ia(a)?a:[a];A(a,function(){}.bind(this));this.D.Vq(this.A.b())};f.sn=function(){this.A.sn()};f.$q=function(){this.A.$q()};
f.bd=function(a,b){this.A.bd(a,b)};f.FP=function(){return this.A};f.cM=function(a){this.A.br(a);this.Pe()};f.Es=function(){C(this.A,"m",this.Pe.bind(this));C(this.A,"d",this.Pe.bind(this));C(this.A,"e",this.Pe.bind(this));C(this.A,fl.UK,this.Pe.bind(this))};f.o=function(a){a&&Rk.zb(this.b(),a)};f.i=function(){U.mc.g.i.call(this);null!=this.A&&(bd(this.A),this.A.k(),delete this.A)};h("nrg.ui.ScrollableZippyTree.EventType",{});h("nrg.ui.ScrollableZippyTree.ID_PREFIX",U.mc.ID_PREFIX);
h("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",U.mc.CSS_SUFFIX);h("nrg.ui.ScrollableZippyTree.prototype.render",U.mc.prototype.p);h("nrg.ui.ScrollableZippyTree.prototype.addContents",U.mc.prototype.Xg);h("nrg.ui.ScrollableZippyTree.prototype.expandAll",U.mc.prototype.sn);h("nrg.ui.ScrollableZippyTree.prototype.collapseAll",U.mc.prototype.$q);h("nrg.ui.ScrollableZippyTree.prototype.setExpanded",U.mc.prototype.bd);h("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",U.mc.prototype.FP);
h("nrg.ui.ScrollableZippyTree.prototype.addFolders",U.mc.prototype.cM);h("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",U.mc.prototype.Es);h("nrg.ui.ScrollableZippyTree.prototype.updateStyle",U.mc.prototype.o);h("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",U.mc.prototype.i);function No(a){id.call(this);this.t="interactor";this.ug=a;this.gx=this.fD=this.eD=this.gD=this.dD=this.hD=null;this.Pt=!0;this.el=this.Zk=this.Ni=!1;this.ie=[0,0];this.bx=new n.ha(0,0,0);this.wq=new n.ha(0,0,0);this.fH=0;this.nD=this.Lt=null;this.Tt=!1;this.sc={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}k(No,id);No.prototype.__defineGetter__("config",function(){return this.sc});
No.prototype.__defineGetter__("leftButtonDown",function(){return this.Ni});No.prototype.__defineGetter__("middleButtonDown",function(){return this.Zk});No.prototype.__defineGetter__("rightButtonDown",function(){return this.el});
No.prototype.Ta=function(){this.sc.MOUSEWHEEL_ENABLED?(this.gx=new rn(this.ug),this.hD=C(this.gx,"mousewheel",this.hs.bind(this))):(ad(this.hD),this.gx=null);this.sc.MOUSECLICKS_ENABLED?(this.dD=C(this.ug,"mousedown",this.oA.bind(this)),this.gD=C(this.ug,"mouseup",this.pA.bind(this))):(ad(this.dD),ad(this.gD));this.ug.oncontextmenu=this.sc.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.sc.KEYBOARD_ENABLED?this.uk.bind(this):null;this.sc.TOUCH_ENABLED?(this.sc.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.UL=C(this.ug,"touchstart",this.pS.bind(this)),this.TL=C(this.ug,"touchmove",this.nS.bind(this)),this.SL=C(this.ug,"touchend",this.jS.bind(this))):(ad(this.UL),ad(this.TL),ad(this.SL));ad(this.eD);ad(this.fD);this.eD=C(this.ug,"mousemove",this.GR.bind(this));this.fD=C(this.ug,"mouseout",this.HR.bind(this))};
No.prototype.oA=function(a){0==a.button?this.Ni=!0:1==a.button?this.Zk=!0:2==a.button&&(this.el=!0);eval("this.onMouseDown("+this.Ni+","+this.Zk+","+this.el+")");Oo(this);a.preventDefault()};No.prototype.FR=function(){};No.prototype.pA=function(a){0==a.button?this.Ni=!1:1==a.button?this.Zk=!1:2==a.button&&(this.el=!1);eval("this.onMouseUp("+this.Ni+","+this.Zk+","+this.el+")");Oo(this);a.preventDefault()};No.prototype.__defineGetter__("mousePosition",function(){return this.ie});f=No.prototype;
f.KR=function(){};f.HR=function(a){this.Pt=!1;this.sc.KEYBOARD_ENABLED&&(window.onkeydown=null);this.el=this.Zk=this.Ni=!1;Oo(this);this.bx=new n.ha(0,0,0);a.preventDefault()};f.TH=function(){};f.pS=function(a){a.preventDefault();a.Ta(a.Yd.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.wq=new n.ha(a.clientX,a.clientY,0);this.nD=setTimeout(this.lS.bind(this,a),500)};f.oS=function(){};
f.lS=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new ze;a.Mi=!0;a.Nh=this instanceof Po;this.dispatchEvent(a);this.Ut=!0};f.kS=function(){};function Qo(a){clearTimeout(a.nD);if(a.Ut){var b=new ze;b.Mi=!1;b.Nh=a instanceof Po;a.dispatchEvent(b)}a.Ut=!1}f.jS=function(a){a.preventDefault();eval("this.onTouchEnd()");Qo(this)};f.iS=function(){};
f.nS=function(a){a.preventDefault();this.Ut||Qo(this);this.touchmoveEvent=a=a.Yd;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new n.ha(c[0],c[1],0);var b=c[0]>3*this.ug.clientWidth/4,d=c[0]<this.ug.clientWidth/4,e=c[1]<this.ug.clientHeight/4,c=c[1]>3*this.ug.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.wq.Ld(a);this.wq=a.clone();if(this.Ut)a=new xe,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.Ee=e,this.dispatchEvent(a);
else if(this instanceof Ro&&(b||d))a=new Ae,a.Yc=0>e.y,this.dispatchEvent(a);else if(this instanceof Po||c)e.scale(3),a=new ye,a.Ee=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new n.ha(a[0],a[1],0),b=new n.ha(b[0],b[1],0),e=xd(a,b),b=e-this.fH,this.fH=e,this.wq.Ld(a),this.wq=a.clone(),10<Math.abs(b)&&(a=new ze,a.Mi=0<b,a.Nh=this instanceof Po,this.dispatchEvent(a)))};f.mS=function(){};
f.GR=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Pt=!0;this.sc.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.uk.bind(this));a.preventDefault();var b=a.shiftKey;this.Tt=b;this.ie=[a.offsetX,a.offsetY];var c=new n.ha(this.ie[0],this.ie[1],0);a=this.bx.Ld(c);this.bx=c.clone();this.sc.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Zk||this.Ni||this.el)&&Oo(this),this.Lt=setTimeout(function(){Oo(this);var a=new Be;a.Yt=c.x;a.Zt=
c.y;this.dispatchEvent(a);this.Lt=null}.bind(this),300));0!=a.oi()&&(this.Ni&&!b?(b=new ye,a.scale(3),b.Ee=a,this.dispatchEvent(b)):this.Zk||this.Ni&&b?(b=new xe,b.Ee=a,this.dispatchEvent(b)):this.el&&(b=new ze,b.Mi=0<a.y,b.Nh=!1,this.dispatchEvent(b)))};function Oo(a){a.Lt&&clearTimeout(a.Lt);a.dispatchEvent(new Ce)}f.LR=function(){};f.hs=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");Oo(this);a.preventDefault()};f.xR=function(){};
f.uk=function(a){if(this.Pt){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");Oo(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,g=a.keyCode;82!=g||b||c||d||e?37<=g&&40>=g&&(a.preventDefault(),e?a=new xe:b?a=new ze:(a=new ye,this instanceof Ro&&(a=new Ae)),a&&(c=new n.ha(0,0,0),37==g?(c.x=5,a.Yc=!1,b&&(a.Yc=!0,a.Mi=!0,a.Nh=!1)):39==g?(c.x=-5,a.Yc=!0,b&&(a.Mi=!1,a.Nh=!1)):38==g?(c.y=5,a.Yc=!0,b&&(a.Mi=!0,a.Nh=!0)):40==g&&(c.y=-5,a.Yc=!1,b&&(a.Mi=!1,a.Nh=!0)),a.Ee=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new De,this.dispatchEvent(a))}};h("X.interactor",No);h("X.interactor.prototype.init",No.prototype.Ta);h("X.interactor.prototype.onMouseDown",No.prototype.FR);h("X.interactor.prototype.onMouseUp",No.prototype.KR);h("X.interactor.prototype.onMouseMove",No.prototype.TH);h("X.interactor.prototype.onMouseWheel",No.prototype.LR);h("X.interactor.prototype.onKey",No.prototype.xR);h("X.interactor.prototype.onTouchStart",No.prototype.oS);h("X.interactor.prototype.onTouchMove",No.prototype.mS);
h("X.interactor.prototype.onTouchEnd",No.prototype.iS);h("X.interactor.prototype.onTouchHover",No.prototype.kS);function Ro(a){No.call(this,a);this.t="interactor2D"}k(Ro,No);Ro.prototype.hs=function(a){Ro.g.hs.call(this,a);var b=new Ae;null==a.pf&&(a.pf=0);b.Yc=0>a.pf;this.dispatchEvent(b)};function So(a,b){if(!ma(a)||!ma(b))throw Error("A camera needs valid width and height values.");id.call(this);this.t="camera";this.Qm=new n.ha(0,100,0);this.Co=new n.ha(0,0,0);this.Yc=new n.ha(0,0,1);this.Db=a;this.lb=b;this.na=this.mv(this.Qm,this.Co)}k(So,id);So.prototype.observe=function(a){if(!(null!=a&&a instanceof No))throw Error("Could not observe the interactor.");C(a,je,this.UR.bind(this));C(a,ie,this.OR.bind(this));C(a,ke,this.AS.bind(this))};
So.prototype.UR=function(a){if(!(a instanceof ye))throw Error("Received no valid rotate event.");this.rotate(a.Ee)};So.prototype.AS=function(a){if(!(a instanceof ze))throw Error("Received no valid zoom event.");a.Mi?this.cq(a.Nh):this.dq(a.Nh)};So.prototype.OR=function(a){if(!(a instanceof xe))throw Error("Received no valid pan event.");this.Hv(a.Ee)};So.prototype.__defineGetter__("view",function(){return this.na});
So.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.na=a});So.prototype.__defineGetter__("position",function(){return[this.Qm.x,this.Qm.y,this.Qm.z]});So.prototype.__defineSetter__("position",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid position.");this.Qm=new n.ha(a[0],a[1],a[2]);this.reset()});So.prototype.__defineGetter__("focus",function(){return[this.Co.x,this.Co.y,this.Co.z]});
So.prototype.__defineSetter__("focus",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid focus");this.Co=new n.ha(a[0],a[1],a[2]);this.reset()});So.prototype.__defineGetter__("up",function(){return[this.Yc.x,this.Yc.y,this.Yc.z]});So.prototype.__defineSetter__("up",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid up vector.");this.Yc=new n.ha(a[0],a[1],a[2]);this.reset()});f=So.prototype;f.reset=function(){this.na=this.mv(this.Qm,this.Co)};
f.rotate=function(a){if(ia(a)&&2==a.length)a=new n.ha(a[0],a[1],0);else if(!(a instanceof n.ha))throw Error("Invalid distance vector for rotate operation.");return a};f.Hv=function(a){if(ia(a)&&2==a.length)a=new n.ha(a[0],a[1],0);else if(!(a instanceof n.ha))throw Error("Invalid distance vector for pan operation.");this.na[12]-=a.x;this.na[13]+=a.y};f.cq=function(a){var b=20;null!=a&&!a&&(b=1);this.na[14]+=b};f.dq=function(a){var b=20;null!=a&&!a&&(b=1);this.na[14]-=b};
f.mv=function(a,b){if(!(a instanceof n.ha&&b instanceof n.ha))throw Error("3D vectors required for calculating the view.");return n.B.Fr()};h("X.camera",So);h("X.camera.prototype.pan",So.prototype.Hv);h("X.camera.prototype.rotate",So.prototype.rotate);h("X.camera.prototype.zoomIn",So.prototype.cq);h("X.camera.prototype.zoomOut",So.prototype.dq);function To(a){function b(a,b,d){b=b*Math.PI*2;b=Pm(Qm(q,Math.cos(b)),Qm(p,Math.sin(b)));a=Pm(Pm(c,Qm(e,a)),Qm(b,g));d=Pm(Qm(b,1-Math.abs(d)),Qm(l,d));return new Um(a,d)}this.Cc=[];a=a||{};var c=new Om(a.start||[0,-1,0]),d=new Om(a.end||[0,1,0]),e=Rm(d,c),g=a.vi||1;a=a.eb||16;for(var l=Sm(e),m=.5<Math.abs(l.y()),q=Sm((new Om(m,!m,0)).jn(l)),p=Sm(q.jn(l)),m=new Um(c,Tm(l)),d=new Um(d,Sm(l)),t=[],s=0;s<a;s++){var u=s/a,v=(s+1)/a;t.push(new Wm([m,b(0,u,-1),b(0,v,-1)]));t.push(new Wm([b(0,v,0),b(0,u,
0),b(1,u,0),b(1,v,0)]));t.push(new Wm([d,b(1,v,1),b(1,u,1)]))}return gn(t)}k(To,fn);function Uo(){ce.call(this);this.t="cylinder";this.qx=[-10,-10,-10];this.$w=[10,10,10];this.Rm=10;this.le=32;za(this,new hn)}k(Uo,ce);Uo.prototype.__defineGetter__("start",function(){return this.qx});Uo.prototype.__defineSetter__("start",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid start");this.qx=a});Uo.prototype.__defineGetter__("end",function(){return this.$w});
Uo.prototype.__defineSetter__("end",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid end");this.$w=a});Uo.prototype.__defineGetter__("radius",function(){return this.Rm});Uo.prototype.__defineSetter__("radius",function(a){if(!ma(a))throw Error("Invalid radius.");this.Rm=a});Uo.prototype.Ba=function(){kn(this,new To({start:this.qx,end:this.$w,vi:this.Rm,eb:this.le}));Uo.g.Ba.call(this)};h("X.cylinder",Uo);h("X.cylinder.prototype.modified",Uo.prototype.Ba);function on(a){F.call(this);this.t="labelmap";this.Pj=a;this.px=new Float32Array([-255,-255,-255,-255])}k(on,F);on.prototype.Ba=function(){var a=new de;a.qb=this;this.dispatchEvent(a);this.Pj.Ba()};on.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(ia(a)&&4==a.length)b=a;else{if(!this.gf)throw Error("No colortable assigned.");b=this.gf.If.get(a).slice(1,5)}this.px=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
h("X.labelmap",on);function Vo(a){this.Cc=[];a=a||{};var b=new Om(a.Ri||[0,0,0]),c=a.vi?a.vi.length?a.vi:[a.vi,a.vi,a.vi]:[1,1,1];return gn([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Wm(a[0].map(function(e){e=new Om(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new Um(e,new Om(a[1]))}))}))}k(Vo,fn);function Wo(){ce.call(this);this.t="cube";this.xb=[0,0,0];this.ex=this.dx=this.cx=20;this.Oo=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];za(this,new hn)}k(Wo,ce);Wo.prototype.__defineGetter__("center",function(){return this.xb});Wo.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center");this.xb=a});Wo.prototype.__defineGetter__("lengthX",function(){return this.cx});
Wo.prototype.__defineSetter__("lengthX",function(a){if(!ma(a))throw Error("Invalid lengthX.");this.cx=a});Wo.prototype.__defineGetter__("lengthY",function(){return this.dx});Wo.prototype.__defineSetter__("lengthY",function(a){if(!ma(a))throw Error("Invalid lengthY.");this.dx=a});Wo.prototype.__defineGetter__("lengthZ",function(){return this.ex});Wo.prototype.__defineSetter__("lengthZ",function(a){if(!ma(a))throw Error("Invalid lengthZ.");this.ex=a});
Wo.prototype.Ba=function(){kn(this,new Vo({Ri:this.xb,vi:[this.cx/2,this.dx/2,this.ex/2]}));Wo.g.Ba.call(this)};h("X.cube",Wo);h("X.cube.prototype.modified",Wo.prototype.Ba);function Po(a){No.call(this,a);this.t="interactor3D"}k(Po,No);Po.prototype.hs=function(a){Po.g.hs.call(this,a);var b=new ze;null==a.pf&&(a.pf=0);b.Mi=0>a.pf;b.Nh=!0;this.dispatchEvent(b)};function Xo(a){id.call(this);this.t="array";this.Nb=[];this.UC=a}k(Xo,id);function Yo(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}Xo.prototype.add=function(a){this.Nb.push(a);return!0};Xo.prototype.remove=function(a){a=this.Nb.indexOf(a);-1<a&&this.Nb.splice(a,1);return!0};Xo.prototype.clear=function(){this.Nb.length=0};
function Zo(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),Zo(a,b,d),Zo(a,d,c);b<d;++b)if(0<a.UC(a.Nb[b],a.Nb[d])){var e=a.Nb[b];a.Nb[b]=a.Nb[d];for(var g=a,l=d,m=c;l+1<m&&0>g.UC(g.Nb[l+1],e);){var q=g,p=l+1,t=q.Nb[l];q.Nb[l]=q.Nb[p];q.Nb[p]=t;++l}g.Nb[l]=e}}Xo.prototype.sort=function(){Zo(this,0,this.Nb.length)};function $o(a,b){So.call(this,a,b);this.t="camera2D"}k($o,So);$o.prototype.rotate=function(a){a=$o.g.rotate.call(this,a);var b=new we;0<a.x?b.sx--:0>a.x&&b.sx++;0<a.y?b.fx++:0>a.y&&b.fx--;this.dispatchEvent(b)};$o.prototype.cq=function(a){var b=20;null!=a&&!a&&(b=.02);this.na[14]+=b};$o.prototype.dq=function(a){var b=20;null!=a&&!a&&(b=.02);this.na[14]-=b};
$o.prototype.Hv=function(a){if(ia(a)&&2==a.length)a=new n.ha(a[0],a[1],0);else if(!(a instanceof n.ha))throw Error("Invalid distance vector for pan operation.");this.na[12]-=a.x/this.na[14];this.na[13]+=a.y/this.na[14]};function ap(a,b){So.call(this,a,b);this.t="camera3D";this.XC=45;this.kx=n.B.Hz(n.B.Fr(),this.XC,a/b,1,1E4)}k(ap,So);ap.prototype.rotate=function(a){a=ap.g.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new n.ha(this.na[1],this.na[5],this.na[9]),d=new n.ha(this.na[0],this.na[4],this.na[8]);c.normalize();d.normalize();n.B.rotate(this.na,b,c.x,c.y,c.z);n.B.rotate(this.na,a,d.x,d.y,d.z)};ap.prototype.mv=function(a,b){var c=ap.g.mv.call(this,a,b);n.B.sH(c,a,b,this.Yc);return c};
function bp(a,b,c,d){var e=new Float32Array(4),g=new Float32Array(4),l=new Float32Array(16),m=new Float32Array(16);new Float32Array(16);n.B.multiply(a.kx,a.na,m);n.B.uc(m,l);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;n.B.EH(l,e,g);g[3]=1/g[3];g[0]*=g[3];g[1]*=g[3];g[2]*=g[3];return g}h("X.camera3D",ap);function cp(a){bj.call(this,a);this.kj=new un;C(this.kj,"change",this.JP,!1,this)}k(cp,bj);var dp={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=cp.prototype;f.C=function(){this.Og=this.gn();var a=dp[this.jb];this.q=this.da().C("div",a,this.Og);ep(this);fp(this);gp(this)};f.Pb=function(){cp.g.Pb.call(this);mc&&7>tc&&C(this.b(),"resize",this.xj,!1,this);this.xj();var a=this.b();Aj(a,"progressbar");Bj(a,"live","polite")};f.Id=function(){cp.g.Id.call(this);hp(this)};
f.gn=function(){return this.da().C("div","progress-bar-thumb")};function hp(a){mc&&7>tc&&$c(a.b(),"resize",a.xj,!1,a)}f.Of=function(a){cp.g.Of.call(this,a);uj(this.b(),dp[this.jb]);a=nh(null,"progress-bar-thumb",this.b())[0];a||(a=this.gn(),this.b().appendChild(a));this.Og=a};f.ea=function(){return this.kj.ea()};f.aa=function(a){this.kj.aa(a);this.b()&&ep(this)};function ep(a){Bj(a.b(),"valuenow",a.ea())}f.bb=function(){return this.kj.bb()};f.$f=function(a){this.kj.$f(a);this.b()&&fp(this)};
function fp(a){Bj(a.b(),"valuemin",a.bb())}f.La=function(){return this.kj.La()};f.Te=function(a){this.kj.Te(a);this.b()&&gp(this)};function gp(a){Bj(a.b(),"valuemax",a.La())}f.jb="horizontal";f.JP=function(){this.xj();this.dispatchEvent("change")};
f.xj=function(){if(this.Og){var a=this.bb(),b=this.La(),a=(this.ea()-a)/(b-a),b=Math.round(100*a);"vertical"==this.jb?mc&&7>tc?(this.Og.style.top=0,this.Og.style.height="100%",b=this.Og.offsetHeight,a=Math.round(a*b),this.Og.style.top=b-a+"px",this.Og.style.height=a+"px"):(this.Og.style.top=100-b+"%",this.Og.style.height=b+"%"):this.Og.style.width=b+"%"}};
f.Bk=function(a){if(this.jb!=a){var b=dp[this.jb],c=dp[a];this.jb=a;if(a=this.b())tj(a,b)&&(wj(a,b),uj(a,c)),b=this.Og.style,"vertical"==this.jb?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.xj()}};f.$c=function(){return this.jb};f.i=function(){hp(this);cp.g.i.call(this);this.Og=null;this.kj.k()};f.fk=function(){return this.kj.fk()};f.pj=function(a){this.kj.pj(a)};function ip(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");cp.call(this);this.t="progressbar";this.Wg=a;this.jx="";this.It=this.Oj=null;this.Om=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Om=[c,d,e];this.aa(b);this.hz()}k(ip,cp);
ip.prototype.hz=function(){var a=ai(this.Wg,"position");if("static"==a||""==a)this.jx=this.Wg.style.position,this.Wg.style.position="relative";var a=document.getElementsByTagName("head")[0],b=wh("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Om[0])),d=document.createTextNode(String(this.Om[1])),e=document.createTextNode(String(this.Om[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Oj=b;this.p(this.Wg);a=this.b();a.style.position=
"absolute";a.style.top=(this.Wg.clientHeight-5)/2+"px";a.style.left=(this.Wg.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};ip.prototype.ap=function(){var a=this.b().style.top,b=this.b().style.left;S(this.b());var c=new ip(this.Wg,100),d=c.b();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");Eh(d).classList.add("progress-bar-thumb-done");this.It=c};
ip.prototype.Pr=function(){this.Oj&&S(this.Oj);this.b()&&S(this.b());this.It&&S(this.It.b());this.It=this.Oj=null;this.jx&&(this.Wg.style.position=this.jx)};function jp(){id.call(this);this.t="renderer";this.Za=window.document.body;this.Db=this.Za.clientWidth;this.lb=this.Za.clientHeight;this.yc=this.Na=this.Fd=null;this.Oi=new Xo(fe);this.kf=[];this.Ic=null;this.Qt=this.xq=this.Ot=!1;this.f=this.cl=this.Lf=null;this.sc={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Xw=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}k(jp,id);f=jp.prototype;
f.eA=function(){window.cancelAnimationFrame(this.Xw);this.sc.PROGRESSBAR_ENABLED&&(this.cl=new ip(this.Za,3))};f.fA=function(){this.sc.PROGRESSBAR_ENABLED&&this.cl&&(this.cl.ap(),this.Ft=Xf(function(){this.Ft=null;this.cl&&(this.cl.Pr(),this.cl=null);this.xq=this.Qt=!0;this.p()}.bind(this),700))};f.gA=function(a){this.cl&&this.cl.aa(100*a.Vm)};f.Nn=function(a){this.Lf&&this.Lf.aa(100*a.Vm)};f.ER=function(a){null!=a&&a instanceof de&&a.qb&&this.zj(a.qb)};
f.QR=function(a){null!=a&&a instanceof ee&&a.qb&&this.remove(a.qb)};f.kA=function(a){if(!(null!=a&&a instanceof Be))throw Error("Invalid hover event.");};f.On=function(){var a=mh(this.Za);this.Db=a.clientWidth;this.lb=a.clientHeight;a=mh(this.Fd);a.width=this.Db;a.height=this.lb;"renderer3D"==this.t&&(this.f.viewport(0,0,this.Db,this.lb),this.Na.kx=n.B.Hz(n.B.Fr(),this.Na.XC,this.Fd.width/this.Fd.height,1,1E4))};
f.Jp=function(a){if(!(null!=a&&a instanceof Ae))throw Error("Invalid scroll event.");};jp.prototype.__defineGetter__("config",function(){return this.sc});jp.prototype.__defineGetter__("interactor",function(){return this.yc});jp.prototype.__defineGetter__("camera",function(){return this.Na});jp.prototype.__defineGetter__("loadingCompleted",function(){return this.xq});jp.prototype.__defineGetter__("container",function(){return this.Za});
jp.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;ka(b)&&(b=mh(a));if(!Hh(b))throw Error("Could not find the given container.");this.Za=b});f=jp.prototype;f.ms=function(){this.Na.reset()};function kp(a){a.sc.PROGRESSBAR_ENABLED&&a.Lf&&!a.Ft&&(a.Lf.ap(),a.Ft=Xf(function(){this.Ft=null;this.Lf&&(this.Lf.Pr(),this.Lf=null);this.p()}.bind(a),700))}
f.Ta=function(a){var b=wh("canvas");this.Za.appendChild(b);this.Db=this.Za.clientWidth;this.lb=this.Za.clientHeight;b.width=this.Db;b.height=this.lb;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.Za.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Ic=new Nf;C(this.Ic,qe,this.Nn.bind(this));this.Fd=b;this.f=c;b=new Po(this.Fd);"2d"==a&&(b=new Ro(this.Fd));b.Ta();C(b,me,this.ms.bind(this));C(b,re,this.kA.bind(this));C(b,le,this.Jp.bind(this));this.yc=b;b=new ap(this.Db,this.lb);"2d"==a&&(b=new $o(this.Db,this.lb));b.observe(this.yc);this.Na=b;C(window,"resize",this.On,!1,this)};f.add=function(a){(a instanceof Wo||a instanceof mn||a instanceof Uo)&&a.Ba();this.kf.push(a);this.zj(a)};
f.remove=function(a){if(!this.Fd||!this.f)throw Error("The renderer was not initialized properly.");null!=a&&bd(a);return!1};f.zj=function(a){if(!this.Fd||!this.f)throw Error("The renderer was not initialized properly.");null!=a&&(cd(a,oe)||C(a,oe,this.ER.bind(this)),cd(a,pe)||C(a,pe,this.QR.bind(this)),cd(a,te)||C(a,te,this.eA.bind(this)),cd(a,ve)||C(a,ve,this.gA.bind(this)),cd(a,ue)||C(a,ue,this.fA.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.Oi.Nb,c=b.length,d=0,d=0;d<c;d++)if(b[d].Fe==a)return b[d];return null};
f.p=function(){if(!this.Fd||!this.f)throw Error("The renderer was not initialized properly.");if(null==this.kD){if(this.Ic.Ho.Zx(!1)){if(this.sc.PROGRESSBAR_ENABLED&&!this.Lf&&(this.Lf=new ip(this.Za,3)),this.Qt=this.xq=!1,this.kD=Xf(function(){this.kD=null;this.p()}.bind(this),100),!this.sc.INTERMEDIATE_RENDERING)return}else if(this.xq||this.Qt||(this.Qt=!0,eval("this.onShowtime()"),this.xq=!0),this.Lf){kp(this);return}this.Xw=window.requestAnimationFrame(this.p.bind(this));eval("this.onRender()");
this.lj(!1,!0)}};f.uA=function(){};f.VH=function(){};f.lj=function(){};f.ah=function(){window.cancelAnimationFrame(this.Xw);this.Ic&&(delete this.Ic,this.Ic=null);this.Lf&&(this.Lf.Pr(),delete this.Lf,this.Lf=null);this.Oi.clear();delete this.Oi;this.kf.length=0;delete this.kf;delete this.Ic;this.Ic=null;delete this.Na;this.Na=null;delete this.yc;this.yc=null;delete this.f;this.f=null;S(this.Fd);delete this.Fd;this.Fd=null};function lp(){jp.call(this);this.t="renderer2D";this.ke=null;this.hf=-1;this.Kf=[];this.bD=this.Mt=this.YC=this.Kt=null;this.Lo=this.No=this.Sm=this.Tm=0;this.Jc=this.Kc=this.qc=this.oc=this.VC=-1;this.cD=new Float32Array([-255,-255,-255,-255]);this.jD=!0}k(lp,jp);lp.prototype.tA=function(){};lp.prototype.uS=function(){};lp.prototype.Jp=function(a){lp.g.Jp.call(this,a);var b=this.kf[0];if(b){var c="",c=0==this.hf?"indexX":1==this.hf?"indexY":"indexZ";b[c]=a.Yc?b[c]+1:b[c]-1;eval("this.onScroll();")}};
lp.prototype.vS=function(a){var b=this.kf[0];if(b){var c=b.Jc-b.Kc,d=c/2,e=parseInt(c+c/15*-a.sx,10);a=parseInt(d+d/15*a.fx,10);c==e&&e++;d==a&&a++;b.Kc-=parseInt(d-a,10);b.Kc-=parseInt(c-e,10);b.Kc=Math.max(b.Kc,b.Jf);b.Jc-=parseInt(d-a,10);b.Jc+=parseInt(c-e,10);b.Jc=Math.min(b.Jc,b.Wc);eval("this.onWindowLevel();")}};lp.prototype.__defineGetter__("orientation",function(){return this.ke});
lp.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.hf=2):"SAGITTAL"==a?(a="X",this.hf=0):"CORONAL"==a&&(a="Y",this.hf=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.ke=a});lp.prototype.__defineGetter__("radiological",function(){return this.jD});lp.prototype.__defineSetter__("radiological",function(a){this.jD=a});f=lp.prototype;
f.Ta=function(){if(!this.ke)throw Error("No 2D orientation set.");lp.g.Ta.call(this,"2d");this.f.fillStyle="rgba(50,50,50,0)";this.f.fillRect(0,0,this.Fd.width,this.Fd.height);this.Kt=wh("canvas");this.Mt=wh("canvas");C(this.Na,ne,this.vS.bind(this))};f.On=function(){lp.g.On.call(this);mp(this)};f.ms=function(){lp.g.ms.call(this);mp(this);var a=this.kf[0];a&&(a.Jc=a.Wc,a.Kc=a.Jf)};
f.zj=function(a){lp.g.zj.call(this,a);var b=!1;this.get(a.Fe)&&(b=!0);if(a instanceof F){var c=a.Ca,d=a.r,e=a.gf;if(null!=d&&null!=d.Ca&&d.Ca.T)this.zj(d);else if(null!=e&&null!=e.Ca&&e.Ca.T)this.Ic.load(e,a);else{if(null!=c&&ia(c))if(null!=a.Dj){if(a.Dj.Wr!=c.length||b&&!a.T)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Ic.load(c[b],a);return}else if(null!=c&&c.T){this.Ic.load(a,a);return}c=this.ke;this.hf="X"==c?0:"Y"==c?1:2;this.le=a.m[this.hf].m;e=null;e=0==this.hf?a.indexX:1==this.hf?a.indexY:
a.indexZ;c=a.m[this.hf].m[e].aD;d=a.m[this.hf].m[e].$C;this.No=a.m[this.hf].m[e].Qj;this.Lo=a.m[this.hf].m[e].Jj;this.Tm=c;this.Sm=d;e=this.Kt;e.width=c;e.height=d;var g=this.Mt;g.width=c;g.height=d;this.YC=e.getContext("2d");this.bD=g.getContext("2d");b||(this.Oi.add(a),mp(this))}}};function mp(a){var b=Math.min(a.Db/(a.Tm*a.No),a.lb/(a.Sm*a.Lo));a.Na.na[14]=b}f.Ev=function(){};
f.TJ=function(a,b){var c=this.kf[0],d=this.Na.na,e=null,g=this.Tm,l=this.Sm,m=null,q=null;if("Y"==this.ke)e=this.le[parseInt(c.indexY,10)],m=e.Qj,q=e.Jj,this.Kf[0]="red",this.Kf[1]="blue";else if("Z"==this.ke)e=this.le[parseInt(c.indexZ,10)],m=e.Qj,q=e.Jj,this.Kf[0]="red",this.Kf[1]="green";else{e=this.le[parseInt(c.indexX,10)];m=e.Jj;q=e.Qj;this.Kf[0]="green";this.Kf[1]="blue";var p=g,g=l,l=p}var t=1*d[12],s=-1*d[13],p=Math.max(d[14],.6),d=[this.Db/2,this.lb/2],m=g*m*p,q=l*q*p,u=d[0]-m/2,d=d[1]-
q/2,u=u+t*p,d=d+s*p;return a>u&&a<u+m&&b>d&&b<d+q?(t=(a-u)/m*g,s=(b-d)/q*l,q=e.$L[4],"X"==this.ke?(p=g-t,t=s,s=p):"Y"==this.ke?t=g-t:"Z"==this.ke&&(t=g-t,s=l-s),t=e.ZL+t*e.Qj,s=e.PL+s*e.Jj,t=Hd(t,s,q,1),g=Id(),Ud(e.IL,t,g),l=Id(),Ud(e.JL,t,l),e=Math.round((c.h[0].P[0]*l[0]+c.h[0].P[1]*l[1]+c.h[0].P[2]*l[2]+c.h[0].ix)/c.h[0].Mo),e>=c.h[0].Aa?e=c.h[0].Aa-1:0>e&&(e=0),t=Math.round((c.h[1].P[0]*l[0]+c.h[1].P[1]*l[1]+c.h[1].P[2]*l[2]+c.h[1].ix)/c.h[1].Mo),t>=c.h[1].Aa?t=c.h[1].Aa-1:0>t&&(t=0),s=Math.round((c.h[2].P[0]*
l[0]+c.h[2].P[1]*l[1]+c.h[2].P[2]*l[2]+c.h[2].ix)/c.h[2].Mo),s>=c.h[2].Aa?s=c.h[2].Aa-1:0>s&&(s=0),[[e,t,s],[g[0],g[1],g[2]],[l[0],l[1],l[2]]]):null};
f.lj=function(a,b){lp.g.lj.call(this,a,b);if(0!=this.Oi.Nb.length){var c=this.kf[0],d=null,d=0==this.hf?c.indexX:1==this.hf?c.indexY:c.indexZ,e=this.le[parseInt(d,10)].aD,g=this.le[parseInt(d,10)].$C;this.No=this.le[parseInt(d,10)].Qj;this.Lo=this.le[parseInt(d,10)].Jj;this.Tm=e;this.Sm=g;var l=this.Db,m=this.lb,q=this.Na.na;this.f.save();this.f.clearRect(-l,-m,2*l,2*m);this.f.restore();var p=Math.max(q[14],.1);this.f.setTransform(p,0,0,p,0,0);var t=1*q[12],q=-1*q[13],s=null;c.r&&(s=c.r.px);var u=
this.le[parseInt(d,10)],v=u.Cb.dl,u=u.r,D=null;u&&(D=u.dl);var B=this.Tm,I=this.Sm,G=this.YC,Q=this.bD,M=G.getImageData(0,0,B,I),L=Q.getImageData(0,0,B,I),J=M.data,H=L.data,O=J.length,N=c.Wc,Y=c.oc,K=c.qc,y=c.Kc/N,z=c.Jc/N;if(this.VC!=d||this.oc!=Y||this.qc!=K||this.Kc!=y||this.Jc!=z||s&&!Yo(s,this.cD,0)){var ga=this.Kt;ga.width=e;ga.height=g;ga=this.Mt;ga.width=e;ga.height=g;e=0;do{var ga=[0,0,0,0],g=[0,0,0,0],Z=v[e]/255*N,E=v[e],E=(E/255-y)/(z-y),E=255*E;Z>=Y&&Z<=K&&(ga=new vd(c.$k[0],c.$k[1],c.$k[2]),
ga=(new vd(c.Yk[0],c.Yk[1],c.Yk[2])).scale(E).add(ga.scale(255-E)),ga=[Math.floor(ga.x),Math.floor(ga.y),Math.floor(ga.z),255],u&&(-255==s[3]?g=[D[e],D[e+1],D[e+2],D[e+3]]:Yo(s,D,e)&&(g=[D[e],D[e+1],D[e+2],D[e+3]])));"X"==this.ke?(J[e]=ga[0],J[e+1]=ga[1],J[e+2]=ga[2],J[e+3]=ga[3],H[e]=g[0],H[e+1]=g[1],H[e+2]=g[2],H[e+3]=g[3]):"Y"==this.ke?(E=Math.floor(e/(4*B)),E=E*B*4+(4*(B-1)-(e-E*B*4)),J[E]=ga[0],J[E+1]=ga[1],J[E+2]=ga[2],J[E+3]=ga[3],H[E]=g[0],H[E+1]=g[1],H[E+2]=g[2],H[E+3]=g[3]):(E=O-1-e,J[E-
3]=ga[0],J[E-2]=ga[1],J[E-1]=ga[2],J[E]=ga[3],H[E-3]=g[0],H[E-2]=g[1],H[E-1]=g[2],H[E]=g[3]);e+=4}while(e<O);G.putImageData(M,0,0);Q.putImageData(L,0,0);this.VC=d;this.oc=Y;this.qc=K;this.Kc=y;this.Jc=z;u&&(this.cD=s)}this.f.globalAlpha=1;this.f.translate(l/2/p,m/2/p);"X"==this.ke&&(this.f.rotate(.5*Math.PI),d=t,t=q,q=-d);t=-B*this.No/2+t;q=-I*this.Lo/2+q;this.f.drawImage(this.Kt,t,q,B*this.No,I*this.Lo);u&&c.r.bc&&(this.f.globalAlpha=c.r.je,this.f.drawImage(this.Mt,t,q,B*this.No,I*this.Lo));this.sc.SLICENAVIGATORS&&
this.yc.Pt&&this.yc.Tt&&!this.yc.Ni&&(t=this.yc.ie,t=this.TJ(t[0],t[1]))&&(c.Kj=t[0][0],c.Lj=t[0][1],c.Mj=t[0][2],c.Ba(!1),this.onSliceNavigation(),this.f.setTransform(1,0,0,1,0,0),this.f.lineWidth=1,this.f.beginPath(),this.f.moveTo(this.yc.ie[0],0),this.f.lineTo(this.yc.ie[0],this.yc.ie[1]-10),this.f.moveTo(this.yc.ie[0],this.yc.ie[1]+10),this.f.lineTo(this.yc.ie[0],this.lb),this.f.strokeStyle=this.Kf[0],this.f.stroke(),this.f.closePath(),this.f.beginPath(),this.f.moveTo(0,this.yc.ie[1]),this.f.lineTo(this.yc.ie[0]-
10,this.yc.ie[1]),this.f.moveTo(this.yc.ie[0]+10,this.yc.ie[1]+.5),this.f.lineTo(this.Db,this.yc.ie[1]),this.f.strokeStyle=this.Kf[1],this.f.stroke(),this.f.closePath(),this.f.font="10pt Arial",this.f.textAlign="left",this.f.textBaseline="top",this.f.fillStyle="white",this.f.fillText("RAS: "+t[2][0].toFixed(2)+", "+t[2][1].toFixed(2)+", "+t[2][2].toFixed(2),0,0),B=u=q="undefined","undefined"!=typeof c.od[t[1][2].toFixed(0)]&&"undefined"!=typeof c.od[t[1][2].toFixed(0)][t[1][1].toFixed(0)]&&(q=c.od[t[1][2].toFixed(0)][t[1][1].toFixed(0)][t[1][0].toFixed(0)],
c.Sb&&(u=c.r.od[t[1][2].toFixed(0)][t[1][1].toFixed(0)][t[1][0].toFixed(0)],c.r.uq&&(B=c.r.uq.get(u),"undefined"!=typeof B&&(B=B[0])))),this.f.fillText("Background:  "+q+" ("+t[1][0].toFixed(0)+", "+t[1][1].toFixed(0)+", "+t[1][2].toFixed(0)+")",0,15),c.Sb&&this.f.fillText("Labelmap:  "+B+" ("+u+")",0,30))}};h("X.renderer2D",lp);h("X.renderer2D.prototype.init",lp.prototype.Ta);h("X.renderer2D.prototype.add",lp.prototype.add);h("X.renderer2D.prototype.onShowtime",lp.prototype.uA);
h("X.renderer2D.prototype.onRender",lp.prototype.VH);h("X.renderer2D.prototype.onScroll",lp.prototype.tA);h("X.renderer2D.prototype.onWindowLevel",lp.prototype.uS);h("X.renderer2D.prototype.get",lp.prototype.get);h("X.renderer2D.prototype.resetViewAndRender",lp.prototype.ms);h("X.renderer2D.prototype.xy2ijk",lp.prototype.TJ);h("X.renderer2D.prototype.render",lp.prototype.p);h("X.renderer2D.prototype.destroy",lp.prototype.ah);h("X.renderer2D.prototype.onSliceNavigation",lp.prototype.Ev);V.d={};V.d.ng=function(){gd.call(this)};k(V.d.ng,gd);h("xiv.vis.RenderEngine",V.d.ng);V.d.ng.prototype.ID_PREFIX="xiv.vis.RenderEngine";V.d.ng.ro="isSelectedVolume"+r();h("xiv.vis.RenderEngine.EventType",{NV:"z",LV:"A",MV:"B"});h("xiv.vis.RenderEngine.SELECTED_VOL_KEY",V.d.ng.ro);h("xiv.vis.RenderEngine.prototype.ID_PREFIX",V.d.ng.prototype.ID_PREFIX);P.u={};h("gxnat.slicerNode",P.u);
P.u.QF=function(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";
break;case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b};P.u.Gk=function(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})};h("gxnat.slicerNode.getDisplayNodeTypes",P.u.QF);h("gxnat.slicerNode.toFloatArray",P.u.Gk);P.u.Node=function(){pa(this)};h("gxnat.slicerNode.Node",P.u.Node);P.u.hq=function(a,b){P.u.Node.call(this);this.backgroundColor=this.constructor.tv(a);this.eE=this.constructor.tv(b)};k(P.u.hq,P.u.Node);h("gxnat.slicerNode.BackgroundColor",P.u.hq);P.u.hq.tv=function(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"};h("gxnat.slicerNode.BackgroundColor.mrmlColorToRgb",P.u.hq.tv);V.d.Ma=function(){gd.call(this);this.io=[]};k(V.d.Ma,gd);h("xiv.vis.XtkPlane",V.d.Ma);V.d.Ma.ht=[-300,300,300];V.d.Ma.RB="black";V.d.Ma.prototype.yp=!0;V.d.Ma.prototype.Ug;f=V.d.Ma.prototype;f.wo=null;f.orientation=null;f.ls=null;f.gb=null;f.Yj=null;f.ec=function(){return this.gb};f.$c=function(){return this.orientation};
f.Xv=function(a){null!=this.gb&&(null!=a?(this.hu=a,this.gb.Uj.focus=a.focus,this.gb.Uj.position=a.position,this.gb.Uj.ow=a.ow,a instanceof So&&(this.gb.Uj.view=a.view)):this.gb.Uj.position=this.constructor.ht)};f.Wv=function(a){this.Yj.style.background=null!=a?ka(a)?a:null!=a.eE?"-webkit-linear-gradient(top, "+a.eE+", "+a.backgroundColor+")":a.backgroundColor:V.d.Ma.RB};f.eO=function(){return this.qu};f.cO=function(){return this.Yj};
f.Wn=function(a){this.Yj=a;null!=this.gb||this.Ta(a);this.gb.Yj=a};f.vA=function(a){this.dispatchEvent(a)};f.Ta=function(a){null!=this.gb&&(bd(this.gb),this.gb.ah(),this.gb=null);if(null==this.wo)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.gb=new this.wo;this.gb.orientation=this.orientation;this.Wn(a||this.Yj||document.body);this.gb.Ta();C(this.gb,"A",function(a){this.dispatchEvent({type:"A",value:a.value})}.bind(this));C(this.gb,"C",this.vA.bind(this))};
f.add=function(a){this.yp&&(!0==a.isSelectedVolume&&(this.qu=a),this.io.push(a),this.gb.add(a))};f.isEnabled=function(){return this.yp};function np(a){null!=a.Ug&&(S(a.Ug),delete a.Ug)}
function op(a){a.Ug=wh("div",{id:"DisabledOverlay_"+r()});a.Ug.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=wh("div",{id:"DisabledOverlay_"+r()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.Ug.appendChild(c);a.Yj.appendChild(a.Ug)}
f.xd=function(a){(this.yp=!1!==a)?T.un(this.Ug,200,function(){this.Ug.style.visibility="hidden";np(this)}.bind(this)):(null!=this.Ug||op(this),this.Ug.style.visibility="visible",T.nr(this.Ug,200,function(){}.bind(this)))};f.restore=function(){window.console.log("\n\nrestore");this.Ta();pp(this);null!=this.hu&&this.Xv(this.hu);null!=this.Yg&&this.Wv(this.Yg);this.p()};f.gT=function(){A(this.io,function(a){null!=a&&this.gb.remove(a)}.bind(this))};
function pp(a){A(a.io,function(a){window.console.log("adding",a);this.gb.add(a)}.bind(a))}f.p=function(){this.yp?this.gb.p():window.console.log("Plane"+this.orientation+" is switched off.")};f.o=function(){null!=this.gb&&this.gb.ri()};
f.k=function(){V.d.Ma.g.k.call(this);null!=this.gb&&(this.gb.ah(),delete this.gb);np(this);null!=this.Yg&&delete this.Yg;null!=this.hu&&delete this.hu;null!=this.ls&&(null!=this.ls.k&&(this.ls.stop(),this.ls.k()),delete this.ls);delete this.yp;delete this.wo;delete this.Yj;delete this.orientation;delete this.io;delete this.qu;delete this.QY};h("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",V.d.Ma.ht);h("xiv.vis.XtkPlane.DEFAULT_BACKGROUND",V.d.Ma.RB);h("xiv.vis.XtkPlane.prototype.XRenderer",V.d.Ma.prototype.wo);
h("xiv.vis.XtkPlane.prototype.orientation",V.d.Ma.prototype.orientation);h("xiv.vis.XtkPlane.prototype.Renderer",V.d.Ma.prototype.gb);h("xiv.vis.XtkPlane.prototype.container",V.d.Ma.prototype.Yj);h("xiv.vis.XtkPlane.prototype.getRenderer",V.d.Ma.prototype.ec);h("xiv.vis.XtkPlane.prototype.getOrientation",V.d.Ma.prototype.$c);h("xiv.vis.XtkPlane.prototype.setCamera",V.d.Ma.prototype.Xv);h("xiv.vis.XtkPlane.prototype.setBackground",V.d.Ma.prototype.Wv);
h("xiv.vis.XtkPlane.prototype.getCurrentVolume",V.d.Ma.prototype.eO);h("xiv.vis.XtkPlane.prototype.getContainer",V.d.Ma.prototype.cO);h("xiv.vis.XtkPlane.prototype.setContainer",V.d.Ma.prototype.Wn);h("xiv.vis.XtkPlane.prototype.init",V.d.Ma.prototype.Ta);h("xiv.vis.XtkPlane.prototype.add",V.d.Ma.prototype.add);h("xiv.vis.XtkPlane.prototype.isEnabled",V.d.Ma.prototype.isEnabled);h("xiv.vis.XtkPlane.prototype.setEnabled",V.d.Ma.prototype.xd);h("xiv.vis.XtkPlane.prototype.restore",V.d.Ma.prototype.restore);
h("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",V.d.Ma.prototype.gT);h("xiv.vis.XtkPlane.prototype.render",V.d.Ma.prototype.p);h("xiv.vis.XtkPlane.prototype.updateStyle",V.d.Ma.prototype.o);h("xiv.vis.XtkPlane.prototype.dispose",V.d.Ma.prototype.k);function qp(a,b){if(a instanceof qp)this.Ge=a.sB();else{var c;if(c=ja(a))a:{for(var d=c=0;d<a.length;d++){if(!ja(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!ma(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.Ge=Rb(a);else if(a instanceof bh)this.Ge=rp(a.height,a.width);else if(ma(a)&&ma(b)&&0<a&&0<b)this.Ge=rp(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.Ue=new bh(this.Ge[0].length,this.Ge.length)}
function sp(a,b,c){for(var d=0;d<a.Hl().height;d++)for(var e=0;e<a.Hl().width;e++)b.call(c,a.Ge[d][e],d,e,a)}function tp(a,b){var c=new qp(a.Hl());sp(a,function(d,e,g){c.Ge[e][g]=b.call(void 0,d,e,g,a)});return c}function rp(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=qp.prototype;f.add=function(a){if(!ch(this.Ue,a.Hl()))throw Error("Matrix summation is only supported on arrays of equal size");return tp(this,function(b,c,d){return b+a.Ge[c][d]})};
f.ep=function(a,b){if(this.Ue.width!=a.Ue.width||this.Ue.height!=a.Ue.height)return!1;for(var c=b||0,d=0;d<this.Ue.height;d++)for(var e=0;e<this.Ue.width;e++)if(!(Math.abs(this.Ge[d][e]-a.Ge[d][e])<=(c||1E-6)))return!1;return!0};f.Hl=function(){return this.Ue};
f.multiply=function(a){if(a instanceof qp){if(this.Ue.width!=a.Hl().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return up(this,a)}if(ma(a))return vp(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.Ld=function(a){if(!ch(this.Ue,a.Hl()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return tp(this,function(b,c,d){return b-a.Ge[c][d]})};
f.sB=function(){return this.Ge};f.toString=function(){var a=0;sp(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];A(this.Ge,function(c){b.push("[ ");A(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function wp(a,b,c){return 0<=b&&b<a.Ue.height&&0<=c&&c<a.Ue.width}
function up(a,b){var c=new qp(a.Ue.height,b.Hl().width);sp(c,function(a,e,g){for(var l=a=0;l<this.Ue.width;l++)a+=(wp(this,e,l)?this.Ge[e][l]:0)*(wp(b,l,g)?b.Ge[l][g]:0);if(!wp(c,e,g))throw Error("Index out of bounds when setting matrix value, ("+e+","+g+") in size ("+c.Ue.height+","+c.Ue.width+")");c.Ge[e][g]=a},a);return c}function vp(a,b){return tp(a,function(a){return a*b})};V.d.Bb=function(){lp.call(this)};k(V.d.Bb,lp);h("xiv.vis.XtkRenderer2D",V.d.Bb);f=V.d.Bb.prototype;f.ri=function(){this.On()};f.tA=function(){this.Ev()};f.Nn=function(a){V.d.Bb.g.Nn.call(this,a);this.dispatchEvent({type:"A",value:a.Vm})};f.Ta=function(){this.mu.PROGRESSBAR_ENABLED=!1;V.d.Bb.g.Ta.call(this);this.Sl.TH=this.wR.bind(this);this.Sl.mu.BV=!1;this.Sl.mu.zV=!1;this.Sl.mu.nV=!1;this.Sl.Ta()};f.$c=function(){return this.ke};f.YN=function(){return this.Na};f.OO=function(){return this.Sl.Uz};
f.wQ=function(){};f.wR=function(){this.dispatchEvent({type:"mouseover",Uz:this.Sl.Uz,eJ:this.Sl.Tt})};f.Ev=function(){this.dispatchEvent({type:"D",volume:this.kf[0],NX:this.kf[0]["index"+this.ke],MX:this.ke,eJ:this.Sl.Tt})};f.p=function(){this.Fd&&this.f?(V.d.Bb.g.p.call(this),this.dispatchEvent({type:"B"})):this.Ta()};f.ZN=function(){return this.Fd};f.zr=function(){return this.kf[0]};f.hG=function(){if(null!=this.le)return this.le.length};f.xG=function(){return this.Na.na[14]};
f.cJ=function(a){this.Na.na[14]=a};f.cq=function(){this.Na.na[14]+=.03};f.dq=function(){this.Na.na[14]+=-.03};
function xp(a,b,c,d){var e=a.kf[0],g=a.Na.na,l=null,m=a.Tm,q=a.Sm,p=null,t=null;if(null!=e){"Y"==a.ke?(l=a.le[parseInt(e.indexY,10)],p=l.Qj,t=l.Jj,a.Kf[0]="red",a.Kf[1]="blue"):"Z"==a.ke?(l=a.le[parseInt(e.indexZ,10)],p=l.Qj,t=l.Jj,a.Kf[0]="red",a.Kf[1]="green"):(l=a.le[parseInt(e.indexX,10)],p=l.Jj,t=l.Qj,a.Kf[0]="green",a.Kf[1]="blue",e=m,m=q,q=e);var e=1*g[12],l=-1*g[13],g=Math.max(g[14],.6),s=[a.Db/2,a.lb/2],p=m*p*g,t=q*t*g,u=s[0]-p/2,s=s[1]-t/2,u=u+e*g,s=s+l*g;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,m),d?u+(a.Tm-b)/m*p:u+b/m*p;b=Math.max(0,b);b=Math.min(b,q);return d?s+(a.Sm-b)/q*t:s+b/q*t}}f.sG=function(a,b){return xp(this,a,"vertical",b)};f.YF=function(a,b){return xp(this,a,"horizontal",b)};f.ah=function(){V.d.Bb.g.ah.call(this)};h("xiv.vis.XtkRenderer2D.prototype.onResize",V.d.Bb.prototype.ri);h("xiv.vis.XtkRenderer2D.prototype.onScroll",V.d.Bb.prototype.tA);h("xiv.vis.XtkRenderer2D.prototype.onProgress",V.d.Bb.prototype.Nn);h("xiv.vis.XtkRenderer2D.prototype.init",V.d.Bb.prototype.Ta);
h("xiv.vis.XtkRenderer2D.prototype.getOrientation",V.d.Bb.prototype.$c);h("xiv.vis.XtkRenderer2D.prototype.getCamera",V.d.Bb.prototype.YN);h("xiv.vis.XtkRenderer2D.prototype.getMousePosition",V.d.Bb.prototype.OO);h("xiv.vis.XtkRenderer2D.prototype.isMouseOver",V.d.Bb.prototype.wQ);h("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",V.d.Bb.prototype.Ev);h("xiv.vis.XtkRenderer2D.prototype.render",V.d.Bb.prototype.p);h("xiv.vis.XtkRenderer2D.prototype.getCanvas",V.d.Bb.prototype.ZN);
h("xiv.vis.XtkRenderer2D.prototype.getVolume",V.d.Bb.prototype.zr);h("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",V.d.Bb.prototype.hG);h("xiv.vis.XtkRenderer2D.prototype.getZoom",V.d.Bb.prototype.xG);h("xiv.vis.XtkRenderer2D.prototype.setZoom",V.d.Bb.prototype.cJ);h("xiv.vis.XtkRenderer2D.prototype.zoomIn",V.d.Bb.prototype.cq);h("xiv.vis.XtkRenderer2D.prototype.zoomOut",V.d.Bb.prototype.dq);h("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",V.d.Bb.prototype.sG);
h("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",V.d.Bb.prototype.YF);h("xiv.vis.XtkRenderer2D.prototype.destroy",V.d.Bb.prototype.ah);V.d.rg=function(a){V.d.Ma.call(this);this.orientation=a;this.wo=V.d.Bb;this.qu=null};k(V.d.rg,V.d.Ma);h("xiv.vis.XtkPlane2D",V.d.rg);f=V.d.rg.prototype;f.mG=function(){return this.gb.mG()};f.nG=function(){return this.gb.nG()};f.zr=function(){return null!=this.gb?this.gb.zr():null};f.Wn=function(a){V.d.rg.g.Wn.call(this,a)};f.k=function(){V.d.rg.g.k.call(this);delete this.qu;delete this.xY;delete this.yY};h("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",V.d.rg.prototype.mG);
h("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",V.d.rg.prototype.nG);h("xiv.vis.XtkPlane2D.prototype.getVolume",V.d.rg.prototype.zr);h("xiv.vis.XtkPlane2D.prototype.setContainer",V.d.rg.prototype.Wn);h("xiv.vis.XtkPlane2D.prototype.dispose",V.d.rg.prototype.k);P.u.mo=function(a,b){P.u.Node.call(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;A(P.u.QF(b),function(b){A(a.getElementsByTagName(b),function(a){d.push(a)})});for(var g=0,l=d.length;g<l;g++)if(-1<c.indexOf(d[g].getAttribute("id"))){e=d[g];break}this.hr=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=P.u.Gk(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=P.u.Gk(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")};
k(P.u.mo,P.u.Node);h("gxnat.slicerNode.Display",P.u.mo);P.u.qt=function(a,b){P.u.mo.call(this,a,b)};k(P.u.qt,P.u.mo);h("gxnat.slicerNode.Mesh",P.u.qt);P.u.Tk=function(a,b,c){P.u.mo.call(this,a,b);for(var d=0,e,g,l,m;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=tp(new qp(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:g=sliceToRASMatrix;break;case 1:l=sliceToRASMatrix;break;case 2:m=sliceToRASMatrix}this.Rp=new P.u.Tk.Rp(l,m,g);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,g=a.length;d<g&&!(c="true"===a[d].getAttribute("sliceVisibility")||
!1);d++);this.$u=b;this.Aj=this.hr?parseInt(this.hr.getAttribute("upperThreshold")):null;this.qk=this.hr?parseInt(this.hr.getAttribute("lowerThreshold")):null;this.visible=c};k(P.u.Tk,P.u.mo);h("gxnat.slicerNode.Volume",P.u.Tk);P.u.Tk.Rp=function(a,b,c){var d=new qp([[0],[0],[0],[1]]);A([a,b,c],function(a,b){var c=a.multiply(d).sB(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.qT=c;break;case 1:this.OM=c;break;case 2:this.wM=c}}.bind(this))};h("gxnat.slicerNode.Volume.sliceToRAS",P.u.Tk.Rp);P.u.vt=function(a,b,c,d,e,g,l,m){P.u.Node.call(this);this.element=a;this.Uj=b;this.backgroundColor=c;this.hH=d;this.Sq=e;this.Jk=g;this.Mz=l;this.yy=m};k(P.u.vt,P.u.Node);h("gxnat.slicerNode.SceneView",P.u.vt);P.d={};P.d.Gm=function(a){Cc.call(this);a instanceof P.u.vt?(this.Sq=a.Sq,this.Uj=a.Uj,this.backgroundColor=a.backgroundColor,this.hH=a.hH):a instanceof P.u.Tk?(this.origin=a.origin||[0,0,0],this.Aj=a.Aj||1E4,this.qk=a.qk||-1E4,this.bt=a.bt||!1,this.$u=a.$u||!1,this.Rp=a.Rp||null,a.ej&&(this.eH=a.labelMapFile,this.CQ=a.colorTableFile)):a instanceof P.u.qt&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)};k(P.d.Gm,Cc);h("gxnat.vis.RenderProperties",P.d.Gm);
P.d.Gm.prototype.k=function(){P.d.Gm.g.k.call(this);wb(this)};h("gxnat.vis.RenderProperties.prototype.dispose",P.d.Gm.prototype.k);var yp={};
function zp(){return function b(c,d,e){function g(m,p){if(!d[m]){if(!c[m]){var t="function"==typeof require&&require;if(!p&&t)return t(m,!0);if(l)return l(m,!0);throw Error("Cannot find module '"+m+"'");}t=d[m]={Ac:{}};c[m][0].call(t.Ac,function(b){var d=c[m][1][b];return g(d?d:b)},t,t.Ac,b,c,d,e)}return d[m].Ac}for(var l="function"==typeof require&&require,m=0;m<e.length;m++)g(e[m]);return g}({1:[function(b,c,d){d.uy=function(b){for(var c="",d,m,q,p,t,s,u=0;u<b.length;)d=b.charCodeAt(u++),m=b.charCodeAt(u++),
q=b.charCodeAt(u++),p=d>>2,d=(d&3)<<4|m>>4,t=(m&15)<<2|q>>6,s=q&63,isNaN(m)?t=s=64:isNaN(q)&&(s=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s);return c};d.iy=function(b){var c="",d,m,q,p,t,s=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,
"");s<b.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),d=d<<2|m>>4,m=(m&15)<<4|p>>2,q=(p&3)<<6|t,c+=String.fromCharCode(d),64!=p&&(c+=String.fromCharCode(m)),64!=t&&(c+=
String.fromCharCode(q));return c}},{}],2:[function(b,c){function d(){this.crc32=this.Ch=this.bi=0;this.Vo=this.ol=null}d.prototype={Tf:function(){return null},Iy:function(){return null}};c.Ac=d},{}],3:[function(b,c,d){d.iW={Cp:"\x00\x00",Wx:function(b){return b},GJ:function(b){return b},Xx:null,HJ:null};d.UU=b("./flate")},{"./flate":6}],4:[function(b,c){function d(){this.data=null;this.index=this.length=0}var e=b("./utils");d.prototype={Qx:function(b){this.qE(this.index+b)},qE:function(b){if(this.length<
b||0>b)throw Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?");},em:function(b){this.qE(b);this.index=b},iJ:function(b){this.em(this.index+b)},Kx:function(){},za:function(b){var c=0,d;this.Qx(b);for(d=this.index+b-1;d>=this.index;d--)c=(c<<8)+this.Kx(d);this.index+=b;return c},uh:function(b){return e.yd("string",this.Ov(b))},Ov:function(){},gv:function(){},WS:function(){var b=this.za(4);return new Date((b>>25&127)+1980,(b>>21&15)-1,b>>16&31,b>>11&31,
b>>5&63,(b&31)<<1)}};c.Ac=d},{"./utils":14}],5:[function(b,c,d){d.Xh=!1;d.Pi=!1;d.dir=!1;d.ei=null;d.Wo=null},{}],6:[function(b,c,d){c="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;var e=b("pako");d.HJ=c?"uint8array":"array";d.Xx=c?"uint8array":"array";d.Cp="\b\x00";d.Wx=function(b){return e.dN(b)};d.GJ=function(b){return e.iQ(b)}},{pako:19}],7:[function(b,c){function d(b,c){if(!(this instanceof d))return new d(b,c);this.files={};this.root="";
b&&this.load(b,c);this.clone=function(){var b=new d,c;for(c in this)"function"!==typeof this[c]&&(b[c]=this[c]);return b}}d.prototype.files=void 0;d.prototype.remove=void 0;d.prototype=b("./object");d.prototype.load=b("./load");d.$Y=b("./support");d.YX=b("./defaults");d.eZ=b("./utils");d.Xh=b("./base64");d.TX=b("./compressions");c.Ac=d},{"./base64":1,"./compressions":3,"./defaults":5,"./load":8,"./object":9,"./support":12,"./utils":14}],8:[function(b,c){var d=b("./base64"),e=b("./zipEntries");c.Ac=
function(b,c){var m,q,p;c=c||{};c.Xh&&(b=d.iy(b));m=(new e(b,c)).files;for(q=0;q<m.length;q++)p=m[q],this.file(p.fileName,p.Ui,{Pi:!0,YH:!0,ei:p.ei,dir:p.dir});return this}},{"./base64":1,"./zipEntries":15}],9:[function(b,c){function d(b){this.data=new Uint8Array(b);this.index=0}function e(){this.data=[]}function g(b){"/"!=b.slice(-1)&&(b+="/");this.files[b]||l.call(this,b,null,{dir:!0});return this.files[b]}function l(b,c,d){var e,l=b;"/"==l.slice(-1)&&(l=l.substring(0,l.length-1));e=l.lastIndexOf("/");
e=0<e?l.substring(0,e):"";l=v.Il(c);e&&g.call(this,e);d=d||{};!0!==d.Xh||null!==d.Pi&&void 0!==d.Pi||(d.Pi=!0);d=m(d,B);d.ei=d.ei||new Date;null!==d.Wo&&(d.Wo=d.Wo.toUpperCase());if(d.dir||null===c||"undefined"===typeof c)d.Xh=!1,d.Pi=!1,c=null;else if("string"===l)d.Pi&&!d.Xh&&!0!==d.YH&&(c=v.rJ(c));else{d.Xh=!1;d.Pi=!0;if(!(l||c instanceof Q))throw Error("The data of '"+b+"' is in an unsupported format !");"arraybuffer"===l&&(c=v.yd("uint8array",c))}c=new p(b,c,d);return this.files[b]=c}function m(){var b=
{},c,d;for(c=0;c<arguments.length;c++)for(d in arguments[c])arguments[c].hasOwnProperty(d)&&"undefined"===typeof b[d]&&(b[d]=arguments[c][d]);return b}function q(b,c){var d="",e;for(e=0;e<c;e++)d+=String.fromCharCode(b&255),b>>>=8;return d}function p(b,c,d){this.name=b;this.ta=c;this.options=d}function t(b){var c=s(b);if("string"===v.Il(c)){if(!b.options.Pi){if(L)return L.uy(c);if(u.vv)return M(c,"utf-8")}return b.rM()}return c}function s(b){if(b.ta instanceof Q&&(b.ta=b.ta.Tf(),b.options.Pi=!0,b.options.Xh=
!1,"uint8array"===v.Il(b.ta))){var c=b.ta;b.ta=new Uint8Array(c.length);0!==c.length&&b.ta.set(c,0)}return b.ta}var u=b("./support"),v=b("./utils"),D=b("./signature"),B=b("./defaults"),I=b("./base64"),G=b("./compressions"),Q=b("./compressedObject"),M=b("./nodeBuffer"),L,J;u.xB&&"function"===typeof TextEncoder&&"function"===typeof TextDecoder&&(L=new TextEncoder("utf-8"),J=new TextDecoder("utf-8"));p.prototype={rM:function(){var b;b=s(this);null===b||"undefined"===typeof b?b="":(this.options.Xh&&(b=
I.iy(b)),b=v.yd("string",b),this.options.Pi||(b=H.MJ(b)));return b},tM:function(){var b=t(this);return v.yd("uint8array",b)},qM:function(){return this.tM().buffer}};e.prototype={append:function(b){b=v.yd("string",b);this.data.push(b)},vF:function(){return this.data.join("")}};d.prototype={append:function(b){0!==b.length&&(b=v.yd("uint8array",b),this.data.set(b,this.index),this.index+=b.length)},vF:function(){return this.data}};var H={load:function(){throw Error("Load method is not defined. Is the file jszip-load.js included ?");
},filter:function(b){var c=[],d,e,g;for(d in this.files)this.files.hasOwnProperty(d)&&(e=this.files[d],g=new p(e.name,e.ta,m(e.options)),e=d.slice(this.root.length,d.length),d.slice(0,this.root.length)===this.root&&b(e,g)&&c.push(g));return c},file:function(b,c,d){if(1===arguments.length){if(v.cH(b)){var e=b;return this.filter(function(b,c){return!c.options.dir&&e.test(b)})}return this.filter(function(c,d){return!d.options.dir&&c===b})[0]||null}b=this.root+b;l.call(this,b,c,d);return this},jY:function(b){if(!b)return this;
if(v.cH(b))return this.filter(function(c,d){return d.options.dir&&b.test(c)});var c=g.call(this,this.root+b),d=this.clone();d.root=c.name;return d},remove:function(b){b=this.root+b;var c=this.files[b];c||("/"!=b.slice(-1)&&(b+="/"),c=this.files[b]);if(c)if(c.options.dir)for(var c=this.filter(function(c,d){return d.name.slice(0,b.length)===b}),d=0;d<c.length;d++)delete this.files[c[d].name];else delete this.files[b];return this},lY:function(b){b=m(b||{},{Xh:!0,Wo:"STORE",type:"base64"});v.Rx(b.type);
var c=[],g=0,l=0,y;for(y in this.files)if(this.files.hasOwnProperty(y)){var p=this.files[y],s=p.options.Wo||b.Wo.toUpperCase(),L=G[s];if(!L)throw Error(s+" is not a valid compression method !");var s=p,u=new Q,B=void 0;if(s.ta instanceof Q)u.Ch=s.ta.Ch,u.crc32=s.ta.crc32,0===u.Ch||s.options.dir?(L=G.STORE,u.Vo="",u.crc32=0):s.ta.ol===L.Cp?u.Vo=s.ta.Iy():(B=s.ta.Tf(),u.Vo=L.Wx(v.yd(L.Xx,B)));else{B=t(s);if(!B||0===B.length||s.options.dir)L=G.STORE,B="";u.Ch=B.length;u.crc32=this.crc32(B);u.Vo=L.Wx(v.yd(L.Xx,
B))}u.bi=u.Vo.length;u.ol=L.Cp;var L=s=u,u=g,B=this.MJ(p.name),M=B!==p.name,J=p.options,H=void 0,sa=void 0,jb="",ob="",H=J.ei.getHours(),H=H<<6,H=H|J.ei.getMinutes(),H=H<<5,H=H|J.ei.getSeconds()/2,sa=J.ei.getFullYear()-1980,sa=sa<<4,sa=sa|J.ei.getMonth()+1,sa=sa<<5,sa=sa|J.ei.getDate();M&&(ob=q(1,1)+q(this.crc32(B),4)+B,jb+="up"+q(ob.length,2)+ob);J="";J+="\n\x00";J+=M?"\x00\b":"\x00\x00";J+=L.ol;J+=q(H,2);J+=q(sa,2);J+=q(L.crc32,4);J+=q(L.bi,4);J+=q(L.Ch,4);J+=q(B.length,2);J+=q(jb.length,2);p={sF:D.pC+
J+B+jb,aF:D.PB+"\u0014\x00"+J+"\x00\x00\x00\x00\x00\x00"+(!0===p.options.dir?"\u0010\x00\x00\x00":"\x00\x00\x00\x00")+q(u,4)+B+jb,LM:L};g+=p.sF.length+s.bi;l+=p.aF.length;c.push(p)}y="";y=D.xw+"\x00\x00\x00\x00"+q(c.length,2)+q(c.length,2)+q(l,4)+q(g,4)+"\x00\x00";s=b.type.toLowerCase();g="uint8array"===s||"arraybuffer"===s||"blob"===s||"nodebuffer"===s?new d(g+l+y.length):new e;for(l=0;l<c.length;l++)g.append(c[l].sF),g.append(c[l].LM.Vo);for(l=0;l<c.length;l++)g.append(c[l].aF);g.append(y);c=g.vF();
switch(b.type.toLowerCase()){case "uint8array":case "arraybuffer":case "nodebuffer":return v.yd(b.type.toLowerCase(),c);case "blob":return v.bE(v.yd("arraybuffer",c));case "base64":return b.Xh?I.uy(c):c;default:return c}},crc32:function(b,c){if("undefined"===typeof b||!b.length)return 0;var d="string"!==v.Il(b),e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,
4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,
31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,
1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,
1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,
2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,
3272380065,1510334235,755167117];"undefined"==typeof c&&(c=0);var g=0,g=g=0;c^=-1;for(var l=0,m=b.length;l<m;l++)g=d?b[l]:b.charCodeAt(l),g=(c^g)&255,g=e[g],c=c>>>8^g;return c^-1},MJ:function(b){if(L)return v.yd("string",L.uy(b));if(u.vv)return v.yd("string",M(b,"utf-8"));for(var c=[],d=0,e=0;e<b.length;e++){var g=b.charCodeAt(e);128>g?c[d++]=String.fromCharCode(g):(127<g&&2048>g?c[d++]=String.fromCharCode(g>>6|192):(c[d++]=String.fromCharCode(g>>12|224),c[d++]=String.fromCharCode(g>>6&63|128)),c[d++]=
String.fromCharCode(g&63|128))}return c.join("")},EB:function(b){var c=[],d=0,e="string"!==v.Il(b),g=0,l=0,m=0,q=0;if(J)return J.iy(v.yd("uint8array",b));if(u.vv)return v.yd("nodebuffer",b).toString("utf-8");for(;g<b.length;)l=e?b[g]:b.charCodeAt(g),128>l?(c[d++]=String.fromCharCode(l),g++):191<l&&224>l?(m=e?b[g+1]:b.charCodeAt(g+1),c[d++]=String.fromCharCode((l&31)<<6|m&63),g+=2):(m=e?b[g+1]:b.charCodeAt(g+1),q=e?b[g+2]:b.charCodeAt(g+2),c[d++]=String.fromCharCode((l&15)<<12|(m&63)<<6|q&63),g+=3);
return c.join("")}};c.Ac=H},{"./base64":1,"./compressedObject":2,"./compressions":3,"./defaults":5,"./nodeBuffer":17,"./signature":10,"./support":12,"./utils":14}],10:[function(b,c,d){d.pC="PK\u0003\u0004";d.PB="PK\u0001\u0002";d.xw="PK\u0005\u0006";d.PC="PK\u0006\u0007";d.EL="PK\u0006\u0006";d.TU="PK\u0007\b"},{}],11:[function(b,c){function d(b,c){this.data=b;c||(this.data=g.rJ(this.data));this.length=this.data.length;this.index=0}var e=b("./dataReader"),g=b("./utils");d.prototype=new e;d.prototype.Kx=
function(b){return this.data.charCodeAt(b)};d.prototype.gv=function(b){return this.data.lastIndexOf(b)};d.prototype.Ov=function(b){this.Qx(b);var c=this.data.slice(this.index,this.index+b);this.index+=b;return c};c.Ac=d},{"./dataReader":4,"./utils":14}],12:[function(b,c,d){b=b("__browserify_process");"use strict";d.Xh=!0;d.GX=!0;d.WY=!0;d.pM="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array;d.vv=!b.CM;d.xB="undefined"!==typeof Uint8Array;if("undefined"===typeof ArrayBuffer)d.Ex=!1;
else{b=new ArrayBuffer(0);try{d.Ex=0===(new Blob([b],{type:"application/zip"})).size}catch(e){try{var g=new (window.BlobBuilder||window.WebKitBlobBuilder||window.SK||window.RK);g.append(b);d.Ex=0===g.getBlob("application/zip").size}catch(l){d.Ex=!1}}}},{__browserify_process:18}],13:[function(b,c){function d(b){b&&(this.data=b,this.length=this.data.length,this.index=0)}var e=b("./dataReader");d.prototype=new e;d.prototype.Kx=function(b){return this.data[b]};d.prototype.gv=function(b){var c=b.charCodeAt(0),
d=b.charCodeAt(1),e=b.charCodeAt(2);b=b.charCodeAt(3);for(var p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===d&&this.data[p+2]===e&&this.data[p+3]===b)return p;return-1};d.prototype.Ov=function(b){this.Qx(b);var c=this.data.subarray(this.index,this.index+b);this.index+=b;return c};c.Ac=d},{"./dataReader":4}],14:[function(b,c,d){function e(b){return b}function g(b,c){for(var d=0;d<b.length;++d)c[d]=b.charCodeAt(d)&255;return c}function l(b){var c=65536,e=[],g=b.length,l=d.Il(b),m=0,
q=!0;try{switch(l){case "uint8array":new Uint8Array(0);break;case "nodebuffer":t(0)}}catch(p){q=!1}if(!q){c="";for(e=0;e<b.length;e++)c+=String.fromCharCode(b[e]);return c}for(;m<g&&1<c;)try{"array"===l||"nodebuffer"===l?e.push(String.fromCharCode.apply(null,b.slice(m,Math.min(m+c,g)))):e.push(String.fromCharCode.apply(null,b.subarray(m,Math.min(m+c,g)))),m+=c}catch(s){c=Math.floor(c/2)}return e.join("")}function m(b,c){for(var d=0;d<b.length;d++)c[d]=b[d];return c}var q=b("./support"),p=b("./compressions"),
t=b("./nodeBuffer");d.rJ=function(b){for(var c="",d=0;d<b.length;d++)c+=String.fromCharCode(b.charCodeAt(d)&255);return c};d.YY=function(b){return d.yd("uint8array",b)};d.bZ=function(b){return d.yd("string",b)};d.XY=function(b){b=d.yd("arraybuffer",b);return d.bE(b)};d.bE=function(b){d.Rx("blob");try{return new Blob([b],{type:"application/zip"})}catch(c){try{var e=new (window.BlobBuilder||window.WebKitBlobBuilder||window.SK||window.RK);e.append(b);return e.getBlob("application/zip")}catch(g){throw Error("Bug : can't construct the Blob.");
}}};var s={};s.string={string:e,array:function(b){return g(b,Array(b.length))},arraybuffer:function(b){return s.string.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:function(b){return g(b,t(b.length))}};s.array={string:l,array:e,arraybuffer:function(b){return(new Uint8Array(b)).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return t(b)}};s.arraybuffer={string:function(b){return l(new Uint8Array(b))},array:function(b){return m(new Uint8Array(b),
Array(b.byteLength))},arraybuffer:e,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return t(new Uint8Array(b))}};s.uint8array={string:l,array:function(b){return m(b,Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:e,nodebuffer:function(b){return t(b)}};s.nodebuffer={string:l,array:function(b){return m(b,Array(b.length))},arraybuffer:function(b){return s.nodebuffer.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:e};
d.yd=function(b,c){c||(c="");if(!b)return c;d.Rx(b);var e=d.Il(c);return s[e][b](c)};d.Il=function(b){if("string"===typeof b)return"string";if("[object Array]"===Object.prototype.toString.call(b))return"array";if(q.vv&&t.test(b))return"nodebuffer";if(q.xB&&b instanceof Uint8Array)return"uint8array";if(q.pM&&b instanceof ArrayBuffer)return"arraybuffer"};d.Rx=function(b){if(!q[b.toLowerCase()])throw Error(b+" is not supported by this browser");};d.ot=65535;d.po=-1;d.JA=function(b){var c="",d,e;for(e=
0;e<(b||"").length;e++)d=b.charCodeAt(e),c+="\\x"+(16>d?"0":"")+d.toString(16).toUpperCase();return c};d.LN=function(b){for(var c in p)if(p.hasOwnProperty(c)&&p[c].Cp===b)return p[c];return null};d.cH=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)}},{"./compressions":3,"./nodeBuffer":17,"./support":12}],15:[function(b,c){function d(b,c){this.files=[];this.lv=c;b&&this.load(b)}var e=b("./stringReader"),g=b("./nodeBufferReader"),l=b("./uint8ArrayReader"),m=b("./utils"),q=b("./signature"),
p=b("./zipEntry"),t=b("./support");d.prototype={iu:function(b){var c=this.Ua.uh(4);if(c!==b)throw Error("Corrupted zip or bug : unexpected signature ("+m.JA(c)+", expected "+m.JA(b)+")");},QS:function(){this.dF=this.Ua.za(2);this.fF=this.Ua.za(2);this.oE=this.Ua.za(2);this.nE=this.Ua.za(2);this.pE=this.Ua.za(4);this.Nx=this.Ua.za(4);this.CU=this.Ua.za(2);this.Ua.uh(this.CU)},RS:function(){this.AU=this.Ua.za(8);this.Ua.uh(2);this.Ua.za(2);this.dF=this.Ua.za(4);this.fF=this.Ua.za(4);this.oE=this.Ua.za(8);
this.nE=this.Ua.za(8);this.pE=this.Ua.za(8);this.Nx=this.Ua.za(8);this.BU={};for(var b=this.AU-44,c,d,e;0<b;)c=this.Ua.za(2),d=this.Ua.za(4),e=this.Ua.uh(d),this.BU[c]={id:c,length:d,value:e}},SS:function(){this.Ua.za(4);this.bT=this.Ua.za(8);this.kN=this.Ua.za(4);if(1<this.kN)throw Error("Multi-volumes zip are not supported");},ZS:function(){var b,c;for(b=0;b<this.files.length;b++)c=this.files[b],this.Ua.em(c.Fz),this.iu(q.pC),c.$S(this.Ua),c.VP()},US:function(){var b;for(this.Ua.em(this.Nx);this.Ua.uh(4)===
q.PB;)b=new p({VJ:this.VJ},this.lv),b.VS(this.Ua),this.files.push(b)},XS:function(){var b=this.Ua.gv(q.xw);if(-1===b)throw Error("Corrupted zip : can't find end of central directory");this.Ua.em(b);this.iu(q.xw);this.QS();if(this.dF===m.ot||this.fF===m.ot||this.oE===m.ot||this.nE===m.ot||this.pE===m.po||this.Nx===m.po){this.VJ=!0;b=this.Ua.gv(q.PC);if(-1===b)throw Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.Ua.em(b);this.iu(q.PC);this.SS();this.Ua.em(this.bT);
this.iu(q.EL);this.RS()}},OS:function(b){var c=m.Il(b);this.Ua="string"!==c||t.xB?"nodebuffer"===c?new g(b):new l(m.yd("uint8array",b)):new e(b,this.lv.YH)},load:function(b){this.OS(b);this.XS();this.US();this.ZS()}};c.Ac=d},{"./nodeBufferReader":17,"./signature":10,"./stringReader":11,"./support":12,"./uint8ArrayReader":13,"./utils":14,"./zipEntry":16}],16:[function(b,c){function d(b,c){this.options=b;this.lv=c}var e=b("./stringReader"),g=b("./utils"),l=b("./compressedObject"),m=b("./object");d.prototype=
{vQ:function(){return 1===(this.hE&1)},oU:function(){return 2048===(this.hE&2048)},MS:function(b,c,d){return function(){var e=b.index;b.em(c);var g=b.Ov(d);b.em(e);return g}},NS:function(b,c,d,e,l){return function(){var b=g.yd(e.HJ,this.Iy()),b=e.GJ(b);if(b.length!==l)throw Error("Bug : uncompressed data size mismatch");return b}},$S:function(b){var c;b.iJ(22);this.zy=b.za(2);c=b.za(2);this.fileName=b.uh(this.zy);b.iJ(c);if(-1==this.bi||-1==this.Ch)throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");
c=g.LN(this.ol);if(null===c)throw Error("Corrupted zip : compression "+g.JA(this.ol)+" unknown (inner file : "+this.fileName+")");this.Ui=new l;this.Ui.bi=this.bi;this.Ui.Ch=this.Ch;this.Ui.crc32=this.crc32;this.Ui.ol=this.ol;this.Ui.Iy=this.MS(b,b.index,this.bi,c);this.Ui.Tf=this.NS(b,b.index,this.bi,c,this.Ch);if(this.lv.PX&&(this.Ui=g.yd("string",this.Ui.Tf()),m.crc32(this.Ui)!==this.crc32))throw Error("Corrupted zip : CRC32 mismatch");},VS:function(b){b.uh(2);b.za(2);this.hE=b.za(2);this.ol=b.uh(2);
this.ei=b.WS();this.crc32=b.za(4);this.bi=b.za(4);this.Ch=b.za(4);this.zy=b.za(2);this.DN=b.za(2);this.JN=b.za(2);this.eF=b.za(2);b.za(2);this.CN=b.za(4);this.Fz=b.za(4);if(this.vQ())throw Error("Encrypted zip are not supported");this.fileName=b.uh(this.zy);this.YS(b);this.GS(b);this.rF=b.uh(this.JN);this.dir=this.CN&16?!0:!1},GS:function(){if(this.mr[1]){var b=new e(this.mr[1].value);this.Ch===g.po&&(this.Ch=b.za(8));this.bi===g.po&&(this.bi=b.za(8));this.Fz===g.po&&(this.Fz=b.za(8));this.eF===g.po&&
(this.eF=b.za(4))}},YS:function(b){var c=b.index,d,e,g;for(this.mr=this.mr||{};b.index<c+this.DN;)d=b.za(2),e=b.za(2),g=b.uh(e),this.mr[d]={id:d,length:e,value:g}},VP:function(){if(this.oU())this.fileName=m.EB(this.fileName),this.rF=m.EB(this.rF);else{var b=this.MN();null!==b&&(this.fileName=b)}},MN:function(){var b=this.mr[28789];if(b){var c=new e(b.value);return 1!==c.za(1)||m.crc32(this.fileName)!==c.za(4)?null:m.EB(c.uh(b.length-5))}return null}};c.Ac=d},{"./compressedObject":2,"./object":9,"./stringReader":11,
"./utils":14}],17:[function(){},{}],18:[function(b,c){var d=c.Ac={};d.FY=function(){if("undefined"!==typeof window&&window.setImmediate)return function(b){return window.setImmediate(b)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var b=[];window.addEventListener("message",function(c){var d=c.source;d!==window&&null!==d||"process-tick"!==c.data||(c.stopPropagation(),0<b.length&&b.shift()())},!0);return function(c){b.push(c);window.postMessage("process-tick","*")}}return function(b){setTimeout(b,
0)}}();d.title="browser";d.CM=!0;d.gY={};d.FX=[];d.KX=function(){throw Error("process.binding is not supported");};d.WX=function(){return"/"};d.OX=function(){throw Error("process.chdir is not supported");}},{}],19:[function(b,c){var d=b("./lib/utils/common").assign,e=b("./lib/deflate"),g=b("./lib/inflate"),l=b("./lib/zlib/constants"),m={};d(m,e,g,l);c.Ac=m},{"./lib/deflate":20,"./lib/inflate":21,"./lib/utils/common":22,"./lib/zlib/constants":25}],20:[function(b,c,d){function e(b){b=this.options=m.assign({Oe:-1,
method:8,Sx:16384,hc:15,RQ:8,qj:0,Rs:""},b||{});b.MA&&0<b.hc?b.hc=-b.hc:b.zG&&0<b.hc&&16>b.hc&&(b.hc+=16);this.kr=0;this.Pa="";this.ended=!1;this.Xj=[];this.Ga=new t;this.Ga.ua=0;var c=l.cN(this.Ga,b.Oe,b.method,b.hc,b.RQ,b.qj);if(0!==c)throw Error(p[c]);b.dz&&l.eN(this.Ga,b.dz)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.kr)throw d.Pa;return d.result}var l=b("./zlib/deflate.js"),m=b("./utils/common"),q=b("./utils/strings"),p=b("./zlib/messages"),t=b("./zlib/zstream");e.prototype.push=function(b,
c){var d=this.Ga,e=this.options.Sx,g,p;if(this.ended)return!1;p=c===~~c?c:!0===c?4:0;d.input="string"===typeof b?q.VT(b):b;d.ph=0;d.tc=d.input.length;do{0===d.ua&&(d.tb=new m.Hi(e),d.Pc=0,d.ua=e);g=l.XE(d,p);if(1!==g&&0!==g)return this.Re(g),this.ended=!0,!1;if(0===d.ua||0===d.tc&&4===p)"string"===this.options.Rs?this.es(q.DM(m.iw(d.tb,d.Pc))):this.es(m.iw(d.tb,d.Pc))}while((0<d.tc||0===d.ua)&&1!==g);return 4===p?(g=l.bN(this.Ga),this.Re(g),this.ended=!0,0===g):!0};e.prototype.es=function(b){this.Xj.push(b)};
e.prototype.Re=function(b){0===b&&(this.result="string"===this.options.Rs?this.Xj.join(""):m.Cy(this.Xj));this.Xj=[];this.kr=b;this.Pa=this.Ga.Pa};d.ZU=e;d.XE=g;d.dN=function(b){var c;c=c||{};c.MA=!0;return g(b,c)};d.zG=function(b,c){c=c||{};c.zG=!0;return g(b,c)}},{"./utils/common":22,"./utils/strings":23,"./zlib/deflate.js":27,"./zlib/messages":32,"./zlib/zstream":34}],21:[function(b,c,d){function e(b){var c=this.options=m.assign({Sx:16384,hc:0,Rs:""},b||{});c.MA&&0<=c.hc&&16>c.hc&&(c.hc=-c.hc,
0===c.hc&&(c.hc=-15));!(0<=c.hc&&16>c.hc)||b&&b.hc||(c.hc+=32);15<c.hc&&48>c.hc&&0===(c.hc&15)&&(c.hc|=15);this.kr=0;this.Pa="";this.ended=!1;this.Xj=[];this.Ga=new s;this.Ga.ua=0;b=l.hQ(this.Ga,c.hc);if(b!==p.Ct)throw Error(t[b]);this.dz=new u;l.gQ(this.Ga,this.dz)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.kr)throw d.Pa;return d.result}var l=b("./zlib/inflate.js"),m=b("./utils/common"),q=b("./utils/strings"),p=b("./zlib/constants"),t=b("./zlib/messages"),s=b("./zlib/zstream"),u=b("./zlib/gzheader");
e.prototype.push=function(b,c){var d=this.Ga,e=this.options.Sx,g,t,s,L,u;if(this.ended)return!1;t=c===~~c?c:!0===c?p.Bt:p.TC;d.input="string"===typeof b?q.yM(b):b;d.ph=0;d.tc=d.input.length;do{0===d.ua&&(d.tb=new m.Hi(e),d.Pc=0,d.ua=e);g=l.UG(d,p.TC);if(g!==p.Dt&&g!==p.Ct)return this.Re(g),this.ended=!0,!1;d.Pc&&(0===d.ua||g===p.Dt||0===d.tc&&t===p.Bt)&&("string"===this.options.Rs?(s=q.pU(d.tb,d.Pc),L=d.Pc-s,u=q.EM(d.tb,s),d.Pc=L,d.ua=e-L,L&&m.Wh(d.tb,d.tb,s,L,0),this.es(u)):this.es(m.iw(d.tb,d.Pc)))}while((0<
d.tc||0===d.ua)&&g!==p.Dt);g===p.Dt&&(t=p.Bt);return t===p.Bt?(g=l.fQ(this.Ga),this.Re(g),this.ended=!0,g===p.Ct):!0};e.prototype.es=function(b){this.Xj.push(b)};e.prototype.Re=function(b){b===p.Ct&&(this.result="string"===this.options.Rs?this.Xj.join(""):m.Cy(this.Xj));this.Xj=[];this.kr=b;this.Pa=this.Ga.Pa};d.mV=e;d.UG=g;d.iQ=function(b){var c;c=c||{};c.MA=!0;return g(b,c)};d.cZ=g},{"./utils/common":22,"./utils/strings":23,"./zlib/constants":25,"./zlib/gzheader":28,"./zlib/inflate.js":30,"./zlib/messages":32,
"./zlib/zstream":34}],22:[function(b,c,d){b="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(b){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!==typeof d)throw new TypeError(d+"must be non-object");for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}}return b};d.iw=function(b,c){if(b.length===c)return b;if(b.subarray)return b.subarray(0,c);b.length=c;return b};var e={Wh:function(b,c,d,e,
g){if(c.subarray&&b.subarray)b.set(c.subarray(d,d+e),g);else for(var s=0;s<e;s++)b[g+s]=c[d+s]},Cy:function(b){var c,d,e,g,s;c=e=0;for(d=b.length;c<d;c++)e+=b[c].length;s=new Uint8Array(e);c=e=0;for(d=b.length;c<d;c++)g=b[c],s.set(g,e),e+=g.length;return s}},g={Wh:function(b,c,d,e,g){for(var s=0;s<e;s++)b[g+s]=c[d+s]},Cy:function(b){return[].concat.apply([],b)}};d.IT=function(b){b?(d.Hi=Uint8Array,d.jg=Uint16Array,d.iq=Int32Array,d.assign(d,e)):(d.Hi=Array,d.jg=Array,d.iq=Array,d.assign(d,g))};d.IT(b)},
{}],23:[function(b,c,d){var e=b("./common"),g=new e.Hi(256);for(b=0;256>b;b++)g[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;g[254]=g[254]=1;d.VT=function(b){var c,d,g,t,s,u=b.length,v=0;for(t=0;t<u;t++)d=b.charCodeAt(t),55296===(d&64512)&&t+1<u&&(g=b.charCodeAt(t+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+(g-56320),t++)),v+=128>d?1:2048>d?2:65536>d?3:4;c=new e.Hi(v);for(t=s=0;s<v;t++)d=b.charCodeAt(t),55296===(d&64512)&&t+1<u&&(g=b.charCodeAt(t+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+
(g-56320),t++)),128>d?c[s++]=d:(2048>d?c[s++]=192|d>>>6:(65536>d?c[s++]=224|d>>>12:(c[s++]=240|d>>>18,c[s++]=128|d>>>12&63),c[s++]=128|d>>>6&63),c[s++]=128|d&63);return c};d.DM=function(b){if(65537>b.length)return String.fromCharCode.apply(null,b);for(var c="",d=0,e=b.length;d<e;d++)c+=String.fromCharCode(b[d]);return c};d.yM=function(b){for(var c=new e.Hi(b.length),d=0,g=c.length;d<g;d++)c[d]=b.charCodeAt(d);return c};d.EM=function(b,c){var d,p,t,s,u=c||b.length,v=Array(2*u);for(d=p=0;d<u;)if(t=
b[d++],128>t)v[p++]=t;else if(s=g[t],4<s)v[p++]=65533,d+=s-1;else{for(t&=2===s?31:3===s?15:7;1<s&&d<u;)t=t<<6|b[d++]&63,s--;1<s?v[p++]=65533:65536>t?v[p++]=t:(t-=65536,v[p++]=55296|t>>10&1023,v[p++]=56320|t&1023)}return String.fromCharCode.apply(null,e.iw(v,p))};d.pU=function(b,c){var d;c=c||b.length;c>b.length&&(c=b.length);for(d=c-1;0<=d&&128===(b[d]&192);)d--;return 0>d||0===d?c:d+g[b[d]]>c?d:c}},{"./common":22}],24:[function(b,c){c.Ac=function(b,c,g,l){var m=b&65535|0;b=b>>>16&65535|0;for(var q=
0;0!==g;){q=2E3<g?2E3:g;g-=q;do m=m+c[l++]|0,b=b+m|0;while(--q);m%=65521;b%=65521}return m|b<<16|0}},{}],25:[function(b,c){c.Ac={TC:0,tX:1,wX:2,pX:3,Bt:4,gX:5,yX:6,Ct:0,Dt:1,rX:2,mX:-1,vX:-2,iX:-3,hX:-5,sX:0,eX:1,dX:9,jX:-1,nX:1,qX:2,uX:3,oX:4,kX:0,fX:0,xX:1,zX:2,lX:8}},{}],26:[function(b,c){var d=function(){for(var b,c=[],d=0;256>d;d++){b=d;for(var m=0;8>m;m++)b=b&1?3988292384^b>>>1:b>>>1;c[d]=b}return c}();c.Ac=function(b,c,l,m){l=m+l;for(b^=-1;m<l;m++)b=b>>>8^d[(b^c[m])&255];return b^-1}},{}],
27:[function(b,c,d){function e(b,c,d,e,g){this.IP=b;this.OQ=c;this.cR=d;this.NQ=e;this.TN=g}function g(b,c){b.Pa=Y[c];return c}function l(b){for(var c=b.length;0<=--c;)b[c]=0}function m(b){var c=b.state,d=c.wa;d>b.ua&&(d=b.ua);0!==d&&(J.Wh(b.tb,c.Bc,c.js,d,b.Pc),b.Pc+=d,c.js+=d,b.nm+=d,b.ua-=d,c.wa-=d,0===c.wa&&(c.js=0))}function q(b,c){H.WL(b,0<=b.Zh?b.Zh:-1,b.L-b.Zh,c);b.Zh=b.L;m(b.Ga)}function p(b,c){b.Bc[b.wa++]=c}function t(b,c){b.Bc[b.wa++]=c>>>8&255;b.Bc[b.wa++]=c&255}function s(b,c){var d=
b.xH,e=b.L,g,l=b.sh,m=b.MH,p=b.L>b.Ei-262?b.L-(b.Ei-262):0,q=b.window,t=b.ho,s=b.Se,L=b.L+258,u=q[e+l-1],v=q[e+l];b.sh>=b.yG&&(d>>=2);m>b.pa&&(m=b.pa);do if(g=c,q[g+l]===v&&q[g+l-1]===u&&q[g]===q[e]&&q[++g]===q[e+1]){e+=2;for(g++;q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&e<L;);g=258-(L-e);e=L-258;if(g>l){b.Fp=c;l=g;if(g>=m)break;u=q[e+l-1];v=q[e+l]}}while((c=s[c&t])>p&&0!==--d);return l<=b.pa?l:b.pa}function u(b){var c=
b.Ei,d,e,g,l;do{l=b.SJ-b.pa-b.L;if(b.L>=c+(c-262)){J.Wh(b.window,b.window,c,c,0);b.Fp-=c;b.L-=c;b.Zh-=c;d=e=b.Su;do g=b.head[--d],b.head[d]=g>=c?g-c:0;while(--e);d=e=c;do g=b.Se[--d],b.Se[d]=g>=c?g-c:0;while(--e);l+=c}if(0===b.Ga.tc)break;d=b.Ga;e=b.window;g=b.L+b.pa;var m=d.tc;m>l&&(m=l);0===m?e=0:(d.tc-=m,J.Wh(e,d.input,d.ph,m,g),1===d.state.ic?d.Ea=O(d.Ea,e,m,g):2===d.state.ic&&(d.Ea=N(d.Ea,e,m,g)),d.ph+=m,d.uj+=m,e=m);b.pa+=e;if(3<=b.pa+b.jh)for(l=b.L-b.jh,b.Tb=b.window[l],b.Tb=(b.Tb<<b.Ll^b.window[l+
1])&b.Kl;b.jh&&!(b.Tb=(b.Tb<<b.Ll^b.window[l+3-1])&b.Kl,b.Se[l&b.ho]=b.head[b.Tb],b.head[b.Tb]=l,l++,b.jh--,3>b.pa+b.jh););}while(262>b.pa&&0!==b.Ga.tc)}function v(b,c){for(var d;;){if(262>b.pa){u(b);if(262>b.pa&&0===c)return 1;if(0===b.pa)break}d=0;3<=b.pa&&(b.Tb=(b.Tb<<b.Ll^b.window[b.L+3-1])&b.Kl,d=b.Se[b.L&b.ho]=b.head[b.Tb],b.head[b.Tb]=b.L);0!==d&&b.L-d<=b.Ei-262&&(b.Gb=s(b,d));if(3<=b.Gb)if(d=H.fl(b,b.L-b.Fp,b.Gb-3),b.pa-=b.Gb,b.Gb<=b.Kz&&3<=b.pa){b.Gb--;do b.L++,b.Tb=(b.Tb<<b.Ll^b.window[b.L+
3-1])&b.Kl,b.Se[b.L&b.ho]=b.head[b.Tb],b.head[b.Tb]=b.L;while(0!==--b.Gb);b.L++}else b.L+=b.Gb,b.Gb=0,b.Tb=b.window[b.L],b.Tb=(b.Tb<<b.Ll^b.window[b.L+1])&b.Kl;else d=H.fl(b,0,b.window[b.L]),b.pa--,b.L++;if(d&&(q(b,!1),0===b.Ga.ua))return 1}b.jh=2>b.L?b.L:2;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.lh&&(q(b,!1),0===b.Ga.ua)?1:2}function D(b,c){for(var d,e;;){if(262>b.pa){u(b);if(262>b.pa&&0===c)return 1;if(0===b.pa)break}d=0;3<=b.pa&&(b.Tb=(b.Tb<<b.Ll^b.window[b.L+3-1])&b.Kl,d=b.Se[b.L&b.ho]=b.head[b.Tb],
b.head[b.Tb]=b.L);b.sh=b.Gb;b.bI=b.Fp;b.Gb=2;0!==d&&b.sh<b.Kz&&b.L-d<=b.Ei-262&&(b.Gb=s(b,d),5>=b.Gb&&(1===b.qj||3===b.Gb&&4096<b.L-b.Fp)&&(b.Gb=2));if(3<=b.sh&&b.Gb<=b.sh){e=b.L+b.pa-3;d=H.fl(b,b.L-1-b.bI,b.sh-3);b.pa-=b.sh-1;b.sh-=2;do++b.L<=e&&(b.Tb=(b.Tb<<b.Ll^b.window[b.L+3-1])&b.Kl,b.Se[b.L&b.ho]=b.head[b.Tb],b.head[b.Tb]=b.L);while(0!==--b.sh);b.Ep=0;b.Gb=2;b.L++;if(d&&(q(b,!1),0===b.Ga.ua))return 1}else if(b.Ep){if((d=H.fl(b,0,b.window[b.L-1]))&&q(b,!1),b.L++,b.pa--,0===b.Ga.ua)return 1}else b.Ep=
1,b.L++,b.pa--}b.Ep&&(H.fl(b,0,b.window[b.L-1]),b.Ep=0);b.jh=2>b.L?b.L:2;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.lh&&(q(b,!1),0===b.Ga.ua)?1:2}function B(b,c){for(var d,e,g,l=b.window;;){if(258>=b.pa){u(b);if(258>=b.pa&&0===c)return 1;if(0===b.pa)break}b.Gb=0;if(3<=b.pa&&0<b.L&&(e=b.L-1,d=l[e],d===l[++e]&&d===l[++e]&&d===l[++e])){for(g=b.L+258;d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&e<g;);b.Gb=258-(g-e);b.Gb>b.pa&&(b.Gb=b.pa)}3<=b.Gb?(d=H.fl(b,
1,b.Gb-3),b.pa-=b.Gb,b.L+=b.Gb,b.Gb=0):(d=H.fl(b,0,b.window[b.L]),b.pa--,b.L++);if(d&&(q(b,!1),0===b.Ga.ua))return 1}b.jh=0;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.lh&&(q(b,!1),0===b.Ga.ua)?1:2}function I(b,c){for(var d;;){if(0===b.pa&&(u(b),0===b.pa)){if(0===c)return 1;break}b.Gb=0;d=H.fl(b,0,b.window[b.L]);b.pa--;b.L++;if(d&&(q(b,!1),0===b.Ga.ua))return 1}b.jh=0;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.lh&&(q(b,!1),0===b.Ga.ua)?1:2}function G(){this.Ga=null;this.status=0;this.Bc=null;this.ic=this.wa=
this.js=this.rh=0;this.Oa=null;this.ji=0;this.method=8;this.Bp=-1;this.ho=this.HB=this.Ei=0;this.window=null;this.SJ=0;this.head=this.Se=null;this.MH=this.yG=this.qj=this.Oe=this.Kz=this.xH=this.sh=this.pa=this.Fp=this.L=this.Ep=this.bI=this.Gb=this.Zh=this.Ll=this.Kl=this.cz=this.Su=this.Tb=0;this.Qf=new J.jg(1146);this.on=new J.jg(122);this.Ie=new J.jg(78);l(this.Qf);l(this.on);l(this.Ie);this.iE=this.su=this.ev=null;this.Sj=new J.jg(16);this.Mc=new J.jg(573);l(this.Mc);this.op=this.jk=0;this.depth=
new J.jg(573);l(this.depth);this.oe=this.nf=this.jh=this.matches=this.Sp=this.vk=this.gr=this.lh=this.Ur=this.tz=0}function Q(b){var c;if(!b||!b.state)return g(b,-2);b.uj=b.nm=0;b.Zo=2;c=b.state;c.wa=0;c.js=0;0>c.ic&&(c.ic=-c.ic);c.status=c.ic?42:113;b.Ea=2===c.ic?0:1;c.Bp=0;H.XL(c);return 0}function M(b){var c=Q(b);0===c&&(b=b.state,b.SJ=2*b.Ei,l(b.head),b.Kz=K[b.Oe].OQ,b.yG=K[b.Oe].IP,b.MH=K[b.Oe].cR,b.xH=K[b.Oe].NQ,b.L=0,b.Zh=0,b.pa=0,b.jh=0,b.Gb=b.sh=2,b.Ep=0,b.Tb=0);return c}function L(b,c,d,
e,l,m){if(!b)return-2;var p=1;-1===c&&(c=6);0>e?(p=0,e=-e):15<e&&(p=2,e-=16);if(1>l||9<l||8!==d||8>e||15<e||0>c||9<c||0>m||4<m)return g(b,-2);8===e&&(e=9);var q=new G;b.state=q;q.Ga=b;q.ic=p;q.Oa=null;q.HB=e;q.Ei=1<<q.HB;q.ho=q.Ei-1;q.cz=l+7;q.Su=1<<q.cz;q.Kl=q.Su-1;q.Ll=~~((q.cz+3-1)/3);q.window=new J.Hi(2*q.Ei);q.head=new J.jg(q.Su);q.Se=new J.jg(q.Ei);q.Ur=1<<l+6;q.rh=4*q.Ur;q.Bc=new J.Hi(q.rh);q.gr=q.Ur>>1;q.tz=3*q.Ur;q.Oe=c;q.qj=m;q.method=d;return M(b)}var J=b("../utils/common"),H=b("./trees"),
O=b("./adler32"),N=b("./crc32"),Y=b("./messages"),K;K=[new e(0,0,0,0,function(b,c){var d=65535;for(d>b.rh-5&&(d=b.rh-5);;){if(1>=b.pa){u(b);if(0===b.pa&&0===c)return 1;if(0===b.pa)break}b.L+=b.pa;b.pa=0;var e=b.Zh+d;if(0===b.L||b.L>=e)if(b.pa=b.L-e,b.L=e,q(b,!1),0===b.Ga.ua)return 1;if(b.L-b.Zh>=b.Ei-262&&(q(b,!1),0===b.Ga.ua))return 1}b.jh=0;if(4===c)return q(b,!0),0===b.Ga.ua?3:4;b.L>b.Zh&&q(b,!1);return 1}),new e(4,4,8,4,v),new e(4,5,16,8,v),new e(4,6,32,32,v),new e(4,4,16,16,D),new e(8,16,32,
32,D),new e(8,16,128,128,D),new e(8,32,128,256,D),new e(32,128,258,1024,D),new e(32,258,258,4096,D)];d.$X=function(b,c){return L(b,c,8,15,8,0)};d.cN=L;d.aY=M;d.bY=Q;d.eN=function(b,c){b&&b.state&&2===b.state.ic&&(b.state.Oa=c)};d.XE=function(b,c){var d,e,q,s;if(!b||!b.state||5<c||0>c)return b?g(b,-2):-2;e=b.state;if(!b.tb||!b.input&&0!==b.tc||666===e.status&&4!==c)return g(b,0===b.ua?-5:-2);e.Ga=b;d=e.Bp;e.Bp=c;42===e.status&&(2===e.ic?(b.Ea=0,p(e,31),p(e,139),p(e,8),e.Oa?(p(e,(e.Oa.text?1:0)+(e.Oa.bj?
2:0)+(e.Oa.sb?4:0)+(e.Oa.name?8:0)+(e.Oa.comment?16:0)),p(e,e.Oa.time&255),p(e,e.Oa.time>>8&255),p(e,e.Oa.time>>16&255),p(e,e.Oa.time>>24&255),p(e,9===e.Oe?2:2<=e.qj||2>e.Oe?4:0),p(e,e.Oa.os&255),e.Oa.sb&&e.Oa.sb.length&&(p(e,e.Oa.sb.length&255),p(e,e.Oa.sb.length>>8&255)),e.Oa.bj&&(b.Ea=N(b.Ea,e.Bc,e.wa,0)),e.ji=0,e.status=69):(p(e,0),p(e,0),p(e,0),p(e,0),p(e,0),p(e,9===e.Oe?2:2<=e.qj||2>e.Oe?4:0),p(e,3),e.status=113)):(q=8+(e.HB-8<<4)<<8,s=-1,s=2<=e.qj||2>e.Oe?0:6>e.Oe?1:6===e.Oe?2:3,q|=s<<6,0!==
e.L&&(q|=32),e.status=113,t(e,q+(31-q%31)),0!==e.L&&(t(e,b.Ea>>>16),t(e,b.Ea&65535)),b.Ea=1));if(69===e.status)if(e.Oa.sb){for(q=e.wa;e.ji<(e.Oa.sb.length&65535)&&(e.wa!==e.rh||(e.Oa.bj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q)),m(b),q=e.wa,e.wa!==e.rh));)p(e,e.Oa.sb[e.ji]&255),e.ji++;e.Oa.bj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q));e.ji===e.Oa.sb.length&&(e.ji=0,e.status=73)}else e.status=73;if(73===e.status)if(e.Oa.name){q=e.wa;do{if(e.wa===e.rh&&(e.Oa.bj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q)),m(b),q=e.wa,
e.wa===e.rh)){s=1;break}s=e.ji<e.Oa.name.length?e.Oa.name.charCodeAt(e.ji++)&255:0;p(e,s)}while(0!==s);e.Oa.bj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q));0===s&&(e.ji=0,e.status=91)}else e.status=91;if(91===e.status)if(e.Oa.comment){q=e.wa;do{if(e.wa===e.rh&&(e.Oa.bj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q)),m(b),q=e.wa,e.wa===e.rh)){s=1;break}s=e.ji<e.Oa.comment.length?e.Oa.comment.charCodeAt(e.ji++)&255:0;p(e,s)}while(0!==s);e.Oa.bj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q));0===s&&(e.status=103)}else e.status=
103;103===e.status&&(e.Oa.bj?(e.wa+2>e.rh&&m(b),e.wa+2<=e.rh&&(p(e,b.Ea&255),p(e,b.Ea>>8&255),b.Ea=0,e.status=113)):e.status=113);if(0!==e.wa){if(m(b),0===b.ua)return e.Bp=-1,0}else if(0===b.tc&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return g(b,-5);if(666===e.status&&0!==b.tc)return g(b,-5);if(0!==b.tc||0!==e.pa||0!==c&&666!==e.status){d=2===e.qj?I(e,c):3===e.qj?B(e,c):K[e.Oe].TN(e,c);if(3===d||4===d)e.status=666;if(1===d||3===d)return 0===b.ua&&(e.Bp=-1),0;if(2===d&&(1===c?H.VL(e):5!==c&&(H.YL(e,
0,0,!1),3===c&&(l(e.head),0===e.pa&&(e.L=0,e.Zh=0,e.jh=0))),m(b),0===b.ua))return e.Bp=-1,0}if(4!==c)return 0;if(0>=e.ic)return 1;2===e.ic?(p(e,b.Ea&255),p(e,b.Ea>>8&255),p(e,b.Ea>>16&255),p(e,b.Ea>>24&255),p(e,b.uj&255),p(e,b.uj>>8&255),p(e,b.uj>>16&255),p(e,b.uj>>24&255)):(t(e,b.Ea>>>16),t(e,b.Ea&65535));m(b);0<e.ic&&(e.ic=-e.ic);return 0!==e.wa?0:1};d.bN=function(b){var c;if(!b||!b.state)return-2;c=b.state.status;if(42!==c&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c)return g(b,-2);b.state=
null;return 113===c?g(b,-3):0};d.ZX="pako deflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./messages":32,"./trees":33}],28:[function(b,c){c.Ac=function(){this.os=this.wU=this.time=this.text=0;this.sb=null;this.wy=0;this.comment=this.name="";this.bj=0;this.ap=!1}},{}],29:[function(b,c){c.Ac=function(b,c){var g,l,m,q,p,t,s,u,v,D,B,I,G,Q,M,L,J,H,O,N,Y,K,y,z;g=b.state;l=b.ph;y=b.input;m=l+(b.tc-5);q=b.Pc;z=b.tb;p=q-(c-b.ua);t=q+(b.ua-257);s=g.uu;u=g.ig;v=g.Kk;D=g.hg;
B=g.window;I=g.Nl;G=g.qd;Q=g.ok;M=g.mn;L=(1<<g.fj)-1;J=(1<<g.$o)-1;a:do b:for(15>G&&(I+=y[l++]<<G,G+=8,I+=y[l++]<<G,G+=8),H=Q[I&L];;){O=H>>>24;I>>>=O;G-=O;O=H>>>16&255;if(0===O)z[q++]=H&65535;else if(O&16){N=H&65535;if(O&=15)G<O&&(I+=y[l++]<<G,G+=8),N+=I&(1<<O)-1,I>>>=O,G-=O;15>G&&(I+=y[l++]<<G,G+=8,I+=y[l++]<<G,G+=8);H=M[I&J];c:for(;;){O=H>>>24;I>>>=O;G-=O;O=H>>>16&255;if(O&16){H&=65535;O&=15;G<O&&(I+=y[l++]<<G,G+=8,G<O&&(I+=y[l++]<<G,G+=8));H+=I&(1<<O)-1;if(H>s){b.Pa="invalid distance too far back";
g.mode=30;break a}I>>>=O;G-=O;O=q-p;if(H>O){O=H-O;if(O>v&&g.QA){b.Pa="invalid distance too far back";g.mode=30;break a}Y=0;K=B;if(0===D){if(Y+=u-O,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}}else if(D<O){if(Y+=u+D-O,O-=D,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=0;if(D<N){O=D;N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}}}else if(Y+=D-O,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}for(;2<N;)z[q++]=K[Y++],z[q++]=K[Y++],z[q++]=K[Y++],N-=3;N&&(z[q++]=K[Y++],1<N&&(z[q++]=K[Y++]))}else{Y=q-H;do z[q++]=
z[Y++],z[q++]=z[Y++],z[q++]=z[Y++],N-=3;while(2<N);N&&(z[q++]=z[Y++],1<N&&(z[q++]=z[Y++]))}}else if(0===(O&64)){H=M[(H&65535)+(I&(1<<O)-1)];continue c}else{b.Pa="invalid distance code";g.mode=30;break a}break}}else if(0===(O&64)){H=Q[(H&65535)+(I&(1<<O)-1)];continue b}else{O&32?g.mode=12:(b.Pa="invalid literal/length code",g.mode=30);break a}break}while(l<m&&q<t);N=G>>3;l-=N;G-=N<<3;b.ph=l;b.Pc=q;b.tc=l<m?5+(m-l):5-(l-m);b.ua=q<t?257+(t-q):257-(q-t);g.Nl=I&(1<<G)-1;g.qd=G}},{}],30:[function(b,c,d){function e(b){return(b>>>
24&255)+(b>>>8&65280)+((b&65280)<<8)+((b&255)<<24)}function g(){this.mode=0;this.fv=!1;this.ic=0;this.MG=!1;this.total=this.check=this.uu=this.Zc=0;this.head=null;this.hg=this.Kk=this.ig=this.bq=0;this.window=null;this.sb=this.offset=this.length=this.qd=this.Nl=0;this.mn=this.ok=null;this.hh=this.as=this.Ip=this.JH=this.$o=this.fj=0;this.next=null;this.Zd=new t.jg(320);this.et=new t.jg(288);this.iF=this.iH=null;this.uU=this.back=this.QA=0}function l(b){var c;if(!b||!b.state)return-2;c=b.state;b.uj=
b.nm=c.total=0;b.Pa="";c.ic&&(b.Ea=c.ic&1);c.mode=1;c.fv=0;c.MG=0;c.uu=32768;c.head=null;c.Nl=0;c.qd=0;c.ok=c.iH=new t.iq(852);c.mn=c.iF=new t.iq(592);c.QA=1;c.back=-1;return 0}function m(b){var c;if(!b||!b.state)return-2;c=b.state;c.ig=0;c.Kk=0;c.hg=0;return l(b)}function q(b,c){var d,e;if(!b||!b.state)return-2;e=b.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==e.window&&e.bq!==c&&(e.window=null);e.ic=d;e.bq=c;return m(b)}function p(b,c){var d;if(!b)return-2;d=
new g;b.state=d;d.window=null;d=q(b,c);0!==d&&(b.state=null);return d}var t=b("../utils/common"),s=b("./adler32"),u=b("./crc32"),v=b("./inffast"),D=b("./inftrees"),B=!0,I,G;d.sY=m;d.tY=q;d.uY=l;d.rY=function(b){return p(b,15)};d.hQ=p;d.UG=function(b,c){var d,g,l,m,q,p,K,y,z,ga,Z,E,W,Xa;E=0;var qa,Ca,sa,jb,ob,tb=new t.Hi(4),ki=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.tb||!b.input&&0!==b.tc)return-2;d=b.state;12===d.mode&&(d.mode=13);q=b.Pc;l=b.tb;K=b.ua;m=b.ph;g=b.input;
p=b.tc;y=d.Nl;z=d.qd;ga=p;Z=K;ob=0;a:for(;;)switch(d.mode){case 1:if(0===d.ic){d.mode=13;break}for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(d.ic&2&&35615===y){d.check=0;tb[0]=y&255;tb[1]=y>>>8&255;d.check=u(d.check,tb,2,0);z=y=0;d.mode=2;break}d.Zc=0;d.head&&(d.head.ap=!1);if(!(d.ic&1)||(((y&255)<<8)+(y>>8))%31){b.Pa="incorrect header check";d.mode=30;break}if(8!==(y&15)){b.Pa="unknown compression method";d.mode=30;break}y>>>=4;z-=4;W=(y&15)+8;if(0===d.bq)d.bq=W;else if(W>d.bq){b.Pa="invalid window size";
d.mode=30;break}d.uu=1<<W;b.Ea=d.check=1;d.mode=y&512?10:12;z=y=0;break;case 2:for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.Zc=y;if(8!==(d.Zc&255)){b.Pa="unknown compression method";d.mode=30;break}if(d.Zc&57344){b.Pa="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=y>>8&1);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,d.check=u(d.check,tb,2,0));z=y=0;d.mode=3;case 3:for(;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.head&&(d.head.time=y);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,tb[2]=
y>>>16&255,tb[3]=y>>>24&255,d.check=u(d.check,tb,4,0));z=y=0;d.mode=4;case 4:for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.head&&(d.head.wU=y&255,d.head.os=y>>8);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,d.check=u(d.check,tb,2,0));z=y=0;d.mode=5;case 5:if(d.Zc&1024){for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.length=y;d.head&&(d.head.wy=y);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,d.check=u(d.check,tb,2,0));z=y=0}else d.head&&(d.head.sb=null);d.mode=6;case 6:if(d.Zc&1024&&(E=d.length,E>
p&&(E=p),E&&(d.head&&(W=d.head.wy-d.length,d.head.sb||(d.head.sb=Array(d.head.wy)),t.Wh(d.head.sb,g,m,E,W)),d.Zc&512&&(d.check=u(d.check,g,E,m)),p-=E,m+=E,d.length-=E),d.length))break a;d.length=0;d.mode=7;case 7:if(d.Zc&2048){if(0===p)break a;E=0;do W=g[m+E++],d.head&&W&&65536>d.length&&(d.head.name+=String.fromCharCode(W));while(W&&E<p);d.Zc&512&&(d.check=u(d.check,g,E,m));p-=E;m+=E;if(W)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(d.Zc&4096){if(0===p)break a;E=0;do W=g[m+
E++],d.head&&W&&65536>d.length&&(d.head.comment+=String.fromCharCode(W));while(W&&E<p);d.Zc&512&&(d.check=u(d.check,g,E,m));p-=E;m+=E;if(W)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(d.Zc&512){for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(y!==(d.check&65535)){b.Pa="header crc mismatch";d.mode=30;break}z=y=0}d.head&&(d.head.bj=d.Zc>>9&1,d.head.ap=!0);b.Ea=d.check=0;d.mode=12;break;case 10:for(;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}b.Ea=d.check=e(y);z=y=0;d.mode=11;
case 11:if(0===d.MG)return b.Pc=q,b.ua=K,b.ph=m,b.tc=p,d.Nl=y,d.qd=z,2;b.Ea=d.check=1;d.mode=12;case 12:if(5===c||6===c)break a;case 13:if(d.fv){y>>>=z&7;z-=z&7;d.mode=27;break}for(;3>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.fv=y&1;y>>>=1;z-=1;switch(y&3){case 0:d.mode=14;break;case 1:E=d;if(B){W=void 0;I=new t.iq(512);G=new t.iq(32);for(W=0;144>W;)E.Zd[W++]=8;for(;256>W;)E.Zd[W++]=9;for(;280>W;)E.Zd[W++]=7;for(;288>W;)E.Zd[W++]=8;D(1,E.Zd,0,288,I,0,E.et,{qd:9});for(W=0;32>W;)E.Zd[W++]=5;D(2,
E.Zd,0,32,G,0,E.et,{qd:5});B=!1}E.ok=I;E.fj=9;E.mn=G;E.$o=5;d.mode=20;if(6===c){y>>>=2;z-=2;break a}break;case 2:d.mode=17;break;case 3:b.Pa="invalid block type",d.mode=30}y>>>=2;z-=2;break;case 14:y>>>=z&7;for(z-=z&7;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if((y&65535)!==(y>>>16^65535)){b.Pa="invalid stored block lengths";d.mode=30;break}d.length=y&65535;z=y=0;d.mode=15;if(6===c)break a;case 15:d.mode=16;case 16:if(E=d.length){E>p&&(E=p);E>K&&(E=K);if(0===E)break a;t.Wh(l,g,m,E,q);p-=E;m+=
E;K-=E;q+=E;d.length-=E;break}d.mode=12;break;case 17:for(;14>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.Ip=(y&31)+257;y>>>=5;z-=5;d.as=(y&31)+1;y>>>=5;z-=5;d.JH=(y&15)+4;y>>>=4;z-=4;if(286<d.Ip||30<d.as){b.Pa="too many length or distance symbols";d.mode=30;break}d.hh=0;d.mode=18;case 18:for(;d.hh<d.JH;){for(;3>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.Zd[ki[d.hh++]]=y&7;y>>>=3;z-=3}for(;19>d.hh;)d.Zd[ki[d.hh++]]=0;d.ok=d.iH;d.fj=7;E={qd:d.fj};ob=D(0,d.Zd,0,19,d.ok,0,d.et,E);d.fj=E.qd;if(ob){b.Pa=
"invalid code lengths set";d.mode=30;break}d.hh=0;d.mode=19;case 19:for(;d.hh<d.Ip+d.as;){for(;;){E=d.ok[y&(1<<d.fj)-1];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(16>sa)y>>>=qa,z-=qa,d.Zd[d.hh++]=sa;else{if(16===sa){for(E=qa+2;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=qa;z-=qa;if(0===d.hh){b.Pa="invalid bit length repeat";d.mode=30;break}W=d.Zd[d.hh-1];E=3+(y&3);y>>>=2;z-=2}else if(17===sa){for(E=qa+3;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;
z+=8}y>>>=qa;z-=qa;W=0;E=3+(y&7);y>>>=3;z-=3}else{for(E=qa+7;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=qa;z-=qa;W=0;E=11+(y&127);y>>>=7;z-=7}if(d.hh+E>d.Ip+d.as){b.Pa="invalid bit length repeat";d.mode=30;break}for(;E--;)d.Zd[d.hh++]=W}}if(30===d.mode)break;if(0===d.Zd[256]){b.Pa="invalid code -- missing end-of-block";d.mode=30;break}d.fj=9;E={qd:d.fj};ob=D(1,d.Zd,0,d.Ip,d.ok,0,d.et,E);d.fj=E.qd;if(ob){b.Pa="invalid literal/lengths set";d.mode=30;break}d.$o=6;d.mn=d.iF;E={qd:d.$o};ob=D(2,
d.Zd,d.Ip,d.as,d.mn,0,d.et,E);d.$o=E.qd;if(ob){b.Pa="invalid distances set";d.mode=30;break}d.mode=20;if(6===c)break a;case 20:d.mode=21;case 21:if(6<=p&&258<=K){b.Pc=q;b.ua=K;b.ph=m;b.tc=p;d.Nl=y;d.qd=z;v(b,Z);q=b.Pc;l=b.tb;K=b.ua;m=b.ph;g=b.input;p=b.tc;y=d.Nl;z=d.qd;12===d.mode&&(d.back=-1);break}for(d.back=0;;){E=d.ok[y&(1<<d.fj)-1];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(Ca&&0===(Ca&240)){W=qa;Xa=Ca;for(jb=sa;;){E=d.ok[jb+((y&(1<<W+Xa)-1)>>
W)];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(W+qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=W;z-=W;d.back+=W}y>>>=qa;z-=qa;d.back+=qa;d.length=sa;if(0===Ca){d.mode=26;break}if(Ca&32){d.back=-1;d.mode=12;break}if(Ca&64){b.Pa="invalid literal/length code";d.mode=30;break}d.sb=Ca&15;d.mode=22;case 22:if(d.sb){for(E=d.sb;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.length+=y&(1<<d.sb)-1;y>>>=d.sb;z-=d.sb;d.back+=d.sb}d.uU=d.length;d.mode=23;case 23:for(;;){E=d.mn[y&(1<<d.$o)-1];qa=E>>>24;Ca=
E>>>16&255;sa=E&65535;if(qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(0===(Ca&240)){W=qa;Xa=Ca;for(jb=sa;;){E=d.mn[jb+((y&(1<<W+Xa)-1)>>W)];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(W+qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=W;z-=W;d.back+=W}y>>>=qa;z-=qa;d.back+=qa;if(Ca&64){b.Pa="invalid distance code";d.mode=30;break}d.offset=sa;d.sb=Ca&15;d.mode=24;case 24:if(d.sb){for(E=d.sb;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.offset+=y&(1<<d.sb)-1;y>>>=d.sb;z-=d.sb;d.back+=d.sb}if(d.offset>
d.uu){b.Pa="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===K)break a;E=Z-K;if(d.offset>E){E=d.offset-E;if(E>d.Kk&&d.QA){b.Pa="invalid distance too far back";d.mode=30;break}E>d.hg?(E-=d.hg,W=d.ig-E):W=d.hg-E;E>d.length&&(E=d.length);Xa=d.window}else Xa=l,W=q-d.offset,E=d.length;E>K&&(E=K);K-=E;d.length-=E;do l[q++]=Xa[W++];while(--E);0===d.length&&(d.mode=21);break;case 26:if(0===K)break a;l[q++]=d.length;K--;d.mode=21;break;case 27:if(d.ic){for(;32>z;){if(0===p)break a;p--;
y|=g[m++]<<z;z+=8}Z-=K;b.nm+=Z;d.total+=Z;Z&&(b.Ea=d.check=d.Zc?u(d.check,l,Z,q-Z):s(d.check,l,Z,q-Z));Z=K;if((d.Zc?y:e(y))!==d.check){b.Pa="incorrect data check";d.mode=30;break}z=y=0}d.mode=28;case 28:if(d.ic&&d.Zc){for(;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(y!==(d.total&4294967295)){b.Pa="incorrect length check";d.mode=30;break}z=y=0}d.mode=29;case 29:ob=1;break a;case 30:ob=-3;break a;case 31:return-4;default:return-2}b.Pc=q;b.ua=K;b.ph=m;b.tc=p;d.Nl=y;d.qd=z;if(g=d.ig||Z!==b.ua&&30>
d.mode&&(27>d.mode||4!==c))g=b.tb,m=b.Pc,q=Z-b.ua,K=b.state,null===K.window&&(K.ig=1<<K.bq,K.hg=0,K.Kk=0,K.window=new t.Hi(K.ig)),q>=K.ig?(t.Wh(K.window,g,m-K.ig,K.ig,0),K.hg=0,K.Kk=K.ig):(p=K.ig-K.hg,p>q&&(p=q),t.Wh(K.window,g,m-q,p,K.hg),(q-=p)?(t.Wh(K.window,g,m-q,q,0),K.hg=q,K.Kk=K.ig):(K.hg+=p,K.hg===K.ig&&(K.hg=0),K.Kk<K.ig&&(K.Kk+=p))),g=0;if(g)return d.mode=31,-4;ga-=b.tc;Z-=b.ua;b.uj+=ga;b.nm+=Z;d.total+=Z;d.ic&&Z&&(b.Ea=d.check=d.Zc?u(d.check,l,Z,b.Pc-Z):s(d.check,l,Z,b.Pc-Z));b.Zo=d.qd+
(d.fv?64:0)+(12===d.mode?128:0)+(20===d.mode||15===d.mode?256:0);(0===ga&&0===Z||4===c)&&0===ob&&(ob=-5);return ob};d.fQ=function(b){if(!b||!b.state)return-2;var c=b.state;c.window&&(c.window=null);b.state=null;return 0};d.gQ=function(b,c){var d;b&&b.state&&(d=b.state,0!==(d.ic&2)&&(d.head=c,c.ap=!1))};d.qY="pako inflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./inffast":29,"./inftrees":31}],31:[function(b,c){var d=b("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,
15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.Ac=function(b,c,t,s,u,v,D,B){for(var I=B.qd,G=0,Q=0,M=0,L=0,J=0,H=0,O=0,N=0,Y=0,K=0,y,z,ga=null,Z=0,E,W=new d.jg(16),
H=new d.jg(16),Xa=null,qa=0,Ca,sa,jb,G=0;15>=G;G++)W[G]=0;for(Q=0;Q<s;Q++)W[c[t+Q]]++;J=I;for(L=15;1<=L&&0===W[L];L--);J>L&&(J=L);if(0===L)return u[v++]=20971520,u[v++]=20971520,B.qd=1,0;for(M=1;M<L&&0===W[M];M++);J<M&&(J=M);for(G=N=1;15>=G;G++)if(N<<=1,N-=W[G],0>N)return-1;if(0<N&&(0===b||1!==L))return-1;H[1]=0;for(G=1;15>G;G++)H[G+1]=H[G]+W[G];for(Q=0;Q<s;Q++)0!==c[t+Q]&&(D[H[c[t+Q]]++]=Q);switch(b){case 0:ga=Xa=D;E=19;break;case 1:ga=e;Z-=257;Xa=g;qa-=257;E=256;break;default:ga=l,Xa=m,E=-1}Q=K=
0;G=M;I=v;H=J;O=0;z=-1;Y=1<<J;s=Y-1;if(1===b&&852<Y||2===b&&592<Y)return 1;for(var ob=0;;){ob++;Ca=G-O;D[Q]<E?(sa=0,jb=D[Q]):D[Q]>E?(sa=Xa[qa+D[Q]],jb=ga[Z+D[Q]]):(sa=96,jb=0);N=1<<G-O;M=y=1<<H;do y-=N,u[I+(K>>O)+y]=Ca<<24|sa<<16|jb|0;while(0!==y);for(N=1<<G-1;K&N;)N>>=1;0!==N?(K&=N-1,K+=N):K=0;Q++;if(0===--W[G]){if(G===L)break;G=c[t+D[Q]]}if(G>J&&(K&s)!==z){0===O&&(O=J);I+=M;H=G-O;for(N=1<<H;H+O<L;){N-=W[H+O];if(0>=N)break;H++;N<<=1}Y+=1<<H;if(1===b&&852<Y||2===b&&592<Y)return 1;z=K&s;u[z]=J<<24|
H<<16|I-v|0}}0!==K&&(u[I+K]=G-O<<24|4194304);B.qd=J;return 0}},{"../utils/common":22}],32:[function(b,c){c.Ac={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],33:[function(b,c,d){function e(b,c){this.lF=b;this.Gp=0;this.lm=c}function g(b,c,d,e,g){this.pJ=b;this.FN=c;this.EN=d;this.uN=e;this.PQ=g;this.LG=b&&b.length}function l(b){for(var c=b.length;0<=--c;)b[c]=0}function m(b,
c){b.Bc[b.wa++]=c&255;b.Bc[b.wa++]=c>>>8&255}function q(b,c,d){b.oe>16-d?(b.nf|=c<<b.oe&65535,m(b,b.nf),b.nf=c>>16-b.oe,b.oe+=d-16):(b.nf|=c<<b.oe&65535,b.oe+=d)}function p(b,c,d){q(b,d[2*c],d[2*c+1])}function t(b,c){var d=0;do d|=b&1,b>>>=1,d<<=1;while(0<--c);return d>>>1}function s(b,c,d){var e=Array(16),g=0,l;for(l=1;15>=l;l++)e[l]=g=g+d[l-1]<<1;for(d=0;d<=c;d++)g=b[2*d+1],0!==g&&(b[2*d]=t(e[g]++,g))}function u(b){var c;for(c=0;286>c;c++)b.Qf[2*c]=0;for(c=0;30>c;c++)b.on[2*c]=0;for(c=0;19>c;c++)b.Ie[2*
c]=0;b.Qf[512]=1;b.vk=b.Sp=0;b.lh=b.matches=0}function v(b){8<b.oe?m(b,b.nf):0<b.oe&&(b.Bc[b.wa++]=b.nf);b.nf=0;b.oe=0}function D(b,c,d,e){var g=2*c,l=2*d;return b[g]<b[l]||b[g]===b[l]&&e[c]<=e[d]}function B(b,c,d){for(var e=b.Mc[d],g=d<<1;g<=b.jk;){g<b.jk&&D(c,b.Mc[g+1],b.Mc[g],b.depth)&&g++;if(D(c,e,b.Mc[g],b.depth))break;b.Mc[d]=b.Mc[g];d=g;g<<=1}b.Mc[d]=e}function I(b,c,d){var e,g,l=0,m,s;if(0!==b.lh){do e=b.Bc[b.gr+2*l]<<8|b.Bc[b.gr+2*l+1],g=b.Bc[b.tz+l],l++,0===e?p(b,g,c):(m=Z[g],p(b,m+256+
1,c),s=O[m],0!==s&&(g-=E[m],q(b,g,s)),e--,m=256>e?ga[e]:ga[256+(e>>>7)],p(b,m,d),s=N[m],0!==s&&(e-=W[m],q(b,e,s)));while(l<b.lh)}p(b,256,c)}function G(b,c){var d=c.lF,e=c.lm.pJ,g=c.lm.LG,l=c.lm.uN,m,p=-1,q;b.jk=0;b.op=573;for(m=0;m<l;m++)0!==d[2*m]?(b.Mc[++b.jk]=p=m,b.depth[m]=0):d[2*m+1]=0;for(;2>b.jk;)q=b.Mc[++b.jk]=2>p?++p:0,d[2*q]=1,b.depth[q]=0,b.vk--,g&&(b.Sp-=e[2*q+1]);c.Gp=p;for(m=b.jk>>1;1<=m;m--)B(b,d,m);q=l;do m=b.Mc[1],b.Mc[1]=b.Mc[b.jk--],B(b,d,1),e=b.Mc[1],b.Mc[--b.op]=m,b.Mc[--b.op]=
e,d[2*q]=d[2*m]+d[2*e],b.depth[q]=(b.depth[m]>=b.depth[e]?b.depth[m]:b.depth[e])+1,d[2*m+1]=d[2*e+1]=q,b.Mc[1]=q++,B(b,d,1);while(2<=b.jk);b.Mc[--b.op]=b.Mc[1];m=c.lF;q=c.Gp;for(var t=c.lm.pJ,u=c.lm.LG,v=c.lm.FN,z=c.lm.EN,y=c.lm.PQ,D,E,G=0,l=0;15>=l;l++)b.Sj[l]=0;m[2*b.Mc[b.op]+1]=0;for(e=b.op+1;573>e;e++)g=b.Mc[e],l=m[2*m[2*g+1]+1]+1,l>y&&(l=y,G++),m[2*g+1]=l,g>q||(b.Sj[l]++,D=0,g>=z&&(D=v[g-z]),E=m[2*g],b.vk+=E*(l+D),u&&(b.Sp+=E*(t[2*g+1]+D)));if(0!==G){do{for(l=y-1;0===b.Sj[l];)l--;b.Sj[l]--;b.Sj[l+
1]+=2;b.Sj[y]--;G-=2}while(0<G);for(l=y;0!==l;l--)for(g=b.Sj[l];0!==g;)t=b.Mc[--e],t>q||(m[2*t+1]!==l&&(b.vk+=(l-m[2*t+1])*m[2*t],m[2*t+1]=l),g--)}s(d,p,b.Sj)}function Q(b,c,d){var e,g=-1,l,m=c[1],p=0,q=7,s=4;0===m&&(q=138,s=3);c[2*(d+1)+1]=65535;for(e=0;e<=d;e++)l=m,m=c[2*(e+1)+1],++p<q&&l===m||(p<s?b.Ie[2*l]+=p:0!==l?(l!==g&&b.Ie[2*l]++,b.Ie[32]++):10>=p?b.Ie[34]++:b.Ie[36]++,p=0,g=l,0===m?(q=138,s=3):l===m?(q=6,s=3):(q=7,s=4))}function M(b,c,d){var e,g=-1,l,m=c[1],s=0,t=7,u=4;0===m&&(t=138,u=3);
for(e=0;e<=d;e++)if(l=m,m=c[2*(e+1)+1],!(++s<t&&l===m)){if(s<u){do p(b,l,b.Ie);while(0!==--s)}else 0!==l?(l!==g&&(p(b,l,b.Ie),s--),p(b,16,b.Ie),q(b,s-3,2)):10>=s?(p(b,17,b.Ie),q(b,s-3,3)):(p(b,18,b.Ie),q(b,s-11,7));s=0;g=l;0===m?(t=138,u=3):l===m?(t=6,u=3):(t=7,u=4)}}function L(b){var c=4093624447,d;for(d=0;31>=d;d++,c>>>=1)if(c&1&&0!==b.Qf[2*d])return 0;if(0!==b.Qf[18]||0!==b.Qf[20]||0!==b.Qf[26])return 1;for(d=32;256>d;d++)if(0!==b.Qf[2*d])return 1;return 0}function J(b,c,d,e){q(b,0+(e?1:0),3);
v(b);m(b,d);m(b,~d);H.Wh(b.Bc,b.window,c,d,b.wa);b.wa+=d}var H=b("../utils/common"),O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],y=Array(576);l(y);var z=Array(60);l(z);var ga=Array(512);l(ga);var Z=Array(256);l(Z);var E=Array(29);l(E);var W=Array(30);l(W);var Xa,qa,Ca,sa=!1;d.XL=function(b){if(!sa){var c,d,l,m=Array(16);
for(l=d=0;28>l;l++)for(E[l]=d,c=0;c<1<<O[l];c++)Z[d++]=l;Z[d-1]=l;for(l=d=0;16>l;l++)for(W[l]=d,c=0;c<1<<N[l];c++)ga[d++]=l;for(d>>=7;30>l;l++)for(W[l]=d<<7,c=0;c<1<<N[l]-7;c++)ga[256+d++]=l;for(c=0;15>=c;c++)m[c]=0;for(c=0;143>=c;)y[2*c+1]=8,c++,m[8]++;for(;255>=c;)y[2*c+1]=9,c++,m[9]++;for(;279>=c;)y[2*c+1]=7,c++,m[7]++;for(;287>=c;)y[2*c+1]=8,c++,m[8]++;s(y,287,m);for(c=0;30>c;c++)z[2*c+1]=5,z[2*c]=t(c,5);Xa=new g(y,O,257,286,15);qa=new g(z,N,0,30,15);Ca=new g([],Y,0,19,7);sa=!0}b.ev=new e(b.Qf,
Xa);b.su=new e(b.on,qa);b.iE=new e(b.Ie,Ca);b.nf=0;b.oe=0;u(b)};d.YL=J;d.WL=function(b,c,d,e){var g,l,m=0;if(0<b.Oe){2===b.Ga.Zo&&(b.Ga.Zo=L(b));G(b,b.ev);G(b,b.su);Q(b,b.Qf,b.ev.Gp);Q(b,b.on,b.su.Gp);G(b,b.iE);for(m=18;3<=m&&0===b.Ie[2*K[m]+1];m--);b.vk+=3*(m+1)+14;g=b.vk+3+7>>>3;l=b.Sp+3+7>>>3;l<=g&&(g=l)}else g=l=d+5;if(d+4<=g&&-1!==c)J(b,c,d,e);else if(4===b.qj||l===g)q(b,2+(e?1:0),3),I(b,y,z);else{q(b,4+(e?1:0),3);c=b.ev.Gp+1;d=b.su.Gp+1;m+=1;q(b,c-257,5);q(b,d-1,5);q(b,m-4,4);for(g=0;g<m;g++)q(b,
b.Ie[2*K[g]+1],3);M(b,b.Qf,c-1);M(b,b.on,d-1);I(b,b.Qf,b.on)}u(b);e&&v(b)};d.fl=function(b,c,d){b.Bc[b.gr+2*b.lh]=c>>>8&255;b.Bc[b.gr+2*b.lh+1]=c&255;b.Bc[b.tz+b.lh]=d&255;b.lh++;0===c?b.Qf[2*d]++:(b.matches++,c--,b.Qf[2*(Z[d]+256+1)]++,b.on[2*(256>c?ga[c]:ga[256+(c>>>7)])]++);return b.lh===b.Ur-1};d.VL=function(b){q(b,2,3);p(b,256,y);16===b.oe?(m(b,b.nf),b.nf=0,b.oe=0):8<=b.oe&&(b.Bc[b.wa++]=b.nf&255,b.nf>>=8,b.oe-=8)}},{"../utils/common":22}],34:[function(b,c){c.Ac=function(){this.input=null;this.uj=
this.tc=this.ph=0;this.tb=null;this.nm=this.ua=this.Pc=0;this.Pa="";this.state=null;this.Zo=2;this.Ea=0}},{}]},{},[7])(7)}"object"==typeof exports?module.Ac=zp():"function"==typeof define&&define.EX?define(zp):"undefined"!=typeof window?window.nC=zp():"undefined"!=typeof global?global.nC=zp():"undefined"!=typeof self&&(self.nC=zp());!0;h("JSZip");h("ZipObject");P.tg=function(a){this.Et=new yp(a)};k(P.tg,Cc);h("gxnat.Zip",P.tg);P.tg.UF=function(a,b,c,d){if(!Ha(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=P.QC;var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new P.tg(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()};P.tg.prototype.Yi=function(){return this.Et.files};
P.tg.prototype.Gz=function(a){w(this.Yi(),function(b){a(b.name,b.qM())}.bind(this))};P.tg.prototype.k=function(){P.tg.g.k.call(this);this.Gz(function(a){this.Et.remove(a)}.bind(this));wb(this.Et);delete this.Et};h("gxnat.Zip.prototype.getFiles",P.tg.prototype.Yi);h("gxnat.Zip.prototype.loopFiles",P.tg.prototype.Gz);h("gxnat.Zip.getFilesAsZip",P.tg.UF);h("gxnat.Zip.prototype.dispose",P.tg.prototype.k);P.d.ef=function(){Cc.call(this)};k(P.d.ef,Cc);h("gxnat.vis.VisNode",P.d.ef);f=P.d.ef.prototype;f.Vj="Generic";f.Yv=function(a){this.Vj=a};f.$N=function(){return this.Vj};f.Wp="";f.Cs=function(a){this.Wp=a};f.sP=function(){return this.Wp};f.Ae=null;f.xh=function(a){this.Ae=a};f.Eg=function(){return this.Ae};f.k=function(){P.d.ef.g.k.call(this);this.Vj&&delete this.Vj;this.Wp&&delete this.Wp;this.Ae&&delete this.Ae};h("gxnat.vis.VisNode.prototype.setCategory",P.d.ef.prototype.Yv);
h("gxnat.vis.VisNode.prototype.getCategory",P.d.ef.prototype.$N);h("gxnat.vis.VisNode.prototype.setThumbnailUrl",P.d.ef.prototype.Cs);h("gxnat.vis.VisNode.prototype.getThumbnailUrl",P.d.ef.prototype.sP);h("gxnat.vis.VisNode.prototype.setTitle",P.d.ef.prototype.xh);h("gxnat.vis.VisNode.prototype.getTitle",P.d.ef.prototype.Eg);h("gxnat.vis.VisNode.prototype.dispose",P.d.ef.prototype.k);P.d.pg=function(a){P.d.ef.call(this);this.og=a||null};k(P.d.pg,P.d.ef);h("gxnat.vis.Renderable",P.d.pg);P.d.pg.prototype.YA=function(a){this.og=a instanceof P.d.Gm?a:new P.d.Gm(a)};P.d.pg.prototype.bP=function(){return this.og};P.d.pg.prototype.k=function(){P.d.pg.g.k.call(this);this.og&&(this.og.k(),delete this.og)};h("gxnat.vis.Renderable.prototype.setRenderProperties",P.d.pg.prototype.YA);h("gxnat.vis.Renderable.prototype.getRenderProperties",P.d.pg.prototype.bP);
h("gxnat.vis.Renderable.prototype.dispose",P.d.pg.prototype.k);P.d.Ff=function(a,b){P.d.pg.call(this,b);this.El=a||[];null!=b&&this.YA(b)};k(P.d.Ff,P.d.pg);h("gxnat.vis.Viewable",P.d.Ff);f=P.d.Ff.prototype;f.Cl=null;f.lO=function(){return this.Cl};f.yT=function(a){return this.Cl=a};f.AI=function(a){null!=this.Cl&&wb(this.Cl);this.Cl={};var b=this.Yi();A(b,function(a){this.Cl[a]=null}.bind(this));var c,d,e,g;a.Gz(function(a,m){c=0;for(d=b.length;c<d;c++)if(e=b[c],g="/files/"+a.split("/files/")[1],Ha(e,g)){this.Cl[e]=m;break}}.bind(this));a.k()};f.Yi=function(){return this.El};
f.eT=function(a){window.UX.log("REMOVING FILE",a);Pb(this.El,a)};f.hl=function(a,b){null==this.El&&(this.El=[]);ia(a)||(a=[a]);A(a,function(a){null!=b&&null==b(a)||this.El.push(a)}.bind(this))};f.k=function(){P.d.Ff.g.k.call(this);this.El&&(Nb(this.El),delete this.El)};h("gxnat.vis.Viewable.prototype.getFileData",P.d.Ff.prototype.lO);h("gxnat.vis.Viewable.prototype.setFileData",P.d.Ff.prototype.yT);h("gxnat.vis.Viewable.prototype.setFileDataFromZip",P.d.Ff.prototype.AI);
h("gxnat.vis.Viewable.prototype.getFiles",P.d.Ff.prototype.Yi);h("gxnat.vis.Viewable.prototype.removeFile",P.d.Ff.prototype.eT);h("gxnat.vis.Viewable.prototype.addFiles",P.d.Ff.prototype.hl);h("gxnat.vis.Viewable.prototype.dispose",P.d.Ff.prototype.k);P.d.qg=function(a){P.d.pg.call(this);null!=a?ia(a)||(a=[a]):a=[];this.rq=a};k(P.d.qg,P.d.pg);h("gxnat.vis.ViewableGroup",P.d.qg);P.d.qg.prototype.JD=function(a){return this.rq.push(a)};P.d.qg.prototype.VN=function(){var a=[];A(this.rq,function(b){a=Qb(a,b.Yi())});return a};P.d.qg.prototype.Zi=function(){return this.rq};P.d.qg.prototype.k=function(){P.d.qg.g.k.call(this);A(this.rq,function(a){ia(a)?A(a,function(a){a.k()}):a instanceof P.d.Ff&&a.k()});delete this.rq};
h("gxnat.vis.ViewableGroup.prototype.addViewable",P.d.qg.prototype.JD);h("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",P.d.qg.prototype.VN);h("gxnat.vis.ViewableGroup.prototype.getViewables",P.d.qg.prototype.Zi);h("gxnat.vis.ViewableGroup.prototype.dispose",P.d.qg.prototype.k);V.a.c.af=function(){V.a.c.w.call(this);this.Vn(wh("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+r(),type:"radio"}));R(this.O,V.a.c.af.CSS.aL);C(this.O,"change",this.ue.bind(this))};k(V.a.c.af,V.a.c.w);h("xiv.ui.ctrl.RadioButtonController",V.a.c.af);V.a.c.af.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";V.a.c.af.CSS_SUFFIX={aL:"radiobutton"};V.a.c.af.prototype.ue=function(){this.dispatchEvent({type:"o",checked:this.O.checked})};V.a.c.af.prototype.i=function(){V.a.c.af.g.i.call(this)};
h("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",V.a.c.af.ID_PREFIX);h("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",V.a.c.af.CSS_SUFFIX);h("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",V.a.c.af.prototype.ue);h("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",V.a.c.af.prototype.i);V.a.c.Gh=function(){V.a.c.w.call(this);this.io=[]};k(V.a.c.Gh,V.a.c.w);h("xiv.ui.ctrl.MasterController2D",V.a.c.Gh);V.a.c.Gh.ID_PREFIX="xiv.ui.ctrl.MasterController2D";V.a.c.Gh.CSS_SUFFIX={};V.a.c.Gh.prototype.add=function(){};V.a.c.Gh.prototype.i=function(){V.a.c.Gh.g.i.call(this);Nb(this.io);delete this.io};h("xiv.ui.ctrl.MasterController2D.ID_PREFIX",V.a.c.Gh.ID_PREFIX);h("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",V.a.c.Gh.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController2D.prototype.add",V.a.c.Gh.prototype.add);
h("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",V.a.c.Gh.prototype.i);V.a.c.Zb=function(){V.a.c.w.call(this);this.yi("Master Opacity")};k(V.a.c.Zb,V.a.c.w);h("xiv.ui.ctrl.SliderController",V.a.c.Zb);V.a.c.Zb.ID_PREFIX="xiv.ui.ctrl.SliderController";V.a.c.Zb.CSS_SUFFIX={Xa:"slider",Qk:"slider-thumb",ut:"slider-thumb-hover",Rk:"slider-track",DC:"slider-track-hover",Vw:"value-input"};f=V.a.c.Zb.prototype;f.GB=2;f.Ds=function(a){this.GB=a};f.p=function(a){V.a.c.Zb.g.p.call(this,a);this.dy();this.fy()};
f.dy=function(){var a=new U.D;this.Vn(a);a.$f(0);a.Te(1);a.pj(.01);a.aa(1);R(a.b(),V.a.c.Zb.CSS.Xa);R(a.de,V.a.c.Zb.CSS.Qk);R(a.We,V.a.c.Zb.CSS.Rk);a.bu(V.a.c.Zb.CSS.ut);a.xx(V.a.c.Zb.CSS.DC);C(this.O,"change",this.ue.bind(this))};f.fy=function(){this.Ja=wh("input");this.Ja.type="number";R(this.Ja,V.a.c.Zb.CSS.Vw);Ah(this.b(),this.Ja);C(this.Ja,"input",this.yA.bind(this));this.update()};
f.yA=function(){window.console.log("on value input");var a=this.O,b=parseFloat(this.Ja.value),b=od(b,a.bb(),a.La());this.Ja.value=b;a.aa(b)};f.vP=function(){return this.Ja};f.ue=function(){var a=this.O,b=a.ea().toFixed(this.GB),c=parseInt(this.Ja.value);this.Ja.value=b;this.dispatchEvent({type:"o",value:b,Oz:a.bb(),Lz:a.La(),cI:c})};
f.update=function(){var a=this.O,b=a.ea();a.o();a.aa(0);a.aa(b);a.fk()!==this.Ja.step&&(this.Ja.step=a.fk());a.bb()!==this.Ja.min&&(this.Ja.min=a.bb());a.La()!==this.Ja.max&&(this.Ja.max=a.La());a.ea()!==this.Ja.value&&(this.Ja.value=b)};f.i=function(){V.a.c.Zb.g.i.call(this);delete this.GB;null!=this.Ja&&(bd(this.Ja),S(this.Ja),delete this.Ja)};h("xiv.ui.ctrl.SliderController.ID_PREFIX",V.a.c.Zb.ID_PREFIX);h("xiv.ui.ctrl.SliderController.CSS_SUFFIX",V.a.c.Zb.CSS_SUFFIX);
h("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",V.a.c.Zb.prototype.Ds);h("xiv.ui.ctrl.SliderController.prototype.render",V.a.c.Zb.prototype.p);h("xiv.ui.ctrl.SliderController.prototype.getValueInput",V.a.c.Zb.prototype.vP);h("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",V.a.c.Zb.prototype.ue);h("xiv.ui.ctrl.SliderController.prototype.update",V.a.c.Zb.prototype.update);h("xiv.ui.ctrl.SliderController.prototype.disposeInternal",V.a.c.Zb.prototype.i);V.a.c.Gc=function(){V.a.c.w.call(this);this.yi("TwoThumb");this.dy();this.fy();this.Sf=wh("input");this.Sf.type="number";R(this.Sf,V.a.c.Gc.CSS.pK);Ah(this.b(),this.Sf);C(this.Sf,"input",this.sR.bind(this));Ap(this)};k(V.a.c.Gc,V.a.c.w);h("xiv.ui.ctrl.TwoThumbSliderController",V.a.c.Gc);V.a.c.Gc.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";
V.a.c.Gc.CSS_SUFFIX={Xa:"slider",Qk:"slider-thumb",kL:"slider-thumb-extent",lL:"slider-thumb-value",ut:"slider-thumb-hover",Rk:"slider-track",DC:"slider-track-hover",Vw:"value-input",pK:"extent-input"};f=V.a.c.Gc.prototype;
f.dy=function(){this.Ia=new Mn;this.Ia.C();var a=this.Ia.b();a.setAttribute("id","ThresholdSlider_"+r());R(a,V.a.c.Gc.CSS.Xa);var b=wh("div",{id:"ThwoThumbSlider_track_"+r(),"class":V.a.c.Gc.CSS.Rk});a.appendChild(b);this.Vn(this.Ia);R(this.Ia.Qa,V.a.c.Gc.CSS.Qk);R(this.Ia.Qa,V.a.c.Gc.CSS.lL);Rk.dm(this.Ia.Qa,V.a.c.Gc.CSS.ut);R(this.Ia.Jd,V.a.c.Gc.CSS.Qk);R(this.Ia.Jd,V.a.c.Gc.CSS.kL);Rk.dm(this.Ia.Jd,V.a.c.Gc.CSS.ut);C(this.Ia,"change",this.ue.bind(this))};
f.update=function(){var a=ui(this.Ia.Qa).width,b=this.Ia.La()-this.Ia.bb(),c=ui(this.Ia.b()).width-a,a=c*((this.Ia.ea()-this.Ia.bb())/b),b=c*(this.Ia.eh()/b);this.Ia.Qa.style.left=a.toString()+"px";this.Ia.Jd.style.left=b.toString()+"px";Bp(this);Ap(this)};function Bp(a){a.Ja.step=1;a.Ja.min=a.Ia.bb();a.Ja.max=a.Ia.La();a.Ja.value=a.Ia.ea()}function Ap(a){a.Sf.step=1;a.Sf.min=a.Ia.bb();a.Sf.max=a.Ia.La();a.Sf.value=a.Ia.eh()+a.Ia.ea()}
f.fy=function(){this.Ja=wh("input");this.Ja.type="number";R(this.Ja,V.a.c.Gc.CSS.Vw);Ah(this.b(),this.Ja);C(this.Ja,"input",this.yA.bind(this));Bp(this)};f.yA=function(a){window.console.log(a,this.Ja);this.Ia.aa(parseInt(this.Ja.value))};f.sR=function(){this.Ia.am(parseInt(this.Sf.value)-this.Ia.ea())};f.ue=function(){var a=this.Ia.ea(),b=this.Ia.eh()+a;this.Ja.value=a;this.Sf.value=b;this.dispatchEvent({type:"o",lower:a,upper:b})};
f.i=function(){V.a.c.Gc.g.i.call(this);null!=this.Ia&&(bd(this.Ia),null==this.Ia.nb&&(this.Ia.nb=new un),this.Ia.k(),delete this.Ia);null!=this.Ja&&(bd(this.Ja),S(this.Ja),delete this.Ja);null!=this.Sf&&(bd(this.Sf),S(this.Sf),delete this.Sf)};h("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",V.a.c.Gc.ID_PREFIX);h("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",V.a.c.Gc.CSS_SUFFIX);h("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",V.a.c.Gc.prototype.update);
h("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",V.a.c.Gc.prototype.ue);h("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",V.a.c.Gc.prototype.i);V.a.c.ge=function(){V.a.c.w.call(this);this.pm=[]};k(V.a.c.ge,V.a.c.w);h("xiv.ui.ctrl.MasterController3D",V.a.c.ge);V.a.c.ge.ID_PREFIX="xiv.ui.ctrl.MasterController3D";V.a.c.ge.CSS_SUFFIX={};V.a.c.ge.prototype.add=function(a){this.pm.push(a);this.QD(a,V.a.c.Zb);1==this.pm.length&&Ah(document.body,this.b())};V.a.c.ge.prototype.i=function(){V.a.c.ge.g.i.call(this);Nb(this.pm);delete this.pm};h("xiv.ui.ctrl.MasterController3D.ID_PREFIX",V.a.c.ge.ID_PREFIX);
h("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",V.a.c.ge.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{QW:"Visible",HV:"Opacity"});h("xiv.ui.ctrl.MasterController3D.prototype.add",V.a.c.ge.prototype.add);h("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",V.a.c.ge.prototype.i);V.a.c.Lb=function(){V.a.c.ge.call(this)};k(V.a.c.Lb,V.a.c.ge);h("xiv.ui.ctrl.VolumeController3D",V.a.c.Lb);V.a.c.Lb.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";V.a.c.Lb.zw=1E3;V.a.c.Lb.CSS_SUFFIX={};V.a.c.Lb.prototype.TD=function(a){var b=this.zg(V.a.c.Ad,"Volume Rendering",function(b){a.bt=b.checked});V.a.c.w.Mg(a,b);this.zh.push(b);b.O.wh(!1)};V.a.c.Lb.VR=function(a){a.target[V.a.c.Lb.yt].qk=parseFloat(a.lower);a.target[V.a.c.Lb.yt].Aj=parseFloat(a.upper)};V.a.c.Lb.yt=r();
V.a.c.Lb.prototype.RD=function(a){var b=this.zg(V.a.c.Gc,"Threshold",this.constructor.VR);b[V.a.c.Lb.yt]=a;V.a.c.w.Mg(a,b);this.zh.push(b);var c=a.qk,d=a.Aj;-Infinity==c&&(c=-1*V.a.c.Lb.zw,a.qk=c);Infinity==a.Aj&&(d=V.a.c.Lb.zw,a.Aj=d);b=b.O;b.$f(c);b.Te(d);In(b,d-c);b.aa(c);b.pj(10);b.am(d-c);a.Aj=d;a.qk=c};V.a.c.Lb.prototype.add=function(a){V.a.c.Lb.g.add.call(this,a);this.TD(a);this.RD(a)};V.a.c.Lb.prototype.o=function(){V.a.c.Lb.g.o.call(this)};h("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",V.a.c.Lb.ID_PREFIX);
h("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",V.a.c.Lb.zw);h("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",V.a.c.Lb.CSS_SUFFIX);h("xiv.ui.ctrl.VolumeController3D.VOLUME_ID",V.a.c.Lb.yt);h("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",V.a.c.Lb.prototype.TD);h("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",V.a.c.Lb.prototype.RD);h("xiv.ui.ctrl.VolumeController3D.prototype.add",V.a.c.Lb.prototype.add);h("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",V.a.c.Lb.prototype.o);V.a.c.Ye=function(){V.a.c.w.call(this);this.pm=[]};k(V.a.c.Ye,V.a.c.w);h("xiv.ui.ctrl.MasterController",V.a.c.Ye);V.a.c.Ye.ID_PREFIX="xiv.ui.ctrl.MasterController";V.a.c.Ye.CSS_SUFFIX={};V.a.c.Ye.prototype.add=function(a){this.pm.push(a)};V.a.c.Ye.prototype.i=function(){V.a.c.Ye.g.i.call(this);Nb(this.pm);delete this.pm};h("xiv.ui.ctrl.MasterController.ID_PREFIX",V.a.c.Ye.ID_PREFIX);h("xiv.ui.ctrl.MasterController.CSS_SUFFIX",V.a.c.Ye.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController.CONTROLLERS",{});
h("xiv.ui.ctrl.MasterController.prototype.add",V.a.c.Ye.prototype.add);h("xiv.ui.ctrl.MasterController.prototype.disposeInternal",V.a.c.Ye.prototype.i);V.a.c.Jb=function(){V.a.c.Ye.call(this)};k(V.a.c.Jb,V.a.c.Ye);h("xiv.ui.ctrl.LevelsController",V.a.c.Jb);V.a.c.Jb.ID_PREFIX="xiv.ui.ctrl.LevelsController";V.a.c.Jb.CSS_SUFFIX={};V.a.c.Jb.nq=1E3;V.a.c.Jb.oq=0;f=V.a.c.Jb.prototype;f.add=function(a){V.a.c.Jb.g.add.call(this,a);var b=this.MD(a),c=this.PD(a),d=this.OD(a),e=this.KD(a,c,d);a=this.LD(a,c,d);A([c,d,e,a],function(a){C(a.O,"q",function(){b.update()}.bind(this))}.bind(this))};
f.MD=function(a){var b=this.zg(V.a.c.Fc,"Histogram",function(){}.bind(this));b.gm(a);V.a.c.w.Mg(a,b);this.hj.push(b);b.update();return b};f.PD=function(a){var b=this.zg(V.a.c.Zb,"Level Min.",function(b){a.Bj=b.value}.bind(this));b.gm(a);V.a.c.w.Mg(a,b);this.hj.push(b);b.O.Te(V.a.c.Jb.nq);b.O.$f(V.a.c.Jb.oq);b.O.aa(V.a.c.Jb.oq);b.O.pj(1);b.Ds(0);b.update();return b};
f.OD=function(a){var b=this.zg(V.a.c.Zb,"Level Max.");b.gm(a);C(b,"o",function(b){a.Fi=b.value}.bind(this));V.a.c.w.Mg(a,b);this.hj.push(b);b.O.Te(V.a.c.Jb.nq);b.O.$f(V.a.c.Jb.oq);b.O.aa(V.a.c.Jb.nq);b.O.pj(1);b.Ds(0);b.update();return b};
f.KD=function(a,b,c){var d=this.zg(V.a.c.Zb,"Brightness");d.gm(a);C(d,"o",function(d){d=(d.value-d.cI)/(d.Lz-d.Oz);var g=a.Fi-a.Bj;a.Bj=Math.round(parseInt(a.Bj)-g*d);a.Fi=Math.round(parseInt(a.Fi)-g*d);b.O.aa(a.Bj);c.O.aa(a.Fi)}.bind(this));V.a.c.w.Mg(a,d);this.hj.push(d);d.O.Te(150);d.O.$f(-150);d.O.aa(0);d.O.pj(1);d.Ds(0);d.update();return d};
f.LD=function(a,b,c){var d=this.zg(V.a.c.Zb,"Contrast");d.gm(a);C(d,"o",function(d){d=(d.value-d.cI)/(d.Lz-d.Oz);var g=parseInt(a.Fi)-parseInt(a.Bj),l=parseInt(a.Fi)-g*d;a.Bj=Math.round(parseInt(a.Bj)+g*d);a.Fi=Math.round(l);b.O.aa(a.Bj);c.O.aa(a.Fi)}.bind(this));V.a.c.w.Mg(a,d);this.hj.push(d);d.O.Te(150);d.O.$f(-150);d.O.aa(0);d.O.pj(1);d.Ds(0);d.update();return d};f.i=function(){V.a.c.Jb.g.i.call(this)};h("xiv.ui.ctrl.LevelsController.ID_PREFIX",V.a.c.Jb.ID_PREFIX);
h("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",V.a.c.Jb.CSS_SUFFIX);h("xiv.ui.ctrl.LevelsController.CONTROLLERS",{IU:"Brightness",SU:"Contrast",oq:"Level Min.",nq:"Level Max.",eV:"Histogram"});h("xiv.ui.ctrl.LevelsController.LEVEL_MAX",V.a.c.Jb.nq);h("xiv.ui.ctrl.LevelsController.LEVEL_MIN",V.a.c.Jb.oq);h("xiv.ui.ctrl.LevelsController.prototype.add",V.a.c.Jb.prototype.add);h("xiv.ui.ctrl.LevelsController.prototype.add_histogram",V.a.c.Jb.prototype.MD);
h("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",V.a.c.Jb.prototype.PD);h("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",V.a.c.Jb.prototype.OD);h("xiv.ui.ctrl.LevelsController.prototype.add_brightness",V.a.c.Jb.prototype.KD);h("xiv.ui.ctrl.LevelsController.prototype.add_contrast",V.a.c.Jb.prototype.LD);h("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",V.a.c.Jb.prototype.i);function Cp(a){gd.call(this);this.ed=null;this.q=a;a=mc||oc&&!vc("531")&&"TEXTAREA"==a.tagName;this.Hd=new Ii(this);this.Hd.I(this.q,a?["keydown","paste","cut","drop","input"]:"input",this)}k(Cp,gd);
Cp.prototype.handleEvent=function(a){if("input"==a.type)mc&&vc(10)&&0==a.keyCode&&0==a.charCode||(Dp(this),lc&&this.q!=lh(this.q).activeElement||this.dispatchEvent(Ep(a)));else if("keydown"!=a.type||lj(a)){var b="keydown"==a.type?this.q.value:null;mc&&229==a.keyCode&&(b=null);var c=Ep(a);Dp(this);this.ed=Xf(function(){this.ed=null;this.q.value!=b&&this.dispatchEvent(c)},0,this)}};function Dp(a){null!=a.ed&&(ba.clearTimeout(a.ed),a.ed=null)}function Ep(a){a=new Mc(a.Yd);a.type="input";return a}
Cp.prototype.i=function(){Cp.g.i.call(this);this.Hd.k();Dp(this);delete this.q};function Fp(a,b,c){bj.call(this,a);Gp(this,b||"#f00");this.className=c||"goog-hsv-palette";this.Sa=Vh(this.da())}k(Fp,bj);f=Fp.prototype;f.aw=function(a){a!=this.cn&&(Gp(this,a),Hp(this),this.dispatchEvent("action"))};function Gp(a,b){var c=tk(b).pp,d=zk(c),e=d[0],g=d[1],l=d[2],d=Math.max(Math.max(e,g),l),m=Math.min(Math.min(e,g),l);if(m==d)m=e=0;else{var q=d-m,m=q/d,e=60*(e==d?(g-l)/q:g==d?2+(l-e)/q:4+(e-g)/q);0>e&&(e+=360);360<e&&(e-=360)}a.we=[e,m,d];a.we[0]/=360;a.cn=c}
function Ip(a,b,c,d){if(null!=b||null!=c||null!=d)a.we[0]=null!=b?b:a.we[0],a.we[1]=null!=c?c:a.we[1],a.we[2]=null!=d?d:a.we[2],b=[360*a.we[0],a.we[1],a.we[2]],b=xk(Bk(b[0],b[1],b[2])),a.cn=b,Hp(a),a.dispatchEvent("action")}f.yg=function(){return!1};
f.C=function(){var a=this.da(),b=mc&&!vc("7")?" "+(this.className+"-noalpha"):"",c=a.C("DIV",this.className+"-hs-backdrop");this.vp=a.C("DIV",this.className+"-hs-handle");this.Ol=a.C("DIV",this.className+"-hs-image",this.vp);this.fo=a.C("DIV",this.className+"-v-image");this.at=a.C("DIV",this.className+"-v-handle");this.kw=a.C("DIV",this.className+"-swatch");this.Gn=a.C("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.C("label",null,this.Gn);this.q=a.C("DIV",this.className+
b,c,this.Ol,this.fo,this.at,this.kw,d)};f.Pb=function(){Fp.g.Pb.call(this);Hp(this);var a=this.Rb();a.I(this.b(),"mousedown",this.aj);this.Jr||(this.Jr=new Cp(this.Gn));a.I(this.Jr,"input",this.OP)};f.i=function(){Fp.g.i.call(this);delete this.Ol;delete this.vp;delete this.fo;delete this.at;delete this.kw;delete this.Gn;this.Jr&&(this.Jr.k(),delete this.Jr);ad(this.Tz);ad(this.Vz)};
function Hp(a){if(a.Fa){var b=a.we[1],c=a.we[2],d=a.Ol.offsetWidth*a.we[0];a.Hg()&&(d=a.Ol.offsetWidth-d);var e=Math.ceil(a.vp.offsetWidth/2),d=d-e,b=a.Ol.offsetHeight*(1-b),b=b-Math.ceil(a.vp.offsetHeight/2),e=a.vp,g=a.Hg();null!==b&&(e.style.top=b+"px");g?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.fo.offsetTop-Math.floor(a.at.offsetHeight/2)+(255-c)/255*a.fo.offsetHeight;a.at.style.top=b+"px";xi(a.Ol,c/255);Zh(a.fo,"background-color",xk(Bk(360*a.we[0],a.we[1],
255)));Zh(a.kw,"background-color",a.cn);Zh(a.kw,"color",127.5<a.we[2]?"#000":"#fff");var l;try{l=tk(a.Gn.value).pp}catch(m){}a.cn!=l&&(a.Gn.value=a.cn)}}f.aj=function(a){if(a.target==this.fo||a.target==this.at){var b=wi(this.fo);this.DG(b,a);this.Tz=C(this.Sa,"mousemove",wa(this.DG,this,b));this.Vz=C(this.Sa,"mouseup",this.li,!1,this)}else if(a.target==this.Ol||a.target==this.vp)b=wi(this.Ol),this.CG(b,a),this.Tz=C(this.Sa,"mousemove",wa(this.CG,this,b)),this.Vz=C(this.Sa,"mouseup",this.li,!1,this)};
f.DG=function(a,b){b.preventDefault();var c=Yh(this.da()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);Ip(this,null,null,c)};f.CG=function(a,b){b.preventDefault();var c=Yh(this.da()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;Ip(this,d,c,null)};f.li=function(){ad(this.Tz);ad(this.Vz)};
f.OP=function(){/^#?[0-9a-f]{6}$/i.test(this.Gn.value)&&this.aw(this.Gn.value)};V.a.c.jc=function(){V.a.c.w.call(this);this.yi("Color");this.nl=wh("div",{id:this.constructor.ID_PREFIX+"_ColorSquare_"+r(),"class":V.a.c.jc.CSS.hK});Ah(this.b(),this.nl);C(this.nl,"click",this.fJ.bind(this));this.ml=new Fp;this.ml.p();C(this.ml,"action",this.ue.bind(this));this.Vn(this.ml);R(this.ml.b(),this.constructor.CSS.fK);this.Si=wh("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+r(),"class":V.a.c.jc.CSS.gK});Ah(document.body,this.Si);Ah(this.Si,this.ml.b());this.Si.style.visibility=
"hidden";this.Je=wh("div",{id:this.constructor.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.c.jc.CSS.Nk});Ah(this.Si,this.Je);C(this.Je,"click",this.fJ.bind(this))};k(V.a.c.jc,V.a.c.w);h("xiv.ui.ctrl.ColorPaletteController",V.a.c.jc);V.a.c.jc.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";V.a.c.jc.CSS_SUFFIX={hK:"colorsquare",gK:"colorpaletteholder",fK:"colorpalette",Nk:"closebutton"};V.a.c.jc.zC=20;V.a.c.jc.AC=20;
V.a.c.jc.prototype.fJ=function(){this.Si.style.visibility="hidden"==this.Si.style.visibility?"visible":"hidden";var a=li(this.nl),b=ui(this.nl),c=ui(this.Si),b=a.x+b.width+V.a.c.jc.zC,a=a.y-V.a.c.jc.AC,d=parseInt(window.innerHeight);a+c.height>d&&(a-=a+c.height-d);di(this.Si,b,a)};
V.a.c.jc.prototype.update=function(){var a=Math.floor(255*this[V.a.c.w.qo].color[0]),b=Math.floor(255*this[V.a.c.w.qo].color[1]),c=Math.floor(255*this[V.a.c.w.qo].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.O.aw(xk([a,b,c]))};V.a.c.jc.prototype.ue=function(a){this.nl.style.backgroundColor=a.target.cn;this.dispatchEvent({type:"o",color:zk(a.target.cn).map(function(a){return a/255})})};
V.a.c.jc.prototype.i=function(){V.a.c.jc.g.i.call(this);bd(this.Je);S(this.Je);delete this.Je;bd(this.nl);S(this.nl);delete this.nl;bd(this.ml);this.ml.k();delete this.ml;S(this.Si);delete this.Si};h("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",V.a.c.jc.ID_PREFIX);h("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",V.a.c.jc.CSS_SUFFIX);h("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",V.a.c.jc.zC);h("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",V.a.c.jc.AC);
h("xiv.ui.ctrl.ColorPaletteController.prototype.update",V.a.c.jc.prototype.update);h("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",V.a.c.jc.prototype.ue);h("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",V.a.c.jc.prototype.i);V.a.c.Hh=function(){V.a.c.ge.call(this)};k(V.a.c.Hh,V.a.c.ge);h("xiv.ui.ctrl.MeshController3D",V.a.c.Hh);V.a.c.Hh.ID_PREFIX="xiv.ui.ctrl.MeshController3D";V.a.c.Hh.CSS_SUFFIX={};V.a.c.Hh.prototype.add=function(a){V.a.c.Hh.g.add.call(this,a);this.zx(a,V.a.c.Ad);this.yx(a,V.a.c.jc)};h("xiv.ui.ctrl.MeshController3D.ID_PREFIX",V.a.c.Hh.ID_PREFIX);h("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",V.a.c.Hh.CSS_SUFFIX);h("xiv.ui.ctrl.MeshController3D.prototype.add",V.a.c.Hh.prototype.add);
h("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",V.a.c.Hh.prototype.i);V.a.c.Gi=function(){V.a.c.ge.call(this)};k(V.a.c.Gi,V.a.c.ge);h("xiv.ui.ctrl.AnnotationsController3D",V.a.c.Gi);V.a.c.Gi.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";V.a.c.Gi.CSS_SUFFIX={};V.a.c.Gi.prototype.add=function(a){V.a.c.Gi.g.add.call(this,a);this.zx(a,V.a.c.Ad);this.yx(a,V.a.c.jc)};h("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",V.a.c.Gi.ID_PREFIX);h("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",V.a.c.Gi.CSS_SUFFIX);h("xiv.ui.ctrl.AnnotationsController3D.prototype.add",V.a.c.Gi.prototype.add);V.a.c.he=function(){V.a.c.Ye.call(this)};k(V.a.c.he,V.a.c.Ye);h("xiv.ui.ctrl.VolumeController",V.a.c.he);V.a.c.he.ID_PREFIX="xiv.ui.ctrl.VolumeController";V.a.c.he.CSS_SUFFIX={};V.a.c.he.prototype.add=function(a){V.a.c.he.g.add.call(this,a);this.SD(a);this.ND(a)};V.a.c.he.prototype.SD=function(a){var b=this.zg(V.a.c.af,"Visible",function(){});V.a.c.w.Mg(a,b);this.zh.push(b);b.gm(a);b.O.checked=a[V.d.ng.ro]||!1};
V.a.c.he.prototype.ND=function(a){var b=this.zg(V.a.c.Ad,"Show Label Map",function(b){a.uz.visible=b.checked});V.a.c.w.Mg(a,b);this.zh.push(b);b.gm(a);b.O.wh(!1)};V.a.c.he.prototype.i=function(){V.a.c.he.g.i.call(this);window.console.log("need to implement dispose methods for VolumeController")};h("xiv.ui.ctrl.VolumeController.ID_PREFIX",V.a.c.he.ID_PREFIX);h("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",V.a.c.he.CSS_SUFFIX);h("xiv.ui.ctrl.VolumeController.prototype.add",V.a.c.he.prototype.add);
h("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",V.a.c.he.prototype.SD);h("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",V.a.c.he.prototype.ND);h("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",V.a.c.he.prototype.i);V.a.c.$b=function(){U.S.call(this);w({volumes:null,annotations:null,meshes:null,levels:null},function(a,b){this[b]=null})};k(V.a.c.$b,U.S);h("xiv.ui.ctrl.XtkControllerTree",V.a.c.$b);V.a.c.$b.ko=function(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null};h("xiv.ui.ctrl.XtkControllerTree.ControlSet",V.a.c.$b.ko);V.a.c.$b.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";V.a.c.$b.CSS_SUFFIX={};V.a.c.$b.iO=function(){return{volumes:null,annotations:null,meshes:null,levels:null}};f=V.a.c.$b.prototype;
f.rC=function(){};f.fq=function(){return this.Xi([this.Mk])};f.rC=function(){return this.Xi([this.wm])};f.DL=function(){return this.Xi([this.Km])};f.uO=function(){};f.Xi=function(a){var b=[];A(ia(a)?a:[a],function(a){null!=a&&(b=Qb(b,a.HF()))});return b};f.Ys=function(){var a=this.Xi([this.wm,this.Lm,this.Km,this.xm,this.Mk,this.Cw]);A(a,function(a){a.update()}.bind(this))};
f.ay=function(a,b){a instanceof F?(null==this.Lm&&(this.wm=new V.a.c.Jb,this.Lm=new V.a.c.he,this.Km=new V.a.c.Lb),this.wm.add(a,b),this.Lm.add(a,b),this.Km.add(a,b)):a instanceof co?(null==this.xm&&(this.xm=new V.a.c.Hh),this.xm.add(a,b)):a instanceof mn&&(null==this.Mk&&(this.Mk=new V.a.c.Gi),this.Mk.add(a));this.volumes=new V.a.c.$b.ko(null,this.Xi([this.Km]),this.Xi([this.Lm]));this.annotations=new V.a.c.$b.ko(null,this.Xi([this.Mk]));this.meshes=new V.a.c.$b.ko(null,this.Xi([this.xm]));this.levels=
new V.a.c.$b.ko(null,null,this.Xi([this.wm]))};f.i=function(){V.a.c.$b.g.i.call(this);null!=this.wm&&(this.wm.k(),delete this.wm);null!=this.Lm&&(this.Lm.k(),delete this.Lm);null!=this.OC&&(this.OC.k(),delete this.OC);null!=this.Km&&(this.Km.k(),delete this.Km);null!=this.xm&&(this.xm.k(),delete this.xm);null!=this.Mk&&(this.Mk.k(),delete this.Mk);null!=this.Cw&&(this.Cw.k(),delete this.Cw)};h("xiv.ui.ctrl.XtkControllerTree.ControlSet",V.a.c.$b.ko);h("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",V.a.c.$b.ID_PREFIX);
h("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",V.a.c.$b.CSS_SUFFIX);h("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",V.a.c.$b.iO);h("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",V.a.c.$b.prototype.rC);h("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",V.a.c.$b.prototype.fq);h("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",V.a.c.$b.prototype.DL);h("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",V.a.c.$b.prototype.uO);
h("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",V.a.c.$b.prototype.Xi);h("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",V.a.c.$b.prototype.Ys);h("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",V.a.c.$b.prototype.ay);h("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",V.a.c.$b.prototype.i);function Jp(){id.call(this);this.t="shaders";this.Vt="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Vt=a+="}\n";this.Jt="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Jt=a+="}\n"}
k(Jp,id);
var Kp={JW:"vertexPosition",IW:"vertexNormal",HW:"vertexColor",LW:"vertexTexturePos",KW:"vertexScalar"},Lp={NW:"view",JV:"perspective",JU:"center",GV:"objectTransform",DW:"useObjectColor",EV:"objectColor",FW:"useScalars",YV:"scalarsReplaceMode",VV:"scalarsMin",SV:"scalarsMax",WV:"scalarsMinColor",TV:"scalarsMaxColor",XV:"scalarsMinThreshold",UV:"scalarsMaxThreshold",RV:"scalarsInterpolation",KV:"pointSize",FV:"objectOpacity",DV:"normal",EW:"usePicking",GW:"useTexture",BW:"useLabelMapTexture",pV:"labelmapOpacity",
oV:"labelmapColor",pW:"textureSampler",qW:"textureSampler2",RW:"volumeLowerThreshold",YW:"volumeUpperThreshold",VW:"volumeScalarMin",TW:"volumeScalarMax",WW:"volumeScalarMinColor",UW:"volumeScalarMaxColor",$W:"volumeWindowLow",ZW:"volumeWindowHigh",XW:"volumeTexture"};
function Mp(a){var b=Object.keys(Lp);if(!Object.keys(Kp).every(function(a){a=Kp[a];return-1!=this.Vt.search(a)||-1!=this.Jt.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Lp[a];return-1!=this.Vt.search(a)||-1!=this.Jt.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Np(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");id.call(this);this.t="buffer";this.nc=a;this.Wk=b;this.Xk=c}k(Np,id);function Op(a,b){this.$x=a instanceof Zg?a:new Zg(a,b)}k(Op,tm);Op.prototype.uf=function(a,b,c,d){$l(gi(a),0,a,b,this.$x,c,null,d)};function Pp(a,b){this.KS=4;this.HA=b||void 0;qj.call(this,a)}k(Pp,qj);Pp.prototype.XA=function(a){this.HA=a||void 0;this.mb()&&this.uf()};Pp.prototype.uf=function(){if(this.HA){var a=!this.mb()&&"move_offscreen"!=this.$p,b=this.b();a&&(b.style.visibility="hidden",yi(b,!0));this.HA.uf(b,this.KS,this.CY);a&&yi(b,!1)}};function Qp(a,b,c){this.dc=c||(a?jh(mh(a)):jh());Pp.call(this,this.dc.C("div",{style:"position:absolute;display:none;"}));this.gy=new Zg(1,1);this.qn=new jg;a&&this.So(a);null!=b&&this.Bs(b)}k(Qp,Pp);var Rp=[];f=Qp.prototype;f.Mf=null;f.className="goog-tooltip";f.gJ=500;f.YP=0;f.da=function(){return this.dc};f.So=function(a){a=mh(a);this.qn.add(a);C(a,"mouseover",this.Dn,!1,this);C(a,"mouseout",this.Ou,!1,this);C(a,"mousemove",this.BG,!1,this);C(a,"focus",this.Bn,!1,this);C(a,"blur",this.Ou,!1,this)};
f.detach=function(a){if(a)a=mh(a),Sp(this,a),this.qn.remove(a);else{for(var b=this.qn.yn(),c=0;a=b[c];c++)Sp(this,a);this.qn.clear()}};function Sp(a,b){$c(b,"mouseover",a.Dn,!1,a);$c(b,"mouseout",a.Ou,!1,a);$c(b,"mousemove",a.BG,!1,a);$c(b,"focus",a.Bn,!1,a);$c(b,"blur",a.Ou,!1,a)}f.Bs=function(a){Kh(this.b(),a)};f.SA=function(a){var b=this.b();b&&S(b);Qp.g.SA.call(this,a);a&&(b=this.dc.Sa.body,b.insertBefore(a,b.lastChild))};f.Ty=function(){return Qh(this.b())};
f.mp=function(){return this.im?this.mb()?4:1:this.Dr?3:this.mb()?2:0};f.dA=function(){if(!qj.prototype.dA.call(this))return!1;if(this.anchor)for(var a,b=0;a=Rp[b];b++)Ih(a.b(),this.anchor)||a.Da(!1);Ob(Rp,this);a=this.b();a.className=this.className;Tp(this);C(a,"mouseover",this.IG,!1,this);C(a,"mouseout",this.HG,!1,this);Up(this);return!0};
f.jA=function(){Pb(Rp,this);for(var a=this.b(),b,c=0;b=Rp[c];c++)b.anchor&&Ih(a,b.anchor)&&b.Da(!1);this.ZH&&Vp(this.ZH);$c(a,"mouseover",this.IG,!1,this);$c(a,"mouseout",this.HG,!1,this);this.anchor=void 0;0==this.mp()&&(this.Vv=!1);qj.prototype.jA.call(this)};f.yH=function(a,b){this.anchor==a&&this.qn.contains(this.anchor)&&(this.Vv||!this.SY?(this.Da(!1),this.mb()||(this.anchor=a,this.XA(b||Wp(this,0)),this.Da(!0))):this.anchor=void 0);this.im=void 0};
f.QQ=function(a){this.Dr=void 0;a==this.anchor&&(null!=this.Mf&&(this.Mf==this.b()||this.qn.contains(this.Mf))||this.rE&&this.rE.Mf||this.Da(!1))};function Xp(a,b){var c=Yh(a.dc);a.gy.x=b.clientX+c.x;a.gy.y=b.clientY+c.y}f.Dn=function(a){var b=Yp(this,a.target);this.Mf=b;Tp(this);b!=this.anchor&&(this.anchor=b,this.im||(this.im=Xf(wa(this.yH,this,b,void 0),this.gJ)),Zp(this),Xp(this,a))};function Yp(a,b){try{for(;b&&!a.qn.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.BG=function(a){Xp(this,a);this.Vv=!0};f.Bn=function(a){this.Mf=a=Yp(this,a.target);this.Vv=!0;if(this.anchor!=a){this.anchor=a;var b=Wp(this,1);Tp(this);this.im||(this.im=Xf(wa(this.yH,this,a,b),this.gJ));Zp(this)}};function Wp(a,b){if(0==b){var c=a.gy.clone();return new $p(c)}return new aq(a.Mf)}function Zp(a){if(a.anchor)for(var b,c=0;b=Rp[c];c++)Ih(b.b(),a.anchor)&&(b.rE=a,a.ZH=b)}
f.Ou=function(a){var b=Yp(this,a.target),c=Yp(this,a.relatedTarget);b!=c&&(b==this.Mf&&(this.Mf=null),Up(this),this.Vv=!1,!this.mb()||a.relatedTarget&&Ih(this.b(),a.relatedTarget)?this.anchor=void 0:Vp(this))};f.IG=function(){var a=this.b();this.Mf!=a&&(Tp(this),this.Mf=a)};f.HG=function(a){var b=this.b();this.Mf!=b||a.relatedTarget&&Ih(b,a.relatedTarget)||(this.Mf=null,Vp(this))};function Up(a){a.im&&(ba.clearTimeout(a.im),a.im=void 0)}
function Vp(a){2==a.mp()&&(a.Dr=Xf(wa(a.QQ,a,a.anchor),a.YP))}function Tp(a){a.Dr&&(ba.clearTimeout(a.Dr),a.Dr=void 0)}f.i=function(){this.Da(!1);Up(this);this.detach();this.b()&&S(this.b());this.Mf=null;delete this.dc;Qp.g.i.call(this)};function $p(a,b){Op.call(this,a,b)}k($p,Op);$p.prototype.uf=function(a,b,c){b=gi(a);b=ji(b);c=c?new ah(c.top+10,c.right,c.bottom,c.left+10):new ah(10,0,0,10);bm(this.$x,a,4,c,b,9)&496&&bm(this.$x,a,4,c,b,5)};function aq(a){um.call(this,a,3)}k(aq,um);
aq.prototype.uf=function(a,b,c){var d=new Zg(10,0);$l(this.element,this.ar,a,b,d,c,9)&496&&$l(this.element,2,a,1,d,c,5)};function bq(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!ma(b)||!ma(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof No))throw Error("Invalid interactor.");Qp.call(this);this.t="caption";this.Wg=a;this.Yt=b;this.Zt=c;this.yc=d;this.Oj=null;this.Om=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Om=[a];Zc(d,se,this.Pr.bind(this));this.hz()}
k(bq,Qp);bq.prototype.hz=function(){var a=ai(this.Wg,"position");if("static"==a||""==a)this.Wg.style.position="relative";var a=document.getElementsByTagName("head")[0],b=wh("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Om[0]));a.appendChild(b);b.appendChild(c);this.Oj=b;this.XA(new Op(this.Yt,this.Zt));this.Da(!0);this.So(this.Wg);this.b().classList.add("x-tooltip")};bq.prototype.Pr=function(){this.Da(!1);this.Oj&&S(this.Oj);this.b()&&S(this.b());this.Oj=null};function cq(){jp.call(this);this.t="renderer3D";this.Bq=this.Eq=this.Aq=this.Dq=this.zq=this.Cq=this.nx=this.ox=null;this.xb=[0,0,0];this.tq=[0,0,0];this.iD=null;this.Zw=new pd;this.Oq=new pd;this.Wm=new pd;this.Fq=new pd;this.Bo=new pd;this.Ko=new pd;this.Um=new pd;this.Po=new pd;this.sc={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}k(cq,jp);cq.prototype.__defineGetter__("config",function(){return this.sc});f=cq.prototype;
f.kT=function(){this.Bq=this.Eq=this.Aq=this.Dq=this.zq=this.Cq=null;this.xb=[0,0,0]};f.kA=function(a){cq.g.kA.call(this,a);var b=a.Yt;a=a.Zt;var c=this.EA(b,a);if(c=this.get(c))if(c=c.Ao){var d=oi(this.Za),b=new bq(this.Za,d.x+b+10,d.y+a+10,this.yc);a=Zi(c,null);if(b=b.b())b.innerHTML=Yi(a)}};
f.Ta=function(){cq.g.Ta.call(this,"experimental-webgl");try{if(this.f.viewport(0,0,this.Db,this.lb),this.f.clearColor(this.tq[0],this.tq[1],this.tq[2],0),this.f.enable(this.f.BLEND),this.f.blendEquation(this.f.FUNC_ADD),this.f.blendFunc(this.f.SRC_ALPHA,this.f.ONE_MINUS_SRC_ALPHA),this.f.enable(this.f.DEPTH_TEST),this.f.depthFunc(this.f.LEQUAL),this.f.clear(this.f.COLOR_BUFFER_BIT|this.f.DEPTH_BUFFER_BIT),this.sc.PICKING_ENABLED){var a=this.f.createFramebuffer(),b=this.f.createRenderbuffer(),c=this.f.createTexture();
this.f.bindTexture(this.f.TEXTURE_2D,c);this.f.texImage2D(this.f.TEXTURE_2D,0,this.f.RGB,this.Db,this.lb,0,this.f.RGB,this.f.UNSIGNED_BYTE,null);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_S,this.f.CLAMP_TO_EDGE);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_T,this.f.CLAMP_TO_EDGE);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MAG_FILTER,this.f.NEAREST);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MIN_FILTER,this.f.NEAREST);this.f.bindFramebuffer(this.f.FRAMEBUFFER,
a);this.f.bindRenderbuffer(this.f.RENDERBUFFER,b);this.f.renderbufferStorage(this.f.RENDERBUFFER,this.f.DEPTH_COMPONENT16,this.Db,this.lb);this.f.bindRenderbuffer(this.f.RENDERBUFFER,null);this.f.framebufferTexture2D(this.f.FRAMEBUFFER,this.f.COLOR_ATTACHMENT0,this.f.TEXTURE_2D,c,0);this.f.framebufferRenderbuffer(this.f.FRAMEBUFFER,this.f.DEPTH_ATTACHMENT,this.f.RENDERBUFFER,b);this.f.bindFramebuffer(this.f.FRAMEBUFFER,null);this.iD=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new Jp;dq(this,a)};
function dq(a,b){if(null==a.Fd||null==a.f||null==a.Na)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Jp))throw Error("Could not add shaders.");Mp(b);var c=a.f.createShader(a.f.FRAGMENT_SHADER),d=a.f.createShader(a.f.VERTEX_SHADER);a.f.shaderSource(c,b.Jt);a.f.shaderSource(d,b.Vt);a.f.compileShader(c);a.f.compileShader(d);if(!a.f.getShaderParameter(c,a.f.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.f.getShaderInfoLog(c));if(!a.f.getShaderParameter(d,
a.f.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.f.getShaderInfoLog(d));var e=a.f.createProgram();a.f.attachShader(e,d);a.f.attachShader(e,c);a.f.linkProgram(e);if(!a.f.getProgramParameter(e,a.f.LINK_STATUS))throw Error("Could not create shader program!\n"+a.f.getShaderInfoLog(c)+"\n"+a.f.getShaderInfoLog(d)+"\n"+a.f.getProgramInfoLog(e));a.f.useProgram(e);a.nx=e;Object.keys(Kp).forEach(function(a){a=Kp[a];this.Zw.set(a,this.f.getAttribLocation(this.nx,a));this.f.enableVertexAttribArray(this.Zw.get(a))}.bind(a));
Object.keys(Lp).forEach(function(a){a=Lp[a];this.Oq.set(a,this.f.getUniformLocation(this.nx,a))}.bind(a));a.ox=b}
f.zj=function(a){cq.g.zj.call(this,a);var b=!1;if(null!=a){this.get(a.Fe)&&(b=!0);var c=a.Fe,d=a.J,e=a.ya,g=a.Ud,l=a.Cb,m=a.Ca,q=a.pd,p=a.gf,t=a.r,s=a.Ob;if(null!=t&&null!=t.Ca&&t.Ca.T)this.zj(t);else if(null!=t&&t.T&&this.zj(t),null!=p&&null!=p.Ca&&p.Ca.T)this.Ic.load(p,a);else if(null!=l&&null!=l.Ca&&l.Ca.T)this.Ic.load(l,a);else{if(null!=m&&ia(m))if(null!=a.Dj){if(a.Dj.Wr!=m.length||!a.T)return}else{b=0;c=m.length;for(b=0;b<c;b++)this.Ic.load(m[b],a);return}else{if(null!=m&&m.T){this.Ic.load(a,
a);return}if(null!=s&&null!=s.Ca&&s.Ca.T){this.Ic.load(s,a);return}}if(0<a.m.length)for(m=a.m,p=m.length,t=t=0;t<p;t++)this.zj(m[t]);if(d){for(m=0;this.Ot;)m++,window.console.log("Possible thread lock avoided: "+m);this.Ot=!0;p=a instanceof Oe&&a.Pj instanceof on;b&&null!=l&&l.T&&(m=this.Um.get(c),null!=m&&this.f.isBuffer(m.nc)&&this.f.deleteBuffer(m.nc));m=null;if(null!=l)if(!b||l.T){m=a.Oo;if(null==m)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
t=!1;l.dl&&(t=!0);this.f.pixelStorei(this.f.UNPACK_FLIP_Y_WEBGL,t);t=this.f.createTexture();t.SG=l.Oh;this.Po.set(l.Fe,t);this.f.bindTexture(this.f.TEXTURE_2D,t);l.dl?(t=this.f.RGBA,l.ZC&&(t=this.f.LUMINANCE,this.f.pixelStorei(this.f.UNPACK_ALIGNMENT,1)),this.f.texImage2D(this.f.TEXTURE_2D,0,t,l.mx,l.lx,0,t,this.f.UNSIGNED_BYTE,l.dl)):this.f.texImage2D(this.f.TEXTURE_2D,0,this.f.RGBA,this.f.RGBA,this.f.UNSIGNED_BYTE,t.SG);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_S,this.f.CLAMP_TO_EDGE);
this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_T,this.f.CLAMP_TO_EDGE);p?(this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MAG_FILTER,this.f.NEAREST),this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MIN_FILTER,this.f.NEAREST)):(this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MAG_FILTER,this.f.LINEAR),this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MIN_FILTER,this.f.LINEAR));this.f.bindTexture(this.f.TEXTURE_2D,null);t=this.f.createBuffer();this.f.bindBuffer(this.f.ARRAY_BUFFER,
t);this.f.bufferData(this.f.ARRAY_BUFFER,new Float32Array(m),this.f.STATIC_DRAW);m=new Np(t,m.length,2);this.Um.set(c,m);l.T=!1}else m=this.Um.get(c);Of(this.Ic,.1);if(p)this.Ot=!1,n.cf(this.t+".update"),Of(this.Ic,.9);else{if(!b||d.T||q.T){p=q.pc;l=n.B.Oc(p,d.Sh,d.Th,d.Uh);p=n.B.Oc(p,d.Ph,d.Qh,d.Rh);if(null===this.Cq||l.x<this.Cq)this.Cq=l.x;if(null===this.zq||p.x>this.zq)this.zq=p.x;if(null===this.Dq||l.y<this.Dq)this.Dq=l.y;if(null===this.Aq||p.y>this.Aq)this.Aq=p.y;if(null===this.Eq||l.z<this.Eq)this.Eq=
l.z;if(null===this.Bq||p.z>this.Bq)this.Bq=p.z;this.xb=[(this.Cq+this.zq)/2,(this.Dq+this.Aq)/2,(this.Eq+this.Bq)/2];q.T=!1}b&&d.T&&(q=this.Wm.get(c),null!=q&&this.f.isBuffer(q.nc)&&this.f.deleteBuffer(q.nc));q=null;!b||d.T?(q=this.f.createBuffer(),d.resize(),this.f.bindBuffer(this.f.ARRAY_BUFFER,q),this.f.bufferData(this.f.ARRAY_BUFFER,d.Xc,this.f.STATIC_DRAW),q=new Np(q,d.count,3),d.T=!1):q=this.Wm.get(c);Of(this.Ic,.3);b&&e.T&&(l=this.Wm.get(c),null!=l&&this.f.isBuffer(l.nc)&&this.f.deleteBuffer(l.nc));
l=null;!b||e.T?(l=this.f.createBuffer(),e.resize(),this.f.bindBuffer(this.f.ARRAY_BUFFER,l),this.f.bufferData(this.f.ARRAY_BUFFER,e.Xc,this.f.STATIC_DRAW),l=new Np(l,e.count,3),e.T=!1):l=this.Fq.get(c);Of(this.Ic,.3);b&&g&&g.T&&(e=this.Bo.get(c),null!=e&&this.f.isBuffer(e.nc)&&this.f.deleteBuffer(e.nc));e=null;if(g)if(!b||g.T){if(g.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.f.createBuffer();g.resize();this.f.bindBuffer(this.f.ARRAY_BUFFER,e);this.f.bufferData(this.f.ARRAY_BUFFER,
g.Xc,this.f.STATIC_DRAW);e=new Np(e,g.count,3);g.T=!1}else e=this.Bo.get(c);Of(this.Ic,.2);b&&s&&s.T&&(g=this.Ko.get(c),null!=g&&this.f.isBuffer(g.nc)&&this.f.deleteBuffer(g.nc));g=null;if(s)if(g=s.vq,!b||s.T){if(g.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.f.createBuffer();this.f.bindBuffer(this.f.ARRAY_BUFFER,d);this.f.bufferData(this.f.ARRAY_BUFFER,g,this.f.STATIC_DRAW);g=new Np(d,g.length,3);s.T=!1}else g=this.Ko.get(c);Of(this.Ic,.1);b||this.Oi.add(a);this.Wm.set(c,
q);this.Fq.set(c,l);this.Bo.set(c,e);this.Um.set(c,m);this.Ko.set(c,g);this.Ot=a.T=!1}}else a.T=!1}}};f.EA=function(a,b){if(this.sc.PICKING_ENABLED){this.lj(!0,!1);var c=new Uint8Array(4);this.f.readPixels(a,this.lb-b,1,1,this.f.RGBA,this.f.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.lj=function(a,b){cq.g.lj.call(this,a,b);this.f.viewport(0,0,this.Db,this.lb);this.f.clear(this.f.COLOR_BUFFER_BIT|this.f.DEPTH_BUFFER_BIT);var c=this.Oi.Nb,d=c.length;if(0!=d){a?this.f.bindFramebuffer(this.f.FRAMEBUFFER,this.iD):this.f.bindFramebuffer(this.f.FRAMEBUFFER,null);var e=this.Na.kx,g=this.Na.na;this.f.uniformMatrix4fv(this.Oq.get("perspective"),!1,e);this.f.uniformMatrix4fv(this.Oq.get("view"),!1,g);e=this.xb;this.f.uniform3f(this.Oq.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
g=this.kf.length;for(e=0;e<g;++e){var l=this.kf[e];if(l instanceof F){var m=n.B.Oc(this.Na.na,l.Ya[0]+l.h[0].P[0],l.Ya[1]+l.h[0].P[1],l.Ya[2]+l.h[0].P[2]),q=n.B.Oc(this.Na.na,l.Ya[0]-l.h[0].P[0],l.Ya[1]-l.h[0].P[1],l.Ya[2]-l.h[0].P[2]),p=Math.abs(m.z-q.z),m=n.B.Oc(this.Na.na,l.Ya[0]+l.h[1].P[0],l.Ya[1]+l.h[1].P[1],l.Ya[2]+l.h[1].P[2]),q=n.B.Oc(this.Na.na,l.Ya[0]-l.h[1].P[0],l.Ya[1]-l.h[1].P[1],l.Ya[2]+-l.h[1].P[2]),t=Math.abs(m.z-q.z),m=n.B.Oc(this.Na.na,l.Ya[0]+l.h[2].P[0],l.Ya[1]+l.h[2].P[1],l.Ya[2]+
l.h[2].P[2]),q=n.B.Oc(this.Na.na,l.Ya[0]-l.h[2].P[0],l.Ya[1]-l.h[2].P[1],l.Ya[2]-l.h[2].P[2]),m=Math.max(p,t,Math.abs(m.z-q.z));m==p?nn(l,0):m==t?nn(l,1):nn(l,2)}}if(this.sc.ORDERING_ENABLED){p=!1;g=this.kf;l=g.length-1;do if(e=g[l],e instanceof F&&e.wg&&-1!=e.zc){var p=e.m[e.zc].m,t=e.zc,m=n.B.Oc(this.Na.na,e.Ya[0]+e.h[t].rb[0],e.Ya[1]+e.h[t].rb[1],e.Ya[2]+e.h[t].rb[2]),q=n.B.Oc(this.Na.na,e.Ya[0]-e.h[t].rb[0],e.Ya[1]-e.h[t].rb[1],e.Ya[2]-e.h[t].rb[2]),m=m.z-q.z,q=Math.max(e.yo[e.zc],Math.max(e.yo[e.zc+
4],e.yo[e.zc+8])),s=Math.min(e.yo[e.zc],Math.min(e.yo[e.zc+4],e.yo[e.zc+8]));if(0>m*(q+s))for(m=m=0;m<e.Jq[t]-1;m++)p[m]&&(p[m].je=e.je,p[m].Ee=e.h[t].Mo*m);else for(m=e.Jq[t]-1;0<=m;m--)p[m]&&(p[m].je=e.je,p[m].Ee=(e.Jq[t]-1)*e.h[t].Mo-e.h[t].Mo*m);p=!0}while(l--);g=this.Oi.Nb;l=g.length-1;do e=g[l],!e.bc||1==e.je||e instanceof Oe||(p=e,t=e.J.Gt,e=n.B.Oc(e.pd.pc,t[0],t[1],t[2]),e=n.B.Oc(this.Na.na,e.x,e.y,e.z),e=n.ha.ry(this.Na.Qm,e),e=Math.round(1E3*e)/1E3,p.Ee=e,p=!0);while(l--);p&&this.Oi.sort()}if(g=
!a&&null!=b&&b&&this.sc.STATISTICS_ENABLED)var u=0,v=0,D=0,B=0;var e=this.Zw,l=e.get("vertexPosition"),p=e.get("vertexNormal"),t=e.get("vertexColor"),m=e.get("vertexTexturePos"),q=e.get("vertexScalar"),e=this.Oq,s=e.get("usePicking"),I=e.get("useObjectColor"),G=e.get("objectColor"),Q=e.get("useScalars"),M=e.get("scalarsReplaceMode"),L=e.get("scalarsMin"),J=e.get("scalarsMax"),H=e.get("scalarsMinColor"),O=e.get("scalarsMaxColor"),N=e.get("scalarsInterpolation"),Y=e.get("scalarsMinThreshold"),K=e.get("scalarsMaxThreshold"),
y=e.get("objectOpacity"),z=e.get("labelmapOpacity"),ga=e.get("labelmapColor"),Z=e.get("useTexture"),E=e.get("useLabelMapTexture"),W=e.get("textureSampler"),Xa=e.get("textureSampler2"),qa=e.get("volumeLowerThreshold"),Ca=e.get("volumeUpperThreshold"),sa=e.get("volumeScalarMin"),jb=e.get("volumeScalarMax"),ob=e.get("volumeWindowLow"),tb=e.get("volumeWindowHigh"),ki=e.get("volumeScalarMinColor"),Cr=e.get("volumeScalarMaxColor"),vo=e.get("volumeTexture"),Dr=e.get("objectTransform"),Er=e.get("pointSize"),
e=d;do{var Ia=c[d-e];if(Ia){var Ra=null;Ia instanceof Oe&&Ia.Pj&&(Ra=Ia.Pj);if(Ia.bc&&(!Ra||Ra.bc)&&(!a||Ia.Gq)){var Cb=Ia.Fe,Dc=Ia.yq,ec=this.Wm.get(Cb),Vc=this.Fq.get(Cb),nk=this.Bo.get(Cb),Md=this.Ko.get(Cb),ok=this.Um.get(Cb);this.f.bindBuffer(this.f.ARRAY_BUFFER,ec.nc);this.f.vertexAttribPointer(l,ec.Xk,this.f.FLOAT,!1,0,0);this.f.bindBuffer(this.f.ARRAY_BUFFER,Vc.nc);this.f.vertexAttribPointer(p,Vc.Xk,this.f.FLOAT,!1,0,0);a?this.f.uniform1i(s,!0):this.f.uniform1i(s,!1);!nk||a||Dc?(Vc=1,Dc&&
!a&&(Vc=0),this.f.uniform1i(I,Vc),Vc=Ia.kb,a&&(Vc=[Math.floor(Cb%65025%255)/255,Math.floor(Cb%65025/255)/255,Math.floor(Cb/65025)/255]),this.f.uniform3f(G,parseFloat(Vc[0]),parseFloat(Vc[1]),parseFloat(Vc[2])),this.f.vertexAttribPointer(t,ec.Xk,this.f.FLOAT,!1,0,0)):(this.f.uniform1i(I,!1),this.f.bindBuffer(this.f.ARRAY_BUFFER,nk.nc),this.f.vertexAttribPointer(t,nk.Xk,this.f.FLOAT,!1,0,0));!Md||a||Dc?(this.f.uniform1i(Q,!1),this.f.vertexAttribPointer(q,ec.Xk,this.f.FLOAT,!1,0,0)):(this.f.uniform1i(Q,
!0),this.f.uniform1i(M,Ia.Ob.lD),Cb=Ia.Ob.$k,Dc=Ia.Ob.Yk,this.f.uniform3f(H,parseFloat(Cb[0]),parseFloat(Cb[1]),parseFloat(Cb[2])),this.f.uniform3f(O,parseFloat(Dc[0]),parseFloat(Dc[1]),parseFloat(Dc[2])),this.f.uniform1f(Y,parseFloat(Ia.Ob.oc)),this.f.uniform1f(K,parseFloat(Ia.Ob.qc)),this.f.uniform1f(L,parseFloat(Ia.Ob.Jf)),this.f.uniform1f(J,parseFloat(Ia.Ob.Wc)),this.f.uniform1i(N,parseInt(Ia.Ob.ax,10)),this.f.bindBuffer(this.f.ARRAY_BUFFER,Md.nc),this.f.vertexAttribPointer(q,Md.Xk,this.f.FLOAT,
!1,0,0));this.f.uniform1f(y,parseFloat(Ia.je));Ia.Cb&&ok&&!a?(this.f.uniform1i(Z,!0),this.f.activeTexture(this.f.TEXTURE0),this.f.bindTexture(this.f.TEXTURE_2D,this.Po.get(Ia.Cb.Fe)),this.f.uniform1i(W,0),this.f.bindBuffer(this.f.ARRAY_BUFFER,ok.nc),this.f.vertexAttribPointer(m,ok.Xk,this.f.FLOAT,!1,0,0),this.f.uniform1i(vo,!1)):(this.f.uniform1i(Z,!1),this.f.vertexAttribPointer(m,ec.Xk,this.f.FLOAT,!1,0,0));Ra&&(this.f.uniform1i(vo,!0),this.f.uniform1f(qa,Ra.oc),this.f.uniform1f(Ca,Ra.qc),this.f.uniform1f(sa,
Ra.Jf),this.f.uniform1f(jb,Ra.Wc),Cb=Ra.$k,Dc=Ra.Yk,this.f.uniform3f(ki,parseFloat(Cb[0]),parseFloat(Cb[1]),parseFloat(Cb[2])),this.f.uniform3f(Cr,parseFloat(Dc[0]),parseFloat(Dc[1]),parseFloat(Dc[2])),this.f.uniform1f(ob,Ra.Kc),this.f.uniform1f(tb,Ra.Jc),Md=Ra.r,this.f.uniform1i(E,!1),Ra.wg?this.f.uniform1f(y,parseFloat(Ra.je)):Md&&Md.bc&&(Ra=Ia.r.Fe,this.f.uniform1i(E,!0),this.f.activeTexture(this.f.TEXTURE1),this.f.bindTexture(this.f.TEXTURE_2D,this.Po.get(Ra)),this.f.uniform1i(Xa,1),this.f.uniform1f(z,
Md.je),this.f.uniform4fv(ga,Md.px)));this.f.uniformMatrix4fv(Dr,!1,Ia.pd.pc);Ra=1;"POINTS"==Ia.lf&&(Ra=Ia.Hq);this.f.uniform1f(Er,Ra);Ra=-1;Ia.lf==$d?(Ra=this.f.TRIANGLES,g&&(v+=ec.Wk/3)):"LINES"==Ia.lf?(this.f.lineWidth(Ia.Io),Ra=this.f.LINES,g&&(D+=ec.Wk/2)):"POINTS"==Ia.lf?(Ra=this.f.POINTS,g&&(B+=ec.Wk)):"TRIANGLE_STRIPS"==Ia.lf?(Ra=this.f.TRIANGLE_STRIP,g&&(v+=ec.Wk/3)):"POLYGONS"==Ia.lf&&(Ra=0==ec.Wk%3?this.f.TRIANGLES:this.f.TRIANGLE_FAN,g&&(v+=ec.Wk/3));g&&(u+=ec.Wk);this.f.drawArrays(Ra,
0,ec.Wk)}}}while(--e);g&&(c="Objects: "+d+" | "+("Vertices: "+u+" | "),c+="Triangles: "+Math.round(v)+" | ",c+="Lines: "+D+" | ",c+="Points: "+B+" | ",c+="Textures: "+this.Po.ek(),window.console.log(c))}};
f.remove=function(a){cq.g.remove.call(this,a);if(0<a.m.length)for(var b=a.m,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.Fe;c=this.Um.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);a.Cb&&(c=this.Po.get(a.Cb.Fe))&&(this.f.deleteTexture(c),this.Po.remove(a.Cb.Fe));c=this.Wm.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);c=this.Fq.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);c=this.Bo.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);
c=this.Ko.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);this.Wm.remove(b);this.Fq.remove(b);this.Bo.remove(b);this.Um.remove(b);this.Ko.remove(b);this.Oi.remove(a);return!0};f.ah=function(){this.ox=null;delete this.ox;this.f.clear(this.f.COLOR_BUFFER_BIT|this.f.DEPTH_BUFFER_BIT);cq.g.ah.call(this)};cq.prototype.__defineGetter__("bgColor",function(){return this.tq});cq.prototype.__defineSetter__("bgColor",function(a){this.tq=a});
cq.prototype.IS=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.EA(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var g=bp(this.Na,a/this.Db*2-1,(this.lb-b)/this.lb*2-1,0);a=bp(this.Na,a/this.Db*2-1,(this.lb-b)/this.lb*2-1,1);g[0]+=this.xb[0];g[1]+=this.xb[1];g[2]+=this.xb[2];a[0]+=this.xb[0];a[1]+=this.xb[1];a[2]+=this.xb[2];b=[e.J.Sh,e.J.Th,e.J.Uh];var l=[e.J.Ph,e.J.Th,e.J.Uh],m=[e.J.Ph,e.J.Qh,e.J.Uh],q=[e.J.Sh,e.J.Qh,e.J.Uh],p=[e.J.Sh,e.J.Qh,e.J.Rh],t=[e.J.Sh,e.J.Th,
e.J.Rh],s=[e.J.Ph,e.J.Qh,e.J.Rh],u=[e.J.Ph,e.J.Th,e.J.Rh];b=[n.B.Oc(e.pd.pc,b[0],b[1],b[2]),n.B.Oc(e.pd.pc,l[0],l[1],l[2]),n.B.Oc(e.pd.pc,m[0],m[1],m[2]),n.B.Oc(e.pd.pc,q[0],q[1],q[2]),n.B.Oc(e.pd.pc,p[0],p[1],p[2]),n.B.Oc(e.pd.pc,t[0],t[1],t[2]),n.B.Oc(e.pd.pc,s[0],s[1],s[2]),n.B.Oc(e.pd.pc,u[0],u[1],u[2])];var l=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],v;for(v in b)v=b[v],l=[Math.min(l[0],v.x),Math.max(l[1],v.x),Math.min(l[2],v.y),Math.max(l[3],v.y),Math.min(l[4],v.z),Math.max(l[5],
v.z)];v=l;b=[];l=[];for(m=0;6>m;m++){var q=Math.floor(m/2),p=(q+1)%3,t=(q+2)%3,u=(2+2*q)%6,D=(4+2*q)%6,B=1/a[q]*(v[m]-g[q]);Infinity!=B&&-Infinity!=B&&(s=g[p]+a[p]*B,B=g[t]+a[t]*B,s>=v[u]&&s<=v[u+1]&&B>=v[D]&&B<=v[D+1]?(u=[],u[q]=v[m],u[p]=s,u[t]=B,b.push(u)):(u=[],u[q]=v[m],u[p]=s,u[t]=B,l.push(u)))}a=[b,l];a=a[0];if(0==a.length)return null;l=Array(2);for(v=0;2>v;v++)b=a[v],l[v]=Math.sqrt((b[0]-g[0])*(b[0]-g[0])+(b[1]-g[1])*(b[1]-g[1])+(b[2]-g[2])*(b[2]-g[2]));g=b=v=null;l[0]<l[1]?(v=a[0],b=a[1]):
(v=a[1],b=a[0]);g=Math.sqrt((v[0]-b[0])*(v[0]-b[0])+(v[1]-b[1])*(v[1]-b[1])+(v[2]-b[2])*(v[2]-b[2]));g/=c;a=v;v=[b[0]-v[0],b[1]-v[1],b[2]-v[2]];b=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);l=[v[0]/b,v[1]/b,v[2]/b];m=e.J.Xc;q=m.length;for(v=0;v<g;v+=c)for(a=[a[0]+c*l[0],a[1]+c*l[1],a[2]+c*l[2]],b=0;b<q;b+=3)if(p=m[b],t=m[b+1],s=m[b+2],u=new n.ha(p,t,s),u=n.B.Oc(e.pd.pc,p,t,s),Math.sqrt((a[0]-u.x)*(a[0]-u.x)+(a[1]-u.y)*(a[1]-u.y)+(a[2]-u.z)*(a[2]-u.z))<=d)return[u.x,u.y,u.z];return null};
h("X.renderer3D",cq);h("X.renderer3D.prototype.init",cq.prototype.Ta);h("X.renderer3D.prototype.add",cq.prototype.add);h("X.renderer3D.prototype.onShowtime",cq.prototype.uA);h("X.renderer3D.prototype.onRender",cq.prototype.VH);h("X.renderer3D.prototype.get",cq.prototype.get);h("X.renderer3D.prototype.render",cq.prototype.p);h("X.renderer3D.prototype.destroy",cq.prototype.ah);h("X.renderer3D.prototype.remove",cq.prototype.remove);h("X.renderer3D.prototype.resetBoundingBox",cq.prototype.kT);
h("X.renderer3D.prototype.resetViewAndRender",cq.prototype.ms);h("X.renderer3D.prototype.pick",cq.prototype.EA);h("X.renderer3D.prototype.pick3d",cq.prototype.IS);V.d.Gf=function(){cq.call(this)};k(V.d.Gf,cq);h("xiv.vis.XtkRenderer3D",V.d.Gf);V.d.Gf.prototype.ri=function(){this.On()};V.d.Gf.prototype.Nn=function(a){V.d.Gf.g.Nn.call(this,a);this.dispatchEvent({type:"A",value:a.Vm})};V.d.Gf.prototype.p=function(){this.Fd&&this.f?(V.d.Gf.g.p.call(this),this.dispatchEvent({type:"B"})):this.Ta()};V.d.Gf.prototype.remove=function(a){null!=a&&V.d.Gf.g.remove.call(this,a)};h("xiv.vis.XtkRenderer3D.prototype.onResize",V.d.Gf.prototype.ri);
h("xiv.vis.XtkRenderer3D.prototype.onProgress",V.d.Gf.prototype.Nn);h("xiv.vis.XtkRenderer3D.prototype.render",V.d.Gf.prototype.p);h("xiv.vis.XtkRenderer3D.prototype.remove",V.d.Gf.prototype.remove);V.d.sq=function(){V.d.Ma.call(this);this.orientation="V";this.wo=V.d.Gf};k(V.d.sq,V.d.Ma);h("xiv.vis.XtkPlane3D",V.d.sq);V.d.sq.ht=[-300,300,300];h("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",V.d.sq.ht);P.u.fq=function(a,b,c,d,e,g){P.u.Node.call(this);this.position=a;this.color=b;this.name=g};k(P.u.fq,P.u.Node);h("gxnat.slicerNode.Annotations",P.u.fq);V.d.H=function(){V.d.ng.call(this);this.Tg=null;this.Nf={Jk:[],Mz:[],yy:[],kJ:[]};this.Ok=new V.d.rg("X");this.Bm=new V.d.rg("Y");this.Cm=new V.d.rg("Z");this.hd=new V.d.sq;this.Dd={};this.Dd[this.Ok.$c()]=this.Ok;this.Dd[this.Bm.$c()]=this.Bm;this.Dd[this.Cm.$c()]=this.Cm;this.Dd[this.hd.$c()]=this.hd;this.jj=null;this.fw(this.hd);eq(this)};k(V.d.H,V.d.ng);h("xiv.vis.XtkEngine",V.d.H);V.d.H.ID_PREFIX="xiv.vis.XtkEngine";V.d.H.YJ={SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"};
V.d.H.SLICE_TO_RAS_KEY="sliceToRAS"+r();V.d.H.HAS_LABEL_MAP_KEY="hasLabelMap";f=V.d.H.prototype;f.Pv=!1;function fq(a,b){null!=b.og.Sq&&A(b.og.Sq,function(a){this.Nf.kJ.push(V.d.H.AE(a))}.bind(a))}f.RI=function(a,b){switch(a.toLowerCase()){case "x":this.Ok.xd(b);break;case "y":this.Bm.xd(b);break;case "z":this.Cm.xd(b);break;case "v":this.hd.xd(b)}};f.fw=function(a){this.jj=a;this.jj.Ta();this.hT=C(this.jj,"A",this.qA.bind(this))};f.ZO=function(){return this.jj};f.vA=function(a){this.dispatchEvent(a)};
function eq(a){w(a.Dd,function(a){C(a,"E",this.vA.bind(this));C(a,"G",function(){}.bind(this))}.bind(a))}f.Ys=function(){this.Tg.Ys()};f.dO=function(){return this.Tg};
function gq(a,b){null!=a.Tg&&(a.Tg.k(),a.Tg=null);a.Tg=new V.a.c.$b;null!=(b.og&&null!=b.og.Sq)&&(fq(a,b),A(a.Nf.kJ,function(a){this.Tg.ay(a)}.bind(a)));var c;A(b.Zi(),function(a){c=a.Yi();null!=c&&(currXObj=V.d.H.RE(c,a.Cl),renderProps=a.og,currXObj&&(this.Tg.ay(currXObj,renderProps),currXObj instanceof F?(this.constructor.GT(),this.Nf.Jk.push(currXObj)):currXObj instanceof co?(this.constructor.FT(),this.Nf.Mz.push(currXObj)):currXObj instanceof Nn&&(this.constructor.TY(currXObj,renderProps),this.Nf.yy.push(currXObj))))}.bind(a))}
f.pI=function(){this.fw(this.hd);this.hd.Ta();w(this.Nf,function(a,b){"volumes"!==b&&A(a,function(a){this.hd.add(a)}.bind(this))}.bind(this));Zc(this.hd.ec(),"B",function(){this.Cv();this.Ok.p()}.bind(this));this.hd.p()};f.oI=function(a){var b=null!=a?a:this.Gu();w(this.Dd,function(a,d){"v"!=d.toLowerCase()&&(a.Ta(),a.add(b),a.p())})};function hq(a){var b=a.Gu();w(a.Nf.volumes,function(a){a!==b&&(a.visible=!1)})}
f.qI=function(){var a=this.Gu(),b=[],c=[],d=["x","y","z","v"];w(this.Nf,function(a,d){currArr="volumes"==d?c:b;A(a,function(a){currArr.push(a)})}.bind(this));A(b,function(a){this.hd.add(a)}.bind(this));A(c,function(b){b!==a&&(b.visible=!0,this.hd.add(b))}.bind(this));this.jj.ec().uA=function(){Pb(d,this.jj.$c().toLowerCase());iq(this,a)}.bind(this);this.jj.add(a);this.jj.p()};
f.p=function(a){this.Pv=!1;gq(this,a);var b=a.og;null!=b?(null!=b.backgroundColor&&this.hd.Wv(a.og.backgroundColor),null!=b.Uj&&this.hd.Xv(a.og.Uj)):(this.hd.Wv(),this.hd.Xv());if(0<this.Nf.Jk.length){a=this.Dd;b="";for(b in a)if(a[b].isEnabled()){this.fw(a[b]);break}this.qI()}else this.hd.isEnabled()&&this.pI()};function iq(a,b){var c=pb(a.Dd)-1;w(a.Dd,function(a){a!=this.jj&&a.isEnabled()&&(a.add(b),Zc(a.ec(),"B",function(){c--;0==c&&this.Cv()}.bind(this)),a.p())}.bind(a))}
f.Gu=function(){if(0!=this.Nf.Jk.length){for(var a=0,b=this.Nf.Jk.length;a<b;a++){var c=this.Nf.Jk[a];if(c[V.d.ng.ro])return c}this.Nf.Jk[0][V.d.ng.ro]=!0;return this.Nf.Jk[0]}};f.o=function(){w(this.Dd,function(a){a.o()}.bind(this))};V.d.H.FT=function(){var a=currXObj,b=renderProps;a.color=b.color||[.5,.5,.5];a.opacity=b.opacity||1};
V.d.H.GT=function(){var a=currXObj,b=renderProps;null!=b||(b={origin:[0,0,0],Aj:1E4,qk:-1E4,$u:!0,bt:!1});a.origin=b.origin;a.Aj=b.Aj;a.qk=b.qk;a.bt=b.bt;a[V.d.ng.ro]=b.$u;a[V.d.H.SLICE_TO_RAS_KEY]=b.Rp;null!=b.eH?(a.uz.file=b.eH,a.uz.SX.file=b.CQ,a[this.constructor.HAS_LABEL_MAP_KEY]=!0):a[this.constructor.HAS_LABEL_MAP_KEY]=!1};f=V.d.H.prototype;f.qA=function(a){this.Pv||this.dispatchEvent({type:"A",value:a.value})};
f.Cv=function(a){hq(this);ad(this.hT);this.Pv=!0;this.dispatchEvent({type:"B",value:null!=a?a.value:1})};f.SO=function(){return this.Ok};f.TO=function(){return this.Bm};f.UO=function(){return this.Cm};f.RO=function(){return this.hd};f.Fu=function(a){return this.Dd[a]};f.VO=function(){return this.Dd};
f.k=function(){V.d.H.g.k.call(this);null!=this.Tg&&(this.Tg.k(),delete this.Tg);bd(this.Ok);bd(this.Bm);bd(this.Cm);bd(this.hd);delete this.jj;wb(this.Dd);delete this.Dd;this.Ok.k();delete this.Ok;this.Bm.k();delete this.Bm;this.Cm.k();delete this.Cm;this.hd.k();delete this.hd;delete this.Pv};V.d.H.tU=["nrrd","nii","nii.gz","mgh","mgz"];V.d.H.hN=["dicom","dcm","ima"];V.d.H.iM=["hdr","img"];V.d.H.dR=["nii","nii.gz"];V.d.H.dQ=["jpeg","jpg","gif","png","img"];V.d.H.UQ="stl vtk obj fsm inflated smoothwm pial orig".split(" ");
V.d.H.HN=["trk"];V.d.H.GF=function(a){var b=void 0;this.pz(a)?b=new co:this.qz(a)||this.lz(a)||this.nz(a)?b=new F:this.mz(a)&&(b=new Nn);return b};V.d.H.AE=function(a,b){var c=new mn;c.Ri=a.position;c.caption=a.name;c.name=a.name;c.vi=void 0===b?3:b;c.color=[.85,0,0];return c};V.d.H.qz=function(a){return-1<this.tU.indexOf(a)?!0:!1};V.d.H.nz=function(a){return-1<this.dQ.indexOf(a)?!0:!1};V.d.H.lz=function(a){return-1<this.hN.indexOf(a)?!0:!1};V.d.H.tQ=function(a){return-1<this.iM.indexOf(a)?!0:!1};
V.d.H.xQ=function(a){return-1<this.dR.indexOf(a)?!0:!1};V.d.H.pz=function(a){return-1<this.UQ.indexOf(a)?!0:!1};V.d.H.mz=function(a){return-1<this.HN.indexOf(a)?!0:!1};V.d.H.NC={fibers:[],volumes:[],dicoms:[],analyze:[],nifti:[],meshes:[],annotations:[],images:[]};
V.d.H.Zi=function(a){var b=zb(V.d.H.NC);ia(a)||(a=[a]);for(var c="",d="",e=0,g=a.length;e<g;e++)c=Tk(a[e]).toLowerCase(),d=Uk(c),0==c.lastIndexOf(".",0)||("mrml"===d?b.slicer.push(a[e]):this.qz(d)?b.volumes.push(a[e]):this.lz(d)?b.dicoms.push(a[e]):this.pz(d)?b.meshes.push(a[e]):this.mz(d)?b.fibers.push(a[e]):this.nz(d)&&b.images.push(a[e]));window.console.log("VIEWABLE TYPES",b);w(b,function(a,c){a.length||xb(b,c)});return b};
V.d.H.RE=function(a,b){function c(a){var b=ek.dirname(a);a=ek.Uq(a);return b+"/"+a}var d=ia(a)?ek.Du(a[0]):ek.Du(a),d=this.GF(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(ia(a)){var e=[];A(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=rb(b),d.iY=qb(b)):d.file=a;return d};h("xiv.vis.XtkEngine.EventType",{cW:"E",aW:"F",bW:"G",ERROR:"H",cX:"I",tV:"J",uV:"K"});h("xiv.vis.XtkEngine.ID_PREFIX",V.d.H.ID_PREFIX);h("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",V.d.H.YJ);
h("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",V.d.H.SLICE_TO_RAS_KEY);h("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",V.d.H.HAS_LABEL_MAP_KEY);h("xiv.vis.XtkEngine.generateXtkObjectFromExtension",V.d.H.GF);h("xiv.vis.XtkEngine.createAnnotation",V.d.H.AE);h("xiv.vis.XtkEngine.isVolume",V.d.H.qz);h("xiv.vis.XtkEngine.isImage",V.d.H.nz);h("xiv.vis.XtkEngine.isDicom",V.d.H.lz);h("xiv.vis.XtkEngine.isAnalyze",V.d.H.tQ);h("xiv.vis.XtkEngine.isNifti",V.d.H.xQ);h("xiv.vis.XtkEngine.isMesh",V.d.H.pz);
h("xiv.vis.XtkEngine.isFiber",V.d.H.mz);h("xiv.vis.XtkEngine.ViewablesObject",V.d.H.NC);h("xiv.vis.XtkEngine.getViewables",V.d.H.Zi);h("xiv.vis.XtkEngine.createXObject",V.d.H.RE);h("xiv.vis.XtkEngine.prototype.setPlaneEnabled",V.d.H.prototype.RI);h("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",V.d.H.prototype.fw);h("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",V.d.H.prototype.ZO);h("xiv.vis.XtkEngine.prototype.updateControllers",V.d.H.prototype.Ys);
h("xiv.vis.XtkEngine.prototype.getControllerTree",V.d.H.prototype.dO);h("xiv.vis.XtkEngine.prototype.render3dPlane",V.d.H.prototype.pI);h("xiv.vis.XtkEngine.prototype.render2D",V.d.H.prototype.oI);h("xiv.vis.XtkEngine.prototype.renderAllPlanes",V.d.H.prototype.qI);h("xiv.vis.XtkEngine.prototype.render",V.d.H.prototype.p);h("xiv.vis.XtkEngine.prototype.getSelectedVolume",V.d.H.prototype.Gu);h("xiv.vis.XtkEngine.prototype.updateStyle",V.d.H.prototype.o);h("xiv.vis.XtkEngine.prototype.getPlaneX",V.d.H.prototype.SO);
h("xiv.vis.XtkEngine.prototype.getPlaneY",V.d.H.prototype.TO);h("xiv.vis.XtkEngine.prototype.getPlaneZ",V.d.H.prototype.UO);h("xiv.vis.XtkEngine.prototype.getPlaneV",V.d.H.prototype.RO);h("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",V.d.H.prototype.Fu);h("xiv.vis.XtkEngine.prototype.getPlanes",V.d.H.prototype.VO);h("xiv.vis.XtkEngine.prototype.dispose",V.d.H.prototype.k);V.a.Sc=function(){U.xa.call(this)};k(V.a.Sc,U.xa);h("xiv.ui.HelpDialog",V.a.Sc);V.a.Sc.ID_PREFIX="xiv.ui.HelpDialog";V.a.Sc.CSS={mK:"nrg-ui-helpdialog-dialog",so:"nrg-ui-helpdialog-text",iL:"xiv-ui-helpdialog-scrollablezippytree",Ra:"xiv-ui-helpdialog-title",Nk:"xiv-ui-helpdialog-closebutton"};V.a.Sc.LAYOUT_IMAGE_ID=V.a.Sc.ID_PREFIX+".LayoutImage";
V.a.Sc.prototype.p=function(a){V.a.Sc.g.p.call(this,a);R(this.b(),"xiv-ui-helpdialog");this.pq=new U.mc;R(this.pq.b(),this.constructor.CSS.iL);this.pq.p(this.b());jq(this);this.wx(this.constructor.CSS.Ra);this.uD(this.constructor.CSS.Nk)};V.a.Sc.prototype.HI=function(a){null!=document.getElementById(V.a.Sc.LAYOUT_IMAGE_ID)&&(document.getElementById(V.a.Sc.LAYOUT_IMAGE_ID).src=a)};
function jq(a){var b=[["Change Layouts","<img height=15 width=15 id="+V.a.Sc.LAYOUT_IMAGE_ID+"></img>"],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>'],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],
["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+
'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>'],["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>'],["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']],c=[["Add ViewBox Row",
'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Remove ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removerow.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Remove ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removecolumn.png"></img>'],
["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.xh("Help");A([[["Slice-scroll","shift + mousemove","2D panels"],["Resize","left-click + drag","panel borders"]],b,c],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';A(a,function(a){c+="<tr>";A(a,
function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",l;currText=b+1;switch(currText){case 1:l="Image Manipulation";break;case 2:l="Toggles";break;case 3:l="Modal"}S(c);var m=wh("div");m.innerHTML=c;this.pq.Xg(m,[l])}.bind(a))}V.a.Sc.prototype.i=function(){V.a.Sc.g.i.call(this);null!=this.pq&&this.pq.k()};
h("xiv.ui.HelpDialog.EventType",{});h("xiv.ui.HelpDialog.ID_PREFIX",V.a.Sc.ID_PREFIX);h("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",V.a.Sc.LAYOUT_IMAGE_ID);h("xiv.ui.HelpDialog.CSS_SUFFIX",V.a.Sc.CSS_SUFFIX);h("xiv.ui.HelpDialog.prototype.render",V.a.Sc.prototype.p);h("xiv.ui.HelpDialog.prototype.setLayoutButton",V.a.Sc.prototype.HI);h("xiv.ui.HelpDialog.prototype.disposeInternal",V.a.Sc.prototype.i);function kq(a,b,c){Am.call(this,a,b||Bm.qf(),c);this.ce(16,!0)}k(kq,Am);pl("goog-toggle-button",function(){return new kq(null)});V.a.hb=function(a){U.S.call(this);this.v={};this.va=a};k(V.a.hb,U.S);h("xiv.ui.ViewBoxDialogs",V.a.hb);V.a.hb.ID_PREFIX="xiv.ui.ViewBoxDialogs";V.a.hb.CSS_SUFFIX={Ii:"generic-toggle",uK:"infodialog",vK:"infodialog-text",xK:"inusedialog"};var lq="Info_"+r(),mq="Help_"+r(),nq="InUse_"+r(),oq={hV:lq,cV:mq,kV:nq};V.a.hb.wt="ToggleClass_"+r();f=V.a.hb.prototype;f.hO=function(){return this.v};f.gO=function(a){return this.v[a]};
f.er=function(a,b,c,d,e,g,l,m){e=null!=e?e:"";var q=this.va.hn("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.v[a].Da(b);this.v[a].Ri();this.dispatchEvent({type:b?"L":"M",ZE:this.v[a],$E:a})}.bind(this),d);null!=this.v[a]&&this.v[a].k();c=new U.xa;this.v[a]=c;Pj(c,null!=l?l:!1);Wj(c,null!=m?m:null);c.p(this.va.Dc);Oj(c,0);c.uf();c.xh(e);R(c.b(),b);C(c,"c",function(){this.va.Kp(q)}.bind(this));C(c,Sj,function(){}.bind(this));!1===g&&ol(this.va.yf[a])};
f.SM=function(){this.er(oq.yV,"xiv-ui-viewboxdialogs-meshes-dialog",V.a.hb.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.UM=function(){this.er(oq.SW,"xiv-ui-viewboxdialogs-volumes-dialog",V.a.hb.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.EE=function(){this.v[nq]=new U.xa;Wj(this.v[nq],Yj);this.v[nq].p(this.va.Dc);this.v[nq].$l("ViewBox in use.&nbspProceed anyway?");pq(this);qq(this)};
f.GI=function(a,b){Zc(this.v[nq],Xj,function(c){"yes"===c.key&&null!=a&&a(this);"no"===c.key&&null!=b&&b(this)}.bind(this))};f.Gs=function(){R(this.v[nq].b(),V.a.hb.CSS.xK);Pj(this.v[nq],!0);this.v[nq].Da(!0);this.v[nq].Ri()};f.update=function(){w(this.v,function(a){a.JJ()})};f.Ss=function(a,b){var c=!1===b?0:1;window.console.log(a,this.v[a]);null!=this.v[a].b()&&T.Cg(this.v[a].b(),200,c)};f.My=function(){return this.v[mq]};
function pq(a){null!=a.v[mq]&&a.v[mq].k();a.v[mq]=new V.a.Sc;Pj(a.v[mq],!1);Wj(a.v[mq],null);a.v[mq].p(a.va.Dc);a.v[mq].Da(!1);a.v[mq].Ri();var b=a.va.hn("LEFT",V.a.hb.CSS.Ii,mq,"Help",function(a){a="true"==a.getAttribute("checked");this.v[mq].Da(a);this.v[mq].Ri();this.dispatchEvent({type:a?"L":"M",ZE:this.v[mq]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");C(a.v[mq],"c",function(){this.va.Kp(b)}.bind(a));a.va.Kp(b)}
function qq(a){null!=a.v[lq]&&a.v[lq].k();a.v[lq]=new U.xa;var b="";0<a.va.hk().length?w(a.va.hk()[0].Zf,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Tk(a.va.hk()[0].yk);Pj(a.v[lq],!1);a.v[lq].il(b);Wj(a.v[lq],null);a.v[lq].p(a.va.Dc);a.v[lq].Da(!0);a.v[lq].Yz("left","top");a.v[lq].wD("xiv-ui-viewboxdialogs-infodialog-content");a.v[lq].OI("xiv-ui-viewboxdialogs-infodialog-hovered");R(a.v[lq].b(),V.a.hb.CSS.uK);R(a.v[lq].rj[0],V.a.hb.CSS.vK);a.v[lq].wx("xiv-ui-viewboxdialogs-infodialog-title");
a.v[lq].sD("xiv-ui-viewboxdialogs-infodialog-closebutton");a.v[lq].tD("xiv-ui-viewboxdialogs-infodialog-closebutton-image");var c=a.va.hn("LEFT",V.a.hb.CSS.Ii,lq,"Info. Display",function(a){a="true"==a.getAttribute("checked");this.v[lq].Da(a);this.v[lq].Yz("left","top");this.dispatchEvent({type:a?"L":"M",ZE:this.v[lq]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");C(a.v[lq],"c",function(){this.va.Kp(c)}.bind(a))}
f.i=function(){delete this.va;null!=this.v&&(w(this.v,function(a){bd(a);a.i();a.k()}.bind(this)),wb(this.v))};h("xiv.ui.ViewBoxDialogs.EventType",{XU:"L",WU:"M"});h("xiv.ui.ViewBoxDialogs.ID_PREFIX",V.a.hb.ID_PREFIX);h("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",V.a.hb.CSS_SUFFIX);h("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",oq);h("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",V.a.hb.wt);h("xiv.ui.ViewBoxDialogs.prototype.getDialogs",V.a.hb.prototype.hO);h("xiv.ui.ViewBoxDialogs.prototype.getDialog",V.a.hb.prototype.gO);
h("xiv.ui.ViewBoxDialogs.prototype.createToggleableDialog",V.a.hb.prototype.er);h("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",V.a.hb.prototype.SM);h("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",V.a.hb.prototype.UM);h("xiv.ui.ViewBoxDialogs.prototype.createDialogs",V.a.hb.prototype.EE);h("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",V.a.hb.prototype.GI);h("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",V.a.hb.prototype.Gs);h("xiv.ui.ViewBoxDialogs.prototype.update",V.a.hb.prototype.update);
h("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",V.a.hb.prototype.Ss);h("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",V.a.hb.prototype.My);h("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",V.a.hb.prototype.i);V.a.Ab=function(a,b,c,d){gd.call(this);this.va=a;this.Wa=b;this.Ib=c;this.v=d;this.Qe={Se:null,ql:null};this.qi={left:!1,AH:!1,right:!1};this.Jn={ow:{},rN:{},CS:{},DS:{}};C(this.v,"L",this.OH.bind(this));a=document.body;this.fc=new Bl;this.fc.So(a);C(this.fc,"key",this.uk.bind(this));this.Dh=wh("div",{id:"mousefollower"});R(this.Dh,this.constructor.CURSOR_CSS.GL);this.Dh.innerHTML="Zoom In (drag up)<br>Zoom Out (drag down)<br>";Ah(this.va.Dc,this.Dh)};k(V.a.Ab,gd);
h("xiv.ui.ViewBoxInteractorHandler",V.a.Ab);var rq="Crosshairs_"+r(),sq="Settings_"+r(),tq="TwoDPan_"+r(),uq="TwoDZoom_"+r(),vq={zd:rq,CC:sq,to:tq,uo:uq};V.a.Ab.CSS={Ii:"xiv-ui-viewboxinteractorhandler-generic-toggle",dC:"xiv-ui-viewboxinteractorhandler-generic-dialog",eC:"xiv-ui-viewboxinteractorhandler-generic-zippytree"};
V.a.Ab.CURSOR_CSS={GL:"xiv-ui-viewboxinteractorhandler-zoom-follower",fC:"xiv-ui-viewboxinteractorhandler-viewframe-grab",iC:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",gC:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",hC:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",RC:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",SC:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};V.a.Ab.Ze="Orientation_"+r();V.a.Ab.kq="_";f=V.a.Ab.prototype;f.fc=null;f.aq=null;f.Ec=null;
f.IB=!1;f.CA=!1;f.se={};f.GE=function(){this.QE();wq(this);xq(this);this.ME();this.DE(!1);this.OE();this.PE();yq(this)};function zq(a){var b=a.va.Dc;w(a.constructor.CURSOR_CSS,function(a){Wg(b,a)})}function Aq(a,b,c,d){b=b?R:Wg;b(a.va.Dc,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.va.Dc,d)}function Bq(a){Aq(a,!0,a.constructor.CURSOR_CSS.fC,a.constructor.CURSOR_CSS.iC);Aq(a,!1,a.constructor.CURSOR_CSS.gC,a.constructor.CURSOR_CSS.hC)}
function Cq(a){Aq(a,!1,a.constructor.CURSOR_CSS.SC);Aq(a,!0,a.constructor.CURSOR_CSS.RC)}
f.JR=function(a){this.Yo=a.target;this.Qe.Se=this.Qe.ql;this.Qe.ql=a.Uz;if(null!=this.Qe.Se){if(a.eJ){if(!this.ZA){this.ZA=!0;this.OG();Dq(this);return}}else this.ZA&&(this.hJ(),Dq(this),this.Zn(),this.ZA=!1);(new Lo(this.Qe.ql[0],this.Qe.ql[1])).add(new Lo(this.Qe.Se[0],this.Qe.Se[1]));a=this.Qe.ql[0]-this.Qe.Se[0];var b=this.Qe.ql[1]-this.Qe.Se[1];this.Dh.style.visibility="hidden";this.IB?(S(this.Dh),Ah(this.Yo.Yj,this.Dh),this.Dh.style.visibility="visible",this.Dh.style.left=this.Qe.ql[0]+20+"px",
this.Dh.style.top=this.Qe.ql[1]+"px",Cq(this),this.qi.left&&Eq(this,a,b)):this.CA&&(Bq(this),this.qi.left&&(Aq(this,!1,this.constructor.CURSOR_CSS.fC,this.constructor.CURSOR_CSS.iC),Aq(this,!0,this.constructor.CURSOR_CSS.gC,this.constructor.CURSOR_CSS.hC),this.Yo.Na.Hv([-1*a,-1*b]),this.Zn()))}};f.IR=function(){zq(this);this.Yo=null;this.Dh.style.visibility="hidden"};f.oA=function(a){0==a.button?this.qi.left=!0:1==a.button?this.eU.qi.AH=!0:2==a.button&&(this.qi.right=!0)};
f.pA=function(a){0==a.button?this.qi.left=!1:1==a.button?this.eU.qi.AH=!1:2==a.button&&(this.qi.right=!1)};
f.uk=function(a){window.console.log("On key:",a.keyCode,this.se);if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Fq(this,this.Yo,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.va.Vy(this.constructor.Ce.to);"true"==a.getAttribute("checked")&&this.va.Ke(this.constructor.Ce.to);var b=this.va.Vy(this.constructor.Ce.uo);"true"==b.getAttribute("checked")&&this.va.Ke(this.constructor.Ce.uo);window.console.log(a.getAttribute("checked"),b.getAttribute("checked"),"true"==a.checked,"true"==b.checked);
break;case 90:this.va.Ke(this.constructor.Ce.uo);break;case 72:case 80:this.va.Ke(this.constructor.Ce.to);break;case 66:case 76:this.va.Ke(this.se.levels);break;case 86:this.va.Ke(this.se.volumes);break;case 77:this.va.Ke(this.se.meshes);break;case 65:this.va.Ke(this.se.annotations);break;case 67:this.va.Ke(this.constructor.Ce.zd);break;case 83:this.va.Ke(this.se[this.constructor.Ce.CC]);break;case 191:a.shiftKey&&this.va.Ke(mq);break;case 73:this.va.Ke(lq)}};
function Eq(a,b,c){zq(a);var d=function(){Cq(this);this.Yo.cq()}.bind(a),e=function(){Aq(this,!0,this.constructor.CURSOR_CSS.SC);Aq(this,!1,this.constructor.CURSOR_CSS.RC);this.Yo.dq()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Gq(a);a.Zn()}f.uC=0;f.vC=0;f.qJ=function(a){this.uC=a.clientX;this.vC=a.clientY;window.console.log("store mouse coords",this.uC,this.vC)};
function yq(a){Hq(a,function(a,c){this.Jn.DS[c]=C(a.ec(),"mouseover",this.JR.bind(this));var d=a.ec().Fd;this.Jn.CS[c]=C(d,"mouseout",this.IR.bind(this));this.Jn.rN[c]=C(d,"mousedown",this.oA.bind(this));this.Jn.ow[c]=C(d,"mouseup",this.pA.bind(this))}.bind(a))}function Fq(a,b,c){Hq(a,function(a,b,g){g.Xa.aa(g.Xa.ea()+c)}.bind(a),b.$c())}
function Hq(a,b,c){if(null!=a.Wa){var d=a.Ib.Py(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.zr())};if(ka(c)){var g=a.Wa.Fu(c);if(null==g)throw Error("Invalid plane: ",g);e(a.Wa.Fu(c),c)}else w(a.Wa.Dd,function(a,b){e(a,b)}.bind(a))}}
f.PE=function(){this.va.hn("LEFT",this.constructor.CSS.Ii,this.constructor.Ce.uo,"2D Zoom",function(a){zq(this);if(this.IB=a="true"==a.getAttribute("checked").toString())this.va.zB(this.constructor.Ce.to),Cq(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.va.Ke(this.constructor.Ce.uo)};
f.OE=function(){this.va.hn("LEFT",this.constructor.CSS.Ii,this.constructor.Ce.to,"2D Pan",function(a){zq(this);if(this.CA=a="true"==a.getAttribute("checked").toString())Bq(this),this.va.zB(this.constructor.Ce.uo)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.va.Ke(this.constructor.Ce.to)};
f.DE=function(a){this.va.hn("LEFT",this.constructor.CSS.Ii,this.constructor.Ce.zd,"Toggle Crosshairs",function(a){this.CJ("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.va.Ke(this.constructor.Ce.zd)};
f.ME=function(){var a=this.constructor.Ce.CC;this.se[a]=a+this.constructor.kq+r();this.v.er(this.se[a],this.constructor.CSS.dC,this.constructor.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.Ec[a]=new U.mc;this.Ec[a].p();var b=this.Ec[a].b();R(b,this.constructor.CSS.eC);this.v.v[this.se[a]].b().appendChild(b);this.Ec[a].sn();b=new V.a.c.Ad;b.p();b.yi("Enable 3D Rendering");b.O.wh(!0);this.Ec[a].Xg(b.b(),"3D Rendering");C(b,"o",function(a){this.Wa.RI("V",
a.checked)}.bind(this));return b};f.Zn=function(){Hq(this,function(a,b,c,d){Iq(this,b,d)}.bind(this))};
function Jq(a){null!=a.Wa&&(Hq(a,function(a,c,d,e){var g=d.Xa,l=d.zf,m=d.Mh;d=d.zd;g[this.constructor.Ze]=c;l[this.constructor.Ze]=c;m[this.constructor.Ze]=c;d[this.constructor.Ze]=c;Dq(this,!0);Kq(this,g,e);Iq(this,g[this.constructor.Ze],e);Lq(this,g);null!=a.ec()&&(C(a.ec(),"I",function(){Gq(this)}.bind(this)),C(g,"q",function(a){Kq(this,a.target,e);Iq(this,a.target[this.constructor.Ze],e);Lq(this,a.target)}.bind(this)),C(l,"input",function(a){Mq(this,a.target,e);this.Zn()}.bind(this)),C(m,"input",
function(){a.ec().cJ(m.ea()/100);this.Zn()}.bind(this)))}.bind(a)),a.Wa.Ys())}
function Nq(a,b){var c=b.split(a.constructor.kq)[0];a.Ec[c].Pe();w(a.aq[c],function(a){null!=a&&A(a,function(a){switch(c){case "levels":a instanceof V.a.c.Fc?a.update():a.O.o();break;case "volumes":var d=b.split(this.constructor.kq)[0];a instanceof V.a.c.af?(a.O.checked=a.Xe[V.d.ng.ro]||!1,null==this.rw&&(this.rw=[]),-1==this.rw.indexOf(a)&&this.rw.push(a)):"Show Label Map"==a.Nc.innerHTML&&(a.Xe[V.d.H.HAS_LABEL_MAP_KEY]?a.Xe.uz.visible&&!a.O.Tl()&&a.O.wh(!0):(S(a.b()),a.b().style.visibility="hidden",
a.b().style.height="0px"),this.Ec[d].Pe());a.update()}}.bind(this))}.bind(a))}f.OH=function(a,b){null==a.$E&&null==b||Nq(this,null!=b?b:a.$E)};f.$D=function(){window.console.log("Applying auto window/level");var a,b={};A(this.aq.levels.all,function(c){levelMax=hist=null;a=c.ip;folderStr="";A(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});c instanceof V.a.c.Fc?b[folderStr].$P=c:-1<c.Nc.innerHTML.indexOf("Level Max")&&(b[folderStr].EQ=c)}.bind(this));w(b,function(a){a.EQ.O.aa(a.$P.cG(V.a.c.Fc.LEVEL_CUTOFF))})};
function Kq(a,b,c){if(null!=c){var d=b[a.constructor.Ze],d="Y"==d||"Z"==d?b.La()-b.ea()-1:b.ea()-1;c["index"+b[a.constructor.Ze]]=d}}function Oq(a,b,c,d,e){var g=a.Wa.Fu(b).ec();a=a.Ib.NF().Oy(b);b=null;null!=a&&(b=a[ko]);null!=b&&("vertical"==c?b.aJ(g.sG(d,e)):"horizontal"==c&&b.bJ(g.YF(d,e)))}
function Iq(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Oq(a,"Y","vertical",b,!0);Oq(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Oq(a,"X","vertical",b,!1);Oq(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Oq(a,"X","horizontal",b,!1),Oq(a,"Y","horizontal",b,!1)}}function Lq(a,b){Hq(a,function(a,b,e){a=e.zf;e=e.Xa;a.Te(e.La());a.aa(e.ea())}.bind(a),b[a.constructor.Ze])}function Gq(a){Hq(a,function(a,c,d){d.Mh&&a.ec()&&(a=a.ec().xG(),d.Mh.ea(),d.Mh.aa(Math.round(100*a)))}.bind(a))}
function Mq(a,b,c){null!=c&&Hq(a,function(a,c,g){g.Xa.aa(b.ea())}.bind(a),b[a.constructor.Ze])}function wq(a){Hq(a,function(a,c,d){null!=d.Xa&&d.Xa.aa(d.Xa.La()/2)}.bind(a))}
function xq(a){Hq(a,function(a,c,d,e){if(null!=e[V.d.H.SLICE_TO_RAS_KEY]&&null!=d.Xa){slider=d.Xa;orientation=slider[this.constructor.Ze];a=e.JX;e=e[V.d.H.SLICE_TO_RAS_KEY];var g;"X"==orientation?(g=a[1]-a[0],g=(e.qT[0]-a[0])/g):"Y"==orientation?(g=a[3]-a[2],g=(e.OM[1]-a[2])/g):"Z"==orientation&&(g=a[5]-a[4],g=(e.wM[2]-a[4])/g);slider.aa(Math.round(slider.La()*g)+1)}}.bind(a))}
function Dq(a,b){var c,d;Hq(a,function(a,g,l,m){null!=l.Xa&&(d=l.Xa,c=d[this.constructor.Ze],null!=m&&(!0===b&&(d.Te(a.ec().hG()),d.$f(1)),d.aa(m["index"+c]+1)))})}f.SH=function(){Hq(this,function(a,b,c,d){Mq(this,c.zf,d);Gq(this)}.bind(this));this.Zn()};f.tB=function(a){var b=!1===a?0:1;Hq(this,function(a,d,e){T.Cg(e.Xa.b(),200,b);T.Cg(e.zf.b(),200,b);T.Cg(e.zd.Di,200,b);T.Cg(e.zd.mi,200,b);T.Cg(e.Mh.b(),200,b)}.bind(this))};f.OG=function(){this.tB(!1);this.v.Ss(lq,!1)};
f.hJ=function(){this.tB(!0);this.v.Ss(lq,!0)};f.update=function(){this.Ib.Zs()};f.CJ=function(a){var b=!0==a?"visible":"hidden";Hq(this,function(a,d,e){null!=e.zd&&(e.zd.Di.style.visibility=b,e.zd.mi.style.visibility=b)}.bind(this))};f.IJ=function(){null!=this.Ib&&null!=this.Wa&&Hq(this,function(a,b,c,d){if(null!=c){var e=c.Xa;c=c.zf;e[this.constructor.Ze]=b;c[this.constructor.Ze]=b;null!=a.ec()&&(Mq(this,c,d),e.o())}}.bind(this))};
f.wJ=function(a){a.KI(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");w({Sagittal:{Ej:V.a.e.Hm,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{Ej:V.a.e.rm,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{Ej:V.a.e.Jm,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{Ej:V.a.e.Im,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{Ej:V.a.e.vb,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{Ej:V.a.e.vc,
Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},"2D Row":{Ej:V.a.e.xc,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{Ej:V.a.e.Uc,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.AD(c,b.Yb);this.Ib.yD(c,b.Ej);"Four-Up"==c&&this.Ib.JI(c)}.bind(this));C(a,"item_selected",this.AR.bind(this))};f.AR=function(a){this.Ib.Xn(a.title);null!=this.v&&null!=this.v.My()&&this.v.My().HI(a.target.En.src)};
function Pq(a,b){C(a.Ec[b].A,"f",function(a){this.OH(a,this.se[b])}.bind(a))}function Qq(a,b){C(b,"o",function(a){A(this.rw,function(b){var e=b.Xe;b!==a.target?(b.O.checked=!1,e.visible=!1):(e.visible=!0,this.Wa.oI(e))}.bind(this))}.bind(a))}function Rq(a,b){w(a.aq[b],function(a,d){ia(a)&&A(a,function(a){var c=a.ip||[];"all"!==d&&0<c.length&&c.push(d);this.Ec[b].Xg(a.b(),c);a instanceof V.a.c.af&&Qq(this,a)}.bind(this))}.bind(a))}
function Sq(a){a.Ec={volumes:null,annotations:null,meshes:null,levels:null};a.se=zb(a.Ec);w(a.Ec,function(a,c){this.Ec[c]=new U.mc;this.Ec[c].p();this.se[c]=c+this.constructor.kq+r();Rq(this,c);Pq(this,c)}.bind(a))}f.QE=function(){this.aq=this.Wa.Tg;Sq(this);Tq(this);Jq(this)};
function Tq(a){w(a.Ec,function(a,c){var d=!1;w(this.aq[c],function(a){null!=a&&ia(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.v.er(this.se[c],this.constructor.CSS.dC,this.constructor.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+eb(c)+".png",eb(c),!1,!1);var e=this.Ec[c].b();R(e,this.constructor.CSS.eC);this.v.v[this.se[c]].b().appendChild(e);1<this.Ec[c].A.qG().length?this.Ec[c].$q():this.Ec[c].sn()}}.bind(a))}
f.k=function(){V.a.Ab.g.k.call(this);null!=this.fc&&(window.console.log("disposing key handler"),this.fc.k(),delete this.fc);null!=this.se&&wb(this.se);delete this.se;null!=this.Ec&&(w(this.Ec,function(a){a.k()}),wb(this.Ec));delete this.Ec;wb(this.Qe);delete this.Qe;w(this.Jn,function(a){w(a,function(a){ad(a);delete a});wb(a)});wb(this.Jn);delete this.Jn;S(this.Dh);delete this.Dh;delete this.aq;delete this.IB;delete this.CA;delete this.va;delete this.Wa;delete this.Ib;delete this.v};
h("xiv.ui.ViewBoxInteractorHandler.EventType",{OV:"N",vV:"O",AW:"P",YU:"Q"});h("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",vq);h("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",V.a.Ab.Ze);h("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT",V.a.Ab.kq);h("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",V.a.Ab.prototype.GE);h("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",V.a.Ab.prototype.PE);h("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",V.a.Ab.prototype.OE);
h("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",V.a.Ab.prototype.DE);h("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",V.a.Ab.prototype.ME);h("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",V.a.Ab.prototype.Zn);h("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",V.a.Ab.prototype.$D);h("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",V.a.Ab.prototype.SH);h("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",V.a.Ab.prototype.tB);
h("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",V.a.Ab.prototype.OG);h("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",V.a.Ab.prototype.hJ);h("xiv.ui.ViewBoxInteractorHandler.prototype.update",V.a.Ab.prototype.update);h("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",V.a.Ab.prototype.CJ);h("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",V.a.Ab.prototype.IJ);
h("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",V.a.Ab.prototype.wJ);h("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",V.a.Ab.prototype.QE);h("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",V.a.Ab.prototype.k);mc&&vc(8);P.d.Vc=function(){P.d.ef.call(this);this.De=[]};k(P.d.Vc,P.d.ef);h("gxnat.vis.ViewableTree",P.d.Vc);P.d.Vc.Nz=function(a,b,c){this.PS=a;this.XT=b;this.AN=c};h("gxnat.vis.ViewableTree.metadataCollection",P.d.Vc.Nz);f=P.d.Vc.prototype;f.Lv=null;f.Tp=null;f.fp=null;f.orientation=null;f.$c=function(){return this.orientation};f.ys=function(a){this.Lv=a};f.As=function(a){this.Tp=a};f.us=function(a){this.fp=a};f.DP=function(){return this.De};
f.k=function(){P.d.Vc.g.k.call(this);null!=this.Lv&&(wb(this.Lv),delete this.NY);null!=this.Tp&&(wb(this.Tp),delete this.ZY);null!=this.fp&&(wb(this.fp),delete this.hY);null!=this.De&&(A(this.De,function(a){a.k()}),delete this.De);null!=this.zJ&&Nb(this.zJ);delete this.zJ;delete this.orientation};h("gxnat.vis.ViewableTree.metadataCollection",P.d.Vc.Nz);h("gxnat.vis.ViewableTree.prototype.projectMetadata",P.d.Vc.prototype.Lv);h("gxnat.vis.ViewableTree.prototype.subjectMetadata",P.d.Vc.prototype.Tp);
h("gxnat.vis.ViewableTree.prototype.experimentMetadata",P.d.Vc.prototype.fp);h("gxnat.vis.ViewableTree.prototype.orientation",P.d.Vc.prototype.orientation);h("gxnat.vis.ViewableTree.prototype.getOrientation",P.d.Vc.prototype.$c);h("gxnat.vis.ViewableTree.prototype.setProjectMetadata",P.d.Vc.prototype.ys);h("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",P.d.Vc.prototype.As);h("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",P.d.Vc.prototype.us);
h("gxnat.vis.ViewableTree.prototype.getViewableGroups",P.d.Vc.prototype.DP);h("gxnat.vis.ViewableTree.prototype.dispose",P.d.Vc.prototype.k);V.a.Ed=function(){U.S.call(this);this.Sn=wh("div",{id:V.a.Ed.ID_PREFIX+"_ProgBarHolder_"+r(),"class":V.a.Ed.CSS.WK});Ah(this.b(),this.Sn);this.dj=wh("div",{id:V.a.Ed.ID_PREFIX+"_LabelHolder_"+r(),"class":V.a.Ed.CSS.AK});Ah(this.b(),this.dj);this.Pk=new cp;this.Pk.cc(this.Sn);R(qh("progress-bar-thumb",this.Sn),V.a.Ed.CSS.Qw)};k(V.a.Ed,U.S);h("xiv.ui.ProgressBarPanel",V.a.Ed);V.a.Ed.ID_PREFIX="xiv.ui.ProgressBarPanel";V.a.Ed.CSS_SUFFIX={Qw:"thumb",WK:"progbarholder",AK:"labelholder"};f=V.a.Ed.prototype;
f.Qr="";f.bB=!1;f.yi=function(a){this.Qr=a;this.dj.innerHTML=this.Qr};f.aB=function(a){this.bB=null!=a&&!1===a?!1:!0;this.aa(this.Pk.ea())};f.aa=function(a){this.Pk.aa(a);this.dj.innerHTML=this.Qr;this.bB&&(0<this.Qr.length&&(this.dj.innerHTML+=" "),this.dj.innerHTML+=this.Pk.ea().toString()+"%");Wg(this.Sn,"progress-bar-horizontal")};f.ea=function(){return this.Pk.ea()};
f.i=function(){V.a.Ed.g.i.call(this);null!=this.Pk&&(this.Pk.k(),delete this.Pk);null!=this.Sn&&(S(this.Sn),delete this.Sn);null!=this.dj&&(S(this.dj),delete this.dj);this.Qr=this.bB=null};h("xiv.ui.ProgressBarPanel.EventType",{});h("xiv.ui.ProgressBarPanel.ID_PREFIX",V.a.Ed.ID_PREFIX);h("xiv.ui.ProgressBarPanel.CSS_SUFFIX",V.a.Ed.CSS_SUFFIX);h("xiv.ui.ProgressBarPanel.prototype.setLabel",V.a.Ed.prototype.yi);h("xiv.ui.ProgressBarPanel.prototype.showValue",V.a.Ed.prototype.aB);
h("xiv.ui.ProgressBarPanel.prototype.setValue",V.a.Ed.prototype.aa);h("xiv.ui.ProgressBarPanel.prototype.getValue",V.a.Ed.prototype.ea);h("xiv.ui.ProgressBarPanel.prototype.disposeInternal",V.a.Ed.prototype.i);U.G=function(){U.mc.call(this)};k(U.G,U.mc);h("nrg.ui.ThumbnailGallery",U.G);U.G.ID_PREFIX="nrg.ui.ThumbnailGallery";U.G.CSS_SUFFIX={mK:"dialog",Rw:"thumbnail",Tw:"thumbnail-image",sW:"thumbnail-text"};U.G.qq=r();U.G.prototype.jw=!1;U.G.prototype.eB=function(a){this.jw=a;null!=this.A&&this.jw&&this.A.RA(U.G.qB)};U.G.prototype.p=function(a){U.G.g.p.call(this,a);Uq(this);this.jw&&this.A.RA(U.G.qB)};
U.G.qB=function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Dh(a),d=b[U.G.qq].toLowerCase(),e,g,l=c.length,m=0;m<l;m++)if(g=c[m],null!=g[U.G.qq]&&(e=g[U.G.qq].toLowerCase(),e=Na(d,e),0>e)){Ch(b,g);return}a.appendChild(b)};f=U.G.prototype;f.dr=function(a,b){var c=new U.s;Yg(c.b(),Ug(c.b()),this.mm);Yg(c.Ng,Ug(c.Ng),this.bo);Yg(c.xe,Ug(c.xe),this.ao);c.UA(a);c.Bs(b);return c};f.loop=function(a){w(this.Tc,function(b){a(b)})};f.TA=function(a){this.loop(function(b){Ah(a,b.fh())})};
f.Ro=function(a,b){sb(this.Tc,a)||(this.Tc=this.Tc?this.Tc:{},this.Tc[a.b().getAttribute("id")]=a,this.D.Vq(a.fh()),C(this.D,"r",this.vR.bind(this)),a.b()[U.G.qq]=a.Ty().toLowerCase(),this.Xg(a.b(),b),this.Pe(),C(a,"w",function(a){this.dispatchEvent({type:"w",s:a.target})}.bind(this)),C(a,"x",function(a){this.dispatchEvent({type:"x",s:a.target})}.bind(this)))};f.pl=function(a,b,c){a=this.dr(a,b);this.Ro(a,c);Vq(this,"image");Vq(this,"text");Vq(this,"thumbnail");this.Pe();return a};
f.Es=function(){U.G.g.Es.call(this);C(this.wi,"mouseover",this.qJ.bind(this))};f.qJ=function(a){this.Wz=a.clientX;this.Xz=a.clientY};function Wq(a){w(a.Tc,function(a){a.gs()});a.Ks=null}f.vR=function(){var a=document.elementFromPoint(this.Wz,this.Xz);(a=Th(a,null,U.s.gd))?(a=a.id.replace(U.s.kt,""),this.Ks!==a&&(Wq(this),this.Ks=a,this.Tc[this.Ks].Bv()),this.Tc[this.Ks].OA()):Wq(this)};
function Vq(a,b){var c,d=[],e="";for(e in a.Tc){switch(b){case "thumbnail":d=a.mm;c=a.Tc[e].b();break;case "image":d=a.ao;c=a.Tc[e].xe;break;case "text":d=a.bo,c=a.Tc[e].Ng}Yg(c,Ug(c),d)}}f.DD=function(a){null!=this.mm||Uq(this);this.mm.push(a);Vq(this,"thumbnail")};f.GD=function(a){this.ao.push(a);Vq(this,"image")};f.HD=function(a){this.bo.push(a);Vq(this,"text")};f.o=function(a){a&&Rk.zb(this.b(),a)};
function Uq(a){var b=new U.s;a.mm=Ug(b.b());a.mm.push(U.G.CSS.Rw);a.ao=Ug(b.xe);a.ao.push(U.G.CSS.Tw);a.bo=Ug(b.Ng);a.bo.push(U.G.CSS.HC);S(b.b());delete b}f.i=function(){U.G.g.i.call(this);delete this.jw;null!=this.Wz&&delete this.Wz;null!=this.Xz&&delete this.Xz;null!=this.Tc&&(U.tu(this.Tc),delete this.Tc);null!=this.A&&(bd(this.A),this.A.k(),delete this.A);null!=this.mm&&(Nb(this.mm),delete this.mm);null!=this.ao&&(Nb(this.ao),delete this.ao);null!=this.bo&&(Nb(this.bo),delete this.bo);delete this.Ks};
h("nrg.ui.ThumbnailGallery.ID_PREFIX",U.G.ID_PREFIX);h("nrg.ui.ThumbnailGallery.CSS_SUFFIX",U.G.CSS_SUFFIX);h("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",U.G.qq);h("nrg.ui.ThumbnailGallery.thumbnailSorter",U.G.qB);h("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",U.G.prototype.eB);h("nrg.ui.ThumbnailGallery.prototype.render",U.G.prototype.p);h("nrg.ui.ThumbnailGallery.prototype.createThumbnail",U.G.prototype.dr);h("nrg.ui.ThumbnailGallery.prototype.loop",U.G.prototype.loop);
h("nrg.ui.ThumbnailGallery.prototype.setHoverParent",U.G.prototype.TA);h("nrg.ui.ThumbnailGallery.prototype.addThumbnail",U.G.prototype.Ro);h("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",U.G.prototype.pl);h("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",U.G.prototype.Es);h("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",U.G.prototype.DD);h("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",U.G.prototype.GD);
h("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",U.G.prototype.HD);h("nrg.ui.ThumbnailGallery.prototype.updateStyle",U.G.prototype.o);h("nrg.ui.ThumbnailGallery.prototype.disposeInternal",U.G.prototype.i);V.a.Hc=function(){U.S.call(this)};k(V.a.Hc,U.S);h("xiv.ui.ViewableGroupMenu",V.a.Hc);V.a.Hc.ID_PREFIX="xiv.ui.ViewableGroupMenu";V.a.Hc.CSS_SUFFIX={jt:"header",Rw:"thumbnail",HC:"thumbnail-text",Tw:"thumbnail-image",oL:"thumbnailgallery",gt:"background"};f=V.a.Hc.prototype;f.sa=null;f.Yg=null;f.np=null;
f.p=function(){V.a.Hc.g.p.call(this);this.Yg=wh("div",{id:this.constructor.ID_PREFIX+"_Background_"+r()});R(this.Yg,this.constructor.CSS.gt);Ah(this.b(),this.Yg);this.np=wh("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+r(),"class":V.a.Hc.CSS.jt});this.np.innerHTML="<b> Select View <b>";Ah(this.b(),this.np);null!=this.sa||this.reset()};f.WN=function(){return this.Yg};f.show=function(){T.nr(this.b(),V.FU)};f.pl=function(a,b){null!=this.sa||this.reset();var c=this.sa.pl(a,b);Xq(this,c);return c};
f.rp=function(){T.un(this.b(),500);S(this.b())};f.reset=function(){null!=this.sa&&(this.sa.k(),delete this.sa);this.sa=new U.G;this.sa.eB(!0);this.sa.p(this.b());R(this.sa.b(),V.a.Hc.CSS.oL);this.sa.DD(V.a.Hc.CSS.Rw);this.sa.GD(V.a.Hc.CSS.Tw);this.sa.HD(V.a.Hc.CSS.HC)};function Xq(a,b){C(b,"y",function(){this.dispatchEvent({type:"R",xJ:b})}.bind(a))}
f.i=function(){V.a.Hc.g.i.call(this);null!=this.Yg&&(S(this.Yg),delete this.Yg);null!=this.np&&(S(this.np),delete this.np);null!=this.sa&&(this.sa.k(),delete this.sa)};h("xiv.ui.ViewableGroupMenu.ID_PREFIX",V.a.Hc.ID_PREFIX);h("xiv.ui.ViewableGroupMenu.EventType",{PW:"R"});h("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",V.a.Hc.CSS_SUFFIX);h("xiv.ui.ViewableGroupMenu.prototype.render",V.a.Hc.prototype.p);h("xiv.ui.ViewableGroupMenu.prototype.getBackground",V.a.Hc.prototype.WN);
h("xiv.ui.ViewableGroupMenu.prototype.show",V.a.Hc.prototype.show);h("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",V.a.Hc.prototype.pl);h("xiv.ui.ViewableGroupMenu.prototype.hide",V.a.Hc.prototype.rp);h("xiv.ui.ViewableGroupMenu.prototype.reset",V.a.Hc.prototype.reset);h("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",V.a.Hc.prototype.i);var Yq;function Zq(a,b,c,d,e){this.en=a;this.Mn=b;this.WD=c;this.nM=d;this.is=e}Zq.prototype.getName=function(){return this.Mn};function $q(a){return!a.Mn||"[object Object]"==a.en}
function ar(a){var b=[a.en?br(a.en)+".":"",a.Mn?br(cr(a.Mn)):"anonymous",br(a.nM),a.WD?" [as "+br(cr(a.WD))+"]":""];if(a.is)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.is.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',br(a.is),"', '",c,"'); return false\">",br(a.is),"</a>")}else b.push(br(a.is));return b.join("")}
var dr=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,er=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,fr=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
gr=/^function ([a-zA-Z_$][\w$]*)/,hr=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function ir(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(gr),d=d?d[1]:"",e=["("];if(b.arguments)for(var g=0;g<b.arguments.length;g++){var l=b.arguments[g];0<g&&e.push(", ");ka(l)?e.push('"',l,'"'):l&&l.$replay?e.push("goog.testing.Mock"):e.push(String(l))}else e.push("unknown");e.push(")");a.push(new Zq("",d,"",e.join(""),""));try{b=b.caller}catch(m){break}c++}return a}
function jr(a){var b=a.match(dr);if(b)return new Zq(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var g="";0<=c&&c+1<d&&(g=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new Zq("",e,"",d,g)}return(b=a.match(er))?new Zq("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(fr))?new Zq(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(hr))?new Zq("",b[1]||"","","",b[2]||
""):null}function cr(a){return Yq?Yq(a):a}function br(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function kr(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}h("setDeobfuscateFunctionName",function(a){Yq=a});function lr(a,b){return a==b}function mr(a,b){return a.toString()===b.toString()}var nr={String:lr,Number:lr,Boolean:lr,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:mr,Function:mr};function or(a,b,c){return Math.abs(a-b)<=c}var pr={Number:or};
function qr(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function rr(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+qr(a)+")");return b}function sr(a,b){return b.length==a+1?b[0]:null}function tr(a,b,c){return c.length==b+1?c[a]:c[a-1]}function ur(a,b){b.length==a||b.length==a+1&&ka(b[0])||vr(null,"Incorrect arguments passed to assert function")}
function wr(a,b){var c="Expected "+rr(a)+" but was "+rr(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var g=0;g<d&&a.charAt(a.length-g-1)==b.charAt(b.length-g-1);)g++;e+g>d&&(g=0);if(2<e||2<g)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(g-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function xr(a,b){ur(1,arguments);var c=sr(1,arguments),d=tr(1,1,arguments);la(d)||vr(c,"Bad argument to assert(boolean)");d||vr(c,"Call to assert(boolean) with false")}function yr(a,b){ur(1,arguments);var c=sr(1,arguments),d=tr(1,1,arguments);la(d)||vr(c,"Bad argument to assertTrue(boolean)");d||vr(c,"Call to assertTrue(boolean) with false")}function zr(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments),g=wr(d,e);d===e||vr(sr(2,arguments),g)}
function Ar(a,b){ur(1,arguments);var c="Expected not to be "+rr(null);null!==tr(1,1,arguments)||vr(sr(1,arguments),c)}function Br(a,b){ur(1,arguments);var c="Expected not to be "+rr(void 0);void 0!==tr(1,1,arguments)||vr(sr(1,arguments),c)}
function Fr(a,b,c){function d(a,b,c){for(var s=0;s<g.length;++s){var u=g[s]===a,v=l[s]===b;if(u||v){u&&v||e.push("Asymmetric cycle detected at "+c);return}}g.push(a);l.push(b);if(a!==b)if(s=qr(a),u=qr(b),s==u){var v="Array"==s,D=m(s,a,b);if(null!=D)""!=D&&e.push(c+": "+D);else if(v&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(D=c+(v?"[%s]":c?".%s":"%s"),a.__iterator__)na(a.ep)?a.ep(b)||e.push("equals() returned false for "+(c||
s)):a.rc?d(a.rc,b.rc,D.replace("%s","map_")):e.push("unable to check "+(c||s)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var B in a)v&&(B|0)==B||(B in b?d(a[B],b[B],D.replace("%s",B)):e.push("property "+B+" not present in actual "+(c||u)));for(B in b)v&&(B|0)==B||B in a||e.push("property "+B+" not present in expected "+(c||s));if(v)for(B=0;B<a.length;B++)d(a[B],b[B],D.replace("%s",String(B)))}}else e.push(c+" "+wr(a,b));g.pop();l.pop()}
var e=[],g=[],l=[],m=c||function(a,b,c){return(a=nr[a])?a(b,c)?"":wr(b,c):null};d(a,b,"");return 0==e.length?null:wr(a,b)+"\n   "+e.join("\n   ")}function Gr(a,b,c){ur(2,arguments);var d=sr(2,arguments)?sr(2,arguments):"",e=Fr(tr(1,2,arguments),tr(2,2,arguments));!e||vr(d,e)}function Hr(a,b,c,d){ur(3,arguments);var e=tr(1,3,arguments),g=tr(2,3,arguments),l=tr(3,3,arguments);or(e,g,l)||vr(sr(3,arguments),"Expected "+e+", but got "+g+" which was more than "+l+" away")}
function Ir(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function Jr(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function Kr(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function vr(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new Lr(a,b);}
function Lr(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=kr();if(c){if(ia(c))for(var d=[],e=0;e<c.length;e++){var g=c[e],l=g.getFunctionName()||"unknown",m=g.getFileName(),g=m?m+":"+g.getLineNumber()+":"+g.getColumnNumber():"unknown";d.push(new Zq("",l,"","",g))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(jr(c[e]));c=d}else c=ir();for(d=c.length-1;c[d]&&$q(c[d]);)d--;e=-1;for(l=0;l<c.length;l++)if(c[l]&&"_assert"==c[l].getName()){e=l;break}g=[];for(l=e+1;l<=
d;l++)g.push("> "),c[l]?g.push(ar(c[l])):g.push("(unknown)"),g.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,Lr):this.stack=Error().stack||""}k(Lr,Error);Lr.prototype.toString=function(){return this.message};h("fail",function(a){vr("Call to fail()",a)});h("assert",xr);
h("assertThrows",function(a,b){ur(1,arguments);var c=tr(1,1,arguments),d=sr(1,arguments);"function"==typeof c||vr(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&ka(e.stacktrace)&&ka(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}vr(d,"No exception thrown from function passed to assertThrows")});
h("assertNotThrows",function(a,b){ur(1,arguments);var c=sr(1,arguments),d=tr(1,1,arguments);"function"==typeof d||vr(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",vr(c,e.stack||e.stacktrace||e.toString())}});h("assertTrue",yr);
h("assertFalse",function(a,b){ur(1,arguments);var c=sr(1,arguments),d=tr(1,1,arguments);la(d)||vr(c,"Bad argument to assertFalse(boolean)");!d||vr(c,"Call to assertFalse(boolean) with true")});h("assertEquals",zr);h("assertNotEquals",function(a,b,c){ur(2,arguments);var d=tr(2,2,arguments),e="Expected not to be "+rr(d);tr(1,2,arguments)!==d||vr(sr(2,arguments),e)});h("assertNull",function(a,b){ur(1,arguments);var c=tr(1,1,arguments),d=wr(null,c);null===c||vr(sr(1,arguments),d)});
h("assertNotNull",Ar);h("assertUndefined",function(a,b){ur(1,arguments);var c=tr(1,1,arguments),d=wr(void 0,c);void 0===c||vr(sr(1,arguments),d)});h("assertNotUndefined",Br);h("assertNotNullNorUndefined",function(a,b){ur(1,arguments);Ar.apply(null,arguments);Br.apply(null,arguments)});h("assertNonEmptyString",function(a,b){ur(1,arguments);var c=tr(1,1,arguments),d="Expected non-empty string but was "+rr(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||vr(sr(1,arguments),d)});
h("assertNaN",function(a,b){ur(1,arguments);isNaN(tr(1,1,arguments))||vr(sr(1,arguments),"Expected NaN")});h("assertNotNaN",function(a,b){ur(1,arguments);!isNaN(tr(1,1,arguments))||vr(sr(1,arguments),"Expected not NaN")});h("assertObjectEquals",Gr);
h("assertObjectRoughlyEquals",function(a,b,c,d){ur(3,arguments);var e=tr(3,3,arguments),g=sr(3,arguments)?sr(3,arguments):"",l=Fr(tr(1,3,arguments),tr(2,3,arguments),function(a,b,c){return(a=pr[a])?a(b,c,e)?"":wr(b,c)+" which was more than "+e+" away":null});!l||vr(g,l)});h("assertObjectNotEquals",function(a,b,c){ur(2,arguments);var d=sr(2,arguments)?sr(2,arguments):"";Fr(tr(1,2,arguments),tr(2,2,arguments))||vr(d,"Objects should not be equal")});
h("assertArrayEquals",function(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments),g=sr(2,arguments)?sr(2,arguments):"",l=qr(d);"Array"==l||vr(g,"Expected an array for assertArrayEquals but found a "+l);l=qr(e);"Array"==l||vr(g,"Expected an array for assertArrayEquals but found a "+l);Gr(g,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
h("assertElementsEquals",function(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments),g=sr(2,arguments)?sr(2,arguments):"";if(d){zr("length mismatch: "+g,d.length,e.length);for(var l=0;l<d.length;++l)zr("mismatch at index "+l+": "+g,d[l],e[l])}else xr(g,!e)});
h("assertElementsRoughlyEqual",function(a,b,c,d){ur(3,arguments);var e=tr(1,3,arguments),g=tr(2,3,arguments),l=tr(3,3,arguments),m=sr(3,arguments)?sr(3,arguments):"";if(e){zr("length mismatch: "+m,e.length,g.length);for(var q=0;q<e.length;++q)Hr(m,e[q],g[q],l)}else xr(m,!g)});
h("assertSameElements",function(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments),g=sr(2,arguments);yr("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ja(d)&&ja(e));d=Ir(d);e=Ir(e);d.length==e.length||vr(g,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var l=Ir(d),m=0;m<e.length;m++){var q=Jr(l,e[m]);-1!=q||vr(g,"Expected ["+d+"], got ["+e+"]");l.splice(q,1)}});
h("assertEvaluatesToTrue",function(a,b){ur(1,arguments);tr(1,1,arguments)||vr(sr(1,arguments),"Expected to evaluate to true")});h("assertEvaluatesToFalse",function(a,b){ur(1,arguments);tr(1,1,arguments)&&vr(sr(1,arguments),"Expected to evaluate to false")});h("assertHTMLEquals",function(a,b,c){ur(2,arguments);var d=tr(2,2,arguments),e=Kr(tr(1,2,arguments)),d=Kr(d),g=wr(e,d);e===d||vr(sr(2,arguments),g)});
h("assertHashEquals",function(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments),g=sr(2,arguments),l;for(l in d)l in e||vr(g,"Expected hash had key "+l+" that was not found"),d[l]==e[l]||vr(g,"Value for key "+l+" mismatch - expected = "+d[l]+", actual = "+e[l]);for(l in e)l in d||vr(g,"Actual hash had key "+l+" that was not expected")});h("assertRoughlyEquals",Hr);
h("assertContains",function(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments);-1!=Jr(e,d)||vr(sr(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});h("assertNotContains",function(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments);-1==Jr(e,d)||vr(sr(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
h("assertRegExp",function(a,b,c){ur(2,arguments);var d=tr(1,2,arguments),e=tr(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||vr(sr(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});V.a.Q=function(){U.S.call(this);this.nd=[];this.zt={};this.be={xW:null,Uw:null,vm:null,ZJ:null,GU:null,$J:null,dL:null,pL:null};this.be.Uw=wh("div",{id:V.a.Q.ID_PREFIX+"_menu_top_left_"+r(),"class":V.a.Q.CSS.KK,viewbox:this.b().id});Ah(this.b(),this.be.Uw);this.Dc=wh("div",{id:V.a.Q.ID_PREFIX+"_ViewFrame_"+r(),"class":V.a.Q.CSS.AL});Ah(this.b(),this.Dc);this.Od=new V.a.Ed;Ah(this.Dc,this.Od.b());this.Od.b().style.opacity=0;this.Od.b().style.zIndex=1E5;Mr(this.Od);this.o()};k(V.a.Q,U.S);
h("xiv.ui.ViewBox",V.a.Q);var Nr={yL:"S",wL:"T",xL:"U"};V.a.Q.ID_PREFIX="xiv.ui.ViewBox";V.a.Q.CSS_SUFFIX={dV:"hidden",lW:"tabdragger",mW:"tabdragger-handle",CL:"viewlayoutmenu",KK:"menu-top-left",JK:"menu-left",BL:"viewlayouthandler",nW:"ziptabs",oW:"ziptab-bounds",AL:"viewframe",QB:"component-highlight",vL:"viewablegroupmenu"};V.a.Q.WE={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};V.a.Q.MK=200;V.a.Q.gL=15;V.a.Q.hL=50;V.a.Q.NK=.2;f=V.a.Q.prototype;f.HQ="empty";f.yf=null;
f.Ib=null;f.Nd=null;f.Wa=null;f.Od=null;f.df=null;f.v=null;f.lg=null;f.KG=!1;f.KO=function(){return this.be};f.EO=function(){return this.HQ};f.hk=function(){return this.nd};f.AP=function(){return this.Dc};f.CO=function(){return this.Ib};f.CP=function(){return this.df};f.up=function(){R(this.Dc,V.a.Q.CSS.QB)};f.Ws=function(){Wg(this.Dc,V.a.Q.CSS.QB)};f.rP=function(){return this.tj};f.KM=function(){this.tj=void 0};f.pN=function(a){this.sy=this.sy?this.sy:[];this.sy.push(a)};f.Xn=function(a){this.Nd.zs(a)};
f.RR=function(){this.Od.aa(0);this.Od.aB(!0);Or(this.Od,0);this.up()};function Pr(a,b){a.Od.yi("");a.Od.aB(!0);a.Od.aa(100*b)}f.qA=function(a){this.up();Pr(this,a.value)};V.a.Q.jK=function(){};function Qr(a,b,c){Xf(function(){Mr(this.Od,500,function(){this.o();null!=c&&c()}.bind(this))}.bind(a),ma(b)?b:1E3)}f=V.a.Q.prototype;
f.Cv=function(){Rr(this,!1);A(ph("xtk-progress-bar"),function(a){a.visibility="hidden"});null!=this.nd[0].$c()&&this.Xn(this.nd[0].$c());this.v.EE();Sr(this);this.lg.GE();this.lg.$D();Qr(this,800,function(){this.Od.aa(0);this.o();this.Av();this.dispatchEvent("T");this.Ws()}.bind(this))};f.Av=function(){this.Wa&&this.Wa.o();null!=this.lg&&this.lg.update();null!=this.Wa&&this.lg.SH()};
function Tr(a,b){a.df.reset();wb(a.zt);Mb(a.nd,b)||a.nd.push(b);1==a.nd.length&&a.Xn(V.a.Q.WE[b.Vj]);var c=b.De,d=null;1<c.length?(A(c,function(a,b){d=this.df.pl(a.Wp,a.Eg()||b);this.zt[pa(d)]=a}.bind(a)),Or(a.df,400)):a.load(c[0],!1)}f.Gs=function(){this.v.Gs()};f.Px=function(a){return null!=this.tj?(this.Gs(),this.v.GI(a),!0):!1};
f.load=function(a,b){this.dispatchEvent("S");if(!this.Px(function(){this.tj=void 0;this.load(a,b)}.bind(this)))if(null!=a){if(b=null!=b?b:!0)Ur(this),this.be.vm=wh("div",{id:V.a.Q.ID_PREFIX+"_menu_left_"+r(),"class":V.a.Q.CSS.JK,viewbox:this.b().id}),this.be.vm.style.opacity=0,Ah(this.b(),this.be.vm),this.Nd=new U.W,this.Zm("LEFT",this.Nd.b()),R(this.Nd.b(),V.a.Q.CSS.CL),this.Nd.tH(!0),this.Nd.uH(!0),this.Nd.b().style.opacity=0,this.Nd.Gg.style.opacity=0,this.Dc.appendChild(this.Nd.Gg),this.v=new V.a.hb(this),
this.Ib=new V.a.e.Ka,this.Ib.b().style.opacity=0,Ah(this.Dc,this.Ib.b()),R(this.Ib.b(),V.a.Q.CSS.BL),C(this.Ib,"v",this.Av.bind(this)),C(this.Ib,"s",this.mA.bind(this)),C(this.Ib,"u",this.nA.bind(this)),C(this.Ib,"t",this.lA.bind(this)),Vr(this),Wr(this),this.lg=new V.a.Ab(this,this.Wa,this.Ib,this.v),this.lg.wJ(this.Nd),this.KG=!0;Mr(this.df,400);Or(this.Od,0);if(a instanceof P.d.Vc)Tr(this,a);else{var c;w(this.Wa.Dd,function(a,b){(c=this.Ib.OF(b))&&a.Ta(c.b())}.bind(this));Zc(this.Wa,"z",this.RR.bind(this));
Zc(this.Wa,"B",this.Cv.bind(this));C(this.Wa,"A",this.qA.bind(this));Rr(this,!0);"scans"==a.Vj.toLowerCase()?Xr(this,a):(this.Wa.p(a),this.tj=(new Date).getTime())}}else Yr(this,"The data set is empty!")};function Xr(a,b){Or(a.Od,0);Pr(a,0);var c=a.nd[a.nd.length-1].rG(),d=b.Zi()[0].Yi()[0].split("/files/")[0]+"/files";P.tg.UF(d,function(a){b.Zi()[0].AI(a);this.Wa.p(b);this.tj=(new Date).getTime()}.bind(a),function(a){this.up();Pr(this,a.loaded/c)}.bind(a))}
function Rr(a,b){window.onerror=!0===b?function(a){Yr(this,a)}.bind(a):void 0}function Yr(a,b){a.Ws();Qr(a);Rr(a,!1);Ur(a);b=b.replace("Uncaught Error: ","")||"A render error occured :(<br>";a.dispatchEvent({type:Nr.wW,message:b});var c=new U.Bd;c.qD();c.rD();var d=c.au();R(d,U.Bd.CSS.xC);d.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.il(b||"");c.p(a.Dc);c.b().style.opacity=0;c.b().style.zIndex=1E3;T.or(c.b(),V.ft)}
f.mA=function(a){w(this.Wa.Dd,function(b,c){null!=a.vB[c]&&(b.Wn(a.vB[c]),b.o())})};f.nA=function(){w(this.Wa.Dd,function(a){a.o()});this.lg.update()};f.lA=function(a){var b=a.frames;w(this.Wa.Dd,function(a,d){null!=b[d]&&(a.Wn(b[d].b()),a.o())}.bind(this));this.lg.update()};function Sr(a){var b=0,b=ma(b)?b:500,c=[];A([a.be.vm,a.Nd.b(),a.Ib.b()],function(a){c.push(T.Gy(a,{opacity:0},{opacity:1},b))});T.DA(c,null,null,void 0)}
function Mr(a,b,c){if(null!=a){b=ma(b)&&0<=b?b:0;var d=function(){a.b().style.visibility="hidden";a.b().style.zIndex="-1";c&&c()};"hidden"==a.b().style.visibility||0==b?d():T.un(a.b(),b,d)}}function Or(a,b){b=ma(b)&&0<=b?b:0;a.b().style.opacity="0";a.b().style.zIndex="1000";a.b().style.visibility="visible";0==b?a.b().style.opacity="1":T.nr(a.b(),b,function(){})}
f.Zm=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.be.Uw;break;case "LEFT":d=this.be.vm;break;case "BOTTOM_LEFT":d=this.be.ZJ;break;case "TOP_RIGHT":d=this.be.pL;break;case "RIGHT":d=this.be.dL;break;case "BOTTOM_RIGHT":d=this.be.$J}ma(c)?d.insertBefore(b,d.childNodes[c]):Ah(d,b)};
f.Kp=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?R(a,a.getAttribute(V.a.hb.wt)):Wg(a,a.getAttribute(V.a.hb.wt));null!=b&&b(a)};f.BJ=function(a){return"true"==this.yf[a].getAttribute("checked").toString()};f.Vy=function(a){return this.yf[a]};f.Ke=function(a){ol(this.yf[a])};f.zB=function(a){ia(a)||(a=[a]);A(a,function(a){null!=this.yf[a]&&this.BJ(a)&&ol(this.yf[a])}.bind(this))};
f.hn=function(a,b,c,d,e,g){var l=b+"-on",m=wh("img",b);m.id=ej(this)+".IconButton_";m.title=d;null!=g&&(m.src=g);m.setAttribute("checked","true");m.setAttribute(V.a.hb.wt,b+"-on");R(m,l);Rk.zb(m,{cursor:"pointer"});C(m,"click",function(){this.Kp(m,e)}.bind(this));this.Zm(a,m);if(null==this.yf)this.yf={};else if(null!=this.yf[c])throw Error("Invalid identifier for toggle button.  In use.");return this.yf[c]=m};
function Wr(a){a.df=new V.a.Hc;a.df.p(a.Dc);Ah(a.Dc,a.df.b());Ah(a.Dc,a.df.Yg);R(a.df.b(),V.a.Q.CSS.vL);C(a.df,"R",function(a){this.load(this.zt[pa(a.xJ)],!1)}.bind(a));Mr(a.df)}f.tP=function(){return this.yf};function Vr(a){a.Wa=new V.d.H;C(a.Wa,"H",function(a){Yr(this,a.message)}.bind(a))}
f.o=function(a){V.a.Q.g.o.call(this,a);null!=this.Ib&&this.Ib.o();this.Wa&&this.Wa.o();null!=this.Nd&&(a=ui(this.Dc),this.Nd.EI(-100,a.height/2-130),this.Nd.WI(0,a.height/2-130));null!=this.v&&this.v.update();null!=this.lg&&this.lg.IJ()};
function Ur(a){wb(a.zt);Nb(a.nd);null!=a.Ib&&(bd(a.Ib),Hc(a.Ib.k()),delete a.Ib);null!=a.Nd&&(bd(a.Nd),a.Nd.k(),delete a.Nd);null!=a.Wa&&(a.Wa.k(),delete a.Wa);null!=a.df&&(a.df.k(),delete a.df);null!=a.v&&a.v.i();null!=a.lg&&a.lg.k();null!=a.yf&&(S(a.be.vm),delete a.be.vm,w(a.yf,function(a){bd(a);S(a)}),Nb(a.yf),delete a.yf)}
f.i=function(){V.a.Q.g.i.call(this);Ur(this);null!=this.Od&&(this.Od.k(),delete this.Od);S(this.Dc);bd(this.Dc);delete this.Dc;w(this.be,function(a,b){S(a);delete this.be[b]}.bind(this));delete this.be;delete this.bX;delete this.KG};h("xiv.ui.ViewBox.EventType",Nr);h("xiv.ui.ViewBox.ID_PREFIX",V.a.Q.ID_PREFIX);h("xiv.ui.ViewBox.CSS_SUFFIX",V.a.Q.CSS_SUFFIX);h("xiv.ui.ViewBox.defaultLayout",V.a.Q.WE);h("xiv.ui.ViewBox.MIN_HOLDER_HEIGHT",V.a.Q.MK);h("xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT",V.a.Q.gL);
h("xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH",V.a.Q.hL);h("xiv.ui.ViewBox.MIN_TAB_H_PCT",V.a.Q.NK);h("xiv.ui.ViewBox.ControllersSet",V.a.Q.jK);h("xiv.ui.ViewBox.prototype.getMenus",V.a.Q.prototype.KO);h("xiv.ui.ViewBox.prototype.getLoadState",V.a.Q.prototype.EO);h("xiv.ui.ViewBox.prototype.getViewableTrees",V.a.Q.prototype.hk);h("xiv.ui.ViewBox.prototype.getViewFrame",V.a.Q.prototype.AP);h("xiv.ui.ViewBox.prototype.getLayoutHandler",V.a.Q.prototype.CO);
h("xiv.ui.ViewBox.prototype.getViewableGroupMenu",V.a.Q.prototype.CP);h("xiv.ui.ViewBox.prototype.highlight",V.a.Q.prototype.up);h("xiv.ui.ViewBox.prototype.unhighlight",V.a.Q.prototype.Ws);h("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",V.a.Q.prototype.rP);h("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",V.a.Q.prototype.KM);h("xiv.ui.ViewBox.prototype.doNotHide",V.a.Q.prototype.pN);h("xiv.ui.ViewBox.prototype.setLayout",V.a.Q.prototype.Xn);h("xiv.ui.ViewBox.prototype.showInUseDialog",V.a.Q.prototype.Gs);
h("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",V.a.Q.prototype.Px);h("xiv.ui.ViewBox.prototype.load",V.a.Q.prototype.load);h("xiv.ui.ViewBox.prototype.addToMenu",V.a.Q.prototype.Zm);h("xiv.ui.ViewBox.prototype.onToggleButtonClicked",V.a.Q.prototype.Kp);h("xiv.ui.ViewBox.prototype.toggleButtonChecked",V.a.Q.prototype.BJ);h("xiv.ui.ViewBox.prototype.getToggleButton",V.a.Q.prototype.Vy);h("xiv.ui.ViewBox.prototype.fireToggleButton",V.a.Q.prototype.Ke);h("xiv.ui.ViewBox.prototype.untoggle",V.a.Q.prototype.zB);
h("xiv.ui.ViewBox.prototype.createToggleButton",V.a.Q.prototype.hn);h("xiv.ui.ViewBox.prototype.getToggleButtons",V.a.Q.prototype.tP);h("xiv.ui.ViewBox.prototype.updateStyle",V.a.Q.prototype.o);h("xiv.ui.ViewBox.prototype.disposeInternal",V.a.Q.prototype.i);function Zr(){gl.call(this)}k(Zr,gl);Zr.prototype.Ym=function(a,b){var c=new ml(a,b);c.ws(this);this.Nr.push(c);this.Rl&&hl(this,c)};V.a.ga=function(){U.S.call(this)};k(V.a.ga,U.S);h("xiv.ui.ViewBoxHandler",V.a.ga);V.a.ga.CSS_SUFFIX={qK:"handle",zL:"viewboxdragclone",Nk:"closebutton",LB:"addrowbutton",KB:"addcolumnbutton"};V.a.ga.Fj="viewboxid";V.a.ga.ID_PREFIX="xiv.ui.ViewBoxHandler";f=V.a.ga.prototype;f.Gw=5;f.sC=5;f.vo=document.body;f.Vl=function(a,b){this.dispatchEvent({type:"Y",KH:a,jM:b})};f.pT=function(){return this.M.length};f.ur=function(){var a=[];A(this.M,function(b,c){a.push([]);A(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.M&&A(this.M,function(b,c){A(b,function(d,e){a(d,c,e,this.M.length,b.length)}.bind(this))}.bind(this))};f.iz=function(a,b){this.M||(this.M=[[]]);var c=0,d=[],e;if(null!=a)c=$r(this,a),this.M[c.Tu].length<this.sC&&(d.push(as(this)),Sb(this.M[c.Tu],c.AQ+1,0,d[0]));else{d=[];e=this.M.length?this.M.length:1;for(c=0;c<e;c++)d.push(as(this));0===this.M.length?this.M.push([d[0]]):A(this.M,function(a,b){a.push(d[b])})}this.Vl(d,void 0===b?!0:b);bs(this)};
f.dT=function(a){this.M&&(a=void 0===a?!0:a,this.M[0]&&1<this.M[0].length&&A(this.M,function(a){var c=a.length-1;cs(this,a[c]);a.splice(c,1)}.bind(this)),this.Vl(null,a),bs(this))};function $r(a,b){for(var c=0,d=0,e=a.M.length,g=0,c=0;c<e;c++)for(d=0,g=a.M[c].length;d<g;d++)if(b===a.M[c][d])return{Tu:c,AQ:d}}
f.insertRow=function(a,b){this.M||(this.M=[[]]);var c=[],d,e;if(null!=a){var g=$r(this,a),c=[];e=this.M[g.Tu].length;if(this.M.length<this.Gw){for(d=0;d<e;d++)c.push(as(this));Sb(this.M,g.Tu+1,0,c)}}else if(e=this.M[0]&&this.M[0].length?this.M[0].length:1,this.M.length<this.Gw){for(d=0;d<e;d++)c.push(as(this));this.M.push(c)}this.Vl(c,void 0===b?!0:b);bs(this)};
f.fT=function(a){this.M&&(a=void 0===a?!0:a,1<this.M.length&&(A(this.M[this.M.length-1],function(a){cs(this,a)}.bind(this)),this.M.splice(this.M.length-1,1)),this.Vl(null,a),bs(this))};f.Ju=function(a){for(var b=0,c=0,d=this.M.length,e=0,b=0;b<d;b++)for(c=0,e=this.M[b].length;c<e;c++)if(a===this.M[b][c].b())return this.M[b][c]};f.yP=function(a,b){return this.M[a][b].b()};f.wP=function(a,b){return this.M[a][b]};f.uG=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.tG=function(){var a=[];this.loop(function(b){a.push(b.b())});return a};f.$I=function(a){this.vo=a};
function as(a){var b=new V.a.Q;Ah(a.vo,b.b());ds(a,b);var c=wh("img",{id:V.a.ga.ID_PREFIX+"_dragHandle_"+r(),"class":V.a.ga.CSS.qK});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute(V.a.ga.Fj,b.b().id);b.Zm("TOP_LEFT",c,1);a.vl||(a.vl={});a.vl[b.b().id]=c;c.title="Drag and drop view box to swap.";es(a,b);fs(a,b);C(b,"T",a.wA.bind(a));C(b,"S",a.xA.bind(a));C(b,"U",a.dS.bind(a));return b}
function fs(a,b){var c=wh("img",{id:V.a.ga.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.ga.CSS.KB,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});Rk.dm(c,V.a.ga.CSS.KB+"-hovered");C(c,"click",function(){this.iz(b)}.bind(a));c.setAttribute(V.a.ga.Fj,b.b().id);b.Zm("TOP_LEFT",c,1);a.vD||(a.vD={});a.vD[b.b().id]=c;c.title="Add ViewBox Column."}
function es(a,b){var c=wh("img",{id:V.a.ga.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.ga.CSS.LB,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});Rk.dm(c,V.a.ga.CSS.LB+"-hovered");C(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute(V.a.ga.Fj,b.b().id);b.Zm("TOP_LEFT",c,1);a.CD||(a.CD={});a.CD[b.b().id]=c;c.title="Close ViewBox."}
function ds(a,b){var c=wh("img",{id:V.a.ga.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.ga.CSS.Nk,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});Rk.dm(c,V.a.ga.CSS.Nk+"-hovered");C(c,"click",function(){gs(this,b)}.bind(a));c.setAttribute(V.a.ga.Fj,b.b().id);b.Zm("TOP_LEFT",c,1);a.Zq||(a.Zq={});a.Zq[b.b().id]=c;c.title="Close ViewBox."}f.wA=function(a){this.dispatchEvent({type:"W",Q:a.target})};f.Ww=function(a,b){this.loop(function(c){Mb(c.hk(),a)&&b(c)})};
f.xA=function(a){this.dispatchEvent({type:"V",Q:a.target})};f.dS=function(a){this.dispatchEvent({type:"X",Q:a.target})};function cs(a,b){T.Cg(b.b(),150,0);S(a.vl[b.b().id]);S(a.Zq[b.b().id]);b.k()}function hs(a,b){var c=[],d;cs(a,b);A(a.M,function(a){d=[];A(a,function(a){a.ln||(window.console.log(a.b()),d.push(a))}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.M=c;a.Vl(null,!0);bs(a)}function gs(a,b){1!=a.NH()&&(b.Px(function(){hs(this,b)}.bind(a))||hs(a,b))}
f.oz=function(a,b){var c=a.b()===b,d=a.b().id===b;return a===b||c||d};f.uJ=function(a,b){for(var c,d,e,g,l=0,m=0,q=this.M.length,l=0;l<q;l++)for(var p=this.M[l].length,m=0;m<p;m++){var t=this.M[l][m];if(this.oz(t,a)){c=l;d=m;break}if(this.oz(t,b)){e=l;g=m;break}}ma(c)&&ma(e)&&(l=this.M[c][d],this.M[c][d]=this.M[e][g],this.M[e][g]=l,l=ui(this.M[c][d].b()),m=ui(this.M[e][g].b()),ri(this.M[e][g].b(),l),ri(this.M[c][d].b(),m),this.Vl())};f.NH=function(){var a=0;this.loop(function(){a++});return a};
f.xP=function(a){for(var b=0,c=0,d=this.M.length,e=0,g=e=0,b=0;b<d;b++)for(c=0,e=this.M[b].length;c<e;c++)if(this.M[b][c]===a)return e=b+1===this.M.length,g=c+1===this.M[b].length,e&&g?this.M[0][0]:e&&!g?this.M[0][c+1]:!e&&g?this.M[b+1][0]:this.M[b+1][c+1]};f.WF=function(){var a;this.loop(function(b){null!=a||null!=b.tj||(a=b)}.bind(this));if(null!=a)return a;var b=this.uG();ia(b)?b.sort(function(a,b){return a.tj<b.tj?-1:a.tj>b.tj?1:0}):b=[b];return b[0]};
f.Tx=function(){this.Pf&&(il(this.Pf),il(this.ak),delete this.Pf,delete this.ak)};function is(a){a.loop(function(a){null!=a.b()&&(this.Pf.Ym(this.vl[a.b().id]),this.ak.Ym(a.b()))}.bind(a))}function bs(a){a.Tx();a.Pf=new Zr;a.ak=new Zr;is(a);var b=a.Pf,c=a.ak;b.pB.push(c);c.bv=!0;b.av=!0;a.Pf.Ta();a.ak.Ta();a.Pf.by=a.cy.bind(a);C(a.Pf,"dragstart",a.qR.bind(a));C(a.Pf,"dragover",a.iA.bind(a));C(a.Pf,"dragend",a.hA.bind(a))}f.cy=function(a){return js(mh(a.getAttribute(V.a.ga.Fj)))};
f.qR=function(){this.Kh={};this.loop(function(a){this.Kh[a.b().id]={absolute:Rk.$t(a.b()),relative:Rk.oy(a.b())};this.vl[a.b().id].style.visibility="hidden"}.bind(this))};function js(a){var b=document.body;a=a.cloneNode(!1);a.className=V.a.ga.CSS.zL;b&&b.appendChild(a);return a}
f.iA=function(a){if(a.cp.element.id!==a.vu.rl.getAttribute(V.a.ga.Fj)){var b=mh(a.vu.rl.getAttribute(V.a.ga.Fj));a=mh(a.cp.element.id);this.uJ(b,a);var c=this.Kh,d=new Ok,e=c[b.id].relative,c=c[a.id].relative;d.add(new Dk(b,[b.offsetLeft,b.offsetTop],[c.left,c.top],300,Sk));d.add(new Dk(a,[a.offsetLeft,a.offsetTop],[e.left,e.top],300,Sk));d.play();d=this.Kh[b.id];this.Kh[b.id]=this.Kh[a.id];this.Kh[a.id]=d}};
f.hA=function(a){var b=a.vu.ub.nn;a=mh(a.vu.rl.getAttribute(V.a.ga.Fj));a=Rk.$t(a);var c=js(b);Ah(this.vo.parentNode?this.vo.parentNode:this.vo,c);b=Rk.$t(b);Rk.zb(c,{top:b.top,left:b.left,"z-index":1E4});ks(c,a).play();ls(this)};function ks(a,b){var c=new Ok;c.add(new Dk(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,Sk));C(c,"end",function(){S(a)});return c}function ls(a){a.loop(function(a){this.vl[a.b().id].style.visibility="visible"}.bind(a))}
f.i=function(){V.a.ga.g.i.call(this);this.loop(function(a){bd(a);S(a.b());a.k()}.bind(this));A(this.M,function(a){Nb(a)});Nb(this.M);delete this.M;U.qy(this.vl);delete this.vl;U.qy(this.Zq);delete this.Zq;w(this.Kh,function(a,b){wb(this.Kh[b]);delete this.Kh[b]}.bind(this));wb(this.Kh);delete this.Kh;null!=this.Pf&&(bd(this.Pf),this.Pf.k());delete this.Pf;null!=this.ak&&(bd(this.ak),this.ak.k());delete this.ak;delete this.vo};h("xiv.ui.ViewBoxHandler.CSS_SUFFIX",V.a.ga.CSS_SUFFIX);
h("xiv.ui.ViewBoxHandler.EventType",{yL:"V",wL:"W",xL:"X",OW:"Y"});h("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR",V.a.ga.Fj);h("xiv.ui.ViewBoxHandler.ID_PREFIX",V.a.ga.ID_PREFIX);h("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",V.a.ga.prototype.Gw);h("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",V.a.ga.prototype.sC);h("xiv.ui.ViewBoxHandler.prototype.rowCount",V.a.ga.prototype.pT);h("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",V.a.ga.prototype.ur);h("xiv.ui.ViewBoxHandler.prototype.loop",V.a.ga.prototype.loop);
h("xiv.ui.ViewBoxHandler.prototype.insertColumn",V.a.ga.prototype.iz);h("xiv.ui.ViewBoxHandler.prototype.removeColumn",V.a.ga.prototype.dT);h("xiv.ui.ViewBoxHandler.prototype.insertRow",V.a.ga.prototype.insertRow);h("xiv.ui.ViewBoxHandler.prototype.removeRow",V.a.ga.prototype.fT);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",V.a.ga.prototype.Ju);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",V.a.ga.prototype.yP);h("xiv.ui.ViewBoxHandler.prototype.getViewBox",V.a.ga.prototype.wP);
h("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",V.a.ga.prototype.uG);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",V.a.ga.prototype.tG);h("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",V.a.ga.prototype.$I);h("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",V.a.ga.prototype.Ww);h("xiv.ui.ViewBoxHandler.prototype.isMatch",V.a.ga.prototype.oz);h("xiv.ui.ViewBoxHandler.prototype.swap",V.a.ga.prototype.uJ);h("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",V.a.ga.prototype.NH);
h("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",V.a.ga.prototype.xP);h("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",V.a.ga.prototype.WF);h("xiv.ui.ViewBoxHandler.prototype.disposeInternal",V.a.ga.prototype.i);V.a.s=function(a){U.s.call(this);this.zI(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.AB.bind(this));this.Lh=a;ms(this);this.cr()};k(V.a.s,U.s);h("xiv.ui.Thumbnail",V.a.s);V.a.s.ID_PREFIX="xiv.ui.Thumbnail";V.a.s.CSS_SUFFIX={};V.a.s.prototype.AB=function(){var a=nh("img",U.s.CSS.lt,this.fh()),a=a[0];a.src=this.xe.src};V.a.s.prototype.cr=function(){V.a.s.g.cr.call(this);R(this.fh(),V.a.s.jo)};
function ms(a){var b="",c=a.Lh.Zf;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=a.Lh.yk)var d=a.Lh.yk.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");A(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.Bs(e)}V.a.s.prototype.BP=function(){return this.Lh};V.a.s.prototype.i=function(){V.a.s.g.i.call(this);this.Lh.k();delete this.Lh};h("xiv.ui.Thumbnail.ID_PREFIX",V.a.s.ID_PREFIX);
h("xiv.ui.Thumbnail.CSS_SUFFIX",V.a.s.CSS_SUFFIX);h("xiv.ui.Thumbnail.prototype.updateHoverable",V.a.s.prototype.AB);h("xiv.ui.Thumbnail.prototype.createHoverable",V.a.s.prototype.cr);h("xiv.ui.Thumbnail.prototype.getViewable",V.a.s.prototype.BP);h("xiv.ui.Thumbnail.prototype.disposeInternal",V.a.s.prototype.i);V.a.G=function(){U.G.call(this);this.Bh=new Zr;this.Fk=new Zr;this.Bh.by=this.cy.bind(this);C(this.Bh,"dragover",this.iA.bind(this));C(this.Bh,"dragend",this.hA.bind(this));C(this.Bh,"dragout",this.pR.bind(this));C(this.Fk,"drop",this.rR.bind(this));var a=this.Bh,b=this.Fk;a.pB.push(b);b.bv=!0;a.av=!0;this.Fk.Ta();this.Bh.Ta()};k(V.a.G,U.G);h("xiv.ui.ThumbnailGallery",V.a.G);V.a.G.ID_PREFIX="xiv.ui.ThumbnailGallery";V.a.G.CSS_SUFFIX={Sw:"thumbnail-dragging"};V.a.G.eq=300;
V.a.G.lq="THUMBNAIL_DRAGGER_"+r();V.a.G.nK=V.a.G.lq+"_FADER"+r();f=V.a.G.prototype;f.Bh=null;f.Fk=null;f.pl=function(a,b){var c=this.dr(a);this.Ro(c,b);return c};f.dr=function(a){var b=new V.a.s(a);C(b,"y",function(){this.dispatchEvent({type:"ca",s:b})}.bind(this));return b};f.Ro=function(a,b){V.a.G.g.Ro.call(this,a,b);var c=a.fh();c&&this.Bh.Ym(c)};f.tE=function(){il(this.Fk)};f.ED=function(a){this.Fk.Ym(a)};f.FD=function(a){A(a,function(a){this.ED(a)}.bind(this))};f.pP=function(a){return this.Tc[a.id]};
f.Tx=function(){null!=this.Bh&&(il(this.Bh),this.Bh.k());null!=this.Fk&&(il(this.Fk),this.Fk.k())};f.cy=function(a){a=Th(a,"div",V.a.s.gd).id.replace(U.s.kt,"");if(a in this.Tc)return this.Tc[a].setActive(!0,!0),a=this.Tc[a].b().cloneNode(!0),a.setAttribute("id",V.a.G.lq+a.id),R(a,V.a.G.CSS.Sw),a};f.iA=function(a){this.dispatchEvent({type:"aa",rB:a.cp.element})};f.pR=function(a){this.dispatchEvent({type:"ba",rB:a.cp.element})};
f.hA=function(){var a=ph(V.a.G.CSS.Sw);A(a,function(a){T.un(a,V.a.G.eq,function(){S(a)})});null!=a[0]&&this.Tc[a[0].id.replace(V.a.G.lq,"")].setActive(!1,!0)};f.rR=function(a){var b=qh(V.a.G.CSS.Sw);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);S(b);a.cp.element&&this.dispatchEvent({type:"da",s:this.Tc[b.id.replace(V.a.G.lq,"")],dU:a.cp.element})}};f.i=function(){V.a.G.g.i.call(this);this.Tx()};
h("xiv.ui.ThumbnailGallery.EventType",{pt:"Z",OK:"$",uW:"aa",tW:"ba",rW:"ca",vW:"da"});h("xiv.ui.ThumbnailGallery.ID_PREFIX",V.a.G.ID_PREFIX);h("xiv.ui.ThumbnailGallery.CSS_SUFFIX",V.a.G.CSS_SUFFIX);h("xiv.ui.ThumbnailGallery.ANIM_MED",V.a.G.eq);h("xiv.ui.ThumbnailGallery.DRAGGER_ID",V.a.G.lq);h("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",V.a.G.nK);h("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",V.a.G.prototype.pl);h("xiv.ui.ThumbnailGallery.prototype.createThumbnail",V.a.G.prototype.dr);
h("xiv.ui.ThumbnailGallery.prototype.addThumbnail",V.a.G.prototype.Ro);h("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",V.a.G.prototype.tE);h("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",V.a.G.prototype.ED);h("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",V.a.G.prototype.FD);h("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",V.a.G.prototype.pP);h("xiv.ui.ThumbnailGallery.prototype.disposeInternal",V.a.G.prototype.i);function ns(){}k(ns,sl);fa(ns);f=ns.prototype;f.oa=function(){return"goog-tab"};f.ii=function(){return"tab"};f.C=function(a){var b=ns.g.C.call(this,a);(a=a.gk())&&this.fm(b,a);return b};f.cc=function(a,b){b=ns.g.cc.call(this,a,b);var c=this.gk(b);c&&a.gw(c);a.fa&8&&(c=a.getParent())&&na(c.HT)&&(a.dd(8,!1),c.HT(a));return b};f.gk=function(a){return a.title||""};f.fm=function(a,b){a&&(a.title=b||"")};function os(a,b,c){Hl.call(this,a,b||ns.qf(),c);this.ce(8,!0);this.Yn|=9}k(os,Hl);os.prototype.gk=function(){return this.Ts};os.prototype.fm=function(a){this.ec().fm(this.b(),a);this.gw(a)};os.prototype.gw=function(a){this.Ts=a};pl("goog-tab",function(){return new os(null)});function ps(a,b,c,d){gd.call(this);this.dc=c||jh();this.dp=a;this.qh=[];this.cU=b?b:qs;this.LJ=!!d;this.$g()}k(ps,gd);var qs=0;f=ps.prototype;
f.$g=function(){this.dp.className="goog-tabpane";for(var a=[],b=Eh(this.dp);b;)a.push(b),b=Gh(b);this.Rf=this.dc.C("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.sd=this.dc.C("div","goog-tabpane-cont");this.dp.appendChild(this.sd);b=this.dp;switch(this.cU){case qs:b.insertBefore(this.Rf,this.sd);b.insertBefore(rs(this),this.sd);uj(b,"goog-tabpane-top");break;case 1:b.appendChild(this.Rf);b.appendChild(rs(this));uj(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.Rf,this.sd);uj(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.Rf,this.sd);uj(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.Rf.tabIndex=0;C(this.Rf,this.LJ?"mousedown":"click",this.wv,!1,this);C(this.Rf,"keydown",this.xv,!1,this);for(var c=0;b=a[c];c++)ss(this,new ts(b))};
function rs(a){var b=jh(void 0),c=null,d=b.Sa;mc&&d.createStyleSheet?(c=d.createStyleSheet(),zi(c)):(d=oh(b.Sa,"head",void 0,void 0)[0],d||(c=oh(b.Sa,"body",void 0,void 0)[0],d=b.C("head"),c.parentNode.insertBefore(d,c)),c=b.C("style"),zi(c),b.appendChild(d,c));return a.dc.C("div","goog-tabpane-clear")}f.i=function(){ps.g.i.call(this);$c(this.Rf,this.LJ?"mousedown":"click",this.wv,!1,this);$c(this.Rf,"keydown",this.xv,!1,this);delete this.dp;this.sd=this.Rf=null};
function ss(a,b){b.ub&&b.ub!=a&&b.ub instanceof ps&&us(b.ub,b);var c=a.qh.length;ca(void 0)&&void 0!=c?(c=void 0,a.qh.splice(c,0,b),a.Rf.insertBefore(b.xl,a.Rf.childNodes[c])):(a.qh.push(b),a.Rf.appendChild(b.xl));b.xs(a,c);a.nj||(a.nj=b,a.dispatchEvent(new vs("change",a,a.nj)));a.sd.appendChild(b.sd);ws(b,b==a.nj);for(var d=c+1;c=a.qh[d];d++)c.Hr=d}function us(a,b){ma(b)&&(b=a.qh[b]);a.qh.splice(b.Hr,1);b.xs(null);S(b.xl);S(b.sd);for(var c,d=0;c=a.qh[d];d++)c.xs(a,d)}
function xs(a,b){if(0<=b&&b<a.qh.length){var c=a.qh[b];!c.isEnabled()||a.nj&&c==a.nj||(ws(a.nj,!1),ws(c,!0),a.nj=c,a.dispatchEvent(new vs("change",a,a.nj)))}}f.Qb=function(){return this.sd||null};f.b=function(){return this.dp||null};f.wv=function(a){for(var b=a.target;b!=this.Rf;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);xs(this,c);break}b=b.parentNode}a.preventDefault()};
f.xv=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.nj.Hr-1;xs(this,0>a?this.qh.length-1:a);break;case 39:a=this.nj.Hr+1;xs(this,a>=this.qh.length?0:a);break;case 36:xs(this,0);break;case 35:xs(this,this.qh.length-1)}};function ts(a,b,c){var d,e;if(ka(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=Eh(a))d=Qh(b),b.parentNode.removeChild(b);e=a}this.dc=c||jh();this.sd=e||this.dc.C("div");this.xl=this.dc.C("li",null,d);this.Hr=this.ub=null;this.Xd=!0}f=ts.prototype;
f.Eg=function(){return Qh(this.xl)};f.xh=function(a){Kh(this.xl,a)};f.pG=function(){return this.xl};f.Qb=function(){return this.sd};f.getParent=function(){return this.ub};f.xd=function(a){this.Xd=a;this.xl.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Xd};function ws(a,b){a.isEnabled()&&(a.sd.style.display=b?"":"none",a.xl.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.xs=function(a,b){this.ub=a;this.Hr=ca(b)?b:null};
function vs(a,b,c){Jc.call(this,a,b);this.page=c}k(vs,Jc);U.N=function(a){U.S.call(this);if(null!=a){var b=a;if(!ka(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==U.N.Jw.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||U.N.VB};k(U.N,U.S);h("nrg.ui.Tabs",U.N);U.N.Jw=["TOP","BOTTOM","LEFT","RIGHT"];U.N.VB=U.N.Jw[0];U.N.ID_PREFIX="nrg.ui.Tabs";U.N.CSS_SUFFIX={md:"tab",Sk:"tab-active",Ih:"page",VK:"page-content",st:"page-active",Yb:"icon",no:"icon-active",tK:"icon-content",ZV:"scrollgallery"};
function ys(a,b,c,d,e){this.qm=!1;this.Ra=a;this.md=b;this.Yb=c;this.Ih=d;this.Ej=e}f=U.N.prototype;f.kh=0;f.Lp=0;f.bg=null;f.p=function(a){U.N.g.p.call(this,a);this.zn=new ps(this.b());this.ca=[];R(this.b(),U.N.gd)};f.kP=function(){return this.ca.length};f.yO=function(){return this.kh};f.YO=function(){return this.Lp};f.Hu=function(){var a=[];A(this.ca,function(b){a.push(b.md)});return a};f.Iu=function(){var a=[];A(this.ca,function(b){a.push(b.Ih)});return a};
f.lP=function(){var a=[];A(this.ca,function(b){a.push(b.Yb)});return a};f.fM=function(a){A(a,function(a){this.Qo(a)}.bind(this))};f.reset=function(){for(var a=this.ca.length;0<a;)us(this.zn,a-1),a--;this.dY()};f.nB=function(a){if(null==this.ca)return!1;for(var b=0,c=this.ca.length;b<c;b++)if(this.ca[b].Ra==a)return!0;return!1};
f.Qo=function(a){this.ca=null!=this.ca?this.ca:[];if(this.nB(a))throw Error(a+" is an already existing tab!");var b;b=wh("div",{id:"Tab_"+r(),"class":U.N.CSS.md,title:a});Ah(this.b(),b);var c=wh("div",{id:"TabIcon_"+r(),"class":U.N.CSS.Yb}),d=wh("div",{"class":U.N.CSS.tK},a);Ah(c,d);Ah(b,c);d=wh("div",{id:"TabPage_"+r(),"class":U.N.CSS.Ih,label:a});Rk.zb(d,Rk.oy(this.b(),"width"));Ah(this.b().parentNode,d);var e=new ts(d,a);ss(this.zn,e);this.ca.push(new ys(a,b,c,d,e));zs(this);As(this);Bs(this);
this.kn();this.setActive(0);this.o()};f.XI=function(a,b){this.nB(a)||this.Qo(a);var c;a:if(null!=this.ca){c=0;for(var d=this.ca.length;c<d;c++)if(this.ca[c].Ra==a){c=this.ca[c];break a}c=void 0}else c=!1;b instanceof U.wb?(d=b,c.Ih.appendChild(b.b())):(d=new U.wb,d.p(c.Ih),d.Xg(b));R(d.b(),U.N.CSS.VK);this.o()};function zs(a){A(a.ca,function(a){bd(a.md)}.bind(a))}function As(a){A(a.ca,function(a,c){C(a.md,"click",function(){this.kn();this.setActive(c)}.bind(this))}.bind(a))}
function Bs(a){A(a.ca,function(a,c){Cs(this,c);Ds(this,c)}.bind(a))}function Cs(a,b){C(a.ca[b].md,"mouseover",function(){!0!==this.ca[b].qm&&(R(this.ca[b].md,U.N.CSS.Sk),R(this.ca[b].md,ek.Wb(U.N.CSS.Sk,this.orientation)),R(this.ca[b].Yb,U.N.CSS.no))}.bind(a))}function Ds(a,b){C(a.ca[b].md,"mouseout",function(){!0!==this.ca[b].qm&&(Wg(this.ca[b].md,U.N.CSS.Sk),Wg(this.ca[b].md,ek.Wb(U.N.CSS.Sk,this.orientation)),Wg(this.ca[b].Yb,U.N.CSS.no))}.bind(a))}
f.setActive=function(a){this.ca[a].qm=!0;this.Lp=this.kh;this.kh=a;xs(this.zn,a);R(this.ca[a].md,U.N.CSS.Sk);R(this.ca[a].md,ek.Wb(U.N.CSS.Sk,this.orientation));R(this.ca[a].Ih,U.N.CSS.st);R(this.ca[a].Ih,ek.Wb(U.N.CSS.st,this.orientation));R(this.ca[a].Yb,U.N.CSS.no);R(this.ca[a].Yb,ek.Wb(U.N.CSS.no,this.orientation))};
f.VE=function(a){this.ca[a].qm=!1;xs(this.zn,1);Wg(this.ca[a].md,U.N.CSS.Sk);Wg(this.ca[a].md,ek.Wb(U.N.CSS.Sk,this.orientation));Wg(this.ca[a].Ih,U.N.CSS.st);Wg(this.ca[a].Ih,ek.Wb(U.N.CSS.st,this.orientation));Wg(this.ca[a].Yb,U.N.CSS.no);Wg(this.ca[a].Yb,ek.Wb(U.N.CSS.no,this.orientation))};f.kn=function(){A(this.ca,function(a,b){this.VE(b)}.bind(this))};
f.o=function(){window.console.log("\n\n\n\n**********UPDATE STULE",this.orientation);if(this.b().parentNode){R(this.b(),U.N.gd);R(this.b(),ek.Wb(U.N.gd,this.orientation));window.console.log(U.N.gd);A(this.ca,function(a){R(a.md,ek.Wb(U.N.CSS.md,this.orientation));R(a.Yb,ek.Wb(U.N.CSS.Yb,this.orientation));R(a.Ih,ek.Wb(U.N.CSS.Ih,this.orientation))}.bind(this));switch(this.orientation){case "TOP":Es(this);break;case "BOTTOM":this.dZ();break;case "RIGHT":Fs(this)}if(0<this.ca.length){var a=ui(this.ca[0].md);
0<a.width&&0<a.height&&(this.bg=a)}}};function Fs(a){A(a.ca,function(a){this.b().parentNode&&Rk.zb(a.md,{height:(100/this.ca.length).toString()+"%"})}.bind(a))}function Es(a){var b;A(a.ca,function(a,d){this.b().parentNode&&(b=100/this.ca.length,Rk.zb(a.md,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function Gs(a){A(a.ca,function(a){w(a,function(c,d){bd(c);c.i?c.k():c.k&&c.k();delete c;delete a[d]});wb(a);delete a});Nb(a.ca)}
f.i=function(){U.N.g.i.call(this);A(this.Hu(),function(a){bd(a)}.bind(this));Gs(this);delete this.ca;bd(this.zn);this.zn.k();delete this.zn;delete this.kh;delete this.Lp;delete this.aZ;delete this.orientation};h("nrg.ui.Tabs.ORIENTATIONS",U.N.Jw);h("nrg.ui.Tabs.DEFAULT_ORIENTATION",U.N.VB);h("nrg.ui.Tabs.ID_PREFIX",U.N.ID_PREFIX);h("nrg.ui.Tabs.CSS_SUFFIX",U.N.CSS_SUFFIX);h("nrg.ui.Tabs.TabItemCollection",ys);h("nrg.ui.Tabs.prototype.tabSize",U.N.prototype.bg);h("nrg.ui.Tabs.prototype.render",U.N.prototype.p);
h("nrg.ui.Tabs.prototype.getTabCount",U.N.prototype.kP);h("nrg.ui.Tabs.prototype.getLastActiveTab",U.N.prototype.yO);h("nrg.ui.Tabs.prototype.getPreviousActiveTab",U.N.prototype.YO);h("nrg.ui.Tabs.prototype.getTabElements",U.N.prototype.Hu);h("nrg.ui.Tabs.prototype.getTabPages",U.N.prototype.Iu);h("nrg.ui.Tabs.prototype.getTabIcons",U.N.prototype.lP);h("nrg.ui.Tabs.prototype.addTabs",U.N.prototype.fM);h("nrg.ui.Tabs.prototype.reset",U.N.prototype.reset);h("nrg.ui.Tabs.prototype.tabExists",U.N.prototype.nB);
h("nrg.ui.Tabs.prototype.addTab",U.N.prototype.Qo);h("nrg.ui.Tabs.prototype.setTabPageContents",U.N.prototype.XI);h("nrg.ui.Tabs.prototype.setActive",U.N.prototype.setActive);h("nrg.ui.Tabs.prototype.deactivate",U.N.prototype.VE);h("nrg.ui.Tabs.prototype.deactivateAll",U.N.prototype.kn);h("nrg.ui.Tabs.prototype.updateStyle",U.N.prototype.o);h("nrg.ui.Tabs.prototype.disposeInternal",U.N.prototype.i);U.Mb=function(a){U.N.call(this,a)};k(U.Mb,U.N);h("nrg.ui.ZipTabs",U.Mb);U.Mb.OB=4;U.Mb.gq=4;U.Mb.ID_PREFIX="nrg.ui.ZipTabs";f=U.Mb.prototype;f.p=function(a){U.Mb.g.p.call(this,a);R(this.b(),ek.Wb(U.Mb.gd,this.orientation));this.Pd=new U.qa(this.b(),this.orientation);Hs(this)};f.zk=function(a){this.Pd.zk(a);this.o()};f.ja=function(){return this.Pd};
function Hs(a){C(a.Pd,"resize",function(a){this.Tj();if(null!=this.bg){switch(this.orientation){case "BOTTOM":case "TOP":Math.abs(this.bg.height-this.F.height)<=U.Mb.OB?this.kn():this.setActive(this.kh);break;case "LEFT":case "RIGHT":Math.abs(this.bg.width-this.F.width)<=U.Mb.gq?this.kn():this.setActive(this.kh)}this.dispatchEvent({type:"resize",size:a.size,Lg:a.Lg})}}.bind(a))}
f.bd=function(a,b,c){this.o();a?(this.setActive(b||0),this.Pd.yh(this.orientation,"MAX",null,c)):(this.kn(),this.Pd.yh(this.orientation,"MIN",null,c))};f.o=function(){U.Mb.g.o.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.bg&&this.Pd.LI(this.bg.height);break;case "LEFT":case "RIGHT":null!=this.bg&&this.Pd.NI(this.bg.width)}this.Pd.update()};
f.Qo=function(a){U.Mb.g.Qo.call(this,a);1==this.Hu().length&&this.o();A(this.Hu(),function(a){C(a,"click",function(){if(null!=this.bg)switch(this.o(),this.Tj(),this.orientation){case "BOTTOM":Math.abs(this.F.height-this.bg.height)<=U.Mb.gq?(this.setActive(this.kh),this.Pd.yh("BOTTOM","MAX",void 0)):this.kh==this.Lp&&this.Pd.yh("BOTTOM","MIN",void 0);break;case "TOP":Math.abs(this.F.height-this.bg.height)<=U.Mb.gq?(this.setActive(this.kh),this.Pd.yh("TOP","MAX",void 0)):this.kh==this.Lp&&this.Pd.yh("TOP",
"MIN",void 0);break;case "RIGHT":null!=this.bg&&(Math.abs(this.F.width-this.bg.width)<=U.Mb.gq?(this.setActive(this.kh),this.Pd.yh("RIGHT","MAX",void 0)):this.kh==this.Lp&&this.Pd.yh("RIGHT","MIN",void 0))}}.bind(this))}.bind(this));this.kn();this.o()};f.i=function(){U.Mb.g.i.call(this);bd(this.Pd);this.Pd.k();delete this.Pd};h("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",U.Mb.OB);h("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",U.Mb.gq);h("nrg.ui.ZipTabs.EventType",{NU:"ea"});h("nrg.ui.ZipTabs.ID_PREFIX",U.Mb.ID_PREFIX);
h("nrg.ui.ZipTabs.prototype.render",U.Mb.prototype.p);h("nrg.ui.ZipTabs.prototype.setBoundaryElement",U.Mb.prototype.zk);h("nrg.ui.ZipTabs.prototype.getResizable",U.Mb.prototype.ja);h("nrg.ui.ZipTabs.prototype.setExpanded",U.Mb.prototype.bd);h("nrg.ui.ZipTabs.prototype.updateStyle",U.Mb.prototype.o);h("nrg.ui.ZipTabs.prototype.addTab",U.Mb.prototype.Qo);h("nrg.ui.ZipTabs.prototype.disposeInternal",U.Mb.prototype.i);/*
 Copyright 2014 Washington Universityf
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
V.a.la=function(){U.S.call(this);this.re=V.a.la.ModalStates.lo;window.console.log("currState",this.re)};k(V.a.la,U.S);h("xiv.ui.Modal",V.a.la);V.a.la.ModalStates={Vg:"fullscreen",Jh:"popup",Bw:"fullscreen-popup",Gj:"windowed",lo:"demo",lK:"demp-fullscreen"};V.a.la.ID_PREFIX="xiv.ui.Modal";V.a.la.CSS_SUFFIX={gt:"background",PU:"columnmenu",PV:"rowmenu",QU:"button",QV:"button",XK:"projecttab",YK:"projecttab-bounds",ZK:"projecttab-dragger",$K:"projecttab-dragger-handle",MB:"addsubjects"};
V.a.la.RM=function(){var a={};w(this.bK,function(b,c){a[c]=V.a.la.ID_PREFIX+"."+eb(c)+"Button"});var b=Wk.CE(qb(a)),c={};w(a,function(a,e){c[e]=b[a];var g=ek.Wb(V.a.la.jo,e.toLowerCase()+"-button");b[a].className=g});return c};f=V.a.la.prototype;f.bK={CLOSE:"Close XNAT Image Viewer.",FULLSCREEN:"Enter full-screen mode.",POPUP:"Popup to new window.",WINDOWED:"Exit full-screen mode."};f.Er=29;f.qw=29;f.qv=320;f.rv=320;f.zP=function(){return this.ob};f.qP=function(){return this.sa};f.$O=function(){return this.jd};
f.WO=function(){return this.ra.Jh};f.aO=function(){return this.ra.jq};f.rO=function(){return this.ra.Vg};f.p=function(a){V.a.la.g.p.call(this,a);this.WG();this.ob.iz(null,!1);this.dd(this.re)};
f.dd=function(a){null!=this.re&&(this.Kv=this.re);this.re=a;null!=this.Kv&&Wg(this.b(),ek.Wb(this.constructor.gd,this.Kv));R(this.b(),ek.Wb(this.constructor.gd,this.re));this.re==V.a.la.ModalStates.lo?(this.ra.Vg.style.visibility="visible",this.ra.Gj.style.visibility="hidden"):this.re==V.a.la.ModalStates.Gj?(this.ra.Vg.style.visibility="visible",this.ra.Gj.style.visibility="hidden"):this.re==V.a.la.ModalStates.Jh?(this.ra.Jh.style.visibility="hidden",this.ra.jq.style.visibility="hidden",this.ra.Vg.style.visibility=
"visible",this.ra.Gj.style.visibility="hidden"):this.re==V.a.la.ModalStates.Bw?(this.ra.Jh.style.visibility="hidden",this.ra.Vg.style.visibility="hidden",this.ra.Gj.style.visibility="visible"):this.re==V.a.la.ModalStates.Vg&&(this.ra.Jh.style.visibility="visible",this.ra.Vg.style.visibility="hidden",this.ra.Gj.style.visibility="visible");this.o()};f.mp=function(){return this.re};f.Ml=function(){this.sa.loop(function(a){a.setActive(!1);this.ob.loop(function(b){-1<b.hk().indexOf(a.Lh)&&a.setActive(!0)})}.bind(this))};
f.ZD=function(){Is(this);this.mf=null!=this.mf?this.mf:[];this.me=null!=this.me?this.me:new Ok;Js(this);Ks(this);C(this.me,"end",this.DR.bind(this));A(this.mf,function(a){this.me.add(a)}.bind(this));this.me.play();this.Ml()};f.DR=function(){A(this.mf,function(a){this.me.remove(a);bd(a);a.ah();a.k()}.bind(this));Nb(this.mf);this.o();Ls(this)};function Ls(a){a.ob.loop(function(a){0==a.b().style.opacity&&T.nr(a.b(),300)})}
function Js(a){var b=null;a.ob.loop(function(a,d,e){b=a.b();this.mf.push(new Dk(b,[b.offsetLeft,b.offsetTop],[this.ab.Rc.Ki[d][e],this.ab.Rc.sg[d][e]],300,Sk))}.bind(a))}function Ks(a){var b=null;a.ob.loop(function(a,d,e){b=a.b();this.mf.push(new Ek(b,[b.offsetWidth,b.offsetHeight],[this.ab.Rc.Mm[d][e],this.ab.Rc.mq[d][e]],300,Sk))}.bind(a))}
function Is(a){a.ab=null!=a.ab?a.ab:{};a.Tj();a.ab.Ps={};a.ab.Ps.Mm=Math.round(ui(a.jd.b()).width);a.ab.Ps.mq=Math.round(a.F.height-2*a.qw);a.ab.Ps.sg=Math.round(a.qw);Ms(a);Ns(a)}function Ms(a){a.ab.Rc={};a.ab.Rc.Mm=a.ob.ur();a.ab.Rc.mq=a.ob.ur();a.ob.loop(function(a,c,d,e,g){this.ab.Rc.Mm[c][d]=Math.round((this.F.width-this.ab.Ps.Mm-this.Er)/g-this.Er);this.ab.Rc.mq[c][d]=Math.round((this.F.height-(e+1)*this.Er)/e)}.bind(a))}
function Ns(a){a.ab.Rc.Ki=a.ob.ur();a.ab.Rc.sg=a.ob.ur();a.ab.Rc.nL=a.ab.Ps.Mm+a.qw;var b=0;a.ob.loop(function(a,d,e){b=this.ab.Rc.nL+e*(this.ab.Rc.Mm[d][e]+this.qw);this.ab.Rc.Ki[d][e]=b;this.ab.Rc.sg[d][e]=d*(this.ab.Rc.mq[d][e]+this.Er);window.console.log();this.ab.Rc.sg[d][e]+=this.Er}.bind(a))}f.o=function(){Is(this);this.jd&&this.jd.o();Os(this);this.Ml();this.sa.o();this.sa.Pe()};
function Os(a){a.ob&&a.ob.loop(function(a,c,d){Rk.zb(a.b(),{height:this.ab.Rc.mq[c][d],width:this.ab.Rc.Mm[c][d],left:this.ab.Rc.Ki[c][d],top:this.ab.Rc.sg[c][d]});a.o()}.bind(a))}
f.WG=function(){var a=wh("div");a.id=this.constructor.ID_PREFIX+"_Background_"+r();a.className=V.a.la.CSS.gt;this.b().appendChild(a);this.Lw=wh("div");Ah(this.b(),this.Lw);R(this.Lw,V.a.la.CSS.YK);this.jd=new U.Mb("RIGHT");this.jd.p(this.b());R(this.jd.b(),V.a.la.CSS.XK);this.sa=new V.a.G;this.sa.eB(!0);this.sa.TA(this.b());var b;b=b||C;b(this.sa,"w",this.fS.bind(this));b(this.sa,"x",this.eS.bind(this));b(this.sa,"ca",this.YR.bind(this));b(this.sa,"aa",this.aS.bind(this));b(this.sa,"ba",this.$R.bind(this));
b(this.sa,"da",this.cS.bind(this));this.sa.p(this.jd.b());this.jd.XI("Project Browser",this.sa);this.jd.zk(this.Lw);a=this.jd.ja().Ne("RIGHT");R(a,V.a.la.CSS.ZK);this.jd.ja().lp("RIGHT").QI(5);Ah(a,wh("div",{id:V.a.Q.ID_PREFIX+"_DraggerHandle_"+r(),"class":V.a.la.CSS.$K}));C(this.jd,"resize",this.o.bind(this));C(this.jd,"resize_end",this.o.bind(this));this.Rj=wh("div",{id:V.a.la.ID_PREFIX+"_addSubjects_"+r(),"class":V.a.la.CSS.MB},"+ Load all subjects in project");this.jd.Iu()[0].appendChild(this.Rj);
Rk.dm(this.Rj,V.a.la.CSS.MB+"-hovered");a=this.jd.Iu()[0];b=Dh(a)[0];ui(a);ui(b);ui(this.Rj);b.style.height="calc(100% - 70px)";C(this.Rj,"click",this.iR.bind(this));this.ob=new V.a.ga;this.ob.$I(this.b());var c;c=c||C;c(this.ob,"V",this.xA.bind(this));c(this.ob,"W",this.wA.bind(this));c(this.ob,"Y",this.Vl.bind(this));C(this.ob,"X",this.sS.bind(this));Ps(this)};
function Ps(a){a.ra=V.a.la.RM();w(a.ra,function(a){Ah(this.b(),a)}.bind(a));Qs(a);a.ra.jq.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.ra.Vg.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.ra.Gj.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.ra.Jh.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.iR=function(){this.dispatchEvent({type:Rs});T.un(this.Rj,150,function(){Ss(this);var a=this.jd.Iu()[0];Dh(a)[0].setAttribute("style","");this.sa.Pe()}.bind(this))};function Ss(a){null!=a.Rj&&(S(a.Rj),bd(a.Rj),delete a.Rj)}f.sS=function(){var a=ph("xiv-ui-thumbnailgallery-thumbnail-dragging");A(a,function(a){S(a)});this.Ml();this.sa.Bh.zl({eY:!0})};f.nR=function(){this.re===V.a.la.ModalStates.Vg&&Ba.zF.yN()};
f.uR=function(){Ba.zF.RY(this.b().parentNode);this.re===V.a.la.ModalStates.Jh?this.dd(V.a.la.ModalStates.Bw):this.dd(V.a.la.ModalStates.Vg)};f.wS=function(){Ba.zF.yN();this.dd(this.Kv)};function Qs(a){var b;b=b||C;b(a.ra.Vg,"click",a.uR.bind(a));b(a.ra.Gj,"click",a.wS.bind(a));b(a.ra.jq,"click",a.nR.bind(a))}f.fS=function(a){this.ob.Ww(a.s.Lh,function(a){a.up()})};f.eS=function(a){this.ob.Ww(a.s.Lh,function(a){a.Ws()})};f.$R=function(a){this.ob.Ju(a.rB).Ws()};f.aS=function(a){this.ob.Ju(a.rB).up()};
f.YR=function(a){this.ob.WF().load(a.s.Lh);this.Ml()};f.cS=function(a){this.ob.Ju(a.dU).load(a.s.Lh);this.Ml()};f.xA=function(){this.Ml()};f.wA=function(){this.Ml()};f.Vl=function(a){null!=a&&null!=a.jM?(a.KH&&A(a.KH,function(a){Rk.zb(a.b(),{opacity:0})}),this.ZD()):this.o();this.sa.tE();this.sa.FD(this.ob.tG())};
f.i=function(){V.a.la.g.i.call(this);wb(this.ab);delete this.ab;U.gF(this.mf);delete this.mf;U.py(this.me);delete this.me;U.qy(this.ra);delete this.ra;null!=this.ob&&(bd(this.ob),this.ob.k(),delete this.ob);bd(this.jd);this.jd.k();delete this.jd;bd(this.sa);this.sa.k();delete this.sa;Ss(this);delete this.re;delete this.Kv};h("xiv.ui.Modal.EventType",V.a.la.$U);h("xiv.ui.Modal.ID_PREFIX",V.a.la.ID_PREFIX);h("xiv.ui.Modal.CSS_SUFFIX",V.a.la.CSS_SUFFIX);h("xiv.ui.Modal.prototype.getViewBoxHandler",V.a.la.prototype.zP);
h("xiv.ui.Modal.prototype.getThumbnailGallery",V.a.la.prototype.qP);h("xiv.ui.Modal.prototype.getProjectTab",V.a.la.prototype.$O);h("xiv.ui.Modal.prototype.getPopupButton",V.a.la.prototype.WO);h("xiv.ui.Modal.prototype.getCloseButton",V.a.la.prototype.aO);h("xiv.ui.Modal.prototype.getFullScreenButton",V.a.la.prototype.rO);h("xiv.ui.Modal.prototype.render",V.a.la.prototype.p);h("xiv.ui.Modal.prototype.setState",V.a.la.prototype.dd);h("xiv.ui.Modal.prototype.getState",V.a.la.prototype.mp);
h("xiv.ui.Modal.prototype.highlightInUseThumbnails",V.a.la.prototype.Ml);h("xiv.ui.Modal.prototype.animateModal",V.a.la.prototype.ZD);h("xiv.ui.Modal.prototype.updateStyle",V.a.la.prototype.o);h("xiv.ui.Modal.prototype.initSubComponents",V.a.la.prototype.WG);h("xiv.ui.Modal.prototype.disposeInternal",V.a.la.prototype.i);window["xiv.ui.Modal"]=V.a.la;window["xiv.ui.Modal.ModalStates"]=V.a.la.ModalStates;P.d.ia=function(a,b,c){P.d.Vc.call(this);this.Yv(a);null!=c&&null!=b&&(this.lr=c,this.yk=P.ma.Xy(this.lr,b.URI,"experiments"),this.ma=new P.ma(this.yk));this.Or=b;this.Zf={}};k(P.d.ia,P.d.Vc);h("gxnat.vis.AjaxViewableTree",P.d.ia);P.d.ia.MC={ID:"Scan ID",Name:"Name",type:"Scan Type"};P.d.ia.EC={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"};P.d.ia.YB={label:"Session"};P.d.ia.bC="Size";
P.d.ia.rH=function(a,b,c){P.nk(a,function(a){ia(a);A(a,function(a){b(a)});c&&c()})};f=P.d.ia.prototype;f.dk=null;f.Dl=!1;f.BI=function(a,b){null==this.dk&&(this.dk={});this.dk[a]=b};f.rG=function(){var a=0;w(this.dk,function(b,c){a+=this.TF(c)}.bind(this));return a};f.TF=function(a){return parseInt(this.dk[a][P.d.ia.bC],10)};f.mO=function(){return this.dk};f.oO=function(){return this.Dl};f.CI=function(a){this.Dl=a};f.jO=function(){return this.lr};f.aP=function(){return this.yk};f.fP=function(){return this.Zf};
f.VI=function(a){this.Zf=a};f.Pp=function(){w(P.d.ia.MC,function(a,b){null!=this.Or[b]&&(this.Zf[a]=this.Or[b])}.bind(this))};f.ys=function(a){P.d.ia.g.ys.call(this,a)};f.As=function(a){P.d.ia.g.As.call(this,a);w(P.d.ia.EC,function(a,c){null!=this.Tp[c]&&(this.Zf[a]=this.Tp[c])}.bind(this))};f.us=function(a){P.d.ia.g.us.call(this,a);w(P.d.ia.YB,function(a,c){null!=this.fp[c]&&(this.Zf[a]=this.fp[c])}.bind(this))};f.pO=function(){return this.qr};
f.nv=function(a){a=a[this.pr];if(!Ga(a,"/"))return this.yk+"!"+a};f.Fl=function(a){if(this.Dl)a();else{var b=0,c=0,d="",e;P.nk(this.yk+this.Au,function(g){for(c=g.length;b<c;b++)if(e=g[b],d=this.nv(e))this.BI(d,e),this.hl(d,this.hp);a();this.Dl=!0}.bind(this))}};f.hp=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.xn=function(){};P.d.ia.hk=function(a,b,c,d){var e=new P.ma(a);P.d.ia.rH(a+"/"+b.prototype.qr,function(a){new b(a,e.xk("experiments"),c)},d)};
P.d.ia.prototype.k=function(){P.d.ia.g.k.call(this);null!=this.dk&&(wb(this.dk),delete this.dk);delete this.Dl;wb(this.Zf);delete this.Zf;null!=this.Or&&(wb(this.Or),delete this.Or);null!=this.ma&&(this.ma.k(),delete this.ma);delete this.lr;delete this.yk};h("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",P.d.ia.MC);h("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",P.d.ia.EC);h("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",P.d.ia.YB);h("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY",P.d.ia.bC);
h("gxnat.vis.AjaxViewableTree.loopFolderContents",P.d.ia.rH);h("gxnat.vis.AjaxViewableTree.getViewableTrees",P.d.ia.hk);h("gxnat.vis.AjaxViewableTree.prototype.filesGotten",P.d.ia.prototype.Dl);h("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",P.d.ia.prototype.BI);h("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",P.d.ia.prototype.rG);h("gxnat.vis.AjaxViewableTree.prototype.getFileSize",P.d.ia.prototype.TF);h("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",P.d.ia.prototype.mO);
h("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",P.d.ia.prototype.oO);h("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",P.d.ia.prototype.CI);h("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",P.d.ia.prototype.jO);h("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",P.d.ia.prototype.aP);h("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",P.d.ia.prototype.fP);h("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",P.d.ia.prototype.VI);
h("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",P.d.ia.prototype.Pp);h("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",P.d.ia.prototype.ys);h("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",P.d.ia.prototype.As);h("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",P.d.ia.prototype.us);h("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",P.d.ia.prototype.pO);h("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",P.d.ia.prototype.nv);
h("gxnat.vis.AjaxViewableTree.prototype.getFileList",P.d.ia.prototype.Fl);h("gxnat.vis.AjaxViewableTree.prototype.fileFilter",P.d.ia.prototype.hp);h("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",P.d.ia.prototype.xn);h("gxnat.vis.AjaxViewableTree.prototype.dispose",P.d.ia.prototype.k);P.d.lc=function(a,b,c){P.d.ia.call(this,"Scans",a,b);this.Zf["Total Frames"]=0;c&&c(this)};k(P.d.lc,P.d.ia);h("gxnat.vis.Scan",P.d.lc);P.d.lc.tx="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");P.d.lc.iG=function(a){switch(a){case "Sag":return"Sagittal";case "Cor":return"Coronal";case "Tra":return"Transverse"}};f=P.d.lc.prototype;f.qr="scans";f.Au="/files";f.pr="URI";
f.Pp=function(){P.d.lc.g.Pp.call(this);null!=this.Un["parameters/orientation"]&&(this.Zf.Orientation=this.constructor.iG(this.Un["parameters/orientation"]),this.orientation=this.Zf.Orientation);null!=this.Un["parameters/acqType"]&&(this.Zf["Acq. Type"]=this.Un["parameters/acqType"])};f.Fl=function(a){this.Dl?a():P.nk(this.ma.originalUrl,function(b){this.Un=b.items[0].data_fields;this.Pp();P.d.lc.g.Fl.call(this,function(){this.xn();a()}.bind(this))}.bind(this))};
f.hp=function(a){a=P.d.lc.g.hp.call(this,a);if(null!=a){for(var b=0,c=P.d.lc.tx.length;b<c;b++)if(Ha(a,"."+P.d.lc.tx[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};f.hl=function(a){this.Yv("Scans");if(0==this.De.length){var b=new P.d.qg;b.xh("scan");b.Yv("scans");this.De.push(b)}0==this.De[0].Zi().length&&this.De[0].JD(new P.d.Ff);this.De[0].Zi()[0].hl(a,this.hp);this.Zf["Total Frames"]=this.De[0].Zi()[0].Yi().length};
f.nv=function(a){return P.ma.Xy(this.lr,a[this.pr],"experiments")};f.xn=function(a){if(this.De&&this.De[0]){var b=this.De[0].Zi()[0].Yi().sort(P.uv);this.Cs(b[Math.floor(b.length/2)]+P.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};f.k=function(){P.d.lc.g.k.call(this);null!=this.Un&&wb(this.Un);delete this.Un};h("gxnat.vis.Scan.acceptableFileTypes",P.d.lc.tx);h("gxnat.vis.Scan.getOrientationFromAbbreviation",P.d.lc.iG);h("gxnat.vis.Scan.prototype.folderQuerySuffix",P.d.lc.prototype.qr);
h("gxnat.vis.Scan.prototype.fileQuerySuffix",P.d.lc.prototype.Au);h("gxnat.vis.Scan.prototype.fileContentsKey",P.d.lc.prototype.pr);h("gxnat.vis.Scan.prototype.setViewableMetadata",P.d.lc.prototype.Pp);h("gxnat.vis.Scan.prototype.getFileList",P.d.lc.prototype.Fl);h("gxnat.vis.Scan.prototype.fileFilter",P.d.lc.prototype.hp);h("gxnat.vis.Scan.prototype.addFiles",P.d.lc.prototype.hl);h("gxnat.vis.Scan.prototype.makeFileUrl",P.d.lc.prototype.nv);h("gxnat.vis.Scan.prototype.getThumbnailImage",P.d.lc.prototype.xn);
h("gxnat.vis.Scan.prototype.dispose",P.d.lc.prototype.k);P.u.Hw=function(a,b,c,d){P.u.Node.call(this);this.url=a;this.document=b;this.files=d};k(P.u.Hw,P.u.Node);h("gxnat.slicerNode.Mrml",P.u.Hw);P.u.Aw=function(a,b){P.u.Node.call(this);this.file=a;this.Yf=b};k(P.u.Aw,P.u.Node);h("gxnat.slicerNode.Displayable",P.u.Aw);function Ts(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};P.u.yw=function(a,b,c){P.u.Node.call(this);this.position=a;this.ow=b;this.focus=c};k(P.u.yw,P.u.Node);h("gxnat.slicerNode.Camera",P.u.yw);P.u.Hb=function(){P.u.Node.call(this)};k(P.u.Hb,P.u.Node);h("gxnat.slicerNode.Layout",P.u.Hb);P.R={};h("gxnat.slicerUtils",P.R);P.R.cC="/scripts/viewer/xiv/vis/GenericColorTable.txt";P.R.pF=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ha(a[c],".mrml")&&b.push(a[c]);return b};P.R.Ry=function(a,b){P.get(a,function(a){b(new Ts(a))},"text")};P.R.gG=function(a,b,c){a=ia(a)?a:[a];var d=P.R.pF(a),e=[],g=0;A(d,function(b){P.R.Ry(b,function(m){g++;e.push(new P.u.Hw(b,m,0,a));g==d.length&&c(e)})})};
P.R.LE=function(a,b,c){P.R.IF(a,b,function(b){c(new P.u.vt(a,P.R.MF(a),P.R.JF(a),P.R.bG(a),b,P.R.vG(a),P.R.fG(a),null))})};P.R.kG=function(a,b){var c=[],d=[],e=0;A(a,function(a){c=P.R.lG(a.document);A(c,function(l){P.R.LE(l,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};P.R.SF=function(a,b){a=ka(a)?P.R.Ry(a):a;var c=[];A(a.getElementsByTagName(b),function(a){c.push(a)});return c};P.R.lG=function(a){return P.R.SF(a,"SceneView")};
P.R.MF=function(a){return new P.u.yw(P.u.Gk(a.getElementsByTagName("Camera")[0].getAttribute("position")),P.u.Gk(a.getElementsByTagName("Camera")[0].getAttribute("viewUp")),P.u.Gk(a.getElementsByTagName("Camera")[0].getAttribute("focalPoint")))};P.R.oG=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,g=d.length;e<g;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
P.R.JF=function(a){return new P.u.hq(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};P.R.bG=function(a){return new P.u.Hb(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
P.R.Dp=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",g="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),g=decodeURIComponent(a.toLowerCase()),-1<g.indexOf("%")&&(g=decodeURIComponent(g)),e.indexOf(g)==e.length-g.length)return b[c].replace(/%/g,"%25")};P.R.nO=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Za(b,"!",Tk(c),"/",Tk(a))};
P.R.IF=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var g=[],l=[],m=0,q,p,t="rgb(255,0,0)",s="",u="",v="",D="",B=0,I,G;0==a.length?c(null):(A(a,function(a){l.push(P.R.Dp(a.getAttribute("fileName"),b.files))}),0==l.length?c(null):A(l,function(a){P.get(a,function(a){m++;A(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(q=a.split(/,/),1!=q.length)){p=[parseFloat(q[1]),parseFloat(q[2]),parseFloat(q[3])];
D=q[11];t=[1,0,0];v=u=s="";B=0;len=e.length;for(I;B<len;B++)if(I=e[B],s=I.getAttribute("id"),s===q[0].replace("_","")){v=s;u=I.getAttribute("displayNodeRef");break}len=d.length;G;for(B=0;B<len;B++)if(G=d[B],s=G.getAttribute("id"),s===u){t=P.u.Gk(G.getAttribute("color")).map(function(a){return parseFloat(a)});break}g.push(new P.u.fq(p,t,q,v,u,D))}});m==l.length&&c(g)},"text")}))};
P.R.Ky=function(a,b,c){var d=[],e=a.getElementsByTagName(c),g=null,l=0,m=e.length;A(a.getElementsByTagName(b),function(a){for(l=0;l<m;l++)if(g=e[l],g.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new P.u.Aw(g.getAttribute("fileName"),a));break}});return d};P.R.kO=function(){return null};
P.R.vG=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=P.R.Ky(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],g=[],l="";A(c,function(a){l=a.Yf.getAttribute("displayNodeRef");1<l.indexOf("LabelMap")?(A(d,function(b){b.getAttribute("id")==l&&(a.hr=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.Ux=serverRoot+P.R.cC:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):g.push(a)});var m="";A(e,function(a){m=a.Yf.getAttribute("attributes").split(";");A(m,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],A(g,function(b){b.Yf.getAttribute("id")==refVol&&(b.ej=a)}.bind(this)))}.bind(this))});A(g,function(c){c.ui=new P.u.Tk(a,c.Yf,b);c.ej&&(c.ui.ej=c.ej,delete c.ej)});return g};P.R.fG=function(a){var b=P.R.Ky(a,"Model","ModelStorage");A(b,function(b){b.ui=new P.u.qt(a,b.Yf)});return b};h("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",P.R.cC);
h("gxnat.slicerUtils.extractMrmls",P.R.pF);h("gxnat.slicerUtils.getMrmlAsXml",P.R.Ry);h("gxnat.slicerUtils.getMrmlNodes",P.R.gG);h("gxnat.slicerUtils.createSceneViewProperties",P.R.LE);h("gxnat.slicerUtils.getSceneViewNodes",P.R.kG);h("gxnat.slicerUtils.getElementsFromMrml",P.R.SF);h("gxnat.slicerUtils.getSceneViewsFromMrml",P.R.lG);h("gxnat.slicerUtils.getCameraFromSceneView",P.R.MF);h("gxnat.slicerUtils.getThumbnail",P.R.oG);h("gxnat.slicerUtils.mrmlColorToRgb",P.R.tv);
h("gxnat.slicerUtils.getBackgroundColorFromSceneView",P.R.JF);h("gxnat.slicerUtils.getLayoutFromSceneView",P.R.bG);h("gxnat.slicerUtils.matchFileToSet",P.R.Dp);h("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",P.R.nO);h("gxnat.slicerUtils.getAnnotations",P.R.IF);h("gxnat.slicerUtils.getDisplayables",P.R.Ky);h("gxnat.slicerUtils.getFibers",P.R.kO);h("gxnat.slicerUtils.getVolumes",P.R.vG);h("gxnat.slicerUtils.getMeshes",P.R.fG);P.d.Df=function(a,b,c){this.sk=[];P.d.ia.call(this,"Slicer Scenes",a,b);c&&c(this)};k(P.d.Df,P.d.ia);h("gxnat.vis.Slicer",P.d.Df);P.d.Df.yJ=["jpeg","jpg","png","gif"];f=P.d.Df.prototype;f.qr="resources/Slicer/files";f.Au="?listContents=true";f.pr="File Name";f.Fl=function(a){this.Dl?Us(this,a):P.d.lc.g.Fl.call(this,function(){this.xn(function(){this.Pp();Us(this,a)}.bind(this))}.bind(this))};function Us(a,b){P.R.gG(a.sk,0,function(a){P.R.kG(a,function(d){this.zE(d,a,b)}.bind(this))}.bind(a))}
f.zE=function(a,b,c){this.YQ=b;this.sT=a;var d,e,g,l;A(this.sT,function(a){d=[a.Jk||[],a.Mz||[],a.yy||[]];e=[];A(d,function(a){A(a,function(a){g=P.R.Dp(Tk(a.file),this.sk);a.ui instanceof P.u.Tk&&a.ui.ej&&(a.ui.labelMapFile=P.R.Dp(a.ui.ej.file,this.sk),null!=a.ui.ej.Ux&&null==P.R.Dp(a.ui.ej.Ux,this.sk)&&(a.ui.colorTableFile=a.ui.ej.Ux));e.push(new P.d.Ff(g,a.ui))}.bind(this))}.bind(this));l=new P.d.qg(e);l.Cs(P.R.Dp(P.R.oG(a.element,this.YQ[0].document),this.sk));l.xh(a.element.getAttribute("name"));
l.YA(a);this.De.push(l)}.bind(this));c&&c(this)};
f.xn=function(a){var b="",c=0,d=this.sk.length;for(this.thumbnailFiles=[];c<d;c++)b=ek.Du(this.sk[c]),-1!=P.d.Df.yJ.indexOf(b)&&this.thumbnailFiles.push(this.sk[c]);window.console.log("Thumbnail files",this.thumbnailFiles);A(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=ek.Uq(ek.dirname(this.thumbnailFiles[c]))){this.Cs(this.thumbnailFiles[c]);break}window.console.log("Thumbnail files2",
this.thumbnailFiles);a&&a(this)};f.hl=function(a){ia(a)||(a=[a]);A(a,function(a){this.sk.push(a)}.bind(this))};h("gxnat.vis.Slicer.thumbnailExtensions",P.d.Df.yJ);h("gxnat.vis.Slicer.prototype.folderQuerySuffix",P.d.Df.prototype.qr);h("gxnat.vis.Slicer.prototype.fileQuerySuffix",P.d.Df.prototype.Au);h("gxnat.vis.Slicer.prototype.fileContentsKey",P.d.Df.prototype.pr);h("gxnat.vis.Slicer.prototype.getFileList",P.d.Df.prototype.Fl);h("gxnat.vis.Slicer.prototype.convertToViewableGroups",P.d.Df.prototype.zE);
h("gxnat.vis.Slicer.prototype.getThumbnailImage",P.d.Df.prototype.xn);h("gxnat.vis.Slicer.prototype.addFiles",P.d.Df.prototype.hl);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function V(a,b,c,d){Cc.call(this);V.kH();V.VD();this.At={j:P.d.lc,QT:P.d.Df};this.re=null!=a?a:V.States.lo;this.VQ=b;this.uI=d;this.Nv=P.ma.jG(d);this.Ti=this.Ti?this.Ti:[];a="/"!==c[0]?"/"+c:c;-1===this.Ti.indexOf(this.Nv+a)&&this.Ti.push(-1===a.indexOf(this.Nv)?this.Nv+a:a);1==this.Ti.length&&(this.rf=new P.ma(this.Ti[0]))}k(V,Cc);h("xiv",V);var Rs="fa";V.ModalStates={Vg:"fullscreen",Jh:"popup",Bw:"fullscreen-popup",Gj:"windowed",lo:"demo",lK:"demp-fullscreen"};V.States={lo:"demo",wV:"live"};
V.kH=function(){Qf.IMA=[Rf,null]};V.VD=function(){document.body.style.overflow="hidden"};V.mT=function(){document.body.style.overflow="visible"};f=V.prototype;f.vw=r();f.XD=300;f.ZG=1E3;f.Vu=!1;f.Xu=!1;f.UI=function(){};f.fE=function(){Vs(this);this.show();if(this.re==V.States.lo){S(this.Kb.ra.Jh);S(this.Kb.ra.jq);var a=Xf(function(){delete a;Ws(this)}.bind(this),this.ZG)}else this.Kb.dd(this.VQ),Xs(this)};f.DT=function(){};
function Vs(a){a.Kb=new V.a.la;a.Kb.FI(serverRoot);C(a.Kb,Rs,a.CR.bind(a));window.onresize=function(){null!=this.Kb&&this.Kb.o()}.bind(a)}f.CR=function(){this.Bf.qH(null,function(a){A(a,function(a){Ys(this,a);this.Kb.sa.Pe()}.bind(this))}.bind(this))};f.show=function(){this.Kb.b().style.opacity=0;this.Kb.p();C(this.Kb.sa.A,"d",this.zA.bind(this));C(this.Kb.ra.Jh,"click",this.TM.bind(this));C(this.Kb.ra.jq,"click",this.k.bind(this));this.Kb.jd.bd(!0,0,this.ZG);T.or(this.Kb.b(),this.XD)};
function Ws(a){var b=a.Kb.sa,c={slicer:(new V.rT.kW).cP(),scan:(new V.rT.jW).cP()},d;w(c,function(a,b){A(a,function(a){d="scan"==b?new this.At.j:new this.At.QT;d.hl(a.files);d.CI(!0);d.VI(a.EY);d.Cs(a.xJ);Zs(this,d,a.kY)}.bind(this))}.bind(a));b.A.sn()}
function Xs(a){var b=a.Kb.sa.A,c=0;a.Kb.sa&&C(a.Kb.sa.A,"n",a.xS.bind(a));a.Bf=new P.n(a.Ti[0]);a.Bf.nH(function(a){var e=Ys(this,a);0==c&&(this.kQ=a,this.VG=b.bd(e[0]));1==c&&(this.Xu=!0,this.lQ=a,this.gz=b.bd(e[1],this.VG));2==c&&(this.Vu=!0,this.Wu=a,this.jQ=b.bd(e[2],this.gz));c++}.bind(a))}function $s(a,b){var c=a.Bf.rr(b),d=a.Bf.KF(b),e=0;w(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}
function Ys(a,b){var c=a.Bf.LF(b),d=$s(a,b);at(a,d,c);return d}function bt(a,b){a.Bf.mH(b.originalUrl,null,function(a){if(b.xk("subjects")==this.rf.xk("subjects")&&this.Xu){var d=this.rf.xk("experiments");this.Wu=this.Bf.kp(d);Pb(a,this.Wu);Sb(a,0,0,this.Wu);this.Xu=!1}A(a,function(a){Ys(this,a)}.bind(this))}.bind(a))}f.zA=function(a){if(null!=a.Yf[this.vw])switch(a=new P.ma(a.Yf[this.vw]),a.Cu()){case "subjects":bt(this,a);break;case "experiments":ct(this,a.originalUrl)}};
f.rp=function(a){T.un(this.Kb.b(),this.XD,a)};f.k=function(){this.rp(this.nN.bind(this))};function ct(a,b){if(null==a.Ez)a.Ez=[];else if(-1<a.Ez.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Bf.rr(a.Bf.kp(b)),c=new P.d.Vc.Nz(c.projects[P.n.Be],c.subjects[P.n.Be],c.experiments[P.n.Be]);dt(a,b,function(){this.Ez.push(b);this.Vu&&(this.Vu=!1,w(this.gz.Af,function(){}.bind(this)))}.bind(a),c)}f.xS=function(a){var b=a.Yf.Hf.eu;a.Yf.Hf.eu=0;a.Yf.Hf.eu=b};
f.TM=function(){var a=open(this.uI+"/scripts/viewer/xiv/popup.html?"+this.Ti[0],"XImgView","width=1200,height=800");a.focus();var b=this.Ti[0];a.onload=function(){a.AY(b,V.ModalStates.Jh,serverRoot)}.bind(this);this.k()};function dt(a,b,c,d){et(a,b,function(a){var b=a.yk;ft(this,a,b,function(a){Zs(this,a)}.bind(this));null!=d&&(this.nd[b].ys(d.PS),this.nd[b].As(d.XT),this.nd[b].us(d.AN))}.bind(a),c)}
function at(a,b,c){var d=a.Kb.sa.A;d.br(b);zippyNodes=d.Ly(b);A(zippyNodes,function(a,b){null==c||null==c[b]||null==a[this.vw]&&(a[this.vw]=c[b])}.bind(a))}function Zs(a,b,c){var d=a.Kb.sa;null!=d&&(null==c&&null!=a.Bf&&(c=$s(a,a.Bf.kp(b.lr))),"Scans"!=b.Vj&&c.push(b.Vj),b.Fl(function(){if(0<b.De.length){var a=d.pl(b,c);if("Scans"!=b.Vj){var g=d.A.Ly(c);0<c.length&&1<g.length&&d.bd(c[c.length-1],g[g.length-2])}d.TA(this.Kb.b());a.UA(b.Wp);a.AB()}}.bind(a)))}
function ft(a,b,c,d){a.nd=a.nd?a.nd:{};null==a.nd[c]&&(a.nd[c]=b,d(b))}f.nN=function(){V.g.k.call(this);V.mT();w(this.nd,function(a,b){a.k();delete this.nd[b]}.bind(this));delete this.nd;this.Bf&&(this.Bf.k(),delete this.Bf);delete this.Ti;delete this.uI;delete this.Nv;delete this.nY;null!=this.rf&&(this.rf.k(),delete this.rf);delete this.Vu;delete this.Xu;delete this.kQ;delete this.lQ;delete this.Wu;delete this.VG;delete this.gz;delete this.jQ;bd(this.Kb);this.Kb.k();S(this.Kb.b());delete this.Kb};
function et(a,b,c,d){var e=pb(a.At),g=0;w(a.At,function(a){P.d.ia.hk(b,a,c,function(){g++;g===e&&null!=d&&d()})})}V.$G=function(){var a=!0,b=gc();window.console.log(fc());var c={Chrome:{Lr:fc(),$r:11},IE:{Lr:cc(),$r:11},Safari:{Lr:dc(),$r:5.1},Opera:{Lr:bc(),$r:12},Firefox:{Lr:$b("Firefox"),$r:4}},d=!1;w(c,function(c){c.Lr&&!d&&1==$a(c.$r,b)&&(V.NR(),a=!1,d=!0)});a&&!V.checkForWebGL()&&(V.tS(),a=!1);return a};
V.NR=function(){var a=new U.Bd;a.qD();a.rD();var b=a.au();R(b,U.Bd.CSS.xC);b.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";a.b().style.position="fixed";a.b().style.height="240px";a.il("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>");a.rj[0].style.top="120px";a.p();a.b().style.opacity=0;T.or(a.b(),400)};
V.tS=function(){var a='<br>It looks like <a style="color: #00FFFF" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">WebGL or Experimental-WebGL</a> is disabled.<br><br>How to enable WebGL in ',b,c=':<br> <a  style="color: #00FFFF" href=';cc()?(b="Internet Explorer",c+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx</a>'):fc()?(b="Chrome",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):
$b("Firefox")?(b="Firefox",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):dc()?(b="Safari",c+='"https://discussions.apple.com/thread/3300585?start=0">https://discussions.apple.com/thread/3300585?start=0</a>'):bc()&&(b="Opera",c+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html</a>');a+=b+c;b=new U.Bd;
b.qD();b.rD();c=b.au();R(c,U.Bd.CSS.xC);c.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";b.il(a);b.rj[0].style.top="120px";b.p();b.b().style.position="fixed";b.b().style.opacity=0;T.or(b.b(),400)};V.checkForWebGL=function(){var a=wh("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};h("xiv.States",V.States);h("xiv.loadCustomExtensions",V.kH);h("xiv.adjustDocumentStyle",V.VD);h("xiv.ModalStates",V.ModalStates);
h("xiv.checkForWebGL",V.checkForWebGL);h("xiv.isCompatible",V.$G);h("xiv.prototype.setServerRoot",V.prototype.UI);h("xiv.prototype.setModalType",V.prototype.DT);h("xiv.prototype.begin",V.prototype.fE);h("xiv.prototype.show",V.prototype.show);h("xiv.prototype.hide",V.prototype.rp);h("xiv.prototype.dispose",V.prototype.k);window["xiv.isCompatible"]=V.$G;window["xiv.checkForWebGL"]=V.checkForWebGL;window["xiv.ModalStates"]=V.ModalStates;V.prototype.setServerRoot=V.prototype.UI;V.prototype.begin=V.prototype.fE;
