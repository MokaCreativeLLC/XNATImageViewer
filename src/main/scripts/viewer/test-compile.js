var f,aa=aa||{},ba=this;function ca(a){return void 0!==a}function da(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ea(){}function fa(a){a.qf=function(){return a.XG?a.XG:a.XG=new a}}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return"array"==ha(a)}function ja(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ka(a){return"string"==typeof a}function la(a){return"boolean"==typeof a}function ma(a){return"number"==typeof a}function na(a){return"function"==ha(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function pa(a){return a[ra]||(a[ra]=++ta)}
var ra="closure_uid_"+(1E9*Math.random()>>>0),ta=0;function ua(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function wa(a,b,c){wa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua:va;return wa.apply(null,arguments)}function xa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function h(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ca(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function k(a,b){function c(){}c.prototype=b.prototype;a.g=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.HX=function(a,c,g){var l=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,l)}};var n=n||{};n.UU=!0;n.Ef=function(a){eval("X.DEV === undefined")||window.console.time(a)};n.cf=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.NL=0;this.lU=function(){return this.NL++}};function za(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Aa=window.YJ;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),g=Math.max(0,16-(c-a)),l=window.setTimeout(function(){b(c+g)},g);a=c+g;return l});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),g=new Uint8Array(d),l=a,m=0;l<c;++l,++m)g[m]=e[l];return d});h("$",Aa);
h("Function.prototype.bind",Function.prototype.bind);h("window.requestAnimationFrame",window.requestAnimationFrame);h("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ba={},Da;function Ea(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ea);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}k(Ea,Error);Ea.prototype.name="CustomError";var Fa={};function Ga(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Ha(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Ja(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ka(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function La(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ma=/(\.\d+)|(\d+)|(\D+)/g;function Na(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ma),d=b.toLowerCase().match(Ma),e=Math.min(c.length,d.length),g=0;g<e;g++){var l=c[g],m=d[g];if(l!=m)return c=parseInt(l,10),!isNaN(c)&&(d=parseInt(m,10),!isNaN(d)&&c-d)?c-d:l<m?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function Oa(a){if(!Pa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Qa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ua,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Va,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Wa,"&#0;"));return a}var Qa=/&/g,Sa=/</g,Ta=/>/g,Ua=/"/g,Va=/'/g,Wa=/\x00/g,Pa=/[\x00&<>"']/;
function Ya(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Za(a){return Array.prototype.join.call(arguments,"")}
function $a(a,b){for(var c=0,d=La(String(a)).split("."),e=La(String(b)).split("."),g=Math.max(d.length,e.length),l=0;0==c&&l<g;l++){var m=d[l]||"",q=e[l]||"",p=/(\d*)(\D*)/g,t=/(\d*)(\D*)/g;do{var s=p.exec(m)||["","",""],u=t.exec(q)||["","",""];if(0==s[0].length&&0==u[0].length)break;c=ab(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||ab(0==s[2].length,0==u[2].length)||ab(s[2],u[2])}while(0==c)}return c}function ab(a,b){return a<b?-1:a>b?1:0}
var bb=2147483648*Math.random()|0;function r(){return"goog_"+bb++}function cb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function db(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function eb(a){var b=ka(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function fb(a,b){b.unshift(a);Ea.call(this,Ja.apply(null,b));b.shift()}k(fb,Ea);fb.prototype.name="AssertionError";function gb(a,b){throw new fb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var hb="closure_listenable_"+(1E6*Math.random()|0);function ib(a){return!(!a||!a[hb])}var kb=0;function lb(a,b,c,d,e){this.Hn=a;this.Mv=null;this.src=b;this.type=c;this.Yq=!!d;this.Qu=e;this.key=++kb;this.Np=this.gu=!1}function mb(a){a.Np=!0;a.Hn=null;a.Mv=null;a.src=null;a.Qu=null};function w(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function nb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function pb(a){var b=0,c;for(c in a)b++;return b}function qb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function rb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function sb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function ub(){var a=vb,b;for(b in a)return!1;return!0}function wb(a){for(var b in a)delete a[b]}function xb(a,b){b in a&&delete a[b]}
function yb(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function zb(a){var b={},c;for(c in a)b[c]=a[c];return b}var Ab="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Ab.length;g++)c=Ab[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function Cb(a){var b=arguments.length;if(1==b&&ia(arguments[0]))return Cb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var Eb=Array.prototype,Fb=Eb.indexOf?function(a,b,c){return Eb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ka(a))return ka(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},A=Eb.forEach?function(a,b,c){Eb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},Gb=Eb.filter?function(a,b,c){return Eb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],
g=0,l=ka(a)?a.split(""):a,m=0;m<d;m++)if(m in l){var q=l[m];b.call(c,q,m,a)&&(e[g++]=q)}return e},Hb=Eb.map?function(a,b,c){return Eb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=ka(a)?a.split(""):a,l=0;l<d;l++)l in g&&(e[l]=b.call(c,g[l],l,a));return e},Ib=Eb.some?function(a,b,c){return Eb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1},Jb=Eb.every?function(a,b,c){return Eb.every.call(a,b,
c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return!1;return!0};function Kb(a){var b;a:{b=Lb;for(var c=a.length,d=ka(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:ka(a)?a.charAt(b):a[b]}function Mb(a,b){return 0<=Fb(a,b)}function Nb(a){if(!ia(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ob(a,b){Mb(a,b)||a.push(b)}
function Pb(a,b){var c=Fb(a,b),d;(d=0<=c)&&Eb.splice.call(a,c,1);return d}function Qb(a){return Eb.concat.apply(Eb,arguments)}function Rb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Sb(a,b,c,d){Eb.splice.apply(a,Tb(arguments,1))}function Tb(a,b,c){return 2>=arguments.length?Eb.slice.call(a,b):Eb.slice.call(a,b,c)};function Ub(a){this.src=a;this.ae={};this.Vs=0}f=Ub.prototype;f.add=function(a,b,c,d,e){var g=a.toString();a=this.ae[g];a||(a=this.ae[g]=[],this.Vs++);var l=Vb(a,b,d,e);-1<l?(b=a[l],c||(b.gu=!1)):(b=new lb(b,this.src,g,!!d,e),b.gu=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.ae))return!1;var e=this.ae[a];b=Vb(e,b,c,d);return-1<b?(mb(e[b]),Eb.splice.call(e,b,1),0==e.length&&(delete this.ae[a],this.Vs--),!0):!1};
function Wb(a,b){var c=b.type;if(!(c in a.ae))return!1;var d=Pb(a.ae[c],b);d&&(mb(b),0==a.ae[c].length&&(delete a.ae[c],a.Vs--));return d}f.wh=function(a){a=a&&a.toString();var b=0,c;for(c in this.ae)if(!a||c==a){for(var d=this.ae[c],e=0;e<d.length;e++)++b,mb(d[e]);delete this.ae[c];this.Vs--}return b};f.xr=function(a,b,c,d){a=this.ae[a.toString()];var e=-1;a&&(e=Vb(a,b,c,d));return-1<e?a[e]:null};
f.Ru=function(a,b){var c=ca(a),d=c?a.toString():"",e=ca(b);return nb(this.ae,function(a){for(var l=0;l<a.length;++l)if(!(c&&a[l].type!=d||e&&a[l].Yq!=b))return!0;return!1})};function Vb(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e];if(!g.Np&&g.Hn==b&&g.Yq==!!c&&g.Qu==d)return e}return-1};var Xb;a:{var Yb=ba.navigator;if(Yb){var Zb=Yb.userAgent;if(Zb){Xb=Zb;break a}}Xb=""}function $b(a){return-1!=Xb.indexOf(a)}function ac(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function bc(){return $b("Opera")||$b("OPR")}function cc(){return $b("Trident")||$b("MSIE")}function dc(){return $b("Safari")&&!$b("Chrome")&&!$b("CriOS")&&!$b("Android")}
function fc(){var a=Xb;if(cc()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if(bc())return a=ac(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=ac(a);return a[2]&&a[2][1]?a[2][1]:""};var gc,hc,ic;function jc(){return ba.navigator||null}var kc=bc(),lc=cc(),mc=$b("Gecko")&&-1==Xb.toLowerCase().indexOf("webkit")&&!($b("Trident")||$b("MSIE")),nc=-1!=Xb.toLowerCase().indexOf("webkit"),oc,pc=jc();oc=pc&&pc.platform||"";gc=-1!=oc.indexOf("Mac");hc=-1!=oc.indexOf("Win");ic=-1!=oc.indexOf("Linux");var qc=!!jc()&&-1!=(jc().appVersion||"").indexOf("X11");function rc(){var a=ba.document;return a?a.documentMode:void 0}
var sc=function(){var a="",b;if(kc&&ba.opera)return a=ba.opera.version,na(a)?a():a;mc?b=/rv\:([^\);]+)(\)|;)/:lc?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:nc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Xb))?a[1]:"");return lc&&(b=rc(),b>parseFloat(a))?String(b):a}(),tc={};function uc(a){return tc[a]||(tc[a]=0<=$a(sc,a))}function vc(a){return lc&&wc>=a}var xc=ba.document,wc=xc&&lc?rc()||("CSS1Compat"==xc.compatMode?parseInt(sc,10):5):void 0;var yc=!lc||vc(9),zc=!lc||vc(9),Ac=lc&&!uc("9");!nc||uc("528");mc&&uc("1.9b")||lc&&uc("8")||kc&&uc("9.5")||nc&&uc("528");mc&&!uc("8")||lc&&uc("9");function Bc(){0!=Cc&&(Ec[pa(this)]=this)}var Cc=0,Ec={};Bc.prototype.ln=!1;Bc.prototype.k=function(){if(!this.ln&&(this.ln=!0,this.i(),0!=Cc)){var a=pa(this);delete Ec[a]}};function Fc(a,b){a.fs||(a.fs=[]);a.fs.push(ca(void 0)?wa(b,void 0):b)}Bc.prototype.i=function(){if(this.fs)for(;this.fs.length;)this.fs.shift()()};function Gc(a){a&&"function"==typeof a.k&&a.k()}function Hc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?Hc.apply(null,d):Gc(d)}};function Ic(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.ti=!1;this.ns=!0}Ic.prototype.i=function(){};Ic.prototype.k=function(){};Ic.prototype.stopPropagation=function(){this.ti=!0};Ic.prototype.preventDefault=function(){this.defaultPrevented=!0;this.ns=!1};function Jc(a){a.preventDefault()};function Kc(a){Kc[" "](a);return a}Kc[" "]=ea;function Lc(a,b){Ic.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.FA=!1;this.Zd=null;a&&this.Ta(a,b)}k(Lc,Ic);var Mc=[1,4,2];f=Lc.prototype;
f.Ta=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(mc){var e;a:{try{Kc(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=nc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=nc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.FA=gc?a.metaKey:a.ctrlKey;this.state=a.state;this.Zd=a;a.defaultPrevented&&this.preventDefault()};function Nc(a){return(yc?0==a.Zd.button:"click"==a.type?!0:!!(a.Zd.button&Mc[0]))&&!(nc&&gc&&a.ctrlKey)}
f.stopPropagation=function(){Lc.g.stopPropagation.call(this);this.Zd.stopPropagation?this.Zd.stopPropagation():this.Zd.cancelBubble=!0};f.preventDefault=function(){Lc.g.preventDefault.call(this);var a=this.Zd;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ac)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.XN=function(){return this.Zd};f.i=function(){};var Oc="closure_lm_"+(1E6*Math.random()|0),Pc={},Qc=0;function C(a,b,c,d,e){if(ia(b)){for(var g=0;g<b.length;g++)C(a,b[g],c,d,e);return null}c=Rc(c);return ib(a)?a.I(b,c,d,e):Sc(a,b,c,!1,d,e)}function Sc(a,b,c,d,e,g){if(!b)throw Error("Invalid event type");var l=!!e,m=Tc(a);m||(a[Oc]=m=new Ub(a));c=m.add(b,c,d,e,g);if(c.Mv)return c;d=Uc();c.Mv=d;d.src=a;d.Hn=c;a.addEventListener?a.addEventListener(b.toString(),d,l):a.attachEvent(Wc(b.toString()),d);Qc++;return c}
function Uc(){var a=Xc,b=zc?function(c){return a.call(b.src,b.Hn,c)}:function(c){c=a.call(b.src,b.Hn,c);if(!c)return c};return b}function Yc(a,b,c,d,e){if(ia(b)){for(var g=0;g<b.length;g++)Yc(a,b[g],c,d,e);return null}c=Rc(c);return ib(a)?a.Az(b,c,d,e):Sc(a,b,c,!0,d,e)}function Zc(a,b,c,d,e){if(ia(b))for(var g=0;g<b.length;g++)Zc(a,b[g],c,d,e);else c=Rc(c),ib(a)?a.gc(b,c,d,e):a&&(a=Tc(a))&&(b=a.xr(b,c,!!d,e))&&$c(b)}
function $c(a){if(ma(a)||!a||a.Np)return!1;var b=a.src;if(ib(b))return Wb(b.eh,a);var c=a.type,d=a.Mv;b.removeEventListener?b.removeEventListener(c,d,a.Yq):b.detachEvent&&b.detachEvent(Wc(c),d);Qc--;(c=Tc(b))?(Wb(c,a),0==c.Vs&&(c.src=null,b[Oc]=null)):mb(a);return!0}function ad(a){if(a)if(ib(a))a.eh&&a.eh.wh(void 0);else if(a=Tc(a)){var b=0,c;for(c in a.ae)for(var d=a.ae[c].concat(),e=0;e<d.length;++e)$c(d[e])&&++b}}
function bd(a,b){if(ib(a))return a.Ru(b,void 0);var c=Tc(a);return!!c&&c.Ru(b,void 0)}function Wc(a){return a in Pc?Pc[a]:Pc[a]="on"+a}function cd(a,b,c,d){var e=1;if(a=Tc(a))if(b=a.ae[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var g=b[a];g&&g.Yq==c&&!g.Np&&(e&=!1!==dd(g,d))}return Boolean(e)}function dd(a,b){var c=a.Hn,d=a.Qu||a.src;a.gu&&$c(a);return c.call(d,b)}
function Xc(a,b){if(a.Np)return!0;if(!zc){var c=b||da("window.event"),d=new Lc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var g=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(l){g=!0}if(g||void 0==c.returnValue)c.returnValue=!0}c=[];for(g=d.currentTarget;g;g=g.parentNode)c.push(g);for(var g=a.type,m=c.length-1;!d.ti&&0<=m;m--)d.currentTarget=c[m],e&=cd(c[m],g,!0,d);for(m=0;!d.ti&&m<c.length;m++)d.currentTarget=c[m],e&=cd(c[m],g,!1,d)}return e}return dd(a,new Lc(b,this))}
function Tc(a){a=a[Oc];return a instanceof Ub?a:null}var ed="__closure_events_fn_"+(1E9*Math.random()>>>0);function Rc(a){return na(a)?a:a[ed]||(a[ed]=function(b){return a.handleEvent(b)})};function fd(){Bc.call(this);this.eh=new Ub(this);this.aM=this;this.Iv=null}k(fd,Bc);fd.prototype[hb]=!0;f=fd.prototype;f.WA=function(a){this.Iv=a};f.addEventListener=function(a,b,c,d){C(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Zc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.Iv;if(c)for(b=[];c;c=c.Iv)b.push(c);var c=this.aM,d=a.type||a;if(ka(a))a=new Ic(a,c);else if(a instanceof Ic)a.target=a.target||c;else{var e=a;a=new Ic(d,c);Bb(a,e)}var e=!0,g;if(b)for(var l=b.length-1;!a.ti&&0<=l;l--)g=a.currentTarget=b[l],e=gd(g,d,!0,a)&&e;a.ti||(g=a.currentTarget=c,e=gd(g,d,!0,a)&&e,a.ti||(e=gd(g,d,!1,a)&&e));if(b)for(l=0;!a.ti&&l<b.length;l++)g=a.currentTarget=b[l],e=gd(g,d,!1,a)&&e;return e};
f.i=function(){fd.g.i.call(this);this.eh&&this.eh.wh(void 0);this.Iv=null};f.I=function(a,b,c,d){return this.eh.add(String(a),b,!1,c,d)};f.Az=function(a,b,c,d){return this.eh.add(String(a),b,!0,c,d)};f.gc=function(a,b,c,d){return this.eh.remove(String(a),b,c,d)};function gd(a,b,c,d){b=a.eh.ae[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,g=0;g<b.length;++g){var l=b[g];if(l&&!l.Np&&l.Yq==c){var m=l.Hn,q=l.Qu||l.src;l.gu&&Wb(a.eh,l);e=!1!==m.call(q,d)&&e}}return e&&!1!=d.ns}
f.xr=function(a,b,c,d){return this.eh.xr(String(a),b,c,d)};f.Ru=function(a,b){return this.eh.Ru(ca(a)?String(a):void 0,b)};function hd(){fd.call(this);this.t="base";this.Fe=window["X.counter"].lU();this.T=!1}k(hd,fd);hd.prototype.__defineGetter__("classname",function(){return this.t});hd.prototype.__defineGetter__("id",function(){return this.Fe});h("X.base",hd);function id(a,b){hd.call(this);this.t="triplets";this.Sh=Infinity;this.Ph=-Infinity;this.Th=Infinity;this.Qh=-Infinity;this.Uh=Infinity;this.Rh=-Infinity;this.Gt=[0,0,0];this.pb=0;this.Xc=new Float32Array(a);null!=b&&(this.Xc=b.Xc.subarray(0,b.Xc.length),this.pb=this.Xc.length,this.Sh=b.Sh,this.Ph=b.Ph,this.Th=b.Th,this.Qh=b.Qh,this.Uh=b.Uh,this.Rh=b.Rh,this.Gt=b.Gt.slice())}k(id,hd);f=id.prototype;
f.add=function(a,b,c){this.Sh=Math.min(this.Sh,a);this.Ph=Math.max(this.Ph,a);this.Th=Math.min(this.Th,b);this.Qh=Math.max(this.Qh,b);this.Uh=Math.min(this.Uh,c);this.Rh=Math.max(this.Rh,c);this.Gt=[(this.Sh+this.Ph)/2,(this.Th+this.Qh)/2,(this.Uh+this.Rh)/2];this.T=!0;this.Xc[this.pb++]=a;this.Xc[this.pb++]=b;this.Xc[this.pb++]=c;return this.pb/3};f.resize=function(){if(this.pb!=this.Xc.length){var a=new Float32Array(this.pb);a.set(this.Xc.subarray(0,this.pb));this.Xc=a}};
f.get=function(a){a*=3;return[this.Xc[a],this.Xc[a+1],this.Xc[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.Xc=new Float32Array(this.Xc.length);this.T=!0};id.prototype.__defineGetter__("count",function(){this.resize();return this.Xc.length/3});id.prototype.__defineGetter__("length",function(){this.resize();return this.Xc.length});h("X.triplets",id);h("X.triplets.prototype.add",id.prototype.add);h("X.triplets.prototype.resize",id.prototype.resize);
h("X.triplets.prototype.get",id.prototype.get);h("X.triplets.prototype.remove",id.prototype.remove);h("X.triplets.prototype.clear",id.prototype.clear);function jd(){hd.call(this);this.t="indexer";this.rx=[];this.If={}}k(jd,hd);jd.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.If||(this.If[b]=this.rx.length,this.rx.push(a));return this.If[b]};jd.prototype.unique=function(){return this.rx};function kd(a){hd.call(this);this.t="file";this.Rt=a;this.T=!0}k(kd,hd);function ld(){this.Mi=this.Ca=null}ld.prototype.__defineSetter__("file",function(a){if(null==a||ia(a)&&0==a.length)this.Ca=null;else{if(ia(a)){if(1==a.length){this.Ca=new kd(a[0]);return}this.Ca=Hb(a,function(a){var c=new F;c.Ca=new kd(a);return c})}else this.Ca=new kd(a);this.Mi=null}});ld.prototype.__defineGetter__("file",function(){return this.Ca?ia(this.Ca)?this.Ca.map(function(a){return a.Ca.Rt}):this.Ca.Rt:""});
ld.prototype.__defineGetter__("filedata",function(){return ia(this.Ca)?this.Ca.map(function(a){return a.Mi}):this.Mi});ld.prototype.__defineSetter__("filedata",function(a){if(null==a||ia(a)&&0==a.length)this.Mi=null;if(ia(a))if(1==a.length)this.Mi=a[0];else{var b=this.Ca.length,c;for(c=0;c<b;c++)this.Ca[c].Mi=a[c]}else this.Mi=a});function md(){return null};function nd(a,b,c){return Math.min(Math.max(a,b),c)};function od(a,b){this.rc={};this.Vb=[];this.Zj=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.ux(a)}f=od.prototype;f.ek=function(){return this.Zj};f.yn=function(){pd(this);for(var a=[],b=0;b<this.Vb.length;b++)a.push(this.rc[this.Vb[b]]);return a};f.wr=function(){pd(this);return this.Vb.concat()};
f.Zx=function(a){for(var b=0;b<this.Vb.length;b++){var c=this.Vb[b];if(qd(this.rc,c)&&this.rc[c]==a)return!0}return!1};f.fp=function(a,b){if(this===a)return!0;if(this.Zj!=a.ek())return!1;var c=b||rd;pd(this);for(var d,e=0;d=this.Vb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function rd(a,b){return a===b}f.Mr=function(){return 0==this.Zj};f.clear=function(){this.rc={};this.Zj=this.Vb.length=0};
f.remove=function(a){return qd(this.rc,a)?(delete this.rc[a],this.Zj--,this.Vb.length>2*this.Zj&&pd(this),!0):!1};function pd(a){if(a.Zj!=a.Vb.length){for(var b=0,c=0;b<a.Vb.length;){var d=a.Vb[b];qd(a.rc,d)&&(a.Vb[c++]=d);b++}a.Vb.length=c}if(a.Zj!=a.Vb.length){for(var e={},c=b=0;b<a.Vb.length;)d=a.Vb[b],qd(e,d)||(a.Vb[c++]=d,e[d]=1),b++;a.Vb.length=c}}f.get=function(a,b){return qd(this.rc,a)?this.rc[a]:b};f.set=function(a,b){qd(this.rc,a)||(this.Zj++,this.Vb.push(a));this.rc[a]=b};
f.ux=function(a){var b;a instanceof od?(b=a.wr(),a=a.yn()):(b=rb(a),a=qb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.wr(),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};f.clone=function(){return new od(this)};f.wB=function(){for(var a=new od,b=0;b<this.Vb.length;b++){var c=this.Vb[b];a.set(this.rc[c],c)}return a};function qd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function sd(){hd.call(this);this.t="colortable";this.If=new od;za(this,new ld)}k(sd,hd);sd.prototype.add=function(a,b,c,d,e,g){if(!(ma(a)&&ma(c)&&ma(d)&&ma(e)&&ma(g)))throw Error("Invalid color table entry.");this.If.set(a,[b,c,d,e,g]);this.T=!0};sd.prototype.get=function(a){return this.If.get(a)};h("X.colortable.prototype.get",sd.prototype.get);function td(a,b,c){this.x=ca(a)?a:0;this.y=ca(b)?b:0;this.z=ca(c)?c:0}td.prototype.clone=function(){return new td(this.x,this.y,this.z)};td.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};td.prototype.sB=function(){return[this.x,this.y,this.z]};function ud(a,b,c){this.x=a;this.y=b;this.z=c}k(ud,td);f=ud.prototype;f.clone=function(){return new ud(this.x,this.y,this.z)};f.oi=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.uc=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.oi())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.Ld=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.fp=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function vd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function wd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function xd(a,b){return new ud(a.x+b.x,a.y+b.y,a.z+b.z)}function yd(a,b){return new ud(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};n.ha=ud;f=n.ha.prototype;f.clone=ud.prototype.clone;f.oi=ud.prototype.oi;f.scale=ud.prototype.scale;f.uc=ud.prototype.uc;f.add=ud.prototype.add;f.Ld=ud.prototype.Ld;f.normalize=function(){var a=this.oi();return 0==a?this.scale(0):this.scale(1/a)};n.ha.ul=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};n.ha.jn=yd;n.ha.ry=vd;n.ha.kv=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new ud(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};n.ha.prototype.__defineGetter__("xx",function(){return this.x});
n.ha.prototype.__defineGetter__("yy",function(){return this.y});n.ha.prototype.__defineGetter__("zz",function(){return this.z});h("X.vector",n.ha);h("X.vector.prototype.clone",n.ha.prototype.clone);h("X.vector.prototype.magnitude",n.ha.prototype.oi);h("X.vector.prototype.scale",n.ha.prototype.scale);h("X.vector.prototype.invert",n.ha.prototype.uc);h("X.vector.prototype.normalize",n.ha.prototype.normalize);h("X.vector.prototype.add",n.ha.prototype.add);h("X.vector.prototype.subtract",n.ha.prototype.Ld);
h("X.vector.dot",n.ha.ul);h("X.vector.cross",n.ha.jn);h("X.vector.distance",n.ha.ry);h("X.vector.lerp",n.ha.kv);function zd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}zd.prototype.BYTES_PER_ELEMENT=8;zd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};zd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{zd.BYTES_PER_ELEMENT=8}catch(Ad){}zd.prototype.BYTES_PER_ELEMENT=zd.prototype.BYTES_PER_ELEMENT;zd.prototype.set=zd.prototype.set;zd.prototype.toString=zd.prototype.toString;h("Float64Array",zd)};function Bd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Bd.prototype.BYTES_PER_ELEMENT=4;Bd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Bd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(Bd.BYTES_PER_ELEMENT=4,Bd.prototype.BYTES_PER_ELEMENT=Bd.prototype.BYTES_PER_ELEMENT,Bd.prototype.set=Bd.prototype.set,Bd.prototype.toString=Bd.prototype.toString,h("Float32Array",Bd));function Cd(){return new Float32Array(3)}function Dd(a,b,c){var d=Cd();d[0]=a;d[1]=b;d[2]=c;return d}function Ed(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function Fd(){return new Float32Array(4)}function Gd(a,b,c,d){var e=Fd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Hd(){return new Float32Array(16)}function Id(){var a=Hd();a[0]=a[5]=a[10]=a[15]=1;return a}function Jd(a,b,c,d,e,g,l,m,q,p,t,s,u,v,D,B,I){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=g;a[5]=l;a[6]=m;a[7]=q;a[8]=p;a[9]=t;a[10]=s;a[11]=u;a[12]=v;a[13]=D;a[14]=B;a[15]=I;return a}function Kd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Ld(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function Nd(a,b,c,d,e,g){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=g}
function Od(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Pd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Qd(a,b,c){var d=a[0],e=a[1],g=a[2],l=a[3],m=a[4],q=a[5],p=a[6],t=a[7],s=a[8],u=a[9],v=a[10],D=a[11],B=a[12],I=a[13],G=a[14];a=a[15];var Q=b[0],M=b[1],L=b[2],J=b[3],H=b[4],O=b[5],N=b[6],Y=b[7],K=b[8],y=b[9],z=b[10],ga=b[11],Z=b[12],E=b[13],W=b[14];b=b[15];c[0]=d*Q+m*M+s*L+B*J;c[1]=e*Q+q*M+u*L+I*J;c[2]=g*Q+p*M+v*L+G*J;c[3]=l*Q+t*M+D*L+a*J;c[4]=d*H+m*O+s*N+B*Y;c[5]=e*H+q*O+u*N+I*Y;c[6]=g*H+p*O+v*N+G*Y;c[7]=l*H+t*O+D*N+a*Y;c[8]=d*K+m*y+s*z+B*ga;c[9]=e*K+q*y+u*z+I*ga;c[10]=g*K+p*y+v*z+G*ga;c[11]=
l*K+t*y+D*z+a*ga;c[12]=d*Z+m*E+s*W+B*b;c[13]=e*Z+q*E+u*W+I*b;c[14]=g*Z+p*E+v*W+G*b;c[15]=l*Z+t*E+D*W+a*b;return c}
function Rd(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],l=a[4],m=a[5],q=a[6],p=a[7],t=a[8],s=a[9],u=a[10],v=a[11],D=a[12],B=a[13],I=a[14],G=a[15],Q=c*m-d*l,M=c*q-e*l,L=c*p-g*l,J=d*q-e*m,H=d*p-g*m,O=e*p-g*q,N=t*B-s*D,Y=t*I-u*D,K=t*G-v*D,y=s*I-u*B,z=s*G-v*B,ga=u*G-v*I,Z=Q*ga-M*z+L*y+J*K-H*Y+O*N;if(0==Z)return!1;Z=1/Z;b[0]=(m*ga-q*z+p*y)*Z;b[1]=(-d*ga+e*z-g*y)*Z;b[2]=(B*O-I*H+G*J)*Z;b[3]=(-s*O+u*H-v*J)*Z;b[4]=(-l*ga+q*K-p*Y)*Z;b[5]=(c*ga-e*K+g*Y)*Z;b[6]=(-D*O+I*L-G*M)*Z;b[7]=(t*O-u*L+v*M)*Z;b[8]=(l*z-m*K+p*
N)*Z;b[9]=(-c*z+d*K-g*N)*Z;b[10]=(D*H-B*L+G*Q)*Z;b[11]=(-t*H+s*L-v*Q)*Z;b[12]=(-l*y+m*Y-q*N)*Z;b[13]=(c*y-d*Y+e*N)*Z;b[14]=(-D*J+B*M-I*Q)*Z;b[15]=(t*J-s*M+u*Q)*Z;return!0}function Sd(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Td(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+g*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+g*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+g*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+g*a[11]+b*a[15];return c}function Ud(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],g=a[2]*b+a[6]*c+a[10]*d+a[14],l=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=g;a[15]=l;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);n.B={};n.B.sH=function(a,b,c,d){c=c.Ld(b);c.normalize();d=n.ha.jn(c,d);d.normalize();var e=n.ha.jn(d,c);e.normalize();c.uc();Nd(a,0,d.x,d.y,d.z,0);Nd(a,1,e.x,e.y,e.z,0);Nd(a,2,c.x,c.y,c.z,0);Ud(a,-b.x,-b.y,-b.z);return a};n.B.Oc=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new n.ha((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
n.B.aU=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Pd(a,b,d);Pd(a,c,e);Od(a,b,e);Od(a,c,d);return a};n.B.$T=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Ld(a,b,d);Ld(a,c,e);Kd(a,b,e);Kd(a,c,d);return a};n.B.Fr=Id;n.B.clone=function(a){var b=Hd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
n.B.wB=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],g=a[6],l=a[7],m=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=g;b[11]=a[14];b[12]=e;b[13]=l;b[14]=m}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
n.B.gN=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],l=a[5],m=a[6],q=a[7],p=a[8],t=a[9],s=a[10],u=a[11],v=a[12],D=a[13],B=a[14];a=a[15];return(b*l-c*g)*(s*a-u*B)-(b*m-d*g)*(t*a-u*D)+(b*q-e*g)*(t*B-s*D)+(c*m-d*l)*(p*a-u*v)-(c*q-e*l)*(p*B-s*v)+(d*q-e*m)*(p*D-t*v)};n.B.uc=Rd;n.B.Hz=function(a,b,c,d,e){var g=b/2;b=e-d;var l=Math.sin(g);if(0==b||0==l||0==c)return a;g=Math.cos(g)/l;return Jd(a,g/c,0,0,0,0,g,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
n.B.IQ=function(a,b,c,d,e,g,l){return Jd(a,2*g/(c-b),0,0,0,0,2*g/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(l+g)/(l-g),-1,0,0,-(2*l*g)/(l-g),0)};n.B.JQ=function(a,b,c,d,e,g,l){return Jd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(l-g),0,-(c+b)/(c-b),-(e+d)/(e-d),-(l+g)/(l-g),1)};n.B.multiply=Qd;n.B.FH=Td;n.B.translate=Ud;n.B.scale=function(a,b,c,d){return Jd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
n.B.rotate=function(a,b,c,d,e){var g=a[0],l=a[1],m=a[2],q=a[3],p=a[4],t=a[5],s=a[6],u=a[7],v=a[8],D=a[9],B=a[10],I=a[11],G=Math.cos(b),Q=Math.sin(b),M=1-G;b=c*c*M+G;var L=c*d*M+e*Q,J=c*e*M-d*Q,H=c*d*M-e*Q,O=d*d*M+G,N=d*e*M+c*Q,Y=c*e*M+d*Q;c=d*e*M-c*Q;e=e*e*M+G;return Jd(a,g*b+p*L+v*J,l*b+t*L+D*J,m*b+s*L+B*J,q*b+u*L+I*J,g*H+p*O+v*N,l*H+t*O+D*N,m*H+s*O+B*N,q*H+u*O+I*N,g*Y+p*c+v*e,l*Y+t*c+D*e,m*Y+s*c+B*e,q*Y+u*c+I*e,a[12],a[13],a[14],a[15])};
n.B.Qv=function(a,b){var c=a[4],d=a[5],e=a[6],g=a[7],l=a[8],m=a[9],q=a[10],p=a[11],t=Math.cos(b),s=Math.sin(b);a[4]=c*t+l*s;a[5]=d*t+m*s;a[6]=e*t+q*s;a[7]=g*t+p*s;a[8]=c*-s+l*t;a[9]=d*-s+m*t;a[10]=e*-s+q*t;a[11]=g*-s+p*t;return a};n.B.Rv=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],l=a[8],m=a[9],q=a[10],p=a[11],t=Math.cos(b),s=Math.sin(b);a[0]=c*t+l*-s;a[1]=d*t+m*-s;a[2]=e*t+q*-s;a[3]=g*t+p*-s;a[8]=c*s+l*t;a[9]=d*s+m*t;a[10]=e*s+q*t;a[11]=g*s+p*t;return a};
n.B.Sv=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],l=a[4],m=a[5],q=a[6],p=a[7],t=Math.cos(b),s=Math.sin(b);a[0]=c*t+l*s;a[1]=d*t+m*s;a[2]=e*t+q*s;a[3]=g*t+p*s;a[4]=c*-s+l*t;a[5]=d*-s+m*t;a[6]=e*-s+q*t;a[7]=g*-s+p*t;return a};h("X.matrix.identity",n.B.Fr);h("X.matrix.clone",n.B.clone);h("X.matrix.transpose",n.B.wB);h("X.matrix.determinant",n.B.gN);h("X.matrix.invert",n.B.uc);h("X.matrix.multiply",n.B.multiply);h("X.matrix.multiplyByVector",n.B.Oc);h("X.matrix.multiplyByVec4",n.B.FH);
h("X.matrix.makePerspective",n.B.Hz);h("X.matrix.makeFrustum",n.B.IQ);h("X.matrix.makeOrtho",n.B.JQ);h("X.matrix.makeLookAt",n.B.sH);h("X.matrix.translate",n.B.translate);h("X.matrix.scale",n.B.scale);h("X.matrix.rotate",n.B.rotate);h("X.matrix.rotateX",n.B.Qv);h("X.matrix.rotateY",n.B.Rv);h("X.matrix.rotateZ",n.B.Sv);h("X.matrix.swapRows",n.B.aU);h("X.matrix.swapCols",n.B.$T);function Vd(){hd.call(this);this.t="transform";this.pc=n.B.Fr()}k(Vd,hd);Vd.prototype.__defineGetter__("matrix",function(){return this.pc});Vd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.pc=a;this.Ba()});f=Vd.prototype;f.Qv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.B.Qv(this.pc,a*Math.PI/180);this.Ba()};
f.Rv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.B.Rv(this.pc,a*Math.PI/180);this.Ba()};f.Sv=function(a){if(!ma(a)||-360>a||360<a)throw Error("Invalid angle.");n.B.Sv(this.pc,a*Math.PI/180);this.Ba()};f.EJ=function(a){if(!ma(a))throw Error("Invalid distance.");n.B.translate(this.pc,a,0,0);this.Ba()};f.FJ=function(a){if(!ma(a))throw Error("Invalid distance.");n.B.translate(this.pc,0,a,0);this.Ba()};
f.GJ=function(a){if(!ma(a))throw Error("Invalid distance.");n.B.translate(this.pc,0,0,a);this.Ba()};function Wd(a,b,c){a.pc[b+4*c]*=-1;a.Ba()}f.NN=function(){Wd(this,0,0)};f.ON=function(){Wd(this,1,1)};f.PN=function(){Wd(this,2,2)};f.Ba=function(){this.T=!0};h("X.transform",Vd);h("X.transform.prototype.rotateX",Vd.prototype.Qv);h("X.transform.prototype.rotateY",Vd.prototype.Rv);h("X.transform.prototype.rotateZ",Vd.prototype.Sv);h("X.transform.prototype.translateX",Vd.prototype.EJ);
h("X.transform.prototype.translateY",Vd.prototype.FJ);h("X.transform.prototype.translateZ",Vd.prototype.GJ);h("X.transform.prototype.flipX",Vd.prototype.NN);h("X.transform.prototype.flipY",Vd.prototype.ON);h("X.transform.prototype.flipZ",Vd.prototype.PN);h("X.transform.prototype.modified",Vd.prototype.Ba);function Xd(){hd.call(this);this.t="texture";this.dl=this.Oh=this.Ca=null;this.lx=this.mx=0;this.ZC=!1;za(this,new ld)}k(Xd,hd);Xd.prototype.__defineSetter__("rawData",function(a){this.dl=a;this.T=!0});Xd.prototype.__defineSetter__("rawDataHeight",function(a){this.lx=a;this.T=!0});Xd.prototype.__defineSetter__("rawDataWidth",function(a){this.mx=a;this.T=!0});Xd.prototype.__defineSetter__("grayscale",function(a){this.ZC=a;this.T=!0});h("X.texture",Xd);function Yd(){this.lf=Zd;this.pd=new Vd;this.kb=[1,1,1];this.Po=this.Cb=this.Ud=this.ya=this.J=null;this.Ko=[];this.bc=!0;this.Jo=this.Hq=1;this.Bo=null;this.yq=!1;this.ke=1;this.Ee=0;this.Gq=!0}var Zd="TRIANGLES";Yd.prototype.__defineSetter__("type",function(a){return this.lf=a});Yd.prototype.__defineGetter__("type",function(){return this.lf});Yd.prototype.__defineGetter__("texture",function(){this.Cb||(this.Cb=new Xd);return this.Cb});Yd.prototype.__defineGetter__("transform",function(){return this.pd});
Yd.prototype.__defineGetter__("points",function(){return this.J});Yd.prototype.__defineSetter__("points",function(a){this.J=a});Yd.prototype.__defineGetter__("normals",function(){return this.ya});Yd.prototype.__defineSetter__("normals",function(a){this.ya=a});Yd.prototype.__defineGetter__("colors",function(){return this.Ud});Yd.prototype.__defineSetter__("colors",function(a){this.Ud=a});Yd.prototype.__defineGetter__("color",function(){return this.kb});
Yd.prototype.__defineSetter__("color",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.kb=a;this.T=!0});Yd.prototype.__defineGetter__("opacity",function(){return this.ke});Yd.prototype.__defineSetter__("opacity",function(a){if(!ma(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.ke=a;this.T=!0});Yd.prototype.__defineGetter__("caption",function(){return this.Bo});
Yd.prototype.__defineSetter__("caption",function(a){this.Bo=a;this.T=!0});Yd.prototype.__defineGetter__("visible",function(){return this.bc});Yd.prototype.__defineSetter__("visible",function(a){for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.bc=a;this.T=!0});Yd.prototype.__defineGetter__("pointsize",function(){return this.Hq});Yd.prototype.__defineSetter__("pointsize",function(a){if(!ma(a))throw Error("Invalid point size.");this.Hq=a;this.T=!0});
Yd.prototype.__defineGetter__("magicmode",function(){return this.yq});Yd.prototype.__defineSetter__("magicmode",function(a){if(!la(a))throw Error("Invalid magic mode setting.");this.yq=a;this.T=!0});Yd.prototype.__defineGetter__("linewidth",function(){return this.Jo});Yd.prototype.__defineSetter__("linewidth",function(a){if(!ma(a))throw Error("Invalid line width.");this.Jo=a;this.T=!0});Yd.prototype.__defineGetter__("pickable",function(){return this.Gq});
Yd.prototype.__defineSetter__("pickable",function(a){if(!la(a))throw Error("Invalid pickable setting.");this.Gq=a;this.T=!0});Yd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.Po});Yd.prototype.__defineSetter__("textureCoordinateMap",function(){});function $d(){this.Jf=Infinity;this.oc=this.Wc=-Infinity;this.qc=Infinity;this.$k=[0,0,0];this.Yk=[1,1,1]}$d.prototype.__defineGetter__("lowerThreshold",function(){return this.oc});$d.prototype.__defineSetter__("lowerThreshold",function(a){this.oc=a});$d.prototype.__defineGetter__("upperThreshold",function(){return this.qc});$d.prototype.__defineSetter__("upperThreshold",function(a){this.qc=a});$d.prototype.__defineGetter__("min",function(){return this.Jf});$d.prototype.__defineGetter__("max",function(){return this.Wc});
$d.prototype.__defineGetter__("minColor",function(){return this.$k});$d.prototype.__defineSetter__("minColor",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid min. color.");this.$k=a});$d.prototype.__defineGetter__("maxColor",function(){return this.Yk});$d.prototype.__defineSetter__("maxColor",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid max. color.");this.Yk=a});function ae(){hd.call(this);this.t="scalars";this.vq=this.Nb=null;this.lD=!0;this.ax=0;za(this,new ld);za(this,new $d);this.$k=[0,1,0];this.Yk=[1,0,0]}k(ae,hd);ae.prototype.__defineGetter__("array",function(){return this.Nb});ae.prototype.__defineSetter__("array",function(a){this.vq=this.Nb=a;this.T=!0});ae.prototype.__defineGetter__("interpolation",function(){return this.ax});ae.prototype.__defineSetter__("interpolation",function(a){this.ax=a});h("X.scalars",ae);function be(a){hd.call(this);this.t="object";this.m=[];this.Ob=this.gf=null;za(this,new Yd);null!=a&&this.fn(a)}k(be,hd);
be.prototype.fn=function(a){this.lf=a.lf;this.pd=new Vd;this.pd.pc=new Float32Array(a.pd.pc);this.kb=a.kb.slice();a.J&&(this.J=new id(a.J.length,a.J));a.ya&&(this.ya=new id(a.ya.length,a.ya));a.Ud&&(this.Ud=new id(a.Ud.length,a.Ud));this.Cb=a.Cb;this.Po=a.Po;a.Ca&&(this.Ca=new kd((new String(a.Ca.Rt)).toString()));this.ke=a.ke;this.m.length=0;var b=a.m;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.m.push(new n[b[d].t](b[d]));this.bc=a.bc;this.Hq=a.Hq;this.Jo=a.Jo;a.Bo&&(this.Bo=(new String(a.Bo)).toString());
this.yq=a.yq;this.Gq=a.Gq;this.Ko=a.Ko.slice();this.T=!0};be.prototype.__defineGetter__("colortable",function(){this.gf||(this.gf=new sd);return this.gf});be.prototype.__defineGetter__("scalars",function(){this.Ob||(this.Ob=new ae);return this.Ob});be.prototype.__defineGetter__("children",function(){return this.m});be.prototype.Ba=function(){var a=new ce;a.qb=this;this.dispatchEvent(a)};be.prototype.remove=function(){var a=new de;a.qb=this;this.dispatchEvent(a)};
function ee(a,b){if(!(null!=a&&null!=b&&a instanceof be&&b instanceof be))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.ke?-1:1==b.ke?1:null!=a.Ee&&null!=b.Ee&&a.Ee>b.Ee?-1:1}h("X.object",be);h("X.object.prototype.modified",be.prototype.Ba);h("X.object.prototype.remove",be.prototype.remove);function fe(a){Ic.call(this,a);this.t="event"}k(fe,Ic);function ge(a){return a+"_"+r()}var he=ge("pan"),ie=ge("rotate"),je=ge("zoom"),ke=ge("scroll");ge("render");var le=ge("resetview"),me=ge("windowlevel"),ne=ge("modified"),oe=ge("remove"),pe=ge("progress"),qe=ge("hover"),re=ge("hover_end"),se=ge("computing"),te=ge("computing_end"),ue=ge("computing_progress");function ve(){fe.call(this,me);this.fx=this.sx=0}k(ve,fe);function we(){fe.call(this,he);this.Ee=new n.ha(0,0,0)}k(we,fe);
function xe(){fe.call(this,ie);this.Ee=new n.ha(0,0,0)}k(xe,fe);function ye(){fe.call(this,je);this.Nh=this.Ni=!1}k(ye,fe);function ze(){fe.call(this,ke);this.Yc=!1}k(ze,fe);function Ae(){fe.call(this,qe);this.Zt=this.Yt=0}k(Ae,fe);function Be(){fe.call(this,re)}k(Be,fe);function Ce(){fe.call(this,le)}k(Ce,fe);function ce(){fe.call(this,ne);this.Za=this.qb=null}k(ce,fe);function de(){fe.call(this,oe);this.Za=this.qb=null}k(de,fe);function De(){fe.call(this,pe);this.Vm=0}k(De,fe);
function Ee(){fe.call(this,se);this.qb=null}k(Ee,fe);function Fe(){fe.call(this,ue);this.Vm=0}k(Fe,fe);function Ge(){fe.call(this,te);this.qb=null}k(Ge,fe);h("X.event.events.PAN",he);h("X.event.events.ROTATE",ie);h("X.event.events.ZOOM",je);h("X.event.events.SCROLL",ke);function He(){hd.call(this);this.t="parser";this.ta=null;this.pb=0;this.QL=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Nt=!0}k(He,hd);He.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function Ie(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var g=a[e],b=Math.min(b,g),c=Math.max(c,g);return[b,c]}
function Je(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
He.prototype.j=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this.ta.slice(this.pb,this.pb+=b*c));if(this.QL!=this.Nt)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),g=0;g<d.byteLength;g+=
c)for(var l=g+c-1,m=g;l>m;l--,m++){var q=e[m];e[m]=e[l];e[l]=q}return 1==b?d[0]:d};
function Ke(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Gd(0,0,0,1),e=Fd();Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(0,0,b[2]-1,1);Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(0,b[1]-
1,0,1);Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,0,0,1);Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,b[1]-1,0,1);Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,0,b[2]-1,1);Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(0,b[1]-1,b[2]-1,1);Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Gd(b[0]-1,b[1]-1,b[2]-1,1);Td(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Le(a,b){var c=Id();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=Cd(),g=a[0],l=a[1],m=a[2],q=b[0],p=b[1],t=b[2];e[0]=l*t-m*p;e[1]=m*q-g*t;e[2]=g*p-l*q;Ed(e,e);g=Math.cos(d/2);l=Math.sin(d/2)*e[0];m=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];Nd(c,0,g*g+l*l-m*m-d*d,2*(l*m-g*d),2*(l*d+g*m),0);Nd(c,1,2*(l*m+g*d),g*g+m*m-l*l-d*d,2*(m*d-g*l),0);Nd(c,2,2*(l*d-g*m),2*(m*d+g*l),g*g+d*d-m*m-l*l,0)}d=Hd();Rd(c,d);return[c,d]}
function Me(a,b,c,d,e,g,l,m,q){var p=new Ne;Ed(c,c);for(var t=[],s=[],u=0;6>u;u++)for(var v=Math.floor(u/2),D=(v+1)%3,B=(v+2)%3,I=(4+2*v)%6,G=0;2>G;G++){var Q=(2+G+2*v)%6,M=-(c[v]*(e[u]-a[v])+c[D]*(e[Q]-a[D]))/c[B]+a[B];if(M>=e[I]&&M<=e[I+1]||M<=e[I]&&M>=e[I+1]){var L=[];L[v]=e[u];L[D]=e[Q];L[B]=M;t.push(L)}else L=[],L[v]=e[u],L[D]=e[Q],L[B]=M,s.push(L)}a=Dd(0,0,1);a=Le(c,a);e=a[0];a=a[1];v=[];for(s=0;s<t.length;++s)u=Gd(t[s][0],t[s][1],t[s][2],1),D=Fd(),Td(e,u,D),v.push([D[0],D[1],D[2]]);e=Dd(1,
0,0);t=Cd();Sd(a,e,t);s=Dd(0,1,0);e=Cd();Sd(a,s,e);u=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(s=s=0;s<v.length;++s)v[s][0]<u[0]&&(u[0]=v[s][0]),v[s][0]>u[1]&&(u[1]=v[s][0]),v[s][1]<u[2]&&(u[2]=v[s][1]),v[s][1]>u[3]&&(u[3]=v[s][1]),v[s][2]<u[4]&&(u[4]=v[s][2]),v[s][2]>u[5]&&(u[5]=v[s][2]);s=Gd(u[0]+(u[1]-u[0])/2,u[2]+(u[3]-u[2])/2,u[4]+(u[5]-u[4])/2,0);v=Fd();Qd(a,s,v);D=Math.floor(u[0]);B=Math.ceil(u[1]);D==B&&B++;I=B-D;G=Math.floor(u[2]);
Q=Math.ceil(u[3]);M=Q-G;L=b[0];b=b[1];var s=Math.ceil(I/L),J=Math.ceil(M/b),H=new Uint8Array(4*s*J),O=new Xd;O.mx=s;O.lx=J;var J=Fd(),N=Gd(0,0,u[4],1),Y=Hd();Qd(l.HL,a,Y);for(var K=Q-1E-7,y=B-1E-7,z=0,ga=0,Z=0,E=G,E=G;E<=K;E+=b)for(Z++,ga=0,N[1]=E,s=D;s<=y;s+=L){ga++;N[0]=s;Td(Y,N,J);var W=4*z,Xa=Math.floor(J[2]),qa=Math.floor(J[1]),Ca=Math.floor(J[0]);if(0<=Ca&&Ca<l.ac[0]&&0<=qa&&qa<l.ac[1]&&0<=Xa&&Xa<l.ac[2]){var sa=g[Xa][qa][Ca],jb=Ca=qa=Xa=0;q?((sa=q.get(sa))||(sa=[0,.61,0,0,1]),Xa=255*sa[1],
qa=255*sa[2],Ca=255*sa[3],jb=255*sa[4]):(Xa=qa=Ca=sa/l.Wc*255,jb=255);H[W]=Xa;H[++W]=qa;H[++W]=Ca;H[++W]=jb}else H[W]=0,H[++W]=0,H[++W]=0,H[++W]=0;z++}O.dl=H;p.Cb=O;p.$L=u;p.JL=a;p.IL=Y;p.PL=G;p.BX=Q;p.ZL=D;p.CX=B;p.aD=ga;p.$C=Z;p.Qj=L;p.Db=I;p.Jj=b;p.lb=M;p.xb=[v[0],v[1],v[2]];p.Eo=[c[0],c[1],c[2]];p.St=[t[0],t[1],t[2]];p.Yc=[e[0],e[1],e[2]];p.bc=!1;p.Pj=l;p.Ij=null==l.Pj||m?!0:!1;p.Ao=d;p.ah();p.bc=!1;return p}
function Oe(a,b,c,d){var e;e=d.Td;for(var g=[],l=[],m=0;6>m;m++){var q=Math.floor(m/2),p=(q+1)%3,t=(q+2)%3,s=(2+2*q)%6,u=(4+2*q)%6,v=1/c[q]*(e[m]-b[q]);if(Infinity!=v&&-Infinity!=v){var D=b[p]+c[p]*v,v=b[t]+c[t]*v;D>=e[s]&&D<=e[s+1]&&v>=e[u]&&v<=e[u+1]?(s=[],s[q]=e[m],s[p]=D,s[t]=v,g.push(s)):(s=[],s[q]=e[m],s[p]=D,s[t]=v,l.push(s))}}e=[g,l];b=e[0];d.h[a].U=e;e=vd(new ud(b[0][0],b[0][1],b[0][2]),new ud(b[1][0],b[1][1],b[1][2]));d.h[a].AX=e;g=Dd(0,0,1);l=Le(c,g)[0];m=Gd(d.Yw[0],d.Yw[1],d.Yw[2],0);
g=Fd();Td(l,m,g);l=Fd();m=g[2];l[0]=c[0]*m;l[1]=c[1]*m;l[2]=c[2]*m;l[3]=c[3]*m;.5>Math.abs(g[0])&&(g[0]=.5);.5>Math.abs(g[1])&&(g[1]=.5);d.h[a].jf=[Math.abs(g[0]),Math.abs(g[1])];d.h[a].No=g[2];d.h[a].rb=l;e=Math.floor(Math.abs(e/g[2]));d.Jq[a]=e+1;d.h[a].Aa=e+1;d.h[a].U[0][0][0]>d.h[a].U[0][1][0]?0<l[0]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][0]<d.h[a].U[0][1][0]?0>l[0]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][1]>
d.h[a].U[0][1][1]?0<l[1]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][1]<d.h[a].U[0][1][1]?0>l[1]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][2]>d.h[a].U[0][1][2]?0<l[2]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e):d.h[a].U[0][0][2]<d.h[a].U[0][1][2]&&0>l[2]&&(e=d.h[a].U[0][0],d.h[a].U[0][0]=d.h[a].U[0][1],d.h[a].U[0][1]=e);d.h[a].ix=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Pe(a,b){var c;c=b.ta;for(var d=b.ac,e=b.Wc,g=Array(d[2]),l=Array(d[2]),m=d[1]*d[0],q=0,p=0,t=0,s=0,u=0,s=0;s<d[2];s++){var v=c.subarray(s*m,(s+1)*m),u=0;l[s]=Array(d[1]);g[s]=Array(d[1]);for(t=0;t<d[1];t++)for(l[s][t]=new c.constructor(d[0]),g[s][t]=new c.constructor(d[0]),p=0;p<d[0];p++)q=v[u],l[s][t][p]=q/e*255,g[s][t][p]=q,u++}c=[g,l];b.od=c[0];b.zX=c[1];n.Ef(a.t+".reslice");b.Sb=null!=b.r;b.gf&&(b.uq=b.gf.If);b.NY=[0,0,0];b.Ya=[b.ff[0]+(b.Hj[0]-1)/2,b.ff[1]+(b.Hj[1]-1)/2,b.ff[2]+(b.Hj[2]-
1)/2];b.Td=[Math.min(b.ff[0],b.ff[0]+b.Hj[0]-1),Math.max(b.ff[0],b.ff[0]+b.Hj[0]-1),Math.min(b.ff[1],b.ff[1]+b.Hj[1]-1),Math.max(b.ff[1],b.ff[1]+b.Hj[1]-1),Math.min(b.ff[2],b.ff[2]+b.Hj[2]-1),Math.max(b.ff[2],b.ff[2]+b.Hj[2]-1)];b.h=[{},{},{}];c=Dd(b.Ya[0],b.Ya[1],b.Ya[2]);b.h[0].Kq=c;d=Dd(1,0,0);Ed(d,d);b.h[0].P=d;e=[1,0,0];b.h[0].kb=e;Oe(0,c,d,b);b.m[0].m=Array(b.h[0].Aa);c[0]=b.h[0].U[0][0][0]+b.h[0].rb[0]*Math.floor(b.h[0].Aa/2);c[1]=b.h[0].U[0][0][1]+b.h[0].rb[1]*Math.floor(b.h[0].Aa/2);c[2]=
b.h[0].U[0][0][2]+b.h[0].rb[2]*Math.floor(b.h[0].Aa/2);c=Me(c,b.h[0].jf,b.h[0].P,b.h[0].kb,b.Td,b.od,b,b.Sb,b.uq);b.Sb&&(c.r=b.r.m[0].m[Math.floor(b.h[0].Aa/2)].Cb);b.m[0].m[Math.floor(b.h[0].Aa/2)]=c;b.Kj=Math.floor(b.h[0].Aa/2);b.Fo=Math.floor(b.h[0].Aa/2);c=Dd(b.Ya[0],b.Ya[1],b.Ya[2]);b.h[1].Kq=c;d=Dd(0,1,0);Ed(d,d);b.h[1].P=d;e=[0,1,0];b.h[1].kb=e;Oe(1,c,d,b);b.m[1].m=Array(b.h[1].Aa);c[0]=b.h[1].U[0][0][0]+b.h[1].rb[0]*Math.floor(b.h[1].Aa/2);c[1]=b.h[1].U[0][0][1]+b.h[1].rb[1]*Math.floor(b.h[1].Aa/
2);c[2]=b.h[1].U[0][0][2]+b.h[1].rb[2]*Math.floor(b.h[1].Aa/2);c=Me(c,b.h[1].jf,b.h[1].P,b.h[1].kb,b.Td,b.od,b,b.Sb,b.uq);b.Sb&&(c.r=b.r.m[1].m[Math.floor(b.h[1].Aa/2)].Cb);b.m[1].m[Math.floor(b.h[1].Aa/2)]=c;b.Lj=Math.floor(b.h[1].Aa/2);b.Go=Math.floor(b.h[1].Aa/2);c=Dd(b.Ya[0],b.Ya[1],b.Ya[2]);b.h[2].Kq=c;d=Dd(0,0,1);Ed(d,d);b.h[2].P=d;e=[0,.392,.804];b.h[2].kb=e;Oe(2,c,d,b);b.m[2].m=Array(b.h[2].Aa);c[0]=b.h[2].U[0][0][0]+b.h[2].rb[0]*Math.floor(b.h[2].Aa/2);c[1]=b.h[2].U[0][0][1]+b.h[2].rb[1]*
Math.floor(b.h[2].Aa/2);c[2]=b.h[2].U[0][0][2]+b.h[2].rb[2]*Math.floor(b.h[2].Aa/2);c=Me(c,b.h[2].jf,b.h[2].P,b.h[2].kb,b.Td,b.od,b,b.Sb,b.uq);b.Sb&&(c.r=b.r.m[2].m[Math.floor(b.h[2].Aa/2)].Cb);b.m[2].m[Math.floor(b.h[2].Aa/2)]=c;b.Mj=Math.floor(b.h[2].Aa/2);b.Ho=Math.floor(b.h[2].Aa/2);n.cf(a.t+".reslice");return b.od};function Qe(){He.call(this);this.t="parserOFF"}k(Qe,He);
Qe.prototype.parse=function(a,b,c){function d(){if(q===e)throw Error("End of file reached unexpectedly.");for(var a=q;a<e;++a)if(10===g[a]){var b=Je(g,q,a);q=a+1;return b}q=e;return Je(g,q,e-1)}n.Ef(this.t+".parse");this.ta=c;var e=c.byteLength,g=this.j("uchar",e);c=[];b.J=new id(e);b.ya=new id(e);for(var l=b.J,m=b.ya,q=0,p=d(),p=("OFF"===p?d():p).split(" "),t=p[0],p=p[1];t--;){var s=d(),s=s.split(" ");c.push([parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2])])}for(;p--;){var s=d(),s=s.split(" "),
u=c[parseInt(s[1],10)],t=c[parseInt(s[2],10)],s=c[parseInt(s[3],10)];l.add(u[0],u[1],u[2]);l.add(t[0],t[1],t[2]);l.add(s[0],s[1],s[2]);u=new ud(u[0],u[1],u[2]);s=new ud(s[0],s[1],s[2]);t=yd((new ud(t[0],t[1],t[2])).Ld(u),s.Ld(u));t.normalize();m.add(t.x,t.y,t.z);m.add(t.x,t.y,t.z);m.add(t.x,t.y,t.z)}n.cf(this.t+".parse");c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};h("X.parserOFF",Qe);h("X.parserOFF.prototype.parse",Qe.prototype.parse);function Re(){He.call(this);this.t="parserDCM"}k(Re,He);
Re.prototype.parse=function(a,b,c){b.Ej={};b.Ej.Wr=0;this.wk(c,b);if(null==b.Ca.length||b.eb.length==b.Ca.length){b.Ej.Wr=b.Ca.length;var d={};c={};for(var e=0;e<b.eb.length;e++)d.hasOwnProperty(b.eb[e].series_instance_uid)||(d[b.eb[e].series_instance_uid]=[],c[b.eb[e].series_instance_uid]={}),c[b.eb[e].series_instance_uid].hasOwnProperty(b.eb[e].sop_instance_uid)||(c[b.eb[e].series_instance_uid][b.eb[e].sop_instance_uid]=!0,d[b.eb[e].series_instance_uid].push(b.eb[e]));var g=Object.keys(d)[0],e=
d[g],l=e.length;c={};var m="image_position_patient";1==l?(m="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(m="image_position_patient",d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new ud(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],
e[0].image_orientation_patient[5]),d=yd(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(m="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&
(e[0].pixel_spacing[1]=1);if(1<l)switch(m){case "image_position_patient":var q=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-q[0],p=d[1]-q[1],t=d[2]-q[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+p*p+t*t);break;case "instance_number":e[0].pixel_spacing[2]=1;break;default:window.console.log("Unkown ordering mode - returning: "+m)}else e[0].pixel_spacing[2]=1;d=1;switch(m){case "image_position_patient":var q=e[0].image_position_patient,s=e[l-1].image_position_patient,g=s[0]-q[0],p=s[1]-
q[1],t=s[2]-q[2],g=Math.sqrt(g*g+p*p+t*t),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[l-1].instance_number-e[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+m)}q=e[0].columns*e[0].rows;g=q*d;s=null;switch(e[0].an){case 8:s=new Uint8Array(g);break;case 16:s=new Uint16Array(g);break;case 32:s=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Nj=e[0].pixel_spacing;
for(var u=0;u<l;u++){var v=e[u].data,g=0;switch(m){case "image_position_patient":g=e[u].image_position_patient[0]-e[0].image_position_patient[0];p=e[u].image_position_patient[1]-e[0].image_position_patient[1];t=e[u].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+p*p+t*t)/e[0].pixel_spacing[2];break;case "instance_number":g=e[u].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+m)}s.set(v,g*q)}c.data=s;b.ta=s;b.ac=[e[0].columns,
e[0].rows,d];c.jN=b.ac;d=Ie(s);l=d[0];d=d[1];c.min=b.Jf=b.Kc=l;c.max=b.Wc=b.Jc=d;-Infinity==b.oc&&(b.oc=l);Infinity==b.qc&&(b.qc=d);p=e[0].image_position_patient;l=Hd();switch(m){case "image_position_patient":d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new ud(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=yd(d,g);Nd(l,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],
-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);Nd(l,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);Nd(l,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);Nd(l,3,0,0,0,1);break;case "instance_number":Nd(l,0,-1,0,0,-p[0]);Nd(l,1,-0,-1,-0,-p[1]);Nd(l,2,0,0,1,p[2]);
Nd(l,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+m)}c.lg=l;c.ng=Hd();Rd(c.lg,c.ng);m=Gd(0,0,0,1);e=Fd();Td(l,m,e);m=Gd(1,1,1,1);d=Fd();Td(l,m,d);c.Fm=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Ke(l,[b.ac[0],b.ac[1],b.ac[2]]);c.Dm=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.Em=[e[0],e[2],e[4]];b.ah(c);b.Oh=Pe(this,b)}c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};
Re.prototype.Uf=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Re.prototype.wk=function(a,b){this.ta=a;if("undefined"==typeof b.eb||null==b.eb)b.eb=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.j("ushort",this.ta.byteLength),e=66,g=null,l=null,m=null,q=null;e<d.length;)switch(g=d[e++],l=d[e++],m=d[e++],q=d[e++],"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==q&&(q=m),g){case 2:switch(l){case 16:for(var p="",g=g=0;g<q/2;g++)m=d[e++],l=m&255,
m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);c.transfer_syntax_uid=p.replace(/\0/g,"");break;default:e=Re.prototype.Uf(d,e,m,q)}break;case 40:switch(l){case 16:c.rows=d[e];e+=q/2;break;case 17:c.columns=d[e];e+=q/2;break;case 256:c.an=d[e];e+=q/2;break;case 257:c.bits_stored=d[e];e+=q/2;break;case 2:c.number_of_images=d[e];e+=q/2;break;case 48:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);p=p.split("\\");c.pixel_spacing=
[parseFloat(p[0]),parseFloat(p[1]),Infinity];break;default:e=Re.prototype.Uf(d,e,m,q)}break;case 32:switch(l){case 14:c.series_instance_uid="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,c.series_instance_uid+=String.fromCharCode(l),c.series_instance_uid+=String.fromCharCode(m);break;case 19:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);c.instance_number=parseInt(p,10);break;case 50:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>
8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);p=p.split("\\");c.image_position_patient=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])];break;case 55:p="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,p+=String.fromCharCode(l),p+=String.fromCharCode(m);p=p.split("\\");c.image_orientation_patient=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]),parseFloat(p[4]),parseFloat(p[5])];break;default:e=Re.prototype.Uf(d,e,m,q)}break;case 65534:switch(l){default:q=0,e+=q/
2}break;case 8:switch(l){case 24:c.sop_instance_uid="";for(g=0;g<q/2;g++)m=d[e++],l=m&255,m=(m&65280)>>8,c.sop_instance_uid+=String.fromCharCode(l),c.sop_instance_uid+=String.fromCharCode(m);break;default:e=Re.prototype.Uf(d,e,m,q)}break;case 16:switch(l){case 8720:for(g=0;g<q/2;g++)e++;break;default:e=Re.prototype.Uf(d,e,m,q)}break;default:e=Re.prototype.Uf(d,e,m,q)}switch(c.an){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=
new Uint32Array(c.columns*c.rows)}this.pb=this.ta.byteLength-c.columns*c.rows*2;d=null;switch(c.an){case 8:d=this.j("uchar",c.columns*c.rows);break;case 16:d=this.j("ushort",c.columns*c.rows);break;case 32:d=this.j("uint",c.columns*c.rows)}c.data=d;b.eb.push(c);return b};h("X.parserDCM",Re);h("X.parserDCM.prototype.parse",Re.prototype.parse);function Se(){He.call(this);this.t="parserVTK"}k(Se,He);
Se.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.J,e=b.ya,g=new Uint8Array(c),l="";b.J=d=new id(c.byteLength);b.ya=e=new id(c.byteLength);c=0;for(var m=g.length;c<m;c+=32768)l+=Je(g,c,Math.min(c+32768,m));g=l.split("\n");l=g.length;this.Pq=this.Qq=null;this.Pm=[];this.wg=Zd;this.hx=this.al=this.Vk=this.bl=!1;c=0;for(m=l%8;m--;)Te(this,g[c]),c++;for(m=.125*l^0;m--;)Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),c++,Te(this,g[c]),
c++,Te(this,g[c]),c++;c=this.Qq;var g=this.Pq,l=g.length,q=m=this.Pm.length;do{var p=this.Pm[m-q],t=p.length,s;for(s=0;s<t&&!("LINES"==this.wg&&s+1>=t);s++){var u=parseInt(p[s],10),v=c.get(u);d.add(v[0],v[1],v[2]);var D=u,B=v;"LINES"==this.wg?(D=parseInt(p[s+1],10),B=c.get(D),d.add(B[0],B[1],B[2])):"TRIANGLE_STRIPS"==this.wg&&(0!=s&&s!=t-1||d.add(v[0],v[1],v[2]));u<l?(B=g.get(u),e.add(B[0],B[1],B[2]),"LINES"==this.wg?(D=g.get(D),e.add(D[0],D[1],D[2])):"TRIANGLE_STRIPS"==this.wg&&(0!=s&&s!=t-1||e.add(B[0],
B[1],B[2]))):(D=new ud(v[0],v[1],v[2]),D.normalize(),e.add(D.x,D.y,D.z),"LINES"==this.wg?(D=new ud(B[0],B[1],B[2]),D.normalize(),e.add(D.x,D.y,D.z)):"TRIANGLE_STRIPS"==this.wg&&(0!=s&&s!=t-1||e.add(D.x,D.y,D.z)))}q--}while(0<q);b.lf=this.wg;n.cf(this.t+".parse");d=new ce;d.qb=b;d.Za=a;this.dispatchEvent(d)};
function Te(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.bl=!0;a.Vk=!1;a.al=!1;c=parseInt(c[1],10);a.Qq=new id(3*c);a.Pq=new id(3*c);return;case "VERTICES":a.Vk=!0;a.bl=!1;a.al=!1;c=parseInt(c[1],10);if(3<=c)a.wg=Zd;else if(1==c)a.wg="POINTS";else throw Error("This VTK file is not supported!");a.Pm=[];return;case "TRIANGLE_STRIPS":a.Vk=!0;a.bl=!1;a.al=!1;a.wg="TRIANGLE_STRIPS";a.Pm=[];return;case "LINES":a.Vk=!0;a.bl=!1;a.al=!1;a.wg="LINES";a.Pm=
[];return;case "POLYGONS":a.Vk=!0;a.bl=!1;a.al=!1;a.wg="POLYGONS";a.Pm=[];return;case "POINT_DATA":a.al=!0;a.bl=!1;a.Vk=!1;return}if(a.bl)if(1==d||isNaN(parseFloat(e)))a.bl=!1;else{if(3<=d){var e=parseFloat(c[0]),g=parseFloat(c[1]),l=parseFloat(c[2]);a.Qq.add(e,g,l)}6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),l=parseFloat(c[5]),a.Qq.add(e,g,l));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Qq.add(d,e,c))}else a.Vk?1==d||isNaN(parseFloat(e))?a.Vk=!1:(c=c.slice(1),a.Pm.push(c)):
a.al&&("NORMALS"==e?a.hx=!0:1==d||isNaN(parseFloat(e))?(a.al=!1,a.hx=!1):a.hx&&(3<=d&&(e=parseFloat(c[0]),g=parseFloat(c[1]),l=parseFloat(c[2]),a.Pq.add(e,g,l)),6<=d&&(e=parseFloat(c[3]),g=parseFloat(c[4]),l=parseFloat(c[5]),a.Pq.add(e,g,l)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Pq.add(d,e,c))))}h("X.parserVTK",Se);h("X.parserVTK.prototype.parse",Se.prototype.parse);function Ue(){He.call(this);this.t="parserFSM";this.Nt=!1}k(Ue,He);
Ue.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;var d=b.J,e=b.ya;b.Ko=[];var g=b.Ko;c=0;var l;do l=this.j("uchar"),c++;while(200>c&&10!=l);this.j("uchar");e=this.j("uint");c=this.j("uint");var m=this.j("float",3*e);l=this.j("uint",3*c);var q=new Uint32Array(e),p=new Float32Array(9*c);b.J=d=new id(9*c);b.ya=e=new id(9*c);var t;for(t=0;t<c;t++){var s=3*t,u=l[s],v=l[s+1],D=l[s+2];g.push(u);g.push(v);g.push(D);q[u]+=1;q[v]+=1;q[D]+=1;var s=3*u,B=3*v,I=3*D,G=m[s],Q=m[s+1],M=m[s+2],v=
m[B],D=m[B+1],u=m[B+2],L=m[I],J=m[I+1],H=m[I+2];d.add(G,Q,M);d.add(v,D,u);d.add(L,J,H);G=new ud(G,Q,M);L=new ud(L,J,H);v=(new ud(v,D,u)).clone().Ld(G);D=L.clone().Ld(G);v=yd(v,D).normalize();p[s]+=v.x;p[s+1]+=v.y;p[s+2]+=v.z;p[B]+=v.x;p[B+1]+=v.y;p[B+2]+=v.z;p[I]+=v.x;p[I+1]+=v.y;p[I+2]+=v.z}for(t=0;t<c;t++)s=3*t,u=l[s],v=l[s+1],D=l[s+2],s=3*u,B=3*v,I=3*D,g=new ud(p[B],p[B+1],p[B+2]),m=new ud(p[I],p[I+1],p[I+2]),s=(new ud(p[s],p[s+1],p[s+2])).scale(1/q[u]).normalize(),g=g.scale(1/q[v]).normalize(),
m=m.scale(1/q[D]).normalize(),e.add(s.x,s.y,s.z),e.add(g.x,g.y,g.z),e.add(m.x,m.y,m.z);c=this.j("uchar",this.ta.byteLength-this.pb);l=null;for(s=0;s<c.length;s++)if(99==c[s]&&114==c[s+1]&&97==c[s+2]&&115==c[s+3]){for(e=l=s+9;10!=c[s]&&s<c.length;)e++,s++;l=Je(c.subarray(l,e)).split(" ");break}l&&(b.pd.EJ(parseFloat(l[0])),b.pd.FJ(parseFloat(l[1])),b.pd.GJ(parseFloat(l[2])));b.lf=Zd;n.cf(this.t+".parse");c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};h("X.parserFSM",Ue);
h("X.parserFSM.prototype.parse",Ue.prototype.parse);var Ve={Lx:function(a,b,c){return Ve.update(a,0,b,c)},update:function(a,b,c,d){var e=Ve.rL,g="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(g=d&7;g--;++c)b=b>>>8^e[(b^a[c])&255];for(g=d>>3;g--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},We;
We=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Ve.rL=We;function Xe(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,g,l,m,q,p,t,s,u;for(s=0;s<b;++s)a[s]>c&&(c=a[s]),a[s]<d&&(d=a[s]);e=1<<c;g=new Uint32Array(e);l=1;m=0;for(q=2;l<=c;){for(s=0;s<b;++s)if(a[s]===l){p=0;t=m;for(u=0;u<l;++u)p=p<<1|t&1,t>>=1;for(u=p;u<e;u+=q)g[u]=l<<16|s;++m}++l;m<<=1;q<<=1}return[g,c,d]};function Ye(a,b){this.Fx=[];this.Hx=32768;this.Yh=this.Wq=this.Ub=this.uB=0;this.input=new Uint8Array(a);this.gE=!1;this.Ix=Ze;this.resize=!1;if(b||!(b={}))b.index&&(this.Ub=b.index),b.bufferSize&&(this.Hx=b.bufferSize),b.bufferType&&(this.Ix=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Ix){case $e:this.vd=32768;this.tb=new Uint8Array(32768+this.Hx+258);break;case Ze:this.vd=0;this.tb=new Uint8Array(this.Hx);this.tn=this.zN;this.uE=this.MM;this.jy=this.aN;break;default:throw Error("invalid inflate mode");
}}var $e=0,Ze=1;
Ye.prototype.sl=function(){for(;!this.gE;){var a=af(this,3);a&1&&(this.gE=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.Ub,c=this.tb,d=this.vd,e=void 0,g=void 0,l=void 0,m=c.length,e=void 0;this.Yh=this.Wq=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");g=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");g|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");l=e;
e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");l|=e<<8;if(g===~l)throw Error("invalid uncompressed block header: length verify");if(b+g>a.length)throw Error("input buffer is broken");switch(this.Ix){case $e:for(;d+g>c.length;)e=m-d,g-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.vd=d,c=this.tn(),d=this.vd;break;case Ze:for(;d+g>c.length;)c=this.tn({xF:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+g),d);d+=g;this.Ub=b+=g;this.vd=
d;this.tb=c;break;case 1:this.jy(bf,cf);break;case 2:df(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.uE()};
var ef=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ff=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),gf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),hf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),jf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),kf=new Uint8Array(288),
lf,mf;lf=0;for(mf=kf.length;lf<mf;++lf)kf[lf]=143>=lf?8:255>=lf?9:279>=lf?7:8;var bf=Xe(kf),nf=new Uint8Array(30),of,pf;of=0;for(pf=nf.length;of<pf;++of)nf[of]=5;var cf=Xe(nf);function af(a,b){for(var c=a.Wq,d=a.Yh,e=a.input,g=a.Ub,l;d<b;){l=e[g++];if(void 0===l)throw Error("input buffer is broken");c|=l<<d;d+=8}l=c&(1<<b)-1;a.Wq=c>>>b;a.Yh=d-b;a.Ub=g;return l}
function qf(a,b){for(var c=a.Wq,d=a.Yh,e=a.input,g=a.Ub,l=b[0],m=b[1],q;d<m;){q=e[g++];if(void 0===q)throw Error("input buffer is broken");c|=q<<d;d+=8}e=l[c&(1<<m)-1];l=e>>>16;a.Wq=c>>l;a.Yh=d-l;a.Ub=g;return e&65535}
function df(a){function b(a,b,c){var d,e,g;for(g=0;g<a;)switch(d=qf(this,b),d){case 16:for(d=3+af(this,2);d--;)c[g++]=e;break;case 17:for(d=3+af(this,3);d--;)c[g++]=0;e=0;break;case 18:for(d=11+af(this,7);d--;)c[g++]=0;e=0;break;default:e=c[g++]=d}return c}var c=af(a,5)+257,d=af(a,5)+1,e=af(a,4)+4,g=new Uint8Array(ef.length),l;for(l=0;l<e;++l)g[ef[l]]=af(a,3);e=Xe(g);g=new Uint8Array(c);l=new Uint8Array(d);a.jy(Xe(b.call(a,c,e,g)),Xe(b.call(a,d,e,l)))}f=Ye.prototype;
f.jy=function(a,b){var c=this.tb,d=this.vd;this.TE=a;for(var e=c.length-258,g,l,m;256!==(g=qf(this,a));)if(256>g)d>=e&&(this.vd=d,c=this.tn(),d=this.vd),c[d++]=g;else for(g-=257,m=ff[g],0<gf[g]&&(m+=af(this,gf[g])),g=qf(this,b),l=hf[g],0<jf[g]&&(l+=af(this,jf[g])),d>=e&&(this.vd=d,c=this.tn(),d=this.vd);m--;)c[d]=c[d++-l];for(;8<=this.Yh;)this.Yh-=8,this.Ub--;this.vd=d};
f.aN=function(a,b){var c=this.tb,d=this.vd;this.TE=a;for(var e=c.length,g,l,m;256!==(g=qf(this,a));)if(256>g)d>=e&&(c=this.tn(),e=c.length),c[d++]=g;else for(g-=257,m=ff[g],0<gf[g]&&(m+=af(this,gf[g])),g=qf(this,b),l=hf[g],0<jf[g]&&(l+=af(this,jf[g])),d+m>e&&(c=this.tn(),e=c.length);m--;)c[d]=c[d++-l];for(;8<=this.Yh;)this.Yh-=8,this.Ub--;this.vd=d};
f.tn=function(){var a=new Uint8Array(this.vd-32768),b=this.vd-32768,c=this.tb;a.set(c.subarray(32768,a.length));this.Fx.push(a);this.uB+=a.length;c.set(c.subarray(b,b+32768));this.vd=32768;return c};f.zN=function(a){var b=this.input.length/this.Ub+1|0,c=this.input,d=this.tb;a&&("number"===typeof a.xF&&(b=a.xF),"number"===typeof a.dM&&(b+=a.dM));2>b?(a=(c.length-this.Ub)/this.TE[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.tb=a};
f.uE=function(){var a=0,b=this.tb,c=this.Fx,d,e=new Uint8Array(this.uB+(this.vd-32768)),g,l,m,q;if(0===c.length)return this.tb.subarray(32768,this.vd);g=0;for(l=c.length;g<l;++g)for(d=c[g],m=0,q=d.length;m<q;++m)e[a++]=d[m];g=32768;for(l=this.vd;g<l;++g)e[a++]=b[g];this.Fx=[];return this.buffer=e};f.MM=function(){var a,b=this.vd;this.resize?(a=new Uint8Array(b),a.set(this.tb.subarray(0,b))):a=this.tb.subarray(0,b);return this.buffer=a};new Uint8Array(256);var rf;for(rf=0;256>rf;++rf)for(var sf=rf,tf=7,sf=sf>>>1;sf;sf>>>=1)--tf;var uf=[],vf;for(vf=0;288>vf;vf++)switch(!0){case 143>=vf:uf.push([vf+48,8]);break;case 255>=vf:uf.push([vf-144+400,9]);break;case 279>=vf:uf.push([vf-256+0,7]);break;case 287>=vf:uf.push([vf-280+192,8]);break;default:throw"invalid literal: "+vf;}
var wf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(wf);function xf(){};function yf(a){this.input=a;this.Ub=0;this.member=[]}
yf.prototype.sl=function(){for(var a=this.input.length;this.Ub<a;){var b=new xf,c=void 0,d=void 0,e=void 0,g=c=e=void 0,l=void 0,c=c=void 0,m=this.input,d=this.Ub;b.id1=m[d++];b.id2=m[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=m[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=m[d++];c=m[d++]|m[d++]<<8|m[d++]<<16|m[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=m[d++];b.os=m[d++];0<(b.flg&4)&&(b.xlen=m[d++]|m[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){l=[];for(g=0;0<(c=m[d++]);)l[g++]=String.fromCharCode(c);b.name=l.join("")}if(0<(b.flg&16)){l=[];for(g=0;0<(c=m[d++]);)l[g++]=String.fromCharCode(c);b.comment=l.join("")}if(0<(b.flg&2)&&(b.crc16=Ve.Lx(m,0,d)&65535,b.crc16!==(m[d++]|m[d++]<<8)))throw Error("invalid header crc16");c=m[m.length-4]|m[m.length-3]<<8|m[m.length-2]<<16|m[m.length-1]<<24;m.length-d-4-4<512*c&&(e=c);d=new Ye(m,{index:d,bufferSize:e});b.data=e=d.sl();d=d.Ub;b.crc32=c=(m[d++]|m[d++]<<8|m[d++]<<16|
m[d++]<<24)>>>0;if(Ve.Lx(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Ve.Lx(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(m[d++]|m[d++]<<8|m[d++]<<16|m[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.Ub=d}a=this.member;b=e=d=0;for(m=a.length;b<m;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<m;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function zf(){He.call(this);this.t="parserMGZ";this.Nt=!1}k(zf,He);
zf.prototype.parse=function(a,b,c,d){n.Ef(this.t+".parse");d&&(c=(new yf(new Uint8Array(c))).sl(),c=c.buffer);d=this.wk(c);var e=[d.Zz,d.$z,d.aA];b.ac=e;var g=d.OJ;b.Nj=g;c=d.min;var l=d.max;b.Jf=b.Kc=c;b.Wc=b.Jc=l;-Infinity==b.oc&&(b.oc=c);Infinity==b.qc&&(b.qc=l);c=Hd();Nd(c,0,d.Gh[0][0],d.Gh[1][0],d.Gh[2][0],0);Nd(c,1,d.Gh[0][1],d.Gh[1][1],d.Gh[2][1],0);Nd(c,2,d.Gh[0][2],d.Gh[1][2],d.Gh[2][2],0);Nd(c,3,0,0,0,1);for(var l=e[0]/2,m=e[1]/2,q=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.Gh[3][p]-(c[p+0]*g[0]*
l+c[p+4]*g[1]*m+c[p+8]*g[2]*q);g=e[1];l=e[2];c[12]=e[0];c[13]=g;c[14]=l;c[15]=1;d.lg=c;d.ng=Hd();Rd(d.lg,d.ng);e=Gd(0,0,0,1);g=Fd();Td(c,e,g);l=Gd(1,1,1,1);e=Fd();Td(c,l,e);c=Ke(c,b.ac);d.Fm=[e[0]-g[0],e[1]-g[1],e[2]-g[2]];d.Dm=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.Em=[c[0],c[2],c[4]];b.ah(d);n.cf(this.t+".parse");b.Oh=Pe(this,b);d=new ce;d.qb=b;d.Za=a;this.dispatchEvent(d)};
zf.prototype.wk=function(a){this.ta=a;a={version:0,uL:0,sL:0,QN:0,tL:0,Zz:0,$z:0,aA:0,aR:0,type:0,qN:0,lI:0,BV:null,Gh:null,OJ:null,data:null,min:Infinity,max:-Infinity};a.version=this.j("uint");a.Zz=this.j("uint");a.$z=this.j("uint");a.aA=this.j("uint");a.aR=this.j("uint");a.type=this.j("uint");a.qN=this.j("uint");a.lI=this.j("ushort");if(0<a.lI){a.OJ=this.j("float",3);var b=[];b.push(this.j("float",3));b.push(this.j("float",3));b.push(this.j("float",3));b.push(this.j("float",3));a.Gh=b}this.pb=
284;b=a.Zz*a.$z*a.aA;switch(a.type){case 0:a.data=this.j("uchar",b);break;case 1:a.data=this.j("uint",b);break;case 3:a.data=this.j("float",b);break;case 4:a.data=this.j("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=Ie(a.data);a.min=b[0];a.max=b[1];this.pb+16<this.ta.byteLength&&(a.uL=this.j("float"),a.QN=this.j("float"),a.sL=this.j("float"),a.tL=this.j("float"));return a};h("X.parserMGZ",zf);h("X.parserMGZ.prototype.parse",zf.prototype.parse);function Af(){He.call(this);this.t="parserLBL"}k(Af,He);
Af.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.Ko,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this.ta=c;var g=[],l=this.j("uchar",c.byteLength),m=l.length,q=!1,p=0;for(c=1;c<m;c++)10==l[c-1]?(p=c,q=!0):q&&32==l[c]&&(g.push(parseInt(Je(l,p,c),10)),q=!1);l=b.Ob.Nb?b.Ob.Nb:new Float32Array(e);m=g.length;for(c=0;c<m;c++)l[g[c]]=1;g=new Float32Array(3*e);for(c=m=0;c<e;c++){q=d[c];if(q>e)throw Error("Could not find scalar for vertex.");q=l[q];g[m++]=q;g[m++]=
q;g[m++]=q}b.Ob.Nb=l;b.Ob.vq=g;b.Ob.T=!0;n.cf(this.t+".parse");d=new ce;d.qb=b;d.Za=a;this.dispatchEvent(d)};h("X.parserLBL",Af);h("X.parserLBL.prototype.parse",Af.prototype.parse);function Bf(){He.call(this);this.t="parserCRV";this.Nt=!1}k(Bf,He);
Bf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.Ko;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this.ta=c;this.pb=3;var e=this.j("uint");this.j("uint");this.j("uint");var g=0,l=0,m=0,q=0,p=0,t=0,s=0,u=0,v=0,D=0,B=0;c=Array(2);var I=Array(2),G=this.j("float",e),Q;for(Q=0;Q<e;Q++){var M=G[Q];0==Q&&(c[0]=I[0]=M);0<=M?(g++,q+=M):(l++,m+=M);v+=M;B++;I[0]=Math.max(M,I[0]);c[0]=Math.min(M,c[0]);G[Q]=M}0!=g&&(p=q/g);0!=l&&(t=m/l);0!=B&&(D=v/B);for(B=v=m=q=0;B<e;B++)M=
G[B],Q=0,0<=M?(Q=Math.pow(M-p,2),q+=Q):(Q=Math.pow(M-t,2),m+=Q),Q=Math.pow(M-D,2),v+=Q;1<g&&(s=Math.sqrt(q/(g-1)));1<l&&(u=Math.sqrt(m/(l-1)));c[1]=t-2.5*u;I[1]=p+2.5*s;e=d.length;g=new Float32Array(3*e);for(B=0;B<e;B++)l=G[d[B]],m=3*B,g[m]=l,g[m+1]=l,g[m+2]=l;b.Ob.Jf=c[1];b.Ob.Wc=I[1];-Infinity==b.Ob.oc&&(b.Ob.oc=c[1]);Infinity==b.Ob.qc&&(b.Ob.qc=I[1]);b.Ob.Nb=G;b.Ob.vq=g;b.Ob.T=!0;n.cf(this.t+".parse");d=new ce;d.qb=b;d.Za=a;this.dispatchEvent(d)};h("X.parserCRV",Bf);
h("X.parserCRV.prototype.parse",Bf.prototype.parse);function Cf(a,b){var c,d;this.input=a;this.Ub=0;if(b||!(b={}))b.index&&(this.Ub=b.index),b.verify&&(this.rU=b.verify);c=a[this.Ub++];d=a[this.Ub++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.mI=new Ye(a,{index:this.Ub,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Cf.prototype.sl=function(){var a=this.input,b;b=this.mI.sl();this.Ub=this.mI.Ub;if(this.rU){var a=(a[this.Ub++]<<24|a[this.Ub++]<<16|a[this.Ub++]<<8|a[this.Ub++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var g=c.length,l,m=0;0<g;){l=1024<g?1024:g;g-=l;do d+=c[m++],e+=d;while(--l);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Df(){He.call(this);this.t="parserRAW"}k(Df,He);
Df.prototype.parse=function(a,b,c,d){n.Ef(this.t+".parse");d&&(c=(new Cf(new Uint8Array(c))).sl(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=Ie(d.data);c=e[0];e=e[1];d.min=b.Jf=b.Kc=c;d.max=b.Wc=b.Jc=e;-Infinity==b.oc&&(b.oc=c);Infinity==b.qc&&(b.qc=e);e=Id();d.lg=e;d.ng=Id();var g=Gd(0,0,0,1);c=Fd();Td(e,g,c);var l=Gd(1,1,1,1),g=Fd();Td(e,l,g);e=Ke(e,b.ac);d.Fm=[g[0]-c[0],g[1]-c[1],g[2]-c[2]];d.Dm=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.Em=[e[0],e[2],e[4]];b.ah(d);n.cf(this.t+".parse");b.Oh=
Pe(this,b);d=new ce;d.qb=b;d.Za=a;this.dispatchEvent(d)};h("X.parserRAW",Df);h("X.parserRAW.prototype.parse",Df.prototype.parse);function Ef(){He.call(this);this.t="parserIMAGE"}k(Ef,He);Ef.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),g=e.length,l=Array(g);g--;)l[g]=String.fromCharCode(e[g]);e=window.btoa(l.join(""));g=new Image;Yc(g,"load",this.ES.bind(this,g,a,b,c,d));g.src="data:image/"+d+";base64,"+e};Ef.prototype.ES=function(a,b,c){b.Oh=a;b.dl=null;a=new ce;a.qb=c;a.Za=b;this.dispatchEvent(a)};h("X.parserIMAGE",Ef);h("X.parserIMAGE.prototype.parse",Ef.prototype.parse);function Ff(){He.call(this);this.t="parserLUT"}k(Ff,He);
Ff.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;c=this.j("uchar",c.byteLength);var d=c.length,e=0,g;for(g=0;g<d;g++)if(10==c[g]){var l=Je(c,e,g),e=g+1,l=l.replace(/^\s+|\s+$/g,"");"#"!=l[0]&&(l=l.split(" "),l=l.filter(function(a){return""!=a}),6==l.length&&(l[2]=parseInt(l[2],10)/255,l[3]=parseInt(l[3],10)/255,l[4]=parseInt(l[4],10)/255,l[5]=parseInt(l[5],10)/255,a.add(parseInt(l[0],10),l[1],l[2],l[3],l[4],l[5],10)))}n.cf(this.t+".parse");c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};
h("X.parserLUT",Ff);h("X.parserLUT.prototype.parse",Ff.prototype.parse);function Gf(){He.call(this);this.t="parserMRC"}k(Gf,He);
Gf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");c=this.wk(c);var d=c.min,e=c.max;b.ac=[c.bs,c.cs,c.ds];b.Nj=[c.xlen/c.GH,c.VJ/c.HH,c.XJ/c.IH];b.Jf=b.Kc=d;b.Wc=b.Jc=e;-Infinity==b.oc&&(b.oc=d);Infinity==b.qc&&(b.qc=e);e=Hd();Nd(e,3,0,0,0,1);Nd(e,0,-1,0,0,c.bs);Nd(e,1,0,0,-1,c.cs);Nd(e,2,0,-1,0,c.ds);c.lg=e;c.ng=Hd();Rd(c.lg,c.ng);var g=Gd(0,0,0,1),d=Fd();Td(e,g,d);var l=Gd(1,1,1,1),g=Fd();Td(e,l,g);l=[c.bs,c.cs,c.ds];e=Ke(e,l);c.Fm=[g[0]-d[0],g[1]-d[1],g[2]-d[2]];c.Dm=[e[1]+e[0]+1,e[3]-e[2]+
1,e[5]-e[4]+1];c.Em=[e[0],e[2],e[4]];b.ac=l;b.ah(c);b.Oh=Pe(this,b);n.cf(this.t+".parse");c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};
Gf.prototype.wk=function(a){this.ta=a;a={bs:0,cs:0,ds:0,mode:0,GY:0,HY:0,IY:0,GH:0,HH:0,IH:0,xlen:0,VJ:0,XJ:0,alpha:0,beta:0,gamma:0,KQ:0,LQ:0,MQ:0,Cx:0,du:0,$m:0,vY:0,next:0,ZM:0,sb:null,dR:0,fR:0,sb:null,eQ:0,oY:0,bQ:0,$d:0,ZQ:0,$Q:0,pU:0,qU:0,fU:null,wU:0,yU:0,DU:0,QX:0,UY:0,nT:0,eR:0,data:null,min:Infinity,max:-Infinity,CY:0,kJ:null,TY:null,OY:null,orientation:null,FY:null};this.pb=0;a.bs=this.j("sint");a.cs=this.j("sint");a.ds=this.j("sint");a.mode=this.j("sint");var b=a.bs*a.cs*a.ds;this.pb=
1024;switch(a.mode){case 0:a.data=this.j("schar",b);break;case 1:a.data=this.j("sshort",b);break;case 2:a.data=this.j("float",b);break;case 3:a.data=this.j("uint",b);break;case 4:a.data=this.j("double",b);break;case 6:a.data=this.j("ushort",b);break;case 16:a.data=this.j("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.pb=28;a.GH=this.j("sint");a.HH=this.j("sint");a.IH=this.j("sint");a.xlen=this.j("float");a.VJ=this.j("float");a.XJ=this.j("float");a.alpha=this.j("float");
a.beta=this.j("float");a.gamma=this.j("float");a.KQ=this.j("sint");a.LQ=this.j("sint");a.MQ=this.j("sint");a.Cx=this.j("float");a.du=this.j("float");a.$m=this.j("float");a.uY=this.j("sint");a.next=this.j("sint");a.ZM=this.j("short");a.dR=this.j("short");a.fR=this.j("short");a.eQ=this.j("sint");a.nY=this.j("sint");a.bQ=this.j("short");a.$d=this.j("short");a.ZQ=this.j("short");a.$Q=this.j("short");a.pU=this.j("short");a.qU=this.j("short");a.fU=this.j("float",6);this.pb=196;a.wU=this.j("float");a.yU=
this.j("float");a.DU=this.j("float");this.pb=216;a.nT=this.j("float");a.eR=this.j("sint");a.yY=this.j("schar",10);if(0!=a.next)switch(this.pb=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.j("schar",b);break;case 1:a.data=this.j("sshort",b);break;case 2:a.data=this.j("float",b);break;case 3:a.data=this.j("uint",b);break;case 4:a.data=this.j("double",b);break;case 6:a.data=this.j("ushort",b);break;case 16:a.data=this.j("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.$m-(a.du-a.$m)?(a.min=a.Cx,a.max=a.$m+(a.$m-a.Cx)):(a.min=a.$m-(a.du-a.$m),a.max=a.du);return a};h("X.parserMRC",Gf);h("X.parserMRC.prototype.parse",Gf.prototype.parse);function Hf(){He.call(this);this.t="parserNRRD"}k(Hf,He);
Hf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;c=this.j("uchar",c.byteLength);var d=c.length,e=null,g=0,l;for(l=1;l<d;l++)if(10==c[l-1]&&10==c[l]){e=Je(c,0,l-2);g=l+1;break}var m,q,p,t,d=e.split(/\r?\n/),e=0;for(l=d.length;e<l;e++)m=d[e],m.match(/NRRD\d+/)?this.yQ=!0:!m.match(/^#/)&&(t=m.match(/(.*):(.*)/))&&(q=t[1].trim(),m=t[2].trim(),(p=this.IN[q])?p.call(this,m):this[q]=m);if(!this.yQ)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.fd&&(this.fd=[new ud(1,0,0),new ud(0,1,0),new ud(0,0,1)],this.hB))for(d=[],t=0;2>=t;t++)d.push(isNaN(this.hB[t])?void 0:this.fd[t].scale(this.hB[t]));g=c.subarray(g);if("gzip"==this.encoding||"gz"==this.encoding)g=(new yf(new Uint8Array(g))).sl();g=g.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.Uk(g);t=Ie(c.data);g=c.min=t[0];t=c.max=t[1];b.Jf=b.Kc=g;b.Wc=b.Jc=t;b.ac=[this.dB[0],this.dB[1],this.dB[2]];
d=(new ud(this.fd[0][0],this.fd[0][1],this.fd[0][2])).oi();e=(new ud(this.fd[1][0],this.fd[1][1],this.fd[1][2])).oi();l=(new ud(this.fd[2][0],this.fd[2][1],this.fd[2][2])).oi();b.Nj=[d,e,l];-Infinity==b.oc&&(b.oc=g);Infinity==b.qc&&(b.qc=t);d=t=1;"left-posterior-superior"==this.kJ&&(d=t=-1);g=Id();Nd(g,0,t*this.fd[0][0],t*this.fd[1][0],t*this.fd[2][0],t*this.gB[0]);Nd(g,1,d*this.fd[0][1],d*this.fd[1][1],d*this.fd[2][1],d*this.gB[1]);Nd(g,2,1*this.fd[0][2],1*this.fd[1][2],1*this.fd[2][2],1*this.gB[2]);
Nd(g,3,0,0,0,1);c.lg=g;c.ng=Hd();Rd(c.lg,c.ng);d=Gd(0,0,0,1);t=Fd();Td(g,d,t);e=Gd(1,1,1,1);d=Fd();Td(g,e,d);g=Ke(g,b.ac);c.Fm=[d[0]-t[0],d[1]-t[1],d[2]-t[2]];c.Dm=[g[1]-g[0]+1,g[3]-g[2]+1,g[5]-g[4]+1];c.Em=[g[0],g[2],g[4]];b.ah(c);n.cf(this.t+".parse");b.Oh=Pe(this,b);c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};
Hf.prototype.IN={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Uk=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Uk=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Uk=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Uk=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Uk=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Uk=Uint32Array;break;case "float":this.Uk=Float32Array;break;case "double":this.Uk=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.eY=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.tl=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.dB=e},space:function(a){return this.kJ=a},"space origin":function(a){return this.gB=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.fd=function(){var a,g,l;l=[];a=0;for(g=c.length;a<g;a++)d=c[a],l.push(function(){var a,c,e,g;e=d.slice(1,-1).split(/,/);g=[];a=0;for(c=e.length;a<c;a++)b=e[a],g.push(parseFloat(b));return g}());return l}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.hB=e}};h("X.parserNRRD",Hf);h("X.parserNRRD.prototype.parse",Hf.prototype.parse);function If(){He.call(this);this.t="parserSTL"}k(If,He);
If.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;var d=b.J,e=b.ya;if("solid"==Je(this.j("uchar",5))){b.J=d=new id(c.byteLength);b.ya=e=new id(c.byteLength);var g=d,d=e,e=this.j("uchar",c.byteLength-5);c=e.length;var l=!1,m=!1,q=0,p;for(p=0;p<c;p++)if(10==e[p]){if(l||m){var t=Je(e,q,p).split(" "),m=parseFloat(t[0]),s=parseFloat(t[1]),t=parseFloat(t[2]);l?(d.add(m,s,t),d.add(m,s,t),d.add(m,s,t)):g.add(m,s,t);m=l=!1}}else 32==e[p-1]&&(102==e[p]?(q=p+=13,l=!0):118==e[p]&&(q=p+=7,m=!0))}else for(this.pb=
80,g=this.j("uint"),b.J=d=new id(9*g),b.ya=e=new id(9*g),c=c=0;c<g;c++)l=this.j("float",12),q=l[0],p=l[1],m=l[2],e.add(q,p,m),e.add(q,p,m),e.add(q,p,m),d.add(l[3],l[4],l[5]),d.add(l[6],l[7],l[8]),d.add(l[9],l[10],l[11]),this.pb+=2;n.cf(this.t+".parse");g=new ce;g.qb=b;g.Za=a;this.dispatchEvent(g)};h("X.parserSTL",If);h("X.parserSTL.prototype.parse",If.prototype.parse);function Jf(){He.call(this);this.t="parserNII"}k(Jf,He);
Jf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new yf(new Uint8Array(d))).sl(),d=d.buffer);c=this.wk(d);d=c.min;e=c.max;b.Jf=b.Kc=d;b.Wc=b.Jc=e;-Infinity==b.oc&&(b.oc=d);Infinity==b.qc&&(b.qc=e);d=Hd();Nd(d,3,0,0,0,1);if(0<c.LA){var e=0,g=c.iI,l=c.jI,m=c.kI,q=1,p=1,t=1,s=c.fI,u=c.gI,v=c.hI,e=1-(g*g+l*l+m*m);1E-7>e?(e=1/Math.sqrt(g*g+l*l+m*m),g*=e,l*=e,m*=e,e=0):e=Math.sqrt(e);0<c.si[1]&&(q=c.si[1]);
0<c.si[2]&&(p=c.si[2]);0<c.si[2]&&(t=c.si[3]);0>c.si[0]&&(t=-t);Nd(d,0,(e*e+g*g-l*l-m*m)*q,2*(g*l-e*m)*p,2*(g*m+e*l)*t,s);Nd(d,1,2*(g*l+e*m)*q,(e*e+l*l-g*g-m*m)*p,2*(l*m-e*g)*t,u);Nd(d,2,2*(g*m-e*l)*q,2*(l*m+e*g)*p,(e*e+m*m-l*l-g*g)*t,v)}else 0<c.eJ?(e=c.mJ,g=c.nJ,l=c.oJ,Nd(d,0,e[0],e[1],e[2],e[3]),Nd(d,1,g[0],g[1],g[2],g[3]),Nd(d,2,l[0],l[1],l[2],l[3])):0==c.LA?(Nd(d,0,c.si[1],0,0,0),Nd(d,1,0,c.si[2],0,0),Nd(d,2,0,0,c.si[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.lg=d;c.ng=Hd();
Rd(c.lg,c.ng);g=Gd(0,0,0,1);e=Fd();Td(d,g,e);l=Gd(1,1,1,1);g=Fd();Td(d,l,g);l=[c.tl[1],c.tl[2],c.tl[3]];d=Ke(d,l);c.Fm=[g[0]-e[0],g[1]-e[1],g[2]-e[2]];c.Dm=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.Em=[d[0],d[2],d[4]];b.ac=l;b.ah(c);b.Oh=Pe(this,b);c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};
Jf.prototype.wk=function(a){this.ta=a;a={JT:0,$o:null,$M:null,BN:0,vT:0,$S:0,iN:null,tl:null,qQ:0,rQ:0,sQ:0,oQ:0,hy:0,zM:0,OT:0,si:null,QJ:0,tT:0,sT:0,NT:0,LT:null,xU:null,FM:0,GM:0,MT:0,hU:0,GP:0,HP:0,fN:null,vM:null,LA:0,eJ:0,iI:0,jI:0,kI:0,fI:0,gI:0,hI:0,mJ:null,nJ:null,oJ:null,pQ:null,Dp:null,data:null,min:Infinity,max:-Infinity};a.JT=this.j("uint");a.$o=this.j("uchar",10);a.$M=this.j("uchar",18);a.BN=this.j("uint");a.vT=this.j("ushort");a.$S=this.j("uchar");a.iN=this.j("uchar");a.tl=this.j("ushort",
8);a.qQ=this.j("float");a.rQ=this.j("float");a.sQ=this.j("float");a.oQ=this.j("ushort");a.hy=this.j("ushort");a.zM=this.j("ushort");a.OT=this.j("ushort");a.si=this.j("float",8);a.QJ=this.j("float");a.tT=this.j("float");a.sT=this.j("float");a.NT=this.j("ushort");a.LT=this.j("uchar");a.xU=this.j("uchar");a.FM=this.j("float");a.GM=this.j("float");a.MT=this.j("float");a.hU=this.j("float");a.GP=this.j("uint",1);a.HP=this.j("uint",1);a.fN=this.j("uchar",80);a.vM=this.j("uchar",24);a.LA=this.j("ushort");
a.eJ=this.j("ushort");a.iI=this.j("float");a.jI=this.j("float");a.kI=this.j("float");a.fI=this.j("float");a.gI=this.j("float");a.hI=this.j("float");a.mJ=this.j("float",4);a.nJ=this.j("float",4);a.oJ=this.j("float",4);a.pQ=this.j("uchar",16);a.Dp=this.j("uchar",4);this.pb=parseInt(a.QJ,10);var b=a.tl[1]*a.tl[2]*a.tl[3];switch(a.hy){case 2:a.data=this.j("uchar",b);break;case 4:a.data=this.j("sshort",b);break;case 8:a.data=this.j("sint",b);break;case 16:a.data=this.j("float",b);break;case 32:a.data=
this.j("complex",b);break;case 64:a.data=this.j("double",b);break;case 256:a.data=this.j("schar",b);break;case 512:a.data=this.j("ushort",b);break;case 768:a.data=this.j("uint",b);break;default:throw Error("Unsupported NII data type: "+a.hy);}b=Ie(a.data);a.min=b[0];a.max=b[1];return a};h("X.parserNII",Jf);h("X.parserNII.prototype.parse",Jf.prototype.parse);function Kf(){He.call(this);this.t="parserTRK"}k(Kf,He);
Kf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");var d=b.J,e=b.ya,g=b.Ud;this.ta=c;this.j("uchar",6);this.j("ushort",3);var l=this.j("float",3);this.j("float",3);var m=this.j("ushort");this.j("uchar",200);this.j("ushort");this.j("uchar",200);c=this.j("float",16);this.j("uchar",444);this.j("uchar",4);this.j("uchar",4);this.j("float",6);this.j("uchar",2);this.j("uchar");this.j("uchar");this.j("uchar");this.j("uchar");this.j("uchar");this.j("uchar");var q=this.j("uint");this.j("uint");var p=
this.j("uint"),t=[],s=[],u=Infinity,v=-Infinity,D=null,B=null,I=null,G=null,e=d=null,Q=this.j("uint",(this.ta.byteLength-1E3)/4);this.pb=p;for(var M=this.j("float",(this.ta.byteLength-1E3)/4),L=0,p=g=0;p<q;p++){for(var J=Q[L],H=new id(3*J),O=0,N=0;N<J;N++){var Y=M[L+3*N+N*m+1],K=M[L+3*N+N*m+2],y=M[L+3*N+N*m+3],Y=Y/l[0],K=K/l[1],y=y/l[2];H.add(Y,K,y);if(0<N)var z=H.get(N-1),O=O+Math.sqrt(Math.pow(Y-z[0],2)+Math.pow(K-z[1],2)+Math.pow(y-z[2],2));N<J-1&&(g+=6)}L+=3*J+J*m+1;N=H.Sh;J=H.Ph;Y=H.Th;K=H.Qh;
y=H.Uh;z=H.Rh;if(!D||N<D)D=N;if(!B||J>B)B=J;if(!I||Y<I)I=Y;if(!G||K>G)G=K;if(!d||y<d)d=y;if(!e||z>e)e=z;t.push(H);s.push(O)}l=(D+B)/2;I=(I+G)/2;m=(d+e)/2;G=new Float32Array(g);b.J=d=new id(g);b.ya=e=new id(g);b.Ud=g=new id(g);for(p=D=0;p<q;p++)for(B=t[p],Q=B.count,O=s[p],u=Math.min(u,O),v=Math.max(v,O),N=0;N<Q-1;N++){L=B.get(N);M=B.get(N+1);d.add(L[0],L[1],L[2]);d.add(M[0],M[1],M[2]);var H=L[0]-l,J=L[1]-I,Y=L[2]-m,K=Math.sqrt(H*H+J*J+Y*Y),y=M[0]-l,z=M[1]-I,ga=M[2]-m,Z=Math.sqrt(y*y+z*z+ga*ga);e.add(H/
K,J/K,Y/K);e.add(y/Z,z/Z,ga/Z);M=[Math.abs(M[0]-L[0]),Math.abs(M[1]-L[1]),Math.abs(M[2]-L[2])];L=Math.sqrt(M[0]*M[0]+M[1]*M[1]+M[2]*M[2]);M[0]/=L;M[1]/=L;M[2]/=L;g.add(M[0],M[1],M[2]);g.add(M[0],M[1],M[2]);G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O;G[D++]=O}b.lf="LINES";q=new ae;q.Jf=u;q.Wc=v;q.oc=u;q.qc=v;q.vq=G;q.lD=!1;q.T=!0;b.Ob=q;u=!1;for(p=0;16>p;p++)if(0!=c[p]){u=!0;break}!1==u&&(c[0]=c[5]=c[10]=c[15]=1);n.cf(this.t+".parse");n.B.wB(c,b.pd.pc);c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};
h("X.parserTRK",Kf);h("X.parserTRK.prototype.parse",Kf.prototype.parse);function Lf(){He.call(this);this.t="parserOBJ"}k(Lf,He);
Lf.prototype.parse=function(a,b,c){n.Ef(this.t+".parse");this.ta=c;c=c.byteLength;var d=this.j("uchar",c),e=[];b.J=new id(c);b.ya=new id(c);var g=b.J,l=b.ya,m=0,q;for(q=0;q<c;++q)if(10==d[q]){var p=Je(d,m,q).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var t=e[parseInt(p[1],10)-1],m=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];g.add(t[0],t[1],t[2]);g.add(m[0],m[1],m[2]);g.add(p[0],p[1],p[2]);t=new ud(t[0],t[1],t[2]);
p=new ud(p[0],p[1],p[2]);m=yd((new ud(m[0],m[1],m[2])).Ld(t),p.Ld(t));m.normalize();l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z)}m=q+1}n.cf(this.t+".parse");c=new ce;c.qb=b;c.Za=a;this.dispatchEvent(c)};h("X.parserOBJ",Lf);h("X.parserOBJ.prototype.parse",Lf.prototype.parse);function Mf(){hd.call(this);this.t="loader";this.Io=new od;this.Iq=0}k(Mf,hd);function Nf(a,b){a.Iq+=b/a.Io.ek()/3;a.Iq=Math.min(1,a.Iq);var c=new De;c.Vm=a.Iq;a.dispatchEvent(c)}function Of(a){a=a.Ca.Rt;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Pf))throw Error("The "+b+" file format is not supported.");return[a,b,Pf[b][0],Pf[b][1],Pf[b][2]]}
Mf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!qd(this.Io.rc,a.Fe)||this.Io.get(a.Fe)){this.Io.set(a.Fe,!1);var c=Of(a)[0];if(null!=a.Mi)this.parse(null,a,b);else{var d=new XMLHttpRequest;C(d,"abort",this.qF.bind(this,d,a,b));C(d,"error",this.qF.bind(this,d,a,b));C(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Mf.prototype.parse=function(a,b,c){Nf(this,1);setTimeout(function(){var d=Of(b),e=d[3],d=new d[2];Yc(d,ne,this.complete.bind(this));var g=b.Mi;null==g&&(g=a.response,b.Mi=g);d.parse(b,c,g,e)}.bind(this),100)};Mf.prototype.complete=function(a){Nf(this,1);setTimeout(function(){var b=a.Za,c=a.qb;b.Ca.T=!1;b.T=!0;c.Ba();this.Io.set(b.Fe,!0)}.bind(this),100)};Mf.prototype.qF=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Pf={OBJ:[Lf,null],OFF:[Qe,null],STL:[If,null],VTK:[Se,null],TRK:[Kf,null],MRC:[Gf,null],ST:[Gf,null],FSM:[Ue,null],INFLATED:[Ue,null],SMOOTHWM:[Ue,null],SPHERE:[Ue,null],PIAL:[Ue,null],ORIG:[Ue,null],NRRD:[Hf,null],NII:[Jf,null],GZ:[Jf,null],DCM:[Re,null],DICOM:[Re,null],"":[Re,null],CRV:[Bf,null],LABEL:[Af,null],MGH:[zf,!1],MGZ:[zf,!0],RAW:[Df,!1],RZ:[Df,!0],TXT:[Ff,null],LUT:[Ff,null],PNG:[Ef,"png"],JPG:[Ef,"jpeg"],JPEG:[Ef,"jpeg"],GIF:[Ef,"gif"]};function Qf(){He.call(this);this.t="parserIMA"}k(Qf,He);
Qf.prototype.parse=function(a,b,c){b.Ej={};b.Ej.Wr=0;this.wk(c,b);if(null==b.Ca.length||b.eb.length==b.Ca.length){b.Ej.Wr=b.Ca.length;var d={};c={};for(var e=0;e<b.eb.length;e++)d.hasOwnProperty(b.eb[e].series_instance_uid)||(d[b.eb[e].series_instance_uid]=[],c[b.eb[e].series_instance_uid]={}),c[b.eb[e].series_instance_uid].hasOwnProperty(b.eb[e].sop_instance_uid)||(c[b.eb[e].series_instance_uid][b.eb[e].sop_instance_uid]=!0,d[b.eb[e].series_instance_uid].push(b.eb[e]));var g=Object.keys(d)[0],e=
d[g],l=e.length;c={};console.log("FIRST IMAGE",e,d,g);var m="image_position_patient";1==l?(m="image_position_patient",d[g][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(m="image_position_patient",d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new ud(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=yd(d,g),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(m="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),m="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<l)switch(m){case "image_position_patient":var q=e[0].image_position_patient,d=e[1].image_position_patient,g=d[0]-q[0],p=d[1]-q[1],t=d[2]-q[2];e[0].pixel_spacing[2]=Math.sqrt(g*g+p*p+
t*t);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+m)}else e[0].pixel_spacing[2]=1;d=1;switch(m){case "image_position_patient":var q=e[0].image_position_patient,s=e[l-1].image_position_patient,g=s[0]-q[0],p=s[1]-q[1],t=s[2]-q[2],g=Math.sqrt(g*g+p*p+t*t),d=d+Math.round(g/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[l-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+m)}q=e[0].columns*e[0].rows;g=q*d;s=null;switch(e[0].an){case 8:s=new Uint8Array(g);break;case 16:s=new Uint16Array(g);break;case 32:s=new Uint32Array(g);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Nj=e[0].pixel_spacing;for(var u=0;u<l;u++){var v=e[u].data,g=0;switch(m){case "image_position_patient":g=e[u].image_position_patient[0]-e[0].image_position_patient[0];p=e[u].image_position_patient[1]-
e[0].image_position_patient[1];t=e[u].image_position_patient[2]-e[0].image_position_patient[2];g=Math.sqrt(g*g+p*p+t*t)/e[0].pixel_spacing[2];break;case "instance_number":g=e[u].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+m)}s.set(v,g*q)}c.data=s;b.ta=s;b.ac=[e[0].columns,e[0].rows,d];c.jN=b.ac;d=Ie(s);l=d[0];d=d[1];c.min=b.Jf=b.Kc=l;c.max=b.Wc=b.Jc=d;-Infinity==b.oc&&(b.oc=l);Infinity==b.qc&&(b.qc=d);p=e[0].image_position_patient;l=Hd();
switch(m){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);g=new ud(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=yd(d,g);Nd(l,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);Nd(l,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);Nd(l,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);Nd(l,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new ud(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),g=new ud(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=yd(d,g),Nd(l,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),Nd(l,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),Nd(l,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(Nd(l,0,1,0,0,-p[0]),Nd(l,1,0,-1,-0,-p[1]),Nd(l,2,0,0,1,p[2]));Nd(l,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+m)}c.lg=l;c.ng=Hd();Rd(c.lg,c.ng);m=Gd(0,0,0,1);e=Fd();Td(l,m,e);m=Gd(1,1,1,1);d=Fd();Td(l,m,d);c.Fm=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Ke(l,[b.ac[0],b.ac[1],b.ac[2]]);c.Dm=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.Em=[e[0],e[2],e[4]];b.ah(c);b.Oh=Pe(this,b)}c=new ce;c.qb=b;c.Za=
a;this.dispatchEvent(c)};Qf.prototype.Uf=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Qf.prototype.wk=function(a,b){this.ta=a;if("undefined"==typeof b.eb||null==b.eb)b.eb=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.j("ushort",this.ta.byteLength),e=66,g=null,l=null,m=null,q=null,p=[[8,4368],[8,4384]],t=!1;e<d.length;){for(var g=d[e++],l=d[e++],m=d[e++],q=d[e++],t=!1,s=0,u=p.length;s<u;s++)if(g===p[s][0]&&l===p[s][1]){t=!0;break}if(t)window.console.log("Skipping ",
"("+g.toString(16)+","+l.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==q&&(q=m),g){case 2:switch(l){case 16:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Qf.prototype.Uf(d,e,m,q)}break;case 40:switch(l){case 16:c.rows=d[e];e+=q/2;break;case 17:c.columns=d[e];e+=q/2;break;case 256:c.an=d[e];e+=q/2;break;case 257:c.bits_stored=d[e];e+=q/2;break;case 2:c.number_of_images=
d[e];e+=q/2;break;case 48:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=Qf.prototype.Uf(d,e,m,q)}break;case 32:switch(l){case 14:c.series_instance_uid="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.series_instance_uid+=String.fromCharCode(g),c.series_instance_uid+=String.fromCharCode(m);break;case 19:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,
m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);l=l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,l+=String.fromCharCode(g),l+=String.fromCharCode(m);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),
parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];break;default:e=Qf.prototype.Uf(d,e,m,q)}break;case 24:switch(l){case 36:c.sequence_name="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.sequence_name+=String.fromCharCode(g),c.sequence_name+=String.fromCharCode(m);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.slice_thickness+=
String.fromCharCode(g),c.slice_thickness+=String.fromCharCode(m);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Qf.prototype.Uf(d,e,m,q);break}case 65534:switch(l){default:q=0,e+=q/2}break;case 8:switch(l){case 24:c.sop_instance_uid="";for(s=0;s<q/2;s++)m=d[e++],g=m&255,m=(m&65280)>>8,c.sop_instance_uid+=String.fromCharCode(g),c.sop_instance_uid+=String.fromCharCode(m);break;default:e=Qf.prototype.Uf(d,e,m,q)}break;case 16:switch(l){case 8720:for(s=0;s<q/2;s++)e++;break;default:e=
Qf.prototype.Uf(d,e,m,q)}break;default:e=Qf.prototype.Uf(d,e,m,q)}}switch(c.an){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.pb=this.ta.byteLength-c.columns*c.rows*2;d=null;switch(c.an){case 8:d=this.j("uchar",c.columns*c.rows);break;case 16:d=this.j("ushort",c.columns*c.rows);break;case 32:d=this.j("uint",c.columns*c.rows)}c.data=d;b.eb.push(c);return b};h("X.parserIMA",Qf);
h("X.parserIMA.prototype.parse",Qf.prototype.parse);var Rf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Sf=nc;function Tf(a,b){if(Sf){Sf=!1;var c=ba.location;if(c){var d=c.href;if(d&&(d=(d=Tf(3,d))&&decodeURIComponent(d))&&d!=c.hostname)throw Sf=!0,Error();}}return b.match(Rf)[a]||null};function Uf(a,b){fd.call(this);this.yp=a||1;this.Yp=b||ba;this.Gx=wa(this.eU,this);this.wz=ya()}k(Uf,fd);f=Uf.prototype;f.enabled=!1;f.ed=null;f.eU=function(){if(this.enabled){var a=ya()-this.wz;0<a&&a<.8*this.yp?this.ed=this.Yp.setTimeout(this.Gx,this.yp-a):(this.ed&&(this.Yp.clearTimeout(this.ed),this.ed=null),this.dispatchEvent(Vf),this.enabled&&(this.ed=this.Yp.setTimeout(this.Gx,this.yp),this.wz=ya()))}};
f.start=function(){this.enabled=!0;this.ed||(this.ed=this.Yp.setTimeout(this.Gx,this.yp),this.wz=ya())};f.stop=function(){this.enabled=!1;this.ed&&(this.Yp.clearTimeout(this.ed),this.ed=null)};f.i=function(){Uf.g.i.call(this);this.stop();delete this.Yp};var Vf="tick";function Wf(a,b,c){if(na(a))c&&(a=wa(a,c));else if(a&&"function"==typeof a.handleEvent)a=wa(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function Xf(a){return"function"==typeof a.ek?a.ek():ja(a)||ka(a)?a.length:pb(a)}function Yf(a){if("function"==typeof a.yn)return a.yn();if(ka(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return qb(a)}function Zf(a){if("function"==typeof a.wr)return a.wr();if("function"!=typeof a.yn){if(ja(a)||ka(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return rb(a)}}
function $f(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ja(a)||ka(a))A(a,b,void 0);else for(var c=Zf(a),d=Yf(a),e=d.length,g=0;g<e;g++)b.call(void 0,d[g],c&&c[g],a)}function ag(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ja(a)||ka(a))return Jb(a,b,void 0);for(var c=Zf(a),d=Yf(a),e=d.length,g=0;g<e;g++)if(!b.call(void 0,d[g],c&&c[g],a))return!1;return!0};function bg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function cg(){}cg.prototype.lE=null;function dg(a){var b;(b=a.lE)||(b={},eg(a)&&(b[0]=!0,b[1]=!0),b=a.lE=b);return b};var fg;function gg(){}k(gg,cg);function hg(a){return(a=eg(a))?new ActiveXObject(a):new XMLHttpRequest}function eg(a){if(!a.RG&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.RG=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.RG}fg=new gg;function ig(a){this.rc=new od;a&&this.ux(a)}function jg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+pa(a):b.substr(0,1)+a}f=ig.prototype;f.ek=function(){return this.rc.ek()};f.add=function(a){this.rc.set(jg(a),a)};f.ux=function(a){a=Yf(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.wh=function(a){a=Yf(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.rc.remove(jg(a))};f.clear=function(){this.rc.clear()};f.Mr=function(){return this.rc.Mr()};
f.contains=function(a){a=jg(a);return qd(this.rc.rc,a)};f.YG=function(a){var b=new ig;a=Yf(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.yn=function(){return this.rc.yn()};f.clone=function(){return new ig(this)};f.fp=function(a){return this.ek()==Xf(a)&&kg(this,a)};
function kg(a,b){var c=Xf(b);if(a.ek()>c)return!1;!(b instanceof ig)&&5<c&&(b=new ig(b));return ag(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.Zx?c.Zx(a):ja(c)||ka(c)?Mb(c,a):sb(c,a)})};function lg(a){var b;b||(b=mg(a||arguments.callee.caller,[]));return b}
function mg(a,b){var c=[];if(Mb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(ng(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=ng(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(mg(a.caller,b))}catch(l){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ng(a){if(og[a])return og[a];a=String(a);if(!og[a]){var b=/function ([^\(]+)/.exec(a);og[a]=b?b[1]:"[Anonymous]"}return og[a]}var og={};function pg(a,b,c,d,e){this.reset(a,b,c,d,e)}pg.prototype.oF=null;pg.prototype.nF=null;var qg=0;pg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||qg++;d||ya();this.Tr=a;this.YQ=b;delete this.oF;delete this.nF};pg.prototype.JI=function(a){this.Tr=a};function rg(a){this.Mn=a;this.JG=this.Vd=this.Tr=this.ub=null}function sg(a,b){this.name=a;this.value=b}sg.prototype.toString=function(){return this.name};var tg=new sg("SEVERE",1E3),ug=new sg("CONFIG",700),vg=new sg("FINE",500);f=rg.prototype;f.getName=function(){return this.Mn};f.getParent=function(){return this.ub};f.Hy=function(){this.Vd||(this.Vd={});return this.Vd};f.JI=function(a){this.Tr=a};
function wg(a){if(a.Tr)return a.Tr;if(a.ub)return wg(a.ub);gb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=wg(this).value)for(na(b)&&(b=b()),a=this.dG(a,b,c,rg.prototype.log),b="log:"+a.YQ,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.JG)for(var e=0,g=void 0;g=c.JG[e];e++)g(d);b=b.getParent()}};
f.dG=function(a,b,c,d){a=new pg(a,String(b),this.Mn);if(c){a.oF=c;var e;d=d||rg.prototype.dG;try{var g;var l=da("window.location.href");if(ka(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:l,stack:"Not available"};else{var m,q;b=!1;try{m=c.lineNumber||c.AY||"Not available"}catch(p){m="Not available",b=!0}try{q=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||l}catch(t){q="Not available",b=!0}g=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:m,fileName:q,stack:c.stack||"Not available"}}e="Message: "+Oa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Oa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Oa(lg(d)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}a.nF=e}return a};f.mu=function(a,b){this.log(ug,a,b)};f.xs=function(a){this.ub=a};var xg={},yg=null;
function zg(a){yg||(yg=new rg(""),xg[""]=yg,yg.JI(ug));var b;if(!(b=xg[a])){b=new rg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=zg(a.substr(0,c));c.Hy()[d]=b;b.xs(c);xg[a]=b}return b};function Ag(a,b){a&&a.log(vg,b,void 0)};function Bg(a){fd.call(this);this.headers=new od;this.uw=a||null;this.gl=!1;this.tw=this.fb=null;this.Rr=this.gH=this.jv="";this.Fn=this.fz=this.Uu=this.vy=!1;this.Qs=0;this.lw=null;this.uI=Cg;this.pw=this.uU=!1}k(Bg,fd);var Cg="",Dg=Bg.prototype,Eg=zg("goog.net.XhrIo");Dg.nh=Eg;var Fg=/^https?$/i,Gg=["POST","PUT"],Hg=[];function Ig(a,b){var c=new Bg;Hg.push(c);b&&c.I("complete",b);c.Az("ready",c.JM);c.send(a,void 0,void 0,void 0)}f=Bg.prototype;f.JM=function(){this.k();Pb(Hg,this)};
f.send=function(a,b,c,d){if(this.fb)throw Error("[goog.net.XhrIo] Object is active with another request="+this.jv+"; newUri="+a);b=b?b.toUpperCase():"GET";this.jv=a;this.Rr="";this.gH=b;this.vy=!1;this.gl=!0;this.fb=this.uw?hg(this.uw):hg(fg);this.tw=this.uw?dg(this.uw):dg(fg);this.fb.onreadystatechange=wa(this.VH,this);try{Ag(this.nh,Jg(this,"Opening Xhr")),this.fz=!0,this.fb.open(b,String(a),!0),this.fz=!1}catch(e){Ag(this.nh,Jg(this,"Error opening Xhr: "+e.message));Kg(this,e);return}a=c||"";var g=
this.headers.clone();d&&$f(d,function(a,b){g.set(b,a)});d=Kb(g.wr());c=ba.FormData&&a instanceof ba.FormData;!Mb(Gg,b)||d||c||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");g.forEach(function(a,b){this.fb.setRequestHeader(b,a)},this);this.uI&&(this.fb.responseType=this.uI);"withCredentials"in this.fb&&(this.fb.withCredentials=this.uU);try{Lg(this),0<this.Qs&&(this.pw=Mg(this.fb),Ag(this.nh,Jg(this,"Will abort after "+this.Qs+"ms if incomplete, xhr2 "+this.pw)),this.pw?(this.fb.timeout=
this.Qs,this.fb.ontimeout=wa(this.BJ,this)):this.lw=Wf(this.BJ,this.Qs,this)),Ag(this.nh,Jg(this,"Sending request")),this.Uu=!0,this.fb.send(a),this.Uu=!1}catch(l){Ag(this.nh,Jg(this,"Send error: "+l.message)),Kg(this,l)}};function Mg(a){return lc&&uc(9)&&ma(a.timeout)&&ca(a.ontimeout)}function Lb(a){return"content-type"==a.toLowerCase()}f.BJ=function(){"undefined"!=typeof aa&&this.fb&&(this.Rr="Timed out after "+this.Qs+"ms, aborting",Ag(this.nh,Jg(this,this.Rr)),this.dispatchEvent("timeout"),this.abort(8))};
function Kg(a,b){a.gl=!1;a.fb&&(a.Fn=!0,a.fb.abort(),a.Fn=!1);a.Rr=b;Ng(a);Og(a)}function Ng(a){a.vy||(a.vy=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.fb&&this.gl&&(Ag(this.nh,Jg(this,"Aborting")),this.gl=!1,this.Fn=!0,this.fb.abort(),this.Fn=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Og(this))};f.i=function(){this.fb&&(this.gl&&(this.gl=!1,this.Fn=!0,this.fb.abort(),this.Fn=!1),Og(this,!0));Bg.g.i.call(this)};
f.VH=function(){this.ln||(this.fz||this.Uu||this.Fn?Pg(this):this.OR())};f.OR=function(){Pg(this)};
function Pg(a){if(a.gl&&"undefined"!=typeof aa)if(a.tw[1]&&4==Qg(a)&&2==Rg(a))Ag(a.nh,Jg(a,"Local request error detected and ignored"));else if(a.Uu&&4==Qg(a))Wf(a.VH,0,a);else if(a.dispatchEvent("readystatechange"),4==Qg(a)){Ag(a.nh,Jg(a,"Request complete"));a.gl=!1;try{var b=Rg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var g=Tf(1,String(a.jv));if(!g&&self.location)var l=self.location.protocol,g=l.substr(0,
l.length-1);e=!Fg.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var m;try{m=2<Qg(a)?a.fb.statusText:""}catch(q){Ag(a.nh,"Can not get status: "+q.message),m=""}a.Rr=m+" ["+Rg(a)+"]";Ng(a)}}finally{Og(a)}}}function Og(a,b){if(a.fb){Lg(a);var c=a.fb,d=a.tw[0]?ea:null;a.fb=null;a.tw=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.nh)&&c.log(tg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}
function Lg(a){a.fb&&a.pw&&(a.fb.ontimeout=null);ma(a.lw)&&(ba.clearTimeout(a.lw),a.lw=null)}f.dj=function(){return!!this.fb};function Qg(a){return a.fb?a.fb.readyState:0}function Rg(a){try{return 2<Qg(a)?a.fb.status:-1}catch(b){return-1}}function Jg(a,b){return b+" ["+a.gH+" "+a.jv+" "+Rg(a)+"]"};/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function P(){}h("gxnat",P);P.JPEG_CONVERT_SUFFIX="?format=image/jpeg";P.RN={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};P.QC="?format=zip";P.nk=function(a,b,c){a=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),a+=c);P.get(a,b,"json")};
P.get=function(a,b,c){Ig(a,function(a){a=a.target;switch(c){case void 0:b(a);case "json":var e;e=a.fb?bg(a.fb.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.fb?a.fb.responseText:""}catch(g){Ag(a.nh,"Can not get responseText: "+g.message),e=""}b(e)}})};
P.uv=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,g=/^0x[0-9a-f]+$/i,l=/^0/,m=(P.uv.nQ&&(""+a).toLowerCase()||""+a).replace(d,"")||"",q=(P.uv.nQ&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=m.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=q.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),m=parseInt(m.match(g))||1!=d.length&&m.match(e)&&Date.parse(m);if(e=parseInt(q.match(g))||m&&q.match(e)&&Date.parse(q)||null){if(m<e)return-1;if(m>e)return 1}m=0;for(q=Math.max(d.length,c.length);m<q;m++){e=!(d[m]||"").match(l)&&parseFloat(d[m])||d[m]||0;g=!(c[m]||"").match(l)&&parseFloat(c[m])||c[m]||0;if(isNaN(e)!==isNaN(g))return isNaN(e)?1:-1;typeof e!==typeof g&&(e+="",g+="");if(e<g)return-1;if(e>g)return 1}return 0};
P.QT=function(a,b){var c=[],d={},e=[],g={};A(a,function(a){g=a;A(b,function(a){g=g[a]});g=g.toLowerCase();c.push(g);d[g]=a});c=c.sort(P.JH);A(c,function(a){e.push(d[a])});return e};h("gxnat.JPEG_CONVERT_SUFFIX",P.JPEG_CONVERT_SUFFIX);h("gxnat.folderAbbrev",P.RN);h("gxnat.ZIP_SUFFIX",P.QC);h("gxnat.jsonGet",P.nk);h("gxnat.get",P.get);h("gxnat.naturalSort",P.uv);h("gxnat.sortXnatPropertiesArray",P.QT);P.ma=function(a){this.originalUrl=a;this.files=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}this.wF()};k(P.ma,Bc);h("gxnat.Path",P.ma);
P.ma.jG=function(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a};P.ma.Fy=function(a){for(var b=0,c=P.ma.Lk.length,b=0;b<c;b++)a(P.ma.Lk[b],b)};P.ma.fO=function(a,b){var c=new P.ma(a),d=new P.ma(b),e=void 0;P.ma.Fy(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e};P.ma.Xy=function(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]};
P.ma.Lk=["projects","subjects","experiments",["scans","resources"],"files"];P.ma.prototype.wF=function(){var a,b,c,d=!1;P.ma.Fy(function(e,g){if(ia(e))for(a=0,b=e.length;a<b;a++)c=e[a],null!=this[c]||d||(this.ky=P.ma.Lk[g-1],d=!0);else null!=this[e]||d||(this.ky=P.ma.Lk[g-1],d=!0)}.bind(this))};P.ma.prototype.Cu=function(){null!=this.ky||this.wF;return this.ky};
P.ma.prototype.xk=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,g=P.ma.Lk.length,l=0,d=0;d<g;d++){c=P.ma.Lk[d];if(ia(c))for(l=c.length,e=0;e<l;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};P.ma.prototype.k=function(){P.ma.g.k.call(this);wb(this)};h("gxnat.Path.getQueryPrefix",P.ma.jG);h("gxnat.Path.forEachXnatLevel",P.ma.Fy);
h("gxnat.Path.getDeepestSharedXnatLevel",P.ma.fO);h("gxnat.Path.graftUrl",P.ma.Xy);h("gxnat.Path.xnatLevelOrder",P.ma.Lk);h("gxnat.Path.prototype.getDeepestLevel",P.ma.prototype.Cu);h("gxnat.Path.prototype.pathByLevel",P.ma.prototype.xk);h("gxnat.Path.prototype.dispose",P.ma.prototype.k);P.n=function(a){this.rf=new P.ma(a);this.projects=[];this[P.n.Kw]={};this[P.n.Ji]={};this[P.n.sm]={}};k(P.n,Bc);h("gxnat.ProjectTree",P.n);function Sg(a){this[P.n.Cd]=ka(a)?new P.ma(a):a;this[P.n.oC]=this[P.n.Cd].Cu();a=P.ma.Lk.indexOf(this[P.n.Cd].Cu())+1;-1!=a&&(this[P.n.Am]=P.ma.Lk[a],ka(this[P.n.Am])&&(this[P.n.wC]=this[P.n.Cd].originalUrl+"/"+this[P.n.Am],this[this[P.n.Am]]=[]))}k(Sg,Bc);h("gxnat.ProjectTree.TreeNode",Sg);Sg.prototype.yh=function(a){this.Ae=a};Sg.prototype.Fg=function(){return this.Ae};
Sg.prototype.k=function(){Sg.g.k.call(this);null!=this[P.n.Cd]&&this[P.n.Cd].k();wb(this)};P.n.oC=r();P.n.wC=r();P.n.TK=r();P.n.Cd=r();P.n.Am=r();P.n.zm=r();P.n.yK=r();P.n.Be=r();P.n.Kw=r();P.n.Ji=r();P.n.sm=r();P.n.BC=["ID","description","name","URI"];P.n.Pw=["gender","handedness","label","URI"];P.n.ZB=["label","URI"];P.n.Vx=function(a,b){return Na(a.Fg(),b.Fg())};P.n.tr=function(a){var b="&columns=";A(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b};f=P.n.prototype;
f.KF=function(a){var b=[];w(this.rr(a),function(a,d){"projects"==d?b.push(a[P.n.Be].ID):b.push(a[P.n.Be].label)});return b};f.LF=function(a){var b=[];w(this.rr(a),function(a){b.push(a[P.n.Cd].originalUrl)});return b};f.rr=function(a){branch={projects:this.$e};"experiments"==a[P.n.Am]?branch.subjects=a:ia(a[P.n.Am])&&(branch.subjects=this[P.n.Ji][a[P.n.Cd].xk("subjects")],branch.experiments=a);return branch};f.nH=function(a,b){this.Vr(this.rf,a,b)};
f.Vr=function(a,b,c){var d=ka(a)?new P.ma(a):a,e;if(null!=this.$e){a={projects:this.$e};if(null!=d.subjects){e=d.xk("subjects");if(null==this[P.n.Ji][e]){this.Dz(e,function(a){this.pH(a,function(){null!=b&&b(a);this.Vr(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[P.n.Ji][e]}if(null!=d.experiments){e=d.xk("experiments");if(null==this[P.n.sm][e]){this.Cz(e,function(a){null!=b&&b(a);this.Vr(d,b,c)}.bind(this));return}a.experiments=this[P.n.sm][e]}null!=c&&c(a)}else this.oH(function(a){null!=
b&&b(a);this.Vr(d,b,c)}.bind(this))};f.oH=function(a){if(null==this.$e){var b=P.n.tr(P.n.BC),c=this.rf.prefix+"/projects/"+this.rf.projects,d;P.nk(this.rf.prefix+"/projects",function(b){d=new Sg(c);this.projects.push(d);this.$e=d;this[P.n.Kw][d[P.n.Cd].originalUrl]=d;d[P.n.Be]=b[0];d.yh(d[P.n.Be].name);a(d)}.bind(this),"&ID="+this.rf.projects+b)}};f.yr=function(a){return this[P.n.Ji][a]};f.lp=function(a){return this[P.n.sm][a]};
f.pH=function(a,b){var c=a;ka(a)?c=this.yr(a):a instanceof P.ma&&(c=this.yr(a.originalUrl));if(null!=c[P.n.Be])b(c);else{var d=this.rf.prefix+"/subjects",e=P.n.tr(P.n.Pw),e="&ID="+c[P.n.Cd].subjects+e;P.nk(d,function(a){c[P.n.Be]=a[0];c.yh(c[P.n.Be].label);b(c)}.bind(this),e)}};
f.qH=function(a,b){if(null==this.$e[P.n.zm]||!0!=this.$e[P.n.zm]){var c=this.$e[P.n.Cd].prefix+"/subjects",d="&project="+this.$e[P.n.Cd].projects+P.n.tr(P.n.Pw),e,g;P.nk(c,function(c){A(c,function(d){g=this.$e[P.n.Cd].prefix+"/projects/"+this.$e[P.n.Cd].projects+"/subjects/"+d.ID;e=this.Dz(g);null==e[P.n.Be]&&(e[P.n.Be]=d,e.yh(e[P.n.Be].label));null!=a&&a(e);this.$e.subjects.length==c.length&&(this.$e[P.n.zm]=!0,null!=b&&(d=this.$e.subjects,d.sort(P.n.Vx),b(d)))}.bind(this))}.bind(this),d)}};
f.Dz=function(a,b){if(null!=this[P.n.Ji][a])return this[P.n.Ji][a];subjNode=new Sg(a);this.$e.subjects.push(subjNode);this[P.n.Ji][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.lH=function(a,b){var c=a;ka(a)?c=this.lp(a):a instanceof P.ma&&(c=this.lp(a.originalUrl));var d=this.rf.prefix+"/experiments",e=P.n.tr(P.n.ZB),e="&ID="+c[P.n.Cd].experiments+e;P.nk(d,function(a){c[P.n.Be]=a[0];c.yh(c[P.n.Be].label);b(c)}.bind(this),e)};
f.mH=function(a,b,c){var d=a;ka(a)?d=this.yr(a):a instanceof P.ma&&(d=this.yr(a.originalUrl));if(null!=d[P.n.zm]&&!0==d[P.n.zm])window.console.log("Don't need to reload the experiments of "+d[P.n.Cd].originalUrl);else{var e=d[P.n.Cd].originalUrl+"/experiments";P.nk(e+"?xsiType=xnat:imageSessionData",function(a){A(a,function(l){this.Cz(e+"/"+l.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[P.n.zm]=!0,null!=c&&(e=d.experiments,e.sort(P.n.Vx),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.Cz=function(a,b){null==this[P.n.sm][a]&&(exptNode=new Sg(a),this.lH(exptNode,function(c){this[P.n.Ji][c[P.n.Cd].xk("subjects")].experiments.push(c);this[P.n.sm][a]=c;null!=b&&b(c)}.bind(this)))};f.k=function(){P.n.g.k.call(this);delete this.$e;this.rf.k();delete this.rf;A(this.projects,function(a){null!=a.subjects&&A(a.subjects,function(a){null!=a.experiments&&A(a.experiments,function(a){a.k()});a.k()});a.k()});wb(this)};h("gxnat.ProjectTree.TreeNode",Sg);h("gxnat.ProjectTree.LEVEL_KEY",P.n.oC);
h("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",P.n.wC);h("gxnat.ProjectTree.NEXTLEVELJSON_KEY",P.n.TK);h("gxnat.ProjectTree.PATH_KEY",P.n.Cd);h("gxnat.ProjectTree.NEXTLEVEL_KEY",P.n.Am);h("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",P.n.zm);h("gxnat.ProjectTree.ISLOADING_KEY",P.n.yK);h("gxnat.ProjectTree.METADATA_KEY",P.n.Be);h("gxnat.ProjectTree.PROJ_DIRECT",P.n.Kw);h("gxnat.ProjectTree.SUBJ_DIRECT",P.n.Ji);h("gxnat.ProjectTree.EXPT_DIRECT",P.n.sm);h("gxnat.ProjectTree.PROJECT_METADATA",P.n.BC);
h("gxnat.ProjectTree.SUBJECT_METADATA",P.n.Pw);h("gxnat.ProjectTree.EXPERIMENT_METADATA",P.n.ZB);h("gxnat.ProjectTree.compareNodeTitles",P.n.Vx);h("gxnat.ProjectTree.getColumnQuery",P.n.tr);h("gxnat.ProjectTree.prototype.getBranchTitles",P.n.prototype.KF);h("gxnat.ProjectTree.prototype.getBranchUris",P.n.prototype.LF);h("gxnat.ProjectTree.prototype.getBranchFromEndNode",P.n.prototype.rr);h("gxnat.ProjectTree.prototype.loadInitBranch",P.n.prototype.nH);h("gxnat.ProjectTree.prototype.loadBranch",P.n.prototype.Vr);
h("gxnat.ProjectTree.prototype.loadProject",P.n.prototype.oH);h("gxnat.ProjectTree.prototype.getSubjectNodeByUri",P.n.prototype.yr);h("gxnat.ProjectTree.prototype.getExperimentNodeByUri",P.n.prototype.lp);h("gxnat.ProjectTree.prototype.loadSubjectMetadata",P.n.prototype.pH);h("gxnat.ProjectTree.prototype.loadSubjects",P.n.prototype.qH);h("gxnat.ProjectTree.prototype.loadSubject",P.n.prototype.Dz);h("gxnat.ProjectTree.prototype.loadExperimentMetadata",P.n.prototype.lH);
h("gxnat.ProjectTree.prototype.loadExperiments",P.n.prototype.mH);h("gxnat.ProjectTree.prototype.loadExperiment",P.n.prototype.Cz);h("gxnat.ProjectTree.prototype.dispose",P.n.prototype.k);function Tg(a){a=a.className;return ka(a)&&a.match(/\S+/g)||[]}function R(a,b){var c=Tg(a),d=Tb(arguments,1),e=c.length+d.length;Ug(c,d);a.className=c.join(" ");return c.length==e}function Vg(a,b){var c=Tg(a),d=Tb(arguments,1),e=Wg(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Ug(a,b){for(var c=0;c<b.length;c++)Mb(a,b[c])||a.push(b[c])}function Wg(a,b){return Gb(a,function(a){return!Mb(b,a)})}
function Xg(a,b,c){var d=Tg(a);ka(b)?Pb(d,b):ia(b)&&(d=Wg(d,b));ka(c)&&!Mb(d,c)?d.push(c):ia(c)&&Ug(d,c);a.className=d.join(" ")};function Yg(a,b){this.x=ca(a)?a:0;this.y=ca(b)?b:0}f=Yg.prototype;f.clone=function(){return new Yg(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function Zg(a,b){return new Yg(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof Yg?(this.x+=a.x,this.y+=a.y):(this.x+=a,ma(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=ma(b)?b:a;this.x*=a;this.y*=c;return this};function $g(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=$g.prototype;f.clone=function(){return new $g(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof $g?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof Yg?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,ma(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=ma(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function ah(a,b){this.width=a;this.height=b}function bh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=ah.prototype;f.clone=function(){return new ah(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.Mr=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=ma(b)?b:a;this.width*=a;this.height*=c;return this};function ch(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=ch.prototype;f.clone=function(){return new ch(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.YG=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof ch?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function dh(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.ry=function(a){return Math.sqrt(dh(this,a))};f.Hl=function(){return new ah(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof Yg?(this.left+=a.x,this.top+=a.y):(this.left+=a,ma(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=ma(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function eh(){return nc?"Webkit":mc?"Moz":lc?"ms":kc?"O":null};var fh=!lc||vc(9),gh=!mc&&!lc||lc&&vc(9)||mc&&uc("1.9.1"),hh=lc&&!uc("9");function ih(a){return a?new jh(kh(a)):Da||(Da=new jh)}function lh(a){return ka(a)?document.getElementById(a):a}function mh(a,b,c){return nh(document,a,b,c)}function oh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):nh(document,"*",a,b)}function ph(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):nh(document,"*",a,b)[0])||null}
function nh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,g=0,l;l=a[g];g++)b==l.nodeName&&(d[e++]=l);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(g=e=0;l=a[g];g++)b=l.className,"function"==typeof b.split&&Mb(b.split(/\s+/),c)&&(d[e++]=l);d.length=e;return d}return a}
function qh(a,b){w(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in rh?a.setAttribute(rh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var rh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function sh(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new ah(a.clientWidth,a.clientHeight)}function th(a){return nc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function uh(a){return a?a.parentWindow||a.defaultView:window}function vh(a,b,c){return wh(document,arguments)}
function wh(a,b){var c=b[0],d=b[1];if(!fh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Oa(d.name),'"');if(d.type){c.push(' type="',Oa(d.type),'"');var e={};Bb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ka(d)?c.className=d:ia(d)?c.className=d.join(" "):qh(c,d));2<b.length&&xh(a,c,b,2);return c}
function xh(a,b,c,d){function e(c){c&&b.appendChild(ka(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];!ja(g)||oa(g)&&0<g.nodeType?e(g):A(yh(g)?Rb(g):g,e)}}function zh(a,b){xh(kh(a),a,arguments,1)}function Ah(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Bh(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function S(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function Ch(a){return gh&&void 0!=a.children?a.children:Gb(a.childNodes,function(a){return 1==a.nodeType})}function Dh(a){return void 0!=a.firstElementChild?a.firstElementChild:Eh(a.firstChild)}function Fh(a){return void 0!=a.nextElementSibling?a.nextElementSibling:Eh(a.nextSibling)}function Eh(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Gh(a){return oa(a)&&1==a.nodeType}
function Hh(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function Ih(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var g=[],l=arguments[b];l;)g.unshift(l),l=l.parentNode;d.push(g);e=Math.min(e,g.length)}g=null;for(b=0;b<e;b++){for(var l=d[0][b],m=1;m<c;m++)if(l!=d[m][b])return g;g=l}return g}function kh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Jh(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Ah(a),a.appendChild(kh(a).createTextNode(String(b)))}var Kh={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Lh={IMG:" ",BR:"\n"};function Mh(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function Nh(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function Oh(a){a=a.tabIndex;return ma(a)&&0<=a&&32768>a}function Ph(a){if(hh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Qh(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");hh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Rh(a){var b=[];Qh(a,b,!1);return b.join("")}
function Qh(a,b,c){if(!(a.nodeName in Kh))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Lh)b.push(Lh[a.nodeName]);else for(a=a.firstChild;a;)Qh(a,b,c),a=a.nextSibling}function yh(a){if(a&&"number"==typeof a.length){if(oa(a))return"function"==typeof a.item||"string"==typeof a.item;if(na(a))return"function"==typeof a.item}return!1}
function Sh(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return Th(a,function(a){return(!d||a.nodeName==d)&&(!c||ka(a.className)&&Mb(a.className.split(/\s+/),c))})}function Th(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function jh(a){this.Sa=a||ba.document||document}f=jh.prototype;f.da=ih;function Uh(a){return a.Sa}f.b=function(a){return ka(a)?this.Sa.getElementById(a):a};f.YJ=jh.prototype.b;f.C=function(a,b,c){return wh(this.Sa,arguments)};f.createElement=function(a){return this.Sa.createElement(a)};
f.createTextNode=function(a){return this.Sa.createTextNode(String(a))};function Vh(a){return"CSS1Compat"==a.Sa.compatMode}function Wh(a){a=a.Sa;return a.parentWindow||a.defaultView}function Xh(a){var b=a.Sa;a=th(b);b=b.parentWindow||b.defaultView;return lc&&uc("10")&&b.pageYOffset!=a.scrollTop?new Yg(a.scrollLeft,a.scrollTop):new Yg(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.append=zh;f.jz=Bh;f.removeNode=S;f.Hy=Ch;f.VF=Dh;f.contains=Hh;
f.lk=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!Nh(a)||Oh(a)):Nh(a)&&Oh(a))&&lc?(a=na(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function Yh(a,b,c){ka(b)?Zh(a,c,b):w(b,xa(Zh,a))}function Zh(a,b,c){a:if(c=cb(c),void 0===a.style[c]){var d=eh()+eb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function $h(a,b){var c=kh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function ai(a,b){return $h(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function bi(a){return ai(a,"position")}
function ci(a,b,c){var d,e=mc&&(gc||qc)&&uc("1.9");b instanceof Yg?(d=b.x,b=b.y):(d=b,b=c);a.style.left=di(d,e);a.style.top=di(b,e)}function ei(a){return new Yg(a.offsetLeft,a.offsetTop)}function fi(a){a=a?kh(a):document;return!lc||vc(9)||Vh(ih(a))?a.documentElement:a.body}
function gi(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}lc&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function hi(a){if(lc&&!vc(8))return a.offsetParent;var b=kh(a),c=ai(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=ai(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function ii(a){for(var b=new $g(0,Infinity,Infinity,0),c=ih(a),d=c.Sa.body,e=c.Sa.documentElement,g=th(c.Sa);a=hi(a);)if(!(lc&&0==a.clientWidth||nc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=ai(a,"overflow")){var l=ji(a),m;m=a;if(mc&&!uc("1.9")){var q=parseFloat($h(m,"borderLeftWidth"));if(li(m))var p=m.offsetWidth-m.clientWidth-q-parseFloat($h(m,"borderRightWidth")),q=q+p;m=new Yg(q,parseFloat($h(m,"borderTopWidth")))}else m=new Yg(m.clientLeft,m.clientTop);l.x+=m.x;l.y+=m.y;b.top=Math.max(b.top,
l.y);b.right=Math.min(b.right,l.x+a.clientWidth);b.bottom=Math.min(b.bottom,l.y+a.clientHeight);b.left=Math.max(b.left,l.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=sh(Wh(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function ji(a){var b,c=kh(a),d=ai(a,"position"),e=mc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Yg(0,0),l=fi(c);if(a==l)return g;if(a.getBoundingClientRect)b=gi(a),a=Xh(ih(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(l),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);
if(nc&&"fixed"==bi(b)){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(kc||nc&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=hi(b))&&b!=c.body&&b!=l;)g.x-=b.scrollLeft,kc&&"TR"==b.tagName||(g.y-=b.scrollTop)}return g}function mi(a,b){var c=ni(a),d=ni(b);return new Yg(c.x-d.x,c.y-d.y)}
function oi(a){var b;if(a.getBoundingClientRect)b=gi(a),b=new Yg(b.left,b.top);else{b=Xh(ih(a));var c=ji(a);b=new Yg(c.x-b.x,c.y-b.y)}if(mc&&!uc(12)){b:{c=cb("transform");if(void 0===a.style[c]&&(c=eh()+eb(c),void 0!==a.style[c])){c=(nc?"-webkit":mc?"-moz":lc?"-ms":kc?"-o":null)+"-transform";break b}c="transform"}a=(a=ai(a,c)||ai(a,"transform"))?(a=a.match(pi))?new Yg(parseFloat(a[1]),parseFloat(a[2])):new Yg(0,0):new Yg(0,0);a=new Yg(b.x+a.x,b.y+a.y)}else a=b;return a}
function ni(a){if(1==a.nodeType)return oi(a);var b=na(a.XN),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Zd.targetTouches&&(c=a.Zd.targetTouches[0]);return new Yg(c.clientX,c.clientY)}function qi(a,b,c){if(b instanceof ah)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");ri(a,b);si(a,c)}function di(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function si(a,b){a.style.height=di(b,!0)}function ri(a,b){a.style.width=di(b,!0)}
function ti(a){var b=ui;if("none"!=ai(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,g=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=g;c.visibility=e;return a}function ui(a){var b=a.offsetWidth,c=a.offsetHeight,d=nc&&!b&&!c;return ca(b)&&!d||!a.getBoundingClientRect?new ah(b,c):(a=gi(a),new ah(a.right-a.left,a.bottom-a.top))}function vi(a){var b=ji(a);a=ti(a);return new ch(b.x,b.y,a.width,a.height)}
function wi(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function xi(a,b){a.style.display=b?"":"none"}function yi(a){lc&&ca(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function li(a){return"rtl"==ai(a,"direction")}var zi=mc?"MozUserSelect":nc?"WebkitUserSelect":null;
function Ai(a,b,c){c=c?null:a.getElementsByTagName("*");if(zi){if(b=b?"none":"",a.style[zi]=b,c){a=0;for(var d;d=c[a];a++)d.style[zi]=b}}else if(lc||kc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Bi(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Ci(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Bi(a,c):0}function Di(a,b){if(lc){var c=Ci(a,b+"Left"),d=Ci(a,b+"Right"),e=Ci(a,b+"Top"),g=Ci(a,b+"Bottom");return new $g(e,d,g,c)}c=$h(a,b+"Left");d=$h(a,b+"Right");e=$h(a,b+"Top");g=$h(a,b+"Bottom");return new $g(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var Ei={thin:2,medium:4,thick:6};
function Fi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Ei?Ei[c]:Bi(a,c)}function Gi(a){if(lc&&!vc(9)){var b=Fi(a,"borderLeft"),c=Fi(a,"borderRight"),d=Fi(a,"borderTop");a=Fi(a,"borderBottom");return new $g(d,c,a,b)}b=$h(a,"borderLeftWidth");c=$h(a,"borderRightWidth");d=$h(a,"borderTopWidth");a=$h(a,"borderBottomWidth");return new $g(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var pi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Hi(a){Bc.call(this);this.ve=a;this.Vb={}}k(Hi,Bc);var Ii=[];f=Hi.prototype;f.I=function(a,b,c,d){ia(b)||(b&&(Ii[0]=b.toString()),b=Ii);for(var e=0;e<b.length;e++){var g=C(a,b[e],c||this.handleEvent,d||!1,this.ve||this);if(!g)break;this.Vb[g.key]=g}return this};f.Az=function(a,b,c,d){return Ji(this,a,b,c,d)};function Ji(a,b,c,d,e,g){if(ia(c))for(var l=0;l<c.length;l++)Ji(a,b,c[l],d,e,g);else{b=Yc(b,c,d||a.handleEvent,e,g||a.ve||a);if(!b)return a;a.Vb[b.key]=b}return a}
f.gc=function(a,b,c,d,e){if(ia(b))for(var g=0;g<b.length;g++)this.gc(a,b[g],c,d,e);else c=c||this.handleEvent,e=e||this.ve||this,c=Rc(c),d=!!d,b=ib(a)?a.xr(b,c,d,e):a?(a=Tc(a))?a.xr(b,c,d,e):null:null,b&&($c(b),delete this.Vb[b.key]);return this};f.wh=function(){w(this.Vb,$c);this.Vb={}};f.i=function(){Hi.g.i.call(this);this.wh()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Ki(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=bi(a)||(c=kh(a).documentElement);if(!c)return b;if(mc)var d=Gi(c),b=b+d.left;else vc(8)&&(d=Gi(c),b-=d.left);return li(c)?c.clientWidth-(b+a.offsetWidth):b};function Li(a,b,c){fd.call(this);this.target=a;this.handle=b||a;this.zz=c||new ch(NaN,NaN,NaN,NaN);this.Sa=kh(a);this.Hd=new Hi(this);Fc(this,xa(Gc,this.Hd));C(this.handle,["touchstart","mousedown"],this.Is,!1,this)}k(Li,fd);var Mi=lc||mc&&uc("1.9.3");f=Li.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.jB=0;f.kB=0;f.$j=0;f.pf=0;f.Yd=!0;f.wl=!1;f.QG=0;f.sv=0;f.cQ=!1;f.eo=!1;f.yl=function(a){this.eo=a};f.Rb=function(){return this.Hd};function Ni(a,b){a.zz=b||new ch(NaN,NaN,NaN,NaN)}
f.TI=function(a){this.Tv=a};f.xd=function(a){this.Yd=a};f.i=function(){Li.g.i.call(this);Zc(this.handle,["touchstart","mousedown"],this.Is,!1,this);this.Hd.wh();Mi&&this.Sa.releaseCapture();this.handle=this.target=null};function Oi(a){ca(a.nj)||(a.nj=li(a.target));return a.nj}
f.Is=function(a){var b="mousedown"==a.type;if(!this.Yd||this.wl||b&&!Nc(a))this.dispatchEvent("earlycancel");else{Pi(a);if(0==this.QG)if(this.dispatchEvent(new Qi("start",this,a.clientX,a.clientY)))this.wl=!0,a.preventDefault();else return;else a.preventDefault();var b=this.Sa,c=b.documentElement,d=!Mi;this.Hd.I(b,["touchmove","mousemove"],this.TP,d);this.Hd.I(b,["touchend","mouseup"],this.zl,d);Mi?(c.setCapture(!1),this.Hd.I(c,"losecapture",this.zl)):this.Hd.I(uh(b),"blur",this.zl);lc&&this.cQ&&
this.Hd.I(b,"dragstart",Jc);this.Tv&&this.Hd.I(this.Tv,"scroll",this.Kp,d);this.clientX=this.jB=a.clientX;this.clientY=this.kB=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.$j=this.eo?Ki(this.target):this.target.offsetLeft;this.pf=this.target.offsetTop;this.BA=Xh(ih(this.Sa));this.sv=ya()}};
f.zl=function(a,b){this.Hd.wh();Mi&&this.Sa.releaseCapture();if(this.wl){Pi(a);this.wl=!1;var c=Ri(this,this.$j),d=Si(this,this.pf);this.dispatchEvent(new Qi("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function Pi(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.Ta(a.Zd.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.Ta(a.Zd.changedTouches[0],a.currentTarget)}
f.TP=function(a){if(this.Yd){Pi(a);var b=(this.eo&&Oi(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.wl){var d=this.jB-this.clientX,e=this.kB-this.clientY;if(d*d+e*e>this.QG)if(this.dispatchEvent(new Qi("start",this,a.clientX,a.clientY)))this.wl=!0;else{this.ln||this.zl(a);return}}c=Ti(this,b,c);b=c.x;c=c.y;this.wl&&this.dispatchEvent(new Qi("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(Ui(this,a,b,c),a.preventDefault())}};function Ti(a,b,c){var d=Xh(ih(a.Sa));b+=d.x-a.BA.x;c+=d.y-a.BA.y;a.BA=d;a.$j+=b;a.pf+=c;b=Ri(a,a.$j);a=Si(a,a.pf);return new Yg(b,a)}f.Kp=function(a){var b=Ti(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Ui(this,a,b.x,b.y)};function Ui(a,b,c,d){a.ly(c,d);a.dispatchEvent(new Qi("drag",a,b.clientX,b.clientY,0,c,d))}
function Ri(a,b){var c=a.zz,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function Si(a,b){var c=a.zz,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.ly=function(a,b){this.eo&&Oi(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.ni=function(){return this.wl};
function Qi(a,b,c,d,e,g,l,m){Ic.call(this,a);this.clientX=c;this.clientY=d;this.left=ca(g)?g:b.$j;this.top=ca(l)?l:b.pf;this.ty=b;this.sN=!!m}k(Qi,Ic);Cb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function Vi(){this.KA="";this.fL=Wi;this.bF=null}Vi.prototype.PF=function(){return this.bF};Vi.prototype.toString=function(){return"SafeHtml{"+this.KA+"}"};function Xi(a){if(a instanceof Vi&&a.constructor===Vi&&a.fL===Wi)return a.KA;gb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}Cb("action","cite","data","formaction","href","manifest","poster","src");Cb("link","script","style");var Wi={};function Yi(a,b){var c=new Vi;c.KA=a;c.bF=b;return c}var Zi=Yi("",0);function $i(){}fa($i);$i.prototype.MH=0;function aj(a){fd.call(this);this.dc=a||ih();this.nj=bj;this.jh=null;this.Fa=!1;this.q=null;this.Jl=void 0;this.ai=this.Vd=this.ub=this.Qz=null;this.RJ=!1}k(aj,fd);aj.prototype.aQ=$i.qf();var bj=null;
function cj(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function dj(a){return a.jh||(a.jh=":"+(a.aQ.MH++).toString(36))}function ej(a,b){a.ub&&a.ub.ai&&(xb(a.ub.ai,a.jh),yb(a.ub.ai,b,a));a.jh=b}f=aj.prototype;f.b=function(){return this.q};
f.Rb=function(){this.Jl||(this.Jl=new Hi(this));return this.Jl};f.ws=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.ub&&this.jh&&fj(this.ub,this.jh)&&this.ub!=a)throw Error("Unable to set parent component");this.ub=a;aj.g.WA.call(this,a)};f.getParent=function(){return this.ub};f.WA=function(a){if(this.ub&&this.ub!=a)throw Error("Method not supported");aj.g.WA.call(this,a)};f.da=function(){return this.dc};f.C=function(){this.q=this.dc.createElement("div")};f.p=function(a){this.mj(a)};
f.mj=function(a,b){if(this.Fa)throw Error("Component already rendered");this.q||this.C();a?a.insertBefore(this.q,b||null):this.dc.Sa.body.appendChild(this.q);this.ub&&!this.ub.Fa||this.Pb()};f.cc=function(a){if(this.Fa)throw Error("Component already rendered");if(a&&this.zg(a)){this.RJ=!0;var b=kh(a);this.dc&&this.dc.Sa==b||(this.dc=ih(a));this.Of(a);this.Pb()}else throw Error("Invalid element to decorate");};f.zg=function(){return!0};f.Of=function(a){this.q=a};
f.Pb=function(){this.Fa=!0;gj(this,function(a){!a.Fa&&a.b()&&a.Pb()})};f.Id=function(){gj(this,function(a){a.Fa&&a.Id()});this.Jl&&this.Jl.wh();this.Fa=!1};f.i=function(){this.Fa&&this.Id();this.Jl&&(this.Jl.k(),delete this.Jl);gj(this,function(a){a.k()});!this.RJ&&this.q&&S(this.q);this.ub=this.Qz=this.q=this.ai=this.Vd=null;aj.g.i.call(this)};f.Rq=function(a,b){this.vx(a,hj(this),b)};
f.vx=function(a,b,c){if(a.Fa&&(c||!this.Fa))throw Error("Component already rendered");if(0>b||b>hj(this))throw Error("Child component index out of bounds");this.ai&&this.Vd||(this.ai={},this.Vd=[]);if(a.getParent()==this){var d=dj(a);this.ai[d]=a;Pb(this.Vd,a)}else yb(this.ai,dj(a),a);a.ws(this);Sb(this.Vd,b,0,a);a.Fa&&this.Fa&&a.getParent()==this?(c=this.Qb(),c.insertBefore(a.b(),c.childNodes[b]||null)):c?(this.q||this.C(),b=ij(this,b+1),a.mj(this.Qb(),b?b.q:null)):this.Fa&&!a.Fa&&a.q&&a.q.parentNode&&
1==a.q.parentNode.nodeType&&a.Pb()};f.Qb=function(){return this.q};f.Ig=function(){null==this.nj&&(this.nj=li(this.Fa?this.q:this.dc.Sa.body));return this.nj};f.Pp=function(a){if(this.Fa)throw Error("Component already rendered");this.nj=a};function hj(a){return a.Vd?a.Vd.length:0}function fj(a,b){var c;a.ai&&b?(c=a.ai,c=(b in c?c[b]:void 0)||null):c=null;return c}function ij(a,b){return a.Vd?a.Vd[b]||null:null}function gj(a,b,c){a.Vd&&A(a.Vd,b,c)}function jj(a,b){return a.Vd&&b?Fb(a.Vd,b):-1}
f.removeChild=function(a,b){if(a){var c=ka(a)?a:dj(a);a=fj(this,c);c&&a&&(xb(this.ai,c),Pb(this.Vd,a),b&&(a.Id(),a.q&&S(a.q)),a.ws(null))}if(!a)throw Error("Child is not in parent component");return a};function kj(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!mc;default:return 166>a.keyCode||183<a.keyCode}}
function lj(a,b,c,d,e){if(!(lc||nc&&uc("525")))return!0;if(gc&&e)return mj(a);if(e&&!d)return!1;ma(b)&&(b=nj(b));if(!c&&(17==b||18==b||gc&&91==b))return!1;if(nc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(lc&&d&&b==a)return!1;switch(a){case 13:return!(lc&&vc(9));case 27:return!nc}return mj(a)}
function mj(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||nc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function nj(a){if(mc)a=oj(a);else if(gc&&nc)a:switch(a){case 93:a=91;break a}return a}
function oj(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function pj(a,b){fd.call(this);this.ve=new Hi(this);this.SA(a||null);b&&(this.aq=b)}k(pj,fd);f=pj.prototype;f.q=null;f.uM=!0;f.cE=null;f.dE=null;f.Bp=!1;f.IT=!1;f.vz=-1;f.ZP=!1;f.vN=!0;f.aq="toggle_display";f.b=function(){return this.q};f.SA=function(a){if(this.Bp)throw Error("Can not change this state of the popup while showing.");this.q=a};f.ZI=function(a,b){this.Rp=a;this.tp=b};f.Rb=function(){return this.ve};f.mb=function(){return this.Bp};
f.Da=function(a){this.Rp&&this.Rp.stop();this.tp&&this.tp.stop();a?this.cB():this.up()};f.uf=ea;
f.cB=function(){if(!this.Bp&&this.dA()){if(!this.q)throw Error("Caller must call setElement before trying to show the popup");this.uf();var a=kh(this.q);this.ZP&&this.ve.I(a,"keydown",this.nR,!0);if(this.uM)if(this.ve.I(a,"mousedown",this.RH,!0),lc){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.ve.I(a,"mousedown",this.RH,!0);this.ve.I(a,"deactivate",this.QH)}else this.ve.I(a,"blur",
this.QH);"toggle_display"==this.aq?(this.q.style.visibility="visible",xi(this.q,!0)):"move_offscreen"==this.aq&&this.uf();this.Bp=!0;this.vz=ya();this.Rp?(Yc(this.Rp,"end",this.XH,!1,this),this.Rp.play()):this.XH()}};f.up=function(a){if(!this.Bp||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.ve&&this.ve.wh();this.Bp=!1;ya();this.tp?(Yc(this.tp,"end",xa(this.xE,a),!1,this),this.tp.play()):this.xE(a);return!0};
f.xE=function(a){"toggle_display"==this.aq?this.IT?Wf(this.PG,0,this):this.PG():"move_offscreen"==this.aq&&(this.q.style.top="-10000px");this.jA(a)};f.PG=function(){this.q.style.visibility="hidden";xi(this.q,!1)};f.dA=function(){return this.dispatchEvent("beforeshow")};f.XH=function(){this.dispatchEvent("show")};f.jA=function(a){this.dispatchEvent({type:"hide",target:a})};f.RH=function(a){a=a.target;Hh(this.q,a)||qj(this,a)||this.dE&&!Hh(this.dE,a)||150>ya()-this.vz||this.up(a)};
f.nR=function(a){27==a.keyCode&&this.up(a.target)&&(a.preventDefault(),a.stopPropagation())};f.QH=function(a){if(this.vN){var b=kh(this.q);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||Hh(this.q,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.vz||this.up()}};function qj(a,b){return Ib(a.cE||[],function(a){return b===a||Hh(a,b)})}f.i=function(){pj.g.i.call(this);this.ve.k();Gc(this.Rp);Gc(this.tp);delete this.q;delete this.ve;delete this.cE};function rj(a){if(a.classList)return a.classList;a=a.className;return ka(a)&&a.match(/\S+/g)||[]}function sj(a,b){return a.classList?a.classList.contains(b):Mb(rj(a),b)}function tj(a,b){a.classList?a.classList.add(b):sj(a,b)||(a.className+=0<a.className.length?" "+b:b)}function uj(a,b){if(a.classList)A(b,function(b){tj(a,b)});else{var c={};A(rj(a),function(a){c[a]=!0});A(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function vj(a,b){a.classList?a.classList.remove(b):sj(a,b)&&(a.className=Gb(rj(a),function(a){return a!=b}).join(" "))}function wj(a,b){a.classList?A(b,function(b){vj(a,b)}):a.className=Gb(rj(a),function(a){return!Mb(b,a)}).join(" ")}function xj(a,b,c){c?tj(a,b):vj(a,b)};var yj;function zj(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Aj(a,b,c){ja(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(yj||(yj={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=yj,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Bj(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Cj(a){fd.call(this);this.q=a;a=lc?"focusout":"blur";this.FQ=C(this.q,lc?"focusin":"focus",this,!lc);this.GQ=C(this.q,a,this,!lc)}k(Cj,fd);Cj.prototype.handleEvent=function(a){var b=new Lc(a.Zd);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};Cj.prototype.i=function(){Cj.g.i.call(this);$c(this.FQ);$c(this.GQ);delete this.q};function Dj(a,b){aj.call(this,b);this.mU=!!a;this.Sr=null}k(Dj,aj);f=Dj.prototype;f.Dy=null;f.Md=!1;f.yg=null;f.He=null;f.Ai=null;f.Dx=!1;f.oa=function(){return"goog-modalpopup"};f.kp=function(){return this.yg};f.C=function(){Dj.g.C.call(this);var a=this.b(),b=La(this.oa()).split(" ");uj(a,b);Mh(a,!0);xi(a,!1);Ej(this);Fj(this)};
function Ej(a){if(a.mU&&!a.He){var b;b=a.da().C("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.He=b;a.He.className=a.oa()+"-bg";xi(a.He,!1);wi(a.He,0)}a.yg||(a.yg=a.da().C("div",a.oa()+"-bg"),xi(a.yg,!1))}function Fj(a){a.Ai||(a.Ai=a.da().createElement("span"),xi(a.Ai,!1),Mh(a.Ai,!0),a.Ai.style.position="absolute")}f.sI=function(){this.Dx=!1};f.zg=function(a){return!!a&&"DIV"==a.tagName};
f.Of=function(a){Dj.g.Of.call(this,a);a=La(this.oa()).split(" ");uj(this.b(),a);Ej(this);Fj(this);xi(this.b(),!1)};f.Pb=function(){this.He&&Bh(this.He,this.b());Bh(this.yg,this.b());Dj.g.Pb.call(this);var a=this.b();a.parentNode&&a.parentNode.insertBefore(this.Ai,a.nextSibling);this.Dy=new Cj(Uh(this.da()));this.Rb().I(this.Dy,"focusin",this.sR);Gj(this,!1)};f.Id=function(){this.mb()&&this.Da(!1);Gc(this.Dy);Dj.g.Id.call(this);S(this.He);S(this.yg);S(this.Ai)};
f.Da=function(a){a!=this.Md&&(this.Rn&&this.Rn.stop(),this.Vo&&this.Vo.stop(),this.Qn&&this.Qn.stop(),this.Uo&&this.Uo.stop(),this.Fa&&Gj(this,a),a?this.cB():this.up())};function Gj(a,b){if(b){a.rp||(a.rp=[]);for(var c=a.da(),c=c.Hy(c.Sa.body),d=0;d<c.length;d++){var e=c[d];e==a.q||Bj(e,"hidden")||(Aj(e,"hidden",!0),a.rp.push(e))}}else if(a.rp){for(d=0;d<a.rp.length;d++)a.rp[d].removeAttribute("aria-hidden");a.rp=null}}f.ZI=function(a,b,c,d){this.Rn=a;this.Qn=b;this.Vo=c;this.Uo=d};
f.cB=function(){if(this.dispatchEvent("beforeshow")){try{this.Sr=Uh(this.da()).activeElement}catch(a){}this.PA();this.uf();this.Rb().I(Wh(this.da()),"resize",this.PA);Hj(this,!0);this.focus();this.Md=!0;this.Rn&&this.Vo?(Yc(this.Rn,"end",this.Dv,!1,this),this.Vo.play(),this.Rn.play()):this.Dv()}};
f.up=function(){if(this.dispatchEvent("beforehide")){this.Rb().gc(Wh(this.da()),"resize",this.PA);this.Md=!1;this.Qn&&this.Uo?(Yc(this.Qn,"end",this.yv,!1,this),this.Uo.play(),this.Qn.play()):this.yv();try{var a=Uh(this.da()).body,b=Uh(this.da()).activeElement||a;this.Sr&&b==a&&this.Sr!=a&&this.Sr.focus()}catch(c){}this.Sr=null}};function Hj(a,b){a.He&&xi(a.He,b);a.yg&&xi(a.yg,b);xi(a.b(),b);xi(a.Ai,b)}f.Dv=function(){this.dispatchEvent("show")};f.yv=function(){Hj(this,!1);this.dispatchEvent("hide")};
f.mb=function(){return this.Md};f.focus=function(){this.yF()};f.PA=function(){this.He&&xi(this.He,!1);this.yg&&xi(this.yg,!1);var a=Uh(this.da()),b=sh(uh(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.He&&(xi(this.He,!0),qi(this.He,c,a));this.yg&&(xi(this.yg,!0),qi(this.yg,c,a))};
f.uf=function(){var a=Uh(this.da()),b=uh(a)||window;if("fixed"==bi(this.b()))var c=a=0;else c=Xh(this.da()),a=c.x,c=c.y;var d=ti(this.b()),b=sh(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);ci(this.b(),a,c);ci(this.Ai,a,c)};f.sR=function(a){this.Dx?this.sI():a.target==this.Ai&&Wf(this.yF,0,this)};f.yF=function(){try{lc&&Uh(this.da()).body.focus(),this.b().focus()}catch(a){}};
f.i=function(){Gc(this.Rn);this.Rn=null;Gc(this.Qn);this.Qn=null;Gc(this.Vo);this.Vo=null;Gc(this.Uo);this.Uo=null;Dj.g.i.call(this)};function Ij(a,b,c){Dj.call(this,b,c);this.of=a||"modal-dialog";this.ra=Jj(Jj(new Kj,Lj,!0),Mj,!1,!0)}k(Ij,Dj);f=Ij.prototype;f.mF=!0;f.bz=!0;f.Pz=!0;f.wu=!0;f.fu=.5;f.Ae="";f.Wd=null;f.Eb=null;f.mN=!1;f.Ve=null;f.xf=null;f.mw=null;f.cg=null;f.ci=null;f.qe=null;f.IA="dialog";f.oa=function(){return this.of};f.yh=function(a){this.Ae=a;this.xf&&Jh(this.xf,a)};f.Fg=function(){return this.Ae};f.$l=function(a){this.Wd=a=Yi(a,null);this.ci&&(this.ci.innerHTML=Xi(a))};
f.Tf=function(){return null!=this.Wd?Xi(this.Wd):""};f.Gl=function(){return this.IA};f.Qb=function(){this.b()||this.p();return this.ci};f.pG=function(){this.b()||this.p();return this.Ve};f.kp=function(){this.b()||this.p();return Ij.g.kp.call(this)};function Nj(a,b){a.fu=b;if(a.b()){var c=a.kp();c&&wi(c,a.fu)}}function Oj(a,b){b!=a.Pz&&Pj(a,b)}function Pj(a,b){a.Pz=b;if(a.Fa){var c=a.da(),d=a.kp(),e=a.He;b?(e&&c.jz(e,a.b()),c.jz(d,a.b())):(c.removeNode(e),c.removeNode(d))}a.mb()&&Gj(a,b)}
f.bw=function(a){this.wu=a;this.ts(a&&this.Fa)};f.ts=function(a){var b=La(this.of+"-title-draggable").split(" ");this.b()&&(a?uj(this.Ve,b):wj(this.Ve,b));a&&!this.Eb?(this.Eb=new Li(this.b(),this.Ve),uj(this.Ve,b),C(this.Eb,"start",this.cw,!1,this)):!a&&this.Eb&&(this.Eb.k(),this.Eb=null)};
f.C=function(){Ij.g.C.call(this);var a=this.b(),b=this.da();this.Ve=b.C("div",this.of+"-title",this.xf=b.C("span",{className:this.of+"-title-text",id:dj(this)},this.Ae),this.cg=b.C("span",this.of+"-title-close"));zh(a,this.Ve,this.ci=b.C("div",this.of+"-content"),this.qe=b.C("div",this.of+"-buttons"));zj(this.xf,"heading");zj(this.cg,"button");Mh(this.cg,!0);Aj(this.cg,"label",Qj);this.mw=this.xf.id;zj(a,this.Gl());Aj(a,"labelledby",this.mw||"");this.Wd&&(this.ci.innerHTML=Xi(this.Wd));xi(this.cg,
this.bz);this.ra&&(a=this.ra,a.q=this.qe,a.p());xi(this.qe,!!this.ra);Nj(this,this.fu)};
f.Of=function(a){Ij.g.Of.call(this,a);a=this.b();var b=this.of+"-content";this.ci=mh(null,b,a)[0];this.ci||(this.ci=this.da().C("div",b),this.Wd&&(this.ci.innerHTML=Xi(this.Wd)),a.appendChild(this.ci));var b=this.of+"-title",c=this.of+"-title-text",d=this.of+"-title-close";(this.Ve=mh(null,b,a)[0])?(this.xf=mh(null,c,this.Ve)[0],this.cg=mh(null,d,this.Ve)[0]):(this.Ve=this.da().C("div",b),a.insertBefore(this.Ve,this.ci));this.xf?(this.Ae=Ph(this.xf),this.xf.id||(this.xf.id=dj(this))):(this.xf=vh("span",
{className:c,id:dj(this)}),this.Ve.appendChild(this.xf));this.mw=this.xf.id;Aj(a,"labelledby",this.mw||"");this.cg||(this.cg=this.da().C("span",d),this.Ve.appendChild(this.cg));xi(this.cg,this.bz);b=this.of+"-buttons";(this.qe=mh(null,b,a)[0])?(this.ra=new Kj(this.da()),this.ra.cc(this.qe)):(this.qe=this.da().C("div",b),a.appendChild(this.qe),this.ra&&(a=this.ra,a.q=this.qe,a.p()),xi(this.qe,!!this.ra));Nj(this,this.fu)};
f.Pb=function(){Ij.g.Pb.call(this);this.Rb().I(this.b(),"keydown",this.uk).I(this.b(),"keypress",this.uk);this.Rb().I(this.qe,"click",this.kR);this.ts(this.wu);this.Rb().I(this.cg,"click",this.gS);var a=this.b();zj(a,this.Gl());""!==this.xf.id&&Aj(a,"labelledby",this.xf.id);this.Pz||Pj(this,!1)};f.Id=function(){this.mb()&&this.Da(!1);this.ts(!1);Ij.g.Id.call(this)};f.Da=function(a){a!=this.mb()&&(this.Fa||this.p(),Ij.g.Da.call(this,a))};f.Dv=function(){Ij.g.Dv.call(this);this.dispatchEvent(Rj)};
f.yv=function(){Ij.g.yv.call(this);this.dispatchEvent(Sj);this.mN&&this.k()};f.cw=function(){var a=Uh(this.da()),b=sh(uh(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=ti(this.b());"fixed"==bi(this.b())?Ni(this.Eb,new ch(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):Ni(this.Eb,new ch(0,0,c-d.width,a-d.height))};f.gS=function(){Tj(this)};
function Tj(a){if(a.bz){var b=a.ra,c=b&&b.Mx;c?(b=b.get(c),a.dispatchEvent(new Uj(c,b))&&a.Da(!1)):a.Da(!1)}}f.i=function(){this.qe=this.cg=null;Ij.g.i.call(this)};function Vj(a,b){a.ra=b;if(a.qe){if(a.ra){var c=a.ra;c.q=a.qe;c.p()}else a.qe.innerHTML=Xi(Zi);xi(a.qe,!!a.ra)}}f.kR=function(a){a:{for(a=a.target;null!=a&&a!=this.qe;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.ra.get(a);this.dispatchEvent(new Uj(a,b))&&this.Da(!1)}};
f.uk=function(a){var b=!1,c=!1,d=this.ra,e=a.target;if("keydown"==a.type)if(this.mF&&27==a.keyCode){var g=d&&d.Mx,e="SELECT"==e.tagName&&!e.disabled;g&&!e?(c=!0,b=d.get(g),b=this.dispatchEvent(new Uj(g,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.b()){this.Dx=!0;try{this.Ai.focus()}catch(l){}Wf(this.sI,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)g=e.name;else if(e==this.cg)Tj(this);else if(d){var m=d.my,q;if(q=m)a:{q=d.q.getElementsByTagName("BUTTON");for(var p=
0,t;t=q[p];p++)if(t.name==m||t.id==m){q=t;break a}q=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!q||q.disabled||e||(g=m)}g&&d&&(c=!0,b=this.dispatchEvent(new Uj(g,String(d.get(g)))))}else e==this.cg&&32==a.keyCode&&Tj(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.Da(!1)};function Uj(a,b){this.type=Wj;this.key=a;this.caption=b}k(Uj,Ic);var Wj="dialogselect",Sj="afterhide",Rj="aftershow";function Kj(a){this.dc=a||ih();od.call(this)}var Xj;k(Kj,od);
f=Kj.prototype;f.of="goog-buttonset";f.my=null;f.q=null;f.Mx=null;f.set=function(a,b,c,d){od.prototype.set.call(this,a,b);c&&(this.my=a);d&&(this.Mx=a);return this};function Jj(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.p=function(){if(this.q){this.q.innerHTML=Xi(Zi);var a=ih(this.q);this.forEach(function(b,c){var d=a.C("button",{name:c},b);c==this.my&&(d.className=this.of+"-default");this.q.appendChild(d)},this)}};
f.cc=function(a){if(a&&1==a.nodeType){this.q=a;a=this.q.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=Ph(c)||c.value,d){var g=0==b;this.set(d,e,g,c.name==Yj);g&&tj(c,this.of+"-default")}}};f.b=function(){return this.q};f.da=function(){return this.dc};var Yj="cancel",Qj="Close",Lj={key:"ok",caption:"OK"},Mj={key:Yj,caption:"Cancel"},Zj={key:"yes",caption:"Yes"},ak={key:"no",caption:"No"},bk={key:"save",caption:"Save"},ck={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Jj(new Kj,Lj,!0,!0),Jj(Jj(new Kj,Lj,!0),Mj,!1,!0),Xj=Jj(Jj(new Kj,Zj,!0),ak,!1,!0),Jj(Jj(Jj(new Kj,Zj),ak,!0),Mj,!1,!0),Jj(Jj(Jj(new Kj,ck),bk),Mj,!0,!0));function dk(){}h("nrg.string",dk);dk.Uq=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")};dk.dirname=function(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")};dk.Du=function(a){if(null!=a)return a="array"==ha(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()};dk.KN=function(a,b){return dk.Uq(a)===dk.Uq(b)};dk.tJ=function(a){return a.replace(/\W/g,"")};dk.VT=function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")};
dk.DO=function(a){return dk.tJ(a).replace(/[0-9]/g,"")};dk.iT=function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)};dk.kU=function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a};dk.Wb=function(a,b){return a.toLowerCase().replace(/\.|_/g,"-")+"-"+b.toLowerCase().replace(/\.|_/g,"-")};h("nrg.string.basename",dk.Uq);
h("nrg.string.dirname",dk.dirname);h("nrg.string.getFileExtension",dk.Du);h("nrg.string.fileNameMatch",dk.KN);h("nrg.string.stripNonAlphanumeric",dk.tJ);h("nrg.string.stripIllegal",dk.VT);h("nrg.string.getLettersOnly",dk.DO);h("nrg.string.replaceIllegal",dk.iT);h("nrg.string.truncateString",dk.kU);h("nrg.string.makeCssName",dk.Wb);function ek(a,b,c){Bc.call(this);this.Bz=a;this.yp=b||0;this.ve=c;this.HM=wa(this.oN,this)}k(ek,Bc);f=ek.prototype;f.jh=0;f.i=function(){ek.g.i.call(this);this.stop();delete this.Bz;delete this.ve};f.start=function(a){this.stop();this.jh=Wf(this.HM,ca(a)?a:this.yp)};f.stop=function(){this.dj()&&ba.clearTimeout(this.jh);this.jh=0};f.dj=function(){return 0!=this.jh};f.oN=function(){this.jh=0;this.Bz&&this.Bz.call(this.ve)};var vb={},fk=null;function gk(a){a=pa(a);delete vb[a];ub()&&fk&&fk.stop()}function hk(){fk||(fk=new ek(function(){ik()},20));var a=fk;a.dj()||a.start()}function ik(){var a=ya();w(vb,function(b){jk(b,a)});ub()||hk()};function kk(){fd.call(this);this.fa=lk;this.endTime=this.startTime=null}k(kk,fd);var lk=0;kk.prototype.tk=function(){this.te("begin")};kk.prototype.Re=function(){this.te("end")};kk.prototype.te=function(a){this.dispatchEvent(a)};function ok(a,b,c,d){kk.call(this);if(!ia(a)||!ia(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.Js=a;this.xN=b;this.duration=c;this.oD=d;this.coords=[];this.eo=!1}k(ok,kk);f=ok.prototype;f.yl=function(a){this.eo=a};f.uh=0;
f.play=function(a){if(a||this.fa==lk)this.uh=0,this.coords=this.Js;else if(1==this.fa)return!1;gk(this);this.startTime=a=ya();-1==this.fa&&(this.startTime-=this.duration*this.uh);this.endTime=this.startTime+this.duration;this.uh||this.tk();this.te("play");-1==this.fa&&this.te("resume");this.fa=1;var b=pa(this);b in vb||(vb[b]=this);hk();jk(this,a);return!0};f.stop=function(a){gk(this);this.fa=lk;a&&(this.uh=1);pk(this,this.uh);this.te("stop");this.Re()};
f.i=function(){this.fa==lk||this.stop(!1);this.te("destroy");ok.g.i.call(this)};f.bh=function(){this.k()};function jk(a,b){a.uh=(b-a.startTime)/(a.endTime-a.startTime);1<=a.uh&&(a.uh=1);pk(a,a.uh);1==a.uh?(a.fa=lk,gk(a),a.te("finish"),a.Re()):1==a.fa&&a.bA()}function pk(a,b){na(a.oD)&&(b=a.oD(b));a.coords=Array(a.Js.length);for(var c=0;c<a.Js.length;c++)a.coords[c]=(a.xN[c]-a.Js[c])*b+a.Js[c]}f.bA=function(){this.te("animate")};f.te=function(a){this.dispatchEvent(new qk(a,this))};
function qk(a,b){Ic.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.uh=b.uh;this.state=b.fa}k(qk,Ic);var rk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function sk(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(tk.test(c))return b.qp=uk(c),b.type="hex",b;a:{var d=a.match(vk);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.qp=wk(c),b.type="rgb",b;if(rk&&(c=rk[a.toLowerCase()]))return b.qp=c,b.type="named",b;throw Error(a+" is not a valid color string");}var xk=/#(.)(.)(.)/;
function uk(a){if(!tk.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(xk,"#$1$1$2$2$3$3"));return a.toLowerCase()}function yk(a){a=uk(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function wk(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=zk(b.toString(16));c=zk(c.toString(16));a=zk(a.toString(16));return"#"+b+c+a}var tk=/^#(?:[0-9a-f]{3}){1,2}$/i,vk=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function zk(a){return 1==a.length?"0"+a:a}
function Ak(a,b,c){var d=0,e=0,g=0;if(0==b)g=e=d=c;else{var l=Math.floor(a/60),m=a/60-l;a=c*(1-b);var q=c*(1-b*m);b=c*(1-b*(1-m));switch(l){case 1:d=q;e=c;g=a;break;case 2:d=a;e=c;g=b;break;case 3:d=a;e=q;g=c;break;case 4:d=b;e=a;g=c;break;case 5:d=c;e=a;g=q;break;case 6:case 0:d=c,e=b,g=a}}return[Math.floor(d),Math.floor(e),Math.floor(g)]};function Bk(a,b,c,d,e){ok.call(this,b,c,d,e);this.element=a}k(Bk,ok);f=Bk.prototype;f.o=ea;f.Ig=function(){ca(this.nj)||(this.nj=li(this.element));return this.nj};f.bA=function(){this.o();Bk.g.bA.call(this)};f.Re=function(){this.o();Bk.g.Re.call(this)};f.tk=function(){this.o();Bk.g.tk.call(this)};function Ck(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Bk.apply(this,arguments)}k(Ck,Bk);
Ck.prototype.o=function(){var a=this.eo&&this.Ig()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Dk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Bk.apply(this,arguments)}k(Dk,Bk);Dk.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Ek(a,b,c,d,e){Bk.call(this,a,[b],[c],d,e)}k(Ek,Bk);Ek.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Fk(a,b,c,d,e){Bk.call(this,a,[b],[c],d,e)}k(Fk,Bk);Fk.prototype.o=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Gk(a,b,c,d,e){ma(b)&&(b=[b]);ma(c)&&(c=[c]);Bk.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}k(Gk,Bk);Gk.prototype.o=function(){wi(this.element,this.coords[0])};
Gk.prototype.show=function(){this.element.style.display=""};Gk.prototype.sp=function(){this.element.style.display="none"};function Hk(a,b,c){Gk.call(this,a,1,0,b,c)}k(Hk,Gk);function Ik(a,b,c){Gk.call(this,a,0,1,b,c)}k(Ik,Gk);function Jk(a,b,c){Gk.call(this,a,1,0,b,c)}k(Jk,Gk);Jk.prototype.tk=function(){this.show();Jk.g.tk.call(this)};Jk.prototype.Re=function(){this.sp();Jk.g.Re.call(this)};function Kk(a,b,c){Gk.call(this,a,0,1,b,c)}k(Kk,Gk);Kk.prototype.tk=function(){this.show();Kk.g.tk.call(this)};
function Lk(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Bk.apply(this,arguments)}k(Lk,Bk);Lk.prototype.aw=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};Lk.prototype.o=function(){this.aw()};function Mk(){kk.call(this);this.wd=[]}k(Mk,kk);Mk.prototype.add=function(a){Mb(this.wd,a)||(this.wd.push(a),C(a,"finish",this.cA,!1,this))};Mk.prototype.remove=function(a){Pb(this.wd,a)&&Zc(a,"finish",this.cA,!1,this)};Mk.prototype.i=function(){A(this.wd,function(a){a.k()});this.wd.length=0;Mk.g.i.call(this)};function Nk(){Mk.call(this);this.By=0}k(Nk,Mk);
Nk.prototype.play=function(a){if(0==this.wd.length)return!1;if(a||this.fa==lk)this.By=0,this.tk();else if(1==this.fa)return!1;this.te("play");-1==this.fa&&this.te("resume");var b=-1==this.fa&&!a;this.startTime=ya();this.endTime=null;this.fa=1;A(this.wd,function(c){b&&-1!=c.fa||c.play(a)});return!0};Nk.prototype.stop=function(a){A(this.wd,function(b){b.fa==lk||b.stop(a)});this.fa=lk;this.endTime=ya();this.te("stop");this.Re()};
Nk.prototype.cA=function(){this.By++;this.By==this.wd.length&&(this.endTime=ya(),this.fa=lk,this.te("finish"),this.Re())};function Ok(){Mk.call(this);this.di=0}k(Ok,Mk);Ok.prototype.play=function(a){if(0==this.wd.length)return!1;if(a||this.fa==lk)this.di<this.wd.length&&this.wd[this.di].fa!=lk&&this.wd[this.di].stop(!1),this.di=0,this.tk();else if(1==this.fa)return!1;this.te("play");-1==this.fa&&this.te("resume");this.startTime=ya();this.endTime=null;this.fa=1;this.wd[this.di].play(a);return!0};
Ok.prototype.stop=function(a){this.fa=lk;this.endTime=ya();if(a)for(a=this.di;a<this.wd.length;++a){var b=this.wd[a];b.fa==lk&&b.play();b.fa==lk||b.stop(!0)}else this.di<this.wd.length&&this.wd[this.di].stop(!1);this.te("stop");this.Re()};Ok.prototype.cA=function(){1==this.fa&&(this.di++,this.di<this.wd.length?this.wd[this.di].play():(this.endTime=ya(),this.fa=lk,this.te("finish"),this.Re()))};function Pk(){}h("nrg.convert",Pk);Pk.GS=function(a){if(!ma(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"};Pk.eI=function(a){if(!ia(a)&&!ma(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}};
Pk.nI=function(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}};Pk.$p=function(a){if(!ka(a)&&!ma(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)};
Pk.Gk=function(a){if(!ka(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");A(a,function(a,d){b[d]=parseFloat(a,10)});return b};Pk.gR=function(a){if(!oa(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b};Pk.mT=function(a){if(!ka(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a};
Pk.oM=function(a,b){if(!ia(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;A(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"};Pk.tF=function(a){var b={};w(a,function(a,d){isNaN(a)?ka(a)&&(b[d]=a):b[d]=a});return b};Pk.uF=function(a){var b={};w(a,function(a,d){ka(a)?0<a.length&&(b[d]=a):b[d]=a});return b};h("nrg.convert.pct",Pk.GS);h("nrg.convert.px",Pk.eI);h("nrg.convert.remap1D",Pk.nI);h("nrg.convert.toInt",Pk.$p);
h("nrg.convert.toFloatArray",Pk.Gk);h("nrg.convert.objectToArray",Pk.gR);h("nrg.convert.rgbToArray",Pk.mT);h("nrg.convert.arrayToRgb",Pk.oM);h("nrg.convert.filterNaN",Pk.tF);h("nrg.convert.filterZeroLengthStrings",Pk.uF);function Qk(){}h("nrg.style",Qk);Qk.SE="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
Qk.bT=function(a,b){var c=Tg(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)Vg(a,d[e])};Qk.$t=function(a){return a.getBoundingClientRect()};
Qk.oy=function(a,b){if(b&&"string"===typeof b){var c="";switch(b){case "height":return a.clientHeight;case "width":return a.clientWidth;case "outerHeight":return a.offsetHeight;case "outerWidth":return a.offsetWidth;case "offsetTop":return a.offsetTop;case "offsetLeft":return a.offsetLeft;default:c=/%emt/.test(a.style[b]);if(!c)return Pk.$p(a.style[b]);var d=mi(a,a.parentNode),d={left:Pk.$p(a.style.left)||d.x,top:Pk.$p(a.style.top)||d.y};return d[b]}}else return c={},d=a.parentNode?mi(a,a.parentNode):
mi(a,document.body),d={left:Pk.$p(a.style.left)||d.x,top:Pk.$p(a.style.top)||d.y},c.left=d.left,c.top=d.top,c.height=a.clientHeight,c.width=a.clientWidth,c.outerHeight=a.offsetWidth,c.outerWidth=a.offsetHeight,c.offsetTop=a.offsetTop,c.offsetLeft=a.offsetLeft,c};Qk.iP=function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}};
Qk.getComputedStyle=function(a,b){if(b&&ka(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=Qk.SE);for(var c={},d=window.getComputedStyle(a,null),e=0,g=b.length,e=0;e<g;e++)c[b[e]]=d.getPropertyValue(b[e]);return Qk.aI(c)};
Qk.aI=function(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a};Qk.zb=function(a,b){a&&b&&(a.style||(a.style={}),Yh(a,b),A("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Ga(b[c],"%")&&(a.style[c]=Pk.eI(b[c]))}))};Qk.Ew="is_hovered_"+r();
Qk.dm=function(a,b,c,d,e,g){function l(){a[Qk.Ew]=!1;Vg(a,b);null!=g&&g()}function m(){a[Qk.Ew]=!0;R(a,b);null!=e&&e()}C(a,"mouseover",m);C(a,"mouseout",l);c&&(c=void 0!==d?c.bind(d):c,c(m,l))};Qk.bY=function(a,b,c,d){var e=vh("div",{id:"tempEndStateElt"+Fa.lY()});a.parentNode.appendChild(e);e.className=b;c&&c(a,e);b=Qk.getComputedStyle(a,d);d=Qk.getComputedStyle(e,d);a.parentNode.removeChild(e);delete e;return{start:b,end:d}};
Qk.XO=function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}};h("nrg.style.cssProperties",Qk.SE);h("nrg.style.removeClassesThatContain",Qk.bT);h("nrg.style.absolutePosition",Qk.$t);h("nrg.style.dims",Qk.oy);h("nrg.style.getStyleSheet",Qk.iP);h("nrg.style.getComputedStyle",Qk.getComputedStyle);h("nrg.style.parseIntNumericalProperties",Qk.aI);h("nrg.style.setStyle",Qk.zb);h("nrg.style.IS_HOVERED",Qk.Ew);
h("nrg.style.setHoverClass",Qk.dm);h("nrg.style.getPositionRelativeToAncestor",Qk.XO);function Rk(a){return 1-Math.pow(1-a,3)};function T(){}h("nrg.fx",T);T.nr=function(a,b,c){void 0===b&&(b=500);T.Dg(a,b,1,c)};T.or=function(a,b,c){void 0===b&&(b=500);T.Dg(a,0,0,function(){T.Dg(a,b,1,c)})};T.un=function(a,b,c){void 0===b&&(b=500);T.Dg(a,b,0,c)};T.GN=function(a,b,c){void 0===b&&(b=500);T.Dg(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})};
T.Dg=function(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:(window.console.log(a),a.style.opacity=1));var g=new Gk(a,e,c,b);d&&g.addEventListener("end",function(a){d(a);ad(g);delete g});g.play()};T.animGenStyles="left top width height opacity background-color color z-index".split(" ");
T.DF=function(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Ck(a,[b.left,b.top],[c.left,c.top],d,Rk)};T.CF=function(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Dk(a,[b.width,b.height],[c.width,c.height],d,Rk)};
T.Gy=function(a,b,c,d){if("opacity"in b||"opacity"in c)if(A([b,c],function(a){"opacity"in a||(a.opacity=1);ma(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Gk(a,b.opacity,c.opacity,d)};T.BF=function(a,b,c,d){if("visibility"in b||"visibility"in c)if(A([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new Kk(a,d):new Jk(a,d)};
T.AF=function(a,b,c,d){if("background-color"in b||"background-color"in c){A([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=sk(b["background-color"]),g=sk(c["background-color"]);if(e.qp!==g.qp)return new Lk(a,yk(e),yk(g),d,Rk)}catch(l){window.console.log("Skipping color transition anim: ",l.message)}}};T.LC=function(a,b){this.sM=a;this.gU=b};T.Ay=function(a){return Pk.uF(Pk.tF(a))};
T.Wy=function(a){var b=ti(a),c=ei(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}};T.FF=function(a,b){var c=T.Wy(a),c=T.Ay(c),d=T.Wy(b),e=T.Ay(d);w(c,function(a,b){null!=e[b]||(e[b]=a)});return new T.LC(c,e)};
T.EF=function(a,b,c,d){var e=[];A(T.animGenStyles,function(g){if(null!=b&&null!=c)switch(g){case "left":e.push(T.DF(a,b,c,d));break;case "height":e.push(T.CF(a,b,c,d));break;case "opacity":e.push(T.Gy(a,b,c,d));break;case "visibility":e.push(T.BF(a,b,c,d));break;case "background-color":e.push(T.AF(a,b,c,d))}});var g=[];A(e,function(a){null!=a&&g.push(a)});delete e;return g};
T.DA=function(a,b,c,d){var e=new Nk;A(a,function(a){c&&C(a,"animate",c);e.add(a)});b&&C(e,"begin",b);C(e,"end",function(){d&&d();e.k();e=null;delete e});e.play()};T.uT=function(a,b,c,d){var e=new Ok;A(a,function(a){c&&C(a,"animate",c);e.add(a)});b&&C(e,"begin",b);C(e,"end",function(){d&&d();e.k();e=null;delete e});e.play()};T.zI=function(a,b,c){function d(){Qk.zb(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;C(a,"mouseover",function(){Qk.zb(a,{opacity:b})});C(a,"mouseout",d);d()};
h("nrg.fx.fadeIn",T.nr);h("nrg.fx.fadeInFromZero",T.or);h("nrg.fx.fadeOut",T.un);h("nrg.fx.fadeOutAndRemove",T.GN);h("nrg.fx.fadeTo",T.Dg);h("nrg.fx.animGenStyles",T.animGenStyles);h("nrg.fx.generateAnim_Slide",T.DF);h("nrg.fx.generateAnim_Resize",T.CF);h("nrg.fx.generateAnim_Fade",T.Gy);h("nrg.fx.generateAnim_RemoveAddFade",T.BF);h("nrg.fx.generateAnim_BgColorTrans",T.AF);h("nrg.fx.TransitionDims",T.LC);h("nrg.fx.filterTransitionStyles",T.Ay);h("nrg.fx.getTransitionStyles",T.Wy);
h("nrg.fx.generateTransitionDims",T.FF);h("nrg.fx.generateAnimations",T.EF);h("nrg.fx.parallelAnimate",T.DA);h("nrg.fx.serialAnimate",T.uT);h("nrg.fx.setBasicHoverStates",T.zI);function Sk(a){return a.slice(a.lastIndexOf("/")+1)}function Tk(a){a=Sk(a).replace(/\.+/g,".");var b=a.lastIndexOf(".");return 0>=b?"":a.substr(b+1)}function Uk(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Ga(b,"/")?b+d:b+("/"+d);return b};function Vk(){}h("nrg.dom",Vk);Vk.CE=function(a,b,c){if(!ia(a))throw new TypeError("Array expected!",a);if(b&&!ka(b))throw new TypeError("String expected!",b);if(c&&!ka(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",g=0,g=0;for(len=a.length;g<len;g++)e=a[g],d[e]=Vk.BE(e,{src:b?Uk(b,db(e)+"."+c):""});return d};Vk.FE=function(a,b){var c=vh("img",{src:b});c.style.GX="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";zh(a,c);c.onclick=c.parentNode.onclick};
Vk.BE=function(a,b,c,d){if(!ka(a))throw new TypeError("String expected!");if(b&&!oa(b))throw new TypeError("Object expected!");if(null!=c&&!ma(c))throw new TypeError("Number expected!");if(null!=d&&!ma(d))throw new TypeError("Number expected!");a=Vk.ey("div",a,b?b:{});b&&b.src&&Vk.FE(a,b.src);T.zI(a,void 0===c?1:c,void 0===d?.5:d);return a};
Vk.ey=function(a,b,c){if(!ka(a))throw new TypeError("String expected!",a);if(!ka(b))throw new TypeError("String expected!",b);if(c&&!oa(c))throw new TypeError("Object expected!");c=c&&oa(c)?c:{};c.id=c.id?c.id:b+"_"+r();c["class"]=c["class"]?c["class"]:db(b.replace(/\./g,"-").toLowerCase());return vh(a,c)};Vk.stopPropagation=function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()};
Vk.IM=function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Vk.eZ(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";};Vk.SS=function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b};h("nrg.dom.createBasicHoverButtonSet",Vk.CE);h("nrg.dom.createDivChildImage",Vk.FE);h("nrg.dom.createBasicHoverButton",Vk.BE);
h("nrg.dom.createUniqueDom",Vk.ey);h("nrg.dom.stopPropagation",Vk.stopPropagation);h("nrg.dom.checkForExtraneousArgs",Vk.IM);h("nrg.dom.readCSS",Vk.SS);U.S=function(a){aj.call(this,a);this.FB();this.q=Vk.ey("div",this.constructor.ID_PREFIX,a);this.ou();Wk(this)};k(U.S,aj);h("nrg.ui.Component",U.S);f=U.S.prototype;
f.FB=function(){if(this instanceof U.S){this.constructor.g&&this.constructor.g instanceof U.S&&U.S.prototype.FB.bind(this.constructor.g)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);ca(this.constructor.ko)||(this.constructor.ko=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-"),this.constructor.gd=this.constructor.ko)}};
f.ou=function(){if(null!=this.constructor.g)for(var a=this.constructor.g;null!=a.constructor.ID_PREFIX;)U.S.prototype.ou.bind(a)(),a=a.constructor.g;ca(this.constructor.CSS_SUFFIX)&&!ca(this.constructor.CSS)&&(this.constructor.CSS=zb(this.constructor.CSS_SUFFIX),w(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=dk.Wb(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Wk(a){for(var b=[],c=a;c instanceof U.S;)Ob(b,a.constructor.gd),c=c.constructor.g;A(b,function(a){null!=c.b()&&R(c.b(),a)})}f.Pl="";f.GI=function(a){this.Pl=a};f.wO=function(){return this.Pl};f.eM=function(a){null==this.Ls&&(this.Ls=[]);this.Ls.push(a)};
f.Tj=function(){if(null==this.Ha)this.Ha=ti(this.b());else if(this.Ha.height!==this.F.height||this.Ha.width!==this.F.width)this.Ha=this.F;if(null==this.ks)this.ks=ei(this.b());else if(this.ks.x!==this.pu.x||this.ks.y!==this.pu.y)this.ks=this.pu;this.F=ti(this.b());this.pu=ei(this.b())};f.o=function(){this.Tj()};f.p=function(a){this.Fa&&this.b().parentNode!==a&&null!=a?a.appendChild(this.b()):U.S.g.p.call(this,a)};f.hF=!1;f.lN=function(){return this.hF};
f.i=function(){U.S.g.i.call(this);null!=this.Ls&&(A(this.Ls,function(a){ad(a);a.k()}),Nb(this.Ls));ad(this);ad(this.b());S(this.b());this.ks=this.Ha=this.pu=this.F=this.Pl=null;this.hF=!0};h("nrg.ui.Component.animationLengths",{$U:150,wV:300,gW:600});h("nrg.ui.Component.prototype.validateIdPrefix",U.S.prototype.FB);h("nrg.ui.Component.prototype.imagePrefix",U.S.prototype.Pl);h("nrg.ui.Component.prototype.createCssMap",U.S.prototype.ou);h("nrg.ui.Component.prototype.setImagePrefix",U.S.prototype.GI);
h("nrg.ui.Component.prototype.getImagePrefix",U.S.prototype.wO);h("nrg.ui.Component.prototype.addSubComponent",U.S.prototype.eM);h("nrg.ui.Component.prototype.calcDims",U.S.prototype.Tj);h("nrg.ui.Component.prototype.updateStyle",U.S.prototype.o);h("nrg.ui.Component.prototype.render",U.S.prototype.p);h("nrg.ui.Component.prototype.disposeInternalCalled",U.S.prototype.lN);h("nrg.ui.Component.prototype.disposeInternal",U.S.prototype.i);U.xa=function(){Ij.call(this);this.mF=!1};k(U.xa,Ij);h("nrg.ui.Dialog",U.xa);U.xa.ID_PREFIX="nrg.ui.Dialog";U.xa.CSS={yC:"nrg-ui-dialog-overlay",gt:"nrg-ui-dialog-background",Nk:"nrg-ui-dialog-closebutton",eK:"nrg-ui-dialog-closebutton-image",to:"nrg-ui-dialog-text",Ra:"nrg-ui-dialog-title",Dj:"nrg-ui-dialog-content",bK:"nrg-ui-dialog-buttons"};f=U.xa.prototype;
f.QI=function(a){this.Zp.style.visibility="hidden";this.Je.style.visibility="hidden";null!=a&&Qk.dm(this.b(),a,null,null,function(){this.Zp.style.visibility="visible";this.Je.style.visibility="visible"}.bind(this),function(){this.Zp.style.visibility="hidden";this.Je.style.visibility="hidden"}.bind(this))};f.wx=function(a){R(this.Zp,a)};f.wD=function(a){R(this.Wd,a)};f.sD=function(a){R(this.Je.parentNode,a)};f.tD=function(a){R(this.Je,a)};f.uD=function(a){R(this.lu,a)};f.bM=function(a){R(this.Jx,a)};
function Xk(a){a.lu=oh("modal-dialog-title-close",a.b())[0];R(a.lu,U.xa.CSS.Nk);a.Je=vh("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+r(),"class":U.xa.CSS.eK});a.Je.src=serverRoot+"/images/viewer/xiv/ui/Modal/close.png";a.lu.appendChild(a.Je);C(a.Je,"click",function(a){this.Da(!this.mb());this.dispatchEvent({type:"c"});a.stopPropagation()}.bind(a))}f.mM=function(){var a=this.b(),b=Ik(a,600),c=Hk(a,600),d=Ik(a,600),a=Hk(a,600);this.ZI(b,c,d,a)};
f.Yz=function(a,b){var c=this.b();"left"==a&&(c.style.left="0px");"top"==b&&(c.style.top="0px")};f.Si=function(){var a=this.b(),b=ti(this.b().parentNode);if(null!=this.kp()){var c=this.kp();0==c.opacity?S(c):Qk.zb(c,{width:b.width,height:b.height,"z-index":199})}var c=ti(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);ci(a,d,e)};f.wu=!0;f.Eb=null;f.bw=function(a){this.wu=a;this.ts(a&&this.Fa)};
f.ts=function(a){var b=La(this.oa()+"-title-draggable").split(" "),c=this.pG();this.b()&&(a?uj(c,b):wj(c,b));a&&!this.Eb?(this.Eb=new Li(this.b(),this.Ve),uj(c,b),C(this.Eb,"start",this.cw,!1,this)):!a&&this.Eb&&(this.Eb.k(),this.Eb=null)};f.KJ=function(){this.cw()};
f.cw=function(){var a=Uh(this.da()),b=uh(a)||window,a=ti(this.b().parentNode),b=sh(b||window),c=ti(this.b());"fixed"==bi(this.b())?Ni(this.Eb,new ch(0,0,Math.max(0,b.width-c.width),Math.max(0,b.height-c.height))):Ni(this.Eb,new ch(-1*c.width,-1*c.height,a.width+c.width,a.height+c.height))};f.au=function(a){var b=vh("img",{id:this.constructor.ID_PREFIX+"_Image_"+r(),"class":U.xa.CSS.lt});null==this.Gr&&(this.Gr=[]);this.Gr.push(b);this.Gv.appendChild(b);null!=a&&(b.src=a);return b};
f.il=function(a){var b=vh("div",{id:this.constructor.ID_PREFIX+"_Text_"+r(),"class":U.xa.CSS.to},a);null==this.sj&&(this.sj=[]);this.sj.push(b);b.innerHTML=a||"";this.$l(a);return b};f.QO=function(){return this.b()};
f.p=function(a){U.xa.g.p.call(this,a);R(this.b(),"nrg-ui-dialog");this.Zp=oh("modal-dialog-title",this.b())[0];this.Wd=oh("modal-dialog-content",this.b())[0];this.Jx=oh("modal-dialog-buttons",this.b())[0];this.Je=null;Xk(this);R(this.Jx,U.xa.CSS.bK);R(this.Zp,U.xa.CSS.Ra);R(this.Wd,U.xa.CSS.Dj);U.xa.g.bw.call(this,!1);this.bw(!0)};f.Da=function(a){U.xa.g.Da.call(this,a)};f.nP=function(){return this.sj};
f.i=function(){U.xa.g.i.call(this);delete this.Jx;delete this.Zp;delete this.Wd;delete this.Je;delete this.lu;null!=this.Gv&&(S(this.Gv),delete this.Gv);null!=this.sj&&(A(this.sj,function(a){S(a);delete a}),delete this.sj);null!=this.Gr&&(A(this.Gr,function(a){S(a);delete a}),delete this.Gr)};h("nrg.ui.Dialog.ID_PREFIX",U.xa.ID_PREFIX);h("nrg.ui.Dialog.EventType",{HV:"a",CLOSED:"b",NU:"c"});h("nrg.ui.Dialog.prototype.setMouseoverClass",U.xa.prototype.QI);
h("nrg.ui.Dialog.prototype.addTitleClass",U.xa.prototype.wx);h("nrg.ui.Dialog.prototype.addContentClass",U.xa.prototype.wD);h("nrg.ui.Dialog.prototype.addCloseButtonClass",U.xa.prototype.sD);h("nrg.ui.Dialog.prototype.addCloseButtonImageClass",U.xa.prototype.tD);h("nrg.ui.Dialog.prototype.addCloseSpanClass",U.xa.prototype.uD);h("nrg.ui.Dialog.prototype.addButtonsClass",U.xa.prototype.bM);h("nrg.ui.Dialog.prototype.applyFadeTransitions",U.xa.prototype.mM);h("nrg.ui.Dialog.prototype.moveToCorner",U.xa.prototype.Yz);
h("nrg.ui.Dialog.prototype.center",U.xa.prototype.Si);h("nrg.ui.Dialog.prototype.setDraggable",U.xa.prototype.bw);h("nrg.ui.Dialog.prototype.updateLimits",U.xa.prototype.KJ);h("nrg.ui.Dialog.prototype.addImage",U.xa.prototype.au);h("nrg.ui.Dialog.prototype.addText",U.xa.prototype.il);h("nrg.ui.Dialog.prototype.getOverlay",U.xa.prototype.QO);h("nrg.ui.Dialog.prototype.render",U.xa.prototype.p);h("nrg.ui.Dialog.prototype.setVisible",U.xa.prototype.Da);h("nrg.ui.Dialog.prototype.getTextElements",U.xa.prototype.nP);
h("nrg.ui.Dialog.prototype.disposeInternal",U.xa.prototype.i);U.Bd=function(){U.xa.call(this);R(this.Gv,U.Bd.CSS.yC)};k(U.Bd,U.xa);h("nrg.ui.ErrorOverlay",U.Bd);U.Bd.ID_PREFIX="nrg.ui.ErrorOverlay";U.Bd.CSS={yC:"nrg-ui-infooverlay-overlay",to:"nrg-ui-infooverlay-text"};U.Bd.prototype.il=function(a){U.Bd.g.il.call(this,a);a=this.sj;R(a[a.length-1],U.Bd.CSS.to)};U.Bd.prototype.i=function(){U.Bd.g.i.call(this)};h("nrg.ui.ErrorOverlay.ID_PREFIX",U.Bd.ID_PREFIX);h("nrg.ui.ErrorOverlay.prototype.addText",U.Bd.prototype.il);
h("nrg.ui.ErrorOverlay.prototype.disposeInternal",U.Bd.prototype.i);function Yk(a,b,c,d,e){function g(a){a&&(a.tabIndex=0,zj(a,l.ii()),tj(a,"goog-zippy-header"),Zk(l,a),a&&l.dH.I(a,"keydown",l.xv))}fd.call(this);this.dc=e||ih();this.pn=this.dc.b(a)||null;this.yu=this.dc.b(d||null);this.sd=(this.yz=na(b)?b:null)||!b?null:this.dc.b(b);this.Al=!0==c;this.dH=new Hi(this);this.Rz=new Hi(this);var l=this;g(this.pn);g(this.yu);this.bd(this.Al)}k(Yk,fd);var $k={JB:"action",JC:"toggle"};f=Yk.prototype;f.Cn=!0;f.i=function(){Yk.g.i.call(this);Gc(this.dH);Gc(this.Rz)};
f.ii=function(){return"tab"};f.Qb=function(){return this.sd};f.toggle=function(){this.bd(!this.Al)};f.bd=function(a){this.sd?xi(this.sd,a):a&&this.yz&&(this.sd=this.yz());this.sd&&tj(this.sd,"goog-zippy-content");this.yu?(xi(this.pn,!a),xi(this.yu,a)):al(this,a);this.Al=a;this.dispatchEvent(new bl($k.JC,this))};function al(a,b){a.pn&&(xj(a.pn,"goog-zippy-expanded",b),xj(a.pn,"goog-zippy-collapsed",!b),Aj(a.pn,"expanded",b))}
f.vs=function(a){this.Cn!=a&&((this.Cn=a)?(Zk(this,this.pn),Zk(this,this.yu)):this.Rz.wh())};function Zk(a,b){b&&a.Rz.I(b,"click",a.wv)}f.xv=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Ic($k.JB,this)),a.preventDefault(),a.stopPropagation()};f.wv=function(){this.toggle();this.dispatchEvent(new Ic($k.JB,this))};function bl(a,b){Ic.call(this,a,b)}k(bl,Ic);function cl(a,b,c,d){d=d||ih();var e=d.C("div",{style:"overflow:hidden"});b=d.b(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.zu=e;this.Vh=null;Yk.call(this,a,b,c,void 0,d);a=this.Al;this.zu.style.display=a?"":"none";al(this,a)}k(cl,Yk);f=cl.prototype;f.eu=500;f.lM=Rk;
f.bd=function(a){if(this.Al!=a||this.Vh){"none"==this.zu.style.display&&(this.zu.style.display="");var b=this.Qb().offsetHeight,c=0;this.Vh?(a=this.Al,ad(this.Vh),this.Vh.stop(!1),c=parseInt(this.Qb().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;al(this,a);this.Vh=new ok([0,c],[0,a?b:0],this.eu,this.lM);C(this.Vh,["begin","animate","end"],this.iR,!1,this);C(this.Vh,"end",wa(this.jR,this,a));this.Vh.play(!1)}};f.iR=function(a){var b=this.Qb();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.jR=function(a){a&&(this.Qb().style.marginTop="0");ad(this.Vh);this.Al=a;this.Vh=null;a||(this.zu.style.display="none");this.dispatchEvent(new bl($k.JC,this))};function U(){}h("nrg.ui",U);U.gF=function(a){null!=a&&(a=ia(a)?a:[a],A(a,function(a){ad(a);a.k()}),Nb(a))};U.py=function(a){null!=a&&(ad(a),a.k())};U.qy=function(a){w(a,function(b,c){ad(b);S(b);delete a[c]});wb(a)};U.tu=function(a){w(a,function(b,c){ad(b);b.k();delete a[c]});wb(a)};U.ib=function(a,b,c,d){U.S.call(this);this.Ae=a;this.Lc=U.ib.YM(a);this.Lc[U.ib.rt]=a.toLowerCase();null!=d?d(b,this.Lc):b.appendChild(this.Lc);this.ez=U.ib.XM(a);this.Lc.appendChild(this.ez);this.ck=U.ib.WM(a);this.Lc.appendChild(this.ck);this.Yo=U.ib.VM(a);b.appendChild(this.Yo);this.Hf=new this.CU(this.Lc,this.Yo,null!=c?c:!1);this.TT=pa(this);this.Af={};C(this.Lc,"mouseover",this.yS.bind(this));C(this.Lc,"mouseout",this.xS.bind(this));dl(this)};k(U.ib,U.S);h("nrg.ui.ZippyNode",U.ib);
U.ib.ID_PREFIX="nrg.ui.ZippyNode";var el={};U.ib.CSS_SUFFIX={jt:"header",jC:"header-mouseover",rK:"header-label",oK:"expandicon",XB:"expandicon-mouseover",Dj:"content",Dj:"content-sub"};U.ib.XM=function(a){var b=vh("div",{id:"ZippyHeaderLabel_"+a+"_"+r(),"class":U.ib.CSS.rK}),c=a.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<a?Ya(a,105):c.length==a.length?Ya(a,45):a;return b};U.ib.WM=function(a){return vh("div",{id:"ZippyExpandIcon_"+a+"_"+r(),"class":U.ib.CSS.oK},"+")};
U.ib.VM=function(a){return vh("div",{id:"ZippyContent_"+a+"_"+r(),"class":U.ib.CSS.Dj})};U.ib.YM=function(a){return vh("div",{id:"ZippyHeader_"+a+"_"+r(),"class":U.ib.CSS.jt})};U.ib.rt=r();f=U.ib.prototype;f.CU=cl;f.Fg=function(){return this.Ae};f.bd=function(a){this.Hf.bd(a)};function dl(a){C(a.Hf,qb($k),function(a){null!=this.Hf.Vh?this.dispatchEvent({type:"f"}):a.target.Al?this.zA():(this.ck.innerHTML="+",Qk.zb(this.ck,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"e"}))}.bind(a))}
f.zA=function(){this.ck.innerHTML="-";Qk.zb(this.ck,{"margin-left":"-1em"});this.dispatchEvent({type:"d"})};f.yS=function(){R(this.Lc,U.ib.CSS.jC);R(this.ck,U.ib.CSS.XB)};f.xS=function(){Vg(this.Lc,U.ib.CSS.jC);Vg(this.ck,U.ib.CSS.XB)};f.i=function(){U.ib.g.i.call(this);S(this.ez);delete this.ez;S(this.ck);delete this.ck;ad(this.Lc);S(this.Lc);delete this.Lc;S(this.Yo);delete this.Yo;null!=this.Hf&&(this.Hf.k(),ad(this.Hf),delete this.Hf);U.tu(this.Af);delete this.Af;delete this.TT;delete this.Ae};function fl(){fd.call(this);this.Nr=[];this.pB=[];this.rs=[]}k(fl,fd);f=fl.prototype;f.av=!1;f.bv=!1;f.Rl=!1;f.bH=function(){return this.Rl};f.TI=function(a){this.Tv=a};f.Ta=function(){if(!this.Rl){for(var a,b=0;a=this.Nr[b];b++)gl(this,a);this.Rl=!0}};function gl(a,b){a.av&&(C(b.element,"mousedown",b.qi,!1,b),a.fB&&tj(b.element,a.fB));a.bv&&a.oB&&tj(b.element,a.oB)}
function hl(a){for(var b,c=0;b=a.Nr[c];c++){var d=a;d.av&&(Zc(b.element,"mousedown",b.qi,!1,b),d.fB&&vj(b.element,d.fB));d.bv&&d.oB&&vj(b.element,d.oB);b.k()}a.Nr.length=0}
f.Is=function(a,b){if(!this.dh)if(this.dh=b,!1==this.dispatchEvent(new il("dragstart",0,this.dh)))this.dh=null;else{var c=b.rl;this.nn=this.by(c);var d=kh(c);d.body.appendChild(this.nn);var e=this.nn,g=ji(c),c=Di(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.Eb=new Li(e);this.Eb.TI(this.Tv);C(this.Eb,"drag",this.EH,!1,this);C(this.Eb,"end",this.zl,!1,this);C(d.body,"selectstart",this.uJ);this.Wp=[];for(e=0;d=this.pB[e];e++)for(var l,
g=0;l=d.Nr[g];g++)for(var c=d,m=[l.element],q=this.Wp,p=0;p<m.length;p++){var t=m[p],s,u=t;s=ji(u);u=ti(u);s=new $g(s.y,s.x+u.width,s.y+u.height,s.x);q.push(new jl(s,c,l,t));kl(this,s)}this.Ek||(this.Ek=new $g(0,0,0,0));for(e=0;d=this.rs[e];e++)d.Yx=[],d.wI=d.q.scrollLeft,d.xI=d.q.scrollTop,g=ji(d.q),c=ti(d.q),d.Gd=new $g(g.y,g.x+c.width,g.y+c.height,g.x);for(e=0;c=this.Wp[e];e++)for(g=0;d=this.rs[g];g++)Hh(d.q,c.q)&&(d.Yx.push(c),c.qs=d);this.Xm=null;for(e=0;d=this.rs[e];e++)C(d.q,"scroll",this.vE,
!1,this);this.Eb.Is(a);a.preventDefault()}};
f.zl=function(a){var b=a.sN?null:this.Xm;if(b&&b.$n){var c=a.clientX;a=a.clientY;var d=Xh(ih(this.nn)),e=c+d.x,d=a+d.y,g;this.Ms&&(g=this.Ms(b.mk,b.Gd,e,d));this.dispatchEvent(new il("drag",0,this.dh,0,b.mk,0,c,a));b.$n.dispatchEvent(new il("drop",0,this.dh,0,b.mk,0,c,a,0,0,g))}this.dispatchEvent(new il("dragend",0,this.dh));Zc(this.Eb,"drag",this.EH,!1,this);Zc(this.Eb,"end",this.zl,!1,this);Zc(kh(this.dh.rl).body,"selectstart",this.uJ);for(b=0;c=this.rs[b];b++)Zc(c.q,"scroll",this.vE,!1,this),c.Yx=
[];this.Eb.k();S(this.nn);delete this.dh;delete this.nn;delete this.Eb;delete this.Wp;delete this.Xm};
f.EH=function(a){var b,c=Xh(ih(this.nn));b=new Yg(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Xm,g;if(e){this.Ms&&e.$n&&(g=this.Ms(e.mk,e.Gd,c,d));if(e.Gd.contains(b)&&g==this.pD)return;e.$n&&(this.dispatchEvent(new il("dragout",0,this.dh,0,e.mk)),e.$n.dispatchEvent(new il("dragout",0,this.dh,0,e.mk,0,void 0,void 0,0,0,this.pD)));this.pD=g;this.Xm=null}if(this.Ek.contains(b)){a:{for(var l=0;e=this.Wp[l];l++)if(e.Gd.contains(b))if(e.qs){if(e.qs.Gd.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.Xm=b)&&e.$n)this.Ms&&(g=this.Ms(e.mk,e.Gd,c,d)),c=new il("dragover",0,this.dh,0,e.mk),c.XT=g,this.dispatchEvent(c),e.$n.dispatchEvent(new il("dragover",0,this.dh,0,e.mk,0,a.clientX,a.clientY,0,0,g));else if(!e){this.Bg||(this.Bg=new jl(this.Ek.clone()));a=this.Bg.Gd;a.top=this.Ek.top;a.right=this.Ek.right;a.bottom=this.Ek.bottom;a.left=this.Ek.left;for(g=0;e=this.Wp[g];g++)b=e.Gd,e.qs&&(e=e.qs.Gd,b=new $g(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),l=null,d>=b.bottom?l=b.bottom>a.top?b.bottom:a.top:d<b.top&&(l=b.top<a.bottom?b.top:a.bottom),null===e||null===l||(Math.abs(e-c)>Math.abs(l-d)?l=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==l&&(l<=d?a.top=l:a.bottom=l);this.Xm=10<=(a.right-a.left)*(a.bottom-a.top)?this.Bg:null}}};f.uJ=function(){return!1};
f.vE=function(a){for(var b=0,c;c=this.rs[b];b++)if(a.target==c.q){var d=c.xI-c.q.scrollTop,e=c.wI-c.q.scrollLeft;c.xI=c.q.scrollTop;c.wI=c.q.scrollLeft;this.Bg&&this.Xm==this.Bg&&(0<d?this.Bg.Gd.top+=d:this.Bg.Gd.bottom+=d,0<e?this.Bg.Gd.left+=e:this.Bg.Gd.right+=e);for(var g=0,l;l=c.Yx[g];g++)l=l.Gd,l.top+=d,l.left+=e,l.bottom+=d,l.right+=e,kl(this,l)}this.Eb.Kp(a)};
f.by=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=vh("table",null,vh("tbody",null,b));break a;case "td":case "th":a=vh("table",null,vh("tbody",null,vh("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.tN&&tj(a,this.tN);return a};f.RF=function(){return this.Eb};
function kl(a,b){if(1==a.Wp.length)a.Ek=new $g(b.top,b.right,b.bottom,b.left);else{var c=a.Ek;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.i=function(){fl.g.i.call(this);hl(this)};function il(a,b,c,d,e,g,l,m,q,p,t){Ic.call(this,a);this.vu=c;this.dp=e;this.clientX=l;this.clientY=m;this.XT=t}k(il,Ic);il.prototype.i=function(){};
function ll(a,b){fd.call(this);this.element=lh(a);this.data=b;this.ub=null;this.Hd=new Hi(this);Fc(this,xa(Gc,this.Hd));if(!this.element)throw Error("Invalid argument");}k(ll,fd);f=ll.prototype;f.rl=null;f.qi=function(a){if(Nc(a)){var b=a.target;b&&(this.Hd.I(b,"mousemove",this.DH,!1).I(b,"mouseout",this.DH,!1),this.Hd.I(kh(b),"mouseup",this.VQ,!0),this.rl=b,this.iB=new Yg(a.clientX,a.clientY),a.preventDefault())}};f.ws=function(a){this.ub=a};
f.DH=function(a){var b=this.rl,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.iB.x)+Math.abs(a.clientY-this.iB.y)||b)this.Hd.wh(),this.ub.Is(a,this)};f.VQ=function(){this.Hd.wh();delete this.iB;this.rl=null};function jl(a,b,c,d){this.Gd=a;this.$n=b;this.mk=c;this.q=d}jl.prototype.qs=null;function ml(a,b){this.type=a;this.currentTarget=this.target=b||null}f=ml.prototype;f.ti=!1;f.defaultPrevented=!1;f.ns=!0;f.stopPropagation=function(){this.ti=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.ns=!1};
function nl(a){a=new ml("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=ni(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.ns=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.ti;d--){var e=b[d],g=a.type,l=new Lc(a,b[d]);ib(e)?gd(e,g,!0,l):cd(e,g,!0,l)}for(d=0;d<b.length&&!a.ti;d++)e=b[d],g=a.type,l=new Lc(a,b[d]),ib(e)?gd(e,g,!1,l):cd(e,g,!1,l)};function ol(a,b){if(!a)throw Error("Invalid class name "+a);if(!na(b))throw Error("Invalid decorator function "+b);pl[a]=b}var ql={},pl={};function rl(){}var sl;fa(rl);var tl={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=rl.prototype;f.ii=function(){};f.C=function(a){var b=a.da().C("div",this.wn(a).join(" "),a.Tf());ul(this,a,b);return b};f.Qb=function(a){return a};f.rn=function(a,b,c){if(a=a.b?a.b():a){var d=[b];lc&&!uc("7")&&(d=vl(rj(a),b),d.push(b));(c?uj:wj)(a,d)}};f.zg=function(){return!0};
f.cc=function(a,b){b.id&&ej(a,b.id);var c=this.Qb(b);c&&c.firstChild?wl(a,c.firstChild.nextSibling?Rb(c.childNodes):c.firstChild):a.Wd=null;var d=0,e=this.oa(),g=this.oa(),l=!1,m=!1,c=!1,q=Rb(rj(b));A(q,function(a){l||a!=e?m||a!=g?d|=this.Sy(a):m=!0:(l=!0,g==e&&(m=!0))},this);a.fa=d;l||(q.push(e),g==e&&(m=!0));m||q.push(g);var p=a.hi;p&&q.push.apply(q,p);if(lc&&!uc("7")){var t=vl(q);0<t.length&&(q.push.apply(q,t),c=!0)}if(!l||!m||p||c)b.className=q.join(" ");ul(this,a,b);return b};
f.xp=function(a){a.Ig()&&this.Pp(a.b(),!0);a.isEnabled()&&this.bm(a,a.mb())};function xl(a,b,c){if(a=c||a.ii())c=b.getAttribute("role")||null,a!=c&&zj(b,a)}function ul(a,b,c){b.mb()||Aj(c,"hidden",!b.mb());b.isEnabled()||a.xj(c,1,!b.isEnabled());yl(b,8)&&a.xj(c,8,!!(b.fa&8));yl(b,16)&&a.xj(c,16,b.Tl());yl(b,64)&&a.xj(c,64,!!(b.fa&64))}f.ss=function(a,b){Ai(a,!b,!lc&&!kc)};f.Pp=function(a,b){this.rn(a,this.oa()+"-rtl",b)};f.lk=function(a){var b;return yl(a,32)&&(b=a.td())?Nh(b)&&Oh(b):!1};
f.bm=function(a,b){var c;if(yl(a,32)&&(c=a.td())){if(!b&&a.fa&32){try{c.blur()}catch(d){}a.fa&32&&a.An(null)}(Nh(c)&&Oh(c))!=b&&Mh(c,b)}};f.Da=function(a,b){xi(a,b);a&&Aj(a,"hidden",!b)};f.dd=function(a,b,c){var d=a.b();if(d){var e=this.sr(b);e&&this.rn(a,e,c);this.xj(d,b,c)}};f.xj=function(a,b,c){sl||(sl={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=sl[b];var d=a.getAttribute("role")||null;d&&(d=tl[d]||b,b="checked"==b||"selected"==b?d:b);b&&Aj(a,b,c)};
f.$l=function(a,b){var c=this.Qb(a);if(c&&(Ah(c),b))if(ka(b))Jh(c,b);else{var d=function(a){if(a){var b=kh(c);c.appendChild(ka(a)?b.createTextNode(a):a)}};ia(b)?A(b,d):!ja(b)||"nodeType"in b?d(b):A(Rb(b),d)}};f.td=function(a){return a.b()};f.oa=function(){return"goog-control"};f.wn=function(a){var b=this.oa(),c=[b],d=this.oa();d!=b&&c.push(d);b=a.np();for(d=[];b;){var e=b&-b;d.push(this.sr(e));b&=~e}c.push.apply(c,d);(a=a.hi)&&c.push.apply(c,a);lc&&!uc("7")&&c.push.apply(c,vl(c));return c};
function vl(a,b){var c=[];b&&(a=a.concat([b]));A([],function(d){!Jb(d,xa(Mb,a))||b&&!Mb(d,b)||c.push(d.join("_"))});return c}f.sr=function(a){this.ku||zl(this);return this.ku[a]};f.Sy=function(a){if(!this.pJ){this.ku||zl(this);var b=this.ku,c={},d;for(d in b)c[b[d]]=d;this.pJ=c}a=parseInt(this.pJ[a],10);return isNaN(a)?0:a};function zl(a){var b=a.oa();b.replace(/\xa0|\s/g," ");a.ku={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Al(a,b){fd.call(this);a&&this.To(a,b)}k(Al,fd);f=Al.prototype;f.q=null;f.cv=null;f.rz=null;f.dv=null;f.Jg=-1;f.Ul=-1;f.Bx=!1;
var Bl={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Cl={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Dl=lc||nc&&uc("525"),El=gc&&mc;f=Al.prototype;
f.Lu=function(a){nc&&(17==this.Jg&&!a.ctrlKey||18==this.Jg&&!a.altKey||gc&&91==this.Jg&&!a.metaKey)&&(this.Ul=this.Jg=-1);-1==this.Jg&&(a.ctrlKey&&17!=a.keyCode?this.Jg=17:a.altKey&&18!=a.keyCode?this.Jg=18:a.metaKey&&91!=a.keyCode&&(this.Jg=91));Dl&&!lj(a.keyCode,this.Jg,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Ul=nj(a.keyCode),El&&(this.Bx=a.altKey))};f.QP=function(a){this.Ul=this.Jg=-1;this.Bx=a.altKey};
f.handleEvent=function(a){var b=a.Zd,c,d,e=b.altKey;lc&&"keypress"==a.type?(c=this.Ul,d=13!=c&&27!=c?b.keyCode:0):nc&&"keypress"==a.type?(c=this.Ul,d=0<=b.charCode&&63232>b.charCode&&mj(c)?b.charCode:0):kc?(c=this.Ul,d=mj(c)?b.keyCode:0):(c=b.keyCode||this.Ul,d=b.charCode||0,El&&(e=this.Bx),gc&&63==d&&224==c&&(c=191));var g=c=nj(c),l=b.keyIdentifier;c?63232<=c&&c in Bl?g=Bl[c]:25==c&&a.shiftKey&&(g=9):l&&l in Cl&&(g=Cl[l]);a=g==this.Jg;this.Jg=g;b=new Fl(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.b=function(){return this.q};f.To=function(a,b){this.dv&&this.detach();this.q=a;this.cv=C(this.q,"keypress",this,b);this.rz=C(this.q,"keydown",this.Lu,b,this);this.dv=C(this.q,"keyup",this.QP,b,this)};f.detach=function(){this.cv&&($c(this.cv),$c(this.rz),$c(this.dv),this.dv=this.rz=this.cv=null);this.q=null;this.Ul=this.Jg=-1};f.i=function(){Al.g.i.call(this);this.detach()};function Fl(a,b,c,d){Lc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}k(Fl,Lc);function Gl(a,b,c){aj.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=pa(b);if(d=ql[d])break;b=b.g?b.g.constructor:null}b=d?na(d.qf)?d.qf():new d:null}this.Va=b;this.Wd=ca(a)?a:null}k(Gl,aj);f=Gl.prototype;f.Wd=null;f.fa=0;f.Ns=39;f.Tq=255;f.Yn=0;f.Md=!0;f.hi=null;f.Cn=!0;f.cu=!1;f.IA=null;f.vs=function(a){this.Fa&&a!=this.Cn&&Hl(this,a);this.Cn=a};f.td=function(){return this.Va.td(this)};f.Eu=function(){return this.fc||(this.fc=new Al)};f.ec=function(){return this.Va};
f.rn=function(a,b){b?a&&(this.hi?Mb(this.hi,a)||this.hi.push(a):this.hi=[a],this.Va.rn(this,a,!0)):a&&this.hi&&Pb(this.hi,a)&&(0==this.hi.length&&(this.hi=null),this.Va.rn(this,a,!1))};f.C=function(){var a=this.Va.C(this);this.q=a;xl(this.Va,a,this.Gl());this.cu||this.Va.ss(a,!1);this.mb()||this.Va.Da(a,!1)};f.Gl=function(){return this.IA};f.Qb=function(){return this.Va.Qb(this.b())};f.zg=function(a){return this.Va.zg(a)};
f.Of=function(a){this.q=a=this.Va.cc(this,a);xl(this.Va,a,this.Gl());this.cu||this.Va.ss(a,!1);this.Md="none"!=a.style.display};f.Pb=function(){Gl.g.Pb.call(this);this.Va.xp(this);if(this.Ns&-2&&(this.Cn&&Hl(this,!0),yl(this,32))){var a=this.td();if(a){var b=this.Eu();b.To(a);this.Rb().I(b,"key",this.aj).I(a,"focus",this.Bn).I(a,"blur",this.An)}}};
function Hl(a,b){var c=a.Rb(),d=a.b();b?(c.I(d,"mouseover",a.Dn).I(d,"mousedown",a.bj).I(d,"mouseup",a.li).I(d,"mouseout",a.Nu),a.Ar!=ea&&c.I(d,"contextmenu",a.Ar),lc&&c.I(d,"dblclick",a.AG)):(c.gc(d,"mouseover",a.Dn).gc(d,"mousedown",a.bj).gc(d,"mouseup",a.li).gc(d,"mouseout",a.Nu),a.Ar!=ea&&c.gc(d,"contextmenu",a.Ar),lc&&c.gc(d,"dblclick",a.AG))}f.Id=function(){Gl.g.Id.call(this);this.fc&&this.fc.detach();this.mb()&&this.isEnabled()&&this.Va.bm(this,!1)};
f.i=function(){Gl.g.i.call(this);this.fc&&(this.fc.k(),delete this.fc);delete this.Va;this.hi=this.Wd=null};f.Tf=function(){return this.Wd};f.$l=function(a){this.Va.$l(this.b(),a);this.Wd=a};function wl(a,b){a.Wd=b}f.Bu=function(){var a=this.Tf();if(!a)return"";a=ka(a)?a:ia(a)?Hb(a,Rh).join(""):Ph(a);return Ka(a)};f.Pp=function(a){Gl.g.Pp.call(this,a);var b=this.b();b&&this.Va.Pp(b,a)};f.ss=function(a){this.cu=a;var b=this.b();b&&this.Va.ss(b,a)};f.mb=function(){return this.Md};
f.Da=function(a,b){if(b||this.Md!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.Va.Da(c,a);this.isEnabled()&&this.Va.bm(this,a);this.Md=a;return!0}return!1};f.isEnabled=function(){return!(this.fa&1)};f.xd=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Il(this,1,!a)||(a||(this.setActive(!1),this.xi(!1)),this.mb()&&this.Va.bm(this,a),this.dd(1,!a))};f.xi=function(a){Il(this,2,a)&&this.dd(2,a)};f.dj=function(){return!!(this.fa&4)};
f.setActive=function(a){Il(this,4,a)&&this.dd(4,a)};f.zs=function(a){Il(this,8,a)&&this.dd(8,a)};f.Tl=function(){return!!(this.fa&16)};f.xh=function(a){Il(this,16,a)&&this.dd(16,a)};f.cd=function(a){Il(this,64,a)&&this.dd(64,a)};f.np=function(){return this.fa};f.dd=function(a,b){yl(this,a)&&b!=!!(this.fa&a)&&(this.Va.dd(this,a,b),this.fa=b?this.fa|a:this.fa&~a)};function yl(a,b){return!!(a.Ns&b)}
f.de=function(a,b){if(this.Fa&&this.fa&a&&!b)throw Error("Component already rendered");!b&&this.fa&a&&this.dd(a,!1);this.Ns=b?this.Ns|a:this.Ns&~a};function Jl(a,b){return!!(a.Tq&b)&&yl(a,b)}function Il(a,b,c){return yl(a,b)&&!!(a.fa&b)!=c&&(!(a.Yn&b)||a.dispatchEvent(cj(b,c)))&&!a.ln}f.Dn=function(a){(!a.relatedTarget||!Hh(this.b(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&Jl(this,2)&&this.xi(!0)};
f.Nu=function(a){a.relatedTarget&&Hh(this.b(),a.relatedTarget)||!this.dispatchEvent("leave")||(Jl(this,4)&&this.setActive(!1),Jl(this,2)&&this.xi(!1))};f.Ar=ea;f.bj=function(a){this.isEnabled()&&(Jl(this,2)&&this.xi(!0),Nc(a)&&(Jl(this,4)&&this.setActive(!0),this.Va.lk(this)&&this.td().focus()));!this.cu&&Nc(a)&&a.preventDefault()};f.li=function(a){this.isEnabled()&&(Jl(this,2)&&this.xi(!0),this.dj()&&this.Pn(a)&&Jl(this,4)&&this.setActive(!1))};f.AG=function(a){this.isEnabled()&&this.Pn(a)};
f.Pn=function(a){Jl(this,16)&&this.xh(!this.Tl());Jl(this,8)&&this.zs(!0);Jl(this,64)&&this.cd(!(this.fa&64));var b=new Ic("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.FA=a.FA);return this.dispatchEvent(b)};f.Bn=function(){Jl(this,32)&&Il(this,32,!0)&&this.dd(32,!0)};f.An=function(){Jl(this,4)&&this.setActive(!1);Jl(this,32)&&Il(this,32,!1)&&this.dd(32,!1)};
f.aj=function(a){return this.mb()&&this.isEnabled()&&this.ki(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.ki=function(a){return 13==a.keyCode&&this.Pn(a)};if(!na(Gl))throw Error("Invalid component class "+Gl);if(!na(rl))throw Error("Invalid renderer class "+rl);var Kl=pa(Gl);ql[Kl]=rl;ol("goog-control",function(){return new Gl(null)});function Ll(){this.sE=[]}k(Ll,rl);fa(Ll);function Ml(a,b){var c=a.sE[b];if(!c){switch(b){case 0:c=a.oa()+"-highlight";break;case 1:c=a.oa()+"-checkbox";break;case 2:c=a.oa()+"-content"}a.sE[b]=c}return c}f=Ll.prototype;f.ii=function(){return"menuitem"};f.C=function(a){var b=a.da().C("div",this.wn(a).join(" "),Nl(this,a.Tf(),a.da()));Ol(this,a,b,yl(a,8)||yl(a,16));return b};f.Qb=function(a){return a&&a.firstChild};
f.cc=function(a,b){var c=Dh(b),d=Ml(this,2);c&&sj(c,d)||b.appendChild(Nl(this,b.childNodes,a.da()));sj(b,"goog-option")&&(a.Zv(!0),this.Zv(a,b,!0));return Ll.g.cc.call(this,a,b)};f.$l=function(a,b){var c=this.Qb(a),d=Pl(this,a)?c.firstChild:null;Ll.g.$l.call(this,a,b);d&&!Pl(this,a)&&c.insertBefore(d,c.firstChild||null)};function Nl(a,b,c){a=Ml(a,2);return c.C("div",a,b)}f.UI=function(a,b,c){a&&b&&Ol(this,a,b,c)};f.Zv=function(a,b,c){a&&b&&Ol(this,a,b,c)};
function Pl(a,b){var c=a.Qb(b);if(c){var c=c.firstChild,d=Ml(a,1);return!!c&&Gh(c)&&sj(c,d)}return!1}function Ol(a,b,c,d){xl(a,c,b.Gl());ul(a,b,c);d!=Pl(a,c)&&(xj(c,"goog-option",d),c=a.Qb(c),d?(a=Ml(a,1),c.insertBefore(b.da().C("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.sr=function(a){switch(a){case 2:return Ml(this,0);case 16:case 8:return"goog-option-selected";default:return Ll.g.sr.call(this,a)}};
f.Sy=function(a){var b=Ml(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return Ll.g.Sy.call(this,a)}};f.oa=function(){return"goog-menuitem"};function Ql(a,b,c,d){Gl.call(this,a,d||Ll.qf(),c);this.aa(b)}k(Ql,Gl);f=Ql.prototype;f.ea=function(){var a=this.Qz;return null!=a?a:this.Bu()};f.aa=function(a){this.Qz=a};f.de=function(a,b){Ql.g.de.call(this,a,b);switch(a){case 8:this.Tl()&&!b&&this.xh(!1);var c=this.b();c&&this.ec().UI(this,c,b);break;case 16:(c=this.b())&&this.ec().Zv(this,c,b)}};f.UI=function(a){this.de(8,a)};f.Zv=function(a){this.de(16,a)};
f.Bu=function(){var a=this.Tf();return ia(a)?(a=Hb(a,function(a){return Gh(a)&&(sj(a,"goog-menuitem-accel")||sj(a,"goog-menuitem-mnemonic-separator"))?"":Rh(a)}).join(""),Ka(a)):Ql.g.Bu.call(this)};f.li=function(a){var b=this.getParent();if(b){var c=b.YH;b.YH=null;if(b=c&&ma(a.clientX))b=new Yg(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}Ql.g.li.call(this,a)};f.ki=function(a){return a.keyCode==this.BH&&this.Pn(a)?!0:Ql.g.ki.call(this,a)};f.NO=function(){return this.BH};
ol("goog-menuitem",function(){return new Ql(null)});Ql.prototype.Gl=function(){return yl(this,16)?"menuitemcheckbox":yl(this,8)?"menuitemradio":Ql.g.Gl.call(this)};function Rl(a){this.aE=a}fa(Rl);f=Rl.prototype;f.ii=function(){return this.aE};function Sl(a,b){a&&(a.tabIndex=b?0:-1)}f.C=function(a){return a.da().C("div",this.wn(a).join(" "))};f.Qb=function(a){return a};f.zg=function(a){return"DIV"==a.tagName};f.cc=function(a,b){b.id&&ej(a,b.id);var c=this.oa(),d=!1,e=rj(b);e&&A(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.xd(!1):b==c+"-horizontal"?a.Bk(Tl):b==c+"-vertical"&&a.Bk(Ul))},this);d||tj(b,c);Vl(this,a,this.Qb(b));return b};
function Vl(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var g=a.Jy(d);g&&(g.q=d,b.isEnabled()||g.xd(!1),b.Rq(g),g.cc(d))}else d.nodeValue&&""!=La(d.nodeValue)||c.removeChild(d);d=e}}f.Jy=function(a){a:{var b;a=rj(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in pl?pl[b]():null){a=b;break a}a=null}return a};f.xp=function(a){a=a.b();Ai(a,!0,mc);lc&&(a.hideFocus=!0);var b=this.ii();b&&zj(a,b)};f.td=function(a){return a.b()};f.oa=function(){return"goog-container"};
f.wn=function(a){var b=this.oa(),c=[b,a.$c()==Tl?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function Wl(){}k(Wl,rl);fa(Wl);Wl.prototype.C=function(a){return a.da().C("div",this.oa())};Wl.prototype.cc=function(a,b){b.id&&ej(a,b.id);if("HR"==b.tagName){var c=b;b=this.C(a);Bh(b,c);S(c)}else tj(b,this.oa());return b};Wl.prototype.$l=function(){};Wl.prototype.oa=function(){return"goog-menuseparator"};function Xl(a,b){Gl.call(this,null,a||Wl.qf(),b);this.de(1,!1);this.de(2,!1);this.de(4,!1);this.de(32,!1);this.fa=1}k(Xl,Gl);Xl.prototype.Pb=function(){Xl.g.Pb.call(this);zj(this.b(),"separator")};ol("goog-menuseparator",function(){return new Xl});function Yl(a){this.aE=a||"menu"}k(Yl,Rl);fa(Yl);f=Yl.prototype;f.zg=function(a){return"UL"==a.tagName||Yl.g.zg.call(this,a)};f.Jy=function(a){return"HR"==a.tagName?new Xl:Yl.g.Jy.call(this,a)};f.dn=function(a,b){return Hh(a.b(),b)};f.oa=function(){return"goog-menu"};f.xp=function(a){Yl.g.xp.call(this,a);Aj(a.b(),"haspopup","true")};function Zl(a,b,c,d,e,g,l,m,q){var p,t;if(p=c.offsetParent){var s="HTML"==p.tagName||"BODY"==p.tagName;s&&"static"==bi(p)||(t=ji(p),s||(s=(s=li(p))&&mc?-p.scrollLeft:!s||lc&&uc("8")||"visible"==ai(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,t=Zg(t,new Yg(s,p.scrollTop))))}p=t||new Yg;t=vi(a);(s=ii(a))&&t.YG(new ch(s.left,s.top,s.right-s.left,s.bottom-s.top));var s=ih(a),u=ih(c);if(s.Sa!=u.Sa){var v=s.Sa.body,u=Wh(u),D=new Yg(0,0),B=uh(kh(v)),I=v;do{var G=B==u?ji(I):oi(I);
D.x+=G.x;D.y+=G.y}while(B&&B!=u&&(I=B.frameElement)&&(B=B.parent));v=Zg(D,ji(v));lc&&!Vh(s)&&(v=Zg(v,Xh(s)));t.left+=v.x;t.top+=v.y}a=$l(a,b);b=new Yg(a&2?t.left+t.width:t.left,a&1?t.top+t.height:t.top);b=Zg(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var Q;if(l)if(q)Q=q;else if(Q=ii(c))Q.top-=p.y,Q.right-=p.x,Q.bottom-=p.y,Q.left-=p.x;return am(b,c,d,g,Q,l,m)}
function am(a,b,c,d,e,g,l){a=a.clone();var m=0,q=$l(b,c);c=ti(b);l=l?l.clone():c.clone();if(d||0!=q)q&2?a.x-=l.width+(d?d.right:0):d&&(a.x+=d.left),q&1?a.y-=l.height+(d?d.bottom:0):d&&(a.y+=d.top);if(g&&(e?(m=a,d=0,65==(g&65)&&(m.x<e.left||m.x>=e.right)&&(g&=-2),132==(g&132)&&(m.y<e.top||m.y>=e.bottom)&&(g&=-5),m.x<e.left&&g&1&&(m.x=e.left,d|=1),m.x<e.left&&m.x+l.width>e.right&&g&16&&(l.width=Math.max(l.width-(m.x+l.width-e.right),0),d|=4),m.x+l.width>e.right&&g&1&&(m.x=Math.max(e.right-l.width,e.left),
d|=1),g&2&&(d=d|(m.x<e.left?16:0)|(m.x+l.width>e.right?32:0)),m.y<e.top&&g&4&&(m.y=e.top,d|=2),m.y<=e.top&&m.y+l.height<e.bottom&&g&32&&(l.height=Math.max(l.height-(e.top-m.y),0),m.y=e.top,d|=8),m.y>=e.top&&m.y+l.height>e.bottom&&g&32&&(l.height=Math.max(l.height-(m.y+l.height-e.bottom),0),d|=8),m.y+l.height>e.bottom&&g&4&&(m.y=Math.max(e.bottom-l.height,e.top),d|=2),g&8&&(d=d|(m.y<e.top?64:0)|(m.y+l.height>e.bottom?128:0)),m=d):m=256,m&496))return m;ci(b,a);bh(c,l)||(e=Vh(ih(kh(b))),!lc||e&&uc("8")?
(b=b.style,mc?b.MozBoxSizing="border-box":nc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(l.width,0)+"px",b.height=Math.max(l.height,0)+"px"):(a=b.style,e?(e=Di(b,"padding"),b=Gi(b),a.pixelWidth=l.width-b.left-e.left-e.right-b.right,a.pixelHeight=l.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=l.width,a.pixelHeight=l.height)));return m}function $l(a,b){return(b&4&&li(a)?b^2:b)&-5};var bm,cm;cm=bm=!1;var dm=Xb;dm&&(-1!=dm.indexOf("Firefox")||-1!=dm.indexOf("Camino")||(-1!=dm.indexOf("iPhone")||-1!=dm.indexOf("iPod")?bm=!0:-1!=dm.indexOf("iPad")&&(cm=!0)));var em=bm,fm=cm;ol("goog-menuseparator",function(){return new Xl});function gm(a,b,c){aj.call(this,c);this.Va=b||Rl.qf();this.jb=a||Ul}k(gm,aj);var Tl="horizontal",Ul="vertical";f=gm.prototype;f.sz=null;f.fc=null;f.Va=null;f.jb=null;f.Md=!0;f.Yd=!0;f.Ey=!0;f.Gg=-1;f.Kd=null;f.rk=!1;f.gM=!1;f.AS=!0;f.Wj=null;f.td=function(){return this.sz||this.Va.td(this)};f.Eu=function(){return this.fc||(this.fc=new Al(this.td()))};f.ec=function(){return this.Va};f.C=function(){this.q=this.Va.C(this)};f.Qb=function(){return this.Va.Qb(this.b())};f.zg=function(a){return this.Va.zg(a)};
f.Of=function(a){this.q=this.Va.cc(this,a);"none"==a.style.display&&(this.Md=!1)};f.Pb=function(){gm.g.Pb.call(this);gj(this,function(a){a.Fa&&hm(this,a)},this);var a=this.b();this.Va.xp(this);this.Da(this.Md,!0);this.Rb().I(this,"enter",this.Zy).I(this,"highlight",this.$y).I(this,"unhighlight",this.az).I(this,"open",this.UP).I(this,"close",this.LP).I(a,"mousedown",this.bj).I(kh(a),"mouseup",this.NP).I(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.KP);this.lk()&&im(this,!0)};
function im(a,b){var c=a.Rb(),d=a.td();b?c.I(d,"focus",a.Bn).I(d,"blur",a.An).I(a.Eu(),"key",a.aj):c.gc(d,"focus",a.Bn).gc(d,"blur",a.An).gc(a.Eu(),"key",a.aj)}f.Id=function(){this.pj(-1);this.Kd&&this.Kd.cd(!1);this.rk=!1;gm.g.Id.call(this)};f.i=function(){gm.g.i.call(this);this.fc&&(this.fc.k(),this.fc=null);this.Va=this.Kd=this.Wj=this.sz=null};f.Zy=function(){return!0};
f.$y=function(a){var b=jj(this,a.target);if(-1<b&&b!=this.Gg){var c=jm(this);c&&c.xi(!1);this.Gg=b;c=jm(this);this.rk&&c.setActive(!0);this.AS&&this.Kd&&c!=this.Kd&&(yl(c,64)?c.cd(!0):this.Kd.cd(!1))}b=this.b();null!=a.target.b()&&Aj(b,"activedescendant",a.target.b().id)};f.az=function(a){a.target==jm(this)&&(this.Gg=-1);this.b().removeAttribute("aria-activedescendant")};f.UP=function(a){(a=a.target)&&a!=this.Kd&&a.getParent()==this&&(this.Kd&&this.Kd.cd(!1),this.Kd=a)};
f.LP=function(a){a.target==this.Kd&&(this.Kd=null)};f.bj=function(a){this.Yd&&(this.rk=!0);var b=this.td();b&&Nh(b)&&Oh(b)?b.focus():a.preventDefault()};f.NP=function(){this.rk=!1};f.KP=function(a){var b;a:{b=a.target;if(this.Wj)for(var c=this.b();b&&b!==c;){var d=b.id;if(d in this.Wj){b=this.Wj[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.bj(a);break;case "mouseup":b.li(a);break;case "mouseover":b.Dn(a);break;case "mouseout":b.Nu(a);break;case "contextmenu":b.Ar(a)}};
f.Bn=function(){};f.An=function(){this.pj(-1);this.rk=!1;this.Kd&&this.Kd.cd(!1)};f.aj=function(a){return this.isEnabled()&&this.mb()&&(0!=hj(this)||this.sz)&&this.ki(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.ki=function(a){var b=jm(this);if(b&&"function"==typeof b.aj&&b.aj(a)||this.Kd&&this.Kd!=b&&"function"==typeof this.Kd.aj&&this.Kd.aj(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.lk())this.td().blur();else return!1;break;case 36:km(this);break;case 35:lm(this);break;case 38:if(this.jb==Ul)mm(this);else return!1;break;case 37:if(this.jb==Tl)this.Ig()?nm(this):mm(this);else return!1;break;case 40:if(this.jb==Ul)nm(this);else return!1;break;case 39:if(this.jb==
Tl)this.Ig()?mm(this):nm(this);else return!1;break;default:return!1}return!0};function hm(a,b){var c=b.b(),c=c.id||(c.id=dj(b));a.Wj||(a.Wj={});a.Wj[c]=b}f.Rq=function(a,b){gm.g.Rq.call(this,a,b)};f.vx=function(a,b,c){a.Yn|=2;a.Yn|=64;!this.lk()&&this.gM||a.de(32,!1);a.vs(!1);gm.g.vx.call(this,a,b,c);a.Fa&&this.Fa&&hm(this,a);b<=this.Gg&&this.Gg++};
f.removeChild=function(a,b){if(a=ka(a)?fj(this,a):a){var c=jj(this,a);-1!=c&&(c==this.Gg?(a.xi(!1),this.Gg=-1):c<this.Gg&&this.Gg--);(c=a.b())&&c.id&&this.Wj&&xb(this.Wj,c.id)}a=gm.g.removeChild.call(this,a,b);a.vs(!0);return a};f.$c=function(){return this.jb};f.Bk=function(a){if(this.b())throw Error("Component already rendered");this.jb=a};f.mb=function(){return this.Md};
f.Da=function(a,b){if(b||this.Md!=a&&this.dispatchEvent(a?"show":"hide")){this.Md=a;var c=this.b();c&&(xi(c,a),this.lk()&&Sl(this.td(),this.Yd&&this.Md),b||this.dispatchEvent(this.Md?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Yd};
f.xd=function(a){this.Yd!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Yd=!0,gj(this,function(a){a.SJ?delete a.SJ:a.xd(!0)})):(gj(this,function(a){a.isEnabled()?a.xd(!1):a.SJ=!0}),this.rk=this.Yd=!1),this.lk()&&Sl(this.td(),a&&this.Md))};f.lk=function(){return this.Ey};f.bm=function(a){a!=this.Ey&&this.Fa&&im(this,a);this.Ey=a;this.Yd&&this.Md&&Sl(this.td(),a)};f.pj=function(a){(a=ij(this,a))?a.xi(!0):-1<this.Gg&&jm(this).xi(!1)};f.xi=function(a){this.pj(jj(this,a))};
function jm(a){return ij(a,a.Gg)}function km(a){om(a,function(a,c){return(a+1)%c},hj(a)-1)}function lm(a){om(a,function(a,c){a--;return 0>a?c-1:a},0)}function nm(a){om(a,function(a,c){return(a+1)%c},a.Gg)}function mm(a){om(a,function(a,c){a--;return 0>a?c-1:a},a.Gg)}function om(a,b,c){c=0>c?jj(a,a.Kd):c;var d=hj(a);c=b.call(a,c,d);for(var e=0;e<=d;){var g=ij(a,c);if(g&&a.mE(g)){a.pj(c);break}e++;c=b.call(a,c,d)}}f.mE=function(a){return a.mb()&&a.isEnabled()&&yl(a,2)};function pm(){}k(pm,rl);fa(pm);pm.prototype.oa=function(){return"goog-menuheader"};function qm(a,b,c){Gl.call(this,a,c||pm.qf(),b);this.de(1,!1);this.de(2,!1);this.de(4,!1);this.de(32,!1);this.fa=1}k(qm,Gl);ol("goog-menuheader",function(){return new qm(null)});function rm(a,b){gm.call(this,Ul,b||Yl.qf(),a);this.bm(!1)}k(rm,gm);f=rm.prototype;f.Ax=!0;f.hM=!1;f.oa=function(){return this.ec().oa()};f.dn=function(a){if(this.ec().dn(this,a))return!0;for(var b=0,c=hj(this);b<c;b++){var d=ij(this,b);if("function"==typeof d.dn&&d.dn(a))return!0}return!1};f.Ym=function(a){this.Rq(a,!0)};
f.XA=function(a,b){var c=this.mb();c||xi(this.b(),!0);var d=this.b(),e=a,g=b,l=ji(d);e instanceof Yg&&(g=e.y,e=e.x);ci(d,d.offsetLeft+(e-l.x),d.offsetTop+(g-l.y));c||xi(this.b(),!1)};f.Da=function(a,b,c){(b=rm.g.Da.call(this,a,b))&&a&&this.Fa&&this.Ax&&this.td().focus();this.YH=a&&c&&ma(c.clientX)?new Yg(c.clientX,c.clientY):null;return b};f.Zy=function(a){this.Ax&&this.td().focus();return rm.g.Zy.call(this,a)};f.mE=function(a){return(this.hM||a.isEnabled())&&a.mb()&&yl(a,2)};
f.Of=function(a){var b=this.ec(),c;c=this.da();c=nh(c.Sa,"div",b.oa()+"-content",a);for(var d=c.length,e=0;e<d;e++)Vl(b,this,c[e]);rm.g.Of.call(this,a)};f.ki=function(a){var b=rm.g.ki.call(this,a);b||gj(this,function(c){!b&&c.NO&&c.BH==a.keyCode&&(this.isEnabled()&&this.xi(c),b=c.aj(a))},this);return b};
f.pj=function(a){rm.g.pj.call(this,a);var b=ij(this,a);if(b){a=this.b();var b=b.b(),c=ji(b),d=ji(a),e=Gi(a),g=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,l=a.scrollTop,e=e+Math.min(g,Math.max(g-(a.clientWidth-b.offsetWidth),0)),l=l+Math.min(c,Math.max(c-d,0)),b=new Yg(e,l);a.scrollLeft=b.x;a.scrollTop=b.y}};function sm(){}sm.prototype.uf=function(){};function tm(a,b,c){this.element=a;this.ar=b;this.DS=c}k(tm,sm);tm.prototype.uf=function(a,b,c){Zl(this.element,this.ar,a,b,void 0,c,this.DS)};function um(a,b,c,d){tm.call(this,a,b);this.iv=c?5:0;this.AA=d||void 0}k(um,tm);um.prototype.zO=function(){return this.iv};um.prototype.uf=function(a,b,c,d){var e=Zl(this.element,this.ar,a,b,null,c,10,d,this.AA);if(e&496){var g=vm(e,this.ar);b=vm(e,b);e=Zl(this.element,g,a,b,null,c,10,d,this.AA);e&496&&(g=vm(e,g),b=vm(e,b),Zl(this.element,g,a,b,null,c,this.iv,d,this.AA))}};function vm(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function wm(a,b,c,d){um.call(this,a,b,c||d);if(c||d)this.iv=65|(d?32:132)}k(wm,um);function xm(){}k(xm,rl);fa(xm);f=xm.prototype;f.ii=function(){return"button"};f.xj=function(a,b,c){switch(b){case 8:case 16:Aj(a,"pressed",c);break;default:case 64:case 1:xm.g.xj.call(this,a,b,c)}};f.C=function(a){var b=xm.g.C.call(this,a);this.fm(b,a.gk());var c=a.ea();c&&this.aa(b,c);yl(a,16)&&this.xj(b,16,a.Tl());return b};f.cc=function(a,b){b=xm.g.cc.call(this,a,b);var c=this.ea(b);a.Bi=c;a.gw(this.gk(b));yl(a,16)&&this.xj(b,16,a.Tl());return b};f.ea=ea;f.aa=ea;f.gk=function(a){return a.title};
f.fm=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.$v=function(a,b){var c=a.Ig(),d=this.oa()+"-collapse-left",e=this.oa()+"-collapse-right";a.rn(c?e:d,!!(b&1));a.rn(c?d:e,!!(b&2))};f.oa=function(){return"goog-button"};function ym(){}k(ym,xm);fa(ym);f=ym.prototype;f.ii=function(){};f.C=function(a){a.vs(!1);a.Tq&=-256;a.de(32,!1);return a.da().C("button",{"class":this.wn(a).join(" "),disabled:!a.isEnabled(),title:a.gk()||"",value:a.ea()||""},a.Bu()||"")};f.zg=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.cc=function(a,b){a.vs(!1);a.Tq&=-256;a.de(32,!1);if(b.disabled){var c=this.sr(1);tj(b,c)}return ym.g.cc.call(this,a,b)};
f.xp=function(a){a.Rb().I(a.b(),"click",a.Pn)};f.ss=ea;f.Pp=ea;f.lk=function(a){return a.isEnabled()};f.bm=ea;f.dd=function(a,b,c){ym.g.dd.call(this,a,b,c);(a=a.b())&&1==b&&(a.disabled=c)};f.ea=function(a){return a.value};f.aa=function(a,b){a&&(a.value=b)};f.xj=ea;function zm(a,b,c){Gl.call(this,a,b||ym.qf(),c)}k(zm,Gl);f=zm.prototype;f.ea=function(){return this.Bi};f.aa=function(a){this.Bi=a;this.ec().aa(this.b(),a)};f.gk=function(){return this.Ts};f.fm=function(a){this.Ts=a;this.ec().fm(this.b(),a)};f.gw=function(a){this.Ts=a};f.$v=function(a){this.ec().$v(this,a)};f.i=function(){zm.g.i.call(this);delete this.Bi;delete this.Ts};f.Pb=function(){zm.g.Pb.call(this);if(yl(this,32)){var a=this.td();a&&this.Rb().I(a,"keyup",this.ki)}};
f.ki=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Pn(a):32==a.keyCode};ol("goog-button",function(){return new zm(null)});function Am(){}k(Am,xm);fa(Am);f=Am.prototype;f.C=function(a){var b={"class":"goog-inline-block "+this.wn(a).join(" ")},b=a.da().C("div",b,this.nu(a.Tf(),a.da()));this.fm(b,a.gk());ul(this,a,b);return b};f.ii=function(){return"button"};f.Qb=function(a){return a&&a.firstChild.firstChild};f.nu=function(a,b){return b.C("div","goog-inline-block "+(this.oa()+"-outer-box"),b.C("div","goog-inline-block "+(this.oa()+"-inner-box"),a))};f.zg=function(a){return"DIV"==a.tagName};
f.cc=function(a,b){Bm(b,!0);Bm(b,!1);var c;a:{c=a.da().VF(b);var d=this.oa()+"-outer-box";if(c&&sj(c,d)&&(c=a.da().VF(c),d=this.oa()+"-inner-box",c&&sj(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.nu(b.childNodes,a.da()));uj(b,["goog-inline-block",this.oa()]);return Am.g.cc.call(this,a,b)};f.oa=function(){return"goog-custom-button"};
function Bm(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==La(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Cm(){}k(Cm,Am);fa(Cm);f=Cm.prototype;f.Qb=function(a){return Cm.g.Qb.call(this,a&&a.firstChild)};f.cc=function(a,b){var c=mh("*","goog-menu",b)[0];if(c){xi(c,!1);kh(c).body.appendChild(c);var d=new rm;d.cc(c);Dm(a,d)}return Cm.g.cc.call(this,a,b)};f.nu=function(a,b){return Cm.g.nu.call(this,[this.createCaption(a,b),b.C("div","goog-inline-block "+(this.oa()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.C("div","goog-inline-block "+(this.oa()+"-caption"),a)};f.oa=function(){return"goog-menu-button"};function Em(a,b,c,d,e){zm.call(this,a,c||Cm.qf(),d);this.de(64,!0);this.ov=new wm(null,5);b&&Dm(this,b);this.SQ=null;this.ed=new Uf(500);!em&&!fm||uc("533.17.9")||(this.Zu=!0);this.TQ=e||Yl.qf()}k(Em,zm);f=Em.prototype;f.Zu=!1;f.hT=!1;f.Pb=function(){Em.g.Pb.call(this);Fm(this,!0);this.ka&&Gm(this,this.ka,!0);Aj(this.q,"haspopup",!!this.ka)};f.Id=function(){Em.g.Id.call(this);Fm(this,!1);if(this.ka){this.cd(!1);this.ka.Id();Gm(this,this.ka,!1);var a=this.ka.b();a&&S(a)}};
f.i=function(){Em.g.i.call(this);this.ka&&(this.ka.k(),delete this.ka);delete this.KS;this.ed.k()};f.bj=function(a){Em.g.bj.call(this,a);this.dj()&&(this.cd(!(this.fa&64),a),this.ka&&(this.ka.rk=!!(this.fa&64)))};f.li=function(a){Em.g.li.call(this,a);this.ka&&!this.dj()&&(this.ka.rk=!1)};f.Pn=function(){this.setActive(!1);return!0};f.MP=function(a){this.ka&&this.ka.mb()&&!this.dn(a.target)&&this.cd(!1)};f.dn=function(a){return a&&Hh(this.b(),a)||this.ka&&this.ka.dn(a)||!1};
f.ki=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.ka&&this.ka.mb()){var b=this.ka.aj(a);return 27==a.keyCode?(this.cd(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.cd(!0,a),!0):!1};f.RP=function(){this.cd(!1)};f.SP=function(){this.dj()||this.cd(!1)};f.An=function(a){this.Zu||this.cd(!1);Em.g.An.call(this,a)};f.Qy=function(){this.ka||Dm(this,new rm(this.da(),this.TQ));return this.ka||null};
function Dm(a,b){var c=a.ka;b!=c&&(c&&(a.cd(!1),a.Fa&&Gm(a,c,!1),delete a.ka),a.Fa&&Aj(a.q,"haspopup",!!b),b&&(a.ka=b,b.ws(a),b.Da(!1),c=a.Zu,(b.Ax=c)&&b.bm(!0),a.Fa&&Gm(a,b,!0)))}f.Ym=function(a){this.Qy().Rq(a,!0)};f.Da=function(a,b){var c=Em.g.Da.call(this,a,b);c&&!this.mb()&&this.cd(!1);return c};f.xd=function(a){Em.g.xd.call(this,a);this.isEnabled()||this.cd(!1)};f.$A=function(){this.cd(!0)};f.Br=function(){this.cd(!1)};
f.cd=function(a,b){Em.g.cd.call(this,a);if(this.ka&&!!(this.fa&64)==a){if(a){if(!this.ka.Fa)if(this.hT){var c=Fh(this.b());c?this.ka.mj(c.parentNode,c):this.ka.p(this.b().parentNode)}else this.ka.p();this.PJ=ii(this.b());this.kE=vi(this.b());Hm(this);this.ka.pj(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.ka.rk=!1;if(c=this.b())Aj(c,"activedescendant",""),Aj(c,"owns","");null!=this.Fv&&(this.Fv=void 0,(c=this.ka.b())&&qi(c,"",""))}this.ka.Da(a,!1,b);if(!this.ln){var c=this.Rb(),
d=a?c.I:c.gc;d.call(c,Uh(this.da()),"mousedown",this.MP,!0);this.Zu&&d.call(c,this.ka,"blur",this.SP);d.call(c,this.ed,Vf,this.fS);a?this.ed.start():this.ed.stop()}}};function Hm(a){if(a.ka.Fa){var b=a.ov;a.ov.element=a.KS||a.b();var c=a.ka.b();a.ka.mb()||(c.style.visibility="hidden",xi(c,!0));!a.Fv&&a.ov.zO&&a.ov.iv&32&&(a.Fv=ti(c));b.uf(c,b.ar^1,a.SQ,a.Fv);a.ka.mb()||(xi(c,!1),c.style.visibility="visible")}}
f.fS=function(){var a=vi(this.b()),b=ii(this.b()),c;c=this.kE;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.PJ,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.kE=a,this.PJ=b,Hm(this))};function Gm(a,b,c){var d=a.Rb();c=c?d.I:d.gc;c.call(d,b,"action",a.RP);c.call(d,b,"highlight",a.$y);c.call(d,b,"unhighlight",a.az)}function Fm(a,b){var c=a.Rb();(b?c.I:c.gc).call(c,a.b(),"keydown",a.PP)}
f.$y=function(a){var b=this.b();if(a=a.target.b()){var c=Bj(a,"activedescendant");a=kh(a).getElementById(c)||a;a.id||(c=$i.qf(),a.id=":"+(c.MH++).toString(36));c="";a&&(c=a.id);Aj(b,"activedescendant",c);Aj(b,"owns",a.id)}};f.PP=function(a){yl(this,32)&&this.td()&&this.ka&&this.ka.mb()&&a.stopPropagation()};f.az=function(){if(!jm(this.ka)){var a=this.b();Aj(a,"activedescendant","");Aj(a,"owns","")}};ol("goog-menu-button",function(){return new Em(null)});U.W=function(){U.S.call(this);this.be={};this.Hg=vh("div",{id:this.constructor.ID_PREFIX+"_Holder_"+r(),"class":U.W.CSS.GK});zh(this.b(),this.Hg);this.En=vh("img",{id:this.constructor.ID_PREFIX+"_Icon_"+r(),"class":U.W.CSS.Yb});zh(this.b(),this.En);this.ka=new rm;this.ne=new Nk;this.mf=[];Im(this);this.Br(void 0,0);this.ka.p(this.Hg);R(this.ka.b(),U.W.CSS.FK)};k(U.W,U.S);h("nrg.ui.SlideInMenu",U.W);U.W.ID_PREFIX="nrg.ui.SlideInMenu";
U.W.CSS_SUFFIX={Yb:"icon",fV:"icon-hovered",FK:"menu",GK:"menuholder",HK:"menuitem",tC:"menuitem-highlight",IK:"menuitem-icon"};U.W.zH={Fw:null,Dj:null,Yb:null};U.W.$B=450;U.W.NB=500;U.W.ww=700;U.W.PK=U.W.ww+800;U.W.PM=function(a,b,c,d){d=ca(d)?d:U.W.NB;return[new Ik(a,d),new Ck(a,b,c,d,Rk)]};U.W.QM=function(a,b,c,d){d=ca(d)?d:U.W.ww;return[new Hk(a,d),new Ck(a,b,c,d,Rk)]};f=U.W.prototype;f.bI=void 0;f.fr=void 0;f.Ip=!1;f.Cr=[-100,-100];f.Hs=[0,0];f.Iz=!0;f.Jz=!0;
f.FI=function(a,b){return this.Cr=[a,b]};f.XI=function(a,b){return this.Hs=[a,b]};f.tO=function(){return this.Cr};f.gP=function(){return this.Hs};f.Qy=function(){return this.ka};f.IO=function(){return this.Hg};f.JO=function(){return this.En};f.LI=function(a){this.En.src=a};f.zT=function(a,b){this.be[a].Yb.src=b};f.ZF=function(a){return rb(this.be).indexOf(a)};f.Uy=function(a){return rb(this.be)[a]};f.Ny=function(a){return this.be[rb(this.be)[a]]};f.tH=function(a){return this.Iz=a};
f.uH=function(a){return this.Jz=a};f.eP=function(){return this.fr};function Jm(a){null!=a.ne&&(a.ne.stop(),A(a.mf,function(a){this.ne.remove(a);a.k()}.bind(a)),Nb(a.mf))}function Km(a,b,c){Jm(a);A(ia(b)?b:[b],function(a){this.ne.add(a);this.mf.push(a)}.bind(a));a.Hg.style.visibility="visible";Yc(a.ne,"end",function(){c&&c()}.bind(a));a.ne.play()}f.hp=null;
function Lm(a){null!=a.hp&&(ba.clearTimeout(a.hp),a.hp=null);a.hp=Wf(function(){this.hp=null;this.Ip&&(!this.Sz&&this.Ip?this.Br():Lm(this))}.bind(a),U.W.$B)}f.pj=function(a){R(this.be[this.Uy(a)].Dj,U.W.CSS.tC);this.Iz&&(this.En.src=this.be[this.Uy(a)].Yb.src);this.Jz&&(this.b().title=this.Ny(a).Fw.Tf())};f.YE=function(){w(this.be,function(a){Vg(a.Dj,U.W.CSS.tC)}.bind(this))};
f.AD=function(a,b){a=ka(a)?[a]:a;b=b||[];b=ia(b)?b:[b];var c=null,d=null,e=null;A(a,function(a,l){if(this.be[a])throw Error(a+" is already in use!");c=new Ql(a);this.ka.Ym(c);d=c.Qb();R(d,U.W.CSS.HK);d.title=a;e=vh("img",{id:U.W.ID_PREFIX+"_MenuItemIcon_"+r(),"class":U.W.CSS.IK});e.src=l<=b.length-1?b[l]:null;zh(d,e);this.be[a]=zb(U.W.zH);this.be[a].Fw=c;this.be[a].Dj=d;this.be[a].Yb=e}.bind(this))};
f.zs=function(a,b){var c=a;if(ka(c)){if(!this.be[c])throw Error(c+" does not exist!");c=this.ZF(c)}this.bI=this.fr?this.fr:a;this.fr=a;ca(b)&&!b||this.YE();this.pj(c);this.dispatchEvent({type:"item_selected",index:c,title:this.Ny(c).Fw.Tf()})};f.$A=function(a,b){Km(this,U.W.PM(this.Hg,this.Cr,this.Hs,b),function(){this.Ip=!0;null!=a&&a()}.bind(this))};f.Br=function(a,b){Km(this,U.W.QM(this.Hg,this.Hs,this.Cr,b),function(){this.Ip=!1;this.Hg.style.visibility="hidden";ca(a)&&a()}.bind(this))};
function Im(a){C(a.b(),"click",function(){this.Ip?this.Br():this.$A()}.bind(a));C(a.ka,"action",function(a){this.zs(a.target.Tf())}.bind(a));C(a.Hg,"mouseover",function(){this.Sz=!0}.bind(a));C(a.Hg,"mouseout",function(){this.Sz=!1;Lm(this)}.bind(a))}
f.i=function(){U.W.g.i.call(this);delete this.Sz;delete this.hp;Jm(this);Nb(this.mf);delete this.mf;w(this.be,function(a,b){ad(a);S(a);delete this.be[b]}.bind(this));wb(this.be);delete this.be;S(this.Hg);delete this.Hg;S(this.En);delete this.En;ad(this.ka);this.ka.k();delete this.ka;U.py(this.ne);delete this.ne;delete this.bI;delete this.fr;delete this.Ip;delete this.Cr;delete this.Hs;delete this.Iz;delete this.Jz};h("nrg.ui.SlideInMenu.ID_PREFIX",U.W.ID_PREFIX);h("nrg.ui.SlideInMenu.EventType",{kV:"item_selected"});
h("nrg.ui.SlideInMenu.CSS_SUFFIX",U.W.CSS_SUFFIX);h("nrg.ui.SlideInMenu.menuItemCollection",U.W.zH);h("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",U.W.$B);h("nrg.ui.SlideInMenu.ANIM_LEN_IN",U.W.NB);h("nrg.ui.SlideInMenu.ANIM_LEN_OUT",U.W.ww);h("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",U.W.PK);h("nrg.ui.SlideInMenu.prototype.setHidePosition",U.W.prototype.FI);h("nrg.ui.SlideInMenu.prototype.setShowPosition",U.W.prototype.XI);h("nrg.ui.SlideInMenu.prototype.getHidePosition",U.W.prototype.tO);
h("nrg.ui.SlideInMenu.prototype.getShowPosition",U.W.prototype.gP);h("nrg.ui.SlideInMenu.prototype.getMenu",U.W.prototype.Qy);h("nrg.ui.SlideInMenu.prototype.getMenuHolder",U.W.prototype.IO);h("nrg.ui.SlideInMenu.prototype.getMenuIcon",U.W.prototype.JO);h("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",U.W.prototype.LI);h("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",U.W.prototype.zT);h("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",U.W.prototype.ZF);
h("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",U.W.prototype.Uy);h("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",U.W.prototype.Ny);h("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",U.W.prototype.tH);h("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",U.W.prototype.uH);h("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",U.W.prototype.eP);h("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",U.W.prototype.pj);h("nrg.ui.SlideInMenu.prototype.deselectAll",U.W.prototype.YE);
h("nrg.ui.SlideInMenu.prototype.addMenuItem",U.W.prototype.AD);h("nrg.ui.SlideInMenu.prototype.setSelected",U.W.prototype.zs);h("nrg.ui.SlideInMenu.prototype.showMenu",U.W.prototype.$A);h("nrg.ui.SlideInMenu.prototype.hideMenu",U.W.prototype.Br);h("nrg.ui.SlideInMenu.prototype.disposeInternal",U.W.prototype.i);V.a={};V.a.e={};V.a.e.K={};V.a.e.K.wc=function(){U.S.call(this)};k(V.a.e.K.wc,U.S);h("xiv.ui.layouts.interactors.InputController",V.a.e.K.wc);V.a.e.K.wc.ID_PREFIX="xiv.ui.layouts.interactors.InputController";V.a.e.K.wc.CSS_SUFFIX={wK:"inputbox",iV:"inputbox-hovered",WB:"display"};f=V.a.e.K.wc.prototype;f.fi=null;f.yb=null;f.mQ=!1;f.ea=function(){if(null!=this.yb)return this.yb.value};f.aa=function(a){null!=this.yb&&(this.yb.value=a,this.zj())};f.Te=function(a){null!=this.yb&&(this.yb.max=a,this.zj())};
f.$f=function(a){null!=this.yb&&(this.yb.min=a,this.zj())};f.zj=function(){};f.SH=function(a){this.yb.value=parseInt(a.target.value);this.dispatchEvent({type:"input",value:this.yb.value});this.zj()};
f.p=function(a){V.a.e.K.wc.g.p.call(this,a);this.fi=vh("div");this.b().appendChild(this.fi);R(this.fi,V.a.e.K.wc.CSS.WB);this.yb=vh("input");this.yb.type="number";this.yb.step=1;this.yb.min=0;this.yb.value=0;this.b().appendChild(this.yb);R(this.yb,V.a.e.K.wc.CSS.wK);C(this.yb,"mouseenter",function(a){a.stopPropagation();this.yb.style.opacity=1;this.fi.style.opacity=0}.bind(this));C(this.yb,"mouseleave",function(a){a.stopPropagation();this.yb.style.opacity=0;this.fi.style.opacity=1}.bind(this));C(this.yb,
"input",this.SH.bind(this));this.zj()};f.i=function(){V.a.e.K.wc.g.i.call(this);delete this.mQ;this.yb&&(ad(this.yb),S(this.yb),delete this.yb);this.fi&&(ad(this.fi),S(this.fi),delete this.fi)};h("xiv.ui.layouts.interactors.InputController.EventType",{hV:"input",WB:"display"});h("xiv.ui.layouts.interactors.InputController.ID_PREFIX",V.a.e.K.wc.ID_PREFIX);h("xiv.ui.layouts.interactors.InputController.CSS_SUFFIX",V.a.e.K.wc.CSS_SUFFIX);
h("xiv.ui.layouts.interactors.InputController.prototype.getValue",V.a.e.K.wc.prototype.ea);h("xiv.ui.layouts.interactors.InputController.prototype.setValue",V.a.e.K.wc.prototype.aa);h("xiv.ui.layouts.interactors.InputController.prototype.setMaximum",V.a.e.K.wc.prototype.Te);h("xiv.ui.layouts.interactors.InputController.prototype.setMinimum",V.a.e.K.wc.prototype.$f);h("xiv.ui.layouts.interactors.InputController.prototype.updateValue",V.a.e.K.wc.prototype.zj);
h("xiv.ui.layouts.interactors.InputController.prototype.onInput",V.a.e.K.wc.prototype.SH);h("xiv.ui.layouts.interactors.InputController.prototype.render",V.a.e.K.wc.prototype.p);h("xiv.ui.layouts.interactors.InputController.prototype.disposeInternal",V.a.e.K.wc.prototype.i);V.a.e.K.tm=function(){V.a.e.K.wc.call(this)};k(V.a.e.K.tm,V.a.e.K.wc);h("xiv.ui.layouts.interactors.FrameDisplay",V.a.e.K.tm);V.a.e.K.tm.ID_PREFIX="xiv.ui.layouts.interactors.FrameDisplay";V.a.e.K.tm.prototype.zj=function(){this.fi.innerHTML=this.yb.value+" / "+this.yb.max};h("xiv.ui.layouts.interactors.FrameDisplay.ID_PREFIX",V.a.e.K.tm.ID_PREFIX);h("xiv.ui.layouts.interactors.FrameDisplay.prototype.updateValue",V.a.e.K.tm.prototype.zj);function Mm(){}h("nrg.array",Mm);Mm.JH=function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,g,l;g=(l=a.charAt(c++)).charCodeAt(0);)g=46==g||48<=g&&57>=g,g!==e&&(b[++d]="",e=g),b[d]+=l;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var g=Number(d[x]),l=Number(e[x]);return g==d[x]&&l==e[x]?g-l:d[x]>e[x]?1:-1}return d.length-e.length};h("nrg.array.naturalCompare",Mm.JH);function Nm(a,b,c){this.Tg=this.Sg=this.Rg=0;3==arguments.length?(this.Rg=Number(a),this.Sg=Number(b),this.Tg=Number(c)):a instanceof Nm?(this.Rg=Number(a.x()),this.Sg=Number(a.y()),this.Tg=Number(a.z())):(this.Rg=Number(a[0]),this.Sg=Number(a[1]),this.Tg=Number(a[2]))}
Nm.prototype={clone:function(){return new Nm(this.Rg,this.Sg,this.Tg)},ul:function(a){return this.Rg*a.x()+this.Sg*a.y()+this.Tg*a.z()},kv:function(a,b){return Om(this,Pm(Qm(a,this),b))},length:function(){return Math.sqrt(this.ul(this))},jn:function(a){return new Nm(this.Sg*a.z()-this.Tg*a.y(),this.Tg*a.x()-this.Rg*a.z(),this.Rg*a.y()-this.Sg*a.x())},x:function(){return this.Rg},y:function(){return this.Sg},z:function(){return this.Tg}};
function Rm(a){var b=a.length();return new Nm(a.Rg/b,a.Sg/b,a.Tg/b)}function Pm(a,b){return new Nm(a.Rg*b,a.Sg*b,a.Tg*b)}function Qm(a,b){return new Nm(a.Rg-b.x(),a.Sg-b.y(),a.Tg-b.z())}function Om(a,b){return new Nm(a.Rg+b.x(),a.Sg+b.y(),a.Tg+b.z())}function Sm(a){return new Nm(-a.Rg,-a.Sg,-a.Tg)};function Tm(a,b){this.GA=new Nm(a);this.ze=new Nm(b)}Tm.prototype={clone:function(){return new Tm(this.GA.clone(),this.ze.clone())},vn:function(){this.ze=Sm(this.ze)},Mg:function(){return this.GA}};function Um(a,b){this.ze=a;this.ct=b}Um.prototype={clone:function(){return new Um(this.ze.clone(),this.ct)},vn:function(){this.ze=Sm(this.ze);this.ct=-this.ct}};function Vm(a,b){this.Ik=a;this.hw=b;var c=a[0].Mg(),d=a[1].Mg(),e=a[2].Mg(),d=Rm(Qm(d,c).jn(Qm(e,c)));this.Lg=new Um(d,d.ul(c))}Vm.prototype={clone:function(){var a=this.Ik.map(function(a){return a.clone()});return new Vm(a,this.hw)},vn:function(){this.Ik.reverse().map(function(a){a.vn()});this.Lg.vn()}};
function Wm(a,b,c,d,e,g){for(var l=0,m=[],q=0;q<a.Ik.length;q++){var p=b.ze.ul(a.Ik[q].Mg())-b.ct,p=-1E-5>p?2:1E-5<p?1:0,l=l|p;m.push(p)}switch(l){case 0:(0<b.ze.ul(a.Lg.ze)?c:d).push(a);break;case 1:e.push(a);break;case 2:g.push(a);break;case 3:c=[];d=[];for(q=0;q<a.Ik.length;q++){var t=(q+1)%a.Ik.length,p=m[q],s=m[t],l=a.Ik[q],t=a.Ik[t];2!=p&&c.push(l);1!=p&&d.push(2!=p?l.clone():l);3==(p|s)&&(p=(b.ct-b.ze.ul(l.Mg()))/b.ze.ul(Qm(t.Mg(),l.Mg())),p=new Tm(l.GA.kv(t.Mg(),p),l.ze.kv(t.ze,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new Vm(c,a.hw));3<=d.length&&g.push(new Vm(d,a.hw))}};function Xm(a){this.oe=this.Le=this.Lg=null;this.Cc=[];a&&Ym(this,a)}Xm.prototype={clone:function(){var a=new Xm;Zm(a,this.Lg&&this.Lg.clone());$m(a,this.Le&&this.Le.clone());an(a,this.oe&&this.oe.clone());a.ew(this.Cc.map(function(a){return a.clone()}));return a},uc:function(){for(var a=0;a<this.Cc.length;a++)this.Cc[a].vn();this.Lg.vn();this.Le&&this.Le.uc();this.oe&&this.oe.uc();a=this.Le;this.Le=this.oe;this.oe=a},back:function(){return this.oe},ew:function(a){this.Cc=a}};
function an(a,b){a.oe=b}function $m(a,b){a.Le=b}function Zm(a,b){a.Lg=b}function Ym(a,b){if(b.length){a.Lg||(a.Lg=b[0].Lg.clone());for(var c=[],d=[],e=0;e<b.length;e++)Wm(b[e],a.Lg,a.Cc,a.Cc,c,d);c.length&&(a.Le||(a.Le=new Xm),Ym(a.Le,c));d.length&&(a.oe||(a.oe=new Xm),Ym(a.oe,d))}}function bn(a){var b=a.Cc.slice();a.Le&&(b=b.concat(bn(a.Le)));a.oe&&(b=b.concat(bn(a.oe)));return b}function cn(a,b){a.Cc=dn(b,a.Cc);a.Le&&cn(a.Le,b);a.oe&&cn(a.oe,b)}
function dn(a,b){if(!a.Lg)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Wm(b[e],a.Lg,c,d,c,d);a.Le&&(c=dn(a.Le,c));d=a.oe?dn(a.oe,d):[];return c.concat(d)};function en(){this.Cc=[]}function fn(a){var b=new en;b.ew(a);return b}
en.prototype={clone:function(){var a=new en;a.ew(this.Cc.map(function(a){return a.clone()}));return a},yB:function(a){var b=new Xm(this.clone().Cc);a=new Xm(a.clone().Cc);cn(b,a);cn(a,b);a.uc();cn(a,b);a.uc();Ym(b,bn(a));return fn(bn(b))},Ld:function(a){var b=new Xm(this.clone().Cc);a=new Xm(a.clone().Cc);b.uc();cn(b,a);cn(a,b);a.uc();cn(a,b);a.uc();Ym(b,bn(a));b.uc();return fn(bn(b))},kz:function(a){var b=new Xm(this.clone().Cc);a=new Xm(a.clone().Cc);b.uc();cn(a,b);a.uc();cn(b,a);cn(a,b);Ym(b,bn(a));
b.uc();return fn(bn(b))},inverse:function(){var a=this.clone();a.Cc.map(function(a){a.vn()});return a},ew:function(a){this.Cc=a}};function gn(){}function hn(a){for(var b=a.J.count,c=[],d=0,d=0;d<b;d+=3){var e=a.J.get(d),g=a.J.get(d+1),l=a.J.get(d+2),m=a.ya.get(d),q=a.ya.get(d+1),p=a.ya.get(d+2),t=a.kb;a.Ud&&0<a.Ud.length&&(t=a.Ud.get(d));var s=[];s.push(new Tm(e,m));s.push(new Tm(g,q));s.push(new Tm(l,p));c.push(new Vm(s,t))}return fn(c)}
function jn(a,b){if(!(null!=b&&b instanceof en))throw Error("Invalid CSG object.");var c=new jd,d=[];Hb(b.Cc,function(a){var b=[],l=a.hw,b=Hb(a.Ik,function(a){a.color=l;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.ML=Hb(c.unique(),function(a){return[a.Mg().x(),a.Mg().y(),a.Mg().z()]});a.LL=Hb(c.unique(),function(a){return[a.ze.x(),a.ze.y(),a.ze.z()]});a.KL=Hb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.J=new id(9*d.length);
a.ya=new id(9*d.length);a.Ud=new id(9*d.length);Hb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.ML,q=this.LL,p=this.KL;this.J.add(d[b][0],d[b][1],d[b][2]);this.J.add(d[c][0],d[c][1],d[c][2]);this.J.add(d[a][0],d[a][1],d[a][2]);this.ya.add(q[b][0],q[b][1],q[b][2]);this.ya.add(q[c][0],q[c][1],q[c][2]);this.ya.add(q[a][0],q[a][1],q[a][2]);p[b]&&this.Ud.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Ud.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Ud.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Ud.pb&&(a.Ud=null);
a.lf=Zd}gn.prototype.yB=function(a){if(null==a||!(a instanceof en||a instanceof be))throw Error("Invalid object.");var b=a;a instanceof be&&(b=hn(b));a=new be;za(a,new gn);jn(a,hn(this).yB(b));return a};gn.prototype.Ld=function(a){if(null==a||!(a instanceof en||a instanceof be))throw Error("Invalid object.");var b=a;a instanceof be&&(b=hn(b));a=new be;za(a,new gn);jn(a,hn(this).Ld(b));return a};
gn.prototype.kz=function(a){if(null==a||!(a instanceof en||a instanceof be))throw Error("Invalid object.");var b=a;a instanceof be&&(b=hn(b));a=new be;za(a,new gn);jn(a,hn(this).kz(b));return a};gn.prototype.inverse=function(){var a=new be;za(a,new gn);jn(a,hn(this).inverse());return a};h("X.constructable",gn);h("X.constructable.prototype.intersect",gn.prototype.kz);h("X.constructable.prototype.inverse",gn.prototype.inverse);h("X.constructable.prototype.subtract",gn.prototype.Ld);
h("X.constructable.prototype.union",gn.prototype.yB);function kn(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new Nm(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));l.push(new Tm(Om(c,Pm(e,d)),e))}this.Cc=[];a=a||{};var c=new Nm(a.Si||[0,0,0]),d=a.vi||1,e=a.eb||16;a=a.RT||8;for(var g=[],l=[],m=0;m<e;m++)for(var q=0;q<a;q++)l=[],b(m/e,q/a),0<q&&b((m+1)/e,q/a),q<a-1&&b((m+1)/e,(q+1)/a),b(m/e,(q+1)/a),g.push(new Vm(l));return fn(g)}k(kn,en);function ln(){be.call(this);this.t="sphere";this.xb=[0,0,0];this.Rm=5;this.me=32;this.RL=16;za(this,new gn)}k(ln,be);ln.prototype.__defineGetter__("center",function(){return this.xb});ln.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center");this.xb=a});ln.prototype.__defineGetter__("radius",function(){return this.Rm});ln.prototype.__defineSetter__("radius",function(a){if(!ma(a))throw Error("Invalid radius.");this.Rm=a});
ln.prototype.Ba=function(){jn(this,new kn({Si:this.xb,vi:this.Rm,eb:this.me,RT:this.RL}));ln.g.Ba.call(this)};h("X.sphere",ln);h("X.sphere.prototype.modified",ln.prototype.Ba);function Ne(a){be.call(this);this.t="slice";this.xb=[0,0,0];this.Eo=[0,0,1];this.Yc=[0,1,0];this.St=[1,0,0];this.lb=this.Db=10;this.Po=[0,1,0,0,1,1,1,1,1,0,0,0];this.r=this.Pj=null;this.Ij=!0;this.Ao=[1,1,1];null!=a&&this.fn(a)}k(Ne,be);Ne.prototype.fn=function(a){this.xb=a.xb.slice();this.Eo=a.Eo.slice();this.Yc=a.Yc.slice();this.Db=a.Db;this.lb=a.lb;this.Pj=a.Pj;this.r=a.r;this.Ij=a.Ij;this.Ao=a.Ao;this.OL=a.OL;Ne.g.fn.call(this,a)};Ne.prototype.__defineSetter__("height",function(a){this.lb=a});
Ne.prototype.__defineSetter__("width",function(a){this.Db=a});Ne.prototype.create=function(){this.ah()};
Ne.prototype.ah=function(){var a=(new ud(this.Eo[0],this.Eo[1],this.Eo[2])).normalize(),b=new ud(this.Yc[0],this.Yc[1],this.Yc[2]),c=new ud(this.St[0],this.St[1],this.St[2]),d=new ud(this.xb[0],this.xb[1],this.xb[2]),e=xd(c.clone().uc().scale(this.Db/2),b.clone().uc().scale(this.lb/2)),g=new ud(e.x+d.x,e.y+d.y,e.z+d.z),e=xd(c.clone().uc().scale(this.Db/2),b.clone().scale(this.lb/2)),l=new ud(e.x+d.x,e.y+d.y,e.z+d.z),e=xd(c.clone().scale(this.Db/2),b.clone().uc().scale(this.lb/2)),m=new ud(e.x+d.x,
e.y+d.y,e.z+d.z),e=xd(c.clone().scale(this.Db/2),b.clone().scale(this.lb/2)),b=new ud(e.x+d.x,e.y+d.y,e.z+d.z);this.J=new id(18);this.ya=new id(18);this.J.add(g.x,g.y,g.z);this.J.add(l.x,l.y,l.z);this.J.add(m.x,m.y,m.z);this.J.add(m.x,m.y,m.z);this.J.add(b.x,b.y,b.z);this.J.add(l.x,l.y,l.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.ya.add(a.x,a.y,a.z);this.Ij&&(a=new be,a.J=new id(24),a.ya=new id(24),a.J.add(g.x,
g.y,g.z),a.J.add(l.x,l.y,l.z),a.J.add(l.x,l.y,l.z),a.J.add(b.x,b.y,b.z),a.J.add(b.x,b.y,b.z),a.J.add(m.x,m.y,m.z),a.J.add(m.x,m.y,m.z),a.J.add(g.x,g.y,g.z),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.ya.add(0,0,0),a.kb=[this.Ao[0],this.Ao[1],this.Ao[2]],a.lf="LINES",a.Jo=2,this.m.push(a))};h("X.slice",Ne);h("X.slice.prototype.create",Ne.prototype.create);function F(a){be.call(this);this.t="volume";this.xb=[0,0,0];this.ac=[10,10,10];this.Td=[1,1,1];this.Jq=[10,10,10];this.Nj=[1,1,1];this.Oh=[];this.Ho=this.Mj=this.Go=this.Lj=this.Fo=this.Kj=0;this.Lq=new be;this.Mq=new be;this.Nq=new be;this.Xt=this.xg=!1;this.zc=-1;this.Wt=[];this.r=null;this.Ij=!0;this.Kc=Infinity;this.Jc=-Infinity;this.mD=!0;this.Wc=0;this.ta=null;za(this,new ld);za(this,new $d);null!=a&&this.fn(a)}k(F,be);
F.prototype.fn=function(a){this.xb=a.xb.slice();this.ac=a.ac.slice();this.Nj=a.Nj.slice();this.Kj=a.Kj;this.Fo=a.Fo;this.Lj=a.Lj;this.Go=a.Go;this.Mj=a.Mj;this.Ho=a.Ho;this.WC=a.WC.slice();this.Lq=new be(a.Lq);this.Mq=new be(a.Mq);this.Nq=new be(a.Nq);this.Wc=a.Wc;this.ta=a.ta;this.xg=a.xg;this.Xt=a.Xt;this.zc=a.zc;this.r=a.r;this.Ij=a.Ij;F.g.fn.call(this,a)};
F.prototype.ah=function(a){this.m.length=0;this.Lq.m.length=0;this.Mq.m.length=0;this.Nq.m.length=0;this.m.push(this.Lq);this.m.push(this.Mq);this.m.push(this.Nq);this.ff=a.Em;this.Yw=a.Fm;this.Hj=a.Dm;this.zo=a.lg;this.HL=a.ng;this.Wc=a.max;this.ta=a.data;this.T=!0};
F.prototype.Ba=function(a){a="undefined"!==typeof a?a:!0;if(0<this.m.length){this.xg!=this.Xt&&(this.xg||-1==this.zc||(this.m[this.zc].visible=!1),this.T=!0,this.Xt=this.xg);if(!this.bc)return;for(var b=0,b=0;3>b;b++){var c=this.m[b],d=0,e=0;0==b?(d=this.Kj,e=this.Fo,this.Fo=this.Kj):1==b?(d=this.Lj,e=this.Go,this.Go=this.Lj):2==b&&(d=this.Mj,e=this.Ho,this.Ho=this.Mj);if(null==this.m[b].m[parseInt(d,10)]){var g=Cd();g[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*parseInt(d,10);g[1]=this.h[b].U[0][0][1]+
this.h[b].rb[1]*parseInt(d,10);g[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*parseInt(d,10);if(this.Sb){var l=Me(g,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.r.od,this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[parseInt(d,10)]=l;this.r.m[b].Ba(!0)}g=Me(g,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);this.Sb&&(g.r=g.Cb,g.r=this.r.m[b].m[parseInt(d,10)].Cb);c.m[parseInt(d,10)]=g;this.m[b].Ba(!0)}e=c.m[parseInt(e,10)];this.xg||(e.visible=!1);c=c.m[parseInt(d,10)];c.visible=!0;
c.ke=1;this.xg&&(c.m[0].bc=!1,b!=this.zc&&(c.visible=!1,c.ke=0))}this.xg&&-1!=this.zc&&mn(this,this.zc)}a&&F.g.Ba.call(this)};F.prototype.__defineGetter__("dimensions",function(){return this.ac});F.prototype.__defineSetter__("dimensions",function(a){this.ac=a});F.prototype.__defineGetter__("spacing",function(){return this.Nj});F.prototype.__defineSetter__("spacing",function(a){this.Nj=a});F.prototype.__defineGetter__("bbox",function(){return this.Td});F.prototype.__defineGetter__("range",function(){return this.Jq});
F.prototype.__defineGetter__("dimensionsRAS",function(){return this.WC});F.prototype.__defineGetter__("volumeRendering",function(){return this.xg});F.prototype.__defineSetter__("volumeRendering",function(a){this.xg=a;this.Ba(!1)});F.prototype.__defineGetter__("visible",function(){return this.bc});F.prototype.__defineSetter__("visible",function(a){if(a)this.bc=a,this.Ba(!1);else{for(var b=this.m,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.bc=a;this.T=!0}});
F.prototype.__defineGetter__("center",function(){return this.xb});F.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center.");this.xb=a});F.prototype.__defineGetter__("volumeRenderingCache",function(){return this.Wt});F.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&ia(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.Wt=a});F.prototype.__defineGetter__("image",function(){return this.Oh});
F.prototype.__defineGetter__("labelmap",function(){this.r||(this.r=new nn(this));return this.r});F.prototype.__defineGetter__("indexX",function(){return this.Kj});F.prototype.__defineSetter__("indexX",function(a){ma(a)&&0<=a&&a<this.Lq.m.length&&(this.Kj=a,this.Ba(!1))});F.prototype.__defineGetter__("indexY",function(){return this.Lj});F.prototype.__defineSetter__("indexY",function(a){ma(a)&&0<=a&&a<this.Mq.m.length&&(this.Lj=a,this.Ba(!1))});F.prototype.__defineGetter__("indexZ",function(){return this.Mj});
F.prototype.__defineSetter__("indexZ",function(a){ma(a)&&0<=a&&a<this.Nq.m.length&&(this.Mj=a,this.Ba(!1))});F.prototype.__defineGetter__("windowLow",function(){return this.Kc});F.prototype.__defineSetter__("windowLow",function(a){this.Kc=a});F.prototype.__defineGetter__("windowHigh",function(){return this.Jc});F.prototype.__defineSetter__("windowHigh",function(a){this.Jc=a});F.prototype.__defineGetter__("borders",function(){return this.Ij});
F.prototype.__defineSetter__("borders",function(a){this.Ij=a});F.prototype.__defineGetter__("reslicing",function(){return this.mD});F.prototype.__defineSetter__("reslicing",function(a){this.mD=a});F.prototype.__defineSetter__("xNormX",function(a){this.h[0].P[0]=a});F.prototype.__defineGetter__("xNormX",function(){return this.h[0].P[0]});F.prototype.__defineSetter__("xNormY",function(a){this.h[0].P[1]=a});F.prototype.__defineGetter__("xNormY",function(){return this.h[0].P[1]});
F.prototype.__defineSetter__("xNormZ",function(a){this.h[0].P[2]=a});F.prototype.__defineGetter__("xNormZ",function(){return this.h[0].P[2]});F.prototype.__defineSetter__("xColor",function(a){this.h[0].kb=a});F.prototype.__defineGetter__("xColor",function(){return this.h[0].kb});F.prototype.__defineSetter__("yNormX",function(a){this.h[1].P[0]=a});F.prototype.__defineGetter__("yNormX",function(){return this.h[1].P[0]});F.prototype.__defineSetter__("yNormY",function(a){this.h[1].P[1]=a});
F.prototype.__defineGetter__("yNormY",function(){return this.h[1].P[1]});F.prototype.__defineSetter__("yNormZ",function(a){this.h[1].P[2]=a});F.prototype.__defineGetter__("yNormZ",function(){return this.h[1].P[2]});F.prototype.__defineSetter__("yColor",function(a){this.h[1].kb=a});F.prototype.__defineGetter__("yColor",function(){return this.h[1].kb});F.prototype.__defineSetter__("zNormX",function(a){this.h[2].P[0]=a});F.prototype.__defineGetter__("zNormX",function(){return this.h[2].P[0]});
F.prototype.__defineSetter__("zNormY",function(a){this.h[2].P[1]=a});F.prototype.__defineGetter__("zNormY",function(){return this.h[2].P[1]});F.prototype.__defineSetter__("zNormZ",function(a){this.h[2].P[2]=a});F.prototype.__defineGetter__("zNormZ",function(){return this.h[2].P[2]});F.prototype.__defineSetter__("zColor",function(a){this.h[2].kb=a});F.prototype.__defineGetter__("zColor",function(){return this.h[2].kb});
F.prototype.KT=function(a){this.m[a].visible=!1;for(var b=0;b<this.m[a].m.length;b++)"undefined"!=typeof this.m[a].m[b]&&(this.Sb&&(this.r.m[a].m[b].remove(),this.r.m[a].m[b]=null),this.m[a].m[b].remove(),this.m[a].m[b]=null);Ed(this.h[a].P,this.h[a].P);Oe(a,this.h[a].Kq,this.h[a].P,this);this.m[a].m=[];this.m[a].m=Array(this.h[a].Aa);this.Sb&&(b=Me(this.h[a].Kq,this.h[a].jf,this.h[a].P,this.h[a].kb,this.Td,this.r.od,this.r,this.r.Sb,this.r.gf.If),this.r.m[a].m=[],this.r.m[a].m=Array(this.h[a].Aa),
this.r.m[a].m[Math.floor(this.h[a].Aa/2)]=b,this.r.m[a].Ba());b=Me(this.h[a].Kq,this.h[a].jf,this.h[a].P,this.h[a].kb,this.Td,this.od,this,!0,null);this.Sb&&(b.r=b.Cb,b.r=this.r.m[a].m[Math.floor(this.h[a].Aa/2)].Cb);this.m[a].m[Math.floor(this.h[a].Aa/2)]=b;0==a?(this.Kj=Math.floor(this.h[a].Aa/2),this.Fo=Math.floor(this.h[a].Aa/2)):1==a?(this.Lj=Math.floor(this.h[a].Aa/2),this.Go=Math.floor(this.h[a].Aa/2)):(this.Mj=Math.floor(this.h[a].Aa/2),this.Ho=Math.floor(this.h[a].Aa/2));this.m[a].Ba();this.m[a].m[Math.floor(this.h[a].Aa/
2)].bc=!0};
function mn(a,b){if(!a.Ht)if(!a.xg||!a.T&&b==a.zc)a.zc=b;else if(-1==a.Wt.indexOf(b))a.Wt.push(b),a.Ht=!0,on(a,b),setTimeout(function(){var a=null;0<=this.zc&&(a=this.m[this.zc],a.visible=!1);var a=this.m[b],c=a.m.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.m[e]){var p=Cd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var t=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.r.od,this.r,
this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=t;this.r.m[b].Ba(!0)}p=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}pn(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.m[e]){var p=Cd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var t=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.r.od,
this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=t;this.r.m[b].Ba(!0)}p=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}pn(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.m[e]){var p=Cd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var s=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,
this.r.od,this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=s;this.r.m[b].Ba(!0)}p=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}pn(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.m[e]){var p=Cd();p[0]=this.h[b].U[0][0][0]+this.h[b].rb[0]*e;p[1]=this.h[b].U[0][0][1]+this.h[b].rb[1]*e;p[2]=this.h[b].U[0][0][2]+this.h[b].rb[2]*e;if(this.Sb){var s=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,
this.Td,this.r.od,this.r,this.r.Sb,this.r.gf.If);this.r.m[b].m[e]=s;this.r.m[b].Ba(!0)}p=Me(p,this.h[b].jf,this.h[b].P,this.h[b].kb,this.Td,this.od,this,!0,null);p.m[0].bc=!1;this.Sb&&(p.r=p.Cb,p.r=this.r.m[b].m[e].Cb);a.m[e]=p}a.m[e].bc=!0}pn(this,1);setTimeout(function(){this.Ht&&this.m[b].Ba(!0);this.zc=b;this.T=!1;if(this.Ht){var a=new Ge;a.qb=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Ht=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.m[a.zc];
c.visible=!1;var c=a.m[b],d=c.m.length,e;for(e=0;e<d;e++)c.m[e].bc=!0;a.zc=b;a.T=!1}}function on(a,b){var c=new Ee;c.qb=a;a.dispatchEvent(c);a.onComputing(b)}function pn(a,b){var c=new Fe;c.Vm=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}F.prototype.eA=function(){};F.prototype.gA=function(){};F.prototype.fA=function(){};h("X.volume",F);h("X.volume.prototype.modified",F.prototype.Ba);h("X.volume.prototype.sliceInfoChanged",F.prototype.KT);h("X.volume.prototype.onComputing",F.prototype.eA);
h("X.volume.prototype.onComputingProgress",F.prototype.gA);h("X.volume.prototype.onComputingEnd",F.prototype.fA);function qn(a,b){fd.call(this);this.q=a;var c=Gh(this.q)?this.q:this.q?this.q.body:null;this.zQ=!!c&&li(c);this.jH=C(this.q,mc?"DOMMouseScroll":"mousewheel",this,b)}k(qn,fd);
qn.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Zd;if("mousewheel"==a.type){c=1;if(lc||nc&&(hc||uc("532.0")))c=40;d=rn(-a.wheelDelta,c);ca(a.wheelDeltaX)?(b=rn(-a.wheelDeltaX,c),c=rn(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ca(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;ma(this.vH)&&(b=nd(b,-this.vH,this.vH));ma(this.wH)&&(c=nd(c,-this.wH,this.wH));this.zQ&&(b=-b);b=new sn(d,a,b,c);this.dispatchEvent(b)};function rn(a,b){return nc&&(gc||ic)&&0!=a%b?a:a/b}
qn.prototype.i=function(){qn.g.i.call(this);$c(this.jH);this.jH=null};function sn(a,b,c,d){Lc.call(this,b);this.type="mousewheel";this.detail=a;this.$j=c;this.pf=d}k(sn,Lc);function tn(){fd.call(this)}k(tn,fd);f=tn.prototype;f.Bi=0;f.pi=0;f.ph=100;f.Cg=0;f.Dk=1;f.Vf=!1;f.Ln=!1;f.aa=function(a){a=un(this,a);this.Bi!=a&&(this.Bi=a+this.Cg>this.ph?this.ph-this.Cg:a<this.pi?this.pi:a,this.Vf||this.Ln||this.dispatchEvent("change"))};f.ea=function(){return un(this,this.Bi)};f.am=function(a){a=un(this,a);this.Cg!=a&&(this.Cg=0>a?0:this.Bi+a>this.ph?this.ph-this.Bi:a,this.Vf||this.Ln||this.dispatchEvent("change"))};
f.fh=function(){var a=this.Cg;return null==this.Dk?a:Math.round(a/this.Dk)*this.Dk};f.$f=function(a){if(this.pi!=a){var b=this.Vf;this.Vf=!0;this.pi=a;a+this.Cg>this.ph&&(this.Cg=this.ph-this.pi);a>this.Bi&&this.aa(a);a>this.ph&&(this.Cg=0,this.Te(a),this.aa(a));(this.Vf=b)||this.Ln||this.dispatchEvent("change")}};f.bb=function(){return un(this,this.pi)};
f.Te=function(a){a=un(this,a);if(this.ph!=a){var b=this.Vf;this.Vf=!0;this.ph=a;a<this.Bi+this.Cg&&this.aa(a-this.Cg);a<this.pi&&(this.Cg=0,this.$f(a),this.aa(this.ph));a<this.pi+this.Cg&&(this.Cg=this.ph-this.pi);(this.Vf=b)||this.Ln||this.dispatchEvent("change")}};f.La=function(){return un(this,this.ph)};f.fk=function(){return this.Dk};f.qj=function(a){this.Dk!=a&&(this.Dk=a,a=this.Vf,this.Vf=!0,this.Te(this.La()),this.am(this.fh()),this.aa(this.ea()),(this.Vf=a)||this.Ln||this.dispatchEvent("change"))};
function un(a,b){return null==a.Dk?b:a.pi+Math.round((b-a.pi)/a.Dk)*a.Dk};function vn(a,b){aj.call(this,a);this.UD=null;this.nb=new tn;this.BQ=b||md;C(this.nb,"change",this.FG,!1,this)}k(vn,aj);f=vn.prototype;f.jb="horizontal";f.Kr=!1;f.WQ=!1;f.Ri=10;f.pv=0;f.aH=!0;f.sv=0;f.QK=1E3;f.Yd=!0;f.Eg=!1;f.C=function(){vn.g.C.call(this);var a=this.da().C("div",this.oa(this.jb));this.Of(a)};f.Of=function(a){vn.g.Of.call(this,a);tj(a,this.oa(this.jb));this.NE();zj(this.b(),"slider");wn(this)};
f.Pb=function(){vn.g.Pb.call(this);this.gg=new Li(this.Qa);this.gi=new Li(this.Jd);this.gg.yl(this.Eg);this.gi.yl(this.Eg);this.gg.ly=this.gi.ly=ea;this.fc=new Al(this.b());xn(this,!0);this.b().tabIndex=0;this.yj()};
function xn(a,b){b?(a.Rb().I(a.gg,"beforedrag",a.Ku).I(a.gi,"beforedrag",a.Ku).I(a.gg,["start","end"],a.Pu).I(a.gi,["start","end"],a.Pu).I(a.fc,"key",a.Lu).I(a.b(),"click",a.Mu).I(a.b(),"mousedown",a.Mu),a.aH&&yn(a,!0)):(a.Rb().gc(a.gg,"beforedrag",a.Ku).gc(a.gi,"beforedrag",a.Ku).gc(a.gg,["start","end"],a.Pu).gc(a.gi,["start","end"],a.Pu).gc(a.fc,"key",a.Lu).gc(a.b(),"click",a.Mu).gc(a.b(),"mousedown",a.Mu),a.aH&&yn(a,!1))}f.Id=function(){vn.g.Id.call(this);Hc(this.gg,this.gi,this.fc,this.Kn)};
f.Ku=function(a){var b=a.ty==this.gg?this.Qa:this.Jd,c;"vertical"==this.jb?(c=this.b().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.La()-this.bb())+this.bb()):c=a.left/(this.b().clientWidth-b.offsetWidth)*(this.La()-this.bb())+this.bb();c=a.ty==this.gg?Math.min(Math.max(c,this.bb()),this.ea()+this.fh()):Math.min(Math.max(c,this.ea()),this.La());zn(this,b,c)};
f.Pu=function(a){var b="start"==a.type;xj(this.b(),"goog-slider-dragging",b);xj(a.target.handle,"goog-slider-thumb-dragging",b);a=a.ty==this.gg;b?(this.dispatchEvent("k"),this.dispatchEvent(a?"g":"i")):(this.dispatchEvent("l"),this.dispatchEvent(a?"h":"j"))};
f.Lu=function(a){var b=!0;switch(a.keyCode){case 36:An(this,this.bb());break;case 35:An(this,this.La());break;case 33:Bn(this,this.Ri);break;case 34:Bn(this,-this.Ri);break;case 37:var c=this.Eg&&this.Ig()?1:-1;Bn(this,a.shiftKey?c*this.Ri:c*this.Xs);break;case 40:Bn(this,a.shiftKey?-this.Ri:-this.Xs);break;case 39:c=this.Eg&&this.Ig()?-1:1;Bn(this,a.shiftKey?c*this.Ri:c*this.Xs);break;case 38:Bn(this,a.shiftKey?this.Ri:this.Xs);break;default:b=!1}b&&a.preventDefault()};
f.Mu=function(a){this.b().focus&&this.b().focus();var b=a.target;Hh(this.Qa,b)||Hh(this.Jd,b)||(b="click"==a.type,b&&ya()<this.sv+this.QK||(b||(this.sv=ya()),this.WQ?An(this,Cn(this,a)):(this.mB(a),this.Bh=Dn(this,Cn(this,a)),this.TG="vertical"==this.jb?this.hv<this.Bh.offsetTop:this.hv>En(this,this.Bh)+this.Bh.offsetWidth,a=kh(this.b()),this.Rb().I(a,"mouseup",this.lB,!0).I(this.b(),"mousemove",this.mB),this.Ql||(this.Ql=new Uf(200),this.Rb().I(this.Ql,Vf,this.GG)),this.GG(),this.Ql.start())))};
f.EG=function(a){Bn(this,(0<a.detail?-1:1)*this.Xs);a.preventDefault()};f.GG=function(){var a;if("vertical"==this.jb){var b=this.hv,c=this.Bh.offsetTop;this.TG?b<c&&(a=Fn(this,this.Bh)+this.Ri):b>c+this.Bh.offsetHeight&&(a=Fn(this,this.Bh)-this.Ri)}else b=this.hv,c=En(this,this.Bh),this.TG?b>c+this.Bh.offsetWidth&&(a=Fn(this,this.Bh)+this.Ri):b<c&&(a=Fn(this,this.Bh)-this.Ri);ca(a)&&zn(this,this.Bh,a)};
f.lB=function(){this.Ql&&this.Ql.stop();var a=kh(this.b());this.Rb().gc(a,"mouseup",this.lB,!0).gc(this.b(),"mousemove",this.mB)};function Gn(a,b){var c=mi(b,a.b());return"vertical"==a.jb?c.y:a.Eg&&a.Ig()?a.b().clientWidth-c.x:c.x}f.mB=function(a){this.hv=Gn(this,a)};function Cn(a,b){var c=a.bb(),d=a.La();if("vertical"==a.jb){var e=a.Qa.offsetHeight,g=a.b().clientHeight-e,e=Gn(a,b)-e/2;return(d-c)*(g-e)/g+c}e=a.Qa.offsetWidth;g=a.b().clientWidth-e;e=Gn(a,b)-e/2;return(d-c)*e/g+c}
function Fn(a,b){if(b==a.Qa)return a.nb.ea();if(b==a.Jd)return a.nb.ea()+a.nb.fh();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.ni=function(){return this.gg.ni()||this.gi.ni()};function Bn(a,b){Math.abs(b)<a.fk()&&(b=(0==b?0:0>b?-1:1)*a.fk());var c=Fn(a,a.Qa)+b,d=Fn(a,a.Jd)+b,c=nd(c,a.bb(),a.La()-a.pv),d=nd(d,a.bb()+a.pv,a.La());Hn(a,c,d-c)}
function zn(a,b,c){var d=un(a.nb,c);c=b==a.Qa?d:a.nb.ea();b=b==a.Jd?d:a.nb.ea()+a.nb.fh();c>=a.bb()&&b>=c+a.pv&&a.La()>=b&&Hn(a,c,b-c)}function Hn(a,b,c){a.bb()<=b&&b<=a.La()-c&&a.pv<=c&&c<=a.La()-b&&(b!=a.ea()||c!=a.fh())&&(a.nb.Ln=!0,a.nb.am(0),a.nb.aa(b),a.nb.am(c),a.nb.Ln=!1,a.FG())}f.bb=function(){return this.nb.bb()};f.$f=function(a){this.nb.$f(a)};f.La=function(){return this.nb.La()};f.Te=function(a){this.nb.Te(a)};function Dn(a,b){return b<=a.nb.ea()+a.nb.fh()/2?a.Qa:a.Jd}
f.FG=function(){this.yj();wn(this);this.dispatchEvent("change")};
f.yj=function(){if(this.Qa&&!this.Kr){var a=In(this,Fn(this,this.Qa)),b=In(this,Fn(this,this.Jd));if("vertical"==this.jb)this.Qa.style.top=a.y+"px",this.Jd.style.top=b.y+"px",this.Qc&&(a=Jn(b.y,a.y,this.Qa.offsetHeight),this.Qc.style.top=a.offset+"px",this.Qc.style.height=a.size+"px");else{var c=this.Eg&&this.Ig()?"right":"left";this.Qa.style[c]=a.x+"px";this.Jd.style[c]=b.x+"px";this.Qc&&(a=Jn(a.x,b.x,this.Qa.offsetWidth),this.Qc.style[c]=a.offset+"px",this.Qc.style.width=a.size+"px")}}};
function Jn(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function In(a,b){var c=new Yg;if(a.Qa){var d=a.bb(),e=a.La(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.jb?(d=a.b().clientHeight-a.Qa.offsetHeight,e=Math.round(e*d),c.x=En(a,a.Qa),c.y=d-e):(d=Math.round(e*(a.b().clientWidth-a.Qa.offsetWidth)),c.x=d,c.y=a.Qa.offsetTop)}return c}
function An(a,b){b=nd(b,a.bb(),a.La());a.Kr&&a.ru.stop(!0);var c=new Nk,d,e=Dn(a,b),g=a.ea(),l=a.fh(),m=Fn(a,e),q=In(a,m);d=a.fk();Math.abs(b-m)<d&&(b=nd(m+(b>m?d:-d),a.bb(),a.La()));zn(a,e,b);m=In(a,Fn(a,e));d="vertical"==a.jb?[En(a,e),m.y]:[m.x,e.offsetTop];q=new Ck(e,[q.x,q.y],d,100);q.yl(a.Eg);c.add(q);a.Qc&&Kn(a,e,g,l,m,c);a.UD&&(e=a.UD.UX(g,b,100),A(e,function(a){c.add(a)}));a.ru=c;a.Rb().I(c,"end",a.wN);a.Kr=!0;c.play(!1)}f.sf=function(){return this.Kr};
function Kn(a,b,c,d,e,g){var l=In(a,c),m=In(a,c+d);c=l;d=m;b==a.Qa?c=e:d=e;"vertical"==a.jb?(b=Jn(m.y,l.y,a.Qa.offsetHeight),l=Jn(d.y,c.y,a.Qa.offsetHeight),e=new Ck(a.Qc,[En(a,a.Qc),b.offset],[En(a,a.Qc),l.offset],100),b=new Fk(a.Qc,b.size,l.size,100)):(b=Jn(l.x,m.x,a.Qa.offsetWidth),l=Jn(c.x,d.x,a.Qa.offsetWidth),e=new Ck(a.Qc,[b.offset,a.Qc.offsetTop],[l.offset,a.Qc.offsetTop],100),b=new Ek(a.Qc,b.size,l.size,100));e.yl(a.Eg);b.yl(a.Eg);g.add(e);g.add(b)}f.wN=function(){this.Kr=!1};
f.Bk=function(a){if(this.jb!=a){var b=this.oa(this.jb),c=this.oa(a);this.jb=a;this.b()&&(a=this.b(),sj(a,b)&&(vj(a,b),tj(a,c)),b=this.Eg&&this.Ig()?"right":"left",this.Qa.style[b]=this.Qa.style.top="",this.Jd.style[b]=this.Jd.style.top="",this.Qc&&(this.Qc.style[b]=this.Qc.style.top="",this.Qc.style.width=this.Qc.style.height=""),this.yj())}};f.$c=function(){return this.jb};
f.i=function(){vn.g.i.call(this);this.Ql&&this.Ql.k();delete this.Ql;this.ru&&this.ru.k();delete this.ru;delete this.Qa;delete this.Jd;this.Qc&&delete this.Qc;this.nb.k();delete this.nb;this.fc&&(this.fc.k(),delete this.fc);this.Kn&&(this.Kn.k(),delete this.Kn);this.gg&&(this.gg.k(),delete this.gg);this.gi&&(this.gi.k(),delete this.gi)};f.Xs=1;f.fk=function(){return this.nb.fk()};f.qj=function(a){this.nb.qj(a)};f.ea=function(){return this.nb.ea()};f.aa=function(a){zn(this,this.Qa,a)};f.fh=function(){return this.nb.fh()};
f.am=function(a){zn(this,this.Jd,this.nb.ea()+a)};f.Da=function(a){xi(this.b(),a);a&&this.yj()};function wn(a){var b=a.b();b&&(Aj(b,"valuemin",a.bb()),Aj(b,"valuemax",a.La()),Aj(b,"valuenow",a.ea()),Aj(b,"valuetext",a.BQ(a.ea())||""))}function yn(a,b){b?(a.Kn||(a.Kn=new qn(a.b())),a.Rb().I(a.Kn,"mousewheel",a.EG)):a.Rb().gc(a.Kn,"mousewheel",a.EG)}f.xd=function(a){this.Yd!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Yd=a,xn(this,a),a||this.lB(),xj(this.b(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Yd};function En(a,b){return a.Eg?Ki(b):b.offsetLeft};function Ln(a){vn.call(this,a);this.nb.aa(this.bb());this.nb.am(this.La()-this.bb())}k(Ln,vn);Ln.prototype.oa=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};Ln.prototype.gn=function(a){a=this.da().C("div",a);zj(a,"button");return a};
Ln.prototype.NE=function(){var a=mh(null,"goog-twothumbslider-value-thumb",this.b())[0],b=mh(null,"goog-twothumbslider-extent-thumb",this.b())[0],c=mh(null,"goog-twothumbslider-rangehighlight",this.b())[0];a||(a=this.gn("goog-twothumbslider-value-thumb"),this.b().appendChild(a));b||(b=this.gn("goog-twothumbslider-extent-thumb"),this.b().appendChild(b));c||(c=this.da().C("div","goog-twothumbslider-rangehighlight"),this.da().jz(c,a));this.Qa=a;this.Jd=b;this.Qc=c};function Mn(){be.call(this);this.t="fibers";za(this,new ld)}k(Mn,be);h("X.fibers",Mn);U.A=function(){this.Tn=vh("div",{id:this.constructor.ID_PREFIX+"_"+r(),"class":this.constructor.gd});U.ib.call(this,"",this.Tn,!0);R(this.Lc,U.A.CSS.eL);this.Lc.style.marginTop="0px"};k(U.A,U.ib);h("nrg.ui.ZippyTree",U.A);U.A.Dw=5;U.A.ID_PREFIX="nrg.ui.ZippyTree";U.A.CSS_SUFFIX={eL:"rootnode"};U.A.aC=300;U.A.Iw="_nodeDepth";U.A.nt="_maxDepth";f=U.A.prototype;f.In=1;f.Bl=!1;f.uQ=!0;f.Ir=1;f.xy=0;f.Uv=null;f.Fh=null;f.RA=function(a){this.UE=a};f.Mr=function(){return 0===Ch(this.Yo).length};
f.yE=function(){this.Us(function(a){a.Hf.bd(!1)},this)};f.$q=function(){this.yE()};f.UN=function(){var a=[];this.Us(function(b){a.push(b)},this);return a};f.qG=function(){var a=[];w(this.Af,function(b){a.push(b)});return a};f.sn=function(){this.Us(function(a){a.Hf.bd(!0)},this)};f.Us=function(a,b){w(b.Af,function(b){a(b);this.Us(a,b)}.bind(this))};f.b=function(){return this.Tn};f.bd=function(a,b){b=null!=b?b:this;if(null!=b.Af[a]){var c=b.Af[a];c.Hf.bd(!0);return c}};
f.$v=function(a,b){b=null!=b?b:this;if(null!=b.Af[a]){var c=b.Af[a];c.Hf.bd(!1);return c}};f.Ly=function(a){var b=this,c=[];A(a,function(a){c.push(b.Af[a]);b=b.Af[a]}.bind(this));return c};f.Yg=function(a,b){!ia(a)||Gh(a)?Nn(this,a,b):A(a,function(a){this.Yg(a,b)}.bind(this))};function Nn(a,b,c){c?(c&&(c=ka(c)?[c]:c,c.length>a.In&&(a.In=c.length)),a.br(c,a,b)):zh(a.Tn,b)}
f.br=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.Yo;if(0==a.length)On(this,e,c),null!=c&&Pn(this,c,d-2);else{0<a.length&&a.length>this.In&&(this.In=a.length);if(b.Af[a[0]])e=b.Af[a[0]];else{var g=a[0];e.style.opacity=this.Ir;var l=new U.ib(g,e,!1);b.Lc.parentNode==this.Tn&&2==this.Tn.childNodes.length&&(l.Lc.style.marginTop="0px");l.Lc.style.left="inherit";l.Lc.style.width="inherit";Qn(this,l);b.Af[g]=l;l.Lc.style.opacity=this.Ir;e.style.opacity=1;this.Bl&&Rn(this,l.Lc);this.dispatchEvent({type:"n",
Yf:l});e=l}Pn(this,e.Lc,d-1);this.br(1<a.length?a.slice(1):[],e,c,d+1)}};function Pn(a,b,c){b[U.A.nt]!=a.In&&(null==b[U.A.nt]&&(b[U.A.nt]=a.In),c=0>c?0:c,null!=b[U.A.Iw]||(b[U.A.Iw]=c),b.style.width=(100-c*U.A.Dw).toString()+"%",b.style.left=(c*U.A.Dw).toString()+"%")}function Qn(a,b){C(b,"d",function(){this.dispatchEvent({type:"d",Yf:b})}.bind(a));C(b,"f",function(){this.dispatchEvent({type:"f",Yf:b})}.bind(a));C(b,"e",function(){this.dispatchEvent({type:"e",Yf:b})}.bind(a))}
function Rn(a,b){(new Ik(b,a.xy)).play()}f.IS=function(){this.Bl&&1!=this.Fh.fa&&this.Fh.play()};f.iU=function(a){this.Ir=(this.Bl=!0===a)?0:1;this.xy=this.Bl?U.A.aC:0;this.Bl&&(Sn(this),this.Uv=[],this.Fh=new Nk,C(this.Fh,"end",this.wE.bind(this)))};
U.A.SN=function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Ch(a),d=b[U.ib.rt].toLowerCase(),e,g,l=c.length,m=0;m<l;m++){if(g=c[m],null!=g[U.ib.rt]&&(e=g[U.ib.rt].toLowerCase(),e=Na(d,e),0>e)){Bh(b,g);return}}else window.console.log("FOLDER SORTER",a,b);a.appendChild(b)};
function On(a,b,c){c&&(Qk.zb(c,{position:"relative"}),c.style.opacity=a.Ir,null!=a.UE?a.UE(b,c):b.appendChild(c),Tn(b),a.Bl?Rn(a,c,function(){this.dispatchEvent({type:"m"})}.bind(a)):a.dispatchEvent({type:"m"}))}function Tn(a){var b=[],c=[],d=Ch(a),e=d.length;A(d,function(a){sj(a,U.ib.CSS.jt)?b.push(a):1==a.childNodes.length&&sj(a.childNodes[0],U.ib.CSS.Dj)&&c.push(a)});A(b,function(b,d){a.insertBefore(b,a.childNodes[e]||null);a.insertBefore(c[d],a.childNodes[e+1]||null)})}
U.A.prototype.wE=function(){for(this.Fh.k();this.Uv.length;)this.Fh.add(this.Uv[0]),Eb.splice.call(this.Uv,0,1);C(this.Fh,"end",this.wE.bind(this));this.Fh.play()};function Sn(a){null!=a.yI&&(U.gF(a.yI),delete a.yI);null!=a.Fh&&(U.py(a.Fh),delete a.Fh)}U.A.prototype.i=function(){U.A.g.i.call(this);S(this.Tn);this.Tn;Sn(this);delete this.In;delete this.Bl;delete this.uQ;delete this.Ir;delete this.xy};h("nrg.ui.ZippyTree.EventType",{QU:"m",UK:"n"});h("nrg.ui.ZippyTree.INDENT_PCT",U.A.Dw);
h("nrg.ui.ZippyTree.ID_PREFIX",U.A.ID_PREFIX);h("nrg.ui.ZippyTree.CSS_SUFFIX",U.A.CSS_SUFFIX);h("nrg.ui.ZippyTree.FADE_TIME",U.A.aC);h("nrg.ui.ZippyTree.NODE_DEPTH_KEY",U.A.Iw);h("nrg.ui.ZippyTree.MAX_DEPTH_KEY",U.A.nt);h("nrg.ui.ZippyTree.folderSorter",U.A.SN);h("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",U.A.prototype.RA);h("nrg.ui.ZippyTree.prototype.isEmpty",U.A.prototype.Mr);h("nrg.ui.ZippyTree.prototype.contractAll",U.A.prototype.yE);h("nrg.ui.ZippyTree.prototype.collapseAll",U.A.prototype.$q);
h("nrg.ui.ZippyTree.prototype.getAllNodes",U.A.prototype.UN);h("nrg.ui.ZippyTree.prototype.getTopLevelNodes",U.A.prototype.qG);h("nrg.ui.ZippyTree.prototype.expandAll",U.A.prototype.sn);h("nrg.ui.ZippyTree.prototype.traverse",U.A.prototype.Us);h("nrg.ui.ZippyTree.prototype.getElement",U.A.prototype.b);h("nrg.ui.ZippyTree.prototype.setExpanded",U.A.prototype.bd);h("nrg.ui.ZippyTree.prototype.setCollapsed",U.A.prototype.$v);h("nrg.ui.ZippyTree.prototype.getFolderNodes",U.A.prototype.Ly);
h("nrg.ui.ZippyTree.prototype.addContents",U.A.prototype.Yg);h("nrg.ui.ZippyTree.prototype.createBranch",U.A.prototype.br);h("nrg.ui.ZippyTree.prototype.playFx",U.A.prototype.IS);h("nrg.ui.ZippyTree.prototype.toggleFadeInFx",U.A.prototype.iU);h("nrg.ui.ZippyTree.prototype.disposeInternal",U.A.prototype.i);function Un(){}k(Un,rl);fa(Un);Un.prototype.C=function(a){var b=a.da().C("span",this.wn(a).join(" "));Vn(this,b,a.ll);return b};Un.prototype.cc=function(a,b){b=Un.g.cc.call(this,a,b);var c=rj(b),d=Wn;Mb(c,Xn(this,Yn))?d=Yn:Mb(c,Xn(this,Zn))?d=Zn:Mb(c,Xn(this,Wn))&&(d=Wn);a.ll=d;Aj(b,"checked",d==Yn?"mixed":d==Zn?"true":"false");return b};Un.prototype.ii=function(){return"checkbox"};
function Vn(a,b,c){if(b){var d=Xn(a,c);sj(b,d)||(w($n,function(a){a=Xn(this,a);xj(b,a,a==d)},a),Aj(b,"checked",c==Yn?"mixed":c==Zn?"true":"false"))}}Un.prototype.oa=function(){return"goog-checkbox"};function Xn(a,b){var c=a.oa();if(b==Zn)return c+"-checked";if(b==Wn)return c+"-unchecked";if(b==Yn)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function ao(a,b,c){c=c||Un.qf();Gl.call(this,null,c,b);this.ll=ca(a)?a:Wn}k(ao,Gl);var Zn=!0,Wn=!1,Yn=null,$n={KU:Zn,xW:Wn,yW:Yn};f=ao.prototype;f.Nc=null;f.Tl=function(){return this.ll==Zn};f.xh=function(a){a!=this.ll&&(this.ll=a,Vn(this.ec(),this.b(),this.ll))};f.yi=function(a){this.Fa?(this.Id(),this.Nc=a,this.Pb()):this.Nc=a};f.toggle=function(){this.xh(this.ll?Wn:Zn)};
f.Pb=function(){ao.g.Pb.call(this);if(this.Cn){var a=this.Rb();this.Nc&&a.I(this.Nc,"click",this.Yy).I(this.Nc,"mouseover",this.Dn).I(this.Nc,"mouseout",this.Nu).I(this.Nc,"mousedown",this.bj).I(this.Nc,"mouseup",this.li);a.I(this.b(),"click",this.Yy)}this.Nc&&(this.Nc.id||(this.Nc.id=dj(this)+".lbl"),Aj(this.b(),"labelledby",this.Nc.id))};f.xd=function(a){ao.g.xd.call(this,a);if(a=this.b())a.tabIndex=this.isEnabled()?0:-1};
f.Yy=function(a){a.stopPropagation();var b=this.ll?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.ki=function(a){32==a.keyCode&&this.Yy(a);return!1};ol("goog-checkbox",function(){return new ao});function bo(){be.call(this);this.t="mesh";za(this,new ld)}k(bo,be);h("X.mesh",bo);V.a.c={};V.a.c.w=function(){U.S.call(this);this.ij=[];this.Ah=[]};k(V.a.c.w,U.S);h("xiv.ui.ctrl.XtkController",V.a.c.w);V.a.c.w.ID_PREFIX="xiv.ui.ctrl.XtkController";V.a.c.w.CSS_SUFFIX={zK:"label",iK:"component"};V.a.c.w.ro=r();V.a.c.w.HE=function(){return vh("div",{id:"Label_"+r(),"class":V.a.c.w.CSS.zK})};V.a.c.w.wG=function(a){a=ia(a.file)?a.file[0]:a.file||a.name;return Sk(a)};
V.a.c.w.PO=function(a){if(a instanceof bo)return"Meshes";if(a instanceof F)return"Volumes";if(a instanceof Mn)return"Fibers";if(a instanceof ln)return"Annotations"};V.a.c.w.Ng=function(a,b){b.EI([V.a.c.w.wG(a)])};f=V.a.c.w.prototype;f.Rl=!1;f.p=function(a){V.a.c.w.g.p.call(this,a)};f.yi=function(a){null==this.Nc&&(this.Nc=V.a.c.w.HE(),zh(this.b(),this.Nc));this.Nc.innerHTML=a};f.xO=function(){return this.Nc};f.EI=function(a){ka(a)&&(a=[a]);this.jp=a};f.qO=function(){return this.jp};
f.gm=function(a){this.Xe=a};f.EP=function(){return this.Xe};f.Vn=function(a){a=this.O=a;this.O instanceof aj?(a=this.O.b(),this.O.Fa?this.O.b().parentNode!==this.b()&&this.O.b()!==this.b()&&this.b().appendChild(this.O.b()):this.O.p(this.b())):this.b().appendChild(a);null!=a&&R(a,V.a.c.w.CSS.iK)};f.HF=function(){return Qb(this.ij,this.Ah)};f.FO=function(){return this.ij};f.bH=function(){return this.Rl};f.yT=function(a){this.Rl=a};f.jP=function(){return this.Ah};f.bO=function(){return this.O};
f.ue=ea;f.Ag=function(a,b,c){a=new a;a.p();a.yi(b);zh(this.b(),a.b());null!=c&&C(a,"o",c);return a};f.update=function(){this.O==this?this.o():this.O.o&&this.O.o()};f.o=function(){this.O.o&&this.O!=this&&(window.console.log("UPDATE STYLE",this.O),this.O.o())};f.yx=function(a,b){var c=this.Ag(b,"Color",function(b){a.color=b.color}.bind(this));V.a.c.w.Ng(a,c);this.Ah.push(c);c[V.a.c.w.ro]=a;c.update()};
f.QD=function(a,b){var c=this.Ag(b,"Opacity",function(b){a.opacity=parseFloat(b.value)});V.a.c.w.Ng(a,c);this.Ah.push(c);c.O.aa(1);c.O.o()};f.zx=function(a,b){var c=this.Ag(b,"Visible",function(b){a.visible=b.checked});V.a.c.w.Ng(a,c);this.Ah.push(c);c.O.xh(a.visible)};
f.i=function(){V.a.c.w.g.i.call(this);this[V.a.c.w.ro]=null;delete this.Rl;delete this.Xe;A(this.Ah,function(a){ad(a);a.k()});Nb(this.Ah);delete this.Ah;A(this.ij,function(a){ad(a);a.k();controller=null});Nb(this.ij);delete this.ij;null!=this.O&&(ad(this.O),this.O instanceof aj?this.O.k():S(this.O),delete this.O);null!=this.jp&&(Nb(this.jp),delete this.jp);null!=this.Nc&&(S(this.Nc),delete this.Nc)};h("xiv.ui.ctrl.XtkController.ID_PREFIX",V.a.c.w.ID_PREFIX);
h("xiv.ui.ctrl.XtkController.CSS_SUFFIX",V.a.c.w.CSS_SUFFIX);h("xiv.ui.ctrl.XtkController.EventType",{JU:"o"});h("xiv.ui.ctrl.XtkController.OBJ_KEY",V.a.c.w.ro);h("xiv.ui.ctrl.XtkController.createLabel",V.a.c.w.HE);h("xiv.ui.ctrl.XtkController.getXObjLabel",V.a.c.w.wG);h("xiv.ui.ctrl.XtkController.getObjectCategory",V.a.c.w.PO);h("xiv.ui.ctrl.XtkController.setControllerFolders",V.a.c.w.Ng);h("xiv.ui.ctrl.XtkController.prototype.render",V.a.c.w.prototype.p);
h("xiv.ui.ctrl.XtkController.prototype.setLabel",V.a.c.w.prototype.yi);h("xiv.ui.ctrl.XtkController.prototype.getLabel",V.a.c.w.prototype.xO);h("xiv.ui.ctrl.XtkController.prototype.setFolders",V.a.c.w.prototype.EI);h("xiv.ui.ctrl.XtkController.prototype.getFolders",V.a.c.w.prototype.qO);h("xiv.ui.ctrl.XtkController.prototype.setXObj",V.a.c.w.prototype.gm);h("xiv.ui.ctrl.XtkController.prototype.getXObj",V.a.c.w.prototype.EP);h("xiv.ui.ctrl.XtkController.prototype.setComponent",V.a.c.w.prototype.Vn);
h("xiv.ui.ctrl.XtkController.prototype.getAllControllers",V.a.c.w.prototype.HF);h("xiv.ui.ctrl.XtkController.prototype.getMasterControllers",V.a.c.w.prototype.FO);h("xiv.ui.ctrl.XtkController.prototype.isInitialized",V.a.c.w.prototype.bH);h("xiv.ui.ctrl.XtkController.prototype.setInitialized",V.a.c.w.prototype.yT);h("xiv.ui.ctrl.XtkController.prototype.getSubControllers",V.a.c.w.prototype.jP);h("xiv.ui.ctrl.XtkController.prototype.getComponent",V.a.c.w.prototype.bO);
h("xiv.ui.ctrl.XtkController.prototype.dispatchComponentEvent",V.a.c.w.prototype.ue);h("xiv.ui.ctrl.XtkController.prototype.createController",V.a.c.w.prototype.Ag);h("xiv.ui.ctrl.XtkController.prototype.update",V.a.c.w.prototype.update);h("xiv.ui.ctrl.XtkController.prototype.updateStyle",V.a.c.w.prototype.o);h("xiv.ui.ctrl.XtkController.prototype.add_colorPalette",V.a.c.w.prototype.yx);h("xiv.ui.ctrl.XtkController.prototype.add_opacity",V.a.c.w.prototype.QD);
h("xiv.ui.ctrl.XtkController.prototype.add_visible",V.a.c.w.prototype.zx);h("xiv.ui.ctrl.XtkController.prototype.disposeInternal",V.a.c.w.prototype.i);V.a.c.Fc=function(){V.a.c.w.call(this)};k(V.a.c.Fc,V.a.c.w);h("xiv.ui.ctrl.Histogram",V.a.c.Fc);V.a.c.Fc.ID_PREFIX="xiv.ui.ctrl.Histogram";V.a.c.Fc.CSS_SUFFIX={cK:"canvas",BK:"linecanvas",DK:"max",LK:"min"};V.a.c.Fc.LEVEL_CUTOFF=.99;f=V.a.c.Fc.prototype;f.XP=.95;f.Wf=null;f.Xl=null;f.nw=null;f.Yr=null;f.sw=null;f.dt=null;f.NM="rgb(40,40,40)";
f.p=function(a){V.a.c.Fc.g.p.call(this,a);this.Vn(this);this.kl=vh("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+r(),"class":this.constructor.CSS.cK});this.b().appendChild(this.kl);this.en=this.kl.getContext("2d");this.en.fillStyle=this.NM;this.pk=vh("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+r(),"class":this.constructor.CSS.BK});this.b().appendChild(this.pk);this.hj=this.pk.getContext("2d");this.Xr=vh("div",{id:this.constructor.ID_PREFIX+"_Max_"+r(),"class":this.constructor.CSS.DK},
"1000");this.b().appendChild(this.Xr);this.Zr=vh("div",{id:this.constructor.ID_PREFIX+"_Min_"+r(),"class":this.constructor.CSS.LK},"-1000");this.b().appendChild(this.Zr)};
function co(a){if(null==a.Wf){var b=0,c=a.Xe.max;A(a.Xe.SG,function(a){A(a,function(a){A(a,function(a){if(null==this.Wf)for(this.Wf=[];b<=c;b++)this.Wf.push(0);this.Wf[parseInt(a)]++;this.nw++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Wf){var d;null==a.Xl&&(a.Xl=[],a.Yr=0,A(a.Wf,function(a){d=a/this.nw;this.Xl.push(d);this.Yr=Math.max(this.Yr,d)}.bind(a)))}}}
f.jF=function(){if(null!=this.Xe){var a=ti(this.kl),b=a.width,a=a.height;this.kl.height=a;this.kl.width=b;this.pk.height=a;this.pk.width=b;co(this);if(null!=this.Wf)for(var b=Math.round(b/this.Xe.Fi),b=0<b?b:1,c=this.XP/this.Yr,d,e=0,g=this.Xl.length;e<g;e++)d=this.Xl[e]*c*a,this.en.fillRect(b*e,a,b,-Math.round(d))}};f.cG=function(a){if(null!=this.Wf)for(var b=0,c=0,d=this.Wf.length;c<d;c++)if(b+=this.Wf[c],b/this.nw>=a)return c};
f.kF=function(){if(null!=this.Xe){var a=ti(this.pk),b=a.width,a=a.height;this.pk.width=b;var c;c=0==this.km&&0<this.Ck?Math.round(this.dt/this.Ck*b):Math.round(this.dt/this.km*b);b=0==this.Ck?0:Math.round(this.sw/this.Ck*b);this.hj.strokeStyle="gray";this.hj.moveTo(c,a);this.hj.lineTo(b,0);this.hj.lineWidth=.5;this.hj.stroke();b=c+(b-c)/2;this.hj.moveTo(b,a);this.hj.lineTo(b,a-20);this.hj.lineWidth=.5;this.hj.stroke()}};f.update=function(){this.jF();this.LJ();this.kF()};
f.LJ=function(){null!=this.Xe&&(null==this.km&&(this.km=parseInt(this.Xe.Cj),this.Ck=parseInt(this.Xe.Fi),this.km=isNaN(this.km)?null:this.km,this.Ck=isNaN(this.Ck)?null:this.Ck,this.dt=this.km,this.sw=this.Ck),this.dt=parseInt(this.Xe.Cj),this.sw=parseInt(this.Xe.Fi),this.Zr.innerHTML=this.dt,this.Xr.innerHTML=this.sw)};
f.i=function(){V.a.c.Fc.g.i.call(this);null!=this.Xr&&(S(this.Xr),delete this.Xr);null!=this.Zr&&(S(this.Zr),delete this.Zr);null!=this.kl&&(S(this.kl),delete this.kl);null!=this.pk&&(S(this.pk),delete this.pk);null!=this.Wf&&(Nb(this.Wf),delete this.Wf);null!=this.Xl&&(Nb(this.Xl),delete this.Xl);delete this.nw;delete this.Yr;delete this.en;delete this.hj;delete this.km;delete this.Ck};h("xiv.ui.ctrl.Histogram.EventType",{});h("xiv.ui.ctrl.Histogram.ID_PREFIX",V.a.c.Fc.ID_PREFIX);
h("xiv.ui.ctrl.Histogram.CSS_SUFFIX",V.a.c.Fc.CSS_SUFFIX);h("xiv.ui.ctrl.Histogram.LEVEL_CUTOFF",V.a.c.Fc.LEVEL_CUTOFF);h("xiv.ui.ctrl.Histogram.prototype.render",V.a.c.Fc.prototype.p);h("xiv.ui.ctrl.Histogram.prototype.draw",V.a.c.Fc.prototype.jF);h("xiv.ui.ctrl.Histogram.prototype.getLevelByPixelThreshold",V.a.c.Fc.prototype.cG);h("xiv.ui.ctrl.Histogram.prototype.drawLine",V.a.c.Fc.prototype.kF);h("xiv.ui.ctrl.Histogram.prototype.update",V.a.c.Fc.prototype.update);
h("xiv.ui.ctrl.Histogram.prototype.updateMaxMin",V.a.c.Fc.prototype.LJ);h("xiv.ui.ctrl.Histogram.prototype.disposeInternal",V.a.c.Fc.prototype.i);U.ba=function(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);U.S.call(this);this.cF=a;this.Zl=b;this.Xq=null;this.Xb=new Li(this.b());this.dw()};k(U.ba,U.S);h("nrg.ui.ResizeDragger",U.ba);U.ba.ID_PREFIX="nrg.ui.ResizeDragger";U.ba.CSS_SUFFIX={};U.ba.fq=500;f=U.ba.prototype;f.Ci=null;f.kk=null;f.cp=null;f.jr=null;f.Xi=null;f.bk=null;f.xu=null;f.ir=null;f.offsetX=0;f.RI=function(a){this.offsetX=a};f.offsetY=0;f.DT=function(a){this.offsetY=a};f.Fb=null;f.ik=null;f.cb=null;
f.wf=null;f.$a=null;f.rd=null;f.sf=!1;f.Xf=new ah(10,10);f.Me=function(){return this.Xq};f.zk=function(a){this.Xq=a};f.RF=function(){return this.Xb};f.PF=function(){return this.cF};f.Ne=function(){return this.b()};
f.om=function(){this.ik=ti(this.b());this.Fb=ei(this.b());this.Ci=-1*this.ik.height/2+this.offsetY;this.kk=-1*this.ik.width/2+this.offsetX;this.Xb.ni()||this.sf||(this.cb=zb(ei(this.Zl)),this.wf=zb(ti(this.Zl)),this.cb.left=this.cb.x,this.cb.top=this.cb.y,this.cb.right=this.cb.x+this.wf.width,this.cb.bottom=this.cb.y+this.wf.height,this.$a=zb(ei(this.Xq)),this.rd=zb(ti(this.Xq)),this.$a.left=this.$a.x,this.$a.top=this.$a.y,this.$a.right=this.$a.x+this.rd.width,this.$a.bottom=this.$a.y+this.rd.height,
this.constructor.$g&&this.constructor.$g.bind(this)())};f.NI=function(a){return this.Xf=a};f.dw=function(){C(this.Xb,"start",this.sA.bind(this));C(this.Xb,"drag",this.ri.bind(this));C(this.Xb,"end",this.rA.bind(this))};f.sA=function(){this.dispatchEvent({type:"start_resize"})};f.ri=function(){this.om();this.dispatchEvent({type:"resize",kT:this.cb,wf:this.wf,BM:this.$a,rd:this.rd});null!=this.constructor.vf&&this.constructor.vf.bind(this)()};f.rA=function(){this.dispatchEvent({type:"end_resize"})};
f.update=function(){this.Xb.ni()||this.sf||this.om()};f.hh=function(){};f.zh=function(a,b,c){this.om();a=this.hh(a);ma(c)&&0===c?Yh(this.b(),a.end):eo(this,a.start,a.end,b,c)};function eo(a,b,c,d,e){a.jm=new Ck(a.b(),[b.x,b.y],[c.x,c.y],ma(e)?e:U.ba.fq,Rk);C(a.jm,"begin",function(){this.sf=!0;this.sA()}.bind(a));C(a.jm,"animate",a.ri.bind(a));C(a.jm,"end",function(){this.sf=!1;this.jm.k();ad(this.jm);this.jm.bh();this.jm=null;ci(this.b(),c);this.rA();d&&d()}.bind(a));a.jm.play()}
f.i=function(){delete this.JY;delete this.KY;delete this.kk;delete this.cp;delete this.jr;delete this.Xi;delete this.bk;delete this.xu;delete this.ir;delete this.sf;wb(this.Xf);delete this.Xf;delete this.Zl;delete this.Xq;wb(this.Fb);delete this.Fb;wb(this.ik);delete this.ik;wb(this.cb);delete this.cb;wb(this.wf);delete this.wf;wb(this.$a);delete this.$a;wb(this.rd);delete this.rd;S(this.Xb.handle);this.Xb.handle=null;ad(this.Xb);this.Xb.k();delete this.Xb;delete this.cF};
h("nrg.ui.ResizeDragger.EventType",{Mw:"resize",cL:"start_resize",bL:"end_resize"});h("nrg.ui.ResizeDragger.ID_PREFIX",U.ba.ID_PREFIX);h("nrg.ui.ResizeDragger.CSS_SUFFIX",U.ba.CSS_SUFFIX);h("nrg.ui.ResizeDragger.ANIM_MED",U.ba.fq);h("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",U.ba.prototype.Ci);h("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",U.ba.prototype.kk);h("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",U.ba.prototype.cp);h("nrg.ui.ResizeDragger.prototype.draggerLimitRight",U.ba.prototype.jr);
h("nrg.ui.ResizeDragger.prototype.draggerLimitTop",U.ba.prototype.Xi);h("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",U.ba.prototype.bk);h("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",U.ba.prototype.xu);h("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",U.ba.prototype.ir);h("nrg.ui.ResizeDragger.prototype.offsetX",U.ba.prototype.offsetX);h("nrg.ui.ResizeDragger.prototype.setOffsetX",U.ba.prototype.RI);h("nrg.ui.ResizeDragger.prototype.offsetY",U.ba.prototype.offsetY);
h("nrg.ui.ResizeDragger.prototype.setOffsetY",U.ba.prototype.DT);h("nrg.ui.ResizeDragger.prototype.handlePos",U.ba.prototype.Fb);h("nrg.ui.ResizeDragger.prototype.handleSize",U.ba.prototype.ik);h("nrg.ui.ResizeDragger.prototype.resizeePos",U.ba.prototype.cb);h("nrg.ui.ResizeDragger.prototype.resizeeSize",U.ba.prototype.wf);h("nrg.ui.ResizeDragger.prototype.boundaryPos",U.ba.prototype.$a);h("nrg.ui.ResizeDragger.prototype.boundarySize",U.ba.prototype.rd);
h("nrg.ui.ResizeDragger.prototype.isAnimating",U.ba.prototype.sf);h("nrg.ui.ResizeDragger.prototype.minSize",U.ba.prototype.Xf);h("nrg.ui.ResizeDragger.prototype.getBoundaryElement",U.ba.prototype.Me);h("nrg.ui.ResizeDragger.prototype.setBoundaryElement",U.ba.prototype.zk);h("nrg.ui.ResizeDragger.prototype.getDragger",U.ba.prototype.RF);h("nrg.ui.ResizeDragger.prototype.getDirection",U.ba.prototype.PF);h("nrg.ui.ResizeDragger.prototype.getHandle",U.ba.prototype.Ne);
h("nrg.ui.ResizeDragger.prototype.updateTrackingValues",U.ba.prototype.om);h("nrg.ui.ResizeDragger.prototype.setMinSize",U.ba.prototype.NI);h("nrg.ui.ResizeDragger.prototype.onResizeStart",U.ba.prototype.sA);h("nrg.ui.ResizeDragger.prototype.onResize",U.ba.prototype.ri);h("nrg.ui.ResizeDragger.prototype.onResizeEnd",U.ba.prototype.rA);h("nrg.ui.ResizeDragger.prototype.update",U.ba.prototype.update);h("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",U.ba.prototype.hh);
h("nrg.ui.ResizeDragger.prototype.slideToLimits",U.ba.prototype.zh);h("nrg.ui.ResizeDragger.prototype.disposeInternal",U.ba.prototype.i);U.kd=function(a){U.ba.call(this,"right",a)};k(U.kd,U.ba);h("nrg.ui.ResizeDraggerRight",U.kd);U.kd.ID_PREFIX="nrg.ui.ResizeDraggerRight";U.kd.CSS_SUFFIX={};U.kd.$g=function(){this.cp=this.cb.left+this.Xf.width+this.kk;this.jr=this.$a.right+this.kk;this.xu=this.jr-this.cp};h("nrg.ui.ResizeDraggerRight.calculateDraggerLimits",U.kd.$g);U.kd.vf=function(){ri(this.Zl,Math.min(Math.max(this.wf.width+(this.sf?this.Fb.x-this.cb.right+this.kk:this.Xb.clientX-this.Xb.jB),this.Xf.width),this.rd.width))};
h("nrg.ui.ResizeDraggerRight.resizeMethod",U.kd.vf);U.kd.prototype.update=function(a){this.Xb.ni()||this.sf||(U.kd.g.update.call(this,a),Ni(this.Xb,new ch(this.cp,this.cb.y,this.xu,0)),ci(this.b(),this.cb.right+this.kk,this.cb.y),si(this.b(),this.wf.height))};U.kd.prototype.hh=function(a){return{start:new Yg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Yg(this.cp,this.Fb.y):new Yg(this.jr,this.Fb.y)}};h("nrg.ui.ResizeDraggerRight.ID_PREFIX",U.kd.ID_PREFIX);h("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",U.kd.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerRight.calculateDraggerLimits",U.kd.$g);h("nrg.ui.ResizeDraggerRight.resizeMethod",U.kd.vf);h("nrg.ui.ResizeDraggerRight.prototype.update",U.kd.prototype.update);h("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",U.kd.prototype.hh);U.bf=function(a){U.ba.call(this,"right",a)};k(U.bf,U.ba);h("nrg.ui.ResizeDraggerLeft",U.bf);U.bf.ID_PREFIX="nrg.ui.ResizeDraggerLeft";U.bf.CSS_SUFFIX={};U.bf.vf=function(){ri(this.Zl,Math.min(Math.max(this.wf.width+(this.cb.x-this.Fb.x),this.Xf.width),this.rd.width));ci(this.b(),this.Fb.x,this.cb.y)};h("nrg.ui.ResizeDraggerLeft.resizeMethod",U.bf.vf);
U.bf.prototype.update=function(a){this.Xb.ni()||this.sf||(U.bf.g.update.call(this,a),Ni(this.Xb,new ch(this.$a.x-this.ik.width,this.$a.y,this.rd.width-this.Xf.width-this.ik.width,0)),ci(this.b(),this.cb.x-this.ik.width,this.cb.y))};U.bf.prototype.hh=function(a){return{start:new Yg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Yg(this.$a.x+this.Xf.width,this.Fb.y):new Yg(this.$a.x+this.rd.width-this.Xf.width,this.Fb.y)}};h("nrg.ui.ResizeDraggerLeft.ID_PREFIX",U.bf.ID_PREFIX);
h("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",U.bf.CSS_SUFFIX);h("nrg.ui.ResizeDraggerLeft.resizeMethod",U.bf.vf);h("nrg.ui.ResizeDraggerLeft.prototype.update",U.bf.prototype.update);h("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",U.bf.prototype.hh);U.ld=function(a){U.ba.call(this,"right",a)};k(U.ld,U.ba);h("nrg.ui.ResizeDraggerTop",U.ld);U.ld.ID_PREFIX="nrg.ui.ResizeDraggerTop";U.ld.CSS_SUFFIX={};U.ld.$g=function(){this.Xi=this.$a.top-this.Ci;this.bk=this.cb.bottom-this.Xf.height+this.Ci;this.ir=this.bk-this.Xi};h("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",U.ld.$g);U.ld.vf=function(){var a=this.Fb.y-this.Ci,b=this.wf.height+(this.sf?this.cb.y-a:this.Xb.kB-this.Xb.clientY);this.Zl.style.top=a.toString()+"px";si(this.Zl,Math.max(b,this.Xf.height))};
h("nrg.ui.ResizeDraggerTop.resizeMethod",U.ld.vf);U.ld.prototype.update=function(){this.Xb.ni()||this.sf||(U.ld.g.update.call(this),Ni(this.Xb,new ch(this.$a.x,this.Xi,0,this.ir)),ci(this.b(),this.cb.x,this.cb.y+this.Ci))};U.ld.prototype.hh=function(a){return{start:new Yg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Yg(this.Fb.x,this.bk):new Yg(this.Fb.x,this.Xi)}};h("nrg.ui.ResizeDraggerTop.ID_PREFIX",U.ld.ID_PREFIX);h("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",U.ld.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",U.ld.$g);h("nrg.ui.ResizeDraggerTop.resizeMethod",U.ld.vf);h("nrg.ui.ResizeDraggerTop.prototype.update",U.ld.prototype.update);h("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",U.ld.prototype.hh);U.Rd=function(a){U.ba.call(this,"right",a)};k(U.Rd,U.ba);h("nrg.ui.ResizeDraggerTopRight",U.Rd);U.Rd.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";U.Rd.CSS_SUFFIX={};U.Rd.prototype.om=function(){U.Rd.g.om.call(this);this.Xb.ni()||this.sf||(U.kd.$g.bind(this)(),U.ld.$g.bind(this)())};U.Rd.prototype.ri=function(){U.Rd.g.ri.call(this);U.kd.vf.bind(this)();U.ld.vf.bind(this)()};
U.Rd.prototype.update=function(a){this.Xb.ni()||this.sf||(U.Rd.g.update.call(this,a),Ni(this.Xb,new ch(this.$a.x+this.kk,this.$a.y+this.Ci,this.rd.width,this.rd.height)),ci(this.b(),this.cb.right+this.kk,this.cb.y+this.Ci))};
U.Rd.prototype.hh=function(a){var b=new Yg(this.Fb.x,this.Fb.y),c;"TOP_LEFT"==a?c=new Yg(this.$a.x,this.$a.y):"TOP_RIGHT"==a?c=new Yg(this.$a.x+this.rd.width,this.$a.y):"BOTTOM_RIGHT"==a?c=new Yg(this.$a.x+this.rd.width,this.$a.y+this.rd.height):"BOTTOM_LEFT"==a&&(c=new Yg(this.$a.x,this.$a.y+this.rd.height));return{start:b,end:c}};h("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",U.Rd.ID_PREFIX);h("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",U.Rd.CSS_SUFFIX);
h("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",U.Rd.prototype.om);h("nrg.ui.ResizeDraggerTopRight.prototype.onResize",U.Rd.prototype.ri);h("nrg.ui.ResizeDraggerTopRight.prototype.update",U.Rd.prototype.update);h("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",U.Rd.prototype.hh);U.Qd=function(a){U.ba.call(this,"right",a)};k(U.Qd,U.ba);h("nrg.ui.ResizeDraggerBottom",U.Qd);U.Qd.ID_PREFIX="nrg.ui.ResizeDraggerBottom";U.Qd.CSS_SUFFIX={};U.Qd.$g=function(){this.Xi=this.cb.top+this.Xf.height+this.Ci;this.bk=this.$a.bottom+this.Ci;this.ir=this.bk-this.Xi};h("nrg.ui.ResizeDraggerBottom.calculateDraggerLimits",U.Qd.$g);U.Qd.vf=function(){si(this.Zl,Math.max(this.wf.height+(this.Fb.y-this.cb.bottom),this.Xf.height))};h("nrg.ui.ResizeDraggerBottom.resizeMethod",U.Qd.vf);
U.Qd.prototype.update=function(){this.Xb.ni()||this.sf||(U.Qd.g.update.call(this),Ni(this.Xb,new ch(this.$a.x,this.Xi,0,this.bk)),ci(this.b(),this.cb.x,this.cb.bottom+this.Ci))};U.Qd.prototype.hh=function(a){return{start:new Yg(this.Fb.x,this.Fb.y),end:"MIN"==a?new Yg(this.Fb.x,this.Xi):new Yg(this.Fb.x,this.bk)}};h("nrg.ui.ResizeDraggerBottom.ID_PREFIX",U.Qd.ID_PREFIX);h("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",U.Qd.CSS_SUFFIX);h("nrg.ui.ResizeDraggerBottom.calculateDraggerLimits",U.Qd.$g);
h("nrg.ui.ResizeDraggerBottom.resizeMethod",U.Qd.vf);h("nrg.ui.ResizeDraggerBottom.prototype.update",U.Qd.prototype.update);h("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",U.Qd.prototype.hh);U.qa=function(a,b){U.S.call(this);this.q=lh(a);this.Cf={};this.Op(b||U.qa.WX)};k(U.qa,U.S);h("nrg.ui.Resizable",U.qa);U.qa.ID_PREFIX="nrg.ui.Resizable";U.qa.CSS_SUFFIX={GU:"boundary"};U.qa.it="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" ");U.qa.SB=["RIGHT","BOTTOM"];U.qa.kK=new ch(0,0,600,600);U.qa.TB=20;U.qa.UB=20;this.AM={TOP:4,LEFT:4,RIGHT:4,BOTTOM:4};f=U.qa.prototype;
f.wT=function(a,b){this.PX(a);if(0>b)throw Error("Threshold must be greater than zero!");this.AM[a]=b};f.rv=U.qa.UB;f.qv=U.qa.TB;f.Ne=function(a){return this.Cf[a].Ne()};f.mp=function(a){return this.Cf[a]};f.sO=function(){var a=[];A(qb(this.Cf),function(b){a.push(b.Ne())});return a};f.Me=function(){return this.$h};f.zk=function(a){this.$h=a;if(this.$h.parentNode!==this.q.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};
f.MI=function(a){this.qv=a};f.OI=function(a){this.rv=a};f.LO=function(){return this.qv};f.MO=function(){return this.rv};f.Op=function(a){a=a||"DEFAULT";ka(a)&&(a="ALL"==a.toUpperCase()?U.qa.it:"DEFAULT"==a.toUpperCase()?U.qa.SB:[a]);fo(this);A(a,function(a){if(!ka(a))throw Error("String required!");if(!Mb(U.qa.it,a))throw Error("Invalid direction: ",a);this.BD(a)}.bind(this))};f.Ox=function(a){if(!Mb(U.qa.it,a))throw Error("Invalid draggerDir '"+a);};
f.WP=function(a){this.Ox(a);if(!this.Cf[a])throw Error("No ResizeDragger for "+a);};f.zh=function(a,b,c,d){a=a.toUpperCase();this.Ox(a);this.update();this.Cf[a].zh(b,c,d)};
U.qa.KE=function(a,b){switch(a){case "TOP":return new U.ld(b);case "BOTTOM":return new U.Qd(b);case "LEFT":return new U.bf(b);case "RIGHT":return new U.kd(b);case "TOP_RIGHT":return new U.Rd(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}};f=U.qa.prototype;
f.BD=function(a){if(a in this.Cf)throw Error("Resize direction "+a+" already in use.");this.Cf[a]=U.qa.KE(a,this.q);C(this.Cf[a],"start_resize",this.SR.bind(this));C(this.Cf[a],"resize",this.On.bind(this));C(this.Cf[a],"end_resize",this.RR.bind(this));this.update()};f.update=function(){if(null!=this.$h){var a=new ah(this.rv,this.qv);w(this.Cf,function(b){this.$h&&this.$h.parentNode&&zh(this.$h.parentNode,b.Ne());b.Me()!==this.$h&&b.zk(this.$h);b.NI(a);b.om();b.update()}.bind(this))}};f.SR=function(){this.dispatchEvent({type:"resize_start"})};
f.On=function(a){this.dispatchEvent({type:"resize",kT:a.cb,wf:a.wf,BM:a.$a,rd:a.rd})};f.RR=function(){this.update();this.dispatchEvent({type:"resize_end"})};function fo(a){w(a.Cf,function(a){a&&(ad(a),a.k())});wb(a.Cf)}f.i=function(){U.qa.g.i.call(this);fo(this);delete this.Cf;this.$h&&(S(this.$h.parentNode),delete this.$h)};h("nrg.ui.Resizable.EventType",{Mw:"resize",cL:"resize_start",bL:"resize_end"});h("nrg.ui.Resizable.ID_PREFIX",U.qa.ID_PREFIX);h("nrg.ui.Resizable.CSS_SUFFIX",U.qa.CSS_SUFFIX);
h("nrg.ui.Resizable.DIRECTIONS",U.qa.it);h("nrg.ui.Resizable.DEFAULT_DIRECTIONS",U.qa.SB);h("nrg.ui.Resizable.DEFAULT_LIMITS",U.qa.kK);h("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",U.qa.TB);h("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",U.qa.UB);h("nrg.ui.Resizable.createResizeDragger",U.qa.KE);h("nrg.ui.Resizable.prototype.setBoundThreshold",U.qa.prototype.wT);h("nrg.ui.Resizable.prototype.getHandle",U.qa.prototype.Ne);h("nrg.ui.Resizable.prototype.getResizeDragger",U.qa.prototype.mp);
h("nrg.ui.Resizable.prototype.getHandles",U.qa.prototype.sO);h("nrg.ui.Resizable.prototype.getBoundaryElement",U.qa.prototype.Me);h("nrg.ui.Resizable.prototype.setBoundaryElement",U.qa.prototype.zk);h("nrg.ui.Resizable.prototype.setMinHeight",U.qa.prototype.MI);h("nrg.ui.Resizable.prototype.setMinWidth",U.qa.prototype.OI);h("nrg.ui.Resizable.prototype.getMinHeight",U.qa.prototype.LO);h("nrg.ui.Resizable.prototype.getMinWidth",U.qa.prototype.MO);h("nrg.ui.Resizable.prototype.setResizeDirections",U.qa.prototype.Op);
h("nrg.ui.Resizable.prototype.checkDirectionValid",U.qa.prototype.Ox);h("nrg.ui.Resizable.prototype.hasDragger",U.qa.prototype.WP);h("nrg.ui.Resizable.prototype.slideToLimits",U.qa.prototype.zh);h("nrg.ui.Resizable.prototype.addResizeDirection",U.qa.prototype.BD);h("nrg.ui.Resizable.prototype.update",U.qa.prototype.update);h("nrg.ui.Resizable.prototype.disposeInternal",U.qa.prototype.i);V.a.e.ge=function(a){U.S.call(this);this.Ae=a};k(V.a.e.ge,U.S);h("xiv.ui.layouts.LayoutFrame",V.a.e.ge);V.a.e.ge.ID_PREFIX="xiv.ui.layouts.LayoutFrame";V.a.e.ge.CSS_SUFFIX={};f=V.a.e.ge.prototype;f.Fg=function(){return this.Ae};f.Pd=null;f.ja=function(){return this.tt};f.Op=function(a){this.tt=this.tt?this.tt:new U.qa(this.b());this.tt.Op(a)};f.i=function(){V.a.e.ge.g.i.call(this);delete this.Ae};h("xiv.ui.layouts.LayoutFrame.EventType",{});h("xiv.ui.layouts.LayoutFrame.ID_PREFIX",V.a.e.ge.ID_PREFIX);
h("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",V.a.e.ge.CSS_SUFFIX);h("xiv.ui.layouts.LayoutFrame.prototype.getTitle",V.a.e.ge.prototype.Fg);h("xiv.ui.layouts.LayoutFrame.prototype.getResizable",V.a.e.ge.prototype.ja);h("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",V.a.e.ge.prototype.Op);h("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",V.a.e.ge.prototype.i);V.a.e.Hb=function(){if(!this.constructor.Ra)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");U.S.call(this);this.l={}};k(V.a.e.Hb,U.S);h("xiv.ui.layouts.Layout",V.a.e.Hb);var go="Slider_"+r(),ho="FrameDisplay_"+r(),io="ZoomDisplay_"+r(),jo="Crosshairs_"+r(),ko={Xa:go,zf:ho,Mh:io,zd:jo};V.a.e.Hb.ID_PREFIX="xiv.ui.layouts.Layout";
V.a.e.Hb.CSS_SUFFIX={};f=V.a.e.Hb.prototype;f.ad=20;f.ye=20;f.AT=function(a){this.ye=a};f.BT=function(a){this.ad=a};f.BO=function(){return this.l};f.Oy=function(a){return this.l[a]};f.AO=function(a){window.console.log(a,this.l[a]);var b={};w(ko,function(c){b[c]=this.l[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};f.Fg=function(){return this.constructor.Ra};f.zD=function(a){this.l=this.l?this.l:{};this.l[a.Fg()]=a};f.Wi=function(){this.dispatchEvent({type:"p"})};
f.NA=function(){w(this.vr(),function(a){null!=a.Xa&&(a.Xa.k(),delete a.Xa);null!=a.zd&&(a.zd.k(),delete a.zd);null!=a.zf&&(a.zf.k(),delete a.zf);null!=a.Mh&&(a.Mh.k(),delete a.Mh)})};f.Zs=function(){w(this.vr(),function(a){null!=a.Xa&&(a.Xa.o(),a.Xa.aa(a.Xa.ea()));null!=a.zd&&a.zd.o();null!=a.zf&&a.zf.o();null!=a.Mh&&a.Mh.o()})};f.o=function(){V.a.e.Hb.g.o.call(this);this.Wi()};f.i=function(){V.a.e.Hb.g.i.call(this);delete this.ye;delete this.ad;U.tu(this.CK);delete this.CK};
h("xiv.ui.layouts.Layout.EventType",{Mw:"p"});h("xiv.ui.layouts.Layout.INTERACTORS",ko);h("xiv.ui.layouts.Layout.ID_PREFIX",V.a.e.Hb.ID_PREFIX);h("xiv.ui.layouts.Layout.CSS_SUFFIX",V.a.e.Hb.CSS_SUFFIX);h("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",V.a.e.Hb.prototype.AT);h("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",V.a.e.Hb.prototype.BT);h("xiv.ui.layouts.Layout.prototype.getLayoutFrames",V.a.e.Hb.prototype.BO);h("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",V.a.e.Hb.prototype.Oy);
h("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",V.a.e.Hb.prototype.AO);h("xiv.ui.layouts.Layout.prototype.getTitle",V.a.e.Hb.prototype.Fg);h("xiv.ui.layouts.Layout.prototype.addLayoutFrame",V.a.e.Hb.prototype.zD);h("xiv.ui.layouts.Layout.prototype.dispatchResize",V.a.e.Hb.prototype.Wi);h("xiv.ui.layouts.Layout.prototype.removeAllInteractors",V.a.e.Hb.prototype.NA);h("xiv.ui.layouts.Layout.prototype.updateInteractors",V.a.e.Hb.prototype.Zs);
h("xiv.ui.layouts.Layout.prototype.updateStyle",V.a.e.Hb.prototype.o);h("xiv.ui.layouts.Layout.prototype.disposeInternal",V.a.e.Hb.prototype.i);V.a.e.K.Nm=function(){V.a.e.K.wc.call(this)};k(V.a.e.K.Nm,V.a.e.K.wc);h("xiv.ui.layouts.interactors.ZoomDisplay",V.a.e.K.Nm);V.a.e.K.Nm.ID_PREFIX="xiv.ui.layouts.interactors.ZoomDisplay";V.a.e.K.Nm.prototype.zj=function(){this.fi.innerHTML="Zoom level:&nbsp"+this.yb.value+"%"};h("xiv.ui.layouts.interactors.ZoomDisplay.ID_PREFIX",V.a.e.K.Nm.ID_PREFIX);h("xiv.ui.layouts.interactors.ZoomDisplay.prototype.updateValue",V.a.e.K.Nm.prototype.zj);function lo(a,b){vn.call(this,a,b);this.nb.am(0)}k(lo,vn);lo.prototype.oa=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};lo.prototype.NE=function(){var a=this.b(),b=mh(null,"goog-slider-thumb",a)[0];b||(b=this.gn(),a.appendChild(b));this.Qa=this.Jd=b};lo.prototype.gn=function(){var a=this.da().C("div","goog-slider-thumb");zj(a,"button");return a};U.D=function(a){lo.call(this);this.constructor.ko=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.gd=this.constructor.ko;U.S.prototype.ou.bind(this)();null!=a&&this.Bk(a)};k(U.D,lo);h("nrg.ui.Slider",U.D);U.D.ID_PREFIX="nrg.ui.Slider";U.D.CSS_SUFFIX={qL:"track",KC:"track-hovered",Qw:"thumb",IC:"thumb-hovered"};f=U.D.prototype;f.Ap=!1;f.Os=!1;f.ZT=function(a){this.Os=a};f.YT=function(a){this.Os=a};
f.p=function(a){this.q=vh("div",{id:U.D.ID_PREFIX+"_Widget_"+r()});this.cc(this.q);a=null!=a?a:document.body;a.appendChild(this.q);this.We=vh("div",{id:U.D.ID_PREFIX+"_Track_"+r()});this.q.appendChild(this.We);this.ee=ph("goog-slider-thumb",this.q);C(this,"change",this.lR.bind(this));C(this.ee,"mouseover",this.WR.bind(this));C(this.ee,"mouseout",this.VR.bind(this));C(this.We,"mouseover",this.qS.bind(this));C(this.We,"mouseout",this.pS.bind(this));C(this,"k",this.aS.bind(this));C(this,"l",this.YR.bind(this));
this.Bk(this.$c().toLowerCase())};f.b=function(){return this.q};f.uP=function(){return this.We};f.oP=function(){return this.ee};f.Vq=function(a){null==this.ym&&(this.ym={});if(null==this.ym[a.id]){var b=new qn(a);b.addEventListener("mousewheel",this.LR,!1,this);this.ym[a.id]=b}};f.xM=function(a){null==this.um&&(this.um={});if(null==this.um[a.id]){var b=new Al(a);C(b,"key",this.uk.bind(this));this.um[a.id]=b}};f.uk=function(a){window.console.log("KEY",a)};
f.o=function(){var a=this.ea(),a=In(this,a);"horizontal"==this.$c().toLowerCase()?this.ee.style.left=a.x.toString()+"px":"vertical"==this.$c().toLowerCase()&&(this.ee.style.left=a.y.toString()+"px")};f.Bk=function(a){U.D.g.Bk.call(this,a);this.Fa&&mo(this,this.$c().toLowerCase())};function mo(a,b){function c(a,c){Xg(a,[dk.Wb(c,"horizontal"),dk.Wb(c,"vertical")],[c,dk.Wb(c,b)])}c(a.q,a.constructor.gd);c(a.We,U.D.CSS.qL);c(a.ee,U.D.CSS.Qw)}f.DB=!1;f.ny=1;
f.$I=function(a,b){this.DB=a;ma(b)&&(this.ny=b)};f.LR=function(a){var b=Math.abs(a.pf)<Math.abs(a.$j)?a.$j:a.pf;this.DB?this.aa(Math.round(this.ea()-b*this.ny)):this.aa(Math.round(this.ea()-(0>b?-1:1)));this.dispatchEvent({type:"r"});a.preventDefault()};f.bu=function(a){this.tj=this.tj?this.tj:[];this.tj.push(a);no(this)};f.xx=function(a){this.wj=this.wj?this.wj:[];this.wj.push(a);oo(this)};
f.lR=function(a){a.stopPropagation();this.Ap&&(po(this),qo(this));this.Os||this.dispatchEvent({type:"q",value:this.ea(),Oz:this.bb(),Lz:this.La()});this.Os=!1};function po(a){R(a.ee,U.D.CSS.IC);null!=a.tj&&A(a.tj,function(a){R(this.ee,a)}.bind(a))}function qo(a){R(a.We,U.D.CSS.KC);null!=a.wj&&A(a.wj,function(a){R(this.We,a)}.bind(a))}function no(a){Vg(a.ee,U.D.CSS.IC);null!=a.tj&&A(a.tj,function(a){Vg(this.ee,a)}.bind(a))}
function oo(a){Vg(a.We,U.D.CSS.KC);null!=a.wj&&A(a.wj,function(a){Vg(this.We,a)}.bind(a))}f.WR=function(a){a.stopPropagation();po(this);qo(this)};f.qS=function(){qo(this)};f.VR=function(){this.Ap||(no(this),oo(this))};f.pS=function(){this.Ap||oo(this)};f.aS=function(){this.Ap=!0};f.YR=function(){this.Ap=!1;no(this);oo(this)};
f.i=function(){U.D.g.i.call(this);delete this.Os;null!=this.q&&(ad(this),S(this.q),delete this.q);null!=this.ee&&(ad(this.ee),S(this.ee),delete this.ee);null!=this.We&&(ad(this.We),S(this.We),delete this.We);null!=this.um&&(w(this.um,function(a){ad(a);a.k()}),wb(this.um),delete this.um);null!=this.ym&&(w(this.ym,function(a){ad(a);a.k()}),wb(this.ym),delete this.ym);null!=this.tj&&(Nb(this.tj),delete this.tj);null!=this.wj&&(Nb(this.wj),delete this.wj);delete this.DB;delete this.ny;delete this.Ap};
h("nrg.ui.Slider.EventType",{cW:"q",zV:"r"});h("nrg.ui.Slider.ID_PREFIX",U.D.ID_PREFIX);h("nrg.ui.Slider.CSS_SUFFIX",U.D.CSS_SUFFIX);h("nrg.ui.Slider.prototype.suspendSlideEvent",U.D.prototype.ZT);h("nrg.ui.Slider.prototype.suspendChangeEvent",U.D.prototype.YT);h("nrg.ui.Slider.prototype.render",U.D.prototype.p);h("nrg.ui.Slider.prototype.getElement",U.D.prototype.b);h("nrg.ui.Slider.prototype.getTrack",U.D.prototype.uP);h("nrg.ui.Slider.prototype.getThumb",U.D.prototype.oP);
h("nrg.ui.Slider.prototype.bindToMouseWheel",U.D.prototype.Vq);h("nrg.ui.Slider.prototype.bindToArrowKeys",U.D.prototype.xM);h("nrg.ui.Slider.prototype.updateStyle",U.D.prototype.o);h("nrg.ui.Slider.prototype.setOrientation",U.D.prototype.Bk);h("nrg.ui.Slider.prototype.setUseDeltaToScroll",U.D.prototype.$I);h("nrg.ui.Slider.prototype.addThumbHoverClass",U.D.prototype.bu);h("nrg.ui.Slider.prototype.addTrackHoverClass",U.D.prototype.xx);h("nrg.ui.Slider.prototype.disposeInternal",U.D.prototype.i);V.a.e.K.D=function(){U.D.call(this)};k(V.a.e.K.D,U.D);h("xiv.ui.layouts.interactors.Slider",V.a.e.K.D);V.a.e.K.D.ID_PREFIX="xiv.ui.layouts.interactors.Slider";V.a.e.K.D.CSS_SUFFIX={};V.a.e.K.D.prototype.p=function(){};V.a.e.K.D.prototype.i=function(){V.a.e.K.D.g.i.call(this)};h("xiv.ui.layouts.interactors.Slider.EventType",{});h("xiv.ui.layouts.interactors.Slider.ID_PREFIX",V.a.e.K.D.ID_PREFIX);h("xiv.ui.layouts.interactors.Slider.CSS_SUFFIX",V.a.e.K.D.CSS_SUFFIX);
h("xiv.ui.layouts.interactors.Slider.prototype.render",V.a.e.K.D.prototype.p);h("xiv.ui.layouts.interactors.Slider.prototype.disposeInternal",V.a.e.K.D.prototype.i);V.a.e.K.fe=function(){U.S.call(this)};k(V.a.e.K.fe,U.S);h("xiv.ui.layouts.interactors.Crosshairs",V.a.e.K.fe);V.a.e.K.fe.ID_PREFIX="xiv.ui.layouts.interactors.Crosshairs";V.a.e.K.fe.CSS_SUFFIX={eV:"horizontal",LW:"vertical"};f=V.a.e.K.fe.prototype;f.Di=null;f.mi=null;f.bJ=function(a){null!=a&&(this.Di.style.left=a.toString()+"px")};f.cJ=function(a){null!=a&&(this.mi.style.top=a.toString()+"px")};f.p=function(a){this.Di=ro(this,"vertical");this.mi=ro(this,"horizontal");a.appendChild(this.mi);a.appendChild(this.Di)};
f.Ss=function(a){a=!1===a?"hidden":"visible";this.Di.style.visibility=a;this.mi.style.visibility=a};function ro(a,b){b=b.toLowerCase();if(!sb(V.a.e.K.fe.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return vh("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+r(),"class":a.constructor.gd+"-"+b.toLowerCase()})}f.i=function(){V.a.e.K.fe.g.i.call(this);S(this.Di);delete this.Di;S(this.mi);delete this.mi};h("xiv.ui.layouts.interactors.Crosshairs.EventType",{});
h("xiv.ui.layouts.interactors.Crosshairs.ID_PREFIX",V.a.e.K.fe.ID_PREFIX);h("xiv.ui.layouts.interactors.Crosshairs.CSS_SUFFIX",V.a.e.K.fe.CSS_SUFFIX);h("xiv.ui.layouts.interactors.Crosshairs.prototype.vertical",V.a.e.K.fe.prototype.Di);h("xiv.ui.layouts.interactors.Crosshairs.prototype.horizontal",V.a.e.K.fe.prototype.mi);h("xiv.ui.layouts.interactors.Crosshairs.prototype.setX",V.a.e.K.fe.prototype.bJ);h("xiv.ui.layouts.interactors.Crosshairs.prototype.setY",V.a.e.K.fe.prototype.cJ);
h("xiv.ui.layouts.interactors.Crosshairs.prototype.render",V.a.e.K.fe.prototype.p);h("xiv.ui.layouts.interactors.Crosshairs.prototype.toggleVisible",V.a.e.K.fe.prototype.Ss);h("xiv.ui.layouts.interactors.Crosshairs.prototype.disposeInternal",V.a.e.K.fe.prototype.i);V.a.e.$=function(a){V.a.e.Hb.call(this);a=null!=a?a:qb(so);a=ia(a)?a:[a];A(a,function(b,c){a[c]=b.toUpperCase()});to(this,a);vo(this,a);null!=this.l.X&&this.ag();null!=this.l.Y&&this.zi();null!=this.l.Z&&this.hm();null!=this.l.V&&this.Fs();this.o()};k(V.a.e.$,V.a.e.Hb);h("xiv.ui.layouts.XyzvLayout",V.a.e.$);V.a.e.$.Ra="XyzvLayout";V.a.e.$.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var so={Li:"X",tg:"Y",yo:"Z",xt:"V"};
V.a.e.$.CSS_SUFFIX={Li:"x",tg:"y",yo:"z",xt:"v",Xa:"slider",Qk:"slider-thumb",Ow:"slider-thumb-hovered",Rk:"slider-track",dW:"slider-track-x",eW:"slider-track-y",fW:"slider-track-z",aV:"framenumber"};V.a.e.$.mt=function(a,b,c,d){this.Xa=a;this.zf=b;this.zd=c;this.Mh=d};h("xiv.ui.layouts.XyzvLayout.InteractorSet",V.a.e.$.mt);f=V.a.e.$.prototype;f.tI=0;f.Ak=function(a,b){this.l[a].Op(b);var c=this.JE(a);zh(this.b(),c);c.style.position="absolute";this.l[a].ja().zk(c);this.l[a].ja().update()};
f.JE=function(a){return vh("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+r(),"class":dk.Wb(this.constructor.gd,a.toLowerCase()+"-resizeboundary")})};function to(a,b){if(b.length>pb(so))throw Error("Invalid amount of frames "+b+". Must be "+so);A(b,function(a){if(!sb(so,a))throw Error("Invalid frame title ",a);}.bind(a))}function vo(a,b){var c="";A(b,function(a,b){c=a.toUpperCase();this.zD(new V.a.e.ge(c));zh(this.b(),this.l[c].b());R(this.l[c].b(),V.a.e.$.CSS[b])}.bind(a))}f.jU=function(a){a.VA(this.vr())};
f.VA=function(a){this.oh(function(b,c){null!=a[c]&&(b[go]=a[c].Xa,S(a[c].Xa.b()),b.b().appendChild(a[c].Xa.b()),b[ho]=a[c].zf,S(a[c].zf.b()),b.b().appendChild(a[c].zf.b()),b[jo]=a[c].zd,b.b().appendChild(a[c].zd.Di),b.b().appendChild(a[c].zd.mi))})};f.xD=function(){this.NA();wo(this);xo(this);yo(this);zo(this)};f.vr=function(){var a={};this.oh(function(b,c){a[c]=new V.a.e.$.mt(b[go],b[ho],b[jo],b[io])});return a};f.aG=function(a){a=this.l[a];return new V.a.e.$.mt(a[go],a[ho],a[jo])};
f.$F=function(a,b){return this.l[a][b]};f.XF=function(a){return this.l[a]};function wo(a){var b;a.oh(function(a,d){b=new U.D("horizontal");b.p(a.b());b.b().id=d+"_LayoutFrameSlider_"+r();a[go]=b;Xg(b.b(),null,[V.a.e.$.CSS.Xa]);Xg(b.ee,null,[V.a.e.$.CSS.Qk]);Xg(b.We,null,[V.a.e.$.CSS.Rk,dk.Wb(V.a.e.$.CSS.Rk,d.toLowerCase())]);b.bu(V.a.e.$.CSS.Ow)}.bind(a))}function xo(a){var b;a.oh(function(a){b=new V.a.e.K.tm;b.p(a.b());a[ho]=b}.bind(a))}
function yo(a){var b;a.oh(function(a){b=new V.a.e.K.Nm;b.p(a.b());a[io]=b}.bind(a))}function zo(a){var b;a.oh(function(a){b=new V.a.e.K.fe;a[jo]=b;b.p(a.b());a.b().appendChild(b.mi);a.b().appendChild(b.Di)}.bind(a))}f.oh=function(a){w(so,function(b){b=b.toUpperCase();null!=this.l[b]&&"V"!=b&&a(this.l[b],b)}.bind(this))};f.loop=function(a){w(so,function(b){b=b.toUpperCase();a(this.l[b],b)}.bind(this))};f.ag=function(){null!=this.constructor.CSS&&R(this.l.X.b(),this.constructor.CSS.Li)};
f.zi=function(){null!=this.constructor.CSS&&R(this.l.Y.b(),this.constructor.CSS.tg)};f.Wl=function(a){this.Tj();var b=ti(this.l.X.b()),c=ti(this.l.Y.b()),d=ti(this.l.Z.b());a(b,c,d,b.width+c.width+d.width-this.F.width)};f.hm=function(){null!=this.constructor.CSS&&R(this.l.Z.b(),this.constructor.CSS.yo)};f.Fs=function(){null!=this.constructor.CSS&&R(this.l.V.b(),this.constructor.CSS.xt)};f.Kg=ea;f.jj=ea;f.yR=ea;f.zv=ea;f.eg=ea;f.Qg=ea;f.fg=ea;f.co=ea;f.i=function(){V.a.e.$.g.i.call(this);delete this.tI};
h("xiv.ui.layouts.XyzvLayout.TITLE",V.a.e.$.Ra);h("xiv.ui.layouts.XyzvLayout.EventType",{});h("xiv.ui.layouts.XyzvLayout.ID_PREFIX",V.a.e.$.ID_PREFIX);h("xiv.ui.layouts.XyzvLayout.FRAMES",so);h("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",V.a.e.$.CSS_SUFFIX);h("xiv.ui.layouts.XyzvLayout.InteractorSet",V.a.e.$.mt);h("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",V.a.e.$.prototype.tI);h("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",V.a.e.$.prototype.Ak);
h("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",V.a.e.$.prototype.JE);h("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",V.a.e.$.prototype.jU);h("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",V.a.e.$.prototype.VA);h("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",V.a.e.$.prototype.xD);h("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",V.a.e.$.prototype.vr);h("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",V.a.e.$.prototype.aG);
h("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",V.a.e.$.prototype.$F);h("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",V.a.e.$.prototype.XF);h("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",V.a.e.$.prototype.oh);h("xiv.ui.layouts.XyzvLayout.prototype.loop",V.a.e.$.prototype.loop);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",V.a.e.$.prototype.ag);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",V.a.e.$.prototype.zi);
h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",V.a.e.$.prototype.hm);h("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",V.a.e.$.prototype.Fs);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",V.a.e.$.prototype.Kg);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",V.a.e.$.prototype.jj);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",V.a.e.$.prototype.yR);h("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",V.a.e.$.prototype.zv);
h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",V.a.e.$.prototype.eg);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",V.a.e.$.prototype.Qg);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",V.a.e.$.prototype.fg);h("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",V.a.e.$.prototype.co);h("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",V.a.e.$.prototype.i);V.a.e.Uc=function(){V.a.e.$.call(this,["X","Y","Z"])};k(V.a.e.Uc,V.a.e.$);h("xiv.ui.layouts.TwoDWidescreen",V.a.e.Uc);V.a.e.Uc.Ra="TwoDWidescreen";V.a.e.Uc.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";V.a.e.Uc.CSS_SUFFIX={Li:"x",tg:"y",yo:"z"};f=V.a.e.Uc.prototype;f.ag=function(){V.a.e.Uc.g.ag.call(this);this.Ak("X",["RIGHT"]);C(this.l.X.ja(),"resize",this.Kg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.zi=function(){V.a.e.Uc.g.zi.call(this);this.Ak("Y",["BOTTOM"]);C(this.l.Y.ja(),"resize",this.jj.bind(this));C(this.l.Y.ja(),"resize_end",this.o.bind(this))};f.Kg=function(){this.Wl(function(a){var b=a.width,c=Math.max(this.F.width-a.width,this.ad);A(["Y","Z"],function(a){this.l[a].b().style.left=b+"px";this.l[a].b().style.width=c+"px"}.bind(this))}.bind(this));this.Wi()};
f.jj=function(){this.Wl(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.F.height-c;this.l.Z.b().style.top=c+"px";this.l.Z.b().style.height=d+"px"}.bind(this));this.Wi()};f.o=function(){V.a.e.Uc.g.o.call(this);this.ps();this.eg();this.fg();this.Qg()};
f.ps=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=1-(this.Ha.height-this.F.height)/this.Ha.height,b=1-(this.Ha.width-this.F.width)/this.Ha.width;this.oh(function(c){frameSize=ti(c.b());c.b().style.width=Math.max(frameSize.width*b,this.ad).toString()+"px";c.b().style.height=Math.max(frameSize.height*a,this.ye).toString()+"px"}.bind(this))}};
f.eg=function(){var a=this.l.X;a.b().style.height=this.F.height.toString()+"px";Qk.zb(a.ja().Me(),{left:this.ad,width:this.F.width-2*this.ad});var b=a.ja().Ne("RIGHT");b.style.left=a.b().style.width;si(b,this.F.height);a.ja().update()};f.fg=function(){var a=this.l.Y;a.b().style.left=this.l.X.b().style.width;Qk.zb(a.ja().Me(),{top:this.ye,height:this.F.height-2*this.ye});var b=a.ja().Ne("BOTTOM");b.style.top=a.b().style.height;ri(b,parseInt(a.b().style.width));a.ja().update()};
f.Qg=function(){var a=this.l.Z;a.b().style.left=this.l.X.b().style.width;a.b().style.top=this.l.Y.b().style.height;a.b().style.height=this.F.height-parseInt(this.l.Y.b().style.height)+NaN};h("xiv.ui.layouts.TwoDWidescreen.TITLE",V.a.e.Uc.Ra);h("xiv.ui.layouts.TwoDWidescreen.EventType",{});h("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",V.a.e.Uc.ID_PREFIX);h("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",V.a.e.Uc.CSS_SUFFIX);h("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",V.a.e.Uc.prototype.ag);
h("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",V.a.e.Uc.prototype.zi);h("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",V.a.e.Uc.prototype.Kg);h("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",V.a.e.Uc.prototype.jj);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",V.a.e.Uc.prototype.o);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",V.a.e.Uc.prototype.eg);h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",V.a.e.Uc.prototype.fg);
h("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",V.a.e.Uc.prototype.Qg);V.a.e.Sd=function(a){V.a.e.$.call(this,a)};k(V.a.e.Sd,V.a.e.$);h("xiv.ui.layouts.SingleFrameLayout",V.a.e.Sd);V.a.e.Sd.Ra="SingleFrameLayout";V.a.e.Sd.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";V.a.e.Sd.prototype.ps=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=this.Ha.height*(1-(this.Ha.height-this.F.height)/this.Ha.height),b=this.Ha.width*(1-(this.Ha.width-this.F.width)/this.Ha.width);this.loop(function(c){null!=c&&qi(c.b(),Math.max(b,this.ad),Math.max(a,this.ye))}.bind(this))}};
V.a.e.Sd.prototype.o=function(){V.a.e.Sd.g.o.call(this);this.ps()};h("xiv.ui.layouts.SingleFrameLayout.TITLE",V.a.e.Sd.Ra);h("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",V.a.e.Sd.ID_PREFIX);h("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",V.a.e.Sd.prototype.o);V.a.e.Im=function(){V.a.e.Sd.call(this,"V");R(this.l.V.b(),dk.Wb(V.a.e.ge.gd,this.constructor.Ra))};k(V.a.e.Im,V.a.e.Sd);h("xiv.ui.layouts.ThreeD",V.a.e.Im);V.a.e.Im.Ra="ThreeD";V.a.e.Im.ID_PREFIX="xiv.ui.layouts.ThreeD";h("xiv.ui.layouts.ThreeD.TITLE",V.a.e.Im.Ra);h("xiv.ui.layouts.ThreeD.ID_PREFIX",V.a.e.Im.ID_PREFIX);V.a.e.Hm=function(){V.a.e.Sd.call(this,"X");R(this.l.X.b(),dk.Wb(V.a.e.ge.gd,this.constructor.Ra.toLowerCase()))};k(V.a.e.Hm,V.a.e.Sd);h("xiv.ui.layouts.Sagittal",V.a.e.Hm);V.a.e.Hm.Ra="Sagittal";V.a.e.Hm.ID_PREFIX="xiv.ui.layouts.Sagittal";h("xiv.ui.layouts.Sagittal.TITLE",V.a.e.Hm.Ra);h("xiv.ui.layouts.Sagittal.ID_PREFIX",V.a.e.Hm.ID_PREFIX);V.a.e.vb=function(){V.a.e.$.call(this)};k(V.a.e.vb,V.a.e.$);h("xiv.ui.layouts.Conventional",V.a.e.vb);V.a.e.vb.Ra="Conventional";V.a.e.vb.ID_PREFIX="xiv.ui.layouts.Conventional";V.a.e.vb.CSS_SUFFIX={Li:"x",tg:"y",yo:"z",xt:"v",$W:"v-boundary"};f=V.a.e.vb.prototype;f.ag=function(){V.a.e.vb.g.ag.call(this);this.Ak("X",["RIGHT","TOP_RIGHT"]);C(this.l.X.ja(),"resize",this.Kg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.zi=function(){V.a.e.vb.g.zi.call(this);this.Ak("Y",["RIGHT","TOP_RIGHT"]);C(this.l.Y.ja(),"resize",this.jj.bind(this));C(this.l.Y.ja(),"resize_end",this.o.bind(this))};f.hm=function(){V.a.e.vb.g.hm.call(this)};f.Fs=function(){V.a.e.vb.g.Fs.call(this);this.Ak("V","BOTTOM");C(this.l.V.ja(),"resize",this.zv.bind(this));C(this.l.V.ja(),"resize_end",this.o.bind(this))};f.Wl=function(a){this.Tj();var b=ti(this.l.X.b()),c=ti(this.l.Y.b()),d=ti(this.l.Z.b());a(b,c,d,b.width+c.width+d.width-this.F.width)};
f.Kg=function(){this.Wl(function(a,b,c){b=Math.max(this.F.width-a.width-c.width,this.ad);var d=this.F.height-a.height;ci(this.l.Y.b(),a.width,d);qi(this.l.Y.b(),b,a.height);ci(this.l.Z.b(),a.width+b,d);qi(this.l.Z.b(),c.width,a.height);qi(this.l.V.b(),this.F.width,this.F.height-a.height)}.bind(this));this.Wi()};
f.jj=function(){this.Wl(function(a,b){var c=this.F.height-b.height;ci(this.l.X.b(),0,c);qi(this.l.X.b(),a.width,b.height);ci(this.l.Z.b(),a.width+b.width,c);qi(this.l.Z.b(),this.F.width-a.width-b.width,b.height);qi(this.l.V.b(),this.F.width,this.F.height-b.height)}.bind(this));this.Wi()};f.zv=function(){this.Tj();var a=parseInt(this.l.V.b().style.height),b=this.F.height-a;w(this.l,function(c){c!==this.l.V&&Qk.zb(c.b(),{top:a,height:b})}.bind(this));this.eg();this.fg();this.Wi()};
f.o=function(){V.a.e.vb.g.o.call(this);this.co();this.BB();this.CB();this.eg();this.fg();this.Qg()};f.BB=function(){var a=parseInt(this.l.V.b().style.height),b=Math.max(this.F.height-a,this.ye);this.oh(function(c){c.b().style.top=a+"px";c.b().style.height=b+"px"})};f.CB=function(){var a,b=1-(this.Ha.width-this.F.width)/this.Ha.width;this.Ha.width!==this.F.width&&this.oh(function(c){a=ti(c.b());c.b().style.width=Math.max(a.width*b,this.ad).toString()+"px"}.bind(this))};
f.$s=function(a){var b=this.l.V.ja().mp("BOTTOM"),c=this.l[a].ja().Me(),d=ei(this.l[a].b()),e=ti(this.l[a].b());ci(c,parseInt(c.style.left),this.ye);qi(c,this.F.width-3*this.ad,this.F.height-2*this.ye);c=this.l[a].ja().Ne("RIGHT");ci(c,d.x+e.width,d.y);si(c,this.F.height-b.Fb.y);ci(this.l[a].ja().Ne("TOP_RIGHT"),d.x+e.width,d.y);this.l[a].ja().update()};f.eg=function(){Qk.zb(this.l.X.ja().Me(),{left:this.ad});this.$s("X")};
f.fg=function(){this.l.Y.b().style.left=this.l.X.b().style.width;Qk.zb(this.l.Y.ja().Me(),{left:2*this.ad});this.$s("Y")};f.Qg=function(){this.l.Z.b().style.left=(parseInt(this.l.X.b().style.width)+parseInt(this.l.Y.b().style.width)).toString()+"px"};
f.co=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=ti(this.l.V.b());qi(this.l.V.b(),this.F.width,Math.max(a.height*(1-(this.Ha.height-this.F.height)/this.Ha.height),this.ye))}ci(this.l.V.ja().Me(),this.F.width,this.ye);qi(this.l.V.ja().Me(),this.F.width-3*this.ad,this.F.height-2*this.ye);a=this.l.V.ja().Ne("BOTTOM");ci(a,0,ti(this.l.V.b()).height);ri(a,this.F.width);this.l.V.ja().update()};h("xiv.ui.layouts.Conventional.TITLE",V.a.e.vb.Ra);
h("xiv.ui.layouts.Conventional.EventType",{});h("xiv.ui.layouts.Conventional.ID_PREFIX",V.a.e.vb.ID_PREFIX);h("xiv.ui.layouts.Conventional.CSS_SUFFIX",V.a.e.vb.CSS_SUFFIX);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",V.a.e.vb.prototype.ag);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",V.a.e.vb.prototype.zi);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",V.a.e.vb.prototype.hm);h("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",V.a.e.vb.prototype.Fs);
h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",V.a.e.vb.prototype.Kg);h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Y",V.a.e.vb.prototype.jj);h("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",V.a.e.vb.prototype.zv);h("xiv.ui.layouts.Conventional.prototype.updateStyle",V.a.e.vb.prototype.o);h("xiv.ui.layouts.Conventional.prototype.updateStyle_X",V.a.e.vb.prototype.eg);h("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",V.a.e.vb.prototype.fg);
h("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",V.a.e.vb.prototype.Qg);h("xiv.ui.layouts.Conventional.prototype.updateStyle_V",V.a.e.vb.prototype.co);V.a.e.Jm=function(){V.a.e.Sd.call(this,"Z");R(this.l.Z.b(),dk.Wb(V.a.e.ge.gd,this.constructor.Ra))};k(V.a.e.Jm,V.a.e.Sd);h("xiv.ui.layouts.Transverse",V.a.e.Jm);V.a.e.Jm.Ra="Transverse";V.a.e.Jm.ID_PREFIX="xiv.ui.layouts.Transverse";h("xiv.ui.layouts.Transverse.TITLE",V.a.e.Jm.Ra);h("xiv.ui.layouts.Transverse.ID_PREFIX",V.a.e.Jm.ID_PREFIX);V.a.e.vc=function(){V.a.e.$.call(this)};k(V.a.e.vc,V.a.e.$);h("xiv.ui.layouts.FourUp",V.a.e.vc);V.a.e.vc.Ra="Four-Up";V.a.e.vc.ID_PREFIX="xiv.ui.layouts.FourUp";V.a.e.vc.CSS_SUFFIX={Li:"x",tg:"y",yo:"z",xt:"v"};f=V.a.e.vc.prototype;f.ag=function(){V.a.e.vc.g.ag.call(this);this.Ak("X",["RIGHT","TOP","TOP_RIGHT"]);C(this.l.X.ja(),"resize",this.Kg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.Kg=function(){var a=ei(this.l.X.b()),b=ti(this.l.X.b());ci(this.l.Y.b(),b.width,a.y);qi(this.l.Y.b(),this.F.width-b.width,b.height);ci(this.l.Z.b(),0,0);qi(this.l.Z.b(),b.width,a.y);ci(this.l.V.b(),b.width,0);qi(this.l.V.b(),this.F.width-b.width,a.y);a=this.l.X.ja().mp("RIGHT").Ne();a.style.top="0px";a.style.height=this.F.height.toString()+"px";this.Wi()};f.o=function(){V.a.e.vc.g.o.call(this);this.ps();this.Qg();this.co();this.eg();this.fg()};
f.ps=function(){if(this.Ha.width!==this.F.width||this.Ha.height!==this.F.height){var a=this.Ha.height*(1-(this.Ha.height-this.F.height)/this.Ha.height)/2,b=this.Ha.width*(1-(this.Ha.width-this.F.width)/this.Ha.width)/2;this.loop(function(c){qi(c.b(),Math.max(b,this.ad),Math.max(a,this.ye))}.bind(this))}};
f.eg=function(){this.l.X.b().style.top=this.l.Z.b().style.height;ci(this.l.X.ja().Me(),this.ad,this.ye);qi(this.l.X.ja().Me(),this.F.width-2*this.ad,this.F.height-2*this.ye);var a=this.l.X.ja().mp("TOP").Ne();a.style.left="0px";a.style.width=this.F.width.toString()+"px";this.l.X.ja().update();a=this.l.X.ja().mp("RIGHT").Ne();a.style.top="0px";a.style.height=this.F.height.toString()+"px"};f.fg=function(){this.l.Y.b().style.left=this.l.Z.b().style.width;this.l.Y.b().style.top=this.l.Z.b().style.height};
f.Qg=function(){};f.co=function(){this.l.V.b().style.left=this.l.Z.b().style.width};f.i=function(){V.a.e.vc.g.i.call(this)};h("xiv.ui.layouts.FourUp.TITLE",V.a.e.vc.Ra);h("xiv.ui.layouts.FourUp.EventType",{});h("xiv.ui.layouts.FourUp.ID_PREFIX",V.a.e.vc.ID_PREFIX);h("xiv.ui.layouts.FourUp.CSS_SUFFIX",V.a.e.vc.CSS_SUFFIX);h("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",V.a.e.vc.prototype.ag);h("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",V.a.e.vc.prototype.Kg);
h("xiv.ui.layouts.FourUp.prototype.updateStyle",V.a.e.vc.prototype.o);h("xiv.ui.layouts.FourUp.prototype.updateStyle_X",V.a.e.vc.prototype.eg);h("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",V.a.e.vc.prototype.fg);h("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",V.a.e.vc.prototype.Qg);h("xiv.ui.layouts.FourUp.prototype.updateStyle_V",V.a.e.vc.prototype.co);h("xiv.ui.layouts.FourUp.prototype.disposeInternal",V.a.e.vc.prototype.i);V.a.e.xc=function(){V.a.e.$.call(this,["X","Y","Z"])};k(V.a.e.xc,V.a.e.$);h("xiv.ui.layouts.TwoDRow",V.a.e.xc);V.a.e.xc.Ra="TwoDRow";V.a.e.xc.ID_PREFIX="xiv.ui.layouts.TwoDRow";V.a.e.xc.CSS_SUFFIX={Li:"x",tg:"y",yo:"z"};f=V.a.e.xc.prototype;f.ag=function(){V.a.e.xc.g.ag.call(this);this.Ak("X",["RIGHT"]);C(this.l.X.ja(),"resize",this.Kg.bind(this));C(this.l.X.ja(),"resize_end",this.o.bind(this))};
f.zi=function(){V.a.e.xc.g.zi.call(this);this.Ak("Y",["RIGHT"]);C(this.l.Y.ja(),"resize",this.jj.bind(this));C(this.l.Y.ja(),"resize_end",this.o.bind(this))};f.hm=function(){V.a.e.xc.g.hm.call(this)};f.Wl=function(a){this.Tj();var b=ti(this.l.X.b()),c=ti(this.l.Y.b()),d=ti(this.l.Z.b());a(b,c,d,b.width+c.width+d.width-this.F.width)};
f.Kg=function(){this.Wl(function(a,b,c){b=Math.max(this.F.width-a.width-c.width,this.ad);var d=this.F.height-a.height;ci(this.l.Y.b(),a.width,d);qi(this.l.Y.b(),b,a.height);ci(this.l.Z.b(),a.width+b,d);qi(this.l.Z.b(),c.width,a.height)}.bind(this));this.Wi()};
f.jj=function(){this.Wl(function(a,b){var c=this.F.height-b.height;ci(this.l.X.b(),0,c);qi(this.l.X.b(),a.width,b.height);ci(this.l.Z.b(),a.width+b.width,c);qi(this.l.Z.b(),this.F.width-a.width-b.width,b.height);qi(this.l.V.b(),this.F.width,this.F.height-b.height)}.bind(this));this.Wi()};f.o=function(){V.a.e.xc.g.o.call(this);this.CB();this.BB();this.eg();this.fg();this.Qg()};f.BB=function(){var a=this.F.height.toString()+"px";this.oh(function(b){b.b().style.height=a})};
f.CB=function(){var a,b=1-(this.Ha.width-this.F.width)/this.Ha.width;this.Ha.width!==this.F.width&&this.oh(function(c){a=ti(c.b());newWidth=c.b().style.width=Math.max(a.width*b,this.ad).toString()+"px"}.bind(this))};f.$s=function(a){var b=this.l[a].ja().Me(),c=ei(this.l[a].b()),d=ti(this.l[a].b());ci(b,parseInt(b.style.left),this.ye);qi(b,this.F.width-3*this.ad,this.F.height-2*this.ye);b=this.l[a].ja().Ne("RIGHT");ci(b,c.x+d.width,c.y);si(b,this.F.height);this.l[a].ja().update()};
f.eg=function(){Qk.zb(this.l.X.ja().Me(),{left:this.ad});this.$s("X")};f.fg=function(){this.l.Y.b().style.left=this.l.X.b().style.width;Qk.zb(this.l.Y.ja().Me(),{left:2*this.ad});this.$s("Y")};f.Qg=function(){this.l.Z.b().style.left=(parseInt(this.l.X.b().style.width)+parseInt(this.l.Y.b().style.width)).toString()+"px"};h("xiv.ui.layouts.TwoDRow.TITLE",V.a.e.xc.Ra);h("xiv.ui.layouts.TwoDRow.EventType",{});h("xiv.ui.layouts.TwoDRow.ID_PREFIX",V.a.e.xc.ID_PREFIX);
h("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",V.a.e.xc.CSS_SUFFIX);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",V.a.e.xc.prototype.ag);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",V.a.e.xc.prototype.zi);h("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",V.a.e.xc.prototype.hm);h("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",V.a.e.xc.prototype.Kg);h("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",V.a.e.xc.prototype.jj);
h("xiv.ui.layouts.TwoDRow.prototype.updateStyle",V.a.e.xc.prototype.o);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",V.a.e.xc.prototype.eg);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",V.a.e.xc.prototype.fg);h("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",V.a.e.xc.prototype.Qg);V.a.e.rm=function(){V.a.e.Sd.call(this,"Y");R(this.l.Y.b(),dk.Wb(V.a.e.ge.gd,this.constructor.Ra.toLowerCase()))};k(V.a.e.rm,V.a.e.Sd);h("xiv.ui.layouts.Coronal",V.a.e.rm);V.a.e.rm.Ra="Coronal";V.a.e.rm.ID_PREFIX="xiv.ui.layouts.Coronal";h("xiv.ui.layouts.Coronal.TITLE",V.a.e.rm.Ra);h("xiv.ui.layouts.Coronal.ID_PREFIX",V.a.e.rm.ID_PREFIX);V.a.e.Ka=function(){U.S.call(this);this.constructor.qC={};this.constructor.qC[V.a.e.vc.Ra]=V.a.e.vc;this.constructor.qC[V.a.e.vb.Ra]=V.a.e.vb;this.po={};this.Yl={};this.Hk={}};k(V.a.e.Ka,U.S);h("xiv.ui.layouts.LayoutHandler",V.a.e.Ka);V.a.e.Ka.ID_PREFIX="xiv.ui.layouts.LayoutHandler";V.a.e.Ka.CSS_SUFFIX={};V.a.e.Ka.ft=500;f=V.a.e.Ka.prototype;f.kc=null;f.tf=null;f.xz=!1;f.jl=null;f.dg=null;f.YD=!0;f.DQ=function(){return this.xz};f.kM=function(a){this.YD=a};f.NF=function(){return this.kc[this.re]};
f.OF=function(a){return this.kc[this.re].Oy(a)};f.Zs=function(){null!=this.tf&&this.tf.Zs()};f.Py=function(){return null!=this.tf?this.tf.vr():null};f.HO=function(a){return null!=this.tf?this.tf.aG(a):null};f.GO=function(a){return null!=this.tf?this.tf.XF(a):null};f.eG=function(a,b){return null!=this.tf?this.tf.$F(a,b):null};f.KI=function(a){this.Xn(a);null!=this.tf&&this.tf.NA();this.kc[a].xD();this.tf=this.kc[a]};
f.yD=function(a,b){if(void 0 in this.po)throw Error(a+" is an already used layout title!");b&&(this.po[a]=b)};f.Xn=function(a,b){if(!(a in this.po))throw Error("Invalid layout: "+a+"!");null==this.kc&&(this.kc={});a in this.kc||(this.kc[a]=new this.po[a],C(this.kc[a],"p",this.Av.bind(this)),Ao(this.kc[a]),zh(this.b(),this.kc[a].b()));this.Jv=this.re;this.re=a;this.wJ(!1===b?0:V.a.e.Ka.ft)};
function Bo(a){var b;w(a.kc[a.re].l,function(a,d){b=this.eG(d,go);null!=b&&null==a[V.a.e.Ka.Nw]&&(b.Vq(a.b()),a[V.a.e.Ka.Nw]=!0)}.bind(a))}f.Av=function(){this.dispatchEvent({type:"v"})};f.wJ=function(a){a=ma(a)&&0<=a?a:V.a.e.Ka.ft;this.Jv!=this.re&&(this.Jv?this.YD?Co(this,a):Co(this,0):(Do(this,this.re),Eo(this,this.re)))};function Fo(a,b,c){A(Ch(b.b()),function(a){null!=this.Yl[c]||(this.Yl[c]=[]);this.Yl[c].push(a)}.bind(a))}
function Go(a){w(a.Hk,function(a){zh(this.b().parentNode,a)}.bind(a))}function Ho(a,b){var c=[];w(a.Hk,function(a,e){c=Qb(c,T.EF(a,this.jl[e],this.dg[e],b))}.bind(a));return c}
function Co(a,b){var c=a.kc[a.re].l,d;Do(a,a.re);Eo(a,a.re);null!=a.jl&&wb(a.jl);null!=a.dg&&wb(a.dg);a.jl={};a.dg={};w(a.kc[a.Jv].l,function(a,b){d=a.b().cloneNode(!1);this.Hk[b]=d;Fo(this,a,b);w(this.Yl,function(a,b){A(a,function(a){S(a);null!=this.Hk[b]&&this.Hk[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var l=T.FF(a.b(),c[b].b());this.jl[b]=l.sM;this.dg[b]=l.gU}else this.jl[b]={"z-index":0},this.dg[b]={opacity:0}}.bind(a));Go(a);T.DA(Ho(a,b),a.mA.bind(a),a.nA.bind(a),a.lA.bind(a))}
f.mA=function(){this.NG();this.xz=!0;this.dispatchEvent({type:"s",vB:this.Hk})};V.a.e.Ka.Nw=r();f=V.a.e.Ka.prototype;f.nA=function(){this.dispatchEvent({type:"u",vB:this.Hk})};
f.lA=function(){var a=this.kc[this.re].l;w(a,function(a,c){null!=this.Yl[c]&&A(this.Yl[c],function(c){a.b().appendChild(c)})}.bind(this));w(a,function(a,c){null!=this.dg[c]&&Qk.zb(a.b(),this.dg[c])}.bind(this));this.kc[this.re]!==this.tf&&this.kc[this.re].VA(this.Py());Io(this);this.xz=!1;Do(this,this.re);Eo(this,this.re);Jo(this);this.dispatchEvent({type:"t",frames:a});Bo(this);this.o()};function Eo(a,b){a.kc[b].b().style.opacity=1;a.kc[b].o()}
function Do(a,b){a.kc[b].b().style.visibility="visible";a.kc[b].o()}f.NG=function(){w(this.kc,function(a){a.b().style.visibility="hidden";a.o()}.bind(this))};function Io(a){w(a.Hk,function(a){S(a);delete a})}function Ao(a){w(a.l,function(a){C(a.b(),"dblclick",function(){})})}f.xR=function(a){this.LY.push(a)};f.o=function(){V.a.e.Ka.g.o.call(this);this.kc[this.re].o()};
function Jo(a){null!=a.jl&&(w(a.jl,function(a){wb(a)}),wb(a.dg),delete a.dg);null!=a.dg&&(w(a.dg,function(a){wb(a)}),wb(a.dg),delete a.dg)}f.i=function(){V.a.e.Ka.g.i.call(this);Jo(this);delete this.Hk;wb(this.Yl);delete this.Yl;delete this.tf;U.tu(this.kc);delete this.kc;wb(this.po);delete this.po;delete this.re;delete this.Jv};h("xiv.ui.layouts.LayoutHandler.EventType",{qV:"s",pV:"t",rV:"u",Mw:"v"});h("xiv.ui.layouts.LayoutHandler.ID_PREFIX",V.a.e.Ka.ID_PREFIX);
h("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",V.a.e.Ka.CSS_SUFFIX);h("xiv.ui.layouts.LayoutHandler.ANIM_TIME",V.a.e.Ka.ft);h("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",V.a.e.Ka.Nw);h("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",V.a.e.Ka.prototype.DQ);h("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",V.a.e.Ka.prototype.kM);h("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",V.a.e.Ka.prototype.NF);h("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",V.a.e.Ka.prototype.OF);
h("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",V.a.e.Ka.prototype.Zs);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",V.a.e.Ka.prototype.Py);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",V.a.e.Ka.prototype.HO);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",V.a.e.Ka.prototype.GO);h("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",V.a.e.Ka.prototype.eG);
h("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",V.a.e.Ka.prototype.KI);h("xiv.ui.layouts.LayoutHandler.prototype.addLayout",V.a.e.Ka.prototype.yD);h("xiv.ui.layouts.LayoutHandler.prototype.setLayout",V.a.e.Ka.prototype.Xn);h("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",V.a.e.Ka.prototype.wJ);h("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",V.a.e.Ka.prototype.NG);h("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",V.a.e.Ka.prototype.xR);
h("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",V.a.e.Ka.prototype.o);h("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",V.a.e.Ka.prototype.i);function Ko(a,b){this.x=a;this.y=b}k(Ko,Yg);f=Ko.prototype;f.clone=function(){return new Ko(this.x,this.y)};f.oi=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=Yg.prototype.scale;f.uc=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.oi())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.Ld=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.fp=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};V.a.c.Ad=function(){V.a.c.w.call(this);this.yi("Display All");this.ju=vh("div",{id:"CheckboxHodler_"+r()});R(this.ju,V.a.c.Ad.CSS.dK);this.bn=new ao(!0);this.bn.cc(this.ju);this.Vn(this.bn);C(this.bn,"change",this.ue.bind(this))};k(V.a.c.Ad,V.a.c.w);h("xiv.ui.ctrl.CheckboxController",V.a.c.Ad);V.a.c.Ad.ID_PREFIX="xiv.ui.ctrl.CheckboxController";V.a.c.Ad.CSS_SUFFIX={dK:"checkboxholder"};V.a.c.Ad.prototype.xh=function(a){this.O.xh(a);this.ue()};
V.a.c.Ad.prototype.ue=function(){this.dispatchEvent({type:"o",checked:this.bn.Tl()})};V.a.c.Ad.prototype.i=function(){V.a.c.Ad.g.i.call(this);S(this.ju);delete this.ju;ad(this.bn);this.bn.k();delete this.bn};h("xiv.ui.ctrl.CheckboxController.ID_PREFIX",V.a.c.Ad.ID_PREFIX);h("xiv.ui.ctrl.CheckboxController.CSS_SUFFIX",V.a.c.Ad.CSS_SUFFIX);h("xiv.ui.ctrl.CheckboxController.prototype.setChecked",V.a.c.Ad.prototype.xh);h("xiv.ui.ctrl.CheckboxController.prototype.dispatchComponentEvent",V.a.c.Ad.prototype.ue);
h("xiv.ui.ctrl.CheckboxController.prototype.disposeInternal",V.a.c.Ad.prototype.i);U.s=function(){U.S.call(this);this.xe=vh("img",{id:"nrg.ui.Thumbnail_"+r()});zh(this.b(),this.xe);this.Og=vh("div",{id:"DisplayText_"+r()});zh(this.b(),this.Og);this.dw();this.b().className=U.s.gd;this.xe.className=U.s.CSS.lt;this.Og.className=U.s.CSS.to;Lo(this,!0);this.gs()};k(U.s,U.S);h("nrg.ui.Thumbnail",U.s);U.s.ID_PREFIX="nrg.ui.Thumbnail";
U.s.CSS_SUFFIX={lt:"image",to:"text",ZV:"selected",pt:"mouseover",mC:"image-mouseover",GC:"text-mouseover",kC:"highlight",qm:"active",lC:"image-active",FC:"text-active",sK:"hoverclone"};U.s.kt="HOVERABLE_";f=U.s.prototype;f.jE=null;f.ud=null;f.Yu=!1;f.vO=function(){return this.xe};f.AI=function(a,b){this.jE=a;this.xe.onerror=function(){this.xe.onerror="";this.xe.src=this.jE;null!=b&&b()}.bind(this)};f.mP=function(){return this.Og};
f.Ty=function(){for(var a=this.Og;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};f.gh=function(){return this.ud=this.ud?this.ud:this.b()};f.dj=function(){return this.Yu};f.UA=function(a){this.xe.src=a;this.xe.className=U.s.CSS.lt};f.Bs=function(a){this.Og.innerHTML=a};f.oI=function(){this.ud&&(this.ud.parentNode&&(this.ud=this.ud.parentNode.removeChild(this.ud)),delete this.ud,this.ud=null)};
f.cr=function(a,b){this.oI();Lo(this,!1);this.ud=b?b:this.b().cloneNode(!0);this.ud.setAttribute("id",U.s.kt+this.b().getAttribute("id"));this.ud.style.visibility="hidden";R(this.ud,U.s.CSS.sK);Lo(this,!0);a&&a.appendChild(this.ud);this.dw()};f.setActive=function(a,b){var c=this.b();(this.Yu=a)?(b&&R(c,U.s.CSS.kC),R(c,U.s.CSS.qm),R(this.Og,U.s.CSS.FC),R(this.xe,U.s.CSS.lC)):(Vg(c,U.s.CSS.kC),Vg(c,U.s.CSS.qm),Vg(this.Og,U.s.CSS.FC),Vg(this.xe,U.s.CSS.lC))};
f.o=function(a){a&&this.b()&&Qk.zb(this.b(),a)};f.OA=function(){var a=this.b(),b=this.gh();if(b!==a){var c=Ih(a,b),c=mi(a,c),d=0,d=b.getElementsByTagName("img")[0].scrollWidth+b.getElementsByTagName("div")[0].scrollWidth+25,d=d>a.clientWidth?d:a.clientWidth;Qk.zb(b,{position:"absolute",left:c.x,top:c.y,width:d,visibility:"visible"})}};f.Bv=function(){var a=this.gh();R(a,U.s.CSS.pt);R(a.childNodes[1],U.s.CSS.GC);R(a.childNodes[0],U.s.CSS.mC);a!==this.b()&&this.OA();this.dispatchEvent("w")};
f.gs=function(){var a=this.gh();a&&1<a.childNodes.length&&(Vg(a,U.s.CSS.pt),Vg(a.childNodes[1],U.s.CSS.GC),Vg(a.childNodes[0],U.s.CSS.mC),a.style.visibility=a!==this.b()?"hidden":"visible");this.dispatchEvent("x")};function Lo(a,b){var c=a.gh();b?(C(c,"mouseover",a.Bv.bind(a)),C(c,"mouseout",a.gs.bind(a))):(Zc(c,"mouseover",a.Bv.bind(a)),Zc(c,"mouseout",a.gs.bind(a)))}f.dw=function(){bd(this.gh(),"y")&&$c("y");C(this.gh(),"click",function(){this.dispatchEvent({type:"y"})}.bind(this))};
f.i=function(){U.s.g.i.call(this);ad(this);ad(this.b());null!=this.ud&&(ad(this.ud),S(this.ud),delete this.ud);S(this.xe);delete this.xe;S(this.Og);delete this.Og;delete this.KX;delete this.Yu};h("nrg.ui.Thumbnail.EventType",{pt:"w",OK:"x",LU:"y"});h("nrg.ui.Thumbnail.ID_PREFIX",U.s.ID_PREFIX);h("nrg.ui.Thumbnail.CSS_SUFFIX",U.s.CSS_SUFFIX);h("nrg.ui.Thumbnail.HOVERABLE_PREFIX",U.s.kt);h("nrg.ui.Thumbnail.prototype.getImage",U.s.prototype.vO);h("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",U.s.prototype.AI);
h("nrg.ui.Thumbnail.prototype.getTextElement",U.s.prototype.mP);h("nrg.ui.Thumbnail.prototype.getText",U.s.prototype.Ty);h("nrg.ui.Thumbnail.prototype.getHoverable",U.s.prototype.gh);h("nrg.ui.Thumbnail.prototype.isActive",U.s.prototype.dj);h("nrg.ui.Thumbnail.prototype.setImage",U.s.prototype.UA);h("nrg.ui.Thumbnail.prototype.setText",U.s.prototype.Bs);h("nrg.ui.Thumbnail.prototype.removeHoverable",U.s.prototype.oI);h("nrg.ui.Thumbnail.prototype.createHoverable",U.s.prototype.cr);
h("nrg.ui.Thumbnail.prototype.setActive",U.s.prototype.setActive);h("nrg.ui.Thumbnail.prototype.updateStyle",U.s.prototype.o);h("nrg.ui.Thumbnail.prototype.repositionHoverable",U.s.prototype.OA);h("nrg.ui.Thumbnail.prototype.onMouseOver",U.s.prototype.Bv);h("nrg.ui.Thumbnail.prototype.onMouseOut",U.s.prototype.gs);h("nrg.ui.Thumbnail.prototype.disposeInternal",U.s.prototype.i);U.wb=function(){U.S.call(this)};k(U.wb,U.S);h("nrg.ui.ScrollableContainer",U.wb);U.wb.ID_PREFIX="nrg.ui.ScrollableContainer";U.wb.CSS_SUFFIX={jL:"scrollarea",Xa:"slider",Qk:"slider-thumb",Rk:"slider-track",Ow:"slider-thumb-hovered",mL:"slider-track-hovered"};U.wb.EK=30;f=U.wb.prototype;
f.p=function(a){U.wb.g.p.call(this,a);null==this.wi&&(this.wi=vh("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+r(),"class":U.wb.CSS.jL}),this.b().appendChild(this.wi));this.D=new U.D("vertical");this.D.p(this.b());C(this.D,"q",this.Pe.bind(this));this.D.Vq(this.b());R(this.D.b(),U.wb.CSS.Xa);R(this.D.ee,U.wb.CSS.Qk);R(this.D.We,U.wb.CSS.Rk);this.D.bu(U.wb.CSS.Ow);this.D.xx(U.wb.CSS.mL);this.o();this.Pe()};f.Yg=function(a){this.Fa||this.p();zh(this.wi,a);this.Pe()};f.b=function(){return this.q};
f.hP=function(){return this.D};f.dP=function(){return this.wi};f.o=function(a){a&&Qk.zb(this.q,a)};f.Pe=function(){var a=ti(this.q).height,b=ti(this.wi).height,c=[this.D.bb(),this.D.La()],d=[0,b-a];a<b?(this.D.b().style.opacity=1,Qk.zb(this.D.ee,{height:a/b*a}),this.D.xd(!0),a=this.D.La()-this.D.ea(),c=Pk.nI(a,c,d).remappedVal,Qk.zb(this.wi,{top:-c})):(this.D.b().style.opacity=0,this.D.xd(!1),this.D.aa(100))};
f.i=function(){U.wb.g.i.call(this);null!=this.D&&(ad(this.D),this.D.k(),delete this.D);null!=this.wi&&(S(this.wi),delete this.wi)};h("nrg.ui.ScrollableContainer.ID_PREFIX",U.wb.ID_PREFIX);h("nrg.ui.ScrollableContainer.CSS_SUFFIX",U.wb.CSS_SUFFIX);h("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",U.wb.EK);h("nrg.ui.ScrollableContainer.prototype.render",U.wb.prototype.p);h("nrg.ui.ScrollableContainer.prototype.addContents",U.wb.prototype.Yg);h("nrg.ui.ScrollableContainer.prototype.getElement",U.wb.prototype.b);
h("nrg.ui.ScrollableContainer.prototype.getSlider",U.wb.prototype.hP);h("nrg.ui.ScrollableContainer.prototype.getScrollArea",U.wb.prototype.dP);h("nrg.ui.ScrollableContainer.prototype.updateStyle",U.wb.prototype.o);h("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",U.wb.prototype.Pe);h("nrg.ui.ScrollableContainer.prototype.disposeInternal",U.wb.prototype.i);U.mc=function(){U.wb.call(this)};k(U.mc,U.wb);h("nrg.ui.ScrollableZippyTree",U.mc);U.mc.ID_PREFIX="nrg.ui.ScrollableZippyTree";U.mc.CSS_SUFFIX={FL:"zippytree"};f=U.mc.prototype;f.p=function(a){U.mc.g.p.call(this,a);this.A=new U.A;R(this.A.b(),U.mc.CSS.FL);this.wi.appendChild(this.A.b());this.Es();this.D.$I(!0,.3)};f.Yg=function(a,b){this.A.Yg(a,b);a=ia(a)?a:[a];A(a,function(){}.bind(this));this.D.Vq(this.A.b())};f.sn=function(){this.A.sn()};f.$q=function(){this.A.$q()};
f.bd=function(a,b){this.A.bd(a,b)};f.FP=function(){return this.A};f.cM=function(a){this.A.br(a);this.Pe()};f.Es=function(){C(this.A,"m",this.Pe.bind(this));C(this.A,"d",this.Pe.bind(this));C(this.A,"e",this.Pe.bind(this));C(this.A,el.UK,this.Pe.bind(this))};f.o=function(a){a&&Qk.zb(this.b(),a)};f.i=function(){U.mc.g.i.call(this);null!=this.A&&(ad(this.A),this.A.k(),delete this.A)};h("nrg.ui.ScrollableZippyTree.EventType",{});h("nrg.ui.ScrollableZippyTree.ID_PREFIX",U.mc.ID_PREFIX);
h("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",U.mc.CSS_SUFFIX);h("nrg.ui.ScrollableZippyTree.prototype.render",U.mc.prototype.p);h("nrg.ui.ScrollableZippyTree.prototype.addContents",U.mc.prototype.Yg);h("nrg.ui.ScrollableZippyTree.prototype.expandAll",U.mc.prototype.sn);h("nrg.ui.ScrollableZippyTree.prototype.collapseAll",U.mc.prototype.$q);h("nrg.ui.ScrollableZippyTree.prototype.setExpanded",U.mc.prototype.bd);h("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",U.mc.prototype.FP);
h("nrg.ui.ScrollableZippyTree.prototype.addFolders",U.mc.prototype.cM);h("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",U.mc.prototype.Es);h("nrg.ui.ScrollableZippyTree.prototype.updateStyle",U.mc.prototype.o);h("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",U.mc.prototype.i);function Mo(a){hd.call(this);this.t="interactor";this.vg=a;this.gx=this.fD=this.eD=this.gD=this.dD=this.hD=null;this.Pt=!0;this.el=this.Zk=this.Oi=!1;this.je=[0,0];this.bx=new n.ha(0,0,0);this.wq=new n.ha(0,0,0);this.fH=0;this.nD=this.Lt=null;this.Tt=!1;this.sc={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}k(Mo,hd);Mo.prototype.__defineGetter__("config",function(){return this.sc});
Mo.prototype.__defineGetter__("leftButtonDown",function(){return this.Oi});Mo.prototype.__defineGetter__("middleButtonDown",function(){return this.Zk});Mo.prototype.__defineGetter__("rightButtonDown",function(){return this.el});
Mo.prototype.Ta=function(){this.sc.MOUSEWHEEL_ENABLED?(this.gx=new qn(this.vg),this.hD=C(this.gx,"mousewheel",this.hs.bind(this))):($c(this.hD),this.gx=null);this.sc.MOUSECLICKS_ENABLED?(this.dD=C(this.vg,"mousedown",this.oA.bind(this)),this.gD=C(this.vg,"mouseup",this.pA.bind(this))):($c(this.dD),$c(this.gD));this.vg.oncontextmenu=this.sc.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.sc.KEYBOARD_ENABLED?this.uk.bind(this):null;this.sc.TOUCH_ENABLED?(this.sc.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.UL=C(this.vg,"touchstart",this.oS.bind(this)),this.TL=C(this.vg,"touchmove",this.mS.bind(this)),this.SL=C(this.vg,"touchend",this.iS.bind(this))):($c(this.UL),$c(this.TL),$c(this.SL));$c(this.eD);$c(this.fD);this.eD=C(this.vg,"mousemove",this.FR.bind(this));this.fD=C(this.vg,"mouseout",this.GR.bind(this))};
Mo.prototype.oA=function(a){0==a.button?this.Oi=!0:1==a.button?this.Zk=!0:2==a.button&&(this.el=!0);eval("this.onMouseDown("+this.Oi+","+this.Zk+","+this.el+")");No(this);a.preventDefault()};Mo.prototype.ER=function(){};Mo.prototype.pA=function(a){0==a.button?this.Oi=!1:1==a.button?this.Zk=!1:2==a.button&&(this.el=!1);eval("this.onMouseUp("+this.Oi+","+this.Zk+","+this.el+")");No(this);a.preventDefault()};Mo.prototype.__defineGetter__("mousePosition",function(){return this.je});f=Mo.prototype;
f.JR=function(){};f.GR=function(a){this.Pt=!1;this.sc.KEYBOARD_ENABLED&&(window.onkeydown=null);this.el=this.Zk=this.Oi=!1;No(this);this.bx=new n.ha(0,0,0);a.preventDefault()};f.UH=function(){};f.oS=function(a){a.preventDefault();a.Ta(a.Zd.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.wq=new n.ha(a.clientX,a.clientY,0);this.nD=setTimeout(this.kS.bind(this,a),500)};f.nS=function(){};
f.kS=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new ye;a.Ni=!0;a.Nh=this instanceof Oo;this.dispatchEvent(a);this.Ut=!0};f.jS=function(){};function Po(a){clearTimeout(a.nD);if(a.Ut){var b=new ye;b.Ni=!1;b.Nh=a instanceof Oo;a.dispatchEvent(b)}a.Ut=!1}f.iS=function(a){a.preventDefault();eval("this.onTouchEnd()");Po(this)};f.hS=function(){};
f.mS=function(a){a.preventDefault();this.Ut||Po(this);this.touchmoveEvent=a=a.Zd;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new n.ha(c[0],c[1],0);var b=c[0]>3*this.vg.clientWidth/4,d=c[0]<this.vg.clientWidth/4,e=c[1]<this.vg.clientHeight/4,c=c[1]>3*this.vg.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.wq.Ld(a);this.wq=a.clone();if(this.Ut)a=new we,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.Ee=e,this.dispatchEvent(a);
else if(this instanceof Qo&&(b||d))a=new ze,a.Yc=0>e.y,this.dispatchEvent(a);else if(this instanceof Oo||c)e.scale(3),a=new xe,a.Ee=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new n.ha(a[0],a[1],0),b=new n.ha(b[0],b[1],0),e=wd(a,b),b=e-this.fH,this.fH=e,this.wq.Ld(a),this.wq=a.clone(),10<Math.abs(b)&&(a=new ye,a.Ni=0<b,a.Nh=this instanceof Oo,this.dispatchEvent(a)))};f.lS=function(){};
f.FR=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Pt=!0;this.sc.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.uk.bind(this));a.preventDefault();var b=a.shiftKey;this.Tt=b;this.je=[a.offsetX,a.offsetY];var c=new n.ha(this.je[0],this.je[1],0);a=this.bx.Ld(c);this.bx=c.clone();this.sc.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Zk||this.Oi||this.el)&&No(this),this.Lt=setTimeout(function(){No(this);var a=new Ae;a.Yt=c.x;a.Zt=
c.y;this.dispatchEvent(a);this.Lt=null}.bind(this),300));0!=a.oi()&&(this.Oi&&!b?(b=new xe,a.scale(3),b.Ee=a,this.dispatchEvent(b)):this.Zk||this.Oi&&b?(b=new we,b.Ee=a,this.dispatchEvent(b)):this.el&&(b=new ye,b.Ni=0<a.y,b.Nh=!1,this.dispatchEvent(b)))};function No(a){a.Lt&&clearTimeout(a.Lt);a.dispatchEvent(new Be)}f.KR=function(){};f.hs=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");No(this);a.preventDefault()};f.wR=function(){};
f.uk=function(a){if(this.Pt){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");No(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,g=a.keyCode;82!=g||b||c||d||e?37<=g&&40>=g&&(a.preventDefault(),e?a=new we:b?a=new ye:(a=new xe,this instanceof Qo&&(a=new ze)),a&&(c=new n.ha(0,0,0),37==g?(c.x=5,a.Yc=!1,b&&(a.Yc=!0,a.Ni=!0,a.Nh=!1)):39==g?(c.x=-5,a.Yc=!0,b&&(a.Ni=!1,a.Nh=!1)):38==g?(c.y=5,a.Yc=!0,b&&(a.Ni=!0,a.Nh=!0)):40==g&&(c.y=-5,a.Yc=!1,b&&(a.Ni=!1,a.Nh=!0)),a.Ee=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new Ce,this.dispatchEvent(a))}};h("X.interactor",Mo);h("X.interactor.prototype.init",Mo.prototype.Ta);h("X.interactor.prototype.onMouseDown",Mo.prototype.ER);h("X.interactor.prototype.onMouseUp",Mo.prototype.JR);h("X.interactor.prototype.onMouseMove",Mo.prototype.UH);h("X.interactor.prototype.onMouseWheel",Mo.prototype.KR);h("X.interactor.prototype.onKey",Mo.prototype.wR);h("X.interactor.prototype.onTouchStart",Mo.prototype.nS);h("X.interactor.prototype.onTouchMove",Mo.prototype.lS);
h("X.interactor.prototype.onTouchEnd",Mo.prototype.hS);h("X.interactor.prototype.onTouchHover",Mo.prototype.jS);function Qo(a){Mo.call(this,a);this.t="interactor2D"}k(Qo,Mo);Qo.prototype.hs=function(a){Qo.g.hs.call(this,a);var b=new ze;null==a.pf&&(a.pf=0);b.Yc=0>a.pf;this.dispatchEvent(b)};function Ro(a,b){if(!ma(a)||!ma(b))throw Error("A camera needs valid width and height values.");hd.call(this);this.t="camera";this.Qm=new n.ha(0,100,0);this.Do=new n.ha(0,0,0);this.Yc=new n.ha(0,0,1);this.Db=a;this.lb=b;this.na=this.mv(this.Qm,this.Do)}k(Ro,hd);Ro.prototype.observe=function(a){if(!(null!=a&&a instanceof Mo))throw Error("Could not observe the interactor.");C(a,ie,this.TR.bind(this));C(a,he,this.NR.bind(this));C(a,je,this.zS.bind(this))};
Ro.prototype.TR=function(a){if(!(a instanceof xe))throw Error("Received no valid rotate event.");this.rotate(a.Ee)};Ro.prototype.zS=function(a){if(!(a instanceof ye))throw Error("Received no valid zoom event.");a.Ni?this.dq(a.Nh):this.eq(a.Nh)};Ro.prototype.NR=function(a){if(!(a instanceof we))throw Error("Received no valid pan event.");this.Hv(a.Ee)};Ro.prototype.__defineGetter__("view",function(){return this.na});
Ro.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.na=a});Ro.prototype.__defineGetter__("position",function(){return[this.Qm.x,this.Qm.y,this.Qm.z]});Ro.prototype.__defineSetter__("position",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid position.");this.Qm=new n.ha(a[0],a[1],a[2]);this.reset()});Ro.prototype.__defineGetter__("focus",function(){return[this.Do.x,this.Do.y,this.Do.z]});
Ro.prototype.__defineSetter__("focus",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid focus");this.Do=new n.ha(a[0],a[1],a[2]);this.reset()});Ro.prototype.__defineGetter__("up",function(){return[this.Yc.x,this.Yc.y,this.Yc.z]});Ro.prototype.__defineSetter__("up",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid up vector.");this.Yc=new n.ha(a[0],a[1],a[2]);this.reset()});f=Ro.prototype;f.reset=function(){this.na=this.mv(this.Qm,this.Do)};
f.rotate=function(a){if(ia(a)&&2==a.length)a=new n.ha(a[0],a[1],0);else if(!(a instanceof n.ha))throw Error("Invalid distance vector for rotate operation.");return a};f.Hv=function(a){if(ia(a)&&2==a.length)a=new n.ha(a[0],a[1],0);else if(!(a instanceof n.ha))throw Error("Invalid distance vector for pan operation.");this.na[12]-=a.x;this.na[13]+=a.y};f.dq=function(a){var b=20;null!=a&&!a&&(b=1);this.na[14]+=b};f.eq=function(a){var b=20;null!=a&&!a&&(b=1);this.na[14]-=b};
f.mv=function(a,b){if(!(a instanceof n.ha&&b instanceof n.ha))throw Error("3D vectors required for calculating the view.");return n.B.Fr()};h("X.camera",Ro);h("X.camera.prototype.pan",Ro.prototype.Hv);h("X.camera.prototype.rotate",Ro.prototype.rotate);h("X.camera.prototype.zoomIn",Ro.prototype.dq);h("X.camera.prototype.zoomOut",Ro.prototype.eq);function So(a){function b(a,b,d){b=b*Math.PI*2;b=Om(Pm(q,Math.cos(b)),Pm(p,Math.sin(b)));a=Om(Om(c,Pm(e,a)),Pm(b,g));d=Om(Pm(b,1-Math.abs(d)),Pm(l,d));return new Tm(a,d)}this.Cc=[];a=a||{};var c=new Nm(a.start||[0,-1,0]),d=new Nm(a.end||[0,1,0]),e=Qm(d,c),g=a.vi||1;a=a.eb||16;for(var l=Rm(e),m=.5<Math.abs(l.y()),q=Rm((new Nm(m,!m,0)).jn(l)),p=Rm(q.jn(l)),m=new Tm(c,Sm(l)),d=new Tm(d,Rm(l)),t=[],s=0;s<a;s++){var u=s/a,v=(s+1)/a;t.push(new Vm([m,b(0,u,-1),b(0,v,-1)]));t.push(new Vm([b(0,v,0),b(0,u,
0),b(1,u,0),b(1,v,0)]));t.push(new Vm([d,b(1,v,1),b(1,u,1)]))}return fn(t)}k(So,en);function To(){be.call(this);this.t="cylinder";this.qx=[-10,-10,-10];this.$w=[10,10,10];this.Rm=10;this.me=32;za(this,new gn)}k(To,be);To.prototype.__defineGetter__("start",function(){return this.qx});To.prototype.__defineSetter__("start",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid start");this.qx=a});To.prototype.__defineGetter__("end",function(){return this.$w});
To.prototype.__defineSetter__("end",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid end");this.$w=a});To.prototype.__defineGetter__("radius",function(){return this.Rm});To.prototype.__defineSetter__("radius",function(a){if(!ma(a))throw Error("Invalid radius.");this.Rm=a});To.prototype.Ba=function(){jn(this,new So({start:this.qx,end:this.$w,vi:this.Rm,eb:this.me}));To.g.Ba.call(this)};h("X.cylinder",To);h("X.cylinder.prototype.modified",To.prototype.Ba);function nn(a){F.call(this);this.t="labelmap";this.Pj=a;this.px=new Float32Array([-255,-255,-255,-255])}k(nn,F);nn.prototype.Ba=function(){var a=new ce;a.qb=this;this.dispatchEvent(a);this.Pj.Ba()};nn.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(ia(a)&&4==a.length)b=a;else{if(!this.gf)throw Error("No colortable assigned.");b=this.gf.If.get(a).slice(1,5)}this.px=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
h("X.labelmap",nn);function Uo(a){this.Cc=[];a=a||{};var b=new Nm(a.Si||[0,0,0]),c=a.vi?a.vi.length?a.vi:[a.vi,a.vi,a.vi]:[1,1,1];return fn([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Vm(a[0].map(function(e){e=new Nm(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new Tm(e,new Nm(a[1]))}))}))}k(Uo,en);function Vo(){be.call(this);this.t="cube";this.xb=[0,0,0];this.ex=this.dx=this.cx=20;this.Po=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];za(this,new gn)}k(Vo,be);Vo.prototype.__defineGetter__("center",function(){return this.xb});Vo.prototype.__defineSetter__("center",function(a){if(null==a||!ia(a)||3!=a.length)throw Error("Invalid center");this.xb=a});Vo.prototype.__defineGetter__("lengthX",function(){return this.cx});
Vo.prototype.__defineSetter__("lengthX",function(a){if(!ma(a))throw Error("Invalid lengthX.");this.cx=a});Vo.prototype.__defineGetter__("lengthY",function(){return this.dx});Vo.prototype.__defineSetter__("lengthY",function(a){if(!ma(a))throw Error("Invalid lengthY.");this.dx=a});Vo.prototype.__defineGetter__("lengthZ",function(){return this.ex});Vo.prototype.__defineSetter__("lengthZ",function(a){if(!ma(a))throw Error("Invalid lengthZ.");this.ex=a});
Vo.prototype.Ba=function(){jn(this,new Uo({Si:this.xb,vi:[this.cx/2,this.dx/2,this.ex/2]}));Vo.g.Ba.call(this)};h("X.cube",Vo);h("X.cube.prototype.modified",Vo.prototype.Ba);function Oo(a){Mo.call(this,a);this.t="interactor3D"}k(Oo,Mo);Oo.prototype.hs=function(a){Oo.g.hs.call(this,a);var b=new ye;null==a.pf&&(a.pf=0);b.Ni=0>a.pf;b.Nh=!0;this.dispatchEvent(b)};function Wo(a){hd.call(this);this.t="array";this.Nb=[];this.UC=a}k(Wo,hd);function Xo(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}Wo.prototype.add=function(a){this.Nb.push(a);return!0};Wo.prototype.remove=function(a){a=this.Nb.indexOf(a);-1<a&&this.Nb.splice(a,1);return!0};Wo.prototype.clear=function(){this.Nb.length=0};
function Yo(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),Yo(a,b,d),Yo(a,d,c);b<d;++b)if(0<a.UC(a.Nb[b],a.Nb[d])){var e=a.Nb[b];a.Nb[b]=a.Nb[d];for(var g=a,l=d,m=c;l+1<m&&0>g.UC(g.Nb[l+1],e);){var q=g,p=l+1,t=q.Nb[l];q.Nb[l]=q.Nb[p];q.Nb[p]=t;++l}g.Nb[l]=e}}Wo.prototype.sort=function(){Yo(this,0,this.Nb.length)};function Zo(a,b){Ro.call(this,a,b);this.t="camera2D"}k(Zo,Ro);Zo.prototype.rotate=function(a){a=Zo.g.rotate.call(this,a);var b=new ve;0<a.x?b.sx--:0>a.x&&b.sx++;0<a.y?b.fx++:0>a.y&&b.fx--;this.dispatchEvent(b)};Zo.prototype.dq=function(a){var b=20;null!=a&&!a&&(b=.02);this.na[14]+=b};Zo.prototype.eq=function(a){var b=20;null!=a&&!a&&(b=.02);this.na[14]-=b};
Zo.prototype.Hv=function(a){if(ia(a)&&2==a.length)a=new n.ha(a[0],a[1],0);else if(!(a instanceof n.ha))throw Error("Invalid distance vector for pan operation.");this.na[12]-=a.x/this.na[14];this.na[13]+=a.y/this.na[14]};function $o(a,b){Ro.call(this,a,b);this.t="camera3D";this.XC=45;this.kx=n.B.Hz(n.B.Fr(),this.XC,a/b,1,1E4)}k($o,Ro);$o.prototype.rotate=function(a){a=$o.g.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new n.ha(this.na[1],this.na[5],this.na[9]),d=new n.ha(this.na[0],this.na[4],this.na[8]);c.normalize();d.normalize();n.B.rotate(this.na,b,c.x,c.y,c.z);n.B.rotate(this.na,a,d.x,d.y,d.z)};$o.prototype.mv=function(a,b){var c=$o.g.mv.call(this,a,b);n.B.sH(c,a,b,this.Yc);return c};
function ap(a,b,c,d){var e=new Float32Array(4),g=new Float32Array(4),l=new Float32Array(16),m=new Float32Array(16);new Float32Array(16);n.B.multiply(a.kx,a.na,m);n.B.uc(m,l);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;n.B.FH(l,e,g);g[3]=1/g[3];g[0]*=g[3];g[1]*=g[3];g[2]*=g[3];return g}h("X.camera3D",$o);function bp(a){aj.call(this,a);this.lj=new tn;C(this.lj,"change",this.JP,!1,this)}k(bp,aj);var cp={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=bp.prototype;f.C=function(){this.Pg=this.gn();var a=cp[this.jb];this.q=this.da().C("div",a,this.Pg);dp(this);ep(this);fp(this)};f.Pb=function(){bp.g.Pb.call(this);lc&&7>sc&&C(this.b(),"resize",this.yj,!1,this);this.yj();var a=this.b();zj(a,"progressbar");Aj(a,"live","polite")};f.Id=function(){bp.g.Id.call(this);gp(this)};
f.gn=function(){return this.da().C("div","progress-bar-thumb")};function gp(a){lc&&7>sc&&Zc(a.b(),"resize",a.yj,!1,a)}f.Of=function(a){bp.g.Of.call(this,a);tj(this.b(),cp[this.jb]);a=mh(null,"progress-bar-thumb",this.b())[0];a||(a=this.gn(),this.b().appendChild(a));this.Pg=a};f.ea=function(){return this.lj.ea()};f.aa=function(a){this.lj.aa(a);this.b()&&dp(this)};function dp(a){Aj(a.b(),"valuenow",a.ea())}f.bb=function(){return this.lj.bb()};f.$f=function(a){this.lj.$f(a);this.b()&&ep(this)};
function ep(a){Aj(a.b(),"valuemin",a.bb())}f.La=function(){return this.lj.La()};f.Te=function(a){this.lj.Te(a);this.b()&&fp(this)};function fp(a){Aj(a.b(),"valuemax",a.La())}f.jb="horizontal";f.JP=function(){this.yj();this.dispatchEvent("change")};
f.yj=function(){if(this.Pg){var a=this.bb(),b=this.La(),a=(this.ea()-a)/(b-a),b=Math.round(100*a);"vertical"==this.jb?lc&&7>sc?(this.Pg.style.top=0,this.Pg.style.height="100%",b=this.Pg.offsetHeight,a=Math.round(a*b),this.Pg.style.top=b-a+"px",this.Pg.style.height=a+"px"):(this.Pg.style.top=100-b+"%",this.Pg.style.height=b+"%"):this.Pg.style.width=b+"%"}};
f.Bk=function(a){if(this.jb!=a){var b=cp[this.jb],c=cp[a];this.jb=a;if(a=this.b())sj(a,b)&&(vj(a,b),tj(a,c)),b=this.Pg.style,"vertical"==this.jb?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.yj()}};f.$c=function(){return this.jb};f.i=function(){gp(this);bp.g.i.call(this);this.Pg=null;this.lj.k()};f.fk=function(){return this.lj.fk()};f.qj=function(a){this.lj.qj(a)};function hp(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");bp.call(this);this.t="progressbar";this.Xg=a;this.jx="";this.It=this.Oj=null;this.Om=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Om=[c,d,e];this.aa(b);this.hz()}k(hp,bp);
hp.prototype.hz=function(){var a=$h(this.Xg,"position");if("static"==a||""==a)this.jx=this.Xg.style.position,this.Xg.style.position="relative";var a=document.getElementsByTagName("head")[0],b=vh("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Om[0])),d=document.createTextNode(String(this.Om[1])),e=document.createTextNode(String(this.Om[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Oj=b;this.p(this.Xg);a=this.b();a.style.position=
"absolute";a.style.top=(this.Xg.clientHeight-5)/2+"px";a.style.left=(this.Xg.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};hp.prototype.bp=function(){var a=this.b().style.top,b=this.b().style.left;S(this.b());var c=new hp(this.Xg,100),d=c.b();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");Dh(d).classList.add("progress-bar-thumb-done");this.It=c};
hp.prototype.Pr=function(){this.Oj&&S(this.Oj);this.b()&&S(this.b());this.It&&S(this.It.b());this.It=this.Oj=null;this.jx&&(this.Xg.style.position=this.jx)};function ip(){hd.call(this);this.t="renderer";this.Za=window.document.body;this.Db=this.Za.clientWidth;this.lb=this.Za.clientHeight;this.yc=this.Na=this.Fd=null;this.Pi=new Wo(ee);this.kf=[];this.Ic=null;this.Qt=this.xq=this.Ot=!1;this.f=this.cl=this.Lf=null;this.sc={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.Xw=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}k(ip,hd);f=ip.prototype;
f.eA=function(){window.cancelAnimationFrame(this.Xw);this.sc.PROGRESSBAR_ENABLED&&(this.cl=new hp(this.Za,3))};f.fA=function(){this.sc.PROGRESSBAR_ENABLED&&this.cl&&(this.cl.bp(),this.Ft=Wf(function(){this.Ft=null;this.cl&&(this.cl.Pr(),this.cl=null);this.xq=this.Qt=!0;this.p()}.bind(this),700))};f.gA=function(a){this.cl&&this.cl.aa(100*a.Vm)};f.Nn=function(a){this.Lf&&this.Lf.aa(100*a.Vm)};f.DR=function(a){null!=a&&a instanceof ce&&a.qb&&this.Aj(a.qb)};
f.PR=function(a){null!=a&&a instanceof de&&a.qb&&this.remove(a.qb)};f.kA=function(a){if(!(null!=a&&a instanceof Ae))throw Error("Invalid hover event.");};f.On=function(){var a=lh(this.Za);this.Db=a.clientWidth;this.lb=a.clientHeight;a=lh(this.Fd);a.width=this.Db;a.height=this.lb;"renderer3D"==this.t&&(this.f.viewport(0,0,this.Db,this.lb),this.Na.kx=n.B.Hz(n.B.Fr(),this.Na.XC,this.Fd.width/this.Fd.height,1,1E4))};
f.Kp=function(a){if(!(null!=a&&a instanceof ze))throw Error("Invalid scroll event.");};ip.prototype.__defineGetter__("config",function(){return this.sc});ip.prototype.__defineGetter__("interactor",function(){return this.yc});ip.prototype.__defineGetter__("camera",function(){return this.Na});ip.prototype.__defineGetter__("loadingCompleted",function(){return this.xq});ip.prototype.__defineGetter__("container",function(){return this.Za});
ip.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;ka(b)&&(b=lh(a));if(!Gh(b))throw Error("Could not find the given container.");this.Za=b});f=ip.prototype;f.ms=function(){this.Na.reset()};function jp(a){a.sc.PROGRESSBAR_ENABLED&&a.Lf&&!a.Ft&&(a.Lf.bp(),a.Ft=Wf(function(){this.Ft=null;this.Lf&&(this.Lf.Pr(),this.Lf=null);this.p()}.bind(a),700))}
f.Ta=function(a){var b=vh("canvas");this.Za.appendChild(b);this.Db=this.Za.clientWidth;this.lb=this.Za.clientHeight;b.width=this.Db;b.height=this.lb;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.Za.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Ic=new Mf;C(this.Ic,pe,this.Nn.bind(this));this.Fd=b;this.f=c;b=new Oo(this.Fd);"2d"==a&&(b=new Qo(this.Fd));b.Ta();C(b,le,this.ms.bind(this));C(b,qe,this.kA.bind(this));C(b,ke,this.Kp.bind(this));this.yc=b;b=new $o(this.Db,this.lb);"2d"==a&&(b=new Zo(this.Db,this.lb));b.observe(this.yc);this.Na=b;C(window,"resize",this.On,!1,this)};f.add=function(a){(a instanceof Vo||a instanceof ln||a instanceof To)&&a.Ba();this.kf.push(a);this.Aj(a)};
f.remove=function(a){if(!this.Fd||!this.f)throw Error("The renderer was not initialized properly.");null!=a&&ad(a);return!1};f.Aj=function(a){if(!this.Fd||!this.f)throw Error("The renderer was not initialized properly.");null!=a&&(bd(a,ne)||C(a,ne,this.DR.bind(this)),bd(a,oe)||C(a,oe,this.PR.bind(this)),bd(a,se)||C(a,se,this.eA.bind(this)),bd(a,ue)||C(a,ue,this.gA.bind(this)),bd(a,te)||C(a,te,this.fA.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.Pi.Nb,c=b.length,d=0,d=0;d<c;d++)if(b[d].Fe==a)return b[d];return null};
f.p=function(){if(!this.Fd||!this.f)throw Error("The renderer was not initialized properly.");if(null==this.kD){if(this.Ic.Io.Zx(!1)){if(this.sc.PROGRESSBAR_ENABLED&&!this.Lf&&(this.Lf=new hp(this.Za,3)),this.Qt=this.xq=!1,this.kD=Wf(function(){this.kD=null;this.p()}.bind(this),100),!this.sc.INTERMEDIATE_RENDERING)return}else if(this.xq||this.Qt||(this.Qt=!0,eval("this.onShowtime()"),this.xq=!0),this.Lf){jp(this);return}this.Xw=window.requestAnimationFrame(this.p.bind(this));eval("this.onRender()");
this.mj(!1,!0)}};f.uA=function(){};f.WH=function(){};f.mj=function(){};f.bh=function(){window.cancelAnimationFrame(this.Xw);this.Ic&&(delete this.Ic,this.Ic=null);this.Lf&&(this.Lf.Pr(),delete this.Lf,this.Lf=null);this.Pi.clear();delete this.Pi;this.kf.length=0;delete this.kf;delete this.Ic;this.Ic=null;delete this.Na;this.Na=null;delete this.yc;this.yc=null;delete this.f;this.f=null;S(this.Fd);delete this.Fd;this.Fd=null};function kp(){ip.call(this);this.t="renderer2D";this.le=null;this.hf=-1;this.Kf=[];this.bD=this.Mt=this.YC=this.Kt=null;this.Mo=this.Oo=this.Sm=this.Tm=0;this.Jc=this.Kc=this.qc=this.oc=this.VC=-1;this.cD=new Float32Array([-255,-255,-255,-255]);this.jD=!0}k(kp,ip);kp.prototype.tA=function(){};kp.prototype.tS=function(){};kp.prototype.Kp=function(a){kp.g.Kp.call(this,a);var b=this.kf[0];if(b){var c="",c=0==this.hf?"indexX":1==this.hf?"indexY":"indexZ";b[c]=a.Yc?b[c]+1:b[c]-1;eval("this.onScroll();")}};
kp.prototype.uS=function(a){var b=this.kf[0];if(b){var c=b.Jc-b.Kc,d=c/2,e=parseInt(c+c/15*-a.sx,10);a=parseInt(d+d/15*a.fx,10);c==e&&e++;d==a&&a++;b.Kc-=parseInt(d-a,10);b.Kc-=parseInt(c-e,10);b.Kc=Math.max(b.Kc,b.Jf);b.Jc-=parseInt(d-a,10);b.Jc+=parseInt(c-e,10);b.Jc=Math.min(b.Jc,b.Wc);eval("this.onWindowLevel();")}};kp.prototype.__defineGetter__("orientation",function(){return this.le});
kp.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.hf=2):"SAGITTAL"==a?(a="X",this.hf=0):"CORONAL"==a&&(a="Y",this.hf=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.le=a});kp.prototype.__defineGetter__("radiological",function(){return this.jD});kp.prototype.__defineSetter__("radiological",function(a){this.jD=a});f=kp.prototype;
f.Ta=function(){if(!this.le)throw Error("No 2D orientation set.");kp.g.Ta.call(this,"2d");this.f.fillStyle="rgba(50,50,50,0)";this.f.fillRect(0,0,this.Fd.width,this.Fd.height);this.Kt=vh("canvas");this.Mt=vh("canvas");C(this.Na,me,this.uS.bind(this))};f.On=function(){kp.g.On.call(this);lp(this)};f.ms=function(){kp.g.ms.call(this);lp(this);var a=this.kf[0];a&&(a.Jc=a.Wc,a.Kc=a.Jf)};
f.Aj=function(a){kp.g.Aj.call(this,a);var b=!1;this.get(a.Fe)&&(b=!0);if(a instanceof F){var c=a.Ca,d=a.r,e=a.gf;if(null!=d&&null!=d.Ca&&d.Ca.T)this.Aj(d);else if(null!=e&&null!=e.Ca&&e.Ca.T)this.Ic.load(e,a);else{if(null!=c&&ia(c))if(null!=a.Ej){if(a.Ej.Wr!=c.length||b&&!a.T)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Ic.load(c[b],a);return}else if(null!=c&&c.T){this.Ic.load(a,a);return}c=this.le;this.hf="X"==c?0:"Y"==c?1:2;this.me=a.m[this.hf].m;e=null;e=0==this.hf?a.indexX:1==this.hf?a.indexY:
a.indexZ;c=a.m[this.hf].m[e].aD;d=a.m[this.hf].m[e].$C;this.Oo=a.m[this.hf].m[e].Qj;this.Mo=a.m[this.hf].m[e].Jj;this.Tm=c;this.Sm=d;e=this.Kt;e.width=c;e.height=d;var g=this.Mt;g.width=c;g.height=d;this.YC=e.getContext("2d");this.bD=g.getContext("2d");b||(this.Pi.add(a),lp(this))}}};function lp(a){var b=Math.min(a.Db/(a.Tm*a.Oo),a.lb/(a.Sm*a.Mo));a.Na.na[14]=b}f.Ev=function(){};
f.UJ=function(a,b){var c=this.kf[0],d=this.Na.na,e=null,g=this.Tm,l=this.Sm,m=null,q=null;if("Y"==this.le)e=this.me[parseInt(c.indexY,10)],m=e.Qj,q=e.Jj,this.Kf[0]="red",this.Kf[1]="blue";else if("Z"==this.le)e=this.me[parseInt(c.indexZ,10)],m=e.Qj,q=e.Jj,this.Kf[0]="red",this.Kf[1]="green";else{e=this.me[parseInt(c.indexX,10)];m=e.Jj;q=e.Qj;this.Kf[0]="green";this.Kf[1]="blue";var p=g,g=l,l=p}var t=1*d[12],s=-1*d[13],p=Math.max(d[14],.6),d=[this.Db/2,this.lb/2],m=g*m*p,q=l*q*p,u=d[0]-m/2,d=d[1]-
q/2,u=u+t*p,d=d+s*p;return a>u&&a<u+m&&b>d&&b<d+q?(t=(a-u)/m*g,s=(b-d)/q*l,q=e.$L[4],"X"==this.le?(p=g-t,t=s,s=p):"Y"==this.le?t=g-t:"Z"==this.le&&(t=g-t,s=l-s),t=e.ZL+t*e.Qj,s=e.PL+s*e.Jj,t=Gd(t,s,q,1),g=Hd(),Td(e.IL,t,g),l=Hd(),Td(e.JL,t,l),e=Math.round((c.h[0].P[0]*l[0]+c.h[0].P[1]*l[1]+c.h[0].P[2]*l[2]+c.h[0].ix)/c.h[0].No),e>=c.h[0].Aa?e=c.h[0].Aa-1:0>e&&(e=0),t=Math.round((c.h[1].P[0]*l[0]+c.h[1].P[1]*l[1]+c.h[1].P[2]*l[2]+c.h[1].ix)/c.h[1].No),t>=c.h[1].Aa?t=c.h[1].Aa-1:0>t&&(t=0),s=Math.round((c.h[2].P[0]*
l[0]+c.h[2].P[1]*l[1]+c.h[2].P[2]*l[2]+c.h[2].ix)/c.h[2].No),s>=c.h[2].Aa?s=c.h[2].Aa-1:0>s&&(s=0),[[e,t,s],[g[0],g[1],g[2]],[l[0],l[1],l[2]]]):null};
f.mj=function(a,b){kp.g.mj.call(this,a,b);if(0!=this.Pi.Nb.length){var c=this.kf[0],d=null,d=0==this.hf?c.indexX:1==this.hf?c.indexY:c.indexZ,e=this.me[parseInt(d,10)].aD,g=this.me[parseInt(d,10)].$C;this.Oo=this.me[parseInt(d,10)].Qj;this.Mo=this.me[parseInt(d,10)].Jj;this.Tm=e;this.Sm=g;var l=this.Db,m=this.lb,q=this.Na.na;this.f.save();this.f.clearRect(-l,-m,2*l,2*m);this.f.restore();var p=Math.max(q[14],.1);this.f.setTransform(p,0,0,p,0,0);var t=1*q[12],q=-1*q[13],s=null;c.r&&(s=c.r.px);var u=
this.me[parseInt(d,10)],v=u.Cb.dl,u=u.r,D=null;u&&(D=u.dl);var B=this.Tm,I=this.Sm,G=this.YC,Q=this.bD,M=G.getImageData(0,0,B,I),L=Q.getImageData(0,0,B,I),J=M.data,H=L.data,O=J.length,N=c.Wc,Y=c.oc,K=c.qc,y=c.Kc/N,z=c.Jc/N;if(this.VC!=d||this.oc!=Y||this.qc!=K||this.Kc!=y||this.Jc!=z||s&&!Xo(s,this.cD,0)){var ga=this.Kt;ga.width=e;ga.height=g;ga=this.Mt;ga.width=e;ga.height=g;e=0;do{var ga=[0,0,0,0],g=[0,0,0,0],Z=v[e]/255*N,E=v[e],E=(E/255-y)/(z-y),E=255*E;Z>=Y&&Z<=K&&(ga=new ud(c.$k[0],c.$k[1],c.$k[2]),
ga=(new ud(c.Yk[0],c.Yk[1],c.Yk[2])).scale(E).add(ga.scale(255-E)),ga=[Math.floor(ga.x),Math.floor(ga.y),Math.floor(ga.z),255],u&&(-255==s[3]?g=[D[e],D[e+1],D[e+2],D[e+3]]:Xo(s,D,e)&&(g=[D[e],D[e+1],D[e+2],D[e+3]])));"X"==this.le?(J[e]=ga[0],J[e+1]=ga[1],J[e+2]=ga[2],J[e+3]=ga[3],H[e]=g[0],H[e+1]=g[1],H[e+2]=g[2],H[e+3]=g[3]):"Y"==this.le?(E=Math.floor(e/(4*B)),E=E*B*4+(4*(B-1)-(e-E*B*4)),J[E]=ga[0],J[E+1]=ga[1],J[E+2]=ga[2],J[E+3]=ga[3],H[E]=g[0],H[E+1]=g[1],H[E+2]=g[2],H[E+3]=g[3]):(E=O-1-e,J[E-
3]=ga[0],J[E-2]=ga[1],J[E-1]=ga[2],J[E]=ga[3],H[E-3]=g[0],H[E-2]=g[1],H[E-1]=g[2],H[E]=g[3]);e+=4}while(e<O);G.putImageData(M,0,0);Q.putImageData(L,0,0);this.VC=d;this.oc=Y;this.qc=K;this.Kc=y;this.Jc=z;u&&(this.cD=s)}this.f.globalAlpha=1;this.f.translate(l/2/p,m/2/p);"X"==this.le&&(this.f.rotate(.5*Math.PI),d=t,t=q,q=-d);t=-B*this.Oo/2+t;q=-I*this.Mo/2+q;this.f.drawImage(this.Kt,t,q,B*this.Oo,I*this.Mo);u&&c.r.bc&&(this.f.globalAlpha=c.r.ke,this.f.drawImage(this.Mt,t,q,B*this.Oo,I*this.Mo));this.sc.SLICENAVIGATORS&&
this.yc.Pt&&this.yc.Tt&&!this.yc.Oi&&(t=this.yc.je,t=this.UJ(t[0],t[1]))&&(c.Kj=t[0][0],c.Lj=t[0][1],c.Mj=t[0][2],c.Ba(!1),this.onSliceNavigation(),this.f.setTransform(1,0,0,1,0,0),this.f.lineWidth=1,this.f.beginPath(),this.f.moveTo(this.yc.je[0],0),this.f.lineTo(this.yc.je[0],this.yc.je[1]-10),this.f.moveTo(this.yc.je[0],this.yc.je[1]+10),this.f.lineTo(this.yc.je[0],this.lb),this.f.strokeStyle=this.Kf[0],this.f.stroke(),this.f.closePath(),this.f.beginPath(),this.f.moveTo(0,this.yc.je[1]),this.f.lineTo(this.yc.je[0]-
10,this.yc.je[1]),this.f.moveTo(this.yc.je[0]+10,this.yc.je[1]+.5),this.f.lineTo(this.Db,this.yc.je[1]),this.f.strokeStyle=this.Kf[1],this.f.stroke(),this.f.closePath(),this.f.font="10pt Arial",this.f.textAlign="left",this.f.textBaseline="top",this.f.fillStyle="white",this.f.fillText("RAS: "+t[2][0].toFixed(2)+", "+t[2][1].toFixed(2)+", "+t[2][2].toFixed(2),0,0),B=u=q="undefined","undefined"!=typeof c.od[t[1][2].toFixed(0)]&&"undefined"!=typeof c.od[t[1][2].toFixed(0)][t[1][1].toFixed(0)]&&(q=c.od[t[1][2].toFixed(0)][t[1][1].toFixed(0)][t[1][0].toFixed(0)],
c.Sb&&(u=c.r.od[t[1][2].toFixed(0)][t[1][1].toFixed(0)][t[1][0].toFixed(0)],c.r.uq&&(B=c.r.uq.get(u),"undefined"!=typeof B&&(B=B[0])))),this.f.fillText("Background:  "+q+" ("+t[1][0].toFixed(0)+", "+t[1][1].toFixed(0)+", "+t[1][2].toFixed(0)+")",0,15),c.Sb&&this.f.fillText("Labelmap:  "+B+" ("+u+")",0,30))}};h("X.renderer2D",kp);h("X.renderer2D.prototype.init",kp.prototype.Ta);h("X.renderer2D.prototype.add",kp.prototype.add);h("X.renderer2D.prototype.onShowtime",kp.prototype.uA);
h("X.renderer2D.prototype.onRender",kp.prototype.WH);h("X.renderer2D.prototype.onScroll",kp.prototype.tA);h("X.renderer2D.prototype.onWindowLevel",kp.prototype.tS);h("X.renderer2D.prototype.get",kp.prototype.get);h("X.renderer2D.prototype.resetViewAndRender",kp.prototype.ms);h("X.renderer2D.prototype.xy2ijk",kp.prototype.UJ);h("X.renderer2D.prototype.render",kp.prototype.p);h("X.renderer2D.prototype.destroy",kp.prototype.bh);h("X.renderer2D.prototype.onSliceNavigation",kp.prototype.Ev);V.d={};V.d.og=function(){fd.call(this)};k(V.d.og,fd);h("xiv.vis.RenderEngine",V.d.og);V.d.og.prototype.ID_PREFIX="xiv.vis.RenderEngine";V.d.og.so="isSelectedVolume"+r();h("xiv.vis.RenderEngine.EventType",{MV:"z",KV:"A",LV:"B"});h("xiv.vis.RenderEngine.SELECTED_VOL_KEY",V.d.og.so);h("xiv.vis.RenderEngine.prototype.ID_PREFIX",V.d.og.prototype.ID_PREFIX);P.u={};h("gxnat.slicerNode",P.u);
P.u.QF=function(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";
break;case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b};P.u.Gk=function(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})};h("gxnat.slicerNode.getDisplayNodeTypes",P.u.QF);h("gxnat.slicerNode.toFloatArray",P.u.Gk);P.u.Node=function(){pa(this)};h("gxnat.slicerNode.Node",P.u.Node);P.u.iq=function(a,b){P.u.Node.call(this);this.backgroundColor=this.constructor.tv(a);this.eE=this.constructor.tv(b)};k(P.u.iq,P.u.Node);h("gxnat.slicerNode.BackgroundColor",P.u.iq);P.u.iq.tv=function(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"};h("gxnat.slicerNode.BackgroundColor.mrmlColorToRgb",P.u.iq.tv);V.d.Ma=function(){fd.call(this);this.io=[]};k(V.d.Ma,fd);h("xiv.vis.XtkPlane",V.d.Ma);V.d.Ma.ht=[-300,300,300];V.d.Ma.RB="black";V.d.Ma.prototype.zp=!0;V.d.Ma.prototype.Vg;f=V.d.Ma.prototype;f.xo=null;f.orientation=null;f.ls=null;f.gb=null;f.Yj=null;f.ec=function(){return this.gb};f.$c=function(){return this.orientation};
f.Xv=function(a){null!=this.gb&&(null!=a?(this.hu=a,this.gb.Uj.focus=a.focus,this.gb.Uj.position=a.position,this.gb.Uj.ow=a.ow,a instanceof Ro&&(this.gb.Uj.view=a.view)):this.gb.Uj.position=this.constructor.ht)};f.Wv=function(a){this.Yj.style.background=null!=a?ka(a)?a:null!=a.eE?"-webkit-linear-gradient(top, "+a.eE+", "+a.backgroundColor+")":a.backgroundColor:V.d.Ma.RB};f.eO=function(){return this.qu};f.cO=function(){return this.Yj};
f.Wn=function(a){this.Yj=a;null!=this.gb||this.Ta(a);this.gb.Yj=a};f.vA=function(a){this.dispatchEvent(a)};f.Ta=function(a){null!=this.gb&&(ad(this.gb),this.gb.bh(),this.gb=null);if(null==this.xo)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.gb=new this.xo;this.gb.orientation=this.orientation;this.Wn(a||this.Yj||document.body);this.gb.Ta();C(this.gb,"A",function(a){this.dispatchEvent({type:"A",value:a.value})}.bind(this));C(this.gb,"C",this.vA.bind(this))};
f.add=function(a){this.zp&&(!0==a.isSelectedVolume&&(this.qu=a),this.io.push(a),this.gb.add(a))};f.isEnabled=function(){return this.zp};function mp(a){null!=a.Vg&&(S(a.Vg),delete a.Vg)}
function np(a){a.Vg=vh("div",{id:"DisabledOverlay_"+r()});a.Vg.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=vh("div",{id:"DisabledOverlay_"+r()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.Vg.appendChild(c);a.Yj.appendChild(a.Vg)}
f.xd=function(a){(this.zp=!1!==a)?T.un(this.Vg,200,function(){this.Vg.style.visibility="hidden";mp(this)}.bind(this)):(null!=this.Vg||np(this),this.Vg.style.visibility="visible",T.nr(this.Vg,200,function(){}.bind(this)))};f.restore=function(){window.console.log("\n\nrestore");this.Ta();op(this);null!=this.hu&&this.Xv(this.hu);null!=this.Zg&&this.Wv(this.Zg);this.p()};f.fT=function(){A(this.io,function(a){null!=a&&this.gb.remove(a)}.bind(this))};
function op(a){A(a.io,function(a){window.console.log("adding",a);this.gb.add(a)}.bind(a))}f.p=function(){this.zp?this.gb.p():window.console.log("Plane"+this.orientation+" is switched off.")};f.o=function(){null!=this.gb&&this.gb.ri()};
f.k=function(){V.d.Ma.g.k.call(this);null!=this.gb&&(this.gb.bh(),delete this.gb);mp(this);null!=this.Zg&&delete this.Zg;null!=this.hu&&delete this.hu;null!=this.ls&&(null!=this.ls.k&&(this.ls.stop(),this.ls.k()),delete this.ls);delete this.zp;delete this.xo;delete this.Yj;delete this.orientation;delete this.io;delete this.qu;delete this.PY};h("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",V.d.Ma.ht);h("xiv.vis.XtkPlane.DEFAULT_BACKGROUND",V.d.Ma.RB);h("xiv.vis.XtkPlane.prototype.XRenderer",V.d.Ma.prototype.xo);
h("xiv.vis.XtkPlane.prototype.orientation",V.d.Ma.prototype.orientation);h("xiv.vis.XtkPlane.prototype.Renderer",V.d.Ma.prototype.gb);h("xiv.vis.XtkPlane.prototype.container",V.d.Ma.prototype.Yj);h("xiv.vis.XtkPlane.prototype.getRenderer",V.d.Ma.prototype.ec);h("xiv.vis.XtkPlane.prototype.getOrientation",V.d.Ma.prototype.$c);h("xiv.vis.XtkPlane.prototype.setCamera",V.d.Ma.prototype.Xv);h("xiv.vis.XtkPlane.prototype.setBackground",V.d.Ma.prototype.Wv);
h("xiv.vis.XtkPlane.prototype.getCurrentVolume",V.d.Ma.prototype.eO);h("xiv.vis.XtkPlane.prototype.getContainer",V.d.Ma.prototype.cO);h("xiv.vis.XtkPlane.prototype.setContainer",V.d.Ma.prototype.Wn);h("xiv.vis.XtkPlane.prototype.init",V.d.Ma.prototype.Ta);h("xiv.vis.XtkPlane.prototype.add",V.d.Ma.prototype.add);h("xiv.vis.XtkPlane.prototype.isEnabled",V.d.Ma.prototype.isEnabled);h("xiv.vis.XtkPlane.prototype.setEnabled",V.d.Ma.prototype.xd);h("xiv.vis.XtkPlane.prototype.restore",V.d.Ma.prototype.restore);
h("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",V.d.Ma.prototype.fT);h("xiv.vis.XtkPlane.prototype.render",V.d.Ma.prototype.p);h("xiv.vis.XtkPlane.prototype.updateStyle",V.d.Ma.prototype.o);h("xiv.vis.XtkPlane.prototype.dispose",V.d.Ma.prototype.k);function pp(a,b){if(a instanceof pp)this.Ge=a.sB();else{var c;if(c=ja(a))a:{for(var d=c=0;d<a.length;d++){if(!ja(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!ma(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.Ge=Rb(a);else if(a instanceof ah)this.Ge=qp(a.height,a.width);else if(ma(a)&&ma(b)&&0<a&&0<b)this.Ge=qp(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.Ue=new ah(this.Ge[0].length,this.Ge.length)}
function rp(a,b,c){for(var d=0;d<a.Hl().height;d++)for(var e=0;e<a.Hl().width;e++)b.call(c,a.Ge[d][e],d,e,a)}function sp(a,b){var c=new pp(a.Hl());rp(a,function(d,e,g){c.Ge[e][g]=b.call(void 0,d,e,g,a)});return c}function qp(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=pp.prototype;f.add=function(a){if(!bh(this.Ue,a.Hl()))throw Error("Matrix summation is only supported on arrays of equal size");return sp(this,function(b,c,d){return b+a.Ge[c][d]})};
f.fp=function(a,b){if(this.Ue.width!=a.Ue.width||this.Ue.height!=a.Ue.height)return!1;for(var c=b||0,d=0;d<this.Ue.height;d++)for(var e=0;e<this.Ue.width;e++)if(!(Math.abs(this.Ge[d][e]-a.Ge[d][e])<=(c||1E-6)))return!1;return!0};f.Hl=function(){return this.Ue};
f.multiply=function(a){if(a instanceof pp){if(this.Ue.width!=a.Hl().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return tp(this,a)}if(ma(a))return up(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.Ld=function(a){if(!bh(this.Ue,a.Hl()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return sp(this,function(b,c,d){return b-a.Ge[c][d]})};
f.sB=function(){return this.Ge};f.toString=function(){var a=0;rp(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];A(this.Ge,function(c){b.push("[ ");A(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function vp(a,b,c){return 0<=b&&b<a.Ue.height&&0<=c&&c<a.Ue.width}
function tp(a,b){var c=new pp(a.Ue.height,b.Hl().width);rp(c,function(a,e,g){for(var l=a=0;l<this.Ue.width;l++)a+=(vp(this,e,l)?this.Ge[e][l]:0)*(vp(b,l,g)?b.Ge[l][g]:0);if(!vp(c,e,g))throw Error("Index out of bounds when setting matrix value, ("+e+","+g+") in size ("+c.Ue.height+","+c.Ue.width+")");c.Ge[e][g]=a},a);return c}function up(a,b){return sp(a,function(a){return a*b})};V.d.Bb=function(){kp.call(this)};k(V.d.Bb,kp);h("xiv.vis.XtkRenderer2D",V.d.Bb);f=V.d.Bb.prototype;f.ri=function(){this.On()};f.tA=function(){this.Ev()};f.Nn=function(a){V.d.Bb.g.Nn.call(this,a);this.dispatchEvent({type:"A",value:a.Vm})};f.Ta=function(){this.mu.PROGRESSBAR_ENABLED=!1;V.d.Bb.g.Ta.call(this);this.Sl.UH=this.vR.bind(this);this.Sl.mu.AV=!1;this.Sl.mu.yV=!1;this.Sl.mu.mV=!1;this.Sl.Ta()};f.$c=function(){return this.le};f.YN=function(){return this.Na};f.OO=function(){return this.Sl.Uz};
f.wQ=function(){};f.vR=function(){this.dispatchEvent({type:"mouseover",Uz:this.Sl.Uz,fJ:this.Sl.Tt})};f.Ev=function(){this.dispatchEvent({type:"D",volume:this.kf[0],MX:this.kf[0]["index"+this.le],LX:this.le,fJ:this.Sl.Tt})};f.p=function(){this.Fd&&this.f?(V.d.Bb.g.p.call(this),this.dispatchEvent({type:"B"})):this.Ta()};f.ZN=function(){return this.Fd};f.zr=function(){return this.kf[0]};f.hG=function(){if(null!=this.me)return this.me.length};f.xG=function(){return this.Na.na[14]};
f.dJ=function(a){this.Na.na[14]=a};f.dq=function(){this.Na.na[14]+=.03};f.eq=function(){this.Na.na[14]+=-.03};
function wp(a,b,c,d){var e=a.kf[0],g=a.Na.na,l=null,m=a.Tm,q=a.Sm,p=null,t=null;if(null!=e){"Y"==a.le?(l=a.me[parseInt(e.indexY,10)],p=l.Qj,t=l.Jj,a.Kf[0]="red",a.Kf[1]="blue"):"Z"==a.le?(l=a.me[parseInt(e.indexZ,10)],p=l.Qj,t=l.Jj,a.Kf[0]="red",a.Kf[1]="green"):(l=a.me[parseInt(e.indexX,10)],p=l.Jj,t=l.Qj,a.Kf[0]="green",a.Kf[1]="blue",e=m,m=q,q=e);var e=1*g[12],l=-1*g[13],g=Math.max(g[14],.6),s=[a.Db/2,a.lb/2],p=m*p*g,t=q*t*g,u=s[0]-p/2,s=s[1]-t/2,u=u+e*g,s=s+l*g;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,m),d?u+(a.Tm-b)/m*p:u+b/m*p;b=Math.max(0,b);b=Math.min(b,q);return d?s+(a.Sm-b)/q*t:s+b/q*t}}f.sG=function(a,b){return wp(this,a,"vertical",b)};f.YF=function(a,b){return wp(this,a,"horizontal",b)};f.bh=function(){V.d.Bb.g.bh.call(this)};h("xiv.vis.XtkRenderer2D.prototype.onResize",V.d.Bb.prototype.ri);h("xiv.vis.XtkRenderer2D.prototype.onScroll",V.d.Bb.prototype.tA);h("xiv.vis.XtkRenderer2D.prototype.onProgress",V.d.Bb.prototype.Nn);h("xiv.vis.XtkRenderer2D.prototype.init",V.d.Bb.prototype.Ta);
h("xiv.vis.XtkRenderer2D.prototype.getOrientation",V.d.Bb.prototype.$c);h("xiv.vis.XtkRenderer2D.prototype.getCamera",V.d.Bb.prototype.YN);h("xiv.vis.XtkRenderer2D.prototype.getMousePosition",V.d.Bb.prototype.OO);h("xiv.vis.XtkRenderer2D.prototype.isMouseOver",V.d.Bb.prototype.wQ);h("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",V.d.Bb.prototype.Ev);h("xiv.vis.XtkRenderer2D.prototype.render",V.d.Bb.prototype.p);h("xiv.vis.XtkRenderer2D.prototype.getCanvas",V.d.Bb.prototype.ZN);
h("xiv.vis.XtkRenderer2D.prototype.getVolume",V.d.Bb.prototype.zr);h("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",V.d.Bb.prototype.hG);h("xiv.vis.XtkRenderer2D.prototype.getZoom",V.d.Bb.prototype.xG);h("xiv.vis.XtkRenderer2D.prototype.setZoom",V.d.Bb.prototype.dJ);h("xiv.vis.XtkRenderer2D.prototype.zoomIn",V.d.Bb.prototype.dq);h("xiv.vis.XtkRenderer2D.prototype.zoomOut",V.d.Bb.prototype.eq);h("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",V.d.Bb.prototype.sG);
h("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",V.d.Bb.prototype.YF);h("xiv.vis.XtkRenderer2D.prototype.destroy",V.d.Bb.prototype.bh);V.d.sg=function(a){V.d.Ma.call(this);this.orientation=a;this.xo=V.d.Bb;this.qu=null};k(V.d.sg,V.d.Ma);h("xiv.vis.XtkPlane2D",V.d.sg);f=V.d.sg.prototype;f.mG=function(){return this.gb.mG()};f.nG=function(){return this.gb.nG()};f.zr=function(){return null!=this.gb?this.gb.zr():null};f.Wn=function(a){V.d.sg.g.Wn.call(this,a)};f.k=function(){V.d.sg.g.k.call(this);delete this.qu;delete this.wY;delete this.xY};h("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",V.d.sg.prototype.mG);
h("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",V.d.sg.prototype.nG);h("xiv.vis.XtkPlane2D.prototype.getVolume",V.d.sg.prototype.zr);h("xiv.vis.XtkPlane2D.prototype.setContainer",V.d.sg.prototype.Wn);h("xiv.vis.XtkPlane2D.prototype.dispose",V.d.sg.prototype.k);P.u.no=function(a,b){P.u.Node.call(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;A(P.u.QF(b),function(b){A(a.getElementsByTagName(b),function(a){d.push(a)})});for(var g=0,l=d.length;g<l;g++)if(-1<c.indexOf(d[g].getAttribute("id"))){e=d[g];break}this.hr=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=P.u.Gk(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=P.u.Gk(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")};
k(P.u.no,P.u.Node);h("gxnat.slicerNode.Display",P.u.no);P.u.qt=function(a,b){P.u.no.call(this,a,b)};k(P.u.qt,P.u.no);h("gxnat.slicerNode.Mesh",P.u.qt);P.u.Tk=function(a,b,c){P.u.no.call(this,a,b);for(var d=0,e,g,l,m;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=sp(new pp(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:g=sliceToRASMatrix;break;case 1:l=sliceToRASMatrix;break;case 2:m=sliceToRASMatrix}this.Sp=new P.u.Tk.Sp(l,m,g);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,g=a.length;d<g&&!(c="true"===a[d].getAttribute("sliceVisibility")||
!1);d++);this.$u=b;this.Bj=this.hr?parseInt(this.hr.getAttribute("upperThreshold")):null;this.qk=this.hr?parseInt(this.hr.getAttribute("lowerThreshold")):null;this.visible=c};k(P.u.Tk,P.u.no);h("gxnat.slicerNode.Volume",P.u.Tk);P.u.Tk.Sp=function(a,b,c){var d=new pp([[0],[0],[0],[1]]);A([a,b,c],function(a,b){var c=a.multiply(d).sB(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.pT=c;break;case 1:this.OM=c;break;case 2:this.wM=c}}.bind(this))};h("gxnat.slicerNode.Volume.sliceToRAS",P.u.Tk.Sp);P.u.vt=function(a,b,c,d,e,g,l,m){P.u.Node.call(this);this.element=a;this.Uj=b;this.backgroundColor=c;this.hH=d;this.Sq=e;this.Jk=g;this.Mz=l;this.yy=m};k(P.u.vt,P.u.Node);h("gxnat.slicerNode.SceneView",P.u.vt);P.d={};P.d.Gm=function(a){Bc.call(this);a instanceof P.u.vt?(this.Sq=a.Sq,this.Uj=a.Uj,this.backgroundColor=a.backgroundColor,this.hH=a.hH):a instanceof P.u.Tk?(this.origin=a.origin||[0,0,0],this.Bj=a.Bj||1E4,this.qk=a.qk||-1E4,this.bt=a.bt||!1,this.$u=a.$u||!1,this.Sp=a.Sp||null,a.fj&&(this.eH=a.labelMapFile,this.CQ=a.colorTableFile)):a instanceof P.u.qt&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)};k(P.d.Gm,Bc);h("gxnat.vis.RenderProperties",P.d.Gm);
P.d.Gm.prototype.k=function(){P.d.Gm.g.k.call(this);wb(this)};h("gxnat.vis.RenderProperties.prototype.dispose",P.d.Gm.prototype.k);var xp={};
function yp(){return function b(c,d,e){function g(m,p){if(!d[m]){if(!c[m]){var t="function"==typeof require&&require;if(!p&&t)return t(m,!0);if(l)return l(m,!0);throw Error("Cannot find module '"+m+"'");}t=d[m]={Ac:{}};c[m][0].call(t.Ac,function(b){var d=c[m][1][b];return g(d?d:b)},t,t.Ac,b,c,d,e)}return d[m].Ac}for(var l="function"==typeof require&&require,m=0;m<e.length;m++)g(e[m]);return g}({1:[function(b,c,d){d.uy=function(b){for(var c="",d,m,q,p,t,s,u=0;u<b.length;)d=b.charCodeAt(u++),m=b.charCodeAt(u++),
q=b.charCodeAt(u++),p=d>>2,d=(d&3)<<4|m>>4,t=(m&15)<<2|q>>6,s=q&63,isNaN(m)?t=s=64:isNaN(q)&&(s=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s);return c};d.iy=function(b){var c="",d,m,q,p,t,s=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,
"");s<b.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(s++)),d=d<<2|m>>4,m=(m&15)<<4|p>>2,q=(p&3)<<6|t,c+=String.fromCharCode(d),64!=p&&(c+=String.fromCharCode(m)),64!=t&&(c+=
String.fromCharCode(q));return c}},{}],2:[function(b,c){function d(){this.crc32=this.Dh=this.bi=0;this.Wo=this.ol=null}d.prototype={Tf:function(){return null},Iy:function(){return null}};c.Ac=d},{}],3:[function(b,c,d){d.hW={Dp:"\x00\x00",Wx:function(b){return b},HJ:function(b){return b},Xx:null,IJ:null};d.TU=b("./flate")},{"./flate":6}],4:[function(b,c){function d(){this.data=null;this.index=this.length=0}var e=b("./utils");d.prototype={Qx:function(b){this.qE(this.index+b)},qE:function(b){if(this.length<
b||0>b)throw Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?");},em:function(b){this.qE(b);this.index=b},jJ:function(b){this.em(this.index+b)},Kx:function(){},za:function(b){var c=0,d;this.Qx(b);for(d=this.index+b-1;d>=this.index;d--)c=(c<<8)+this.Kx(d);this.index+=b;return c},vh:function(b){return e.yd("string",this.Ov(b))},Ov:function(){},gv:function(){},VS:function(){var b=this.za(4);return new Date((b>>25&127)+1980,(b>>21&15)-1,b>>16&31,b>>11&31,
b>>5&63,(b&31)<<1)}};c.Ac=d},{"./utils":14}],5:[function(b,c,d){d.Xh=!1;d.Qi=!1;d.dir=!1;d.ei=null;d.Xo=null},{}],6:[function(b,c,d){c="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;var e=b("pako");d.IJ=c?"uint8array":"array";d.Xx=c?"uint8array":"array";d.Dp="\b\x00";d.Wx=function(b){return e.dN(b)};d.HJ=function(b){return e.iQ(b)}},{pako:19}],7:[function(b,c){function d(b,c){if(!(this instanceof d))return new d(b,c);this.files={};this.root="";
b&&this.load(b,c);this.clone=function(){var b=new d,c;for(c in this)"function"!==typeof this[c]&&(b[c]=this[c]);return b}}d.prototype.files=void 0;d.prototype.remove=void 0;d.prototype=b("./object");d.prototype.load=b("./load");d.ZY=b("./support");d.XX=b("./defaults");d.dZ=b("./utils");d.Xh=b("./base64");d.SX=b("./compressions");c.Ac=d},{"./base64":1,"./compressions":3,"./defaults":5,"./load":8,"./object":9,"./support":12,"./utils":14}],8:[function(b,c){var d=b("./base64"),e=b("./zipEntries");c.Ac=
function(b,c){var m,q,p;c=c||{};c.Xh&&(b=d.iy(b));m=(new e(b,c)).files;for(q=0;q<m.length;q++)p=m[q],this.file(p.fileName,p.Vi,{Qi:!0,ZH:!0,ei:p.ei,dir:p.dir});return this}},{"./base64":1,"./zipEntries":15}],9:[function(b,c){function d(b){this.data=new Uint8Array(b);this.index=0}function e(){this.data=[]}function g(b){"/"!=b.slice(-1)&&(b+="/");this.files[b]||l.call(this,b,null,{dir:!0});return this.files[b]}function l(b,c,d){var e,l=b;"/"==l.slice(-1)&&(l=l.substring(0,l.length-1));e=l.lastIndexOf("/");
e=0<e?l.substring(0,e):"";l=v.Il(c);e&&g.call(this,e);d=d||{};!0!==d.Xh||null!==d.Qi&&void 0!==d.Qi||(d.Qi=!0);d=m(d,B);d.ei=d.ei||new Date;null!==d.Xo&&(d.Xo=d.Xo.toUpperCase());if(d.dir||null===c||"undefined"===typeof c)d.Xh=!1,d.Qi=!1,c=null;else if("string"===l)d.Qi&&!d.Xh&&!0!==d.ZH&&(c=v.sJ(c));else{d.Xh=!1;d.Qi=!0;if(!(l||c instanceof Q))throw Error("The data of '"+b+"' is in an unsupported format !");"arraybuffer"===l&&(c=v.yd("uint8array",c))}c=new p(b,c,d);return this.files[b]=c}function m(){var b=
{},c,d;for(c=0;c<arguments.length;c++)for(d in arguments[c])arguments[c].hasOwnProperty(d)&&"undefined"===typeof b[d]&&(b[d]=arguments[c][d]);return b}function q(b,c){var d="",e;for(e=0;e<c;e++)d+=String.fromCharCode(b&255),b>>>=8;return d}function p(b,c,d){this.name=b;this.ta=c;this.options=d}function t(b){var c=s(b);if("string"===v.Il(c)){if(!b.options.Qi){if(L)return L.uy(c);if(u.vv)return M(c,"utf-8")}return b.rM()}return c}function s(b){if(b.ta instanceof Q&&(b.ta=b.ta.Tf(),b.options.Qi=!0,b.options.Xh=
!1,"uint8array"===v.Il(b.ta))){var c=b.ta;b.ta=new Uint8Array(c.length);0!==c.length&&b.ta.set(c,0)}return b.ta}var u=b("./support"),v=b("./utils"),D=b("./signature"),B=b("./defaults"),I=b("./base64"),G=b("./compressions"),Q=b("./compressedObject"),M=b("./nodeBuffer"),L,J;u.xB&&"function"===typeof TextEncoder&&"function"===typeof TextDecoder&&(L=new TextEncoder("utf-8"),J=new TextDecoder("utf-8"));p.prototype={rM:function(){var b;b=s(this);null===b||"undefined"===typeof b?b="":(this.options.Xh&&(b=
I.iy(b)),b=v.yd("string",b),this.options.Qi||(b=H.NJ(b)));return b},tM:function(){var b=t(this);return v.yd("uint8array",b)},qM:function(){return this.tM().buffer}};e.prototype={append:function(b){b=v.yd("string",b);this.data.push(b)},vF:function(){return this.data.join("")}};d.prototype={append:function(b){0!==b.length&&(b=v.yd("uint8array",b),this.data.set(b,this.index),this.index+=b.length)},vF:function(){return this.data}};var H={load:function(){throw Error("Load method is not defined. Is the file jszip-load.js included ?");
},filter:function(b){var c=[],d,e,g;for(d in this.files)this.files.hasOwnProperty(d)&&(e=this.files[d],g=new p(e.name,e.ta,m(e.options)),e=d.slice(this.root.length,d.length),d.slice(0,this.root.length)===this.root&&b(e,g)&&c.push(g));return c},file:function(b,c,d){if(1===arguments.length){if(v.cH(b)){var e=b;return this.filter(function(b,c){return!c.options.dir&&e.test(b)})}return this.filter(function(c,d){return!d.options.dir&&c===b})[0]||null}b=this.root+b;l.call(this,b,c,d);return this},iY:function(b){if(!b)return this;
if(v.cH(b))return this.filter(function(c,d){return d.options.dir&&b.test(c)});var c=g.call(this,this.root+b),d=this.clone();d.root=c.name;return d},remove:function(b){b=this.root+b;var c=this.files[b];c||("/"!=b.slice(-1)&&(b+="/"),c=this.files[b]);if(c)if(c.options.dir)for(var c=this.filter(function(c,d){return d.name.slice(0,b.length)===b}),d=0;d<c.length;d++)delete this.files[c[d].name];else delete this.files[b];return this},kY:function(b){b=m(b||{},{Xh:!0,Xo:"STORE",type:"base64"});v.Rx(b.type);
var c=[],g=0,l=0,y;for(y in this.files)if(this.files.hasOwnProperty(y)){var p=this.files[y],s=p.options.Xo||b.Xo.toUpperCase(),L=G[s];if(!L)throw Error(s+" is not a valid compression method !");var s=p,u=new Q,B=void 0;if(s.ta instanceof Q)u.Dh=s.ta.Dh,u.crc32=s.ta.crc32,0===u.Dh||s.options.dir?(L=G.STORE,u.Wo="",u.crc32=0):s.ta.ol===L.Dp?u.Wo=s.ta.Iy():(B=s.ta.Tf(),u.Wo=L.Wx(v.yd(L.Xx,B)));else{B=t(s);if(!B||0===B.length||s.options.dir)L=G.STORE,B="";u.Dh=B.length;u.crc32=this.crc32(B);u.Wo=L.Wx(v.yd(L.Xx,
B))}u.bi=u.Wo.length;u.ol=L.Dp;var L=s=u,u=g,B=this.NJ(p.name),M=B!==p.name,J=p.options,H=void 0,sa=void 0,jb="",ob="",H=J.ei.getHours(),H=H<<6,H=H|J.ei.getMinutes(),H=H<<5,H=H|J.ei.getSeconds()/2,sa=J.ei.getFullYear()-1980,sa=sa<<4,sa=sa|J.ei.getMonth()+1,sa=sa<<5,sa=sa|J.ei.getDate();M&&(ob=q(1,1)+q(this.crc32(B),4)+B,jb+="up"+q(ob.length,2)+ob);J="";J+="\n\x00";J+=M?"\x00\b":"\x00\x00";J+=L.ol;J+=q(H,2);J+=q(sa,2);J+=q(L.crc32,4);J+=q(L.bi,4);J+=q(L.Dh,4);J+=q(B.length,2);J+=q(jb.length,2);p={sF:D.pC+
J+B+jb,aF:D.PB+"\u0014\x00"+J+"\x00\x00\x00\x00\x00\x00"+(!0===p.options.dir?"\u0010\x00\x00\x00":"\x00\x00\x00\x00")+q(u,4)+B+jb,LM:L};g+=p.sF.length+s.bi;l+=p.aF.length;c.push(p)}y="";y=D.xw+"\x00\x00\x00\x00"+q(c.length,2)+q(c.length,2)+q(l,4)+q(g,4)+"\x00\x00";s=b.type.toLowerCase();g="uint8array"===s||"arraybuffer"===s||"blob"===s||"nodebuffer"===s?new d(g+l+y.length):new e;for(l=0;l<c.length;l++)g.append(c[l].sF),g.append(c[l].LM.Wo);for(l=0;l<c.length;l++)g.append(c[l].aF);g.append(y);c=g.vF();
switch(b.type.toLowerCase()){case "uint8array":case "arraybuffer":case "nodebuffer":return v.yd(b.type.toLowerCase(),c);case "blob":return v.bE(v.yd("arraybuffer",c));case "base64":return b.Xh?I.uy(c):c;default:return c}},crc32:function(b,c){if("undefined"===typeof b||!b.length)return 0;var d="string"!==v.Il(b),e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,
4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,
31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,
1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,
1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,
2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,
3272380065,1510334235,755167117];"undefined"==typeof c&&(c=0);var g=0,g=g=0;c^=-1;for(var l=0,m=b.length;l<m;l++)g=d?b[l]:b.charCodeAt(l),g=(c^g)&255,g=e[g],c=c>>>8^g;return c^-1},NJ:function(b){if(L)return v.yd("string",L.uy(b));if(u.vv)return v.yd("string",M(b,"utf-8"));for(var c=[],d=0,e=0;e<b.length;e++){var g=b.charCodeAt(e);128>g?c[d++]=String.fromCharCode(g):(127<g&&2048>g?c[d++]=String.fromCharCode(g>>6|192):(c[d++]=String.fromCharCode(g>>12|224),c[d++]=String.fromCharCode(g>>6&63|128)),c[d++]=
String.fromCharCode(g&63|128))}return c.join("")},EB:function(b){var c=[],d=0,e="string"!==v.Il(b),g=0,l=0,m=0,q=0;if(J)return J.iy(v.yd("uint8array",b));if(u.vv)return v.yd("nodebuffer",b).toString("utf-8");for(;g<b.length;)l=e?b[g]:b.charCodeAt(g),128>l?(c[d++]=String.fromCharCode(l),g++):191<l&&224>l?(m=e?b[g+1]:b.charCodeAt(g+1),c[d++]=String.fromCharCode((l&31)<<6|m&63),g+=2):(m=e?b[g+1]:b.charCodeAt(g+1),q=e?b[g+2]:b.charCodeAt(g+2),c[d++]=String.fromCharCode((l&15)<<12|(m&63)<<6|q&63),g+=3);
return c.join("")}};c.Ac=H},{"./base64":1,"./compressedObject":2,"./compressions":3,"./defaults":5,"./nodeBuffer":17,"./signature":10,"./support":12,"./utils":14}],10:[function(b,c,d){d.pC="PK\u0003\u0004";d.PB="PK\u0001\u0002";d.xw="PK\u0005\u0006";d.PC="PK\u0006\u0007";d.EL="PK\u0006\u0006";d.SU="PK\u0007\b"},{}],11:[function(b,c){function d(b,c){this.data=b;c||(this.data=g.sJ(this.data));this.length=this.data.length;this.index=0}var e=b("./dataReader"),g=b("./utils");d.prototype=new e;d.prototype.Kx=
function(b){return this.data.charCodeAt(b)};d.prototype.gv=function(b){return this.data.lastIndexOf(b)};d.prototype.Ov=function(b){this.Qx(b);var c=this.data.slice(this.index,this.index+b);this.index+=b;return c};c.Ac=d},{"./dataReader":4,"./utils":14}],12:[function(b,c,d){b=b("__browserify_process");"use strict";d.Xh=!0;d.FX=!0;d.VY=!0;d.pM="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array;d.vv=!b.CM;d.xB="undefined"!==typeof Uint8Array;if("undefined"===typeof ArrayBuffer)d.Ex=!1;
else{b=new ArrayBuffer(0);try{d.Ex=0===(new Blob([b],{type:"application/zip"})).size}catch(e){try{var g=new (window.BlobBuilder||window.WebKitBlobBuilder||window.SK||window.RK);g.append(b);d.Ex=0===g.getBlob("application/zip").size}catch(l){d.Ex=!1}}}},{__browserify_process:18}],13:[function(b,c){function d(b){b&&(this.data=b,this.length=this.data.length,this.index=0)}var e=b("./dataReader");d.prototype=new e;d.prototype.Kx=function(b){return this.data[b]};d.prototype.gv=function(b){var c=b.charCodeAt(0),
d=b.charCodeAt(1),e=b.charCodeAt(2);b=b.charCodeAt(3);for(var p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===d&&this.data[p+2]===e&&this.data[p+3]===b)return p;return-1};d.prototype.Ov=function(b){this.Qx(b);var c=this.data.subarray(this.index,this.index+b);this.index+=b;return c};c.Ac=d},{"./dataReader":4}],14:[function(b,c,d){function e(b){return b}function g(b,c){for(var d=0;d<b.length;++d)c[d]=b.charCodeAt(d)&255;return c}function l(b){var c=65536,e=[],g=b.length,l=d.Il(b),m=0,
q=!0;try{switch(l){case "uint8array":new Uint8Array(0);break;case "nodebuffer":t(0)}}catch(p){q=!1}if(!q){c="";for(e=0;e<b.length;e++)c+=String.fromCharCode(b[e]);return c}for(;m<g&&1<c;)try{"array"===l||"nodebuffer"===l?e.push(String.fromCharCode.apply(null,b.slice(m,Math.min(m+c,g)))):e.push(String.fromCharCode.apply(null,b.subarray(m,Math.min(m+c,g)))),m+=c}catch(s){c=Math.floor(c/2)}return e.join("")}function m(b,c){for(var d=0;d<b.length;d++)c[d]=b[d];return c}var q=b("./support"),p=b("./compressions"),
t=b("./nodeBuffer");d.sJ=function(b){for(var c="",d=0;d<b.length;d++)c+=String.fromCharCode(b.charCodeAt(d)&255);return c};d.XY=function(b){return d.yd("uint8array",b)};d.aZ=function(b){return d.yd("string",b)};d.WY=function(b){b=d.yd("arraybuffer",b);return d.bE(b)};d.bE=function(b){d.Rx("blob");try{return new Blob([b],{type:"application/zip"})}catch(c){try{var e=new (window.BlobBuilder||window.WebKitBlobBuilder||window.SK||window.RK);e.append(b);return e.getBlob("application/zip")}catch(g){throw Error("Bug : can't construct the Blob.");
}}};var s={};s.string={string:e,array:function(b){return g(b,Array(b.length))},arraybuffer:function(b){return s.string.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:function(b){return g(b,t(b.length))}};s.array={string:l,array:e,arraybuffer:function(b){return(new Uint8Array(b)).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return t(b)}};s.arraybuffer={string:function(b){return l(new Uint8Array(b))},array:function(b){return m(new Uint8Array(b),
Array(b.byteLength))},arraybuffer:e,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return t(new Uint8Array(b))}};s.uint8array={string:l,array:function(b){return m(b,Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:e,nodebuffer:function(b){return t(b)}};s.nodebuffer={string:l,array:function(b){return m(b,Array(b.length))},arraybuffer:function(b){return s.nodebuffer.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:e};
d.yd=function(b,c){c||(c="");if(!b)return c;d.Rx(b);var e=d.Il(c);return s[e][b](c)};d.Il=function(b){if("string"===typeof b)return"string";if("[object Array]"===Object.prototype.toString.call(b))return"array";if(q.vv&&t.test(b))return"nodebuffer";if(q.xB&&b instanceof Uint8Array)return"uint8array";if(q.pM&&b instanceof ArrayBuffer)return"arraybuffer"};d.Rx=function(b){if(!q[b.toLowerCase()])throw Error(b+" is not supported by this browser");};d.ot=65535;d.qo=-1;d.JA=function(b){var c="",d,e;for(e=
0;e<(b||"").length;e++)d=b.charCodeAt(e),c+="\\x"+(16>d?"0":"")+d.toString(16).toUpperCase();return c};d.LN=function(b){for(var c in p)if(p.hasOwnProperty(c)&&p[c].Dp===b)return p[c];return null};d.cH=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)}},{"./compressions":3,"./nodeBuffer":17,"./support":12}],15:[function(b,c){function d(b,c){this.files=[];this.lv=c;b&&this.load(b)}var e=b("./stringReader"),g=b("./nodeBufferReader"),l=b("./uint8ArrayReader"),m=b("./utils"),q=b("./signature"),
p=b("./zipEntry"),t=b("./support");d.prototype={iu:function(b){var c=this.Ua.vh(4);if(c!==b)throw Error("Corrupted zip or bug : unexpected signature ("+m.JA(c)+", expected "+m.JA(b)+")");},PS:function(){this.dF=this.Ua.za(2);this.fF=this.Ua.za(2);this.oE=this.Ua.za(2);this.nE=this.Ua.za(2);this.pE=this.Ua.za(4);this.Nx=this.Ua.za(4);this.BU=this.Ua.za(2);this.Ua.vh(this.BU)},QS:function(){this.zU=this.Ua.za(8);this.Ua.vh(2);this.Ua.za(2);this.dF=this.Ua.za(4);this.fF=this.Ua.za(4);this.oE=this.Ua.za(8);
this.nE=this.Ua.za(8);this.pE=this.Ua.za(8);this.Nx=this.Ua.za(8);this.AU={};for(var b=this.zU-44,c,d,e;0<b;)c=this.Ua.za(2),d=this.Ua.za(4),e=this.Ua.vh(d),this.AU[c]={id:c,length:d,value:e}},RS:function(){this.Ua.za(4);this.aT=this.Ua.za(8);this.kN=this.Ua.za(4);if(1<this.kN)throw Error("Multi-volumes zip are not supported");},YS:function(){var b,c;for(b=0;b<this.files.length;b++)c=this.files[b],this.Ua.em(c.Fz),this.iu(q.pC),c.ZS(this.Ua),c.VP()},TS:function(){var b;for(this.Ua.em(this.Nx);this.Ua.vh(4)===
q.PB;)b=new p({WJ:this.WJ},this.lv),b.US(this.Ua),this.files.push(b)},WS:function(){var b=this.Ua.gv(q.xw);if(-1===b)throw Error("Corrupted zip : can't find end of central directory");this.Ua.em(b);this.iu(q.xw);this.PS();if(this.dF===m.ot||this.fF===m.ot||this.oE===m.ot||this.nE===m.ot||this.pE===m.qo||this.Nx===m.qo){this.WJ=!0;b=this.Ua.gv(q.PC);if(-1===b)throw Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.Ua.em(b);this.iu(q.PC);this.RS();this.Ua.em(this.aT);
this.iu(q.EL);this.QS()}},NS:function(b){var c=m.Il(b);this.Ua="string"!==c||t.xB?"nodebuffer"===c?new g(b):new l(m.yd("uint8array",b)):new e(b,this.lv.ZH)},load:function(b){this.NS(b);this.WS();this.TS();this.YS()}};c.Ac=d},{"./nodeBufferReader":17,"./signature":10,"./stringReader":11,"./support":12,"./uint8ArrayReader":13,"./utils":14,"./zipEntry":16}],16:[function(b,c){function d(b,c){this.options=b;this.lv=c}var e=b("./stringReader"),g=b("./utils"),l=b("./compressedObject"),m=b("./object");d.prototype=
{vQ:function(){return 1===(this.hE&1)},nU:function(){return 2048===(this.hE&2048)},LS:function(b,c,d){return function(){var e=b.index;b.em(c);var g=b.Ov(d);b.em(e);return g}},MS:function(b,c,d,e,l){return function(){var b=g.yd(e.IJ,this.Iy()),b=e.HJ(b);if(b.length!==l)throw Error("Bug : uncompressed data size mismatch");return b}},ZS:function(b){var c;b.jJ(22);this.zy=b.za(2);c=b.za(2);this.fileName=b.vh(this.zy);b.jJ(c);if(-1==this.bi||-1==this.Dh)throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");
c=g.LN(this.ol);if(null===c)throw Error("Corrupted zip : compression "+g.JA(this.ol)+" unknown (inner file : "+this.fileName+")");this.Vi=new l;this.Vi.bi=this.bi;this.Vi.Dh=this.Dh;this.Vi.crc32=this.crc32;this.Vi.ol=this.ol;this.Vi.Iy=this.LS(b,b.index,this.bi,c);this.Vi.Tf=this.MS(b,b.index,this.bi,c,this.Dh);if(this.lv.OX&&(this.Vi=g.yd("string",this.Vi.Tf()),m.crc32(this.Vi)!==this.crc32))throw Error("Corrupted zip : CRC32 mismatch");},US:function(b){b.vh(2);b.za(2);this.hE=b.za(2);this.ol=b.vh(2);
this.ei=b.VS();this.crc32=b.za(4);this.bi=b.za(4);this.Dh=b.za(4);this.zy=b.za(2);this.DN=b.za(2);this.JN=b.za(2);this.eF=b.za(2);b.za(2);this.CN=b.za(4);this.Fz=b.za(4);if(this.vQ())throw Error("Encrypted zip are not supported");this.fileName=b.vh(this.zy);this.XS(b);this.FS(b);this.rF=b.vh(this.JN);this.dir=this.CN&16?!0:!1},FS:function(){if(this.mr[1]){var b=new e(this.mr[1].value);this.Dh===g.qo&&(this.Dh=b.za(8));this.bi===g.qo&&(this.bi=b.za(8));this.Fz===g.qo&&(this.Fz=b.za(8));this.eF===g.qo&&
(this.eF=b.za(4))}},XS:function(b){var c=b.index,d,e,g;for(this.mr=this.mr||{};b.index<c+this.DN;)d=b.za(2),e=b.za(2),g=b.vh(e),this.mr[d]={id:d,length:e,value:g}},VP:function(){if(this.nU())this.fileName=m.EB(this.fileName),this.rF=m.EB(this.rF);else{var b=this.MN();null!==b&&(this.fileName=b)}},MN:function(){var b=this.mr[28789];if(b){var c=new e(b.value);return 1!==c.za(1)||m.crc32(this.fileName)!==c.za(4)?null:m.EB(c.vh(b.length-5))}return null}};c.Ac=d},{"./compressedObject":2,"./object":9,"./stringReader":11,
"./utils":14}],17:[function(){},{}],18:[function(b,c){var d=c.Ac={};d.EY=function(){if("undefined"!==typeof window&&window.setImmediate)return function(b){return window.setImmediate(b)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var b=[];window.addEventListener("message",function(c){var d=c.source;d!==window&&null!==d||"process-tick"!==c.data||(c.stopPropagation(),0<b.length&&b.shift()())},!0);return function(c){b.push(c);window.postMessage("process-tick","*")}}return function(b){setTimeout(b,
0)}}();d.title="browser";d.CM=!0;d.fY={};d.EX=[];d.JX=function(){throw Error("process.binding is not supported");};d.VX=function(){return"/"};d.NX=function(){throw Error("process.chdir is not supported");}},{}],19:[function(b,c){var d=b("./lib/utils/common").assign,e=b("./lib/deflate"),g=b("./lib/inflate"),l=b("./lib/zlib/constants"),m={};d(m,e,g,l);c.Ac=m},{"./lib/deflate":20,"./lib/inflate":21,"./lib/utils/common":22,"./lib/zlib/constants":25}],20:[function(b,c,d){function e(b){b=this.options=m.assign({Oe:-1,
method:8,Sx:16384,hc:15,RQ:8,rj:0,Rs:""},b||{});b.MA&&0<b.hc?b.hc=-b.hc:b.zG&&0<b.hc&&16>b.hc&&(b.hc+=16);this.kr=0;this.Pa="";this.ended=!1;this.Xj=[];this.Ga=new t;this.Ga.ua=0;var c=l.cN(this.Ga,b.Oe,b.method,b.hc,b.RQ,b.rj);if(0!==c)throw Error(p[c]);b.dz&&l.eN(this.Ga,b.dz)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.kr)throw d.Pa;return d.result}var l=b("./zlib/deflate.js"),m=b("./utils/common"),q=b("./utils/strings"),p=b("./zlib/messages"),t=b("./zlib/zstream");e.prototype.push=function(b,
c){var d=this.Ga,e=this.options.Sx,g,p;if(this.ended)return!1;p=c===~~c?c:!0===c?4:0;d.input="string"===typeof b?q.UT(b):b;d.qh=0;d.tc=d.input.length;do{0===d.ua&&(d.tb=new m.Hi(e),d.Pc=0,d.ua=e);g=l.XE(d,p);if(1!==g&&0!==g)return this.Re(g),this.ended=!0,!1;if(0===d.ua||0===d.tc&&4===p)"string"===this.options.Rs?this.es(q.DM(m.iw(d.tb,d.Pc))):this.es(m.iw(d.tb,d.Pc))}while((0<d.tc||0===d.ua)&&1!==g);return 4===p?(g=l.bN(this.Ga),this.Re(g),this.ended=!0,0===g):!0};e.prototype.es=function(b){this.Xj.push(b)};
e.prototype.Re=function(b){0===b&&(this.result="string"===this.options.Rs?this.Xj.join(""):m.Cy(this.Xj));this.Xj=[];this.kr=b;this.Pa=this.Ga.Pa};d.YU=e;d.XE=g;d.dN=function(b){var c;c=c||{};c.MA=!0;return g(b,c)};d.zG=function(b,c){c=c||{};c.zG=!0;return g(b,c)}},{"./utils/common":22,"./utils/strings":23,"./zlib/deflate.js":27,"./zlib/messages":32,"./zlib/zstream":34}],21:[function(b,c,d){function e(b){var c=this.options=m.assign({Sx:16384,hc:0,Rs:""},b||{});c.MA&&0<=c.hc&&16>c.hc&&(c.hc=-c.hc,
0===c.hc&&(c.hc=-15));!(0<=c.hc&&16>c.hc)||b&&b.hc||(c.hc+=32);15<c.hc&&48>c.hc&&0===(c.hc&15)&&(c.hc|=15);this.kr=0;this.Pa="";this.ended=!1;this.Xj=[];this.Ga=new s;this.Ga.ua=0;b=l.hQ(this.Ga,c.hc);if(b!==p.Ct)throw Error(t[b]);this.dz=new u;l.gQ(this.Ga,this.dz)}function g(b,c){var d=new e(c);d.push(b,!0);if(d.kr)throw d.Pa;return d.result}var l=b("./zlib/inflate.js"),m=b("./utils/common"),q=b("./utils/strings"),p=b("./zlib/constants"),t=b("./zlib/messages"),s=b("./zlib/zstream"),u=b("./zlib/gzheader");
e.prototype.push=function(b,c){var d=this.Ga,e=this.options.Sx,g,t,s,L,u;if(this.ended)return!1;t=c===~~c?c:!0===c?p.Bt:p.TC;d.input="string"===typeof b?q.yM(b):b;d.qh=0;d.tc=d.input.length;do{0===d.ua&&(d.tb=new m.Hi(e),d.Pc=0,d.ua=e);g=l.UG(d,p.TC);if(g!==p.Dt&&g!==p.Ct)return this.Re(g),this.ended=!0,!1;d.Pc&&(0===d.ua||g===p.Dt||0===d.tc&&t===p.Bt)&&("string"===this.options.Rs?(s=q.oU(d.tb,d.Pc),L=d.Pc-s,u=q.EM(d.tb,s),d.Pc=L,d.ua=e-L,L&&m.Wh(d.tb,d.tb,s,L,0),this.es(u)):this.es(m.iw(d.tb,d.Pc)))}while((0<
d.tc||0===d.ua)&&g!==p.Dt);g===p.Dt&&(t=p.Bt);return t===p.Bt?(g=l.fQ(this.Ga),this.Re(g),this.ended=!0,g===p.Ct):!0};e.prototype.es=function(b){this.Xj.push(b)};e.prototype.Re=function(b){b===p.Ct&&(this.result="string"===this.options.Rs?this.Xj.join(""):m.Cy(this.Xj));this.Xj=[];this.kr=b;this.Pa=this.Ga.Pa};d.lV=e;d.UG=g;d.iQ=function(b){var c;c=c||{};c.MA=!0;return g(b,c)};d.bZ=g},{"./utils/common":22,"./utils/strings":23,"./zlib/constants":25,"./zlib/gzheader":28,"./zlib/inflate.js":30,"./zlib/messages":32,
"./zlib/zstream":34}],22:[function(b,c,d){b="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(b){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!==typeof d)throw new TypeError(d+"must be non-object");for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}}return b};d.iw=function(b,c){if(b.length===c)return b;if(b.subarray)return b.subarray(0,c);b.length=c;return b};var e={Wh:function(b,c,d,e,
g){if(c.subarray&&b.subarray)b.set(c.subarray(d,d+e),g);else for(var s=0;s<e;s++)b[g+s]=c[d+s]},Cy:function(b){var c,d,e,g,s;c=e=0;for(d=b.length;c<d;c++)e+=b[c].length;s=new Uint8Array(e);c=e=0;for(d=b.length;c<d;c++)g=b[c],s.set(g,e),e+=g.length;return s}},g={Wh:function(b,c,d,e,g){for(var s=0;s<e;s++)b[g+s]=c[d+s]},Cy:function(b){return[].concat.apply([],b)}};d.HT=function(b){b?(d.Hi=Uint8Array,d.jg=Uint16Array,d.jq=Int32Array,d.assign(d,e)):(d.Hi=Array,d.jg=Array,d.jq=Array,d.assign(d,g))};d.HT(b)},
{}],23:[function(b,c,d){var e=b("./common"),g=new e.Hi(256);for(b=0;256>b;b++)g[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;g[254]=g[254]=1;d.UT=function(b){var c,d,g,t,s,u=b.length,v=0;for(t=0;t<u;t++)d=b.charCodeAt(t),55296===(d&64512)&&t+1<u&&(g=b.charCodeAt(t+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+(g-56320),t++)),v+=128>d?1:2048>d?2:65536>d?3:4;c=new e.Hi(v);for(t=s=0;s<v;t++)d=b.charCodeAt(t),55296===(d&64512)&&t+1<u&&(g=b.charCodeAt(t+1),56320===(g&64512)&&(d=65536+(d-55296<<10)+
(g-56320),t++)),128>d?c[s++]=d:(2048>d?c[s++]=192|d>>>6:(65536>d?c[s++]=224|d>>>12:(c[s++]=240|d>>>18,c[s++]=128|d>>>12&63),c[s++]=128|d>>>6&63),c[s++]=128|d&63);return c};d.DM=function(b){if(65537>b.length)return String.fromCharCode.apply(null,b);for(var c="",d=0,e=b.length;d<e;d++)c+=String.fromCharCode(b[d]);return c};d.yM=function(b){for(var c=new e.Hi(b.length),d=0,g=c.length;d<g;d++)c[d]=b.charCodeAt(d);return c};d.EM=function(b,c){var d,p,t,s,u=c||b.length,v=Array(2*u);for(d=p=0;d<u;)if(t=
b[d++],128>t)v[p++]=t;else if(s=g[t],4<s)v[p++]=65533,d+=s-1;else{for(t&=2===s?31:3===s?15:7;1<s&&d<u;)t=t<<6|b[d++]&63,s--;1<s?v[p++]=65533:65536>t?v[p++]=t:(t-=65536,v[p++]=55296|t>>10&1023,v[p++]=56320|t&1023)}return String.fromCharCode.apply(null,e.iw(v,p))};d.oU=function(b,c){var d;c=c||b.length;c>b.length&&(c=b.length);for(d=c-1;0<=d&&128===(b[d]&192);)d--;return 0>d||0===d?c:d+g[b[d]]>c?d:c}},{"./common":22}],24:[function(b,c){c.Ac=function(b,c,g,l){var m=b&65535|0;b=b>>>16&65535|0;for(var q=
0;0!==g;){q=2E3<g?2E3:g;g-=q;do m=m+c[l++]|0,b=b+m|0;while(--q);m%=65521;b%=65521}return m|b<<16|0}},{}],25:[function(b,c){c.Ac={TC:0,sX:1,vX:2,oX:3,Bt:4,fX:5,xX:6,Ct:0,Dt:1,qX:2,lX:-1,uX:-2,hX:-3,gX:-5,rX:0,dX:1,cX:9,iX:-1,mX:1,pX:2,tX:3,nX:4,jX:0,eX:0,wX:1,yX:2,kX:8}},{}],26:[function(b,c){var d=function(){for(var b,c=[],d=0;256>d;d++){b=d;for(var m=0;8>m;m++)b=b&1?3988292384^b>>>1:b>>>1;c[d]=b}return c}();c.Ac=function(b,c,l,m){l=m+l;for(b^=-1;m<l;m++)b=b>>>8^d[(b^c[m])&255];return b^-1}},{}],
27:[function(b,c,d){function e(b,c,d,e,g){this.IP=b;this.OQ=c;this.bR=d;this.NQ=e;this.TN=g}function g(b,c){b.Pa=Y[c];return c}function l(b){for(var c=b.length;0<=--c;)b[c]=0}function m(b){var c=b.state,d=c.wa;d>b.ua&&(d=b.ua);0!==d&&(J.Wh(b.tb,c.Bc,c.js,d,b.Pc),b.Pc+=d,c.js+=d,b.nm+=d,b.ua-=d,c.wa-=d,0===c.wa&&(c.js=0))}function q(b,c){H.WL(b,0<=b.Zh?b.Zh:-1,b.L-b.Zh,c);b.Zh=b.L;m(b.Ga)}function p(b,c){b.Bc[b.wa++]=c}function t(b,c){b.Bc[b.wa++]=c>>>8&255;b.Bc[b.wa++]=c&255}function s(b,c){var d=
b.xH,e=b.L,g,l=b.th,m=b.NH,p=b.L>b.Ei-262?b.L-(b.Ei-262):0,q=b.window,t=b.ho,s=b.Se,L=b.L+258,u=q[e+l-1],v=q[e+l];b.th>=b.yG&&(d>>=2);m>b.pa&&(m=b.pa);do if(g=c,q[g+l]===v&&q[g+l-1]===u&&q[g]===q[e]&&q[++g]===q[e+1]){e+=2;for(g++;q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&q[++e]===q[++g]&&e<L;);g=258-(L-e);e=L-258;if(g>l){b.Gp=c;l=g;if(g>=m)break;u=q[e+l-1];v=q[e+l]}}while((c=s[c&t])>p&&0!==--d);return l<=b.pa?l:b.pa}function u(b){var c=
b.Ei,d,e,g,l;do{l=b.TJ-b.pa-b.L;if(b.L>=c+(c-262)){J.Wh(b.window,b.window,c,c,0);b.Gp-=c;b.L-=c;b.Zh-=c;d=e=b.Su;do g=b.head[--d],b.head[d]=g>=c?g-c:0;while(--e);d=e=c;do g=b.Se[--d],b.Se[d]=g>=c?g-c:0;while(--e);l+=c}if(0===b.Ga.tc)break;d=b.Ga;e=b.window;g=b.L+b.pa;var m=d.tc;m>l&&(m=l);0===m?e=0:(d.tc-=m,J.Wh(e,d.input,d.qh,m,g),1===d.state.ic?d.Ea=O(d.Ea,e,m,g):2===d.state.ic&&(d.Ea=N(d.Ea,e,m,g)),d.qh+=m,d.vj+=m,e=m);b.pa+=e;if(3<=b.pa+b.kh)for(l=b.L-b.kh,b.Tb=b.window[l],b.Tb=(b.Tb<<b.Ll^b.window[l+
1])&b.Kl;b.kh&&!(b.Tb=(b.Tb<<b.Ll^b.window[l+3-1])&b.Kl,b.Se[l&b.ho]=b.head[b.Tb],b.head[b.Tb]=l,l++,b.kh--,3>b.pa+b.kh););}while(262>b.pa&&0!==b.Ga.tc)}function v(b,c){for(var d;;){if(262>b.pa){u(b);if(262>b.pa&&0===c)return 1;if(0===b.pa)break}d=0;3<=b.pa&&(b.Tb=(b.Tb<<b.Ll^b.window[b.L+3-1])&b.Kl,d=b.Se[b.L&b.ho]=b.head[b.Tb],b.head[b.Tb]=b.L);0!==d&&b.L-d<=b.Ei-262&&(b.Gb=s(b,d));if(3<=b.Gb)if(d=H.fl(b,b.L-b.Gp,b.Gb-3),b.pa-=b.Gb,b.Gb<=b.Kz&&3<=b.pa){b.Gb--;do b.L++,b.Tb=(b.Tb<<b.Ll^b.window[b.L+
3-1])&b.Kl,b.Se[b.L&b.ho]=b.head[b.Tb],b.head[b.Tb]=b.L;while(0!==--b.Gb);b.L++}else b.L+=b.Gb,b.Gb=0,b.Tb=b.window[b.L],b.Tb=(b.Tb<<b.Ll^b.window[b.L+1])&b.Kl;else d=H.fl(b,0,b.window[b.L]),b.pa--,b.L++;if(d&&(q(b,!1),0===b.Ga.ua))return 1}b.kh=2>b.L?b.L:2;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.mh&&(q(b,!1),0===b.Ga.ua)?1:2}function D(b,c){for(var d,e;;){if(262>b.pa){u(b);if(262>b.pa&&0===c)return 1;if(0===b.pa)break}d=0;3<=b.pa&&(b.Tb=(b.Tb<<b.Ll^b.window[b.L+3-1])&b.Kl,d=b.Se[b.L&b.ho]=b.head[b.Tb],
b.head[b.Tb]=b.L);b.th=b.Gb;b.cI=b.Gp;b.Gb=2;0!==d&&b.th<b.Kz&&b.L-d<=b.Ei-262&&(b.Gb=s(b,d),5>=b.Gb&&(1===b.rj||3===b.Gb&&4096<b.L-b.Gp)&&(b.Gb=2));if(3<=b.th&&b.Gb<=b.th){e=b.L+b.pa-3;d=H.fl(b,b.L-1-b.cI,b.th-3);b.pa-=b.th-1;b.th-=2;do++b.L<=e&&(b.Tb=(b.Tb<<b.Ll^b.window[b.L+3-1])&b.Kl,b.Se[b.L&b.ho]=b.head[b.Tb],b.head[b.Tb]=b.L);while(0!==--b.th);b.Fp=0;b.Gb=2;b.L++;if(d&&(q(b,!1),0===b.Ga.ua))return 1}else if(b.Fp){if((d=H.fl(b,0,b.window[b.L-1]))&&q(b,!1),b.L++,b.pa--,0===b.Ga.ua)return 1}else b.Fp=
1,b.L++,b.pa--}b.Fp&&(H.fl(b,0,b.window[b.L-1]),b.Fp=0);b.kh=2>b.L?b.L:2;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.mh&&(q(b,!1),0===b.Ga.ua)?1:2}function B(b,c){for(var d,e,g,l=b.window;;){if(258>=b.pa){u(b);if(258>=b.pa&&0===c)return 1;if(0===b.pa)break}b.Gb=0;if(3<=b.pa&&0<b.L&&(e=b.L-1,d=l[e],d===l[++e]&&d===l[++e]&&d===l[++e])){for(g=b.L+258;d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&d===l[++e]&&e<g;);b.Gb=258-(g-e);b.Gb>b.pa&&(b.Gb=b.pa)}3<=b.Gb?(d=H.fl(b,
1,b.Gb-3),b.pa-=b.Gb,b.L+=b.Gb,b.Gb=0):(d=H.fl(b,0,b.window[b.L]),b.pa--,b.L++);if(d&&(q(b,!1),0===b.Ga.ua))return 1}b.kh=0;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.mh&&(q(b,!1),0===b.Ga.ua)?1:2}function I(b,c){for(var d;;){if(0===b.pa&&(u(b),0===b.pa)){if(0===c)return 1;break}b.Gb=0;d=H.fl(b,0,b.window[b.L]);b.pa--;b.L++;if(d&&(q(b,!1),0===b.Ga.ua))return 1}b.kh=0;return 4===c?(q(b,!0),0===b.Ga.ua?3:4):b.mh&&(q(b,!1),0===b.Ga.ua)?1:2}function G(){this.Ga=null;this.status=0;this.Bc=null;this.ic=this.wa=
this.js=this.sh=0;this.Oa=null;this.ji=0;this.method=8;this.Cp=-1;this.ho=this.HB=this.Ei=0;this.window=null;this.TJ=0;this.head=this.Se=null;this.NH=this.yG=this.rj=this.Oe=this.Kz=this.xH=this.th=this.pa=this.Gp=this.L=this.Fp=this.cI=this.Gb=this.Zh=this.Ll=this.Kl=this.cz=this.Su=this.Tb=0;this.Qf=new J.jg(1146);this.on=new J.jg(122);this.Ie=new J.jg(78);l(this.Qf);l(this.on);l(this.Ie);this.iE=this.su=this.ev=null;this.Sj=new J.jg(16);this.Mc=new J.jg(573);l(this.Mc);this.pp=this.jk=0;this.depth=
new J.jg(573);l(this.depth);this.pe=this.nf=this.kh=this.matches=this.Tp=this.vk=this.gr=this.mh=this.Ur=this.tz=0}function Q(b){var c;if(!b||!b.state)return g(b,-2);b.vj=b.nm=0;b.$o=2;c=b.state;c.wa=0;c.js=0;0>c.ic&&(c.ic=-c.ic);c.status=c.ic?42:113;b.Ea=2===c.ic?0:1;c.Cp=0;H.XL(c);return 0}function M(b){var c=Q(b);0===c&&(b=b.state,b.TJ=2*b.Ei,l(b.head),b.Kz=K[b.Oe].OQ,b.yG=K[b.Oe].IP,b.NH=K[b.Oe].bR,b.xH=K[b.Oe].NQ,b.L=0,b.Zh=0,b.pa=0,b.kh=0,b.Gb=b.th=2,b.Fp=0,b.Tb=0);return c}function L(b,c,d,
e,l,m){if(!b)return-2;var p=1;-1===c&&(c=6);0>e?(p=0,e=-e):15<e&&(p=2,e-=16);if(1>l||9<l||8!==d||8>e||15<e||0>c||9<c||0>m||4<m)return g(b,-2);8===e&&(e=9);var q=new G;b.state=q;q.Ga=b;q.ic=p;q.Oa=null;q.HB=e;q.Ei=1<<q.HB;q.ho=q.Ei-1;q.cz=l+7;q.Su=1<<q.cz;q.Kl=q.Su-1;q.Ll=~~((q.cz+3-1)/3);q.window=new J.Hi(2*q.Ei);q.head=new J.jg(q.Su);q.Se=new J.jg(q.Ei);q.Ur=1<<l+6;q.sh=4*q.Ur;q.Bc=new J.Hi(q.sh);q.gr=q.Ur>>1;q.tz=3*q.Ur;q.Oe=c;q.rj=m;q.method=d;return M(b)}var J=b("../utils/common"),H=b("./trees"),
O=b("./adler32"),N=b("./crc32"),Y=b("./messages"),K;K=[new e(0,0,0,0,function(b,c){var d=65535;for(d>b.sh-5&&(d=b.sh-5);;){if(1>=b.pa){u(b);if(0===b.pa&&0===c)return 1;if(0===b.pa)break}b.L+=b.pa;b.pa=0;var e=b.Zh+d;if(0===b.L||b.L>=e)if(b.pa=b.L-e,b.L=e,q(b,!1),0===b.Ga.ua)return 1;if(b.L-b.Zh>=b.Ei-262&&(q(b,!1),0===b.Ga.ua))return 1}b.kh=0;if(4===c)return q(b,!0),0===b.Ga.ua?3:4;b.L>b.Zh&&q(b,!1);return 1}),new e(4,4,8,4,v),new e(4,5,16,8,v),new e(4,6,32,32,v),new e(4,4,16,16,D),new e(8,16,32,
32,D),new e(8,16,128,128,D),new e(8,32,128,256,D),new e(32,128,258,1024,D),new e(32,258,258,4096,D)];d.ZX=function(b,c){return L(b,c,8,15,8,0)};d.cN=L;d.$X=M;d.aY=Q;d.eN=function(b,c){b&&b.state&&2===b.state.ic&&(b.state.Oa=c)};d.XE=function(b,c){var d,e,q,s;if(!b||!b.state||5<c||0>c)return b?g(b,-2):-2;e=b.state;if(!b.tb||!b.input&&0!==b.tc||666===e.status&&4!==c)return g(b,0===b.ua?-5:-2);e.Ga=b;d=e.Cp;e.Cp=c;42===e.status&&(2===e.ic?(b.Ea=0,p(e,31),p(e,139),p(e,8),e.Oa?(p(e,(e.Oa.text?1:0)+(e.Oa.cj?
2:0)+(e.Oa.sb?4:0)+(e.Oa.name?8:0)+(e.Oa.comment?16:0)),p(e,e.Oa.time&255),p(e,e.Oa.time>>8&255),p(e,e.Oa.time>>16&255),p(e,e.Oa.time>>24&255),p(e,9===e.Oe?2:2<=e.rj||2>e.Oe?4:0),p(e,e.Oa.os&255),e.Oa.sb&&e.Oa.sb.length&&(p(e,e.Oa.sb.length&255),p(e,e.Oa.sb.length>>8&255)),e.Oa.cj&&(b.Ea=N(b.Ea,e.Bc,e.wa,0)),e.ji=0,e.status=69):(p(e,0),p(e,0),p(e,0),p(e,0),p(e,0),p(e,9===e.Oe?2:2<=e.rj||2>e.Oe?4:0),p(e,3),e.status=113)):(q=8+(e.HB-8<<4)<<8,s=-1,s=2<=e.rj||2>e.Oe?0:6>e.Oe?1:6===e.Oe?2:3,q|=s<<6,0!==
e.L&&(q|=32),e.status=113,t(e,q+(31-q%31)),0!==e.L&&(t(e,b.Ea>>>16),t(e,b.Ea&65535)),b.Ea=1));if(69===e.status)if(e.Oa.sb){for(q=e.wa;e.ji<(e.Oa.sb.length&65535)&&(e.wa!==e.sh||(e.Oa.cj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q)),m(b),q=e.wa,e.wa!==e.sh));)p(e,e.Oa.sb[e.ji]&255),e.ji++;e.Oa.cj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q));e.ji===e.Oa.sb.length&&(e.ji=0,e.status=73)}else e.status=73;if(73===e.status)if(e.Oa.name){q=e.wa;do{if(e.wa===e.sh&&(e.Oa.cj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q)),m(b),q=e.wa,
e.wa===e.sh)){s=1;break}s=e.ji<e.Oa.name.length?e.Oa.name.charCodeAt(e.ji++)&255:0;p(e,s)}while(0!==s);e.Oa.cj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q));0===s&&(e.ji=0,e.status=91)}else e.status=91;if(91===e.status)if(e.Oa.comment){q=e.wa;do{if(e.wa===e.sh&&(e.Oa.cj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q)),m(b),q=e.wa,e.wa===e.sh)){s=1;break}s=e.ji<e.Oa.comment.length?e.Oa.comment.charCodeAt(e.ji++)&255:0;p(e,s)}while(0!==s);e.Oa.cj&&e.wa>q&&(b.Ea=N(b.Ea,e.Bc,e.wa-q,q));0===s&&(e.status=103)}else e.status=
103;103===e.status&&(e.Oa.cj?(e.wa+2>e.sh&&m(b),e.wa+2<=e.sh&&(p(e,b.Ea&255),p(e,b.Ea>>8&255),b.Ea=0,e.status=113)):e.status=113);if(0!==e.wa){if(m(b),0===b.ua)return e.Cp=-1,0}else if(0===b.tc&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return g(b,-5);if(666===e.status&&0!==b.tc)return g(b,-5);if(0!==b.tc||0!==e.pa||0!==c&&666!==e.status){d=2===e.rj?I(e,c):3===e.rj?B(e,c):K[e.Oe].TN(e,c);if(3===d||4===d)e.status=666;if(1===d||3===d)return 0===b.ua&&(e.Cp=-1),0;if(2===d&&(1===c?H.VL(e):5!==c&&(H.YL(e,
0,0,!1),3===c&&(l(e.head),0===e.pa&&(e.L=0,e.Zh=0,e.kh=0))),m(b),0===b.ua))return e.Cp=-1,0}if(4!==c)return 0;if(0>=e.ic)return 1;2===e.ic?(p(e,b.Ea&255),p(e,b.Ea>>8&255),p(e,b.Ea>>16&255),p(e,b.Ea>>24&255),p(e,b.vj&255),p(e,b.vj>>8&255),p(e,b.vj>>16&255),p(e,b.vj>>24&255)):(t(e,b.Ea>>>16),t(e,b.Ea&65535));m(b);0<e.ic&&(e.ic=-e.ic);return 0!==e.wa?0:1};d.bN=function(b){var c;if(!b||!b.state)return-2;c=b.state.status;if(42!==c&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c)return g(b,-2);b.state=
null;return 113===c?g(b,-3):0};d.YX="pako deflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./messages":32,"./trees":33}],28:[function(b,c){c.Ac=function(){this.os=this.vU=this.time=this.text=0;this.sb=null;this.wy=0;this.comment=this.name="";this.cj=0;this.bp=!1}},{}],29:[function(b,c){c.Ac=function(b,c){var g,l,m,q,p,t,s,u,v,D,B,I,G,Q,M,L,J,H,O,N,Y,K,y,z;g=b.state;l=b.qh;y=b.input;m=l+(b.tc-5);q=b.Pc;z=b.tb;p=q-(c-b.ua);t=q+(b.ua-257);s=g.uu;u=g.ig;v=g.Kk;D=g.hg;
B=g.window;I=g.Nl;G=g.qd;Q=g.ok;M=g.mn;L=(1<<g.gj)-1;J=(1<<g.ap)-1;a:do b:for(15>G&&(I+=y[l++]<<G,G+=8,I+=y[l++]<<G,G+=8),H=Q[I&L];;){O=H>>>24;I>>>=O;G-=O;O=H>>>16&255;if(0===O)z[q++]=H&65535;else if(O&16){N=H&65535;if(O&=15)G<O&&(I+=y[l++]<<G,G+=8),N+=I&(1<<O)-1,I>>>=O,G-=O;15>G&&(I+=y[l++]<<G,G+=8,I+=y[l++]<<G,G+=8);H=M[I&J];c:for(;;){O=H>>>24;I>>>=O;G-=O;O=H>>>16&255;if(O&16){H&=65535;O&=15;G<O&&(I+=y[l++]<<G,G+=8,G<O&&(I+=y[l++]<<G,G+=8));H+=I&(1<<O)-1;if(H>s){b.Pa="invalid distance too far back";
g.mode=30;break a}I>>>=O;G-=O;O=q-p;if(H>O){O=H-O;if(O>v&&g.QA){b.Pa="invalid distance too far back";g.mode=30;break a}Y=0;K=B;if(0===D){if(Y+=u-O,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}}else if(D<O){if(Y+=u+D-O,O-=D,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=0;if(D<N){O=D;N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}}}else if(Y+=D-O,O<N){N-=O;do z[q++]=B[Y++];while(--O);Y=q-H;K=z}for(;2<N;)z[q++]=K[Y++],z[q++]=K[Y++],z[q++]=K[Y++],N-=3;N&&(z[q++]=K[Y++],1<N&&(z[q++]=K[Y++]))}else{Y=q-H;do z[q++]=
z[Y++],z[q++]=z[Y++],z[q++]=z[Y++],N-=3;while(2<N);N&&(z[q++]=z[Y++],1<N&&(z[q++]=z[Y++]))}}else if(0===(O&64)){H=M[(H&65535)+(I&(1<<O)-1)];continue c}else{b.Pa="invalid distance code";g.mode=30;break a}break}}else if(0===(O&64)){H=Q[(H&65535)+(I&(1<<O)-1)];continue b}else{O&32?g.mode=12:(b.Pa="invalid literal/length code",g.mode=30);break a}break}while(l<m&&q<t);N=G>>3;l-=N;G-=N<<3;b.qh=l;b.Pc=q;b.tc=l<m?5+(m-l):5-(l-m);b.ua=q<t?257+(t-q):257-(q-t);g.Nl=I&(1<<G)-1;g.qd=G}},{}],30:[function(b,c,d){function e(b){return(b>>>
24&255)+(b>>>8&65280)+((b&65280)<<8)+((b&255)<<24)}function g(){this.mode=0;this.fv=!1;this.ic=0;this.MG=!1;this.total=this.check=this.uu=this.Zc=0;this.head=null;this.hg=this.Kk=this.ig=this.cq=0;this.window=null;this.sb=this.offset=this.length=this.qd=this.Nl=0;this.mn=this.ok=null;this.ih=this.as=this.Jp=this.KH=this.ap=this.gj=0;this.next=null;this.$d=new t.jg(320);this.et=new t.jg(288);this.iF=this.iH=null;this.tU=this.back=this.QA=0}function l(b){var c;if(!b||!b.state)return-2;c=b.state;b.vj=
b.nm=c.total=0;b.Pa="";c.ic&&(b.Ea=c.ic&1);c.mode=1;c.fv=0;c.MG=0;c.uu=32768;c.head=null;c.Nl=0;c.qd=0;c.ok=c.iH=new t.jq(852);c.mn=c.iF=new t.jq(592);c.QA=1;c.back=-1;return 0}function m(b){var c;if(!b||!b.state)return-2;c=b.state;c.ig=0;c.Kk=0;c.hg=0;return l(b)}function q(b,c){var d,e;if(!b||!b.state)return-2;e=b.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==e.window&&e.cq!==c&&(e.window=null);e.ic=d;e.cq=c;return m(b)}function p(b,c){var d;if(!b)return-2;d=
new g;b.state=d;d.window=null;d=q(b,c);0!==d&&(b.state=null);return d}var t=b("../utils/common"),s=b("./adler32"),u=b("./crc32"),v=b("./inffast"),D=b("./inftrees"),B=!0,I,G;d.rY=m;d.sY=q;d.tY=l;d.qY=function(b){return p(b,15)};d.hQ=p;d.UG=function(b,c){var d,g,l,m,q,p,K,y,z,ga,Z,E,W,Xa;E=0;var qa,Ca,sa,jb,ob,tb=new t.Hi(4),ki=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.tb||!b.input&&0!==b.tc)return-2;d=b.state;12===d.mode&&(d.mode=13);q=b.Pc;l=b.tb;K=b.ua;m=b.qh;g=b.input;
p=b.tc;y=d.Nl;z=d.qd;ga=p;Z=K;ob=0;a:for(;;)switch(d.mode){case 1:if(0===d.ic){d.mode=13;break}for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(d.ic&2&&35615===y){d.check=0;tb[0]=y&255;tb[1]=y>>>8&255;d.check=u(d.check,tb,2,0);z=y=0;d.mode=2;break}d.Zc=0;d.head&&(d.head.bp=!1);if(!(d.ic&1)||(((y&255)<<8)+(y>>8))%31){b.Pa="incorrect header check";d.mode=30;break}if(8!==(y&15)){b.Pa="unknown compression method";d.mode=30;break}y>>>=4;z-=4;W=(y&15)+8;if(0===d.cq)d.cq=W;else if(W>d.cq){b.Pa="invalid window size";
d.mode=30;break}d.uu=1<<W;b.Ea=d.check=1;d.mode=y&512?10:12;z=y=0;break;case 2:for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.Zc=y;if(8!==(d.Zc&255)){b.Pa="unknown compression method";d.mode=30;break}if(d.Zc&57344){b.Pa="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=y>>8&1);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,d.check=u(d.check,tb,2,0));z=y=0;d.mode=3;case 3:for(;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.head&&(d.head.time=y);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,tb[2]=
y>>>16&255,tb[3]=y>>>24&255,d.check=u(d.check,tb,4,0));z=y=0;d.mode=4;case 4:for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.head&&(d.head.vU=y&255,d.head.os=y>>8);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,d.check=u(d.check,tb,2,0));z=y=0;d.mode=5;case 5:if(d.Zc&1024){for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.length=y;d.head&&(d.head.wy=y);d.Zc&512&&(tb[0]=y&255,tb[1]=y>>>8&255,d.check=u(d.check,tb,2,0));z=y=0}else d.head&&(d.head.sb=null);d.mode=6;case 6:if(d.Zc&1024&&(E=d.length,E>
p&&(E=p),E&&(d.head&&(W=d.head.wy-d.length,d.head.sb||(d.head.sb=Array(d.head.wy)),t.Wh(d.head.sb,g,m,E,W)),d.Zc&512&&(d.check=u(d.check,g,E,m)),p-=E,m+=E,d.length-=E),d.length))break a;d.length=0;d.mode=7;case 7:if(d.Zc&2048){if(0===p)break a;E=0;do W=g[m+E++],d.head&&W&&65536>d.length&&(d.head.name+=String.fromCharCode(W));while(W&&E<p);d.Zc&512&&(d.check=u(d.check,g,E,m));p-=E;m+=E;if(W)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(d.Zc&4096){if(0===p)break a;E=0;do W=g[m+
E++],d.head&&W&&65536>d.length&&(d.head.comment+=String.fromCharCode(W));while(W&&E<p);d.Zc&512&&(d.check=u(d.check,g,E,m));p-=E;m+=E;if(W)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(d.Zc&512){for(;16>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(y!==(d.check&65535)){b.Pa="header crc mismatch";d.mode=30;break}z=y=0}d.head&&(d.head.cj=d.Zc>>9&1,d.head.bp=!0);b.Ea=d.check=0;d.mode=12;break;case 10:for(;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}b.Ea=d.check=e(y);z=y=0;d.mode=11;
case 11:if(0===d.MG)return b.Pc=q,b.ua=K,b.qh=m,b.tc=p,d.Nl=y,d.qd=z,2;b.Ea=d.check=1;d.mode=12;case 12:if(5===c||6===c)break a;case 13:if(d.fv){y>>>=z&7;z-=z&7;d.mode=27;break}for(;3>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.fv=y&1;y>>>=1;z-=1;switch(y&3){case 0:d.mode=14;break;case 1:E=d;if(B){W=void 0;I=new t.jq(512);G=new t.jq(32);for(W=0;144>W;)E.$d[W++]=8;for(;256>W;)E.$d[W++]=9;for(;280>W;)E.$d[W++]=7;for(;288>W;)E.$d[W++]=8;D(1,E.$d,0,288,I,0,E.et,{qd:9});for(W=0;32>W;)E.$d[W++]=5;D(2,
E.$d,0,32,G,0,E.et,{qd:5});B=!1}E.ok=I;E.gj=9;E.mn=G;E.ap=5;d.mode=20;if(6===c){y>>>=2;z-=2;break a}break;case 2:d.mode=17;break;case 3:b.Pa="invalid block type",d.mode=30}y>>>=2;z-=2;break;case 14:y>>>=z&7;for(z-=z&7;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if((y&65535)!==(y>>>16^65535)){b.Pa="invalid stored block lengths";d.mode=30;break}d.length=y&65535;z=y=0;d.mode=15;if(6===c)break a;case 15:d.mode=16;case 16:if(E=d.length){E>p&&(E=p);E>K&&(E=K);if(0===E)break a;t.Wh(l,g,m,E,q);p-=E;m+=
E;K-=E;q+=E;d.length-=E;break}d.mode=12;break;case 17:for(;14>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.Jp=(y&31)+257;y>>>=5;z-=5;d.as=(y&31)+1;y>>>=5;z-=5;d.KH=(y&15)+4;y>>>=4;z-=4;if(286<d.Jp||30<d.as){b.Pa="too many length or distance symbols";d.mode=30;break}d.ih=0;d.mode=18;case 18:for(;d.ih<d.KH;){for(;3>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.$d[ki[d.ih++]]=y&7;y>>>=3;z-=3}for(;19>d.ih;)d.$d[ki[d.ih++]]=0;d.ok=d.iH;d.gj=7;E={qd:d.gj};ob=D(0,d.$d,0,19,d.ok,0,d.et,E);d.gj=E.qd;if(ob){b.Pa=
"invalid code lengths set";d.mode=30;break}d.ih=0;d.mode=19;case 19:for(;d.ih<d.Jp+d.as;){for(;;){E=d.ok[y&(1<<d.gj)-1];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(16>sa)y>>>=qa,z-=qa,d.$d[d.ih++]=sa;else{if(16===sa){for(E=qa+2;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=qa;z-=qa;if(0===d.ih){b.Pa="invalid bit length repeat";d.mode=30;break}W=d.$d[d.ih-1];E=3+(y&3);y>>>=2;z-=2}else if(17===sa){for(E=qa+3;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;
z+=8}y>>>=qa;z-=qa;W=0;E=3+(y&7);y>>>=3;z-=3}else{for(E=qa+7;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=qa;z-=qa;W=0;E=11+(y&127);y>>>=7;z-=7}if(d.ih+E>d.Jp+d.as){b.Pa="invalid bit length repeat";d.mode=30;break}for(;E--;)d.$d[d.ih++]=W}}if(30===d.mode)break;if(0===d.$d[256]){b.Pa="invalid code -- missing end-of-block";d.mode=30;break}d.gj=9;E={qd:d.gj};ob=D(1,d.$d,0,d.Jp,d.ok,0,d.et,E);d.gj=E.qd;if(ob){b.Pa="invalid literal/lengths set";d.mode=30;break}d.ap=6;d.mn=d.iF;E={qd:d.ap};ob=D(2,
d.$d,d.Jp,d.as,d.mn,0,d.et,E);d.ap=E.qd;if(ob){b.Pa="invalid distances set";d.mode=30;break}d.mode=20;if(6===c)break a;case 20:d.mode=21;case 21:if(6<=p&&258<=K){b.Pc=q;b.ua=K;b.qh=m;b.tc=p;d.Nl=y;d.qd=z;v(b,Z);q=b.Pc;l=b.tb;K=b.ua;m=b.qh;g=b.input;p=b.tc;y=d.Nl;z=d.qd;12===d.mode&&(d.back=-1);break}for(d.back=0;;){E=d.ok[y&(1<<d.gj)-1];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(Ca&&0===(Ca&240)){W=qa;Xa=Ca;for(jb=sa;;){E=d.ok[jb+((y&(1<<W+Xa)-1)>>
W)];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(W+qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=W;z-=W;d.back+=W}y>>>=qa;z-=qa;d.back+=qa;d.length=sa;if(0===Ca){d.mode=26;break}if(Ca&32){d.back=-1;d.mode=12;break}if(Ca&64){b.Pa="invalid literal/length code";d.mode=30;break}d.sb=Ca&15;d.mode=22;case 22:if(d.sb){for(E=d.sb;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.length+=y&(1<<d.sb)-1;y>>>=d.sb;z-=d.sb;d.back+=d.sb}d.tU=d.length;d.mode=23;case 23:for(;;){E=d.mn[y&(1<<d.ap)-1];qa=E>>>24;Ca=
E>>>16&255;sa=E&65535;if(qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(0===(Ca&240)){W=qa;Xa=Ca;for(jb=sa;;){E=d.mn[jb+((y&(1<<W+Xa)-1)>>W)];qa=E>>>24;Ca=E>>>16&255;sa=E&65535;if(W+qa<=z)break;if(0===p)break a;p--;y+=g[m++]<<z;z+=8}y>>>=W;z-=W;d.back+=W}y>>>=qa;z-=qa;d.back+=qa;if(Ca&64){b.Pa="invalid distance code";d.mode=30;break}d.offset=sa;d.sb=Ca&15;d.mode=24;case 24:if(d.sb){for(E=d.sb;z<E;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}d.offset+=y&(1<<d.sb)-1;y>>>=d.sb;z-=d.sb;d.back+=d.sb}if(d.offset>
d.uu){b.Pa="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===K)break a;E=Z-K;if(d.offset>E){E=d.offset-E;if(E>d.Kk&&d.QA){b.Pa="invalid distance too far back";d.mode=30;break}E>d.hg?(E-=d.hg,W=d.ig-E):W=d.hg-E;E>d.length&&(E=d.length);Xa=d.window}else Xa=l,W=q-d.offset,E=d.length;E>K&&(E=K);K-=E;d.length-=E;do l[q++]=Xa[W++];while(--E);0===d.length&&(d.mode=21);break;case 26:if(0===K)break a;l[q++]=d.length;K--;d.mode=21;break;case 27:if(d.ic){for(;32>z;){if(0===p)break a;p--;
y|=g[m++]<<z;z+=8}Z-=K;b.nm+=Z;d.total+=Z;Z&&(b.Ea=d.check=d.Zc?u(d.check,l,Z,q-Z):s(d.check,l,Z,q-Z));Z=K;if((d.Zc?y:e(y))!==d.check){b.Pa="incorrect data check";d.mode=30;break}z=y=0}d.mode=28;case 28:if(d.ic&&d.Zc){for(;32>z;){if(0===p)break a;p--;y+=g[m++]<<z;z+=8}if(y!==(d.total&4294967295)){b.Pa="incorrect length check";d.mode=30;break}z=y=0}d.mode=29;case 29:ob=1;break a;case 30:ob=-3;break a;case 31:return-4;default:return-2}b.Pc=q;b.ua=K;b.qh=m;b.tc=p;d.Nl=y;d.qd=z;if(g=d.ig||Z!==b.ua&&30>
d.mode&&(27>d.mode||4!==c))g=b.tb,m=b.Pc,q=Z-b.ua,K=b.state,null===K.window&&(K.ig=1<<K.cq,K.hg=0,K.Kk=0,K.window=new t.Hi(K.ig)),q>=K.ig?(t.Wh(K.window,g,m-K.ig,K.ig,0),K.hg=0,K.Kk=K.ig):(p=K.ig-K.hg,p>q&&(p=q),t.Wh(K.window,g,m-q,p,K.hg),(q-=p)?(t.Wh(K.window,g,m-q,q,0),K.hg=q,K.Kk=K.ig):(K.hg+=p,K.hg===K.ig&&(K.hg=0),K.Kk<K.ig&&(K.Kk+=p))),g=0;if(g)return d.mode=31,-4;ga-=b.tc;Z-=b.ua;b.vj+=ga;b.nm+=Z;d.total+=Z;d.ic&&Z&&(b.Ea=d.check=d.Zc?u(d.check,l,Z,b.Pc-Z):s(d.check,l,Z,b.Pc-Z));b.$o=d.qd+
(d.fv?64:0)+(12===d.mode?128:0)+(20===d.mode||15===d.mode?256:0);(0===ga&&0===Z||4===c)&&0===ob&&(ob=-5);return ob};d.fQ=function(b){if(!b||!b.state)return-2;var c=b.state;c.window&&(c.window=null);b.state=null;return 0};d.gQ=function(b,c){var d;b&&b.state&&(d=b.state,0!==(d.ic&2)&&(d.head=c,c.bp=!1))};d.pY="pako inflate (from Nodeca project)"},{"../utils/common":22,"./adler32":24,"./crc32":26,"./inffast":29,"./inftrees":31}],31:[function(b,c){var d=b("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,
15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.Ac=function(b,c,t,s,u,v,D,B){for(var I=B.qd,G=0,Q=0,M=0,L=0,J=0,H=0,O=0,N=0,Y=0,K=0,y,z,ga=null,Z=0,E,W=new d.jg(16),
H=new d.jg(16),Xa=null,qa=0,Ca,sa,jb,G=0;15>=G;G++)W[G]=0;for(Q=0;Q<s;Q++)W[c[t+Q]]++;J=I;for(L=15;1<=L&&0===W[L];L--);J>L&&(J=L);if(0===L)return u[v++]=20971520,u[v++]=20971520,B.qd=1,0;for(M=1;M<L&&0===W[M];M++);J<M&&(J=M);for(G=N=1;15>=G;G++)if(N<<=1,N-=W[G],0>N)return-1;if(0<N&&(0===b||1!==L))return-1;H[1]=0;for(G=1;15>G;G++)H[G+1]=H[G]+W[G];for(Q=0;Q<s;Q++)0!==c[t+Q]&&(D[H[c[t+Q]]++]=Q);switch(b){case 0:ga=Xa=D;E=19;break;case 1:ga=e;Z-=257;Xa=g;qa-=257;E=256;break;default:ga=l,Xa=m,E=-1}Q=K=
0;G=M;I=v;H=J;O=0;z=-1;Y=1<<J;s=Y-1;if(1===b&&852<Y||2===b&&592<Y)return 1;for(var ob=0;;){ob++;Ca=G-O;D[Q]<E?(sa=0,jb=D[Q]):D[Q]>E?(sa=Xa[qa+D[Q]],jb=ga[Z+D[Q]]):(sa=96,jb=0);N=1<<G-O;M=y=1<<H;do y-=N,u[I+(K>>O)+y]=Ca<<24|sa<<16|jb|0;while(0!==y);for(N=1<<G-1;K&N;)N>>=1;0!==N?(K&=N-1,K+=N):K=0;Q++;if(0===--W[G]){if(G===L)break;G=c[t+D[Q]]}if(G>J&&(K&s)!==z){0===O&&(O=J);I+=M;H=G-O;for(N=1<<H;H+O<L;){N-=W[H+O];if(0>=N)break;H++;N<<=1}Y+=1<<H;if(1===b&&852<Y||2===b&&592<Y)return 1;z=K&s;u[z]=J<<24|
H<<16|I-v|0}}0!==K&&(u[I+K]=G-O<<24|4194304);B.qd=J;return 0}},{"../utils/common":22}],32:[function(b,c){c.Ac={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],33:[function(b,c,d){function e(b,c){this.lF=b;this.Hp=0;this.lm=c}function g(b,c,d,e,g){this.qJ=b;this.FN=c;this.EN=d;this.uN=e;this.PQ=g;this.LG=b&&b.length}function l(b){for(var c=b.length;0<=--c;)b[c]=0}function m(b,
c){b.Bc[b.wa++]=c&255;b.Bc[b.wa++]=c>>>8&255}function q(b,c,d){b.pe>16-d?(b.nf|=c<<b.pe&65535,m(b,b.nf),b.nf=c>>16-b.pe,b.pe+=d-16):(b.nf|=c<<b.pe&65535,b.pe+=d)}function p(b,c,d){q(b,d[2*c],d[2*c+1])}function t(b,c){var d=0;do d|=b&1,b>>>=1,d<<=1;while(0<--c);return d>>>1}function s(b,c,d){var e=Array(16),g=0,l;for(l=1;15>=l;l++)e[l]=g=g+d[l-1]<<1;for(d=0;d<=c;d++)g=b[2*d+1],0!==g&&(b[2*d]=t(e[g]++,g))}function u(b){var c;for(c=0;286>c;c++)b.Qf[2*c]=0;for(c=0;30>c;c++)b.on[2*c]=0;for(c=0;19>c;c++)b.Ie[2*
c]=0;b.Qf[512]=1;b.vk=b.Tp=0;b.mh=b.matches=0}function v(b){8<b.pe?m(b,b.nf):0<b.pe&&(b.Bc[b.wa++]=b.nf);b.nf=0;b.pe=0}function D(b,c,d,e){var g=2*c,l=2*d;return b[g]<b[l]||b[g]===b[l]&&e[c]<=e[d]}function B(b,c,d){for(var e=b.Mc[d],g=d<<1;g<=b.jk;){g<b.jk&&D(c,b.Mc[g+1],b.Mc[g],b.depth)&&g++;if(D(c,e,b.Mc[g],b.depth))break;b.Mc[d]=b.Mc[g];d=g;g<<=1}b.Mc[d]=e}function I(b,c,d){var e,g,l=0,m,s;if(0!==b.mh){do e=b.Bc[b.gr+2*l]<<8|b.Bc[b.gr+2*l+1],g=b.Bc[b.tz+l],l++,0===e?p(b,g,c):(m=Z[g],p(b,m+256+
1,c),s=O[m],0!==s&&(g-=E[m],q(b,g,s)),e--,m=256>e?ga[e]:ga[256+(e>>>7)],p(b,m,d),s=N[m],0!==s&&(e-=W[m],q(b,e,s)));while(l<b.mh)}p(b,256,c)}function G(b,c){var d=c.lF,e=c.lm.qJ,g=c.lm.LG,l=c.lm.uN,m,p=-1,q;b.jk=0;b.pp=573;for(m=0;m<l;m++)0!==d[2*m]?(b.Mc[++b.jk]=p=m,b.depth[m]=0):d[2*m+1]=0;for(;2>b.jk;)q=b.Mc[++b.jk]=2>p?++p:0,d[2*q]=1,b.depth[q]=0,b.vk--,g&&(b.Tp-=e[2*q+1]);c.Hp=p;for(m=b.jk>>1;1<=m;m--)B(b,d,m);q=l;do m=b.Mc[1],b.Mc[1]=b.Mc[b.jk--],B(b,d,1),e=b.Mc[1],b.Mc[--b.pp]=m,b.Mc[--b.pp]=
e,d[2*q]=d[2*m]+d[2*e],b.depth[q]=(b.depth[m]>=b.depth[e]?b.depth[m]:b.depth[e])+1,d[2*m+1]=d[2*e+1]=q,b.Mc[1]=q++,B(b,d,1);while(2<=b.jk);b.Mc[--b.pp]=b.Mc[1];m=c.lF;q=c.Hp;for(var t=c.lm.qJ,u=c.lm.LG,v=c.lm.FN,z=c.lm.EN,y=c.lm.PQ,D,E,G=0,l=0;15>=l;l++)b.Sj[l]=0;m[2*b.Mc[b.pp]+1]=0;for(e=b.pp+1;573>e;e++)g=b.Mc[e],l=m[2*m[2*g+1]+1]+1,l>y&&(l=y,G++),m[2*g+1]=l,g>q||(b.Sj[l]++,D=0,g>=z&&(D=v[g-z]),E=m[2*g],b.vk+=E*(l+D),u&&(b.Tp+=E*(t[2*g+1]+D)));if(0!==G){do{for(l=y-1;0===b.Sj[l];)l--;b.Sj[l]--;b.Sj[l+
1]+=2;b.Sj[y]--;G-=2}while(0<G);for(l=y;0!==l;l--)for(g=b.Sj[l];0!==g;)t=b.Mc[--e],t>q||(m[2*t+1]!==l&&(b.vk+=(l-m[2*t+1])*m[2*t],m[2*t+1]=l),g--)}s(d,p,b.Sj)}function Q(b,c,d){var e,g=-1,l,m=c[1],p=0,q=7,s=4;0===m&&(q=138,s=3);c[2*(d+1)+1]=65535;for(e=0;e<=d;e++)l=m,m=c[2*(e+1)+1],++p<q&&l===m||(p<s?b.Ie[2*l]+=p:0!==l?(l!==g&&b.Ie[2*l]++,b.Ie[32]++):10>=p?b.Ie[34]++:b.Ie[36]++,p=0,g=l,0===m?(q=138,s=3):l===m?(q=6,s=3):(q=7,s=4))}function M(b,c,d){var e,g=-1,l,m=c[1],s=0,t=7,u=4;0===m&&(t=138,u=3);
for(e=0;e<=d;e++)if(l=m,m=c[2*(e+1)+1],!(++s<t&&l===m)){if(s<u){do p(b,l,b.Ie);while(0!==--s)}else 0!==l?(l!==g&&(p(b,l,b.Ie),s--),p(b,16,b.Ie),q(b,s-3,2)):10>=s?(p(b,17,b.Ie),q(b,s-3,3)):(p(b,18,b.Ie),q(b,s-11,7));s=0;g=l;0===m?(t=138,u=3):l===m?(t=6,u=3):(t=7,u=4)}}function L(b){var c=4093624447,d;for(d=0;31>=d;d++,c>>>=1)if(c&1&&0!==b.Qf[2*d])return 0;if(0!==b.Qf[18]||0!==b.Qf[20]||0!==b.Qf[26])return 1;for(d=32;256>d;d++)if(0!==b.Qf[2*d])return 1;return 0}function J(b,c,d,e){q(b,0+(e?1:0),3);
v(b);m(b,d);m(b,~d);H.Wh(b.Bc,b.window,c,d,b.wa);b.wa+=d}var H=b("../utils/common"),O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],y=Array(576);l(y);var z=Array(60);l(z);var ga=Array(512);l(ga);var Z=Array(256);l(Z);var E=Array(29);l(E);var W=Array(30);l(W);var Xa,qa,Ca,sa=!1;d.XL=function(b){if(!sa){var c,d,l,m=Array(16);
for(l=d=0;28>l;l++)for(E[l]=d,c=0;c<1<<O[l];c++)Z[d++]=l;Z[d-1]=l;for(l=d=0;16>l;l++)for(W[l]=d,c=0;c<1<<N[l];c++)ga[d++]=l;for(d>>=7;30>l;l++)for(W[l]=d<<7,c=0;c<1<<N[l]-7;c++)ga[256+d++]=l;for(c=0;15>=c;c++)m[c]=0;for(c=0;143>=c;)y[2*c+1]=8,c++,m[8]++;for(;255>=c;)y[2*c+1]=9,c++,m[9]++;for(;279>=c;)y[2*c+1]=7,c++,m[7]++;for(;287>=c;)y[2*c+1]=8,c++,m[8]++;s(y,287,m);for(c=0;30>c;c++)z[2*c+1]=5,z[2*c]=t(c,5);Xa=new g(y,O,257,286,15);qa=new g(z,N,0,30,15);Ca=new g([],Y,0,19,7);sa=!0}b.ev=new e(b.Qf,
Xa);b.su=new e(b.on,qa);b.iE=new e(b.Ie,Ca);b.nf=0;b.pe=0;u(b)};d.YL=J;d.WL=function(b,c,d,e){var g,l,m=0;if(0<b.Oe){2===b.Ga.$o&&(b.Ga.$o=L(b));G(b,b.ev);G(b,b.su);Q(b,b.Qf,b.ev.Hp);Q(b,b.on,b.su.Hp);G(b,b.iE);for(m=18;3<=m&&0===b.Ie[2*K[m]+1];m--);b.vk+=3*(m+1)+14;g=b.vk+3+7>>>3;l=b.Tp+3+7>>>3;l<=g&&(g=l)}else g=l=d+5;if(d+4<=g&&-1!==c)J(b,c,d,e);else if(4===b.rj||l===g)q(b,2+(e?1:0),3),I(b,y,z);else{q(b,4+(e?1:0),3);c=b.ev.Hp+1;d=b.su.Hp+1;m+=1;q(b,c-257,5);q(b,d-1,5);q(b,m-4,4);for(g=0;g<m;g++)q(b,
b.Ie[2*K[g]+1],3);M(b,b.Qf,c-1);M(b,b.on,d-1);I(b,b.Qf,b.on)}u(b);e&&v(b)};d.fl=function(b,c,d){b.Bc[b.gr+2*b.mh]=c>>>8&255;b.Bc[b.gr+2*b.mh+1]=c&255;b.Bc[b.tz+b.mh]=d&255;b.mh++;0===c?b.Qf[2*d]++:(b.matches++,c--,b.Qf[2*(Z[d]+256+1)]++,b.on[2*(256>c?ga[c]:ga[256+(c>>>7)])]++);return b.mh===b.Ur-1};d.VL=function(b){q(b,2,3);p(b,256,y);16===b.pe?(m(b,b.nf),b.nf=0,b.pe=0):8<=b.pe&&(b.Bc[b.wa++]=b.nf&255,b.nf>>=8,b.pe-=8)}},{"../utils/common":22}],34:[function(b,c){c.Ac=function(){this.input=null;this.vj=
this.tc=this.qh=0;this.tb=null;this.nm=this.ua=this.Pc=0;this.Pa="";this.state=null;this.$o=2;this.Ea=0}},{}]},{},[7])(7)}"object"==typeof exports?module.Ac=yp():"function"==typeof define&&define.DX?define(yp):"undefined"!=typeof window?window.nC=yp():"undefined"!=typeof global?global.nC=yp():"undefined"!=typeof self&&(self.nC=yp());!0;h("JSZip");h("ZipObject");P.ug=function(a){this.Et=new xp(a)};k(P.ug,Bc);h("gxnat.Zip",P.ug);P.ug.UF=function(a,b,c,d){if(!Ha(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=P.QC;var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new P.ug(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()};P.ug.prototype.Zi=function(){return this.Et.files};
P.ug.prototype.Gz=function(a){w(this.Zi(),function(b){a(b.name,b.qM())}.bind(this))};P.ug.prototype.k=function(){P.ug.g.k.call(this);this.Gz(function(a){this.Et.remove(a)}.bind(this));wb(this.Et);delete this.Et};h("gxnat.Zip.prototype.getFiles",P.ug.prototype.Zi);h("gxnat.Zip.prototype.loopFiles",P.ug.prototype.Gz);h("gxnat.Zip.getFilesAsZip",P.ug.UF);h("gxnat.Zip.prototype.dispose",P.ug.prototype.k);P.d.ef=function(){Bc.call(this)};k(P.d.ef,Bc);h("gxnat.vis.VisNode",P.d.ef);f=P.d.ef.prototype;f.Vj="Generic";f.Yv=function(a){this.Vj=a};f.$N=function(){return this.Vj};f.Xp="";f.Cs=function(a){this.Xp=a};f.sP=function(){return this.Xp};f.Ae=null;f.yh=function(a){this.Ae=a};f.Fg=function(){return this.Ae};f.k=function(){P.d.ef.g.k.call(this);this.Vj&&delete this.Vj;this.Xp&&delete this.Xp;this.Ae&&delete this.Ae};h("gxnat.vis.VisNode.prototype.setCategory",P.d.ef.prototype.Yv);
h("gxnat.vis.VisNode.prototype.getCategory",P.d.ef.prototype.$N);h("gxnat.vis.VisNode.prototype.setThumbnailUrl",P.d.ef.prototype.Cs);h("gxnat.vis.VisNode.prototype.getThumbnailUrl",P.d.ef.prototype.sP);h("gxnat.vis.VisNode.prototype.setTitle",P.d.ef.prototype.yh);h("gxnat.vis.VisNode.prototype.getTitle",P.d.ef.prototype.Fg);h("gxnat.vis.VisNode.prototype.dispose",P.d.ef.prototype.k);P.d.qg=function(a){P.d.ef.call(this);this.pg=a||null};k(P.d.qg,P.d.ef);h("gxnat.vis.Renderable",P.d.qg);P.d.qg.prototype.YA=function(a){this.pg=a instanceof P.d.Gm?a:new P.d.Gm(a)};P.d.qg.prototype.bP=function(){return this.pg};P.d.qg.prototype.k=function(){P.d.qg.g.k.call(this);this.pg&&(this.pg.k(),delete this.pg)};h("gxnat.vis.Renderable.prototype.setRenderProperties",P.d.qg.prototype.YA);h("gxnat.vis.Renderable.prototype.getRenderProperties",P.d.qg.prototype.bP);
h("gxnat.vis.Renderable.prototype.dispose",P.d.qg.prototype.k);P.d.Ff=function(a,b){P.d.qg.call(this,b);this.El=a||[];null!=b&&this.YA(b)};k(P.d.Ff,P.d.qg);h("gxnat.vis.Viewable",P.d.Ff);f=P.d.Ff.prototype;f.Cl=null;f.lO=function(){return this.Cl};f.xT=function(a){return this.Cl=a};f.BI=function(a){null!=this.Cl&&wb(this.Cl);this.Cl={};var b=this.Zi();A(b,function(a){this.Cl[a]=null}.bind(this));var c,d,e,g;a.Gz(function(a,m){c=0;for(d=b.length;c<d;c++)if(e=b[c],g="/files/"+a.split("/files/")[1],Ha(e,g)){this.Cl[e]=m;break}}.bind(this));a.k()};f.Zi=function(){return this.El};
f.dT=function(a){window.TX.log("REMOVING FILE",a);Pb(this.El,a)};f.hl=function(a,b){null==this.El&&(this.El=[]);ia(a)||(a=[a]);A(a,function(a){null!=b&&null==b(a)||this.El.push(a)}.bind(this))};f.k=function(){P.d.Ff.g.k.call(this);this.El&&(Nb(this.El),delete this.El)};h("gxnat.vis.Viewable.prototype.getFileData",P.d.Ff.prototype.lO);h("gxnat.vis.Viewable.prototype.setFileData",P.d.Ff.prototype.xT);h("gxnat.vis.Viewable.prototype.setFileDataFromZip",P.d.Ff.prototype.BI);
h("gxnat.vis.Viewable.prototype.getFiles",P.d.Ff.prototype.Zi);h("gxnat.vis.Viewable.prototype.removeFile",P.d.Ff.prototype.dT);h("gxnat.vis.Viewable.prototype.addFiles",P.d.Ff.prototype.hl);h("gxnat.vis.Viewable.prototype.dispose",P.d.Ff.prototype.k);P.d.rg=function(a){P.d.qg.call(this);null!=a?ia(a)||(a=[a]):a=[];this.rq=a};k(P.d.rg,P.d.qg);h("gxnat.vis.ViewableGroup",P.d.rg);P.d.rg.prototype.JD=function(a){return this.rq.push(a)};P.d.rg.prototype.VN=function(){var a=[];A(this.rq,function(b){a=Qb(a,b.Zi())});return a};P.d.rg.prototype.$i=function(){return this.rq};P.d.rg.prototype.k=function(){P.d.rg.g.k.call(this);A(this.rq,function(a){ia(a)?A(a,function(a){a.k()}):a instanceof P.d.Ff&&a.k()});delete this.rq};
h("gxnat.vis.ViewableGroup.prototype.addViewable",P.d.rg.prototype.JD);h("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",P.d.rg.prototype.VN);h("gxnat.vis.ViewableGroup.prototype.getViewables",P.d.rg.prototype.$i);h("gxnat.vis.ViewableGroup.prototype.dispose",P.d.rg.prototype.k);V.a.c.af=function(){V.a.c.w.call(this);this.Vn(vh("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+r(),type:"radio"}));R(this.O,V.a.c.af.CSS.aL);C(this.O,"change",this.ue.bind(this))};k(V.a.c.af,V.a.c.w);h("xiv.ui.ctrl.RadioButtonController",V.a.c.af);V.a.c.af.ID_PREFIX="xiv.ui.ctrl.RadioButtonController";V.a.c.af.CSS_SUFFIX={aL:"radiobutton"};V.a.c.af.prototype.ue=function(){this.dispatchEvent({type:"o",checked:this.O.checked})};V.a.c.af.prototype.i=function(){V.a.c.af.g.i.call(this)};
h("xiv.ui.ctrl.RadioButtonController.ID_PREFIX",V.a.c.af.ID_PREFIX);h("xiv.ui.ctrl.RadioButtonController.CSS_SUFFIX",V.a.c.af.CSS_SUFFIX);h("xiv.ui.ctrl.RadioButtonController.prototype.dispatchComponentEvent",V.a.c.af.prototype.ue);h("xiv.ui.ctrl.RadioButtonController.prototype.disposeInternal",V.a.c.af.prototype.i);V.a.c.Hh=function(){V.a.c.w.call(this);this.io=[]};k(V.a.c.Hh,V.a.c.w);h("xiv.ui.ctrl.MasterController2D",V.a.c.Hh);V.a.c.Hh.ID_PREFIX="xiv.ui.ctrl.MasterController2D";V.a.c.Hh.CSS_SUFFIX={};V.a.c.Hh.prototype.add=function(){};V.a.c.Hh.prototype.i=function(){V.a.c.Hh.g.i.call(this);Nb(this.io);delete this.io};h("xiv.ui.ctrl.MasterController2D.ID_PREFIX",V.a.c.Hh.ID_PREFIX);h("xiv.ui.ctrl.MasterController2D.CSS_SUFFIX",V.a.c.Hh.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController2D.prototype.add",V.a.c.Hh.prototype.add);
h("xiv.ui.ctrl.MasterController2D.prototype.disposeInternal",V.a.c.Hh.prototype.i);V.a.c.Zb=function(){V.a.c.w.call(this);this.yi("Master Opacity")};k(V.a.c.Zb,V.a.c.w);h("xiv.ui.ctrl.SliderController",V.a.c.Zb);V.a.c.Zb.ID_PREFIX="xiv.ui.ctrl.SliderController";V.a.c.Zb.CSS_SUFFIX={Xa:"slider",Qk:"slider-thumb",ut:"slider-thumb-hover",Rk:"slider-track",DC:"slider-track-hover",Vw:"value-input"};f=V.a.c.Zb.prototype;f.GB=2;f.Ds=function(a){this.GB=a};f.p=function(a){V.a.c.Zb.g.p.call(this,a);this.dy();this.fy()};
f.dy=function(){var a=new U.D;this.Vn(a);a.$f(0);a.Te(1);a.qj(.01);a.aa(1);R(a.b(),V.a.c.Zb.CSS.Xa);R(a.ee,V.a.c.Zb.CSS.Qk);R(a.We,V.a.c.Zb.CSS.Rk);a.bu(V.a.c.Zb.CSS.ut);a.xx(V.a.c.Zb.CSS.DC);C(this.O,"change",this.ue.bind(this))};f.fy=function(){this.Ja=vh("input");this.Ja.type="number";R(this.Ja,V.a.c.Zb.CSS.Vw);zh(this.b(),this.Ja);C(this.Ja,"input",this.yA.bind(this));this.update()};
f.yA=function(){window.console.log("on value input");var a=this.O,b=parseFloat(this.Ja.value),b=nd(b,a.bb(),a.La());this.Ja.value=b;a.aa(b)};f.vP=function(){return this.Ja};f.ue=function(){var a=this.O,b=a.ea().toFixed(this.GB),c=parseInt(this.Ja.value);this.Ja.value=b;this.dispatchEvent({type:"o",value:b,Oz:a.bb(),Lz:a.La(),dI:c})};
f.update=function(){var a=this.O,b=a.ea();a.o();a.aa(0);a.aa(b);a.fk()!==this.Ja.step&&(this.Ja.step=a.fk());a.bb()!==this.Ja.min&&(this.Ja.min=a.bb());a.La()!==this.Ja.max&&(this.Ja.max=a.La());a.ea()!==this.Ja.value&&(this.Ja.value=b)};f.i=function(){V.a.c.Zb.g.i.call(this);delete this.GB;null!=this.Ja&&(ad(this.Ja),S(this.Ja),delete this.Ja)};h("xiv.ui.ctrl.SliderController.ID_PREFIX",V.a.c.Zb.ID_PREFIX);h("xiv.ui.ctrl.SliderController.CSS_SUFFIX",V.a.c.Zb.CSS_SUFFIX);
h("xiv.ui.ctrl.SliderController.prototype.setValueDecimals",V.a.c.Zb.prototype.Ds);h("xiv.ui.ctrl.SliderController.prototype.render",V.a.c.Zb.prototype.p);h("xiv.ui.ctrl.SliderController.prototype.getValueInput",V.a.c.Zb.prototype.vP);h("xiv.ui.ctrl.SliderController.prototype.dispatchComponentEvent",V.a.c.Zb.prototype.ue);h("xiv.ui.ctrl.SliderController.prototype.update",V.a.c.Zb.prototype.update);h("xiv.ui.ctrl.SliderController.prototype.disposeInternal",V.a.c.Zb.prototype.i);V.a.c.Gc=function(){V.a.c.w.call(this);this.yi("TwoThumb");this.dy();this.fy();this.Sf=vh("input");this.Sf.type="number";R(this.Sf,V.a.c.Gc.CSS.pK);zh(this.b(),this.Sf);C(this.Sf,"input",this.rR.bind(this));zp(this)};k(V.a.c.Gc,V.a.c.w);h("xiv.ui.ctrl.TwoThumbSliderController",V.a.c.Gc);V.a.c.Gc.ID_PREFIX="xiv.ui.ctrl.TwoThumbSliderController";
V.a.c.Gc.CSS_SUFFIX={Xa:"slider",Qk:"slider-thumb",kL:"slider-thumb-extent",lL:"slider-thumb-value",ut:"slider-thumb-hover",Rk:"slider-track",DC:"slider-track-hover",Vw:"value-input",pK:"extent-input"};f=V.a.c.Gc.prototype;
f.dy=function(){this.Ia=new Ln;this.Ia.C();var a=this.Ia.b();a.setAttribute("id","ThresholdSlider_"+r());R(a,V.a.c.Gc.CSS.Xa);var b=vh("div",{id:"ThwoThumbSlider_track_"+r(),"class":V.a.c.Gc.CSS.Rk});a.appendChild(b);this.Vn(this.Ia);R(this.Ia.Qa,V.a.c.Gc.CSS.Qk);R(this.Ia.Qa,V.a.c.Gc.CSS.lL);Qk.dm(this.Ia.Qa,V.a.c.Gc.CSS.ut);R(this.Ia.Jd,V.a.c.Gc.CSS.Qk);R(this.Ia.Jd,V.a.c.Gc.CSS.kL);Qk.dm(this.Ia.Jd,V.a.c.Gc.CSS.ut);C(this.Ia,"change",this.ue.bind(this))};
f.update=function(){var a=ti(this.Ia.Qa).width,b=this.Ia.La()-this.Ia.bb(),c=ti(this.Ia.b()).width-a,a=c*((this.Ia.ea()-this.Ia.bb())/b),b=c*(this.Ia.fh()/b);this.Ia.Qa.style.left=a.toString()+"px";this.Ia.Jd.style.left=b.toString()+"px";Ap(this);zp(this)};function Ap(a){a.Ja.step=1;a.Ja.min=a.Ia.bb();a.Ja.max=a.Ia.La();a.Ja.value=a.Ia.ea()}function zp(a){a.Sf.step=1;a.Sf.min=a.Ia.bb();a.Sf.max=a.Ia.La();a.Sf.value=a.Ia.fh()+a.Ia.ea()}
f.fy=function(){this.Ja=vh("input");this.Ja.type="number";R(this.Ja,V.a.c.Gc.CSS.Vw);zh(this.b(),this.Ja);C(this.Ja,"input",this.yA.bind(this));Ap(this)};f.yA=function(a){window.console.log(a,this.Ja);this.Ia.aa(parseInt(this.Ja.value))};f.rR=function(){this.Ia.am(parseInt(this.Sf.value)-this.Ia.ea())};f.ue=function(){var a=this.Ia.ea(),b=this.Ia.fh()+a;this.Ja.value=a;this.Sf.value=b;this.dispatchEvent({type:"o",lower:a,upper:b})};
f.i=function(){V.a.c.Gc.g.i.call(this);null!=this.Ia&&(ad(this.Ia),null==this.Ia.nb&&(this.Ia.nb=new tn),this.Ia.k(),delete this.Ia);null!=this.Ja&&(ad(this.Ja),S(this.Ja),delete this.Ja);null!=this.Sf&&(ad(this.Sf),S(this.Sf),delete this.Sf)};h("xiv.ui.ctrl.TwoThumbSliderController.ID_PREFIX",V.a.c.Gc.ID_PREFIX);h("xiv.ui.ctrl.TwoThumbSliderController.CSS_SUFFIX",V.a.c.Gc.CSS_SUFFIX);h("xiv.ui.ctrl.TwoThumbSliderController.prototype.update",V.a.c.Gc.prototype.update);
h("xiv.ui.ctrl.TwoThumbSliderController.prototype.dispatchComponentEvent",V.a.c.Gc.prototype.ue);h("xiv.ui.ctrl.TwoThumbSliderController.prototype.disposeInternal",V.a.c.Gc.prototype.i);V.a.c.he=function(){V.a.c.w.call(this);this.pm=[]};k(V.a.c.he,V.a.c.w);h("xiv.ui.ctrl.MasterController3D",V.a.c.he);V.a.c.he.ID_PREFIX="xiv.ui.ctrl.MasterController3D";V.a.c.he.CSS_SUFFIX={};V.a.c.he.prototype.add=function(a){this.pm.push(a);this.QD(a,V.a.c.Zb);1==this.pm.length&&zh(document.body,this.b())};V.a.c.he.prototype.i=function(){V.a.c.he.g.i.call(this);Nb(this.pm);delete this.pm};h("xiv.ui.ctrl.MasterController3D.ID_PREFIX",V.a.c.he.ID_PREFIX);
h("xiv.ui.ctrl.MasterController3D.CSS_SUFFIX",V.a.c.he.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController3D.CONTROLLERS",{PW:"Visible",GV:"Opacity"});h("xiv.ui.ctrl.MasterController3D.prototype.add",V.a.c.he.prototype.add);h("xiv.ui.ctrl.MasterController3D.prototype.disposeInternal",V.a.c.he.prototype.i);V.a.c.Lb=function(){V.a.c.he.call(this)};k(V.a.c.Lb,V.a.c.he);h("xiv.ui.ctrl.VolumeController3D",V.a.c.Lb);V.a.c.Lb.ID_PREFIX="xiv.ui.ctrl.VolumeController3D";V.a.c.Lb.zw=1E3;V.a.c.Lb.CSS_SUFFIX={};V.a.c.Lb.prototype.TD=function(a){var b=this.Ag(V.a.c.Ad,"Volume Rendering",function(b){a.bt=b.checked});V.a.c.w.Ng(a,b);this.Ah.push(b);b.O.xh(!1)};V.a.c.Lb.UR=function(a){a.target[V.a.c.Lb.yt].qk=parseFloat(a.lower);a.target[V.a.c.Lb.yt].Bj=parseFloat(a.upper)};V.a.c.Lb.yt=r();
V.a.c.Lb.prototype.RD=function(a){var b=this.Ag(V.a.c.Gc,"Threshold",this.constructor.UR);b[V.a.c.Lb.yt]=a;V.a.c.w.Ng(a,b);this.Ah.push(b);var c=a.qk,d=a.Bj;-Infinity==c&&(c=-1*V.a.c.Lb.zw,a.qk=c);Infinity==a.Bj&&(d=V.a.c.Lb.zw,a.Bj=d);b=b.O;b.$f(c);b.Te(d);Hn(b,d-c);b.aa(c);b.qj(10);b.am(d-c);a.Bj=d;a.qk=c};V.a.c.Lb.prototype.add=function(a){V.a.c.Lb.g.add.call(this,a);this.TD(a);this.RD(a)};V.a.c.Lb.prototype.o=function(){V.a.c.Lb.g.o.call(this)};h("xiv.ui.ctrl.VolumeController3D.ID_PREFIX",V.a.c.Lb.ID_PREFIX);
h("xiv.ui.ctrl.VolumeController3D.DEFAULT_THRESHOLD",V.a.c.Lb.zw);h("xiv.ui.ctrl.VolumeController3D.CSS_SUFFIX",V.a.c.Lb.CSS_SUFFIX);h("xiv.ui.ctrl.VolumeController3D.VOLUME_ID",V.a.c.Lb.yt);h("xiv.ui.ctrl.VolumeController3D.prototype.add_volumeRendering",V.a.c.Lb.prototype.TD);h("xiv.ui.ctrl.VolumeController3D.prototype.add_threshold",V.a.c.Lb.prototype.RD);h("xiv.ui.ctrl.VolumeController3D.prototype.add",V.a.c.Lb.prototype.add);h("xiv.ui.ctrl.VolumeController3D.prototype.updateStyle",V.a.c.Lb.prototype.o);V.a.c.Ye=function(){V.a.c.w.call(this);this.pm=[]};k(V.a.c.Ye,V.a.c.w);h("xiv.ui.ctrl.MasterController",V.a.c.Ye);V.a.c.Ye.ID_PREFIX="xiv.ui.ctrl.MasterController";V.a.c.Ye.CSS_SUFFIX={};V.a.c.Ye.prototype.add=function(a){this.pm.push(a)};V.a.c.Ye.prototype.i=function(){V.a.c.Ye.g.i.call(this);Nb(this.pm);delete this.pm};h("xiv.ui.ctrl.MasterController.ID_PREFIX",V.a.c.Ye.ID_PREFIX);h("xiv.ui.ctrl.MasterController.CSS_SUFFIX",V.a.c.Ye.CSS_SUFFIX);h("xiv.ui.ctrl.MasterController.CONTROLLERS",{});
h("xiv.ui.ctrl.MasterController.prototype.add",V.a.c.Ye.prototype.add);h("xiv.ui.ctrl.MasterController.prototype.disposeInternal",V.a.c.Ye.prototype.i);V.a.c.Jb=function(){V.a.c.Ye.call(this)};k(V.a.c.Jb,V.a.c.Ye);h("xiv.ui.ctrl.LevelsController",V.a.c.Jb);V.a.c.Jb.ID_PREFIX="xiv.ui.ctrl.LevelsController";V.a.c.Jb.CSS_SUFFIX={};V.a.c.Jb.nq=1E3;V.a.c.Jb.oq=0;f=V.a.c.Jb.prototype;f.add=function(a){V.a.c.Jb.g.add.call(this,a);var b=this.MD(a),c=this.PD(a),d=this.OD(a),e=this.KD(a,c,d);a=this.LD(a,c,d);A([c,d,e,a],function(a){C(a.O,"q",function(){b.update()}.bind(this))}.bind(this))};
f.MD=function(a){var b=this.Ag(V.a.c.Fc,"Histogram",function(){}.bind(this));b.gm(a);V.a.c.w.Ng(a,b);this.ij.push(b);b.update();return b};f.PD=function(a){var b=this.Ag(V.a.c.Zb,"Level Min.",function(b){a.Cj=b.value}.bind(this));b.gm(a);V.a.c.w.Ng(a,b);this.ij.push(b);b.O.Te(V.a.c.Jb.nq);b.O.$f(V.a.c.Jb.oq);b.O.aa(V.a.c.Jb.oq);b.O.qj(1);b.Ds(0);b.update();return b};
f.OD=function(a){var b=this.Ag(V.a.c.Zb,"Level Max.");b.gm(a);C(b,"o",function(b){a.Fi=b.value}.bind(this));V.a.c.w.Ng(a,b);this.ij.push(b);b.O.Te(V.a.c.Jb.nq);b.O.$f(V.a.c.Jb.oq);b.O.aa(V.a.c.Jb.nq);b.O.qj(1);b.Ds(0);b.update();return b};
f.KD=function(a,b,c){var d=this.Ag(V.a.c.Zb,"Brightness");d.gm(a);C(d,"o",function(d){d=(d.value-d.dI)/(d.Lz-d.Oz);var g=a.Fi-a.Cj;a.Cj=Math.round(parseInt(a.Cj)-g*d);a.Fi=Math.round(parseInt(a.Fi)-g*d);b.O.aa(a.Cj);c.O.aa(a.Fi)}.bind(this));V.a.c.w.Ng(a,d);this.ij.push(d);d.O.Te(150);d.O.$f(-150);d.O.aa(0);d.O.qj(1);d.Ds(0);d.update();return d};
f.LD=function(a,b,c){var d=this.Ag(V.a.c.Zb,"Contrast");d.gm(a);C(d,"o",function(d){d=(d.value-d.dI)/(d.Lz-d.Oz);var g=parseInt(a.Fi)-parseInt(a.Cj),l=parseInt(a.Fi)-g*d;a.Cj=Math.round(parseInt(a.Cj)+g*d);a.Fi=Math.round(l);b.O.aa(a.Cj);c.O.aa(a.Fi)}.bind(this));V.a.c.w.Ng(a,d);this.ij.push(d);d.O.Te(150);d.O.$f(-150);d.O.aa(0);d.O.qj(1);d.Ds(0);d.update();return d};f.i=function(){V.a.c.Jb.g.i.call(this)};h("xiv.ui.ctrl.LevelsController.ID_PREFIX",V.a.c.Jb.ID_PREFIX);
h("xiv.ui.ctrl.LevelsController.CSS_SUFFIX",V.a.c.Jb.CSS_SUFFIX);h("xiv.ui.ctrl.LevelsController.CONTROLLERS",{HU:"Brightness",RU:"Contrast",oq:"Level Min.",nq:"Level Max.",dV:"Histogram"});h("xiv.ui.ctrl.LevelsController.LEVEL_MAX",V.a.c.Jb.nq);h("xiv.ui.ctrl.LevelsController.LEVEL_MIN",V.a.c.Jb.oq);h("xiv.ui.ctrl.LevelsController.prototype.add",V.a.c.Jb.prototype.add);h("xiv.ui.ctrl.LevelsController.prototype.add_histogram",V.a.c.Jb.prototype.MD);
h("xiv.ui.ctrl.LevelsController.prototype.add_levelMin",V.a.c.Jb.prototype.PD);h("xiv.ui.ctrl.LevelsController.prototype.add_levelMax",V.a.c.Jb.prototype.OD);h("xiv.ui.ctrl.LevelsController.prototype.add_brightness",V.a.c.Jb.prototype.KD);h("xiv.ui.ctrl.LevelsController.prototype.add_contrast",V.a.c.Jb.prototype.LD);h("xiv.ui.ctrl.LevelsController.prototype.disposeInternal",V.a.c.Jb.prototype.i);function Bp(a){fd.call(this);this.ed=null;this.q=a;a=lc||nc&&!uc("531")&&"TEXTAREA"==a.tagName;this.Hd=new Hi(this);this.Hd.I(this.q,a?["keydown","paste","cut","drop","input"]:"input",this)}k(Bp,fd);
Bp.prototype.handleEvent=function(a){if("input"==a.type)lc&&uc(10)&&0==a.keyCode&&0==a.charCode||(Cp(this),kc&&this.q!=kh(this.q).activeElement||this.dispatchEvent(Dp(a)));else if("keydown"!=a.type||kj(a)){var b="keydown"==a.type?this.q.value:null;lc&&229==a.keyCode&&(b=null);var c=Dp(a);Cp(this);this.ed=Wf(function(){this.ed=null;this.q.value!=b&&this.dispatchEvent(c)},0,this)}};function Cp(a){null!=a.ed&&(ba.clearTimeout(a.ed),a.ed=null)}function Dp(a){a=new Lc(a.Zd);a.type="input";return a}
Bp.prototype.i=function(){Bp.g.i.call(this);this.Hd.k();Cp(this);delete this.q};function Ep(a,b,c){aj.call(this,a);Fp(this,b||"#f00");this.className=c||"goog-hsv-palette";this.Sa=Uh(this.da())}k(Ep,aj);f=Ep.prototype;f.aw=function(a){a!=this.cn&&(Fp(this,a),Gp(this),this.dispatchEvent("action"))};function Fp(a,b){var c=sk(b).qp,d=yk(c),e=d[0],g=d[1],l=d[2],d=Math.max(Math.max(e,g),l),m=Math.min(Math.min(e,g),l);if(m==d)m=e=0;else{var q=d-m,m=q/d,e=60*(e==d?(g-l)/q:g==d?2+(l-e)/q:4+(e-g)/q);0>e&&(e+=360);360<e&&(e-=360)}a.we=[e,m,d];a.we[0]/=360;a.cn=c}
function Hp(a,b,c,d){if(null!=b||null!=c||null!=d)a.we[0]=null!=b?b:a.we[0],a.we[1]=null!=c?c:a.we[1],a.we[2]=null!=d?d:a.we[2],b=[360*a.we[0],a.we[1],a.we[2]],b=wk(Ak(b[0],b[1],b[2])),a.cn=b,Gp(a),a.dispatchEvent("action")}f.zg=function(){return!1};
f.C=function(){var a=this.da(),b=lc&&!uc("7")?" "+(this.className+"-noalpha"):"",c=a.C("DIV",this.className+"-hs-backdrop");this.wp=a.C("DIV",this.className+"-hs-handle");this.Ol=a.C("DIV",this.className+"-hs-image",this.wp);this.fo=a.C("DIV",this.className+"-v-image");this.at=a.C("DIV",this.className+"-v-handle");this.kw=a.C("DIV",this.className+"-swatch");this.Gn=a.C("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.C("label",null,this.Gn);this.q=a.C("DIV",this.className+
b,c,this.Ol,this.fo,this.at,this.kw,d)};f.Pb=function(){Ep.g.Pb.call(this);Gp(this);var a=this.Rb();a.I(this.b(),"mousedown",this.bj);this.Jr||(this.Jr=new Bp(this.Gn));a.I(this.Jr,"input",this.OP)};f.i=function(){Ep.g.i.call(this);delete this.Ol;delete this.wp;delete this.fo;delete this.at;delete this.kw;delete this.Gn;this.Jr&&(this.Jr.k(),delete this.Jr);$c(this.Tz);$c(this.Vz)};
function Gp(a){if(a.Fa){var b=a.we[1],c=a.we[2],d=a.Ol.offsetWidth*a.we[0];a.Ig()&&(d=a.Ol.offsetWidth-d);var e=Math.ceil(a.wp.offsetWidth/2),d=d-e,b=a.Ol.offsetHeight*(1-b),b=b-Math.ceil(a.wp.offsetHeight/2),e=a.wp,g=a.Ig();null!==b&&(e.style.top=b+"px");g?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.fo.offsetTop-Math.floor(a.at.offsetHeight/2)+(255-c)/255*a.fo.offsetHeight;a.at.style.top=b+"px";wi(a.Ol,c/255);Yh(a.fo,"background-color",wk(Ak(360*a.we[0],a.we[1],
255)));Yh(a.kw,"background-color",a.cn);Yh(a.kw,"color",127.5<a.we[2]?"#000":"#fff");var l;try{l=sk(a.Gn.value).qp}catch(m){}a.cn!=l&&(a.Gn.value=a.cn)}}f.bj=function(a){if(a.target==this.fo||a.target==this.at){var b=vi(this.fo);this.DG(b,a);this.Tz=C(this.Sa,"mousemove",wa(this.DG,this,b));this.Vz=C(this.Sa,"mouseup",this.li,!1,this)}else if(a.target==this.Ol||a.target==this.wp)b=vi(this.Ol),this.CG(b,a),this.Tz=C(this.Sa,"mousemove",wa(this.CG,this,b)),this.Vz=C(this.Sa,"mouseup",this.li,!1,this)};
f.DG=function(a,b){b.preventDefault();var c=Xh(this.da()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);Hp(this,null,null,c)};f.CG=function(a,b){b.preventDefault();var c=Xh(this.da()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;Hp(this,d,c,null)};f.li=function(){$c(this.Tz);$c(this.Vz)};
f.OP=function(){/^#?[0-9a-f]{6}$/i.test(this.Gn.value)&&this.aw(this.Gn.value)};V.a.c.jc=function(){V.a.c.w.call(this);this.yi("Color");this.nl=vh("div",{id:this.constructor.ID_PREFIX+"_ColorSquare_"+r(),"class":V.a.c.jc.CSS.hK});zh(this.b(),this.nl);C(this.nl,"click",this.gJ.bind(this));this.ml=new Ep;this.ml.p();C(this.ml,"action",this.ue.bind(this));this.Vn(this.ml);R(this.ml.b(),this.constructor.CSS.fK);this.Ti=vh("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+r(),"class":V.a.c.jc.CSS.gK});zh(document.body,this.Ti);zh(this.Ti,this.ml.b());this.Ti.style.visibility=
"hidden";this.Je=vh("div",{id:this.constructor.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.c.jc.CSS.Nk});zh(this.Ti,this.Je);C(this.Je,"click",this.gJ.bind(this))};k(V.a.c.jc,V.a.c.w);h("xiv.ui.ctrl.ColorPaletteController",V.a.c.jc);V.a.c.jc.ID_PREFIX="xiv.ui.ctrl.ColorPaletteController";V.a.c.jc.CSS_SUFFIX={hK:"colorsquare",gK:"colorpaletteholder",fK:"colorpalette",Nk:"closebutton"};V.a.c.jc.zC=20;V.a.c.jc.AC=20;
V.a.c.jc.prototype.gJ=function(){this.Ti.style.visibility="hidden"==this.Ti.style.visibility?"visible":"hidden";var a=ji(this.nl),b=ti(this.nl),c=ti(this.Ti),b=a.x+b.width+V.a.c.jc.zC,a=a.y-V.a.c.jc.AC,d=parseInt(window.innerHeight);a+c.height>d&&(a-=a+c.height-d);ci(this.Ti,b,a)};
V.a.c.jc.prototype.update=function(){var a=Math.floor(255*this[V.a.c.w.ro].color[0]),b=Math.floor(255*this[V.a.c.w.ro].color[1]),c=Math.floor(255*this[V.a.c.w.ro].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.O.aw(wk([a,b,c]))};V.a.c.jc.prototype.ue=function(a){this.nl.style.backgroundColor=a.target.cn;this.dispatchEvent({type:"o",color:yk(a.target.cn).map(function(a){return a/255})})};
V.a.c.jc.prototype.i=function(){V.a.c.jc.g.i.call(this);ad(this.Je);S(this.Je);delete this.Je;ad(this.nl);S(this.nl);delete this.nl;ad(this.ml);this.ml.k();delete this.ml;S(this.Ti);delete this.Ti};h("xiv.ui.ctrl.ColorPaletteController.ID_PREFIX",V.a.c.jc.ID_PREFIX);h("xiv.ui.ctrl.ColorPaletteController.CSS_SUFFIX",V.a.c.jc.CSS_SUFFIX);h("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_X",V.a.c.jc.zC);h("xiv.ui.ctrl.ColorPaletteController.PANEL_MARGIN_Y",V.a.c.jc.AC);
h("xiv.ui.ctrl.ColorPaletteController.prototype.update",V.a.c.jc.prototype.update);h("xiv.ui.ctrl.ColorPaletteController.prototype.dispatchComponentEvent",V.a.c.jc.prototype.ue);h("xiv.ui.ctrl.ColorPaletteController.prototype.disposeInternal",V.a.c.jc.prototype.i);V.a.c.Ih=function(){V.a.c.he.call(this)};k(V.a.c.Ih,V.a.c.he);h("xiv.ui.ctrl.MeshController3D",V.a.c.Ih);V.a.c.Ih.ID_PREFIX="xiv.ui.ctrl.MeshController3D";V.a.c.Ih.CSS_SUFFIX={};V.a.c.Ih.prototype.add=function(a){V.a.c.Ih.g.add.call(this,a);this.zx(a,V.a.c.Ad);this.yx(a,V.a.c.jc)};h("xiv.ui.ctrl.MeshController3D.ID_PREFIX",V.a.c.Ih.ID_PREFIX);h("xiv.ui.ctrl.MeshController3D.CSS_SUFFIX",V.a.c.Ih.CSS_SUFFIX);h("xiv.ui.ctrl.MeshController3D.prototype.add",V.a.c.Ih.prototype.add);
h("xiv.ui.ctrl.MeshController3D.prototype.disposeInternal",V.a.c.Ih.prototype.i);V.a.c.Gi=function(){V.a.c.he.call(this)};k(V.a.c.Gi,V.a.c.he);h("xiv.ui.ctrl.AnnotationsController3D",V.a.c.Gi);V.a.c.Gi.ID_PREFIX="xiv.ui.ctrl.AnnotationsController3D";V.a.c.Gi.CSS_SUFFIX={};V.a.c.Gi.prototype.add=function(a){V.a.c.Gi.g.add.call(this,a);this.zx(a,V.a.c.Ad);this.yx(a,V.a.c.jc)};h("xiv.ui.ctrl.AnnotationsController3D.ID_PREFIX",V.a.c.Gi.ID_PREFIX);h("xiv.ui.ctrl.AnnotationsController3D.CSS_SUFFIX",V.a.c.Gi.CSS_SUFFIX);h("xiv.ui.ctrl.AnnotationsController3D.prototype.add",V.a.c.Gi.prototype.add);V.a.c.ie=function(){V.a.c.Ye.call(this)};k(V.a.c.ie,V.a.c.Ye);h("xiv.ui.ctrl.VolumeController",V.a.c.ie);V.a.c.ie.ID_PREFIX="xiv.ui.ctrl.VolumeController";V.a.c.ie.CSS_SUFFIX={};V.a.c.ie.prototype.add=function(a){V.a.c.ie.g.add.call(this,a);this.SD(a);this.ND(a)};V.a.c.ie.prototype.SD=function(a){var b=this.Ag(V.a.c.af,"Visible",function(){});V.a.c.w.Ng(a,b);this.Ah.push(b);b.gm(a);b.O.checked=a[V.d.og.so]||!1};
V.a.c.ie.prototype.ND=function(a){var b=this.Ag(V.a.c.Ad,"Show Label Map",function(b){a.uz.visible=b.checked});V.a.c.w.Ng(a,b);this.Ah.push(b);b.gm(a);b.O.xh(!1)};V.a.c.ie.prototype.i=function(){V.a.c.ie.g.i.call(this);window.console.log("need to implement dispose methods for VolumeController")};h("xiv.ui.ctrl.VolumeController.ID_PREFIX",V.a.c.ie.ID_PREFIX);h("xiv.ui.ctrl.VolumeController.CSS_SUFFIX",V.a.c.ie.CSS_SUFFIX);h("xiv.ui.ctrl.VolumeController.prototype.add",V.a.c.ie.prototype.add);
h("xiv.ui.ctrl.VolumeController.prototype.add_visibleRadio",V.a.c.ie.prototype.SD);h("xiv.ui.ctrl.VolumeController.prototype.add_labelMapToggle",V.a.c.ie.prototype.ND);h("xiv.ui.ctrl.VolumeController.prototype.disposeInternal",V.a.c.ie.prototype.i);V.a.c.$b=function(){U.S.call(this);w({volumes:null,annotations:null,meshes:null,levels:null},function(a,b){this[b]=null})};k(V.a.c.$b,U.S);h("xiv.ui.ctrl.XtkControllerTree",V.a.c.$b);V.a.c.$b.lo=function(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null};h("xiv.ui.ctrl.XtkControllerTree.ControlSet",V.a.c.$b.lo);V.a.c.$b.ID_PREFIX="xiv.ui.ctrl.XtkControllerTree";V.a.c.$b.CSS_SUFFIX={};V.a.c.$b.iO=function(){return{volumes:null,annotations:null,meshes:null,levels:null}};f=V.a.c.$b.prototype;
f.rC=function(){};f.gq=function(){return this.Yi([this.Mk])};f.rC=function(){return this.Yi([this.wm])};f.DL=function(){return this.Yi([this.Km])};f.uO=function(){};f.Yi=function(a){var b=[];A(ia(a)?a:[a],function(a){null!=a&&(b=Qb(b,a.HF()))});return b};f.Ys=function(){var a=this.Yi([this.wm,this.Lm,this.Km,this.xm,this.Mk,this.Cw]);A(a,function(a){a.update()}.bind(this))};
f.ay=function(a,b){a instanceof F?(null==this.Lm&&(this.wm=new V.a.c.Jb,this.Lm=new V.a.c.ie,this.Km=new V.a.c.Lb),this.wm.add(a,b),this.Lm.add(a,b),this.Km.add(a,b)):a instanceof bo?(null==this.xm&&(this.xm=new V.a.c.Ih),this.xm.add(a,b)):a instanceof ln&&(null==this.Mk&&(this.Mk=new V.a.c.Gi),this.Mk.add(a));this.volumes=new V.a.c.$b.lo(null,this.Yi([this.Km]),this.Yi([this.Lm]));this.annotations=new V.a.c.$b.lo(null,this.Yi([this.Mk]));this.meshes=new V.a.c.$b.lo(null,this.Yi([this.xm]));this.levels=
new V.a.c.$b.lo(null,null,this.Yi([this.wm]))};f.i=function(){V.a.c.$b.g.i.call(this);null!=this.wm&&(this.wm.k(),delete this.wm);null!=this.Lm&&(this.Lm.k(),delete this.Lm);null!=this.OC&&(this.OC.k(),delete this.OC);null!=this.Km&&(this.Km.k(),delete this.Km);null!=this.xm&&(this.xm.k(),delete this.xm);null!=this.Mk&&(this.Mk.k(),delete this.Mk);null!=this.Cw&&(this.Cw.k(),delete this.Cw)};h("xiv.ui.ctrl.XtkControllerTree.ControlSet",V.a.c.$b.lo);h("xiv.ui.ctrl.XtkControllerTree.ID_PREFIX",V.a.c.$b.ID_PREFIX);
h("xiv.ui.ctrl.XtkControllerTree.CSS_SUFFIX",V.a.c.$b.CSS_SUFFIX);h("xiv.ui.ctrl.XtkControllerTree.getEmptyPropertiesObject",V.a.c.$b.iO);h("xiv.ui.ctrl.XtkControllerTree.prototype.Levels",V.a.c.$b.prototype.rC);h("xiv.ui.ctrl.XtkControllerTree.prototype.Annotations",V.a.c.$b.prototype.gq);h("xiv.ui.ctrl.XtkControllerTree.prototype.Volumes3D",V.a.c.$b.prototype.DL);h("xiv.ui.ctrl.XtkControllerTree.prototype.getHistograms",V.a.c.$b.prototype.uO);
h("xiv.ui.ctrl.XtkControllerTree.prototype.getControllers",V.a.c.$b.prototype.Yi);h("xiv.ui.ctrl.XtkControllerTree.prototype.updateControllers",V.a.c.$b.prototype.Ys);h("xiv.ui.ctrl.XtkControllerTree.prototype.createControllers",V.a.c.$b.prototype.ay);h("xiv.ui.ctrl.XtkControllerTree.prototype.disposeInternal",V.a.c.$b.prototype.i);function Ip(){hd.call(this);this.t="shaders";this.Vt="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Vt=a+="}\n";this.Jt="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Jt=a+="}\n"}
k(Ip,hd);
var Jp={IW:"vertexPosition",HW:"vertexNormal",GW:"vertexColor",KW:"vertexTexturePos",JW:"vertexScalar"},Kp={MW:"view",IV:"perspective",IU:"center",FV:"objectTransform",BW:"useObjectColor",DV:"objectColor",EW:"useScalars",XV:"scalarsReplaceMode",UV:"scalarsMin",RV:"scalarsMax",VV:"scalarsMinColor",SV:"scalarsMaxColor",WV:"scalarsMinThreshold",TV:"scalarsMaxThreshold",QV:"scalarsInterpolation",JV:"pointSize",EV:"objectOpacity",CV:"normal",DW:"usePicking",FW:"useTexture",AW:"useLabelMapTexture",oV:"labelmapOpacity",
nV:"labelmapColor",oW:"textureSampler",pW:"textureSampler2",QW:"volumeLowerThreshold",XW:"volumeUpperThreshold",UW:"volumeScalarMin",SW:"volumeScalarMax",VW:"volumeScalarMinColor",TW:"volumeScalarMaxColor",ZW:"volumeWindowLow",YW:"volumeWindowHigh",WW:"volumeTexture"};
function Lp(a){var b=Object.keys(Kp);if(!Object.keys(Jp).every(function(a){a=Jp[a];return-1!=this.Vt.search(a)||-1!=this.Jt.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Kp[a];return-1!=this.Vt.search(a)||-1!=this.Jt.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function Mp(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");hd.call(this);this.t="buffer";this.nc=a;this.Wk=b;this.Xk=c}k(Mp,hd);function Np(a,b){this.$x=a instanceof Yg?a:new Yg(a,b)}k(Np,sm);Np.prototype.uf=function(a,b,c,d){Zl(fi(a),0,a,b,this.$x,c,null,d)};function Op(a,b){this.JS=4;this.HA=b||void 0;pj.call(this,a)}k(Op,pj);Op.prototype.XA=function(a){this.HA=a||void 0;this.mb()&&this.uf()};Op.prototype.uf=function(){if(this.HA){var a=!this.mb()&&"move_offscreen"!=this.aq,b=this.b();a&&(b.style.visibility="hidden",xi(b,!0));this.HA.uf(b,this.JS,this.BY);a&&xi(b,!1)}};function Pp(a,b,c){this.dc=c||(a?ih(lh(a)):ih());Op.call(this,this.dc.C("div",{style:"position:absolute;display:none;"}));this.gy=new Yg(1,1);this.qn=new ig;a&&this.To(a);null!=b&&this.Bs(b)}k(Pp,Op);var Qp=[];f=Pp.prototype;f.Mf=null;f.className="goog-tooltip";f.hJ=500;f.YP=0;f.da=function(){return this.dc};f.To=function(a){a=lh(a);this.qn.add(a);C(a,"mouseover",this.Dn,!1,this);C(a,"mouseout",this.Ou,!1,this);C(a,"mousemove",this.BG,!1,this);C(a,"focus",this.Bn,!1,this);C(a,"blur",this.Ou,!1,this)};
f.detach=function(a){if(a)a=lh(a),Rp(this,a),this.qn.remove(a);else{for(var b=this.qn.yn(),c=0;a=b[c];c++)Rp(this,a);this.qn.clear()}};function Rp(a,b){Zc(b,"mouseover",a.Dn,!1,a);Zc(b,"mouseout",a.Ou,!1,a);Zc(b,"mousemove",a.BG,!1,a);Zc(b,"focus",a.Bn,!1,a);Zc(b,"blur",a.Ou,!1,a)}f.Bs=function(a){Jh(this.b(),a)};f.SA=function(a){var b=this.b();b&&S(b);Pp.g.SA.call(this,a);a&&(b=this.dc.Sa.body,b.insertBefore(a,b.lastChild))};f.Ty=function(){return Ph(this.b())};
f.np=function(){return this.im?this.mb()?4:1:this.Dr?3:this.mb()?2:0};f.dA=function(){if(!pj.prototype.dA.call(this))return!1;if(this.anchor)for(var a,b=0;a=Qp[b];b++)Hh(a.b(),this.anchor)||a.Da(!1);Ob(Qp,this);a=this.b();a.className=this.className;Sp(this);C(a,"mouseover",this.IG,!1,this);C(a,"mouseout",this.HG,!1,this);Tp(this);return!0};
f.jA=function(){Pb(Qp,this);for(var a=this.b(),b,c=0;b=Qp[c];c++)b.anchor&&Hh(a,b.anchor)&&b.Da(!1);this.$H&&Up(this.$H);Zc(a,"mouseover",this.IG,!1,this);Zc(a,"mouseout",this.HG,!1,this);this.anchor=void 0;0==this.np()&&(this.Vv=!1);pj.prototype.jA.call(this)};f.yH=function(a,b){this.anchor==a&&this.qn.contains(this.anchor)&&(this.Vv||!this.RY?(this.Da(!1),this.mb()||(this.anchor=a,this.XA(b||Vp(this,0)),this.Da(!0))):this.anchor=void 0);this.im=void 0};
f.QQ=function(a){this.Dr=void 0;a==this.anchor&&(null!=this.Mf&&(this.Mf==this.b()||this.qn.contains(this.Mf))||this.rE&&this.rE.Mf||this.Da(!1))};function Wp(a,b){var c=Xh(a.dc);a.gy.x=b.clientX+c.x;a.gy.y=b.clientY+c.y}f.Dn=function(a){var b=Xp(this,a.target);this.Mf=b;Sp(this);b!=this.anchor&&(this.anchor=b,this.im||(this.im=Wf(wa(this.yH,this,b,void 0),this.hJ)),Yp(this),Wp(this,a))};function Xp(a,b){try{for(;b&&!a.qn.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.BG=function(a){Wp(this,a);this.Vv=!0};f.Bn=function(a){this.Mf=a=Xp(this,a.target);this.Vv=!0;if(this.anchor!=a){this.anchor=a;var b=Vp(this,1);Sp(this);this.im||(this.im=Wf(wa(this.yH,this,a,b),this.hJ));Yp(this)}};function Vp(a,b){if(0==b){var c=a.gy.clone();return new Zp(c)}return new $p(a.Mf)}function Yp(a){if(a.anchor)for(var b,c=0;b=Qp[c];c++)Hh(b.b(),a.anchor)&&(b.rE=a,a.$H=b)}
f.Ou=function(a){var b=Xp(this,a.target),c=Xp(this,a.relatedTarget);b!=c&&(b==this.Mf&&(this.Mf=null),Tp(this),this.Vv=!1,!this.mb()||a.relatedTarget&&Hh(this.b(),a.relatedTarget)?this.anchor=void 0:Up(this))};f.IG=function(){var a=this.b();this.Mf!=a&&(Sp(this),this.Mf=a)};f.HG=function(a){var b=this.b();this.Mf!=b||a.relatedTarget&&Hh(b,a.relatedTarget)||(this.Mf=null,Up(this))};function Tp(a){a.im&&(ba.clearTimeout(a.im),a.im=void 0)}
function Up(a){2==a.np()&&(a.Dr=Wf(wa(a.QQ,a,a.anchor),a.YP))}function Sp(a){a.Dr&&(ba.clearTimeout(a.Dr),a.Dr=void 0)}f.i=function(){this.Da(!1);Tp(this);this.detach();this.b()&&S(this.b());this.Mf=null;delete this.dc;Pp.g.i.call(this)};function Zp(a,b){Np.call(this,a,b)}k(Zp,Np);Zp.prototype.uf=function(a,b,c){b=fi(a);b=ii(b);c=c?new $g(c.top+10,c.right,c.bottom,c.left+10):new $g(10,0,0,10);am(this.$x,a,4,c,b,9)&496&&am(this.$x,a,4,c,b,5)};function $p(a){tm.call(this,a,3)}k($p,tm);
$p.prototype.uf=function(a,b,c){var d=new Yg(10,0);Zl(this.element,this.ar,a,b,d,c,9)&496&&Zl(this.element,2,a,1,d,c,5)};function aq(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!ma(b)||!ma(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof Mo))throw Error("Invalid interactor.");Pp.call(this);this.t="caption";this.Xg=a;this.Yt=b;this.Zt=c;this.yc=d;this.Oj=null;this.Om=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Om=[a];Yc(d,re,this.Pr.bind(this));this.hz()}
k(aq,Pp);aq.prototype.hz=function(){var a=$h(this.Xg,"position");if("static"==a||""==a)this.Xg.style.position="relative";var a=document.getElementsByTagName("head")[0],b=vh("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Om[0]));a.appendChild(b);b.appendChild(c);this.Oj=b;this.XA(new Np(this.Yt,this.Zt));this.Da(!0);this.To(this.Xg);this.b().classList.add("x-tooltip")};aq.prototype.Pr=function(){this.Da(!1);this.Oj&&S(this.Oj);this.b()&&S(this.b());this.Oj=null};function bq(){ip.call(this);this.t="renderer3D";this.Bq=this.Eq=this.Aq=this.Dq=this.zq=this.Cq=this.nx=this.ox=null;this.xb=[0,0,0];this.tq=[0,0,0];this.iD=null;this.Zw=new od;this.Oq=new od;this.Wm=new od;this.Fq=new od;this.Co=new od;this.Lo=new od;this.Um=new od;this.Qo=new od;this.sc={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}k(bq,ip);bq.prototype.__defineGetter__("config",function(){return this.sc});f=bq.prototype;
f.jT=function(){this.Bq=this.Eq=this.Aq=this.Dq=this.zq=this.Cq=null;this.xb=[0,0,0]};f.kA=function(a){bq.g.kA.call(this,a);var b=a.Yt;a=a.Zt;var c=this.EA(b,a);if(c=this.get(c))if(c=c.Bo){var d=ni(this.Za),b=new aq(this.Za,d.x+b+10,d.y+a+10,this.yc);a=Yi(c,null);if(b=b.b())b.innerHTML=Xi(a)}};
f.Ta=function(){bq.g.Ta.call(this,"experimental-webgl");try{if(this.f.viewport(0,0,this.Db,this.lb),this.f.clearColor(this.tq[0],this.tq[1],this.tq[2],0),this.f.enable(this.f.BLEND),this.f.blendEquation(this.f.FUNC_ADD),this.f.blendFunc(this.f.SRC_ALPHA,this.f.ONE_MINUS_SRC_ALPHA),this.f.enable(this.f.DEPTH_TEST),this.f.depthFunc(this.f.LEQUAL),this.f.clear(this.f.COLOR_BUFFER_BIT|this.f.DEPTH_BUFFER_BIT),this.sc.PICKING_ENABLED){var a=this.f.createFramebuffer(),b=this.f.createRenderbuffer(),c=this.f.createTexture();
this.f.bindTexture(this.f.TEXTURE_2D,c);this.f.texImage2D(this.f.TEXTURE_2D,0,this.f.RGB,this.Db,this.lb,0,this.f.RGB,this.f.UNSIGNED_BYTE,null);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_S,this.f.CLAMP_TO_EDGE);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_T,this.f.CLAMP_TO_EDGE);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MAG_FILTER,this.f.NEAREST);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MIN_FILTER,this.f.NEAREST);this.f.bindFramebuffer(this.f.FRAMEBUFFER,
a);this.f.bindRenderbuffer(this.f.RENDERBUFFER,b);this.f.renderbufferStorage(this.f.RENDERBUFFER,this.f.DEPTH_COMPONENT16,this.Db,this.lb);this.f.bindRenderbuffer(this.f.RENDERBUFFER,null);this.f.framebufferTexture2D(this.f.FRAMEBUFFER,this.f.COLOR_ATTACHMENT0,this.f.TEXTURE_2D,c,0);this.f.framebufferRenderbuffer(this.f.FRAMEBUFFER,this.f.DEPTH_ATTACHMENT,this.f.RENDERBUFFER,b);this.f.bindFramebuffer(this.f.FRAMEBUFFER,null);this.iD=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new Ip;cq(this,a)};
function cq(a,b){if(null==a.Fd||null==a.f||null==a.Na)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Ip))throw Error("Could not add shaders.");Lp(b);var c=a.f.createShader(a.f.FRAGMENT_SHADER),d=a.f.createShader(a.f.VERTEX_SHADER);a.f.shaderSource(c,b.Jt);a.f.shaderSource(d,b.Vt);a.f.compileShader(c);a.f.compileShader(d);if(!a.f.getShaderParameter(c,a.f.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.f.getShaderInfoLog(c));if(!a.f.getShaderParameter(d,
a.f.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.f.getShaderInfoLog(d));var e=a.f.createProgram();a.f.attachShader(e,d);a.f.attachShader(e,c);a.f.linkProgram(e);if(!a.f.getProgramParameter(e,a.f.LINK_STATUS))throw Error("Could not create shader program!\n"+a.f.getShaderInfoLog(c)+"\n"+a.f.getShaderInfoLog(d)+"\n"+a.f.getProgramInfoLog(e));a.f.useProgram(e);a.nx=e;Object.keys(Jp).forEach(function(a){a=Jp[a];this.Zw.set(a,this.f.getAttribLocation(this.nx,a));this.f.enableVertexAttribArray(this.Zw.get(a))}.bind(a));
Object.keys(Kp).forEach(function(a){a=Kp[a];this.Oq.set(a,this.f.getUniformLocation(this.nx,a))}.bind(a));a.ox=b}
f.Aj=function(a){bq.g.Aj.call(this,a);var b=!1;if(null!=a){this.get(a.Fe)&&(b=!0);var c=a.Fe,d=a.J,e=a.ya,g=a.Ud,l=a.Cb,m=a.Ca,q=a.pd,p=a.gf,t=a.r,s=a.Ob;if(null!=t&&null!=t.Ca&&t.Ca.T)this.Aj(t);else if(null!=t&&t.T&&this.Aj(t),null!=p&&null!=p.Ca&&p.Ca.T)this.Ic.load(p,a);else if(null!=l&&null!=l.Ca&&l.Ca.T)this.Ic.load(l,a);else{if(null!=m&&ia(m))if(null!=a.Ej){if(a.Ej.Wr!=m.length||!a.T)return}else{b=0;c=m.length;for(b=0;b<c;b++)this.Ic.load(m[b],a);return}else{if(null!=m&&m.T){this.Ic.load(a,
a);return}if(null!=s&&null!=s.Ca&&s.Ca.T){this.Ic.load(s,a);return}}if(0<a.m.length)for(m=a.m,p=m.length,t=t=0;t<p;t++)this.Aj(m[t]);if(d){for(m=0;this.Ot;)m++,window.console.log("Possible thread lock avoided: "+m);this.Ot=!0;p=a instanceof Ne&&a.Pj instanceof nn;b&&null!=l&&l.T&&(m=this.Um.get(c),null!=m&&this.f.isBuffer(m.nc)&&this.f.deleteBuffer(m.nc));m=null;if(null!=l)if(!b||l.T){m=a.Po;if(null==m)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
t=!1;l.dl&&(t=!0);this.f.pixelStorei(this.f.UNPACK_FLIP_Y_WEBGL,t);t=this.f.createTexture();t.SG=l.Oh;this.Qo.set(l.Fe,t);this.f.bindTexture(this.f.TEXTURE_2D,t);l.dl?(t=this.f.RGBA,l.ZC&&(t=this.f.LUMINANCE,this.f.pixelStorei(this.f.UNPACK_ALIGNMENT,1)),this.f.texImage2D(this.f.TEXTURE_2D,0,t,l.mx,l.lx,0,t,this.f.UNSIGNED_BYTE,l.dl)):this.f.texImage2D(this.f.TEXTURE_2D,0,this.f.RGBA,this.f.RGBA,this.f.UNSIGNED_BYTE,t.SG);this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_S,this.f.CLAMP_TO_EDGE);
this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_WRAP_T,this.f.CLAMP_TO_EDGE);p?(this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MAG_FILTER,this.f.NEAREST),this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MIN_FILTER,this.f.NEAREST)):(this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MAG_FILTER,this.f.LINEAR),this.f.texParameteri(this.f.TEXTURE_2D,this.f.TEXTURE_MIN_FILTER,this.f.LINEAR));this.f.bindTexture(this.f.TEXTURE_2D,null);t=this.f.createBuffer();this.f.bindBuffer(this.f.ARRAY_BUFFER,
t);this.f.bufferData(this.f.ARRAY_BUFFER,new Float32Array(m),this.f.STATIC_DRAW);m=new Mp(t,m.length,2);this.Um.set(c,m);l.T=!1}else m=this.Um.get(c);Nf(this.Ic,.1);if(p)this.Ot=!1,n.cf(this.t+".update"),Nf(this.Ic,.9);else{if(!b||d.T||q.T){p=q.pc;l=n.B.Oc(p,d.Sh,d.Th,d.Uh);p=n.B.Oc(p,d.Ph,d.Qh,d.Rh);if(null===this.Cq||l.x<this.Cq)this.Cq=l.x;if(null===this.zq||p.x>this.zq)this.zq=p.x;if(null===this.Dq||l.y<this.Dq)this.Dq=l.y;if(null===this.Aq||p.y>this.Aq)this.Aq=p.y;if(null===this.Eq||l.z<this.Eq)this.Eq=
l.z;if(null===this.Bq||p.z>this.Bq)this.Bq=p.z;this.xb=[(this.Cq+this.zq)/2,(this.Dq+this.Aq)/2,(this.Eq+this.Bq)/2];q.T=!1}b&&d.T&&(q=this.Wm.get(c),null!=q&&this.f.isBuffer(q.nc)&&this.f.deleteBuffer(q.nc));q=null;!b||d.T?(q=this.f.createBuffer(),d.resize(),this.f.bindBuffer(this.f.ARRAY_BUFFER,q),this.f.bufferData(this.f.ARRAY_BUFFER,d.Xc,this.f.STATIC_DRAW),q=new Mp(q,d.count,3),d.T=!1):q=this.Wm.get(c);Nf(this.Ic,.3);b&&e.T&&(l=this.Wm.get(c),null!=l&&this.f.isBuffer(l.nc)&&this.f.deleteBuffer(l.nc));
l=null;!b||e.T?(l=this.f.createBuffer(),e.resize(),this.f.bindBuffer(this.f.ARRAY_BUFFER,l),this.f.bufferData(this.f.ARRAY_BUFFER,e.Xc,this.f.STATIC_DRAW),l=new Mp(l,e.count,3),e.T=!1):l=this.Fq.get(c);Nf(this.Ic,.3);b&&g&&g.T&&(e=this.Co.get(c),null!=e&&this.f.isBuffer(e.nc)&&this.f.deleteBuffer(e.nc));e=null;if(g)if(!b||g.T){if(g.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.f.createBuffer();g.resize();this.f.bindBuffer(this.f.ARRAY_BUFFER,e);this.f.bufferData(this.f.ARRAY_BUFFER,
g.Xc,this.f.STATIC_DRAW);e=new Mp(e,g.count,3);g.T=!1}else e=this.Co.get(c);Nf(this.Ic,.2);b&&s&&s.T&&(g=this.Lo.get(c),null!=g&&this.f.isBuffer(g.nc)&&this.f.deleteBuffer(g.nc));g=null;if(s)if(g=s.vq,!b||s.T){if(g.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.f.createBuffer();this.f.bindBuffer(this.f.ARRAY_BUFFER,d);this.f.bufferData(this.f.ARRAY_BUFFER,g,this.f.STATIC_DRAW);g=new Mp(d,g.length,3);s.T=!1}else g=this.Lo.get(c);Nf(this.Ic,.1);b||this.Pi.add(a);this.Wm.set(c,
q);this.Fq.set(c,l);this.Co.set(c,e);this.Um.set(c,m);this.Lo.set(c,g);this.Ot=a.T=!1}}else a.T=!1}}};f.EA=function(a,b){if(this.sc.PICKING_ENABLED){this.mj(!0,!1);var c=new Uint8Array(4);this.f.readPixels(a,this.lb-b,1,1,this.f.RGBA,this.f.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.mj=function(a,b){bq.g.mj.call(this,a,b);this.f.viewport(0,0,this.Db,this.lb);this.f.clear(this.f.COLOR_BUFFER_BIT|this.f.DEPTH_BUFFER_BIT);var c=this.Pi.Nb,d=c.length;if(0!=d){a?this.f.bindFramebuffer(this.f.FRAMEBUFFER,this.iD):this.f.bindFramebuffer(this.f.FRAMEBUFFER,null);var e=this.Na.kx,g=this.Na.na;this.f.uniformMatrix4fv(this.Oq.get("perspective"),!1,e);this.f.uniformMatrix4fv(this.Oq.get("view"),!1,g);e=this.xb;this.f.uniform3f(this.Oq.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
g=this.kf.length;for(e=0;e<g;++e){var l=this.kf[e];if(l instanceof F){var m=n.B.Oc(this.Na.na,l.Ya[0]+l.h[0].P[0],l.Ya[1]+l.h[0].P[1],l.Ya[2]+l.h[0].P[2]),q=n.B.Oc(this.Na.na,l.Ya[0]-l.h[0].P[0],l.Ya[1]-l.h[0].P[1],l.Ya[2]-l.h[0].P[2]),p=Math.abs(m.z-q.z),m=n.B.Oc(this.Na.na,l.Ya[0]+l.h[1].P[0],l.Ya[1]+l.h[1].P[1],l.Ya[2]+l.h[1].P[2]),q=n.B.Oc(this.Na.na,l.Ya[0]-l.h[1].P[0],l.Ya[1]-l.h[1].P[1],l.Ya[2]+-l.h[1].P[2]),t=Math.abs(m.z-q.z),m=n.B.Oc(this.Na.na,l.Ya[0]+l.h[2].P[0],l.Ya[1]+l.h[2].P[1],l.Ya[2]+
l.h[2].P[2]),q=n.B.Oc(this.Na.na,l.Ya[0]-l.h[2].P[0],l.Ya[1]-l.h[2].P[1],l.Ya[2]-l.h[2].P[2]),m=Math.max(p,t,Math.abs(m.z-q.z));m==p?mn(l,0):m==t?mn(l,1):mn(l,2)}}if(this.sc.ORDERING_ENABLED){p=!1;g=this.kf;l=g.length-1;do if(e=g[l],e instanceof F&&e.xg&&-1!=e.zc){var p=e.m[e.zc].m,t=e.zc,m=n.B.Oc(this.Na.na,e.Ya[0]+e.h[t].rb[0],e.Ya[1]+e.h[t].rb[1],e.Ya[2]+e.h[t].rb[2]),q=n.B.Oc(this.Na.na,e.Ya[0]-e.h[t].rb[0],e.Ya[1]-e.h[t].rb[1],e.Ya[2]-e.h[t].rb[2]),m=m.z-q.z,q=Math.max(e.zo[e.zc],Math.max(e.zo[e.zc+
4],e.zo[e.zc+8])),s=Math.min(e.zo[e.zc],Math.min(e.zo[e.zc+4],e.zo[e.zc+8]));if(0>m*(q+s))for(m=m=0;m<e.Jq[t]-1;m++)p[m]&&(p[m].ke=e.ke,p[m].Ee=e.h[t].No*m);else for(m=e.Jq[t]-1;0<=m;m--)p[m]&&(p[m].ke=e.ke,p[m].Ee=(e.Jq[t]-1)*e.h[t].No-e.h[t].No*m);p=!0}while(l--);g=this.Pi.Nb;l=g.length-1;do e=g[l],!e.bc||1==e.ke||e instanceof Ne||(p=e,t=e.J.Gt,e=n.B.Oc(e.pd.pc,t[0],t[1],t[2]),e=n.B.Oc(this.Na.na,e.x,e.y,e.z),e=n.ha.ry(this.Na.Qm,e),e=Math.round(1E3*e)/1E3,p.Ee=e,p=!0);while(l--);p&&this.Pi.sort()}if(g=
!a&&null!=b&&b&&this.sc.STATISTICS_ENABLED)var u=0,v=0,D=0,B=0;var e=this.Zw,l=e.get("vertexPosition"),p=e.get("vertexNormal"),t=e.get("vertexColor"),m=e.get("vertexTexturePos"),q=e.get("vertexScalar"),e=this.Oq,s=e.get("usePicking"),I=e.get("useObjectColor"),G=e.get("objectColor"),Q=e.get("useScalars"),M=e.get("scalarsReplaceMode"),L=e.get("scalarsMin"),J=e.get("scalarsMax"),H=e.get("scalarsMinColor"),O=e.get("scalarsMaxColor"),N=e.get("scalarsInterpolation"),Y=e.get("scalarsMinThreshold"),K=e.get("scalarsMaxThreshold"),
y=e.get("objectOpacity"),z=e.get("labelmapOpacity"),ga=e.get("labelmapColor"),Z=e.get("useTexture"),E=e.get("useLabelMapTexture"),W=e.get("textureSampler"),Xa=e.get("textureSampler2"),qa=e.get("volumeLowerThreshold"),Ca=e.get("volumeUpperThreshold"),sa=e.get("volumeScalarMin"),jb=e.get("volumeScalarMax"),ob=e.get("volumeWindowLow"),tb=e.get("volumeWindowHigh"),ki=e.get("volumeScalarMinColor"),Cr=e.get("volumeScalarMaxColor"),uo=e.get("volumeTexture"),Dr=e.get("objectTransform"),Er=e.get("pointSize"),
e=d;do{var Ia=c[d-e];if(Ia){var Ra=null;Ia instanceof Ne&&Ia.Pj&&(Ra=Ia.Pj);if(Ia.bc&&(!Ra||Ra.bc)&&(!a||Ia.Gq)){var Db=Ia.Fe,Dc=Ia.yq,ec=this.Wm.get(Db),Vc=this.Fq.get(Db),mk=this.Co.get(Db),Md=this.Lo.get(Db),nk=this.Um.get(Db);this.f.bindBuffer(this.f.ARRAY_BUFFER,ec.nc);this.f.vertexAttribPointer(l,ec.Xk,this.f.FLOAT,!1,0,0);this.f.bindBuffer(this.f.ARRAY_BUFFER,Vc.nc);this.f.vertexAttribPointer(p,Vc.Xk,this.f.FLOAT,!1,0,0);a?this.f.uniform1i(s,!0):this.f.uniform1i(s,!1);!mk||a||Dc?(Vc=1,Dc&&
!a&&(Vc=0),this.f.uniform1i(I,Vc),Vc=Ia.kb,a&&(Vc=[Math.floor(Db%65025%255)/255,Math.floor(Db%65025/255)/255,Math.floor(Db/65025)/255]),this.f.uniform3f(G,parseFloat(Vc[0]),parseFloat(Vc[1]),parseFloat(Vc[2])),this.f.vertexAttribPointer(t,ec.Xk,this.f.FLOAT,!1,0,0)):(this.f.uniform1i(I,!1),this.f.bindBuffer(this.f.ARRAY_BUFFER,mk.nc),this.f.vertexAttribPointer(t,mk.Xk,this.f.FLOAT,!1,0,0));!Md||a||Dc?(this.f.uniform1i(Q,!1),this.f.vertexAttribPointer(q,ec.Xk,this.f.FLOAT,!1,0,0)):(this.f.uniform1i(Q,
!0),this.f.uniform1i(M,Ia.Ob.lD),Db=Ia.Ob.$k,Dc=Ia.Ob.Yk,this.f.uniform3f(H,parseFloat(Db[0]),parseFloat(Db[1]),parseFloat(Db[2])),this.f.uniform3f(O,parseFloat(Dc[0]),parseFloat(Dc[1]),parseFloat(Dc[2])),this.f.uniform1f(Y,parseFloat(Ia.Ob.oc)),this.f.uniform1f(K,parseFloat(Ia.Ob.qc)),this.f.uniform1f(L,parseFloat(Ia.Ob.Jf)),this.f.uniform1f(J,parseFloat(Ia.Ob.Wc)),this.f.uniform1i(N,parseInt(Ia.Ob.ax,10)),this.f.bindBuffer(this.f.ARRAY_BUFFER,Md.nc),this.f.vertexAttribPointer(q,Md.Xk,this.f.FLOAT,
!1,0,0));this.f.uniform1f(y,parseFloat(Ia.ke));Ia.Cb&&nk&&!a?(this.f.uniform1i(Z,!0),this.f.activeTexture(this.f.TEXTURE0),this.f.bindTexture(this.f.TEXTURE_2D,this.Qo.get(Ia.Cb.Fe)),this.f.uniform1i(W,0),this.f.bindBuffer(this.f.ARRAY_BUFFER,nk.nc),this.f.vertexAttribPointer(m,nk.Xk,this.f.FLOAT,!1,0,0),this.f.uniform1i(uo,!1)):(this.f.uniform1i(Z,!1),this.f.vertexAttribPointer(m,ec.Xk,this.f.FLOAT,!1,0,0));Ra&&(this.f.uniform1i(uo,!0),this.f.uniform1f(qa,Ra.oc),this.f.uniform1f(Ca,Ra.qc),this.f.uniform1f(sa,
Ra.Jf),this.f.uniform1f(jb,Ra.Wc),Db=Ra.$k,Dc=Ra.Yk,this.f.uniform3f(ki,parseFloat(Db[0]),parseFloat(Db[1]),parseFloat(Db[2])),this.f.uniform3f(Cr,parseFloat(Dc[0]),parseFloat(Dc[1]),parseFloat(Dc[2])),this.f.uniform1f(ob,Ra.Kc),this.f.uniform1f(tb,Ra.Jc),Md=Ra.r,this.f.uniform1i(E,!1),Ra.xg?this.f.uniform1f(y,parseFloat(Ra.ke)):Md&&Md.bc&&(Ra=Ia.r.Fe,this.f.uniform1i(E,!0),this.f.activeTexture(this.f.TEXTURE1),this.f.bindTexture(this.f.TEXTURE_2D,this.Qo.get(Ra)),this.f.uniform1i(Xa,1),this.f.uniform1f(z,
Md.ke),this.f.uniform4fv(ga,Md.px)));this.f.uniformMatrix4fv(Dr,!1,Ia.pd.pc);Ra=1;"POINTS"==Ia.lf&&(Ra=Ia.Hq);this.f.uniform1f(Er,Ra);Ra=-1;Ia.lf==Zd?(Ra=this.f.TRIANGLES,g&&(v+=ec.Wk/3)):"LINES"==Ia.lf?(this.f.lineWidth(Ia.Jo),Ra=this.f.LINES,g&&(D+=ec.Wk/2)):"POINTS"==Ia.lf?(Ra=this.f.POINTS,g&&(B+=ec.Wk)):"TRIANGLE_STRIPS"==Ia.lf?(Ra=this.f.TRIANGLE_STRIP,g&&(v+=ec.Wk/3)):"POLYGONS"==Ia.lf&&(Ra=0==ec.Wk%3?this.f.TRIANGLES:this.f.TRIANGLE_FAN,g&&(v+=ec.Wk/3));g&&(u+=ec.Wk);this.f.drawArrays(Ra,
0,ec.Wk)}}}while(--e);g&&(c="Objects: "+d+" | "+("Vertices: "+u+" | "),c+="Triangles: "+Math.round(v)+" | ",c+="Lines: "+D+" | ",c+="Points: "+B+" | ",c+="Textures: "+this.Qo.ek(),window.console.log(c))}};
f.remove=function(a){bq.g.remove.call(this,a);if(0<a.m.length)for(var b=a.m,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.Fe;c=this.Um.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);a.Cb&&(c=this.Qo.get(a.Cb.Fe))&&(this.f.deleteTexture(c),this.Qo.remove(a.Cb.Fe));c=this.Wm.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);c=this.Fq.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);c=this.Co.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);
c=this.Lo.get(b);null!=c&&this.f.isBuffer(c.nc)&&this.f.deleteBuffer(c.nc);this.Wm.remove(b);this.Fq.remove(b);this.Co.remove(b);this.Um.remove(b);this.Lo.remove(b);this.Pi.remove(a);return!0};f.bh=function(){this.ox=null;delete this.ox;this.f.clear(this.f.COLOR_BUFFER_BIT|this.f.DEPTH_BUFFER_BIT);bq.g.bh.call(this)};bq.prototype.__defineGetter__("bgColor",function(){return this.tq});bq.prototype.__defineSetter__("bgColor",function(a){this.tq=a});
bq.prototype.HS=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.EA(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var g=ap(this.Na,a/this.Db*2-1,(this.lb-b)/this.lb*2-1,0);a=ap(this.Na,a/this.Db*2-1,(this.lb-b)/this.lb*2-1,1);g[0]+=this.xb[0];g[1]+=this.xb[1];g[2]+=this.xb[2];a[0]+=this.xb[0];a[1]+=this.xb[1];a[2]+=this.xb[2];b=[e.J.Sh,e.J.Th,e.J.Uh];var l=[e.J.Ph,e.J.Th,e.J.Uh],m=[e.J.Ph,e.J.Qh,e.J.Uh],q=[e.J.Sh,e.J.Qh,e.J.Uh],p=[e.J.Sh,e.J.Qh,e.J.Rh],t=[e.J.Sh,e.J.Th,
e.J.Rh],s=[e.J.Ph,e.J.Qh,e.J.Rh],u=[e.J.Ph,e.J.Th,e.J.Rh];b=[n.B.Oc(e.pd.pc,b[0],b[1],b[2]),n.B.Oc(e.pd.pc,l[0],l[1],l[2]),n.B.Oc(e.pd.pc,m[0],m[1],m[2]),n.B.Oc(e.pd.pc,q[0],q[1],q[2]),n.B.Oc(e.pd.pc,p[0],p[1],p[2]),n.B.Oc(e.pd.pc,t[0],t[1],t[2]),n.B.Oc(e.pd.pc,s[0],s[1],s[2]),n.B.Oc(e.pd.pc,u[0],u[1],u[2])];var l=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],v;for(v in b)v=b[v],l=[Math.min(l[0],v.x),Math.max(l[1],v.x),Math.min(l[2],v.y),Math.max(l[3],v.y),Math.min(l[4],v.z),Math.max(l[5],
v.z)];v=l;b=[];l=[];for(m=0;6>m;m++){var q=Math.floor(m/2),p=(q+1)%3,t=(q+2)%3,u=(2+2*q)%6,D=(4+2*q)%6,B=1/a[q]*(v[m]-g[q]);Infinity!=B&&-Infinity!=B&&(s=g[p]+a[p]*B,B=g[t]+a[t]*B,s>=v[u]&&s<=v[u+1]&&B>=v[D]&&B<=v[D+1]?(u=[],u[q]=v[m],u[p]=s,u[t]=B,b.push(u)):(u=[],u[q]=v[m],u[p]=s,u[t]=B,l.push(u)))}a=[b,l];a=a[0];if(0==a.length)return null;l=Array(2);for(v=0;2>v;v++)b=a[v],l[v]=Math.sqrt((b[0]-g[0])*(b[0]-g[0])+(b[1]-g[1])*(b[1]-g[1])+(b[2]-g[2])*(b[2]-g[2]));g=b=v=null;l[0]<l[1]?(v=a[0],b=a[1]):
(v=a[1],b=a[0]);g=Math.sqrt((v[0]-b[0])*(v[0]-b[0])+(v[1]-b[1])*(v[1]-b[1])+(v[2]-b[2])*(v[2]-b[2]));g/=c;a=v;v=[b[0]-v[0],b[1]-v[1],b[2]-v[2]];b=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);l=[v[0]/b,v[1]/b,v[2]/b];m=e.J.Xc;q=m.length;for(v=0;v<g;v+=c)for(a=[a[0]+c*l[0],a[1]+c*l[1],a[2]+c*l[2]],b=0;b<q;b+=3)if(p=m[b],t=m[b+1],s=m[b+2],u=new n.ha(p,t,s),u=n.B.Oc(e.pd.pc,p,t,s),Math.sqrt((a[0]-u.x)*(a[0]-u.x)+(a[1]-u.y)*(a[1]-u.y)+(a[2]-u.z)*(a[2]-u.z))<=d)return[u.x,u.y,u.z];return null};
h("X.renderer3D",bq);h("X.renderer3D.prototype.init",bq.prototype.Ta);h("X.renderer3D.prototype.add",bq.prototype.add);h("X.renderer3D.prototype.onShowtime",bq.prototype.uA);h("X.renderer3D.prototype.onRender",bq.prototype.WH);h("X.renderer3D.prototype.get",bq.prototype.get);h("X.renderer3D.prototype.render",bq.prototype.p);h("X.renderer3D.prototype.destroy",bq.prototype.bh);h("X.renderer3D.prototype.remove",bq.prototype.remove);h("X.renderer3D.prototype.resetBoundingBox",bq.prototype.jT);
h("X.renderer3D.prototype.resetViewAndRender",bq.prototype.ms);h("X.renderer3D.prototype.pick",bq.prototype.EA);h("X.renderer3D.prototype.pick3d",bq.prototype.HS);V.d.Gf=function(){bq.call(this)};k(V.d.Gf,bq);h("xiv.vis.XtkRenderer3D",V.d.Gf);V.d.Gf.prototype.ri=function(){this.On()};V.d.Gf.prototype.Nn=function(a){V.d.Gf.g.Nn.call(this,a);this.dispatchEvent({type:"A",value:a.Vm})};V.d.Gf.prototype.p=function(){this.Fd&&this.f?(V.d.Gf.g.p.call(this),this.dispatchEvent({type:"B"})):this.Ta()};V.d.Gf.prototype.remove=function(a){null!=a&&V.d.Gf.g.remove.call(this,a)};h("xiv.vis.XtkRenderer3D.prototype.onResize",V.d.Gf.prototype.ri);
h("xiv.vis.XtkRenderer3D.prototype.onProgress",V.d.Gf.prototype.Nn);h("xiv.vis.XtkRenderer3D.prototype.render",V.d.Gf.prototype.p);h("xiv.vis.XtkRenderer3D.prototype.remove",V.d.Gf.prototype.remove);V.d.sq=function(){V.d.Ma.call(this);this.orientation="V";this.xo=V.d.Gf};k(V.d.sq,V.d.Ma);h("xiv.vis.XtkPlane3D",V.d.sq);V.d.sq.ht=[-300,300,300];h("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",V.d.sq.ht);P.u.gq=function(a,b,c,d,e,g){P.u.Node.call(this);this.position=a;this.color=b;this.name=g};k(P.u.gq,P.u.Node);h("gxnat.slicerNode.Annotations",P.u.gq);V.d.H=function(){V.d.og.call(this);this.Ug=null;this.Nf={Jk:[],Mz:[],yy:[],lJ:[]};this.Ok=new V.d.sg("X");this.Bm=new V.d.sg("Y");this.Cm=new V.d.sg("Z");this.hd=new V.d.sq;this.Dd={};this.Dd[this.Ok.$c()]=this.Ok;this.Dd[this.Bm.$c()]=this.Bm;this.Dd[this.Cm.$c()]=this.Cm;this.Dd[this.hd.$c()]=this.hd;this.kj=null;this.fw(this.hd);dq(this)};k(V.d.H,V.d.og);h("xiv.vis.XtkEngine",V.d.H);V.d.H.ID_PREFIX="xiv.vis.XtkEngine";V.d.H.ZJ={SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"};
V.d.H.SLICE_TO_RAS_KEY="sliceToRAS"+r();V.d.H.HAS_LABEL_MAP_KEY="hasLabelMap";f=V.d.H.prototype;f.Pv=!1;function eq(a,b){null!=b.pg.Sq&&A(b.pg.Sq,function(a){this.Nf.lJ.push(V.d.H.AE(a))}.bind(a))}f.SI=function(a,b){switch(a.toLowerCase()){case "x":this.Ok.xd(b);break;case "y":this.Bm.xd(b);break;case "z":this.Cm.xd(b);break;case "v":this.hd.xd(b)}};f.fw=function(a){this.kj=a;this.kj.Ta();this.gT=C(this.kj,"A",this.qA.bind(this))};f.ZO=function(){return this.kj};f.vA=function(a){this.dispatchEvent(a)};
function dq(a){w(a.Dd,function(a){C(a,"E",this.vA.bind(this));C(a,"G",function(){}.bind(this))}.bind(a))}f.Ys=function(){this.Ug.Ys()};f.dO=function(){return this.Ug};
function fq(a,b){null!=a.Ug&&(a.Ug.k(),a.Ug=null);a.Ug=new V.a.c.$b;null!=(b.pg&&null!=b.pg.Sq)&&(eq(a,b),A(a.Nf.lJ,function(a){this.Ug.ay(a)}.bind(a)));var c;A(b.$i(),function(a){c=a.Zi();null!=c&&(currXObj=V.d.H.RE(c,a.Cl),renderProps=a.pg,currXObj&&(this.Ug.ay(currXObj,renderProps),currXObj instanceof F?(this.constructor.FT(),this.Nf.Jk.push(currXObj)):currXObj instanceof bo?(this.constructor.ET(),this.Nf.Mz.push(currXObj)):currXObj instanceof Mn&&(this.constructor.SY(currXObj,renderProps),this.Nf.yy.push(currXObj))))}.bind(a))}
f.qI=function(){this.fw(this.hd);this.hd.Ta();w(this.Nf,function(a,b){"volumes"!==b&&A(a,function(a){this.hd.add(a)}.bind(this))}.bind(this));Yc(this.hd.ec(),"B",function(){this.Cv();this.Ok.p()}.bind(this));this.hd.p()};f.pI=function(a){var b=null!=a?a:this.Gu();w(this.Dd,function(a,d){"v"!=d.toLowerCase()&&(a.Ta(),a.add(b),a.p())})};function gq(a){var b=a.Gu();w(a.Nf.volumes,function(a){a!==b&&(a.visible=!1)})}
f.rI=function(){var a=this.Gu(),b=[],c=[],d=["x","y","z","v"];w(this.Nf,function(a,d){currArr="volumes"==d?c:b;A(a,function(a){currArr.push(a)})}.bind(this));A(b,function(a){this.hd.add(a)}.bind(this));A(c,function(b){b!==a&&(b.visible=!0,this.hd.add(b))}.bind(this));this.kj.ec().uA=function(){Pb(d,this.kj.$c().toLowerCase());hq(this,a)}.bind(this);this.kj.add(a);this.kj.p()};
f.p=function(a){this.Pv=!1;fq(this,a);var b=a.pg;null!=b?(null!=b.backgroundColor&&this.hd.Wv(a.pg.backgroundColor),null!=b.Uj&&this.hd.Xv(a.pg.Uj)):(this.hd.Wv(),this.hd.Xv());if(0<this.Nf.Jk.length){a=this.Dd;b="";for(b in a)if(a[b].isEnabled()){this.fw(a[b]);break}this.rI()}else this.hd.isEnabled()&&this.qI()};function hq(a,b){var c=pb(a.Dd)-1;w(a.Dd,function(a){a!=this.kj&&a.isEnabled()&&(a.add(b),Yc(a.ec(),"B",function(){c--;0==c&&this.Cv()}.bind(this)),a.p())}.bind(a))}
f.Gu=function(){if(0!=this.Nf.Jk.length){for(var a=0,b=this.Nf.Jk.length;a<b;a++){var c=this.Nf.Jk[a];if(c[V.d.og.so])return c}this.Nf.Jk[0][V.d.og.so]=!0;return this.Nf.Jk[0]}};f.o=function(){w(this.Dd,function(a){a.o()}.bind(this))};V.d.H.ET=function(){var a=currXObj,b=renderProps;a.color=b.color||[.5,.5,.5];a.opacity=b.opacity||1};
V.d.H.FT=function(){var a=currXObj,b=renderProps;null!=b||(b={origin:[0,0,0],Bj:1E4,qk:-1E4,$u:!0,bt:!1});a.origin=b.origin;a.Bj=b.Bj;a.qk=b.qk;a.bt=b.bt;a[V.d.og.so]=b.$u;a[V.d.H.SLICE_TO_RAS_KEY]=b.Sp;null!=b.eH?(a.uz.file=b.eH,a.uz.RX.file=b.CQ,a[this.constructor.HAS_LABEL_MAP_KEY]=!0):a[this.constructor.HAS_LABEL_MAP_KEY]=!1};f=V.d.H.prototype;f.qA=function(a){this.Pv||this.dispatchEvent({type:"A",value:a.value})};
f.Cv=function(a){gq(this);$c(this.gT);this.Pv=!0;this.dispatchEvent({type:"B",value:null!=a?a.value:1})};f.SO=function(){return this.Ok};f.TO=function(){return this.Bm};f.UO=function(){return this.Cm};f.RO=function(){return this.hd};f.Fu=function(a){return this.Dd[a]};f.VO=function(){return this.Dd};
f.k=function(){V.d.H.g.k.call(this);null!=this.Ug&&(this.Ug.k(),delete this.Ug);ad(this.Ok);ad(this.Bm);ad(this.Cm);ad(this.hd);delete this.kj;wb(this.Dd);delete this.Dd;this.Ok.k();delete this.Ok;this.Bm.k();delete this.Bm;this.Cm.k();delete this.Cm;this.hd.k();delete this.hd;delete this.Pv};V.d.H.sU=["nrrd","nii","nii.gz","mgh","mgz"];V.d.H.hN=["dicom","dcm","ima"];V.d.H.iM=["hdr","img"];V.d.H.cR=["nii","nii.gz"];V.d.H.dQ=["jpeg","jpg","gif","png","img"];V.d.H.UQ="stl vtk obj fsm inflated smoothwm pial orig".split(" ");
V.d.H.HN=["trk"];V.d.H.GF=function(a){var b=void 0;this.pz(a)?b=new bo:this.qz(a)||this.lz(a)||this.nz(a)?b=new F:this.mz(a)&&(b=new Mn);return b};V.d.H.AE=function(a,b){var c=new ln;c.Si=a.position;c.caption=a.name;c.name=a.name;c.vi=void 0===b?3:b;c.color=[.85,0,0];return c};V.d.H.qz=function(a){return-1<this.sU.indexOf(a)?!0:!1};V.d.H.nz=function(a){return-1<this.dQ.indexOf(a)?!0:!1};V.d.H.lz=function(a){return-1<this.hN.indexOf(a)?!0:!1};V.d.H.tQ=function(a){return-1<this.iM.indexOf(a)?!0:!1};
V.d.H.xQ=function(a){return-1<this.cR.indexOf(a)?!0:!1};V.d.H.pz=function(a){return-1<this.UQ.indexOf(a)?!0:!1};V.d.H.mz=function(a){return-1<this.HN.indexOf(a)?!0:!1};V.d.H.NC={fibers:[],volumes:[],dicoms:[],analyze:[],nifti:[],meshes:[],annotations:[],images:[]};
V.d.H.$i=function(a){var b=zb(V.d.H.NC);ia(a)||(a=[a]);for(var c="",d="",e=0,g=a.length;e<g;e++)c=Sk(a[e]).toLowerCase(),d=Tk(c),0==c.lastIndexOf(".",0)||("mrml"===d?b.slicer.push(a[e]):this.qz(d)?b.volumes.push(a[e]):this.lz(d)?b.dicoms.push(a[e]):this.pz(d)?b.meshes.push(a[e]):this.mz(d)?b.fibers.push(a[e]):this.nz(d)&&b.images.push(a[e]));window.console.log("VIEWABLE TYPES",b);w(b,function(a,c){a.length||xb(b,c)});return b};
V.d.H.RE=function(a,b){function c(a){var b=dk.dirname(a);a=dk.Uq(a);return b+"/"+a}var d=ia(a)?dk.Du(a[0]):dk.Du(a),d=this.GF(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(ia(a)){var e=[];A(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=rb(b),d.hY=qb(b)):d.file=a;return d};h("xiv.vis.XtkEngine.EventType",{bW:"E",$V:"F",aW:"G",ERROR:"H",bX:"I",sV:"J",tV:"K"});h("xiv.vis.XtkEngine.ID_PREFIX",V.d.H.ID_PREFIX);h("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",V.d.H.ZJ);
h("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",V.d.H.SLICE_TO_RAS_KEY);h("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",V.d.H.HAS_LABEL_MAP_KEY);h("xiv.vis.XtkEngine.generateXtkObjectFromExtension",V.d.H.GF);h("xiv.vis.XtkEngine.createAnnotation",V.d.H.AE);h("xiv.vis.XtkEngine.isVolume",V.d.H.qz);h("xiv.vis.XtkEngine.isImage",V.d.H.nz);h("xiv.vis.XtkEngine.isDicom",V.d.H.lz);h("xiv.vis.XtkEngine.isAnalyze",V.d.H.tQ);h("xiv.vis.XtkEngine.isNifti",V.d.H.xQ);h("xiv.vis.XtkEngine.isMesh",V.d.H.pz);
h("xiv.vis.XtkEngine.isFiber",V.d.H.mz);h("xiv.vis.XtkEngine.ViewablesObject",V.d.H.NC);h("xiv.vis.XtkEngine.getViewables",V.d.H.$i);h("xiv.vis.XtkEngine.createXObject",V.d.H.RE);h("xiv.vis.XtkEngine.prototype.setPlaneEnabled",V.d.H.prototype.SI);h("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",V.d.H.prototype.fw);h("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",V.d.H.prototype.ZO);h("xiv.vis.XtkEngine.prototype.updateControllers",V.d.H.prototype.Ys);
h("xiv.vis.XtkEngine.prototype.getControllerTree",V.d.H.prototype.dO);h("xiv.vis.XtkEngine.prototype.render3dPlane",V.d.H.prototype.qI);h("xiv.vis.XtkEngine.prototype.render2D",V.d.H.prototype.pI);h("xiv.vis.XtkEngine.prototype.renderAllPlanes",V.d.H.prototype.rI);h("xiv.vis.XtkEngine.prototype.render",V.d.H.prototype.p);h("xiv.vis.XtkEngine.prototype.getSelectedVolume",V.d.H.prototype.Gu);h("xiv.vis.XtkEngine.prototype.updateStyle",V.d.H.prototype.o);h("xiv.vis.XtkEngine.prototype.getPlaneX",V.d.H.prototype.SO);
h("xiv.vis.XtkEngine.prototype.getPlaneY",V.d.H.prototype.TO);h("xiv.vis.XtkEngine.prototype.getPlaneZ",V.d.H.prototype.UO);h("xiv.vis.XtkEngine.prototype.getPlaneV",V.d.H.prototype.RO);h("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",V.d.H.prototype.Fu);h("xiv.vis.XtkEngine.prototype.getPlanes",V.d.H.prototype.VO);h("xiv.vis.XtkEngine.prototype.dispose",V.d.H.prototype.k);V.a.Sc=function(){U.xa.call(this)};k(V.a.Sc,U.xa);h("xiv.ui.HelpDialog",V.a.Sc);V.a.Sc.ID_PREFIX="xiv.ui.HelpDialog";V.a.Sc.CSS={mK:"nrg-ui-helpdialog-dialog",to:"nrg-ui-helpdialog-text",iL:"xiv-ui-helpdialog-scrollablezippytree",Ra:"xiv-ui-helpdialog-title",Nk:"xiv-ui-helpdialog-closebutton"};V.a.Sc.LAYOUT_IMAGE_ID=V.a.Sc.ID_PREFIX+".LayoutImage";
V.a.Sc.prototype.p=function(a){V.a.Sc.g.p.call(this,a);R(this.b(),"xiv-ui-helpdialog");this.pq=new U.mc;R(this.pq.b(),this.constructor.CSS.iL);this.pq.p(this.b());iq(this);this.wx(this.constructor.CSS.Ra);this.uD(this.constructor.CSS.Nk)};V.a.Sc.prototype.II=function(a){null!=document.getElementById(V.a.Sc.LAYOUT_IMAGE_ID)&&(document.getElementById(V.a.Sc.LAYOUT_IMAGE_ID).src=a)};
function iq(a){var b=[["Change Layouts","<img height=15 width=15 id="+V.a.Sc.LAYOUT_IMAGE_ID+"></img>"],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>'],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],
["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+
'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>'],["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>'],["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']],c=[["Add ViewBox Row",
'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Remove ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removerow.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Remove ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/removecolumn.png"></img>'],
["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.yh("Help");A([[["Slice-scroll","shift + mousemove","2D panels"],["Resize","left-click + drag","panel borders"]],b,c],function(a,b){var c='<table style="width:100%;color:white;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="gray">';A(a,function(a){c+="<tr>";A(a,
function(a,b){switch(b){case 0:a='<b><font size="2">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",l;currText=b+1;switch(currText){case 1:l="Image Manipulation";break;case 2:l="Toggles";break;case 3:l="Modal"}S(c);var m=vh("div");m.innerHTML=c;this.pq.Yg(m,[l])}.bind(a))}V.a.Sc.prototype.i=function(){V.a.Sc.g.i.call(this);null!=this.pq&&this.pq.k()};
h("xiv.ui.HelpDialog.EventType",{});h("xiv.ui.HelpDialog.ID_PREFIX",V.a.Sc.ID_PREFIX);h("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",V.a.Sc.LAYOUT_IMAGE_ID);h("xiv.ui.HelpDialog.CSS_SUFFIX",V.a.Sc.CSS_SUFFIX);h("xiv.ui.HelpDialog.prototype.render",V.a.Sc.prototype.p);h("xiv.ui.HelpDialog.prototype.setLayoutButton",V.a.Sc.prototype.II);h("xiv.ui.HelpDialog.prototype.disposeInternal",V.a.Sc.prototype.i);function jq(a,b,c){zm.call(this,a,b||Am.qf(),c);this.de(16,!0)}k(jq,zm);ol("goog-toggle-button",function(){return new jq(null)});V.a.hb=function(a){U.S.call(this);this.v={};this.va=a};k(V.a.hb,U.S);h("xiv.ui.ViewBoxDialogs",V.a.hb);V.a.hb.ID_PREFIX="xiv.ui.ViewBoxDialogs";V.a.hb.CSS_SUFFIX={Ii:"generic-toggle",uK:"infodialog",vK:"infodialog-text",xK:"inusedialog"};var kq="Info_"+r(),lq="Help_"+r(),mq="InUse_"+r(),nq={gV:kq,bV:lq,jV:mq};V.a.hb.wt="ToggleClass_"+r();f=V.a.hb.prototype;f.hO=function(){return this.v};f.gO=function(a){return this.v[a]};
f.er=function(a,b,c,d,e,g,l,m){e=null!=e?e:"";var q=this.va.hn("LEFT",c,a,e,function(b){b="true"==b.getAttribute("checked");this.v[a].Da(b);this.v[a].Si();this.dispatchEvent({type:b?"L":"M",ZE:this.v[a],$E:a})}.bind(this),d);null!=this.v[a]&&this.v[a].k();c=new U.xa;this.v[a]=c;Oj(c,null!=l?l:!1);Vj(c,null!=m?m:null);c.p(this.va.Dc);Nj(c,0);c.uf();c.yh(e);R(c.b(),b);C(c,"c",function(){this.va.Lp(q)}.bind(this));C(c,Rj,function(){}.bind(this));!1===g&&nl(this.va.yf[a])};
f.SM=function(){this.er(nq.xV,"xiv-ui-viewboxdialogs-meshes-dialog",V.a.hb.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.UM=function(){this.er(nq.RW,"xiv-ui-viewboxdialogs-volumes-dialog",V.a.hb.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.EE=function(){this.v[mq]=new U.xa;Vj(this.v[mq],Xj);this.v[mq].p(this.va.Dc);this.v[mq].$l("ViewBox in use.&nbspProceed anyway?");oq(this);pq(this)};
f.HI=function(a,b){Yc(this.v[mq],Wj,function(c){"yes"===c.key&&null!=a&&a(this);"no"===c.key&&null!=b&&b(this)}.bind(this))};f.Gs=function(){R(this.v[mq].b(),V.a.hb.CSS.xK);Oj(this.v[mq],!0);this.v[mq].Da(!0);this.v[mq].Si()};f.update=function(){w(this.v,function(a){a.KJ()})};f.Ss=function(a,b){var c=!1===b?0:1;window.console.log(a,this.v[a]);null!=this.v[a].b()&&T.Dg(this.v[a].b(),200,c)};f.My=function(){return this.v[lq]};
function oq(a){null!=a.v[lq]&&a.v[lq].k();a.v[lq]=new V.a.Sc;Oj(a.v[lq],!1);Vj(a.v[lq],null);a.v[lq].p(a.va.Dc);a.v[lq].Da(!1);a.v[lq].Si();var b=a.va.hn("LEFT",V.a.hb.CSS.Ii,lq,"Help",function(a){a="true"==a.getAttribute("checked");this.v[lq].Da(a);this.v[lq].Si();this.dispatchEvent({type:a?"L":"M",ZE:this.v[lq]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");C(a.v[lq],"c",function(){this.va.Lp(b)}.bind(a));a.va.Lp(b)}
function pq(a){null!=a.v[kq]&&a.v[kq].k();a.v[kq]=new U.xa;var b="";0<a.va.hk().length?w(a.va.hk()[0].Zf,function(a,c){null!=a&&0<a.length&&(b+=c+": "+a+"<br>")}):b=Sk(a.va.hk()[0].yk);Oj(a.v[kq],!1);a.v[kq].il(b);Vj(a.v[kq],null);a.v[kq].p(a.va.Dc);a.v[kq].Da(!0);a.v[kq].Yz("left","top");a.v[kq].wD("xiv-ui-viewboxdialogs-infodialog-content");a.v[kq].QI("xiv-ui-viewboxdialogs-infodialog-hovered");R(a.v[kq].b(),V.a.hb.CSS.uK);R(a.v[kq].sj[0],V.a.hb.CSS.vK);a.v[kq].wx("xiv-ui-viewboxdialogs-infodialog-title");
a.v[kq].sD("xiv-ui-viewboxdialogs-infodialog-closebutton");a.v[kq].tD("xiv-ui-viewboxdialogs-infodialog-closebutton-image");var c=a.va.hn("LEFT",V.a.hb.CSS.Ii,kq,"Info. Display",function(a){a="true"==a.getAttribute("checked");this.v[kq].Da(a);this.v[kq].Yz("left","top");this.dispatchEvent({type:a?"L":"M",ZE:this.v[kq]})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");C(a.v[kq],"c",function(){this.va.Lp(c)}.bind(a))}
f.i=function(){delete this.va;null!=this.v&&(w(this.v,function(a){ad(a);a.i();a.k()}.bind(this)),wb(this.v))};h("xiv.ui.ViewBoxDialogs.EventType",{WU:"L",VU:"M"});h("xiv.ui.ViewBoxDialogs.ID_PREFIX",V.a.hb.ID_PREFIX);h("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",V.a.hb.CSS_SUFFIX);h("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",nq);h("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",V.a.hb.wt);h("xiv.ui.ViewBoxDialogs.prototype.getDialogs",V.a.hb.prototype.hO);h("xiv.ui.ViewBoxDialogs.prototype.getDialog",V.a.hb.prototype.gO);
h("xiv.ui.ViewBoxDialogs.prototype.createToggleableDialog",V.a.hb.prototype.er);h("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",V.a.hb.prototype.SM);h("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",V.a.hb.prototype.UM);h("xiv.ui.ViewBoxDialogs.prototype.createDialogs",V.a.hb.prototype.EE);h("xiv.ui.ViewBoxDialogs.prototype.setInUseSelect",V.a.hb.prototype.HI);h("xiv.ui.ViewBoxDialogs.prototype.showInUseDialog",V.a.hb.prototype.Gs);h("xiv.ui.ViewBoxDialogs.prototype.update",V.a.hb.prototype.update);
h("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",V.a.hb.prototype.Ss);h("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",V.a.hb.prototype.My);h("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",V.a.hb.prototype.i);V.a.Ab=function(a,b,c,d){fd.call(this);this.va=a;this.Wa=b;this.Ib=c;this.v=d;this.Qe={Se:null,ql:null};this.qi={left:!1,AH:!1,right:!1};this.Jn={ow:{},rN:{},BS:{},CS:{}};C(this.v,"L",this.PH.bind(this));a=document.body;this.fc=new Al;this.fc.To(a);C(this.fc,"key",this.uk.bind(this));this.Eh=vh("div",{id:"mousefollower"});R(this.Eh,this.constructor.CURSOR_CSS.GL);this.Eh.innerHTML="Zoom In (drag up)<br>Zoom Out (drag down)<br>";zh(this.va.Dc,this.Eh)};k(V.a.Ab,fd);
h("xiv.ui.ViewBoxInteractorHandler",V.a.Ab);var qq="Crosshairs_"+r(),rq="Settings_"+r(),sq="TwoDPan_"+r(),tq="TwoDZoom_"+r(),uq={zd:qq,CC:rq,uo:sq,vo:tq};V.a.Ab.CSS={Ii:"xiv-ui-viewboxinteractorhandler-generic-toggle",dC:"xiv-ui-viewboxinteractorhandler-generic-dialog",eC:"xiv-ui-viewboxinteractorhandler-generic-zippytree"};
V.a.Ab.CURSOR_CSS={GL:"xiv-ui-viewboxinteractorhandler-zoom-follower",fC:"xiv-ui-viewboxinteractorhandler-viewframe-grab",iC:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",gC:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",hC:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",RC:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",SC:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};V.a.Ab.Ze="Orientation_"+r();V.a.Ab.kq="_";f=V.a.Ab.prototype;f.fc=null;f.bq=null;f.Ec=null;
f.IB=!1;f.CA=!1;f.se={};f.GE=function(){this.QE();vq(this);wq(this);this.ME();this.DE(!1);this.OE();this.PE();xq(this)};function yq(a){var b=a.va.Dc;w(a.constructor.CURSOR_CSS,function(a){Vg(b,a)})}function zq(a,b,c,d){b=b?R:Vg;b(a.va.Dc,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.va.Dc,d)}function Aq(a){zq(a,!0,a.constructor.CURSOR_CSS.fC,a.constructor.CURSOR_CSS.iC);zq(a,!1,a.constructor.CURSOR_CSS.gC,a.constructor.CURSOR_CSS.hC)}
function Bq(a){zq(a,!1,a.constructor.CURSOR_CSS.SC);zq(a,!0,a.constructor.CURSOR_CSS.RC)}
f.IR=function(a){this.Zo=a.target;this.Qe.Se=this.Qe.ql;this.Qe.ql=a.Uz;if(null!=this.Qe.Se){if(a.fJ){if(!this.ZA){this.ZA=!0;this.OG();Cq(this);return}}else this.ZA&&(this.iJ(),Cq(this),this.Zn(),this.ZA=!1);(new Ko(this.Qe.ql[0],this.Qe.ql[1])).add(new Ko(this.Qe.Se[0],this.Qe.Se[1]));a=this.Qe.ql[0]-this.Qe.Se[0];var b=this.Qe.ql[1]-this.Qe.Se[1];this.Eh.style.visibility="hidden";this.IB?(S(this.Eh),zh(this.Zo.Yj,this.Eh),this.Eh.style.visibility="visible",this.Eh.style.left=this.Qe.ql[0]+20+"px",
this.Eh.style.top=this.Qe.ql[1]+"px",Bq(this),this.qi.left&&Dq(this,a,b)):this.CA&&(Aq(this),this.qi.left&&(zq(this,!1,this.constructor.CURSOR_CSS.fC,this.constructor.CURSOR_CSS.iC),zq(this,!0,this.constructor.CURSOR_CSS.gC,this.constructor.CURSOR_CSS.hC),this.Zo.Na.Hv([-1*a,-1*b]),this.Zn()))}};f.HR=function(){yq(this);this.Zo=null;this.Eh.style.visibility="hidden"};f.oA=function(a){0==a.button?this.qi.left=!0:1==a.button?this.dU.qi.AH=!0:2==a.button&&(this.qi.right=!0)};
f.pA=function(a){0==a.button?this.qi.left=!1:1==a.button?this.dU.qi.AH=!1:2==a.button&&(this.qi.right=!1)};
f.uk=function(a){window.console.log("On key:",a.keyCode,this.se);if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Eq(this,this.Zo,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.va.Vy(this.constructor.Ce.uo);"true"==a.getAttribute("checked")&&this.va.Ke(this.constructor.Ce.uo);var b=this.va.Vy(this.constructor.Ce.vo);"true"==b.getAttribute("checked")&&this.va.Ke(this.constructor.Ce.vo);window.console.log(a.getAttribute("checked"),b.getAttribute("checked"),"true"==a.checked,"true"==b.checked);
break;case 90:this.va.Ke(this.constructor.Ce.vo);break;case 72:case 80:this.va.Ke(this.constructor.Ce.uo);break;case 66:case 76:this.va.Ke(this.se.levels);break;case 86:this.va.Ke(this.se.volumes);break;case 77:this.va.Ke(this.se.meshes);break;case 65:this.va.Ke(this.se.annotations);break;case 67:this.va.Ke(this.constructor.Ce.zd);break;case 83:this.va.Ke(this.se[this.constructor.Ce.CC]);break;case 191:a.shiftKey&&this.va.Ke(lq);break;case 73:this.va.Ke(kq)}};
function Dq(a,b,c){yq(a);var d=function(){Bq(this);this.Zo.dq()}.bind(a),e=function(){zq(this,!0,this.constructor.CURSOR_CSS.SC);zq(this,!1,this.constructor.CURSOR_CSS.RC);this.Zo.eq()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Fq(a);a.Zn()}f.uC=0;f.vC=0;f.rJ=function(a){this.uC=a.clientX;this.vC=a.clientY;window.console.log("store mouse coords",this.uC,this.vC)};
function xq(a){Gq(a,function(a,c){this.Jn.CS[c]=C(a.ec(),"mouseover",this.IR.bind(this));var d=a.ec().Fd;this.Jn.BS[c]=C(d,"mouseout",this.HR.bind(this));this.Jn.rN[c]=C(d,"mousedown",this.oA.bind(this));this.Jn.ow[c]=C(d,"mouseup",this.pA.bind(this))}.bind(a))}function Eq(a,b,c){Gq(a,function(a,b,g){g.Xa.aa(g.Xa.ea()+c)}.bind(a),b.$c())}
function Gq(a,b,c){if(null!=a.Wa){var d=a.Ib.Py(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.zr())};if(ka(c)){var g=a.Wa.Fu(c);if(null==g)throw Error("Invalid plane: ",g);e(a.Wa.Fu(c),c)}else w(a.Wa.Dd,function(a,b){e(a,b)}.bind(a))}}
f.PE=function(){this.va.hn("LEFT",this.constructor.CSS.Ii,this.constructor.Ce.vo,"2D Zoom",function(a){yq(this);if(this.IB=a="true"==a.getAttribute("checked").toString())this.va.zB(this.constructor.Ce.uo),Bq(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.va.Ke(this.constructor.Ce.vo)};
f.OE=function(){this.va.hn("LEFT",this.constructor.CSS.Ii,this.constructor.Ce.uo,"2D Pan",function(a){yq(this);if(this.CA=a="true"==a.getAttribute("checked").toString())Aq(this),this.va.zB(this.constructor.Ce.vo)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.va.Ke(this.constructor.Ce.uo)};
f.DE=function(a){this.va.hn("LEFT",this.constructor.CSS.Ii,this.constructor.Ce.zd,"Toggle Crosshairs",function(a){this.DJ("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.va.Ke(this.constructor.Ce.zd)};
f.ME=function(){var a=this.constructor.Ce.CC;this.se[a]=a+this.constructor.kq+r();this.v.er(this.se[a],this.constructor.CSS.dC,this.constructor.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.Ec[a]=new U.mc;this.Ec[a].p();var b=this.Ec[a].b();R(b,this.constructor.CSS.eC);this.v.v[this.se[a]].b().appendChild(b);this.Ec[a].sn();b=new V.a.c.Ad;b.p();b.yi("Enable 3D Rendering");b.O.xh(!0);this.Ec[a].Yg(b.b(),"3D Rendering");C(b,"o",function(a){this.Wa.SI("V",
a.checked)}.bind(this));return b};f.Zn=function(){Gq(this,function(a,b,c,d){Hq(this,b,d)}.bind(this))};
function Iq(a){null!=a.Wa&&(Gq(a,function(a,c,d,e){var g=d.Xa,l=d.zf,m=d.Mh;d=d.zd;g[this.constructor.Ze]=c;l[this.constructor.Ze]=c;m[this.constructor.Ze]=c;d[this.constructor.Ze]=c;Cq(this,!0);Jq(this,g,e);Hq(this,g[this.constructor.Ze],e);Kq(this,g);null!=a.ec()&&(C(a.ec(),"I",function(){Fq(this)}.bind(this)),C(g,"q",function(a){Jq(this,a.target,e);Hq(this,a.target[this.constructor.Ze],e);Kq(this,a.target)}.bind(this)),C(l,"input",function(a){Lq(this,a.target,e);this.Zn()}.bind(this)),C(m,"input",
function(){a.ec().dJ(m.ea()/100);this.Zn()}.bind(this)))}.bind(a)),a.Wa.Ys())}
function Mq(a,b){var c=b.split(a.constructor.kq)[0];a.Ec[c].Pe();w(a.bq[c],function(a){null!=a&&A(a,function(a){switch(c){case "levels":a instanceof V.a.c.Fc?a.update():a.O.o();break;case "volumes":var d=b.split(this.constructor.kq)[0];a instanceof V.a.c.af?(a.O.checked=a.Xe[V.d.og.so]||!1,null==this.rw&&(this.rw=[]),-1==this.rw.indexOf(a)&&this.rw.push(a)):"Show Label Map"==a.Nc.innerHTML&&(a.Xe[V.d.H.HAS_LABEL_MAP_KEY]?a.Xe.uz.visible&&!a.O.Tl()&&a.O.xh(!0):(S(a.b()),a.b().style.visibility="hidden",
a.b().style.height="0px"),this.Ec[d].Pe());a.update()}}.bind(this))}.bind(a))}f.PH=function(a,b){null==a.$E&&null==b||Mq(this,null!=b?b:a.$E)};f.$D=function(){window.console.log("Applying auto window/level");var a,b={};A(this.bq.levels.all,function(c){levelMax=hist=null;a=c.jp;folderStr="";A(a,function(a){folderStr+=a});null!=b[folderStr]||(b[folderStr]={});c instanceof V.a.c.Fc?b[folderStr].$P=c:-1<c.Nc.innerHTML.indexOf("Level Max")&&(b[folderStr].EQ=c)}.bind(this));w(b,function(a){a.EQ.O.aa(a.$P.cG(V.a.c.Fc.LEVEL_CUTOFF))})};
function Jq(a,b,c){if(null!=c){var d=b[a.constructor.Ze],d="Y"==d||"Z"==d?b.La()-b.ea()-1:b.ea()-1;c["index"+b[a.constructor.Ze]]=d}}function Nq(a,b,c,d,e){var g=a.Wa.Fu(b).ec();a=a.Ib.NF().Oy(b);b=null;null!=a&&(b=a[jo]);null!=b&&("vertical"==c?b.bJ(g.sG(d,e)):"horizontal"==c&&b.cJ(g.YF(d,e)))}
function Hq(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;Nq(a,"Y","vertical",b,!0);Nq(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;Nq(a,"X","vertical",b,!1);Nq(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,Nq(a,"X","horizontal",b,!1),Nq(a,"Y","horizontal",b,!1)}}function Kq(a,b){Gq(a,function(a,b,e){a=e.zf;e=e.Xa;a.Te(e.La());a.aa(e.ea())}.bind(a),b[a.constructor.Ze])}function Fq(a){Gq(a,function(a,c,d){d.Mh&&a.ec()&&(a=a.ec().xG(),d.Mh.ea(),d.Mh.aa(Math.round(100*a)))}.bind(a))}
function Lq(a,b,c){null!=c&&Gq(a,function(a,c,g){g.Xa.aa(b.ea())}.bind(a),b[a.constructor.Ze])}function vq(a){Gq(a,function(a,c,d){null!=d.Xa&&d.Xa.aa(d.Xa.La()/2)}.bind(a))}
function wq(a){Gq(a,function(a,c,d,e){if(null!=e[V.d.H.SLICE_TO_RAS_KEY]&&null!=d.Xa){slider=d.Xa;orientation=slider[this.constructor.Ze];a=e.IX;e=e[V.d.H.SLICE_TO_RAS_KEY];var g;"X"==orientation?(g=a[1]-a[0],g=(e.pT[0]-a[0])/g):"Y"==orientation?(g=a[3]-a[2],g=(e.OM[1]-a[2])/g):"Z"==orientation&&(g=a[5]-a[4],g=(e.wM[2]-a[4])/g);slider.aa(Math.round(slider.La()*g)+1)}}.bind(a))}
function Cq(a,b){var c,d;Gq(a,function(a,g,l,m){null!=l.Xa&&(d=l.Xa,c=d[this.constructor.Ze],null!=m&&(!0===b&&(d.Te(a.ec().hG()),d.$f(1)),d.aa(m["index"+c]+1)))})}f.TH=function(){Gq(this,function(a,b,c,d){Lq(this,c.zf,d);Fq(this)}.bind(this));this.Zn()};f.tB=function(a){var b=!1===a?0:1;Gq(this,function(a,d,e){T.Dg(e.Xa.b(),200,b);T.Dg(e.zf.b(),200,b);T.Dg(e.zd.Di,200,b);T.Dg(e.zd.mi,200,b);T.Dg(e.Mh.b(),200,b)}.bind(this))};f.OG=function(){this.tB(!1);this.v.Ss(kq,!1)};
f.iJ=function(){this.tB(!0);this.v.Ss(kq,!0)};f.update=function(){this.Ib.Zs()};f.DJ=function(a){var b=!0==a?"visible":"hidden";Gq(this,function(a,d,e){null!=e.zd&&(e.zd.Di.style.visibility=b,e.zd.mi.style.visibility=b)}.bind(this))};f.JJ=function(){null!=this.Ib&&null!=this.Wa&&Gq(this,function(a,b,c,d){if(null!=c){var e=c.Xa;c=c.zf;e[this.constructor.Ze]=b;c[this.constructor.Ze]=b;null!=a.ec()&&(Lq(this,c,d),e.o())}}.bind(this))};
f.xJ=function(a){a.LI(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");w({Sagittal:{Fj:V.a.e.Hm,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{Fj:V.a.e.rm,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{Fj:V.a.e.Jm,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{Fj:V.a.e.Im,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{Fj:V.a.e.vb,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{Fj:V.a.e.vc,
Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},"2D Row":{Fj:V.a.e.xc,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{Fj:V.a.e.Uc,Yb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.AD(c,b.Yb);this.Ib.yD(c,b.Fj);"Four-Up"==c&&this.Ib.KI(c)}.bind(this));C(a,"item_selected",this.zR.bind(this))};f.zR=function(a){this.Ib.Xn(a.title);null!=this.v&&null!=this.v.My()&&this.v.My().II(a.target.En.src)};
function Oq(a,b){C(a.Ec[b].A,"f",function(a){this.PH(a,this.se[b])}.bind(a))}function Pq(a,b){C(b,"o",function(a){A(this.rw,function(b){var e=b.Xe;b!==a.target?(b.O.checked=!1,e.visible=!1):(e.visible=!0,this.Wa.pI(e))}.bind(this))}.bind(a))}function Qq(a,b){w(a.bq[b],function(a,d){ia(a)&&A(a,function(a){var c=a.jp||[];"all"!==d&&0<c.length&&c.push(d);this.Ec[b].Yg(a.b(),c);a instanceof V.a.c.af&&Pq(this,a)}.bind(this))}.bind(a))}
function Rq(a){a.Ec={volumes:null,annotations:null,meshes:null,levels:null};a.se=zb(a.Ec);w(a.Ec,function(a,c){this.Ec[c]=new U.mc;this.Ec[c].p();this.se[c]=c+this.constructor.kq+r();Qq(this,c);Oq(this,c)}.bind(a))}f.QE=function(){this.bq=this.Wa.Ug;Rq(this);Sq(this);Iq(this)};
function Sq(a){w(a.Ec,function(a,c){var d=!1;w(this.bq[c],function(a){null!=a&&ia(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.v.er(this.se[c],this.constructor.CSS.dC,this.constructor.CSS.Ii,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+eb(c)+".png",eb(c),!1,!1);var e=this.Ec[c].b();R(e,this.constructor.CSS.eC);this.v.v[this.se[c]].b().appendChild(e);1<this.Ec[c].A.qG().length?this.Ec[c].$q():this.Ec[c].sn()}}.bind(a))}
f.k=function(){V.a.Ab.g.k.call(this);null!=this.fc&&(window.console.log("disposing key handler"),this.fc.k(),delete this.fc);null!=this.se&&wb(this.se);delete this.se;null!=this.Ec&&(w(this.Ec,function(a){a.k()}),wb(this.Ec));delete this.Ec;wb(this.Qe);delete this.Qe;w(this.Jn,function(a){w(a,function(a){$c(a);delete a});wb(a)});wb(this.Jn);delete this.Jn;S(this.Eh);delete this.Eh;delete this.bq;delete this.IB;delete this.CA;delete this.va;delete this.Wa;delete this.Ib;delete this.v};
h("xiv.ui.ViewBoxInteractorHandler.EventType",{NV:"N",uV:"O",zW:"P",XU:"Q"});h("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",uq);h("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",V.a.Ab.Ze);h("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT",V.a.Ab.kq);h("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",V.a.Ab.prototype.GE);h("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",V.a.Ab.prototype.PE);h("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",V.a.Ab.prototype.OE);
h("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",V.a.Ab.prototype.DE);h("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",V.a.Ab.prototype.ME);h("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",V.a.Ab.prototype.Zn);h("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",V.a.Ab.prototype.$D);h("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",V.a.Ab.prototype.TH);h("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",V.a.Ab.prototype.tB);
h("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",V.a.Ab.prototype.OG);h("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",V.a.Ab.prototype.iJ);h("xiv.ui.ViewBoxInteractorHandler.prototype.update",V.a.Ab.prototype.update);h("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",V.a.Ab.prototype.DJ);h("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",V.a.Ab.prototype.JJ);
h("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",V.a.Ab.prototype.xJ);h("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",V.a.Ab.prototype.QE);h("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",V.a.Ab.prototype.k);lc&&uc(8);P.d.Vc=function(){P.d.ef.call(this);this.De=[]};k(P.d.Vc,P.d.ef);h("gxnat.vis.ViewableTree",P.d.Vc);P.d.Vc.Nz=function(a,b,c){this.OS=a;this.WT=b;this.AN=c};h("gxnat.vis.ViewableTree.metadataCollection",P.d.Vc.Nz);f=P.d.Vc.prototype;f.Lv=null;f.Vp=null;f.gp=null;f.orientation=null;f.$c=function(){return this.orientation};f.ys=function(a){this.Lv=a};f.As=function(a){this.Vp=a};f.us=function(a){this.gp=a};f.DP=function(){return this.De};
f.k=function(){P.d.Vc.g.k.call(this);null!=this.Lv&&(wb(this.Lv),delete this.MY);null!=this.Vp&&(wb(this.Vp),delete this.YY);null!=this.gp&&(wb(this.gp),delete this.gY);null!=this.De&&(A(this.De,function(a){a.k()}),delete this.De);null!=this.AJ&&Nb(this.AJ);delete this.AJ;delete this.orientation};h("gxnat.vis.ViewableTree.metadataCollection",P.d.Vc.Nz);h("gxnat.vis.ViewableTree.prototype.projectMetadata",P.d.Vc.prototype.Lv);h("gxnat.vis.ViewableTree.prototype.subjectMetadata",P.d.Vc.prototype.Vp);
h("gxnat.vis.ViewableTree.prototype.experimentMetadata",P.d.Vc.prototype.gp);h("gxnat.vis.ViewableTree.prototype.orientation",P.d.Vc.prototype.orientation);h("gxnat.vis.ViewableTree.prototype.getOrientation",P.d.Vc.prototype.$c);h("gxnat.vis.ViewableTree.prototype.setProjectMetadata",P.d.Vc.prototype.ys);h("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",P.d.Vc.prototype.As);h("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",P.d.Vc.prototype.us);
h("gxnat.vis.ViewableTree.prototype.getViewableGroups",P.d.Vc.prototype.DP);h("gxnat.vis.ViewableTree.prototype.dispose",P.d.Vc.prototype.k);V.a.Ed=function(){U.S.call(this);this.Sn=vh("div",{id:V.a.Ed.ID_PREFIX+"_ProgBarHolder_"+r(),"class":V.a.Ed.CSS.WK});zh(this.b(),this.Sn);this.ej=vh("div",{id:V.a.Ed.ID_PREFIX+"_LabelHolder_"+r(),"class":V.a.Ed.CSS.AK});zh(this.b(),this.ej);this.Pk=new bp;this.Pk.cc(this.Sn);R(ph("progress-bar-thumb",this.Sn),V.a.Ed.CSS.Qw)};k(V.a.Ed,U.S);h("xiv.ui.ProgressBarPanel",V.a.Ed);V.a.Ed.ID_PREFIX="xiv.ui.ProgressBarPanel";V.a.Ed.CSS_SUFFIX={Qw:"thumb",WK:"progbarholder",AK:"labelholder"};f=V.a.Ed.prototype;
f.Qr="";f.bB=!1;f.yi=function(a){this.Qr=a;this.ej.innerHTML=this.Qr};f.aB=function(a){this.bB=null!=a&&!1===a?!1:!0;this.aa(this.Pk.ea())};f.aa=function(a){this.Pk.aa(a);this.ej.innerHTML=this.Qr;this.bB&&(0<this.Qr.length&&(this.ej.innerHTML+=" "),this.ej.innerHTML+=this.Pk.ea().toString()+"%");Vg(this.Sn,"progress-bar-horizontal")};f.ea=function(){return this.Pk.ea()};
f.i=function(){V.a.Ed.g.i.call(this);null!=this.Pk&&(this.Pk.k(),delete this.Pk);null!=this.Sn&&(S(this.Sn),delete this.Sn);null!=this.ej&&(S(this.ej),delete this.ej);this.Qr=this.bB=null};h("xiv.ui.ProgressBarPanel.EventType",{});h("xiv.ui.ProgressBarPanel.ID_PREFIX",V.a.Ed.ID_PREFIX);h("xiv.ui.ProgressBarPanel.CSS_SUFFIX",V.a.Ed.CSS_SUFFIX);h("xiv.ui.ProgressBarPanel.prototype.setLabel",V.a.Ed.prototype.yi);h("xiv.ui.ProgressBarPanel.prototype.showValue",V.a.Ed.prototype.aB);
h("xiv.ui.ProgressBarPanel.prototype.setValue",V.a.Ed.prototype.aa);h("xiv.ui.ProgressBarPanel.prototype.getValue",V.a.Ed.prototype.ea);h("xiv.ui.ProgressBarPanel.prototype.disposeInternal",V.a.Ed.prototype.i);U.G=function(){U.mc.call(this)};k(U.G,U.mc);h("nrg.ui.ThumbnailGallery",U.G);U.G.ID_PREFIX="nrg.ui.ThumbnailGallery";U.G.CSS_SUFFIX={mK:"dialog",Rw:"thumbnail",Tw:"thumbnail-image",rW:"thumbnail-text"};U.G.qq=r();U.G.prototype.jw=!1;U.G.prototype.eB=function(a){this.jw=a;null!=this.A&&this.jw&&this.A.RA(U.G.qB)};U.G.prototype.p=function(a){U.G.g.p.call(this,a);Tq(this);this.jw&&this.A.RA(U.G.qB)};
U.G.qB=function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=Ch(a),d=b[U.G.qq].toLowerCase(),e,g,l=c.length,m=0;m<l;m++)if(g=c[m],null!=g[U.G.qq]&&(e=g[U.G.qq].toLowerCase(),e=Na(d,e),0>e)){Bh(b,g);return}a.appendChild(b)};f=U.G.prototype;f.dr=function(a,b){var c=new U.s;Xg(c.b(),Tg(c.b()),this.mm);Xg(c.Og,Tg(c.Og),this.bo);Xg(c.xe,Tg(c.xe),this.ao);c.UA(a);c.Bs(b);return c};f.loop=function(a){w(this.Tc,function(b){a(b)})};f.TA=function(a){this.loop(function(b){zh(a,b.gh())})};
f.So=function(a,b){sb(this.Tc,a)||(this.Tc=this.Tc?this.Tc:{},this.Tc[a.b().getAttribute("id")]=a,this.D.Vq(a.gh()),C(this.D,"r",this.uR.bind(this)),a.b()[U.G.qq]=a.Ty().toLowerCase(),this.Yg(a.b(),b),this.Pe(),C(a,"w",function(a){this.dispatchEvent({type:"w",s:a.target})}.bind(this)),C(a,"x",function(a){this.dispatchEvent({type:"x",s:a.target})}.bind(this)))};f.pl=function(a,b,c){a=this.dr(a,b);this.So(a,c);Uq(this,"image");Uq(this,"text");Uq(this,"thumbnail");this.Pe();return a};
f.Es=function(){U.G.g.Es.call(this);C(this.wi,"mouseover",this.rJ.bind(this))};f.rJ=function(a){this.Wz=a.clientX;this.Xz=a.clientY};function Vq(a){w(a.Tc,function(a){a.gs()});a.Ks=null}f.uR=function(){var a=document.elementFromPoint(this.Wz,this.Xz);(a=Sh(a,null,U.s.gd))?(a=a.id.replace(U.s.kt,""),this.Ks!==a&&(Vq(this),this.Ks=a,this.Tc[this.Ks].Bv()),this.Tc[this.Ks].OA()):Vq(this)};
function Uq(a,b){var c,d=[],e="";for(e in a.Tc){switch(b){case "thumbnail":d=a.mm;c=a.Tc[e].b();break;case "image":d=a.ao;c=a.Tc[e].xe;break;case "text":d=a.bo,c=a.Tc[e].Og}Xg(c,Tg(c),d)}}f.DD=function(a){null!=this.mm||Tq(this);this.mm.push(a);Uq(this,"thumbnail")};f.GD=function(a){this.ao.push(a);Uq(this,"image")};f.HD=function(a){this.bo.push(a);Uq(this,"text")};f.o=function(a){a&&Qk.zb(this.b(),a)};
function Tq(a){var b=new U.s;a.mm=Tg(b.b());a.mm.push(U.G.CSS.Rw);a.ao=Tg(b.xe);a.ao.push(U.G.CSS.Tw);a.bo=Tg(b.Og);a.bo.push(U.G.CSS.HC);S(b.b());delete b}f.i=function(){U.G.g.i.call(this);delete this.jw;null!=this.Wz&&delete this.Wz;null!=this.Xz&&delete this.Xz;null!=this.Tc&&(U.tu(this.Tc),delete this.Tc);null!=this.A&&(ad(this.A),this.A.k(),delete this.A);null!=this.mm&&(Nb(this.mm),delete this.mm);null!=this.ao&&(Nb(this.ao),delete this.ao);null!=this.bo&&(Nb(this.bo),delete this.bo);delete this.Ks};
h("nrg.ui.ThumbnailGallery.ID_PREFIX",U.G.ID_PREFIX);h("nrg.ui.ThumbnailGallery.CSS_SUFFIX",U.G.CSS_SUFFIX);h("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",U.G.qq);h("nrg.ui.ThumbnailGallery.thumbnailSorter",U.G.qB);h("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",U.G.prototype.eB);h("nrg.ui.ThumbnailGallery.prototype.render",U.G.prototype.p);h("nrg.ui.ThumbnailGallery.prototype.createThumbnail",U.G.prototype.dr);h("nrg.ui.ThumbnailGallery.prototype.loop",U.G.prototype.loop);
h("nrg.ui.ThumbnailGallery.prototype.setHoverParent",U.G.prototype.TA);h("nrg.ui.ThumbnailGallery.prototype.addThumbnail",U.G.prototype.So);h("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",U.G.prototype.pl);h("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",U.G.prototype.Es);h("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",U.G.prototype.DD);h("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",U.G.prototype.GD);
h("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",U.G.prototype.HD);h("nrg.ui.ThumbnailGallery.prototype.updateStyle",U.G.prototype.o);h("nrg.ui.ThumbnailGallery.prototype.disposeInternal",U.G.prototype.i);V.a.Hc=function(){U.S.call(this)};k(V.a.Hc,U.S);h("xiv.ui.ViewableGroupMenu",V.a.Hc);V.a.Hc.ID_PREFIX="xiv.ui.ViewableGroupMenu";V.a.Hc.CSS_SUFFIX={jt:"header",Rw:"thumbnail",HC:"thumbnail-text",Tw:"thumbnail-image",oL:"thumbnailgallery",gt:"background"};f=V.a.Hc.prototype;f.sa=null;f.Zg=null;f.op=null;
f.p=function(){V.a.Hc.g.p.call(this);this.Zg=vh("div",{id:this.constructor.ID_PREFIX+"_Background_"+r()});R(this.Zg,this.constructor.CSS.gt);zh(this.b(),this.Zg);this.op=vh("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+r(),"class":V.a.Hc.CSS.jt});this.op.innerHTML="<b> Select View <b>";zh(this.b(),this.op);null!=this.sa||this.reset()};f.WN=function(){return this.Zg};f.show=function(){T.nr(this.b(),V.EU)};f.pl=function(a,b){null!=this.sa||this.reset();var c=this.sa.pl(a,b);Wq(this,c);return c};
f.sp=function(){T.un(this.b(),500);S(this.b())};f.reset=function(){null!=this.sa&&(this.sa.k(),delete this.sa);this.sa=new U.G;this.sa.eB(!0);this.sa.p(this.b());R(this.sa.b(),V.a.Hc.CSS.oL);this.sa.DD(V.a.Hc.CSS.Rw);this.sa.GD(V.a.Hc.CSS.Tw);this.sa.HD(V.a.Hc.CSS.HC)};function Wq(a,b){C(b,"y",function(){this.dispatchEvent({type:"R",yJ:b})}.bind(a))}
f.i=function(){V.a.Hc.g.i.call(this);null!=this.Zg&&(S(this.Zg),delete this.Zg);null!=this.op&&(S(this.op),delete this.op);null!=this.sa&&(this.sa.k(),delete this.sa)};h("xiv.ui.ViewableGroupMenu.ID_PREFIX",V.a.Hc.ID_PREFIX);h("xiv.ui.ViewableGroupMenu.EventType",{OW:"R"});h("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",V.a.Hc.CSS_SUFFIX);h("xiv.ui.ViewableGroupMenu.prototype.render",V.a.Hc.prototype.p);h("xiv.ui.ViewableGroupMenu.prototype.getBackground",V.a.Hc.prototype.WN);
h("xiv.ui.ViewableGroupMenu.prototype.show",V.a.Hc.prototype.show);h("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",V.a.Hc.prototype.pl);h("xiv.ui.ViewableGroupMenu.prototype.hide",V.a.Hc.prototype.sp);h("xiv.ui.ViewableGroupMenu.prototype.reset",V.a.Hc.prototype.reset);h("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",V.a.Hc.prototype.i);var Xq;function Yq(a,b,c,d,e){this.en=a;this.Mn=b;this.WD=c;this.nM=d;this.is=e}Yq.prototype.getName=function(){return this.Mn};function Zq(a){return!a.Mn||"[object Object]"==a.en}
function $q(a){var b=[a.en?ar(a.en)+".":"",a.Mn?ar(br(a.Mn)):"anonymous",ar(a.nM),a.WD?" [as "+ar(br(a.WD))+"]":""];if(a.is)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.is.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',ar(a.is),"', '",c,"'); return false\">",ar(a.is),"</a>")}else b.push(ar(a.is));return b.join("")}
var cr=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,dr=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,er=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
fr=/^function ([a-zA-Z_$][\w$]*)/,gr=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function hr(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(fr),d=d?d[1]:"",e=["("];if(b.arguments)for(var g=0;g<b.arguments.length;g++){var l=b.arguments[g];0<g&&e.push(", ");ka(l)?e.push('"',l,'"'):l&&l.$replay?e.push("goog.testing.Mock"):e.push(String(l))}else e.push("unknown");e.push(")");a.push(new Yq("",d,"",e.join(""),""));try{b=b.caller}catch(m){break}c++}return a}
function ir(a){var b=a.match(cr);if(b)return new Yq(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var g="";0<=c&&c+1<d&&(g=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new Yq("",e,"",d,g)}return(b=a.match(dr))?new Yq("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(er))?new Yq(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(gr))?new Yq("",b[1]||"","","",b[2]||
""):null}function br(a){return Xq?Xq(a):a}function ar(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function jr(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}h("setDeobfuscateFunctionName",function(a){Xq=a});function kr(a,b){return a==b}function lr(a,b){return a.toString()===b.toString()}var mr={String:kr,Number:kr,Boolean:kr,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:lr,Function:lr};function nr(a,b,c){return Math.abs(a-b)<=c}var or={Number:nr};
function pr(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function qr(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+pr(a)+")");return b}function rr(a,b){return b.length==a+1?b[0]:null}function sr(a,b,c){return c.length==b+1?c[a]:c[a-1]}function tr(a,b){b.length==a||b.length==a+1&&ka(b[0])||ur(null,"Incorrect arguments passed to assert function")}
function vr(a,b){var c="Expected "+qr(a)+" but was "+qr(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var g=0;g<d&&a.charAt(a.length-g-1)==b.charAt(b.length-g-1);)g++;e+g>d&&(g=0);if(2<e||2<g)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(g-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function wr(a,b){tr(1,arguments);var c=rr(1,arguments),d=sr(1,1,arguments);la(d)||ur(c,"Bad argument to assert(boolean)");d||ur(c,"Call to assert(boolean) with false")}function xr(a,b){tr(1,arguments);var c=rr(1,arguments),d=sr(1,1,arguments);la(d)||ur(c,"Bad argument to assertTrue(boolean)");d||ur(c,"Call to assertTrue(boolean) with false")}function yr(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments),g=vr(d,e);d===e||ur(rr(2,arguments),g)}
function zr(a,b){tr(1,arguments);var c="Expected not to be "+qr(null);null!==sr(1,1,arguments)||ur(rr(1,arguments),c)}function Ar(a,b){tr(1,arguments);var c="Expected not to be "+qr(void 0);void 0!==sr(1,1,arguments)||ur(rr(1,arguments),c)}
function Br(a,b,c){function d(a,b,c){for(var s=0;s<g.length;++s){var u=g[s]===a,v=l[s]===b;if(u||v){u&&v||e.push("Asymmetric cycle detected at "+c);return}}g.push(a);l.push(b);if(a!==b)if(s=pr(a),u=pr(b),s==u){var v="Array"==s,D=m(s,a,b);if(null!=D)""!=D&&e.push(c+": "+D);else if(v&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(D=c+(v?"[%s]":c?".%s":"%s"),a.__iterator__)na(a.fp)?a.fp(b)||e.push("equals() returned false for "+(c||
s)):a.rc?d(a.rc,b.rc,D.replace("%s","map_")):e.push("unable to check "+(c||s)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var B in a)v&&(B|0)==B||(B in b?d(a[B],b[B],D.replace("%s",B)):e.push("property "+B+" not present in actual "+(c||u)));for(B in b)v&&(B|0)==B||B in a||e.push("property "+B+" not present in expected "+(c||s));if(v)for(B=0;B<a.length;B++)d(a[B],b[B],D.replace("%s",String(B)))}}else e.push(c+" "+vr(a,b));g.pop();l.pop()}
var e=[],g=[],l=[],m=c||function(a,b,c){return(a=mr[a])?a(b,c)?"":vr(b,c):null};d(a,b,"");return 0==e.length?null:vr(a,b)+"\n   "+e.join("\n   ")}function Fr(a,b,c){tr(2,arguments);var d=rr(2,arguments)?rr(2,arguments):"",e=Br(sr(1,2,arguments),sr(2,2,arguments));!e||ur(d,e)}function Gr(a,b,c,d){tr(3,arguments);var e=sr(1,3,arguments),g=sr(2,3,arguments),l=sr(3,3,arguments);nr(e,g,l)||ur(rr(3,arguments),"Expected "+e+", but got "+g+" which was more than "+l+" away")}
function Hr(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function Ir(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function Jr(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function ur(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new Kr(a,b);}
function Kr(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=jr();if(c){if(ia(c))for(var d=[],e=0;e<c.length;e++){var g=c[e],l=g.getFunctionName()||"unknown",m=g.getFileName(),g=m?m+":"+g.getLineNumber()+":"+g.getColumnNumber():"unknown";d.push(new Yq("",l,"","",g))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(ir(c[e]));c=d}else c=hr();for(d=c.length-1;c[d]&&Zq(c[d]);)d--;e=-1;for(l=0;l<c.length;l++)if(c[l]&&"_assert"==c[l].getName()){e=l;break}g=[];for(l=e+1;l<=
d;l++)g.push("> "),c[l]?g.push($q(c[l])):g.push("(unknown)"),g.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,Kr):this.stack=Error().stack||""}k(Kr,Error);Kr.prototype.toString=function(){return this.message};h("fail",function(a){ur("Call to fail()",a)});h("assert",wr);
h("assertThrows",function(a,b){tr(1,arguments);var c=sr(1,1,arguments),d=rr(1,arguments);"function"==typeof c||ur(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&ka(e.stacktrace)&&ka(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}ur(d,"No exception thrown from function passed to assertThrows")});
h("assertNotThrows",function(a,b){tr(1,arguments);var c=rr(1,arguments),d=sr(1,1,arguments);"function"==typeof d||ur(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",ur(c,e.stack||e.stacktrace||e.toString())}});h("assertTrue",xr);
h("assertFalse",function(a,b){tr(1,arguments);var c=rr(1,arguments),d=sr(1,1,arguments);la(d)||ur(c,"Bad argument to assertFalse(boolean)");!d||ur(c,"Call to assertFalse(boolean) with true")});h("assertEquals",yr);h("assertNotEquals",function(a,b,c){tr(2,arguments);var d=sr(2,2,arguments),e="Expected not to be "+qr(d);sr(1,2,arguments)!==d||ur(rr(2,arguments),e)});h("assertNull",function(a,b){tr(1,arguments);var c=sr(1,1,arguments),d=vr(null,c);null===c||ur(rr(1,arguments),d)});
h("assertNotNull",zr);h("assertUndefined",function(a,b){tr(1,arguments);var c=sr(1,1,arguments),d=vr(void 0,c);void 0===c||ur(rr(1,arguments),d)});h("assertNotUndefined",Ar);h("assertNotNullNorUndefined",function(a,b){tr(1,arguments);zr.apply(null,arguments);Ar.apply(null,arguments)});h("assertNonEmptyString",function(a,b){tr(1,arguments);var c=sr(1,1,arguments),d="Expected non-empty string but was "+qr(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||ur(rr(1,arguments),d)});
h("assertNaN",function(a,b){tr(1,arguments);isNaN(sr(1,1,arguments))||ur(rr(1,arguments),"Expected NaN")});h("assertNotNaN",function(a,b){tr(1,arguments);!isNaN(sr(1,1,arguments))||ur(rr(1,arguments),"Expected not NaN")});h("assertObjectEquals",Fr);
h("assertObjectRoughlyEquals",function(a,b,c,d){tr(3,arguments);var e=sr(3,3,arguments),g=rr(3,arguments)?rr(3,arguments):"",l=Br(sr(1,3,arguments),sr(2,3,arguments),function(a,b,c){return(a=or[a])?a(b,c,e)?"":vr(b,c)+" which was more than "+e+" away":null});!l||ur(g,l)});h("assertObjectNotEquals",function(a,b,c){tr(2,arguments);var d=rr(2,arguments)?rr(2,arguments):"";Br(sr(1,2,arguments),sr(2,2,arguments))||ur(d,"Objects should not be equal")});
h("assertArrayEquals",function(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments),g=rr(2,arguments)?rr(2,arguments):"",l=pr(d);"Array"==l||ur(g,"Expected an array for assertArrayEquals but found a "+l);l=pr(e);"Array"==l||ur(g,"Expected an array for assertArrayEquals but found a "+l);Fr(g,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
h("assertElementsEquals",function(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments),g=rr(2,arguments)?rr(2,arguments):"";if(d){yr("length mismatch: "+g,d.length,e.length);for(var l=0;l<d.length;++l)yr("mismatch at index "+l+": "+g,d[l],e[l])}else wr(g,!e)});
h("assertElementsRoughlyEqual",function(a,b,c,d){tr(3,arguments);var e=sr(1,3,arguments),g=sr(2,3,arguments),l=sr(3,3,arguments),m=rr(3,arguments)?rr(3,arguments):"";if(e){yr("length mismatch: "+m,e.length,g.length);for(var q=0;q<e.length;++q)Gr(m,e[q],g[q],l)}else wr(m,!g)});
h("assertSameElements",function(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments),g=rr(2,arguments);xr("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ja(d)&&ja(e));d=Hr(d);e=Hr(e);d.length==e.length||ur(g,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var l=Hr(d),m=0;m<e.length;m++){var q=Ir(l,e[m]);-1!=q||ur(g,"Expected ["+d+"], got ["+e+"]");l.splice(q,1)}});
h("assertEvaluatesToTrue",function(a,b){tr(1,arguments);sr(1,1,arguments)||ur(rr(1,arguments),"Expected to evaluate to true")});h("assertEvaluatesToFalse",function(a,b){tr(1,arguments);sr(1,1,arguments)&&ur(rr(1,arguments),"Expected to evaluate to false")});h("assertHTMLEquals",function(a,b,c){tr(2,arguments);var d=sr(2,2,arguments),e=Jr(sr(1,2,arguments)),d=Jr(d),g=vr(e,d);e===d||ur(rr(2,arguments),g)});
h("assertHashEquals",function(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments),g=rr(2,arguments),l;for(l in d)l in e||ur(g,"Expected hash had key "+l+" that was not found"),d[l]==e[l]||ur(g,"Value for key "+l+" mismatch - expected = "+d[l]+", actual = "+e[l]);for(l in e)l in d||ur(g,"Actual hash had key "+l+" that was not expected")});h("assertRoughlyEquals",Gr);
h("assertContains",function(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments);-1!=Ir(e,d)||ur(rr(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});h("assertNotContains",function(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments);-1==Ir(e,d)||ur(rr(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
h("assertRegExp",function(a,b,c){tr(2,arguments);var d=sr(1,2,arguments),e=sr(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||ur(rr(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});V.a.Q=function(){U.S.call(this);this.nd=[];this.zt={};this.ce={wW:null,Uw:null,vm:null,$J:null,FU:null,aK:null,dL:null,pL:null};this.ce.Uw=vh("div",{id:V.a.Q.ID_PREFIX+"_menu_top_left_"+r(),"class":V.a.Q.CSS.KK,viewbox:this.b().id});zh(this.b(),this.ce.Uw);this.Dc=vh("div",{id:V.a.Q.ID_PREFIX+"_ViewFrame_"+r(),"class":V.a.Q.CSS.AL});zh(this.b(),this.Dc);this.Od=new V.a.Ed;zh(this.Dc,this.Od.b());this.Od.b().style.opacity=0;this.Od.b().style.zIndex=1E5;Lr(this.Od);this.o()};k(V.a.Q,U.S);
h("xiv.ui.ViewBox",V.a.Q);var Mr={yL:"S",wL:"T",xL:"U"};V.a.Q.ID_PREFIX="xiv.ui.ViewBox";V.a.Q.CSS_SUFFIX={cV:"hidden",kW:"tabdragger",lW:"tabdragger-handle",CL:"viewlayoutmenu",KK:"menu-top-left",JK:"menu-left",BL:"viewlayouthandler",mW:"ziptabs",nW:"ziptab-bounds",AL:"viewframe",QB:"component-highlight",vL:"viewablegroupmenu"};V.a.Q.WE={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};V.a.Q.MK=200;V.a.Q.gL=15;V.a.Q.hL=50;V.a.Q.NK=.2;f=V.a.Q.prototype;f.HQ="empty";f.yf=null;
f.Ib=null;f.Nd=null;f.Wa=null;f.Od=null;f.df=null;f.v=null;f.mg=null;f.KG=!1;f.KO=function(){return this.ce};f.EO=function(){return this.HQ};f.hk=function(){return this.nd};f.AP=function(){return this.Dc};f.CO=function(){return this.Ib};f.CP=function(){return this.df};f.vp=function(){R(this.Dc,V.a.Q.CSS.QB)};f.Ws=function(){Vg(this.Dc,V.a.Q.CSS.QB)};f.rP=function(){return this.uj};f.KM=function(){this.uj=void 0};f.pN=function(a){this.sy=this.sy?this.sy:[];this.sy.push(a)};f.Xn=function(a){this.Nd.zs(a)};
f.QR=function(){this.Od.aa(0);this.Od.aB(!0);Nr(this.Od,0);this.vp()};function Or(a,b){a.Od.yi("");a.Od.aB(!0);a.Od.aa(100*b)}f.qA=function(a){this.vp();Or(this,a.value)};V.a.Q.jK=function(){};function Pr(a,b,c){Wf(function(){Lr(this.Od,500,function(){this.o();null!=c&&c()}.bind(this))}.bind(a),ma(b)?b:1E3)}f=V.a.Q.prototype;
f.Cv=function(){Qr(this,!1);A(oh("xtk-progress-bar"),function(a){a.visibility="hidden"});null!=this.nd[0].$c()&&this.Xn(this.nd[0].$c());this.v.EE();Rr(this);this.mg.GE();this.mg.$D();Pr(this,800,function(){this.Od.aa(0);this.o();this.Av();this.dispatchEvent("T");this.Ws()}.bind(this))};f.Av=function(){this.Wa&&this.Wa.o();null!=this.mg&&this.mg.update();null!=this.Wa&&this.mg.TH()};
function Sr(a,b){a.df.reset();wb(a.zt);Mb(a.nd,b)||a.nd.push(b);1==a.nd.length&&a.Xn(V.a.Q.WE[b.Vj]);var c=b.De,d=null;1<c.length?(A(c,function(a,b){d=this.df.pl(a.Xp,a.Fg()||b);this.zt[pa(d)]=a}.bind(a)),Nr(a.df,400)):a.load(c[0],!1)}f.Gs=function(){this.v.Gs()};f.Px=function(a){return null!=this.uj?(this.Gs(),this.v.HI(a),!0):!1};
f.load=function(a,b){this.dispatchEvent("S");if(!this.Px(function(){this.uj=void 0;this.load(a,b)}.bind(this)))if(null!=a){if(b=null!=b?b:!0)Tr(this),this.ce.vm=vh("div",{id:V.a.Q.ID_PREFIX+"_menu_left_"+r(),"class":V.a.Q.CSS.JK,viewbox:this.b().id}),this.ce.vm.style.opacity=0,zh(this.b(),this.ce.vm),this.Nd=new U.W,this.Zm("LEFT",this.Nd.b()),R(this.Nd.b(),V.a.Q.CSS.CL),this.Nd.tH(!0),this.Nd.uH(!0),this.Nd.b().style.opacity=0,this.Nd.Hg.style.opacity=0,this.Dc.appendChild(this.Nd.Hg),this.v=new V.a.hb(this),
this.Ib=new V.a.e.Ka,this.Ib.b().style.opacity=0,zh(this.Dc,this.Ib.b()),R(this.Ib.b(),V.a.Q.CSS.BL),C(this.Ib,"v",this.Av.bind(this)),C(this.Ib,"s",this.mA.bind(this)),C(this.Ib,"u",this.nA.bind(this)),C(this.Ib,"t",this.lA.bind(this)),Ur(this),Vr(this),this.mg=new V.a.Ab(this,this.Wa,this.Ib,this.v),this.mg.xJ(this.Nd),this.KG=!0;Lr(this.df,400);Nr(this.Od,0);if(a instanceof P.d.Vc)Sr(this,a);else{var c;w(this.Wa.Dd,function(a,b){(c=this.Ib.OF(b))&&a.Ta(c.b())}.bind(this));Yc(this.Wa,"z",this.QR.bind(this));
Yc(this.Wa,"B",this.Cv.bind(this));C(this.Wa,"A",this.qA.bind(this));Qr(this,!0);"scans"==a.Vj.toLowerCase()?Wr(this,a):(this.Wa.p(a),this.uj=(new Date).getTime())}}else Xr(this,"The data set is empty!")};function Wr(a,b){Nr(a.Od,0);Or(a,0);var c=a.nd[a.nd.length-1].rG(),d=b.$i()[0].Zi()[0].split("/files/")[0]+"/files";P.ug.UF(d,function(a){b.$i()[0].BI(a);this.Wa.p(b);this.uj=(new Date).getTime()}.bind(a),function(a){this.vp();Or(this,a.loaded/c)}.bind(a))}
function Qr(a,b){window.onerror=!0===b?function(a){Xr(this,a)}.bind(a):void 0}function Xr(a,b){a.Ws();Pr(a);Qr(a,!1);Tr(a);b=b.replace("Uncaught Error: ","")||"A render error occured :(<br>";a.dispatchEvent({type:Mr.vW,message:b});var c=new U.Bd;c.qD();c.rD();var d=c.au();R(d,U.Bd.CSS.xC);d.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";c.il(b||"");c.p(a.Dc);c.b().style.opacity=0;c.b().style.zIndex=1E3;T.or(c.b(),V.ft)}
f.mA=function(a){w(this.Wa.Dd,function(b,c){null!=a.vB[c]&&(b.Wn(a.vB[c]),b.o())})};f.nA=function(){w(this.Wa.Dd,function(a){a.o()});this.mg.update()};f.lA=function(a){var b=a.frames;w(this.Wa.Dd,function(a,d){null!=b[d]&&(a.Wn(b[d].b()),a.o())}.bind(this));this.mg.update()};function Rr(a){var b=0,b=ma(b)?b:500,c=[];A([a.ce.vm,a.Nd.b(),a.Ib.b()],function(a){c.push(T.Gy(a,{opacity:0},{opacity:1},b))});T.DA(c,null,null,void 0)}
function Lr(a,b,c){if(null!=a){b=ma(b)&&0<=b?b:0;var d=function(){a.b().style.visibility="hidden";a.b().style.zIndex="-1";c&&c()};"hidden"==a.b().style.visibility||0==b?d():T.un(a.b(),b,d)}}function Nr(a,b){b=ma(b)&&0<=b?b:0;a.b().style.opacity="0";a.b().style.zIndex="1000";a.b().style.visibility="visible";0==b?a.b().style.opacity="1":T.nr(a.b(),b,function(){})}
f.Zm=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.ce.Uw;break;case "LEFT":d=this.ce.vm;break;case "BOTTOM_LEFT":d=this.ce.$J;break;case "TOP_RIGHT":d=this.ce.pL;break;case "RIGHT":d=this.ce.dL;break;case "BOTTOM_RIGHT":d=this.ce.aK}ma(c)?d.insertBefore(b,d.childNodes[c]):zh(d,b)};
f.Lp=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?R(a,a.getAttribute(V.a.hb.wt)):Vg(a,a.getAttribute(V.a.hb.wt));null!=b&&b(a)};f.CJ=function(a){return"true"==this.yf[a].getAttribute("checked").toString()};f.Vy=function(a){return this.yf[a]};f.Ke=function(a){nl(this.yf[a])};f.zB=function(a){ia(a)||(a=[a]);A(a,function(a){null!=this.yf[a]&&this.CJ(a)&&nl(this.yf[a])}.bind(this))};
f.hn=function(a,b,c,d,e,g){var l=b+"-on",m=vh("img",b);m.id=dj(this)+".IconButton_";m.title=d;null!=g&&(m.src=g);m.setAttribute("checked","true");m.setAttribute(V.a.hb.wt,b+"-on");R(m,l);Qk.zb(m,{cursor:"pointer"});C(m,"click",function(){this.Lp(m,e)}.bind(this));this.Zm(a,m);if(null==this.yf)this.yf={};else if(null!=this.yf[c])throw Error("Invalid identifier for toggle button.  In use.");return this.yf[c]=m};
function Vr(a){a.df=new V.a.Hc;a.df.p(a.Dc);zh(a.Dc,a.df.b());zh(a.Dc,a.df.Zg);R(a.df.b(),V.a.Q.CSS.vL);C(a.df,"R",function(a){this.load(this.zt[pa(a.yJ)],!1)}.bind(a));Lr(a.df)}f.tP=function(){return this.yf};function Ur(a){a.Wa=new V.d.H;C(a.Wa,"H",function(a){Xr(this,a.message)}.bind(a))}
f.o=function(a){V.a.Q.g.o.call(this,a);null!=this.Ib&&this.Ib.o();this.Wa&&this.Wa.o();null!=this.Nd&&(a=ti(this.Dc),this.Nd.FI(-100,a.height/2-130),this.Nd.XI(0,a.height/2-130));null!=this.v&&this.v.update();null!=this.mg&&this.mg.JJ()};
function Tr(a){wb(a.zt);Nb(a.nd);null!=a.Ib&&(ad(a.Ib),Gc(a.Ib.k()),delete a.Ib);null!=a.Nd&&(ad(a.Nd),a.Nd.k(),delete a.Nd);null!=a.Wa&&(a.Wa.k(),delete a.Wa);null!=a.df&&(a.df.k(),delete a.df);null!=a.v&&a.v.i();null!=a.mg&&a.mg.k();null!=a.yf&&(S(a.ce.vm),delete a.ce.vm,w(a.yf,function(a){ad(a);S(a)}),Nb(a.yf),delete a.yf)}
f.i=function(){V.a.Q.g.i.call(this);Tr(this);null!=this.Od&&(this.Od.k(),delete this.Od);S(this.Dc);ad(this.Dc);delete this.Dc;w(this.ce,function(a,b){S(a);delete this.ce[b]}.bind(this));delete this.ce;delete this.aX;delete this.KG};h("xiv.ui.ViewBox.EventType",Mr);h("xiv.ui.ViewBox.ID_PREFIX",V.a.Q.ID_PREFIX);h("xiv.ui.ViewBox.CSS_SUFFIX",V.a.Q.CSS_SUFFIX);h("xiv.ui.ViewBox.defaultLayout",V.a.Q.WE);h("xiv.ui.ViewBox.MIN_HOLDER_HEIGHT",V.a.Q.MK);h("xiv.ui.ViewBox.SCAN_TAB_LABEL_HEIGHT",V.a.Q.gL);
h("xiv.ui.ViewBox.SCAN_TAB_LABEL_WIDTH",V.a.Q.hL);h("xiv.ui.ViewBox.MIN_TAB_H_PCT",V.a.Q.NK);h("xiv.ui.ViewBox.ControllersSet",V.a.Q.jK);h("xiv.ui.ViewBox.prototype.getMenus",V.a.Q.prototype.KO);h("xiv.ui.ViewBox.prototype.getLoadState",V.a.Q.prototype.EO);h("xiv.ui.ViewBox.prototype.getViewableTrees",V.a.Q.prototype.hk);h("xiv.ui.ViewBox.prototype.getViewFrame",V.a.Q.prototype.AP);h("xiv.ui.ViewBox.prototype.getLayoutHandler",V.a.Q.prototype.CO);
h("xiv.ui.ViewBox.prototype.getViewableGroupMenu",V.a.Q.prototype.CP);h("xiv.ui.ViewBox.prototype.highlight",V.a.Q.prototype.vp);h("xiv.ui.ViewBox.prototype.unhighlight",V.a.Q.prototype.Ws);h("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",V.a.Q.prototype.rP);h("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",V.a.Q.prototype.KM);h("xiv.ui.ViewBox.prototype.doNotHide",V.a.Q.prototype.pN);h("xiv.ui.ViewBox.prototype.setLayout",V.a.Q.prototype.Xn);h("xiv.ui.ViewBox.prototype.showInUseDialog",V.a.Q.prototype.Gs);
h("xiv.ui.ViewBox.prototype.checkInUseAndShowDialog",V.a.Q.prototype.Px);h("xiv.ui.ViewBox.prototype.load",V.a.Q.prototype.load);h("xiv.ui.ViewBox.prototype.addToMenu",V.a.Q.prototype.Zm);h("xiv.ui.ViewBox.prototype.onToggleButtonClicked",V.a.Q.prototype.Lp);h("xiv.ui.ViewBox.prototype.toggleButtonChecked",V.a.Q.prototype.CJ);h("xiv.ui.ViewBox.prototype.getToggleButton",V.a.Q.prototype.Vy);h("xiv.ui.ViewBox.prototype.fireToggleButton",V.a.Q.prototype.Ke);h("xiv.ui.ViewBox.prototype.untoggle",V.a.Q.prototype.zB);
h("xiv.ui.ViewBox.prototype.createToggleButton",V.a.Q.prototype.hn);h("xiv.ui.ViewBox.prototype.getToggleButtons",V.a.Q.prototype.tP);h("xiv.ui.ViewBox.prototype.updateStyle",V.a.Q.prototype.o);h("xiv.ui.ViewBox.prototype.disposeInternal",V.a.Q.prototype.i);function Yr(){fl.call(this)}k(Yr,fl);Yr.prototype.Ym=function(a,b){var c=new ll(a,b);c.ws(this);this.Nr.push(c);this.Rl&&gl(this,c)};V.a.ga=function(){U.S.call(this)};k(V.a.ga,U.S);h("xiv.ui.ViewBoxHandler",V.a.ga);V.a.ga.CSS_SUFFIX={qK:"handle",zL:"viewboxdragclone",Nk:"closebutton",LB:"addrowbutton",KB:"addcolumnbutton"};V.a.ga.Gj="viewboxid";V.a.ga.ID_PREFIX="xiv.ui.ViewBoxHandler";f=V.a.ga.prototype;f.Gw=5;f.sC=5;f.wo=document.body;f.Vl=function(a,b){this.dispatchEvent({type:"Y",LH:a,jM:b})};f.oT=function(){return this.M.length};f.ur=function(){var a=[];A(this.M,function(b,c){a.push([]);A(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.M&&A(this.M,function(b,c){A(b,function(d,e){a(d,c,e,this.M.length,b.length)}.bind(this))}.bind(this))};f.iz=function(a,b){this.M||(this.M=[[]]);var c=0,d=[],e;if(null!=a)c=Zr(this,a),this.M[c.Tu].length<this.sC&&(d.push($r(this)),Sb(this.M[c.Tu],c.AQ+1,0,d[0]));else{d=[];e=this.M.length?this.M.length:1;for(c=0;c<e;c++)d.push($r(this));0===this.M.length?this.M.push([d[0]]):A(this.M,function(a,b){a.push(d[b])})}this.Vl(d,void 0===b?!0:b);as(this)};
f.cT=function(a){this.M&&(a=void 0===a?!0:a,this.M[0]&&1<this.M[0].length&&A(this.M,function(a){var c=a.length-1;bs(this,a[c]);a.splice(c,1)}.bind(this)),this.Vl(null,a),as(this))};function Zr(a,b){for(var c=0,d=0,e=a.M.length,g=0,c=0;c<e;c++)for(d=0,g=a.M[c].length;d<g;d++)if(b===a.M[c][d])return{Tu:c,AQ:d}}
f.insertRow=function(a,b){this.M||(this.M=[[]]);var c=[],d,e;if(null!=a){var g=Zr(this,a),c=[];e=this.M[g.Tu].length;if(this.M.length<this.Gw){for(d=0;d<e;d++)c.push($r(this));Sb(this.M,g.Tu+1,0,c)}}else if(e=this.M[0]&&this.M[0].length?this.M[0].length:1,this.M.length<this.Gw){for(d=0;d<e;d++)c.push($r(this));this.M.push(c)}this.Vl(c,void 0===b?!0:b);as(this)};
f.eT=function(a){this.M&&(a=void 0===a?!0:a,1<this.M.length&&(A(this.M[this.M.length-1],function(a){bs(this,a)}.bind(this)),this.M.splice(this.M.length-1,1)),this.Vl(null,a),as(this))};f.Ju=function(a){for(var b=0,c=0,d=this.M.length,e=0,b=0;b<d;b++)for(c=0,e=this.M[b].length;c<e;c++)if(a===this.M[b][c].b())return this.M[b][c]};f.yP=function(a,b){return this.M[a][b].b()};f.wP=function(a,b){return this.M[a][b]};f.uG=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.tG=function(){var a=[];this.loop(function(b){a.push(b.b())});return a};f.aJ=function(a){this.wo=a};
function $r(a){var b=new V.a.Q;zh(a.wo,b.b());cs(a,b);var c=vh("img",{id:V.a.ga.ID_PREFIX+"_dragHandle_"+r(),"class":V.a.ga.CSS.qK});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute(V.a.ga.Gj,b.b().id);b.Zm("TOP_LEFT",c,1);a.vl||(a.vl={});a.vl[b.b().id]=c;c.title="Drag and drop view box to swap.";ds(a,b);es(a,b);C(b,"T",a.wA.bind(a));C(b,"S",a.xA.bind(a));C(b,"U",a.cS.bind(a));return b}
function es(a,b){var c=vh("img",{id:V.a.ga.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.ga.CSS.KB,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});Qk.dm(c,V.a.ga.CSS.KB+"-hovered");C(c,"click",function(){this.iz(b)}.bind(a));c.setAttribute(V.a.ga.Gj,b.b().id);b.Zm("TOP_LEFT",c,1);a.vD||(a.vD={});a.vD[b.b().id]=c;c.title="Add ViewBox Column."}
function ds(a,b){var c=vh("img",{id:V.a.ga.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.ga.CSS.LB,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});Qk.dm(c,V.a.ga.CSS.LB+"-hovered");C(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute(V.a.ga.Gj,b.b().id);b.Zm("TOP_LEFT",c,1);a.CD||(a.CD={});a.CD[b.b().id]=c;c.title="Close ViewBox."}
function cs(a,b){var c=vh("img",{id:V.a.ga.ID_PREFIX+"_CloseButton_"+r(),"class":V.a.ga.CSS.Nk,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});Qk.dm(c,V.a.ga.CSS.Nk+"-hovered");C(c,"click",function(){fs(this,b)}.bind(a));c.setAttribute(V.a.ga.Gj,b.b().id);b.Zm("TOP_LEFT",c,1);a.Zq||(a.Zq={});a.Zq[b.b().id]=c;c.title="Close ViewBox."}f.wA=function(a){this.dispatchEvent({type:"W",Q:a.target})};f.Ww=function(a,b){this.loop(function(c){Mb(c.hk(),a)&&b(c)})};
f.xA=function(a){this.dispatchEvent({type:"V",Q:a.target})};f.cS=function(a){this.dispatchEvent({type:"X",Q:a.target})};function bs(a,b){T.Dg(b.b(),150,0);S(a.vl[b.b().id]);S(a.Zq[b.b().id]);b.k()}function gs(a,b){var c=[],d;bs(a,b);A(a.M,function(a){d=[];A(a,function(a){a.ln||(window.console.log(a.b()),d.push(a))}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.M=c;a.Vl(null,!0);as(a)}function fs(a,b){1!=a.OH()&&(b.Px(function(){gs(this,b)}.bind(a))||gs(a,b))}
f.oz=function(a,b){var c=a.b()===b,d=a.b().id===b;return a===b||c||d};f.vJ=function(a,b){for(var c,d,e,g,l=0,m=0,q=this.M.length,l=0;l<q;l++)for(var p=this.M[l].length,m=0;m<p;m++){var t=this.M[l][m];if(this.oz(t,a)){c=l;d=m;break}if(this.oz(t,b)){e=l;g=m;break}}ma(c)&&ma(e)&&(l=this.M[c][d],this.M[c][d]=this.M[e][g],this.M[e][g]=l,l=ti(this.M[c][d].b()),m=ti(this.M[e][g].b()),qi(this.M[e][g].b(),l),qi(this.M[c][d].b(),m),this.Vl())};f.OH=function(){var a=0;this.loop(function(){a++});return a};
f.xP=function(a){for(var b=0,c=0,d=this.M.length,e=0,g=e=0,b=0;b<d;b++)for(c=0,e=this.M[b].length;c<e;c++)if(this.M[b][c]===a)return e=b+1===this.M.length,g=c+1===this.M[b].length,e&&g?this.M[0][0]:e&&!g?this.M[0][c+1]:!e&&g?this.M[b+1][0]:this.M[b+1][c+1]};f.WF=function(){var a;this.loop(function(b){null!=a||null!=b.uj||(a=b)}.bind(this));if(null!=a)return a;var b=this.uG();ia(b)?b.sort(function(a,b){return a.uj<b.uj?-1:a.uj>b.uj?1:0}):b=[b];return b[0]};
f.Tx=function(){this.Pf&&(hl(this.Pf),hl(this.ak),delete this.Pf,delete this.ak)};function hs(a){a.loop(function(a){null!=a.b()&&(this.Pf.Ym(this.vl[a.b().id]),this.ak.Ym(a.b()))}.bind(a))}function as(a){a.Tx();a.Pf=new Yr;a.ak=new Yr;hs(a);var b=a.Pf,c=a.ak;b.pB.push(c);c.bv=!0;b.av=!0;a.Pf.Ta();a.ak.Ta();a.Pf.by=a.cy.bind(a);C(a.Pf,"dragstart",a.pR.bind(a));C(a.Pf,"dragover",a.iA.bind(a));C(a.Pf,"dragend",a.hA.bind(a))}f.cy=function(a){return is(lh(a.getAttribute(V.a.ga.Gj)))};
f.pR=function(){this.Kh={};this.loop(function(a){this.Kh[a.b().id]={absolute:Qk.$t(a.b()),relative:Qk.oy(a.b())};this.vl[a.b().id].style.visibility="hidden"}.bind(this))};function is(a){var b=document.body;a=a.cloneNode(!1);a.className=V.a.ga.CSS.zL;b&&b.appendChild(a);return a}
f.iA=function(a){if(a.dp.element.id!==a.vu.rl.getAttribute(V.a.ga.Gj)){var b=lh(a.vu.rl.getAttribute(V.a.ga.Gj));a=lh(a.dp.element.id);this.vJ(b,a);var c=this.Kh,d=new Nk,e=c[b.id].relative,c=c[a.id].relative;d.add(new Ck(b,[b.offsetLeft,b.offsetTop],[c.left,c.top],300,Rk));d.add(new Ck(a,[a.offsetLeft,a.offsetTop],[e.left,e.top],300,Rk));d.play();d=this.Kh[b.id];this.Kh[b.id]=this.Kh[a.id];this.Kh[a.id]=d}};
f.hA=function(a){var b=a.vu.ub.nn;a=lh(a.vu.rl.getAttribute(V.a.ga.Gj));a=Qk.$t(a);var c=is(b);zh(this.wo.parentNode?this.wo.parentNode:this.wo,c);b=Qk.$t(b);Qk.zb(c,{top:b.top,left:b.left,"z-index":1E4});js(c,a).play();ks(this)};function js(a,b){var c=new Nk;c.add(new Ck(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,Rk));C(c,"end",function(){S(a)});return c}function ks(a){a.loop(function(a){this.vl[a.b().id].style.visibility="visible"}.bind(a))}
f.i=function(){V.a.ga.g.i.call(this);this.loop(function(a){ad(a);S(a.b());a.k()}.bind(this));A(this.M,function(a){Nb(a)});Nb(this.M);delete this.M;U.qy(this.vl);delete this.vl;U.qy(this.Zq);delete this.Zq;w(this.Kh,function(a,b){wb(this.Kh[b]);delete this.Kh[b]}.bind(this));wb(this.Kh);delete this.Kh;null!=this.Pf&&(ad(this.Pf),this.Pf.k());delete this.Pf;null!=this.ak&&(ad(this.ak),this.ak.k());delete this.ak;delete this.wo};h("xiv.ui.ViewBoxHandler.CSS_SUFFIX",V.a.ga.CSS_SUFFIX);
h("xiv.ui.ViewBoxHandler.EventType",{yL:"V",wL:"W",xL:"X",NW:"Y"});h("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR",V.a.ga.Gj);h("xiv.ui.ViewBoxHandler.ID_PREFIX",V.a.ga.ID_PREFIX);h("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",V.a.ga.prototype.Gw);h("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",V.a.ga.prototype.sC);h("xiv.ui.ViewBoxHandler.prototype.rowCount",V.a.ga.prototype.oT);h("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",V.a.ga.prototype.ur);h("xiv.ui.ViewBoxHandler.prototype.loop",V.a.ga.prototype.loop);
h("xiv.ui.ViewBoxHandler.prototype.insertColumn",V.a.ga.prototype.iz);h("xiv.ui.ViewBoxHandler.prototype.removeColumn",V.a.ga.prototype.cT);h("xiv.ui.ViewBoxHandler.prototype.insertRow",V.a.ga.prototype.insertRow);h("xiv.ui.ViewBoxHandler.prototype.removeRow",V.a.ga.prototype.eT);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",V.a.ga.prototype.Ju);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",V.a.ga.prototype.yP);h("xiv.ui.ViewBoxHandler.prototype.getViewBox",V.a.ga.prototype.wP);
h("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",V.a.ga.prototype.uG);h("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",V.a.ga.prototype.tG);h("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",V.a.ga.prototype.aJ);h("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",V.a.ga.prototype.Ww);h("xiv.ui.ViewBoxHandler.prototype.isMatch",V.a.ga.prototype.oz);h("xiv.ui.ViewBoxHandler.prototype.swap",V.a.ga.prototype.vJ);h("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",V.a.ga.prototype.OH);
h("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",V.a.ga.prototype.xP);h("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",V.a.ga.prototype.WF);h("xiv.ui.ViewBoxHandler.prototype.disposeInternal",V.a.ga.prototype.i);V.a.s=function(a){U.s.call(this);this.AI(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png",this.AB.bind(this));this.Lh=a;ls(this);this.cr()};k(V.a.s,U.s);h("xiv.ui.Thumbnail",V.a.s);V.a.s.ID_PREFIX="xiv.ui.Thumbnail";V.a.s.CSS_SUFFIX={};V.a.s.prototype.AB=function(){var a=mh("img",U.s.CSS.lt,this.gh()),a=a[0];a.src=this.xe.src};V.a.s.prototype.cr=function(){V.a.s.g.cr.call(this);R(this.gh(),V.a.s.ko)};
function ls(a){var b="",c=a.Lh.Zf;if(null!=c["Scan ID"])b+=c["Scan ID"];else if(null!=a.Lh.yk)var d=a.Lh.yk.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '3'>"+b+"</font></b><br>");A(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.Bs(e)}V.a.s.prototype.BP=function(){return this.Lh};V.a.s.prototype.i=function(){V.a.s.g.i.call(this);this.Lh.k();delete this.Lh};h("xiv.ui.Thumbnail.ID_PREFIX",V.a.s.ID_PREFIX);
h("xiv.ui.Thumbnail.CSS_SUFFIX",V.a.s.CSS_SUFFIX);h("xiv.ui.Thumbnail.prototype.updateHoverable",V.a.s.prototype.AB);h("xiv.ui.Thumbnail.prototype.createHoverable",V.a.s.prototype.cr);h("xiv.ui.Thumbnail.prototype.getViewable",V.a.s.prototype.BP);h("xiv.ui.Thumbnail.prototype.disposeInternal",V.a.s.prototype.i);V.a.G=function(){U.G.call(this);this.Ch=new Yr;this.Fk=new Yr;this.Ch.by=this.cy.bind(this);C(this.Ch,"dragover",this.iA.bind(this));C(this.Ch,"dragend",this.hA.bind(this));C(this.Ch,"dragout",this.oR.bind(this));C(this.Fk,"drop",this.qR.bind(this));var a=this.Ch,b=this.Fk;a.pB.push(b);b.bv=!0;a.av=!0;this.Fk.Ta();this.Ch.Ta()};k(V.a.G,U.G);h("xiv.ui.ThumbnailGallery",V.a.G);V.a.G.ID_PREFIX="xiv.ui.ThumbnailGallery";V.a.G.CSS_SUFFIX={Sw:"thumbnail-dragging"};V.a.G.fq=300;
V.a.G.lq="THUMBNAIL_DRAGGER_"+r();V.a.G.nK=V.a.G.lq+"_FADER"+r();f=V.a.G.prototype;f.Ch=null;f.Fk=null;f.pl=function(a,b){var c=this.dr(a);this.So(c,b);return c};f.dr=function(a){var b=new V.a.s(a);C(b,"y",function(){this.dispatchEvent({type:"ca",s:b})}.bind(this));return b};f.So=function(a,b){V.a.G.g.So.call(this,a,b);var c=a.gh();c&&this.Ch.Ym(c)};f.tE=function(){hl(this.Fk)};f.ED=function(a){this.Fk.Ym(a)};f.FD=function(a){A(a,function(a){this.ED(a)}.bind(this))};f.pP=function(a){return this.Tc[a.id]};
f.Tx=function(){null!=this.Ch&&(hl(this.Ch),this.Ch.k());null!=this.Fk&&(hl(this.Fk),this.Fk.k())};f.cy=function(a){a=Sh(a,"div",V.a.s.gd).id.replace(U.s.kt,"");if(a in this.Tc)return this.Tc[a].setActive(!0,!0),a=this.Tc[a].b().cloneNode(!0),a.setAttribute("id",V.a.G.lq+a.id),R(a,V.a.G.CSS.Sw),a};f.iA=function(a){this.dispatchEvent({type:"aa",rB:a.dp.element})};f.oR=function(a){this.dispatchEvent({type:"ba",rB:a.dp.element})};
f.hA=function(){var a=oh(V.a.G.CSS.Sw);A(a,function(a){T.un(a,V.a.G.fq,function(){S(a)})});null!=a[0]&&this.Tc[a[0].id.replace(V.a.G.lq,"")].setActive(!1,!0)};f.qR=function(a){var b=ph(V.a.G.CSS.Sw);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);S(b);a.dp.element&&this.dispatchEvent({type:"da",s:this.Tc[b.id.replace(V.a.G.lq,"")],cU:a.dp.element})}};f.i=function(){V.a.G.g.i.call(this);this.Tx()};
h("xiv.ui.ThumbnailGallery.EventType",{pt:"Z",OK:"$",tW:"aa",sW:"ba",qW:"ca",uW:"da"});h("xiv.ui.ThumbnailGallery.ID_PREFIX",V.a.G.ID_PREFIX);h("xiv.ui.ThumbnailGallery.CSS_SUFFIX",V.a.G.CSS_SUFFIX);h("xiv.ui.ThumbnailGallery.ANIM_MED",V.a.G.fq);h("xiv.ui.ThumbnailGallery.DRAGGER_ID",V.a.G.lq);h("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",V.a.G.nK);h("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",V.a.G.prototype.pl);h("xiv.ui.ThumbnailGallery.prototype.createThumbnail",V.a.G.prototype.dr);
h("xiv.ui.ThumbnailGallery.prototype.addThumbnail",V.a.G.prototype.So);h("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",V.a.G.prototype.tE);h("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",V.a.G.prototype.ED);h("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",V.a.G.prototype.FD);h("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",V.a.G.prototype.pP);h("xiv.ui.ThumbnailGallery.prototype.disposeInternal",V.a.G.prototype.i);function ms(){}k(ms,rl);fa(ms);f=ms.prototype;f.oa=function(){return"goog-tab"};f.ii=function(){return"tab"};f.C=function(a){var b=ms.g.C.call(this,a);(a=a.gk())&&this.fm(b,a);return b};f.cc=function(a,b){b=ms.g.cc.call(this,a,b);var c=this.gk(b);c&&a.gw(c);a.fa&8&&(c=a.getParent())&&na(c.GT)&&(a.dd(8,!1),c.GT(a));return b};f.gk=function(a){return a.title||""};f.fm=function(a,b){a&&(a.title=b||"")};function ns(a,b,c){Gl.call(this,a,b||ms.qf(),c);this.de(8,!0);this.Yn|=9}k(ns,Gl);ns.prototype.gk=function(){return this.Ts};ns.prototype.fm=function(a){this.ec().fm(this.b(),a);this.gw(a)};ns.prototype.gw=function(a){this.Ts=a};ol("goog-tab",function(){return new ns(null)});function os(a,b,c,d){fd.call(this);this.dc=c||ih();this.ep=a;this.rh=[];this.bU=b?b:ps;this.MJ=!!d;this.ah()}k(os,fd);var ps=0;f=os.prototype;
f.ah=function(){this.ep.className="goog-tabpane";for(var a=[],b=Dh(this.ep);b;)a.push(b),b=Fh(b);this.Rf=this.dc.C("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.sd=this.dc.C("div","goog-tabpane-cont");this.ep.appendChild(this.sd);b=this.ep;switch(this.bU){case ps:b.insertBefore(this.Rf,this.sd);b.insertBefore(qs(this),this.sd);tj(b,"goog-tabpane-top");break;case 1:b.appendChild(this.Rf);b.appendChild(qs(this));tj(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.Rf,this.sd);tj(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.Rf,this.sd);tj(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.Rf.tabIndex=0;C(this.Rf,this.MJ?"mousedown":"click",this.wv,!1,this);C(this.Rf,"keydown",this.xv,!1,this);for(var c=0;b=a[c];c++)rs(this,new ss(b))};
function qs(a){var b=ih(void 0),c=null,d=b.Sa;lc&&d.createStyleSheet?(c=d.createStyleSheet(),yi(c)):(d=nh(b.Sa,"head",void 0,void 0)[0],d||(c=nh(b.Sa,"body",void 0,void 0)[0],d=b.C("head"),c.parentNode.insertBefore(d,c)),c=b.C("style"),yi(c),b.appendChild(d,c));return a.dc.C("div","goog-tabpane-clear")}f.i=function(){os.g.i.call(this);Zc(this.Rf,this.MJ?"mousedown":"click",this.wv,!1,this);Zc(this.Rf,"keydown",this.xv,!1,this);delete this.ep;this.sd=this.Rf=null};
function rs(a,b){b.ub&&b.ub!=a&&b.ub instanceof os&&ts(b.ub,b);var c=a.rh.length;ca(void 0)&&void 0!=c?(c=void 0,a.rh.splice(c,0,b),a.Rf.insertBefore(b.xl,a.Rf.childNodes[c])):(a.rh.push(b),a.Rf.appendChild(b.xl));b.xs(a,c);a.oj||(a.oj=b,a.dispatchEvent(new us("change",a,a.oj)));a.sd.appendChild(b.sd);vs(b,b==a.oj);for(var d=c+1;c=a.rh[d];d++)c.Hr=d}function ts(a,b){ma(b)&&(b=a.rh[b]);a.rh.splice(b.Hr,1);b.xs(null);S(b.xl);S(b.sd);for(var c,d=0;c=a.rh[d];d++)c.xs(a,d)}
function ws(a,b){if(0<=b&&b<a.rh.length){var c=a.rh[b];!c.isEnabled()||a.oj&&c==a.oj||(vs(a.oj,!1),vs(c,!0),a.oj=c,a.dispatchEvent(new us("change",a,a.oj)))}}f.Qb=function(){return this.sd||null};f.b=function(){return this.ep||null};f.wv=function(a){for(var b=a.target;b!=this.Rf;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);ws(this,c);break}b=b.parentNode}a.preventDefault()};
f.xv=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.oj.Hr-1;ws(this,0>a?this.rh.length-1:a);break;case 39:a=this.oj.Hr+1;ws(this,a>=this.rh.length?0:a);break;case 36:ws(this,0);break;case 35:ws(this,this.rh.length-1)}};function ss(a,b,c){var d,e;if(ka(a)&&!ca(b))d=a;else if(b)d=b,e=a;else if(a){if(b=Dh(a))d=Ph(b),b.parentNode.removeChild(b);e=a}this.dc=c||ih();this.sd=e||this.dc.C("div");this.xl=this.dc.C("li",null,d);this.Hr=this.ub=null;this.Yd=!0}f=ss.prototype;
f.Fg=function(){return Ph(this.xl)};f.yh=function(a){Jh(this.xl,a)};f.pG=function(){return this.xl};f.Qb=function(){return this.sd};f.getParent=function(){return this.ub};f.xd=function(a){this.Yd=a;this.xl.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Yd};function vs(a,b){a.isEnabled()&&(a.sd.style.display=b?"":"none",a.xl.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.xs=function(a,b){this.ub=a;this.Hr=ca(b)?b:null};
function us(a,b,c){Ic.call(this,a,b);this.page=c}k(us,Ic);U.N=function(a){U.S.call(this);if(null!=a){var b=a;if(!ka(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==U.N.Jw.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||U.N.VB};k(U.N,U.S);h("nrg.ui.Tabs",U.N);U.N.Jw=["TOP","BOTTOM","LEFT","RIGHT"];U.N.VB=U.N.Jw[0];U.N.ID_PREFIX="nrg.ui.Tabs";U.N.CSS_SUFFIX={md:"tab",Sk:"tab-active",Jh:"page",VK:"page-content",st:"page-active",Yb:"icon",oo:"icon-active",tK:"icon-content",YV:"scrollgallery"};
function xs(a,b,c,d,e){this.qm=!1;this.Ra=a;this.md=b;this.Yb=c;this.Jh=d;this.Fj=e}f=U.N.prototype;f.lh=0;f.Mp=0;f.bg=null;f.p=function(a){U.N.g.p.call(this,a);this.zn=new os(this.b());this.ca=[];R(this.b(),U.N.gd)};f.kP=function(){return this.ca.length};f.yO=function(){return this.lh};f.YO=function(){return this.Mp};f.Hu=function(){var a=[];A(this.ca,function(b){a.push(b.md)});return a};f.Iu=function(){var a=[];A(this.ca,function(b){a.push(b.Jh)});return a};
f.lP=function(){var a=[];A(this.ca,function(b){a.push(b.Yb)});return a};f.fM=function(a){A(a,function(a){this.Ro(a)}.bind(this))};f.reset=function(){for(var a=this.ca.length;0<a;)ts(this.zn,a-1),a--;this.cY()};f.nB=function(a){if(null==this.ca)return!1;for(var b=0,c=this.ca.length;b<c;b++)if(this.ca[b].Ra==a)return!0;return!1};
f.Ro=function(a){this.ca=null!=this.ca?this.ca:[];if(this.nB(a))throw Error(a+" is an already existing tab!");var b;b=vh("div",{id:"Tab_"+r(),"class":U.N.CSS.md,title:a});zh(this.b(),b);var c=vh("div",{id:"TabIcon_"+r(),"class":U.N.CSS.Yb}),d=vh("div",{"class":U.N.CSS.tK},a);zh(c,d);zh(b,c);d=vh("div",{id:"TabPage_"+r(),"class":U.N.CSS.Jh,label:a});Qk.zb(d,Qk.oy(this.b(),"width"));zh(this.b().parentNode,d);var e=new ss(d,a);rs(this.zn,e);this.ca.push(new xs(a,b,c,d,e));ys(this);zs(this);As(this);
this.kn();this.setActive(0);this.o()};f.YI=function(a,b){this.nB(a)||this.Ro(a);var c;a:if(null!=this.ca){c=0;for(var d=this.ca.length;c<d;c++)if(this.ca[c].Ra==a){c=this.ca[c];break a}c=void 0}else c=!1;b instanceof U.wb?(d=b,c.Jh.appendChild(b.b())):(d=new U.wb,d.p(c.Jh),d.Yg(b));R(d.b(),U.N.CSS.VK);this.o()};function ys(a){A(a.ca,function(a){ad(a.md)}.bind(a))}function zs(a){A(a.ca,function(a,c){C(a.md,"click",function(){this.kn();this.setActive(c)}.bind(this))}.bind(a))}
function As(a){A(a.ca,function(a,c){Bs(this,c);Cs(this,c)}.bind(a))}function Bs(a,b){C(a.ca[b].md,"mouseover",function(){!0!==this.ca[b].qm&&(R(this.ca[b].md,U.N.CSS.Sk),R(this.ca[b].md,dk.Wb(U.N.CSS.Sk,this.orientation)),R(this.ca[b].Yb,U.N.CSS.oo))}.bind(a))}function Cs(a,b){C(a.ca[b].md,"mouseout",function(){!0!==this.ca[b].qm&&(Vg(this.ca[b].md,U.N.CSS.Sk),Vg(this.ca[b].md,dk.Wb(U.N.CSS.Sk,this.orientation)),Vg(this.ca[b].Yb,U.N.CSS.oo))}.bind(a))}
f.setActive=function(a){this.ca[a].qm=!0;this.Mp=this.lh;this.lh=a;ws(this.zn,a);R(this.ca[a].md,U.N.CSS.Sk);R(this.ca[a].md,dk.Wb(U.N.CSS.Sk,this.orientation));R(this.ca[a].Jh,U.N.CSS.st);R(this.ca[a].Jh,dk.Wb(U.N.CSS.st,this.orientation));R(this.ca[a].Yb,U.N.CSS.oo);R(this.ca[a].Yb,dk.Wb(U.N.CSS.oo,this.orientation))};
f.VE=function(a){this.ca[a].qm=!1;ws(this.zn,1);Vg(this.ca[a].md,U.N.CSS.Sk);Vg(this.ca[a].md,dk.Wb(U.N.CSS.Sk,this.orientation));Vg(this.ca[a].Jh,U.N.CSS.st);Vg(this.ca[a].Jh,dk.Wb(U.N.CSS.st,this.orientation));Vg(this.ca[a].Yb,U.N.CSS.oo);Vg(this.ca[a].Yb,dk.Wb(U.N.CSS.oo,this.orientation))};f.kn=function(){A(this.ca,function(a,b){this.VE(b)}.bind(this))};
f.o=function(){window.console.log("\n\n\n\n**********UPDATE STULE",this.orientation);if(this.b().parentNode){R(this.b(),U.N.gd);R(this.b(),dk.Wb(U.N.gd,this.orientation));window.console.log(U.N.gd);A(this.ca,function(a){R(a.md,dk.Wb(U.N.CSS.md,this.orientation));R(a.Yb,dk.Wb(U.N.CSS.Yb,this.orientation));R(a.Jh,dk.Wb(U.N.CSS.Jh,this.orientation))}.bind(this));switch(this.orientation){case "TOP":Ds(this);break;case "BOTTOM":this.cZ();break;case "RIGHT":Es(this)}if(0<this.ca.length){var a=ti(this.ca[0].md);
0<a.width&&0<a.height&&(this.bg=a)}}};function Es(a){A(a.ca,function(a){this.b().parentNode&&Qk.zb(a.md,{height:(100/this.ca.length).toString()+"%"})}.bind(a))}function Ds(a){var b;A(a.ca,function(a,d){this.b().parentNode&&(b=100/this.ca.length,Qk.zb(a.md,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function Fs(a){A(a.ca,function(a){w(a,function(c,d){ad(c);c.i?c.k():c.k&&c.k();delete c;delete a[d]});wb(a);delete a});Nb(a.ca)}
f.i=function(){U.N.g.i.call(this);A(this.Hu(),function(a){ad(a)}.bind(this));Fs(this);delete this.ca;ad(this.zn);this.zn.k();delete this.zn;delete this.lh;delete this.Mp;delete this.$Y;delete this.orientation};h("nrg.ui.Tabs.ORIENTATIONS",U.N.Jw);h("nrg.ui.Tabs.DEFAULT_ORIENTATION",U.N.VB);h("nrg.ui.Tabs.ID_PREFIX",U.N.ID_PREFIX);h("nrg.ui.Tabs.CSS_SUFFIX",U.N.CSS_SUFFIX);h("nrg.ui.Tabs.TabItemCollection",xs);h("nrg.ui.Tabs.prototype.tabSize",U.N.prototype.bg);h("nrg.ui.Tabs.prototype.render",U.N.prototype.p);
h("nrg.ui.Tabs.prototype.getTabCount",U.N.prototype.kP);h("nrg.ui.Tabs.prototype.getLastActiveTab",U.N.prototype.yO);h("nrg.ui.Tabs.prototype.getPreviousActiveTab",U.N.prototype.YO);h("nrg.ui.Tabs.prototype.getTabElements",U.N.prototype.Hu);h("nrg.ui.Tabs.prototype.getTabPages",U.N.prototype.Iu);h("nrg.ui.Tabs.prototype.getTabIcons",U.N.prototype.lP);h("nrg.ui.Tabs.prototype.addTabs",U.N.prototype.fM);h("nrg.ui.Tabs.prototype.reset",U.N.prototype.reset);h("nrg.ui.Tabs.prototype.tabExists",U.N.prototype.nB);
h("nrg.ui.Tabs.prototype.addTab",U.N.prototype.Ro);h("nrg.ui.Tabs.prototype.setTabPageContents",U.N.prototype.YI);h("nrg.ui.Tabs.prototype.setActive",U.N.prototype.setActive);h("nrg.ui.Tabs.prototype.deactivate",U.N.prototype.VE);h("nrg.ui.Tabs.prototype.deactivateAll",U.N.prototype.kn);h("nrg.ui.Tabs.prototype.updateStyle",U.N.prototype.o);h("nrg.ui.Tabs.prototype.disposeInternal",U.N.prototype.i);U.Mb=function(a){U.N.call(this,a)};k(U.Mb,U.N);h("nrg.ui.ZipTabs",U.Mb);U.Mb.OB=4;U.Mb.hq=4;U.Mb.ID_PREFIX="nrg.ui.ZipTabs";f=U.Mb.prototype;f.p=function(a){U.Mb.g.p.call(this,a);R(this.b(),dk.Wb(U.Mb.gd,this.orientation));this.Pd=new U.qa(this.b(),this.orientation);Gs(this)};f.zk=function(a){this.Pd.zk(a);this.o()};f.ja=function(){return this.Pd};
function Gs(a){C(a.Pd,"resize",function(a){this.Tj();if(null!=this.bg){switch(this.orientation){case "BOTTOM":case "TOP":Math.abs(this.bg.height-this.F.height)<=U.Mb.OB?this.kn():this.setActive(this.lh);break;case "LEFT":case "RIGHT":Math.abs(this.bg.width-this.F.width)<=U.Mb.hq?this.kn():this.setActive(this.lh)}this.dispatchEvent({type:"resize",size:a.size,Mg:a.Mg})}}.bind(a))}
f.bd=function(a,b,c){this.o();a?(this.setActive(b||0),this.Pd.zh(this.orientation,"MAX",null,c)):(this.kn(),this.Pd.zh(this.orientation,"MIN",null,c))};f.o=function(){U.Mb.g.o.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.bg&&this.Pd.MI(this.bg.height);break;case "LEFT":case "RIGHT":null!=this.bg&&this.Pd.OI(this.bg.width)}this.Pd.update()};
f.Ro=function(a){U.Mb.g.Ro.call(this,a);1==this.Hu().length&&this.o();A(this.Hu(),function(a){C(a,"click",function(){if(null!=this.bg)switch(this.o(),this.Tj(),this.orientation){case "BOTTOM":Math.abs(this.F.height-this.bg.height)<=U.Mb.hq?(this.setActive(this.lh),this.Pd.zh("BOTTOM","MAX",void 0)):this.lh==this.Mp&&this.Pd.zh("BOTTOM","MIN",void 0);break;case "TOP":Math.abs(this.F.height-this.bg.height)<=U.Mb.hq?(this.setActive(this.lh),this.Pd.zh("TOP","MAX",void 0)):this.lh==this.Mp&&this.Pd.zh("TOP",
"MIN",void 0);break;case "RIGHT":null!=this.bg&&(Math.abs(this.F.width-this.bg.width)<=U.Mb.hq?(this.setActive(this.lh),this.Pd.zh("RIGHT","MAX",void 0)):this.lh==this.Mp&&this.Pd.zh("RIGHT","MIN",void 0))}}.bind(this))}.bind(this));this.kn();this.o()};f.i=function(){U.Mb.g.i.call(this);ad(this.Pd);this.Pd.k();delete this.Pd};h("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",U.Mb.OB);h("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",U.Mb.hq);h("nrg.ui.ZipTabs.EventType",{MU:"ea"});h("nrg.ui.ZipTabs.ID_PREFIX",U.Mb.ID_PREFIX);
h("nrg.ui.ZipTabs.prototype.render",U.Mb.prototype.p);h("nrg.ui.ZipTabs.prototype.setBoundaryElement",U.Mb.prototype.zk);h("nrg.ui.ZipTabs.prototype.getResizable",U.Mb.prototype.ja);h("nrg.ui.ZipTabs.prototype.setExpanded",U.Mb.prototype.bd);h("nrg.ui.ZipTabs.prototype.updateStyle",U.Mb.prototype.o);h("nrg.ui.ZipTabs.prototype.addTab",U.Mb.prototype.Ro);h("nrg.ui.ZipTabs.prototype.disposeInternal",U.Mb.prototype.i);/*
 Copyright 2014 Washington Universityf
 @author sunilk@mokacreativellc.com (Sunil Kumar)
*/
V.a.la=function(){U.S.call(this);this.Xd=V.a.la.ModalStates.mo;window.console.log("currState",this.Xd)};k(V.a.la,U.S);h("xiv.ui.Modal",V.a.la);V.a.la.ModalStates={kg:"fullscreen",Wg:"popup",Bw:"fullscreen-popup",Ki:"windowed",mo:"demo",lK:"demp-fullscreen"};V.a.la.ID_PREFIX="xiv.ui.Modal";V.a.la.CSS_SUFFIX={gt:"background",OU:"columnmenu",OV:"rowmenu",PU:"button",PV:"button",XK:"projecttab",YK:"projecttab-bounds",ZK:"projecttab-dragger",$K:"projecttab-dragger-handle",MB:"addsubjects"};
var Hs={jo:"Close XNAT Image Viewer.",kg:"Enter full-screen mode.",Wg:"Popup to new window.",Ki:"Exit full-screen mode."};V.a.la.RM=function(){var a={};w(Hs,function(b,c){a[c]=V.a.la.ID_PREFIX+"."+eb(c)+"Button"});var b=Vk.CE(qb(a)),c={};w(a,function(a,e){c[e]=b[a];var g=dk.Wb(V.a.la.ko,e.toLowerCase()+"-button");b[a].className=g});return c};f=V.a.la.prototype;f.Er=29;f.qw=29;f.qv=320;f.rv=320;f.zP=function(){return this.ob};f.qP=function(){return this.sa};f.$O=function(){return this.jd};f.WO=function(){return this.ra.Wg};
f.aO=function(){return this.ra.jo};f.rO=function(){return this.ra.kg};f.p=function(a){V.a.la.g.p.call(this,a);this.WG();this.ob.iz(null,!1);this.dd(this.Xd)};
f.dd=function(a){null!=this.Xd&&(this.Kv=this.Xd);this.Xd=a;null!=this.Kv&&Vg(this.b(),dk.Wb(this.constructor.gd,this.Kv));R(this.b(),dk.Wb(this.constructor.gd,this.Xd));this.Xd==V.a.la.ModalStates.mo?(this.ra.kg.style.visibility="visible",this.ra.Ki.style.visibility="hidden"):this.Xd==V.a.la.ModalStates.Ki?(this.ra.kg.style.visibility="visible",this.ra.Ki.style.visibility="hidden"):this.Xd==V.a.la.ModalStates.Wg?(this.ra.Wg.style.visibility="hidden",this.ra.jo.style.visibility="hidden",this.ra.kg.style.visibility=
"visible",this.ra.Ki.style.visibility="hidden"):this.Xd==V.a.la.ModalStates.Bw?(this.ra.Wg.style.visibility="hidden",this.ra.kg.style.visibility="hidden",this.ra.Ki.style.visibility="visible"):this.Xd==V.a.la.ModalStates.kg&&(this.ra.Wg.style.visibility="visible",this.ra.kg.style.visibility="hidden",this.ra.Ki.style.visibility="visible");this.o()};f.np=function(){return this.Xd};f.Ml=function(){this.sa.loop(function(a){a.setActive(!1);this.ob.loop(function(b){-1<b.hk().indexOf(a.Lh)&&a.setActive(!0)})}.bind(this))};
f.ZD=function(){Is(this);this.mf=null!=this.mf?this.mf:[];this.ne=null!=this.ne?this.ne:new Nk;Js(this);Ks(this);C(this.ne,"end",this.CR.bind(this));A(this.mf,function(a){this.ne.add(a)}.bind(this));this.ne.play();this.Ml()};f.CR=function(){A(this.mf,function(a){this.ne.remove(a);ad(a);a.bh();a.k()}.bind(this));Nb(this.mf);this.o();Ls(this)};function Ls(a){a.ob.loop(function(a){0==a.b().style.opacity&&T.nr(a.b(),300)})}
function Js(a){var b=null;a.ob.loop(function(a,d,e){b=a.b();this.mf.push(new Ck(b,[b.offsetLeft,b.offsetTop],[this.ab.Rc.Li[d][e],this.ab.Rc.tg[d][e]],300,Rk))}.bind(a))}function Ks(a){var b=null;a.ob.loop(function(a,d,e){b=a.b();this.mf.push(new Dk(b,[b.offsetWidth,b.offsetHeight],[this.ab.Rc.Mm[d][e],this.ab.Rc.mq[d][e]],300,Rk))}.bind(a))}
function Is(a){a.ab=null!=a.ab?a.ab:{};a.Tj();a.ab.Ps={};a.ab.Ps.Mm=Math.round(ti(a.jd.b()).width);a.ab.Ps.mq=Math.round(a.F.height-2*a.qw);a.ab.Ps.tg=Math.round(a.qw);Ms(a);Ns(a)}function Ms(a){a.ab.Rc={};a.ab.Rc.Mm=a.ob.ur();a.ab.Rc.mq=a.ob.ur();a.ob.loop(function(a,c,d,e,g){this.ab.Rc.Mm[c][d]=Math.round((this.F.width-this.ab.Ps.Mm-this.Er)/g-this.Er);this.ab.Rc.mq[c][d]=Math.round((this.F.height-(e+1)*this.Er)/e)}.bind(a))}
function Ns(a){a.ab.Rc.Li=a.ob.ur();a.ab.Rc.tg=a.ob.ur();a.ab.Rc.nL=a.ab.Ps.Mm+a.qw;var b=0;a.ob.loop(function(a,d,e){b=this.ab.Rc.nL+e*(this.ab.Rc.Mm[d][e]+this.qw);this.ab.Rc.Li[d][e]=b;this.ab.Rc.tg[d][e]=d*(this.ab.Rc.mq[d][e]+this.Er);window.console.log();this.ab.Rc.tg[d][e]+=this.Er}.bind(a))}f.o=function(){Is(this);this.jd&&this.jd.o();Os(this);this.Ml();this.sa.o();this.sa.Pe()};
function Os(a){a.ob&&a.ob.loop(function(a,c,d){Qk.zb(a.b(),{height:this.ab.Rc.mq[c][d],width:this.ab.Rc.Mm[c][d],left:this.ab.Rc.Li[c][d],top:this.ab.Rc.tg[c][d]});a.o()}.bind(a))}
f.WG=function(){var a=vh("div");a.id=this.constructor.ID_PREFIX+"_Background_"+r();a.className=V.a.la.CSS.gt;this.b().appendChild(a);this.Lw=vh("div");zh(this.b(),this.Lw);R(this.Lw,V.a.la.CSS.YK);this.jd=new U.Mb("RIGHT");this.jd.p(this.b());R(this.jd.b(),V.a.la.CSS.XK);this.sa=new V.a.G;this.sa.eB(!0);this.sa.TA(this.b());var b;b=b||C;b(this.sa,"w",this.eS.bind(this));b(this.sa,"x",this.dS.bind(this));b(this.sa,"ca",this.XR.bind(this));b(this.sa,"aa",this.$R.bind(this));b(this.sa,"ba",this.ZR.bind(this));
b(this.sa,"da",this.bS.bind(this));this.sa.p(this.jd.b());this.jd.YI("Project Browser",this.sa);this.jd.zk(this.Lw);a=this.jd.ja().Ne("RIGHT");R(a,V.a.la.CSS.ZK);this.jd.ja().mp("RIGHT").RI(5);zh(a,vh("div",{id:V.a.Q.ID_PREFIX+"_DraggerHandle_"+r(),"class":V.a.la.CSS.$K}));C(this.jd,"resize",this.o.bind(this));C(this.jd,"resize_end",this.o.bind(this));this.Rj=vh("div",{id:V.a.la.ID_PREFIX+"_addSubjects_"+r(),"class":V.a.la.CSS.MB},"+ Load all subjects in project");this.jd.Iu()[0].appendChild(this.Rj);
Qk.dm(this.Rj,V.a.la.CSS.MB+"-hovered");a=this.jd.Iu()[0];b=Ch(a)[0];ti(a);ti(b);ti(this.Rj);b.style.height="calc(100% - 70px)";C(this.Rj,"click",this.hR.bind(this));this.ob=new V.a.ga;this.ob.aJ(this.b());var c;c=c||C;c(this.ob,"V",this.xA.bind(this));c(this.ob,"W",this.wA.bind(this));c(this.ob,"Y",this.Vl.bind(this));C(this.ob,"X",this.rS.bind(this));Ps(this)};
function Ps(a){a.ra=V.a.la.RM();w(a.ra,function(a){zh(this.b(),a)}.bind(a));Qs(a);a.ra.jo.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.ra.kg.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.ra.Ki.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.ra.Wg.innerHTML="<img src="+a.Pl+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.hR=function(){this.dispatchEvent({type:Rs});T.un(this.Rj,150,function(){Ss(this);var a=this.jd.Iu()[0];Ch(a)[0].setAttribute("style","");this.sa.Pe()}.bind(this))};function Ss(a){null!=a.Rj&&(S(a.Rj),ad(a.Rj),delete a.Rj)}f.rS=function(){var a=oh("xiv-ui-thumbnailgallery-thumbnail-dragging");A(a,function(a){S(a)});this.Ml();this.sa.Ch.zl({dY:!0})};f.mR=function(){this.Xd===V.a.la.ModalStates.kg&&Ba.zF.yN()};
f.tR=function(){Ba.zF.QY(this.b().parentNode);this.Xd===V.a.la.ModalStates.Wg?this.dd(V.a.la.ModalStates.Bw):this.dd(V.a.la.ModalStates.kg)};f.vS=function(){Ba.zF.yN();this.dd(this.Kv)};function Qs(a){var b;b=b||C;b(a.ra.kg,"click",a.tR.bind(a));b(a.ra.Ki,"click",a.vS.bind(a));b(a.ra.jo,"click",a.mR.bind(a))}f.eS=function(a){this.ob.Ww(a.s.Lh,function(a){a.vp()})};f.dS=function(a){this.ob.Ww(a.s.Lh,function(a){a.Ws()})};f.ZR=function(a){this.ob.Ju(a.rB).Ws()};f.$R=function(a){this.ob.Ju(a.rB).vp()};
f.XR=function(a){this.ob.WF().load(a.s.Lh);this.Ml()};f.bS=function(a){this.ob.Ju(a.cU).load(a.s.Lh);this.Ml()};f.xA=function(){this.Ml()};f.wA=function(){this.Ml()};f.Vl=function(a){null!=a&&null!=a.jM?(a.LH&&A(a.LH,function(a){Qk.zb(a.b(),{opacity:0})}),this.ZD()):this.o();this.sa.tE();this.sa.FD(this.ob.tG())};
f.i=function(){V.a.la.g.i.call(this);wb(this.ab);delete this.ab;U.gF(this.mf);delete this.mf;U.py(this.ne);delete this.ne;U.qy(this.ra);delete this.ra;null!=this.ob&&(ad(this.ob),this.ob.k(),delete this.ob);ad(this.jd);this.jd.k();delete this.jd;ad(this.sa);this.sa.k();delete this.sa;Ss(this);delete this.Xd;delete this.Kv};h("xiv.ui.Modal.EventType",V.a.la.ZU);h("xiv.ui.Modal.ID_PREFIX",V.a.la.ID_PREFIX);h("xiv.ui.Modal.CSS_SUFFIX",V.a.la.CSS_SUFFIX);h("xiv.ui.Modal.ButtonTypes",Hs);
h("xiv.ui.Modal.prototype.getViewBoxHandler",V.a.la.prototype.zP);h("xiv.ui.Modal.prototype.getThumbnailGallery",V.a.la.prototype.qP);h("xiv.ui.Modal.prototype.getProjectTab",V.a.la.prototype.$O);h("xiv.ui.Modal.prototype.getPopupButton",V.a.la.prototype.WO);h("xiv.ui.Modal.prototype.getCloseButton",V.a.la.prototype.aO);h("xiv.ui.Modal.prototype.getFullScreenButton",V.a.la.prototype.rO);h("xiv.ui.Modal.prototype.render",V.a.la.prototype.p);h("xiv.ui.Modal.prototype.setState",V.a.la.prototype.dd);
h("xiv.ui.Modal.prototype.getState",V.a.la.prototype.np);h("xiv.ui.Modal.prototype.highlightInUseThumbnails",V.a.la.prototype.Ml);h("xiv.ui.Modal.prototype.animateModal",V.a.la.prototype.ZD);h("xiv.ui.Modal.prototype.updateStyle",V.a.la.prototype.o);h("xiv.ui.Modal.prototype.initSubComponents",V.a.la.prototype.WG);h("xiv.ui.Modal.prototype.disposeInternal",V.a.la.prototype.i);window["xiv.ui.Modal"]=V.a.la;window["xiv.ui.Modal.ModalStates"]=V.a.la.ModalStates;P.d.ia=function(a,b,c){P.d.Vc.call(this);this.Yv(a);null!=c&&null!=b&&(this.lr=c,this.yk=P.ma.Xy(this.lr,b.URI,"experiments"),this.ma=new P.ma(this.yk));this.Or=b;this.Zf={}};k(P.d.ia,P.d.Vc);h("gxnat.vis.AjaxViewableTree",P.d.ia);P.d.ia.MC={ID:"Scan ID",Name:"Name",type:"Scan Type"};P.d.ia.EC={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"};P.d.ia.YB={label:"Session"};P.d.ia.bC="Size";
P.d.ia.rH=function(a,b,c){P.nk(a,function(a){ia(a);A(a,function(a){b(a)});c&&c()})};f=P.d.ia.prototype;f.dk=null;f.Dl=!1;f.CI=function(a,b){null==this.dk&&(this.dk={});this.dk[a]=b};f.rG=function(){var a=0;w(this.dk,function(b,c){a+=this.TF(c)}.bind(this));return a};f.TF=function(a){return parseInt(this.dk[a][P.d.ia.bC],10)};f.mO=function(){return this.dk};f.oO=function(){return this.Dl};f.DI=function(a){this.Dl=a};f.jO=function(){return this.lr};f.aP=function(){return this.yk};f.fP=function(){return this.Zf};
f.WI=function(a){this.Zf=a};f.Qp=function(){w(P.d.ia.MC,function(a,b){null!=this.Or[b]&&(this.Zf[a]=this.Or[b])}.bind(this))};f.ys=function(a){P.d.ia.g.ys.call(this,a)};f.As=function(a){P.d.ia.g.As.call(this,a);w(P.d.ia.EC,function(a,c){null!=this.Vp[c]&&(this.Zf[a]=this.Vp[c])}.bind(this))};f.us=function(a){P.d.ia.g.us.call(this,a);w(P.d.ia.YB,function(a,c){null!=this.gp[c]&&(this.Zf[a]=this.gp[c])}.bind(this))};f.pO=function(){return this.qr};
f.nv=function(a){a=a[this.pr];if(!Ga(a,"/"))return this.yk+"!"+a};f.Fl=function(a){if(this.Dl)a();else{var b=0,c=0,d="",e;P.nk(this.yk+this.Au,function(g){for(c=g.length;b<c;b++)if(e=g[b],d=this.nv(e))this.CI(d,e),this.hl(d,this.ip);a();this.Dl=!0}.bind(this))}};f.ip=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.xn=function(){};P.d.ia.hk=function(a,b,c,d){var e=new P.ma(a);P.d.ia.rH(a+"/"+b.prototype.qr,function(a){new b(a,e.xk("experiments"),c)},d)};
P.d.ia.prototype.k=function(){P.d.ia.g.k.call(this);null!=this.dk&&(wb(this.dk),delete this.dk);delete this.Dl;wb(this.Zf);delete this.Zf;null!=this.Or&&(wb(this.Or),delete this.Or);null!=this.ma&&(this.ma.k(),delete this.ma);delete this.lr;delete this.yk};h("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",P.d.ia.MC);h("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",P.d.ia.EC);h("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",P.d.ia.YB);h("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY",P.d.ia.bC);
h("gxnat.vis.AjaxViewableTree.loopFolderContents",P.d.ia.rH);h("gxnat.vis.AjaxViewableTree.getViewableTrees",P.d.ia.hk);h("gxnat.vis.AjaxViewableTree.prototype.filesGotten",P.d.ia.prototype.Dl);h("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",P.d.ia.prototype.CI);h("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",P.d.ia.prototype.rG);h("gxnat.vis.AjaxViewableTree.prototype.getFileSize",P.d.ia.prototype.TF);h("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",P.d.ia.prototype.mO);
h("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",P.d.ia.prototype.oO);h("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",P.d.ia.prototype.DI);h("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",P.d.ia.prototype.jO);h("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",P.d.ia.prototype.aP);h("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",P.d.ia.prototype.fP);h("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",P.d.ia.prototype.WI);
h("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",P.d.ia.prototype.Qp);h("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",P.d.ia.prototype.ys);h("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",P.d.ia.prototype.As);h("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",P.d.ia.prototype.us);h("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",P.d.ia.prototype.pO);h("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",P.d.ia.prototype.nv);
h("gxnat.vis.AjaxViewableTree.prototype.getFileList",P.d.ia.prototype.Fl);h("gxnat.vis.AjaxViewableTree.prototype.fileFilter",P.d.ia.prototype.ip);h("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",P.d.ia.prototype.xn);h("gxnat.vis.AjaxViewableTree.prototype.dispose",P.d.ia.prototype.k);P.d.lc=function(a,b,c){P.d.ia.call(this,"Scans",a,b);this.Zf["Total Frames"]=0;c&&c(this)};k(P.d.lc,P.d.ia);h("gxnat.vis.Scan",P.d.lc);P.d.lc.tx="dcm dicom ima nii nii.gz nrrd mgh mgz".split(" ");P.d.lc.iG=function(a){switch(a){case "Sag":return"Sagittal";case "Cor":return"Coronal";case "Tra":return"Transverse"}};f=P.d.lc.prototype;f.qr="scans";f.Au="/files";f.pr="URI";
f.Qp=function(){P.d.lc.g.Qp.call(this);null!=this.Un["parameters/orientation"]&&(this.Zf.Orientation=this.constructor.iG(this.Un["parameters/orientation"]),this.orientation=this.Zf.Orientation);null!=this.Un["parameters/acqType"]&&(this.Zf["Acq. Type"]=this.Un["parameters/acqType"])};f.Fl=function(a){this.Dl?a():P.nk(this.ma.originalUrl,function(b){this.Un=b.items[0].data_fields;this.Qp();P.d.lc.g.Fl.call(this,function(){this.xn();a()}.bind(this))}.bind(this))};
f.ip=function(a){a=P.d.lc.g.ip.call(this,a);if(null!=a){for(var b=0,c=P.d.lc.tx.length;b<c;b++)if(Ha(a,"."+P.d.lc.tx[b]))return a;window.console.log("Found skippable scan file: ",a);return null}};f.hl=function(a){this.Yv("Scans");if(0==this.De.length){var b=new P.d.rg;b.yh("scan");b.Yv("scans");this.De.push(b)}0==this.De[0].$i().length&&this.De[0].JD(new P.d.Ff);this.De[0].$i()[0].hl(a,this.ip);this.Zf["Total Frames"]=this.De[0].$i()[0].Zi().length};
f.nv=function(a){return P.ma.Xy(this.lr,a[this.pr],"experiments")};f.xn=function(a){if(this.De&&this.De[0]){var b=this.De[0].$i()[0].Zi().sort(P.uv);this.Cs(b[Math.floor(b.length/2)]+P.JPEG_CONVERT_SUFFIX);null!=a&&a(this)}};f.k=function(){P.d.lc.g.k.call(this);null!=this.Un&&wb(this.Un);delete this.Un};h("gxnat.vis.Scan.acceptableFileTypes",P.d.lc.tx);h("gxnat.vis.Scan.getOrientationFromAbbreviation",P.d.lc.iG);h("gxnat.vis.Scan.prototype.folderQuerySuffix",P.d.lc.prototype.qr);
h("gxnat.vis.Scan.prototype.fileQuerySuffix",P.d.lc.prototype.Au);h("gxnat.vis.Scan.prototype.fileContentsKey",P.d.lc.prototype.pr);h("gxnat.vis.Scan.prototype.setViewableMetadata",P.d.lc.prototype.Qp);h("gxnat.vis.Scan.prototype.getFileList",P.d.lc.prototype.Fl);h("gxnat.vis.Scan.prototype.fileFilter",P.d.lc.prototype.ip);h("gxnat.vis.Scan.prototype.addFiles",P.d.lc.prototype.hl);h("gxnat.vis.Scan.prototype.makeFileUrl",P.d.lc.prototype.nv);h("gxnat.vis.Scan.prototype.getThumbnailImage",P.d.lc.prototype.xn);
h("gxnat.vis.Scan.prototype.dispose",P.d.lc.prototype.k);P.u.Hw=function(a,b,c,d){P.u.Node.call(this);this.url=a;this.document=b;this.files=d};k(P.u.Hw,P.u.Node);h("gxnat.slicerNode.Mrml",P.u.Hw);P.u.Aw=function(a,b){P.u.Node.call(this);this.file=a;this.Yf=b};k(P.u.Aw,P.u.Node);h("gxnat.slicerNode.Displayable",P.u.Aw);function Ts(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};P.u.yw=function(a,b,c){P.u.Node.call(this);this.position=a;this.ow=b;this.focus=c};k(P.u.yw,P.u.Node);h("gxnat.slicerNode.Camera",P.u.yw);P.u.Hb=function(){P.u.Node.call(this)};k(P.u.Hb,P.u.Node);h("gxnat.slicerNode.Layout",P.u.Hb);P.R={};h("gxnat.slicerUtils",P.R);P.R.cC="/scripts/viewer/xiv/vis/GenericColorTable.txt";P.R.pF=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Ha(a[c],".mrml")&&b.push(a[c]);return b};P.R.Ry=function(a,b){P.get(a,function(a){b(new Ts(a))},"text")};P.R.gG=function(a,b,c){a=ia(a)?a:[a];var d=P.R.pF(a),e=[],g=0;A(d,function(b){P.R.Ry(b,function(m){g++;e.push(new P.u.Hw(b,m,0,a));g==d.length&&c(e)})})};
P.R.LE=function(a,b,c){P.R.IF(a,b,function(b){c(new P.u.vt(a,P.R.MF(a),P.R.JF(a),P.R.bG(a),b,P.R.vG(a),P.R.fG(a),null))})};P.R.kG=function(a,b){var c=[],d=[],e=0;A(a,function(a){c=P.R.lG(a.document);A(c,function(l){P.R.LE(l,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};P.R.SF=function(a,b){a=ka(a)?P.R.Ry(a):a;var c=[];A(a.getElementsByTagName(b),function(a){c.push(a)});return c};P.R.lG=function(a){return P.R.SF(a,"SceneView")};
P.R.MF=function(a){return new P.u.yw(P.u.Gk(a.getElementsByTagName("Camera")[0].getAttribute("position")),P.u.Gk(a.getElementsByTagName("Camera")[0].getAttribute("viewUp")),P.u.Gk(a.getElementsByTagName("Camera")[0].getAttribute("focalPoint")))};P.R.oG=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,g=d.length;e<g;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
P.R.JF=function(a){return new P.u.iq(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};P.R.bG=function(a){return new P.u.Hb(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
P.R.Ep=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",g="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),g=decodeURIComponent(a.toLowerCase()),-1<g.indexOf("%")&&(g=decodeURIComponent(g)),e.indexOf(g)==e.length-g.length)return b[c].replace(/%/g,"%25")};P.R.nO=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Za(b,"!",Sk(c),"/",Sk(a))};
P.R.IF=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var g=[],l=[],m=0,q,p,t="rgb(255,0,0)",s="",u="",v="",D="",B=0,I,G;0==a.length?c(null):(A(a,function(a){l.push(P.R.Ep(a.getAttribute("fileName"),b.files))}),0==l.length?c(null):A(l,function(a){P.get(a,function(a){m++;A(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(q=a.split(/,/),1!=q.length)){p=[parseFloat(q[1]),parseFloat(q[2]),parseFloat(q[3])];
D=q[11];t=[1,0,0];v=u=s="";B=0;len=e.length;for(I;B<len;B++)if(I=e[B],s=I.getAttribute("id"),s===q[0].replace("_","")){v=s;u=I.getAttribute("displayNodeRef");break}len=d.length;G;for(B=0;B<len;B++)if(G=d[B],s=G.getAttribute("id"),s===u){t=P.u.Gk(G.getAttribute("color")).map(function(a){return parseFloat(a)});break}g.push(new P.u.gq(p,t,q,v,u,D))}});m==l.length&&c(g)},"text")}))};
P.R.Ky=function(a,b,c){var d=[],e=a.getElementsByTagName(c),g=null,l=0,m=e.length;A(a.getElementsByTagName(b),function(a){for(l=0;l<m;l++)if(g=e[l],g.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new P.u.Aw(g.getAttribute("fileName"),a));break}});return d};P.R.kO=function(){return null};
P.R.vG=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=P.R.Ky(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],g=[],l="";A(c,function(a){l=a.Yf.getAttribute("displayNodeRef");1<l.indexOf("LabelMap")?(A(d,function(b){b.getAttribute("id")==l&&(a.hr=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.Ux=serverRoot+P.R.cC:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):g.push(a)});var m="";A(e,function(a){m=a.Yf.getAttribute("attributes").split(";");A(m,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],A(g,function(b){b.Yf.getAttribute("id")==refVol&&(b.fj=a)}.bind(this)))}.bind(this))});A(g,function(c){c.ui=new P.u.Tk(a,c.Yf,b);c.fj&&(c.ui.fj=c.fj,delete c.fj)});return g};P.R.fG=function(a){var b=P.R.Ky(a,"Model","ModelStorage");A(b,function(b){b.ui=new P.u.qt(a,b.Yf)});return b};h("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",P.R.cC);
h("gxnat.slicerUtils.extractMrmls",P.R.pF);h("gxnat.slicerUtils.getMrmlAsXml",P.R.Ry);h("gxnat.slicerUtils.getMrmlNodes",P.R.gG);h("gxnat.slicerUtils.createSceneViewProperties",P.R.LE);h("gxnat.slicerUtils.getSceneViewNodes",P.R.kG);h("gxnat.slicerUtils.getElementsFromMrml",P.R.SF);h("gxnat.slicerUtils.getSceneViewsFromMrml",P.R.lG);h("gxnat.slicerUtils.getCameraFromSceneView",P.R.MF);h("gxnat.slicerUtils.getThumbnail",P.R.oG);h("gxnat.slicerUtils.mrmlColorToRgb",P.R.tv);
h("gxnat.slicerUtils.getBackgroundColorFromSceneView",P.R.JF);h("gxnat.slicerUtils.getLayoutFromSceneView",P.R.bG);h("gxnat.slicerUtils.matchFileToSet",P.R.Ep);h("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",P.R.nO);h("gxnat.slicerUtils.getAnnotations",P.R.IF);h("gxnat.slicerUtils.getDisplayables",P.R.Ky);h("gxnat.slicerUtils.getFibers",P.R.kO);h("gxnat.slicerUtils.getVolumes",P.R.vG);h("gxnat.slicerUtils.getMeshes",P.R.fG);P.d.Df=function(a,b,c){this.sk=[];P.d.ia.call(this,"Slicer Scenes",a,b);c&&c(this)};k(P.d.Df,P.d.ia);h("gxnat.vis.Slicer",P.d.Df);P.d.Df.zJ=["jpeg","jpg","png","gif"];f=P.d.Df.prototype;f.qr="resources/Slicer/files";f.Au="?listContents=true";f.pr="File Name";f.Fl=function(a){this.Dl?Us(this,a):P.d.lc.g.Fl.call(this,function(){this.xn(function(){this.Qp();Us(this,a)}.bind(this))}.bind(this))};function Us(a,b){P.R.gG(a.sk,0,function(a){P.R.kG(a,function(d){this.zE(d,a,b)}.bind(this))}.bind(a))}
f.zE=function(a,b,c){this.XQ=b;this.rT=a;var d,e,g,l;A(this.rT,function(a){d=[a.Jk||[],a.Mz||[],a.yy||[]];e=[];A(d,function(a){A(a,function(a){g=P.R.Ep(Sk(a.file),this.sk);a.ui instanceof P.u.Tk&&a.ui.fj&&(a.ui.labelMapFile=P.R.Ep(a.ui.fj.file,this.sk),null!=a.ui.fj.Ux&&null==P.R.Ep(a.ui.fj.Ux,this.sk)&&(a.ui.colorTableFile=a.ui.fj.Ux));e.push(new P.d.Ff(g,a.ui))}.bind(this))}.bind(this));l=new P.d.rg(e);l.Cs(P.R.Ep(P.R.oG(a.element,this.XQ[0].document),this.sk));l.yh(a.element.getAttribute("name"));
l.YA(a);this.De.push(l)}.bind(this));c&&c(this)};
f.xn=function(a){var b="",c=0,d=this.sk.length;for(this.thumbnailFiles=[];c<d;c++)b=dk.Du(this.sk[c]),-1!=P.d.Df.zJ.indexOf(b)&&this.thumbnailFiles.push(this.sk[c]);window.console.log("Thumbnail files",this.thumbnailFiles);A(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=dk.Uq(dk.dirname(this.thumbnailFiles[c]))){this.Cs(this.thumbnailFiles[c]);break}window.console.log("Thumbnail files2",
this.thumbnailFiles);a&&a(this)};f.hl=function(a){ia(a)||(a=[a]);A(a,function(a){this.sk.push(a)}.bind(this))};h("gxnat.vis.Slicer.thumbnailExtensions",P.d.Df.zJ);h("gxnat.vis.Slicer.prototype.folderQuerySuffix",P.d.Df.prototype.qr);h("gxnat.vis.Slicer.prototype.fileQuerySuffix",P.d.Df.prototype.Au);h("gxnat.vis.Slicer.prototype.fileContentsKey",P.d.Df.prototype.pr);h("gxnat.vis.Slicer.prototype.getFileList",P.d.Df.prototype.Fl);h("gxnat.vis.Slicer.prototype.convertToViewableGroups",P.d.Df.prototype.zE);
h("gxnat.vis.Slicer.prototype.getThumbnailImage",P.d.Df.prototype.xn);h("gxnat.vis.Slicer.prototype.addFiles",P.d.Df.prototype.hl);/*
 Copyright 2014 Washington University
 @author sunilk@mokacreativellc.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function V(a,b,c,d){Bc.call(this);V.kH();V.VD();this.At={j:P.d.lc,PT:P.d.Df};this.Xd=null!=a?a:V.States.mo;this.CH=b;this.vI=d;this.Nv=P.ma.jG(d);window.console.log("here");this.Ui=this.Ui?this.Ui:[];window.console.log("here",c);a="/"!==c[0]?"/"+c:c;window.console.log("here1");-1===this.Ui.indexOf(this.Nv+a)&&this.Ui.push(-1===a.indexOf(this.Nv)?this.Nv+a:a);window.console.log("here");1==this.Ui.length&&(this.rf=new P.ma(this.Ui[0]))}k(V,Bc);h("xiv",V);var Rs="fa";
V.ModalStates={kg:"fullscreen",Wg:"popup",Bw:"fullscreen-popup",Ki:"windowed",mo:"demo",lK:"demp-fullscreen"};V.States={mo:"demo",vV:"live"};V.kH=function(){Pf.IMA=[Qf,null]};V.VD=function(){document.body.style.overflow="hidden"};V.lT=function(){document.body.style.overflow="visible"};f=V.prototype;f.vw=r();f.XD=300;f.ZG=1E3;f.Vu=!1;f.Xu=!1;f.VI=function(){};
f.fE=function(){Vs(this);window.console.log("show0!");this.show();window.console.log("show!");if(this.Xd==V.States.mo){S(this.Kb.ra.Wg);S(this.Kb.ra.jo);var a=Wf(function(){delete a;Ws(this)}.bind(this),this.ZG)}else window.console.log("currState!",this.Xd,this.CH),this.Kb.dd(this.CH),Xs(this)};f.CT=function(){};function Vs(a){a.Kb=new V.a.la;a.Kb.GI(serverRoot);C(a.Kb,Rs,a.AR.bind(a));window.onresize=function(){null!=this.Kb&&this.Kb.o()}.bind(a)}
f.AR=function(){this.Bf.qH(null,function(a){A(a,function(a){Ys(this,a);this.Kb.sa.Pe()}.bind(this))}.bind(this))};f.show=function(){this.Kb.b().style.opacity=0;this.Kb.p();window.console.log("showa!");C(this.Kb.sa.A,"d",this.zA.bind(this));window.console.log("showb!");C(this.Kb.ra.Wg,"click",this.TM.bind(this));C(this.Kb.ra.jo,"click",this.k.bind(this));window.console.log("showc!");this.Kb.jd.bd(!0,0,this.ZG);window.console.log("showd!");T.or(this.Kb.b(),this.XD);window.console.log("showe!")};
function Ws(a){var b=a.Kb.sa,c={slicer:(new V.qT.jW).cP(),scan:(new V.qT.iW).cP()},d;w(c,function(a,b){A(a,function(a){d="scan"==b?new this.At.j:new this.At.PT;d.hl(a.files);d.DI(!0);d.WI(a.DY);d.Cs(a.yJ);Zs(this,d,a.jY)}.bind(this))}.bind(a));b.A.sn()}
function Xs(a){var b=a.Kb.sa.A,c=0;a.Kb.sa&&C(a.Kb.sa.A,"n",a.wS.bind(a));a.Bf=new P.n(a.Ui[0]);a.Bf.nH(function(a){var e=Ys(this,a);0==c&&(this.kQ=a,this.VG=b.bd(e[0]));1==c&&(this.Xu=!0,this.lQ=a,this.gz=b.bd(e[1],this.VG));2==c&&(this.Vu=!0,this.Wu=a,this.jQ=b.bd(e[2],this.gz));c++}.bind(a))}function $s(a,b){var c=a.Bf.rr(b),d=a.Bf.KF(b),e=0;w(c,function(a,b){d[e]='<font color="black"><b>'+b.toUpperCase()+":</b></font>&nbsp&nbsp&nbsp&nbsp&nbsp"+d[e];e++});return d}
function Ys(a,b){var c=a.Bf.LF(b),d=$s(a,b);at(a,d,c);return d}function bt(a,b){a.Bf.mH(b.originalUrl,null,function(a){if(b.xk("subjects")==this.rf.xk("subjects")&&this.Xu){var d=this.rf.xk("experiments");this.Wu=this.Bf.lp(d);Pb(a,this.Wu);Sb(a,0,0,this.Wu);this.Xu=!1}A(a,function(a){Ys(this,a)}.bind(this))}.bind(a))}f.zA=function(a){if(null!=a.Yf[this.vw])switch(a=new P.ma(a.Yf[this.vw]),a.Cu()){case "subjects":bt(this,a);break;case "experiments":ct(this,a.originalUrl)}};
f.sp=function(a){T.un(this.Kb.b(),this.XD,a)};f.k=function(){this.sp(this.nN.bind(this))};function ct(a,b){if(null==a.Ez)a.Ez=[];else if(-1<a.Ez.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.Bf.rr(a.Bf.lp(b)),c=new P.d.Vc.Nz(c.projects[P.n.Be],c.subjects[P.n.Be],c.experiments[P.n.Be]);dt(a,b,function(){this.Ez.push(b);this.Vu&&(this.Vu=!1,w(this.gz.Af,function(){}.bind(this)))}.bind(a),c)}f.wS=function(a){var b=a.Yf.Hf.eu;a.Yf.Hf.eu=0;a.Yf.Hf.eu=b};
f.TM=function(){var a=open(this.vI+"/scripts/viewer/xiv/popup.html?"+this.Ui[0],"XImgView","width=1200,height=800");a.focus();var b=this.Ui[0];a.onload=function(){a.zY(b,V.ModalStates.Wg,serverRoot)}.bind(this);this.k()};function dt(a,b,c,d){et(a,b,function(a){var b=a.yk;ft(this,a,b,function(a){Zs(this,a)}.bind(this));null!=d&&(this.nd[b].ys(d.OS),this.nd[b].As(d.WT),this.nd[b].us(d.AN))}.bind(a),c)}
function at(a,b,c){var d=a.Kb.sa.A;d.br(b);zippyNodes=d.Ly(b);A(zippyNodes,function(a,b){null==c||null==c[b]||null==a[this.vw]&&(a[this.vw]=c[b])}.bind(a))}function Zs(a,b,c){var d=a.Kb.sa;null!=d&&(null==c&&null!=a.Bf&&(c=$s(a,a.Bf.lp(b.lr))),"Scans"!=b.Vj&&c.push(b.Vj),b.Fl(function(){if(0<b.De.length){var a=d.pl(b,c);if("Scans"!=b.Vj){var g=d.A.Ly(c);0<c.length&&1<g.length&&d.bd(c[c.length-1],g[g.length-2])}d.TA(this.Kb.b());a.UA(b.Xp);a.AB()}}.bind(a)))}
function ft(a,b,c,d){a.nd=a.nd?a.nd:{};null==a.nd[c]&&(a.nd[c]=b,d(b))}f.nN=function(){V.g.k.call(this);V.lT();w(this.nd,function(a,b){a.k();delete this.nd[b]}.bind(this));delete this.nd;this.Bf&&(this.Bf.k(),delete this.Bf);delete this.Ui;delete this.vI;delete this.Nv;delete this.mY;null!=this.rf&&(this.rf.k(),delete this.rf);delete this.Vu;delete this.Xu;delete this.kQ;delete this.lQ;delete this.Wu;delete this.VG;delete this.gz;delete this.jQ;ad(this.Kb);this.Kb.k();S(this.Kb.b());delete this.Kb};
function et(a,b,c,d){var e=pb(a.At),g=0;w(a.At,function(a){P.d.ia.hk(b,a,c,function(){g++;g===e&&null!=d&&d()})})}V.$G=function(){var a=!0,b=fc(),c={Chrome:{Lr:$b("Chrome")||$b("CriOS"),$r:11},IE:{Lr:cc(),$r:11},Safari:{Lr:dc(),$r:5.1},Opera:{Lr:bc(),$r:12},Firefox:{Lr:$b("Firefox"),$r:4}},d=!1;w(c,function(c){c.Lr&&!d&&1==$a(c.$r,b)&&(V.MR(),a=!1,d=!0)});a&&!V.checkForWebGL()&&(V.sS(),a=!1);return a};
V.MR=function(){var a=new U.Bd;a.qD();a.rD();var b=a.au();R(b,U.Bd.CSS.xC);b.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";a.b().style.position="fixed";a.b().style.height="240px";a.il("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>");a.sj[0].style.top="120px";a.p();a.b().style.opacity=0;T.or(a.b(),400)};
V.sS=function(){var a='<br>It looks like <a style="color: #00FFFF" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">WebGL or Experimental-WebGL</a> is disabled.<br><br>How to enable WebGL in ',b,c=':<br> <a  style="color: #00FFFF" href=';cc()?(b="Internet Explorer",c+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx</a>'):$b("Chrome")||$b("CriOS")?(b="Chrome",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):
$b("Firefox")?(b="Firefox",c+='"https://www.biodigitalhuman.com/home/enabling-webgl.html">https://www.biodigitalhuman.com/home/enabling-webgl.html</a>'):dc()?(b="Safari",c+='"https://discussions.apple.com/thread/3300585?start=0">https://discussions.apple.com/thread/3300585?start=0</a>'):bc()&&(b="Opera",c+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html</a>');a+=b+c;b=new U.Bd;
b.qD();b.rD();c=b.au();R(c,U.Bd.CSS.xC);c.src=serverRoot+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png";b.il(a);b.sj[0].style.top="120px";b.p();b.b().style.position="fixed";b.b().style.opacity=0;T.or(b.b(),400)};V.checkForWebGL=function(){var a=vh("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};h("xiv.States",V.States);h("xiv.loadCustomExtensions",V.kH);h("xiv.adjustDocumentStyle",V.VD);h("xiv.ModalStates",V.ModalStates);
h("xiv.checkForWebGL",V.checkForWebGL);h("xiv.isCompatible",V.$G);h("xiv.prototype.setServerRoot",V.prototype.VI);h("xiv.prototype.setModalType",V.prototype.CT);h("xiv.prototype.begin",V.prototype.fE);h("xiv.prototype.show",V.prototype.show);h("xiv.prototype.hide",V.prototype.sp);h("xiv.prototype.dispose",V.prototype.k);window["xiv.isCompatible"]=V.$G;window["xiv.checkForWebGL"]=V.checkForWebGL;window["xiv.ModalStates"]=V.ModalStates;V.prototype.setServerRoot=V.prototype.VI;V.prototype.begin=V.prototype.fE;
