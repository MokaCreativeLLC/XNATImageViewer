





<!-- THIS FILE WAS AUTOGENERATED BY ($XNATImageViewer)/utility-scripts/convertDemo.pyc at 2014-05-24 21:12:47 -->






<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>

<!-- BEGIN /xnat-templates/screens/XIViewer.vm -->

<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/css/menu.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/css/menuitem.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/css/menuseparator.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/css/menubutton.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/css/custombutton.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/css/checkbox.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/css/hsvpalette.css">

<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/genericslider.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/scrollablecontainer.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/scrollablezippytree.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/zippynode.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/zippytree.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/overlay.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/erroroverlay.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/infooverlay.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/thumbnail.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/thumbnailgallery.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/resizable.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/resizedragger.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/tabs.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/ziptabs.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/lib/nrg/css/slideinmenu.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/xtkcontroller.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/displayall.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/slidercontroller.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/twothumbslidercontroller.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/checkboxcontroller.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/radiobuttoncontroller.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/colorpalettecontroller.css">

<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/helpoverlay.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/viewbox.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/modal.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/thumbnail.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/thumbnailgallery.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/viewboxhandler.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/layouthandler.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/layout.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/xyzvlayout.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/conventional.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/fourup.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/twodrow.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/twodwidescreen.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/layoutframe.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/progressbarpanel.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/viewablegroupmenu.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/crosshairs.css">
<link type="text/css" rel="stylesheet" href="../../../scripts/viewer/xiv/css/framedisplay.css">

<!-- lib -->
<script src="../../../scripts/viewer/xiv/lib/closure-library/closure/goog/base.js"></script>
<script src="../../../scripts/viewer/xiv/lib/X/xtk-deps.js"></script>
<script src="../../../scripts/viewer/xiv/lib/_custom/X/xtk-custom-deps.js"></script>
<script src="../../../scripts/viewer/xiv/lib/gxnat/gxnat-deps.js"></script>
<script src="../../../scripts/viewer/xiv/lib/nrg/nrg-deps.js"></script>
<!-- lib -->

<!-- xiv -->
<script src="../../../scripts/viewer/xiv/xiv-deps.js"></script>
<!-- xiv -->
<!-- /XIViewer.vm -->
<script>
//
// requires
//
goog.require('xiv');
serverRoot = '';
goog.require('xiv.compatibility');
serverRoot = '';


//
// globals
//
XIMGVIEW_MODE = 'live';
VM_PATH = 'projects/$om.getProject()/subjects/$om.getSubjectId()/' +
'experiments/$om.getId()';


//
// Add the 'sample-data.js' file to the document head if we're in DEMO mode
//
if (XIMGVIEW_MODE == 'demo') {
var sampleData = document.createElement('script');
sampleData.src = 'sample-data/sample-data.js';
document.head.appendChild(sampleData);
}



/**
* Main launch function for the XNAT Image Viewer.
* NOTES:
*     - the 'serverRoot' property is a global defined by the VM if launched
*       directly from an XNATUrl.  Otherwise it's blank.
*
* @preserve Copyright 2014 Washington University
* @author sunilk@mokacreativellc.com (Sunil Kumar)
* @author herrickr@mir.wustl.edu (Rick Herrick)
*
* @param {!string} opt_dataPath The optional data path to begin the
*    viewer from.  Defaults to the Velocity generated URL
*    (e.g. 'projects/$om.getProject()/subjects/$om.getSubjectId()/' +
*          'experiments/$om.getId()')
*
* @param {!string} opt_modalState The modal state to set the image viewer to.
*     Defaults to 'windowed'.  Options are 'windowed', 'popup', 'fullscreen',
*     'fullscreen-popup'.
*
* @param {!string} opt_serverRoot The optional server root.
*/
function launchXImgView(opt_dataPath, opt_modalState, opt_serverRoot) {

//
// Verify compatibilities (browser, WebGL, etc.)
//
if (!xiv.compatibility.isCompatible()){
return;
}


//
// Need to set the global serverRoot property if opt_serverRoot is
// argument is given.
//
// NOTE: serverRoot automatically provided in the live version (in the VM)
// but in the demo version, we have to provide this global variable.
//
if (opt_serverRoot){
serverRoot = opt_serverRoot;
}


//
// Set the modalState argument ('windowed', 'popup', etc.)
//
var modalState = 'popup';


//
// Set the dataPath argument (i.e. where to query the data from).  Not
// necessary in the DEMO.
//
opt_dataPath = opt_dataPath || VM_PATH;


//
// Set the rootUrl argument -- varies depending on modal state.
//
var rootUrl = (opt_modalState === 'popup') ? '' : serverRoot;


//
// Create the viewer, passing in above arguments.
//
var XnatImageViewer =
new xiv(opt_modalState, opt_dataPath, rootUrl, XIMGVIEW_MODE == 'demo');


//
// Track the serverRoot property within xiv.
//
// NOTE: We track this because once we enter 'xiv' world, the global
// property of 'serverRoot' could potentially be minified to something
// entirely different.
//
XnatImageViewer.setServerRoot(serverRoot);


//
// Launch the viewer
//
XnatImageViewer.begin();


//
// Debugs, if needed...
//
//window.console.log('opt_dataPath', opt_dataPath);
//window.console.log('opt_modalState', opt_modalState);
window.console.log('XImgView launch (serverRoot)', serverRoot);
//window.console.log('imagePath', imagePath);
};
</script>
</head>
<body>

<script>

//
// Launch viewer automatically if in demo mode
//
if (XIMGVIEW_MODE == 'demo') {
//
// Launch the viewer
//
launchXImgView('','','../../..');
}

</script>
</body>


</html>
