





<!-- THIS FILE WAS AUTOGENERATED BY ($XNATImageViewer)/utility-scripts/convertDemo.pyc at 2014-03-17 00:53:41 -->






<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head> <body>

<!-- BEGIN /xnat-templates/screens/XIViewer.vm -->



<link type="text/css" rel="stylesheet" href="/lib/closure-library/closure/goog/css/menu.css">
<link type="text/css" rel="stylesheet" href="/lib/closure-library/closure/goog/css/menuitem.css">
<link type="text/css" rel="stylesheet" href="/lib/closure-library/closure/goog/css/menuseparator.css">
<link type="text/css" rel="stylesheet" href="/lib/closure-library/closure/goog/css/menubutton.css">
<link type="text/css" rel="stylesheet" href="/lib/closure-library/closure/goog/css/custombutton.css">

<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/genericslider.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/scrollablecontainer.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/zippynode.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/zippytree.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/thumbnail.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/thumbnailgallery.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/resizable.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/tabs.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/ziptabs.css">
<link type="text/css" rel="stylesheet" href="/lib/moka/ui/css/slideinmenu.css">

<link type="text/css" rel="stylesheet" href="/ui/css/viewbox.css">
<link type="text/css" rel="stylesheet" href="/ui/css/modal.css">
<link type="text/css" rel="stylesheet" href="/ui/css/thumbnail.css">
<link type="text/css" rel="stylesheet" href="/ui/css/thumbnailhandler.css">
<link type="text/css" rel="stylesheet" href="/ui/css/viewboxhandler.css">
<link type="text/css" rel="stylesheet" href="/ui/layouts/css/layouthandler.css">
<link type="text/css" rel="stylesheet" href="/ui/layouts/css/layout.css">
<link type="text/css" rel="stylesheet" href="/ui/layouts/css/xyzvlayout.css">
<link type="text/css" rel="stylesheet" href="/ui/layouts/css/conventional.css">
<link type="text/css" rel="stylesheet" href="/ui/layouts/css/fourup.css">
<link type="text/css" rel="stylesheet" href="/ui/layouts/css/plane.css">


<script src="/sample-data/XNAT_IMAGE_VIEWER_DEMO_DATA.js"></script>

<!-- lib -->
<script src="/lib/closure-library/closure/goog/base.js"></script>
<script src="/lib/X/xtk-deps.js"></script>
<script src="/lib/_custom/X/xtk-custom-deps.js"></script>
<script src="/lib/gxnat/gxnat-deps.js"></script>
<script src="/lib/moka/moka-deps.js"></script>
<!-- lib -->

<!-- xiv -->
<script src="/xiv-deps.js"></script>
<!-- xiv -->


<!-- /XIViewer.vm -->


</head>



</body>

<script>

goog.require('gxnat');
goog.require('xiv');
goog.require('xiv.ui.Modal');


var mode = 'live';
var modalState = 'popup';
var dataPath = 'sample-data/';
var imagePath = 'images/viewer/';


if (mode === 'demo'){
imagePath = 'src/main/' + imagePath;
}
else {
if (modalState === 'popup') {
imagePath = '../../' + imagePath;
}
else  {
imagePath = serverRoot + '/' + imagePath;
}
}



// NOTE: serverRoot is a global,
// it will adjust accordingly.

function launchXImgView() {
window.console.log('VIEWER LAUNCH',
'(window state)', modalState, '(serverRoot)', '(mode)', mode,
serverRoot, '(dataPath)', dataPath, '(image path)', imagePath);
//startViewer(modalState, serverRoot, dataPath, imagePath);

// loads custom extensions.
xiv.loadCustomExtensions();

// Adjusts the document for the viewer
xiv.adjustDocumentStyle();

// the XnatImageViewer object
var XnatImageViewer = new xiv(modalState, serverRoot,
gxnat.Path.getQueryPrefix(serverRoot),
imagePath);

// Awkward but necessary because of the dependency relationships.
// Ideally, the XnatImageViewer prototype would create the modal, but
// because xiv.ui.Modal is a sub-object of xiv, in creates a circular
// dependency in the goog.require list.
XnatImageViewer.setModalType(xiv.ui.Modal);

// Creates the modal
XnatImageViewer.createModal();

// Loads a given experiment, followed by the project tree.
XnatImageViewer.loadExperiment(dataPath, function() {
XnatImageViewer.loadProjectTree();
});

// Shows the modal.
XnatImageViewer.showModal();
};



//-----------------
// DEMO launch.
//-----------------
if (mode === 'demo') {
serverRoot = 'src/main';
window.onload = function(){
launchXImgView();
}
}


//-----------------
// Live-Windowed launch
//-----------------
else if (mode === 'live' && modalState === 'windowed'){
dataPath = 'projects/$om.getProject()/subjects/'
dataPath += '$om.getSubjectId()/experiments/$om.getId()';
}


//-----------------
// Live-Popup launch
//-----------------
else if (mode === 'live' && modalState === 'popup'){
dataPath = 'projects/$om.getProject()/subjects/'
dataPath += '$om.getSubjectId()/experiments/$om.getId()';
serverRoot = '';
window.onload = function(){
launchXImgView();
}

}

</script>


</html>
