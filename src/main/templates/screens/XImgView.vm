





<!-- THIS FILE WAS AUTOGENERATED BY ($XNATImageViewer)/utility-scripts/convertDemo.pyc at 2014-02-12 00:19:25 -->






#* @vtlvariable name="content" type="org.apache.turbine.services.pull.tools.ContentTool" *#
#* @vtlvariable name="displayManager" type="org.nrg.xdat.display.DisplayManager" *#
#* @vtlvariable name="om" type="org.nrg.xdat.om.XnatMrsessiondata" *#



<!-- BEGIN /xnat-templates/screens/XIViewer.vm -->



<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menu.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menuitem.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menuseparator.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menubutton.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/custombutton.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/css/genericslider.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/css/scrollablecontainer.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/css/thumbnail.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewlayoutmenu.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewbox.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/modal.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/thumbnailmanager.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/thumbnail.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/displayer.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/xtkplane.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/contentdivider.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewboxtabs.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewlayouts.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/xtk/css/controllermenu.css")">



<script src="$content.getURI("scripts/viewer/closure-library/closure/goog/base.js")"></script>
<script src="$content.getURI("scripts/viewer/utils/lib/X/xtk-deps.js")"></script>


<!-- XTK CUSOM DEPS -->
<script src="$content.getURI("scripts/viewer/utils/xtk-customizations/xtk-custom-deps.js")"></script>
<!-- XTK CUSOM DEPS -->

<script src="$content.getURI("scripts/viewer/utils/utils-deps.js")"></script>
<script src="$content.getURI("scripts/viewer/xiv/xiv-deps.js")"></script>



<!-- /XIViewer.vm -->








<script>

goog.require('xiv');

mode = 'live';
var modalState = 'windowed';
var dataPath = 'sample-data/';
var imagePath = 'images/viewer/';

if (mode === 'demo'){
imagePath = '' + imagePath;
}

else {
if (modalState === 'popup') {
imagePath = '../../' + imagePath;
}
else  {
imagePath = serverRoot + '/' + imagePath;
}
}






// NOTE: serverRoot is a global,
// it will adjust accordingly.

function launchXImgView() {
window.console.log('VIEWER LAUNCH',
'(window state)', modalState, '(serverRoot)', '(mode)', mode,
serverRoot, '(dataPath)', dataPath, '(image path)', imagePath);

xiv.startViewer(modalState, serverRoot, dataPath, imagePath);
}


//-----------------
// DEMO launch.
//-----------------
if (mode === 'demo') {
serverRoot = 'src/main';
window.onload = function(){
launchXImgView();
}
}


//-----------------
// Live-Windowed launch
//-----------------
else if (mode === 'live' && modalState === 'windowed'){
dataPath = 'projects/$om.getProject()/subjects/'
dataPath += '$om.getSubjectId()/experiments/$om.getId()';
}


//-----------------
// Live-Popup launch
//-----------------
else if (mode === 'live' && modalState === 'popup'){
dataPath = 'projects/$om.getProject()/subjects/'
dataPath += '$om.getSubjectId()/experiments/$om.getId()';
serverRoot = '';
window.onload = function(){
launchXImgView();
}

}

</script>



