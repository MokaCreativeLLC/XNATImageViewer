#* @vtlvariable name="content" type="org.apache.turbine.services.pull.tools.ContentTool" *#
#* @vtlvariable name="displayManager" type="org.nrg.xdat.display.DisplayManager" *#
#* @vtlvariable name="om" type="org.nrg.xdat.om.XnatMrsessiondata" *#



<!-- BEGIN /xnat-templates/screens/XIViewer.vm -->



<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menu.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menuitem.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menuseparator.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/menubutton.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/closure-library/closure/goog/css/custombutton.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/css/genericslider.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/css/scrollablecontainer.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/css/scrollablethumbnailgallery.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/css/thumbnail.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewlayoutmenu.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewbox.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/modal.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/thumbnail.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/slicerviewmenu.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/displayer.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/xtkplane.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/contentdivider.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewboxtabs.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/xiv/css/viewlayouts.css")">
<link type="text/css" rel="stylesheet" href="$content.getURI("scripts/viewer/utils/xtk/css/controllermenu.css")">



<script src="$content.getURI("scripts/viewer/closure-library/closure/goog/base.js")"></script>
<script src="$content.getURI("scripts/viewer/utils/lib/X/xtk-deps.js")"></script>


<!-- XTK CUSOM DEPS -->
<script src="$content.getURI("scripts/viewer/utils/xtk-customizations/xtk-custom-deps.js")"></script>
<!-- XTK CUSOM DEPS -->

<script src="$content.getURI("scripts/viewer/utils/utils-deps.js")"></script>

<script src="$content.getURI("scripts/viewer/xiv/xiv-deps.js")"></script>

<script src="$content.getURI("scripts/viewer/xiv/xiv.start.js")"></script>





<!-- /XIViewer.vm -->










<script>


XNAT_IMAGE_VIEWER_MODE = 'live';


//-----------------
// DEMO launch.
//-----------------
if (XNAT_IMAGE_VIEWER_MODE === 'demo') {
XNAT_DATA_PATH = 'sample-data/';
XNAT_SERVER_ROOT = 'src/main';
startViewer(XNAT_SERVER_ROOT, XNAT_DATA_PATH);
}



//-----------------
// LIVE launch.
//-----------------
else if (XNAT_IMAGE_VIEWER_MODE === 'live'){
XNAT_DATA_PATH = 'projects/$om.getProject()/subjects/$om.getSubjectId()/experiments/$om.getId()';
XNAT_SERVER_ROOT = serverRoot;
function launchXImgView() {
startViewer(XNAT_SERVER_ROOT, XNAT_DATA_PATH);
}
}




//-----------------
// Popup launch.
//-----------------
else if (XNAT_IMAGE_VIEWER_MODE === 'popup'){

    docUrl = document.URL;
    XNAT_DATA_PATH = docUrl.split('?')[1];
    serverRoot = docUrl.split('/scripts')[0];
    XNAT_SERVER_ROOT = serverRoot;
    startViewer(XNAT_SERVER_ROOT, XNAT_DATA_PATH);

}

</script>



